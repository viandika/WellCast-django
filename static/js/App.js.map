{"version":3,"sources":["index.js","select-custom.js"],"names":["setMultiSelect","$","select2","multiple","placeholder","closeOnSelect","theme","dropdownParent","dropdownPosition","htmx","on","evt","let","percentage","detail","loaded","total","find","setAttribute","toFixed","innerHTML","onLoad","window","closeModal","container","document","getElementById","backdrop","modal","classList","remove","setTimeout","removeChild","closePreviewModal","closePredPreviewModal","Defaults","fn","amd","require","AttachBody","extend","defaults","prototype","_positionDropdown","$window","isCurrentlyAbove","this","$dropdown","hasClass","isCurrentlyBelow","newDirection","offset","$container","bottom","top","outerHeight","height","dropdown","viewport","scrollTop","enoughRoomAbove","enoughRoomBelow","css","left","$offsetParent","$dropdownParent","parentOffset","offsetParent","dropdownPositionOption","options","get","removeClass","addClass","$dropdownContainer"],"mappings":"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","file":"App.js","sourcesContent":["$(function () {\r\n  setMultiSelect();\r\n\r\n  htmx.on(\"#file_upload_form\", \"htmx:xhr:progress\", function (evt) {\r\n    let percentage = (evt.detail.loaded / evt.detail.total) * 100;\r\n    htmx.find(\"#progress\").setAttribute(\"aria-valuenow\", percentage.toFixed(0));\r\n    htmx\r\n      .find(\"#progress\")\r\n      .setAttribute(\"style\", \"width:\" + percentage.toFixed(0) + \"%\");\r\n    htmx.find(\"#progress\").innerHTML = percentage.toFixed(0) + \"%\";\r\n  });\r\n  htmx.onLoad(function () {\r\n    setMultiSelect();\r\n  });\r\n});\r\n\r\nfunction setMultiSelect() {\r\n  $(\"#selected_las\").select2({\r\n    multiple: true,\r\n    placeholder: \"Click here to select files\",\r\n    closeOnSelect: false,\r\n    theme: \"bootstrap-5\",\r\n    //   {#selectionCssClass: \"select2--small\", // For Select2 v4.1#}\r\n    //   {#dropdownCssClass: \"select2--small\",#}\r\n  });\r\n  $(\"#selected_logs\").select2({\r\n    dropdownParent: $(\"#preview-las-modal\"),\r\n    multiple: true,\r\n    placeholder: \"Click here to select logs\",\r\n    closeOnSelect: false,\r\n    theme: \"bootstrap-5\",\r\n  });\r\n  $(\"#selected_log\").select2({\r\n    dropdownPosition: \"below\",\r\n    multiple: true,\r\n    placeholder: \"Click here to select logs\",\r\n    closeOnSelect: false,\r\n    theme: \"bootstrap-5\",\r\n  });\r\n}\r\n\r\nwindow.closeModal = function closeModal() {\r\n  const container = document.getElementById(\"feedback-modals-here\");\r\n  const backdrop = document.getElementById(\"feedback-modal-backdrop\");\r\n  const modal = document.getElementById(\"feedback-modal\");\r\n\r\n  modal.classList.remove(\"show\");\r\n  backdrop.classList.remove(\"show\");\r\n\r\n  setTimeout(function () {\r\n    container.removeChild(backdrop);\r\n    container.removeChild(modal);\r\n  }, 200);\r\n};\r\nwindow.closePreviewModal = function closePreviewModal() {\r\n  const container = document.getElementById(\"las-preview-train-modal-here\");\r\n  const backdrop = document.getElementById(\"preview-las-modal-backdrop\");\r\n  const modal = document.getElementById(\"preview-las-modal\");\r\n\r\n  modal.classList.remove(\"show\");\r\n  backdrop.classList.remove(\"show\");\r\n\r\n  setTimeout(function () {\r\n    container.removeChild(backdrop);\r\n    container.removeChild(modal);\r\n  }, 200);\r\n};\r\n\r\nwindow.closePredPreviewModal = function closePredPreviewModal() {\r\n  const container = document.getElementById(\"preview-las-modals-here\");\r\n  const backdrop = document.getElementById(\"preview-las-modal-backdrop\");\r\n  const modal = document.getElementById(\"preview-las-modal\");\r\n\r\n  modal.classList.remove(\"show\");\r\n  backdrop.classList.remove(\"show\");\r\n\r\n  setTimeout(function () {\r\n    container.removeChild(backdrop);\r\n    container.removeChild(modal);\r\n  }, 200);\r\n};\r\n","$(function () {\r\n  var Defaults = $.fn.select2.amd.require(\"select2/defaults\");\r\n\r\n  $.extend(Defaults.defaults, {\r\n    dropdownPosition: \"auto\",\r\n  });\r\n\r\n  var AttachBody = $.fn.select2.amd.require(\"select2/dropdown/attachBody\");\r\n\r\n  var _positionDropdown = AttachBody.prototype._positionDropdown;\r\n\r\n  AttachBody.prototype._positionDropdown = function () {\r\n    var $window = $(window);\r\n\r\n    var isCurrentlyAbove = this.$dropdown.hasClass(\"select2-dropdown--above\");\r\n    var isCurrentlyBelow = this.$dropdown.hasClass(\"select2-dropdown--below\");\r\n\r\n    var newDirection = null;\r\n\r\n    var offset = this.$container.offset();\r\n\r\n    offset.bottom = offset.top + this.$container.outerHeight(false);\r\n\r\n    var container = {\r\n      height: this.$container.outerHeight(false),\r\n    };\r\n\r\n    container.top = offset.top;\r\n    container.bottom = offset.top + container.height;\r\n\r\n    var dropdown = {\r\n      height: this.$dropdown.outerHeight(false),\r\n    };\r\n\r\n    var viewport = {\r\n      top: $window.scrollTop(),\r\n      bottom: $window.scrollTop() + $window.height(),\r\n    };\r\n\r\n    var enoughRoomAbove = viewport.top < offset.top - dropdown.height;\r\n    var enoughRoomBelow = viewport.bottom > offset.bottom + dropdown.height;\r\n\r\n    var css = {\r\n      left: offset.left,\r\n      top: container.bottom,\r\n    };\r\n\r\n    // Determine what the parent element is to use for calciulating the offset\r\n    var $offsetParent = this.$dropdownParent;\r\n\r\n    // For statically positoned elements, we need to get the element\r\n    // that is determining the offset\r\n    if ($offsetParent.css(\"position\") === \"static\") {\r\n      $offsetParent = $offsetParent.offsetParent();\r\n    }\r\n\r\n    var parentOffset = $offsetParent.offset();\r\n\r\n    css.top -= parentOffset.top;\r\n    css.left -= parentOffset.left;\r\n\r\n    var dropdownPositionOption = this.options.get(\"dropdownPosition\");\r\n\r\n    if (\r\n      dropdownPositionOption === \"above\" ||\r\n      dropdownPositionOption === \"below\"\r\n    ) {\r\n      newDirection = dropdownPositionOption;\r\n    } else {\r\n      if (!isCurrentlyAbove && !isCurrentlyBelow) {\r\n        newDirection = \"below\";\r\n      }\r\n\r\n      if (!enoughRoomBelow && enoughRoomAbove && !isCurrentlyAbove) {\r\n        newDirection = \"above\";\r\n      } else if (!enoughRoomAbove && enoughRoomBelow && isCurrentlyAbove) {\r\n        newDirection = \"below\";\r\n      }\r\n    }\r\n\r\n    if (\r\n      newDirection == \"above\" ||\r\n      (isCurrentlyAbove && newDirection !== \"below\")\r\n    ) {\r\n      css.top = container.top - parentOffset.top - dropdown.height;\r\n    }\r\n\r\n    if (newDirection != null) {\r\n      this.$dropdown\r\n        .removeClass(\"select2-dropdown--below select2-dropdown--above\")\r\n        .addClass(\"select2-dropdown--\" + newDirection);\r\n      this.$container\r\n        .removeClass(\"select2-container--below select2-container--above\")\r\n        .addClass(\"select2-container--\" + newDirection);\r\n    }\r\n\r\n    this.$dropdownContainer.css(css);\r\n  };\r\n});\r\n"]}