(function(e,t){const r=t();r.__bokeh__=true;if(typeof e.Bokeh==="undefined"||typeof e.Bokeh.__bokeh__==="undefined"){e.Bokeh=r}const n=e.Bokeh;n[r.version]=r})(this,function(){var He;var h=typeof require==="function"&&require;return function(o,i,s,l){if(s===undefined)s={};if(l===undefined)l={};var c={};var u=function(e){if(typeof e==="number")return e;if(e==="bokehjs")return i;if(!l[e]){var t="@bokehjs/";if(e.slice(0,t.length)===t)e=e.slice(t.length)}var r=s[e];if(r!=null)return r;var n=e.length>0&&e[e.lenght-1]==="/";var a=s[e+(n?"":"/")+"index"];if(a!=null)return a;return e};var f=function(e){var r=c[e];if(!r){var t=u(e);r=c[t];if(!r){if(!o[t]){if(l[t]===false||l[t]==true&&h){try{r={exports:l[t]?h(t):{}};c[t]=c[e]=r;return r.exports}catch(e){}}var n=new Error("Cannot find module '"+e+"'");n.code="MODULE_NOT_FOUND";throw n}r={exports:{}};c[t]=c[e]=r;function a(){Object.defineProperty(r.exports,"__esModule",{value:true})}function i(e,t){Object.defineProperty(r.exports,e,{enumerable:true,get:function(){return t}})}o[t].call(r.exports,f,r,r.exports,a,i)}else{c[e]=r}}return r.exports};f.resolve=function(e){return""};var d=f(i);d.require=f;if(typeof Proxy!=="undefined"){d.loader=new Proxy({},{get:function(e,t){return f(t)}})}d.register_plugin=function(e,t,r,n){if(r===undefined)r={};if(n===undefined)n={};for(var a in e){o[a]=e[a]}for(var a in r){s[a]=r[a]}for(var a in n){l[a]=n[a]}var i=f(t);for(var a in i){d[a]=i[a]}return i};return d}([function e(t,e,r,n,a){n();t(1).__exportStar(t(2),r)},function e(t,r,n,a,i){a();var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};n.__extends=function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};function s(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o}function f(e){return this instanceof f?(this.v=e,this):new f(e)}n.__assign=function(){return n.__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},n.__assign.apply(this,arguments)},n.__rest=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},n.__decorate=function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},n.__param=function(r,n){return function(e,t){n(e,t,r)}},n.__metadata=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},n.__awaiter=function(e,o,s,l){return new(s||(s=Promise))(function(r,t){function n(e){try{i(l.next(e))}catch(e){t(e)}}function a(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(n,a)}i((l=l.apply(e,o||[])).next())})},n.__generator=function(r,n){var a,i,o,e,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,i&&(o=2&t[0]?i.return:t[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,t[1])).done)return o;switch(i=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==t[0]&&2!==t[0])){s=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){s.label=t[1];break}if(6===t[0]&&s.label<o[1]){s.label=o[1],o=t;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(t);break}o[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(r,s)}catch(e){t=[6,e],i=0}finally{a=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},n.__createBinding=Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},n.__exportStar=function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n.__createBinding(t,e,r)},n.__values=s,n.__read=l,n.__spread=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e},n.__spreadArrays=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n},n.__await=f,n.__asyncGenerator=function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,i=r.apply(e,t||[]),o=[];return a={},n("next"),n("throw"),n("return"),a[Symbol.asyncIterator]=function(){return this},a;function n(n){i[n]&&(a[n]=function(r){return new Promise(function(e,t){o.push([n,r,e,t])>1||s(n,r)})})}function s(e,t){try{(r=i[e](t)).value instanceof f?Promise.resolve(r.value.v).then(l,c):u(o[0][2],r)}catch(e){u(o[0][3],e)}var r}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}},n.__asyncDelegator=function(n){var e,a;return e={},t("next"),t("throw",function(e){throw e}),t("return"),e[Symbol.iterator]=function(){return this},e;function t(t,r){e[t]=n[t]?function(e){return(a=!a)?{value:f(n[t](e)),done:"return"===t}:r?r(e):e}:r}},n.__asyncValues=function(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=a[Symbol.asyncIterator];return t?t.call(a):(a=s(a),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=a[n]&&function(r){return new Promise(function(e,t){(function(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)})(e,t,(r=a[n](r)).done,r.value)})}}},n.__makeTemplateObject=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};var c=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};n.__importStar=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n.__createBinding(t,e,r);return c(t,e),t},n.__importDefault=function(e){return e&&e.__esModule?e:{default:e}},n.__classPrivateFieldGet=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},n.__classPrivateFieldSet=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},function e(t,r,n,a,i){a();const o=t(1);i("version",t(3).version),i("index",t(4).index),n.embed=o.__importStar(t(4)),n.protocol=o.__importStar(t(404)),n._testing=o.__importStar(t(405));var s=t(19);i("logger",s.logger),i("set_log_level",s.set_log_level),i("settings",t(28).settings),i("Models",t(7).Models),i("documents",t(5).documents),i("safely",t(406).safely)},function e(t,r,n,a,i){a(),n.version="2.3.1"},function s(e,t,r,n,a){n();const o=e(5),l=e(19),s=e(34),c=e(13),u=e(8),f=e(16),d=e(395),h=e(397),p=e(396);var i=e(395);a("add_document_standalone",i.add_document_standalone),a("index",i.index),a("add_document_from_session",e(397).add_document_from_session);var v=e(402);async function g(e,t,r,n){u.isString(e)&&(e=JSON.parse(s.unescape(e)));const a={};for(const[t,r]of c.entries(e))a[t]=o.Document.from_json(r);const i=[];for(const e of t){const t=p._resolve_element(e),o=p._resolve_root_elements(e);if(null!=e.docid)i.push(await d.add_document_standalone(a[e.docid],t,o,e.use_for_title));else{if(null==e.token)throw new Error("Error rendering Bokeh items: either 'docid' or 'token' was expected.");{const a=h._get_ws_url(r,n);l.logger.debug(`embed: computed ws url: ${a}`);try{i.push(await h.add_document_from_session(a,e.token,t,o,e.use_for_title)),console.log("Bokeh items were rendered successfully")}catch(e){console.log("Error rendering Bokeh items:",e)}}}}return i}a("embed_items_notebook",v.embed_items_notebook),a("kernels",v.kernels),a("BOKEH_ROOT",e(396).BOKEH_ROOT),r.embed_item=async function(e,t){const r={},n=s.uuid4();r[n]=e.doc,null==t&&(t=e.target_id);const a=document.getElementById(t);null!=a&&a.classList.add(p.BOKEH_ROOT);const i={roots:{[e.root_id]:t},root_ids:[e.root_id],docid:n};await f.defer();const[o]=await g(r,[i]);return o},r.embed_items=async function(e,t,r,n){return await f.defer(),g(e,t,r,n)}},function e(t,e,r,n,a){n();const i=t(1);i.__exportStar(t(6),r),i.__exportStar(t(35),r)},function u(e,t,r,n,a){n();const i=e(1),f=e(7),d=e(3),u=e(19),o=e(264),c=e(14),h=e(30),s=e(15),l=e(17),p=e(31),v=e(9),g=e(13),m=i.__importStar(e(132)),_=e(26),y=e(8),b=e(319),x=e(130),w=e(53),A=e(394),T=e(35);class k{constructor(e){this.document=e,this.session=null,this.subscribed_models=new Set}send_event(e){const t=new T.MessageSentEvent(this.document,"bokeh_event",e.to_json());this.document._trigger_on_change(t)}trigger(t){for(const e of this.subscribed_models)null!=t.origin&&t.origin!=e||e._process_event(t)}}r.EventManager=k,k.__name__="EventManager",r.documents=[],r.DEFAULT_TITLE="Bokeh Application";class M{constructor(e){var t;r.documents.push(this),this._init_timestamp=Date.now(),this._resolver=null!==(t=null==e?void 0:e.resolver)&&void 0!==t?t:new f.ModelResolver,this._title=r.DEFAULT_TITLE,this._roots=[],this._all_models=new Map,this._all_models_freeze_count=0,this._callbacks=new Map,this._message_callbacks=new Map,this.event_manager=new k(this),this.idle=new s.Signal0(this,"idle"),this._idle_roots=new WeakMap,this._interactive_timestamp=null,this._interactive_plot=null}get layoutables(){return this._roots.filter(e=>e instanceof b.LayoutDOM)}get is_idle(){for(const e of this.layoutables)if(!this._idle_roots.has(e))return!1;return!0}notify_idle(e){this._idle_roots.set(e,!0),this.is_idle&&(u.logger.info(`document idle at ${Date.now()-this._init_timestamp} ms`),this.event_manager.send_event(new o.DocumentReady),this.idle.emit())}clear(){this._push_all_models_freeze();try{for(;this._roots.length>0;)this.remove_root(this._roots[0])}finally{this._pop_all_models_freeze()}}interactive_start(e){null==this._interactive_plot&&(this._interactive_plot=e,this._interactive_plot.trigger_event(new o.LODStart)),this._interactive_timestamp=Date.now()}interactive_stop(){null!=this._interactive_plot&&this._interactive_plot.trigger_event(new o.LODEnd),this._interactive_plot=null,this._interactive_timestamp=null}interactive_duration(){return null==this._interactive_timestamp?-1:Date.now()-this._interactive_timestamp}destructively_move(t){if(t===this)throw new Error("Attempted to overwrite a document with itself");t.clear();const r=v.copy(this._roots);this.clear();for(const t of r)if(null!=t.document)throw new Error(`Somehow we didn't detach ${t}`);if(0!=this._all_models.size)throw new Error(`this._all_models still had stuff in it: ${this._all_models}`);for(const e of r)t.add_root(e);t.set_title(this._title)}_push_all_models_freeze(){this._all_models_freeze_count+=1}_pop_all_models_freeze(){this._all_models_freeze_count-=1,0===this._all_models_freeze_count&&this._recompute_all_models()}_invalidate_all_models(){u.logger.debug("invalidating document models"),0===this._all_models_freeze_count&&this._recompute_all_models()}_recompute_all_models(){let e=new Set;for(const t of this._roots)e=m.union(e,t.references());const t=new Set(this._all_models.values()),r=m.difference(t,e),n=m.difference(e,t),a=new Map;for(const t of e)a.set(t.id,t);for(const e of r)e.detach_document();for(const e of n)e.attach_document(this);this._all_models=a}roots(){return this._roots}add_root(e,t){if(u.logger.debug(`Adding root: ${e}`),!v.includes(this._roots,e)){this._push_all_models_freeze();try{this._roots.push(e)}finally{this._pop_all_models_freeze()}this._trigger_on_change(new T.RootAddedEvent(this,e,t))}}remove_root(e,t){const r=this._roots.indexOf(e);if(!(r<0)){this._push_all_models_freeze();try{this._roots.splice(r,1)}finally{this._pop_all_models_freeze()}this._trigger_on_change(new T.RootRemovedEvent(this,e,t))}}title(){return this._title}set_title(e,t){e!==this._title&&(this._title=e,this._trigger_on_change(new T.TitleChangedEvent(this,e,t)))}get_model_by_id(e){var t;return null!==(t=this._all_models.get(e))&&void 0!==t?t:null}get_model_by_name(t){const r=[];for(const e of this._all_models.values())e instanceof w.Model&&e.name==t&&r.push(e);switch(r.length){case 0:return null;case 1:return r[0];default:throw new Error(`Multiple models are named '${t}'`)}}on_message(e,t){const r=this._message_callbacks.get(e);null==r?this._message_callbacks.set(e,new Set([t])):r.add(t)}remove_on_message(e,t){var r;null===(r=this._message_callbacks.get(e))||void 0===r||r.delete(t)}_trigger_on_message(e,t){const r=this._message_callbacks.get(e);if(null!=r)for(const e of r)e(t)}on_change(e,t=!1){this._callbacks.has(e)||this._callbacks.set(e,t)}remove_on_change(e){this._callbacks.delete(e)}_trigger_on_change(r){for(const[t,e]of this._callbacks)if(!e&&r instanceof T.DocumentEventBatch)for(const e of r.events)t(e);else t(r)}_notify_change(e,t,r,n,a){this._trigger_on_change(new T.ModelChangedEvent(this,e,t,r,n,null==a?void 0:a.setter_id,null==a?void 0:a.hint))}static _instantiate_object(e,t,r,n){const a=Object.assign(Object.assign({},r),{id:e,__deferred__:!0});return new(n.get(t))(a)}static _instantiate_references_json(a,i,o){var s;const l=new Map;for(const n of a){const a=n.id,e=n.type,t=null!==(s=n.attributes)&&void 0!==s?s:{};let r=i.get(a);null==r&&(r=M._instantiate_object(a,e,t,o),null!=n.subtype&&r.set_subtype(n.subtype)),l.set(r.id,r)}return l}static _resolve_refs(e,r,n,a){function i(e){var t;if(l.is_ref(e)){const a=null!==(t=r.get(e.id))&&void 0!==t?t:n.get(e.id);if(null!=a)return a;throw new Error(`reference ${JSON.stringify(e)} isn't known (not in Document?)`)}return p.is_NDArray_ref(e)?p.decode_NDArray(e,a):y.isArray(e)?function(t){const r=[];for(const e of t)r.push(i(e));return r}(e):y.isPlainObject(e)?function(r){const n={};for(const[e,t]of g.entries(r))n[e]=i(t);return n}(e):e}return i(e)}static _initialize_references_json(t,r,n,a){const i=new Map;for(const{id:o,attributes:s}of t){const t=!r.has(o),l=t?n.get(o):r.get(o),e=M._resolve_refs(s,r,n,a);l.setv(e,{silent:!0}),i.set(o,{instance:l,is_new:t})}const o=[],s=new Set;function l(n){if(n instanceof c.HasProps){if(i.has(n.id)&&!s.has(n.id)){s.add(n.id);const{instance:e,is_new:t}=i.get(n.id),{attributes:r}=e;for(const n of g.values(r))l(n);t&&(e.finalize(),o.push(e))}}else if(y.isArray(n))for(const e of n)l(e);else if(y.isPlainObject(n))for(const e of g.values(n))l(e)}for(const t of i.values())l(t.instance);for(const t of o)t.connect_signals()}static _event_for_attribute_change(t,r,n,a,i){if(a.get_model_by_id(t.id).property(r).syncable){const e={kind:"ModelChanged",model:{id:t.id},attr:r,new:n};return c.HasProps._json_record_references(a,n,i,{recursive:!0}),e}return null}static _events_to_sync_objects(e,t,r,n){const a=Object.keys(e.attributes),i=Object.keys(t.attributes),o=v.difference(a,i),s=v.difference(i,a),l=v.intersection(a,i),c=[];for(const e of o)u.logger.warn(`Server sent key ${e} but we don't seem to have it in our JSON`);for(const a of s){const i=t.attributes[a];c.push(M._event_for_attribute_change(e,a,i,r,n))}for(const a of l){const i=e.attributes[a],o=t.attributes[a];null==i&&null==o||(null==i||null==o?c.push(M._event_for_attribute_change(e,a,o,r,n)):_.is_equal(i,o)||c.push(M._event_for_attribute_change(e,a,o,r,n)))}return c.filter(e=>null!=e)}static _compute_patch_since_json(e,t){const r=t.to_json(!1);function n(t){const r=new Map;for(const e of t.roots.references)r.set(e.id,e);return r}const a=n(e),i=new Map,o=[];for(const t of e.roots.root_ids)i.set(t,a.get(t)),o.push(t);const s=n(r),l=new Map,c=[];for(const e of r.roots.root_ids)l.set(e,s.get(e)),c.push(e);if(o.sort(),c.sort(),v.difference(o,c).length>0||v.difference(c,o).length>0)throw new Error("Not implemented: computing add/remove of document roots");const u=new Set;let f=[];for(const e of t._all_models.keys())if(a.has(e)){const r=M._events_to_sync_objects(a.get(e),s.get(e),t,u);f=f.concat(r)}const d=new h.Serializer({include_defaults:!1});return d.to_serializable([...u]),{references:[...d.definitions],events:f}}to_json_string(e=!0){return JSON.stringify(this.to_json(e))}to_json(e=!0){const t=new h.Serializer({include_defaults:e}),r=t.to_serializable(this._roots);return{version:d.version,title:this._title,roots:{root_ids:r.map(e=>e.id),references:[...t.definitions]}}}static from_json_string(e){const t=JSON.parse(e);return M.from_json(t)}static from_json(e){u.logger.debug("Creating Document from JSON");const t=e.version,r=-1!==t.indexOf("+")||-1!==t.indexOf("-"),n=`Library versions: JS (${d.version}) / Python (${t})`;r||d.version.replace(/-(dev|rc)\./,"$1")==t?u.logger.debug(n):(u.logger.warn("JS/Python version mismatch"),u.logger.warn(n));const a=new f.ModelResolver;null!=e.defs&&A.resolve_defs(e.defs,a);const i=e.roots,o=i.root_ids,s=i.references,l=M._instantiate_references_json(s,new Map,a);M._initialize_references_json(s,new Map,l,new Map);const c=new M({resolver:a});for(const e of o){const t=l.get(e);null!=t&&c.add_root(t)}return c.set_title(e.title),c}replace_with_json(e){M.from_json(e).destructively_move(this)}create_json_patch_string(e){return JSON.stringify(this.create_json_patch(e))}create_json_patch(e){for(const t of e)if(t.document!=this)throw new Error("Cannot create a patch using events from a different document");const t=new h.Serializer,r=t.to_serializable(e);for(const e of this._all_models.values())t.remove_def(e);return{events:r,references:[...t.definitions]}}apply_json_patch(t,r=new Map,n){const a=t.references,e=t.events,i=M._instantiate_references_json(a,this._all_models,this._resolver);r instanceof Map||(r=new Map(r));for(const t of e)switch(t.kind){case"RootAdded":case"RootRemoved":case"ModelChanged":{const r=t.model.id,n=this._all_models.get(r);if(null!=n)i.set(r,n);else if(!i.has(r))throw u.logger.warn(`Got an event for unknown model ${t.model}"`),new Error("event model wasn't known");break}}const o=new Map(this._all_models),s=new Map;for(const[t,r]of i)o.has(t)||s.set(t,r);M._initialize_references_json(a,o,s,r);for(const t of e)switch(t.kind){case"MessageSent":{const{msg_type:n,msg_data:a}=t;let e;if(void 0===a){if(1!=r.size)throw new Error("expected exactly one buffer");{const[[,t]]=r;e=t}}else e=M._resolve_refs(a,o,s,r);this._trigger_on_message(n,e);break}case"ModelChanged":{const a=t.model.id,e=this._all_models.get(a);if(null==e)throw new Error(`Cannot apply patch to ${a} which is not in the document`);const i=t.attr,u=M._resolve_refs(t.new,o,s,r);e.setv({[i]:u},{setter_id:n});break}case"ColumnDataChanged":{const a=t.column_source.id,e=this._all_models.get(a);if(null==e)throw new Error(`Cannot stream to ${a} which is not in the document`);const i=M._resolve_refs(t.new,new Map,new Map,r);if(null!=t.cols)for(const t in e.data)t in i||(i[t]=e.data[t]);e.setv({data:i},{setter_id:n,check_eq:!1});break}case"ColumnsStreamed":{const r=t.column_source.id,a=this._all_models.get(r);if(null==a)throw new Error(`Cannot stream to ${r} which is not in the document`);if(!(a instanceof x.ColumnDataSource))throw new Error("Cannot stream to non-ColumnDataSource");const e=t.data,i=t.rollover;a.stream(e,i,n);break}case"ColumnsPatched":{const r=t.column_source.id,a=this._all_models.get(r);if(null==a)throw new Error(`Cannot patch ${r} which is not in the document`);if(!(a instanceof x.ColumnDataSource))throw new Error("Cannot patch non-ColumnDataSource");const e=t.patches;a.patch(e,n);break}case"RootAdded":{const r=t.model.id,a=i.get(r);this.add_root(a,n);break}case"RootRemoved":{const r=t.model.id,a=i.get(r);this.remove_root(a,n);break}case"TitleChanged":this.set_title(t.title,n);break;default:throw new Error("Unknown patch event "+JSON.stringify(t))}}}r.Document=M,M.__name__="Document"},function e(t,r,a,n,i){n();const o=t(1),s=t(8),l=t(13),c=t(14);a.overrides={};const u=new Map;a.Models=e=>{const t=a.Models.get(e);if(null!=t)return t;throw new Error(`Model '${e}' does not exist. This could be due to a widget or a custom model not being registered before first usage.`)},a.Models.get=e=>{var t;return null!==(t=a.overrides[e])&&void 0!==t?t:u.get(e)},a.Models.register=(e,t)=>{a.overrides[e]=t},a.Models.unregister=e=>{delete a.overrides[e]},a.Models.register_models=(t,r=!1,n)=>{var a;if(null!=t)for(const e of s.isArray(t)?t:l.values(t))if(a=e,s.isObject(a)&&a.prototype instanceof c.HasProps){const t=e.__qualified__;r||!u.has(t)?u.set(t,e):null!=n?n(t):console.warn(`Model '${t}' was already registered`)}},a.register_models=a.Models.register_models,a.Models.registered_names=()=>[...u.keys()];class f{constructor(){this._known_models=new Map}get(e,t){var r;const n=null!==(r=a.Models.get(e))&&void 0!==r?r:this._known_models.get(e);if(null!=n)return n;if(void 0!==t)return t;throw new Error(`Model '${e}' does not exist. This could be due to a widget or a custom model not being registered before first usage.`)}register(e){const t=e.__qualified__;null==this.get(t,null)?this._known_models.set(t,e):console.warn(`Model '${t}' was already registered with this resolver`)}}a.ModelResolver=f,f.__name__="ModelResolver";const e=o.__importStar(t(38));a.register_models(e)},function e(t,r,n,a,i){a();const o=t(9),s=Object.prototype.toString;function l(e){return!0===e||!1===e||"[object Boolean]"===s.call(e)}function c(e){return"[object Number]"===s.call(e)}function u(e){return"[object String]"===s.call(e)}function f(e){const t=typeof e;return"function"===t||"object"===t&&!!e}function d(e){return f(e)&&void 0!==e[Symbol.iterator]}n.isBoolean=l,n.isNumber=c,n.isInteger=function(e){return c(e)&&Number.isInteger(e)},n.isString=u,n.isPrimitive=function(e){return null===e||l(e)||c(e)||u(e)},n.isFunction=function(e){return"[object Function]"===s.call(e)},n.isArray=function(e){return Array.isArray(e)},n.isArrayOf=function(e,t){return o.every(e,t)},n.isArrayableOf=function(r,n){for(let e=0,t=r.length;e<t;e++)if(!n(r[e]))return!1;return!0},n.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},n.isObject=f,n.isPlainObject=function(e){return f(e)&&(null==e.constructor||e.constructor===Object)},n.isIterable=d,n.isArrayable=function(e){return d(e)&&"length"in e}},function e(t,r,n,a,i){a();const o=t(10),c=t(11),s=t(12);i("map",s.map),i("reduce",s.reduce),i("min",s.min),i("min_by",s.min_by),i("max",s.max),i("max_by",s.max_by),i("sum",s.sum),i("cumsum",s.cumsum),i("every",s.every),i("some",s.some),i("find",s.find),i("find_last",s.find_last),i("find_index",s.find_index),i("find_last_index",s.find_last_index),i("sorted_index",s.sorted_index),i("is_empty",s.is_empty);const l=Array.prototype.slice;function u(e){return l.call(e)}function f(e){return[].concat(...e)}function d(e,t){return-1!==e.indexOf(t)}function h(t,e,r=1){c.assert(r>0,"'step' must be a positive number"),null==e&&(e=t,t=0);const{max:n,ceil:a,abs:i}=Math,o=t<=e?r:-r,s=n(a(i(e-t)/r),0),l=new Array(s);for(let e=0;e<s;e++,t+=o)l[e]=t;return l}n.head=function(e){return e[0]},n.tail=function(e){return e[e.length-1]},n.last=function(e){return e[e.length-1]},n.copy=u,n.concat=f,n.includes=d,n.contains=d,n.nth=function(e,t){return e[t>=0?t:e.length+t]},n.zip=function(...r){if(0==r.length)return[];const e=s.min(r.map(e=>e.length)),n=r.length,a=new Array(e);for(let t=0;t<e;t++){a[t]=new Array(n);for(let e=0;e<n;e++)a[t][e]=r[e][t]}return a},n.unzip=function(r){const n=r.length,a=s.min(r.map(e=>e.length)),i=Array(a);for(let e=0;e<a;e++)i[e]=new Array(n);for(let t=0;t<n;t++)for(let e=0;e<a;e++)i[e][t]=r[t][e];return i},n.range=h,n.linspace=function(t,e,r=100){const n=(e-t)/(r-1),a=new Array(r);for(let e=0;e<r;e++)a[e]=t+n*e;return a},n.transpose=function(r){const n=r.length,e=r[0].length,a=[];for(let t=0;t<e;t++){a[t]=[];for(let e=0;e<n;e++)a[t][e]=r[e][t]}return a},n.argmin=function(t){return s.min_by(h(t.length),e=>t[e])},n.argmax=function(t){return s.max_by(h(t.length),e=>t[e])},n.sort_by=function(e,r){const t=e.map((e,t)=>({value:e,index:t,key:r(e)}));return t.sort((e,t)=>{const r=e.key,n=t.key;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index}),t.map(e=>e.value)},n.uniq=function(t){const r=new Set;for(const e of t)r.add(e);return[...r]},n.uniq_by=function(t,r){const n=[],a=[];for(const e of t){const t=r(e);d(a,t)||(a.push(t),n.push(e))}return n},n.union=function(...t){const r=new Set;for(const e of t)for(const t of e)r.add(t);return[...r]},n.intersection=function(t,...r){const n=[];e:for(const e of t)if(!d(n,e)){for(const t of r)if(!d(t,e))continue e;n.push(e)}return n},n.difference=function(e,...t){const r=f(t);return e.filter(e=>!d(r,e))},n.remove_at=function(e,t){const r=u(e);return r.splice(t,1),r},n.remove_by=function(t,r){for(let e=0;e<t.length;)r(t[e])?t.splice(e,1):e++},n.shuffle=function(t){const r=t.length,n=new Array(r);for(let e=0;e<r;e++){const r=o.randomIn(0,e);r!==e&&(n[e]=n[r]),n[r]=t[e]}return n},n.pairwise=function(t,r){const n=t.length,a=new Array(n-1);for(let e=0;e<n-1;e++)a[e]=r(t[e],t[e+1]);return a},n.reversed=function(t){const r=t.length,n=new Array(r);for(let e=0;e<r;e++)n[r-e-1]=t[e];return n},n.repeat=function(t,r){const n=new Array(r);for(let e=0;e<r;e++)n[e]=t;return n}},function e(t,r,n,a,i){a();const{PI:s}=Math;function l(e){if(0==e)return 0;for(;e<=0;)e+=2*s;for(;e>2*s;)e-=2*s;return e}function c(e,t){return l(e-t)}function o(){return Math.random()}function u(e){switch(e){case"deg":return s/180;case"rad":return 1;case"grad":return s/200;case"turn":return 2*s}}n.angle_norm=l,n.angle_dist=c,n.angle_between=function(e,t,r,n=!1){const a=c(t,r);if(0==a)return!1;if(a==2*s)return!0;const i=l(e),o=c(t,i)<=a&&c(i,r)<=a;return n?!o:o},n.random=o,n.randomIn=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},n.atan2=function(e,t){return Math.atan2(t[1]-e[1],t[0]-e[0])},n.radians=function(e){return e*(s/180)},n.degrees=function(e){return e/(s/180)},n.resolve_angle=function(e,t){return-u(t)*e},n.to_radians_coeff=u,n.rnorm=function(e,t){let r,n;for(;r=o(),n=o(),n=(2*n-1)*Math.sqrt(1/Math.E*2),!(-4*r*r*Math.log(r)>=n*n););let a=n/r;return a=e+t*a,a},n.clamp=function(e,t,r){return e<t?t:e>r?r:e},n.log=function(e,t=Math.E){return Math.log(e)/Math.log(t)}},function e(t,r,n,a,i){a();class o extends Error{}n.AssertionError=o,o.__name__="AssertionError",n.assert=function(e,t){if(!(!0===e||!1!==e&&e()))throw new o(null!=t?t:"Assertion failed")},n.unreachable=function(){throw new Error("unreachable code")}},function e(t,r,n,a,i){a();const o=t(10);function s(t,r,n,...e){const a=t.length;r<0&&(r+=a),r<0?r=0:r>a&&(r=a),null==n||n>a-r?n=a-r:n<0&&(n=0);const i=a-n+e.length,o=new t.constructor(i);let s=0;for(;s<r;s++)o[s]=t[s];for(const t of e)o[s++]=t;for(let e=r+n;e<a;e++)o[s++]=t[e];return o}function l(e,t){return s(e,t,e.length-t)}function c(t,r){const n=t.length,a=new t.constructor(n);for(let e=0;e<n;e++)a[e]=r(t[e],e,t);return a}function u(e,t,r){const n=e.length;if(void 0===r&&0==n)throw new Error("can't reduce an empty array without an initial value");let a,i;for(void 0===r?(a=e[0],i=1):(a=r,i=0);i<n;i++)a=t(a,e[i],i,e);return a}function f(a){return function(e,t){const r=e.length;let n=a>0?0:r-1;for(;n>=0&&n<r;n+=a)if(t(e[n]))return n;return-1}}function d(t,r){let n=0,a=t.length;for(;n<a;){const e=Math.floor((n+a)/2);t[e]<r?n=e+1:a=e}return n}function h(e,t,r,n,a){const i=(a-r)/(n-t);let o=i*(e-t)+r;return isFinite(o)||(o=i*(e-n)+a,isFinite(o)||r!=a||(o=r)),o}function p(t,r){if(t<r[0])return-1;if(t>r[r.length-1])return r.length;let n=0,a=r.length-1;for(;a-n!=1;){const e=n+Math.floor((a-n)/2);t>=r[e]?n=e:a=e}return n}n.is_empty=function(e){return 0==e.length},n.copy=function(e){return Array.isArray(e)?e.slice():new e.constructor(e)},n.splice=s,n.head=l,n.insert=function(e,t,r){return s(e,r,0,t)},n.append=function(e,t){return s(e,e.length,0,t)},n.prepend=function(e,t){return s(e,0,0,t)},n.indexOf=function(r,n){for(let e=0,t=r.length;e<t;e++)if(r[e]===n)return e;return-1},n.subselect=function(t,r){const n=r.length,a=new t.constructor(n);for(let e=0;e<n;e++)a[e]=t[r[e]];return a},n.mul=function(t,r,e){const n=t.length,a=null!=e?e:new t.constructor(n);for(let e=0;e<n;e++)a[e]=t[e]*r;return a},n.map=c,n.inplace_map=function(t,r,e){const n=t.length,a=null!=e?e:t;for(let e=0;e<n;e++)a[e]=r(t[e],e)},n.filter=function(t,r){const n=t.length,a=new t.constructor(n);let i=0;for(let e=0;e<n;e++){const n=t[e];r(n,e,t)&&(a[i++]=n)}return l(a,i)},n.reduce=u,n.min=function(r){let n,a=1/0;for(let e=0,t=r.length;e<t;e++)n=r[e],!isNaN(n)&&n<a&&(a=n);return a},n.max=function(r){let n,a=-1/0;for(let e=0,t=r.length;e<t;e++)n=r[e],!isNaN(n)&&n>a&&(a=n);return a},n.minmax=function(r){let n,a=1/0,i=-1/0;for(let e=0,t=r.length;e<t;e++)n=r[e],isNaN(n)||(n<a&&(a=n),n>i&&(i=n));return[a,i]},n.min_by=function(n,a){if(0==n.length)throw new Error("min_by() called with an empty array");let i=n[0],o=a(i);for(let r=1,e=n.length;r<e;r++){const e=n[r],t=a(e);t<o&&(i=e,o=t)}return i},n.max_by=function(n,a){if(0==n.length)throw new Error("max_by() called with an empty array");let i=n[0],o=a(i);for(let r=1,e=n.length;r<e;r++){const e=n[r],t=a(e);t>o&&(i=e,o=t)}return i},n.sum=function(r){let n=0;for(let e=0,t=r.length;e<t;e++)n+=r[e];return n},n.cumsum=function(e){const n=new e.constructor(e.length);return u(e,(e,t,r)=>n[r]=e+t,0),n},n.every=function(r,n){for(let e=0,t=r.length;e<t;e++)if(!n(r[e]))return!1;return!0},n.some=function(r,n){for(let e=0,t=r.length;e<t;e++)if(n(r[e]))return!0;return!1},n.index_of=function(r,n){for(let e=0,t=r.length;e<t;e++)if(r[e]===n)return e;return-1},n.find_index=f(1),n.find_last_index=f(-1),n.find=function(e,t){const r=n.find_index(e,t);return-1==r?void 0:e[r]},n.find_last=function(e,t){const r=n.find_last_index(e,t);return-1==r?void 0:e[r]},n.sorted_index=d,n.bin_counts=function(r,n){const a=n.length-1,i=Array(a).fill(0);for(let t=0;t<r.length;t++){const e=d(n,r[t]);i[o.clamp(e-1,0,a-1)]+=1}return i},n.interpolate=function(i,o,s){const l=i.length,c=new Array(l);for(let a=0;a<l;a++){const l=i[a];if(isNaN(l)){c[a]=l;continue}const n=p(l,o);if(-1==n)c[a]=s[0];else if(n==o.length)c[a]=s[s.length-1];else if(n==o.length-1||o[n]==l)c[a]=s[n];else{const i=o[n],e=s[n],t=o[n+1],r=s[n+1];c[a]=h(l,i,e,t,r)}}return c},n.left_edge_index=p,n.norm=function(e,t,r){const n=r-t;return c(e,e=>(e-t)/n)}},function e(t,r,n,a,i){a();const o=t(9),{hasOwnProperty:s}=Object.prototype;function l(e){return Object.keys(e).length}n.keys=Object.keys,n.values=Object.values,n.entries=Object.entries,n.extend=Object.assign,n.clone=function(e){return Object.assign({},e)},n.merge=function(r,n){const a=Object.create(Object.prototype),i=o.concat([Object.keys(r),Object.keys(n)]);for(const t of i){const i=s.call(r,t)?r[t]:[],e=s.call(n,t)?n[t]:[];a[t]=o.union(i,e)}return a},n.size=l,n.isEmpty=function(e){return 0==l(e)},n.to_object=function(r){const n={};for(const[e,t]of r)n[e]=t;return n}},function o(e,t,r,n,a){n();const i=e(1),s=e(15),l=e(17),c=i.__importStar(e(18)),o=i.__importStar(e(21)),u=e(34),f=e(13),d=e(8),h=e(26),p=e(30),v=e(35),g=e(26),m=e(36),_=e(37),y=i.__importStar(e(21));class b extends s.Signalable(){constructor(r={}){var n,a;super(),this._subtype=void 0,this.document=null,this.destroyed=new s.Signal0(this,"destroyed"),this.change=new s.Signal0(this,"change"),this.transformchange=new s.Signal0(this,"transformchange"),this.exprchange=new s.Signal0(this,"exprchange"),this.properties={},this._pending=!1,this._changing=!1;const i=r instanceof Map?r.get.bind(r):e=>r[e];this.id=null!==(n=i("id"))&&void 0!==n?n:u.uniqueId();for(const[r,{type:n,default_value:a,options:t}]of f.entries(this._props)){let e;n instanceof c.PropertyAlias?Object.defineProperty(this.properties,r,{get:()=>this.properties[n.attr],configurable:!1,enumerable:!1}):(e=n instanceof o.Kind?new c.PrimitiveProperty(this,r,n,a,i(r),t):new n(this,r,o.Any,a,i(r),t),this.properties[r]=e)}null!==(a=i("__deferred__"))&&void 0!==a&&a||(this.finalize(),this.connect_signals())}get is_syncable(){return!0}set type(e){console.warn("prototype.type = 'ModelName' is deprecated, use static __name__ instead"),this.constructor.__name__=e}get type(){return this.constructor.__qualified__}static get __qualified__(){const{__module__:e,__name__:t}=this;return null!=e?`${e}.${t}`:t}static get[Symbol.toStringTag](){return this.__name__}static init_HasProps(){this.prototype._props={},this.prototype._mixins=[]}static _fix_default(e,t){if(void 0===e||d.isFunction(e))return e;if(d.isPrimitive(e))return()=>e;{const t=new _.Cloner;return()=>t.clone(e)}}static define(o){for(const[a,i]of f.entries(d.isFunction(o)?o(y):o)){if(null!=this.prototype._props[a])throw new Error(`attempted to redefine property '${this.prototype.type}.${a}'`);if(null!=this.prototype[a])throw new Error(`attempted to redefine attribute '${this.prototype.type}.${a}'`);Object.defineProperty(this.prototype,a,{get(){return this.properties[a].get_value()},set(e){return this.setv({[a]:e}),this},configurable:!1,enumerable:!0});const[o,e,t={}]=i,r={type:o,default_value:this._fix_default(e,a),options:t},n=Object.assign({},this.prototype._props);n[a]=r,this.prototype._props=n}}static internal(a){const i={};for(const[r,n]of f.entries(d.isFunction(a)?a(y):a)){const[a,e,t={}]=n;i[r]=[a,e,Object.assign(Object.assign({},t),{internal:!0})]}this.define(i)}static mixins(r){function n(r,n){const a={};for(const[e,t]of f.entries(n))a[r+e]=t;return a}const a={},i=[];for(const t of d.isArray(r)?r:[r])if(d.isArray(t)){const[r,e]=t;f.extend(a,n(r,e)),i.push([r,e])}else{const r=t;f.extend(a,r),i.push(["",r])}this.define(a),this.prototype._mixins=[...this.prototype._mixins,...i]}static override(a){for(const[r,n]of f.entries(a)){const a=this._fix_default(n,r),e=this.prototype._props[r];if(null==e)throw new Error(`attempted to override nonexistent '${this.prototype.type}.${r}'`);const t=Object.assign({},this.prototype._props);t[r]=Object.assign(Object.assign({},e),{default_value:a}),this.prototype._props=t}}toString(){return`${this.type}(${this.id})`}property(e){const t=this.properties[e];if(null!=t)return t;throw new Error(`unknown property ${this.type}.${e}`)}get attributes(){const t={};for(const e of this)t[e.attr]=e.get_value();return t}[_.clone](t){const r=new Map;for(const e of this)e.dirty&&r.set(e.attr,t.clone(e.get_value()));return new this.constructor(r)}[g.equals](r,n){for(const t of this){const e=r.property(t.attr);if(n.eq(t.get_value(),e.get_value()))return!1}return!0}[m.pretty](r){const n=r.token,a=[];for(const t of this)if(t.dirty){const e=t.get_value();a.push(`${t.attr}${n(":")} ${r.to_string(e)}`)}return`${this.constructor.__qualified__}${n("(")}${n("{")}${a.join(`${n(",")} `)}${n("}")}${n(")")}`}[p.serialize](e){const t=this.ref();e.add_ref(this,t);const r=this.struct();for(const t of this)t.syncable&&(e.include_defaults||t.dirty)&&(r.attributes[t.attr]=e.to_serializable(t.get_value()));return e.add_def(this,r),t}finalize(){for(const e of this){if(!(e instanceof c.VectorSpec||e instanceof c.ScalarSpec))continue;const r=e.get_value();if(null!=r){const{transform:e,expr:t}=r;null!=e&&this.connect(e.change,()=>this.transformchange.emit()),null!=t&&this.connect(t.change,()=>this.exprchange.emit())}}this.initialize()}initialize(){}connect_signals(){}disconnect_signals(){s.Signal.disconnectReceiver(this)}destroy(){this.disconnect_signals(),this.destroyed.emit()}clone(){return(new _.Cloner).clone(this)}_setv(e,t){const r=t.check_eq,n=[],a=this._changing;this._changing=!0;for(const[t,a]of e)!1!==r&&h.is_equal(t.get_value(),a)||(t.set_value(a),n.push(t));n.length>0&&(this._pending=!0);for(const e of n)e.change.emit();if(!a){if(!t.no_change)for(;this._pending;)this._pending=!1,this.change.emit();this._pending=!1,this._changing=!1}}setv(e,t={}){const r=f.entries(e);if(0==r.length)return;if(!0===t.silent){for(const[e,t]of r)this.properties[e].set_value(t);return}const n=new Map,a=new Map;for(const[e,t]of r){const r=this.properties[e];n.set(r,t),a.set(r,r.get_value())}this._setv(n,t);const{document:i}=this;if(null!=i){const e=[];for(const[t,r]of a)e.push([t,r,t.get_value()]);for(const[,t,r]of e)if(this._needs_invalidate(t,r)){i._invalidate_all_models();break}this._push_changes(e,t)}}getv(e){return this.property(e).get_value()}ref(){return{id:this.id}}struct(){const e={type:this.type,id:this.id,attributes:{}};return null!=this._subtype&&(e.subtype=this._subtype),e}set_subtype(e){this._subtype=e}*[Symbol.iterator](){yield*f.values(this.properties)}*syncable_properties(){for(const e of this)e.syncable&&(yield e)}serializable_attributes(){const t={};for(const e of this.syncable_properties())t[e.attr]=e.get_value();return t}static _json_record_references(e,t,r,n){const{recursive:a}=n;if(l.is_ref(t)){const n=e.get_model_by_id(t.id);null==n||r.has(n)||b._value_record_references(n,r,{recursive:a})}else if(d.isArray(t))for(const n of t)b._json_record_references(e,n,r,{recursive:a});else if(d.isPlainObject(t))for(const n of f.values(t))b._json_record_references(e,n,r,{recursive:a})}static _value_record_references(e,t,r){const{recursive:n}=r;if(e instanceof b){if(!t.has(e)&&(t.add(e),n))for(const r of e.syncable_properties()){const e=r.get_value();b._value_record_references(e,t,{recursive:n})}}else if(d.isArray(e))for(const r of e)b._value_record_references(r,t,{recursive:n});else if(d.isPlainObject(e))for(const r of f.values(e))b._value_record_references(r,t,{recursive:n})}references(){const e=new Set;return b._value_record_references(this,e,{recursive:!0}),e}_doc_attached(){}_doc_detached(){}attach_document(e){if(null!=this.document&&this.document!=e)throw new Error("models must be owned by only a single document");this.document=e,this._doc_attached()}detach_document(){this._doc_detached(),this.document=null}_needs_invalidate(e,t){const r=new Set;b._value_record_references(t,r,{recursive:!1});const n=new Set;b._value_record_references(e,n,{recursive:!1});for(const e of r)if(!n.has(e))return!0;for(const e of n)if(!r.has(e))return!0;return!1}_push_changes(r,n={}){if(!this.is_syncable)return;const{document:a}=this;if(null==a)return;const{setter_id:i}=n,o=[];for(const[n,e,t]of r)n.syncable&&o.push(new v.ModelChangedEvent(a,this,n.attr,e,t,i));if(0!=o.length){let e;1==o.length?[e]=o:e=new v.DocumentEventBatch(a,o,i),a._trigger_on_change(e)}}on_change(t,r){for(const e of d.isArray(t)?t:[t])this.connect(e.change,r)}}r.HasProps=b,b.init_HasProps()},function e(t,r,n,a,i){a();const o=t(16),s=t(9);class l{constructor(e,t){this.sender=e,this.name=t}connect(e,t=null){u.has(this.sender)||u.set(this.sender,[]);const r=u.get(this.sender);if(null!=d(r,this,e,t))return!1;const n=null!=t?t:e;f.has(n)||f.set(n,[]);const a=f.get(n),i={signal:this,slot:e,context:t};return r.push(i),a.push(i),!0}disconnect(e,t=null){const r=u.get(this.sender);if(null==r||0===r.length)return!1;const n=d(r,this,e,t);if(null==n)return!1;const a=null!=t?t:e,i=f.get(a);return n.signal=null,p(r),p(i),!0}emit(r){var n;const a=null!==(n=u.get(this.sender))&&void 0!==n?n:[];for(const{signal:n,slot:e,context:t}of a)n===this&&e.call(t,r,this.sender)}}n.Signal=l,l.__name__="Signal";class c extends l{emit(){super.emit(void 0)}}n.Signal0=c,c.__name__="Signal0",function(e){function t(e,t){const r=u.get(e);if(null==r||0===r.length)return;const n=f.get(t);if(null!=n&&0!==n.length){for(const t of n){if(null==t.signal)return;t.signal.sender===e&&(t.signal=null)}p(r),p(n)}}function r(e){var t;const r=u.get(e);if(null!=r&&0!==r.length){for(const e of r){if(null==e.signal)return;const r=null!==(t=e.context)&&void 0!==t?t:e.slot;e.signal=null,p(f.get(r))}p(r)}}function n(e,t,r){const n=f.get(e);if(null!=n&&0!==n.length){for(const e of n){if(null==e.signal)return;if(null!=t&&e.slot!=t)continue;const n=e.signal.sender;null!=r&&r.has(n)||(e.signal=null,p(u.get(n)))}p(n)}}function a(e){const t=u.get(e);if(null!=t&&0!==t.length){for(const e of t)e.signal=null;p(t)}const r=f.get(e);if(null!=r&&0!==r.length){for(const e of r)e.signal=null;p(r)}}e.disconnect_between=t,e.disconnect_sender=r,e.disconnect_receiver=n,e.disconnect_all=a,e.disconnectBetween=t,e.disconnectSender=r,e.disconnectReceiver=n,e.disconnectAll=a}(l||(n.Signal=l={})),n.Signalable=function(){return class{connect(e,t){return e.connect(t,this)}disconnect(e,t){return e.disconnect(t,this)}}};const u=new WeakMap,f=new WeakMap;function d(e,t,r,n){return s.find(e,e=>e.signal===t&&e.slot===r&&e.context===n)}const h=new Set;function p(e){0===h.size&&(async()=>{await o.defer(),function(){for(const e of h)s.remove_by(e,e=>null==e.signal);h.clear()}()})(),h.add(e)}},function e(t,r,n,a,i){a();const o=new MessageChannel,s=new Map;o.port1.onmessage=e=>{const t=e.data,r=s.get(t);if(null!=r)try{r()}finally{s.delete(t)}};let l=1;n.defer=function(){return new Promise(e=>{const t=l++;s.set(t,e),o.port2.postMessage(t)})}},function e(t,r,n,a,i){a();const o=t(8),s=t(13);n.is_ref=function(t){if(o.isPlainObject(t)){const e=s.keys(t);return 1==e.length&&"id"==e[0]}return!1}},function a(e,t,r,n,i){n(),r.YCoordinateSeqSeqSeqSpec=r.XCoordinateSeqSeqSeqSpec=r.YCoordinateSeqSpec=r.XCoordinateSeqSpec=r.YCoordinateSpec=r.XCoordinateSpec=r.CoordinateSeqSeqSeqSpec=r.CoordinateSeqSpec=r.CoordinateSpec=r.BaseCoordinateSpec=r.NumberUnitsSpec=r.UnitsSpec=r.DataSpec=r.VectorSpec=r.TextBaselineScalar=r.TextAlignScalar=r.FontStyleScalar=r.FontSizeScalar=r.FontScalar=r.LineDashScalar=r.LineCapScalar=r.LineJoinScalar=r.ArrayScalar=r.NullStringScalar=r.StringScalar=r.NumberScalar=r.ColorScalar=r.AnyScalar=r.ScalarSpec=r.VerticalAlign=r.UpdateMode=r.TooltipAttachment=r.TickLabelOrientation=r.TextureRepetition=r.TextBaseline=r.TextAlign=r.TapBehavior=r.StepMode=r.StartEnd=r.SpatialUnits=r.Sort=r.SizingMode=r.Side=r.RoundingFunction=r.ResetPolicy=r.RenderMode=r.RenderLevel=r.RadiusDimension=r.PointPolicy=r.Place=void 0,r.TextBaselineSpec=r.TextAlignSpec=r.FontStyleSpec=r.FontSizeSpec=r.FontSpec=r.LineDashSpec=r.LineCapSpec=r.LineJoinSpec=r.MarkerSpec=r.ArraySpec=r.NullStringSpec=r.StringSpec=r.AnySpec=r.NDArraySpec=r.ColorSpec=r.NumberSpec=r.BooleanSpec=r.ScreenDistanceSpec=r.NullDistanceSpec=r.DistanceSpec=r.AngleSpec=void 0;const o=e(1),l=e(15),s=e(19),c=o.__importStar(e(20)),u=e(24),a=e(9),f=e(12),d=e(10),h=e(22),p=e(27),v=e(8),g=e(28),m=e(29),_=e(33);function y(t){try{return JSON.stringify(t)}catch(e){return t.toString()}}function b(e){return v.isPlainObject(e)&&(void 0===e.value?0:1)+(void 0===e.field?0:1)+(void 0===e.expr?0:1)==1}i("Uniform",_.Uniform),i("UniformScalar",_.UniformScalar),i("UniformVector",_.UniformVector),r.isSpec=b;class x{constructor(e,t,r,n,a,i={}){var o;let s;if(this.obj=e,this.attr=t,this.kind=r,this.default_value=n,this._dirty=!1,this.change=new l.Signal0(this.obj,"change"),this.internal=null!==(o=i.internal)&&void 0!==o&&o,this.on_update=i.on_update,void 0!==a)s=a,this._dirty=!0;else{const t=this._default_override();if(void 0!==t)s=t;else{if(void 0===n)return void(this.spec={value:null});s=n(e)}}this._update(s)}get is_value(){return void 0!==this.spec.value}get syncable(){return!this.internal}get_value(){return this.spec.value}set_value(e){this._update(e),this._dirty=!0}_default_override(){}get dirty(){return this._dirty}_update(e){var t;this.validate(e),this.spec={value:e},null===(t=this.on_update)||void 0===t||t.call(this,e,this.obj)}toString(){return`Prop(${this.obj}.${this.attr}, spec: ${y(this.spec)})`}normalize(e){return e}validate(e){if(!this.valid(e))throw new Error(`${this.obj}.${this.attr} given invalid value: ${y(e)}`)}valid(e){return this.kind.valid(e)}_value(e=!0){if(!this.is_value)throw new Error("attempted to retrieve property value for property without value specification");let t=this.normalize([this.spec.value])[0];return null!=this.spec.transform&&e&&(t=this.spec.transform.compute(t)),t}}r.Property=x,x.__name__="Property";class w{constructor(e){this.attr=e}}r.PropertyAlias=w,w.__name__="PropertyAlias",r.Alias=function(e){return new w(e)};class A extends x{}r.PrimitiveProperty=A,A.__name__="PrimitiveProperty";class T extends x{}r.Any=T,T.__name__="Any";class k extends x{valid(e){return v.isArray(e)||v.isTypedArray(e)}}r.Array=k,k.__name__="Array";class M extends x{valid(e){return v.isBoolean(e)}}r.Boolean=M,M.__name__="Boolean";class S extends x{valid(e){return h.is_Color(e)}}r.Color=S,S.__name__="Color";class C extends x{}r.Instance=C,C.__name__="Instance";class L extends x{valid(e){return v.isNumber(e)}}r.Number=L,L.__name__="Number";class E extends L{valid(e){return v.isNumber(e)&&(0|e)==e}}r.Int=E,E.__name__="Int";class D extends L{}r.Angle=D,D.__name__="Angle";class O extends L{valid(e){return v.isNumber(e)&&0<=e&&e<=1}}r.Percent=O,O.__name__="Percent";class P extends x{valid(e){return v.isString(e)}}r.String=P,P.__name__="String";class I extends x{valid(e){return null===e||v.isString(e)}}r.NullString=I,I.__name__="NullString";class R extends P{}r.FontSize=R,R.__name__="FontSize";class z extends P{_default_override(){return g.settings.dev?"Bokeh":void 0}}r.Font=z,z.__name__="Font";class N extends x{valid(e){return v.isString(e)&&a.includes(this.enum_values,e)}}function F(e){return class extends N{get enum_values(){return[...e]}}}r.EnumProperty=N,N.__name__="EnumProperty",r.Enum=F;class j extends N{get enum_values(){return[...c.Direction]}normalize(t){const r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)switch(t[e]){case"clock":r[e]=0;break;case"anticlock":r[e]=1}return r}}r.Direction=j,j.__name__="Direction",r.Anchor=F(c.Anchor),r.AngleUnits=F(c.AngleUnits),r.BoxOrigin=F(c.BoxOrigin),r.ButtonType=F(c.ButtonType),r.CalendarPosition=F(c.CalendarPosition),r.Dimension=F(c.Dimension),r.Dimensions=F(c.Dimensions),r.Distribution=F(c.Distribution),r.FontStyle=F(c.FontStyle),r.HatchPatternType=F(c.HatchPatternType),r.HTTPMethod=F(c.HTTPMethod),r.HexTileOrientation=F(c.HexTileOrientation),r.HoverMode=F(c.HoverMode),r.LatLon=F(c.LatLon),r.LegendClickPolicy=F(c.LegendClickPolicy),r.LegendLocation=F(c.LegendLocation),r.LineCap=F(c.LineCap),r.LineJoin=F(c.LineJoin),r.LinePolicy=F(c.LinePolicy),r.Location=F(c.Location),r.Logo=F(c.Logo),r.MarkerType=F(c.MarkerType),r.MutedPolicy=F(c.MutedPolicy),r.Orientation=F(c.Orientation),r.OutputBackend=F(c.OutputBackend),r.PaddingUnits=F(c.PaddingUnits),r.Place=F(c.Place),r.PointPolicy=F(c.PointPolicy),r.RadiusDimension=F(c.RadiusDimension),r.RenderLevel=F(c.RenderLevel),r.RenderMode=F(c.RenderMode),r.ResetPolicy=F(c.ResetPolicy),r.RoundingFunction=F(c.RoundingFunction),r.Side=F(c.Side),r.SizingMode=F(c.SizingMode),r.Sort=F(c.Sort),r.SpatialUnits=F(c.SpatialUnits),r.StartEnd=F(c.StartEnd),r.StepMode=F(c.StepMode),r.TapBehavior=F(c.TapBehavior),r.TextAlign=F(c.TextAlign),r.TextBaseline=F(c.TextBaseline),r.TextureRepetition=F(c.TextureRepetition),r.TickLabelOrientation=F(c.TickLabelOrientation),r.TooltipAttachment=F(c.TooltipAttachment),r.UpdateMode=F(c.UpdateMode),r.VerticalAlign=F(c.VerticalAlign);class B extends x{get_value(){const{value:e,expr:t,transform:r}=this.spec;return null!=t||null!=r?this.spec:e}_update(e){b(e)?this.spec=e:this.spec={value:e},null!=this.spec.value&&this.validate(this.spec.value)}materialize(e){return e}scalar(e,t){return new _.UniformScalar(e,t)}uniform(t){var e;const{expr:r,value:n,transform:a}=this.spec,i=null!==(e=t.get_length())&&void 0!==e?e:1;if(null!=r){let e=r.compute(t);return null!=a&&(e=a.compute(e)),e=this.materialize(e),this.scalar(e,i)}{let e=n;return null!=a&&(e=a.compute(e)),e=this.materialize(e),this.scalar(e,i)}}}r.ScalarSpec=B,B.__name__="ScalarSpec";class H extends B{}r.AnyScalar=H,H.__name__="AnyScalar";class U extends B{}r.ColorScalar=U,U.__name__="ColorScalar";class V extends B{}r.NumberScalar=V,V.__name__="NumberScalar";class q extends B{}r.StringScalar=q,q.__name__="StringScalar";class Y extends B{}r.NullStringScalar=Y,Y.__name__="NullStringScalar";class G extends B{}r.ArrayScalar=G,G.__name__="ArrayScalar";class W extends B{}r.LineJoinScalar=W,W.__name__="LineJoinScalar";class X extends B{}r.LineCapScalar=X,X.__name__="LineCapScalar";class Z extends B{}r.LineDashScalar=Z,Z.__name__="LineDashScalar";class J extends B{_default_override(){return g.settings.dev?"Bokeh":void 0}}r.FontScalar=J,J.__name__="FontScalar";class $ extends B{}r.FontSizeScalar=$,$.__name__="FontSizeScalar";class Q extends B{}r.FontStyleScalar=Q,Q.__name__="FontStyleScalar";class K extends B{}r.TextAlignScalar=K,K.__name__="TextAlignScalar";class ee extends B{}r.TextBaselineScalar=ee,ee.__name__="TextBaselineScalar";class te extends x{get_value(){return null===this.spec.value?null:this.spec}_update(e){b(e)?this.spec=e:this.spec={value:e},null!=this.spec.value&&this.validate(this.spec.value)}materialize(e){return e}v_materialize(e){return e}scalar(e,t){return new _.UniformScalar(e,t)}vector(e){return new _.UniformVector(e)}uniform(t){var e;const{field:r,expr:n,value:a,transform:i}=this.spec,o=null!==(e=t.get_length())&&void 0!==e?e:1;if(null!=r){let e=t.get_column(r);return null!=e?(null!=i&&(e=i.v_compute(e)),e=this.v_materialize(e),this.vector(e)):(s.logger.warn(`attempted to retrieve property array for nonexistent field '${r}'`),this.scalar(null,o))}if(null!=n){let e=n.v_compute(t);return null!=i&&(e=i.v_compute(e)),e=this.v_materialize(e),this.vector(e)}{let e=a;return null!=i&&(e=i.compute(e)),e=this.materialize(e),this.scalar(e,o)}}array(e){var t;let r;const n=null!==(t=e.get_length())&&void 0!==t?t:1;if(null!=this.spec.field){const t=e.get_column(this.spec.field);if(null!=t)r=this.normalize(t);else{s.logger.warn(`attempted to retrieve property array for nonexistent field '${this.spec.field}'`);const e=new Float64Array(n);e.fill(NaN),r=e}}else if(null!=this.spec.expr)r=this.normalize(this.spec.expr.v_compute(e));else{const e=this._value(!1);if(v.isNumber(e)){const t=new Float64Array(n);t.fill(e),r=t}else r=a.repeat(e,n)}return null!=this.spec.transform&&(r=this.spec.transform.v_compute(r)),r}}r.VectorSpec=te,te.__name__="VectorSpec";class re extends te{}r.DataSpec=re,re.__name__="DataSpec";class ne extends te{_update(e){super._update(e);const{units:t}=this.spec;if(null!=t&&!a.includes(this.valid_units,t))throw new Error(`units must be one of ${this.valid_units.join(", ")}; got: ${t}`)}get units(){var e;return null!==(e=this.spec.units)&&void 0!==e?e:this.default_units}set units(e){e!=this.default_units?this.spec.units=e:delete this.spec.units}}r.UnitsSpec=ne,ne.__name__="UnitsSpec";class ae extends ne{array(e){return new Float64Array(super.array(e))}}r.NumberUnitsSpec=ae,ae.__name__="NumberUnitsSpec";class ie extends re{}r.BaseCoordinateSpec=ie,ie.__name__="BaseCoordinateSpec";class oe extends ie{}r.CoordinateSpec=oe,oe.__name__="CoordinateSpec";class se extends ie{}r.CoordinateSeqSpec=se,se.__name__="CoordinateSeqSpec";class le extends ie{}r.CoordinateSeqSeqSeqSpec=le,le.__name__="CoordinateSeqSeqSeqSpec";class ce extends oe{constructor(){super(...arguments),this.dimension="x"}}r.XCoordinateSpec=ce,ce.__name__="XCoordinateSpec";class ue extends oe{constructor(){super(...arguments),this.dimension="y"}}r.YCoordinateSpec=ue,ue.__name__="YCoordinateSpec";class fe extends se{constructor(){super(...arguments),this.dimension="x"}}r.XCoordinateSeqSpec=fe,fe.__name__="XCoordinateSeqSpec";class de extends se{constructor(){super(...arguments),this.dimension="y"}}r.YCoordinateSeqSpec=de,de.__name__="YCoordinateSeqSpec";class he extends le{constructor(){super(...arguments),this.dimension="x"}}r.XCoordinateSeqSeqSeqSpec=he,he.__name__="XCoordinateSeqSeqSeqSpec";class pe extends le{constructor(){super(...arguments),this.dimension="y"}}r.YCoordinateSeqSeqSeqSpec=pe,pe.__name__="YCoordinateSeqSeqSeqSpec";class ve extends ae{get default_units(){return"rad"}get valid_units(){return[...c.AngleUnits]}materialize(e){return e*-d.to_radians_coeff(this.units)}v_materialize(e){const t=-d.to_radians_coeff(this.units),r=new Float32Array(e.length);return f.mul(e,t,r),r}array(e){throw new Error("not supported")}}r.AngleSpec=ve,ve.__name__="AngleSpec";class ge extends ae{get default_units(){return"data"}get valid_units(){return[...c.SpatialUnits]}}r.DistanceSpec=ge,ge.__name__="DistanceSpec";class me extends ge{materialize(e){return null!=e?e:NaN}}r.NullDistanceSpec=me,me.__name__="NullDistanceSpec";class _e extends ge{get default_units(){return"screen"}}r.ScreenDistanceSpec=_e,_e.__name__="ScreenDistanceSpec";class ye extends re{v_materialize(e){return new Uint8Array(e)}array(e){return new Uint8Array(super.array(e))}}r.BooleanSpec=ye,ye.__name__="BooleanSpec";class be extends re{v_materialize(e){return v.isTypedArray(e)?e:new Float64Array(e)}array(e){return new Float64Array(super.array(e))}}r.NumberSpec=be,be.__name__="NumberSpec";class xe extends re{materialize(e){return h.encode_rgba(h.color2rgba(e))}v_materialize(o){if(!m.is_NDArray(o)){const e=o.length,a=new u.RGBAArray(4*e);let i=0;for(const n of o){const[o,e,t,r]=h.color2rgba(n);a[i++]=o,a[i++]=e,a[i++]=t,a[i++]=r}return new u.ColorArray(a.buffer)}if("uint32"==o.dtype&&1==o.dimension)return p.to_big_endian(o);if("uint8"==o.dtype&&1==o.dimension){const[e]=o.shape,t=new u.RGBAArray(4*e);let r=0;for(const e of o)t[r++]=e,t[r++]=e,t[r++]=e,t[r++]=255;return new u.ColorArray(t.buffer)}if("uint8"==o.dtype&&2==o.dimension){const[n,a]=o.shape;if(4==a)return new u.ColorArray(o.buffer);if(3==a){const r=new u.RGBAArray(4*n);for(let e=0,t=0;e<a*n;)r[t++]=o[e++],r[t++]=o[e++],r[t++]=o[e++],r[t++]=255;return new u.ColorArray(r.buffer)}}else if(("float32"==o.dtype||"float64"==o.dtype)&&2==o.dimension){const[n,a]=o.shape;if(3==a||4==a){const r=new u.RGBAArray(4*n);for(let e=0,t=0;e<a*n;)r[t++]=255*o[e++],r[t++]=255*o[e++],r[t++]=255*o[e++],r[t++]=255*(3==a?1:o[e++]);return new u.ColorArray(r.buffer)}}throw new Error("invalid color array")}vector(e){return new _.ColorUniformVector(e)}}r.ColorSpec=xe,xe.__name__="ColorSpec";class we extends re{}r.NDArraySpec=we,we.__name__="NDArraySpec";class Ae extends re{}r.AnySpec=Ae,Ae.__name__="AnySpec";class Te extends re{}r.StringSpec=Te,Te.__name__="StringSpec";class ke extends re{}r.NullStringSpec=ke,ke.__name__="NullStringSpec";class Me extends re{}r.ArraySpec=Me,Me.__name__="ArraySpec";class Se extends re{}r.MarkerSpec=Se,Se.__name__="MarkerSpec";class Ce extends re{}r.LineJoinSpec=Ce,Ce.__name__="LineJoinSpec";class Le extends re{}r.LineCapSpec=Le,Le.__name__="LineCapSpec";class Ee extends re{}r.LineDashSpec=Ee,Ee.__name__="LineDashSpec";class De extends re{_default_override(){return g.settings.dev?"Bokeh":void 0}}r.FontSpec=De,De.__name__="FontSpec";class Oe extends re{}r.FontSizeSpec=Oe,Oe.__name__="FontSizeSpec";class Pe extends re{}r.FontStyleSpec=Pe,Pe.__name__="FontStyleSpec";class Ie extends re{}r.TextAlignSpec=Ie,Ie.__name__="TextAlignSpec";class Re extends re{}r.TextBaselineSpec=Re,Re.__name__="TextBaselineSpec"},function n(e,t,r,a,i){a();const o=e(8),s=e(13),l={};class c{constructor(e,t){this.name=e,this.level=t}}r.LogLevel=c,c.__name__="LogLevel";class u{constructor(e,t=u.INFO){this._name=e,this.set_level(t)}static get levels(){return Object.keys(u.log_levels)}static get(t,r=u.INFO){if(t.length>0){let e=l[t];return null==e&&(l[t]=e=new u(t,r)),e}throw new TypeError("Logger.get() expects a non-empty string name and an optional log-level")}get level(){return this.get_level()}get_level(){return this._log_level}set_level(t){if(t instanceof c)this._log_level=t;else{if(!o.isString(t)||null==u.log_levels[t])throw new Error("Logger.set_level() expects a log-level object or a string name of a log-level");this._log_level=u.log_levels[t]}const r=`[${this._name}]`;for(const[t,e]of s.entries(u.log_levels))e.level<this._log_level.level||this._log_level.level===u.OFF.level?this[t]=function(){}:this[t]=n(t,r)}trace(...e){}debug(...e){}info(...e){}warn(...e){}error(...e){}}function n(e,t){return null!=console[e]?console[e].bind(console,t):null!=console.log?console.log.bind(console,t):function(){}}function f(e){const t=r.logger.level;return o.isString(e)&&null==u.log_levels[e]?(console.log(`[bokeh] unrecognized logging level '${e}' passed to Bokeh.set_log_level(), ignoring`),console.log(`[bokeh] valid log levels are: ${u.levels.join(", ")}`)):(console.log(`[bokeh] setting log level to: '${o.isString(e)?e:e.level}'`),r.logger.set_level(e)),t}r.Logger=u,u.__name__="Logger",u.TRACE=new c("trace",0),u.DEBUG=new c("debug",1),u.INFO=new c("info",2),u.WARN=new c("warn",6),u.ERROR=new c("error",7),u.FATAL=new c("fatal",8),u.OFF=new c("off",9),u.log_levels={trace:u.TRACE,debug:u.DEBUG,info:u.INFO,warn:u.WARN,error:u.ERROR,fatal:u.FATAL,off:u.OFF},r.logger=u.get("bokeh"),r.set_log_level=f,r.with_log_level=function(e,t){const r=f(e);try{t()}finally{f(r)}}},function e(t,r,n,a,i){a(),n.VerticalAlign=void 0;const o=t(21);n.Align=o.Enum("start","center","end"),n.Anchor=o.Enum("top_left","top_center","top_right","center_left","center_center","center_right","bottom_left","bottom_center","bottom_right","top","left","center","right","bottom"),n.AngleUnits=o.Enum("deg","rad","grad","turn"),n.BoxOrigin=o.Enum("corner","center"),n.ButtonType=o.Enum("default","primary","success","warning","danger","light"),n.CalendarPosition=o.Enum("auto","above","below"),n.Dimension=o.Enum("width","height"),n.Dimensions=o.Enum("width","height","both"),n.Direction=o.Enum("clock","anticlock"),n.Distribution=o.Enum("uniform","normal"),n.FontStyle=o.Enum("normal","italic","bold","bold italic"),n.HatchPatternType=o.Enum("blank","dot","ring","horizontal_line","vertical_line","cross","horizontal_dash","vertical_dash","spiral","right_diagonal_line","left_diagonal_line","diagonal_cross","right_diagonal_dash","left_diagonal_dash","horizontal_wave","vertical_wave","criss_cross"," ",".","o","-","|","+",'"',":","@","/","\\","x",",","`","v",">","*"),n.HTTPMethod=o.Enum("POST","GET"),n.HexTileOrientation=o.Enum("pointytop","flattop"),n.HoverMode=o.Enum("mouse","hline","vline"),n.LatLon=o.Enum("lat","lon"),n.LegendClickPolicy=o.Enum("none","hide","mute"),n.LegendLocation=n.Anchor,n.LineCap=o.Enum("butt","round","square"),n.LineJoin=o.Enum("miter","round","bevel"),n.LineDash=o.Enum("solid","dashed","dotted","dotdash","dashdot"),n.LinePolicy=o.Enum("prev","next","nearest","interp","none"),n.Location=o.Enum("above","below","left","right"),n.Logo=o.Enum("normal","grey"),n.MarkerType=o.Enum("asterisk","circle","circle_cross","circle_dot","circle_x","circle_y","cross","dash","diamond","diamond_cross","diamond_dot","dot","hex","hex_dot","inverted_triangle","plus","square","square_cross","square_dot","square_pin","square_x","star","star_dot","triangle","triangle_dot","triangle_pin","x","y"),n.MutedPolicy=o.Enum("show","ignore"),n.Orientation=o.Enum("vertical","horizontal"),n.OutputBackend=o.Enum("canvas","svg","webgl"),n.PaddingUnits=o.Enum("percent","absolute"),n.Place=o.Enum("above","below","left","right","center"),n.PointPolicy=o.Enum("snap_to_data","follow_mouse","none"),n.RadiusDimension=o.Enum("x","y","max","min"),n.RenderLevel=o.Enum("image","underlay","glyph","guide","annotation","overlay"),n.RenderMode=o.Enum("canvas","css"),n.ResetPolicy=o.Enum("standard","event_only"),n.RoundingFunction=o.Enum("round","nearest","floor","rounddown","ceil","roundup"),n.SelectionMode=o.Enum("replace","append","intersect","subtract"),n.Side=o.Enum("above","below","left","right"),n.SizingMode=o.Enum("stretch_width","stretch_height","stretch_both","scale_width","scale_height","scale_both","fixed"),n.Sort=o.Enum("ascending","descending"),n.SpatialUnits=o.Enum("screen","data"),n.StartEnd=o.Enum("start","end"),n.StepMode=o.Enum("after","before","center"),n.TapBehavior=o.Enum("select","inspect"),n.TextAlign=o.Enum("left","right","center"),n.TextBaseline=o.Enum("top","middle","bottom","alphabetic","hanging","ideographic"),n.TextureRepetition=o.Enum("repeat","repeat_x","repeat_y","no_repeat"),n.TickLabelOrientation=o.Enum("vertical","horizontal","parallel","normal"),n.TooltipAttachment=o.Enum("horizontal","vertical","left","right","above","below"),n.UpdateMode=o.Enum("replace","append"),n.VerticalAlign=o.Enum("top","middle","bottom")},function A(e,t,r,n,a){n();const T=e(1).__importStar(e(8)),k=e(22),M=e(13),A=window.Map,{hasOwnProperty:S}=Object.prototype;class C{}r.Kind=C,C.__name__="Kind",function(e){class t extends C{valid(e){return!0}}t.__name__="Any",e.Any=t;class r extends C{valid(e){return!0}}r.__name__="Unknown",e.Unknown=r;class n extends C{valid(e){return T.isBoolean(e)}}n.__name__="Boolean",e.Boolean=n;class a extends C{constructor(e){super(),this.obj_type=e}valid(e){return!0}}a.__name__="Ref",e.Ref=a;class i extends C{valid(e){return!0}}i.__name__="AnyRef",e.AnyRef=i;class o extends C{valid(e){return T.isNumber(e)}}o.__name__="Number",e.Number=o;class s extends o{valid(e){return super.valid(e)&&T.isInteger(e)}}s.__name__="Int",e.Int=s;class l extends o{valid(e){return super.valid(e)&&0<=e&&e<=1}}l.__name__="Percent",e.Percent=l;class c extends C{constructor(e){super(),this.types=e,this.types=e}valid(t){return this.types.some(e=>e.valid(t))}}c.__name__="Or",e.Or=c;class u extends C{constructor(e){super(),this.types=e,this.types=e}valid(n){if(!T.isArray(n))return!1;for(let r=0;r<this.types.length;r++){const e=this.types[r],t=n[r];if(!e.valid(t))return!1}return!0}}u.__name__="Tuple",e.Tuple=u;class f extends C{constructor(e){super(),this.struct_type=e}valid(n){if(!T.isPlainObject(n))return!1;const{struct_type:a}=this;if(M.size(a)!=M.size(n))return!1;for(const r in a)if(S.call(a,r)){if(!S.call(n,r))return!1;const e=a[r],t=n[r];if(!e.valid(t))return!1}return!0}}f.__name__="Struct",e.Struct=f;class d extends C{valid(e){return T.isArray(e)||T.isTypedArray(e)}}d.__name__="Arrayable",e.Arrayable=d;class h extends C{constructor(e){super(),this.item_type=e}valid(e){return T.isArray(e)&&e.every(e=>this.item_type.valid(e))}}h.__name__="Array",e.Array=h;class p extends C{valid(e){return null===e}}p.__name__="Null",e.Null=p;class v extends C{constructor(e){super(),this.base_type=e}valid(e){return null===e||this.base_type.valid(e)}}v.__name__="Nullable",e.Nullable=v;class g extends C{constructor(e){super(),this.base_type=e}valid(e){return void 0===e||this.base_type.valid(e)}}g.__name__="Opt",e.Opt=g;class m extends C{valid(e){return T.isString(e)}}m.__name__="String",e.String=m;class _ extends C{constructor(e){super(),this.values=new Set(e)}valid(e){return this.values.has(e)}*[Symbol.iterator](){yield*this.values}}_.__name__="Enum",e.Enum=_;class y extends C{constructor(e){super(),this.item_type=e}valid(r){if(!T.isPlainObject(r))return!1;for(const t in r)if(S.call(r,t)){const e=r[t];if(!this.item_type.valid(e))return!1}return!0}}y.__name__="Dict",e.Dict=y;class b extends C{constructor(e,t){super(),this.key_type=e,this.item_type=t}valid(r){if(!(r instanceof A))return!1;for(const[e,t]of r.entries())if(!this.key_type.valid(e)||!this.item_type.valid(t))return!1;return!0}}b.__name__="Map",e.Map=b;class x extends C{valid(e){return k.is_Color(e)}}x.__name__="Color",e.Color=x;class w extends C{valid(e){return T.isFunction(e)}}w.__name__="Function",e.Function=w}(r.Kinds||(r.Kinds={})),r.Any=new r.Kinds.Any,r.Unknown=new r.Kinds.Unknown,r.Boolean=new r.Kinds.Boolean,r.Number=new r.Kinds.Number,r.Int=new r.Kinds.Int,r.String=new r.Kinds.String,r.Null=new r.Kinds.Null;r.Nullable=e=>new r.Kinds.Nullable(e);r.Opt=e=>new r.Kinds.Opt(e);r.Or=(...e)=>new r.Kinds.Or(e);r.Tuple=(...e)=>new r.Kinds.Tuple(e);r.Struct=e=>new r.Kinds.Struct(e),r.Arrayable=new r.Kinds.Arrayable;r.Array=e=>new r.Kinds.Array(e);r.Dict=e=>new r.Kinds.Dict(e);r.Map=(e,t)=>new r.Kinds.Map(e,t);r.Enum=(...e)=>new r.Kinds.Enum(e);r.Ref=e=>new r.Kinds.Ref(e);r.AnyRef=()=>new r.Kinds.AnyRef;r.Function=()=>new r.Kinds.Function,r.Percent=new r.Kinds.Percent,r.Alpha=r.Percent,r.Color=new r.Kinds.Color,r.Auto=r.Enum("auto"),r.FontSize=r.String,r.Font=r.String,r.Angle=r.Number},function s(e,t,r,n,a){n();const d=e(23),i=e(10),l=e(8),{round:o}=Math;function h(e){return i.clamp(o(e),0,255)}function c(){return[0,0,0,0]}function u(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}function f(e,t){var r;let n,a,i,o;return null==e?[n,a,i,o]=[0,0,0,0]:l.isInteger(e)?[n,a,i,o]=u(e):l.isString(e)?[n,a,i,o]=null!==(r=s(e))&&void 0!==r?r:[0,0,0,0]:([n,a,i,o=1]=e,o=h(255*o)),255==o&&null!=t&&(o=h(255*t)),[n,a,i,o]}r.transparent=c,r.encode_rgba=function([e,t,r,n]){return e<<24|t<<16|r<<8|n},r.decode_rgba=u,r.compose_alpha=function(e,t){return 255==(255&e)?4294967040&e|h(255*t):e},r.color2rgba=f;const p={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"a",11:"b",12:"c",13:"d",14:"e",15:"f"};function v(e){return p[e>>4]+p[15&e]}r.color2css=function(e,t){const[r,n,a,i]=f(e,t);return`rgba(${r}, ${n}, ${a}, ${i/255})`},r.color2hex=function(e,t){const[r,n,a,i]=f(e,t),o=`#${v(r)}${v(n)}${v(a)}`;return 255==i?o:`${o}${v(i)}`},r.color2hexrgb=function(e){const[t,r,n]=f(e);return`#${v(t)}${v(r)}${v(n)}`};const g=/^rgba?\(\s*([^\s,]+?)\s+([^\s,]+?)\s+([^\s,]+?)(?:\s*\/\s*([^\s,]+?))?\s*\)$/,m=/^rgba?\(\s*([^\s,]+?)\s*,\s*([^\s,]+?)\s*,\s*([^\s,]+?)(?:\s*,\s*([^\s,]+?))?\s*\)$/,_=(()=>{const e=document.createElement("canvas");e.width=1,e.height=1;const r=e.getContext("2d"),n=r.createLinearGradient(0,0,1,1);return e=>{r.fillStyle=n,r.fillStyle=e;const t=r.fillStyle;return t!=n?t:null}})();function s(n){var a;if(!(n=n.trim().toLowerCase()))return null;if("transparent"==n)return[0,0,0,0];if(d.is_named_color(n))return u(d.named_colors[n]);if("#"==n[0]){const a=Number("0x"+n.substr(1));if(isNaN(a))return null;switch(n.length-1){case 3:{const n=a>>8&15,e=a>>4&15,t=a>>0&15;return[n<<4|n,e<<4|e,t<<4|t,255]}case 4:{const n=a>>12&15,e=a>>8&15,t=a>>4&15,r=a>>0&15;return[n<<4|n,e<<4|e,t<<4|t,r<<4|r]}case 6:return[a>>16&255,a>>8&255,a>>0&255,255];case 8:return[a>>24&255,a>>16&255,a>>8&255,a>>0&255]}}else if(n.startsWith("rgb")){const f=null!==(a=n.match(g))&&void 0!==a?a:n.match(m);if(null!=f){let[,e,t,r,n="1"]=f;const d=e.endsWith("%"),a=t.endsWith("%"),i=r.endsWith("%"),o=n.endsWith("%");if(!(d&&a&&i)&&(d||a||i))return null;d&&(e=e.slice(0,-1)),a&&(t=t.slice(0,-1)),i&&(r=r.slice(0,-1)),o&&(n=n.slice(0,-1));let s=Number(e),l=Number(t),c=Number(r),u=Number(n);return isNaN(s+l+c+u)?null:(d&&(s=s/100*255),a&&(l=l/100*255),i&&(c=c/100*255),u=255*(o?u/100:u),s=h(s),l=h(l),c=h(c),u=h(u),[s,l,c,u])}}else{const a=_(n);if(null!=a)return s(a)}return null}r.css4_parse=s,r.is_Color=function(e){return!!l.isInteger(e)||(!(!l.isString(e)||null==s(e))||!(!l.isArray(e)||3!=e.length&&4!=e.length))},r.is_dark=function([e,t,r]){return 1-(.299*e+.587*t+.114*r)/255>=.6}},function e(t,r,n,a,i){a();n.named_colors={aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},n.is_named_color=function(e){return e in n.named_colors}},function e(t,r,n,a,i){a(),n.GeneratorFunction=Object.getPrototypeOf(function*(){}).constructor,n.ColorArray=Uint32Array,n.RGBAArray=Uint8ClampedArray,n.infer_type=function(e,t){return e instanceof Float64Array||e instanceof Array||t instanceof Float64Array||t instanceof Array?Float64Array:Float32Array},n.ScreenArray=Float32Array,n.to_screen=function(e){return e instanceof Float32Array?e:new Float32Array(e)},i("Indices",t(25).BitSet)},function e(t,r,n,a,i){a();const o=t(26),s=t(11);class l{constructor(e,t=0){this.size=e,this[Symbol.toStringTag]="BitSet",this._count=null,this._nwords=Math.ceil(e/32),0==t||1==t?(this._array=new Uint32Array(this._nwords),1==t&&this._array.fill(4294967295)):(s.assert(t.length==this._nwords,"Initializer size mismatch"),this._array=t)}clone(){return new l(this.size,new Uint32Array(this._array))}[o.equals](t,e){if(!e.eq(this.size,t.size))return!1;const{_nwords:r}=this,n=this.size%r,a=0==n?r:r-1;for(let e=0;e<a;e++)if(this._array[e]!=t._array[e])return!1;if(0==n)return!0;{const e=1<<n-1,r=e-1^e;return(this._array[a]&r)==(t._array[a]&r)}}static all_set(e){return new l(e,1)}static all_unset(e){return new l(e,0)}static from_indices(e,t){const r=new l(e);for(const e of t)r.set(e);return r}static from_booleans(e,t){const r=new l(e),n=Math.min(e,t.length);for(let e=0;e<n;e++)t[e]&&r.set(e);return r}_check_bounds(e){s.assert(0<=e&&e<this.size,`Out of bounds: 0 <= ${e} < ${this.size}`)}get(e){this._check_bounds(e);const t=e>>>5,r=31&e;return!!(this._array[t]>>r&1)}set(e,t=!0){this._check_bounds(e),this._count=null;const r=e>>>5,n=31&e;t?this._array[r]|=1<<n:this._array[r]&=~(1<<n)}unset(e){this.set(e,!1)}*[Symbol.iterator](){yield*this.ones()}get count(){let e=this._count;return null==e&&(this._count=e=this._get_count()),e}_get_count(){const{_array:r,_nwords:n,size:a}=this;let i=0;for(let t=0,e=0;e<n;e++){const n=r[e];if(0==n)t+=32;else for(let e=0;e<32&&t<a;e++,t++)n>>>e&1&&(i+=1)}return i}*ones(){const{_array:r,_nwords:n,size:a}=this;for(let t=0,e=0;e<n;e++){const n=r[e];if(0!=n)for(let e=0;e<32&&t<a;e++,t++)n>>>e&1&&(yield t);else t+=32}}*zeros(){const{_array:r,_nwords:n,size:a}=this;for(let t=0,e=0;e<n;e++){const n=r[e];if(4294967295!=n)for(let e=0;e<32&&t<a;e++,t++)n>>>e&1||(yield t);else t+=32}}_check_size(e){s.assert(this.size==e.size,"Size mismatch")}add(t){this._check_size(t);for(let e=0;e<this._nwords;e++)this._array[e]|=t._array[e]}intersect(t){this._check_size(t);for(let e=0;e<this._nwords;e++)this._array[e]&=t._array[e]}subtract(n){this._check_size(n);for(let r=0;r<this._nwords;r++){const e=this._array[r],t=n._array[r];this._array[r]=(e^t)&e}}union(t){this._check_size(t);const r=this.clone();for(let e=0;e<this._nwords;e++)r._array[e]|=t._array[e];return r}intersection(t){this._check_size(t);const r=this.clone();for(let e=0;e<this._nwords;e++)r._array[e]&=t._array[e];return r}difference(n){this._check_size(n);const a=this.clone();for(let r=0;r<this._nwords;r++){const e=this._array[r],t=n._array[r];a._array[r]=(e^t)&e}return a}select(e){s.assert(this.size<=e.length,"Size mismatch");const t=this.count,r=new e.constructor(t);let n=0;for(const t of this)r[n++]=e[t];return r}}n.BitSet=l,l.__name__="BitSet"},function e(t,r,s,n,a){n();const i=t(8),{hasOwnProperty:o}=Object.prototype;function l(e){return i.isObject(e)&&void 0!==e[s.equals]}s.equals=Symbol("equals"),s.wildcard=Symbol("wildcard");const c=Object.prototype.toString;class u{constructor(){this.a_stack=[],this.b_stack=[]}eq(e,t){if(Object.is(e,t))return!0;if(e===s.wildcard||t===s.wildcard)return!0;if(null==e||null==t)return e===t;const r=c.call(e);if(r!=c.call(t))return!1;switch(r){case"[object Number]":return this.numbers(e,t);case"[object RegExp]":case"[object String]":return`${e}`==`${t}`;case"[object Date]":case"[object Boolean]":return+e==+t}const{a_stack:n,b_stack:a}=this;let i=n.length;for(;i--;)if(n[i]===e)return a[i]===t;n.push(e),a.push(t);const o=(()=>{if(l(e)&&l(t))return e[s.equals](t,this);switch(r){case"[object Array]":case"[object Uint8Array]":case"[object Int8Array]":case"[object Uint16Array]":case"[object Int16Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":return this.arrays(e,t);case"[object Map]":return this.maps(e,t);case"[object Set]":return this.sets(e,t);case"[object Object]":if(e.constructor==t.constructor&&(null==e.constructor||e.constructor===Object))return this.objects(e,t);case"[object Function]":if(e.constructor==t.constructor&&e.constructor===Function)return this.eq(`${e}`,`${t}`)}if(e instanceof Node)return this.nodes(e,t);throw Error(`can't compare objects of type ${r}`)})();return n.pop(),a.pop(),o}numbers(e,t){return Object.is(e,t)}arrays(t,r){const{length:n}=t;if(n!=r.length)return!1;for(let e=0;e<n;e++)if(!this.eq(t[e],r[e]))return!1;return!0}iterables(e,t){const r=e[Symbol.iterator](),n=t[Symbol.iterator]();for(;;){const e=r.next(),t=n.next();if(e.done&&t.done)return!0;if(e.done||t.done)return!1;if(!this.eq(e.value,t.value))return!1}}maps(r,n){if(r.size!=n.size)return!1;for(const[e,t]of r)if(!n.has(e)||!this.eq(t,n.get(e)))return!1;return!0}sets(t,r){if(t.size!=r.size)return!1;for(const e of t)if(!r.has(e))return!1;return!0}objects(t,r){const n=Object.keys(t);if(n.length!=Object.keys(r).length)return!1;for(const e of n)if(!o.call(r,e)||!this.eq(t[e],r[e]))return!1;return!0}nodes(e,t){return e.nodeType==t.nodeType&&(e.textContent==t.textContent&&!!this.iterables(e.childNodes,t.childNodes))}}s.Comparator=u,u.__name__="Comparator";const{abs:f}=Math;class d extends u{constructor(e=1e-4){super(),this.tolerance=e}numbers(e,t){return super.numbers(e,t)||f(e-t)<this.tolerance}}function h(e,t){return(new u).eq(e,t)}s.SimilarComparator=d,d.__name__="SimilarComparator",s.is_equal=h,s.is_similar=function(e,t,r){return new d(r).eq(e,t)},s.isEqual=h},function e(t,r,n,a,i){a(),n.is_windows=navigator.appVersion.includes("Windows"),n.is_ie=(()=>{const e=navigator.userAgent;return e.includes("MSIE")||e.includes("Trident")||e.includes("Edge")})(),n.is_mobile="undefined"!=typeof window&&("ontouchstart"in window||navigator.maxTouchPoints>0),n.is_little_endian=(()=>{const e=new ArrayBuffer(4),t=new Uint8Array(e);new Uint32Array(e)[1]=168496141;let r=!0;return 10==t[4]&&11==t[5]&&12==t[6]&&13==t[7]&&(r=!1),r})(),n.BYTE_ORDER=n.is_little_endian?"little":"big",n.to_big_endian=function(r){if(n.is_little_endian){const e=new Uint32Array(r.length),n=new DataView(e.buffer);let t=0;for(const e of r)n.setUint32(t,e),t+=4;return e}return r}},function e(t,r,n,a,i){a();class e{constructor(){this._dev=!1,this._wireframe=!1}set dev(e){this._dev=e}get dev(){return this._dev}set wireframe(e){this._wireframe=e}get wireframe(){return this._wireframe}}n.Settings=e,e.__name__="Settings",n.settings=new e},function a(e,t,r,n,i){var o,s,l,c,u,f,d,h;n();const p=e(8),a=e(11),v=e(26),g=e(30),m=e(31),_=Symbol("__ndarray__");class y extends Uint8Array{constructor(e,t){super(e),this[o]=!0,this.dtype="uint8",this.shape=null!=t?t:S(e)?e.shape:[this.length],this.dimension=this.shape.length}[(o=_,v.equals)](e,t){return t.eq(this.shape,e.shape)&&t.arrays(this,e)}[g.serialize](e){return m.encode_NDArray(this)}}r.Uint8NDArray=y,y.__name__="Uint8NDArray";class b extends Int8Array{constructor(e,t){super(e),this[s]=!0,this.dtype="int8",this.shape=null!=t?t:S(e)?e.shape:[this.length],this.dimension=this.shape.length}[(s=_,v.equals)](e,t){return t.eq(this.shape,e.shape)&&t.arrays(this,e)}[g.serialize](e){return m.encode_NDArray(this)}}r.Int8NDArray=b,b.__name__="Int8NDArray";class x extends Uint16Array{constructor(e,t){super(e),this[l]=!0,this.dtype="uint16",this.shape=null!=t?t:S(e)?e.shape:[this.length],this.dimension=this.shape.length}[(l=_,v.equals)](e,t){return t.eq(this.shape,e.shape)&&t.arrays(this,e)}[g.serialize](e){return m.encode_NDArray(this)}}r.Uint16NDArray=x,x.__name__="Uint16NDArray";class w extends Int16Array{constructor(e,t){super(e),this[c]=!0,this.dtype="int16",this.shape=null!=t?t:S(e)?e.shape:[this.length],this.dimension=this.shape.length}[(c=_,v.equals)](e,t){return t.eq(this.shape,e.shape)&&t.arrays(this,e)}[g.serialize](e){return m.encode_NDArray(this)}}r.Int16NDArray=w,w.__name__="Int16NDArray";class A extends Uint32Array{constructor(e,t){super(e),this[u]=!0,this.dtype="uint32",this.shape=null!=t?t:S(e)?e.shape:[this.length],this.dimension=this.shape.length}[(u=_,v.equals)](e,t){return t.eq(this.shape,e.shape)&&t.arrays(this,e)}[g.serialize](e){return m.encode_NDArray(this)}}r.Uint32NDArray=A,A.__name__="Uint32NDArray";class T extends Int32Array{constructor(e,t){super(e),this[f]=!0,this.dtype="int32",this.shape=null!=t?t:S(e)?e.shape:[this.length],this.dimension=this.shape.length}[(f=_,v.equals)](e,t){return t.eq(this.shape,e.shape)&&t.arrays(this,e)}[g.serialize](e){return m.encode_NDArray(this)}}r.Int32NDArray=T,T.__name__="Int32NDArray";class k extends Float32Array{constructor(e,t){super(e),this[d]=!0,this.dtype="float32",this.shape=null!=t?t:S(e)?e.shape:[this.length],this.dimension=this.shape.length}[(d=_,v.equals)](e,t){return t.eq(this.shape,e.shape)&&t.arrays(this,e)}[g.serialize](e){return m.encode_NDArray(this)}}r.Float32NDArray=k,k.__name__="Float32NDArray";class M extends Float64Array{constructor(e,t){super(e),this[h]=!0,this.dtype="float64",this.shape=null!=t?t:S(e)?e.shape:[this.length],this.dimension=this.shape.length}[(h=_,v.equals)](e,t){return t.eq(this.shape,e.shape)&&t.arrays(this,e)}[g.serialize](e){return m.encode_NDArray(this)}}function S(e){return p.isObject(e)&&void 0!==e[_]}r.Float64NDArray=M,M.__name__="Float64NDArray",r.is_NDArray=S,r.ndarray=function(e,t={}){let{dtype:r}=t;null==r&&(r=e instanceof ArrayBuffer||p.isArray(e)?"float64":(()=>{switch(!0){case e instanceof Uint8Array:return"uint8";case e instanceof Int8Array:return"int8";case e instanceof Uint16Array:return"uint16";case e instanceof Int16Array:return"int16";case e instanceof Uint32Array:return"uint32";case e instanceof Int32Array:return"int32";case e instanceof Float32Array:return"float32";case e instanceof Float64Array:return"float64";default:a.unreachable()}})());const{shape:n}=t;switch(r){case"uint8":return new y(e,n);case"int8":return new b(e,n);case"uint16":return new x(e,n);case"int16":return new w(e,n);case"uint32":return new A(e,n);case"int32":return new T(e,n);case"float32":return new k(e,n);case"float64":return new M(e,n)}}},function e(t,r,n,a,i){a();const o=t(11),s=t(13),l=t(8);n.serialize=Symbol("serialize");class c extends Error{}n.SerializationError=c,c.__name__="SerializationError";class u{constructor(e){var t;this._references=new Map,this._definitions=new Map,this._refmap=new Map,this.include_defaults=null===(t=null==e?void 0:e.include_defaults)||void 0===t||t}get_ref(e){return this._references.get(e)}add_ref(e,t){o.assert(!this._references.has(e)),this._references.set(e,t)}add_def(e,t){const r=this.get_ref(e);o.assert(null!=r),this._definitions.set(e,t),this._refmap.set(r,t)}get objects(){return new Set(this._references.keys())}get references(){return new Set(this._references.values())}get definitions(){return new Set(this._definitions.values())}resolve_ref(e){return this._refmap.get(e)}remove_ref(e){return this._references.delete(e)}remove_def(e){return this._definitions.delete(e)}to_serializable(t){const r=this.get_ref(t);if(null!=r)return r;if(function(e){return l.isObject(e)&&void 0!==e[n.serialize]}(t))return t[n.serialize](this);if(l.isArray(t)||l.isTypedArray(t)){const r=t.length,n=new Array(r);for(let e=0;e<r;e++){const r=t[e];n[e]=this.to_serializable(r)}return n}if(l.isPlainObject(t)){const r={};for(const[n,e]of s.entries(t))r[n]=this.to_serializable(e);return r}if(null===t||l.isBoolean(t)||l.isNumber(t)||l.isString(t))return t;throw new c(`${Object.prototype.toString.call(t)} is not serializable`)}}n.Serializer=u,u.__name__="Serializer"},function e(t,r,n,a,e){a();const i=t(1),o=t(8),s=i.__importStar(t(29)),l=t(27),c=t(32);n.is_NDArray_ref=function(e){return o.isPlainObject(e)&&("__buffer__"in e||"__ndarray__"in e)},n.decode_NDArray=function(e,t){const{shape:r,dtype:n,order:a}=e;let i;if("__buffer__"in e){const r=t.get(e.__buffer__);if(null==r)throw new Error(`buffer for ${e.__buffer__} not found`);i=r}else i=c.base64_to_buffer(e.__ndarray__);const o=(()=>{switch(n){case"uint8":return new s.Uint8NDArray(i,r);case"int8":return new s.Int8NDArray(i,r);case"uint16":return new s.Uint16NDArray(i,r);case"int16":return new s.Int16NDArray(i,r);case"uint32":return new s.Uint32NDArray(i,r);case"int32":return new s.Int32NDArray(i,r);case"float32":return new s.Float32NDArray(i,r);case"float64":return new s.Float64NDArray(i,r)}})();return a!==l.BYTE_ORDER&&c.swap(o),o},n.encode_NDArray=function(t,r){const n={order:l.BYTE_ORDER,dtype:t.dtype,shape:t.shape};if(null!=r){const e=`${r.size}`;return r.set(e,t.buffer),Object.assign({__buffer__:e},n)}{const r=c.buffer_to_base64(t.buffer);return Object.assign({__ndarray__:r},n)}}},function e(t,r,n,a,i){a(),n.buffer_to_base64=function(e){const t=new Uint8Array(e),r=Array.from(t).map(e=>String.fromCharCode(e));return btoa(r.join(""))},n.base64_to_buffer=function(e){const r=atob(e),n=r.length,a=new Uint8Array(n);for(let e=0,t=n;e<t;e++)a[e]=r.charCodeAt(e);return a.buffer},n.swap=function(e){switch(e.BYTES_PER_ELEMENT){case 2:!function(e){const r=new Uint8Array(e.buffer,e.byteOffset,2*e.length);for(let t=0,e=r.length;t<e;t+=2){const e=r[t];r[t]=r[t+1],r[t+1]=e}}(e);break;case 4:!function(e){const r=new Uint8Array(e.buffer,e.byteOffset,4*e.length);for(let t=0,e=r.length;t<e;t+=4){let e=r[t];r[t]=r[t+3],r[t+3]=e,e=r[t+1],r[t+1]=r[t+2],r[t+2]=e}}(e);break;case 8:!function(e){const r=new Uint8Array(e.buffer,e.byteOffset,8*e.length);for(let t=0,e=r.length;t<e;t+=8){let e=r[t];r[t]=r[t+7],r[t+7]=e,e=r[t+1],r[t+1]=r[t+6],r[t+6]=e,e=r[t+2],r[t+2]=r[t+5],r[t+5]=e,e=r[t+3],r[t+3]=r[t+4],r[t+4]=e}}(e)}}},function e(t,r,n,a,i){a();const o=t(26);class s{is_Scalar(){return this.is_scalar}is_Vector(){return!this.is_scalar}}n.Uniform=s,s.__name__="Uniform";class l extends s{constructor(e,t){super(),this.value=e,this.length=t,this.is_scalar=!0}get(e){return this.value}*[Symbol.iterator](){const{length:t,value:r}=this;for(let e=0;e<t;e++)yield r}select(e){return new l(this.value,e.count)}[o.equals](e,t){return t.eq(this.length,e.length)&&t.eq(this.value,e.value)}}n.UniformScalar=l,l.__name__="UniformScalar";class c extends s{constructor(e){super(),this.array=e,this.is_scalar=!1,this.length=this.array.length}get(e){return this.array[e]}*[Symbol.iterator](){yield*this.array}select(e){const t=e.select(this.array);return new this.constructor(t)}[o.equals](e,t){return t.eq(this.length,e.length)&&t.eq(this.array,e.array)}}n.UniformVector=c,c.__name__="UniformVector";class u extends c{constructor(e){super(e),this.array=e,this._view=new DataView(e.buffer)}get(e){return this._view.getUint32(4*e)}*[Symbol.iterator](){const t=this.length;for(let e=0;e<t;e++)yield this.get(e)}}n.ColorUniformVector=u,u.__name__="ColorUniformVector"},function e(t,r,n,a,i){a();const o=t(28);function s(){const t=new Array(32),r="0123456789ABCDEF";for(let e=0;e<32;e++)t[e]=r.substr(Math.floor(16*Math.random()),1);return t[12]="4",t[16]=r.substr(3&t[16].charCodeAt(0)|8,1),t.join("")}n.startsWith=function(e,t,r=0){return e.substr(r,t.length)==t},n.uuid4=s;let l=1e3;n.uniqueId=function(e){const t=o.settings.dev?"j"+l++:s();return null!=e?`${e}-${t}`:t},n.escape=function(e){return e.replace(/(?:[&<>"'`])/g,e=>{switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#x27;";case"`":return"&#x60;";default:return e}})},n.unescape=function(e){return e.replace(/&(amp|lt|gt|quot|#x27|#x60);/g,(e,t)=>{switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';case"#x27":return"'";case"#x60":return"`";default:return t}})},n.use_strict=function(e){return`'use strict';\n${e}`},n.to_fixed=function(e,t){return e.toFixed(t).replace(/(\.[0-9]*?)0+$/,"$1").replace(/\.$/,"")}},function e(t,r,n,a,i){a();const o=t(30);class s{constructor(e){this.document=e}}n.DocumentEvent=s,s.__name__="DocumentEvent";class l extends s{constructor(e,t,r){super(e),this.events=t,this.setter_id=r}}n.DocumentEventBatch=l,l.__name__="DocumentEventBatch";class c extends s{}n.DocumentChangedEvent=c,c.__name__="DocumentChangedEvent";class u extends c{constructor(e,t,r){super(e),this.msg_type=t,this.msg_data=r}[o.serialize](e){const t=this.msg_data,r=e.to_serializable(t);return{kind:"MessageSent",msg_type:this.msg_type,msg_data:r}}}n.MessageSentEvent=u,u.__name__="MessageSentEvent";class e extends c{constructor(e,t,r,n,a,i,o){super(e),this.model=t,this.attr=r,this.old=n,this.new_=a,this.setter_id=i,this.hint=o}[o.serialize](e){if(null!=this.hint)return e.to_serializable(this.hint);const t=this.new_,r=e.to_serializable(t);return this.model!=t&&e.remove_def(this.model),{kind:"ModelChanged",model:this.model.ref(),attr:this.attr,new:r}}}n.ModelChangedEvent=e,e.__name__="ModelChangedEvent";class f extends c{constructor(e,t,r){super(e),this.column_source=t,this.patches=r}[o.serialize](e){return{kind:"ColumnsPatched",column_source:this.column_source,patches:this.patches}}}n.ColumnsPatchedEvent=f,f.__name__="ColumnsPatchedEvent";class d extends c{constructor(e,t,r,n){super(e),this.column_source=t,this.data=r,this.rollover=n}[o.serialize](e){return{kind:"ColumnsStreamed",column_source:this.column_source,data:this.data,rollover:this.rollover}}}n.ColumnsStreamedEvent=d,d.__name__="ColumnsStreamedEvent";class h extends c{constructor(e,t,r){super(e),this.title=t,this.setter_id=r}[o.serialize](e){return{kind:"TitleChanged",title:this.title}}}n.TitleChangedEvent=h,h.__name__="TitleChangedEvent";class p extends c{constructor(e,t,r){super(e),this.model=t,this.setter_id=r}[o.serialize](e){return{kind:"RootAdded",model:e.to_serializable(this.model)}}}n.RootAddedEvent=p,p.__name__="RootAddedEvent";class v extends c{constructor(e,t,r){super(e),this.model=t,this.setter_id=r}[o.serialize](e){return{kind:"RootRemoved",model:this.model.ref()}}}n.RootRemovedEvent=v,v.__name__="RootRemovedEvent"},function e(t,r,n,a,i){a();const o=t(8),s=t(13);n.pretty=Symbol("pretty");class l{constructor(e){this.precision=null==e?void 0:e.precision}to_string(e){return function(e){return o.isObject(e)&&void 0!==e[n.pretty]}(e)?e[n.pretty](this):o.isBoolean(e)?this.boolean(e):o.isNumber(e)?this.number(e):o.isString(e)?this.string(e):o.isArray(e)?this.array(e):o.isIterable(e)?this.iterable(e):o.isPlainObject(e)?this.object(e):`${e}`}token(e){return e}boolean(e){return`${e}`}number(e){return null!=this.precision?e.toFixed(this.precision):`${e}`}string(e){return`"${e.replace(/'/g,"\\'")}"`}array(e){const t=this.token,r=[];for(const t of e)r.push(this.to_string(t));return`${t("[")}${r.join(`${t(",")} `)}${t("]")}`}iterable(e){var t;const r=this.token,n=null!==(t=Object(e)[Symbol.toStringTag])&&void 0!==t?t:"Object",a=this.array(e);return`${n}${r("(")}${a}${r(")")}`}object(r){const n=this.token,a=[];for(const[e,t]of s.entries(r))a.push(`${e}${n(":")} ${this.to_string(t)}`);return`${n("{")}${a.join(`${n(",")} `)}${n("}")}`}}n.Printer=l,l.__name__="Printer",n.to_string=function(e,t){return new l(t).to_string(e)}},function e(t,r,n,a,i){a();const o=t(13),s=t(8);function l(e){return s.isObject(e)&&void 0!==e[n.clone]}n.clone=Symbol("clone"),n.is_Cloneable=l;class c extends Error{}n.CloningError=c,c.__name__="CloningError";class u{constructor(){}clone(r){if(l(r))return r[n.clone](this);if(s.isArray(r)){const e=r.length,n=new Array(e);for(let t=0;t<e;t++){const e=r[t];n[t]=this.clone(e)}return n}if(s.isPlainObject(r)){const t={};for(const[n,e]of o.entries(r))t[n]=this.clone(e);return t}if(null===r||s.isBoolean(r)||s.isNumber(r)||s.isString(r))return r;throw new c(`${Object.prototype.toString.call(r)} is not cloneable`)}}n.Cloner=u,u.__name__="Cloner"},function e(t,e,r,n,a){n();const i=t(1);i.__exportStar(t(39),r),i.__exportStar(t(162),r),i.__exportStar(t(257),r),i.__exportStar(t(261),r),i.__exportStar(t(266),r),i.__exportStar(t(272),r),i.__exportStar(t(205),r),i.__exportStar(t(277),r),i.__exportStar(t(313),r),i.__exportStar(t(315),r),i.__exportStar(t(317),r),i.__exportStar(t(209),r),i.__exportStar(t(147),r),i.__exportStar(t(330),r),i.__exportStar(t(338),r),i.__exportStar(t(220),r),i.__exportStar(t(339),r),i.__exportStar(t(217),r),i.__exportStar(t(340),r),i.__exportStar(t(341),r),i.__exportStar(t(198),r),i.__exportStar(t(346),r),i.__exportStar(t(356),r),i.__exportStar(t(360),r)},function e(t,r,n,a,i){a(),i("Annotation",t(40).Annotation),i("Arrow",t(55).Arrow),i("ArrowHead",t(133).ArrowHead),i("OpenHead",t(133).OpenHead),i("NormalHead",t(133).NormalHead),i("TeeHead",t(133).TeeHead),i("VeeHead",t(133).VeeHead),i("Band",t(134).Band),i("BoxAnnotation",t(136).BoxAnnotation),i("ColorBar",t(137).ColorBar),i("Label",t(226).Label),i("LabelSet",t(227).LabelSet),i("Legend",t(228).Legend),i("LegendItem",t(229).LegendItem),i("PolyAnnotation",t(231).PolyAnnotation),i("Slope",t(232).Slope),i("Span",t(233).Span),i("TextAnnotation",t(139).TextAnnotation),i("Title",t(138).Title),i("ToolbarPanel",t(234).ToolbarPanel),i("Tooltip",t(254).Tooltip),i("Whisker",t(256).Whisker)},function e(t,r,n,a,i){a();const o=t(41);class s extends o.RendererView{get_size(){if(this.model.visible){const{width:e,height:t}=this._get_size();return{width:Math.round(e),height:Math.round(t)}}return{width:0,height:0}}_get_size(){throw new Error("not implemented")}connect_signals(){super.connect_signals();const e=this.model.properties;this.on_change(e.visible,()=>{null!=this.layout&&(this.layout.visible=this.model.visible,this.plot_view.request_layout())})}get needs_clip(){return null==this.layout}serializable_state(){const e=super.serializable_state();return null==this.layout?e:Object.assign(Object.assign({},e),{bbox:this.layout.bbox.box})}}n.AnnotationView=s,s.__name__="AnnotationView";class l extends o.Renderer{constructor(e){super(e)}static init_Annotation(){this.override({level:"annotation"})}}n.Annotation=l,l.__name__="Annotation",l.init_Annotation()},function e(t,r,n,a,i){a();const o=t(1),s=t(42),e=o.__importStar(t(45)),l=t(20),c=t(53),u=t(54);class f extends s.View{get coordinates(){const{_coordinates:e}=this;return null!=e?e:this._coordinates=this._initialize_coordinates()}initialize(){super.initialize(),this.visuals=new e.Visuals(this),this.needs_webgl_blit=!1}connect_signals(){super.connect_signals();const{x_range_name:e,y_range_name:t}=this.model.properties;this.on_change([e,t],()=>this._initialize_coordinates())}_initialize_coordinates(){const{x_range_name:e,y_range_name:t}=this.model,{frame:r}=this.plot_view,n=r.x_scales.get(e),a=r.y_scales.get(t);return new u.CoordinateTransform(n,a)}get plot_view(){return this.parent}get plot_model(){return this.parent.model}get layer(){const{overlays:e,primary:t}=this.canvas;return"overlay"==this.model.level?e:t}get canvas(){return this.plot_view.canvas_view}request_render(){this.request_paint()}request_paint(){this.plot_view.request_paint(this)}notify_finished(){this.plot_view.notify_finished()}get needs_clip(){return!1}get has_webgl(){return!1}render(){this.model.visible&&this._render(),this._has_finished=!0}renderer_view(e){}}n.RendererView=f,f.__name__="RendererView";class d extends c.Model{constructor(e){super(e)}static init_Renderer(){this.define(({Boolean:e,String:t})=>({level:[l.RenderLevel,"image"],visible:[e,!0],x_range_name:[t,"default"],y_range_name:[t,"default"]}))}}n.Renderer=d,d.__name__="Renderer",d.init_Renderer()},function e(t,r,n,a,i){a();const o=t(1),s=t(15),l=t(43),c=t(8),u=o.__importDefault(t(44));class e{constructor(e){this.removed=new s.Signal0(this,"removed"),this._ready=Promise.resolve(void 0),this._slots=new WeakMap;const{model:t,parent:r}=e;this.model=t,this.parent=r,this.root=null==r?this:r.root,this.removed.emit()}get ready(){return this._ready}connect(e,n){let t=this._slots.get(n);return null==t&&(t=(e,t)=>{const r=Promise.resolve(n.call(this,e,t));this._ready=this._ready.then(()=>r)},this._slots.set(n,t)),e.connect(t,this)}disconnect(e,t){return e.disconnect(t,this)}initialize(){this._has_finished=!1,this.is_root&&(this._stylesheet=l.stylesheet);for(const e of this.styles())this.stylesheet.append(e)}async lazy_initialize(){}remove(){this.disconnect_signals(),this.removed.emit()}toString(){return`${this.model.type}View(${this.model.id})`}serializable_state(){return{type:this.model.type}}get is_root(){return null==this.parent}assert_root(){if(!this.is_root)throw new Error(`${this.toString()} is not a root layout`)}has_finished(){return this._has_finished}get is_idle(){return this.has_finished()}connect_signals(){}disconnect_signals(){s.Signal.disconnect_receiver(this)}on_change(t,r){for(const e of c.isArray(t)?t:[t])this.connect(e.change,r)}cursor(e,t){return null}get stylesheet(){return this.is_root?this._stylesheet:this.root.stylesheet}styles(){return[u.default]}}n.View=e,e.__name__="View"},function e(t,r,n,a,i){a();const o=t(8),s=t(13),l=a=>(r={},...e)=>{const n=document.createElement(a);n.classList.add("bk");for(let[e,t]of s.entries(r))if(null!=t&&(!o.isBoolean(t)||t))if("class"===e&&(o.isString(t)&&(t=t.split(/\s+/)),o.isArray(t)))for(const a of t)null!=a&&n.classList.add(a);else if("style"===e&&o.isPlainObject(t))for(const[a,r]of s.entries(t))n.style[a]=r;else if("data"===e&&o.isPlainObject(t))for(const[a,r]of s.entries(t))n.dataset[a]=r;else n.setAttribute(e,t);function t(t){if(o.isString(t))n.appendChild(document.createTextNode(t));else if(t instanceof Node)n.appendChild(t);else if(t instanceof NodeList||t instanceof HTMLCollection)for(const e of t)n.appendChild(e);else if(null!=t&&!1!==t)throw new Error(`expected a DOM element, string, false or null, got ${JSON.stringify(t)}`)}for(const a of e)if(o.isArray(a))for(const r of a)t(r);else t(a);return n};function c(e){const t=e.parentNode;null!=t&&t.removeChild(e)}function u(t,...r){const n=t.firstChild;for(const e of r)t.insertBefore(e,n)}function f(e,t){var r,n,a;const i=Element.prototype;return(null!==(a=null!==(n=null!==(r=i.matches)&&void 0!==r?r:i.webkitMatchesSelector)&&void 0!==n?n:i.mozMatchesSelector)&&void 0!==a?a:i.msMatchesSelector).call(e,t)}function d(e){return parseFloat(e)||0}function h(e){const t=getComputedStyle(e);return{border:{top:d(t.borderTopWidth),bottom:d(t.borderBottomWidth),left:d(t.borderLeftWidth),right:d(t.borderRightWidth)},margin:{top:d(t.marginTop),bottom:d(t.marginBottom),left:d(t.marginLeft),right:d(t.marginRight)},padding:{top:d(t.paddingTop),bottom:d(t.paddingBottom),left:d(t.paddingLeft),right:d(t.paddingRight)}}}function p(e){const t=e.getBoundingClientRect();return{width:Math.ceil(t.width),height:Math.ceil(t.height)}}n.createElement=function(e,t,...r){return l(e)(t,...r)},n.div=l("div"),n.span=l("span"),n.canvas=l("canvas"),n.link=l("link"),n.style=l("style"),n.a=l("a"),n.p=l("p"),n.i=l("i"),n.pre=l("pre"),n.button=l("button"),n.label=l("label"),n.input=l("input"),n.select=l("select"),n.option=l("option"),n.optgroup=l("optgroup"),n.textarea=l("textarea"),n.nbsp=function(){return document.createTextNode(" ")},n.append=function(t,...r){for(const e of r)t.appendChild(e)},n.remove=c,n.removeElement=c,n.replaceWith=function(e,t){const r=e.parentNode;null!=r&&r.replaceChild(t,e)},n.prepend=u,n.empty=function(e,t=!1){let r;for(;r=e.firstChild;)e.removeChild(r);if(t&&e instanceof Element)for(const t of e.attributes)e.removeAttributeNode(t)},n.display=function(e){e.style.display=""},n.undisplay=function(e){e.style.display="none"},n.show=function(e){e.style.visibility=""},n.hide=function(e){e.style.visibility="hidden"},n.offset=function(e){const t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft}},n.matches=f,n.parent=function(e,t){let r=e;for(;r=r.parentElement;)if(f(r,t))return r;return null},n.extents=h,n.size=p,n.scroll_size=function(e){return{width:Math.ceil(e.scrollWidth),height:Math.ceil(e.scrollHeight)}},n.outer_size=function(e){const{margin:{left:t,right:r,top:n,bottom:a}}=h(e),{width:i,height:o}=p(e);return{width:Math.ceil(i+t+r),height:Math.ceil(o+n+a)}},n.content_size=function(t){const{left:r,top:n}=t.getBoundingClientRect(),{padding:a}=h(t);let i=0,o=0;for(const e of t.children){const t=e.getBoundingClientRect();i=Math.max(i,Math.ceil(t.left-r-a.left+t.width)),o=Math.max(o,Math.ceil(t.top-n-a.top+t.height))}return{width:i,height:o}},n.position=function(r,n,a){const{style:i}=r;if(i.left=`${n.x}px`,i.top=`${n.y}px`,i.width=`${n.width}px`,i.height=`${n.height}px`,null==a)i.margin="";else{const{top:r,right:n,bottom:e,left:t}=a;i.margin=`${r}px ${n}px ${e}px ${t}px`}},n.children=function(e){return Array.from(e.children)};class v{constructor(e){this.el=e,this.classList=e.classList}get values(){const r=[];for(let t=0;t<this.classList.length;t++){const e=this.classList.item(t);null!=e&&r.push(e)}return r}has(e){return this.classList.contains(e)}add(...t){for(const e of t)this.classList.add(e);return this}remove(...t){for(const e of t)this.classList.remove(e);return this}clear(){for(const e of this.values)"bk"!=e&&this.classList.remove(e);return this}toggle(e,t){return(null!=t?t:!this.has(e))?this.add(e):this.remove(e),this}}var g;function m(e,t,r){const{width:n,height:a,position:i,display:o}=e.style;e.style.position="absolute",e.style.display="",e.style.width=null!=t.width&&t.width!=1/0?`${t.width}px`:"auto",e.style.height=null!=t.height&&t.height!=1/0?`${t.height}px`:"auto";try{return r()}finally{e.style.position=i,e.style.display=o,e.style.width=n,e.style.height=a}}n.ClassList=v,v.__name__="ClassList",n.classes=function(e){return new v(e)},n.toggle_attribute=function(e,t,r){null==r&&(r=!e.hasAttribute(t)),r?e.setAttribute(t,"true"):e.removeAttribute(t)},(g=n.Keys||(n.Keys={}))[g.Backspace=8]="Backspace",g[g.Tab=9]="Tab",g[g.Enter=13]="Enter",g[g.Esc=27]="Esc",g[g.PageUp=33]="PageUp",g[g.PageDown=34]="PageDown",g[g.Left=37]="Left",g[g.Up=38]="Up",g[g.Right=39]="Right",g[g.Down=40]="Down",g[g.Delete=46]="Delete",n.undisplayed=function(e,t){const{display:r}=e.style;e.style.display="none";try{return t()}finally{e.style.display=r}},n.unsized=function(e,t){return m(e,{},t)},n.sized=m;class _{constructor(e){this.root=e,this.known=new Set,this.style=n.style({type:"text/css"}),u(e,this.style)}append(e){this.known.has(e)||(this.style.appendChild(document.createTextNode(e)),this.known.add(e))}}n.StyleSheet=_,_.__name__="StyleSheet",n.stylesheet=new _(document.head),n.dom_ready=async function(){if("loading"==document.readyState)return new Promise((e,t)=>{document.addEventListener("DOMContentLoaded",()=>e(),{once:!0})})}},function e(t,r,n,a,i){a(),n.root="bk-root",n.default=".bk-root{position:relative;width:auto;height:auto;z-index:0;box-sizing:border-box;font-family:Helvetica, Arial, sans-serif;font-size:13px;}.bk-root .bk,.bk-root .bk:before,.bk-root .bk:after{box-sizing:inherit;margin:0;border:0;padding:0;background-image:none;font-family:inherit;font-size:100%;line-height:1.42857143;}.bk-root pre.bk{font-family:Courier, monospace;}"},function e(t,r,n,a,i){a();const o=t(1),s=t(46);i("Line",s.Line),i("LineScalar",s.LineScalar),i("LineVector",s.LineVector);const l=t(49);i("Fill",l.Fill),i("FillScalar",l.FillScalar),i("FillVector",l.FillVector);const c=t(50);i("Text",c.Text),i("TextScalar",c.TextScalar),i("TextVector",c.TextVector);const u=t(51);i("Hatch",u.Hatch),i("HatchScalar",u.HatchScalar),i("HatchVector",u.HatchVector);const f=o.__importStar(t(48)),d=t(47);i("VisualProperties",d.VisualProperties),i("VisualUniforms",d.VisualUniforms);class h{constructor(n){this._visuals=[];for(const[t,r]of n.model._mixins){const e=(()=>{switch(r){case f.Line:return new s.Line(n,t);case f.LineScalar:return new s.LineScalar(n,t);case f.LineVector:return new s.LineVector(n,t);case f.Fill:return new l.Fill(n,t);case f.FillScalar:return new l.FillScalar(n,t);case f.FillVector:return new l.FillVector(n,t);case f.Text:return new c.Text(n,t);case f.TextScalar:return new c.TextScalar(n,t);case f.TextVector:return new c.TextVector(n,t);case f.Hatch:return new u.Hatch(n,t);case f.HatchScalar:return new u.HatchScalar(n,t);case f.HatchVector:return new u.HatchVector(n,t);default:throw new Error("unknown visual")}})();this._visuals.push(e),Object.defineProperty(this,t+e.type,{get:()=>e,configurable:!1,enumerable:!0})}}*[Symbol.iterator](){yield*this._visuals}}n.Visuals=h,h.__name__="Visuals"},function t(e,r,n,a,i){a();const o=e(1),s=e(47),l=o.__importStar(e(48)),c=e(22),t=e(8);function u(e){if(t.isArray(e))return e;switch(e){case"solid":return[];case"dashed":return[6];case"dotted":return[2,4];case"dotdash":return[2,4,6,4];case"dashdot":return[6,4,2,4];default:return e.split(" ").map(Number).filter(t.isInteger)}}n.resolve_line_dash=u;class f extends s.VisualProperties{get doit(){const e=this.line_color.get_value(),t=this.line_alpha.get_value(),r=this.line_width.get_value();return!(null==e||0==t||0==r)}set_value(e){const t=this.line_color.get_value(),r=this.line_alpha.get_value();e.strokeStyle=c.color2css(t,r),e.lineWidth=this.line_width.get_value(),e.lineJoin=this.line_join.get_value(),e.lineCap=this.line_cap.get_value(),e.lineDash=u(this.line_dash.get_value()),e.lineDashOffset=this.line_dash_offset.get_value()}}n.Line=f,f.__name__="Line";class d extends s.VisualUniforms{get doit(){const e=this.line_color.value,t=this.line_alpha.value,r=this.line_width.value;return!(0==e||0==t||0==r)}set_value(e){const t=this.line_color.value,r=this.line_alpha.value;e.strokeStyle=c.color2css(t,r),e.lineWidth=this.line_width.value,e.lineJoin=this.line_join.value,e.lineCap=this.line_cap.value,e.lineDash=u(this.line_dash.value),e.lineDashOffset=this.line_dash_offset.value}}n.LineScalar=d,d.__name__="LineScalar";class h extends s.VisualUniforms{get doit(){const{line_color:e}=this;if(e.is_Scalar()&&0==e.value)return!1;const{line_alpha:t}=this;if(t.is_Scalar()&&0==t.value)return!1;const{line_width:r}=this;return!r.is_Scalar()||0!=r.value}set_vectorize(e,t){const r=this.line_color.get(t),n=this.line_alpha.get(t),a=this.line_width.get(t),i=this.line_join.get(t),o=this.line_cap.get(t),s=this.line_dash.get(t),l=this.line_dash_offset.get(t);e.strokeStyle=c.color2css(r,n),e.lineWidth=a,e.lineJoin=i,e.lineCap=o,e.lineDash=u(s),e.lineDashOffset=l}}n.LineVector=h,h.__name__="LineVector",f.prototype.type="line",f.prototype.attrs=Object.keys(l.Line),d.prototype.type="line",d.prototype.attrs=Object.keys(l.LineScalar),h.prototype.type="line",h.prototype.attrs=Object.keys(l.LineVector)},function e(t,r,n,a,i){a();class o{constructor(r,n=""){this.obj=r,this.prefix=n;const a=this;this._props=[];for(const t of this.attrs){const e=r.model.properties[n+t];e.change.connect(()=>this.update()),a[t]=e,this._props.push(e)}this.update()}*[Symbol.iterator](){yield*this._props}update(){}}n.VisualProperties=o,o.__name__="VisualProperties";class s{constructor(t,r=""){this.obj=t,this.prefix=r;for(const e of this.attrs)Object.defineProperty(this,e,{get:()=>t[r+e]})}*[Symbol.iterator](){for(const e of this.attrs)yield this.obj.model.properties[this.prefix+e]}update(){}}n.VisualUniforms=s,s.__name__="VisualUniforms"},function e(t,r,n,a,i){a();const o=t(1),s=o.__importStar(t(18)),l=t(20),c=o.__importStar(t(21)),e=t(13);n.Line={line_color:[c.Nullable(c.Color),"black"],line_alpha:[c.Alpha,1],line_width:[c.Number,1],line_join:[l.LineJoin,"bevel"],line_cap:[l.LineCap,"butt"],line_dash:[c.Or(l.LineDash,c.Array(c.Number)),[]],line_dash_offset:[c.Number,0]},n.Fill={fill_color:[c.Nullable(c.Color),"gray"],fill_alpha:[c.Alpha,1]},n.Hatch={hatch_color:[c.Nullable(c.Color),"black"],hatch_alpha:[c.Alpha,1],hatch_scale:[c.Number,12],hatch_pattern:[c.Nullable(c.Or(l.HatchPatternType,c.String)),null],hatch_weight:[c.Number,1],hatch_extra:[c.Dict(c.AnyRef()),{}]},n.Text={text_color:[c.Nullable(c.Color),"#444444"],text_alpha:[c.Alpha,1],text_font:[s.Font,"helvetica"],text_font_size:[c.FontSize,"16px"],text_font_style:[l.FontStyle,"normal"],text_align:[l.TextAlign,"left"],text_baseline:[l.TextBaseline,"bottom"],text_line_height:[c.Number,1.2]},n.LineScalar={line_color:[s.ColorScalar,"black"],line_alpha:[s.NumberScalar,1],line_width:[s.NumberScalar,1],line_join:[s.LineJoinScalar,"bevel"],line_cap:[s.LineCapScalar,"butt"],line_dash:[s.LineDashScalar,[]],line_dash_offset:[s.NumberScalar,0]},n.FillScalar={fill_color:[s.ColorScalar,"gray"],fill_alpha:[s.NumberScalar,1]},n.HatchScalar={hatch_color:[s.ColorScalar,"black"],hatch_alpha:[s.NumberScalar,1],hatch_scale:[s.NumberScalar,12],hatch_pattern:[s.NullStringScalar,null],hatch_weight:[s.NumberScalar,1],hatch_extra:[s.AnyScalar,{}]},n.TextScalar={text_color:[s.ColorScalar,"#444444"],text_alpha:[s.NumberScalar,1],text_font:[s.FontScalar,"helvetica"],text_font_size:[s.FontSizeScalar,"16px"],text_font_style:[s.FontStyleScalar,"normal"],text_align:[s.TextAlignScalar,"left"],text_baseline:[s.TextBaselineScalar,"bottom"],text_line_height:[s.NumberScalar,1.2]},n.LineVector={line_color:[s.ColorSpec,"black"],line_alpha:[s.NumberSpec,1],line_width:[s.NumberSpec,1],line_join:[s.LineJoinSpec,"bevel"],line_cap:[s.LineCapSpec,"butt"],line_dash:[s.LineDashSpec,[]],line_dash_offset:[s.NumberSpec,0]},n.FillVector={fill_color:[s.ColorSpec,"gray"],fill_alpha:[s.NumberSpec,1]},n.HatchVector={hatch_color:[s.ColorSpec,"black"],hatch_alpha:[s.NumberSpec,1],hatch_scale:[s.NumberSpec,12],hatch_pattern:[s.NullStringSpec,null],hatch_weight:[s.NumberSpec,1],hatch_extra:[s.AnyScalar,{}]},n.TextVector={text_color:[s.ColorSpec,"#444444"],text_alpha:[s.NumberSpec,1],text_font:[s.FontSpec,"helvetica"],text_font_size:[s.FontSizeSpec,"16px"],text_font_style:[s.FontStyleSpec,"normal"],text_align:[s.TextAlignSpec,"left"],text_baseline:[s.TextBaselineSpec,"bottom"],text_line_height:[s.NumberSpec,1.2]},n.attrs_of=function(r,n,a,i=!1){const o={};for(const t of e.keys(a)){const a=`${n}${t}`,e=r[a];o[i?a:t]=e}return o}},function e(t,r,n,a,i){a();const o=t(1),s=t(47),l=o.__importStar(t(48)),c=t(22);class e extends s.VisualProperties{get doit(){const e=this.fill_color.get_value(),t=this.fill_alpha.get_value();return!(null==e||0==t)}set_value(e){const t=this.fill_color.get_value(),r=this.fill_alpha.get_value();e.fillStyle=c.color2css(t,r)}}n.Fill=e,e.__name__="Fill";class u extends s.VisualUniforms{get doit(){const e=this.fill_color.value,t=this.fill_alpha.value;return!(0==e||0==t)}set_value(e){const t=this.fill_color.value,r=this.fill_alpha.value;e.fillStyle=c.color2css(t,r)}}n.FillScalar=u,u.__name__="FillScalar";class f extends s.VisualUniforms{get doit(){const{fill_color:e}=this;if(e.is_Scalar()&&0==e.value)return!1;const{fill_alpha:t}=this;return!t.is_Scalar()||0!=t.value}set_vectorize(e,t){const r=this.fill_color.get(t),n=this.fill_alpha.get(t);e.fillStyle=c.color2css(r,n)}}n.FillVector=f,f.__name__="FillVector",e.prototype.type="fill",e.prototype.attrs=Object.keys(l.Fill),u.prototype.type="fill",u.prototype.attrs=Object.keys(l.FillScalar),f.prototype.type="fill",f.prototype.attrs=Object.keys(l.FillVector)},function e(t,r,n,a,i){a();const o=t(1),e=t(47),s=o.__importStar(t(48)),l=t(22);class c extends e.VisualProperties{get doit(){const e=this.text_color.get_value(),t=this.text_alpha.get_value();return!(null==e||0==t)}set_value(e){const t=this.text_color.get_value(),r=this.text_alpha.get_value();e.fillStyle=l.color2css(t,r),e.font=this.font_value(),e.textAlign=this.text_align.get_value(),e.textBaseline=this.text_baseline.get_value()}font_value(){return`${this.text_font_style.get_value()} ${this.text_font_size.get_value()} ${this.text_font.get_value()}`}}n.Text=c,c.__name__="Text";class u extends e.VisualUniforms{get doit(){const e=this.text_color.value,t=this.text_alpha.value;return!(0==e||0==t)}set_value(e){const t=this.text_color.value,r=this.text_alpha.value,n=this.font_value(),a=this.text_align.value,i=this.text_baseline.value;e.fillStyle=l.color2css(t,r),e.font=n,e.textAlign=a,e.textBaseline=i}font_value(){return`${this.text_font_style.value} ${this.text_font_size.value} ${this.text_font.value}`}}n.TextScalar=u,u.__name__="TextScalar";class f extends e.VisualUniforms{get doit(){const{text_color:e}=this;if(e.is_Scalar()&&0==e.value)return!1;const{text_alpha:t}=this;return!t.is_Scalar()||0!=t.value}set_vectorize(e,t){const r=this.text_color.get(t),n=this.text_alpha.get(t),a=this.font_value(t),i=this.text_align.get(t),o=this.text_baseline.get(t);e.fillStyle=l.color2css(r,n),e.font=a,e.textAlign=i,e.textBaseline=o}font_value(e){return`${this.text_font_style.get(e)} ${this.text_font_size.get(e)} ${this.text_font.get(e)}`}}n.TextVector=f,f.__name__="TextVector",c.prototype.type="text",c.prototype.attrs=Object.keys(s.Text),u.prototype.type="text",u.prototype.attrs=Object.keys(s.TextScalar),f.prototype.type="text",f.prototype.attrs=Object.keys(s.TextVector)},function e(t,r,n,a,i){a();const o=t(1),s=t(47),l=t(52),c=o.__importStar(t(18)),e=o.__importStar(t(48));class u extends s.VisualProperties{constructor(){super(...arguments),this._update_iteration=0}update(){if(this._update_iteration++,this._hatch_image=null,!this.doit)return;const t=this.hatch_color.get_value(),r=this.hatch_alpha.get_value(),n=this.hatch_scale.get_value(),a=this.hatch_pattern.get_value(),i=this.hatch_weight.get_value(),o=e=>{this._hatch_image=e},s=this.hatch_extra.get_value()[a];if(null!=s){const a=s.get_pattern(t,r,n,i);if(a instanceof Promise){const{_update_iteration:t}=this;a.then(e=>{this._update_iteration==t&&(o(e),this.obj.request_render())})}else o(a)}else{const s=this.obj.canvas.create_layer(),e=l.get_pattern(s,a,t,r,n,i);o(e)}}get doit(){const e=this.hatch_color.get_value(),t=this.hatch_alpha.get_value(),r=this.hatch_pattern.get_value();return!(null==e||0==t||" "==r||"blank"==r||null==r)}set_value(e){const t=this.pattern(e);e.fillStyle=null!=t?t:"transparent"}pattern(e){const t=this._hatch_image;return null==t?null:e.createPattern(t,this.repetition())}repetition(){const e=this.hatch_pattern.get_value(),t=this.hatch_extra.get_value()[e];if(null==t)return"repeat";switch(t.repetition){case"repeat":return"repeat";case"repeat_x":return"repeat-x";case"repeat_y":return"repeat-y";case"no_repeat":return"no-repeat"}}}n.Hatch=u,u.__name__="Hatch";class f extends s.VisualUniforms{constructor(){super(...arguments),this._static_doit=!1,this._update_iteration=0}_compute_static_doit(){const e=this.hatch_color.value,t=this.hatch_alpha.value,r=this.hatch_pattern.value;return!(null==e||0==t||" "==r||"blank"==r||null==r)}update(){this._update_iteration++;const t=this.hatch_color.length;if(this._hatch_image=new c.UniformScalar(null,t),this._static_doit=this._compute_static_doit(),!this._static_doit)return;const r=this.hatch_color.value,e=this.hatch_alpha.value,n=this.hatch_scale.value,a=this.hatch_pattern.value,i=this.hatch_weight.value,o=e=>{this._hatch_image=new c.UniformScalar(e,t)},s=this.hatch_extra.value[a];if(null!=s){const t=s.get_pattern(r,e,n,i);if(t instanceof Promise){const{_update_iteration:r}=this;t.then(e=>{this._update_iteration==r&&(o(e),this.obj.request_render())})}else o(t)}else{const t=this.obj.canvas.create_layer(),c=l.get_pattern(t,a,r,e,n,i);o(c)}}get doit(){return this._static_doit}set_value(e){var t;e.fillStyle=null!==(t=this.pattern(e))&&void 0!==t?t:"transparent"}pattern(e){const t=this._hatch_image.value;return null==t?null:e.createPattern(t,this.repetition())}repetition(){const e=this.hatch_pattern.value,t=this.hatch_extra.value[e];if(null==t)return"repeat";switch(t.repetition){case"repeat":return"repeat";case"repeat_x":return"repeat-x";case"repeat_y":return"repeat-y";case"no_repeat":return"no-repeat"}}}n.HatchScalar=f,f.__name__="HatchScalar";class d extends s.VisualUniforms{constructor(){super(...arguments),this._static_doit=!1,this._update_iteration=0}_compute_static_doit(){const{hatch_color:e}=this;if(e.is_Scalar()&&0==e.value)return!1;const{hatch_alpha:t}=this;if(t.is_Scalar()&&0==t.value)return!1;const{hatch_pattern:r}=this;if(r.is_Scalar()){const e=r.value;if(" "==e||"blank"==e||null==e)return!1}return!0}update(){this._update_iteration++;const a=this.hatch_color.length;if(this._hatch_image=new c.UniformScalar(null,a),this._static_doit=this._compute_static_doit(),!this._static_doit)return;const i=(t,r,n,a,i,o)=>{const s=this.hatch_extra.value[t];if(null!=s){const t=s.get_pattern(r,n,a,i);if(t instanceof Promise){const{_update_iteration:r}=this;t.then(e=>{this._update_iteration==r&&(o(e),this.obj.request_render())})}else o(t)}else{const s=this.obj.canvas.create_layer(),e=l.get_pattern(s,t,r,n,a,i);o(e)}};if(this.hatch_color.is_Scalar()&&this.hatch_alpha.is_Scalar()&&this.hatch_scale.is_Scalar()&&this.hatch_pattern.is_Scalar()&&this.hatch_weight.is_Scalar()){const e=this.hatch_color.value,t=this.hatch_alpha.value,r=this.hatch_scale.value;i(this.hatch_pattern.value,e,t,r,this.hatch_weight.value,e=>{this._hatch_image=new c.UniformScalar(e,a)})}else{const n=new Array(a);n.fill(null),this._hatch_image=new c.UniformVector(n);for(let r=0;r<a;r++){const a=this.hatch_color.get(r),e=this.hatch_alpha.get(r),t=this.hatch_scale.get(r);i(this.hatch_pattern.get(r),a,e,t,this.hatch_weight.get(r),e=>{n[r]=e})}}}get doit(){return this._static_doit}set_vectorize(e,t){var r;e.fillStyle=null!==(r=this.pattern(e,t))&&void 0!==r?r:"transparent"}pattern(e,t){const r=this._hatch_image.get(t);return null==r?null:e.createPattern(r,this.repetition(t))}repetition(e){const t=this.hatch_pattern.get(e),r=this.hatch_extra.value[t];if(null==r)return"repeat";switch(r.repetition){case"repeat":return"repeat";case"repeat_x":return"repeat-x";case"repeat_y":return"repeat-y";case"no_repeat":return"no-repeat"}}}n.HatchVector=d,d.__name__="HatchVector",u.prototype.type="hatch",u.prototype.attrs=Object.keys(e.Hatch),f.prototype.type="hatch",f.prototype.attrs=Object.keys(e.HatchScalar),d.prototype.type="hatch",d.prototype.attrs=Object.keys(e.HatchVector)},function e(t,r,f,n,a){n();const d=t(22);function h(e,t,r){e.moveTo(0,r+.5),e.lineTo(t,r+.5),e.stroke()}function p(e,t,r){e.moveTo(r+.5,0),e.lineTo(r+.5,t),e.stroke()}function v(e,t){e.moveTo(0,t),e.lineTo(t,0),e.stroke(),e.moveTo(0,0),e.lineTo(t,t),e.stroke()}f.hatch_aliases={" ":"blank",".":"dot",o:"ring","-":"horizontal_line","|":"vertical_line","+":"cross",'"':"horizontal_dash",":":"vertical_dash","@":"spiral","/":"right_diagonal_line","\\":"left_diagonal_line",x:"diagonal_cross",",":"right_diagonal_dash","`":"left_diagonal_dash",v:"horizontal_wave",">":"vertical_wave","*":"criss_cross"},f.get_pattern=function(e,t,r,n,a,i){return e.resize(a,a),e.prepare(),function(t,r,n,a,e,i){var o;const s=e,l=s/2,c=l/2,u=d.color2css(n,a);switch(t.strokeStyle=u,t.fillStyle=u,t.lineCap="square",t.lineWidth=i,null!==(o=f.hatch_aliases[r])&&void 0!==o?o:r){case"blank":break;case"dot":t.arc(l,l,l/2,0,2*Math.PI,!0),t.fill();break;case"ring":t.arc(l,l,l/2,0,2*Math.PI,!0),t.stroke();break;case"horizontal_line":h(t,s,l);break;case"vertical_line":p(t,s,l);break;case"cross":h(t,s,l),p(t,s,l);break;case"horizontal_dash":h(t,l,l);break;case"vertical_dash":p(t,l,l);break;case"spiral":{const r=s/30;t.moveTo(l,l);for(let e=0;e<360;e++){const n=.1*e,a=l+r*n*Math.cos(n),d=l+r*n*Math.sin(n);t.lineTo(a,d)}t.stroke();break}case"right_diagonal_line":t.moveTo(.5-c,s),t.lineTo(c+.5,0),t.stroke(),t.moveTo(c+.5,s),t.lineTo(3*c+.5,0),t.stroke(),t.moveTo(3*c+.5,s),t.lineTo(5*c+.5,0),t.stroke(),t.stroke();break;case"left_diagonal_line":t.moveTo(c+.5,s),t.lineTo(.5-c,0),t.stroke(),t.moveTo(3*c+.5,s),t.lineTo(c+.5,0),t.stroke(),t.moveTo(5*c+.5,s),t.lineTo(3*c+.5,0),t.stroke(),t.stroke();break;case"diagonal_cross":v(t,s);break;case"right_diagonal_dash":t.moveTo(c+.5,3*c+.5),t.lineTo(3*c+.5,c+.5),t.stroke();break;case"left_diagonal_dash":t.moveTo(c+.5,c+.5),t.lineTo(3*c+.5,3*c+.5),t.stroke();break;case"horizontal_wave":t.moveTo(0,c),t.lineTo(l,3*c),t.lineTo(s,c),t.stroke();break;case"vertical_wave":t.moveTo(c,0),t.lineTo(3*c,l),t.lineTo(c,s),t.stroke();break;case"criss_cross":v(t,s),h(t,s,l),p(t,s,l)}}(e.ctx,t,r,n,a,i),e.canvas}},function e(t,r,n,a,i){a();const o=t(14),s=t(8),l=t(13),c=t(19);class u extends o.HasProps{constructor(e){super(e)}get is_syncable(){return this.syncable}static init_Model(){this.define(({Any:e,Unknown:t,Boolean:r,String:n,Array:a,Dict:i,Nullable:o})=>({tags:[a(t),[]],name:[o(n),null],js_property_callbacks:[i(a(e)),{}],js_event_callbacks:[i(a(e)),{}],subscribed_events:[a(n),[]],syncable:[r,!0]}))}initialize(){super.initialize(),this._js_callbacks=new Map}connect_signals(){super.connect_signals(),this._update_property_callbacks(),this.connect(this.properties.js_property_callbacks.change,()=>this._update_property_callbacks()),this.connect(this.properties.js_event_callbacks.change,()=>this._update_event_callbacks()),this.connect(this.properties.subscribed_events.change,()=>this._update_event_callbacks())}_process_event(t){var r;for(const e of null!==(r=this.js_event_callbacks[t.event_name])&&void 0!==r?r:[])e.execute(t);null!=this.document&&this.subscribed_events.some(e=>e==t.event_name)&&this.document.event_manager.send_event(t)}trigger_event(e){null!=this.document&&(e.origin=this,this.document.event_manager.trigger(e))}_update_event_callbacks(){null!=this.document?this.document.event_manager.subscribed_models.add(this):c.logger.warn("WARNING: Document not defined for updating event callbacks")}_update_property_callbacks(){const a=e=>{const[t,r=null]=e.split(":");return null!=r?this.properties[r][t]:this[t]};for(const[t,r]of this._js_callbacks){const e=a(t);for(const a of r)this.disconnect(e,a)}this._js_callbacks.clear();for(const[r,n]of l.entries(this.js_property_callbacks)){const e=n.map(e=>()=>e.execute(this));this._js_callbacks.set(r,e);const t=a(r);for(const a of e)this.connect(t,a)}}_doc_attached(){l.isEmpty(this.js_event_callbacks)&&0==this.subscribed_events.length||this._update_event_callbacks()}_doc_detached(){this.document.event_manager.subscribed_models.delete(this)}select(t){if(s.isString(t))return[...this.references()].filter(e=>e instanceof u&&e.name===t);if(t.prototype instanceof o.HasProps)return[...this.references()].filter(e=>e instanceof t);throw new Error("invalid selector")}select_one(e){const t=this.select(e);switch(t.length){case 0:return null;case 1:return t[0];default:throw new Error("found more than one object matching given selector")}}}n.Model=u,u.__name__="Model",u.init_Model()},function e(t,r,e,n,a){n();class i{constructor(e,t){this.x_scale=e,this.y_scale=t,this.x_range=this.x_scale.source_range,this.y_range=this.y_scale.source_range,this.ranges=[this.x_range,this.y_range],this.scales=[this.x_scale,this.y_scale]}map_to_screen(e,t){return[this.x_scale.v_compute(e),this.y_scale.v_compute(t)]}map_from_screen(e,t){return[this.x_scale.v_invert(e),this.y_scale.v_invert(t)]}}e.CoordinateTransform=i,i.__name__="CoordinateTransform"},function e(t,r,n,a,i){a();const o=t(1),e=t(56),s=t(133),l=t(48),c=t(20),u=t(24),f=t(122),d=o.__importStar(t(18)),h=t(10);class p extends e.DataAnnotationView{async lazy_initialize(){await super.lazy_initialize();const{start:e,end:t}=this.model;null!=e&&(this.start=await f.build_view(e,{parent:this})),null!=t&&(this.end=await f.build_view(t,{parent:this}))}set_data(e){var t,r;super.set_data(e),null===(t=this.start)||void 0===t||t.set_data(e),null===(r=this.end)||void 0===r||r.set_data(e)}remove(){var e,t;null===(e=this.start)||void 0===e||e.remove(),null===(t=this.end)||void 0===t||t.remove(),super.remove()}map_data(){const{frame:e}=this.plot_view;"data"==this.model.start_units?(this._sx_start=this.coordinates.x_scale.v_compute(this._x_start),this._sy_start=this.coordinates.y_scale.v_compute(this._y_start)):(this._sx_start=e.bbox.xview.v_compute(this._x_start),this._sy_start=e.bbox.yview.v_compute(this._y_start)),"data"==this.model.end_units?(this._sx_end=this.coordinates.x_scale.v_compute(this._x_end),this._sy_end=this.coordinates.y_scale.v_compute(this._y_end)):(this._sx_end=e.bbox.xview.v_compute(this._x_end),this._sy_end=e.bbox.yview.v_compute(this._y_end));const{_sx_start:t,_sy_start:r,_sx_end:n,_sy_end:a}=this,i=t.length,o=this._angles=new u.ScreenArray(i);for(let e=0;e<i;e++)o[e]=Math.PI/2+h.atan2([t[e],r[e]],[n[e],a[e]])}paint(r){const{start:n,end:a}=this,{_sx_start:i,_sy_start:o,_sx_end:s,_sy_end:l,_angles:c}=this,{x:u,y:f,width:d,height:h}=this.plot_view.frame.bbox;for(let e=0,t=i.length;e<t;e++)null!=a&&(r.save(),r.translate(s[e],l[e]),r.rotate(c[e]),a.render(r,e),r.restore()),null!=n&&(r.save(),r.translate(i[e],o[e]),r.rotate(c[e]+Math.PI),n.render(r,e),r.restore()),this.visuals.line.doit&&(r.save(),null==n&&null==a||(r.beginPath(),r.rect(u,f,d,h),null!=a&&(r.save(),r.translate(s[e],l[e]),r.rotate(c[e]),a.clip(r,e),r.restore()),null!=n&&(r.save(),r.translate(i[e],o[e]),r.rotate(c[e]+Math.PI),n.clip(r,e),r.restore()),r.closePath(),r.clip()),this.visuals.line.set_vectorize(r,e),r.beginPath(),r.moveTo(i[e],o[e]),r.lineTo(s[e],l[e]),r.stroke(),r.restore())}}n.ArrowView=p,p.__name__="ArrowView";class v extends e.DataAnnotation{constructor(e){super(e)}static init_Arrow(){this.prototype.default_view=p,this.mixins(l.LineVector),this.define(({Ref:e,Nullable:t})=>({x_start:[d.XCoordinateSpec,{field:"x_start"}],y_start:[d.YCoordinateSpec,{field:"y_start"}],start_units:[c.SpatialUnits,"data"],start:[t(e(s.ArrowHead)),null],x_end:[d.XCoordinateSpec,{field:"x_end"}],y_end:[d.YCoordinateSpec,{field:"y_end"}],end_units:[c.SpatialUnits,"data"],end:[t(e(s.ArrowHead)),()=>new s.OpenHead]}))}}n.Arrow=v,v.__name__="Arrow",v.init_Arrow()},function t(e,r,n,a,i){a();const o=e(1),s=e(40),l=e(57),t=e(130),c=e(65),u=o.__importStar(e(18));class f extends s.AnnotationView{constructor(){super(...arguments),this._initial_set_data=!1}connect_signals(){super.connect_signals();const e=()=>{this.set_data(this.model.source),this.request_render()};this.connect(this.model.change,e),this.connect(this.model.source.streaming,e),this.connect(this.model.source.patching,e),this.connect(this.model.source.change,e)}set_data(r){const n=this;for(const t of this.model)if(t instanceof u.VectorSpec||t instanceof u.ScalarSpec)if(t instanceof u.BaseCoordinateSpec){const e=t.array(r);n[`_${t.attr}`]=e}else{const e=t.uniform(r);n[`${t.attr}`]=e}this.plot_model.use_map&&(null!=n._x&&c.inplace.project_xy(n._x,n._y),null!=n._xs&&c.inplace.project_xsys(n._xs,n._ys));for(const r of this.visuals)r.update()}_render(){this._initial_set_data||(this.set_data(this.model.source),this._initial_set_data=!0),this.map_data(),this.paint(this.layer.ctx)}}n.DataAnnotationView=f,f.__name__="DataAnnotationView";class d extends s.Annotation{constructor(e){super(e)}static init_DataAnnotation(){this.define(({Ref:e})=>({source:[e(l.ColumnarDataSource),()=>new t.ColumnDataSource]}))}}n.DataAnnotation=d,d.__name__="DataAnnotation",d.init_DataAnnotation()},function n(e,t,r,a,i){a();const o=e(58),s=e(15),l=e(19),c=e(60),u=e(8),f=e(9),d=e(13),h=e(59),p=e(129),n=e(29);class v extends o.DataSource{constructor(e){super(e)}get_array(e){let t=this.data[e];return null==t?this.data[e]=t=[]:u.isArray(t)||(this.data[e]=t=Array.from(t)),t}static init_ColumnarDataSource(){this.define(({Ref:e})=>({selection_policy:[e(p.SelectionPolicy),()=>new p.UnionRenderers]})),this.internal(({AnyRef:e})=>({selection_manager:[e(),e=>new c.SelectionManager({source:e})],inspected:[e(),()=>new h.Selection]}))}initialize(){super.initialize(),this._select=new s.Signal0(this,"select"),this.inspect=new s.Signal(this,"inspect"),this.streaming=new s.Signal0(this,"streaming"),this.patching=new s.Signal(this,"patching")}get_column(e){const t=this.data[e];return null!=t?t:null}columns(){return d.keys(this.data)}get_length(t=!0){const r=f.uniq(d.values(this.data).map(e=>n.is_NDArray(e)?e.shape[0]:e.length));switch(r.length){case 0:return null;case 1:return r[0];default:{const e="data source has columns of inconsistent lengths";if(t)return l.logger.warn(e),r.sort()[0];throw new Error(e)}}}get length(){var e;return null!==(e=this.get_length())&&void 0!==e?e:0}clear(){const t={};for(const e of this.columns())t[e]=new this.data[e].constructor(0);this.data=t}}r.ColumnarDataSource=v,v.__name__="ColumnarDataSource",v.init_ColumnarDataSource()},function e(t,r,n,a,i){a();const o=t(53),s=t(59);class l extends o.Model{constructor(e){super(e)}static init_DataSource(){this.define(({Ref:e})=>({selected:[e(s.Selection),()=>new s.Selection]}))}}n.DataSource=l,l.__name__="DataSource",l.init_DataSource()},function e(t,r,n,a,i){a();const o=t(53),s=t(9),l=t(13);class c extends o.Model{constructor(e){super(e)}get_view(){return this.view}static init_Selection(){this.define(({Int:e,Array:t,Dict:r})=>({indices:[t(e),[]],line_indices:[t(e),[]],multiline_indices:[r(t(e)),{}]})),this.internal(({Int:e,Array:t,AnyRef:r,Struct:n,Nullable:a})=>({selected_glyphs:[t(r()),[]],view:[a(r()),null],image_indices:[t(n({index:e,dim1:e,dim2:e,flat_index:e})),[]]}))}get selected_glyph(){return this.selected_glyphs.length>0?this.selected_glyphs[0]:null}add_to_selected_glyphs(e){this.selected_glyphs.push(e)}update(e,t=!0,r="replace"){switch(r){case"replace":this.indices=e.indices,this.line_indices=e.line_indices,this.selected_glyphs=e.selected_glyphs,this.view=e.view,this.multiline_indices=e.multiline_indices,this.image_indices=e.image_indices;break;case"append":this.update_through_union(e);break;case"intersect":this.update_through_intersection(e);break;case"subtract":this.update_through_subtraction(e)}}clear(){this.indices=[],this.line_indices=[],this.multiline_indices={},this.view=null,this.selected_glyphs=[]}is_empty(){return 0==this.indices.length&&0==this.line_indices.length&&0==this.image_indices.length}update_through_union(e){this.indices=s.union(this.indices,e.indices),this.selected_glyphs=s.union(e.selected_glyphs,this.selected_glyphs),this.line_indices=s.union(e.line_indices,this.line_indices),this.view=e.view,this.multiline_indices=l.merge(e.multiline_indices,this.multiline_indices)}update_through_intersection(e){this.indices=s.intersection(this.indices,e.indices),this.selected_glyphs=s.union(e.selected_glyphs,this.selected_glyphs),this.line_indices=s.union(e.line_indices,this.line_indices),this.view=e.view,this.multiline_indices=l.merge(e.multiline_indices,this.multiline_indices)}update_through_subtraction(e){this.indices=s.difference(this.indices,e.indices),this.selected_glyphs=s.union(e.selected_glyphs,this.selected_glyphs),this.line_indices=s.union(e.line_indices,this.line_indices),this.view=e.view,this.multiline_indices=l.merge(e.multiline_indices,this.multiline_indices)}}n.Selection=c,c.__name__="Selection",c.init_Selection()},function e(t,r,n,a,i){a();const o=t(14),s=t(59),l=t(61),c=t(123);class u extends o.HasProps{constructor(e){super(e),this.inspectors=new Map}static init_SelectionManager(){this.internal(({AnyRef:e})=>({source:[e()]}))}select(e,t,r,n="replace"){const a=[],i=[];for(const t of e)t instanceof l.GlyphRendererView?a.push(t):t instanceof c.GraphRendererView&&i.push(t);let o=!1;for(const e of i){const a=e.model.selection_policy.hit_test(t,e);o=o||e.model.selection_policy.do_selection(a,e.model,r,n)}if(a.length>0){const e=this.source.selection_policy.hit_test(t,a);o=o||this.source.selection_policy.do_selection(e,this.source,r,n)}return o}inspect(r,n){let a=!1;if(r instanceof l.GlyphRendererView){const t=r.hit_test(n);if(null!=t){a=!t.is_empty();const e=this.get_or_create_inspector(r.model);e.update(t,!0,"replace"),this.source.setv({inspected:e},{silent:!0}),this.source.inspect.emit([r.model,{geometry:n}])}}else if(r instanceof c.GraphRendererView){const e=r.model.inspection_policy.hit_test(n,r);a=a||r.model.inspection_policy.do_inspection(e,n,r,!1,"replace")}return a}clear(e){this.source.selected.clear(),null!=e&&this.get_or_create_inspector(e.model).clear()}get_or_create_inspector(e){let t=this.inspectors.get(e);return null==t&&(t=new s.Selection,this.inspectors.set(e,t)),t}}n.SelectionManager=u,u.__name__="SelectionManager",u.init_SelectionManager()},function o(e,t,r,n,a){n();const i=e(62),h=e(63),p=e(116),v=e(117),g=e(119),s=e(98),o=e(57),l=e(120),c=e(24),m=e(12),_=e(9),d=e(13),u=e(122),f=e(104),y={fill:{},line:{}},b={fill:{fill_alpha:.3,fill_color:"grey"},line:{line_alpha:.3,line_color:"grey"}},x={fill:{fill_alpha:.2},line:{}};class w extends i.DataRendererView{get glyph_view(){return this.glyph}async lazy_initialize(){var e,t;await super.lazy_initialize();const r=this.model.glyph;this.glyph=await this.build_glyph_view(r);const n="fill"in this.glyph.visuals,a="line"in this.glyph.visuals,i=Object.assign({},r.attributes);function o(e){const t=d.clone(i);return n&&d.extend(t,e.fill),a&&d.extend(t,e.line),new r.constructor(t)}delete i.id;let{selection_glyph:s}=this.model;null==s?s=o({fill:{},line:{}}):"auto"==s&&(s=o(y)),this.selection_glyph=await this.build_glyph_view(s);let{nonselection_glyph:l}=this.model;null==l?l=o({fill:{},line:{}}):"auto"==l&&(l=o(x)),this.nonselection_glyph=await this.build_glyph_view(l);const{hover_glyph:c}=this.model;null!=c&&(this.hover_glyph=await this.build_glyph_view(c));const{muted_glyph:u}=this.model;null!=u&&(this.muted_glyph=await this.build_glyph_view(u));const f=o(b);this.decimated_glyph=await this.build_glyph_view(f),this.selection_glyph.set_base(this.glyph),this.nonselection_glyph.set_base(this.glyph),null===(e=this.hover_glyph)||void 0===e||e.set_base(this.glyph),null===(t=this.muted_glyph)||void 0===t||t.set_base(this.glyph),this.decimated_glyph.set_base(this.glyph),this.set_data()}async build_glyph_view(e){return u.build_view(e,{parent:this})}remove(){var e,t;this.glyph.remove(),this.selection_glyph.remove(),this.nonselection_glyph.remove(),null===(e=this.hover_glyph)||void 0===e||e.remove(),null===(t=this.muted_glyph)||void 0===t||t.remove(),this.decimated_glyph.remove(),super.remove()}connect_signals(){super.connect_signals();const e=()=>this.request_render(),t=()=>this.update_data();this.connect(this.model.change,e),this.connect(this.glyph.model.change,t),this.connect(this.selection_glyph.model.change,t),this.connect(this.nonselection_glyph.model.change,t),null!=this.hover_glyph&&this.connect(this.hover_glyph.model.change,t),null!=this.muted_glyph&&this.connect(this.muted_glyph.model.change,t),this.connect(this.decimated_glyph.model.change,t),this.connect(this.model.data_source.change,t),this.connect(this.model.data_source.streaming,t),this.connect(this.model.data_source.patching,e=>this.update_data(e)),this.connect(this.model.data_source.selected.change,e),this.connect(this.model.data_source._select,e),null!=this.hover_glyph&&this.connect(this.model.data_source.inspect,e),this.connect(this.model.properties.view.change,t),this.connect(this.model.view.properties.indices.change,t),this.connect(this.model.view.properties.masked.change,()=>this.set_visuals()),this.connect(this.model.properties.visible.change,()=>this.plot_view.invalidate_dataranges=!0);const{x_ranges:r,y_ranges:n}=this.plot_view.frame;for(const[,e]of r)e instanceof f.FactorRange&&this.connect(e.change,t);for(const[,e]of n)e instanceof f.FactorRange&&this.connect(e.change,t);const{transformchange:a,exprchange:i}=this.model.glyph;this.connect(a,t),this.connect(i,t)}_update_masked_indices(){const e=this.glyph.mask_data();return this.model.view.masked=e,e}update_data(e){this.set_data(e),this.request_render()}set_data(e){const t=this.model.data_source;this.all_indices=this.model.view.indices;const{all_indices:r}=this;this.glyph.set_data(t,r,e),this.set_visuals(),this._update_masked_indices();const{lod_factor:n}=this.plot_model,a=this.all_indices.count;this.decimated=new c.Indices(a);for(let e=0;e<a;e+=n)this.decimated.set(e);this.plot_view.invalidate_dataranges=!0}set_visuals(){var e,t,r,n;const a=this.model.data_source,{all_indices:i}=this;this.glyph.set_visuals(a,i),this.decimated_glyph.set_visuals(a,i),null===(e=this.selection_glyph)||void 0===e||e.set_visuals(a,i),null===(t=this.nonselection_glyph)||void 0===t||t.set_visuals(a,i),null===(r=this.hover_glyph)||void 0===r||r.set_visuals(a,i),null===(n=this.muted_glyph)||void 0===n||n.set_visuals(a,i)}get has_webgl(){return this.glyph.has_webgl}_render(){const e=this.has_webgl;this.glyph.map_data();const t=[...this.all_indices];let r=[...this._update_masked_indices()];const{ctx:n}=this.layer;n.save();const{selected:a}=this.model.data_source;let i;i=!a||a.is_empty()?[]:this.glyph instanceof h.LineView&&a.selected_glyph===this.glyph.model?this.model.view.convert_indices_from_subset(r):a.indices;const{inspected:o}=this.model.data_source,s=new Set((()=>!o||o.is_empty()?[]:o.selected_glyph?this.model.view.convert_indices_from_subset(r):o.indices.length>0?o.indices:Object.keys(o.multiline_indices).map(e=>parseInt(e)))()),l=m.filter(r,e=>s.has(t[e])),{lod_threshold:c}=this.plot_model;let u,f,d;if(null!=this.model.document&&this.model.document.interactive_duration()>0&&!e&&null!=c&&t.length>c?(r=[...this.decimated],u=this.decimated_glyph,f=this.decimated_glyph,d=this.selection_glyph):(u=this.model.muted&&null!=this.muted_glyph?this.muted_glyph:this.glyph,f=this.nonselection_glyph,d=this.selection_glyph),null!=this.hover_glyph&&l.length&&(r=_.difference(r,l)),i.length){const e={};for(const t of i)e[t]=!0;const a=new Array,p=new Array;if(this.glyph instanceof h.LineView)for(const r of t)null!=e[r]?a.push(r):p.push(r);else for(const n of r)null!=e[t[n]]?a.push(n):p.push(n);f.render(n,p),d.render(n,a),null!=this.hover_glyph&&(this.glyph instanceof h.LineView?this.hover_glyph.render(n,this.model.view.convert_indices_from_subset(l)):this.hover_glyph.render(n,l))}else if(this.glyph instanceof h.LineView)this.hover_glyph&&l.length?this.hover_glyph.render(n,this.model.view.convert_indices_from_subset(l)):u.render(n,t);else if(this.glyph instanceof p.PatchView||this.glyph instanceof v.HAreaView||this.glyph instanceof g.VAreaView)if(0==o.selected_glyphs.length||null==this.hover_glyph)u.render(n,t);else for(const e of o.selected_glyphs)e==this.glyph.model&&this.hover_glyph.render(n,t);else u.render(n,r),this.hover_glyph&&l.length&&this.hover_glyph.render(n,l);n.restore()}draw_legend(e,t,r,n,a,i,o,s){0!=this.glyph.data_size&&(null==s&&(s=this.model.get_reference_point(i,o)),this.glyph.draw_legend_for_index(e,{x0:t,x1:r,y0:n,y1:a},s))}hit_test(e){if(!this.model.visible)return null;const t=this.glyph.hit_test(e);return null==t?null:this.model.view.convert_selection_from_subset(t)}}r.GlyphRendererView=w,w.__name__="GlyphRendererView";class A extends i.DataRenderer{constructor(e){super(e)}static init_GlyphRenderer(){this.prototype.default_view=w,this.define(({Boolean:e,Auto:t,Or:r,Ref:n,Null:a,Nullable:i})=>({data_source:[n(o.ColumnarDataSource)],view:[n(l.CDSView),e=>new l.CDSView({source:e.data_source})],glyph:[n(s.Glyph)],hover_glyph:[i(n(s.Glyph)),null],nonselection_glyph:[r(n(s.Glyph),t,a),"auto"],selection_glyph:[r(n(s.Glyph),t,a),"auto"],muted_glyph:[i(n(s.Glyph)),null],muted:[e,!1]}))}initialize(){super.initialize(),this.view.source!=this.data_source&&(this.view.source=this.data_source,this.view.compute_indices())}get_reference_point(r,n){if(null!=r){const t=this.data_source.get_column(r);if(null!=t)for(const[r,e]of Object.entries(this.view.indices_map))if(t[parseInt(r)]==n)return e}return 0}get_selection_manager(){return this.data_source.selection_manager}}r.GlyphRenderer=A,A.__name__="GlyphRenderer",A.init_GlyphRenderer()},function e(t,r,n,a,i){a();const o=t(41);class s extends o.RendererView{get xscale(){return this.coordinates.x_scale}get yscale(){return this.coordinates.y_scale}}n.DataRendererView=s,s.__name__="DataRendererView";class e extends o.Renderer{constructor(e){super(e)}static init_DataRenderer(){this.override({level:"glyph"})}get selection_manager(){return this.get_selection_manager()}}n.DataRenderer=e,e.__name__="DataRenderer",e.init_DataRenderer()},function e(t,r,n,a,i){a();const o=t(1),e=t(64),s=t(106),l=t(108),c=o.__importStar(t(48)),u=o.__importStar(t(107)),f=t(59);class d extends e.XYGlyphView{initialize(){super.initialize();const{webgl:e}=this.renderer.plot_view.canvas_view;null!=e&&(this.glglyph=new l.LineGL(e.gl,this))}_render(t,r,n){const{sx:a,sy:i}=null!=n?n:this;let o=!0;t.beginPath();for(const n of r){const r=a[n],e=i[n];isFinite(r+e)?o?(t.moveTo(r,e),o=!1):t.lineTo(r,e):o=!0}this.visuals.line.set_value(t),t.stroke()}_hit_point(e){const a=new f.Selection,i={x:e.sx,y:e.sy};let o=9999;const s=Math.max(2,this.line_width.value/2);for(let n=0,e=this.sx.length-1;n<e;n++){const e={x:this.sx[n],y:this.sy[n]},t={x:this.sx[n+1],y:this.sy[n+1]},r=u.dist_to_segment(i,e,t);r<s&&r<o&&(o=r,a.add_to_selected_glyphs(this.model),a.view=this,a.line_indices=[n])}return a}_hit_span(e){const{sx:t,sy:r}=e,n=new f.Selection;let a,i;"v"==e.direction?(a=this.renderer.yscale.invert(r),i=this._y):(a=this.renderer.xscale.invert(t),i=this._x);for(let e=0,t=i.length-1;e<t;e++)(i[e]<=a&&a<=i[e+1]||i[e+1]<=a&&a<=i[e])&&(n.add_to_selected_glyphs(this.model),n.view=this,n.line_indices.push(e));return n}get_interpolation_hit(e,t){const[r,n,a,i]=[this._x[e],this._y[e],this._x[e+1],this._y[e+1]];return s.line_interpolation(this.renderer,t,r,n,a,i)}draw_legend_for_index(e,t,r){s.generic_line_scalar_legend(this.visuals,e,t)}}n.LineView=d,d.__name__="LineView";class h extends e.XYGlyph{constructor(e){super(e)}static init_Line(){this.prototype.default_view=d,this.mixins(c.LineScalar)}}n.Line=h,h.__name__="Line",h.init_Line()},function e(t,r,n,a,e){a();const i=t(1),o=t(65),s=i.__importStar(t(18)),l=t(98);class c extends l.GlyphView{_project_data(){o.inplace.project_xy(this._x,this._y)}_index_data(r){const{_x:n,_y:a,data_size:i}=this;for(let t=0;t<i;t++){const i=n[t],e=a[t];isNaN(i+e)||!isFinite(i+e)?r.add_empty():r.add(i,e,i,e)}}scenterxy(e){return[this.sx[e],this.sy[e]]}}n.XYGlyphView=c,c.__name__="XYGlyphView";class u extends l.Glyph{constructor(e){super(e)}static init_XYGlyph(){this.define(({})=>({x:[s.XCoordinateSpec,{field:"x"}],y:[s.YCoordinateSpec,{field:"y"}]}))}}n.XYGlyph=u,u.__name__="XYGlyph",u.init_XYGlyph()},function i(e,t,c,r,n){r();const a=e(1),o=a.__importDefault(e(66)),s=a.__importDefault(e(67)),l=e(24),u=new s.default("GOOGLE"),f=new s.default("WGS84"),d=o.default(f,u);c.wgs84_mercator={compute:(e,t)=>isFinite(e)&&isFinite(t)?d.forward([e,t]):[NaN,NaN],invert:(e,t)=>isFinite(e)&&isFinite(t)?d.inverse([e,t]):[NaN,NaN]};const i={lon:[-20026376.39,20026376.39],lat:[-20048966.1,20048966.1]},h={lon:[-180,180],lat:[-85.06,85.06]},{min:p,max:v}=Math;function g(e,t){const r=p(e.length,t.length),n=l.infer_type(e,t),a=new n(r),i=new n(r);return c.inplace.project_xy(e,t,a,i),[a,i]}c.clip_mercator=function(e,t,r){const[n,a]=i[r];return[v(e,n),p(t,a)]},c.in_bounds=function(e,t){const[r,n]=h[t];return r<e&&e<n},function(e){function o(a,i,o,s){const l=p(a.length,i.length);o=null!=o?o:a,s=null!=s?s:i;for(let n=0;n<l;n++){const l=a[n],e=i[n],[t,r]=c.wgs84_mercator.compute(l,e);o[n]=t,s[n]=r}}e.project_xy=o,e.project_xsys=function(t,r,n,a){const i=p(t.length,r.length);n=null!=n?n:t,a=null!=a?a:r;for(let e=0;e<i;e++)o(t[e],r[e],n[e],a[e])}}(c.inplace||(c.inplace={})),c.project_xy=g,c.project_xsys=function(r,n){const a=p(r.length,n.length),i=new Array(a),o=new Array(a);for(let t=0;t<a;t++){const[a,e]=g(r[t],n[t]);i[t]=a,o[t]=e}return[i,o]}},function e(t,r,n,a,i){a();const o=t(1),s=o.__importDefault(t(67)),l=o.__importDefault(t(92));var c=s.default("WGS84");function u(t,r,n){var e,a,i;return Array.isArray(n)?(e=l.default(t,r,n)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==r.name&&"geocent"===r.name?"number"==typeof e.z?[e.x,e.y,e.z].concat(n.splice(3)):[e.x,e.y,n[2]].concat(n.splice(3)):[e.x,e.y].concat(n.splice(2)):[e.x,e.y]):(a=l.default(t,r,n),2===(i=Object.keys(n)).length||i.forEach(function(e){if(void 0!==t.name&&"geocent"===t.name||void 0!==r.name&&"geocent"===r.name){if("x"===e||"y"===e||"z"===e)return}else if("x"===e||"y"===e)return;a[e]=n[e]}),a)}function f(e){return e instanceof s.default?e:e.oProj?e.oProj:s.default(e)}n.default=function(t,r,e){t=f(t);var n,a=!1;return void 0===r?(r=t,t=c,a=!0):(void 0!==r.x||Array.isArray(r))&&(e=r,r=t,t=c,a=!0),r=f(r),e?u(t,r,e):(n={forward:function(e){return u(t,r,e)},inverse:function(e){return u(r,t,e)}},a&&(n.oProj=r),n)}},function e(t,r,n,a,i){a();const o=t(1),l=o.__importDefault(t(68)),c=o.__importDefault(t(79)),s=o.__importDefault(t(80)),u=t(88),f=o.__importDefault(t(90)),d=o.__importDefault(t(91)),h=o.__importDefault(t(75));function p(e,t){if(!(this instanceof p))return new p(e);t=t||function(e){if(e)throw e};var r=l.default(e);if("object"==typeof r){var n=p.projections.get(r.projName);if(n){if(r.datumCode&&"none"!==r.datumCode){var a=h.default(f.default,r.datumCode);a&&(r.datum_params=a.towgs84?a.towgs84.split(","):null,r.ellps=a.ellipse,r.datumName=a.datumName?a.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84";var i=u.sphere(r.a,r.b,r.rf,r.ellps,r.sphere),o=u.eccentricity(i.a,i.b,i.rf,r.R_A),s=r.datum||d.default(r.datumCode,r.datum_params,i.a,i.b,o.es,o.ep2);c.default(this,r),c.default(this,n),this.a=i.a,this.b=i.b,this.rf=i.rf,this.sphere=i.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=s,this.init(),t(null,this)}else t(e)}else t(e)}p.projections=s.default,p.projections.start(),n.default=p},function e(t,r,n,a,i){a();const o=t(1),s=o.__importDefault(t(69)),l=o.__importDefault(t(76)),c=o.__importDefault(t(71)),u=o.__importDefault(t(75));var f=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var d=["3857","900913","3785","102113"];n.default=function(e){if(!function(e){return"string"==typeof e}(e))return e;if(function(e){return e in s.default}(e))return s.default[e];if(function(t){return f.some(function(e){return t.indexOf(e)>-1})}(e)){var t=l.default(e);if(function(e){var t=u.default(e,"authority");if(t){var r=u.default(t,"epsg");return r&&d.indexOf(r)>-1}}(t))return s.default["EPSG:3857"];var r=function(e){var t=u.default(e,"extension");if(t)return u.default(t,"proj4")}(t);return r?c.default(r):t}return function(e){return"+"===e[0]}(e)?c.default(e):void 0}},function e(t,r,n,a,i){a();const o=t(1),s=o.__importDefault(t(70)),l=o.__importDefault(t(71)),c=o.__importDefault(t(76));function u(e){var t=this;if(2===arguments.length){var r=arguments[1];"string"==typeof r?"+"===r.charAt(0)?u[e]=l.default(arguments[1]):u[e]=c.default(arguments[1]):u[e]=r}else if(1===arguments.length){if(Array.isArray(e))return e.map(function(e){Array.isArray(e)?u.apply(t,e):u(e)});if("string"==typeof e){if(e in u)return u[e]}else"EPSG"in e?u["EPSG:"+e.EPSG]=e:"ESRI"in e?u["ESRI:"+e.ESRI]=e:"IAU2000"in e?u["IAU2000:"+e.IAU2000]=e:console.log(e);return}}s.default(u),n.default=u},function e(t,r,n,a,i){a(),n.default=function(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}},function e(t,r,n,a,i){a();const o=t(1),s=t(72),l=o.__importDefault(t(73)),c=o.__importDefault(t(74)),u=o.__importDefault(t(75));n.default=function(e){var t,r,n,a={},i=e.split("+").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var r=t.split("=");return r.push(!0),e[r[0].toLowerCase()]=r[1],e},{}),o={proj:"projName",datum:"datumCode",rf:function(e){a.rf=parseFloat(e)},lat_0:function(e){a.lat0=e*s.D2R},lat_1:function(e){a.lat1=e*s.D2R},lat_2:function(e){a.lat2=e*s.D2R},lat_ts:function(e){a.lat_ts=e*s.D2R},lon_0:function(e){a.long0=e*s.D2R},lon_1:function(e){a.long1=e*s.D2R},lon_2:function(e){a.long2=e*s.D2R},alpha:function(e){a.alpha=parseFloat(e)*s.D2R},lonc:function(e){a.longc=e*s.D2R},x_0:function(e){a.x0=parseFloat(e)},y_0:function(e){a.y0=parseFloat(e)},k_0:function(e){a.k0=parseFloat(e)},k:function(e){a.k0=parseFloat(e)},a:function(e){a.a=parseFloat(e)},b:function(e){a.b=parseFloat(e)},r_a:function(){a.R_A=!0},zone:function(e){a.zone=parseInt(e,10)},south:function(){a.utmSouth=!0},towgs84:function(e){a.datum_params=e.split(",").map(function(e){return parseFloat(e)})},to_meter:function(e){a.to_meter=parseFloat(e)},units:function(e){a.units=e;var t=u.default(c.default,e);t&&(a.to_meter=t.to_meter)},from_greenwich:function(e){a.from_greenwich=e*s.D2R},pm:function(e){var t=u.default(l.default,e);a.from_greenwich=(t||parseFloat(e))*s.D2R},nadgrids:function(e){"@null"===e?a.datumCode="none":a.nadgrids=e},axis:function(e){var t="ewnsud";3===e.length&&-1!==t.indexOf(e.substr(0,1))&&-1!==t.indexOf(e.substr(1,1))&&-1!==t.indexOf(e.substr(2,1))&&(a.axis=e)}};for(t in i)r=i[t],t in o?"function"==typeof(n=o[t])?n(r):a[n]=r:a[t]=r;return"string"==typeof a.datumCode&&"WGS84"!==a.datumCode&&(a.datumCode=a.datumCode.toLowerCase()),a}},function e(t,r,e,n,a){n(),e.PJD_3PARAM=1,e.PJD_7PARAM=2,e.PJD_WGS84=4,e.PJD_NODATUM=5,e.SEC_TO_RAD=484813681109536e-20,e.HALF_PI=Math.PI/2,e.SIXTH=.16666666666666666,e.RA4=.04722222222222222,e.RA6=.022156084656084655,e.EPSLN=1e-10,e.D2R=.017453292519943295,e.R2D=57.29577951308232,e.FORTPI=Math.PI/4,e.TWO_PI=2*Math.PI,e.SPI=3.14159265359},function e(t,r,n,a,i){a();var o={};n.default=o,o.greenwich=0,o.lisbon=-9.131906111111,o.paris=2.337229166667,o.bogota=-74.080916666667,o.madrid=-3.687938888889,o.rome=12.452333333333,o.bern=7.439583333333,o.jakarta=106.807719444444,o.ferro=-17.666666666667,o.brussels=4.367975,o.stockholm=18.058277777778,o.athens=23.7163375,o.oslo=10.722916666667},function e(t,r,n,a,i){a(),n.default={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}}},function e(t,r,n,a,i){a();var o=/[\s_\-\/\(\)]/g;n.default=function(e,t){if(e[t])return e[t];for(var r,n=Object.keys(e),a=t.toLowerCase().replace(o,""),i=-1;++i<n.length;)if((r=n[i]).toLowerCase().replace(o,"")===a)return e[r]}},function e(t,r,n,a,i){a();const o=t(1);const s=o.__importDefault(t(77)),l=t(78);function c(e){return.017453292519943295*e}n.default=function(e){var t=s.default(e),r=t.shift(),n=t.shift();t.unshift(["name",n]),t.unshift(["type",r]);var a={};return l.sExpr(t,a),function(i){if("GEOGCS"===i.type?i.projName="longlat":"LOCAL_CS"===i.type?(i.projName="identity",i.local=!0):"object"==typeof i.PROJECTION?i.projName=Object.keys(i.PROJECTION)[0]:i.projName=i.PROJECTION,i.AXIS){for(var e="",t=0,r=i.AXIS.length;t<r;++t){var n=i.AXIS[t][0].toLowerCase();-1!==n.indexOf("north")?e+="n":-1!==n.indexOf("south")?e+="s":-1!==n.indexOf("east")?e+="e":-1!==n.indexOf("west")&&(e+="w")}2===e.length&&(e+="u"),3===e.length&&(i.axis=e)}i.UNIT&&(i.units=i.UNIT.name.toLowerCase(),"metre"===i.units&&(i.units="meter"),i.UNIT.convert&&("GEOGCS"===i.type?i.DATUM&&i.DATUM.SPHEROID&&(i.to_meter=i.UNIT.convert*i.DATUM.SPHEROID.a):i.to_meter=i.UNIT.convert));var a=i.GEOGCS;function o(e){return e*(i.to_meter||1)}"GEOGCS"===i.type&&(a=i),a&&(a.DATUM?i.datumCode=a.DATUM.name.toLowerCase():i.datumCode=a.name.toLowerCase(),"d_"===i.datumCode.slice(0,2)&&(i.datumCode=i.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==i.datumCode&&"new_zealand_1949"!==i.datumCode||(i.datumCode="nzgd49"),"wgs_1984"!==i.datumCode&&"world_geodetic_system_1984"!==i.datumCode||("Mercator_Auxiliary_Sphere"===i.PROJECTION&&(i.sphere=!0),i.datumCode="wgs84"),"_ferro"===i.datumCode.slice(-6)&&(i.datumCode=i.datumCode.slice(0,-6)),"_jakarta"===i.datumCode.slice(-8)&&(i.datumCode=i.datumCode.slice(0,-8)),~i.datumCode.indexOf("belge")&&(i.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(i.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===i.ellps.toLowerCase().slice(0,13)&&(i.ellps="intl"),i.a=a.DATUM.SPHEROID.a,i.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(i.datum_params=a.DATUM.TOWGS84),~i.datumCode.indexOf("osgb_1936")&&(i.datumCode="osgb36"),~i.datumCode.indexOf("osni_1952")&&(i.datumCode="osni52"),(~i.datumCode.indexOf("tm65")||~i.datumCode.indexOf("geodetic_datum_of_1965"))&&(i.datumCode="ire65"),"ch1903+"===i.datumCode&&(i.datumCode="ch1903"),~i.datumCode.indexOf("israel")&&(i.datumCode="isr93")),i.b&&!isFinite(i.b)&&(i.b=i.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",c],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",c],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",c],["lat0","latitude_of_origin",c],["lat0","standard_parallel_1",c],["lat1","standard_parallel_1",c],["lat2","standard_parallel_2",c],["azimuth","Azimuth"],["alpha","azimuth",c],["srsCode","name"]].forEach(function(e){return t=i,n=(r=e)[0],a=r[1],void(!(n in t)&&a in t&&(t[n]=t[a],3===r.length&&(t[n]=r[2](t[n]))));var t,r,n,a}),i.long0||!i.longc||"Albers_Conic_Equal_Area"!==i.projName&&"Lambert_Azimuthal_Equal_Area"!==i.projName||(i.long0=i.longc),i.lat_ts||!i.lat1||"Stereographic_South_Pole"!==i.projName&&"Polar Stereographic (variant B)"!==i.projName||(i.lat0=c(i.lat1>0?90:-90),i.lat_ts=i.lat1)}(a),a}},function e(t,r,n,a,i){a(),n.default=function(e){return new f(e).output()};var o=/\s/,s=/[A-Za-z]/,l=/[A-Za-z84]/,c=/[,\]]/,u=/[\d\.E\-\+]/;function f(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}f.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;o.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case 1:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case-1:return}},f.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=4);if(c.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},f.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},f.prototype.number=function(e){if(!u.test(e)){if(c.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)}this.word+=e},f.prototype.quoted=function(e){'"'!==e?this.word+=e:this.state=5},f.prototype.keyword=function(e){if(l.test(e))this.word+=e;else{if("["===e){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=1)}if(!c.test(e))throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place);this.afterItem(e)}},f.prototype.neutral=function(e){if(s.test(e))return this.word=e,void(this.state=2);if('"'===e)return this.word="",void(this.state=4);if(u.test(e))return this.word=e,void(this.state=3);if(!c.test(e))throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place);this.afterItem(e)},f.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)}},function e(t,r,n,a,i){function o(e,t,r){Array.isArray(t)&&(r.unshift(t),t=null);var n=t?{}:e,a=r.reduce(function(e,t){return s(t,e),e},n);t&&(e[t]=a)}function s(e,t){if(Array.isArray(e)){var r=e.shift();if("PARAMETER"===r&&(r=e.shift()),1===e.length)return Array.isArray(e[0])?(t[r]={},void s(e[0],t[r])):void(t[r]=e[0]);if(e.length)if("TOWGS84"!==r){if("AXIS"===r)return r in t||(t[r]=[]),void t[r].push(e);var n;switch(Array.isArray(r)||(t[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[r]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&s(e[2],t[r]));case"SPHEROID":case"ELLIPSOID":return t[r]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&s(e[3],t[r]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return e[0]=["name",e[0]],void o(t,r,e);default:for(n=-1;++n<e.length;)if(!Array.isArray(e[n]))return s(e,t[r]);return o(t,r,e)}}else t[r]=e;else t[r]=!0}else t[e]=!0}a(),n.sExpr=s},function e(t,r,n,a,i){a(),n.default=function(e,t){var r,n;if(e=e||{},!t)return e;for(n in t)void 0!==(r=t[n])&&(e[n]=r);return e}},function e(t,r,n,a,i){a();const o=t(1),s=o.__importDefault(t(81)),l=o.__importDefault(t(87));var c=[s.default,l.default],u={},f=[];function d(e,t){var r=f.length;return e.names?(f[r]=e,e.names.forEach(function(e){u[e.toLowerCase()]=r}),this):(console.log(t),!0)}function h(e){if(!e)return!1;var t=e.toLowerCase();return void 0!==u[t]&&f[u[t]]?f[u[t]]:void 0}function p(){c.forEach(d)}n.add=d,n.get=h,n.start=p,n.default={start:p,add:d,get:h}},function e(t,r,n,a,i){a();const o=t(1),s=o.__importDefault(t(82)),l=o.__importDefault(t(83)),c=o.__importDefault(t(85)),u=o.__importDefault(t(86)),f=t(72);function d(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=s.default(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function e(e){var t,r,n=e.x,a=e.y;if(a*f.R2D>90&&a*f.R2D<-90&&n*f.R2D>180&&n*f.R2D<-180)return null;if(Math.abs(Math.abs(a)-f.HALF_PI)<=f.EPSLN)return null;if(this.sphere)t=this.x0+this.a*this.k0*l.default(n-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(f.FORTPI+.5*a));else{var i=Math.sin(a),o=c.default(this.e,a,i);t=this.x0+this.a*this.k0*l.default(n-this.long0),r=this.y0-this.a*this.k0*Math.log(o)}return e.x=t,e.y=r,e}function h(e){var t,r,n=e.x-this.x0,a=e.y-this.y0;if(this.sphere)r=f.HALF_PI-2*Math.atan(Math.exp(-a/(this.a*this.k0)));else{var i=Math.exp(-a/(this.a*this.k0));if(-9999===(r=u.default(this.e,i)))return null}return t=l.default(this.long0+n/(this.a*this.k0)),e.x=t,e.y=r,e}n.init=d,n.forward=e,n.inverse=h,n.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],n.default={init:d,forward:e,inverse:h,names:n.names}},function e(t,r,n,a,i){a(),n.default=function(e,t,r){var n=e*t;return r/Math.sqrt(1-n*n)}},function t(e,r,n,a,i){a();const o=e(1),s=e(72),t=o.__importDefault(e(84));n.default=function(e){return Math.abs(e)<=s.SPI?e:e-t.default(e)*s.TWO_PI}},function e(t,r,n,a,i){a(),n.default=function(e){return e<0?-1:1}},function e(t,r,n,a,i){a();const o=t(72);n.default=function(e,t,r){var n=e*r,a=.5*e;return n=Math.pow((1-n)/(1+n),a),Math.tan(.5*(o.HALF_PI-t))/n}},function e(t,r,n,a,i){a();const s=t(72);n.default=function(e,t){for(var r,n,a=.5*e,i=s.HALF_PI-2*Math.atan(t),o=0;o<=15;o++)if(r=e*Math.sin(i),i+=n=s.HALF_PI-2*Math.atan(t*Math.pow((1-r)/(1+r),a))-i,Math.abs(n)<=1e-10)return i;return-9999}},function e(t,r,n,a,i){function o(){}function s(e){return e}a(),n.init=o,n.forward=s,n.inverse=s,n.names=["longlat","identity"],n.default={init:o,forward:s,inverse:s,names:n.names}},function e(t,r,n,a,i){a();const o=t(1),l=t(72),s=o.__importStar(t(89)),c=o.__importDefault(t(75));n.eccentricity=function(e,t,r,n){var a=e*e,i=t*t,o=(a-i)/a,s=0;return n?(a=(e*=1-o*(l.SIXTH+o*(l.RA4+o*l.RA6)))*e,o=0):s=Math.sqrt(o),{es:o,e:s,ep2:(a-i)/i}},n.sphere=function(e,t,r,n,a){if(!e){var i=c.default(s.default,n);i||(i=s.WGS84),e=i.a,t=i.b,r=i.rf}return r&&!t&&(t=(1-1/r)*e),(0===r||Math.abs(e-t)<l.EPSLN)&&(a=!0,t=e),{a:e,b:t,rf:r,sphere:a}}},function e(t,r,n,a,i){a();var o={};n.default=o,o.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},o.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},o.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},o.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},o.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},o.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},o.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},o.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},o.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},o.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},o.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},o.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},o.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},o.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},o.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},o.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},o.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},o.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},o.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},o.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},o.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},o.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},o.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},o.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},o.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},o.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},o.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},o.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},o.hough={a:6378270,rf:297,ellipseName:"Hough"},o.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},o.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},o.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},o.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},o.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},o.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},o.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},o.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},o.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},o.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},o.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},o.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},n.WGS84=o.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},o.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},function e(t,r,n,a,i){a();var o={};n.default=o,o.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},o.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},o.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},o.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},o.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},o.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},o.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},o.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},o.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},o.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},o.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},o.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},o.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},o.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},o.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},o.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},o.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},function e(t,r,e,n,a){n();const s=t(72);e.default=function(e,t,r,n,a,i){var o={};return o.datum_type=void 0===e||"none"===e?s.PJD_NODATUM:s.PJD_WGS84,t&&(o.datum_params=t.map(parseFloat),0===o.datum_params[0]&&0===o.datum_params[1]&&0===o.datum_params[2]||(o.datum_type=s.PJD_3PARAM),o.datum_params.length>3&&(0===o.datum_params[3]&&0===o.datum_params[4]&&0===o.datum_params[5]&&0===o.datum_params[6]||(o.datum_type=s.PJD_7PARAM,o.datum_params[3]*=s.SEC_TO_RAD,o.datum_params[4]*=s.SEC_TO_RAD,o.datum_params[5]*=s.SEC_TO_RAD,o.datum_params[6]=o.datum_params[6]/1e6+1))),o.a=r,o.b=n,o.es=a,o.ep2=i,o}},function i(e,t,r,n,a){n();const o=e(1),i=e(72),s=o.__importDefault(e(93)),l=o.__importDefault(e(95)),c=o.__importDefault(e(67)),u=o.__importDefault(e(96)),f=o.__importDefault(e(97));r.default=function e(t,r,n){var a;if(Array.isArray(n)&&(n=u.default(n)),f.default(n),t.datum&&r.datum&&function(e,t){return(e.datum.datum_type===i.PJD_3PARAM||e.datum.datum_type===i.PJD_7PARAM)&&"WGS84"!==t.datumCode||(t.datum.datum_type===i.PJD_3PARAM||t.datum.datum_type===i.PJD_7PARAM)&&"WGS84"!==e.datumCode}(t,r)&&(n=e(t,a=new c.default("WGS84"),n),t=a),"enu"!==t.axis&&(n=l.default(t,!1,n)),"longlat"===t.projName)n={x:n.x*i.D2R,y:n.y*i.D2R,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;return t.from_greenwich&&(n.x+=t.from_greenwich),n=s.default(t.datum,r.datum,n),r.from_greenwich&&(n={x:n.x-r.from_greenwich,y:n.y,z:n.z||0}),"longlat"===r.projName?n={x:n.x*i.R2D,y:n.y*i.R2D,z:n.z||0}:(n=r.forward(n),r.to_meter&&(n={x:n.x/r.to_meter,y:n.y/r.to_meter,z:n.z||0})),"enu"!==r.axis?l.default(r,!0,n):n}},function n(e,t,r,a,i){a();const o=e(72),s=e(94);function n(e){return e===o.PJD_3PARAM||e===o.PJD_7PARAM}r.default=function(e,t,r){return s.compareDatums(e,t)||e.datum_type===o.PJD_NODATUM||t.datum_type===o.PJD_NODATUM?r:e.es!==t.es||e.a!==t.a||n(e.datum_type)||n(t.datum_type)?(r=s.geodeticToGeocentric(r,e.es,e.a),n(e.datum_type)&&(r=s.geocentricToWgs84(r,e.datum_type,e.datum_params)),n(t.datum_type)&&(r=s.geocentricFromWgs84(r,t.datum_type,t.datum_params)),s.geocentricToGeodetic(r,t.es,t.a,t.b)):r}},function e(t,r,n,a,i){a();const A=t(72);n.compareDatums=function(e,t){return e.datum_type===t.datum_type&&(!(e.a!==t.a||Math.abs(e.es-t.es)>5e-11)&&(e.datum_type===A.PJD_3PARAM?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type!==A.PJD_7PARAM||e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]))},n.geodeticToGeocentric=function(e,t,r){var n,a,i,o,s=e.x,l=e.y,c=e.z?e.z:0;if(l<-A.HALF_PI&&l>-1.001*A.HALF_PI)l=-A.HALF_PI;else if(l>A.HALF_PI&&l<1.001*A.HALF_PI)l=A.HALF_PI;else{if(l<-A.HALF_PI)return{x:-1/0,y:-1/0,z:e.z};if(l>A.HALF_PI)return{x:1/0,y:1/0,z:e.z}}return s>Math.PI&&(s-=2*Math.PI),a=Math.sin(l),o=Math.cos(l),i=a*a,{x:((n=r/Math.sqrt(1-t*i))+c)*o*Math.cos(s),y:(n+c)*o*Math.sin(s),z:(n*(1-t)+c)*a}},n.geocentricToGeodetic=function(e,t,r,n){var a,i,o,s,l,c,u,f,d,h,p,v,g,m,_,y=1e-12,b=e.x,x=e.y,w=e.z?e.z:0;if(a=Math.sqrt(b*b+x*x),i=Math.sqrt(b*b+x*x+w*w),a/r<y){if(m=0,i/r<y)return A.HALF_PI,_=-n,{x:e.x,y:e.y,z:e.z}}else m=Math.atan2(x,b);o=w/i,f=(s=a/i)*(1-t)*(l=1/Math.sqrt(1-t*(2-t)*s*s)),d=o*l,g=0;do{g++,c=t*(u=r/Math.sqrt(1-t*d*d))/(u+(_=a*f+w*d-u*(1-t*d*d))),v=(p=o*(l=1/Math.sqrt(1-c*(2-c)*s*s)))*f-(h=s*(1-c)*l)*d,f=h,d=p}while(v*v>1e-24&&g<30);return{x:m,y:Math.atan(p/Math.abs(h)),z:_}},n.geocentricToWgs84=function(e,t,r){if(t===A.PJD_3PARAM)return{x:e.x+r[0],y:e.y+r[1],z:e.z+r[2]};if(t===A.PJD_7PARAM){var n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],l=r[5],c=r[6];return{x:c*(e.x-l*e.y+s*e.z)+n,y:c*(l*e.x+e.y-o*e.z)+a,z:c*(-s*e.x+o*e.y+e.z)+i}}},n.geocentricFromWgs84=function(e,t,r){if(t===A.PJD_3PARAM)return{x:e.x-r[0],y:e.y-r[1],z:e.z-r[2]};if(t===A.PJD_7PARAM){var n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],l=r[5],c=r[6],u=(e.x-n)/c,f=(e.y-a)/c,d=(e.z-i)/c;return{x:u+l*f-s*d,y:-l*u+f+o*d,z:s*u-o*f+d}}}},function e(t,r,n,a,i){a(),n.default=function(e,t,r){var n,a,i,o=r.x,s=r.y,l=r.z||0,c={};for(i=0;i<3;i++)if(!t||2!==i||void 0!==r.z)switch(0===i?(n=o,a=-1!=="ew".indexOf(e.axis[i])?"x":"y"):1===i?(n=s,a=-1!=="ns".indexOf(e.axis[i])?"y":"x"):(n=l,a="z"),e.axis[i]){case"e":c[a]=n;break;case"w":c[a]=-n;break;case"n":c[a]=n;break;case"s":c[a]=-n;break;case"u":void 0!==r[a]&&(c.z=n);break;case"d":void 0!==r[a]&&(c.z=-n);break;default:return null}return c}},function e(t,r,n,a,i){a(),n.default=function(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}},function e(t,r,n,a,i){function o(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}a(),n.default=function(e){o(e.x),o(e.y)}},function e(t,r,n,a,i){a();const o=t(1),c=o.__importStar(t(18)),s=o.__importStar(t(99)),e=o.__importStar(t(45)),l=t(42),u=t(53),f=t(19),d=t(24),h=t(8),p=t(100),v=t(12),g=t(26),m=t(101),_=t(104),y=t(59),{abs:b,ceil:x}=Math;class w extends l.View{constructor(){super(...arguments),this._index=null,this._data_size=null,this._nohit_warned=new Set}get renderer(){return this.parent}get has_webgl(){return null!=this.glglyph}get index(){const{_index:e}=this;if(null!=e)return e;throw new Error(`${this}.index_data() wasn't called`)}get data_size(){const{_data_size:e}=this;if(null!=e)return e;throw new Error(`${this}.set_data() wasn't called`)}initialize(){super.initialize(),this.visuals=new e.Visuals(this)}request_render(){this.parent.request_render()}get canvas(){return this.renderer.parent.canvas_view}render(e,t,r){var n;null!=this.glglyph&&(this.renderer.needs_webgl_blit=this.glglyph.render(e,t,null!==(n=this.base)&&void 0!==n?n:this),this.renderer.needs_webgl_blit)||(e.beginPath(),this._render(e,t,null!=r?r:this.base))}has_finished(){return!0}notify_finished(){this.renderer.notify_finished()}_bounds(e){return e}bounds(){return this._bounds(this.index.bbox)}log_bounds(){const{x0:e,x1:t}=this.index.bounds(s.positive_x()),{y0:r,y1:n}=this.index.bounds(s.positive_y());return this._bounds({x0:e,y0:r,x1:t,y1:n})}get_anchor_point(t,r,[n,a]){switch(t){case"center":case"center_center":{const[t,e]=this.scenterxy(r,n,a);return{x:t,y:e}}default:return null}}scenterx(e,t,r){return this.scenterxy(e,t,r)[0]}scentery(e,t,r){return this.scenterxy(e,t,r)[1]}sdist(e,r,n,a="edge",i=!1){const o=r.length,s=new d.ScreenArray(o),l=e.s_compute;if("center"==a)for(let t=0;t<o;t++){const a=r[t],i=n.get(t)/2,o=l(a-i),e=l(a+i);s[t]=b(e-o)}else for(let e=0;e<o;e++){const a=r[e],i=l(a),o=l(a+n.get(e));s[e]=b(o-i)}return i&&v.inplace_map(s,e=>x(e)),s}draw_legend_for_index(e,t,r){}hit_test(e){switch(e.type){case"point":if(null!=this._hit_point)return this._hit_point(e);break;case"span":if(null!=this._hit_span)return this._hit_span(e);break;case"rect":if(null!=this._hit_rect)return this._hit_rect(e);break;case"poly":if(null!=this._hit_poly)return this._hit_poly(e)}return this._nohit_warned.has(e.type)||(f.logger.debug(`'${e.type}' selection not available for ${this.model.type}`),this._nohit_warned.add(e.type)),null}_hit_rect_against_index(e){const{sx0:t,sx1:r,sy0:n,sy1:a}=e,[i,o]=this.renderer.coordinates.x_scale.r_invert(t,r),[s,l]=this.renderer.coordinates.y_scale.r_invert(n,a),c=[...this.index.indices({x0:i,x1:o,y0:s,y1:l})];return new y.Selection({indices:c})}_project_data(){}*_iter_visuals(){for(const t of this.visuals)for(const e of t)(e instanceof c.VectorSpec||e instanceof c.ScalarSpec)&&(yield e)}set_base(e){e!=this&&e instanceof this.constructor&&(this.base=e)}_configure(e,t){Object.defineProperty(this,h.isString(e)?e:e.attr,Object.assign({configurable:!0,enumerable:!0},t))}set_visuals(r,n){var a;for(const a of this._iter_visuals()){const{base:e}=this;if(null!=e){const r=e.model.properties[a.attr];if(null!=r&&g.is_equal(a.get_value(),r.get_value())){this._configure(a,{get:()=>e[`${a.attr}`]});continue}}const t=a.uniform(r).select(n);this._configure(a,{value:t})}for(const r of this.visuals)r.update();null===(a=this.glglyph)||void 0===a||a.set_visuals_changed()}set_data(n,a,i){var o;const{x_range:s,y_range:l}=this.renderer.coordinates,e=new Set(this._iter_visuals());this._data_size=a.count;for(const i of this.model)if((i instanceof c.VectorSpec||i instanceof c.ScalarSpec)&&!e.has(i))if(i instanceof c.BaseCoordinateSpec){const o=i.array(n);let t=a.select(o);const r="x"==i.dimension?s:l;if(r instanceof _.FactorRange)if(i instanceof c.CoordinateSpec)t=r.v_synthetic(t);else if(i instanceof c.CoordinateSeqSpec)for(let e=0;e<t.length;e++)t[e]=r.v_synthetic(t[e]);let e;e=i instanceof c.CoordinateSeqSpec?p.RaggedArray.from(t,Float64Array):t,this._configure(`_${i.attr}`,{value:e})}else{const o=i.uniform(n).select(a);if(this._configure(i,{value:o}),i instanceof c.DistanceSpec){const n=o.is_Scalar()?o.value:v.max(o.array);this._configure(`max_${i.attr}`,{value:n})}}this.renderer.plot_view.model.use_map&&this._project_data(),this._set_data(null!=i?i:null),null===(o=this.glglyph)||void 0===o||o.set_data_changed(),this.index_data()}_set_data(e){}get _index_size(){return this.data_size}index_data(){const e=new m.SpatialIndex(this._index_size);this._index_data(e),e.finish(),this._index=e}mask_data(){return null==this._mask_data?d.Indices.all_set(this.data_size):this._mask_data()}map_data(){var r;const n=this,{x_scale:a,y_scale:i}=this.renderer.coordinates;for(const r of this.model)if(r instanceof c.BaseCoordinateSpec){const e="x"==r.dimension?a:i;let t=n[`_${r.attr}`];if(t instanceof p.RaggedArray){const r=e.v_compute(t.array);t=new p.RaggedArray(t.offsets,r)}else t=e.v_compute(t);this[`s${r.attr}`]=t}this._map_data(),null===(r=this.glglyph)||void 0===r||r.set_data_changed()}_map_data(){}}n.GlyphView=w,w.__name__="GlyphView";class A extends u.Model{constructor(e){super(e)}}n.Glyph=A,A.__name__="Glyph"},function e(t,r,n,a,i){a();const o=t(24),s=t(26),{min:l,max:c}=Math;n.empty=function(){return{x0:1/0,y0:1/0,x1:-1/0,y1:-1/0}},n.positive_x=function(){return{x0:Number.MIN_VALUE,y0:-1/0,x1:1/0,y1:1/0}},n.positive_y=function(){return{x0:-1/0,y0:Number.MIN_VALUE,x1:1/0,y1:1/0}},n.union=function(e,t){return{x0:l(e.x0,t.x0),x1:c(e.x1,t.x1),y0:l(e.y0,t.y0),y1:c(e.y1,t.y1)}};class u{constructor(i){if(null==i)this.x0=0,this.y0=0,this.x1=0,this.y1=0;else if("x0"in i){const{x0:e,y0:t,x1:r,y1:n}=i;if(!(e<=r&&t<=n))throw new Error(`invalid bbox {x0: ${e}, y0: ${t}, x1: ${r}, y1: ${n}}`);this.x0=e,this.y0=t,this.x1=r,this.y1=n}else if("x"in i){const{x:e,y:t,width:r,height:n}=i;if(!(r>=0&&n>=0))throw new Error(`invalid bbox {x: ${e}, y: ${t}, width: ${r}, height: ${n}}`);this.x0=e,this.y0=t,this.x1=e+r,this.y1=t+n}else{let t,r,n,a;if("width"in i)if("left"in i)t=i.left,r=t+i.width;else if("right"in i)r=i.right,t=r-i.width;else{const e=i.width/2;t=i.hcenter-e,r=i.hcenter+e}else t=i.left,r=i.right;if("height"in i)if("top"in i)n=i.top,a=n+i.height;else if("bottom"in i)a=i.bottom,n=a-i.height;else{const e=i.height/2;n=i.vcenter-e,a=i.vcenter+e}else n=i.top,a=i.bottom;if(!(t<=r&&n<=a))throw new Error(`invalid bbox {left: ${t}, top: ${n}, right: ${r}, bottom: ${a}}`);this.x0=t,this.y0=n,this.x1=r,this.y1=a}}static from_rect({left:e,right:t,top:r,bottom:n}){return new u({x0:Math.min(e,t),y0:Math.min(r,n),x1:Math.max(e,t),y1:Math.max(r,n)})}equals(e){return this.x0==e.x0&&this.y0==e.y0&&this.x1==e.x1&&this.y1==e.y1}[s.equals](e,t){return t.eq(this.x0,e.x0)&&t.eq(this.y0,e.y0)&&t.eq(this.x1,e.x1)&&t.eq(this.y1,e.y1)}toString(){return`BBox({left: ${this.left}, top: ${this.top}, width: ${this.width}, height: ${this.height}})`}get left(){return this.x0}get top(){return this.y0}get right(){return this.x1}get bottom(){return this.y1}get p0(){return[this.x0,this.y0]}get p1(){return[this.x1,this.y1]}get x(){return this.x0}get y(){return this.y0}get width(){return this.x1-this.x0}get height(){return this.y1-this.y0}get size(){return{width:this.width,height:this.height}}get rect(){const{x0:e,y0:t,x1:r,y1:n}=this;return{p0:{x:e,y:t},p1:{x:r,y:t},p2:{x:r,y:n},p3:{x:e,y:n}}}get box(){const{x:e,y:t,width:r,height:n}=this;return{x:e,y:t,width:r,height:n}}get h_range(){return{start:this.x0,end:this.x1}}get v_range(){return{start:this.y0,end:this.y1}}get ranges(){return[this.h_range,this.v_range]}get aspect(){return this.width/this.height}get hcenter(){return(this.left+this.right)/2}get vcenter(){return(this.top+this.bottom)/2}get area(){return this.width*this.height}relative(){const{width:e,height:t}=this;return new u({x:0,y:0,width:e,height:t})}translate(e,t){const{x:r,y:n,width:a,height:i}=this;return new u({x:e+r,y:t+n,width:a,height:i})}relativize(e,t){return[e-this.x,t-this.y]}contains(e,t){return this.x0<=e&&e<=this.x1&&this.y0<=t&&t<=this.y1}clip(e,t){return e<this.x0?e=this.x0:e>this.x1&&(e=this.x1),t<this.y0?t=this.y0:t>this.y1&&(t=this.y1),[e,t]}grow_by(e){return new u({left:this.left-e,right:this.right+e,top:this.top-e,bottom:this.bottom+e})}shrink_by(e){return new u({left:this.left+e,right:this.right-e,top:this.top+e,bottom:this.bottom-e})}union(e){return new u({x0:l(this.x0,e.x0),y0:l(this.y0,e.y0),x1:c(this.x1,e.x1),y1:c(this.y1,e.y1)})}intersection(e){return this.intersects(e)?new u({x0:c(this.x0,e.x0),y0:c(this.y0,e.y0),x1:l(this.x1,e.x1),y1:l(this.y1,e.y1)}):null}intersects(e){return!(e.x1<this.x0||e.x0>this.x1||e.y1<this.y0||e.y0>this.y1)}get xview(){return{compute:e=>this.left+e,v_compute:t=>{const r=new o.ScreenArray(t.length),n=this.left;for(let e=0;e<t.length;e++)r[e]=n+t[e];return r}}}get yview(){return{compute:e=>this.bottom-e,v_compute:t=>{const r=new o.ScreenArray(t.length),n=this.bottom;for(let e=0;e<t.length;e++)r[e]=n-t[e];return r}}}}n.BBox=u,u.__name__="BBox"},function e(t,r,n,a,i){a();const o=t(26),s=t(11);class l{constructor(e,t){this.offsets=e,this.array=t}[o.equals](e,t){return t.arrays(this.offsets,e.offsets)&&t.arrays(this.array,e.array)}get length(){return this.offsets.length}clone(){return new l(this.offsets.slice(),this.array.slice())}static from(r,e){const n=r.length;let a=0;const t=(()=>{const t=new Uint32Array(n);for(let e=0;e<n;e++){const n=r[e].length;t[e]=a,a+=n}return a<256?new Uint8Array(t):a<65536?new Uint16Array(t):t})(),i=new e(a);for(let e=0;e<n;e++)i.set(r[e],t[e]);return new l(t,i)}*[Symbol.iterator](){const{offsets:t,length:r}=this;for(let e=0;e<r;e++)yield this.array.subarray(t[e],t[e+1])}_check_bounds(e){s.assert(0<=e&&e<this.length,`Out of bounds: 0 <= ${e} < ${this.length}`)}get(e){this._check_bounds(e);const{offsets:t}=this;return this.array.subarray(t[e],t[e+1])}set(e,t){this._check_bounds(e),this.array.set(t,this.offsets[e])}}n.RaggedArray=l,l.__name__="RaggedArray",l[Symbol.toStringTag]="RaggedArray"},function e(t,r,n,a,i){a();const o=t(1).__importDefault(t(102)),l=t(24),s=t(99);function c(t,r){let n=0,a=r.length-1;for(;n<a;){const e=n+a>>1;r[e]>t?a=e:n=e+1}return r[n]}class u extends o.default{search_indices(t,r,n,a){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let i=this._boxes.length-4;const o=[],s=new l.Indices(this.numItems);for(;void 0!==i;){const l=Math.min(i+4*this.nodeSize,c(i,this._levelBounds));for(let e=i;e<l;e+=4){const l=0|this._indices[e>>2];n<this._boxes[e+0]||(a<this._boxes[e+1]||t>this._boxes[e+2]||r>this._boxes[e+3]||(i<4*this.numItems?s.set(l):o.push(l)))}i=o.pop()}return s}}u.__name__="_FlatBush";class f{constructor(e){this.index=null,e>0&&(this.index=new u(e))}add(e,t,r,n){var a;null===(a=this.index)||void 0===a||a.add(e,t,r,n)}add_empty(){var e;null===(e=this.index)||void 0===e||e.add(1/0,1/0,-1/0,-1/0)}finish(){var e;null===(e=this.index)||void 0===e||e.finish()}_normalize(e){let{x0:t,y0:r,x1:n,y1:a}=e;return t>n&&([t,n]=[n,t]),r>a&&([r,a]=[a,r]),{x0:t,y0:r,x1:n,y1:a}}get bbox(){if(null==this.index)return s.empty();{const{minX:e,minY:t,maxX:r,maxY:n}=this.index;return{x0:e,y0:t,x1:r,y1:n}}}indices(a){if(null==this.index)return new l.Indices(0);{const{x0:e,y0:t,x1:r,y1:n}=this._normalize(a);return this.index.search_indices(e,t,r,n)}}bounds(i){const o=s.empty();for(const a of this.indices(i)){const i=this.index._boxes,e=i[4*a+0],t=i[4*a+1],r=i[4*a+2],n=i[4*a+3];r<o.x0&&(o.x0=r),e>o.x1&&(o.x1=e),n<o.y0&&(o.y0=n),t>o.y1&&(o.y1=t)}return o}}n.SpatialIndex=f,f.__name__="SpatialIndex"},function u(e,t,r,n,a){n();const l=e(1).__importDefault(e(103)),c=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class i{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,r]=new Uint8Array(e,0,2);if(251!==t)throw new Error("Data does not appear to be in a Flatbush format.");if(r>>4!=3)throw new Error(`Got v${r>>4} data when expected v3.`);const[n]=new Uint16Array(e,2,1),[a]=new Uint32Array(e,4,1);return new i(a,n,c[15&r],e)}constructor(e,t=16,r=Float64Array,n){if(void 0===e)throw new Error("Missing required argument: numItems.");if(isNaN(e)||e<=0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535);let a=e,i=a;this._levelBounds=[4*a];do{a=Math.ceil(a/this.nodeSize),i+=a,this._levelBounds.push(4*i)}while(1!==a);this.ArrayType=r||Float64Array,this.IndexArrayType=i<16384?Uint16Array:Uint32Array;const o=c.indexOf(this.ArrayType),s=4*i*this.ArrayType.BYTES_PER_ELEMENT;if(o<0)throw new Error(`Unexpected typed array class: ${r}.`);n&&n instanceof ArrayBuffer?(this.data=n,this._boxes=new this.ArrayType(this.data,8,4*i),this._indices=new this.IndexArrayType(this.data,8+s,i),this._pos=4*i,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1]):(this.data=new ArrayBuffer(8+s+i*this.IndexArrayType.BYTES_PER_ELEMENT),this._boxes=new this.ArrayType(this.data,8,4*i),this._indices=new this.IndexArrayType(this.data,8+s,i),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(this.data,0,2).set([251,48+o]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e),this._queue=new l.default}add(e,t,r,n){const a=this._pos>>2;return this._indices[a]=a,this._boxes[this._pos++]=e,this._boxes[this._pos++]=t,this._boxes[this._pos++]=r,this._boxes[this._pos++]=n,e<this.minX&&(this.minX=e),t<this.minY&&(this.minY=t),r>this.maxX&&(this.maxX=r),n>this.maxY&&(this.maxY=n),a}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);if(this.numItems<=this.nodeSize)return this._boxes[this._pos++]=this.minX,this._boxes[this._pos++]=this.minY,this._boxes[this._pos++]=this.maxX,void(this._boxes[this._pos++]=this.maxY);const s=this.maxX-this.minX,l=this.maxY-this.minY,c=new Uint32Array(this.numItems);for(let o=0;o<this.numItems;o++){let e=4*o;const t=this._boxes[e++],r=this._boxes[e++],n=this._boxes[e++],a=this._boxes[e++],i=Math.floor(65535*((t+n)/2-this.minX)/s),d=Math.floor(65535*((r+a)/2-this.minY)/l);c[o]=p(i,d)}d(c,this._boxes,this._indices,0,this.numItems-1,this.nodeSize);for(let e=0,i=0;e<this._levelBounds.length-1;e++){const c=this._levelBounds[e];for(;i<c;){const s=i;let t=1/0,r=1/0,n=-1/0,a=-1/0;for(let e=0;e<this.nodeSize&&i<c;e++)t=Math.min(t,this._boxes[i++]),r=Math.min(r,this._boxes[i++]),n=Math.max(n,this._boxes[i++]),a=Math.max(a,this._boxes[i++]);this._indices[this._pos>>2]=s,this._boxes[this._pos++]=t,this._boxes[this._pos++]=r,this._boxes[this._pos++]=n,this._boxes[this._pos++]=a}}}search(r,n,a,i,o){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let s=this._boxes.length-4;const l=[],c=[];for(;void 0!==s;){const e=Math.min(s+4*this.nodeSize,u(s,this._levelBounds));for(let t=s;t<e;t+=4){const e=0|this._indices[t>>2];a<this._boxes[t]||(i<this._boxes[t+1]||r>this._boxes[t+2]||n>this._boxes[t+3]||(s<4*this.numItems?(void 0===o||o(e))&&c.push(e):l.push(e)))}s=l.pop()}return c}neighbors(t,r,e=1/0,n=1/0,a){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let i=this._boxes.length-4;const o=this._queue,s=[],l=n*n;for(;void 0!==i;){const n=Math.min(i+4*this.nodeSize,u(i,this._levelBounds));for(let e=i;e<n;e+=4){const n=0|this._indices[e>>2],s=f(t,this._boxes[e],this._boxes[e+2]),u=f(r,this._boxes[e+1],this._boxes[e+3]),l=s*s+u*u;i<4*this.numItems?(void 0===a||a(n))&&o.push(-n-1,l):o.push(n,l)}for(;o.length&&o.peek()<0;){if(o.peekValue()>l)return o.clear(),s;if(s.push(-o.pop()-1),s.length===e)return o.clear(),s}i=o.pop()}return o.clear(),s}}function f(e,t,r){return e<t?t-e:e<=r?0:e-r}function u(t,r){let n=0,a=r.length-1;for(;n<a;){const e=n+a>>1;r[e]>t?a=e:n=e+1}return r[n]}function d(e,t,r,n,a,i){if(Math.floor(n/i)>=Math.floor(a/i))return;const o=e[n+a>>1];let s=n-1,l=a+1;for(;;){do{s++}while(e[s]<o);do{l--}while(e[l]>o);if(s>=l)break;h(e,t,r,s,l)}d(e,t,r,n,l,i),d(e,t,r,l+1,a,i)}function h(e,t,r,n,a){const i=e[n];e[n]=e[a],e[a]=i;const o=4*n,s=4*a,l=t[o],c=t[o+1],u=t[o+2],f=t[o+3];t[o]=t[s],t[o+1]=t[s+1],t[o+2]=t[s+2],t[o+3]=t[s+3],t[s]=l,t[s+1]=c,t[s+2]=u,t[s+3]=f;const d=r[n];r[n]=r[a],r[a]=d}function p(e,t){let r=e^t,n=65535^r,a=65535^(e|t),i=e&(65535^t),o=r|n>>1,s=r>>1^r,l=a>>1^n&i>>1^a,c=r&a>>1^i>>1^i;r=o,n=s,a=l,i=c,o=r&r>>2^n&n>>2,s=r&n>>2^n&(r^n)>>2,l^=r&a>>2^n&i>>2,c^=n&a>>2^(r^n)&i>>2,r=o,n=s,a=l,i=c,o=r&r>>4^n&n>>4,s=r&n>>4^n&(r^n)>>4,l^=r&a>>4^n&i>>4,c^=n&a>>4^(r^n)&i>>4,r=o,n=s,a=l,i=c,l^=r&a>>8^n&i>>8,c^=n&a>>8^(r^n)&i>>8,r=l^l>>1,n=c^c>>1;let u=e^t,f=n|65535^(u|r);return u=16711935&(u|u<<8),u=252645135&(u|u<<4),u=858993459&(u|u<<2),u=1431655765&(u|u<<1),f=16711935&(f|f<<8),f=252645135&(f|f<<4),f=858993459&(f|f<<2),f=1431655765&(f|f<<1),(f<<1|u)>>>0}r.default=i},function e(t,r,n,a,i){a();n.default=class{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(t,r){let n=this.length++;for(this.ids[n]=t,this.values[n]=r;n>0;){const t=n-1>>1,e=this.values[t];if(r>=e)break;this.ids[n]=this.ids[t],this.values[n]=e,n=t}this.ids[n]=t,this.values[n]=r}pop(){if(0===this.length)return;const t=this.ids[0];if(this.length--,this.length>0){const t=this.ids[0]=this.ids[this.length],a=this.values[0]=this.values[this.length],e=this.length>>1;let i=0;for(;i<e;){let e=1+(i<<1);const t=e+1;let r=this.ids[e],n=this.values[e];const o=this.values[t];if(t<this.length&&o<n&&(e=t,r=this.ids[t],n=o),n>=a)break;this.ids[i]=r,this.values[i]=n,i=e}this.ids[i]=t,this.values[i]=a}return t}peek(){if(0!==this.length)return this.ids[0]}peekValue(){if(0!==this.length)return this.values[0]}}},function e(t,r,n,a,i){a();const o=t(105),s=t(20),l=t(21),c=t(24),d=t(9),u=t(8),f=t(11);function h(r,n,a=0){const i=new Map;for(let t=0;t<r.length;t++){const e=r[t];if(i.has(e))throw new Error(`duplicate factor or subfactor: ${e}`);i.set(e,{value:.5+t*(1+n)+a})}return[i,(r.length-1)*n]}function p(r,n,a,i=0){var o;const s=new Map,l=new Map;for(const[n,a]of r){const r=null!==(o=l.get(n))&&void 0!==o?o:[];l.set(n,[...r,a])}let c=i,u=0;for(const[r,i]of l){const o=i.length,[l,e]=h(i,a,c);u+=e;const t=d.sum(i.map(e=>l.get(e).value));s.set(r,{value:t/o,mapping:l}),c+=o+n+e}return[s,(l.size-1)*n+u]}function v(r,n,a,i,o=0){var s;const l=new Map,c=new Map;for(const[n,a,i]of r){const r=null!==(s=c.get(n))&&void 0!==s?s:[];c.set(n,[...r,[a,i]])}let u=o,f=0;for(const[r,o]of c){const s=o.length,[c,e]=p(o,a,i,u);f+=e;const t=d.sum(o.map(([e])=>c.get(e).value));l.set(r,{value:t/s,mapping:c}),u+=s+n+e}return[l,(c.size-1)*n+f]}n.Factor=l.Or(l.String,l.Tuple(l.String,l.String),l.Tuple(l.String,l.String,l.String)),n.FactorSeq=l.Or(l.Array(l.String),l.Array(l.Tuple(l.String,l.String)),l.Array(l.Tuple(l.String,l.String,l.String))),n.map_one_level=h,n.map_two_levels=p,n.map_three_levels=v;class e extends o.Range{constructor(e){super(e)}static init_FactorRange(){this.define(({Number:e})=>({factors:[n.FactorSeq,[]],factor_padding:[e,0],subgroup_padding:[e,.8],group_padding:[e,1.4],range_padding:[e,0],range_padding_units:[s.PaddingUnits,"percent"],start:[e],end:[e]})),this.internal(({Number:e,String:t,Array:r,Tuple:n,Nullable:a})=>({levels:[e],mids:[a(r(n(t,t))),null],tops:[a(r(t)),null]}))}get min(){return this.start}get max(){return this.end}initialize(){super.initialize(),this._init(!0)}connect_signals(){super.connect_signals(),this.connect(this.properties.factors.change,()=>this.reset()),this.connect(this.properties.factor_padding.change,()=>this.reset()),this.connect(this.properties.group_padding.change,()=>this.reset()),this.connect(this.properties.subgroup_padding.change,()=>this.reset()),this.connect(this.properties.range_padding.change,()=>this.reset()),this.connect(this.properties.range_padding_units.change,()=>this.reset())}reset(){this._init(!1),this.change.emit()}_lookup(a){switch(a.length){case 1:{const[e]=a,t=this._mapping.get(e);return null!=t?t.value:NaN}case 2:{const[e,t]=a,r=this._mapping.get(e);if(null!=r){const a=r.mapping.get(t);if(null!=a)return a.value}return NaN}case 3:{const[e,t,r]=a,n=this._mapping.get(e);if(null!=n){const a=n.mapping.get(t);if(null!=a){const e=a.mapping.get(r);if(null!=e)return e.value}}return NaN}default:f.unreachable()}}synthetic(e){if(u.isNumber(e))return e;if(u.isString(e))return this._lookup([e]);let t=0;const r=e[e.length-1];return u.isNumber(r)&&(t=r,e=e.slice(0,-1)),this._lookup(e)+t}v_synthetic(t){const r=t.length,n=new c.ScreenArray(r);for(let e=0;e<r;e++)n[e]=this.synthetic(t[e]);return n}_init(e){const{levels:t,mapping:r,tops:n,mids:a,inside_padding:i}=(()=>{if(d.every(this.factors,u.isString)){const e=this.factors,[t,r]=h(e,this.factor_padding);return{levels:1,mapping:t,tops:null,mids:null,inside_padding:r}}if(d.every(this.factors,e=>u.isArray(e)&&2==e.length&&u.isString(e[0])&&u.isString(e[1]))){const e=this.factors,[t,r]=p(e,this.group_padding,this.factor_padding),n=[...t.keys()];return{levels:2,mapping:t,tops:n,mids:null,inside_padding:r}}if(d.every(this.factors,e=>u.isArray(e)&&3==e.length&&u.isString(e[0])&&u.isString(e[1])&&u.isString(e[2]))){const e=this.factors,[n,t]=v(e,this.group_padding,this.subgroup_padding,this.factor_padding),r=[...n.keys()],a=[];for(const[t,r]of n)for(const e of r.mapping.keys())a.push([t,e]);return{levels:3,mapping:n,tops:r,mids:a,inside_padding:t}}f.unreachable()})();this._mapping=r,this.tops=n,this.mids=a;let o=0,s=this.factors.length+i;if("percent"==this.range_padding_units){const e=(s-o)*this.range_padding/2;o-=e,s+=e}else o-=this.range_padding,s+=this.range_padding;this.setv({start:o,end:s,levels:t},{silent:e}),"auto"==this.bounds&&this.setv({bounds:[o,s]},{silent:!0})}}n.FactorRange=e,e.__name__="FactorRange",e.init_FactorRange()},function e(t,r,n,a,i){a();const o=t(53);class s extends o.Model{constructor(e){super(e),this.have_updated_interactively=!1}static init_Range(){this.define(({Number:e,Tuple:t,Or:r,Auto:n,Nullable:a})=>({bounds:[a(r(t(a(e),a(e)),n)),null],min_interval:[a(e),null],max_interval:[a(e),null]})),this.internal(({Array:e,AnyRef:t})=>({plots:[e(t()),[]]}))}get is_reversed(){return this.start>this.end}get is_valid(){return isFinite(this.min)&&isFinite(this.max)}}n.Range=s,s.__name__="Range",s.init_Range()},function e(t,r,n,a,i){a();const p=t(1).__importStar(t(107));function o(e,t,{x0:r,x1:n,y0:a,y1:i},o){t.save(),t.beginPath(),t.moveTo(r,(a+i)/2),t.lineTo(n,(a+i)/2),e.line.doit&&(e.line.set_vectorize(t,o),t.stroke()),t.restore()}function s(e,t,{x0:r,x1:n,y0:a,y1:i},o){var s,l;const c=.1*Math.abs(n-r),u=.1*Math.abs(i-a),f=r+c,d=n-c,h=a+u,p=i-u;t.beginPath(),t.rect(f,h,d-f,p-h),e.fill.doit&&(e.fill.set_vectorize(t,o),t.fill()),(null===(s=e.hatch)||void 0===s?void 0:s.doit)&&(e.hatch.set_vectorize(t,o),t.fill()),(null===(l=e.line)||void 0===l?void 0:l.doit)&&(e.line.set_vectorize(t,o),t.stroke())}n.generic_line_scalar_legend=function(e,t,{x0:r,x1:n,y0:a,y1:i}){t.save(),t.beginPath(),t.moveTo(r,(a+i)/2),t.lineTo(n,(a+i)/2),e.line.doit&&(e.line.set_value(t),t.stroke()),t.restore()},n.generic_line_vector_legend=o,n.generic_line_legend=o,n.generic_area_scalar_legend=function(e,t,{x0:r,x1:n,y0:a,y1:i}){var o,s;const l=.1*Math.abs(n-r),c=.1*Math.abs(i-a),u=r+l,f=n-l,d=a+c,h=i-c;t.beginPath(),t.rect(u,d,f-u,h-d),e.fill.doit&&(e.fill.set_value(t),t.fill()),(null===(o=e.hatch)||void 0===o?void 0:o.doit)&&(e.hatch.set_value(t),t.fill()),(null===(s=e.line)||void 0===s?void 0:s.doit)&&(e.line.set_value(t),t.stroke())},n.generic_area_vector_legend=s,n.generic_area_legend=s,n.line_interpolation=function(e,t,r,n,a,i){const{sx:o,sy:s}=t;let l,c,u,f;"point"==t.type?([u,f]=e.yscale.r_invert(s-1,s+1),[l,c]=e.xscale.r_invert(o-1,o+1)):"v"==t.direction?([u,f]=e.yscale.r_invert(s,s),[l,c]=[Math.min(r-1,a-1),Math.max(r+1,a+1)]):([l,c]=e.xscale.r_invert(o,o),[u,f]=[Math.min(n-1,i-1),Math.max(n+1,i+1)]);const{x:d,y:h}=p.check_2_segments_intersect(l,u,c,f,r,n,a,i);return[d,h]}},function e(t,r,n,a,i){function o(e,t){return(e.x-t.x)**2+(e.y-t.y)**2}function s(e,t,r){const n=o(t,r);if(0==n)return o(e,t);const a=((e.x-t.x)*(r.x-t.x)+(e.y-t.y)*(r.y-t.y))/n;if(a<0)return o(e,t);if(a>1)return o(e,r);return o(e,{x:t.x+a*(r.x-t.x),y:t.y+a*(r.y-t.y)})}a(),n.point_in_poly=function(r,n,a,i){let o=!1,s=a[a.length-1],l=i[i.length-1];for(let t=0;t<a.length;t++){const c=a[t],e=i[t];l<n!=e<n&&s+(n-l)/(e-l)*(c-s)<r&&(o=!o),s=c,l=e}return o},n.point_in_ellipse=function(e,t,r,n,a,i,o){return((Math.cos(r)/a)**2+(Math.sin(r)/n)**2)*(e-i)**2+2*Math.cos(r)*Math.sin(r)*((1/a)**2-(1/n)**2)*(e-i)*(t-o)+((Math.cos(r)/n)**2+(Math.sin(r)/a)**2)*(t-o)**2<=1},n.dist_2_pts=o,n.dist_to_segment_squared=s,n.dist_to_segment=function(e,t,r){return Math.sqrt(s(e,t,r))},n.check_2_segments_intersect=function(r,n,a,i,o,s,l,c){const u=(c-s)*(a-r)-(l-o)*(i-n);if(0==u)return{hit:!1,x:null,y:null};{let e=n-s,t=r-o;const f=(a-r)*e-(i-n)*t;e=((l-o)*e-(c-s)*t)/u,t=f/u;return{hit:e>0&&e<1&&t>0&&t<1,x:r+e*(a-r),y:n+e*(i-n)}}}},function e(t,r,n,a,i){a();const o=t(1),s=t(109),e=t(113),l=o.__importDefault(t(114)),c=o.__importDefault(t(115)),m=t(22),_=t(46);class u{constructor(e){this._atlas=new Map,this._width=256,this._height=256,this.tex=new s.Texture2d(e),this.tex.set_wrapping(e.REPEAT,e.REPEAT),this.tex.set_interpolation(e.NEAREST,e.NEAREST),this.tex.set_size([this._width,this._height],e.RGBA),this.tex.set_data([0,0],[this._width,this._height],new Uint8Array(4*this._width*this._height)),this.get_atlas_data([1])}get_atlas_data(n){const a=n.join("-");let i=this._atlas.get(a);if(null==i){const[e,t]=this.make_pattern(n),r=this._atlas.size;this.tex.set_data([0,r],[this._width,1],new Uint8Array(e.map(e=>e+10))),i=[r/this._height,t],this._atlas.set(a,i)}return i}make_pattern(r){r.length>1&&r.length%2&&(r=r.concat(r));let s=0;for(const l of r)s+=l;const l=[];let n=0;for(let e=0,t=r.length+2;e<t;e+=2){const c=Math.max(1e-4,r[e%r.length]),u=Math.max(1e-4,r[(e+1)%r.length]);l.push(n,n+c),n+=c+u}const c=this._width,u=new Float32Array(4*c);for(let o=0,e=c;o<e;o++){let e,t,r;const n=s*o/(c-1);let a=0,i=1e16;for(let e=0,t=l.length;e<t;e++){const s=Math.abs(l[e]-n);s<i&&(a=e,i=s)}a%2==0?(r=n<=l[a]?1:0,t=l[a],e=l[a+1]):(r=n>l[a]?-1:0,t=l[a-1],e=l[a]),u[4*o+0]=l[a],u[4*o+1]=r,u[4*o+2]=t,u[4*o+3]=e}return[u,s]}}u.__name__="DashAtlas";const y={miter:0,round:1,bevel:2},b={"":0,none:0,".":0,round:1,")":1,"(":1,o:1,"triangle in":2,"<":2,"triangle out":3,">":3,square:4,"[":4,"]":4,"=":4,butt:5,"|":5};class f extends e.BaseGLGlyph{constructor(e,t){super(e,t),this.glyph=t,this._scale_aspect=0;const r=l.default,n=c.default;this.prog=new s.Program(e),this.prog.set_shaders(r,n),this.index_buffer=new s.IndexBuffer(e),this.vbo_position=new s.VertexBuffer(e),this.vbo_tangents=new s.VertexBuffer(e),this.vbo_segment=new s.VertexBuffer(e),this.vbo_angles=new s.VertexBuffer(e),this.vbo_texcoord=new s.VertexBuffer(e),this.dash_atlas=new u(e)}draw(n,a,i){const o=a.glglyph;if(o.data_changed&&(o._set_data(),o.data_changed=!1),this.visuals_changed&&(this._set_visuals(),this.visuals_changed=!1),o._update_scale(1,1),this._scale_aspect=1,this.prog.set_attribute("a_position","vec2",o.vbo_position),this.prog.set_attribute("a_tangents","vec4",o.vbo_tangents),this.prog.set_attribute("a_segment","vec2",o.vbo_segment),this.prog.set_attribute("a_angles","vec2",o.vbo_angles),this.prog.set_attribute("a_texcoord","vec2",o.vbo_texcoord),this.prog.set_uniform("u_length","float",[o.cumsum]),this.prog.set_texture("u_dash_atlas",this.dash_atlas.tex),this.prog.set_uniform("u_pixel_ratio","float",[i.pixel_ratio]),this.prog.set_uniform("u_canvas_size","vec2",[i.width,i.height]),this.prog.set_uniform("u_scale_aspect","vec2",[1,1]),this.prog.set_uniform("u_scale_length","float",[Math.sqrt(2)]),this.I_triangles=o.I_triangles,this.I_triangles.length<65535)this.index_buffer.set_size(2*this.I_triangles.length),this.index_buffer.set_data(0,new Uint16Array(this.I_triangles)),this.prog.draw(this.gl.TRIANGLES,this.index_buffer);else{n=Array.from(this.I_triangles);const a=this.I_triangles.length,i=64008,r=[];for(let e=0,t=Math.ceil(a/i);e<t;e++)r.push([]);for(let e=0,t=n.length;e<t;e++){const o=n[e]%i;r[Math.floor(n[e]/i)].push(o)}for(let t=0,e=r.length;t<e;t++){const a=new Uint16Array(r[t]),e=t*i*4;0!==a.length&&(this.prog.set_attribute("a_position","vec2",o.vbo_position,0,2*e),this.prog.set_attribute("a_tangents","vec4",o.vbo_tangents,0,4*e),this.prog.set_attribute("a_segment","vec2",o.vbo_segment,0,2*e),this.prog.set_attribute("a_angles","vec2",o.vbo_angles,0,2*e),this.prog.set_attribute("a_texcoord","vec2",o.vbo_texcoord,0,2*e),this.index_buffer.set_size(2*a.length),this.index_buffer.set_data(0,a),this.prog.draw(this.gl.TRIANGLES,this.index_buffer))}}}_set_data(){this._bake(),this.vbo_position.set_size(4*this.V_position.length),this.vbo_position.set_data(0,this.V_position),this.vbo_tangents.set_size(4*this.V_tangents.length),this.vbo_tangents.set_data(0,this.V_tangents),this.vbo_angles.set_size(4*this.V_angles.length),this.vbo_angles.set_data(0,this.V_angles),this.vbo_texcoord.set_size(4*this.V_texcoord.length),this.vbo_texcoord.set_data(0,this.V_texcoord)}_set_visuals(){const{line_color:e,line_alpha:t,line_width:r,line_cap:n,line_join:a,line_dash:i,line_dash_offset:o}=this.glyph.visuals.line,[s,l,c,u]=m.color2rgba(e.value,t.value),f=r.value,d=b[n.value],h=y[a.value];this.prog.set_uniform("u_color","vec4",[s/255,l/255,c/255,u/255]),this.prog.set_uniform("u_linewidth","float",[f]),this.prog.set_uniform("u_antialias","float",[.9]),this.prog.set_uniform("u_linecaps","vec2",[d,d]),this.prog.set_uniform("u_linejoin","float",[h]),this.prog.set_uniform("u_miter_limit","float",[10]);const p=_.resolve_line_dash(i.value);let v=0,g=1;p.length&&([v,g]=this.dash_atlas.get_atlas_data(p)),this.prog.set_uniform("u_dash_index","float",[v]),this.prog.set_uniform("u_dash_phase","float",[o.value]),this.prog.set_uniform("u_dash_period","float",[g]),this.prog.set_uniform("u_dash_caps","vec2",[d,d]),this.prog.set_uniform("u_closed","float",[0])}_bake(){let r,n,a,i,o,s,l,c;const u=this.nvertices,f=this.glyph.sx,d=this.glyph.sy,h=l=new Float32Array(2*u),p=new Float32Array(2*u),v=c=new Float32Array(4*u);for(let e=0,t=u;e<t;e++)h[2*e+0]=isFinite(f[e])?f[e]:0,h[2*e+1]=isFinite(d[e])?d[e]:0;this.tangents=n=new Float32Array(2*u-2);for(let e=0,t=u-1;e<t;e++)n[2*e+0]=l[2*(e+1)+0]-l[2*e+0],n[2*e+1]=l[2*(e+1)+1]-l[2*e+1];for(let e=0,t=u-1;e<t;e++)v[4*(e+1)+0]=n[2*e+0],v[4*(e+1)+1]=n[2*e+1],v[4*e+2]=n[2*e+0],v[4*e+3]=n[2*e+1];v[0]=n[0],v[1]=n[1],v[4*(u-1)+2]=n[2*(u-2)+0],v[4*(u-1)+3]=n[2*(u-2)+1];const g=new Float32Array(u);for(let e=0,t=u;e<t;e++)g[e]=Math.atan2(c[4*e+0]*c[4*e+3]-c[4*e+1]*c[4*e+2],c[4*e+0]*c[4*e+2]+c[4*e+1]*c[4*e+3]);for(let e=0,t=u-1;e<t;e++)p[2*e+0]=g[e],p[2*e+1]=g[e+1];for(let e=0,t=u;e<t;e++)isFinite(f[e])||(h[2*e+0]=f[e]),isFinite(d[e])||(h[2*e+1]=d[e]);const e=4*u-4;this.V_position=i=new Float32Array(2*e),this.V_angles=a=new Float32Array(2*e),this.V_tangents=o=new Float32Array(4*e),this.V_texcoord=s=new Float32Array(2*e);for(let r=0,e=u;r<e;r++)for(let t=0;t<4;t++){for(let e=0;e<2;e++)i[2*(4*r+t-2)+e]=h[2*r+e],a[2*(4*r+t)+e]=p[2*r+e];for(let e=0;e<4;e++)o[4*(4*r+t-2)+e]=v[4*r+e]}for(let e=0,t=u;e<t;e++)s[2*(4*e+0)+0]=-1,s[2*(4*e+1)+0]=-1,s[2*(4*e+2)+0]=1,s[2*(4*e+3)+0]=1,s[2*(4*e+0)+1]=-1,s[2*(4*e+1)+1]=1,s[2*(4*e+2)+1]=-1,s[2*(4*e+3)+1]=1;const t=6*(u-1);this.I_triangles=r=new Uint32Array(t);for(let e=0,t=u;e<t;e++)r[6*e+0]=0+4*e,r[6*e+1]=1+4*e,r[6*e+2]=3+4*e,r[6*e+3]=2+4*e,r[6*e+4]=0+4*e,r[6*e+5]=3+4*e}_update_scale(r,n){let a;const i=this.nvertices,e=4*i-4,o=this.tangents,s=new Float32Array(i-1),l=new Float32Array(2*i);this.V_segment=a=new Float32Array(2*e);for(let e=0,t=i-1;e<t;e++)s[e]=Math.sqrt((o[2*e+0]*r)**2+(o[2*e+1]*n)**2);let c=0;for(let e=0,t=i-1;e<t;e++)c+=s[e],l[2*(e+1)+0]=c,l[2*e+1]=c;for(let r=0,e=i;r<e;r++)for(let t=0;t<4;t++)for(let e=0;e<2;e++)a[2*(4*r+t)+e]=l[2*r+e];this.cumsum=c,this.vbo_segment.set_size(4*this.V_segment.length),this.vbo_segment.set_data(0,this.V_segment)}}n.LineGL=f,f.__name__="LineGL"},function e(t,r,n,a,i){a(),i("Program",t(110).Program),i("Texture2d",t(112).Texture2d);var o=t(111);i("IndexBuffer",o.IndexBuffer),i("VertexBuffer",o.VertexBuffer)},function e(t,r,n,a,i){a();const u=t(111);class o{constructor(e){this.gl=e,this.UTYPEMAP={float:"uniform1fv",vec2:"uniform2fv",vec3:"uniform3fv",vec4:"uniform4fv",int:"uniform1iv",ivec2:"uniform2iv",ivec3:"uniform3iv",ivec4:"uniform4iv",bool:"uniform1iv",bvec2:"uniform2iv",bvec3:"uniform3iv",bvec4:"uniform4iv",mat2:"uniformMatrix2fv",mat3:"uniformMatrix3fv",mat4:"uniformMatrix4fv",sampler1D:"uniform1i",sampler2D:"uniform1i",sampler3D:"uniform1i"},this.ATYPEMAP={float:"vertexAttrib1f",vec2:"vertexAttrib2f",vec3:"vertexAttrib3f",vec4:"vertexAttrib4f"},this.ATYPEINFO={float:[1,5126],vec2:[2,5126],vec3:[3,5126],vec4:[4,5126],vec4_uint8:[4,5121]},this._linked=!1,this._validated=!1,this._unset_variables=new Set,this._known_invalid=new Set,this._locations=new Map,this._samplers=new Map,this._attributes=new Map,this.handle=this.gl.createProgram()}delete(){this.gl.deleteProgram(this.handle)}activate(){this.gl.useProgram(this.handle)}deactivate(){this.gl.useProgram(0)}set_shaders(e,t){const r=this.gl;this._linked=!1;const n=r.createShader(r.VERTEX_SHADER),a=r.createShader(r.FRAGMENT_SHADER),i=[[e,n,"vertex"],[t,a,"fragment"]];for(const[e,t,n]of i){r.shaderSource(t,e),r.compileShader(t);if(!r.getShaderParameter(t,r.COMPILE_STATUS)){const e=r.getShaderInfoLog(t);throw new Error(`errors in ${n} shader:\n${e}`)}}if(r.attachShader(this.handle,n),r.attachShader(this.handle,a),r.linkProgram(this.handle),!r.getProgramParameter(this.handle,r.LINK_STATUS)){const e=r.getProgramInfoLog(this.handle);throw new Error(`Program link error:\n${e}`)}this._unset_variables=this._get_active_attributes_and_uniforms(),r.detachShader(this.handle,n),r.detachShader(this.handle,a),r.deleteShader(n),r.deleteShader(a),this._known_invalid.clear(),this._linked=!0}_get_active_attributes_and_uniforms(){const t=this.gl;this._locations.clear();const r=new RegExp("(\\w+)\\s*(\\[(\\d+)\\])\\s*"),n=t.getProgramParameter(this.handle,t.ACTIVE_UNIFORMS),a=[],i=[],e=[[a,t.getProgramParameter(this.handle,t.ACTIVE_ATTRIBUTES),t.getActiveAttrib,t.getAttribLocation],[i,n,t.getActiveUniform,t.getUniformLocation]];for(const[n,a,i,o]of e)for(let e=0;e<a;e+=1){const a=i.call(t,this.handle,e),s=a.name,l=s.match(r);if(null!=l){const t=l[1];for(let e=0;e<a.size;e+=1)n.push([`${t}[${e}]`,a.type])}else n.push([s,a.type]);this._locations.set(s,o.call(t,this.handle,s))}const o=new Set;for(const[t]of a)o.add(t);for(const[t]of i)o.add(t);return o}set_texture(t,r){var e;if(!this._linked)throw new Error("Cannot set uniform when program has no code");const n=null!==(e=this._locations.get(t))&&void 0!==e?e:-1;if(n<0)this._known_invalid.has(t)||(this._known_invalid.add(t),console.log(`"Variable ${t} is not an active texture`));else{this._unset_variables.has(t)&&this._unset_variables.delete(t),this.activate();{let e=this._samplers.size;this._samplers.has(t)&&(e=this._samplers.get(t)[2]),this._samplers.set(t,[r._target,r.handle,e]),this.gl.uniform1i(n,e)}}}set_uniform(t,e,r){var n;if(!this._linked)throw new Error("Cannot set uniform when program has no code");const a=null!==(n=this._locations.get(t))&&void 0!==n?n:-1;if(a<0)return void(this._known_invalid.has(t)||(this._known_invalid.add(t),console.log(`Variable ${t} is not an active uniform`)));this._unset_variables.has(t)&&this._unset_variables.delete(t);let i=1;if(!e.startsWith("mat")){const t="int"==e||"bool"==e?"float":e.replace(/^ib/,"");i=Math.floor(r.length/this.ATYPEINFO[t][0])}if(i>1)for(let e=0;e<i;e+=1)if(this._unset_variables.has(`${t}[${e}]`)){const r=`${t}[${e}]`;this._unset_variables.has(r)&&this._unset_variables.delete(r)}const o=this.UTYPEMAP[e];this.activate(),e.startsWith("mat")?this.gl[o](a,!1,r):this.gl[o](a,r)}set_attribute(t,r,n,a=0,i=0,o=!1){var s;if(!this._linked)throw new Error("Cannot set attribute when program has no code");const l=null!==(s=this._locations.get(t))&&void 0!==s?s:-1;if(l<0)this._known_invalid.has(t)||(this._known_invalid.add(t),n instanceof u.VertexBuffer&&i>0||console.log(`Variable ${t} is not an active attribute`));else if(this._unset_variables.has(t)&&this._unset_variables.delete(t),this.activate(),n instanceof u.VertexBuffer){const[u,s]=this.ATYPEINFO[r],c="vertexAttribPointer",e=[u,s,o,a,i];this._attributes.set(t,[n.handle,l,c,e])}else{const a=this.ATYPEMAP[r];this._attributes.set(t,[null,l,a,n])}}_pre_draw(){this.activate();for(const[e,t,r]of this._samplers.values())this.gl.activeTexture(this.gl.TEXTURE0+r),this.gl.bindTexture(e,t);for(const[e,t,r,n]of this._attributes.values())null!=e?(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.enableVertexAttribArray(t),this.gl[r].apply(this.gl,[t,...n])):(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.disableVertexAttribArray(t),this.gl[r].apply(this.gl,[t,...n]));this._validated||(this._validated=!0,this._validate())}_validate(){if(this._unset_variables.size&&console.log(`Program has unset variables: ${this._unset_variables}`),this.gl.validateProgram(this.handle),!this.gl.getProgramParameter(this.handle,this.gl.VALIDATE_STATUS))throw console.log(this.gl.getProgramInfoLog(this.handle)),new Error("Program validation error")}draw(r,n){if(!this._linked)throw new Error("Cannot draw program if code has not been set");if(n instanceof u.IndexBuffer){this._pre_draw(),n.activate();const e=n.buffer_size/2,t=this.gl.UNSIGNED_SHORT;this.gl.drawElements(r,e,t,0),n.deactivate()}else{const[e,t]=n;0!=t&&(this._pre_draw(),this.gl.drawArrays(r,e,t))}}}n.Program=o,o.__name__="Program"},function e(t,r,n,a,i){a();class o{constructor(e){this.gl=e,this._usage=35048,this.buffer_size=0,this.handle=this.gl.createBuffer()}delete(){this.gl.deleteBuffer(this.handle)}activate(){this.gl.bindBuffer(this._target,this.handle)}deactivate(){this.gl.bindBuffer(this._target,null)}set_size(e){e!=this.buffer_size&&(this.activate(),this.gl.bufferData(this._target,e,this._usage),this.buffer_size=e)}set_data(e,t){this.activate(),this.gl.bufferSubData(this._target,e,t)}}n.Buffer=o,o.__name__="Buffer";class s extends o{constructor(){super(...arguments),this._target=34962}}n.VertexBuffer=s,s.__name__="VertexBuffer";class l extends o{constructor(){super(...arguments),this._target=34963}}n.IndexBuffer=l,l.__name__="IndexBuffer"},function e(t,r,n,a,i){a();const o=t(11);class s{constructor(e){this.gl=e,this._target=3553,this._types={Int8Array:5120,Uint8Array:5121,Int16Array:5122,Uint16Array:5123,Int32Array:5124,Uint32Array:5125,Float32Array:5126},this.handle=this.gl.createTexture()}delete(){this.gl.deleteTexture(this.handle)}activate(){this.gl.bindTexture(this._target,this.handle)}deactivate(){this.gl.bindTexture(this._target,0)}_get_alignment(t){const r=[4,8,2,1];for(const e of r)if(t%e==0)return e;o.unreachable()}set_wrapping(e,t){this.activate(),this.gl.texParameterf(this._target,this.gl.TEXTURE_WRAP_S,e),this.gl.texParameterf(this._target,this.gl.TEXTURE_WRAP_T,t)}set_interpolation(e,t){this.activate(),this.gl.texParameterf(this._target,this.gl.TEXTURE_MIN_FILTER,e),this.gl.texParameterf(this._target,this.gl.TEXTURE_MAG_FILTER,t)}set_size([e,t],r){var n,a,i;e==(null===(n=this._shape_format)||void 0===n?void 0:n.width)&&t==(null===(a=this._shape_format)||void 0===a?void 0:a.height)&&r==(null===(i=this._shape_format)||void 0===i?void 0:i.format)||(this._shape_format={width:e,height:t,format:r},this.activate(),this.gl.texImage2D(this._target,0,r,e,t,0,r,this.gl.UNSIGNED_BYTE,null))}set_data(e,[t,r],n){this.activate();const{format:a}=this._shape_format,[i,o]=e,s=this._types[n.constructor.name];if(null==s)throw new Error(`Type ${n.constructor.name} not allowed for texture`);const l=this._get_alignment(t);4!=l&&this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,l),this.gl.texSubImage2D(this._target,0,i,o,t,r,a,s,n),4!=l&&this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,4)}}n.Texture2d=s,s.__name__="Texture2d"},function e(t,r,n,a,i){a();class o{constructor(e,t){this.gl=e,this.glyph=t,this.nvertices=0,this.size_changed=!1,this.data_changed=!1,this.visuals_changed=!1}set_data_changed(){const{data_size:e}=this.glyph;e!=this.nvertices&&(this.nvertices=e,this.size_changed=!0),this.data_changed=!0}set_visuals_changed(){this.visuals_changed=!0}render(e,t,r){if(0==t.length)return!0;const{width:n,height:a}=this.glyph.renderer.plot_view.canvas_view.webgl.canvas,i={pixel_ratio:this.glyph.renderer.plot_view.canvas_view.pixel_ratio,width:n,height:a};return this.draw(t,r,i),!0}}n.BaseGLGlyph=o,o.__name__="BaseGLGlyph"},function e(t,r,n,a,i){a();n.default="\nprecision mediump float;\n\nconst float PI = 3.14159265358979323846264;\nconst float THETA = 15.0 * 3.14159265358979323846264/180.0;\n\nuniform float u_pixel_ratio;\nuniform vec2 u_canvas_size, u_offset;\nuniform vec2 u_scale_aspect;\nuniform float u_scale_length;\n\nuniform vec4 u_color;\nuniform float u_antialias;\nuniform float u_length;\nuniform float u_linewidth;\nuniform float u_dash_index;\nuniform float u_closed;\n\nattribute vec2 a_position;\nattribute vec4 a_tangents;\nattribute vec2 a_segment;\nattribute vec2 a_angles;\nattribute vec2 a_texcoord;\n\nvarying vec4  v_color;\nvarying vec2  v_segment;\nvarying vec2  v_angles;\nvarying vec2  v_texcoord;\nvarying vec2  v_miter;\nvarying float v_length;\nvarying float v_linewidth;\n\nfloat cross(in vec2 v1, in vec2 v2)\n{\n    return v1.x*v2.y - v1.y*v2.x;\n}\n\nfloat signed_distance(in vec2 v1, in vec2 v2, in vec2 v3)\n{\n    return cross(v2-v1,v1-v3) / length(v2-v1);\n}\n\nvoid rotate( in vec2 v, in float alpha, out vec2 result )\n{\n    float c = cos(alpha);\n    float s = sin(alpha);\n    result = vec2( c*v.x - s*v.y,\n                   s*v.x + c*v.y );\n}\n\nvoid main()\n{\n    bool closed = (u_closed > 0.0);\n\n    // Attributes and uniforms to varyings\n    v_color = u_color;\n    v_linewidth = u_linewidth;\n    v_segment = a_segment * u_scale_length;\n    v_length = u_length * u_scale_length;\n\n    // Scale to map to pixel coordinates. The original algorithm from the paper\n    // assumed isotropic scale. We obviously do not have this.\n    vec2 abs_scale_aspect = abs(u_scale_aspect);\n    vec2 abs_scale = u_scale_length * abs_scale_aspect;\n\n    // Correct angles for aspect ratio\n    vec2 av;\n    av = vec2(1.0, tan(a_angles.x)) / abs_scale_aspect;\n    v_angles.x = atan(av.y, av.x);\n    av = vec2(1.0, tan(a_angles.y)) / abs_scale_aspect;\n    v_angles.y = atan(av.y, av.x);\n\n    // Thickness below 1 pixel are represented using a 1 pixel thickness\n    // and a modified alpha\n    v_color.a = min(v_linewidth, v_color.a);\n    v_linewidth = max(v_linewidth, 1.0);\n\n    // If color is fully transparent we just will discard the fragment anyway\n    if( v_color.a <= 0.0 ) {\n        gl_Position = vec4(0.0,0.0,0.0,1.0);\n        return;\n    }\n\n    // This is the actual half width of the line\n    float w = ceil(u_antialias+v_linewidth)/2.0;\n\n    vec2 position = a_position;\n\n    vec2 t1 = normalize(a_tangents.xy * abs_scale_aspect);  // note the scaling for aspect ratio here\n    vec2 t2 = normalize(a_tangents.zw * abs_scale_aspect);\n    float u = a_texcoord.x;\n    float v = a_texcoord.y;\n    vec2 o1 = vec2( +t1.y, -t1.x);\n    vec2 o2 = vec2( +t2.y, -t2.x);\n\n    // This is a join\n    // ----------------------------------------------------------------\n    if( t1 != t2 ) {\n        float angle = atan (t1.x*t2.y-t1.y*t2.x, t1.x*t2.x+t1.y*t2.y);  // Angle needs recalculation for some reason\n        vec2 t  = normalize(t1+t2);\n        vec2 o  = vec2( + t.y, - t.x);\n\n        if ( u_dash_index > 0.0 )\n        {\n            // Broken angle\n            // ----------------------------------------------------------------\n            if( (abs(angle) > THETA) ) {\n                position += v * w * o / cos(angle/2.0);\n                float s = sign(angle);\n                if( angle < 0.0 ) {\n                    if( u == +1.0 ) {\n                        u = v_segment.y + v * w * tan(angle/2.0);\n                        if( v == 1.0 ) {\n                            position -= 2.0 * w * t1 / sin(angle);\n                            u -= 2.0 * w / sin(angle);\n                        }\n                    } else {\n                        u = v_segment.x - v * w * tan(angle/2.0);\n                        if( v == 1.0 ) {\n                            position += 2.0 * w * t2 / sin(angle);\n                            u += 2.0*w / sin(angle);\n                        }\n                    }\n                } else {\n                    if( u == +1.0 ) {\n                        u = v_segment.y + v * w * tan(angle/2.0);\n                        if( v == -1.0 ) {\n                            position += 2.0 * w * t1 / sin(angle);\n                            u += 2.0 * w / sin(angle);\n                        }\n                    } else {\n                        u = v_segment.x - v * w * tan(angle/2.0);\n                        if( v == -1.0 ) {\n                            position -= 2.0 * w * t2 / sin(angle);\n                            u -= 2.0*w / sin(angle);\n                        }\n                    }\n                }\n                // Continuous angle\n                // ------------------------------------------------------------\n            } else {\n                position += v * w * o / cos(angle/2.0);\n                if( u == +1.0 ) u = v_segment.y;\n                else            u = v_segment.x;\n            }\n        }\n\n        // Solid line\n        // --------------------------------------------------------------------\n        else\n        {\n            position.xy += v * w * o / cos(angle/2.0);\n            if( angle < 0.0 ) {\n                if( u == +1.0 ) {\n                    u = v_segment.y + v * w * tan(angle/2.0);\n                } else {\n                    u = v_segment.x - v * w * tan(angle/2.0);\n                }\n            } else {\n                if( u == +1.0 ) {\n                    u = v_segment.y + v * w * tan(angle/2.0);\n                } else {\n                    u = v_segment.x - v * w * tan(angle/2.0);\n                }\n            }\n        }\n\n    // This is a line start or end (t1 == t2)\n    // ------------------------------------------------------------------------\n    } else {\n        position += v * w * o1;\n        if( u == -1.0 ) {\n            u = v_segment.x - w;\n            position -= w * t1;\n        } else {\n            u = v_segment.y + w;\n            position += w * t2;\n        }\n    }\n\n    // Miter distance\n    // ------------------------------------------------------------------------\n    vec2 t;\n    vec2 curr = a_position * abs_scale;\n    if( a_texcoord.x < 0.0 ) {\n        vec2 next = curr + t2*(v_segment.y-v_segment.x);\n\n        rotate( t1, +v_angles.x/2.0, t);\n        v_miter.x = signed_distance(curr, curr+t, position);\n\n        rotate( t2, +v_angles.y/2.0, t);\n        v_miter.y = signed_distance(next, next+t, position);\n    } else {\n        vec2 prev = curr - t1*(v_segment.y-v_segment.x);\n\n        rotate( t1, -v_angles.x/2.0,t);\n        v_miter.x = signed_distance(prev, prev+t, position);\n\n        rotate( t2, -v_angles.y/2.0,t);\n        v_miter.y = signed_distance(curr, curr+t, position);\n    }\n\n    if (!closed && v_segment.x <= 0.0) {\n        v_miter.x = 1e10;\n    }\n    if (!closed && v_segment.y >= v_length)\n    {\n        v_miter.y = 1e10;\n    }\n\n    v_texcoord = vec2( u, v*w );\n\n    // Calculate position in device coordinates. Note that we\n    // already scaled with abs scale above.\n    vec2 normpos = position * sign(u_scale_aspect);\n    normpos += 0.5;  // make up for Bokeh's offset\n    normpos /= u_canvas_size / u_pixel_ratio;  // in 0..1\n    gl_Position = vec4(normpos*2.0-1.0, 0.0, 1.0);\n    gl_Position.y *= -1.0;\n}\n"},function e(t,r,n,a,i){a();n.default="\nprecision mediump float;\n\nconst float PI = 3.14159265358979323846264;\nconst float THETA = 15.0 * 3.14159265358979323846264/180.0;\n\nuniform sampler2D u_dash_atlas;\n\nuniform vec2 u_linecaps;\nuniform float u_miter_limit;\nuniform float u_linejoin;\nuniform float u_antialias;\nuniform float u_dash_phase;\nuniform float u_dash_period;\nuniform float u_dash_index;\nuniform vec2 u_dash_caps;\nuniform float u_closed;\n\nvarying vec4  v_color;\nvarying vec2  v_segment;\nvarying vec2  v_angles;\nvarying vec2  v_texcoord;\nvarying vec2  v_miter;\nvarying float v_length;\nvarying float v_linewidth;\n\n// Compute distance to cap ----------------------------------------------------\nfloat cap( int type, float dx, float dy, float t, float linewidth )\n{\n    float d = 0.0;\n    dx = abs(dx);\n    dy = abs(dy);\n    if      (type == 0)  discard;  // None\n    else if (type == 1)  d = sqrt(dx*dx+dy*dy);  // Round\n    else if (type == 3)  d = (dx+abs(dy));  // Triangle in\n    else if (type == 2)  d = max(abs(dy),(t+dx-abs(dy)));  // Triangle out\n    else if (type == 4)  d = max(dx,dy);  // Square\n    else if (type == 5)  d = max(dx+t,dy);  // Butt\n    return d;\n}\n\n// Compute distance to join -------------------------------------------------\nfloat join( in int type, in float d, in vec2 segment, in vec2 texcoord, in vec2 miter,\n           in float linewidth )\n{\n    // texcoord.x is distance from start\n    // texcoord.y is distance from centerline\n    // segment.x and y indicate the limits (as for texcoord.x) for this segment\n\n    float dx = texcoord.x;\n\n    // Round join\n    if( type == 1 ) {\n        if (dx < segment.x) {\n            d = max(d,length( texcoord - vec2(segment.x,0.0)));\n            //d = length( texcoord - vec2(segment.x,0.0));\n        } else if (dx > segment.y) {\n            d = max(d,length( texcoord - vec2(segment.y,0.0)));\n            //d = length( texcoord - vec2(segment.y,0.0));\n        }\n    }\n    // Bevel join\n    else if ( type == 2 ) {\n        if (dx < segment.x) {\n            vec2 x = texcoord - vec2(segment.x,0.0);\n            d = max(d, max(abs(x.x), abs(x.y)));\n\n        } else if (dx > segment.y) {\n            vec2 x = texcoord - vec2(segment.y,0.0);\n            d = max(d, max(abs(x.x), abs(x.y)));\n        }\n        /*  Original code for bevel which does not work for us\n        if( (dx < segment.x) ||  (dx > segment.y) )\n            d = max(d, min(abs(x.x),abs(x.y)));\n        */\n    }\n\n    return d;\n}\n\nvoid main()\n{\n    // If color is fully transparent we just discard the fragment\n    if( v_color.a <= 0.0 ) {\n        discard;\n    }\n\n    // Test if dash pattern is the solid one (0)\n    bool solid =  (u_dash_index == 0.0);\n\n    // Test if path is closed\n    bool closed = (u_closed > 0.0);\n\n    vec4 color = v_color;\n    float dx = v_texcoord.x;\n    float dy = v_texcoord.y;\n    float t = v_linewidth/2.0-u_antialias;\n    float width = 1.0;  //v_linewidth; original code had dashes scale with line width, we do not\n    float d = 0.0;\n\n    vec2 linecaps = u_linecaps;\n    vec2 dash_caps = u_dash_caps;\n    float line_start = 0.0;\n    float line_stop = v_length;\n\n    // Apply miter limit; fragments too far into the miter are simply discarded\n    if( (dx < v_segment.x) || (dx > v_segment.y) ) {\n        float into_miter = max(v_segment.x - dx, dx - v_segment.y);\n        if (into_miter > u_miter_limit*v_linewidth/2.0)\n          discard;\n    }\n\n    // Solid line --------------------------------------------------------------\n    if( solid ) {\n        d = abs(dy);\n        if( (!closed) && (dx < line_start) ) {\n            d = cap( int(u_linecaps.x), abs(dx), abs(dy), t, v_linewidth );\n        }\n        else if( (!closed) &&  (dx > line_stop) ) {\n            d = cap( int(u_linecaps.y), abs(dx)-line_stop, abs(dy), t, v_linewidth );\n        }\n        else {\n            d = join( int(u_linejoin), abs(dy), v_segment, v_texcoord, v_miter, v_linewidth );\n        }\n\n    // Dash line --------------------------------------------------------------\n    } else {\n        float segment_start = v_segment.x;\n        float segment_stop  = v_segment.y;\n        float segment_center= (segment_start+segment_stop)/2.0;\n        float freq          = u_dash_period*width;\n        float u = mod( dx + u_dash_phase*width, freq);\n        vec4 tex = texture2D(u_dash_atlas, vec2(u/freq, u_dash_index)) * 255.0 -10.0;  // conversion to int-like\n        float dash_center= tex.x * width;\n        float dash_type  = tex.y;\n        float _start = tex.z * width;\n        float _stop  = tex.a * width;\n        float dash_start = dx - u + _start;\n        float dash_stop  = dx - u + _stop;\n\n        // Compute extents of the first dash (the one relative to v_segment.x)\n        // Note: this could be computed in the vertex shader\n        if( (dash_stop < segment_start) && (dash_caps.x != 5.0) ) {\n            float u = mod(segment_start + u_dash_phase*width, freq);\n            vec4 tex = texture2D(u_dash_atlas, vec2(u/freq, u_dash_index)) * 255.0 -10.0;  // conversion to int-like\n            dash_center= tex.x * width;\n            //dash_type  = tex.y;\n            float _start = tex.z * width;\n            float _stop  = tex.a * width;\n            dash_start = segment_start - u + _start;\n            dash_stop = segment_start - u + _stop;\n        }\n\n        // Compute extents of the last dash (the one relatives to v_segment.y)\n        // Note: This could be computed in the vertex shader\n        else if( (dash_start > segment_stop)  && (dash_caps.y != 5.0) ) {\n            float u = mod(segment_stop + u_dash_phase*width, freq);\n            vec4 tex = texture2D(u_dash_atlas, vec2(u/freq, u_dash_index)) * 255.0 -10.0;  // conversion to int-like\n            dash_center= tex.x * width;\n            //dash_type  = tex.y;\n            float _start = tex.z * width;\n            float _stop  = tex.a * width;\n            dash_start = segment_stop - u + _start;\n            dash_stop  = segment_stop - u + _stop;\n        }\n\n        // This test if the we are dealing with a discontinuous angle\n        bool discontinuous = ((dx <  segment_center) && abs(v_angles.x) > THETA) ||\n                             ((dx >= segment_center) && abs(v_angles.y) > THETA);\n        //if( dx < line_start) discontinuous = false;\n        //if( dx > line_stop)  discontinuous = false;\n\n        float d_join = join( int(u_linejoin), abs(dy),\n                            v_segment, v_texcoord, v_miter, v_linewidth );\n\n        // When path is closed, we do not have room for linecaps, so we make room\n        // by shortening the total length\n        if (closed) {\n             line_start += v_linewidth/2.0;\n             line_stop  -= v_linewidth/2.0;\n        }\n\n        // We also need to take antialias area into account\n        //line_start += u_antialias;\n        //line_stop  -= u_antialias;\n\n        // Check is dash stop is before line start\n        if( dash_stop <= line_start ) {\n            discard;\n        }\n        // Check is dash start is beyond line stop\n        if( dash_start >= line_stop ) {\n            discard;\n        }\n\n        // Check if current dash start is beyond segment stop\n        if( discontinuous ) {\n            // Dash start is beyond segment, we discard\n            if( (dash_start > segment_stop) ) {\n                discard;\n                //gl_FragColor = vec4(1.0,0.0,0.0,.25); return;\n            }\n\n            // Dash stop is before segment, we discard\n            if( (dash_stop < segment_start) ) {\n                discard;  //gl_FragColor = vec4(0.0,1.0,0.0,.25); return;\n            }\n\n            // Special case for round caps (nicer with this)\n            if( dash_caps.x == 1.0 ) {\n                if( (u > _stop) && (dash_stop > segment_stop )  && (abs(v_angles.y) < PI/2.0)) {\n                    discard;\n                }\n            }\n\n            // Special case for round caps  (nicer with this)\n            if( dash_caps.y == 1.0 ) {\n                if( (u < _start) && (dash_start < segment_start )  && (abs(v_angles.x) < PI/2.0)) {\n                    discard;\n                }\n            }\n\n            // Special case for triangle caps (in & out) and square\n            // We make sure the cap stop at crossing frontier\n            if( (dash_caps.x != 1.0) && (dash_caps.x != 5.0) ) {\n                if( (dash_start < segment_start )  && (abs(v_angles.x) < PI/2.0) ) {\n                    float a = v_angles.x/2.0;\n                    float x = (segment_start-dx)*cos(a) - dy*sin(a);\n                    float y = (segment_start-dx)*sin(a) + dy*cos(a);\n                    if( x > 0.0 ) discard;\n                    // We transform the cap into square to avoid holes\n                    dash_caps.x = 4.0;\n                }\n            }\n\n            // Special case for triangle caps (in & out) and square\n            // We make sure the cap stop at crossing frontier\n            if( (dash_caps.y != 1.0) && (dash_caps.y != 5.0) ) {\n                if( (dash_stop > segment_stop )  && (abs(v_angles.y) < PI/2.0) ) {\n                    float a = v_angles.y/2.0;\n                    float x = (dx-segment_stop)*cos(a) - dy*sin(a);\n                    float y = (dx-segment_stop)*sin(a) + dy*cos(a);\n                    if( x > 0.0 ) discard;\n                    // We transform the caps into square to avoid holes\n                    dash_caps.y = 4.0;\n                }\n            }\n        }\n\n        // Line cap at start\n        if( (dx < line_start) && (dash_start < line_start) && (dash_stop > line_start) ) {\n            d = cap( int(linecaps.x), dx-line_start, dy, t, v_linewidth);\n        }\n        // Line cap at stop\n        else if( (dx > line_stop) && (dash_stop > line_stop) && (dash_start < line_stop) ) {\n            d = cap( int(linecaps.y), dx-line_stop, dy, t, v_linewidth);\n        }\n        // Dash cap left - dash_type = -1, 0 or 1, but there may be roundoff errors\n        else if( dash_type < -0.5 ) {\n            d = cap( int(dash_caps.y), abs(u-dash_center), dy, t, v_linewidth);\n            if( (dx > line_start) && (dx < line_stop) )\n                d = max(d,d_join);\n        }\n        // Dash cap right\n        else if( dash_type > 0.5 ) {\n            d = cap( int(dash_caps.x), abs(dash_center-u), dy, t, v_linewidth);\n            if( (dx > line_start) && (dx < line_stop) )\n                d = max(d,d_join);\n        }\n        // Dash body (plain)\n        else {// if( dash_type > -0.5 &&  dash_type < 0.5) {\n            d = abs(dy);\n        }\n\n        // Line join\n        if( (dx > line_start) && (dx < line_stop)) {\n            if( (dx <= segment_start) && (dash_start <= segment_start)\n                && (dash_stop >= segment_start) ) {\n                d = d_join;\n                // Antialias at outer border\n                float angle = PI/2.+v_angles.x;\n                float f = abs( (segment_start - dx)*cos(angle) - dy*sin(angle));\n                d = max(f,d);\n            }\n            else if( (dx > segment_stop) && (dash_start <= segment_stop)\n                     && (dash_stop >= segment_stop) ) {\n                d = d_join;\n                // Antialias at outer border\n                float angle = PI/2.+v_angles.y;\n                float f = abs((dx - segment_stop)*cos(angle) - dy*sin(angle));\n                d = max(f,d);\n            }\n            else if( dx < (segment_start - v_linewidth/2.)) {\n                discard;\n            }\n            else if( dx > (segment_stop + v_linewidth/2.)) {\n                discard;\n            }\n        }\n        else if( dx < (segment_start - v_linewidth/2.)) {\n            discard;\n        }\n        else if( dx > (segment_stop + v_linewidth/2.)) {\n            discard;\n        }\n    }\n\n    // Distance to border ------------------------------------------------------\n    d = d - t;\n    if( d < 0.0 ) {\n        gl_FragColor = color;\n    } else {\n        d /= u_antialias;\n        gl_FragColor = vec4(color.rgb, exp(-d*d)*color.a);\n    }\n}\n"},function n(e,t,r,a,i){a();const o=e(1),s=e(64),n=e(106),l=o.__importStar(e(107)),c=o.__importStar(e(48)),u=e(59);class f extends s.XYGlyphView{_inner_loop(r,n,a,i,o){for(const t of n){const n=a[t],e=i[t];0!=t?isNaN(n+e)?(r.closePath(),o.apply(r),r.beginPath()):r.lineTo(n,e):(r.beginPath(),r.moveTo(n,e))}r.closePath(),o.call(r)}_render(e,t,r){const{sx:n,sy:a}=null!=r?r:this;this.visuals.fill.doit&&(this.visuals.fill.set_value(e),this._inner_loop(e,t,n,a,e.fill)),this.visuals.hatch.doit&&(this.visuals.hatch.set_value(e),this._inner_loop(e,t,n,a,e.fill)),this.visuals.line.doit&&(this.visuals.line.set_value(e),this._inner_loop(e,t,n,a,e.stroke))}draw_legend_for_index(e,t,r){n.generic_area_scalar_legend(this.visuals,e,t)}_hit_point(e){const t=new u.Selection;return l.point_in_poly(e.sx,e.sy,this.sx,this.sy)&&(t.add_to_selected_glyphs(this.model),t.view=this),t}}r.PatchView=f,f.__name__="PatchView";class d extends s.XYGlyph{constructor(e){super(e)}static init_Patch(){this.prototype.default_view=f,this.mixins([c.LineScalar,c.FillScalar,c.HatchScalar])}}r.Patch=d,d.__name__="Patch",d.init_Patch()},function i(e,t,r,n,a){n();const o=e(1),s=e(24),l=e(118),i=o.__importStar(e(107)),c=o.__importStar(e(18)),u=e(59);class f extends l.AreaView{_index_data(n){const{min:a,max:i}=Math,{data_size:o}=this;for(let r=0;r<o;r++){const o=this._x1[r],e=this._x2[r],t=this._y[r];isNaN(o+e+t)||!isFinite(o+e+t)?n.add_empty():n.add(a(o,e),t,i(o,e),t)}}_inner(r,n,t,a,e){r.beginPath();for(let e=0,t=n.length;e<t;e++)r.lineTo(n[e],a[e]);for(let e=t.length-1;e>=0;e--)r.lineTo(t[e],a[e]);r.closePath(),e.call(r)}_render(e,t,r){const{sx1:n,sx2:a,sy:i}=null!=r?r:this;this.visuals.fill.doit&&(this.visuals.fill.set_value(e),this._inner(e,n,a,i,e.fill)),this.visuals.hatch.doit&&(this.visuals.hatch.set_value(e),this._inner(e,n,a,i,e.fill))}_hit_point(e){const r=this.sy.length,n=new s.ScreenArray(2*r),a=new s.ScreenArray(2*r);for(let e=0,t=r;e<t;e++)n[e]=this.sx1[e],a[e]=this.sy[e],n[r+e]=this.sx2[r-e-1],a[r+e]=this.sy[r-e-1];const t=new u.Selection;return i.point_in_poly(e.sx,e.sy,n,a)&&(t.add_to_selected_glyphs(this.model),t.view=this),t}scenterxy(e){return[(this.sx1[e]+this.sx2[e])/2,this.sy[e]]}_map_data(){this.sx1=this.renderer.xscale.v_compute(this._x1),this.sx2=this.renderer.xscale.v_compute(this._x2),this.sy=this.renderer.yscale.v_compute(this._y)}}r.HAreaView=f,f.__name__="HAreaView";class d extends l.Area{constructor(e){super(e)}static init_HArea(){this.prototype.default_view=f,this.define(({})=>({x1:[c.XCoordinateSpec,{field:"x1"}],x2:[c.XCoordinateSpec,{field:"x2"}],y:[c.YCoordinateSpec,{field:"y"}]}))}}r.HArea=d,d.__name__="HArea",d.init_HArea()},function e(t,r,e,n,a){n();const i=t(1),o=t(98),s=t(106),l=i.__importStar(t(48));class c extends o.GlyphView{draw_legend_for_index(e,t,r){s.generic_area_scalar_legend(this.visuals,e,t)}}e.AreaView=c,c.__name__="AreaView";class u extends o.Glyph{constructor(e){super(e)}static init_Area(){this.mixins([l.FillScalar,l.HatchScalar])}}e.Area=u,u.__name__="Area",u.init_Area()},function i(e,t,r,n,a){n();const o=e(1),s=e(24),l=e(118),i=o.__importStar(e(107)),c=o.__importStar(e(18)),u=e(59);class f extends l.AreaView{_index_data(n){const{min:a,max:i}=Math,{data_size:o}=this;for(let r=0;r<o;r++){const o=this._x[r],e=this._y1[r],t=this._y2[r];isNaN(o+e+t)||!isFinite(o+e+t)?n.add_empty():n.add(o,a(e,t),o,i(e,t))}}_inner(r,n,a,t,e){r.beginPath();for(let e=0,t=a.length;e<t;e++)r.lineTo(n[e],a[e]);for(let e=t.length-1;e>=0;e--)r.lineTo(n[e],t[e]);r.closePath(),e.call(r)}_render(e,t,r){const{sx:n,sy1:a,sy2:i}=null!=r?r:this;this.visuals.fill.doit&&(this.visuals.fill.set_value(e),this._inner(e,n,a,i,e.fill)),this.visuals.hatch.doit&&(this.visuals.hatch.set_value(e),this._inner(e,n,a,i,e.fill))}scenterxy(e){return[this.sx[e],(this.sy1[e]+this.sy2[e])/2]}_hit_point(e){const r=this.sx.length,n=new s.ScreenArray(2*r),a=new s.ScreenArray(2*r);for(let e=0,t=r;e<t;e++)n[e]=this.sx[e],a[e]=this.sy1[e],n[r+e]=this.sx[r-e-1],a[r+e]=this.sy2[r-e-1];const t=new u.Selection;return i.point_in_poly(e.sx,e.sy,n,a)&&(t.add_to_selected_glyphs(this.model),t.view=this),t}_map_data(){this.sx=this.renderer.xscale.v_compute(this._x),this.sy1=this.renderer.yscale.v_compute(this._y1),this.sy2=this.renderer.yscale.v_compute(this._y2)}}r.VAreaView=f,f.__name__="VAreaView";class d extends l.Area{constructor(e){super(e)}static init_VArea(){this.prototype.default_view=f,this.define(({})=>({x:[c.XCoordinateSpec,{field:"x"}],y1:[c.YCoordinateSpec,{field:"y1"}],y2:[c.YCoordinateSpec,{field:"y2"}]}))}}r.VArea=d,d.__name__="VArea",d.init_VArea()},function e(t,r,n,a,i){a();const o=t(53),s=t(59),l=t(24),c=t(121),u=t(57);class e extends o.Model{constructor(e){super(e)}static init_CDSView(){this.define(({Array:e,Ref:t})=>({filters:[e(t(c.Filter)),[]],source:[t(u.ColumnarDataSource)]})),this.internal(({Int:e,Dict:t,Ref:r,Nullable:n})=>({indices:[r(l.Indices)],indices_map:[t(e),{}],masked:[n(r(l.Indices)),null]}))}initialize(){super.initialize(),this.compute_indices()}connect_signals(){super.connect_signals(),this.connect(this.properties.filters.change,()=>this.compute_indices());const e=()=>{const e=()=>this.compute_indices();null!=this.source&&(this.connect(this.source.change,e),this.source instanceof u.ColumnarDataSource&&(this.connect(this.source.streaming,e),this.connect(this.source.patching,e)))};let t=null!=this.source;t?e():this.connect(this.properties.source.change,()=>{t||(e(),t=!0)})}compute_indices(){var e;const{source:t}=this;if(null==t)return;const r=null!==(e=t.get_length())&&void 0!==e?e:1,n=l.Indices.all_set(r);for(const e of this.filters)n.intersect(e.compute_indices(t));this.indices=n,this._indices=[...n],this.indices_map_to_subset()}indices_map_to_subset(){this.indices_map={};for(let e=0;e<this._indices.length;e++)this.indices_map[this._indices[e]]=e}convert_selection_from_subset(e){const t=e.indices.map(e=>this._indices[e]);return new s.Selection(Object.assign(Object.assign({},e.attributes),{indices:t}))}convert_selection_to_subset(e){const t=e.indices.map(e=>this.indices_map[e]);return new s.Selection(Object.assign(Object.assign({},e.attributes),{indices:t}))}convert_indices_from_subset(e){return e.map(e=>this._indices[e])}}n.CDSView=e,e.__name__="CDSView",e.init_CDSView()},function e(t,r,n,a,i){a();const o=t(53);class s extends o.Model{constructor(e){super(e)}}n.Filter=s,s.__name__="Filter"},function e(t,r,n,a,i){a();const s=t(9);async function l(e,t,r){const n=new e(Object.assign(Object.assign({},r),{model:t}));return n.initialize(),await n.lazy_initialize(),n}n.build_view=async function(e,t={parent:null},r=e=>e.default_view){const n=await l(r(e),e,t);return n.connect_signals(),n},n.build_views=async function(t,e,r={parent:null},n=e=>e.default_view){const a=s.difference([...t.keys()],e);for(const e of a)t.get(e).remove(),t.delete(e);const i=[],o=e.filter(e=>!t.has(e));for(const e of o){const a=await l(n(e),e,r);t.set(e,a),i.push(a)}for(const t of i)t.connect_signals();return i},n.remove_views=function(r){for(const[e,t]of r)t.remove(),r.delete(e)}},function u(e,t,r,n,a){n();const i=e(62),o=e(61),f=e(124),s=e(125),l=e(126),d=e(122),u=e(64),h=e(127),p=e(128),v=e(11);class c extends i.DataRendererView{get glyph_view(){return this.node_view.glyph}async lazy_initialize(){await super.lazy_initialize();const r=this.model;let n=null,a=null;const e=new class extends f.Expression{_v_compute(e){v.assert(null==n);const[t]=n=r.layout_provider.get_edge_coordinates(e);return t}},t=new class extends f.Expression{_v_compute(e){v.assert(null!=n);const[,t]=n;return n=null,t}},i=new class extends f.Expression{_v_compute(e){v.assert(null==a);const[t]=a=r.layout_provider.get_node_coordinates(e);return t}},o=new class extends f.Expression{_v_compute(e){v.assert(null!=a);const[,t]=a;return a=null,t}},{edge_renderer:s,node_renderer:l}=this.model;if(!(s.glyph instanceof h.MultiLine||s.glyph instanceof p.Patches))throw new Error(`${this}.edge_renderer.glyph must be a MultiLine glyph`);if(!(l.glyph instanceof u.XYGlyph))throw new Error(`${this}.node_renderer.glyph must be a XYGlyph glyph`);s.glyph.properties.xs.internal=!0,s.glyph.properties.ys.internal=!0,l.glyph.properties.x.internal=!0,l.glyph.properties.y.internal=!0,s.glyph.xs={expr:e},s.glyph.ys={expr:t},l.glyph.x={expr:i},l.glyph.y={expr:o};const{parent:c}=this;this.edge_view=await d.build_view(s,{parent:c}),this.node_view=await d.build_view(l,{parent:c})}connect_signals(){super.connect_signals(),this.connect(this.model.layout_provider.change,()=>{this.edge_view.set_data(),this.node_view.set_data(),this.request_render()})}remove(){this.edge_view.remove(),this.node_view.remove(),super.remove()}_render(){this.edge_view.render(),this.node_view.render()}renderer_view(e){if(e instanceof o.GlyphRenderer){if(e==this.edge_view.model)return this.edge_view;if(e==this.node_view.model)return this.node_view}return super.renderer_view(e)}}r.GraphRendererView=c,c.__name__="GraphRendererView";class g extends i.DataRenderer{constructor(e){super(e)}static init_GraphRenderer(){this.prototype.default_view=c,this.define(({Ref:e})=>({layout_provider:[e(s.LayoutProvider)],node_renderer:[e(o.GlyphRenderer)],edge_renderer:[e(o.GlyphRenderer)],selection_policy:[e(l.GraphHitTestPolicy),()=>new l.NodesOnly],inspection_policy:[e(l.GraphHitTestPolicy),()=>new l.NodesOnly]}))}get_selection_manager(){return this.node_renderer.data_source.selection_manager}}r.GraphRenderer=g,g.__name__="GraphRenderer",g.init_GraphRenderer()},function e(t,r,n,a,i){a();const o=t(53);class s extends o.Model{constructor(e){super(e)}initialize(){super.initialize(),this._connected=new Set,this._result=new Map}v_compute(e){this._connected.has(e)||(this.connect(e.change,()=>this._result.delete(e)),this.connect(e.patching,()=>this._result.delete(e)),this.connect(e.streaming,()=>this._result.delete(e)),this._connected.add(e));let t=this._result.get(e);return null==t&&(t=this._v_compute(e),this._result.set(e,t)),t}}n.Expression=s,s.__name__="Expression";class l extends o.Model{constructor(e){super(e)}initialize(){super.initialize(),this._connected=new Set,this._result=new Map}compute(e){this._connected.has(e)||(this.connect(e.change,()=>this._result.delete(e)),this.connect(e.patching,()=>this._result.delete(e)),this.connect(e.streaming,()=>this._result.delete(e)),this._connected.add(e));let t=this._result.get(e);return null==t&&(t=this._compute(e),this._result.set(e,t)),t}}n.ScalarExpression=l,l.__name__="ScalarExpression"},function e(t,r,n,a,i){a();const o=t(53);class s extends o.Model{constructor(e){super(e)}}n.LayoutProvider=s,s.__name__="LayoutProvider"},function o(e,t,r,n,a){n();const i=e(53),s=e(12),o=e(9),l=e(59);class c extends i.Model{constructor(e){super(e)}_hit_test(e,t,r){if(!t.model.visible)return null;const n=r.glyph.hit_test(e);return null==n?null:r.model.view.convert_selection_from_subset(n)}}r.GraphHitTestPolicy=c,c.__name__="GraphHitTestPolicy";class u extends c{constructor(e){super(e)}hit_test(e,t){return this._hit_test(e,t,t.edge_view)}do_selection(e,t,r,n){if(null==e)return!1;const a=t.edge_renderer.data_source.selected;return a.update(e,r,n),t.edge_renderer.data_source._select.emit(),!a.is_empty()}do_inspection(e,t,r,n,a){if(null==e)return!1;const{edge_renderer:i}=r.model,o=i.get_selection_manager().get_or_create_inspector(r.edge_view.model);return o.update(e,n,a),r.edge_view.model.data_source.setv({inspected:o},{silent:!0}),r.edge_view.model.data_source.inspect.emit([r.edge_view.model,{geometry:t}]),!o.is_empty()}}r.EdgesOnly=u,u.__name__="EdgesOnly";class f extends c{constructor(e){super(e)}hit_test(e,t){return this._hit_test(e,t,t.node_view)}do_selection(e,t,r,n){if(null==e)return!1;const a=t.node_renderer.data_source.selected;return a.update(e,r,n),t.node_renderer.data_source._select.emit(),!a.is_empty()}do_inspection(e,t,r,n,a){if(null==e)return!1;const{node_renderer:i}=r.model,o=i.get_selection_manager().get_or_create_inspector(r.node_view.model);return o.update(e,n,a),r.node_view.model.data_source.setv({inspected:o},{silent:!0}),r.node_view.model.data_source.inspect.emit([r.node_view.model,{geometry:t}]),!o.is_empty()}}r.NodesOnly=f,f.__name__="NodesOnly";class d extends c{constructor(e){super(e)}hit_test(e,t){return this._hit_test(e,t,t.node_view)}get_linked_edges(t,r,e){let n=[];"selection"==e?n=t.selected.indices.map(e=>t.data.index[e]):"inspection"==e&&(n=t.inspected.indices.map(e=>t.data.index[e]));const a=[];for(let e=0;e<r.data.start.length;e++)(o.contains(n,r.data.start[e])||o.contains(n,r.data.end[e]))&&a.push(e);const i=new l.Selection;for(const t of a)i.multiline_indices[t]=[0];return i.indices=a,i}do_selection(e,t,r,n){if(null==e)return!1;const a=t.node_renderer.data_source.selected;a.update(e,r,n);const i=t.edge_renderer.data_source.selected,o=this.get_linked_edges(t.node_renderer.data_source,t.edge_renderer.data_source,"selection");return i.update(o,r,n),t.node_renderer.data_source._select.emit(),!a.is_empty()}do_inspection(e,t,r,n,a){if(null==e)return!1;const i=r.node_view.model.data_source.selection_manager.get_or_create_inspector(r.node_view.model);i.update(e,n,a),r.node_view.model.data_source.setv({inspected:i},{silent:!0});const o=r.edge_view.model.data_source.selection_manager.get_or_create_inspector(r.edge_view.model),s=this.get_linked_edges(r.node_view.model.data_source,r.edge_view.model.data_source,"inspection");return o.update(s,n,a),r.edge_view.model.data_source.setv({inspected:o},{silent:!0}),r.node_view.model.data_source.inspect.emit([r.node_view.model,{geometry:t}]),!i.is_empty()}}r.NodesAndLinkedEdges=d,d.__name__="NodesAndLinkedEdges";class h extends c{constructor(e){super(e)}hit_test(e,t){return this._hit_test(e,t,t.edge_view)}get_linked_nodes(t,e,r){let n=[];"selection"==r?n=e.selected.indices:"inspection"==r&&(n=e.inspected.indices);const a=[];for(const t of n)a.push(e.data.start[t]),a.push(e.data.end[t]);const i=o.uniq(a).map(e=>s.indexOf(t.data.index,e));return new l.Selection({indices:i})}do_selection(e,t,r,n){if(null==e)return!1;const a=t.edge_renderer.data_source.selected;a.update(e,r,n);const i=t.node_renderer.data_source.selected,o=this.get_linked_nodes(t.node_renderer.data_source,t.edge_renderer.data_source,"selection");return i.update(o,r,n),t.edge_renderer.data_source._select.emit(),!a.is_empty()}do_inspection(e,t,r,n,a){if(null==e)return!1;const i=r.edge_view.model.data_source.selection_manager.get_or_create_inspector(r.edge_view.model);i.update(e,n,a),r.edge_view.model.data_source.setv({inspected:i},{silent:!0});const o=r.node_view.model.data_source.selection_manager.get_or_create_inspector(r.node_view.model),s=this.get_linked_nodes(r.node_view.model.data_source,r.edge_view.model.data_source,"inspection");return o.update(s,n,a),r.node_view.model.data_source.setv({inspected:o},{silent:!0}),r.edge_view.model.data_source.inspect.emit([r.edge_view.model,{geometry:t}]),!i.is_empty()}}r.EdgesAndLinkedNodes=h,h.__name__="EdgesAndLinkedNodes"},function u(e,t,r,n,a){n();const i=e(1),o=e(65),s=e(48),u=i.__importStar(e(107)),l=i.__importStar(e(18)),c=e(12),f=e(13),d=e(98),h=e(106),p=e(59);class v extends d.GlyphView{_project_data(){o.inplace.project_xy(this._xs.array,this._ys.array)}_index_data(o){const{data_size:s}=this;for(let i=0;i<s;i++){const s=this._xs.get(i);if(0==s.length){o.add_empty();continue}const e=this._ys.get(i);if(0==e.length){o.add_empty();continue}const[t,r]=c.minmax(s),[n,a]=c.minmax(e);o.add(t,n,r,a)}}_render(a,i,e){const{sxs:o,sys:s}=null!=e?e:this;for(const e of i){const i=o.get(e),t=s.get(e),r=Math.min(i.length,t.length);let n=!0;a.beginPath();for(let e=0;e<r;e++){const o=i[e],s=t[e];isFinite(o+s)?n?(a.moveTo(o,s),n=!1):a.lineTo(o,s):n=!0}this.visuals.line.set_vectorize(a,e),a.stroke()}}_hit_point(e){const s={x:e.sx,y:e.sy};let l=9999;const c=new Map;for(let e=0,t=this.sxs.length;e<t;e++){const n=Math.max(2,this.line_width.get(e)/2),a=this.sxs.get(e),i=this.sys.get(e);let o=null;for(let r=0,e=a.length-1;r<e;r++){const c={x:a[r],y:i[r]},e={x:a[r+1],y:i[r+1]},t=u.dist_to_segment(s,c,e);t<n&&t<l&&(l=t,o=[r])}null!=o&&c.set(e,o)}return new p.Selection({indices:[...c.keys()],multiline_indices:f.to_object(c)})}_hit_span(e){const{sx:r,sy:n}=e;let a,i;"v"==e.direction?(a=this.renderer.yscale.invert(n),i=this._ys):(a=this.renderer.xscale.invert(r),i=this._xs);const o=new Map;for(let e=0,t=i.length;e<t;e++){const r=i.get(e),n=[];for(let e=0,t=r.length-1;e<t;e++)r[e]<=a&&a<=r[e+1]&&n.push(e);n.length>0&&o.set(e,n)}return new p.Selection({indices:[...o.keys()],multiline_indices:f.to_object(o)})}get_interpolation_hit(e,t,r){const n=this._xs.get(e),a=this._ys.get(e),i=n[t],o=a[t],s=n[t+1],l=a[t+1];return h.line_interpolation(this.renderer,r,i,o,s,l)}draw_legend_for_index(e,t,r){h.generic_line_vector_legend(this.visuals,e,t,r)}scenterxy(){throw new Error(`${this}.scenterxy() is not implemented`)}}r.MultiLineView=v,v.__name__="MultiLineView";class g extends d.Glyph{constructor(e){super(e)}static init_MultiLine(){this.prototype.default_view=v,this.define(({})=>({xs:[l.XCoordinateSeqSpec,{field:"xs"}],ys:[l.YCoordinateSeqSpec,{field:"ys"}]})),this.mixins(s.LineVector)}}r.MultiLine=g,g.__name__="MultiLine",g.init_MultiLine()},function s(e,t,r,n,a){n();const i=e(1),o=e(98),l=e(106),s=e(12),c=e(48),h=i.__importStar(e(107)),u=i.__importStar(e(18)),p=e(59),f=e(11),d=e(65);class v extends o.GlyphView{_project_data(){d.inplace.project_xy(this._xs.array,this._ys.array)}_index_data(i){const{data_size:o}=this;for(let e=0;e<o;e++){const o=this._xs.get(e),a=this._ys.get(e);if(0==o.length)i.add_empty();else{const[e,t]=s.minmax(o),[r,n]=s.minmax(a);i.add(e,r,t,n)}}}_mask_data(){const{x_range:e,y_range:t}=this.renderer.plot_view.frame;return this.index.indices({x0:e.min,x1:e.max,y0:t.min,y1:t.max})}_inner_loop(r,n,a,i){for(let e=0,t=n.length;e<t;e++)0!=e?isNaN(n[e]+a[e])?(r.closePath(),i.apply(r),r.beginPath()):r.lineTo(n[e],a[e]):(r.beginPath(),r.moveTo(n[e],a[e]));r.closePath(),i.call(r)}_render(t,r,n){const{sxs:a,sys:i}=null!=n?n:this;for(const n of r){const r=a.get(n),e=i.get(n);this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(t,n),this._inner_loop(t,r,e,t.fill)),this.visuals.hatch.doit&&(this.visuals.hatch.set_vectorize(t,n),this._inner_loop(t,r,e,t.fill)),this.visuals.line.doit&&(this.visuals.line.set_vectorize(t,n),this._inner_loop(t,r,e,t.stroke))}}_hit_rect(e){const{sx0:n,sx1:a,sy0:t,sy1:i}=e,o=[n,a,a,n],s=[t,t,i,i],[l,r]=this.renderer.xscale.r_invert(n,a),[c,u]=this.renderer.yscale.r_invert(t,i),f=this.index.indices({x0:l,x1:r,y0:c,y1:u}),d=[];for(const e of f){const n=this.sxs.get(e),a=this.sys.get(e);let r=!0;for(let e=0,t=n.length;e<t;e++){const i=n[e],l=a[e];if(!h.point_in_poly(i,l,o,s)){r=!1;break}}r&&d.push(e)}return new p.Selection({indices:d})}_hit_point(n){const{sx:a,sy:i}=n,o=this.renderer.xscale.invert(a),s=this.renderer.yscale.invert(i),l=this.index.indices({x0:o,y0:s,x1:o,y1:s}),c=[];for(const n of l){const o=this.sxs.get(n),s=this.sys.get(n),l=o.length;for(let t=0,r=0;;r++){if(isNaN(o[r])||r==l){const l=o.subarray(t,r),e=s.subarray(t,r);if(h.point_in_poly(a,i,l,e)){c.push(n);break}t=r+1}if(r==l)break}}return new p.Selection({indices:c})}_get_snap_coord(e){return s.sum(e)/e.length}scenterxy(e,n,a){const i=this.sxs.get(e),o=this.sys.get(e),s=i.length;let l=!1;for(let t=0,r=0;;r++){const e=isNaN(i[r]);if(l=l||e,r==s&&!l){return[this._get_snap_coord(i),this._get_snap_coord(o)]}if(e||r==s){const s=i.subarray(t,r),l=o.subarray(t,r);if(h.point_in_poly(n,a,s,l)){return[this._get_snap_coord(s),this._get_snap_coord(l)]}t=r+1}if(r==s)break}f.unreachable()}draw_legend_for_index(e,t,r){l.generic_area_vector_legend(this.visuals,e,t,r)}}r.PatchesView=v,v.__name__="PatchesView";class g extends o.Glyph{constructor(e){super(e)}static init_Patches(){this.prototype.default_view=v,this.define(({})=>({xs:[u.XCoordinateSeqSpec,{field:"xs"}],ys:[u.YCoordinateSeqSpec,{field:"ys"}]})),this.mixins([c.LineVector,c.FillVector,c.HatchVector])}}r.Patches=g,g.__name__="Patches",g.init_Patches()},function e(t,r,n,a,i){a();const o=t(53);class s extends o.Model{do_selection(e,t,r,n){return null!=e&&(t.selected.update(e,r,n),t._select.emit(),!t.selected.is_empty())}}n.SelectionPolicy=s,s.__name__="SelectionPolicy";class l extends s{hit_test(t,r){const n=[];for(const e of r){const r=e.hit_test(t);null!=r&&n.push(r)}if(n.length>0){const t=n[0];for(const r of n)t.update_through_intersection(r);return t}return null}}n.IntersectRenderers=l,l.__name__="IntersectRenderers";class e extends s{hit_test(t,r){const n=[];for(const e of r){const r=e.hit_test(t);null!=r&&n.push(r)}if(n.length>0){const t=n[0];for(const r of n)t.update_through_union(r);return t}return null}}n.UnionRenderers=e,e.__name__="UnionRenderers"},function e(t,r,n,a,i){a();const o=t(1),s=t(57),g=t(8),l=t(13),c=o.__importStar(t(131)),u=t(132),f=t(35);function d(t,i,o){if(g.isArray(t)){const e=t.concat(i);return null!=o&&e.length>o?e.slice(-o):e}if(g.isTypedArray(t)){const e=t.length+i.length;if(null!=o&&e>o){const r=e-o,n=t.length;let a;t.length<o?(a=new t.constructor(o),a.set(t,0)):a=t;for(let e=r,t=n;e<t;e++)a[e-r]=a[e];for(let e=0,t=i.length;e<t;e++)a[e+(n-r)]=i[e];return a}{const o=new t.constructor(i);return c.concat(t,o)}}throw new Error("unsupported array types")}function m(e,t){let r,n,a;return g.isNumber(e)?(r=e,a=e+1,n=1):(r=null!=e.start?e.start:0,a=null!=e.stop?e.stop:t,n=null!=e.step?e.step:1),[r,a,n]}function h(f,e){const d=new Set;let h=!1;for(const[t,u]of e){let r,n,e,a;if(g.isArray(t)){const[h]=t;d.add(h),r=f[h].shape,n=f[h],a=u,2===t.length?(r=[1,r[0]],e=[t[0],0,t[1]]):e=t}else g.isNumber(t)?(a=[u],d.add(t)):(a=u,h=!0),e=[0,0,t],r=[1,f.length],n=f;let i=0;const[o,s,l]=m(e[1],r[0]),[c,p,v]=m(e[2],r[1]);for(let t=o;t<s;t+=l)for(let e=c;e<p;e+=v)h&&d.add(e),n[t*r[1]+e]=a[i],i++}return d}n.stream_to_column=d,n.slice=m,n.patch_to_column=h;class e extends s.ColumnarDataSource{constructor(e){super(e)}static init_ColumnDataSource(){this.define(({Dict:e,Any:t})=>({data:[e(t),{}]}))}stream(t,r,n){const{data:a}=this;for(const[n,e]of l.entries(t))a[n]=d(a[n],e,r);if(this.setv({data:a},{silent:!0}),this.streaming.emit(),null!=this.document){const a=new f.ColumnsStreamedEvent(this.document,this.ref(),t,r);this.document._notify_change(this,"data",null,null,{setter_id:n,hint:a})}}patch(t,r){const{data:n}=this;let a=new Set;for(const[r,e]of l.entries(t))a=u.union(a,h(n[r],e));if(this.setv({data:n},{silent:!0}),this.patching.emit([...a]),null!=this.document){const n=new f.ColumnsPatchedEvent(this.document,this.ref(),t);this.document._notify_change(this,"data",null,null,{setter_id:r,hint:n})}}}n.ColumnDataSource=e,e.__name__="ColumnDataSource",e.init_ColumnDataSource()},function e(t,r,n,a,i){a(),n.concat=function(e,...t){let r=e.length;for(const e of t)r+=e.length;const n=new e.constructor(r);n.set(e,0);let a=e.length;for(const e of t)n.set(e,a),a+=e.length;return n}},function e(t,r,n,a,i){function o(...t){const r=new Set;for(const e of t)for(const t of e)r.add(t);return r}a(),n.union=o,n.intersection=function(t,...r){const n=new Set;e:for(const e of t){for(const t of r)if(!t.has(e))continue e;n.add(e)}return n},n.difference=function(e,...t){const r=new Set(e);for(const e of o(...t))r.delete(e);return r}},function e(t,r,n,a,i){a();const o=t(1),s=t(53),l=t(42),c=o.__importStar(t(45)),e=t(48),u=o.__importStar(t(18));class f extends l.View{initialize(){super.initialize(),this.visuals=new c.Visuals(this)}request_render(){this.parent.request_render()}get canvas(){return this.parent.canvas}set_data(r){const n=this;for(const t of this.model){if(!(t instanceof u.VectorSpec||t instanceof u.ScalarSpec))continue;const e=t.uniform(r);n[`${t.attr}`]=e}}}n.ArrowHeadView=f,f.__name__="ArrowHeadView";class d extends s.Model{constructor(e){super(e)}static init_ArrowHead(){this.define(()=>({size:[u.NumberSpec,25]}))}}n.ArrowHead=d,d.__name__="ArrowHead",d.init_ArrowHead();class h extends f{clip(e,t){this.visuals.line.set_vectorize(e,t);const r=this.size.get(t);e.moveTo(.5*r,r),e.lineTo(.5*r,-2),e.lineTo(-.5*r,-2),e.lineTo(-.5*r,r),e.lineTo(0,0),e.lineTo(.5*r,r)}render(t,r){if(this.visuals.line.doit){this.visuals.line.set_vectorize(t,r);const e=this.size.get(r);t.beginPath(),t.moveTo(.5*e,e),t.lineTo(0,0),t.lineTo(-.5*e,e),t.stroke()}}}n.OpenHeadView=h,h.__name__="OpenHeadView";class p extends d{constructor(e){super(e)}static init_OpenHead(){this.prototype.default_view=h,this.mixins(e.LineVector)}}n.OpenHead=p,p.__name__="OpenHead",p.init_OpenHead();class v extends f{clip(e,t){this.visuals.line.set_vectorize(e,t);const r=this.size.get(t);e.moveTo(.5*r,r),e.lineTo(.5*r,-2),e.lineTo(-.5*r,-2),e.lineTo(-.5*r,r),e.lineTo(.5*r,r)}render(e,t){this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(e,t),this._normal(e,t),e.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(e,t),this._normal(e,t),e.stroke())}_normal(e,t){const r=this.size.get(t);e.beginPath(),e.moveTo(.5*r,r),e.lineTo(0,0),e.lineTo(-.5*r,r),e.closePath()}}n.NormalHeadView=v,v.__name__="NormalHeadView";class g extends d{constructor(e){super(e)}static init_NormalHead(){this.prototype.default_view=v,this.mixins([e.LineVector,e.FillVector]),this.override({fill_color:"black"})}}n.NormalHead=g,g.__name__="NormalHead",g.init_NormalHead();class m extends f{clip(e,t){this.visuals.line.set_vectorize(e,t);const r=this.size.get(t);e.moveTo(.5*r,r),e.lineTo(.5*r,-2),e.lineTo(-.5*r,-2),e.lineTo(-.5*r,r),e.lineTo(0,.5*r),e.lineTo(.5*r,r)}render(e,t){this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(e,t),this._vee(e,t),e.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(e,t),this._vee(e,t),e.stroke())}_vee(e,t){const r=this.size.get(t);e.beginPath(),e.moveTo(.5*r,r),e.lineTo(0,0),e.lineTo(-.5*r,r),e.lineTo(0,.5*r),e.closePath()}}n.VeeHeadView=m,m.__name__="VeeHeadView";class _ extends d{constructor(e){super(e)}static init_VeeHead(){this.prototype.default_view=m,this.mixins([e.LineVector,e.FillVector]),this.override({fill_color:"black"})}}n.VeeHead=_,_.__name__="VeeHead",_.init_VeeHead();class y extends f{render(t,r){if(this.visuals.line.doit){this.visuals.line.set_vectorize(t,r);const e=this.size.get(r);t.beginPath(),t.moveTo(.5*e,0),t.lineTo(-.5*e,0),t.stroke()}}clip(e,t){}}n.TeeHeadView=y,y.__name__="TeeHeadView";class b extends d{constructor(e){super(e)}static init_TeeHead(){this.prototype.default_view=y,this.mixins(e.LineVector)}}n.TeeHead=b,b.__name__="TeeHead",b.init_TeeHead()},function e(t,r,n,a,i){a();const e=t(1),o=t(135),s=e.__importStar(t(48));class l extends o.UpperLowerView{paint(r){r.beginPath(),r.moveTo(this._lower_sx[0],this._lower_sy[0]);for(let e=0,t=this._lower_sx.length;e<t;e++)r.lineTo(this._lower_sx[e],this._lower_sy[e]);for(let e=this._upper_sx.length-1;e>=0;e--)r.lineTo(this._upper_sx[e],this._upper_sy[e]);r.closePath(),this.visuals.fill.doit&&(this.visuals.fill.set_value(r),r.fill()),r.beginPath(),r.moveTo(this._lower_sx[0],this._lower_sy[0]);for(let e=0,t=this._lower_sx.length;e<t;e++)r.lineTo(this._lower_sx[e],this._lower_sy[e]);this.visuals.line.doit&&(this.visuals.line.set_value(r),r.stroke()),r.beginPath(),r.moveTo(this._upper_sx[0],this._upper_sy[0]);for(let e=0,t=this._upper_sx.length;e<t;e++)r.lineTo(this._upper_sx[e],this._upper_sy[e]);this.visuals.line.doit&&(this.visuals.line.set_value(r),r.stroke())}}n.BandView=l,l.__name__="BandView";class c extends o.UpperLower{constructor(e){super(e)}static init_Band(){this.prototype.default_view=l,this.mixins([s.Line,s.Fill]),this.override({fill_color:"#fff9ba",fill_alpha:.4,line_color:"#cccccc",line_alpha:.3})}}n.Band=c,c.__name__="Band",c.init_Band()},function e(t,r,n,a,i){a();const o=t(1),s=t(56),l=t(20),e=o.__importStar(t(18));class c extends s.DataAnnotationView{map_data(){const{frame:e}=this.plot_view,t=this.model.dimension,r=this.coordinates.x_scale,n=this.coordinates.y_scale,a="height"==t?n:r,i="height"==t?r:n,o="height"==t?e.bbox.yview:e.bbox.xview,s="height"==t?e.bbox.xview:e.bbox.yview;let l,c,u;l="data"==this.model.properties.lower.units?a.v_compute(this._lower):o.v_compute(this._lower),c="data"==this.model.properties.upper.units?a.v_compute(this._upper):o.v_compute(this._upper),u="data"==this.model.properties.base.units?i.v_compute(this._base):s.v_compute(this._base);const[f,d]="height"==t?[1,0]:[0,1],h=[l,u],p=[c,u];this._lower_sx=h[f],this._lower_sy=h[d],this._upper_sx=p[f],this._upper_sy=p[d]}}n.UpperLowerView=c,c.__name__="UpperLowerView";class u extends e.CoordinateSpec{get dimension(){return"width"==this.obj.dimension?"x":"y"}get units(){var e;return null!==(e=this.spec.units)&&void 0!==e?e:"data"}}n.XOrYCoordinateSpec=u,u.__name__="XOrYCoordinateSpec";class f extends s.DataAnnotation{constructor(e){super(e)}static init_UpperLower(){this.define(()=>({dimension:[l.Dimension,"height"],lower:[u,{field:"lower"}],upper:[u,{field:"upper"}],base:[u,{field:"base"}]}))}}n.UpperLower=f,f.__name__="UpperLower",f.init_UpperLower()},function e(t,r,n,a,i){a();const o=t(1),s=t(40),l=o.__importStar(t(48)),c=t(20),u=t(99);n.EDGE_TOLERANCE=2.5;class f extends s.AnnotationView{constructor(){super(...arguments),this.bbox=new u.BBox}connect_signals(){super.connect_signals(),this.connect(this.model.change,()=>this.request_render())}_render(){const{left:e,right:t,top:r,bottom:n}=this.model;if(null==e&&null==t&&null==r&&null==n)return;const{frame:a}=this.plot_view,i=this.coordinates.x_scale,o=this.coordinates.y_scale,s=(e,t,r,n,a)=>{let i;return i=null!=e?this.model.screen?e:"data"==t?r.compute(e):n.compute(e):a,i};this.bbox=u.BBox.from_rect({left:s(e,this.model.left_units,i,a.bbox.xview,a.bbox.left),right:s(t,this.model.right_units,i,a.bbox.xview,a.bbox.right),top:s(r,this.model.top_units,o,a.bbox.yview,a.bbox.top),bottom:s(n,this.model.bottom_units,o,a.bbox.yview,a.bbox.bottom)}),this._paint_box()}_paint_box(){const{ctx:e}=this.layer;e.save();const{left:t,top:r,width:n,height:a}=this.bbox;e.beginPath(),e.rect(t,r,n,a),this.visuals.fill.doit&&(this.visuals.fill.set_value(e),e.fill()),this.visuals.hatch.doit&&(this.visuals.hatch.set_value(e),e.fill()),this.visuals.line.doit&&(this.visuals.line.set_value(e),e.stroke()),e.restore()}interactive_bbox(){const e=this.model.line_width+n.EDGE_TOLERANCE;return this.bbox.grow_by(e)}interactive_hit(e,t){if(null==this.model.in_cursor)return!1;return this.interactive_bbox().contains(e,t)}cursor(e,t){const{left:r,right:n,bottom:a,top:i}=this.bbox;return Math.abs(e-r)<3||Math.abs(e-n)<3?this.model.ew_cursor:Math.abs(t-a)<3||Math.abs(t-i)<3?this.model.ns_cursor:this.bbox.contains(e,t)?this.model.in_cursor:null}}n.BoxAnnotationView=f,f.__name__="BoxAnnotationView";class d extends s.Annotation{constructor(e){super(e)}static init_BoxAnnotation(){this.prototype.default_view=f,this.mixins([l.Line,l.Fill,l.Hatch]),this.define(({Number:e,Nullable:t})=>({top:[t(e),null],top_units:[c.SpatialUnits,"data"],bottom:[t(e),null],bottom_units:[c.SpatialUnits,"data"],left:[t(e),null],left_units:[c.SpatialUnits,"data"],right:[t(e),null],right_units:[c.SpatialUnits,"data"],render_mode:[c.RenderMode,"canvas"]})),this.internal(({Boolean:e,String:t,Nullable:r})=>({screen:[e,!1],ew_cursor:[r(t),null],ns_cursor:[r(t),null],in_cursor:[r(t),null]})),this.override({fill_color:"#fff9ba",fill_alpha:.4,line_color:"#cccccc",line_alpha:.3})}update({left:e,right:t,top:r,bottom:n}){this.setv({left:e,right:t,top:r,bottom:n,screen:!0})}}n.BoxAnnotation=d,d.__name__="BoxAnnotation",d.init_BoxAnnotation()},function c(e,t,r,n,a){n();const i=e(1),o=e(40),u=e(138),E=e(144),c=e(162),f=e(165),d=e(198),h=e(166),p=e(205),v=e(169),g=e(203),m=e(202),_=e(209),y=e(217),b=e(220),x=e(20),w=i.__importStar(e(48)),l=e(9),D=e(221),O=e(222),P=e(225),I=e(140),A=e(11),s=e(122),R=e(8);class T extends o.AnnotationView{get orientation(){return this._orientation}initialize(){super.initialize();const{ticker:e,formatter:t,color_mapper:r}=this.model;this._ticker="auto"!=e?e:(()=>{switch(!0){case r instanceof _.LogColorMapper:return new d.LogTicker;case r instanceof _.ScanningColorMapper:return new d.BinnedTicker({mapper:r});case r instanceof _.CategoricalColorMapper:return new d.CategoricalTicker;default:return new d.BasicTicker}})(),this._formatter="auto"!=t?t:(()=>{switch(!0){case this._ticker instanceof d.LogTicker:return new p.LogTickFormatter;case r instanceof _.CategoricalColorMapper:return new p.CategoricalTickFormatter;default:return new p.BasicTickFormatter}})(),this._major_range=(()=>{if(r instanceof _.CategoricalColorMapper){const{factors:e}=r;return new b.FactorRange({factors:e})}if(r instanceof m.ContinuousColorMapper){const{min:e,max:t}=r.metrics;return new b.Range1d({start:e,end:t})}A.unreachable()})(),this._major_scale=(()=>{if(r instanceof _.LinearColorMapper)return new y.LinearScale;if(r instanceof _.LogColorMapper)return new y.LogScale;if(r instanceof _.ScanningColorMapper){const{binning:e}=r.metrics;return new y.LinearInterpolationScale({binning:e})}if(r instanceof _.CategoricalColorMapper)return new y.CategoricalScale;A.unreachable()})(),this._minor_range=new b.Range1d({start:0,end:1}),this._minor_scale=new y.LinearScale;const n=w.attrs_of(this.model,"major_label_",w.Text,!0),a=w.attrs_of(this.model,"major_tick_",w.Line,!0),i=w.attrs_of(this.model,"minor_tick_",w.Line,!0),o=w.attrs_of(this.model,"title_",w.Text),s=r instanceof _.CategoricalColorMapper?c.CategoricalAxis:r instanceof _.LogColorMapper?c.LogAxis:c.LinearAxis;this._axis=new s(Object.assign(Object.assign(Object.assign({ticker:this._ticker,formatter:this._formatter,major_tick_in:this.model.major_tick_in,major_tick_out:this.model.major_tick_out,minor_tick_in:this.model.minor_tick_in,minor_tick_out:this.model.minor_tick_out,major_label_standoff:this.model.label_standoff,major_label_overrides:this.model.major_label_overrides,major_label_policy:this.model.major_label_policy,axis_line_color:null},n),a),i));const{title:l}=this.model;l&&(this._title=new u.Title(Object.assign({text:l,standoff:this.model.title_standoff},o)))}async lazy_initialize(){await super.lazy_initialize();const e=this,t={get parent(){return e.parent},get root(){return e.root},get frame(){return e._frame},get canvas_view(){return e.parent.canvas_view},request_layout(){e.parent.request_layout()}};this._axis_view=await s.build_view(this._axis,{parent:t}),null!=this._title&&(this._title_view=await s.build_view(this._title,{parent:t}))}remove(){var e;null===(e=this._title_view)||void 0===e||e.remove(),this._axis_view.remove(),super.remove()}connect_signals(){super.connect_signals(),this.connect(this._ticker.change,()=>this.request_render()),this.connect(this._formatter.change,()=>this.request_render()),this.connect(this.model.color_mapper.metrics_change,()=>{const t=this._major_range,r=this._major_scale,{color_mapper:n}=this.model;if(n instanceof m.ContinuousColorMapper&&t instanceof b.Range1d){const{min:r,max:e}=n.metrics;t.setv({start:r,end:e})}if(n instanceof _.ScanningColorMapper&&r instanceof y.LinearInterpolationScale){const{binning:t}=n.metrics;r.binning=t}this._set_canvas_image(),this.plot_view.request_layout()})}_set_canvas_image(){const{orientation:t}=this,e=(()=>{const{palette:e}=this.model.color_mapper;return"vertical"==t?l.reversed(e):e})(),[r,n]="vertical"==t?[1,e.length]:[e.length,1],a=this._image=document.createElement("canvas");a.width=r,a.height=n;const i=a.getContext("2d"),o=i.getImageData(0,0,r,n),s=new _.LinearColorMapper({palette:e}).rgba_mapper.v_compute(l.range(0,e.length));o.data.set(s),i.putImageData(o,0,0)}update_layout(){const{location:r,width:e,height:t,padding:n,margin:a}=this.model,[i,o]=(()=>{if(!R.isString(r))return["end","start"];switch(r){case"top_left":return["start","start"];case"top":case"top_center":return["start","center"];case"top_right":return["start","end"];case"bottom_left":return["end","start"];case"bottom":case"bottom_center":return["end","center"];case"bottom_right":return["end","end"];case"left":case"center_left":return["center","start"];case"center":case"center_center":return["center","center"];case"right":case"center_right":return["center","end"]}})(),s=this._orientation=(()=>{const{orientation:e}=this.model;return"auto"==e?null!=this.panel?this.panel.is_horizontal?"horizontal":"vertical":"start"==o||"end"==o||"center"==o&&"center"==i?"vertical":"horizontal":e})(),l=new O.NodeLayout,c=new O.VStack,u=new O.VStack,f=new O.HStack,d=new O.HStack;l.absolute=!0,c.absolute=!0,u.absolute=!0,f.absolute=!0,d.absolute=!0;const[h,p,v,g]=(()=>"horizontal"==s?[this._major_scale,this._minor_scale,this._major_range,this._minor_range]:[this._minor_scale,this._major_scale,this._minor_range,this._major_range])();this._frame=new E.CartesianFrame(h,p,v,g),l.on_resize(e=>this._frame.set_geometry(e));const m=new P.BorderLayout;this._inner_layout=m,m.absolute=!0,m.center_panel=l,m.top_panel=c,m.bottom_panel=u,m.left_panel=f,m.right_panel=d;const _={left:n,right:n,top:n,bottom:n},y=(()=>{if(null==this.panel){if(R.isString(r))return{left:a,right:a,top:a,bottom:a};{const[e,t]=r;return{left:e,right:a,top:a,bottom:t}}}if(!R.isString(r)){const[e,t]=r;return{left:e,right:0,top:0,bottom:t}}})();let b,x,w,A;if(m.padding=_,null!=this.panel?(b="max",x=void 0,w=void 0,A=void 0):"auto"==("horizontal"==s?e:t)?(b="fixed",x=25*this.model.color_mapper.palette.length,w={percent:.3},A={percent:.8}):(b="fit",x=void 0),"horizontal"==s){const r="auto"==e?void 0:e,n="auto"==t?25:t;m.set_sizing({width_policy:b,height_policy:"min",width:x,min_width:w,max_width:A,halign:o,valign:i,margin:y}),m.center_panel.set_sizing({width_policy:"auto"==e?"fit":"fixed",height_policy:"fixed",width:r,height:n})}else{const r="auto"==e?25:e,n="auto"==t?void 0:t;m.set_sizing({width_policy:"min",height_policy:b,height:x,min_height:w,max_height:A,halign:o,valign:i,margin:y}),m.center_panel.set_sizing({width_policy:"fixed",height_policy:"auto"==t?"fit":"fixed",width:r,height:n})}c.set_sizing({width_policy:"fit",height_policy:"min"}),u.set_sizing({width_policy:"fit",height_policy:"min"}),f.set_sizing({width_policy:"min",height_policy:"fit"}),d.set_sizing({width_policy:"min",height_policy:"fit"});const{_title_view:T}=this;null!=T&&("horizontal"==s?(T.panel=new I.Panel("above"),T.update_layout(),c.children.push(T.layout)):(T.panel=new I.Panel("left"),T.update_layout(),f.children.push(T.layout)));const{panel:k}=this,M=null!=k&&s==k.orientation?k.side:"horizontal"==s?"below":"right",S=(()=>{switch(M){case"above":return c;case"below":return u;case"left":return f;case"right":return d}})(),{_axis_view:C}=this;if(C.panel=new I.Panel(M),C.update_layout(),S.children.push(C.layout),null!=this.panel){const r=new D.Grid([{layout:m,row:0,col:0}]);r.absolute=!0,"horizontal"==s?r.set_sizing({width_policy:"max",height_policy:"min"}):r.set_sizing({width_policy:"min",height_policy:"max"}),this.layout=r}else this.layout=this._inner_layout;const{visible:L}=this.model;this.layout.sizing.visible=L,this._set_canvas_image()}_render(){var e;const{ctx:t}=this.layer;t.save(),this._paint_bbox(t,this._inner_layout.bbox),this._paint_image(t,this._inner_layout.center_panel.bbox),null===(e=this._title_view)||void 0===e||e.render(),this._axis_view.render(),t.restore()}_paint_bbox(e,t){const{x:r,y:n}=t;let{width:a,height:i}=t;r+a>=this.parent.canvas_view.bbox.width&&(a-=1),n+i>=this.parent.canvas_view.bbox.height&&(i-=1),e.save(),this.visuals.background_fill.doit&&(this.visuals.background_fill.set_value(e),e.fillRect(r,n,a,i)),this.visuals.border_line.doit&&(this.visuals.border_line.set_value(e),e.strokeRect(r,n,a,i)),e.restore()}_paint_image(e,t){const{x:r,y:n,width:a,height:i}=t;e.save(),e.setImageSmoothingEnabled(!1),e.globalAlpha=this.model.scale_alpha,e.drawImage(this._image,r,n,a,i),this.visuals.bar_line.doit&&(this.visuals.bar_line.set_value(e),e.strokeRect(r,n,a,i)),e.restore()}serializable_state(){const e=super.serializable_state(),{children:t=[]}=e,r=i.__rest(e,["children"]);return null!=this._title_view&&t.push(this._title_view.serializable_state()),t.push(this._axis_view.serializable_state()),Object.assign(Object.assign({},r),{children:t})}}r.ColorBarView=T,T.__name__="ColorBarView";class k extends o.Annotation{constructor(e){super(e)}static init_ColorBar(){this.prototype.default_view=T,this.mixins([["major_label_",w.Text],["title_",w.Text],["major_tick_",w.Line],["minor_tick_",w.Line],["border_",w.Line],["bar_",w.Line],["background_",w.Fill]]),this.define(({Alpha:e,Number:t,String:r,Tuple:n,Dict:a,Or:i,Ref:o,Auto:s,Nullable:l})=>({location:[i(x.Anchor,n(t,t)),"top_right"],orientation:[i(x.Orientation,s),"auto"],title:[l(r),null],title_standoff:[t,2],width:[i(t,s),"auto"],height:[i(t,s),"auto"],scale_alpha:[e,1],ticker:[i(o(f.Ticker),s),"auto"],formatter:[i(o(h.TickFormatter),s),"auto"],major_label_overrides:[a(r),{}],major_label_policy:[o(v.LabelingPolicy),()=>new v.NoOverlap],color_mapper:[o(g.ColorMapper)],label_standoff:[t,5],margin:[t,30],padding:[t,10],major_tick_in:[t,5],major_tick_out:[t,0],minor_tick_in:[t,0],minor_tick_out:[t,0]})),this.override({background_fill_color:"#ffffff",background_fill_alpha:.95,bar_line_color:null,border_line_color:null,major_label_text_font_size:"11px",major_tick_line_color:"#ffffff",minor_tick_line_color:null,title_text_font_size:"13px",title_text_font_style:"italic"})}}r.ColorBar=k,k.__name__="ColorBar",k.init_ColorBar()},function e(t,r,n,a,i){a();const o=t(1),s=t(139),l=t(20),c=t(143),u=o.__importStar(t(48));class f extends s.TextAnnotationView{_get_location(){const e=this.model.offset,t=this.model.standoff/2;let r,n;const{bbox:a}=this.layout;switch(this.panel.side){case"above":case"below":switch(this.model.vertical_align){case"top":n=a.top+t;break;case"middle":n=a.vcenter;break;case"bottom":n=a.bottom-t}switch(this.model.align){case"left":r=a.left+e;break;case"center":r=a.hcenter;break;case"right":r=a.right-e}break;case"left":switch(this.model.vertical_align){case"top":r=a.left+t;break;case"middle":r=a.hcenter;break;case"bottom":r=a.right-t}switch(this.model.align){case"left":n=a.bottom-e;break;case"center":n=a.vcenter;break;case"right":n=a.top+e}break;case"right":switch(this.model.vertical_align){case"top":r=a.right-t;break;case"middle":r=a.hcenter;break;case"bottom":r=a.left+t}switch(this.model.align){case"left":n=a.top+e;break;case"center":n=a.vcenter;break;case"right":n=a.bottom-e}}return[r,n]}_render(){const{text:e}=this.model;if(null==e||0==e.length)return;this.model.text_baseline=this.model.vertical_align,this.model.text_align=this.model.align;const[t,r]=this._get_location(),n=this.panel.get_label_angle_heuristic("parallel");("canvas"==this.model.render_mode?this._canvas_text.bind(this):this._css_text.bind(this))(this.layer.ctx,e,t,r,n)}_get_size(){const{text:n}=this.model;if(null==n||0==n.length)return{width:0,height:0};{const{ctx:e}=this.layer;this.visuals.text.set_value(e);const{width:t}=this.layer.ctx.measureText(n),{height:r}=c.font_metrics(e.font);return{width:t,height:2+r*this.model.text_line_height+this.model.standoff}}}}n.TitleView=f,f.__name__="TitleView";class e extends s.TextAnnotation{constructor(e){super(e)}static init_Title(){this.prototype.default_view=f,this.mixins([u.Text,["border_",u.Line],["background_",u.Fill]]),this.define(({Number:e,String:t})=>({text:[t,""],vertical_align:[l.VerticalAlign,"bottom"],align:[l.TextAlign,"left"],offset:[e,0],standoff:[e,10]})),this.prototype._props.text_align.options.internal=!0,this.prototype._props.text_baseline.options.internal=!0,this.override({text_font_size:"13px",text_font_style:"bold",text_line_height:1,background_fill_color:null,border_line_color:null})}}n.Title=e,e.__name__="Title",e.init_Title()},function e(t,r,n,a,i){a();const o=t(40),l=t(43),s=t(20),c=t(140),u=t(143),f=t(11);class e extends o.AnnotationView{update_layout(){const{panel:e}=this;this.layout=null!=e?new c.SideLayout(e,()=>this.get_size(),!0):void 0}initialize(){super.initialize(),"css"==this.model.render_mode&&(this.el=l.div(),this.plot_view.canvas_view.add_overlay(this.el))}remove(){null!=this.el&&l.remove(this.el),super.remove()}connect_signals(){super.connect_signals(),"css"==this.model.render_mode?this.connect(this.model.change,()=>this.render()):this.connect(this.model.change,()=>this.request_render())}render(){this.model.visible||"css"!=this.model.render_mode||l.undisplay(this.el),super.render()}_calculate_text_dimensions(e,t){const{width:r}=e.measureText(t),{height:n}=u.font_metrics(this.visuals.text.font_value());return[r,n]}_calculate_bounding_box_dimensions(e,t){const[r,n]=this._calculate_text_dimensions(e,t);let a,i;switch(e.textAlign){case"left":a=0;break;case"center":a=-r/2;break;case"right":a=-r;break;default:f.unreachable()}switch(e.textBaseline){case"top":i=0;break;case"middle":i=-.5*n;break;case"bottom":i=-1*n;break;case"alphabetic":i=-.8*n;break;case"hanging":i=-.17*n;break;case"ideographic":i=-.83*n;break;default:f.unreachable()}return[a,i,r,n]}_canvas_text(e,t,r,n,a){this.visuals.text.set_value(e);const i=this._calculate_bounding_box_dimensions(e,t);e.save(),e.beginPath(),e.translate(r,n),a&&e.rotate(a),e.rect(i[0],i[1],i[2],i[3]),this.visuals.background_fill.doit&&(this.visuals.background_fill.set_value(e),e.fill()),this.visuals.border_line.doit&&(this.visuals.border_line.set_value(e),e.stroke()),this.visuals.text.doit&&(this.visuals.text.set_value(e),e.fillText(t,0,0)),e.restore()}_css_text(e,t,r,n,a){const{el:i}=this;f.assert(null!=i),l.undisplay(i),this.visuals.text.set_value(e);const[o,s]=this._calculate_bounding_box_dimensions(e,t);i.style.position="absolute",i.style.left=`${r+o}px`,i.style.top=`${n+s}px`,i.style.color=e.fillStyle,i.style.font=e.font,i.style.lineHeight="normal",a&&(i.style.transform=`rotate(${a}rad)`),this.visuals.background_fill.doit&&(this.visuals.background_fill.set_value(e),i.style.backgroundColor=e.fillStyle),this.visuals.border_line.doit&&(this.visuals.border_line.set_value(e),i.style.borderStyle=e.lineDash.length<2?"solid":"dashed",i.style.borderWidth=`${e.lineWidth}px`,i.style.borderColor=e.strokeStyle),i.textContent=t,l.display(i)}}n.TextAnnotationView=e,e.__name__="TextAnnotationView";class d extends o.Annotation{constructor(e){super(e)}static init_TextAnnotation(){this.define(()=>({render_mode:[s.RenderMode,"canvas"]}))}}n.TextAnnotation=d,d.__name__="TextAnnotation",d.init_TextAnnotation()},function r(e,t,n,a,i){a();const o=e(141),s=e(142),l=e(8),c=Math.PI/2,u={above:{parallel:0,normal:-c,horizontal:0,vertical:-c},below:{parallel:0,normal:c,horizontal:0,vertical:c},left:{parallel:-c,normal:0,horizontal:0,vertical:-c},right:{parallel:c,normal:0,horizontal:0,vertical:c}},f={above:{parallel:"bottom",normal:"center",horizontal:"bottom",vertical:"center"},below:{parallel:"top",normal:"center",horizontal:"top",vertical:"center"},left:{parallel:"bottom",normal:"center",horizontal:"center",vertical:"bottom"},right:{parallel:"bottom",normal:"center",horizontal:"center",vertical:"bottom"}},d={above:{parallel:"center",normal:"left",horizontal:"center",vertical:"left"},below:{parallel:"center",normal:"left",horizontal:"center",vertical:"left"},left:{parallel:"center",normal:"right",horizontal:"right",vertical:"center"},right:{parallel:"center",normal:"left",horizontal:"left",vertical:"center"}},r={above:"right",below:"left",left:"right",right:"left"},h={above:"left",below:"right",left:"right",right:"left"};class p{constructor(e){this.side=e}get dimension(){return"above"==this.side||"below"==this.side?0:1}get normals(){switch(this.side){case"above":return[0,-1];case"below":return[0,1];case"left":return[-1,0];case"right":return[1,0]}}get orientation(){return this.is_horizontal?"horizontal":"vertical"}get is_horizontal(){return 0==this.dimension}get is_vertical(){return 1==this.dimension}get_label_text_heuristics(e){const{side:t}=this;return l.isString(e)?{vertical_align:f[t][e],align:d[t][e]}:{vertical_align:"center",align:(e<0?r:h)[t]}}get_label_angle_heuristic(e){return l.isString(e)?u[this.side][e]:-e}}n.Panel=p,p.__name__="Panel";class v extends s.ContentLayoutable{constructor(e,t,r=!1){super(),this.panel=e,this.get_size=t,this.rotate=r,this.panel.is_horizontal?this.set_sizing({width_policy:"max",height_policy:"fixed"}):this.set_sizing({width_policy:"fixed",height_policy:"max"})}_content_size(){const{width:e,height:t}=this.get_size();return!this.rotate||this.panel.is_horizontal?new o.Sizeable({width:e,height:t}):new o.Sizeable({width:t,height:e})}has_size_changed(){const{width:e,height:t}=this._content_size();return this.panel.is_horizontal?this.bbox.height!=t:this.bbox.width!=e}}n.SideLayout=v,v.__name__="SideLayout"},function e(t,r,n,a,i){a();const o=t(21),{min:s,max:l}=Math;class c{constructor(e={}){this.width=null!=e.width?e.width:0,this.height=null!=e.height?e.height:0}bounded_to({width:e,height:t}){return new c({width:this.width==1/0&&null!=e?e:this.width,height:this.height==1/0&&null!=t?t:this.height})}expanded_to({width:e,height:t}){return new c({width:e!=1/0?l(this.width,e):this.width,height:t!=1/0?l(this.height,t):this.height})}expand_to({width:e,height:t}){this.width=l(this.width,e),this.height=l(this.height,t)}narrowed_to({width:e,height:t}){return new c({width:s(this.width,e),height:s(this.height,t)})}narrow_to({width:e,height:t}){this.width=s(this.width,e),this.height=s(this.height,t)}grow_by({left:e,right:t,top:r,bottom:n}){const a=this.width+e+t,i=this.height+r+n;return new c({width:a,height:i})}shrink_by({left:e,right:t,top:r,bottom:n}){const a=l(this.width-e-t,0),i=l(this.height-r-n,0);return new c({width:a,height:i})}map(e,t){return new c({width:e(this.width),height:(null!=t?t:e)(this.height)})}}n.Sizeable=c,c.__name__="Sizeable",n.SizingPolicy=o.Enum("fixed","fit","min","max")},function l(e,t,r,n,a){n();const i=e(141),c=e(99),o=e(8),{min:s,max:u,round:l}=Math;class f{constructor(){this.absolute=!1,this._bbox=new c.BBox,this._inner_bbox=new c.BBox,this._dirty=!1,this._handlers=[]}*[Symbol.iterator](){}get bbox(){return this._bbox}get inner_bbox(){return this._inner_bbox}get sizing(){return this._sizing}set visible(e){this._sizing.visible=e,this._dirty=!0}set_sizing(e){var t,r,n,a,i;const o=null!==(t=e.width_policy)&&void 0!==t?t:"fit",s=e.width,l=e.min_width,c=e.max_width,u=null!==(r=e.height_policy)&&void 0!==r?r:"fit",f=e.height,d=e.min_height,h=e.max_height,p=e.aspect,v=null!==(n=e.margin)&&void 0!==n?n:{top:0,right:0,bottom:0,left:0},g=!1!==e.visible,m=null!==(a=e.halign)&&void 0!==a?a:"start",_=null!==(i=e.valign)&&void 0!==i?i:"start";this._sizing={width_policy:o,min_width:l,width:s,max_width:c,height_policy:u,min_height:d,height:f,max_height:h,aspect:p,margin:v,visible:g,halign:m,valign:_,size:{width:s,height:f}},this._init()}_init(){}_set_geometry(e,t){this._bbox=e,this._inner_bbox=t}set_geometry(e,t){this._set_geometry(e,null!=t?t:e);for(const e of this._handlers)e(this._bbox,this._inner_bbox)}on_resize(e){this._handlers.push(e)}is_width_expanding(){return"max"==this.sizing.width_policy}is_height_expanding(){return"max"==this.sizing.height_policy}apply_aspect(a,{width:i,height:o}){const{aspect:s}=this.sizing;if(null!=s){const{width_policy:e,height_policy:t}=this.sizing,r=(e,t)=>{const r={max:4,fit:3,min:2,fixed:1};return r[e]>r[t]};if("fixed"!=e&&"fixed"!=t)if(e==t){const e=i,t=l(i/s),r=l(o*s),n=o;Math.abs(a.width-e)+Math.abs(a.height-t)<=Math.abs(a.width-r)+Math.abs(a.height-n)?(i=e,o=t):(i=r,o=n)}else r(e,t)?o=l(i/s):i=l(o*s);else"fixed"==e?o=l(i/s):"fixed"==t&&(i=l(o*s))}return{width:i,height:o}}measure(e){if(!this.sizing.visible)return{width:0,height:0};const t=new i.Sizeable(e).shrink_by(this.sizing.margin).map(e=>e==1/0&&"fixed"==this.sizing.width_policy&&null!=this.sizing.width?this.sizing.width:e,e=>e==1/0&&"fixed"==this.sizing.height_policy&&null!=this.sizing.height?this.sizing.height:e),r=this._measure(t),n=this.clip_size(r,t),a=this.apply_aspect(t,n);return Object.assign(Object.assign({},r),a)}compute(t={}){const r={width:null!=t.width&&this.is_width_expanding()?t.width:1/0,height:null!=t.height&&this.is_height_expanding()?t.height:1/0},n=this.measure(r),{width:a,height:i}=n,o=new c.BBox({left:0,top:0,width:a,height:i});let s;if(null!=n.inner){const{left:t,top:r,right:o,bottom:e}=n.inner;s=new c.BBox({left:t,top:r,right:a-o,bottom:i-e})}this.set_geometry(o,s)}get xview(){return this.bbox.xview}get yview(){return this.bbox.yview}clip_size(e,t){function r(e,t,r,n){return null==r?r=0:o.isNumber(r)||(r=Math.round(r.percent*t)),null==n?n=1/0:o.isNumber(n)||(n=Math.round(n.percent*t)),u(r,s(e,n))}return{width:r(e.width,t.width,this.sizing.min_width,this.sizing.max_width),height:r(e.height,t.height,this.sizing.min_height,this.sizing.max_height)}}has_size_changed(){const{_dirty:e}=this;return this._dirty=!1,e}}r.Layoutable=f,f.__name__="Layoutable";class d extends f{_measure(t){const{width_policy:r,height_policy:n}=this.sizing;return{width:(()=>{const{width:e}=this.sizing;if(t.width==1/0)return null!=e?e:0;switch(r){case"fixed":return null!=e?e:0;case"min":return null!=e?s(t.width,e):0;case"fit":return null!=e?s(t.width,e):t.width;case"max":return null!=e?u(t.width,e):t.width}})(),height:(()=>{const{height:e}=this.sizing;if(t.height==1/0)return null!=e?e:0;switch(n){case"fixed":return null!=e?e:0;case"min":return null!=e?s(t.height,e):0;case"fit":return null!=e?s(t.height,e):t.height;case"max":return null!=e?u(t.height,e):t.height}})()}}}r.LayoutItem=d,d.__name__="LayoutItem";class h extends f{_measure(e){const t=this._content_size(),r=e.bounded_to(this.sizing.size).bounded_to(t);return{width:(()=>{switch(this.sizing.width_policy){case"fixed":return null!=this.sizing.width?this.sizing.width:t.width;case"min":return t.width;case"fit":return r.width;case"max":return Math.max(t.width,r.width)}})(),height:(()=>{switch(this.sizing.height_policy){case"fixed":return null!=this.sizing.height?this.sizing.height:t.height;case"min":return t.height;case"fit":return r.height;case"max":return Math.max(t.height,r.height)}})()}}}r.ContentLayoutable=h,h.__name__="ContentLayoutable"},function e(t,r,n,a,i){a();const c=t(11),o=(()=>{try{return"undefined"!=typeof OffscreenCanvas&&null!=new OffscreenCanvas(0,0).getContext("2d")}catch(e){return!1}})()?(e,t)=>new OffscreenCanvas(e,t):(e,t)=>{const r=document.createElement("canvas");return r.width=e,r.height=t,r},s=(()=>{const l=o(0,0).getContext("2d");return e=>{l.font=e;const t=l.measureText("M"),r=l.measureText("x"),n=l.measureText("g|"),a=n.fontBoundingBoxAscent,i=n.fontBoundingBoxDescent;if(null!=a&&null!=i)return{height:a+i,ascent:a,descent:i,cap_height:t.actualBoundingBoxAscent,x_height:r.actualBoundingBoxAscent};const o=n.actualBoundingBoxAscent,s=n.actualBoundingBoxDescent;if(null!=o&&null!=s)return{height:o+s,ascent:o,descent:s,cap_height:t.actualBoundingBoxAscent,x_height:r.actualBoundingBoxAscent};c.unreachable()}})(),l=(()=>{const i=o(0,0).getContext("2d");return(e,t)=>{i.font=t;const r=i.measureText(e),n=r.actualBoundingBoxAscent,a=r.actualBoundingBoxDescent;if(null!=n&&null!=a)return{width:r.width,height:n+a,ascent:n,descent:a};c.unreachable()}})(),u=(()=>{const v=document.createElement("canvas"),g=v.getContext("2d");let m=-1,_=-1;return(e,t=1)=>{g.font=e;const{width:r}=g.measureText("M"),n=r*t,a=Math.ceil(n),i=Math.ceil(2*n),o=Math.ceil(1.5*n);m<a&&(m=a,v.width=a),_<i&&(_=i,v.height=i),g.save(),g.scale(t,t),g.fillStyle="#f00",g.fillRect(0,0,a,i);const s=r=>{let n=0;for(let t=0;t<=o;t++)for(let e=0;e<a;e++,n+=4)if(255!=r[n])return o-t;return 0};g.font=e,g.fillStyle="#000";for(const v of"xa")g.fillText(v,0,o/t);const{data:l}=g.getImageData(0,0,a,i),c=s(l)/t;for(const v of"ASQ")g.fillText(v,0,o/t);const{data:u}=g.getImageData(0,0,a,i),f=s(u)/t;for(const v of"gy")g.fillText(v,0,o/t);const{data:d}=g.getImageData(0,0,a,i),h=s(d)/t,p=(r=>{let n=r.length-4;for(let t=i;t>=o;t--)for(let e=0;e<a;e++,n-=4)if(255!=r[n])return t-o;return 0})(d)/t;return g.restore(),{height:h+p,ascent:h,cap_height:f,x_height:c,descent:p}}})(),f=(()=>{const d=document.createElement("canvas"),h=d.getContext("2d");let p=-1,v=-1;return(e,t,r=1)=>{h.font=t;const{width:n}=h.measureText("M"),a=n*r,i=Math.ceil(a),o=Math.ceil(2*a),s=Math.ceil(1.5*a);(p<i||v<o)&&(p=i,d.width=i,v=o,d.height=o),h.save(),h.scale(r,r),h.fillStyle="#f00",h.fillRect(0,0,i,o);h.font=t,h.fillStyle="#000",h.fillText(e,0,s/r);const l=h.measureText(e),{data:c}=h.getImageData(0,0,i,o),u=(r=>{let n=0;for(let t=0;t<=s;t++)for(let e=0;e<i;e++,n+=4)if(255!=r[n])return s-t;return 0})(c)/r,f=(r=>{let n=r.length-4;for(let t=o;t>=s;t--)for(let e=0;e<i;e++,n-=4)if(255!=r[n])return t-s;return 0})(c)/r;return h.restore(),{width:l.width,height:u+f,ascent:u,descent:f}}})(),d=(()=>{try{return s("normal 10px sans-serif"),s}catch(e){return u}})(),h=(()=>{try{return l("A","normal 10px sans-serif"),l}catch(e){return f}})(),p=new Map;function v(e){let t=p.get(e);return null==t&&(t={font:d(e),glyphs:new Map},p.set(e,t)),t.font}n.font_metrics=v,n.glyph_metrics=function(e,t){let r=p.get(t);null==r&&(v(t),r=p.get(t));let n=r.glyphs.get(e);return null==n&&(n=h(e,t),r.glyphs.set(e,n)),n}},function e(t,r,n,e,a){e();const o=t(145),s=t(157),i=t(156),l=t(159),c=t(104),u=t(99),f=t(13),d=t(11);class h{constructor(e,t,r,n,a={},i={}){this.in_x_scale=e,this.in_y_scale=t,this.x_range=r,this.y_range=n,this.extra_x_ranges=a,this.extra_y_ranges=i,this._bbox=new u.BBox,d.assert(null==e.source_range&&null==e.target_range),d.assert(null==t.source_range&&null==t.target_range),this._configure_scales()}get bbox(){return this._bbox}_get_ranges(e,t){return new Map(f.entries(Object.assign(Object.assign({},t),{default:e})))}_get_scales(r,n,a){const i=new Map;for(const[e,t]of n){if(t instanceof c.FactorRange!=r instanceof o.CategoricalScale)throw new Error(`Range ${t.type} is incompatible is Scale ${r.type}`);r instanceof s.LogScale&&t instanceof l.DataRange1d&&(t.scale_hint="log");const n=r.clone();n.setv({source_range:t,target_range:a}),i.set(e,n)}return i}_configure_frame_ranges(){const{bbox:e}=this;this._x_target=new i.Range1d({start:e.left,end:e.right}),this._y_target=new i.Range1d({start:e.bottom,end:e.top})}_configure_scales(){this._configure_frame_ranges(),this._x_ranges=this._get_ranges(this.x_range,this.extra_x_ranges),this._y_ranges=this._get_ranges(this.y_range,this.extra_y_ranges),this._x_scales=this._get_scales(this.in_x_scale,this._x_ranges,this._x_target),this._y_scales=this._get_scales(this.in_y_scale,this._y_ranges,this._y_target)}_update_scales(){this._configure_frame_ranges();for(const[,e]of this._x_scales)e.target_range=this._x_target;for(const[,e]of this._y_scales)e.target_range=this._y_target}set_geometry(e){this._bbox=e,this._update_scales()}get x_target(){return this._x_target}get y_target(){return this._y_target}get x_ranges(){return this._x_ranges}get y_ranges(){return this._y_ranges}get x_scales(){return this._x_scales}get y_scales(){return this._y_scales}get x_scale(){return this._x_scales.get("default")}get y_scale(){return this._y_scales.get("default")}get xscales(){return f.to_object(this.x_scales)}get yscales(){return f.to_object(this.y_scales)}}n.CartesianFrame=h,h.__name__="CartesianFrame"},function e(t,r,n,a,e){a();const i=t(146);class o extends i.Scale{constructor(e){super(e)}get s_compute(){const[t,r]=this._linear_compute_state(),n=this.source_range;return e=>t*n.synthetic(e)+r}compute(e){return super._linear_compute(this.source_range.synthetic(e))}v_compute(e){return super._linear_v_compute(this.source_range.v_synthetic(e))}invert(e){return this._linear_invert(e)}v_invert(e){return this._linear_v_invert(e)}}n.CategoricalScale=o,o.__name__="CategoricalScale"},function t(e,r,n,a,i){a();const o=e(147),t=e(105),s=e(156),l=e(24);class c extends o.Transform{constructor(e){super(e)}static init_Scale(){this.internal(({Ref:e})=>({source_range:[e(t.Range)],target_range:[e(s.Range1d)]}))}r_compute(e,t){return this.target_range.is_reversed?[this.compute(t),this.compute(e)]:[this.compute(e),this.compute(t)]}r_invert(e,t){return this.target_range.is_reversed?[this.invert(t),this.invert(e)]:[this.invert(e),this.invert(t)]}_linear_compute(e){const[t,r]=this._linear_compute_state();return t*e+r}_linear_v_compute(t){const[r,n]=this._linear_compute_state(),a=new l.ScreenArray(t.length);for(let e=0;e<t.length;e++)a[e]=r*t[e]+n;return a}_linear_invert(e){const[t,r]=this._linear_compute_state();return(e-r)/t}_linear_v_invert(t){const[r,n]=this._linear_compute_state(),a=new Float64Array(t.length);for(let e=0;e<t.length;e++)a[e]=(t[e]-n)/r;return a}_linear_compute_state(){const e=this.source_range.start,t=this.source_range.end,r=this.target_range.start,n=(this.target_range.end-r)/(t-e);return[n,-n*e+r]}}n.Scale=c,c.__name__="Scale",c.init_Scale()},function e(t,r,n,a,i){a(),i("CustomJSTransform",t(148).CustomJSTransform),i("Dodge",t(150).Dodge),i("Interpolator",t(152).Interpolator),i("Jitter",t(153).Jitter),i("LinearInterpolator",t(154).LinearInterpolator),i("StepInterpolator",t(155).StepInterpolator),i("Transform",t(149).Transform)},function e(t,r,n,a,i){a();const o=t(149),s=t(13),l=t(34);class c extends o.Transform{constructor(e){super(e)}static init_CustomJSTransform(){this.define(({Unknown:e,String:t,Dict:r})=>({args:[r(e),{}],func:[t,""],v_func:[t,""]}))}get names(){return s.keys(this.args)}get values(){return s.values(this.args)}_make_transform(e,t){return new Function(...this.names,e,l.use_strict(t))}get scalar_transform(){return this._make_transform("x",this.func)}get vector_transform(){return this._make_transform("xs",this.v_func)}compute(e){return this.scalar_transform(...this.values,e)}v_compute(e){return this.vector_transform(...this.values,e)}}n.CustomJSTransform=c,c.__name__="CustomJSTransform",c.init_CustomJSTransform()},function e(t,r,n,a,i){a();const o=t(53);class s extends o.Model{constructor(e){super(e)}}n.Transform=s,s.__name__="Transform"},function e(t,r,n,a,i){a();const o=t(151);class s extends o.RangeTransform{constructor(e){super(e)}static init_Dodge(){this.define(({Number:e})=>({value:[e,0]}))}_compute(e){return e+this.value}}n.Dodge=s,s.__name__="Dodge",s.init_Dodge()},function e(t,r,n,a,i){a();const o=t(149),s=t(105),l=t(104),c=t(24),u=t(8);class f extends o.Transform{constructor(e){super(e)}static init_RangeTransform(){this.define(({Ref:e,Nullable:t})=>({range:[t(e(s.Range)),null]}))}v_compute(e){let r;if(this.range instanceof l.FactorRange)r=this.range.v_synthetic(e);else{if(!u.isArrayableOf(e,u.isNumber))throw new Error("unexpected");r=e}const n=new(c.infer_type(r))(r.length);for(let t=0;t<r.length;t++){const e=r[t];n[t]=this._compute(e)}return n}compute(e){if(this.range instanceof l.FactorRange)return this._compute(this.range.synthetic(e));if(u.isNumber(e))return this._compute(e);throw new Error("unexpected")}}n.RangeTransform=f,f.__name__="RangeTransform",f.init_RangeTransform()},function e(t,r,n,a,i){a();const o=t(149),s=t(57),l=t(24),c=t(9),u=t(8);class f extends o.Transform{constructor(e){super(e),this._sorted_dirty=!0}static init_Interpolator(){this.define(({Boolean:e,Number:t,String:r,Ref:n,Array:a,Or:i,Nullable:o})=>({x:[i(r,a(t))],y:[i(r,a(t))],data:[o(n(s.ColumnarDataSource)),null],clip:[e,!0]}))}connect_signals(){super.connect_signals(),this.connect(this.change,()=>this._sorted_dirty=!0)}v_compute(r){const n=new(l.infer_type(r))(r.length);for(let t=0;t<r.length;t++){const e=r[t];n[t]=this.compute(e)}return n}sort(e=!1){if(!this._sorted_dirty)return;let r,t;if(u.isString(this.x)&&u.isString(this.y)&&null!=this.data){const e=this.data.columns();if(!c.includes(e,this.x))throw new Error("The x parameter does not correspond to a valid column name defined in the data parameter");if(!c.includes(e,this.y))throw new Error("The y parameter does not correspond to a valid column name defined in the data parameter");r=this.data.get_column(this.x),t=this.data.get_column(this.y)}else{if(!u.isArray(this.x)||!u.isArray(this.y))throw new Error("parameters 'x' and 'y' must be both either string fields or arrays");r=this.x,t=this.y}if(r.length!==t.length)throw new Error("The length for x and y do not match");if(r.length<2)throw new Error("x and y must have at least two elements to support interpolation");const n=r.length,a=new Uint32Array(n);for(let e=0;e<n;e++)a[e]=e;const i=e?-1:1;a.sort((e,t)=>i*(r[e]-r[t])),this._x_sorted=new(l.infer_type(r))(n),this._y_sorted=new(l.infer_type(t))(n);for(let e=0;e<n;e++)this._x_sorted[e]=r[a[e]],this._y_sorted[e]=t[a[e]];this._sorted_dirty=!1}}n.Interpolator=f,f.__name__="Interpolator",f.init_Interpolator()},function e(t,r,n,a,i){a();const o=t(1),s=t(151),l=t(20),c=o.__importStar(t(10));class u extends s.RangeTransform{constructor(e){super(e)}static init_Jitter(){this.define(({Number:e})=>({mean:[e,0],width:[e,1],distribution:[l.Distribution,"uniform"]}))}v_compute(e){return null!=this.previous_values&&this.previous_values.length==e.length||(this.previous_values=super.v_compute(e)),this.previous_values}_compute(e){switch(this.distribution){case"uniform":return e+this.mean+(c.random()-.5)*this.width;case"normal":return e+c.rnorm(this.mean,this.width)}}}n.Jitter=u,u.__name__="Jitter",u.init_Jitter()},function e(t,r,e,n,a){n();const o=t(9),i=t(152);class s extends i.Interpolator{constructor(e){super(e)}compute(t){if(this.sort(!1),this.clip){if(t<this._x_sorted[0]||t>this._x_sorted[this._x_sorted.length-1])return NaN}else{if(t<this._x_sorted[0])return this._y_sorted[0];if(t>this._x_sorted[this._x_sorted.length-1])return this._y_sorted[this._y_sorted.length-1]}if(t==this._x_sorted[0])return this._y_sorted[0];const e=o.find_last_index(this._x_sorted,e=>e<t),r=this._x_sorted[e],n=this._x_sorted[e+1],a=this._y_sorted[e],i=this._y_sorted[e+1];return a+(t-r)/(n-r)*(i-a)}}e.LinearInterpolator=s,s.__name__="LinearInterpolator"},function e(t,r,n,a,i){a();const o=t(152),e=t(20),s=t(9);class l extends o.Interpolator{constructor(e){super(e)}static init_StepInterpolator(){this.define(()=>({mode:[e.StepMode,"after"]}))}compute(r){if(this.sort(!1),this.clip){if(r<this._x_sorted[0]||r>this._x_sorted[this._x_sorted.length-1])return NaN}else{if(r<this._x_sorted[0])return this._y_sorted[0];if(r>this._x_sorted[this._x_sorted.length-1])return this._y_sorted[this._y_sorted.length-1]}let n;switch(this.mode){case"after":n=s.find_last_index(this._x_sorted,e=>r>=e);break;case"before":n=s.find_index(this._x_sorted,e=>r<=e);break;case"center":{const e=s.map(this._x_sorted,e=>Math.abs(e-r)),t=s.min(e);n=s.find_index(e,e=>t===e);break}default:throw new Error(`unknown mode: ${this.mode}`)}return-1!=n?this._y_sorted[n]:NaN}}n.StepInterpolator=l,l.__name__="StepInterpolator",l.init_StepInterpolator()},function e(t,r,n,a,i){a();const o=t(105);class s extends o.Range{constructor(e){super(e)}static init_Range1d(){this.define(({Number:e,Nullable:t})=>({start:[e,0],end:[e,1],reset_start:[t(e),null,{on_update(e,t){t._reset_start=null!=e?e:t.start}}],reset_end:[t(e),null,{on_update(e,t){t._reset_end=null!=e?e:t.end}}]}))}_set_auto_bounds(){if("auto"==this.bounds){const e=Math.min(this._reset_start,this._reset_end),t=Math.max(this._reset_start,this._reset_end);this.setv({bounds:[e,t]},{silent:!0})}}initialize(){super.initialize(),this._set_auto_bounds()}get min(){return Math.min(this.start,this.end)}get max(){return Math.max(this.start,this.end)}reset(){this._set_auto_bounds();const{_reset_start:e,_reset_end:t}=this;this.start!=e||this.end!=t?this.setv({start:e,end:t}):this.change.emit()}map(e){return new s({start:e(this.start),end:e(this.end)})}widen(e){let{start:t,end:r}=this;return this.is_reversed?(t+=e,r-=e):(t-=e,r+=e),new s({start:t,end:r})}}n.Range1d=s,s.__name__="Range1d",s.init_Range1d()},function e(t,r,n,a,i){a();const o=t(158),c=t(24);class s extends o.ContinuousScale{constructor(e){super(e)}get s_compute(){const[r,n,a,i]=this._compute_state();return t=>{if(0==a)return 0;{const e=(Math.log(t)-i)/a;return isFinite(e)?e*r+n:NaN}}}compute(t){const[r,n,a,i]=this._compute_state();let o;if(0==a)o=0;else{const e=(Math.log(t)-i)/a;o=isFinite(e)?e*r+n:NaN}return o}v_compute(n){const[a,i,o,s]=this._compute_state(),l=new c.ScreenArray(n.length);if(0==o)for(let e=0;e<n.length;e++)l[e]=0;else for(let r=0;r<n.length;r++){const e=(Math.log(n[r])-s)/o;let t;t=isFinite(e)?e*a+i:NaN,l[r]=t}return l}invert(e){const[t,r,n,a]=this._compute_state(),i=(e-r)/t;return Math.exp(n*i+a)}v_invert(r){const[n,a,i,o]=this._compute_state(),s=new Float64Array(r.length);for(let t=0;t<r.length;t++){const e=(r[t]-a)/n;s[t]=Math.exp(i*e+o)}return s}_get_safe_factor(e,t){let r=e<0?0:e,n=t<0?0:t;if(r==n)if(0==r)[r,n]=[1,10];else{const e=Math.log(r)/Math.log(10);r=10**Math.floor(e),n=Math.ceil(e)!=Math.floor(e)?10**Math.ceil(e):10**(Math.ceil(e)+1)}return[r,n]}_compute_state(){const e=this.source_range.start,t=this.source_range.end,r=this.target_range.start,n=this.target_range.end-r,[a,i]=this._get_safe_factor(e,t);let o,s;0==a?(o=Math.log(i),s=0):(o=Math.log(i)-Math.log(a),s=Math.log(a));return[n,r,o,s]}}n.LogScale=s,s.__name__="LogScale"},function e(t,r,n,a,i){a();const o=t(146);class s extends o.Scale{constructor(e){super(e)}}n.ContinuousScale=s,s.__name__="ContinuousScale"},function n(e,t,r,a,i){a();const o=e(1),s=e(160),n=e(20),l=e(9),c=e(19),u=o.__importStar(e(99)),f=e(161);class d extends s.DataRange{constructor(e){super(e),this.have_updated_interactively=!1}static init_DataRange1d(){this.define(({Boolean:e,Number:t,Nullable:r})=>({start:[t],end:[t],range_padding:[t,.1],range_padding_units:[n.PaddingUnits,"percent"],flipped:[e,!1],follow:[r(n.StartEnd),null],follow_interval:[r(t),null],default_span:[t,2],only_visible:[e,!1]})),this.internal(({Enum:e})=>({scale_hint:[e("log","auto"),"auto"]}))}initialize(){super.initialize(),this._initial_start=this.start,this._initial_end=this.end,this._initial_range_padding=this.range_padding,this._initial_range_padding_units=this.range_padding_units,this._initial_follow=this.follow,this._initial_follow_interval=this.follow_interval,this._initial_default_span=this.default_span,this._plot_bounds=new Map}get min(){return Math.min(this.start,this.end)}get max(){return Math.max(this.start,this.end)}computed_renderers(){const{renderers:e,names:t}=this,r=l.concat(this.plots.map(e=>e.data_renderers));return f.compute_renderers(0==e.length?"auto":e,r,t)}_compute_plot_bounds(t,r){let n=u.empty();for(const e of t){const t=r.get(e);null==t||!e.visible&&this.only_visible||(n=u.union(n,t))}return n}adjust_bounds_for_aspect(e,t){const r=u.empty();let n=e.x1-e.x0;n<=0&&(n=1);let a=e.y1-e.y0;a<=0&&(a=1);const i=.5*(e.x1+e.x0),o=.5*(e.y1+e.y0);return n<t*a?n=t*a:a=n/t,r.x1=i+.5*n,r.x0=i-.5*n,r.y1=o+.5*a,r.y0=o-.5*a,r}_compute_min_max(e,t){let r,n,a=u.empty();for(const t of e)a=u.union(a,t);return[r,n]=0==t?[a.x0,a.x1]:[a.y0,a.y1],[r,n]}_compute_range(a,i){const o=this.range_padding;let t,s;if(null!=this._initial_start&&(a=this._initial_start),null!=this._initial_end&&(i=this._initial_end),"log"==this.scale_hint){let r,n;if((isNaN(a)||!isFinite(a)||a<=0)&&(a=isNaN(i)||!isFinite(i)||i<=0?.1:i/100,c.logger.warn(`could not determine minimum data value for log axis, DataRange1d using value ${a}`)),(isNaN(i)||!isFinite(i)||i<=0)&&(i=isNaN(a)||!isFinite(a)||a<=0?10:100*a,c.logger.warn(`could not determine maximum data value for log axis, DataRange1d using value ${i}`)),i==a)n=this.default_span+.001,r=Math.log(a)/Math.log(10);else{let e,t;"percent"==this.range_padding_units?(e=Math.log(a)/Math.log(10),t=Math.log(i)/Math.log(10),n=(t-e)*(1+o)):(e=Math.log(a-o)/Math.log(10),t=Math.log(i+o)/Math.log(10),n=t-e),r=(e+t)/2}t=10**(r-n/2),s=10**(r+n/2)}else{let e;e=i==a?this.default_span:"percent"==this.range_padding_units?(i-a)*(1+o):i-a+2*o;const r=(i+a)/2;t=r-e/2,s=r+e/2}let e=1;this.flipped&&([t,s]=[s,t],e=-1);const r=this.follow_interval;return null!=r&&Math.abs(t-s)>r&&("start"==this.follow?s=t+e*r:"end"==this.follow&&(t=s-e*r)),[t,s]}update(e,t,r,n){if(this.have_updated_interactively)return;const a=this.computed_renderers();let i=this._compute_plot_bounds(a,e);null!=n&&(i=this.adjust_bounds_for_aspect(i,n)),this._plot_bounds.set(r,i);const[o,s]=this._compute_min_max(this._plot_bounds.values(),t);let[l,c]=this._compute_range(o,s);null!=this._initial_start&&("log"==this.scale_hint?this._initial_start>0&&(l=this._initial_start):l=this._initial_start),null!=this._initial_end&&("log"==this.scale_hint?this._initial_end>0&&(c=this._initial_end):c=this._initial_end);let u=!1;"auto"==this.bounds&&(this.setv({bounds:[l,c]},{silent:!0}),u=!0);const[f,d]=[this.start,this.end];if(l!=f||c!=d){const e={};l!=f&&(e.start=l),c!=d&&(e.end=c),this.setv(e),u=!1}u&&this.change.emit()}reset(){this.have_updated_interactively=!1,this.setv({range_padding:this._initial_range_padding,range_padding_units:this._initial_range_padding_units,follow:this._initial_follow,follow_interval:this._initial_follow_interval,default_span:this._initial_default_span},{silent:!0}),this.change.emit()}}r.DataRange1d=d,d.__name__="DataRange1d",d.init_DataRange1d()},function e(t,r,n,a,i){a();const o=t(105),s=t(62);class l extends o.Range{constructor(e){super(e)}static init_DataRange(){this.define(({String:e,Array:t,Ref:r})=>({names:[t(e),[]],renderers:[t(r(s.DataRenderer)),[]]}))}}n.DataRange=l,l.__name__="DataRange",l.init_DataRange()},function e(t,r,n,a,i){a();const o=t(9);n.compute_renderers=function(e,t,r){if(null==e)return[];let n="auto"==e?t:e;return r.length>0&&(n=n.filter(e=>o.includes(r,e.name))),n}},function e(t,r,n,a,i){a(),i("Axis",t(163).Axis),i("CategoricalAxis",t(170).CategoricalAxis),i("ContinuousAxis",t(173).ContinuousAxis),i("DatetimeAxis",t(174).DatetimeAxis),i("LinearAxis",t(175).LinearAxis),i("LogAxis",t(192).LogAxis),i("MercatorAxis",t(195).MercatorAxis)},function u(e,t,r,n,a){n();const i=e(1),o=e(164),f=e(165),d=e(166),u=e(169),s=i.__importStar(e(48)),h=e(20),C=e(24),l=e(140),c=e(9),p=e(8),L=e(167),v=e(104),{abs:g}=Math;class m extends o.GuideRendererView{update_layout(){this.layout=new l.SideLayout(this.panel,()=>this.get_size(),!0)}get_size(){const{visible:e,fixed_location:t}=this.model;if(e&&null==t&&this.is_renderable){const{extents:e}=this;return{width:0,height:Math.round(e.tick+e.tick_label+e.axis_label)}}return{width:0,height:0}}get is_renderable(){const[e,t]=this.ranges;return e.is_valid&&t.is_valid}_render(){var e;if(!this.is_renderable)return;const{tick_coords:t,extents:r}=this,n=this.layer.ctx;n.save(),this._draw_rule(n,r),this._draw_major_ticks(n,r,t),this._draw_minor_ticks(n,r,t),this._draw_major_labels(n,r,t),this._draw_axis_label(n,r,t),null===(e=this._paint)||void 0===e||e.call(this,n,r,t),n.restore()}connect_signals(){super.connect_signals(),this.connect(this.model.change,()=>this.plot_view.request_layout())}get needs_clip(){return null!=this.model.fixed_location}_draw_rule(t,e){if(!this.visuals.axis_line.doit)return;const[r,n]=this.rule_coords,[a,i]=this.coordinates.map_to_screen(r,n),[o,s]=this.normals,[l,c]=this.offsets;this.visuals.axis_line.set_value(t),t.beginPath();for(let e=0;e<a.length;e++){const r=Math.round(a[e]+o*l),n=Math.round(i[e]+s*c);t.lineTo(r,n)}t.stroke()}_draw_major_ticks(e,t,r){const n=this.model.major_tick_in,a=this.model.major_tick_out,i=this.visuals.major_tick_line;this._draw_ticks(e,r.major,n,a,i)}_draw_minor_ticks(e,t,r){const n=this.model.minor_tick_in,a=this.model.minor_tick_out,i=this.visuals.minor_tick_line;this._draw_ticks(e,r.minor,n,a,i)}_draw_major_labels(e,t,r){const n=r.major,a=this.compute_labels(n[this.dimension]),i=this.model.major_label_orientation,o=t.tick+this.model.major_label_standoff,s=this.visuals.major_label_text;this._draw_oriented_labels(e,a,n,i,this.panel.side,o,s)}_axis_label_extent(){const e=this.model.axis_label;if(!e)return 0;const t=new L.TextBox({text:e});t.angle=this.panel.get_label_angle_heuristic("parallel"),t.visuals=this.visuals.axis_label_text;const r=t.size(),n=0==this.dimension?r.height:r.width,a=this.model.axis_label_standoff;return n>0?a+n+3:0}_draw_axis_label(e,t,r){const n=this.model.axis_label;if(!n||null!=this.model.fixed_location)return;const a=new L.TextBox({text:n});a.angle=this.panel.get_label_angle_heuristic("parallel"),a.visuals=this.visuals.axis_label_text;const[i,o]=(()=>{const{bbox:e}=this.layout;switch(this.panel.side){case"above":return[e.hcenter,e.bottom];case"below":return[e.hcenter,e.top];case"left":return[e.right,e.vcenter];case"right":return[e.left,e.vcenter]}})(),[s,l]=this.normals,c=t.tick+t.tick_label+this.model.axis_label_standoff,{vertical_align:u,align:f}=this.panel.get_label_text_heuristics("parallel");a.position={sx:i+s*c,sy:o+l*c,x_anchor:f,y_anchor:u},a.align=f,a.paint(e)}_draw_ticks(t,e,r,n,a){if(!a.doit)return;const[i,o]=e,[s,l]=this.coordinates.map_to_screen(i,o),[c,u]=this.normals,[f,d]=this.offsets,[h,p]=[c*(f-r),u*(d-r)],[v,g]=[c*(f+n),u*(d+n)];a.set_value(t),t.beginPath();for(let e=0;e<s.length;e++){const r=Math.round(s[e]+v),n=Math.round(l[e]+g),a=Math.round(s[e]+h),i=Math.round(l[e]+p);t.moveTo(r,n),t.lineTo(a,i)}t.stroke()}_draw_oriented_labels(a,t,r,e,n,i,o){if(!o.doit||0==t.length)return;const[s,l]=r,[c,u]=this.coordinates.map_to_screen(s,l),[f,d]=this.offsets,[h,p]=this.normals,v=h*(f+i),g=p*(d+i),{vertical_align:m,align:_}=this.panel.get_label_text_heuristics(e),y=this.panel.get_label_angle_heuristic(e);t.visuals=o,t.angle=y;for(let e=0;e<t.length;e++){const r=t.items[e];r.position={sx:c[e]+v,sy:u[e]+g,x_anchor:_,y_anchor:m},r instanceof L.TextBox&&(r.align=_)}const b=t.length,x=C.Indices.all_set(b),{items:w}=t,A=w.map(e=>e.bbox()),T=(()=>{const[e]=this.ranges;return e.is_reversed?0==this.dimension?(e,t)=>A[e].left-A[t].right:(e,t)=>A[t].top-A[e].bottom:0==this.dimension?(e,t)=>A[t].left-A[e].right:(e,t)=>A[e].top-A[t].bottom})(),{major_label_policy:k}=this.model,M=k.filter(x,A,T),S=[...M.ones()];if(0!=S.length){const a=this.parent.canvas_view.bbox,t=r=>{const n=A[r];if(n.left<0){const a=-n.left,{position:e}=w[r];w[r].position=Object.assign(Object.assign({},e),{sx:e.sx+a})}else if(n.right>a.width){const e=n.right-a.width,{position:t}=w[r];w[r].position=Object.assign(Object.assign({},t),{sx:t.sx-e})}},r=r=>{const n=A[r];if(n.top<0){const a=-n.top,{position:e}=w[r];w[r].position=Object.assign(Object.assign({},e),{sy:e.sy+a})}else if(n.bottom>a.height){const e=n.bottom-a.height,{position:t}=w[r];w[r].position=Object.assign(Object.assign({},t),{sy:t.sy-e})}},e=S[0],n=S[S.length-1];0==this.dimension?(t(e),t(n)):(r(e),r(n))}for(const t of M){w[t].paint(a)}}_tick_extent(){return this.model.major_tick_out}_tick_label_extents(){const e=this.tick_coords.major,t=this.compute_labels(e[this.dimension]),r=this.model.major_label_orientation,n=this.model.major_label_standoff,a=this.visuals.major_label_text;return[this._oriented_labels_extent(t,r,n,a)]}get extents(){const e=this._tick_label_extents();return{tick:this._tick_extent(),tick_labels:e,tick_label:c.sum(e),axis_label:this._axis_label_extent()}}_oriented_labels_extent(e,t,r,n){if(0==e.length)return 0;const a=this.panel.get_label_angle_heuristic(t);e.visuals=n,e.angle=a;const i=e.max_size(),o=0==this.dimension?i.height:i.width;return o>0?r+o+3:0}get normals(){return this.panel.normals}get dimension(){return this.panel.dimension}compute_labels(r){const n=this.model.formatter.format_graphics(r,this),{major_label_overrides:a}=this.model;for(let t=0;t<r.length;t++){const e=a[r[t]];null!=e&&(n[t]=new L.TextBox({text:e}))}return new L.GraphicsBoxes(n)}get offsets(){if(null!=this.model.fixed_location)return[0,0];const{frame:e}=this.plot_view;let[t,r]=[0,0];switch(this.panel.side){case"below":r=g(this.layout.bbox.top-e.bbox.bottom);break;case"above":r=g(this.layout.bbox.bottom-e.bbox.top);break;case"right":t=g(this.layout.bbox.left-e.bbox.right);break;case"left":t=g(this.layout.bbox.right-e.bbox.left)}return[t,r]}get ranges(){const e=this.dimension,t=(e+1)%2,{ranges:r}=this.coordinates;return[r[e],r[t]]}get computed_bounds(){const[e]=this.ranges,l=this.model.bounds,c=[e.min,e.max];if("auto"==l)return[e.min,e.max];{let e,t;const[r,n]=l,[a,i]=c,{min:o,max:s}=Math;return g(r-n)>g(a-i)?(e=s(o(r,n),a),t=o(s(r,n),i)):(e=o(r,n),t=s(r,n)),[e,t]}}get rule_coords(){const e=this.dimension,t=(e+1)%2,[r]=this.ranges,[n,a]=this.computed_bounds,i=[new Array(2),new Array(2)];return i[e][0]=Math.max(n,r.min),i[e][1]=Math.min(a,r.max),i[e][0]>i[e][1]&&(i[e][0]=i[e][1]=NaN),i[t][0]=this.loc,i[t][1]=this.loc,i}get tick_coords(){const t=this.dimension,r=(t+1)%2,[e]=this.ranges,[n,a]=this.computed_bounds,i=this.model.ticker.get_ticks(n,a,e,this.loc),o=i.major,s=i.minor,l=[[],[]],c=[[],[]],[u,f]=[e.min,e.max];for(let e=0;e<o.length;e++)o[e]<u||o[e]>f||(l[t].push(o[e]),l[r].push(this.loc));for(let e=0;e<s.length;e++)s[e]<u||s[e]>f||(c[t].push(s[e]),c[r].push(this.loc));return{major:l,minor:c}}get loc(){const{fixed_location:e}=this.model;if(null!=e){if(p.isNumber(e))return e;const[,t]=this.ranges;if(t instanceof v.FactorRange)return t.synthetic(e);throw new Error("unexpected")}const[,t]=this.ranges;switch(this.panel.side){case"left":case"below":return t.start;case"right":case"above":return t.end}}serializable_state(){return Object.assign(Object.assign({},super.serializable_state()),{bbox:this.layout.bbox.box})}}r.AxisView=m,m.__name__="AxisView";class _ extends o.GuideRenderer{constructor(e){super(e)}static init_Axis(){this.prototype.default_view=m,this.mixins([["axis_",s.Line],["major_tick_",s.Line],["minor_tick_",s.Line],["major_label_",s.Text],["axis_label_",s.Text]]),this.define(({Any:e,Int:t,Number:r,String:n,Ref:a,Dict:i,Tuple:o,Or:s,Nullable:l,Auto:c})=>({bounds:[s(o(r,r),c),"auto"],ticker:[a(f.Ticker)],formatter:[a(d.TickFormatter)],axis_label:[l(n),""],axis_label_standoff:[t,5],major_label_standoff:[t,5],major_label_orientation:[s(h.TickLabelOrientation,r),"horizontal"],major_label_overrides:[i(n),{}],major_label_policy:[a(u.LabelingPolicy),()=>new u.AllLabels],major_tick_in:[r,2],major_tick_out:[r,6],minor_tick_in:[r,0],minor_tick_out:[r,4],fixed_location:[l(s(r,e)),null]})),this.override({axis_line_color:"black",major_tick_line_color:"black",minor_tick_line_color:"black",major_label_text_font_size:"11px",major_label_text_align:"center",major_label_text_baseline:"alphabetic",axis_label_text_font_size:"13px",axis_label_text_font_style:"italic"})}}r.Axis=_,_.__name__="Axis",_.init_Axis()},function e(t,r,n,a,i){a();const o=t(41);class s extends o.RendererView{}n.GuideRendererView=s,s.__name__="GuideRendererView";class e extends o.Renderer{constructor(e){super(e)}static init_GuideRenderer(){this.override({level:"guide"})}}n.GuideRenderer=e,e.__name__="GuideRenderer",e.init_GuideRenderer()},function e(t,r,n,a,i){a();const o=t(53);class s extends o.Model{constructor(e){super(e)}}n.Ticker=s,s.__name__="Ticker"},function e(t,r,n,a,i){a();const o=t(53),s=t(167);class l extends o.Model{constructor(e){super(e)}format_graphics(e,t){return this.doFormat(e,t).map(e=>new s.TextBox({text:e}))}compute(e,t){return this.doFormat([e],null!=t?t:{loc:0})[0]}v_compute(e,t){return this.doFormat(e,null!=t?t:{loc:0})}}n.TickFormatter=l,l.__name__="TickFormatter"},function l(e,t,x,r,n){r();const c=e(99),w=e(143),A=e(9),u=e(8),i=e(168),l=e(22);x.text_width=(()=>{const r=document.createElement("canvas").getContext("2d");let n="";return(e,t)=>(t!=n&&(n=t,r.font=t),r.measureText(e).width)})();class a{constructor(){this._position={sx:0,sy:0},this.font_size_scale=1}set position(e){this._position=e}get position(){return this._position}infer_text_height(){return"ascent_descent"}bbox(){const{p0:e,p1:t,p2:r,p3:n}=this.rect(),a=Math.min(e.x,t.x,r.x,n.x),i=Math.min(e.y,t.y,r.y,n.y),o=Math.max(e.x,t.x,r.x,n.x),s=Math.max(e.y,t.y,r.y,n.y);return new c.BBox({left:a,right:o,top:i,bottom:s})}size(){const{width:r,height:n}=this._size(),{angle:a}=this;if(a){const e=Math.cos(Math.abs(a)),t=Math.sin(Math.abs(a));return{width:Math.abs(r*e+n*t),height:Math.abs(r*t+n*e)}}return{width:r,height:n}}rect(){const n=this._rect(),{angle:a}=this;if(a){const{sx:e,sy:t}=this.position,r=new i.AffineTransform;return r.translate(e,t),r.rotate(a),r.translate(-e,-t),r.apply_rect(n)}return n}paint_rect(e){const{p0:t,p1:r,p2:n,p3:a}=this.rect();e.save(),e.strokeStyle="red",e.lineWidth=1,e.beginPath();const{round:i}=Math;e.moveTo(i(t.x),i(t.y)),e.lineTo(i(r.x),i(r.y)),e.lineTo(i(n.x),i(n.y)),e.lineTo(i(a.x),i(a.y)),e.closePath(),e.stroke(),e.restore()}paint_bbox(e){const{x:t,y:r,width:n,height:a}=this.bbox();e.save(),e.strokeStyle="blue",e.lineWidth=1,e.beginPath();const{round:i}=Math;e.moveTo(i(t),i(r)),e.lineTo(i(t),i(r+a)),e.lineTo(i(t+n),i(r+a)),e.lineTo(i(t+n),i(r)),e.closePath(),e.stroke(),e.restore()}}x.GraphicsBox=a,a.__name__="GraphicsBox";class o extends a{constructor({text:e}){super(),this.align="left",this.text=e}set visuals(e){const t=e.text_color.get_value(),r=e.text_alpha.get_value(),n=e.text_font_style.get_value();let a=e.text_font_size.get_value();const i=e.text_font.get_value(),{font_size_scale:o}=this;if(1!=o){const e=a.match(/^\s*(\d+(\.\d+)?)(\w+)\s*$/);if(null!=e){const[,t,,r]=e,n=Number(t);isNaN(n)||(a=`${n*o}${r}`)}}const s=`${n} ${a} ${i}`;this.font=s,this.color=l.color2css(t,r),this.line_height=e.text_line_height.get_value()}infer_text_height(){if(this.text.includes("\n"))return"ascent_descent";return function(t){for(const e of new Set(t))if(!("0"<=e&&e<="9"))switch(e){case",":case".":case"+":case"-":case"":case"e":continue;default:return!1}return!0}(this.text)?"cap":"ascent_descent"}_text_line(e){var t;const r=null!==(t=this.text_height_metric)&&void 0!==t?t:this.infer_text_height(),n=(()=>{switch(r){case"x":case"x_descent":return e.x_height;case"cap":case"cap_descent":return e.cap_height;case"ascent":case"ascent_descent":return e.ascent}})(),a=(()=>{switch(r){case"x":case"cap":case"ascent":return 0;case"x_descent":case"cap_descent":case"ascent_descent":return e.descent}})();return{height:n+a,ascent:n,descent:a}}get nlines(){return this.text.split("\n").length}_size(){var e,t;const{font:r}=this,n=w.font_metrics(r),a=(this.line_height-1)*n.height,i=""==this.text,o=this.text.split("\n"),s=o.length,l=o.map(e=>x.text_width(e,r)),c=this._text_line(n).height*s,u="%"==(null===(e=this.width)||void 0===e?void 0:e.unit)?this.width.value:1,f="%"==(null===(t=this.height)||void 0===t?void 0:t.unit)?this.height.value:1;return{width:A.max(l)*u,height:i?0:(c+a*(s-1))*f,metrics:n}}_computed_position(e,t,r){const{width:n,height:a}=e,{sx:i,sy:o,x_anchor:s="left",y_anchor:l="center"}=this.position;return{x:i-(()=>{if(u.isNumber(s))return s*n;switch(s){case"left":return 0;case"center":return.5*n;case"right":return n}})(),y:o-(()=>{var e;if(u.isNumber(l))return l*a;switch(l){case"top":return 0;case"center":return.5*a;case"bottom":return a;case"baseline":if(1!=r)return.5*a;switch(null!==(e=this.text_height_metric)&&void 0!==e?e:this.infer_text_height()){case"x":case"x_descent":return t.x_height;case"cap":case"cap_descent":return t.cap_height;case"ascent":case"ascent_descent":return t.ascent}}})()}}_rect(){const{width:e,height:t,metrics:r}=this._size(),n=this.text.split("\n").length,{x:a,y:i}=this._computed_position({width:e,height:t},r,n);return new c.BBox({x:a,y:i,width:e,height:t}).rect}paint(r){var e,t;const{font:n}=this,a=w.font_metrics(n),i=(this.line_height-1)*a.height,o=this.text.split("\n"),s=o.length,l=o.map(e=>x.text_width(e,n)),c=this._text_line(a),u=c.height*s,f="%"==(null===(e=this.width)||void 0===e?void 0:e.unit)?this.width.value:1,d="%"==(null===(t=this.height)||void 0===t?void 0:t.unit)?this.height.value:1,h=A.max(l)*f,p=(u+i*(s-1))*d;r.save(),r.fillStyle=this.color,r.font=this.font,r.textAlign="left",r.textBaseline="alphabetic";const{sx:v,sy:g}=this.position,{align:m}=this,{angle:_}=this;_&&(r.translate(v,g),r.rotate(_),r.translate(-v,-g));let{x:y,y:b}=this._computed_position({width:h,height:p},a,s);if("justify"==m)for(let e=0;e<s;e++){let t=y;const a=o[e].split(" "),w=a.length,s=a.map(e=>x.text_width(e,n)),l=(h-A.sum(s))/(w-1);for(let e=0;e<w;e++)r.fillText(a[e],t,b),t+=s[e]+l;b+=c.height+i}else for(let e=0;e<s;e++){const x=y+(()=>{switch(m){case"left":return 0;case"center":return.5*(h-l[e]);case"right":return h-l[e]}})();r.fillStyle=this.color,r.fillText(o[e],x,b+c.ascent),b+=c.height+i}r.restore()}}x.TextBox=o,o.__name__="TextBox";class s extends a{constructor(e,t){super(),this.base=e,this.expo=t}get children(){return[this.base,this.expo]}set position(e){this._position=e;const t=this.base.size(),r=this.expo.size(),n=this._shift_scale()*t.height,a=Math.max(t.height,n+r.height);this.base.position={sx:0,x_anchor:"left",sy:a,y_anchor:"bottom"},this.expo.position={sx:t.width,x_anchor:"left",sy:n,y_anchor:"bottom"}}get position(){return this._position}set visuals(e){this.expo.font_size_scale=.7,this.base.visuals=e,this.expo.visuals=e}_shift_scale(){if(this.base instanceof o&&1==this.base.nlines){const{x_height:e,cap_height:t}=w.font_metrics(this.base.font);return e/t}return 2/3}infer_text_height(){return this.base.infer_text_height()}_rect(){const e=this.base.bbox(),t=this.expo.bbox(),r=e.union(t),{x:n,y:a}=this._computed_position();return r.translate(n,a).rect}_size(){const e=this.base.size(),t=this.expo.size();return{width:e.width+t.width,height:Math.max(e.height,this._shift_scale()*e.height+t.height)}}paint(e){e.save();const{angle:t}=this;if(t){const{sx:r,sy:n}=this.position;e.translate(r,n),e.rotate(t),e.translate(-r,-n)}const{x:r,y:n}=this._computed_position();e.translate(r,n),this.base.paint(e),this.expo.paint(e),e.restore()}paint_bbox(e){super.paint_bbox(e);const{x:t,y:r}=this._computed_position();e.save(),e.translate(t,r);for(const t of this.children)t.paint_bbox(e);e.restore()}_computed_position(){const{width:e,height:t}=this._size(),{sx:r,sy:n,x_anchor:a="left",y_anchor:i="center"}=this.position;return{x:r-(()=>{if(u.isNumber(a))return a*e;switch(a){case"left":return 0;case"center":return.5*e;case"right":return e}})(),y:n-(()=>{if(u.isNumber(i))return i*t;switch(i){case"top":return 0;case"center":return.5*t;case"bottom":return t;case"baseline":return.5*t}})()}}}x.BaseExpo=s,s.__name__="BaseExpo";class f{constructor(e){this.items=e}get length(){return this.items.length}set visuals(e){for(const t of this.items)t.visuals=e;const t={x:0,cap:1,ascent:2,x_descent:3,cap_descent:4,ascent_descent:5},r=A.max_by(this.items.map(e=>e.infer_text_height()),e=>t[e]);for(const e of this.items)e.text_height_metric=r}set angle(t){for(const e of this.items)e.angle=t}max_size(){let r=0,n=0;for(const t of this.items){const e=t.size();r=Math.max(r,e.width),n=Math.max(n,e.height)}return{width:r,height:n}}}x.GraphicsBoxes=f,f.__name__="GraphicsBoxes"},function e(t,r,n,a,i){a();const{sin:o,cos:s}=Math;class l{constructor(e=1,t=0,r=0,n=1,a=0,i=0){this.a=e,this.b=t,this.c=r,this.d=n,this.e=a,this.f=i}toString(){const{a:e,b:t,c:r,d:n,e:a,f:i}=this;return`matrix(${e}, ${t}, ${r}, ${n}, ${a}, ${i})`}clone(){const{a:e,b:t,c:r,d:n,e:a,f:i}=this;return new l(e,t,r,n,a,i)}get is_identity(){const{a:e,b:t,c:r,d:n,e:a,f:i}=this;return 1==e&&0==t&&0==r&&1==n&&0==a&&0==i}apply_point(e){const[t,r]=this.apply(e.x,e.y);return{x:t,y:r}}apply_rect(e){return{p0:this.apply_point(e.p0),p1:this.apply_point(e.p1),p2:this.apply_point(e.p2),p3:this.apply_point(e.p3)}}apply(e,t){const{a:r,b:n,c:a,d:i,e:o,f:s}=this;return[r*e+a*t+o,n*e+i*t+s]}iv_apply(t,r){const{a:n,b:a,c:i,d:o,e:s,f:l}=this,c=t.length;for(let e=0;e<c;e++){const c=t[e],u=r[e];t[e]=n*c+i*u+s,r[e]=a*c+o*u+l}}transform(e,t,r,n,a,i){const{a:o,b:s,c:l,d:c,e:u,f}=this;return this.a=o*e+l*t,this.c=o*r+l*n,this.e=o*a+l*i+u,this.b=s*e+c*t,this.d=s*r+c*n,this.f=s*a+c*i+f,this}translate(e,t){return this.transform(1,0,0,1,e,t)}scale(e,t){return this.transform(e,0,0,t,0,0)}skew(e,t){return this.transform(1,t,e,1,0,0)}rotate(e){const t=o(e),r=s(e);return this.transform(r,t,-t,r,0,0)}rotate_ccw(e){return this.rotate(-e)}translate_x(e){return this.translate(e,0)}translate_y(e){return this.translate(0,e)}flip(){return this.scale(-1,-1)}flip_x(){return this.scale(1,-1)}flip_y(){return this.scale(-1,1)}}n.AffineTransform=l,l.__name__="AffineTransform"},function e(t,r,n,a,i){a();const o=t(53),s=t(13),l=t(34),c=t(8),u=t(24);class f extends o.Model{constructor(e){super(e)}}n.LabelingPolicy=f,f.__name__="LabelingPolicy";class e extends f{constructor(e){super(e)}filter(e,t,r){return e}}n.AllLabels=e,e.__name__="AllLabels";class d extends f{constructor(e){super(e)}static init_NoOverlap(){this.define(({Number:e})=>({min_distance:[e,5]}))}filter(e,t,r){const{min_distance:n}=this;let a=null;for(const t of e)null!=a&&r(a,t)<n?e.unset(t):a=t;return e}}n.NoOverlap=d,d.__name__="NoOverlap",d.init_NoOverlap();class h extends f{constructor(e){super(e)}static init_CustomLabelingPolicy(){this.define(({Unknown:e,String:t,Dict:r})=>({args:[r(e),{}],code:[t,""]}))}get names(){return s.keys(this.args)}get values(){return s.values(this.args)}get func(){const e=l.use_strict(this.code);return new u.GeneratorFunction("indices","bboxes","distance",...this.names,e)}filter(e,t,r){const n=Object.create(null),a=this.func.call(n,e,t,r,...this.values);let i=a.next();if(i.done&&void 0!==i.value){const{value:t}=i;return t instanceof u.Indices?t:void 0===t?e:c.isIterable(t)?u.Indices.from_indices(e.size,t):u.Indices.all_unset(e.size)}{const t=[];do{t.push(i.value),i=a.next()}while(!i.done);return u.Indices.from_indices(e.size,t)}}}n.CustomLabelingPolicy=h,h.__name__="CustomLabelingPolicy",h.init_CustomLabelingPolicy()},function e(t,r,n,a,i){a();const o=t(1),s=t(163),l=t(171),e=t(172),c=o.__importStar(t(48)),u=t(20),f=t(167),d=t(8);class h extends s.AxisView{_paint(e,t,r){this._draw_group_separators(e,t,r)}_draw_group_separators(e,t,r){const[a]=this.ranges,[i,o]=this.computed_bounds;if(!a.tops||a.tops.length<2||!this.visuals.separator_line.doit)return;const s=this.dimension,l=(s+1)%2,c=[[],[]];let u=0;for(let n=0;n<a.tops.length-1;n++){let t,r;for(let e=u;e<a.factors.length;e++)if(a.factors[e][0]==a.tops[n+1]){[t,r]=[a.factors[e-1],a.factors[e]],u=e;break}const f=(a.synthetic(t)+a.synthetic(r))/2;f>i&&f<o&&(c[s].push(f),c[l].push(this.loc))}const f=this.extents.tick_label;this._draw_ticks(e,c,-3,f-6,this.visuals.separator_line)}_draw_major_labels(i,o,e){const s=this._get_factor_info();let l=o.tick+this.model.major_label_standoff;for(let a=0;a<s.length;a++){const[e,t,r,n]=s[a];this._draw_oriented_labels(i,e,t,r,this.panel.side,l,n),l+=o.tick_labels[a]}}_tick_label_extents(){const n=this._get_factor_info(),a=[];for(const[e,,t,r]of n){const n=this._oriented_labels_extent(e,t,this.model.major_label_standoff,r);a.push(n)}return a}_get_factor_info(){const[e]=this.ranges,[t,r]=this.computed_bounds,n=this.loc,a=this.model.ticker.get_ticks(t,r,e,n),i=this.tick_coords,o=[],s=e=>new f.GraphicsBoxes(e.map(e=>d.isString(e)?new f.TextBox({text:e}):e)),l=e=>s(this.model.formatter.doFormat(e,this));if(1==e.levels){const e=l(a.major);o.push([e,i.major,this.model.major_label_orientation,this.visuals.major_label_text])}else if(2==e.levels){const e=l(a.major.map(e=>e[1]));o.push([e,i.major,this.model.major_label_orientation,this.visuals.major_label_text]),o.push([s(a.tops),i.tops,this.model.group_label_orientation,this.visuals.group_text])}else if(3==e.levels){const e=l(a.major.map(e=>e[2])),t=a.mids.map(e=>e[1]);o.push([e,i.major,this.model.major_label_orientation,this.visuals.major_label_text]),o.push([s(t),i.mids,this.model.subgroup_label_orientation,this.visuals.subgroup_text]),o.push([s(a.tops),i.tops,this.model.group_label_orientation,this.visuals.group_text])}return o}get tick_coords(){const e=this.dimension,t=(e+1)%2,[r]=this.ranges,[n,a]=this.computed_bounds,i=this.model.ticker.get_ticks(n,a,r,this.loc),o={major:[[],[]],mids:[[],[]],tops:[[],[]],minor:[[],[]]};return o.major[e]=i.major,o.major[t]=i.major.map(()=>this.loc),3==r.levels&&(o.mids[e]=i.mids,o.mids[t]=i.mids.map(()=>this.loc)),r.levels>1&&(o.tops[e]=i.tops,o.tops[t]=i.tops.map(()=>this.loc)),o}}n.CategoricalAxisView=h,h.__name__="CategoricalAxisView";class p extends s.Axis{constructor(e){super(e)}static init_CategoricalAxis(){this.prototype.default_view=h,this.mixins([["separator_",c.Line],["group_",c.Text],["subgroup_",c.Text]]),this.define(({Number:e,Or:t})=>({group_label_orientation:[t(u.TickLabelOrientation,e),"parallel"],subgroup_label_orientation:[t(u.TickLabelOrientation,e),"parallel"]})),this.override({ticker:()=>new l.CategoricalTicker,formatter:()=>new e.CategoricalTickFormatter,separator_line_color:"lightgrey",separator_line_width:2,group_text_font_style:"bold",group_text_font_size:"11px",group_text_color:"grey",subgroup_text_font_style:"bold",subgroup_text_font_size:"11px"})}}n.CategoricalAxis=p,p.__name__="CategoricalAxis",p.init_CategoricalAxis()},function e(t,r,n,a,i){a();const o=t(165);class s extends o.Ticker{constructor(e){super(e)}get_ticks(e,t,r,n){var a,i;return{major:this._collect(r.factors,r,e,t),minor:[],tops:this._collect(null!==(a=r.tops)&&void 0!==a?a:[],r,e,t),mids:this._collect(null!==(i=r.mids)&&void 0!==i?i:[],r,e,t)}}_collect(t,r,n,a){const i=[];for(const e of t){const t=r.synthetic(e);t>n&&t<a&&i.push(e)}return i}}n.CategoricalTicker=s,s.__name__="CategoricalTicker"},function e(t,r,n,a,i){a();const o=t(166),s=t(9);class l extends o.TickFormatter{constructor(e){super(e)}doFormat(e,t){return s.copy(e)}}n.CategoricalTickFormatter=l,l.__name__="CategoricalTickFormatter"},function e(t,r,n,a,i){a();const o=t(163);class s extends o.AxisView{}n.ContinuousAxisView=s,s.__name__="ContinuousAxisView";class e extends o.Axis{constructor(e){super(e)}}n.ContinuousAxis=e,e.__name__="ContinuousAxis"},function e(t,r,n,a,i){a();const o=t(175),s=t(180),l=t(185);class e extends o.LinearAxisView{}n.DatetimeAxisView=e,e.__name__="DatetimeAxisView";class c extends o.LinearAxis{constructor(e){super(e)}static init_DatetimeAxis(){this.prototype.default_view=e,this.override({ticker:()=>new l.DatetimeTicker,formatter:()=>new s.DatetimeTickFormatter})}}n.DatetimeAxis=c,c.__name__="DatetimeAxis",c.init_DatetimeAxis()},function e(t,r,n,a,i){a();const o=t(173),s=t(176),l=t(177);class c extends o.ContinuousAxisView{}n.LinearAxisView=c,c.__name__="LinearAxisView";class e extends o.ContinuousAxis{constructor(e){super(e)}static init_LinearAxis(){this.prototype.default_view=c,this.override({ticker:()=>new l.BasicTicker,formatter:()=>new s.BasicTickFormatter})}}n.LinearAxis=e,e.__name__="LinearAxis",e.init_LinearAxis()},function e(t,r,n,a,i){a();const o=t(166),s=t(34);function l(t){let r="";for(const e of t)r+="-"==e?"":e;return r}n.unicode_replace=l;class e extends o.TickFormatter{constructor(e){super(e),this.last_precision=3}static init_BasicTickFormatter(){this.define(({Boolean:e,Int:t,Auto:r,Or:n})=>({precision:[n(t,r),"auto"],use_scientific:[e,!0],power_limit_high:[t,5],power_limit_low:[t,-3]}))}get scientific_limit_low(){return 10**this.power_limit_low}get scientific_limit_high(){return 10**this.power_limit_high}_need_sci(t){if(!this.use_scientific)return!1;const{scientific_limit_high:r}=this,{scientific_limit_low:n}=this,a=t.length<2?0:Math.abs(t[1]-t[0])/1e4;for(const e of t){const t=Math.abs(e);if(!(t<=a)&&(t>=r||t<=n))return!0}return!1}_format_with_precision(e,t,r){return t?e.map(e=>l(e.toExponential(r))):e.map(e=>l(s.to_fixed(e,r)))}_auto_precision(r,e){const n=new Array(r.length),a=this.last_precision<=15;e:for(let t=this.last_precision;a?t<=15:t>=1;a?t++:t--){if(e){n[0]=r[0].toExponential(t);for(let e=1;e<r.length;e++)if(n[e]==n[e-1])continue e;this.last_precision=t;break}n[0]=s.to_fixed(r[0],t);for(let e=1;e<r.length;e++)if(n[e]=s.to_fixed(r[e],t),n[e]==n[e-1])continue e;this.last_precision=t;break}return this.last_precision}doFormat(e,t){if(0==e.length)return[];const r=this._need_sci(e),n="auto"==this.precision?this._auto_precision(e,r):this.precision;return this._format_with_precision(e,r,n)}}n.BasicTickFormatter=e,e.__name__="BasicTickFormatter",e.init_BasicTickFormatter()},function e(t,r,n,a,i){a();const o=t(178);class s extends o.AdaptiveTicker{constructor(e){super(e)}}n.BasicTicker=s,s.__name__="BasicTicker"},function u(e,t,r,n,a){n();const i=e(179),f=e(9),u=e(10);class o extends i.ContinuousTicker{constructor(e){super(e)}static init_AdaptiveTicker(){this.define(({Number:e,Array:t,Nullable:r})=>({base:[e,10],mantissas:[t(e),[1,2,5]],min_interval:[e,0],max_interval:[r(e),null]}))}get_min_interval(){return this.min_interval}get_max_interval(){var e;return null!==(e=this.max_interval)&&void 0!==e?e:1/0}initialize(){super.initialize();const e=f.nth(this.mantissas,-1)/this.base,t=f.nth(this.mantissas,0)*this.base;this.extended_mantissas=[e,...this.mantissas,t],this.base_factor=0===this.get_min_interval()?1:this.get_min_interval()}get_interval(e,t,r){const n=t-e,a=this.get_ideal_interval(e,t,r),i=Math.floor(u.log(a/this.base_factor,this.base)),o=this.base**i*this.base_factor,s=this.extended_mantissas,l=s.map(e=>Math.abs(r-n/(e*o))),c=s[f.argmin(l)]*o;return u.clamp(c,this.get_min_interval(),this.get_max_interval())}}r.AdaptiveTicker=o,o.__name__="AdaptiveTicker",o.init_AdaptiveTicker()},function e(t,r,n,a,i){a();const o=t(165),f=t(9);class s extends o.Ticker{constructor(e){super(e)}static init_ContinuousTicker(){this.define(({Int:e})=>({num_minor_ticks:[e,5],desired_num_ticks:[e,6]}))}get_ticks(e,t,r,n){return this.get_ticks_no_defaults(e,t,n,this.desired_num_ticks)}get_ticks_no_defaults(t,r,n,e){const a=this.get_interval(t,r,e),i=Math.floor(t/a),o=Math.ceil(r/a);let s;s=isFinite(i)&&isFinite(o)?f.range(i,o+1):[];const l=s.map(e=>e*a).filter(e=>t<=e&&e<=r),c=this.num_minor_ticks,u=[];if(c>0&&l.length>0){const n=a/c,e=f.range(0,c).map(e=>e*n);for(const n of e.slice(1)){const e=l[0]-n;t<=e&&e<=r&&u.push(e)}for(const n of l)for(const a of e){const e=n+a;t<=e&&e<=r&&u.push(e)}}return{major:l,minor:u}}get_ideal_interval(e,t,r){return(t-e)/r}}n.ContinuousTicker=s,s.__name__="ContinuousTicker",s.init_ContinuousTicker()},function e(t,r,n,a,i){a();const o=t(1).__importDefault(t(181)),s=t(166),f=t(19),l=t(182),c=t(9),u=t(8);function d(e){return o.default(e,"%Y %m %d %H %M %S").split(/\s+/).map(e=>parseInt(e,10))}function h(t,r){if(u.isFunction(r))return r(t);{const e=l.sprintf("$1%06d",function(e){return Math.round(e/1e3%1*1e6)}(t));return-1==(r=r.replace(/((^|[^%])(%%)*)%f/,e)).indexOf("%")?r:o.default(t,r)}}const p=["microseconds","milliseconds","seconds","minsec","minutes","hourmin","hours","days","months","years"];class v extends s.TickFormatter{constructor(e){super(e),this.strip_leading_zeros=!0}static init_DatetimeTickFormatter(){this.define(({String:e,Array:t})=>({microseconds:[t(e),["%fus"]],milliseconds:[t(e),["%3Nms","%S.%3Ns"]],seconds:[t(e),["%Ss"]],minsec:[t(e),[":%M:%S"]],minutes:[t(e),[":%M","%Mm"]],hourmin:[t(e),["%H:%M"]],hours:[t(e),["%Hh","%H:%M"]],days:[t(e),["%m/%d","%a%d"]],months:[t(e),["%m/%Y","%b %Y"]],years:[t(e),["%Y"]]}))}initialize(){super.initialize(),this._update_width_formats()}_update_width_formats(){const n=+o.default(new Date),e=function(e){const t=e.map(e=>h(n,e).length),r=c.sort_by(c.zip(t,e),([e])=>e);return c.unzip(r)};this._width_formats={microseconds:e(this.microseconds),milliseconds:e(this.milliseconds),seconds:e(this.seconds),minsec:e(this.minsec),minutes:e(this.minutes),hourmin:e(this.hourmin),hours:e(this.hours),days:e(this.days),months:e(this.months),years:e(this.years)}}_get_resolution_str(e,t){const r=1.1*e;switch(!1){case!(r<.001):return"microseconds";case!(r<1):return"milliseconds";case!(r<60):return t>=60?"minsec":"seconds";case!(r<3600):return t>=3600?"hourmin":"minutes";case!(r<86400):return"hours";case!(r<2678400):return"days";case!(r<31536e3):return"months";default:return"years"}}doFormat(e,i){if(0==e.length)return[];const t=Math.abs(e[e.length-1]-e[0])/1e3,r=t/(e.length-1),o=this._get_resolution_str(r,t),[,[s]]=this._width_formats[o],l=[],c=p.indexOf(o),u={};for(const e of p)u[e]=0;u.seconds=5,u.minsec=4,u.minutes=4,u.hourmin=3,u.hours=3;for(const i of e){let t,r;try{r=d(i),t=h(i,s)}catch(e){f.logger.warn(`unable to format tick for timestamp value ${i}`),f.logger.warn(` - ${e}`),l.push("ERR");continue}let n=!1,a=c;for(;0==r[u[p[a]]];){let e;if(a+=1,a==p.length)break;if(("minsec"==o||"hourmin"==o)&&!n){if("minsec"==o&&0==r[4]&&0!=r[5]||"hourmin"==o&&0==r[3]&&0!=r[4]){e=this._width_formats[p[c-1]][1][0],t=h(i,e);break}n=!0}e=this._width_formats[p[a]][1][0],t=h(i,e)}if(this.strip_leading_zeros){let e=t.replace(/^0+/g,"");e!=t&&isNaN(parseInt(e))&&(e=`0${e}`),l.push(e)}else l.push(t)}return l}}n.DatetimeTickFormatter=v,v.__name__="DatetimeTickFormatter",v.init_DatetimeTickFormatter()},function e(t,r,n,a,i){!function(e){"object"==typeof r&&r.exports?r.exports=e():"function"==typeof He?He(e):this.tz=e()}(function(){function p(e,t,r){var n,a=t.day[1];do{n=new Date(Date.UTC(r,t.month,Math.abs(a++)))}while(t.day[0]<7&&n.getUTCDay()!=t.day[0]);return(n={clock:t.clock,sort:n.getTime(),rule:t,save:6e4*t.save,offset:e.offset})[n.clock]=n.sort+6e4*t.time,n.posix?n.wallclock=n[n.clock]+(e.offset+t.saved):n.posix=n[n.clock]-(e.offset+t.saved),n}function a(e,t,r){var n,a,i,o,s,l,c,u=e[e.zone],f=[],d=new Date(r).getUTCFullYear(),h=1;for(n=1,a=u.length;n<a&&!(u[n][t]<=r);n++);if((i=u[n]).rules){for(l=e[i.rules],c=d+1;c>=d-h;--c)for(n=0,a=l.length;n<a;n++)l[n].from<=c&&c<=l[n].to?f.push(p(i,l[n],c)):l[n].to<c&&1==h&&(h=c-l[n].to);for(f.sort(function(e,t){return e.sort-t.sort}),n=0,a=f.length;n<a;n++)r>=f[n][t]&&f[n][f[n].clock]>i[f[n].clock]&&(o=f[n])}return o&&((s=/^(.*)\/(.*)$/.exec(i.format))?o.abbrev=s[o.save?2:1]:o.abbrev=i.format.replace(/%s/,o.rule.letter)),o||i}function s(e,t){return"UTC"==e.zone?t:(e.entry=a(e,"posix",t),t+e.entry.offset+e.entry.save)}function f(e,t){return"UTC"==e.zone?t:(e.entry=r=a(e,"wallclock",t),0<(n=t-r.wallclock)&&n<r.save?null:t-r.offset-r.save);var r,n}function i(e,t,r){var n,a=+(r[1]+1),i=r[2]*a,o=l.indexOf(r[3].toLowerCase());if(o>9)t+=i*c[o-10];else{if(n=new Date(s(e,t)),o<7)for(;i;)n.setUTCDate(n.getUTCDate()+a),n.getUTCDay()==o&&(i-=a);else 7==o?n.setUTCFullYear(n.getUTCFullYear()+i):8==o?n.setUTCMonth(n.getUTCMonth()+i):n.setUTCDate(n.getUTCDate()+i);null==(t=f(e,n.getTime()))&&(t=f(e,n.getTime()+864e5*a)-864e5*a)}return t}var t={clock:function(){return+new Date},zone:"UTC",entry:{abbrev:"UTC",offset:0,save:0},UTC:1,z:function(e,t,r,n){var a,i,o=this.entry.offset+this.entry.save,s=Math.abs(o/1e3),l=[],c=3600;for(a=0;a<3;a++)l.push(("0"+Math.floor(s/c)).slice(-2)),s%=c,c/=60;return"^"!=r||o?("^"==r&&(n=3),3==n?(i=(i=l.join(":")).replace(/:00$/,""),"^"!=r&&(i=i.replace(/:00$/,""))):n?(i=l.slice(0,n+1).join(":"),"^"==r&&(i=i.replace(/:00$/,""))):i=l.slice(0,2).join(""),i=(i=(o<0?"-":"+")+i).replace(/([-+])(0)/,{_:" $1","-":"$1"}[r]||"$1$2")):"Z"},"%":function(e){return"%"},n:function(e){return"\n"},t:function(e){return"\t"},U:function(e){return u(e,0)},W:function(e){return u(e,1)},V:function(e){return r(e)[0]},G:function(e){return r(e)[1]},g:function(e){return r(e)[1]%100},j:function(e){return Math.floor((e.getTime()-Date.UTC(e.getUTCFullYear(),0))/864e5)+1},s:function(e){return Math.floor(e.getTime()/1e3)},C:function(e){return Math.floor(e.getUTCFullYear()/100)},N:function(e){return e.getTime()%1e3*1e6},m:function(e){return e.getUTCMonth()+1},Y:function(e){return e.getUTCFullYear()},y:function(e){return e.getUTCFullYear()%100},H:function(e){return e.getUTCHours()},M:function(e){return e.getUTCMinutes()},S:function(e){return e.getUTCSeconds()},e:function(e){return e.getUTCDate()},d:function(e){return e.getUTCDate()},u:function(e){return e.getUTCDay()||7},w:function(e){return e.getUTCDay()},l:function(e){return e.getUTCHours()%12||12},I:function(e){return e.getUTCHours()%12||12},k:function(e){return e.getUTCHours()},Z:function(e){return this.entry.abbrev},a:function(e){return this[this.locale].day.abbrev[e.getUTCDay()]},A:function(e){return this[this.locale].day.full[e.getUTCDay()]},h:function(e){return this[this.locale].month.abbrev[e.getUTCMonth()]},b:function(e){return this[this.locale].month.abbrev[e.getUTCMonth()]},B:function(e){return this[this.locale].month.full[e.getUTCMonth()]},P:function(e){return this[this.locale].meridiem[Math.floor(e.getUTCHours()/12)].toLowerCase()},p:function(e){return this[this.locale].meridiem[Math.floor(e.getUTCHours()/12)]},R:function(e,t){return this.convert([t,"%H:%M"])},T:function(e,t){return this.convert([t,"%H:%M:%S"])},D:function(e,t){return this.convert([t,"%m/%d/%y"])},F:function(e,t){return this.convert([t,"%Y-%m-%d"])},x:function(e,t){return this.convert([t,this[this.locale].date])},r:function(e,t){return this.convert([t,this[this.locale].time12||"%I:%M:%S"])},X:function(e,t){return this.convert([t,this[this.locale].time24])},c:function(e,t){return this.convert([t,this[this.locale].dateTime])},convert:function(e){if(!e.length)return"1.0.23";var t,r,l,n,c,u=Object.create(this),a=[];for(t=0;t<e.length;t++)if(n=e[t],Array.isArray(n))t||isNaN(n[1])?n.splice.apply(e,[t--,1].concat(n)):c=n;else if(isNaN(n)){if("string"==(l=typeof n))~n.indexOf("%")?u.format=n:t||"*"!=n?!t&&(l=/^(\d{4})-(\d{2})-(\d{2})(?:[T\s](\d{2}):(\d{2})(?::(\d{2})(?:\.(\d+))?)?(Z|(([+-])(\d{2}(:\d{2}){0,2})))?)?$/.exec(n))?((c=[]).push.apply(c,l.slice(1,8)),l[9]?(c.push(l[10]+1),c.push.apply(c,l[11].split(/:/))):l[8]&&c.push(1)):/^\w{2,3}_\w{2}$/.test(n)?u.locale=n:(l=o.exec(n))?a.push(l):u.zone=n:c=n;else if("function"==l){if(l=n.call(u))return l}else if(/^\w{2,3}_\w{2}$/.test(n.name))u[n.name]=n;else if(n.zones){for(l in n.zones)u[l]=n.zones[l];for(l in n.rules)u[l]=n.rules[l]}}else t||(c=n);if(u[u.locale]||delete u.locale,u[u.zone]||delete u.zone,null!=c){if("*"==c)c=u.clock();else if(Array.isArray(c)){for(l=[],r=!c[7],t=0;t<11;t++)l[t]=+(c[t]||0);--l[1],c=Date.UTC.apply(Date.UTC,l)+-l[7]*(36e5*l[8]+6e4*l[9]+1e3*l[10])}else c=Math.floor(c);if(!isNaN(c)){if(r&&(c=f(u,c)),null==c)return c;for(t=0,r=a.length;t<r;t++)c=i(u,c,a[t]);return u.format?(l=new Date(s(u,c)),u.format.replace(/%([-0_^]?)(:{0,3})(\d*)(.)/g,function(e,t,r,n,a){var i,o,s="0";if(i=u[a]){for(e=String(i.call(u,l,c,t,r.length)),"_"==(t||i.style)&&(s=" "),o="-"==t?0:i.pad||0;e.length<o;)e=s+e;for(o="-"==t?0:n||i.pad;e.length<o;)e=s+e;"N"==a&&o<e.length&&(e=e.slice(0,o)),"^"==t&&(e=e.toUpperCase())}return e})):c}}return function(){return u.convert(arguments)}},locale:"en_US",en_US:{date:"%m/%d/%Y",time24:"%I:%M:%S %p",time12:"%I:%M:%S %p",dateTime:"%a %d %b %Y %I:%M:%S %p %Z",meridiem:["AM","PM"],month:{abbrev:"Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec".split("|"),full:"January|February|March|April|May|June|July|August|September|October|November|December".split("|")},day:{abbrev:"Sun|Mon|Tue|Wed|Thu|Fri|Sat".split("|"),full:"Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday".split("|")}}},l="Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|year|month|day|hour|minute|second|millisecond",o=new RegExp("^\\s*([+-])(\\d+)\\s+("+l+")s?\\s*$","i"),c=[36e5,6e4,1e3,1];function u(e,t){var r,n,a;return n=new Date(Date.UTC(e.getUTCFullYear(),0)),r=Math.floor((e.getTime()-n.getTime())/864e5),n.getUTCDay()==t?a=0:8==(a=7-n.getUTCDay()+t)&&(a=1),r>=a?Math.floor((r-a)/7)+1:0}function r(e){var t,r,n;return r=e.getUTCFullYear(),t=new Date(Date.UTC(r,0)).getUTCDay(),(n=u(e,1)+(t>1&&t<=4?1:0))?53!=n||4==t||3==t&&29==new Date(r,1,29).getDate()?[n,e.getUTCFullYear()]:[1,e.getUTCFullYear()+1]:(r=e.getUTCFullYear()-1,[n=4==(t=new Date(Date.UTC(r,0)).getUTCDay())||3==t&&29==new Date(r,1,29).getDate()?53:52,e.getUTCFullYear()-1])}return l=l.toLowerCase().split("|"),"delmHMSUWVgCIky".replace(/./g,function(e){t[e].pad=2}),t.N.pad=9,t.j.pad=3,t.k.style="_",t.l.style="_",t.e.style="_",function(){return t.convert(arguments)}})},function e(t,r,a,n,i){n();const o=t(1),s=o.__importStar(t(183)),l=t(184),c=o.__importDefault(t(181)),u=t(21),f=t(8);function d(e,...t){return l.sprintf(e,...t)}function h(e,t,r){if(f.isNumber(e)){return d((()=>{switch(!1){case Math.floor(e)!=e:return"%d";case!(Math.abs(e)>.1&&Math.abs(e)<1e3):return"%0.3f";default:return"%0.3e"}})(),e)}return`${e}`}function p(e,n,t){if(null==n)return h;if(null!=t&&e in t){const n=t[e];if(f.isString(n)){if(n in a.DEFAULT_FORMATTERS)return a.DEFAULT_FORMATTERS[n];throw new Error(`Unknown tooltip field formatter type '${n}'`)}return function(e,t,r){return n.format(e,t,r)}}return a.DEFAULT_FORMATTERS.numeral}function v(e,t,r,n){if("$"==e[0]){return function(e,t){if(e in t)return t[e];throw new Error(`Unknown special variable '$${e}'`)}(e.substring(1),n)}return function(e,t,r){const n=t.get_column(e);if(null==n)return null;if(f.isNumber(r))return n[r];const a=n[r.index];if(f.isTypedArray(a)||f.isArray(a))return f.isArray(a[0])?a[r.dim2][r.dim1]:a[r.flat_index];return a}(e.substring(1).replace(/[{}]/g,""),t,r)}a.FormatterType=u.Enum("numeral","printf","datetime"),a.DEFAULT_FORMATTERS={numeral:(e,t,r)=>s.format(e,t),datetime:(e,t,r)=>c.default(e,t),printf:(e,t,r)=>d(t,e)},a.sprintf=d,a.basic_formatter=h,a.get_formatter=p,a.get_value=v,a.replace_placeholders=function(e,i,o,s,l={},c){let t,u;if(f.isString(e)?(t=e,u=!1):(t=e.html,u=!0),t=t.replace(/@\$name/g,e=>`@{${l.name}}`),t=t.replace(/((?:\$\w+)|(?:@\w+)|(?:@{(?:[^{}]+)}))(?:{([^{}]+)})?/g,(e,t,r)=>{const n=v(t,i,o,l);if(null==n)return c?c("???"):"???";if("safe"==r)return u=!0,`${n}`;const a=`${p(t,r,s)(n,r,l)}`;return c?c(a):a}),u){return[...(new DOMParser).parseFromString(t,"text/html").body.childNodes]}return t}},function e(t,r,n,a,i){var u,B={},o=B,H="en-US",U=null,s="0,0";void 0!==r&&r.exports;function l(e){this._value=e}function c(e){var t,r="";for(t=0;t<e;t++)r+="0";return r}function V(e,t,r,n){var a,i,o=Math.pow(10,t);return i=e.toFixed(0).search("e")>-1?function(e,t){var r,n,a,i;return r=(i=e.toString()).split("e")[0],a=i.split("e")[1],i=r.split(".")[0]+(n=r.split(".")[1]||"")+c(a-n.length),t>0&&(i+="."+c(t)),i}(e,t):(r(e*o)/o).toFixed(t),n&&(a=new RegExp("0{1,"+n+"}$"),i=i.replace(a,"")),i}function f(e,t,r){return t.indexOf("$")>-1?function(e,t,r){var n,a,i=t,o=i.indexOf("$"),s=i.indexOf("("),l=i.indexOf("+"),c=i.indexOf("-"),u="",f="";-1===i.indexOf("$")?"infix"===B[H].currency.position?(f=B[H].currency.symbol,B[H].currency.spaceSeparated&&(f=" "+f+" ")):B[H].currency.spaceSeparated&&(u=" "):i.indexOf(" $")>-1?(u=" ",i=i.replace(" $","")):i.indexOf("$ ")>-1?(u=" ",i=i.replace("$ ","")):i=i.replace("$","");if(a=d(e,i,r,f),-1===t.indexOf("$"))switch(B[H].currency.position){case"postfix":a.indexOf(")")>-1?((a=a.split("")).splice(-1,0,u+B[H].currency.symbol),a=a.join("")):a=a+u+B[H].currency.symbol;break;case"infix":break;case"prefix":a.indexOf("(")>-1||a.indexOf("-")>-1?(a=a.split(""),n=Math.max(s,c)+1,a.splice(n,0,B[H].currency.symbol+u),a=a.join("")):a=B[H].currency.symbol+u+a;break;default:throw Error('Currency position should be among ["prefix", "infix", "postfix"]')}else o<=1?a.indexOf("(")>-1||a.indexOf("+")>-1||a.indexOf("-")>-1?(n=1,(o<s||o<l||o<c)&&(n=0),(a=a.split("")).splice(n,0,B[H].currency.symbol+u),a=a.join("")):a=B[H].currency.symbol+u+a:a.indexOf(")")>-1?((a=a.split("")).splice(-1,0,u+B[H].currency.symbol),a=a.join("")):a=a+u+B[H].currency.symbol;return a}(e,t,r):t.indexOf("%")>-1?function(e,t,r){var n,a="";e*=100,t.indexOf(" %")>-1?(a=" ",t=t.replace(" %","")):t=t.replace("%","");(n=d(e,t,r)).indexOf(")")>-1?((n=n.split("")).splice(-1,0,a+"%"),n=n.join("")):n=n+a+"%";return n}(e,t,r):t.indexOf(":")>-1?function(e){var t=Math.floor(e/60/60),r=Math.floor((e-60*t*60)/60),n=Math.round(e-60*t*60-60*r);return t+":"+(r<10?"0"+r:r)+":"+(n<10?"0"+n:n)}(e):d(e,t,r)}function d(e,t,r,n){var a,i,o,s,l,c,u,f,d,h,p,v,g,m,_,y,b,x=!1,w=!1,A=!1,T="",k=!1,M=!1,S=!1,C=!1,L=!1,E="",D="",O=Math.abs(e),P=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],I=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],R="",z=!1,N=!1;if(0===e&&null!==U)return U;if(!isFinite(e))return""+e;if(0===t.indexOf("{")){var F=t.indexOf("}");if(-1===F)throw Error('Format should also contain a "}"');v=t.slice(1,F),t=t.slice(F+1)}else v="";if(t.indexOf("}")===t.length-1){var j=t.indexOf("{");if(-1===j)throw Error('Format should also contain a "{"');g=t.slice(j+1,-1),t=t.slice(0,j+1)}else g="";if(y=null===(b=-1===t.indexOf(".")?t.match(/([0-9]+).*/):t.match(/([0-9]+)\..*/))?-1:b[1].length,-1!==t.indexOf("-")&&(z=!0),t.indexOf("(")>-1?(x=!0,t=t.slice(1,-1)):t.indexOf("+")>-1&&(w=!0,t=t.replace(/\+/g,"")),t.indexOf("a")>-1){if(h=t.split(".")[0].match(/[0-9]+/g)||["0"],h=parseInt(h[0],10),k=t.indexOf("aK")>=0,M=t.indexOf("aM")>=0,S=t.indexOf("aB")>=0,C=t.indexOf("aT")>=0,L=k||M||S||C,t.indexOf(" a")>-1?(T=" ",t=t.replace(" a","")):t=t.replace("a",""),u=0===(u=(l=Math.floor(Math.log(O)/Math.LN10)+1)%3)?3:u,h&&0!==O&&(c=Math.floor(Math.log(O)/Math.LN10)+1-h,f=3*~~((Math.min(h,l)-u)/3),O/=Math.pow(10,f),-1===t.indexOf(".")&&h>3))for(t+="[.]",_=(_=0===c?0:3*~~(c/3)-c)<0?_+3:_,a=0;a<_;a++)t+="0";Math.floor(Math.log(Math.abs(e))/Math.LN10)+1!==h&&(O>=Math.pow(10,12)&&!L||C?(T+=B[H].abbreviations.trillion,e/=Math.pow(10,12)):O<Math.pow(10,12)&&O>=Math.pow(10,9)&&!L||S?(T+=B[H].abbreviations.billion,e/=Math.pow(10,9)):O<Math.pow(10,9)&&O>=Math.pow(10,6)&&!L||M?(T+=B[H].abbreviations.million,e/=Math.pow(10,6)):(O<Math.pow(10,6)&&O>=Math.pow(10,3)&&!L||k)&&(T+=B[H].abbreviations.thousand,e/=Math.pow(10,3)))}if(t.indexOf("b")>-1)for(t.indexOf(" b")>-1?(E=" ",t=t.replace(" b","")):t=t.replace("b",""),s=0;s<=P.length;s++)if(i=Math.pow(1024,s),o=Math.pow(1024,s+1),e>=i&&e<o){E+=P[s],i>0&&(e/=i);break}if(t.indexOf("d")>-1)for(t.indexOf(" d")>-1?(E=" ",t=t.replace(" d","")):t=t.replace("d",""),s=0;s<=I.length;s++)if(i=Math.pow(1e3,s),o=Math.pow(1e3,s+1),e>=i&&e<o){E+=I[s],i>0&&(e/=i);break}if(t.indexOf("o")>-1&&(t.indexOf(" o")>-1?(D=" ",t=t.replace(" o","")):t=t.replace("o",""),B[H].ordinal&&(D+=B[H].ordinal(e))),t.indexOf("[.]")>-1&&(A=!0,t=t.replace("[.]",".")),d=e.toString().split(".")[0],p=t.split(".")[1],m=t.indexOf(","),p){if(d=(R=-1!==p.indexOf("*")?V(e,e.toString().split(".")[1].length,r):p.indexOf("[")>-1?V(e,(p=(p=p.replace("]","")).split("["))[0].length+p[1].length,r,p[1].length):V(e,p.length,r)).split(".")[0],R.split(".")[1].length)R=(n?T+n:B[H].delimiters.decimal)+R.split(".")[1];else R="";A&&0===Number(R.slice(1))&&(R="")}else d=V(e,null,r);return d.indexOf("-")>-1&&(d=d.slice(1),N=!0),d.length<y&&(d=new Array(y-d.length+1).join("0")+d),m>-1&&(d=d.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+B[H].delimiters.thousands)),0===t.indexOf(".")&&(d=""),v+(t.indexOf("(")<t.indexOf("-")?(x&&N?"(":"")+(z&&N||!x&&N?"-":""):(z&&N||!x&&N?"-":"")+(x&&N?"(":""))+(!N&&w&&0!==e?"+":"")+d+R+(D||"")+(T&&!n?T:"")+(E||"")+(x&&N?")":"")+g}function h(e,t){B[e]=t}function p(e){H=e;var t=B[e].defaults;t&&t.format&&u.defaultFormat(t.format),t&&t.currencyFormat&&u.defaultCurrencyFormat(t.currencyFormat)}(u=function(e){return u.isNumbro(e)?e=e.value():0===e||void 0===e?e=0:Number(e)||(e=u.fn.unformat(e)),new l(Number(e))}).version="1.6.2",u.isNumbro=function(e){return e instanceof l},u.setLanguage=function(e,t){console.warn("`setLanguage` is deprecated since version 1.6.0. Use `setCulture` instead");var r=e,n=e.split("-")[0],a=null;o[r]||(Object.keys(o).forEach(function(e){a||e.split("-")[0]!==n||(a=e)}),r=a||t||"en-US"),p(r)},u.setCulture=function(e,t){var r=e,n=e.split("-")[1],a=null;B[r]||(n&&Object.keys(B).forEach(function(e){a||e.split("-")[1]!==n||(a=e)}),r=a||t||"en-US"),p(r)},u.language=function(e,t){if(console.warn("`language` is deprecated since version 1.6.0. Use `culture` instead"),!e)return H;if(e&&!t){if(!o[e])throw new Error("Unknown language : "+e);p(e)}return!t&&o[e]||h(e,t),u},u.culture=function(e,t){if(!e)return H;if(e&&!t){if(!B[e])throw new Error("Unknown culture : "+e);p(e)}return!t&&B[e]||h(e,t),u},u.languageData=function(e){if(console.warn("`languageData` is deprecated since version 1.6.0. Use `cultureData` instead"),!e)return o[H];if(!o[e])throw new Error("Unknown language : "+e);return o[e]},u.cultureData=function(e){if(!e)return B[H];if(!B[e])throw new Error("Unknown culture : "+e);return B[e]},u.culture("en-US",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$",position:"prefix"},defaults:{currencyFormat:",0000 a"},formats:{fourDigits:"0000 a",fullWithTwoDecimals:"$ ,0.00",fullWithTwoDecimalsNoCurrency:",0.00"}}),u.languages=function(){return console.warn("`languages` is deprecated since version 1.6.0. Use `cultures` instead"),o},u.cultures=function(){return B},u.zeroFormat=function(e){U="string"==typeof e?e:null},u.defaultFormat=function(e){s="string"==typeof e?e:"0.0"},u.defaultCurrencyFormat=function(e){"string"==typeof e?e:"0$"},u.validate=function(e,t){var r,n,a,i,o,s,l,c;if("string"!=typeof e&&(e+="",console.warn&&console.warn("Numbro.js: Value is not string. It has been co-erced to: ",e)),(e=e.trim()).match(/^\d+$/))return!0;if(""===e)return!1;try{l=u.cultureData(t)}catch(e){l=u.cultureData(u.culture())}return a=l.currency.symbol,o=l.abbreviations,r=l.delimiters.decimal,n="."===l.delimiters.thousands?"\\.":l.delimiters.thousands,(null===(c=e.match(/^[^\d]+/))||(e=e.substr(1),c[0]===a))&&((null===(c=e.match(/[^\d]+$/))||(e=e.slice(0,-1),c[0]===o.thousand||c[0]===o.million||c[0]===o.billion||c[0]===o.trillion))&&(s=new RegExp(n+"{2}"),!e.match(/[^\d.,]/g)&&(!((i=e.split(r)).length>2)&&(i.length<2?!!i[0].match(/^\d+.*\d$/)&&!i[0].match(s):1===i[0].length?!!i[0].match(/^\d+$/)&&!i[0].match(s)&&!!i[1].match(/^\d+$/):!!i[0].match(/^\d+.*\d$/)&&!i[0].match(s)&&!!i[1].match(/^\d+$/)))))},r.exports={format:function(e,t,r,n){return null!=r&&r!==u.culture()&&u.setCulture(r),f(Number(e),null!=t?t:s,null==n?Math.round:n)}}},function e(t,r,n,a,i){!function(){"use strict";var p={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function v(e){return t(r(e),arguments)}function e(e,t){return v.apply(null,[e].concat(t||[]))}function t(e,t){var r,n,a,i,o,s,l,c,u,f=1,d=e.length,h="";for(n=0;n<d;n++)if("string"==typeof e[n])h+=e[n];else if("object"==typeof e[n]){if((i=e[n]).keys)for(r=t[f],a=0;a<i.keys.length;a++){if(null==r)throw new Error(v('[sprintf] Cannot access property "%s" of undefined value "%s"',i.keys[a],i.keys[a-1]));r=r[i.keys[a]]}else r=i.param_no?t[i.param_no]:t[f++];if(p.not_type.test(i.type)&&p.not_primitive.test(i.type)&&r instanceof Function&&(r=r()),p.numeric_arg.test(i.type)&&"number"!=typeof r&&isNaN(r))throw new TypeError(v("[sprintf] expecting number but found %T",r));switch(p.number.test(i.type)&&(c=r>=0),i.type){case"b":r=parseInt(r,10).toString(2);break;case"c":r=String.fromCharCode(parseInt(r,10));break;case"d":case"i":r=parseInt(r,10);break;case"j":r=JSON.stringify(r,null,i.width?parseInt(i.width):0);break;case"e":r=i.precision?parseFloat(r).toExponential(i.precision):parseFloat(r).toExponential();break;case"f":r=i.precision?parseFloat(r).toFixed(i.precision):parseFloat(r);break;case"g":r=i.precision?String(Number(r.toPrecision(i.precision))):parseFloat(r);break;case"o":r=(parseInt(r,10)>>>0).toString(8);break;case"s":r=String(r),r=i.precision?r.substring(0,i.precision):r;break;case"t":r=String(!!r),r=i.precision?r.substring(0,i.precision):r;break;case"T":r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=i.precision?r.substring(0,i.precision):r;break;case"u":r=parseInt(r,10)>>>0;break;case"v":r=r.valueOf(),r=i.precision?r.substring(0,i.precision):r;break;case"x":r=(parseInt(r,10)>>>0).toString(16);break;case"X":r=(parseInt(r,10)>>>0).toString(16).toUpperCase()}p.json.test(i.type)?h+=r:(!p.number.test(i.type)||c&&!i.sign?u="":(u=c?"+":"-",r=r.toString().replace(p.sign,"")),s=i.pad_char?"0"===i.pad_char?"0":i.pad_char.charAt(1):" ",l=i.width-(u+r).length,o=i.width&&l>0?s.repeat(l):"",h+=i.align?u+r+o:"0"===s?u+o+r:o+u+r)}return h}var l=Object.create(null);function r(e){if(l[e])return l[e];for(var t,r=e,n=[],a=0;r;){if(null!==(t=p.text.exec(r)))n.push(t[0]);else if(null!==(t=p.modulo.exec(r)))n.push("%");else{if(null===(t=p.placeholder.exec(r)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){a|=1;var i=[],o=t[2],s=[];if(null===(s=p.key.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(i.push(s[1]);""!==(o=o.substring(s[0].length));)if(null!==(s=p.key_access.exec(o)))i.push(s[1]);else{if(null===(s=p.index_access.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");i.push(s[1])}t[2]=i}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}r=r.substring(t[0].length)}return l[e]=n}void 0!==n&&(n.sprintf=v,n.vsprintf=e),"undefined"!=typeof window&&(window.sprintf=v,window.vsprintf=e,"function"==typeof He&&He.amd&&He(function(){return{sprintf:v,vsprintf:e}}))}()},function e(t,r,n,a,i){a();const o=t(9),s=t(178),l=t(186),c=t(187),e=t(190),u=t(191),f=t(189);class d extends l.CompositeTicker{constructor(e){super(e)}static init_DatetimeTicker(){this.override({num_minor_ticks:0,tickers:()=>[new s.AdaptiveTicker({mantissas:[1,2,5],base:10,min_interval:0,max_interval:500*f.ONE_MILLI,num_minor_ticks:0}),new s.AdaptiveTicker({mantissas:[1,2,5,10,15,20,30],base:60,min_interval:f.ONE_SECOND,max_interval:30*f.ONE_MINUTE,num_minor_ticks:0}),new s.AdaptiveTicker({mantissas:[1,2,4,6,8,12],base:24,min_interval:f.ONE_HOUR,max_interval:12*f.ONE_HOUR,num_minor_ticks:0}),new c.DaysTicker({days:o.range(1,32)}),new c.DaysTicker({days:o.range(1,31,3)}),new c.DaysTicker({days:[1,8,15,22]}),new c.DaysTicker({days:[1,15]}),new e.MonthsTicker({months:o.range(0,12,1)}),new e.MonthsTicker({months:o.range(0,12,2)}),new e.MonthsTicker({months:o.range(0,12,4)}),new e.MonthsTicker({months:o.range(0,12,6)}),new u.YearsTicker({})]})}}n.DatetimeTicker=d,d.__name__="DatetimeTicker",d.init_DatetimeTicker()},function l(e,t,r,n,a){n();const i=e(179),l=e(9);class o extends i.ContinuousTicker{constructor(e){super(e)}static init_CompositeTicker(){this.define(({Array:e,Ref:t})=>({tickers:[e(t(i.ContinuousTicker)),[]]}))}get min_intervals(){return this.tickers.map(e=>e.get_min_interval())}get max_intervals(){return this.tickers.map(e=>e.get_max_interval())}get_min_interval(){return this.min_intervals[0]}get_max_interval(){return this.max_intervals[0]}get_best_ticker(e,t,r){const n=t-e,a=this.get_ideal_interval(e,t,r),i=[l.sorted_index(this.min_intervals,a)-1,l.sorted_index(this.max_intervals,a)],o=[this.min_intervals[i[0]],this.max_intervals[i[1]]].map(e=>Math.abs(r-n/e));let s;if(l.is_empty(o.filter(e=>!isNaN(e))))s=this.tickers[0];else{const e=i[l.argmin(o)];s=this.tickers[e]}return s}get_interval(e,t,r){return this.get_best_ticker(e,t,r).get_interval(e,t,r)}get_ticks_no_defaults(e,t,r,n){return this.get_best_ticker(e,t,n).get_ticks_no_defaults(e,t,r,n)}}r.CompositeTicker=o,o.__name__="CompositeTicker",o.init_CompositeTicker()},function e(t,r,n,a,i){a();const o=t(188),s=t(189),l=t(9);class c extends o.SingleIntervalTicker{constructor(e){super(e)}static init_DaysTicker(){this.define(({Int:e,Array:t})=>({days:[t(e),[]]})),this.override({num_minor_ticks:0})}initialize(){super.initialize();const e=this.days;e.length>1?this.interval=(e[1]-e[0])*s.ONE_DAY:this.interval=31*s.ONE_DAY}get_ticks_no_defaults(t,r,e,n){const a=function(e,t){const r=s.last_month_no_later_than(new Date(e)),n=s.last_month_no_later_than(new Date(t));n.setUTCMonth(n.getUTCMonth()+1);const a=[],i=r;for(;a.push(s.copy_date(i)),i.setUTCMonth(i.getUTCMonth()+1),!(i>n););return a}(t,r),i=this.days,o=this.interval;return{major:l.concat(a.map(e=>((t,r)=>{const n=t.getUTCMonth(),a=[];for(const e of i){const i=s.copy_date(t);i.setUTCDate(e),new Date(i.getTime()+r/2).getUTCMonth()==n&&a.push(i)}return a})(e,o))).map(e=>e.getTime()).filter(e=>t<=e&&e<=r),minor:[]}}}n.DaysTicker=c,c.__name__="DaysTicker",c.init_DaysTicker()},function e(t,r,n,a,i){a();const o=t(179);class s extends o.ContinuousTicker{constructor(e){super(e)}static init_SingleIntervalTicker(){this.define(({Number:e})=>({interval:[e]}))}get_interval(e,t,r){return this.interval}get_min_interval(){return this.interval}get_max_interval(){return this.interval}}n.SingleIntervalTicker=s,s.__name__="SingleIntervalTicker",s.init_SingleIntervalTicker()},function e(t,r,n,e,a){function i(e){return new Date(e.getTime())}function o(e){const t=i(e);return t.setUTCDate(1),t.setUTCHours(0),t.setUTCMinutes(0),t.setUTCSeconds(0),t.setUTCMilliseconds(0),t}e(),n.ONE_MILLI=1,n.ONE_SECOND=1e3,n.ONE_MINUTE=60*n.ONE_SECOND,n.ONE_HOUR=60*n.ONE_MINUTE,n.ONE_DAY=24*n.ONE_HOUR,n.ONE_MONTH=30*n.ONE_DAY,n.ONE_YEAR=365*n.ONE_DAY,n.copy_date=i,n.last_month_no_later_than=o,n.last_year_no_later_than=function(e){const t=o(e);return t.setUTCMonth(0),t}},function e(t,r,n,a,i){a();const o=t(188),s=t(189),l=t(9);class c extends o.SingleIntervalTicker{constructor(e){super(e)}static init_MonthsTicker(){this.define(({Int:e,Array:t})=>({months:[t(e),[]]}))}initialize(){super.initialize();const e=this.months;e.length>1?this.interval=(e[1]-e[0])*s.ONE_MONTH:this.interval=12*s.ONE_MONTH}get_ticks_no_defaults(t,r,e,n){const a=function(e,t){const r=s.last_year_no_later_than(new Date(e)),n=s.last_year_no_later_than(new Date(t));n.setUTCFullYear(n.getUTCFullYear()+1);const a=[],i=r;for(;a.push(s.copy_date(i)),i.setUTCFullYear(i.getUTCFullYear()+1),!(i>n););return a}(t,r),i=this.months;return{major:l.concat(a.map(r=>i.map(e=>{const t=s.copy_date(r);return t.setUTCMonth(e),t}))).map(e=>e.getTime()).filter(e=>t<=e&&e<=r),minor:[]}}}n.MonthsTicker=c,c.__name__="MonthsTicker",c.init_MonthsTicker()},function e(t,r,n,a,i){a();const o=t(177),e=t(188),s=t(189);class l extends e.SingleIntervalTicker{constructor(e){super(e)}initialize(){super.initialize(),this.interval=s.ONE_YEAR,this.basic_ticker=new o.BasicTicker({num_minor_ticks:0})}get_ticks_no_defaults(t,r,e,n){const a=s.last_year_no_later_than(new Date(t)).getUTCFullYear(),i=s.last_year_no_later_than(new Date(r)).getUTCFullYear();return{major:this.basic_ticker.get_ticks_no_defaults(a,i,e,n).major.map(e=>Date.UTC(e,0,1)).filter(e=>t<=e&&e<=r),minor:[]}}}n.YearsTicker=l,l.__name__="YearsTicker"},function e(t,r,n,a,i){a();const o=t(173),s=t(193),e=t(194);class l extends o.ContinuousAxisView{}n.LogAxisView=l,l.__name__="LogAxisView";class c extends o.ContinuousAxis{constructor(e){super(e)}static init_LogAxis(){this.prototype.default_view=l,this.override({ticker:()=>new e.LogTicker,formatter:()=>new s.LogTickFormatter})}}n.LogAxis=c,c.__name__="LogAxis",c.init_LogAxis()},function e(t,r,n,a,i){a();const o=t(166),s=t(176),l=t(194),c=t(167),{log:u,round:f}=Math;class e extends o.TickFormatter{constructor(e){super(e)}static init_LogTickFormatter(){this.define(({Ref:e,Nullable:t})=>({ticker:[t(e(l.LogTicker)),null]}))}initialize(){super.initialize(),this.basic_formatter=new s.BasicTickFormatter}format_graphics(e,t){var r,n;if(0==e.length)return[];const a=null!==(n=null===(r=this.ticker)||void 0===r?void 0:r.base)&&void 0!==n?n:10,i=this._exponents(e,a);return null==i?this.basic_formatter.format_graphics(e,t):i.map(e=>{const t=new c.TextBox({text:s.unicode_replace(`${a}`)}),r=new c.TextBox({text:s.unicode_replace(`${e}`)});return new c.BaseExpo(t,r)})}_exponents(t,r){let n=null;const a=[];for(const e of t){const t=f(u(e)/u(r));if(n==t)return null;n=t,a.push(t)}return a}doFormat(e,t){var r,n;if(0==e.length)return[];const a=null!==(n=null===(r=this.ticker)||void 0===r?void 0:r.base)&&void 0!==n?n:10,i=this._exponents(e,a);return null==i?this.basic_formatter.doFormat(e,t):i.map(e=>s.unicode_replace(`${a}^${e}`))}}n.LogTickFormatter=e,e.__name__="LogTickFormatter",e.init_LogTickFormatter()},function e(t,r,n,a,i){a();const o=t(178),f=t(9);class s extends o.AdaptiveTicker{constructor(e){super(e)}static init_LogTicker(){this.override({mantissas:[1,5]})}get_ticks_no_defaults(t,r,n,e){const a=this.num_minor_ticks,i=[],o=this.base,s=Math.log(t)/Math.log(o),l=Math.log(r)/Math.log(o),c=l-s;let u;if(isFinite(c))if(c<2){const n=this.get_interval(t,r,e),o=Math.floor(t/n),s=Math.ceil(r/n);if(u=f.range(o,s+1).filter(e=>0!=e).map(e=>e*n).filter(e=>t<=e&&e<=r),a>0&&u.length>0){const t=n/a,r=f.range(0,a).map(e=>e*t);for(const t of r.slice(1))i.push(u[0]-t);for(const t of u)for(const n of r)i.push(t+n)}}else{const t=Math.ceil(.999999*s),r=Math.floor(1.000001*l),n=Math.ceil((r-t)/9);if(u=f.range(t-1,r+1,n).map(e=>o**e),a>0&&u.length>0){const t=o**n/a,r=f.range(1,a+1).map(e=>e*t);for(const t of r)i.push(u[0]/t);i.push(u[0]);for(const t of u)for(const n of r)i.push(t*n)}}else u=[];return{major:u.filter(e=>t<=e&&e<=r),minor:i.filter(e=>t<=e&&e<=r)}}}n.LogTicker=s,s.__name__="LogTicker",s.init_LogTicker()},function e(t,r,n,a,i){a();const o=t(163),s=t(175),l=t(196),c=t(197);class e extends o.AxisView{}n.MercatorAxisView=e,e.__name__="MercatorAxisView";class u extends s.LinearAxis{constructor(e){super(e)}static init_MercatorAxis(){this.prototype.default_view=e,this.override({ticker:()=>new c.MercatorTicker({dimension:"lat"}),formatter:()=>new l.MercatorTickFormatter({dimension:"lat"})})}}n.MercatorAxis=u,u.__name__="MercatorAxis",u.init_MercatorAxis()},function e(t,r,n,a,i){a();const o=t(176),s=t(20),l=t(65);class c extends o.BasicTickFormatter{constructor(e){super(e)}static init_MercatorTickFormatter(){this.define(({Nullable:e})=>({dimension:[e(s.LatLon),null]}))}doFormat(t,r){if(null==this.dimension)throw new Error("MercatorTickFormatter.dimension not configured");if(0==t.length)return[];const n=t.length,a=new Array(n);if("lon"==this.dimension)for(let e=0;e<n;e++){const[n]=l.wgs84_mercator.invert(t[e],r.loc);a[e]=n}else for(let e=0;e<n;e++){const[,n]=l.wgs84_mercator.invert(r.loc,t[e]);a[e]=n}return super.doFormat(a,r)}}n.MercatorTickFormatter=c,c.__name__="MercatorTickFormatter",c.init_MercatorTickFormatter()},function e(t,r,n,a,i){a();const o=t(177),s=t(20),u=t(65);class e extends o.BasicTicker{constructor(e){super(e)}static init_MercatorTicker(){this.define(({Nullable:e})=>({dimension:[e(s.LatLon),null]}))}get_ticks_no_defaults(e,t,r,n){if(null==this.dimension)throw new Error(`${this}.dimension wasn't configured`);return[e,t]=u.clip_mercator(e,t,this.dimension),"lon"==this.dimension?this._get_ticks_lon(e,t,r,n):this._get_ticks_lat(e,t,r,n)}_get_ticks_lon(e,t,r,n){const[a]=u.wgs84_mercator.invert(e,r),[i,o]=u.wgs84_mercator.invert(t,r),s=super.get_ticks_no_defaults(a,i,r,n),l=[];for(const e of s.major)if(u.in_bounds(e,"lon")){const[t]=u.wgs84_mercator.compute(e,o);l.push(t)}const c=[];for(const e of s.minor)if(u.in_bounds(e,"lon")){const[t]=u.wgs84_mercator.compute(e,o);c.push(t)}return{major:l,minor:c}}_get_ticks_lat(e,t,r,n){const[,a]=u.wgs84_mercator.invert(r,e),[i,o]=u.wgs84_mercator.invert(r,t),s=super.get_ticks_no_defaults(a,o,r,n),l=[];for(const e of s.major)if(u.in_bounds(e,"lat")){const[,t]=u.wgs84_mercator.compute(i,e);l.push(t)}const c=[];for(const e of s.minor)if(u.in_bounds(e,"lat")){const[,t]=u.wgs84_mercator.compute(i,e);c.push(t)}return{major:l,minor:c}}}n.MercatorTicker=e,e.__name__="MercatorTicker",e.init_MercatorTicker()},function e(t,r,n,a,i){a(),i("AdaptiveTicker",t(178).AdaptiveTicker),i("BasicTicker",t(177).BasicTicker),i("CategoricalTicker",t(171).CategoricalTicker),i("CompositeTicker",t(186).CompositeTicker),i("ContinuousTicker",t(179).ContinuousTicker),i("DatetimeTicker",t(185).DatetimeTicker),i("DaysTicker",t(187).DaysTicker),i("FixedTicker",t(199).FixedTicker),i("LogTicker",t(194).LogTicker),i("MercatorTicker",t(197).MercatorTicker),i("MonthsTicker",t(190).MonthsTicker),i("SingleIntervalTicker",t(188).SingleIntervalTicker),i("Ticker",t(165).Ticker),i("YearsTicker",t(191).YearsTicker),i("BinnedTicker",t(200).BinnedTicker)},function e(t,r,n,a,i){a();const o=t(179);class e extends o.ContinuousTicker{constructor(e){super(e)}static init_FixedTicker(){this.define(({Number:e,Array:t})=>({ticks:[t(e),[]],minor_ticks:[t(e),[]]}))}get_ticks_no_defaults(e,t,r,n){return{major:this.ticks,minor:this.minor_ticks}}get_interval(e,t,r){return 0}get_min_interval(){return 0}get_max_interval(){return 0}}n.FixedTicker=e,e.__name__="FixedTicker",e.init_FixedTicker()},function e(t,r,n,a,i){a();const o=t(165),s=t(201),d=t(12);class l extends o.Ticker{constructor(e){super(e)}static init_BinnedTicker(){this.define(({Number:e,Ref:t,Or:r,Auto:n})=>({mapper:[t(s.ScanningColorMapper)],num_major_ticks:[r(e,n),8]}))}get_ticks(e,t,r,n){const{binning:a}=this.mapper.metrics,i=Math.max(0,d.left_edge_index(e,a)),o=Math.min(d.left_edge_index(t,a)+1,a.length-1),s=[];for(let e=i;e<=o;e++)s.push(a[e]);const{num_major_ticks:l}=this,c=[],u="auto"==l?s.length:l,f=Math.max(1,Math.floor(s.length/u));for(let e=0;e<s.length;e+=f)c.push(s[e]);return{major:c,minor:[]}}}n.BinnedTicker=l,l.__name__="BinnedTicker",l.init_BinnedTicker()},function e(t,r,n,a,i){a();const o=t(202),s=t(12);class l extends o.ContinuousColorMapper{constructor(e){super(e)}cmap(e,t,r,n,a){if(e<a.binning[0])return r;if(e>a.binning[a.binning.length-1])return n;return t[s.left_edge_index(e,a.binning)]}}n.ScanningColorMapper=l,l.__name__="ScanningColorMapper"},function e(t,r,n,a,i){a();const o=t(203),l=t(61),c=t(9),s=t(8);class u extends o.ColorMapper{constructor(e){super(e),this._scan_data=null}static init_ContinuousColorMapper(){this.define(({Number:e,String:t,Ref:r,Color:n,Or:a,Tuple:i,Array:o,Nullable:s})=>({high:[s(e),null],low:[s(e),null],high_color:[s(n),null],low_color:[s(n),null],domain:[o(i(r(l.GlyphRenderer),a(t,o(t)))),[]]}))}connect_signals(){super.connect_signals();const e=()=>{for(const[e]of this.domain)this.connect(e.view.change,()=>this.update_data()),this.connect(e.data_source.selected.change,()=>this.update_data())};this.connect(this.properties.domain.change,()=>e()),e()}update_data(){const{domain:e,palette:t}=this,r=[...this._collect(e)];this._scan_data=this.scan(r,t.length),this.metrics_change.emit(),this.change.emit()}get metrics(){return null==this._scan_data&&this.update_data(),this._scan_data}*_collect(i){for(const[a,e]of i)for(const i of s.isArray(e)?e:[e]){let t=a.data_source.get_column(i);t=a.view.indices.select(t);const e=a.view.masked,r=a.data_source.selected.indices;let n;if(null!=e&&r.length>0?n=c.intersection([...e],r):null!=e?n=[...e]:r.length>0&&(n=r),null!=n&&(t=c.map(n,e=>t[e])),t.length>0&&!s.isNumber(t[0]))for(const i of t)yield*i;else yield*t}}_v_compute(r,n,a,e){const{nan_color:i}=e;let{low_color:o,high_color:s}=e;null==o&&(o=a[0]),null==s&&(s=a[a.length-1]);const{domain:t}=this,l=c.is_empty(t)?r:[...this._collect(t)];this._scan_data=this.scan(l,a.length),this.metrics_change.emit();for(let e=0,t=r.length;e<t;e++){const c=r[e];isNaN(c)?n[e]=i:n[e]=this.cmap(c,a,o,s,this._scan_data)}}_colors(e){return Object.assign(Object.assign({},super._colors(e)),{low_color:null!=this.low_color?e(this.low_color):void 0,high_color:null!=this.high_color?e(this.high_color):void 0})}}n.ContinuousColorMapper=u,u.__name__="ContinuousColorMapper",u.init_ContinuousColorMapper()},function t(e,r,n,a,i){a();const o=e(204),s=e(15),l=e(24),t=e(22),c=e(27);function u(e){return t.encode_rgba(t.color2rgba(e))}function f(r){const n=new Uint32Array(r.length);for(let e=0,t=r.length;e<t;e++)n[e]=u(r[e]);return n}n._convert_color=u,n._convert_palette=f;class d extends o.Mapper{constructor(e){super(e)}initialize(){super.initialize(),this.metrics_change=new s.Signal0(this,"metrics_change")}static init_ColorMapper(){this.define(({Color:e,Array:t})=>({palette:[t(e)],nan_color:[e,"gray"]}))}v_compute(e){const t=new Array(e.length);return this._v_compute(e,t,this.palette,this._colors(e=>e)),t}get rgba_mapper(){const r=this,n=f(this.palette),a=this._colors(u);return{v_compute(e){const t=new l.ColorArray(e.length);return r._v_compute(e,t,n,a),new Uint8ClampedArray(c.to_big_endian(t).buffer)}}}_colors(e){return{nan_color:e(this.nan_color)}}}n.ColorMapper=d,d.__name__="ColorMapper",d.init_ColorMapper()},function e(t,r,n,a,i){a();const o=t(149);class s extends o.Transform{constructor(e){super(e)}compute(e){throw new Error("mapping single values is not supported")}}n.Mapper=s,s.__name__="Mapper"},function e(t,r,n,a,i){a(),i("BasicTickFormatter",t(176).BasicTickFormatter),i("CategoricalTickFormatter",t(172).CategoricalTickFormatter),i("DatetimeTickFormatter",t(180).DatetimeTickFormatter),i("FuncTickFormatter",t(206).FuncTickFormatter),i("LogTickFormatter",t(193).LogTickFormatter),i("MercatorTickFormatter",t(196).MercatorTickFormatter),i("NumeralTickFormatter",t(207).NumeralTickFormatter),i("PrintfTickFormatter",t(208).PrintfTickFormatter),i("TickFormatter",t(166).TickFormatter)},function e(t,r,n,a,i){a();const o=t(166),s=t(13),l=t(34);class c extends o.TickFormatter{constructor(e){super(e)}static init_FuncTickFormatter(){this.define(({Unknown:e,String:t,Dict:r})=>({args:[r(e),{}],code:[t,""]}))}get names(){return s.keys(this.args)}get values(){return s.values(this.args)}_make_func(){const e=l.use_strict(this.code);return new Function("tick","index","ticks",...this.names,e)}doFormat(e,t){const n=this._make_func().bind({});return e.map((e,t,r)=>`${n(e,t,r,...this.values)}`)}}n.FuncTickFormatter=c,c.__name__="FuncTickFormatter",c.init_FuncTickFormatter()},function e(t,r,n,a,i){a();const o=t(1).__importStar(t(183)),s=t(166),l=t(20);class c extends s.TickFormatter{constructor(e){super(e)}static init_NumeralTickFormatter(){this.define(({String:e})=>({format:[e,"0,0"],language:[e,"en"],rounding:[l.RoundingFunction,"round"]}))}get _rounding_fn(){switch(this.rounding){case"round":case"nearest":return Math.round;case"floor":case"rounddown":return Math.floor;case"ceil":case"roundup":return Math.ceil}}doFormat(e,t){const{format:r,language:n,_rounding_fn:a}=this;return e.map(e=>o.format(e,r,n,a))}}n.NumeralTickFormatter=c,c.__name__="NumeralTickFormatter",c.init_NumeralTickFormatter()},function e(t,r,n,a,i){a();const o=t(166),s=t(182);class l extends o.TickFormatter{constructor(e){super(e)}static init_PrintfTickFormatter(){this.define(({String:e})=>({format:[e,"%s"]}))}doFormat(e,t){return e.map(e=>s.sprintf(this.format,e))}}n.PrintfTickFormatter=l,l.__name__="PrintfTickFormatter",l.init_PrintfTickFormatter()},function e(t,r,n,a,i){a(),i("CategoricalColorMapper",t(210).CategoricalColorMapper),i("CategoricalMarkerMapper",t(212).CategoricalMarkerMapper),i("CategoricalPatternMapper",t(213).CategoricalPatternMapper),i("ContinuousColorMapper",t(202).ContinuousColorMapper),i("ColorMapper",t(203).ColorMapper),i("LinearColorMapper",t(214).LinearColorMapper),i("LogColorMapper",t(215).LogColorMapper),i("ScanningColorMapper",t(201).ScanningColorMapper),i("EqHistColorMapper",t(216).EqHistColorMapper)},function e(t,r,n,a,i){a();const o=t(211),s=t(203),l=t(104);class c extends s.ColorMapper{constructor(e){super(e)}static init_CategoricalColorMapper(){this.define(({Number:e,Nullable:t})=>({factors:[l.FactorSeq],start:[e,0],end:[t(e),null]}))}_v_compute(e,t,r,{nan_color:n}){o.cat_v_compute(e,this.factors,r,t,this.start,this.end,n)}}n.CategoricalColorMapper=c,c.__name__="CategoricalColorMapper",c.init_CategoricalColorMapper()},function e(t,r,n,a,i){a();const f=t(12),d=t(8);function h(r,n){if(r.length!=n.length)return!1;for(let e=0,t=r.length;e<t;e++)if(r[e]!==n[e])return!1;return!0}n._cat_equals=h,n.cat_v_compute=function(a,i,o,s,l,c,u){const e=a.length;for(let n=0;n<e;n++){let e,t,r=a[n];d.isString(r)?e=f.index_of(i,r):(null!=l?r=null!=c?r.slice(l,c):r.slice(l):null!=c&&(r=r.slice(0,c)),e=1==r.length?f.index_of(i,r[0]):f.find_index(i,e=>h(e,r))),t=e<0||e>=o.length?u:o[e],s[n]=t}}},function e(t,r,n,a,i){a();const o=t(211),s=t(104),l=t(204),c=t(20);class u extends l.Mapper{constructor(e){super(e)}static init_CategoricalMarkerMapper(){this.define(({Number:e,Array:t,Nullable:r})=>({factors:[s.FactorSeq],markers:[t(c.MarkerType)],start:[e,0],end:[r(e),null],default_value:[c.MarkerType,"circle"]}))}v_compute(e){const t=new Array(e.length);return o.cat_v_compute(e,this.factors,this.markers,t,this.start,this.end,this.default_value),t}}n.CategoricalMarkerMapper=u,u.__name__="CategoricalMarkerMapper",u.init_CategoricalMarkerMapper()},function e(t,r,n,a,i){a();const o=t(211),s=t(104),l=t(204),c=t(20);class u extends l.Mapper{constructor(e){super(e)}static init_CategoricalPatternMapper(){this.define(({Number:e,Array:t,Nullable:r})=>({factors:[s.FactorSeq],patterns:[t(c.HatchPatternType)],start:[e,0],end:[r(e),null],default_value:[c.HatchPatternType," "]}))}v_compute(e){const t=new Array(e.length);return o.cat_v_compute(e,this.factors,this.patterns,t,this.start,this.end,this.default_value),t}}n.CategoricalPatternMapper=u,u.__name__="CategoricalPatternMapper",u.init_CategoricalPatternMapper()},function e(t,r,n,a,i){a();const o=t(202),s=t(12);class l extends o.ContinuousColorMapper{constructor(e){super(e)}scan(e,t){const r=null!=this.low?this.low:s.min(e),n=null!=this.high?this.high:s.max(e);return{max:n,min:r,norm_factor:1/(n-r),normed_interval:1/t}}cmap(e,t,r,n,a){const i=t.length-1;if(e==a.max)return t[i];const o=(e-a.min)*a.norm_factor,s=Math.floor(o/a.normed_interval);return s<0?r:s>i?n:t[s]}}n.LinearColorMapper=l,l.__name__="LinearColorMapper"},function e(t,r,n,a,i){a();const o=t(202),s=t(12);class l extends o.ContinuousColorMapper{constructor(e){super(e)}scan(e,t){const r=null!=this.low?this.low:s.min(e),n=null!=this.high?this.high:s.max(e);return{max:n,min:r,scale:t/(Math.log(n)-Math.log(r))}}cmap(e,t,r,n,a){const i=t.length-1;if(e>a.max)return n;if(e==a.max)return t[i];if(e<a.min)return r;const o=Math.log(e)-Math.log(a.min);let s=Math.floor(o*a.scale);return s>i&&(s=i),t[s]}}n.LogColorMapper=l,l.__name__="LogColorMapper"},function e(t,r,n,a,i){a();const o=t(201),v=t(12),g=t(9),m=t(19);class s extends o.ScanningColorMapper{constructor(e){super(e)}static init_EqHistColorMapper(){this.define(({Int:e})=>({bins:[e,65536]}))}scan(e,r){const n=null!=this.low?this.low:v.min(e),t=null!=this.high?this.high:v.max(e),a=this.bins,i=g.linspace(n,t,a+1),o=v.bin_counts(e,i),s=new Array(a);for(let e=0,t=i.length;e<t-1;e++){const r=i[e],n=i[e+1];s[e]=(r+n)/2}const l=g.cumsum(o),c=l[l.length-1],u=v.map(l,e=>e/c);let f=r-1,d=[],h=0,p=2*r;for(;f!=r&&h<4&&0!=f;){const e=p/f;if(e>1e3)break;p=Math.round(Math.max(r*e,r));const n=g.range(0,p),t=v.map(u,e=>e*(p-1));d=v.interpolate(n,t,s);f=g.uniq(d).length-1,h++}if(0==f){d=[n,t];for(let e=0;e<r-1;e++)d.push(t)}else d=d.slice(d.length-r-1),f!=r&&m.logger.warn("EqHistColorMapper warning: Histogram equalization did not converge.");return d[0]=n,d[d.length-1]=t,{min:n,max:t,binning:d}}}n.EqHistColorMapper=s,s.__name__="EqHistColorMapper",s.init_EqHistColorMapper()},function e(t,r,n,a,i){a(),i("CategoricalScale",t(145).CategoricalScale),i("ContinuousScale",t(158).ContinuousScale),i("LinearScale",t(218).LinearScale),i("LinearInterpolationScale",t(219).LinearInterpolationScale),i("LogScale",t(157).LogScale),i("Scale",t(146).Scale)},function e(t,r,n,a,e){a();const i=t(158);class o extends i.ContinuousScale{constructor(e){super(e)}get s_compute(){const[t,r]=this._linear_compute_state();return e=>t*e+r}compute(e){return this._linear_compute(e)}v_compute(e){return this._linear_v_compute(e)}invert(e){return this._linear_invert(e)}v_invert(e){return this._linear_v_invert(e)}}n.LinearScale=o,o.__name__="LinearScale"},function e(t,r,n,a,i){a();const o=t(146),u=t(12);class s extends o.Scale{constructor(e){super(e)}static init_LinearInterpolationScale(){this.internal(({Arrayable:e})=>({binning:[e]}))}get s_compute(){throw new Error("not implemented")}compute(e){return e}v_compute(e){const{binning:i}=this,{start:t,end:r}=this.source_range,o=t,s=r,n=i.length,a=(r-t)/(n-1),l=new Float64Array(n);for(let e=0;e<n;e++)l[e]=t+e*a;const c=u.map(e,e=>{if(e<o)return o;if(e>s)return s;const t=u.left_edge_index(e,i),r=i[t],n=(e-r)/(i[t+1]-r),a=l[t];return a+n*(l[t+1]-a)});return this._linear_v_compute(c)}invert(e){return e}v_invert(e){return new Float64Array(e)}}n.LinearInterpolationScale=s,s.__name__="LinearInterpolationScale",s.init_LinearInterpolationScale()},function e(t,r,n,a,i){a(),i("DataRange",t(160).DataRange),i("DataRange1d",t(159).DataRange1d),i("FactorRange",t(104).FactorRange),i("Range",t(105).Range),i("Range1d",t(156).Range1d)},function e(t,r,n,a,i){a();var o=t(141);i("Sizeable",o.Sizeable),i("SizingPolicy",o.SizingPolicy);var s=t(142);i("Layoutable",s.Layoutable),i("LayoutItem",s.LayoutItem);var l=t(222);i("HStack",l.HStack),i("VStack",l.VStack);var c=t(223);i("Grid",c.Grid),i("Row",c.Row),i("Column",c.Column);var u=t(224);i("ContentBox",u.ContentBox),i("VariadicBox",u.VariadicBox)},function e(t,r,n,a,i){a();const o=t(142),g=t(99);class s extends o.Layoutable{constructor(){super(...arguments),this.children=[]}*[Symbol.iterator](){yield*this.children}}n.Stack=s,s.__name__="Stack";class l extends s{_measure(t){let r=0,n=0;for(const t of this.children){const e=t.measure({width:0,height:0});r+=e.width,n=Math.max(n,e.height)}return{width:r,height:n}}_set_geometry(e,t){super._set_geometry(e,t);const r=this.absolute?e.top:0;let n=this.absolute?e.left:0;const{height:a}=e;for(const e of this.children){const{width:t}=e.measure({width:0,height:0});e.set_geometry(new g.BBox({left:n,width:t,top:r,height:a})),n+=t}}}n.HStack=l,l.__name__="HStack";class c extends s{_measure(t){let r=0,n=0;for(const t of this.children){const e=t.measure({width:0,height:0});r=Math.max(r,e.width),n+=e.height}return{width:r,height:n}}_set_geometry(e,t){super._set_geometry(e,t);const r=this.absolute?e.left:0;let n=this.absolute?e.top:0;const{width:a}=e;for(const e of this.children){const{height:t}=e.measure({width:0,height:0});e.set_geometry(new g.BBox({top:n,height:t,left:r,width:a})),n+=t}}}n.VStack=c,c.__name__="VStack";class u extends o.Layoutable{constructor(){super(...arguments),this.children=[]}*[Symbol.iterator](){yield*this.children}_measure(t){const{width_policy:r,height_policy:n}=this.sizing,{min:a,max:i}=Math;let o=0,s=0;for(const r of this.children){const{width:n,height:a}=r.measure(t);o=i(o,n),s=i(s,a)}return{width:(()=>{const{width:e}=this.sizing;if(t.width==1/0)return"fixed"==r&&null!=e?e:o;switch(r){case"fixed":return null!=e?e:o;case"min":return o;case"fit":return null!=e?a(t.width,e):t.width;case"max":return null!=e?i(t.width,e):t.width}})(),height:(()=>{const{height:e}=this.sizing;if(t.height==1/0)return"fixed"==n&&null!=e?e:s;switch(n){case"fixed":return null!=e?e:s;case"min":return s;case"fit":return null!=e?a(t.height,e):t.height;case"max":return null!=e?i(t.height,e):t.height}})()}}_set_geometry(r,n){super._set_geometry(r,n);const a=this.absolute?r:r.relative(),{left:i,right:o,top:s,bottom:l}=a,c=Math.round(a.vcenter),u=Math.round(a.hcenter);for(const n of this.children){const{margin:a,halign:e,valign:f}=n.sizing,{width:d,height:h,inner:t}=n.measure(r),p=(()=>{switch(`${f}_${e}`){case"start_start":return new g.BBox({left:i+a.left,top:s+a.top,width:d,height:h});case"start_center":return new g.BBox({hcenter:u,top:s+a.top,width:d,height:h});case"start_end":return new g.BBox({right:o-a.right,top:s+a.top,width:d,height:h});case"center_start":return new g.BBox({left:i+a.left,vcenter:c,width:d,height:h});case"center_center":return new g.BBox({hcenter:u,vcenter:c,width:d,height:h});case"center_end":return new g.BBox({right:o-a.right,vcenter:c,width:d,height:h});case"end_start":return new g.BBox({left:i+a.left,bottom:l-a.bottom,width:d,height:h});case"end_center":return new g.BBox({hcenter:u,bottom:l-a.bottom,width:d,height:h});case"end_end":return new g.BBox({right:o-a.right,bottom:l-a.bottom,width:d,height:h})}})(),v=null==t?p:new g.BBox({left:p.left+t.left,top:p.top+t.top,right:p.right-t.right,bottom:p.bottom-t.bottom});n.set_geometry(p,v)}}}n.NodeLayout=u,u.__name__="NodeLayout"},function e(t,r,n,a,i){a();const w=t(141),o=t(142),f=t(8),b=t(99),d=t(9),{max:A,round:T}=Math;class l{constructor(e){this.def=e,this._map=new Map}get(e){let t=this._map.get(e);return void 0===t&&(t=this.def(),this._map.set(e,t)),t}apply(e,t){const r=this.get(e);this._map.set(e,t(r))}}l.__name__="DefaultMap";class h{constructor(){this._items=[],this._nrows=0,this._ncols=0}get nrows(){return this._nrows}get ncols(){return this._ncols}add(e,t){const{r1:r,c1:n}=e;this._nrows=A(this._nrows,r+1),this._ncols=A(this._ncols,n+1),this._items.push({span:e,data:t})}at(t,r){return this._items.filter(({span:e})=>e.r0<=t&&t<=e.r1&&e.c0<=r&&r<=e.c1).map(({data:e})=>e)}row(t){return this._items.filter(({span:e})=>e.r0<=t&&t<=e.r1).map(({data:e})=>e)}col(t){return this._items.filter(({span:e})=>e.c0<=t&&t<=e.c1).map(({data:e})=>e)}foreach(r){for(const{span:e,data:t}of this._items)r(e,t)}map(r){const n=new h;for(const{span:e,data:t}of this._items)n.add(e,r(e,t));return n}}h.__name__="Container";class e extends o.Layoutable{constructor(e=[]){super(),this.items=e,this.rows="auto",this.cols="auto",this.spacing=0}*[Symbol.iterator](){for(const{layout:e}of this.items)yield e}is_width_expanding(){if(super.is_width_expanding())return!0;if("fixed"==this.sizing.width_policy)return!1;const{cols:e}=this._state;return d.some(e,e=>"max"==e.policy)}is_height_expanding(){if(super.is_height_expanding())return!0;if("fixed"==this.sizing.height_policy)return!1;const{rows:e}=this._state;return d.some(e,e=>"max"==e.policy)}_init(){var e,t,n,a;super._init();const i=new h;for(const{layout:e,row:t,col:n,row_span:a,col_span:o}of this.items)if(e.sizing.visible){const s=t,f=n,l=t+(null!=a?a:1)-1,d=n+(null!=o?o:1)-1;i.add({r0:s,c0:f,r1:l,c1:d},e)}const{nrows:o,ncols:s}=i,l=new Array(o);for(let r=0;r<o;r++){const a=(()=>{var e;const t=f.isPlainObject(this.rows)?null!==(e=this.rows[r])&&void 0!==e?e:this.rows["*"]:this.rows;return null==t?{policy:"auto"}:f.isNumber(t)?{policy:"fixed",height:t}:f.isString(t)?{policy:t}:t})(),o=null!==(e=a.align)&&void 0!==e?e:"auto";if("fixed"==a.policy)l[r]={policy:"fixed",height:a.height,align:o};else if("min"==a.policy)l[r]={policy:"min",align:o};else if("fit"==a.policy||"max"==a.policy)l[r]={policy:a.policy,flex:null!==(t=a.flex)&&void 0!==t?t:1,align:o};else{if("auto"!=a.policy)throw new Error("unrechable");d.some(i.row(r),e=>e.is_height_expanding())?l[r]={policy:"max",flex:1,align:o}:l[r]={policy:"min",align:o}}}const c=new Array(s);for(let r=0;r<s;r++){const t=(()=>{var e;const t=f.isPlainObject(this.cols)?null!==(e=this.cols[r])&&void 0!==e?e:this.cols["*"]:this.cols;return null==t?{policy:"auto"}:f.isNumber(t)?{policy:"fixed",width:t}:f.isString(t)?{policy:t}:t})(),o=null!==(n=t.align)&&void 0!==n?n:"auto";if("fixed"==t.policy)c[r]={policy:"fixed",width:t.width,align:o};else if("min"==t.policy)c[r]={policy:"min",align:o};else if("fit"==t.policy||"max"==t.policy)c[r]={policy:t.policy,flex:null!==(a=t.flex)&&void 0!==a?a:1,align:o};else{if("auto"!=t.policy)throw new Error("unrechable");d.some(i.col(r),e=>e.is_width_expanding())?c[r]={policy:"max",flex:1,align:o}:c[r]={policy:"min",align:o}}}const[r,u]=f.isNumber(this.spacing)?[this.spacing,this.spacing]:this.spacing;this._state={items:i,nrows:o,ncols:s,rows:l,cols:c,rspacing:r,cspacing:u}}_measure_totals(e,t){const{nrows:r,ncols:n,rspacing:a,cspacing:i}=this._state;return{height:d.sum(e)+(r-1)*a,width:d.sum(t)+(n-1)*i}}_measure_cells(p){const{items:t,nrows:r,ncols:n,rows:v,cols:g,rspacing:m,cspacing:_}=this._state,y=new Array(r);for(let e=0;e<r;e++){const t=v[e];y[e]="fixed"==t.policy?t.height:0}const b=new Array(n);for(let e=0;e<n;e++){const t=g[e];b[e]="fixed"==t.policy?t.width:0}const x=new h;t.foreach((t,e)=>{const{r0:r,c0:n,r1:a,c1:i}=t,o=(a-r)*m,s=(i-n)*_;let l=0;for(let e=r;e<=a;e++)l+=p(e,n).height;l+=o;let c=0;for(let e=n;e<=i;e++)c+=p(r,e).width;c+=s;const u=e.measure({width:c,height:l});x.add(t,{layout:e,size_hint:u});const f=new w.Sizeable(u).grow_by(e.sizing.margin);f.height-=o,f.width-=s;const d=[];for(let e=r;e<=a;e++){const t=v[e];"fixed"==t.policy?f.height-=t.height:d.push(e)}if(f.height>0){const p=T(f.height/d.length);for(const t of d)y[t]=A(y[t],p)}const h=[];for(let e=n;e<=i;e++){const t=g[e];"fixed"==t.policy?f.width-=t.width:h.push(e)}if(f.width>0){const p=T(f.width/h.length);for(const t of h)b[t]=A(b[t],p)}});return{size:this._measure_totals(y,b),row_heights:y,col_widths:b,size_hints:x}}_measure_grid(e){const{nrows:i,ncols:o,rows:s,cols:l,rspacing:r,cspacing:c}=this._state,t=n=>{let a;a="fixed"==this.sizing.height_policy&&null!=this.sizing.height?this.sizing.height:e.height!=1/0&&this.is_height_expanding()?Math.max(e.height,n.size.height):n.size.height;let t=0;for(let e=0;e<i;e++){const i=s[e];"max"==i.policy?t+=i.flex:a-=n.row_heights[e]}if(a-=(i-1)*r,0!=t&&a>0)for(let e=0;e<i;e++){const i=s[e];if("max"==i.policy){const s=T(a*(i.flex/t));a-=s,n.row_heights[e]=s,t-=i.flex}}else if(a<0){let t=0;for(let e=0;e<i;e++){"fixed"!=s[e].policy&&t++}let r=-a;for(let e=0;e<i;e++){if("fixed"!=s[e].policy){const i=n.row_heights[e],s=T(r/t);n.row_heights[e]=A(i-s,0),r-=s>i?i:s,t--}}}},n=n=>{let a;a="fixed"==this.sizing.width_policy&&null!=this.sizing.width?this.sizing.width:e.width!=1/0&&this.is_width_expanding()?e.width:n.size.width;let t=0;for(let e=0;e<o;e++){const o=l[e];"fit"==o.policy||"max"==o.policy?t+=o.flex:a-=n.col_widths[e]}if(a-=(o-1)*c,0!=t&&a>0)for(let e=0;e<o;e++){const o=l[e];if("fit"==o.policy||"max"==o.policy){const l=T(a*(o.flex/t));a-=l,n.col_widths[e]=l,t-=o.flex}}else if(a<0){let t=0;for(let e=0;e<o;e++){"fixed"!=l[e].policy&&t++}let r=-a;for(let e=0;e<o;e++){if("fixed"!=l[e].policy){const o=n.col_widths[e],l=T(r/t);n.col_widths[e]=A(o-l,0),r-=l>o?o:l,t--}}}},a=this._measure_cells((e,t)=>{const r=s[e],n=l[t];return{width:"fixed"==n.policy?n.width:1/0,height:"fixed"==r.policy?r.height:1/0}});t(a),n(a);const u=this._measure_cells((e,t)=>({width:a.col_widths[t],height:a.row_heights[e]}));t(u),n(u);const{row_heights:f,col_widths:d}=u;return{size:this._measure_totals(f,d),row_heights:f,col_widths:d}}_measure(e){const{size:t}=this._measure_grid(e);return t}_set_geometry(r,e){super._set_geometry(r,e);const{nrows:n,ncols:a,rspacing:g,cspacing:m}=this._state,{row_heights:i,col_widths:o}=this._measure_grid(r),{size_hints:t}=this._measure_cells((e,t)=>({width:o[t],height:i[e]})),_=this._state.rows.map((e,t)=>Object.assign(Object.assign({},e),{top:0,height:i[t],get bottom(){return this.top+this.height}})),y=this._state.cols.map((e,t)=>Object.assign(Object.assign({},e),{left:0,width:o[t],get right(){return this.left+this.width}})),s=t.map((e,t)=>Object.assign(Object.assign({},t),{outer:new b.BBox,inner:new b.BBox}));for(let e=0,t=this.absolute?r.top:0;e<n;e++){const r=_[e];r.top=t,t+=r.height+g}for(let e=0,t=this.absolute?r.left:0;e<a;e++){const r=y[e];r.left=t,t+=r.width+m}s.foreach(({r0:e,c0:t,r1:r,c1:n},a)=>{const{layout:i,size_hint:o}=a,{sizing:s}=i,{width:l,height:c}=o,u=function(t,r){let n=(r-t)*m;for(let e=t;e<=r;e++)n+=y[e].width;return n}(t,n),f=function(t,r){let n=(r-t)*g;for(let e=t;e<=r;e++)n+=_[e].height;return n}(e,r),d=t==n&&"auto"!=y[t].align?y[t].align:s.halign,h=e==r&&"auto"!=_[e].align?_[e].align:s.valign;let p=y[t].left;"start"==d?p+=s.margin.left:"center"==d?p+=T((u-l)/2):"end"==d&&(p+=u-s.margin.right-l);let v=_[e].top;"start"==h?v+=s.margin.top:"center"==h?v+=T((f-c)/2):"end"==h&&(v+=f-s.margin.bottom-c),a.outer=new b.BBox({left:p,top:v,width:l,height:c})});const f=_.map(()=>({start:new l(()=>0),end:new l(()=>0)})),d=y.map(()=>({start:new l(()=>0),end:new l(()=>0)}));s.foreach(({r0:e,c0:t,r1:r,c1:n},{size_hint:a,outer:i})=>{const{inner:o}=a;null!=o&&(f[e].start.apply(i.top,e=>A(e,o.top)),f[r].end.apply(_[r].bottom-i.bottom,e=>A(e,o.bottom)),d[t].start.apply(i.left,e=>A(e,o.left)),d[n].end.apply(y[n].right-i.right,e=>A(e,o.right)))}),s.foreach(({r0:n,c0:a,r1:i,c1:o},s)=>{const{size_hint:l,outer:c}=s,u=e=>{const t=this.absolute?c:c.relative(),r=t.left+e.left,n=t.top+e.top,a=t.right-e.right,i=t.bottom-e.bottom;return new b.BBox({left:r,top:n,right:a,bottom:i})};if(null!=l.inner){let r=u(l.inner);if(!1!==l.align){const s=f[n].start.get(c.top),l=f[i].end.get(_[i].bottom-c.bottom),e=d[a].start.get(c.left),t=d[o].end.get(y[o].right-c.right);try{r=u({top:s,bottom:l,left:e,right:t})}catch(n){}}s.inner=r}else s.inner=c}),s.foreach((e,{layout:t,outer:r,inner:n})=>{t.set_geometry(r,n)})}}n.Grid=e,e.__name__="Grid";class s extends e{constructor(e){super(),this.items=e.map((e,t)=>({layout:e,row:0,col:t})),this.rows="fit"}}n.Row=s,s.__name__="Row";class c extends e{constructor(e){super(),this.items=e.map((e,t)=>({layout:e,row:t,col:0})),this.cols="fit"}}n.Column=c,c.__name__="Column"},function e(t,r,n,a,i){a();const o=t(142),s=t(141),l=t(43);class c extends o.ContentLayoutable{constructor(e){super(),this.content_size=l.unsized(e,()=>new s.Sizeable(l.size(e)))}_content_size(){return this.content_size}}n.ContentBox=c,c.__name__="ContentBox";class e extends o.Layoutable{constructor(e){super(),this.el=e}_measure(e){const t=new s.Sizeable(e).bounded_to(this.sizing.size);return l.sized(this.el,t,()=>{const e=new s.Sizeable(l.content_size(this.el)),{border:t,padding:r}=l.extents(this.el);return e.grow_by(t).grow_by(r).map(Math.ceil)})}}n.VariadicBox=e,e.__name__="VariadicBox";class u extends e{constructor(e){super(e),this._cache=new Map}_measure(e){const{width:t,height:r}=e,n=`${t},${r}`;let a=this._cache.get(n);return null==a&&(a=super._measure(e),this._cache.set(n,a)),a}invalidate_cache(){this._cache.clear()}}n.CachedVariadicBox=u,u.__name__="CachedVariadicBox"},function e(t,r,n,a,i){a();const f=t(141),o=t(142),u=t(99);class s extends o.Layoutable{constructor(){super(...arguments),this.min_border={left:0,top:0,right:0,bottom:0},this.padding={left:0,top:0,right:0,bottom:0}}*[Symbol.iterator](){yield this.top_panel,yield this.bottom_panel,yield this.left_panel,yield this.right_panel,yield this.center_panel}_measure(e){e=new f.Sizeable({width:"fixed"==this.sizing.width_policy||e.width==1/0?this.sizing.width:e.width,height:"fixed"==this.sizing.height_policy||e.height==1/0?this.sizing.height:e.height});const t=this.left_panel.measure({width:0,height:e.height}),r=Math.max(t.width,this.min_border.left)+this.padding.left,n=this.right_panel.measure({width:0,height:e.height}),a=Math.max(n.width,this.min_border.right)+this.padding.right,i=this.top_panel.measure({width:e.width,height:0}),o=Math.max(i.height,this.min_border.top)+this.padding.top,s=this.bottom_panel.measure({width:e.width,height:0}),l=Math.max(s.height,this.min_border.bottom)+this.padding.bottom,c=new f.Sizeable(e).shrink_by({left:r,right:a,top:o,bottom:l}),u=this.center_panel.measure(c);return{width:r+u.width+a,height:o+u.height+l,inner:{left:r,right:a,top:o,bottom:l},align:(()=>{const{width_policy:e,height_policy:t}=this.center_panel.sizing;return"fixed"!=e&&"fixed"!=t})()}}_set_geometry(e,t){super._set_geometry(e,t),this.center_panel.set_geometry(t);const r=this.left_panel.measure({width:0,height:e.height}),n=this.right_panel.measure({width:0,height:e.height}),a=this.top_panel.measure({width:e.width,height:0}),i=this.bottom_panel.measure({width:e.width,height:0}),{left:o,top:s,right:l,bottom:c}=t;this.top_panel.set_geometry(new u.BBox({left:o,right:l,bottom:s,height:a.height})),this.bottom_panel.set_geometry(new u.BBox({left:o,right:l,top:c,height:i.height})),this.left_panel.set_geometry(new u.BBox({top:s,bottom:c,right:o,width:r.width})),this.right_panel.set_geometry(new u.BBox({top:s,bottom:c,left:l,width:n.width}))}}n.BorderLayout=s,s.__name__="BorderLayout"},function n(e,t,r,a,i){a();const o=e(1),s=e(139),l=e(10),n=e(143),c=e(20),u=o.__importStar(e(48));class f extends s.TextAnnotationView{_get_size(){const{ctx:e}=this.layer;this.visuals.text.set_value(e);const{width:t}=e.measureText(this.model.text),{height:r}=n.font_metrics(e.font);return{width:t,height:r}}_render(){const{angle:e,angle_units:t}=this.model,r=l.resolve_angle(e,t),n=null!=this.layout?this.layout:this.plot_view.frame,a=this.coordinates.x_scale,i=this.coordinates.y_scale;let o="data"==this.model.x_units?a.compute(this.model.x):n.bbox.xview.compute(this.model.x),s="data"==this.model.y_units?i.compute(this.model.y):n.bbox.yview.compute(this.model.y);o+=this.model.x_offset,s-=this.model.y_offset;("canvas"==this.model.render_mode?this._canvas_text.bind(this):this._css_text.bind(this))(this.layer.ctx,this.model.text,o,s,r)}}r.LabelView=f,f.__name__="LabelView";class d extends s.TextAnnotation{constructor(e){super(e)}static init_Label(){this.prototype.default_view=f,this.mixins([u.Text,["border_",u.Line],["background_",u.Fill]]),this.define(({Number:e,String:t,Angle:r})=>({x:[e],x_units:[c.SpatialUnits,"data"],y:[e],y_units:[c.SpatialUnits,"data"],text:[t,""],angle:[r,0],angle_units:[c.AngleUnits,"rad"],x_offset:[e,0],y_offset:[e,0]})),this.override({background_fill_color:null,border_line_color:null})}}r.Label=d,d.__name__="Label",d.init_Label()},function e(t,r,n,a,i){a();const o=t(1),s=t(139),l=t(56),c=t(130),e=o.__importStar(t(48)),u=t(20),f=t(43),d=o.__importStar(t(18)),h=t(143);class p extends s.TextAnnotationView{set_data(e){l.DataAnnotationView.prototype.set_data.call(this,e)}initialize(){if(super.initialize(),this.set_data(this.model.source),"css"==this.model.render_mode)for(let e=0,t=this.text.length;e<t;e++){const e=f.div({style:{display:"none"}});this.el.appendChild(e)}}connect_signals(){super.connect_signals();const e=()=>{this.set_data(this.model.source),"css"==this.model.render_mode?this.render():this.request_render()};this.connect(this.model.change,e),this.connect(this.model.source.streaming,e),this.connect(this.model.source.patching,e),this.connect(this.model.source.change,e)}_calculate_text_dimensions(e,t){const{width:r}=e.measureText(t),{height:n}=h.font_metrics(this.visuals.text.font_value(0));return[r,n]}_map_data(){const e=this.coordinates.x_scale,t=this.coordinates.y_scale,r=null!=this.layout?this.layout:this.plot_view.frame;return["data"==this.model.x_units?e.v_compute(this._x):r.bbox.xview.v_compute(this._x),"data"==this.model.y_units?t.v_compute(this._y):r.bbox.yview.v_compute(this._y)]}_render(){const r="canvas"==this.model.render_mode?this._v_canvas_text.bind(this):this._v_css_text.bind(this),{ctx:n}=this.layer,[a,i]=this._map_data();for(let e=0,t=this.text.length;e<t;e++)r(n,e,this.text.get(e),a[e]+this.x_offset.get(e),i[e]-this.y_offset.get(e),this.angle.get(e))}_get_size(){const{ctx:e}=this.layer;this.visuals.text.set_vectorize(e,0);const{width:t}=e.measureText(this.text.get(0)),{height:r}=h.font_metrics(e.font);return{width:t,height:r}}_v_canvas_text(e,t,r,n,a,i){this.visuals.text.set_vectorize(e,t);const o=this._calculate_bounding_box_dimensions(e,r);e.save(),e.beginPath(),e.translate(n,a),e.rotate(i),e.rect(o[0],o[1],o[2],o[3]),this.visuals.background_fill.doit&&(this.visuals.background_fill.set_vectorize(e,t),e.fill()),this.visuals.border_line.doit&&(this.visuals.border_line.set_vectorize(e,t),e.stroke()),this.visuals.text.doit&&(this.visuals.text.set_vectorize(e,t),e.fillText(r,0,0)),e.restore()}_v_css_text(e,t,r,n,a,i){const o=this.el.children[t];o.textContent=r,this.visuals.text.set_vectorize(e,t);const[s,l]=this._calculate_bounding_box_dimensions(e,r);o.style.position="absolute",o.style.left=`${n+s}px`,o.style.top=`${a+l}px`,o.style.color=e.fillStyle,o.style.font=e.font,o.style.lineHeight="normal",i&&(o.style.transform=`rotate(${i}rad)`),this.visuals.background_fill.doit&&(this.visuals.background_fill.set_vectorize(e,t),o.style.backgroundColor=e.fillStyle),this.visuals.border_line.doit&&(this.visuals.border_line.set_vectorize(e,t),o.style.borderStyle=e.lineDash.length<2?"solid":"dashed",o.style.borderWidth=`${e.lineWidth}px`,o.style.borderColor=e.strokeStyle),f.display(o)}}n.LabelSetView=p,p.__name__="LabelSetView";class v extends s.TextAnnotation{constructor(e){super(e)}static init_LabelSet(){this.prototype.default_view=p,this.mixins([e.TextVector,["border_",e.LineVector],["background_",e.FillVector]]),this.define(({Ref:e})=>({x:[d.XCoordinateSpec,{field:"x"}],y:[d.YCoordinateSpec,{field:"y"}],x_units:[u.SpatialUnits,"data"],y_units:[u.SpatialUnits,"data"],text:[d.StringSpec,{field:"text"}],angle:[d.AngleSpec,0],x_offset:[d.NumberSpec,{value:0}],y_offset:[d.NumberSpec,{value:0}],source:[e(c.ColumnDataSource),()=>new c.ColumnDataSource]})),this.override({background_fill_color:null,border_line_color:null})}}n.LabelSet=v,v.__name__="LabelSet",v.init_LabelSet()},function e(t,r,n,a,i){a();const o=t(1),s=t(40),l=t(229),c=t(20),e=o.__importStar(t(48)),u=t(15),f=t(140),y=t(143),b=t(99),x=t(9),w=t(8),A=t(11);class d extends s.AnnotationView{update_layout(){const{panel:e}=this;this.layout=null!=e?new f.SideLayout(e,()=>this.get_size()):void 0}cursor(e,t){return"none"==this.model.click_policy?null:"pointer"}get legend_padding(){return null!=this.model.border_line_color?this.model.padding:0}connect_signals(){super.connect_signals(),this.connect(this.model.change,()=>this.request_render()),this.connect(this.model.item_change,()=>this.request_render())}compute_legend_bbox(){const t=this.model.get_legend_names(),{glyph_height:e,glyph_width:r}=this.model,{label_height:n,label_width:a}=this.model;this.max_label_height=x.max([y.font_metrics(this.visuals.label_text.font_value()).height,n,e]);const{ctx:i}=this.layer;i.save(),this.visuals.label_text.set_value(i),this.text_widths=new Map;for(const e of t)this.text_widths.set(e,x.max([i.measureText(e).width,a]));this.visuals.title_text.set_value(i),this.title_height=this.model.title?y.font_metrics(this.visuals.title_text.font_value()).height+this.model.title_standoff:0,this.title_width=this.model.title?i.measureText(this.model.title).width:0,i.restore();const o=Math.max(x.max([...this.text_widths.values()]),0),s=this.model.margin,{legend_padding:l}=this,c=this.model.spacing,{label_standoff:u}=this.model;let f,d;if("vertical"==this.model.orientation)f=t.length*this.max_label_height+Math.max(t.length-1,0)*c+2*l+this.title_height,d=x.max([o+r+u+2*l,this.title_width+2*l]);else{let e=2*l+Math.max(t.length-1,0)*c;for(const[,t]of this.text_widths)e+=x.max([t,a])+r+u;d=x.max([this.title_width+2*l,e]),f=this.max_label_height+this.title_height+2*l}const h=null!=this.layout?this.layout:this.plot_view.frame,[p,v]=h.bbox.ranges,{location:g}=this.model;let m,_;if(w.isString(g))switch(g){case"top_left":m=p.start+s,_=v.start+s;break;case"top":case"top_center":m=(p.end+p.start)/2-d/2,_=v.start+s;break;case"top_right":m=p.end-s-d,_=v.start+s;break;case"bottom_right":m=p.end-s-d,_=v.end-s-f;break;case"bottom":case"bottom_center":m=(p.end+p.start)/2-d/2,_=v.end-s-f;break;case"bottom_left":m=p.start+s,_=v.end-s-f;break;case"left":case"center_left":m=p.start+s,_=(v.end+v.start)/2-f/2;break;case"center":case"center_center":m=(p.end+p.start)/2-d/2,_=(v.end+v.start)/2-f/2;break;case"right":case"center_right":m=p.end-s-d,_=(v.end+v.start)/2-f/2}else if(w.isArray(g)&&2==g.length){const[t,e]=g;m=h.bbox.xview.compute(t),_=h.bbox.yview.compute(e)-f}else A.unreachable();return new b.BBox({left:m,top:_,width:d,height:f})}interactive_bbox(){return this.compute_legend_bbox()}interactive_hit(e,t){return this.interactive_bbox().contains(e,t)}on_hit(o,s){let l;const{glyph_width:c}=this.model,{legend_padding:u}=this,f=this.model.spacing,{label_standoff:d}=this.model;let h=l=u;const p=this.compute_legend_bbox(),v="vertical"==this.model.orientation;for(const i of this.model.items){const e=i.get_labels_list_from_label_prop();for(const a of e){const e=p.x+h,t=p.y+l+this.title_height;let r,n;[r,n]=v?[p.width-2*u,this.max_label_height]:[this.text_widths.get(a)+c+d,this.max_label_height];if(new b.BBox({left:e,top:t,width:r,height:n}).contains(o,s)){switch(this.model.click_policy){case"hide":for(const o of i.renderers)o.visible=!o.visible;break;case"mute":for(const o of i.renderers)o.muted=!o.muted}return!0}v?l+=this.max_label_height+f:h+=this.text_widths.get(a)+c+d+f}}return!1}_render(){if(0==this.model.items.length)return;for(const e of this.model.items)e.legend=this.model;const{ctx:e}=this.layer,t=this.compute_legend_bbox();e.save(),this._draw_legend_box(e,t),this._draw_legend_items(e,t),this._draw_title(e,t),e.restore()}_draw_legend_box(e,t){e.beginPath(),e.rect(t.x,t.y,t.width,t.height),this.visuals.background_fill.set_value(e),e.fill(),this.visuals.border_line.doit&&(this.visuals.border_line.set_value(e),e.stroke())}_draw_legend_items(s,l){const{glyph_width:c,glyph_height:u}=this.model,{legend_padding:f}=this,d=this.model.spacing,{label_standoff:h}=this.model;let p=f,v=f;const g="vertical"==this.model.orientation;for(const o of this.model.items){const e=o.get_labels_list_from_label_prop(),a=o.get_field_from_label_prop();if(0==e.length)continue;const i=(()=>{switch(this.model.click_policy){case"none":return!0;case"hide":return x.every(o.renderers,e=>e.visible);case"mute":return x.every(o.renderers,e=>!e.muted)}})();for(const x of e){const r=l.x+p,n=l.y+v+this.title_height,e=r+c,t=n+u;g?v+=this.max_label_height+d:p+=this.text_widths.get(x)+c+h+d,this.visuals.label_text.set_value(s),s.fillText(x,e+h,n+this.max_label_height/2);for(const l of o.renderers){const c=this.plot_view.renderer_view(l);null==c||c.draw_legend(s,r,e,n,t,a,x,o.index)}if(!i){let e,t;[e,t]=g?[l.width-2*f,this.max_label_height]:[this.text_widths.get(x)+c+h,this.max_label_height],s.beginPath(),s.rect(r,n,e,t),this.visuals.inactive_fill.set_value(s),s.fill()}}}}_draw_title(e,t){const{title:r}=this.model;r&&this.visuals.title_text.doit&&(e.save(),e.translate(t.x0,t.y0+this.title_height),this.visuals.title_text.set_value(e),e.fillText(r,this.legend_padding,this.legend_padding-this.model.title_standoff),e.restore())}_get_size(){const{width:e,height:t}=this.compute_legend_bbox();return{width:e+2*this.model.margin,height:t+2*this.model.margin}}}n.LegendView=d,d.__name__="LegendView";class h extends s.Annotation{constructor(e){super(e)}initialize(){super.initialize(),this.item_change=new u.Signal0(this,"item_change")}static init_Legend(){this.prototype.default_view=d,this.mixins([["label_",e.Text],["title_",e.Text],["inactive_",e.Fill],["border_",e.Line],["background_",e.Fill]]),this.define(({Number:e,String:t,Array:r,Tuple:n,Or:a,Ref:i,Nullable:o})=>({orientation:[c.Orientation,"vertical"],location:[a(c.LegendLocation,n(e,e)),"top_right"],title:[o(t),null],title_standoff:[e,5],label_standoff:[e,5],glyph_height:[e,20],glyph_width:[e,20],label_height:[e,20],label_width:[e,20],margin:[e,10],padding:[e,10],spacing:[e,3],items:[r(i(l.LegendItem)),[]],click_policy:[c.LegendClickPolicy,"none"]})),this.override({border_line_color:"#e5e5e5",border_line_alpha:.5,border_line_width:1,background_fill_color:"#ffffff",background_fill_alpha:.95,inactive_fill_color:"white",inactive_fill_alpha:.7,label_text_font_size:"13px",label_text_baseline:"middle",title_text_font_size:"13px",title_text_font_style:"italic"})}get_legend_names(){const r=[];for(const t of this.items){const e=t.get_labels_list_from_label_prop();r.push(...e)}return r}}n.Legend=h,h.__name__="Legend",h.init_Legend()},function e(t,r,n,a,i){a();const o=t(1),s=t(53),l=t(61),e=t(57),c=t(230),u=o.__importStar(t(18)),f=t(19),d=t(9);class h extends s.Model{constructor(e){super(e)}static init_LegendItem(){this.define(({Int:e,Array:t,Ref:r,Nullable:n})=>({label:[u.NullStringSpec,null],renderers:[t(r(l.GlyphRenderer)),[]],index:[n(e),null]}))}_check_data_sources_on_renderers(){if(null!=this.get_field_from_label_prop()){if(this.renderers.length<1)return!1;const t=this.renderers[0].data_source;if(null!=t)for(const e of this.renderers)if(e.data_source!=t)return!1}return!0}_check_field_label_on_data_source(){const t=this.get_field_from_label_prop();if(null!=t){if(this.renderers.length<1)return!1;const e=this.renderers[0].data_source;if(null!=e&&!d.includes(e.columns(),t))return!1}return!0}initialize(){super.initialize(),this.legend=null,this.connect(this.change,()=>{var e;return null===(e=this.legend)||void 0===e?void 0:e.item_change.emit()});this._check_data_sources_on_renderers()||f.logger.error("Non matching data sources on legend item renderers");this._check_field_label_on_data_source()||f.logger.error(`Bad column name on label: ${this.label}`)}get_field_from_label_prop(){const{label:e}=this;return c.isField(e)?e.field:null}get_labels_list_from_label_prop(){if(c.isValue(this.label)){const{value:r}=this.label;return null!=r?[r]:[]}const r=this.get_field_from_label_prop();if(null!=r){let t;if(!this.renderers[0]||null==this.renderers[0].data_source)return["No source found"];if(t=this.renderers[0].data_source,t instanceof e.ColumnarDataSource){const e=t.get_column(r);return null!=e?d.uniq(Array.from(e)):["Invalid field"]}}return[]}}n.LegendItem=h,h.__name__="LegendItem",h.init_LegendItem()},function e(t,r,n,a,i){a();const o=t(8);n.isValue=function(e){return o.isPlainObject(e)&&"value"in e},n.isField=function(e){return o.isPlainObject(e)&&"field"in e},n.isExpr=function(e){return o.isPlainObject(e)&&"expr"in e}},function e(t,r,n,a,i){a();const o=t(1),s=t(40),l=o.__importStar(t(48)),c=t(20);class u extends s.AnnotationView{connect_signals(){super.connect_signals(),this.connect(this.model.change,()=>this.request_render())}_render(){const{xs:e,ys:t}=this.model;if(e.length!=t.length)return;const r=e.length;if(r<3)return;const{frame:n}=this.plot_view,{ctx:a}=this.layer,i=this.coordinates.x_scale,o=this.coordinates.y_scale,{screen:s}=this.model;function l(e,t,r,n){return s?e:"data"==t?r.v_compute(e):n.v_compute(e)}const c=l(e,this.model.xs_units,i,n.bbox.xview),u=l(t,this.model.ys_units,o,n.bbox.yview);a.beginPath();for(let e=0;e<r;e++)a.lineTo(c[e],u[e]);a.closePath(),this.visuals.fill.doit&&(this.visuals.fill.set_value(a),a.fill()),this.visuals.hatch.doit&&(this.visuals.hatch.set_value(a),a.fill()),this.visuals.line.doit&&(this.visuals.line.set_value(a),a.stroke())}}n.PolyAnnotationView=u,u.__name__="PolyAnnotationView";class f extends s.Annotation{constructor(e){super(e)}static init_PolyAnnotation(){this.prototype.default_view=u,this.mixins([l.Line,l.Fill,l.Hatch]),this.define(({Number:e,Array:t})=>({xs:[t(e),[]],xs_units:[c.SpatialUnits,"data"],ys:[t(e),[]],ys_units:[c.SpatialUnits,"data"]})),this.internal(({Boolean:e})=>({screen:[e,!1]})),this.override({fill_color:"#fff9ba",fill_alpha:.4,line_color:"#cccccc",line_alpha:.3})}update({xs:e,ys:t}){this.setv({xs:e,ys:t,screen:!0},{check_eq:!1})}}n.PolyAnnotation=f,f.__name__="PolyAnnotation",f.init_PolyAnnotation()},function e(t,r,n,a,i){a();const o=t(1),s=t(40),l=o.__importStar(t(48));class c extends s.AnnotationView{connect_signals(){super.connect_signals(),this.connect(this.model.change,()=>this.request_render())}_render(){const{gradient:t,y_intercept:r}=this.model;if(null==t||null==r)return;const{frame:n}=this.plot_view,a=this.coordinates.x_scale,i=this.coordinates.y_scale;let o,s,l,c;if(0==t)o=i.compute(r),s=o,l=n.bbox.left,c=l+n.bbox.width;else{o=n.bbox.top,s=o+n.bbox.height;const u=(i.invert(o)-r)/t,e=(i.invert(s)-r)/t;l=a.compute(u),c=a.compute(e)}const{ctx:u}=this.layer;u.save(),u.beginPath(),this.visuals.line.set_value(u),u.moveTo(l,o),u.lineTo(c,s),u.stroke(),u.restore()}}n.SlopeView=c,c.__name__="SlopeView";class u extends s.Annotation{constructor(e){super(e)}static init_Slope(){this.prototype.default_view=c,this.mixins(l.Line),this.define(({Number:e,Nullable:t})=>({gradient:[t(e),null],y_intercept:[t(e),null]})),this.override({line_color:"black"})}}n.Slope=u,u.__name__="Slope",u.init_Slope()},function e(t,r,n,a,i){a();const o=t(1),s=t(40),l=o.__importStar(t(48)),c=t(20);class u extends s.AnnotationView{connect_signals(){super.connect_signals(),this.connect(this.model.change,()=>this.plot_view.request_paint(this))}_render(){const{location:r}=this.model;if(null==r)return;const{frame:e}=this.plot_view,t=this.coordinates.x_scale,n=this.coordinates.y_scale,a=(e,t)=>"data"==this.model.location_units?e.compute(r):this.model.for_hover?r:t.compute(r);let i,o,s,l;"width"==this.model.dimension?(s=a(n,e.bbox.yview),o=e.bbox.left,l=e.bbox.width,i=this.model.line_width):(s=e.bbox.top,o=a(t,e.bbox.xview),l=this.model.line_width,i=e.bbox.height);const{ctx:c}=this.layer;c.save(),c.beginPath(),this.visuals.line.set_value(c),c.moveTo(o,s),"width"==this.model.dimension?c.lineTo(o+l,s):c.lineTo(o,s+i),c.stroke(),c.restore()}}n.SpanView=u,u.__name__="SpanView";class f extends s.Annotation{constructor(e){super(e)}static init_Span(){this.prototype.default_view=u,this.mixins(l.Line),this.define(({Number:e,Nullable:t})=>({render_mode:[c.RenderMode,"canvas"],location:[t(e),null],location_units:[c.SpatialUnits,"data"],dimension:[c.Dimension,"width"]})),this.internal(({Boolean:e})=>({for_hover:[e,!1]})),this.override({line_color:"black"})}}n.Span=f,f.__name__="Span",f.init_Span()},function e(t,r,n,a,i){a();const o=t(40),s=t(235),l=t(122),c=t(43),e=t(140),u=t(99);class f extends o.AnnotationView{constructor(){super(...arguments),this._invalidate_toolbar=!0,this._previous_bbox=new u.BBox}update_layout(){this.layout=new e.SideLayout(this.panel,()=>this.get_size(),!0)}initialize(){super.initialize(),this.el=c.div(),this.plot_view.canvas_view.add_event(this.el)}async lazy_initialize(){await super.lazy_initialize(),this._toolbar_view=await l.build_view(this.model.toolbar,{parent:this}),this.plot_view.visibility_callbacks.push(e=>this._toolbar_view.set_visibility(e))}remove(){this._toolbar_view.remove(),c.remove(this.el),super.remove()}render(){this.model.visible||c.undisplay(this.el),super.render()}_render(){const{bbox:e}=this.layout;this._previous_bbox.equals(e)||(c.position(this.el,e),this._previous_bbox=e),this._invalidate_toolbar&&(this.el.style.position="absolute",this.el.style.overflow="hidden",this._toolbar_view.render(),c.empty(this.el),this.el.appendChild(this._toolbar_view.el),this._invalidate_toolbar=!1),c.display(this.el)}_get_size(){const{tools:e,logo:t}=this.model.toolbar;return{width:30*e.length+(null!=t?25:0),height:30}}}n.ToolbarPanelView=f,f.__name__="ToolbarPanelView";class d extends o.Annotation{constructor(e){super(e)}static init_ToolbarPanel(){this.prototype.default_view=f,this.define(({Ref:e})=>({toolbar:[e(s.Toolbar)]}))}}n.ToolbarPanel=d,d.__name__="ToolbarPanel",d.init_ToolbarPanel()},function e(t,r,i,n,a){n();const o=t(8),s=t(9),l=t(13),c=t(236),u=t(237),e=t(247),f=t(248);i.Drag=c.Tool,i.Inspection=c.Tool,i.Scroll=c.Tool,i.Tap=c.Tool;const d=e=>{switch(e){case"tap":return"active_tap";case"pan":return"active_drag";case"pinch":case"scroll":return"active_scroll";case"multi":return"active_multi"}return null},h=e=>"tap"==e||"pan"==e;class p extends f.ToolbarBase{constructor(e){super(e)}static init_Toolbar(){this.prototype.default_view=f.ToolbarBaseView,this.define(({Or:e,Ref:t,Auto:r,Null:n,Nullable:a})=>({active_drag:[e(t(i.Drag),r,n),"auto"],active_inspect:[e(t(i.Inspection),r,n),"auto"],active_scroll:[e(t(i.Scroll),r,n),"auto"],active_tap:[e(t(i.Tap),r,n),"auto"],active_multi:[a(t(u.GestureTool)),null]}))}connect_signals(){super.connect_signals();const{tools:e,active_drag:t,active_inspect:r,active_scroll:n,active_tap:a,active_multi:i}=this.properties;this.on_change([e,t,r,n,a,i],()=>this._init_tools())}_init_tools(){if(super._init_tools(),"auto"==this.active_inspect);else if(this.active_inspect instanceof e.InspectTool){let t=!1;for(const e of this.inspectors)e!=this.active_inspect?e.active=!1:t=!0;t||(this.active_inspect=null)}else if(o.isArray(this.active_inspect)){const a=s.intersection(this.active_inspect,this.inspectors);a.length!=this.active_inspect.length&&(this.active_inspect=a);for(const a of this.inspectors)s.includes(this.active_inspect,a)||(a.active=!1)}else if(null==this.active_inspect)for(const a of this.inspectors)a.active=!1;const a=e=>{e.active?this._active_change(e):e.active=!0};for(const a of l.values(this.gestures)){a.tools=s.sort_by(a.tools,e=>e.default_order);for(const e of a.tools)this.connect(e.properties.active.change,()=>this._active_change(e))}for(const[r,n]of l.entries(this.gestures)){const t=d(r);if(t){const e=this[t];"auto"==e?0!=n.tools.length&&h(r)&&a(n.tools[0]):null!=e&&(s.includes(this.tools,e)?a(e):this[t]=null)}}}}i.Toolbar=p,p.__name__="Toolbar",p.init_Toolbar()},function e(t,r,n,a,i){a();const o=t(42),u=t(9),s=t(53);class l extends o.View{get plot_view(){return this.parent}get plot_model(){return this.parent.model}connect_signals(){super.connect_signals(),this.connect(this.model.properties.active.change,()=>{this.model.active?this.activate():this.deactivate()})}activate(){}deactivate(){}}n.ToolView=l,l.__name__="ToolView";class e extends s.Model{constructor(e){super(e)}static init_Tool(){this.prototype._known_aliases=new Map,this.define(({String:e,Nullable:t})=>({description:[t(e),null]})),this.internal(({Boolean:e})=>({active:[e,!1]}))}get synthetic_renderers(){return[]}_get_dim_limits([e,t],[r,n],a,i){const o=a.bbox.h_range;let s;"width"==i||"both"==i?(s=[u.min([e,r]),u.max([e,r])],s=[u.max([s[0],o.start]),u.min([s[1],o.end])]):s=[o.start,o.end];const l=a.bbox.v_range;let c;return"height"==i||"both"==i?(c=[u.min([t,n]),u.max([t,n])],c=[u.max([c[0],l.start]),u.min([c[1],l.end])]):c=[l.start,l.end],[s,c]}static register_alias(e,t){this.prototype._known_aliases.set(e,t)}static from_string(e){const t=this.prototype._known_aliases.get(e);if(null!=t)return t();{const t=[...this.prototype._known_aliases.keys()];throw new Error(`unexpected tool name '${e}', possible tools are ${t.join(", ")}`)}}}n.Tool=e,e.__name__="Tool",e.init_Tool()},function t(e,r,n,a,i){a();const o=e(238),t=e(246);class s extends o.ButtonToolView{}n.GestureToolView=s,s.__name__="GestureToolView";class l extends o.ButtonTool{constructor(e){super(e),this.button_view=t.OnOffButtonView}}n.GestureTool=l,l.__name__="GestureTool"},function t(e,r,n,a,i){a();const o=e(1),s=o.__importDefault(e(239)),l=e(240),c=e(236),u=e(43),f=e(34),t=e(8),d=e(9),h=o.__importStar(e(241)),p=h,v=o.__importDefault(e(242)),g=o.__importDefault(e(243)),m=e(244);class _ extends l.DOMView{initialize(){super.initialize();const n=this.model.menu;if(null!=n){const e=this.parent.model.toolbar_location,t="left"==e||"above"==e,r=this.parent.model.horizontal?"vertical":"horizontal";this._menu=new m.ContextMenu(t?d.reversed(n):n,{orientation:r,prevent_hide:e=>e.target==this.el})}this._hammer=new s.default(this.el,{touchAction:"auto",inputClass:s.default.TouchMouseInput}),this.connect(this.model.change,()=>this.render()),this._hammer.on("tap",e=>{var t;(null===(t=this._menu)||void 0===t?void 0:t.is_open)?this._menu.hide():e.target==this.el&&this._clicked()}),this._hammer.on("press",()=>this._pressed())}remove(){var e;this._hammer.destroy(),null===(e=this._menu)||void 0===e||e.remove(),super.remove()}styles(){return[...super.styles(),h.default,v.default,g.default]}css_classes(){return super.css_classes().concat(p.toolbar_button)}render(){u.empty(this.el);const e=this.model.computed_icon;t.isString(e)&&(f.startsWith(e,"data:image")?this.el.style.backgroundImage="url('"+e+"')":this.el.classList.add(e)),this.el.title=this.model.tooltip,null!=this._menu&&this.root.el.appendChild(this._menu.el)}_pressed(){var e;const{left:t,top:r,right:n,bottom:a}=this.el.getBoundingClientRect(),i=(()=>{switch(this.parent.model.toolbar_location){case"right":return{right:t,top:r};case"left":return{left:n,top:r};case"above":return{left:t,top:a};case"below":return{left:t,bottom:r}}})();null===(e=this._menu)||void 0===e||e.toggle(i)}}n.ButtonToolButtonView=_,_.__name__="ButtonToolButtonView";class y extends c.ToolView{}n.ButtonToolView=y,y.__name__="ButtonToolView";class b extends c.Tool{constructor(e){super(e)}static init_ButtonTool(){this.internal(({Boolean:e})=>({disabled:[e,!1]}))}_get_dim_tooltip(e){const{description:t,tool_name:r}=this;return null!=t?t:"both"==e?r:`${r} (${"width"==e?"x":"y"}-axis)`}get tooltip(){var e;return null!==(e=this.description)&&void 0!==e?e:this.tool_name}get computed_icon(){return this.icon}get menu(){return null}}n.ButtonTool=b,b.__name__="ButtonTool",b.init_ButtonTool()},function e(t,Be,r,n,a){!function(i,a,e,h){"use strict";var o,s=["","webkit","Moz","MS","ms","o"],t=a.createElement("div"),l=Math.round,p=Math.abs,v=Date.now;function c(e,t,r){return setTimeout(m(e,r),t)}function n(e,t,r){return!!Array.isArray(e)&&(u(e,r[t],r),!0)}function u(e,t,r){var n;if(e)if(e.forEach)e.forEach(t,r);else if(e.length!==h)for(n=0;n<e.length;)t.call(r,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&t.call(r,e[n],n,e)}function r(n,e,t){var a="DEPRECATED METHOD: "+e+"\n"+t+" AT \n";return function(){var e=new Error("get-stack-trace"),t=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=i.console&&(i.console.warn||i.console.log);return r&&r.call(i.console,a,t),n.apply(this,arguments)}}o="function"!=typeof Object.assign?function(e){if(e===h||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(n!==h&&null!==n)for(var a in n)n.hasOwnProperty(a)&&(t[a]=n[a])}return t}:Object.assign;var f=r(function(e,t,r){for(var n=Object.keys(t),a=0;a<n.length;)(!r||r&&e[n[a]]===h)&&(e[n[a]]=t[n[a]]),a++;return e},"extend","Use `assign`."),d=r(function(e,t){return f(e,t,!0)},"merge","Use `assign`.");function g(e,t,r){var n,a=t.prototype;(n=e.prototype=Object.create(a)).constructor=e,n._super=a,r&&o(n,r)}function m(e,t){return function(){return e.apply(t,arguments)}}function _(e,t){return"function"==typeof e?e.apply(t&&t[0]||h,t):e}function y(e,t){return e===h?t:e}function b(t,e,r){u(T(e),function(e){t.addEventListener(e,r,!1)})}function x(t,e,r){u(T(e),function(e){t.removeEventListener(e,r,!1)})}function w(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function A(e,t){return e.indexOf(t)>-1}function T(e){return e.trim().split(/\s+/g)}function k(e,t,r){if(e.indexOf&&!r)return e.indexOf(t);for(var n=0;n<e.length;){if(r&&e[n][r]==t||!r&&e[n]===t)return n;n++}return-1}function M(e){return Array.prototype.slice.call(e,0)}function S(e,r,t){for(var n=[],a=[],i=0;i<e.length;){var o=r?e[i][r]:e[i];k(a,o)<0&&n.push(e[i]),a[i]=o,i++}return t&&(n=r?n.sort(function(e,t){return e[r]>t[r]}):n.sort()),n}function C(e,t){for(var r,n,a=t[0].toUpperCase()+t.slice(1),i=0;i<s.length;){if((n=(r=s[i])?r+a:t)in e)return n;i++}return h}var L=1;function E(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}var D="ontouchstart"in i,O=C(i,"PointerEvent")!==h,P=D&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),I="touch",R="mouse",z=24,N=["x","y"],F=["clientX","clientY"];function j(t,e){var r=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){_(t.options.enable,[t])&&r.handler(e)},this.init()}function B(e,t,r){var n=r.pointers.length,a=r.changedPointers.length,i=1&t&&n-a==0,o=12&t&&n-a==0;r.isFirst=!!i,r.isFinal=!!o,i&&(e.session={}),r.eventType=t,function(e,t){var r=e.session,n=t.pointers,a=n.length;r.firstInput||(r.firstInput=H(t));a>1&&!r.firstMultiple?r.firstMultiple=H(t):1===a&&(r.firstMultiple=!1);var i=r.firstInput,o=r.firstMultiple,s=o?o.center:i.center,l=t.center=U(n);t.timeStamp=v(),t.deltaTime=t.timeStamp-i.timeStamp,t.angle=G(s,l),t.distance=Y(s,l),function(e,t){var r=t.center,n=e.offsetDelta||{},a=e.prevDelta||{},i=e.prevInput||{};1!==t.eventType&&4!==i.eventType||(a=e.prevDelta={x:i.deltaX||0,y:i.deltaY||0},n=e.offsetDelta={x:r.x,y:r.y});t.deltaX=a.x+(r.x-n.x),t.deltaY=a.y+(r.y-n.y)}(r,t),t.offsetDirection=q(t.deltaX,t.deltaY);var c=V(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=p(c.x)>p(c.y)?c.x:c.y,t.scale=o?(u=o.pointers,f=n,Y(f[0],f[1],F)/Y(u[0],u[1],F)):1,t.rotation=o?function(e,t){return G(t[1],t[0],F)+G(e[1],e[0],F)}(o.pointers,n):0,t.maxPointers=r.prevInput?t.pointers.length>r.prevInput.maxPointers?t.pointers.length:r.prevInput.maxPointers:t.pointers.length,function(e,t){var r,n,a,i,o=e.lastInterval||t,s=t.timeStamp-o.timeStamp;if(8!=t.eventType&&(s>25||o.velocity===h)){var l=t.deltaX-o.deltaX,c=t.deltaY-o.deltaY,u=V(s,l,c);n=u.x,a=u.y,r=p(u.x)>p(u.y)?u.x:u.y,i=q(l,c),e.lastInterval=t}else r=o.velocity,n=o.velocityX,a=o.velocityY,i=o.direction;t.velocity=r,t.velocityX=n,t.velocityY=a,t.direction=i}(r,t);var u,f;var d=e.element;w(t.srcEvent.target,d)&&(d=t.srcEvent.target);t.target=d}(e,r),e.emit("hammer.input",r),e.recognize(r),e.session.prevInput=r}function H(e){for(var t=[],r=0;r<e.pointers.length;)t[r]={clientX:l(e.pointers[r].clientX),clientY:l(e.pointers[r].clientY)},r++;return{timeStamp:v(),pointers:t,center:U(t),deltaX:e.deltaX,deltaY:e.deltaY}}function U(e){var t=e.length;if(1===t)return{x:l(e[0].clientX),y:l(e[0].clientY)};for(var r=0,n=0,a=0;a<t;)r+=e[a].clientX,n+=e[a].clientY,a++;return{x:l(r/t),y:l(n/t)}}function V(e,t,r){return{x:t/e||0,y:r/e||0}}function q(e,t){return e===t?1:p(e)>=p(t)?e<0?2:4:t<0?8:16}function Y(e,t,r){r||(r=N);var n=t[r[0]]-e[r[0]],a=t[r[1]]-e[r[1]];return Math.sqrt(n*n+a*a)}function G(e,t,r){r||(r=N);var n=t[r[0]]-e[r[0]],a=t[r[1]]-e[r[1]];return 180*Math.atan2(a,n)/Math.PI}j.prototype={handler:function(){},init:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(E(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(E(this.element),this.evWin,this.domHandler)}};var W={mousedown:1,mousemove:2,mouseup:4},X="mousedown",Z="mousemove mouseup";function J(){this.evEl=X,this.evWin=Z,this.pressed=!1,j.apply(this,arguments)}g(J,j,{handler:function(e){var t=W[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:R,srcEvent:e}))}});var $={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Q={2:I,3:"pen",4:R,5:"kinect"},K="pointerdown",ee="pointermove pointerup pointercancel";function te(){this.evEl=K,this.evWin=ee,j.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(K="MSPointerDown",ee="MSPointerMove MSPointerUp MSPointerCancel"),g(te,j,{handler:function(e){var t=this.store,r=!1,n=e.type.toLowerCase().replace("ms",""),a=$[n],i=Q[e.pointerType]||e.pointerType,o=i==I,s=k(t,e.pointerId,"pointerId");1&a&&(0===e.button||o)?s<0&&(t.push(e),s=t.length-1):12&a&&(r=!0),s<0||(t[s]=e,this.callback(this.manager,a,{pointers:t,changedPointers:[e],pointerType:i,srcEvent:e}),r&&t.splice(s,1))}});var re={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ne="touchstart",ae="touchstart touchmove touchend touchcancel";function ie(){this.evTarget=ne,this.evWin=ae,this.started=!1,j.apply(this,arguments)}function oe(e,t){var r=M(e.touches),n=M(e.changedTouches);return 12&t&&(r=S(r.concat(n),"identifier",!0)),[r,n]}g(ie,j,{handler:function(e){var t=re[e.type];if(1===t&&(this.started=!0),this.started){var r=oe.call(this,e,t);12&t&&r[0].length-r[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:r[0],changedPointers:r[1],pointerType:I,srcEvent:e})}}});var se={touchstart:1,touchmove:2,touchend:4,touchcancel:8},le="touchstart touchmove touchend touchcancel";function ce(){this.evTarget=le,this.targetIds={},j.apply(this,arguments)}function ue(e,t){var r=M(e.touches),n=this.targetIds;if(3&t&&1===r.length)return n[r[0].identifier]=!0,[r,r];var a,i,o=M(e.changedTouches),s=[],l=this.target;if(i=r.filter(function(e){return w(e.target,l)}),1===t)for(a=0;a<i.length;)n[i[a].identifier]=!0,a++;for(a=0;a<o.length;)n[o[a].identifier]&&s.push(o[a]),12&t&&delete n[o[a].identifier],a++;return s.length?[S(i.concat(s),"identifier",!0),s]:void 0}g(ce,j,{handler:function(e){var t=se[e.type],r=ue.call(this,e,t);r&&this.callback(this.manager,t,{pointers:r[0],changedPointers:r[1],pointerType:I,srcEvent:e})}});function fe(){j.apply(this,arguments);var e=m(this.handler,this);this.touch=new ce(this.manager,e),this.mouse=new J(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function de(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,he.call(this,t)):12&e&&he.call(this,t)}function he(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var r={x:t.clientX,y:t.clientY};this.lastTouches.push(r);var n=this.lastTouches;setTimeout(function(){var e=n.indexOf(r);e>-1&&n.splice(e,1)},2500)}}function pe(e){for(var t=e.srcEvent.clientX,r=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var a=this.lastTouches[n],i=Math.abs(t-a.x),o=Math.abs(r-a.y);if(i<=25&&o<=25)return!0}return!1}g(fe,j,{handler:function(e,t,r){var n=r.pointerType==I,a=r.pointerType==R;if(!(a&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(n)de.call(this,t,r);else if(a&&pe.call(this,r))return;this.callback(e,t,r)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ve=C(t.style,"touchAction"),ge=ve!==h,me="compute",_e="auto",ye="manipulation",be="none",xe="pan-x",we="pan-y",Ae=function(){if(!ge)return!1;var t={},r=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(e){t[e]=!r||i.CSS.supports("touch-action",e)}),t}();function Te(e,t){this.manager=e,this.set(t)}Te.prototype={set:function(e){e==me&&(e=this.compute()),ge&&this.manager.element.style&&Ae[e]&&(this.manager.element.style[ve]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return u(this.manager.recognizers,function(e){_(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(e){if(A(e,be))return be;var t=A(e,xe),r=A(e,we);if(t&&r)return be;if(t||r)return t?xe:we;if(A(e,ye))return ye;return _e}(t.join(" "))},preventDefaults:function(e){var t=e.srcEvent,r=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var n=this.actions,a=A(n,be)&&!Ae.none,i=A(n,we)&&!Ae["pan-y"],o=A(n,xe)&&!Ae["pan-x"];if(a){var s=1===e.pointers.length,l=e.distance<2,c=e.deltaTime<250;if(s&&l&&c)return}if(!o||!i)return a||i&&6&r||o&&r&z?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var ke=32;function Me(e){this.options=o({},this.defaults,e||{}),this.id=L++,this.manager=null,this.options.enable=y(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Se(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function Ce(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function Le(e,t){var r=t.manager;return r?r.get(e):e}function Ee(){Me.apply(this,arguments)}function De(){Ee.apply(this,arguments),this.pX=null,this.pY=null}function Oe(){Ee.apply(this,arguments)}function Pe(){Me.apply(this,arguments),this._timer=null,this._input=null}function Ie(){Ee.apply(this,arguments)}function Re(){Ee.apply(this,arguments)}function ze(){Me.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ne(e,t){return(t=t||{}).recognizers=y(t.recognizers,Ne.defaults.preset),new Fe(e,t)}Me.prototype={defaults:{},set:function(e){return o(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(n(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Le(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return n(e,"dropRecognizeWith",this)||(e=Le(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(n(e,"requireFailure",this))return this;var t=this.requireFail;return-1===k(t,e=Le(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(n(e,"dropRequireFailure",this))return this;e=Le(e,this);var t=k(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(t){var r=this,e=this.state;function n(e){r.manager.emit(e,t)}e<8&&n(r.options.event+Se(e)),n(r.options.event),t.additionalEvent&&n(t.additionalEvent),e>=8&&n(r.options.event+Se(e))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=ke},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=o({},e);if(!_(this.options.enable,[this,t]))return this.reset(),void(this.state=ke);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},g(Ee,Me,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,r=e.eventType,n=6&t,a=this.attrTest(e);return n&&(8&r||!a)?16|t:n||a?4&r?8|t:2&t?4|t:2:ke}}),g(De,Ee,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push(we),e&z&&t.push(xe),t},directionTest:function(e){var t=this.options,r=!0,n=e.distance,a=e.direction,i=e.deltaX,o=e.deltaY;return a&t.direction||(6&t.direction?(a=0===i?1:i<0?2:4,r=i!=this.pX,n=Math.abs(e.deltaX)):(a=0===o?1:o<0?8:16,r=o!=this.pY,n=Math.abs(e.deltaY))),e.direction=a,r&&n>t.threshold&&a&t.direction},attrTest:function(e){return Ee.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Ce(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),g(Oe,Ee,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[be]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),g(Pe,Me,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[_e]},process:function(e){var t=this.options,r=e.pointers.length===t.pointers,n=e.distance<t.threshold,a=e.deltaTime>t.time;if(this._input=e,!n||!r||12&e.eventType&&!a)this.reset();else if(1&e.eventType)this.reset(),this._timer=c(function(){this.state=8,this.tryEmit()},t.time,this);else if(4&e.eventType)return 8;return ke},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=v(),this.manager.emit(this.options.event,this._input)))}}),g(Ie,Ee,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[be]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),g(Re,Ee,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return De.prototype.getTouchAction.call(this)},attrTest:function(e){var t,r=this.options.direction;return 30&r?t=e.overallVelocity:6&r?t=e.overallVelocityX:r&z&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&r&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&p(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=Ce(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),g(ze,Me,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ye]},process:function(e){var t=this.options,r=e.pointers.length===t.pointers,n=e.distance<t.threshold,a=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(n&&a&&r){if(4!=e.eventType)return this.failTimeout();var i=!this.pTime||e.timeStamp-this.pTime<t.interval,o=!this.pCenter||Y(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,o&&i?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=c(function(){this.state=8,this.tryEmit()},t.interval,this),2):8}return ke},failTimeout:function(){return this._timer=c(function(){this.state=ke},this.options.interval,this),ke},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ne.VERSION="2.0.7",Ne.defaults={domEvents:!1,touchAction:me,enable:!0,inputTarget:null,inputClass:null,preset:[[Ie,{enable:!1}],[Oe,{enable:!1},["rotate"]],[Re,{direction:6}],[De,{direction:6},["swipe"]],[ze],[ze,{event:"doubletap",taps:2},["tap"]],[Pe]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Fe(e,t){var r;this.options=o({},Ne.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((r=this).options.inputClass||(O?te:P?ce:D?fe:J))(r,B),this.touchAction=new Te(this,this.options.touchAction),je(this,!0),u(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function je(r,n){var a,i=r.element;i.style&&(u(r.options.cssProps,function(e,t){a=C(i.style,t),n?(r.oldCssProps[a]=i.style[a],i.style[a]=e):i.style[a]=r.oldCssProps[a]||""}),n||(r.oldCssProps={}))}Fe.prototype={set:function(e){return o(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var r;this.touchAction.preventDefaults(e);var n=this.recognizers,a=t.curRecognizer;(!a||a&&8&a.state)&&(a=t.curRecognizer=null);for(var i=0;i<n.length;)r=n[i],2===t.stopped||a&&r!=a&&!r.canRecognizeWith(a)?r.reset():r.recognize(e),!a&&14&r.state&&(a=t.curRecognizer=r),i++}},get:function(e){if(e instanceof Me)return e;for(var t=this.recognizers,r=0;r<t.length;r++)if(t[r].options.event==e)return t[r];return null},add:function(e){if(n(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(n(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,r=k(t,e);-1!==r&&(t.splice(r,1),this.touchAction.update())}return this},on:function(e,t){if(e!==h&&t!==h){var r=this.handlers;return u(T(e),function(e){r[e]=r[e]||[],r[e].push(t)}),this}},off:function(e,t){if(e!==h){var r=this.handlers;return u(T(e),function(e){t?r[e]&&r[e].splice(k(r[e],t),1):delete r[e]}),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var r=a.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=t,t.target.dispatchEvent(r)}(e,t);var r=this.handlers[e]&&this.handlers[e].slice();if(r&&r.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var n=0;n<r.length;)r[n](t),n++}},destroy:function(){this.element&&je(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},o(Ne,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:ke,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:z,DIRECTION_ALL:30,Manager:Fe,Input:j,TouchAction:Te,TouchInput:ce,MouseInput:J,PointerEventInput:te,TouchMouseInput:fe,SingleTouchInput:ie,Recognizer:Me,AttrRecognizer:Ee,Tap:ze,Pan:De,Swipe:Re,Pinch:Oe,Rotate:Ie,Press:Pe,on:b,off:x,each:u,merge:d,extend:f,assign:o,inherit:g,bindFn:m,prefixed:C}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=Ne,"function"==typeof He&&He.amd?He(function(){return Ne}):void 0!==Be&&Be.exports?Be.exports=Ne:i.Hammer=Ne}(window,document)},function e(t,r,n,a,i){a();const o=t(42),s=t(43);class l extends o.View{initialize(){super.initialize(),this.el=this._createElement()}remove(){s.remove(this.el),super.remove()}css_classes(){return[]}render(){}renderTo(e){e.appendChild(this.el),this.render()}_createElement(){return s.createElement(this.tagName,{class:this.css_classes()})}}n.DOMView=l,l.__name__="DOMView",l.prototype.tagName="div"},function e(t,r,n,a,i){a(),n.root="bk-root",n.toolbar_hidden="bk-toolbar-hidden",n.toolbar="bk-toolbar",n.button_bar="bk-button-bar",n.logo="bk-logo",n.above="bk-above",n.below="bk-below",n.left="bk-left",n.right="bk-right",n.toolbar_button="bk-toolbar-button",n.active="bk-active",n.default='.bk-root .bk-toolbar-hidden{visibility:hidden;opacity:0;transition:visibility 0.3s linear, opacity 0.3s linear;}.bk-root .bk-toolbar,.bk-root .bk-button-bar{display:flex;display:-webkit-flex;flex-wrap:nowrap;-webkit-flex-wrap:nowrap;align-items:center;-webkit-align-items:center;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;}.bk-root .bk-toolbar .bk-logo{flex-shrink:0;-webkit-flex-shrink:0;}.bk-root .bk-toolbar.bk-above,.bk-root .bk-toolbar.bk-below{flex-direction:row;-webkit-flex-direction:row;justify-content:flex-end;-webkit-justify-content:flex-end;}.bk-root .bk-toolbar.bk-above .bk-button-bar,.bk-root .bk-toolbar.bk-below .bk-button-bar{display:flex;display:-webkit-flex;flex-direction:row;-webkit-flex-direction:row;}.bk-root .bk-toolbar.bk-above .bk-logo,.bk-root .bk-toolbar.bk-below .bk-logo{order:1;-webkit-order:1;margin-left:5px;margin-right:0px;}.bk-root .bk-toolbar.bk-left,.bk-root .bk-toolbar.bk-right{flex-direction:column;-webkit-flex-direction:column;justify-content:flex-start;-webkit-justify-content:flex-start;}.bk-root .bk-toolbar.bk-left .bk-button-bar,.bk-root .bk-toolbar.bk-right .bk-button-bar{display:flex;display:-webkit-flex;flex-direction:column;-webkit-flex-direction:column;}.bk-root .bk-toolbar.bk-left .bk-logo,.bk-root .bk-toolbar.bk-right .bk-logo{order:0;-webkit-order:0;margin-bottom:5px;margin-top:0px;}.bk-root .bk-toolbar-button{width:30px;height:30px;cursor:pointer;background-size:60% 60%;background-origin:border-box;background-color:transparent;background-repeat:no-repeat;background-position:center center;}.bk-root .bk-toolbar-button:hover{background-color:rgba(192, 192, 192, 0.15);}.bk-root .bk-toolbar-button:focus{outline:none;}.bk-root .bk-toolbar-button::-moz-focus-inner{border:0;}.bk-root .bk-toolbar.bk-above .bk-toolbar-button{border-bottom:2px solid transparent;}.bk-root .bk-toolbar.bk-above .bk-toolbar-button.bk-active{border-bottom-color:#26aae1;}.bk-root .bk-toolbar.bk-below .bk-toolbar-button{border-top:2px solid transparent;}.bk-root .bk-toolbar.bk-below .bk-toolbar-button.bk-active{border-top-color:#26aae1;}.bk-root .bk-toolbar.bk-right .bk-toolbar-button{border-left:2px solid transparent;}.bk-root .bk-toolbar.bk-right .bk-toolbar-button.bk-active{border-left-color:#26aae1;}.bk-root .bk-toolbar.bk-left .bk-toolbar-button{border-right:2px solid transparent;}.bk-root .bk-toolbar.bk-left .bk-toolbar-button.bk-active{border-right-color:#26aae1;}.bk-root .bk-button-bar + .bk-button-bar:before{content:" ";display:inline-block;background-color:lightgray;}.bk-root .bk-toolbar.bk-above .bk-button-bar + .bk-button-bar:before,.bk-root .bk-toolbar.bk-below .bk-button-bar + .bk-button-bar:before{height:10px;width:1px;}.bk-root .bk-toolbar.bk-left .bk-button-bar + .bk-button-bar:before,.bk-root .bk-toolbar.bk-right .bk-button-bar + .bk-button-bar:before{height:1px;width:10px;}'},function e(t,r,n,a,i){a(),n.root="bk-root",n.tool_icon_copy_to_clipboard="bk-tool-icon-copy-to-clipboard",n.tool_icon_replace_mode="bk-tool-icon-replace-mode",n.tool_icon_append_mode="bk-tool-icon-append-mode",n.tool_icon_intersect_mode="bk-tool-icon-intersect-mode",n.tool_icon_subtract_mode="bk-tool-icon-subtract-mode",n.tool_icon_clear_selection="bk-tool-icon-clear-selection",n.tool_icon_box_select="bk-tool-icon-box-select",n.tool_icon_box_zoom="bk-tool-icon-box-zoom",n.tool_icon_zoom_in="bk-tool-icon-zoom-in",n.tool_icon_zoom_out="bk-tool-icon-zoom-out",n.tool_icon_help="bk-tool-icon-help",n.tool_icon_hover="bk-tool-icon-hover",n.tool_icon_crosshair="bk-tool-icon-crosshair",n.tool_icon_lasso_select="bk-tool-icon-lasso-select",n.tool_icon_pan="bk-tool-icon-pan",n.tool_icon_xpan="bk-tool-icon-xpan",n.tool_icon_ypan="bk-tool-icon-ypan",n.tool_icon_range="bk-tool-icon-range",n.tool_icon_polygon_select="bk-tool-icon-polygon-select",n.tool_icon_redo="bk-tool-icon-redo",n.tool_icon_reset="bk-tool-icon-reset",n.tool_icon_save="bk-tool-icon-save",n.tool_icon_tap_select="bk-tool-icon-tap-select",n.tool_icon_undo="bk-tool-icon-undo",n.tool_icon_wheel_pan="bk-tool-icon-wheel-pan",n.tool_icon_wheel_zoom="bk-tool-icon-wheel-zoom",n.tool_icon_box_edit="bk-tool-icon-box-edit",n.tool_icon_freehand_draw="bk-tool-icon-freehand-draw",n.tool_icon_poly_draw="bk-tool-icon-poly-draw",n.tool_icon_point_draw="bk-tool-icon-point-draw",n.tool_icon_poly_edit="bk-tool-icon-poly-edit",n.tool_icon_line_edit="bk-tool-icon-line-edit",n.default='.bk-root .bk-tool-icon-copy-to-clipboard{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AUSDBoBvcHQeQAAAG9JREFUWMNjXLhsJcNAAiaGAQYwB/xHwh/Q+ITEkfHQCwEWND4jmeb8H/JpgBwfI6cNBhLSEkqaGXRpgFRAcZoZsmlg1AGjDhh1wKgDRh0w6gCaVcf/R2wIkNqw+D9s0wADvUNiyIYA47BJAwPuAAAj/Cjd0TCN6wAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-replace-mode{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AUFFxokK3gniQAAAHpJREFUWMNjXLhsJcNAAiaGAQajDhhwB7DgEP+PxmeksvjgDwFcLmYkUh2hkBj8IcBIZXsYh1w2/I8v3sgAOM0bLYhGc8GgrwuICgldfQO88pcvXvg/aOuCUQeM5oLRuoCFCJcTbOMh5XOiW0JDNhdQS3y0IBp1ABwAAF8KGrhC1Eg6AAAAAElFTkSuQmCC");}.bk-root .bk-tool-icon-append-mode{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AUFFxkZWD04WwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAoUlEQVRYw+1WQQ6AIAwrhO8Y/bIXEz9jIMSDr8ETCUEPQzA4pMeFLKNbu4l5WR0CDOMEALBGIzMuQIBEZQjPgP9JLjwTfBjY9sO9lZsFA9IafZng3BlIyVefgd8XQFZBAWe8jfNxwsDhir6rzoCiPiy1K+J8/FRQemv2XfAdFcQ9znU4Viqg9ta1qYJ+D1BnAIBrkgGVOrXNqUA9rbyZm/AEzFh4jEeY/soAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-intersect-mode{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AUFFxkrkOpp2wAAAPhJREFUWMPtV1EKwjAMTUavI3oawR/vtn5srJdREfzwMvHHQlcT2mpdMzFfWxiP5r2+JMN+mAiCOB72CABgR1cln4oOGocJnuMTSxWk8jMm7OggYkYXA9gPE3uyd8NXHONJ+eYMdE/NqCJmEZ5ZqlJJ4sUksKN7cYSaPoCZFWR1QI+Xm1fBACU63Cw22x0AAJxudwrffVwvZ+JmQdAHZkw0d4EpAMCw8k87pMdbnwtizQumJYv3nwV6XOA1qbUT/oQLUJgFRbsiNwFVucBIlyR3p0tdMp+XmFjfLKi1LatyAXtCRjPWBdL3Ke3VuACJKFfDr/xFN2fgAR/Go0qaLlmEAAAAAElFTkSuQmCC");}.bk-root .bk-tool-icon-subtract-mode{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AUFFxgsF5XNOQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABFUlEQVRYw9VWUQqDMAxNpWfxQxD1MoP97G7zQ5mH2RTZYLtM9lWoMbXtxLXNX4OG9r28l4hrd0PQoqxqAACYpxH25C/nkwCHyCBwSPoS09k1T5Fo+4EiExcC4v584xGFmyIXHBLRISAVZyZufUPVa4rcrwmPDgr93ylo+2GliLRUYHK6th/o/6r7nfLpqaCsagEA8Hh9FmcNKeRmgeYDC+SCq0B6FFi8/BcV6BdR9cL3gCv3ijPKOacsn3rBEcjmaVxpfGcg4wHxzgJJnc6241Hn23DERFRAu1bNcWa3Q0uXi62XR6sCaWoSejbtdLYmU3kTEunNgj0bUbQqYG/IcMaqwPS9jftoVCAQ0ZVDJwf0zQdH4AsyW6fpQu4YegAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-clear-selection{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AUGEhcuan3d3wAAAoRJREFUWMPtlzFP3EAQhd+b3TNSzg0N5TWXLkJQUUaKhIQ4fgP/g5ArrriE/I3opEgRrZtIVJR0FJQ010SioUmEZHtnUpwN9gWHGA5BJCy58MraffvmfZ41v3z9hqe8BE98vQh4cgG+Ydzmnrng8efvQJNi/uN7dznx/B3ggtfhf4ehNdUttRzBDIm/2VTiiWCG1HK0nc+3UWtq8BQIiEEakEQOADBIA4QCQmBqoHBhFNR27ikQSmGdYCdTqCpEHMDZmEKRWUBEv1gBDg5SzRJnpopILWICgWuRYflLamuzxB2BmtYqSRIka5VWU8QduXO+1hRc5YZu5GAwmP2ZJzND0IBu5HCV2+NQcAhAVRsnC2IbPzPdSjzd6to6VtfWkXi6YLaVWr7xoAwkfpb8MnC3SH7rKSMBe4M0jA/OTicFIbtCGRIyNbURhcf3ErCd6YwA1m0HgAxhw1NGQnlXBHG4kylVlSJuH0RfIP2CkL2I/qS1gIAAQiBl1QwFggIHtyxgrxK5PgyfC0JWKoT0HLh8LwoietB4TYKaIl7yeNURxB05UtMxDOcVQlZIrlRKdK6m47gjR/fuBRQihyLArtNeJD50Izcx2Eczu7iFkIug4VM3cpOr3MKDekFED0fWUHv9Zq0kpLnridjhY3XDg7NTN0jDrhO3X7O9Wg7wwyANu4mnayNg3gmbu0tCNoUyBNGv2l4rB9EXynA7082FOxAQLhU6rQVO9T2AvWowFToNCJcPORGxIRcnpjZSKATSU9NxvOQnAPArDSaQoUKnNI4iufkGtD4P3EHIcWZhz4HLceSOyrR3Izf5memPAL2cX3yhAkonysZVaWLBkd9dw1Ivv2a/AYPkK+ty1U1DAAAAAElFTkSuQmCC");}.bk-root .bk-tool-icon-box-select{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg0kduFrowAAAIdJREFUWMPtVtEKwCAI9KL//4e9DPZ3+wP3KgOjNZouFYI4C8q7s7DtB1lGIeMoRMRinCLXg/ML3EcFqpjjloOyZxRntxpwQ8HsgHYARKFAtSFrCg3TCdMFCE1BuuALEXJLjC4qENsFVXCESZw38/kWLOkC/K4PcOc/Hj03WkoDT3EaWW9egQul6CUbq90JTwAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-box-zoom{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg82t254aQAAAkBJREFUWMPN11+E1FEUB/DPTFn2qaeIpcSwr5NlUyJiKWVXWUqvlUh/iE3RY9mUekkPPURtLKNRrFJEeuphGfUUaVliiX1aVjGs6aG7+XX9ZnZ+d2fTl2vmnHvPPfeee/79Sk+may2/UQq/q7Qu+bAJoxjHIKqB/wlfUMcMVqI9bLZ+DGIKwzlzQ2GcxCx2xwvKOUKlaHTiX8bHNspjDONHkOmJBW5jIof/FvPh/06MZOb6cRc7cGn1AKUE5cdzlM/gAr5F/O24H3xkFRfxAbVygvK+cIsspjGWo1zgjeFpxL+BvnLw7laBA4xjIFJwrgu52DoVjKdY4HBEX8dSF3JLYe1fe6UcYCii3xWQjdfuSTnAtoheKCC7GNED5Zx4L4qt61jbTLHA94geKSC7P7ZeShQ0Inoi1IJuEOeORooFXkV0FZNdZs5qvFfKAeqYy7nZ6yg//HG0MBfffh71lFrQDCW2EvEP4mt4okZUDftz9rmGZkotmMxJRtlisy+MTniAWrty3AlXw0hFM2TD89l+oNsoOJXjbIs4EpqNtTCLXbiZ0g+M4mFObj8U3vsNjoZCVcmk60ZwthpepLZkB/AsivWfOJZxtpUQHfWib7KWDwzjeegBZJSdKFiE2qJTFFTwElsi/unQ/awXrU4WGMD7nOJxBY/1EO2iYConq93CHT1GOwucjdqnRyFz+VcHmMNefMY9nNkA3SWUOoXhQviSWQ4huLIRFlirFixnQq/XaKXUgg2xQNGv4V7x/RcW+AXPB3h7H1PaiQAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-zoom-in{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEgsUBmL8iQAAA2JJREFUWMO9l12IlFUYx3//MzPrLpSjkm5oN4FFIWVEl66IQlFYwtLOzozsjHdGRSCRF0sfBEXRVV0FQuQiLm5CZNBFgRRaRLVFhbJ2EdiN5gbK7toObTPn6eYdPTvNzPvOBz5Xh/ec5/n/n89zXtEHmZqeSXSuXBz/3zfdKvBWJHQrwZuRcP0El+QkbQXeBX6WZEgm6TtJk5lM5o4Lc+cV6qpf4Ga20Tm338zeATItVK9Ker6yvPzp4NDQ3+XieGsCU9MzTYumGbhz7m4ze9/MHgvBgItACrgfGAj2jgAvAYs3wlEujjc13kii8YyZrXXOfWhmo9GnFUlvOOemarVapVqtkslksmb2KjARqL62ecuWN9NxbRInzrldAXhV0uFSIfdew7G/gNLU9MwS8CwSmE3Oz88fcXG5blfpqVRq0Ix8VIAAX0XgrVL7HDCHGcCaWrV60LUBN8Dae58aQIxEqcA592I9M610JL0cpG/U9TIHJNKY3RV5z0R+7Nd4HZ0P1g/2RMBuegLAsRMnb4vT8d5vqKfMzOgtAlADrkmqGywmiMBTwfr3dC9j1Xv/r6Tvg/5/5ejxE6cO7M9faVbQZrYNOFSPmqQvVo9FKexvi5uWX58943aM7DwAfBDY+FbSCxP5sdkGx55GeguzrUEXPaSo2pFkAbiSZQCAzZJOmdkjwd6SpB/M7KykQTPbA2wDhoIzRzcNDx9MJwGNIXdJ0mEzmwbujL7dbma7gd03A7lKfnTOvf74nl0r6bonTUbujRSUCrm2d4L3/kvn3JPe+8+BDW2i9o+kT7z3kxP5sYsA6W47oE64TsR7P9tQL4vA2mh9WdIscKxUyJ0M7aR7acOGzikD65EQLEjaa2ZXzMwDFeB6qZBbbLTRE4EGeSaozNOZgYFf8qP7lmIvs354n0qlHpB0T7B9Ogl4IgJJrmjv/SiQjbrkD+BMUkfSbYATPdckrTOzkciWAXOlQu5cYgLdPEIapud9wMOR9zVJH3ViKx333mtHMJvNuoWFhZ3A+ojMcja77njXBEKwJJfTcqUyCIQ34Mf7nnh0paMnXacFuGoC1mr3AtuDfLzd8Zuyl+rfuGn4HLAD+Az4qZQf+61TAj0Noj8vX6oC35SL43u7teG6rf5+iXppwW7/JUL5D03qaFRvvUe+AAAAAElFTkSuQmCC");}.bk-root .bk-tool-icon-zoom-out{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEgsHgty9VwAAA0FJREFUWMO9l09oXFUUxn/fmXlpItppi22k7UJBRSlVkCytSAuKUloIdjKT0El3FXVXdVFKRVAQV7qQohsNwdA0UFvBhYtqUVyIVlRaogtFQVq7qSTVjA3z3nHzBq/jvPmTN/Ss7rv3nvN99/y794kByMzcfE/7picn/jenmwWeRUI3E7wdCRskuCSTdDfwBvCtJEdySV9KOhpF0e0/LF5SqKtBgbv7ZjObcvfXgShD9Zqk5+orKx8Oj4z8NT05kU1gZm6+bdK0Azezu9z9hLs/HoIBvwAF4H5gKFh7B3gBWFY3460kWve4+3oze9fdx9OpVUmvmNlMHMf1RqNBFEUldz8OHAxUX9q6bduryut+Sfvc/Wz62ZD0fK1afjND9y3gGSRwv1GMojstTxUUCoVhdyopEYDzKXjWwZ4FFnEHWBc3Goet00m7lZlZYQixKw0FZnakGZksHUnHgvCN5/KARBH37enpOVg58H13HV0Kxg/kIuD/ngSA2ZMLt3bTSZJkUzNk7k4+D0AM/CGpaXCyBw/sC8Y/qZd2GpZiuL9YLN4Sx/HpoP5/c/exQ1OVq+1yyt13SLoArEsJnMjlgfOffvK3u58Kprab2QezJxfG2iTzUzI70wRPG9jbmpmb95SNB9mpzp7/j2yVdNbdx4K565K+cvfPJQ27+x5gBzAS7Hlvy+jo4WIvoC3kWpcvS3rR3eeAO9K529x9N7C7zX6AC2b28hN7Hl1Vt44niVq13LUjmtlYkiQfA5s6eO+GpDNJkhw9NFX5ueNt2ARodyF1IHIN2JiOl4H16fiKpK+B2Vq1vBAqFAf4IJkGNiIhWJK0192vunsC1IE/a9XycquNXARa5OnApeeioaHvKuP7r3dTGsiLqFAo7JR0T7B8rhfwXARa2us4UEqr5Ffgs151i/08oTNKdIO770ptObBYq5Yv5ibQq/sl3Qc8lJ4+lnSqH1vFfp9koZRKJVtaWnqkWXqSVkqlDe+vmUDWpZMlK/X6MBDegKf3P/nYaj8ErN9fqZBYEsf3Ag8G8Xit33BaniTcvGX0IvAw8BHwTa1y4Md+CeRqRL9fudwAvpienNi7Vhu21uwflOT+L+i1X2TJP57iUvUFtHWsAAAAAElFTkSuQmCC");}.bk-root .bk-tool-icon-help{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAABltpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPHRpZmY6Q29tcHJlc3Npb24+NTwvdGlmZjpDb21wcmVzc2lvbj4KICAgICAgICAgPHRpZmY6WFJlc29sdXRpb24+NzI8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjcyPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+MzI8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+MzI8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPHhtcE1NOkluc3RhbmNlSUQ+eG1wLmlpZDpBODVDNDBDMzIwQjMxMUU0ODREQUYzNzM5QTM2MjBCRTwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDpBODVDNDBDNDIwQjMxMUU0ODREQUYzNzM5QTM2MjBCRTwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkRlcml2ZWRGcm9tIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgPHN0UmVmOmluc3RhbmNlSUQ+eG1wLmlpZDpBODVDNDBDMTIwQjMxMUU0ODREQUYzNzM5QTM2MjBCRTwvc3RSZWY6aW5zdGFuY2VJRD4KICAgICAgICAgICAgPHN0UmVmOmRvY3VtZW50SUQ+eG1wLmRpZDpBODVDNDBDMjIwQjMxMUU0ODREQUYzNzM5QTM2MjBCRTwvc3RSZWY6ZG9jdW1lbnRJRD4KICAgICAgICAgPC94bXBNTTpEZXJpdmVkRnJvbT4KICAgICAgICAgPGRjOnN1YmplY3Q+CiAgICAgICAgICAgIDxyZGY6U2VxLz4KICAgICAgICAgPC9kYzpzdWJqZWN0PgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxNjoxMToyOCAxMToxMTo4MjwveG1wOk1vZGlmeURhdGU+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+UGl4ZWxtYXRvciAzLjY8L3htcDpDcmVhdG9yVG9vbD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+Cphjt2AAAAT7SURBVFgJxRdbaFxFdGb2bhui227BWrsVKYgf2kJUbP9EUPuzEB803WTXJjH61Q/7Ya1+CMYKEVTsh4J/EpvY7BoabUiNiA8s1p+4KIhpoUUEselHqyS76TbZ3HuP58ydc3d2u4+IkQxczpz3mZkzZ86VYpXjvenpjZsLhUcliE4AuUuASAgptmt1EFdwPiclzIIUUwubNn17OJlcXo1p2UpodHRiux9xB1Eug1+slbzhFxGOKc851tu7/0oznYYBDA8Pt0U2tL8KQryIq2tvZqQhD0QJHRz3yqWhgYGBpXpydQMwqz6NCnurleCSADkJEfgKfOePqL80R/wV1ZaQyr1LenKfkPCkEPKeaj0xg7vxVL3duCmA0Vyuw/fl52hgBxsBED+h4Cv9z3R/zbRm8MTJTx7HQN7GQB6w5C4L4SX7M5lfLBpurjXMyvNIShiyi0l1pL8n9b7EDGPR8fHxzSsQ6XDB3618/xqo6Pk25V5MpVJllgHM1BO58RdQ612kOYZ+GXdij70TYQB05mpj+1kU5G2fB+l3PZtOf8NGx6ambnMXb3yAxg8wjSEG6OKKR9oicBQD+ZvpH2Wzj0lQpxCPG9qMv1x6hHNCsSAlHM7ZOa682vlI9tRDbvHGbD3nZAPpDoD/3JIrLpAs26UFkC3EMUA99hpfGtEBfJjNJnS2Gwnadnvl+Xw+iuc3DAJuNyIaSCHpilVldyDjjUxj3WDZIAhxhHHyRcdNuA7AAfUaXzVKODpzFiZ4/uLvh5G+m2no+C/pyIf7MqlEJB7bpqR6nXkEUfbeawuLaZsW2ISfNQ2vtaktQlGFQyIVGT0o2+2EC4iQNGwjBIN9qdQ5Qg4mk4X4rW3vCClLtowE2FOFUxKDfNmiZci3ovKKRFPh4FK9q4Zbdr+lKKJiA13TcHR2dmLBgdmQ0GAS2MZaEowY+XbAk09IvgtYZGp16SyvFhaHcIUh645t8T9DBCcnz5zZ4hZLu3DzK2QlL1QQa0Y+pHiJKPSuOGj3PmZTheM5w2TwqBxnvBZOTk7G5gvXJ5Aelms8wnJURL+olSWcfEhf6gDoUXPMq6ZlqbzWU2pE+3hi4s6F68tfIj9cBMlikr7Z0/P0b/X0yIcUXsDCF1WhtL4OROHaXk+xlkbV0Cu732Nmhc4peaWSg73pA8dq5RkvO37ldUTfXCKZv2q45MkhvG87WQEzpCCUSvV1d9GONBy3lMvgKSwrZig8gjAietWY0QriylO2jIo4yVbOSb7KB/qmI9BPKjHpSSXYauRyn92Nq9/Kcrj13x3s3v8D481glQ/0raiNYgX9njPSBOImbrHZePl+tfFmc9sH+Xaoh8NjOKSVdDMhjjYzQLy+dFceH5+IJQf9VYXX4tROg4ZFU8m31M3mfPEqUoJqCGJfvWpo2xnNfdrhC28n06SCeSzNZxlvBINGRXCtKS7EY1uV6V7HWAm38y1cXaXsMcOCvr9ySPj+af7A1U2HJXHzVNvUXVLIGyPf+jV0pf8GHoN+TLAyPkidTCi2RpPApmnR0Bd1zGRaB/B8Oj2HSw7LLbVR1MmskW8RdEWVXSJf3JbpAMgRtc4IZoxTh9qotQjCasm46M0YX9pV1VmbpvRH5OwwgdRtSg2vKaAz/1dNKVtb17Y8DCL4HVufHxMOYl1/zTgIgiYvBnFKfaNp3YjTdPz3n9Na8//X7/k/O1tdwopcZlcAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4oVHp0SwAAAQJJREFUWMPtlsENgzAMRb8RQ5VJItFDOgaZAMaAA0iZpN3KPZSoEEHSQBCViI/G8pfNt/KAFFcPshPdoAGgZkYVVYjQAFCyFLN8tlAbXRwAxp61nc9XCkGERpZCxRDvBl0zoxp7K98GAACxxH29srNNmPsK2l7zHoHHXZDr+/9vwDfB3kgeSB5IHkgeOH0DmesJjSXi6pUvkYt5u9teVy6aWREDM0D0BRvmGRV5N6DsQkMzI64FidtI5t3AOKWaFhuioY8dlYf9TO1PREUh/9HVeAqzIThHgWZ6MuNmC1jiL1mK4pAzlKUojEmNsxcmL0J60tazWjLZFpClPbd9BMJfL95145YajN5RHQAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-crosshair{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADEUlEQVRYR81XXVIaQRCeHqug8CXmBNETaE4gniDwIgpVspxAbxC9ATkBkCpQ8gKeQDiB5AQxNyAvUlrldr7eHxyGXZi1rMJ5opbp7m++7un+htSGF204vsoMoNXrlzSpfWa1oxQfhAegCZGaEtPorHo8znIoJwCt6+td8uk7ApUQCIHTF4BNAWzImq8ap6cP68CsBdDp9i9ZqXM7ML79g/EnCWD+jgMKENKqWT+tXK0CkQqgNRjs0OxpQIqKhoMxaG6/6JeRnK7T6yO2UvVqhYSlLX+ryORfgKn9ORDFIy7ky41yGcwsr0QAQfDH5zucOswx819fs4egI9OFCcD8DjBF7VNbEX0JzdWEt3NHSSASAcCxBDqMgt/623kvyTgNgNjJIfTjk4D4FqaJR1715MjmYAmA5Bx3AwUXQL+t105KaTlcBSC26XRvhjEIoLiq1yqXpr8FAGG16/ug4IT27fxBWu7EiQuAiImJpEMKE6nYM30uAIDDttSUOPfJP7JzbjPhAiBIh9QE67vIvoOi9WJfCwDavf40ulpjbCqmUf+W753ezURuh7Dg1SqflwAEHU6pgfyBq9Y4qx0LG++2fnZ/eUzcstmdM2AWH+jfc+liWdBJfSENf8Lifi3GVwC9mybOfi5dzatWVrbbLIHNva8p5h/16gkaFiLGGxbufkoE6XguwePiXLF3XmMfCUCUAqtKXU7sumd1CowOuJEi3Pg1FBpjitIGhyvVSfvmjci6ZR+rFQfDiPVE2jFYeICQ+PoewwjC5h7CZld6DBdyu6nDSKgzOyIMhmhK5TTqXYbRorZYM46TmpKAAOrGWwSJJekSB1yqJNOzp1Gs7YJ0EDeySDIMtJbQHh6Kf/uFfNFZkolJICRmz0P8DKWZuIG2g1hpok+Mk0Qphs0h9lzMtWRoNvYLuVImUWrmPJDlBKeRBDfATGOpHkhw670QSHWGLLckmF1PTsMlYqMJpyUbiO0weiMMceqLVTcotnMCYAYJJbcuQrVgZFP0NOOJYpr62pf3AmrHfWUG4O7abefGAfwH7EXSMJafOlYAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-lasso-select{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEgwlGP1qdAAABMBJREFUWMO9V1uIVVUY/r61z57ZMx4DnbzgkbQXL5iCJphlWdpIGY4jpFBkEiU9ZNaDRRcITcIwMwgxoQtU2IMXdAZfMjFvpERXYiSbysyBEXFmyuHMnLP32uvrwT2xnY5nxvHQ93Jg7fWv71/r//7L4a59TRgqJk+Z6v3a+sv0OI5nk5wu6VaSVZImAThHsgjgrKTvM5nMUWvtmf5n8HodCIKgOgzDhc65pSTrJQWDsSNpJX1ljHnDOfdT37oZLLHv+8OMMasKhcIJ59xHAJYMlhwAJGUAzJfUTHLFuFzOG5QDU6dNMyQfs9Yedc5tBpAD4IYYNQGoBrDtQnt7/b0LFrJsCHzfn2itfQfAnZLiazytA3AaQAuAiwDaEgeNpGkkswAWSBqRONB38b88z5uTKePt6iiKXkk8jq+iJC5LOmiMaTLGHLPWhmWeHr7vV0dRtATAapAzIVmSo51zyzIlbm2stesFPA6pKk0r6Ryg93y/ek8YFvPOOTg3cDSiKCoC2OP7/rEoirYm4rUkF12lAWNM1lr7lqQn0+QA8gI2jBg5cj6Aj8OwmB+KAKIoukhyp6SRJAUgl0ndPLDWPi9pJQCbuviXvu+/GIZhW1dnJ24UJFuTjCCA2ADA8sYGWmsXS3qmL94kDYAtkh4Nw7ANlQJ5U6INT1KrAYC9zQdykl7nFSj5fXp5Y8NWVBhy7mUAjqShMYdMXV2dJ2klyRwAJ8lIeuGWCRMP7N7frEqSG2OmAFhKshNAp5wrmO7u7jEAngPQm1S2z2pqapr+OPt7XEly0oxwzq2RdFmSD2AMgKKJouhhAL4kA+Cs53l7e3t7uytJHgRBreTWkXwkKVJnJD0B4GAGwIJE9R6AFufc6UqSZ7PZbD6ff5dkA4CQZEHSqwAOISmXtwGIE+F1SeqqIP8d+Xz+C0mLJYWSAODteXffczjdDQNJ0BWMCoLg5gqIbRTJNwHsljQhUb0luWPM2LE7Thw/9m/5NCT/TByxAOYWi8X6/gdWV1dnfN8fNRBxJpMZTXKdc+6IpFVJWAEgkvSJpA0X2tvtVTaSjgOYBCAEEADYSHK87/sfhmEYA9gShuEDkgzJHyWtB/B1irQ2juP7ADxkrX0wOUOpzmdpzEY590HJ7Ni1r2kSyZOSiv2+hSRjSTXp/QAukzySNJOJkmalyNIl10hqMcasdc61XDNcQRD8BnITgNp+36r6kfcNFMMlLQGwTNLMEuQGQBfJl2bdPru+HDkAZAqFQux53jZHEsC6aw0eg2gylNRBcqcx5v04ji999+03AwsWAOI4Lsy9a94WkisAnE5a5WCJYwCfA1g7LJudI2lTHMeXBm1faiQzxkyRtF3S5CTupeAB+KG2tnZFT0/P30NO2VKLzrmfAbwGMipjG5Oc0dPTc0Md05SZ5U4Q2FxChErtEYD7jTGNQ3UgM8Asv90Yc9I5LSKRlXSI5CxJa0jWSALJjKRnAewfkniT+vwf7N7fXHK9rq7O7+jo+BTA/NRrdBpjnnLOnUrvXd7YMPQXSBunneno6IhIHgYwW1JtkgmBpBkATlVMAwOk3nFJ+VSoqgCMr6gIy2FcLtdKspAedyQN/98caDt/3kpyabUmf8WvG/8A1vODTBVE/0MAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-pan{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4lKssI9gAAAOtJREFUWMPVll0KwyAMgNPgoc0JzDX2Mtgp3csKErSamGabIEUo/T6bHz0ezxdsjPJ5kvUDaROem7VJAp3gufkbtwtI+JYEOsHNEugIN0mgM1wtsVoF1MnyKtZHZBW4DVxoMh6jaAW0MTfnBAbALyUwCD6UwEB4VyJN4FXx4aqUAACgFLjzrsRP9AECAP4Cm88QtJeJrGivdeNdPpko+j1H7XzUB+6WYHmo4eDk4wj41XFMEfBZGXpK0F/eB+QhVcXslVo7i6eANjF5NYSojCN7wi05MJNgbfKiMaPZA75TBVKCrWWbnGrb3DPePZ9Bcbe/QecAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-xpan{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4X4hxZdgAAAMpJREFUWMPtlsEKwjAMhr/pwOOedINJe/PobWXCfAIvgo/nA4heOiilZQqN2yE5lpD/I38SWt3uD9aMHSuHAiiAAmwaYCqoM/0KMABtQYDW11wEaHyiEei28bWb8LGOkk5C4iEEgE11YBQWDyHGuAMD0CeS30IQPfACbC3o+Vd2bOIOWMCtoO1mC+ap3CfmoCokFs/SZd6E0ILjnzrhvFbyEJ2FIZzXyB6iZ3AkjITn8WOdSbbAoaD4NSW+tIZdQYBOPyQKoAAKkIsPv0se4A/1UC0AAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-ypan{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4anK0lywAAAMVJREFUWMPtlzEKwzAMRX/S7rlpIMXeOnaLaME36FLo8XqCdNFghGljyc4kgQi2Q/SUj0F/eL7eMMTKz6j9wNlYPGRrFcSoLH4XxQPvdQeYuPOlcLbw2dRTgqvoXEaolWM0aP4LYm0NkHYWzyFSSwlmzjw2sR6OvAXNwgEcwAEcwAEcwAEcoGYk20SiMCHlmVoCzACoojEqjHBmCeJOCOo1lgPA7Q8E8TvdjMmHuzsV3NFD4w+1t+Ai/gTx3qHuOFqdMQB8ASMwJX0IEHOeAAAAAElFTkSuQmCC");}.bk-root .bk-tool-icon-range{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAABCJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgICAgICAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjU8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyPC90aWZmOlhSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj43MjwvdGlmZjpZUmVzb2x1dGlvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjMyPC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6Q29sb3JTcGFjZT4xPC9leGlmOkNvbG9yU3BhY2U+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj4zMjwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgICAgIDxkYzpzdWJqZWN0PgogICAgICAgICAgICA8cmRmOkJhZy8+CiAgICAgICAgIDwvZGM6c3ViamVjdD4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTgtMDQtMjhUMTQ6MDQ6NDk8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPlBpeGVsbWF0b3IgMy43PC94bXA6Q3JlYXRvclRvb2w+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgrsrWBhAAAD60lEQVRYCcVWv2scRxSemZ097SHbSeWkcYwwclDhzr1Q5T6QE1LghP6BGNIYJGRWNlaZItiFK1mr+JAu4HQu0kjpU8sgF3ITAsaFg0hOvt2Zyfvmdsa7a610Unx44Zgf773vvfneezPHNzrbhn3CT3xC3wPXYOC8LDzqdi8YY/gwh4BeknS/2th6dr2kf94AOp3OFyWgMyziOPbMDxV9FTtJnl1ut795Xd0/YQ0/vtYQwMT1KXWCfr2IjOWwtNehwN4xL9ykTrm6Pzl58yLn3J+mKh9mXbT3uRjGEDph+O8/TjfP5dBp7Ha7AX7O3o5nZeD/0E/OGyXntDgzA0X6qmCnrVutVlrUWV9f/3xo+pwhGDhvEPHOjoxnZjJggXmMHzBQ7NGNp9vxk61fr0HR7e/u7pZzCGHlc7qwBYYTT7tJYSx1AQzppyFPft5apta9w7SKcn0b7P7+/jCsDQ5mbc0dCmIJGDN0ehdcjsmkm6A6KUeKFOTE11PLxrC7Ukqh3ylL2fT0NAP9q6ur6rRCJJYsbKB0JsbCKMuy+xREePDyxQPCz+Crlw062QcA5wBOOt1l6vIl2WiI9F1fN6Q+BBqit6hEC4Hk08GQJMn4myjSP7RavVxgdaVUh/3U6HCMsPr9pYnJKRziHtWQ+un58+hGs6nsjQSjpuTyKGN3CX+FBwHXSiEVgjP+O8X6N12kIePES+GzTKAkGbNp8yJsGUMVzz8jPKReiyAQRimy5/cjye5RpF8utFp/+nwmT7d/NMzcFkS7yjJNGDaPURQxIQThEQy0SyF4l5WJYYhBa816vZ6dU7A6CAhbZVow/pDe0O9hVOoCi13r4BgBAvJHqMSQL2vE/iH6IAXEwgrRVUmBoRRwnwJQT98xEeVeSUyB4dJ5nwJBKdCFFGRmUCcu7rwIYypCTblaChuNBhWODrman5ub+4v0rMNBt8z6Ezh7GksJQpCbm79cMQE7QBFm/X6f0rjWnv8WRYg/QdbUpwDAEBy8vPyA8rNGzg3a8MiElwiM7dAtRqNoNptjGPM1laVxP9umWEMGLOKhKUOJDtBwDmzsw9fC/CzHr9SGuCTi2LbbKvVtmqXpCjMihBFa79Wrt5fGx9PDzc3fmu32Lf8qFliwU9emKhBSp+kRKn/hu9k1COEDbFdt/BoKWOAkuEbdVYyoIXv8+I/QK9dMHEb1Knb7MHOv8LFFOsjzCVHWOD7Ltn+MXCRF4729vWMDK+p8rLkvwjLg4N4v741m5YuwCI9CvHp1Ha8gFdBoPnQAkGsYYGxxcfEI7QQlFCTGUXwjAz4tWF+EpymOWu7fglE7qsOvrYE6g4+9/x/vhRbMdLOCFgAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-polygon-select{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEjc1OfiVKAAAAe1JREFUWMPt1r9rU1EUB/DPK0XbqphFHETo4OCiFhwF0V1KHbRSROLqon+AUMVRRFBwEbRFMBiV+mMW/wIxi5OD1kERRVKRJHUwLvfBTZrU5OWBGXLgQu7Jfe98z/ec7z0vKa88b2q1BDtRHdAPBaylm1NzsxsOjPnPNt6WSWprbft+/c3I3zOAjhT1Y4+fvcjEQJIXnVECSa+AhqIHqlHH5lWCZoe+Gk4GRgDG86j9SAUdlDBSQaZhlOkuHyoVdJmsw98D1S5fM4NYM1LCpqM+Lwa240oLgmZzpVZvzKT75VLZcqksSZKWlQeAy/iORVwIvh31xvotvK7VG3Px4aWHj3Jl4C2uYSvq+Bn8v6LLbaVWb9zsBiKLCvbiNG7gLm7jAYqbPHMJMziZ9lsKoh8GtqCEVVzHftwJn+TFHp4/hg8BSCYVfMOZoPEv2NZGdy9WCGUr9toDR3E2/H4V6nwRe/BmgN65H1ZhvMuB3XiKIyFoGefwO6ysVkUlrNUNsyAK/jli533Q+Y8cJFvAeXyMS1CI/jiMr/gUtD2LQwMGr4R3p7bY3oQHQ5b38CT4D2AXXg6YcQXHpyYnlqKsi5iOAVSwL9zd7zJ09r+Cpwq72omFMazjT9Dnibym0dTkRDUKrrgwH7MwXVyYB38BstaGDfLUTsgAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-redo{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4itK+dVQAAAaFJREFUWMPt1L1rFFEUBfDfJDaBBSslIFjbaSFp1FJQFMVCHkzhKIqdUYOCoBgErVz8rCwiTDMwBCIKipDWyip/gxAIWAmBgBC0eYFh2Gx2l9lFcA5M8e59782Zc84dWrT435Hs1siLchqn43MS0zgW22vYxjesYjVLw3YjBPKinMUTBOwf8J5fKLGYpWFjJAJ5Uc7gIW6jM6Kim3iNZ1katgYmEL/6I+YasvY7Lg6iRpIX5VF8wuEe/XV8wGf8jN6LWTiAc7iEQ7ucPZ+lYW0vAtfwvlbfwCKW9gpXDOv1mJvZHiSO91MiyYsyiQSuxtpXXM7SsDmM5nlRdrCMMz3sOJWl4Xevc/vwBzdwAl+yNNwZxfRI+GxelK9ikHcwh8d4NNR/YFRES1ZwoTYdR7I0rNf3TzVNIGbmSvR/Bx08mIgCFSVu4l2ltIWD9WxNGR+W8KOynqnZ0rwCeVG+wa0hjrxtWoF5dAfc28V8Mib/n+Nev5dnabg/zgw87aNEN/bHOwVRiRe4Wym9zNKwMKkpgIWKEt24njxiJlq0aPFv4i9ZWXMSPPhE/QAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-reset{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4gWqH8eQAABLdJREFUWMPtlktsVGUUx3/nfvfOlLQaY2IiRRMQIRpI0PjamJhoVASDvNpCpYw1vJQYSVwZwIVQF6wwRHmkAUof9ElrI6VqDAXcID4TF0IiYQMkSlTokNCZ+b7jove2t+NMH7rQBWd3v+989/zP+Z8X3Jb/WGQySvUNTQBJESkNguAVYIWqzhaRhwBU9WcR+QXoymazn6jqzUQiMQSQzWZRVdal1vwzAI2tHQBPOuc2AbWTdOyQ53n7nHNfRwee51GzqoIQMCLDpr3x/tLQ0oZzrk5Vj0/BOEBt+KYuOlBVGlrahr0Wob27t3gEjnZ2AyQzmUwHsDgP6J/AYRE553neDwDOuUdU9QngNeCumK4TkRMhZUORcYC1qysLA6iuSQHIwkWLD6lqapQsuSmwTVV3h99I7EcAR462A2xR2Ilq6ehTaejvO1774kuLNALR33eclsaGsQDe3fYegHl43vyNwEeqGl1963mm2jl7YZRTQ82qlWP4HM6ZToC5ztkW4LHQoALru7s6Di5dvlIj/e6ujrEAWoZDn8hmMjXATMACGaAVuBjXTVVXFc/AxhaA+4zvn1DV+eHxVWPMAmvtb5GeMWZyZVhI2rt7qVy2pOh9U1snwIPW2vMi4oWJuBPYHkVAVScPoKmtkzVVK6cEMsyJraHhiCqJqJUwj/JRz7TW1iSSyR2rVyylqa0Ta+24Ic8vXaAEmDFc/l5Z2A/80OibuVyuz/f9ElUdHCmvw82t5HK5h6y1PYhsz2YyGw43t2KtBZHIGwB6+j4rCkBVUdV7gXrggnPuu8h4eP+xMeZS2D0rJYZ6AdAMzAt1b4nI26p6IFZOY8pugijcKSIHVLUK0LyST4vnrVfnWr3mjmP4QTATaERkXkypRFX3isjmuHdRJEK6Ckqquopp06bdKCkp2Sgi7XnGLcg7gzeutwNIiPYc8HixqIrIOlU9ONVIhHPEd851icgSVXUiskVV94gIqoonIt0i8gfQCfwae38e6BWRXuBZz5jZ8VbaOE4EIqlZVUEQBLlkMplS1QER2RwkEnsSyaREDUzyeNsvIhvCMqkH1kdIJ2o+k8iJB1LVVRfjZ6nqqlEAIbdVQGto8Lrv+/dbawcjAL7vc+6bs+zetetfLSHxniIFGofGGsU2oC7eOCbDfZ7nQawBOSAX74SF9oEPImOq+r7nmVmxb5raukZa8UReGmNmhbMkAwwBH467EYVZe49z7kdgenj8k7V2oTHm8kgdWcvrNdVFjR8cHkYzjDH9wLjDaEwEzpwa4MypgWvAjtjxfGNMj4jMiT+M+kFsZI/Q6Pv+HGNMT8w4wI7TAyevxXVPD5z8+zD64tRXAMHVK1eaVLUyVvuDqroV2BOnJF4ZIedviUidqt4Re9s+vbx8zZXLl7PR2+nl5Tz/zNOFp2FzxzGAklw22wUsLLaSKXwf8vhosZUM6PeDYEUum70VHfpBwKsVyyfeikOP6oBNwN1TrLbfgX3A1kKLzKeff8nLLzw38T5wZDgxn1LnNk5lLRfP26/OnR2hwfNYW2Atn9RCsrf+EECyrKysDFimqhXhyjY3VLkAXBKRDqA7nU6nS0tLhyIj6XSaN9bVclv+l/IXAmkwvZc+jNUAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-save{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4UexUIzAAAAIRJREFUWMNjXLhs5X+GAQRMDAMMWJDYjGhyf7CoIQf8x2H+f0KGM9M7BBio5FNcITo408CoA0YdQM1cwEhtB/ylgqMkCJmFLwrOQguj/xTg50hmkeyARAYGhlNUCIXjDAwM0eREwTUGBgbz0Ww46oBRB4w6YNQBow4YdcCIahP+H5EhAAAH2R8hH3Rg0QAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-tap-select{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3NzIwRUFGMDYyMjE2ODExOTdBNUNBNjVEQTY5OTRDRSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCOTJBQzE0RDQ0RDUxMUU0QTE0ODk2NTE1M0M0MkZENCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCOTJBQzE0QzQ0RDUxMUU0QTE0ODk2NTE1M0M0MkZENCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTQ0QzIwMUM1RjIxNjgxMUE3QkFFMzhGRjc2NTI3MjgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NzcyMEVBRjA2MjIxNjgxMTk3QTVDQTY1REE2OTk0Q0UiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6eYZ88AAADLklEQVR42rSXf2TUYRzHv7tuGcfE6Vwb5zLSSjEj7Y9KWqfEmFZJP+yPMdKKmUrrn0iUfjhWlLFi6YfNrF+StBoTo39iYkTGco4xxxG59P7k/T2PT8/37nu3bx9ezvPj+zyf5/PreS78bGLS8SmrwE6yje3NHJsDBTALpknBz6JhH3NiYAB0gHqPOVv52wJ6QQ48BzdAttTioRJjdeA8mAHHS2xuk3p+M8M16ipVQE49Ds6CiFO9RLjGONf05QLx6wPQaBlbBlPgJVgkP0ETiIJ2sB/E1XfimjfgBOOlKDUqCGOcqBcQnw6BYW5YTo4wbvQhMmCfGRemC2rBiGXzWUb+kM/NRZ6CHWBM9ce5R61NgX6ayhSJ5EPlItlDRNkz4JbFHf06BkSzHjXxM+gDv1S/mPUo2AXWgt9UUHL/IVhS8yUV1/EbV3o4N+NaoE9Fu/i827K5pNYHnqAVJECShWmAaddpscYFFXwR7vnXBRGlnUN/L6kqKJlxnRUuDbaDBiL+vst5d4gpcpBrqk/2jIgCKVUolhntplzivHmwh4stGOPfwBWwl/2dpp8p7xjQZqFLiQJtauKkivYm+kzccpK57yXfOUe+P23JqAnVbhMFmlXntCWnxbT31am9ZJ4BJifsUmNTqt0cYhA5ypympPg7VkEKunPbVb8cIG+0kyHLJZNR7fUMooUKFHAPkfQo58VLK+RzwRDd4FdWG9mjpaAXzqkJa1R7kQttqEABWXMjOOxxVRfnhRm5URX1prk/0pQHwNcKlchZ+jdpC+hFdVqO0my9Hj5dkYgCn1Rfh/KdlNDHrJhPqlDih+IfBd6qwpOgEqYMsorJ2HtWxtagLJDn/W3KRfPOZhoeBJfZPgVeGKeKrkQBh5dLXl25Ny3pc4/1fkTdbvFqFQgbxWeYD0hXulhQ0pYiM1jG547fcbMQpVnHTZEn9W3ljsCzwHxCdVteNHIZvQa7/7cC7nV6zHIfyFP9EXjFa7YxKAVqPP4bxhhoLWW+z9JyCb6M/MREg59/RlmmXbmneIybB+YC/ay+yrffqEddDzwGvKxxDmzhc0tc80XVgblqFfgjwAAPubcGjAOl1wAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-undo{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4em8Dh0gAAAatJREFUWMPt1rFrFFEQBvDfGhACASshkL/ALpWVrSAKEQV5sIULWlgZNSgIFkGIVQ412gkBt1lYLERREFJqJRaW1oHAoZUQsDqwecWy7N3tbe6C4H2wxc682Zn3zTfvLXPM8b8j6RqYF+UCzsfnHBawGt3fMcAX7GEvS8NgKgXkRbmMxwg41TLsN0psZmnodyogL8pFPMIdLHUk7hA7eJKl4U/rAuKu3+HslFr/FZezNPSTFslX8QErDe4DvMVH/Iq9F7VwGpdwZUjsPtaSFjv/1vCBPjaxO0xcNbHejLpZrrlvJCMCT+JzA+2fcC1Lw+GE4l3CG1yIptfjCtiKoqtiJ0vD3aM0Py/K57iIMxgkQxat4EdN7e9xdRzlk+LEEPvDWvIDXJ928sYxjL36icWK+VaWhlezOIqbGFirJd/H7szugrwoX+D2BDEvszSsT5OBdfRaru/F9dPXQF6U27g/KnmWhgctxqyzBrZGMNGL/rHI0nDkKXiKexXTsywNGx0OnFbFNk3BRoWJXnw//j+ivCi32/S8CxPVNiWOAdUiJtXITIqYY45/Cn8B2D97FYW2H+IAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-wheel-pan{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEgswOmEYWAAABddJREFUWMO9l09oXNcVxn/n3vc0fzRjj2RHyIZ6ERuy6CarxJtS0pQSCsXNpqGFWK5tTHAwyqIGN7VdEts1LV04BEoxdlJnUbfNogtDCYWQRZOSxtAUCoFiJY0pWJVUjeTKM9LMe+9+Xcyb8ZMychuofeHCffeee7/vnXvOuefYlV/+mv932//tb91z/Y2rvxmMHQ+4FcEfOIGN4A+UwDDwoQScc7vM7AIwB8yZ2QXn3K77Ab6OgJnVgeOSbkqaBiaACUnTkm4Cx3OZzwf+qzcRQup1zNZ9RwDe+0YI4YKZTUn6zCGSMLOfAF/03r+QZdnyfwO+ePEiI6N1nPMgMDMkETLRbd2mXG8gCbd9YiIKIUxLKoLfBN7I+80+CUlTIYTp7RMT0b3Af37p8kh5y9gZcy4Fzt+5szqSaxkzUR7dwtrKMmaGW242d0t6vrD/He/90865o865o977p4F3Ctp4frnZ3L0Z+OryUrVSrZ0z8ZxhHjhcq1XPrS43q/0flDlK9XpPA2ma7gMeyvfPx3H8TJZlH4YQWiGEVpZlH8Zx/Awwn8s8lKbpvmq1ahvB641SXNk6dhLskNA2MIBtwKHK1vGTW8bKMRbAMgyPqWeETxUM8VSSJAv52JmZA0iSZMHMThWwnipXKp8hsLLcSaIR92oU8xjSayCQXotiHotG3Ku3m+0EOQwPQCDggMf7BzQajSs5eAk4B5zLx4O1vD2eJMmAQKliscgASJMw21pansFs1swQ/DNLmUmTMNuXX+taXHTDaj5OW612R1JZ0nFJJ/J+XFJ5aWmpA6S5bHV8fHsPHFU6q3pJCjtFxtrKMuXRLUUXXxdrRLazFOtUolZlsGhmACsgnHPTwJnCnjP5HMBKLotzxsTE9rgDL0t6LoriKsDIaB31ZEK+JxQJRHFUBR2NqLw8OTkZR0OC0ntm9k1JWU7OA4vD/mZ+YfElsANmNEKi75vztzB5M8uAr+bx48me88g757PQ1U5zNg52YH7hX8l6f+4Fi3c3BqHNmkI4YQOV2MGCNu9qHPYCewfzbrC+XSGcWEcgTRKA3wFfyzdDz5d+D3x9CIcfA4eBbQS9LscskgfLnHNPAnslvS/pbZDHLLPADpx9N9fqpSIBH8cxWZY9m6bpb4Ev5fN/iKLo2TRNgdx/eo8Wk5O7Ts/N/SOSdMjHdj4kmgkIEJLJzPZKetvMTkIvFLsR25Ml2gfuF5M7vnA66sdooJYkCSGERe/9VAjhzRxoKk3Tvg3U8nulVqvx8cyNpER2umM+SdOkbc5B8JhpqBdIgTRR24h+lpKen731aRIN7thscH9Zlv0d2F8YD2TIX7F2uw3A7ZWV1a0TYz9ca8cJZHRbuRuaDfUCw9/qJHamPOKToAwHtHN6lMvlSkH2o7wDMDo6WuGuQbbn5+YAKNcb3J5fSvrhtTY+vsOPuD1IOyRhMOkj9kSx29HfXB5RUnS964NT2+3vbGbxG9auO2cDNuV6A8NTb5TitBuOpQkfYD2vwOxgmvBB2g3Hto5X42EJyVsFlztbKpXGNgqVSqUxSWcLU2+tdToa9hasLjfPYlwGa+bTi8Dl1dvNsyvNtQQL9MO2w+HM7BqwlAtPdrvdq9773WAVsIr3fne3270KTOYyS2Z2bbXdHhogKmPj7YWF+VOSXs/v/9KdO+0fVBrjbRkgB/KIDBnYu9f/7D+ZmfmRxPd6qwB8YmZXcq1MAQ/nJhTM+OnDe/a8+PGNG9lm19V/D1Qw7HXZlcRa69+U6w38l5/4ipxzf5X0CPBILjcGPJH34pVcc8692FxcXLlXRnTwwH7+9P4f8aWe3fY59LIqo1NMyQBCCHNmdgx4BegUWefjDvCKmR0LIcz9L8nokSNH+PRvH4HC3YQ098pSbevg24qlmZmNmtmjkg4D3+j/tZldkvQXSa3PW5ptlpL3ZaIN99OS9F7+IgKUgSyEkNyv2nHT7DZX0dr9rpjua2l2r4rogRAYVqZvnPsPqVnpEXjEaB4AAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-wheel-zoom{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEgskILvMJQAABTtJREFUWMPdl1+MXVUVxn/fPvf2zrSFmUKnoBCUdjRoVaIxEpO2JhilMYBCtBQS2hejpg1Uo2NUrIFAoyGmtiE+GHwQGtvQJhqDmKYRBv+URFsFDNCSptH60DJTO3dKnX/33rM/H7rvsDu9M20fDMaVnGTvtb69z7fWXmvtc/TEzqd4OyXwNsv/FwFJQVI/sA14SZKRLOlPkr5TrVYXHz70quYkEEK4TtI2YAgYkrQthHDdhV5uuw+43/ZrwCbgRttgY/tjtrc0m83X3/f+D6ydnJhYcB4BSZcBA7aP2d4ELAGW2N5k+xgwkDB0IH19CGGH7R8B1aQeAf4KvAw0ku4K2zu7uru3ApdPEyiKohd4TNKjtjt5h6RHgccSNrddbvuHtm9Jqoak7xVF8WFgdavV+pSk5cCObNmXgK++85prCj3z28HKqZMnH7D9YAY4BvwujT8BvCuL1INX9vVt+dfwcCvNb7f9q2RuSfrGvWu/sL2Nf3LX7pzvj4ENSGBPVarVd4fRkZFltjdmoMGiKO4IIWwIIWwoiuIOYDDzeOPoyMiyFLkum7WJCMDztrcrTTrIRuAQZ6NcK1utL4dWq/VZoC8BhqvV6l1lWb4YYxyLMY6VZflitVq9CxhOmL60hhCKeYiV7WMKIXw9jT1HpXw3c+bOAKzOjJubzebJrKQCQLPZPClpc7bP6rMYKtjXth2OMf7tIkr11Wz8oQDc1Fb09vY+kQw1YAuwJY2nbUluAnCWpKkaFl6IQIzxivaR2SYA89sJVK/Xp2x32R6w/a30DNjuqtfrU0ArYecDCEqgLqm94T0dEm9mBG7PxkdDlkBnkhebgIezNQ8nHcCZPL9ijE1Jf/bZZoPtzbavmqNZLbf9tSxq+yoduuJ+SZ+zXSZyBXCqU+d8fvC5yRUrV+0G2j3g2hDCLyXd/+Su3QdnvP/zCuH72LWsgf2k0oHlH2c2odlkxcpVEdgr6aDtjyb8x20/J+mA7T9I6rL9SWA5dne2/GdXLl58qNJh398An85yTMA+4DOz8Dgu6Zu2dwJXJ91ltm8Gbp7Fgb+EEB4aHhpq5CEtACqVyr3AC0AlPS8k3TSmQ2YPhhBuS/1/LpmS9JTtNTHGfwBU2uUALARotVqniqJYH2Pck85pfavVaufAwnQvnHc0McaDKVptebN94QAnJB0EdtjekydyZXqjs/0ZgLIs/w6sy8bnYGYJ63pgERKC05JutT1kOwITwL9tvzlzUQUYB+Zjs2DBgu6xsbGJZHstByZbezregcBXeCsEz1bnzXt5anLyzLq71zDLxTRdVgemdx0fv2e2w5thO5DbiqL4oKT3ZKpnpyYnz+SY2ZpTAPZmJfdIrVZbNBNUq9UW2X4kU+2dcf53Aj1pj2PA7y/6m1DS00A9za9uNBq7iqJYBuoGdRdFsazRaOzKSqye1rTbaa/tlbYrqXQP2X4FIA9/J1l39xrC0v7+w5IeB8XkwS1lWe6TGJAYKMty31tfO4qSHl/a3384I3CDpI+kzC4lnRfrue6GytEjR8oQwlY73gC0L4qlth/q0M1/LYWtR48cKQF6enrC6dOnVwGLEpnxnp7en4+O1i/tszzGOCTpPmB7ahb57QUwBWyXdF+McWg6MScmuoA8OX8xOlpvXGz422XYTsB/SnpA0h7bX5R0WzI9HUL4qe2XbI+dk3xl+V7gxoztD5jRI+YK/zkEEokx2/uB/RdzIfUtueqVN04cXwF8G3iHY3z9Urw/j8ClyhsnjrcS2Vv/J/8NLxT+/zqBTkcxU/cfEkyEAu3kmjAAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-box-edit{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEg4QfHjM1QAAAGRJREFUWMNjXLhsJcNAAiaGAQYsDAwM/+lsJ+OgCwGsLqMB+D8o08CoA0YdMOqAUQewDFQdMBoFIyoN/B/U7YFRB7DQIc7xyo9GwbBMA4xDqhxgISH1klXbDYk0QOseEeOgDgEAIS0JQleje6IAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-freehand-draw{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADTElEQVRYCeWWTWwMYRjH/88721X1lZJIGxJxcEE4OOiBgzjXWh8TJKR76kWacOBGxdEJIdk4VChZI/phidRBHMRRIr7DSUiaSCRFRM3u88gz+o7Z6bBTdjmYZPf9eJ55fv/5zzvvDPC/H9QsA66Olo9Ga+/MdR+Ljm2/KQIULsz9FqItGdOfJKLhApLgVkiSCGODjWit7QpKWy+TNrFeXvzKVUT8NiTVaIgDcbiCFJ7GiT8WkARXAdYBK0Lbhi/CenArRNskuM7/tgNp4ArQ42dwjf3WY5gWTqC7O/NbNn2Xkfw/YwdSw/We14HP2IEZwX+y9cZ9SH0LmgFP7UCz4KkENBNeV0Cz4b8U8DfgKiDxMWwUXETqLvJpCQpXZfawbzS7t9v5pL19cHBwfja7YA0y/lyCM0+E5hv5+piZXwKYcF23as+37bTXsQVqgkL0p/34fHR7DcBtbetFsBmGDwMOJCggYG55yw7dMlk6DuC1Bdu2RsCU9TYWQq2IoGbsreZ5NzvEqfSBsIsIy8OTbcdgiRHeh4o8AFAEwDakbY2AaCCpH7V9aGhoUUUy3UyVbkPYFuYLDlUZH8XBpwxkK0Dbgxg5HcVi0ent7a0RULMIozaHBSMfF9b2SzdutFcFB2FkwMIJOG6qfteXOa1nHZ48tyefuwyfT9s6wtzZ3t7eZse2DR2I228TtHXzuWCx9g8MtK5cuHCZTH4tiHEOa4xFngvTyS8f35d6enomiCi4/foEXBkZaQuukChL4FYA2Whd7YcC4gEdW3CpdL3LtGAVCVYJywEyTpAuJKeMOKXZs/Bw947C50KhUFOG4cwz35cjWNBlHGeD53n3xsfHP/T19U1qciggar8Fa4I3PHobIotBWBtc2hSiChyZxVzM53Pv7FVH6Tp3uVy+g0r1ImD2GjIrQGYIxjnfuXTZGICS5k/bBwJoubwEFX4TLah9EXomJGMA3za+f9913Yl4TnzsDQ+vE6YTZOjHh4ngibstt1pzQwd04F0bPStEBpXqRoBeQ/AKghfBnOEKgS+Q7z91Xfdz/HGKg8Ox7z8iYD9z6wqTkZFgnvhMGP9VZ2or1XVkPM9z0mytSfVsHa1RLBZbLoyNzUnK+ydz3wC6I9x+lwbngwAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-poly-draw{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEjglo9eZgwAAAc5JREFUWMPt1zFrU1EUB/DfS4OmVTGDIChCP4BgnQXRxVHqIJUupp9AB8VBQcRBQUXIB9DWQoMRiXZzcnQSA34A7aAuHSJKkgo2LvfBrU3aJnlYkBy4vHcP557zP/9z3r33JdXa647N0kHSZd5Nn0rSxc8G3cXp85sMcnZZ8vge3osZ+l3vB8CWFA0iL14t79h210swAjACMAIwAjACkB90D/8/GchI9ve4nPwTBh5E9ws7OepzGWb9EddSn51Op9ZstadSg4VK1UKlKkmSDSMLALewiuNh/hVJq71Wxttmqz0dG88vPc+MgWP4grvYG3SLOBrZFFFrttqPe4HIDxh4GSei+98iSlusuYopXEAjBtEPA3tQwUpwluAbDm4TPJUz+BTW9l2Ce6G7L0X/Bw8D3T/7SKKIDzHg7QCcxjvcQAEtXAnrrg/RP0/DKPbqgcN4iVOR7gcO4dcQgRuoh7HSqwlP4n20m63jJu5n8MkWMYfP3UowhzdR8FU8w9iQwevBdyq3/27CMRzAE5yLuvsRLg+ZcR1nJ8YL81HWJUzGAPaFZwe/Q5MdyYDyNHgjzO90YyGHtVDncuiJchaHw8R4oREFV5qdiVmYLM3OgD9k5209/atmIAAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-point-draw{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEMEiERGWPELgAAA4RJREFUWMO1lr1uG1cQhb9ztdRSP7AF1QxgwKlcuZSqRC9gWUUUINWqTh5AnaFOnVPEteQmRuhCURqWsSqqc9IolREXdEvQBElxtdw7KURSFEVKu4w8wAKLxdw9Z+bMnRmZGXfZ29//II8th4WwGVNyIoQLYB5vxA9Caq04iUd9A+7ZlsNC2I7TdSd2hZXMJKlnTqp9jtl/GBaqoyQ0noFKpUIzBicYYc+DEFpxkglc4oVJa5gvDn8v1xV2irG3FM4NSVwjUKlUaMcpJhCGmSEJQ6QGD8M5WnHCd8+f3QCXpPLx8WNwv0j6Bm9FMK7FJ3WBE+R/2t7c/GBmFvSBrzRTCsyTDjXrxUgEMtpxynJYmJoBJ4VAybwVARgvL7Oik0okCodnKpVKX7P0leiVMb0VvbJT+upznK4vh0GIeQwwQStJkHQD3MwsCALTJRG7Qrdrj5m/djgYaIa0hlkRdJk26XEgC9txurccBtVW3IudBImmZuACUP+ZlIDBt9FKcubYNTcAH/X0RYM1E7utJPlqe+uZzPxUcEkiSS4sTT95n15Mud0xWC0o2PAWOCdK3KYZlFxfM+tHOcnMzNr1es18ug+cgsVjP4yBU/Ppfrter1m/+l0+zYygML1xRVHU7TSb1cSzBzoBzszsH+AMdJJ49jrNZjWKou6wBnwOzcyndBpNbuueURR1Dw8Pq35p9cc5p/Dy9Dypt7jXrtdGwQECS9NPhr6Gq6txUzNigE6zydLK6lTw12/KT4FGFEUfJX2YJNONq5tVs4ODA7sD/DnwJ/BoADZuE3tHFs12dna6d4C/BI6AlbyzI8ii2TTw12/KK33gb2cdXsNZoAntbZC2SeO4c9592k/5eNQbiwvFd1kJuFGwLJr1wSPg/SwpvyFBHufOeXcFeAlE97U/uCxOY+P3b+Bn4B3Q+L8EdJfD4a+/AbC4UBzPxiPg3wlHZquB28Cn2IuR9x3gr3uV4DbwfvSDOvi4uFA8BDZmIRHkjHpS9Ht9iRqd8+5G3g05mAGcQbsdiX5QJ428G7Kygo8XYdb1/K4NWVmjzkNge2sz84bs+ELmpDDLtqWsNZBXgvmw8CTtpWVMT7x5YWBjLARnwZfKQNYN2U2LPvrh+5nBt7c2M2/It9bArCTKR8eZN+SJ13AScPnoODeRdqNenH+wul5w2gUr2WUjMFAt8bZ/0axX/wNnv4H8vTFb1QAAAABJRU5ErkJggg==");}.bk-root .bk-tool-icon-poly-edit{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gELFi46qJmxxAAABV9JREFUWMOdl19vFFUYxn9n9u9sCyylUIzWUoMQBAWCMdEEIt6xIRQSLIEKtvHe6AcA4yeQb7CAUNJy0daLeomJN8SEULAC2kBBapBKoLvbmdl/c14vdmY7u91tF95kknPOnHmf95znPc97Ro2OTeBbdjFDT3c32ZxVHUOE9kSMB0/m6ExuoJn1H+ur6Y+OTfD50SMN5168OgrAlyf7CfuD+z7+iDs3p8hkLUQ0iFQ/yFl5Nm/qonfHVva+s32Zw9GxCYILsZ08tpNfBhbs+1YN4OH9+7huGdECSBVfqUosbsllfmauBqiR+cCNwOr7AEo8pPHJnymXykhg5fUWjoQpl0vVvhZhbSzGoUOHqgBlt6B6uruj2Zy1E9jo0fhfeyL2x4Mnc8VErK0KUEOB64JSyptfG4RSytsJjUJVxw2lsFy3urL9nx1Qd25ObctkrVMi+jQivd7U2ZyV/3Hzpq7h3h1b/7p9Y0o8v8rwAbTWrGpSocN/FGDlbAI0Rl23PCBan0Ok158H9Ipwzi25A/Mzc9Gl/BYx/E4kYqC1NKRARNAaDCNUM27Z+Zr+ouXs0q4+LSLBHPYCFkTkC6uU39kwCdsS7WRKmaYUiAhdnZ3MPX2K4+QjQI+C94A93rMzm8ltMwyDeDzWjMZeEb2pYQDdW3vITU2jtUZ5QThOPgm8C7wP7J15OPsBsB3oWpGnVWisCeDS1VHj4vBI92+/3tgB7Ab2AruAXiDBK5oIOkhtkEYRNRuJhObrd8Dl9ewf4D5wG7hVLpen29vb5wzD+BrkbBMaL3d1dk5nsrnlFDTTFWAWmAZueWD3gCemGde2k2fw1Al1YXhEvjozoO49eczdqekrWmsc2zlrmvEKOGoW1GUjFLqSk2KpJrCLwyMCPAP+BO54QL8DM6YZX/ClsP9YnwKkXnIBP4jdIpJRpdJTCYdMwwi98KU0Hjc/dDILNyUcwTCWdOSMJ0TRmBktGRhLugu0xyLk7CIqVNm+0bGJptl1YXikD0grpY4Rjc4a8Fbgdab/6OGbAJeCUuyJnnHmZH9pbSyGuBXV8NUwlUpR1EWyixmSyTWEwqGlJ2Swbo2JXbAAfgDGgGQA9I1A9t1tlq0AxrXxn0ilUpw4fhQqYkH/sT41OTnJJwf2s6FjI5mshdYa7bqVR2uezr9MJmJt14FvGrh/O9D+e6UkM/xyCuCqEKCYnJyUTKFQrZDHjxzGshwWLQcRsOz8Hi85P23id0ug/XilAMLBmm4tPGdoaKjSH5+oAGrhwvBI9SjZTn4QSK9yenoD7dlrExPoJlXW8G8ytpNHxRKk02lGxsdRKFwXLNvx5yY94HQLGhGk4LFCYQSqaE0AwWM1eOoEbR0dKBSW7bC4mKuffxs4D/wCLKwQQPAUzIkslfp6cVomROWSolh0GjldAM4nzDi2k9/i5UAzC9aKfwNJ3zgJg9YEvN6+C7SHgKm69+sD7RfNnKTTaZRPQfAut4oFV//IS7gkcB34VlVo8kGzphlfB+DU+TfNGBpZtRastvrvARJmfMF28ge9sc2B9/PNnCilMIDwK6y8/ow/Ai4kvILTljAXvDvEvrqKSUs60KolzPjBxspavQD2tKqCAGF/Ba+xE/Wbilu54wZV8NEKF5fXzQHl/bh4hUsE0WAXSlDMYcQSrQXgCmsTseXHsJkNnjqBFGwKJaHsKlxtUHYVhbLCzr1kaOA4bcn1y1Swmb+iLpJKpVrfgdpfsiVVCYcgluwgnU7jEgJ4s5UkLFtWYyHyEg0/N1q1tmQH+YXnAMFr97Nmv3p+0QsHQRsF8qpBOE5+rb9Nkaj50tVQKjqh4OU3GNL/1/So3vuUgbAAAAAASUVORK5CYII=");}.bk-root .bk-tool-icon-line-edit{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAG/3pUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjarVdpknSpDfzPKXwEJBDLccQW4Rv4+E4BtXR198znCdeLLijgQUoppWg3//Pv5f6FDwefXJRcUk3J4xNrrKzoFH8+pyUf9/f+8J3C7y/j7jnBGApow/mZ5l2vGJfXCzne8fZ13OV+9yl3ozvx2DDYyXbauCDvRoHPON3frl5Imt7MuX8hH0seiz9/xwxnDMFgYMczUPD7m89J4fwp/iK+OVRbiMf6gm8K4bv/3NN1Pzjw2fvwn+93PLzccTZ6mJU+/HTHSX723/bSOyLi58n8jmiqz/798+a/tUZZax7rNCKOakzXqIcpu4eFDe483kh4Mv4E/byfiqd49R2OHzC1Od/woxLD44siDVJaNHfbqQNi5MkZLXPnsMdKyFy5gwwCHXhocXahhhEK+OhgLmCYn1hon1vtPBxWcPIgrGTCZrR5fHvc58A/fb5stJaFOZEvT18BF1t8AYYxZ99YBUJoXZ/K9i+50/jPjxEbwKBsNxcYqL6dLZrQK7bC5jl4cVga/Ql5yuNuABfhbAEYCmDAJwpCiXxmzkTwYwE/CuQcIjcwQOKEB1ByDCGBnMJ2Nt7JtNey8BmGvIAICSlkUFODgqwYJSbkW0EIqZMgUUSSZClSRVNIMUlKKSfTKc0hxyw55ZxLrllLKLFISSWXUmrRyjVAxsTVVHMttVZVHKpRsZdivWKgcQstNmmp5VZabdoRPj126annXnrtOniEAQlwI408yqhDJ02E0oxTZpp5llmnLsTaCisuWWnlVVZd+mTtsvqVtU/m/po1uqzxJsrW5RdrGM75sQWZnIhxBsY4EhjPxgACmo0zXyhGNuaMM185uBCEgVKMnEHGGBiMk1gWPbl7Mfcrbw7e/V9545+Yc0bd/4M5Z9S9Mfedtx9YG7rlNmyCLAvhUyhkQPrNhvO5AJFnrZIR0plaLL5liQYdDi5TubaIokFDkmoFEB8CzxZVxemssDqthPhUblPgW1iQU5g6XwNwyVI7bUFRm035iNziMkgWvEso2SXnsJfveR0Y4SlVF8YWC1pVQhJiQa8JwDvlMNIxAfq3F7GDObHU1LlhzlZaWwNp6BvACxAgInGXlllMGZCpEnZHrGA6GM2718xuFcz7YdUQxzEEfjdWz4GlkcwaonT0pgA6mB25grPILtnSMhuCpsGhmMU6uJbixJs4lbKHqh+wos1jW2rchyGRCIvN9MXu+KAmMSfAlIKVvi/tybhCPJZCu2Ow9pLdyo427+X2ovMBmKNu8PA0zgl3fS0PB1DWWkVYB47bkyiJHhkFPzTzCjzn4Dq1mqoIWzCmcDGsHQmQAQdEHsixK1IXESd5rLU7THVJNV8obHS8sZeN0G5Jdt5pQTVKCCbgK1hItTS8o92iEZpuWJ/oC2r/0+zTmhvFXoaMVKRe27altDtid6OvG1hENVwBnC61KKugNoemOiPCCNb3GoHAZOFuDxxPsD+07nbSPcr/o1Zmc4jARhotrA5F5ZcjP9rPk90vR8A+k028A+8+5wKlHVID542sMzMCuXktkRzUCpE+xCBZywjNcJITx0II9x5948CekBl4XaC5OCX2nCyObdwN3HwQh5DWL/BBEkhDYHn/vpXNgZkVTZs8rj+HO8JFC6qvDVhgAEQSYCDyC86rMhG1WPzAVB9ZldDWG6EzDcFiqJBDvFS8mXDv3SK2LPoguVB2kwUx7UL5KqZWiEzocsbvSjNnaYDNtcYJuA5cDcsrvHd6yCxGjqvl9+wh3Qh8Kc9py8sNW8ncU8qwxdPj1qIGfrPqlXeoS4/JLa/LwRLTCtxuSoZUT+2Su6kXW3QNacYQbId6NUKVbROpviybFSPQQL9lhB2MamEnFyB9Y+hrG1+xBg+L0QG2TZdTdlcsBdq9oHdt9Bu5/IM9+Nfh1AwrSqlboTA6Bgq568A7UfbaMrZjoQZhQphofvNw93+bN+5X7FYKBgLmRid+tSdV6c02A4R0cHwKobmoMt5+6WI9XNISFIywpf6RMd5/a91vE78FzVHIFmxud4woyJx76OMTCa4yhgN3iJO2VfRPFMv9sYTxFzU+1eWeYS52pwOoSJldZY6koib4P1O427rbeUrNZfu44hWjz5ZSuu/vKPpimoXbLkfxWSPetvxDWG5jQSaZCxA3ad+p6rlttDhK+YwwK1LHVe0drDtorc5vnQ1247g58vewDtU7L3DRwrG4dhCUDRKKOtYr2dXHtpt+33d1WZmfkAHdl7Q8ENF+CNgB+nOw29n5F7SeNo/ckbu4laLTCdqJLHjmhJbKzmrCEX7zULrhefuHmu0V/1nbP1pnb6FaT7sOxn4pvWkfrYhYtCeJ4Xv+kOXrroIs1eHWXN1/AfzaY94ms5vaAAABg2lDQ1BJQ0MgcHJvZmlsZQAAeJx9kT1Iw0AcxV/TSkUqDnYQUchQnSyIijhqFYpQIdQKrTqYXPoFTRqSFBdHwbXg4Mdi1cHFWVcHV0EQ/ABxcnRSdJES/5cUWsR4cNyPd/ced+8AoVFhmhUaBzTdNtPJhJjNrYrhV4QwjAgGIMrMMuYkKQXf8XWPAF/v4jzL/9yfo1fNWwwIiMSzzDBt4g3i6U3b4LxPHGUlWSU+Jx4z6YLEj1xXPH7jXHRZ4JlRM5OeJ44Si8UOVjqYlUyNeIo4pmo65QtZj1XOW5y1So217slfGMnrK8tcpzmEJBaxBAkiFNRQRgU24rTqpFhI037Cxz/o+iVyKeQqg5FjAVVokF0/+B/87tYqTE54SZEE0PXiOB8jQHgXaNYd5/vYcZonQPAZuNLb/moDmPkkvd7WYkdA3zZwcd3WlD3gcgcYeDJkU3alIE2hUADez+ibckD/LdCz5vXW2sfpA5ChrlI3wMEhMFqk7HWfd3d39vbvmVZ/P2aecqIM1FFZAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AQdDBkQmV+argAABM5JREFUWMOtl9trHFUcxz9n9jYzm7Tb9JIWGtqUllLwVgRBQWl90S6lTaGmF6E2/4H+A4r+A0offdlWodL4kEZw9bG+iC9iKqLF0os0EBq02dtcdmdnfj7szGZ2M5vulv5g4JwzZ873+7ufUfMLi0RSa1TZNzVFrW511xBhzMxx79EyOwrbGSSzZ073zOcXFnlv5lTi3mvfzAPwwYVZ0tHiq6+/xu+/LlGtWYgEINL9oG657N41yfSRgxw9cHjDgfMLi8QVsR0X23E3gMXnkXQJ3L9zB99vI4EA0sVXqsPF93xW7y73ACVJBJwE1j8HUBIi3Sz/QNtrIzHN+yWdSdNue915IMKWXI4TJ050Adp+U+2bmkrV6tZeYAXwEJExMyf3Hi0rM5fvAvS4wPdBKRW6vZeEUiq0RIBCddddpymu0+rRbPvEzkPVmmWLBA1EdGAbYNctt7V712QwfeSgd/uXJQnPVVoEEAQBTxXpuEMELNtNNFW1WrsrQdBCRImQEeE/wBUh53v+7tW7y5n1+BZRIoJSioXvy3itdgclURSZTBrP87AdV57G1TT0d4GPgC+Bw8Ca7bifATsTgzBvjlH1qgNdICJM7tjB8soKw4jtuD+Gw3c229e1wF+P/uHPpT86rhBBRHActwAcAl4EjgIvAYcFJnlOoq5dv6EBU8AR4OUQ6AVgGjATwuC5YUdZ4A+z+1mBTUM/AKwqpZSIpPfu2VP7+/6DYEMMPE9N83lzq23ZWwxDd4GaQnmgUloqperSCpKC8HGCXz8G7NANU8CWUKPzsUDbyLPVyjYC39e0VMZx3Ccoha4b4lQqbUlnsBqNWCXpEMgKfA38DNSBcdPQr4zlMtTtFiqlulmQmJv9ks2idUZGZMjZmZMAfBUvxWHR0y5dmPV2FcbPG9ncFdPQS3nTuAJQLBZpBS1qjSqFwjipdGr9SWlsHTewm9ZmnngMKAaV9nBd+/bmdxSLRc6dnemm3+yZ06pcLvPGW2+yfWIn1ZpFEAQEvt95goCV1TXMXH4zAt4woaRF7RTAVylAUS6Xpdpsdjvk2VMnsSyHhuVEZTh+xgywBhwLfZIdKRfj7dWqPGFubq7T428ukslkaHttLNsZ9P3nwIfh+DhwS4EO9DA0zByBCE2n1fPxpQuznSCaX1js9nFp2pjbtqGhobQ0jUY9CbgALERah3IM+El1rNqTaqaph5W1uYGAFrfA5YvnyE9MoFBYtjMI/BXgQR/4pqVDZL3V9/cYrX+x7SnsXh/H5TLwW2iBQbVLNgn65CDsrSPOIJOXwmdQ4fRHrZilUqmXwNXrNzbbfxv4ArgFVBLeJ95oDEMHwHHcvvUcRqEwuBf0SSUEB9gfxsAgAkO1kcj/WvwKPaR8EhvPAUvRtdIMtR1FtBH37w8DEeChaehXw/xfAnzHcVOjEkhHrIe0Qlz7T8PuWLEd9+2w9KphgUUgQJ7JAgAPDT13NTrJyOYqIilrlEwQv/NPMTSByxfPIU37eCqtq2zWmPYDjbavaLYVdn2NuffPjqRJK2hRLBaHzoK+X7L1QE+nIFeYoFQqkTVMaTn2UOe1LWtwEJqGzqgRnS9M4Fb+3XBJGfSrFzW9dBw0icioJBzHzUXdMJM18APwWo6Kmy1O6X+V8UHDotBqogAAAABJRU5ErkJggg==");}'},function e(t,r,n,a,i){a(),n.root="bk-root",n.menu_icon="bk-menu-icon",n.context_menu="bk-context-menu",n.horizontal="bk-horizontal",n.vertical="bk-vertical",n.divider="bk-divider",n.active="bk-active",n.menu="bk-menu",n.above="bk-above",n.below="bk-below",n.caret="bk-caret",n.down="bk-down",n.up="bk-up",n.left="bk-left",n.right="bk-right",n.default=".bk-root .bk-menu-icon{width:28px;height:28px;background-size:60%;background-color:transparent;background-repeat:no-repeat;background-position:center center;}.bk-root .bk-context-menu{position:absolute;display:inline-flex;display:-webkit-inline-flex;flex-wrap:nowrap;-webkit-flex-wrap:nowrap;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;width:auto;height:auto;z-index:100;cursor:pointer;font-size:12px;background-color:#fff;border:1px solid #ccc;border-radius:4px;box-shadow:0 6px 12px rgba(0, 0, 0, 0.175);}.bk-root .bk-context-menu.bk-horizontal{flex-direction:row;-webkit-flex-direction:row;}.bk-root .bk-context-menu.bk-vertical{flex-direction:column;-webkit-flex-direction:column;}.bk-root .bk-context-menu > .bk-divider{cursor:default;overflow:hidden;background-color:#e5e5e5;}.bk-root .bk-context-menu.bk-horizontal > .bk-divider{width:1px;margin:5px 0;}.bk-root .bk-context-menu.bk-vertical > .bk-divider{height:1px;margin:0 5px;}.bk-root .bk-context-menu > :not(.bk-divider){border:1px solid transparent;}.bk-root .bk-context-menu > :not(.bk-divider).bk-active{border-color:#26aae1;}.bk-root .bk-context-menu > :not(.bk-divider):hover{background-color:#f9f9f9;}.bk-root .bk-context-menu.bk-horizontal > :not(.bk-divider):first-child{border-top-left-radius:4px;border-bottom-left-radius:4px;}.bk-root .bk-context-menu.bk-horizontal > :not(.bk-divider):last-child{border-top-right-radius:4px;border-bottom-right-radius:4px;}.bk-root .bk-context-menu.bk-vertical > :not(.bk-divider):first-child{border-top-left-radius:4px;border-top-right-radius:4px;}.bk-root .bk-context-menu.bk-vertical > :not(.bk-divider):last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;}.bk-root .bk-menu{position:absolute;left:0;width:100%;z-index:100;cursor:pointer;font-size:12px;background-color:#fff;border:1px solid #ccc;border-radius:4px;box-shadow:0 6px 12px rgba(0, 0, 0, 0.175);}.bk-root .bk-menu.bk-above{bottom:100%;}.bk-root .bk-menu.bk-below{top:100%;}.bk-root .bk-menu > .bk-divider{height:1px;margin:7.5px 0;overflow:hidden;background-color:#e5e5e5;}.bk-root .bk-menu > :not(.bk-divider){padding:6px 12px;}.bk-root .bk-menu > :not(.bk-divider):hover,.bk-root .bk-menu > :not(.bk-divider).bk-active{background-color:#e6e6e6;}.bk-root .bk-caret{display:inline-block;vertical-align:middle;width:0;height:0;margin:0 5px;}.bk-root .bk-caret.bk-down{border-top:4px solid;}.bk-root .bk-caret.bk-up{border-bottom:4px solid;}.bk-root .bk-caret.bk-down,.bk-root .bk-caret.bk-up{border-right:4px solid transparent;border-left:4px solid transparent;}.bk-root .bk-caret.bk-left{border-right:4px solid;}.bk-root .bk-caret.bk-right{border-left:4px solid;}.bk-root .bk-caret.bk-left,.bk-root .bk-caret.bk-right{border-top:4px solid transparent;border-bottom:4px solid transparent;}"},function e(t,r,n,a,i){a();const o=t(1),s=t(43),l=t(245),c=o.__importStar(t(243));class u{constructor(e,t={}){this.items=e,this.options=t,this.el=s.div(),this._open=!1,this._item_click=e=>{var t;null===(t=this.items[e])||void 0===t||t.handler(),this.hide()},this._on_mousedown=e=>{var t,r;const{target:n}=e;n instanceof Node&&this.el.contains(n)||(null===(r=(t=this.options).prevent_hide)||void 0===r?void 0:r.call(t,e))||this.hide()},this._on_keydown=e=>{e.keyCode==s.Keys.Esc&&this.hide()},this._on_blur=()=>{this.hide()},s.undisplay(this.el)}get is_open(){return this._open}get can_open(){return 0!=this.items.length}remove(){s.remove(this.el),this._unlisten()}_listen(){document.addEventListener("mousedown",this._on_mousedown),document.addEventListener("keydown",this._on_keydown),window.addEventListener("blur",this._on_blur)}_unlisten(){document.removeEventListener("mousedown",this._on_mousedown),document.removeEventListener("keydown",this._on_keydown),window.removeEventListener("blur",this._on_blur)}_position(t){const r=this.el.parentElement;if(null!=r){const e=r.getBoundingClientRect();this.el.style.left=null!=t.left?t.left-e.left+"px":"",this.el.style.top=null!=t.top?t.top-e.top+"px":"",this.el.style.right=null!=t.right?e.right-t.right+"px":"",this.el.style.bottom=null!=t.bottom?e.bottom-t.bottom+"px":""}}render(){var t,r;s.empty(this.el,!0);const n=null!==(t=this.options.orientation)&&void 0!==t?t:"vertical";s.classes(this.el).add("bk-context-menu",`bk-${n}`);for(const[t,n]of l.enumerate(this.items)){let e;if(null==t)e=s.div({class:c.divider});else{if(null!=t.if&&!t.if())continue;{const n=null!=t.icon?s.div({class:["bk-menu-icon",t.icon]}):null;e=s.div({class:(null===(r=t.active)||void 0===r?void 0:r.call(t))?"bk-active":null,title:t.tooltip},n,t.label)}}e.addEventListener("click",()=>this._item_click(n)),this.el.appendChild(e)}}show(e){if(0!=this.items.length&&!this._open){if(this.render(),0==this.el.children.length)return;this._position(null!=e?e:{left:0,top:0}),s.display(this.el),this._listen(),this._open=!0}}hide(){this._open&&(this._open=!1,this._unlisten(),s.undisplay(this.el))}toggle(e){this._open?this.hide():this.show(e)}}n.ContextMenu=u,u.__name__="ContextMenu"},function e(t,r,n,a,i){a();const o=t(9);function*s(t,r){const n=t.length;if(r>n)return;const a=o.range(r);for(yield a.map(e=>t[e]);;){let e;for(const t of o.reversed(o.range(r)))if(a[t]!=t+n-r){e=t;break}if(null==e)return;a[e]+=1;for(const t of o.range(e+1,r))a[t]=a[t-1]+1;yield a.map(e=>t[e])}}n.enumerate=function*(t){let r=0;for(const e of t)yield[e,r++]},n.combinations=s,n.subsets=function*(t){for(const e of o.range(t.length+1))yield*s(t,e)}},function e(t,r,n,a,i){a();const o=t(1),s=t(238),l=o.__importStar(t(241)),c=t(43);class e extends s.ButtonToolButtonView{render(){super.render(),c.classes(this.el).toggle(l.active,this.model.active)}_clicked(){const{active:e}=this.model;this.model.active=!e}}n.OnOffButtonView=e,e.__name__="OnOffButtonView"},function e(t,r,n,a,i){a();const o=t(238),s=t(246);class l extends o.ButtonToolView{}n.InspectToolView=l,l.__name__="InspectToolView";class e extends o.ButtonTool{constructor(e){super(e),this.event_type="move"}static init_InspectTool(){this.prototype.button_view=s.OnOffButtonView,this.define(({Boolean:e})=>({toggleable:[e,!0]})),this.override({active:!0})}}n.InspectTool=e,e.__name__="InspectTool",e.init_InspectTool()},function i(e,t,r,n,a){n();const o=e(1),s=e(19),l=e(43),c=e(122),u=e(240),i=e(20),f=e(9),d=e(13),h=e(8),p=e(249),v=e(99),g=e(53),m=e(236),_=e(237),y=e(251),b=e(252),x=e(247),w=o.__importStar(e(241)),A=w,T=o.__importStar(e(253)),k=T;class M extends g.Model{constructor(e){super(e)}static init_ToolbarViewModel(){this.define(({Boolean:e,Nullable:t})=>({_visible:[t(e),null],autohide:[e,!1]}))}get visible(){return!this.autohide||null!=this._visible&&this._visible}}r.ToolbarViewModel=M,M.__name__="ToolbarViewModel",M.init_ToolbarViewModel();class S extends u.DOMView{constructor(){super(...arguments),this.layout={bbox:new v.BBox}}initialize(){super.initialize(),this._tool_button_views=new Map,this._toolbar_view_model=new M({autohide:this.model.autohide})}async lazy_initialize(){await super.lazy_initialize(),await this._build_tool_button_views()}connect_signals(){super.connect_signals(),this.connect(this.model.properties.tools.change,async()=>{await this._build_tool_button_views(),this.render()}),this.connect(this.model.properties.autohide.change,()=>{this._toolbar_view_model.autohide=this.model.autohide,this._on_visible_change()}),this.connect(this._toolbar_view_model.properties._visible.change,()=>this._on_visible_change())}styles(){return[...super.styles(),w.default,T.default]}remove(){c.remove_views(this._tool_button_views),super.remove()}async _build_tool_button_views(){const e=null!=this.model._proxied_tools?this.model._proxied_tools:this.model.tools;await c.build_views(this._tool_button_views,e,{parent:this},e=>e.button_view)}set_visibility(e){e!=this._toolbar_view_model._visible&&(this._toolbar_view_model._visible=e)}_on_visible_change(){const e=this._toolbar_view_model.visible,t=A.toolbar_hidden;this.el.classList.contains(t)&&e?this.el.classList.remove(t):e||this.el.classList.add(t)}render(){if(l.empty(this.el),this.el.classList.add(A.toolbar),this.el.classList.add(A[this.model.toolbar_location]),this._toolbar_view_model.autohide=this.model.autohide,this._on_visible_change(),null!=this.model.logo){const t="grey"===this.model.logo?k.grey:null,r=l.a({href:"https://bokeh.org/",target:"_blank",class:[k.logo,k.logo_small,t]});this.el.appendChild(r)}for(const[,t]of this._tool_button_views)t.render();const t=[],r=e=>this._tool_button_views.get(e).el,{gestures:n}=this.model;for(const e of d.values(n))t.push(e.tools.map(r));t.push(this.model.actions.map(r)),t.push(this.model.inspectors.filter(e=>e.toggleable).map(r));for(const r of t)if(0!==r.length){const t=l.div({class:A.button_bar},r);this.el.appendChild(t)}}update_layout(){}update_position(){}after_layout(){this._has_finished=!0}export(e,t=!0){const r="png"==e?"canvas":"svg",n=new p.CanvasLayer(r,t);return n.resize(0,0),n}}function C(){return{pan:{tools:[],active:null},scroll:{tools:[],active:null},pinch:{tools:[],active:null},tap:{tools:[],active:null},doubletap:{tools:[],active:null},press:{tools:[],active:null},pressup:{tools:[],active:null},rotate:{tools:[],active:null},move:{tools:[],active:null},multi:{tools:[],active:null}}}r.ToolbarBaseView=S,S.__name__="ToolbarBaseView";class L extends g.Model{constructor(e){super(e)}static init_ToolbarBase(){this.prototype.default_view=S,this.define(({Boolean:e,Array:t,Ref:r,Nullable:n})=>({tools:[t(r(m.Tool)),[]],logo:[n(i.Logo),"normal"],autohide:[e,!1]})),this.internal(({Array:e,Struct:t,Ref:r,Nullable:n})=>{const a=t({tools:e(r(_.GestureTool)),active:n(r(m.Tool))});return{gestures:[t({pan:a,scroll:a,pinch:a,tap:a,doubletap:a,press:a,pressup:a,rotate:a,move:a,multi:a}),C],actions:[e(r(y.ActionTool)),[]],inspectors:[e(r(x.InspectTool)),[]],help:[e(r(b.HelpTool)),[]],toolbar_location:[i.Location,"right"]}})}initialize(){super.initialize(),this._init_tools()}_init_tools(){const e=function(e,t){if(e.length!=t.length)return!0;const r=new Set(t.map(e=>e.id));return f.some(e,e=>!r.has(e.id))},t=this.tools.filter(e=>e instanceof x.InspectTool);e(this.inspectors,t)&&(this.inspectors=t);const r=this.tools.filter(e=>e instanceof b.HelpTool);e(this.help,r)&&(this.help=r);const n=this.tools.filter(e=>e instanceof y.ActionTool);e(this.actions,n)&&(this.actions=n);const a=(e,t)=>{e in this.gestures||s.logger.warn(`Toolbar: unknown event type '${e}' for tool: ${t}`)},i={pan:{tools:[],active:null},scroll:{tools:[],active:null},pinch:{tools:[],active:null},tap:{tools:[],active:null},doubletap:{tools:[],active:null},press:{tools:[],active:null},pressup:{tools:[],active:null},rotate:{tools:[],active:null},move:{tools:[],active:null},multi:{tools:[],active:null}};for(const e of this.tools)if(e instanceof _.GestureTool&&e.event_type)if(h.isString(e.event_type))i[e.event_type].tools.push(e),a(e.event_type,e);else{i.multi.tools.push(e);for(const t of e.event_type)a(t,e)}for(const t of Object.keys(i)){const r=this.gestures[t];e(r.tools,i[t].tools)&&(r.tools=i[t].tools),r.active&&f.every(r.tools,e=>e.id!=r.active.id)&&(r.active=null)}}get horizontal(){return"above"===this.toolbar_location||"below"===this.toolbar_location}get vertical(){return"left"===this.toolbar_location||"right"===this.toolbar_location}_active_change(e){const{event_type:t}=e;if(null==t)return;const r=h.isString(t)?[t]:t;for(const t of r)if(e.active){const r=this.gestures[t].active;null!=r&&e!=r&&(s.logger.debug(`Toolbar: deactivating tool: ${r} for event type '${t}'`),r.active=!1),this.gestures[t].active=e,s.logger.debug(`Toolbar: activating tool: ${e} for event type '${t}'`)}else this.gestures[t].active=null}}r.ToolbarBase=L,L.__name__="ToolbarBase",L.init_ToolbarBase()},function e(t,r,n,a,i){a();const o=t(250),s=t(99),l=t(43);function c(e){!function(t){void 0===t.lineDash&&Object.defineProperty(t,"lineDash",{get:()=>t.getLineDash(),set:e=>t.setLineDash(e)})}(e),function(t){t.setImageSmoothingEnabled=e=>{t.imageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.oImageSmoothingEnabled=e,t.webkitImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e},t.getImageSmoothingEnabled=()=>{const e=t.imageSmoothingEnabled;return null==e||e}}(e),function(f){f.ellipse||(f.ellipse=function(e,t,r,n,a,i,o,s=!1){const l=.551784;f.translate(e,t),f.rotate(a);let c=r,u=n;s&&(c=-r,u=-n),f.moveTo(-c,0),f.bezierCurveTo(-c,u*l,-c*l,u,0,u),f.bezierCurveTo(c*l,u,c,u*l,c,0),f.bezierCurveTo(c,-u*l,c*l,-u,0,-u),f.bezierCurveTo(-c*l,-u,-c,-u*l,-c,0),f.rotate(-a),f.translate(-e,-t)})}(e)}const u={position:"absolute",top:"0",left:"0",width:"100%",height:"100%"};class f{constructor(e,t){switch(this.backend=e,this.hidpi=t,this.pixel_ratio=1,this.bbox=new s.BBox,e){case"webgl":case"canvas":{this._el=this._canvas=l.canvas({style:u});const e=this.canvas.getContext("2d");if(null==e)throw new Error("unable to obtain 2D rendering context");this._ctx=e,t&&(this.pixel_ratio=devicePixelRatio);break}case"svg":{const e=new o.SVGRenderingContext2D;this._ctx=e,this._canvas=e.get_svg(),this._el=l.div({style:u},this._canvas);break}}c(this._ctx)}get canvas(){return this._canvas}get ctx(){return this._ctx}get el(){return this._el}resize(e,t){this.bbox=new s.BBox({left:0,top:0,width:e,height:t});const r=this._ctx instanceof o.SVGRenderingContext2D?this._ctx:this.canvas;r.width=e*this.pixel_ratio,r.height=t*this.pixel_ratio}prepare(){const{ctx:e,hidpi:t,pixel_ratio:r}=this;e.save(),t&&(e.scale(r,r),e.translate(.5,.5)),this.clear()}clear(){const{x:e,y:t,width:r,height:n}=this.bbox;this.ctx.clearRect(e,t,r,n)}finish(){this.ctx.restore()}to_blob(){const{_canvas:n}=this;if(n instanceof HTMLCanvasElement)return null!=n.msToBlob?Promise.resolve(n.msToBlob()):new Promise((t,r)=>{n.toBlob(e=>null!=e?t(e):r(),"image/png")});{const n=this._ctx.get_serialized_svg(!0),e=new Blob([n],{type:"image/svg+xml"});return Promise.resolve(e)}}}n.CanvasLayer=f,f.__name__="CanvasLayer"},function e(t,r,n,a,i){a();const o=t(168),c=t(8),s=t(43);function f(e){if(!e)throw new Error("cannot create a random attribute name for an undefined object");const t="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";let r="";do{r="";for(let e=0;e<12;e++)r+=t[Math.floor(Math.random()*t.length)]}while(e[r]);return r}function l(e){var t;const r={left:"start",right:"end",center:"middle",start:"start",end:"end"};return null!==(t=r[e])&&void 0!==t?t:r.start}function u(e){var t;const r={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return null!==(t=r[e])&&void 0!==t?t:r.alphabetic}const e=function(e,n){const a=new Map,i=e.split(",");n=null!=n?n:10;for(let r=0;r<i.length;r+=2){const e="&"+i[r+1]+";",t=parseInt(i[r],n);a.set(e,"&#"+t+";")}return a.set("\\xa0","&#160;"),a}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),d={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}};class h{constructor(e,t){this.__root=e,this.__ctx=t}addColorStop(a,i){const o=this.__ctx.__createElement("stop");if(o.setAttribute("offset",`${a}`),-1!==i.indexOf("rgba")){const a=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(i),[,e,t,r,n]=a;o.setAttribute("stop-color",`rgb(${e},${t},${r})`),o.setAttribute("stop-opacity",n)}else o.setAttribute("stop-color",i);this.__root.appendChild(o)}}h.__name__="CanvasGradient";class p{constructor(e,t){this.__root=e,this.__ctx=t}}p.__name__="CanvasPattern";class v{constructor(e){var t,r,n;this.__currentPosition=null,this._transform=new o.AffineTransform,this._clip_path=null,this.__document=null!==(t=null==e?void 0:e.document)&&void 0!==t?t:document,(null==e?void 0:e.ctx)?this.__ctx=e.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version","1.1"),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.width=null!==(r=null==e?void 0:e.width)&&void 0!==r?r:500,this.height=null!==(n=null==e?void 0:e.height)&&void 0!==n?n:500,this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs)}get canvas(){return this}get width(){return this._width}set width(e){this._width=e,this.__root.setAttribute("width",`${e}`)}get height(){return this._height}set height(e){this._height=e,this.__root.setAttribute("height",`${e}`)}__createElement(e,t={},r=!1){const n=this.__document.createElementNS("http://www.w3.org/2000/svg",e);r&&(n.setAttribute("fill","none"),n.setAttribute("stroke","none"));const a=Object.keys(t);for(const e of a)n.setAttribute(e,`${t[e]}`);return n}__setDefaultStyles(){const r=Object.keys(d),n=this;for(let t=0;t<r.length;t++){const e=r[t];n[e]=d[e].canvas}}__applyStyleState(r){const n=Object.keys(r),a=this;for(let t=0;t<n.length;t++){const e=n[t];a[e]=r[e]}}__getStyleState(){const r=Object.keys(d),n={};for(let t=0;t<r.length;t++){const e=r[t];n[e]=this[e]}return n}__applyStyleToCurrentElement(i){var o;const s=this.__currentElement,l=Object.keys(d);for(let t=0;t<l.length;t++){const n=d[l[t]],a=this[l[t]];if(null===(o=n.apply)||void 0===o?void 0:o.includes(i))if(a instanceof p){for(const i of[...a.__ctx.__defs.childNodes])if(i instanceof Element){const o=i.getAttribute("id");this.__ids[o]=o,this.__defs.appendChild(i)}const i=a.__root.getAttribute("id");s.setAttribute(n.apply,`url(#${i})`)}else if(a instanceof h){const i=a.__root.getAttribute("id");s.setAttribute(n.apply,`url(#${i})`)}else if(n.svg!==a)if("stroke"!==n.svgAttr&&"fill"!==n.svgAttr||!c.isString(a)||-1===a.indexOf("rgba")){let e=n.svgAttr;if("globalAlpha"===l[t]&&(e=i+"-"+n.svgAttr,s.getAttribute(e)))continue;s.setAttribute(e,`${a}`)}else{const i=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(a),[,o,l,e,c]=i;s.setAttribute(n.svgAttr,`rgb(${o},${l},${e})`);let t=parseFloat(c);const r=this.globalAlpha;null!=r&&(t*=r),s.setAttribute(n.svgAttr+"-opacity",`${t}`)}}}get_serialized_svg(r=!1){let n=(new XMLSerializer).serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(n)&&(n=n.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),r)for(const[r,t]of e){const e=new RegExp(r,"gi");e.test(n)&&(n=n.replace(e,t))}return n}get_svg(){return this.__root}save(){this.__stack.push({transform:this._transform,clip_path:this._clip_path,attributes:this.__getStyleState()}),this._transform=this._transform.clone()}restore(){if(0==this.__stack.length)return;const{transform:e,clip_path:t,attributes:r}=this.__stack.pop();this._transform=e,this._clip_path=t,this.__applyStyleState(r)}_apply_transform(e,t=this._transform){t.is_identity||e.setAttribute("transform",t.toString())}scale(e,t){isFinite(e)&&(null==t||isFinite(t))&&this._transform.scale(e,null!=t?t:e)}rotate(e){isFinite(e)&&this._transform.rotate(e)}translate(e,t){isFinite(e+t)&&this._transform.translate(e,t)}transform(e,t,r,n,a,i){isFinite(e+t+r+n+a+i)&&this._transform.transform(e,t,r,n,a,i)}beginPath(){this.__currentDefaultPath="",this.__currentPosition=null;const e=this.__createElement("path",{},!0);this.__root.appendChild(e),this.__currentElement=e}__applyCurrentDefaultPath(){const e=this.__currentElement;"path"===e.nodeName?e.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",e.nodeName)}__addPathCommand(e,t,r){const n=this.__currentDefaultPath?" ":"";this.__currentDefaultPath+=n+r,this.__currentPosition={x:e,y:t}}get _hasCurrentDefaultPath(){return!!this.__currentDefaultPath}moveTo(e,t){if(!isFinite(e+t))return;"path"!==this.__currentElement.nodeName&&this.beginPath();const[r,n]=this._transform.apply(e,t);this.__addPathCommand(r,n,`M ${r} ${n}`)}closePath(){this._hasCurrentDefaultPath&&this.__addPathCommand(NaN,NaN,"Z")}lineTo(r,n){if(isFinite(r+n))if(this._hasCurrentDefaultPath){const[e,t]=this._transform.apply(r,n);this.__addPathCommand(e,t,`L ${e} ${t}`)}else this.moveTo(r,n)}bezierCurveTo(e,t,r,n,a,i){if(!isFinite(e+t+r+n+a+i))return;const[o,s]=this._transform.apply(a,i),[l,c]=this._transform.apply(e,t),[u,f]=this._transform.apply(r,n);this.__addPathCommand(o,s,`C ${l} ${c} ${u} ${f} ${o} ${s}`)}quadraticCurveTo(e,t,r,n){if(!isFinite(e+t+r+n))return;const[a,i]=this._transform.apply(r,n),[o,s]=this._transform.apply(e,t);this.__addPathCommand(a,i,`Q ${o} ${s} ${a} ${i}`)}arcTo(e,t,r,n,a){if(!isFinite(e+t+r+n+a))return;if(null==this.__currentPosition)return;const i=this.__currentPosition.x,o=this.__currentPosition.y;if(a<0)throw new Error("IndexSizeError: The radius provided ("+a+") is negative.");if(i===e&&o===t||e===r&&t===n||0===a)return void this.lineTo(e,t);function s([e,t]){const r=Math.sqrt(e**2+t**2);return[e/r,t/r]}const l=s([i-e,o-t]),c=s([r-e,n-t]);if(l[0]*c[1]==l[1]*c[0])return void this.lineTo(e,t);const u=l[0]*c[0]+l[1]*c[1],f=Math.acos(Math.abs(u)),d=s([l[0]+c[0],l[1]+c[1]]),h=a/Math.sin(f/2),p=e+h*d[0],v=t+h*d[1],g=[-l[1],l[0]],m=[c[1],-c[0]];function _(e){const t=e[0];return e[1]>=0?Math.acos(t):-Math.acos(t)}const y=_(g),b=_(m);this.lineTo(p+g[0]*a,v+g[1]*a),this.arc(p,v,a,y,b)}stroke(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","fill"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke"),null!=this._clip_path&&this.__currentElement.setAttribute("clip-path",this._clip_path)}fill(e){if("path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","stroke"),"none"!=this.__currentElement.getAttribute("fill")){const e=this.__currentElement.cloneNode(!0);this.__root.appendChild(e),this.__currentElement=e}this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill"),null!=e&&this.__currentElement.setAttribute("fill-rule",e),null!=this._clip_path&&this.__currentElement.setAttribute("clip-path",this._clip_path)}rect(e,t,r,n){isFinite(e+t+r+n)&&("path"!==this.__currentElement.nodeName&&this.beginPath(),this.moveTo(e,t),this.lineTo(e+r,t),this.lineTo(e+r,t+n),this.lineTo(e,t+n),this.lineTo(e,t))}fillRect(e,t,r,n){isFinite(e+t+r+n)&&(this.beginPath(),this.rect(e,t,r,n),this.fill())}strokeRect(e,t,r,n){isFinite(e+t+r+n)&&(this.beginPath(),this.rect(e,t,r,n),this.stroke())}__clearCanvas(){s.empty(this.__defs),s.empty(this.__root),this.__root.appendChild(this.__defs),this.__currentElement=this.__root}clearRect(e,t,r,n){if(!isFinite(e+t+r+n))return;if(0===e&&0===t&&r===this.width&&n===this.height)return void this.__clearCanvas();const a=this.__createElement("rect",{x:e,y:t,width:r,height:n,fill:"#FFFFFF"},!0);this._apply_transform(a),this.__root.appendChild(a)}createLinearGradient(e,t,r,n){if(!isFinite(e+t+r+n))throw new Error("The provided double value is non-finite");const[a,i]=this._transform.apply(e,t),[o,s]=this._transform.apply(r,n),l=this.__createElement("linearGradient",{id:f(this.__ids),x1:`${a}px`,x2:`${o}px`,y1:`${i}px`,y2:`${s}px`,gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(l),new h(l,this)}createRadialGradient(e,t,r,n,a,i){if(!isFinite(e+t+r+n+a+i))throw new Error("The provided double value is non-finite");const[o,s]=this._transform.apply(e,t),[l,c]=this._transform.apply(n,a),u=this.__createElement("radialGradient",{id:f(this.__ids),cx:`${l}px`,cy:`${c}px`,r:`${i}px`,fx:`${o}px`,fy:`${s}px`,gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(u),new h(u,this)}__parseFont(){var e,t,r,n,a;const i=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),o={style:null!==(e=i[1])&&void 0!==e?e:"normal",size:null!==(t=i[4])&&void 0!==t?t:"10px",family:null!==(r=i[6])&&void 0!==r?r:"sans-serif",weight:null!==(n=i[3])&&void 0!==n?n:"normal",decoration:null!==(a=i[2])&&void 0!==a?a:"normal"};return"underline"===this.__fontUnderline&&(o.decoration="underline"),null!=this.__fontHref&&(o.href=this.__fontHref),o}__wrapTextLink(t,r){if(t.href){const e=this.__createElement("a");return e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.href),e.appendChild(r),e}return r}__applyText(e,t,r,n){const a=this.__parseFont(),i=this.__createElement("text",{"font-family":a.family,"font-size":a.size,"font-style":a.style,"font-weight":a.weight,"text-decoration":a.decoration,x:t,y:r,"text-anchor":l(this.textAlign),"dominant-baseline":u(this.textBaseline)},!0);i.appendChild(this.__document.createTextNode(e)),this._apply_transform(i),this.__currentElement=i,this.__applyStyleToCurrentElement(n),this.__root.appendChild(this.__wrapTextLink(a,i))}fillText(e,t,r){null!=e&&isFinite(t+r)&&this.__applyText(e,t,r,"fill")}strokeText(e,t,r){null!=e&&isFinite(t+r)&&this.__applyText(e,t,r,"stroke")}measureText(e){return this.__ctx.font=this.font,this.__ctx.measureText(e)}arc(e,t,r,n,a,i=!1){if(!isFinite(e+t+r+n+a))return;if(n===a)return;(n%=2*Math.PI)===(a%=2*Math.PI)&&(a=(a+2*Math.PI-.001*(i?-1:1))%(2*Math.PI));const o=e+r*Math.cos(a),s=t+r*Math.sin(a),l=e+r*Math.cos(n),c=t+r*Math.sin(n),u=i?0:1;let f=0,d=a-n;d<0&&(d+=2*Math.PI),f=i?d>Math.PI?0:1:d>Math.PI?1:0,this.lineTo(l,c);const h=r,p=r,[v,g]=this._transform.apply(o,s);this.__addPathCommand(v,g,`A ${h} ${p} 0 ${f} ${u} ${v} ${g}`)}clip(){const e=this.__createElement("clipPath"),t=f(this.__ids);this.__applyCurrentDefaultPath(),e.setAttribute("id",t),e.appendChild(this.__currentElement),this.__defs.appendChild(e),this._clip_path=`url(#${t})`}drawImage(t,...r){let e,n,a,i,o,s,l,c;if(2==r.length){if([e,n]=r,!isFinite(e+n))return;o=0,s=0,l=t.width,c=t.height,a=l,i=c}else if(4==r.length){if([e,n,a,i]=r,!isFinite(e+n+a+i))return;o=0,s=0,l=t.width,c=t.height}else{if(8!==r.length)throw new Error(`Inavlid number of arguments passed to drawImage: ${arguments.length}`);if([o,s,l,c,e,n,a,i]=r,!isFinite(o+s+l+c+e+n+a+i))return}const u=this.__root,f=this._transform.clone().translate(e,n);if(t instanceof v||t instanceof SVGSVGElement){const r=(t instanceof SVGSVGElement?t:t.get_svg()).cloneNode(!0);let e;f.is_identity?e=u:(e=this.__createElement("g"),this._apply_transform(e,f),u.appendChild(e));for(const t of[...r.childNodes])if(t instanceof SVGDefsElement){for(const r of[...t.childNodes])if(r instanceof Element){const t=r.getAttribute("id");this.__ids[t]=t,this.__defs.appendChild(r)}}else e.appendChild(t)}else if(t instanceof HTMLImageElement||t instanceof SVGImageElement){const r=this.__createElement("image");if(r.setAttribute("width",`${a}`),r.setAttribute("height",`${i}`),r.setAttribute("preserveAspectRatio","none"),o||s||l!==t.width||c!==t.height){const r=this.__document.createElement("canvas");r.width=a,r.height=i;r.getContext("2d").drawImage(t,o,s,l,c,0,0,a,i),t=r}this._apply_transform(r,f);const e=t instanceof HTMLCanvasElement?t.toDataURL():t.getAttribute("src");r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),u.appendChild(r)}else if(t instanceof HTMLCanvasElement){const r=this.__createElement("image");r.setAttribute("width",`${a}`),r.setAttribute("height",`${i}`),r.setAttribute("preserveAspectRatio","none");const e=this.__document.createElement("canvas");e.width=a,e.height=i;const n=e.getContext("2d");n.imageSmoothingEnabled=!1,n.drawImage(t,o,s,l,c,0,0,a,i),t=e,this._apply_transform(r,f),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.toDataURL()),u.appendChild(r)}}createPattern(e,t){const r=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),n=f(this.__ids);if(r.setAttribute("id",n),r.setAttribute("width",`${this._to_number(e.width)}`),r.setAttribute("height",`${this._to_number(e.height)}`),r.setAttribute("patternUnits","userSpaceOnUse"),e instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof SVGImageElement){const t=this.__document.createElementNS("http://www.w3.org/2000/svg","image"),n=e instanceof HTMLCanvasElement?e.toDataURL():e.getAttribute("src");t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n),r.appendChild(t),this.__defs.appendChild(r)}else if(e instanceof v){for(const t of[...e.__root.childNodes])t instanceof SVGDefsElement||r.appendChild(t);this.__defs.appendChild(r)}else{if(!(e instanceof SVGSVGElement))throw new Error("unsupported");for(const t of[...e.childNodes])t instanceof SVGDefsElement||r.appendChild(t);this.__defs.appendChild(r)}return new p(r,this)}setLineDash(e){e&&e.length>0?this.lineDash=e.join(","):this.lineDash=null}_to_number(e){return c.isNumber(e)?e:e.baseVal.value}}n.SVGRenderingContext2D=v,v.__name__="SVGRenderingContext2D"},function e(t,r,n,a,i){a();const o=t(238),s=t(15);class l extends o.ButtonToolButtonView{_clicked(){this.model.do.emit(void 0)}}n.ActionToolButtonView=l,l.__name__="ActionToolButtonView";class e extends o.ButtonToolView{connect_signals(){super.connect_signals(),this.connect(this.model.do,e=>this.doit(e))}}n.ActionToolView=e,e.__name__="ActionToolView";class c extends o.ButtonTool{constructor(e){super(e),this.button_view=l,this.do=new s.Signal(this,"do")}}n.ActionTool=c,c.__name__="ActionTool"},function e(t,r,n,a,i){a();const o=t(251),s=t(242);class l extends o.ActionToolView{doit(){window.open(this.model.redirect)}}n.HelpToolView=l,l.__name__="HelpToolView";class c extends o.ActionTool{constructor(e){super(e),this.tool_name="Help",this.icon=s.tool_icon_help}static init_HelpTool(){this.prototype.default_view=l,this.define(({String:e})=>({redirect:[e,"https://docs.bokeh.org/en/latest/docs/user_guide/tools.html"]})),this.override({description:"Click the question mark to learn more about Bokeh plot tools."}),this.register_alias("help",()=>new c)}}n.HelpTool=c,c.__name__="HelpTool",c.init_HelpTool()},function e(t,r,n,a,i){a(),n.root="bk-root",n.logo="bk-logo",n.grey="bk-grey",n.logo_small="bk-logo-small",n.logo_notebook="bk-logo-notebook",n.default=".bk-root .bk-logo{margin:5px;position:relative;display:block;background-repeat:no-repeat;}.bk-root .bk-logo.bk-grey{filter:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id='grayscale'><feColorMatrix type='matrix' values='0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0'/></filter></svg>#grayscale\");filter:gray;-webkit-filter:grayscale(100%);}.bk-root .bk-logo-small{width:20px;height:20px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAOkSURBVDiNjZRtaJVlGMd/1/08zzln5zjP1LWcU9N0NkN8m2CYjpgQYQXqSs0I84OLIC0hkEKoPtiH3gmKoiJDU7QpLgoLjLIQCpEsNJ1vqUOdO7ppbuec5+V+rj4ctwzd8IIbbi6u+8f1539dt3A78eXC7QizUF7gyV1fD1Yqg4JWz84yffhm0qkFqBogB9rM8tZdtwVsPUhWhGcFJngGeWrPzHm5oaMmkfEg1usvLFyc8jLRqDOMru7AyC8saQr7GG7f5fvDeH7Ej8CM66nIF+8yngt6HWaKh7k49Soy9nXurCi1o3qUbS3zWfrYeQDTB/Qj6kX6Ybhw4B+bOYoLKCC9H3Nu/leUTZ1JdRWkkn2ldcCamzrcf47KKXdAJllSlxAOkRgyHsGC/zRday5Qld9DyoM4/q/rUoy/CXh3jzOu3bHUVZeU+DEn8FInkPBFlu3+nW3Nw0mk6vCDiWg8CeJaxEwuHS3+z5RgY+YBR6V1Z1nxSOfoaPa4LASWxxdNp+VWTk7+4vzaou8v8PN+xo+KY2xsw6une2frhw05CTYOmQvsEhjhWjn0bmXPjpE1+kplmmkP3suftwTubK9Vq22qKmrBhpY4jvd5afdRA3wGjFAgcnTK2s4hY0/GPNIb0nErGMCRxWOOX64Z8RAC4oCXdklmEvcL8o0BfkNK4lUg9HTl+oPlQxdNo3Mg4Nv175e/1LDGzZen30MEjRUtmXSfiTVu1kK8W4txyV6BMKlbgk3lMwYCiusNy9fVfvvwMxv8Ynl6vxoByANLTWplvuj/nF9m2+PDtt1eiHPBr1oIfhCChQMBw6Aw0UulqTKZdfVvfG7VcfIqLG9bcldL/+pdWTLxLUy8Qq38heUIjh4XlzZxzQm19lLFlr8vdQ97rjZVOLf8nclzckbcD4wxXMidpX30sFd37Fv/GtwwhzhxGVAprjbg0gCAEeIgwCZyTV2Z1REEW8O4py0wsjeloKoMr6iCY6dP92H6Vw/oTyICIthibxjm/DfN9lVz8IqtqKYLUXfoKVMVQVVJOElGjrnnUt9T9wbgp8AyYKaGlqingHZU/uG2NTZSVqwHQTWkx9hxjkpWDaCg6Ckj5qebgBVbT3V3NNXMSiWSDdGV3hrtzla7J+duwPOToIg42ChPQOQjspnSlp1V+Gjdged7+8UN5CRAV7a5EdFNwCjEaBR27b3W890TE7g24NAP/mMDXRWrGoFPQI9ls/MWO2dWFAar/xcOIImbbpA3zgAAAABJRU5ErkJggg==);}.bk-root .bk-logo-notebook{display:inline-block;vertical-align:middle;margin-right:5px;}"},function e(t,r,n,a,i){a();const o=t(1),s=t(40),l=t(20),c=t(43),u=o.__importStar(t(255)),f=u;class d extends s.AnnotationView{initialize(){super.initialize(),this.el=c.div({class:f.tooltip}),c.undisplay(this.el),this.plot_view.canvas_view.add_overlay(this.el)}remove(){c.remove(this.el),super.remove()}connect_signals(){super.connect_signals(),this.connect(this.model.properties.content.change,()=>this.render()),this.connect(this.model.properties.position.change,()=>this._reposition())}styles(){return[...super.styles(),u.default]}render(){this.model.visible||c.undisplay(this.el),super.render()}_render(){const{content:e}=this.model;null!=e?(c.empty(this.el),c.classes(this.el).toggle("bk-tooltip-custom",this.model.custom),this.el.appendChild(e),this.model.show_arrow&&this.el.classList.add(f.tooltip_arrow)):c.undisplay(this.el)}_reposition(){const{position:e}=this.model;if(null==e)return void c.undisplay(this.el);const[r,n]=e,t=(()=>{const e=this.parent.layout.bbox.relative(),{attachment:t}=this.model;switch(t){case"horizontal":return r<e.hcenter?"right":"left";case"vertical":return n<e.vcenter?"below":"above";default:return t}})();let a;this.el.classList.remove(f.right),this.el.classList.remove(f.left),this.el.classList.remove(f.above),this.el.classList.remove(f.below),c.display(this.el);let i=null,o=null;switch(t){case"right":this.el.classList.add(f.left),i=r+(this.el.offsetWidth-this.el.clientWidth)+10,a=n-this.el.offsetHeight/2;break;case"left":this.el.classList.add(f.right),o=this.plot_view.layout.bbox.width-r+10,a=n-this.el.offsetHeight/2;break;case"below":this.el.classList.add(f.above),a=n+(this.el.offsetHeight-this.el.clientHeight)+10,i=Math.round(r-this.el.offsetWidth/2);break;case"above":this.el.classList.add(f.below),a=n-this.el.offsetHeight-10,i=Math.round(r-this.el.offsetWidth/2)}this.el.style.top=`${a}px`,this.el.style.left=null!=i?`${i}px`:"auto",this.el.style.right=null!=o?`${o}px`:"auto"}}n.TooltipView=d,d.__name__="TooltipView";class h extends s.Annotation{constructor(e){super(e)}static init_Tooltip(){this.prototype.default_view=d,this.define(({Boolean:e})=>({attachment:[l.TooltipAttachment,"horizontal"],inner_only:[e,!0],show_arrow:[e,!0]})),this.internal(({Boolean:e,Number:t,Tuple:r,Ref:n,Nullable:a})=>({position:[a(r(t,t)),null],content:[n(HTMLElement),()=>c.div()],custom:[e]})),this.override({level:"overlay"})}clear(){this.position=null}}n.Tooltip=h,h.__name__="Tooltip",h.init_Tooltip()},function e(t,r,n,a,i){a(),n.root="bk-root",n.tooltip="bk-tooltip",n.left="bk-left",n.tooltip_arrow="bk-tooltip-arrow",n.right="bk-right",n.above="bk-above",n.below="bk-below",n.tooltip_row_label="bk-tooltip-row-label",n.tooltip_row_value="bk-tooltip-row-value",n.tooltip_color_block="bk-tooltip-color-block",n.default='.bk-root{}.bk-root .bk-tooltip{font-weight:300;font-size:12px;position:absolute;padding:5px;border:1px solid #e5e5e5;color:#2f2f2f;background-color:white;pointer-events:none;opacity:0.95;z-index:100;}.bk-root .bk-tooltip > div:not(:first-child){margin-top:5px;border-top:#e5e5e5 1px dashed;}.bk-root .bk-tooltip.bk-left.bk-tooltip-arrow::before{position:absolute;margin:-7px 0 0 0;top:50%;width:0;height:0;border-style:solid;border-width:7px 0 7px 0;border-color:transparent;content:" ";display:block;left:-10px;border-right-width:10px;border-right-color:#909599;}.bk-root .bk-tooltip.bk-left::before{left:-10px;border-right-width:10px;border-right-color:#909599;}.bk-root .bk-tooltip.bk-right.bk-tooltip-arrow::after{position:absolute;margin:-7px 0 0 0;top:50%;width:0;height:0;border-style:solid;border-width:7px 0 7px 0;border-color:transparent;content:" ";display:block;right:-10px;border-left-width:10px;border-left-color:#909599;}.bk-root .bk-tooltip.bk-right::after{right:-10px;border-left-width:10px;border-left-color:#909599;}.bk-root .bk-tooltip.bk-above::before{position:absolute;margin:0 0 0 -7px;left:50%;width:0;height:0;border-style:solid;border-width:0 7px 0 7px;border-color:transparent;content:" ";display:block;top:-10px;border-bottom-width:10px;border-bottom-color:#909599;}.bk-root .bk-tooltip.bk-below::after{position:absolute;margin:0 0 0 -7px;left:50%;width:0;height:0;border-style:solid;border-width:0 7px 0 7px;border-color:transparent;content:" ";display:block;bottom:-10px;border-top-width:10px;border-top-color:#909599;}.bk-root .bk-tooltip-row-label{text-align:right;color:#26aae1;}.bk-root .bk-tooltip-row-value{color:default;}.bk-root .bk-tooltip-color-block{width:12px;height:12px;margin-left:5px;margin-right:5px;outline:#dddddd solid 1px;display:inline-block;}'},function r(e,t,n,a,i){a();const o=e(135),s=e(133),r=e(122),l=e(48);class c extends o.UpperLowerView{async lazy_initialize(){await super.lazy_initialize();const{lower_head:e,upper_head:t}=this.model;null!=e&&(this.lower_head=await r.build_view(e,{parent:this})),null!=t&&(this.upper_head=await r.build_view(t,{parent:this}))}set_data(e){var t,r;super.set_data(e),null===(t=this.lower_head)||void 0===t||t.set_data(e),null===(r=this.upper_head)||void 0===r||r.set_data(e)}paint(r){if(this.visuals.line.doit)for(let e=0,t=this._lower_sx.length;e<t;e++)this.visuals.line.set_vectorize(r,e),r.beginPath(),r.moveTo(this._lower_sx[e],this._lower_sy[e]),r.lineTo(this._upper_sx[e],this._upper_sy[e]),r.stroke();const n="height"==this.model.dimension?0:Math.PI/2;if(null!=this.lower_head)for(let e=0,t=this._lower_sx.length;e<t;e++)r.save(),r.translate(this._lower_sx[e],this._lower_sy[e]),r.rotate(n+Math.PI),this.lower_head.render(r,e),r.restore();if(null!=this.upper_head)for(let e=0,t=this._upper_sx.length;e<t;e++)r.save(),r.translate(this._upper_sx[e],this._upper_sy[e]),r.rotate(n),this.upper_head.render(r,e),r.restore()}}n.WhiskerView=c,c.__name__="WhiskerView";class u extends o.UpperLower{constructor(e){super(e)}static init_Whisker(){this.prototype.default_view=c,this.mixins(l.LineVector),this.define(({Ref:e,Nullable:t})=>({lower_head:[t(e(s.ArrowHead)),()=>new s.TeeHead({size:10})],upper_head:[t(e(s.ArrowHead)),()=>new s.TeeHead({size:10})]})),this.override({level:"underlay"})}}n.Whisker=u,u.__name__="Whisker",u.init_Whisker()},function e(t,r,n,a,i){a(),i("CustomJS",t(258).CustomJS),i("OpenURL",t(260).OpenURL)},function e(t,r,n,a,i){a();const o=t(259),s=t(13),l=t(34);class c extends o.Callback{constructor(e){super(e)}static init_CustomJS(){this.define(({Unknown:e,String:t,Dict:r})=>({args:[r(e),{}],code:[t,""]}))}get names(){return s.keys(this.args)}get values(){return s.values(this.args)}get func(){const e=l.use_strict(this.code);return new Function(...this.names,"cb_obj","cb_data",e)}execute(e,t={}){return this.func.apply(e,this.values.concat(e,t))}}n.CustomJS=c,c.__name__="CustomJS",c.init_CustomJS()},function e(t,r,n,a,i){a();const o=t(53);class s extends o.Model{constructor(e){super(e)}}n.Callback=s,s.__name__="Callback"},function e(t,r,n,a,i){a();const o=t(259),s=t(182),l=t(8);class c extends o.Callback{constructor(e){super(e)}static init_OpenURL(){this.define(({Boolean:e,String:t})=>({url:[t,"http://"],same_tab:[e,!1]}))}execute(e,{source:r}){const t=e=>{const t=s.replace_placeholders(this.url,r,e,void 0,void 0,encodeURIComponent);if(!l.isString(t))throw new Error("HTML output is not supported in this context");this.same_tab?window.location.href=t:window.open(t)},{selected:n}=r;for(const e of n.indices)t(e);for(const e of n.line_indices)t(e)}}n.OpenURL=c,c.__name__="OpenURL",c.init_OpenURL()},function e(t,r,n,a,i){a(),i("Canvas",t(262).Canvas),i("CartesianFrame",t(144).CartesianFrame)},function t(e,r,n,a,i){a();const o=e(14),s=e(240),l=e(19),c=e(43),u=e(20),t=e(13),f=e(263),d=e(99),h=e(249),p=(()=>{const e=document.createElement("canvas"),t=e.getContext("webgl",{premultipliedAlpha:!0});return null!=t?{canvas:e,gl:t}:void l.logger.trace("WebGL is not supported")})(),v={position:"absolute",top:"0",left:"0",width:"100%",height:"100%"};class g extends s.DOMView{constructor(){super(...arguments),this.bbox=new d.BBox}initialize(){super.initialize(),"webgl"==this.model.output_backend&&(this.webgl=p),this.underlays_el=c.div({style:v}),this.primary=this.create_layer(),this.overlays=this.create_layer(),this.overlays_el=c.div({style:v}),this.events_el=c.div({class:"bk-canvas-events",style:v});const e=[this.underlays_el,this.primary.el,this.overlays.el,this.overlays_el,this.events_el];t.extend(this.el.style,v),c.append(this.el,...e),this.ui_event_bus=new f.UIEventBus(this)}remove(){this.ui_event_bus.destroy(),super.remove()}add_underlay(e){this.underlays_el.appendChild(e)}add_overlay(e){this.overlays_el.appendChild(e)}add_event(e){this.events_el.appendChild(e)}get pixel_ratio(){return this.primary.pixel_ratio}resize(e,t){this.bbox=new d.BBox({left:0,top:0,width:e,height:t}),this.primary.resize(e,t),this.overlays.resize(e,t)}prepare_webgl(d){const{webgl:h}=this;if(null!=h){const{width:e,height:t}=this.bbox;h.canvas.width=this.pixel_ratio*e,h.canvas.height=this.pixel_ratio*t;const{gl:r}=h;r.enable(r.SCISSOR_TEST);const[n,a,i,o]=d,{xview:s,yview:l}=this.bbox,c=s.compute(n),u=l.compute(a+o),f=this.pixel_ratio;r.scissor(f*c,f*u,f*i,f*o),r.enable(r.BLEND),r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE_MINUS_DST_ALPHA,r.ONE),this._clear_webgl()}}blit_webgl(e){const{webgl:t}=this;if(null!=t){if(l.logger.debug("Blitting WebGL canvas"),e.restore(),e.drawImage(t.canvas,0,0),e.save(),this.model.hidpi){const t=this.pixel_ratio;e.scale(t,t),e.translate(.5,.5)}this._clear_webgl()}}_clear_webgl(){const{webgl:r}=this;if(null!=r){const{gl:e,canvas:t}=r;e.viewport(0,0,t.width,t.height),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}}compose(){const e=this.create_layer(),{width:t,height:r}=this.bbox;return e.resize(t,r),e.ctx.drawImage(this.primary.canvas,0,0),e.ctx.drawImage(this.overlays.canvas,0,0),e}create_layer(){const{output_backend:e,hidpi:t}=this.model;return new h.CanvasLayer(e,t)}to_blob(){return this.compose().to_blob()}}n.CanvasView=g,g.__name__="CanvasView";class m extends o.HasProps{constructor(e){super(e)}static init_Canvas(){this.prototype.default_view=g,this.internal(({Boolean:e})=>({hidpi:[e,!0],output_backend:[u.OutputBackend,"canvas"]}))}}n.Canvas=m,m.__name__="Canvas",m.init_Canvas()},function t(e,r,n,a,i){a();const o=e(1),s=o.__importDefault(e(239)),t=e(15),l=e(19),c=e(43),u=o.__importStar(e(264)),f=e(265),d=e(9),h=e(8),p=e(27),v=e(244);class g{constructor(e){this.canvas_view=e,this.pan_start=new t.Signal(this,"pan:start"),this.pan=new t.Signal(this,"pan"),this.pan_end=new t.Signal(this,"pan:end"),this.pinch_start=new t.Signal(this,"pinch:start"),this.pinch=new t.Signal(this,"pinch"),this.pinch_end=new t.Signal(this,"pinch:end"),this.rotate_start=new t.Signal(this,"rotate:start"),this.rotate=new t.Signal(this,"rotate"),this.rotate_end=new t.Signal(this,"rotate:end"),this.tap=new t.Signal(this,"tap"),this.doubletap=new t.Signal(this,"doubletap"),this.press=new t.Signal(this,"press"),this.pressup=new t.Signal(this,"pressup"),this.move_enter=new t.Signal(this,"move:enter"),this.move=new t.Signal(this,"move"),this.move_exit=new t.Signal(this,"move:exit"),this.scroll=new t.Signal(this,"scroll"),this.keydown=new t.Signal(this,"keydown"),this.keyup=new t.Signal(this,"keyup"),this.hammer=new s.default(this.hit_area,{touchAction:"auto",inputClass:s.default.TouchMouseInput}),this._prev_move=null,this._curr_pan=null,this._curr_pinch=null,this._curr_rotate=null,this._configure_hammerjs(),this.hit_area.addEventListener("mousemove",e=>this._mouse_move(e)),this.hit_area.addEventListener("mouseenter",e=>this._mouse_enter(e)),this.hit_area.addEventListener("mouseleave",e=>this._mouse_exit(e)),this.hit_area.addEventListener("contextmenu",e=>this._context_menu(e)),this.hit_area.addEventListener("wheel",e=>this._mouse_wheel(e)),document.addEventListener("keydown",this),document.addEventListener("keyup",this),this.menu=new v.ContextMenu([],{prevent_hide:e=>2==e.button&&e.target==this.hit_area}),this.hit_area.appendChild(this.menu.el)}get hit_area(){return this.canvas_view.events_el}destroy(){this.menu.remove(),this.hammer.destroy(),document.removeEventListener("keydown",this),document.removeEventListener("keyup",this)}handleEvent(e){"keydown"==e.type?this._key_down(e):"keyup"==e.type&&this._key_up(e)}_configure_hammerjs(){this.hammer.get("doubletap").recognizeWith("tap"),this.hammer.get("tap").requireFailure("doubletap"),this.hammer.get("doubletap").dropRequireFailure("tap"),this.hammer.on("doubletap",e=>this._doubletap(e)),this.hammer.on("tap",e=>this._tap(e)),this.hammer.on("press",e=>this._press(e)),this.hammer.on("pressup",e=>this._pressup(e)),this.hammer.get("pan").set({direction:s.default.DIRECTION_ALL}),this.hammer.on("panstart",e=>this._pan_start(e)),this.hammer.on("pan",e=>this._pan(e)),this.hammer.on("panend",e=>this._pan_end(e)),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("pinchstart",e=>this._pinch_start(e)),this.hammer.on("pinch",e=>this._pinch(e)),this.hammer.on("pinchend",e=>this._pinch_end(e)),this.hammer.get("rotate").set({enable:!0}),this.hammer.on("rotatestart",e=>this._rotate_start(e)),this.hammer.on("rotate",e=>this._rotate(e)),this.hammer.on("rotateend",e=>this._rotate_end(e))}register_tool(r){const e=r.model.event_type;null!=e&&(h.isString(e)?this._register_tool(r,e):e.forEach((e,t)=>this._register_tool(r,e,t<1)))}_register_tool(e,t,r=!0){const n=e,{id:a}=n.model,i=t=>e=>{e.id==a&&t(e.e)},o=t=>e=>{t(e.e)};switch(t){case"pan":null!=n._pan_start&&n.connect(this.pan_start,i(n._pan_start.bind(n))),null!=n._pan&&n.connect(this.pan,i(n._pan.bind(n))),null!=n._pan_end&&n.connect(this.pan_end,i(n._pan_end.bind(n)));break;case"pinch":null!=n._pinch_start&&n.connect(this.pinch_start,i(n._pinch_start.bind(n))),null!=n._pinch&&n.connect(this.pinch,i(n._pinch.bind(n))),null!=n._pinch_end&&n.connect(this.pinch_end,i(n._pinch_end.bind(n)));break;case"rotate":null!=n._rotate_start&&n.connect(this.rotate_start,i(n._rotate_start.bind(n))),null!=n._rotate&&n.connect(this.rotate,i(n._rotate.bind(n))),null!=n._rotate_end&&n.connect(this.rotate_end,i(n._rotate_end.bind(n)));break;case"move":null!=n._move_enter&&n.connect(this.move_enter,i(n._move_enter.bind(n))),null!=n._move&&n.connect(this.move,i(n._move.bind(n))),null!=n._move_exit&&n.connect(this.move_exit,i(n._move_exit.bind(n)));break;case"tap":null!=n._tap&&n.connect(this.tap,i(n._tap.bind(n))),null!=n._doubletap&&n.connect(this.doubletap,i(n._doubletap.bind(n)));break;case"press":null!=n._press&&n.connect(this.press,i(n._press.bind(n))),null!=n._pressup&&n.connect(this.pressup,i(n._pressup.bind(n)));break;case"scroll":null!=n._scroll&&n.connect(this.scroll,i(n._scroll.bind(n)));break;default:throw new Error(`unsupported event_type: ${t}`)}r&&(null!=n._keydown&&n.connect(this.keydown,o(n._keydown.bind(n))),null!=n._keyup&&n.connect(this.keyup,o(n._keyup.bind(n))),p.is_mobile&&null!=n._scroll&&"pinch"==t&&(l.logger.debug("Registering scroll on touch screen"),n.connect(this.scroll,i(n._scroll.bind(n)))))}_hit_test_renderers(e,t,r){var n;const a=e.get_renderer_views();for(const e of d.reversed(a))if(null===(n=e.interactive_hit)||void 0===n?void 0:n.call(e,t,r))return e;return null}set_cursor(e="default"){this.hit_area.style.cursor=e}_hit_test_frame(e,t,r){return e.frame.bbox.contains(t,r)}_hit_test_canvas(e,t,r){return e.layout.bbox.contains(t,r)}_hit_test_plot(t,r){for(const e of this.canvas_view.plot_views)if(e.layout.bbox.relative().contains(t,r))return e;return null}_trigger(t,n,r){var a;const{sx:i,sy:o}=n,s=this._hit_test_plot(i,o),l=e=>{const[t,r]=[i,o];return Object.assign(Object.assign({},n),{sx:t,sy:r})};if("panstart"==n.type||"pan"==n.type||"panend"==n.type){let e;if("panstart"==n.type&&null!=s?(this._curr_pan={plot_view:s},e=s):"pan"==n.type&&null!=this._curr_pan?e=this._curr_pan.plot_view:"panend"==n.type&&null!=this._curr_pan?(e=this._curr_pan.plot_view,this._curr_pan=null):e=null,null!=e){const n=l();this.__trigger(e,t,n,r)}}else if("pinchstart"==n.type||"pinch"==n.type||"pinchend"==n.type){let e;if("pinchstart"==n.type&&null!=s?(this._curr_pinch={plot_view:s},e=s):"pinch"==n.type&&null!=this._curr_pinch?e=this._curr_pinch.plot_view:"pinchend"==n.type&&null!=this._curr_pinch?(e=this._curr_pinch.plot_view,this._curr_pinch=null):e=null,null!=e){const n=l();this.__trigger(e,t,n,r)}}else if("rotatestart"==n.type||"rotate"==n.type||"rotateend"==n.type){let e;if("rotatestart"==n.type&&null!=s?(this._curr_rotate={plot_view:s},e=s):"rotate"==n.type&&null!=this._curr_rotate?e=this._curr_rotate.plot_view:"rotateend"==n.type&&null!=this._curr_rotate?(e=this._curr_rotate.plot_view,this._curr_rotate=null):e=null,null!=e){const n=l();this.__trigger(e,t,n,r)}}else if("mouseenter"==n.type||"mousemove"==n.type||"mouseleave"==n.type){const e=null===(a=this._prev_move)||void 0===a?void 0:a.plot_view;if(null!=e&&("mouseleave"==n.type||e!=s)){const{sx:t,sy:n}=l();this.__trigger(e,this.move_exit,{type:"mouseleave",sx:t,sy:n,shiftKey:!1,ctrlKey:!1},r)}if(null!=s&&("mouseenter"==n.type||e!=s)){const{sx:t,sy:n}=l();this.__trigger(s,this.move_enter,{type:"mouseenter",sx:t,sy:n,shiftKey:!1,ctrlKey:!1},r)}if(null!=s&&"mousemove"==n.type){const n=l();this.__trigger(s,t,n,r)}this._prev_move={sx:i,sy:o,plot_view:s}}else if(null!=s){const n=l();this.__trigger(s,t,n,r)}}__trigger(t,r,n,a){var i,o;const s=t.model.toolbar.gestures,l=r.name.split(":")[0],c=this._hit_test_renderers(t,n.sx,n.sy),u=this._hit_test_canvas(t,n.sx,n.sy);switch(l){case"move":{const a=s[l].active;null!=a&&this.trigger(r,n,a.id);const o=t.model.toolbar.inspectors.filter(e=>e.active);let e="default";null!=c?(e=null!==(i=c.cursor(n.sx,n.sy))&&void 0!==i?i:e,d.is_empty(o)||(r=this.move_exit)):this._hit_test_frame(t,n.sx,n.sy)&&(d.is_empty(o)||(e="crosshair")),this.set_cursor(e),t.set_toolbar_visibility(u),o.map(e=>this.trigger(r,n,e.id));break}case"tap":{const{target:t}=a;if(null!=t&&t!=this.hit_area)return;null!=c&&null!=c.on_hit&&c.on_hit(n.sx,n.sy);const i=s[l].active;null!=i&&this.trigger(r,n,i.id);break}case"doubletap":{const t=null!==(o=s.doubletap.active)&&void 0!==o?o:s.tap.active;null!=t&&this.trigger(r,n,t.id);break}case"scroll":{const t=s[p.is_mobile?"pinch":"scroll"].active;null!=t&&(a.preventDefault(),a.stopPropagation(),this.trigger(r,n,t.id));break}case"pan":{const t=s[l].active;null!=t&&(a.preventDefault(),this.trigger(r,n,t.id));break}default:{const t=s[l].active;null!=t&&this.trigger(r,n,t.id)}}this._trigger_bokeh_event(t,n)}trigger(e,t,r=null){e.emit({id:r,e:t})}_trigger_bokeh_event(a,i){const e=(()=>{const{sx:e,sy:t}=i,r=a.frame.x_scale.invert(e),n=a.frame.y_scale.invert(t);switch(i.type){case"wheel":return new u.MouseWheel(e,t,r,n,i.delta);case"mousemove":return new u.MouseMove(e,t,r,n);case"mouseenter":return new u.MouseEnter(e,t,r,n);case"mouseleave":return new u.MouseLeave(e,t,r,n);case"tap":return new u.Tap(e,t,r,n);case"doubletap":return new u.DoubleTap(e,t,r,n);case"press":return new u.Press(e,t,r,n);case"pressup":return new u.PressUp(e,t,r,n);case"pan":return new u.Pan(e,t,r,n,i.deltaX,i.deltaY);case"panstart":return new u.PanStart(e,t,r,n);case"panend":return new u.PanEnd(e,t,r,n);case"pinch":return new u.Pinch(e,t,r,n,i.scale);case"pinchstart":return new u.PinchStart(e,t,r,n);case"pinchend":return new u.PinchEnd(e,t,r,n);case"rotate":return new u.Rotate(e,t,r,n,i.rotation);case"rotatestart":return new u.RotateStart(e,t,r,n);case"rotateend":return new u.RotateEnd(e,t,r,n);default:return}})();null!=e&&a.model.trigger_event(e)}_get_sxy(e){const{pageX:t,pageY:r}=function(e){return"undefined"!=typeof TouchEvent&&e instanceof TouchEvent}(e)?(0!=e.touches.length?e.touches:e.changedTouches)[0]:e,{left:n,top:a}=c.offset(this.hit_area);return{sx:t-n,sy:r-a}}_pan_event(e){return Object.assign(Object.assign({type:e.type},this._get_sxy(e.srcEvent)),{deltaX:e.deltaX,deltaY:e.deltaY,shiftKey:e.srcEvent.shiftKey,ctrlKey:e.srcEvent.ctrlKey})}_pinch_event(e){return Object.assign(Object.assign({type:e.type},this._get_sxy(e.srcEvent)),{scale:e.scale,shiftKey:e.srcEvent.shiftKey,ctrlKey:e.srcEvent.ctrlKey})}_rotate_event(e){return Object.assign(Object.assign({type:e.type},this._get_sxy(e.srcEvent)),{rotation:e.rotation,shiftKey:e.srcEvent.shiftKey,ctrlKey:e.srcEvent.ctrlKey})}_tap_event(e){return Object.assign(Object.assign({type:e.type},this._get_sxy(e.srcEvent)),{shiftKey:e.srcEvent.shiftKey,ctrlKey:e.srcEvent.ctrlKey})}_move_event(e){return Object.assign(Object.assign({type:e.type},this._get_sxy(e)),{shiftKey:e.shiftKey,ctrlKey:e.ctrlKey})}_scroll_event(e){return Object.assign(Object.assign({type:e.type},this._get_sxy(e)),{delta:f.getDeltaY(e),shiftKey:e.shiftKey,ctrlKey:e.ctrlKey})}_key_event(e){return{type:e.type,keyCode:e.keyCode}}_pan_start(e){const t=this._pan_event(e);t.sx-=e.deltaX,t.sy-=e.deltaY,this._trigger(this.pan_start,t,e.srcEvent)}_pan(e){this._trigger(this.pan,this._pan_event(e),e.srcEvent)}_pan_end(e){this._trigger(this.pan_end,this._pan_event(e),e.srcEvent)}_pinch_start(e){this._trigger(this.pinch_start,this._pinch_event(e),e.srcEvent)}_pinch(e){this._trigger(this.pinch,this._pinch_event(e),e.srcEvent)}_pinch_end(e){this._trigger(this.pinch_end,this._pinch_event(e),e.srcEvent)}_rotate_start(e){this._trigger(this.rotate_start,this._rotate_event(e),e.srcEvent)}_rotate(e){this._trigger(this.rotate,this._rotate_event(e),e.srcEvent)}_rotate_end(e){this._trigger(this.rotate_end,this._rotate_event(e),e.srcEvent)}_tap(e){this._trigger(this.tap,this._tap_event(e),e.srcEvent)}_doubletap(e){this._trigger(this.doubletap,this._tap_event(e),e.srcEvent)}_press(e){this._trigger(this.press,this._tap_event(e),e.srcEvent)}_pressup(e){this._trigger(this.pressup,this._tap_event(e),e.srcEvent)}_mouse_enter(e){this._trigger(this.move_enter,this._move_event(e),e)}_mouse_move(e){this._trigger(this.move,this._move_event(e),e)}_mouse_exit(e){this._trigger(this.move_exit,this._move_event(e),e)}_mouse_wheel(e){this._trigger(this.scroll,this._scroll_event(e),e)}_context_menu(e){!this.menu.is_open&&this.menu.can_open&&e.preventDefault();const{sx:t,sy:r}=this._get_sxy(e);this.menu.toggle({left:t,top:r})}_key_down(e){this.trigger(this.keydown,this._key_event(e))}_key_up(e){this.trigger(this.keyup,this._key_event(e))}}n.UIEventBus=g,g.__name__="UIEventBus"},function e(t,r,n,a,e){a();var i=this&&this.__decorate||function(e,t,r,n){var a,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o};function o(t){return function(e){e.prototype.event_name=t}}class s{to_json(){const{event_name:e}=this;return{event_name:e,event_values:this._to_json()}}}n.BokehEvent=s,s.__name__="BokehEvent";class l extends s{constructor(){super(...arguments),this.origin=null}_to_json(){return{model:this.origin}}}n.ModelEvent=l,l.__name__="ModelEvent";let c=class extends s{_to_json(){return{}}};n.DocumentReady=c,c.__name__="DocumentReady",n.DocumentReady=c=i([o("document_ready")],c);let u=class extends l{};n.ButtonClick=u,u.__name__="ButtonClick",n.ButtonClick=u=i([o("button_click")],u);let f=class extends l{constructor(e){super(),this.item=e}_to_json(){const{item:e}=this;return Object.assign(Object.assign({},super._to_json()),{item:e})}};n.MenuItemClick=f,f.__name__="MenuItemClick",n.MenuItemClick=f=i([o("menu_item_click")],f);class d extends l{}n.UIEvent=d,d.__name__="UIEvent";let h=class extends d{};n.LODStart=h,h.__name__="LODStart",n.LODStart=h=i([o("lodstart")],h);let p=class extends d{};n.LODEnd=p,p.__name__="LODEnd",n.LODEnd=p=i([o("lodend")],p);let v=class extends d{constructor(e,t){super(),this.geometry=e,this.final=t}_to_json(){const{geometry:e,final:t}=this;return Object.assign(Object.assign({},super._to_json()),{geometry:e,final:t})}};n.SelectionGeometry=v,v.__name__="SelectionGeometry",n.SelectionGeometry=v=i([o("selectiongeometry")],v);let g=class extends d{};n.Reset=g,g.__name__="Reset",n.Reset=g=i([o("reset")],g);class m extends d{constructor(e,t,r,n){super(),this.sx=e,this.sy=t,this.x=r,this.y=n}_to_json(){const{sx:e,sy:t,x:r,y:n}=this;return Object.assign(Object.assign({},super._to_json()),{sx:e,sy:t,x:r,y:n})}}n.PointEvent=m,m.__name__="PointEvent";let _=class extends m{constructor(e,t,r,n,a,i){super(e,t,r,n),this.sx=e,this.sy=t,this.x=r,this.y=n,this.delta_x=a,this.delta_y=i}_to_json(){const{delta_x:e,delta_y:t}=this;return Object.assign(Object.assign({},super._to_json()),{delta_x:e,delta_y:t})}};n.Pan=_,_.__name__="Pan",n.Pan=_=i([o("pan")],_);let y=class extends m{constructor(e,t,r,n,a){super(e,t,r,n),this.sx=e,this.sy=t,this.x=r,this.y=n,this.scale=a}_to_json(){const{scale:e}=this;return Object.assign(Object.assign({},super._to_json()),{scale:e})}};n.Pinch=y,y.__name__="Pinch",n.Pinch=y=i([o("pinch")],y);let b=class extends m{constructor(e,t,r,n,a){super(e,t,r,n),this.sx=e,this.sy=t,this.x=r,this.y=n,this.rotation=a}_to_json(){const{rotation:e}=this;return Object.assign(Object.assign({},super._to_json()),{rotation:e})}};n.Rotate=b,b.__name__="Rotate",n.Rotate=b=i([o("rotate")],b);let x=class extends m{constructor(e,t,r,n,a){super(e,t,r,n),this.sx=e,this.sy=t,this.x=r,this.y=n,this.delta=a}_to_json(){const{delta:e}=this;return Object.assign(Object.assign({},super._to_json()),{delta:e})}};n.MouseWheel=x,x.__name__="MouseWheel",n.MouseWheel=x=i([o("wheel")],x);let w=class extends m{};n.MouseMove=w,w.__name__="MouseMove",n.MouseMove=w=i([o("mousemove")],w);let A=class extends m{};n.MouseEnter=A,A.__name__="MouseEnter",n.MouseEnter=A=i([o("mouseenter")],A);let T=class extends m{};n.MouseLeave=T,T.__name__="MouseLeave",n.MouseLeave=T=i([o("mouseleave")],T);let k=class extends m{};n.Tap=k,k.__name__="Tap",n.Tap=k=i([o("tap")],k);let M=class extends m{};n.DoubleTap=M,M.__name__="DoubleTap",n.DoubleTap=M=i([o("doubletap")],M);let S=class extends m{};n.Press=S,S.__name__="Press",n.Press=S=i([o("press")],S);let C=class extends m{};n.PressUp=C,C.__name__="PressUp",n.PressUp=C=i([o("pressup")],C);let L=class extends m{};n.PanStart=L,L.__name__="PanStart",n.PanStart=L=i([o("panstart")],L);let E=class extends m{};n.PanEnd=E,E.__name__="PanEnd",n.PanEnd=E=i([o("panend")],E);let D=class extends m{};n.PinchStart=D,D.__name__="PinchStart",n.PinchStart=D=i([o("pinchstart")],D);let O=class extends m{};n.PinchEnd=O,O.__name__="PinchEnd",n.PinchEnd=O=i([o("pinchend")],O);let P=class extends m{};n.RotateStart=P,P.__name__="RotateStart",n.RotateStart=P=i([o("rotatestart")],P);let I=class extends m{};n.RotateEnd=I,I.__name__="RotateEnd",n.RotateEnd=I=i([o("rotateend")],I)},function e(t,r,n,a,i){function o(e){const t=getComputedStyle(e).fontSize;return null!=t?parseInt(t,10):null}a(),n.getDeltaY=function(e){let t=-e.deltaY;if(e.target instanceof HTMLElement)switch(e.deltaMode){case e.DOM_DELTA_LINE:t*=(r=e.target,null!==(i=null!==(a=o(null!==(n=r.offsetParent)&&void 0!==n?n:document.body))&&void 0!==a?a:o(r))&&void 0!==i?i:16);break;case e.DOM_DELTA_PAGE:t*=function(e){return e.clientHeight}(e.target)}var r,n,a,i;return t}},function e(t,r,n,a,i){a(),i("Expression",t(124).Expression),i("CustomJSExpr",t(267).CustomJSExpr),i("Stack",t(268).Stack),i("CumSum",t(269).CumSum),i("ScalarExpression",t(124).ScalarExpression),i("Minimum",t(270).Minimum),i("Maximum",t(271).Maximum)},function e(t,r,n,a,i){a();const o=t(14),s=t(124),l=t(24),c=t(9),u=t(13),f=t(34),d=t(8);class h extends s.Expression{constructor(e){super(e)}static init_CustomJSExpr(){this.define(({Unknown:e,String:t,Dict:r})=>({args:[r(e),{}],code:[t,""]}))}connect_signals(){super.connect_signals();for(const e of u.values(this.args))e instanceof o.HasProps&&e.change.connect(()=>{this._result.clear(),this.change.emit()})}get names(){return u.keys(this.args)}get values(){return u.values(this.args)}get func(){const e=f.use_strict(this.code);return new l.GeneratorFunction(...this.names,e)}_v_compute(e){const t=this.func.apply(e,this.values);let r=t.next();if(r.done&&void 0!==r.value){const{value:t}=r;return d.isArray(t)||d.isTypedArray(t)?t:d.isIterable(t)?[...t]:c.repeat(t,e.length)}{const e=[];do{e.push(r.value),r=t.next()}while(!r.done);return e}}}n.CustomJSExpr=h,h.__name__="CustomJSExpr",h.init_CustomJSExpr()},function e(t,r,n,a,i){a();const o=t(124);class s extends o.Expression{constructor(e){super(e)}static init_Stack(){this.define(({String:e,Array:t})=>({fields:[t(e),[]]}))}_v_compute(e){var t;const n=null!==(t=e.get_length())&&void 0!==t?t:0,a=new Float64Array(n);for(const t of this.fields){const r=e.data[t];if(null!=r)for(let e=0,t=Math.min(n,r.length);e<t;e++)a[e]+=r[e]}return a}}n.Stack=s,s.__name__="Stack",s.init_Stack()},function e(t,r,n,a,i){a();const o=t(124);class s extends o.Expression{constructor(e){super(e)}static init_CumSum(){this.define(({Boolean:e,String:t})=>({field:[t],include_zero:[e,!1]}))}_v_compute(e){var t;const r=new Float64Array(null!==(t=e.get_length())&&void 0!==t?t:0),n=e.data[this.field],a=this.include_zero?1:0;r[0]=this.include_zero?0:n[0];for(let e=1;e<r.length;e++)r[e]=r[e-1]+n[e-a];return r}}n.CumSum=s,s.__name__="CumSum",s.init_CumSum()},function e(t,r,n,a,i){a();const o=t(124),s=t(9);class l extends o.ScalarExpression{constructor(e){super(e)}static init_Minimum(){this.define(({Number:e,String:t,Nullable:r})=>({field:[t],initial:[r(e),null]}))}_compute(e){var t,r;const n=null!==(t=e.data[this.field])&&void 0!==t?t:[];return Math.min(null!==(r=this.initial)&&void 0!==r?r:1/0,s.min(n))}}n.Minimum=l,l.__name__="Minimum",l.init_Minimum()},function e(t,r,n,a,i){a();const o=t(124),s=t(9);class l extends o.ScalarExpression{constructor(e){super(e)}static init_Maximum(){this.define(({Number:e,String:t,Nullable:r})=>({field:[t],initial:[r(e),null]}))}_compute(e){var t,r;const n=null!==(t=e.data[this.field])&&void 0!==t?t:[];return Math.max(null!==(r=this.initial)&&void 0!==r?r:-1/0,s.max(n))}}n.Maximum=l,l.__name__="Maximum",l.init_Maximum()},function e(t,r,n,a,i){a(),i("BooleanFilter",t(273).BooleanFilter),i("CustomJSFilter",t(274).CustomJSFilter),i("Filter",t(121).Filter),i("GroupFilter",t(275).GroupFilter),i("IndexFilter",t(276).IndexFilter)},function e(t,r,n,a,i){a();const o=t(121),s=t(24);class l extends o.Filter{constructor(e){super(e)}static init_BooleanFilter(){this.define(({Boolean:e,Array:t,Nullable:r})=>({booleans:[r(t(e)),null]}))}compute_indices(e){const t=e.length,{booleans:r}=this;return null==r?s.Indices.all_set(t):s.Indices.from_booleans(t,r)}}n.BooleanFilter=l,l.__name__="BooleanFilter",l.init_BooleanFilter()},function e(t,r,n,a,i){a();const o=t(121),s=t(24),l=t(13),c=t(8),u=t(34);class f extends o.Filter{constructor(e){super(e)}static init_CustomJSFilter(){this.define(({Unknown:e,String:t,Dict:r})=>({args:[r(e),{}],code:[t,""]}))}get names(){return l.keys(this.args)}get values(){return l.values(this.args)}get func(){const e=u.use_strict(this.code);return new Function(...this.names,"source",e)}compute_indices(e){const t=e.length,r=this.func(...this.values,e);if(null==r)return s.Indices.all_set(t);if(c.isArrayOf(r,c.isInteger))return s.Indices.from_indices(t,r);if(c.isArrayOf(r,c.isBoolean))return s.Indices.from_booleans(t,r);throw new Error(`expect an array of integers or booleans, or null, got ${r}`)}}n.CustomJSFilter=f,f.__name__="CustomJSFilter",f.init_CustomJSFilter()},function e(t,r,n,a,i){a();const o=t(121),s=t(24),l=t(19);class c extends o.Filter{constructor(e){super(e)}static init_GroupFilter(){this.define(({String:e})=>({column_name:[e],group:[e]}))}compute_indices(e){const r=e.get_column(this.column_name);if(null==r)return l.logger.warn(`${this}: groupby column '${this.column_name}' not found in the data source`),new s.Indices(e.length,1);{const t=new s.Indices(e.length);for(let e=0;e<t.size;e++)r[e]===this.group&&t.set(e);return t}}}n.GroupFilter=c,c.__name__="GroupFilter",c.init_GroupFilter()},function e(t,r,n,a,i){a();const o=t(121),s=t(24);class l extends o.Filter{constructor(e){super(e)}static init_IndexFilter(){this.define(({Int:e,Array:t,Nullable:r})=>({indices:[r(t(e)),null]}))}compute_indices(e){const t=e.length,{indices:r}=this;return null==r?s.Indices.all_set(t):s.Indices.from_indices(t,r)}}n.IndexFilter=l,l.__name__="IndexFilter",l.init_IndexFilter()},function e(t,r,n,a,i){a(),i("AnnularWedge",t(278).AnnularWedge),i("Annulus",t(279).Annulus),i("Arc",t(280).Arc),i("Bezier",t(281).Bezier),i("Circle",t(282).Circle),i("Ellipse",t(286).Ellipse),i("EllipseOval",t(287).EllipseOval),i("Glyph",t(98).Glyph),i("HArea",t(117).HArea),i("HBar",t(289).HBar),i("HexTile",t(291).HexTile),i("Image",t(292).Image),i("ImageRGBA",t(294).ImageRGBA),i("ImageURL",t(295).ImageURL),i("Line",t(63).Line),i("MultiLine",t(127).MultiLine),i("MultiPolygons",t(297).MultiPolygons),i("Oval",t(298).Oval),i("Patch",t(116).Patch),i("Patches",t(128).Patches),i("Quad",t(299).Quad),i("Quadratic",t(300).Quadratic),i("Ray",t(301).Ray),i("Rect",t(302).Rect),i("Scatter",t(303).Scatter),i("Segment",t(306).Segment),i("Spline",t(307).Spline),i("Step",t(309).Step),i("Text",t(310).Text),i("VArea",t(119).VArea),i("VBar",t(311).VBar),i("Wedge",t(312).Wedge)},function e(t,r,n,a,i){a();const o=t(1),s=t(64),l=t(106),e=t(48),c=t(24),u=t(20),f=o.__importStar(t(18)),d=t(10),h=t(59);class p extends s.XYGlyphView{_map_data(){"data"==this.model.properties.inner_radius.units?this.sinner_radius=this.sdist(this.renderer.xscale,this._x,this.inner_radius):this.sinner_radius=c.to_screen(this.inner_radius),"data"==this.model.properties.outer_radius.units?this.souter_radius=this.sdist(this.renderer.xscale,this._x,this.outer_radius):this.souter_radius=c.to_screen(this.outer_radius)}_render(o,s,l){const{sx:c,sy:u,start_angle:f,end_angle:d,sinner_radius:h,souter_radius:p}=null!=l?l:this,v="anticlock"==this.model.direction;for(const l of s){const s=c[l],e=u[l],t=h[l],r=p[l],n=f.get(l),a=d.get(l);if(isNaN(s+e+t+r+n+a))continue;const i=a-n;o.translate(s,e),o.rotate(n),o.beginPath(),o.moveTo(r,0),o.arc(0,0,r,0,i,v),o.rotate(i),o.lineTo(t,0),o.arc(0,0,t,0,-i,!v),o.closePath(),o.rotate(-i-n),o.translate(-s,-e),this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(o,l),o.fill()),this.visuals.hatch.doit&&(this.visuals.hatch.set_vectorize(o,l),o.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(o,l),o.stroke())}}_hit_point(e){const{sx:t,sy:r}=e,n=this.renderer.xscale.invert(t),a=this.renderer.yscale.invert(r);let i,o,s,l;if("data"==this.model.properties.outer_radius.units)i=n-this.max_outer_radius,s=n+this.max_outer_radius,o=a-this.max_outer_radius,l=a+this.max_outer_radius;else{const e=t-this.max_outer_radius,n=t+this.max_outer_radius;[i,s]=this.renderer.xscale.r_invert(e,n);const a=r-this.max_outer_radius,c=r+this.max_outer_radius;[o,l]=this.renderer.yscale.r_invert(a,c)}const c=[];for(const e of this.index.indices({x0:i,x1:s,y0:o,y1:l})){const t=this.souter_radius[e]**2,r=this.sinner_radius[e]**2,[i,o]=this.renderer.xscale.r_compute(n,this._x[e]),[s,l]=this.renderer.yscale.r_compute(a,this._y[e]),u=(i-o)**2+(s-l)**2;u<=t&&u>=r&&c.push(e)}const u="anticlock"==this.model.direction,f=[];for(const e of c){const n=Math.atan2(r-this.sy[e],t-this.sx[e]);d.angle_between(-n,-this.start_angle.get(e),-this.end_angle.get(e),u)&&f.push(e)}return new h.Selection({indices:f})}draw_legend_for_index(e,t,r){l.generic_area_vector_legend(this.visuals,e,t,r)}scenterxy(e){const t=(this.sinner_radius[e]+this.souter_radius[e])/2,r=(this.start_angle.get(e)+this.end_angle.get(e))/2;return[this.sx[e]+t*Math.cos(r),this.sy[e]+t*Math.sin(r)]}}n.AnnularWedgeView=p,p.__name__="AnnularWedgeView";class v extends s.XYGlyph{constructor(e){super(e)}static init_AnnularWedge(){this.prototype.default_view=p,this.mixins([e.LineVector,e.FillVector,e.HatchVector]),this.define(({})=>({direction:[u.Direction,"anticlock"],inner_radius:[f.DistanceSpec,{field:"inner_radius"}],outer_radius:[f.DistanceSpec,{field:"outer_radius"}],start_angle:[f.AngleSpec,{field:"start_angle"}],end_angle:[f.AngleSpec,{field:"end_angle"}]}))}}n.AnnularWedge=v,v.__name__="AnnularWedge",v.init_AnnularWedge()},function e(t,r,n,a,i){a();const o=t(1),s=t(64),l=t(24),e=t(48),c=o.__importStar(t(18)),f=t(27),d=t(59);class u extends s.XYGlyphView{_map_data(){"data"==this.model.properties.inner_radius.units?this.sinner_radius=this.sdist(this.renderer.xscale,this._x,this.inner_radius):this.sinner_radius=l.to_screen(this.inner_radius),"data"==this.model.properties.outer_radius.units?this.souter_radius=this.sdist(this.renderer.xscale,this._x,this.outer_radius):this.souter_radius=l.to_screen(this.outer_radius)}_render(a,i,e){const{sx:o,sy:s,sinner_radius:l,souter_radius:c}=null!=e?e:this;for(const e of i){const i=o[e],t=s[e],r=l[e],n=c[e];function u(){if(a.beginPath(),f.is_ie)for(const e of[!1,!0])a.arc(i,t,r,0,Math.PI,e),a.arc(i,t,n,Math.PI,0,!e);else a.arc(i,t,r,0,2*Math.PI,!0),a.arc(i,t,n,2*Math.PI,0,!1)}isNaN(i+t+r+n)||(this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(a,e),u(),a.fill()),this.visuals.hatch.doit&&(this.visuals.hatch.set_vectorize(a,e),u(),a.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(a,e),a.beginPath(),a.arc(i,t,r,0,2*Math.PI),a.moveTo(i+n,t),a.arc(i,t,n,0,2*Math.PI),a.stroke()))}}_hit_point(t){const{sx:r,sy:n}=t,a=this.renderer.xscale.invert(r),i=this.renderer.yscale.invert(n);let o,s,l,c;if("data"==this.model.properties.outer_radius.units)o=a-this.max_outer_radius,l=a+this.max_outer_radius,s=i-this.max_outer_radius,c=i+this.max_outer_radius;else{const t=r-this.max_outer_radius,a=r+this.max_outer_radius;[o,l]=this.renderer.xscale.r_invert(t,a);const i=n-this.max_outer_radius,u=n+this.max_outer_radius;[s,c]=this.renderer.yscale.r_invert(i,u)}const u=[];for(const t of this.index.indices({x0:o,x1:l,y0:s,y1:c})){const r=this.souter_radius[t]**2,n=this.sinner_radius[t]**2,[o,s]=this.renderer.xscale.r_compute(a,this._x[t]),[l,c]=this.renderer.yscale.r_compute(i,this._y[t]),e=(o-s)**2+(l-c)**2;e<=r&&e>=n&&u.push(t)}return new d.Selection({indices:u})}draw_legend_for_index(e,{x0:t,y0:r,x1:n,y1:a},i){const o=i+1,s=new Array(o);s[i]=(t+n)/2;const l=new Array(o);l[i]=(r+a)/2;const c=.5*Math.min(Math.abs(n-t),Math.abs(a-r)),u=new Array(o);u[i]=.4*c;const f=new Array(o);f[i]=.8*c,this._render(e,[i],{sx:s,sy:l,sinner_radius:u,souter_radius:f})}}n.AnnulusView=u,u.__name__="AnnulusView";class h extends s.XYGlyph{constructor(e){super(e)}static init_Annulus(){this.prototype.default_view=u,this.mixins([e.LineVector,e.FillVector,e.HatchVector]),this.define(({})=>({inner_radius:[c.DistanceSpec,{field:"inner_radius"}],outer_radius:[c.DistanceSpec,{field:"outer_radius"}]}))}}n.Annulus=h,h.__name__="Annulus",h.init_Annulus()},function e(t,r,n,a,i){a();const o=t(1),s=t(64),l=t(106),c=t(48),e=t(24),u=t(20),f=o.__importStar(t(18));class d extends s.XYGlyphView{_map_data(){"data"==this.model.properties.radius.units?this.sradius=this.sdist(this.renderer.xscale,this._x,this.radius):this.sradius=e.to_screen(this.radius)}_render(u,f,d){if(this.visuals.line.doit){const{sx:a,sy:i,sradius:o,start_angle:s,end_angle:l}=null!=d?d:this,c="anticlock"==this.model.direction;for(const d of f){const f=a[d],e=i[d],t=o[d],r=s.get(d),n=l.get(d);isNaN(f+e+t+r+n)||(u.beginPath(),u.arc(f,e,t,r,n,c),this.visuals.line.set_vectorize(u,d),u.stroke())}}}draw_legend_for_index(e,t,r){l.generic_line_vector_legend(this.visuals,e,t,r)}}n.ArcView=d,d.__name__="ArcView";class h extends s.XYGlyph{constructor(e){super(e)}static init_Arc(){this.prototype.default_view=d,this.mixins(c.LineVector),this.define(({})=>({direction:[u.Direction,"anticlock"],radius:[f.DistanceSpec,{field:"radius"}],start_angle:[f.AngleSpec,{field:"start_angle"}],end_angle:[f.AngleSpec,{field:"end_angle"}]}))}}n.Arc=h,h.__name__="Arc",h.init_Arc()},function e(t,r,n,a,i){a();const o=t(1),s=t(48),l=t(98),c=t(106),e=t(65),u=o.__importStar(t(18));function _(i,o,s,l,c,u,f,d){const h=[],r=[[],[]];for(let a=0;a<=2;a++){let e,t,r;if(0===a?(t=6*i-12*s+6*c,e=-3*i+9*s-9*c+3*f,r=3*s-3*i):(t=6*o-12*l+6*u,e=-3*o+9*l-9*u+3*d,r=3*l-3*o),Math.abs(e)<1e-12){if(Math.abs(t)<1e-12)continue;const i=-r/t;0<i&&i<1&&h.push(i);continue}const n=t*t-4*r*e,p=Math.sqrt(n);if(n<0)continue;const v=(-t+p)/(2*e);0<v&&v<1&&h.push(v);const g=(-t-p)/(2*e);0<g&&g<1&&h.push(g)}let n=h.length;const a=n;for(;n--;){const a=h[n],e=1-a,t=e*e*e*i+3*e*e*a*s+3*e*a*a*c+a*a*a*f;r[0][n]=t;const p=e*e*e*o+3*e*e*a*l+3*e*a*a*u+a*a*a*d;r[1][n]=p}return r[0][a]=i,r[1][a]=o,r[0][a+1]=f,r[1][a+1]=d,[Math.min(...r[0]),Math.max(...r[1]),Math.max(...r[0]),Math.min(...r[1])]}class f extends l.GlyphView{_project_data(){e.inplace.project_xy(this._x0,this._y0),e.inplace.project_xy(this._x1,this._y1)}_index_data(n){const{data_size:a,_x0:i,_y0:o,_x1:s,_y1:l,_cx0:c,_cy0:u,_cx1:f,_cy1:d}=this;for(let r=0;r<a;r++){const a=i[r],e=o[r],t=s[r],h=l[r],p=c[r],v=u[r],g=f[r],m=d[r];if(isNaN(a+t+e+h+p+v+g+m))n.add_empty();else{const[i,o,s,l]=_(a,e,t,h,p,v,g,m);n.add(i,o,s,l)}}}_render(f,d,h){if(this.visuals.line.doit){const{sx0:n,sy0:a,sx1:i,sy1:o,scx0:s,scy0:l,scx1:c,scy1:u}=null!=h?h:this;for(const h of d){const d=n[h],e=a[h],t=i[h],r=o[h],p=s[h],v=l[h],g=c[h],m=u[h];isNaN(d+e+t+r+p+v+g+m)||(f.beginPath(),f.moveTo(d,e),f.bezierCurveTo(p,v,g,m,t,r),this.visuals.line.set_vectorize(f,h),f.stroke())}}}draw_legend_for_index(e,t,r){c.generic_line_vector_legend(this.visuals,e,t,r)}scenterxy(){throw new Error(`${this}.scenterxy() is not implemented`)}}n.BezierView=f,f.__name__="BezierView";class d extends l.Glyph{constructor(e){super(e)}static init_Bezier(){this.prototype.default_view=f,this.define(({})=>({x0:[u.XCoordinateSpec,{field:"x0"}],y0:[u.YCoordinateSpec,{field:"y0"}],x1:[u.XCoordinateSpec,{field:"x1"}],y1:[u.YCoordinateSpec,{field:"y1"}],cx0:[u.XCoordinateSpec,{field:"cx0"}],cy0:[u.YCoordinateSpec,{field:"cy0"}],cx1:[u.XCoordinateSpec,{field:"cx1"}],cy1:[u.YCoordinateSpec,{field:"cy1"}]})),this.mixins(s.LineVector)}}n.Bezier=d,d.__name__="Bezier",d.init_Bezier()},function o(e,t,r,n,a){n();const i=e(1),s=e(64),l=e(283),c=e(48),u=e(24),f=e(20),o=i.__importStar(e(107)),d=i.__importStar(e(18)),h=e(9),p=e(12),v=e(59);class g extends s.XYGlyphView{initialize(){super.initialize();const{webgl:e}=this.renderer.plot_view.canvas_view;null!=e&&(this.glglyph=new l.MarkerGL(e.gl,this,"circle"))}get use_radius(){return!(this.radius.is_Scalar()&&isNaN(this.radius.value))}_map_data(){if(this.use_radius)if("data"==this.model.properties.radius.units)switch(this.model.radius_dimension){case"x":this.sradius=this.sdist(this.renderer.xscale,this._x,this.radius);break;case"y":this.sradius=this.sdist(this.renderer.yscale,this._y,this.radius);break;case"max":{const e=this.sdist(this.renderer.xscale,this._x,this.radius),r=this.sdist(this.renderer.yscale,this._y,this.radius);this.sradius=p.map(e,(e,t)=>Math.max(e,r[t]));break}case"min":{const e=this.sdist(this.renderer.xscale,this._x,this.radius),r=this.sdist(this.renderer.yscale,this._y,this.radius);this.sradius=p.map(e,(e,t)=>Math.min(e,r[t]));break}}else this.sradius=u.to_screen(this.radius),this._configure("max_size",{value:2*this.max_radius});else{const e=new u.ScreenArray(this.size);this.sradius=p.map(e,e=>e/2)}}_mask_data(){const{frame:e}=this.renderer.plot_view,t=e.x_target,r=e.y_target;let n,a;return this.use_radius&&"data"==this.model.properties.radius.units?(n=t.map(e=>this.renderer.xscale.invert(e)).widen(this.max_radius),a=r.map(e=>this.renderer.yscale.invert(e)).widen(this.max_radius)):(n=t.widen(this.max_size).map(e=>this.renderer.xscale.invert(e)),a=r.widen(this.max_size).map(e=>this.renderer.yscale.invert(e))),this.index.indices({x0:n.start,x1:n.end,y0:a.start,y1:a.end})}_render(r,n,a){const{sx:i,sy:o,sradius:s}=null!=a?a:this;for(const a of n){const n=i[a],e=o[a],t=s[a];isNaN(n+e+t)||(r.beginPath(),r.arc(n,e,t,0,2*Math.PI,!1),this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(r,a),r.fill()),this.visuals.hatch.doit&&(this.visuals.hatch.set_vectorize(r,a),r.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(r,a),r.stroke()))}}_hit_point(e){const{sx:t,sy:r}=e,n=this.renderer.xscale.invert(t),a=this.renderer.yscale.invert(r),{hit_dilation:i}=this.model;let o,s,l,c;if(this.use_radius&&"data"==this.model.properties.radius.units)o=n-this.max_radius*i,s=n+this.max_radius*i,l=a-this.max_radius*i,c=a+this.max_radius*i;else{const e=t-this.max_size*i,n=t+this.max_size*i;[o,s]=this.renderer.xscale.r_invert(e,n);const a=r-this.max_size*i,u=r+this.max_size*i;[l,c]=this.renderer.yscale.r_invert(a,u)}const u=this.index.indices({x0:o,x1:s,y0:l,y1:c}),f=[];if(this.use_radius&&"data"==this.model.properties.radius.units)for(const e of u){const t=(this.sradius[e]*i)**2,[r,o]=this.renderer.xscale.r_compute(n,this._x[e]),[s,l]=this.renderer.yscale.r_compute(a,this._y[e]);(r-o)**2+(s-l)**2<=t&&f.push(e)}else for(const e of u){const n=(this.sradius[e]*i)**2;(this.sx[e]-t)**2+(this.sy[e]-r)**2<=n&&f.push(e)}return new v.Selection({indices:f})}_hit_span(e){const{sx:r,sy:n}=e,a=this.bounds();let i,o,s,l;if("h"==e.direction){let e,t;if(s=a.y0,l=a.y1,this.use_radius&&"data"==this.model.properties.radius.units)e=r-this.max_radius,t=r+this.max_radius,[i,o]=this.renderer.xscale.r_invert(e,t);else{const a=this.max_size/2;e=r-a,t=r+a,[i,o]=this.renderer.xscale.r_invert(e,t)}}else{let e,t;if(i=a.x0,o=a.x1,this.use_radius&&"data"==this.model.properties.radius.units)e=n-this.max_radius,t=n+this.max_radius,[s,l]=this.renderer.yscale.r_invert(e,t);else{const a=this.max_size/2;e=n-a,t=n+a,[s,l]=this.renderer.yscale.r_invert(e,t)}}const t=[...this.index.indices({x0:i,x1:o,y0:s,y1:l})];return new v.Selection({indices:t})}_hit_rect(e){const{sx0:t,sx1:r,sy0:n,sy1:a}=e,[i,o]=this.renderer.xscale.r_invert(t,r),[s,l]=this.renderer.yscale.r_invert(n,a),c=[...this.index.indices({x0:i,x1:o,y0:s,y1:l})];return new v.Selection({indices:c})}_hit_poly(e){const{sx:r,sy:n}=e,a=h.range(0,this.sx.length),i=[];for(let t=0,e=a.length;t<e;t++){const e=a[t];o.point_in_poly(this.sx[t],this.sy[t],r,n)&&i.push(e)}return new v.Selection({indices:i})}draw_legend_for_index(e,{x0:t,y0:r,x1:n,y1:a},i){const o=i+1,s=new Array(o);s[i]=(t+n)/2;const l=new Array(o);l[i]=(r+a)/2;const c=new Array(o);c[i]=.2*Math.min(Math.abs(n-t),Math.abs(a-r)),this._render(e,[i],{sx:s,sy:l,sradius:c})}}r.CircleView=g,g.__name__="CircleView";class m extends s.XYGlyph{constructor(e){super(e)}static init_Circle(){this.prototype.default_view=g,this.mixins([c.LineVector,c.FillVector,c.HatchVector]),this.define(({Number:e})=>({angle:[d.AngleSpec,0],size:[d.ScreenDistanceSpec,{value:4}],radius:[d.NullDistanceSpec,null],radius_dimension:[f.RadiusDimension,"x"],hit_dilation:[e,1]}))}}r.Circle=m,m.__name__="Circle",m.init_Circle()},function e(t,r,n,a,i){a();const o=t(1),s=t(109),e=t(113),l=o.__importDefault(t(284)),c=o.__importDefault(t(285)),u=t(282),f=t(12),d=t(19),h=t(24),p=t(22),v=t(11);function g(r,n,a,i,o,s,l){if(o.doit)if(s.is_Scalar()&&l.is_Scalar()){n.used=!1;const[i,o,e,t]=p.color2rgba(s.value,l.value);r.set_attribute(a,"vec4",[i/255,o/255,e/255,t/255])}else{let t;if(n.used=!0,s.is_Vector()){const r=new h.ColorArray(s.array);if(t=new h.RGBAArray(r.buffer),!l.is_Scalar()||1!=l.value)for(let e=0;e<i;e++){const n=4*e+3;255==t[n]&&(t[n]=255*l.get(e))}}else if(s.is_Scalar()&&l.is_Vector()){const r=new h.ColorArray(i);r.fill(s.value),t=new h.RGBAArray(r.buffer);for(let e=0;e<i;e++)for(let e=0;e<i;e++){const n=4*e+3;255==t[n]&&(t[n]=255*l.get(e))}}else v.unreachable();n.set_size(4*i),n.set_data(0,t),r.set_attribute(a,"vec4_uint8",n,0,0,!0)}else n.used=!1,r.set_attribute(a,"vec4",[0,0,0,0])}class m extends e.BaseGLGlyph{constructor(e,t,r){super(e,t),this.glyph=t,this.marker_type=r;const n=[`#define USE_${r.toUpperCase()}`],a=l.default,i=`${n.join("\n")}\n\n${c.default}`;this.prog=new s.Program(e),this.prog.set_shaders(a,i),this.vbo_sx=new s.VertexBuffer(e),this.prog.set_attribute("a_sx","float",this.vbo_sx),this.vbo_sy=new s.VertexBuffer(e),this.prog.set_attribute("a_sy","float",this.vbo_sy),this.vbo_s=new s.VertexBuffer(e),this.prog.set_attribute("a_size","float",this.vbo_s),this.vbo_a=new s.VertexBuffer(e),this.prog.set_attribute("a_angle","float",this.vbo_a),this.vbo_linewidth=new s.VertexBuffer(e),this.vbo_fg_color=new s.VertexBuffer(e),this.vbo_bg_color=new s.VertexBuffer(e),this.index_buffer=new s.IndexBuffer(e)}static is_supported(e){switch(e){case"asterisk":case"circle":case"circle_cross":case"circle_x":case"cross":case"diamond":case"diamond_cross":case"hex":case"inverted_triangle":case"square":case"square_cross":case"square_x":case"star":case"triangle":case"x":return!0;default:return!1}}draw(r,n,a){const i=n.glglyph,{nvertices:o}=i;if(i.data_changed&&(i._set_data(o),this.glyph instanceof u.CircleView&&null!=this.glyph.radius&&this.vbo_s.set_data(0,f.map(this.glyph.sradius,e=>2*e)),i.data_changed=!1),this.visuals_changed&&(this._set_visuals(o),this.visuals_changed=!1),this.prog.set_uniform("u_pixel_ratio","float",[a.pixel_ratio]),this.prog.set_uniform("u_canvas_size","vec2",[a.width,a.height]),this.prog.set_attribute("a_sx","float",i.vbo_sx),this.prog.set_attribute("a_sy","float",i.vbo_sy),this.prog.set_attribute("a_size","float",i.vbo_s),this.prog.set_attribute("a_angle","float",i.vbo_a),0!=r.length)if(r.length===o)this.prog.draw(this.gl.POINTS,[0,o]);else if(o<65535){const n=window.navigator.userAgent;n.indexOf("MSIE ")+n.indexOf("Trident/")+n.indexOf("Edge/")>0&&d.logger.warn("WebGL warning: IE is known to produce 1px sprites whith selections."),this.index_buffer.set_size(2*r.length),this.index_buffer.set_data(0,new Uint16Array(r)),this.prog.draw(this.gl.POINTS,this.index_buffer)}else{const n=64e3,a=[];for(let e=0,t=Math.ceil(o/n);e<t;e++)a.push([]);for(let e=0,t=r.length;e<t;e++){const o=r[e]%n;a[Math.floor(r[e]/n)].push(o)}for(let t=0,e=a.length;t<e;t++){const o=new Uint16Array(a[t]),e=t*n*4;0!==o.length&&(this.prog.set_attribute("a_sx","float",i.vbo_sx,0,e),this.prog.set_attribute("a_sy","float",i.vbo_sy,0,e),this.prog.set_attribute("a_size","float",i.vbo_s,0,e),this.prog.set_attribute("a_angle","float",i.vbo_a,0,e),this.vbo_linewidth.used&&this.prog.set_attribute("a_linewidth","float",this.vbo_linewidth,0,e),this.vbo_fg_color.used&&this.prog.set_attribute("a_fg_color","vec4_uint8",this.vbo_fg_color,0,4*e,!0),this.vbo_bg_color.used&&this.prog.set_attribute("a_bg_color","vec4_uint8",this.vbo_bg_color,0,4*e,!0),this.index_buffer.set_size(2*o.length),this.index_buffer.set_data(0,o),this.prog.draw(this.gl.POINTS,this.index_buffer))}}}_set_data(e){const t=4*e;this.vbo_sx.set_size(t),this.vbo_sy.set_size(t),this.vbo_a.set_size(t),this.vbo_s.set_size(t),this.vbo_sx.set_data(0,this.glyph.sx),this.vbo_sy.set_data(0,this.glyph.sy),null!=this.glyph.angle&&this.vbo_a.set_data(0,new Float32Array(this.glyph.angle)),this.glyph instanceof u.CircleView&&null!=this.glyph.radius?this.vbo_s.set_data(0,f.map(this.glyph.sradius,e=>2*e)):this.vbo_s.set_data(0,new Float32Array(this.glyph.size))}_set_visuals(e){const{line:t,fill:r}=this.glyph.visuals;!function(e,t,r,n,a,i){if(a.doit){if(i.is_Scalar())t.used=!1,e.set_attribute(r,"float",[i.value]);else if(i.is_Vector()){t.used=!0;const a=new Float32Array(i.array);t.set_size(4*n),t.set_data(0,a),e.set_attribute(r,"float",t)}}else t.used=!1,e.set_attribute(r,"float",[0])}(this.prog,this.vbo_linewidth,"a_linewidth",e,t,t.line_width),g(this.prog,this.vbo_fg_color,"a_fg_color",e,t,t.line_color,t.line_alpha),g(this.prog,this.vbo_bg_color,"a_bg_color",e,r,r.fill_color,r.fill_alpha),this.prog.set_uniform("u_antialias","float",[.8])}}n.MarkerGL=m,m.__name__="MarkerGL"},function e(t,r,n,a,e){a();n.default="\nprecision mediump float;\nconst float SQRT_2 = 1.4142135623730951;\n//\nuniform float u_pixel_ratio;\nuniform vec2 u_canvas_size;\nuniform vec2 u_offset;\nuniform vec2 u_scale;\nuniform float u_antialias;\n//\nattribute float a_sx;\nattribute float a_sy;\nattribute float a_size;\nattribute float a_angle;  // in radians\nattribute float a_linewidth;\nattribute vec4  a_fg_color;\nattribute vec4  a_bg_color;\n//\nvarying float v_linewidth;\nvarying float v_size;\nvarying vec4  v_fg_color;\nvarying vec4  v_bg_color;\nvarying vec2  v_rotation;\n\nvoid main (void)\n{\n    v_size = a_size * u_pixel_ratio;\n    v_linewidth = a_linewidth * u_pixel_ratio;\n    v_fg_color = a_fg_color;\n    v_bg_color = a_bg_color;\n    v_rotation = vec2(cos(-a_angle), sin(-a_angle));\n    vec2 pos = vec2(a_sx, a_sy);  // in pixels\n    pos += 0.5;  // make up for Bokeh's offset\n    pos /= u_canvas_size / u_pixel_ratio;  // in 0..1\n    gl_Position = vec4(pos*2.0-1.0, 0.0, 1.0);\n    gl_Position.y *= -1.0;\n    gl_PointSize = SQRT_2 * v_size + 2.0 * (v_linewidth + 1.5*u_antialias);\n}\n"},function e(t,r,n,a,i){a();n.default='\nprecision mediump float;\n\nconst float SQRT_2 = 1.4142135623730951;\nconst float PI = 3.14159265358979323846264;\n\nconst float IN_ANGLE = 0.6283185307179586; // PI/5. = 36 degrees (star of 5 pikes)\n//const float OUT_ANGLE = PI/2. - IN_ANGLE; // External angle for regular stars\nconst float COS_A = 0.8090169943749475; // cos(IN_ANGLE)\nconst float SIN_A = 0.5877852522924731; // sin(IN_ANGLE)\nconst float COS_B = 0.5877852522924731; // cos(OUT_ANGLE)\nconst float SIN_B = 0.8090169943749475; // sin(OUT_ANGLE)\n\n//\nuniform float u_antialias;\n//\nvarying vec4  v_fg_color;\nvarying vec4  v_bg_color;\nvarying float v_linewidth;\nvarying float v_size;\nvarying vec2  v_rotation;\n\n#ifdef USE_ASTERISK\n// asterisk\nfloat marker(vec2 P, float size)\n{\n    // Masks\n    float diamond = max(abs(SQRT_2 / 2.0 * (P.x - P.y)), abs(SQRT_2 / 2.0 * (P.x + P.y))) - size / (2.0 * SQRT_2);\n    float square = max(abs(P.x), abs(P.y)) - size / (2.0 * SQRT_2);\n    // Shapes\n    float X = min(abs(P.x - P.y), abs(P.x + P.y)) - size / 100.0;  // bit of "width" for aa\n    float cross = min(abs(P.x), abs(P.y)) - size / 100.0;  // bit of "width" for aa\n    // Result is union of masked shapes\n    return min(max(X, diamond), max(cross, square));\n}\n#endif\n\n#ifdef USE_CIRCLE\n// circle\nfloat marker(vec2 P, float size)\n{\n    return length(P) - size/2.0;\n}\n#endif\n\n#ifdef USE_SQUARE\n// square\nfloat marker(vec2 P, float size)\n{\n    return max(abs(P.x), abs(P.y)) - size/2.0;\n}\n#endif\n\n#ifdef USE_DIAMOND\n// diamond\nfloat marker(vec2 P, float size)\n{\n    float x = SQRT_2 / 2.0 * (P.x * 1.5 - P.y);\n    float y = SQRT_2 / 2.0 * (P.x * 1.5 + P.y);\n    float r1 = max(abs(x), abs(y)) - size / (2.0 * SQRT_2);\n    return r1 / SQRT_2;\n}\n#endif\n\n#ifdef USE_HEX\n// hex\nfloat marker(vec2 P, float size)\n{\n    vec2 q = abs(P);\n    return max(q.y * 0.57735 + q.x - 1.0 * size/2.0, q.y - 0.866 * size/2.0);\n}\n#endif\n\n#ifdef USE_STAR\n// star\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\nfloat marker(vec2 P, float size)\n{\n    float bn = mod(atan(P.x, -P.y), 2.0*IN_ANGLE) - IN_ANGLE;\n    P = length(P)*vec2(cos(bn), abs(sin(bn)));\n    P -= size*vec2(COS_A, SIN_A)/2.;\n    P += vec2(COS_B, SIN_B)*clamp(-(P.x*COS_B + P.y*SIN_B), 0.0, size*SIN_A/SIN_B/2.);\n\n    return length(P)*sign(P.x);\n}\n#endif\n\n#ifdef USE_TRIANGLE\n// triangle\nfloat marker(vec2 P, float size)\n{\n    P.y -= size * 0.3;\n    float x = SQRT_2 / 2.0 * (P.x * 1.7 - P.y);\n    float y = SQRT_2 / 2.0 * (P.x * 1.7 + P.y);\n    float r1 = max(abs(x), abs(y)) - size / 1.6;\n    float r2 = P.y;\n    return max(r1 / SQRT_2, r2);  // Intersect diamond with rectangle\n}\n#endif\n\n#ifdef USE_INVERTED_TRIANGLE\n// inverted_triangle\nfloat marker(vec2 P, float size)\n{\n    P.y += size * 0.3;\n    float x = SQRT_2 / 2.0 * (P.x * 1.7 - P.y);\n    float y = SQRT_2 / 2.0 * (P.x * 1.7 + P.y);\n    float r1 = max(abs(x), abs(y)) - size / 1.6;\n    float r2 = - P.y;\n    return max(r1 / SQRT_2, r2);  // Intersect diamond with rectangle\n}\n#endif\n\n#ifdef USE_CROSS\n// cross\nfloat marker(vec2 P, float size)\n{\n    float square = max(abs(P.x), abs(P.y)) - size / 2.5;   // 2.5 is a tweak\n    float cross = min(abs(P.x), abs(P.y)) - size / 100.0;  // bit of "width" for aa\n    return max(square, cross);\n}\n#endif\n\n#ifdef USE_CIRCLE_CROSS\n// circle_cross\nfloat marker(vec2 P, float size)\n{\n    // Define quadrants\n    float qs = size / 2.0;  // quadrant size\n    float s1 = max(abs(P.x - qs), abs(P.y - qs)) - qs;\n    float s2 = max(abs(P.x + qs), abs(P.y - qs)) - qs;\n    float s3 = max(abs(P.x - qs), abs(P.y + qs)) - qs;\n    float s4 = max(abs(P.x + qs), abs(P.y + qs)) - qs;\n    // Intersect main shape with quadrants (to form cross)\n    float circle = length(P) - size/2.0;\n    float c1 = max(circle, s1);\n    float c2 = max(circle, s2);\n    float c3 = max(circle, s3);\n    float c4 = max(circle, s4);\n    // Union\n    return min(min(min(c1, c2), c3), c4);\n}\n#endif\n\n#ifdef USE_SQUARE_CROSS\n// square_cross\nfloat marker(vec2 P, float size)\n{\n    // Define quadrants\n    float qs = size / 2.0;  // quadrant size\n    float s1 = max(abs(P.x - qs), abs(P.y - qs)) - qs;\n    float s2 = max(abs(P.x + qs), abs(P.y - qs)) - qs;\n    float s3 = max(abs(P.x - qs), abs(P.y + qs)) - qs;\n    float s4 = max(abs(P.x + qs), abs(P.y + qs)) - qs;\n    // Intersect main shape with quadrants (to form cross)\n    float square = max(abs(P.x), abs(P.y)) - size/2.0;\n    float c1 = max(square, s1);\n    float c2 = max(square, s2);\n    float c3 = max(square, s3);\n    float c4 = max(square, s4);\n    // Union\n    return min(min(min(c1, c2), c3), c4);\n}\n#endif\n\n#ifdef USE_DIAMOND_CROSS\n// diamond_cross\nfloat marker(vec2 P, float size)\n{\n    // Define quadrants\n    float qs = size / 2.0;  // quadrant size\n    float s1 = max(abs(P.x - qs), abs(P.y - qs)) - qs;\n    float s2 = max(abs(P.x + qs), abs(P.y - qs)) - qs;\n    float s3 = max(abs(P.x - qs), abs(P.y + qs)) - qs;\n    float s4 = max(abs(P.x + qs), abs(P.y + qs)) - qs;\n    // Intersect main shape with quadrants (to form cross)\n    float x = SQRT_2 / 2.0 * (P.x * 1.5 - P.y);\n    float y = SQRT_2 / 2.0 * (P.x * 1.5 + P.y);\n    float diamond = max(abs(x), abs(y)) - size / (2.0 * SQRT_2);\n    diamond /= SQRT_2;\n    float c1 = max(diamond, s1);\n    float c2 = max(diamond, s2);\n    float c3 = max(diamond, s3);\n    float c4 = max(diamond, s4);\n    // Union\n    return min(min(min(c1, c2), c3), c4);\n}\n#endif\n\n#ifdef USE_X\n// x\nfloat marker(vec2 P, float size)\n{\n    float circle = length(P) - size / 1.6;\n    float X = min(abs(P.x - P.y), abs(P.x + P.y)) - size / 100.0;  // bit of "width" for aa\n    return max(circle, X);\n}\n#endif\n\n#ifdef USE_CIRCLE_X\n// circle_x\nfloat marker(vec2 P, float size)\n{\n    float x = P.x - P.y;\n    float y = P.x + P.y;\n    // Define quadrants\n    float qs = size / 2.0;  // quadrant size\n    float s1 = max(abs(x - qs), abs(y - qs)) - qs;\n    float s2 = max(abs(x + qs), abs(y - qs)) - qs;\n    float s3 = max(abs(x - qs), abs(y + qs)) - qs;\n    float s4 = max(abs(x + qs), abs(y + qs)) - qs;\n    // Intersect main shape with quadrants (to form cross)\n    float circle = length(P) - size/2.0;\n    float c1 = max(circle, s1);\n    float c2 = max(circle, s2);\n    float c3 = max(circle, s3);\n    float c4 = max(circle, s4);\n    // Union\n    float almost = min(min(min(c1, c2), c3), c4);\n    // In this case, the X is also outside of the main shape\n    float Xmask = length(P) - size / 1.6;  // a circle\n    float X = min(abs(P.x - P.y), abs(P.x + P.y)) - size / 100.0;  // bit of "width" for aa\n    return min(max(X, Xmask), almost);\n}\n#endif\n\n#ifdef USE_SQUARE_X\n// square_x\nfloat marker(vec2 P, float size)\n{\n    float x = P.x - P.y;\n    float y = P.x + P.y;\n    // Define quadrants\n    float qs = size / 2.0;  // quadrant size\n    float s1 = max(abs(x - qs), abs(y - qs)) - qs;\n    float s2 = max(abs(x + qs), abs(y - qs)) - qs;\n    float s3 = max(abs(x - qs), abs(y + qs)) - qs;\n    float s4 = max(abs(x + qs), abs(y + qs)) - qs;\n    // Intersect main shape with quadrants (to form cross)\n    float square = max(abs(P.x), abs(P.y)) - size/2.0;\n    float c1 = max(square, s1);\n    float c2 = max(square, s2);\n    float c3 = max(square, s3);\n    float c4 = max(square, s4);\n    // Union\n    return min(min(min(c1, c2), c3), c4);\n}\n#endif\n\nvec4 outline(float distance, float linewidth, float antialias, vec4 fg_color, vec4 bg_color)\n{\n    vec4 frag_color;\n    float t = linewidth/2.0 - antialias;\n    float signed_distance = distance;\n    float border_distance = abs(signed_distance) - t;\n    float alpha = border_distance/antialias;\n    alpha = exp(-alpha*alpha);\n\n    // If fg alpha is zero, it probably means no outline. To avoid a dark outline\n    // shining through due to aa, we set the fg color to the bg color. Avoid if (i.e. branching).\n    float select = float(bool(fg_color.a));\n    fg_color.rgb = select * fg_color.rgb + (1.0  - select) * bg_color.rgb;\n    // Similarly, if we want a transparent bg\n    select = float(bool(bg_color.a));\n    bg_color.rgb = select * bg_color.rgb + (1.0  - select) * fg_color.rgb;\n\n    if( border_distance < 0.0)\n        frag_color = fg_color;\n    else if( signed_distance < 0.0 ) {\n        frag_color = mix(bg_color, fg_color, sqrt(alpha));\n    } else {\n        if( abs(signed_distance) < (linewidth/2.0 + antialias) ) {\n            frag_color = vec4(fg_color.rgb, fg_color.a * alpha);\n        } else {\n            discard;\n        }\n    }\n    return frag_color;\n}\n\nvoid main()\n{\n    vec2 P = gl_PointCoord.xy - vec2(0.5, 0.5);\n    P = vec2(v_rotation.x*P.x - v_rotation.y*P.y,\n             v_rotation.y*P.x + v_rotation.x*P.y);\n    float point_size = SQRT_2*v_size  + 2.0 * (v_linewidth + 1.5*u_antialias);\n    float distance = marker(P*point_size, v_size);\n    gl_FragColor = outline(distance, v_linewidth, u_antialias, v_fg_color, v_bg_color);\n}\n'},function e(t,r,n,a,i){a();const e=t(287);class o extends e.EllipseOvalView{}n.EllipseView=o,o.__name__="EllipseView";class s extends e.EllipseOval{constructor(e){super(e)}static init_Ellipse(){this.prototype.default_view=o}}n.Ellipse=s,s.__name__="Ellipse",s.init_Ellipse()},function e(t,r,n,a,i){a();const o=t(1),s=t(288),g=o.__importStar(t(107)),l=t(24),m=t(59);class e extends s.CenterRotatableView{_map_data(){"data"==this.model.properties.width.units?this.sw=this.sdist(this.renderer.xscale,this._x,this.width,"center"):this.sw=l.to_screen(this.width),"data"==this.model.properties.height.units?this.sh=this.sdist(this.renderer.yscale,this._y,this.height,"center"):this.sh=l.to_screen(this.height)}_render(a,i,o){const{sx:s,sy:l,sw:c,sh:u,angle:f}=null!=o?o:this;for(const o of i){const i=s[o],e=l[o],t=c[o],r=u[o],n=f.get(o);isNaN(i+e+t+r+n)||(a.beginPath(),a.ellipse(i,e,t/2,r/2,n,0,2*Math.PI),this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(a,o),a.fill()),this.visuals.hatch.doit&&(this.visuals.hatch.set_vectorize(a,o),a.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(a,o),a.stroke()))}}_hit_point(e){let t,r,n,a,i,o,s,l,c;const{sx:u,sy:f}=e,d=this.renderer.xscale.invert(u),h=this.renderer.yscale.invert(f);"data"==this.model.properties.width.units?(t=d-this.max_width,r=d+this.max_width):(o=u-this.max_width,s=u+this.max_width,[t,r]=this.renderer.xscale.r_invert(o,s)),"data"==this.model.properties.height.units?(n=h-this.max_height,a=h+this.max_height):(l=f-this.max_height,c=f+this.max_height,[n,a]=this.renderer.yscale.r_invert(l,c));const p=this.index.indices({x0:t,x1:r,y0:n,y1:a}),v=[];for(const e of p)i=g.point_in_ellipse(u,f,this.angle.get(e),this.sh[e]/2,this.sw[e]/2,this.sx[e],this.sy[e]),i&&v.push(e);return new m.Selection({indices:v})}draw_legend_for_index(e,{x0:t,y0:r,x1:n,y1:a},i){const o=i+1,s=new Array(o);s[i]=(t+n)/2;const l=new Array(o);l[i]=(r+a)/2;const c=this.sw[i]/this.sh[i],u=.8*Math.min(Math.abs(n-t),Math.abs(a-r)),f=new Array(o),d=new Array(o);c>1?(f[i]=u,d[i]=u/c):(f[i]=u*c,d[i]=u),this._render(e,[i],{sx:s,sy:l,sw:f,sh:d,_angle:[0]})}}n.EllipseOvalView=e,e.__name__="EllipseOvalView";class c extends s.CenterRotatable{constructor(e){super(e)}}n.EllipseOval=c,c.__name__="EllipseOval"},function e(t,r,n,a,i){a();const o=t(1),s=t(64),l=t(48),c=o.__importStar(t(18));class e extends s.XYGlyphView{get max_w2(){return"data"==this.model.properties.width.units?this.max_width/2:0}get max_h2(){return"data"==this.model.properties.height.units?this.max_height/2:0}_bounds({x0:e,x1:t,y0:r,y1:n}){const{max_w2:a,max_h2:i}=this;return{x0:e-a,x1:t+a,y0:r-i,y1:n+i}}}n.CenterRotatableView=e,e.__name__="CenterRotatableView";class u extends s.XYGlyph{constructor(e){super(e)}static init_CenterRotatable(){this.mixins([l.LineVector,l.FillVector,l.HatchVector]),this.define(({})=>({angle:[c.AngleSpec,0],width:[c.DistanceSpec,{field:"width"}],height:[c.DistanceSpec,{field:"height"}]}))}}n.CenterRotatable=u,u.__name__="CenterRotatable",u.init_CenterRotatable()},function e(t,r,n,a,i){a();const o=t(1),s=t(290),l=t(24),e=o.__importStar(t(18));class c extends s.BoxView{scenterxy(e){return[(this.sleft[e]+this.sright[e])/2,this.sy[e]]}_lrtb(e){const t=this._left[e],r=this._right[e],n=this._y[e],a=this.height.get(e)/2;return[Math.min(t,r),Math.max(t,r),n+a,n-a]}_map_data(){this.sy=this.renderer.yscale.v_compute(this._y),this.sh=this.sdist(this.renderer.yscale,this._y,this.height,"center"),this.sleft=this.renderer.xscale.v_compute(this._left),this.sright=this.renderer.xscale.v_compute(this._right);const t=this.sy.length;this.stop=new l.ScreenArray(t),this.sbottom=new l.ScreenArray(t);for(let e=0;e<t;e++)this.stop[e]=this.sy[e]-this.sh[e]/2,this.sbottom[e]=this.sy[e]+this.sh[e]/2;this._clamp_viewport()}}n.HBarView=c,c.__name__="HBarView";class u extends s.Box{constructor(e){super(e)}static init_HBar(){this.prototype.default_view=c,this.define(({})=>({left:[e.XCoordinateSpec,{value:0}],y:[e.YCoordinateSpec,{field:"y"}],height:[e.NumberSpec,{value:1}],right:[e.XCoordinateSpec,{field:"right"}]}))}}n.HBar=u,u.__name__="HBar",u.init_HBar()},function e(t,r,n,a,i){a();const o=t(48),s=t(98),l=t(106),c=t(59);class u extends s.GlyphView{get_anchor_point(e,t,r){const n=Math.min(this.sleft[t],this.sright[t]),a=Math.max(this.sright[t],this.sleft[t]),i=Math.min(this.stop[t],this.sbottom[t]),o=Math.max(this.sbottom[t],this.stop[t]);switch(e){case"top_left":return{x:n,y:i};case"top":case"top_center":return{x:(n+a)/2,y:i};case"top_right":return{x:a,y:i};case"bottom_left":return{x:n,y:o};case"bottom":case"bottom_center":return{x:(n+a)/2,y:o};case"bottom_right":return{x:a,y:o};case"left":case"center_left":return{x:n,y:(i+o)/2};case"center":case"center_center":return{x:(n+a)/2,y:(i+o)/2};case"right":case"center_right":return{x:a,y:(i+o)/2}}}_index_data(a){const{min:i,max:o}=Math,{data_size:s}=this;for(let n=0;n<s;n++){const[s,e,t,r]=this._lrtb(n);isNaN(s+e+t+r)||!isFinite(s+e+t+r)?a.add_empty():a.add(i(s,e),i(t,r),o(e,s),o(t,r))}}_render(n,a,i){const{sleft:o,sright:s,stop:l,sbottom:c}=null!=i?i:this;for(const i of a){const a=o[i],e=l[i],t=s[i],r=c[i];function u(){n.beginPath(),n.rect(a,e,t-a,r-e)}isNaN(a+e+t+r)||(this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(n,i),u(),n.fill()),this.visuals.hatch.doit&&(this.visuals.hatch.set_vectorize(n,i),u(),n.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(n,i),u(),n.stroke()))}}_clamp_viewport(){const t=this.renderer.plot_view.frame.bbox.h_range,r=this.renderer.plot_view.frame.bbox.v_range,n=this.stop.length;for(let e=0;e<n;e++)this.stop[e]=Math.max(this.stop[e],r.start),this.sbottom[e]=Math.min(this.sbottom[e],r.end),this.sleft[e]=Math.max(this.sleft[e],t.start),this.sright[e]=Math.min(this.sright[e],t.end)}_hit_rect(e){return this._hit_rect_against_index(e)}_hit_point(e){const{sx:t,sy:r}=e,n=this.renderer.xscale.invert(t),a=this.renderer.yscale.invert(r),i=[...this.index.indices({x0:n,y0:a,x1:n,y1:a})];return new c.Selection({indices:i})}_hit_span(r){const{sx:n,sy:a}=r;let i;if("v"==r.direction){const r=this.renderer.yscale.invert(a),n=this.renderer.plot_view.frame.bbox.h_range,[e,t]=this.renderer.xscale.r_invert(n.start,n.end);i=[...this.index.indices({x0:e,y0:r,x1:t,y1:r})]}else{const r=this.renderer.xscale.invert(n),a=this.renderer.plot_view.frame.bbox.v_range,[e,t]=this.renderer.yscale.r_invert(a.start,a.end);i=[...this.index.indices({x0:r,y0:e,x1:r,y1:t})]}return new c.Selection({indices:i})}draw_legend_for_index(e,t,r){l.generic_area_vector_legend(this.visuals,e,t,r)}}n.BoxView=u,u.__name__="BoxView";class e extends s.Glyph{constructor(e){super(e)}static init_Box(){this.mixins([o.LineVector,o.FillVector,o.HatchVector])}}n.Box=e,e.__name__="Box",e.init_Box()},function e(t,r,n,a,i){a();const o=t(1),s=t(98),l=o.__importStar(t(107)),c=o.__importStar(t(18)),u=t(48),f=t(20),e=t(65),d=t(106),h=t(59);class p extends s.GlyphView{scenterxy(e){return[this.sx[e],this.sy[e]]}_set_data(){const{orientation:e,size:r,aspect_scale:n}=this.model,{q:a,r:i}=this,o=this.q.length;this._x=new Float64Array(o),this._y=new Float64Array(o);const{_x:s,_y:l}=this,c=Math.sqrt(3);if("pointytop"==e)for(let t=0;t<o;t++){const o=a.get(t),e=i.get(t)/2;s[t]=r*c*(o+e)/n,l[t]=-3*r*e}else for(let t=0;t<o;t++){const o=a.get(t)/2,e=i.get(t);s[t]=3*r*o,l[t]=-r*c*(e+o)*n}}_project_data(){e.inplace.project_xy(this._x,this._y)}_index_data(r){let n=this.model.size,a=Math.sqrt(3)*n/2;"flattop"==this.model.orientation?([a,n]=[n,a],n*=this.model.aspect_scale):a/=this.model.aspect_scale;const{data_size:i}=this;for(let t=0;t<i;t++){const i=this._x[t],e=this._y[t];isNaN(i+e)||!isFinite(i+e)?r.add_empty():r.add(i-a,e-n,i+a,e+n)}}map_data(){[this.sx,this.sy]=this.renderer.coordinates.map_to_screen(this._x,this._y),[this.svx,this.svy]=this._get_unscaled_vertices()}_get_unscaled_vertices(){const i=this.model.size,o=this.model.aspect_scale;if("pointytop"==this.model.orientation){const e=this.renderer.yscale,t=this.renderer.xscale,r=Math.abs(e.compute(0)-e.compute(i)),n=Math.sqrt(3)/2*Math.abs(t.compute(0)-t.compute(i))/o,a=r/2;return[[0,-n,-n,0,n,n],[r,a,-a,-r,-a,a]]}{const e=this.renderer.xscale,t=this.renderer.yscale,r=Math.abs(e.compute(0)-e.compute(i)),n=Math.sqrt(3)/2*Math.abs(t.compute(0)-t.compute(i))*o,a=r/2;return[[r,a,-a,-r,-a,a],[0,-n,-n,0,n,n]]}}_render(r,n,a){const{sx:i,sy:o,svx:s,svy:l,scale:c}=null!=a?a:this;for(const a of n){const n=i[a],e=o[a],t=c.get(a);if(!isNaN(n+e+t)){r.translate(n,e),r.beginPath();for(let e=0;e<6;e++)r.lineTo(s[e]*t,l[e]*t);r.closePath(),r.translate(-n,-e),this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(r,a),r.fill()),this.visuals.hatch.doit&&(this.visuals.hatch.set_vectorize(r,a),r.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(r,a),r.stroke())}}}_hit_point(e){const{sx:t,sy:r}=e,n=this.renderer.xscale.invert(t),a=this.renderer.yscale.invert(r),i=this.index.indices({x0:n,y0:a,x1:n,y1:a}),o=[];for(const e of i)l.point_in_poly(t-this.sx[e],r-this.sy[e],this.svx,this.svy)&&o.push(e);return new h.Selection({indices:o})}_hit_span(r){const{sx:n,sy:a}=r;let i;if("v"==r.direction){const r=this.renderer.yscale.invert(a),n=this.renderer.plot_view.frame.bbox.h_range,[e,t]=this.renderer.xscale.r_invert(n.start,n.end);i=[...this.index.indices({x0:e,y0:r,x1:t,y1:r})]}else{const r=this.renderer.xscale.invert(n),a=this.renderer.plot_view.frame.bbox.v_range,[e,t]=this.renderer.yscale.r_invert(a.start,a.end);i=[...this.index.indices({x0:r,y0:e,x1:r,y1:t})]}return new h.Selection({indices:i})}_hit_rect(e){const{sx0:t,sx1:r,sy0:n,sy1:a}=e,[i,o]=this.renderer.xscale.r_invert(t,r),[s,l]=this.renderer.yscale.r_invert(n,a),c=[...this.index.indices({x0:i,x1:o,y0:s,y1:l})];return new h.Selection({indices:c})}draw_legend_for_index(e,t,r){d.generic_area_vector_legend(this.visuals,e,t,r)}}n.HexTileView=p,p.__name__="HexTileView";class v extends s.Glyph{constructor(e){super(e)}static init_HexTile(){this.prototype.default_view=p,this.mixins([u.LineVector,u.FillVector,u.HatchVector]),this.define(({Number:e})=>({r:[c.NumberSpec,{field:"r"}],q:[c.NumberSpec,{field:"q"}],scale:[c.NumberSpec,1],size:[e,1],aspect_scale:[e,1],orientation:[f.HexTileOrientation,"pointytop"]})),this.override({line_color:null})}}n.HexTile=v,v.__name__="HexTile",v.init_HexTile()},function e(t,r,n,e,a){e();const i=t(293),o=t(203),s=t(214);class l extends i.ImageBaseView{connect_signals(){super.connect_signals(),this.connect(this.model.color_mapper.change,()=>this._update_image())}_update_image(){null!=this.image_data&&(this._set_data(null),this.renderer.request_render())}_flat_img_to_buf8(e){return this.model.color_mapper.rgba_mapper.v_compute(e)}}n.ImageView=l,l.__name__="ImageView";class c extends i.ImageBase{constructor(e){super(e)}static init_Image(){this.prototype.default_view=l,this.define(({Ref:e})=>({color_mapper:[e(o.ColorMapper),()=>new s.LinearColorMapper({palette:["#000000","#252525","#525252","#737373","#969696","#bdbdbd","#d9d9d9","#f0f0f0","#ffffff"]})]}))}}n.Image=c,c.__name__="Image",c.init_Image()},function r(e,t,n,a,i){a();const o=e(1),s=e(64),l=e(24),r=o.__importStar(e(18)),c=e(59),u=e(9),f=e(29),d=e(11);class h extends s.XYGlyphView{connect_signals(){super.connect_signals(),this.connect(this.model.properties.global_alpha.change,()=>this.renderer.request_render())}_render(a,i,o){const{image_data:s,sx:l,sy:c,sw:u,sh:f}=null!=o?o:this,d=a.getImageSmoothingEnabled();a.setImageSmoothingEnabled(!1),a.globalAlpha=this.model.global_alpha;for(const o of i){const i=s[o],d=l[o],e=c[o],t=u[o],r=f[o];if(null==i||isNaN(d+e+t+r))continue;const n=e;a.translate(0,n),a.scale(1,-1),a.translate(0,-n),a.drawImage(i,0|d,0|e,t,r),a.translate(0,n),a.scale(1,-1),a.translate(0,-n)}a.setImageSmoothingEnabled(d)}_set_data(a){this._set_width_heigh_data();for(let n=0,e=this.image.length;n<e;n++){if(null!=a&&a.indexOf(n)<0)continue;const e=this.image.get(n);let t;f.is_NDArray(e)?(d.assert(2==e.dimension,"expected a 2D array"),t=e,this._height[n]=e.shape[0],this._width[n]=e.shape[1]):(t=u.concat(e),this._height[n]=e.length,this._width[n]=e[0].length);const r=this._flat_img_to_buf8(t);this._set_image_data_from_buffer(n,r)}}_index_data(a){const{data_size:i}=this;for(let n=0;n<i;n++){const[i,e,t,r]=this._lrtb(n);isNaN(i+e+t+r)||!isFinite(i+e+t+r)?a.add_empty():a.add(i,r,e,t)}}_lrtb(e){const t=this.dw.get(e),r=this.dh.get(e),n=this.renderer.xscale.source_range,a=this._x[e],i=n.is_reversed?a-t:a+t,o=this.renderer.yscale.source_range,s=this._y[e],l=o.is_reversed?s-r:s+r,[c,u]=a<i?[a,i]:[i,a],[f,d]=s<l?[s,l]:[l,s];return[c,u,d,f]}_set_width_heigh_data(){null!=this.image_data&&this.image_data.length==this.image.length||(this.image_data=new Array(this.image.length)),null!=this._width&&this._width.length==this.image.length||(this._width=new Uint32Array(this.image.length)),null!=this._height&&this._height.length==this.image.length||(this._height=new Uint32Array(this.image.length))}_get_or_create_canvas(e){const t=this.image_data[e];if(null!=t&&t.width==this._width[e]&&t.height==this._height[e])return t;{const t=document.createElement("canvas");return t.width=this._width[e],t.height=this._height[e],t}}_set_image_data_from_buffer(e,t){const r=this._get_or_create_canvas(e),n=r.getContext("2d"),a=n.getImageData(0,0,this._width[e],this._height[e]);a.data.set(t),n.putImageData(a,0,0),this.image_data[e]=r}_map_data(){"data"==this.model.properties.dw.units?this.sw=this.sdist(this.renderer.xscale,this._x,this.dw,"edge",this.model.dilate):this.sw=l.to_screen(this.dw),"data"==this.model.properties.dh.units?this.sh=this.sdist(this.renderer.yscale,this._y,this.dh,"edge",this.model.dilate):this.sh=l.to_screen(this.dh)}_image_index(e,t,r){const[n,a,i,o]=this._lrtb(e),s=this._width[e],l=this._height[e],c=(a-n)/s,u=(i-o)/l;let f=Math.floor((t-n)/c),d=Math.floor((r-o)/u);return this.renderer.xscale.source_range.is_reversed&&(f=s-f-1),this.renderer.yscale.source_range.is_reversed&&(d=l-d-1),{index:e,dim1:f,dim2:d,flat_index:d*s+f}}_hit_point(e){const{sx:t,sy:r}=e,n=this.renderer.xscale.invert(t),a=this.renderer.yscale.invert(r),i=this.index.indices({x0:n,x1:n,y0:a,y1:a}),o=new c.Selection;for(const e of i)t!=1/0&&r!=1/0&&o.image_indices.push(this._image_index(e,n,a));return o}}n.ImageBaseView=h,h.__name__="ImageBaseView";class p extends s.XYGlyph{constructor(e){super(e)}static init_ImageBase(){this.define(({Boolean:e,Alpha:t})=>({image:[r.NDArraySpec,{field:"image"}],dw:[r.DistanceSpec,{field:"dw"}],dh:[r.DistanceSpec,{field:"dh"}],dilate:[e,!1],global_alpha:[t,1]}))}}n.ImageBase=p,p.__name__="ImageBase",p.init_ImageBase()},function e(t,r,n,e,a){e();const i=t(293),o=t(8);class s extends i.ImageBaseView{_flat_img_to_buf8(e){let t;return t=o.isArray(e)?new Uint32Array(e):e,new Uint8ClampedArray(t.buffer)}}n.ImageRGBAView=s,s.__name__="ImageRGBAView";class l extends i.ImageBase{constructor(e){super(e)}static init_ImageRGBA(){this.prototype.default_view=s}}n.ImageRGBA=l,l.__name__="ImageRGBA",l.init_ImageRGBA()},function n(e,t,r,a,i){a();const o=e(1),s=e(64),g=e(24),l=e(20),n=o.__importStar(e(18)),m=e(12),_=e(296);class c extends s.XYGlyphView{constructor(){super(...arguments),this._images_rendered=!1,this._set_data_iteration=0}connect_signals(){super.connect_signals(),this.connect(this.model.properties.global_alpha.change,()=>this.renderer.request_render())}_index_data(t){const{data_size:r}=this;for(let e=0;e<r;e++)t.add_empty()}_set_data(){this._set_data_iteration++;const e=this.url.length;this.image=new Array(e);const{retry_attempts:r,retry_timeout:n}=this.model,{_set_data_iteration:a}=this;for(let t=0;t<e;t++){const e=this.url.get(t);e&&new _.ImageLoader(e,{loaded:e=>{this._set_data_iteration==a&&(this.image[t]=e,this.renderer.request_render())},attempts:r+1,timeout:n})}const t="data"==this.model.properties.w.units,i="data"==this.model.properties.h.units,o=this._x.length,s=new g.ScreenArray(t?2*o:o),l=new g.ScreenArray(i?2*o:o),{anchor:c}=this.model;function u(e,t){switch(c){case"top_left":case"bottom_left":case"left":case"center_left":return[e,e+t];case"top":case"top_center":case"bottom":case"bottom_center":case"center":case"center_center":return[e-t/2,e+t/2];case"top_right":case"bottom_right":case"right":case"center_right":return[e-t,e]}}function f(e,t){switch(c){case"top_left":case"top":case"top_center":case"top_right":return[e,e-t];case"bottom_left":case"bottom":case"bottom_center":case"bottom_right":return[e+t,e];case"left":case"center_left":case"center":case"center_center":case"right":case"center_right":return[e+t/2,e-t/2]}}if(t)for(let e=0;e<o;e++)[s[e],s[o+e]]=u(this._x[e],this.w.get(e));else s.set(this._x,0);if(i)for(let e=0;e<o;e++)[l[e],l[o+e]]=f(this._y[e],this.h.get(e));else l.set(this._y,0);const[d,h]=m.minmax(s),[p,v]=m.minmax(l);this._bounds_rect={x0:d,x1:h,y0:p,y1:v}}has_finished(){return super.has_finished()&&1==this._images_rendered}_map_data(){"data"==this.model.properties.w.units?this.sw=this.sdist(this.renderer.xscale,this._x,this.w,"edge",this.model.dilate):this.sw=g.to_screen(this.w),"data"==this.model.properties.h.units?this.sh=this.sdist(this.renderer.yscale,this._y,this.h,"edge",this.model.dilate):this.sh=g.to_screen(this.h)}_render(e,t,r){const{image:n,sx:a,sy:i,sw:o,sh:s,angle:l}=null!=r?r:this,{frame:c}=this.renderer.plot_view;e.rect(c.bbox.left+1,c.bbox.top+1,c.bbox.width-2,c.bbox.height-2),e.clip();let u=!0;for(const r of t){if(isNaN(a[r]+i[r]+l.get(r)))continue;const t=n[r];null!=t?this._render_image(e,r,t,a,i,o,s,l):u=!1}u&&!this._images_rendered&&(this._images_rendered=!0,this.notify_finished())}_final_sx_sy(e,t,r,n,a){switch(e){case"top_left":return[t,r];case"top":case"top_center":return[t-n/2,r];case"top_right":return[t-n,r];case"right":case"center_right":return[t-n,r-a/2];case"bottom_right":return[t-n,r-a];case"bottom":case"bottom_center":return[t-n/2,r-a];case"bottom_left":return[t,r-a];case"left":case"center_left":return[t,r-a/2];case"center":case"center_center":return[t-n/2,r-a/2]}}_render_image(e,t,r,n,a,i,o,s){isNaN(i[t])&&(i[t]=r.width),isNaN(o[t])&&(o[t]=r.height);const l=i[t],c=o[t],{anchor:u}=this.model,[f,d]=this._final_sx_sy(u,n[t],a[t],l,c),h=s.get(t);e.save(),e.globalAlpha=this.model.global_alpha;const p=l/2,v=c/2;h?(e.translate(f,d),e.translate(p,v),e.rotate(h),e.translate(-p,-v),e.drawImage(r,0,0,l,c),e.translate(p,v),e.rotate(-h),e.translate(-p,-v),e.translate(-f,-d)):e.drawImage(r,f,d,l,c),e.restore()}bounds(){return this._bounds_rect}}r.ImageURLView=c,c.__name__="ImageURLView";class u extends s.XYGlyph{constructor(e){super(e)}static init_ImageURL(){this.prototype.default_view=c,this.define(({Boolean:e,Int:t,Alpha:r})=>({url:[n.StringSpec,{field:"url"}],anchor:[l.Anchor,"top_left"],global_alpha:[r,1],angle:[n.AngleSpec,0],w:[n.NullDistanceSpec,null],h:[n.NullDistanceSpec,null],dilate:[e,!1],retry_attempts:[t,0],retry_timeout:[t,0]}))}}r.ImageURL=u,u.__name__="ImageURL",u.init_ImageURL()},function e(t,r,n,a,i){a();const s=t(19);class o{constructor(n,a={}){this._image=new Image,this._finished=!1;const{attempts:i=1,timeout:o=1}=a;this.promise=new Promise((e,t)=>{this._image.crossOrigin="anonymous";let r=0;this._image.onerror=()=>{if(++r==i){const o=`unable to load ${n} image after ${i} attempts`;if(s.logger.warn(o),null==this._image.crossOrigin)return void(null!=a.failed&&a.failed());s.logger.warn(`attempting to load ${n} without a cross origin policy`),this._image.crossOrigin=null,r=0}setTimeout(()=>this._image.src=n,o)},this._image.onload=()=>{this._finished=!0,null!=a.loaded&&a.loaded(this._image),e(this._image)},this._image.src=n})}get finished(){return this._finished}get image(){if(this._finished)return this._image;throw new Error("not loaded yet")}}n.ImageLoader=o,o.__name__="ImageLoader"},function h(e,t,r,n,a){n();const i=e(1),o=e(101),s=e(98),l=e(106),h=e(12),c=e(12),u=e(48),p=i.__importStar(e(107)),f=i.__importStar(e(18)),v=e(59),d=e(11);class g extends s.GlyphView{_project_data(){}_index_data(c){const{min:u,max:f}=Math,{data_size:d}=this;for(let e=0;e<d;e++){const d=this._xs[e],a=this._ys[e];if(0==d.length||0==a.length){c.add_empty();continue}let i=1/0,o=-1/0,s=1/0,l=-1/0;for(let e=0,t=d.length;e<t;e++){const r=d[e][0],n=a[e][0];if(0!=r.length&&0!=n.length){const[c,d]=h.minmax(r),[e,t]=h.minmax(n);i=u(i,c),o=f(o,d),s=u(s,e),l=f(l,t)}}isFinite(i+o+s+l)?c.add(i,s,o,l):c.add_empty()}this._hole_index=this._index_hole_data()}_index_hole_data(){const{min:u,max:f}=Math,{data_size:n}=this,d=new o.SpatialIndex(n);for(let e=0;e<n;e++){const n=this._xs[e],r=this._ys[e];if(0==n.length||0==r.length){d.add_empty();continue}let o=1/0,s=-1/0,l=1/0,c=-1/0;for(let e=0,t=n.length;e<t;e++){const a=n[e],i=r[e];if(a.length>1&&i.length>1)for(let n=1,e=a.length;n<e;n++){const[d,e]=h.minmax(a[n]),[t,r]=h.minmax(i[n]);o=u(o,d),s=f(s,e),l=u(l,t),c=f(c,r)}}isFinite(o+s+l+c)?d.add(o,l,s,c):d.add_empty()}return d.finish(),d}_mask_data(){const{x_range:e,y_range:t}=this.renderer.plot_view.frame;return this.index.indices({x0:e.min,x1:e.max,y0:t.min,y1:t.max})}_inner_loop(i,o,s){i.beginPath();for(let a=0,e=o.length;a<e;a++)for(let e=0,t=o[a].length;e<t;e++){const r=o[a][e],n=s[a][e];for(let e=0,t=r.length;e<t;e++)0!=e?i.lineTo(r[e],n[e]):i.moveTo(r[e],n[e]);i.closePath()}}_render(n,a,i){if(this.visuals.fill.doit||this.visuals.line.doit){const{sxs:t,sys:r}=null!=i?i:this;for(const i of a){const a=t[i],e=r[i];this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(n,i),this._inner_loop(n,a,e),n.fill("evenodd")),this.visuals.hatch.doit&&(this.visuals.hatch.set_vectorize(n,i),this._inner_loop(n,a,e),n.fill("evenodd")),this.visuals.line.doit&&(this.visuals.line.set_vectorize(n,i),this._inner_loop(n,a,e),n.stroke())}}}_hit_rect(e){const{sx0:a,sx1:i,sy0:t,sy1:r}=e,o=[a,i,i,a],s=[t,t,r,r],[l,c]=this.renderer.xscale.r_invert(a,i),[n,u]=this.renderer.yscale.r_invert(t,r),f=this.index.indices({x0:l,x1:c,y0:n,y1:u}),d=[];for(const e of f){const a=this.sxs[e],i=this.sys[e];let n=!0;for(let r=0,e=a.length;r<e;r++){for(let e=0,t=a[r][0].length;e<t;e++){const l=a[r][0][e],c=i[r][0][e];if(!p.point_in_poly(l,c,o,s)){n=!1;break}}if(!n)break}n&&d.push(e)}return new v.Selection({indices:d})}_hit_point(t){const{sx:a,sy:i}=t,o=this.renderer.xscale.invert(a),s=this.renderer.yscale.invert(i),e=this.index.indices({x0:o,y0:s,x1:o,y1:s}),r=this._hole_index.indices({x0:o,y0:s,x1:o,y1:s}),l=[];for(const t of e){const o=this.sxs[t],s=this.sys[t];for(let n=0,e=o.length;n<e;n++){const e=o[n].length;if(p.point_in_poly(a,i,o[n][0],s[n][0]))if(1==e)l.push(t);else if(r.get(t)){if(e>1){let r=!1;for(let t=1;t<e;t++){const l=o[n][t],e=s[n][t];if(p.point_in_poly(a,i,l,e)){r=!0;break}}r||l.push(t)}}else l.push(t)}}return new v.Selection({indices:l})}_get_snap_coord(e){return c.sum(e)/e.length}scenterxy(e,a,i){if(1==this.sxs[e].length){return[this._get_snap_coord(this.sxs[e][0][0]),this._get_snap_coord(this.sys[e][0][0])]}{const r=this.sxs[e],n=this.sys[e];for(let e=0,t=r.length;e<t;e++)if(p.point_in_poly(a,i,r[e][0],n[e][0])){return[this._get_snap_coord(r[e][0]),this._get_snap_coord(n[e][0])]}}d.unreachable()}map_data(){const a=this._xs.length;this.sxs=new Array(a),this.sys=new Array(a);for(let n=0;n<a;n++){const a=this._xs[n].length;this.sxs[n]=new Array(a),this.sys[n]=new Array(a);for(let r=0;r<a;r++){const a=this._xs[n][r].length;this.sxs[n][r]=new Array(a),this.sys[n][r]=new Array(a);for(let t=0;t<a;t++){const[a,e]=this.renderer.coordinates.map_to_screen(this._xs[n][r][t],this._ys[n][r][t]);this.sxs[n][r][t]=a,this.sys[n][r][t]=e}}}}draw_legend_for_index(e,t,r){l.generic_area_vector_legend(this.visuals,e,t,r)}}r.MultiPolygonsView=g,g.__name__="MultiPolygonsView";class m extends s.Glyph{constructor(e){super(e)}static init_MultiPolygons(){this.prototype.default_view=g,this.define(({})=>({xs:[f.XCoordinateSeqSeqSeqSpec,{field:"xs"}],ys:[f.YCoordinateSeqSeqSeqSpec,{field:"ys"}]})),this.mixins([u.LineVector,u.FillVector,u.HatchVector])}}r.MultiPolygons=m,m.__name__="MultiPolygons",m.init_MultiPolygons()},function e(t,r,n,a,i){a();const e=t(287),o=t(12);class s extends e.EllipseOvalView{_map_data(){super._map_data(),o.mul(this.sw,.75)}}n.OvalView=s,s.__name__="OvalView";class l extends e.EllipseOval{constructor(e){super(e)}static init_Oval(){this.prototype.default_view=s}}n.Oval=l,l.__name__="Oval",l.init_Oval()},function e(t,r,n,a,i){a();const o=t(1),e=t(290),s=o.__importStar(t(18));class l extends e.BoxView{scenterxy(e){return[this.sleft[e]/2+this.sright[e]/2,this.stop[e]/2+this.sbottom[e]/2]}_lrtb(e){return[this._left[e],this._right[e],this._top[e],this._bottom[e]]}}n.QuadView=l,l.__name__="QuadView";class c extends e.Box{constructor(e){super(e)}static init_Quad(){this.prototype.default_view=l,this.define(({})=>({right:[s.XCoordinateSpec,{field:"right"}],bottom:[s.YCoordinateSpec,{field:"bottom"}],left:[s.XCoordinateSpec,{field:"left"}],top:[s.YCoordinateSpec,{field:"top"}]}))}}n.Quad=c,c.__name__="Quad",c.init_Quad()},function n(e,t,r,a,i){a();const o=e(1),s=e(48),l=e(65),c=e(98),n=e(106),u=o.__importStar(e(18));function p(r,n,a){if(n==(r+a)/2)return[r,a];{const e=(r-n)/(r-2*n+a),t=r*(1-e)**2+2*n*(1-e)*e+a*e**2;return[Math.min(r,a,t),Math.max(r,a,t)]}}class f extends c.GlyphView{_project_data(){l.inplace.project_xy(this._x0,this._y0),l.inplace.project_xy(this._x1,this._y1)}_index_data(i){const{_x0:o,_x1:s,_y0:l,_y1:c,_cx:u,_cy:f,data_size:d}=this;for(let a=0;a<d;a++){const d=o[a],e=s[a],t=l[a],r=c[a],n=u[a],h=f[a];if(isNaN(d+e+t+r+n+h))i.add_empty();else{const[o,s]=p(d,n,e),[l,c]=p(t,h,r);i.add(o,l,s,c)}}}_render(f,d,h){if(this.visuals.line.doit){const{sx0:i,sy0:o,sx1:s,sy1:l,scx:c,scy:u}=null!=h?h:this;for(const h of d){const d=i[h],e=o[h],t=s[h],r=l[h],n=c[h],a=u[h];isNaN(d+e+t+r+n+a)||(f.beginPath(),f.moveTo(d,e),f.quadraticCurveTo(n,a,t,r),this.visuals.line.set_vectorize(f,h),f.stroke())}}}draw_legend_for_index(e,t,r){n.generic_line_vector_legend(this.visuals,e,t,r)}scenterxy(){throw new Error(`${this}.scenterxy() is not implemented`)}}r.QuadraticView=f,f.__name__="QuadraticView";class d extends c.Glyph{constructor(e){super(e)}static init_Quadratic(){this.prototype.default_view=f,this.define(({})=>({x0:[u.XCoordinateSpec,{field:"x0"}],y0:[u.YCoordinateSpec,{field:"y0"}],x1:[u.XCoordinateSpec,{field:"x1"}],y1:[u.YCoordinateSpec,{field:"y1"}],cx:[u.XCoordinateSpec,{field:"cx"}],cy:[u.YCoordinateSpec,{field:"cy"}]})),this.mixins(s.LineVector)}}r.Quadratic=d,d.__name__="Quadratic",d.init_Quadratic()},function e(t,r,n,a,i){a();const o=t(1),s=t(64),l=t(106),c=t(48),u=t(24),e=o.__importStar(t(18));class f extends s.XYGlyphView{_map_data(){"data"==this.model.properties.length.units?this.slength=this.sdist(this.renderer.xscale,this._x,this.length):this.slength=u.to_screen(this.length);const{width:e,height:t}=this.renderer.plot_view.frame.bbox,r=2*(e+t),{slength:n}=this;for(let e=0,t=n.length;e<t;e++)0==n[e]&&(n[e]=r)}_render(n,a,i){const{sx:o,sy:s,slength:l,angle:c}=null!=i?i:this;if(this.visuals.line.doit)for(const i of a){const a=o[i],e=s[i],t=c.get(i),r=l[i];isNaN(a+e+t+r)||(n.translate(a,e),n.rotate(t),n.beginPath(),n.moveTo(0,0),n.lineTo(r,0),this.visuals.line.set_vectorize(n,i),n.stroke(),n.rotate(-t),n.translate(-a,-e))}}draw_legend_for_index(e,t,r){l.generic_line_vector_legend(this.visuals,e,t,r)}}n.RayView=f,f.__name__="RayView";class d extends s.XYGlyph{constructor(e){super(e)}static init_Ray(){this.prototype.default_view=f,this.mixins(c.LineVector),this.define(({})=>({length:[e.DistanceSpec,0],angle:[e.AngleSpec,0]}))}}n.Ray=d,d.__name__="Ray",d.init_Ray()},function e(t,r,n,a,i){a();const o=t(288),s=t(106),m=t(24),_=t(12),y=t(59);class e extends o.CenterRotatableView{_map_data(){if("data"==this.model.properties.width.units)[this.sw,this.sx0]=this._map_dist_corner_for_data_side_length(this._x,this.width,this.renderer.xscale);else{this.sw=m.to_screen(this.width);const t=this.sx.length;this.sx0=new m.ScreenArray(t);for(let e=0;e<t;e++)this.sx0[e]=this.sx[e]-this.sw[e]/2}if("data"==this.model.properties.height.units)[this.sh,this.sy1]=this._map_dist_corner_for_data_side_length(this._y,this.height,this.renderer.yscale);else{this.sh=m.to_screen(this.height);const t=this.sy.length;this.sy1=new m.ScreenArray(t);for(let e=0;e<t;e++)this.sy1[e]=this.sy[e]-this.sh[e]/2}const t=this.sw.length;this.ssemi_diag=new m.ScreenArray(t);for(let e=0;e<t;e++)this.ssemi_diag[e]=Math.sqrt(this.sw[e]/2*this.sw[e]/2+this.sh[e]/2*this.sh[e]/2)}_render(r,n,a){const{sx:i,sy:o,sx0:s,sy1:l,sw:c,sh:u,angle:f}=null!=a?a:this;for(const a of n){const n=i[a],e=o[a],t=s[a],d=l[a],h=c[a],p=u[a],v=f.get(a);isNaN(n+e+t+d+h+p+v)||0!=h&&0!=p&&(r.beginPath(),v?(r.translate(n,e),r.rotate(v),r.rect(-h/2,-p/2,h,p),r.rotate(-v),r.translate(-n,-e)):r.rect(t,d,h,p),this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(r,a),r.fill()),this.visuals.hatch.doit&&(this.visuals.hatch.set_vectorize(r,a),r.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(r,a),r.stroke()))}}_hit_rect(e){return this._hit_rect_against_index(e)}_hit_point(e){let{sx:t,sy:r}=e;const n=this.renderer.xscale.invert(t),a=this.renderer.yscale.invert(r),i=this.sx0.length,o=new m.ScreenArray(i);for(let e=0;e<i;e++)o[e]=this.sx0[e]+this.sw[e]/2;const s=new m.ScreenArray(i);for(let e=0;e<i;e++)s[e]=this.sy1[e]+this.sh[e]/2;const l=_.max(this._ddist(0,o,this.ssemi_diag)),c=_.max(this._ddist(1,s,this.ssemi_diag)),u=n-l,f=n+l,d=a-c,h=a+c;let p,v;const g=[];for(const e of this.index.indices({x0:u,x1:f,y0:d,y1:h})){const n=this.angle.get(e);if(n){const a=Math.sin(-n),i=Math.cos(-n),o=i*(t-this.sx[e])-a*(r-this.sy[e])+this.sx[e],m=a*(t-this.sx[e])+i*(r-this.sy[e])+this.sy[e];t=o,r=m,p=Math.abs(this.sx[e]-t)<=this.sw[e]/2,v=Math.abs(this.sy[e]-r)<=this.sh[e]/2}else{const n=t-this.sx0[e],a=r-this.sy1[e];p=0<=n&&n<=this.sw[e],v=0<=a&&a<=this.sh[e]}p&&v&&g.push(e)}return new y.Selection({indices:g})}_map_dist_corner_for_data_side_length(t,r,n){const a=t.length,i=new Float64Array(a),o=new Float64Array(a);for(let e=0;e<a;e++){const a=t[e],s=r.get(e)/2;i[e]=a-s,o[e]=a+s}const s=n.v_compute(i),l=n.v_compute(o),e=this.sdist(n,i,r,"edge",this.model.dilate);let c=s;for(let e=0;e<a;e++){const r=s[e],n=l[e];if(!isNaN(r+n)&&r!=n){c=r<n?s:l;break}}return[e,c]}_ddist(e,t,r){const n=m.infer_type(t,r),a=0==e?this.renderer.xscale:this.renderer.yscale,i=t,o=i.length,s=new n(o);for(let e=0;e<o;e++)s[e]=i[e]+r[e];const l=a.v_invert(i),c=a.v_invert(s),u=l.length,f=new n(u);for(let e=0;e<u;e++)f[e]=Math.abs(c[e]-l[e]);return f}draw_legend_for_index(e,t,r){s.generic_area_vector_legend(this.visuals,e,t,r)}}n.RectView=e,e.__name__="RectView";class l extends o.CenterRotatable{constructor(e){super(e)}static init_Rect(){this.prototype.default_view=e,this.define(({Boolean:e})=>({dilate:[e,!1]}))}}n.Rect=l,l.__name__="Rect",l.init_Rect()},function h(e,t,r,n,a){n();const i=e(1),o=e(304),h=e(305),s=e(283),c=i.__importStar(e(18));class l extends o.MarkerView{_init_webgl(){const{webgl:r}=this.renderer.plot_view.canvas_view;if(null!=r){const e=new Set(this.marker);if(1==e.size){const[t]=[...e];if(s.MarkerGL.is_supported(t)){const{glglyph:e}=this;if(null==e||e.marker_type!=t)return void(this.glglyph=new s.MarkerGL(r.gl,this,t))}}}delete this.glglyph}_set_data(e){super._set_data(e),this._init_webgl()}_render(n,a,i){const{sx:o,sy:s,size:l,angle:c,marker:u}=null!=i?i:this;for(const i of a){const a=o[i],e=s[i],t=l.get(i),r=c.get(i),f=u.get(i);if(isNaN(a+e+t+r)||null==f)continue;const d=t/2;n.beginPath(),n.translate(a,e),r&&n.rotate(r),h.marker_funcs[f](n,i,d,this.visuals),r&&n.rotate(-r),n.translate(-a,-e)}}draw_legend_for_index(e,{x0:t,x1:r,y0:n,y1:a},i){const o=i+1,s=this.marker.get(i),l=Object.assign(Object.assign({},this._get_legend_args({x0:t,x1:r,y0:n,y1:a},i)),{marker:new c.UniformScalar(s,o)});this._render(e,[i],l)}}r.ScatterView=l,l.__name__="ScatterView";class u extends o.Marker{constructor(e){super(e)}static init_Scatter(){this.prototype.default_view=l,this.define(()=>({marker:[c.MarkerSpec,{value:"circle"}]}))}}r.Scatter=u,u.__name__="Scatter",u.init_Scatter()},function o(e,t,r,n,a){n();const i=e(1),s=e(64),l=e(48),o=i.__importStar(e(107)),c=i.__importStar(e(18)),u=e(9),v=e(59);class f extends s.XYGlyphView{_render(a,i,o){const{sx:s,sy:l,size:c,angle:u}=null!=o?o:this;for(const o of i){const i=s[o],e=l[o],t=c.get(o),r=u.get(o);if(isNaN(i+e+t+r))continue;const n=t/2;a.beginPath(),a.translate(i,e),r&&a.rotate(r),this._render_one(a,o,n,this.visuals),r&&a.rotate(-r),a.translate(-i,-e)}}_mask_data(){const{x_target:e,y_target:t}=this.renderer.plot_view.frame,r=e.widen(this.max_size).map(e=>this.renderer.xscale.invert(e)),n=t.widen(this.max_size).map(e=>this.renderer.yscale.invert(e));return this.index.indices({x0:r.start,x1:r.end,y0:n.start,y1:n.end})}_hit_point(e){const{sx:t,sy:r}=e,{max_size:n}=this,{hit_dilation:a}=this.model,i=t-n*a,o=t+n*a,[s,l]=this.renderer.xscale.r_invert(i,o),c=r-n*a,u=r+n*a,[f,d]=this.renderer.yscale.r_invert(c,u),h=this.index.indices({x0:s,x1:l,y0:f,y1:d}),p=[];for(const e of h){const n=this.size.get(e)/2*a;Math.abs(this.sx[e]-t)<=n&&Math.abs(this.sy[e]-r)<=n&&p.push(e)}return new v.Selection({indices:p})}_hit_span(e){const{sx:t,sy:r}=e,n=this.bounds(),a=this.max_size/2;let i,o,s,l;if("h"==e.direction){s=n.y0,l=n.y1;const e=t-a,r=t+a;[i,o]=this.renderer.xscale.r_invert(e,r)}else{i=n.x0,o=n.x1;const e=r-a,t=r+a;[s,l]=this.renderer.yscale.r_invert(e,t)}const c=[...this.index.indices({x0:i,x1:o,y0:s,y1:l})];return new v.Selection({indices:c})}_hit_rect(e){const{sx0:t,sx1:r,sy0:n,sy1:a}=e,[i,o]=this.renderer.xscale.r_invert(t,r),[s,l]=this.renderer.yscale.r_invert(n,a),c=[...this.index.indices({x0:i,x1:o,y0:s,y1:l})];return new v.Selection({indices:c})}_hit_poly(e){const{sx:r,sy:n}=e,a=u.range(0,this.sx.length),i=[];for(let t=0,e=a.length;t<e;t++){const e=a[t];o.point_in_poly(this.sx[t],this.sy[t],r,n)&&i.push(e)}return new v.Selection({indices:i})}_get_legend_args({x0:e,x1:t,y0:r,y1:n},a){const i=a+1,o=new Array(i),s=new Array(i);o[a]=(e+t)/2,s[a]=(r+n)/2;const l=.4*Math.min(Math.abs(t-e),Math.abs(n-r));return{sx:o,sy:s,size:new c.UniformScalar(l,i),angle:new c.UniformScalar(0,i)}}draw_legend_for_index(e,{x0:t,x1:r,y0:n,y1:a},i){const o=this._get_legend_args({x0:t,x1:r,y0:n,y1:a},i);this._render(e,[i],o)}}r.MarkerView=f,f.__name__="MarkerView";class d extends s.XYGlyph{constructor(e){super(e)}static init_Marker(){this.mixins([l.LineVector,l.FillVector,l.HatchVector]),this.define(({Number:e})=>({size:[c.ScreenDistanceSpec,{value:4}],angle:[c.AngleSpec,0],hit_dilation:[e,1]}))}}r.Marker=d,d.__name__="Marker",d.init_Marker()},function a(e,t,r,n,i){n();const s=Math.sqrt(3),o=Math.sqrt(5),l=(o+1)/4,c=Math.sqrt((5-o)/8),u=(o-1)/4,f=Math.sqrt((5+o)/8);function d(e,t){e.rotate(Math.PI/4),p(e,t),e.rotate(-Math.PI/4)}function h(e,t){const r=t*s,n=r/3;e.moveTo(-r/2,-n),e.lineTo(0,0),e.lineTo(r/2,-n),e.lineTo(0,0),e.lineTo(0,t)}function p(e,t){e.moveTo(0,t),e.lineTo(0,-t),e.moveTo(-t,0),e.lineTo(t,0)}function a(e,t){e.moveTo(0,t),e.lineTo(t/1.5,0),e.lineTo(0,-t),e.lineTo(-t/1.5,0),e.closePath()}function v(e,t){const r=t*s,n=r/3;e.moveTo(-t,n),e.lineTo(t,n),e.lineTo(0,n-r),e.closePath()}function g(e,t,r,n){e.arc(0,0,r,0,2*Math.PI,!1),n.fill.doit&&(n.fill.set_vectorize(e,t),e.fill()),n.hatch.doit&&(n.hatch.set_vectorize(e,t),e.fill()),n.line.doit&&(n.line.set_vectorize(e,t),e.stroke())}function m(e,t,r,n){a(e,r),n.fill.doit&&(n.fill.set_vectorize(e,t),e.fill()),n.hatch.doit&&(n.hatch.set_vectorize(e,t),e.fill()),n.line.doit&&(n.line.set_vectorize(e,t),e.stroke())}function _(e,t,r,n){!function(e,t){e.beginPath(),e.arc(0,0,t/4,0,2*Math.PI,!1),e.closePath()}(e,r),n.line.set_vectorize(e,t),e.fillStyle=e.strokeStyle,e.fill()}function y(e,t,r,n){!function(e,t){const r=t/2,n=s*r;e.moveTo(t,0),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-t,0),e.lineTo(-r,n),e.lineTo(r,n),e.closePath()}(e,r),n.fill.doit&&(n.fill.set_vectorize(e,t),e.fill()),n.hatch.doit&&(n.hatch.set_vectorize(e,t),e.fill()),n.line.doit&&(n.line.set_vectorize(e,t),e.stroke())}function b(e,t,r,n){const a=2*r;e.rect(-r,-r,a,a),n.fill.doit&&(n.fill.set_vectorize(e,t),e.fill()),n.hatch.doit&&(n.hatch.set_vectorize(e,t),e.fill()),n.line.doit&&(n.line.set_vectorize(e,t),e.stroke())}function x(e,t,r,n){!function(e,t){const r=Math.sqrt(5-2*o)*t;e.moveTo(0,-t),e.lineTo(r*u,r*f-t),e.lineTo(r*(1+u),r*f-t),e.lineTo(r*(1+u-l),r*(f+c)-t),e.lineTo(r*(1+2*u-l),r*(2*f+c)-t),e.lineTo(0,2*r*f-t),e.lineTo(-r*(1+2*u-l),r*(2*f+c)-t),e.lineTo(-r*(1+u-l),r*(f+c)-t),e.lineTo(-r*(1+u),r*f-t),e.lineTo(-r*u,r*f-t),e.closePath()}(e,r),n.fill.doit&&(n.fill.set_vectorize(e,t),e.fill()),n.hatch.doit&&(n.hatch.set_vectorize(e,t),e.fill()),n.line.doit&&(n.line.set_vectorize(e,t),e.stroke())}function w(e,t,r,n){v(e,r),n.fill.doit&&(n.fill.set_vectorize(e,t),e.fill()),n.hatch.doit&&(n.hatch.set_vectorize(e,t),e.fill()),n.line.doit&&(n.line.set_vectorize(e,t),e.stroke())}r.marker_funcs={asterisk:function(e,t,r,n){p(e,r),d(e,r),n.line.doit&&(n.line.set_vectorize(e,t),e.stroke())},circle:g,circle_cross:function(e,t,r,n){e.arc(0,0,r,0,2*Math.PI,!1),n.fill.doit&&(n.fill.set_vectorize(e,t),e.fill()),n.hatch.doit&&(n.hatch.set_vectorize(e,t),e.fill()),n.line.doit&&(n.line.set_vectorize(e,t),p(e,r),e.stroke())},circle_dot:function(e,t,r,n){g(e,t,r,n),_(e,t,r,n)},circle_y:function(e,t,r,n){e.arc(0,0,r,0,2*Math.PI,!1),n.fill.doit&&(n.fill.set_vectorize(e,t),e.fill()),n.hatch.doit&&(n.hatch.set_vectorize(e,t),e.fill()),n.line.doit&&(n.line.set_vectorize(e,t),h(e,r),e.stroke())},circle_x:function(e,t,r,n){e.arc(0,0,r,0,2*Math.PI,!1),n.fill.doit&&(n.fill.set_vectorize(e,t),e.fill()),n.hatch.doit&&(n.hatch.set_vectorize(e,t),e.fill()),n.line.doit&&(n.line.set_vectorize(e,t),d(e,r),e.stroke())},cross:function(e,t,r,n){p(e,r),n.line.doit&&(n.line.set_vectorize(e,t),e.stroke())},diamond:m,diamond_dot:function(e,t,r,n){m(e,t,r,n),_(e,t,r,n)},diamond_cross:function(e,t,r,n){a(e,r),n.fill.doit&&(n.fill.set_vectorize(e,t),e.fill()),n.hatch.doit&&(n.hatch.set_vectorize(e,t),e.fill()),n.line.doit&&(n.line.set_vectorize(e,t),e.moveTo(0,r),e.lineTo(0,-r),e.moveTo(-r/1.5,0),e.lineTo(r/1.5,0),e.stroke())},dot:_,hex:y,hex_dot:function(e,t,r,n){y(e,t,r,n),_(e,t,r,n)},inverted_triangle:function(e,t,r,n){e.rotate(Math.PI),v(e,r),e.rotate(-Math.PI),n.fill.doit&&(n.fill.set_vectorize(e,t),e.fill()),n.hatch.doit&&(n.hatch.set_vectorize(e,t),e.fill()),n.line.doit&&(n.line.set_vectorize(e,t),e.stroke())},plus:function(t,e,r,n){const a=3*r/8,i=[a,a,r,r,a,a,-a,-a,-r,-r,-a,-a],o=[r,a,a,-a,-a,-r,-r,-a,-a,a,a,r];t.beginPath();for(let e=0;e<12;e++)t.lineTo(i[e],o[e]);t.closePath(),n.fill.doit&&(n.fill.set_vectorize(t,e),t.fill()),n.hatch.doit&&(n.hatch.set_vectorize(t,e),t.fill()),n.line.doit&&(n.line.set_vectorize(t,e),t.stroke())},square:b,square_cross:function(e,t,r,n){const a=2*r;e.rect(-r,-r,a,a),n.fill.doit&&(n.fill.set_vectorize(e,t),e.fill()),n.hatch.doit&&(n.hatch.set_vectorize(e,t),e.fill()),n.line.doit&&(n.line.set_vectorize(e,t),p(e,r),e.stroke())},square_dot:function(e,t,r,n){b(e,t,r,n),_(e,t,r,n)},square_pin:function(e,t,r,n){const a=3*r/8;e.moveTo(-r,-r),e.quadraticCurveTo(0,-a,r,-r),e.quadraticCurveTo(a,0,r,r),e.quadraticCurveTo(0,a,-r,r),e.quadraticCurveTo(-a,0,-r,-r),e.closePath(),n.fill.doit&&(n.fill.set_vectorize(e,t),e.fill()),n.hatch.doit&&(n.hatch.set_vectorize(e,t),e.fill()),n.line.doit&&(n.line.set_vectorize(e,t),e.stroke())},square_x:function(e,t,r,n){const a=2*r;e.rect(-r,-r,a,a),n.fill.doit&&(n.fill.set_vectorize(e,t),e.fill()),n.hatch.doit&&(n.hatch.set_vectorize(e,t),e.fill()),n.line.doit&&(n.line.set_vectorize(e,t),e.moveTo(-r,r),e.lineTo(r,-r),e.moveTo(-r,-r),e.lineTo(r,r),e.stroke())},star:x,star_dot:function(e,t,r,n){x(e,t,r,n),_(e,t,r,n)},triangle:w,triangle_dot:function(e,t,r,n){w(e,t,r,n),_(e,t,r,n)},triangle_pin:function(e,t,r,n){const a=r*s,i=a/3,o=3*i/8;e.moveTo(-r,i),e.quadraticCurveTo(0,o,r,i),e.quadraticCurveTo(s*o/2,o/2,0,i-a),e.quadraticCurveTo(-s*o/2,o/2,-r,i),e.closePath(),n.fill.doit&&(n.fill.set_vectorize(e,t),e.fill()),n.hatch.doit&&(n.hatch.set_vectorize(e,t),e.fill()),n.line.doit&&(n.line.set_vectorize(e,t),e.stroke())},dash:function(e,t,r,n){!function(e,t){e.moveTo(-t,0),e.lineTo(t,0)}(e,r),n.line.doit&&(n.line.set_vectorize(e,t),e.stroke())},x:function(e,t,r,n){d(e,r),n.line.doit&&(n.line.set_vectorize(e,t),e.stroke())},y:function(e,t,r,n){h(e,r),n.line.doit&&(n.line.set_vectorize(e,t),e.stroke())}}},function u(e,t,r,n,a){n();const i=e(1),u=i.__importStar(e(107)),o=i.__importStar(e(18)),s=e(48),l=e(65),c=e(98),f=e(106),p=e(59);class d extends c.GlyphView{_project_data(){l.inplace.project_xy(this._x0,this._y0),l.inplace.project_xy(this._x1,this._y1)}_index_data(a){const{min:i,max:o}=Math,{_x0:s,_x1:l,_y0:c,_y1:u,data_size:f}=this;for(let n=0;n<f;n++){const f=s[n],e=l[n],t=c[n],r=u[n];isNaN(f+e+t+r)?a.add_empty():a.add(i(f,e),i(t,r),o(f,e),o(t,r))}}_render(s,l,c){if(this.visuals.line.doit){const{sx0:n,sy0:a,sx1:i,sy1:o}=null!=c?c:this;for(const c of l){const l=n[c],e=a[c],t=i[c],r=o[c];isNaN(l+e+t+r)||(s.beginPath(),s.moveTo(l,e),s.lineTo(t,r),this.visuals.line.set_vectorize(s,c),s.stroke())}}}_hit_point(e){const{sx:t,sy:r}=e,n={x:t,y:r},[a,i]=this.renderer.xscale.r_invert(t-2,t+2),[o,s]=this.renderer.yscale.r_invert(r-2,r+2),l=this.index.indices({x0:a,y0:o,x1:i,y1:s}),c=[];for(const e of l){const t=Math.max(2,this.line_width.get(e)/2)**2,r={x:this.sx0[e],y:this.sy0[e]},a={x:this.sx1[e],y:this.sy1[e]};u.dist_to_segment_squared(n,r,a)<t&&c.push(e)}return new p.Selection({indices:c})}_hit_span(e){const[t,r]=this.renderer.plot_view.frame.bbox.ranges,{sx:n,sy:a}=e;let i,o,s;"v"==e.direction?(s=this.renderer.yscale.invert(a),[i,o]=[this._y0,this._y1]):(s=this.renderer.xscale.invert(n),[i,o]=[this._x0,this._x1]);const l=[],[c,u]=this.renderer.xscale.r_invert(t.start,t.end),[f,d]=this.renderer.yscale.r_invert(r.start,r.end),h=this.index.indices({x0:c,y0:f,x1:u,y1:d});for(const t of h){(i[t]<=s&&s<=o[t]||o[t]<=s&&s<=i[t])&&l.push(t);const r=1.5+this.line_width.get(t)/2;i[t]==o[t]&&("h"==e.direction?Math.abs(this.sx0[t]-n)<=r&&l.push(t):Math.abs(this.sy0[t]-a)<=r&&l.push(t))}return new p.Selection({indices:l})}scenterxy(e){return[this.sx0[e]/2+this.sx1[e]/2,this.sy0[e]/2+this.sy1[e]/2]}draw_legend_for_index(e,t,r){f.generic_line_vector_legend(this.visuals,e,t,r)}}r.SegmentView=d,d.__name__="SegmentView";class h extends c.Glyph{constructor(e){super(e)}static init_Segment(){this.prototype.default_view=d,this.define(({})=>({x0:[o.XCoordinateSpec,{field:"x0"}],y0:[o.YCoordinateSpec,{field:"y0"}],x1:[o.XCoordinateSpec,{field:"x1"}],y1:[o.YCoordinateSpec,{field:"y1"}]})),this.mixins(s.LineVector)}}r.Segment=h,h.__name__="Segment",h.init_Segment()},function e(t,r,n,a,i){a();const e=t(1),o=t(64),s=e.__importStar(t(48)),l=t(308);class c extends o.XYGlyphView{_set_data(){const{tension:e,closed:t}=this.model;[this._xt,this._yt]=l.catmullrom_spline(this._x,this._y,20,e,t)}_map_data(){const{x_scale:e,y_scale:t}=this.renderer.coordinates;this.sxt=e.v_compute(this._xt),this.syt=t.v_compute(this._yt)}_render(t,e,r){const{sxt:n,syt:a}=null!=r?r:this;this.visuals.line.set_value(t);const i=n.length;for(let e=0;e<i;e++)0!=e?isNaN(n[e])||isNaN(a[e])?(t.stroke(),t.beginPath()):t.lineTo(n[e],a[e]):(t.beginPath(),t.moveTo(n[e],a[e]));t.stroke()}}n.SplineView=c,c.__name__="SplineView";class u extends o.XYGlyph{constructor(e){super(e)}static init_Spline(){this.prototype.default_view=c,this.mixins(s.LineScalar),this.define(({Boolean:e,Number:t})=>({tension:[t,.5],closed:[e,!1]}))}}n.Spline=u,u.__name__="Spline",u.init_Spline()},function e(t,r,n,a,i){a();const v=t(24),g=t(11);n.catmullrom_spline=function(e,t,n=10,a=.5,i=!1){g.assert(e.length==t.length);const o=e.length,s=i?o+1:o,l=v.infer_type(e,t),c=new l(s+2),u=new l(s+2);c.set(e,1),u.set(t,1),i?(c[0]=e[o-1],u[0]=t[o-1],c[s]=e[0],u[s]=t[0],c[s+1]=e[1],u[s+1]=t[1]):(c[0]=e[0],u[0]=t[0],c[s+1]=e[o-1],u[s+1]=t[o-1]);const f=new l(4*(n+1));for(let e=0,t=0;e<=n;e++){const a=e/n,i=a**2,v=a*i;f[t++]=2*v-3*i+1,f[t++]=-2*v+3*i,f[t++]=v-2*i+a,f[t++]=v-i}const d=new l((s-1)*(n+1)),h=new l((s-1)*(n+1));for(let t=1,r=0;t<s;t++){const i=(c[t+1]-c[t-1])*a,v=(u[t+1]-u[t-1])*a,g=(c[t+2]-c[t])*a,o=(u[t+2]-u[t])*a;for(let e=0;e<=4*n;r++){const n=f[e++],s=f[e++],l=f[e++],p=f[e++];d[r]=n*c[t]+s*c[t+1]+l*i+p*g,h[r]=n*u[t]+s*u[t+1]+l*v+p*o}}return[d,h]}},function e(t,r,n,a,i){a();const o=t(1),s=t(64),l=t(106),c=o.__importStar(t(48)),e=t(20);class u extends s.XYGlyphView{_render(a,e,i){const{sx:o,sy:s}=null!=i?i:this;let l=!1,c=null;this.visuals.line.set_value(a);const t=e.length;if(!(t<2)){a.beginPath(),a.moveTo(o[0],s[0]);for(const i of e){let e,t,r,n;switch(this.model.mode){case"before":[e,r]=[o[i-1],s[i]],[t,n]=[o[i],s[i]];break;case"after":[e,r]=[o[i],s[i-1]],[t,n]=[o[i],s[i]];break;case"center":{const a=(o[i-1]+o[i])/2;[e,r]=[a,s[i-1]],[t,n]=[a,s[i]];break}default:throw new Error("unexpected")}if(l){if(!isFinite(o[i]+s[i])){a.stroke(),a.beginPath(),l=!1,c=i;continue}null!=c&&i-c>1&&(a.stroke(),l=!1)}l?(a.lineTo(e,r),a.lineTo(t,n)):(a.beginPath(),a.moveTo(o[i],s[i]),l=!0),c=i}a.lineTo(o[t-1],s[t-1]),a.stroke()}}draw_legend_for_index(e,t,r){l.generic_line_scalar_legend(this.visuals,e,t)}}n.StepView=u,u.__name__="StepView";class f extends s.XYGlyph{constructor(e){super(e)}static init_Step(){this.prototype.default_view=u,this.mixins(c.LineScalar),this.define(()=>({mode:[e.StepMode,"before"]}))}}n.Step=f,f.__name__="Step",f.init_Step()},function e(t,r,n,a,i){a();const o=t(1),e=t(64),s=t(48),u=o.__importStar(t(107)),l=o.__importStar(t(18)),g=t(143),c=t(11),f=t(59);class d extends e.XYGlyphView{_rotate_point(e,t,r,n,a){return[(e-r)*Math.cos(a)-(t-n)*Math.sin(a)+r,(e-r)*Math.sin(a)+(t-n)*Math.cos(a)+n]}_text_bounds(e,t,r,n){return[[e,e+r,e+r,e,e],[t,t,t-n,t-n,t]]}_render(o,s,l){const{sx:c,sy:u,x_offset:f,y_offset:d,angle:h,text:e}=null!=l?l:this;this._sys=[],this._sxs=[];for(const l of s){const s=this._sxs[l]=[],t=this._sys[l]=[],r=c[l],n=u[l],a=f.get(l),i=d.get(l),p=h.get(l),v=e.get(l);if(!isNaN(r+n+a+i+p)&&null!=v&&this.visuals.text.doit){const c=`${v}`;o.save(),o.translate(r+a,n+i),o.rotate(p),this.visuals.text.set_vectorize(o,l);const u=this.visuals.text.font_value(l),{height:f}=g.font_metrics(u),d=this.text_line_height.get(l)*f;if(-1==c.indexOf("\n")){o.fillText(c,0,0);const l=r+a,u=n+i,f=o.measureText(c).width,[h,e]=this._text_bounds(l,u,f,d);s.push(h),t.push(e)}else{const u=c.split("\n"),f=d*u.length,h=this.text_baseline.get(l);let e;switch(h){case"top":e=0;break;case"middle":e=-f/2+d/2;break;case"bottom":e=-f+d;break;default:e=0,console.warn(`'${h}' baseline not supported with multi line text`)}for(const l of u){o.fillText(l,0,e);const c=r+a,u=e+n+i,f=o.measureText(l).width,[h,g]=this._text_bounds(c,u,f,d);s.push(h),t.push(g),e+=d}}o.restore()}}}_hit_point(e){const{sx:s,sy:l}=e,c=[];for(let o=0;o<this._sxs.length;o++){const n=this._sxs[o],a=this._sys[o],i=n.length;for(let r=0,e=i;r<e;r++){const[e,t]=this._rotate_point(s,l,n[i-1][0],a[i-1][0],-this.angle.get(o));u.point_in_poly(e,t,n[r],a[r])&&c.push(o)}}return new f.Selection({indices:c})}scenterxy(e){const t=this._sxs[e],r=this._sys[e];c.assert(0!=t.length&&0!=r.length);const n=t[0][0],a=r[0][0],i=(t[0][2]+n)/2,o=(r[0][2]+a)/2,[s,l]=this._rotate_point(i,o,n,a,this.angle.get(e));return[s,l]}}n.TextView=d,d.__name__="TextView";class h extends e.XYGlyph{constructor(e){super(e)}static init_Text(){this.prototype.default_view=d,this.mixins(s.TextVector),this.define(({})=>({text:[l.NullStringSpec,{field:"text"}],angle:[l.AngleSpec,0],x_offset:[l.NumberSpec,0],y_offset:[l.NumberSpec,0]}))}}n.Text=h,h.__name__="Text",h.init_Text()},function e(t,r,n,a,i){a();const o=t(1),s=t(290),l=t(24),c=o.__importStar(t(18));class e extends s.BoxView{scenterxy(e){return[this.sx[e],(this.stop[e]+this.sbottom[e])/2]}_lrtb(e){const t=this.width.get(e)/2,r=this._x[e],n=this._top[e],a=this._bottom[e];return[r-t,r+t,Math.max(n,a),Math.min(n,a)]}_map_data(){this.sx=this.renderer.xscale.v_compute(this._x),this.sw=this.sdist(this.renderer.xscale,this._x,this.width,"center"),this.stop=this.renderer.yscale.v_compute(this._top),this.sbottom=this.renderer.yscale.v_compute(this._bottom);const t=this.sx.length;this.sleft=new l.ScreenArray(t),this.sright=new l.ScreenArray(t);for(let e=0;e<t;e++)this.sleft[e]=this.sx[e]-this.sw[e]/2,this.sright[e]=this.sx[e]+this.sw[e]/2;this._clamp_viewport()}}n.VBarView=e,e.__name__="VBarView";class u extends s.Box{constructor(e){super(e)}static init_VBar(){this.prototype.default_view=e,this.define(({})=>({x:[c.XCoordinateSpec,{field:"x"}],bottom:[c.YCoordinateSpec,{value:0}],width:[c.NumberSpec,{value:1}],top:[c.YCoordinateSpec,{field:"top"}]}))}}n.VBar=u,u.__name__="VBar",u.init_VBar()},function _(e,t,r,n,a){n();const i=e(1),o=e(64),s=e(106),l=e(48),c=e(24),u=e(20),f=i.__importStar(e(18)),_=e(10),y=e(59);class d extends o.XYGlyphView{_map_data(){"data"==this.model.properties.radius.units?this.sradius=this.sdist(this.renderer.xscale,this._x,this.radius):this.sradius=c.to_screen(this.radius)}_render(a,i,o){const{sx:s,sy:l,sradius:c,start_angle:u,end_angle:f}=null!=o?o:this,d="anticlock"==this.model.direction;for(const o of i){const i=s[o],e=l[o],t=c[o],r=u.get(o),n=f.get(o);isNaN(i+e+t+r+n)||(a.beginPath(),a.arc(i,e,t,r,n,d),a.lineTo(i,e),a.closePath(),this.visuals.fill.doit&&(this.visuals.fill.set_vectorize(a,o),a.fill()),this.visuals.hatch.doit&&(this.visuals.hatch.set_vectorize(a,o),a.fill()),this.visuals.line.doit&&(this.visuals.line.set_vectorize(a,o),a.stroke()))}}_hit_point(e){let t,r,n,a,i,o,s,l,c;const{sx:u,sy:f}=e,d=this.renderer.xscale.invert(u),h=this.renderer.yscale.invert(f),p=2*this.max_radius;"data"===this.model.properties.radius.units?(o=d-p,s=d+p,l=h-p,c=h+p):(r=u-p,n=u+p,[o,s]=this.renderer.xscale.r_invert(r,n),a=f-p,i=f+p,[l,c]=this.renderer.yscale.r_invert(a,i));const v=[];for(const e of this.index.indices({x0:o,x1:s,y0:l,y1:c})){const o=this.sradius[e]**2;[r,n]=this.renderer.xscale.r_compute(d,this._x[e]),[a,i]=this.renderer.yscale.r_compute(h,this._y[e]),t=(r-n)**2+(a-i)**2,t<=o&&v.push(e)}const g="anticlock"==this.model.direction,m=[];for(const e of v){const t=Math.atan2(f-this.sy[e],u-this.sx[e]);_.angle_between(-t,-this.start_angle.get(e),-this.end_angle.get(e),g)&&m.push(e)}return new y.Selection({indices:m})}draw_legend_for_index(e,t,r){s.generic_area_vector_legend(this.visuals,e,t,r)}scenterxy(e){const t=this.sradius[e]/2,r=(this.start_angle.get(e)+this.end_angle.get(e))/2;return[this.sx[e]+t*Math.cos(r),this.sy[e]+t*Math.sin(r)]}}r.WedgeView=d,d.__name__="WedgeView";class h extends o.XYGlyph{constructor(e){super(e)}static init_Wedge(){this.prototype.default_view=d,this.mixins([l.LineVector,l.FillVector,l.HatchVector]),this.define(({})=>({direction:[u.Direction,"anticlock"],radius:[f.DistanceSpec,{field:"radius"}],start_angle:[f.AngleSpec,{field:"start_angle"}],end_angle:[f.AngleSpec,{field:"end_angle"}]}))}}r.Wedge=h,h.__name__="Wedge",h.init_Wedge()},function e(t,e,r,n,a){n();const i=t(1);i.__exportStar(t(126),r),i.__exportStar(t(125),r),i.__exportStar(t(314),r)},function e(t,r,n,a,i){a();const o=t(125);class s extends o.LayoutProvider{constructor(e){super(e)}static init_StaticLayoutProvider(){this.define(({Number:e,Tuple:t,Dict:r})=>({graph_layout:[r(t(e,e)),{}]}))}get_node_coordinates(e){var r;const n=null!==(r=e.data.index)&&void 0!==r?r:[],a=n.length,i=new Float64Array(a),o=new Float64Array(a);for(let t=0;t<a;t++){const r=this.graph_layout[n[t]],[a,e]=null!=r?r:[NaN,NaN];i[t]=a,o[t]=e}return[i,o]}get_edge_coordinates(e){var t,n;const a=null!==(t=e.data.start)&&void 0!==t?t:[],i=null!==(n=e.data.end)&&void 0!==n?n:[],o=Math.min(a.length,i.length),s=[],l=[],c=null!=e.data.xs&&null!=e.data.ys;for(let r=0;r<o;r++){const n=null!=this.graph_layout[a[r]]&&null!=this.graph_layout[i[r]];if(c&&n)s.push(e.data.xs[r]),l.push(e.data.ys[r]);else{let e,t;n?(e=this.graph_layout[a[r]],t=this.graph_layout[i[r]]):(e=[NaN,NaN],t=[NaN,NaN]),s.push([e[0],t[0]]),l.push([e[1],t[1]])}}return[s,l]}}n.StaticLayoutProvider=s,s.__name__="StaticLayoutProvider",s.init_StaticLayoutProvider()},function e(t,r,n,a,i){a(),i("Grid",t(316).Grid)},function e(t,r,n,a,i){a();const o=t(1),s=t(162),l=t(164),c=t(165),e=o.__importStar(t(48)),u=t(8);class f extends l.GuideRendererView{_render(){const e=this.layer.ctx;e.save(),this._draw_regions(e),this._draw_minor_grids(e),this._draw_grids(e),e.restore()}connect_signals(){super.connect_signals(),this.connect(this.model.change,()=>this.request_render())}_draw_regions(i){if(!this.visuals.band_fill.doit&&!this.visuals.band_hatch.doit)return;const[o,s]=this.grid_coords("major",!1);for(let a=0;a<o.length-1;a++){if(a%2!=1)continue;const[e,t]=this.coordinates.map_to_screen(o[a],s[a]),[r,n]=this.coordinates.map_to_screen(o[a+1],s[a+1]);i.beginPath(),i.rect(e[0],t[0],r[1]-e[0],n[1]-t[0]),this.visuals.band_fill.doit&&(this.visuals.band_fill.set_value(i),i.fill()),this.visuals.band_hatch.doit&&(this.visuals.band_hatch.set_value(i),i.fill())}}_draw_grids(e){if(!this.visuals.grid_line.doit)return;const[t,r]=this.grid_coords("major");this._draw_grid_helper(e,this.visuals.grid_line,t,r)}_draw_minor_grids(e){if(!this.visuals.minor_grid_line.doit)return;const[t,r]=this.grid_coords("minor");this._draw_grid_helper(e,this.visuals.minor_grid_line,t,r)}_draw_grid_helper(n,e,a,i){e.set_value(n),n.beginPath();for(let e=0;e<a.length;e++){const[t,r]=this.coordinates.map_to_screen(a[e],i[e]);n.moveTo(Math.round(t[0]),Math.round(r[0]));for(let e=1;e<t.length;e++)n.lineTo(Math.round(t[e]),Math.round(r[e]))}n.stroke()}ranges(){const e=this.model.dimension,t=(e+1)%2,{ranges:r}=this.coordinates;return[r[e],r[t]]}computed_bounds(){const[e]=this.ranges(),t=this.model.bounds,r=[e.min,e.max];let n,a;if(u.isArray(t))n=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),n<r[0]&&(n=r[0]),a>r[1]&&(a=r[1]);else{[n,a]=r;for(const e of this.plot_view.axis_views)e.dimension==this.model.dimension&&e.model.x_range_name==this.model.x_range_name&&e.model.y_range_name==this.model.y_range_name&&([n,a]=e.computed_bounds)}return[n,a]}grid_coords(e,r=!0){const n=this.model.dimension,a=(n+1)%2,[i,o]=this.ranges();let[s,t]=this.computed_bounds();[s,t]=[Math.min(s,t),Math.max(s,t)];const l=[[],[]],c=this.model.get_ticker();if(null==c)return l;const u=c.get_ticks(s,t,i,o.min)[e],f=i.min,d=i.max,h=o.min,p=o.max;r||(u[0]!=f&&u.splice(0,0,f),u[u.length-1]!=d&&u.push(d));for(let t=0;t<u.length;t++){if((u[t]==f||u[t]==d)&&r)continue;const i=[],o=[],s=2;for(let e=0;e<s;e++){const n=h+(p-h)/(s-1)*e;i.push(u[t]),o.push(n)}l[n].push(i),l[a].push(o)}return l}}n.GridView=f,f.__name__="GridView";class d extends l.GuideRenderer{constructor(e){super(e)}static init_Grid(){this.prototype.default_view=f,this.mixins([["grid_",e.Line],["minor_grid_",e.Line],["band_",e.Fill],["band_",e.Hatch]]),this.define(({Number:e,Auto:t,Enum:r,Ref:n,Tuple:a,Or:i,Nullable:o})=>({bounds:[i(a(e,e),t),"auto"],dimension:[r(0,1),0],axis:[o(n(s.Axis)),null],ticker:[o(n(c.Ticker)),null]})),this.override({level:"underlay",band_fill_color:null,band_fill_alpha:0,grid_line_color:"#e5e5e5",minor_grid_line_color:null})}get_ticker(){return null!=this.ticker?this.ticker:null!=this.axis?this.axis.ticker:null}}n.Grid=d,d.__name__="Grid",d.init_Grid()},function e(t,r,n,a,i){a(),i("Box",t(318).Box),i("Column",t(320).Column),i("GridBox",t(321).GridBox),i("HTMLBox",t(322).HTMLBox),i("LayoutDOM",t(319).LayoutDOM),i("Panel",t(323).Panel),i("Row",t(324).Row),i("Spacer",t(325).Spacer),i("Tabs",t(326).Tabs),i("WidgetBox",t(329).WidgetBox)},function e(t,r,n,a,i){a();const o=t(319);class s extends o.LayoutDOMView{connect_signals(){super.connect_signals(),this.connect(this.model.properties.children.change,()=>this.rebuild())}get child_models(){return this.model.children}}n.BoxView=s,s.__name__="BoxView";class l extends o.LayoutDOM{constructor(e){super(e)}static init_Box(){this.define(({Number:e,Array:t,Ref:r})=>({children:[t(r(o.LayoutDOM)),[]],spacing:[e,0]}))}}n.Box=l,l.__name__="Box",l.init_Box()},function t(e,r,n,a,i){a();const o=e(53),h=e(20),u=e(43),s=e(19),p=e(8),t=e(22),l=e(122),c=e(240),v=e(221),f=e(44),d=e(249);class g extends c.DOMView{constructor(){super(...arguments),this._idle_notified=!1,this._offset_parent=null,this._viewport={}}initialize(){super.initialize(),this.el.style.position=this.is_root?"relative":"absolute",this._child_views=new Map}async lazy_initialize(){await super.lazy_initialize(),await this.build_child_views()}remove(){for(const e of this.child_views)e.remove();this._child_views.clear(),super.remove()}connect_signals(){super.connect_signals(),this.is_root&&(this._on_resize=()=>this.resize_layout(),window.addEventListener("resize",this._on_resize),this._parent_observer=setInterval(()=>{const e=this.el.offsetParent;this._offset_parent!=e&&(this._offset_parent=e,null!=e&&(this.compute_viewport(),this.invalidate_layout()))},250));const e=this.model.properties;this.on_change([e.width,e.height,e.min_width,e.min_height,e.max_width,e.max_height,e.margin,e.width_policy,e.height_policy,e.sizing_mode,e.aspect_ratio,e.visible],()=>this.invalidate_layout()),this.on_change([e.background,e.css_classes],()=>this.invalidate_render())}disconnect_signals(){null!=this._parent_observer&&clearTimeout(this._parent_observer),null!=this._on_resize&&window.removeEventListener("resize",this._on_resize),super.disconnect_signals()}css_classes(){return super.css_classes().concat(this.model.css_classes)}get child_views(){return this.child_models.map(e=>this._child_views.get(e))}async build_child_views(){await l.build_views(this._child_views,this.child_models,{parent:this})}render(){super.render(),u.empty(this.el);const{background:e}=this.model;this.el.style.backgroundColor=null!=e?t.color2css(e):"",u.classes(this.el).clear().add(...this.css_classes());for(const e of this.child_views)this.el.appendChild(e.el),e.render()}update_layout(){for(const e of this.child_views)e.update_layout();this._update_layout()}update_position(){this.el.style.display=this.model.visible?"block":"none";const e=this.is_root?this.layout.sizing.margin:void 0;u.position(this.el,this.layout.bbox,e);for(const e of this.child_views)e.update_position()}after_layout(){for(const e of this.child_views)e.after_layout();this._has_finished=!0}compute_viewport(){this._viewport=this._viewport_size()}renderTo(e){e.appendChild(this.el),this._offset_parent=this.el.offsetParent,this.compute_viewport(),this.build()}build(){return this.assert_root(),this.render(),this.update_layout(),this.compute_layout(),this}async rebuild(){await this.build_child_views(),this.invalidate_render()}compute_layout(){const e=Date.now();this.layout.compute(this._viewport),this.update_position(),this.after_layout(),s.logger.debug(`layout computed in ${Date.now()-e} ms`),this.notify_finished()}resize_layout(){this.root.compute_viewport(),this.root.compute_layout()}invalidate_layout(){this.root.update_layout(),this.root.compute_layout()}invalidate_render(){this.render(),this.invalidate_layout()}has_finished(){if(!super.has_finished())return!1;for(const e of this.child_views)if(!e.has_finished())return!1;return!0}notify_finished(){this.is_root?!this._idle_notified&&this.has_finished()&&null!=this.model.document&&(this._idle_notified=!0,this.model.document.notify_idle(this.model)):this.root.notify_finished()}_width_policy(){return null!=this.model.width?"fixed":"fit"}_height_policy(){return null!=this.model.height?"fixed":"fit"}box_sizing(){let{width_policy:e,height_policy:t,aspect_ratio:r}=this.model;"auto"==e&&(e=this._width_policy()),"auto"==t&&(t=this._height_policy());const{sizing_mode:n}=this.model;if(null!=n)if("fixed"==n)e=t="fixed";else if("stretch_both"==n)e=t="max";else if("stretch_width"==n)e="max";else if("stretch_height"==n)t="max";else switch(null==r&&(r="auto"),n){case"scale_width":e="max",t="min";break;case"scale_height":e="min",t="max";break;case"scale_both":e="max",t="max"}const a={width_policy:e,height_policy:t},{min_width:i,min_height:o}=this.model;null!=i&&(a.min_width=i),null!=o&&(a.min_height=o);const{width:s,height:l}=this.model;null!=s&&(a.width=s),null!=l&&(a.height=l);const{max_width:c,max_height:u}=this.model;null!=c&&(a.max_width=c),null!=u&&(a.max_height=u),"auto"==r&&null!=s&&null!=l?a.aspect=s/l:p.isNumber(r)&&(a.aspect=r);const{margin:f}=this.model;if(null!=f)if(p.isNumber(f))a.margin={top:f,right:f,bottom:f,left:f};else if(2==f.length){const[e,t]=f;a.margin={top:e,right:t,bottom:e,left:t}}else{const[e,t,r,n]=f;a.margin={top:e,right:t,bottom:r,left:n}}a.visible=this.model.visible;const{align:d}=this.model;return p.isArray(d)?[a.halign,a.valign]=d:a.halign=a.valign=d,a}_viewport_size(){return u.undisplayed(this.el,()=>{let c=this.el;for(;c=c.parentElement;){if(c.classList.contains(f.root))continue;if(c==document.body){const{margin:{left:c,right:e,top:t,bottom:r}}=u.extents(document.body);return{width:Math.ceil(document.documentElement.clientWidth-c-e),height:Math.ceil(document.documentElement.clientHeight-t-r)}}const{padding:{left:e,right:t,top:r,bottom:n}}=u.extents(c),{width:a,height:i}=c.getBoundingClientRect();let o=0;for(const r of c.children){const{height:c}=r.getBoundingClientRect(),{margin:{top:e,bottom:t}}=u.extents(r);o+=c+e+t}const s=Math.ceil(a-e-t),l=Math.ceil(i-r-n-o);if(s>0||l>0)return{width:s>0?s:void 0,height:l>0?l:void 0}}return{}})}export(t,r=!0){const n="png"==t?"canvas":"svg",a=new d.CanvasLayer(n,r),{width:i,height:o}=this.layout.bbox;a.resize(i,o);for(const n of this.child_views){const i=n.export(t,r),{x:o,y:e}=n.layout.bbox;a.ctx.drawImage(i.canvas,o,e)}return a}serializable_state(){return Object.assign(Object.assign({},super.serializable_state()),{bbox:this.layout.bbox.box,children:this.child_views.map(e=>e.serializable_state())})}}n.LayoutDOMView=g,g.__name__="LayoutDOMView";class m extends o.Model{constructor(e){super(e)}static init_LayoutDOM(){this.define(e=>{const{Boolean:t,Number:r,String:n,Auto:a,Color:i,Array:o,Tuple:s,Or:l,Null:c,Nullable:u}=e,f=s(r,r),d=s(r,r,r,r);return{width:[u(r),null],height:[u(r),null],min_width:[u(r),null],min_height:[u(r),null],max_width:[u(r),null],max_height:[u(r),null],margin:[u(l(r,f,d)),[0,0,0,0]],width_policy:[l(v.SizingPolicy,a),"auto"],height_policy:[l(v.SizingPolicy,a),"auto"],aspect_ratio:[l(r,a,c),null],sizing_mode:[u(h.SizingMode),null],visible:[t,!0],disabled:[t,!1],align:[l(h.Align,s(h.Align,h.Align)),"start"],background:[u(i),null],css_classes:[o(n),[]]}})}}n.LayoutDOM=m,m.__name__="LayoutDOM",m.init_LayoutDOM()},function e(t,r,n,a,i){a();const o=t(318),s=t(223);class l extends o.BoxView{_update_layout(){const e=this.child_views.map(e=>e.layout);this.layout=new s.Column(e),this.layout.rows=this.model.rows,this.layout.spacing=[this.model.spacing,0],this.layout.set_sizing(this.box_sizing())}}n.ColumnView=l,l.__name__="ColumnView";class c extends o.Box{constructor(e){super(e)}static init_Column(){this.prototype.default_view=l,this.define(({Any:e})=>({rows:[e,"auto"]}))}}n.Column=c,c.__name__="Column",c.init_Column()},function e(t,r,n,a,i){a();const l=t(319),o=t(223);class s extends l.LayoutDOMView{connect_signals(){super.connect_signals();const{children:e,rows:t,cols:r,spacing:n}=this.model.properties;this.on_change([e,t,r,n],()=>this.rebuild())}get child_models(){return this.model.children.map(([e])=>e)}_update_layout(){this.layout=new o.Grid,this.layout.rows=this.model.rows,this.layout.cols=this.model.cols,this.layout.spacing=this.model.spacing;for(const[t,r,n,a,i]of this.model.children){const e=this._child_views.get(t);this.layout.items.push({layout:e.layout,row:r,col:n,row_span:a,col_span:i})}this.layout.set_sizing(this.box_sizing())}}n.GridBoxView=s,s.__name__="GridBoxView";class c extends l.LayoutDOM{constructor(e){super(e)}static init_GridBox(){this.prototype.default_view=s,this.define(({Any:e,Int:t,Number:r,Tuple:n,Array:a,Ref:i,Or:o,Opt:s})=>({children:[a(n(i(l.LayoutDOM),t,t,s(t),s(t))),[]],rows:[e,"auto"],cols:[e,"auto"],spacing:[o(r,n(r,r)),0]}))}}n.GridBox=c,c.__name__="GridBox",c.init_GridBox()},function e(t,r,n,a,i){a();const e=t(319),o=t(221);class s extends e.LayoutDOMView{get child_models(){return[]}_update_layout(){this.layout=new o.ContentBox(this.el),this.layout.set_sizing(this.box_sizing())}}n.HTMLBoxView=s,s.__name__="HTMLBoxView";class l extends e.LayoutDOM{constructor(e){super(e)}}n.HTMLBox=l,l.__name__="HTMLBox"},function e(t,r,n,a,i){a();const o=t(53),s=t(319);class l extends o.Model{constructor(e){super(e)}static init_Panel(){this.define(({Boolean:e,String:t,Ref:r})=>({title:[t,""],child:[r(s.LayoutDOM)],closable:[e,!1]}))}}n.Panel=l,l.__name__="Panel",l.init_Panel()},function e(t,r,n,a,i){a();const o=t(318),s=t(223);class e extends o.BoxView{_update_layout(){const e=this.child_views.map(e=>e.layout);this.layout=new s.Row(e),this.layout.cols=this.model.cols,this.layout.spacing=[0,this.model.spacing],this.layout.set_sizing(this.box_sizing())}}n.RowView=e,e.__name__="RowView";class l extends o.Box{constructor(e){super(e)}static init_Row(){this.prototype.default_view=e,this.define(({Any:e})=>({cols:[e,"auto"]}))}}n.Row=l,l.__name__="Row",l.init_Row()},function e(t,r,n,a,i){a();const e=t(319),o=t(221);class s extends e.LayoutDOMView{get child_models(){return[]}_update_layout(){this.layout=new o.LayoutItem,this.layout.set_sizing(this.box_sizing())}}n.SpacerView=s,s.__name__="SpacerView";class l extends e.LayoutDOM{constructor(e){super(e)}static init_Spacer(){this.prototype.default_view=s}}n.Spacer=l,l.__name__="Spacer",l.init_Spacer()},function e(t,r,n,a,i){a();const o=t(1),l=t(221),c=t(43),u=t(9),s=t(20),f=t(319),d=t(323),e=o.__importStar(t(327)),h=e,p=o.__importStar(t(328)),v=p,g=o.__importStar(t(243)),m=g;class _ extends f.LayoutDOMView{connect_signals(){super.connect_signals(),this.connect(this.model.properties.tabs.change,()=>this.rebuild()),this.connect(this.model.properties.active.change,()=>this.on_active_change())}styles(){return[...super.styles(),p.default,g.default,e.default]}get child_models(){return this.model.tabs.map(e=>e.child)}_update_layout(){const e=this.model.tabs_location,i="above"==e||"below"==e,{scroll_el:o,headers_el:s}=this;this.header=new class extends l.ContentBox{_measure(e){const t=c.size(o),r=c.children(s).slice(0,3).map(e=>c.size(e)),{width:n,height:a}=super._measure(e);if(i){const i=t.width+u.sum(r.map(e=>e.width));return{width:e.width!=1/0?e.width:i,height:a}}{const i=t.height+u.sum(r.map(e=>e.height));return{width:n,height:e.height!=1/0?e.height:i}}}}(this.header_el),i?this.header.set_sizing({width_policy:"fit",height_policy:"fixed"}):this.header.set_sizing({width_policy:"fixed",height_policy:"fit"});let t=1,r=1;switch(e){case"above":t-=1;break;case"below":t+=1;break;case"left":r-=1;break;case"right":r+=1}const n={layout:this.header,row:t,col:r},a=this.child_views.map(e=>({layout:e.layout,row:1,col:1}));this.layout=new l.Grid([n,...a]),this.layout.set_sizing(this.box_sizing())}update_position(){super.update_position(),this.header_el.style.position="absolute",c.position(this.header_el,this.header.bbox);const e=this.model.tabs_location,t="above"==e||"below"==e,r=c.size(this.scroll_el),n=c.scroll_size(this.headers_el);if(t){const{width:e}=this.header.bbox;n.width>e?(this.wrapper_el.style.maxWidth=e-r.width+"px",c.display(this.scroll_el)):(this.wrapper_el.style.maxWidth="",c.undisplay(this.scroll_el))}else{const{height:e}=this.header.bbox;n.height>e?(this.wrapper_el.style.maxHeight=e-r.height+"px",c.display(this.scroll_el)):(this.wrapper_el.style.maxHeight="",c.undisplay(this.scroll_el))}const{child_views:a}=this;for(const e of a)c.hide(e.el);const i=a[this.model.active];null!=i&&c.show(i.el)}render(){super.render();const{active:n}=this.model,e=this.model.tabs_location,a="above"==e||"below"==e,t=this.model.tabs.map((e,t)=>{const r=c.div({class:[h.tab,t==n?h.active:null]},e.title);if(r.addEventListener("click",e=>{e.target==e.currentTarget&&this.change_active(t)}),e.closable){const n=c.div({class:h.close});n.addEventListener("click",e=>{if(e.target==e.currentTarget){this.model.tabs=u.remove_at(this.model.tabs,t);const e=this.model.tabs.length;this.model.active>e-1&&(this.model.active=e-1)}}),r.appendChild(n)}return r});this.headers_el=c.div({class:[h.headers]},t),this.wrapper_el=c.div({class:h.headers_wrapper},this.headers_el);const i=c.div({class:[v.btn,v.btn_default],disabled:""},c.div({class:[m.caret,h.left]})),o=c.div({class:[v.btn,v.btn_default]},c.div({class:[m.caret,h.right]}));let s=0;const r=r=>()=>{const e=this.model.tabs.length;s="left"==r?Math.max(s-1,0):Math.min(s+1,e-1),0==s?i.setAttribute("disabled",""):i.removeAttribute("disabled"),s==e-1?o.setAttribute("disabled",""):o.removeAttribute("disabled");const t=c.children(this.headers_el).slice(0,s).map(e=>e.getBoundingClientRect());if(a){const r=-u.sum(t.map(e=>e.width));this.headers_el.style.left=`${r}px`}else{const r=-u.sum(t.map(e=>e.height));this.headers_el.style.top=`${r}px`}};i.addEventListener("click",r("left")),o.addEventListener("click",r("right")),this.scroll_el=c.div({class:v.btn_group},i,o),this.header_el=c.div({class:[h.tabs_header,h[e]]},this.scroll_el,this.wrapper_el),this.el.appendChild(this.header_el)}change_active(e){e!=this.model.active&&(this.model.active=e)}on_active_change(){const e=this.model.active,t=c.children(this.headers_el);for(const e of t)e.classList.remove(h.active);t[e].classList.add(h.active);const{child_views:r}=this;for(const e of r)c.hide(e.el);c.show(r[e].el)}}n.TabsView=_,_.__name__="TabsView";class y extends f.LayoutDOM{constructor(e){super(e)}static init_Tabs(){this.prototype.default_view=_,this.define(({Int:e,Array:t,Ref:r})=>({tabs:[t(r(d.Panel)),[]],tabs_location:[s.Location,"above"],active:[e,0]}))}}n.Tabs=y,y.__name__="Tabs",y.init_Tabs()},function e(t,r,n,a,i){a(),n.root="bk-root",n.tabs_header="bk-tabs-header",n.btn_group="bk-btn-group",n.btn="bk-btn",n.headers_wrapper="bk-headers-wrapper",n.above="bk-above",n.right="bk-right",n.below="bk-below",n.left="bk-left",n.headers="bk-headers",n.tab="bk-tab",n.active="bk-active",n.close="bk-close",n.default='.bk-root .bk-tabs-header{display:flex;display:-webkit-flex;flex-wrap:nowrap;-webkit-flex-wrap:nowrap;align-items:center;-webkit-align-items:center;overflow:hidden;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;}.bk-root .bk-tabs-header .bk-btn-group{height:auto;margin-right:5px;}.bk-root .bk-tabs-header .bk-btn-group > .bk-btn{flex-grow:0;-webkit-flex-grow:0;height:auto;padding:4px 4px;}.bk-root .bk-tabs-header .bk-headers-wrapper{flex-grow:1;-webkit-flex-grow:1;overflow:hidden;color:#666666;}.bk-root .bk-tabs-header.bk-above .bk-headers-wrapper{border-bottom:1px solid #e6e6e6;}.bk-root .bk-tabs-header.bk-right .bk-headers-wrapper{border-left:1px solid #e6e6e6;}.bk-root .bk-tabs-header.bk-below .bk-headers-wrapper{border-top:1px solid #e6e6e6;}.bk-root .bk-tabs-header.bk-left .bk-headers-wrapper{border-right:1px solid #e6e6e6;}.bk-root .bk-tabs-header.bk-above,.bk-root .bk-tabs-header.bk-below{flex-direction:row;-webkit-flex-direction:row;}.bk-root .bk-tabs-header.bk-above .bk-headers,.bk-root .bk-tabs-header.bk-below .bk-headers{flex-direction:row;-webkit-flex-direction:row;}.bk-root .bk-tabs-header.bk-left,.bk-root .bk-tabs-header.bk-right{flex-direction:column;-webkit-flex-direction:column;}.bk-root .bk-tabs-header.bk-left .bk-headers,.bk-root .bk-tabs-header.bk-right .bk-headers{flex-direction:column;-webkit-flex-direction:column;}.bk-root .bk-tabs-header .bk-headers{position:relative;display:flex;display:-webkit-flex;flex-wrap:nowrap;-webkit-flex-wrap:nowrap;align-items:center;-webkit-align-items:center;}.bk-root .bk-tabs-header .bk-tab{padding:4px 8px;border:solid transparent;white-space:nowrap;cursor:pointer;}.bk-root .bk-tabs-header .bk-tab:hover{background-color:#f2f2f2;}.bk-root .bk-tabs-header .bk-tab.bk-active{color:#4d4d4d;background-color:white;border-color:#e6e6e6;}.bk-root .bk-tabs-header .bk-tab .bk-close{margin-left:10px;}.bk-root .bk-tabs-header.bk-above .bk-tab{border-width:3px 1px 0px 1px;border-radius:4px 4px 0 0;}.bk-root .bk-tabs-header.bk-right .bk-tab{border-width:1px 3px 1px 0px;border-radius:0 4px 4px 0;}.bk-root .bk-tabs-header.bk-below .bk-tab{border-width:0px 1px 3px 1px;border-radius:0 0 4px 4px;}.bk-root .bk-tabs-header.bk-left .bk-tab{border-width:1px 0px 1px 3px;border-radius:4px 0 0 4px;}.bk-root .bk-close{display:inline-block;width:10px;height:10px;vertical-align:middle;background-image:url(\'data:image/svg+xml;utf8,      <svg viewPort="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg">        <line x1="1" y1="9" x2="9" y2="1" stroke="gray" stroke-width="2"/>        <line x1="1" y1="1" x2="9" y2="9" stroke="gray" stroke-width="2"/>      </svg>\');}.bk-root .bk-close:hover{background-image:url(\'data:image/svg+xml;utf8,      <svg viewPort="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg">        <line x1="1" y1="9" x2="9" y2="1" stroke="red" stroke-width="2"/>        <line x1="1" y1="1" x2="9" y2="9" stroke="red" stroke-width="2"/>      </svg>\');}'},function e(t,r,n,a,i){a(),n.root="bk-root",n.btn="bk-btn",n.active="bk-active",n.btn_default="bk-btn-default",n.btn_primary="bk-btn-primary",n.btn_success="bk-btn-success",n.btn_warning="bk-btn-warning",n.btn_danger="bk-btn-danger",n.btn_light="bk-btn-light",n.btn_group="bk-btn-group",n.dropdown_toggle="bk-dropdown-toggle",n.default=".bk-root .bk-btn{height:100%;display:inline-block;text-align:center;vertical-align:middle;white-space:nowrap;cursor:pointer;padding:6px 12px;font-size:12px;border:1px solid transparent;border-radius:4px;outline:0;user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;}.bk-root .bk-btn:hover,.bk-root .bk-btn:focus{text-decoration:none;}.bk-root .bk-btn:active,.bk-root .bk-btn.bk-active{background-image:none;box-shadow:inset 0 3px 5px rgba(0, 0, 0, 0.125);}.bk-root .bk-btn[disabled]{cursor:not-allowed;pointer-events:none;opacity:0.65;box-shadow:none;}.bk-root .bk-btn-default{color:#333;background-color:#fff;border-color:#ccc;}.bk-root .bk-btn-default:hover{background-color:#f5f5f5;border-color:#b8b8b8;}.bk-root .bk-btn-default.bk-active{background-color:#ebebeb;border-color:#adadad;}.bk-root .bk-btn-default[disabled],.bk-root .bk-btn-default[disabled]:hover,.bk-root .bk-btn-default[disabled]:focus,.bk-root .bk-btn-default[disabled]:active,.bk-root .bk-btn-default[disabled].bk-active{background-color:#e6e6e6;border-color:#ccc;}.bk-root .bk-btn-primary{color:#fff;background-color:#428bca;border-color:#357ebd;}.bk-root .bk-btn-primary:hover{background-color:#3681c1;border-color:#2c699e;}.bk-root .bk-btn-primary.bk-active{background-color:#3276b1;border-color:#285e8e;}.bk-root .bk-btn-primary[disabled],.bk-root .bk-btn-primary[disabled]:hover,.bk-root .bk-btn-primary[disabled]:focus,.bk-root .bk-btn-primary[disabled]:active,.bk-root .bk-btn-primary[disabled].bk-active{background-color:#506f89;border-color:#357ebd;}.bk-root .bk-btn-success{color:#fff;background-color:#5cb85c;border-color:#4cae4c;}.bk-root .bk-btn-success:hover{background-color:#4eb24e;border-color:#409240;}.bk-root .bk-btn-success.bk-active{background-color:#47a447;border-color:#398439;}.bk-root .bk-btn-success[disabled],.bk-root .bk-btn-success[disabled]:hover,.bk-root .bk-btn-success[disabled]:focus,.bk-root .bk-btn-success[disabled]:active,.bk-root .bk-btn-success[disabled].bk-active{background-color:#667b66;border-color:#4cae4c;}.bk-root .bk-btn-warning{color:#fff;background-color:#f0ad4e;border-color:#eea236;}.bk-root .bk-btn-warning:hover{background-color:#eea43b;border-color:#e89014;}.bk-root .bk-btn-warning.bk-active{background-color:#ed9c28;border-color:#d58512;}.bk-root .bk-btn-warning[disabled],.bk-root .bk-btn-warning[disabled]:hover,.bk-root .bk-btn-warning[disabled]:focus,.bk-root .bk-btn-warning[disabled]:active,.bk-root .bk-btn-warning[disabled].bk-active{background-color:#c89143;border-color:#eea236;}.bk-root .bk-btn-danger{color:#fff;background-color:#d9534f;border-color:#d43f3a;}.bk-root .bk-btn-danger:hover{background-color:#d5433e;border-color:#bd2d29;}.bk-root .bk-btn-danger.bk-active{background-color:#d2322d;border-color:#ac2925;}.bk-root .bk-btn-danger[disabled],.bk-root .bk-btn-danger[disabled]:hover,.bk-root .bk-btn-danger[disabled]:focus,.bk-root .bk-btn-danger[disabled]:active,.bk-root .bk-btn-danger[disabled].bk-active{background-color:#a55350;border-color:#d43f3a;}.bk-root .bk-btn-light{color:#333;background-color:#fff;border-color:#ccc;border-color:transparent;}.bk-root .bk-btn-light:hover{background-color:#f5f5f5;border-color:#b8b8b8;}.bk-root .bk-btn-light.bk-active{background-color:#ebebeb;border-color:#adadad;}.bk-root .bk-btn-light[disabled],.bk-root .bk-btn-light[disabled]:hover,.bk-root .bk-btn-light[disabled]:focus,.bk-root .bk-btn-light[disabled]:active,.bk-root .bk-btn-light[disabled].bk-active{background-color:#e6e6e6;border-color:#ccc;}.bk-root .bk-btn-group{height:100%;display:flex;display:-webkit-flex;flex-wrap:nowrap;-webkit-flex-wrap:nowrap;align-items:center;-webkit-align-items:center;flex-direction:row;-webkit-flex-direction:row;}.bk-root .bk-btn-group > .bk-btn{flex-grow:1;-webkit-flex-grow:1;}.bk-root .bk-btn-group > .bk-btn + .bk-btn{margin-left:-1px;}.bk-root .bk-btn-group > .bk-btn:first-child:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0;}.bk-root .bk-btn-group > .bk-btn:not(:first-child):last-child{border-bottom-left-radius:0;border-top-left-radius:0;}.bk-root .bk-btn-group > .bk-btn:not(:first-child):not(:last-child){border-radius:0;}.bk-root .bk-btn-group .bk-dropdown-toggle{flex:0 0 0;-webkit-flex:0 0 0;padding:6px 6px;}"},function e(t,r,n,a,i){a();const e=t(320);class o extends e.ColumnView{}n.WidgetBoxView=o,o.__name__="WidgetBoxView";class s extends e.Column{constructor(e){super(e)}static init_WidgetBox(){this.prototype.default_view=o}}n.WidgetBox=s,s.__name__="WidgetBox",s.init_WidgetBox()},function e(t,r,n,a,i){a(),i("MapOptions",t(331).MapOptions),i("GMapOptions",t(331).GMapOptions),i("GMapPlot",t(331).GMapPlot),i("Plot",t(332).Plot)},function e(t,r,n,a,i){a();const o=t(332),s=t(53),l=t(156),e=t(337);i("GMapPlotView",e.GMapPlotView);class c extends s.Model{constructor(e){super(e)}static init_MapOptions(){this.define(({Int:e,Number:t})=>({lat:[t],lng:[t],zoom:[e,12]}))}}n.MapOptions=c,c.__name__="MapOptions",c.init_MapOptions();class u extends c{constructor(e){super(e)}static init_GMapOptions(){this.define(({Boolean:e,Int:t,String:r})=>({map_type:[r,"roadmap"],scale_control:[e,!1],styles:[r],tilt:[t,45]}))}}n.GMapOptions=u,u.__name__="GMapOptions",u.init_GMapOptions();class f extends o.Plot{constructor(e){super(e),this.use_map=!0}static init_GMapPlot(){this.prototype.default_view=e.GMapPlotView,this.define(({String:e,Ref:t})=>({map_options:[t(u)],api_key:[e],api_version:[e,"3.43"]})),this.override({x_range:()=>new l.Range1d,y_range:()=>new l.Range1d})}}n.GMapPlot=f,f.__name__="GMapPlot",f.init_GMapPlot()},function c(e,t,r,n,a){n();const i=e(1),o=i.__importStar(e(48)),u=i.__importStar(e(18)),s=e(15),c=e(20),l=e(9),f=e(13),d=e(8),h=e(319),p=e(163),v=e(316),g=e(40),m=e(138),_=e(218),y=e(235),b=e(105),x=e(146),w=e(130),A=e(41),T=e(62),k=e(61),M=e(159),S=e(333);a("PlotView",S.PlotView);class C extends h.LayoutDOM{constructor(e){super(e),this.use_map=!1}static init_Plot(){this.prototype.default_view=S.PlotView,this.mixins([["outline_",o.Line],["background_",o.Fill],["border_",o.Fill]]),this.define(({Boolean:e,Number:t,String:r,Array:n,Dict:a,Or:i,Ref:o,Null:s,Nullable:l})=>({toolbar:[o(y.Toolbar),()=>new y.Toolbar],toolbar_location:[l(c.Location),"right"],toolbar_sticky:[e,!0],plot_width:[u.Alias("width")],plot_height:[u.Alias("height")],frame_width:[l(t),null],frame_height:[l(t),null],title:[i(o(m.Title),r,s),()=>new m.Title({text:""})],title_location:[l(c.Location),"above"],above:[n(i(o(g.Annotation),o(p.Axis))),[]],below:[n(i(o(g.Annotation),o(p.Axis))),[]],left:[n(i(o(g.Annotation),o(p.Axis))),[]],right:[n(i(o(g.Annotation),o(p.Axis))),[]],center:[n(i(o(g.Annotation),o(v.Grid))),[]],renderers:[n(o(A.Renderer)),[]],x_range:[o(b.Range),()=>new M.DataRange1d],extra_x_ranges:[a(o(b.Range)),{}],y_range:[o(b.Range),()=>new M.DataRange1d],extra_y_ranges:[a(o(b.Range)),{}],x_scale:[o(x.Scale),()=>new _.LinearScale],y_scale:[o(x.Scale),()=>new _.LinearScale],lod_factor:[t,10],lod_interval:[t,300],lod_threshold:[l(t),2e3],lod_timeout:[t,500],hidpi:[e,!0],output_backend:[c.OutputBackend,"canvas"],min_border:[l(t),5],min_border_top:[l(t),null],min_border_left:[l(t),null],min_border_bottom:[l(t),null],min_border_right:[l(t),null],inner_width:[t,0],inner_height:[t,0],outer_width:[t,0],outer_height:[t,0],match_aspect:[e,!1],aspect_scale:[t,1],reset_policy:[c.ResetPolicy,"standard"]})),this.override({width:600,height:600,outline_line_color:"#e5e5e5",border_fill_color:"#ffffff",background_fill_color:"#ffffff"})}_doc_attached(){super._doc_attached(),this._push_changes([[this.properties.inner_height,null,this.inner_height],[this.properties.inner_width,null,this.inner_width]])}initialize(){super.initialize(),this.reset=new s.Signal0(this,"reset");for(const t of f.values(this.extra_x_ranges).concat(this.x_range)){let e=t.plots;d.isArray(e)&&(e=e.concat(this),t.setv({plots:e},{silent:!0}))}for(const t of f.values(this.extra_y_ranges).concat(this.y_range)){let e=t.plots;d.isArray(e)&&(e=e.concat(this),t.setv({plots:e},{silent:!0}))}}add_layout(e,t="center"){const r=this.properties[t].get_value();this.setv({[t]:[...r,e]})}remove_layout(t){const e=e=>{l.remove_by(e,e=>e==t)};e(this.left),e(this.right),e(this.above),e(this.below),e(this.center)}get data_renderers(){return this.renderers.filter(e=>e instanceof T.DataRenderer)}add_renderers(...e){this.renderers=this.renderers.concat(e)}add_glyph(e,t=new w.ColumnDataSource,r={}){const n=new k.GlyphRenderer(Object.assign(Object.assign({},r),{data_source:t,glyph:e}));return this.add_renderers(n),n}add_tools(...e){this.toolbar.tools=this.toolbar.tools.concat(e)}get panels(){return[...this.side_panels,...this.center]}get side_panels(){const{above:e,below:t,left:r,right:n}=this;return l.concat([e,t,r,n])}}r.Plot=C,C.__name__="Plot",C.init_Plot()},function T(e,t,r,n,a){n();const i=e(1),o=e(144),s=e(262),l=e(319),T=e(40),k=e(138),c=e(163),M=e(234),u=e(264),f=e(122),d=e(45),h=e(19),p=e(334),S=e(8),C=e(9),v=e(249),L=e(222),E=e(225),D=e(223),O=e(140),g=e(99),m=e(335),_=e(336),y=e(28);class b extends l.LayoutDOMView{constructor(){super(...arguments),this._outer_bbox=new g.BBox,this._inner_bbox=new g.BBox,this._needs_paint=!0,this._needs_layout=!1,this._invalidated_painters=new Set,this._invalidate_all=!0}get canvas(){return this.canvas_view}get state(){return this._state_manager}set invalidate_dataranges(e){this._range_manager.invalidate_dataranges=e}renderer_view(t){const r=this.renderer_views.get(t);if(null==r)for(const[,r]of this.renderer_views){const e=r.renderer_view(t);if(null!=e)return e}return r}get is_paused(){return null!=this._is_paused&&0!==this._is_paused}get child_models(){return[]}pause(){null==this._is_paused?this._is_paused=1:this._is_paused+=1}unpause(e=!1){if(null==this._is_paused)throw new Error("wasn't paused");this._is_paused-=1,0!=this._is_paused||e||this.request_paint("everything")}request_render(){this.request_paint("everything")}request_paint(e){this.invalidate_painters(e),this.schedule_paint()}invalidate_painters(t){if("everything"==t)this._invalidate_all=!0;else if(S.isArray(t))for(const e of t)this._invalidated_painters.add(e);else this._invalidated_painters.add(t)}schedule_paint(){if(!this.is_paused){const e=this.throttled_paint();this._ready=this._ready.then(()=>e)}}request_layout(){this._needs_layout=!0,this.request_paint("everything")}reset(){"standard"==this.model.reset_policy&&(this.state.clear(),this.reset_range(),this.reset_selection()),this.model.trigger_event(new u.Reset)}remove(){f.remove_views(this.renderer_views),f.remove_views(this.tool_views),this.canvas_view.remove(),super.remove()}render(){super.render(),this.el.appendChild(this.canvas_view.el),this.canvas_view.render()}initialize(){this.pause(),super.initialize(),this.lod_started=!1,this.visuals=new d.Visuals(this),this._initial_state={selection:new Map,dimensions:{width:0,height:0}},this.visibility_callbacks=[],this.renderer_views=new Map,this.tool_views=new Map,this.frame=new o.CartesianFrame(this.model.x_scale,this.model.y_scale,this.model.x_range,this.model.y_range,this.model.extra_x_ranges,this.model.extra_y_ranges),this._range_manager=new m.RangeManager(this),this._state_manager=new _.StateManager(this,this._initial_state),this.throttled_paint=p.throttle(()=>this.repaint(),1e3/60);const{title_location:e,title:t}=this.model;null!=e&&null!=t&&(this._title=t instanceof k.Title?t:new k.Title({text:t}));const{toolbar_location:r,toolbar:n}=this.model;null!=r&&null!=n&&(this._toolbar=new M.ToolbarPanel({toolbar:n}),n.toolbar_location=r)}async lazy_initialize(){await super.lazy_initialize();const{hidpi:e,output_backend:t}=this.model,r=new s.Canvas({hidpi:e,output_backend:t});this.canvas_view=await f.build_view(r,{parent:this}),this.canvas_view.plot_views=[this],await this.build_renderer_views(),await this.build_tool_views(),this._range_manager.update_dataranges(),this.unpause(!0),h.logger.debug("PlotView initialized")}_width_policy(){return null==this.model.frame_width?super._width_policy():"min"}_height_policy(){return null==this.model.frame_height?super._height_policy():"min"}_update_layout(){var r,e,t,n,a;this.layout=new E.BorderLayout,this.layout.set_sizing(this.box_sizing());const i=C.copy(this.model.above),o=C.copy(this.model.below),s=C.copy(this.model.left),l=C.copy(this.model.right),c=e=>{switch(e){case"above":return i;case"below":return o;case"left":return s;case"right":return l}},{title_location:u,title:f}=this.model;null!=u&&null!=f&&c(u).push(this._title);const{toolbar_location:d,toolbar:h}=this.model;if(null!=d&&null!=h){const r=c(d);let t=!0;if(this.model.toolbar_sticky)for(let e=0;e<r.length;e++){const n=r[e];if(n instanceof k.Title){r[e]="above"==d||"below"==d?[n,this._toolbar]:[this._toolbar,n],t=!1;break}}t&&r.push(this._toolbar)}const p=(e,t)=>{var r;const n=this.renderer_view(t);return n.panel=new O.Panel(e),null===(r=n.update_layout)||void 0===r||r.call(n),n.layout},v=(r,n)=>{const a="above"==r||"below"==r,i=[];for(const t of n)if(S.isArray(t)){const n=t.map(e=>{const t=p(r,e);if(e instanceof M.ToolbarPanel){const r=a?"width_policy":"height_policy";t.set_sizing(Object.assign(Object.assign({},t.sizing),{[r]:"min"}))}return t});let e;a?(e=new D.Row(n),e.set_sizing({width_policy:"max",height_policy:"min"})):(e=new D.Column(n),e.set_sizing({width_policy:"min",height_policy:"max"})),e.absolute=!0,i.push(e)}else i.push(p(r,t));return i},g=null!==(r=this.model.min_border)&&void 0!==r?r:0;this.layout.min_border={left:null!==(e=this.model.min_border_left)&&void 0!==e?e:g,top:null!==(t=this.model.min_border_top)&&void 0!==t?t:g,right:null!==(n=this.model.min_border_right)&&void 0!==n?n:g,bottom:null!==(a=this.model.min_border_bottom)&&void 0!==a?a:g};const m=new L.NodeLayout,_=new L.VStack,y=new L.VStack,b=new L.HStack,x=new L.HStack;m.absolute=!0,_.absolute=!0,y.absolute=!0,b.absolute=!0,x.absolute=!0,m.children=this.model.center.filter(e=>e instanceof T.Annotation).map(e=>{var t;const r=this.renderer_view(e);return null===(t=r.update_layout)||void 0===t||t.call(r),r.layout}).filter(e=>null!=e);const{frame_width:w,frame_height:A}=this.model;m.set_sizing(Object.assign(Object.assign({},null!=w?{width_policy:"fixed",width:w}:{width_policy:"fit"}),null!=A?{height_policy:"fixed",height:A}:{height_policy:"fit"})),m.on_resize(e=>this.frame.set_geometry(e)),_.children=C.reversed(v("above",i)),y.children=v("below",o),b.children=C.reversed(v("left",s)),x.children=v("right",l),_.set_sizing({width_policy:"fit",height_policy:"min"}),y.set_sizing({width_policy:"fit",height_policy:"min"}),b.set_sizing({width_policy:"min",height_policy:"fit"}),x.set_sizing({width_policy:"min",height_policy:"fit"}),this.layout.center_panel=m,this.layout.top_panel=_,this.layout.bottom_panel=y,this.layout.left_panel=b,this.layout.right_panel=x}get axis_views(){const t=[];for(const[,e]of this.renderer_views)e instanceof c.AxisView&&t.push(e);return t}set_toolbar_visibility(t){for(const e of this.visibility_callbacks)e(t)}update_range(e,t){this.pause(),this._range_manager.update(e,t),this.unpause()}reset_range(){this.update_range(null)}get_selection(){const r=new Map;for(const t of this.model.data_renderers){const{selected:e}=t.selection_manager.source;r.set(t,e)}return r}update_selection(n){for(const r of this.model.data_renderers){const t=r.selection_manager.source;if(null!=n){const e=n.get(r);null!=e&&t.selected.update(e,!0)}else t.selection_manager.clear()}}reset_selection(){this.update_selection(null)}_invalidate_layout(){(()=>{var r;for(const t of this.model.side_panels){const e=this.renderer_views.get(t);if(null===(r=e.layout)||void 0===r?void 0:r.has_size_changed())return this.invalidate_painters(e),!0}return!1})()&&this.root.compute_layout()}get_renderer_views(){return this.computed_renderers.map(e=>this.renderer_views.get(e))}*_compute_renderers(){const{above:e,below:t,left:r,right:n,center:a,renderers:i}=this.model;yield*i,yield*e,yield*t,yield*r,yield*n,yield*a,null!=this._title&&(yield this._title),null!=this._toolbar&&(yield this._toolbar);for(const e of this.model.toolbar.tools)null!=e.overlay&&(yield e.overlay),yield*e.synthetic_renderers}async build_renderer_views(){this.computed_renderers=[...this._compute_renderers()],await f.build_views(this.renderer_views,this.computed_renderers,{parent:this})}async build_tool_views(){const e=this.model.toolbar.tools;(await f.build_views(this.tool_views,e,{parent:this})).map(e=>this.canvas_view.ui_event_bus.register_tool(e))}connect_signals(){super.connect_signals();const{x_ranges:e,y_ranges:t}=this.frame;for(const[,t]of e)this.connect(t.change,()=>{this._needs_layout=!0,this.request_paint("everything")});for(const[,e]of t)this.connect(e.change,()=>{this._needs_layout=!0,this.request_paint("everything")});const{above:r,below:n,left:a,right:i,center:o,renderers:s}=this.model.properties;this.on_change([r,n,a,i,o,s],async()=>await this.build_renderer_views()),this.connect(this.model.toolbar.properties.tools.change,async()=>{await this.build_renderer_views(),await this.build_tool_views()}),this.connect(this.model.change,()=>this.request_paint("everything")),this.connect(this.model.reset,()=>this.reset())}has_finished(){if(!super.has_finished())return!1;if(this.model.visible)for(const[,e]of this.renderer_views)if(!e.has_finished())return!1;return!0}after_layout(){var e;super.after_layout();for(const[,t]of this.renderer_views)t instanceof T.AnnotationView&&(null===(e=t.after_layout)||void 0===e||e.call(t));if(this._needs_layout=!1,this.model.setv({inner_width:Math.round(this.frame.bbox.width),inner_height:Math.round(this.frame.bbox.height),outer_width:Math.round(this.layout.bbox.width),outer_height:Math.round(this.layout.bbox.height)},{no_change:!0}),!1!==this.model.match_aspect&&(this.pause(),this._range_manager.update_dataranges(),this.unpause(!0)),!this._outer_bbox.equals(this.layout.bbox)){const{width:e,height:t}=this.layout.bbox;this.canvas_view.resize(e,t),this._outer_bbox=this.layout.bbox,this._invalidate_all=!0,this._needs_paint=!0}const{inner_bbox:t}=this.layout;this._inner_bbox.equals(t)||(this._inner_bbox=t,this._needs_paint=!0),this._needs_paint&&this.paint()}repaint(){this._needs_layout&&this._invalidate_layout(),this.paint()}paint(){var e;if(this.is_paused||!this.model.visible)return;h.logger.trace(`PlotView.paint() for ${this.model.id}`);const{document:t}=this.model;if(null!=t){const e=t.interactive_duration();e>=0&&e<this.model.lod_interval?setTimeout(()=>{t.interactive_duration()>this.model.lod_timeout&&t.interactive_stop(),this.request_paint("everything")},this.model.lod_timeout):t.interactive_stop()}this._range_manager.invalidate_dataranges&&(this._range_manager.update_dataranges(),this._invalidate_layout());let r=!1,n=!1;if(this._invalidate_all)r=!0,n=!0;else for(const e of this._invalidated_painters){const{level:t}=e.model;if("overlay"!=t?r=!0:n=!0,r&&n)break}this._invalidated_painters.clear(),this._invalidate_all=!1;const a=[this.frame.bbox.left,this.frame.bbox.top,this.frame.bbox.width,this.frame.bbox.height],{primary:i,overlays:o}=this.canvas_view;r&&(i.prepare(),this.canvas_view.prepare_webgl(a),this._map_hook(i.ctx,a),this._paint_empty(i.ctx,a),this._paint_outline(i.ctx,a),this._paint_levels(i.ctx,"image",a,!0),this._paint_levels(i.ctx,"underlay",a,!0),this._paint_levels(i.ctx,"glyph",a,!0),this._paint_levels(i.ctx,"guide",a,!1),this._paint_levels(i.ctx,"annotation",a,!1),i.finish()),(n||y.settings.wireframe)&&(o.prepare(),this._paint_levels(o.ctx,"overlay",a,!1),y.settings.wireframe&&this._paint_layout(o.ctx,this.layout),o.finish()),null==this._initial_state.range&&(this._initial_state.range=null!==(e=this._range_manager.compute_initial())&&void 0!==e?e:void 0),this._needs_paint=!1}_paint_levels(r,n,a,i){for(const t of this.computed_renderers){if(t.level!=n)continue;const e=this.renderer_views.get(t);r.save(),(i||e.needs_clip)&&(r.beginPath(),r.rect(...a),r.clip()),e.render(),r.restore(),e.has_webgl&&e.needs_webgl_blit&&this.canvas_view.blit_webgl(r)}}_paint_layout(e,t){const{x:r,y:n,width:a,height:i}=t.bbox;e.strokeStyle="blue",e.strokeRect(r,n,a,i);for(const a of t)e.save(),t.absolute||e.translate(r,n),this._paint_layout(e,a),e.restore()}_map_hook(e,t){}_paint_empty(e,t){const[r,n,a,i]=[0,0,this.layout.bbox.width,this.layout.bbox.height],[o,s,l,c]=t;this.visuals.border_fill.doit&&(this.visuals.border_fill.set_value(e),e.fillRect(r,n,a,i),e.clearRect(o,s,l,c)),this.visuals.background_fill.doit&&(this.visuals.background_fill.set_value(e),e.fillRect(o,s,l,c))}_paint_outline(a,i){if(this.visuals.outline_line.doit){a.save(),this.visuals.outline_line.set_value(a);let[e,t,r,n]=i;e+r==this.layout.bbox.width&&(r-=1),t+n==this.layout.bbox.height&&(n-=1),a.strokeRect(e,t,r,n),a.restore()}}to_blob(){return this.canvas_view.to_blob()}export(e,t=!0){const r="png"==e?"canvas":"svg",n=new v.CanvasLayer(r,t),{width:a,height:i}=this.layout.bbox;n.resize(a,i);const{canvas:o}=this.canvas_view.compose();return n.ctx.drawImage(o,0,0),n}serializable_state(){const e=super.serializable_state(),{children:t}=e,r=i.__rest(e,["children"]),n=this.get_renderer_views().map(e=>e.serializable_state()).filter(e=>null!=e.bbox);return Object.assign(Object.assign({},r),{children:[...null!=t?t:[],...n]})}}r.PlotView=b,b.__name__="PlotView"},function e(t,r,n,a,i){a(),n.throttle=function(i,o){let s=null,l=0,c=!1;return function(){return new Promise((e,t)=>{const r=function(){l=Date.now(),s=null,c=!1;try{i(),e()}catch(e){t(e)}},n=Date.now(),a=o-(n-l);a<=0&&!c?(null!=s&&clearTimeout(s),c=!0,requestAnimationFrame(r)):s||c?e():s=setTimeout(()=>requestAnimationFrame(r),a)})}}},function e(t,r,n,a,i){a();const l=t(159),c=t(19);class o{constructor(e){this.parent=e,this.invalidate_dataranges=!0}get frame(){return this.parent.frame}update(t,r){const{x_ranges:n,y_ranges:a}=this.frame;if(null==t){for(const[,t]of n)t.reset();for(const[,t]of a)t.reset();this.update_dataranges()}else{const e=[];for(const[r,a]of n)e.push([a,t.xrs.get(r)]);for(const[r,n]of a)e.push([n,t.yrs.get(r)]);(null==r?void 0:r.scrolling)&&this._update_ranges_together(e),this._update_ranges_individually(e,r)}}reset(){this.update(null)}update_dataranges(){const e=new Map,t=new Map;let r=!1;for(const[,e]of this.frame.x_ranges)e instanceof l.DataRange1d&&"log"==e.scale_hint&&(r=!0);for(const[,e]of this.frame.y_ranges)e instanceof l.DataRange1d&&"log"==e.scale_hint&&(r=!0);for(const n of this.parent.model.data_renderers){const a=this.parent.renderer_view(n);if(null==a)continue;const l=a.glyph_view.bounds();if(null!=l&&e.set(n,l),r){const e=a.glyph_view.log_bounds();null!=e&&t.set(n,e)}}let n=!1,a=!1;const{width:i,height:o}=this.frame.bbox;let s;!1!==this.parent.model.match_aspect&&0!=i&&0!=o&&(s=1/this.parent.model.aspect_scale*(i/o));for(const[,r]of this.frame.x_ranges){if(r instanceof l.DataRange1d){const a="log"==r.scale_hint?t:e;r.update(a,0,this.parent.model,s),r.follow&&(n=!0)}null!=r.bounds&&(a=!0)}for(const[,r]of this.frame.y_ranges){if(r instanceof l.DataRange1d){const a="log"==r.scale_hint?t:e;r.update(a,1,this.parent.model,s),r.follow&&(n=!0)}null!=r.bounds&&(a=!0)}if(n&&a){c.logger.warn("Follow enabled so bounds are unset.");for(const[,e]of this.frame.x_ranges)e.bounds=null;for(const[,e]of this.frame.y_ranges)e.bounds=null}this.invalidate_dataranges=!1}compute_initial(){let t=!0;const{x_ranges:r,y_ranges:n}=this.frame,a=new Map,i=new Map;for(const[n,i]of r){const{start:r,end:e}=i;if(null==r||null==e||isNaN(r+e)){t=!1;break}a.set(n,{start:r,end:e})}if(t)for(const[r,a]of n){const{start:n,end:e}=a;if(null==n||null==e||isNaN(n+e)){t=!1;break}i.set(r,{start:n,end:e})}return t?{xrs:a,yrs:i}:(c.logger.warn("could not set initial ranges"),null)}_update_ranges_together(r){let n=1;for(const[e,t]of r)n=Math.min(n,this._get_weight_to_constrain_interval(e,t));if(n<1)for(const[e,t]of r)t.start=n*t.start+(1-n)*e.start,t.end=n*t.end+(1-n)*e.end}_update_ranges_individually(n,a){const i=!!(null==a?void 0:a.panning),o=!!(null==a?void 0:a.scrolling);let s=!1;for(const[a,r]of n){if(!o){const n=this._get_weight_to_constrain_interval(a,r);n<1&&(r.start=n*r.start+(1-n)*a.start,r.end=n*r.end+(1-n)*a.end)}if(null!=a.bounds&&"auto"!=a.bounds){const[n,e]=a.bounds,t=Math.abs(r.end-r.start);a.is_reversed?(null!=n&&n>=r.end&&(s=!0,r.end=n,(i||o)&&(r.start=n+t)),null!=e&&e<=r.start&&(s=!0,r.start=e,(i||o)&&(r.end=e-t))):(null!=n&&n>=r.start&&(s=!0,r.start=n,(i||o)&&(r.end=n+t)),null!=e&&e<=r.end&&(s=!0,r.end=e,(i||o)&&(r.start=e-t)))}}if(!(o&&s&&(null==a?void 0:a.maintain_focus)))for(const[a,i]of n)a.have_updated_interactively=!0,a.start==i.start&&a.end==i.end||a.setv(i)}_get_weight_to_constrain_interval(r,n){const{min_interval:a}=r;let{max_interval:i}=r;if(null!=r.bounds&&"auto"!=r.bounds){const[n,a]=r.bounds;if(null!=n&&null!=a){const r=Math.abs(a-n);i=null!=i?Math.min(i,r):r}}let o=1;if(null!=a||null!=i){const e=Math.abs(r.end-r.start),t=Math.abs(n.end-n.start);null!=a&&a>0&&t<a&&(o=(e-a)/(e-t)),null!=i&&i>0&&t>i&&(o=(i-e)/(t-e)),o=Math.max(0,Math.min(1,o))}return o}}n.RangeManager=o,o.__name__="RangeManager"},function e(t,r,n,a,i){a();const o=t(15);class s{constructor(e,t){this.parent=e,this.initial_state=t,this.changed=new o.Signal0(this.parent,"state_changed"),this.history=[],this.index=-1}_do_state_change(e){const t=null!=this.history[e]?this.history[e].state:this.initial_state;null!=t.range&&this.parent.update_range(t.range),null!=t.selection&&this.parent.update_selection(t.selection)}push(e,t){const{history:r,index:n}=this,a=null!=r[n]?r[n].state:{},i=Object.assign(Object.assign(Object.assign({},this.initial_state),a),t);this.history=this.history.slice(0,this.index+1),this.history.push({type:e,state:i}),this.index=this.history.length-1,this.changed.emit()}clear(){this.history=[],this.index=-1,this.changed.emit()}undo(){this.can_undo&&(this.index-=1,this._do_state_change(this.index),this.changed.emit())}redo(){this.can_redo&&(this.index+=1,this._do_state_change(this.index),this.changed.emit())}get can_undo(){return this.index>=0}get can_redo(){return this.index<this.history.length-1}}n.StateManager=s,s.__name__="StateManager"},function l(e,t,r,n,a){n();const i=e(19),o=e(15),s=e(43),c=e(65),l=e(22),u=e(333),f=new o.Signal0({},"gmaps_ready");class d extends u.PlotView{initialize(){this.pause(),super.initialize(),this._tiles_loaded=!1,this.zoom_count=0;const{zoom:e,lat:t,lng:r}=this.model.map_options;if(this.initial_zoom=e,this.initial_lat=t,this.initial_lng=r,!this.model.api_key){const e="https://developers.google.com/maps/documentation/javascript/get-api-key";i.logger.error(`api_key is required. See ${e} for more information on how to obtain your own.`)}if("undefined"==typeof google||null==google.maps){if(void 0===window._bokeh_gmaps_callback){const{api_key:e,api_version:t}=this.model;!function(e,t){window._bokeh_gmaps_callback=()=>f.emit();const r=encodeURIComponent,n=document.createElement("script");n.type="text/javascript",n.src=`https://maps.googleapis.com/maps/api/js?v=${r(t)}&key=${r(e)}&callback=_bokeh_gmaps_callback`,document.body.appendChild(n)}(e,t)}f.connect(()=>this.request_paint("everything"))}this.unpause()}remove(){s.remove(this.map_el),super.remove()}update_range(t,r){var n,a;if(null==t)this.map.setCenter({lat:this.initial_lat,lng:this.initial_lng}),this.map.setOptions({zoom:this.initial_zoom}),super.update_range(null,r);else if(null!=t.sdx||null!=t.sdy)this.map.panBy(null!==(n=t.sdx)&&void 0!==n?n:0,null!==(a=t.sdy)&&void 0!==a?a:0),super.update_range(t,r);else if(null!=t.factor){if(10!==this.zoom_count)return void(this.zoom_count+=1);this.zoom_count=0,this.pause(),super.update_range(t,r);const n=t.factor<0?-1:1,a=this.map.getZoom(),e=a+n;if(e>=2){this.map.setZoom(e);const[t,r,,]=this._get_projected_bounds();r-t<0&&this.map.setZoom(a)}this.unpause()}this._set_bokeh_ranges()}_build_map(){const{maps:e}=google;this.map_types={satellite:e.MapTypeId.SATELLITE,terrain:e.MapTypeId.TERRAIN,roadmap:e.MapTypeId.ROADMAP,hybrid:e.MapTypeId.HYBRID};const t=this.model.map_options,r={center:new e.LatLng(t.lat,t.lng),zoom:t.zoom,disableDefaultUI:!0,mapTypeId:this.map_types[t.map_type],scaleControl:t.scale_control,tilt:t.tilt};null!=t.styles&&(r.styles=JSON.parse(t.styles)),this.map_el=s.div({style:{position:"absolute"}}),this.canvas_view.add_underlay(this.map_el),this.map=new e.Map(this.map_el,r),e.event.addListener(this.map,"idle",()=>this._set_bokeh_ranges()),e.event.addListener(this.map,"bounds_changed",()=>this._set_bokeh_ranges()),e.event.addListenerOnce(this.map,"tilesloaded",()=>this._render_finished()),this.connect(this.model.properties.map_options.change,()=>this._update_options()),this.connect(this.model.map_options.properties.styles.change,()=>this._update_styles()),this.connect(this.model.map_options.properties.lat.change,()=>this._update_center("lat")),this.connect(this.model.map_options.properties.lng.change,()=>this._update_center("lng")),this.connect(this.model.map_options.properties.zoom.change,()=>this._update_zoom()),this.connect(this.model.map_options.properties.map_type.change,()=>this._update_map_type()),this.connect(this.model.map_options.properties.scale_control.change,()=>this._update_scale_control()),this.connect(this.model.map_options.properties.tilt.change,()=>this._update_tilt())}_render_finished(){this._tiles_loaded=!0,this.notify_finished()}has_finished(){return super.has_finished()&&!0===this._tiles_loaded}_get_latlon_bounds(){const e=this.map.getBounds(),t=e.getNorthEast(),r=e.getSouthWest();return[r.lng(),t.lng(),r.lat(),t.lat()]}_get_projected_bounds(){const[e,t,r,n]=this._get_latlon_bounds(),[a,i]=c.wgs84_mercator.compute(e,r),[o,s]=c.wgs84_mercator.compute(t,n);return[a,o,i,s]}_set_bokeh_ranges(){const[e,t,r,n]=this._get_projected_bounds();this.frame.x_range.setv({start:e,end:t}),this.frame.y_range.setv({start:r,end:n})}_update_center(e){const t=this.map.getCenter().toJSON();t[e]=this.model.map_options[e],this.map.setCenter(t),this._set_bokeh_ranges()}_update_map_type(){this.map.setOptions({mapTypeId:this.map_types[this.model.map_options.map_type]})}_update_scale_control(){this.map.setOptions({scaleControl:this.model.map_options.scale_control})}_update_tilt(){this.map.setOptions({tilt:this.model.map_options.tilt})}_update_options(){this._update_styles(),this._update_center("lat"),this._update_center("lng"),this._update_zoom(),this._update_map_type()}_update_styles(){this.map.setOptions({styles:JSON.parse(this.model.map_options.styles)})}_update_zoom(){this.map.setOptions({zoom:this.model.map_options.zoom}),this._set_bokeh_ranges()}_map_hook(n,a){if(null==this.map&&"undefined"!=typeof google&&null!=google.maps&&this._build_map(),null!=this.map_el){const[n,e,t,r]=a;this.map_el.style.top=`${e}px`,this.map_el.style.left=`${n}px`,this.map_el.style.width=`${t}px`,this.map_el.style.height=`${r}px`}}_paint_empty(e,t){const r=this.layout.bbox.width,n=this.layout.bbox.height,[a,i,o,s]=t;e.clearRect(0,0,r,n),e.beginPath(),e.moveTo(0,0),e.lineTo(0,n),e.lineTo(r,n),e.lineTo(r,0),e.lineTo(0,0),e.moveTo(a,i),e.lineTo(a+o,i),e.lineTo(a+o,i+s),e.lineTo(a,i+s),e.lineTo(a,i),e.closePath(),null!=this.model.border_fill_color&&(e.fillStyle=l.color2css(this.model.border_fill_color),e.fill())}}r.GMapPlotView=d,d.__name__="GMapPlotView"},function e(t,e,r,n,a){n();t(1).__exportStar(t(169),r)},function e(t,r,n,a,i){a(),i("GlyphRenderer",t(61).GlyphRenderer),i("GraphRenderer",t(123).GraphRenderer),i("GuideRenderer",t(164).GuideRenderer),i("Renderer",t(41).Renderer)},function e(t,r,n,a,i){a();t(1).__exportStar(t(129),n),i("Selection",t(59).Selection)},function e(t,r,n,a,i){a(),i("ServerSentDataSource",t(342).ServerSentDataSource),i("AjaxDataSource",t(344).AjaxDataSource),i("ColumnDataSource",t(130).ColumnDataSource),i("ColumnarDataSource",t(57).ColumnarDataSource),i("CDSView",t(120).CDSView),i("DataSource",t(58).DataSource),i("GeoJSONDataSource",t(345).GeoJSONDataSource),i("WebDataSource",t(343).WebDataSource)},function e(t,r,n,a,i){a();const o=t(343);class s extends o.WebDataSource{constructor(e){super(e),this.initialized=!1}setup(){if(!this.initialized){this.initialized=!0;new EventSource(this.data_url).onmessage=e=>{var t;this.load_data(JSON.parse(e.data),this.mode,null!==(t=this.max_size)&&void 0!==t?t:void 0)}}}}n.ServerSentDataSource=s,s.__name__="ServerSentDataSource"},function e(t,r,n,a,i){a();const o=t(130),s=t(20);class l extends o.ColumnDataSource{constructor(e){super(e)}get_column(e){const t=this.data[e];return null!=t?t:[]}get_length(){var e;return null!==(e=super.get_length())&&void 0!==e?e:0}initialize(){super.initialize(),this.setup()}load_data(r,n,a){const{adapter:i}=this;let o;switch(o=null!=i?i.execute(this,{response:r}):r,n){case"replace":this.data=o;break;case"append":{const r=this.data;for(const n of this.columns()){const i=Array.from(r[n]),e=Array.from(o[n]),t=i.concat(e);o[n]=null!=a?t.slice(-a):t}this.data=o;break}}}static init_WebDataSource(){this.define(({Any:e,Int:t,String:r,Nullable:n})=>({max_size:[n(t),null],mode:[s.UpdateMode,"replace"],adapter:[n(e),null],data_url:[r]}))}}n.WebDataSource=l,l.__name__="WebDataSource",l.init_WebDataSource()},function e(t,r,n,a,i){a();const o=t(343),s=t(20),l=t(19),c=t(13);class u extends o.WebDataSource{constructor(e){super(e),this.interval=null,this.initialized=!1}static init_AjaxDataSource(){this.define(({Boolean:e,Int:t,String:r,Dict:n,Nullable:a})=>({polling_interval:[a(t),null],content_type:[r,"application/json"],http_headers:[n(r),{}],method:[s.HTTPMethod,"POST"],if_modified:[e,!1]}))}destroy(){null!=this.interval&&clearInterval(this.interval),super.destroy()}setup(){if(!this.initialized&&(this.initialized=!0,this.get_data(this.mode),null!=this.polling_interval)){const e=()=>this.get_data(this.mode,this.max_size,this.if_modified);this.interval=setInterval(e,this.polling_interval)}}get_data(e,t=null,r=!1){const n=this.prepare_request();n.addEventListener("load",()=>this.do_load(n,e,null!=t?t:void 0)),n.addEventListener("error",()=>this.do_error(n)),n.send()}prepare_request(){const r=new XMLHttpRequest;r.open(this.method,this.data_url,!0),r.withCredentials=!1,r.setRequestHeader("Content-Type",this.content_type);const n=this.http_headers;for(const[e,t]of c.entries(n))r.setRequestHeader(e,t);return r}do_load(t,r,n){if(200===t.status){const e=JSON.parse(t.responseText);this.load_data(e,r,n)}}do_error(e){l.logger.error(`Failed to fetch JSON from ${this.data_url} with code ${e.status}`)}}n.AjaxDataSource=u,u.__name__="AjaxDataSource",u.init_AjaxDataSource()},function o(e,t,r,n,a){n();const i=e(57),s=e(19),l=e(9),c=e(13);function u(e){return null!=e?e:NaN}const{hasOwnProperty:o}=Object.prototype;class f extends i.ColumnarDataSource{constructor(e){super(e)}static init_GeoJSONDataSource(){this.define(({String:e})=>({geojson:[e]})),this.internal(({Dict:e,Arrayable:t})=>({data:[e(t),{}]}))}initialize(){super.initialize(),this._update_data()}connect_signals(){super.connect_signals(),this.connect(this.properties.geojson.change,()=>this._update_data())}_update_data(){this.data=this.geojson_to_column_data()}_get_new_list_array(e){return l.range(0,e).map(e=>[])}_get_new_nan_array(e){return l.range(0,e).map(e=>NaN)}_add_properties(e,t,r,n){var a;const i=null!==(a=e.properties)&&void 0!==a?a:{};for(const[e,a]of c.entries(i))o.call(t,e)||(t[e]=this._get_new_nan_array(n)),t[e][r]=u(a)}_add_geometry(n,a,i){function o(e,t){return e.concat([[NaN,NaN,NaN]]).concat(t)}switch(n.type){case"Point":{const[o,e,t]=n.coordinates;a.x[i]=o,a.y[i]=e,a.z[i]=u(t);break}case"LineString":{const{coordinates:o}=n;for(let r=0;r<o.length;r++){const[e,t,s]=o[r];a.xs[i][r]=e,a.ys[i][r]=t,a.zs[i][r]=u(s)}break}case"Polygon":{n.coordinates.length>1&&s.logger.warn("Bokeh does not support Polygons with holes in, only exterior ring used.");const o=n.coordinates[0];for(let r=0;r<o.length;r++){const[e,t,s]=o[r];a.xs[i][r]=e,a.ys[i][r]=t,a.zs[i][r]=u(s)}break}case"MultiPoint":s.logger.warn("MultiPoint not supported in Bokeh");break;case"MultiLineString":{const r=n.coordinates.reduce(o);for(let t=0;t<r.length;t++){const[o,e,s]=r[t];a.xs[i][t]=o,a.ys[i][t]=e,a.zs[i][t]=u(s)}break}case"MultiPolygon":{const e=[];for(const a of n.coordinates)a.length>1&&s.logger.warn("Bokeh does not support Polygons with holes in, only exterior ring used."),e.push(a[0]);const r=e.reduce(o);for(let t=0;t<r.length;t++){const[o,e,s]=r[t];a.xs[i][t]=o,a.ys[i][t]=e,a.zs[i][t]=u(s)}break}default:throw new Error(`Invalid GeoJSON geometry type: ${n.type}`)}}geojson_to_column_data(){const t=JSON.parse(this.geojson);let r;switch(t.type){case"GeometryCollection":if(null==t.geometries)throw new Error("No geometries found in GeometryCollection");if(0===t.geometries.length)throw new Error("geojson.geometries must have one or more items");r=t.geometries;break;case"FeatureCollection":if(null==t.features)throw new Error("No features found in FeaturesCollection");if(0==t.features.length)throw new Error("geojson.features must have one or more items");r=t.features;break;default:throw new Error("Bokeh only supports type GeometryCollection and FeatureCollection at top level")}let n=0;for(const t of r){const r="Feature"===t.type?t.geometry:t;"GeometryCollection"==r.type?n+=r.geometries.length:n+=1}const a={x:this._get_new_nan_array(n),y:this._get_new_nan_array(n),z:this._get_new_nan_array(n),xs:this._get_new_list_array(n),ys:this._get_new_list_array(n),zs:this._get_new_list_array(n)};let i=0;for(const t of r){const r="Feature"==t.type?t.geometry:t;if("GeometryCollection"==r.type)for(const e of r.geometries)this._add_geometry(e,a,i),"Feature"===t.type&&this._add_properties(t,a,i,n),i+=1;else this._add_geometry(r,a,i),"Feature"===t.type&&this._add_properties(t,a,i,n),i+=1}return a}}r.GeoJSONDataSource=f,f.__name__="GeoJSONDataSource",f.init_GeoJSONDataSource()},function e(t,r,n,a,i){a(),i("BBoxTileSource",t(347).BBoxTileSource),i("MercatorTileSource",t(348).MercatorTileSource),i("QUADKEYTileSource",t(351).QUADKEYTileSource),i("TileRenderer",t(352).TileRenderer),i("TileSource",t(349).TileSource),i("TMSTileSource",t(355).TMSTileSource),i("WMTSTileSource",t(353).WMTSTileSource)},function e(t,r,n,a,i){a();const o=t(348);class s extends o.MercatorTileSource{constructor(e){super(e)}static init_BBoxTileSource(){this.define(({Boolean:e})=>({use_latlon:[e,!1]}))}get_image_url(e,t,r){const n=this.string_lookup_replace(this.url,this.extra_url_vars);let a,i,o,s;return this.use_latlon?[i,s,a,o]=this.get_tile_geographic_bounds(e,t,r):[i,s,a,o]=this.get_tile_meter_bounds(e,t,r),n.replace("{XMIN}",i.toString()).replace("{YMIN}",s.toString()).replace("{XMAX}",a.toString()).replace("{YMAX}",o.toString())}}n.BBoxTileSource=s,s.__name__="BBoxTileSource",s.init_BBoxTileSource()},function e(t,r,n,e,a){e();const i=t(349),o=t(9),l=t(350);class s extends i.TileSource{constructor(e){super(e)}static init_MercatorTileSource(){this.define(({Boolean:e})=>({snap_to_zoom:[e,!1],wrap_around:[e,!0]})),this.override({x_origin_offset:20037508.34,y_origin_offset:20037508.34,initial_resolution:156543.03392804097})}initialize(){super.initialize(),this._resolutions=o.range(this.min_zoom,this.max_zoom+1).map(e=>this.get_resolution(e))}_computed_initial_resolution(){return null!=this.initial_resolution?this.initial_resolution:2*Math.PI*6378137/this.tile_size}is_valid_tile(e,t,r){return!(!this.wrap_around&&(e<0||e>=2**r))&&!(t<0||t>=2**r)}parent_by_tile_xyz(e,t,r){const n=this.tile_xyz_to_quadkey(e,t,r),a=n.substring(0,n.length-1);return this.quadkey_to_tile_xyz(a)}get_resolution(e){return this._computed_initial_resolution()/2**e}get_resolution_by_extent(e,t,r){return[(e[2]-e[0])/r,(e[3]-e[1])/t]}get_level_by_extent(e,t,r){const n=(e[2]-e[0])/r,a=(e[3]-e[1])/t,i=Math.max(n,a);let o=0;for(const e of this._resolutions){if(i>e){if(0==o)return 0;if(o>0)return o-1}o+=1}return o-1}get_closest_level_by_extent(e,t,r){const n=(e[2]-e[0])/r,a=(e[3]-e[1])/t,i=Math.max(n,a),o=this._resolutions.reduce(function(e,t){return Math.abs(t-i)<Math.abs(e-i)?t:e});return this._resolutions.indexOf(o)}snap_to_zoom_level(e,t,r,n){const[a,i,o,s]=e,l=this._resolutions[n];let c=r*l,u=t*l;if(!this.snap_to_zoom){const e=(o-a)/c,t=(s-i)/u;e>t?(c=o-a,u*=e):(c*=t,u=s-i)}const f=(c-(o-a))/2,d=(u-(s-i))/2;return[a-f,i-d,o+f,s+d]}tms_to_wmts(e,t,r){return[e,2**r-1-t,r]}wmts_to_tms(e,t,r){return[e,2**r-1-t,r]}pixels_to_meters(e,t,r){const n=this.get_resolution(r);return[e*n-this.x_origin_offset,t*n-this.y_origin_offset]}meters_to_pixels(e,t,r){const n=this.get_resolution(r);return[(e+this.x_origin_offset)/n,(t+this.y_origin_offset)/n]}pixels_to_tile(e,t){let r=Math.ceil(e/this.tile_size);r=0===r?r:r-1;return[r,Math.max(Math.ceil(t/this.tile_size)-1,0)]}pixels_to_raster(e,t,r){return[e,(this.tile_size<<r)-t]}meters_to_tile(e,t,r){const[n,a]=this.meters_to_pixels(e,t,r);return this.pixels_to_tile(n,a)}get_tile_meter_bounds(e,t,r){const[n,a]=this.pixels_to_meters(e*this.tile_size,t*this.tile_size,r),[i,o]=this.pixels_to_meters((e+1)*this.tile_size,(t+1)*this.tile_size,r);return[n,a,i,o]}get_tile_geographic_bounds(e,t,r){const n=this.get_tile_meter_bounds(e,t,r),[a,i,o,s]=l.meters_extent_to_geographic(n);return[a,i,o,s]}get_tiles_by_extent(e,r,t=1){const[n,a,i,o]=e;let[s,l]=this.meters_to_tile(n,a,r),[c,u]=this.meters_to_tile(i,o,r);s-=t,l-=t,c+=t,u+=t;const f=[];for(let t=u;t>=l;t--)for(let e=s;e<=c;e++)this.is_valid_tile(e,t,r)&&f.push([e,t,r,this.get_tile_meter_bounds(e,t,r)]);return this.sort_tiles_from_center(f,[s,l,c,u]),f}quadkey_to_tile_xyz(r){let n=0,a=0;const i=r.length;for(let t=i;t>0;t--){const e=1<<t-1;switch(r.charAt(i-t)){case"0":continue;case"1":n|=e;break;case"2":a|=e;break;case"3":n|=e,a|=e;break;default:throw new TypeError(`Invalid Quadkey: ${r}`)}}return[n,a,i]}tile_xyz_to_quadkey(r,n,a){let i="";for(let t=a;t>0;t--){const a=1<<t-1;let e=0;0!=(r&a)&&(e+=1),0!=(n&a)&&(e+=2),i+=e.toString()}return i}children_by_tile_xyz(e,n,a){const i=this.tile_xyz_to_quadkey(e,n,a),o=[];for(let r=0;r<=3;r++){const[n,a,e]=this.quadkey_to_tile_xyz(i+r.toString()),t=this.get_tile_meter_bounds(n,a,e);o.push([n,a,e,t])}return o}get_closest_parent_by_tile_xyz(e,t,r){const n=this.calculate_world_x_by_tile_xyz(e,t,r);[e,t,r]=this.normalize_xyz(e,t,r);let a=this.tile_xyz_to_quadkey(e,t,r);for(;a.length>0;)if(a=a.substring(0,a.length-1),[e,t,r]=this.quadkey_to_tile_xyz(a),[e,t,r]=this.denormalize_xyz(e,t,r,n),this.tiles.has(this.tile_xyz_to_key(e,t,r)))return[e,t,r];return[0,0,0]}normalize_xyz(t,r,n){if(this.wrap_around){const e=2**n;return[(t%e+e)%e,r,n]}return[t,r,n]}denormalize_xyz(e,t,r,n){return[e+n*2**r,t,r]}denormalize_meters(e,t,r,n){return[e+2*n*Math.PI*6378137,t]}calculate_world_x_by_tile_xyz(e,t,r){return Math.floor(e/2**r)}}n.MercatorTileSource=s,s.__name__="MercatorTileSource",s.init_MercatorTileSource()},function e(t,r,n,a,i){a();const o=t(53),s=t(13);class l extends o.Model{constructor(e){super(e)}static init_TileSource(){this.define(({Number:e,String:t,Dict:r,Nullable:n})=>({url:[t,""],tile_size:[e,256],max_zoom:[e,30],min_zoom:[e,0],extra_url_vars:[r(t),{}],attribution:[t,""],x_origin_offset:[e],y_origin_offset:[e],initial_resolution:[n(e),null]}))}initialize(){super.initialize(),this.tiles=new Map,this._normalize_case()}connect_signals(){super.connect_signals(),this.connect(this.change,()=>this._clear_cache())}string_lookup_replace(t,r){let n=t;for(const[t,e]of s.entries(r))n=n.replace(`{${t}}`,e);return n}_normalize_case(){const e=this.url.replace("{x}","{X}").replace("{y}","{Y}").replace("{z}","{Z}").replace("{q}","{Q}").replace("{xmin}","{XMIN}").replace("{ymin}","{YMIN}").replace("{xmax}","{XMAX}").replace("{ymax}","{YMAX}");this.url=e}_clear_cache(){this.tiles=new Map}tile_xyz_to_key(e,t,r){return`${e}:${t}:${r}`}key_to_tile_xyz(e){const[t,r,n]=e.split(":").map(e=>parseInt(e));return[t,r,n]}sort_tiles_from_center(e,t){const[r,n,a,i]=t,o=(a-r)/2+r,s=(i-n)/2+n;e.sort(function(e,t){return Math.sqrt((o-e[0])**2+(s-e[1])**2)-Math.sqrt((o-t[0])**2+(s-t[1])**2)})}get_image_url(e,t,r){return this.string_lookup_replace(this.url,this.extra_url_vars).replace("{X}",e.toString()).replace("{Y}",t.toString()).replace("{Z}",r.toString())}}n.TileSource=l,l.__name__="TileSource",l.init_TileSource()},function c(e,t,r,n,a){n();const i=e(65);function c(e,t){return i.wgs84_mercator.compute(e,t)}function u(e,t){return i.wgs84_mercator.invert(e,t)}r.geographic_to_meters=c,r.meters_to_geographic=u,r.geographic_extent_to_meters=function(e){const[t,r,n,a]=e,[i,o]=c(t,r),[s,l]=c(n,a);return[i,o,s,l]},r.meters_extent_to_geographic=function(e){const[t,r,n,a]=e,[i,o]=u(t,r),[s,l]=u(n,a);return[i,o,s,l]}},function e(t,r,n,a,e){a();const i=t(348);class o extends i.MercatorTileSource{constructor(e){super(e)}get_image_url(e,t,r){const n=this.string_lookup_replace(this.url,this.extra_url_vars),[a,i,o]=this.tms_to_wmts(e,t,r),s=this.tile_xyz_to_quadkey(a,i,o);return n.replace("{Q}",s)}}n.QUADKEYTileSource=o,o.__name__="QUADKEYTileSource"},function e(t,r,n,a,e){a();const i=t(1),o=t(349),s=t(353),l=t(41),c=t(156),u=t(43),f=t(296),p=t(9),d=t(8),h=i.__importStar(t(354));class v extends l.RendererView{initialize(){this._tiles=[],super.initialize()}connect_signals(){super.connect_signals(),this.connect(this.model.change,()=>this.request_render()),this.connect(this.model.tile_source.change,()=>this.request_render())}styles(){return[...super.styles(),h.default]}get_extent(){return[this.x_range.start,this.y_range.start,this.x_range.end,this.y_range.end]}get map_plot(){return this.plot_model}get map_canvas(){return this.layer.ctx}get map_frame(){return this.plot_view.frame}get x_range(){return this.map_plot.x_range}get y_range(){return this.map_plot.y_range}_set_data(){this.extent=this.get_extent(),this._last_height=void 0,this._last_width=void 0}_update_attribution(){null!=this.attribution_el&&u.removeElement(this.attribution_el);const{attribution:i}=this.model.tile_source;if(d.isString(i)&&i.length>0){const{layout:e,frame:t}=this.plot_view,r=e.bbox.width-t.bbox.right,n=e.bbox.height-t.bbox.bottom,a=t.bbox.width;this.attribution_el=u.div({class:h.tile_attribution,style:{position:"absolute",right:`${r}px`,bottom:`${n}px`,"max-width":a-4+"px",padding:"2px","background-color":"rgba(255,255,255,0.5)","font-size":"9px","line-height":"1.05","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}),this.plot_view.canvas_view.add_event(this.attribution_el),this.attribution_el.innerHTML=i,this.attribution_el.title=this.attribution_el.textContent.replace(/\s*\n\s*/g," ")}}_map_data(){this.initial_extent=this.get_extent();const e=this.model.tile_source.get_level_by_extent(this.initial_extent,this.map_frame.bbox.height,this.map_frame.bbox.width),t=this.model.tile_source.snap_to_zoom_level(this.initial_extent,this.map_frame.bbox.height,this.map_frame.bbox.width,e);this.x_range.start=t[0],this.y_range.start=t[1],this.x_range.end=t[2],this.y_range.end=t[3],this.x_range instanceof c.Range1d&&(this.x_range.reset_start=t[0],this.x_range.reset_end=t[2]),this.y_range instanceof c.Range1d&&(this.y_range.reset_start=t[1],this.y_range.reset_end=t[3]),this._update_attribution()}_create_tile(e,t,r,n,a=!1){const[i,o,s]=this.model.tile_source.normalize_xyz(e,t,r),l={img:void 0,tile_coords:[e,t,r],normalized_coords:[i,o,s],quadkey:this.model.tile_source.tile_xyz_to_quadkey(e,t,r),cache_key:this.model.tile_source.tile_xyz_to_key(e,t,r),bounds:n,loaded:!1,finished:!1,x_coord:n[0],y_coord:n[3]},c=this.model.tile_source.get_image_url(i,o,s);new f.ImageLoader(c,{loaded:e=>{Object.assign(l,{img:e,loaded:!0}),a?(l.finished=!0,this.notify_finished()):this.request_render()},failed(){l.finished=!0}}),this.model.tile_source.tiles.set(l.cache_key,l),this._tiles.push(l)}_enforce_aspect_ratio(){if(this._last_height!==this.map_frame.bbox.height||this._last_width!==this.map_frame.bbox.width){const e=this.get_extent(),t=this.model.tile_source.get_level_by_extent(e,this.map_frame.bbox.height,this.map_frame.bbox.width),r=this.model.tile_source.snap_to_zoom_level(e,this.map_frame.bbox.height,this.map_frame.bbox.width,t);this.x_range.setv({start:r[0],end:r[2]}),this.y_range.setv({start:r[1],end:r[3]}),this.extent=r,this._last_height=this.map_frame.bbox.height,this._last_width=this.map_frame.bbox.width}}has_finished(){if(!super.has_finished())return!1;if(0===this._tiles.length)return!1;for(const e of this._tiles)if(!e.finished)return!1;return!0}_render(){null==this.map_initialized&&(this._set_data(),this._map_data(),this.map_initialized=!0),this._enforce_aspect_ratio(),this._update(),null!=this.prefetch_timer&&clearTimeout(this.prefetch_timer),this.prefetch_timer=setTimeout(this._prefetch_tiles.bind(this),500),this.has_finished()&&this.notify_finished()}_draw_tile(l){const c=this.model.tile_source.tiles.get(l);if(null!=c&&c.loaded){const[[l],[e]]=this.coordinates.map_to_screen([c.bounds[0]],[c.bounds[3]]),[[t],[r]]=this.coordinates.map_to_screen([c.bounds[2]],[c.bounds[1]]),n=t-l,a=r-e,i=l,o=e,s=this.map_canvas.getImageSmoothingEnabled();this.map_canvas.setImageSmoothingEnabled(this.model.smoothing),this.map_canvas.drawImage(c.img,i,o,n,a),this.map_canvas.setImageSmoothingEnabled(s),c.finished=!0}}_set_rect(){const e=this.plot_model.outline_line_width,t=this.map_frame.bbox.left+e/2,r=this.map_frame.bbox.top+e/2,n=this.map_frame.bbox.width-e,a=this.map_frame.bbox.height-e;this.map_canvas.rect(t,r,n,a),this.map_canvas.clip()}_render_tiles(t){this.map_canvas.save(),this._set_rect(),this.map_canvas.globalAlpha=this.model.alpha;for(const e of t)this._draw_tile(e);this.map_canvas.restore()}_prefetch_tiles(){const{tile_source:r}=this.model,n=this.get_extent(),a=this.map_frame.bbox.height,i=this.map_frame.bbox.width,o=this.model.tile_source.get_level_by_extent(n,a,i),s=this.model.tile_source.get_tiles_by_extent(n,o);for(let t=0,e=Math.min(10,s.length);t<e;t++){const[a,i,o]=s[t],e=this.model.tile_source.children_by_tile_xyz(a,i,o);for(const n of e){const[a,i,o,s]=n;r.tiles.has(r.tile_xyz_to_key(a,i,o))||this._create_tile(a,i,o,s,!0)}}}_fetch_tiles(a){for(const n of a){const[a,e,t,r]=n;this._create_tile(a,e,t,r)}}_update(){const{tile_source:e}=this.model,{min_zoom:t}=e,{max_zoom:r}=e;let n=this.get_extent();const a=this.extent[2]-this.extent[0]<n[2]-n[0],i=this.map_frame.bbox.height,o=this.map_frame.bbox.width;let s=e.get_level_by_extent(n,i,o),l=!1;s<t?(n=this.extent,s=t,l=!0):s>r&&(n=this.extent,s=r,l=!0),l&&(this.x_range.setv({start:n[0],end:n[2]}),this.y_range.setv({start:n[1],end:n[3]})),this.extent=n;const c=e.get_tiles_by_extent(n,s),u=[],f=[],d=[],h=[];for(const t of c){const[r,n,i]=t,o=e.tile_xyz_to_key(r,n,i),s=e.tiles.get(o);if(null!=s&&s.loaded)f.push(o);else if(this.model.render_parents){const[t,o,s]=e.get_closest_parent_by_tile_xyz(r,n,i),l=e.tile_xyz_to_key(t,o,s),c=e.tiles.get(l);if(null!=c&&c.loaded&&!p.includes(d,l)&&d.push(l),a){const t=e.children_by_tile_xyz(r,n,i);for(const[r,n,a]of t){const t=e.tile_xyz_to_key(r,n,a);e.tiles.has(t)&&h.push(t)}}}null==s&&u.push(t)}this._render_tiles(d),this._render_tiles(h),this._render_tiles(f),null!=this.render_timer&&clearTimeout(this.render_timer),this.render_timer=setTimeout(()=>this._fetch_tiles(u),65)}}n.TileRendererView=v,v.__name__="TileRendererView";class g extends l.Renderer{constructor(e){super(e)}static init_TileRenderer(){this.prototype.default_view=v,this.define(({Boolean:e,Number:t,Ref:r})=>({alpha:[t,1],smoothing:[e,!0],tile_source:[r(o.TileSource),()=>new s.WMTSTileSource],render_parents:[e,!0]})),this.override({level:"image"})}}n.TileRenderer=g,g.__name__="TileRenderer",g.init_TileRenderer()},function e(t,r,n,a,i){a();const o=t(348);class s extends o.MercatorTileSource{constructor(e){super(e)}get_image_url(e,t,r){const n=this.string_lookup_replace(this.url,this.extra_url_vars),[a,i,o]=this.tms_to_wmts(e,t,r);return n.replace("{X}",a.toString()).replace("{Y}",i.toString()).replace("{Z}",o.toString())}}n.WMTSTileSource=s,s.__name__="WMTSTileSource"},function e(t,r,n,a,i){a(),n.root="bk-root",n.tile_attribution="bk-tile-attribution",n.default=".bk-root .bk-tile-attribution a{color:black;}"},function e(t,r,n,a,i){a();const o=t(348);class s extends o.MercatorTileSource{constructor(e){super(e)}get_image_url(e,t,r){return this.string_lookup_replace(this.url,this.extra_url_vars).replace("{X}",e.toString()).replace("{Y}",t.toString()).replace("{Z}",r.toString())}}n.TMSTileSource=s,s.__name__="TMSTileSource"},function e(t,r,n,a,i){a(),i("CanvasTexture",t(357).CanvasTexture),i("ImageURLTexture",t(359).ImageURLTexture),i("Texture",t(358).Texture)},function e(t,r,n,a,i){a();const o=t(358),s=t(34);class l extends o.Texture{constructor(e){super(e)}static init_CanvasTexture(){this.define(({String:e})=>({code:[e]}))}get func(){const e=s.use_strict(this.code);return new Function("ctx","color","scale","weight",e)}get_pattern(e,t,r){const n=document.createElement("canvas");n.width=t,n.height=t;const a=n.getContext("2d");return this.func.call(this,a,e,t,r),n}}n.CanvasTexture=l,l.__name__="CanvasTexture",l.init_CanvasTexture()},function e(t,r,n,a,i){a();const o=t(53),s=t(20);class l extends o.Model{constructor(e){super(e)}static init_Texture(){this.define(()=>({repetition:[s.TextureRepetition,"repeat"]}))}}n.Texture=l,l.__name__="Texture",l.init_Texture()},function e(t,r,n,a,i){a();const o=t(358),s=t(296);class l extends o.Texture{constructor(e){super(e)}static init_ImageURLTexture(){this.define(({String:e})=>({url:[e]}))}initialize(){super.initialize(),this._loader=new s.ImageLoader(this.url)}get_pattern(e,t,r){const{_loader:n}=this;return this._loader.finished?n.image:n.promise}}n.ImageURLTexture=l,l.__name__="ImageURLTexture",l.init_ImageURLTexture()},function e(t,r,n,a,i){a(),i("ActionTool",t(251).ActionTool),i("CustomAction",t(361).CustomAction),i("HelpTool",t(252).HelpTool),i("RedoTool",t(362).RedoTool),i("ResetTool",t(363).ResetTool),i("SaveTool",t(364).SaveTool),i("UndoTool",t(365).UndoTool),i("ZoomInTool",t(366).ZoomInTool),i("ZoomOutTool",t(369).ZoomOutTool),i("ButtonTool",t(238).ButtonTool),i("EditTool",t(370).EditTool),i("BoxEditTool",t(371).BoxEditTool),i("FreehandDrawTool",t(372).FreehandDrawTool),i("PointDrawTool",t(373).PointDrawTool),i("PolyDrawTool",t(374).PolyDrawTool),i("PolyTool",t(375).PolyTool),i("PolyEditTool",t(376).PolyEditTool),i("BoxSelectTool",t(377).BoxSelectTool),i("BoxZoomTool",t(379).BoxZoomTool),i("GestureTool",t(237).GestureTool),i("LassoSelectTool",t(380).LassoSelectTool),i("LineEditTool",t(382).LineEditTool),i("PanTool",t(384).PanTool),i("PolySelectTool",t(381).PolySelectTool),i("RangeTool",t(385).RangeTool),i("SelectTool",t(378).SelectTool),i("TapTool",t(386).TapTool),i("WheelPanTool",t(387).WheelPanTool),i("WheelZoomTool",t(388).WheelZoomTool),i("CrosshairTool",t(389).CrosshairTool),i("CustomJSHover",t(390).CustomJSHover),i("HoverTool",t(391).HoverTool),i("InspectTool",t(247).InspectTool),i("Tool",t(236).Tool),i("ToolProxy",t(392).ToolProxy),i("Toolbar",t(235).Toolbar),i("ToolbarBase",t(248).ToolbarBase),i("ProxyToolbar",t(393).ProxyToolbar),i("ToolbarBox",t(393).ToolbarBox)},function e(t,r,n,a,i){a();const o=t(251);class s extends o.ActionToolButtonView{css_classes(){return super.css_classes().concat("bk-toolbar-button-custom-action")}}n.CustomActionButtonView=s,s.__name__="CustomActionButtonView";class l extends o.ActionToolView{doit(){var e;null===(e=this.model.callback)||void 0===e||e.execute(this.model)}}n.CustomActionView=l,l.__name__="CustomActionView";class c extends o.ActionTool{constructor(e){super(e),this.tool_name="Custom Action",this.button_view=s}static init_CustomAction(){this.prototype.default_view=l,this.define(({Any:e,String:t,Nullable:r})=>({callback:[r(e)],icon:[t]})),this.override({description:"Perform a Custom Action"})}}n.CustomAction=c,c.__name__="CustomAction",c.init_CustomAction()},function e(t,r,n,a,i){a();const o=t(251),s=t(242);class l extends o.ActionToolView{connect_signals(){super.connect_signals(),this.connect(this.plot_view.state.changed,()=>this.model.disabled=!this.plot_view.state.can_redo)}doit(){this.plot_view.state.redo()}}n.RedoToolView=l,l.__name__="RedoToolView";class e extends o.ActionTool{constructor(e){super(e),this.tool_name="Redo",this.icon=s.tool_icon_redo}static init_RedoTool(){this.prototype.default_view=l,this.override({disabled:!0}),this.register_alias("redo",()=>new e)}}n.RedoTool=e,e.__name__="RedoTool",e.init_RedoTool()},function e(t,r,n,a,i){a();const e=t(251),o=t(242);class s extends e.ActionToolView{doit(){this.plot_view.reset()}}n.ResetToolView=s,s.__name__="ResetToolView";class l extends e.ActionTool{constructor(e){super(e),this.tool_name="Reset",this.icon=o.tool_icon_reset}static init_ResetTool(){this.prototype.default_view=s,this.register_alias("reset",()=>new l)}}n.ResetTool=l,l.__name__="ResetTool",l.init_ResetTool()},function e(t,r,n,a,i){a();const o=t(251),s=t(242);class l extends o.ActionToolView{async copy(){const e=await this.plot_view.to_blob(),t=new ClipboardItem({[e.type]:e});await navigator.clipboard.write([t])}async save(e){const t=await this.plot_view.to_blob(),r=document.createElement("a");r.href=URL.createObjectURL(t),r.download=e,r.target="_blank",r.dispatchEvent(new MouseEvent("click"))}doit(e="save"){switch(e){case"save":this.save("bokeh_plot");break;case"copy":this.copy()}}}n.SaveToolView=l,l.__name__="SaveToolView";class c extends o.ActionTool{constructor(e){super(e),this.tool_name="Save",this.icon=s.tool_icon_save}static init_SaveTool(){this.prototype.default_view=l,this.register_alias("save",()=>new c)}get menu(){return[{icon:"bk-tool-icon-copy-to-clipboard",tooltip:"Copy image to clipboard",if:()=>"undefined"!=typeof ClipboardItem,handler:()=>{this.do.emit("copy")}}]}}n.SaveTool=c,c.__name__="SaveTool",c.init_SaveTool()},function e(t,r,n,a,i){a();const o=t(251),s=t(242);class l extends o.ActionToolView{connect_signals(){super.connect_signals(),this.connect(this.plot_view.state.changed,()=>this.model.disabled=!this.plot_view.state.can_undo)}doit(){this.plot_view.state.undo()}}n.UndoToolView=l,l.__name__="UndoToolView";class e extends o.ActionTool{constructor(e){super(e),this.tool_name="Undo",this.icon=s.tool_icon_undo}static init_UndoTool(){this.prototype.default_view=l,this.override({disabled:!0}),this.register_alias("undo",()=>new e)}}n.UndoTool=e,e.__name__="UndoTool",e.init_UndoTool()},function t(e,r,n,a,i){a();const o=e(367),t=e(242);class s extends o.ZoomBaseToolView{}n.ZoomInToolView=s,s.__name__="ZoomInToolView";class l extends o.ZoomBaseTool{constructor(e){super(e),this.sign=1,this.tool_name="Zoom In",this.icon=t.tool_icon_zoom_in}static init_ZoomInTool(){this.prototype.default_view=s,this.register_alias("zoom_in",()=>new l({dimensions:"both"})),this.register_alias("xzoom_in",()=>new l({dimensions:"width"})),this.register_alias("yzoom_in",()=>new l({dimensions:"height"}))}}n.ZoomInTool=l,l.__name__="ZoomInTool",l.init_ZoomInTool()},function e(t,r,n,a,i){a();const o=t(251),s=t(20),l=t(368);class e extends o.ActionToolView{doit(){var e;const t=this.plot_view.frame,r=this.model.dimensions,n="width"==r||"both"==r,a="height"==r||"both"==r,i=l.scale_range(t,this.model.sign*this.model.factor,n,a);this.plot_view.state.push("zoom_out",{range:i}),this.plot_view.update_range(i,{scrolling:!0}),null===(e=this.model.document)||void 0===e||e.interactive_start(this.plot_model)}}n.ZoomBaseToolView=e,e.__name__="ZoomBaseToolView";class c extends o.ActionTool{constructor(e){super(e)}static init_ZoomBaseTool(){this.define(({Percent:e})=>({factor:[e,.1],dimensions:[s.Dimensions,"both"]}))}get tooltip(){return this._get_dim_tooltip(this.dimensions)}}n.ZoomBaseTool=c,c.__name__="ZoomBaseTool",c.init_ZoomBaseTool()},function e(t,r,n,a,i){a();const d=t(10);function h(e,t,r){const[n,a]=[e.start,e.end],i=null!=r?r:(a+n)/2;return[n-(n-i)*t,a-(a-i)*t]}function p(n,[a,i]){const o=new Map;for(const[t,r]of n){const[n,e]=r.r_invert(a,i);o.set(t,{start:n,end:e})}return o}n.scale_highlow=h,n.get_info=p,n.scale_range=function(e,t,r=!0,n=!0,a){t=d.clamp(t,-.9,.9);const i=r?t:0,[o,s]=h(e.bbox.h_range,i,null!=a?a.x:void 0),l=p(e.x_scales,[o,s]),c=n?t:0,[u,f]=h(e.bbox.v_range,c,null!=a?a.y:void 0);return{xrs:l,yrs:p(e.y_scales,[u,f]),factor:t}}},function t(e,r,n,a,i){a();const o=e(367),t=e(242);class s extends o.ZoomBaseToolView{}n.ZoomOutToolView=s,s.__name__="ZoomOutToolView";class l extends o.ZoomBaseTool{constructor(e){super(e),this.sign=-1,this.tool_name="Zoom Out",this.icon=t.tool_icon_zoom_out}static init_ZoomOutTool(){this.prototype.default_view=s,this.register_alias("zoom_out",()=>new l({dimensions:"both"})),this.register_alias("xzoom_out",()=>new l({dimensions:"width"})),this.register_alias("yzoom_out",()=>new l({dimensions:"height"}))}}n.ZoomOutTool=l,l.__name__="ZoomOutTool",l.init_ZoomOutTool()},function e(t,r,n,a,i){a();const o=t(9),s=t(8),l=t(11),c=t(61),e=t(237);class u extends e.GestureToolView{constructor(){super(...arguments),this._mouse_in_frame=!0}_select_mode(e){const{shiftKey:t,ctrlKey:r}=e;return t||r?t&&!r?"append":!t&&r?"intersect":t&&r?"subtract":void l.unreachable():"replace"}_move_enter(e){this._mouse_in_frame=!0}_move_exit(e){this._mouse_in_frame=!1}_map_drag(e,t,r){if(!this.plot_view.frame.bbox.contains(e,t))return null;const n=this.plot_view.renderer_view(r);if(null==n)return null;return[n.coordinates.x_scale.invert(e),n.coordinates.y_scale.invert(t)]}_delete_selected(e){const r=e.data_source,n=r.selected.indices;n.sort();for(const e of r.columns()){const t=r.get_array(e);for(let e=0;e<n.length;e++){const r=n[e];t.splice(r-e,1)}}this._emit_cds_changes(r)}_pop_glyphs(n,a){const e=n.columns();if(a&&e.length)for(const r of e){let e=n.get_array(r);const t=e.length-a+1;t<1||(s.isArray(e)||(e=Array.from(e),n.data[r]=e),e.splice(0,t))}}_emit_cds_changes(e,t=!0,r=!0,n=!0){r&&e.selection_manager.clear(),t&&e.change.emit(),n&&(e.data=e.data,e.properties.data.change.emit())}_drag_points(s,l,c="both"){if(null==this._basepoint)return;const[u,f]=this._basepoint;for(const o of l){const l=this._map_drag(u,f,o),e=this._map_drag(s.sx,s.sy,o);if(null==e||null==l)continue;const[t,r]=e,[n,a]=l,[i,d]=[t-n,r-a],h=o.glyph,p=o.data_source,[v,g]=[h.x.field,h.y.field];for(const s of p.selected.indices)!v||"width"!=c&&"both"!=c||(p.data[v][s]+=i),!g||"height"!=c&&"both"!=c||(p.data[g][s]+=d);p.change.emit()}this._basepoint=[s.sx,s.sy]}_pad_empty_columns(t,r){for(const e of t.columns())o.includes(r,e)||t.get_array(e).push(this.model.empty_value)}_select_event(e,t,r){const n=this.plot_view.frame,{sx:a,sy:i}=e;if(!n.bbox.contains(a,i))return[];const o={type:"point",sx:a,sy:i},s=[];for(const e of r){const r=e.get_selection_manager(),n=e.data_source,a=this.plot_view.renderer_view(e);if(null!=a){r.select([a],o,!0,t)&&s.push(e),n.properties.selected.change.emit()}}return s}}n.EditToolView=u,u.__name__="EditToolView";class f extends e.GestureTool{constructor(e){super(e)}static init_EditTool(){this.define(({Unknown:e,String:t,Array:r,Ref:n,Nullable:a})=>({custom_icon:[a(t),null],empty_value:[e],renderers:[r(n(c.GlyphRenderer)),[]]}))}get computed_icon(){var e;return null!==(e=this.custom_icon)&&void 0!==e?e:this.icon}}n.EditTool=f,f.__name__="EditTool",f.init_EditTool()},function e(t,r,n,a,e){a();const i=t(43),o=t(20),s=t(370),l=t(242);class c extends s.EditToolView{_tap(e){null==this._draw_basepoint&&null==this._basepoint&&this._select_event(e,this._select_mode(e),this.model.renderers)}_keyup(t){if(this.model.active&&this._mouse_in_frame)for(const e of this.model.renderers)if(t.keyCode===i.Keys.Backspace)this._delete_selected(e);else if(t.keyCode==i.Keys.Esc){e.data_source.selection_manager.clear()}}_set_extent([e,t],[r,n],a,i=!1){const o=this.model.renderers[0],s=this.plot_view.renderer_view(o);if(null==s)return;const l=o.glyph,c=o.data_source,[u,f]=s.coordinates.x_scale.r_invert(e,t),[d,h]=s.coordinates.y_scale.r_invert(r,n),[p,v]=[(u+f)/2,(d+h)/2],[g,m]=[f-u,h-d],[_,y]=[l.x.field,l.y.field],[b,x]=[l.width.field,l.height.field];if(a)this._pop_glyphs(c,this.model.num_objects),_&&c.get_array(_).push(p),y&&c.get_array(y).push(v),b&&c.get_array(b).push(g),x&&c.get_array(x).push(m),this._pad_empty_columns(c,[_,y,b,x]);else{const e=c.data[_].length-1;_&&(c.data[_][e]=p),y&&(c.data[y][e]=v),b&&(c.data[b][e]=g),x&&(c.data[x][e]=m)}this._emit_cds_changes(c,!0,!1,i)}_update_box(e,t=!1,r=!1){if(null==this._draw_basepoint)return;const n=[e.sx,e.sy],a=this.plot_view.frame,i=this.model.dimensions,o=this.model._get_dim_limits(this._draw_basepoint,n,a,i);if(null!=o){const[e,n]=o;this._set_extent(e,n,t,r)}}_doubletap(e){this.model.active&&(null!=this._draw_basepoint?(this._update_box(e,!1,!0),this._draw_basepoint=null):(this._draw_basepoint=[e.sx,e.sy],this._select_event(e,"append",this.model.renderers),this._update_box(e,!0,!1)))}_move(e){this._update_box(e,!1,!1)}_pan_start(e){if(e.shiftKey){if(null!=this._draw_basepoint)return;this._draw_basepoint=[e.sx,e.sy],this._update_box(e,!0,!1)}else{if(null!=this._basepoint)return;this._select_event(e,"append",this.model.renderers),this._basepoint=[e.sx,e.sy]}}_pan(e,t=!1,r=!1){if(e.shiftKey){if(null==this._draw_basepoint)return;this._update_box(e,t,r)}else{if(null==this._basepoint)return;this._drag_points(e,this.model.renderers)}}_pan_end(e){if(this._pan(e,!1,!0),e.shiftKey)this._draw_basepoint=null;else{this._basepoint=null;for(const e of this.model.renderers)this._emit_cds_changes(e.data_source,!1,!0,!0)}}}n.BoxEditToolView=c,c.__name__="BoxEditToolView";class u extends s.EditTool{constructor(e){super(e),this.tool_name="Box Edit Tool",this.icon=l.tool_icon_box_edit,this.event_type=["tap","pan","move"],this.default_order=1}static init_BoxEditTool(){this.prototype.default_view=c,this.define(({Int:e})=>({dimensions:[o.Dimensions,"both"],num_objects:[e,0]}))}}n.BoxEditTool=u,u.__name__="BoxEditTool",u.init_BoxEditTool()},function r(e,t,n,a,i){a();const r=e(43),f=e(8),o=e(370),s=e(242);class l extends o.EditToolView{_draw(t,e,r=!1){if(!this.model.active)return;const n=this.model.renderers[0],a=this._map_drag(t.sx,t.sy,n);if(null==a)return;const[i,o]=a,s=n.data_source,l=n.glyph,[c,u]=[l.xs.field,l.ys.field];if("new"==e)this._pop_glyphs(s,this.model.num_objects),c&&s.get_array(c).push([i]),u&&s.get_array(u).push([o]),this._pad_empty_columns(s,[c,u]);else if("add"==e){if(c){const t=s.data[c].length-1;let e=s.get_array(c)[t];f.isArray(e)||(e=Array.from(e),s.data[c][t]=e),e.push(i)}if(u){const t=s.data[u].length-1;let e=s.get_array(u)[t];f.isArray(e)||(e=Array.from(e),s.data[u][t]=e),e.push(o)}}this._emit_cds_changes(s,!0,!0,r)}_pan_start(e){this._draw(e,"new")}_pan(e){this._draw(e,"add")}_pan_end(e){this._draw(e,"add",!0)}_tap(e){this._select_event(e,this._select_mode(e),this.model.renderers)}_keyup(t){if(this.model.active&&this._mouse_in_frame)for(const e of this.model.renderers)t.keyCode===r.Keys.Esc?e.data_source.selection_manager.clear():t.keyCode===r.Keys.Backspace&&this._delete_selected(e)}}n.FreehandDrawToolView=l,l.__name__="FreehandDrawToolView";class c extends o.EditTool{constructor(e){super(e),this.tool_name="Freehand Draw Tool",this.icon=s.tool_icon_freehand_draw,this.event_type=["pan","tap"],this.default_order=3}static init_FreehandDrawTool(){this.prototype.default_view=l,this.define(({Int:e})=>({num_objects:[e,0]})),this.register_alias("freehand_draw",()=>new c)}}n.FreehandDrawTool=c,c.__name__="FreehandDrawTool",c.init_FreehandDrawTool()},function t(e,r,n,a,i){a();const o=e(43),s=e(370),t=e(242);class l extends s.EditToolView{_tap(e){if(this._select_event(e,this._select_mode(e),this.model.renderers).length||!this.model.add)return;const t=this.model.renderers[0],r=this._map_drag(e.sx,e.sy,t);if(null==r)return;const n=t.glyph,a=t.data_source,[i,o]=[n.x.field,n.y.field],[s,l]=r;this._pop_glyphs(a,this.model.num_objects),i&&a.get_array(i).push(s),o&&a.get_array(o).push(l),this._pad_empty_columns(a,[i,o]),a.change.emit(),a.data=a.data,a.properties.data.change.emit()}_keyup(t){if(this.model.active&&this._mouse_in_frame)for(const e of this.model.renderers)t.keyCode===o.Keys.Backspace?this._delete_selected(e):t.keyCode==o.Keys.Esc&&e.data_source.selection_manager.clear()}_pan_start(e){this.model.drag&&(this._select_event(e,"append",this.model.renderers),this._basepoint=[e.sx,e.sy])}_pan(e){this.model.drag&&null!=this._basepoint&&this._drag_points(e,this.model.renderers)}_pan_end(e){if(this.model.drag){this._pan(e);for(const e of this.model.renderers)this._emit_cds_changes(e.data_source,!1,!0,!0);this._basepoint=null}}}n.PointDrawToolView=l,l.__name__="PointDrawToolView";class c extends s.EditTool{constructor(e){super(e),this.tool_name="Point Draw Tool",this.icon=t.tool_icon_point_draw,this.event_type=["tap","pan","move"],this.default_order=2}static init_PointDrawTool(){this.prototype.default_view=l,this.define(({Boolean:e,Int:t})=>({add:[e,!0],drag:[e,!0],num_objects:[t,0]}))}}n.PointDrawTool=c,c.__name__="PointDrawTool",c.init_PointDrawTool()},function t(e,r,n,a,i){a();const o=e(43),f=e(8),s=e(375),t=e(242);class l extends s.PolyToolView{constructor(){super(...arguments),this._drawing=!1,this._initialized=!1}_tap(e){this._drawing?this._draw(e,"add",!0):this._select_event(e,this._select_mode(e),this.model.renderers)}_draw(t,e,r=!1){const n=this.model.renderers[0],a=this._map_drag(t.sx,t.sy,n);if(this._initialized||this.activate(),null==a)return;const[i,o]=this._snap_to_vertex(t,...a),s=n.data_source,l=n.glyph,[c,u]=[l.xs.field,l.ys.field];if("new"==e)this._pop_glyphs(s,this.model.num_objects),c&&s.get_array(c).push([i,i]),u&&s.get_array(u).push([o,o]),this._pad_empty_columns(s,[c,u]);else if("edit"==e){if(c){const t=s.data[c][s.data[c].length-1];t[t.length-1]=i}if(u){const t=s.data[u][s.data[u].length-1];t[t.length-1]=o}}else if("add"==e){if(c){const t=s.data[c].length-1;let e=s.get_array(c)[t];const r=e[e.length-1];e[e.length-1]=i,f.isArray(e)||(e=Array.from(e),s.data[c][t]=e),e.push(r)}if(u){const t=s.data[u].length-1;let e=s.get_array(u)[t];const r=e[e.length-1];e[e.length-1]=o,f.isArray(e)||(e=Array.from(e),s.data[u][t]=e),e.push(r)}}this._emit_cds_changes(s,!0,!1,r)}_show_vertices(){if(!this.model.active)return;const o=[],s=[];for(let i=0;i<this.model.renderers.length;i++){const e=this.model.renderers[i],t=e.data_source,r=e.glyph,[n,a]=[r.xs.field,r.ys.field];if(n)for(const s of t.get_array(n))o.push(...s);if(a)for(const o of t.get_array(a))s.push(...o);this._drawing&&i==this.model.renderers.length-1&&(o.splice(o.length-1,1),s.splice(s.length-1,1))}this._set_vertices(o,s)}_doubletap(e){this.model.active&&(this._drawing?(this._drawing=!1,this._draw(e,"edit",!0)):(this._drawing=!0,this._draw(e,"new",!0)))}_move(e){this._drawing&&this._draw(e,"edit")}_remove(){const e=this.model.renderers[0],t=e.data_source,r=e.glyph,[n,a]=[r.xs.field,r.ys.field];if(n){const e=t.data[n].length-1,r=t.get_array(n)[e];r.splice(r.length-1,1)}if(a){const e=t.data[a].length-1,r=t.get_array(a)[e];r.splice(r.length-1,1)}this._emit_cds_changes(t)}_keyup(t){if(this.model.active&&this._mouse_in_frame)for(const e of this.model.renderers)t.keyCode===o.Keys.Backspace?this._delete_selected(e):t.keyCode==o.Keys.Esc&&(this._drawing&&(this._remove(),this._drawing=!1),e.data_source.selection_manager.clear())}_pan_start(e){this.model.drag&&(this._select_event(e,"append",this.model.renderers),this._basepoint=[e.sx,e.sy])}_pan(l){if(null==this._basepoint||!this.model.drag)return;const[c,u]=this._basepoint;for(const s of this.model.renderers){const e=this._map_drag(c,u,s),t=this._map_drag(l.sx,l.sy,s);if(null==t||null==e)continue;const a=s.data_source,r=s.glyph,[i,o]=[r.xs.field,r.ys.field];if(!i&&!o)continue;const[n,f]=t,[d,h]=e,[p,v]=[n-d,f-h];for(const l of a.selected.indices){let t,r,n;i&&(r=a.data[i][l]),o?(n=a.data[o][l],t=n.length):t=r.length;for(let e=0;e<t;e++)r&&(r[e]+=p),n&&(n[e]+=v)}a.change.emit()}this._basepoint=[l.sx,l.sy]}_pan_end(e){if(this.model.drag){this._pan(e);for(const e of this.model.renderers)this._emit_cds_changes(e.data_source);this._basepoint=null}}activate(){if(this.model.vertex_renderer&&this.model.active){if(this._show_vertices(),!this._initialized)for(const t of this.model.renderers){const e=t.data_source;e.connect(e.properties.data.change,()=>this._show_vertices())}this._initialized=!0}}deactivate(){this._drawing&&(this._remove(),this._drawing=!1),this.model.vertex_renderer&&this._hide_vertices()}}n.PolyDrawToolView=l,l.__name__="PolyDrawToolView";class c extends s.PolyTool{constructor(e){super(e),this.tool_name="Polygon Draw Tool",this.icon=t.tool_icon_poly_draw,this.event_type=["pan","tap","move"],this.default_order=3}static init_PolyDrawTool(){this.prototype.default_view=l,this.define(({Boolean:e,Int:t})=>({drag:[e,!0],num_objects:[t,0]}))}}n.PolyDrawTool=c,c.__name__="PolyDrawTool",c.init_PolyDrawTool()},function e(t,r,n,a,i){a();const o=t(8),s=t(370);class e extends s.EditToolView{_set_vertices(e,t){const r=this.model.vertex_renderer.glyph,n=this.model.vertex_renderer.data_source,[a,i]=[r.x.field,r.y.field];a&&(o.isArray(e)?n.data[a]=e:r.x={value:e}),i&&(o.isArray(t)?n.data[i]=t:r.y={value:t}),this._emit_cds_changes(n,!0,!0,!1)}_hide_vertices(){this._set_vertices([],[])}_snap_to_vertex(i,o,s){if(this.model.vertex_renderer){const e=this._select_event(i,"replace",[this.model.vertex_renderer]),t=this.model.vertex_renderer.data_source,r=this.model.vertex_renderer.glyph,[n,a]=[r.x.field,r.y.field];if(e.length){const i=t.selected.indices[0];n&&(o=t.data[n][i]),a&&(s=t.data[a][i]),t.selection_manager.clear()}}return[o,s]}}n.PolyToolView=e,e.__name__="PolyToolView";class l extends s.EditTool{constructor(e){super(e)}static init_PolyTool(){this.define(({AnyRef:e})=>({vertex_renderer:[e()]}))}}n.PolyTool=l,l.__name__="PolyTool",l.init_PolyTool()},function n(e,t,r,a,i){a();const n=e(43),l=e(8),o=e(375),s=e(242);class c extends o.PolyToolView{constructor(){super(...arguments),this._drawing=!1,this._cur_index=null}_doubletap(e){if(!this.model.active)return;const t=this._map_drag(e.sx,e.sy,this.model.vertex_renderer);if(null==t)return;const[r,n]=t,a=this._select_event(e,"replace",[this.model.vertex_renderer]),i=this.model.vertex_renderer.data_source,o=this.model.vertex_renderer.glyph,[s,l]=[o.x.field,o.y.field];if(a.length&&null!=this._selected_renderer){const e=i.selected.indices[0];this._drawing?(this._drawing=!1,i.selection_manager.clear()):(i.selected.indices=[e+1],s&&i.get_array(s).splice(e+1,0,r),l&&i.get_array(l).splice(e+1,0,n),this._drawing=!0),i.change.emit(),this._emit_cds_changes(this._selected_renderer.data_source)}else this._show_vertices(e)}_show_vertices(e){if(!this.model.active)return;const t=this.model.renderers[0],r=()=>this._update_vertices(t),n=null==t?void 0:t.data_source,a=this._select_event(e,"replace",this.model.renderers);if(!a.length)return this._set_vertices([],[]),this._selected_renderer=null,this._drawing=!1,this._cur_index=null,void(null!=n&&n.disconnect(n.properties.data.change,r));null!=n&&n.connect(n.properties.data.change,r),this._cur_index=a[0].data_source.selected.indices[0],this._update_vertices(a[0])}_update_vertices(e){const t=e.glyph,r=e.data_source,n=this._cur_index,[a,i]=[t.xs.field,t.ys.field];if(this._drawing)return;if(null==n&&(a||i))return;let o,s;a&&null!=n?(o=r.data[a][n],l.isArray(o)||(r.data[a][n]=o=Array.from(o))):o=t.xs.value,i&&null!=n?(s=r.data[i][n],l.isArray(s)||(r.data[i][n]=s=Array.from(s))):s=t.ys.value,this._selected_renderer=e,this._set_vertices(o,s)}_move(u){if(this._drawing&&null!=this._selected_renderer){const e=this.model.vertex_renderer,t=e.data_source,r=e.glyph,n=this._map_drag(u.sx,u.sy,e);if(null==n)return;let[a,i]=n;const o=t.selected.indices;[a,i]=this._snap_to_vertex(u,a,i),t.selected.indices=o;const[s,l]=[r.x.field,r.y.field],c=o[0];s&&(t.data[s][c]=a),l&&(t.data[l][c]=i),t.change.emit(),this._selected_renderer.data_source.change.emit()}}_tap(l){const c=this.model.vertex_renderer,u=this._map_drag(l.sx,l.sy,c);if(null==u)return;if(this._drawing&&this._selected_renderer){let[e,t]=u;const r=c.data_source,n=c.glyph,[a,i]=[n.x.field,n.y.field],o=r.selected.indices;[e,t]=this._snap_to_vertex(l,e,t);const s=o[0];if(r.selected.indices=[s+1],a){const l=r.get_array(a),c=l[s];l[s]=e,l.splice(s+1,0,c)}if(i){const l=r.get_array(i),c=l[s];l[s]=t,l.splice(s+1,0,c)}return r.change.emit(),void this._emit_cds_changes(this._selected_renderer.data_source,!0,!1,!0)}const e=this._select_mode(l);this._select_event(l,e,[c]),this._select_event(l,e,this.model.renderers)}_remove_vertex(){if(!this._drawing||!this._selected_renderer)return;const e=this.model.vertex_renderer,t=e.data_source,r=e.glyph,n=t.selected.indices[0],[a,i]=[r.x.field,r.y.field];a&&t.get_array(a).splice(n,1),i&&t.get_array(i).splice(n,1),t.change.emit(),this._emit_cds_changes(this._selected_renderer.data_source)}_pan_start(e){this._select_event(e,"append",[this.model.vertex_renderer]),this._basepoint=[e.sx,e.sy]}_pan(e){null!=this._basepoint&&(this._drag_points(e,[this.model.vertex_renderer]),this._selected_renderer&&this._selected_renderer.data_source.change.emit())}_pan_end(e){null!=this._basepoint&&(this._drag_points(e,[this.model.vertex_renderer]),this._emit_cds_changes(this.model.vertex_renderer.data_source,!1,!0,!0),this._selected_renderer&&this._emit_cds_changes(this._selected_renderer.data_source),this._basepoint=null)}_keyup(t){if(!this.model.active||!this._mouse_in_frame)return;let r;r=this._selected_renderer?[this.model.vertex_renderer]:this.model.renderers;for(const e of r)t.keyCode===n.Keys.Backspace?(this._delete_selected(e),this._selected_renderer&&this._emit_cds_changes(this._selected_renderer.data_source)):t.keyCode==n.Keys.Esc&&(this._drawing?(this._remove_vertex(),this._drawing=!1):this._selected_renderer&&this._hide_vertices(),e.data_source.selection_manager.clear())}deactivate(){this._selected_renderer&&(this._drawing&&(this._remove_vertex(),this._drawing=!1),this._hide_vertices())}}r.PolyEditToolView=c,c.__name__="PolyEditToolView";class u extends o.PolyTool{constructor(e){super(e),this.tool_name="Poly Edit Tool",this.icon=s.tool_icon_poly_edit,this.event_type=["tap","pan","move"],this.default_order=4}static init_PolyEditTool(){this.prototype.default_view=c}}r.PolyEditTool=u,u.__name__="PolyEditTool",u.init_PolyEditTool()},function r(e,t,n,a,i){a();const o=e(378),s=e(136),r=e(20),l=e(242);class c extends o.SelectToolView{_compute_limits(r){const n=this.plot_view.frame,a=this.model.dimensions;let i=this._base_point;if("center"==this.model.origin){const[n,a]=i,[e,t]=r;i=[n-(e-n),a-(t-a)]}return this.model._get_dim_limits(i,r,n,a)}_pan_start(e){const{sx:t,sy:r}=e;this._base_point=[t,r]}_pan(e){const{sx:t,sy:r}=e,n=[t,r],[a,i]=this._compute_limits(n);this.model.overlay.update({left:a[0],right:a[1],top:i[0],bottom:i[1]}),this.model.select_every_mousemove&&this._do_select(a,i,!1,this._select_mode(e))}_pan_end(e){const{sx:t,sy:r}=e,n=[t,r],[a,i]=this._compute_limits(n);this._do_select(a,i,!0,this._select_mode(e)),this.model.overlay.update({left:null,right:null,top:null,bottom:null}),this._base_point=null,this.plot_view.state.push("box_select",{selection:this.plot_view.get_selection()})}_do_select([e,t],[r,n],a,i="replace"){const o={type:"rect",sx0:e,sx1:t,sy0:r,sy1:n};this._select(o,a,i)}}n.BoxSelectToolView=c,c.__name__="BoxSelectToolView";const u=()=>new s.BoxAnnotation({level:"overlay",top_units:"screen",left_units:"screen",bottom_units:"screen",right_units:"screen",fill_color:"lightgrey",fill_alpha:.5,line_color:"black",line_alpha:1,line_width:2,line_dash:[4,4]});class f extends o.SelectTool{constructor(e){super(e),this.tool_name="Box Select",this.icon=l.tool_icon_box_select,this.event_type="pan",this.default_order=30}static init_BoxSelectTool(){this.prototype.default_view=c,this.define(({Boolean:e,Ref:t})=>({dimensions:[r.Dimensions,"both"],select_every_mousemove:[e,!1],overlay:[t(s.BoxAnnotation),u],origin:[r.BoxOrigin,"corner"]})),this.register_alias("box_select",()=>new f),this.register_alias("xbox_select",()=>new f({dimensions:"width"})),this.register_alias("ybox_select",()=>new f({dimensions:"height"}))}get tooltip(){return this._get_dim_tooltip(this.dimensions)}}n.BoxSelectTool=f,f.__name__="BoxSelectTool",f.init_BoxSelectTool()},function i(e,t,r,n,a){n();const o=e(237),s=e(61),l=e(123),c=e(62),u=e(161),i=e(20),f=e(43),d=e(264),h=e(15),p=e(11);class v extends o.GestureToolView{connect_signals(){super.connect_signals(),this.model.clear.connect(()=>this._clear())}get computed_renderers(){const{renderers:e,names:t}=this.model,r=this.plot_model.data_renderers;return u.compute_renderers(e,r,t)}_computed_renderers_by_data_source(){var n;const a=new Map;for(const r of this.computed_renderers){let e;if(r instanceof s.GlyphRenderer)e=r.data_source;else{if(!(r instanceof l.GraphRenderer))continue;e=r.node_renderer.data_source}const t=null!==(n=a.get(e))&&void 0!==n?n:[];a.set(e,[...t,r])}return a}_select_mode(e){const{shiftKey:t,ctrlKey:r}=e;return t||r?t&&!r?"append":!t&&r?"intersect":t&&r?"subtract":void p.unreachable():this.model.mode}_keyup(e){e.keyCode==f.Keys.Esc&&this._clear()}_clear(){for(const e of this.computed_renderers)e.get_selection_manager().clear();const e=this.computed_renderers.map(e=>this.plot_view.renderer_view(e));this.plot_view.request_paint(e)}_select(r,n,a){const i=this._computed_renderers_by_data_source();for(const[,t]of i){const i=t[0].get_selection_manager(),e=[];for(const r of t){const n=this.plot_view.renderer_view(r);null!=n&&e.push(n)}i.select(e,r,n,a)}null!=this.model.callback&&this._emit_callback(r),this._emit_selection_event(r,n)}_emit_selection_event(s,l=!0){const{x_scale:c,y_scale:u}=this.plot_view.frame;let f;switch(s.type){case"point":{const{sx:l,sy:e}=s,t=c.invert(l),r=u.invert(e);f=Object.assign(Object.assign({},s),{x:t,y:r});break}case"span":{const{sx:l,sy:e}=s,t=c.invert(l),r=u.invert(e);f=Object.assign(Object.assign({},s),{x:t,y:r});break}case"rect":{const{sx0:l,sx1:e,sy0:t,sy1:r}=s,[n,a]=c.r_invert(l,e),[i,o]=u.r_invert(t,r);f=Object.assign(Object.assign({},s),{x0:n,y0:i,x1:a,y1:o});break}case"poly":{const{sx:l,sy:e}=s,t=c.v_invert(l),r=u.v_invert(e);f=Object.assign(Object.assign({},s),{x:t,y:r});break}}this.plot_model.trigger_event(new d.SelectionGeometry(f,l))}}r.SelectToolView=v,v.__name__="SelectToolView";class g extends o.GestureTool{constructor(e){super(e)}initialize(){super.initialize(),this.clear=new h.Signal0(this,"clear")}static init_SelectTool(){this.define(({String:e,Array:t,Ref:r,Or:n,Auto:a})=>({renderers:[n(t(r(c.DataRenderer)),a),"auto"],names:[t(e),[]],mode:[i.SelectionMode,"replace"]}))}get menu(){return[{icon:"bk-tool-icon-replace-mode",tooltip:"Replace the current selection",active:()=>"replace"==this.mode,handler:()=>{this.mode="replace",this.active=!0}},{icon:"bk-tool-icon-append-mode",tooltip:"Append to the current selection (Shift)",active:()=>"append"==this.mode,handler:()=>{this.mode="append",this.active=!0}},{icon:"bk-tool-icon-intersect-mode",tooltip:"Intersect with the current selection (Ctrl)",active:()=>"intersect"==this.mode,handler:()=>{this.mode="intersect",this.active=!0}},{icon:"bk-tool-icon-subtract-mode",tooltip:"Subtract from the current selection (Shift+Ctrl)",active:()=>"subtract"==this.mode,handler:()=>{this.mode="subtract",this.active=!0}},null,{icon:"bk-tool-icon-clear-selection",tooltip:"Clear the current selection (Esc)",handler:()=>{this.clear.emit()}}]}}r.SelectTool=g,g.__name__="SelectTool",g.init_SelectTool()},function r(e,t,n,a,i){a();const o=e(237),r=e(136),s=e(20),l=e(242);class c extends o.GestureToolView{_match_aspect(e,t,r){const n=r.bbox.aspect,a=r.bbox.h_range.end,i=r.bbox.h_range.start,o=r.bbox.v_range.end,s=r.bbox.v_range.start;let l=Math.abs(e[0]-t[0]),c=Math.abs(e[1]-t[1]);const u=0==c?0:l/c,[f]=u>=n?[1,u/n]:[n/u,1];let d,h,p,v;return e[0]<=t[0]?(d=e[0],h=e[0]+l*f,h>a&&(h=a)):(h=e[0],d=e[0]-l*f,d<i&&(d=i)),l=Math.abs(h-d),e[1]<=t[1]?(v=e[1],p=e[1]+l/n,p>o&&(p=o)):(p=e[1],v=e[1]-l/n,v<s&&(v=s)),c=Math.abs(p-v),e[0]<=t[0]?h=e[0]+n*c:d=e[0]-n*c,[[d,h],[v,p]]}_compute_limits(e){const t=this.plot_view.frame,r=this.model.dimensions;let n,a,i=this._base_point;if("center"==this.model.origin){const[t,r]=i,[n,a]=e;i=[t-(n-t),r-(a-r)]}return this.model.match_aspect&&"both"==r?[n,a]=this._match_aspect(i,e,t):[n,a]=this.model._get_dim_limits(i,e,t,r),[n,a]}_pan_start(e){this._base_point=[e.sx,e.sy]}_pan(e){const t=[e.sx,e.sy],[r,n]=this._compute_limits(t);this.model.overlay.update({left:r[0],right:r[1],top:n[0],bottom:n[1]})}_pan_end(e){const t=[e.sx,e.sy],[r,n]=this._compute_limits(t);this._update(r,n),this.model.overlay.update({left:null,right:null,top:null,bottom:null}),this._base_point=null}_update([e,t],[r,n]){if(Math.abs(t-e)<=5||Math.abs(n-r)<=5)return;const{x_scales:a,y_scales:i}=this.plot_view.frame,o=new Map;for(const[r,n]of a){const[a,i]=n.r_invert(e,t);o.set(r,{start:a,end:i})}const s=new Map;for(const[e,t]of i){const[a,i]=t.r_invert(r,n);s.set(e,{start:a,end:i})}const l={xrs:o,yrs:s};this.plot_view.state.push("box_zoom",{range:l}),this.plot_view.update_range(l)}}n.BoxZoomToolView=c,c.__name__="BoxZoomToolView";const u=()=>new r.BoxAnnotation({level:"overlay",top_units:"screen",left_units:"screen",bottom_units:"screen",right_units:"screen",fill_color:"lightgrey",fill_alpha:.5,line_color:"black",line_alpha:1,line_width:2,line_dash:[4,4]});class f extends o.GestureTool{constructor(e){super(e),this.tool_name="Box Zoom",this.icon=l.tool_icon_box_zoom,this.event_type="pan",this.default_order=20}static init_BoxZoomTool(){this.prototype.default_view=c,this.define(({Boolean:e,Ref:t})=>({dimensions:[s.Dimensions,"both"],overlay:[t(r.BoxAnnotation),u],match_aspect:[e,!1],origin:[s.BoxOrigin,"corner"]})),this.register_alias("box_zoom",()=>new f({dimensions:"both"})),this.register_alias("xbox_zoom",()=>new f({dimensions:"width"})),this.register_alias("ybox_zoom",()=>new f({dimensions:"height"}))}get tooltip(){return this._get_dim_tooltip(this.dimensions)}}n.BoxZoomTool=f,f.__name__="BoxZoomTool",f.init_BoxZoomTool()},function r(e,t,n,a,i){a();const o=e(378),r=e(231),s=e(381),l=e(43),c=e(242);class u extends o.SelectToolView{constructor(){super(...arguments),this.sxs=[],this.sys=[]}connect_signals(){super.connect_signals(),this.connect(this.model.properties.active.change,()=>this._active_change())}_active_change(){this.model.active||this._clear_overlay()}_keyup(e){e.keyCode==l.Keys.Enter&&this._clear_overlay()}_pan_start(e){this.sxs=[],this.sys=[];const{sx:t,sy:r}=e;this._append_overlay(t,r)}_pan(e){const[t,r]=this.plot_view.frame.bbox.clip(e.sx,e.sy);this._append_overlay(t,r),this.model.select_every_mousemove&&this._do_select(this.sxs,this.sys,!1,this._select_mode(e))}_pan_end(e){const{sxs:t,sys:r}=this;this._clear_overlay(),this._do_select(t,r,!0,this._select_mode(e)),this.plot_view.state.push("lasso_select",{selection:this.plot_view.get_selection()})}_append_overlay(e,t){const{sxs:r,sys:n}=this;r.push(e),n.push(t),this.model.overlay.update({xs:r,ys:n})}_clear_overlay(){this.sxs=[],this.sys=[],this.model.overlay.update({xs:this.sxs,ys:this.sys})}_do_select(e,t,r,n){const a={type:"poly",sx:e,sy:t};this._select(a,r,n)}}n.LassoSelectToolView=u,u.__name__="LassoSelectToolView";class f extends o.SelectTool{constructor(e){super(e),this.tool_name="Lasso Select",this.icon=c.tool_icon_lasso_select,this.event_type="pan",this.default_order=12}static init_LassoSelectTool(){this.prototype.default_view=u,this.define(({Boolean:e,Ref:t})=>({select_every_mousemove:[e,!0],overlay:[t(r.PolyAnnotation),s.DEFAULT_POLY_OVERLAY]})),this.register_alias("lasso_select",()=>new f)}}n.LassoSelectTool=f,f.__name__="LassoSelectTool",f.init_LassoSelectTool()},function t(e,r,n,a,i){a();const o=e(378),s=e(231),t=e(43),l=e(9),c=e(242);class u extends o.SelectToolView{initialize(){super.initialize(),this.data={sx:[],sy:[]}}connect_signals(){super.connect_signals(),this.connect(this.model.properties.active.change,()=>this._active_change())}_active_change(){this.model.active||this._clear_data()}_keyup(e){e.keyCode==t.Keys.Enter&&this._clear_data()}_doubletap(e){this._do_select(this.data.sx,this.data.sy,!0,this._select_mode(e)),this.plot_view.state.push("poly_select",{selection:this.plot_view.get_selection()}),this._clear_data()}_clear_data(){this.data={sx:[],sy:[]},this.model.overlay.update({xs:[],ys:[]})}_tap(e){const{sx:t,sy:r}=e;this.plot_view.frame.bbox.contains(t,r)&&(this.data.sx.push(t),this.data.sy.push(r),this.model.overlay.update({xs:l.copy(this.data.sx),ys:l.copy(this.data.sy)}))}_do_select(e,t,r,n){const a={type:"poly",sx:e,sy:t};this._select(a,r,n)}}n.PolySelectToolView=u,u.__name__="PolySelectToolView";n.DEFAULT_POLY_OVERLAY=()=>new s.PolyAnnotation({level:"overlay",xs_units:"screen",ys_units:"screen",fill_color:"lightgrey",fill_alpha:.5,line_color:"black",line_alpha:1,line_width:2,line_dash:[4,4]});class f extends o.SelectTool{constructor(e){super(e),this.tool_name="Poly Select",this.icon=c.tool_icon_polygon_select,this.event_type="tap",this.default_order=11}static init_PolySelectTool(){this.prototype.default_view=u,this.define(({Ref:e})=>({overlay:[e(s.PolyAnnotation),n.DEFAULT_POLY_OVERLAY]})),this.register_alias("poly_select",()=>new f)}}n.PolySelectTool=f,f.__name__="PolySelectTool",f.init_PolySelectTool()},function e(t,r,n,a,i){a();const o=t(20),e=t(383),s=t(242);class l extends e.LineToolView{constructor(){super(...arguments),this._drawing=!1}_doubletap(t){if(!this.model.active)return;const r=this.model.renderers;for(const e of r){1==this._select_event(t,"replace",[e]).length&&(this._selected_renderer=e)}this._show_intersections(),this._update_line_cds()}_show_intersections(){if(!this.model.active)return;if(null==this._selected_renderer)return;if(!this.model.renderers.length)return this._set_intersection([],[]),this._selected_renderer=null,void(this._drawing=!1);const e=this._selected_renderer.data_source,t=this._selected_renderer.glyph,[r,n]=[t.x.field,t.y.field],a=e.get_array(r),i=e.get_array(n);this._set_intersection(a,i)}_tap(e){const t=this.model.intersection_renderer;if(null==this._map_drag(e.sx,e.sy,t))return;if(this._drawing&&this._selected_renderer){const r=this._select_mode(e);if(0==this._select_event(e,r,[t]).length)return}const r=this._select_mode(e);this._select_event(e,r,[t]),this._select_event(e,r,this.model.renderers)}_update_line_cds(){if(null==this._selected_renderer)return;const t=this.model.intersection_renderer.glyph,r=this.model.intersection_renderer.data_source,[n,a]=[t.x.field,t.y.field];if(n&&a){const t=r.data[n],e=r.data[a];this._selected_renderer.data_source.data[n]=t,this._selected_renderer.data_source.data[a]=e}this._emit_cds_changes(this._selected_renderer.data_source,!0,!0,!1)}_pan_start(e){this._select_event(e,"append",[this.model.intersection_renderer]),this._basepoint=[e.sx,e.sy]}_pan(e){null!=this._basepoint&&(this._drag_points(e,[this.model.intersection_renderer],this.model.dimensions),this._selected_renderer&&this._selected_renderer.data_source.change.emit())}_pan_end(e){null!=this._basepoint&&(this._drag_points(e,[this.model.intersection_renderer]),this._emit_cds_changes(this.model.intersection_renderer.data_source,!1,!0,!0),this._selected_renderer&&this._emit_cds_changes(this._selected_renderer.data_source),this._basepoint=null)}activate(){this._drawing=!0}deactivate(){this._selected_renderer&&(this._drawing&&(this._drawing=!1),this._hide_intersections())}}n.LineEditToolView=l,l.__name__="LineEditToolView";class c extends e.LineTool{constructor(e){super(e),this.tool_name="Line Edit Tool",this.icon=s.tool_icon_line_edit,this.event_type=["tap","pan","move"],this.default_order=4}static init_LineEditTool(){this.prototype.default_view=l,this.define(()=>({dimensions:[o.Dimensions,"both"]}))}get tooltip(){return this._get_dim_tooltip(this.dimensions)}}n.LineEditTool=c,c.__name__="LineEditTool",c.init_LineEditTool()},function e(t,r,n,a,i){a();const o=t(8),e=t(370);class s extends e.EditToolView{_set_intersection(e,t){const r=this.model.intersection_renderer.glyph,n=this.model.intersection_renderer.data_source,[a,i]=[r.x.field,r.y.field];a&&(o.isArray(e)?n.data[a]=e:r.x={value:e}),i&&(o.isArray(t)?n.data[i]=t:r.y={value:t}),this._emit_cds_changes(n,!0,!0,!1)}_hide_intersections(){this._set_intersection([],[])}}n.LineToolView=s,s.__name__="LineToolView";class l extends e.EditTool{constructor(e){super(e)}static init_LineTool(){this.define(({AnyRef:e})=>({intersection_renderer:[e()]}))}}n.LineTool=l,l.__name__="LineTool",l.init_LineTool()},function e(t,r,n,a,i){a();const o=t(1),s=t(237),e=t(20),l=o.__importStar(t(242));function w(n,a,i){const o=new Map;for(const[t,r]of n){const[n,e]=r.r_invert(a,i);o.set(t,{start:n,end:e})}return o}n.update_ranges=w;class c extends s.GestureToolView{_pan_start(e){var t;this.last_dx=0,this.last_dy=0;const{sx:r,sy:n}=e,a=this.plot_view.frame.bbox;if(!a.contains(r,n)){const e=a.h_range,t=a.v_range;(r<e.start||r>e.end)&&(this.v_axis_only=!0),(n<t.start||n>t.end)&&(this.h_axis_only=!0)}null===(t=this.model.document)||void 0===t||t.interactive_start(this.plot_model)}_pan(e){var t;this._update(e.deltaX,e.deltaY),null===(t=this.model.document)||void 0===t||t.interactive_start(this.plot_model)}_pan_end(e){this.h_axis_only=!1,this.v_axis_only=!1,null!=this.pan_info&&this.plot_view.state.push("pan",{range:this.pan_info})}_update(e,t){const r=this.plot_view.frame,n=e-this.last_dx,a=t-this.last_dy,i=r.bbox.h_range,o=i.start-n,s=i.end-n,l=r.bbox.v_range,c=l.start-a,u=l.end-a,f=this.model.dimensions;let d,h,p,v,g,m;"width"!=f&&"both"!=f||this.v_axis_only?(d=i.start,h=i.end,p=0):(d=o,h=s,p=-n),"height"!=f&&"both"!=f||this.h_axis_only?(v=l.start,g=l.end,m=0):(v=c,g=u,m=-a),this.last_dx=e,this.last_dy=t;const{x_scales:_,y_scales:y}=r,b=w(_,d,h),x=w(y,v,g);this.pan_info={xrs:b,yrs:x,sdx:p,sdy:m},this.plot_view.update_range(this.pan_info,{panning:!0})}}n.PanToolView=c,c.__name__="PanToolView";class u extends s.GestureTool{constructor(e){super(e),this.tool_name="Pan",this.event_type="pan",this.default_order=10}static init_PanTool(){this.prototype.default_view=c,this.define(()=>({dimensions:[e.Dimensions,"both",{on_update(e,t){switch(e){case"both":t.icon=l.tool_icon_pan;break;case"width":t.icon=l.tool_icon_xpan;break;case"height":t.icon=l.tool_icon_ypan}}}]})),this.register_alias("pan",()=>new u({dimensions:"both"})),this.register_alias("xpan",()=>new u({dimensions:"width"})),this.register_alias("ypan",()=>new u({dimensions:"height"}))}get tooltip(){return this._get_dim_tooltip(this.dimensions)}}n.PanTool=u,u.__name__="PanTool",u.init_PanTool()},function t(e,r,n,a,i){a();const d=e(136),o=e(156),s=e(19),l=e(237),t=e(242);function c(e){switch(e){case 1:return 2;case 2:return 1;case 4:return 5;case 5:return 4;default:return e}}function h(e,t,r,n){if(null==t)return!1;const a=r.compute(t);return Math.abs(e-a)<n}function p(e,t,r,n,a){let i=!0;if(null!=a.left&&null!=a.right){const t=r.invert(e);(t<a.left||t>a.right)&&(i=!1)}if(null!=a.bottom&&null!=a.top){const e=n.invert(t);(e<a.bottom||e>a.top)&&(i=!1)}return i}function u(e,t,r){let n=0;return e>=r.start&&e<=r.end&&(n+=1),t>=r.start&&t<=r.end&&(n+=1),n}function f(e,t,r,n){const a=t.compute(e),i=t.invert(a+r);return i>=n.start&&i<=n.end?i:e}function v(e,t,r){return e>t.start?(t.end=e,r):(t.end=t.start,t.start=e,c(r))}function g(e,t,r){return e<t.end?(t.start=e,r):(t.start=t.end,t.end=e,c(r))}function m(e,t,r,n){const[a,i]=t.r_compute(e.start,e.end),[o,s]=t.r_invert(a+r,i+r),l=u(e.start,e.end,n);u(o,s,n)>=l&&(e.start=o,e.end=s)}n.flip_side=c,n.is_near=h,n.is_inside=p,n.sides_inside=u,n.compute_value=f,n.update_range_end_side=v,n.update_range_start_side=g,n.update_range=m;class _ extends l.GestureToolView{initialize(){super.initialize(),this.side=0,this.model.update_overlay_from_ranges()}connect_signals(){super.connect_signals(),null!=this.model.x_range&&this.connect(this.model.x_range.change,()=>this.model.update_overlay_from_ranges()),null!=this.model.y_range&&this.connect(this.model.y_range.change,()=>this.model.update_overlay_from_ranges())}_pan_start(e){this.last_dx=0,this.last_dy=0;const t=this.model.x_range,r=this.model.y_range,{frame:n}=this.plot_view,a=n.x_scale,i=n.y_scale,o=this.model.overlay,{left:s,right:l,top:c,bottom:u}=o,f=this.model.overlay.line_width+d.EDGE_TOLERANCE;null!=t&&this.model.x_interaction&&(h(e.sx,s,a,f)?this.side=1:h(e.sx,l,a,f)?this.side=2:p(e.sx,e.sy,a,i,o)&&(this.side=3)),null!=r&&this.model.y_interaction&&(0==this.side&&h(e.sy,u,i,f)&&(this.side=4),0==this.side&&h(e.sy,c,i,f)?this.side=5:p(e.sx,e.sy,a,i,this.model.overlay)&&(3==this.side?this.side=7:this.side=6))}_pan(e){const t=this.plot_view.frame,r=e.deltaX-this.last_dx,n=e.deltaY-this.last_dy,a=this.model.x_range,i=this.model.y_range,o=t.x_scale,s=t.y_scale;if(null!=a)if(3==this.side||7==this.side)m(a,o,r,t.x_range);else if(1==this.side){const e=f(a.start,o,r,t.x_range);this.side=g(e,a,this.side)}else if(2==this.side){const e=f(a.end,o,r,t.x_range);this.side=v(e,a,this.side)}if(null!=i)if(6==this.side||7==this.side)m(i,s,n,t.y_range);else if(4==this.side){const e=f(i.start,s,n,t.y_range);this.side=g(e,i,this.side)}else if(5==this.side){const e=f(i.end,s,n,t.y_range);this.side=v(e,i,this.side)}this.last_dx=e.deltaX,this.last_dy=e.deltaY}_pan_end(e){this.side=0}}n.RangeToolView=_,_.__name__="RangeToolView";const y=()=>new d.BoxAnnotation({level:"overlay",fill_color:"lightgrey",fill_alpha:.5,line_color:"black",line_alpha:1,line_width:.5,line_dash:[2,2]});class b extends l.GestureTool{constructor(e){super(e),this.tool_name="Range Tool",this.icon=t.tool_icon_range,this.event_type="pan",this.default_order=1}static init_RangeTool(){this.prototype.default_view=_,this.define(({Boolean:e,Ref:t,Nullable:r})=>({x_range:[r(t(o.Range1d)),null],x_interaction:[e,!0],y_range:[r(t(o.Range1d)),null],y_interaction:[e,!0],overlay:[t(d.BoxAnnotation),y]}))}initialize(){super.initialize(),this.overlay.in_cursor="grab",this.overlay.ew_cursor=null!=this.x_range&&this.x_interaction?"ew-resize":null,this.overlay.ns_cursor=null!=this.y_range&&this.y_interaction?"ns-resize":null}update_overlay_from_ranges(){null==this.x_range&&null==this.y_range&&(this.overlay.left=null,this.overlay.right=null,this.overlay.bottom=null,this.overlay.top=null,s.logger.warn("RangeTool not configured with any Ranges.")),null==this.x_range?(this.overlay.left=null,this.overlay.right=null):(this.overlay.left=this.x_range.start,this.overlay.right=this.x_range.end),null==this.y_range?(this.overlay.bottom=null,this.overlay.top=null):(this.overlay.bottom=this.y_range.start,this.overlay.top=this.y_range.end)}}n.RangeTool=b,b.__name__="RangeTool",b.init_RangeTool()},function e(t,r,n,a,i){a();const o=t(378),s=t(20),l=t(242);class c extends o.SelectToolView{_tap(e){"tap"==this.model.gesture&&this._handle_tap(e)}_doubletap(e){"doubletap"==this.model.gesture&&this._handle_tap(e)}_handle_tap(e){const{sx:t,sy:r}=e,n={type:"point",sx:t,sy:r};this._select(n,!0,this._select_mode(e))}_select(n,a,i){const{callback:o}=this.model;if("select"==this.model.behavior){const t=this._computed_renderers_by_data_source();for(const[,e]of t){const t=e[0].get_selection_manager(),r=e.map(e=>this.plot_view.renderer_view(e)).filter(e=>null!=e);if(t.select(r,n,a,i)&&null!=o){const a=r[0].coordinates.x_scale.invert(n.sx),i=r[0].coordinates.y_scale.invert(n.sy),e={geometries:Object.assign(Object.assign({},n),{x:a,y:i}),source:t.source};o.execute(this.model,e)}}this._emit_selection_event(n),this.plot_view.state.push("tap",{selection:this.plot_view.get_selection()})}else for(const a of this.computed_renderers){const i=this.plot_view.renderer_view(a);if(null==i)continue;const r=a.get_selection_manager();if(r.inspect(i,n)&&null!=o){const a=i.coordinates.x_scale.invert(n.sx),e=i.coordinates.y_scale.invert(n.sy),t={geometries:Object.assign(Object.assign({},n),{x:a,y:e}),source:r.source};o.execute(this.model,t)}}}}n.TapToolView=c,c.__name__="TapToolView";class e extends o.SelectTool{constructor(e){super(e),this.tool_name="Tap",this.icon=l.tool_icon_tap_select,this.event_type="tap",this.default_order=10}static init_TapTool(){this.prototype.default_view=c,this.define(({Any:e,Enum:t,Nullable:r})=>({behavior:[s.TapBehavior,"select"],gesture:[t("tap","doubletap"),"tap"],callback:[r(e)]})),this.register_alias("click",()=>new e({behavior:"inspect"})),this.register_alias("tap",()=>new e),this.register_alias("doubletap",()=>new e({gesture:"doubletap"}))}}n.TapTool=e,e.__name__="TapTool",e.init_TapTool()},function g(e,t,r,n,a){n();const i=e(237),o=e(20),s=e(242),g=e(384);class l extends i.GestureToolView{_scroll(e){let t=this.model.speed*e.delta;t>.9?t=.9:t<-.9&&(t=-.9),this._update_ranges(t)}_update_ranges(e){var t;const{frame:r}=this.plot_view,n=r.bbox.h_range,a=r.bbox.v_range,[i,o]=[n.start,n.end],[s,l]=[a.start,a.end];let c,u,f,d;switch(this.model.dimension){case"height":{const t=Math.abs(l-s);c=i,u=o,f=s-t*e,d=l-t*e;break}case"width":{const t=Math.abs(o-i);c=i-t*e,u=o-t*e,f=s,d=l;break}}const{x_scales:h,y_scales:p}=r,v={xrs:g.update_ranges(h,c,u),yrs:g.update_ranges(p,f,d),factor:e};this.plot_view.state.push("wheel_pan",{range:v}),this.plot_view.update_range(v,{scrolling:!0}),null===(t=this.model.document)||void 0===t||t.interactive_start(this.plot_model)}}r.WheelPanToolView=l,l.__name__="WheelPanToolView";class c extends i.GestureTool{constructor(e){super(e),this.tool_name="Wheel Pan",this.icon=s.tool_icon_wheel_pan,this.event_type="scroll",this.default_order=12}static init_WheelPanTool(){this.prototype.default_view=l,this.define(()=>({dimension:[o.Dimension,"width"]})),this.internal(({Number:e})=>({speed:[e,.001]})),this.register_alias("xwheel_pan",()=>new c({dimension:"width"})),this.register_alias("ywheel_pan",()=>new c({dimension:"height"}))}get tooltip(){return this._get_dim_tooltip(this.dimension)}}r.WheelPanTool=c,c.__name__="WheelPanTool",c.init_WheelPanTool()},function t(e,r,n,a,i){a();const o=e(237),h=e(368),s=e(20),t=e(27),l=e(242);class c extends o.GestureToolView{_pinch(e){const{sx:t,sy:r,scale:n,ctrlKey:a,shiftKey:i}=e;let o;o=n>=1?20*(n-1):-20/n,this._scroll({type:"wheel",sx:t,sy:r,delta:o,ctrlKey:a,shiftKey:i})}_scroll(e){var t;const{frame:r}=this.plot_view,n=r.bbox.h_range,a=r.bbox.v_range,{sx:i,sy:o}=e,s=this.model.dimensions,l=("width"==s||"both"==s)&&n.start<i&&i<n.end,c=("height"==s||"both"==s)&&a.start<o&&o<a.end;if(!(l&&c||this.model.zoom_on_axis))return;const u=this.model.speed*e.delta,f=h.scale_range(r,u,l,c,{x:i,y:o});this.plot_view.state.push("wheel_zoom",{range:f});const{maintain_focus:d}=this.model;this.plot_view.update_range(f,{scrolling:!0,maintain_focus:d}),null===(t=this.model.document)||void 0===t||t.interactive_start(this.plot_model)}}n.WheelZoomToolView=c,c.__name__="WheelZoomToolView";class u extends o.GestureTool{constructor(e){super(e),this.tool_name="Wheel Zoom",this.icon=l.tool_icon_wheel_zoom,this.event_type=t.is_mobile?"pinch":"scroll",this.default_order=10}static init_WheelZoomTool(){this.prototype.default_view=c,this.define(({Boolean:e,Number:t})=>({dimensions:[s.Dimensions,"both"],maintain_focus:[e,!0],zoom_on_axis:[e,!0],speed:[t,1/600]})),this.register_alias("wheel_zoom",()=>new u({dimensions:"both"})),this.register_alias("xwheel_zoom",()=>new u({dimensions:"width"})),this.register_alias("ywheel_zoom",()=>new u({dimensions:"height"}))}get tooltip(){return this._get_dim_tooltip(this.dimensions)}}n.WheelZoomTool=u,u.__name__="WheelZoomTool",u.init_WheelZoomTool()},function e(t,r,n,a,i){a();const o=t(247),s=t(233),l=t(20),c=t(13),u=t(242);class e extends o.InspectToolView{_move(e){if(!this.model.active)return;const{sx:t,sy:r}=e;this.plot_view.frame.bbox.contains(t,r)?this._update_spans(t,r):this._update_spans(null,null)}_move_exit(e){this._update_spans(null,null)}_update_spans(e,t){const r=this.model.dimensions;"width"!=r&&"both"!=r||(this.model.spans.width.location=t),"height"!=r&&"both"!=r||(this.model.spans.height.location=e)}}n.CrosshairToolView=e,e.__name__="CrosshairToolView";class f extends o.InspectTool{constructor(e){super(e),this.tool_name="Crosshair",this.icon=u.tool_icon_crosshair}static init_CrosshairTool(){function r(e,t){return new s.Span({for_hover:!0,dimension:t,location_units:"screen",level:"overlay",line_color:e.line_color,line_width:e.line_width,line_alpha:e.line_alpha})}this.prototype.default_view=e,this.define(({Alpha:e,Number:t,Color:r})=>({dimensions:[l.Dimensions,"both"],line_color:[r,"black"],line_width:[t,1],line_alpha:[e,1]})),this.internal(({Struct:e,Ref:t})=>({spans:[e({width:t(s.Span),height:t(s.Span)}),e=>({width:r(e,"width"),height:r(e,"height")})]})),this.register_alias("crosshair",()=>new f)}get tooltip(){return this._get_dim_tooltip(this.dimensions)}get synthetic_renderers(){return c.values(this.spans)}}n.CrosshairTool=f,f.__name__="CrosshairTool",f.init_CrosshairTool()},function e(t,r,n,a,i){a();const o=t(53),s=t(13),l=t(34);class c extends o.Model{constructor(e){super(e)}static init_CustomJSHover(){this.define(({Unknown:e,String:t,Dict:r})=>({args:[r(e),{}],code:[t,""]}))}get values(){return s.values(this.args)}_make_code(e,t,r,n){return new Function(...s.keys(this.args),e,t,r,l.use_strict(n))}format(e,t,r){return this._make_code("value","format","special_vars",this.code)(...this.values,e,t,r)}}n.CustomJSHover=c,c.__name__="CustomJSHover",c.init_CustomJSHover()},function o(e,t,r,n,a){n();const i=e(1),s=e(247),f=e(390),l=e(254),b=e(61),o=e(123),d=e(62),x=e(63),w=e(127),u=i.__importStar(e(107)),h=e(182),A=e(43),p=e(22),T=e(13),v=e(245),g=e(8),c=e(122),m=e(20),_=e(242),y=e(15),k=e(161),M=i.__importStar(e(255));function S(e,t,r,n,a,i){const o={x:a[e],y:i[e]},s={x:a[e+1],y:i[e+1]};let l,c;if("span"==t.type)"h"==t.direction?(l=Math.abs(o.x-r),c=Math.abs(s.x-r)):(l=Math.abs(o.y-n),c=Math.abs(s.y-n));else{const e={x:r,y:n};l=u.dist_2_pts(o,e),c=u.dist_2_pts(s,e)}return l<c?[[o.x,o.y],e]:[[s.x,s.y],e+1]}function C(e,t,r){return[[e[r],t[r]],r]}r._nearest_line_hit=S,r._line_hit=C;class L extends s.InspectToolView{initialize(){super.initialize(),this._ttmodels=new Map,this._ttviews=new Map}async lazy_initialize(){await super.lazy_initialize(),await this._update_ttmodels()}remove(){c.remove_views(this._ttviews),super.remove()}connect_signals(){super.connect_signals();const e=this.plot_model.properties.renderers,{renderers:t,tooltips:r}=this.model.properties;this.on_change(r,()=>delete this._template_el),this.on_change([e,t,r],async()=>await this._update_ttmodels())}async _update_ttmodels(){const{_ttmodels:e,computed_renderers:t}=this;e.clear();const{tooltips:r}=this.model;if(null!=r)for(const t of this.computed_renderers){const n=new l.Tooltip({custom:g.isString(r)||g.isFunction(r),attachment:this.model.attachment,show_arrow:this.model.show_arrow});t instanceof b.GlyphRenderer?e.set(t,n):t instanceof o.GraphRenderer&&(e.set(t.node_renderer,n),e.set(t.edge_renderer,n))}const n=await c.build_views(this._ttviews,[...e.values()],{parent:this.plot_view});for(const e of n)e.render();const a=[...function*(){for(const e of t)e instanceof b.GlyphRenderer?yield e:e instanceof o.GraphRenderer&&(yield e.node_renderer,yield e.edge_renderer)}()],i=this._slots.get(this._update);if(null!=i){const e=new Set(a.map(e=>e.data_source));y.Signal.disconnect_receiver(this,i,e)}for(const e of a)this.connect(e.data_source.inspect,this._update)}get computed_renderers(){const{renderers:e,names:t}=this.model,r=this.plot_model.data_renderers;return k.compute_renderers(e,r,t)}get ttmodels(){return this._ttmodels}_clear(){this._inspect(1/0,1/0);for(const[,e]of this.ttmodels)e.clear()}_move(e){if(!this.model.active)return;const{sx:t,sy:r}=e;this.plot_view.frame.bbox.contains(t,r)?this._inspect(t,r):this._clear()}_move_exit(){this._clear()}_inspect(t,r){let n;if("mouse"==this.model.mode)n={type:"point",sx:t,sy:r};else{n={type:"span",direction:"vline"==this.model.mode?"h":"v",sx:t,sy:r}}for(const t of this.computed_renderers){const r=t.get_selection_manager(),e=this.plot_view.renderer_view(t);null!=e&&r.inspect(e,n)}this._emit_callback(n)}_update([o,{geometry:s}]){var l,n;if(!this.model.active)return;if("point"!=s.type&&"span"!=s.type)return;if(!(o instanceof b.GlyphRenderer))return;if("ignore"==this.model.muted_policy&&o.muted)return;const c=this.ttmodels.get(o);if(null==c)return;const a=o.get_selection_manager();let u=a.inspectors.get(o);if(u=o.view.convert_selection_to_subset(u),u.is_empty())return void c.clear();const f=a.source,e=this.plot_view.renderer_view(o);if(null==e)return;const{sx:d,sy:h}=s,p=e.coordinates.x_scale,v=e.coordinates.y_scale,g=p.invert(d),m=v.invert(h),{glyph:_}=e,y=[];if(_ instanceof x.LineView)for(const l of u.line_indices){let e,t,r=_._x[l+1],n=_._y[l+1],a=l;switch(this.model.line_policy){case"interp":[r,n]=_.get_interpolation_hit(l,s),e=p.compute(r),t=v.compute(n);break;case"prev":[[e,t],a]=C(_.sx,_.sy,l);break;case"next":[[e,t],a]=C(_.sx,_.sy,l+1);break;case"nearest":[[e,t],a]=S(l,s,d,h,_.sx,_.sy),r=_._x[a],n=_._y[a];break;default:[e,t]=[d,h]}const x={index:a,x:g,y:m,sx:d,sy:h,data_x:r,data_y:n,rx:e,ry:t,indices:u.line_indices,name:o.name};y.push([e,t,this._render_tooltips(f,a,x)])}for(const s of u.image_indices){const l={index:s.index,x:g,y:m,sx:d,sy:h,name:o.name},n=this._render_tooltips(f,s,l);y.push([d,h,n])}for(const c of u.indices)if(_ instanceof w.MultiLineView&&!T.isEmpty(u.multiline_indices))for(const l of u.multiline_indices[c.toString()]){let e,t,r,n=_._xs.get(c)[l],a=_._ys.get(c)[l],i=l;switch(this.model.line_policy){case"interp":[n,a]=_.get_interpolation_hit(c,l,s),e=p.compute(n),t=v.compute(a);break;case"prev":[[e,t],i]=C(_.sxs.get(c),_.sys.get(c),l);break;case"next":[[e,t],i]=C(_.sxs.get(c),_.sys.get(c),l+1);break;case"nearest":[[e,t],i]=S(l,s,d,h,_.sxs.get(c),_.sys.get(c)),n=_._xs.get(c)[i],a=_._ys.get(c)[i];break;default:throw new Error("shouldn't have happened")}r=o instanceof b.GlyphRenderer?o.view.convert_indices_from_subset([c])[0]:c;const T={index:r,x:g,y:m,sx:d,sy:h,data_x:n,data_y:a,segment_index:i,indices:u.multiline_indices,name:o.name};y.push([e,t,this._render_tooltips(f,r,T)])}else{const s=null===(l=_._x)||void 0===l?void 0:l[c],a=null===(n=_._y)||void 0===n?void 0:n[c];let t,r,e;if("snap_to_data"==this.model.point_policy){let e=_.get_anchor_point(this.model.anchor,c,[d,h]);if(null==e&&(e=_.get_anchor_point("center",c,[d,h]),null==e))continue;t=e.x,r=e.y}else[t,r]=[d,h];e=o instanceof b.GlyphRenderer?o.view.convert_indices_from_subset([c])[0]:c;const p={index:e,x:g,y:m,sx:d,sy:h,data_x:s,data_y:a,indices:u.indices,name:o.name};y.push([t,r,this._render_tooltips(f,e,p)])}if(0==y.length)c.clear();else{const{content:o}=c;A.empty(c.content);for(const[,,s]of y)null!=s&&o.appendChild(s);const[s,l]=y[y.length-1];c.setv({position:[s,l]},{check_eq:!1})}}_emit_callback(s){const{callback:l}=this.model;if(null!=l)for(const o of this.computed_renderers){if(!(o instanceof b.GlyphRenderer))continue;const e=this.plot_view.renderer_view(o);if(null==e)continue;const{x_scale:t,y_scale:r}=e.coordinates,n=t.invert(s.sx),a=r.invert(s.sy),i=o.data_source.inspected;l.execute(this.model,{geometry:Object.assign({x:n,y:a},s),renderer:o,index:i})}}_create_template(i){const o=A.div({style:{display:"table",borderSpacing:"2px"}});for(const[a]of i){const i=A.div({style:{display:"table-row"}});o.appendChild(i);const e=A.div({style:{display:"table-cell"},class:M.tooltip_row_label},0!=a.length?`${a}: `:"");i.appendChild(e);const t=A.span();t.dataset.value="";const r=A.span({class:M.tooltip_color_block}," ");r.dataset.swatch="",A.undisplay(r);const n=A.div({style:{display:"table-cell"},class:M.tooltip_row_value},t,r);i.appendChild(n)}return o}_render_template(r,n,a,i,o){const s=r.cloneNode(!0),l=s.querySelectorAll("[data-value]"),c=s.querySelectorAll("[data-swatch]"),u=/\$color(\[.*\])?:(\w*)/,f=/\$swatch:(\w*)/;for(const[[,r],s]of v.enumerate(n)){const n=r.match(f),t=r.match(u);if(null!=n||null!=t){if(null!=n){const[,r]=n,o=a.get_column(r);if(null==o)l[s].textContent=`${r} unknown`;else{const r=g.isNumber(i)?o[i]:null;null!=r&&(c[s].style.backgroundColor=p.color2css(r),A.display(c[s]))}}if(null!=t){const[,r="",n]=t,o=a.get_column(n);if(null==o){l[s].textContent=`${n} unknown`;continue}const u=r.indexOf("hex")>=0,f=r.indexOf("swatch")>=0,e=g.isNumber(i)?o[i]:null;if(null==e){l[s].textContent="(null)";continue}l[s].textContent=u?p.color2hex(e):p.color2css(e),f&&(c[s].style.backgroundColor=p.color2css(e),A.display(c[s]))}}else{const n=h.replace_placeholders(r.replace("$~","$data_"),a,i,this.model.formatters,o);if(g.isString(n))l[s].textContent=n;else for(const r of n)l[s].appendChild(r)}}return s}_render_tooltips(t,r,n){var a;const{tooltips:i}=this.model;if(g.isString(i)){const a=h.replace_placeholders({html:i},t,r,this.model.formatters,n);return A.div({},a)}if(g.isFunction(i))return i(t,n);if(null!=i){const e=null!==(a=this._template_el)&&void 0!==a?a:this._template_el=this._create_template(i);return this._render_template(e,i,t,r,n)}return null}}r.HoverToolView=L,L.__name__="HoverToolView";class E extends s.InspectTool{constructor(e){super(e),this.tool_name="Hover",this.icon=_.tool_icon_hover}static init_HoverTool(){this.prototype.default_view=L,this.define(({Any:e,Boolean:t,String:r,Array:n,Tuple:a,Dict:i,Or:o,Ref:s,Function:l,Auto:c,Nullable:u})=>({tooltips:[u(o(r,n(a(r,r)),l())),[["index","$index"],["data (x, y)","($x, $y)"],["screen (x, y)","($sx, $sy)"]]],formatters:[i(o(s(f.CustomJSHover),h.FormatterType)),{}],renderers:[o(n(s(d.DataRenderer)),c),"auto"],names:[n(r),[]],mode:[m.HoverMode,"mouse"],muted_policy:[m.MutedPolicy,"show"],point_policy:[m.PointPolicy,"snap_to_data"],line_policy:[m.LinePolicy,"nearest"],show_arrow:[t,!0],anchor:[m.Anchor,"center"],attachment:[m.TooltipAttachment,"horizontal"],callback:[u(e)]})),this.register_alias("hover",()=>new E)}}r.HoverTool=E,E.__name__="HoverTool",E.init_HoverTool()},function e(t,r,n,a,i){a();const o=t(15),s=t(53),l=t(238),c=t(247),u=t(245);class f extends s.Model{constructor(e){super(e)}static init_ToolProxy(){this.define(({Boolean:e,Array:t,Ref:r})=>({tools:[t(r(l.ButtonTool)),[]],active:[e,!1],disabled:[e,!1]}))}get button_view(){return this.tools[0].button_view}get event_type(){return this.tools[0].event_type}get tooltip(){return this.tools[0].tooltip}get tool_name(){return this.tools[0].tool_name}get icon(){return this.tools[0].computed_icon}get computed_icon(){return this.icon}get toggleable(){const e=this.tools[0];return e instanceof c.InspectTool&&e.toggleable}initialize(){super.initialize(),this.do=new o.Signal0(this,"do")}connect_signals(){super.connect_signals(),this.connect(this.do,()=>this.doit()),this.connect(this.properties.active.change,()=>this.set_active());for(const e of this.tools)this.connect(e.properties.active.change,()=>{this.active=e.active})}doit(){for(const e of this.tools)e.do.emit()}set_active(){for(const e of this.tools)e.active=this.active}get menu(){const{menu:t}=this.tools[0];if(null==t)return null;const r=[];for(const[e,n]of u.enumerate(t))if(null==e)r.push(null);else{const t=()=>{var t,r;for(const e of this.tools)null===(r=null===(t=e.menu)||void 0===t?void 0:t[n])||void 0===r||r.handler()};r.push(Object.assign(Object.assign({},e),{handler:t}))}return r}}n.ToolProxy=f,f.__name__="ToolProxy",f.init_ToolProxy()},function e(t,r,n,a,i){a();const o=t(20),s=t(9),l=t(13),c=t(248),u=t(235),f=t(392),e=t(319),d=t(221);class h extends c.ToolbarBase{constructor(e){super(e)}static init_ProxyToolbar(){this.define(({Array:e,Ref:t})=>({toolbars:[e(t(u.Toolbar)),[]]}))}initialize(){super.initialize(),this._merge_tools()}_merge_tools(){this._proxied_tools=[];const e={},t={},r={},n=[],a=[];for(const e of this.help)s.includes(a,e.redirect)||(n.push(e),a.push(e.redirect));this._proxied_tools.push(...n),this.help=n;for(const[e,t]of l.entries(this.gestures)){e in r||(r[e]={});for(const n of t.tools)n.type in r[e]||(r[e][n.type]=[]),r[e][n.type].push(n)}for(const t of this.inspectors)t.type in e||(e[t.type]=[]),e[t.type].push(t);for(const e of this.actions)e.type in t||(t[e.type]=[]),t[e.type].push(e);const i=(e,t=!1)=>{const r=new f.ToolProxy({tools:e,active:t});return this._proxied_tools.push(r),r};for(const e of l.keys(r)){const t=this.gestures[e];t.tools=[];for(const n of l.keys(r[e])){const a=r[e][n];if(a.length>0)if("multi"==e)for(const e of a){const r=i([e]);t.tools.push(r),this.connect(r.properties.active.change,()=>this._active_change(r))}else{const e=i(a);t.tools.push(e),this.connect(e.properties.active.change,()=>this._active_change(e))}}}this.actions=[];for(const[e,r]of l.entries(t))if("CustomAction"==e)for(const e of r)this.actions.push(i([e]));else r.length>0&&this.actions.push(i(r));this.inspectors=[];for(const t of l.values(e))t.length>0&&this.inspectors.push(i(t,!0));for(const[e,t]of l.entries(this.gestures))0!=t.tools.length&&(t.tools=s.sort_by(t.tools,e=>e.default_order),"pinch"!=e&&"scroll"!=e&&"multi"!=e&&(t.tools[0].active=!0))}}n.ProxyToolbar=h,h.__name__="ProxyToolbar",h.init_ProxyToolbar();class p extends e.LayoutDOMView{initialize(){this.model.toolbar.toolbar_location=this.model.toolbar_location,super.initialize()}get child_models(){return[this.model.toolbar]}_update_layout(){this.layout=new d.ContentBox(this.child_views[0].el);const{toolbar:e}=this.model;e.horizontal?this.layout.set_sizing({width_policy:"fit",min_width:100,height_policy:"fixed"}):this.layout.set_sizing({width_policy:"fixed",height_policy:"fit",min_height:100})}}n.ToolbarBoxView=p,p.__name__="ToolbarBoxView";class v extends e.LayoutDOM{constructor(e){super(e)}static init_ToolbarBox(){this.prototype.default_view=p,this.define(({Ref:e})=>({toolbar:[e(c.ToolbarBase)],toolbar_location:[o.Location,"right"]}))}}n.ToolbarBox=v,v.__name__="ToolbarBox",v.init_ToolbarBox()},function e(t,r,n,a,i){a();const o=t(1),l=t(53),c=o.__importStar(t(21)),u=t(8),f=t(13);n.resolve_defs=function(e,n){var t,r,a,i;function o(e){return null!=e.module?`${e.module}.${e.name}`:e.name}function s(r){if(u.isString(r))switch(r){case"Any":return c.Any;case"Unknown":return c.Unknown;case"Boolean":return c.Boolean;case"Number":return c.Number;case"Int":return c.Int;case"String":return c.String;case"Null":return c.Null}else switch(r[0]){case"Nullable":{const[,n]=r;return c.Nullable(s(n))}case"Or":{const[,...n]=r;return c.Or(...n.map(s))}case"Tuple":{const[,n,...e]=r;return c.Tuple(s(n),...e.map(s))}case"Array":{const[,n]=r;return c.Array(s(n))}case"Struct":{const[,...n]=r,e=n.map(([e,t])=>[e,s(t)]);return c.Struct(f.to_object(e))}case"Dict":{const[,n]=r;return c.Dict(s(n))}case"Map":{const[,n,e]=r;return c.Map(s(n),s(e))}case"Enum":{const[,...n]=r;return c.Enum(...n)}case"Ref":{const[,e]=r,t=n.get(o(e));if(null!=t)return c.Ref(t);throw new Error(`${o(e)} wasn't defined before referencing it`)}case"AnyRef":return c.AnyRef()}}for(const c of e){const e=(()=>{if(null==c.extends)return l.Model;{const e=n.get(o(c.extends));if(null!=e)return e;throw new Error(`base model ${o(c.extends)} of ${o(c)} is not defined`)}})(),u=((i=class extends e{}).__name__=c.name,i.__module__=c.module,i);for(const e of null!==(t=c.properties)&&void 0!==t?t:[]){const n=s(null!==(r=e.kind)&&void 0!==r?r:"Unknown");u.define({[e.name]:[n,e.default]})}for(const e of null!==(a=c.overrides)&&void 0!==a?a:[])u.override({[e.name]:e.default});n.register(u)}}},function e(t,r,c,n,a){n();const u=t(5),f=t(240),d=t(122),h=t(43),p=t(396);c.index={},c.add_document_standalone=async function(i,o,s=[],t=!1){const l=new Map;async function r(e){let t;const r=i.roots().indexOf(e),n=s[r];null!=n?t=n:o.classList.contains(p.BOKEH_ROOT)?t=o:(t=h.div({class:p.BOKEH_ROOT}),o.appendChild(t));const a=await d.build_view(e,{parent:null});return a instanceof f.DOMView&&a.renderTo(t),l.set(e,a),c.index[e.id]=a,a}for(const o of i.roots())await r(o);return t&&(window.document.title=i.title()),i.on_change(e=>{e instanceof u.RootAddedEvent?r(e.model):e instanceof u.RootRemovedEvent?function(e){const t=l.get(e);null!=t&&(t.remove(),l.delete(e),delete c.index[e.id])}(e.model):t&&e instanceof u.TitleChangedEvent&&(window.document.title=e.title)}),[...l.values()]}},function e(t,r,n,a,i){a();const o=t(43),s=t(44);function l(e){let t=document.getElementById(e);if(null==t)throw new Error(`Error rendering Bokeh model: could not find #${e} HTML tag`);if(!document.body.contains(t))throw new Error(`Error rendering Bokeh model: element #${e} must be under <body>`);if("SCRIPT"==t.tagName){const e=o.div({class:n.BOKEH_ROOT});o.replaceWith(t,e),t=e}return t}n.BOKEH_ROOT=s.root,n._resolve_element=function(e){const{elementid:t}=e;return null!=t?l(t):document.body},n._resolve_root_elements=function(t){const r=[];if(null!=t.root_ids&&null!=t.roots)for(const e of t.root_ids)r.push(l(t.roots[e]));return r}},function e(t,r,n,a,i){a();const s=t(398),l=t(19),c=t(395);n._get_ws_url=function(e,t){let r,n="ws:";return"https:"==window.location.protocol&&(n="wss:"),null!=t?(r=document.createElement("a"),r.href=t):r=window.location,null!=e?"/"==e&&(e=""):e=r.pathname.replace(/\/+$/,""),n+"//"+r.host+e+"/ws"};const u={};n.add_document_from_session=async function(e,t,r,n=[],a=!1){const i=window.location.search.substr(1);let o;try{o=await function(e,t,r){const n=s.parse_token(t).session_id;e in u||(u[e]={});const a=u[e];return n in a||(a[n]=s.pull_session(e,t,r)),a[n]}(e,t,i)}catch(e){const r=s.parse_token(t).session_id;throw l.logger.error(`Failed to load Bokeh session ${r}: ${e}`),e}return c.add_document_standalone(o.document,r,n,a)}},function a(e,t,n,r,i){r();const o=e(19),s=e(5),l=e(399),c=e(400),a=e(401);n.DEFAULT_SERVER_WEBSOCKET_URL="ws://localhost:5006/ws",n.DEFAULT_TOKEN="eyJzZXNzaW9uX2lkIjogImRlZmF1bHQifQ";let u=0;function f(e){let t=e.split(".")[0];const r=t.length%4;return 0!=r&&(t+="=".repeat(4-r)),JSON.parse(atob(t.replace(/_/g,"/").replace(/-/g,"+")))}n.parse_token=f;class d{constructor(e=n.DEFAULT_SERVER_WEBSOCKET_URL,t=n.DEFAULT_TOKEN,r=null){this.url=e,this.token=t,this.args_string=r,this._number=u++,this.socket=null,this.session=null,this.closed_permanently=!1,this._current_handler=null,this._pending_replies=new Map,this._pending_messages=[],this._receiver=new c.Receiver,this.id=f(t).session_id.split(".")[0],o.logger.debug(`Creating websocket ${this._number} to '${this.url}' session '${this.id}'`)}async connect(){if(this.closed_permanently)throw new Error("Cannot connect() a closed ClientConnection");if(null!=this.socket)throw new Error("Already connected");this._current_handler=null,this._pending_replies.clear(),this._pending_messages=[];try{let e=`${this.url}`;return null!=this.args_string&&this.args_string.length>0&&(e+=`?${this.args_string}`),this.socket=new WebSocket(e,["bokeh",this.token]),new Promise((e,t)=>{this.socket.binaryType="arraybuffer",this.socket.onopen=()=>this._on_open(e,t),this.socket.onmessage=e=>this._on_message(e),this.socket.onclose=e=>this._on_close(e,t),this.socket.onerror=()=>this._on_error(t)})}catch(e){throw o.logger.error(`websocket creation failed to url: ${this.url}`),o.logger.error(` - ${e}`),e}}close(){this.closed_permanently||(o.logger.debug(`Permanently closing websocket connection ${this._number}`),this.closed_permanently=!0,null!=this.socket&&this.socket.close(1e3,`close method called on ClientConnection ${this._number}`),this.session._connection_closed())}_schedule_reconnect(e){setTimeout(()=>{this.closed_permanently||o.logger.info(`Websocket connection ${this._number} disconnected, will not attempt to reconnect`)},e)}send(e){if(null==this.socket)throw new Error(`not connected so cannot send ${e}`);e.send(this.socket)}async send_with_reply(r){const e=await new Promise((e,t)=>{this._pending_replies.set(r.msgid(),{resolve:e,reject:t}),this.send(r)});if("ERROR"===e.msgtype())throw new Error(`Error reply ${e.content.text}`);return e}async _pull_doc_json(){const e=l.Message.create("PULL-DOC-REQ",{}),t=await this.send_with_reply(e);if(!("doc"in t.content))throw new Error("No 'doc' field in PULL-DOC-REPLY");return t.content.doc}async _repull_session_doc(t,r){var n;o.logger.debug(this.session?"Repulling session":"Pulling session for first time");try{const n=await this._pull_doc_json();if(null==this.session)if(this.closed_permanently)o.logger.debug("Got new document after connection was already closed"),r(new Error("The connection has been closed"));else{const r=s.Document.from_json(n),e=s.Document._compute_patch_since_json(n,r);if(e.events.length>0){o.logger.debug(`Sending ${e.events.length} changes from model construction back to server`);const t=l.Message.create("PATCH-DOC",{},e);this.send(t)}this.session=new a.ClientSession(this,r,this.id);for(const t of this._pending_messages)this.session.handle(t);this._pending_messages=[],o.logger.debug("Created a new session from new pulled doc"),t(this.session)}else this.session.document.replace_with_json(n),o.logger.debug("Updated existing session with new pulled doc")}catch(t){null===(n=console.trace)||void 0===n||n.call(console,t),o.logger.error(`Failed to repull session ${t}`),r(t instanceof Error?t:`${t}`)}}_on_open(t,r){o.logger.info(`Websocket connection ${this._number} is now open`),this._current_handler=e=>{this._awaiting_ack_handler(e,t,r)}}_on_message(e){null==this._current_handler&&o.logger.error("Got a message with no current handler set");try{this._receiver.consume(e.data)}catch(e){this._close_bad_protocol(`${e}`)}const t=this._receiver.message;if(null!=t){const e=t.problem();null!=e&&this._close_bad_protocol(e),this._current_handler(t)}}_on_close(e,t){o.logger.info(`Lost websocket ${this._number} connection, ${e.code} (${e.reason})`),this.socket=null,this._pending_replies.forEach(e=>e.reject("Disconnected")),this._pending_replies.clear(),this.closed_permanently||this._schedule_reconnect(2e3),t(new Error(`Lost websocket connection, ${e.code} (${e.reason})`))}_on_error(e){o.logger.debug(`Websocket error on socket ${this._number}`);const t="Could not open websocket";o.logger.error(`Failed to connect to Bokeh server: ${t}`),e(new Error(t))}_close_bad_protocol(e){o.logger.error(`Closing connection: ${e}`),null!=this.socket&&this.socket.close(1002,e)}_awaiting_ack_handler(e,t,r){"ACK"===e.msgtype()?(this._current_handler=e=>this._steady_state_handler(e),this._repull_session_doc(t,r)):this._close_bad_protocol("First message was not an ACK")}_steady_state_handler(e){const t=e.reqid(),r=this._pending_replies.get(t);r?(this._pending_replies.delete(t),r.resolve(e)):this.session?this.session.handle(e):"PATCH-DOC"!=e.msgtype()&&this._pending_messages.push(e)}}n.ClientConnection=d,d.__name__="ClientConnection",n.pull_session=function(e,t,r){return new d(e,t,r).connect()}},function e(t,r,n,a,i){a();const o=t(34);class s{constructor(e,t,r){this.header=e,this.metadata=t,this.content=r,this.buffers=new Map}static assemble(e,t,r){const n=JSON.parse(e),a=JSON.parse(t),i=JSON.parse(r);return new s(n,a,i)}assemble_buffer(e,t){const r=null!=this.header.num_buffers?this.header.num_buffers:0;if(r<=this.buffers.size)throw new Error(`too many buffers received, expecting ${r}`);const{id:n}=JSON.parse(e);this.buffers.set(n,t)}static create(e,t,r={}){const n=s.create_header(e);return new s(n,t,r)}static create_header(e){return{msgid:o.uniqueId(),msgtype:e}}complete(){return null!=this.header&&null!=this.metadata&&null!=this.content&&(null==this.header.num_buffers||this.buffers.size==this.header.num_buffers)}send(e){if((null!=this.header.num_buffers?this.header.num_buffers:0)>0)throw new Error("BokehJS only supports receiving buffers, not sending");const t=JSON.stringify(this.header),r=JSON.stringify(this.metadata),n=JSON.stringify(this.content);e.send(t),e.send(r),e.send(n)}msgid(){return this.header.msgid}msgtype(){return this.header.msgtype}reqid(){return this.header.reqid}problem(){return"msgid"in this.header?"msgtype"in this.header?null:"No msgtype in header":"No msgid in header"}}n.Message=s,s.__name__="Message"},function e(t,r,n,e,a){e();const i=t(399),o=t(8);class s{constructor(){this.message=null,this._partial=null,this._fragments=[],this._buf_header=null,this._current_consumer=this._HEADER}consume(e){this._current_consumer(e)}_HEADER(e){this._assume_text(e),this.message=null,this._partial=null,this._fragments=[e],this._buf_header=null,this._current_consumer=this._METADATA}_METADATA(e){this._assume_text(e),this._fragments.push(e),this._current_consumer=this._CONTENT}_CONTENT(e){this._assume_text(e),this._fragments.push(e);const[t,r,n]=this._fragments.slice(0,3);this._partial=i.Message.assemble(t,r,n),this._check_complete()}_BUFFER_HEADER(e){this._assume_text(e),this._buf_header=e,this._current_consumer=this._BUFFER_PAYLOAD}_BUFFER_PAYLOAD(e){this._assume_binary(e),this._partial.assemble_buffer(this._buf_header,e),this._check_complete()}_assume_text(e){if(!o.isString(e))throw new Error("Expected text fragment but received binary fragment")}_assume_binary(e){if(!(e instanceof ArrayBuffer))throw new Error("Expected binary fragment but received text fragment")}_check_complete(){this._partial.complete()?(this.message=this._partial,this._current_consumer=this._HEADER):this._current_consumer=this._BUFFER_HEADER}}n.Receiver=s,s.__name__="Receiver"},function r(e,t,n,a,i){a();const o=e(5),s=e(399),r=e(19);class l{constructor(e,t,r){this._connection=e,this.document=t,this.id=r,this._document_listener=e=>{this._document_changed(e)},this.document.on_change(this._document_listener,!0)}handle(e){const t=e.msgtype();"PATCH-DOC"===t?this._handle_patch(e):"OK"===t?this._handle_ok(e):"ERROR"===t?this._handle_error(e):r.logger.debug(`Doing nothing with message ${e.msgtype()}`)}close(){this._connection.close()}_connection_closed(){this.document.remove_on_change(this._document_listener)}async request_server_info(){const e=s.Message.create("SERVER-INFO-REQ",{});return(await this._connection.send_with_reply(e)).content}async force_roundtrip(){await this.request_server_info()}_document_changed(e){if(e.setter_id===this.id)return;const t=e instanceof o.DocumentEventBatch?e.events:[e],r=this.document.create_json_patch(t),n=s.Message.create("PATCH-DOC",{},r);this._connection.send(n)}_handle_patch(e){this.document.apply_json_patch(e.content,e.buffers,this.id)}_handle_ok(e){r.logger.trace(`Unhandled OK reply to ${e.reqid()}`)}_handle_error(e){r.logger.error(`Unhandled ERROR reply to ${e.reqid()}: ${e.content.text}`)}}n.ClientSession=l,l.__name__="ClientSession"},function c(e,t,r,n,a){n();const u=e(1),i=e(5),f=e(400),d=e(19),o=e(43),s=e(13),l=e(395),h=e(396),p=u.__importDefault(e(44)),v=u.__importDefault(e(253)),g=u.__importDefault(e(403));function c(e,t){t.buffers.length>0?e.consume(t.buffers[0].buffer):e.consume(t.content.data);const r=e.message;null!=r&&this.apply_json_patch(r.content,r.buffers)}function m(s,l){if("undefined"!=typeof Jupyter&&null!=Jupyter.notebook.kernel){d.logger.info(`Registering Jupyter comms for target ${s}`);const r=Jupyter.notebook.kernel.comm_manager;try{r.register_target(s,e=>{d.logger.info(`Registering Jupyter comms for target ${s}`);const t=new f.Receiver;e.on_msg(c.bind(l,t))})}catch(s){d.logger.warn(`Jupyter comms failed to register. push_notebook() will not function. (exception reported: ${s})`)}}else if(l.roots()[0].id in r.kernels){d.logger.info(`Registering JupyterLab comms for target ${s}`);const e=r.kernels[l.roots()[0].id];try{e.registerCommTarget(s,e=>{d.logger.info(`Registering JupyterLab comms for target ${s}`);const t=new f.Receiver;e.onMsg=c.bind(l,t)})}catch(s){d.logger.warn(`Jupyter comms failed to register. push_notebook() will not function. (exception reported: ${s})`)}}else if("undefined"!=typeof google&&null!=google.colab.kernel){d.logger.info(`Registering Google Colab comms for target ${s}`);const r=google.colab.kernel.comms;try{r.registerTarget(s,async e=>{var t,r,n;d.logger.info(`Registering Google Colab comms for target ${s}`);const a=new f.Receiver;try{for(var i,o=u.__asyncValues(e.messages);!(i=await o.next()).done;){const s=i.value,e={data:s.data},t=[];for(const l of null!==(n=s.buffers)&&void 0!==n?n:[])t.push(new DataView(l));const r={content:e,buffers:t};c.bind(l)(a,r)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&await r.call(o)}finally{if(t)throw t.error}}})}catch(s){d.logger.warn(`Google Colab comms failed to register. push_notebook() will not function. (exception reported: ${s})`)}}else console.warn("Jupyter notebooks comms not available. push_notebook() will not function. If running JupyterLab ensure the latest @bokeh/jupyter_bokeh extension is installed. In an exported notebook this warning is expected.")}o.stylesheet.append(p.default),o.stylesheet.append(v.default),o.stylesheet.append(g.default),r.kernels={},r.embed_items_notebook=function(t,r){if(1!=s.size(t))throw new Error("embed_items_notebook expects exactly one document in docs_json");const n=i.Document.from_json(s.values(t)[0]);for(const t of r){null!=t.notebook_comms_target&&m(t.notebook_comms_target,n);const r=h._resolve_element(t),e=h._resolve_root_elements(t);l.add_document_standalone(n,r,e)}}},function e(t,r,n,a,i){a(),n.root="bk-root",n.tooltip="bk-tooltip",n.default=".rendered_html .bk-root .bk-tooltip table,.rendered_html .bk-root .bk-tooltip tr,.rendered_html .bk-root .bk-tooltip th,.rendered_html .bk-root .bk-tooltip td{border:none;padding:1px;}"},function e(t,e,r,n,a){n();const i=t(1);i.__exportStar(t(399),r),i.__exportStar(t(400),r)},function e(t,r,n,a,i){function o(){const e=document.getElementsByTagName("body")[0],t=document.getElementsByClassName("bokeh-test-div");1==t.length&&(e.removeChild(t[0]),delete t[0]);const r=document.createElement("div");r.classList.add("bokeh-test-div"),r.style.display="none",e.insertBefore(r,e.firstChild)}a(),n.results={},n.init=function(){o()},n.record0=function(e,t){n.results[e]=t},n.record=function(e,t){n.results[e]=t,o()},n.count=function(e){null==n.results[e]&&(n.results[e]=0),n.results[e]+=1,o()}},function e(t,r,n,a,i){a(),n.safely=function(e,t=!1){try{return e()}catch(e){if(function(e){const t=document.createElement("div");t.style.backgroundColor="#f2dede",t.style.border="1px solid #a94442",t.style.borderRadius="4px",t.style.display="inline-block",t.style.fontFamily="sans-serif",t.style.marginTop="5px",t.style.minWidth="200px",t.style.padding="5px 5px 5px 10px",t.classList.add("bokeh-error-box-into-flames");const r=document.createElement("span");r.style.backgroundColor="#a94442",r.style.borderRadius="0px 4px 0px 0px",r.style.color="white",r.style.cursor="pointer",r.style.cssFloat="right",r.style.fontSize="0.8em",r.style.margin="-6px -6px 0px 0px",r.style.padding="2px 5px 4px 5px",r.title="close",r.setAttribute("aria-label","close"),r.appendChild(document.createTextNode("x")),r.addEventListener("click",()=>i.removeChild(t));const n=document.createElement("h3");n.style.color="#a94442",n.style.margin="8px 0px 0px 0px",n.style.padding="0px",n.appendChild(document.createTextNode("Bokeh Error"));const a=document.createElement("pre");a.style.whiteSpace="unset",a.style.overflowX="auto",a.appendChild(document.createTextNode(e)),t.appendChild(r),t.appendChild(n),t.appendChild(a);const i=document.getElementsByTagName("body")[0];i.insertBefore(t,i.firstChild)}(e instanceof Error&&e.stack?e.stack:`${e}`),t)return;throw e}}}],0,{main:0,tslib:1,index:2,version:3,"embed/index":4,"document/index":5,"document/document":6,base:7,"core/util/types":8,"core/util/array":9,"core/util/math":10,"core/util/assert":11,"core/util/arrayable":12,"core/util/object":13,"core/has_props":14,"core/signaling":15,"core/util/defer":16,"core/util/refs":17,"core/properties":18,"core/logging":19,"core/enums":20,"core/kinds":21,"core/util/color":22,"core/util/svg_colors":23,"core/types":24,"core/util/bitset":25,"core/util/eq":26,"core/util/platform":27,"core/settings":28,"core/util/ndarray":29,"core/serializer":30,"core/util/serialization":31,"core/util/buffer":32,"core/uniforms":33,"core/util/string":34,"document/events":35,"core/util/pretty":36,"core/util/cloneable":37,"models/index":38,"models/annotations/index":39,"models/annotations/annotation":40,"models/renderers/renderer":41,"core/view":42,"core/dom":43,"styles/root.css":44,"core/visuals/index":45,"core/visuals/line":46,"core/visuals/visual":47,"core/property_mixins":48,"core/visuals/fill":49,"core/visuals/text":50,"core/visuals/hatch":51,"core/visuals/patterns":52,model:53,"models/canvas/coordinates":54,"models/annotations/arrow":55,"models/annotations/data_annotation":56,"models/sources/columnar_data_source":57,"models/sources/data_source":58,"models/selections/selection":59,"core/selection_manager":60,"models/renderers/glyph_renderer":61,"models/renderers/data_renderer":62,"models/glyphs/line":63,"models/glyphs/xy_glyph":64,"core/util/projections":65,"models/glyphs/glyph":98,"core/util/bbox":99,"core/util/ragged_array":100,"core/util/spatial":101,"models/ranges/factor_range":104,"models/ranges/range":105,"models/glyphs/utils":106,"core/hittest":107,"models/glyphs/webgl/line":108,"models/glyphs/webgl/utils/index":109,"models/glyphs/webgl/utils/program":110,"models/glyphs/webgl/utils/buffer":111,"models/glyphs/webgl/utils/texture":112,"models/glyphs/webgl/base":113,"models/glyphs/webgl/line.vert":114,"models/glyphs/webgl/line.frag":115,"models/glyphs/patch":116,"models/glyphs/harea":117,"models/glyphs/area":118,"models/glyphs/varea":119,"models/sources/cds_view":120,"models/filters/filter":121,"core/build_views":122,"models/renderers/graph_renderer":123,"models/expressions/expression":124,"models/graphs/layout_provider":125,"models/graphs/graph_hit_test_policy":126,"models/glyphs/multi_line":127,"models/glyphs/patches":128,"models/selections/interaction_policy":129,"models/sources/column_data_source":130,"core/util/typed_array":131,"core/util/set":132,"models/annotations/arrow_head":133,"models/annotations/band":134,"models/annotations/upper_lower":135,"models/annotations/box_annotation":136,"models/annotations/color_bar":137,"models/annotations/title":138,"models/annotations/text_annotation":139,"core/layout/side_panel":140,"core/layout/types":141,"core/layout/layoutable":142,"core/util/text":143,"models/canvas/cartesian_frame":144,"models/scales/categorical_scale":145,"models/scales/scale":146,"models/transforms/index":147,"models/transforms/customjs_transform":148,"models/transforms/transform":149,"models/transforms/dodge":150,"models/transforms/range_transform":151,"models/transforms/interpolator":152,"models/transforms/jitter":153,"models/transforms/linear_interpolator":154,"models/transforms/step_interpolator":155,"models/ranges/range1d":156,"models/scales/log_scale":157,"models/scales/continuous_scale":158,"models/ranges/data_range1d":159,"models/ranges/data_range":160,"models/util":161,"models/axes/index":162,"models/axes/axis":163,"models/renderers/guide_renderer":164,"models/tickers/ticker":165,"models/formatters/tick_formatter":166,"core/graphics":167,"core/util/affine":168,"models/policies/labeling":169,"models/axes/categorical_axis":170,"models/tickers/categorical_ticker":171,"models/formatters/categorical_tick_formatter":172,"models/axes/continuous_axis":173,"models/axes/datetime_axis":174,"models/axes/linear_axis":175,"models/formatters/basic_tick_formatter":176,"models/tickers/basic_ticker":177,"models/tickers/adaptive_ticker":178,"models/tickers/continuous_ticker":179,"models/formatters/datetime_tick_formatter":180,"core/util/templating":182,"models/tickers/datetime_ticker":185,"models/tickers/composite_ticker":186,"models/tickers/days_ticker":187,"models/tickers/single_interval_ticker":188,"models/tickers/util":189,"models/tickers/months_ticker":190,"models/tickers/years_ticker":191,"models/axes/log_axis":192,"models/formatters/log_tick_formatter":193,"models/tickers/log_ticker":194,"models/axes/mercator_axis":195,"models/formatters/mercator_tick_formatter":196,"models/tickers/mercator_ticker":197,"models/tickers/index":198,"models/tickers/fixed_ticker":199,"models/tickers/binned_ticker":200,"models/mappers/scanning_color_mapper":201,"models/mappers/continuous_color_mapper":202,"models/mappers/color_mapper":203,"models/mappers/mapper":204,"models/formatters/index":205,"models/formatters/func_tick_formatter":206,"models/formatters/numeral_tick_formatter":207,"models/formatters/printf_tick_formatter":208,"models/mappers/index":209,"models/mappers/categorical_color_mapper":210,"models/mappers/categorical_mapper":211,"models/mappers/categorical_marker_mapper":212,"models/mappers/categorical_pattern_mapper":213,"models/mappers/linear_color_mapper":214,"models/mappers/log_color_mapper":215,"models/mappers/eqhist_color_mapper":216,"models/scales/index":217,"models/scales/linear_scale":218,"models/scales/linear_interpolation_scale":219,"models/ranges/index":220,"core/layout/index":221,"core/layout/alignments":222,"core/layout/grid":223,"core/layout/html":224,"core/layout/border":225,"models/annotations/label":226,"models/annotations/label_set":227,"models/annotations/legend":228,"models/annotations/legend_item":229,"core/vectorization":230,"models/annotations/poly_annotation":231,"models/annotations/slope":232,"models/annotations/span":233,"models/annotations/toolbar_panel":234,"models/tools/toolbar":235,"models/tools/tool":236,"models/tools/gestures/gesture_tool":237,"models/tools/button_tool":238,"core/dom_view":240,"styles/toolbar.css":241,"styles/icons.css":242,"styles/menus.css":243,"core/util/menus":244,"core/util/iterator":245,"models/tools/on_off_button":246,"models/tools/inspectors/inspect_tool":247,"models/tools/toolbar_base":248,"core/util/canvas":249,"core/util/svg":250,"models/tools/actions/action_tool":251,"models/tools/actions/help_tool":252,"styles/logo.css":253,"models/annotations/tooltip":254,"styles/tooltips.css":255,"models/annotations/whisker":256,"models/callbacks/index":257,"models/callbacks/customjs":258,"models/callbacks/callback":259,"models/callbacks/open_url":260,"models/canvas/index":261,"models/canvas/canvas":262,"core/ui_events":263,"core/bokeh_events":264,"core/util/wheel":265,"models/expressions/index":266,"models/expressions/customjs_expr":267,"models/expressions/stack":268,"models/expressions/cumsum":269,"models/expressions/minimum":270,"models/expressions/maximum":271,"models/filters/index":272,"models/filters/boolean_filter":273,"models/filters/customjs_filter":274,"models/filters/group_filter":275,"models/filters/index_filter":276,"models/glyphs/index":277,"models/glyphs/annular_wedge":278,"models/glyphs/annulus":279,"models/glyphs/arc":280,"models/glyphs/bezier":281,"models/glyphs/circle":282,"models/glyphs/webgl/markers":283,"models/glyphs/webgl/markers.vert":284,"models/glyphs/webgl/markers.frag":285,"models/glyphs/ellipse":286,"models/glyphs/ellipse_oval":287,"models/glyphs/center_rotatable":288,"models/glyphs/hbar":289,"models/glyphs/box":290,"models/glyphs/hex_tile":291,"models/glyphs/image":292,"models/glyphs/image_base":293,"models/glyphs/image_rgba":294,"models/glyphs/image_url":295,"core/util/image":296,"models/glyphs/multi_polygons":297,"models/glyphs/oval":298,"models/glyphs/quad":299,"models/glyphs/quadratic":300,"models/glyphs/ray":301,"models/glyphs/rect":302,"models/glyphs/scatter":303,"models/glyphs/marker":304,"models/glyphs/defs":305,"models/glyphs/segment":306,"models/glyphs/spline":307,"core/util/interpolation":308,"models/glyphs/step":309,"models/glyphs/text":310,"models/glyphs/vbar":311,"models/glyphs/wedge":312,"models/graphs/index":313,"models/graphs/static_layout_provider":314,"models/grids/index":315,"models/grids/grid":316,"models/layouts/index":317,"models/layouts/box":318,"models/layouts/layout_dom":319,"models/layouts/column":320,"models/layouts/grid_box":321,"models/layouts/html_box":322,"models/layouts/panel":323,"models/layouts/row":324,"models/layouts/spacer":325,"models/layouts/tabs":326,"styles/tabs.css":327,"styles/buttons.css":328,"models/layouts/widget_box":329,"models/plots/index":330,"models/plots/gmap_plot":331,"models/plots/plot":332,"models/plots/plot_canvas":333,"core/util/throttle":334,"models/plots/range_manager":335,"models/plots/state_manager":336,"models/plots/gmap_plot_canvas":337,"models/policies/index":338,"models/renderers/index":339,"models/selections/index":340,"models/sources/index":341,"models/sources/server_sent_data_source":342,"models/sources/web_data_source":343,"models/sources/ajax_data_source":344,"models/sources/geojson_data_source":345,"models/tiles/index":346,"models/tiles/bbox_tile_source":347,"models/tiles/mercator_tile_source":348,"models/tiles/tile_source":349,"models/tiles/tile_utils":350,"models/tiles/quadkey_tile_source":351,"models/tiles/tile_renderer":352,"models/tiles/wmts_tile_source":353,"styles/tiles.css":354,"models/tiles/tms_tile_source":355,"models/textures/index":356,"models/textures/canvas_texture":357,"models/textures/texture":358,"models/textures/image_url_texture":359,"models/tools/index":360,"models/tools/actions/custom_action":361,"models/tools/actions/redo_tool":362,"models/tools/actions/reset_tool":363,"models/tools/actions/save_tool":364,"models/tools/actions/undo_tool":365,"models/tools/actions/zoom_in_tool":366,"models/tools/actions/zoom_base_tool":367,"core/util/zoom":368,"models/tools/actions/zoom_out_tool":369,"models/tools/edit/edit_tool":370,"models/tools/edit/box_edit_tool":371,"models/tools/edit/freehand_draw_tool":372,"models/tools/edit/point_draw_tool":373,"models/tools/edit/poly_draw_tool":374,"models/tools/edit/poly_tool":375,"models/tools/edit/poly_edit_tool":376,"models/tools/gestures/box_select_tool":377,"models/tools/gestures/select_tool":378,"models/tools/gestures/box_zoom_tool":379,"models/tools/gestures/lasso_select_tool":380,"models/tools/gestures/poly_select_tool":381,"models/tools/edit/line_edit_tool":382,"models/tools/edit/line_tool":383,"models/tools/gestures/pan_tool":384,"models/tools/gestures/range_tool":385,"models/tools/gestures/tap_tool":386,"models/tools/gestures/wheel_pan_tool":387,"models/tools/gestures/wheel_zoom_tool":388,"models/tools/inspectors/crosshair_tool":389,"models/tools/inspectors/customjs_hover":390,"models/tools/inspectors/hover_tool":391,"models/tools/tool_proxy":392,"models/tools/toolbar_box":393,"document/defs":394,"embed/standalone":395,"embed/dom":396,"embed/server":397,"client/connection":398,"protocol/message":399,"protocol/receiver":400,"client/session":401,"embed/notebook":402,"styles/notebook.css":403,"protocol/index":404,testing:405,safely:406},{})});(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t(require("@popperjs/core")):typeof define==="function"&&define.amd?define(["@popperjs/core"],t):(e=typeof globalThis!=="undefined"?globalThis:e||self,e.bootstrap=t(e.Popper))})(this,function(e){"use strict";function t(r){if(r&&r.__esModule)return r;var n=Object.create(null);if(r){Object.keys(r).forEach(function(e){if(e!=="default"){var t=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(n,e,t.get?t:{enumerable:true,get:function(){return r[e]}})}})}n["default"]=r;return Object.freeze(n)}var f=t(e);const r=1e6;const i=1e3;const o="transitionend";const s=e=>{if(e===null||e===undefined){return`${e}`}return{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()};const d=e=>{do{e+=Math.floor(Math.random()*r)}while(document.getElementById(e));return e};const n=t=>{let r=t.getAttribute("data-bs-target");if(!r||r==="#"){let e=t.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith(".")){return null}if(e.includes("#")&&!e.startsWith("#")){e=`#${e.split("#")[1]}`}r=e&&e!=="#"?e.trim():null}return r};const l=e=>{const t=n(e);if(t){return document.querySelector(t)?t:null}return null};const c=e=>{const t=n(e);return t?document.querySelector(t):null};const p=e=>{if(!e){return 0}let{transitionDuration:t,transitionDelay:r}=window.getComputedStyle(e);const n=Number.parseFloat(t);const a=Number.parseFloat(r);if(!n&&!a){return 0}t=t.split(",")[0];r=r.split(",")[0];return(Number.parseFloat(t)+Number.parseFloat(r))*i};const u=e=>{e.dispatchEvent(new Event(o))};const h=e=>(e[0]||e).nodeType;const v=(e,t)=>{let r=false;const n=5;const a=t+n;function i(){r=true;e.removeEventListener(o,i)}e.addEventListener(o,i);setTimeout(()=>{if(!r){u(e)}},a)};const a=(a,i,o)=>{Object.keys(o).forEach(e=>{const t=o[e];const r=i[e];const n=r&&h(r)?"element":s(r);if(!new RegExp(t).test(n)){throw new TypeError(`${a.toUpperCase()}: Option "${e}" provided type "${n}" but expected type "${t}".`)}})};const g=e=>{if(!e){return false}if(e.style&&e.parentNode&&e.parentNode.style){const t=getComputedStyle(e);const r=getComputedStyle(e.parentNode);return t.display!=="none"&&r.display!=="none"&&t.visibility!=="hidden"}return false};const m=e=>{if(!e||e.nodeType!==Node.ELEMENT_NODE){return true}if(e.classList.contains("disabled")){return true}if(typeof e.disabled!=="undefined"){return e.disabled}return e.hasAttribute("disabled")&&e.getAttribute("disabled")!=="false"};const _=e=>{if(!document.documentElement.attachShadow){return null}if(typeof e.getRootNode==="function"){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}if(e instanceof ShadowRoot){return e}if(!e.parentNode){return null}return _(e.parentNode)};const y=()=>{};const b=e=>e.offsetHeight;const x=()=>{const{jQuery:e}=window;if(e&&!document.body.hasAttribute("data-bs-no-jquery")){return e}return null};const w=e=>{if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",e)}else{e()}};const A=()=>document.documentElement.dir==="rtl";const T=(r,n)=>{w(()=>{const e=x();if(e){const t=e.fn[r];e.fn[r]=n.jQueryInterface;e.fn[r].Constructor=n;e.fn[r].noConflict=()=>{e.fn[r]=t;return n.jQueryInterface}}})};const k=e=>{if(typeof e==="function"){e()}};const M=new Map;var S={set(e,t,r){if(!M.has(e)){M.set(e,new Map)}const n=M.get(e);if(!n.has(t)&&n.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`);return}n.set(t,r)},get(e,t){if(M.has(e)){return M.get(e).get(t)||null}return null},remove(e,t){if(!M.has(e)){return}const r=M.get(e);r.delete(t);if(r.size===0){M.delete(e)}}};const C=/[^.]*(?=\..*)\.|.*/;const L=/\..*/;const E=/::\d+$/;const D={};let O=1;const P={mouseenter:"mouseover",mouseleave:"mouseout"};const I=/^(mouseenter|mouseleave)/i;const R=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function z(e,t){return t&&`${t}::${O++}`||e.uidEvent||O++}function N(e){const t=z(e);e.uidEvent=t;D[t]=D[t]||{};return D[t]}function F(r,n){return function e(t){t.delegateTarget=r;if(e.oneOff){G.off(r,t.type,n)}return n.apply(r,[t])}}function j(i,o,s){return function r(n){const a=i.querySelectorAll(o);for(let{target:t}=n;t&&t!==this;t=t.parentNode){for(let e=a.length;e--;){if(a[e]===t){n.delegateTarget=t;if(r.oneOff){G.off(i,n.type,o,s)}return s.apply(t,[n])}}}return null}}function B(r,n,a=null){const i=Object.keys(r);for(let e=0,t=i.length;e<t;e++){const o=r[i[e]];if(o.originalHandler===n&&o.delegationSelector===a){return o}}return null}function H(e,t,r){const n=typeof t==="string";const a=n?r:t;let i=Y(e);const o=R.has(i);if(!o){i=e}return[n,a,i]}function U(e,t,r,n,a){if(typeof t!=="string"||!e){return}if(!r){r=n;n=null}if(I.test(t)){const h=t=>{return function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget)){return t.call(this,e)}}};if(n){n=h(n)}else{r=h(r)}}const[i,o,s]=H(t,r,n);const l=N(e);const c=l[s]||(l[s]={});const u=B(c,o,i?r:null);if(u){u.oneOff=u.oneOff&&a;return}const f=z(o,t.replace(C,""));const d=i?j(e,r,n):F(e,r);d.delegationSelector=i?r:null;d.originalHandler=o;d.oneOff=a;d.uidEvent=f;c[f]=d;e.addEventListener(s,d,i)}function V(e,t,r,n,a){const i=B(t[r],n,a);if(!i){return}e.removeEventListener(r,i,Boolean(a));delete t[r][i.uidEvent]}function q(r,n,a,i){const o=n[a]||{};Object.keys(o).forEach(e=>{if(e.includes(i)){const t=o[e];V(r,n,a,t.originalHandler,t.delegationSelector)}})}function Y(e){e=e.replace(L,"");return P[e]||e}const G={on(e,t,r,n){U(e,t,r,n,false)},one(e,t,r,n){U(e,t,r,n,true)},off(n,a,e,t){if(typeof a!=="string"||!n){return}const[r,i,o]=H(a,e,t);const s=o!==a;const l=N(n);const c=a.startsWith(".");if(typeof i!=="undefined"){if(!l||!l[o]){return}V(n,l,o,i,r?e:null);return}if(c){Object.keys(l).forEach(e=>{q(n,l,e,a.slice(1))})}const u=l[o]||{};Object.keys(u).forEach(e=>{const t=e.replace(E,"");if(!s||a.includes(t)){const r=u[e];V(n,l,o,r.originalHandler,r.delegationSelector)}})},trigger(e,t,r){if(typeof t!=="string"||!e){return null}const n=x();const a=Y(t);const i=t!==a;const o=R.has(a);let s;let l=true;let c=true;let u=false;let f=null;if(i&&n){s=n.Event(t,r);n(e).trigger(s);l=!s.isPropagationStopped();c=!s.isImmediatePropagationStopped();u=s.isDefaultPrevented()}if(o){f=document.createEvent("HTMLEvents");f.initEvent(a,l,true)}else{f=new CustomEvent(t,{bubbles:l,cancelable:true})}if(typeof r!=="undefined"){Object.keys(r).forEach(e=>{Object.defineProperty(f,e,{get(){return r[e]}})})}if(u){f.preventDefault()}if(c){e.dispatchEvent(f)}if(f.defaultPrevented&&typeof s!=="undefined"){s.preventDefault()}return f}};const W="5.0.0";class X{constructor(e){e=typeof e==="string"?document.querySelector(e):e;if(!e){return}this._element=e;S.set(this._element,this.constructor.DATA_KEY,this)}dispose(){S.remove(this._element,this.constructor.DATA_KEY);G.off(this._element,`.${this.constructor.DATA_KEY}`);this._element=null}static getInstance(e){return S.get(e,this.DATA_KEY)}static get VERSION(){return W}}const Z="alert";const J="bs.alert";const $=`.${J}`;const Q=".data-api";const K='[data-bs-dismiss="alert"]';const ee=`close${$}`;const te=`closed${$}`;const re=`click${$}${Q}`;const ne="alert";const ae="fade";const ie="show";class oe extends X{static get DATA_KEY(){return J}close(e){const t=e?this._getRootElement(e):this._element;const r=this._triggerCloseEvent(t);if(r===null||r.defaultPrevented){return}this._removeElement(t)}_getRootElement(e){return c(e)||e.closest(`.${ne}`)}_triggerCloseEvent(e){return G.trigger(e,ee)}_removeElement(e){e.classList.remove(ie);if(!e.classList.contains(ae)){this._destroyElement(e);return}const t=p(e);G.one(e,"transitionend",()=>this._destroyElement(e));v(e,t)}_destroyElement(e){if(e.parentNode){e.parentNode.removeChild(e)}G.trigger(e,te)}static jQueryInterface(t){return this.each(function(){let e=S.get(this,J);if(!e){e=new oe(this)}if(t==="close"){e[t](this)}})}static handleDismiss(t){return function(e){if(e){e.preventDefault()}t.close(this)}}}G.on(document,re,K,oe.handleDismiss(new oe));T(Z,oe);const se="button";const le="bs.button";const ce=`.${le}`;const ue=".data-api";const fe="active";const de='[data-bs-toggle="button"]';const he=`click${ce}${ue}`;class pe extends X{static get DATA_KEY(){return le}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(fe))}static jQueryInterface(t){return this.each(function(){let e=S.get(this,le);if(!e){e=new pe(this)}if(t==="toggle"){e[t]()}})}}G.on(document,he,de,e=>{e.preventDefault();const t=e.target.closest(de);let r=S.get(t,le);if(!r){r=new pe(t)}r.toggle()});T(se,pe);function ve(e){if(e==="true"){return true}if(e==="false"){return false}if(e===Number(e).toString()){return Number(e)}if(e===""||e==="null"){return null}return e}function ge(e){return e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const me={setDataAttribute(e,t,r){e.setAttribute(`data-bs-${ge(t)}`,r)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${ge(t)}`)},getDataAttributes(r){if(!r){return{}}const n={};Object.keys(r.dataset).filter(e=>e.startsWith("bs")).forEach(e=>{let t=e.replace(/^bs/,"");t=t.charAt(0).toLowerCase()+t.slice(1,t.length);n[t]=ve(r.dataset[e])});return n},getDataAttribute(e,t){return ve(e.getAttribute(`data-bs-${ge(t)}`))},offset(e){const t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},position(e){return{top:e.offsetTop,left:e.offsetLeft}}};const _e=3;const ye={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(e=>e.matches(t))},parents(e,t){const r=[];let n=e.parentNode;while(n&&n.nodeType===Node.ELEMENT_NODE&&n.nodeType!==_e){if(n.matches(t)){r.push(n)}n=n.parentNode}return r},prev(e,t){let r=e.previousElementSibling;while(r){if(r.matches(t)){return[r]}r=r.previousElementSibling}return[]},next(e,t){let r=e.nextElementSibling;while(r){if(r.matches(t)){return[r]}r=r.nextElementSibling}return[]}};const be="carousel";const xe="bs.carousel";const we=`.${xe}`;const Ae=".data-api";const Te="ArrowLeft";const ke="ArrowRight";const Me=500;const Se=40;const Ce={interval:5e3,keyboard:true,slide:false,pause:"hover",wrap:true,touch:true};const Le={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"};const Ee="next";const De="prev";const Oe="left";const Pe="right";const Ie=`slide${we}`;const Re=`slid${we}`;const ze=`keydown${we}`;const Ne=`mouseenter${we}`;const Fe=`mouseleave${we}`;const je=`touchstart${we}`;const Be=`touchmove${we}`;const He=`touchend${we}`;const Ue=`pointerdown${we}`;const Ve=`pointerup${we}`;const qe=`dragstart${we}`;const Ye=`load${we}${Ae}`;const Ge=`click${we}${Ae}`;const We="carousel";const Xe="active";const Ze="slide";const Je="carousel-item-end";const $e="carousel-item-start";const Qe="carousel-item-next";const Ke="carousel-item-prev";const et="pointer-event";const tt=".active";const rt=".active.carousel-item";const nt=".carousel-item";const at=".carousel-item img";const it=".carousel-item-next, .carousel-item-prev";const ot=".carousel-indicators";const st="[data-bs-target]";const lt="[data-bs-slide], [data-bs-slide-to]";const ct='[data-bs-ride="carousel"]';const ut="touch";const ft="pen";class dt extends X{constructor(e,t){super(e);this._items=null;this._interval=null;this._activeElement=null;this._isPaused=false;this._isSliding=false;this.touchTimeout=null;this.touchStartX=0;this.touchDeltaX=0;this._config=this._getConfig(t);this._indicatorsElement=ye.findOne(ot,this._element);this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0;this._pointerEvent=Boolean(window.PointerEvent);this._addEventListeners()}static get Default(){return Ce}static get DATA_KEY(){return xe}next(){if(!this._isSliding){this._slide(Ee)}}nextWhenVisible(){if(!document.hidden&&g(this._element)){this.next()}}prev(){if(!this._isSliding){this._slide(De)}}pause(e){if(!e){this._isPaused=true}if(ye.findOne(it,this._element)){u(this._element);this.cycle(true)}clearInterval(this._interval);this._interval=null}cycle(e){if(!e){this._isPaused=false}if(this._interval){clearInterval(this._interval);this._interval=null}if(this._config&&this._config.interval&&!this._isPaused){this._updateInterval();this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval)}}to(e){this._activeElement=ye.findOne(rt,this._element);const t=this._getItemIndex(this._activeElement);if(e>this._items.length-1||e<0){return}if(this._isSliding){G.one(this._element,Re,()=>this.to(e));return}if(t===e){this.pause();this.cycle();return}const r=e>t?Ee:De;this._slide(r,this._items[e])}dispose(){this._items=null;this._config=null;this._interval=null;this._isPaused=null;this._isSliding=null;this._activeElement=null;this._indicatorsElement=null;super.dispose()}_getConfig(e){e={...Ce,...e};a(be,e,Le);return e}_handleSwipe(){const e=Math.abs(this.touchDeltaX);if(e<=Se){return}const t=e/this.touchDeltaX;this.touchDeltaX=0;if(!t){return}this._slide(t>0?Pe:Oe)}_addEventListeners(){if(this._config.keyboard){G.on(this._element,ze,e=>this._keydown(e))}if(this._config.pause==="hover"){G.on(this._element,Ne,e=>this.pause(e));G.on(this._element,Fe,e=>this.cycle(e))}if(this._config.touch&&this._touchSupported){this._addTouchEventListeners()}}_addTouchEventListeners(){const t=e=>{if(this._pointerEvent&&(e.pointerType===ft||e.pointerType===ut)){this.touchStartX=e.clientX}else if(!this._pointerEvent){this.touchStartX=e.touches[0].clientX}};const r=e=>{this.touchDeltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this.touchStartX};const n=e=>{if(this._pointerEvent&&(e.pointerType===ft||e.pointerType===ut)){this.touchDeltaX=e.clientX-this.touchStartX}this._handleSwipe();if(this._config.pause==="hover"){this.pause();if(this.touchTimeout){clearTimeout(this.touchTimeout)}this.touchTimeout=setTimeout(e=>this.cycle(e),Me+this._config.interval)}};ye.find(at,this._element).forEach(e=>{G.on(e,qe,e=>e.preventDefault())});if(this._pointerEvent){G.on(this._element,Ue,e=>t(e));G.on(this._element,Ve,e=>n(e));this._element.classList.add(et)}else{G.on(this._element,je,e=>t(e));G.on(this._element,Be,e=>r(e));G.on(this._element,He,e=>n(e))}}_keydown(e){if(/input|textarea/i.test(e.target.tagName)){return}if(e.key===Te){e.preventDefault();this._slide(Pe)}else if(e.key===ke){e.preventDefault();this._slide(Oe)}}_getItemIndex(e){this._items=e&&e.parentNode?ye.find(nt,e.parentNode):[];return this._items.indexOf(e)}_getItemByOrder(e,t){const r=e===Ee;const n=e===De;const a=this._getItemIndex(t);const i=this._items.length-1;const o=n&&a===0||r&&a===i;if(o&&!this._config.wrap){return t}const s=n?-1:1;const l=(a+s)%this._items.length;return l===-1?this._items[this._items.length-1]:this._items[l]}_triggerSlideEvent(e,t){const r=this._getItemIndex(e);const n=this._getItemIndex(ye.findOne(rt,this._element));return G.trigger(this._element,Ie,{relatedTarget:e,direction:t,from:n,to:r})}_setActiveIndicatorElement(t){if(this._indicatorsElement){const e=ye.findOne(tt,this._indicatorsElement);e.classList.remove(Xe);e.removeAttribute("aria-current");const r=ye.find(st,this._indicatorsElement);for(let e=0;e<r.length;e++){if(Number.parseInt(r[e].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(t)){r[e].classList.add(Xe);r[e].setAttribute("aria-current","true");break}}}}_updateInterval(){const e=this._activeElement||ye.findOne(rt,this._element);if(!e){return}const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);if(t){this._config.defaultInterval=this._config.defaultInterval||this._config.interval;this._config.interval=t}else{this._config.interval=this._config.defaultInterval||this._config.interval}}_slide(e,t){const r=this._directionToOrder(e);const n=ye.findOne(rt,this._element);const a=this._getItemIndex(n);const i=t||this._getItemByOrder(r,n);const o=this._getItemIndex(i);const s=Boolean(this._interval);const l=r===Ee;const c=l?$e:Je;const u=l?Qe:Ke;const f=this._orderToDirection(r);if(i&&i.classList.contains(Xe)){this._isSliding=false;return}const d=this._triggerSlideEvent(i,f);if(d.defaultPrevented){return}if(!n||!i){return}this._isSliding=true;if(s){this.pause()}this._setActiveIndicatorElement(i);this._activeElement=i;if(this._element.classList.contains(Ze)){i.classList.add(u);b(i);n.classList.add(c);i.classList.add(c);const h=p(n);G.one(n,"transitionend",()=>{i.classList.remove(c,u);i.classList.add(Xe);n.classList.remove(Xe,u,c);this._isSliding=false;setTimeout(()=>{G.trigger(this._element,Re,{relatedTarget:i,direction:f,from:a,to:o})},0)});v(n,h)}else{n.classList.remove(Xe);i.classList.add(Xe);this._isSliding=false;G.trigger(this._element,Re,{relatedTarget:i,direction:f,from:a,to:o})}if(s){this.cycle()}}_directionToOrder(e){if(![Pe,Oe].includes(e)){return e}if(A()){return e===Oe?De:Ee}return e===Oe?Ee:De}_orderToDirection(e){if(![Ee,De].includes(e)){return e}if(A()){return e===De?Oe:Pe}return e===De?Pe:Oe}static carouselInterface(e,t){let r=S.get(e,xe);let n={...Ce,...me.getDataAttributes(e)};if(typeof t==="object"){n={...n,...t}}const a=typeof t==="string"?t:n.slide;if(!r){r=new dt(e,n)}if(typeof t==="number"){r.to(t)}else if(typeof a==="string"){if(typeof r[a]==="undefined"){throw new TypeError(`No method named "${a}"`)}r[a]()}else if(n.interval&&n.ride){r.pause();r.cycle()}}static jQueryInterface(e){return this.each(function(){dt.carouselInterface(this,e)})}static dataApiClickHandler(e){const t=c(this);if(!t||!t.classList.contains(We)){return}const r={...me.getDataAttributes(t),...me.getDataAttributes(this)};const n=this.getAttribute("data-bs-slide-to");if(n){r.interval=false}dt.carouselInterface(t,r);if(n){S.get(t,xe).to(n)}e.preventDefault()}}G.on(document,Ge,lt,dt.dataApiClickHandler);G.on(window,Ye,()=>{const r=ye.find(ct);for(let e=0,t=r.length;e<t;e++){dt.carouselInterface(r[e],S.get(r[e],xe))}});T(be,dt);const ht="collapse";const pt="bs.collapse";const vt=`.${pt}`;const gt=".data-api";const mt={toggle:true,parent:""};const _t={toggle:"boolean",parent:"(string|element)"};const yt=`show${vt}`;const bt=`shown${vt}`;const xt=`hide${vt}`;const wt=`hidden${vt}`;const At=`click${vt}${gt}`;const Tt="show";const kt="collapse";const Mt="collapsing";const St="collapsed";const Ct="width";const Lt="height";const Et=".show, .collapsing";const Dt='[data-bs-toggle="collapse"]';class Ot extends X{constructor(e,t){super(e);this._isTransitioning=false;this._config=this._getConfig(t);this._triggerArray=ye.find(`${Dt}[href="#${this._element.id}"],`+`${Dt}[data-bs-target="#${this._element.id}"]`);const r=ye.find(Dt);for(let e=0,t=r.length;e<t;e++){const n=r[e];const a=l(n);const i=ye.find(a).filter(e=>e===this._element);if(a!==null&&i.length){this._selector=a;this._triggerArray.push(n)}}this._parent=this._config.parent?this._getParent():null;if(!this._config.parent){this._addAriaAndCollapsedClass(this._element,this._triggerArray)}if(this._config.toggle){this.toggle()}}static get Default(){return mt}static get DATA_KEY(){return pt}toggle(){if(this._element.classList.contains(Tt)){this.hide()}else{this.show()}}show(){if(this._isTransitioning||this._element.classList.contains(Tt)){return}let e;let t;if(this._parent){e=ye.find(Et,this._parent).filter(e=>{if(typeof this._config.parent==="string"){return e.getAttribute("data-bs-parent")===this._config.parent}return e.classList.contains(kt)});if(e.length===0){e=null}}const r=ye.findOne(this._selector);if(e){const c=e.find(e=>r!==e);t=c?S.get(c,pt):null;if(t&&t._isTransitioning){return}}const n=G.trigger(this._element,yt);if(n.defaultPrevented){return}if(e){e.forEach(e=>{if(r!==e){Ot.collapseInterface(e,"hide")}if(!t){S.set(e,pt,null)}})}const a=this._getDimension();this._element.classList.remove(kt);this._element.classList.add(Mt);this._element.style[a]=0;if(this._triggerArray.length){this._triggerArray.forEach(e=>{e.classList.remove(St);e.setAttribute("aria-expanded",true)})}this.setTransitioning(true);const i=()=>{this._element.classList.remove(Mt);this._element.classList.add(kt,Tt);this._element.style[a]="";this.setTransitioning(false);G.trigger(this._element,bt)};const o=a[0].toUpperCase()+a.slice(1);const s=`scroll${o}`;const l=p(this._element);G.one(this._element,"transitionend",i);v(this._element,l);this._element.style[a]=`${this._element[s]}px`}hide(){if(this._isTransitioning||!this._element.classList.contains(Tt)){return}const e=G.trigger(this._element,xt);if(e.defaultPrevented){return}const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`;b(this._element);this._element.classList.add(Mt);this._element.classList.remove(kt,Tt);const r=this._triggerArray.length;if(r>0){for(let e=0;e<r;e++){const i=this._triggerArray[e];const o=c(i);if(o&&!o.classList.contains(Tt)){i.classList.add(St);i.setAttribute("aria-expanded",false)}}}this.setTransitioning(true);const n=()=>{this.setTransitioning(false);this._element.classList.remove(Mt);this._element.classList.add(kt);G.trigger(this._element,wt)};this._element.style[t]="";const a=p(this._element);G.one(this._element,"transitionend",n);v(this._element,a)}setTransitioning(e){this._isTransitioning=e}dispose(){super.dispose();this._config=null;this._parent=null;this._triggerArray=null;this._isTransitioning=null}_getConfig(e){e={...mt,...e};e.toggle=Boolean(e.toggle);a(ht,e,_t);return e}_getDimension(){return this._element.classList.contains(Ct)?Ct:Lt}_getParent(){let{parent:e}=this._config;if(h(e)){if(typeof e.jquery!=="undefined"||typeof e[0]!=="undefined"){e=e[0]}}else{e=ye.findOne(e)}const t=`${Dt}[data-bs-parent="${e}"]`;ye.find(t,e).forEach(e=>{const t=c(e);this._addAriaAndCollapsedClass(t,[e])});return e}_addAriaAndCollapsedClass(e,t){if(!e||!t.length){return}const r=e.classList.contains(Tt);t.forEach(e=>{if(r){e.classList.remove(St)}else{e.classList.add(St)}e.setAttribute("aria-expanded",r)})}static collapseInterface(e,t){let r=S.get(e,pt);const n={...mt,...me.getDataAttributes(e),...typeof t==="object"&&t?t:{}};if(!r&&n.toggle&&typeof t==="string"&&/show|hide/.test(t)){n.toggle=false}if(!r){r=new Ot(e,n)}if(typeof t==="string"){if(typeof r[t]==="undefined"){throw new TypeError(`No method named "${t}"`)}r[t]()}}static jQueryInterface(e){return this.each(function(){Ot.collapseInterface(this,e)})}}G.on(document,At,Dt,function(e){if(e.target.tagName==="A"||e.delegateTarget&&e.delegateTarget.tagName==="A"){e.preventDefault()}const n=me.getDataAttributes(this);const t=l(this);const r=ye.find(t);r.forEach(e=>{const t=S.get(e,pt);let r;if(t){if(t._parent===null&&typeof n.parent==="string"){t._config.parent=n.parent;t._parent=t._getParent()}r="toggle"}else{r=n}Ot.collapseInterface(e,r)})});T(ht,Ot);const Pt="dropdown";const It="bs.dropdown";const Rt=`.${It}`;const zt=".data-api";const Nt="Escape";const Ft="Space";const jt="Tab";const Bt="ArrowUp";const Ht="ArrowDown";const Ut=2;const Vt=new RegExp(`${Bt}|${Ht}|${Nt}`);const qt=`hide${Rt}`;const Yt=`hidden${Rt}`;const Gt=`show${Rt}`;const Wt=`shown${Rt}`;const Xt=`click${Rt}`;const Zt=`click${Rt}${zt}`;const Jt=`keydown${Rt}${zt}`;const $t=`keyup${Rt}${zt}`;const Qt="show";const Kt="dropup";const er="dropend";const tr="dropstart";const rr="navbar";const nr='[data-bs-toggle="dropdown"]';const ar=".dropdown-menu";const ir=".navbar-nav";const or=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)";const sr=A()?"top-end":"top-start";const lr=A()?"top-start":"top-end";const cr=A()?"bottom-end":"bottom-start";const ur=A()?"bottom-start":"bottom-end";const fr=A()?"left-start":"right-start";const dr=A()?"right-start":"left-start";const hr={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:true};const pr={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class vr extends X{constructor(e,t){super(e);this._popper=null;this._config=this._getConfig(t);this._menu=this._getMenuElement();this._inNavbar=this._detectNavbar();this._addEventListeners()}static get Default(){return hr}static get DefaultType(){return pr}static get DATA_KEY(){return It}toggle(){if(m(this._element)){return}const e=this._element.classList.contains(Qt);if(e){this.hide();return}this.show()}show(){if(m(this._element)||this._menu.classList.contains(Qt)){return}const t=vr.getParentFromElement(this._element);const e={relatedTarget:this._element};const r=G.trigger(this._element,Gt,e);if(r.defaultPrevented){return}if(this._inNavbar){me.setDataAttribute(this._menu,"popper","none")}else{if(typeof f==="undefined"){throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)")}let e=this._element;if(this._config.reference==="parent"){e=t}else if(h(this._config.reference)){e=this._config.reference;if(typeof this._config.reference.jquery!=="undefined"){e=this._config.reference[0]}}else if(typeof this._config.reference==="object"){e=this._config.reference}const n=this._getPopperConfig();const a=n.modifiers.find(e=>e.name==="applyStyles"&&e.enabled===false);this._popper=f.createPopper(e,this._menu,n);if(a){me.setDataAttribute(this._menu,"popper","static")}}if("ontouchstart"in document.documentElement&&!t.closest(ir)){[].concat(...document.body.children).forEach(e=>G.on(e,"mouseover",y))}this._element.focus();this._element.setAttribute("aria-expanded",true);this._menu.classList.toggle(Qt);this._element.classList.toggle(Qt);G.trigger(this._element,Wt,e)}hide(){if(m(this._element)||!this._menu.classList.contains(Qt)){return}const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._menu=null;if(this._popper){this._popper.destroy();this._popper=null}super.dispose()}update(){this._inNavbar=this._detectNavbar();if(this._popper){this._popper.update()}}_addEventListeners(){G.on(this._element,Xt,e=>{e.preventDefault();this.toggle()})}_completeHide(e){const t=G.trigger(this._element,qt,e);if(t.defaultPrevented){return}if("ontouchstart"in document.documentElement){[].concat(...document.body.children).forEach(e=>G.off(e,"mouseover",y))}if(this._popper){this._popper.destroy()}this._menu.classList.remove(Qt);this._element.classList.remove(Qt);this._element.setAttribute("aria-expanded","false");me.removeDataAttribute(this._menu,"popper");G.trigger(this._element,Yt,e)}_getConfig(e){e={...this.constructor.Default,...me.getDataAttributes(this._element),...e};a(Pt,e,this.constructor.DefaultType);if(typeof e.reference==="object"&&!h(e.reference)&&typeof e.reference.getBoundingClientRect!=="function"){throw new TypeError(`${Pt.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`)}return e}_getMenuElement(){return ye.next(this._element,ar)[0]}_getPlacement(){const e=this._element.parentNode;if(e.classList.contains(er)){return fr}if(e.classList.contains(tr)){return dr}const t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";if(e.classList.contains(Kt)){return t?lr:sr}return t?ur:cr}_detectNavbar(){return this._element.closest(`.${rr}`)!==null}_getOffset(){const{offset:t}=this._config;if(typeof t==="string"){return t.split(",").map(e=>Number.parseInt(e,10))}if(typeof t==="function"){return e=>t(e,this._element)}return t}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};if(this._config.display==="static"){e.modifiers=[{name:"applyStyles",enabled:false}]}return{...e,...typeof this._config.popperConfig==="function"?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem(e){const t=ye.find(or,this._menu).filter(g);if(!t.length){return}let r=t.indexOf(e.target);if(e.key===Bt&&r>0){r--}if(e.key===Ht&&r<t.length-1){r++}r=r===-1?0:r;t[r].focus()}static dropdownInterface(e,t){let r=S.get(e,It);const n=typeof t==="object"?t:null;if(!r){r=new vr(e,n)}if(typeof t==="string"){if(typeof r[t]==="undefined"){throw new TypeError(`No method named "${t}"`)}r[t]()}}static jQueryInterface(e){return this.each(function(){vr.dropdownInterface(this,e)})}static clearMenus(r){if(r){if(r.button===Ut||r.type==="keyup"&&r.key!==jt){return}if(/input|select|option|textarea|form/i.test(r.target.tagName)){return}}const n=ye.find(nr);for(let e=0,t=n.length;e<t;e++){const a=S.get(n[e],It);if(!a||a._config.autoClose===false){continue}if(!a._element.classList.contains(Qt)){continue}const i={relatedTarget:a._element};if(r){const o=r.composedPath();const s=o.includes(a._menu);if(o.includes(a._element)||a._config.autoClose==="inside"&&!s||a._config.autoClose==="outside"&&s){continue}if(r.type==="keyup"&&r.key===jt&&a._menu.contains(r.target)){continue}if(r.type==="click"){i.clickEvent=r}}a._completeHide(i)}}static getParentFromElement(e){return c(e)||e.parentNode}static dataApiKeydownHandler(e){if(/input|textarea/i.test(e.target.tagName)?e.key===Ft||e.key!==Nt&&(e.key!==Ht&&e.key!==Bt||e.target.closest(ar)):!Vt.test(e.key)){return}const t=this.classList.contains(Qt);if(!t&&e.key===Nt){return}e.preventDefault();e.stopPropagation();if(m(this)){return}const r=()=>this.matches(nr)?this:ye.prev(this,nr)[0];if(e.key===Nt){r().focus();vr.clearMenus();return}if(!t&&(e.key===Bt||e.key===Ht)){r().click();return}if(!t||e.key===Ft){vr.clearMenus();return}vr.getInstance(r())._selectMenuItem(e)}}G.on(document,Jt,nr,vr.dataApiKeydownHandler);G.on(document,Jt,ar,vr.dataApiKeydownHandler);G.on(document,Zt,vr.clearMenus);G.on(document,$t,vr.clearMenus);G.on(document,Zt,nr,function(e){e.preventDefault();vr.dropdownInterface(this)});T(Pt,vr);const gr=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top";const mr=".sticky-top";const _r=()=>{const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)};const yr=(t=_r())=>{br();xr("body","paddingRight",e=>e+t);xr(gr,"paddingRight",e=>e+t);xr(mr,"marginRight",e=>e-t)};const br=()=>{const e=document.body.style.overflow;if(e){me.setDataAttribute(document.body,"overflow",e)}document.body.style.overflow="hidden"};const xr=(e,n,a)=>{const i=_r();ye.find(e).forEach(e=>{if(e!==document.body&&window.innerWidth>e.clientWidth+i){return}const t=e.style[n];const r=window.getComputedStyle(e)[n];me.setDataAttribute(e,n,t);e.style[n]=`${a(Number.parseFloat(r))}px`})};const wr=()=>{Ar("body","overflow");Ar("body","paddingRight");Ar(gr,"paddingRight");Ar(mr,"marginRight")};const Ar=(e,r)=>{ye.find(e).forEach(e=>{const t=me.getDataAttribute(e,r);if(typeof t==="undefined"){e.style.removeProperty(r)}else{me.removeDataAttribute(e,r);e.style[r]=t}})};const Tr={isVisible:true,isAnimated:false,rootElement:document.body,clickCallback:null};const kr={isVisible:"boolean",isAnimated:"boolean",rootElement:"element",clickCallback:"(function|null)"};const Mr="backdrop";const Sr="modal-backdrop";const Cr="fade";const Lr="show";const Er=`mousedown.bs.${Mr}`;class Dr{constructor(e){this._config=this._getConfig(e);this._isAppended=false;this._element=null}show(e){if(!this._config.isVisible){k(e);return}this._append();if(this._config.isAnimated){b(this._getElement())}this._getElement().classList.add(Lr);this._emulateAnimation(()=>{k(e)})}hide(e){if(!this._config.isVisible){k(e);return}this._getElement().classList.remove(Lr);this._emulateAnimation(()=>{this.dispose();k(e)})}_getElement(){if(!this._element){const e=document.createElement("div");e.className=Sr;if(this._config.isAnimated){e.classList.add(Cr)}this._element=e}return this._element}_getConfig(e){e={...Tr,...typeof e==="object"?e:{}};a(Mr,e,kr);return e}_append(){if(this._isAppended){return}this._config.rootElement.appendChild(this._getElement());G.on(this._getElement(),Er,()=>{k(this._config.clickCallback)});this._isAppended=true}dispose(){if(!this._isAppended){return}G.off(this._element,Er);this._getElement().parentNode.removeChild(this._element);this._isAppended=false}_emulateAnimation(e){if(!this._config.isAnimated){k(e);return}const t=p(this._getElement());G.one(this._getElement(),"transitionend",()=>k(e));v(this._getElement(),t)}}const Or="modal";const Pr="bs.modal";const Ir=`.${Pr}`;const Rr=".data-api";const zr="Escape";const Nr={backdrop:true,keyboard:true,focus:true};const Fr={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"};const jr=`hide${Ir}`;const Br=`hidePrevented${Ir}`;const Hr=`hidden${Ir}`;const Ur=`show${Ir}`;const Vr=`shown${Ir}`;const qr=`focusin${Ir}`;const Yr=`resize${Ir}`;const Gr=`click.dismiss${Ir}`;const Wr=`keydown.dismiss${Ir}`;const Xr=`mouseup.dismiss${Ir}`;const Zr=`mousedown.dismiss${Ir}`;const Jr=`click${Ir}${Rr}`;const $r="modal-open";const Qr="fade";const Kr="show";const en="modal-static";const tn=".modal-dialog";const rn=".modal-body";const nn='[data-bs-toggle="modal"]';const an='[data-bs-dismiss="modal"]';class on extends X{constructor(e,t){super(e);this._config=this._getConfig(t);this._dialog=ye.findOne(tn,this._element);this._backdrop=this._initializeBackDrop();this._isShown=false;this._ignoreBackdropClick=false;this._isTransitioning=false}static get Default(){return Nr}static get DATA_KEY(){return Pr}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||this._isTransitioning){return}if(this._isAnimated()){this._isTransitioning=true}const t=G.trigger(this._element,Ur,{relatedTarget:e});if(this._isShown||t.defaultPrevented){return}this._isShown=true;yr();document.body.classList.add($r);this._adjustDialog();this._setEscapeEvent();this._setResizeEvent();G.on(this._element,Gr,an,e=>this.hide(e));G.on(this._dialog,Zr,()=>{G.one(this._element,Xr,e=>{if(e.target===this._element){this._ignoreBackdropClick=true}})});this._showBackdrop(()=>this._showElement(e))}hide(e){if(e){e.preventDefault()}if(!this._isShown||this._isTransitioning){return}const t=G.trigger(this._element,jr);if(t.defaultPrevented){return}this._isShown=false;const r=this._isAnimated();if(r){this._isTransitioning=true}this._setEscapeEvent();this._setResizeEvent();G.off(document,qr);this._element.classList.remove(Kr);G.off(this._element,Gr);G.off(this._dialog,Zr);if(r){const n=p(this._element);G.one(this._element,"transitionend",e=>this._hideModal(e));v(this._element,n)}else{this._hideModal()}}dispose(){[window,this._dialog].forEach(e=>G.off(e,Ir));super.dispose();G.off(document,qr);this._config=null;this._dialog=null;this._backdrop.dispose();this._backdrop=null;this._isShown=null;this._ignoreBackdropClick=null;this._isTransitioning=null}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Dr({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_getConfig(e){e={...Nr,...me.getDataAttributes(this._element),...e};a(Or,e,Fr);return e}_showElement(e){const t=this._isAnimated();const r=ye.findOne(rn,this._dialog);if(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE){document.body.appendChild(this._element)}this._element.style.display="block";this._element.removeAttribute("aria-hidden");this._element.setAttribute("aria-modal",true);this._element.setAttribute("role","dialog");this._element.scrollTop=0;if(r){r.scrollTop=0}if(t){b(this._element)}this._element.classList.add(Kr);if(this._config.focus){this._enforceFocus()}const n=()=>{if(this._config.focus){this._element.focus()}this._isTransitioning=false;G.trigger(this._element,Vr,{relatedTarget:e})};if(t){const a=p(this._dialog);G.one(this._dialog,"transitionend",n);v(this._dialog,a)}else{n()}}_enforceFocus(){G.off(document,qr);G.on(document,qr,e=>{if(document!==e.target&&this._element!==e.target&&!this._element.contains(e.target)){this._element.focus()}})}_setEscapeEvent(){if(this._isShown){G.on(this._element,Wr,e=>{if(this._config.keyboard&&e.key===zr){e.preventDefault();this.hide()}else if(!this._config.keyboard&&e.key===zr){this._triggerBackdropTransition()}})}else{G.off(this._element,Wr)}}_setResizeEvent(){if(this._isShown){G.on(window,Yr,()=>this._adjustDialog())}else{G.off(window,Yr)}}_hideModal(){this._element.style.display="none";this._element.setAttribute("aria-hidden",true);this._element.removeAttribute("aria-modal");this._element.removeAttribute("role");this._isTransitioning=false;this._backdrop.hide(()=>{document.body.classList.remove($r);this._resetAdjustments();wr();G.trigger(this._element,Hr)})}_showBackdrop(e){G.on(this._element,Gr,e=>{if(this._ignoreBackdropClick){this._ignoreBackdropClick=false;return}if(e.target!==e.currentTarget){return}if(this._config.backdrop===true){this.hide()}else if(this._config.backdrop==="static"){this._triggerBackdropTransition()}});this._backdrop.show(e)}_isAnimated(){return this._element.classList.contains(Qr)}_triggerBackdropTransition(){const e=G.trigger(this._element,Br);if(e.defaultPrevented){return}const t=this._element.scrollHeight>document.documentElement.clientHeight;if(!t){this._element.style.overflowY="hidden"}this._element.classList.add(en);const r=p(this._dialog);G.off(this._element,"transitionend");G.one(this._element,"transitionend",()=>{this._element.classList.remove(en);if(!t){G.one(this._element,"transitionend",()=>{this._element.style.overflowY=""});v(this._element,r)}});v(this._element,r);this._element.focus()}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight;const t=_r();const r=t>0;if(!r&&e&&!A()||r&&!e&&A()){this._element.style.paddingLeft=`${t}px`}if(r&&!e&&!A()||!r&&e&&A()){this._element.style.paddingRight=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="";this._element.style.paddingRight=""}static jQueryInterface(t,r){return this.each(function(){const e=on.getInstance(this)||new on(this,typeof t==="object"?t:{});if(typeof t!=="string"){return}if(typeof e[t]==="undefined"){throw new TypeError(`No method named "${t}"`)}e[t](r)})}}G.on(document,Jr,nn,function(e){const t=c(this);if(["A","AREA"].includes(this.tagName)){e.preventDefault()}G.one(t,Ur,e=>{if(e.defaultPrevented){return}G.one(t,Hr,()=>{if(g(this)){this.focus()}})});const r=on.getInstance(t)||new on(t);r.toggle(this)});T(Or,on);const sn="offcanvas";const ln="bs.offcanvas";const cn=`.${ln}`;const un=".data-api";const fn=`load${cn}${un}`;const dn="Escape";const hn={backdrop:true,keyboard:true,scroll:false};const pn={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"};const vn="show";const gn=".offcanvas.show";const mn=`show${cn}`;const _n=`shown${cn}`;const yn=`hide${cn}`;const bn=`hidden${cn}`;const xn=`focusin${cn}`;const wn=`click${cn}${un}`;const An=`click.dismiss${cn}`;const Tn=`keydown.dismiss${cn}`;const kn='[data-bs-dismiss="offcanvas"]';const Mn='[data-bs-toggle="offcanvas"]';class Sn extends X{constructor(e,t){super(e);this._config=this._getConfig(t);this._isShown=false;this._backdrop=this._initializeBackDrop();this._addEventListeners()}static get Default(){return hn}static get DATA_KEY(){return ln}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown){return}const t=G.trigger(this._element,mn,{relatedTarget:e});if(t.defaultPrevented){return}this._isShown=true;this._element.style.visibility="visible";this._backdrop.show();if(!this._config.scroll){yr();this._enforceFocusOnElement(this._element)}this._element.removeAttribute("aria-hidden");this._element.setAttribute("aria-modal",true);this._element.setAttribute("role","dialog");this._element.classList.add(vn);const r=()=>{G.trigger(this._element,_n,{relatedTarget:e})};const n=p(this._element);G.one(this._element,"transitionend",r);v(this._element,n)}hide(){if(!this._isShown){return}const e=G.trigger(this._element,yn);if(e.defaultPrevented){return}G.off(document,xn);this._element.blur();this._isShown=false;this._element.classList.remove(vn);this._backdrop.hide();const t=()=>{this._element.setAttribute("aria-hidden",true);this._element.removeAttribute("aria-modal");this._element.removeAttribute("role");this._element.style.visibility="hidden";if(!this._config.scroll){wr()}G.trigger(this._element,bn)};const r=p(this._element);G.one(this._element,"transitionend",t);v(this._element,r)}dispose(){this._backdrop.dispose();super.dispose();G.off(document,xn);this._config=null;this._backdrop=null}_getConfig(e){e={...hn,...me.getDataAttributes(this._element),...typeof e==="object"?e:{}};a(sn,e,pn);return e}_initializeBackDrop(){return new Dr({isVisible:this._config.backdrop,isAnimated:true,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_enforceFocusOnElement(t){G.off(document,xn);G.on(document,xn,e=>{if(document!==e.target&&t!==e.target&&!t.contains(e.target)){t.focus()}});t.focus()}_addEventListeners(){G.on(this._element,An,kn,()=>this.hide());G.on(this._element,Tn,e=>{if(this._config.keyboard&&e.key===dn){this.hide()}})}static jQueryInterface(t){return this.each(function(){const e=S.get(this,ln)||new Sn(this,typeof t==="object"?t:{});if(typeof t!=="string"){return}if(e[t]===undefined||t.startsWith("_")||t==="constructor"){throw new TypeError(`No method named "${t}"`)}e[t](this)})}}G.on(document,wn,Mn,function(e){const t=c(this);if(["A","AREA"].includes(this.tagName)){e.preventDefault()}if(m(this)){return}G.one(t,bn,()=>{if(g(this)){this.focus()}});const r=ye.findOne(gn);if(r&&r!==t){Sn.getInstance(r).hide()}const n=S.get(t,ln)||new Sn(t);n.toggle(this)});G.on(window,fn,()=>{ye.find(gn).forEach(e=>(S.get(e,ln)||new Sn(e)).show())});T(sn,Sn);const Cn=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]);const Ln=/^aria-[\w-]*$/i;const En=/^(?:(?:https?|mailto|ftp|tel|file):|[^#&/:?]*(?:[#/?]|$))/i;const Dn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;const On=(e,t)=>{const r=e.nodeName.toLowerCase();if(t.includes(r)){if(Cn.has(r)){return Boolean(En.test(e.nodeValue)||Dn.test(e.nodeValue))}return true}const n=t.filter(e=>e instanceof RegExp);for(let e=0,t=n.length;e<t;e++){if(n[e].test(r)){return true}}return false};const Pn={"*":["class","dir","id","lang","role",Ln],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function In(e,r,t){if(!e.length){return e}if(t&&typeof t==="function"){return t(e)}const n=new window.DOMParser;const a=n.parseFromString(e,"text/html");const i=Object.keys(r);const o=[].concat(...a.body.querySelectorAll("*"));for(let e=0,t=o.length;e<t;e++){const s=o[e];const l=s.nodeName.toLowerCase();if(!i.includes(l)){s.parentNode.removeChild(s);continue}const c=[].concat(...s.attributes);const u=[].concat(r["*"]||[],r[l]||[]);c.forEach(e=>{if(!On(e,u)){s.removeAttribute(e.nodeName)}})}return a.body.innerHTML}const Rn="tooltip";const zn="bs.tooltip";const Nn=`.${zn}`;const Fn="bs-tooltip";const jn=new RegExp(`(^|\\s)${Fn}\\S+`,"g");const Bn=new Set(["sanitize","allowList","sanitizeFn"]);const Hn={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"};const Un={AUTO:"auto",TOP:"top",RIGHT:A()?"left":"right",BOTTOM:"bottom",LEFT:A()?"right":"left"};const Vn={animation:true,template:'<div class="tooltip" role="tooltip">'+'<div class="tooltip-arrow"></div>'+'<div class="tooltip-inner"></div>'+"</div>",trigger:"hover focus",title:"",delay:0,html:false,selector:false,placement:"top",offset:[0,0],container:false,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:true,sanitizeFn:null,allowList:Pn,popperConfig:null};const qn={HIDE:`hide${Nn}`,HIDDEN:`hidden${Nn}`,SHOW:`show${Nn}`,SHOWN:`shown${Nn}`,INSERTED:`inserted${Nn}`,CLICK:`click${Nn}`,FOCUSIN:`focusin${Nn}`,FOCUSOUT:`focusout${Nn}`,MOUSEENTER:`mouseenter${Nn}`,MOUSELEAVE:`mouseleave${Nn}`};const Yn="fade";const Gn="modal";const Wn="show";const Xn="show";const Zn="out";const Jn=".tooltip-inner";const $n="hover";const Qn="focus";const Kn="click";const ea="manual";class ta extends X{constructor(e,t){if(typeof f==="undefined"){throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)")}super(e);this._isEnabled=true;this._timeout=0;this._hoverState="";this._activeTrigger={};this._popper=null;this.config=this._getConfig(t);this.tip=null;this._setListeners()}static get Default(){return Vn}static get NAME(){return Rn}static get DATA_KEY(){return zn}static get Event(){return qn}static get EVENT_KEY(){return Nn}static get DefaultType(){return Hn}enable(){this._isEnabled=true}disable(){this._isEnabled=false}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(e){if(!this._isEnabled){return}if(e){const t=this._initializeOnDelegatedTarget(e);t._activeTrigger.click=!t._activeTrigger.click;if(t._isWithActiveTrigger()){t._enter(null,t)}else{t._leave(null,t)}}else{if(this.getTipElement().classList.contains(Wn)){this._leave(null,this);return}this._enter(null,this)}}dispose(){clearTimeout(this._timeout);G.off(this._element.closest(`.${Gn}`),"hide.bs.modal",this._hideModalHandler);if(this.tip&&this.tip.parentNode){this.tip.parentNode.removeChild(this.tip)}this._isEnabled=null;this._timeout=null;this._hoverState=null;this._activeTrigger=null;if(this._popper){this._popper.destroy()}this._popper=null;this.config=null;this.tip=null;super.dispose()}show(){if(this._element.style.display==="none"){throw new Error("Please use show on visible elements")}if(!(this.isWithContent()&&this._isEnabled)){return}const e=G.trigger(this._element,this.constructor.Event.SHOW);const t=_(this._element);const r=t===null?this._element.ownerDocument.documentElement.contains(this._element):t.contains(this._element);if(e.defaultPrevented||!r){return}const n=this.getTipElement();const a=d(this.constructor.NAME);n.setAttribute("id",a);this._element.setAttribute("aria-describedby",a);this.setContent();if(this.config.animation){n.classList.add(Yn)}const i=typeof this.config.placement==="function"?this.config.placement.call(this,n,this._element):this.config.placement;const o=this._getAttachment(i);this._addAttachmentClass(o);const s=this._getContainer();S.set(n,this.constructor.DATA_KEY,this);if(!this._element.ownerDocument.documentElement.contains(this.tip)){s.appendChild(n);G.trigger(this._element,this.constructor.Event.INSERTED)}if(this._popper){this._popper.update()}else{this._popper=f.createPopper(this._element,n,this._getPopperConfig(o))}n.classList.add(Wn);const l=typeof this.config.customClass==="function"?this.config.customClass():this.config.customClass;if(l){n.classList.add(...l.split(" "))}if("ontouchstart"in document.documentElement){[].concat(...document.body.children).forEach(e=>{G.on(e,"mouseover",y)})}const c=()=>{const e=this._hoverState;this._hoverState=null;G.trigger(this._element,this.constructor.Event.SHOWN);if(e===Zn){this._leave(null,this)}};if(this.tip.classList.contains(Yn)){const u=p(this.tip);G.one(this.tip,"transitionend",c);v(this.tip,u)}else{c()}}hide(){if(!this._popper){return}const e=this.getTipElement();const t=()=>{if(this._isWithActiveTrigger()){return}if(this._hoverState!==Xn&&e.parentNode){e.parentNode.removeChild(e)}this._cleanTipClass();this._element.removeAttribute("aria-describedby");G.trigger(this._element,this.constructor.Event.HIDDEN);if(this._popper){this._popper.destroy();this._popper=null}};const r=G.trigger(this._element,this.constructor.Event.HIDE);if(r.defaultPrevented){return}e.classList.remove(Wn);if("ontouchstart"in document.documentElement){[].concat(...document.body.children).forEach(e=>G.off(e,"mouseover",y))}this._activeTrigger[Kn]=false;this._activeTrigger[Qn]=false;this._activeTrigger[$n]=false;if(this.tip.classList.contains(Yn)){const n=p(e);G.one(e,"transitionend",t);v(e,n)}else{t()}this._hoverState=""}update(){if(this._popper!==null){this._popper.update()}}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip){return this.tip}const e=document.createElement("div");e.innerHTML=this.config.template;this.tip=e.children[0];return this.tip}setContent(){const e=this.getTipElement();this.setElementContent(ye.findOne(Jn,e),this.getTitle());e.classList.remove(Yn,Wn)}setElementContent(e,t){if(e===null){return}if(typeof t==="object"&&h(t)){if(t.jquery){t=t[0]}if(this.config.html){if(t.parentNode!==e){e.innerHTML="";e.appendChild(t)}}else{e.textContent=t.textContent}return}if(this.config.html){if(this.config.sanitize){t=In(t,this.config.allowList,this.config.sanitizeFn)}e.innerHTML=t}else{e.textContent=t}}getTitle(){let e=this._element.getAttribute("data-bs-original-title");if(!e){e=typeof this.config.title==="function"?this.config.title.call(this._element):this.config.title}return e}updateAttachment(e){if(e==="right"){return"end"}if(e==="left"){return"start"}return e}_initializeOnDelegatedTarget(e,t){const r=this.constructor.DATA_KEY;t=t||S.get(e.delegateTarget,r);if(!t){t=new this.constructor(e.delegateTarget,this._getDelegateConfig());S.set(e.delegateTarget,r,t)}return t}_getOffset(){const{offset:t}=this.config;if(typeof t==="string"){return t.split(",").map(e=>Number.parseInt(e,10))}if(typeof t==="function"){return e=>t(e,this._element)}return t}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this.config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this.config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:true,phase:"afterWrite",fn:e=>this._handlePopperPlacementChange(e)}],onFirstUpdate:e=>{if(e.options.placement!==e.placement){this._handlePopperPlacementChange(e)}}};return{...t,...typeof this.config.popperConfig==="function"?this.config.popperConfig(t):this.config.popperConfig}}_addAttachmentClass(e){this.getTipElement().classList.add(`${Fn}-${this.updateAttachment(e)}`)}_getContainer(){if(this.config.container===false){return document.body}if(h(this.config.container)){return this.config.container}return ye.findOne(this.config.container)}_getAttachment(e){return Un[e.toUpperCase()]}_setListeners(){const e=this.config.trigger.split(" ");e.forEach(e=>{if(e==="click"){G.on(this._element,this.constructor.Event.CLICK,this.config.selector,e=>this.toggle(e))}else if(e!==ea){const t=e===$n?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN;const r=e===$n?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;G.on(this._element,t,this.config.selector,e=>this._enter(e));G.on(this._element,r,this.config.selector,e=>this._leave(e))}});this._hideModalHandler=()=>{if(this._element){this.hide()}};G.on(this._element.closest(`.${Gn}`),"hide.bs.modal",this._hideModalHandler);if(this.config.selector){this.config={...this.config,trigger:"manual",selector:""}}else{this._fixTitle()}}_fixTitle(){const e=this._element.getAttribute("title");const t=typeof this._element.getAttribute("data-bs-original-title");if(e||t!=="string"){this._element.setAttribute("data-bs-original-title",e||"");if(e&&!this._element.getAttribute("aria-label")&&!this._element.textContent){this._element.setAttribute("aria-label",e)}this._element.setAttribute("title","")}}_enter(e,t){t=this._initializeOnDelegatedTarget(e,t);if(e){t._activeTrigger[e.type==="focusin"?Qn:$n]=true}if(t.getTipElement().classList.contains(Wn)||t._hoverState===Xn){t._hoverState=Xn;return}clearTimeout(t._timeout);t._hoverState=Xn;if(!t.config.delay||!t.config.delay.show){t.show();return}t._timeout=setTimeout(()=>{if(t._hoverState===Xn){t.show()}},t.config.delay.show)}_leave(e,t){t=this._initializeOnDelegatedTarget(e,t);if(e){t._activeTrigger[e.type==="focusout"?Qn:$n]=t._element.contains(e.relatedTarget)}if(t._isWithActiveTrigger()){return}clearTimeout(t._timeout);t._hoverState=Zn;if(!t.config.delay||!t.config.delay.hide){t.hide();return}t._timeout=setTimeout(()=>{if(t._hoverState===Zn){t.hide()}},t.config.delay.hide)}_isWithActiveTrigger(){for(const e in this._activeTrigger){if(this._activeTrigger[e]){return true}}return false}_getConfig(e){const t=me.getDataAttributes(this._element);Object.keys(t).forEach(e=>{if(Bn.has(e)){delete t[e]}});if(e&&typeof e.container==="object"&&e.container.jquery){e.container=e.container[0]}e={...this.constructor.Default,...t,...typeof e==="object"&&e?e:{}};if(typeof e.delay==="number"){e.delay={show:e.delay,hide:e.delay}}if(typeof e.title==="number"){e.title=e.title.toString()}if(typeof e.content==="number"){e.content=e.content.toString()}a(Rn,e,this.constructor.DefaultType);if(e.sanitize){e.template=In(e.template,e.allowList,e.sanitizeFn)}return e}_getDelegateConfig(){const e={};if(this.config){for(const t in this.config){if(this.constructor.Default[t]!==this.config[t]){e[t]=this.config[t]}}}return e}_cleanTipClass(){const t=this.getTipElement();const e=t.getAttribute("class").match(jn);if(e!==null&&e.length>0){e.map(e=>e.trim()).forEach(e=>t.classList.remove(e))}}_handlePopperPlacementChange(e){const{state:t}=e;if(!t){return}this.tip=t.elements.popper;this._cleanTipClass();this._addAttachmentClass(this._getAttachment(t.placement))}static jQueryInterface(r){return this.each(function(){let e=S.get(this,zn);const t=typeof r==="object"&&r;if(!e&&/dispose|hide/.test(r)){return}if(!e){e=new ta(this,t)}if(typeof r==="string"){if(typeof e[r]==="undefined"){throw new TypeError(`No method named "${r}"`)}e[r]()}})}}T(Rn,ta);const ra="popover";const na="bs.popover";const aa=`.${na}`;const ia="bs-popover";const oa=new RegExp(`(^|\\s)${ia}\\S+`,"g");const sa={...ta.Default,placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip">'+'<div class="popover-arrow"></div>'+'<h3 class="popover-header"></h3>'+'<div class="popover-body"></div>'+"</div>"};const la={...ta.DefaultType,content:"(string|element|function)"};const ca={HIDE:`hide${aa}`,HIDDEN:`hidden${aa}`,SHOW:`show${aa}`,SHOWN:`shown${aa}`,INSERTED:`inserted${aa}`,CLICK:`click${aa}`,FOCUSIN:`focusin${aa}`,FOCUSOUT:`focusout${aa}`,MOUSEENTER:`mouseenter${aa}`,MOUSELEAVE:`mouseleave${aa}`};const ua="fade";const fa="show";const da=".popover-header";const ha=".popover-body";class pa extends ta{static get Default(){return sa}static get NAME(){return ra}static get DATA_KEY(){return na}static get Event(){return ca}static get EVENT_KEY(){return aa}static get DefaultType(){return la}isWithContent(){return this.getTitle()||this._getContent()}setContent(){const e=this.getTipElement();this.setElementContent(ye.findOne(da,e),this.getTitle());let t=this._getContent();if(typeof t==="function"){t=t.call(this._element)}this.setElementContent(ye.findOne(ha,e),t);e.classList.remove(ua,fa)}_addAttachmentClass(e){this.getTipElement().classList.add(`${ia}-${this.updateAttachment(e)}`)}_getContent(){return this._element.getAttribute("data-bs-content")||this.config.content}_cleanTipClass(){const t=this.getTipElement();const e=t.getAttribute("class").match(oa);if(e!==null&&e.length>0){e.map(e=>e.trim()).forEach(e=>t.classList.remove(e))}}static jQueryInterface(r){return this.each(function(){let e=S.get(this,na);const t=typeof r==="object"?r:null;if(!e&&/dispose|hide/.test(r)){return}if(!e){e=new pa(this,t);S.set(this,na,e)}if(typeof r==="string"){if(typeof e[r]==="undefined"){throw new TypeError(`No method named "${r}"`)}e[r]()}})}}T(ra,pa);const va="scrollspy";const ga="bs.scrollspy";const ma=`.${ga}`;const _a=".data-api";const ya={offset:10,method:"auto",target:""};const ba={offset:"number",method:"string",target:"(string|element)"};const xa=`activate${ma}`;const wa=`scroll${ma}`;const Aa=`load${ma}${_a}`;const Ta="dropdown-item";const ka="active";const Ma='[data-bs-spy="scroll"]';const Sa=".nav, .list-group";const Ca=".nav-link";const La=".nav-item";const Ea=".list-group-item";const Da=".dropdown";const Oa=".dropdown-toggle";const Pa="offset";const Ia="position";class Ra extends X{constructor(e,t){super(e);this._scrollElement=this._element.tagName==="BODY"?window:this._element;this._config=this._getConfig(t);this._selector=`${this._config.target} ${Ca}, ${this._config.target} ${Ea}, ${this._config.target} .${Ta}`;this._offsets=[];this._targets=[];this._activeTarget=null;this._scrollHeight=0;G.on(this._scrollElement,wa,()=>this._process());this.refresh();this._process()}static get Default(){return ya}static get DATA_KEY(){return ga}refresh(){const e=this._scrollElement===this._scrollElement.window?Pa:Ia;const a=this._config.method==="auto"?e:this._config.method;const i=a===Ia?this._getScrollTop():0;this._offsets=[];this._targets=[];this._scrollHeight=this._getScrollHeight();const t=ye.find(this._selector);t.map(e=>{const t=l(e);const r=t?ye.findOne(t):null;if(r){const n=r.getBoundingClientRect();if(n.width||n.height){return[me[a](r).top+i,t]}}return null}).filter(e=>e).sort((e,t)=>e[0]-t[0]).forEach(e=>{this._offsets.push(e[0]);this._targets.push(e[1])})}dispose(){super.dispose();G.off(this._scrollElement,ma);this._scrollElement=null;this._config=null;this._selector=null;this._offsets=null;this._targets=null;this._activeTarget=null;this._scrollHeight=null}_getConfig(t){t={...ya,...me.getDataAttributes(this._element),...typeof t==="object"&&t?t:{}};if(typeof t.target!=="string"&&h(t.target)){let{id:e}=t.target;if(!e){e=d(va);t.target.id=e}t.target=`#${e}`}a(va,t,ba);return t}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const t=this._getScrollTop()+this._config.offset;const e=this._getScrollHeight();const r=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e){this.refresh()}if(t>=r){const n=this._targets[this._targets.length-1];if(this._activeTarget!==n){this._activate(n)}return}if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0){this._activeTarget=null;this._clear();return}for(let e=this._offsets.length;e--;){const a=this._activeTarget!==this._targets[e]&&t>=this._offsets[e]&&(typeof this._offsets[e+1]==="undefined"||t<this._offsets[e+1]);if(a){this._activate(this._targets[e])}}}_activate(t){this._activeTarget=t;this._clear();const e=this._selector.split(",").map(e=>`${e}[data-bs-target="${t}"],${e}[href="${t}"]`);const r=ye.findOne(e.join(","));if(r.classList.contains(Ta)){ye.findOne(Oa,r.closest(Da)).classList.add(ka);r.classList.add(ka)}else{r.classList.add(ka);ye.parents(r,Sa).forEach(e=>{ye.prev(e,`${Ca}, ${Ea}`).forEach(e=>e.classList.add(ka));ye.prev(e,La).forEach(e=>{ye.children(e,Ca).forEach(e=>e.classList.add(ka))})})}G.trigger(this._scrollElement,xa,{relatedTarget:t})}_clear(){ye.find(this._selector).filter(e=>e.classList.contains(ka)).forEach(e=>e.classList.remove(ka))}static jQueryInterface(t){return this.each(function(){const e=Ra.getInstance(this)||new Ra(this,typeof t==="object"?t:{});if(typeof t!=="string"){return}if(typeof e[t]==="undefined"){throw new TypeError(`No method named "${t}"`)}e[t]()})}}G.on(window,Aa,()=>{ye.find(Ma).forEach(e=>new Ra(e))});T(va,Ra);const za="tab";const Na="bs.tab";const Fa=`.${Na}`;const ja=".data-api";const Ba=`hide${Fa}`;const Ha=`hidden${Fa}`;const Ua=`show${Fa}`;const Va=`shown${Fa}`;const qa=`click${Fa}${ja}`;const Ya="dropdown-menu";const Ga="active";const Wa="fade";const Xa="show";const Za=".dropdown";const Ja=".nav, .list-group";const $a=".active";const Qa=":scope > li > .active";const Ka='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]';const ei=".dropdown-toggle";const ti=":scope > .dropdown-menu .active";class ri extends X{static get DATA_KEY(){return Na}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(Ga)){return}let e;const t=c(this._element);const r=this._element.closest(Ja);if(r){const o=r.nodeName==="UL"||r.nodeName==="OL"?Qa:$a;e=ye.find(o,r);e=e[e.length-1]}const n=e?G.trigger(e,Ba,{relatedTarget:this._element}):null;const a=G.trigger(this._element,Ua,{relatedTarget:e});if(a.defaultPrevented||n!==null&&n.defaultPrevented){return}this._activate(this._element,r);const i=()=>{G.trigger(e,Ha,{relatedTarget:this._element});G.trigger(this._element,Va,{relatedTarget:e})};if(t){this._activate(t,t.parentNode,i)}else{i()}}_activate(e,t,r){const n=t&&(t.nodeName==="UL"||t.nodeName==="OL")?ye.find(Qa,t):ye.children(t,$a);const a=n[0];const i=r&&a&&a.classList.contains(Wa);const o=()=>this._transitionComplete(e,a,r);if(a&&i){const s=p(a);a.classList.remove(Xa);G.one(a,"transitionend",o);v(a,s)}else{o()}}_transitionComplete(e,t,r){if(t){t.classList.remove(Ga);const a=ye.findOne(ti,t.parentNode);if(a){a.classList.remove(Ga)}if(t.getAttribute("role")==="tab"){t.setAttribute("aria-selected",false)}}e.classList.add(Ga);if(e.getAttribute("role")==="tab"){e.setAttribute("aria-selected",true)}b(e);if(e.classList.contains(Wa)){e.classList.add(Xa)}let n=e.parentNode;if(n&&n.nodeName==="LI"){n=n.parentNode}if(n&&n.classList.contains(Ya)){const i=e.closest(Za);if(i){ye.find(ei,i).forEach(e=>e.classList.add(Ga))}e.setAttribute("aria-expanded",true)}if(r){r()}}static jQueryInterface(t){return this.each(function(){const e=S.get(this,Na)||new ri(this);if(typeof t==="string"){if(typeof e[t]==="undefined"){throw new TypeError(`No method named "${t}"`)}e[t]()}})}}G.on(document,qa,Ka,function(e){if(["A","AREA"].includes(this.tagName)){e.preventDefault()}if(m(this)){return}const t=S.get(this,Na)||new ri(this);t.show()});T(za,ri);const ni="toast";const ai="bs.toast";const ii=`.${ai}`;const oi=`click.dismiss${ii}`;const si=`hide${ii}`;const li=`hidden${ii}`;const ci=`show${ii}`;const ui=`shown${ii}`;const fi="fade";const di="hide";const hi="show";const pi="showing";const vi={animation:"boolean",autohide:"boolean",delay:"number"};const gi={animation:true,autohide:true,delay:5e3};const mi='[data-bs-dismiss="toast"]';class _i extends X{constructor(e,t){super(e);this._config=this._getConfig(t);this._timeout=null;this._setListeners()}static get DefaultType(){return vi}static get Default(){return gi}static get DATA_KEY(){return ai}show(){const e=G.trigger(this._element,ci);if(e.defaultPrevented){return}this._clearTimeout();if(this._config.animation){this._element.classList.add(fi)}const t=()=>{this._element.classList.remove(pi);this._element.classList.add(hi);G.trigger(this._element,ui);if(this._config.autohide){this._timeout=setTimeout(()=>{this.hide()},this._config.delay)}};this._element.classList.remove(di);b(this._element);this._element.classList.add(pi);if(this._config.animation){const r=p(this._element);G.one(this._element,"transitionend",t);v(this._element,r)}else{t()}}hide(){if(!this._element.classList.contains(hi)){return}const e=G.trigger(this._element,si);if(e.defaultPrevented){return}const t=()=>{this._element.classList.add(di);G.trigger(this._element,li)};this._element.classList.remove(hi);if(this._config.animation){const r=p(this._element);G.one(this._element,"transitionend",t);v(this._element,r)}else{t()}}dispose(){this._clearTimeout();if(this._element.classList.contains(hi)){this._element.classList.remove(hi)}super.dispose();this._config=null}_getConfig(e){e={...gi,...me.getDataAttributes(this._element),...typeof e==="object"&&e?e:{}};a(ni,e,this.constructor.DefaultType);return e}_setListeners(){G.on(this._element,oi,mi,()=>this.hide())}_clearTimeout(){clearTimeout(this._timeout);this._timeout=null}static jQueryInterface(r){return this.each(function(){let e=S.get(this,ai);const t=typeof r==="object"&&r;if(!e){e=new _i(this,t)}if(typeof r==="string"){if(typeof e[r]==="undefined"){throw new TypeError(`No method named "${r}"`)}e[r](this)}})}}T(ni,_i);var yi={Alert:oe,Button:pe,Carousel:dt,Collapse:Ot,Dropdown:vr,Modal:on,Offcanvas:Sn,Popover:pa,ScrollSpy:Ra,Tab:ri,Toast:_i,Tooltip:ta};return yi});(function(e,t){if(typeof define==="function"&&define.amd){define([],t)}else{e.htmx=t()}})(typeof self!=="undefined"?self:this,function(){return function(){"use strict";var htmx={onLoad:onLoadHelper,process:processNode,on:addEventListenerImpl,off:removeEventListenerImpl,trigger:triggerEvent,ajax:ajaxHelper,find:find,findAll:findAll,closest:closest,values:function(e,t){var r=getInputValues(e,t||"post");return r.values},remove:removeElement,addClass:addClassToElement,removeClass:removeClassFromElement,toggleClass:toggleClassOnElement,takeClass:takeClassForElement,defineExtension:defineExtension,removeExtension:removeExtension,logAll:logAll,logger:null,useTemplateFragments:false,config:{historyEnabled:true,historyCacheSize:10,refreshOnHistoryMiss:false,defaultSwapStyle:"innerHTML",defaultSwapDelay:0,defaultSettleDelay:20,includeIndicatorStyles:true,indicatorClass:"htmx-indicator",requestClass:"htmx-request",settlingClass:"htmx-settling",swappingClass:"htmx-swapping",allowEval:true,attributesToSettle:["class","style","width","height"],withCredentials:false,wsReconnectDelay:"full-jitter",disableSelector:"[hx-disable], [data-hx-disable]"},parseInterval:parseInterval,_:internalEval,createEventSource:function(e){return new EventSource(e,{withCredentials:true})},createWebSocket:function(e){return new WebSocket(e,[])}};var VERBS=["get","post","put","delete","patch"];var VERB_SELECTOR=VERBS.map(function(e){return"[hx-"+e+"], [data-hx-"+e+"]"}).join(", ");function parseInterval(e){if(e==undefined){return undefined}if(e.slice(-2)=="ms"){return parseFloat(e.slice(0,-2))||undefined}if(e.slice(-1)=="s"){return parseFloat(e.slice(0,-1))*1e3||undefined}return parseFloat(e)||undefined}function getRawAttribute(e,t){return e.getAttribute&&e.getAttribute(t)}function hasAttribute(e,t){return e.hasAttribute&&(e.hasAttribute(t)||e.hasAttribute("data-"+t))}function getAttributeValue(e,t){return getRawAttribute(e,t)||getRawAttribute(e,"data-"+t)}function parentElt(e){return e.parentElement}function getDocument(){return document}function getClosestMatch(e,t){if(t(e)){return e}else if(parentElt(e)){return getClosestMatch(parentElt(e),t)}else{return null}}function getClosestAttributeValue(e,t){var r=null;getClosestMatch(e,function(e){return r=getAttributeValue(e,t)});return r}function matches(e,t){var r=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector;return r&&r.call(e,t)}function getStartTag(e){var t=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i;var r=t.exec(e);if(r){return r[1].toLowerCase()}else{return""}}function parseHTML(e,t){var r=new DOMParser;var n=r.parseFromString(e,"text/html");var a=n.body;while(t>0){t--;a=a.firstChild}if(a==null){a=getDocument().createDocumentFragment()}return a}function makeFragment(e){if(htmx.config.useTemplateFragments){var t=parseHTML("<body><template>"+e+"</template></body>",0);return t.querySelector("template").content}else{var r=getStartTag(e);switch(r){case"thead":case"tbody":case"tfoot":case"colgroup":case"caption":return parseHTML("<table>"+e+"</table>",1);case"col":return parseHTML("<table><colgroup>"+e+"</colgroup></table>",2);case"tr":return parseHTML("<table><tbody>"+e+"</tbody></table>",2);case"td":case"th":return parseHTML("<table><tbody><tr>"+e+"</tr></tbody></table>",3);case"script":return parseHTML("<div>"+e+"</div>",1);default:return parseHTML(e,0)}}}function maybeCall(e){if(e){e()}}function isType(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function isFunction(e){return isType(e,"Function")}function isRawObject(e){return isType(e,"Object")}function getInternalData(e){var t="htmx-internal-data";var r=e[t];if(!r){r=e[t]={}}return r}function toArray(e){var t=[];if(e){for(var r=0;r<e.length;r++){t.push(e[r])}}return t}function forEach(e,t){if(e){for(var r=0;r<e.length;r++){t(e[r])}}}function isScrolledIntoView(e){var t=e.getBoundingClientRect();var r=t.top;var n=t.bottom;return r<window.innerHeight&&n>=0}function bodyContains(e){return getDocument().body.contains(e)}function splitOnWhitespace(e){return e.trim().split(/\s+/)}function mergeObjects(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}return e}function parseJSON(e){try{return JSON.parse(e)}catch(e){logError(e);return null}}function internalEval(str){return maybeEval(getDocument().body,function(){return eval(str)})}function onLoadHelper(t){var e=htmx.on("htmx:load",function(e){t(e.detail.elt)});return e}function logAll(){htmx.logger=function(e,t,r){if(console){console.log(t,e,r)}}}function find(e,t){if(t){return e.querySelector(t)}else{return find(getDocument(),e)}}function findAll(e,t){if(t){return e.querySelectorAll(t)}else{return findAll(getDocument(),e)}}function removeElement(e,t){e=resolveTarget(e);if(t){setTimeout(function(){removeElement(e)},t)}else{e.parentElement.removeChild(e)}}function addClassToElement(e,t,r){e=resolveTarget(e);if(r){setTimeout(function(){addClassToElement(e,t)},r)}else{e.classList.add(t)}}function removeClassFromElement(e,t,r){e=resolveTarget(e);if(r){setTimeout(function(){removeClassFromElement(e,t)},r)}else{e.classList.remove(t)}}function toggleClassOnElement(e,t){e=resolveTarget(e);e.classList.toggle(t)}function takeClassForElement(e,t){e=resolveTarget(e);forEach(e.parentElement.children,function(e){removeClassFromElement(e,t)});addClassToElement(e,t)}function closest(e,t){e=resolveTarget(e);if(e.closest){return e.closest(t)}else{do{if(e==null||matches(e,t)){return e}}while(e=e&&parentElt(e))}}function querySelectorAllExt(e,t){if(t.indexOf("closest ")===0){return[closest(e,t.substr(8))]}else if(t.indexOf("find ")===0){return[find(e,t.substr(5))]}else{return getDocument().querySelectorAll(t)}}function querySelectorExt(e,t){return querySelectorAllExt(e,t)[0]}function resolveTarget(e){if(isType(e,"String")){return find(e)}else{return e}}function processEventArgs(e,t,r){if(isFunction(t)){return{target:getDocument().body,event:e,listener:t}}else{return{target:resolveTarget(e),event:t,listener:r}}}function addEventListenerImpl(t,r,n){ready(function(){var e=processEventArgs(t,r,n);e.target.addEventListener(e.event,e.listener)});var e=isFunction(r);return e?r:n}function removeEventListenerImpl(t,r,n){ready(function(){var e=processEventArgs(t,r,n);e.target.removeEventListener(e.event,e.listener)});return isFunction(r)?r:n}function getTarget(e){var t=getClosestMatch(e,function(e){return getAttributeValue(e,"hx-target")!==null});if(t){var r=getAttributeValue(t,"hx-target");if(r==="this"){return t}else{return querySelectorExt(e,r)}}else{var n=getInternalData(e);if(n.boosted){return getDocument().body}else{return e}}}function shouldSettleAttribute(e){var t=htmx.config.attributesToSettle;for(var r=0;r<t.length;r++){if(e===t[r]){return true}}return false}function cloneAttributes(t,r){forEach(t.attributes,function(e){if(!r.hasAttribute(e.name)&&shouldSettleAttribute(e.name)){t.removeAttribute(e.name)}});forEach(r.attributes,function(e){if(shouldSettleAttribute(e.name)){t.setAttribute(e.name,e.value)}})}function isInlineSwap(e,t){var r=getExtensions(t);for(var n=0;n<r.length;n++){var a=r[n];try{if(a.isInlineSwap(e)){return true}}catch(e){logError(e)}}return e==="outerHTML"}function oobSwap(e,t,r){var n="#"+t.id;var a="outerHTML";if(e==="true"){}else if(e.indexOf(":")>0){a=e.substr(0,e.indexOf(":"));n=e.substr(e.indexOf(":")+1,e.length)}else{a=e}var i=getDocument().querySelector(n);if(i){var o;o=getDocument().createDocumentFragment();o.appendChild(t);if(!isInlineSwap(a,i)){o=t}swap(a,i,i,o,r)}else{t.parentNode.removeChild(t);triggerErrorEvent(getDocument().body,"htmx:oobErrorNoTarget",{content:t})}return e}function handleOutOfBandSwaps(e,r){forEach(findAll(e,"[hx-swap-oob], [data-hx-swap-oob]"),function(e){var t=getAttributeValue(e,"hx-swap-oob");if(t!=null){oobSwap(t,e,r)}})}function handlePreservedElements(e){forEach(findAll(e,"[hx-preserve], [data-hx-preserve]"),function(e){var t=getAttributeValue(e,"id");var r=getDocument().getElementById(t);if(r!=null){e.parentNode.replaceChild(r,e)}})}function handleAttributes(n,e,a){forEach(e.querySelectorAll("[id]"),function(e){if(e.id&&e.id.length>0){var t=n.querySelector(e.tagName+"[id='"+e.id+"']");if(t&&t!==n){var r=e.cloneNode();cloneAttributes(e,t);a.tasks.push(function(){cloneAttributes(e,r)})}}})}function makeAjaxLoadTask(e){return function(){processNode(e);processScripts(e);processFocus(e);triggerEvent(e,"htmx:load")}}function processFocus(e){var t="[autofocus]";var r=matches(e,t)?e:e.querySelector(t);if(r!=null){r.focus()}}function insertNodesBefore(e,t,r,n){handleAttributes(e,r,n);while(r.childNodes.length>0){var a=r.firstChild;e.insertBefore(a,t);if(a.nodeType!==Node.TEXT_NODE&&a.nodeType!==Node.COMMENT_NODE){n.tasks.push(makeAjaxLoadTask(a))}}}function cleanUpElement(t){var e=getInternalData(t);if(e.webSocket){e.webSocket.close()}if(e.sseEventSource){e.sseEventSource.close()}if(e.listenerInfos){forEach(e.listenerInfos,function(e){if(t!==e.on){e.on.removeEventListener(e.trigger,e.listener)}})}if(t.children){forEach(t.children,function(e){cleanUpElement(e)})}}function swapOuterHTML(e,t,r){if(e.tagName==="BODY"){return swapInnerHTML(e,t,r)}else{var n=e.previousSibling;insertNodesBefore(parentElt(e),e,t,r);if(n==null){var a=parentElt(e).firstChild}else{var a=n.nextSibling}getInternalData(e).replacedWith=a;r.elts=[];while(a&&a!==e){if(a.nodeType===Node.ELEMENT_NODE){r.elts.push(a)}a=a.nextElementSibling}cleanUpElement(e);parentElt(e).removeChild(e)}}function swapAfterBegin(e,t,r){return insertNodesBefore(e,e.firstChild,t,r)}function swapBeforeBegin(e,t,r){return insertNodesBefore(parentElt(e),e,t,r)}function swapBeforeEnd(e,t,r){return insertNodesBefore(e,null,t,r)}function swapAfterEnd(e,t,r){return insertNodesBefore(parentElt(e),e.nextSibling,t,r)}function swapInnerHTML(e,t,r){var n=e.firstChild;insertNodesBefore(e,n,t,r);if(n){while(n.nextSibling){cleanUpElement(n.nextSibling);e.removeChild(n.nextSibling)}cleanUpElement(n);e.removeChild(n)}}function maybeSelectFromResponse(e,t){var r=getClosestAttributeValue(e,"hx-select");if(r){var n=getDocument().createDocumentFragment();forEach(t.querySelectorAll(r),function(e){n.appendChild(e)});t=n}return t}function swap(e,t,r,n,a){switch(e){case"none":return;case"outerHTML":swapOuterHTML(r,n,a);return;case"afterbegin":swapAfterBegin(r,n,a);return;case"beforebegin":swapBeforeBegin(r,n,a);return;case"beforeend":swapBeforeEnd(r,n,a);return;case"afterend":swapAfterEnd(r,n,a);return;default:var i=getExtensions(t);for(var o=0;o<i.length;o++){var s=i[o];try{var l=s.handleSwap(e,r,n,a);if(l){if(typeof l.length!=="undefined"){for(var c=0;c<l.length;c++){var u=l[c];if(u.nodeType!==Node.TEXT_NODE&&u.nodeType!==Node.COMMENT_NODE){a.tasks.push(makeAjaxLoadTask(u))}}}return}}catch(e){logError(e)}}swapInnerHTML(r,n,a)}}var TITLE_FINDER=/<title>([\s\S]+?)<\/title>/im;function findTitle(e){if(e.indexOf("<title>")>-1&&(e.indexOf("<svg>")==-1||e.indexOf("<title>")<e.indexOf("<svg>"))){var t=TITLE_FINDER.exec(e);if(t){return t[1]}}}function selectAndSwap(e,t,r,n,a){var i=findTitle(n);if(i){var o=find("title");if(o){o.innerHTML=i}else{window.document.title=i}}var s=makeFragment(n);if(s){handleOutOfBandSwaps(s,a);s=maybeSelectFromResponse(r,s);handlePreservedElements(s);return swap(e,r,t,s,a)}}function handleTrigger(e,t,r){var n=e.getResponseHeader(t);if(n.indexOf("{")===0){var a=parseJSON(n);for(var i in a){if(a.hasOwnProperty(i)){var o=a[i];if(!isRawObject(o)){o={value:o}}triggerEvent(r,i,o)}}}else{triggerEvent(r,n,[])}}var WHITESPACE=/\s/;var WHITESPACE_OR_COMMA=/[\s,]/;var SYMBOL_START=/[_$a-zA-Z]/;var SYMBOL_CONT=/[_$a-zA-Z0-9]/;var STRINGISH_START=['"',"'","/"];var NOT_WHITESPACE=/[^\s]/;function tokenizeString(e){var t=[];var r=0;while(r<e.length){if(SYMBOL_START.exec(e.charAt(r))){var n=r;while(SYMBOL_CONT.exec(e.charAt(r+1))){r++}t.push(e.substr(n,r-n+1))}else if(STRINGISH_START.indexOf(e.charAt(r))!==-1){var a=e.charAt(r);var n=r;r++;while(r<e.length&&e.charAt(r)!==a){if(e.charAt(r)==="\\"){r++}r++}t.push(e.substr(n,r-n+1))}else{var i=e.charAt(r);t.push(i)}r++}return t}function isPossibleRelativeReference(e,t,r){return SYMBOL_START.exec(e.charAt(0))&&e!=="true"&&e!=="false"&&e!=="this"&&e!==r&&t!=="."}function maybeGenerateConditional(e,t,r){if(t[0]==="["){t.shift();var n=1;var a=" return (function("+r+"){ return (";var i=null;while(t.length>0){var o=t[0];if(o==="]"){n--;if(n===0){if(i===null){a=a+"true"}t.shift();a+=")})";try{var s=maybeEval(e,function(){return Function(a)()},function(){return true});s.source=a;return s}catch(e){triggerErrorEvent(getDocument().body,"htmx:syntax:error",{error:e,source:a});return null}}}else if(o==="["){n++}if(isPossibleRelativeReference(o,i,r)){a+="(("+r+"."+o+") ? ("+r+"."+o+") : (window."+o+"))"}else{a=a+o}i=t.shift()}}}function consumeUntil(e,t){var r="";while(e.length>0&&!e[0].match(t)){r+=e.shift()}return r}var INPUT_SELECTOR="input, textarea, select";function getTriggerSpecs(e){var t=getAttributeValue(e,"hx-trigger");var r=[];if(t){var n=tokenizeString(t);do{consumeUntil(n,NOT_WHITESPACE);var a=n.length;var i=consumeUntil(n,/[,\[\s]/);if(i!==""){if(i==="every"){var o={trigger:"every"};consumeUntil(n,NOT_WHITESPACE);o.pollInterval=parseInterval(consumeUntil(n,WHITESPACE));r.push(o)}else if(i.indexOf("sse:")===0){r.push({trigger:"sse",sseEvent:i.substr(4)})}else{var s={trigger:i};var l=maybeGenerateConditional(e,n,"event");if(l){s.eventFilter=l}while(n.length>0&&n[0]!==","){consumeUntil(n,NOT_WHITESPACE);var c=n.shift();if(c==="changed"){s.changed=true}else if(c==="once"){s.once=true}else if(c==="consume"){s.consume=true}else if(c==="delay"&&n[0]===":"){n.shift();s.delay=parseInterval(consumeUntil(n,WHITESPACE_OR_COMMA))}else if(c==="from"&&n[0]===":"){n.shift();s.from=consumeUntil(n,WHITESPACE_OR_COMMA)}else if(c==="target"&&n[0]===":"){n.shift();s.target=consumeUntil(n,WHITESPACE_OR_COMMA)}else if(c==="throttle"&&n[0]===":"){n.shift();s.throttle=parseInterval(consumeUntil(n,WHITESPACE_OR_COMMA))}else if(c==="queue"&&n[0]===":"){n.shift();s.queue=consumeUntil(n,WHITESPACE_OR_COMMA)}else if((c==="root"||c==="threshold")&&n[0]===":"){n.shift();s[c]=consumeUntil(n,WHITESPACE_OR_COMMA)}else{triggerErrorEvent(e,"htmx:syntax:error",{token:n.shift()})}}r.push(s)}}if(n.length===a){triggerErrorEvent(e,"htmx:syntax:error",{token:n.shift()})}consumeUntil(n,NOT_WHITESPACE)}while(n[0]===","&&n.shift())}if(r.length>0){return r}else if(matches(e,"form")){return[{trigger:"submit"}]}else if(matches(e,INPUT_SELECTOR)){return[{trigger:"change"}]}else{return[{trigger:"click"}]}}function cancelPolling(e){getInternalData(e).cancelled=true}function processPolling(e,t,r,n){var a=getInternalData(e);a.timeout=setTimeout(function(){if(bodyContains(e)&&a.cancelled!==true){issueAjaxRequest(t,r,e);processPolling(e,t,getAttributeValue(e,"hx-"+t),n)}},n)}function isLocalLink(e){return location.hostname===e.hostname&&getRawAttribute(e,"href")&&getRawAttribute(e,"href").indexOf("#")!==0}function boostElement(t,r,e){if(t.tagName==="A"&&isLocalLink(t)||t.tagName==="FORM"){r.boosted=true;var n,a;if(t.tagName==="A"){n="get";a=getRawAttribute(t,"href");r.pushURL=true}else{var i=getRawAttribute(t,"method");n=i?i.toLowerCase():"get";if(n==="get"){r.pushURL=true}a=getRawAttribute(t,"action")}e.forEach(function(e){addEventListener(t,n,a,r,e,true)})}}function shouldCancel(e){return e.tagName==="FORM"||matches(e,'input[type="submit"], button')&&closest(e,"form")!==null||e.tagName==="A"&&e.href&&(e.getAttribute("href")==="#"||e.getAttribute("href").indexOf("#")!==0)}function ignoreBoostedAnchorCtrlClick(e,t){return getInternalData(e).boosted&&e.tagName==="A"&&t.type==="click"&&(t.ctrlKey||t.metaKey)}function maybeFilterEvent(e,t){var r=e.eventFilter;if(r){try{return r(t)!==true}catch(e){triggerErrorEvent(getDocument().body,"htmx:eventFilter:error",{error:e,source:r.source});return true}}return false}function addEventListener(n,a,i,e,o,s){var l=n;if(o.from){l=find(o.from)}var c=function(e){if(!bodyContains(n)){l.removeEventListener(o.trigger,c);return}if(ignoreBoostedAnchorCtrlClick(n,e)){return}if(s||shouldCancel(n)){e.preventDefault()}if(maybeFilterEvent(o,e)){return}var t=getInternalData(e);t.triggerSpec=o;if(t.handledFor==null){t.handledFor=[]}var r=getInternalData(n);if(t.handledFor.indexOf(n)<0){t.handledFor.push(n);if(o.consume){e.stopPropagation()}if(o.target&&e.target){if(!matches(e.target,o.target)){return}}if(o.once){if(r.triggeredOnce){return}else{r.triggeredOnce=true}}if(o.changed){if(r.lastValue===n.value){return}else{r.lastValue=n.value}}if(r.delayed){clearTimeout(r.delayed)}if(r.throttle){return}if(o.throttle){if(!r.throttle){issueAjaxRequest(a,i,n,e);r.throttle=setTimeout(function(){r.throttle=null},o.throttle)}}else if(o.delay){r.delayed=setTimeout(function(){issueAjaxRequest(a,i,n,e)},o.delay)}else{issueAjaxRequest(a,i,n,e)}}};if(e.listenerInfos==null){e.listenerInfos=[]}e.listenerInfos.push({trigger:o.trigger,listener:c,on:l});l.addEventListener(o.trigger,c)}var windowIsScrolling=false;var scrollHandler=null;function initScrollHandler(){if(!scrollHandler){scrollHandler=function(){windowIsScrolling=true};window.addEventListener("scroll",scrollHandler);setInterval(function(){if(windowIsScrolling){windowIsScrolling=false;forEach(getDocument().querySelectorAll("[hx-trigger='revealed'],[data-hx-trigger='revealed']"),function(e){maybeReveal(e)})}},200)}}function maybeReveal(e){var t=getInternalData(e);if(!t.revealed&&isScrolledIntoView(e)){t.revealed=true;if(t.initialized){issueAjaxRequest(t.verb,t.path,e)}else{e.addEventListener("htmx:afterProcessNode",function(){issueAjaxRequest(t.verb,t.path,e)},{once:true})}}}function processWebSocketInfo(e,t,r){var n=splitOnWhitespace(r);for(var a=0;a<n.length;a++){var i=n[a].split(/:(.+)/);if(i[0]==="connect"){ensureWebSocket(e,i[1],0)}if(i[0]==="send"){processWebSocketSend(e)}}}function ensureWebSocket(s,r,n){if(!bodyContains(s)){return}if(r.indexOf("/")==0){var e=location.hostname+(location.port?":"+location.port:"");if(location.protocol=="https:"){r="wss://"+e+r}else if(location.protocol=="http:"){r="ws://"+e+r}}var t=htmx.createWebSocket(r);t.onerror=function(e){triggerErrorEvent(s,"htmx:wsError",{error:e,socket:t});maybeCloseWebSocketSource(s)};t.onclose=function(e){if([1006,1012,1013].includes(e.code)){var t=getWebSocketReconnectDelay(n);setTimeout(function(){ensureWebSocket(s,r,n+1)},t)}};t.onopen=function(e){n=0};getInternalData(s).webSocket=t;t.addEventListener("message",function(e){if(maybeCloseWebSocketSource(s)){return}var t=e.data;withExtensions(s,function(e){t=e.transformResponse(t,null,s)});var r=makeSettleInfo(s);var n=makeFragment(t);var a=toArray(n.children);for(var i=0;i<a.length;i++){var o=a[i];oobSwap(getAttributeValue(o,"hx-swap-oob")||"true",o,r)}settleImmediately(r.tasks)})}function maybeCloseWebSocketSource(e){if(!bodyContains(e)){getInternalData(e).webSocket.close();return true}}function processWebSocketSend(c){var u=getClosestMatch(c,function(e){return getInternalData(e).webSocket!=null});if(u){c.addEventListener(getTriggerSpecs(c)[0].trigger,function(e){var t=getInternalData(u).webSocket;var r=getHeaders(c,u);var n=getInputValues(c,"post");var a=n.errors;var i=n.values;var o=getExpressionVars(c);var s=mergeObjects(i,o);var l=filterValues(s,c);l["HEADERS"]=r;if(a&&a.length>0){triggerEvent(c,"htmx:validation:halted",a);return}t.send(JSON.stringify(l));if(shouldCancel(c)){e.preventDefault()}})}else{triggerErrorEvent(c,"htmx:noWebSocketSourceError")}}function getWebSocketReconnectDelay(e){var t=htmx.config.wsReconnectDelay;if(typeof t==="function"){return t(e)}if(t==="full-jitter"){var r=Math.min(e,6);var n=1e3*Math.pow(2,r);return n*Math.random()}logError('htmx.config.wsReconnectDelay must either be a function or the string "full-jitter"')}function processSSEInfo(e,t,r){var n=splitOnWhitespace(r);for(var a=0;a<n.length;a++){var i=n[a].split(/:(.+)/);if(i[0]==="connect"){processSSESource(e,i[1])}if(i[0]==="swap"){processSSESwap(e,i[1])}}}function processSSESource(t,e){var r=htmx.createEventSource(e);r.onerror=function(e){triggerErrorEvent(t,"htmx:sseError",{error:e,source:r});maybeCloseSSESource(t)};getInternalData(t).sseEventSource=r}function processSSESwap(i,o){var s=getClosestMatch(i,hasEventSource);if(s){var l=getInternalData(s).sseEventSource;var c=function(e){if(maybeCloseSSESource(s)){l.removeEventListener(o,c);return}var t=e.data;withExtensions(i,function(e){t=e.transformResponse(t,null,i)});var r=getSwapSpecification(i);var n=getTarget(i);var a=makeSettleInfo(i);selectAndSwap(r.swapStyle,i,n,t,a);settleImmediately(a.tasks);triggerEvent(i,"htmx:sseMessage",e)};getInternalData(i).sseListener=c;l.addEventListener(o,c)}else{triggerErrorEvent(i,"htmx:noSSESourceError")}}function processSSETrigger(e,t,r,n){var a=getClosestMatch(e,hasEventSource);if(a){var i=getInternalData(a).sseEventSource;var o=function(){if(!maybeCloseSSESource(a)){if(bodyContains(e)){issueAjaxRequest(t,r,e)}else{i.removeEventListener(n,o)}}};getInternalData(e).sseListener=o;i.addEventListener(n,o)}else{triggerErrorEvent(e,"htmx:noSSESourceError")}}function maybeCloseSSESource(e){if(!bodyContains(e)){getInternalData(e).sseEventSource.close();return true}}function hasEventSource(e){return getInternalData(e).sseEventSource!=null}function loadImmediately(e,t,r,n,a){var i=function(){if(!n.loaded){n.loaded=true;issueAjaxRequest(t,r,e)}};if(a){setTimeout(i,a)}else{i()}}function processVerbs(i,o,e){var t=false;forEach(VERBS,function(n){if(hasAttribute(i,"hx-"+n)){var a=getAttributeValue(i,"hx-"+n);t=true;o.path=a;o.verb=n;e.forEach(function(e){if(e.sseEvent){processSSETrigger(i,n,a,e.sseEvent)}else if(e.trigger==="revealed"){initScrollHandler();maybeReveal(i)}else if(e.trigger==="intersect"){var t={};if(e.root){t.root=querySelectorExt(e.root)}if(e.threshold){t.threshold=parseFloat(e.threshold)}var r=new IntersectionObserver(function(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.isIntersecting){triggerEvent(i,"intersect");break}}},t);r.observe(i);addEventListener(i,n,a,o,e)}else if(e.trigger==="load"){loadImmediately(i,n,a,o,e.delay)}else if(e.pollInterval){o.polling=true;processPolling(i,n,a,e.pollInterval)}else{addEventListener(i,n,a,o,e)}})}});return t}function evalScript(e){if(e.type==="text/javascript"||e.type===""){try{maybeEval(e,function(){(1,eval)(e.innerText)})}catch(e){logError(e)}}}function processScripts(e){if(matches(e,"script")){evalScript(e)}forEach(findAll(e,"script"),function(e){evalScript(e)})}function isBoosted(){return document.querySelector("[hx-boost], [data-hx-boost]")}function findElementsToProcess(e){if(e.querySelectorAll){var t=isBoosted()?", a, form":"";var r=e.querySelectorAll(VERB_SELECTOR+t+", [hx-sse], [data-hx-sse], [hx-ws],"+" [data-hx-ws]");return r}else{return[]}}function initNode(e){if(e.closest&&e.closest(htmx.config.disableSelector)){return}var t=getInternalData(e);if(!t.initialized){t.initialized=true;triggerEvent(e,"htmx:beforeProcessNode");if(e.value){t.lastValue=e.value}var r=getTriggerSpecs(e);var n=processVerbs(e,t,r);if(!n&&getClosestAttributeValue(e,"hx-boost")==="true"){boostElement(e,t,r)}var a=getAttributeValue(e,"hx-sse");if(a){processSSEInfo(e,t,a)}var i=getAttributeValue(e,"hx-ws");if(i){processWebSocketInfo(e,t,i)}triggerEvent(e,"htmx:afterProcessNode")}}function processNode(e){e=resolveTarget(e);initNode(e);forEach(findElementsToProcess(e),function(e){initNode(e)})}function kebabEventName(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function makeEvent(e,t){var r;if(window.CustomEvent&&typeof window.CustomEvent==="function"){r=new CustomEvent(e,{bubbles:true,cancelable:true,detail:t})}else{r=getDocument().createEvent("CustomEvent");r.initCustomEvent(e,true,true,t)}return r}function triggerErrorEvent(e,t,r){triggerEvent(e,t,mergeObjects({error:t},r))}function ignoreEventForLogging(e){return e==="htmx:afterProcessNode"}function withExtensions(e,t){forEach(getExtensions(e),function(e){try{t(e)}catch(e){logError(e)}})}function logError(e){if(console.error){console.error(e)}else if(console.log){console.log("ERROR: ",e)}}function triggerEvent(e,t,r){e=resolveTarget(e);if(r==null){r={}}r["elt"]=e;var n=makeEvent(t,r);if(htmx.logger&&!ignoreEventForLogging(t)){htmx.logger(e,t,r)}if(r.error){logError(r.error);triggerEvent(e,"htmx:error",{errorInfo:r})}var a=e.dispatchEvent(n);var i=kebabEventName(t);if(a&&i!==t){var o=makeEvent(i,n.detail);a=a&&e.dispatchEvent(o)}withExtensions(e,function(e){a=a&&e.onEvent(t,n)!==false});return a}var currentPathForHistory=null;function getHistoryElement(){var e=getDocument().querySelector("[hx-history-elt],[data-hx-history-elt]");return e||getDocument().body}function saveToHistoryCache(e,t,r,n){var a=parseJSON(localStorage.getItem("htmx-history-cache"))||[];for(var i=0;i<a.length;i++){if(a[i].url===e){a.splice(i,1);break}}a.push({url:e,content:t,title:r,scroll:n});while(a.length>htmx.config.historyCacheSize){a.shift()}while(a.length>0){try{localStorage.setItem("htmx-history-cache",JSON.stringify(a));break}catch(e){triggerErrorEvent(getDocument().body,"htmx:historyCacheError",{cause:e,cache:a});a.shift()}}}function getCachedHistory(e){var t=parseJSON(localStorage.getItem("htmx-history-cache"))||[];for(var r=0;r<t.length;r++){if(t[r].url===e){return t[r]}}return null}function cleanInnerHtmlForHistory(e){var t=htmx.config.requestClass;var r=e.cloneNode(true);forEach(findAll(r,"."+t),function(e){removeClassFromElement(e,t)});return r.innerHTML}function saveHistory(){var e=getHistoryElement();var t=currentPathForHistory||location.pathname+location.search;triggerEvent(getDocument().body,"htmx:beforeHistorySave",{path:t,historyElt:e});if(htmx.config.historyEnabled)history.replaceState({htmx:true},getDocument().title,window.location.href);saveToHistoryCache(t,cleanInnerHtmlForHistory(e),getDocument().title,window.scrollY)}function pushUrlIntoHistory(e){if(htmx.config.historyEnabled)history.pushState({htmx:true},"",e);currentPathForHistory=e}function settleImmediately(e){forEach(e,function(e){e.call()})}function loadHistoryFromServer(n){var e=new XMLHttpRequest;var a={path:n,xhr:e};triggerEvent(getDocument().body,"htmx:historyCacheMiss",a);e.open("GET",n,true);e.setRequestHeader("HX-History-Restore-Request","true");e.onload=function(){if(this.status>=200&&this.status<400){triggerEvent(getDocument().body,"htmx:historyCacheMissLoad",a);var e=makeFragment(this.response);e=e.querySelector("[hx-history-elt],[data-hx-history-elt]")||e;var t=getHistoryElement();var r=makeSettleInfo(t);swapInnerHTML(t,e,r);settleImmediately(r.tasks);currentPathForHistory=n;triggerEvent(getDocument().body,"htmx:historyRestore",{path:n})}else{triggerErrorEvent(getDocument().body,"htmx:historyCacheMissLoadError",a)}};e.send()}function restoreHistory(e){saveHistory();e=e||location.pathname+location.search;var t=getCachedHistory(e);if(t){var r=makeFragment(t.content);var n=getHistoryElement();var a=makeSettleInfo(n);swapInnerHTML(n,r,a);settleImmediately(a.tasks);document.title=t.title;window.scrollTo(0,t.scroll);currentPathForHistory=e;triggerEvent(getDocument().body,"htmx:historyRestore",{path:e})}else{if(htmx.config.refreshOnHistoryMiss){window.location.reload(true)}else{loadHistoryFromServer(e)}}}function shouldPush(e){var t=getClosestAttributeValue(e,"hx-push-url");return t&&t!=="false"||getInternalData(e).boosted&&getInternalData(e).pushURL}function getPushUrl(e){var t=getClosestAttributeValue(e,"hx-push-url");return t==="true"||t==="false"?null:t}function addRequestIndicatorClasses(e){var t=getClosestAttributeValue(e,"hx-indicator");if(t){var r=querySelectorAllExt(e,t)}else{r=[e]}forEach(r,function(e){e.classList["add"].call(e.classList,htmx.config.requestClass)});return r}function removeRequestIndicatorClasses(e){forEach(e,function(e){e.classList["remove"].call(e.classList,htmx.config.requestClass)})}function haveSeenNode(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n.isSameNode(t)){return true}}return false}function shouldInclude(e){if(e.name===""||e.name==null||e.disabled){return false}if(e.type==="button"||e.type==="submit"||e.tagName==="image"||e.tagName==="reset"||e.tagName==="file"){return false}if(e.type==="checkbox"||e.type==="radio"){return e.checked}return true}function processInputValue(t,r,n,e,a){if(e==null||haveSeenNode(t,e)){return}else{t.push(e)}if(shouldInclude(e)){var i=getRawAttribute(e,"name");var o=e.value;if(e.multiple){o=toArray(e.querySelectorAll("option:checked")).map(function(e){return e.value})}if(e.files){o=toArray(e.files)}if(i!=null&&o!=null){var s=r[i];if(s){if(Array.isArray(s)){if(Array.isArray(o)){r[i]=s.concat(o)}else{s.push(o)}}else{if(Array.isArray(o)){r[i]=[s].concat(o)}else{r[i]=[s,o]}}}else{r[i]=o}}if(a){validateElement(e,n)}}if(matches(e,"form")){var l=e.elements;forEach(l,function(e){processInputValue(t,r,n,e,a)})}}function validateElement(e,t){if(e.willValidate){triggerEvent(e,"htmx:validation:validate");if(!e.checkValidity()){t.push({elt:e,message:e.validationMessage,validity:e.validity});triggerEvent(e,"htmx:validation:failed",{message:e.validationMessage,validity:e.validity})}}}function getInputValues(e,t){var r=[];var n={};var a={};var i=[];var o=matches(e,"form")&&e.noValidate!==true;if(t!=="get"){processInputValue(r,a,i,closest(e,"form"),o)}processInputValue(r,n,i,e,o);var s=getClosestAttributeValue(e,"hx-include");if(s){var l=querySelectorAllExt(e,s);forEach(l,function(e){processInputValue(r,n,i,e,o);if(!matches(e,"form")){forEach(e.querySelectorAll(INPUT_SELECTOR),function(e){processInputValue(r,n,i,e,o)})}})}n=mergeObjects(n,a);return{errors:i,values:n}}function appendParam(e,t,r){if(e!==""){e+="&"}e+=encodeURIComponent(t)+"="+encodeURIComponent(r);return e}function urlEncode(e){var t="";for(var r in e){if(e.hasOwnProperty(r)){var n=e[r];if(Array.isArray(n)){forEach(n,function(e){t=appendParam(t,r,e)})}else{t=appendParam(t,r,n)}}}return t}function makeFormData(e){var t=new FormData;for(var r in e){if(e.hasOwnProperty(r)){var n=e[r];if(Array.isArray(n)){forEach(n,function(e){t.append(r,e)})}else{t.append(r,n)}}}return t}function getHeaders(e,t,r){var n={"HX-Request":"true","HX-Trigger":getRawAttribute(e,"id"),"HX-Trigger-Name":getRawAttribute(e,"name"),"HX-Target":getAttributeValue(t,"id"),"HX-Current-URL":getDocument().location.href};getValuesForElement(e,"hx-headers",false,n);if(r!==undefined){n["HX-Prompt"]=r}return n}function filterValues(t,e){var r=getClosestAttributeValue(e,"hx-params");if(r){if(r==="none"){return{}}else if(r==="*"){return t}else if(r.indexOf("not ")===0){forEach(r.substr(4).split(","),function(e){e=e.trim();delete t[e]});return t}else{var n={};forEach(r.split(","),function(e){e=e.trim();n[e]=t[e]});return n}}else{return t}}function isAnchorLink(e){return getRawAttribute(e,"href")&&getRawAttribute(e,"href").indexOf("#")>=0}function getSwapSpecification(e){var t=getClosestAttributeValue(e,"hx-swap");var r={swapStyle:getInternalData(e).boosted?"innerHTML":htmx.config.defaultSwapStyle,swapDelay:htmx.config.defaultSwapDelay,settleDelay:htmx.config.defaultSettleDelay};if(getInternalData(e).boosted&&!isAnchorLink(e)){r["show"]="top"}if(t){var n=splitOnWhitespace(t);if(n.length>0){r["swapStyle"]=n[0];for(var a=1;a<n.length;a++){var i=n[a];if(i.indexOf("swap:")===0){r["swapDelay"]=parseInterval(i.substr(5))}if(i.indexOf("settle:")===0){r["settleDelay"]=parseInterval(i.substr(7))}if(i.indexOf("scroll:")===0){r["scroll"]=i.substr(7)}if(i.indexOf("show:")===0){r["show"]=i.substr(5)}}}}return r}function encodeParamsForBody(t,r,n){var a=null;withExtensions(r,function(e){if(a==null){a=e.encodeParameters(t,n,r)}});if(a!=null){return a}else{if(getClosestAttributeValue(r,"hx-encoding")==="multipart/form-data"){return makeFormData(n)}else{return urlEncode(n)}}}function makeSettleInfo(e){return{tasks:[],elts:[e]}}function updateScrollState(e,t){var r=e[0];var n=e[e.length-1];if(t.scroll){if(t.scroll==="top"&&r){r.scrollTop=0}if(t.scroll==="bottom"&&n){n.scrollTop=n.scrollHeight}}if(t.show){if(t.show==="top"&&r){r.scrollIntoView(true)}if(t.show==="bottom"&&n){n.scrollIntoView(false)}}}function getValuesForElement(e,t,r,n){if(n==null){n={}}if(e==null){return n}var a=getAttributeValue(e,t);if(a){var i=a.trim();var o=r;if(i.indexOf("javascript:")===0){i=i.substr(11);o=true}if(i.indexOf("{")!==0){i="{"+i+"}"}var s;if(o){s=maybeEval(e,function(){return Function("return ("+i+")")()},{})}else{s=parseJSON(i)}for(var l in s){if(s.hasOwnProperty(l)){if(n[l]==null){n[l]=s[l]}}}}return getValuesForElement(parentElt(e),t,r,n)}function maybeEval(e,t,r){if(htmx.config.allowEval){return t()}else{triggerErrorEvent(e,"htmx:evalDisallowedError");return r}}function getHXVarsForElement(e,t){return getValuesForElement(e,"hx-vars",true,t)}function getHXValsForElement(e,t){return getValuesForElement(e,"hx-vals",false,t)}function getExpressionVars(e){return mergeObjects(getHXVarsForElement(e),getHXValsForElement(e))}function safelySetHeaderValue(t,r,n){if(n!==null){try{t.setRequestHeader(r,n)}catch(e){t.setRequestHeader(r,encodeURIComponent(n));t.setRequestHeader(r+"-URI-AutoEncoded","true")}}}function getResponseURL(t){if(t.responseURL&&typeof URL!=="undefined"){try{var e=new URL(t.responseURL);return e.pathname+e.search}catch(e){triggerErrorEvent(getDocument().body,"htmx:badResponseUrl",{url:t.responseURL})}}}function hasHeader(e,t){return e.getAllResponseHeaders().match(t)}function ajaxHelper(e,t,r){if(r){if(r instanceof Element||isType(r,"String")){return issueAjaxRequest(e,t,null,null,{targetOverride:resolveTarget(r)})}else{return issueAjaxRequest(e,t,resolveTarget(r.source),r.event,{handler:r.handler,headers:r.headers,values:r.values,targetOverride:resolveTarget(r.target)})}}else{return issueAjaxRequest(e,t)}}function hierarchyForElt(e){var t=[];while(e){t.push(e);e=e.parentElement}return t}function issueAjaxRequest(e,t,n,r,a){var i=null;var o=null;a=a!=null?a:{};if(typeof Promise!=="undefined"){var s=new Promise(function(e,t){i=e;o=t})}if(n==null){n=getDocument().body}var l=a.handler||handleAjaxResponse;if(!bodyContains(n)){return}var c=a.targetOverride||getTarget(n);if(c==null){triggerErrorEvent(n,"htmx:targetError",{target:getAttributeValue(n,"hx-target")});return}var u=getInternalData(n);if(u.requestInFlight){var f="last";var d=getInternalData(r);if(d&&d.triggerSpec&&d.triggerSpec.queue){f=d.triggerSpec.queue}if(u.queuedRequests==null){u.queuedRequests=[]}if(f==="first"&&u.queuedRequests.length===0){u.queuedRequests.push(function(){issueAjaxRequest(e,t,n,r)})}else if(f==="all"){u.queuedRequests.push(function(){issueAjaxRequest(e,t,n,r)})}else if(f==="last"){u.queuedRequests=[];u.queuedRequests.push(function(){issueAjaxRequest(e,t,n,r)})}return}else{u.requestInFlight=true}var h=function(){u.requestInFlight=false;if(u.queuedRequests!=null&&u.queuedRequests.length>0){var e=u.queuedRequests.shift();e()}};var p=getClosestAttributeValue(n,"hx-prompt");if(p){var v=prompt(p);if(v===null||!triggerEvent(n,"htmx:prompt",{prompt:v,target:c})){maybeCall(i);h();return s}}var g=getClosestAttributeValue(n,"hx-confirm");if(g){if(!confirm(g)){maybeCall(i);h();return s}}var m=new XMLHttpRequest;var _=getHeaders(n,c,v);if(a.headers){_=mergeObjects(_,a.values)}var y=getInputValues(n,e);var b=y.errors;var x=y.values;if(a.values){x=mergeObjects(x,a.values)}var w=getExpressionVars(n);var A=mergeObjects(x,w);var T=filterValues(A,n);if(e!=="get"&&getClosestAttributeValue(n,"hx-encoding")==null){_["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"}if(t==null||t===""){t=getDocument().location.href}var k={parameters:T,unfilteredParameters:A,headers:_,target:c,verb:e,errors:b,path:t,triggeringEvent:r};if(!triggerEvent(n,"htmx:configRequest",k)){maybeCall(i);h();return s}t=k.path;e=k.verb;_=k.headers;T=k.parameters;b=k.errors;if(b&&b.length>0){triggerEvent(n,"htmx:validation:halted",k);maybeCall(i);h();return s}var M=t.split("#");var S=M[0];var C=M[1];if(e==="get"){var L=S;var E=Object.keys(T).length!==0;if(E){if(L.indexOf("?")<0){L+="?"}else{L+="&"}L+=urlEncode(T);if(C){L+="#"+C}}m.open("GET",L,true)}else{m.open(e.toUpperCase(),t,true)}m.overrideMimeType("text/html");m.withCredentials=htmx.config.withCredentials;for(var D in _){if(_.hasOwnProperty(D)){var O=_[D];safelySetHeaderValue(m,D,O)}}var P={xhr:m,target:c,requestConfig:k,pathInfo:{path:t,finalPath:L,anchor:C}};m.onload=function(){try{var e=hierarchyForElt(n);l(n,P);removeRequestIndicatorClasses(I);triggerEvent(n,"htmx:afterRequest",P);triggerEvent(n,"htmx:afterOnLoad",P);if(!bodyContains(n)){var t=null;while(e.length>0&&t==null){var r=e.shift();if(bodyContains(r)){t=r}}if(t){triggerEvent(t,"htmx:afterRequest",P);triggerEvent(t,"htmx:afterOnLoad",P)}}maybeCall(i);h()}catch(e){triggerErrorEvent(n,"htmx:onLoadError",mergeObjects({error:e},P));throw e}};m.onerror=function(){removeRequestIndicatorClasses(I);triggerErrorEvent(n,"htmx:afterRequest",P);triggerErrorEvent(n,"htmx:sendError",P);maybeCall(o);h()};m.onabort=function(){removeRequestIndicatorClasses(I);triggerErrorEvent(n,"htmx:afterRequest",P);triggerErrorEvent(n,"htmx:sendAbort",P);maybeCall(o);h()};if(!triggerEvent(n,"htmx:beforeRequest",P)){maybeCall(i);h();return s}var I=addRequestIndicatorClasses(n);forEach(["loadstart","loadend","progress","abort"],function(t){forEach([m,m.upload],function(e){e.addEventListener(t,function(e){triggerEvent(n,"htmx:xhr:"+t,{lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total})})})});triggerEvent(n,"htmx:beforeSend",P);m.send(e==="get"?null:encodeParamsForBody(m,n,T));return s}function handleAjaxResponse(o,s){var l=s.xhr;var c=s.target;if(!triggerEvent(o,"htmx:beforeOnLoad",s))return;if(hasHeader(l,/HX-Trigger:/i)){handleTrigger(l,"HX-Trigger",o)}if(hasHeader(l,/HX-Push:/i)){var u=l.getResponseHeader("HX-Push")}if(hasHeader(l,/HX-Redirect:/i)){window.location.href=l.getResponseHeader("HX-Redirect");return}if(hasHeader(l,/HX-Refresh:/i)){if("true"===l.getResponseHeader("HX-Refresh")){location.reload();return}}var f=shouldPush(o)||u;if(l.status>=200&&l.status<400){if(l.status===286){cancelPolling(o)}if(l.status!==204){if(!triggerEvent(c,"htmx:beforeSwap",s))return;var d=l.response;withExtensions(o,function(e){d=e.transformResponse(d,l,o)});if(f){saveHistory()}var h=getSwapSpecification(o);c.classList.add(htmx.config.swappingClass);var e=function(){try{var e=document.activeElement;var t={};try{t={elt:e,start:e?e.selectionStart:null,end:e?e.selectionEnd:null}}catch(e){}var r=makeSettleInfo(c);selectAndSwap(h.swapStyle,c,o,d,r);if(t.elt&&!bodyContains(t.elt)&&t.elt.id){var n=document.getElementById(t.elt.id);if(n){if(t.start&&n.setSelectionRange){n.setSelectionRange(t.start,t.end)}n.focus()}}c.classList.remove(htmx.config.swappingClass);forEach(r.elts,function(e){if(e.classList){e.classList.add(htmx.config.settlingClass)}triggerEvent(e,"htmx:afterSwap",s)});if(s.pathInfo.anchor){location.hash=s.pathInfo.anchor}if(hasHeader(l,/HX-Trigger-After-Swap:/i)){var a=o;if(!bodyContains(o)){a=getDocument().body}handleTrigger(l,"HX-Trigger-After-Swap",a)}var i=function(){forEach(r.tasks,function(e){e.call()});forEach(r.elts,function(e){if(e.classList){e.classList.remove(htmx.config.settlingClass)}triggerEvent(e,"htmx:afterSettle",s)});if(f){var e=u||getPushUrl(o)||getResponseURL(l)||s.pathInfo.finalPath||s.pathInfo.path;pushUrlIntoHistory(e);triggerEvent(getDocument().body,"htmx:pushedIntoHistory",{path:e})}updateScrollState(r.elts,h);if(hasHeader(l,/HX-Trigger-After-Settle:/i)){var t=o;if(!bodyContains(o)){t=getDocument().body}handleTrigger(l,"HX-Trigger-After-Settle",t)}};if(h.settleDelay>0){setTimeout(i,h.settleDelay)}else{i()}}catch(e){triggerErrorEvent(o,"htmx:swapError",s);throw e}};if(h.swapDelay>0){setTimeout(e,h.swapDelay)}else{e()}}}else{triggerErrorEvent(o,"htmx:responseError",mergeObjects({error:"Response Status Error Code "+l.status+" from "+s.pathInfo.path},s))}}var extensions={};function extensionBase(){return{onEvent:function(e,t){return true},transformResponse:function(e,t,r){return e},isInlineSwap:function(e){return false},handleSwap:function(e,t,r,n){return false},encodeParameters:function(e,t,r){return null}}}function defineExtension(e,t){extensions[e]=mergeObjects(extensionBase(),t)}function removeExtension(e){delete extensions[e]}function getExtensions(e,r,n){if(e==undefined){return r}if(r==undefined){r=[]}if(n==undefined){n=[]}var t=getAttributeValue(e,"hx-ext");if(t){forEach(t.split(","),function(e){e=e.replace(/ /g,"");if(e.slice(0,7)=="ignore:"){n.push(e.slice(7));return}if(n.indexOf(e)<0){var t=extensions[e];if(t&&r.indexOf(t)<0){r.push(t)}}})}return getExtensions(parentElt(e),r,n)}function ready(e){if(getDocument().readyState!=="loading"){e()}else{getDocument().addEventListener("DOMContentLoaded",e)}}function insertIndicatorStyles(){if(htmx.config.includeIndicatorStyles!==false){getDocument().head.insertAdjacentHTML("beforeend","<style>                      ."+htmx.config.indicatorClass+"{opacity:0;transition: opacity 200ms ease-in;}                      ."+htmx.config.requestClass+" ."+htmx.config.indicatorClass+"{opacity:1}                      ."+htmx.config.requestClass+"."+htmx.config.indicatorClass+"{opacity:1}                    </style>")}}function getMetaConfig(){var e=getDocument().querySelector('meta[name="htmx-config"]');if(e){return parseJSON(e.content)}else{return null}}function mergeMetaConfig(){var e=getMetaConfig();if(e){htmx.config=mergeObjects(htmx.config,e)}}ready(function(){mergeMetaConfig();insertIndicatorStyles();var e=getDocument().body;processNode(e);window.onpopstate=function(e){if(e.state&&e.state.htmx){restoreHistory()}};setTimeout(function(){triggerEvent(e,"htmx:load",{})},0)});return htmx}()});(function(e,t){"use strict";if(typeof module==="object"&&typeof module.exports==="object"){module.exports=e.document?t(e,true):function(e){if(!e.document){throw new Error("jQuery requires a window with a document")}return t(e)}}else{t(e)}})(typeof window!=="undefined"?window:this,function(A,e){"use strict";var t=[];var n=Object.getPrototypeOf;var s=t.slice;var v=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)};var l=t.push;var a=t.indexOf;var r={};var i=r.toString;var g=r.hasOwnProperty;var o=g.toString;var c=o.call(Object);var m={};var _=function e(t){return typeof t==="function"&&typeof t.nodeType!=="number"&&typeof t.item!=="function"};var y=function e(t){return t!=null&&t===t.window};var T=A.document;var u={type:true,src:true,nonce:true,noModule:true};function b(e,t,r){r=r||T;var n,a,i=r.createElement("script");i.text=e;if(t){for(n in u){a=t[n]||t.getAttribute&&t.getAttribute(n);if(a){i.setAttribute(n,a)}}}r.head.appendChild(i).parentNode.removeChild(i)}function x(e){if(e==null){return e+""}return typeof e==="object"||typeof e==="function"?r[i.call(e)]||"object":typeof e}var f="3.6.0",k=function(e,t){return new k.fn.init(e,t)};k.fn=k.prototype={jquery:f,constructor:k,length:0,toArray:function(){return s.call(this)},get:function(e){if(e==null){return s.call(this)}return e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=k.merge(this.constructor(),e);t.prevObject=this;return t},each:function(e){return k.each(this,e)},map:function(r){return this.pushStack(k.map(this,function(e,t){return r.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(k.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(k.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:t.sort,splice:t.splice};k.extend=k.fn.extend=function(){var e,t,r,n,a,i,o=arguments[0]||{},s=1,l=arguments.length,c=false;if(typeof o==="boolean"){c=o;o=arguments[s]||{};s++}if(typeof o!=="object"&&!_(o)){o={}}if(s===l){o=this;s--}for(;s<l;s++){if((e=arguments[s])!=null){for(t in e){n=e[t];if(t==="__proto__"||o===n){continue}if(c&&n&&(k.isPlainObject(n)||(a=Array.isArray(n)))){r=o[t];if(a&&!Array.isArray(r)){i=[]}else if(!a&&!k.isPlainObject(r)){i={}}else{i=r}a=false;o[t]=k.extend(c,i,n)}else if(n!==undefined){o[t]=n}}}}return o};k.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:true,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,r;if(!e||i.call(e)!=="[object Object]"){return false}t=n(e);if(!t){return true}r=g.call(t,"constructor")&&t.constructor;return typeof r==="function"&&o.call(r)===c},isEmptyObject:function(e){var t;for(t in e){return false}return true},globalEval:function(e,t,r){b(e,{nonce:t&&t.nonce},r)},each:function(e,t){var r,n=0;if(d(e)){r=e.length;for(;n<r;n++){if(t.call(e[n],n,e[n])===false){break}}}else{for(n in e){if(t.call(e[n],n,e[n])===false){break}}}return e},makeArray:function(e,t){var r=t||[];if(e!=null){if(d(Object(e))){k.merge(r,typeof e==="string"?[e]:e)}else{l.call(r,e)}}return r},inArray:function(e,t,r){return t==null?-1:a.call(t,e,r)},merge:function(e,t){var r=+t.length,n=0,a=e.length;for(;n<r;n++){e[a++]=t[n]}e.length=a;return e},grep:function(e,t,r){var n,a=[],i=0,o=e.length,s=!r;for(;i<o;i++){n=!t(e[i],i);if(n!==s){a.push(e[i])}}return a},map:function(e,t,r){var n,a,i=0,o=[];if(d(e)){n=e.length;for(;i<n;i++){a=t(e[i],i,r);if(a!=null){o.push(a)}}}else{for(i in e){a=t(e[i],i,r);if(a!=null){o.push(a)}}}return v(o)},guid:1,support:m});if(typeof Symbol==="function"){k.fn[Symbol.iterator]=t[Symbol.iterator]}k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){r["[object "+t+"]"]=t.toLowerCase()});function d(e){var t=!!e&&"length"in e&&e.length,r=x(e);if(_(e)||y(e)){return false}return r==="array"||t===0||typeof t==="number"&&t>0&&t-1 in e}var h=function(r){var e,h,b,i,a,p,f,v,x,l,c,w,A,o,T,g,s,u,m,k="sizzle"+1*new Date,d=r.document,M=0,n=0,_=le(),y=le(),S=le(),C=le(),L=function(e,t){if(e===t){c=true}return 0},E={}.hasOwnProperty,t=[],D=t.pop,O=t.push,P=t.push,I=t.slice,R=function(e,t){var r=0,n=e.length;for(;r<n;r++){if(e[r]===t){return r}}return-1},z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|"+"ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",F="(?:\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",j="\\["+N+"*("+F+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+N+"*\\]",B=":("+F+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|"+".*"+")\\)|)",H=new RegExp(N+"+","g"),U=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),V=new RegExp("^"+N+"*,"+N+"*"),q=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),Y=new RegExp(N+"|>"),G=new RegExp(B),W=new RegExp("^"+F+"$"),X={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+z+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},Z=/HTML$/i,J=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\([^\\r\\n\\f])","g"),re=function(e,t){var r="0x"+e.slice(1)-65536;return t?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)},ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ae=function(e,t){if(t){if(e==="\0"){return""}return e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" "}return"\\"+e},ie=function(){w()},oe=be(function(e){return e.disabled===true&&e.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{P.apply(t=I.call(d.childNodes),d.childNodes);t[d.childNodes.length].nodeType}catch(e){P={apply:t.length?function(e,t){O.apply(e,I.call(t))}:function(e,t){var r=e.length,n=0;while(e[r++]=t[n++]){}e.length=r-1}}}function se(t,e,r,n){var a,i,o,s,l,c,u,f=e&&e.ownerDocument,d=e?e.nodeType:9;r=r||[];if(typeof t!=="string"||!t||d!==1&&d!==9&&d!==11){return r}if(!n){w(e);e=e||A;if(T){if(d!==11&&(l=K.exec(t))){if(a=l[1]){if(d===9){if(o=e.getElementById(a)){if(o.id===a){r.push(o);return r}}else{return r}}else{if(f&&(o=f.getElementById(a))&&m(e,o)&&o.id===a){r.push(o);return r}}}else if(l[2]){P.apply(r,e.getElementsByTagName(t));return r}else if((a=l[3])&&h.getElementsByClassName&&e.getElementsByClassName){P.apply(r,e.getElementsByClassName(a));return r}}if(h.qsa&&!C[t+" "]&&(!g||!g.test(t))&&(d!==1||e.nodeName.toLowerCase()!=="object")){u=t;f=e;if(d===1&&(Y.test(t)||q.test(t))){f=ee.test(t)&&me(e.parentNode)||e;if(f!==e||!h.scope){if(s=e.getAttribute("id")){s=s.replace(ne,ae)}else{e.setAttribute("id",s=k)}}c=p(t);i=c.length;while(i--){c[i]=(s?"#"+s:":scope")+" "+ye(c[i])}u=c.join(",")}try{P.apply(r,f.querySelectorAll(u));return r}catch(e){C(t,true)}finally{if(s===k){e.removeAttribute("id")}}}}}return v(t.replace(U,"$1"),e,r,n)}function le(){var r=[];function n(e,t){if(r.push(e+" ")>b.cacheLength){delete n[r.shift()]}return n[e+" "]=t}return n}function ce(e){e[k]=true;return e}function ue(e){var t=A.createElement("fieldset");try{return!!e(t)}catch(e){return false}finally{if(t.parentNode){t.parentNode.removeChild(t)}t=null}}function fe(e,t){var r=e.split("|"),n=r.length;while(n--){b.attrHandle[r[n]]=t}}function de(e,t){var r=t&&e,n=r&&e.nodeType===1&&t.nodeType===1&&e.sourceIndex-t.sourceIndex;if(n){return n}if(r){while(r=r.nextSibling){if(r===t){return-1}}}return e?1:-1}function he(r){return function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type===r}}function pe(r){return function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&e.type===r}}function ve(t){return function(e){if("form"in e){if(e.parentNode&&e.disabled===false){if("label"in e){if("label"in e.parentNode){return e.parentNode.disabled===t}else{return e.disabled===t}}return e.isDisabled===t||e.isDisabled!==!t&&oe(e)===t}return e.disabled===t}else if("label"in e){return e.disabled===t}return false}}function ge(o){return ce(function(i){i=+i;return ce(function(e,t){var r,n=o([],e.length,i),a=n.length;while(a--){if(e[r=n[a]]){e[r]=!(t[r]=e[r])}}})})}function me(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}h=se.support={};a=se.isXML=function(e){var t=e&&e.namespaceURI,r=e&&(e.ownerDocument||e).documentElement;return!Z.test(t||r&&r.nodeName||"HTML")};w=se.setDocument=function(e){var t,r,n=e?e.ownerDocument||e:d;if(n==A||n.nodeType!==9||!n.documentElement){return A}A=n;o=A.documentElement;T=!a(A);if(d!=A&&(r=A.defaultView)&&r.top!==r){if(r.addEventListener){r.addEventListener("unload",ie,false)}else if(r.attachEvent){r.attachEvent("onunload",ie)}}h.scope=ue(function(e){o.appendChild(e).appendChild(A.createElement("div"));return typeof e.querySelectorAll!=="undefined"&&!e.querySelectorAll(":scope fieldset div").length});h.attributes=ue(function(e){e.className="i";return!e.getAttribute("className")});h.getElementsByTagName=ue(function(e){e.appendChild(A.createComment(""));return!e.getElementsByTagName("*").length});h.getElementsByClassName=Q.test(A.getElementsByClassName);h.getById=ue(function(e){o.appendChild(e).id=k;return!A.getElementsByName||!A.getElementsByName(k).length});if(h.getById){b.filter["ID"]=function(e){var t=e.replace(te,re);return function(e){return e.getAttribute("id")===t}};b.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&T){var r=t.getElementById(e);return r?[r]:[]}}}else{b.filter["ID"]=function(e){var r=e.replace(te,re);return function(e){var t=typeof e.getAttributeNode!=="undefined"&&e.getAttributeNode("id");return t&&t.value===r}};b.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&T){var r,n,a,i=t.getElementById(e);if(i){r=i.getAttributeNode("id");if(r&&r.value===e){return[i]}a=t.getElementsByName(e);n=0;while(i=a[n++]){r=i.getAttributeNode("id");if(r&&r.value===e){return[i]}}}return[]}}}b.find["TAG"]=h.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!=="undefined"){return t.getElementsByTagName(e)}else if(h.qsa){return t.querySelectorAll(e)}}:function(e,t){var r,n=[],a=0,i=t.getElementsByTagName(e);if(e==="*"){while(r=i[a++]){if(r.nodeType===1){n.push(r)}}return n}return i};b.find["CLASS"]=h.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!=="undefined"&&T){return t.getElementsByClassName(e)}};s=[];g=[];if(h.qsa=Q.test(A.querySelectorAll)){ue(function(e){var t;o.appendChild(e).innerHTML="<a id='"+k+"'></a>"+"<select id='"+k+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(e.querySelectorAll("[msallowcapture^='']").length){g.push("[*^$]="+N+"*(?:''|\"\")")}if(!e.querySelectorAll("[selected]").length){g.push("\\["+N+"*(?:value|"+z+")")}if(!e.querySelectorAll("[id~="+k+"-]").length){g.push("~=")}t=A.createElement("input");t.setAttribute("name","");e.appendChild(t);if(!e.querySelectorAll("[name='']").length){g.push("\\["+N+"*name"+N+"*="+N+"*(?:''|\"\")")}if(!e.querySelectorAll(":checked").length){g.push(":checked")}if(!e.querySelectorAll("a#"+k+"+*").length){g.push(".#.+[+~]")}e.querySelectorAll("\\\f");g.push("[\\r\\n\\f]")});ue(function(e){e.innerHTML="<a href='' disabled='disabled'></a>"+"<select disabled='disabled'><option/></select>";var t=A.createElement("input");t.setAttribute("type","hidden");e.appendChild(t).setAttribute("name","D");if(e.querySelectorAll("[name=d]").length){g.push("name"+N+"*[*^$|!~]?=")}if(e.querySelectorAll(":enabled").length!==2){g.push(":enabled",":disabled")}o.appendChild(e).disabled=true;if(e.querySelectorAll(":disabled").length!==2){g.push(":enabled",":disabled")}e.querySelectorAll("*,:x");g.push(",.*:")})}if(h.matchesSelector=Q.test(u=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector)){ue(function(e){h.disconnectedMatch=u.call(e,"*");u.call(e,"[s!='']:x");s.push("!=",B)})}g=g.length&&new RegExp(g.join("|"));s=s.length&&new RegExp(s.join("|"));t=Q.test(o.compareDocumentPosition);m=t||Q.test(o.contains)?function(e,t){var r=e.nodeType===9?e.documentElement:e,n=t&&t.parentNode;return e===n||!!(n&&n.nodeType===1&&(r.contains?r.contains(n):e.compareDocumentPosition&&e.compareDocumentPosition(n)&16))}:function(e,t){if(t){while(t=t.parentNode){if(t===e){return true}}}return false};L=t?function(e,t){if(e===t){c=true;return 0}var r=!e.compareDocumentPosition-!t.compareDocumentPosition;if(r){return r}r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1;if(r&1||!h.sortDetached&&t.compareDocumentPosition(e)===r){if(e==A||e.ownerDocument==d&&m(d,e)){return-1}if(t==A||t.ownerDocument==d&&m(d,t)){return 1}return l?R(l,e)-R(l,t):0}return r&4?-1:1}:function(e,t){if(e===t){c=true;return 0}var r,n=0,a=e.parentNode,i=t.parentNode,o=[e],s=[t];if(!a||!i){return e==A?-1:t==A?1:a?-1:i?1:l?R(l,e)-R(l,t):0}else if(a===i){return de(e,t)}r=e;while(r=r.parentNode){o.unshift(r)}r=t;while(r=r.parentNode){s.unshift(r)}while(o[n]===s[n]){n++}return n?de(o[n],s[n]):o[n]==d?-1:s[n]==d?1:0};return A};se.matches=function(e,t){return se(e,null,null,t)};se.matchesSelector=function(e,t){w(e);if(h.matchesSelector&&T&&!C[t+" "]&&(!s||!s.test(t))&&(!g||!g.test(t))){try{var r=u.call(e,t);if(r||h.disconnectedMatch||e.document&&e.document.nodeType!==11){return r}}catch(e){C(t,true)}}return se(t,A,null,[e]).length>0};se.contains=function(e,t){if((e.ownerDocument||e)!=A){w(e)}return m(e,t)};se.attr=function(e,t){if((e.ownerDocument||e)!=A){w(e)}var r=b.attrHandle[t.toLowerCase()],n=r&&E.call(b.attrHandle,t.toLowerCase())?r(e,t,!T):undefined;return n!==undefined?n:h.attributes||!T?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null};se.escape=function(e){return(e+"").replace(ne,ae)};se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};se.uniqueSort=function(e){var t,r=[],n=0,a=0;c=!h.detectDuplicates;l=!h.sortStable&&e.slice(0);e.sort(L);if(c){while(t=e[a++]){if(t===e[a]){n=r.push(a)}}while(n--){e.splice(r[n],1)}}l=null;return e};i=se.getText=function(e){var t,r="",n=0,a=e.nodeType;if(!a){while(t=e[n++]){r+=i(t)}}else if(a===1||a===9||a===11){if(typeof e.textContent==="string"){return e.textContent}else{for(e=e.firstChild;e;e=e.nextSibling){r+=i(e)}}}else if(a===3||a===4){return e.nodeValue}return r};b=se.selectors={cacheLength:50,createPseudo:ce,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(te,re);e[3]=(e[3]||e[4]||e[5]||"").replace(te,re);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){se.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+(e[7]+e[8]||e[3]==="odd")}else if(e[3]){se.error(e[0])}return e},PSEUDO:function(e){var t,r=!e[6]&&e[2];if(X["CHILD"].test(e[0])){return null}if(e[3]){e[2]=e[4]||e[5]||""}else if(r&&G.test(r)&&(t=p(r,true))&&(t=r.indexOf(")",r.length-t)-r.length)){e[0]=e[0].slice(0,t);e[2]=r.slice(0,t)}return e.slice(0,3)}},filter:{TAG:function(e){var t=e.replace(te,re).toLowerCase();return e==="*"?function(){return true}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=_[e+" "];return t||(t=new RegExp("(^|"+N+")"+e+"("+N+"|$)"))&&_(e,function(e){return t.test(typeof e.className==="string"&&e.className||typeof e.getAttribute!=="undefined"&&e.getAttribute("class")||"")})},ATTR:function(r,n,a){return function(e){var t=se.attr(e,r);if(t==null){return n==="!="}if(!n){return true}t+="";return n==="="?t===a:n==="!="?t!==a:n==="^="?a&&t.indexOf(a)===0:n==="*="?a&&t.indexOf(a)>-1:n==="$="?a&&t.slice(-a.length)===a:n==="~="?(" "+t.replace(H," ")+" ").indexOf(a)>-1:n==="|="?t===a||t.slice(0,a.length+1)===a+"-":false}},CHILD:function(p,e,t,v,g){var m=p.slice(0,3)!=="nth",_=p.slice(-4)!=="last",y=e==="of-type";return v===1&&g===0?function(e){return!!e.parentNode}:function(e,t,r){var n,a,i,o,s,l,c=m!==_?"nextSibling":"previousSibling",u=e.parentNode,f=y&&e.nodeName.toLowerCase(),d=!r&&!y,h=false;if(u){if(m){while(c){o=e;while(o=o[c]){if(y?o.nodeName.toLowerCase()===f:o.nodeType===1){return false}}l=c=p==="only"&&!l&&"nextSibling"}return true}l=[_?u.firstChild:u.lastChild];if(_&&d){o=u;i=o[k]||(o[k]={});a=i[o.uniqueID]||(i[o.uniqueID]={});n=a[p]||[];s=n[0]===M&&n[1];h=s&&n[2];o=s&&u.childNodes[s];while(o=++s&&o&&o[c]||(h=s=0)||l.pop()){if(o.nodeType===1&&++h&&o===e){a[p]=[M,s,h];break}}}else{if(d){o=e;i=o[k]||(o[k]={});a=i[o.uniqueID]||(i[o.uniqueID]={});n=a[p]||[];s=n[0]===M&&n[1];h=s}if(h===false){while(o=++s&&o&&o[c]||(h=s=0)||l.pop()){if((y?o.nodeName.toLowerCase()===f:o.nodeType===1)&&++h){if(d){i=o[k]||(o[k]={});a=i[o.uniqueID]||(i[o.uniqueID]={});a[p]=[M,h]}if(o===e){break}}}}}h-=g;return h===v||h%v===0&&h/v>=0}}},PSEUDO:function(e,i){var t,o=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);if(o[k]){return o(i)}if(o.length>1){t=[e,e,"",i];return b.setFilters.hasOwnProperty(e.toLowerCase())?ce(function(e,t){var r,n=o(e,i),a=n.length;while(a--){r=R(e,n[a]);e[r]=!(t[r]=n[a])}}):function(e){return o(e,0,t)}}return o}},pseudos:{not:ce(function(e){var n=[],a=[],s=f(e.replace(U,"$1"));return s[k]?ce(function(e,t,r,n){var a,i=s(e,null,n,[]),o=e.length;while(o--){if(a=i[o]){e[o]=!(t[o]=a)}}}):function(e,t,r){n[0]=e;s(n,null,r,a);n[0]=null;return!a.pop()}}),has:ce(function(t){return function(e){return se(t,e).length>0}}),contains:ce(function(t){t=t.replace(te,re);return function(e){return(e.textContent||i(e)).indexOf(t)>-1}}),lang:ce(function(r){if(!W.test(r||"")){se.error("unsupported lang: "+r)}r=r.replace(te,re).toLowerCase();return function(e){var t;do{if(t=T?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang")){t=t.toLowerCase();return t===r||t.indexOf(r+"-")===0}}while((e=e.parentNode)&&e.nodeType===1);return false}}),target:function(e){var t=r.location&&r.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===o},focus:function(e){return e===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ve(false),disabled:ve(true),checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeType<6){return false}}return true},parent:function(e){return!b.pseudos["empty"](e)},header:function(e){return $.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:ge(function(){return[0]}),last:ge(function(e,t){return[t-1]}),eq:ge(function(e,t,r){return[r<0?r+t:r]}),even:ge(function(e,t){var r=0;for(;r<t;r+=2){e.push(r)}return e}),odd:ge(function(e,t){var r=1;for(;r<t;r+=2){e.push(r)}return e}),lt:ge(function(e,t,r){var n=r<0?r+t:r>t?t:r;for(;--n>=0;){e.push(n)}return e}),gt:ge(function(e,t,r){var n=r<0?r+t:r;for(;++n<t;){e.push(n)}return e})}};b.pseudos["nth"]=b.pseudos["eq"];for(e in{radio:true,checkbox:true,file:true,password:true,image:true}){b.pseudos[e]=he(e)}for(e in{submit:true,reset:true}){b.pseudos[e]=pe(e)}function _e(){}_e.prototype=b.filters=b.pseudos;b.setFilters=new _e;p=se.tokenize=function(e,t){var r,n,a,i,o,s,l,c=y[e+" "];if(c){return t?0:c.slice(0)}o=e;s=[];l=b.preFilter;while(o){if(!r||(n=V.exec(o))){if(n){o=o.slice(n[0].length)||o}s.push(a=[])}r=false;if(n=q.exec(o)){r=n.shift();a.push({value:r,type:n[0].replace(U," ")});o=o.slice(r.length)}for(i in b.filter){if((n=X[i].exec(o))&&(!l[i]||(n=l[i](n)))){r=n.shift();a.push({value:r,type:i,matches:n});o=o.slice(r.length)}}if(!r){break}}return t?o.length:o?se.error(e):y(e,s).slice(0)};function ye(e){var t=0,r=e.length,n="";for(;t<r;t++){n+=e[t].value}return n}function be(s,e,t){var l=e.dir,c=e.next,u=c||l,f=t&&u==="parentNode",d=n++;return e.first?function(e,t,r){while(e=e[l]){if(e.nodeType===1||f){return s(e,t,r)}}return false}:function(e,t,r){var n,a,i,o=[M,d];if(r){while(e=e[l]){if(e.nodeType===1||f){if(s(e,t,r)){return true}}}}else{while(e=e[l]){if(e.nodeType===1||f){i=e[k]||(e[k]={});a=i[e.uniqueID]||(i[e.uniqueID]={});if(c&&c===e.nodeName.toLowerCase()){e=e[l]||e}else if((n=a[u])&&n[0]===M&&n[1]===d){return o[2]=n[2]}else{a[u]=o;if(o[2]=s(e,t,r)){return true}}}}}return false}}function xe(a){return a.length>1?function(e,t,r){var n=a.length;while(n--){if(!a[n](e,t,r)){return false}}return true}:a[0]}function we(e,t,r){var n=0,a=t.length;for(;n<a;n++){se(e,t[n],r)}return r}function Ae(e,t,r,n,a){var i,o=[],s=0,l=e.length,c=t!=null;for(;s<l;s++){if(i=e[s]){if(!r||r(i,n,a)){o.push(i);if(c){t.push(s)}}}}return o}function Te(h,p,v,g,m,e){if(g&&!g[k]){g=Te(g)}if(m&&!m[k]){m=Te(m,e)}return ce(function(e,t,r,n){var a,i,o,s=[],l=[],c=t.length,u=e||we(p||"*",r.nodeType?[r]:r,[]),f=h&&(e||!p)?Ae(u,s,h,r,n):u,d=v?m||(e?h:c||g)?[]:t:f;if(v){v(f,d,r,n)}if(g){a=Ae(d,l);g(a,[],r,n);i=a.length;while(i--){if(o=a[i]){d[l[i]]=!(f[l[i]]=o)}}}if(e){if(m||h){if(m){a=[];i=d.length;while(i--){if(o=d[i]){a.push(f[i]=o)}}m(null,d=[],a,n)}i=d.length;while(i--){if((o=d[i])&&(a=m?R(e,o):s[i])>-1){e[a]=!(t[a]=o)}}}}else{d=Ae(d===t?d.splice(c,d.length):d);if(m){m(null,t,d,n)}else{P.apply(t,d)}}})}function ke(e){var a,t,r,n=e.length,i=b.relative[e[0].type],o=i||b.relative[" "],s=i?1:0,l=be(function(e){return e===a},o,true),c=be(function(e){return R(a,e)>-1},o,true),u=[function(e,t,r){var n=!i&&(r||t!==x)||((a=t).nodeType?l(e,t,r):c(e,t,r));a=null;return n}];for(;s<n;s++){if(t=b.relative[e[s].type]){u=[be(xe(u),t)]}else{t=b.filter[e[s].type].apply(null,e[s].matches);if(t[k]){r=++s;for(;r<n;r++){if(b.relative[e[r].type]){break}}return Te(s>1&&xe(u),s>1&&ye(e.slice(0,s-1).concat({value:e[s-2].type===" "?"*":""})).replace(U,"$1"),t,s<r&&ke(e.slice(s,r)),r<n&&ke(e=e.slice(r)),r<n&&ye(e))}u.push(t)}}return xe(u)}function Me(g,m){var _=m.length>0,y=g.length>0,e=function(e,t,r,n,a){var i,o,s,l=0,c="0",u=e&&[],f=[],d=x,h=e||y&&b.find["TAG"]("*",a),p=M+=d==null?1:Math.random()||.1,v=h.length;if(a){x=t==A||t||a}for(;c!==v&&(i=h[c])!=null;c++){if(y&&i){o=0;if(!t&&i.ownerDocument!=A){w(i);r=!T}while(s=g[o++]){if(s(i,t||A,r)){n.push(i);break}}if(a){M=p}}if(_){if(i=!s&&i){l--}if(e){u.push(i)}}}l+=c;if(_&&c!==l){o=0;while(s=m[o++]){s(u,f,t,r)}if(e){if(l>0){while(c--){if(!(u[c]||f[c])){f[c]=D.call(n)}}}f=Ae(f)}P.apply(n,f);if(a&&!e&&f.length>0&&l+m.length>1){se.uniqueSort(n)}}if(a){M=p;x=d}return u};return _?ce(e):e}f=se.compile=function(e,t){var r,n=[],a=[],i=S[e+" "];if(!i){if(!t){t=p(e)}r=t.length;while(r--){i=ke(t[r]);if(i[k]){n.push(i)}else{a.push(i)}}i=S(e,Me(a,n));i.selector=e}return i};v=se.select=function(e,t,r,n){var a,i,o,s,l,c=typeof e==="function"&&e,u=!n&&p(e=c.selector||e);r=r||[];if(u.length===1){i=u[0]=u[0].slice(0);if(i.length>2&&(o=i[0]).type==="ID"&&t.nodeType===9&&T&&b.relative[i[1].type]){t=(b.find["ID"](o.matches[0].replace(te,re),t)||[])[0];if(!t){return r}else if(c){t=t.parentNode}e=e.slice(i.shift().value.length)}a=X["needsContext"].test(e)?0:i.length;while(a--){o=i[a];if(b.relative[s=o.type]){break}if(l=b.find[s]){if(n=l(o.matches[0].replace(te,re),ee.test(i[0].type)&&me(t.parentNode)||t)){i.splice(a,1);e=n.length&&ye(i);if(!e){P.apply(r,n);return r}break}}}}(c||f(e,u))(n,t,!T,r,!t||ee.test(e)&&me(t.parentNode)||t);return r};h.sortStable=k.split("").sort(L).join("")===k;h.detectDuplicates=!!c;w();h.sortDetached=ue(function(e){return e.compareDocumentPosition(A.createElement("fieldset"))&1});if(!ue(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){fe("type|href|height|width",function(e,t,r){if(!r){return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}})}if(!h.attributes||!ue(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){fe("value",function(e,t,r){if(!r&&e.nodeName.toLowerCase()==="input"){return e.defaultValue}})}if(!ue(function(e){return e.getAttribute("disabled")==null})){fe(z,function(e,t,r){var n;if(!r){return e[t]===true?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}})}return se}(A);k.find=h;k.expr=h.selectors;k.expr[":"]=k.expr.pseudos;k.uniqueSort=k.unique=h.uniqueSort;k.text=h.getText;k.isXMLDoc=h.isXML;k.contains=h.contains;k.escapeSelector=h.escape;var p=function(e,t,r){var n=[],a=r!==undefined;while((e=e[t])&&e.nodeType!==9){if(e.nodeType===1){if(a&&k(e).is(r)){break}n.push(e)}}return n};var w=function(e,t){var r=[];for(;e;e=e.nextSibling){if(e.nodeType===1&&e!==t){r.push(e)}}return r};var M=k.expr.match.needsContext;function S(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var C=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function L(e,r,n){if(_(r)){return k.grep(e,function(e,t){return!!r.call(e,t,e)!==n})}if(r.nodeType){return k.grep(e,function(e){return e===r!==n})}if(typeof r!=="string"){return k.grep(e,function(e){return a.call(r,e)>-1!==n})}return k.filter(r,e,n)}k.filter=function(e,t,r){var n=t[0];if(r){e=":not("+e+")"}if(t.length===1&&n.nodeType===1){return k.find.matchesSelector(n,e)?[n]:[]}return k.find.matches(e,k.grep(t,function(e){return e.nodeType===1}))};k.fn.extend({find:function(e){var t,r,n=this.length,a=this;if(typeof e!=="string"){return this.pushStack(k(e).filter(function(){for(t=0;t<n;t++){if(k.contains(a[t],this)){return true}}}))}r=this.pushStack([]);for(t=0;t<n;t++){k.find(e,a[t],r)}return n>1?k.uniqueSort(r):r},filter:function(e){return this.pushStack(L(this,e||[],false))},not:function(e){return this.pushStack(L(this,e||[],true))},is:function(e){return!!L(this,typeof e==="string"&&M.test(e)?k(e):e||[],false).length}});var E,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,O=k.fn.init=function(e,t,r){var n,a;if(!e){return this}r=r||E;if(typeof e==="string"){if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3){n=[null,e,null]}else{n=D.exec(e)}if(n&&(n[1]||!t)){if(n[1]){t=t instanceof k?t[0]:t;k.merge(this,k.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:T,true));if(C.test(n[1])&&k.isPlainObject(t)){for(n in t){if(_(this[n])){this[n](t[n])}else{this.attr(n,t[n])}}}return this}else{a=T.getElementById(n[2]);if(a){this[0]=a;this.length=1}return this}}else if(!t||t.jquery){return(t||r).find(e)}else{return this.constructor(t).find(e)}}else if(e.nodeType){this[0]=e;this.length=1;return this}else if(_(e)){return r.ready!==undefined?r.ready(e):e(k)}return k.makeArray(e,this)};O.prototype=k.fn;E=k(T);var P=/^(?:parents|prev(?:Until|All))/,I={children:true,contents:true,next:true,prev:true};k.fn.extend({has:function(e){var t=k(e,this),r=t.length;return this.filter(function(){var e=0;for(;e<r;e++){if(k.contains(this,t[e])){return true}}})},closest:function(e,t){var r,n=0,a=this.length,i=[],o=typeof e!=="string"&&k(e);if(!M.test(e)){for(;n<a;n++){for(r=this[n];r&&r!==t;r=r.parentNode){if(r.nodeType<11&&(o?o.index(r)>-1:r.nodeType===1&&k.find.matchesSelector(r,e))){i.push(r);break}}}}return this.pushStack(i.length>1?k.uniqueSort(i):i)},index:function(e){if(!e){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof e==="string"){return a.call(k(e),this[0])}return a.call(this,e.jquery?e[0]:e)},add:function(e,t){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function R(e,t){while((e=e[t])&&e.nodeType!==1){}return e}k.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return p(e,"parentNode")},parentsUntil:function(e,t,r){return p(e,"parentNode",r)},next:function(e){return R(e,"nextSibling")},prev:function(e){return R(e,"previousSibling")},nextAll:function(e){return p(e,"nextSibling")},prevAll:function(e){return p(e,"previousSibling")},nextUntil:function(e,t,r){return p(e,"nextSibling",r)},prevUntil:function(e,t,r){return p(e,"previousSibling",r)},siblings:function(e){return w((e.parentNode||{}).firstChild,e)},children:function(e){return w(e.firstChild)},contents:function(e){if(e.contentDocument!=null&&n(e.contentDocument)){return e.contentDocument}if(S(e,"template")){e=e.content||e}return k.merge([],e.childNodes)}},function(n,a){k.fn[n]=function(e,t){var r=k.map(this,a,e);if(n.slice(-5)!=="Until"){t=e}if(t&&typeof t==="string"){r=k.filter(t,r)}if(this.length>1){if(!I[n]){k.uniqueSort(r)}if(P.test(n)){r.reverse()}}return this.pushStack(r)}});var z=/[^\x20\t\r\n\f]+/g;function N(e){var r={};k.each(e.match(z)||[],function(e,t){r[t]=true});return r}k.Callbacks=function(n){n=typeof n==="string"?N(n):k.extend({},n);var r,e,t,a,i=[],o=[],s=-1,l=function(){a=a||n.once;t=r=true;for(;o.length;s=-1){e=o.shift();while(++s<i.length){if(i[s].apply(e[0],e[1])===false&&n.stopOnFalse){s=i.length;e=false}}}if(!n.memory){e=false}r=false;if(a){if(e){i=[]}else{i=""}}},c={add:function(){if(i){if(e&&!r){s=i.length-1;o.push(e)}(function r(e){k.each(e,function(e,t){if(_(t)){if(!n.unique||!c.has(t)){i.push(t)}}else if(t&&t.length&&x(t)!=="string"){r(t)}})})(arguments);if(e&&!r){l()}}return this},remove:function(){k.each(arguments,function(e,t){var r;while((r=k.inArray(t,i,r))>-1){i.splice(r,1);if(r<=s){s--}}});return this},has:function(e){return e?k.inArray(e,i)>-1:i.length>0},empty:function(){if(i){i=[]}return this},disable:function(){a=o=[];i=e="";return this},disabled:function(){return!i},lock:function(){a=o=[];if(!e&&!r){i=e=""}return this},locked:function(){return!!a},fireWith:function(e,t){if(!a){t=t||[];t=[e,t.slice?t.slice():t];o.push(t);if(!r){l()}}return this},fire:function(){c.fireWith(this,arguments);return this},fired:function(){return!!t}};return c};function F(e){return e}function j(e){throw e}function B(e,t,r,n){var a;try{if(e&&_(a=e.promise)){a.call(e).done(t).fail(r)}else if(e&&_(a=e.then)){a.call(e,t,r)}else{t.apply(undefined,[e].slice(n))}}catch(e){r.apply(undefined,[e])}}k.extend({Deferred:function(e){var i=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],a="pending",o={state:function(){return a},always:function(){s.done(arguments).fail(arguments);return this},catch:function(e){return o.then(null,e)},pipe:function(){var a=arguments;return k.Deferred(function(n){k.each(i,function(e,t){var r=_(a[t[4]])&&a[t[4]];s[t[1]](function(){var e=r&&r.apply(this,arguments);if(e&&_(e.promise)){e.promise().progress(n.notify).done(n.resolve).fail(n.reject)}else{n[t[0]+"With"](this,r?[e]:arguments)}})});a=null}).promise()},then:function(t,r,n){var l=0;function c(a,i,o,s){return function(){var r=this,n=arguments,e=function(){var e,t;if(a<l){return}e=o.apply(r,n);if(e===i.promise()){throw new TypeError("Thenable self-resolution")}t=e&&(typeof e==="object"||typeof e==="function")&&e.then;if(_(t)){if(s){t.call(e,c(l,i,F,s),c(l,i,j,s))}else{l++;t.call(e,c(l,i,F,s),c(l,i,j,s),c(l,i,F,i.notifyWith))}}else{if(o!==F){r=undefined;n=[e]}(s||i.resolveWith)(r,n)}},t=s?e:function(){try{e()}catch(e){if(k.Deferred.exceptionHook){k.Deferred.exceptionHook(e,t.stackTrace)}if(a+1>=l){if(o!==j){r=undefined;n=[e]}i.rejectWith(r,n)}}};if(a){t()}else{if(k.Deferred.getStackHook){t.stackTrace=k.Deferred.getStackHook()}A.setTimeout(t)}}}return k.Deferred(function(e){i[0][3].add(c(0,e,_(n)?n:F,e.notifyWith));i[1][3].add(c(0,e,_(t)?t:F));i[2][3].add(c(0,e,_(r)?r:j))}).promise()},promise:function(e){return e!=null?k.extend(e,o):o}},s={};k.each(i,function(e,t){var r=t[2],n=t[5];o[t[1]]=r.add;if(n){r.add(function(){a=n},i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock)}r.add(t[3].fire);s[t[0]]=function(){s[t[0]+"With"](this===s?undefined:this,arguments);return this};s[t[0]+"With"]=r.fireWith});o.promise(s);if(e){e.call(s,s)}return s},when:function(e){var r=arguments.length,t=r,n=Array(t),a=s.call(arguments),i=k.Deferred(),o=function(t){return function(e){n[t]=this;a[t]=arguments.length>1?s.call(arguments):e;if(!--r){i.resolveWith(n,a)}}};if(r<=1){B(e,i.done(o(t)).resolve,i.reject,!r);if(i.state()==="pending"||_(a[t]&&a[t].then)){return i.then()}}while(t--){B(a[t],o(t),i.reject)}return i.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(e,t){if(A.console&&A.console.warn&&e&&H.test(e.name)){A.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)}};k.readyException=function(e){A.setTimeout(function(){throw e})};var U=k.Deferred();k.fn.ready=function(e){U.then(e).catch(function(e){k.readyException(e)});return this};k.extend({isReady:false,readyWait:1,ready:function(e){if(e===true?--k.readyWait:k.isReady){return}k.isReady=true;if(e!==true&&--k.readyWait>0){return}U.resolveWith(T,[k])}});k.ready.then=U.then;function V(){T.removeEventListener("DOMContentLoaded",V);A.removeEventListener("load",V);k.ready()}if(T.readyState==="complete"||T.readyState!=="loading"&&!T.documentElement.doScroll){A.setTimeout(k.ready)}else{T.addEventListener("DOMContentLoaded",V);A.addEventListener("load",V)}var q=function(e,t,r,n,a,i,o){var s=0,l=e.length,c=r==null;if(x(r)==="object"){a=true;for(s in r){q(e,t,s,r[s],true,i,o)}}else if(n!==undefined){a=true;if(!_(n)){o=true}if(c){if(o){t.call(e,n);t=null}else{c=t;t=function(e,t,r){return c.call(k(e),r)}}}if(t){for(;s<l;s++){t(e[s],r,o?n:n.call(e[s],s,t(e[s],r)))}}}if(a){return e}if(c){return t.call(e)}return l?t(e[0],r):i};var Y=/^-ms-/,G=/-([a-z])/g;function W(e,t){return t.toUpperCase()}function X(e){return e.replace(Y,"ms-").replace(G,W)}var Z=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function J(){this.expando=k.expando+J.uid++}J.uid=1;J.prototype={cache:function(e){var t=e[this.expando];if(!t){t={};if(Z(e)){if(e.nodeType){e[this.expando]=t}else{Object.defineProperty(e,this.expando,{value:t,configurable:true})}}}return t},set:function(e,t,r){var n,a=this.cache(e);if(typeof t==="string"){a[X(t)]=r}else{for(n in t){a[X(n)]=t[n]}}return a},get:function(e,t){return t===undefined?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,r){if(t===undefined||t&&typeof t==="string"&&r===undefined){return this.get(e,t)}this.set(e,t,r);return r!==undefined?r:t},remove:function(e,t){var r,n=e[this.expando];if(n===undefined){return}if(t!==undefined){if(Array.isArray(t)){t=t.map(X)}else{t=X(t);t=t in n?[t]:t.match(z)||[]}r=t.length;while(r--){delete n[t[r]]}}if(t===undefined||k.isEmptyObject(n)){if(e.nodeType){e[this.expando]=undefined}else{delete e[this.expando]}}},hasData:function(e){var t=e[this.expando];return t!==undefined&&!k.isEmptyObject(t)}};var $=new J;var Q=new J;var K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ee=/[A-Z]/g;function te(e){if(e==="true"){return true}if(e==="false"){return false}if(e==="null"){return null}if(e===+e+""){return+e}if(K.test(e)){return JSON.parse(e)}return e}function re(e,t,r){var n;if(r===undefined&&e.nodeType===1){n="data-"+t.replace(ee,"-$&").toLowerCase();r=e.getAttribute(n);if(typeof r==="string"){try{r=te(r)}catch(e){}Q.set(e,t,r)}else{r=undefined}}return r}k.extend({hasData:function(e){return Q.hasData(e)||$.hasData(e)},data:function(e,t,r){return Q.access(e,t,r)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,r){return $.access(e,t,r)},_removeData:function(e,t){$.remove(e,t)}});k.fn.extend({data:function(r,e){var t,n,a,i=this[0],o=i&&i.attributes;if(r===undefined){if(this.length){a=Q.get(i);if(i.nodeType===1&&!$.get(i,"hasDataAttrs")){t=o.length;while(t--){if(o[t]){n=o[t].name;if(n.indexOf("data-")===0){n=X(n.slice(5));re(i,n,a[n])}}}$.set(i,"hasDataAttrs",true)}}return a}if(typeof r==="object"){return this.each(function(){Q.set(this,r)})}return q(this,function(e){var t;if(i&&e===undefined){t=Q.get(i,r);if(t!==undefined){return t}t=re(i,r);if(t!==undefined){return t}return}this.each(function(){Q.set(this,r,e)})},null,e,arguments.length>1,null,true)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}});k.extend({queue:function(e,t,r){var n;if(e){t=(t||"fx")+"queue";n=$.get(e,t);if(r){if(!n||Array.isArray(r)){n=$.access(e,t,k.makeArray(r))}else{n.push(r)}}return n||[]}},dequeue:function(e,t){t=t||"fx";var r=k.queue(e,t),n=r.length,a=r.shift(),i=k._queueHooks(e,t),o=function(){k.dequeue(e,t)};if(a==="inprogress"){a=r.shift();n--}if(a){if(t==="fx"){r.unshift("inprogress")}delete i.stop;a.call(e,o,i)}if(!n&&i){i.empty.fire()}},_queueHooks:function(e,t){var r=t+"queueHooks";return $.get(e,r)||$.access(e,r,{empty:k.Callbacks("once memory").add(function(){$.remove(e,[t+"queue",r])})})}});k.fn.extend({queue:function(t,r){var e=2;if(typeof t!=="string"){r=t;t="fx";e--}if(arguments.length<e){return k.queue(this[0],t)}return r===undefined?this:this.each(function(){var e=k.queue(this,t,r);k._queueHooks(this,t);if(t==="fx"&&e[0]!=="inprogress"){k.dequeue(this,t)}})},dequeue:function(e){return this.each(function(){k.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,n=1,a=k.Deferred(),i=this,o=this.length,s=function(){if(!--n){a.resolveWith(i,[i])}};if(typeof e!=="string"){t=e;e=undefined}e=e||"fx";while(o--){r=$.get(i[o],e+"queueHooks");if(r&&r.empty){n++;r.empty.add(s)}}s();return a.promise(t)}});var ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var ae=new RegExp("^(?:([+-])=|)("+ne+")([a-z%]*)$","i");var ie=["Top","Right","Bottom","Left"];var oe=T.documentElement;var se=function(e){return k.contains(e.ownerDocument,e)},le={composed:true};if(oe.getRootNode){se=function(e){return k.contains(e.ownerDocument,e)||e.getRootNode(le)===e.ownerDocument}}var ce=function(e,t){e=t||e;return e.style.display==="none"||e.style.display===""&&se(e)&&k.css(e,"display")==="none"};function ue(e,t,r,n){var a,i,o=20,s=n?function(){return n.cur()}:function(){return k.css(e,t,"")},l=s(),c=r&&r[3]||(k.cssNumber[t]?"":"px"),u=e.nodeType&&(k.cssNumber[t]||c!=="px"&&+l)&&ae.exec(k.css(e,t));if(u&&u[3]!==c){l=l/2;c=c||u[3];u=+l||1;while(o--){k.style(e,t,u+c);if((1-i)*(1-(i=s()/l||.5))<=0){o=0}u=u/i}u=u*2;k.style(e,t,u+c);r=r||[]}if(r){u=+u||+l||0;a=r[1]?u+(r[1]+1)*r[2]:+r[2];if(n){n.unit=c;n.start=u;n.end=a}}return a}var fe={};function de(e){var t,r=e.ownerDocument,n=e.nodeName,a=fe[n];if(a){return a}t=r.body.appendChild(r.createElement(n));a=k.css(t,"display");t.parentNode.removeChild(t);if(a==="none"){a="block"}fe[n]=a;return a}function he(e,t){var r,n,a=[],i=0,o=e.length;for(;i<o;i++){n=e[i];if(!n.style){continue}r=n.style.display;if(t){if(r==="none"){a[i]=$.get(n,"display")||null;if(!a[i]){n.style.display=""}}if(n.style.display===""&&ce(n)){a[i]=de(n)}}else{if(r!=="none"){a[i]="none";$.set(n,"display",r)}}}for(i=0;i<o;i++){if(a[i]!=null){e[i].style.display=a[i]}}return e}k.fn.extend({show:function(){return he(this,true)},hide:function(){return he(this)},toggle:function(e){if(typeof e==="boolean"){return e?this.show():this.hide()}return this.each(function(){if(ce(this)){k(this).show()}else{k(this).hide()}})}});var pe=/^(?:checkbox|radio)$/i;var ve=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i;var ge=/^$|^module$|\/(?:java|ecma)script/i;(function(){var e=T.createDocumentFragment(),t=e.appendChild(T.createElement("div")),r=T.createElement("input");r.setAttribute("type","radio");r.setAttribute("checked","checked");r.setAttribute("name","t");t.appendChild(r);m.checkClone=t.cloneNode(true).cloneNode(true).lastChild.checked;t.innerHTML="<textarea>x</textarea>";m.noCloneChecked=!!t.cloneNode(true).lastChild.defaultValue;t.innerHTML="<option></option>";m.option=!!t.lastChild})();var me={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};me.tbody=me.tfoot=me.colgroup=me.caption=me.thead;me.th=me.td;if(!m.option){me.optgroup=me.option=[1,"<select multiple='multiple'>","</select>"]}function _e(e,t){var r;if(typeof e.getElementsByTagName!=="undefined"){r=e.getElementsByTagName(t||"*")}else if(typeof e.querySelectorAll!=="undefined"){r=e.querySelectorAll(t||"*")}else{r=[]}if(t===undefined||t&&S(e,t)){return k.merge([e],r)}return r}function ye(e,t){var r=0,n=e.length;for(;r<n;r++){$.set(e[r],"globalEval",!t||$.get(t[r],"globalEval"))}}var be=/<|&#?\w+;/;function xe(e,t,r,n,a){var i,o,s,l,c,u,f=t.createDocumentFragment(),d=[],h=0,p=e.length;for(;h<p;h++){i=e[h];if(i||i===0){if(x(i)==="object"){k.merge(d,i.nodeType?[i]:i)}else if(!be.test(i)){d.push(t.createTextNode(i))}else{o=o||f.appendChild(t.createElement("div"));s=(ve.exec(i)||["",""])[1].toLowerCase();l=me[s]||me._default;o.innerHTML=l[1]+k.htmlPrefilter(i)+l[2];u=l[0];while(u--){o=o.lastChild}k.merge(d,o.childNodes);o=f.firstChild;o.textContent=""}}}f.textContent="";h=0;while(i=d[h++]){if(n&&k.inArray(i,n)>-1){if(a){a.push(i)}continue}c=se(i);o=_e(f.appendChild(i),"script");if(c){ye(o)}if(r){u=0;while(i=o[u++]){if(ge.test(i.type||"")){r.push(i)}}}}return f}var we=/^([^.]*)(?:\.(.+)|)/;function Ae(){return true}function Te(){return false}function ke(e,t){return e===Me()===(t==="focus")}function Me(){try{return T.activeElement}catch(e){}}function Se(e,t,r,n,a,i){var o,s;if(typeof t==="object"){if(typeof r!=="string"){n=n||r;r=undefined}for(s in t){Se(e,s,r,n,t[s],i)}return e}if(n==null&&a==null){a=r;n=r=undefined}else if(a==null){if(typeof r==="string"){a=n;n=undefined}else{a=n;n=r;r=undefined}}if(a===false){a=Te}else if(!a){return e}if(i===1){o=a;a=function(e){k().off(e);return o.apply(this,arguments)};a.guid=o.guid||(o.guid=k.guid++)}return e.each(function(){k.event.add(this,t,a,n,r)})}k.event={global:{},add:function(t,e,r,n,a){var i,o,s,l,c,u,f,d,h,p,v,g=$.get(t);if(!Z(t)){return}if(r.handler){i=r;r=i.handler;a=i.selector}if(a){k.find.matchesSelector(oe,a)}if(!r.guid){r.guid=k.guid++}if(!(l=g.events)){l=g.events=Object.create(null)}if(!(o=g.handle)){o=g.handle=function(e){return typeof k!=="undefined"&&k.event.triggered!==e.type?k.event.dispatch.apply(t,arguments):undefined}}e=(e||"").match(z)||[""];c=e.length;while(c--){s=we.exec(e[c])||[];h=v=s[1];p=(s[2]||"").split(".").sort();if(!h){continue}f=k.event.special[h]||{};h=(a?f.delegateType:f.bindType)||h;f=k.event.special[h]||{};u=k.extend({type:h,origType:v,data:n,handler:r,guid:r.guid,selector:a,needsContext:a&&k.expr.match.needsContext.test(a),namespace:p.join(".")},i);if(!(d=l[h])){d=l[h]=[];d.delegateCount=0;if(!f.setup||f.setup.call(t,n,p,o)===false){if(t.addEventListener){t.addEventListener(h,o)}}}if(f.add){f.add.call(t,u);if(!u.handler.guid){u.handler.guid=r.guid}}if(a){d.splice(d.delegateCount++,0,u)}else{d.push(u)}k.event.global[h]=true}},remove:function(e,t,r,n,a){var i,o,s,l,c,u,f,d,h,p,v,g=$.hasData(e)&&$.get(e);if(!g||!(l=g.events)){return}t=(t||"").match(z)||[""];c=t.length;while(c--){s=we.exec(t[c])||[];h=v=s[1];p=(s[2]||"").split(".").sort();if(!h){for(h in l){k.event.remove(e,h+t[c],r,n,true)}continue}f=k.event.special[h]||{};h=(n?f.delegateType:f.bindType)||h;d=l[h]||[];s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)");o=i=d.length;while(i--){u=d[i];if((a||v===u.origType)&&(!r||r.guid===u.guid)&&(!s||s.test(u.namespace))&&(!n||n===u.selector||n==="**"&&u.selector)){d.splice(i,1);if(u.selector){d.delegateCount--}if(f.remove){f.remove.call(e,u)}}}if(o&&!d.length){if(!f.teardown||f.teardown.call(e,p,g.handle)===false){k.removeEvent(e,h,g.handle)}delete l[h]}}if(k.isEmptyObject(l)){$.remove(e,"handle events")}},dispatch:function(e){var t,r,n,a,i,o,s=new Array(arguments.length),l=k.event.fix(e),c=($.get(this,"events")||Object.create(null))[l.type]||[],u=k.event.special[l.type]||{};s[0]=l;for(t=1;t<arguments.length;t++){s[t]=arguments[t]}l.delegateTarget=this;if(u.preDispatch&&u.preDispatch.call(this,l)===false){return}o=k.event.handlers.call(this,l,c);t=0;while((a=o[t++])&&!l.isPropagationStopped()){l.currentTarget=a.elem;r=0;while((i=a.handlers[r++])&&!l.isImmediatePropagationStopped()){if(!l.rnamespace||i.namespace===false||l.rnamespace.test(i.namespace)){l.handleObj=i;l.data=i.data;n=((k.event.special[i.origType]||{}).handle||i.handler).apply(a.elem,s);if(n!==undefined){if((l.result=n)===false){l.preventDefault();l.stopPropagation()}}}}}if(u.postDispatch){u.postDispatch.call(this,l)}return l.result},handlers:function(e,t){var r,n,a,i,o,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!(e.type==="click"&&e.button>=1)){for(;c!==this;c=c.parentNode||this){if(c.nodeType===1&&!(e.type==="click"&&c.disabled===true)){i=[];o={};for(r=0;r<l;r++){n=t[r];a=n.selector+" ";if(o[a]===undefined){o[a]=n.needsContext?k(a,this).index(c)>-1:k.find(a,this,null,[c]).length}if(o[a]){i.push(n)}}if(i.length){s.push({elem:c,handlers:i})}}}}c=this;if(l<t.length){s.push({elem:c,handlers:t.slice(l)})}return s},addProp:function(t,e){Object.defineProperty(k.Event.prototype,t,{enumerable:true,configurable:true,get:_(e)?function(){if(this.originalEvent){return e(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[t]}},set:function(e){Object.defineProperty(this,t,{enumerable:true,configurable:true,writable:true,value:e})}})},fix:function(e){return e[k.expando]?e:new k.Event(e)},special:{load:{noBubble:true},click:{setup:function(e){var t=this||e;if(pe.test(t.type)&&t.click&&S(t,"input")){Ce(t,"click",Ae)}return false},trigger:function(e){var t=this||e;if(pe.test(t.type)&&t.click&&S(t,"input")){Ce(t,"click")}return true},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&S(t,"input")&&$.get(t,"click")||S(t,"a")}},beforeunload:{postDispatch:function(e){if(e.result!==undefined&&e.originalEvent){e.originalEvent.returnValue=e.result}}}}};function Ce(e,a,i){if(!i){if($.get(e,a)===undefined){k.event.add(e,a,Ae)}return}$.set(e,a,false);k.event.add(e,a,{namespace:false,handler:function(e){var t,r,n=$.get(this,a);if(e.isTrigger&1&&this[a]){if(!n.length){n=s.call(arguments);$.set(this,a,n);t=i(this,a);this[a]();r=$.get(this,a);if(n!==r||t){$.set(this,a,false)}else{r={}}if(n!==r){e.stopImmediatePropagation();e.preventDefault();return r&&r.value}}else if((k.event.special[a]||{}).delegateType){e.stopPropagation()}}else if(n.length){$.set(this,a,{value:k.event.trigger(k.extend(n[0],k.Event.prototype),n.slice(1),this)});e.stopImmediatePropagation()}}})}k.removeEvent=function(e,t,r){if(e.removeEventListener){e.removeEventListener(t,r)}};k.Event=function(e,t){if(!(this instanceof k.Event)){return new k.Event(e,t)}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.returnValue===false?Ae:Te;this.target=e.target&&e.target.nodeType===3?e.target.parentNode:e.target;this.currentTarget=e.currentTarget;this.relatedTarget=e.relatedTarget}else{this.type=e}if(t){k.extend(this,t)}this.timeStamp=e&&e.timeStamp||Date.now();this[k.expando]=true};k.Event.prototype={constructor:k.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ae;if(e&&!this.isSimulated){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ae;if(e&&!this.isSimulated){e.stopPropagation()}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ae;if(e&&!this.isSimulated){e.stopImmediatePropagation()}this.stopPropagation()}};k.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,char:true,code:true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:true},k.event.addProp);k.each({focus:"focusin",blur:"focusout"},function(e,t){k.event.special[e]={setup:function(){Ce(this,e,ke);return false},trigger:function(){Ce(this,e);return true},_default:function(){return true},delegateType:t}});k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){k.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,r=this,n=e.relatedTarget,a=e.handleObj;if(!n||n!==r&&!k.contains(r,n)){e.type=a.origType;t=a.handler.apply(this,arguments);e.type=i}return t}}});k.fn.extend({on:function(e,t,r,n){return Se(this,e,t,r,n)},one:function(e,t,r,n){return Se(this,e,t,r,n,1)},off:function(e,t,r){var n,a;if(e&&e.preventDefault&&e.handleObj){n=e.handleObj;k(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler);return this}if(typeof e==="object"){for(a in e){this.off(a,t,e[a])}return this}if(t===false||typeof t==="function"){r=t;t=undefined}if(r===false){r=Te}return this.each(function(){k.event.remove(this,e,r,t)})}});var Le=/<script|<style|<link/i,Ee=/checked\s*(?:[^=]|=\s*.checked.)/i,De=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Oe(e,t){if(S(e,"table")&&S(t.nodeType!==11?t:t.firstChild,"tr")){return k(e).children("tbody")[0]||e}return e}function Pe(e){e.type=(e.getAttribute("type")!==null)+"/"+e.type;return e}function Ie(e){if((e.type||"").slice(0,5)==="true/"){e.type=e.type.slice(5)}else{e.removeAttribute("type")}return e}function Re(e,t){var r,n,a,i,o,s,l;if(t.nodeType!==1){return}if($.hasData(e)){i=$.get(e);l=i.events;if(l){$.remove(t,"handle events");for(a in l){for(r=0,n=l[a].length;r<n;r++){k.event.add(t,a,l[a][r])}}}}if(Q.hasData(e)){o=Q.access(e);s=k.extend({},o);Q.set(t,s)}}function ze(e,t){var r=t.nodeName.toLowerCase();if(r==="input"&&pe.test(e.type)){t.checked=e.checked}else if(r==="input"||r==="textarea"){t.defaultValue=e.defaultValue}}function Ne(r,n,a,i){n=v(n);var e,t,o,s,l,c,u=0,f=r.length,d=f-1,h=n[0],p=_(h);if(p||f>1&&typeof h==="string"&&!m.checkClone&&Ee.test(h)){return r.each(function(e){var t=r.eq(e);if(p){n[0]=h.call(this,e,t.html())}Ne(t,n,a,i)})}if(f){e=xe(n,r[0].ownerDocument,false,r,i);t=e.firstChild;if(e.childNodes.length===1){e=t}if(t||i){o=k.map(_e(e,"script"),Pe);s=o.length;for(;u<f;u++){l=e;if(u!==d){l=k.clone(l,true,true);if(s){k.merge(o,_e(l,"script"))}}a.call(r[u],l,u)}if(s){c=o[o.length-1].ownerDocument;k.map(o,Ie);for(u=0;u<s;u++){l=o[u];if(ge.test(l.type||"")&&!$.access(l,"globalEval")&&k.contains(c,l)){if(l.src&&(l.type||"").toLowerCase()!=="module"){if(k._evalUrl&&!l.noModule){k._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c)}}else{b(l.textContent.replace(De,""),l,c)}}}}}}return r}function Fe(e,t,r){var n,a=t?k.filter(t,e):e,i=0;for(;(n=a[i])!=null;i++){if(!r&&n.nodeType===1){k.cleanData(_e(n))}if(n.parentNode){if(r&&se(n)){ye(_e(n,"script"))}n.parentNode.removeChild(n)}}return e}k.extend({htmlPrefilter:function(e){return e},clone:function(e,t,r){var n,a,i,o,s=e.cloneNode(true),l=se(e);if(!m.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!k.isXMLDoc(e)){o=_e(s);i=_e(e);for(n=0,a=i.length;n<a;n++){ze(i[n],o[n])}}if(t){if(r){i=i||_e(e);o=o||_e(s);for(n=0,a=i.length;n<a;n++){Re(i[n],o[n])}}else{Re(e,s)}}o=_e(s,"script");if(o.length>0){ye(o,!l&&_e(e,"script"))}return s},cleanData:function(e){var t,r,n,a=k.event.special,i=0;for(;(r=e[i])!==undefined;i++){if(Z(r)){if(t=r[$.expando]){if(t.events){for(n in t.events){if(a[n]){k.event.remove(r,n)}else{k.removeEvent(r,n,t.handle)}}}r[$.expando]=undefined}if(r[Q.expando]){r[Q.expando]=undefined}}}}});k.fn.extend({detach:function(e){return Fe(this,e,true)},remove:function(e){return Fe(this,e)},text:function(e){return q(this,function(e){return e===undefined?k.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=e}})},null,e,arguments.length)},append:function(){return Ne(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Oe(this,e);t.appendChild(e)}})},prepend:function(){return Ne(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Oe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ne(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}})},after:function(){return Ne(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)}})},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){if(e.nodeType===1){k.cleanData(_e(e,false));e.textContent=""}}return this},clone:function(e,t){e=e==null?false:e;t=t==null?e:t;return this.map(function(){return k.clone(this,e,t)})},html:function(e){return q(this,function(e){var t=this[0]||{},r=0,n=this.length;if(e===undefined&&t.nodeType===1){return t.innerHTML}if(typeof e==="string"&&!Le.test(e)&&!me[(ve.exec(e)||["",""])[1].toLowerCase()]){e=k.htmlPrefilter(e);try{for(;r<n;r++){t=this[r]||{};if(t.nodeType===1){k.cleanData(_e(t,false));t.innerHTML=e}}t=0}catch(e){}}if(t){this.empty().append(e)}},null,e,arguments.length)},replaceWith:function(){var r=[];return Ne(this,arguments,function(e){var t=this.parentNode;if(k.inArray(this,r)<0){k.cleanData(_e(this));if(t){t.replaceChild(e,this)}}},r)}});k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,o){k.fn[e]=function(e){var t,r=[],n=k(e),a=n.length-1,i=0;for(;i<=a;i++){t=i===a?this:this.clone(true);k(n[i])[o](t);l.apply(r,t.get())}return this.pushStack(r)}});var je=new RegExp("^("+ne+")(?!px)[a-z%]+$","i");var Be=function(e){var t=e.ownerDocument.defaultView;if(!t||!t.opener){t=A}return t.getComputedStyle(e)};var He=function(e,t,r){var n,a,i={};for(a in t){i[a]=e.style[a];e.style[a]=t[a]}n=r.call(e);for(a in t){e.style[a]=i[a]}return n};var Ue=new RegExp(ie.join("|"),"i");(function(){function e(){if(!c){return}l.style.cssText="position:absolute;left:-11111px;width:60px;"+"margin-top:1px;padding:0;border:0";c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;"+"margin:auto;border:1px;padding:1px;"+"width:60%;top:1%";oe.appendChild(l).appendChild(c);var e=A.getComputedStyle(c);r=e.top!=="1%";s=t(e.marginLeft)===12;c.style.right="60%";i=t(e.right)===36;n=t(e.width)===36;c.style.position="absolute";a=t(c.offsetWidth/3)===12;oe.removeChild(l);c=null}function t(e){return Math.round(parseFloat(e))}var r,n,a,i,o,s,l=T.createElement("div"),c=T.createElement("div");if(!c.style){return}c.style.backgroundClip="content-box";c.cloneNode(true).style.backgroundClip="";m.clearCloneStyle=c.style.backgroundClip==="content-box";k.extend(m,{boxSizingReliable:function(){e();return n},pixelBoxStyles:function(){e();return i},pixelPosition:function(){e();return r},reliableMarginLeft:function(){e();return s},scrollboxSize:function(){e();return a},reliableTrDimensions:function(){var e,t,r,n;if(o==null){e=T.createElement("table");t=T.createElement("tr");r=T.createElement("div");e.style.cssText="position:absolute;left:-11111px;border-collapse:separate";t.style.cssText="border:1px solid";t.style.height="1px";r.style.height="9px";r.style.display="block";oe.appendChild(e).appendChild(t).appendChild(r);n=A.getComputedStyle(t);o=parseInt(n.height,10)+parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10)===t.offsetHeight;oe.removeChild(e)}return o}})})();function Ve(e,t,r){var n,a,i,o,s=e.style;r=r||Be(e);if(r){o=r.getPropertyValue(t)||r[t];if(o===""&&!se(e)){o=k.style(e,t)}if(!m.pixelBoxStyles()&&je.test(o)&&Ue.test(t)){n=s.width;a=s.minWidth;i=s.maxWidth;s.minWidth=s.maxWidth=s.width=o;o=r.width;s.width=n;s.minWidth=a;s.maxWidth=i}}return o!==undefined?o+"":o}function qe(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}var Ye=["Webkit","Moz","ms"],Ge=T.createElement("div").style,We={};function Xe(e){var t=e[0].toUpperCase()+e.slice(1),r=Ye.length;while(r--){e=Ye[r]+t;if(e in Ge){return e}}}function Ze(e){var t=k.cssProps[e]||We[e];if(t){return t}if(e in Ge){return e}return We[e]=Xe(e)||e}var Je=/^(none|table(?!-c[ea]).+)/,$e=/^--/,Qe={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:"0",fontWeight:"400"};function et(e,t,r){var n=ae.exec(t);return n?Math.max(0,n[2]-(r||0))+(n[3]||"px"):t}function tt(e,t,r,n,a,i){var o=t==="width"?1:0,s=0,l=0;if(r===(n?"border":"content")){return 0}for(;o<4;o+=2){if(r==="margin"){l+=k.css(e,r+ie[o],true,a)}if(!n){l+=k.css(e,"padding"+ie[o],true,a);if(r!=="padding"){l+=k.css(e,"border"+ie[o]+"Width",true,a)}else{s+=k.css(e,"border"+ie[o]+"Width",true,a)}}else{if(r==="content"){l-=k.css(e,"padding"+ie[o],true,a)}if(r!=="margin"){l-=k.css(e,"border"+ie[o]+"Width",true,a)}}}if(!n&&i>=0){l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-l-s-.5))||0}return l}function rt(e,t,r){var n=Be(e),a=!m.boxSizingReliable()||r,i=a&&k.css(e,"boxSizing",false,n)==="border-box",o=i,s=Ve(e,t,n),l="offset"+t[0].toUpperCase()+t.slice(1);if(je.test(s)){if(!r){return s}s="auto"}if((!m.boxSizingReliable()&&i||!m.reliableTrDimensions()&&S(e,"tr")||s==="auto"||!parseFloat(s)&&k.css(e,"display",false,n)==="inline")&&e.getClientRects().length){i=k.css(e,"boxSizing",false,n)==="border-box";o=l in e;if(o){s=e[l]}}s=parseFloat(s)||0;return s+tt(e,t,r||(i?"border":"content"),o,n,s)+"px"}k.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=Ve(e,"opacity");return r===""?"1":r}}}},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,gridArea:true,gridColumn:true,gridColumnEnd:true,gridColumnStart:true,gridRow:true,gridRowEnd:true,gridRowStart:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{},style:function(e,t,r,n){if(!e||e.nodeType===3||e.nodeType===8||!e.style){return}var a,i,o,s=X(t),l=$e.test(t),c=e.style;if(!l){t=Ze(s)}o=k.cssHooks[t]||k.cssHooks[s];if(r!==undefined){i=typeof r;if(i==="string"&&(a=ae.exec(r))&&a[1]){r=ue(e,t,a);i="number"}if(r==null||r!==r){return}if(i==="number"&&!l){r+=a&&a[3]||(k.cssNumber[s]?"":"px")}if(!m.clearCloneStyle&&r===""&&t.indexOf("background")===0){c[t]="inherit"}if(!o||!("set"in o)||(r=o.set(e,r,n))!==undefined){if(l){c.setProperty(t,r)}else{c[t]=r}}}else{if(o&&"get"in o&&(a=o.get(e,false,n))!==undefined){return a}return c[t]}},css:function(e,t,r,n){var a,i,o,s=X(t),l=$e.test(t);if(!l){t=Ze(s)}o=k.cssHooks[t]||k.cssHooks[s];if(o&&"get"in o){a=o.get(e,true,r)}if(a===undefined){a=Ve(e,t,n)}if(a==="normal"&&t in Ke){a=Ke[t]}if(r===""||r){i=parseFloat(a);return r===true||isFinite(i)?i||0:a}return a}});k.each(["height","width"],function(e,c){k.cssHooks[c]={get:function(e,t,r){if(t){return Je.test(k.css(e,"display"))&&(!e.getClientRects().length||!e.getBoundingClientRect().width)?He(e,Qe,function(){return rt(e,c,r)}):rt(e,c,r)}},set:function(e,t,r){var n,a=Be(e),i=!m.scrollboxSize()&&a.position==="absolute",o=i||r,s=o&&k.css(e,"boxSizing",false,a)==="border-box",l=r?tt(e,c,r,s,a):0;if(s&&i){l-=Math.ceil(e["offset"+c[0].toUpperCase()+c.slice(1)]-parseFloat(a[c])-tt(e,c,"border",false,a)-.5)}if(l&&(n=ae.exec(t))&&(n[3]||"px")!=="px"){e.style[c]=t;t=k.css(e,c)}return et(e,t,l)}}});k.cssHooks.marginLeft=qe(m.reliableMarginLeft,function(e,t){if(t){return(parseFloat(Ve(e,"marginLeft"))||e.getBoundingClientRect().left-He(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}});k.each({margin:"",padding:"",border:"Width"},function(a,i){k.cssHooks[a+i]={expand:function(e){var t=0,r={},n=typeof e==="string"?e.split(" "):[e];for(;t<4;t++){r[a+ie[t]+i]=n[t]||n[t-2]||n[0]}return r}};if(a!=="margin"){k.cssHooks[a+i].set=et}});k.fn.extend({css:function(e,t){return q(this,function(e,t,r){var n,a,i={},o=0;if(Array.isArray(t)){n=Be(e);a=t.length;for(;o<a;o++){i[t[o]]=k.css(e,t[o],false,n)}return i}return r!==undefined?k.style(e,t,r):k.css(e,t)},e,t,arguments.length>1)}});function nt(e,t,r,n,a){return new nt.prototype.init(e,t,r,n,a)}k.Tween=nt;nt.prototype={constructor:nt,init:function(e,t,r,n,a,i){this.elem=e;this.prop=r;this.easing=a||k.easing._default;this.options=t;this.start=this.now=this.cur();this.end=n;this.unit=i||(k.cssNumber[r]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,r=nt.propHooks[this.prop];if(this.options.duration){this.pos=t=k.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration)}else{this.pos=t=e}this.now=(this.end-this.start)*t+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(r&&r.set){r.set(this)}else{nt.propHooks._default.set(this)}return this}};nt.prototype.init.prototype=nt.prototype;nt.propHooks={_default:{get:function(e){var t;if(e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null){return e.elem[e.prop]}t=k.css(e.elem,e.prop,"");return!t||t==="auto"?0:t},set:function(e){if(k.fx.step[e.prop]){k.fx.step[e.prop](e)}else if(e.elem.nodeType===1&&(k.cssHooks[e.prop]||e.elem.style[Ze(e.prop)]!=null)){k.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}};nt.propHooks.scrollTop=nt.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};k.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"};k.fx=nt.prototype.init;k.fx.step={};var at,it,ot=/^(?:toggle|show|hide)$/,st=/queueHooks$/;function lt(){if(it){if(T.hidden===false&&A.requestAnimationFrame){A.requestAnimationFrame(lt)}else{A.setTimeout(lt,k.fx.interval)}k.fx.tick()}}function ct(){A.setTimeout(function(){at=undefined});return at=Date.now()}function ut(e,t){var r,n=0,a={height:e};t=t?1:0;for(;n<4;n+=2-t){r=ie[n];a["margin"+r]=a["padding"+r]=e}if(t){a.opacity=a.width=e}return a}function ft(e,t,r){var n,a=(pt.tweeners[t]||[]).concat(pt.tweeners["*"]),i=0,o=a.length;for(;i<o;i++){if(n=a[i].call(r,t,e)){return n}}}function dt(e,t,r){var n,a,i,o,s,l,c,u,f="width"in t||"height"in t,d=this,h={},p=e.style,v=e.nodeType&&ce(e),g=$.get(e,"fxshow");if(!r.queue){o=k._queueHooks(e,"fx");if(o.unqueued==null){o.unqueued=0;s=o.empty.fire;o.empty.fire=function(){if(!o.unqueued){s()}}}o.unqueued++;d.always(function(){d.always(function(){o.unqueued--;if(!k.queue(e,"fx").length){o.empty.fire()}})})}for(n in t){a=t[n];if(ot.test(a)){delete t[n];i=i||a==="toggle";if(a===(v?"hide":"show")){if(a==="show"&&g&&g[n]!==undefined){v=true}else{continue}}h[n]=g&&g[n]||k.style(e,n)}}l=!k.isEmptyObject(t);if(!l&&k.isEmptyObject(h)){return}if(f&&e.nodeType===1){r.overflow=[p.overflow,p.overflowX,p.overflowY];c=g&&g.display;if(c==null){c=$.get(e,"display")}u=k.css(e,"display");if(u==="none"){if(c){u=c}else{he([e],true);c=e.style.display||c;u=k.css(e,"display");he([e])}}if(u==="inline"||u==="inline-block"&&c!=null){if(k.css(e,"float")==="none"){if(!l){d.done(function(){p.display=c});if(c==null){u=p.display;c=u==="none"?"":u}}p.display="inline-block"}}}if(r.overflow){p.overflow="hidden";d.always(function(){p.overflow=r.overflow[0];p.overflowX=r.overflow[1];p.overflowY=r.overflow[2]})}l=false;for(n in h){if(!l){if(g){if("hidden"in g){v=g.hidden}}else{g=$.access(e,"fxshow",{display:c})}if(i){g.hidden=!v}if(v){he([e],true)}d.done(function(){if(!v){he([e])}$.remove(e,"fxshow");for(n in h){k.style(e,n,h[n])}})}l=ft(v?g[n]:0,n,d);if(!(n in g)){g[n]=l.start;if(v){l.end=l.start;l.start=0}}}}function ht(e,t){var r,n,a,i,o;for(r in e){n=X(r);a=t[n];i=e[r];if(Array.isArray(i)){a=i[1];i=e[r]=i[0]}if(r!==n){e[n]=i;delete e[r]}o=k.cssHooks[n];if(o&&"expand"in o){i=o.expand(i);delete e[n];for(r in i){if(!(r in e)){e[r]=i[r];t[r]=a}}}else{t[n]=a}}}function pt(o,e,t){var r,s,n=0,a=pt.prefilters.length,l=k.Deferred().always(function(){delete i.elem}),i=function(){if(s){return false}var e=at||ct(),t=Math.max(0,c.startTime+c.duration-e),r=t/c.duration||0,n=1-r,a=0,i=c.tweens.length;for(;a<i;a++){c.tweens[a].run(n)}l.notifyWith(o,[c,n,t]);if(n<1&&i){return t}if(!i){l.notifyWith(o,[c,1,0])}l.resolveWith(o,[c]);return false},c=l.promise({elem:o,props:k.extend({},e),opts:k.extend(true,{specialEasing:{},easing:k.easing._default},t),originalProperties:e,originalOptions:t,startTime:at||ct(),duration:t.duration,tweens:[],createTween:function(e,t){var r=k.Tween(o,c.opts,e,t,c.opts.specialEasing[e]||c.opts.easing);c.tweens.push(r);return r},stop:function(e){var t=0,r=e?c.tweens.length:0;if(s){return this}s=true;for(;t<r;t++){c.tweens[t].run(1)}if(e){l.notifyWith(o,[c,1,0]);l.resolveWith(o,[c,e])}else{l.rejectWith(o,[c,e])}return this}}),u=c.props;ht(u,c.opts.specialEasing);for(;n<a;n++){r=pt.prefilters[n].call(c,o,u,c.opts);if(r){if(_(r.stop)){k._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)}return r}}k.map(u,ft,c);if(_(c.opts.start)){c.opts.start.call(o,c)}c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always);k.fx.timer(k.extend(i,{elem:o,anim:c,queue:c.opts.queue}));return c}k.Animation=k.extend(pt,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);ue(r.elem,e,ae.exec(t),r);return r}]},tweener:function(e,t){if(_(e)){t=e;e=["*"]}else{e=e.match(z)}var r,n=0,a=e.length;for(;n<a;n++){r=e[n];pt.tweeners[r]=pt.tweeners[r]||[];pt.tweeners[r].unshift(t)}},prefilters:[dt],prefilter:function(e,t){if(t){pt.prefilters.unshift(e)}else{pt.prefilters.push(e)}}});k.speed=function(e,t,r){var n=e&&typeof e==="object"?k.extend({},e):{complete:r||!r&&t||_(e)&&e,duration:e,easing:r&&t||t&&!_(t)&&t};if(k.fx.off){n.duration=0}else{if(typeof n.duration!=="number"){if(n.duration in k.fx.speeds){n.duration=k.fx.speeds[n.duration]}else{n.duration=k.fx.speeds._default}}}if(n.queue==null||n.queue===true){n.queue="fx"}n.old=n.complete;n.complete=function(){if(_(n.old)){n.old.call(this)}if(n.queue){k.dequeue(this,n.queue)}};return n};k.fn.extend({fadeTo:function(e,t,r,n){return this.filter(ce).css("opacity",0).show().end().animate({opacity:t},e,r,n)},animate:function(t,e,r,n){var a=k.isEmptyObject(t),i=k.speed(e,r,n),o=function(){var e=pt(this,k.extend({},t),i);if(a||$.get(this,"finish")){e.stop(true)}};o.finish=o;return a||i.queue===false?this.each(o):this.queue(i.queue,o)},stop:function(a,e,i){var o=function(e){var t=e.stop;delete e.stop;t(i)};if(typeof a!=="string"){i=e;e=a;a=undefined}if(e){this.queue(a||"fx",[])}return this.each(function(){var e=true,t=a!=null&&a+"queueHooks",r=k.timers,n=$.get(this);if(t){if(n[t]&&n[t].stop){o(n[t])}}else{for(t in n){if(n[t]&&n[t].stop&&st.test(t)){o(n[t])}}}for(t=r.length;t--;){if(r[t].elem===this&&(a==null||r[t].queue===a)){r[t].anim.stop(i);e=false;r.splice(t,1)}}if(e||!i){k.dequeue(this,a)}})},finish:function(o){if(o!==false){o=o||"fx"}return this.each(function(){var e,t=$.get(this),r=t[o+"queue"],n=t[o+"queueHooks"],a=k.timers,i=r?r.length:0;t.finish=true;k.queue(this,o,[]);if(n&&n.stop){n.stop.call(this,true)}for(e=a.length;e--;){if(a[e].elem===this&&a[e].queue===o){a[e].anim.stop(true);a.splice(e,1)}}for(e=0;e<i;e++){if(r[e]&&r[e].finish){r[e].finish.call(this)}}delete t.finish})}});k.each(["toggle","show","hide"],function(e,n){var a=k.fn[n];k.fn[n]=function(e,t,r){return e==null||typeof e==="boolean"?a.apply(this,arguments):this.animate(ut(n,true),e,t,r)}});k.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,n){k.fn[e]=function(e,t,r){return this.animate(n,e,t,r)}});k.timers=[];k.fx.tick=function(){var e,t=0,r=k.timers;at=Date.now();for(;t<r.length;t++){e=r[t];if(!e()&&r[t]===e){r.splice(t--,1)}}if(!r.length){k.fx.stop()}at=undefined};k.fx.timer=function(e){k.timers.push(e);k.fx.start()};k.fx.interval=13;k.fx.start=function(){if(it){return}it=true;lt()};k.fx.stop=function(){it=null};k.fx.speeds={slow:600,fast:200,_default:400};k.fn.delay=function(n,e){n=k.fx?k.fx.speeds[n]||n:n;e=e||"fx";return this.queue(e,function(e,t){var r=A.setTimeout(e,n);t.stop=function(){A.clearTimeout(r)}})};(function(){var e=T.createElement("input"),t=T.createElement("select"),r=t.appendChild(T.createElement("option"));e.type="checkbox";m.checkOn=e.value!=="";m.optSelected=r.selected;e=T.createElement("input");e.value="t";e.type="radio";m.radioValue=e.value==="t"})();var vt,gt=k.expr.attrHandle;k.fn.extend({attr:function(e,t){return q(this,k.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){k.removeAttr(this,e)})}});k.extend({attr:function(e,t,r){var n,a,i=e.nodeType;if(i===3||i===8||i===2){return}if(typeof e.getAttribute==="undefined"){return k.prop(e,t,r)}if(i!==1||!k.isXMLDoc(e)){a=k.attrHooks[t.toLowerCase()]||(k.expr.match.bool.test(t)?vt:undefined)}if(r!==undefined){if(r===null){k.removeAttr(e,t);return}if(a&&"set"in a&&(n=a.set(e,r,t))!==undefined){return n}e.setAttribute(t,r+"");return r}if(a&&"get"in a&&(n=a.get(e,t))!==null){return n}n=k.find.attr(e,t);return n==null?undefined:n},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&t==="radio"&&S(e,"input")){var r=e.value;e.setAttribute("type",t);if(r){e.value=r}return t}}}},removeAttr:function(e,t){var r,n=0,a=t&&t.match(z);if(a&&e.nodeType===1){while(r=a[n++]){e.removeAttribute(r)}}}});vt={set:function(e,t,r){if(t===false){k.removeAttr(e,r)}else{e.setAttribute(r,r)}return r}};k.each(k.expr.match.bool.source.match(/\w+/g),function(e,t){var o=gt[t]||k.find.attr;gt[t]=function(e,t,r){var n,a,i=t.toLowerCase();if(!r){a=gt[i];gt[i]=n;n=o(e,t,r)!=null?i:null;gt[i]=a}return n}});var mt=/^(?:input|select|textarea|button)$/i,_t=/^(?:a|area)$/i;k.fn.extend({prop:function(e,t){return q(this,k.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[k.propFix[e]||e]})}});k.extend({prop:function(e,t,r){var n,a,i=e.nodeType;if(i===3||i===8||i===2){return}if(i!==1||!k.isXMLDoc(e)){t=k.propFix[t]||t;a=k.propHooks[t]}if(r!==undefined){if(a&&"set"in a&&(n=a.set(e,r,t))!==undefined){return n}return e[t]=r}if(a&&"get"in a&&(n=a.get(e,t))!==null){return n}return e[t]},propHooks:{tabIndex:{get:function(e){var t=k.find.attr(e,"tabindex");if(t){return parseInt(t,10)}if(mt.test(e.nodeName)||_t.test(e.nodeName)&&e.href){return 0}return-1}}},propFix:{for:"htmlFor",class:"className"}});if(!m.optSelected){k.propHooks.selected={get:function(e){var t=e.parentNode;if(t&&t.parentNode){t.parentNode.selectedIndex}return null},set:function(e){var t=e.parentNode;if(t){t.selectedIndex;if(t.parentNode){t.parentNode.selectedIndex}}}}}k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){k.propFix[this.toLowerCase()]=this});function yt(e){var t=e.match(z)||[];return t.join(" ")}function bt(e){return e.getAttribute&&e.getAttribute("class")||""}function xt(e){if(Array.isArray(e)){return e}if(typeof e==="string"){return e.match(z)||[]}return[]}k.fn.extend({addClass:function(t){var e,r,n,a,i,o,s,l=0;if(_(t)){return this.each(function(e){k(this).addClass(t.call(this,e,bt(this)))})}e=xt(t);if(e.length){while(r=this[l++]){a=bt(r);n=r.nodeType===1&&" "+yt(a)+" ";if(n){o=0;while(i=e[o++]){if(n.indexOf(" "+i+" ")<0){n+=i+" "}}s=yt(n);if(a!==s){r.setAttribute("class",s)}}}}return this},removeClass:function(t){var e,r,n,a,i,o,s,l=0;if(_(t)){return this.each(function(e){k(this).removeClass(t.call(this,e,bt(this)))})}if(!arguments.length){return this.attr("class","")}e=xt(t);if(e.length){while(r=this[l++]){a=bt(r);n=r.nodeType===1&&" "+yt(a)+" ";if(n){o=0;while(i=e[o++]){while(n.indexOf(" "+i+" ")>-1){n=n.replace(" "+i+" "," ")}}s=yt(n);if(a!==s){r.setAttribute("class",s)}}}}return this},toggleClass:function(a,t){var i=typeof a,o=i==="string"||Array.isArray(a);if(typeof t==="boolean"&&o){return t?this.addClass(a):this.removeClass(a)}if(_(a)){return this.each(function(e){k(this).toggleClass(a.call(this,e,bt(this),t),t)})}return this.each(function(){var e,t,r,n;if(o){t=0;r=k(this);n=xt(a);while(e=n[t++]){if(r.hasClass(e)){r.removeClass(e)}else{r.addClass(e)}}}else if(a===undefined||i==="boolean"){e=bt(this);if(e){$.set(this,"__className__",e)}if(this.setAttribute){this.setAttribute("class",e||a===false?"":$.get(this,"__className__")||"")}}})},hasClass:function(e){var t,r,n=0;t=" "+e+" ";while(r=this[n++]){if(r.nodeType===1&&(" "+yt(bt(r))+" ").indexOf(t)>-1){return true}}return false}});var wt=/\r/g;k.fn.extend({val:function(r){var n,e,a,t=this[0];if(!arguments.length){if(t){n=k.valHooks[t.type]||k.valHooks[t.nodeName.toLowerCase()];if(n&&"get"in n&&(e=n.get(t,"value"))!==undefined){return e}e=t.value;if(typeof e==="string"){return e.replace(wt,"")}return e==null?"":e}return}a=_(r);return this.each(function(e){var t;if(this.nodeType!==1){return}if(a){t=r.call(this,e,k(this).val())}else{t=r}if(t==null){t=""}else if(typeof t==="number"){t+=""}else if(Array.isArray(t)){t=k.map(t,function(e){return e==null?"":e+""})}n=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,t,"value")===undefined){this.value=t}})}});k.extend({valHooks:{option:{get:function(e){var t=k.find.attr(e,"value");return t!=null?t:yt(k.text(e))}},select:{get:function(e){var t,r,n,a=e.options,i=e.selectedIndex,o=e.type==="select-one",s=o?null:[],l=o?i+1:a.length;if(i<0){n=l}else{n=o?i:0}for(;n<l;n++){r=a[n];if((r.selected||n===i)&&!r.disabled&&(!r.parentNode.disabled||!S(r.parentNode,"optgroup"))){t=k(r).val();if(o){return t}s.push(t)}}return s},set:function(e,t){var r,n,a=e.options,i=k.makeArray(t),o=a.length;while(o--){n=a[o];if(n.selected=k.inArray(k.valHooks.option.get(n),i)>-1){r=true}}if(!r){e.selectedIndex=-1}return i}}}});k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(e,t){if(Array.isArray(t)){return e.checked=k.inArray(k(e).val(),t)>-1}}};if(!m.checkOn){k.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value}}});m.focusin="onfocusin"in A;var At=/^(?:focusinfocus|focusoutblur)$/,Tt=function(e){e.stopPropagation()};k.extend(k.event,{trigger:function(e,t,r,n){var a,i,o,s,l,c,u,f,d=[r||T],h=g.call(e,"type")?e.type:e,p=g.call(e,"namespace")?e.namespace.split("."):[];i=f=o=r=r||T;if(r.nodeType===3||r.nodeType===8){return}if(At.test(h+k.event.triggered)){return}if(h.indexOf(".")>-1){p=h.split(".");h=p.shift();p.sort()}l=h.indexOf(":")<0&&"on"+h;e=e[k.expando]?e:new k.Event(h,typeof e==="object"&&e);e.isTrigger=n?2:3;e.namespace=p.join(".");e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;e.result=undefined;if(!e.target){e.target=r}t=t==null?[e]:k.makeArray(t,[e]);u=k.event.special[h]||{};if(!n&&u.trigger&&u.trigger.apply(r,t)===false){return}if(!n&&!u.noBubble&&!y(r)){s=u.delegateType||h;if(!At.test(s+h)){i=i.parentNode}for(;i;i=i.parentNode){d.push(i);o=i}if(o===(r.ownerDocument||T)){d.push(o.defaultView||o.parentWindow||A)}}a=0;while((i=d[a++])&&!e.isPropagationStopped()){f=i;e.type=a>1?s:u.bindType||h;c=($.get(i,"events")||Object.create(null))[e.type]&&$.get(i,"handle");if(c){c.apply(i,t)}c=l&&i[l];if(c&&c.apply&&Z(i)){e.result=c.apply(i,t);if(e.result===false){e.preventDefault()}}}e.type=h;if(!n&&!e.isDefaultPrevented()){if((!u._default||u._default.apply(d.pop(),t)===false)&&Z(r)){if(l&&_(r[h])&&!y(r)){o=r[l];if(o){r[l]=null}k.event.triggered=h;if(e.isPropagationStopped()){f.addEventListener(h,Tt)}r[h]();if(e.isPropagationStopped()){f.removeEventListener(h,Tt)}k.event.triggered=undefined;if(o){r[l]=o}}}}return e.result},simulate:function(e,t,r){var n=k.extend(new k.Event,r,{type:e,isSimulated:true});k.event.trigger(n,null,t)}});k.fn.extend({trigger:function(e,t){return this.each(function(){k.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];if(r){return k.event.trigger(e,t,r,true)}}});if(!m.focusin){k.each({focus:"focusin",blur:"focusout"},function(r,n){var a=function(e){k.event.simulate(n,e.target,k.event.fix(e))};k.event.special[n]={setup:function(){var e=this.ownerDocument||this.document||this,t=$.access(e,n);if(!t){e.addEventListener(r,a,true)}$.access(e,n,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=$.access(e,n)-1;if(!t){e.removeEventListener(r,a,true);$.remove(e,n)}else{$.access(e,n,t)}}}})}var kt=A.location;var Mt={guid:Date.now()};var St=/\?/;k.parseXML=function(e){var t,r;if(!e||typeof e!=="string"){return null}try{t=(new A.DOMParser).parseFromString(e,"text/xml")}catch(e){}r=t&&t.getElementsByTagName("parsererror")[0];if(!t||r){k.error("Invalid XML: "+(r?k.map(r.childNodes,function(e){return e.textContent}).join("\n"):e))}return t};var Ct=/\[\]$/,Lt=/\r?\n/g,Et=/^(?:submit|button|image|reset|file)$/i,Dt=/^(?:input|select|textarea|keygen)/i;function Ot(r,e,n,a){var t;if(Array.isArray(e)){k.each(e,function(e,t){if(n||Ct.test(r)){a(r,t)}else{Ot(r+"["+(typeof t==="object"&&t!=null?e:"")+"]",t,n,a)}})}else if(!n&&x(e)==="object"){for(t in e){Ot(r+"["+t+"]",e[t],n,a)}}else{a(r,e)}}k.param=function(e,t){var r,n=[],a=function(e,t){var r=_(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(r==null?"":r)};if(e==null){return""}if(Array.isArray(e)||e.jquery&&!k.isPlainObject(e)){k.each(e,function(){a(this.name,this.value)})}else{for(r in e){Ot(r,e[r],t,a)}}return n.join("&")};k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=k.prop(this,"elements");return e?k.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!k(this).is(":disabled")&&Dt.test(this.nodeName)&&!Et.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var r=k(this).val();if(r==null){return null}if(Array.isArray(r)){return k.map(r,function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}})}return{name:t.name,value:r.replace(Lt,"\r\n")}}).get()}});var Pt=/%20/g,It=/#.*$/,Rt=/([?&])_=[^&]*/,zt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Nt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ft=/^(?:GET|HEAD)$/,jt=/^\/\//,Bt={},Ht={},Ut="*/".concat("*"),Vt=T.createElement("a");Vt.href=kt.href;function qt(i){return function(e,t){if(typeof e!=="string"){t=e;e="*"}var r,n=0,a=e.toLowerCase().match(z)||[];if(_(t)){while(r=a[n++]){if(r[0]==="+"){r=r.slice(1)||"*";(i[r]=i[r]||[]).unshift(t)}else{(i[r]=i[r]||[]).push(t)}}}}}function Yt(t,a,i,o){var s={},l=t===Ht;function c(e){var n;s[e]=true;k.each(t[e]||[],function(e,t){var r=t(a,i,o);if(typeof r==="string"&&!l&&!s[r]){a.dataTypes.unshift(r);c(r);return false}else if(l){return!(n=r)}});return n}return c(a.dataTypes[0])||!s["*"]&&c("*")}function Gt(e,t){var r,n,a=k.ajaxSettings.flatOptions||{};for(r in t){if(t[r]!==undefined){(a[r]?e:n||(n={}))[r]=t[r]}}if(n){k.extend(true,e,n)}return e}function Wt(e,t,r){var n,a,i,o,s=e.contents,l=e.dataTypes;while(l[0]==="*"){l.shift();if(n===undefined){n=e.mimeType||t.getResponseHeader("Content-Type")}}if(n){for(a in s){if(s[a]&&s[a].test(n)){l.unshift(a);break}}}if(l[0]in r){i=l[0]}else{for(a in r){if(!l[0]||e.converters[a+" "+l[0]]){i=a;break}if(!o){o=a}}i=i||o}if(i){if(i!==l[0]){l.unshift(i)}return r[i]}}function Xt(e,t,r,n){var a,i,o,s,l,c={},u=e.dataTypes.slice();if(u[1]){for(o in e.converters){c[o.toLowerCase()]=e.converters[o]}}i=u.shift();while(i){if(e.responseFields[i]){r[e.responseFields[i]]=t}if(!l&&n&&e.dataFilter){t=e.dataFilter(t,e.dataType)}l=i;i=u.shift();if(i){if(i==="*"){i=l}else if(l!=="*"&&l!==i){o=c[l+" "+i]||c["* "+i];if(!o){for(a in c){s=a.split(" ");if(s[1]===i){o=c[l+" "+s[0]]||c["* "+s[0]];if(o){if(o===true){o=c[a]}else if(c[a]!==true){i=s[0];u.unshift(s[1])}break}}}}if(o!==true){if(o&&e.throws){t=o(t)}else{try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+i}}}}}}}return{state:"success",data:t}}k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:kt.href,type:"GET",isLocal:Nt.test(kt.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ut,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(e,t){return t?Gt(Gt(e,k.ajaxSettings),t):Gt(k.ajaxSettings,e)},ajaxPrefilter:qt(Bt),ajaxTransport:qt(Ht),ajax:function(e,t){if(typeof e==="object"){t=e;e=undefined}t=t||{};var u,f,d,r,h,n,p,v,a,i,g=k.ajaxSetup({},t),m=g.context||g,_=g.context&&(m.nodeType||m.jquery)?k(m):k.event,y=k.Deferred(),b=k.Callbacks("once memory"),x=g.statusCode||{},o={},s={},l="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(p){if(!r){r={};while(t=zt.exec(d)){r[t[1].toLowerCase()+" "]=(r[t[1].toLowerCase()+" "]||[]).concat(t[2])}}t=r[e.toLowerCase()+" "]}return t==null?null:t.join(", ")},getAllResponseHeaders:function(){return p?d:null},setRequestHeader:function(e,t){if(p==null){e=s[e.toLowerCase()]=s[e.toLowerCase()]||e;o[e]=t}return this},overrideMimeType:function(e){if(p==null){g.mimeType=e}return this},statusCode:function(e){var t;if(e){if(p){w.always(e[w.status])}else{for(t in e){x[t]=[x[t],e[t]]}}}return this},abort:function(e){var t=e||l;if(u){u.abort(t)}c(0,t);return this}};y.promise(w);g.url=((e||g.url||kt.href)+"").replace(jt,kt.protocol+"//");g.type=t.method||t.type||g.method||g.type;g.dataTypes=(g.dataType||"*").toLowerCase().match(z)||[""];if(g.crossDomain==null){n=T.createElement("a");try{n.href=g.url;n.href=n.href;g.crossDomain=Vt.protocol+"//"+Vt.host!==n.protocol+"//"+n.host}catch(e){g.crossDomain=true}}if(g.data&&g.processData&&typeof g.data!=="string"){g.data=k.param(g.data,g.traditional)}Yt(Bt,g,t,w);if(p){return w}v=k.event&&g.global;if(v&&k.active++===0){k.event.trigger("ajaxStart")}g.type=g.type.toUpperCase();g.hasContent=!Ft.test(g.type);f=g.url.replace(It,"");if(!g.hasContent){i=g.url.slice(f.length);if(g.data&&(g.processData||typeof g.data==="string")){f+=(St.test(f)?"&":"?")+g.data;delete g.data}if(g.cache===false){f=f.replace(Rt,"$1");i=(St.test(f)?"&":"?")+"_="+Mt.guid+++i}g.url=f+i}else if(g.data&&g.processData&&(g.contentType||"").indexOf("application/x-www-form-urlencoded")===0){g.data=g.data.replace(Pt,"+")}if(g.ifModified){if(k.lastModified[f]){w.setRequestHeader("If-Modified-Since",k.lastModified[f])}if(k.etag[f]){w.setRequestHeader("If-None-Match",k.etag[f])}}if(g.data&&g.hasContent&&g.contentType!==false||t.contentType){w.setRequestHeader("Content-Type",g.contentType)}w.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+(g.dataTypes[0]!=="*"?", "+Ut+"; q=0.01":""):g.accepts["*"]);for(a in g.headers){w.setRequestHeader(a,g.headers[a])}if(g.beforeSend&&(g.beforeSend.call(m,w,g)===false||p)){return w.abort()}l="abort";b.add(g.complete);w.done(g.success);w.fail(g.error);u=Yt(Ht,g,t,w);if(!u){c(-1,"No Transport")}else{w.readyState=1;if(v){_.trigger("ajaxSend",[w,g])}if(p){return w}if(g.async&&g.timeout>0){h=A.setTimeout(function(){w.abort("timeout")},g.timeout)}try{p=false;u.send(o,c)}catch(e){if(p){throw e}c(-1,e)}}function c(e,t,r,n){var a,i,o,s,l,c=t;if(p){return}p=true;if(h){A.clearTimeout(h)}u=undefined;d=n||"";w.readyState=e>0?4:0;a=e>=200&&e<300||e===304;if(r){s=Wt(g,w,r)}if(!a&&k.inArray("script",g.dataTypes)>-1&&k.inArray("json",g.dataTypes)<0){g.converters["text script"]=function(){}}s=Xt(g,s,w,a);if(a){if(g.ifModified){l=w.getResponseHeader("Last-Modified");if(l){k.lastModified[f]=l}l=w.getResponseHeader("etag");if(l){k.etag[f]=l}}if(e===204||g.type==="HEAD"){c="nocontent"}else if(e===304){c="notmodified"}else{c=s.state;i=s.data;o=s.error;a=!o}}else{o=c;if(e||!c){c="error";if(e<0){e=0}}}w.status=e;w.statusText=(t||c)+"";if(a){y.resolveWith(m,[i,c,w])}else{y.rejectWith(m,[w,c,o])}w.statusCode(x);x=undefined;if(v){_.trigger(a?"ajaxSuccess":"ajaxError",[w,g,a?i:o])}b.fireWith(m,[w,c]);if(v){_.trigger("ajaxComplete",[w,g]);if(!--k.active){k.event.trigger("ajaxStop")}}}return w},getJSON:function(e,t,r){return k.get(e,t,r,"json")},getScript:function(e,t){return k.get(e,undefined,t,"script")}});k.each(["get","post"],function(e,a){k[a]=function(e,t,r,n){if(_(t)){n=n||r;r=t;t=undefined}return k.ajax(k.extend({url:e,type:a,dataType:n,data:t,success:r},k.isPlainObject(e)&&e))}});k.ajaxPrefilter(function(e){var t;for(t in e.headers){if(t.toLowerCase()==="content-type"){e.contentType=e.headers[t]||""}}});k._evalUrl=function(e,t,r){return k.ajax({url:e,type:"GET",dataType:"script",cache:true,async:false,global:false,converters:{"text script":function(){}},dataFilter:function(e){k.globalEval(e,t,r)}})};k.fn.extend({wrapAll:function(e){var t;if(this[0]){if(_(e)){e=e.call(this[0])}t=k(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){t.insertBefore(this[0])}t.map(function(){var e=this;while(e.firstElementChild){e=e.firstElementChild}return e}).append(this)}return this},wrapInner:function(r){if(_(r)){return this.each(function(e){k(this).wrapInner(r.call(this,e))})}return this.each(function(){var e=k(this),t=e.contents();if(t.length){t.wrapAll(r)}else{e.append(r)}})},wrap:function(t){var r=_(t);return this.each(function(e){k(this).wrapAll(r?t.call(this,e):t)})},unwrap:function(e){this.parent(e).not("body").each(function(){k(this).replaceWith(this.childNodes)});return this}});k.expr.pseudos.hidden=function(e){return!k.expr.pseudos.visible(e)};k.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)};k.ajaxSettings.xhr=function(){try{return new A.XMLHttpRequest}catch(e){}};var Zt={0:200,1223:204},Jt=k.ajaxSettings.xhr();m.cors=!!Jt&&"withCredentials"in Jt;m.ajax=Jt=!!Jt;k.ajaxTransport(function(a){var i,o;if(m.cors||Jt&&!a.crossDomain){return{send:function(e,t){var r,n=a.xhr();n.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields){for(r in a.xhrFields){n[r]=a.xhrFields[r]}}if(a.mimeType&&n.overrideMimeType){n.overrideMimeType(a.mimeType)}if(!a.crossDomain&&!e["X-Requested-With"]){e["X-Requested-With"]="XMLHttpRequest"}for(r in e){n.setRequestHeader(r,e[r])}i=function(e){return function(){if(i){i=o=n.onload=n.onerror=n.onabort=n.ontimeout=n.onreadystatechange=null;if(e==="abort"){n.abort()}else if(e==="error"){if(typeof n.status!=="number"){t(0,"error")}else{t(n.status,n.statusText)}}else{t(Zt[n.status]||n.status,n.statusText,(n.responseType||"text")!=="text"||typeof n.responseText!=="string"?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders())}}}};n.onload=i();o=n.onerror=n.ontimeout=i("error");if(n.onabort!==undefined){n.onabort=o}else{n.onreadystatechange=function(){if(n.readyState===4){A.setTimeout(function(){if(i){o()}})}}}i=i("abort");try{n.send(a.hasContent&&a.data||null)}catch(e){if(i){throw e}}},abort:function(){if(i){i()}}}}});k.ajaxPrefilter(function(e){if(e.crossDomain){e.contents.script=false}});k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){k.globalEval(e);return e}}});k.ajaxPrefilter("script",function(e){if(e.cache===undefined){e.cache=false}if(e.crossDomain){e.type="GET"}});k.ajaxTransport("script",function(r){if(r.crossDomain||r.scriptAttrs){var n,a;return{send:function(e,t){n=k("<script>").attr(r.scriptAttrs||{}).prop({charset:r.scriptCharset,src:r.url}).on("load error",a=function(e){n.remove();a=null;if(e){t(e.type==="error"?404:200,e.type)}});T.head.appendChild(n[0])},abort:function(){if(a){a()}}}}});var $t=[],Qt=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=$t.pop()||k.expando+"_"+Mt.guid++;this[e]=true;return e}});k.ajaxPrefilter("json jsonp",function(e,t,r){var n,a,i,o=e.jsonp!==false&&(Qt.test(e.url)?"url":typeof e.data==="string"&&(e.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Qt.test(e.data)&&"data");if(o||e.dataTypes[0]==="jsonp"){n=e.jsonpCallback=_(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback;if(o){e[o]=e[o].replace(Qt,"$1"+n)}else if(e.jsonp!==false){e.url+=(St.test(e.url)?"&":"?")+e.jsonp+"="+n}e.converters["script json"]=function(){if(!i){k.error(n+" was not called")}return i[0]};e.dataTypes[0]="json";a=A[n];A[n]=function(){i=arguments};r.always(function(){if(a===undefined){k(A).removeProp(n)}else{A[n]=a}if(e[n]){e.jsonpCallback=t.jsonpCallback;$t.push(n)}if(i&&_(a)){a(i[0])}i=a=undefined});return"script"}});m.createHTMLDocument=function(){var e=T.implementation.createHTMLDocument("").body;e.innerHTML="<form></form><form></form>";return e.childNodes.length===2}();k.parseHTML=function(e,t,r){if(typeof e!=="string"){return[]}if(typeof t==="boolean"){r=t;t=false}var n,a,i;if(!t){if(m.createHTMLDocument){t=T.implementation.createHTMLDocument("");n=t.createElement("base");n.href=T.location.href;t.head.appendChild(n)}else{t=T}}a=C.exec(e);i=!r&&[];if(a){return[t.createElement(a[1])]}a=xe([e],t,i);if(i&&i.length){k(i).remove()}return k.merge([],a.childNodes)};k.fn.load=function(e,t,r){var n,a,i,o=this,s=e.indexOf(" ");if(s>-1){n=yt(e.slice(s));e=e.slice(0,s)}if(_(t)){r=t;t=undefined}else if(t&&typeof t==="object"){a="POST"}if(o.length>0){k.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done(function(e){i=arguments;o.html(n?k("<div>").append(k.parseHTML(e)).find(n):e)}).always(r&&function(e,t){o.each(function(){r.apply(this,i||[e.responseText,t,e])})})}return this};k.expr.pseudos.animated=function(t){return k.grep(k.timers,function(e){return t===e.elem}).length};k.offset={setOffset:function(e,t,r){var n,a,i,o,s,l,c,u=k.css(e,"position"),f=k(e),d={};if(u==="static"){e.style.position="relative"}s=f.offset();i=k.css(e,"top");l=k.css(e,"left");c=(u==="absolute"||u==="fixed")&&(i+l).indexOf("auto")>-1;if(c){n=f.position();o=n.top;a=n.left}else{o=parseFloat(i)||0;a=parseFloat(l)||0}if(_(t)){t=t.call(e,r,k.extend({},s))}if(t.top!=null){d.top=t.top-s.top+o}if(t.left!=null){d.left=t.left-s.left+a}if("using"in t){t.using.call(e,d)}else{f.css(d)}}};k.fn.extend({offset:function(t){if(arguments.length){return t===undefined?this:this.each(function(e){k.offset.setOffset(this,t,e)})}var e,r,n=this[0];if(!n){return}if(!n.getClientRects().length){return{top:0,left:0}}e=n.getBoundingClientRect();r=n.ownerDocument.defaultView;return{top:e.top+r.pageYOffset,left:e.left+r.pageXOffset}},position:function(){if(!this[0]){return}var e,t,r,n=this[0],a={top:0,left:0};if(k.css(n,"position")==="fixed"){t=n.getBoundingClientRect()}else{t=this.offset();r=n.ownerDocument;e=n.offsetParent||r.documentElement;while(e&&(e===r.body||e===r.documentElement)&&k.css(e,"position")==="static"){e=e.parentNode}if(e&&e!==n&&e.nodeType===1){a=k(e).offset();a.top+=k.css(e,"borderTopWidth",true);a.left+=k.css(e,"borderLeftWidth",true)}}return{top:t.top-a.top-k.css(n,"marginTop",true),left:t.left-a.left-k.css(n,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&k.css(e,"position")==="static"){e=e.offsetParent}return e||oe})}});k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,a){var i="pageYOffset"===a;k.fn[t]=function(e){return q(this,function(e,t,r){var n;if(y(e)){n=e}else if(e.nodeType===9){n=e.defaultView}if(r===undefined){return n?n[a]:e[t]}if(n){n.scrollTo(!i?r:n.pageXOffset,i?r:n.pageYOffset)}else{e[t]=r}},t,e,arguments.length)}});k.each(["top","left"],function(e,r){k.cssHooks[r]=qe(m.pixelPosition,function(e,t){if(t){t=Ve(e,r);return je.test(t)?k(e).position()[r]+"px":t}})});k.each({Height:"height",Width:"width"},function(o,s){k.each({padding:"inner"+o,content:s,"":"outer"+o},function(n,i){k.fn[i]=function(e,t){var r=arguments.length&&(n||typeof e!=="boolean"),a=n||(e===true||t===true?"margin":"border");return q(this,function(e,t,r){var n;if(y(e)){return i.indexOf("outer")===0?e["inner"+o]:e.document.documentElement["client"+o]}if(e.nodeType===9){n=e.documentElement;return Math.max(e.body["scroll"+o],n["scroll"+o],e.body["offset"+o],n["offset"+o],n["client"+o])}return r===undefined?k.css(e,t,a):k.style(e,t,r,a)},s,r?e:undefined,r)}})});k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){k.fn[t]=function(e){return this.on(t,e)}});k.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});k.each(("blur focus focusin focusout resize scroll click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup contextmenu").split(" "),function(e,r){k.fn[r]=function(e,t){return arguments.length>0?this.on(r,null,e,t):this.trigger(r)}});var Kt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;k.proxy=function(e,t){var r,n,a;if(typeof t==="string"){r=e[t];t=e;e=r}if(!_(e)){return undefined}n=s.call(arguments,2);a=function(){return e.apply(t||this,n.concat(s.call(arguments)))};a.guid=e.guid=e.guid||k.guid++;return a};k.holdReady=function(e){if(e){k.readyWait++}else{k.ready(true)}};k.isArray=Array.isArray;k.parseJSON=JSON.parse;k.nodeName=S;k.isFunction=_;k.isWindow=y;k.camelCase=X;k.type=x;k.now=Date.now;k.isNumeric=function(e){var t=k.type(e);return(t==="number"||t==="string")&&!isNaN(e-parseFloat(e))};k.trim=function(e){return e==null?"":(e+"").replace(Kt,"")};if(typeof define==="function"&&define.amd){define("jquery",[],function(){return k})}var er=A.jQuery,tr=A.$;k.noConflict=function(e){if(A.$===k){A.$=tr}if(e&&A.jQuery===k){A.jQuery=er}return k};if(typeof e==="undefined"){A.jQuery=A.$=k}return k});(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.Plotly=e()}})(function(){var nc,e,t;return function(){function u(i,o,s){function l(r,e){if(!o[r]){if(!i[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(c)return c(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var a=o[r]={exports:{}};i[r][0].call(a.exports,function(e){var t=i[r][1][e];return l(t||e)},a,a.exports,u,i,o,s)}return o[r].exports}for(var c="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}return u}()({1:[function(e,t,r){"use strict";var n=e("../src/lib");var a={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var i in a){var o=i.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");n.addStyleRule(o,a[i])}},{"../src/lib":230}],2:[function(e,t,r){"use strict";t.exports=e("../src/transforms/aggregate")},{"../src/transforms/aggregate":381}],3:[function(e,t,r){"use strict";t.exports=e("../src/traces/bar")},{"../src/traces/bar":331}],4:[function(e,t,r){"use strict";t.exports=e("../src/components/calendars")},{"../src/components/calendars":98}],5:[function(e,t,r){"use strict";t.exports=e("../src/core")},{"../src/core":212}],6:[function(e,t,r){"use strict";t.exports=e("../src/transforms/filter")},{"../src/transforms/filter":382}],7:[function(e,t,r){"use strict";t.exports=e("../src/transforms/groupby")},{"../src/transforms/groupby":383}],8:[function(e,t,r){"use strict";var n=e("./core");n.register([e("./bar"),e("./pie"),e("./aggregate"),e("./filter"),e("./groupby"),e("./sort"),e("./calendars")]);t.exports=n},{"./aggregate":2,"./bar":3,"./calendars":4,"./core":5,"./filter":6,"./groupby":7,"./pie":9,"./sort":10}],9:[function(e,t,r){"use strict";t.exports=e("../src/traces/pie")},{"../src/traces/pie":346}],10:[function(e,t,r){"use strict";t.exports=e("../src/transforms/sort")},{"../src/transforms/sort":385}],11:[function(e,rc,t){!function(){var I={version:"3.6.1"};var a=[].slice,f=function(e){return a.call(e)};var R=this.document;function s(e){return e&&(e.ownerDocument||e.document||e).documentElement}function z(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(R){try{f(R.documentElement.childNodes)[0].nodeType}catch(e){f=function(e){var t=e.length,r=new Array(t);while(t--)r[t]=e[t];return r}}}if(!Date.now)Date.now=function(){return+new Date};if(R){try{R.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var t=this.Element.prototype,r=t.setAttribute,n=t.setAttributeNS,i=this.CSSStyleDeclaration.prototype,o=i.setProperty;t.setAttribute=function(e,t){r.call(this,e,t+"")};t.setAttributeNS=function(e,t,r){n.call(this,e,t,r+"")};i.setProperty=function(e,t,r){o.call(this,e,t+"",r)}}}I.ascending=l;function l(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}I.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};I.min=function(e,t){var r=-1,n=e.length,a,i;if(arguments.length===1){while(++r<n)if((i=e[r])!=null&&i>=i){a=i;break}while(++r<n)if((i=e[r])!=null&&a>i)a=i}else{while(++r<n)if((i=t.call(e,e[r],r))!=null&&i>=i){a=i;break}while(++r<n)if((i=t.call(e,e[r],r))!=null&&a>i)a=i}return a};I.max=function(e,t){var r=-1,n=e.length,a,i;if(arguments.length===1){while(++r<n)if((i=e[r])!=null&&i>=i){a=i;break}while(++r<n)if((i=e[r])!=null&&i>a)a=i}else{while(++r<n)if((i=t.call(e,e[r],r))!=null&&i>=i){a=i;break}while(++r<n)if((i=t.call(e,e[r],r))!=null&&i>a)a=i}return a};I.extent=function(e,t){var r=-1,n=e.length,a,i,o;if(arguments.length===1){while(++r<n)if((i=e[r])!=null&&i>=i){a=o=i;break}while(++r<n)if((i=e[r])!=null){if(a>i)a=i;if(o<i)o=i}}else{while(++r<n)if((i=t.call(e,e[r],r))!=null&&i>=i){a=o=i;break}while(++r<n)if((i=t.call(e,e[r],r))!=null){if(a>i)a=i;if(o<i)o=i}}return[a,o]};function c(e){return e===null?NaN:+e}function u(e){return!isNaN(e)}I.sum=function(e,t){var r=0,n=e.length,a,i=-1;if(arguments.length===1){while(++i<n)if(u(a=+e[i]))r+=a}else{while(++i<n)if(u(a=+t.call(e,e[i],i)))r+=a}return r};I.mean=function(e,t){var r=0,n=e.length,a,i=-1,o=n;if(arguments.length===1){while(++i<n)if(u(a=c(e[i])))r+=a;else--o}else{while(++i<n)if(u(a=c(t.call(e,e[i],i))))r+=a;else--o}if(o)return r/o};I.quantile=function(e,t){var r=(e.length-1)*t+1,n=Math.floor(r),a=+e[n-1],i=r-n;return i?a+i*(e[n]-a):a};I.median=function(e,t){var r=[],n=e.length,a,i=-1;if(arguments.length===1){while(++i<n)if(u(a=c(e[i])))r.push(a)}else{while(++i<n)if(u(a=c(t.call(e,e[i],i))))r.push(a)}if(r.length)return I.quantile(r.sort(l),.5)};I.variance=function(e,t){var r=e.length,n=0,a,i,o=0,s=-1,l=0;if(arguments.length===1){while(++s<r){if(u(a=c(e[s]))){i=a-n;n+=i/++l;o+=i*(a-n)}}}else{while(++s<r){if(u(a=c(t.call(e,e[s],s)))){i=a-n;n+=i/++l;o+=i*(a-n)}}}if(l>1)return o/(l-1)};I.deviation=function(){var e=I.variance.apply(this,arguments);return e?Math.sqrt(e):e};function e(i){return{left:function(e,t,r,n){if(arguments.length<3)r=0;if(arguments.length<4)n=e.length;while(r<n){var a=r+n>>>1;if(i(e[a],t)<0)r=a+1;else n=a}return r},right:function(e,t,r,n){if(arguments.length<3)r=0;if(arguments.length<4)n=e.length;while(r<n){var a=r+n>>>1;if(i(e[a],t)>0)n=a;else r=a+1}return r}}}var d=e(l);I.bisectLeft=d.left;I.bisect=I.bisectRight=d.right;I.bisector=function(r){return e(r.length===1?function(e,t){return l(r(e),t)}:r)};I.shuffle=function(e,t,r){if((n=arguments.length)<3){r=e.length;if(n<2)t=0}var n=r-t,a,i;while(n){i=Math.random()*n--|0;a=e[n+t],e[n+t]=e[i+t],e[i+t]=a}return e};I.permute=function(e,t){var r=t.length,n=new Array(r);while(r--)n[r]=e[t[r]];return n};I.pairs=function(e){var t=0,r=e.length-1,n,a=e[0],i=new Array(r<0?0:r);while(t<r)i[t]=[n=a,a=e[++t]];return i};I.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,r=I.min(e,h),n=new Array(r);++t<r;){for(var a=-1,i,o=n[t]=new Array(i);++a<i;){o[a]=e[a][t]}}return n};function h(e){return e.length}I.zip=function(){return I.transpose(arguments)};I.keys=function(e){var t=[];for(var r in e)t.push(r);return t};I.values=function(e){var t=[];for(var r in e)t.push(e[r]);return t};I.entries=function(e){var t=[];for(var r in e)t.push({key:r,value:e[r]});return t};I.merge=function(e){var t=e.length,r,n=-1,a=0,i,o;while(++n<t)a+=e[n].length;i=new Array(a);while(--t>=0){o=e[t];r=o.length;while(--r>=0){i[--a]=o[r]}}return i};var P=Math.abs;I.range=function(e,t,r){if(arguments.length<3){r=1;if(arguments.length<2){t=e;e=0}}if((t-e)/r===Infinity)throw new Error("infinite range");var n=[],a=p(P(r)),i=-1,o;e*=a,t*=a,r*=a;if(r<0)while((o=e+r*++i)>t)n.push(o/a);else while((o=e+r*++i)<t)n.push(o/a);return n};function p(e){var t=1;while(e*t%1)t*=10;return t}function v(e,t){for(var r in t){Object.defineProperty(e.prototype,r,{value:t[r],enumerable:false})}}I.map=function(e,t){var r=new _;if(e instanceof _){e.forEach(function(e,t){r.set(e,t)})}else if(Array.isArray(e)){var n=-1,a=e.length,i;if(arguments.length===1)while(++n<a)r.set(n,e[n]);else while(++n<a)r.set(t.call(e,i=e[n],n),i)}else{for(var o in e)r.set(o,e[o])}return r};function _(){this._=Object.create(null)}var g="__proto__",m="\0";v(_,{has:x,get:function(e){return this._[y(e)]},set:function(e,t){return this._[y(e)]=t},remove:w,keys:A,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:b(t),value:this._[t]});return e},size:T,empty:k,forEach:function(e){for(var t in this._)e.call(this,b(t),this._[t])}});function y(e){return(e+="")===g||e[0]===m?m+e:e}function b(e){return(e+="")[0]===m?e.slice(1):e}function x(e){return y(e)in this._}function w(e){return(e=y(e))in this._&&delete this._[e]}function A(){var e=[];for(var t in this._)e.push(b(t));return e}function T(){var e=0;for(var t in this._)++e;return e}function k(){for(var e in this._)return false;return true}I.nest=function(){var f={},d=[],t=[],h,p;function v(r,e,n){if(n>=d.length)return p?p.call(f,e):h?e.sort(h):e;var t=-1,a=e.length,i=d[n++],o,s,l,c=new _,u;while(++t<a){if(u=c.get(o=i(s=e[t]))){u.push(s)}else{c.set(o,[s])}}if(r){s=r();l=function(e,t){s.set(e,v(r,t,n))}}else{s={};l=function(e,t){s[e]=v(r,t,n)}}c.forEach(l);return s}function i(e,r){if(r>=d.length)return e;var n=[],a=t[r++];e.forEach(function(e,t){n.push({key:e,values:i(t,r)})});return a?n.sort(function(e,t){return a(e.key,t.key)}):n}f.map=function(e,t){return v(t,e,0)};f.entries=function(e){return i(v(I.map,e,0),0)};f.key=function(e){d.push(e);return f};f.sortKeys=function(e){t[d.length-1]=e;return f};f.sortValues=function(e){h=e;return f};f.rollup=function(e){p=e;return f};return f};I.set=function(e){var t=new M;if(e)for(var r=0,n=e.length;r<n;++r)t.add(e[r]);return t};function M(){this._=Object.create(null)}v(M,{has:x,add:function(e){this._[y(e+="")]=true;return e},remove:w,values:A,size:T,empty:k,forEach:function(e){for(var t in this._)e.call(this,b(t))}});I.behavior={};function N(e){return e}I.rebind=function(e,t){var r=1,n=arguments.length,a;while(++r<n)e[a=arguments[r]]=S(e,t,t[a]);return e};function S(t,r,n){return function(){var e=n.apply(r,arguments);return e===r?t:e}}function C(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var r=0,n=L.length;r<n;++r){var a=L[r]+t;if(a in e)return a}}var L=["webkit","ms","moz","Moz","o","O"];function E(){}I.dispatch=function(){var e=new D,t=-1,r=arguments.length;while(++t<r)e[arguments[t]]=O(e);return e};function D(){}D.prototype.on=function(e,t){var r=e.indexOf("."),n="";if(r>=0){n=e.slice(r+1);e=e.slice(0,r)}if(e)return arguments.length<2?this[e].on(n):this[e].on(n,t);if(arguments.length===2){if(t==null)for(e in this){if(this.hasOwnProperty(e))this[e].on(n,null)}return this}};function O(a){var i=[],o=new _;function e(){var e=i,t=-1,r=e.length,n;while(++t<r)if(n=e[t].on)n.apply(this,arguments);return a}e.on=function(e,t){var r=o.get(e),n;if(arguments.length<2)return r&&r.on;if(r){r.on=null;i=i.slice(0,n=i.indexOf(r)).concat(i.slice(n+1));o.remove(e)}if(t)i.push(o.set(e,{on:t}));return a};return e}I.event=null;function F(){I.event.preventDefault()}function j(){var e=I.event,t;while(t=e.sourceEvent)e=t;return e}function B(a){var i=new D,e=0,t=arguments.length;while(++e<t)i[arguments[e]]=O(i);i.of=function(r,n){return function(e){try{var t=e.sourceEvent=I.event;e.target=a;I.event=e;i[e.type].apply(r,n)}finally{I.event=t}}};return i}I.requote=function(e){return e.replace(H,"\\$&")};var H=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var U={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)e[r]=t[r]};function V(e){U(e,W);return e}var q=function(e,t){return t.querySelector(e)},Y=function(e,t){return t.querySelectorAll(e)},G=function(e,t){var r=e.matches||e[C(e,"matchesSelector")];G=function(e,t){return r.call(e,t)};return G(e,t)};if(typeof Sizzle==="function"){q=function(e,t){return Sizzle(e,t)[0]||null};Y=Sizzle;G=Sizzle.matchesSelector}I.selection=function(){return I.select(R.documentElement)};var W=I.selection.prototype=[];W.select=function(e){var t=[],r,n,a,i;e=X(e);for(var o=-1,s=this.length;++o<s;){t.push(r=[]);r.parentNode=(a=this[o]).parentNode;for(var l=-1,c=a.length;++l<c;){if(i=a[l]){r.push(n=e.call(i,i.__data__,l,o));if(n&&"__data__"in i)n.__data__=i.__data__}else{r.push(null)}}}return V(t)};function X(e){return typeof e==="function"?e:function(){return q(e,this)}}W.selectAll=function(e){var t=[],r,n;e=Z(e);for(var a=-1,i=this.length;++a<i;){for(var o=this[a],s=-1,l=o.length;++s<l;){if(n=o[s]){t.push(r=f(e.call(n,n.__data__,s,a)));r.parentNode=n}}}return V(t)};function Z(e){return typeof e==="function"?e:function(){return Y(e,this)}}var J="http://www.w3.org/1999/xhtml";var $={svg:"http://www.w3.org/2000/svg",xhtml:J,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};I.ns={prefix:$,qualify:function(e){var t=e.indexOf(":"),r=e;if(t>=0&&(r=e.slice(0,t))!=="xmlns")e=e.slice(t+1);return $.hasOwnProperty(r)?{space:$[r],local:e}:e}};W.attr=function(e,t){if(arguments.length<2){if(typeof e==="string"){var r=this.node();e=I.ns.qualify(e);return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}for(t in e)this.each(Q(t,e[t]));return this}return this.each(Q(e,t))};function Q(t,r){t=I.ns.qualify(t);function e(){this.removeAttribute(t)}function n(){this.removeAttributeNS(t.space,t.local)}function a(){this.setAttribute(t,r)}function i(){this.setAttributeNS(t.space,t.local,r)}function o(){var e=r.apply(this,arguments);if(e==null)this.removeAttribute(t);else this.setAttribute(t,e)}function s(){var e=r.apply(this,arguments);if(e==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,e)}return r==null?t.local?n:e:typeof r==="function"?t.local?s:o:t.local?i:a}function K(e){return e.trim().replace(/\s+/g," ")}W.classed=function(e,t){if(arguments.length<2){if(typeof e==="string"){var r=this.node(),n=(e=te(e)).length,a=-1;if(t=r.classList){while(++a<n)if(!t.contains(e[a]))return false}else{t=r.getAttribute("class");while(++a<n)if(!ee(e[a]).test(t))return false}return true}for(t in e)this.each(re(t,e[t]));return this}return this.each(re(e,t))};function ee(e){return new RegExp("(?:^|\\s+)"+I.requote(e)+"(?:\\s+|$)","g")}function te(e){return(e+"").trim().split(/^|\s+/)}function re(r,n){r=te(r).map(ne);var a=r.length;function e(){var e=-1;while(++e<a)r[e](this,n)}function t(){var e=-1,t=n.apply(this,arguments);while(++e<a)r[e](this,t)}return typeof n==="function"?t:e}function ne(n){var a=ee(n);return function(e,t){if(r=e.classList)return t?r.add(n):r.remove(n);var r=e.getAttribute("class")||"";if(t){a.lastIndex=0;if(!a.test(r))e.setAttribute("class",K(r+" "+n))}else{e.setAttribute("class",K(r.replace(a," ")))}}}W.style=function(e,t,r){var n=arguments.length;if(n<3){if(typeof e!=="string"){if(n<2)t="";for(r in e)this.each(ae(r,e[r],t));return this}if(n<2){var a=this.node();return z(a).getComputedStyle(a,null).getPropertyValue(e)}r=""}return this.each(ae(e,t,r))};function ae(t,r,n){function e(){this.style.removeProperty(t)}function a(){this.style.setProperty(t,r,n)}function i(){var e=r.apply(this,arguments);if(e==null)this.style.removeProperty(t);else this.style.setProperty(t,e,n)}return r==null?e:typeof r==="function"?i:a}W.property=function(e,t){if(arguments.length<2){if(typeof e==="string")return this.node()[e];for(t in e)this.each(ie(t,e[t]));return this}return this.each(ie(e,t))};function ie(t,r){function e(){delete this[t]}function n(){this[t]=r}function a(){var e=r.apply(this,arguments);if(e==null)delete this[t];else this[t]=e}return r==null?e:typeof r==="function"?a:n}W.text=function(t){return arguments.length?this.each(typeof t==="function"?function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}:t==null?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent};W.html=function(t){return arguments.length?this.each(typeof t==="function"?function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}:t==null?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML};W.append=function(e){e=oe(e);return this.select(function(){return this.appendChild(e.apply(this,arguments))})};function oe(r){function e(){var e=this.ownerDocument,t=this.namespaceURI;return t===J&&e.documentElement.namespaceURI===J?e.createElement(r):e.createElementNS(t,r)}function t(){return this.ownerDocument.createElementNS(r.space,r.local)}return typeof r==="function"?r:(r=I.ns.qualify(r)).local?t:e}W.insert=function(e,t){e=oe(e);t=X(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})};W.remove=function(){return this.each(se)};function se(){var e=this.parentNode;if(e)e.removeChild(this)}W.data=function(e,p){var t=-1,r=this.length,n,a;if(!arguments.length){e=new Array(r=(n=this[0]).length);while(++t<r){if(a=n[t]){e[t]=a.__data__}}return e}function i(e,t){var r,n=e.length,a=t.length,i=Math.min(n,a),o=new Array(a),s=new Array(a),l=new Array(n),c,u;if(p){var f=new _,d=new Array(n),h;for(r=-1;++r<n;){if(c=e[r]){if(f.has(h=p.call(c,c.__data__,r))){l[r]=c}else{f.set(h,c)}d[r]=h}}for(r=-1;++r<a;){if(!(c=f.get(h=p.call(t,u=t[r],r)))){s[r]=le(u)}else if(c!==true){o[r]=c;c.__data__=u}f.set(h,true)}for(r=-1;++r<n;){if(r in d&&f.get(d[r])!==true){l[r]=e[r]}}}else{for(r=-1;++r<i;){c=e[r];u=t[r];if(c){c.__data__=u;o[r]=c}else{s[r]=le(u)}}for(;r<a;++r){s[r]=le(t[r])}for(;r<n;++r){l[r]=e[r]}}s.update=o;s.parentNode=o.parentNode=l.parentNode=e.parentNode;v.push(s);g.push(o);m.push(l)}var v=de([]),g=V([]),m=V([]);if(typeof e==="function"){while(++t<r){i(n=this[t],e.call(n,n.parentNode.__data__,t))}}else{while(++t<r){i(n=this[t],e)}}g.enter=function(){return v};g.exit=function(){return m};return g};function le(e){return{__data__:e}}W.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")};W.filter=function(e){var t=[],r,n,a;if(typeof e!=="function")e=ce(e);for(var i=0,o=this.length;i<o;i++){t.push(r=[]);r.parentNode=(n=this[i]).parentNode;for(var s=0,l=n.length;s<l;s++){if((a=n[s])&&e.call(a,a.__data__,s,i)){r.push(a)}}}return V(t)};function ce(e){return function(){return G(this,e)}}W.order=function(){for(var e=-1,t=this.length;++e<t;){for(var r=this[e],n=r.length-1,a=r[n],i;--n>=0;){if(i=r[n]){if(a&&a!==i.nextSibling)a.parentNode.insertBefore(i,a);a=i}}}return this};W.sort=function(e){e=ue.apply(this,arguments);for(var t=-1,r=this.length;++t<r;)this[t].sort(e);return this.order()};function ue(r){if(!arguments.length)r=l;return function(e,t){return e&&t?r(e.__data__,t.__data__):!e-!t}}W.each=function(n){return fe(this,function(e,t,r){n.call(e,e.__data__,t,r)})};function fe(e,t){for(var r=0,n=e.length;r<n;r++){for(var a=e[r],i=0,o=a.length,s;i<o;i++){if(s=a[i])t(s,i,r)}}return e}W.call=function(e){var t=f(arguments);e.apply(t[0]=this,t);return this};W.empty=function(){return!this.node()};W.node=function(){for(var e=0,t=this.length;e<t;e++){for(var r=this[e],n=0,a=r.length;n<a;n++){var i=r[n];if(i)return i}}return null};W.size=function(){var e=0;fe(this,function(){++e});return e};function de(e){U(e,he);return e}var he=[];I.selection.enter=de;I.selection.enter.prototype=he;he.append=W.append;he.empty=W.empty;he.node=W.node;he.call=W.call;he.size=W.size;he.select=function(e){var t=[],r,n,a,i,o;for(var s=-1,l=this.length;++s<l;){a=(i=this[s]).update;t.push(r=[]);r.parentNode=i.parentNode;for(var c=-1,u=i.length;++c<u;){if(o=i[c]){r.push(a[c]=n=e.call(i.parentNode,o.__data__,c,s));n.__data__=o.__data__}else{r.push(null)}}}return V(t)};he.insert=function(e,t){if(arguments.length<2)t=pe(this);return W.insert.call(this,e,t)};function pe(o){var s,l;return function(e,t,r){var n=o[r].update,a=n.length,i;if(r!=l)l=r,s=0;if(t>=s)s=t+1;while(!(i=n[s])&&++s<a);return i}}I.select=function(e){var t;if(typeof e==="string"){t=[q(e,R)];t.parentNode=R.documentElement}else{t=[e];t.parentNode=s(e)}return V([t])};I.selectAll=function(e){var t;if(typeof e==="string"){t=f(Y(e,R));t.parentNode=R.documentElement}else{t=f(e);t.parentNode=null}return V([t])};W.on=function(e,t,r){var n=arguments.length;if(n<3){if(typeof e!=="string"){if(n<2)t=false;for(r in e)this.each(ve(r,e[r],t));return this}if(n<2)return(n=this.node()["__on"+e])&&n._;r=false}return this.each(ve(e,t,r))};function ve(a,t,r){var n="__on"+a,e=a.indexOf("."),i=me;if(e>0)a=a.slice(0,e);var o=ge.get(a);if(o)a=o,i=_e;function s(){var e=this[n];if(e){this.removeEventListener(a,e,e.$);delete this[n]}}function l(){var e=i(t,f(arguments));s.call(this);this.addEventListener(a,this[n]=e,e.$=r);e._=t}function c(){var e=new RegExp("^__on([^.]+)"+I.requote(a)+"$"),t;for(var r in this){if(t=r.match(e)){var n=this[r];this.removeEventListener(t[1],n,n.$);delete this[r]}}}return e?t?l:s:t?E:c}var ge=I.map({mouseenter:"mouseover",mouseleave:"mouseout"});if(R){ge.forEach(function(e){if("on"+e in R)ge.remove(e)})}function me(r,n){return function(e){var t=I.event;I.event=e;n[0]=this.__data__;try{r.apply(this,n)}finally{I.event=t}}}function _e(e,t){var n=me(e,t);return function(e){var t=this,r=e.relatedTarget;if(!r||r!==t&&!(r.compareDocumentPosition(t)&8)){n.call(t,e)}}}var ye,be=0;function xe(e){var r=".dragsuppress-"+ ++be,n="click"+r,a=I.select(z(e)).on("touchmove"+r,F).on("dragstart"+r,F).on("selectstart"+r,F);if(ye==null){ye="onselectstart"in e?false:C(e.style,"userSelect")}if(ye){var i=s(e).style,o=i[ye];i[ye]="none"}return function(e){a.on(r,null);if(ye)i[ye]=o;if(e){var t=function(){a.on(n,null)};a.on(n,function(){F();t()},true);setTimeout(t,0)}}}I.mouse=function(e){return Ae(e,j())};var we=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ae(e,t){if(t.changedTouches)t=t.changedTouches[0];var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();if(we<0){var a=z(e);if(a.scrollX||a.scrollY){r=I.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=r[0][0].getScreenCTM();we=!(i.f||i.e);r.remove()}}if(we)n.x=t.pageX,n.y=t.pageY;else n.x=t.clientX,n.y=t.clientY;n=n.matrixTransform(e.getScreenCTM().inverse());return[n.x,n.y]}var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}I.touch=function(e,t,r){if(arguments.length<3)r=t,t=j().changedTouches;if(t)for(var n=0,a=t.length,i;n<a;++n){if((i=t[n]).identifier===r){return Ae(e,i)}}};I.behavior.drag=function(){var _=B(r,"drag","dragstart","dragend"),y=null,e=n(E,I.mouse,z,"mousemove","mouseup"),t=n(Te,I.touch,N,"touchmove","touchend");function r(){this.on("mousedown.drag",e).on("touchstart.drag",t)}function n(h,p,v,g,m){return function(){var e=this,t=I.event.target.correspondingElement||I.event.target,n=e.parentNode,a=_.of(e,arguments),i=0,o=h(),r=".drag"+(o==null?"":"-"+o),s,l=I.select(v(t)).on(g+r,f).on(m+r,d),c=xe(t),u=p(n,o);if(y){s=y.apply(e,arguments);s=[s.x-u[0],s.y-u[1]]}else{s=[0,0]}a({type:"dragstart"});function f(){var e=p(n,o),t,r;if(!e)return;t=e[0]-u[0];r=e[1]-u[1];i|=t|r;u=e;a({type:"drag",x:e[0]+s[0],y:e[1]+s[1],dx:t,dy:r})}function d(){if(!p(n,o))return;l.on(g+r,null).on(m+r,null);c(i);a({type:"dragend"})}}}r.origin=function(e){if(!arguments.length)return y;y=e;return r};return I.rebind(r,_,"on")};function Te(){return I.event.changedTouches[0].identifier}I.touches=function(r,e){if(arguments.length<2)e=j().touches;return e?f(e).map(function(e){var t=Ae(r,e);t.identifier=e.identifier;return t}):[]};var ke=1e-6,Me=ke*ke,Se=Math.PI,Ce=2*Se,Le=Ce-ke,Ee=Se/2,De=Se/180,Oe=180/Se;function Pe(e){return e>0?1:e<0?-1:0}function Ie(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0])}function Re(e){return e>1?0:e<-1?Se:Math.acos(e)}function ze(e){return e>1?Ee:e<-1?-Ee:Math.asin(e)}function Ne(e){return((e=Math.exp(e))-1/e)/2}function Fe(e){return((e=Math.exp(e))+1/e)/2}function je(e){return((e=Math.exp(2*e))-1)/(e+1)}function Be(e){return(e=Math.sin(e/2))*e}var He=Math.SQRT2,Ue=2,Ve=4;I.interpolateZoom=function(e,t){var a=e[0],i=e[1],o=e[2],r=t[0],n=t[1],s=t[2],l=r-a,c=n-i,u=l*l+c*c,f,d;if(u<Me){d=Math.log(s/o)/He;f=function(e){return[a+e*l,i+e*c,o*Math.exp(He*e*d)]}}else{var h=Math.sqrt(u),p=(s*s-o*o+Ve*u)/(2*o*Ue*h),v=(s*s-o*o-Ve*u)/(2*s*Ue*h),g=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);d=(m-g)/He;f=function(e){var t=e*d,r=Fe(g),n=o/(Ue*h)*(r*je(He*t+g)-Ne(g));return[a+n*l,i+n*c,o*r/Fe(He*t+g)]}}f.duration=d*1e3;return f};I.behavior.zoom=function(){var b={x:0,y:0,k:1},t,l,r,c=[960,500],n=qe,a=250,i=0,s="mousedown.zoom",u="mousemove.zoom",f="mouseup.zoom",o,x="touchstart.zoom",w,A=B(g,"zoomstart","zoom","zoomend"),d,h,p,v;if(!Ge){Ge="onwheel"in R?(Ye=function(){return-I.event.deltaY*(I.event.deltaMode?120:1)},"wheel"):"onmousewheel"in R?(Ye=function(){return I.event.wheelDelta},"mousewheel"):(Ye=function(){return-I.event.detail},"MozMousePixelScroll")}function g(e){e.on(s,D).on(Ge+".zoom",y).on("dblclick.zoom",P).on(x,O)}g.event=function(e){e.each(function(){var s=A.of(this,arguments),t=b;if(El){I.select(this).transition().each("start.zoom",function(){b=this.__chart__||{x:0,y:0,k:1};C(s)}).tween("zoom:zoom",function(){var n=c[0],e=c[1],a=l?l[0]:n/2,i=l?l[1]:e/2,o=I.interpolateZoom([(a-b.x)/b.k,(i-b.y)/b.k,n/b.k],[(a-t.x)/t.k,(i-t.y)/t.k,n/t.k]);return function(e){var t=o(e),r=n/t[2];this.__chart__=b={x:a-t[0]*r,y:i-t[1]*r,k:r};L(s)}}).each("interrupt.zoom",function(){E(s)}).each("end.zoom",function(){E(s)})}else{this.__chart__=b;C(s);L(s);E(s)}})};g.translate=function(e){if(!arguments.length)return[b.x,b.y];b={x:+e[0],y:+e[1],k:b.k};_();return g};g.scale=function(e){if(!arguments.length)return b.k;b={x:b.x,y:b.y,k:null};k(+e);_();return g};g.scaleExtent=function(e){if(!arguments.length)return n;n=e==null?qe:[+e[0],+e[1]];return g};g.center=function(e){if(!arguments.length)return r;r=e&&[+e[0],+e[1]];return g};g.size=function(e){if(!arguments.length)return c;c=e&&[+e[0],+e[1]];return g};g.duration=function(e){if(!arguments.length)return a;a=+e;return g};g.x=function(e){if(!arguments.length)return h;h=e;d=e.copy();b={x:0,y:0,k:1};return g};g.y=function(e){if(!arguments.length)return v;v=e;p=e.copy();b={x:0,y:0,k:1};return g};function T(e){return[(e[0]-b.x)/b.k,(e[1]-b.y)/b.k]}function m(e){return[e[0]*b.k+b.x,e[1]*b.k+b.y]}function k(e){b.k=Math.max(n[0],Math.min(n[1],e))}function M(e,t){t=m(t);b.x+=e[0]-t[0];b.y+=e[1]-t[1]}function S(e,t,r,n){e.__chart__={x:b.x,y:b.y,k:b.k};k(Math.pow(2,n));M(l=t,r);e=I.select(e);if(a>0)e=e.transition().duration(a);e.call(g.event)}function _(){if(h)h.domain(d.range().map(function(e){return(e-b.x)/b.k}).map(d.invert));if(v)v.domain(p.range().map(function(e){return(e-b.y)/b.k}).map(p.invert))}function C(e){if(!i++)e({type:"zoomstart"})}function L(e){_();e({type:"zoom",scale:b.k,translate:[b.x,b.y]})}function E(e){if(!--i)e({type:"zoomend"}),l=null}function D(){var e=this,t=A.of(e,arguments),r=0,n=I.select(z(e)).on(u,o).on(f,s),a=T(I.mouse(e)),i=xe(e);kl.call(e);C(t);function o(){r=1;M(I.mouse(e),a);L(t)}function s(){n.on(u,null).on(f,null);i(r);E(t)}}function O(){var u=this,c=A.of(u,arguments),f={},d=0,h,a=".zoom-"+I.event.changedTouches[0].identifier,p="touchmove"+a,v="touchend"+a,g=[],i=I.select(u),o=xe(u);e();C(c);i.on(s,null).on(x,e);function m(){var e=I.touches(u);h=b.k;e.forEach(function(e){if(e.identifier in f)f[e.identifier]=T(e)});return e}function e(){var e=I.event.target;I.select(e).on(p,_).on(v,y);g.push(e);var t=I.event.changedTouches;for(var r=0,n=t.length;r<n;++r){f[t[r].identifier]=null}var a=m(),i=Date.now();if(a.length===1){if(i-w<500){var o=a[0];S(u,o,f[o.identifier],Math.floor(Math.log(b.k)/Math.LN2)+1);F()}w=i}else if(a.length>1){var o=a[0],s=a[1],l=o[0]-s[0],c=o[1]-s[1];d=l*l+c*c}}function _(){var e=I.touches(u),t,r,n,a;kl.call(u);for(var i=0,o=e.length;i<o;++i,a=null){n=e[i];if(a=f[n.identifier]){if(r)break;t=n,r=a}}if(a){var s=(s=n[0]-t[0])*s+(s=n[1]-t[1])*s,l=d&&Math.sqrt(s/d);t=[(t[0]+n[0])/2,(t[1]+n[1])/2];r=[(r[0]+a[0])/2,(r[1]+a[1])/2];k(l*h)}w=null;M(t,r);L(c)}function y(){if(I.event.touches.length){var e=I.event.changedTouches;for(var t=0,r=e.length;t<r;++t){delete f[e[t].identifier]}for(var n in f){return void m()}}I.selectAll(g).on(a,null);i.on(s,D).on(x,O);o();E(c)}}function y(){var e=A.of(this,arguments);if(o)clearTimeout(o);else kl.call(this),t=T(l=r||I.mouse(this)),C(e);o=setTimeout(function(){o=null;E(e)},50);F();k(Math.pow(2,Ye()*.002)*b.k);M(l,t);L(e)}function P(){var e=I.mouse(this),t=Math.log(b.k)/Math.LN2;S(this,e,T(e),I.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return I.rebind(g,A,"on")};var qe=[0,Infinity],Ye,Ge;I.color=We;function We(){}We.prototype.toString=function(){return this.rgb()+""};I.hsl=Xe;function Xe(e,t,r){return this instanceof Xe?void(this.h=+e,this.s=+t,this.l=+r):arguments.length<2?e instanceof Xe?new Xe(e.h,e.s,e.l):gt(""+e,mt,Xe):new Xe(e,t,r)}var Ze=Xe.prototype=new We;Ze.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);return new Xe(this.h,this.s,this.l/e)};Ze.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new Xe(this.h,this.s,e*this.l)};Ze.rgb=function(){return Je(this.h,this.s,this.l)};function Je(e,t,r){var n,a;e=isNaN(e)?0:(e%=360)<0?e+360:e;t=isNaN(t)?0:t<0?0:t>1?1:t;r=r<0?0:r>1?1:r;a=r<=.5?r*(1+t):r+t-r*t;n=2*r-a;function i(e){if(e>360)e-=360;else if(e<0)e+=360;if(e<60)return n+(a-n)*e/60;if(e<180)return a;if(e<240)return n+(a-n)*(240-e)/60;return n}function o(e){return Math.round(i(e)*255)}return new ft(o(e+120),o(e),o(e-120))}I.hcl=$e;function $e(e,t,r){return this instanceof $e?void(this.h=+e,this.c=+t,this.l=+r):arguments.length<2?e instanceof $e?new $e(e.h,e.c,e.l):e instanceof et?st(e.l,e.a,e.b):st((e=_t((e=I.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new $e(e,t,r)}var Qe=$e.prototype=new We;Qe.brighter=function(e){return new $e(this.h,this.c,Math.min(100,this.l+tt*(arguments.length?e:1)))};Qe.darker=function(e){return new $e(this.h,this.c,Math.max(0,this.l-tt*(arguments.length?e:1)))};Qe.rgb=function(){return Ke(this.h,this.c,this.l).rgb()};function Ke(e,t,r){if(isNaN(e))e=0;if(isNaN(t))t=0;return new et(r,Math.cos(e*=De)*t,Math.sin(e)*t)}I.lab=et;function et(e,t,r){return this instanceof et?void(this.l=+e,this.a=+t,this.b=+r):arguments.length<2?e instanceof et?new et(e.l,e.a,e.b):e instanceof $e?Ke(e.h,e.c,e.l):_t((e=ft(e)).r,e.g,e.b):new et(e,t,r)}var tt=18;var rt=.95047,nt=1,at=1.08883;var it=et.prototype=new We;it.brighter=function(e){return new et(Math.min(100,this.l+tt*(arguments.length?e:1)),this.a,this.b)};it.darker=function(e){return new et(Math.max(0,this.l-tt*(arguments.length?e:1)),this.a,this.b)};it.rgb=function(){return ot(this.l,this.a,this.b)};function ot(e,t,r){var n=(e+16)/116,a=n+t/500,i=n-r/200;a=lt(a)*rt;n=lt(n)*nt;i=lt(i)*at;return new ft(ut(3.2404542*a-1.5371385*n-.4985314*i),ut(-.969266*a+1.8760108*n+.041556*i),ut(.0556434*a-.2040259*n+1.0572252*i))}function st(e,t,r){return e>0?new $e(Math.atan2(r,t)*Oe,Math.sqrt(t*t+r*r),e):new $e(NaN,NaN,e)}function lt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ct(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ut(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}I.rgb=ft;function ft(e,t,r){return this instanceof ft?void(this.r=~~e,this.g=~~t,this.b=~~r):arguments.length<2?e instanceof ft?new ft(e.r,e.g,e.b):gt(""+e,ft,Je):new ft(e,t,r)}function dt(e){return new ft(e>>16,e>>8&255,e&255)}function ht(e){return dt(e)+""}var pt=ft.prototype=new We;pt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,r=this.g,n=this.b,a=30;if(!t&&!r&&!n)return new ft(a,a,a);if(t&&t<a)t=a;if(r&&r<a)r=a;if(n&&n<a)n=a;return new ft(Math.min(255,t/e),Math.min(255,r/e),Math.min(255,n/e))};pt.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new ft(e*this.r,e*this.g,e*this.b)};pt.hsl=function(){return mt(this.r,this.g,this.b)};pt.toString=function(){return"#"+vt(this.r)+vt(this.g)+vt(this.b)};function vt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function gt(e,t,r){var n=0,a=0,i=0,o,s,l;o=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase());if(o){s=o[2].split(",");switch(o[1]){case"hsl":{return r(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100)}case"rgb":{return t(bt(s[0]),bt(s[1]),bt(s[2]))}}}if(l=xt.get(e)){return t(l.r,l.g,l.b)}if(e!=null&&e.charAt(0)==="#"&&!isNaN(l=parseInt(e.slice(1),16))){if(e.length===4){n=(l&3840)>>4;n=n>>4|n;a=l&240;a=a>>4|a;i=l&15;i=i<<4|i}else if(e.length===7){n=(l&16711680)>>16;a=(l&65280)>>8;i=l&255}}return t(n,a,i)}function mt(e,t,r){var n=Math.min(e/=255,t/=255,r/=255),a=Math.max(e,t,r),i=a-n,o,s,l=(a+n)/2;if(i){s=l<.5?i/(a+n):i/(2-a-n);if(e==a)o=(t-r)/i+(t<r?6:0);else if(t==a)o=(r-e)/i+2;else o=(e-t)/i+4;o*=60}else{o=NaN;s=l>0&&l<1?0:o}return new Xe(o,s,l)}function _t(e,t,r){e=yt(e);t=yt(t);r=yt(r);var n=ct((.4124564*e+.3575761*t+.1804375*r)/rt),a=ct((.2126729*e+.7151522*t+.072175*r)/nt),i=ct((.0193339*e+.119192*t+.9503041*r)/at);return et(116*a-16,500*(n-a),200*(a-i))}function yt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function bt(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}var xt=I.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});xt.forEach(function(e,t){xt.set(e,dt(t))});function wt(e){return typeof e==="function"?e:function(){return e}}I.functor=wt;I.xhr=At(N);function At(n){return function(e,t,r){if(arguments.length===2&&typeof t==="function")r=t,t=null;return Tt(e,t,n,r)}}function Tt(a,i,r,e){var o={},s=I.dispatch("beforesend","progress","load","error"),l={},c=new XMLHttpRequest,u=null;if(self.XDomainRequest&&!("withCredentials"in c)&&/^(http(s)?:)?\/\//.test(a))c=new XDomainRequest;"onload"in c?c.onload=c.onerror=t:c.onreadystatechange=function(){c.readyState>3&&t()};function t(){var e=c.status,t;if(!e&&Mt(c)||e>=200&&e<300||e===304){try{t=r.call(o,c)}catch(e){s.error.call(o,e);return}s.load.call(o,t)}else{s.error.call(o,c)}}c.onprogress=function(e){var t=I.event;I.event=e;try{s.progress.call(o,c)}finally{I.event=t}};o.header=function(e,t){e=(e+"").toLowerCase();if(arguments.length<2)return l[e];if(t==null)delete l[e];else l[e]=t+"";return o};o.mimeType=function(e){if(!arguments.length)return i;i=e==null?null:e+"";return o};o.responseType=function(e){if(!arguments.length)return u;u=e;return o};o.response=function(e){r=e;return o};["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(f(arguments)))}});o.send=function(e,t,r){if(arguments.length===2&&typeof t==="function")r=t,t=null;c.open(e,a,true);if(i!=null&&!("accept"in l))l["accept"]=i+",*/*";if(c.setRequestHeader)for(var n in l)c.setRequestHeader(n,l[n]);if(i!=null&&c.overrideMimeType)c.overrideMimeType(i);if(u!=null)c.responseType=u;if(r!=null)o.on("error",r).on("load",function(e){r(null,e)});s.beforesend.call(o,c);c.send(t==null?null:t);return o};o.abort=function(){c.abort();return o};I.rebind(o,s,"on");return e==null?o:o.get(kt(e))}function kt(r){return r.length===1?function(e,t){r(e==null?t:null)}:r}function Mt(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}I.dsv=function(a,i){var t=new RegExp('["'+a+"\n]"),d=a.charCodeAt(0);function o(e,t,r){if(arguments.length<3)r=t,t=null;var n=Tt(e,i,t==null?s:l(t),r);n.row=function(e){return arguments.length?n.response((t=e)==null?s:l(e)):t};return n}function s(e){return o.parse(e.responseText)}function l(t){return function(e){return o.parse(e.responseText,t)}}o.parse=function(e,n){var t;return o.parseRows(e,function(a,e){if(t)return t(a,e-1);var r=function(e){var t={};var r=a.length;for(var n=0;n<r;++n){t[a[n]]=e[n]}return t};t=n?function(e,t){return n(r(e),t)}:r})};o.parseRows=function(a,e){var i={},o={},t=[],s=a.length,l=0,r=0,n,c;function u(){if(l>=s)return o;if(c)return c=false,i;var e=l;if(a.charCodeAt(e)===34){var t=e;while(t++<s){if(a.charCodeAt(t)===34){if(a.charCodeAt(t+1)!==34)break;++t}}l=t+2;var r=a.charCodeAt(t+1);if(r===13){c=true;if(a.charCodeAt(t+2)===10)++l}else if(r===10){c=true}return a.slice(e+1,t).replace(/""/g,'"')}while(l<s){var r=a.charCodeAt(l++),n=1;if(r===10)c=true;else if(r===13){c=true;if(a.charCodeAt(l)===10)++l,++n}else if(r!==d)continue;return a.slice(e,l-n)}return a.slice(e)}while((n=u())!==o){var f=[];while(n!==i&&n!==o){f.push(n);n=u()}if(e&&(f=e(f,r++))==null)continue;t.push(f)}return t};o.format=function(e){if(Array.isArray(e[0]))return o.formatRows(e);var r=new M,n=[];e.forEach(function(e){for(var t in e){if(!r.has(t)){n.push(r.add(t))}}});return[n.map(c).join(a)].concat(e.map(function(t){return n.map(function(e){return c(t[e])}).join(a)})).join("\n")};o.formatRows=function(e){return e.map(r).join("\n")};function r(e){return e.map(c).join(a)}function c(e){return t.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return o};I.csv=I.dsv(",","text/csv");I.tsv=I.dsv("\t","text/tab-separated-values");var St,Ct,Lt,Et,Dt=this[C(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};I.timer=function(){Ot.apply(this,arguments)};function Ot(e,t,r){var n=arguments.length;if(n<2)t=0;if(n<3)r=Date.now();var a=r+t,i={c:e,t:a,n:null};if(Ct)Ct.n=i;else St=i;Ct=i;if(!Lt){Et=clearTimeout(Et);Lt=1;Dt(Pt)}return i}function Pt(){var e=It(),t=Rt()-e;if(t>24){if(isFinite(t)){clearTimeout(Et);Et=setTimeout(Pt,t)}Lt=0}else{Lt=1;Dt(Pt)}}I.timer.flush=function(){It();Rt()};function It(){var e=Date.now(),t=St;while(t){if(e>=t.t&&t.c(e-t.t))t.c=null;t=t.n}return e}function Rt(){var e,t=St,r=Infinity;while(t){if(t.c){if(t.t<r)r=t.t;t=(e=t).n}else{t=e?e.n=t.n:St=t.n}}Ct=e;return r}function zt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}I.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Nt=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Ft);I.formatPrefix=function(e,t){var r=0;if(e=+e){if(e<0)e*=-1;if(t)e=I.round(e,zt(e,t));r=1+Math.floor(1e-12+Math.log(e)/Math.LN10);r=Math.max(-24,Math.min(24,Math.floor((r-1)/3)*3))}return Nt[8+r/3]};function Ft(e,t){var r=Math.pow(10,P(8-t)*3);return{scale:t>8?function(e){return e/r}:function(e){return e*r},symbol:e}}function jt(e){var T=e.decimal,s=e.thousands,l=e.grouping,n=e.currency,k=l&&s?function(e,t){var r=e.length,n=[],a=0,i=l[0],o=0;while(r>0&&i>0){if(o+i+1>t)i=Math.max(1,t-o);n.push(e.substring(r-=i,r+i));if((o+=i+1)>t)break;i=l[a=(a+1)%l.length]}return n.reverse().join(s)}:N;return function(e){var t=Bt.exec(e),u=t[1]||" ",f=t[2]||">",d=t[3]||"-",r=t[4]||"",h=t[5],p=+t[6],v=t[7],g=t[8],m=t[9],_=1,y="",b="",x=false,w=true;if(g)g=+g.substring(1);if(h||u==="0"&&f==="="){h=u="0";f="="}switch(m){case"n":v=true;m="g";break;case"%":_=100;b="%";m="f";break;case"p":_=100;b="%";m="r";break;case"b":case"o":case"x":case"X":if(r==="#")y="0"+m.toLowerCase();case"c":w=false;case"d":x=true;g=0;break;case"s":_=-1;m="r";break}if(r==="$")y=n[0],b=n[1];if(m=="r"&&!g)m="g";if(g!=null){if(m=="g")g=Math.max(1,Math.min(21,g));else if(m=="e"||m=="f")g=Math.max(0,Math.min(20,g))}m=Ht.get(m)||Ut;var A=h&&v;return function(e){var t=b;if(x&&e%1)return"";var r=e<0||e===0&&1/e<0?(e=-e,"-"):d==="-"?"":d;if(_<0){var n=I.formatPrefix(e,g);e=n.scale(e);t=n.symbol+b}else{e*=_}e=m(e,g);var a=e.lastIndexOf("."),i,o;if(a<0){var s=w?e.lastIndexOf("e"):-1;if(s<0)i=e,o="";else i=e.substring(0,s),o=e.substring(s)}else{i=e.substring(0,a);o=T+e.substring(a+1)}if(!h&&v)i=k(i,Infinity);var l=y.length+i.length+o.length+(A?0:r.length),c=l<p?new Array(l=p-l+1).join(u):"";if(A)i=k(c+i,c.length?p-o.length:Infinity);r+=y;e=i+o;return(f==="<"?r+e+c:f===">"?c+r+e:f==="^"?c.substring(0,l>>=1)+r+e+c.substring(l):r+(A?e:c+e))+t}}}var Bt=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var Ht=I.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=I.round(e,zt(e,t))).toFixed(Math.max(0,Math.min(20,zt(e*(1+1e-15),t))))}});function Ut(e){return e+""}var Vt=I.time={},qt=Date;function Yt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Yt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Gt.setUTCDate.apply(this._,arguments)},setDay:function(){Gt.setUTCDay.apply(this._,arguments)},setFullYear:function(){Gt.setUTCFullYear.apply(this._,arguments)},setHours:function(){Gt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Gt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Gt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Gt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Gt.setUTCSeconds.apply(this._,arguments)},setTime:function(){Gt.setTime.apply(this._,arguments)}};var Gt=Date.prototype;function Wt(n,i,o){function e(e){var t=n(e),r=a(t,1);return e-t<r-e?t:r}function s(e){i(e=n(new qt(e-1)),1);return e}function a(e,t){i(e=new qt(+e),t);return e}function l(e,t,r){var n=s(e),a=[];if(r>1){while(n<t){if(!(o(n)%r))a.push(new Date(+n));i(n,1)}}else{while(n<t)a.push(new Date(+n)),i(n,1)}return a}function t(e,t,r){try{qt=Yt;var n=new Yt;n._=e;return l(n,t,r)}finally{qt=Date}}n.floor=n;n.round=e;n.ceil=s;n.offset=a;n.range=l;var r=n.utc=Xt(n);r.floor=r;r.round=Xt(e);r.ceil=Xt(s);r.offset=Xt(a);r.range=t;return n}function Xt(n){return function(e,t){try{qt=Yt;var r=new Yt;r._=e;return n(r,t)._}finally{qt=Date}}}Vt.year=Wt(function(e){e=Vt.day(e);e.setMonth(0,1);return e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()});Vt.years=Vt.year.range;Vt.years.utc=Vt.year.utc.range;Vt.day=Wt(function(e){var t=new qt(2e3,0);t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate());return t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1});Vt.days=Vt.day.range;Vt.days.utc=Vt.day.utc.range;Vt.dayOfYear=function(e){var t=Vt.year(e);return Math.floor((e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,r){r=7-r;var t=Vt[e]=Wt(function(e){(e=Vt.day(e)).setDate(e.getDate()-(e.getDay()+r)%7);return e},function(e,t){e.setDate(e.getDate()+Math.floor(t)*7)},function(e){var t=Vt.year(e).getDay();return Math.floor((Vt.dayOfYear(e)+(t+r)%7)/7)-(t!==r)});Vt[e+"s"]=t.range;Vt[e+"s"].utc=t.utc.range;Vt[e+"OfYear"]=function(e){var t=Vt.year(e).getDay();return Math.floor((Vt.dayOfYear(e)+(t+r)%7)/7)}});Vt.week=Vt.sunday;Vt.weeks=Vt.sunday.range;Vt.weeks.utc=Vt.sunday.utc.range;Vt.weekOfYear=Vt.sundayOfYear;function Zt(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,l=e.shortMonths;function c(s){var l=s.length;function e(e){var t=[],r=-1,n=0,a,i,o;while(++r<l){if(s.charCodeAt(r)===37){t.push(s.slice(n,r));if((i=Jt[a=s.charAt(++r)])!=null)a=s.charAt(++r);if(o=b[a])a=o(e,i==null?a==="e"?" ":"0":i);t.push(a);n=r+1}}t.push(s.slice(n,r));return t.join("")}e.parse=function(e){var t={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=u(t,s,e,0);if(r!=e.length)return null;if("p"in t)t.H=t.H%12+t.p*12;var n=t.Z!=null&&qt!==Yt,a=new(n?Yt:qt);if("j"in t)a.setFullYear(t.y,0,t.j);else if("W"in t||"U"in t){if(!("w"in t))t.w="W"in t?1:0;a.setFullYear(t.y,0,1);a.setFullYear(t.y,0,"W"in t?(t.w+6)%7+t.W*7-(a.getDay()+5)%7:t.w+t.U*7-(a.getDay()+6)%7)}else a.setFullYear(t.y,t.m,t.d);a.setHours(t.H+(t.Z/100|0),t.M+t.Z%100,t.S,t.L);return n?a._:a};e.toString=function(){return s};return e}function u(e,t,r,n){var a,i,o,s=0,l=t.length,c=r.length;while(s<l){if(n>=c)return-1;a=t.charCodeAt(s++);if(a===37){o=t.charAt(s++);i=x[o in Jt?t.charAt(s++):o];if(!i||(n=i(e,r,n))<0)return-1}else if(a!=r.charCodeAt(n++)){return-1}}return n}c.utc=function(e){var r=c(e);function t(e){try{qt=Yt;var t=new qt;t._=e;return r(t)}finally{qt=Date}}t.parse=function(e){try{qt=Yt;var t=r.parse(e);return t&&t._}finally{qt=Date}};t.toString=r.toString;return t};c.multi=c.utc.multi=_r;var f=I.map(),d=er(i),h=tr(i),p=er(o),v=tr(o),g=er(s),m=tr(s),_=er(l),y=tr(l);a.forEach(function(e,t){f.set(e.toLowerCase(),t)});var b={a:function(e){return o[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:c(t),d:function(e,t){return Kt(e.getDate(),t,2)},e:function(e,t){return Kt(e.getDate(),t,2)},H:function(e,t){return Kt(e.getHours(),t,2)},I:function(e,t){return Kt(e.getHours()%12||12,t,2)},j:function(e,t){return Kt(1+Vt.dayOfYear(e),t,3)},L:function(e,t){return Kt(e.getMilliseconds(),t,3)},m:function(e,t){return Kt(e.getMonth()+1,t,2)},M:function(e,t){return Kt(e.getMinutes(),t,2)},p:function(e){return a[+(e.getHours()>=12)]},S:function(e,t){return Kt(e.getSeconds(),t,2)},U:function(e,t){return Kt(Vt.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Kt(Vt.mondayOfYear(e),t,2)},x:c(r),X:c(n),y:function(e,t){return Kt(e.getFullYear()%100,t,2)},Y:function(e,t){return Kt(e.getFullYear()%1e4,t,4)},Z:gr,"%":function(){return"%"}};var x={a:w,A:A,b:T,B:k,c:M,d:ur,e:ur,H:dr,I:dr,j:fr,L:vr,m:cr,M:hr,p:L,S:pr,U:nr,w:rr,W:ar,x:S,X:C,y:or,Y:ir,Z:sr,"%":mr};function w(e,t,r){p.lastIndex=0;var n=p.exec(t.slice(r));return n?(e.w=v.get(n[0].toLowerCase()),r+n[0].length):-1}function A(e,t,r){d.lastIndex=0;var n=d.exec(t.slice(r));return n?(e.w=h.get(n[0].toLowerCase()),r+n[0].length):-1}function T(e,t,r){_.lastIndex=0;var n=_.exec(t.slice(r));return n?(e.m=y.get(n[0].toLowerCase()),r+n[0].length):-1}function k(e,t,r){g.lastIndex=0;var n=g.exec(t.slice(r));return n?(e.m=m.get(n[0].toLowerCase()),r+n[0].length):-1}function M(e,t,r){return u(e,b.c.toString(),t,r)}function S(e,t,r){return u(e,b.x.toString(),t,r)}function C(e,t,r){return u(e,b.X.toString(),t,r)}function L(e,t,r){var n=f.get(t.slice(r,r+=2).toLowerCase());return n==null?-1:(e.p=n,r)}return c}var Jt={"-":"",_:" ",0:"0"},$t=/^\s*\d+/,Qt=/^%/;function Kt(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function er(e){return new RegExp("^(?:"+e.map(I.requote).join("|")+")","i")}function tr(e){var t=new _,r=-1,n=e.length;while(++r<n)t.set(e[r].toLowerCase(),r);return t}function rr(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function nr(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r));return n?(e.U=+n[0],r+n[0].length):-1}function ar(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r));return n?(e.W=+n[0],r+n[0].length):-1}function ir(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function or(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r,r+2));return n?(e.y=lr(+n[0]),r+n[0].length):-1}function sr(e,t,r){return/^[+-]\d{4}$/.test(t=t.slice(r,r+5))?(e.Z=-t,r+5):-1}function lr(e){return e+(e>68?1900:2e3)}function cr(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function ur(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function fr(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r,r+3));return n?(e.j=+n[0],r+n[0].length):-1}function dr(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function hr(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function pr(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function vr(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function gr(e){var t=e.getTimezoneOffset(),r=t>0?"-":"+",n=P(t)/60|0,a=P(t)%60;return r+Kt(n,"0",2)+Kt(a,"0",2)}function mr(e,t,r){Qt.lastIndex=0;var n=Qt.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function _r(n){var e=n.length,t=-1;while(++t<e)n[t][0]=this(n[t][0]);return function(e){var t=0,r=n[t];while(!r[1](e))r=n[++t];return r[0](e)}}I.locale=function(e){return{numberFormat:jt(e),timeFormat:Zt(e)}};var yr=I.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});I.format=yr.numberFormat;I.geo={};function br(){}br.prototype={s:0,t:0,add:function(e){wr(e,this.t,xr);wr(xr.s,this.s,this);if(this.s)this.t+=xr.t;else this.s=xr.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var xr=new br;function wr(e,t,r){var n=r.s=e+t,a=n-e,i=n-a;r.t=e-i+(t-a)}I.geo.stream=function(e,t){if(e&&Tr.hasOwnProperty(e.type)){Tr[e.type](e,t)}else{Ar(e,t)}};function Ar(e,t){if(e&&kr.hasOwnProperty(e.type)){kr[e.type](e,t)}}var Tr={Feature:function(e,t){Ar(e.geometry,t)},FeatureCollection:function(e,t){var r=e.features,n=-1,a=r.length;while(++n<a)Ar(r[n].geometry,t)}};var kr={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates;t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){var r=e.coordinates,n=-1,a=r.length;while(++n<a)e=r[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){Mr(e.coordinates,t,0)},MultiLineString:function(e,t){var r=e.coordinates,n=-1,a=r.length;while(++n<a)Mr(r[n],t,0)},Polygon:function(e,t){Sr(e.coordinates,t)},MultiPolygon:function(e,t){var r=e.coordinates,n=-1,a=r.length;while(++n<a)Sr(r[n],t)},GeometryCollection:function(e,t){var r=e.geometries,n=-1,a=r.length;while(++n<a)Ar(r[n],t)}};function Mr(e,t,r){var n=-1,a=e.length-r,i;t.lineStart();while(++n<a)i=e[n],t.point(i[0],i[1],i[2]);t.lineEnd()}function Sr(e,t){var r=-1,n=e.length;t.polygonStart();while(++r<n)Mr(e[r],t,1);t.polygonEnd()}I.geo.area=function(e){Cr=0;I.geo.stream(e,Er);return Cr};var Cr,Lr=new br;var Er={sphere:function(){Cr+=4*Se},point:E,lineStart:E,lineEnd:E,polygonStart:function(){Lr.reset();Er.lineStart=Dr},polygonEnd:function(){var e=2*Lr;Cr+=e<0?4*Se+e:e;Er.lineStart=Er.lineEnd=Er.point=E}};function Dr(){var r,n,u,f,d;Er.point=function(e,t){Er.point=a;u=(r=e)*De,f=Math.cos(t=(n=t)*De/2+Se/4),d=Math.sin(t)};function a(e,t){e*=De;t=t*De/2+Se/4;var r=e-u,n=r>=0?1:-1,a=n*r,i=Math.cos(t),o=Math.sin(t),s=d*o,l=f*i+s*Math.cos(a),c=s*n*Math.sin(a);Lr.add(Math.atan2(c,l));u=e,f=i,d=o}Er.lineEnd=function(){a(r,n)}}function Or(e){var t=e[0],r=e[1],n=Math.cos(r);return[n*Math.cos(t),n*Math.sin(t),Math.sin(r)]}function Pr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ir(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Rr(e,t){e[0]+=t[0];e[1]+=t[1];e[2]+=t[2]}function zr(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Nr(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t;e[1]/=t;e[2]/=t}function Fr(e){return[Math.atan2(e[1],e[0]),ze(e[2])]}function jr(e,t){return P(e[0]-t[0])<ke&&P(e[1]-t[1])<ke}I.geo.bounds=function(){var f,d,h,p,v,n,a,g,i,l,c;var u={point:m,lineStart:e,lineEnd:t,polygonStart:function(){u.point=r;u.lineStart=s;u.lineEnd=_;i=0;Er.polygonStart()},polygonEnd:function(){Er.polygonEnd();u.point=m;u.lineStart=e;u.lineEnd=t;if(Lr<0)f=-(h=180),d=-(p=90);else if(i>ke)p=90;else if(i<-ke)d=-90;c[0]=f,c[1]=h}};function m(e,t){l.push(c=[f=e,h=e]);if(t<d)d=t;if(t>p)p=t}function o(e,t){var r=Or([e*De,t*De]);if(g){var n=Ir(g,r),a=[n[1],-n[0],0],i=Ir(a,n);Nr(i);i=Fr(i);var o=e-v,s=o>0?1:-1,l=i[0]*Oe*s,c=P(o)>180;if(c^(s*v<l&&l<s*e)){var u=i[1]*Oe;if(u>p)p=u}else if(l=(l+360)%360-180,c^(s*v<l&&l<s*e)){var u=-i[1]*Oe;if(u<d)d=u}else{if(t<d)d=t;if(t>p)p=t}if(c){if(e<v){if(y(f,e)>y(f,h))h=e}else{if(y(e,h)>y(f,h))f=e}}else{if(h>=f){if(e<f)f=e;if(e>h)h=e}else{if(e>v){if(y(f,e)>y(f,h))h=e}else{if(y(e,h)>y(f,h))f=e}}}}else{m(e,t)}g=r,v=e}function e(){u.point=o}function t(){c[0]=f,c[1]=h;u.point=m;g=null}function r(e,t){if(g){var r=e-v;i+=P(r)>180?r+(r>0?360:-360):r}else n=e,a=t;Er.point(e,t);o(e,t)}function s(){Er.lineStart()}function _(){r(n,a);Er.lineEnd();if(P(i)>ke)f=-(h=180);c[0]=f,c[1]=h;g=null}function y(e,t){return(t-=e)<0?t+360:t}function b(e,t){return e[0]-t[0]}function x(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(e){p=h=-(f=d=Infinity);l=[];I.geo.stream(e,u);var t=l.length;if(t){l.sort(b);for(var r=1,n=l[0],a,i=[n];r<t;++r){a=l[r];if(x(a[0],n)||x(a[1],n)){if(y(n[0],a[1])>y(n[0],n[1]))n[1]=a[1];if(y(a[0],n[1])>y(n[0],n[1]))n[0]=a[0]}else{i.push(n=a)}}var o=-Infinity,s;for(var t=i.length-1,r=0,n=i[t],a;r<=t;n=a,++r){a=i[r];if((s=y(n[1],a[0]))>o)o=s,f=a[0],h=n[1]}}l=c=null;return f===Infinity||d===Infinity?[[NaN,NaN],[NaN,NaN]]:[[f,d],[h,p]]}}();I.geo.centroid=function(e){Br=Hr=Ur=Vr=qr=Yr=Gr=Wr=Xr=Zr=Jr=0;I.geo.stream(e,$r);var t=Xr,r=Zr,n=Jr,a=t*t+r*r+n*n;if(a<Me){t=Yr,r=Gr,n=Wr;if(Hr<ke)t=Ur,r=Vr,n=qr;a=t*t+r*r+n*n;if(a<Me)return[NaN,NaN]}return[Math.atan2(r,t)*Oe,ze(n/Math.sqrt(a))*Oe]};var Br,Hr,Ur,Vr,qr,Yr,Gr,Wr,Xr,Zr,Jr;var $r={sphere:E,point:Qr,lineStart:en,lineEnd:tn,polygonStart:function(){$r.lineStart=rn},polygonEnd:function(){$r.lineStart=en}};function Qr(e,t){e*=De;var r=Math.cos(t*=De);Kr(r*Math.cos(e),r*Math.sin(e),Math.sin(t))}function Kr(e,t,r){++Br;Ur+=(e-Ur)/Br;Vr+=(t-Vr)/Br;qr+=(r-qr)/Br}function en(){var s,l,c;$r.point=function(e,t){e*=De;var r=Math.cos(t*=De);s=r*Math.cos(e);l=r*Math.sin(e);c=Math.sin(t);$r.point=n;Kr(s,l,c)};function n(e,t){e*=De;var r=Math.cos(t*=De),n=r*Math.cos(e),a=r*Math.sin(e),i=Math.sin(t),o=Math.atan2(Math.sqrt((o=l*i-c*a)*o+(o=c*n-s*i)*o+(o=s*a-l*n)*o),s*n+l*a+c*i);Hr+=o;Yr+=o*(s+(s=n));Gr+=o*(l+(l=a));Wr+=o*(c+(c=i));Kr(s,l,c)}}function tn(){$r.point=Qr}function rn(){var n,a,h,p,v;$r.point=function(e,t){n=e,a=t;$r.point=i;e*=De;var r=Math.cos(t*=De);h=r*Math.cos(e);p=r*Math.sin(e);v=Math.sin(t);Kr(h,p,v)};$r.lineEnd=function(){i(n,a);$r.lineEnd=tn;$r.point=Qr};function i(e,t){e*=De;var r=Math.cos(t*=De),n=r*Math.cos(e),a=r*Math.sin(e),i=Math.sin(t),o=p*i-v*a,s=v*n-h*i,l=h*a-p*n,c=Math.sqrt(o*o+s*s+l*l),u=h*n+p*a+v*i,f=c&&-Re(u)/c,d=Math.atan2(c,u);Xr+=f*o;Zr+=f*s;Jr+=f*l;Hr+=d;Yr+=d*(h+(h=n));Gr+=d*(p+(p=a));Wr+=d*(v+(v=i));Kr(h,p,v)}}function nn(r,n){function e(e,t){return e=r(e,t),n(e[0],e[1])}if(r.invert&&n.invert)e.invert=function(e,t){return e=n.invert(e,t),e&&r.invert(e[0],e[1])};return e}function an(){return true}function on(e,t,r,n,s){var l=[],c=[];e.forEach(function(e){if((t=e.length-1)<=0)return;var t,r=e[0],n=e[t];if(jr(r,n)){s.lineStart();for(var a=0;a<t;++a)s.point((r=e[a])[0],r[1]);s.lineEnd();return}var i=new ln(r,e,null,true),o=new ln(r,null,i,false);i.o=o;l.push(i);c.push(o);i=new ln(n,e,null,false);o=new ln(n,null,i,true);i.o=o;l.push(i);c.push(o)});c.sort(t);sn(l);sn(c);if(!l.length)return;for(var a=0,i=r,o=c.length;a<o;++a){c[a].e=i=!i}var u=l[0],f,d;while(1){var h=u,p=true;while(h.v)if((h=h.n)===u)return;f=h.z;s.lineStart();do{h.v=h.o.v=true;if(h.e){if(p){for(var a=0,o=f.length;a<o;++a)s.point((d=f[a])[0],d[1])}else{n(h.x,h.n.x,1,s)}h=h.n}else{if(p){f=h.p.z;for(var a=f.length-1;a>=0;--a)s.point((d=f[a])[0],d[1])}else{n(h.x,h.p.x,-1,s)}h=h.p}h=h.o;f=h.z;p=!p}while(!h.v);s.lineEnd()}}function sn(e){if(!(t=e.length))return;var t,r=0,n=e[0],a;while(++r<t){n.n=a=e[r];a.p=n;n=a}n.n=a=e[0];a.p=n}function ln(e,t,r,n){this.x=e;this.z=t;this.o=r;this.e=n;this.v=false;this.n=this.p=null}function cn(_,y,b,x){return function(n,o){var a=y(o),t=n.invert(x[0],x[1]);var r={point:i,lineStart:s,lineEnd:l,polygonStart:function(){r.point=v;r.lineStart=g;r.lineEnd=m;c=[];h=[]},polygonEnd:function(){r.point=i;r.lineStart=s;r.lineEnd=l;c=I.merge(c);var e=mn(t,h);if(c.length){if(!d)o.polygonStart(),d=true;on(c,dn,e,b,o)}else if(e){if(!d)o.polygonStart(),d=true;o.lineStart();b(null,null,1,o);o.lineEnd()}if(d)o.polygonEnd(),d=false;c=h=null},sphere:function(){o.polygonStart();o.lineStart();b(null,null,1,o);o.lineEnd();o.polygonEnd()}};function i(e,t){var r=n(e,t);if(_(e=r[0],t=r[1]))o.point(e,t)}function e(e,t){var r=n(e,t);a.point(r[0],r[1])}function s(){r.point=e;a.lineStart()}function l(){r.point=i;a.lineEnd()}var c;var u=fn(),f=y(u),d=false,h,p;function v(e,t){p.push([e,t]);var r=n(e,t);f.point(r[0],r[1])}function g(){f.lineStart();p=[]}function m(){v(p[0][0],p[0][1]);f.lineEnd();var e=f.clean(),t=u.buffer(),r,n=t.length;p.pop();h.push(p);p=null;if(!n)return;if(e&1){r=t[0];var n=r.length-1,a=-1,i;if(n>0){if(!d)o.polygonStart(),d=true;o.lineStart();while(++a<n)o.point((i=r[a])[0],i[1]);o.lineEnd()}return}if(n>1&&e&2)t.push(t.pop().concat(t.shift()));c.push(t.filter(un))}return r}}function un(e){return e.length>1}function fn(){var t=[],r;return{lineStart:function(){t.push(r=[])},point:function(e,t){r.push([e,t])},lineEnd:E,buffer:function(){var e=t;t=[];r=null;return e},rejoin:function(){if(t.length>1)t.push(t.pop().concat(t.shift()))}}}function dn(e,t){return((e=e.x)[0]<0?e[1]-Ee-ke:Ee-e[1])-((t=t.x)[0]<0?t[1]-Ee-ke:Ee-t[1])}var hn=cn(an,pn,gn,[-Se,-Se/2]);function pn(a){var i=NaN,o=NaN,s=NaN,l;return{lineStart:function(){a.lineStart();l=1},point:function(e,t){var r=e>0?Se:-Se,n=P(e-i);if(P(n-Se)<ke){a.point(i,o=(o+t)/2>0?Ee:-Ee);a.point(s,o);a.lineEnd();a.lineStart();a.point(r,o);a.point(e,o);l=0}else if(s!==r&&n>=Se){if(P(i-s)<ke)i-=s*ke;if(P(e-r)<ke)e-=r*ke;o=vn(i,o,e,t);a.point(s,o);a.lineEnd();a.lineStart();a.point(r,o);l=0}a.point(i=e,o=t);s=r},lineEnd:function(){a.lineEnd();i=o=NaN},clean:function(){return 2-l}}}function vn(e,t,r,n){var a,i,o=Math.sin(e-r);return P(o)>ke?Math.atan((Math.sin(t)*(i=Math.cos(n))*Math.sin(r)-Math.sin(n)*(a=Math.cos(t))*Math.sin(e))/(a*i*o)):(t+n)/2}function gn(e,t,r,n){var a;if(e==null){a=r*Ee;n.point(-Se,a);n.point(0,a);n.point(Se,a);n.point(Se,0);n.point(Se,-a);n.point(0,-a);n.point(-Se,-a);n.point(-Se,0);n.point(-Se,a)}else if(P(e[0]-t[0])>ke){var i=e[0]<t[0]?Se:-Se;a=r*i/2;n.point(-i,a);n.point(0,a);n.point(i,a)}else{n.point(t[0],t[1])}}function mn(e,t){var r=e[0],n=e[1],a=[Math.sin(r),-Math.cos(r),0],i=0,o=0;Lr.reset();for(var s=0,l=t.length;s<l;++s){var c=t[s],u=c.length;if(!u)continue;var f=c[0],d=f[0],h=f[1]/2+Se/4,p=Math.sin(h),v=Math.cos(h),g=1;while(true){if(g===u)g=0;e=c[g];var m=e[0],_=e[1]/2+Se/4,y=Math.sin(_),b=Math.cos(_),x=m-d,w=x>=0?1:-1,A=w*x,T=A>Se,k=p*y;Lr.add(Math.atan2(k*w*Math.sin(A),v*b+k*Math.cos(A)));i+=T?x+w*Ce:x;if(T^d>=r^m>=r){var M=Ir(Or(f),Or(e));Nr(M);var S=Ir(a,M);Nr(S);var C=(T^x>=0?-1:1)*ze(S[2]);if(n>C||n===C&&(M[0]||M[1])){o+=T^x>=0?1:-1}}if(!g++)break;d=m,p=y,v=b,f=e}}return(i<-ke||i<ke&&Lr<-ke)^o&1}function _n(a){var E=Math.cos(a),h=E>0,p=P(E)>ke,e=ta(a,6*De);return cn(v,t,e,h?[0,-a]:[-Se,a-Se]);function v(e,t){return Math.cos(e)*Math.cos(t)>E}function t(s){var l,c,u,f,d;return{lineStart:function(){f=u=false;d=1},point:function(e,t){var r=[e,t],n,a=v(e,t),i=h?a?0:m(e,t):a?m(e+(e<0?Se:-Se),t):0;if(!l&&(f=u=a))s.lineStart();if(a!==u){n=g(l,r);if(jr(l,n)||jr(r,n)){r[0]+=ke;r[1]+=ke;a=v(r[0],r[1])}}if(a!==u){d=0;if(a){s.lineStart();n=g(r,l);s.point(n[0],n[1])}else{n=g(l,r);s.point(n[0],n[1]);s.lineEnd()}l=n}else if(p&&l&&h^a){var o;if(!(i&c)&&(o=g(r,l,true))){d=0;if(h){s.lineStart();s.point(o[0][0],o[0][1]);s.point(o[1][0],o[1][1]);s.lineEnd()}else{s.point(o[1][0],o[1][1]);s.lineEnd();s.lineStart();s.point(o[0][0],o[0][1])}}}if(a&&(!l||!jr(l,r))){s.point(r[0],r[1])}l=r,u=a,c=i},lineEnd:function(){if(u)s.lineEnd();l=null},clean:function(){return d|(f&&u)<<1}}}function g(e,t,r){var n=Or(e),a=Or(t);var i=[1,0,0],o=Ir(n,a),s=Pr(o,o),l=o[0],c=s-l*l;if(!c)return!r&&e;var u=E*s/c,f=-E*l/c,d=Ir(i,o),h=zr(i,u),p=zr(o,f);Rr(h,p);var v=d,g=Pr(h,v),m=Pr(v,v),_=g*g-m*(Pr(h,h)-1);if(_<0)return;var y=Math.sqrt(_),b=zr(v,(-g-y)/m);Rr(b,h);b=Fr(b);if(!r)return b;var x=e[0],w=t[0],A=e[1],T=t[1],k;if(w<x)k=x,x=w,w=k;var M=w-x,S=P(M-Se)<ke,C=S||M<ke;if(!S&&T<A)k=A,A=T,T=k;if(C?S?A+T>0^b[1]<(P(b[0]-x)<ke?A:T):A<=b[1]&&b[1]<=T:M>Se^(x<=b[0]&&b[0]<=w)){var L=zr(v,(-g+y)/m);Rr(L,h);return[b,Fr(L)]}}function m(e,t){var r=h?a:Se-a,n=0;if(e<-r)n|=1;else if(e>r)n|=2;if(t<-r)n|=4;else if(t>r)n|=8;return n}}function yn(d,h,p,v){return function(e){var t=e.a,r=e.b,n=t.x,a=t.y,i=r.x,o=r.y,s=0,l=1,c=i-n,u=o-a,f;f=d-n;if(!c&&f>0)return;f/=c;if(c<0){if(f<s)return;if(f<l)l=f}else if(c>0){if(f>l)return;if(f>s)s=f}f=p-n;if(!c&&f<0)return;f/=c;if(c<0){if(f>l)return;if(f>s)s=f}else if(c>0){if(f<s)return;if(f<l)l=f}f=h-a;if(!u&&f>0)return;f/=u;if(u<0){if(f<s)return;if(f<l)l=f}else if(u>0){if(f>l)return;if(f>s)s=f}f=v-a;if(!u&&f<0)return;f/=u;if(u<0){if(f>l)return;if(f>s)s=f}else if(u>0){if(f<s)return;if(f<l)l=f}if(s>0)e.a={x:n+s*c,y:a+s*u};if(l<1)e.b={x:n+l*c,y:a+l*u};return e}}var bn=1e9;I.geo.clipExtent=function(){var t,r,n,a,i,o,s={stream:function(e){if(i)i.valid=false;i=o(e);i.valid=true;return i},extent:function(e){if(!arguments.length)return[[t,r],[n,a]];o=xn(t=+e[0][0],r=+e[0][1],n=+e[1][0],a=+e[1][1]);if(i)i.valid=false,i=null;return s}};return s.extent([[0,0],[960,500]])};function xn(A,T,k,M){return function(a){var n=a,e=fn(),i=yn(A,T,k,M),o,u,s;var t={point:r,lineStart:b,lineEnd:x,polygonStart:function(){a=e;o=[];u=[];y=true},polygonEnd:function(){a=n;o=I.merge(o);var e=l([A,M]),t=y&&e,r=o.length;if(t||r){a.polygonStart();if(t){a.lineStart();c(null,null,1,a);a.lineEnd()}if(r){on(o,C,e,c,a)}a.polygonEnd()}o=u=s=null}};function l(e){var t=0,r=u.length,n=e[1];for(var a=0;a<r;++a){for(var i=1,o=u[a],s=o.length,l=o[0],c;i<s;++i){c=o[i];if(l[1]<=n){if(c[1]>n&&Ie(l,c,e)>0)++t}else{if(c[1]<=n&&Ie(l,c,e)<0)--t}l=c}}return t!==0}function c(e,t,r,n){var a=0,i=0;if(e==null||(a=S(e,r))!==(i=S(t,r))||L(e,t)<0^r>0){do{n.point(a===0||a===3?A:k,a>1?M:T)}while((a=(a+r+4)%4)!==i)}else{n.point(t[0],t[1])}}function f(e,t){return A<=e&&e<=k&&T<=t&&t<=M}function r(e,t){if(f(e,t))a.point(e,t)}var d,h,p,v,g,m,_,y;function b(){t.point=w;if(u)u.push(s=[]);_=true;m=false;v=g=NaN}function x(){if(o){w(d,h);if(p&&m)e.rejoin();o.push(e.buffer())}t.point=r;if(m)a.lineEnd()}function w(e,t){e=Math.max(-bn,Math.min(bn,e));t=Math.max(-bn,Math.min(bn,t));var r=f(e,t);if(u)s.push([e,t]);if(_){d=e,h=t,p=r;_=false;if(r){a.lineStart();a.point(e,t)}}else{if(r&&m)a.point(e,t);else{var n={a:{x:v,y:g},b:{x:e,y:t}};if(i(n)){if(!m){a.lineStart();a.point(n.a.x,n.a.y)}a.point(n.b.x,n.b.y);if(!r)a.lineEnd();y=false}else if(r){a.lineStart();a.point(e,t);y=false}}}v=e,g=t,m=r}return t};function S(e,t){return P(e[0]-A)<ke?t>0?0:3:P(e[0]-k)<ke?t>0?2:1:P(e[1]-T)<ke?t>0?1:0:t>0?3:2}function C(e,t){return L(e.x,t.x)}function L(e,t){var r=S(e,1),n=S(t,1);return r!==n?r-n:r===0?t[1]-e[1]:r===1?e[0]-t[0]:r===2?e[1]-t[1]:t[0]-e[0]}}function wn(e){var t=0,r=Se/3,n=Wn(e),a=n(t,r);a.parallels=function(e){if(!arguments.length)return[t/Se*180,r/Se*180];return n(t=e[0]*Se/180,r=e[1]*Se/180)};return a}function An(e,t){var r=Math.sin(e),n=(r+Math.sin(t))/2,a=1+r*(2*n-r),i=Math.sqrt(a)/n;function o(e,t){var r=Math.sqrt(a-2*n*Math.sin(t))/n;return[r*Math.sin(e*=n),i-r*Math.cos(e)]}o.invert=function(e,t){var r=i-t;return[Math.atan2(e,r)/n,ze((a-(e*e+r*r)*n*n)/(2*n))]};return o}(I.geo.conicEqualArea=function(){return wn(An)}).raw=An;I.geo.albers=function(){return I.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};I.geo.albersUsa=function(){var i=I.geo.albers();var o=I.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);var s=I.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);var n,a={point:function(e,t){n=[e,t]}},l,c,u;function f(e){var t=e[0],r=e[1];n=null;(l(t,r),n)||(c(t,r),n)||u(t,r);return n}f.invert=function(e){var t=i.scale(),r=i.translate(),n=(e[0]-r[0])/t,a=(e[1]-r[1])/t;return(a>=.12&&a<.234&&n>=-.425&&n<-.214?o:a>=.166&&a<.234&&n>=-.214&&n<-.115?s:i).invert(e)};f.stream=function(e){var r=i.stream(e),n=o.stream(e),a=s.stream(e);return{point:function(e,t){r.point(e,t);n.point(e,t);a.point(e,t)},sphere:function(){r.sphere();n.sphere();a.sphere()},lineStart:function(){r.lineStart();n.lineStart();a.lineStart()},lineEnd:function(){r.lineEnd();n.lineEnd();a.lineEnd()},polygonStart:function(){r.polygonStart();n.polygonStart();a.polygonStart()},polygonEnd:function(){r.polygonEnd();n.polygonEnd();a.polygonEnd()}}};f.precision=function(e){if(!arguments.length)return i.precision();i.precision(e);o.precision(e);s.precision(e);return f};f.scale=function(e){if(!arguments.length)return i.scale();i.scale(e);o.scale(e*.35);s.scale(e);return f.translate(i.translate())};f.translate=function(e){if(!arguments.length)return i.translate();var t=i.scale(),r=+e[0],n=+e[1];l=i.translate(e).clipExtent([[r-.455*t,n-.238*t],[r+.455*t,n+.238*t]]).stream(a).point;c=o.translate([r-.307*t,n+.201*t]).clipExtent([[r-.425*t+ke,n+.12*t+ke],[r-.214*t-ke,n+.234*t-ke]]).stream(a).point;u=s.translate([r-.205*t,n+.212*t]).clipExtent([[r-.214*t+ke,n+.166*t+ke],[r-.115*t-ke,n+.234*t-ke]]).stream(a).point;return f};return f.scale(1070)};var Tn,kn,Mn={point:E,lineStart:E,lineEnd:E,polygonStart:function(){kn=0;Mn.lineStart=Sn},polygonEnd:function(){Mn.lineStart=Mn.lineEnd=Mn.point=E;Tn+=P(kn/2)}};function Sn(){var r,n,a,i;Mn.point=function(e,t){Mn.point=o;r=a=e,n=i=t};function o(e,t){kn+=i*e-a*t;a=e,i=t}Mn.lineEnd=function(){o(r,n)}}var Cn,Ln,En,Dn;var On={point:Pn,lineStart:E,lineEnd:E,polygonStart:E,polygonEnd:E};function Pn(e,t){if(e<Cn)Cn=e;if(e>En)En=e;if(t<Ln)Ln=t;if(t>Dn)Dn=t}function In(){var r=Rn(4.5),n=[];var a={point:e,lineStart:function(){a.point=t},lineEnd:o,polygonStart:function(){a.lineEnd=s},polygonEnd:function(){a.lineEnd=o;a.point=e},pointRadius:function(e){r=Rn(e);return a},result:function(){if(n.length){var e=n.join("");n=[];return e}}};function e(e,t){n.push("M",e,",",t,r)}function t(e,t){n.push("M",e,",",t);a.point=i}function i(e,t){n.push("L",e,",",t)}function o(){a.point=e}function s(){n.push("Z")}return a}function Rn(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var zn={point:Nn,lineStart:Fn,lineEnd:jn,polygonStart:function(){zn.lineStart=Bn},polygonEnd:function(){zn.point=Nn;zn.lineStart=Fn;zn.lineEnd=jn}};function Nn(e,t){Ur+=e;Vr+=t;++qr}function Fn(){var i,o;zn.point=function(e,t){zn.point=r;Nn(i=e,o=t)};function r(e,t){var r=e-i,n=t-o,a=Math.sqrt(r*r+n*n);Yr+=a*(i+e)/2;Gr+=a*(o+t)/2;Wr+=a;Nn(i=e,o=t)}}function jn(){zn.point=Nn}function Bn(){var r,n,i,o;zn.point=function(e,t){zn.point=a;Nn(r=i=e,n=o=t)};function a(e,t){var r=e-i,n=t-o,a=Math.sqrt(r*r+n*n);Yr+=a*(i+e)/2;Gr+=a*(o+t)/2;Wr+=a;a=o*e-i*t;Xr+=a*(i+e);Zr+=a*(o+t);Jr+=a*3;Nn(i=e,o=t)}zn.lineEnd=function(){a(r,n)}}function Hn(r){var n=4.5;var a={point:e,lineStart:function(){a.point=t},lineEnd:o,polygonStart:function(){a.lineEnd=s},polygonEnd:function(){a.lineEnd=o;a.point=e},pointRadius:function(e){n=e;return a},result:E};function e(e,t){r.moveTo(e+n,t);r.arc(e,t,n,0,Ce)}function t(e,t){r.moveTo(e,t);a.point=i}function i(e,t){r.lineTo(e,t)}function o(){a.point=e}function s(){r.closePath()}return a}function Un(L){var E=.5,D=Math.cos(30*De),w=16;function t(e){return(w?n:r)(e)}function r(r){return Yn(r,function(e,t){e=L(e,t);r.point(e[0],e[1])})}function n(a){var r,n,i,o,s,l,c,u,f,d,h,p,v;var g={point:e,lineStart:t,lineEnd:_,polygonStart:function(){a.polygonStart();g.lineStart=y},polygonEnd:function(){a.polygonEnd();g.lineStart=t}};function e(e,t){e=L(e,t);a.point(e[0],e[1])}function t(){f=NaN;g.point=m;a.lineStart()}function m(e,t){var r=Or([e,t]),n=L(e,t);O(f,d,u,h,p,v,f=n[0],d=n[1],u=e,h=r[0],p=r[1],v=r[2],w,a);a.point(f,d)}function _(){g.point=e;a.lineEnd()}function y(){t();g.point=b;g.lineEnd=x}function b(e,t){m(r=e,n=t),i=f,o=d,s=h,l=p,c=v;g.point=m}function x(){O(f,d,u,h,p,v,i,o,r,s,l,c,w,a);g.lineEnd=_;_()}return g}function O(e,t,r,n,a,i,o,s,l,c,u,f,d,h){var p=o-e,v=s-t,g=p*p+v*v;if(g>4*E&&d--){var m=n+c,_=a+u,y=i+f,b=Math.sqrt(m*m+_*_+y*y),x=Math.asin(y/=b),w=P(P(y)-1)<ke||P(r-l)<ke?(r+l)/2:Math.atan2(_,m),A=L(w,x),T=A[0],k=A[1],M=T-e,S=k-t,C=v*M-p*S;if(C*C/g>E||P((p*M+v*S)/g-.5)>.3||n*c+a*u+i*f<D){O(e,t,r,n,a,i,T,k,w,m/=b,_/=b,y,d,h);h.point(T,k);O(T,k,w,m,_,y,o,s,l,c,u,f,d,h)}}}t.precision=function(e){if(!arguments.length)return Math.sqrt(E);w=(E=e*e)>0&&16;return t};return t}I.geo.path=function(){var t=4.5,r,n,a,i,o;function s(e){if(e){if(typeof t==="function")i.pointRadius(+t.apply(this,arguments));if(!o||!o.valid)o=a(i);I.geo.stream(e,o)}return i.result()}s.area=function(e){Tn=0;I.geo.stream(e,a(Mn));return Tn};s.centroid=function(e){Ur=Vr=qr=Yr=Gr=Wr=Xr=Zr=Jr=0;I.geo.stream(e,a(zn));return Jr?[Xr/Jr,Zr/Jr]:Wr?[Yr/Wr,Gr/Wr]:qr?[Ur/qr,Vr/qr]:[NaN,NaN]};s.bounds=function(e){En=Dn=-(Cn=Ln=Infinity);I.geo.stream(e,a(On));return[[Cn,Ln],[En,Dn]]};s.projection=function(e){if(!arguments.length)return r;a=(r=e)?e.stream||Vn(e):N;return l()};s.context=function(e){if(!arguments.length)return n;i=(n=e)==null?new In:new Hn(e);if(typeof t!=="function")i.pointRadius(t);return l()};s.pointRadius=function(e){if(!arguments.length)return t;t=typeof e==="function"?e:(i.pointRadius(+e),+e);return s};function l(){o=null;return s}return s.projection(I.geo.albersUsa()).context(null)};function Vn(r){var t=Un(function(e,t){return r([e*Oe,t*Oe])});return function(e){return Xn(t(e))}}I.geo.transform=function(n){return{stream:function(e){var t=new qn(e);for(var r in n)t[r]=n[r];return t}}};function qn(e){this.stream=e}qn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Yn(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}I.geo.projection=Gn;I.geo.projectionMutator=Wn;function Gn(e){return Wn(function(){return e})()}function Wn(e){var r,t,n,a=Un(function(e,t){e=r(e,t);return[e[0]*i+h,p-e[1]*i]}),i=150,o=480,s=250,l=0,c=0,u=0,f=0,d=0,h,p,v=hn,g=N,m=null,_=null,y;function b(e){e=n(e[0]*De,e[1]*De);return[e[0]*i+h,p-e[1]*i]}function x(e){e=n.invert((e[0]-h)/i,(p-e[1])/i);return e&&[e[0]*Oe,e[1]*Oe]}b.stream=function(e){if(y)y.valid=false;y=Xn(v(t,a(g(e))));y.valid=true;return y};b.clipAngle=function(e){if(!arguments.length)return m;v=e==null?(m=e,hn):_n((m=+e)*De);return A()};b.clipExtent=function(e){if(!arguments.length)return _;_=e;g=e?xn(e[0][0],e[0][1],e[1][0],e[1][1]):N;return A()};b.scale=function(e){if(!arguments.length)return i;i=+e;return w()};b.translate=function(e){if(!arguments.length)return[o,s];o=+e[0];s=+e[1];return w()};b.center=function(e){if(!arguments.length)return[l*Oe,c*Oe];l=e[0]%360*De;c=e[1]%360*De;return w()};b.rotate=function(e){if(!arguments.length)return[u*Oe,f*Oe,d*Oe];u=e[0]%360*De;f=e[1]%360*De;d=e.length>2?e[2]%360*De:0;return w()};I.rebind(b,a,"precision");function w(){n=nn(t=$n(u,f,d),r);var e=r(l,c);h=o-e[0]*i;p=s+e[1]*i;return A()}function A(){if(y)y.valid=false,y=null;return b}return function(){r=e.apply(this,arguments);b.invert=r.invert&&x;return w()}}function Xn(r){return Yn(r,function(e,t){r.point(e*De,t*De)})}function Zn(e,t){return[e,t]}(I.geo.equirectangular=function(){return Gn(Zn)}).raw=Zn.invert=Zn;I.geo.rotation=function(t){t=$n(t[0]%360*De,t[1]*De,t.length>2?t[2]*De:0);function e(e){e=t(e[0]*De,e[1]*De);return e[0]*=Oe,e[1]*=Oe,e}e.invert=function(e){e=t.invert(e[0]*De,e[1]*De);return e[0]*=Oe,e[1]*=Oe,e};return e};function Jn(e,t){return[e>Se?e-Ce:e<-Se?e+Ce:e,t]}Jn.invert=Zn;function $n(e,t,r){return e?t||r?nn(Kn(e),ea(t,r)):Kn(e):t||r?ea(t,r):Jn}function Qn(r){return function(e,t){return e+=r,[e>Se?e-Ce:e<-Se?e+Ce:e,t]}}function Kn(e){var t=Qn(e);t.invert=Qn(-e);return t}function ea(e,t){var s=Math.cos(e),l=Math.sin(e),c=Math.cos(t),u=Math.sin(t);function r(e,t){var r=Math.cos(t),n=Math.cos(e)*r,a=Math.sin(e)*r,i=Math.sin(t),o=i*s+n*l;return[Math.atan2(a*c-o*u,n*s-i*l),ze(o*c+a*u)]}r.invert=function(e,t){var r=Math.cos(t),n=Math.cos(e)*r,a=Math.sin(e)*r,i=Math.sin(t),o=i*c-a*u;return[Math.atan2(a*c+i*u,n*s+o*l),ze(o*s-n*l)]};return r}I.geo.circle=function(){var t=[0,0],r,n=6,a;function i(){var e=typeof t==="function"?t.apply(this,arguments):t,r=$n(-e[0]*De,-e[1]*De,0).invert,n=[];a(null,null,1,{point:function(e,t){n.push(e=r(e,t));e[0]*=Oe,e[1]*=Oe}});return{type:"Polygon",coordinates:[n]}}i.origin=function(e){if(!arguments.length)return t;t=e;return i};i.angle=function(e){if(!arguments.length)return r;a=ta((r=+e)*De,n*De);return i};i.precision=function(e){if(!arguments.length)return n;a=ta(r*De,(n=+e)*De);return i};return i.angle(90)};function ta(s,l){var c=Math.cos(s),u=Math.sin(s);return function(e,t,r,n){var a=r*l;if(e!=null){e=ra(c,e);t=ra(c,t);if(r>0?e<t:e>t)e+=r*Ce}else{e=s+r*Ce;t=s-.5*a}for(var i,o=e;r>0?o>t:o<t;o-=a){n.point((i=Fr([c,-u*Math.cos(o),-u*Math.sin(o)]))[0],i[1])}}}function ra(e,t){var r=Or(t);r[0]-=e;Nr(r);var n=Re(-r[1]);return((-r[2]<0?-n:n)+2*Math.PI-ke)%(2*Math.PI)}I.geo.distance=function(e,t){var r=(t[0]-e[0])*De,n=e[1]*De,a=t[1]*De,i=Math.sin(r),o=Math.cos(r),s=Math.sin(n),l=Math.cos(n),c=Math.sin(a),u=Math.cos(a),f;return Math.atan2(Math.sqrt((f=u*i)*f+(f=l*c-s*u*o)*f),s*c+l*u*o)};I.geo.graticule=function(){var t,r,n,a,i,o,s,l,c=10,u=c,f=90,d=360,h,p,v,g,m=2.5;function _(){return{type:"MultiLineString",coordinates:e()}}function e(){return I.range(Math.ceil(a/f)*f,n,f).map(v).concat(I.range(Math.ceil(l/d)*d,s,d).map(g)).concat(I.range(Math.ceil(r/c)*c,t,c).filter(function(e){return P(e%f)>ke}).map(h)).concat(I.range(Math.ceil(o/u)*u,i,u).filter(function(e){return P(e%d)>ke}).map(p))}_.lines=function(){return e().map(function(e){return{type:"LineString",coordinates:e}})};_.outline=function(){return{type:"Polygon",coordinates:[v(a).concat(g(s).slice(1),v(n).reverse().slice(1),g(l).reverse().slice(1))]}};_.extent=function(e){if(!arguments.length)return _.minorExtent();return _.majorExtent(e).minorExtent(e)};_.majorExtent=function(e){if(!arguments.length)return[[a,l],[n,s]];a=+e[0][0],n=+e[1][0];l=+e[0][1],s=+e[1][1];if(a>n)e=a,a=n,n=e;if(l>s)e=l,l=s,s=e;return _.precision(m)};_.minorExtent=function(e){if(!arguments.length)return[[r,o],[t,i]];r=+e[0][0],t=+e[1][0];o=+e[0][1],i=+e[1][1];if(r>t)e=r,r=t,t=e;if(o>i)e=o,o=i,i=e;return _.precision(m)};_.step=function(e){if(!arguments.length)return _.minorStep();return _.majorStep(e).minorStep(e)};_.majorStep=function(e){if(!arguments.length)return[f,d];f=+e[0],d=+e[1];return _};_.minorStep=function(e){if(!arguments.length)return[c,u];c=+e[0],u=+e[1];return _};_.precision=function(e){if(!arguments.length)return m;m=+e;h=na(o,i,90);p=aa(r,t,m);v=na(l,s,90);g=aa(a,n,m);return _};return _.majorExtent([[-180,-90+ke],[180,90-ke]]).minorExtent([[-180,-80-ke],[180,80+ke]])};function na(e,t,r){var n=I.range(e,t-ke,r).concat(t);return function(t){return n.map(function(e){return[t,e]})}}function aa(e,t,r){var n=I.range(e,t-ke,r).concat(t);return function(t){return n.map(function(e){return[e,t]})}}function ia(e){return e.source}function oa(e){return e.target}I.geo.greatArc=function(){var t=ia,r,n=oa,a;function i(){return{type:"LineString",coordinates:[r||t.apply(this,arguments),a||n.apply(this,arguments)]}}i.distance=function(){return I.geo.distance(r||t.apply(this,arguments),a||n.apply(this,arguments))};i.source=function(e){if(!arguments.length)return t;t=e,r=typeof e==="function"?null:e;return i};i.target=function(e){if(!arguments.length)return n;n=e,a=typeof e==="function"?null:e;return i};i.precision=function(){return arguments.length?i:0};return i};I.geo.interpolate=function(e,t){return sa(e[0]*De,e[1]*De,t[0]*De,t[1]*De)};function sa(e,t,r,n){var a=Math.cos(t),o=Math.sin(t),i=Math.cos(n),s=Math.sin(n),l=a*Math.cos(e),c=a*Math.sin(e),u=i*Math.cos(r),f=i*Math.sin(r),d=2*Math.asin(Math.sqrt(Be(n-t)+a*i*Be(r-e))),h=1/Math.sin(d);var p=d?function(e){var t=Math.sin(e*=d)*h,r=Math.sin(d-e)*h,n=r*l+t*u,a=r*c+t*f,i=r*o+t*s;return[Math.atan2(a,n)*Oe,Math.atan2(i,Math.sqrt(n*n+a*a))*Oe]}:function(){return[e*Oe,t*Oe]};p.distance=d;return p}I.geo.length=function(e){la=0;I.geo.stream(e,ca);return la};var la;var ca={sphere:E,point:E,lineStart:ua,lineEnd:E,polygonStart:E,polygonEnd:E};function ua(){var o,s,l;ca.point=function(e,t){o=e*De,s=Math.sin(t*=De),l=Math.cos(t);ca.point=r};ca.lineEnd=function(){ca.point=ca.lineEnd=E};function r(e,t){var r=Math.sin(t*=De),n=Math.cos(t),a=P((e*=De)-o),i=Math.cos(a);la+=Math.atan2(Math.sqrt((a=n*Math.sin(a))*a+(a=l*r-s*n*i)*a),s*r+l*n*i);o=e,s=r,l=n}}function fa(i,o){function e(e,t){var r=Math.cos(e),n=Math.cos(t),a=i(r*n);return[a*n*Math.sin(e),a*Math.sin(t)]}e.invert=function(e,t){var r=Math.sqrt(e*e+t*t),n=o(r),a=Math.sin(n),i=Math.cos(n);return[Math.atan2(e*a,r*i),Math.asin(r&&t*a/r)]};return e}var da=fa(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(I.geo.azimuthalEqualArea=function(){return Gn(da)}).raw=da;var ha=fa(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},N);(I.geo.azimuthalEquidistant=function(){return Gn(ha)}).raw=ha;function pa(e,t){var r=Math.cos(e),n=function(e){return Math.tan(Se/4+e/2)},a=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(n(t)/n(e)),i=r*Math.pow(n(e),a)/a;if(!a)return ma;function o(e,t){if(i>0){if(t<-Ee+ke)t=-Ee+ke}else{if(t>Ee-ke)t=Ee-ke}var r=i/Math.pow(n(t),a);return[r*Math.sin(a*e),i-r*Math.cos(a*e)]}o.invert=function(e,t){var r=i-t,n=Pe(a)*Math.sqrt(e*e+r*r);return[Math.atan2(e,r)/a,2*Math.atan(Math.pow(i/n,1/a))-Ee]};return o}(I.geo.conicConformal=function(){return wn(pa)}).raw=pa;function va(e,t){var r=Math.cos(e),n=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),a=r/n+e;if(P(n)<ke)return Zn;function i(e,t){var r=a-t;return[r*Math.sin(n*e),a-r*Math.cos(n*e)]}i.invert=function(e,t){var r=a-t;return[Math.atan2(e,r)/n,a-Pe(n)*Math.sqrt(e*e+r*r)]};return i}(I.geo.conicEquidistant=function(){return wn(va)}).raw=va;var ga=fa(function(e){return 1/e},Math.atan);(I.geo.gnomonic=function(){return Gn(ga)}).raw=ga;function ma(e,t){return[e,Math.log(Math.tan(Se/4+t/2))]}ma.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Ee]};function _a(e){var a=Gn(e),i=a.scale,o=a.translate,s=a.clipExtent,l;a.scale=function(){var e=i.apply(a,arguments);return e===a?l?a.clipExtent(null):a:e};a.translate=function(){var e=o.apply(a,arguments);return e===a?l?a.clipExtent(null):a:e};a.clipExtent=function(e){var t=s.apply(a,arguments);if(t===a){if(l=e==null){var r=Se*i(),n=o();s([[n[0]-r,n[1]-r],[n[0]+r,n[1]+r]])}}else if(l){t=null}return t};return a.clipExtent(null)}(I.geo.mercator=function(){return _a(ma)}).raw=ma;var ya=fa(function(){return 1},Math.asin);(I.geo.orthographic=function(){return Gn(ya)}).raw=ya;var ba=fa(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(I.geo.stereographic=function(){return Gn(ba)}).raw=ba;function xa(e,t){return[Math.log(Math.tan(Se/4+t/2)),-e]}xa.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Ee]};(I.geo.transverseMercator=function(){var e=_a(xa),t=e.center,r=e.rotate;e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])};e.rotate=function(e){return e?r([e[0],e[1],e.length>2?e[2]+90:90]):(e=r(),[e[0],e[1],e[2]-90])};return r([0,0,90])}).raw=xa;I.geom={};function wa(e){return e[0]}function Aa(e){return e[1]}I.geom.hull=function(e){var d=wa,h=Aa;if(arguments.length)return t(e);function t(e){if(e.length<3)return[];var t=wt(d),r=wt(h),n,a=e.length,i=[],o=[];for(n=0;n<a;n++){i.push([+t.call(this,e[n],n),+r.call(this,e[n],n),n])}i.sort(ka);for(n=0;n<a;n++)o.push([i[n][0],-i[n][1]]);var s=Ta(i),l=Ta(o);var c=l[0]===s[0],u=l[l.length-1]===s[s.length-1],f=[];for(n=s.length-1;n>=0;--n)f.push(e[i[s[n]][2]]);for(n=+c;n<l.length-u;++n)f.push(e[i[l[n]][2]]);return f}t.x=function(e){return arguments.length?(d=e,t):d};t.y=function(e){return arguments.length?(h=e,t):h};return t};function Ta(e){var t=e.length,r=[0,1],n=2;for(var a=2;a<t;a++){while(n>1&&Ie(e[r[n-2]],e[r[n-1]],e[a])<=0)--n;r[n++]=a}return r.slice(0,n)}function ka(e,t){return e[0]-t[0]||e[1]-t[1]}I.geom.polygon=function(e){U(e,Ma);return e};var Ma=I.geom.polygon.prototype=[];Ma.area=function(){var e=-1,t=this.length,r,n=this[t-1],a=0;while(++e<t){r=n;n=this[e];a+=r[1]*n[0]-r[0]*n[1]}return a*.5};Ma.centroid=function(e){var t=-1,r=this.length,n=0,a=0,i,o=this[r-1],s;if(!arguments.length)e=-1/(6*this.area());while(++t<r){i=o;o=this[t];s=i[0]*o[1]-o[0]*i[1];n+=(i[0]+o[0])*s;a+=(i[1]+o[1])*s}return[n*e,a*e]};Ma.clip=function(e){var t,r=La(e),n=-1,a=this.length-La(this),i,o,s=this[a-1],l,c,u;while(++n<a){t=e.slice();e.length=0;l=this[n];c=t[(o=t.length-r)-1];i=-1;while(++i<o){u=t[i];if(Sa(u,s,l)){if(!Sa(c,s,l)){e.push(Ca(c,u,s,l))}e.push(u)}else if(Sa(c,s,l)){e.push(Ca(c,u,s,l))}c=u}if(r)e.push(e[0]);s=l}return e};function Sa(e,t,r){return(r[0]-t[0])*(e[1]-t[1])<(r[1]-t[1])*(e[0]-t[0])}function Ca(e,t,r,n){var a=e[0],i=r[0],o=t[0]-a,s=n[0]-i,l=e[1],c=r[1],u=t[1]-l,f=n[1]-c,d=(s*(l-c)-f*(a-i))/(f*o-s*u);return[a+d*o,l+d*u]}function La(e){var t=e[0],r=e[e.length-1];return!(t[0]-r[0]||t[1]-r[1])}var Ea,Da,Oa,Pa=[],Ia,Ra,za=[];function Na(){ai(this);this.edge=this.site=this.circle=null}function Fa(e){var t=Pa.pop()||new Na;t.site=e;return t}function ja(e){Za(e);Oa.remove(e);Pa.push(e);ai(e)}function Ba(e){var t=e.circle,r=t.x,n=t.cy,a={x:r,y:n},i=e.P,o=e.N,s=[e];ja(e);var l=i;while(l.circle&&P(r-l.circle.x)<ke&&P(n-l.circle.cy)<ke){i=l.P;s.unshift(l);ja(l);l=i}s.unshift(l);Za(l);var c=o;while(c.circle&&P(r-c.circle.x)<ke&&P(n-c.circle.cy)<ke){o=c.N;s.push(c);ja(c);c=o}s.push(c);Za(c);var u=s.length,f;for(f=1;f<u;++f){c=s[f];l=s[f-1];ti(c.edge,l.site,c.site,a)}l=s[0];c=s[u-1];c.edge=Ka(l.site,c.site,null,a);Xa(l);Xa(c)}function Ha(e){var t=e.x,r=e.y,n,a,i,o,s=Oa._;while(s){i=Ua(s,r)-t;if(i>ke)s=s.L;else{o=t-Va(s,r);if(o>ke){if(!s.R){n=s;break}s=s.R}else{if(i>-ke){n=s.P;a=s}else if(o>-ke){n=s;a=s.N}else{n=a=s}break}}}var l=Fa(e);Oa.insert(n,l);if(!n&&!a)return;if(n===a){Za(n);a=Fa(n.site);Oa.insert(l,a);l.edge=a.edge=Ka(n.site,l.site);Xa(n);Xa(a);return}if(!a){l.edge=Ka(n.site,l.site);return}Za(n);Za(a);var c=n.site,u=c.x,f=c.y,d=e.x-u,h=e.y-f,p=a.site,v=p.x-u,g=p.y-f,m=2*(d*g-h*v),_=d*d+h*h,y=v*v+g*g,b={x:(g*_-h*y)/m+u,y:(d*y-v*_)/m+f};ti(a.edge,c,p,b);l.edge=Ka(c,e,null,b);a.edge=Ka(e,p,null,b);Xa(n);Xa(a)}function Ua(e,t){var r=e.site,n=r.x,a=r.y,i=a-t;if(!i)return n;var o=e.P;if(!o)return-Infinity;r=o.site;var s=r.x,l=r.y,c=l-t;if(!c)return s;var u=s-n,f=1/i-1/c,d=u/c;if(f)return(-d+Math.sqrt(d*d-2*f*(u*u/(-2*c)-l+c/2+a-i/2)))/f+n;return(n+s)/2}function Va(e,t){var r=e.N;if(r)return Ua(r,t);var n=e.site;return n.y===t?n.x:Infinity}function qa(e){this.site=e;this.edges=[]}qa.prototype.prepare=function(){var e=this.edges,t=e.length,r;while(t--){r=e[t].edge;if(!r.b||!r.a)e.splice(t,1)}e.sort(Ga);return e.length};function Ya(e){var t=e[0][0],r=e[1][0],n=e[0][1],a=e[1][1],i,o,s,l,c=Da,u=c.length,f,d,h,p,v,g;while(u--){f=c[u];if(!f||!f.prepare())continue;h=f.edges;p=h.length;d=0;while(d<p){g=h[d].end(),s=g.x,l=g.y;v=h[++d%p].start(),i=v.x,o=v.y;if(P(s-i)>ke||P(l-o)>ke){h.splice(d,0,new ri(ei(f.site,g,P(s-t)<ke&&a-l>ke?{x:t,y:P(i-t)<ke?o:a}:P(l-a)<ke&&r-s>ke?{x:P(o-a)<ke?i:r,y:a}:P(s-r)<ke&&l-n>ke?{x:r,y:P(i-r)<ke?o:n}:P(l-n)<ke&&s-t>ke?{x:P(o-n)<ke?i:t,y:n}:null),f.site,null));++p}}}}function Ga(e,t){return t.angle-e.angle}function Wa(){ai(this);this.x=this.y=this.arc=this.site=this.cy=null}function Xa(e){var t=e.P,r=e.N;if(!t||!r)return;var n=t.site,a=e.site,i=r.site;if(n===i)return;var o=a.x,s=a.y,l=n.x-o,c=n.y-s,u=i.x-o,f=i.y-s;var d=2*(l*f-c*u);if(d>=-Me)return;var h=l*l+c*c,p=u*u+f*f,v=(f*h-c*p)/d,g=(l*p-u*h)/d,f=g+s;var m=za.pop()||new Wa;m.arc=e;m.site=a;m.x=v+o;m.y=f+Math.sqrt(v*v+g*g);m.cy=f;e.circle=m;var _=null,y=Ra._;while(y){if(m.y<y.y||m.y===y.y&&m.x<=y.x){if(y.L)y=y.L;else{_=y.P;break}}else{if(y.R)y=y.R;else{_=y;break}}}Ra.insert(_,m);if(!_)Ia=m}function Za(e){var t=e.circle;if(t){if(!t.P)Ia=t.N;Ra.remove(t);za.push(t);ai(t);e.circle=null}}function Ja(e){var t=Ea,r=yn(e[0][0],e[0][1],e[1][0],e[1][1]),n=t.length,a;while(n--){a=t[n];if(!$a(a,e)||!r(a)||P(a.a.x-a.b.x)<ke&&P(a.a.y-a.b.y)<ke){a.a=a.b=null;t.splice(n,1)}}}function $a(e,t){var r=e.b;if(r)return true;var n=e.a,a=t[0][0],i=t[1][0],o=t[0][1],s=t[1][1],l=e.l,c=e.r,u=l.x,f=l.y,d=c.x,h=c.y,p=(u+d)/2,v=(f+h)/2,g,m;if(h===f){if(p<a||p>=i)return;if(u>d){if(!n)n={x:p,y:o};else if(n.y>=s)return;r={x:p,y:s}}else{if(!n)n={x:p,y:s};else if(n.y<o)return;r={x:p,y:o}}}else{g=(u-d)/(h-f);m=v-g*p;if(g<-1||g>1){if(u>d){if(!n)n={x:(o-m)/g,y:o};else if(n.y>=s)return;r={x:(s-m)/g,y:s}}else{if(!n)n={x:(s-m)/g,y:s};else if(n.y<o)return;r={x:(o-m)/g,y:o}}}else{if(f<h){if(!n)n={x:a,y:g*a+m};else if(n.x>=i)return;r={x:i,y:g*i+m}}else{if(!n)n={x:i,y:g*i+m};else if(n.x<a)return;r={x:a,y:g*a+m}}}}e.a=n;e.b=r;return true}function Qa(e,t){this.l=e;this.r=t;this.a=this.b=null}function Ka(e,t,r,n){var a=new Qa(e,t);Ea.push(a);if(r)ti(a,e,t,r);if(n)ti(a,t,e,n);Da[e.i].edges.push(new ri(a,e,t));Da[t.i].edges.push(new ri(a,t,e));return a}function ei(e,t,r){var n=new Qa(e,null);n.a=t;n.b=r;Ea.push(n);return n}function ti(e,t,r,n){if(!e.a&&!e.b){e.a=n;e.l=t;e.r=r}else if(e.l===r){e.b=n}else{e.a=n}}function ri(e,t,r){var n=e.a,a=e.b;this.edge=e;this.site=t;this.angle=r?Math.atan2(r.y-t.y,r.x-t.x):e.l===t?Math.atan2(a.x-n.x,n.y-a.y):Math.atan2(n.x-a.x,a.y-n.y)}ri.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ni(){this._=null}function ai(e){e.U=e.C=e.L=e.R=e.P=e.N=null}ni.prototype={insert:function(e,t){var r,n,a;if(e){t.P=e;t.N=e.N;if(e.N)e.N.P=t;e.N=t;if(e.R){e=e.R;while(e.L)e=e.L;e.L=t}else{e.R=t}r=e}else if(this._){e=si(this._);t.P=null;t.N=e;e.P=e.L=t;r=e}else{t.P=t.N=null;this._=t;r=null}t.L=t.R=null;t.U=r;t.C=true;e=t;while(r&&r.C){n=r.U;if(r===n.L){a=n.R;if(a&&a.C){r.C=a.C=false;n.C=true;e=n}else{if(e===r.R){ii(this,r);e=r;r=e.U}r.C=false;n.C=true;oi(this,n)}}else{a=n.L;if(a&&a.C){r.C=a.C=false;n.C=true;e=n}else{if(e===r.L){oi(this,r);e=r;r=e.U}r.C=false;n.C=true;ii(this,n)}}r=e.U}this._.C=false},remove:function(e){if(e.N)e.N.P=e.P;if(e.P)e.P.N=e.N;e.N=e.P=null;var t=e.U,r,n=e.L,a=e.R,i,o;if(!n)i=a;else if(!a)i=n;else i=si(a);if(t){if(t.L===e)t.L=i;else t.R=i}else{this._=i}if(n&&a){o=i.C;i.C=e.C;i.L=n;n.U=i;if(i!==a){t=i.U;i.U=e.U;e=i.R;t.L=e;i.R=a;a.U=i}else{i.U=t;t=i;e=i.R}}else{o=e.C;e=i}if(e)e.U=t;if(o)return;if(e&&e.C){e.C=false;return}do{if(e===this._)break;if(e===t.L){r=t.R;if(r.C){r.C=false;t.C=true;ii(this,t);r=t.R}if(r.L&&r.L.C||r.R&&r.R.C){if(!r.R||!r.R.C){r.L.C=false;r.C=true;oi(this,r);r=t.R}r.C=t.C;t.C=r.R.C=false;ii(this,t);e=this._;break}}else{r=t.L;if(r.C){r.C=false;t.C=true;oi(this,t);r=t.L}if(r.L&&r.L.C||r.R&&r.R.C){if(!r.L||!r.L.C){r.R.C=false;r.C=true;ii(this,r);r=t.L}r.C=t.C;t.C=r.L.C=false;oi(this,t);e=this._;break}}r.C=true;e=t;t=t.U}while(!e.C);if(e)e.C=false}};function ii(e,t){var r=t,n=t.R,a=r.U;if(a){if(a.L===r)a.L=n;else a.R=n}else{e._=n}n.U=a;r.U=n;r.R=n.L;if(r.R)r.R.U=r;n.L=r}function oi(e,t){var r=t,n=t.L,a=r.U;if(a){if(a.L===r)a.L=n;else a.R=n}else{e._=n}n.U=a;r.U=n;r.L=n.R;if(r.L)r.L.U=r;n.R=r}function si(e){while(e.L)e=e.L;return e}function li(e,t){var r=e.sort(ci).pop(),n,a,i;Ea=[];Da=new Array(e.length);Oa=new ni;Ra=new ni;while(true){i=Ia;if(r&&(!i||r.y<i.y||r.y===i.y&&r.x<i.x)){if(r.x!==n||r.y!==a){Da[r.i]=new qa(r);Ha(r);n=r.x,a=r.y}r=e.pop()}else if(i){Ba(i.arc)}else{break}}if(t)Ja(t),Ya(t);var o={cells:Da,edges:Ea};Oa=Ra=Ea=Da=null;return o}function ci(e,t){return t.y-e.y||t.x-e.x}I.geom.voronoi=function(e){var t=wa,r=Aa,n=t,a=r,f=ui;if(e)return i(e);function i(i){var o=new Array(i.length),s=f[0][0],l=f[0][1],c=f[1][0],u=f[1][1];li(d(i),f).cells.forEach(function(e,t){var r=e.edges,n=e.site,a=o[t]=r.length?r.map(function(e){var t=e.start();return[t.x,t.y]}):n.x>=s&&n.x<=c&&n.y>=l&&n.y<=u?[[s,u],[c,u],[c,l],[s,l]]:[];a.point=i[t]});return o}function d(e){return e.map(function(e,t){return{x:Math.round(n(e,t)/ke)*ke,y:Math.round(a(e,t)/ke)*ke,i:t}})}i.links=function(t){return li(d(t)).edges.filter(function(e){return e.l&&e.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})};i.triangles=function(u){var f=[];li(d(u)).cells.forEach(function(e,t){var r=e.site,n=e.edges.sort(Ga),a=-1,i=n.length,o,s,l=n[i-1].edge,c=l.l===r?l.r:l.l;while(++a<i){o=l;s=c;l=n[a].edge;c=l.l===r?l.r:l.l;if(t<s.i&&t<c.i&&fi(r,s,c)<0){f.push([u[t],u[s.i],u[c.i]])}}});return f};i.x=function(e){return arguments.length?(n=wt(t=e),i):t};i.y=function(e){return arguments.length?(a=wt(r=e),i):r};i.clipExtent=function(e){if(!arguments.length)return f===ui?null:f;f=e==null?ui:e;return i};i.size=function(e){if(!arguments.length)return f===ui?null:f&&f[1];return i.clipExtent(e&&[[0,0],e])};return i};var ui=[[-1e6,-1e6],[1e6,1e6]];function fi(e,t,r){return(e.x-r.x)*(t.y-e.y)-(e.x-t.x)*(r.y-e.y)}I.geom.delaunay=function(e){return I.geom.voronoi().triangles(e)};I.geom.quadtree=function(e,y,b,x,w){var A=wa,T=Aa,k;if(k=arguments.length){A=di;T=hi;if(k===3){w=b;x=y;b=y=0}return t(e)}function t(e){var t,r=wt(A),n=wt(T),a,i,o,s,l,c,u,f;if(y!=null){l=y,c=b,u=x,f=w}else{u=f=-(l=c=Infinity);a=[],i=[];s=e.length;if(k)for(o=0;o<s;++o){t=e[o];if(t.x<l)l=t.x;if(t.y<c)c=t.y;if(t.x>u)u=t.x;if(t.y>f)f=t.y;a.push(t.x);i.push(t.y)}else for(o=0;o<s;++o){var d=+r(t=e[o],o),h=+n(t,o);if(d<l)l=d;if(h<c)c=h;if(d>u)u=d;if(h>f)f=h;a.push(d);i.push(h)}}var p=u-l,v=f-c;if(p>v)f=c+p;else u=l+v;function g(e,t,r,n,a,i,o,s){if(isNaN(r)||isNaN(n))return;if(e.leaf){var l=e.x,c=e.y;if(l!=null){if(P(l-r)+P(c-n)<.01){m(e,t,r,n,a,i,o,s)}else{var u=e.point;e.x=e.y=e.point=null;m(e,u,l,c,a,i,o,s);m(e,t,r,n,a,i,o,s)}}else{e.x=r,e.y=n,e.point=t}}else{m(e,t,r,n,a,i,o,s)}}function m(e,t,r,n,a,i,o,s){var l=(a+o)*.5,c=(i+s)*.5,u=r>=l,f=n>=c,d=f<<1|u;e.leaf=false;e=e.nodes[d]||(e.nodes[d]=pi());if(u)a=l;else o=l;if(f)i=c;else s=c;g(e,t,r,n,a,i,o,s)}var _=pi();_.add=function(e){g(_,e,+r(e,++o),+n(e,o),l,c,u,f)};_.visit=function(e){vi(e,_,l,c,u,f)};_.find=function(e){return gi(_,e[0],e[1],l,c,u,f)};o=-1;if(y==null){while(++o<s){g(_,e[o],a[o],i[o],l,c,u,f)}--o}else e.forEach(_.add);a=i=e=t=null;return _}t.x=function(e){return arguments.length?(A=e,t):A};t.y=function(e){return arguments.length?(T=e,t):T};t.extent=function(e){if(!arguments.length)return y==null?null:[[y,b],[x,w]];if(e==null)y=b=x=w=null;else y=+e[0][0],b=+e[0][1],x=+e[1][0],w=+e[1][1];return t};t.size=function(e){if(!arguments.length)return y==null?null:[x-y,w-b];if(e==null)y=b=x=w=null;else y=b=0,x=+e[0],w=+e[1];return t};return t};function di(e){return e.x}function hi(e){return e.y}function pi(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function vi(e,t,r,n,a,i){if(!e(t,r,n,a,i)){var o=(r+a)*.5,s=(n+i)*.5,l=t.nodes;if(l[0])vi(e,l[0],r,n,o,s);if(l[1])vi(e,l[1],o,n,a,s);if(l[2])vi(e,l[2],r,s,o,i);if(l[3])vi(e,l[3],o,s,a,i)}}function gi(e,_,y,b,x,w,A){var T=Infinity,k;(function e(t,r,n,a,i){if(r>w||n>A||a<b||i<x)return;if(o=t.point){var o,s=_-t.x,l=y-t.y,c=s*s+l*l;if(c<T){var u=Math.sqrt(T=c);b=_-u,x=y-u;w=_+u,A=y+u;k=o}}var f=t.nodes,d=(r+a)*.5,h=(n+i)*.5,p=_>=d,v=y>=h;for(var g=v<<1|p,m=g+4;g<m;++g){if(t=f[g&3])switch(g&3){case 0:e(t,r,n,d,h);break;case 1:e(t,d,n,a,h);break;case 2:e(t,r,h,d,i);break;case 3:e(t,d,h,a,i);break}}})(e,b,x,w,A);return k}I.interpolateRgb=mi;function mi(e,t){e=I.rgb(e);t=I.rgb(t);var r=e.r,n=e.g,a=e.b,i=t.r-r,o=t.g-n,s=t.b-a;return function(e){return"#"+vt(Math.round(r+i*e))+vt(Math.round(n+o*e))+vt(Math.round(a+s*e))}}I.interpolateObject=_i;function _i(e,t){var r={},n={},a;for(a in e){if(a in t){r[a]=Ai(e[a],t[a])}else{n[a]=e[a]}}for(a in t){if(!(a in e)){n[a]=t[a]}}return function(e){for(a in r)n[a]=r[a](e);return n}}I.interpolateNumber=yi;function yi(t,r){t=+t,r=+r;return function(e){return t*(1-e)+r*e}}I.interpolateString=bi;function bi(e,n){var t=xi.lastIndex=wi.lastIndex=0,r,a,i,o=-1,s=[],l=[];e=e+"",n=n+"";while((r=xi.exec(e))&&(a=wi.exec(n))){if((i=a.index)>t){i=n.slice(t,i);if(s[o])s[o]+=i;else s[++o]=i}if((r=r[0])===(a=a[0])){if(s[o])s[o]+=a;else s[++o]=a}else{s[++o]=null;l.push({i:o,x:yi(r,a)})}t=wi.lastIndex}if(t<n.length){i=n.slice(t);if(s[o])s[o]+=i;else s[++o]=i}return s.length<2?l[0]?(n=l[0].x,function(e){return n(e)+""}):function(){return n}:(n=l.length,function(e){for(var t=0,r;t<n;++t)s[(r=l[t]).i]=r.x(e);return s.join("")})}var xi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wi=new RegExp(xi.source,"g");I.interpolate=Ai;function Ai(e,t){var r=I.interpolators.length,n;while(--r>=0&&!(n=I.interpolators[r](e,t)));return n}I.interpolators=[function(e,t){var r=typeof t;return(r==="string"?xt.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?mi:bi:t instanceof We?mi:Array.isArray(t)?Ti:r==="object"&&isNaN(t)?_i:yi)(e,t)}];I.interpolateArray=Ti;function Ti(e,t){var r=[],n=[],a=e.length,i=t.length,o=Math.min(e.length,t.length),s;for(s=0;s<o;++s)r.push(Ai(e[s],t[s]));for(;s<a;++s)n[s]=e[s];for(;s<i;++s)n[s]=t[s];return function(e){for(s=0;s<o;++s)n[s]=r[s](e);return n}}var ki=function(){return N};var Mi=I.map({linear:ki,poly:Ii,quad:function(){return Di},cubic:function(){return Oi},sin:function(){return Ri},exp:function(){return zi},circle:function(){return Ni},elastic:Fi,back:ji,bounce:function(){return Bi}});var Si=I.map({in:N,out:Li,"in-out":Ei,"out-in":function(e){return Ei(Li(e))}});I.ease=function(e){var t=e.indexOf("-"),r=t>=0?e.slice(0,t):e,n=t>=0?e.slice(t+1):"in";r=Mi.get(r)||ki;n=Si.get(n)||N;return Ci(n(r.apply(null,a.call(arguments,1))))};function Ci(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function Li(t){return function(e){return 1-t(1-e)}}function Ei(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function Di(e){return e*e}function Oi(e){return e*e*e}function Pi(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)}function Ii(t){return function(e){return Math.pow(e,t)}}function Ri(e){return 1-Math.cos(e*Ee)}function zi(e){return Math.pow(2,10*(e-1))}function Ni(e){return 1-Math.sqrt(1-e*e)}function Fi(t,r){var n;if(arguments.length<2)r=.45;if(arguments.length)n=r/Ce*Math.asin(1/t);else t=1,n=r/4;return function(e){return 1+t*Math.pow(2,-10*e)*Math.sin((e-n)*Ce/r)}}function ji(t){if(!t)t=1.70158;return function(e){return e*e*((t+1)*e-t)}}function Bi(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}I.interpolateHcl=Hi;function Hi(e,t){e=I.hcl(e);t=I.hcl(t);var r=e.h,n=e.c,a=e.l,i=t.h-r,o=t.c-n,s=t.l-a;if(isNaN(o))o=0,n=isNaN(n)?t.c:n;if(isNaN(i))i=0,r=isNaN(r)?t.h:r;else if(i>180)i-=360;else if(i<-180)i+=360;return function(e){return Ke(r+i*e,n+o*e,a+s*e)+""}}I.interpolateHsl=Ui;function Ui(e,t){e=I.hsl(e);t=I.hsl(t);var r=e.h,n=e.s,a=e.l,i=t.h-r,o=t.s-n,s=t.l-a;if(isNaN(o))o=0,n=isNaN(n)?t.s:n;if(isNaN(i))i=0,r=isNaN(r)?t.h:r;else if(i>180)i-=360;else if(i<-180)i+=360;return function(e){return Je(r+i*e,n+o*e,a+s*e)+""}}I.interpolateLab=Vi;function Vi(e,t){e=I.lab(e);t=I.lab(t);var r=e.l,n=e.a,a=e.b,i=t.l-r,o=t.a-n,s=t.b-a;return function(e){return ot(r+i*e,n+o*e,a+s*e)+""}}I.interpolateRound=qi;function qi(t,r){r-=t;return function(e){return Math.round(t+r*e)}}I.transform=function(e){var r=R.createElementNS(I.ns.prefix.svg,"g");return(I.transform=function(e){if(e!=null){r.setAttribute("transform",e);var t=r.transform.baseVal.consolidate()}return new Yi(t?t.matrix:Zi)})(e)};function Yi(e){var t=[e.a,e.b],r=[e.c,e.d],n=Wi(t),a=Gi(t,r),i=Wi(Xi(r,t,-a))||0;if(t[0]*r[1]<r[0]*t[1]){t[0]*=-1;t[1]*=-1;n*=-1;a*=-1}this.rotate=(n?Math.atan2(t[1],t[0]):Math.atan2(-r[0],r[1]))*Oe;this.translate=[e.e,e.f];this.scale=[n,i];this.skew=i?Math.atan2(a,i)*Oe:0}Yi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Gi(e,t){return e[0]*t[0]+e[1]*t[1]}function Wi(e){var t=Math.sqrt(Gi(e,e));if(t){e[0]/=t;e[1]/=t}return t}function Xi(e,t,r){e[0]+=r*t[0];e[1]+=r*t[1];return e}var Zi={a:1,b:0,c:0,d:1,e:0,f:0};I.interpolateTransform=to;function Ji(e){return e.length?e.pop()+",":""}function $i(e,t,r,n){if(e[0]!==t[0]||e[1]!==t[1]){var a=r.push("translate(",null,",",null,")");n.push({i:a-4,x:yi(e[0],t[0])},{i:a-2,x:yi(e[1],t[1])})}else if(t[0]||t[1]){r.push("translate("+t+")")}}function Qi(e,t,r,n){if(e!==t){if(e-t>180)t+=360;else if(t-e>180)e+=360;n.push({i:r.push(Ji(r)+"rotate(",null,")")-2,x:yi(e,t)})}else if(t){r.push(Ji(r)+"rotate("+t+")")}}function Ki(e,t,r,n){if(e!==t){n.push({i:r.push(Ji(r)+"skewX(",null,")")-2,x:yi(e,t)})}else if(t){r.push(Ji(r)+"skewX("+t+")")}}function eo(e,t,r,n){if(e[0]!==t[0]||e[1]!==t[1]){var a=r.push(Ji(r)+"scale(",null,",",null,")");n.push({i:a-4,x:yi(e[0],t[0])},{i:a-2,x:yi(e[1],t[1])})}else if(t[0]!==1||t[1]!==1){r.push(Ji(r)+"scale("+t+")")}}function to(e,t){var a=[],i=[];e=I.transform(e),t=I.transform(t);$i(e.translate,t.translate,a,i);Qi(e.rotate,t.rotate,a,i);Ki(e.skew,t.skew,a,i);eo(e.scale,t.scale,a,i);e=t=null;return function(e){var t=-1,r=i.length,n;while(++t<r)a[(n=i[t]).i]=n.x(e);return a.join("")}}function ro(t,r){r=(r-=t=+t)||1/r;return function(e){return(e-t)/r}}function no(t,r){r=(r-=t=+t)||1/r;return function(e){return Math.max(0,Math.min(1,(e-t)/r))}}I.layout={};I.layout.bundle=function(){return function(e){var t=[],r=-1,n=e.length;while(++r<n)t.push(ao(e[r]));return t}};function ao(e){var t=e.source,r=e.target,n=oo(t,r),a=[t];while(t!==n){t=t.parent;a.push(t)}var i=a.length;while(r!==n){a.splice(i,0,r);r=r.parent}return a}function io(e){var t=[],r=e.parent;while(r!=null){t.push(e);e=r;r=r.parent}t.push(e);return t}function oo(e,t){if(e===t)return e;var r=io(e),n=io(t),a=r.pop(),i=n.pop(),o=null;while(a===i){o=a;a=r.pop();i=n.pop()}return o}I.layout.chord=function(){var t={},g,m,_,y,b=0,x,w,A;function e(){var e={},r=[],t=I.range(y),n=[],a,i,o,s,l;g=[];m=[];a=0,s=-1;while(++s<y){i=0,l=-1;while(++l<y){i+=_[s][l]}r.push(i);n.push(I.range(y));a+=i}if(x){t.sort(function(e,t){return x(r[e],r[t])})}if(w){n.forEach(function(e,r){e.sort(function(e,t){return w(_[r][e],_[r][t])})})}a=(Ce-b*y)/a;i=0,s=-1;while(++s<y){o=i,l=-1;while(++l<y){var c=t[s],u=n[c][l],f=_[c][u],d=i,h=i+=f*a;e[c+"-"+u]={index:c,subindex:u,startAngle:d,endAngle:h,value:f}}m[c]={index:c,startAngle:o,endAngle:i,value:r[c]};i+=b}s=-1;while(++s<y){l=s-1;while(++l<y){var p=e[s+"-"+l],v=e[l+"-"+s];if(p.value||v.value){g.push(p.value<v.value?{source:v,target:p}:{source:p,target:v})}}}if(A)T()}function T(){g.sort(function(e,t){return A((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}t.matrix=function(e){if(!arguments.length)return _;y=(_=e)&&_.length;g=m=null;return t};t.padding=function(e){if(!arguments.length)return b;b=e;g=m=null;return t};t.sortGroups=function(e){if(!arguments.length)return x;x=e;g=m=null;return t};t.sortSubgroups=function(e){if(!arguments.length)return w;w=e;g=null;return t};t.sortChords=function(e){if(!arguments.length)return A;A=e;if(g)T();return t};t.chords=function(){if(!g)e();return g};t.groups=function(){if(!m)e();return m};return t};I.layout.force=function(){var a={},f=I.dispatch("start","tick","end"),d,h=[1,1],e,p,v=.9,i=ho,o=po,g=-30,u=vo,m=.1,_=.64,y=[],b=[],x,w,A;function T(c){return function(e,t,r,n){if(e.point!==c){var a=e.cx-c.x,i=e.cy-c.y,o=n-t,s=a*a+i*i;if(o*o/_<s){if(s<u){var l=e.charge/s;c.px-=a*l;c.py-=i*l}return true}if(e.point&&s&&s<u){var l=e.pointCharge/s;c.px-=a*l;c.py-=i*l}}return!e.charge}}a.tick=function(){if((p*=.99)<.005){d=null;f.end({type:"end",alpha:p=0});return true}var e=y.length,t=b.length,r,n,a,i,o,s,l,c,u;for(n=0;n<t;++n){a=b[n];i=a.source;o=a.target;c=o.x-i.x;u=o.y-i.y;if(s=c*c+u*u){s=p*w[n]*((s=Math.sqrt(s))-x[n])/s;c*=s;u*=s;o.x-=c*(l=i.weight+o.weight?i.weight/(i.weight+o.weight):.5);o.y-=u*l;i.x+=c*(l=1-l);i.y+=u*l}}if(l=p*m){c=h[0]/2;u=h[1]/2;n=-1;if(l)while(++n<e){a=y[n];a.x+=(c-a.x)*l;a.y+=(u-a.y)*l}}if(g){fo(r=I.geom.quadtree(y),p,A);n=-1;while(++n<e){if(!(a=y[n]).fixed){r.visit(T(a))}}}n=-1;while(++n<e){a=y[n];if(a.fixed){a.x=a.px;a.y=a.py}else{a.x-=(a.px-(a.px=a.x))*v;a.y-=(a.py-(a.py=a.y))*v}}f.tick({type:"tick",alpha:p})};a.nodes=function(e){if(!arguments.length)return y;y=e;return a};a.links=function(e){if(!arguments.length)return b;b=e;return a};a.size=function(e){if(!arguments.length)return h;h=e;return a};a.linkDistance=function(e){if(!arguments.length)return i;i=typeof e==="function"?e:+e;return a};a.distance=a.linkDistance;a.linkStrength=function(e){if(!arguments.length)return o;o=typeof e==="function"?e:+e;return a};a.friction=function(e){if(!arguments.length)return v;v=+e;return a};a.charge=function(e){if(!arguments.length)return g;g=typeof e==="function"?e:+e;return a};a.chargeDistance=function(e){if(!arguments.length)return Math.sqrt(u);u=e*e;return a};a.gravity=function(e){if(!arguments.length)return m;m=+e;return a};a.theta=function(e){if(!arguments.length)return Math.sqrt(_);_=e*e;return a};a.alpha=function(e){if(!arguments.length)return p;e=+e;if(p){if(e>0){p=e}else{d.c=null,d.t=NaN,d=null;f.end({type:"end",alpha:p=0})}}else if(e>0){f.start({type:"start",alpha:p=e});d=Ot(a.tick)}return a};a.start=function(){var s,l=y.length,c=b.length,e=h[0],t=h[1],u,r;for(s=0;s<l;++s){(r=y[s]).index=s;r.weight=0}for(s=0;s<c;++s){r=b[s];if(typeof r.source=="number")r.source=y[r.source];if(typeof r.target=="number")r.target=y[r.target];++r.source.weight;++r.target.weight}for(s=0;s<l;++s){r=y[s];if(isNaN(r.x))r.x=n("x",e);if(isNaN(r.y))r.y=n("y",t);if(isNaN(r.px))r.px=r.x;if(isNaN(r.py))r.py=r.y}x=[];if(typeof i==="function")for(s=0;s<c;++s)x[s]=+i.call(this,b[s],s);else for(s=0;s<c;++s)x[s]=i;w=[];if(typeof o==="function")for(s=0;s<c;++s)w[s]=+o.call(this,b[s],s);else for(s=0;s<c;++s)w[s]=o;A=[];if(typeof g==="function")for(s=0;s<l;++s)A[s]=+g.call(this,y[s],s);else for(s=0;s<l;++s)A[s]=g;function n(e,t){if(!u){u=new Array(l);for(a=0;a<l;++a){u[a]=[]}for(a=0;a<c;++a){var r=b[a];u[r.source.index].push(r.target);u[r.target.index].push(r.source)}}var n=u[s],a=-1,i=n.length,o;while(++a<i)if(!isNaN(o=n[a][e]))return o;return Math.random()*t}return a.resume()};a.resume=function(){return a.alpha(.1)};a.stop=function(){return a.alpha(0)};a.drag=function(){if(!e)e=I.behavior.drag().origin(N).on("dragstart.force",so).on("drag.force",t).on("dragend.force",lo);if(!arguments.length)return e;this.on("mouseover.force",co).on("mouseout.force",uo).call(e)};function t(e){e.px=I.event.x,e.py=I.event.y;a.resume()}return I.rebind(a,f,"on")};function so(e){e.fixed|=2}function lo(e){e.fixed&=~6}function co(e){e.fixed|=4;e.px=e.x,e.py=e.y}function uo(e){e.fixed&=~4}function fo(e,t,r){var n=0,a=0;e.charge=0;if(!e.leaf){var i=e.nodes,o=i.length,s=-1,l;while(++s<o){l=i[s];if(l==null)continue;fo(l,t,r);e.charge+=l.charge;n+=l.charge*l.cx;a+=l.charge*l.cy}}if(e.point){if(!e.leaf){e.point.x+=Math.random()-.5;e.point.y+=Math.random()-.5}var c=t*r[e.point.index];e.charge+=e.pointCharge=c;n+=c*e.point.x;a+=c*e.point.y}e.cx=n/e.charge;e.cy=a/e.charge}var ho=20,po=1,vo=Infinity;I.layout.hierarchy=function(){var s=xo,l=yo,c=bo;function u(e){var t=[e],r=[],n;e.depth=0;while((n=t.pop())!=null){r.push(n);if((i=l.call(u,n,n.depth))&&(a=i.length)){var a,i,o;while(--a>=0){t.push(o=i[a]);o.parent=n;o.depth=n.depth+1}if(c)n.value=0;n.children=i}else{if(c)n.value=+c.call(u,n,n.depth)||0;delete n.children}}_o(e,function(e){var t,r;if(s&&(t=e.children))t.sort(s);if(c&&(r=e.parent))r.value+=e.value});return r}u.sort=function(e){if(!arguments.length)return s;s=e;return u};u.children=function(e){if(!arguments.length)return l;l=e;return u};u.value=function(e){if(!arguments.length)return c;c=e;return u};u.revalue=function(e){if(c){mo(e,function(e){if(e.children)e.value=0});_o(e,function(e){var t;if(!e.children)e.value=+c.call(u,e,e.depth)||0;if(t=e.parent)t.value+=e.value})}return e};return u};function go(e,t){I.rebind(e,t,"sort","children","value");e.nodes=e;e.links=wo;return e}function mo(e,t){var r=[e];while((e=r.pop())!=null){t(e);if((a=e.children)&&(n=a.length)){var n,a;while(--n>=0)r.push(a[n])}}}function _o(e,t){var r=[e],n=[];while((e=r.pop())!=null){n.push(e);if((o=e.children)&&(i=o.length)){var a=-1,i,o;while(++a<i)r.push(o[a])}}while((e=n.pop())!=null){t(e)}}function yo(e){return e.children}function bo(e){return e.value}function xo(e,t){return t.value-e.value}function wo(e){return I.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}I.layout.partition=function(){var n=I.layout.hierarchy(),a=[1,1];function c(e,t,r,n){var a=e.children;e.x=t;e.y=e.depth*n;e.dx=r;e.dy=n;if(a&&(o=a.length)){var i=-1,o,s,l;r=e.value?r/e.value:0;while(++i<o){c(s=a[i],t,l=s.value*r,n);t+=l}}}function i(e){var t=e.children,r=0;if(t&&(a=t.length)){var n=-1,a;while(++n<a)r=Math.max(r,i(t[n]))}return 1+r}function t(e,t){var r=n.call(this,e,t);c(r[0],0,a[0],a[1]/i(r[0]));return r}t.size=function(e){if(!arguments.length)return a;a=e;return t};return go(t,n)};I.layout.pie=function(){var d=Number,h=Ao,p=0,v=Ce,g=0;function m(r){var e=r.length,n=r.map(function(e,t){return+d.call(m,e,t)}),t=+(typeof p==="function"?p.apply(this,arguments):p),a=(typeof v==="function"?v.apply(this,arguments):v)-t,i=Math.min(Math.abs(a)/e,+(typeof g==="function"?g.apply(this,arguments):g)),o=i*(a<0?-1:1),s=I.sum(n),l=s?(a-e*o)/s:0,c=I.range(e),u=[],f;if(h!=null)c.sort(h===Ao?function(e,t){return n[t]-n[e]}:function(e,t){return h(r[e],r[t])});c.forEach(function(e){u[e]={data:r[e],value:f=n[e],startAngle:t,endAngle:t+=f*l+o,padAngle:i}});return u}m.value=function(e){if(!arguments.length)return d;d=e;return m};m.sort=function(e){if(!arguments.length)return h;h=e;return m};m.startAngle=function(e){if(!arguments.length)return p;p=e;return m};m.endAngle=function(e){if(!arguments.length)return v;v=e;return m};m.padAngle=function(e){if(!arguments.length)return g;g=e;return m};return m};var Ao={};I.layout.stack=function(){var f=N,d=Lo,h=Eo,p=Mo,v=To,g=ko;function m(e,t){if(!(s=e.length))return e;var r=e.map(function(e,t){return f.call(m,e,t)});var n=r.map(function(e){return e.map(function(e,t){return[v.call(m,e,t),g.call(m,e,t)]})});var a=d.call(m,n,t);r=I.permute(r,a);n=I.permute(n,a);var i=h.call(m,n,t);var o=r[0].length,s,l,c,u;for(c=0;c<o;++c){p.call(m,r[0][c],u=i[c],n[0][c][1]);for(l=1;l<s;++l){p.call(m,r[l][c],u+=n[l-1][c][1],n[l][c][1])}}return e}m.values=function(e){if(!arguments.length)return f;f=e;return m};m.order=function(e){if(!arguments.length)return d;d=typeof e==="function"?e:So.get(e)||Lo;return m};m.offset=function(e){if(!arguments.length)return h;h=typeof e==="function"?e:Co.get(e)||Eo;return m};m.x=function(e){if(!arguments.length)return v;v=e;return m};m.y=function(e){if(!arguments.length)return g;g=e;return m};m.out=function(e){if(!arguments.length)return p;p=e;return m};return m};function To(e){return e.x}function ko(e){return e.y}function Mo(e,t,r){e.y0=t;e.y=r}var So=I.map({"inside-out":function(e){var t=e.length,r,n,a=e.map(Do),i=e.map(Oo),o=I.range(t).sort(function(e,t){return a[e]-a[t]}),s=0,l=0,c=[],u=[];for(r=0;r<t;++r){n=o[r];if(s<l){s+=i[n];c.push(n)}else{l+=i[n];u.push(n)}}return u.reverse().concat(c)},reverse:function(e){return I.range(e.length).reverse()},default:Lo});var Co=I.map({silhouette:function(e){var t=e.length,r=e[0].length,n=[],a=0,i,o,s,l=[];for(o=0;o<r;++o){for(i=0,s=0;i<t;i++)s+=e[i][o][1];if(s>a)a=s;n.push(s)}for(o=0;o<r;++o){l[o]=(a-n[o])/2}return l},wiggle:function(e){var t=e.length,r=e[0],n=r.length,a,i,o,s,l,c,u,f,d,h=[];h[0]=f=d=0;for(i=1;i<n;++i){for(a=0,s=0;a<t;++a)s+=e[a][i][1];for(a=0,l=0,u=r[i][0]-r[i-1][0];a<t;++a){for(o=0,c=(e[a][i][1]-e[a][i-1][1])/(2*u);o<a;++o){c+=(e[o][i][1]-e[o][i-1][1])/u}l+=c*e[a][i][1]}h[i]=f-=s?l/s*u:0;if(f<d)d=f}for(i=0;i<n;++i)h[i]-=d;return h},expand:function(e){var t=e.length,r=e[0].length,n=1/t,a,i,o,s=[];for(i=0;i<r;++i){for(a=0,o=0;a<t;a++)o+=e[a][i][1];if(o)for(a=0;a<t;a++)e[a][i][1]/=o;else for(a=0;a<t;a++)e[a][i][1]=n}for(i=0;i<r;++i)s[i]=0;return s},zero:Eo});function Lo(e){return I.range(e.length)}function Eo(e){var t=-1,r=e[0].length,n=[];while(++t<r)n[t]=0;return n}function Do(e){var t=1,r=0,n=e[0][1],a,i=e.length;for(;t<i;++t){if((a=e[t][1])>n){r=t;n=a}}return r}function Oo(e){return e.reduce(Po,0)}function Po(e,t){return e+t[1]}I.layout.histogram=function(){var f=true,d=Number,h=zo,p=Io;function r(e,t){var r=[],n=e.map(d,this),a=h.call(this,n,t),i=p.call(this,a,n,t),o,t=-1,s=n.length,l=i.length-1,c=f?1:1/s,u;while(++t<l){o=r[t]=[];o.dx=i[t+1]-(o.x=i[t]);o.y=0}if(l>0){t=-1;while(++t<s){u=n[t];if(u>=a[0]&&u<=a[1]){o=r[I.bisect(i,u,1,l)-1];o.y+=c;o.push(e[t])}}}return r}r.value=function(e){if(!arguments.length)return d;d=e;return r};r.range=function(e){if(!arguments.length)return h;h=wt(e);return r};r.bins=function(t){if(!arguments.length)return p;p=typeof t==="number"?function(e){return Ro(e,t)}:wt(t);return r};r.frequency=function(e){if(!arguments.length)return f;f=!!e;return r};return r};function Io(e,t){return Ro(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Ro(e,t){var r=-1,n=+e[0],a=(e[1]-n)/t,i=[];while(++r<=t)i[r]=a*r+n;return i}function zo(e){return[I.min(e),I.max(e)]}I.layout.pack=function(){var l=I.layout.hierarchy().sort(No),c=0,u=[1,1],f;function t(e,t){var r=l.call(this,e,t),n=r[0],a=u[0],i=u[1],o=f==null?Math.sqrt:typeof f==="function"?f:function(){return f};n.x=n.y=0;_o(n,function(e){e.r=+o(e.value)});_o(n,Ho);if(c){var s=c*(f?1:Math.max(2*n.r/a,2*n.r/i))/2;_o(n,function(e){e.r+=s});_o(n,Ho);_o(n,function(e){e.r-=s})}qo(n,a/2,i/2,f?1:1/Math.max(2*n.r/a,2*n.r/i));return r}t.size=function(e){if(!arguments.length)return u;u=e;return t};t.radius=function(e){if(!arguments.length)return f;f=e==null||typeof e==="function"?e:+e;return t};t.padding=function(e){if(!arguments.length)return c;c=+e;return t};return go(t,l)};function No(e,t){return e.value-t.value}function Fo(e,t){var r=e._pack_next;e._pack_next=t;t._pack_prev=e;t._pack_next=r;r._pack_prev=t}function jo(e,t){e._pack_next=t;t._pack_prev=e}function Bo(e,t){var r=t.x-e.x,n=t.y-e.y,a=e.r+t.r;return.999*a*a>r*r+n*n}function Ho(e){if(!(t=e.children)||!(d=t.length))return;var t,r=Infinity,n=-Infinity,a=Infinity,i=-Infinity,o,s,l,c,u,f,d;function h(e){r=Math.min(e.x-e.r,r);n=Math.max(e.x+e.r,n);a=Math.min(e.y-e.r,a);i=Math.max(e.y+e.r,i)}t.forEach(Uo);o=t[0];o.x=-o.r;o.y=0;h(o);if(d>1){s=t[1];s.x=s.r;s.y=0;h(s);if(d>2){l=t[2];Yo(o,s,l);h(l);Fo(o,l);o._pack_prev=l;Fo(l,s);s=o._pack_next;for(c=3;c<d;c++){Yo(o,s,l=t[c]);var p=0,v=1,g=1;for(u=s._pack_next;u!==s;u=u._pack_next,v++){if(Bo(u,l)){p=1;break}}if(p==1){for(f=o._pack_prev;f!==u._pack_prev;f=f._pack_prev,g++){if(Bo(f,l)){break}}}if(p){if(v<g||v==g&&s.r<o.r)jo(o,s=u);else jo(o=f,s);c--}else{Fo(o,l);s=l;h(l)}}}}var m=(r+n)/2,_=(a+i)/2,y=0;for(c=0;c<d;c++){l=t[c];l.x-=m;l.y-=_;y=Math.max(y,l.r+Math.sqrt(l.x*l.x+l.y*l.y))}e.r=y;t.forEach(Vo)}function Uo(e){e._pack_next=e._pack_prev=e}function Vo(e){delete e._pack_next;delete e._pack_prev}function qo(e,t,r,n){var a=e.children;e.x=t+=n*e.x;e.y=r+=n*e.y;e.r*=n;if(a){var i=-1,o=a.length;while(++i<o)qo(a[i],t,r,n)}}function Yo(e,t,r){var n=e.r+r.r,a=t.x-e.x,i=t.y-e.y;if(n&&(a||i)){var o=t.r+r.r,s=a*a+i*i;o*=o;n*=n;var l=.5+(n-o)/(2*s),c=Math.sqrt(Math.max(0,2*o*(n+s)-(n-=s)*n-o*o))/(2*s);r.x=e.x+l*a+c*i;r.y=e.y+l*i-c*a}else{r.x=e.x+n;r.y=e.y}}I.layout.tree=function(){var f=I.layout.hierarchy().sort(null).value(null),d=Go,h=[1,1],p=null;function t(e,t){var r=f.call(this,e,t),n=r[0],a=v(n);_o(a,g),a.parent.m=-a.z;mo(a,m);if(p)mo(n,_);else{var i=n,o=n,s=n;mo(n,function(e){if(e.x<i.x)i=e;if(e.x>o.x)o=e;if(e.depth>s.depth)s=e});var l=d(i,o)/2-i.x,c=h[0]/(o.x+d(o,i)/2+l),u=h[1]/(s.depth||1);mo(n,function(e){e.x=(e.x+l)*c;e.y=e.depth*u})}return r}function v(e){var t={A:null,children:[e]},r=[t],n;while((n=r.pop())!=null){for(var a=n.children,i,o=0,s=a.length;o<s;++o){r.push((a[o]=i={_:a[o],parent:n,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i)}}return t.children[0]}function g(e){var t=e.children,r=e.parent.children,n=e.i?r[e.i-1]:null;if(t.length){Jo(e);var a=(t[0].z+t[t.length-1].z)/2;if(n){e.z=n.z+d(e._,n._);e.m=e.z-a}else{e.z=a}}else if(n){e.z=n.z+d(e._,n._)}e.parent.A=i(e,n,e.parent.A||r[0])}function m(e){e._.x=e.z+e.parent.m;e.m+=e.parent.m}function i(e,t,r){if(t){var n=e,a=e,i=t,o=n.parent.children[0],s=n.m,l=a.m,c=i.m,u=o.m,f;while(i=Xo(i),n=Wo(n),i&&n){o=Wo(o);a=Xo(a);a.a=e;f=i.z+c-n.z-s+d(i._,n._);if(f>0){Zo($o(i,e,r),e,f);s+=f;l+=f}c+=i.m;s+=n.m;u+=o.m;l+=a.m}if(i&&!Xo(a)){a.t=i;a.m+=c-l}if(n&&!Wo(o)){o.t=n;o.m+=s-u;r=e}}return r}function _(e){e.x*=h[0];e.y=e.depth*h[1]}t.separation=function(e){if(!arguments.length)return d;d=e;return t};t.size=function(e){if(!arguments.length)return p?null:h;p=(h=e)==null?_:null;return t};t.nodeSize=function(e){if(!arguments.length)return p?h:null;p=(h=e)==null?null:_;return t};return go(t,f)};function Go(e,t){return e.parent==t.parent?1:2}function Wo(e){var t=e.children;return t.length?t[0]:e.t}function Xo(e){var t=e.children,r;return(r=t.length)?t[r-1]:e.t}function Zo(e,t,r){var n=r/(t.i-e.i);t.c-=n;t.s+=r;e.c+=n;t.z+=r;t.m+=r}function Jo(e){var t=0,r=0,n=e.children,a=n.length,i;while(--a>=0){i=n[a];i.z+=t;i.m+=t;t+=i.s+(r+=i.c)}}function $o(e,t,r){return e.a.parent===t.parent?e.a:r}I.layout.cluster=function(){var u=I.layout.hierarchy().sort(null).value(null),f=Go,d=[1,1],h=false;function t(e,t){var r=u.call(this,e,t),n=r[0],a,i=0;_o(n,function(e){var t=e.children;if(t&&t.length){e.x=Ko(t);e.y=Qo(t)}else{e.x=a?i+=f(e,a):0;e.y=0;a=e}});var o=es(n),s=ts(n),l=o.x-f(o,s)/2,c=s.x+f(s,o)/2;_o(n,h?function(e){e.x=(e.x-n.x)*d[0];e.y=(n.y-e.y)*d[1]}:function(e){e.x=(e.x-l)/(c-l)*d[0];e.y=(1-(n.y?e.y/n.y:1))*d[1]});return r}t.separation=function(e){if(!arguments.length)return f;f=e;return t};t.size=function(e){if(!arguments.length)return h?null:d;h=(d=e)==null;return t};t.nodeSize=function(e){if(!arguments.length)return h?d:null;h=(d=e)!=null;return t};return go(t,u)};function Qo(e){return 1+I.max(e,function(e){return e.y})}function Ko(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function es(e){var t=e.children;return t&&t.length?es(t[0]):e}function ts(e){var t=e.children,r;return t&&(r=t.length)?ts(t[r-1]):e}I.layout.treemap=function(){var n=I.layout.hierarchy(),u=Math.round,a=[1,1],i=null,f=rs,o=false,s,d="squarify",l=.5*(1+Math.sqrt(5));function h(e,t){var r=-1,n=e.length,a,i;while(++r<n){i=(a=e[r]).value*(t<0?0:t);a.area=isNaN(i)||i<=0?0:i}}function p(e){var t=e.children;if(t&&t.length){var r=f(e),n=[],a=t.slice(),i,o=Infinity,s,l=d==="slice"?r.dx:d==="dice"?r.dy:d==="slice-dice"?e.depth&1?r.dy:r.dx:Math.min(r.dx,r.dy),c;h(a,r.dx*r.dy/e.value);n.area=0;while((c=a.length)>0){n.push(i=a[c-1]);n.area+=i.area;if(d!=="squarify"||(s=v(n,l))<=o){a.pop();o=s}else{n.area-=n.pop().area;g(n,l,r,false);l=Math.min(r.dx,r.dy);n.length=n.area=0;o=Infinity}}if(n.length){g(n,l,r,true);n.length=n.area=0}t.forEach(p)}}function c(e){var t=e.children;if(t&&t.length){var r=f(e),n=t.slice(),a,i=[];h(n,r.dx*r.dy/e.value);i.area=0;while(a=n.pop()){i.push(a);i.area+=a.area;if(a.z!=null){g(i,a.z?r.dx:r.dy,r,!n.length);i.length=i.area=0}}t.forEach(c)}}function v(e,t){var r=e.area,n,a=0,i=Infinity,o=-1,s=e.length;while(++o<s){if(!(n=e[o].area))continue;if(n<i)i=n;if(n>a)a=n}r*=r;t*=t;return r?Math.max(t*a*l/r,r/(t*i*l)):Infinity}function g(e,t,r,n){var a=-1,i=e.length,o=r.x,s=r.y,l=t?u(e.area/t):0,c;if(t==r.dx){if(n||l>r.dy)l=r.dy;while(++a<i){c=e[a];c.x=o;c.y=s;c.dy=l;o+=c.dx=Math.min(r.x+r.dx-o,l?u(c.area/l):0)}c.z=true;c.dx+=r.x+r.dx-o;r.y+=l;r.dy-=l}else{if(n||l>r.dx)l=r.dx;while(++a<i){c=e[a];c.x=o;c.y=s;c.dx=l;s+=c.dy=Math.min(r.y+r.dy-s,l?u(c.area/l):0)}c.z=false;c.dy+=r.y+r.dy-s;r.x+=l;r.dx-=l}}function m(e){var t=s||n(e),r=t[0];r.x=r.y=0;if(r.value)r.dx=a[0],r.dy=a[1];else r.dx=r.dy=0;if(s)n.revalue(r);h([r],r.dx*r.dy/r.value);(s?c:p)(r);if(o)s=t;return t}m.size=function(e){if(!arguments.length)return a;a=e;return m};m.padding=function(r){if(!arguments.length)return i;function e(e){var t=r.call(m,e,e.depth);return t==null?rs(e):ns(e,typeof t==="number"?[t,t,t,t]:t)}function t(e){return ns(e,r)}var n;f=(i=r)==null?rs:(n=typeof r)==="function"?e:n==="number"?(r=[r,r,r,r],t):t;return m};m.round=function(e){if(!arguments.length)return u!=Number;u=e?Math.round:Number;return m};m.sticky=function(e){if(!arguments.length)return o;o=e;s=null;return m};m.ratio=function(e){if(!arguments.length)return l;l=e;return m};m.mode=function(e){if(!arguments.length)return d;d=e+"";return m};return go(m,n)};function rs(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function ns(e,t){var r=e.x+t[3],n=e.y+t[0],a=e.dx-t[1]-t[3],i=e.dy-t[0]-t[2];if(a<0){r+=a/2;a=0}if(i<0){n+=i/2;i=0}return{x:r,y:n,dx:a,dy:i}}I.random={normal:function(n,a){var e=arguments.length;if(e<2)a=1;if(e<1)n=0;return function(){var e,t,r;do{e=Math.random()*2-1;t=Math.random()*2-1;r=e*e+t*t}while(!r||r>1);return n+a*e*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var e=I.random.normal.apply(I,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=I.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(r){return function(){for(var e=0,t=0;t<r;t++)e+=Math.random();return e}}};I.scale={};function as(e){var t=e[0],r=e[e.length-1];return t<r?[t,r]:[r,t]}function is(e){return e.rangeExtent?e.rangeExtent():as(e.range())}function os(e,t,r,n){var a=r(e[0],e[1]),i=n(t[0],t[1]);return function(e){return i(a(e))}}function ss(e,t){var r=0,n=e.length-1,a=e[r],i=e[n],o;if(i<a){o=r,r=n,n=o;o=a,a=i,i=o}e[r]=t.floor(a);e[n]=t.ceil(i);return e}function ls(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:cs}var cs={floor:N,ceil:N};function us(r,e,t,n){var a=[],i=[],o=0,s=Math.min(r.length,e.length)-1;if(r[s]<r[0]){r=r.slice().reverse();e=e.slice().reverse()}while(++o<=s){a.push(t(r[o-1],r[o]));i.push(n(e[o-1],e[o]))}return function(e){var t=I.bisect(r,e,1,s)-1;return i[t](a[t](e))}}I.scale.linear=function(){return fs([0,1],[0,1],Ai,false)};function fs(r,n,a,i){var o,s;function t(){var e=Math.min(r.length,n.length)>2?us:os,t=i?no:ro;o=e(r,n,t,a);s=e(n,r,t,Ai);return l}function l(e){return o(e)}l.invert=function(e){return s(e)};l.domain=function(e){if(!arguments.length)return r;r=e.map(Number);return t()};l.range=function(e){if(!arguments.length)return n;n=e;return t()};l.rangeRound=function(e){return l.range(e).interpolate(qi)};l.clamp=function(e){if(!arguments.length)return i;i=e;return t()};l.interpolate=function(e){if(!arguments.length)return a;a=e;return t()};l.ticks=function(e){return vs(r,e)};l.tickFormat=function(e,t){return gs(r,e,t)};l.nice=function(e){hs(r,e);return t()};l.copy=function(){return fs(r,n,a,i)};return t()}function ds(e,t){return I.rebind(e,t,"range","rangeRound","interpolate","clamp")}function hs(e,t){ss(e,ls(ps(e,t)[2]));ss(e,ls(ps(e,t)[2]));return e}function ps(e,t){if(t==null)t=10;var r=as(e),n=r[1]-r[0],a=Math.pow(10,Math.floor(Math.log(n/t)/Math.LN10)),i=t/n*a;if(i<=.15)a*=10;else if(i<=.35)a*=5;else if(i<=.75)a*=2;r[0]=Math.ceil(r[0]/a)*a;r[1]=Math.floor(r[1]/a)*a+a*.5;r[2]=a;return r}function vs(e,t){return I.range.apply(I,ps(e,t))}function gs(e,t,r){var n=ps(e,t);if(r){var a=Bt.exec(r);a.shift();if(a[8]==="s"){var i=I.formatPrefix(Math.max(P(n[0]),P(n[1])));if(!a[7])a[7]="."+_s(i.scale(n[2]));a[8]="f";r=I.format(a.join(""));return function(e){return r(i.scale(e))+i.symbol}}if(!a[7])a[7]="."+ys(a[8],n);r=a.join("")}else{r=",."+_s(n[2])+"f"}return I.format(r)}var ms={s:1,g:1,p:1,r:1,e:1};function _s(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function ys(e,t){var r=_s(t[2]);return e in ms?Math.abs(r-_s(Math.max(P(t[0]),P(t[1]))))+ +(e!=="e"):r-(e==="%")*2}I.scale.log=function(){return bs(I.scale.linear().domain([0,1]),10,true,[1,10])};function bs(t,l,c,u){function f(e){return(c?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(l)}function d(e){return c?Math.pow(l,e):-Math.pow(l,-e)}function a(e){return t(f(e))}a.invert=function(e){return d(t.invert(e))};a.domain=function(e){if(!arguments.length)return u;c=e[0]>=0;t.domain((u=e.map(Number)).map(f));return a};a.base=function(e){if(!arguments.length)return l;l=+e;t.domain(u.map(f));return a};a.nice=function(){var e=ss(u.map(f),c?Math:ws);t.domain(e);u=e.map(d);return a};a.ticks=function(){var e=as(u),t=[],r=e[0],n=e[1],a=Math.floor(f(r)),i=Math.ceil(f(n)),o=l%1?2:l;if(isFinite(i-a)){if(c){for(;a<i;a++)for(var s=1;s<o;s++)t.push(d(a)*s);t.push(d(a))}else{t.push(d(a));for(;a++<i;)for(var s=o-1;s>0;s--)t.push(d(a)*s)}for(a=0;t[a]<r;a++){}for(i=t.length;t[i-1]>n;i--){}t=t.slice(a,i)}return t};a.tickFormat=function(e,r){if(!arguments.length)return xs;if(arguments.length<2)r=xs;else if(typeof r!=="function")r=I.format(r);var n=Math.max(1,l*e/a.ticks().length);return function(e){var t=e/d(Math.round(f(e)));if(t*l<l-.5)t*=l;return t<=n?r(e):""}};a.copy=function(){return bs(t.copy(),l,c,u)};return ds(a,t)}var xs=I.format(".0e"),ws={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};I.scale.pow=function(){return As(I.scale.linear(),1,[0,1])};function As(t,r,n){var a=Ts(r),i=Ts(1/r);function o(e){return t(a(e))}o.invert=function(e){return i(t.invert(e))};o.domain=function(e){if(!arguments.length)return n;t.domain((n=e.map(Number)).map(a));return o};o.ticks=function(e){return vs(n,e)};o.tickFormat=function(e,t){return gs(n,e,t)};o.nice=function(e){return o.domain(hs(n,e))};o.exponent=function(e){if(!arguments.length)return r;a=Ts(r=e);i=Ts(1/r);t.domain(n.map(a));return o};o.copy=function(){return As(t.copy(),r,n)};return ds(o,t)}function Ts(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}I.scale.sqrt=function(){return I.scale.pow().exponent(.5)};I.scale.ordinal=function(){return ks([],{t:"range",a:[[]]})};function ks(s,l){var a,c,u;function f(e){return c[((a.get(e)||(l.t==="range"?a.set(e,s.push(e)):NaN))-1)%c.length]}function d(t,r){return I.range(s.length).map(function(e){return t+r*e})}f.domain=function(e){if(!arguments.length)return s;s=[];a=new _;var t=-1,r=e.length,n;while(++t<r)if(!a.has(n=e[t]))a.set(n,s.push(n));return f[l.t].apply(f,l.a)};f.range=function(e){if(!arguments.length)return c;c=e;u=0;l={t:"range",a:arguments};return f};f.rangePoints=function(e,t){if(arguments.length<2)t=0;var r=e[0],n=e[1],a=s.length<2?(r=(r+n)/2,0):(n-r)/(s.length-1+t);c=d(r+a*t/2,a);u=0;l={t:"rangePoints",a:arguments};return f};f.rangeRoundPoints=function(e,t){if(arguments.length<2)t=0;var r=e[0],n=e[1],a=s.length<2?(r=n=Math.round((r+n)/2),0):(n-r)/(s.length-1+t)|0;c=d(r+Math.round(a*t/2+(n-r-(s.length-1+t)*a)/2),a);u=0;l={t:"rangeRoundPoints",a:arguments};return f};f.rangeBands=function(e,t,r){if(arguments.length<2)t=0;if(arguments.length<3)r=t;var n=e[1]<e[0],a=e[n-0],i=e[1-n],o=(i-a)/(s.length-t+2*r);c=d(a+o*r,o);if(n)c.reverse();u=o*(1-t);l={t:"rangeBands",a:arguments};return f};f.rangeRoundBands=function(e,t,r){if(arguments.length<2)t=0;if(arguments.length<3)r=t;var n=e[1]<e[0],a=e[n-0],i=e[1-n],o=Math.floor((i-a)/(s.length-t+2*r));c=d(a+Math.round((i-a-(s.length-t)*o)/2),o);if(n)c.reverse();u=Math.round(o*(1-t));l={t:"rangeRoundBands",a:arguments};return f};f.rangeBand=function(){return u};f.rangeExtent=function(){return as(l.a[0])};f.copy=function(){return ks(s,l)};return f.domain(s)}I.scale.category10=function(){return I.scale.ordinal().range(Ms)};I.scale.category20=function(){return I.scale.ordinal().range(Ss)};I.scale.category20b=function(){return I.scale.ordinal().range(Cs)};I.scale.category20c=function(){return I.scale.ordinal().range(Ls)};var Ms=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ht);var Ss=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ht);var Cs=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ht);var Ls=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ht);I.scale.quantile=function(){return Es([],[])};function Es(r,n){var a;function t(){var e=0,t=n.length;a=[];while(++e<t)a[e-1]=I.quantile(r,e/t);return i}function i(e){if(!isNaN(e=+e))return n[I.bisect(a,e)]}i.domain=function(e){if(!arguments.length)return r;r=e.map(c).filter(u).sort(l);return t()};i.range=function(e){if(!arguments.length)return n;n=e;return t()};i.quantiles=function(){return a};i.invertExtent=function(e){e=n.indexOf(e);return e<0?[NaN,NaN]:[e>0?a[e-1]:r[0],e<a.length?a[e]:r[r.length-1]]};i.copy=function(){return Es(r,n)};return t()}I.scale.quantize=function(){return Ds(0,1,[0,1])};function Ds(t,r,n){var a,i;function e(e){return n[Math.max(0,Math.min(i,Math.floor(a*(e-t))))]}function o(){a=n.length/(r-t);i=n.length-1;return e}e.domain=function(e){if(!arguments.length)return[t,r];t=+e[0];r=+e[e.length-1];return o()};e.range=function(e){if(!arguments.length)return n;n=e;return o()};e.invertExtent=function(e){e=n.indexOf(e);e=e<0?NaN:e/a+t;return[e,e+1/a]};e.copy=function(){return Ds(t,r,n)};return o()}I.scale.threshold=function(){return Os([.5],[0,1])};function Os(t,r){function n(e){if(e<=e)return r[I.bisect(t,e)]}n.domain=function(e){if(!arguments.length)return t;t=e;return n};n.range=function(e){if(!arguments.length)return r;r=e;return n};n.invertExtent=function(e){e=r.indexOf(e);return[t[e-1],t[e]]};n.copy=function(){return Os(t,r)};return n}I.scale.identity=function(){return Ps([0,1])};function Ps(r){function t(e){return+e}t.invert=t;t.domain=t.range=function(e){if(!arguments.length)return r;r=e.map(t);return t};t.ticks=function(e){return vs(r,e)};t.tickFormat=function(e,t){return gs(r,e,t)};t.copy=function(){return Ps(r)};return t}I.svg={};function Is(){return 0}I.svg.arc=function(){var F=zs,j=Ns,B=Is,H=Rs,U=Fs,V=js,q=Bs;function t(){var e=Math.max(0,+F.apply(this,arguments)),t=Math.max(0,+j.apply(this,arguments)),r=U.apply(this,arguments)-Ee,n=V.apply(this,arguments)-Ee,a=Math.abs(n-r),i=r>n?0:1;if(t<e)o=t,t=e,e=o;if(a>=Le)return Y(t,i)+(e?Y(e,1-i):"")+"Z";var o,s,l,c,u=0,f=0,d,h,p,v,g,m,_,y,b=[];if(c=(+q.apply(this,arguments)||0)/2){l=H===Rs?Math.sqrt(e*e+t*t):+H.apply(this,arguments);if(!i)f*=-1;if(t)f=ze(l/t*Math.sin(c));if(e)u=ze(l/e*Math.sin(c))}if(t){d=t*Math.cos(r+f);h=t*Math.sin(r+f);p=t*Math.cos(n-f);v=t*Math.sin(n-f);var x=Math.abs(n-r-2*f)<=Se?0:1;if(f&&Hs(d,h,p,v)===i^x){var w=(r+n)/2;d=t*Math.cos(w);h=t*Math.sin(w);p=v=null}}else{d=h=0}if(e){g=e*Math.cos(n-u);m=e*Math.sin(n-u);_=e*Math.cos(r+u);y=e*Math.sin(r+u);var A=Math.abs(r-n+2*u)<=Se?0:1;if(u&&Hs(g,m,_,y)===1-i^A){var T=(r+n)/2;g=e*Math.cos(T);m=e*Math.sin(T);_=y=null}}else{g=m=0}if(a>ke&&(o=Math.min(Math.abs(t-e)/2,+B.apply(this,arguments)))>.001){s=e<t^i?0:1;var k=o,M=o;if(a<Se){var S=_==null?[g,m]:p==null?[d,h]:Ca([d,h],[_,y],[p,v],[g,m]),C=d-S[0],L=h-S[1],E=p-S[0],D=v-S[1],O=1/Math.sin(Math.acos((C*E+L*D)/(Math.sqrt(C*C+L*L)*Math.sqrt(E*E+D*D)))/2),P=Math.sqrt(S[0]*S[0]+S[1]*S[1]);M=Math.min(o,(e-P)/(O-1));k=Math.min(o,(t-P)/(O+1))}if(p!=null){var I=Us(_==null?[g,m]:[_,y],[d,h],t,k,i),R=Us([p,v],[g,m],t,k,i);if(o===k){b.push("M",I[0],"A",k,",",k," 0 0,",s," ",I[1],"A",t,",",t," 0 ",1-i^Hs(I[1][0],I[1][1],R[1][0],R[1][1]),",",i," ",R[1],"A",k,",",k," 0 0,",s," ",R[0])}else{b.push("M",I[0],"A",k,",",k," 0 1,",s," ",R[0])}}else{b.push("M",d,",",h)}if(_!=null){var z=Us([d,h],[_,y],e,-M,i),N=Us([g,m],p==null?[d,h]:[p,v],e,-M,i);if(o===M){b.push("L",N[0],"A",M,",",M," 0 0,",s," ",N[1],"A",e,",",e," 0 ",i^Hs(N[1][0],N[1][1],z[1][0],z[1][1]),",",1-i," ",z[1],"A",M,",",M," 0 0,",s," ",z[0])}else{b.push("L",N[0],"A",M,",",M," 0 0,",s," ",z[0])}}else{b.push("L",g,",",m)}}else{b.push("M",d,",",h);if(p!=null)b.push("A",t,",",t," 0 ",x,",",i," ",p,",",v);b.push("L",g,",",m);if(_!=null)b.push("A",e,",",e," 0 ",A,",",1-i," ",_,",",y)}b.push("Z");return b.join("")}function Y(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}t.innerRadius=function(e){if(!arguments.length)return F;F=wt(e);return t};t.outerRadius=function(e){if(!arguments.length)return j;j=wt(e);return t};t.cornerRadius=function(e){if(!arguments.length)return B;B=wt(e);return t};t.padRadius=function(e){if(!arguments.length)return H;H=e==Rs?Rs:wt(e);return t};t.startAngle=function(e){if(!arguments.length)return U;U=wt(e);return t};t.endAngle=function(e){if(!arguments.length)return V;V=wt(e);return t};t.padAngle=function(e){if(!arguments.length)return q;q=wt(e);return t};t.centroid=function(){var e=(+F.apply(this,arguments)+ +j.apply(this,arguments))/2,t=(+U.apply(this,arguments)+ +V.apply(this,arguments))/2-Ee;return[Math.cos(t)*e,Math.sin(t)*e]};return t};var Rs="auto";function zs(e){return e.innerRadius}function Ns(e){return e.outerRadius}function Fs(e){return e.startAngle}function js(e){return e.endAngle}function Bs(e){return e&&e.padAngle}function Hs(e,t,r,n){return(e-r)*t-(t-n)*e>0?0:1}function Us(e,t,r,n,a){var i=e[0]-t[0],o=e[1]-t[1],s=(a?n:-n)/Math.sqrt(i*i+o*o),l=s*o,c=-s*i,u=e[0]+l,f=e[1]+c,d=t[0]+l,h=t[1]+c,p=(u+d)/2,v=(f+h)/2,g=d-u,m=h-f,_=g*g+m*m,y=r-n,b=u*h-d*f,x=(m<0?-1:1)*Math.sqrt(Math.max(0,y*y*_-b*b)),w=(b*m-g*x)/_,A=(-b*g-m*x)/_,T=(b*m+g*x)/_,k=(-b*g+m*x)/_,M=w-p,S=A-v,C=T-p,L=k-v;if(M*M+S*S>C*C+L*L)w=T,A=k;return[[w-l,A-c],[w*r/y,A*r/y]]}function Vs(c){var u=wa,f=Aa,d=an,h=Ys,t=h.key,p=.7;function r(e){var t=[],r=[],n=-1,a=e.length,i,o=wt(u),s=wt(f);function l(){t.push("M",h(c(r),p))}while(++n<a){if(d.call(this,i=e[n],n)){r.push([+o.call(this,i,n),+s.call(this,i,n)])}else if(r.length){l();r=[]}}if(r.length)l();return t.length?t.join(""):null}r.x=function(e){if(!arguments.length)return u;u=e;return r};r.y=function(e){if(!arguments.length)return f;f=e;return r};r.defined=function(e){if(!arguments.length)return d;d=e;return r};r.interpolate=function(e){if(!arguments.length)return t;if(typeof e==="function")t=h=e;else t=(h=qs.get(e)||Ys).key;return r};r.tension=function(e){if(!arguments.length)return p;p=e;return r};return r}I.svg.line=function(){return Vs(N)};var qs=I.map({linear:Ys,"linear-closed":Gs,step:Ws,"step-before":Xs,"step-after":Zs,basis:tl,"basis-open":rl,"basis-closed":nl,bundle:al,cardinal:Qs,"cardinal-open":Js,"cardinal-closed":$s,monotone:hl});qs.forEach(function(e,t){t.key=e;t.closed=/-closed$/.test(e)});function Ys(e){return e.length>1?e.join("L"):e+"Z"}function Gs(e){return e.join("L")+"Z"}function Ws(e){var t=0,r=e.length,n=e[0],a=[n[0],",",n[1]];while(++t<r)a.push("H",(n[0]+(n=e[t])[0])/2,"V",n[1]);if(r>1)a.push("H",n[0]);return a.join("")}function Xs(e){var t=0,r=e.length,n=e[0],a=[n[0],",",n[1]];while(++t<r)a.push("V",(n=e[t])[1],"H",n[0]);return a.join("")}function Zs(e){var t=0,r=e.length,n=e[0],a=[n[0],",",n[1]];while(++t<r)a.push("H",(n=e[t])[0],"V",n[1]);return a.join("")}function Js(e,t){return e.length<4?Ys(e):e[1]+Ks(e.slice(1,-1),el(e,t))}function $s(e,t){return e.length<3?Gs(e):e[0]+Ks((e.push(e[0]),e),el([e[e.length-2]].concat(e,[e[1]]),t))}function Qs(e,t){return e.length<3?Ys(e):e[0]+Ks(e,el(e,t))}function Ks(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2){return Ys(e)}var r=e.length!=t.length,n="",a=e[0],i=e[1],o=t[0],s=o,l=1;if(r){n+="Q"+(i[0]-o[0]*2/3)+","+(i[1]-o[1]*2/3)+","+i[0]+","+i[1];a=e[1];l=2}if(t.length>1){s=t[1];i=e[l];l++;n+="C"+(a[0]+o[0])+","+(a[1]+o[1])+","+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1];for(var c=2;c<t.length;c++,l++){i=e[l];s=t[c];n+="S"+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1]}}if(r){var u=e[l];n+="Q"+(i[0]+s[0]*2/3)+","+(i[1]+s[1]*2/3)+","+u[0]+","+u[1]}return n}function el(e,t){var r=[],n=(1-t)/2,a,i=e[0],o=e[1],s=1,l=e.length;while(++s<l){a=i;i=o;o=e[s];r.push([n*(o[0]-a[0]),n*(o[1]-a[1])])}return r}function tl(e){if(e.length<3)return Ys(e);var t=1,r=e.length,n=e[0],a=n[0],i=n[1],o=[a,a,a,(n=e[1])[0]],s=[i,i,i,n[1]],l=[a,",",i,"L",il(ll,o),",",il(ll,s)];e.push(e[r-1]);while(++t<=r){n=e[t];o.shift();o.push(n[0]);s.shift();s.push(n[1]);cl(l,o,s)}e.pop();l.push("L",n);return l.join("")}function rl(e){if(e.length<4)return Ys(e);var t=[],r=-1,n=e.length,a,i=[0],o=[0];while(++r<3){a=e[r];i.push(a[0]);o.push(a[1])}t.push(il(ll,i)+","+il(ll,o));--r;while(++r<n){a=e[r];i.shift();i.push(a[0]);o.shift();o.push(a[1]);cl(t,i,o)}return t.join("")}function nl(e){var t,r=-1,n=e.length,a=n+4,i,o=[],s=[];while(++r<4){i=e[r%n];o.push(i[0]);s.push(i[1])}t=[il(ll,o),",",il(ll,s)];--r;while(++r<a){i=e[r%n];o.shift();o.push(i[0]);s.shift();s.push(i[1]);cl(t,o,s)}return t.join("")}function al(e,t){var r=e.length-1;if(r){var n=e[0][0],a=e[0][1],i=e[r][0]-n,o=e[r][1]-a,s=-1,l,c;while(++s<=r){l=e[s];c=s/r;l[0]=t*l[0]+(1-t)*(n+c*i);l[1]=t*l[1]+(1-t)*(a+c*o)}}return tl(e)}function il(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}var ol=[0,2/3,1/3,0],sl=[0,1/3,2/3,0],ll=[0,1/6,2/3,1/6];function cl(e,t,r){e.push("C",il(ol,t),",",il(ol,r),",",il(sl,t),",",il(sl,r),",",il(ll,t),",",il(ll,r))}function ul(e,t){return(t[1]-e[1])/(t[0]-e[0])}function fl(e){var t=0,r=e.length-1,n=[],a=e[0],i=e[1],o=n[0]=ul(a,i);while(++t<r){n[t]=(o+(o=ul(a=i,i=e[t+1])))/2}n[t]=o;return n}function dl(e){var t=[],r,n,a,i,o=fl(e),s=-1,l=e.length-1;while(++s<l){r=ul(e[s],e[s+1]);if(P(r)<ke){o[s]=o[s+1]=0}else{n=o[s]/r;a=o[s+1]/r;i=n*n+a*a;if(i>9){i=r*3/Math.sqrt(i);o[s]=i*n;o[s+1]=i*a}}}s=-1;while(++s<=l){i=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s]));t.push([i||0,o[s]*i||0])}return t}function hl(e){return e.length<3?Ys(e):e[0]+Ks(e,dl(e))}I.svg.line.radial=function(){var e=Vs(pl);e.radius=e.x,delete e.x;e.angle=e.y,delete e.y;return e};function pl(e){var t,r=-1,n=e.length,a,i;while(++r<n){t=e[r];a=t[0];i=t[1]-Ee;t[0]=a*Math.cos(i);t[1]=a*Math.sin(i)}return e}function vl(p){var v=wa,g=wa,m=0,_=Aa,y=an,b=Ys,t=b.key,x=b,w="L",A=.7;function r(e){var t=[],r=[],n=[],a=-1,i=e.length,o,s=wt(v),l=wt(m),c=v===g?function(){return f}:wt(g),u=m===_?function(){return d}:wt(_),f,d;function h(){t.push("M",b(p(n),A),w,x(p(r.reverse()),A),"Z")}while(++a<i){if(y.call(this,o=e[a],a)){r.push([f=+s.call(this,o,a),d=+l.call(this,o,a)]);n.push([+c.call(this,o,a),+u.call(this,o,a)])}else if(r.length){h();r=[];n=[]}}if(r.length)h();return t.length?t.join(""):null}r.x=function(e){if(!arguments.length)return g;v=g=e;return r};r.x0=function(e){if(!arguments.length)return v;v=e;return r};r.x1=function(e){if(!arguments.length)return g;g=e;return r};r.y=function(e){if(!arguments.length)return _;m=_=e;return r};r.y0=function(e){if(!arguments.length)return m;m=e;return r};r.y1=function(e){if(!arguments.length)return _;_=e;return r};r.defined=function(e){if(!arguments.length)return y;y=e;return r};r.interpolate=function(e){if(!arguments.length)return t;if(typeof e==="function")t=b=e;else t=(b=qs.get(e)||Ys).key;x=b.reverse||b;w=b.closed?"M":"L";return r};r.tension=function(e){if(!arguments.length)return A;A=e;return r};return r}Xs.reverse=Zs;Zs.reverse=Xs;I.svg.area=function(){return vl(N)};I.svg.area.radial=function(){var e=vl(pl);e.radius=e.x,delete e.x;e.innerRadius=e.x0,delete e.x0;e.outerRadius=e.x1,delete e.x1;e.angle=e.y,delete e.y;e.startAngle=e.y0,delete e.y0;e.endAngle=e.y1,delete e.y1;return e};I.svg.chord=function(){var a=ia,i=oa,l=gl,c=Fs,u=js;function t(e,t){var r=o(this,a,e,t),n=o(this,i,e,t);return"M"+r.p0+f(r.r,r.p1,r.a1-r.a0)+(s(r,n)?d(r.r,r.p1,r.r,r.p0):d(r.r,r.p1,n.r,n.p0)+f(n.r,n.p1,n.a1-n.a0)+d(n.r,n.p1,r.r,r.p0))+"Z"}function o(e,t,r,n){var a=t.call(e,r,n),i=l.call(e,a,n),o=c.call(e,a,n)-Ee,s=u.call(e,a,n)-Ee;return{r:i,a0:o,a1:s,p0:[i*Math.cos(o),i*Math.sin(o)],p1:[i*Math.cos(s),i*Math.sin(s)]}}function s(e,t){return e.a0==t.a0&&e.a1==t.a1}function f(e,t,r){return"A"+e+","+e+" 0 "+ +(r>Se)+",1 "+t}function d(e,t,r,n){return"Q 0,0 "+n}t.radius=function(e){if(!arguments.length)return l;l=wt(e);return t};t.source=function(e){if(!arguments.length)return a;a=wt(e);return t};t.target=function(e){if(!arguments.length)return i;i=wt(e);return t};t.startAngle=function(e){if(!arguments.length)return c;c=wt(e);return t};t.endAngle=function(e){if(!arguments.length)return u;u=wt(e);return t};return t};function gl(e){return e.radius}I.svg.diagonal=function(){var o=ia,s=oa,l=ml;function t(e,t){var r=o.call(this,e,t),n=s.call(this,e,t),a=(r.y+n.y)/2,i=[r,{x:r.x,y:a},{x:n.x,y:a},n];i=i.map(l);return"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}t.source=function(e){if(!arguments.length)return o;o=wt(e);return t};t.target=function(e){if(!arguments.length)return s;s=wt(e);return t};t.projection=function(e){if(!arguments.length)return l;l=e;return t};return t};function ml(e){return[e.x,e.y]}I.svg.diagonal.radial=function(){var e=I.svg.diagonal(),t=ml,r=e.projection;e.projection=function(e){return arguments.length?r(_l(t=e)):t};return e};function _l(n){return function(){var e=n.apply(this,arguments),t=e[0],r=e[1]-Ee;return[t*Math.cos(r),t*Math.sin(r)]}}I.svg.symbol=function(){var r=bl,n=yl;function t(e,t){return(wl.get(r.call(this,e,t))||xl)(n.call(this,e,t))}t.type=function(e){if(!arguments.length)return r;r=wt(e);return t};t.size=function(e){if(!arguments.length)return n;n=wt(e);return t};return t};function yl(){return 64}function bl(){return"circle"}function xl(e){var t=Math.sqrt(e/Se);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}var wl=I.map({circle:xl,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Tl)),r=t*Tl;return"M0,"+-t+"L"+r+",0"+" 0,"+t+" "+-r+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Al),r=t*Al/2;return"M0,"+r+"L"+t+","+-r+" "+-t+","+-r+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Al),r=t*Al/2;return"M0,"+-r+"L"+t+","+r+" "+-t+","+r+"Z"}});I.svg.symbolTypes=wl.keys();var Al=Math.sqrt(3),Tl=Math.tan(30*De);W.transition=function(e){var t=El||++Ll,r=Il(e),n=[],a,i,o=Dl||{time:Date.now(),ease:Pi,delay:0,duration:250};for(var s=-1,l=this.length;++s<l;){n.push(a=[]);for(var c=this[s],u=-1,f=c.length;++u<f;){if(i=c[u])Rl(i,u,r,t,o);a.push(i)}}return Sl(n,r,t)};W.interrupt=function(e){return this.each(e==null?kl:Ml(Il(e)))};var kl=Ml(Il());function Ml(n){return function(){var e,t,r;if((e=this[n])&&(r=e[t=e.active])){r.timer.c=null;r.timer.t=NaN;if(--e.count)delete e[t];else delete this[n];e.active+=.5;r.event&&r.event.interrupt.call(this,this.__data__,r.index)}}}function Sl(e,t,r){U(e,Cl);e.namespace=t;e.id=r;return e}var Cl=[],Ll=0,El,Dl;Cl.call=W.call;Cl.empty=W.empty;Cl.node=W.node;Cl.size=W.size;I.transition=function(e,t){return e&&e.transition?El?e.transition(t):e:I.selection().transition(e)};I.transition.prototype=Cl;Cl.select=function(e){var t=this.id,r=this.namespace,n=[],a,i,o;e=X(e);for(var s=-1,l=this.length;++s<l;){n.push(a=[]);for(var c=this[s],u=-1,f=c.length;++u<f;){if((o=c[u])&&(i=e.call(o,o.__data__,u,s))){if("__data__"in o)i.__data__=o.__data__;Rl(i,u,r,t,o[r][t]);a.push(i)}else{a.push(null)}}}return Sl(n,r,t)};Cl.selectAll=function(e){var t=this.id,r=this.namespace,n=[],a,i,o,s,l;e=Z(e);for(var c=-1,u=this.length;++c<u;){for(var f=this[c],d=-1,h=f.length;++d<h;){if(o=f[d]){l=o[r][t];i=e.call(o,o.__data__,d,c);n.push(a=[]);for(var p=-1,v=i.length;++p<v;){if(s=i[p])Rl(s,p,r,t,l);a.push(s)}}}}return Sl(n,r,t)};Cl.filter=function(e){var t=[],r,n,a;if(typeof e!=="function")e=ce(e);for(var i=0,o=this.length;i<o;i++){t.push(r=[]);for(var n=this[i],s=0,l=n.length;s<l;s++){if((a=n[s])&&e.call(a,a.__data__,s,i)){r.push(a)}}}return Sl(t,this.namespace,this.id)};Cl.tween=function(t,r){var n=this.id,a=this.namespace;if(arguments.length<2)return this.node()[a][n].tween.get(t);return fe(this,r==null?function(e){e[a][n].tween.remove(t)}:function(e){e[a][n].tween.set(t,r)})};function Ol(e,n,a,i){var o=e.id,s=e.namespace;return fe(e,typeof a==="function"?function(e,t,r){e[s][o].tween.set(n,i(a.call(e,e.__data__,t,r)))}:(a=i(a),function(e){e[s][o].tween.set(n,a)}))}Cl.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var n=e=="transform"?to:Ai,a=I.ns.qualify(e);function i(){this.removeAttribute(a)}function o(){this.removeAttributeNS(a.space,a.local)}function r(r){return r==null?i:(r+="",function(){var e=this.getAttribute(a),t;return e!==r&&(t=n(e,r),function(e){this.setAttribute(a,t(e))})})}function s(r){return r==null?o:(r+="",function(){var e=this.getAttributeNS(a.space,a.local),t;return e!==r&&(t=n(e,r),function(e){this.setAttributeNS(a.space,a.local,t(e))})})}return Ol(this,"attr."+e,t,a.local?s:r)};Cl.attrTween=function(e,n){var a=I.ns.qualify(e);function t(e,t){var r=n.call(this,e,t,this.getAttribute(a));return r&&function(e){this.setAttribute(a,r(e))}}function r(e,t){var r=n.call(this,e,t,this.getAttributeNS(a.space,a.local));return r&&function(e){this.setAttributeNS(a.space,a.local,r(e))}}return this.tween("attr."+e,a.local?r:t)};Cl.style=function(n,e,a){var t=arguments.length;if(t<3){if(typeof n!=="string"){if(t<2)e="";for(a in n)this.style(a,n[a],e);return this}a=""}function i(){this.style.removeProperty(n)}function r(r){return r==null?i:(r+="",function(){var e=z(this).getComputedStyle(this,null).getPropertyValue(n),t;return e!==r&&(t=Ai(e,r),function(e){this.style.setProperty(n,t(e),a)})})}return Ol(this,"style."+n,e,r)};Cl.styleTween=function(n,a,i){if(arguments.length<3)i="";function e(e,t){var r=a.call(this,e,t,z(this).getComputedStyle(this,null).getPropertyValue(n));return r&&function(e){this.style.setProperty(n,r(e),i)}}return this.tween("style."+n,e)};Cl.text=function(e){return Ol(this,"text",e,Pl)};function Pl(e){if(e==null)e="";return function(){this.textContent=e}}Cl.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;if(this[t].count<2&&(e=this.parentNode))e.removeChild(this)})};Cl.ease=function(t){var r=this.id,n=this.namespace;if(arguments.length<1)return this.node()[n][r].ease;if(typeof t!=="function")t=I.ease.apply(I,arguments);return fe(this,function(e){e[n][r].ease=t})};Cl.delay=function(n){var a=this.id,i=this.namespace;if(arguments.length<1)return this.node()[i][a].delay;return fe(this,typeof n==="function"?function(e,t,r){e[i][a].delay=+n.call(e,e.__data__,t,r)}:(n=+n,function(e){e[i][a].delay=n}))};Cl.duration=function(n){var a=this.id,i=this.namespace;if(arguments.length<1)return this.node()[i][a].duration;return fe(this,typeof n==="function"?function(e,t,r){e[i][a].duration=Math.max(1,n.call(e,e.__data__,t,r))}:(n=Math.max(1,n),function(e){e[i][a].duration=n}))};Cl.each=function(n,r){var a=this.id,i=this.namespace;if(arguments.length<2){var e=Dl,t=El;try{El=a;fe(this,function(e,t,r){Dl=e[i][a];n.call(e,e.__data__,t,r)})}finally{Dl=e;El=t}}else{fe(this,function(e){var t=e[i][a];(t.event||(t.event=I.dispatch("start","end","interrupt"))).on(n,r)})}return this};Cl.transition=function(){var e=this.id,t=++Ll,r=this.namespace,n=[],a,i,o,s;for(var l=0,c=this.length;l<c;l++){n.push(a=[]);for(var i=this[l],u=0,f=i.length;u<f;u++){if(o=i[u]){s=o[r][e];Rl(o,u,r,t,{time:s.time,ease:s.ease,delay:s.delay+s.duration,duration:s.duration})}a.push(o)}}return Sl(n,r,t)};function Il(e){return e==null?"__transition__":"__transition_"+e+"__"}function Rl(i,o,a,s,e){var l=i[a]||(i[a]={active:0,count:0}),c=l[s],u,f,d,h,p;function t(e){var t=c.delay;f.t=t+u;if(t<=e)return r(e-t);f.c=r}function r(e){var t=l.active,r=l[t];if(r){r.timer.c=null;r.timer.t=NaN;--l.count;delete l[t];r.event&&r.event.interrupt.call(i,i.__data__,r.index)}for(var n in l){if(+n<s){var a=l[n];a.timer.c=null;a.timer.t=NaN;--l.count;delete l[n]}}f.c=v;Ot(function(){if(f.c&&v(e||1)){f.c=null;f.t=NaN}return 1},0,u);l.active=s;c.event&&c.event.start.call(i,i.__data__,o);p=[];c.tween.forEach(function(e,t){if(t=t.call(i,i.__data__,o)){p.push(t)}});h=c.ease;d=c.duration}function v(e){var t=e/d,r=h(t),n=p.length;while(n>0){p[--n].call(i,r)}if(t>=1){c.event&&c.event.end.call(i,i.__data__,o);if(--l.count)delete l[s];else delete i[a];return 1}}if(!c){u=e.time;f=Ot(t,0,u);c=l[s]={tween:new _,time:u,timer:f,delay:e.delay,duration:e.duration,ease:e.ease,index:o};e=null;++l.count}}I.svg.axis=function(){var M=I.scale.linear(),S=zl,C=6,L=6,E=3,D=[10],O=null,P;function r(e){e.each(function(){var e=I.select(this);var t=this.__chart__||M,r=this.__chart__=M.copy();var n=O==null?r.ticks?r.ticks.apply(r,D):r.domain():O,a=P==null?r.tickFormat?r.tickFormat.apply(r,D):N:P,i=e.selectAll(".tick").data(n,r),o=i.enter().insert("g",".domain").attr("class","tick").style("opacity",ke),s=I.transition(i.exit()).style("opacity",ke).remove(),l=I.transition(i.order()).style("opacity",1),c=Math.max(C,0)+E,u;var f=is(r),d=e.selectAll(".domain").data([0]),h=(d.enter().append("path").attr("class","domain"),I.transition(d));o.append("line");o.append("text");var p=o.select("line"),v=l.select("line"),g=i.select("text").text(a),m=o.select("text"),_=l.select("text"),y=S==="top"||S==="left"?-1:1,b,x,w,A;if(S==="bottom"||S==="top"){u=Fl,b="x",w="y",x="x2",A="y2";g.attr("dy",y<0?"0em":".71em").style("text-anchor","middle");h.attr("d","M"+f[0]+","+y*L+"V0H"+f[1]+"V"+y*L)}else{u=jl,b="y",w="x",x="y2",A="x2";g.attr("dy",".32em").style("text-anchor",y<0?"end":"start");h.attr("d","M"+y*L+","+f[0]+"H0V"+f[1]+"H"+y*L)}p.attr(A,y*C);m.attr(w,y*c);v.attr(x,0).attr(A,y*C);_.attr(b,0).attr(w,y*c);if(r.rangeBand){var T=r,k=T.rangeBand()/2;t=r=function(e){return T(e)+k}}else if(t.rangeBand){t=r}else{s.call(u,r,t)}o.call(u,t,r);l.call(u,r,r)})}r.scale=function(e){if(!arguments.length)return M;M=e;return r};r.orient=function(e){if(!arguments.length)return S;S=e in Nl?e+"":zl;return r};r.ticks=function(){if(!arguments.length)return D;D=f(arguments);return r};r.tickValues=function(e){if(!arguments.length)return O;O=e;return r};r.tickFormat=function(e){if(!arguments.length)return P;P=e;return r};r.tickSize=function(e){var t=arguments.length;if(!t)return C;C=+e;L=+arguments[t-1];return r};r.innerTickSize=function(e){if(!arguments.length)return C;C=+e;return r};r.outerTickSize=function(e){if(!arguments.length)return L;L=+e;return r};r.tickPadding=function(e){if(!arguments.length)return E;E=+e;return r};r.tickSubdivide=function(){return arguments.length&&r};return r};var zl="bottom",Nl={top:1,right:1,bottom:1,left:1};function Fl(e,r,n){e.attr("transform",function(e){var t=r(e);return"translate("+(isFinite(t)?t:n(e))+",0)"})}function jl(e,r,n){e.attr("transform",function(e){var t=r(e);return"translate(0,"+(isFinite(t)?t:n(e))+")"})}I.svg.brush=function(){var b=B(L,"brushstart","brush","brushend"),x=null,w=null,A=[0,0],T=[0,0],k,M,S=true,C=true,o=Hl[0];function L(e){e.each(function(){var e=I.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",s).on("touchstart.brush",s);var t=e.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var r=e.selectAll(".resize").data(o,N);r.exit().remove();r.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Bl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");r.style("display",L.empty()?"none":null);var n=I.transition(e),a=I.transition(t),i;if(x){i=is(x);a.attr("x",i[0]).attr("width",i[1]-i[0]);D(n)}if(w){i=is(w);a.attr("y",i[0]).attr("height",i[1]-i[0]);O(n)}E(n)})}L.event=function(e){e.each(function(){var n=b.of(this,arguments),a={x:A,y:T,i:k,j:M},e=this.__chart__||a;this.__chart__=a;if(El){I.select(this).transition().each("start.brush",function(){k=e.i;M=e.j;A=e.x;T=e.y;n({type:"brushstart"})}).tween("brush:brush",function(){var t=Ti(A,a.x),r=Ti(T,a.y);k=M=null;return function(e){A=a.x=t(e);T=a.y=r(e);n({type:"brush",mode:"resize"})}}).each("end.brush",function(){k=a.i;M=a.j;n({type:"brush",mode:"resize"});n({type:"brushend"})})}else{n({type:"brushstart"});n({type:"brush",mode:"resize"});n({type:"brushend"})}})};function E(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+A[+/e$/.test(e)]+","+T[+/^s/.test(e)]+")"})}function D(e){e.select(".extent").attr("x",A[0]);e.selectAll(".extent,.n>rect,.s>rect").attr("width",A[1]-A[0])}function O(e){e.select(".extent").attr("y",T[0]);e.selectAll(".extent,.e>rect,.w>rect").attr("height",T[1]-T[0])}function s(){var r=this,e=I.select(I.event.target),n=b.of(r,arguments),a=I.select(r),t=e.datum(),i=!/^(n|s)$/.test(t)&&x,o=!/^(e|w)$/.test(t)&&w,f=e.classed("extent"),s=xe(r),d,h=I.mouse(r),l;var c=I.select(z(r)).on("keydown.brush",v).on("keyup.brush",g);if(I.event.changedTouches){c.on("touchmove.brush",m).on("touchend.brush",y)}else{c.on("mousemove.brush",m).on("mouseup.brush",y)}a.interrupt().selectAll("*").interrupt();if(f){h[0]=A[0]-h[0];h[1]=T[0]-h[1]}else if(t){var u=+/w$/.test(t),p=+/^n/.test(t);l=[A[1-u]-h[0],T[1-p]-h[1]];h[0]=A[u];h[1]=T[p]}else if(I.event.altKey)d=h.slice();a.style("pointer-events","none").selectAll(".resize").style("display",null);I.select("body").style("cursor",e.style("cursor"));n({type:"brushstart"});m();function v(){if(I.event.keyCode==32){if(!f){d=null;h[0]-=A[1];h[1]-=T[1];f=2}F()}}function g(){if(I.event.keyCode==32&&f==2){h[0]+=A[1];h[1]+=T[1];f=0;F()}}function m(){var e=I.mouse(r),t=false;if(l){e[0]+=l[0];e[1]+=l[1]}if(!f){if(I.event.altKey){if(!d)d=[(A[0]+A[1])/2,(T[0]+T[1])/2];h[0]=A[+(e[0]<d[0])];h[1]=T[+(e[1]<d[1])]}else d=null}if(i&&_(e,x,0)){D(a);t=true}if(o&&_(e,w,1)){O(a);t=true}if(t){E(a);n({type:"brush",mode:f?"move":"resize"})}}function _(e,t,r){var n=is(t),a=n[0],i=n[1],o=h[r],s=r?T:A,l=s[1]-s[0],c,u;if(f){a-=o;i-=l+o}c=(r?C:S)?Math.max(a,Math.min(i,e[r])):e[r];if(f){u=(c+=o)+l}else{if(d)o=Math.max(a,Math.min(i,2*d[r]-c));if(o<c){u=c;c=o}else{u=o}}if(s[0]!=c||s[1]!=u){if(r)M=null;else k=null;s[0]=c;s[1]=u;return true}}function y(){m();a.style("pointer-events","all").selectAll(".resize").style("display",L.empty()?"none":null);I.select("body").style("cursor",null);c.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);s();n({type:"brushend"})}}L.x=function(e){if(!arguments.length)return x;x=e;o=Hl[!x<<1|!w];return L};L.y=function(e){if(!arguments.length)return w;w=e;o=Hl[!x<<1|!w];return L};L.clamp=function(e){if(!arguments.length)return x&&w?[S,C]:x?S:w?C:null;if(x&&w)S=!!e[0],C=!!e[1];else if(x)S=!!e;else if(w)C=!!e;return L};L.extent=function(e){var t,r,n,a,i;if(!arguments.length){if(x){if(k){t=k[0],r=k[1]}else{t=A[0],r=A[1];if(x.invert)t=x.invert(t),r=x.invert(r);if(r<t)i=t,t=r,r=i}}if(w){if(M){n=M[0],a=M[1]}else{n=T[0],a=T[1];if(w.invert)n=w.invert(n),a=w.invert(a);if(a<n)i=n,n=a,a=i}}return x&&w?[[t,n],[r,a]]:x?[t,r]:w&&[n,a]}if(x){t=e[0],r=e[1];if(w)t=t[0],r=r[0];k=[t,r];if(x.invert)t=x(t),r=x(r);if(r<t)i=t,t=r,r=i;if(t!=A[0]||r!=A[1])A=[t,r]}if(w){n=e[0],a=e[1];if(x)n=n[1],a=a[1];M=[n,a];if(w.invert)n=w(n),a=w(a);if(a<n)i=n,n=a,a=i;if(n!=T[0]||a!=T[1])T=[n,a]}return L};L.clear=function(){if(!L.empty()){A=[0,0],T=[0,0];k=M=null}return L};L.empty=function(){return!!x&&A[0]==A[1]||!!w&&T[0]==T[1]};return I.rebind(L,b,"on")};var Bl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var Hl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];var Ul=Vt.format=yr.timeFormat;var Vl=Ul.utc;var ql=Vl("%Y-%m-%dT%H:%M:%S.%LZ");Ul.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Yl:ql;function Yl(e){return e.toISOString()}Yl.parse=function(e){var t=new Date(e);return isNaN(t)?null:t};Yl.toString=ql.toString;Vt.second=Wt(function(e){return new qt(Math.floor(e/1e3)*1e3)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*1e3)},function(e){return e.getSeconds()});Vt.seconds=Vt.second.range;Vt.seconds.utc=Vt.second.utc.range;Vt.minute=Wt(function(e){return new qt(Math.floor(e/6e4)*6e4)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*6e4)},function(e){return e.getMinutes()});Vt.minutes=Vt.minute.range;Vt.minutes.utc=Vt.minute.utc.range;Vt.hour=Wt(function(e){var t=e.getTimezoneOffset()/60;return new qt((Math.floor(e/36e5-t)+t)*36e5)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*36e5)},function(e){return e.getHours()});Vt.hours=Vt.hour.range;Vt.hours.utc=Vt.hour.utc.range;Vt.month=Wt(function(e){e=Vt.day(e);e.setDate(1);return e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()});Vt.months=Vt.month.range;Vt.months.utc=Vt.month.utc.range;function Gl(t,i,e){function o(e){return t(e)}o.invert=function(e){return Wl(t.invert(e))};o.domain=function(e){if(!arguments.length)return t.domain().map(Wl);t.domain(e);return o};function s(e,t){var r=e[1]-e[0],n=r/t,a=I.bisect(Xl,n);return a==Xl.length?[i.year,ps(e.map(function(e){return e/31536e6}),t)[2]]:!a?[$l,ps(e,t)[2]]:i[n/Xl[a-1]<Xl[a]/n?a-1:a]}o.nice=function(t,r){var e=o.domain(),n=as(e),a=t==null?s(n,10):typeof t==="number"&&s(n,t);if(a)t=a[0],r=a[1];function i(e){return!isNaN(e)&&!t.range(e,Wl(+e+1),r).length}return o.domain(ss(e,r>1?{floor:function(e){while(i(e=t.floor(e)))e=Wl(e-1);return e},ceil:function(e){while(i(e=t.ceil(e)))e=Wl(+e+1);return e}}:t))};o.ticks=function(e,t){var r=as(o.domain()),n=e==null?s(r,10):typeof e==="number"?s(r,e):!e.range&&[{range:e},t];if(n)e=n[0],t=n[1];return e.range(r[0],Wl(+r[1]+1),t<1?1:t)};o.tickFormat=function(){return e};o.copy=function(){return Gl(t.copy(),i,e)};return ds(o,t)}function Wl(e){return new Date(e)}var Xl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6];var Zl=[[Vt.second,1],[Vt.second,5],[Vt.second,15],[Vt.second,30],[Vt.minute,1],[Vt.minute,5],[Vt.minute,15],[Vt.minute,30],[Vt.hour,1],[Vt.hour,3],[Vt.hour,6],[Vt.hour,12],[Vt.day,1],[Vt.day,2],[Vt.week,1],[Vt.month,1],[Vt.month,3],[Vt.year,1]];var Jl=Ul.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&e.getDate()!=1}],["%b %d",function(e){return e.getDate()!=1}],["%B",function(e){return e.getMonth()}],["%Y",an]]);var $l={range:function(e,t,r){return I.range(Math.ceil(e/r)*r,+t,r).map(Wl)},floor:N,ceil:N};Zl.year=Vt.year;Vt.scale=function(){return Gl(I.scale.linear(),Zl,Jl)};var Ql=Zl.map(function(e){return[e[0].utc,e[1]]});var Kl=Vl.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],["%b %d",function(e){return e.getUTCDate()!=1}],["%B",function(e){return e.getUTCMonth()}],["%Y",an]]);Ql.year=Vt.year.utc;Vt.scale.utc=function(){return Gl(I.scale.linear(),Ql,Kl)};I.text=At(function(e){return e.responseText});I.json=function(e,t){return Tt(e,"application/json",ec,t)};function ec(e){return JSON.parse(e.responseText)}I.html=function(e,t){return Tt(e,"text/html",tc,t)};function tc(e){var t=R.createRange();t.selectNode(R.body);return t.createContextualFragment(e.responseText)}I.xml=At(function(e){return e.responseXML});if(typeof nc==="function"&&nc.amd)this.d3=I,nc(I);else if(typeof rc==="object"&&rc.exports)rc.exports=I;else this.d3=I}.apply(self)},{}],12:[function(e,t,r){"use strict";var n=typeof Reflect==="object"?Reflect:null;var f=n&&typeof n.apply==="function"?n.apply:function e(t,r,n){return Function.prototype.apply.call(t,r,n)};var a;if(n&&typeof n.ownKeys==="function"){a=n.ownKeys}else if(Object.getOwnPropertySymbols){a=function e(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}}else{a=function e(t){return Object.getOwnPropertyNames(t)}}function l(e){if(console&&console.warn)console.warn(e)}var i=Number.isNaN||function e(t){return t!==t};function o(){o.init.call(this)}t.exports=o;t.exports.once=b;o.EventEmitter=o;o.prototype._events=undefined;o.prototype._eventsCount=0;o.prototype._maxListeners=undefined;var s=10;function c(e){if(typeof e!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:true,get:function(){return s},set:function(e){if(typeof e!=="number"||e<0||i(e)){throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".")}s=e}});o.init=function(){if(this._events===undefined||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};o.prototype.setMaxListeners=function e(t){if(typeof t!=="number"||t<0||i(t)){throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".")}this._maxListeners=t;return this};function u(e){if(e._maxListeners===undefined)return o.defaultMaxListeners;return e._maxListeners}o.prototype.getMaxListeners=function e(){return u(this)};o.prototype.emit=function e(t){var r=[];for(var n=1;n<arguments.length;n++)r.push(arguments[n]);var a=t==="error";var i=this._events;if(i!==undefined)a=a&&i.error===undefined;else if(!a)return false;if(a){var o;if(r.length>0)o=r[0];if(o instanceof Error){throw o}var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));s.context=o;throw s}var l=i[t];if(l===undefined)return false;if(typeof l==="function"){f(l,this,r)}else{var c=l.length;var u=m(l,c);for(var n=0;n<c;++n)f(u[n],this,r)}return true};function d(e,t,r,n){var a;var i;var o;c(r);i=e._events;if(i===undefined){i=e._events=Object.create(null);e._eventsCount=0}else{if(i.newListener!==undefined){e.emit("newListener",t,r.listener?r.listener:r);i=e._events}o=i[t]}if(o===undefined){o=i[t]=r;++e._eventsCount}else{if(typeof o==="function"){o=i[t]=n?[r,o]:[o,r]}else if(n){o.unshift(r)}else{o.push(r)}a=u(e);if(a>0&&o.length>a&&!o.warned){o.warned=true;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners "+"added. Use emitter.setMaxListeners() to "+"increase limit");s.name="MaxListenersExceededWarning";s.emitter=e;s.type=t;s.count=o.length;l(s)}}return e}o.prototype.addListener=function e(t,r){return d(this,t,r,false)};o.prototype.on=o.prototype.addListener;o.prototype.prependListener=function e(t,r){return d(this,t,r,true)};function h(){if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;if(arguments.length===0)return this.listener.call(this.target);return this.listener.apply(this.target,arguments)}}function p(e,t,r){var n={fired:false,wrapFn:undefined,target:e,type:t,listener:r};var a=h.bind(n);a.listener=r;n.wrapFn=a;return a}o.prototype.once=function e(t,r){c(r);this.on(t,p(this,t,r));return this};o.prototype.prependOnceListener=function e(t,r){c(r);this.prependListener(t,p(this,t,r));return this};o.prototype.removeListener=function e(t,r){var n,a,i,o,s;c(r);a=this._events;if(a===undefined)return this;n=a[t];if(n===undefined)return this;if(n===r||n.listener===r){if(--this._eventsCount===0)this._events=Object.create(null);else{delete a[t];if(a.removeListener)this.emit("removeListener",t,n.listener||r)}}else if(typeof n!=="function"){i=-1;for(o=n.length-1;o>=0;o--){if(n[o]===r||n[o].listener===r){s=n[o].listener;i=o;break}}if(i<0)return this;if(i===0)n.shift();else{_(n,i)}if(n.length===1)a[t]=n[0];if(a.removeListener!==undefined)this.emit("removeListener",t,s||r)}return this};o.prototype.off=o.prototype.removeListener;o.prototype.removeAllListeners=function e(t){var r,n,a;n=this._events;if(n===undefined)return this;if(n.removeListener===undefined){if(arguments.length===0){this._events=Object.create(null);this._eventsCount=0}else if(n[t]!==undefined){if(--this._eventsCount===0)this._events=Object.create(null);else delete n[t]}return this}if(arguments.length===0){var i=Object.keys(n);var o;for(a=0;a<i.length;++a){o=i[a];if(o==="removeListener")continue;this.removeAllListeners(o)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}r=n[t];if(typeof r==="function"){this.removeListener(t,r)}else if(r!==undefined){for(a=r.length-1;a>=0;a--){this.removeListener(t,r[a])}}return this};function v(e,t,r){var n=e._events;if(n===undefined)return[];var a=n[t];if(a===undefined)return[];if(typeof a==="function")return r?[a.listener||a]:[a];return r?y(a):m(a,a.length)}o.prototype.listeners=function e(t){return v(this,t,true)};o.prototype.rawListeners=function e(t){return v(this,t,false)};o.listenerCount=function(e,t){if(typeof e.listenerCount==="function"){return e.listenerCount(t)}else{return g.call(e,t)}};o.prototype.listenerCount=g;function g(e){var t=this._events;if(t!==undefined){var r=t[e];if(typeof r==="function"){return 1}else if(r!==undefined){return r.length}}return 0}o.prototype.eventNames=function e(){return this._eventsCount>0?a(this._events):[]};function m(e,t){var r=new Array(t);for(var n=0;n<t;++n)r[n]=e[n];return r}function _(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function y(e){var t=new Array(e.length);for(var r=0;r<t.length;++r){t[r]=e[r].listener||e[r]}return t}function b(a,i){return new Promise(function(e,r){function n(){if(t!==undefined){a.removeListener("error",t)}e([].slice.call(arguments))}var t;if(i!=="error"){t=function e(t){a.removeListener(i,n);r(t)};a.once("error",t)}a.once(i,n)})}},{}],13:[function(r,n,a){(function(e,t){typeof a==="object"&&typeof n!=="undefined"?t(a,r("d3-time")):typeof nc==="function"&&nc.amd?nc(["exports","d3-time"],t):(e=e||self,t(e.d3=e.d3||{},e.d3))})(this,function(t,Y){"use strict";function G(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);t.setFullYear(e.y);return t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function W(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));t.setUTCFullYear(e.y);return t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function X(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function r(e){var n=e.dateTime,a=e.date,i=e.time,t=e.periods,r=e.days,o=e.shortDays,s=e.months,l=e.shortMonths;var c=J(t),u=$(t),f=J(r),d=$(r),h=J(o),p=$(o),v=J(s),g=$(s),m=J(l),_=$(l);var y={a:P,A:I,b:R,B:z,c:null,d:_e,e:_e,f:Ae,H:ye,I:be,j:xe,L:we,m:Te,M:ke,p:N,q:F,Q:Ke,s:et,S:Me,u:Se,U:Ce,V:Le,w:Ee,W:De,x:null,X:null,y:Oe,Y:Pe,Z:Ie,"%":Qe};var b={a:j,A:B,b:H,B:U,c:null,d:Re,e:Re,f:Be,H:ze,I:Ne,j:Fe,L:je,m:He,M:Ue,p:V,q:q,Q:Ke,s:et,S:Ve,u:qe,U:Ye,V:Ge,w:We,W:Xe,x:null,X:null,y:Ze,Y:Je,Z:$e,"%":Qe};var x={a:M,A:S,b:C,B:L,c:E,d:le,e:le,f:pe,H:ue,I:ue,j:ce,L:he,m:se,M:fe,p:k,q:oe,Q:ge,s:me,S:de,u:K,U:ee,V:te,w:Q,W:re,x:D,X:O,y:ae,Y:ne,Z:ie,"%":ve};y.x=w(a,y);y.X=w(i,y);y.c=w(n,y);b.x=w(a,b);b.X=w(i,b);b.c=w(n,b);function w(l,c){return function(e){var t=[],r=-1,n=0,a=l.length,i,o,s;if(!(e instanceof Date))e=new Date(+e);while(++r<a){if(l.charCodeAt(r)===37){t.push(l.slice(n,r));if((o=Z[i=l.charAt(++r)])!=null)i=l.charAt(++r);else o=i==="e"?" ":"0";if(s=c[i])i=s(e,o);t.push(i);n=r+1}}t.push(l.slice(n,r));return t.join("")}}function A(i,o){return function(e){var t=X(1900,undefined,1),r=T(t,i,e+="",0),n,a;if(r!=e.length)return null;if("Q"in t)return new Date(t.Q);if("s"in t)return new Date(t.s*1e3+("L"in t?t.L:0));if(o&&!("Z"in t))t.Z=0;if("p"in t)t.H=t.H%12+t.p*12;if(t.m===undefined)t.m="q"in t?t.q:0;if("V"in t){if(t.V<1||t.V>53)return null;if(!("w"in t))t.w=1;if("Z"in t){n=W(X(t.y,0,1)),a=n.getUTCDay();n=a>4||a===0?Y.utcMonday.ceil(n):Y.utcMonday(n);n=Y.utcDay.offset(n,(t.V-1)*7);t.y=n.getUTCFullYear();t.m=n.getUTCMonth();t.d=n.getUTCDate()+(t.w+6)%7}else{n=G(X(t.y,0,1)),a=n.getDay();n=a>4||a===0?Y.timeMonday.ceil(n):Y.timeMonday(n);n=Y.timeDay.offset(n,(t.V-1)*7);t.y=n.getFullYear();t.m=n.getMonth();t.d=n.getDate()+(t.w+6)%7}}else if("W"in t||"U"in t){if(!("w"in t))t.w="u"in t?t.u%7:"W"in t?1:0;a="Z"in t?W(X(t.y,0,1)).getUTCDay():G(X(t.y,0,1)).getDay();t.m=0;t.d="W"in t?(t.w+6)%7+t.W*7-(a+5)%7:t.w+t.U*7-(a+6)%7}if("Z"in t){t.H+=t.Z/100|0;t.M+=t.Z%100;return W(t)}return G(t)}}function T(e,t,r,n){var a=0,i=t.length,o=r.length,s,l;while(a<i){if(n>=o)return-1;s=t.charCodeAt(a++);if(s===37){s=t.charAt(a++);l=x[s in Z?t.charAt(a++):s];if(!l||(n=l(e,r,n))<0)return-1}else if(s!=r.charCodeAt(n++)){return-1}}return n}function k(e,t,r){var n=c.exec(t.slice(r));return n?(e.p=u[n[0].toLowerCase()],r+n[0].length):-1}function M(e,t,r){var n=h.exec(t.slice(r));return n?(e.w=p[n[0].toLowerCase()],r+n[0].length):-1}function S(e,t,r){var n=f.exec(t.slice(r));return n?(e.w=d[n[0].toLowerCase()],r+n[0].length):-1}function C(e,t,r){var n=m.exec(t.slice(r));return n?(e.m=_[n[0].toLowerCase()],r+n[0].length):-1}function L(e,t,r){var n=v.exec(t.slice(r));return n?(e.m=g[n[0].toLowerCase()],r+n[0].length):-1}function E(e,t,r){return T(e,n,t,r)}function D(e,t,r){return T(e,a,t,r)}function O(e,t,r){return T(e,i,t,r)}function P(e){return o[e.getDay()]}function I(e){return r[e.getDay()]}function R(e){return l[e.getMonth()]}function z(e){return s[e.getMonth()]}function N(e){return t[+(e.getHours()>=12)]}function F(e){return 1+~~(e.getMonth()/3)}function j(e){return o[e.getUTCDay()]}function B(e){return r[e.getUTCDay()]}function H(e){return l[e.getUTCMonth()]}function U(e){return s[e.getUTCMonth()]}function V(e){return t[+(e.getUTCHours()>=12)]}function q(e){return 1+~~(e.getUTCMonth()/3)}return{format:function(e){var t=w(e+="",y);t.toString=function(){return e};return t},parse:function(e){var t=A(e+="",false);t.toString=function(){return e};return t},utcFormat:function(e){var t=w(e+="",b);t.toString=function(){return e};return t},utcParse:function(e){var t=A(e+="",true);t.toString=function(){return e};return t}}}var Z={"-":"",_:" ",0:"0"},a=/^\s*\d+/,i=/^%/,n=/[\\^$*+?|[\]().{}]/g;function o(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function s(e){return e.replace(n,"\\$&")}function J(e){return new RegExp("^(?:"+e.map(s).join("|")+")","i")}function $(e){var t={},r=-1,n=e.length;while(++r<n)t[e[r].toLowerCase()]=r;return t}function Q(e,t,r){var n=a.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function K(e,t,r){var n=a.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function ee(e,t,r){var n=a.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function te(e,t,r){var n=a.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function re(e,t,r){var n=a.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function ne(e,t,r){var n=a.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function ae(e,t,r){var n=a.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function ie(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function oe(e,t,r){var n=a.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function se(e,t,r){var n=a.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function le(e,t,r){var n=a.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function ce(e,t,r){var n=a.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function ue(e,t,r){var n=a.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function fe(e,t,r){var n=a.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function de(e,t,r){var n=a.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function he(e,t,r){var n=a.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function pe(e,t,r){var n=a.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function ve(e,t,r){var n=i.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function ge(e,t,r){var n=a.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function me(e,t,r){var n=a.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function _e(e,t){return o(e.getDate(),t,2)}function ye(e,t){return o(e.getHours(),t,2)}function be(e,t){return o(e.getHours()%12||12,t,2)}function xe(e,t){return o(1+Y.timeDay.count(Y.timeYear(e),e),t,3)}function we(e,t){return o(e.getMilliseconds(),t,3)}function Ae(e,t){return we(e,t)+"000"}function Te(e,t){return o(e.getMonth()+1,t,2)}function ke(e,t){return o(e.getMinutes(),t,2)}function Me(e,t){return o(e.getSeconds(),t,2)}function Se(e){var t=e.getDay();return t===0?7:t}function Ce(e,t){return o(Y.timeSunday.count(Y.timeYear(e)-1,e),t,2)}function Le(e,t){var r=e.getDay();e=r>=4||r===0?Y.timeThursday(e):Y.timeThursday.ceil(e);return o(Y.timeThursday.count(Y.timeYear(e),e)+(Y.timeYear(e).getDay()===4),t,2)}function Ee(e){return e.getDay()}function De(e,t){return o(Y.timeMonday.count(Y.timeYear(e)-1,e),t,2)}function Oe(e,t){return o(e.getFullYear()%100,t,2)}function Pe(e,t){return o(e.getFullYear()%1e4,t,4)}function Ie(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+o(t/60|0,"0",2)+o(t%60,"0",2)}function Re(e,t){return o(e.getUTCDate(),t,2)}function ze(e,t){return o(e.getUTCHours(),t,2)}function Ne(e,t){return o(e.getUTCHours()%12||12,t,2)}function Fe(e,t){return o(1+Y.utcDay.count(Y.utcYear(e),e),t,3)}function je(e,t){return o(e.getUTCMilliseconds(),t,3)}function Be(e,t){return je(e,t)+"000"}function He(e,t){return o(e.getUTCMonth()+1,t,2)}function Ue(e,t){return o(e.getUTCMinutes(),t,2)}function Ve(e,t){return o(e.getUTCSeconds(),t,2)}function qe(e){var t=e.getUTCDay();return t===0?7:t}function Ye(e,t){return o(Y.utcSunday.count(Y.utcYear(e)-1,e),t,2)}function Ge(e,t){var r=e.getUTCDay();e=r>=4||r===0?Y.utcThursday(e):Y.utcThursday.ceil(e);return o(Y.utcThursday.count(Y.utcYear(e),e)+(Y.utcYear(e).getUTCDay()===4),t,2)}function We(e){return e.getUTCDay()}function Xe(e,t){return o(Y.utcMonday.count(Y.utcYear(e)-1,e),t,2)}function Ze(e,t){return o(e.getUTCFullYear()%100,t,2)}function Je(e,t){return o(e.getUTCFullYear()%1e4,t,4)}function $e(){return"+0000"}function Qe(){return"%"}function Ke(e){return+e}function et(e){return Math.floor(+e/1e3)}var l;e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function e(e){l=r(e);t.timeFormat=l.format;t.timeParse=l.parse;t.utcFormat=l.utcFormat;t.utcParse=l.utcParse;return l}var c="%Y-%m-%dT%H:%M:%S.%LZ";function u(e){return e.toISOString()}var f=Date.prototype.toISOString?u:t.utcFormat(c);function d(e){var t=new Date(e);return isNaN(t)?null:t}var h=+new Date("2000-01-01T00:00:00.000Z")?d:t.utcParse(c);t.isoFormat=f;t.isoParse=h;t.timeFormatDefaultLocale=e;t.timeFormatLocale=r;Object.defineProperty(t,"__esModule",{value:true})})},{"d3-time":14}],14:[function(e,r,n){(function(e,t){typeof n==="object"&&typeof r!=="undefined"?t(n):typeof nc==="function"&&nc.amd?nc(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(this,function(e){"use strict";var a=new Date,l=new Date;function c(i,o,r,n){function s(e){return i(e=arguments.length===0?new Date:new Date(+e)),e}s.floor=function(e){return i(e=new Date(+e)),e};s.ceil=function(e){return i(e=new Date(e-1)),o(e,1),i(e),e};s.round=function(e){var t=s(e),r=s.ceil(e);return e-t<r-e?t:r};s.offset=function(e,t){return o(e=new Date(+e),t==null?1:Math.floor(t)),e};s.range=function(e,t,r){var n=[],a;e=s.ceil(e);r=r==null?1:Math.floor(r);if(!(e<t)||!(r>0))return n;do{n.push(a=new Date(+e)),o(e,r),i(e)}while(a<e&&e<t);return n};s.filter=function(r){return c(function(e){if(e>=e)while(i(e),!r(e))e.setTime(e-1)},function(e,t){if(e>=e){if(t<0)while(++t<=0){while(o(e,-1),!r(e)){}}else while(--t>=0){while(o(e,+1),!r(e)){}}}})};if(r){s.count=function(e,t){a.setTime(+e),l.setTime(+t);i(a),i(l);return Math.floor(r(a,l))};s.every=function(t){t=Math.floor(t);return!isFinite(t)||!(t>0)?null:!(t>1)?s:s.filter(n?function(e){return n(e)%t===0}:function(e){return s.count(0,e)%t===0})}}return s}var t=c(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});t.every=function(r){r=Math.floor(r);if(!isFinite(r)||!(r>0))return null;if(!(r>1))return t;return c(function(e){e.setTime(Math.floor(e/r)*r)},function(e,t){e.setTime(+e+t*r)},function(e,t){return(t-e)/r})};var r=t.range;var n=1e3;var i=6e4;var o=36e5;var s=864e5;var u=6048e5;var f=c(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*n)},function(e,t){return(t-e)/n},function(e){return e.getUTCSeconds()});var d=f.range;var h=c(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*n)},function(e,t){e.setTime(+e+t*i)},function(e,t){return(t-e)/i},function(e){return e.getMinutes()});var p=h.range;var v=c(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*n-e.getMinutes()*i)},function(e,t){e.setTime(+e+t*o)},function(e,t){return(t-e)/o},function(e){return e.getHours()});var g=v.range;var m=c(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i)/s},function(e){return e.getDate()-1});var _=m.range;function y(t){return c(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7);e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i)/u})}var b=y(0);var x=y(1);var w=y(2);var A=y(3);var T=y(4);var k=y(5);var M=y(6);var S=b.range;var C=x.range;var L=w.range;var E=A.range;var D=T.range;var O=k.range;var P=M.range;var I=c(function(e){e.setDate(1);e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});var R=I.range;var z=c(function(e){e.setMonth(0,1);e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});z.every=function(r){return!isFinite(r=Math.floor(r))||!(r>0)?null:c(function(e){e.setFullYear(Math.floor(e.getFullYear()/r)*r);e.setMonth(0,1);e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*r)})};var N=z.range;var F=c(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*i)},function(e,t){return(t-e)/i},function(e){return e.getUTCMinutes()});var j=F.range;var B=c(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*o)},function(e,t){return(t-e)/o},function(e){return e.getUTCHours()});var H=B.range;var U=c(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/s},function(e){return e.getUTCDate()-1});var V=U.range;function q(t){return c(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/u})}var Y=q(0);var G=q(1);var W=q(2);var X=q(3);var Z=q(4);var J=q(5);var $=q(6);var Q=Y.range;var K=G.range;var ee=W.range;var te=X.range;var re=Z.range;var ne=J.range;var ae=$.range;var ie=c(function(e){e.setUTCDate(1);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()});var oe=ie.range;var se=c(function(e){e.setUTCMonth(0,1);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});se.every=function(r){return!isFinite(r=Math.floor(r))||!(r>0)?null:c(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/r)*r);e.setUTCMonth(0,1);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*r)})};var le=se.range;e.timeDay=m;e.timeDays=_;e.timeFriday=k;e.timeFridays=O;e.timeHour=v;e.timeHours=g;e.timeInterval=c;e.timeMillisecond=t;e.timeMilliseconds=r;e.timeMinute=h;e.timeMinutes=p;e.timeMonday=x;e.timeMondays=C;e.timeMonth=I;e.timeMonths=R;e.timeSaturday=M;e.timeSaturdays=P;e.timeSecond=f;e.timeSeconds=d;e.timeSunday=b;e.timeSundays=S;e.timeThursday=T;e.timeThursdays=D;e.timeTuesday=w;e.timeTuesdays=L;e.timeWednesday=A;e.timeWednesdays=E;e.timeWeek=b;e.timeWeeks=S;e.timeYear=z;e.timeYears=N;e.utcDay=U;e.utcDays=V;e.utcFriday=J;e.utcFridays=ne;e.utcHour=B;e.utcHours=H;e.utcMillisecond=t;e.utcMilliseconds=r;e.utcMinute=F;e.utcMinutes=j;e.utcMonday=G;e.utcMondays=K;e.utcMonth=ie;e.utcMonths=oe;e.utcSaturday=$;e.utcSaturdays=ae;e.utcSecond=f;e.utcSeconds=d;e.utcSunday=Y;e.utcSundays=Q;e.utcThursday=Z;e.utcThursdays=re;e.utcTuesday=W;e.utcTuesdays=ee;e.utcWednesday=X;e.utcWednesdays=te;e.utcWeek=Y;e.utcWeeks=Q;e.utcYear=se;e.utcYears=le;Object.defineProperty(e,"__esModule",{value:true})})},{}],15:[function(e,t,r){"use strict";var n=e("is-string-blank");t.exports=function(e){var t=typeof e;if(t==="string"){var r=e;e=+e;if(e===0&&n(r))return false}else if(t!=="number")return false;return e-e<1}},{"is-string-blank":50}],16:[function(e,t,r){t.exports=n;function n(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],f=t[9],d=t[10],h=t[11],p=t[12],v=t[13],g=t[14],m=t[15];e[0]=s*(d*m-h*g)-f*(l*m-c*g)+v*(l*h-c*d);e[1]=-(n*(d*m-h*g)-f*(a*m-i*g)+v*(a*h-i*d));e[2]=n*(l*m-c*g)-s*(a*m-i*g)+v*(a*c-i*l);e[3]=-(n*(l*h-c*d)-s*(a*h-i*d)+f*(a*c-i*l));e[4]=-(o*(d*m-h*g)-u*(l*m-c*g)+p*(l*h-c*d));e[5]=r*(d*m-h*g)-u*(a*m-i*g)+p*(a*h-i*d);e[6]=-(r*(l*m-c*g)-o*(a*m-i*g)+p*(a*c-i*l));e[7]=r*(l*h-c*d)-o*(a*h-i*d)+u*(a*c-i*l);e[8]=o*(f*m-h*v)-u*(s*m-c*v)+p*(s*h-c*f);e[9]=-(r*(f*m-h*v)-u*(n*m-i*v)+p*(n*h-i*f));e[10]=r*(s*m-c*v)-o*(n*m-i*v)+p*(n*c-i*s);e[11]=-(r*(s*h-c*f)-o*(n*h-i*f)+u*(n*c-i*s));e[12]=-(o*(f*g-d*v)-u*(s*g-l*v)+p*(s*d-l*f));e[13]=r*(f*g-d*v)-u*(n*g-a*v)+p*(n*d-a*f);e[14]=-(r*(s*g-l*v)-o*(n*g-a*v)+p*(n*l-a*s));e[15]=r*(s*d-l*f)-o*(n*d-a*f)+u*(n*l-a*s);return e}},{}],17:[function(e,t,r){t.exports=n;function n(e){var t=new Float32Array(16);t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];return t}},{}],18:[function(e,t,r){t.exports=n;function n(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[4]=t[4];e[5]=t[5];e[6]=t[6];e[7]=t[7];e[8]=t[8];e[9]=t[9];e[10]=t[10];e[11]=t[11];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15];return e}},{}],19:[function(e,t,r){t.exports=n;function n(){var e=new Float32Array(16);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],20:[function(e,t,r){t.exports=n;function n(e){var t=e[0],r=e[1],n=e[2],a=e[3],i=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],f=e[10],d=e[11],h=e[12],p=e[13],v=e[14],g=e[15],m=t*o-r*i,_=t*s-n*i,y=t*l-a*i,b=r*s-n*o,x=r*l-a*o,w=n*l-a*s,A=c*p-u*h,T=c*v-f*h,k=c*g-d*h,M=u*v-f*p,S=u*g-d*p,C=f*g-d*v;return m*C-_*S+y*M+b*k-x*T+w*A}},{}],21:[function(e,t,r){t.exports=n;function n(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=r+r,s=n+n,l=a+a,c=r*o,u=n*o,f=n*s,d=a*o,h=a*s,p=a*l,v=i*o,g=i*s,m=i*l;e[0]=1-f-p;e[1]=u+m;e[2]=d-g;e[3]=0;e[4]=u-m;e[5]=1-c-p;e[6]=h+v;e[7]=0;e[8]=d+g;e[9]=h-v;e[10]=1-c-f;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],22:[function(e,t,r){t.exports=n;function n(e,t,r){var n,a,i;var o=r[0];var s=r[1];var l=r[2];var c=Math.sqrt(o*o+s*s+l*l);if(Math.abs(c)<1e-6){return null}c=1/c;o*=c;s*=c;l*=c;n=Math.sin(t);a=Math.cos(t);i=1-a;e[0]=o*o*i+a;e[1]=s*o*i+l*n;e[2]=l*o*i-s*n;e[3]=0;e[4]=o*s*i-l*n;e[5]=s*s*i+a;e[6]=l*s*i+o*n;e[7]=0;e[8]=o*l*i+s*n;e[9]=s*l*i-o*n;e[10]=l*l*i+a;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],23:[function(e,t,r){t.exports=n;function n(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3],s=n+n,l=a+a,c=i+i,u=n*s,f=n*l,d=n*c,h=a*l,p=a*c,v=i*c,g=o*s,m=o*l,_=o*c;e[0]=1-(h+v);e[1]=f+_;e[2]=d-m;e[3]=0;e[4]=f-_;e[5]=1-(u+v);e[6]=p+g;e[7]=0;e[8]=d+m;e[9]=p-g;e[10]=1-(u+h);e[11]=0;e[12]=r[0];e[13]=r[1];e[14]=r[2];e[15]=1;return e}},{}],24:[function(e,t,r){t.exports=n;function n(e,t){e[0]=t[0];e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=t[1];e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=t[2];e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],25:[function(e,t,r){t.exports=n;function n(e,t){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=t[0];e[13]=t[1];e[14]=t[2];e[15]=1;return e}},{}],26:[function(e,t,r){t.exports=n;function n(e,t){var r=Math.sin(t),n=Math.cos(t);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=n;e[6]=r;e[7]=0;e[8]=0;e[9]=-r;e[10]=n;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],27:[function(e,t,r){t.exports=n;function n(e,t){var r=Math.sin(t),n=Math.cos(t);e[0]=n;e[1]=0;e[2]=-r;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=r;e[9]=0;e[10]=n;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],28:[function(e,t,r){t.exports=n;function n(e,t){var r=Math.sin(t),n=Math.cos(t);e[0]=n;e[1]=r;e[2]=0;e[3]=0;e[4]=-r;e[5]=n;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],29:[function(e,t,r){t.exports=n;function n(e,t,r,n,a,i,o){var s=1/(r-t),l=1/(a-n),c=1/(i-o);e[0]=i*2*s;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=i*2*l;e[6]=0;e[7]=0;e[8]=(r+t)*s;e[9]=(a+n)*l;e[10]=(o+i)*c;e[11]=-1;e[12]=0;e[13]=0;e[14]=o*i*2*c;e[15]=0;return e}},{}],30:[function(e,t,r){t.exports=n;function n(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],31:[function(e,t,r){t.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":16,"./clone":17,"./copy":18,"./create":19,"./determinant":20,"./fromQuat":21,"./fromRotation":22,"./fromRotationTranslation":23,"./fromScaling":24,"./fromTranslation":25,"./fromXRotation":26,"./fromYRotation":27,"./fromZRotation":28,"./frustum":29,"./identity":30,"./invert":32,"./lookAt":33,"./multiply":34,"./ortho":35,"./perspective":36,"./perspectiveFromFieldOfView":37,"./rotate":38,"./rotateX":39,"./rotateY":40,"./rotateZ":41,"./scale":42,"./str":43,"./translate":44,"./transpose":45}],32:[function(e,t,r){t.exports=n;function n(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],f=t[9],d=t[10],h=t[11],p=t[12],v=t[13],g=t[14],m=t[15],_=r*s-n*o,y=r*l-a*o,b=r*c-i*o,x=n*l-a*s,w=n*c-i*s,A=a*c-i*l,T=u*v-f*p,k=u*g-d*p,M=u*m-h*p,S=f*g-d*v,C=f*m-h*v,L=d*m-h*g,E=_*L-y*C+b*S+x*M-w*k+A*T;if(!E){return null}E=1/E;e[0]=(s*L-l*C+c*S)*E;e[1]=(a*C-n*L-i*S)*E;e[2]=(v*A-g*w+m*x)*E;e[3]=(d*w-f*A-h*x)*E;e[4]=(l*M-o*L-c*k)*E;e[5]=(r*L-a*M+i*k)*E;e[6]=(g*b-p*A-m*y)*E;e[7]=(u*A-d*b+h*y)*E;e[8]=(o*C-s*M+c*T)*E;e[9]=(n*M-r*C-i*T)*E;e[10]=(p*w-v*b+m*_)*E;e[11]=(f*b-u*w-h*_)*E;e[12]=(s*k-o*S-l*T)*E;e[13]=(r*S-n*k+a*T)*E;e[14]=(v*y-p*x-g*_)*E;e[15]=(u*x-f*y+d*_)*E;return e}},{}],33:[function(e,t,r){var A=e("./identity");t.exports=n;function n(e,t,r,n){var a,i,o,s,l,c,u,f,d,h,p=t[0],v=t[1],g=t[2],m=n[0],_=n[1],y=n[2],b=r[0],x=r[1],w=r[2];if(Math.abs(p-b)<1e-6&&Math.abs(v-x)<1e-6&&Math.abs(g-w)<1e-6){return A(e)}u=p-b;f=v-x;d=g-w;h=1/Math.sqrt(u*u+f*f+d*d);u*=h;f*=h;d*=h;a=_*d-y*f;i=y*u-m*d;o=m*f-_*u;h=Math.sqrt(a*a+i*i+o*o);if(!h){a=0;i=0;o=0}else{h=1/h;a*=h;i*=h;o*=h}s=f*o-d*i;l=d*a-u*o;c=u*i-f*a;h=Math.sqrt(s*s+l*l+c*c);if(!h){s=0;l=0;c=0}else{h=1/h;s*=h;l*=h;c*=h}e[0]=a;e[1]=s;e[2]=u;e[3]=0;e[4]=i;e[5]=l;e[6]=f;e[7]=0;e[8]=o;e[9]=c;e[10]=d;e[11]=0;e[12]=-(a*p+i*v+o*g);e[13]=-(s*p+l*v+c*g);e[14]=-(u*p+f*v+d*g);e[15]=1;return e}},{"./identity":30}],34:[function(e,t,r){t.exports=n;function n(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],f=t[8],d=t[9],h=t[10],p=t[11],v=t[12],g=t[13],m=t[14],_=t[15];var y=r[0],b=r[1],x=r[2],w=r[3];e[0]=y*n+b*s+x*f+w*v;e[1]=y*a+b*l+x*d+w*g;e[2]=y*i+b*c+x*h+w*m;e[3]=y*o+b*u+x*p+w*_;y=r[4];b=r[5];x=r[6];w=r[7];e[4]=y*n+b*s+x*f+w*v;e[5]=y*a+b*l+x*d+w*g;e[6]=y*i+b*c+x*h+w*m;e[7]=y*o+b*u+x*p+w*_;y=r[8];b=r[9];x=r[10];w=r[11];e[8]=y*n+b*s+x*f+w*v;e[9]=y*a+b*l+x*d+w*g;e[10]=y*i+b*c+x*h+w*m;e[11]=y*o+b*u+x*p+w*_;y=r[12];b=r[13];x=r[14];w=r[15];e[12]=y*n+b*s+x*f+w*v;e[13]=y*a+b*l+x*d+w*g;e[14]=y*i+b*c+x*h+w*m;e[15]=y*o+b*u+x*p+w*_;return e}},{}],35:[function(e,t,r){t.exports=n;function n(e,t,r,n,a,i,o){var s=1/(t-r),l=1/(n-a),c=1/(i-o);e[0]=-2*s;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=-2*l;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=2*c;e[11]=0;e[12]=(t+r)*s;e[13]=(a+n)*l;e[14]=(o+i)*c;e[15]=1;return e}},{}],36:[function(e,t,r){t.exports=n;function n(e,t,r,n,a){var i=1/Math.tan(t/2),o=1/(n-a);e[0]=i/r;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=i;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=(a+n)*o;e[11]=-1;e[12]=0;e[13]=0;e[14]=2*a*n*o;e[15]=0;return e}},{}],37:[function(e,t,r){t.exports=n;function n(e,t,r,n){var a=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),c=2/(a+i);e[0]=l;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=c;e[6]=0;e[7]=0;e[8]=-((o-s)*l*.5);e[9]=(a-i)*c*.5;e[10]=n/(r-n);e[11]=-1;e[12]=0;e[13]=0;e[14]=n*r/(r-n);e[15]=0;return e}},{}],38:[function(e,t,r){t.exports=n;function n(e,t,r,n){var a=n[0],i=n[1],o=n[2],s=Math.sqrt(a*a+i*i+o*o),l,c,u,f,d,h,p,v,g,m,_,y,b,x,w,A,T,k,M,S,C,L,E,D;if(Math.abs(s)<1e-6){return null}s=1/s;a*=s;i*=s;o*=s;l=Math.sin(r);c=Math.cos(r);u=1-c;f=t[0];d=t[1];h=t[2];p=t[3];v=t[4];g=t[5];m=t[6];_=t[7];y=t[8];b=t[9];x=t[10];w=t[11];A=a*a*u+c;T=i*a*u+o*l;k=o*a*u-i*l;M=a*i*u-o*l;S=i*i*u+c;C=o*i*u+a*l;L=a*o*u+i*l;E=i*o*u-a*l;D=o*o*u+c;e[0]=f*A+v*T+y*k;e[1]=d*A+g*T+b*k;e[2]=h*A+m*T+x*k;e[3]=p*A+_*T+w*k;e[4]=f*M+v*S+y*C;e[5]=d*M+g*S+b*C;e[6]=h*M+m*S+x*C;e[7]=p*M+_*S+w*C;e[8]=f*L+v*E+y*D;e[9]=d*L+g*E+b*D;e[10]=h*L+m*E+x*D;e[11]=p*L+_*E+w*D;if(t!==e){e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}return e}},{}],39:[function(e,t,r){t.exports=n;function n(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],f=t[10],d=t[11];if(t!==e){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[4]=i*a+c*n;e[5]=o*a+u*n;e[6]=s*a+f*n;e[7]=l*a+d*n;e[8]=c*a-i*n;e[9]=u*a-o*n;e[10]=f*a-s*n;e[11]=d*a-l*n;return e}},{}],40:[function(e,t,r){t.exports=n;function n(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[0],o=t[1],s=t[2],l=t[3],c=t[8],u=t[9],f=t[10],d=t[11];if(t!==e){e[4]=t[4];e[5]=t[5];e[6]=t[6];e[7]=t[7];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[0]=i*a-c*n;e[1]=o*a-u*n;e[2]=s*a-f*n;e[3]=l*a-d*n;e[8]=i*n+c*a;e[9]=o*n+u*a;e[10]=s*n+f*a;e[11]=l*n+d*a;return e}},{}],41:[function(e,t,r){t.exports=n;function n(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],f=t[6],d=t[7];if(t!==e){e[8]=t[8];e[9]=t[9];e[10]=t[10];e[11]=t[11];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[0]=i*a+c*n;e[1]=o*a+u*n;e[2]=s*a+f*n;e[3]=l*a+d*n;e[4]=c*a-i*n;e[5]=u*a-o*n;e[6]=f*a-s*n;e[7]=d*a-l*n;return e}},{}],42:[function(e,t,r){t.exports=n;function n(e,t,r){var n=r[0],a=r[1],i=r[2];e[0]=t[0]*n;e[1]=t[1]*n;e[2]=t[2]*n;e[3]=t[3]*n;e[4]=t[4]*a;e[5]=t[5]*a;e[6]=t[6]*a;e[7]=t[7]*a;e[8]=t[8]*i;e[9]=t[9]*i;e[10]=t[10]*i;e[11]=t[11]*i;e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15];return e}},{}],43:[function(e,t,r){t.exports=n;function n(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},{}],44:[function(e,t,r){t.exports=n;function n(e,t,r){var n=r[0],a=r[1],i=r[2],o,s,l,c,u,f,d,h,p,v,g,m;if(t===e){e[12]=t[0]*n+t[4]*a+t[8]*i+t[12];e[13]=t[1]*n+t[5]*a+t[9]*i+t[13];e[14]=t[2]*n+t[6]*a+t[10]*i+t[14];e[15]=t[3]*n+t[7]*a+t[11]*i+t[15]}else{o=t[0];s=t[1];l=t[2];c=t[3];u=t[4];f=t[5];d=t[6];h=t[7];p=t[8];v=t[9];g=t[10];m=t[11];e[0]=o;e[1]=s;e[2]=l;e[3]=c;e[4]=u;e[5]=f;e[6]=d;e[7]=h;e[8]=p;e[9]=v;e[10]=g;e[11]=m;e[12]=o*n+u*a+p*i+t[12];e[13]=s*n+f*a+v*i+t[13];e[14]=l*n+d*a+g*i+t[14];e[15]=c*n+h*a+m*i+t[15]}return e}},{}],45:[function(e,t,r){t.exports=n;function n(e,t){if(e===t){var r=t[1],n=t[2],a=t[3],i=t[6],o=t[7],s=t[11];e[1]=t[4];e[2]=t[8];e[3]=t[12];e[4]=r;e[6]=t[9];e[7]=t[13];e[8]=n;e[9]=i;e[11]=t[14];e[12]=a;e[13]=o;e[14]=s}else{e[0]=t[0];e[1]=t[4];e[2]=t[8];e[3]=t[12];e[4]=t[1];e[5]=t[5];e[6]=t[9];e[7]=t[13];e[8]=t[2];e[9]=t[6];e[10]=t[10];e[11]=t[14];e[12]=t[3];e[13]=t[7];e[14]=t[11];e[15]=t[15]}return e}},{}],46:[function(n,a,e){(function(r){(function(){"use strict";var e=n("is-browser");var t;if(typeof r.matchMedia==="function"){t=!r.matchMedia("(hover: none)").matches}else{t=e}a.exports=t}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"is-browser":48}],47:[function(e,t,r){"use strict";var n=e("is-browser");function a(){var t=false;try{var e=Object.defineProperty({},"passive",{get:function(){t=true}});window.addEventListener("test",null,e);window.removeEventListener("test",null,e)}catch(e){t=false}return t}t.exports=n&&a()},{"is-browser":48}],48:[function(e,t,r){t.exports=true},{}],49:[function(e,t,r){"use strict";t.exports=i;t.exports.isMobile=i;t.exports.default=i;var n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i;var a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function i(e){if(!e)e={};var t=e.ua;if(!t&&typeof navigator!=="undefined")t=navigator.userAgent;if(t&&t.headers&&typeof t.headers["user-agent"]==="string"){t=t.headers["user-agent"]}if(typeof t!=="string")return false;var r=e.tablet?a.test(t):n.test(t);if(!r&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1){r=true}return r}},{}],50:[function(e,t,r){"use strict";t.exports=function(e){var t=e.length,r;for(var n=0;n<t;n++){r=e.charCodeAt(n);if((r<9||r>13)&&r!==32&&r!==133&&r!==160&&r!==5760&&r!==6158&&(r<8192||r>8205)&&r!==8232&&r!==8233&&r!==8239&&r!==8287&&r!==8288&&r!==12288&&r!==65279){return false}}return true}},{}],51:[function(e,t,r){var n={left:0,top:0};t.exports=a;function a(e,t,r){t=t||e.currentTarget||e.srcElement;if(!Array.isArray(r)){r=[0,0]}var n=e.clientX||0;var a=e.clientY||0;var i=o(t);r[0]=n-i.left;r[1]=a-i.top;return r}function o(e){if(e===window||e===document||e===document.body){return n}else{return e.getBoundingClientRect()}}},{}],52:[function(e,a,t){(function(e,m){(function(){(function e(t,r,n){r[t]=r[t]||n();if(typeof a!="undefined"&&a.exports){a.exports=r[t]}else if(typeof nc=="function"&&nc.amd){nc(function e(){return r[t]})}})("Promise",typeof e!="undefined"?e:this,function e(){"use strict";var t,r,n,i=Object.prototype.toString,a=typeof m!="undefined"?function e(t){return m(t)}:setTimeout;try{Object.defineProperty({},"x",{});t=function e(t,r,n,a){return Object.defineProperty(t,r,{value:n,writable:true,configurable:a!==false})}}catch(e){t=function e(t,r,n){t[r]=n;return t}}n=function e(){var n,a,i;function o(e,t){this.fn=e;this.self=t;this.next=void 0}return{add:function e(t,r){i=new o(t,r);if(a){a.next=i}else{n=i}a=i;i=void 0},drain:function e(){var t=n;n=a=r=void 0;while(t){t.fn.call(t.self);t=t.next}}}}();function o(e,t){n.add(e,t);if(!r){r=a(n.drain)}}function s(e){var t,r=typeof e;if(e!=null&&(r=="object"||r=="function")){t=e.then}return typeof t=="function"?t:false}function l(){for(var e=0;e<this.chain.length;e++){c(this,this.state===1?this.chain[e].success:this.chain[e].failure,this.chain[e])}this.chain.length=0}function c(e,t,r){var n,a;try{if(t===false){r.reject(e.msg)}else{if(t===true){n=e.msg}else{n=t.call(void 0,e.msg)}if(n===r.promise){r.reject(TypeError("Promise-chain cycle"))}else if(a=s(n)){a.call(n,r.resolve,r.reject)}else{r.resolve(n)}}}catch(e){r.reject(e)}}function u(e){var r,n=this;if(n.triggered){return}n.triggered=true;if(n.def){n=n.def}try{if(r=s(e)){o(function(){var t=new h(n);try{r.call(e,function e(){u.apply(t,arguments)},function e(){f.apply(t,arguments)})}catch(e){f.call(t,e)}})}else{n.msg=e;n.state=1;if(n.chain.length>0){o(l,n)}}}catch(e){f.call(new h(n),e)}}function f(e){var t=this;if(t.triggered){return}t.triggered=true;if(t.def){t=t.def}t.msg=e;t.state=2;if(t.chain.length>0){o(l,t)}}function d(t,n,a,i){for(var e=0;e<n.length;e++){(function e(r){t.resolve(n[r]).then(function e(t){a(r,t)},i)})(e)}}function h(e){this.def=e;this.triggered=false}function p(e){this.promise=e;this.state=0;this.triggered=false;this.chain=[];this.msg=void 0}function v(e){if(typeof e!="function"){throw TypeError("Not a function")}if(this.__NPO__!==0){throw TypeError("Not a promise")}this.__NPO__=1;var a=new p(this);this["then"]=function e(t,r){var n={success:typeof t=="function"?t:true,failure:typeof r=="function"?r:false};n.promise=new this.constructor(function e(t,r){if(typeof t!="function"||typeof r!="function"){throw TypeError("Not a function")}n.resolve=t;n.reject=r});a.chain.push(n);if(a.state!==0){o(l,a)}return n.promise};this["catch"]=function e(t){return this.then(void 0,t)};try{e.call(void 0,function e(t){u.call(a,t)},function e(t){f.call(a,t)})}catch(e){f.call(a,e)}}var g=t({},"constructor",v,false);v.prototype=g;t(g,"__NPO__",0,false);t(v,"resolve",function e(n){var t=this;if(n&&typeof n=="object"&&n.__NPO__===1){return n}return new t(function e(t,r){if(typeof t!="function"||typeof r!="function"){throw TypeError("Not a function")}t(n)})});t(v,"reject",function e(n){return new this(function e(t,r){if(typeof t!="function"||typeof r!="function"){throw TypeError("Not a function")}r(n)})});t(v,"all",function e(r){var s=this;if(i.call(r)!="[object Array]"){return s.reject(TypeError("Not an array"))}if(r.length===0){return s.resolve([])}return new s(function e(n,t){if(typeof n!="function"||typeof t!="function"){throw TypeError("Not a function")}var a=r.length,i=Array(a),o=0;d(s,r,function e(t,r){i[t]=r;if(++o===a){n(i)}},t)})});t(v,"race",function e(r){var a=this;if(i.call(r)!="[object Array]"){return a.reject(TypeError("Not an array"))}return new a(function e(n,t){if(typeof n!="function"||typeof t!="function"){throw TypeError("Not a function")}d(a,r,function e(t,r){n(r)},t)})});return v})}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},e("timers").setImmediate)},{timers:64}],53:[function(e,t,r){"use strict";var l=Object.getOwnPropertySymbols;var c=Object.prototype.hasOwnProperty;var u=Object.prototype.propertyIsEnumerable;function f(e){if(e===null||e===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(e)}function n(){try{if(!Object.assign){return false}var e=new String("abc");e[5]="de";if(Object.getOwnPropertyNames(e)[0]==="5"){return false}var t={};for(var r=0;r<10;r++){t["_"+String.fromCharCode(r)]=r}var n=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if(n.join("")!=="0123456789"){return false}var a={};"abcdefghijklmnopqrst".split("").forEach(function(e){a[e]=e});if(Object.keys(Object.assign({},a)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(e){return false}}t.exports=n()?Object.assign:function(e,t){var r;var n=f(e);var a;for(var i=1;i<arguments.length;i++){r=Object(arguments[i]);for(var o in r){if(c.call(r,o)){n[o]=r[o]}}if(l){a=l(r);for(var s=0;s<a.length;s++){if(u.call(r,a[s])){n[a[s]]=r[a[s]]}}}}return n}},{}],54:[function(e,t,r){t.exports=a;var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0};var n=/([astvzqmhlc])([^astvzqmhlc]*)/gi;function a(e){var a=[];e.replace(n,function(e,t,r){var n=t.toLowerCase();r=s(r);if(n=="m"&&r.length>2){a.push([t].concat(r.splice(0,2)));n="l";t=t=="m"?"l":"L"}while(true){if(r.length==i[n]){r.unshift(t);return a.push(r)}if(r.length<i[n])throw new Error("malformed path data");a.push([t].concat(r.splice(0,i[n])))}});return a}var o=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function s(e){var t=e.match(o);return t?t.map(Number):[]}},{}],55:[function(e,t,r){var n=e("./lib/build-log");var a=e("./lib/epsilon");var i=e("./lib/intersecter");var o=e("./lib/segment-chainer");var s=e("./lib/segment-selector");var l=e("./lib/geojson");var c=false;var u=a();var f;f={buildLog:function(e){if(e===true)c=n();else if(e===false)c=false;return c===false?false:c.list},epsilon:function(e){return u.epsilon(e)},segments:function(e){var t=i(true,u,c);e.regions.forEach(t.addRegion);return{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){var r=i(false,u,c);return{combined:r.calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:s.union(e.combined,c),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:s.intersect(e.combined,c),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:s.difference(e.combined,c),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:s.differenceRev(e.combined,c),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:s.xor(e.combined,c),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:o(e.segments,u,c),inverted:e.inverted}},polygonFromGeoJSON:function(e){return l.toPolygon(f,e)},polygonToGeoJSON:function(e){return l.fromPolygon(f,u,e)},union:function(e,t){return d(e,t,f.selectUnion)},intersect:function(e,t){return d(e,t,f.selectIntersect)},difference:function(e,t){return d(e,t,f.selectDifference)},differenceRev:function(e,t){return d(e,t,f.selectDifferenceRev)},xor:function(e,t){return d(e,t,f.selectXor)}};function d(e,t,r){var n=f.segments(e);var a=f.segments(t);var i=f.combine(n,a);var o=r(i);return f.polygon(o)}if(typeof window==="object")window.PolyBool=f;t.exports=f},{"./lib/build-log":56,"./lib/epsilon":57,"./lib/geojson":58,"./lib/intersecter":59,"./lib/segment-chainer":61,"./lib/segment-selector":62}],56:[function(e,t,r){function n(){var r;var e=0;var t=false;function n(e,t){r.list.push({type:e,data:t?JSON.parse(JSON.stringify(t)):void 0});return r}r={list:[],segmentId:function(){return e++},checkIntersection:function(e,t){return n("check",{seg1:e,seg2:t})},segmentChop:function(e,t){n("div_seg",{seg:e,pt:t});return n("chop",{seg:e,pt:t})},statusRemove:function(e){return n("pop_seg",{seg:e})},segmentUpdate:function(e){return n("seg_update",{seg:e})},segmentNew:function(e,t){return n("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return n("rem_seg",{seg:e})},tempStatus:function(e,t,r){return n("temp_status",{seg:e,above:t,below:r})},rewind:function(e){return n("rewind",{seg:e})},status:function(e,t,r){return n("status",{seg:e,above:t,below:r})},vert:function(e){if(e===t)return r;t=e;return n("vert",{x:e})},log:function(e){if(typeof e!=="string")e=JSON.stringify(e,false,"  ");return n("log",{txt:e})},reset:function(){return n("reset")},selected:function(e){return n("selected",{segs:e})},chainStart:function(e){return n("chain_start",{seg:e})},chainRemoveHead:function(e,t){return n("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return n("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return n("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return n("chain_match",{index:e})},chainClose:function(e){return n("chain_close",{index:e})},chainAddHead:function(e,t){return n("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return n("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return n("chain_con",{index1:e,index2:t})},chainReverse:function(e){return n("chain_rev",{index:e})},chainJoin:function(e,t){return n("chain_join",{index1:e,index2:t})},done:function(){return n("done")}};return r}t.exports=n},{}],57:[function(e,t,r){function n(p){if(typeof p!=="number")p=1e-10;var r={epsilon:function(e){if(typeof e==="number")p=e;return p},pointAboveOrOnLine:function(e,t,r){var n=t[0];var a=t[1];var i=r[0];var o=r[1];var s=e[0];var l=e[1];return(i-n)*(l-a)-(o-a)*(s-n)>=-p},pointBetween:function(e,t,r){var n=e[1]-t[1];var a=r[0]-t[0];var i=e[0]-t[0];var o=r[1]-t[1];var s=i*a+n*o;if(s<p)return false;var l=a*a+o*o;if(s-l>-p)return false;return true},pointsSameX:function(e,t){return Math.abs(e[0]-t[0])<p},pointsSameY:function(e,t){return Math.abs(e[1]-t[1])<p},pointsSame:function(e,t){return r.pointsSameX(e,t)&&r.pointsSameY(e,t)},pointsCompare:function(e,t){if(r.pointsSameX(e,t))return r.pointsSameY(e,t)?0:e[1]<t[1]?-1:1;return e[0]<t[0]?-1:1},pointsCollinear:function(e,t,r){var n=e[0]-t[0];var a=e[1]-t[1];var i=t[0]-r[0];var o=t[1]-r[1];return Math.abs(n*o-i*a)<p},linesIntersect:function(e,t,r,n){var a=t[0]-e[0];var i=t[1]-e[1];var o=n[0]-r[0];var s=n[1]-r[1];var l=a*s-i*o;if(Math.abs(l)<p)return false;var c=e[0]-r[0];var u=e[1]-r[1];var f=(o*u-s*c)/l;var d=(a*u-i*c)/l;var h={alongA:0,alongB:0,pt:[e[0]+f*a,e[1]+f*i]};if(f<=-p)h.alongA=-2;else if(f<p)h.alongA=-1;else if(f-1<=-p)h.alongA=0;else if(f-1<p)h.alongA=1;else h.alongA=2;if(d<=-p)h.alongB=-2;else if(d<p)h.alongB=-1;else if(d-1<=-p)h.alongB=0;else if(d-1<p)h.alongB=1;else h.alongB=2;return h},pointInsideRegion:function(e,t){var r=e[0];var n=e[1];var a=t[t.length-1][0];var i=t[t.length-1][1];var o=false;for(var s=0;s<t.length;s++){var l=t[s][0];var c=t[s][1];if(c-n>p!=i-n>p&&(a-l)*(n-c)/(i-c)+l-r>p)o=!o;a=l;i=c}return o}};return r}t.exports=n},{}],58:[function(e,t,r){var n={toPolygon:function(a,e){function t(e){if(e.length<=0)return a.segments({inverted:false,regions:[]});function t(e){var t=e.slice(0,e.length-1);return a.segments({inverted:false,regions:[t]})}var r=t(e[0]);for(var n=1;n<e.length;n++)r=a.selectDifference(a.combine(r,t(e[n])));return r}if(e.type==="Polygon"){return a.polygon(t(e.coordinates))}else if(e.type==="MultiPolygon"){var r=a.segments({inverted:false,regions:[]});for(var n=0;n<e.coordinates.length;n++)r=a.selectUnion(a.combine(r,t(e.coordinates[n])));return a.polygon(r)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,r,t){t=e.polygon(e.segments(t));function i(e,t){return r.pointInsideRegion([(e[0][0]+e[1][0])*.5,(e[0][1]+e[1][1])*.5],t)}function o(e){return{region:e,children:[]}}var n=o(null);function s(e,t){for(var r=0;r<e.children.length;r++){var n=e.children[r];if(i(t,n.region)){s(n,t);return}}var a=o(t);for(var r=0;r<e.children.length;r++){var n=e.children[r];if(i(n.region,t)){a.children.push(n);e.children.splice(r,1);r--}}e.children.push(a)}for(var a=0;a<t.regions.length;a++){var l=t.regions[a];if(l.length<3)continue;s(n,l)}function c(e,t){var r=0;var n=e[e.length-1][0];var a=e[e.length-1][1];var i=[];for(var o=0;o<e.length;o++){var s=e[o][0];var l=e[o][1];i.push([s,l]);r+=l*n-s*a;n=s;a=l}var c=r<0;if(c!==t)i.reverse();i.push([i[0][0],i[0][1]]);return i}var u=[];function f(e){var t=[c(e.region,false)];u.push(t);for(var r=0;r<e.children.length;r++)t.push(d(e.children[r]))}function d(e){for(var t=0;t<e.children.length;t++)f(e.children[t]);return c(e.region,true)}for(var a=0;a<n.children.length;a++)f(n.children[a]);if(u.length<=0)return{type:"Polygon",coordinates:[]};if(u.length==1)return{type:"Polygon",coordinates:u[0]};return{type:"MultiPolygon",coordinates:u}}};t.exports=n},{}],59:[function(e,t,r){var w=e("./linked-list");function n(m,_,y){function i(e,t){return{id:y?y.segmentId():-1,start:e,end:t,myFill:{above:null,below:null},otherFill:null}}function a(e,t,r){return{id:y?y.segmentId():-1,start:e,end:t,myFill:{above:r.myFill.above,below:r.myFill.below},otherFill:null}}var b=w.create();function o(e,t,r,n,a,i){var o=_.pointsCompare(t,a);if(o!==0)return o;if(_.pointsSame(r,i))return 0;if(e!==n)return e?1:-1;return _.pointAboveOrOnLine(r,n?a:i,n?i:a)?1:-1}function s(r,n){b.insertBefore(r,function(e){var t=o(r.isStart,r.pt,n,e.isStart,e.pt,e.other.pt);return t<0})}function n(e,t){var r=w.node({isStart:true,pt:e.start,seg:e,primary:t,other:null,status:null});s(r,e.end);return r}function l(e,t,r){var n=w.node({isStart:false,pt:t.end,seg:t,primary:r,other:e,status:null});e.other=n;s(n,e.pt)}function c(e,t){var r=n(e,t);l(r,e,t);return r}function u(e,t){if(y)y.segmentChop(e.seg,t);e.other.remove();e.seg.end=t;e.other.pt=t;s(e.other,e.pt)}function x(e,t){var r=a(t,e.seg.end,e.seg);u(e,t);return c(r,e.primary)}function f(e,t){var n=w.create();function a(e,t){var r=e.seg.start;var n=e.seg.end;var a=t.seg.start;var i=t.seg.end;if(_.pointsCollinear(r,a,i)){if(_.pointsCollinear(n,a,i))return 1;return _.pointAboveOrOnLine(n,a,i)?1:-1}return _.pointAboveOrOnLine(r,a,i)?1:-1}function r(r){return n.findTransition(function(e){var t=a(r,e.ev);return t>0})}function i(e,t){var r=e.seg;var n=t.seg;var a=r.start;var i=r.end;var o=n.start;var s=n.end;if(y)y.checkIntersection(r,n);var l=_.linesIntersect(a,i,o,s);if(l===false){if(!_.pointsCollinear(a,i,o))return false;if(_.pointsSame(a,s)||_.pointsSame(i,o))return false;var c=_.pointsSame(a,o);var u=_.pointsSame(i,s);if(c&&u)return t;var f=!c&&_.pointBetween(a,o,s);var d=!u&&_.pointBetween(i,o,s);if(c){if(d){x(t,i)}else{x(e,s)}return t}else if(f){if(!u){if(d){x(t,i)}else{x(e,s)}}x(t,a)}}else{if(l.alongA===0){if(l.alongB===-1)x(e,o);else if(l.alongB===0)x(e,l.pt);else if(l.alongB===1)x(e,s)}if(l.alongB===0){if(l.alongA===-1)x(t,a);else if(l.alongA===0)x(t,l.pt);else if(l.alongA===1)x(t,i)}}return false}var o=[];while(!b.isEmpty()){var s=b.getHead();if(y)y.vert(s.pt[0]);if(s.isStart){if(y)y.segmentNew(s.seg,s.primary);var l=r(s);var c=l.before?l.before.ev:null;var u=l.after?l.after.ev:null;if(y){y.tempStatus(s.seg,c?c.seg:false,u?u.seg:false)}function f(){if(c){var e=i(s,c);if(e)return e}if(u)return i(s,u);return false}var d=f();if(d){if(m){var h;if(s.seg.myFill.below===null)h=true;else h=s.seg.myFill.above!==s.seg.myFill.below;if(h)d.seg.myFill.above=!d.seg.myFill.above}else{d.seg.otherFill=s.seg.myFill}if(y)y.segmentUpdate(d.seg);s.other.remove();s.remove()}if(b.getHead()!==s){if(y)y.rewind(s.seg);continue}if(m){var h;if(s.seg.myFill.below===null)h=true;else h=s.seg.myFill.above!==s.seg.myFill.below;if(!u){s.seg.myFill.below=e}else{s.seg.myFill.below=u.seg.myFill.above}if(h)s.seg.myFill.above=!s.seg.myFill.below;else s.seg.myFill.above=s.seg.myFill.below}else{if(s.seg.otherFill===null){var p;if(!u){p=s.primary?t:e}else{if(s.primary===u.primary)p=u.seg.otherFill.above;else p=u.seg.myFill.above}s.seg.otherFill={above:p,below:p}}}if(y){y.status(s.seg,c?c.seg:false,u?u.seg:false)}s.other.status=l.insert(w.node({ev:s}))}else{var v=s.status;if(v===null){throw new Error("PolyBool: Zero-length segment detected; your epsilon is "+"probably too small or too large")}if(n.exists(v.prev)&&n.exists(v.next))i(v.prev.ev,v.next.ev);if(y)y.statusRemove(v.ev.seg);v.remove();if(!s.primary){var g=s.seg.myFill;s.seg.myFill=s.seg.otherFill;s.seg.otherFill=g}o.push(s.seg)}b.getHead().remove()}if(y)y.done();return o}if(!m){return{calculate:function(e,t,r,n){e.forEach(function(e){c(a(e.start,e.end,e),true)});r.forEach(function(e){c(a(e.start,e.end,e),false)});return f(t,n)}}}return{addRegion:function(e){var t;var r=e[e.length-1];for(var n=0;n<e.length;n++){t=r;r=e[n];var a=_.pointsCompare(t,r);if(a===0)continue;c(i(a<0?t:r,a<0?r:t),true)}},calculate:function(e){return f(e,false)}}}t.exports=n},{"./linked-list":60}],60:[function(e,t,r){var n={create:function(){var a={root:{root:true,next:null},exists:function(e){if(e===null||e===a.root)return false;return true},isEmpty:function(){return a.root.next===null},getHead:function(){return a.root.next},insertBefore:function(e,t){var r=a.root;var n=a.root.next;while(n!==null){if(t(n)){e.prev=n.prev;e.next=n;n.prev.next=e;n.prev=e;return}r=n;n=n.next}r.next=e;e.prev=r;e.next=null},findTransition:function(e){var t=a.root;var r=a.root.next;while(r!==null){if(e(r))break;t=r;r=r.next}return{before:t===a.root?null:t,after:r,insert:function(e){e.prev=t;e.next=r;t.next=e;if(r!==null)r.prev=e;return e}}}};return a},node:function(e){e.prev=null;e.next=null;e.remove=function(){e.prev.next=e.next;if(e.next)e.next.prev=e.prev;e.prev=null;e.next=null};return e}};t.exports=n},{}],61:[function(e,t,r){function n(e,k,M){var S=[];var C=[];e.forEach(function(e){var t=e.start;var r=e.end;if(k.pointsSame(t,r)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is "+"probably too small or too large");return}if(M)M.chainStart(e);var n={index:0,matches_head:false,matches_pt1:false};var a={index:0,matches_head:false,matches_pt1:false};var i=n;function o(e,t,r){i.index=e;i.matches_head=t;i.matches_pt1=r;if(i===n){i=a;return false}i=null;return true}for(var s=0;s<S.length;s++){var l=S[s];var c=l[0];var u=l[1];var f=l[l.length-1];var d=l[l.length-2];if(k.pointsSame(c,t)){if(o(s,true,true))break}else if(k.pointsSame(c,r)){if(o(s,true,false))break}else if(k.pointsSame(f,t)){if(o(s,false,true))break}else if(k.pointsSame(f,r)){if(o(s,false,false))break}}if(i===n){S.push([t,r]);if(M)M.chainNew(t,r);return}if(i===a){if(M)M.chainMatch(n.index);var h=n.index;var p=n.matches_pt1?r:t;var v=n.matches_head;var l=S[h];var g=v?l[0]:l[l.length-1];var m=v?l[1]:l[l.length-2];var _=v?l[l.length-1]:l[0];var y=v?l[l.length-2]:l[1];if(k.pointsCollinear(m,g,p)){if(v){if(M)M.chainRemoveHead(n.index,p);l.shift()}else{if(M)M.chainRemoveTail(n.index,p);l.pop()}g=m}if(k.pointsSame(_,p)){S.splice(h,1);if(k.pointsCollinear(y,_,g)){if(v){if(M)M.chainRemoveTail(n.index,g);l.pop()}else{if(M)M.chainRemoveHead(n.index,g);l.shift()}}if(M)M.chainClose(n.index);C.push(l);return}if(v){if(M)M.chainAddHead(n.index,p);l.unshift(p)}else{if(M)M.chainAddTail(n.index,p);l.push(p)}return}function b(e){if(M)M.chainReverse(e);S[e].reverse()}function x(e,t){var r=S[e];var n=S[t];var a=r[r.length-1];var i=r[r.length-2];var o=n[0];var s=n[1];if(k.pointsCollinear(i,a,o)){if(M)M.chainRemoveTail(e,a);r.pop();a=i}if(k.pointsCollinear(a,o,s)){if(M)M.chainRemoveHead(t,o);n.shift()}if(M)M.chainJoin(e,t);S[e]=r.concat(n);S.splice(t,1)}var w=n.index;var A=a.index;if(M)M.chainConnect(w,A);var T=S[w].length<S[A].length;if(n.matches_head){if(a.matches_head){if(T){b(w);x(w,A)}else{b(A);x(A,w)}}else{x(A,w)}}else{if(a.matches_head){x(w,A)}else{if(T){b(w);x(A,w)}else{b(A);x(w,A)}}}});return C}t.exports=n},{}],62:[function(e,t,r){function n(e,r,n){var a=[];e.forEach(function(e){var t=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);if(r[t]!==0){a.push({id:n?n.segmentId():-1,start:e.start,end:e.end,myFill:{above:r[t]===1,below:r[t]===2},otherFill:null})}});if(n)n.selected(a);return a}var a={union:function(e,t){return n(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return n(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return n(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return n(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return n(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}};t.exports=a},{}],63:[function(e,t,r){var n=t.exports={};var a;var i;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){a=setTimeout}else{a=o}}catch(e){a=o}try{if(typeof clearTimeout==="function"){i=clearTimeout}else{i=s}}catch(e){i=s}})();function l(t){if(a===setTimeout){return setTimeout(t,0)}if((a===o||!a)&&setTimeout){a=setTimeout;return setTimeout(t,0)}try{return a(t,0)}catch(e){try{return a.call(null,t,0)}catch(e){return a.call(this,t,0)}}}function c(t){if(i===clearTimeout){return clearTimeout(t)}if((i===s||!i)&&clearTimeout){i=clearTimeout;return clearTimeout(t)}try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}var u=[];var f=false;var d;var h=-1;function p(){if(!f||!d){return}f=false;if(d.length){u=d.concat(u)}else{h=-1}if(u.length){v()}}function v(){if(f){return}var e=l(p);f=true;var t=u.length;while(t){d=u;u=[];while(++h<t){if(d){d[h].run()}}h=-1;t=u.length}d=null;f=false;c(e)}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}u.push(new g(e,t));if(u.length===1&&!f){l(v)}};function g(e,t){this.fun=e;this.array=t}g.prototype.run=function(){this.fun.apply(null,this.array)};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function m(){}n.on=m;n.addListener=m;n.once=m;n.off=m;n.removeListener=m;n.removeAllListeners=m;n.emit=m;n.prependListener=m;n.prependOnceListener=m;n.listeners=function(e){return[]};n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},{}],64:[function(l,e,c){(function(n,s){(function(){var e=l("process/browser.js").nextTick;var t=Function.prototype.apply;var a=Array.prototype.slice;var i={};var o=0;c.setTimeout=function(){return new r(t.call(setTimeout,window,arguments),clearTimeout)};c.setInterval=function(){return new r(t.call(setInterval,window,arguments),clearInterval)};c.clearTimeout=c.clearInterval=function(e){e.close()};function r(e,t){this._id=e;this._clearFn=t}r.prototype.unref=r.prototype.ref=function(){};r.prototype.close=function(){this._clearFn.call(window,this._id)};c.enroll=function(e,t){clearTimeout(e._idleTimeoutId);e._idleTimeout=t};c.unenroll=function(e){clearTimeout(e._idleTimeoutId);e._idleTimeout=-1};c._unrefActive=c.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;if(e>=0){t._idleTimeoutId=setTimeout(function e(){if(t._onTimeout)t._onTimeout()},e)}};c.setImmediate=typeof n==="function"?n:function(t){var r=o++;var n=arguments.length<2?false:a.call(arguments,1);i[r]=true;e(function e(){if(i[r]){if(n){t.apply(null,n)}else{t.call(null)}c.clearImmediate(r)}});return r};c.clearImmediate=typeof s==="function"?s:function(e){delete i[e]}}).call(this)}).call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":63,timers:64}],65:[function(e,X,t){(function(d){var n=/^\s+/,a=/\s+$/,i=0,o=d.round,c=d.min,u=d.max,e=d.random;function f(e,t){e=e?e:"";t=t||{};if(e instanceof f){return e}if(!(this instanceof f)){return new f(e,t)}var r=s(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=o(100*this._a)/100,this._format=t.format||r.format;this._gradientType=t.gradientType;if(this._r<1){this._r=o(this._r)}if(this._g<1){this._g=o(this._g)}if(this._b<1){this._b=o(this._b)}this._ok=r.ok;this._tc_id=i++}f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb();var t,r,n,a,i,o;t=e.r/255;r=e.g/255;n=e.b/255;if(t<=.03928){a=t/12.92}else{a=d.pow((t+.055)/1.055,2.4)}if(r<=.03928){i=r/12.92}else{i=d.pow((r+.055)/1.055,2.4)}if(n<=.03928){o=n/12.92}else{o=d.pow((n+.055)/1.055,2.4)}return.2126*a+.7152*i+.0722*o},setAlpha:function(e){this._a=I(e);this._roundA=o(100*this._a)/100;return this},toHsv:function(){var e=v(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=v(this._r,this._g,this._b);var t=o(e.h*360),r=o(e.s*100),n=o(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+n+"%)":"hsva("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=h(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=h(this._r,this._g,this._b);var t=o(e.h*360),r=o(e.s*100),n=o(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+n+"%)":"hsla("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return r(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(R(this._r,255)*100)+"%",g:o(R(this._g,255)*100)+"%",b:o(R(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+o(R(this._r,255)*100)+"%, "+o(R(this._g,255)*100)+"%, "+o(R(this._b,255)*100)+"%)":"rgba("+o(R(this._r,255)*100)+"%, "+o(R(this._g,255)*100)+"%, "+o(R(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){if(this._a===0){return"transparent"}if(this._a<1){return false}return O[t(this._r,this._g,this._b,true)]||false},toFilter:function(e){var t="#"+m(this._r,this._g,this._b,this._a);var r=t;var n=this._gradientType?"GradientType = 1, ":"";if(e){var a=f(e);r="#"+m(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=false;var n=this._a<1&&this._a>=0;var a=!t&&n&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");if(a){if(e==="name"&&this._a===0){return this.toName()}return this.toRgbString()}if(e==="rgb"){r=this.toRgbString()}if(e==="prgb"){r=this.toPercentageRgbString()}if(e==="hex"||e==="hex6"){r=this.toHexString()}if(e==="hex3"){r=this.toHexString(true)}if(e==="hex4"){r=this.toHex8String(true)}if(e==="hex8"){r=this.toHex8String()}if(e==="name"){r=this.toName()}if(e==="hsl"){r=this.toHslString()}if(e==="hsv"){r=this.toHsvString()}return r||this.toHexString()},clone:function(){return f(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));this._r=r._r;this._g=r._g;this._b=r._b;this.setAlpha(r._a);return this},lighten:function(){return this._applyModification(x,arguments)},brighten:function(){return this._applyModification(w,arguments)},darken:function(){return this._applyModification(A,arguments)},desaturate:function(){return this._applyModification(_,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(T,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(L,arguments)},complement:function(){return this._applyCombination(k,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(S,arguments)}};f.fromRatio=function(e,t){if(typeof e=="object"){var r={};for(var n in e){if(e.hasOwnProperty(n)){if(n==="a"){r[n]=e[n]}else{r[n]=H(e[n])}}}e=r}return f(e,t)};function s(e){var t={r:0,g:0,b:0};var r=1;var n=null;var a=null;var i=null;var o=false;var s=false;if(typeof e=="string"){e=G(e)}if(typeof e=="object"){if(Y(e.r)&&Y(e.g)&&Y(e.b)){t=l(e.r,e.g,e.b);o=true;s=String(e.r).substr(-1)==="%"?"prgb":"rgb"}else if(Y(e.h)&&Y(e.s)&&Y(e.v)){n=H(e.s);a=H(e.v);t=g(e.h,n,a);o=true;s="hsv"}else if(Y(e.h)&&Y(e.s)&&Y(e.l)){n=H(e.s);i=H(e.l);t=p(e.h,n,i);o=true;s="hsl"}if(e.hasOwnProperty("a")){r=e.a}}r=I(r);return{ok:o,format:e.format||s,r:c(255,u(t.r,0)),g:c(255,u(t.g,0)),b:c(255,u(t.b,0)),a:r}}function l(e,t,r){return{r:R(e,255)*255,g:R(t,255)*255,b:R(r,255)*255}}function h(e,t,r){e=R(e,255);t=R(t,255);r=R(r,255);var n=u(e,t,r),a=c(e,t,r);var i,o,s=(n+a)/2;if(n==a){i=o=0}else{var l=n-a;o=s>.5?l/(2-n-a):l/(n+a);switch(n){case e:i=(t-r)/l+(t<r?6:0);break;case t:i=(r-e)/l+2;break;case r:i=(e-t)/l+4;break}i/=6}return{h:i,s:o,l:s}}function p(e,t,r){var n,a,i;e=R(e,360);t=R(t,100);r=R(r,100);function o(e,t,r){if(r<0)r+=1;if(r>1)r-=1;if(r<1/6)return e+(t-e)*6*r;if(r<1/2)return t;if(r<2/3)return e+(t-e)*(2/3-r)*6;return e}if(t===0){n=a=i=r}else{var s=r<.5?r*(1+t):r+t-r*t;var l=2*r-s;n=o(l,s,e+1/3);a=o(l,s,e);i=o(l,s,e-1/3)}return{r:n*255,g:a*255,b:i*255}}function v(e,t,r){e=R(e,255);t=R(t,255);r=R(r,255);var n=u(e,t,r),a=c(e,t,r);var i,o,s=n;var l=n-a;o=n===0?0:l/n;if(n==a){i=0}else{switch(n){case e:i=(t-r)/l+(t<r?6:0);break;case t:i=(r-e)/l+2;break;case r:i=(e-t)/l+4;break}i/=6}return{h:i,s:o,v:s}}function g(e,t,r){e=R(e,360)*6;t=R(t,100);r=R(r,100);var n=d.floor(e),a=e-n,i=r*(1-t),o=r*(1-a*t),s=r*(1-(1-a)*t),l=n%6,c=[r,o,i,i,s,r][l],u=[s,r,r,o,i,i][l],f=[i,i,s,r,r,o][l];return{r:c*255,g:u*255,b:f*255}}function t(e,t,r,n){var a=[B(o(e).toString(16)),B(o(t).toString(16)),B(o(r).toString(16))];if(n&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)){return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)}return a.join("")}function r(e,t,r,n,a){var i=[B(o(e).toString(16)),B(o(t).toString(16)),B(o(r).toString(16)),B(U(n))];if(a&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)){return i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0)}return i.join("")}function m(e,t,r,n){var a=[B(U(n)),B(o(e).toString(16)),B(o(t).toString(16)),B(o(r).toString(16))];return a.join("")}f.equals=function(e,t){if(!e||!t){return false}return f(e).toRgbString()==f(t).toRgbString()};f.random=function(){return f.fromRatio({r:e(),g:e(),b:e()})};function _(e,t){t=t===0?0:t||10;var r=f(e).toHsl();r.s-=t/100;r.s=z(r.s);return f(r)}function y(e,t){t=t===0?0:t||10;var r=f(e).toHsl();r.s+=t/100;r.s=z(r.s);return f(r)}function b(e){return f(e).desaturate(100)}function x(e,t){t=t===0?0:t||10;var r=f(e).toHsl();r.l+=t/100;r.l=z(r.l);return f(r)}function w(e,t){t=t===0?0:t||10;var r=f(e).toRgb();r.r=u(0,c(255,r.r-o(255*-(t/100))));r.g=u(0,c(255,r.g-o(255*-(t/100))));r.b=u(0,c(255,r.b-o(255*-(t/100))));return f(r)}function A(e,t){t=t===0?0:t||10;var r=f(e).toHsl();r.l-=t/100;r.l=z(r.l);return f(r)}function T(e,t){var r=f(e).toHsl();var n=(r.h+t)%360;r.h=n<0?360+n:n;return f(r)}function k(e){var t=f(e).toHsl();t.h=(t.h+180)%360;return f(t)}function M(e){var t=f(e).toHsl();var r=t.h;return[f(e),f({h:(r+120)%360,s:t.s,l:t.l}),f({h:(r+240)%360,s:t.s,l:t.l})]}function S(e){var t=f(e).toHsl();var r=t.h;return[f(e),f({h:(r+90)%360,s:t.s,l:t.l}),f({h:(r+180)%360,s:t.s,l:t.l}),f({h:(r+270)%360,s:t.s,l:t.l})]}function C(e){var t=f(e).toHsl();var r=t.h;return[f(e),f({h:(r+72)%360,s:t.s,l:t.l}),f({h:(r+216)%360,s:t.s,l:t.l})]}function L(e,t,r){t=t||6;r=r||30;var n=f(e).toHsl();var a=360/r;var i=[f(e)];for(n.h=(n.h-(a*t>>1)+720)%360;--t;){n.h=(n.h+a)%360;i.push(f(n))}return i}function E(e,t){t=t||6;var r=f(e).toHsv();var n=r.h,a=r.s,i=r.v;var o=[];var s=1/t;while(t--){o.push(f({h:n,s:a,v:i}));i=(i+s)%1}return o}f.mix=function(e,t,r){r=r===0?0:r||50;var n=f(e).toRgb();var a=f(t).toRgb();var i=r/100;var o={r:(a.r-n.r)*i+n.r,g:(a.g-n.g)*i+n.g,b:(a.b-n.b)*i+n.b,a:(a.a-n.a)*i+n.a};return f(o)};f.readability=function(e,t){var r=f(e);var n=f(t);return(d.max(r.getLuminance(),n.getLuminance())+.05)/(d.min(r.getLuminance(),n.getLuminance())+.05)};f.isReadable=function(e,t,r){var n=f.readability(e,t);var a,i;i=false;a=W(r);switch(a.level+a.size){case"AAsmall":case"AAAlarge":i=n>=4.5;break;case"AAlarge":i=n>=3;break;case"AAAsmall":i=n>=7;break}return i};f.mostReadable=function(e,t,r){var n=null;var a=0;var i;var o,s,l;r=r||{};o=r.includeFallbackColors;s=r.level;l=r.size;for(var c=0;c<t.length;c++){i=f.readability(e,t[c]);if(i>a){a=i;n=f(t[c])}}if(f.isReadable(e,n,{level:s,size:l})||!o){return n}else{r.includeFallbackColors=false;return f.mostReadable(e,["#fff","#000"],r)}};var D=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var O=f.hexNames=P(D);function P(e){var t={};for(var r in e){if(e.hasOwnProperty(r)){t[e[r]]=r}}return t}function I(e){e=parseFloat(e);if(isNaN(e)||e<0||e>1){e=1}return e}function R(e,t){if(F(e)){e="100%"}var r=j(e);e=c(t,u(0,parseFloat(e)));if(r){e=parseInt(e*t,10)/100}if(d.abs(e-t)<1e-6){return 1}return e%t/parseFloat(t)}function z(e){return c(1,u(0,e))}function N(e){return parseInt(e,16)}function F(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function j(e){return typeof e==="string"&&e.indexOf("%")!=-1}function B(e){return e.length==1?"0"+e:""+e}function H(e){if(e<=1){e=e*100+"%"}return e}function U(e){return d.round(parseFloat(e)*255).toString(16)}function V(e){return N(e)/255}var q=function(){var e="[-\\+]?\\d+%?";var t="[-\\+]?\\d*\\.\\d+%?";var r="(?:"+t+")|(?:"+e+")";var n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";var a="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+a),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+a),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+a),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Y(e){return!!q.CSS_UNIT.exec(e)}function G(e){e=e.replace(n,"").replace(a,"").toLowerCase();var t=false;if(D[e]){e=D[e];t=true}else if(e=="transparent"){return{r:0,g:0,b:0,a:0,format:"name"}}var r;if(r=q.rgb.exec(e)){return{r:r[1],g:r[2],b:r[3]}}if(r=q.rgba.exec(e)){return{r:r[1],g:r[2],b:r[3],a:r[4]}}if(r=q.hsl.exec(e)){return{h:r[1],s:r[2],l:r[3]}}if(r=q.hsla.exec(e)){return{h:r[1],s:r[2],l:r[3],a:r[4]}}if(r=q.hsv.exec(e)){return{h:r[1],s:r[2],v:r[3]}}if(r=q.hsva.exec(e)){return{h:r[1],s:r[2],v:r[3],a:r[4]}}if(r=q.hex8.exec(e)){return{r:N(r[1]),g:N(r[2]),b:N(r[3]),a:V(r[4]),format:t?"name":"hex8"}}if(r=q.hex6.exec(e)){return{r:N(r[1]),g:N(r[2]),b:N(r[3]),format:t?"name":"hex"}}if(r=q.hex4.exec(e)){return{r:N(r[1]+""+r[1]),g:N(r[2]+""+r[2]),b:N(r[3]+""+r[3]),a:V(r[4]+""+r[4]),format:t?"name":"hex8"}}if(r=q.hex3.exec(e)){return{r:N(r[1]+""+r[1]),g:N(r[2]+""+r[2]),b:N(r[3]+""+r[3]),format:t?"name":"hex"}}return false}function W(e){var t,r;e=e||{level:"AA",size:"small"};t=(e.level||"AA").toUpperCase();r=(e.size||"small").toLowerCase();if(t!=="AA"&&t!=="AAA"){t="AA"}if(r!=="small"&&r!=="large"){r="small"}return{level:t,size:r}}if(typeof X!=="undefined"&&X.exports){X.exports=f}else if(typeof nc==="function"&&nc.amd){nc(function(){return f})}else{window.tinycolor=f}})(Math)},{}],66:[function(e,t,r){var u=e("../main");var n=e("object-assign");var f=u.instance();function d(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}d.prototype=new u.baseCalendar;n(d.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:false,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if(typeof e==="string"){var r=e.match(o);return r?r[0]:""}var n=this._validateYear(e);var a=e.month();var i=""+this.toChineseMonth(n,a);if(t&&i.length<2){i="0"+i}if(this.isIntercalaryMonth(n,a)){i+="i"}return i},monthNames:function(e){if(typeof e==="string"){var t=e.match(l);return t?t[0]:""}var r=this._validateYear(e);var n=e.month();var a=this.toChineseMonth(r,n);var i=["","","","","","","","","","","",""][a-1];if(this.isIntercalaryMonth(r,n)){i=""+i}return i},monthNamesShort:function(e){if(typeof e==="string"){var t=e.match(c);return t?t[0]:""}var r=this._validateYear(e);var n=e.month();var a=this.toChineseMonth(r,n);var i=["","","","","","","","","","","",""][a-1];if(this.isIntercalaryMonth(r,n)){i=""+i}return i},parseMonth:function(e,t){e=this._validateYear(e);var r=parseInt(t);var n;if(!isNaN(r)){var a=t[t.length-1];n=a==="i"||a==="I"}else{if(t[0]===""){n=true;t=t.substring(1)}if(t[t.length-1]===""){t=t.substring(0,t.length-1)}r=1+["","","","","","","","","","","",""].indexOf(t)}var i=this.toMonthIndex(e,r,n);return i},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:false}},_validateYear:function(e,t){if(e.year){e=e.year()}if(typeof e!=="number"||e<1888||e>2111){throw t.replace(/\{0\}/,this.local.name)}return e},toMonthIndex:function(e,t,r){var n=this.intercalaryMonth(e);var a=r&&t!==n;if(a||t<1||t>12){throw u.local.invalidMonth.replace(/\{0\}/,this.local.name)}var i;if(!n){i=t-1}else if(!r&&t<=n){i=t-1}else{i=t}return i},toChineseMonth:function(e,t){if(e.year){e=e.year();t=e.month()}var r=this.intercalaryMonth(e);var n=r?12:11;if(t<0||t>n){throw u.local.invalidMonth.replace(/\{0\}/,this.local.name)}var a;if(!r){a=t+1}else if(t<r){a=t+1}else{a=t}return a},intercalaryMonth:function(e){e=this._validateYear(e);var t=w[e-w[0]];var r=t>>13;return r},isIntercalaryMonth:function(e,t){if(e.year){e=e.year();t=e.month()}var r=this.intercalaryMonth(e);return!!r&&r===t},leapYear:function(e){return this.intercalaryMonth(e)!==0},weekOfYear:function(e,t,r){var n=this._validateYear(e,u.local.invalidyear);var a=A[n-A[0]];var i=a>>9&4095;var o=a>>5&15;var s=a&31;var l;l=f.newDate(i,o,s);l.add(4-(l.dayOfWeek()||7),"d");var c=this.toJD(e,t,r)-l.toJD();return 1+Math.floor(c/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){if(e.year){t=e.month();e=e.year()}e=this._validateYear(e);var r=w[e-w[0]];var n=r>>13;var a=n?12:11;if(t>a){throw u.local.invalidMonth.replace(/\{0\}/,this.local.name)}var i=r&1<<12-t?30:29;return i},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var n=this._validate(e,i,r,u.local.invalidDate);e=this._validateYear(n.year());t=n.month();r=n.day();var a=this.isIntercalaryMonth(e,t);var i=this.toChineseMonth(e,t);var o=h(e,i,r,a);return f.toJD(o.year,o.month,o.day)},fromJD:function(e){var t=f.fromJD(e);var r=a(t.year(),t.month(),t.day());var n=this.toMonthIndex(r.year,r.month,r.isIntercalary);return this.newDate(r.year,n,r.day)},fromString:function(e){var t=e.match(s);var r=this._validateYear(+t[1]);var n=+t[2];var a=!!t[3];var i=this.toMonthIndex(r,n,a);var o=+t[4];return this.newDate(r,i,o)},add:function(e,t,r){var n=e.year();var a=e.month();var i=this.isIntercalaryMonth(n,a);var o=this.toChineseMonth(n,a);var s=Object.getPrototypeOf(d.prototype).add.call(this,e,t,r);if(r==="y"){var l=s.year();var c=s.month();var u=this.isIntercalaryMonth(l,o);var f=i&&u?this.toMonthIndex(l,o,true):this.toMonthIndex(l,o,false);if(f!==c){s.month(f)}}return s}});var s=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m;var o=/^\d?\d[iI]?/m;var l=/^??[]?/m;var c=/^??[]?/m;u.calendars.chinese=d;var w=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548];var A=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function a(e,t,r,n){var a;var i;if(typeof e==="object"){a=e;i=t||{}}else{var o=typeof e==="number"&&e>=1888&&e<=2111;if(!o)throw new Error("Solar year outside range 1888-2111");var s=typeof t==="number"&&t>=1&&t<=12;if(!s)throw new Error("Solar month outside range 1 - 12");var l=typeof r==="number"&&r>=1&&r<=31;if(!l)throw new Error("Solar day outside range 1 - 31");a={year:e,month:t,day:r};i=n||{}}var c=A[a.year-A[0]];var u=a.year<<9|a.month<<5|a.day;i.year=u>=c?a.year:a.year-1;c=A[i.year-A[0]];var f=c>>9&4095;var d=c>>5&15;var h=c&31;var p;var v=new Date(f,d-1,h);var g=new Date(a.year,a.month-1,a.day);p=Math.round((g-v)/(24*3600*1e3));var m=w[i.year-w[0]];var _;for(_=0;_<13;_++){var y=m&1<<12-_?30:29;if(p<y){break}p-=y}var b=m>>13;if(!b||_<b){i.isIntercalary=false;i.month=1+_}else if(_===b){i.isIntercalary=true;i.month=_}else{i.isIntercalary=false;i.month=_}i.day=1+p;return i}function h(e,t,r,n,a){var i;var o;if(typeof e==="object"){o=e;i=t||{}}else{var s=typeof e==="number"&&e>=1888&&e<=2111;if(!s)throw new Error("Lunar year outside range 1888-2111");var l=typeof t==="number"&&t>=1&&t<=12;if(!l)throw new Error("Lunar month outside range 1 - 12");var c=typeof r==="number"&&r>=1&&r<=30;if(!c)throw new Error("Lunar day outside range 1 - 30");var u;if(typeof n==="object"){u=false;i=n}else{u=!!n;i=a||{}}o={year:e,month:t,day:r,isIntercalary:u}}var f;f=o.day-1;var d=w[o.year-w[0]];var h=d>>13;var p;if(!h){p=o.month-1}else if(o.month>h){p=o.month}else if(o.isIntercalary){p=o.month}else{p=o.month-1}for(var v=0;v<p;v++){var g=d&1<<12-v?30:29;f+=g}var m=A[o.year-A[0]];var _=m>>9&4095;var y=m>>5&15;var b=m&31;var x=new Date(_,y-1,b+f);i.year=x.getFullYear();i.month=1+x.getMonth();i.day=x.getDate();return i}},{"../main":80,"object-assign":53}],67:[function(e,t,r){var a=e("../main");var n=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new a.baseCalendar;n(i.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);var e=t.year()+(t.year()<0?1:0);return e%4===3||e%4===-1},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return 13},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-n.dayOfWeek(),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var n=this._validate(e,t,r,a.local.invalidDate);e=n.year();if(e<0){e++}return n.day()+(n.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch;var r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;if(r<=0){r--}t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var n=Math.floor(t/30)+1;var a=t-(n-1)*30+1;return this.newDate(r,n,a)}});a.calendars.coptic=i},{"../main":80,"object-assign":53}],68:[function(e,t,r){var a=e("../main");var n=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new a.baseCalendar;n(i.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:false}},leapYear:function(e){this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);return false},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);return 13},daysInYear:function(e){this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);return 400},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-n.dayOfWeek(),"d");return Math.floor((n.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[r.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,r){var n=this._validate(e,t,r,a.local.invalidDate);return(n.day()+1)%8},weekDay:function(e,t,r){var n=this.dayOfWeek(e,t,r);return n>=2&&n<=6},extraInfo:function(e,t,r){var n=this._validate(e,t,r,a.local.invalidDate);return{century:o[Math.floor((n.year()-1)/100)+1]||""}},toJD:function(e,t,r){var n=this._validate(e,t,r,a.local.invalidDate);e=n.year()+(n.year()<0?1:0);t=n.month();r=n.day();return r+(t>1?16:0)+(t>2?(t-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1;e-=(t-1)*400;e+=e>15?16:0;var r=Math.floor(e/32)+1;var n=e-(r-1)*32+1;return this.newDate(t<=0?t-1:t,r,n)}});var o={20:"Fruitbat",21:"Anchovy"};a.calendars.discworld=i},{"../main":80,"object-assign":53}],69:[function(e,t,r){var a=e("../main");var n=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new a.baseCalendar;n(i.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);var e=t.year()+(t.year()<0?1:0);return e%4===3||e%4===-1},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return 13},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-n.dayOfWeek(),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var n=this._validate(e,t,r,a.local.invalidDate);e=n.year();if(e<0){e++}return n.day()+(n.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch;var r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;if(r<=0){r--}t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var n=Math.floor(t/30)+1;var a=t-(n-1)*30+1;return this.newDate(r,n,a)}});a.calendars.ethiopian=i},{"../main":80,"object-assign":53}],70:[function(e,t,r){var s=e("../main");var n=e("object-assign");function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}a.prototype=new s.baseCalendar;n(a.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:false,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return this._leapYear(t.year())},_leapYear:function(e){e=e<0?e+1:e;return i(e*7+1,19)<7},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-n.dayOfWeek(),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);e=t.year();return this.toJD(e===-1?+1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){if(e.year){t=e.month();e=e.year()}this._validate(e,t,this.minDay,s.local.invalidMonth);return t===12&&this.leapYear(e)?30:t===8&&i(this.daysInYear(e),10)===5?30:t===9&&i(this.daysInYear(e),10)===3?29:this.daysPerMonth[t-1]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},extraInfo:function(e,t,r){var n=this._validate(e,t,r,s.local.invalidDate);return{yearType:(this.leapYear(n)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(n)%10-3]}},toJD:function(e,t,r){var n=this._validate(e,t,r,s.local.invalidDate);e=n.year();t=n.month();r=n.day();var a=e<=0?e+1:e;var i=this.jdEpoch+this._delay1(a)+this._delay2(a)+r+1;if(t<7){for(var o=7;o<=this.monthsInYear(e);o++){i+=this.daysInMonth(e,o)}for(var o=1;o<t;o++){i+=this.daysInMonth(e,o)}}else{for(var o=7;o<t;o++){i+=this.daysInMonth(e,o)}}return i},_delay1:function(e){var t=Math.floor((235*e-234)/19);var r=12084+13753*t;var n=t*29+Math.floor(r/25920);if(i(3*(n+1),7)<3){n++}return n},_delay2:function(e){var t=this._delay1(e-1);var r=this._delay1(e);var n=this._delay1(e+1);return n-r===356?2:r-t===382?1:0},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((e-this.jdEpoch)*98496/35975351)-1;while(e>=this.toJD(t===-1?+1:t+1,7,1)){t++}var r=e<this.toJD(t,1,1)?7:1;while(e>this.toJD(t,r,this.daysInMonth(t,r))){r++}var n=e-this.toJD(t,r,1)+1;return this.newDate(t,r,n)}});function i(e,t){return e-t*Math.floor(e/t)}s.calendars.hebrew=a},{"../main":80,"object-assign":53}],71:[function(e,t,r){var a=e("../main");var n=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new a.baseCalendar;n(i.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);return(t.year()*11+14)%30<11},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-n.dayOfWeek(),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var n=this._validate(e,t,r,a.local.invalidDate);e=n.year();t=n.month();r=n.day();e=e<=0?e+1:e;return r+Math.ceil(29.5*(t-1))+(e-1)*354+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((30*(e-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var r=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1);var n=e-this.toJD(t,r,1)+1;return this.newDate(t,r,n)}});a.calendars.islamic=i},{"../main":80,"object-assign":53}],72:[function(e,t,r){var a=e("../main");var n=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new a.baseCalendar;n(i.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);var e=t.year()<0?t.year()+1:t.year();return e%4===0},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(4-(n.dayOfWeek()||7),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var n=this._validate(e,t,r,a.local.invalidDate);e=n.year();t=n.month();r=n.day();if(e<0){e++}if(t<=2){e--;t+=12}return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r-1524.5},fromJD:function(e){var t=Math.floor(e+.5);var r=t+1524;var n=Math.floor((r-122.1)/365.25);var a=Math.floor(365.25*n);var i=Math.floor((r-a)/30.6001);var o=i-Math.floor(i<14?1:13);var s=n-Math.floor(o>2?4716:4715);var l=r-a-Math.floor(30.6001*i);if(s<=0){s--}return this.newDate(s,o,l)}});a.calendars.julian=i},{"../main":80,"object-assign":53}],73:[function(e,t,r){var s=e("../main");var n=e("object-assign");function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}a.prototype=new s.baseCalendar;n(a.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:true,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:false,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return false},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);e=t.year();var r=Math.floor(e/400);e=e%400;e+=e<0?400:0;var n=Math.floor(e/20);return r+"."+n+"."+e%20},forYear:function(e){e=e.split(".");if(e.length<3){throw"Invalid Mayan year"}var t=0;for(var r=0;r<e.length;r++){var n=parseInt(e[r],10);if(Math.abs(n)>19||r>0&&n<0){throw"Invalid Mayan year"}t=t*20+n}return t},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return 18},weekOfYear:function(e,t,r){this._validate(e,t,r,s.local.invalidDate);return 0},daysInYear:function(e){this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return 360},daysInMonth:function(e,t){this._validate(e,t,this.minDay,s.local.invalidMonth);return 20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,r){var n=this._validate(e,t,r,s.local.invalidDate);return n.day()},weekDay:function(e,t,r){this._validate(e,t,r,s.local.invalidDate);return true},extraInfo:function(e,t,r){var n=this._validate(e,t,r,s.local.invalidDate);var a=n.toJD();var i=this._toHaab(a);var o=this._toTzolkin(a);return{haabMonthName:this.local.haabMonths[i[0]-1],haabMonth:i[0],haabDay:i[1],tzolkinDayName:this.local.tzolkinMonths[o[0]-1],tzolkinDay:o[0],tzolkinTrecena:o[1]}},_toHaab:function(e){e-=this.jdEpoch;var t=i(e+8+(18-1)*20,365);return[Math.floor(t/20)+1,i(t,20)]},_toTzolkin:function(e){e-=this.jdEpoch;return[o(e+20,20),o(e+4,13)]},toJD:function(e,t,r){var n=this._validate(e,t,r,s.local.invalidDate);return n.day()+n.month()*20+n.year()*360+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var t=Math.floor(e/360);e=e%360;e+=e<0?360:0;var r=Math.floor(e/20);var n=e%20;return this.newDate(t,r,n)}});function i(e,t){return e-t*Math.floor(e/t)}function o(e,t){return i(e-1,t)+1}s.calendars.mayan=a},{"../main":80,"object-assign":53}],74:[function(e,t,r){var o=e("../main");var n=e("object-assign");function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}a.prototype=new o.baseCalendar;var s=o.instance("gregorian");n(a.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return s.leapYear(t.year()+(t.year()<1?1:0)+1469)},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(1-(n.dayOfWeek()||7),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,o.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var n=this._validate(e,t,r,o.local.invalidMonth);var e=n.year();if(e<0){e++}var a=n.day();for(var i=1;i<n.month();i++){a+=this.daysPerMonth[i-1]}return a+s.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);var t=Math.floor((e-(this.jdEpoch-1))/366);while(e>=this.toJD(t+1,1,1)){t++}var r=e-Math.floor(this.toJD(t,1,1)+.5)+1;var n=1;while(r>this.daysInMonth(t,n)){r-=this.daysInMonth(t,n);n++}return this.newDate(t,n,r)}});o.calendars.nanakshahi=a},{"../main":80,"object-assign":53}],75:[function(e,t,r){var u=e("../main");var n=e("object-assign");function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}a.prototype=new u.baseCalendar;n(a.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:false}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-n.dayOfWeek(),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,u.local.invalidYear);e=t.year();if(typeof this.NEPALI_CALENDAR_DATA[e]==="undefined"){return this.daysPerYear}var r=0;for(var n=this.minMonth;n<=12;n++){r+=this.NEPALI_CALENDAR_DATA[e][n]}return r},daysInMonth:function(e,t){if(e.year){t=e.month();e=e.year()}this._validate(e,t,this.minDay,u.local.invalidMonth);return typeof this.NEPALI_CALENDAR_DATA[e]==="undefined"?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},toJD:function(e,t,r){var n=this._validate(e,t,r,u.local.invalidDate);e=n.year();t=n.month();r=n.day();var a=u.instance();var i=0;var o=t;var s=e;this._createMissingCalendarData(e);var l=e-(o>9||o===9&&r>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);if(t!==9){i=r;o--}while(o!==9){if(o<=0){o=12;s--}i+=this.NEPALI_CALENDAR_DATA[s][o];o--}if(t===9){i+=r-this.NEPALI_CALENDAR_DATA[s][0];if(i<0){i+=a.daysInYear(l)}}else{i+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0]}return a.newDate(l,1,1).add(i,"d").toJD()},fromJD:function(e){var t=u.instance();var r=t.fromJD(e);var n=r.year();var a=r.dayOfYear();var i=n+56;this._createMissingCalendarData(i);var o=9;var s=this.NEPALI_CALENDAR_DATA[i][0];var l=this.NEPALI_CALENDAR_DATA[i][o]-s+1;while(a>l){o++;if(o>12){o=1;i++}l+=this.NEPALI_CALENDAR_DATA[i][o]}var c=this.NEPALI_CALENDAR_DATA[i][o]-(l-a);return this.newDate(i,o,c)},_createMissingCalendarData:function(e){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var r=e-1;r<e+2;r++){if(typeof this.NEPALI_CALENDAR_DATA[r]==="undefined"){this.NEPALI_CALENDAR_DATA[r]=t}}},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}});u.calendars.nepali=a},{"../main":80,"object-assign":53}],76:[function(e,t,r){var o=e("../main");var n=e("object-assign");function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}a.prototype=new o.baseCalendar;n(a.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);return((t.year()-(t.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-((n.dayOfWeek()+1)%7),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,o.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var n=this._validate(e,t,r,o.local.invalidDate);e=n.year();t=n.month();r=n.day();var a=e-(e>=0?474:473);var i=474+f(a,2820);return r+(t<=7?(t-1)*31:(t-1)*30+6)+Math.floor((i*682-110)/2816)+(i-1)*365+Math.floor(a/2820)*1029983+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=e-this.toJD(475,1,1);var r=Math.floor(t/1029983);var n=f(t,1029983);var a=2820;if(n!==1029982){var i=Math.floor(n/366);var o=f(n,366);a=Math.floor((2134*i+2816*o+2815)/1028522)+i+1}var s=a+2820*r+474;s=s<=0?s-1:s;var l=e-this.toJD(s,1,1)+1;var c=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30);var u=e-this.toJD(s,c,1)+1;return this.newDate(s,c,u)}});function f(e,t){return e-t*Math.floor(e/t)}o.calendars.persian=a;o.calendars.jalali=a},{"../main":80,"object-assign":53}],77:[function(e,t,r){var a=e("../main");var n=e("object-assign");var i=a.instance();function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new a.baseCalendar;n(o.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);var e=this._t2gYear(t.year());return i.leapYear(e)},weekOfYear:function(e,t,r){var n=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);var e=this._t2gYear(n.year());return i.weekOfYear(e,n.month(),n.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var n=this._validate(e,t,r,a.local.invalidDate);var e=this._t2gYear(n.year());return i.toJD(e,n.month(),n.day())},fromJD:function(e){var t=i.fromJD(e);var r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}});a.calendars.taiwan=o},{"../main":80,"object-assign":53}],78:[function(e,t,r){var a=e("../main");var n=e("object-assign");var i=a.instance();function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new a.baseCalendar;n(o.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);var e=this._t2gYear(t.year());return i.leapYear(e)},weekOfYear:function(e,t,r){var n=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);var e=this._t2gYear(n.year());return i.weekOfYear(e,n.month(),n.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var n=this._validate(e,t,r,a.local.invalidDate);var e=this._t2gYear(n.year());return i.toJD(e,n.month(),n.day())},fromJD:function(e){var t=i.fromJD(e);var r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}});a.calendars.thai=o},{"../main":80,"object-assign":53}],79:[function(e,t,r){var o=e("../main");var n=e("object-assign");function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}a.prototype=new o.baseCalendar;n(a.prototype,{name:"UmmAlQura",hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:true}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);return this.daysInYear(t.year())===355},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-n.dayOfWeek(),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=0;for(var r=1;r<=12;r++){t+=this.daysInMonth(e,r)}return t},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,o.local.invalidMonth);var n=r.toJD()-24e5+.5;var a=0;for(var i=0;i<c.length;i++){if(c[i]>n){return c[a]-c[a-1]}a++}return 30},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var n=this._validate(e,t,r,o.local.invalidDate);var a=12*(n.year()-1)+n.month()-15292;var i=n.day()+c[a-1]-1;return i+24e5-.5},fromJD:function(e){var t=e-24e5+.5;var r=0;for(var n=0;n<c.length;n++){if(c[n]>t)break;r++}var a=r+15292;var i=Math.floor((a-1)/12);var o=i+1;var s=a-12*i;var l=t-c[r-1]+1;return this.newDate(o,s,l)},isValid:function(e,t,r){var n=o.baseCalendar.prototype.isValid.apply(this,arguments);if(n){e=e.year!=null?e.year:e;n=e>=1276&&e<=1500}return n},_validate:function(e,t,r,n){var a=o.baseCalendar.prototype._validate.apply(this,arguments);if(a.year<1276||a.year>1500){throw n.replace(/\{0\}/,this.local.name)}return a}});o.calendars.ummalqura=a;var c=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":80,"object-assign":53}],80:[function(e,t,r){var n=e("object-assign");function a(){this.regionalOptions=[];this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"};this.local=this.regionalOptions[""];this.calendars={};this._localCals={}}n(a.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase();t=t||"";var r=this._localCals[e+"-"+t];if(!r&&this.calendars[e]){r=new this.calendars[e](t);this._localCals[e+"-"+t]=r}if(!r){throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e)}return r},newDate:function(e,t,r,n,a){n=(e!=null&&e.year?e.calendar():typeof n==="string"?this.instance(n,a):n)||this.instance();return n.newDate(e,t,r)},substituteDigits:function(t){return function(e){return(e+"").replace(/[0-9]/g,function(e){return t[e]})}},substituteChineseDigits:function(a,i){return function(e){var t="";var r=0;while(e>0){var n=e%10;t=(n===0?"":a[n]+i[r])+t;r++;e=Math.floor(e/10)}if(t.indexOf(a[1]+i[1])===0){t=t.substr(1)}return t||a[0]}}});function i(e,t,r,n){this._calendar=e;this._year=t;this._month=r;this._day=n;if(this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day)){throw(c.local.invalidDate||c.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}}function o(e,t){e=""+e;return"000000".substring(0,t-e.length)+e}n(i.prototype,{newDate:function(e,t,r){return this._calendar.newDate(e==null?this:e,t,r)},year:function(e){return arguments.length===0?this._year:this.set(e,"y")},month:function(e){return arguments.length===0?this._month:this.set(e,"m")},day:function(e){return arguments.length===0?this._day:this.set(e,"d")},date:function(e,t,r){if(!this._calendar.isValid(e,t,r)){throw(c.local.invalidDate||c.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}this._year=e;this._month=t;this._day=r;return this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name){throw(c.local.differentCalendars||c.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name)}var t=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return t===0?0:t<0?-1:+1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+o(Math.abs(this.year()),4)+"-"+o(this.month(),2)+"-"+o(this.day(),2)}});function s(){this.shortYearCutoff="+10"}n(s.prototype,{_validateLevel:0,newDate:function(e,t,r){if(e==null){return this.today()}if(e.year){this._validate(e,t,r,c.local.invalidDate||c.regionalOptions[""].invalidDate);r=e.day();t=e.month();e=e.year()}return new i(this,e,t,r)},today:function(){return this.fromJSDate(new Date)},epoch:function(e){var t=this._validate(e,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear);return t.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+o(Math.abs(t.year()),4)},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear);return 12},monthOfYear:function(e,t){var r=this._validate(e,t,this.minDay,c.local.invalidMonth||c.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(e,t){var r=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;this._validate(e,r,this.minDay,c.local.invalidMonth||c.regionalOptions[""].invalidMonth);return r},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(e,t,r){var n=this._validate(e,t,r,c.local.invalidDate||c.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,r){var n=this._validate(e,t,r,c.local.invalidDate||c.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(e,t,r){this._validate(e,t,r,c.local.invalidDate||c.regionalOptions[""].invalidDate);return{}},add:function(e,t,r){this._validate(e,this.minMonth,this.minDay,c.local.invalidDate||c.regionalOptions[""].invalidDate);return this._correctAdd(e,this._add(e,t,r),t,r)},_add:function(e,t,r){this._validateLevel++;if(r==="d"||r==="w"){var n=e.toJD()+t*(r==="w"?this.daysInWeek():1);var a=e.calendar().fromJD(n);this._validateLevel--;return[a.year(),a.month(),a.day()]}try{var i=e.year()+(r==="y"?t:0);var o=e.monthOfYear()+(r==="m"?t:0);var a=e.day();var s=function(e){while(o<e.minMonth){i--;o+=e.monthsInYear(i)}var t=e.monthsInYear(i);while(o>t-1+e.minMonth){i++;o-=t;t=e.monthsInYear(i)}};if(r==="y"){if(e.month()!==this.fromMonthOfYear(i,o)){o=this.newDate(i,e.month(),this.minDay).monthOfYear()}o=Math.min(o,this.monthsInYear(i));a=Math.min(a,this.daysInMonth(i,this.fromMonthOfYear(i,o)))}else if(r==="m"){s(this);a=Math.min(a,this.daysInMonth(i,this.fromMonthOfYear(i,o)))}var l=[i,this.fromMonthOfYear(i,o),a];this._validateLevel--;return l}catch(e){this._validateLevel--;throw e}},_correctAdd:function(e,t,r,n){if(!this.hasYearZero&&(n==="y"||n==="m")){if(t[0]===0||e.year()>0!==t[0]>0){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[n];var i=r<0?-1:+1;t=this._add(e,r*a[0]+i*a[1],a[2])}}return e.date(t[0],t[1],t[2])},set:function(e,t,r){this._validate(e,this.minMonth,this.minDay,c.local.invalidDate||c.regionalOptions[""].invalidDate);var n=r==="y"?t:e.year();var a=r==="m"?t:e.month();var i=r==="d"?t:e.day();if(r==="y"||r==="m"){i=Math.min(i,this.daysInMonth(n,a))}return e.date(n,a,i)},isValid:function(e,t,r){this._validateLevel++;var n=this.hasYearZero||e!==0;if(n){var a=this.newDate(e,t,this.minDay);n=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(a)&&(r>=this.minDay&&r-this.minDay<this.daysInMonth(a))}this._validateLevel--;return n},toJSDate:function(e,t,r){var n=this._validate(e,t,r,c.local.invalidDate||c.regionalOptions[""].invalidDate);return c.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(e){return this.fromJD(c.instance().fromJSDate(e).toJD())},_validate:function(e,t,r,n){if(e.year){if(this._validateLevel===0&&this.name!==e.calendar().name){throw(c.local.differentCalendars||c.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name)}return e}try{this._validateLevel++;if(this._validateLevel===1&&!this.isValid(e,t,r)){throw n.replace(/\{0\}/,this.local.name)}var a=this.newDate(e,t,r);this._validateLevel--;return a}catch(e){this._validateLevel--;throw e}}});function l(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}l.prototype=new s;n(l.prototype,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear);var e=t.year()+(t.year()<0?1:0);return e%4===0&&(e%100!==0||e%400===0)},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(4-(n.dayOfWeek()||7),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,c.local.invalidMonth||c.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var n=this._validate(e,t,r,c.local.invalidDate||c.regionalOptions[""].invalidDate);e=n.year();t=n.month();r=n.day();if(e<0){e++}if(t<3){t+=12;e--}var a=Math.floor(e/100);var i=2-a+Math.floor(a/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r+i-1524.5},fromJD:function(e){var t=Math.floor(e+.5);var r=Math.floor((t-1867216.25)/36524.25);r=t+1+r-Math.floor(r/4);var n=r+1524;var a=Math.floor((n-122.1)/365.25);var i=Math.floor(365.25*a);var o=Math.floor((n-i)/30.6001);var s=n-i-Math.floor(o*30.6001);var l=o-(o>13.5?13:1);var c=a-(l>2.5?4716:4715);if(c<=0){c--}return this.newDate(c,l,s)},toJSDate:function(e,t,r){var n=this._validate(e,t,r,c.local.invalidDate||c.regionalOptions[""].invalidDate);var a=new Date(n.year(),n.month()-1,n.day());a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);a.setHours(a.getHours()>12?a.getHours()+2:0);return a},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var c=t.exports=new a;c.cdate=i;c.baseCalendar=s;c.calendars.gregorian=l},{"object-assign":53}],81:[function(e,t,r){var n=e("object-assign");var C=e("./main");n(C.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});C.local=C.regionalOptions[""];n(C.cdate.prototype,{formatDate:function(e,t){if(typeof e!=="string"){t=e;e=""}return this._calendar.formatDate(e||"",this,t)}});n(C.baseCalendar.prototype,{UNIX_EPOCH:C.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:C.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(n,e,t){if(typeof n!=="string"){t=e;e=n;n=""}if(!e){return""}if(e.calendar()!==this){throw C.local.invalidFormat||C.regionalOptions[""].invalidFormat}n=n||this.local.dateFormat;t=t||{};var r=t.dayNamesShort||this.local.dayNamesShort;var a=t.dayNames||this.local.dayNames;var i=t.monthNumbers||this.local.monthNumbers;var o=t.monthNamesShort||this.local.monthNamesShort;var s=t.monthNames||this.local.monthNames;var l=t.calculateWeek||this.local.calculateWeek;var c=function(e,t){var r=1;while(y+r<n.length&&n.charAt(y+r)===e){r++}y+=r-1;return Math.floor(r/(t||1))>1};var u=function(e,t,r,n){var a=""+t;if(c(e,n)){while(a.length<r){a="0"+a}}return a};var f=function(e,t,r,n){return c(e)?n[t]:r[t]};var d=this;var h=function(e){return typeof i==="function"?i.call(d,e,c("m")):g(u("m",e.month(),2))};var p=function(e,t){if(t){return typeof s==="function"?s.call(d,e):s[e.month()-d.minMonth]}else{return typeof o==="function"?o.call(d,e):o[e.month()-d.minMonth]}};var v=this.local.digits;var g=function(e){return t.localNumbers&&v?v(e):e};var m="";var _=false;for(var y=0;y<n.length;y++){if(_){if(n.charAt(y)==="'"&&!c("'")){_=false}else{m+=n.charAt(y)}}else{switch(n.charAt(y)){case"d":m+=g(u("d",e.day(),2));break;case"D":m+=f("D",e.dayOfWeek(),r,a);break;case"o":m+=u("o",e.dayOfYear(),3);break;case"w":m+=u("w",e.weekOfYear(),2);break;case"m":m+=h(e);break;case"M":m+=p(e,c("M"));break;case"y":m+=c("y",2)?e.year():(e.year()%100<10?"0":"")+e.year()%100;break;case"Y":c("Y",2);m+=e.formatYear();break;case"J":m+=e.toJD();break;case"@":m+=(e.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":m+=(e.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":if(c("'")){m+="'"}else{_=true}break;default:m+=n.charAt(y)}}}return m},parseDate:function(n,o,e){if(o==null){throw C.local.invalidArguments||C.regionalOptions[""].invalidArguments}o=typeof o==="object"?o.toString():o+"";if(o===""){return null}n=n||this.local.dateFormat;e=e||{};var t=e.shortYearCutoff||this.shortYearCutoff;t=typeof t!=="string"?t:this.today().year()%100+parseInt(t,10);var r=e.dayNamesShort||this.local.dayNamesShort;var a=e.dayNames||this.local.dayNames;var i=e.parseMonth||this.local.parseMonth;var s=e.monthNumbers||this.local.monthNumbers;var l=e.monthNamesShort||this.local.monthNamesShort;var c=e.monthNames||this.local.monthNames;var u=-1;var f=-1;var d=-1;var h=-1;var p=-1;var v=false;var g=false;var m=function(e,t){var r=1;while(k+r<n.length&&n.charAt(k+r)===e){r++}k+=r-1;return Math.floor(r/(t||1))>1};var _=function(e,t){var r=m(e,t);var n=[2,3,r?4:2,r?4:2,10,11,20]["oyYJ@!".indexOf(e)+1];var a=new RegExp("^-?\\d{1,"+n+"}");var i=o.substring(T).match(a);if(!i){throw(C.local.missingNumberAt||C.regionalOptions[""].missingNumberAt).replace(/\{0\}/,T)}T+=i[0].length;return parseInt(i[0],10)};var y=this;var b=function(){if(typeof s==="function"){m("m");var e=s.call(y,o.substring(T));T+=e.length;return e}return _("m")};var x=function(e,t,r,n){var a=m(e,n)?r:t;for(var i=0;i<a.length;i++){if(o.substr(T,a[i].length).toLowerCase()===a[i].toLowerCase()){T+=a[i].length;return i+y.minMonth}}throw(C.local.unknownNameAt||C.regionalOptions[""].unknownNameAt).replace(/\{0\}/,T)};var w=function(){if(typeof c==="function"){var e=m("M")?c.call(y,o.substring(T)):l.call(y,o.substring(T));T+=e.length;return e}return x("M",l,c)};var A=function(){if(o.charAt(T)!==n.charAt(k)){throw(C.local.unexpectedLiteralAt||C.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,T)}T++};var T=0;for(var k=0;k<n.length;k++){if(g){if(n.charAt(k)==="'"&&!m("'")){g=false}else{A()}}else{switch(n.charAt(k)){case"d":h=_("d");break;case"D":x("D",r,a);break;case"o":p=_("o");break;case"w":_("w");break;case"m":d=b();break;case"M":d=w();break;case"y":var M=k;v=!m("y",2);k=M;f=_("y",2);break;case"Y":f=_("Y",2);break;case"J":u=_("J")+.5;if(o.charAt(T)==="."){T++;_("J")}break;case"@":u=_("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":u=_("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":T=o.length;break;case"'":if(m("'")){A()}else{g=true}break;default:A()}}}if(T<o.length){throw C.local.unexpectedText||C.regionalOptions[""].unexpectedText}if(f===-1){f=this.today().year()}else if(f<100&&v){f+=t===-1?1900:this.today().year()-this.today().year()%100-(f<=t?0:100)}if(typeof d==="string"){d=i.call(this,f,d)}if(p>-1){d=1;h=p;for(var S=this.daysInMonth(f,d);h>S;S=this.daysInMonth(f,d)){d++;h-=S}}return u>-1?this.fromJD(u):this.newDate(f,d,h)},determineDate:function(e,t,a,i,o){if(a&&typeof a!=="object"){o=i;i=a;a=null}if(typeof i!=="string"){o=i;i=""}var s=this;var r=function(e){try{return s.parseDate(i,e,o)}catch(e){}e=e.toLowerCase();var t=(e.match(/^c/)&&a?a.newDate():null)||s.today();var r=/([+-]?[0-9]+)\s*(d|w|m|y)?/g;var n=r.exec(e);while(n){t.add(parseInt(n[1],10),n[2]||"d");n=r.exec(e)}return t};t=t?t.newDate():null;e=e==null?t:typeof e==="string"?r(e):typeof e==="number"?isNaN(e)||e===Infinity||e===-Infinity?t:s.today().add(e,"d"):s.newDate(e);return e}})},{"./main":80,"object-assign":53}],82:[function(e,t,r){"use strict";t.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:true},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:true}]},{}],83:[function(e,t,r){"use strict";var n=e("./arrow_paths");var a=e("../../plots/font_attributes");var i=e("../../plots/cartesian/constants");var o=e("../../plot_api/plot_template").templatedArray;var s=e("../../constants/axis_placeable_objects");function l(e){return["In order for absolute positioning of the arrow to work, *a"+e+"ref* must be exactly the same as *"+e+"ref*, otherwise *a"+e+"ref* will revert to *pixel* (explained next).","For relative positioning, *a"+e+"ref* can be set to *pixel*,","in which case the *a"+e+"* value is specified in pixels","relative to *"+e+"*.","Absolute positioning is useful","for trendline annotations which should continue to indicate","the correct trend when zoomed. Relative positioning is useful","for specifying the text offset for an annotated point."].join(" ")}function c(e,t,r){return["Sets the",e,"component of the arrow tail about the arrow head.","If `a"+e+"ref` is `pixel`, a positive (negative)","component corresponds to an arrow pointing","from",r,"to",t,"("+t,"to",r+").","If `a"+e+"ref` is not `pixel` and is exactly the same as `"+e+"ref`,","this is an absolute value on that axis,","like `"+e+"`, specified in the same coordinates as `"+e+"ref`."].join(" ")}t.exports=o("annotation",{visible:{valType:"boolean",dflt:true,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:a({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:true,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:n.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:n.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",i.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",i.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[false,"onoff","onout"],dflt:false,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:a({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":206,"../../plot_api/plot_template":265,"../../plots/cartesian/constants":283,"../../plots/font_attributes":305,"./arrow_paths":82}],84:[function(e,t,r){"use strict";var a=e("../../lib");var b=e("../../plots/cartesian/axes");var i=e("./draw").draw;t.exports=function e(t){var r=t._fullLayout;var n=a.filterVisible(r.annotations);if(n.length&&t._fullData.length){return a.syncOrAsync([i,o],t)}};function o(i){var e=i._fullLayout;a.filterVisible(e.annotations).forEach(function(e){var t=b.getFromId(i,e.xref);var r=b.getFromId(i,e.yref);var n=b.getRefType(e.xref);var a=b.getRefType(e.yref);e._extremes={};if(n==="range")s(e,t);if(a==="range")s(e,r)})}function s(e,t){var r=t._id;var n=r.charAt(0);var a=e[n];var i=e["a"+n];var o=e[n+"ref"];var s=e["a"+n+"ref"];var l=e["_"+n+"padplus"];var c=e["_"+n+"padminus"];var u={x:1,y:-1}[n]*e[n+"shift"];var f=3*e.arrowsize*e.arrowwidth||0;var d=f+u;var h=f-u;var p=3*e.startarrowsize*e.arrowwidth||0;var v=p+u;var g=p-u;var m;if(s===o){var _=b.findExtremes(t,[t.r2c(a)],{ppadplus:d,ppadminus:h});var y=b.findExtremes(t,[t.r2c(i)],{ppadplus:Math.max(l,v),ppadminus:Math.max(c,g)});m={min:[_.min[0],y.min[0]],max:[_.max[0],y.max[0]]}}else{v=i?v+i:v;g=i?g-i:g;m=b.findExtremes(t,[t.r2c(a)],{ppadplus:Math.max(l,d,v),ppadminus:Math.max(c,h,g)})}e._extremes[r]=m}},{"../../lib":230,"../../plots/cartesian/axes":276,"./draw":89}],85:[function(e,t,r){"use strict";var c=e("../../lib");var u=e("../../registry");var f=e("../../plot_api/plot_template").arrayEditor;t.exports={hasClickToShow:n,onClick:a};function n(e,t){var r=d(e,t);return r.on.length>0||r.explicitOff.length>0}function a(e,t){var r=d(e,t);var n=r.on;var a=r.off.concat(r.explicitOff);var i={};var o=e._fullLayout.annotations;var s,l;if(!(n.length||a.length))return;for(s=0;s<n.length;s++){l=f(e.layout,"annotations",o[n[s]]);l.modifyItem("visible",true);c.extendFlat(i,l.getUpdateObj())}for(s=0;s<a.length;s++){l=f(e.layout,"annotations",o[a[s]]);l.modifyItem("visible",false);c.extendFlat(i,l.getUpdateObj())}return u.call("update",e,{},i)}function d(e,t){var r=e._fullLayout.annotations;var n=[];var a=[];var i=[];var o=(t||[]).length;var s,l,c,u,f,d,h,p;for(s=0;s<r.length;s++){c=r[s];u=c.clicktoshow;if(u){for(l=0;l<o;l++){f=t[l];d=f.xaxis;h=f.yaxis;if(d._id===c.xref&&h._id===c.yref&&d.d2r(f.x)===v(c._xclick,d)&&h.d2r(f.y)===v(c._yclick,h)){if(c.visible){if(u==="onout")p=a;else p=i}else{p=n}p.push(s);break}}if(l===o){if(c.visible&&u==="onout")a.push(s)}}}return{on:n,off:a,explicitOff:i}}function v(e,t){return t.type==="log"?t.l2r(e):t.d2r(e)}},{"../../lib":230,"../../plot_api/plot_template":265,"../../registry":313}],86:[function(e,t,r){"use strict";var _=e("../../lib");var y=e("../color");t.exports=function e(t,r,n,a){a("opacity");var i=a("bgcolor");var o=a("bordercolor");var s=y.opacity(o);a("borderpad");var l=a("borderwidth");var c=a("showarrow");a("text",c?" ":n._dfltTitle.annotation);a("textangle");_.coerceFont(a,"font",n.font);a("width");a("align");var u=a("height");if(u)a("valign");if(c){var f=a("arrowside");var d;var h;if(f.indexOf("end")!==-1){d=a("arrowhead");h=a("arrowsize")}if(f.indexOf("start")!==-1){a("startarrowhead",d);a("startarrowsize",h)}a("arrowcolor",s?r.bordercolor:y.defaultLine);a("arrowwidth",(s&&l||1)*2);a("standoff");a("startstandoff")}var p=a("hovertext");var v=n.hoverlabel||{};if(p){var g=a("hoverlabel.bgcolor",v.bgcolor||(y.opacity(i)?y.rgb(i):y.defaultLine));var m=a("hoverlabel.bordercolor",v.bordercolor||y.contrast(g));_.coerceFont(a,"hoverlabel.font",{family:v.font.family,size:v.font.size,color:v.font.color||m})}a("captureevents",!!p)}},{"../../lib":230,"../color":100}],87:[function(e,t,r){"use strict";var h=e("fast-isnumeric");var p=e("../../lib/to_log_range");t.exports=function e(t,n,r,a){n=n||{};var i=r==="log"&&n.type==="linear";var o=r==="linear"&&n.type==="log";if(!(i||o))return;var s=t._fullLayout.annotations;var l=n._id.charAt(0);var c;var u;function f(e){var t=c[e];var r=null;if(i)r=p(t,n.range);else r=Math.pow(10,t);if(!h(r))r=null;a(u+e,r)}for(var d=0;d<s.length;d++){c=s[d];u="annotations["+d+"].";if(c[l+"ref"]===n._id)f(l);if(c["a"+l+"ref"]===n._id)f("a"+l)}}},{"../../lib/to_log_range":254,"fast-isnumeric":15}],88:[function(e,t,r){"use strict";var y=e("../../lib");var b=e("../../plots/cartesian/axes");var n=e("../../plots/array_container_defaults");var x=e("./common_defaults");var w=e("./attributes");t.exports=function e(t,r){n(t,r,{name:"annotations",handleItemDefaults:a})};function a(r,n,e){function t(e,t){return y.coerce(r,n,w,e,t)}var a=t("visible");var i=t("clicktoshow");if(!(a||i))return;x(r,n,e,t);var o=n.showarrow;var s=["x","y"];var l=[-10,-30];var c={_fullLayout:e};for(var u=0;u<2;u++){var f=s[u];var d=b.coerceRef(r,n,c,f,"","paper");if(d!=="paper"){var h=b.getFromId(c,d);h._annIndices.push(n._index)}b.coercePosition(n,c,t,d,f,.5);if(o){var p="a"+f;var v=b.coerceRef(r,n,c,p,"pixel",["pixel","paper"]);if(v!=="pixel"&&v!==d){v=n[p]="pixel"}var g=v==="pixel"?l[u]:.4;b.coercePosition(n,c,t,v,p,g)}t(f+"anchor");t(f+"shift")}y.noneOrAll(r,n,["x","y"]);if(o){y.noneOrAll(r,n,["ax","ay"])}if(i){var m=t("xclick");var _=t("yclick");n._xclick=m===undefined?n.x:b.cleanPosition(m,c,n.xref);n._yclick=_===undefined?n.y:b.cleanPosition(_,c,n.yref)}}},{"../../lib":230,"../../plots/array_container_defaults":271,"../../plots/cartesian/axes":276,"./attributes":83,"./common_defaults":86}],89:[function(e,t,r){"use strict";var u=e("@plotly/d3");var ge=e("../../registry");var n=e("../../plots/plots");var me=e("../../lib");var _e=me.strTranslate;var ye=e("../../plots/cartesian/axes");var be=e("../color");var xe=e("../drawing");var f=e("../fx");var we=e("../../lib/svg_text_utils");var Ae=e("../../lib/setcursor");var Te=e("../dragelement");var d=e("../../plot_api/plot_template").arrayEditor;var ke=e("./draw_arrow_head");t.exports={draw:a,drawOne:i,drawRaw:o};function a(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var r=0;r<t.annotations.length;r++){if(t.annotations[r].visible){i(e,r)}}return n.previousPromises(e)}function i(e,t){var r=e._fullLayout;var n=r.annotations[t]||{};var a=ye.getFromId(e,n.xref);var i=ye.getFromId(e,n.yref);if(a)a.setScale();if(i)i.setScale();o(e,n,t,false,a,i)}function Me(e,t,r,n,a){var i=a[r];var o=a[r+"ref"];var s=r.indexOf("y")!==-1;var l=ye.getRefType(o)==="domain";var c=s?n.h:n.w;if(e){if(l){return i+(s?-t:t)/e._length}else{return e.p2r(e.r2p(i)+t)}}else{return i+(s?-t:t)/c}}function o(Y,G,r,W,X,Z){var J=Y._fullLayout;var $=Y._fullLayout._size;var Q=Y._context.edits;var e,t;if(W){e="annotation-"+W;t=W+".annotations"}else{e="annotation";t="annotations"}var n=d(Y.layout,t,G);var K=n.modifyBase;var ee=n.modifyItem;var te=n.getUpdateObj;J._infolayer.selectAll("."+e+'[data-index="'+r+'"]').remove();var re="clip"+J._uid+"_ann"+r;if(!G._input||G.visible===false){u.selectAll("#"+re).remove();return}var ne={x:{},y:{}};var ae=+G.textangle||0;var ie=J._infolayer.append("g").classed(e,true).attr("data-index",String(r)).style("opacity",G.opacity);var oe=ie.append("g").classed("annotation-text-g",true);var se=Q[G.showarrow?"annotationTail":"annotationPosition"];var a=G.captureevents||Q.annotationText||se;function le(e){var t={index:r,annotation:G._input,fullAnnotation:G,event:e};if(W){t.subplotId=W}return t}var ce=oe.append("g").style("pointer-events",a?"all":null).call(Ae,"pointer").on("click",function(){Y._dragging=false;Y.emit("plotly_clickannotation",le(u.event))});if(G.hovertext){ce.on("mouseover",function(){var e=G.hoverlabel;var t=e.font;var r=this.getBoundingClientRect();var n=Y.getBoundingClientRect();f.loneHover({x0:r.left-n.left,x1:r.right-n.left,y:(r.top+r.bottom)/2-n.top,text:G.hovertext,color:e.bgcolor,borderColor:e.bordercolor,fontFamily:t.family,fontSize:t.size,fontColor:t.color},{container:J._hoverlayer.node(),outerContainer:J._paper.node(),gd:Y})}).on("mouseout",function(){f.loneUnhover(J._hoverlayer.node())})}var ue=G.borderwidth;var i=G.borderpad;var fe=ue+i;var de=ce.append("rect").attr("class","bg").style("stroke-width",ue+"px").call(be.stroke,G.bordercolor).call(be.fill,G.bgcolor);var he=G.width||G.height;var pe=J._topclips.selectAll("#"+re).data(he?[0]:[]);pe.enter().append("clipPath").classed("annclip",true).attr("id",re).append("rect");pe.exit().remove();var o=G.font;var s=J._meta?me.templateString(G.text,J._meta):G.text;var ve=ce.append("text").classed("annotation-text",true).text(s);function l(e){e.call(xe.font,o).attr({"text-anchor":{left:"start",right:"end"}[G.align]||"middle"});we.convertToTspans(e,Y,c);return e}function c(){var e=ve.selectAll("a");if(e.size()===1&&e.text()===ve.text()){var t=ce.insert("a",":first-child").attr({"xlink:xlink:href":e.attr("xlink:href"),"xlink:xlink:show":e.attr("xlink:show")}).style({cursor:"pointer"});t.node().appendChild(de.node())}var r=ce.select(".annotation-text-math-group");var n=!r.empty();var a=xe.bBox((n?r:ve).node());var i=a.width;var o=a.height;var s=G.width||i;var l=G.height||o;var c=Math.round(s+2*fe);var u=Math.round(l+2*fe);function f(e,t){if(t==="auto"){if(e<1/3)t="left";else if(e>2/3)t="right";else t="center"}return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t]}var d=false;var h=["x","y"];for(var p=0;p<h.length;p++){var v=h[p];var g=G[v+"ref"]||v;var m=G["a"+v+"ref"];var _={x:X,y:Z}[v];var y=(ae+(v==="x"?0:-90))*Math.PI/180;var b=c*Math.cos(y);var x=u*Math.sin(y);var w=Math.abs(b)+Math.abs(x);var A=G[v+"anchor"];var T=G[v+"shift"]*(v==="x"?1:-1);var k=ne[v];var M;var S;var C;var L;var E;var D=ye.getRefType(g);if(_&&D!=="domain"){var O=_.r2fraction(G[v]);if(O<0||O>1){if(m===g){O=_.r2fraction(G["a"+v]);if(O<0||O>1){d=true}}else{d=true}}M=_._offset+_.r2p(G[v]);L=.5}else{var P=D==="domain";if(v==="x"){C=G[v];M=P?_._offset+_._length*C:M=$.l+$.w*C}else{C=1-G[v];M=P?_._offset+_._length*C:M=$.t+$.h*C}L=G.showarrow?.5:C}if(G.showarrow){k.head=M;var I=G["a"+v];E=b*f(.5,G.xanchor)-x*f(.5,G.yanchor);if(m===g){var R=ye.getRefType(m);if(R==="domain"){if(v==="y"){I=1-I}k.tail=_._offset+_._length*I}else if(R==="paper"){if(v==="y"){I=1-I;k.tail=$.t+$.h*I}else{k.tail=$.l+$.w*I}}else{k.tail=_._offset+_.r2p(I)}S=E}else{k.tail=M+I;S=E+I}k.text=k.tail+E;var z=J[v==="x"?"width":"height"];if(g==="paper"){k.head=me.constrain(k.head,1,z-1)}if(m==="pixel"){var N=-Math.max(k.tail-3,k.text);var F=Math.min(k.tail+3,k.text)-z;if(N>0){k.tail+=N;k.text+=N}else if(F>0){k.tail-=F;k.text-=F}}k.tail+=T;k.head+=T}else{E=w*f(L,A);S=E;k.text=M+E}k.text+=T;E+=T;S+=T;G["_"+v+"padplus"]=w/2+S;G["_"+v+"padminus"]=w/2-S;G["_"+v+"size"]=w;G["_"+v+"shift"]=E}if(d){ce.remove();return}var j=0;var B=0;if(G.align!=="left"){j=(s-i)*(G.align==="center"?.5:1)}if(G.valign!=="top"){B=(l-o)*(G.valign==="middle"?.5:1)}if(n){r.select("svg").attr({x:fe+j-1,y:fe+B}).call(xe.setClipUrl,he?re:null,Y)}else{var H=fe+B-a.top;var U=fe+j-a.left;ve.call(we.positionText,U,H).call(xe.setClipUrl,he?re:null,Y)}pe.select("rect").call(xe.setRect,fe,fe,s,l);de.call(xe.setRect,ue/2,ue/2,c-ue,u-ue);ce.call(xe.setTranslate,Math.round(ne.x.text-c/2),Math.round(ne.y.text-u/2));oe.attr({transform:"rotate("+ae+","+ne.x.text+","+ne.y.text+")"});var V=function(e,t){ie.selectAll(".annotation-arrow-g").remove();var r=ne.x.head;var n=ne.y.head;var a=ne.x.tail+e;var i=ne.y.tail+t;var o=ne.x.text+e;var s=ne.y.text+t;var l=me.rotationXYMatrix(ae,o,s);var c=me.apply2DTransform(l);var u=me.apply2DTransform2(l);var f=+de.attr("width");var d=+de.attr("height");var h=o-.5*f;var p=h+f;var v=s-.5*d;var g=v+d;var m=[[h,v,h,g],[h,g,p,g],[p,g,p,v],[p,v,h,v]].map(u);if(m.reduce(function(e,t){return e^!!me.segmentsIntersect(r,n,r+1e6,n+1e6,t[0],t[1],t[2],t[3])},false)){return}m.forEach(function(e){var t=me.segmentsIntersect(a,i,r,n,e[0],e[1],e[2],e[3]);if(t){a=t.x;i=t.y}});var _=G.arrowwidth;var y=G.arrowcolor;var b=G.arrowside;var x=ie.append("g").style({opacity:be.opacity(y)}).classed("annotation-arrow-g",true);var w=x.append("path").attr("d","M"+a+","+i+"L"+r+","+n).style("stroke-width",_+"px").call(be.stroke,be.rgb(y));ke(w,b,G);if(Q.annotationPosition&&w.node().parentNode&&!W){var A=r;var T=n;if(G.standoff){var k=Math.sqrt(Math.pow(r-a,2)+Math.pow(n-i,2));A+=G.standoff*(a-r)/k;T+=G.standoff*(i-n)/k}var M=x.append("path").classed("annotation-arrow",true).classed("anndrag",true).classed("cursor-move",true).attr({d:"M3,3H-3V-3H3ZM0,0L"+(a-A)+","+(i-T),transform:_e(A,T)}).style("stroke-width",_+6+"px").call(be.stroke,"rgba(0,0,0,0)").call(be.fill,"rgba(0,0,0,0)");var S,C;Te.init({element:M.node(),gd:Y,prepFn:function(){var e=xe.getTranslate(ce);S=e.x;C=e.y;if(X&&X.autorange){K(X._name+".autorange",true)}if(Z&&Z.autorange){K(Z._name+".autorange",true)}},moveFn:function(e,t){var r=c(S,C);var n=r[0]+e;var a=r[1]+t;ce.call(xe.setTranslate,n,a);ee("x",Me(X,e,"x",$,G));ee("y",Me(Z,t,"y",$,G));if(G.axref===G.xref){ee("ax",Me(X,e,"ax",$,G))}if(G.ayref===G.yref){ee("ay",Me(Z,t,"ay",$,G))}x.attr("transform",_e(e,t));oe.attr({transform:"rotate("+ae+","+n+","+a+")"})},doneFn:function(){ge.call("_guiRelayout",Y,te());var e=document.querySelector(".js-notes-box-panel");if(e)e.redraw(e.selectedObj)}})}};if(G.showarrow)V(0,0);if(se){var q;Te.init({element:ce.node(),gd:Y,prepFn:function(){q=oe.attr("transform")},moveFn:function(e,t){var r="pointer";if(G.showarrow){if(G.axref===G.xref){ee("ax",Me(X,e,"ax",$,G))}else{ee("ax",G.ax+e)}if(G.ayref===G.yref){ee("ay",Me(Z,t,"ay",$.w,G))}else{ee("ay",G.ay+t)}V(e,t)}else if(!W){var n,a;if(X){n=Me(X,e,"x",$,G)}else{var i=G._xsize/$.w;var o=G.x+(G._xshift-G.xshift)/$.w-i/2;n=Te.align(o+e/$.w,i,0,1,G.xanchor)}if(Z){a=Me(Z,t,"y",$,G)}else{var s=G._ysize/$.h;var l=G.y-(G._yshift+G.yshift)/$.h-s/2;a=Te.align(l-t/$.h,s,0,1,G.yanchor)}ee("x",n);ee("y",a);if(!X||!Z){r=Te.getCursor(X?.5:n,Z?.5:a,G.xanchor,G.yanchor)}}else return;oe.attr({transform:_e(e,t)+q});Ae(ce,r)},clickFn:function(e,t){if(G.captureevents){Y.emit("plotly_clickannotation",le(t))}},doneFn:function(){Ae(ce);ge.call("_guiRelayout",Y,te());var e=document.querySelector(".js-notes-box-panel");if(e)e.redraw(e.selectedObj)}})}}if(Q.annotationText){ve.call(we.makeEditable,{delegate:ce,gd:Y}).call(l).on("edit",function(e){G.text=e;this.call(l);ee("text",e);if(X&&X.autorange){K(X._name+".autorange",true)}if(Z&&Z.autorange){K(Z._name+".autorange",true)}ge.call("_guiRelayout",Y,te())})}else ve.call(l)}},{"../../lib":230,"../../lib/setcursor":250,"../../lib/svg_text_utils":252,"../../plot_api/plot_template":265,"../../plots/cartesian/axes":276,"../../plots/plots":311,"../../registry":313,"../color":100,"../dragelement":119,"../drawing":122,"../fx":140,"./draw_arrow_head":90,"@plotly/d3":11}],90:[function(e,t,r){"use strict";var O=e("@plotly/d3");var P=e("../color");var I=e("./arrow_paths");var n=e("../../lib");var R=n.strScale;var z=n.strRotate;var N=n.strTranslate;t.exports=function e(a,t,i){var o=a.node();var r=I[i.arrowhead||0];var n=I[i.startarrowhead||0];var s=(i.arrowwidth||1)*(i.arrowsize||1);var l=(i.arrowwidth||1)*(i.startarrowsize||1);var c=t.indexOf("start")>=0;var u=t.indexOf("end")>=0;var f=r.backoff*s+i.standoff;var d=n.backoff*l+i.startstandoff;var h,p,v,g;if(o.nodeName==="line"){h={x:+a.attr("x1"),y:+a.attr("y1")};p={x:+a.attr("x2"),y:+a.attr("y2")};var m=h.x-p.x;var _=h.y-p.y;v=Math.atan2(_,m);g=v+Math.PI;if(f&&d){if(f+d>Math.sqrt(m*m+_*_)){E();return}}if(f){if(f*f>m*m+_*_){E();return}var y=f*Math.cos(v);var b=f*Math.sin(v);p.x+=y;p.y+=b;a.attr({x2:p.x,y2:p.y})}if(d){if(d*d>m*m+_*_){E();return}var x=d*Math.cos(v);var w=d*Math.sin(v);h.x-=x;h.y-=w;a.attr({x1:h.x,y1:h.y})}}else if(o.nodeName==="path"){var A=o.getTotalLength();var T="";if(A<f+d){E();return}var k=o.getPointAtLength(0);var M=o.getPointAtLength(.1);v=Math.atan2(k.y-M.y,k.x-M.x);h=o.getPointAtLength(Math.min(d,A));T="0px,"+d+"px,";var S=o.getPointAtLength(A);var C=o.getPointAtLength(A-.1);g=Math.atan2(S.y-C.y,S.x-C.x);p=o.getPointAtLength(Math.max(0,A-f));var L=T?d+f:f;T+=A-L+"px,"+A+"px";a.style("stroke-dasharray",T)}function E(){a.style("stroke-dasharray","0px,100px")}function D(e,t,r,n){if(!e.path)return;if(e.noRotate)r=0;O.select(o.parentNode).append("path").attr({class:a.attr("class"),d:e.path,transform:N(t.x,t.y)+z(r*180/Math.PI)+R(n)}).style({fill:P.rgb(i.arrowcolor),"stroke-width":0})}if(c)D(n,h,v,l);if(u)D(r,p,g,s)}},{"../../lib":230,"../color":100,"./arrow_paths":82,"@plotly/d3":11}],91:[function(e,t,r){"use strict";var n=e("./draw");var a=e("./click");t.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:n.draw,drawOne:n.drawOne,drawRaw:n.drawRaw,hasClickToShow:a.hasClickToShow,onClick:a.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":289,"./attributes":83,"./calc_autorange":84,"./click":85,"./convert_coords":87,"./defaults":88,"./draw":89}],92:[function(e,t,r){"use strict";var n=e("../annotations/attributes");var a=e("../../plot_api/edit_types").overrideAll;var i=e("../../plot_api/plot_template").templatedArray;t.exports=a(i("annotation",{visible:n.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:n.xanchor,xshift:n.xshift,yanchor:n.yanchor,yshift:n.yshift,text:n.text,textangle:n.textangle,font:n.font,width:n.width,height:n.height,opacity:n.opacity,align:n.align,valign:n.valign,bgcolor:n.bgcolor,bordercolor:n.bordercolor,borderpad:n.borderpad,borderwidth:n.borderwidth,showarrow:n.showarrow,arrowcolor:n.arrowcolor,arrowhead:n.arrowhead,startarrowhead:n.startarrowhead,arrowside:n.arrowside,arrowsize:n.arrowsize,startarrowsize:n.startarrowsize,arrowwidth:n.arrowwidth,standoff:n.standoff,startstandoff:n.startstandoff,hovertext:n.hovertext,hoverlabel:n.hoverlabel,captureevents:n.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":258,"../../plot_api/plot_template":265,"../annotations/attributes":83}],93:[function(e,t,r){"use strict";var o=e("../../lib");var s=e("../../plots/cartesian/axes");t.exports=function e(t){var r=t.fullSceneLayout;var n=r.annotations;for(var a=0;a<n.length;a++){i(n[a],t)}t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function i(e,t){var r=t.fullSceneLayout;var n=r.domain;var a=t.fullLayout._size;var i={pdata:null,type:"linear",autorange:false,range:[-Infinity,Infinity]};e._xa={};o.extendFlat(e._xa,i);s.setConvert(e._xa);e._xa._offset=a.l+n.x[0]*a.w;e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*a.w*(n.x[1]-n.x[0])};e._ya={};o.extendFlat(e._ya,i);s.setConvert(e._ya);e._ya._offset=a.t+(1-n.y[1])*a.h;e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*a.h*(n.y[1]-n.y[0])}}},{"../../lib":230,"../../plots/cartesian/axes":276}],94:[function(e,t,r){"use strict";var s=e("../../lib");var l=e("../../plots/cartesian/axes");var a=e("../../plots/array_container_defaults");var c=e("../annotations/common_defaults");var u=e("./attributes");t.exports=function e(t,r,n){a(t,r,{name:"annotations",handleItemDefaults:i,fullLayout:n.fullLayout})};function i(r,n,a,e){function i(e,t){return s.coerce(r,n,u,e,t)}function t(e){var t=e+"axis";var r={_fullLayout:{}};r._fullLayout[t]=a[t];return l.coercePosition(n,r,i,e,e,.5)}var o=i("visible");if(!o)return;c(r,n,e.fullLayout,i);t("x");t("y");t("z");s.noneOrAll(r,n,["x","y","z"]);n.xref="x";n.yref="y";n.zref="z";i("xanchor");i("yanchor");i("xshift");i("yshift");if(n.showarrow){n.axref="pixel";n.ayref="pixel";i("ax",-10);i("ay",-30);s.noneOrAll(r,n,["ax","ay"])}}},{"../../lib":230,"../../plots/array_container_defaults":271,"../../plots/cartesian/axes":276,"../annotations/common_defaults":86,"./attributes":92}],95:[function(e,t,r){"use strict";var h=e("../annotations/draw").drawRaw;var p=e("../../plots/gl3d/project");var v=["x","y","z"];t.exports=function e(t){var r=t.fullSceneLayout;var n=t.dataScale;var a=r.annotations;for(var i=0;i<a.length;i++){var o=a[i];var s=false;for(var l=0;l<3;l++){var c=v[l];var u=o[c];var f=r[c+"axis"];var d=f.r2fraction(u);if(d<0||d>1){s=true;break}}if(s){t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+i+'"]').remove()}else{o._pdata=p(t.glplot.cameraParams,[r.xaxis.r2l(o.x)*n[0],r.yaxis.r2l(o.y)*n[1],r.zaxis.r2l(o.z)*n[2]]);h(t.graphDiv,o,i,t.id,o._xa,o._ya)}}}},{"../../plots/gl3d/project":308,"../annotations/draw":89}],96:[function(e,t,r){"use strict";var s=e("../../registry");var l=e("../../lib");t.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:n,convert:e("./convert"),draw:e("./draw")};function n(e,t){var r=s.subplotsRegistry.gl3d;if(!r)return;var n=r.attrRegex;var a=Object.keys(e);for(var i=0;i<a.length;i++){var o=a[i];if(n.test(o)&&(e[o].annotations||[]).length){l.pushUnique(t._basePlotModules,r);l.pushUnique(t._subplots.gl3d,o)}}}},{"../../lib":230,"../../registry":313,"./attributes":92,"./convert":93,"./defaults":94,"./draw":95}],97:[function(e,t,r){"use strict";t.exports=e("world-calendars/dist/main");e("world-calendars/dist/plus");e("world-calendars/dist/calendars/chinese");e("world-calendars/dist/calendars/coptic");e("world-calendars/dist/calendars/discworld");e("world-calendars/dist/calendars/ethiopian");e("world-calendars/dist/calendars/hebrew");e("world-calendars/dist/calendars/islamic");e("world-calendars/dist/calendars/julian");e("world-calendars/dist/calendars/mayan");e("world-calendars/dist/calendars/nanakshahi");e("world-calendars/dist/calendars/nepali");e("world-calendars/dist/calendars/persian");e("world-calendars/dist/calendars/taiwan");e("world-calendars/dist/calendars/thai");e("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":66,"world-calendars/dist/calendars/coptic":67,"world-calendars/dist/calendars/discworld":68,"world-calendars/dist/calendars/ethiopian":69,"world-calendars/dist/calendars/hebrew":70,"world-calendars/dist/calendars/islamic":71,"world-calendars/dist/calendars/julian":72,"world-calendars/dist/calendars/mayan":73,"world-calendars/dist/calendars/nanakshahi":74,"world-calendars/dist/calendars/nepali":75,"world-calendars/dist/calendars/persian":76,"world-calendars/dist/calendars/taiwan":77,"world-calendars/dist/calendars/thai":78,"world-calendars/dist/calendars/ummalqura":79,"world-calendars/dist/main":80,"world-calendars/dist/plus":81}],98:[function(e,t,r){"use strict";var n=e("./calendars");var i=e("../../lib");var a=e("../../constants/numerical");var f=a.EPOCHJD;var d=a.ONEDAY;var o={valType:"enumerated",values:Object.keys(n.calendars),editType:"calc",dflt:"gregorian"};var s=function(e,t,r,n){var a={};a[r]=o;return i.coerce(e,t,a,r,n)};var l=function(e,t,r,n){for(var a=0;a<r.length;a++){s(e,t,r[a]+"calendar",n.calendar)}};var c={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"};var u={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"};var h={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]};var p="##";var v={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:p,w:p,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function g(e,t,r){var n=Math.floor((t+.05)/d)+f;var a=_(r).fromJD(n);var i=0;var o,s,l,c,u;while((i=e.indexOf("%",i))!==-1){o=e.charAt(i+1);if(o==="0"||o==="-"||o==="_"){l=3;s=e.charAt(i+2);if(o==="_")o="-"}else{s=o;o="0";l=2}c=v[s];if(!c){i+=l}else{if(c===p)u=p;else u=a.formatDate(c[o]);e=e.substr(0,i)+u+e.substr(i+l);i+=u.length}}return e}var m={};function _(e){var t=m[e];if(t)return t;t=m[e]=n.instance(e);return t}function y(e){return i.extendFlat({},o,{description:e})}function b(e){return"Sets the calendar system to use with `"+e+"` date data."}var x={xcalendar:y(b("x"))};var w=i.extendFlat({},x,{ycalendar:y(b("y"))});var A=i.extendFlat({},w,{zcalendar:y(b("z"))});var T=y(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));t.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:w,bar:w,box:w,heatmap:w,contour:w,histogram:w,histogram2d:w,histogram2dcontour:w,scatter3d:A,surface:A,mesh3d:A,scattergl:w,ohlc:x,candlestick:x},layout:{calendar:y(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:T},yaxis:{calendar:T},scene:{xaxis:{calendar:T},yaxis:{calendar:T},zaxis:{calendar:T}},polar:{radialaxis:{calendar:T}}},transforms:{filter:{valuecalendar:y(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:y(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:o,handleDefaults:s,handleTraceDefaults:l,CANONICAL_SUNDAY:u,CANONICAL_TICK:c,DFLTRANGE:h,getCal:_,worldCalFmt:g}},{"../../constants/numerical":210,"../../lib":230,"./calendars":97}],99:[function(e,t,r){"use strict";r.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];r.defaultLine="#444";r.lightLine="#eee";r.background="#fff";r.borderLine="#BEC8D9";r.lightFraction=100*(14-4)/(15-4)},{}],100:[function(e,t,r){"use strict";var o=e("tinycolor2");var s=e("fast-isnumeric");var l=e("../../lib/array").isTypedArray;var c=t.exports={};var n=e("./attributes");c.defaults=n.defaults;var i=c.defaultLine=n.defaultLine;c.lightLine=n.lightLine;var u=c.background=n.background;c.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"};c.rgb=function(e){return c.tinyRGB(o(e))};c.opacity=function(e){return e?o(e).getAlpha():0};c.addOpacity=function(e,t){var r=o(e).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+t+")"};c.combine=function(e,t){var r=o(e).toRgb();if(r.a===1)return o(e).toRgbString();var n=o(t||u).toRgb();var a=n.a===1?n:{r:255*(1-n.a)+n.r*n.a,g:255*(1-n.a)+n.g*n.a,b:255*(1-n.a)+n.b*n.a};var i={r:a.r*(1-r.a)+r.r*r.a,g:a.g*(1-r.a)+r.g*r.a,b:a.b*(1-r.a)+r.b*r.a};return o(i).toRgbString()};c.contrast=function(e,t,r){var n=o(e);if(n.getAlpha()!==1)n=o(c.combine(e,u));var a=n.isDark()?t?n.lighten(t):u:r?n.darken(r):i;return a.toString()};c.stroke=function(e,t){var r=o(t);e.style({stroke:c.tinyRGB(r),"stroke-opacity":r.getAlpha()})};c.fill=function(e,t){var r=o(t);e.style({fill:c.tinyRGB(r),"fill-opacity":r.getAlpha()})};c.clean=function(e){if(!e||typeof e!=="object")return;var t=Object.keys(e);var r,n,a,i;for(r=0;r<t.length;r++){a=t[r];i=e[a];if(a.substr(a.length-5)==="color"){if(Array.isArray(i)){for(n=0;n<i.length;n++)i[n]=f(i[n])}else e[a]=f(i)}else if(a.substr(a.length-10)==="colorscale"&&Array.isArray(i)){for(n=0;n<i.length;n++){if(Array.isArray(i[n]))i[n][1]=f(i[n][1])}}else if(Array.isArray(i)){var o=i[0];if(!Array.isArray(o)&&o&&typeof o==="object"){for(n=0;n<i.length;n++)c.clean(i[n])}}else if(i&&typeof i==="object"&&!l(i))c.clean(i)}};function f(e){if(s(e)||typeof e!=="string")return e;var t=e.trim();if(t.substr(0,3)!=="rgb")return e;var r=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return e;var n=r[1].trim().split(/\s*[\s,]\s*/);var a=t.charAt(3)==="a"&&n.length===4;if(!a&&n.length!==3)return e;for(var i=0;i<n.length;i++){if(!n[i].length)return e;n[i]=Number(n[i]);if(!(n[i]>=0)){return e}if(i===3){if(n[i]>1)n[i]=1}else if(n[i]>=1){return e}}var o=Math.round(n[0]*255)+", "+Math.round(n[1]*255)+", "+Math.round(n[2]*255);if(a)return"rgba("+o+", "+n[3]+")";return"rgb("+o+")"}},{"../../lib/array":216,"./attributes":99,"fast-isnumeric":15,tinycolor2:65}],101:[function(e,t,r){"use strict";var n=e("../../plots/cartesian/layout_attributes");var a=e("../../plots/font_attributes");var i=e("../../lib/extend").extendFlat;var o=e("../../plot_api/edit_types").overrideAll;t.exports=o({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:n.linecolor,outlinewidth:n.linewidth,bordercolor:n.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:i({},n.ticks,{dflt:""}),ticklabeloverflow:i({},n.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside bottom","inside bottom"],dflt:"outside"},ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,tickfont:a({}),tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,tickprefix:n.tickprefix,showtickprefix:n.showtickprefix,ticksuffix:n.ticksuffix,showticksuffix:n.showticksuffix,separatethousands:n.separatethousands,exponentformat:n.exponentformat,minexponent:n.minexponent,showexponent:n.showexponent,title:{text:{valType:"string"},font:a({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:a({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":224,"../../plot_api/edit_types":258,"../../plots/cartesian/layout_attributes":291,"../../plots/font_attributes":305}],102:[function(e,t,r){"use strict";t.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],103:[function(e,t,r){"use strict";var p=e("../../lib");var v=e("../../plot_api/plot_template");var g=e("../../plots/cartesian/tick_value_defaults");var m=e("../../plots/cartesian/tick_mark_defaults");var _=e("../../plots/cartesian/tick_label_defaults");var y=e("./attributes");t.exports=function e(t,r,n){var a=v.newContainer(r,"colorbar");var i=t.colorbar||{};function o(e,t){return p.coerce(i,a,y,e,t)}var s=o("thicknessmode");o("thickness",s==="fraction"?30/(n.width-n.margin.l-n.margin.r):30);var l=o("lenmode");o("len",l==="fraction"?1:n.height-n.margin.t-n.margin.b);o("x");o("xanchor");o("xpad");o("y");o("yanchor");o("ypad");p.noneOrAll(i,a,["x","y"]);o("outlinecolor");o("outlinewidth");o("bordercolor");o("borderwidth");o("bgcolor");var c=o("ticklabelposition");o("ticklabeloverflow",c.indexOf("inside")!==-1?"hide past domain":"hide past div");g(i,a,o,"linear");var u=n.font;var f={outerTicks:false,font:u};if(c.indexOf("inside")!==-1){f.bgColor="black"}_(i,a,o,"linear",f);m(i,a,o,"linear",f);o("title.text",n._dfltTitle.colorbar);var d=a.tickfont;var h=p.extendFlat({},d,{color:u.color,size:p.bigFont(d.size)});p.coerceFont(o,"title.font",h);o("title.side")}},{"../../lib":230,"../../plot_api/plot_template":265,"../../plots/cartesian/tick_label_defaults":298,"../../plots/cartesian/tick_mark_defaults":299,"../../plots/cartesian/tick_value_defaults":300,"./attributes":101}],104:[function(e,t,r){"use strict";var U=e("@plotly/d3");var V=e("tinycolor2");var q=e("../../plots/plots");var c=e("../../registry");var Y=e("../../plots/cartesian/axes");var u=e("../dragelement");var G=e("../../lib");var W=G.strTranslate;var X=e("../../lib/extend").extendFlat;var f=e("../../lib/setcursor");var Z=e("../drawing");var J=e("../color");var $=e("../titles");var Q=e("../../lib/svg_text_utils");var y=e("../colorscale/helpers").flipScale;var l=e("../../plots/cartesian/axis_defaults");var d=e("../../plots/cartesian/position_defaults");var h=e("../../plots/cartesian/layout_attributes");var n=e("../../constants/alignment");var K=n.LINE_SPACING;var ee=n.FROM_TL;var te=n.FROM_BR;var re=e("./constants").cn;function a(n){var e=n._fullLayout;var t=e._infolayer.selectAll("g."+re.colorbar).data(i(n),function(e){return e._id});t.enter().append("g").attr("class",function(e){return e._id}).classed(re.colorbar,true);t.each(function(e){var t=U.select(this);G.ensureSingle(t,"rect",re.cbbg);G.ensureSingle(t,"g",re.cbfills);G.ensureSingle(t,"g",re.cblines);G.ensureSingle(t,"g",re.cbaxis,function(e){e.classed(re.crisp,true)});G.ensureSingle(t,"g",re.cbtitleunshift,function(e){e.append("g").classed(re.cbtitle,true)});G.ensureSingle(t,"rect",re.cboutline);var r=o(t,e,n);if(r&&r.then)(n._promises||[]).push(r);if(n._context.edits.colorbarPosition){s(t,e,n)}});t.exit().each(function(e){q.autoMargin(n,e._id)}).remove();t.order()}function i(e){var t=e._fullLayout;var r=e.calcdata;var n=[];var a;var i;var o;var s;function l(e){return X(e,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function c(){if(typeof s.calc==="function"){s.calc(e,o,a)}else{a._fillgradient=i.reversescale?y(i.colorscale):i.colorscale;a._zrange=[i[s.min],i[s.max]]}}for(var u=0;u<r.length;u++){var f=r[u];o=f[0].trace;var d=o._module.colorbar;if(o.visible===true&&d){var h=Array.isArray(d);var p=h?d:[d];for(var v=0;v<p.length;v++){s=p[v];var g=s.container;i=g?o[g]:o;if(i&&i.showscale){a=l(i.colorbar);a._id="cb"+o.uid+(h&&g?"-"+g:"");a._traceIndex=o.index;a._propPrefix=(g?g+".":"")+"colorbar.";a._meta=o._meta;c();n.push(a)}}}}for(var m in t._colorAxes){i=t[m];if(i.showscale){var _=t._colorAxes[m];a=l(i.colorbar);a._id="cb"+m;a._propPrefix=m+".colorbar.";a._meta=t._meta;s={min:"cmin",max:"cmax"};if(_[0]!=="heatmap"){o=_[1];s.calc=o._module.colorbar.calc}c();n.push(a)}}return n}function o(d,h,p){var a=p._fullLayout;var v=a._size;var e=h._fillcolor;var g=h._line;var t=h.title;var m=t.side;var _=h._zrange||U.extent((typeof e==="function"?e:g.color).domain());var y=typeof g.color==="function"?g.color:function(){return g.color};var b=typeof e==="function"?e:function(){return e};var r=h._levels;var n=ne(p,h,_);var x=n.fill;var w=n.line;var A=Math.round(h.thickness*(h.thicknessmode==="fraction"?v.w:1));var i=A/v.w;var o=Math.round(h.len*(h.lenmode==="fraction"?v.h:1));var s=o/v.h;var l=h.xpad/v.w;var T=(h.borderwidth+h.outlinewidth)/2;var c=h.ypad/v.h;var k=Math.round(h.x*v.w+h.xpad);var u=h.x-i*({middle:.5,right:1}[h.xanchor]||0);var f=h.y+s*(({top:-.5,bottom:.5}[h.yanchor]||0)-.5);var M=Math.round(v.h*(1-f));var S=M-o;h._lenFrac=s;h._thickFrac=i;h._xLeftFrac=u;h._yBottomFrac=f;var C=h._axis=ae(p,h,_);C.position=h.x+l+i;if(["top","bottom"].indexOf(m)!==-1){C.title.side=m;C.titlex=h.x+l;C.titley=f+(t.side==="top"?s-c:c)}if(g.color&&h.tickmode==="auto"){C.tickmode="linear";C.tick0=r.start;var L=r.size;var E=G.constrain((M-S)/50,4,15)+1;var D=(_[1]-_[0])/((h.nticks||E)*L);if(D>1){var O=Math.pow(10,Math.floor(Math.log(D)/Math.LN10));L*=O*G.roundUp(D/O,[2,5,10]);if((Math.abs(r.start)/r.size+1e-6)%1<2e-6){C.tick0=0}}C.dtick=L}C.domain=[f+c,f+s-c];C.setScale();d.attr("transform",W(Math.round(v.l),Math.round(v.t)));var P=d.select("."+re.cbtitleunshift).attr("transform",W(-Math.round(v.l),-Math.round(v.t)));var I=d.select("."+re.cbaxis);var R;var z=0;function N(e,t){var r={propContainer:C,propName:h._propPrefix+"title",traceIndex:h._traceIndex,_meta:h._meta,placeholder:a._dfltTitle.colorbar,containerGroup:d.select("."+re.cbtitle)};var n=e.charAt(0)==="h"?e.substr(1):"h"+e;d.selectAll("."+n+",."+n+"-math-group").remove();$.draw(p,e,X(r,t||{}))}function F(){if(["top","bottom"].indexOf(m)!==-1){var e=v.l+(h.x+l)*v.w;var t=C.title.font.size;var r;if(m==="top"){r=(1-(f+s-c))*v.h+v.t+3+t*.75}else{r=(1-(f+c))*v.h+v.t-3-t*.25}N(C._id+"title",{attributes:{x:e,y:r,"text-anchor":"start"}})}}function j(){if(["top","bottom"].indexOf(m)===-1){var e=C.title.font.size;var t=C._offset+C._length/2;var r=v.l+(C.position||0)*v.w+(C.side==="right"?10+e*(C.showticklabels?1:.5):-10-e*(C.showticklabels?.5:0));N("h"+C._id+"title",{avoid:{selection:U.select(p).selectAll("g."+C._id+"tick"),side:m,offsetLeft:v.l,offsetTop:0,maxShift:a.width},attributes:{x:r,y:t,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}function B(){if(["top","bottom"].indexOf(m)!==-1){var e=d.select("."+re.cbtitle);var t=e.select("text");var r=[-h.outlinewidth/2,h.outlinewidth/2];var n=e.select(".h"+C._id+"title-math-group").node();var a=15.6;if(t.node()){a=parseInt(t.node().style.fontSize,10)*K}if(n){z=Z.bBox(n).height;if(z>a){r[1]-=(z-a)/2}}else if(t.node()&&!t.classed(re.jsPlaceholder)){z=Z.bBox(t.node()).height}if(z){z+=5;if(m==="top"){C.domain[1]-=z/v.h;r[1]*=-1}else{C.domain[0]+=z/v.h;var i=Q.lineCount(t);r[1]+=(1-i)*a}e.attr("transform",W(r[0],r[1]));C.setScale()}}d.selectAll("."+re.cbfills+",."+re.cblines).attr("transform",W(0,Math.round(v.h*(1-C.domain[1]))));I.attr("transform",W(0,Math.round(-v.t)));var o=d.select("."+re.cbfills).selectAll("rect."+re.cbfill).attr("style","").data(x);o.enter().append("rect").classed(re.cbfill,true).style("stroke","none");o.exit().remove();var s=_.map(C.c2p).map(Math.round).sort(function(e,t){return e-t});o.each(function(e,t){var r=[t===0?_[0]:(x[t]+x[t-1])/2,t===x.length-1?_[1]:(x[t]+x[t+1])/2].map(C.c2p).map(Math.round);r[1]=G.constrain(r[1]+(r[1]>r[0])?1:-1,s[0],s[1]);var n=U.select(this).attr({x:k,width:Math.max(A,2),y:U.min(r),height:Math.max(U.max(r)-U.min(r),2)});if(h._fillgradient){Z.gradient(n,p,h._id,"vertical",h._fillgradient,"fill")}else{var a=b(e).replace("e-","");n.attr("fill",V(a).toHexString())}});var l=d.select("."+re.cblines).selectAll("path."+re.cbline).data(g.color&&g.width?w:[]);l.enter().append("path").classed(re.cbline,true);l.exit().remove();l.each(function(e){U.select(this).attr("d","M"+k+","+(Math.round(C.c2p(e))+g.width/2%1)+"h"+A).call(Z.lineGroupStyle,g.width,y(e),g.dash)});I.selectAll("g."+C._id+"tick,path").remove();var c=k+A+(h.outlinewidth||0)/2-(h.ticks==="outside"?1:0);var u=Y.calcTicks(C);var f=Y.getTickSigns(C)[2];Y.drawTicks(p,C,{vals:C.ticks==="inside"?Y.clipEnds(C,u):u,layer:I,path:Y.makeTickPath(C,c,f),transFn:Y.makeTransTickFn(C)});return Y.drawLabels(p,C,{vals:u,layer:I,transFn:Y.makeTransTickLabelFn(C),labelFns:Y.makeLabelFns(C,c)})}function H(){var e=A+h.outlinewidth/2;if(C.ticklabelposition.indexOf("inside")===-1){e+=Z.bBox(I.node()).width}R=P.select("text");if(R.node()&&!R.classed(re.jsPlaceholder)){var t=P.select(".h"+C._id+"title-math-group").node();var r;if(t&&["top","bottom"].indexOf(m)!==-1){r=Z.bBox(t).width}else{r=Z.bBox(P.node()).right-k-v.l}e=Math.max(e,r)}var n=2*h.xpad+e+h.borderwidth+h.outlinewidth/2;var a=M-S;d.select("."+re.cbbg).attr({x:k-h.xpad-(h.borderwidth+h.outlinewidth)/2,y:S-T,width:Math.max(n,2),height:Math.max(a+2*T,2)}).call(J.fill,h.bgcolor).call(J.stroke,h.bordercolor).style("stroke-width",h.borderwidth);d.selectAll("."+re.cboutline).attr({x:k,y:S+h.ypad+(m==="top"?z:0),width:Math.max(A,2),height:Math.max(a-2*h.ypad-z,2)}).call(J.stroke,h.outlinecolor).style({fill:"none","stroke-width":h.outlinewidth});var i=({center:.5,right:1}[h.xanchor]||0)*n;d.attr("transform",W(v.l-i,v.t));var o={};var s=ee[h.yanchor];var l=te[h.yanchor];if(h.lenmode==="pixels"){o.y=h.y;o.t=a*s;o.b=a*l}else{o.t=o.b=0;o.yt=h.y+h.len*s;o.yb=h.y-h.len*l}var c=ee[h.xanchor];var u=te[h.xanchor];if(h.thicknessmode==="pixels"){o.x=h.x;o.l=n*c;o.r=n*u}else{var f=n-A;o.l=f*c;o.r=f*u;o.xl=h.x-h.thickness*c;o.xr=h.x+h.thickness*u}q.autoMargin(p,h._id,o)}return G.syncOrAsync([q.previousPromises,F,B,j,q.previousPromises,H],p)}function s(n,a,t){var e=t._fullLayout;var i=e._size;var o,s,l;u.init({element:n.node(),gd:t,prepFn:function(){o=n.attr("transform");f(n)},moveFn:function(e,t){n.attr("transform",o+W(e,t));s=u.align(a._xLeftFrac+e/i.w,a._thickFrac,0,1,a.xanchor);l=u.align(a._yBottomFrac-t/i.h,a._lenFrac,0,1,a.yanchor);var r=u.getCursor(s,l,a.xanchor,a.yanchor);f(n,r)},doneFn:function(){f(n);if(s!==undefined&&l!==undefined){var e={};e[a._propPrefix+"x"]=s;e[a._propPrefix+"y"]=l;if(a._traceIndex!==undefined){c.call("_guiRestyle",t,e,a._traceIndex)}else{c.call("_guiRelayout",t,e)}}}})}function ne(e,t,r){var n=t._levels;var a=[];var i=[];var o;var s;var l=n.end+n.size/100;var c=n.size;var u=1.001*r[0]-.001*r[1];var f=1.001*r[1]-.001*r[0];for(s=0;s<1e5;s++){o=n.start+s*c;if(c>0?o>=l:o<=l)break;if(o>u&&o<f)a.push(o)}if(t._fillgradient){i=[0]}else if(typeof t._fillcolor==="function"){var d=t._filllevels;if(d){l=d.end+d.size/100;c=d.size;for(s=0;s<1e5;s++){o=d.start+s*c;if(c>0?o>=l:o<=l)break;if(o>r[0]&&o<r[1])i.push(o)}}else{i=a.map(function(e){return e-n.size/2});i.push(i[i.length-1]+n.size)}}else if(t._fillcolor&&typeof t._fillcolor==="string"){i=[0]}if(n.size<0){a.reverse();i.reverse()}return{line:a,fill:i}}function ae(e,t,r){var n=e._fullLayout;var a={type:"linear",range:r,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:true,anchor:"free",side:"right",position:1};var i={type:"linear",_id:"y"+t._id};var o={letter:"y",font:n.font,noHover:true,noTickson:true,noTicklabelmode:true,calendar:n.calendar};function s(e,t){return G.coerce(a,i,h,e,t)}l(a,i,s,o,n);d(a,i,s,o);return i}t.exports={draw:a}},{"../../constants/alignment":205,"../../lib":230,"../../lib/extend":224,"../../lib/setcursor":250,"../../lib/svg_text_utils":252,"../../plots/cartesian/axes":276,"../../plots/cartesian/axis_defaults":278,"../../plots/cartesian/layout_attributes":291,"../../plots/cartesian/position_defaults":294,"../../plots/plots":311,"../../registry":313,"../color":100,"../colorscale/helpers":111,"../dragelement":119,"../drawing":122,"../titles":198,"./constants":102,"@plotly/d3":11,tinycolor2:65}],105:[function(e,t,r){"use strict";var n=e("../../lib");t.exports=function e(t){return n.isPlainObject(t.colorbar)}},{"../../lib":230}],106:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"colorbar",attributes:e("./attributes"),supplyDefaults:e("./defaults"),draw:e("./draw").draw,hasColorbar:e("./has_colorbar")}},{"./attributes":101,"./defaults":103,"./draw":104,"./has_colorbar":105}],107:[function(e,t,r){"use strict";var T=e("../colorbar/attributes");var k=e("../../lib/regex").counter;var M=e("./scales.js").scales;var n=Object.keys(M);function S(e){return"`"+e+"`"}t.exports=function e(t,r){t=t||"";r=r||{};var n=r.cLetter||"c";var a="onlyIfNumerical"in r?r.onlyIfNumerical:Boolean(t);var i="noScale"in r?r.noScale:t==="marker.line";var o="showScaleDflt"in r?r.showScaleDflt:n==="z";var s=typeof r.colorscaleDflt==="string"?M[r.colorscaleDflt]:null;var l=r.editTypeOverride||"";var c=t?t+".":"";var u,f;if("colorAttr"in r){u=r.colorAttr;f=r.colorAttr}else{u={z:"z",c:"color"}[n];f="in "+S(c+u)}var d=a?" Has an effect only if "+f+"is set to a numerical array.":"";var h=n+"auto";var p=n+"min";var v=n+"max";var g=n+"mid";var m=S(c+h);var _=S(c+p);var y=S(c+v);var b=_+" and "+y;var x={};x[p]=x[v]=undefined;var w={};w[h]=false;var A={};if(u==="color"){A.color={valType:"color",arrayOk:true,editType:l||"style"};if(r.anim){A.color.anim=true}}A[h]={valType:"boolean",dflt:true,editType:"calc",impliedEdits:x};A[p]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:w};A[v]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:w};A[g]={valType:"number",dflt:null,editType:"calc",impliedEdits:x};A.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:false}};A.autocolorscale={valType:"boolean",dflt:r.autoColorDflt===false?false:true,editType:"calc",impliedEdits:{colorscale:undefined}};A.reversescale={valType:"boolean",dflt:false,editType:"plot"};if(!i){A.showscale={valType:"boolean",dflt:o,editType:"calc"};A.colorbar=T}if(!r.noColorAxis){A.coloraxis={valType:"subplotid",regex:k("coloraxis"),dflt:null,editType:"calc"}}return A}},{"../../lib/regex":246,"../colorbar/attributes":101,"./scales.js":115}],108:[function(e,t,r){"use strict";var g=e("fast-isnumeric");var m=e("../../lib");var _=e("./helpers").extractOpts;t.exports=function e(t,r,n){var a=t._fullLayout;var i=n.vals;var o=n.containerStr;var s=o?m.nestedProperty(r,o).get():r;var l=_(s);var c=l.auto!==false;var u=l.min;var f=l.max;var d=l.mid;var h=function(){return m.aggNums(Math.min,null,i)};var p=function(){return m.aggNums(Math.max,null,i)};if(u===undefined){u=h()}else if(c){if(s._colorAx&&g(u)){u=Math.min(u,h())}else{u=h()}}if(f===undefined){f=p()}else if(c){if(s._colorAx&&g(f)){f=Math.max(f,p())}else{f=p()}}if(c&&d!==undefined){if(f-d>d-u){u=d-(f-d)}else if(f-d<d-u){f=d+(d-u)}}if(u===f){u-=.5;f+=.5}l._sync("min",u);l._sync("max",f);if(l.autocolorscale){var v;if(u*f<0)v=a.colorscale.diverging;else if(u>=0)v=a.colorscale.sequential;else v=a.colorscale.sequentialminus;l._sync("colorscale",v)}}},{"../../lib":230,"./helpers":111,"fast-isnumeric":15}],109:[function(e,t,r){"use strict";var u=e("../../lib");var f=e("./helpers").hasColorscale;var d=e("./helpers").extractOpts;t.exports=function e(t,i){function o(e,t){var r=e["_"+t];if(r!==undefined){e[t]=r}}function r(e,t){var r=t.container?u.nestedProperty(e,t.container).get():e;if(r){if(r.coloraxis){r._colorAx=i[r.coloraxis]}else{var n=d(r);var a=n.auto;if(a||n.min===undefined){o(r,t.min)}if(a||n.max===undefined){o(r,t.max)}if(n.autocolorscale){o(r,"colorscale")}}}}for(var n=0;n<t.length;n++){var a=t[n];var s=a._module.colorbar;if(s){if(Array.isArray(s)){for(var l=0;l<s.length;l++){r(a,s[l])}}else{r(a,s)}}if(f(a,"marker.line")){r(a,{container:"marker.line",min:"cmin",max:"cmax"})}}for(var c in i._colorAxes){r(i[c],{min:"cmin",max:"cmax"})}}},{"../../lib":230,"./helpers":111}],110:[function(e,t,r){"use strict";var M=e("fast-isnumeric");var S=e("../../lib");var C=e("../colorbar/has_colorbar");var L=e("../colorbar/defaults");var E=e("./scales").isValid;var D=e("../../registry").traceIs;function O(e,t){var r=t.slice(0,t.length-1);return t?S.nestedProperty(e,r).get()||{}:e}t.exports=function e(t,r,n,a,i){var o=i.prefix;var s=i.cLetter;var l="_module"in r;var c=O(t,o);var u=O(r,o);var f=O(r._template||{},o)||{};var d=function(){delete t.coloraxis;delete r.coloraxis;return e(t,r,n,a,i)};if(l){var h=n._colorAxes||{};var p=a(o+"coloraxis");if(p){var v=D(r,"contour")&&S.nestedProperty(r,"contours.coloring").get()||"heatmap";var g=h[p];if(g){g[2].push(d);if(g[0]!==v){g[0]=false;S.warn(["Ignoring coloraxis:",p,"setting","as it is linked to incompatible colorscales."].join(" "))}}else{h[p]=[v,r,[d]]}return}}var m=c[s+"min"];var _=c[s+"max"];var y=M(m)&&M(_)&&m<_;var b=a(o+s+"auto",!y);if(b){a(o+s+"mid")}else{a(o+s+"min");a(o+s+"max")}var x=c.colorscale;var w=f.colorscale;var A;if(x!==undefined)A=!E(x);if(w!==undefined)A=!E(w);a(o+"autocolorscale",A);a(o+"colorscale");a(o+"reversescale");if(o!=="marker.line."){var T;if(o&&l)T=C(c);var k=a(o+"showscale",T);if(k){if(o&&f)u._template=f;L(c,u,n)}}}},{"../../lib":230,"../../registry":313,"../colorbar/defaults":103,"../colorbar/has_colorbar":105,"./scales":115,"fast-isnumeric":15}],111:[function(e,t,r){"use strict";var d=e("@plotly/d3");var h=e("tinycolor2");var p=e("fast-isnumeric");var s=e("../../lib");var v=e("../color");var l=e("./scales").isValid;function n(e,t,r){var n=t?s.nestedProperty(e,t).get()||{}:e;var a=n[r||"color"];var i=false;if(s.isArrayOrTypedArray(a)){for(var o=0;o<a.length;o++){if(p(a[o])){i=true;break}}}return s.isPlainObject(n)&&(i||n.showscale===true||p(n.cmin)&&p(n.cmax)||l(n.colorscale)||s.isPlainObject(n.colorbar))}var c=["showscale","autocolorscale","colorscale","reversescale","colorbar"];var u=["min","max","mid","auto"];function f(e){var t=e._colorAx;var n=t?t:e;var r={};var a;var i,o;for(i=0;i<c.length;i++){o=c[i];r[o]=n[o]}if(t){a="c";for(i=0;i<u.length;i++){o=u[i];r[o]=n["c"+o]}}else{var s;for(i=0;i<u.length;i++){o=u[i];s="c"+o;if(s in n){r[o]=n[s];continue}s="z"+o;if(s in n){r[o]=n[s]}}a=s.charAt(0)}r._sync=function(e,t){var r=u.indexOf(e)!==-1?a+e:e;n[r]=n["_"+r]=t};return r}function a(e){var t=f(e);var r=t.min;var n=t.max;var a=t.reversescale?g(t.colorscale):t.colorscale;var i=a.length;var o=new Array(i);var s=new Array(i);for(var l=0;l<i;l++){var c=a[l];o[l]=r+c[0]*(n-r);s[l]=c[1]}return{domain:o,range:s}}function g(e){var t=e.length;var r=new Array(t);for(var n=t-1,a=0;n>=0;n--,a++){var i=e[n];r[a]=[1-i[0],i[1]]}return r}function i(e,t){t=t||{};var r=e.domain;var n=e.range;var a=n.length;var i=new Array(a);for(var o=0;o<a;o++){var s=h(n[o]).toRgb();i[o]=[s.r,s.g,s.b,s.a]}var l=d.scale.linear().domain(r).range(i).clamp(true);var c=t.noNumericCheck;var u=t.returnArray;var f;if(c&&u){f=l}else if(c){f=function(e){return m(l(e))}}else if(u){f=function(e){if(p(e))return l(e);else if(h(e).isValid())return e;else return v.defaultLine}}else{f=function(e){if(p(e))return m(l(e));else if(h(e).isValid())return e;else return v.defaultLine}}f.domain=l.domain;f.range=function(){return n};return f}function o(e,t){return i(a(e),t)}function m(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return h(t).toRgbString()}t.exports={hasColorscale:n,extractOpts:f,extractScale:a,flipScale:g,makeColorScaleFunc:i,makeColorScaleFuncFromTrace:o}},{"../../lib":230,"../color":100,"./scales":115,"@plotly/d3":11,"fast-isnumeric":15,tinycolor2:65}],112:[function(e,t,r){"use strict";var n=e("./scales");var a=e("./helpers");t.exports={moduleType:"component",name:"colorscale",attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),handleDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc"),scales:n.scales,defaultScale:n.defaultScale,getScale:n.get,isValidScale:n.isValid,hasColorscale:a.hasColorscale,extractOpts:a.extractOpts,extractScale:a.extractScale,flipScale:a.flipScale,makeColorScaleFunc:a.makeColorScaleFunc,makeColorScaleFuncFromTrace:a.makeColorScaleFuncFromTrace}},{"./attributes":107,"./calc":108,"./cross_trace_defaults":109,"./defaults":110,"./helpers":111,"./layout_attributes":113,"./layout_defaults":114,"./scales":115}],113:[function(e,t,r){"use strict";var n=e("../../lib/extend").extendFlat;var a=e("./attributes");var i=e("./scales").scales;var o="Note that `autocolorscale` must be true for this attribute to work.";t.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:i.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:i.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:i.RdBu,editType:"calc"}},coloraxis:n({_isSubplotObj:true,editType:"calc"},a("",{colorAttr:"corresponding trace color array(s)",noColorAxis:true,showScaleDflt:true}))}},{"../../lib/extend":224,"./attributes":107,"./scales":115}],114:[function(e,t,r){"use strict";var f=e("../../lib");var d=e("../../plot_api/plot_template");var h=e("./layout_attributes");var p=e("./defaults");t.exports=function e(r,n){function t(e,t){return f.coerce(r,n,h,e,t)}t("colorscale.sequential");t("colorscale.sequentialminus");t("colorscale.diverging");var a=n._colorAxes;var i,o;function s(e,t){return f.coerce(i,o,h.coloraxis,e,t)}for(var l in a){var c=a[l];if(c[0]){i=r[l]||{};o=d.newContainer(n,l,"coloraxis");o._name=l;p(i,o,n,s,{prefix:"",cLetter:"c"})}else{for(var u=0;u<c[2].length;u++){c[2][u]()}delete n._colorAxes[l]}}}},{"../../lib":230,"../../plot_api/plot_template":265,"./defaults":110,"./layout_attributes":113}],115:[function(e,t,r){"use strict";var a=e("tinycolor2");var n={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]};var i=n.RdBu;function o(t,r){if(!r)r=i;if(!t)return r;function e(){try{t=n[t]||JSON.parse(t)}catch(e){t=r}}if(typeof t==="string"){e();if(typeof t==="string")e()}if(!s(t))return r;return t}function s(e){var t=0;if(!Array.isArray(e)||e.length<2)return false;if(!e[0]||!e[e.length-1])return false;if(+e[0][0]!==0||+e[e.length-1][0]!==1)return false;for(var r=0;r<e.length;r++){var n=e[r];if(n.length!==2||+n[0]<t||!a(n[1]).isValid()){return false}t=+n[0]}return true}function l(e){if(n[e]!==undefined)return true;else return s(e)}t.exports={scales:n,defaultScale:i,get:o,isValid:l}},{tinycolor2:65}],116:[function(e,t,r){"use strict";t.exports=function e(t,r,n,a,i){var o=(t-n)/(a-n);var s=o+r/(a-n);var l=(o+s)/2;if(i==="left"||i==="bottom")return o;if(i==="center"||i==="middle")return l;if(i==="right"||i==="top")return s;if(o<2/3-l)return o;if(s>4/3-l)return s;return l}},{}],117:[function(e,t,r){"use strict";var i=e("../../lib");var o=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];t.exports=function e(t,r,n,a){if(n==="left")t=0;else if(n==="center")t=1;else if(n==="right")t=2;else t=i.constrain(Math.floor(t*3),0,2);if(a==="bottom")r=0;else if(a==="middle")r=1;else if(a==="top")r=2;else r=i.constrain(Math.floor(r*3),0,2);return o[r][t]}},{"../../lib":230}],118:[function(e,t,r){"use strict";r.selectMode=function(e){return e==="lasso"||e==="select"};r.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"};r.openMode=function(e){return e==="drawline"||e==="drawopenpath"};r.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"};r.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"};r.selectingOrDrawing=function(e){return r.freeMode(e)||r.rectMode(e)}},{}],119:[function(e,t,r){"use strict";var n=e("mouse-event-offset");var y=e("has-hover");var b=e("has-passive-events");var x=e("../../lib").removeElement;var w=e("../../plots/cartesian/constants");var A=t.exports={};A.align=e("./align");A.getCursor=e("./cursor");var a=e("./unhover");A.unhover=a.wrapped;A.unhoverRaw=a.raw;A.init=function e(o){var s=o.gd;var a=1;var i=s._context.doubleClickDelay;var l=o.element;var c,u,r,f,d,h,p,v;if(!s._mouseDownTime)s._mouseDownTime=0;l.style.pointerEvents="all";l.onmousedown=n;if(!b){l.ontouchstart=n}else{if(l._ontouchstart){l.removeEventListener("touchstart",l._ontouchstart)}l._ontouchstart=n;l.addEventListener("touchstart",n,{passive:false})}function t(e,t,r){if(Math.abs(e)<r)e=0;if(Math.abs(t)<r)t=0;return[e,t]}var g=o.clampFn||t;function n(e){s._dragged=false;s._dragging=true;var t=k(e);c=t[0];u=t[1];p=e.target;h=e;v=e.buttons===2||e.ctrlKey;if(typeof e.clientX==="undefined"&&typeof e.clientY==="undefined"){e.clientX=c;e.clientY=u}r=(new Date).getTime();if(r-s._mouseDownTime<i){a+=1}else{a=1;s._mouseDownTime=r}if(o.prepFn)o.prepFn(e,c,u);if(y&&!v){d=T();d.style.cursor=window.getComputedStyle(l).cursor}else if(!y){d=document;f=window.getComputedStyle(document.documentElement).cursor;document.documentElement.style.cursor=window.getComputedStyle(l).cursor}document.addEventListener("mouseup",_);document.addEventListener("touchend",_);if(o.dragmode!==false){e.preventDefault();document.addEventListener("mousemove",m);document.addEventListener("touchmove",m,{passive:false})}return}function m(e){e.preventDefault();var t=k(e);var r=o.minDrag||w.MINDRAG;var n=g(t[0]-c,t[1]-u,r);var a=n[0];var i=n[1];if(a||i){s._dragged=true;A.unhover(s,e)}if(s._dragged&&o.moveFn&&!v){s._dragdata={element:l,dx:a,dy:i};o.moveFn(a,i)}return}function _(t){delete s._dragdata;if(o.dragmode!==false){t.preventDefault();document.removeEventListener("mousemove",m);document.removeEventListener("touchmove",m)}document.removeEventListener("mouseup",_);document.removeEventListener("touchend",_);if(y){x(d)}else if(f){d.documentElement.style.cursor=f;f=null}if(!s._dragging){s._dragged=false;return}s._dragging=false;if((new Date).getTime()-s._mouseDownTime>i){a=Math.max(a-1,1)}if(s._dragged){if(o.doneFn)o.doneFn()}else{if(o.clickFn)o.clickFn(a,h);if(!v){var r;try{r=new MouseEvent("click",t)}catch(e){var n=k(t);r=document.createEvent("MouseEvents");r.initMouseEvent("click",t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,n[0],n[1],t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}p.dispatchEvent(r)}}s._dragging=false;s._dragged=false;return}};function T(){var e=document.createElement("div");e.className="dragcover";var t=e.style;t.position="fixed";t.left=0;t.right=0;t.top=0;t.bottom=0;t.zIndex=999999999;t.background="none";document.body.appendChild(e);return e}A.coverSlip=T;function k(e){return n(e.changedTouches?e.changedTouches[0]:e,document.body)}},{"../../lib":230,"../../plots/cartesian/constants":283,"./align":116,"./cursor":117,"./unhover":120,"has-hover":46,"has-passive-events":47,"mouse-event-offset":51}],120:[function(e,t,r){"use strict";var i=e("../../lib/events");var n=e("../../lib/throttle");var a=e("../../lib/dom").getGraphDiv;var o=e("../fx/constants");var s=t.exports={};s.wrapped=function(e,t,r){e=a(e);if(e._fullLayout){n.clear(e._fullLayout._uid+o.HOVERID)}s.raw(e,t,r)};s.raw=function e(t,r){var n=t._fullLayout;var a=t._hoverdata;if(!r)r={};if(r.target&&!t._dragged&&i.triggerHandler(t,"plotly_beforehover",r)===false){return}n._hoverlayer.selectAll("g").remove();n._hoverlayer.selectAll("line").remove();n._hoverlayer.selectAll("circle").remove();t._hoverdata=undefined;if(r.target&&a){t.emit("plotly_unhover",{event:r,points:a})}}},{"../../lib/dom":222,"../../lib/events":223,"../../lib/throttle":253,"../fx/constants":134}],121:[function(e,t,r){"use strict";r.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"};r.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:true,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:true,editType:"style"},fgcolor:{valType:"color",arrayOk:true,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:true,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:true,editType:"style"},editType:"style"}},{}],122:[function(e,t,r){"use strict";var S=e("@plotly/d3");var o=e("fast-isnumeric");var v=e("tinycolor2");var b=e("../../registry");var C=e("../color");var a=e("../colorscale");var L=e("../../lib");var f=L.strTranslate;var g=e("../../lib/svg_text_utils");var n=e("../../constants/xmlns_namespaces");var i=e("../../constants/alignment");var d=i.LINE_SPACING;var x=e("../../constants/interactions").DESELECTDIM;var s=e("../../traces/scatter/subtypes");var l=e("../../traces/scatter/make_bubble_size_func");var m=e("../../components/fx/helpers").appendArrayPointValue;var E=t.exports={};E.font=function(e,t,r,n){if(L.isPlainObject(t)){n=t.color;r=t.size;t=t.family}if(t)e.style("font-family",t);if(r+1)e.style("font-size",r+"px");if(n)e.call(C.fill,n)};E.setPosition=function(e,t,r){e.attr("x",t).attr("y",r)};E.setSize=function(e,t,r){e.attr("width",t).attr("height",r)};E.setRect=function(e,t,r,n,a){e.call(E.setPosition,t,r).call(E.setSize,n,a)};E.translatePoint=function(e,t,r,n){var a=r.c2p(e.x);var i=n.c2p(e.y);if(o(a)&&o(i)&&t.node()){if(t.node().nodeName==="text"){t.attr("x",a).attr("y",i)}else{t.attr("transform",f(a,i))}}else{return false}return true};E.translatePoints=function(e,r,n){e.each(function(e){var t=S.select(this);E.translatePoint(e,t,r,n)})};E.hideOutsideRangePoint=function(e,t,r,n,a,i){t.attr("display",r.isPtWithinRange(e,a)&&n.isPtWithinRange(e,i)?null:"none")};E.hideOutsideRangePoints=function(i,e){if(!e._hasClipOnAxisFalse)return;var o=e.xaxis;var s=e.yaxis;i.each(function(e){var t=e[0].trace;var r=t.xcalendar;var n=t.ycalendar;var a=b.traceIs(t,"bar-like")?".bartext":".point,.textpoint";i.selectAll(a).each(function(e){E.hideOutsideRangePoint(e,S.select(this),o,s,r,n)})})};E.crispRound=function(e,t,r){if(!t||!o(t))return r||0;if(e._context.staticPlot)return t;if(t<1)return 1;return Math.round(t)};E.singleLineStyle=function(e,t,r,n,a){t.style("fill","none");var i=(((e||[])[0]||{}).trace||{}).line||{};var o=r||i.width||0;var s=a||i.dash||"";C.stroke(t,n||i.color);E.dashLine(t,s,o)};E.lineGroupStyle=function(e,a,i,o){e.style("fill","none").each(function(e){var t=(((e||[])[0]||{}).trace||{}).line||{};var r=a||t.width||0;var n=o||t.dash||"";S.select(this).call(C.stroke,i||t.color).call(E.dashLine,n,r)})};E.dashLine=function(e,t,r){r=+r||0;t=E.dashStyle(t,r);e.style({"stroke-dasharray":t,"stroke-width":r+"px"})};E.dashStyle=function(e,t){t=+t||1;var r=Math.max(t,3);if(e==="solid")e="";else if(e==="dot")e=r+"px,"+r+"px";else if(e==="dash")e=3*r+"px,"+3*r+"px";else if(e==="longdash")e=5*r+"px,"+5*r+"px";else if(e==="dashdot"){e=3*r+"px,"+r+"px,"+r+"px,"+r+"px"}else if(e==="longdashdot"){e=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"}return e};E.singleFillStyle=function(e){var t=S.select(e.node());var r=t.data();var n=(((r[0]||[])[0]||{}).trace||{}).fillcolor;if(n){e.call(C.fill,n)}};E.fillGroupStyle=function(e){e.style("stroke-width",0).each(function(e){var t=S.select(this);if(e[0].trace){t.call(C.fill,e[0].trace.fillcolor)}})};var c=e("./symbol_defs");E.symbolNames=[];E.symbolFuncs=[];E.symbolNeedLines={};E.symbolNoDot={};E.symbolNoFill={};E.symbolList=[];Object.keys(c).forEach(function(e){var t=c[e];var r=t.n;E.symbolList.push(r,String(r),e,r+100,String(r+100),e+"-open");E.symbolNames[r]=e;E.symbolFuncs[r]=t.f;if(t.needLine){E.symbolNeedLines[r]=true}if(t.noDot){E.symbolNoDot[r]=true}else{E.symbolList.push(r+200,String(r+200),e+"-dot",r+300,String(r+300),e+"-open-dot")}if(t.noFill){E.symbolNoFill[r]=true}});var u=E.symbolNames.length;var h="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";E.symbolNumber=function(e){if(o(e)){e=+e}else if(typeof e==="string"){var t=0;if(e.indexOf("-open")>0){t=100;e=e.replace("-open","")}if(e.indexOf("-dot")>0){t+=200;e=e.replace("-dot","")}e=E.symbolNames.indexOf(e);if(e>=0){e+=t}}return e%100>=u||e>=400?0:Math.floor(Math.max(e,0))};function D(e,t){var r=e%100;return E.symbolFuncs[r](t)+(e>=200?h:"")}var p={x1:1,x2:0,y1:0,y2:0};var _={x1:0,x2:0,y1:1,y2:0};var y=S.format("~.1f");var O={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:true},horizontal:{node:"linearGradient",attrs:p},horizontalreversed:{node:"linearGradient",attrs:p,reversed:true},vertical:{node:"linearGradient",attrs:_},verticalreversed:{node:"linearGradient",attrs:_,reversed:true}};E.gradient=function(e,t,r,n,a,i){var o=a.length;var s=O[n];var l=new Array(o);for(var c=0;c<o;c++){if(s.reversed){l[o-1-c]=[y((1-a[c][0])*100),a[c][1]]}else{l[c]=[y(a[c][0]*100),a[c][1]]}}var u=t._fullLayout;var f="g"+u._uid+"-"+r;var d=u._defs.select(".gradients").selectAll("#"+f).data([n+l.join(";")],L.identity);d.exit().remove();d.enter().append(s.node).each(function(){var e=S.select(this);if(s.attrs)e.attr(s.attrs);e.attr("id",f);var t=e.selectAll("stop").data(l);t.exit().remove();t.enter().append("stop");t.each(function(e){var t=v(e[1]);S.select(this).attr({offset:e[0]+"%","stop-color":C.tinyRGB(t),"stop-opacity":t.getAlpha()})})});e.style(i,F(f,t)).style(i+"-opacity",null);var h=function(e){return"."+e.attr("class").replace(/\s/g,".")};var p=h(S.select(e.node().parentNode))+">"+h(e);u._gradientUrlQueryParts[p]=1};E.pattern=function(e,t,r,n,a,i,o,s,l,c,u,f){var d=t==="legend";if(s){if(l==="overlay"){c=s;u=C.contrast(c)}else{c=undefined;u=s}}var h=r._fullLayout;var p="p"+h._uid+"-"+n;var v,g;var m=function(e,t,r,n,a){return n+(a-n)*(e-t)/(r-t)};var _,y,b;var x;var w={};switch(a){case"/":v=i*Math.sqrt(2);g=i*Math.sqrt(2);_="M-"+v/4+","+g/4+"l"+v/2+",-"+g/2+"M0,"+g+"L"+v+",0"+"M"+v/4*3+","+g/4*5+"l"+v/2+",-"+g/2;y=o*i;x="path";w={d:_,opacity:f,stroke:u,"stroke-width":y+"px"};break;case"\\":v=i*Math.sqrt(2);g=i*Math.sqrt(2);_="M"+v/4*3+",-"+g/4+"l"+v/2+","+g/2+"M0,0L"+v+","+g+"M-"+v/4+","+g/4*3+"l"+v/2+","+g/2;y=o*i;x="path";w={d:_,opacity:f,stroke:u,"stroke-width":y+"px"};break;case"x":v=i*Math.sqrt(2);g=i*Math.sqrt(2);_="M-"+v/4+","+g/4+"l"+v/2+",-"+g/2+"M0,"+g+"L"+v+",0"+"M"+v/4*3+","+g/4*5+"l"+v/2+",-"+g/2+"M"+v/4*3+",-"+g/4+"l"+v/2+","+g/2+"M0,0L"+v+","+g+"M-"+v/4+","+g/4*3+"l"+v/2+","+g/2;y=i-i*Math.sqrt(1-o);x="path";w={d:_,opacity:f,stroke:u,"stroke-width":y+"px"};break;case"|":v=i;g=i;x="path";_="M"+v/2+",0L"+v/2+","+g;y=o*i;x="path";w={d:_,opacity:f,stroke:u,"stroke-width":y+"px"};break;case"-":v=i;g=i;x="path";_="M0,"+g/2+"L"+v+","+g/2;y=o*i;x="path";w={d:_,opacity:f,stroke:u,"stroke-width":y+"px"};break;case"+":v=i;g=i;x="path";_="M"+v/2+",0L"+v/2+","+g+"M0,"+g/2+"L"+v+","+g/2;y=i-i*Math.sqrt(1-o);x="path";w={d:_,opacity:f,stroke:u,"stroke-width":y+"px"};break;case".":v=i;g=i;if(o<Math.PI/4){b=Math.sqrt(o*i*i/Math.PI)}else{b=m(o,Math.PI/4,1,i/2,i/Math.sqrt(2))}x="circle";w={cx:v/2,cy:g/2,r:b,opacity:f,fill:u};break}var A=[a||"noSh",c||"noBg",u||"noFg",i,o].join(";");var T=h._defs.select(".patterns").selectAll("#"+p).data([A],L.identity);T.exit().remove();T.enter().append("pattern").each(function(){var e=S.select(this);e.attr({id:p,width:v+"px",height:g+"px",patternUnits:"userSpaceOnUse",patternTransform:d?"scale(0.8)":""});if(c){var t=e.selectAll("rect").data([0]);t.exit().remove();t.enter().append("rect").attr({width:v+"px",height:g+"px",fill:c})}var r=e.selectAll(x).data([0]);r.exit().remove();r.enter().append(x).attr(w)});e.style("fill",F(p,r)).style("fill-opacity",null);e.classed("pattern_filled",true);var k=function(e){return"."+e.attr("class").replace(/\s/g,".")};var M=k(S.select(e.node().parentNode))+">.pattern_filled";h._patternUrlQueryParts[M]=1};E.initGradients=function(e){var t=e._fullLayout;var r=L.ensureSingle(t._defs,"g","gradients");r.selectAll("linearGradient,radialGradient").remove();t._gradientUrlQueryParts={}};E.initPatterns=function(e){var t=e._fullLayout;var r=L.ensureSingle(t._defs,"g","patterns");r.selectAll("pattern").remove();t._patternUrlQueryParts={}};E.getPatternAttr=function(e,t,r){if(e&&L.isArrayOrTypedArray(e)){return t<e.length?e[t]:r}return e};E.pointStyle=function(e,t,r){if(!e.size())return;var n=E.makePointStyleFns(t);e.each(function(e){E.singlePointStyle(e,S.select(this),t,n,r)})};E.singlePointStyle=function(e,t,r,n,a){var i=r.marker;var o=i.line;t.style("opacity",n.selectedOpacityFn?n.selectedOpacityFn(e):e.mo===undefined?i.opacity:e.mo);if(n.ms2mrc){var s;if(e.ms==="various"||i.size==="various"){s=3}else{s=n.ms2mrc(e.ms)}e.mrc=s;if(n.selectedSizeFn){s=e.mrc=n.selectedSizeFn(e)}var l=E.symbolNumber(e.mx||i.symbol)||0;e.om=l%200>=100;t.attr("d",D(l,s))}var c=false;var u,f,d;if(e.so){d=o.outlierwidth;f=o.outliercolor;u=i.outliercolor}else{var h=(o||{}).width;d=(e.mlw+1||h+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0;if("mlc"in e)f=e.mlcc=n.lineScale(e.mlc);else if(L.isArrayOrTypedArray(o.color))f=C.defaultLine;else f=o.color;if(L.isArrayOrTypedArray(i.color)){u=C.defaultLine;c=true}if("mc"in e){u=e.mcc=n.markerScale(e.mc)}else{u=i.color||"rgba(0,0,0,0)"}if(n.selectedColorFn){u=n.selectedColorFn(e)}}if(e.om){t.call(C.stroke,u).style({"stroke-width":(d||1)+"px",fill:"none"})}else{t.style("stroke-width",(e.isBlank?0:d)+"px");var p=i.gradient;var v=e.mgt;if(v)c=true;else v=p&&p.type;if(L.isArrayOrTypedArray(v)){v=v[0];if(!O[v])v=0}var g=i.pattern;var m=g&&E.getPatternAttr(g.shape,e.i,"");if(v&&v!=="none"){var _=e.mgc;if(_)c=true;else _=p.color;var y=r.uid;if(c)y+="-"+e.i;E.gradient(t,a,y,v,[[0,_],[1,u]],"fill")}else if(m){var b=E.getPatternAttr(g.bgcolor,e.i,null);var x=E.getPatternAttr(g.fgcolor,e.i,null);var w=g.fgopacity;var A=E.getPatternAttr(g.size,e.i,8);var T=E.getPatternAttr(g.solidity,e.i,.3);var k=e.mcc||L.isArrayOrTypedArray(g.shape)||L.isArrayOrTypedArray(g.bgcolor)||L.isArrayOrTypedArray(g.size)||L.isArrayOrTypedArray(g.solidity);var M=r.uid;if(k)M+="-"+e.i;E.pattern(t,"point",a,M,m,A,T,e.mcc,g.fillmode,b,x,w)}else{C.fill(t,u)}if(d){C.stroke(t,f)}}};E.makePointStyleFns=function(e){var t={};var r=e.marker;t.markerScale=E.tryColorscale(r,"");t.lineScale=E.tryColorscale(r,"line");if(b.traceIs(e,"symbols")){t.ms2mrc=s.isBubble(e)?l(e):function(){return(r.size||6)/2}}if(e.selectedpoints){L.extendFlat(t,E.makeSelectedPointStyleFns(e))}return t};E.makeSelectedPointStyleFns=function(e){var t={};var r=e.selected||{};var n=e.unselected||{};var a=e.marker||{};var i=r.marker||{};var o=n.marker||{};var s=a.opacity;var l=i.opacity;var c=o.opacity;var u=l!==undefined;var f=c!==undefined;if(L.isArrayOrTypedArray(s)||u||f){t.selectedOpacityFn=function(e){var t=e.mo===undefined?a.opacity:e.mo;if(e.selected){return u?l:t}else{return f?c:x*t}}}var d=a.color;var h=i.color;var p=o.color;if(h||p){t.selectedColorFn=function(e){var t=e.mcc||d;if(e.selected){return h||t}else{return p||t}}}var v=a.size;var g=i.size;var m=o.size;var _=g!==undefined;var y=m!==undefined;if(b.traceIs(e,"symbols")&&(_||y)){t.selectedSizeFn=function(e){var t=e.mrc||v/2;if(e.selected){return _?g/2:t}else{return y?m/2:t}}}return t};E.makeSelectedTextStyleFns=function(e){var t={};var r=e.selected||{};var n=e.unselected||{};var a=e.textfont||{};var i=r.textfont||{};var o=n.textfont||{};var s=a.color;var l=i.color;var c=o.color;t.selectedTextColorFn=function(e){var t=e.tc||s;if(e.selected){return l||t}else{if(c)return c;else return l?t:C.addOpacity(t,x)}};return t};E.selectedPointStyle=function(e,t){if(!e.size()||!t.selectedpoints)return;var a=E.makeSelectedPointStyleFns(t);var i=t.marker||{};var n=[];if(a.selectedOpacityFn){n.push(function(e,t){e.style("opacity",a.selectedOpacityFn(t))})}if(a.selectedColorFn){n.push(function(e,t){C.fill(e,a.selectedColorFn(t))})}if(a.selectedSizeFn){n.push(function(e,t){var r=t.mx||i.symbol||0;var n=a.selectedSizeFn(t);e.attr("d",D(E.symbolNumber(r),n));t.mrc2=n})}if(n.length){e.each(function(e){var t=S.select(this);for(var r=0;r<n.length;r++){n[r](t,e)}})}};E.tryColorscale=function(e,t){var r=t?L.nestedProperty(e,t).get():e;if(r){var n=r.color;if((r.colorscale||r._colorAx)&&L.isArrayOrTypedArray(n)){return a.makeColorScaleFuncFromTrace(r)}}return L.identity};var w={start:1,end:-1,middle:0,bottom:1,top:-1};function A(e,t,r,n){var a=S.select(e.node().parentNode);var i=t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle";var o=t.indexOf("left")!==-1?"end":t.indexOf("right")!==-1?"start":"middle";var s=n?n/.8+1:0;var l=(g.lineCount(e)-1)*d+1;var c=w[o]*s;var u=r*.75+w[i]*s+(w[i]-1)*l*r/2;e.attr("text-anchor",o);a.attr("transform",f(c,u))}function T(e,t){var r=e.ts||t.textfont.size;return o(r)&&r>0?r:0}E.textPointStyle=function(e,u,f){if(!e.size())return;var d;if(u.selectedpoints){var t=E.makeSelectedTextStyleFns(u);d=t.selectedTextColorFn}var h=u.texttemplate;var p=f._fullLayout;e.each(function(e){var t=S.select(this);var r=h?L.extractOption(e,u,"txt","texttemplate"):L.extractOption(e,u,"tx","text");if(!r&&r!==0){t.remove();return}if(h){var n=u._module.formatLabels;var a=n?n(e,u,p):{};var i={};m(i,u,e.i);var o=u._meta||{};r=L.texttemplateString(r,a,p._d3locale,i,e,o)}var s=e.tp||u.textposition;var l=T(e,u);var c=d?d(e):e.tc||u.textfont.color;t.call(E.font,e.tf||u.textfont.family,l,c).text(r).call(g.convertToTspans,f).call(A,s,l,e.mrc)})};E.selectedTextStyle=function(e,i){if(!e.size()||!i.selectedpoints)return;var o=E.makeSelectedTextStyleFns(i);e.each(function(e){var t=S.select(this);var r=o.selectedTextColorFn(e);var n=e.tp||i.textposition;var a=T(e,i);C.fill(t,r);A(t,n,a,e.mrc2||e.mrc)})};var k=.5;E.smoothopen=function(e,t){if(e.length<3){return"M"+e.join("L")}var r="M"+e[0];var n=[];var a;for(a=1;a<e.length-1;a++){n.push(M(e[a-1],e[a],e[a+1],t))}r+="Q"+n[0][0]+" "+e[1];for(a=2;a<e.length-1;a++){r+="C"+n[a-2][1]+" "+n[a-1][0]+" "+e[a]}r+="Q"+n[e.length-3][1]+" "+e[e.length-1];return r};E.smoothclosed=function(e,t){if(e.length<3){return"M"+e.join("L")+"Z"}var r="M"+e[0];var n=e.length-1;var a=[M(e[n],e[0],e[1],t)];var i;for(i=1;i<n;i++){a.push(M(e[i-1],e[i],e[i+1],t))}a.push(M(e[n-1],e[n],e[0],t));for(i=1;i<=n;i++){r+="C"+a[i-1][1]+" "+a[i][0]+" "+e[i]}r+="C"+a[n][1]+" "+a[0][0]+" "+e[0]+"Z";return r};function M(e,t,r,n){var a=e[0]-t[0];var i=e[1]-t[1];var o=r[0]-t[0];var s=r[1]-t[1];var l=Math.pow(a*a+i*i,k/2);var c=Math.pow(o*o+s*s,k/2);var u=(c*c*a-l*l*o)*n;var f=(c*c*i-l*l*s)*n;var d=3*c*(l+c);var h=3*l*(l+c);return[[S.round(t[0]+(d&&u/d),2),S.round(t[1]+(d&&f/d),2)],[S.round(t[0]-(h&&u/h),2),S.round(t[1]-(h&&f/h),2)]]}var P={hv:function(e,t){return"H"+S.round(t[0],2)+"V"+S.round(t[1],2)},vh:function(e,t){return"V"+S.round(t[1],2)+"H"+S.round(t[0],2)},hvh:function(e,t){return"H"+S.round((e[0]+t[0])/2,2)+"V"+S.round(t[1],2)+"H"+S.round(t[0],2)},vhv:function(e,t){return"V"+S.round((e[1]+t[1])/2,2)+"H"+S.round(t[0],2)+"V"+S.round(t[1],2)}};var I=function(e,t){return"L"+S.round(t[0],2)+","+S.round(t[1],2)};E.steps=function(e){var n=P[e]||I;return function(e){var t="M"+S.round(e[0][0],2)+","+S.round(e[0][1],2);for(var r=1;r<e.length;r++){t+=n(e[r-1],e[r])}return t}};E.makeTester=function(){var e=L.ensureSingleById(S.select("body"),"svg","js-plotly-tester",function(e){e.attr(n.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})});var t=L.ensureSingle(e,"path","js-reference-point",function(e){e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});E.tester=e;E.testref=t};E.savedBBoxes={};var R=0;var z=1e4;E.bBox=function(e,t,r){if(!r)r=N(e);var n;if(r){n=E.savedBBoxes[r];if(n)return L.extendFlat({},n)}else if(e.childNodes.length===1){var a=e.childNodes[0];r=N(a);if(r){var i=+a.getAttribute("x")||0;var o=+a.getAttribute("y")||0;var s=a.getAttribute("transform");if(!s){var l=E.bBox(a,false,r);if(i){l.left+=i;l.right+=i}if(o){l.top+=o;l.bottom+=o}return l}r+="~"+i+"~"+o+"~"+s;n=E.savedBBoxes[r];if(n)return L.extendFlat({},n)}}var c,u;if(t){c=e}else{u=E.tester.node();c=e.cloneNode(true);u.appendChild(c)}S.select(c).attr("transform",null).call(g.positionText,0,0);var f=c.getBoundingClientRect();var d=E.testref.node().getBoundingClientRect();if(!t)u.removeChild(c);var h={height:f.height,width:f.width,left:f.left-d.left,top:f.top-d.top,right:f.right-d.left,bottom:f.bottom-d.top};if(R>=z){E.savedBBoxes={};R=0}if(r)E.savedBBoxes[r]=h;R++;return L.extendFlat({},h)};function N(e){var t=e.getAttribute("data-unformatted");if(t===null)return;return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}E.setClipUrl=function(e,t,r){e.attr("clip-path",F(t,r))};function F(e,t){if(!e)return null;var r=t._context;var n=r._exportedPlot?"":r._baseUrl||"";return n?"url('"+n+"#"+e+"')":"url(#"+e+")"}E.getTranslate=function(e){var t=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/;var r=e.attr?"attr":"getAttribute";var n=e[r]("transform")||"";var a=n.replace(t,function(e,t,r){return[t,r].join(" ")}).split(" ");return{x:+a[0]||0,y:+a[1]||0}};E.setTranslate=function(e,t,r){var n=/(\btranslate\(.*?\);?)/;var a=e.attr?"attr":"getAttribute";var i=e.attr?"attr":"setAttribute";var o=e[a]("transform")||"";t=t||0;r=r||0;o=o.replace(n,"").trim();o+=f(t,r);o=o.trim();e[i]("transform",o);return o};E.getScale=function(e){var t=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/;var r=e.attr?"attr":"getAttribute";var n=e[r]("transform")||"";var a=n.replace(t,function(e,t,r){return[t,r].join(" ")}).split(" ");return{x:+a[0]||1,y:+a[1]||1}};E.setScale=function(e,t,r){var n=/(\bscale\(.*?\);?)/;var a=e.attr?"attr":"getAttribute";var i=e.attr?"attr":"setAttribute";var o=e[a]("transform")||"";t=t||1;r=r||1;o=o.replace(n,"").trim();o+="scale("+t+","+r+")";o=o.trim();e[i]("transform",o);return o};var j=/\s*sc.*/;E.setPointGroupScale=function(e,t,r){t=t||1;r=r||1;if(!e)return;var n=t===1&&r===1?"":"scale("+t+","+r+")";e.each(function(){var e=(this.getAttribute("transform")||"").replace(j,"");e+=n;e=e.trim();this.setAttribute("transform",e)})};var B=/translate\([^)]*\)\s*$/;E.setTextPointsScale=function(e,o,s){if(!e)return;e.each(function(){var e;var t=S.select(this);var r=t.select("text");if(!r.node())return;var n=parseFloat(r.attr("x")||0);var a=parseFloat(r.attr("y")||0);var i=(t.attr("transform")||"").match(B);if(o===1&&s===1){e=[]}else{e=[f(n,a),"scale("+o+","+s+")",f(-n,-a)]}if(i){e.push(i)}t.attr("transform",e.join(""))})}},{"../../components/fx/helpers":136,"../../constants/alignment":205,"../../constants/interactions":209,"../../constants/xmlns_namespaces":211,"../../lib":230,"../../lib/svg_text_utils":252,"../../registry":313,"../../traces/scatter/make_bubble_size_func":370,"../../traces/scatter/subtypes":378,"../color":100,"../colorscale":112,"./symbol_defs":123,"@plotly/d3":11,"fast-isnumeric":15,tinycolor2:65}],123:[function(e,t,r){"use strict";var f=e("@plotly/d3");t.exports={circle:{n:0,f:function(e){var t=f.round(e,2);return"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"}},square:{n:1,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"}},diamond:{n:2,f:function(e){var t=f.round(e*1.3,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"}},cross:{n:3,f:function(e){var t=f.round(e*.4,2);var r=f.round(e*1.2,2);return"M"+r+","+t+"H"+t+"V"+r+"H-"+t+"V"+t+"H-"+r+"V-"+t+"H-"+t+"V-"+r+"H"+t+"V-"+t+"H"+r+"Z"}},x:{n:4,f:function(e){var t=f.round(e*.8/Math.sqrt(2),2);var r="l"+t+","+t;var n="l"+t+",-"+t;var a="l-"+t+",-"+t;var i="l-"+t+","+t;return"M0,"+t+r+n+a+n+a+i+a+i+r+i+r+"Z"}},"triangle-up":{n:5,f:function(e){var t=f.round(e*2/Math.sqrt(3),2);var r=f.round(e/2,2);var n=f.round(e,2);return"M-"+t+","+r+"H"+t+"L0,-"+n+"Z"}},"triangle-down":{n:6,f:function(e){var t=f.round(e*2/Math.sqrt(3),2);var r=f.round(e/2,2);var n=f.round(e,2);return"M-"+t+",-"+r+"H"+t+"L0,"+n+"Z"}},"triangle-left":{n:7,f:function(e){var t=f.round(e*2/Math.sqrt(3),2);var r=f.round(e/2,2);var n=f.round(e,2);return"M"+r+",-"+t+"V"+t+"L-"+n+",0Z"}},"triangle-right":{n:8,f:function(e){var t=f.round(e*2/Math.sqrt(3),2);var r=f.round(e/2,2);var n=f.round(e,2);return"M-"+r+",-"+t+"V"+t+"L"+n+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=f.round(e*.6,2);var r=f.round(e*1.2,2);return"M-"+r+",-"+t+"H"+t+"V"+r+"Z"}},"triangle-se":{n:10,f:function(e){var t=f.round(e*.6,2);var r=f.round(e*1.2,2);return"M"+t+",-"+r+"V"+t+"H-"+r+"Z"}},"triangle-sw":{n:11,f:function(e){var t=f.round(e*.6,2);var r=f.round(e*1.2,2);return"M"+r+","+t+"H-"+t+"V-"+r+"Z"}},"triangle-nw":{n:12,f:function(e){var t=f.round(e*.6,2);var r=f.round(e*1.2,2);return"M-"+t+","+r+"V-"+t+"H"+r+"Z"}},pentagon:{n:13,f:function(e){var t=f.round(e*.951,2);var r=f.round(e*.588,2);var n=f.round(-e,2);var a=f.round(e*-.309,2);var i=f.round(e*.809,2);return"M"+t+","+a+"L"+r+","+i+"H-"+r+"L-"+t+","+a+"L0,"+n+"Z"}},hexagon:{n:14,f:function(e){var t=f.round(e,2);var r=f.round(e/2,2);var n=f.round(e*Math.sqrt(3)/2,2);return"M"+n+",-"+r+"V"+r+"L0,"+t+"L-"+n+","+r+"V-"+r+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=f.round(e,2);var r=f.round(e/2,2);var n=f.round(e*Math.sqrt(3)/2,2);return"M-"+r+","+n+"H"+r+"L"+t+",0L"+r+",-"+n+"H-"+r+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=f.round(e*.924,2);var r=f.round(e*.383,2);return"M-"+r+",-"+t+"H"+r+"L"+t+",-"+r+"V"+r+"L"+r+","+t+"H-"+r+"L-"+t+","+r+"V-"+r+"Z"}},star:{n:17,f:function(e){var t=e*1.4;var r=f.round(t*.225,2);var n=f.round(t*.951,2);var a=f.round(t*.363,2);var i=f.round(t*.588,2);var o=f.round(-t,2);var s=f.round(t*-.309,2);var l=f.round(t*.118,2);var c=f.round(t*.809,2);var u=f.round(t*.382,2);return"M"+r+","+s+"H"+n+"L"+a+","+l+"L"+i+","+c+"L0,"+u+"L-"+i+","+c+"L-"+a+","+l+"L-"+n+","+s+"H-"+r+"L0,"+o+"Z"}},hexagram:{n:18,f:function(e){var t=f.round(e*.66,2);var r=f.round(e*.38,2);var n=f.round(e*.76,2);return"M-"+n+",0l-"+r+",-"+t+"h"+n+"l"+r+",-"+t+"l"+r+","+t+"h"+n+"l-"+r+","+t+"l"+r+","+t+"h-"+n+"l-"+r+","+t+"l-"+r+",-"+t+"h-"+n+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=f.round(e*Math.sqrt(3)*.8,2);var r=f.round(e*.8,2);var n=f.round(e*1.6,2);var a=f.round(e*4,2);var i="A "+a+","+a+" 0 0 1 ";return"M-"+t+","+r+i+t+","+r+i+"0,-"+n+i+"-"+t+","+r+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=f.round(e*Math.sqrt(3)*.8,2);var r=f.round(e*.8,2);var n=f.round(e*1.6,2);var a=f.round(e*4,2);var i="A "+a+","+a+" 0 0 1 ";return"M"+t+",-"+r+i+"-"+t+",-"+r+i+"0,"+n+i+t+",-"+r+"Z"}},"star-square":{n:21,f:function(e){var t=f.round(e*1.1,2);var r=f.round(e*2,2);var n="A "+r+","+r+" 0 0 1 ";return"M-"+t+",-"+t+n+"-"+t+","+t+n+t+","+t+n+t+",-"+t+n+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=f.round(e*1.4,2);var r=f.round(e*1.9,2);var n="A "+r+","+r+" 0 0 1 ";return"M-"+t+",0"+n+"0,"+t+n+t+",0"+n+"0,-"+t+n+"-"+t+",0"+"Z"}},"diamond-tall":{n:23,f:function(e){var t=f.round(e*.7,2);var r=f.round(e*1.4,2);return"M0,"+r+"L"+t+",0L0,-"+r+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=f.round(e*1.4,2);var r=f.round(e*.7,2);return"M0,"+r+"L"+t+",0L0,-"+r+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"H-"+t+"L"+t+",-"+t+"H-"+t+"Z"},noDot:true},bowtie:{n:26,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"V-"+t+"L-"+t+","+t+"V-"+t+"Z"},noDot:true},"circle-cross":{n:27,f:function(e){var t=f.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:true,noDot:true},"circle-x":{n:28,f:function(e){var t=f.round(e,2);var r=f.round(e/Math.sqrt(2),2);return"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:true,noDot:true},"square-cross":{n:29,f:function(e){var t=f.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:true,noDot:true},"square-x":{n:30,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:true,noDot:true},"diamond-cross":{n:31,f:function(e){var t=f.round(e*1.3,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"+"M0,-"+t+"V"+t+"M-"+t+",0H"+t},needLine:true,noDot:true},"diamond-x":{n:32,f:function(e){var t=f.round(e*1.3,2);var r=f.round(e*.65,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"+"M-"+r+",-"+r+"L"+r+","+r+"M-"+r+","+r+"L"+r+",-"+r},needLine:true,noDot:true},"cross-thin":{n:33,f:function(e){var t=f.round(e*1.4,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t},needLine:true,noDot:true,noFill:true},"x-thin":{n:34,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t},needLine:true,noDot:true,noFill:true},asterisk:{n:35,f:function(e){var t=f.round(e*1.2,2);var r=f.round(e*.85,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r},needLine:true,noDot:true,noFill:true},hash:{n:36,f:function(e){var t=f.round(e/2,2);var r=f.round(e,2);return"M"+t+","+r+"V-"+r+"m-"+r+",0V"+r+"M"+r+","+t+"H-"+r+"m0,-"+r+"H"+r},needLine:true,noFill:true},"y-up":{n:37,f:function(e){var t=f.round(e*1.2,2);var r=f.round(e*1.6,2);var n=f.round(e*.8,2);return"M-"+t+","+n+"L0,0M"+t+","+n+"L0,0M0,-"+r+"L0,0"},needLine:true,noDot:true,noFill:true},"y-down":{n:38,f:function(e){var t=f.round(e*1.2,2);var r=f.round(e*1.6,2);var n=f.round(e*.8,2);return"M-"+t+",-"+n+"L0,0M"+t+",-"+n+"L0,0M0,"+r+"L0,0"},needLine:true,noDot:true,noFill:true},"y-left":{n:39,f:function(e){var t=f.round(e*1.2,2);var r=f.round(e*1.6,2);var n=f.round(e*.8,2);return"M"+n+","+t+"L0,0M"+n+",-"+t+"L0,0M-"+r+",0L0,0"},needLine:true,noDot:true,noFill:true},"y-right":{n:40,f:function(e){var t=f.round(e*1.2,2);var r=f.round(e*1.6,2);var n=f.round(e*.8,2);return"M-"+n+","+t+"L0,0M-"+n+",-"+t+"L0,0M"+r+",0L0,0"},needLine:true,noDot:true,noFill:true},"line-ew":{n:41,f:function(e){var t=f.round(e*1.4,2);return"M"+t+",0H-"+t},needLine:true,noDot:true,noFill:true},"line-ns":{n:42,f:function(e){var t=f.round(e*1.4,2);return"M0,"+t+"V-"+t},needLine:true,noDot:true,noFill:true},"line-ne":{n:43,f:function(e){var t=f.round(e,2);return"M"+t+",-"+t+"L-"+t+","+t},needLine:true,noDot:true,noFill:true},"line-nw":{n:44,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t},needLine:true,noDot:true,noFill:true},"arrow-up":{n:45,f:function(e){var t=f.round(e,2);var r=f.round(e*2,2);return"M0,0L-"+t+","+r+"H"+t+"Z"},noDot:true},"arrow-down":{n:46,f:function(e){var t=f.round(e,2);var r=f.round(e*2,2);return"M0,0L-"+t+",-"+r+"H"+t+"Z"},noDot:true},"arrow-left":{n:47,f:function(e){var t=f.round(e*2,2);var r=f.round(e,2);return"M0,0L"+t+",-"+r+"V"+r+"Z"},noDot:true},"arrow-right":{n:48,f:function(e){var t=f.round(e*2,2);var r=f.round(e,2);return"M0,0L-"+t+",-"+r+"V"+r+"Z"},noDot:true},"arrow-bar-up":{n:49,f:function(e){var t=f.round(e,2);var r=f.round(e*2,2);return"M-"+t+",0H"+t+"M0,0L-"+t+","+r+"H"+t+"Z"},needLine:true,noDot:true},"arrow-bar-down":{n:50,f:function(e){var t=f.round(e,2);var r=f.round(e*2,2);return"M-"+t+",0H"+t+"M0,0L-"+t+",-"+r+"H"+t+"Z"},needLine:true,noDot:true},"arrow-bar-left":{n:51,f:function(e){var t=f.round(e*2,2);var r=f.round(e,2);return"M0,-"+r+"V"+r+"M0,0L"+t+",-"+r+"V"+r+"Z"},needLine:true,noDot:true},"arrow-bar-right":{n:52,f:function(e){var t=f.round(e*2,2);var r=f.round(e,2);return"M0,-"+r+"V"+r+"M0,0L-"+t+",-"+r+"V"+r+"Z"},needLine:true,noDot:true}}},{"@plotly/d3":11}],124:[function(e,t,r){"use strict";t.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],125:[function(e,t,r){"use strict";var _=e("fast-isnumeric");var l=e("../../registry");var y=e("../../plots/cartesian/axes");var b=e("../../lib");var x=e("./compute_error");t.exports=function e(t){var r=t.calcdata;for(var n=0;n<r.length;n++){var a=r[n];var i=a[0].trace;if(i.visible===true&&l.traceIs(i,"errorBarsOK")){var o=y.getFromId(t,i.xaxis);var s=y.getFromId(t,i.yaxis);c(a,i,o,"x");c(a,i,s,"y")}}};function c(e,t,r,n){var a=t["error_"+n]||{};var i=a.visible&&["linear","log"].indexOf(r.type)!==-1;var o=[];if(!i)return;var s=x(a);for(var l=0;l<e.length;l++){var c=e[l];var u=c.i;if(u===undefined)u=l;else if(u===null)continue;var f=c[n];if(!_(r.c2l(f)))continue;var d=s(f,u);if(_(d[0])&&_(d[1])){var h=c[n+"s"]=f-d[0];var p=c[n+"h"]=f+d[1];o.push(h,p)}}var v=r._id;var g=t._extremes[v];var m=y.findExtremes(r,o,b.extendFlat({tozero:g.opts.tozero},{padded:true}));g.min=g.min.concat(m.min);g.max=g.max.concat(m.max)}},{"../../lib":230,"../../plots/cartesian/axes":276,"../../registry":313,"./compute_error":126,"fast-isnumeric":15}],126:[function(e,t,r){"use strict";t.exports=function e(t){var r=t.type;var n=t.symmetric;if(r==="data"){var i=t.array||[];if(n){return function e(t,r){var n=+i[r];return[n,n]}}else{var o=t.arrayminus||[];return function e(t,r){var n=+i[r];var a=+o[r];if(!isNaN(n)||!isNaN(a)){return[a||0,n||0]}return[NaN,NaN]}}}else{var a=l(r,t.value);var s=l(r,t.valueminus);if(n||t.valueminus===undefined){return function e(t){var r=a(t);return[r,r]}}else{return function e(t){return[s(t),a(t)]}}}};function l(e,t){if(e==="percent"){return function(e){return Math.abs(e*t/100)}}if(e==="constant"){return function(){return Math.abs(t)}}if(e==="sqrt"){return function(e){return Math.sqrt(Math.abs(e))}}}},{}],127:[function(e,t,r){"use strict";var p=e("fast-isnumeric");var v=e("../../registry");var g=e("../../lib");var m=e("../../plot_api/plot_template");var _=e("./attributes");t.exports=function(e,t,r,n){var a="error_"+n.axis;var i=m.newContainer(t,a);var o=e[a]||{};function s(e,t){return g.coerce(o,i,_,e,t)}var l=o.array!==undefined||o.value!==undefined||o.type==="sqrt";var c=s("visible",l);if(c===false)return;var u=s("type","array"in o?"data":"percent");var f=true;if(u!=="sqrt"){f=s("symmetric",!((u==="data"?"arrayminus":"valueminus")in o))}if(u==="data"){s("array");s("traceref");if(!f){s("arrayminus");s("tracerefminus")}}else if(u==="percent"||u==="constant"){s("value");if(!f)s("valueminus")}var d="copy_"+n.inherit+"style";if(n.inherit){var h=t["error_"+n.inherit];if((h||{}).visible){s(d,!(o.color||p(o.thickness)||p(o.width)))}}if(!n.inherit||!i[d]){s("color",r);s("thickness");s("width",v.traceIs(t,"gl3d")?0:4)}}},{"../../lib":230,"../../plot_api/plot_template":265,"../../registry":313,"./attributes":124,"fast-isnumeric":15}],128:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plot_api/edit_types").overrideAll;var i=e("./attributes");var o={error_x:n.extendFlat({},i),error_y:n.extendFlat({},i)};delete o.error_x.copy_zstyle;delete o.error_y.copy_zstyle;delete o.error_y.copy_ystyle;var s={error_x:n.extendFlat({},i),error_y:n.extendFlat({},i),error_z:n.extendFlat({},i)};delete s.error_x.copy_ystyle;delete s.error_y.copy_ystyle;delete s.error_z.copy_ystyle;delete s.error_z.copy_zstyle;t.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:o,bar:o,histogram:o,scatter3d:a(s,"calc","nested"),scattergl:a(o,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:l};function l(e,t,r){if((t.error_y||{}).visible){r.yerr=e.yh-e.y;if(!t.error_y.symmetric)r.yerrneg=e.y-e.ys}if((t.error_x||{}).visible){r.xerr=e.xh-e.x;if(!t.error_x.symmetric)r.xerrneg=e.x-e.xs}}},{"../../lib":230,"../../plot_api/edit_types":258,"./attributes":124,"./calc":125,"./compute_error":126,"./defaults":127,"./plot":129,"./style":130}],129:[function(e,t,r){"use strict";var g=e("@plotly/d3");var m=e("fast-isnumeric");var s=e("../drawing");var _=e("../../traces/scatter/subtypes");t.exports=function e(i,t,o,f){var d;var h=o.xaxis;var p=o.yaxis;var v=f&&f.duration>0;t.each(function(e){var t=e[0].trace;var l=t.error_x||{};var c=t.error_y||{};var r;if(t.ids){r=function(e){return e.id}}var u=_.hasMarkers(t)&&t.marker.maxdisplayed>0;if(!c.visible&&!l.visible)e=[];var n=g.select(this).selectAll("g.errorbar").data(e,r);n.exit().remove();if(!e.length)return;if(!l.visible)n.selectAll("path.xerror").remove();if(!c.visible)n.selectAll("path.yerror").remove();n.style("opacity",1);var a=n.enter().append("g").classed("errorbar",true);if(v){a.style("opacity",0).transition().duration(f.duration).style("opacity",1)}s.setClipUrl(n,o.layerClipId,i);n.each(function(e){var t=g.select(this);var r=y(e,h,p);if(u&&!e.vis)return;var n;var a=t.select("path.yerror");if(c.visible&&m(r.x)&&m(r.yh)&&m(r.ys)){var i=c.width;n="M"+(r.x-i)+","+r.yh+"h"+2*i+"m-"+i+",0V"+r.ys;if(!r.noYS)n+="m-"+i+",0h"+2*i;d=!a.size();if(d){a=t.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",true)}else if(v){a=a.transition().duration(f.duration).ease(f.easing)}a.attr("d",n)}else a.remove();var o=t.select("path.xerror");if(l.visible&&m(r.y)&&m(r.xh)&&m(r.xs)){var s=(l.copy_ystyle?c:l).width;n="M"+r.xh+","+(r.y-s)+"v"+2*s+"m0,-"+s+"H"+r.xs;if(!r.noXS)n+="m0,-"+s+"v"+2*s;d=!o.size();if(d){o=t.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",true)}else if(v){o=o.transition().duration(f.duration).ease(f.easing)}o.attr("d",n)}else o.remove()})})};function y(e,t,r){var n={x:t.c2p(e.x),y:r.c2p(e.y)};if(e.yh!==undefined){n.yh=r.c2p(e.yh);n.ys=r.c2p(e.ys);if(!m(n.ys)){n.noYS=true;n.ys=r.c2p(e.ys,true)}}if(e.xh!==undefined){n.xh=t.c2p(e.xh);n.xs=t.c2p(e.xs);if(!m(n.xs)){n.noXS=true;n.xs=t.c2p(e.xs,true)}}return n}},{"../../traces/scatter/subtypes":378,"../drawing":122,"@plotly/d3":11,"fast-isnumeric":15}],130:[function(e,t,r){"use strict";var i=e("@plotly/d3");var o=e("../color");t.exports=function e(t){t.each(function(e){var t=e[0].trace;var r=t.error_y||{};var n=t.error_x||{};var a=i.select(this);a.selectAll("path.yerror").style("stroke-width",r.thickness+"px").call(o.stroke,r.color);if(n.copy_ystyle)n=r;a.selectAll("path.xerror").style("stroke-width",n.thickness+"px").call(o.stroke,n.color)})}},{"../color":100,"@plotly/d3":11}],131:[function(e,t,r){"use strict";var n=e("../../plots/font_attributes");var a=e("./layout_attributes").hoverlabel;var i=e("../../lib/extend").extendFlat;t.exports={hoverlabel:{bgcolor:i({},a.bgcolor,{arrayOk:true}),bordercolor:i({},a.bordercolor,{arrayOk:true}),font:n({arrayOk:true,editType:"none"}),align:i({},a.align,{arrayOk:true}),namelength:i({},a.namelength,{arrayOk:true}),editType:"none"}}},{"../../lib/extend":224,"../../plots/font_attributes":305,"./layout_attributes":141}],132:[function(e,t,r){"use strict";var c=e("../../lib");var u=e("../../registry");t.exports=function e(t){var r=t.calcdata;var n=t._fullLayout;function a(t){return function(e){return c.coerceHoverinfo({hoverinfo:e},{_module:t._module},n)}}for(var i=0;i<r.length;i++){var o=r[i];var s=o[0].trace;if(u.traceIs(s,"pie-like"))continue;var l=u.traceIs(s,"2dMap")?f:c.fillArray;l(s.hoverinfo,o,"hi",a(s));if(s.hovertemplate)l(s.hovertemplate,o,"ht");if(!s.hoverlabel)continue;l(s.hoverlabel.bgcolor,o,"hbg");l(s.hoverlabel.bordercolor,o,"hbc");l(s.hoverlabel.font.size,o,"hts");l(s.hoverlabel.font.color,o,"htc");l(s.hoverlabel.font.family,o,"htf");l(s.hoverlabel.namelength,o,"hnl");l(s.hoverlabel.align,o,"hta")}};function f(e,t,r,n){n=n||c.identity;if(Array.isArray(e)){t[0][r]=n(e)}}},{"../../lib":230,"../../registry":313}],133:[function(e,t,r){"use strict";var o=e("../../registry");var s=e("./hover").hover;t.exports=function e(t,r,n){var a=o.getComponentMethod("annotations","onClick")(t,t._hoverdata);if(n!==undefined){s(t,r,n,true)}function i(){t.emit("plotly_click",{points:t._hoverdata,event:r})}if(t._hoverdata&&r&&r.target){if(a&&a.then){a.then(i)}else i();if(r.stopImmediatePropagation)r.stopImmediatePropagation()}}},{"../../registry":313,"./hover":137}],134:[function(e,t,r){"use strict";t.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],135:[function(e,t,r){"use strict";var s=e("../../lib");var l=e("./attributes");var c=e("./hoverlabel_defaults");t.exports=function e(r,n,t,a){function i(e,t){return s.coerce(r,n,l,e,t)}var o=s.extendFlat({},a.hoverlabel);if(n.hovertemplate)o.namelength=-1;c(r,n,i,o)}},{"../../lib":230,"./attributes":131,"./hoverlabel_defaults":138}],136:[function(e,t,o){"use strict";var u=e("../../lib");o.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo};o.isTraceInSubplots=function(e,t){if(e.type==="splom"){var r=e.xaxes||[];var n=e.yaxes||[];for(var a=0;a<r.length;a++){for(var i=0;i<n.length;i++){if(t.indexOf(r[a]+n[i])!==-1){return true}}}return false}return t.indexOf(o.getSubplot(e))!==-1};o.flat=function(e,t){var r=new Array(e.length);for(var n=0;n<e.length;n++){r[n]=t}return r};o.p2c=function(e,t){var r=new Array(e.length);for(var n=0;n<e.length;n++){r[n]=e[n].p2c(t)}return r};o.getDistanceFunction=function(e,t,r,n){if(e==="closest")return n||o.quadrature(t,r);return e.charAt(0)==="x"?t:r};o.getClosest=function(e,t,r){if(r.index!==false){if(r.index>=0&&r.index<e.length){r.distance=0}else r.index=false}else{for(var n=0;n<e.length;n++){var a=t(e[n]);if(a<=r.distance){r.index=n;r.distance=a}}}return r};o.inbox=function(e,t,r){return e*t<0||e===0?r:Infinity};o.quadrature=function(n,a){return function(e){var t=n(e);var r=a(e);return Math.sqrt(t*t+r*r)}};o.makeEventData=function(e,t,r){var n="index"in e?e.index:e.pointNumber;var a={data:t._input,fullData:t,curveNumber:t.index,pointNumber:n};if(t._indexToPoints){var i=t._indexToPoints[n];if(i.length===1){a.pointIndex=i[0]}else{a.pointIndices=i}}else{a.pointIndex=n}if(t._module.eventData){a=t._module.eventData(a,e,t,r,n)}else{if("xVal"in e)a.x=e.xVal;else if("x"in e)a.x=e.x;if("yVal"in e)a.y=e.yVal;else if("y"in e)a.y=e.y;if(e.xa)a.xaxis=e.xa;if(e.ya)a.yaxis=e.ya;if(e.zLabelVal!==undefined)a.z=e.zLabelVal}o.appendArrayPointValue(a,t,n);return a};o.appendArrayPointValue=function(e,t,r){var n=t._arrayAttrs;if(!n){return}for(var a=0;a<n.length;a++){var i=n[a];var o=f(i);if(e[o]===undefined){var s=u.nestedProperty(t,i).get();var l=d(s,r);if(l!==undefined)e[o]=l}}};o.appendArrayMultiPointValues=function(e,t,r){var n=t._arrayAttrs;if(!n){return}for(var a=0;a<n.length;a++){var i=n[a];var o=f(i);if(e[o]===undefined){var s=u.nestedProperty(t,i).get();var l=new Array(r.length);for(var c=0;c<r.length;c++){l[c]=d(s,r[c])}e[o]=l}}};var r={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function f(e){return r[e]||e}function d(e,t){if(Array.isArray(t)){if(Array.isArray(e)&&Array.isArray(e[t[0]])){return e[t[0]][t[1]]}}else{return e[t]}}var n={x:true,y:true};var a={"x unified":true,"y unified":true};o.isUnifiedHover=function(e){if(typeof e!=="string")return false;return!!a[e]};o.isXYhover=function(e){if(typeof e!=="string")return false;return!!n[e]}},{"../../lib":230}],137:[function(e,t,r){"use strict";var xe=e("@plotly/d3");var we=e("fast-isnumeric");var F=e("tinycolor2");var Ae=e("../../lib");var Z=Ae.strTranslate;var J=Ae.strRotate;var Te=e("../../lib/events");var $=e("../../lib/svg_text_utils");var ke=e("../../lib/override_cursor");var Q=e("../drawing");var Me=e("../color");var Se=e("../dragelement");var j=e("../../plots/cartesian/axes");var Ce=e("../../registry");var Le=e("./helpers");var K=e("./constants");var ee=e("../legend/defaults");var te=e("../legend/draw");var re=K.YANGLE;var n=Math.PI*re/180;var A=1/Math.sin(n);var m=Math.cos(n);var _=Math.sin(n);var ne=K.HOVERARROWSIZE;var ae=K.HOVERTEXTPAD;var Ee={box:true,ohlc:true,violin:true,candlestick:true};r.hover=function e(t,r,n,a){t=Ae.getGraphDiv(t);Ae.throttle(t._fullLayout._uid+K.HOVERID,K.HOVERMINTIME,function(){i(t,r,n,a)})};r.loneHover=function e(t,n){var r=true;if(!Array.isArray(t)){r=false;t=[t]}var a=t.map(function(e){return{color:e.color||Me.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,nameLength:e.nameLength,textAlign:e.textAlign,trace:e.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:e.hovertemplate||false,eventData:e.eventData||false,hovertemplateLabels:e.hovertemplateLabels||false}});var i=xe.select(n.container);var o=n.outerContainer?xe.select(n.outerContainer):i;var s={hovermode:"closest",rotateLabels:false,bgColor:n.bgColor||Me.background,container:i,outerContainer:o};var l=Oe(a,s,n.gd);var c=5;var u=0;var f=0;l.sort(function(e,t){return e.y0-t.y0}).each(function(e,t){var r=e.y0-e.by/2;if(r-c<u){e.offset=u-r+c}else{e.offset=0}u=r+e.by+e.offset;if(t===n.anchorIndex||0)f=e.offset}).each(function(e){e.offset-=f});var d=n.gd._fullLayout._invScaleX;var h=n.gd._fullLayout._invScaleY;Ie(l,s.rotateLabels,d,h);return r?l:l.node()};function i(e,d,t,r){if(!t)t="xy";var h=Array.isArray(t)?t:[t];var p=e._fullLayout;var n=p._plots||[];var a=n[t];var v=p._has("cartesian");if(a){var i=a.overlays.map(function(e){return e.id});h=h.concat(i)}var o=h.length;var g=new Array(o);var m=new Array(o);var s=false;for(var l=0;l<o;l++){var c=h[l];if(n[c]){s=true;g[l]=n[c].xaxis;m[l]=n[c].yaxis}else if(p[c]&&p[c]._subplot){var u=p[c]._subplot;g[l]=u.xaxis;m[l]=u.yaxis}else{Ae.warn("Unrecognized subplot: "+c);return}}var _=d.hovermode||p.hovermode;if(_&&!s)_="closest";if(["x","y","closest","x unified","y unified"].indexOf(_)===-1||!e.calcdata||e.querySelector(".zoombox")||e._dragging){return Se.unhoverRaw(e,d)}var y=p.hoverdistance;if(y===-1)y=Infinity;var b=p.spikedistance;if(b===-1)b=Infinity;var x=[];var w=[];var A,T;var f,k,M,S,C,L,E,D,O,P,I;var R={hLinePoint:null,vLinePoint:null};var z=false;if(Array.isArray(d)){_="array";for(f=0;f<d.length;f++){M=e.calcdata[d[f].curveNumber||0];if(M){S=M[0].trace;if(M[0].trace.hoverinfo!=="skip"){w.push(M);if(S.orientation==="h"){z=true}}}}}else{for(k=0;k<e.calcdata.length;k++){M=e.calcdata[k];S=M[0].trace;if(S.hoverinfo!=="skip"&&Le.isTraceInSubplots(S,h)){w.push(M);if(S.orientation==="h"){z=true}}}var N=!d.target;var F,j;if(N){if("xpx"in d)F=d.xpx;else F=g[0]._length/2;if("ypx"in d)j=d.ypx;else j=m[0]._length/2}else{if(Te.triggerHandler(e,"plotly_beforehover",d)===false){return}var B=d.composedPath&&d.composedPath()[0];if(!B){B=d.target}var H=B.getBoundingClientRect();F=d.clientX-H.left;j=d.clientY-H.top;p._calcInverseTransform(e);var U=Ae.apply3DTransform(p._invTransform)(F,j);F=U[0];j=U[1];if(F<0||F>g[0]._length||j<0||j>m[0]._length){return Se.unhoverRaw(e,d)}}d.pointerX=F+g[0]._offset;d.pointerY=j+m[0]._offset;if("xval"in d)A=Le.flat(h,d.xval);else A=Le.p2c(g,F);if("yval"in d)T=Le.flat(h,d.yval);else T=Le.p2c(m,j);if(!we(A[0])||!we(T[0])){Ae.warn("Fx.hover failed",d,e);return Se.unhoverRaw(e,d)}}var V=Infinity;function q(e,t){for(k=0;k<w.length;k++){M=w[k];if(!M||!M[0]||!M[0].trace)continue;S=M[0].trace;if(S.visible!==true||S._length===0)continue;if(["carpet","contourcarpet"].indexOf(S._module.name)!==-1)continue;if(S.type==="splom"){L=0;C=h[L]}else{C=Le.getSubplot(S);L=h.indexOf(C)}E=_;if(Le.isUnifiedHover(E)){E=E.charAt(0)}P={cd:M,trace:S,xa:g[L],ya:m[L],maxHoverDistance:y,maxSpikeDistance:b,index:false,distance:Math.min(V,y),spikeDistance:Infinity,xSpike:undefined,ySpike:undefined,color:Me.defaultLine,name:S.name,x0:undefined,x1:undefined,y0:undefined,y1:undefined,xLabelVal:undefined,yLabelVal:undefined,zLabelVal:undefined,text:undefined};if(p[C]){P.subplot=p[C]._subplot}if(p._splomScenes&&p._splomScenes[S.uid]){P.scene=p._splomScenes[S.uid]}I=x.length;if(E==="array"){var r=d[k];if("pointNumber"in r){P.index=r.pointNumber;E="closest"}else{E="";if("xval"in r){D=r.xval;E="x"}if("yval"in r){O=r.yval;E=E?"closest":"y"}}}else if(e!==undefined&&t!==undefined){D=e;O=t}else{D=A[L];O=T[L]}if(y!==0){if(S._module&&S._module.hoverPoints){var n=S._module.hoverPoints(P,D,O,E,{finiteRange:true,hoverLayer:p._hoverlayer});if(n){var a;for(var i=0;i<n.length;i++){a=n[i];if(we(a.x0)&&we(a.y0)){x.push(Re(a,_))}}}}else{Ae.log("Unrecognized trace type in hover:",S)}}if(_==="closest"&&x.length>I){x.splice(0,I);V=x[0].distance}if(v&&b!==0){if(x.length===0){P.distance=b;P.index=false;var o=S._module.hoverPoints(P,D,O,"closest",{hoverLayer:p._hoverlayer});if(o){o=o.filter(function(e){return e.spikeDistance<=b})}if(o&&o.length){var s;var l=o.filter(function(e){return e.xa.showspikes&&e.xa.spikesnap!=="hovered data"});if(l.length){var c=l[0];if(we(c.x0)&&we(c.y0)){s=G(c);if(!R.vLinePoint||R.vLinePoint.spikeDistance>s.spikeDistance){R.vLinePoint=s}}}var u=o.filter(function(e){return e.ya.showspikes&&e.ya.spikesnap!=="hovered data"});if(u.length){var f=u[0];if(we(f.x0)&&we(f.y0)){s=G(f);if(!R.hLinePoint||R.hLinePoint.spikeDistance>s.spikeDistance){R.hLinePoint=s}}}}}}}}q();function Y(e,t){var r=null;var n=Infinity;var a;for(var i=0;i<e.length;i++){a=e[i].spikeDistance;if(a<=n&&a<=t){r=e[i];n=a}}return r}function G(e){if(!e)return null;return{xa:e.xa,ya:e.ya,x:e.xSpike!==undefined?e.xSpike:(e.x0+e.x1)/2,y:e.ySpike!==undefined?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}}var W={fullLayout:p,container:p._hoverlayer,outerContainer:p._paperdiv,event:d};var X=e._spikepoints;var Z={vLinePoint:R.vLinePoint,hLinePoint:R.hLinePoint};e._spikepoints=Z;if(v&&b!==0){if(x.length!==0){var J=x.filter(function(e){return e.ya.showspikes});var $=Y(J,b);R.hLinePoint=G($);var Q=x.filter(function(e){return e.xa.showspikes});var K=Y(Q,b);R.vLinePoint=G(K)}}if(x.length===0){var ee=Se.unhoverRaw(e,d);if(v&&(R.hLinePoint!==null||R.vLinePoint!==null)){if(Fe(X)){ze(e,R,W)}}return ee}if(v){if(Fe(X)){ze(e,R,W)}}var te=function(){x.sort(function(e,t){return e.distance-t.distance});x=je(x,_)};te();if(Le.isXYhover(E)&&x[0].length!==0&&x[0].trace.type!=="splom"){var re=x[0];if(Ee[re.trace.type]){x=x.filter(function(e){return e.trace.index===re.trace.index})}else{x=[re]}var ne=x.length;var ae=Be("x",re,p);var ie=Be("y",re,p);q(ae,ie);var oe=[];var se={};var le=0;var ce=function(e){var t=Ee[e.trace.type]?De(e):e.trace.index;if(!se[t]){le++;se[t]=le;oe.push(e)}else{var r=se[t]-1;var n=oe[r];if(r>0&&Math.abs(e.distance)<Math.abs(n.distance)){oe[r]=e}}};var ue;for(ue=0;ue<ne;ue++){ce(x[ue])}for(ue=x.length-1;ue>ne-1;ue--){ce(x[ue])}x=oe;te()}var fe=e._hoverdata;var de=[];for(f=0;f<x.length;f++){var he=x[f];var pe=Le.makeEventData(he,he.trace,he.cd);if(he.hovertemplate!==false){var ve=false;if(he.cd[he.index]&&he.cd[he.index].ht){ve=he.cd[he.index].ht}he.hovertemplate=ve||he.trace.hovertemplate||false}he.eventData=[pe];de.push(pe)}e._hoverdata=de;var ge=_==="y"&&(w.length>1||x.length>1)||_==="closest"&&z&&x.length>1;var me=Me.combine(p.plot_bgcolor||Me.background,p.paper_bgcolor);var _e={hovermode:_,rotateLabels:ge,bgColor:me,container:p._hoverlayer,outerContainer:p._paperdiv,commonLabelOpts:p.hoverlabel,hoverdistance:p.hoverdistance};var ye=Oe(x,_e,e);if(!Le.isUnifiedHover(_)){Pe(ye,ge?"xa":"ya",p);Ie(ye,ge,p._invScaleX,p._invScaleY)}if(d.target&&d.target.tagName){var be=Ce.getComponentMethod("annotations","hasClickToShow")(e,de);ke(xe.select(d.target),be?"pointer":"")}if(!d.target||r||!Ne(e,d,fe))return;if(fe){e.emit("plotly_unhover",{event:d,points:fe})}e.emit("plotly_hover",{event:d,points:e._hoverdata,xaxes:g,yaxes:m,xvals:A,yvals:T})}function De(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa,e.ya||""].join(",")}var d=/<extra>([\s\S]*)<\/extra>/;function Oe(e,t,M){var S=M._fullLayout;var C=t.hovermode;var L=t.rotateLabels;var E=t.bgColor;var r=t.container;var n=t.outerContainer;var x=t.commonLabelOpts||{};var D=t.fontFamily||K.HOVERFONT;var O=t.fontSize||K.HOVERFONTSIZE;var w=e[0];var A=w.xa;var T=w.ya;var a=C.charAt(0);var P=w[a+"Label"];var i=n.node().getBoundingClientRect();var I=i.top;var R=i.width;var z=i.height;var N=P!==undefined&&w.distance<=t.hoverdistance&&(C==="x"||C==="y");if(N){var o=true;var s,l;for(s=0;s<e.length;s++){if(o&&e[s].zLabel===undefined)o=false;l=e[s].hoverinfo||e[s].trace.hoverinfo;if(l){var c=Array.isArray(l)?l:l.split("+");if(c.indexOf("all")===-1&&c.indexOf(C)===-1){N=false;break}}}if(o)N=false}var u=r.selectAll("g.axistext").data(N?[0]:[]);u.enter().append("g").classed("axistext",true);u.exit().remove();u.each(function(){var e=xe.select(this);var t=Ae.ensureSingle(e,"path","",function(e){e.style({"stroke-width":"1px"})});var r=Ae.ensureSingle(e,"text","",function(e){e.attr("data-notex",1)});var n=x.bgcolor||Me.defaultLine;var a=x.bordercolor||Me.contrast(n);var i=Me.contrast(n);var o={family:x.font.family||D,size:x.font.size||O,color:x.font.color||i};t.style({fill:n,stroke:a});r.text(P).call(Q.font,o).call($.positionText,0,0).call($.convertToTspans,M);e.attr("transform","");var s=r.node().getBoundingClientRect();var l,c;if(C==="x"){var u=A.side==="top"?"-":"";r.attr("text-anchor","middle").call($.positionText,0,A.side==="top"?I-s.bottom-ne-ae:I-s.top+ne+ae);l=A._offset+(w.x0+w.x1)/2;c=T._offset+(A.side==="top"?0:T._length);var f=s.width/2+ae;if(l<f){l=f;t.attr("d","M-"+(f-ne)+",0"+"L-"+(f-ne*2)+","+u+ne+"H"+(ae+s.width/2)+"v"+u+(ae*2+s.height)+"H-"+f+"V"+u+ne+"Z")}else if(l>S.width-f){l=S.width-f;t.attr("d","M"+(f-ne)+",0"+"L"+f+","+u+ne+"v"+u+(ae*2+s.height)+"H-"+f+"V"+u+ne+"H"+(f-ne*2)+"Z")}else{t.attr("d","M0,0"+"L"+ne+","+u+ne+"H"+(ae+s.width/2)+"v"+u+(ae*2+s.height)+"H-"+(ae+s.width/2)+"V"+u+ne+"H-"+ne+"Z")}}else{var d;var h;var p;if(T.side==="right"){d="start";h=1;p="";l=A._offset+A._length}else{d="end";h=-1;p="-";l=A._offset}c=T._offset+(w.y0+w.y1)/2;r.attr("text-anchor",d);t.attr("d","M0,0"+"L"+p+ne+","+ne+"V"+(ae+s.height/2)+"h"+p+(ae*2+s.width)+"V-"+(ae+s.height/2)+"H"+p+ne+"V-"+ne+"Z");var v=s.height/2;var g=I-s.top-v;var m="clip"+S._uid+"commonlabel"+T._id;var _;if(l<s.width+2*ae+ne){_="M-"+(ne+ae)+"-"+v+"h-"+(s.width-ae)+"V"+v+"h"+(s.width-ae)+"Z";var y=s.width-l+ae;$.positionText(r,y,g);if(d==="end"){r.selectAll("tspan").each(function(){var e=xe.select(this);var t=Q.tester.append("text").text(e.text()).call(Q.font,o);var r=t.node().getBoundingClientRect();if(Math.round(r.width)<Math.round(s.width)){e.attr("x",y-r.width)}t.remove()})}}else{$.positionText(r,h*(ae+ne),g);_=null}var b=S._topclips.selectAll("#"+m).data(_?[0]:[]);b.enter().append("clipPath").attr("id",m).append("path");b.exit().remove();b.select("path").attr("d",_);Q.setClipUrl(r,_?m:null,M)}e.attr("transform",Z(l,c))});if(Le.isUnifiedHover(C)){r.selectAll("g.hovertext").remove();if(e.length===0)return;var f={showlegend:true,legend:{title:{text:P,font:S.hoverlabel.font},font:S.hoverlabel.font,bgcolor:S.hoverlabel.bgcolor,bordercolor:S.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:S.legend?S.legend.traceorder:undefined,orientation:"v"}};var d={};ee(f,d,M._fullData);var h=d.legend;h.entries=[];for(var p=0;p<e.length;p++){var v=ie(e[p],true,C,S,P);var g=v[0];var m=v[1];var _=e[p];_.name=m;if(m!==""){_.text=m+" : "+g}else{_.text=g}var y=_.cd[_.index];if(y){if(y.mc)_.mc=y.mc;if(y.mcc)_.mc=y.mcc;if(y.mlc)_.mlc=y.mlc;if(y.mlcc)_.mlc=y.mlcc;if(y.mlw)_.mlw=y.mlw;if(y.mrc)_.mrc=y.mrc;if(y.dir)_.dir=y.dir}_._distinct=true;h.entries.push([_])}h.entries.sort(function(e,t){return e[0].trace.index-t[0].trace.index});h.layer=r;h._inHover=true;te(M,h);var b=e[0];var k=(b.y0+b.y1)/2;var F=(b.x0+b.x1)/2;var j=r.select("g.legend");var B=j.node().getBoundingClientRect();F+=A._offset;k+=T._offset-B.height/2;var H=B.width+2*ae;var U=F+H<=R;var V=F-H>=0;if(!U&&V){F-=H}else{F+=2*ae}var q=B.height+2*ae;var Y=k<=I;var G=k+q>=z;var W=q<=z;if(W){if(Y){k=T._offset+2*ae}else if(G){k=z-q}}j.attr("transform",Z(F,k));return j}var X=r.selectAll("g.hovertext").data(e,function(e){return De(e)});X.enter().append("g").classed("hovertext",true).each(function(){var e=xe.select(this);e.append("rect").call(Me.fill,Me.addOpacity(E,.8));e.append("text").classed("name",true);e.append("path").style("stroke-width","1px");e.append("text").classed("nums",true).call(Q.font,D,O)});X.exit().remove();X.each(function(e){var t=xe.select(this).attr("transform","");var r=e.color;if(Array.isArray(r)){r=r[e.eventData[0].pointNumber]}var n=e.bgcolor||r;var a=Me.combine(Me.opacity(n)?n:Me.defaultLine,E);var i=Me.combine(Me.opacity(r)?r:Me.defaultLine,E);var o=e.borderColor||Me.contrast(a);var s=ie(e,N,C,S,P,t);var l=s[0];var c=s[1];var u=t.select("text.nums").call(Q.font,e.fontFamily||D,e.fontSize||O,e.fontColor||o).text(l).attr("data-notex",1).call($.positionText,0,0).call($.convertToTspans,M);var f=t.select("text.name");var d=0;var h=0;if(c&&c!==l){f.call(Q.font,e.fontFamily||D,e.fontSize||O,i).text(c).attr("data-notex",1).call($.positionText,0,0).call($.convertToTspans,M);var p=f.node().getBoundingClientRect();d=p.width+2*ae;h=p.height+2*ae}else{f.remove();t.select("rect").remove()}t.select("path").style({fill:a,stroke:o});var v=u.node().getBoundingClientRect();var g=e.xa._offset+(e.x0+e.x1)/2;var m=e.ya._offset+(e.y0+e.y1)/2;var _=Math.abs(e.x1-e.x0);var y=Math.abs(e.y1-e.y0);var b=v.width+ne+ae+d;var x,w;e.ty0=I-v.top;e.bx=v.width+2*ae;e.by=Math.max(v.height+2*ae,h);e.anchor="start";e.txwidth=v.width;e.tx2width=d;e.offset=0;if(L){e.pos=g;x=m+y/2+b<=z;w=m-y/2-b>=0;if((e.idealAlign==="top"||!x)&&w){m-=y/2;e.anchor="end"}else if(x){m+=y/2;e.anchor="start"}else e.anchor="middle"}else{e.pos=m;x=g+_/2+b<=R;w=g-_/2-b>=0;if((e.idealAlign==="left"||!x)&&w){g-=_/2;e.anchor="end"}else if(x){g+=_/2;e.anchor="start"}else{e.anchor="middle";var A=b/2;var T=g+A-R;var k=g-A;if(T>0)g-=T;if(k<0)g+=-k}}u.attr("text-anchor",e.anchor);if(d)f.attr("text-anchor",e.anchor);t.attr("transform",Z(g,m)+(L?J(re):""))});return X}function ie(r,e,t,n,a,i){var o="";var s="";if(r.nameOverride!==undefined)r.name=r.nameOverride;if(r.name){if(r.trace._meta){r.name=Ae.templateString(r.name,r.trace._meta)}o=h(r.name,r.nameLength)}var l=t.charAt(0);var c=l==="x"?"y":"x";if(r.zLabel!==undefined){if(r.xLabel!==undefined)s+="x: "+r.xLabel+"<br>";if(r.yLabel!==undefined)s+="y: "+r.yLabel+"<br>";if(r.trace.type!=="choropleth"&&r.trace.type!=="choroplethmapbox"){s+=(s?"z: ":"")+r.zLabel}}else if(e&&r[l+"Label"]===a){s=r[c+"Label"]||""}else if(r.xLabel===undefined){if(r.yLabel!==undefined&&r.trace.type!=="scattercarpet"){s=r.yLabel}}else if(r.yLabel===undefined)s=r.xLabel;else s="("+r.xLabel+", "+r.yLabel+")";if((r.text||r.text===0)&&!Array.isArray(r.text)){s+=(s?"<br>":"")+r.text}if(r.extraText!==undefined)s+=(s?"<br>":"")+r.extraText;if(i&&s===""&&!r.hovertemplate){if(o==="")i.remove();s=o}var u=r.hovertemplate||false;if(u){var f=r.hovertemplateLabels||r;if(r[l+"Label"]!==a){f[l+"other"]=f[l+"Val"];f[l+"otherLabel"]=f[l+"Label"]}s=Ae.hovertemplateString(u,f,n._d3locale,r.eventData[0]||{},r.trace._meta);s=s.replace(d,function(e,t){o=h(t,r.nameLength);return""})}return[s,o]}function Pe(e,a,i){var t=0;var o=1;var r=e.size();var s=new Array(r);var l=0;e.each(function(e){var t=e[a];var r=t._id.charAt(0)==="x";var n=t.range;if(l===0&&n&&n[0]>n[1]!==r){o=-1}s[l++]=[{datum:e,traceIndex:e.trace.index,dp:0,pos:e.pos,posref:e.posref,size:e.by*(r?A:1)/2,pmin:0,pmax:r?i.width:i.height}]});s.sort(function(e,t){return e[0].posref-t[0].posref||o*(t[0].traceIndex-e[0].traceIndex)});var c,u,f,d,h,p,n;function v(e){var t=e[0];var r=e[e.length-1];u=t.pmin-t.pos-t.dp+t.size;f=r.pos+r.dp+r.size-t.pmax;if(u>.01){for(h=e.length-1;h>=0;h--)e[h].dp+=u;c=false}if(f<.01)return;if(u<-.01){for(h=e.length-1;h>=0;h--)e[h].dp-=f;c=false}if(!c)return;var n=0;for(d=0;d<e.length;d++){p=e[d];if(p.pos+p.dp+p.size>t.pmax)n++}for(d=e.length-1;d>=0;d--){if(n<=0)break;p=e[d];if(p.pos>t.pmax-1){p.del=true;n--}}for(d=0;d<e.length;d++){if(n<=0)break;p=e[d];if(p.pos<t.pmin+1){p.del=true;n--;f=p.size*2;for(h=e.length-1;h>=0;h--)e[h].dp-=f}}for(d=e.length-1;d>=0;d--){if(n<=0)break;p=e[d];if(p.pos+p.dp+p.size>t.pmax){p.del=true;n--}}}while(!c&&t<=r){t++;c=true;d=0;while(d<s.length-1){var g=s[d];var m=s[d+1];var _=g[g.length-1];var y=m[0];u=_.pos+_.dp+_.size-y.pos-y.dp+y.size;if(u>.01&&_.pmin===y.pmin&&_.pmax===y.pmax){for(h=m.length-1;h>=0;h--)m[h].dp+=u;g.push.apply(g,m);s.splice(d+1,1);n=0;for(h=g.length-1;h>=0;h--)n+=g[h].dp;f=n/g.length;for(h=g.length-1;h>=0;h--)g[h].dp-=f;c=false}else d++}s.forEach(v)}for(d=s.length-1;d>=0;d--){var b=s[d];for(h=b.length-1;h>=0;h--){var x=b[h];var w=x.datum;w.offset=x.dp;w.del=x.del}}}function Ie(e,p,t,r){var v=function(e){return e*t};var g=function(e){return e*r};e.each(function(e){var t=xe.select(this);if(e.del)return t.remove();var r=t.select("text.nums");var n=e.anchor;var a=n==="end"?-1:1;var i={start:1,end:-1,middle:0}[n];var o=i*(ne+ae);var s=o+i*(e.txwidth+ae);var l=0;var c=e.offset;var u=n==="middle";if(u){o-=e.tx2width/2;s+=e.txwidth/2+ae}if(p){c*=-_;l=e.offset*m}t.select("path").attr("d",u?"M-"+v(e.bx/2+e.tx2width/2)+","+g(c-e.by/2)+"h"+v(e.bx)+"v"+g(e.by)+"h-"+v(e.bx)+"Z":"M0,0L"+v(a*ne+l)+","+g(ne+c)+"v"+g(e.by/2-ne)+"h"+v(a*e.bx)+"v-"+g(e.by)+"H"+v(a*ne+l)+"V"+g(c-ne)+"Z");var f=l+o;var d=c+e.ty0-e.by/2+ae;var h=e.textAlign||"auto";if(h!=="auto"){if(h==="left"&&n!=="start"){r.attr("text-anchor","start");f=u?-e.bx/2-e.tx2width/2+ae:-e.bx-ae}else if(h==="right"&&n!=="end"){r.attr("text-anchor","end");f=u?e.bx/2-e.tx2width/2-ae:e.bx+ae}}r.call($.positionText,v(f),g(d));if(e.tx2width){t.select("text.name").call($.positionText,v(s+i*ae+l),g(c+e.ty0-e.by/2+ae));t.select("rect").call(Q.setRect,v(s+(i-1)*e.tx2width/2+l),g(c-e.by/2-1),v(e.tx2width),g(e.by+2))}})}function Re(a,e){var n=a.index;var i=a.trace||{};var o=a.cd[0];var r=a.cd[n]||{};function s(e){return e||we(e)&&e===0}var l=Array.isArray(n)?function(e,t){var r=Ae.castOption(o,n,e);return s(r)?r:Ae.extractOption({},i,"",t)}:function(e,t){return Ae.extractOption(r,i,e,t)};function t(e,t,r){var n=l(t,r);if(s(n))a[e]=n}t("hoverinfo","hi","hoverinfo");t("bgcolor","hbg","hoverlabel.bgcolor");t("borderColor","hbc","hoverlabel.bordercolor");t("fontFamily","htf","hoverlabel.font.family");t("fontSize","hts","hoverlabel.font.size");t("fontColor","htc","hoverlabel.font.color");t("nameLength","hnl","hoverlabel.namelength");t("textAlign","hta","hoverlabel.align");a.posref=e==="y"||e==="closest"&&i.orientation==="h"?a.xa._offset+(a.x0+a.x1)/2:a.ya._offset+(a.y0+a.y1)/2;a.x0=Ae.constrain(a.x0,0,a.xa._length);a.x1=Ae.constrain(a.x1,0,a.xa._length);a.y0=Ae.constrain(a.y0,0,a.ya._length);a.y1=Ae.constrain(a.y1,0,a.ya._length);if(a.xLabelVal!==undefined){a.xLabel="xLabel"in a?a.xLabel:j.hoverLabelText(a.xa,a.xLabelVal,i.xhoverformat);a.xVal=a.xa.c2d(a.xLabelVal)}if(a.yLabelVal!==undefined){a.yLabel="yLabel"in a?a.yLabel:j.hoverLabelText(a.ya,a.yLabelVal,i.yhoverformat);a.yVal=a.ya.c2d(a.yLabelVal)}if(a.zLabelVal!==undefined&&a.zLabel===undefined){a.zLabel=String(a.zLabelVal)}if(!isNaN(a.xerr)&&!(a.xa.type==="log"&&a.xerr<=0)){var c=j.tickText(a.xa,a.xa.c2l(a.xerr),"hover").text;if(a.xerrneg!==undefined){a.xLabel+=" +"+c+" / -"+j.tickText(a.xa,a.xa.c2l(a.xerrneg),"hover").text}else a.xLabel+="  "+c;if(e==="x")a.distance+=1}if(!isNaN(a.yerr)&&!(a.ya.type==="log"&&a.yerr<=0)){var u=j.tickText(a.ya,a.ya.c2l(a.yerr),"hover").text;if(a.yerrneg!==undefined){a.yLabel+=" +"+u+" / -"+j.tickText(a.ya,a.ya.c2l(a.yerrneg),"hover").text}else a.yLabel+="  "+u;if(e==="y")a.distance+=1}var f=a.hoverinfo||a.trace.hoverinfo;if(f&&f!=="all"){f=Array.isArray(f)?f:f.split("+");if(f.indexOf("x")===-1)a.xLabel=undefined;if(f.indexOf("y")===-1)a.yLabel=undefined;if(f.indexOf("z")===-1)a.zLabel=undefined;if(f.indexOf("text")===-1)a.text=undefined;if(f.indexOf("name")===-1)a.name=undefined}return a}function ze(e,t,r){var n=r.container;var a=r.fullLayout;var i=a._size;var o=r.event;var s=!!t.hLinePoint;var l=!!t.vLinePoint;var c,u;n.selectAll(".spikeline").remove();if(!(l||s))return;var f=Me.combine(a.plot_bgcolor,a.paper_bgcolor);if(s){var d=t.hLinePoint;var h,p;c=d&&d.xa;u=d&&d.ya;var v=u.spikesnap;if(v==="cursor"){h=o.pointerX;p=o.pointerY}else{h=c._offset+d.x;p=u._offset+d.y}var g=F.readability(d.color,f)<1.5?Me.contrast(f):d.color;var m=u.spikemode;var _=u.spikethickness;var y=u.spikecolor||g;var b=j.getPxPosition(e,u);var x,w;if(m.indexOf("toaxis")!==-1||m.indexOf("across")!==-1){if(m.indexOf("toaxis")!==-1){x=b;w=h}if(m.indexOf("across")!==-1){var A=u._counterDomainMin;var T=u._counterDomainMax;if(u.anchor==="free"){A=Math.min(A,u.position);T=Math.max(T,u.position)}x=i.l+A*i.w;w=i.l+T*i.w}n.insert("line",":first-child").attr({x1:x,x2:w,y1:p,y2:p,"stroke-width":_,stroke:y,"stroke-dasharray":Q.dashStyle(u.spikedash,_)}).classed("spikeline",true).classed("crisp",true);n.insert("line",":first-child").attr({x1:x,x2:w,y1:p,y2:p,"stroke-width":_+2,stroke:f}).classed("spikeline",true).classed("crisp",true)}if(m.indexOf("marker")!==-1){n.insert("circle",":first-child").attr({cx:b+(u.side!=="right"?_:-_),cy:p,r:_,fill:y}).classed("spikeline",true)}}if(l){var k=t.vLinePoint;var M,S;c=k&&k.xa;u=k&&k.ya;var C=c.spikesnap;if(C==="cursor"){M=o.pointerX;S=o.pointerY}else{M=c._offset+k.x;S=u._offset+k.y}var L=F.readability(k.color,f)<1.5?Me.contrast(f):k.color;var E=c.spikemode;var D=c.spikethickness;var O=c.spikecolor||L;var P=j.getPxPosition(e,c);var I,R;if(E.indexOf("toaxis")!==-1||E.indexOf("across")!==-1){if(E.indexOf("toaxis")!==-1){I=P;R=S}if(E.indexOf("across")!==-1){var z=c._counterDomainMin;var N=c._counterDomainMax;if(c.anchor==="free"){z=Math.min(z,c.position);N=Math.max(N,c.position)}I=i.t+(1-N)*i.h;R=i.t+(1-z)*i.h}n.insert("line",":first-child").attr({x1:M,x2:M,y1:I,y2:R,"stroke-width":D,stroke:O,"stroke-dasharray":Q.dashStyle(c.spikedash,D)}).classed("spikeline",true).classed("crisp",true);n.insert("line",":first-child").attr({x1:M,x2:M,y1:I,y2:R,"stroke-width":D+2,stroke:f}).classed("spikeline",true).classed("crisp",true)}if(E.indexOf("marker")!==-1){n.insert("circle",":first-child").attr({cx:M,cy:P-(c.side!=="top"?D:-D),r:D,fill:O}).classed("spikeline",true)}}}function Ne(e,t,r){if(!r||r.length!==e._hoverdata.length)return true;for(var n=r.length-1;n>=0;n--){var a=r[n];var i=e._hoverdata[n];if(a.curveNumber!==i.curveNumber||String(a.pointNumber)!==String(i.pointNumber)||String(a.pointNumbers)!==String(i.pointNumbers)){return true}}return false}function Fe(e,t){if(!t)return true;if(t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint)return true;return false}function h(e,t){return $.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em"]})}function je(e,t){var r=t.charAt(0);var n=[];var a=[];var i=[];for(var o=0;o<e.length;o++){var s=e[o];if(Ce.traceIs(s.trace,"bar-like")||Ce.traceIs(s.trace,"box-violin")){i.push(s)}else if(s.trace[r+"period"]){a.push(s)}else{n.push(s)}}return n.concat(a).concat(i)}function Be(e,t,r){var n=t[e+"a"];var a=t[e+"Val"];if(n.type==="category")a=n._categoriesMap[a];else if(n.type==="date")a=n.d2c(a);var i=t.cd[t.index];if(i&&i.t&&i.t.posLetter===n._id){if(r.boxmode==="group"||r.violinmode==="group"){a+=i.t.dPos}}return a}},{"../../lib":230,"../../lib/events":223,"../../lib/override_cursor":241,"../../lib/svg_text_utils":252,"../../plots/cartesian/axes":276,"../../registry":313,"../color":100,"../dragelement":119,"../drawing":122,"../legend/defaults":152,"../legend/draw":153,"./constants":134,"./helpers":136,"@plotly/d3":11,"fast-isnumeric":15,tinycolor2:65}],138:[function(e,t,r){"use strict";var o=e("../../lib");var s=e("../color");var l=e("./helpers").isUnifiedHover;t.exports=function e(t,r,n,a){a=a||{};function i(e){if(!a.font[e]){a.font[e]=r.legend?r.legend.font[e]:r.font[e]}}if(r&&l(r.hovermode)){if(!a.font)a.font={};i("size");i("family");i("color");if(r.legend){if(!a.bgcolor)a.bgcolor=s.combine(r.legend.bgcolor,r.paper_bgcolor);if(!a.bordercolor)a.bordercolor=r.legend.bordercolor}else{if(!a.bgcolor)a.bgcolor=r.paper_bgcolor}}n("hoverlabel.bgcolor",a.bgcolor);n("hoverlabel.bordercolor",a.bordercolor);n("hoverlabel.namelength",a.namelength);o.coerceFont(n,"hoverlabel.font",a.font);n("hoverlabel.align",a.align)}},{"../../lib":230,"../color":100,"./helpers":136}],139:[function(e,t,r){"use strict";var a=e("../../lib");var i=e("./layout_attributes");t.exports=function e(r,n){function t(e,t){if(n[e]!==undefined)return n[e];return a.coerce(r,n,i,e,t)}t("clickmode");return t("hovermode")}},{"../../lib":230,"./layout_attributes":141}],140:[function(e,t,r){"use strict";var n=e("@plotly/d3");var a=e("../../lib");var i=e("../dragelement");var o=e("./helpers");var s=e("./layout_attributes");var l=e("./hover");t.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:s},attributes:e("./attributes"),layoutAttributes:s,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:o.getDistanceFunction,getClosest:o.getClosest,inbox:o.inbox,quadrature:o.quadrature,appendArrayPointValue:o.appendArrayPointValue,castHoverOption:u,castHoverinfo:f,hover:l.hover,unhover:i.unhover,loneHover:l.loneHover,loneUnhover:c,click:e("./click")};function c(e){var t=a.isD3Selection(e)?e:n.select(e);t.selectAll("g.hovertext").remove();t.selectAll(".spikeline").remove()}function u(e,t,r){return a.castOption(e,t,"hoverlabel."+r)}function f(t,r,e){function n(e){return a.coerceHoverinfo({hoverinfo:e},{_module:t._module},r)}return a.castOption(t,e,"hoverinfo",n)}},{"../../lib":230,"../dragelement":119,"./attributes":131,"./calc":132,"./click":133,"./constants":134,"./defaults":135,"./helpers":136,"./hover":137,"./layout_attributes":141,"./layout_defaults":142,"./layout_global_defaults":143,"@plotly/d3":11}],141:[function(e,t,r){"use strict";var n=e("./constants");var a=e("../../plots/font_attributes")({editType:"none"});a.family.dflt=n.HOVERFONT;a.size.dflt=n.HOVERFONTSIZE;t.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",false],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",false,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:a,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":305,"./constants":134}],142:[function(e,t,r){"use strict";var c=e("../../lib");var u=e("./layout_attributes");var f=e("./hovermode_defaults");var d=e("./hoverlabel_defaults");t.exports=function e(r,n){function t(e,t){return c.coerce(r,n,u,e,t)}var a=f(r,n);if(a){t("hoverdistance");t("spikedistance")}var i=t("dragmode");if(i==="select")t("selectdirection");var o=n._has("mapbox");var s=n._has("geo");var l=n._basePlotModules.length;if(n.dragmode==="zoom"&&((o||s)&&l===1||o&&s&&l===2)){n.dragmode="pan"}d(r,n,t)}},{"../../lib":230,"./hoverlabel_defaults":138,"./hovermode_defaults":139,"./layout_attributes":141}],143:[function(e,t,r){"use strict";var a=e("../../lib");var i=e("./hoverlabel_defaults");var o=e("./layout_attributes");t.exports=function e(r,n){function t(e,t){return a.coerce(r,n,o,e,t)}i(r,n,t)}},{"../../lib":230,"./hoverlabel_defaults":138,"./layout_attributes":141}],144:[function(e,t,r){"use strict";var w=e("../../lib");var n=e("../../lib/regex").counter;var a=e("../../plots/domain").attributes;var i=e("../../plots/cartesian/constants").idRegex;var A=e("../../plot_api/plot_template");var T={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:true,dimensions:2,items:{valType:"enumerated",values:[n("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:true,items:{valType:"enumerated",values:[i.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:true,items:{valType:"enumerated",values:[i.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:a({name:"grid",editType:"plot",noGridCell:true},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function P(e,t,r){var n=t[r+"axes"];var a=Object.keys((e._splomAxes||{})[r]||{});if(Array.isArray(n))return n;if(a.length)return a}function o(e,t){var r=e.grid||{};var n=P(t,r,"x");var a=P(t,r,"y");if(!e.grid&&!n&&!a)return;var i=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]);var o=Array.isArray(n);var s=Array.isArray(a);var l=o&&n!==r.xaxes&&s&&a!==r.yaxes;var c,u;if(i){c=r.subplots.length;u=r.subplots[0].length}else{if(s)c=a.length;if(o)u=n.length}var f=A.newContainer(t,"grid");function d(e,t){return w.coerce(r,f,T,e,t)}var h=d("rows",c);var p=d("columns",u);if(!(h*p>1)){delete t.grid;return}if(!i&&!o&&!s){var v=d("pattern")==="independent";if(v)i=true}f._hasSubplotGrid=i;var g=d("roworder");var m=g==="top to bottom";var _=i?.2:.1;var y=i?.3:.1;var b,x;if(l&&t._splomGridDflt){b=t._splomGridDflt.xside;x=t._splomGridDflt.yside}f._domains={x:k("x",d,_,b,p),y:k("y",d,y,x,h,m)}}function k(e,t,r,n,a,i){var o=t(e+"gap",r);var s=t("domain."+e);t(e+"side",n);var l=new Array(a);var c=s[0];var u=(s[1]-c)/(a-o);var f=u*(1-o);for(var d=0;d<a;d++){var h=c+u*d;l[i?a-1-d:d]=[h,h+f]}return l}function s(e,t){var r=t.grid;if(!r||!r._domains)return;var n=e.grid||{};var a=t._subplots;var i=r._hasSubplotGrid;var o=r.rows;var s=r.columns;var l=r.pattern==="independent";var c,u,f,d,h,p,v;var g=r._axisMap={};if(i){var m=n.subplots||[];p=r.subplots=new Array(o);var _=1;for(c=0;c<o;c++){var y=p[c]=new Array(s);var b=m[c]||[];for(u=0;u<s;u++){if(l){h=_===1?"xy":"x"+_+"y"+_;_++}else h=b[u];y[u]="";if(a.cartesian.indexOf(h)!==-1){v=h.indexOf("y");f=h.slice(0,v);d=h.slice(v);if(g[f]!==undefined&&g[f]!==u||g[d]!==undefined&&g[d]!==c){continue}y[u]=h;g[f]=u;g[d]=c}}}}else{var x=P(t,n,"x");var w=P(t,n,"y");r.xaxes=I(x,a.xaxis,s,g,"x");r.yaxes=I(w,a.yaxis,o,g,"y")}var A=r._anchors={};var T=r.roworder==="top to bottom";for(var k in g){var M=k.charAt(0);var S=r[M+"side"];var C,L,E;if(S.length<8){A[k]="free"}else if(M==="x"){if(S.charAt(0)==="t"===T){C=0;L=1;E=o}else{C=o-1;L=-1;E=-1}if(i){var D=g[k];for(c=C;c!==E;c+=L){h=p[c][D];if(!h)continue;v=h.indexOf("y");if(h.slice(0,v)===k){A[k]=h.slice(v);break}}}else{for(c=C;c!==E;c+=L){d=r.yaxes[c];if(a.cartesian.indexOf(k+d)!==-1){A[k]=d;break}}}}else{if(S.charAt(0)==="l"){C=0;L=1;E=s}else{C=s-1;L=-1;E=-1}if(i){var O=g[k];for(c=C;c!==E;c+=L){h=p[O][c];if(!h)continue;v=h.indexOf("y");if(h.slice(v)===k){A[k]=h.slice(0,v);break}}}else{for(c=C;c!==E;c+=L){f=r.xaxes[c];if(a.cartesian.indexOf(f+k)!==-1){A[k]=f;break}}}}}}function I(e,r,t,n,a){var i=new Array(t);var o;function s(e,t){if(r.indexOf(t)!==-1&&n[t]===undefined){i[e]=t;n[t]=e}else i[e]=""}if(Array.isArray(e)){for(o=0;o<t;o++){s(o,e[o])}}else{s(0,a);for(o=1;o<t;o++){s(o,a+(o+1))}}return i}t.exports={moduleType:"component",name:"grid",schema:{layout:{grid:T}},layoutAttributes:T,sizeDefaults:o,contentDefaults:s}},{"../../lib":230,"../../lib/regex":246,"../../plot_api/plot_template":265,"../../plots/cartesian/constants":283,"../../plots/domain":304}],145:[function(e,t,r){"use strict";var n=e("../../plots/cartesian/constants");var a=e("../../plot_api/plot_template").templatedArray;var i=e("../../constants/axis_placeable_objects");t.exports=a("image",{visible:{valType:"boolean",dflt:true,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",n.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",n.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":206,"../../plot_api/plot_template":265,"../../plots/cartesian/constants":283}],146:[function(e,t,r){"use strict";var m=e("fast-isnumeric");var _=e("../../lib/to_log_range");t.exports=function e(t,r,n,a){r=r||{};var i=n==="log"&&r.type==="linear";var o=n==="linear"&&r.type==="log";if(!(i||o))return;var s=t._fullLayout.images;var l=r._id.charAt(0);var c;var u;for(var f=0;f<s.length;f++){c=s[f];u="images["+f+"].";if(c[l+"ref"]===r._id){var d=c[l];var h=c["size"+l];var p=null;var v=null;if(i){p=_(d,r.range);var g=h/Math.pow(10,p)/2;v=2*Math.log(g+Math.sqrt(1+g*g))/Math.LN10}else{p=Math.pow(10,d);v=p*(Math.pow(10,h/2)-Math.pow(10,-h/2))}if(!m(p)){p=null;v=null}else if(!m(v))v=null;a(u+l,p);a(u+"size"+l,v)}}}},{"../../lib/to_log_range":254,"fast-isnumeric":15}],147:[function(e,t,r){"use strict";var d=e("../../lib");var h=e("../../plots/cartesian/axes");var a=e("../../plots/array_container_defaults");var p=e("./attributes");var i="images";t.exports=function e(t,r){var n={name:i,handleItemDefaults:o};a(t,r,n)};function o(r,n,e){function t(e,t){return d.coerce(r,n,p,e,t)}var a=t("source");var i=t("visible",!!a);if(!i)return n;t("layer");t("xanchor");t("yanchor");t("sizex");t("sizey");t("sizing");t("opacity");var o={_fullLayout:e};var s=["x","y"];for(var l=0;l<2;l++){var c=s[l];var u=h.coerceRef(r,n,o,c,"paper",undefined);if(u!=="paper"){var f=h.getFromId(o,u);f._imgIndices.push(n._index)}h.coercePosition(n,o,t,u,c,0)}return n}},{"../../lib":230,"../../plots/array_container_defaults":271,"../../plots/cartesian/axes":276,"./attributes":145}],148:[function(e,t,r){"use strict";var b=e("@plotly/d3");var x=e("../drawing");var w=e("../../plots/cartesian/axes");var v=e("../../plots/cartesian/axis_ids");var g=e("../../constants/xmlns_namespaces");t.exports=function e(m){var _=m._fullLayout;var t=[];var r={};var n=[];var a;var i;for(i=0;i<_.images.length;i++){var o=_.images[i];if(o.visible){if(o.layer==="below"&&o.xref!=="paper"&&o.yref!=="paper"){a=v.ref2id(o.xref)+v.ref2id(o.yref);var s=_._plots[a];if(!s){n.push(o);continue}if(s.mainplot){a=s.mainplot.id}if(!r[a]){r[a]=[]}r[a].push(o)}else if(o.layer==="above"){t.push(o)}else{n.push(o)}}}var y={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function l(r){var a=b.select(this);if(this._imgSrc===r.source){return}a.attr("xmlns",g.svg);if(r.source&&r.source.slice(0,5)==="data:"){a.attr("xlink:href",r.source);this._imgSrc=r.source}else{var e=new Promise(function(n){var e=new Image;this.img=e;e.setAttribute("crossOrigin","anonymous");e.onerror=t;e.onload=function(){var e=document.createElement("canvas");e.width=this.width;e.height=this.height;var t=e.getContext("2d");t.drawImage(this,0,0);var r=e.toDataURL("image/png");a.attr("xlink:href",r);n()};a.on("error",t);e.src=r.source;this._imgSrc=r.source;function t(){a.remove();n()}}.bind(this));m._promises.push(e)}}function c(e){var t=b.select(this);var r=w.getFromId(m,e.xref);var n=w.getFromId(m,e.yref);var a=w.getRefType(e.xref)==="domain";var i=w.getRefType(e.yref)==="domain";var o=_._size;var s,l;if(r!==undefined){s=typeof e.xref==="string"&&a?r._length*e.sizex:Math.abs(r.l2p(e.sizex)-r.l2p(0))}else{s=e.sizex*o.w}if(n!==undefined){l=typeof e.yref==="string"&&i?n._length*e.sizey:Math.abs(n.l2p(e.sizey)-n.l2p(0))}else{l=e.sizey*o.h}var c=s*y.x[e.xanchor].offset;var u=l*y.y[e.yanchor].offset;var f=y.x[e.xanchor].sizing+y.y[e.yanchor].sizing;var d,h;if(r!==undefined){d=typeof e.xref==="string"&&a?r._length*e.x+r._offset:r.r2p(e.x)+r._offset}else{d=e.x*o.w+o.l}d+=c;if(n!==undefined){h=typeof e.yref==="string"&&i?n._length*(1-e.y)+n._offset:n.r2p(e.y)+n._offset}else{h=o.h-e.y*o.h+o.t}h+=u;switch(e.sizing){case"fill":f+=" slice";break;case"stretch":f="none";break}t.attr({x:d,y:h,width:s,height:l,preserveAspectRatio:f,opacity:e.opacity});var p=r&&w.getRefType(e.xref)!=="domain"?r._id:"";var v=n&&w.getRefType(e.yref)!=="domain"?n._id:"";var g=p+v;x.setClipUrl(t,g?"clip"+_._uid+g:null,m)}var u=_._imageLowerLayer.selectAll("image").data(n);var f=_._imageUpperLayer.selectAll("image").data(t);u.enter().append("image");f.enter().append("image");u.exit().remove();f.exit().remove();u.each(function(e){l.bind(this)(e);c.bind(this)(e)});f.each(function(e){l.bind(this)(e);c.bind(this)(e)});var d=Object.keys(_._plots);for(i=0;i<d.length;i++){a=d[i];var h=_._plots[a];if(!h.imagelayer)continue;var p=h.imagelayer.selectAll("image").data(r[a]||[]);p.enter().append("image");p.exit().remove();p.each(function(e){l.bind(this)(e);c.bind(this)(e)})}}},{"../../constants/xmlns_namespaces":211,"../../plots/cartesian/axes":276,"../../plots/cartesian/axis_ids":280,"../drawing":122,"@plotly/d3":11}],149:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":289,"./attributes":145,"./convert_coords":146,"./defaults":147,"./draw":148}],150:[function(e,t,r){"use strict";var n=e("../../plots/font_attributes");var a=e("../color/attributes");t.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:n({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",false],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",false],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:n({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":305,"../color/attributes":99}],151:[function(e,t,r){"use strict";t.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],152:[function(e,t,r){"use strict";var x=e("../../registry");var w=e("../../lib");var A=e("../../plot_api/plot_template");var T=e("./attributes");var k=e("../../plots/layout_attributes");var M=e("./helpers");t.exports=function e(t,r,n){var a=t.legend||{};var i=0;var o=false;var s="normal";for(var l=0;l<n.length;l++){var c=n[l];if(!c.visible)continue;if(c.showlegend||c._dfltShowLegend&&!(c._module&&c._module.attributes&&c._module.attributes.showlegend&&c._module.attributes.showlegend.dflt===false)){i++;if(c.showlegend){o=true;if(x.traceIs(c,"pie-like")||c._input.showlegend===true){i++}}}if(x.traceIs(c,"bar")&&r.barmode==="stack"||["tonextx","tonexty"].indexOf(c.fill)!==-1){s=M.isGrouped({traceorder:s})?"grouped+reversed":"reversed"}if(c.legendgroup!==undefined&&c.legendgroup!==""){s=M.isReversed({traceorder:s})?"reversed+grouped":"grouped"}}var u=w.coerce(t,r,k,"showlegend",o&&i>1);if(u===false&&!a.uirevision)return;var f=A.newContainer(r,"legend");function d(e,t){return w.coerce(a,f,T,e,t)}d("uirevision",r.uirevision);if(u===false)return;d("bgcolor",r.paper_bgcolor);d("bordercolor");d("borderwidth");var h=w.coerceFont(d,"font",r.font);var p=d("orientation");var v=p==="h";var g,m,_;if(v){g=0;if(x.getComponentMethod("rangeslider","isVisible")(t.xaxis)){m=1.1;_="bottom"}else{m=-.1;_="top"}}else{g=1.02;m=1;_="auto"}d("traceorder",s);if(M.isGrouped(r.legend))d("tracegroupgap");d("itemsizing");d("itemwidth");d("itemclick");d("itemdoubleclick");d("x",g);d("xanchor");d("y",m);d("yanchor",_);d("valign");w.noneOrAll(a,f,["x","y"]);var y=d("title.text");if(y){d("title.side",v?"left":"top");var b=w.extendFlat({},h,{size:w.bigFont(h.size)});w.coerceFont(d,"title.font",b)}}},{"../../lib":230,"../../plot_api/plot_template":265,"../../plots/layout_attributes":309,"../../registry":313,"./attributes":150,"./helpers":156}],153:[function(e,t,r){"use strict";var F=e("@plotly/d3");var R=e("../../lib");var o=e("../../plots/plots");var z=e("../../registry");var c=e("../../lib/events");var N=e("../dragelement");var j=e("../drawing");var s=e("../color");var m=e("../../lib/svg_text_utils");var u=e("./handle_click");var B=e("./constants");var n=e("../../constants/alignment");var _=n.LINE_SPACING;var H=n.FROM_TL;var i=n.FROM_BR;var l=e("./get_legend_data");var f=e("./style");var U=e("./helpers");var y=1;t.exports=function e(t,r){if(!r)r=t._fullLayout.legend||{};return a(t,r)};function a(T,k){var M=T._fullLayout;var S="legend"+M._uid;var C;var L=k._inHover;if(L){C=k.layer;S+="-hover"}else{C=M._infolayer}if(!C)return;if(!T._legendMouseDownTime)T._legendMouseDownTime=0;var e;if(!L){if(!T.calcdata)return;e=M.showlegend&&l(T.calcdata,k)}else{if(!k.entries)return;e=l(k.entries,k)}var r=M.hiddenlabels||[];if(!L&&(!M.showlegend||!e.length)){C.selectAll(".legend").remove();M._topdefs.select("#"+S).remove();return o.autoMargin(T,"legend")}var E=R.ensureSingle(C,"g","legend",function(e){if(!L)e.attr("pointer-events","all")});var D=R.ensureSingleById(M._topdefs,"clipPath",S,function(e){e.append("rect")});var O=R.ensureSingle(E,"rect","bg",function(e){e.attr("shape-rendering","crispEdges")});O.call(s.stroke,k.bordercolor).call(s.fill,k.bgcolor).style("stroke-width",k.borderwidth+"px");var P=R.ensureSingle(E,"g","scrollbox");var t=k.title;k._titleWidth=0;k._titleHeight=0;if(t.text){var n=R.ensureSingle(P,"text","legendtitletext");n.attr("text-anchor","start").call(j.font,t.font).text(t.text);v(n,P,T,k,y)}else{P.selectAll(".legendtitletext").remove()}var I=R.ensureSingle(E,"rect","scrollbar",function(e){e.attr(B.scrollBarEnterAttrs).call(s.fill,B.scrollBarColor)});var a=P.selectAll("g.groups").data(e);a.enter().append("g").attr("class","groups");a.exit().remove();var i=a.selectAll("g.traces").data(R.identity);i.enter().append("g").attr("class","traces");i.exit().remove();i.style("opacity",function(e){var t=e[0].trace;if(z.traceIs(t,"pie-like")){return r.indexOf(e[0].label)!==-1?.5:1}else{return t.visible==="legendonly"?.5:1}}).each(function(){F.select(this).call(d,T,k)}).call(f,T,k).each(function(){if(!L)F.select(this).call(p,T)});R.syncOrAsync([o.previousPromises,function(){return b(T,a,i,k)},function(){if(!L&&Y(T))return;var a=M._size;var n=k.borderwidth;var e=a.l+a.w*k.x-H[G(k)]*k._width;var t=a.t+a.h*(1-k.y)-H[W(k)]*k._effHeight;if(!L&&M.margin.autoexpand){var r=e;var i=t;e=R.constrain(e,0,M.width-k._width);t=R.constrain(t,0,M.height-k._effHeight);if(e!==r){R.log("Constrain legend.x to make legend fit inside graph")}if(t!==i){R.log("Constrain legend.y to make legend fit inside graph")}}if(!L)j.setTranslate(E,e,t);I.on(".drag",null);E.on("wheel",null);if(L||k._height<=k._maxHeight||T._context.staticPlot){var o=k._effHeight;if(L)o=k._height;O.attr({width:k._width-n,height:o-n,x:n/2,y:n/2});j.setTranslate(P,0,0);D.select("rect").attr({width:k._width-2*n,height:o-2*n,x:n,y:n});j.setClipUrl(P,S,T);j.setRect(I,0,0,0,0);delete k._scrollY}else{var s=Math.max(B.scrollBarMinHeight,k._effHeight*k._effHeight/k._height);var l=k._effHeight-s-2*B.scrollBarMargin;var c=k._height-k._effHeight;var u=l/c;var f=Math.min(k._scrollY||0,c);O.attr({width:k._width-2*n+B.scrollBarWidth+B.scrollBarMargin,height:k._effHeight-n,x:n/2,y:n/2});D.select("rect").attr({width:k._width-2*n+B.scrollBarWidth+B.scrollBarMargin,height:k._effHeight-2*n,x:n,y:n+f});j.setClipUrl(P,S,T);y(f,s,u);E.on("wheel",function(){f=R.constrain(k._scrollY+F.event.deltaY/l*c,0,c);y(f,s,u);if(f!==0&&f!==c){F.event.preventDefault()}});var d,h,p;var v=function(e,t,r){var n=(r-t)/u+e;return R.constrain(n,0,c)};var g=function(e,t,r){var n=(t-r)/u+e;return R.constrain(n,0,c)};var m=F.behavior.drag().on("dragstart",function(){var e=F.event.sourceEvent;if(e.type==="touchstart"){d=e.changedTouches[0].clientY}else{d=e.clientY}p=f}).on("drag",function(){var e=F.event.sourceEvent;if(e.buttons===2||e.ctrlKey)return;if(e.type==="touchmove"){h=e.changedTouches[0].clientY}else{h=e.clientY}f=v(p,d,h);y(f,s,u)});I.call(m);var _=F.behavior.drag().on("dragstart",function(){var e=F.event.sourceEvent;if(e.type==="touchstart"){d=e.changedTouches[0].clientY;p=f}}).on("drag",function(){var e=F.event.sourceEvent;if(e.type==="touchmove"){h=e.changedTouches[0].clientY;f=g(p,d,h);y(f,s,u)}});P.call(_)}function y(e,t,r){k._scrollY=T._fullLayout.legend._scrollY=e;j.setTranslate(P,0,-e);j.setRect(I,k._width,B.scrollBarMargin+e*r,B.scrollBarWidth,t);D.select("rect").attr("y",n+e)}if(T._context.edits.legendPosition){var b,x,w,A;E.classed("cursor-move",true);N.init({element:E.node(),gd:T,prepFn:function(){var e=j.getTranslate(E);w=e.x;A=e.y},moveFn:function(e,t){var r=w+e;var n=A+t;j.setTranslate(E,r,n);b=N.align(r,0,a.l,a.l+a.w,k.xanchor);x=N.align(n,0,a.t+a.h,a.t,k.yanchor)},doneFn:function(){if(b!==undefined&&x!==undefined){z.call("_guiRelayout",T,{"legend.x":b,"legend.y":x})}},clickFn:function(e,t){var r=C.selectAll("g.traces").filter(function(){var e=this.getBoundingClientRect();return t.clientX>=e.left&&t.clientX<=e.right&&t.clientY>=e.top&&t.clientY<=e.bottom});if(r.size()>0){V(T,E,r,e,t)}}})}}],T)}function V(e,t,r,n,a){var i=r.data()[0][0].trace;var o={event:a,node:r.node(),curveNumber:i.index,expandedIndex:i._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};if(i._group){o.group=i._group}if(z.traceIs(i,"pie-like")){o.label=r.datum()[0].label}var s=c.triggerHandler(e,"plotly_legendclick",o);if(s===false)return;if(n===1){t._clickTimeout=setTimeout(function(){if(!e._fullLayout)return;u(r,e,n)},e._context.doubleClickDelay)}else if(n===2){if(t._clickTimeout)clearTimeout(t._clickTimeout);e._legendMouseDownTime=0;var l=c.triggerHandler(e,"plotly_legenddoubleclick",o);if(l!==false)u(r,e,n)}}function d(o,s,l){var c=o.data()[0][0];var u=c.trace;var e=z.traceIs(u,"pie-like");var t=!l._inHover&&s._context.edits.legendText&&!e;var f=l._maxNameLength;var r,n;if(c.groupTitle){r=c.groupTitle.text;n=c.groupTitle.font}else{n=l.font;if(!l.entries){r=e?c.label:u.name;if(u._meta){r=R.templateString(r,u._meta)}}else{r=c.text}}var a=R.ensureSingle(o,"text","legendtext");a.attr("text-anchor","start").call(j.font,n).text(t?h(r,f):r);var i=l.itemwidth+B.itemGap*2;m.positionText(a,i,0);if(t){a.call(m.makeEditable,{gd:s,text:r}).call(v,o,s,l).on("edit",function(e){this.text(h(e,f)).call(v,o,s,l);var t=c.trace._fullInput||{};var r={};if(z.hasTransform(t,"groupby")){var n=z.getTransformIndices(t,"groupby");var a=n[n.length-1];var i=R.keyedContainer(t,"transforms["+a+"].styles","target","value.name");i.set(c.trace._group,e);r=i.constructUpdate()}else{r.name=e}return z.call("_guiRestyle",s,r,u.index)})}else{v(a,o,s,l)}}function h(e,t){var r=Math.max(4,t);if(e&&e.trim().length>=r/2)return e;e=e||"";for(var n=r-e.length;n>0;n--)e+=" ";return e}function p(t,r){var n=r._context.doubleClickDelay;var e;var a=1;var i=R.ensureSingle(t,"rect","legendtoggle",function(e){if(!r._context.staticPlot){e.style("cursor","pointer").attr("pointer-events","all")}e.call(s.fill,"rgba(0,0,0,0)")});if(r._context.staticPlot)return;i.on("mousedown",function(){e=(new Date).getTime();if(e-r._legendMouseDownTime<n){a+=1}else{a=1;r._legendMouseDownTime=e}});i.on("mouseup",function(){if(r._dragged||r._editing)return;var e=r._fullLayout.legend;if((new Date).getTime()-r._legendMouseDownTime>n){a=Math.max(a-1,1)}V(r,e,t,a,F.event)})}function v(e,t,r,n,a){if(n._inHover)e.attr("data-notex",true);m.convertToTspans(e,r,function(){g(t,r,n,a)})}function g(e,t,r,n){var a=e.data()[0][0];if(!r._inHover&&a&&!a.trace.showlegend){e.remove();return}var i=e.select("g[class*=math-group]");var o=i.node();if(!r)r=t._fullLayout.legend;var s=r.borderwidth;var l;if(n===y){l=r.title.font}else if(a.groupTitle){l=a.groupTitle.font}else{l=r.font}var c=l.size*_;var u,f;if(o){var d=j.bBox(o);u=d.height;f=d.width;if(n===y){j.setTranslate(i,s,s+u*.75)}else{j.setTranslate(i,0,u*.25)}}else{var h=e.select(n===y?".legendtitletext":".legendtext");var p=m.lineCount(h);var v=h.node();u=c*p;f=v?j.bBox(v).width:0;if(n===y){if(r.title.side==="left"){f+=B.itemGap*2}m.positionText(h,s+B.titlePad,s+c)}else{var g=B.itemGap*2+r.itemwidth;if(a.groupTitle){g=B.itemGap;f-=r.itemwidth}m.positionText(h,g,-c*((p-1)/2-.3))}}if(n===y){r._titleWidth=f;r._titleHeight=u}else{a.lineHeight=c;a.height=Math.max(u,16)+3;a.width=f}}function q(e){var t=0;var r=0;var n=e.title.side;if(n){if(n.indexOf("left")!==-1){t=e._titleWidth}if(n.indexOf("top")!==-1){r=e._titleHeight}}return[t,r]}function b(e,t,r,a){var n=e._fullLayout;if(!a)a=n.legend;var i=n._size;var o=U.isVertical(a);var s=U.isGrouped(a);var l=a.borderwidth;var c=2*l;var u=B.itemGap;var f=a.itemwidth+u*2;var d=2*(l+u);var h=W(a);var p=a.y<0||a.y===0&&h==="top";var v=a.y>1||a.y===1&&h==="bottom";var g=a.tracegroupgap;a._maxHeight=Math.max(p||v?n.height/2:i.h,30);var m=0;a._width=0;a._height=0;var _=q(a);if(o){r.each(function(e){var t=e[0].height;j.setTranslate(this,l+_[0],l+_[1]+a._height+t/2+u);a._height+=t;a._width=Math.max(a._width,e[0].width)});m=f+a._width;a._width+=u+f+c;a._height+=d;if(s){t.each(function(e,t){j.setTranslate(this,0,t*a.tracegroupgap)});a._height+=(a._lgroupsLength-1)*a.tracegroupgap}}else{var y=G(a);var b=a.x<0||a.x===0&&y==="right";var x=a.x>1||a.x===1&&y==="left";var w=v||p;var A=n.width/2;a._maxWidth=Math.max(b?w&&y==="left"?i.l+i.w:A:x?w&&y==="right"?i.r+i.w:A:i.w,2*f);var T=0;var k=0;r.each(function(e){var t=e[0].width+f;T=Math.max(T,t);k+=t});m=null;var M=0;if(s){var S=0;var C=0;var L=0;t.each(function(){var r=0;var n=0;F.select(this).selectAll("g.traces").each(function(e){var t=e[0].height;j.setTranslate(this,_[0],_[1]+l+u+t/2+n);n+=t;r=Math.max(r,f+e[0].width)});S=Math.max(S,n);var e=r+u;if(e+l+C>a._maxWidth){M=Math.max(M,C);C=0;L+=S+g;S=n}j.setTranslate(this,C,L);C+=e});a._width=Math.max(M,C)+l;a._height=L+S+d}else{var E=r.size();var D=k+c+(E-1)*u<a._maxWidth;var O=0;var P=0;var I=0;var R=0;r.each(function(e){var t=e[0].height;var r=f+e[0].width;var n=(D?r:T)+u;if(n+l+P-u>=a._maxWidth){M=Math.max(M,R);P=0;I+=O;a._height+=O;O=0}j.setTranslate(this,_[0]+l+P,_[1]+l+I+t/2+u);R=P+r+u;P+=n;O=Math.max(O,t)});if(D){a._width=P+c;a._height=O+d}else{a._width=Math.max(M,R)+c;a._height+=O+d}}}a._width=Math.ceil(Math.max(a._width+_[0],a._titleWidth+2*(l+B.titlePad)));a._height=Math.ceil(Math.max(a._height+_[1],a._titleHeight+2*(l+B.itemGap)));a._effHeight=Math.min(a._height,a._maxHeight);var z=e._context.edits;var N=z.legendText||z.legendPosition;r.each(function(e){var t=F.select(this).select(".legendtoggle");var r=e[0].height;var n=N?f:m||f+e[0].width;if(!o)n+=u/2;j.setRect(t,0,-r/2,n,r)})}function Y(e){var t=e._fullLayout;var r=t.legend;var n=G(r);var a=W(r);return o.autoMargin(e,"legend",{x:r.x,y:r.y,l:r._width*H[n],r:r._width*i[n],b:r._effHeight*i[a],t:r._effHeight*H[a]})}function G(e){return R.isRightAnchor(e)?"right":R.isCenterAnchor(e)?"center":"left"}function W(e){return R.isBottomAnchor(e)?"bottom":R.isMiddleAnchor(e)?"middle":"top"}},{"../../constants/alignment":205,"../../lib":230,"../../lib/events":223,"../../lib/svg_text_utils":252,"../../plots/plots":311,"../../registry":313,"../color":100,"../dragelement":119,"../drawing":122,"./constants":151,"./get_legend_data":154,"./handle_click":155,"./helpers":156,"./style":158,"@plotly/d3":11}],154:[function(e,t,r){"use strict";var L=e("../../registry");var E=e("./helpers");t.exports=function e(t,n){var r=E.isGrouped(n);var a=E.isReversed(n);var i={};var o=[];var s=false;var l={};var c=0;var u=0;var f,d;function h(e,t){if(e===""||!E.isGrouped(n)){var r="~~i"+c;o.push(r);i[r]=[t];c++}else if(o.indexOf(e)===-1){o.push(e);s=true;i[e]=[t]}else{i[e].push(t)}}for(f=0;f<t.length;f++){var p=t[f];var v=p[0];var g=v.trace;var m=g.legendgroup;if(!n._inHover&&(!g.visible||!g.showlegend))continue;if(L.traceIs(g,"pie-like")){if(!l[m])l[m]={};for(d=0;d<p.length;d++){var _=p[d].label;if(!l[m][_]){h(m,{label:_,color:p[d].color,i:p[d].i,trace:g,pts:p[d].pts});l[m][_]=true;u=Math.max(u,(_||"").length)}}}else{h(m,v);u=Math.max(u,(g.name||"").length)}}if(!o.length)return[];var y=!s||!r;var b=[];for(f=0;f<o.length;f++){var x=i[o[f]];if(y){b.push(x[0])}else{b.push(x)}}if(y)b=[b];for(f=0;f<b.length;f++){var w=Infinity;for(d=0;d<b[f].length;d++){var A=b[f][d].trace.legendrank;if(w>A)w=A}b[f][0]._groupMinRank=w;b[f][0]._preGroupSort=f}var T=function(e,t){return e[0]._groupMinRank-t[0]._groupMinRank||e[0]._preGroupSort-t[0]._preGroupSort};var k=function(e,t){return e.trace.legendrank-t.trace.legendrank||e._preSort-t._preSort};b.forEach(function(e,t){e[0]._preGroupSort=t});b.sort(T);for(f=0;f<b.length;f++){b[f].forEach(function(e,t){e._preSort=t});b[f].sort(k);var M=b[f][0];var S=null;for(d=0;d<b[f].length;d++){var C=b[f][d].trace.legendgrouptitle;if(C&&C.text){S=C;break}}if(a)b[f].reverse();if(S){b[f].unshift({i:-1,groupTitle:S,trace:{showlegend:M.trace.showlegend}})}for(d=0;d<b[f].length;d++){b[f][d]=[b[f][d]]}}n._lgroupsLength=b.length;n._maxNameLength=u;return b}},{"../../registry":313,"./helpers":156}],155:[function(e,t,r){"use strict";var F=e("../../lib");var j=e("../../registry");var B=true;t.exports=function e(t,r,n){var a=r._fullLayout;if(r._dragged||r._editing)return;var i=a.legend.itemclick;var o=a.legend.itemdoubleclick;if(n===1&&i==="toggle"&&o==="toggleothers"&&B&&r.data&&r._context.showTips){F.notifier(F._(r,"Double-click on legend to isolate one trace"),"long");B=false}else{B=false}var s;if(n===1)s=i;else if(n===2)s=o;if(!s)return;var l=a.hiddenlabels?a.hiddenlabels.slice():[];var c=t.data()[0][0];if(c.groupTitle)return;var u=r._fullData;var f=c.trace;var d=f.legendgroup;var h,p,v,g,m,_;var y={};var b=[];var x=[];var w=[];function A(e,t,r){var n=b.indexOf(e);var a=y[t];if(!a){a=y[t]=[]}if(b.indexOf(e)===-1){b.push(e);n=b.length-1}a[n]=r;return n}function T(e,t){var r=e._fullInput;if(j.hasTransform(r,"groupby")){var n=x[r.index];if(!n){var a=j.getTransformIndices(r,"groupby");var i=a[a.length-1];n=F.keyedContainer(r,"transforms["+i+"].styles","target","value.visible");x[r.index]=n}var o=n.get(e._group);if(o===undefined){o=true}if(o!==false){n.set(e._group,t)}w[r.index]=A(r.index,"visible",r.visible===false?false:true)}else{var s=r.visible===false?false:t;A(r.index,"visible",s)}}if(j.traceIs(f,"pie-like")){var k=c.label;var M=l.indexOf(k);if(s==="toggle"){if(M===-1)l.push(k);else l.splice(M,1)}else if(s==="toggleothers"){l=[];r.calcdata[0].forEach(function(e){if(k!==e.label){l.push(e.label)}});if(r._fullLayout.hiddenlabels&&r._fullLayout.hiddenlabels.length===l.length&&M===-1){l=[]}}j.call("_guiRelayout",r,"hiddenlabels",l)}else{var S=d&&d.length;var C=[];var L;if(S){for(h=0;h<u.length;h++){L=u[h];if(!L.visible)continue;if(L.legendgroup===d){C.push(h)}}}if(s==="toggle"){var E;switch(f.visible){case true:E="legendonly";break;case false:E=false;break;case"legendonly":E=true;break}if(S){for(h=0;h<u.length;h++){if(u[h].visible!==false&&u[h].legendgroup===d){T(u[h],E)}}}else{T(f,E)}}else if(s==="toggleothers"){var D,O,P,I;var R=true;for(h=0;h<u.length;h++){D=u[h]===f;P=u[h].showlegend!==true;if(D||P)continue;O=S&&u[h].legendgroup===d;if(!O&&u[h].visible===true&&!j.traceIs(u[h],"notLegendIsolatable")){R=false;break}}for(h=0;h<u.length;h++){if(u[h].visible===false)continue;if(j.traceIs(u[h],"notLegendIsolatable")){continue}switch(f.visible){case"legendonly":T(u[h],true);break;case true:I=R?true:"legendonly";D=u[h]===f;P=u[h].showlegend!==true&&!u[h].legendgroup;O=D||S&&u[h].legendgroup===d;T(u[h],O||P?true:I);break}}}for(h=0;h<x.length;h++){v=x[h];if(!v)continue;var z=v.constructUpdate();var N=Object.keys(z);for(p=0;p<N.length;p++){g=N[p];_=y[g]=y[g]||[];_[w[h]]=z[g]}}m=Object.keys(y);for(h=0;h<m.length;h++){g=m[h];for(p=0;p<b.length;p++){if(!y[g].hasOwnProperty(p)){y[g][p]=undefined}}}j.call("_guiRestyle",r,y,b)}}},{"../../lib":230,"../../registry":313}],156:[function(e,t,r){"use strict";r.isGrouped=function e(t){return(t.traceorder||"").indexOf("grouped")!==-1};r.isVertical=function e(t){return t.orientation!=="h"};r.isReversed=function e(t){return(t.traceorder||"").indexOf("reversed")!==-1}},{}],157:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":150,"./defaults":152,"./draw":153,"./style":158}],158:[function(e,t,r){"use strict";var k=e("@plotly/d3");var M=e("../../registry");var S=e("../../lib");var m=S.strTranslate;var C=e("../drawing");var L=e("../color");var E=e("../colorscale/helpers").extractOpts;var D=e("../../traces/scatter/subtypes");var _=e("../../traces/pie/style_one");var O=e("../../traces/pie/helpers").castOption;var P=e("./constants");var I=12;var R=5;var z=2;var N=10;var F=5;t.exports=function e(t,w,y){var r=w._fullLayout;if(!y)y=r.legend;var b=y.itemsizing==="constant";var A=y.itemwidth;var n=(A+P.itemGap*2)/2;var x=m(n,0);var T=function(e,t,r,n){var a;if(e+1){a=e}else if(t&&t.width>0){a=t.width}else{return 0}return b?n:Math.min(a,r)};t.each(function(e){var t=k.select(this);var r=S.ensureSingle(t,"g","layers");r.style("opacity",e[0].trace.opacity);var n=y.valign;var a=e[0].lineHeight;var i=e[0].height;if(n==="middle"||!a||!i){r.attr("transform",null)}else{var o={top:1,bottom:-1}[n];var s=o*(.5*(a-i+3));r.attr("transform",m(0,s))}var l=r.selectAll("g.legendfill").data([e]);l.enter().append("g").classed("legendfill",true);var c=r.selectAll("g.legendlines").data([e]);c.enter().append("g").classed("legendlines",true);var u=r.selectAll("g.legendsymbols").data([e]);u.enter().append("g").classed("legendsymbols",true);u.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",true)}).each(g).each(o).each(l).each(s).each(u).each(p).each(h).each(a).each(i).each(f).each(d);function a(e){var t=B(e);var r=t.showFill;var n=t.showLine;var a=t.showGradientLine;var i=t.showGradientFill;var o=t.anyFill;var s=t.anyLine;var l=e[0];var c=l.trace;var u,f;var d=E(c);var h=d.colorscale;var p=d.reversescale;var v=function(e){if(e.size()){var t="legendfill-"+c.uid;C.gradient(e,w,t,j(p),h,"fill")}};var g=function(e){if(e.size()){var t="legendline-"+c.uid;C.lineGroupStyle(e);C.gradient(e,w,t,j(p),h,"stroke")}};var m=D.hasMarkers(c)||!o?"M5,0":s?"M5,-2":"M5,-3";var _=k.select(this);var y=_.select(".legendfill").selectAll("path").data(r||i?[e]:[]);y.enter().append("path").classed("js-fill",true);y.exit().remove();y.attr("d",m+"h"+A+"v6h-"+A+"z").call(r?C.fillGroupStyle:v);if(n||a){var b=T(undefined,c.line,N,R);f=S.minExtend(c,{line:{width:b}});u=[S.minExtend(l,{trace:f})]}var x=_.select(".legendlines").selectAll("path").data(n||a?[u]:[]);x.enter().append("path").classed("js-line",true);x.exit().remove();x.attr("d",m+(a?"l"+A+",0.0001":"h"+A)).call(n?C.lineGroupStyle:g)}function i(e){var t=B(e);var r=t.anyFill;var n=t.anyLine;var a=t.showLine;var i=t.showMarker;var o=e[0];var s=o.trace;var l=!i&&!n&&!r&&D.hasText(s);var c,u;function f(e,t,r,n){var a=S.nestedProperty(s,e).get();var i=S.isArrayOrTypedArray(a)&&t?t(a):a;if(b&&i&&n!==undefined){i=n}if(r){if(i<r[0])return r[0];else if(i>r[1])return r[1]}return i}function d(e){if(o._distinct&&o.index&&e[o.index])return e[o.index];return e[0]}if(i||l||a){var h={};var p={};if(i){h.mc=f("marker.color",d);h.mx=f("marker.symbol",d);h.mo=f("marker.opacity",S.mean,[.2,1]);h.mlc=f("marker.line.color",d);h.mlw=f("marker.line.width",S.mean,[0,5],z);p.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var v=f("marker.size",S.mean,[2,16],I);h.ms=v;p.marker.size=v}if(a){p.line={width:f("line.width",d,[0,10],R)}}if(l){h.tx="Aa";h.tp=f("textposition",d);h.ts=10;h.tc=f("textfont.color",d);h.tf=f("textfont.family",d)}c=[S.minExtend(o,h)];u=S.minExtend(s,p);u.selectedpoints=null;u.texttemplate=null}var g=k.select(this).select("g.legendpoints");var m=g.selectAll("path.scatterpts").data(i?c:[]);m.enter().insert("path",":first-child").classed("scatterpts",true).attr("transform",x);m.exit().remove();m.call(C.pointStyle,u,w);if(i)c[0].mrc=3;var _=g.selectAll("g.pointtext").data(l?c:[]);_.enter().append("g").classed("pointtext",true).append("text").attr("transform",x);_.exit().remove();_.selectAll("text").call(C.textPointStyle,u,w)}function o(e){var a=e[0].trace;var t=a.type==="waterfall";if(e[0]._distinct&&t){var r=e[0].trace[e[0].dir].marker;e[0].mc=r.color;e[0].mlw=r.line.width;e[0].mlc=r.line.color;return c(e,this,"waterfall")}var n=[];if(a.visible&&t){n=e[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]}var i=k.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(n);i.enter().append("path").classed("legendwaterfall",true).attr("transform",x).style("stroke-miterlimit",1);i.exit().remove();i.each(function(e){var t=k.select(this);var r=a[e[0]].marker;var n=T(undefined,r.line,F,z);t.attr("d",e[1]).style("stroke-width",n+"px").call(L.fill,r.color);if(n){t.call(L.stroke,r.line.color)}})}function s(e){c(e,this)}function l(e){c(e,this,"funnel")}function c(e,t,r){var g=e[0].trace;var m=g.marker||{};var _=m.line||{};var n=!r?M.traceIs(g,"bar"):g.visible&&g.type===r;var a=k.select(t).select("g.legendpoints").selectAll("path.legend"+r).data(n?[e]:[]);a.enter().append("path").classed("legend"+r,true).attr("d","M6,6H-6V-6H6Z").attr("transform",x);a.exit().remove();a.each(function(e){var t=k.select(this);var r=e[0];var n=T(r.mlw,m.line,F,z);t.style("stroke-width",n+"px");var a=r.mcc;if(!y._inHover&&"mc"in r){var i=E(m);var o=i.mid;if(o===undefined)o=(i.max+i.min)/2;a=C.tryColorscale(m,"")(o)}var s=a||r.mc||m.color;var l=m.pattern;var c=l&&C.getPatternAttr(l.shape,0,"");if(c){var u=C.getPatternAttr(l.bgcolor,0,null);var f=C.getPatternAttr(l.fgcolor,0,null);var d=l.fgopacity;var h=H(l.size,8,10);var p=H(l.solidity,.5,1);var v="legend-"+g.uid;t.call(C.pattern,"legend",w,v,c,h,p,a,l.fillmode,u,f,d)}else{t.call(L.fill,s)}if(n)L.stroke(t,r.mlc||_.color)})}function u(e){var n=e[0].trace;var a=k.select(this).select("g.legendpoints").selectAll("path.legendbox").data(n.visible&&M.traceIs(n,"box-violin")?[e]:[]);a.enter().append("path").classed("legendbox",true).attr("d","M6,6H-6V-6H6Z").attr("transform",x);a.exit().remove();a.each(function(){var e=k.select(this);if((n.boxpoints==="all"||n.points==="all")&&L.opacity(n.fillcolor)===0&&L.opacity((n.line||{}).color)===0){var t=S.minExtend(n,{marker:{size:b?I:S.constrain(n.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});a.call(C.pointStyle,t,w)}else{var r=T(undefined,n.line,F,z);e.style("stroke-width",r+"px").call(L.fill,n.fillcolor);if(r)L.stroke(e,n.line.color)}})}function f(e){var i=e[0].trace;var t=k.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(i.visible&&i.type==="candlestick"?[e,e]:[]);t.enter().append("path").classed("legendcandle",true).attr("d",function(e,t){if(t)return"M-15,0H-8M-8,6V-6H8Z";return"M15,0H8M8,-6V6H-8Z"}).attr("transform",x).style("stroke-miterlimit",1);t.exit().remove();t.each(function(e,t){var r=k.select(this);var n=i[t?"increasing":"decreasing"];var a=T(undefined,n.line,F,z);r.style("stroke-width",a+"px").call(L.fill,n.fillcolor);if(a)L.stroke(r,n.line.color)})}function d(e){var i=e[0].trace;var t=k.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(i.visible&&i.type==="ohlc"?[e,e]:[]);t.enter().append("path").classed("legendohlc",true).attr("d",function(e,t){if(t)return"M-15,0H0M-8,-6V0";return"M15,0H0M8,6V0"}).attr("transform",x).style("stroke-miterlimit",1);t.exit().remove();t.each(function(e,t){var r=k.select(this);var n=i[t?"increasing":"decreasing"];var a=T(undefined,n.line,F,z);r.style("fill","none").call(C.dashLine,n.line.dash,a);if(a)L.stroke(r,n.line.color)})}function h(e){v(e,this,"pie")}function p(e){v(e,this,"funnelarea")}function v(e,t,r){var n=e[0];var a=n.trace;var i=!r?M.traceIs(a,r):a.visible&&a.type===r;var o=k.select(t).select("g.legendpoints").selectAll("path.legend"+r).data(i?[e]:[]);o.enter().append("path").classed("legend"+r,true).attr("d","M6,6H-6V-6H6Z").attr("transform",x);o.exit().remove();if(o.size()){var s=(a.marker||{}).line;var l=T(O(s.width,n.pts),s,F,z);var c=S.minExtend(a,{marker:{line:{width:l}}});c.marker.line.color=s.color;var u=S.minExtend(n,{trace:c});_(o,u,c)}}function g(e){var u=e[0].trace;var f;var t=[];if(u.visible){switch(u.type){case"histogram2d":case"heatmap":t=[["M-15,-2V4H15V-2Z"]];f=true;break;case"choropleth":case"choroplethmapbox":t=[["M-6,-6V6H6V-6Z"]];f=true;break;case"densitymapbox":t=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]];f="radial";break;case"cone":t=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]];f=false;break;case"streamtube":t=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]];f=false;break;case"surface":t=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]];f=true;break;case"mesh3d":t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];f=false;break;case"volume":t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];f=true;break;case"isosurface":t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]];f=false;break}}var r=k.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(t);r.enter().append("path").classed("legend3dandfriends",true).attr("transform",x).style("stroke-miterlimit",1);r.exit().remove();r.each(function(e,t){var r=k.select(this);var n=E(u);var a=n.colorscale;var i=n.reversescale;var o=function(e){if(e.size()){var t="legendfill-"+u.uid;C.gradient(e,w,t,j(i,f==="radial"),a,"fill")}};var s;if(!a){var l=u.vertexcolor||u.facecolor||u.color;s=S.isArrayOrTypedArray(l)?l[t]||l[0]:l}else{if(!f){var c=a.length;s=t===0?a[i?c-1:0][1]:t===1?a[i?0:c-1][1]:a[Math.floor((c-1)/2)][1]}}r.attr("d",e[0]);if(s){r.call(L.fill,s)}else{r.call(o)}})}};function j(e,t){var r=t?"radial":"horizontal";return r+(e?"":"reversed")}function B(e){var t=e[0].trace;var r=t.contours;var n=D.hasLines(t);var a=D.hasMarkers(t);var i=t.visible&&t.fill&&t.fill!=="none";var o=false;var s=false;if(r){var l=r.coloring;if(l==="lines"){o=true}else{n=l==="none"||l==="heatmap"||r.showlines}if(r.type==="constraint"){i=r._operation!=="="}else if(l==="fill"||l==="heatmap"){s=true}}return{showMarker:a,showLine:n,showFill:i,showGradientLine:o,showGradientFill:s,anyLine:n||o,anyFill:i||s}}function H(e,t,r){if(e&&S.isArrayOrTypedArray(e))return t;if(e>r)return r;return e}},{"../../lib":230,"../../registry":313,"../../traces/pie/helpers":345,"../../traces/pie/style_one":351,"../../traces/scatter/subtypes":378,"../color":100,"../colorscale/helpers":111,"../drawing":122,"./constants":151,"@plotly/d3":11}],159:[function(e,t,r){"use strict";var n=e("./constants");t.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:true,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:true,dflt:"",editType:"modebar"}}},{"./constants":161}],160:[function(e,t,r){"use strict";var _=e("../../registry");var n=e("../../plots/plots");var y=e("../../plots/cartesian/axis_ids");var a=e("../../fonts/ploticon");var i=e("../shapes/draw").eraseActiveShape;var o=e("../../lib");var s=o._;var l=t.exports={};l.toImage={name:"toImage",title:function(e){var t=e._context.toImageButtonOptions||{};var r=t.format||"png";return r==="png"?s(e,"Download plot as a png"):s(e,"Download plot")},icon:a.camera,click:function(t){var r=t._context.toImageButtonOptions;var n={format:r.format||"png"};o.notifier(s(t,"Taking snapshot - this may take a few seconds"),"long");if(n.format!=="svg"&&o.isIE()){o.notifier(s(t,"IE only supports svg.  Changing format to svg."),"long");n.format="svg"}["filename","width","height","scale"].forEach(function(e){if(e in r){n[e]=r[e]}});_.call("downloadImage",t,n).then(function(e){o.notifier(s(t,"Snapshot succeeded")+" - "+e,"long")}).catch(function(){o.notifier(s(t,"Sorry, there was a problem downloading your snapshot!"),"long")})}};l.sendDataToCloud={name:"sendDataToCloud",title:function(e){return s(e,"Edit in Chart Studio")},icon:a.disk,click:function(e){n.sendDataToCloud(e)}};l.editInChartStudio={name:"editInChartStudio",title:function(e){return s(e,"Edit in Chart Studio")},icon:a.pencil,click:function(e){n.sendDataToCloud(e)}};l.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"dragmode",val:"zoom",icon:a.zoombox,click:c};l.pan2d={name:"pan2d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"dragmode",val:"pan",icon:a.pan,click:c};l.select2d={name:"select2d",_cat:"select",title:function(e){return s(e,"Box Select")},attr:"dragmode",val:"select",icon:a.selectbox,click:c};l.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return s(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:a.lasso,click:c};l.drawclosedpath={name:"drawclosedpath",title:function(e){return s(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:a.drawclosedpath,click:c};l.drawopenpath={name:"drawopenpath",title:function(e){return s(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:a.drawopenpath,click:c};l.drawline={name:"drawline",title:function(e){return s(e,"Draw line")},attr:"dragmode",val:"drawline",icon:a.drawline,click:c};l.drawrect={name:"drawrect",title:function(e){return s(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:a.drawrect,click:c};l.drawcircle={name:"drawcircle",title:function(e){return s(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:a.drawcircle,click:c};l.eraseshape={name:"eraseshape",title:function(e){return s(e,"Erase active shape")},icon:a.eraseshape,click:i};l.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:c};l.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:c};l.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return s(e,"Autoscale")},attr:"zoom",val:"auto",icon:a.autoscale,click:c};l.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return s(e,"Reset axes")},attr:"zoom",val:"reset",icon:a.home,click:c};l.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return s(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:a.tooltip_basic,gravity:"ne",click:c};l.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return s(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:a.tooltip_compare,gravity:"ne",click:c};function c(e,t){var r=t.currentTarget;var n=r.getAttribute("data-attr");var a=r.getAttribute("data-val")||true;var i=e._fullLayout;var o={};var s=y.list(e,null,true);var l=i._cartesianSpikesEnabled;var c,u;if(n==="zoom"){var f=a==="in"?.5:2;var d=(1+f)/2;var h=(1-f)/2;var p;for(u=0;u<s.length;u++){c=s[u];if(!c.fixedrange){p=c._name;if(a==="auto"){o[p+".autorange"]=true}else if(a==="reset"){if(c._rangeInitial===undefined){o[p+".autorange"]=true}else{var v=c._rangeInitial.slice();o[p+".range[0]"]=v[0];o[p+".range[1]"]=v[1]}if(c._showSpikeInitial!==undefined){o[p+".showspikes"]=c._showSpikeInitial;if(l==="on"&&!c._showSpikeInitial){l="off"}}}else{var g=[c.r2l(c.range[0]),c.r2l(c.range[1])];var m=[d*g[0]+h*g[1],d*g[1]+h*g[0]];o[p+".range[0]"]=c.l2r(m[0]);o[p+".range[1]"]=c.l2r(m[1])}}}}else{if(n==="hovermode"&&(a==="x"||a==="y")){a=i._isHoriz?"y":"x";r.setAttribute("data-val",a)}o[n]=a}i._cartesianSpikesEnabled=l;_.call("_guiRelayout",e,o)}l.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:a.zoombox,click:u};l.pan3d={name:"pan3d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:a.pan,click:u};l.orbitRotation={name:"orbitRotation",title:function(e){return s(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:a["3d_rotate"],click:u};l.tableRotation={name:"tableRotation",title:function(e){return s(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:a["z-axis"],click:u};function u(e,t){var r=t.currentTarget;var n=r.getAttribute("data-attr");var a=r.getAttribute("data-val")||true;var i=e._fullLayout._subplots.gl3d||[];var o={};var s=n.split(".");for(var l=0;l<i.length;l++){o[i[l]+"."+s[1]]=a}var c=a==="pan"?a:"zoom";o.dragmode=c;_.call("_guiRelayout",e,o)}l.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return s(e,"Reset camera to default")},attr:"resetDefault",icon:a.home,click:f};l.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return s(e,"Reset camera to last save")},attr:"resetLastSave",icon:a.movie,click:f};function f(e,t){var r=t.currentTarget;var n=r.getAttribute("data-attr");var a=n==="resetLastSave";var i=n==="resetDefault";var o=e._fullLayout;var s=o._subplots.gl3d||[];var l={};for(var c=0;c<s.length;c++){var u=s[c];var f=u+".camera";var d=u+".aspectratio";var h=u+".aspectmode";var p=o[u]._scene;var v;if(a){l[f+".up"]=p.viewInitial.up;l[f+".eye"]=p.viewInitial.eye;l[f+".center"]=p.viewInitial.center;v=true}else if(i){l[f+".up"]=null;l[f+".eye"]=null;l[f+".center"]=null;v=true}if(v){l[d+".x"]=p.viewInitial.aspectratio.x;l[d+".y"]=p.viewInitial.aspectratio.y;l[d+".z"]=p.viewInitial.aspectratio.z;l[h]=p.viewInitial.aspectmode}}_.call("_guiRelayout",e,l)}l.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:a.tooltip_basic,gravity:"ne",click:h};function d(e,t){var r=t.currentTarget;var n=r._previousVal;var a=e._fullLayout;var i=a._subplots.gl3d||[];var o=["xaxis","yaxis","zaxis"];var s={};var l={};if(n){l=n;r._previousVal=null}else{for(var c=0;c<i.length;c++){var u=i[c];var f=a[u];var d=u+".hovermode";s[d]=f.hovermode;l[d]=false;for(var h=0;h<3;h++){var p=o[h];var v=u+"."+p+".showspikes";l[v]=false;s[v]=f[p].showspikes}}r._previousVal=s}return l}function h(e,t){var r=d(e,t);_.call("_guiRelayout",e,r)}l.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:p};l.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:p};l.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return s(e,"Reset")},attr:"reset",val:null,icon:a.autoscale,click:p};l.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:a.tooltip_basic,gravity:"ne",click:g};function p(e,t){var r=t.currentTarget;var n=r.getAttribute("data-attr");var a=r.getAttribute("data-val")||true;var i=e._fullLayout;var o=i._subplots.geo||[];for(var s=0;s<o.length;s++){var l=o[s];var c=i[l];if(n==="zoom"){var u=c.projection.scale;var f=a==="in"?2*u:.5*u;_.call("_guiRelayout",e,l+".projection.scale",f)}}if(n==="reset"){x(e,"geo")}}l.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:a.tooltip_basic,gravity:"ne",click:g};l.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:a.tooltip_basic,gravity:"ne",click:g};function v(e){var t=e._fullLayout;if(t.hovermode)return false;if(t._has("cartesian")){return t._isHoriz?"y":"x"}return"closest"}function g(e){var t=v(e);_.call("_guiRelayout",e,"hovermode",t)}l.resetViewSankey={name:"resetSankeyGroup",title:function(e){return s(e,"Reset view")},icon:a.home,click:function(e){var t={"node.groups":[],"node.x":[],"node.y":[]};for(var r=0;r<e._fullData.length;r++){var n=e._fullData[r]._viewInitial;t["node.groups"].push(n.node.groups.slice());t["node.x"].push(n.node.x.slice());t["node.y"].push(n.node.y.slice())}_.call("restyle",e,t)}};l.toggleHover={name:"toggleHover",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:a.tooltip_basic,gravity:"ne",click:function(e,t){var r=d(e,t);r.hovermode=v(e);_.call("_guiRelayout",e,r)}};l.resetViews={name:"resetViews",title:function(e){return s(e,"Reset views")},icon:a.home,click:function(e,t){var r=t.currentTarget;r.setAttribute("data-attr","zoom");r.setAttribute("data-val","reset");c(e,t);r.setAttribute("data-attr","resetLastSave");f(e,t);x(e,"geo");x(e,"mapbox")}};l.toggleSpikelines={name:"toggleSpikelines",title:function(e){return s(e,"Toggle Spike Lines")},icon:a.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout;var r=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled=r==="on"?"off":"on";_.call("_guiRelayout",e,m(e))}};function m(e){var t=e._fullLayout;var r=t._cartesianSpikesEnabled==="on";var n=y.list(e,null,true);var a={};for(var i=0;i<n.length;i++){var o=n[i];a[o._name+".showspikes"]=r?true:o._showSpikeInitial}return a}l.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return s(e,"Reset view")},attr:"reset",icon:a.home,click:function(e){x(e,"mapbox")}};l.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:b};l.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:b};function b(e,t){var r=t.currentTarget;var n=r.getAttribute("data-val");var a=e._fullLayout;var i=a._subplots.mapbox||[];var o=1.05;var s={};for(var l=0;l<i.length;l++){var c=i[l];var u=a[c].zoom;var f=n==="in"?o*u:u/o;s[c+".zoom"]=f}_.call("_guiRelayout",e,s)}function x(e,t){var r=e._fullLayout;var n=r._subplots[t]||[];var a={};for(var i=0;i<n.length;i++){var o=n[i];var s=r[o]._subplot;var l=s.viewInitial;var c=Object.keys(l);for(var u=0;u<c.length;u++){var f=c[u];a[o+"."+f]=l[f]}}_.call("_guiRelayout",e,a)}},{"../../fonts/ploticon":213,"../../lib":230,"../../plots/cartesian/axis_ids":280,"../../plots/plots":311,"../../registry":313,"../shapes/draw":184}],161:[function(e,t,r){"use strict";var n=e("./buttons");var a=Object.keys(n);var i=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"];var o=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(i);var s=[];var l=function(e){if(o.indexOf(e._cat||e.name)!==-1)return;var t=e.name;var r=(e._cat||e.name).toLowerCase();if(s.indexOf(t)===-1)s.push(t);if(s.indexOf(r)===-1)s.push(r)};a.forEach(function(e){l(n[e])});s.sort();t.exports={DRAW_MODES:i,backButtons:o,foreButtons:s}},{"./buttons":160}],162:[function(e,t,r){"use strict";var s=e("../../lib");var l=e("../color");var c=e("../../plot_api/plot_template");var u=e("./attributes");t.exports=function e(t,r){var n=t.modebar||{};var a=c.newContainer(r,"modebar");function i(e,t){return s.coerce(n,a,u,e,t)}i("orientation");i("bgcolor",l.addOpacity(r.paper_bgcolor,.5));var o=l.contrast(l.rgb(r.modebar.bgcolor));i("color",l.addOpacity(o,.3));i("activecolor",l.addOpacity(o,.7));i("uirevision",r.uirevision);i("add");i("remove")}},{"../../lib":230,"../../plot_api/plot_template":265,"../color":100,"./attributes":159}],163:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"modebar",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),manage:e("./manage")}},{"./attributes":159,"./defaults":162,"./manage":164}],164:[function(e,t,r){"use strict";var n=e("../../plots/cartesian/axis_ids");var a=e("../../traces/scatter/subtypes");var i=e("../../registry");var P=e("../fx/helpers").isUnifiedHover;var s=e("./modebar");var I=e("./buttons");var R=e("./constants").DRAW_MODES;t.exports=function e(t){var r=t._fullLayout;var n=t._context;var a=r._modeBar;if(!n.displayModeBar&&!n.watermark){if(a){a.destroy();delete r._modeBar}return}if(!Array.isArray(n.modeBarButtonsToRemove)){throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "))}if(!Array.isArray(n.modeBarButtonsToAdd)){throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "))}var i=n.modeBarButtons;var o;if(Array.isArray(i)&&i.length){o=c(i)}else if(!n.displayModeBar&&n.watermark){o=[]}else{o=l(t)}if(a)a.update(t,o);else r._modeBar=s(t,o)};function l(e){var t=e._fullLayout;var r=e._fullData;var n=e._context;function a(e,t){if(typeof t==="string"){if(t.toLowerCase()===e.toLowerCase())return true}else{var r=t.name;var n=t._cat||t.name;if(r===e||n===e.toLowerCase())return true}return false}var i=t.modebar.add;if(typeof i==="string")i=[i];var o=t.modebar.remove;if(typeof o==="string")o=[o];var s=n.modeBarButtonsToAdd.concat(i.filter(function(e){for(var t=0;t<n.modeBarButtonsToRemove.length;t++){if(a(e,n.modeBarButtonsToRemove[t]))return false}return true}));var u=n.modeBarButtonsToRemove.concat(o.filter(function(e){for(var t=0;t<n.modeBarButtonsToAdd.length;t++){if(a(e,n.modeBarButtonsToAdd[t]))return false}return true}));var l=t._has("cartesian");var c=t._has("gl3d");var f=t._has("geo");var d=t._has("pie");var h=t._has("funnelarea");var p=t._has("gl2d");var v=t._has("ternary");var g=t._has("mapbox");var m=t._has("polar");var _=t._has("sankey");var y=z(t);var b=P(t.hovermode);var x=[];function w(e){if(!e.length)return;var t=[];for(var r=0;r<e.length;r++){var n=e[r];var a=I[n];var i=a.name.toLowerCase();var o=(a._cat||a.name).toLowerCase();var s=false;for(var l=0;l<u.length;l++){var c=u[l].toLowerCase();if(c===i||c===o){s=true;break}}if(s)continue;t.push(I[n])}x.push(t)}var A=["toImage"];if(n.showEditInChartStudio)A.push("editInChartStudio");else if(n.showSendToCloud)A.push("sendDataToCloud");w(A);var T=[];var k=[];var M=[];var S=[];if((l||p||d||h||v)+f+c+g+m>1){k=["toggleHover"];M=["resetViews"]}else if(f){T=["zoomInGeo","zoomOutGeo"];k=["hoverClosestGeo"];M=["resetGeo"]}else if(c){k=["hoverClosest3d"];M=["resetCameraDefault3d","resetCameraLastSave3d"]}else if(g){T=["zoomInMapbox","zoomOutMapbox"];k=["toggleHover"];M=["resetViewMapbox"]}else if(p){k=["hoverClosestGl2d"]}else if(d){k=["hoverClosestPie"]}else if(_){k=["hoverClosestCartesian","hoverCompareCartesian"];M=["resetViewSankey"]}else{k=["toggleHover"]}if(l){k=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]}if(F(r)||b){k=[]}if((l||p)&&!y){T=["zoomIn2d","zoomOut2d","autoScale2d"];if(M[0]!=="resetViews")M=["resetScale2d"]}if(c){S=["zoom3d","pan3d","orbitRotation","tableRotation"]}else if((l||p)&&!y||v){S=["zoom2d","pan2d"]}else if(g||f){S=["pan2d"]}else if(m){S=["zoom2d"]}if(N(r)){S.push("select2d","lasso2d")}var C=[];var L=function(e){if(C.indexOf(e)!==-1)return;if(k.indexOf(e)!==-1){C.push(e)}};if(Array.isArray(s)){var E=[];for(var D=0;D<s.length;D++){var O=s[D];if(typeof O==="string"){O=O.toLowerCase();if(R.indexOf(O)!==-1){if(t._has("mapbox")||t._has("cartesian")){S.push(O)}}else if(O==="togglespikelines"){L("toggleSpikelines")}else if(O==="togglehover"){L("toggleHover")}else if(O==="hovercompare"){L("hoverCompareCartesian")}else if(O==="hoverclosest"){L("hoverClosestCartesian");L("hoverClosestGeo");L("hoverClosest3d");L("hoverClosestGl2d");L("hoverClosestPie")}else if(O==="v1hovermode"){L("toggleHover");L("hoverClosestCartesian");L("hoverCompareCartesian");L("hoverClosestGeo");L("hoverClosest3d");L("hoverClosestGl2d");L("hoverClosestPie")}}else E.push(O)}s=E}w(S);w(T.concat(M));w(C);return j(x,s)}function z(e){var t=n.list({_fullLayout:e},null,true);for(var r=0;r<t.length;r++){if(!t[r].fixedrange){return false}}return true}function N(e){var t=false;for(var r=0;r<e.length;r++){if(t)break;var n=e[r];if(!n._module||!n._module.selectPoints)continue;if(i.traceIs(n,"scatter-like")){if(a.hasMarkers(n)||a.hasText(n)){t=true}}else if(i.traceIs(n,"box-violin")){if(n.boxpoints==="all"||n.points==="all"){t=true}}else{t=true}}return t}function F(e){for(var t=0;t<e.length;t++){if(!i.traceIs(e[t],"noHover"))return false}return true}function j(e,t){if(t.length){if(Array.isArray(t[0])){for(var r=0;r<t.length;r++){e.push(t[r])}}else e.push(t)}return e}function c(e){for(var t=0;t<e.length;t++){var r=e[t];for(var n=0;n<r.length;n++){var a=r[n];if(typeof a==="string"){if(I[a]!==undefined){e[t][n]=I[a]}else{throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}}}}return e}},{"../../plots/cartesian/axis_ids":280,"../../registry":313,"../../traces/scatter/subtypes":378,"../fx/helpers":136,"./buttons":160,"./constants":161,"./modebar":165}],165:[function(e,t,r){"use strict";var l=e("@plotly/d3");var o=e("fast-isnumeric");var f=e("../../lib");var s=e("../../fonts/ploticon");var c=new DOMParser;function a(e){this.container=e.container;this.element=document.createElement("div");this.update(e.graphInfo,e.buttons);this.container.appendChild(this.element)}var n=a.prototype;n.update=function(e,t){this.graphInfo=e;var r=this.graphInfo._context;var n=this.graphInfo._fullLayout;var a="modebar-"+n._uid;this.element.setAttribute("id",a);this._uid=a;this.element.className="modebar";if(r.displayModeBar==="hover")this.element.className+=" modebar--hover ease-bg";if(n.modebar.orientation==="v"){this.element.className+=" vertical";t=t.reverse()}var i=n.modebar;var o=r.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";f.deleteRelatedStyleRule(a);f.addRelatedStyleRule(a,o+"#"+a+" .modebar-group","background-color: "+i.bgcolor);f.addRelatedStyleRule(a,"#"+a+" .modebar-btn .icon path","fill: "+i.color);f.addRelatedStyleRule(a,"#"+a+" .modebar-btn:hover .icon path","fill: "+i.activecolor);f.addRelatedStyleRule(a,"#"+a+" .modebar-btn.active .icon path","fill: "+i.activecolor);var s=!this.hasButtons(t);var l=this.hasLogo!==r.displaylogo;var c=this.locale!==r.locale;this.locale=r.locale;if(s||l||c){this.removeAllButtons();this.updateButtons(t);if(r.watermark||r.displaylogo){var u=this.getLogo();if(r.watermark){u.className=u.className+" watermark"}if(n.modebar.orientation==="v"){this.element.insertBefore(u,this.element.childNodes[0])}else{this.element.appendChild(u)}this.hasLogo=true}}this.updateActiveButton()};n.updateButtons=function(e){var a=this;this.buttons=e;this.buttonElements=[];this.buttonsNames=[];this.buttons.forEach(function(e){var n=a.createGroup();e.forEach(function(e){var t=e.name;if(!t){throw new Error("must provide button 'name' in button config")}if(a.buttonsNames.indexOf(t)!==-1){throw new Error("button name '"+t+"' is taken")}a.buttonsNames.push(t);var r=a.createButton(e);a.buttonElements.push(r);n.appendChild(r)});a.element.appendChild(n)})};n.createGroup=function(){var e=document.createElement("div");e.className="modebar-group";return e};n.createButton=function(t){var r=this;var e=document.createElement("a");e.setAttribute("rel","tooltip");e.className="modebar-btn";var n=t.title;if(n===undefined)n=t.name;else if(typeof n==="function")n=n(this.graphInfo);if(n||n===0)e.setAttribute("data-title",n);if(t.attr!==undefined)e.setAttribute("data-attr",t.attr);var a=t.val;if(a!==undefined){if(typeof a==="function")a=a(this.graphInfo);e.setAttribute("data-val",a)}var i=t.click;if(typeof i!=="function"){throw new Error("must provide button 'click' function in button config")}else{e.addEventListener("click",function(e){t.click(r.graphInfo,e);r.updateActiveButton(e.currentTarget)})}e.setAttribute("data-toggle",t.toggle||false);if(t.toggle)l.select(e).classed("active",true);var o=t.icon;if(typeof o==="function"){e.appendChild(o())}else{e.appendChild(this.createIcon(o||s.question))}e.setAttribute("data-gravity",t.gravity||"n");return e};n.createIcon=function(e){var t=o(e.height)?Number(e.height):e.ascent-e.descent;var r="http://www.w3.org/2000/svg";var n;if(e.path){n=document.createElementNS(r,"svg");n.setAttribute("viewBox",[0,0,e.width,t].join(" "));n.setAttribute("class","icon");var a=document.createElementNS(r,"path");a.setAttribute("d",e.path);if(e.transform){a.setAttribute("transform",e.transform)}else if(e.ascent!==undefined){a.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")")}n.appendChild(a)}if(e.svg){var i=c.parseFromString(e.svg,"application/xml");n=i.childNodes[0]}n.setAttribute("height","1em");n.setAttribute("width","1em");return n};n.updateActiveButton=function(e){var o=this.graphInfo._fullLayout;var s=e!==undefined?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var t=e.getAttribute("data-val")||true;var r=e.getAttribute("data-attr");var n=e.getAttribute("data-toggle")==="true";var a=l.select(e);if(n){if(r===s){a.classed("active",!a.classed("active"))}}else{var i=r===null?r:f.nestedProperty(o,r).get();a.classed("active",i===t)}})};n.hasButtons=function(e){var t=this.buttons;if(!t)return false;if(e.length!==t.length)return false;for(var r=0;r<e.length;++r){if(e[r].length!==t[r].length)return false;for(var n=0;n<e[r].length;n++){if(e[r][n].name!==t[r][n].name)return false}}return true};n.getLogo=function(){var e=this.createGroup();var t=document.createElement("a");t.href="https://plotly.com/";t.target="_blank";t.setAttribute("data-title",f._(this.graphInfo,"Produced with Plotly"));t.className="modebar-btn plotlyjsicon modebar-btn--logo";t.appendChild(this.createIcon(s.newplotlylogo));e.appendChild(t);return e};n.removeAllButtons=function(){while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}this.hasLogo=false};n.destroy=function(){f.removeElement(this.container.querySelector(".modebar"));f.deleteRelatedStyleRule(this._uid)};function i(e,t){var r=e._fullLayout;var n=new a({graphInfo:e,container:r._modebardiv.node(),buttons:t});if(r._privateplot){l.select(n.element).append("span").classed("badge-private float--left",true).text("PRIVATE")}return n}t.exports=i},{"../../fonts/ploticon":213,"../../lib":230,"@plotly/d3":11,"fast-isnumeric":15}],166:[function(e,t,r){"use strict";var n=e("../../plots/font_attributes");var a=e("../color/attributes");var i=e("../../plot_api/plot_template").templatedArray;var o=i("button",{visible:{valType:"boolean",dflt:true,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});t.exports={visible:{valType:"boolean",editType:"plot"},buttons:o,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:n({editType:"plot"}),bgcolor:{valType:"color",dflt:a.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":265,"../../plots/font_attributes":305,"../color/attributes":99}],167:[function(e,t,r){"use strict";t.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],168:[function(e,t,r){"use strict";var h=e("../../lib");var p=e("../color");var v=e("../../plot_api/plot_template");var g=e("../../plots/array_container_defaults");var m=e("./attributes");var _=e("./constants");t.exports=function e(t,r,n,a,i){var o=t.rangeselector||{};var s=v.newContainer(r,"rangeselector");function l(e,t){return h.coerce(o,s,m,e,t)}var c=g(o,s,{name:"buttons",handleItemDefaults:y,calendar:i});var u=l("visible",c.length>0);if(u){var f=b(r,n,a);l("x",f[0]);l("y",f[1]);h.noneOrAll(t,r,["x","y"]);l("xanchor");l("yanchor");h.coerceFont(l,"font",n.font);var d=l("bgcolor");l("activecolor",p.contrast(d,_.lightAmount,_.darkAmount));l("bordercolor");l("borderwidth")}};function y(r,n,e,t){var a=t.calendar;function i(e,t){return h.coerce(r,n,m.buttons,e,t)}var o=i("visible");if(o){var s=i("step");if(s!=="all"){if(a&&a!=="gregorian"&&(s==="month"||s==="year")){n.stepmode="backward"}else{i("stepmode")}i("count")}i("label")}}function b(t,r,e){var n=e.filter(function(e){return r[e].anchor===t._id});var a=0;for(var i=0;i<n.length;i++){var o=r[n[i]].domain;if(o)a=Math.max(o[1],a)}return[t.domain[0],a+_.yPad]}},{"../../lib":230,"../../plot_api/plot_template":265,"../../plots/array_container_defaults":271,"../color":100,"./attributes":166,"./constants":167}],169:[function(e,t,r){"use strict";var h=e("@plotly/d3");var o=e("../../registry");var p=e("../../plots/plots");var a=e("../color");var v=e("../drawing");var g=e("../../lib");var m=g.strTranslate;var _=e("../../lib/svg_text_utils");var i=e("../../plots/cartesian/axis_ids");var n=e("../../constants/alignment");var y=n.LINE_SPACING;var b=n.FROM_TL;var x=n.FROM_BR;var w=e("./constants");var s=e("./get_update_object");t.exports=function e(i){var t=i._fullLayout;var r=t._infolayer.selectAll(".rangeselector").data(l(i),c);r.enter().append("g").classed("rangeselector",true);r.exit().remove();r.style({cursor:"pointer","pointer-events":"all"});r.each(function(e){var t=h.select(this);var n=e;var a=n.rangeselector;var r=t.selectAll("g.button").data(g.filterVisible(a.buttons));r.enter().append("g").classed("button",true);r.exit().remove();r.each(function(e){var t=h.select(this);var r=s(n,e);e._isActive=u(n,e,r);t.call(f,a,e);t.call(A,a,e,i);t.on("click",function(){if(i._dragged)return;o.call("_guiRelayout",i,r)});t.on("mouseover",function(){e._isHovered=true;t.call(f,a,e)});t.on("mouseout",function(){e._isHovered=false;t.call(f,a,e)})});k(i,r,a,n._name,t)})};function l(e){var t=i.list(e,"x",true);var r=[];for(var n=0;n<t.length;n++){var a=t[n];if(a.rangeselector&&a.rangeselector.visible){r.push(a)}}return r}function c(e){return e._id}function u(e,t,r){if(t.step==="all"){return e.autorange===true}else{var n=Object.keys(r);return e.range[0]===r[n[0]]&&e.range[1]===r[n[1]]}}function f(e,t,r){var n=g.ensureSingle(e,"rect","selector-rect",function(e){e.attr("shape-rendering","crispEdges")});n.attr({rx:w.rx,ry:w.ry});n.call(a.stroke,t.bordercolor).call(a.fill,d(t,r)).style("stroke-width",t.borderwidth+"px")}function d(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}function A(e,t,r,n){function a(e){_.convertToTspans(e,n)}var i=g.ensureSingle(e,"text","selector-text",function(e){e.attr("text-anchor","middle")});i.call(v.font,t.font).text(T(r,n._fullLayout._meta)).call(a)}function T(e,t){if(e.label){return t?g.templateString(e.label,t):e.label}if(e.step==="all")return"all";return e.count+e.step.charAt(0)}function k(e,t,s,r,n){var l=0;var c=0;var u=s.borderwidth;t.each(function(){var e=h.select(this);var t=e.select(".selector-text");var r=s.font.size*y;var n=Math.max(r*_.lineCount(t),16)+3;c=Math.max(c,n)});t.each(function(){var e=h.select(this);var t=e.select(".selector-rect");var r=e.select(".selector-text");var n=r.node()&&v.bBox(r.node()).width;var a=s.font.size*y;var i=_.lineCount(r);var o=Math.max(n+10,w.minButtonWidth);e.attr("transform",m(u+l,u));t.attr({x:0,y:0,width:o,height:c});_.positionText(r,o/2,c/2-(i-1)*a/2+3);l+=o+5});var a=e._fullLayout._size;var i=a.l+a.w*s.x;var o=a.t+a.h*(1-s.y);var f="left";if(g.isRightAnchor(s)){i-=l;f="right"}if(g.isCenterAnchor(s)){i-=l/2;f="center"}var d="top";if(g.isBottomAnchor(s)){o-=c;d="bottom"}if(g.isMiddleAnchor(s)){o-=c/2;d="middle"}l=Math.ceil(l);c=Math.ceil(c);i=Math.round(i);o=Math.round(o);p.autoMargin(e,r+"-range-selector",{x:s.x,y:s.y,l:l*b[f],r:l*x[f],b:c*x[d],t:c*b[d]});n.attr("transform",m(i,o))}},{"../../constants/alignment":205,"../../lib":230,"../../lib/svg_text_utils":252,"../../plots/cartesian/axis_ids":280,"../../plots/plots":311,"../../registry":313,"../color":100,"../drawing":122,"./constants":167,"./get_update_object":170,"@plotly/d3":11}],170:[function(e,t,r){"use strict";var c=e("@plotly/d3");t.exports=function e(t,r){var n=t._name;var a={};if(r.step==="all"){a[n+".autorange"]=true}else{var i=o(t,r);a[n+".range[0]"]=i[0];a[n+".range[1]"]=i[1]}return a};function o(e,t){var r=e.range;var n=new Date(e.r2l(r[1]));var a=t.step;var i=t.count;var o;switch(t.stepmode){case"backward":o=e.l2r(+c.time[a].utc.offset(n,-i));break;case"todate":var s=c.time[a].utc.offset(n,-i);o=e.l2r(+c.time[a].utc.ceil(s));break}var l=r[1];return[o,l]}},{"@plotly/d3":11}],171:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":166,"./defaults":168,"./draw":169}],172:[function(e,t,r){"use strict";var n=e("../color/attributes");t.exports={bgcolor:{valType:"color",dflt:n.background,editType:"plot"},bordercolor:{valType:"color",dflt:n.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:true,editType:"calc",impliedEdits:{"range[0]":undefined,"range[1]":undefined}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":false}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":false}}],editType:"calc",impliedEdits:{autorange:false}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:true,editType:"calc"},editType:"calc"}},{"../color/attributes":99}],173:[function(e,t,r){"use strict";var o=e("../../plots/cartesian/axis_ids").list;var s=e("../../plots/cartesian/autorange").getAutoRange;var l=e("./constants");t.exports=function e(t){var r=o(t,"x",true);for(var n=0;n<r.length;n++){var a=r[n];var i=a[l.name];if(i&&i.visible&&i.autorange){i._input.autorange=true;i._input.range=i.range=s(t,a)}}}},{"../../plots/cartesian/autorange":275,"../../plots/cartesian/axis_ids":280,"./constants":174}],174:[function(e,t,r){"use strict";t.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],175:[function(e,t,r){"use strict";var x=e("../../lib");var w=e("../../plot_api/plot_template");var A=e("../../plots/cartesian/axis_ids");var T=e("./attributes");var k=e("./oppaxis_attributes");t.exports=function e(t,r,n){var a=t[n];var i=r[n];if(!(a.rangeslider||r._requestRangeslider[i._id]))return;if(!x.isPlainObject(a.rangeslider)){a.rangeslider={}}var o=a.rangeslider;var s=w.newContainer(i,"rangeslider");function l(e,t){return x.coerce(o,s,T,e,t)}var c,u;function f(e,t){return x.coerce(c,u,k,e,t)}var d=l("visible");if(!d)return;l("bgcolor",r.plot_bgcolor);l("bordercolor");l("borderwidth");l("thickness");l("autorange",!i.isValidRange(o.range));l("range");var h=r._subplots;if(h){var p=h.cartesian.filter(function(e){return e.substr(0,e.indexOf("y"))===A.name2id(n)}).map(function(e){return e.substr(e.indexOf("y"),e.length)});var v=x.simpleMap(p,A.id2name);for(var g=0;g<v.length;g++){var m=v[g];c=o[m]||{};u=w.newContainer(s,m,"yaxis");var _=r[m];var y;if(c.range&&_.isValidRange(c.range)){y="fixed"}var b=f("rangemode",y);if(b!=="match"){f("range",_.range.slice())}}}s._input=o}},{"../../lib":230,"../../plot_api/plot_template":265,"../../plots/cartesian/axis_ids":280,"./attributes":172,"./oppaxis_attributes":179}],176:[function(e,t,r){"use strict";var M=e("@plotly/d3");var s=e("../../registry");var g=e("../../plots/plots");var S=e("../../lib");var C=S.strTranslate;var l=e("../drawing");var h=e("../color");var L=e("../titles");var m=e("../../plots/cartesian");var E=e("../../plots/cartesian/axis_ids");var n=e("../dragelement");var b=e("../../lib/setcursor");var D=e("./constants");t.exports=function(T){var k=T._fullLayout;var e=k._rangeSliderData;for(var t=0;t<e.length;t++){var r=e[t][D.name];r._clipId=r._id+"-"+k._uid}function n(e){return e._name}var a=k._infolayer.selectAll("g."+D.containerClassName).data(e,n);a.exit().each(function(e){var t=e[D.name];k._topdefs.select("#"+t._clipId).remove()}).remove();if(e.length===0)return;a.enter().append("g").classed(D.containerClassName,true).attr("pointer-events","all");a.each(function(e){var t=M.select(this);var r=e[D.name];var n=k[E.id2name(e.anchor)];var a=r[E.id2name(e.anchor)];if(r.range){var i=S.simpleMap(r.range,e.r2l);var o=S.simpleMap(e.range,e.r2l);var s;if(o[0]<o[1]){s=[Math.min(i[0],o[0]),Math.max(i[1],o[1])]}else{s=[Math.max(i[0],o[0]),Math.min(i[1],o[1])]}r.range=r._input.range=S.simpleMap(s,e.l2r)}e.cleanRange("rangeslider.range");var l=k._size;var c=e.domain;r._width=l.w*(c[1]-c[0]);var u=Math.round(l.l+l.w*c[0]);var f=Math.round(l.t+l.h*(1-e._counterDomainMin)+(e.side==="bottom"?e._depth:0)+r._offsetShift+D.extraPad);t.attr("transform",C(u,f));r._rl=S.simpleMap(r.range,e.r2l);var d=r._rl[0];var h=r._rl[1];var p=h-d;r.p2d=function(e){return e/r._width*p+d};r.d2p=function(e){return(e-d)/p*r._width};if(e.rangebreaks){var v=e.locateBreaks(d,h);if(v.length){var g,m;var _=0;for(g=0;g<v.length;g++){m=v[g];_+=m.max-m.min}var y=r._width/(h-d-_);var b=[-y*d];for(g=0;g<v.length;g++){m=v[g];b.push(b[b.length-1]-y*(m.max-m.min))}r.d2p=function(e){var t=b[0];for(var r=0;r<v.length;r++){var n=v[r];if(e>=n.max)t=b[r+1];else if(e<n.min)break}return t+y*e};for(g=0;g<v.length;g++){m=v[g];m.pmin=r.d2p(m.min);m.pmax=r.d2p(m.max)}r.p2d=function(e){var t=b[0];for(var r=0;r<v.length;r++){var n=v[r];if(e>=n.pmax)t=b[r+1];else if(e<n.pmin)break}return(e-t)/y}}}if(a.rangemode!=="match"){var x=n.r2l(a.range[0]);var w=n.r2l(a.range[1]);var A=w-x;r.d2pOppAxis=function(e){return(e-x)/A*r._height}}t.call(I,T,e,r).call(R,T,e,r).call(z,T,e,r).call(N,T,e,r,a).call(F,T,e,r).call(j,T,e,r);O(t,T,e,r);P(t,T,e,r,n,a);if(e.side==="bottom"){L.draw(T,e._id+"title",{propContainer:e,propName:e._name+".title",placeholder:k._dfltTitle.x,attributes:{x:e._offset+e._length/2,y:f+r._height+r._offsetShift+10+1.5*e.title.font.size,"text-anchor":"middle"}})}})};function O(h,p,v,g){if(p._context.staticPlot)return;var m=h.select("rect."+D.slideBoxClassName).node();var _=h.select("rect."+D.grabAreaMinClassName).node();var y=h.select("rect."+D.grabAreaMaxClassName).node();function e(){var e=M.event;var s=e.target;var l=e.clientX||e.touches[0].clientX;var c=l-h.node().getBoundingClientRect().left;var u=g.d2p(v._rl[0]);var f=g.d2p(v._rl[1]);var d=n.coverSlip();this.addEventListener("touchmove",t);this.addEventListener("touchend",r);d.addEventListener("mousemove",t);d.addEventListener("mouseup",r);function t(e){var t=e.clientX||e.touches[0].clientX;var r=+t-l;var n,a,i;switch(s){case m:i="ew-resize";n=u+r;a=f+r;break;case _:i="col-resize";n=u+r;a=f;break;case y:i="col-resize";n=u;a=f+r;break;default:i="ew-resize";n=c;a=c+r;break}if(a<n){var o=a;a=n;n=o}g._pixelMin=n;g._pixelMax=a;b(M.select(d),i);x(h,p,v,g)}function r(){d.removeEventListener("mousemove",t);d.removeEventListener("mouseup",r);this.removeEventListener("touchmove",t);this.removeEventListener("touchend",r);S.removeElement(d)}}h.on("mousedown",e);h.on("touchstart",e)}function x(e,t,r,n){function a(e){return r.l2r(S.constrain(e,n._rl[0],n._rl[1]))}var i=a(n.p2d(n._pixelMin));var o=a(n.p2d(n._pixelMax));window.requestAnimationFrame(function(){s.call("_guiRelayout",t,r._name+".range",[i,o])})}function P(e,t,r,n,a,i){var o=D.handleWidth/2;function s(e){return S.constrain(e,0,n._width)}function l(e){return S.constrain(e,0,n._height)}function c(e){return S.constrain(e,-o,n._width+o)}var u=s(n.d2p(r._rl[0]));var f=s(n.d2p(r._rl[1]));e.select("rect."+D.slideBoxClassName).attr("x",u).attr("width",f-u);e.select("rect."+D.maskMinClassName).attr("width",u);e.select("rect."+D.maskMaxClassName).attr("x",f).attr("width",n._width-f);if(i.rangemode!=="match"){var d=n._height-l(n.d2pOppAxis(a._rl[1]));var h=n._height-l(n.d2pOppAxis(a._rl[0]));e.select("rect."+D.maskMinOppAxisClassName).attr("x",u).attr("height",d).attr("width",f-u);e.select("rect."+D.maskMaxOppAxisClassName).attr("x",u).attr("y",h).attr("height",n._height-h).attr("width",f-u);e.select("rect."+D.slideBoxClassName).attr("y",d).attr("height",h-d)}var p=.5;var v=Math.round(c(u-o))-p;var g=Math.round(c(f-o))+p;e.select("g."+D.grabberMinClassName).attr("transform",C(v,p));e.select("g."+D.grabberMaxClassName).attr("transform",C(g,p))}function I(e,t,r,n){var a=S.ensureSingle(e,"rect",D.bgClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})});var i=n.borderwidth%2===0?n.borderwidth:n.borderwidth-1;var o=-n._offsetShift;var s=l.crispRound(t,n.borderwidth);a.attr({width:n._width+i,height:n._height+i,transform:C(o,o),fill:n.bgcolor,stroke:n.bordercolor,"stroke-width":s})}function R(e,t,r,n){var a=t._fullLayout;var i=S.ensureSingleById(a._topdefs,"clipPath",n._clipId,function(e){e.append("rect").attr({x:0,y:0})});i.select("rect").attr({width:n._width,height:n._height})}function z(e,f,d,h){var p=f.calcdata;var t=e.selectAll("g."+D.rangePlotClassName).data(d._subplotsWith,S.identity);t.enter().append("g").attr("class",function(e){return D.rangePlotClassName+" "+e}).call(l.setClipUrl,h._clipId,f);t.order();t.exit().remove();var v;t.each(function(e,t){var r=M.select(this);var n=t===0;var a=E.getFromId(f,e,"y");var i=a._name;var o=h[i];var s={data:[],layout:{xaxis:{type:d.type,domain:[0,1],range:h.range.slice(),calendar:d.calendar},width:h._width,height:h._height,margin:{t:0,b:0,l:0,r:0}},_context:f._context};if(d.rangebreaks){s.layout.xaxis.rangebreaks=d.rangebreaks}s.layout[i]={type:a.type,domain:[0,1],range:o.rangemode!=="match"?o.range.slice():a.range.slice(),calendar:a.calendar};if(a.rangebreaks){s.layout[i].rangebreaks=a.rangebreaks}g.supplyDefaults(s);var l=s._fullLayout.xaxis;var c=s._fullLayout[i];l.clearCalc();l.setScale();c.clearCalc();c.setScale();var u={id:e,plotgroup:r,xaxis:l,yaxis:c,isRangePlot:true};if(n)v=u;else{u.mainplot="xy";u.mainplotinfo=v}m.rangePlot(f,u,_(p,e))})}function _(e,t){var r=[];for(var n=0;n<e.length;n++){var a=e[n];var i=a[0].trace;if(i.xaxis+i.yaxis===t){r.push(a)}}return r}function N(e,t,r,n,a){var i=S.ensureSingle(e,"rect",D.maskMinClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})});i.attr("height",n._height).call(h.fill,D.maskColor);var o=S.ensureSingle(e,"rect",D.maskMaxClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});o.attr("height",n._height).call(h.fill,D.maskColor);if(a.rangemode!=="match"){var s=S.ensureSingle(e,"rect",D.maskMinOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});s.attr("width",n._width).call(h.fill,D.maskOppAxisColor);var l=S.ensureSingle(e,"rect",D.maskMaxOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});l.attr("width",n._width).style("border-top",D.maskOppBorder).call(h.fill,D.maskOppAxisColor)}}function F(e,t,r,n){if(t._context.staticPlot)return;var a=S.ensureSingle(e,"rect",D.slideBoxClassName,function(e){e.attr({y:0,cursor:D.slideBoxCursor,"shape-rendering":"crispEdges"})});a.attr({height:n._height,fill:D.slideBoxFill})}function j(e,t,r,n){var a=S.ensureSingle(e,"g",D.grabberMinClassName);var i=S.ensureSingle(e,"g",D.grabberMaxClassName);var o={x:0,width:D.handleWidth,rx:D.handleRadius,fill:h.background,stroke:h.defaultLine,"stroke-width":D.handleStrokeWidth,"shape-rendering":"crispEdges"};var s={y:Math.round(n._height/4),height:Math.round(n._height/2)};var l=S.ensureSingle(a,"rect",D.handleMinClassName,function(e){e.attr(o)});l.attr(s);var c=S.ensureSingle(i,"rect",D.handleMaxClassName,function(e){e.attr(o)});c.attr(s);var u={width:D.grabAreaWidth,x:0,y:0,fill:D.grabAreaFill,cursor:!t._context.staticPlot?D.grabAreaCursor:undefined};var f=S.ensureSingle(a,"rect",D.grabAreaMinClassName,function(e){e.attr(u)});f.attr("height",n._height);var d=S.ensureSingle(i,"rect",D.grabAreaMaxClassName,function(e){e.attr(u)});d.attr("height",n._height)}},{"../../lib":230,"../../lib/setcursor":250,"../../plots/cartesian":290,"../../plots/cartesian/axis_ids":280,"../../plots/plots":311,"../../registry":313,"../color":100,"../dragelement":119,"../drawing":122,"../titles":198,"./constants":174,"@plotly/d3":11}],177:[function(e,t,r){"use strict";var s=e("../../plots/cartesian/axis_ids");var l=e("../../lib/svg_text_utils");var c=e("./constants");var u=e("../../constants/alignment").LINE_SPACING;var f=c.name;function d(e){var t=e&&e[f];return t&&t.visible}r.isVisible=d;r.makeData=function(e){var t=s.list({_fullLayout:e},"x",true);var r=e.margin;var n=[];if(!e._has("gl2d")){for(var a=0;a<t.length;a++){var i=t[a];if(d(i)){n.push(i);var o=i[f];o._id=f+i._id;o._height=(e.height-r.b-r.t)*o.thickness;o._offsetShift=Math.floor(o.borderwidth/2)}}}e._rangeSliderData=n};r.autoMarginOpts=function(e,t){var r=e._fullLayout;var n=t[f];var a=t._id.charAt(0);var i=0;var o=0;if(t.side==="bottom"){i=t._depth;if(t.title.text!==r._dfltTitle[a]){o=1.5*t.title.font.size+10+n._offsetShift;var s=(t.title.text.match(l.BR_TAG_ALL)||[]).length;o+=s*t.title.font.size*u}}return{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:n._height+i+Math.max(r.margin.b,o),pad:c.extraPad+n._offsetShift*2}}},{"../../constants/alignment":205,"../../lib/svg_text_utils":252,"../../plots/cartesian/axis_ids":280,"./constants":174}],178:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("./attributes");var i=e("./oppaxis_attributes");var o=e("./helpers");t.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:n.extendFlat({},a,{yaxis:i})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw"),isVisible:o.isVisible,makeData:o.makeData,autoMarginOpts:o.autoMarginOpts}},{"../../lib":230,"./attributes":172,"./calc_autorange":173,"./defaults":175,"./draw":176,"./helpers":177,"./oppaxis_attributes":179}],179:[function(e,t,r){"use strict";t.exports={_isSubplotObj:true,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],180:[function(e,t,r){"use strict";var n=e("../annotations/attributes");var a=e("../../traces/scatter/attributes").line;var i=e("../drawing/attributes").dash;var o=e("../../lib/extend").extendFlat;var s=e("../../plot_api/plot_template").templatedArray;var l=e("../../constants/axis_placeable_objects");t.exports=s("shape",{visible:{valType:"boolean",dflt:true,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:o({},n.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:o({},n.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:o({},a.color,{editType:"arraydraw"}),width:o({},a.width,{editType:"calc+arraydraw"}),dash:o({},i,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:false,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":206,"../../lib/extend":224,"../../plot_api/plot_template":265,"../../traces/scatter/attributes":353,"../annotations/attributes":83,"../drawing/attributes":121}],181:[function(e,t,r){"use strict";var p=e("../../lib");var v=e("../../plots/cartesian/axes");var g=e("./constants");var m=e("./helpers");t.exports=function e(t){var r=t._fullLayout;var n=p.filterVisible(r.shapes);if(!n.length||!t._fullData.length)return;for(var a=0;a<n.length;a++){var i=n[a];i._extremes={};var o;var s;var l=v.getRefType(i.xref);var c=v.getRefType(i.yref);if(i.xref!=="paper"&&l!=="domain"){var u=i.xsizemode==="pixel"?i.xanchor:i.x0;var f=i.xsizemode==="pixel"?i.xanchor:i.x1;o=v.getFromId(t,i.xref);s=b(o,u,f,i.path,g.paramIsX);if(s){i._extremes[o._id]=v.findExtremes(o,s,_(i))}}if(i.yref!=="paper"&&c!=="domain"){var d=i.ysizemode==="pixel"?i.yanchor:i.y0;var h=i.ysizemode==="pixel"?i.yanchor:i.y1;o=v.getFromId(t,i.yref);s=b(o,d,h,i.path,g.paramIsY);if(s){i._extremes[o._id]=v.findExtremes(o,s,y(i))}}}};function _(e){return n(e.line.width,e.xsizemode,e.x0,e.x1,e.path,false)}function y(e){return n(e.line.width,e.ysizemode,e.y0,e.y1,e.path,true)}function n(e,t,r,n,a,i){var o=e/2;var s=i;if(t==="pixel"){var l=a?m.extractPathCoords(a,i?g.paramIsY:g.paramIsX):[r,n];var c=p.aggNums(Math.max,null,l);var u=p.aggNums(Math.min,null,l);var f=u<0?Math.abs(u)+o:o;var d=c>0?c+o:o;return{ppad:o,ppadplus:s?f:d,ppadminus:s?d:f}}else{return{ppad:o}}}function b(e,t,r,n,a){var i=e.type==="category"||e.type==="multicategory"?e.r2c:e.d2c;if(t!==undefined)return[i(t),i(r)];if(!n)return;var o=Infinity;var s=-Infinity;var l=n.match(g.segmentRE);var c;var u;var f;var d;var h;if(e.type==="date")i=m.decodeDate(i);for(c=0;c<l.length;c++){u=l[c];f=a[u.charAt(0)].drawn;if(f===undefined)continue;d=l[c].substr(1).match(g.paramRE);if(!d||d.length<f)continue;h=i(d[f]);if(h<o)o=h;if(h>s)s=h}if(s>=o)return[o,s]}},{"../../lib":230,"../../plots/cartesian/axes":276,"./constants":182,"./helpers":191}],182:[function(e,t,r){"use strict";t.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:true,drawn:0},L:{0:true,drawn:0},H:{0:true,drawn:0},V:{},Q:{0:true,2:true,drawn:2},C:{0:true,2:true,4:true,drawn:4},T:{0:true,drawn:0},S:{0:true,2:true,drawn:2},Z:{}},paramIsY:{M:{1:true,drawn:1},L:{1:true,drawn:1},H:{},V:{0:true,drawn:0},Q:{1:true,3:true,drawn:3},C:{1:true,3:true,5:true,drawn:5},T:{1:true,drawn:1},S:{1:true,3:true,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],183:[function(e,t,r){"use strict";var L=e("../../lib");var E=e("../../plots/cartesian/axes");var n=e("../../plots/array_container_defaults");var D=e("./attributes");var O=e("./helpers");t.exports=function e(t,r){n(t,r,{name:"shapes",handleItemDefaults:a})};function a(r,n,e){function t(e,t){return L.coerce(r,n,D,e,t)}var a=t("visible");if(!a)return;var i=t("path");var o=i?"path":"rect";var s=t("type",o);if(n.type!=="path")delete n.path;t("editable");t("layer");t("opacity");t("fillcolor");t("fillrule");var l=t("line.width");if(l){t("line.color");t("line.dash")}var c=t("xsizemode");var u=t("ysizemode");var f=["x","y"];for(var d=0;d<2;d++){var h=f[d];var p=h+"anchor";var v=h==="x"?c:u;var g={_fullLayout:e};var m;var _;var y;var b=E.coerceRef(r,n,g,h,undefined,"paper");var x=E.getRefType(b);if(x==="range"){m=E.getFromId(g,b);m._shapeIndices.push(n._index);y=O.rangeToShapePosition(m);_=O.shapePositionToRange(m)}else{_=y=L.identity}if(s!=="path"){var w=.25;var A=.75;var T=h+"0";var k=h+"1";var M=r[T];var S=r[k];r[T]=_(r[T],true);r[k]=_(r[k],true);if(v==="pixel"){t(T,0);t(k,10)}else{E.coercePosition(n,g,t,b,T,w);E.coercePosition(n,g,t,b,k,A)}n[T]=y(n[T]);n[k]=y(n[k]);r[T]=M;r[k]=S}if(v==="pixel"){var C=r[p];r[p]=_(r[p],true);E.coercePosition(n,g,t,b,p,.25);n[p]=y(n[p]);r[p]=C}}if(s==="path"){t("path")}else{L.noneOrAll(r,n,["x0","x1","y0","y1"])}}},{"../../lib":230,"../../plots/array_container_defaults":271,"../../plots/cartesian/axes":276,"./attributes":180,"./helpers":191}],184:[function(e,t,r){"use strict";var g=e("../../registry");var m=e("../../lib");var Q=e("../../plots/cartesian/axes");var _=e("./draw_newshape/helpers").readPaths;var y=e("./draw_newshape/display_outlines");var i=e("../../plots/cartesian/handle_outline").clearOutlineControllers;var b=e("../color");var K=e("../drawing");var x=e("../../plot_api/plot_template").arrayEditor;var ee=e("../dragelement");var te=e("../../lib/setcursor");var re=e("./constants");var ne=e("./helpers");t.exports={draw:a,drawOne:o,eraseActiveShape:n};function a(e){var t=e._fullLayout;t._shapeUpperLayer.selectAll("path").remove();t._shapeLowerLayer.selectAll("path").remove();for(var r in t._plots){var n=t._plots[r].shapelayer;if(n)n.selectAll("path").remove()}for(var a=0;a<t.shapes.length;a++){if(t.shapes[a].visible){o(e,a)}}}function ae(e){return!!e._fullLayout._drawing}function w(e){return!e._context.edits.shapePosition}function o(p,v){p._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+v+'"]').remove();var e=ne.makeOptionsAndPlotinfo(p,v);var g=e.options;var m=e.plotinfo;if(!g._input||g.visible===false)return;if(g.layer!=="below"){r(p._fullLayout._shapeUpperLayer)}else if(g.xref==="paper"||g.yref==="paper"){r(p._fullLayout._shapeLowerLayer)}else{if(m._hadPlotinfo){var t=m.mainplotinfo||m;r(t.shapelayer)}else{r(p._fullLayout._shapeLowerLayer)}}function r(e){var t=oe(p,g);var r={"data-index":v,"fill-rule":g.fillrule,d:t};var n=g.opacity;var a=g.fillcolor;var i=g.line.width?g.line.color:"rgba(0,0,0,0)";var o=g.line.width;var s=g.line.dash;if(!o&&g.editable===true){o=5;s="solid"}var l=t[t.length-1]!=="Z";var c=w(p)&&g.editable&&p._fullLayout._activeShapeIndex===v;if(c){a=l?"rgba(0,0,0,0)":p._fullLayout.activeshape.fillcolor;n=p._fullLayout.activeshape.opacity}var u=e.append("path").attr(r).style("opacity",n).call(b.stroke,i).call(b.fill,a).call(K.dashLine,s,o);ie(u,p,g);var f;if(c||p._context.edits.shapePosition)f=x(p.layout,"shapes",g);if(c){u.style({cursor:"move"});var d={element:u.node(),plotinfo:m,gd:p,editHelpers:f,isActiveShape:true};var h=_(t,p);y(h,u,d)}else{if(p._context.edits.shapePosition){A(p,u,g,v,e,f)}else if(g.editable===true){u.style("pointer-events",l||b.opacity(a)*n<=.5?"stroke":"all")}}u.node().addEventListener("click",function(){return T(p,u)})}}function ie(e,t,r){var n=(r.xref+r.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");K.setClipUrl(e,n?"clip"+t._fullLayout._uid+n:null,t)}function A(_,y,b,i,x,e){var w=10;var A=10;var T=b.xsizemode==="pixel";var k=b.ysizemode==="pixel";var M=b.type==="line";var S=b.type==="path";var C=e.modifyItem;var L,E,D,O,P,I;var R,z,N,F,j,B,H,U;var V;var q=Q.getFromId(_,b.xref);var t=Q.getRefType(b.xref);var Y=Q.getFromId(_,b.yref);var r=Q.getRefType(b.yref);var G=ne.getDataToPixel(_,q,false,t);var W=ne.getDataToPixel(_,Y,true,r);var X=ne.getPixelToData(_,q,false,t);var Z=ne.getPixelToData(_,Y,true,r);var n=a();var s={element:n.node(),gd:_,prepFn:c,doneFn:u,clickFn:f};var J;ee.init(s);n.node().onmousemove=l;function a(){return M?o():y}function o(){var e=10;var t=Math.max(b.line.width,e);var r=x.append("g").attr("data-index",i);r.append("path").attr("d",y.attr("d")).style({cursor:"move","stroke-width":t,"stroke-opacity":"0"});var n={"fill-opacity":"0"};var a=Math.max(t/2,e);r.append("circle").attr({"data-line-point":"start-point",cx:T?G(b.xanchor)+b.x0:G(b.x0),cy:k?W(b.yanchor)-b.y0:W(b.y0),r:a}).style(n).classed("cursor-grab",true);r.append("circle").attr({"data-line-point":"end-point",cx:T?G(b.xanchor)+b.x1:G(b.x1),cy:k?W(b.yanchor)-b.y1:W(b.y1),r:a}).style(n).classed("cursor-grab",true);return r}function l(e){if(ae(_)){J=null;return}if(M){if(e.target.tagName==="path"){J="move"}else{J=e.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point"}}else{var t=s.element.getBoundingClientRect();var r=t.right-t.left;var n=t.bottom-t.top;var a=e.clientX-t.left;var i=e.clientY-t.top;var o=!S&&r>w&&n>A&&!e.shiftKey?ee.getCursor(a/r,1-i/n):"move";te(y,o);J=o.split("-")[0]}}function c(e){if(ae(_))return;if(T){P=G(b.xanchor)}if(k){I=W(b.yanchor)}if(b.type==="path"){V=b.path}else{L=T?b.x0:G(b.x0);E=k?b.y0:W(b.y0);D=T?b.x1:G(b.x1);O=k?b.y1:W(b.y1)}if(L<D){N=L;H="x0";F=D;U="x1"}else{N=D;H="x1";F=L;U="x0"}if(!k&&E<O||k&&E>O){R=E;j="y0";z=O;B="y1"}else{R=O;j="y1";z=E;B="y0"}l(e);$(x,b);v(y,b,_);s.moveFn=J==="move"?d:h;s.altKey=e.altKey}function u(){if(ae(_))return;te(y);p(x);ie(y,_,b);g.call("_guiRelayout",_,e.getUpdateObj())}function f(){if(ae(_))return;p(x)}function d(r,n){if(b.type==="path"){var e=function(e){return e};var t=e;var a=e;if(T){C("xanchor",b.xanchor=X(P+r))}else{t=function e(t){return X(G(t)+r)};if(q&&q.type==="date")t=ne.encodeDate(t)}if(k){C("yanchor",b.yanchor=Z(I+n))}else{a=function e(t){return Z(W(t)+n)};if(Y&&Y.type==="date")a=ne.encodeDate(a)}C("path",b.path=se(V,t,a))}else{if(T){C("xanchor",b.xanchor=X(P+r))}else{C("x0",b.x0=X(L+r));C("x1",b.x1=X(D+r))}if(k){C("yanchor",b.yanchor=Z(I+n))}else{C("y0",b.y0=Z(E+n));C("y1",b.y1=Z(O+n))}}y.attr("d",oe(_,b));$(x,b)}function h(r,n){if(S){var e=function(e){return e};var t=e;var a=e;if(T){C("xanchor",b.xanchor=X(P+r))}else{t=function e(t){return X(G(t)+r)};if(q&&q.type==="date")t=ne.encodeDate(t)}if(k){C("yanchor",b.yanchor=Z(I+n))}else{a=function e(t){return Z(W(t)+n)};if(Y&&Y.type==="date")a=ne.encodeDate(a)}C("path",b.path=se(V,t,a))}else if(M){if(J==="resize-over-start-point"){var i=L+r;var o=k?E-n:E+n;C("x0",b.x0=T?i:X(i));C("y0",b.y0=k?o:Z(o))}else if(J==="resize-over-end-point"){var s=D+r;var l=k?O-n:O+n;C("x1",b.x1=T?s:X(s));C("y1",b.y1=k?l:Z(l))}}else{var c=function(e){return J.indexOf(e)!==-1};var u=c("n");var f=c("s");var d=c("w");var h=c("e");var p=u?R+n:R;var v=f?z+n:z;var g=d?N+r:N;var m=h?F+r:F;if(k){if(u)p=R-n;if(f)v=z-n}if(!k&&v-p>A||k&&p-v>A){C(j,b[j]=k?p:Z(p));C(B,b[B]=k?v:Z(v))}if(m-g>w){C(H,b[H]=T?g:X(g));C(U,b[U]=T?m:X(m))}}y.attr("d",oe(_,b));$(x,b)}function $(l,c){if(T||k){e()}function e(){var e=c.type!=="path";var t=l.selectAll(".visual-cue").data([0]);var r=1;t.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":r}).classed("visual-cue",true);var n=G(T?c.xanchor:m.midRange(e?[c.x0,c.x1]:ne.extractPathCoords(c.path,re.paramIsX)));var a=W(k?c.yanchor:m.midRange(e?[c.y0,c.y1]:ne.extractPathCoords(c.path,re.paramIsY)));n=ne.roundPositionForSharpStrokeRendering(n,r);a=ne.roundPositionForSharpStrokeRendering(a,r);if(T&&k){var i="M"+(n-1-r)+","+(a-1-r)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";t.attr("d",i)}else if(T){var o="M"+(n-1-r)+","+(a-9-r)+"v18 h2 v-18 Z";t.attr("d",o)}else{var s="M"+(n-9-r)+","+(a-1-r)+"h18 v2 h-18 Z";t.attr("d",s)}}}function p(e){e.selectAll(".visual-cue").remove()}function v(e,t,r){var n=t.xref;var a=t.yref;var i=Q.getFromId(r,n);var o=Q.getFromId(r,a);var s="";if(n!=="paper"&&!i.autorange)s+=n;if(a!=="paper"&&!o.autorange)s+=a;K.setClipUrl(e,s?"clip"+r._fullLayout._uid+s:null,r)}}function oe(e,t){var r=t.type;var n=Q.getRefType(t.xref);var a=Q.getRefType(t.yref);var i=Q.getFromId(e,t.xref);var o=Q.getFromId(e,t.yref);var s=e._fullLayout._size;var l,c,u,f;var d,h,p,v;if(i){if(n==="domain"){c=function(e){return i._offset+i._length*e}}else{l=ne.shapePositionToRange(i);c=function(e){return i._offset+i.r2p(l(e,true))}}}else{c=function(e){return s.l+s.w*e}}if(o){if(a==="domain"){f=function(e){return o._offset+o._length*(1-e)}}else{u=ne.shapePositionToRange(o);f=function(e){return o._offset+o.r2p(u(e,true))}}}else{f=function(e){return s.t+s.h*(1-e)}}if(r==="path"){if(i&&i.type==="date")c=ne.decodeDate(c);if(o&&o.type==="date")f=ne.decodeDate(f);return k(t,c,f)}if(t.xsizemode==="pixel"){var g=c(t.xanchor);d=g+t.x0;h=g+t.x1}else{d=c(t.x0);h=c(t.x1)}if(t.ysizemode==="pixel"){var m=f(t.yanchor);p=m-t.y0;v=m-t.y1}else{p=f(t.y0);v=f(t.y1)}if(r==="line")return"M"+d+","+p+"L"+h+","+v;if(r==="rect")return"M"+d+","+p+"H"+h+"V"+v+"H"+d+"Z";var _=(d+h)/2;var y=(p+v)/2;var b=Math.abs(_-d);var x=Math.abs(y-p);var w="A"+b+","+x;var A=_+b+","+y;var T=_+","+(y-x);return"M"+A+w+" 0 1,1 "+T+w+" 0 0,1 "+A+"Z"}function k(e,s,l){var t=e.path;var c=e.xsizemode;var u=e.ysizemode;var f=e.xanchor;var d=e.yanchor;return t.replace(re.segmentRE,function(e){var t=0;var r=e.charAt(0);var n=re.paramIsX[r];var a=re.paramIsY[r];var i=re.numParams[r];var o=e.substr(1).replace(re.paramRE,function(e){if(n[t]){if(c==="pixel")e=s(f)+Number(e);else e=s(e)}else if(a[t]){if(u==="pixel")e=l(d)-Number(e);else e=l(e)}t++;if(t>i)e="X";return e});if(t>i){o=o.replace(/[\s,]*X.*/,"");m.log("Ignoring extra params in segment "+e)}return r+o})}function se(e,s,l){return e.replace(re.segmentRE,function(e){var t=0;var r=e.charAt(0);var n=re.paramIsX[r];var a=re.paramIsY[r];var i=re.numParams[r];var o=e.substr(1).replace(re.paramRE,function(e){if(t>=i)return e;if(n[t])e=s(e);else if(a[t])e=l(e);t++;return e});return r+o})}function T(e,t){if(!w(e))return;var r=t.node();var n=+r.getAttribute("data-index");if(n>=0){if(n===e._fullLayout._activeShapeIndex){s(e);return}e._fullLayout._activeShapeIndex=n;e._fullLayout._deactivateShape=s;a(e)}}function s(e){if(!w(e))return;var t=e._fullLayout._activeShapeIndex;if(t>=0){i(e);delete e._fullLayout._activeShapeIndex;a(e)}}function n(e){if(!w(e))return;i(e);var t=e._fullLayout._activeShapeIndex;var r=(e.layout||{}).shapes||[];if(t<r.length){var n=[];for(var a=0;a<r.length;a++){if(a!==t){n.push(r[a])}}delete e._fullLayout._activeShapeIndex;g.call("_guiRelayout",e,{shapes:n})}}},{"../../lib":230,"../../lib/setcursor":250,"../../plot_api/plot_template":265,"../../plots/cartesian/axes":276,"../../plots/cartesian/handle_outline":287,"../../registry":313,"../color":100,"../dragelement":119,"../drawing":122,"./constants":182,"./draw_newshape/display_outlines":188,"./draw_newshape/helpers":189,"./helpers":191}],185:[function(e,t,r){"use strict";var n=e("../../drawing/attributes").dash;var a=e("../../../lib/extend").extendFlat;t.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:a({},n,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":224,"../../drawing/attributes":121}],186:[function(e,t,r){"use strict";var n=32;t.exports={CIRCLE_SIDES:n,i000:0,i090:n/4,i180:n/2,i270:n/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],187:[function(e,t,r){"use strict";var o=e("../../color");t.exports=function e(t,r,n){n("newshape.drawdirection");n("newshape.layer");n("newshape.fillcolor");n("newshape.fillrule");n("newshape.opacity");var a=n("newshape.line.width");if(a){var i=(t||{}).plot_bgcolor||"#FFF";n("newshape.line.color",o.contrast(i));n("newshape.line.dash")}n("activeshape.fillcolor");n("activeshape.opacity")}},{"../../color":100}],188:[function(e,t,r){"use strict";var E=e("../../dragelement");var n=e("../../dragelement/helpers");var D=n.drawMode;var O=e("../../../registry");var a=e("./constants");var P=a.i000;var I=a.i090;var R=a.i180;var z=a.i270;var i=e("../../../plots/cartesian/handle_outline");var N=i.clearOutlineControllers;var o=e("./helpers");var F=o.pointsShapeRectangle;var j=o.pointsShapeEllipse;var B=o.writePaths;var H=e("./newshapes");t.exports=function e(u,r,n,t){if(!t)t=0;var c=n.gd;function f(){e(u,r,n,t++);if(j(u[0])){a({redrawing:true})}}function a(e){n.isActiveShape=false;var t=H(r,n);if(Object.keys(t).length){O.call((e||{}).redrawing?"relayout":"_guiRelayout",c,t)}}var i=n.isActiveShape;var o=c._fullLayout;var s=o._zoomlayer;var l=n.dragmode;var d=D(l);if(d)c._fullLayout._drawing=true;else if(c._fullLayout._activeShapeIndex>=0)N(c);r.attr("d",B(u));var h;var p;var v;var g;var m;if(i&&!t){m=U([],u);var _=s.append("g").attr("class","outline-controllers");T(_);L()}function y(e){v=+e.srcElement.getAttribute("data-i");g=+e.srcElement.getAttribute("data-j");h[v][g].moveFn=b}function b(e,t){if(!u.length)return;var r=m[v][g][1];var n=m[v][g][2];var a=u[v];var i=a.length;if(F(a)){for(var o=0;o<i;o++){if(o===g)continue;var s=a[o];if(s[1]===a[g][1]){s[1]=r+e}if(s[2]===a[g][2]){s[2]=n+t}}a[g][1]=r+e;a[g][2]=n+t;if(!F(a)){for(var l=0;l<i;l++){for(var c=0;c<a[l].length;c++){a[l][c]=m[v][l][c]}}}}else{a[g][1]=r+e;a[g][2]=n+t}f()}function x(){a()}function w(){if(!u.length)return;if(!u[v])return;if(!u[v].length)return;var e=[];for(var t=0;t<u[v].length;t++){if(t!==g){e.push(u[v][t])}}if(e.length>1&&!(e.length===2&&e[1][0]==="Z")){if(g===0){e[0][0]="M"}u[v]=e;f();a()}}function A(e,t){if(e===2){v=+t.srcElement.getAttribute("data-i");g=+t.srcElement.getAttribute("data-j");var r=u[v];if(!F(r)&&!j(r)){w()}}}function T(e){h=[];for(var t=0;t<u.length;t++){var r=u[t];var n=F(r);var a=!n&&j(r);h[t]=[];for(var i=0;i<r.length;i++){if(r[i][0]==="Z")continue;if(a&&i!==P&&i!==I&&i!==R&&i!==z){continue}var o=r[i][1];var s=r[i][2];var l=e.append("circle").classed("cursor-grab",true).attr("data-i",t).attr("data-j",i).attr("cx",o).attr("cy",s).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});h[t][i]={element:l.node(),gd:c,prepFn:y,doneFn:x,clickFn:A};E.init(h[t][i])}}}function k(e,t){if(!u.length)return;for(var r=0;r<u.length;r++){for(var n=0;n<u[r].length;n++){for(var a=0;a+2<u[r][n].length;a+=2){u[r][n][a+1]=m[r][n][a+1]+e;u[r][n][a+2]=m[r][n][a+2]+t}}}}function M(e,t){k(e,t);f()}function S(e){v=+e.srcElement.getAttribute("data-i");if(!v)v=0;p[v].moveFn=M}function C(){a()}function L(){p=[];if(!u.length)return;var e=0;p[e]={element:r[0][0],gd:c,prepFn:S,doneFn:C};E.init(p[e])}};function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];e[r]=[];for(var a=0;a<n.length;a++){e[r][a]=[];for(var i=0;i<n[a].length;i++){e[r][a][i]=n[a][i]}}}return e}},{"../../../plots/cartesian/handle_outline":287,"../../../registry":313,"../../dragelement":119,"../../dragelement/helpers":118,"./constants":186,"./helpers":189,"./newshapes":190}],189:[function(e,t,f){"use strict";var R=e("parse-svg-path");var r=e("./constants");var z=r.CIRCLE_SIDES;var d=r.SQRT2;var n=e("../../../plots/cartesian/helpers");var N=n.p2r;var F=n.r2p;var u=[0,3,4,5,6,1,2];var h=[0,3,4,1,2];f.writePaths=function(e){var t=e.length;if(!t)return"M0,0Z";var r="";for(var n=0;n<t;n++){var a=e[n].length;for(var i=0;i<a;i++){var o=e[n][i][0];if(o==="Z"){r+="Z"}else{var s=e[n][i].length;for(var l=0;l<s;l++){var c=l;if(o==="Q"||o==="S"){c=h[l]}else if(o==="C"){c=u[l]}r+=e[n][i][c];if(l>0&&l<s-1){r+=","}}}}}return r};f.readPaths=function(e,t,r,n){var a=R(e);var i=[];var o=-1;var s=function(){o++;i[o]=[]};var l;var c=0;var u=0;var f;var d;var h=function(){f=c;d=u};h();for(var p=0;p<a.length;p++){var v=[];var g,m,_,y;var b=a[p][0];var x=b;switch(b){case"M":s();c=+a[p][1];u=+a[p][2];v.push([x,c,u]);h();break;case"Q":case"S":g=+a[p][1];_=+a[p][2];c=+a[p][3];u=+a[p][4];v.push([x,c,u,g,_]);break;case"C":g=+a[p][1];_=+a[p][2];m=+a[p][3];y=+a[p][4];c=+a[p][5];u=+a[p][6];v.push([x,c,u,g,_,m,y]);break;case"T":case"L":c=+a[p][1];u=+a[p][2];v.push([x,c,u]);break;case"H":x="L";c=+a[p][1];v.push([x,c,u]);break;case"V":x="L";u=+a[p][1];v.push([x,c,u]);break;case"A":x="L";var w=+a[p][1];var A=+a[p][2];if(!+a[p][4]){w=-w;A=-A}var T=c-w;var k=u;for(l=1;l<=z/2;l++){var M=2*Math.PI*l/z;v.push([x,T+w*Math.cos(M),k+A*Math.sin(M)])}break;case"Z":if(c!==f||u!==d){c=f;u=d;v.push([x,c,u])}break}var S=(r||{}).domain;var C=t._fullLayout._size;var L=r&&r.xsizemode==="pixel";var E=r&&r.ysizemode==="pixel";var D=n===false;for(var O=0;O<v.length;O++){for(l=0;l+2<7;l+=2){var P=v[O][l+1];var I=v[O][l+2];if(P===undefined||I===undefined)continue;c=P;u=I;if(r){if(r.xaxis&&r.xaxis.p2r){if(D)P-=r.xaxis._offset;if(L){P=F(r.xaxis,r.xanchor)+P}else{P=N(r.xaxis,P)}}else{if(D)P-=C.l;if(S)P=S.x[0]+P/C.w;else P=P/C.w}if(r.yaxis&&r.yaxis.p2r){if(D)I-=r.yaxis._offset;if(E){I=F(r.yaxis,r.yanchor)-I}else{I=N(r.yaxis,I)}}else{if(D)I-=C.t;if(S)I=S.y[1]-I/C.h;else I=1-I/C.h}}v[O][l+1]=P;v[O][l+2]=I}i[o].push(v[O].slice())}}return i};function s(e,t){return Math.abs(e-t)<=1e-6}function l(e,t){var r=t[1]-e[1];var n=t[2]-e[2];return Math.sqrt(r*r+n*n)}f.pointsShapeRectangle=function(e){var t=e.length;if(t!==5)return false;for(var r=1;r<3;r++){var n=e[0][r]-e[1][r];var a=e[3][r]-e[2][r];if(!s(n,a))return false;var i=e[0][r]-e[3][r];var o=e[1][r]-e[2][r];if(!s(i,o))return false}if(!s(e[0][1],e[1][1])&&!s(e[0][1],e[3][1]))return false;return!!(l(e[0],e[1])*l(e[0],e[3]))};f.pointsShapeEllipse=function(e){var t=e.length;if(t!==z+1)return false;t=z;for(var r=0;r<t;r++){var n=(t*2-r)%t;var a=(t/2+n)%t;var i=(t/2+r)%t;if(!s(l(e[r],e[i]),l(e[n],e[a])))return false}return true};f.handleEllipse=function(e,t,r){if(!e)return[t,r];var n=f.ellipseOver({x0:t[0],y0:t[1],x1:r[0],y1:r[1]});var a=(n.x1+n.x0)/2;var i=(n.y1+n.y0)/2;var o=(n.x1-n.x0)/2;var s=(n.y1-n.y0)/2;if(!o)o=s=s/d;if(!s)s=o=o/d;var l=[];for(var c=0;c<z;c++){var u=c*2*Math.PI/z;l.push([a+o*Math.cos(u),i+s*Math.sin(u)])}return l};f.ellipseOver=function(e){var t=e.x0;var r=e.y0;var n=e.x1;var a=e.y1;var i=n-t;var o=a-r;t-=i;r-=o;var s=(t+n)/2;var l=(r+a)/2;var c=d;i*=c;o*=c;return{x0:s-i,y0:l-o,x1:s+i,y1:l+o}}},{"../../../plots/cartesian/helpers":288,"./constants":186,"parse-svg-path":54}],190:[function(e,t,r){"use strict";var n=e("../../dragelement/helpers");var U=n.drawMode;var V=n.openMode;var a=e("./constants");var q=a.i000;var Y=a.i090;var G=a.i180;var W=a.i270;var X=a.cos45;var Z=a.sin45;var i=e("../../../plots/cartesian/helpers");var J=i.p2r;var $=i.r2p;var o=e("../../../plots/cartesian/handle_outline");var Q=o.clearSelect;var s=e("./helpers");var K=s.readPaths;var ee=s.writePaths;var te=s.ellipseOver;t.exports=function e(t,r){if(!t.length)return;var n=t[0][0];if(!n)return;var a=n.getAttribute("d");var i=r.gd;var o=i._fullLayout.newshape;var s=r.plotinfo;var l=s.xaxis;var c=s.yaxis;var u=!!s.domain||!s.xaxis;var f=!!s.domain||!s.yaxis;var d=r.isActiveShape;var h=r.dragmode;var p=(i.layout||{}).shapes||[];if(!U(h)&&d!==undefined){var v=i._fullLayout._activeShapeIndex;if(v<p.length){switch(i._fullLayout.shapes[v].type){case"rect":h="drawrect";break;case"circle":h="drawcircle";break;case"line":h="drawline";break;case"path":var g=p[v].path||"";if(g[g.length-1]==="Z"){h="drawclosedpath"}else{h="drawopenpath"}break}}}var m=V(h);var _=K(a,i,s,d);var y={editable:true,xref:u?"paper":l._id,yref:f?"paper":c._id,layer:o.layer,opacity:o.opacity,line:{color:o.line.color,width:o.line.width,dash:o.line.dash}};if(!m){y.fillcolor=o.fillcolor;y.fillrule=o.fillrule}var b;if(_.length===1)b=_[0];if(b&&h==="drawrect"){y.type="rect";y.x0=b[0][1];y.y0=b[0][2];y.x1=b[2][1];y.y1=b[2][2]}else if(b&&h==="drawline"){y.type="line";y.x0=b[0][1];y.y0=b[0][2];y.x1=b[1][1];y.y1=b[1][2]}else if(b&&h==="drawcircle"){y.type="circle";var x=b[q][1];var w=b[Y][1];var A=b[G][1];var T=b[W][1];var k=b[q][2];var M=b[Y][2];var S=b[G][2];var C=b[W][2];var L=s.xaxis&&(s.xaxis.type==="date"||s.xaxis.type==="log");var E=s.yaxis&&(s.yaxis.type==="date"||s.yaxis.type==="log");if(L){x=$(s.xaxis,x);w=$(s.xaxis,w);A=$(s.xaxis,A);T=$(s.xaxis,T)}if(E){k=$(s.yaxis,k);M=$(s.yaxis,M);S=$(s.yaxis,S);C=$(s.yaxis,C)}var D=(w+T)/2;var O=(k+S)/2;var P=(T-w+A-x)/2;var I=(C-M+S-k)/2;var R=te({x0:D,y0:O,x1:D+P*X,y1:O+I*Z});if(L){R.x0=J(s.xaxis,R.x0);R.x1=J(s.xaxis,R.x1)}if(E){R.y0=J(s.yaxis,R.y0);R.y1=J(s.yaxis,R.y1)}y.x0=R.x0;y.y0=R.y0;y.x1=R.x1;y.y1=R.y1}else{y.type="path";if(l&&c)re(_,l,c);y.path=ee(_);b=null}Q(i);var z=r.editHelpers;var N=(z||{}).modifyItem;var F=[];for(var j=0;j<p.length;j++){var B=i._fullLayout.shapes[j];F[j]=B._input;if(d!==undefined&&j===i._fullLayout._activeShapeIndex){var H=y;switch(B.type){case"line":case"rect":case"circle":N("x0",H.x0);N("x1",H.x1);N("y0",H.y0);N("y1",H.y1);break;case"path":N("path",H.path);break}}}if(d===undefined){F.push(y);return F}return z?z.getUpdateObj():{}};function re(e,t,r){var n=t.type==="date";var a=r.type==="date";if(!n&&!a)return e;for(var i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++){for(var s=0;s+2<e[i][o].length;s+=2){if(n)e[i][o][s+1]=e[i][o][s+1].replace(" ","_");if(a)e[i][o][s+2]=e[i][o][s+2].replace(" ","_")}}}return e}},{"../../../plots/cartesian/handle_outline":287,"../../../plots/cartesian/helpers":288,"../../dragelement/helpers":118,"./constants":186,"./helpers":189}],191:[function(e,t,s){"use strict";var i=e("./constants");var o=e("../../lib");s.rangeToShapePosition=function(e){return e.type==="log"?e.r2d:function(e){return e}};s.shapePositionToRange=function(e){return e.type==="log"?e.d2r:function(e){return e}};s.decodeDate=function(t){return function(e){if(e.replace)e=e.replace("_"," ");return t(e)}};s.encodeDate=function(t){return function(e){return t(e).replace(" ","_")}};s.extractPathCoords=function(e,n){var a=[];var t=e.match(i.segmentRE);t.forEach(function(e){var t=n[e.charAt(0)].drawn;if(t===undefined)return;var r=e.substr(1).match(i.paramRE);if(!r||r.length<t)return;a.push(o.cleanNumber(r[t]))});return a};s.getDataToPixel=function(e,t,r,n){var a=e._fullLayout._size;var i;if(t){if(n==="domain"){i=function(e){return t._length*(r?1-e:e)+t._offset}}else{var o=s.shapePositionToRange(t);i=function(e){return t._offset+t.r2p(o(e,true))};if(t.type==="date")i=s.decodeDate(i)}}else if(r){i=function(e){return a.t+a.h*(1-e)}}else{i=function(e){return a.l+a.w*e}}return i};s.getPixelToData=function(e,r,n,t){var a=e._fullLayout._size;var i;if(r){if(t==="domain"){i=function(e){var t=(e-r._offset)/r._length;return n?1-t:t}}else{var o=s.rangeToShapePosition(r);i=function(e){return o(r.p2r(e-r._offset))}}}else if(n){i=function(e){return 1-(e-a.t)/a.h}}else{i=function(e){return(e-a.l)/a.w}}return i};s.roundPositionForSharpStrokeRendering=function(e,t){var r=Math.round(t%2)===1;var n=Math.round(e);return r?n+.5:n};s.makeOptionsAndPlotinfo=function(e,t){var r=e._fullLayout.shapes[t]||{};var n=e._fullLayout._plots[r.xref+r.yref];var a=!!n;if(a){n._hadPlotinfo=true}else{n={};if(r.xref&&r.xref!=="paper")n.xaxis=e._fullLayout[r.xref+"axis"];if(r.yref&&r.yref!=="paper")n.yaxis=e._fullLayout[r.yref+"axis"]}n.xsizemode=r.xsizemode;n.ysizemode=r.ysizemode;n.xanchor=r.xanchor;n.yanchor=r.yanchor;return{options:r,plotinfo:n}}},{"../../lib":230,"./constants":182}],192:[function(e,t,r){"use strict";var n=e("./draw");t.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),supplyDrawNewShapeDefaults:e("./draw_newshape/defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:n.draw,drawOne:n.drawOne}},{"../../plots/cartesian/include_components":289,"./attributes":180,"./calc_autorange":181,"./defaults":183,"./draw":184,"./draw_newshape/defaults":187}],193:[function(e,t,r){"use strict";var n=e("../../plots/font_attributes");var a=e("../../plots/pad_attributes");var i=e("../../lib/extend").extendDeepAll;var o=e("../../plot_api/edit_types").overrideAll;var s=e("../../plots/animation_attributes");var l=e("../../plot_api/plot_template").templatedArray;var c=e("./constants");var u=l("step",{visible:{valType:"boolean",dflt:true},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:true,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:true}});t.exports=o(l("slider",{visible:{valType:"boolean",dflt:true},active:{valType:"number",min:0,dflt:0},steps:u,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:i(a({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:true},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:n({})},font:n({}),activebgcolor:{valType:"color",dflt:c.gripBgActiveColor},bgcolor:{valType:"color",dflt:c.railBgColor},bordercolor:{valType:"color",dflt:c.railBorderColor},borderwidth:{valType:"number",min:0,dflt:c.railBorderWidth},ticklen:{valType:"number",min:0,dflt:c.tickLength},tickcolor:{valType:"color",dflt:c.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:c.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":224,"../../plot_api/edit_types":258,"../../plot_api/plot_template":265,"../../plots/animation_attributes":270,"../../plots/font_attributes":305,"../../plots/pad_attributes":310,"./constants":194}],194:[function(e,t,r){"use strict";t.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],195:[function(e,t,r){"use strict";var f=e("../../lib");var d=e("../../plots/array_container_defaults");var h=e("./attributes");var n=e("./constants");var a=n.name;var i=h.steps;t.exports=function e(t,r){d(t,r,{name:a,handleItemDefaults:o})};function o(r,n,e){function t(e,t){return f.coerce(r,n,h,e,t)}var a=d(r,n,{name:"steps",handleItemDefaults:p});var i=0;for(var o=0;o<a.length;o++){if(a[o].visible)i++}var s;if(i<2)s=n.visible=false;else s=t("visible");if(!s)return;n._stepCount=i;var l=n._visibleSteps=f.filterVisible(a);var c=t("active");if(!(a[c]||{}).visible)n.active=l[0]._index;t("x");t("y");f.noneOrAll(r,n,["x","y"]);t("xanchor");t("yanchor");t("len");t("lenmode");t("pad.t");t("pad.r");t("pad.b");t("pad.l");f.coerceFont(t,"font",e.font);var u=t("currentvalue.visible");if(u){t("currentvalue.xanchor");t("currentvalue.prefix");t("currentvalue.suffix");t("currentvalue.offset");f.coerceFont(t,"currentvalue.font",n.font)}t("transition.duration");t("transition.easing");t("bgcolor");t("activebgcolor");t("bordercolor");t("borderwidth");t("ticklen");t("tickwidth");t("tickcolor");t("minorticklen")}function p(r,n){function e(e,t){return f.coerce(r,n,i,e,t)}var t;if(r.method!=="skip"&&!Array.isArray(r.args)){t=n.visible=false}else t=e("visible");if(t){e("method");e("args");var a=e("label","step-"+n._index);e("value",a);e("execute")}}},{"../../lib":230,"../../plots/array_container_defaults":271,"./attributes":193,"./constants":194}],196:[function(e,t,r){"use strict";var p=e("@plotly/d3");var v=e("../../plots/plots");var l=e("../color");var g=e("../drawing");var m=e("../../lib");var c=m.strTranslate;var _=e("../../lib/svg_text_utils");var u=e("../../plot_api/plot_template").arrayEditor;var y=e("./constants");var n=e("../../constants/alignment");var d=n.LINE_SPACING;var b=n.FROM_TL;var x=n.FROM_BR;t.exports=function e(n){var t=n._fullLayout;var r=f(t,n);var a=t._infolayer.selectAll("g."+y.containerClassName).data(r.length>0?[0]:[]);a.enter().append("g").classed(y.containerClassName,true).style("cursor","ew-resize");function i(e){if(e._commandObserver){e._commandObserver.remove();delete e._commandObserver}v.autoMargin(n,w(e))}a.exit().each(function(){p.select(this).selectAll("g."+y.groupClassName).each(i)}).remove();if(r.length===0)return;var o=a.selectAll("g."+y.groupClassName).data(r,h);o.enter().append("g").classed(y.groupClassName,true);o.exit().each(i).remove();for(var s=0;s<r.length;s++){var l=r[s];A(n,l)}o.each(function(e){var r=p.select(this);L(e);v.manageCommandObserver(n,e,e._visibleSteps,function(e){var t=r.data()[0];if(t.active===e.index)return;if(t._dragging)return;C(n,r,t,e.index,false,true)});T(n,p.select(this),e)})};function w(e){return y.autoMarginIdRoot+e._index}function f(e,t){var r=e[y.name];var n=[];for(var a=0;a<r.length;a++){var i=r[a];if(!i.visible)continue;i._gd=t;n.push(i)}return n}function h(e){return e._index}function A(e,i){var t=g.tester.selectAll("g."+y.labelGroupClass).data(i._visibleSteps);t.enter().append("g").classed(y.labelGroupClass,true);var o=0;var s=0;t.each(function(e){var t=p.select(this);var r=M(t,{step:e},i);var n=r.node();if(n){var a=g.bBox(n);s=Math.max(s,a.height);o=Math.max(o,a.width)}});t.remove();var a=i._dims={};a.inputAreaWidth=Math.max(y.railWidth,y.gripHeight);var r=e._fullLayout._size;a.lx=r.l+r.w*i.x;a.ly=r.t+r.h*(1-i.y);if(i.lenmode==="fraction"){a.outerLength=Math.round(r.w*i.len)}else{a.outerLength=i.len}a.inputAreaStart=0;a.inputAreaLength=Math.round(a.outerLength-i.pad.l-i.pad.r);var n=a.inputAreaLength-2*y.stepInset;var l=n/(i._stepCount-1);var c=o+y.labelPadding;a.labelStride=Math.max(1,Math.ceil(c/l));a.labelHeight=s;a.currentValueMaxWidth=0;a.currentValueHeight=0;a.currentValueTotalHeight=0;a.currentValueMaxLines=1;if(i.currentvalue.visible){var u=g.tester.append("g");t.each(function(e){var t=k(u,i,e.label);var r=t.node()&&g.bBox(t.node())||{width:0,height:0};var n=_.lineCount(t);a.currentValueMaxWidth=Math.max(a.currentValueMaxWidth,Math.ceil(r.width));a.currentValueHeight=Math.max(a.currentValueHeight,Math.ceil(r.height));a.currentValueMaxLines=Math.max(a.currentValueMaxLines,n)});a.currentValueTotalHeight=a.currentValueHeight+i.currentvalue.offset;u.remove()}a.height=a.currentValueTotalHeight+y.tickOffset+i.ticklen+y.labelOffset+a.labelHeight+i.pad.t+i.pad.b;var f="left";if(m.isRightAnchor(i)){a.lx-=a.outerLength;f="right"}if(m.isCenterAnchor(i)){a.lx-=a.outerLength/2;f="center"}var d="top";if(m.isBottomAnchor(i)){a.ly-=a.height;d="bottom"}if(m.isMiddleAnchor(i)){a.ly-=a.height/2;d="middle"}a.outerLength=Math.ceil(a.outerLength);a.height=Math.ceil(a.height);a.lx=Math.round(a.lx);a.ly=Math.round(a.ly);var h={y:i.y,b:a.height*x[d],t:a.height*b[d]};if(i.lenmode==="fraction"){h.l=0;h.xl=i.x-i.len*b[f];h.r=0;h.xr=i.x+i.len*x[f]}else{h.x=i.x;h.l=a.outerLength*b[f];h.r=a.outerLength*x[f]}v.autoMargin(e,w(i),h)}function T(e,t,r){if(!(r.steps[r.active]||{}).visible){r.active=r._visibleSteps[0]._index}t.call(k,r).call(I,r).call(i,r).call(s,r).call(P,e,r).call(a,e,r);var n=r._dims;g.setTranslate(t,n.lx+r.pad.l,n.ly+r.pad.t);t.call(E,r,false);t.call(k,r)}function k(e,t,r){if(!t.currentvalue.visible)return;var n=t._dims;var a,i;switch(t.currentvalue.xanchor){case"right":a=n.inputAreaLength-y.currentValueInset-n.currentValueMaxWidth;i="left";break;case"center":a=n.inputAreaLength*.5;i="middle";break;default:a=y.currentValueInset;i="left"}var o=m.ensureSingle(e,"text",y.labelClass,function(e){e.attr({"text-anchor":i,"data-notex":1})});var s=t.currentvalue.prefix?t.currentvalue.prefix:"";if(typeof r==="string"){s+=r}else{var l=t.steps[t.active].label;var c=t._gd._fullLayout._meta;if(c)l=m.templateString(l,c);s+=l}if(t.currentvalue.suffix){s+=t.currentvalue.suffix}o.call(g.font,t.currentvalue.font).text(s).call(_.convertToTspans,t._gd);var u=_.lineCount(o);var f=(n.currentValueMaxLines+1-u)*t.currentvalue.font.size*d;_.positionText(o,a,f);return o}function a(t,r,n){var e=m.ensureSingle(t,"rect",y.gripRectClass,function(e){e.call(o,r,t,n).style("pointer-events","all")});e.attr({width:y.gripWidth,height:y.gripHeight,rx:y.gripRadius,ry:y.gripRadius}).call(l.stroke,n.bordercolor).call(l.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px")}function M(e,t,r){var n=m.ensureSingle(e,"text",y.labelClass,function(e){e.attr({"text-anchor":"middle","data-notex":1})});var a=t.step.label;var i=r._gd._fullLayout._meta;if(i)a=m.templateString(a,i);n.call(g.font,r.font).text(a).call(_.convertToTspans,r._gd);return n}function i(e,r){var t=m.ensureSingle(e,"g",y.labelsClass);var n=r._dims;var a=t.selectAll("g."+y.labelGroupClass).data(n.labelSteps);a.enter().append("g").classed(y.labelGroupClass,true);a.exit().remove();a.each(function(e){var t=p.select(this);t.call(M,e,r);g.setTranslate(t,D(r,e.fraction),y.tickOffset+r.ticklen+r.font.size*d+y.labelOffset+n.currentValueTotalHeight)})}function S(e,t,r,n,a){var i=Math.round(n*(r._stepCount-1));var o=r._visibleSteps[i]._index;if(o!==r.active){C(e,t,r,o,true,a)}}function C(t,r,e,n,a,i){var o=e.active;e.active=n;u(t.layout,y.name,e).applyUpdate("active",n);var s=e.steps[e.active];r.call(E,e,i);r.call(k,e);t.emit("plotly_sliderchange",{slider:e,step:e.steps[e.active],interaction:a,previousActive:o});if(s&&s.method&&a){if(r._nextMethod){r._nextMethod.step=s;r._nextMethod.doCallback=a;r._nextMethod.doTransition=i}else{r._nextMethod={step:s,doCallback:a,doTransition:i};r._nextMethodRaf=window.requestAnimationFrame(function(){var e=r._nextMethod.step;if(!e.method)return;if(e.execute){v.executeAPICommand(t,e.method,e.args)}r._nextMethod=null;r._nextMethodRaf=null})}}}function o(e,n,a){var i=a.node();var o=p.select(n);function s(){return a.data()[0]}e.on("mousedown",function(){var e=s();n.emit("plotly_sliderstart",{slider:e});var t=a.select("."+y.gripRectClass);p.event.stopPropagation();p.event.preventDefault();t.call(l.fill,e.activebgcolor);var r=O(e,p.mouse(i)[0]);S(n,a,e,r,true);e._dragging=true;o.on("mousemove",function(){var e=s();var t=O(e,p.mouse(i)[0]);S(n,a,e,t,false)});o.on("mouseup",function(){var e=s();e._dragging=false;t.call(l.fill,e.bgcolor);o.on("mouseup",null);o.on("mousemove",null);n.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})})})}function s(e,a){var t=e.selectAll("rect."+y.tickRectClass).data(a._visibleSteps);var i=a._dims;t.enter().append("rect").classed(y.tickRectClass,true);t.exit().remove();t.attr({width:a.tickwidth+"px","shape-rendering":"crispEdges"});t.each(function(e,t){var r=t%i.labelStride===0;var n=p.select(this);n.attr({height:r?a.ticklen:a.minorticklen}).call(l.fill,r?a.tickcolor:a.tickcolor);g.setTranslate(n,D(a,t/(a._stepCount-1))-.5*a.tickwidth,(r?y.tickOffset:y.minorTickOffset)+i.currentValueTotalHeight)})}function L(e){var t=e._dims;t.labelSteps=[];var r=e._stepCount;for(var n=0;n<r;n+=t.labelStride){t.labelSteps.push({fraction:n/(r-1),step:e._visibleSteps[n]})}}function E(e,t,r){var n=e.select("rect."+y.gripRectClass);var a=0;for(var i=0;i<t._stepCount;i++){if(t._visibleSteps[i]._index===t.active){a=i;break}}var o=D(t,a/(t._stepCount-1));if(t._invokingCommand)return;var s=n;if(r&&t.transition.duration>0){s=s.transition().duration(t.transition.duration).ease(t.transition.easing)}s.attr("transform",c(o-y.gripWidth*.5,t._dims.currentValueTotalHeight))}function D(e,t){var r=e._dims;return r.inputAreaStart+y.stepInset+(r.inputAreaLength-2*y.stepInset)*Math.min(1,Math.max(0,t))}function O(e,t){var r=e._dims;return Math.min(1,Math.max(0,(t-y.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*y.stepInset-2*r.inputAreaStart)))}function P(t,r,n){var e=n._dims;var a=m.ensureSingle(t,"rect",y.railTouchRectClass,function(e){e.call(o,r,t,n).style("pointer-events","all")});a.attr({width:e.inputAreaLength,height:Math.max(e.inputAreaWidth,y.tickOffset+n.ticklen+e.labelHeight)}).call(l.fill,n.bgcolor).attr("opacity",0);g.setTranslate(a,0,e.currentValueTotalHeight)}function I(e,t){var r=t._dims;var n=r.inputAreaLength-y.railInset*2;var a=m.ensureSingle(e,"rect",y.railRectClass);a.attr({width:n,height:y.railWidth,rx:y.railRadius,ry:y.railRadius,"shape-rendering":"crispEdges"}).call(l.stroke,t.bordercolor).call(l.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px");g.setTranslate(a,y.railInset,(r.inputAreaWidth-y.railWidth)*.5+r.currentValueTotalHeight)}},{"../../constants/alignment":205,"../../lib":230,"../../lib/svg_text_utils":252,"../../plot_api/plot_template":265,"../../plots/plots":311,"../color":100,"../drawing":122,"./constants":194,"@plotly/d3":11}],197:[function(e,t,r){"use strict";var n=e("./constants");t.exports={moduleType:"component",name:n.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":193,"./constants":194,"./defaults":195,"./draw":196}],198:[function(e,t,r){"use strict";var C=e("@plotly/d3");var L=e("fast-isnumeric");var E=e("../../plots/plots");var D=e("../../registry");var O=e("../../lib");var P=O.strTranslate;var I=e("../drawing");var R=e("../color");var z=e("../../lib/svg_text_utils");var N=e("../../constants/interactions");var F=e("../../constants/alignment").OPPOSITE_SIDE;var j=/ [XY][0-9]* /;function n(r,e,t){var n=t.propContainer;var a=t.propName;var i=t.placeholder;var o=t.traceIndex;var d=t.avoid||{};var s=t.attributes;var l=t.transform;var c=t.containerGroup;var h=r._fullLayout;var u=1;var f=false;var p=n.title;var v=(p&&p.text?p.text:"").trim();var g=p&&p.font?p.font:{};var m=g.family;var _=g.size;var y=g.color;var b;if(a==="title.text")b="titleText";else if(a.indexOf("axis")!==-1)b="axisTitleText";else if(a.indexOf("colorbar"!==-1))b="colorbarTitleText";var x=r._context.edits[b];if(v==="")u=0;else if(v.replace(j," % ")===i.replace(j," % ")){u=.2;f=true;if(!x)v=""}if(t._meta){v=O.templateString(v,t._meta)}else if(h._meta){v=O.templateString(v,h._meta)}var w=v||x;if(!c){c=O.ensureSingle(h._infolayer,"g","g-"+e)}var A=c.selectAll("text").data(w?[0]:[]);A.enter().append("text");A.text(v).attr("class",e);A.exit().remove();if(!w)return c;function T(e){O.syncOrAsync([k,M],e)}function k(e){var t;if(l){t="";if(l.rotate){t+="rotate("+[l.rotate,s.x,s.y]+")"}if(l.offset){t+=P(0,l.offset)}}else{t=null}e.attr("transform",t);e.style({"font-family":m,"font-size":C.round(_,2)+"px",fill:R.rgb(y),opacity:u*R.opacity(y),"font-weight":E.fontWeight}).attr(s).call(z.convertToTspans,r);return E.previousPromises(r)}function M(e){var t=C.select(e.node().parentNode);if(d&&d.selection&&d.side&&v){t.attr("transform",null);var r=F[d.side];var n=d.side==="left"||d.side==="top"?-1:1;var a=L(d.pad)?d.pad:2;var i=I.bBox(t.node());var o={left:0,top:0,right:h.width,bottom:h.height};var s=d.maxShift||n*(o[d.side]-i[d.side]);var l=0;if(s<0){l=s}else{var c=d.offsetLeft||0;var u=d.offsetTop||0;i.left-=c;i.right-=c;i.top-=u;i.bottom-=u;d.selection.each(function(){var e=I.bBox(this);if(O.bBoxIntersect(i,e,a)){l=Math.max(l,n*(e[d.side]-i[r])+a)}});l=Math.min(s,l)}if(l>0||s<0){var f={left:[-l,0],right:[l,0],top:[0,-l],bottom:[0,l]}[d.side];t.attr("transform",P(f[0],f[1]))}}}A.call(T);function S(){u=0;f=true;A.text(i).on("mouseover.opacity",function(){C.select(this).transition().duration(N.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){C.select(this).transition().duration(N.HIDE_PLACEHOLDER).style("opacity",0)})}if(x){if(!v)S();else A.on(".opacity",null);A.call(z.makeEditable,{gd:r}).on("edit",function(e){if(o!==undefined){D.call("_guiRestyle",r,a,e,o)}else{D.call("_guiRelayout",r,a,e)}}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(T)}).on("input",function(e){this.text(e||" ").call(z.positionText,s.x,s.y)})}A.classed("js-placeholder",f);return c}t.exports={draw:n}},{"../../constants/alignment":205,"../../constants/interactions":209,"../../lib":230,"../../lib/svg_text_utils":252,"../../plots/plots":311,"../../registry":313,"../color":100,"../drawing":122,"@plotly/d3":11,"fast-isnumeric":15}],199:[function(e,t,r){"use strict";var n=e("../../plots/font_attributes");var a=e("../color/attributes");var i=e("../../lib/extend").extendFlat;var o=e("../../plot_api/edit_types").overrideAll;var s=e("../../plots/pad_attributes");var l=e("../../plot_api/plot_template").templatedArray;var c=l("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:true,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:true,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:true}});t.exports=o(l("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:true},buttons:c,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:i(s({editType:"arraydraw"}),{}),font:n({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:a.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":224,"../../plot_api/edit_types":258,"../../plot_api/plot_template":265,"../../plots/font_attributes":305,"../../plots/pad_attributes":310,"../color/attributes":99}],200:[function(e,t,r){"use strict";t.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},{}],201:[function(e,t,r){"use strict";var o=e("../../lib");var s=e("../../plots/array_container_defaults");var l=e("./attributes");var n=e("./constants");var a=n.name;var i=l.buttons;t.exports=function e(t,r){var n={name:a,handleItemDefaults:c};s(t,r,n)};function c(r,n,e){function t(e,t){return o.coerce(r,n,l,e,t)}var a=s(r,n,{name:"buttons",handleItemDefaults:u});var i=t("visible",a.length>0);if(!i)return;t("active");t("direction");t("type");t("showactive");t("x");t("y");o.noneOrAll(r,n,["x","y"]);t("xanchor");t("yanchor");t("pad.t");t("pad.r");t("pad.b");t("pad.l");o.coerceFont(t,"font",e.font);t("bgcolor",e.paper_bgcolor);t("bordercolor");t("borderwidth")}function u(r,n){function e(e,t){return o.coerce(r,n,i,e,t)}var t=e("visible",r.method==="skip"||Array.isArray(r.args));if(t){e("method");e("args");e("args2");e("label");e("execute")}}},{"../../lib":230,"../../plots/array_container_defaults":271,"./attributes":199,"./constants":200}],202:[function(e,t,r){"use strict";var g=e("@plotly/d3");var m=e("../../plots/plots");var i=e("../color");var p=e("../drawing");var _=e("../../lib");var v=e("../../lib/svg_text_utils");var l=e("../../plot_api/plot_template").arrayEditor;var y=e("../../constants/alignment").LINE_SPACING;var b=e("./constants");var d=e("./scrollbox");t.exports=function e(a){var t=a._fullLayout;var r=_.filterVisible(t[b.name]);function n(e){m.autoMargin(a,P(e))}var i=t._menulayer.selectAll("g."+b.containerClassName).data(r.length>0?[0]:[]);i.enter().append("g").classed(b.containerClassName,true).style("cursor","pointer");i.exit().each(function(){g.select(this).selectAll("g."+b.headerGroupClassName).each(n)}).remove();if(r.length===0)return;var o=i.selectAll("g."+b.headerGroupClassName).data(r,h);o.enter().append("g").classed(b.headerGroupClassName,true);var s=_.ensureSingle(i,"g",b.dropdownButtonGroupClassName,function(e){e.style("pointer-events","all")});for(var l=0;l<r.length;l++){var c=r[l];O(a,c)}var u="updatemenus"+t._uid;var f=new d(a,s,u);if(o.enter().size()){s.node().parentNode.appendChild(s.node());s.call(R)}o.exit().each(function(e){s.call(R);n(e)}).remove();o.each(function(t){var r=g.select(this);var n=t.type==="dropdown"?s:null;m.manageCommandObserver(a,t,t.buttons,function(e){A(a,t,t.buttons[e.index],r,n,f,e.index,true)});if(t.type==="dropdown"){T(a,r,s,f,t);if(w(s,t)){k(a,r,s,f,t)}}else{k(a,r,null,null,t)}})};function h(e){return e._index}function x(e){return+e.attr(b.menuIndexAttrName)===-1}function w(e,t){return+e.attr(b.menuIndexAttrName)===t._index}function A(e,t,r,n,a,i,o,s){t.active=o;l(e.layout,b.name,t).applyUpdate("active",o);if(t.type==="buttons"){k(e,n,null,null,t)}else if(t.type==="dropdown"){a.attr(b.menuIndexAttrName,"-1");T(e,n,a,i,t);if(!s){k(e,n,a,i,t)}}}function T(e,t,r,n,a){var i=_.ensureSingle(t,"g",b.headerClassName,function(e){e.style("pointer-events","all")});var o=a._dims;var s=a.active;var l=a.buttons[s]||b.blankHeaderOpts;var c={y:a.pad.t,yPad:0,x:a.pad.l,xPad:0,index:0};var u={width:o.headerWidth,height:o.headerHeight};i.call(C,a,l,e).call(I,a,c,u);var f=_.ensureSingle(t,"text",b.headerArrowClassName,function(e){e.attr("text-anchor","end").call(p.font,a.font).text(b.arrowSymbol[a.direction])});f.attr({x:o.headerWidth-b.arrowOffsetX+a.pad.l,y:o.headerHeight/2+b.textOffsetY+a.pad.t});i.on("click",function(){r.call(R,String(w(r,a)?-1:a._index));k(e,t,r,n,a)});i.on("mouseover",function(){i.call(E)});i.on("mouseout",function(){i.call(D,a)});p.setTranslate(t,o.lx,o.ly)}function k(n,a,i,o,s){if(!i){i=a;i.attr("pointer-events","all")}var e=!x(i)||s.type==="buttons"?s.buttons:[];var t=s.type==="dropdown"?b.dropdownButtonClassName:b.buttonClassName;var l=i.selectAll("g."+t).data(_.filterVisible(e));var r=l.enter().append("g").classed(t,true);var c=l.exit();if(s.type==="dropdown"){r.attr("opacity","0").transition().attr("opacity","1");c.transition().attr("opacity","0").remove()}else{c.remove()}var u=0;var f=0;var d=s._dims;var h=["up","down"].indexOf(s.direction)!==-1;if(s.type==="dropdown"){if(h){f=d.headerHeight+b.gapButtonHeader}else{u=d.headerWidth+b.gapButtonHeader}}if(s.type==="dropdown"&&s.direction==="up"){f=-b.gapButtonHeader+b.gapButton-d.openHeight}if(s.type==="dropdown"&&s.direction==="left"){u=-b.gapButtonHeader+b.gapButton-d.openWidth}var p={x:d.lx+u+s.pad.l,y:d.ly+f+s.pad.t,yPad:b.gapButton,xPad:b.gapButton,index:0};var v={l:p.x+s.borderwidth,t:p.y+s.borderwidth};l.each(function(e,t){var r=g.select(this);r.call(C,s,e,n).call(I,s,p);r.on("click",function(){if(g.event.defaultPrevented)return;if(e.execute){if(e.args2&&s.active===t){A(n,s,e,a,i,o,-1);m.executeAPICommand(n,e.method,e.args2)}else{A(n,s,e,a,i,o,t);m.executeAPICommand(n,e.method,e.args)}}n.emit("plotly_buttonclicked",{menu:s,button:e,active:s.active})});r.on("mouseover",function(){r.call(E)});r.on("mouseout",function(){r.call(D,s);l.call(L,s)})});l.call(L,s);if(h){v.w=Math.max(d.openWidth,d.headerWidth);v.h=p.y-v.t}else{v.w=p.x-v.l;v.h=Math.max(d.openHeight,d.headerHeight)}v.direction=s.direction;if(o){if(l.size()){M(n,a,i,o,s,v)}else{S(o)}}}function M(e,t,r,n,a,i){var o=a.direction;var s=o==="up"||o==="down";var l=a._dims;var c=a.active;var u,f;var d;if(s){f=0;for(d=0;d<c;d++){f+=l.heights[d]+b.gapButton}}else{u=0;for(d=0;d<c;d++){u+=l.widths[d]+b.gapButton}}n.enable(i,u,f);if(n.hbar){n.hbar.attr("opacity","0").transition().attr("opacity","1")}if(n.vbar){n.vbar.attr("opacity","0").transition().attr("opacity","1")}}function S(e){var t=!!e.hbar;var r=!!e.vbar;if(t){e.hbar.transition().attr("opacity","0").each("end",function(){t=false;if(!r)e.disable()})}if(r){e.vbar.transition().attr("opacity","0").each("end",function(){r=false;if(!t)e.disable()})}}function C(e,t,r,n){e.call(a,t).call(o,t,r,n)}function a(e,t){var r=_.ensureSingle(e,"rect",b.itemRectClassName,function(e){e.attr({rx:b.rx,ry:b.ry,"shape-rendering":"crispEdges"})});r.call(i.stroke,t.bordercolor).call(i.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function o(e,t,r,n){var a=_.ensureSingle(e,"text",b.itemTextClassName,function(e){e.attr({"text-anchor":"start","data-notex":1})});var i=r.label;var o=n._fullLayout._meta;if(o)i=_.templateString(i,o);a.call(p.font,t.font).text(i).call(v.convertToTspans,n)}function L(e,n){var a=n.active;e.each(function(e,t){var r=g.select(this);if(t===a&&n.showactive){r.select("rect."+b.itemRectClassName).call(i.fill,b.activeColor)}})}function E(e){e.select("rect."+b.itemRectClassName).call(i.fill,b.hoverColor)}function D(e,t){e.select("rect."+b.itemRectClassName).call(i.fill,t.bgcolor)}function O(c,u){var f=u._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0};var e=p.tester.selectAll("g."+b.dropdownButtonClassName).data(_.filterVisible(u.buttons));e.enter().append("g").classed(b.dropdownButtonClassName,true);var d=["up","down"].indexOf(u.direction)!==-1;e.each(function(e,t){var r=g.select(this);r.call(C,u,e,c);var n=r.select("."+b.itemTextClassName);var a=n.node()&&p.bBox(n.node()).width;var i=Math.max(a+b.textPadX,b.minWidth);var o=u.font.size*y;var s=v.lineCount(n);var l=Math.max(o*s,b.minHeight)+b.textOffsetY;l=Math.ceil(l);i=Math.ceil(i);f.widths[t]=i;f.heights[t]=l;f.height1=Math.max(f.height1,l);f.width1=Math.max(f.width1,i);if(d){f.totalWidth=Math.max(f.totalWidth,i);f.openWidth=f.totalWidth;f.totalHeight+=l+b.gapButton;f.openHeight+=l+b.gapButton}else{f.totalWidth+=i+b.gapButton;f.openWidth+=i+b.gapButton;f.totalHeight=Math.max(f.totalHeight,l);f.openHeight=f.totalHeight}});if(d){f.totalHeight-=b.gapButton}else{f.totalWidth-=b.gapButton}f.headerWidth=f.width1+b.arrowPadX;f.headerHeight=f.height1;if(u.type==="dropdown"){if(d){f.width1+=b.arrowPadX;f.totalHeight=f.height1}else{f.totalWidth=f.width1}f.totalWidth+=b.arrowPadX}e.remove();var t=f.totalWidth+u.pad.l+u.pad.r;var r=f.totalHeight+u.pad.t+u.pad.b;var n=c._fullLayout._size;f.lx=n.l+n.w*u.x;f.ly=n.t+n.h*(1-u.y);var a="left";if(_.isRightAnchor(u)){f.lx-=t;a="right"}if(_.isCenterAnchor(u)){f.lx-=t/2;a="center"}var i="top";if(_.isBottomAnchor(u)){f.ly-=r;i="bottom"}if(_.isMiddleAnchor(u)){f.ly-=r/2;i="middle"}f.totalWidth=Math.ceil(f.totalWidth);f.totalHeight=Math.ceil(f.totalHeight);f.lx=Math.round(f.lx);f.ly=Math.round(f.ly);m.autoMargin(c,P(u),{x:u.x,y:u.y,l:t*({right:1,center:.5}[a]||0),r:t*({left:1,center:.5}[a]||0),b:r*({top:1,middle:.5}[i]||0),t:r*({bottom:1,middle:.5}[i]||0)})}function P(e){return b.autoMarginIdRoot+e._index}function I(e,t,r,n){n=n||{};var a=e.select("."+b.itemRectClassName);var i=e.select("."+b.itemTextClassName);var o=t.borderwidth;var s=r.index;var l=t._dims;p.setTranslate(e,o+r.x,o+r.y);var c=["up","down"].indexOf(t.direction)!==-1;var u=n.height||(c?l.heights[s]:l.height1);a.attr({x:0,y:0,width:n.width||(c?l.width1:l.widths[s]),height:u});var f=t.font.size*y;var d=v.lineCount(i);var h=(d-1)*f/2;v.positionText(i,b.textOffsetX,u/2-h+b.textOffsetY);if(c){r.y+=l.heights[s]+r.yPad}else{r.x+=l.widths[s]+r.xPad}r.index++}function R(e,t){e.attr(b.menuIndexAttrName,t||"-1").selectAll("g."+b.dropdownButtonClassName).remove()}},{"../../constants/alignment":205,"../../lib":230,"../../lib/svg_text_utils":252,"../../plot_api/plot_template":265,"../../plots/plots":311,"../color":100,"../drawing":122,"./constants":200,"./scrollbox":204,"@plotly/d3":11}],203:[function(e,t,r){arguments[4][197][0].apply(r,arguments)},{"./attributes":199,"./constants":200,"./defaults":201,"./draw":202,dup:197}],204:[function(e,t,r){"use strict";t.exports=G;var V=e("@plotly/d3");var q=e("../color");var Y=e("../drawing");var h=e("../../lib");function G(e,t,r){this.gd=e;this.container=t;this.id=r;this.position=null;this.translateX=null;this.translateY=null;this.hbar=null;this.vbar=null;this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]);this.bg.exit().on(".drag",null).on("wheel",null).remove();this.bg.enter().append("rect").classed("scrollbox-bg",true).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}G.barWidth=2;G.barLength=20;G.barRadius=2;G.barPad=1;G.barColor="#808BA4";G.prototype.enable=function e(t,r,n){var a=this.gd._fullLayout;var i=a.width;var o=a.height;this.position=t;var s=this.position.l;var l=this.position.w;var c=this.position.t;var u=this.position.h;var f=this.position.direction;var d=f==="down";var h=f==="left";var p=f==="right";var v=f==="up";var g=l;var m=u;var _,y;var b,x;if(!d&&!h&&!p&&!v){this.position.direction="down";d=true}var w=d||v;if(w){_=s;y=_+g;if(d){b=c;x=Math.min(b+m,o);m=x-b}else{x=c+m;b=Math.max(x-m,0);m=x-b}}else{b=c;x=b+m;if(h){y=s+g;_=Math.max(y-g,0);g=y-_}else{_=s;y=Math.min(_+g,i);g=y-_}}this._box={l:_,t:b,w:g,h:m};var A=l>g;var T=G.barLength+2*G.barPad;var k=G.barWidth+2*G.barPad;var M=s;var S=c+u;if(S+k>o)S=o-k;var C=this.container.selectAll("rect.scrollbar-horizontal").data(A?[0]:[]);C.exit().on(".drag",null).remove();C.enter().append("rect").classed("scrollbar-horizontal",true).call(q.fill,G.barColor);if(A){this.hbar=C.attr({rx:G.barRadius,ry:G.barRadius,x:M,y:S,width:T,height:k});this._hbarXMin=M+T/2;this._hbarTranslateMax=g-T}else{delete this.hbar;delete this._hbarXMin;delete this._hbarTranslateMax}var L=u>m;var E=G.barWidth+2*G.barPad;var D=G.barLength+2*G.barPad;var O=s+l;var P=c;if(O+E>i)O=i-E;var I=this.container.selectAll("rect.scrollbar-vertical").data(L?[0]:[]);I.exit().on(".drag",null).remove();I.enter().append("rect").classed("scrollbar-vertical",true).call(q.fill,G.barColor);if(L){this.vbar=I.attr({rx:G.barRadius,ry:G.barRadius,x:O,y:P,width:E,height:D});this._vbarYMin=P+D/2;this._vbarTranslateMax=m-D}else{delete this.vbar;delete this._vbarYMin;delete this._vbarTranslateMax}var R=this.id;var z=_-.5;var N=L?y+E+.5:y+.5;var F=b-.5;var j=A?x+k+.5:x+.5;var B=a._topdefs.selectAll("#"+R).data(A||L?[0]:[]);B.exit().remove();B.enter().append("clipPath").attr("id",R).append("rect");if(A||L){this._clipRect=B.select("rect").attr({x:Math.floor(z),y:Math.floor(F),width:Math.ceil(N)-Math.floor(z),height:Math.ceil(j)-Math.floor(F)});this.container.call(Y.setClipUrl,R,this.gd);this.bg.attr({x:s,y:c,width:l,height:u})}else{this.bg.attr({width:0,height:0});this.container.on("wheel",null).on(".drag",null).call(Y.setClipUrl,null);delete this._clipRect}if(A||L){var H=V.behavior.drag().on("dragstart",function(){V.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(H);var U=V.behavior.drag().on("dragstart",function(){V.event.sourceEvent.preventDefault();V.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));if(A){this.hbar.on(".drag",null).call(U)}if(L){this.vbar.on(".drag",null).call(U)}}this.setTranslate(r,n)};G.prototype.disable=function e(){if(this.hbar||this.vbar){this.bg.attr({width:0,height:0});this.container.on("wheel",null).on(".drag",null).call(Y.setClipUrl,null);delete this._clipRect}if(this.hbar){this.hbar.on(".drag",null);this.hbar.remove();delete this.hbar;delete this._hbarXMin;delete this._hbarTranslateMax}if(this.vbar){this.vbar.on(".drag",null);this.vbar.remove();delete this.vbar;delete this._vbarYMin;delete this._vbarTranslateMax}};G.prototype._onBoxDrag=function e(){var t=this.translateX;var r=this.translateY;if(this.hbar){t-=V.event.dx}if(this.vbar){r-=V.event.dy}this.setTranslate(t,r)};G.prototype._onBoxWheel=function e(){var t=this.translateX;var r=this.translateY;if(this.hbar){t+=V.event.deltaY}if(this.vbar){r+=V.event.deltaY}this.setTranslate(t,r)};G.prototype._onBarDrag=function e(){var t=this.translateX;var r=this.translateY;if(this.hbar){var n=t+this._hbarXMin;var a=n+this._hbarTranslateMax;var i=h.constrain(V.event.x,n,a);var o=(i-n)/(a-n);var s=this.position.w-this._box.w;t=o*s}if(this.vbar){var l=r+this._vbarYMin;var c=l+this._vbarTranslateMax;var u=h.constrain(V.event.y,l,c);var f=(u-l)/(c-l);var d=this.position.h-this._box.h;r=f*d}this.setTranslate(t,r)};G.prototype.setTranslate=function e(t,r){var n=this.position.w-this._box.w;var a=this.position.h-this._box.h;t=h.constrain(t||0,0,n);r=h.constrain(r||0,0,a);this.translateX=t;this.translateY=r;this.container.call(Y.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-r);if(this._clipRect){this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+r-.5)})}if(this.hbar){var i=t/n;this.hbar.call(Y.setTranslate,t+i*this._hbarTranslateMax,r)}if(this.vbar){var o=r/a;this.vbar.call(Y.setTranslate,t,r+o*this._vbarTranslateMax)}}},{"../../lib":230,"../color":100,"../drawing":122,"@plotly/d3":11}],205:[function(e,t,r){"use strict";t.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],206:[function(e,t,r){"use strict";t.exports={axisRefDescription:function(e,t,r){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+r+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",r,"of the domain of the","second",e,"axis."].join(" ")}}},{}],207:[function(e,t,r){"use strict";t.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format#locale_format"}},{}],208:[function(e,t,r){"use strict";t.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],209:[function(e,t,r){"use strict";t.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],210:[function(e,t,r){"use strict";t.exports={BADNUM:undefined,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:""}},{}],211:[function(e,t,r){"use strict";r.xmlns="http://www.w3.org/2000/xmlns/";r.svg="http://www.w3.org/2000/svg";r.xlink="http://www.w3.org/1999/xlink";r.svgAttrs={xmlns:r.svg,"xmlns:xlink":r.xlink}},{}],212:[function(e,t,r){"use strict";r.version=e("./version").version;e("native-promise-only");e("../build/plotcss");var n=e("./registry");var a=r.register=n.register;var i=e("./plot_api");var o=Object.keys(i);for(var s=0;s<o.length;s++){var l=o[s];if(l.charAt(0)!=="_")r[l]=i[l];a({moduleType:"apiMethod",name:l,fn:i[l]})}a(e("./traces/scatter"));a([e("./components/legend"),e("./components/fx"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars"),e("./components/colorscale"),e("./components/colorbar"),e("./components/modebar")]);a([e("./locale-en"),e("./locale-en-us")]);if(window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)){a(window.PlotlyLocales);delete window.PlotlyLocales}r.Icons=e("./fonts/ploticon");var c=e("./components/fx");var u=e("./plots/plots");r.Plots={resize:u.resize,graphJson:u.graphJson,sendDataToCloud:u.sendDataToCloud};r.Fx={hover:c.hover,unhover:c.unhover,loneHover:c.loneHover,loneUnhover:c.loneUnhover};r.Snapshot=e("./snapshot");r.PlotSchema=e("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":91,"./components/annotations3d":96,"./components/colorbar":106,"./components/colorscale":112,"./components/errorbars":128,"./components/fx":140,"./components/grid":144,"./components/images":149,"./components/legend":157,"./components/modebar":163,"./components/rangeselector":171,"./components/rangeslider":178,"./components/shapes":192,"./components/sliders":197,"./components/updatemenus":203,"./fonts/ploticon":213,"./locale-en":256,"./locale-en-us":255,"./plot_api":260,"./plot_api/plot_schema":264,"./plots/plots":311,"./registry":313,"./snapshot":318,"./traces/scatter":365,"./version":386,"native-promise-only":52}],213:[function(e,t,r){"use strict";t.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],214:[function(e,t,r){"use strict";r.isLeftAnchor=function e(t){return t.xanchor==="left"||t.xanchor==="auto"&&t.x<=1/3};r.isCenterAnchor=function e(t){return t.xanchor==="center"||t.xanchor==="auto"&&t.x>1/3&&t.x<2/3};r.isRightAnchor=function e(t){return t.xanchor==="right"||t.xanchor==="auto"&&t.x>=2/3};r.isTopAnchor=function e(t){return t.yanchor==="top"||t.yanchor==="auto"&&t.y>=2/3};r.isMiddleAnchor=function e(t){return t.yanchor==="middle"||t.yanchor==="auto"&&t.y>1/3&&t.y<2/3};r.isBottomAnchor=function e(t){return t.yanchor==="bottom"||t.yanchor==="auto"&&t.y<=1/3}},{}],215:[function(e,t,r){"use strict";var n=e("./mod");var o=n.mod;var a=n.modHalf;var m=Math.PI;var _=2*m;function i(e){return e/180*m}function s(e){return e/m*180}function y(e){return Math.abs(e[1]-e[0])>_-1e-14}function l(e,t){return a(t-e,_)}function c(e,t){return Math.abs(l(e,t))}function u(e,t){if(y(t))return true;var r,n;if(t[0]<t[1]){r=t[0];n=t[1]}else{r=t[1];n=t[0]}r=o(r,_);n=o(n,_);if(r>n)n+=_;var a=o(e,_);var i=a+_;return a>=r&&a<=n||i>=r&&i<=n}function f(e,t,r,n){if(!u(t,n))return false;var a,i;if(r[0]<r[1]){a=r[0];i=r[1]}else{a=r[1];i=r[0]}return e>=a&&e<=i}function d(e,t,r,n,a,i,o){a=a||0;i=i||0;var s=y([r,n]);var l,c,u;var f,d;if(s){l=0;c=m;u=_}else{if(r<n){l=r;u=n}else{l=n;u=r}}if(e<t){f=e;d=t}else{f=t;d=e}function h(e,t){return[e*Math.cos(t)+a,i-e*Math.sin(t)]}var p=Math.abs(u-l)<=m?0:1;function v(e,t,r){return"A"+[e,e]+" "+[0,p,r]+" "+h(e,t)}var g;if(s){if(f===null){g="M"+h(d,l)+v(d,c,0)+v(d,u,0)+"Z"}else{g="M"+h(f,l)+v(f,c,0)+v(f,u,0)+"Z"+"M"+h(d,l)+v(d,c,1)+v(d,u,1)+"Z"}}else{if(f===null){g="M"+h(d,l)+v(d,u,0);if(o)g+="L0,0Z"}else{g="M"+h(f,l)+"L"+h(d,l)+v(d,u,0)+"L"+h(f,u)+v(f,l,1)+"Z"}}return g}function h(e,t,r,n,a){return d(null,e,t,r,n,a,0)}function p(e,t,r,n,a){return d(null,e,t,r,n,a,1)}function v(e,t,r,n,a,i){return d(e,t,r,n,a,i,1)}t.exports={deg2rad:i,rad2deg:s,angleDelta:l,angleDist:c,isFullCircle:y,isAngleInsideSector:u,isPtInsideSector:f,pathArc:h,pathSector:p,pathAnnulus:v}},{"./mod":237}],216:[function(e,t,r){"use strict";var f=Array.isArray;var n=ArrayBuffer;var a=DataView;function i(e){return n.isView(e)&&!(e instanceof a)}r.isTypedArray=i;function o(e){return f(e)||i(e)}r.isArrayOrTypedArray=o;function s(e){return!o(e[0])}r.isArray1D=s;r.ensureArray=function(e,t){if(!f(e))e=[];e.length=t;return e};r.concat=function(){var e=[];var t=true;var r=0;var n,a,i,o,s,l,c,u;for(i=0;i<arguments.length;i++){o=arguments[i];l=o.length;if(l){if(a)e.push(o);else{a=o;s=l}if(f(o)){n=false}else{t=false;if(!r){n=o.constructor}else if(n!==o.constructor){n=false}}r+=l}}if(!r)return[];if(!e.length)return a;if(t)return a.concat.apply(a,e);if(n){c=new n(r);c.set(a);for(i=0;i<e.length;i++){o=e[i];c.set(o,s);s+=o.length}return c}c=new Array(r);for(u=0;u<a.length;u++)c[u]=a[u];for(i=0;i<e.length;i++){o=e[i];for(u=0;u<o.length;u++)c[s+u]=o[u];s+=u}return c};r.maxRowLength=function(e){return l(e,Math.max,0)};r.minRowLength=function(e){return l(e,Math.min,Infinity)};function l(e,t,r){if(o(e)){if(o(e[0])){var n=r;for(var a=0;a<e.length;a++){n=t(n,e[a].length)}return n}else{return e.length}}return 0}},{}],217:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../constants/numerical").BADNUM;var i=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;t.exports=function e(t){if(typeof t==="string"){t=t.replace(i,"")}if(n(t))return Number(t);return a}},{"../constants/numerical":210,"fast-isnumeric":15}],218:[function(e,t,r){"use strict";t.exports=function e(t){var r=t._fullLayout;if(r._glcanvas&&r._glcanvas.size()){r._glcanvas.each(function(e){if(e.regl)e.regl.clear({color:true,depth:true})})}}},{}],219:[function(e,t,r){"use strict";t.exports=function e(t){if(t._responsiveChartHandler){window.removeEventListener("resize",t._responsiveChartHandler);delete t._responsiveChartHandler}}},{}],220:[function(e,t,_){"use strict";var a=e("fast-isnumeric");var i=e("tinycolor2");var l=e("../plots/attributes");var n=e("../components/colorscale/scales");var c=e("../components/color");var o=e("../constants/interactions").DESELECTDIM;var d=e("./nested_property");var s=e("./regex").counter;var u=e("./mod").modHalf;var h=e("./array").isArrayOrTypedArray;_.valObjectMeta={data_array:{coerceFunction:function(e,t,r){if(h(e))t.set(e);else if(r!==undefined)t.set(r)}},enumerated:{coerceFunction:function(e,t,r,n){if(n.coerceNumber)e=+e;if(n.values.indexOf(e)===-1)t.set(r);else t.set(e)},validateFunction:function(e,t){if(t.coerceNumber)e=+e;var r=t.values;for(var n=0;n<r.length;n++){var a=String(r[n]);if(a.charAt(0)==="/"&&a.charAt(a.length-1)==="/"){var i=new RegExp(a.substr(1,a.length-2));if(i.test(e))return true}else if(e===r[n])return true}return false}},boolean:{coerceFunction:function(e,t,r){if(e===true||e===false)t.set(e);else t.set(r)}},number:{coerceFunction:function(e,t,r,n){if(!a(e)||n.min!==undefined&&e<n.min||n.max!==undefined&&e>n.max){t.set(r)}else t.set(+e)}},integer:{coerceFunction:function(e,t,r,n){if(e%1||!a(e)||n.min!==undefined&&e<n.min||n.max!==undefined&&e>n.max){t.set(r)}else t.set(+e)}},string:{coerceFunction:function(e,t,r,n){if(typeof e!=="string"){var a=typeof e==="number";if(n.strict===true||!a)t.set(r);else t.set(String(e))}else if(n.noBlank&&!e)t.set(r);else t.set(e)}},color:{coerceFunction:function(e,t,r){if(i(e).isValid())t.set(e);else t.set(r)}},colorlist:{coerceFunction:function(e,t,r){function n(e){return i(e).isValid()}if(!Array.isArray(e)||!e.length)t.set(r);else if(e.every(n))t.set(e);else t.set(r)}},colorscale:{coerceFunction:function(e,t,r){t.set(n.get(e,r))}},angle:{coerceFunction:function(e,t,r){if(e==="auto")t.set("auto");else if(!a(e))t.set(r);else t.set(u(+e,360))}},subplotid:{coerceFunction:function(e,t,r,n){var a=n.regex||s(r);if(typeof e==="string"&&a.test(e)){t.set(e);return}t.set(r)},validateFunction:function(e,t){var r=t.dflt;if(e===r)return true;if(typeof e!=="string")return false;if(s(r).test(e))return true;return false}},flaglist:{coerceFunction:function(e,t,r,n){if(typeof e!=="string"){t.set(r);return}if((n.extras||[]).indexOf(e)!==-1){t.set(e);return}var a=e.split("+");var i=0;while(i<a.length){var o=a[i];if(n.flags.indexOf(o)===-1||a.indexOf(o)<i){a.splice(i,1)}else i++}if(!a.length)t.set(r);else t.set(a.join("+"))}},any:{coerceFunction:function(e,t,r){if(e===undefined)t.set(r);else t.set(e)}},info_array:{coerceFunction:function(e,t,r,n){function a(e,t,r){var n;var a={set:function(e){n=e}};if(r===undefined)r=t.dflt;_.valObjectMeta[t.valType].coerceFunction(e,a,r,t);return n}var i=n.dimensions===2||n.dimensions==="1-2"&&Array.isArray(e)&&Array.isArray(e[0]);if(!Array.isArray(e)){t.set(r);return}var o=n.items;var s=[];var l=Array.isArray(o);var c=l&&i&&Array.isArray(o[0]);var u=i&&l&&!c;var f=l&&!u?o.length:e.length;var d,h,p,v,g,m;r=Array.isArray(r)?r:[];if(i){for(d=0;d<f;d++){s[d]=[];p=Array.isArray(e[d])?e[d]:[];if(u)g=o.length;else if(l)g=o[d].length;else g=p.length;for(h=0;h<g;h++){if(u)v=o[h];else if(l)v=o[d][h];else v=o;m=a(p[h],v,(r[d]||[])[h]);if(m!==undefined)s[d][h]=m}}}else{for(d=0;d<f;d++){m=a(e[d],l?o[d]:o,r[d]);if(m!==undefined)s[d]=m}}t.set(s)},validateFunction:function(e,t){if(!Array.isArray(e))return false;var r=t.items;var n=Array.isArray(r);var a=t.dimensions===2;if(!t.freeLength&&e.length!==r.length)return false;for(var i=0;i<e.length;i++){if(a){if(!Array.isArray(e[i])||!t.freeLength&&e[i].length!==r[i].length){return false}for(var o=0;o<e[i].length;o++){if(!p(e[i][o],n?r[i][o]:r)){return false}}}else if(!p(e[i],n?r[i]:r))return false}return true}}};_.coerce=function(e,t,r,n,a){var i=d(r,n).get();var o=d(e,n);var s=d(t,n);var l=o.get();var c=t._template;if(l===undefined&&c){l=d(c,n).get();c=0}if(a===undefined)a=i.dflt;if(i.arrayOk&&h(l)){s.set(l);return l}var u=_.valObjectMeta[i.valType].coerceFunction;u(l,s,a,i);var f=s.get();if(c&&f===a&&!p(l,i)){l=d(c,n).get();u(l,s,a,i);f=s.get()}return f};_.coerce2=function(e,t,r,n,a){var i=d(e,n);var o=_.coerce(e,t,r,n,a);var s=i.get();return s!==undefined&&s!==null?o:false};_.coerceFont=function(e,t,r){var n={};r=r||{};n.family=e(t+".family",r.family);n.size=e(t+".size",r.size);n.color=e(t+".color",r.color);return n};_.coercePattern=function(e,t,r,n){var a=e(t+".shape");if(a){e(t+".solidity");e(t+".size");var i=e(t+".fillmode");var o=i==="overlay";if(!n){var s=e(t+".bgcolor",o?r:undefined);e(t+".fgcolor",o?c.contrast(s):r)}e(t+".fgopacity",o?.5:1)}};_.coerceHoverinfo=function(e,t,r){var n=t._module.attributes;var a=n.hoverinfo?n:l;var i=a.hoverinfo;var o;if(r._dataLength===1){var s=i.dflt==="all"?i.flags.slice():i.dflt.split("+");s.splice(s.indexOf("name"),1);o=s.join("+")}return _.coerce(e,t,a,"hoverinfo",o)};_.coerceSelectionMarkerOpacity=function(e,t){if(!e.marker)return;var r=e.marker.opacity;if(r===undefined)return;var n;var a;if(!h(r)&&!e.selected&&!e.unselected){n=r;a=o*r}t("selected.marker.opacity",n);t("unselected.marker.opacity",a)};function p(e,t){var r=_.valObjectMeta[t.valType];if(t.arrayOk&&h(e))return true;if(r.validateFunction){return r.validateFunction(e,t)}var n={};var a=n;var i={set:function(e){a=e}};r.coerceFunction(e,i,n,t);return a!==n}_.validate=p},{"../components/color":100,"../components/colorscale/scales":115,"../constants/interactions":209,"../plots/attributes":272,"./array":216,"./mod":237,"./nested_property":238,"./regex":246,"fast-isnumeric":15,tinycolor2:65}],221:[function(e,t,y){"use strict";var l=e("d3-time-format").timeFormat;var f=e("fast-isnumeric");var c=e("./loggers");var b=e("./mod").mod;var r=e("../constants/numerical");var x=r.BADNUM;var w=r.ONEDAY;var A=r.ONEHOUR;var T=r.ONEMIN;var k=r.ONESEC;var M=r.EPOCHJD;var S=e("../registry");var h=e("d3-time-format").utcFormat;var C=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m;var L=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m;var E=(new Date).getFullYear()-70;function D(e){return e&&S.componentsRegistry.calendars&&typeof e==="string"&&e!=="gregorian"}y.dateTick0=function(e,t){var r=a(e,!!t);if(t<2)return r;var n=y.dateTime2ms(r,e);n+=w*(t-1);return y.ms2DateTime(n,0,e)};function a(e,t){if(D(e)){return t?S.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:S.getComponentMethod("calendars","CANONICAL_TICK")[e]}else{return t?"2000-01-02":"2000-01-01"}}y.dfltRange=function(e){if(D(e)){return S.getComponentMethod("calendars","DFLTRANGE")[e]}else{return["2000-01-01","2001-01-01"]}};y.isJSDate=function(e){return typeof e==="object"&&e!==null&&typeof e.getTime==="function"};var O,P;y.dateTime2ms=function(e,t){if(y.isJSDate(e)){var r=e.getTimezoneOffset()*T;var n=(e.getUTCMinutes()-e.getMinutes())*T+(e.getUTCSeconds()-e.getSeconds())*k+(e.getUTCMilliseconds()-e.getMilliseconds());if(n){var a=3*T;r=r-a/2+b(n-r+a/2,a)}e=Number(e)-r;if(e>=O&&e<=P)return e;return x}if(typeof e!=="string"&&typeof e!=="number")return x;e=String(e);var i=D(t);var o=e.charAt(0);if(i&&(o==="G"||o==="g")){e=e.substr(1);t=""}var s=i&&t.substr(0,7)==="chinese";var l=e.match(s?L:C);if(!l)return x;var c=l[1];var u=l[3]||"1";var f=Number(l[5]||1);var d=Number(l[7]||0);var h=Number(l[9]||0);var p=Number(l[11]||0);if(i){if(c.length===2)return x;c=Number(c);var v;try{var g=S.getComponentMethod("calendars","getCal")(t);if(s){var m=u.charAt(u.length-1)==="i";u=parseInt(u,10);v=g.newDate(c,g.toMonthIndex(c,u,m),f)}else{v=g.newDate(c,Number(u),f)}}catch(e){return x}if(!v)return x;return(v.toJD()-M)*w+d*A+h*T+p*k}if(c.length===2){c=(Number(c)+2e3-E)%100+E}else c=Number(c);u-=1;var _=new Date(Date.UTC(2e3,u,f,d,h));_.setUTCFullYear(c);if(_.getUTCMonth()!==u)return x;if(_.getUTCDate()!==f)return x;return _.getTime()+p*k};O=y.MIN_MS=y.dateTime2ms("-9999");P=y.MAX_MS=y.dateTime2ms("9999-12-31 23:59:59.9999");y.isDateTime=function(e,t){return y.dateTime2ms(e,t)!==x};function o(e,t){return String(e+Math.pow(10,t)).substr(1)}var p=90*w;var v=3*A;var g=5*T;y.ms2DateTime=function(e,t,r){if(typeof e!=="number"||!(e>=O&&e<=P))return x;if(!t)t=0;var n=Math.floor(b(e+.05,1)*10);var a=Math.round(e-n/10);var i,o,s,l,c,u;if(D(r)){var f=Math.floor(a/w)+M;var d=Math.floor(b(e,w));try{i=S.getComponentMethod("calendars","getCal")(r).fromJD(f).formatDate("yyyy-mm-dd")}catch(e){i=h("G%Y-%m-%d")(new Date(a))}if(i.charAt(0)==="-"){while(i.length<11)i="-0"+i.substr(1)}else{while(i.length<10)i="0"+i}o=t<p?Math.floor(d/A):0;s=t<p?Math.floor(d%A/T):0;l=t<v?Math.floor(d%T/k):0;c=t<g?d%k*10+n:0}else{u=new Date(a);i=h("%Y-%m-%d")(u);o=t<p?u.getUTCHours():0;s=t<p?u.getUTCMinutes():0;l=t<v?u.getUTCSeconds():0;c=t<g?u.getUTCMilliseconds()*10+n:0}return m(i,o,s,l,c)};y.ms2DateTimeLocal=function(e){if(!(e>=O+w&&e<=P-w))return x;var t=Math.floor(b(e+.05,1)*10);var r=new Date(Math.round(e-t/10));var n=l("%Y-%m-%d")(r);var a=r.getHours();var i=r.getMinutes();var o=r.getSeconds();var s=r.getUTCMilliseconds()*10+t;return m(n,a,i,o,s)};function m(e,t,r,n,a){if(t||r||n||a){e+=" "+o(t,2)+":"+o(r,2);if(n||a){e+=":"+o(n,2);if(a){var i=4;while(a%10===0){i-=1;a/=10}e+="."+o(a,i)}}}return e}y.cleanDate=function(e,t,r){if(e===x)return t;if(y.isJSDate(e)||typeof e==="number"&&isFinite(e)){if(D(r)){c.error("JS Dates and milliseconds are incompatible with world calendars",e);return t}e=y.ms2DateTimeLocal(+e);if(!e&&t!==undefined)return t}else if(!y.isDateTime(e,r)){c.error("unrecognized date",e);return t}return e};var i=/%\d?f/g;var s=/%h/g;var u={1:"1",2:"1",3:"2",4:"2"};function d(e,n,t,r){e=e.replace(i,function(e){var t=Math.min(+e.charAt(1)||6,6);var r=(n/1e3%1+2).toFixed(t).substr(2).replace(/0+$/,"")||"0";return r});var a=new Date(Math.floor(n+.05));e=e.replace(s,function(){return u[t("%q")(a)]});if(D(r)){try{e=S.getComponentMethod("calendars","worldCalFmt")(e,n,r)}catch(e){return"Invalid"}}return t(e)(a)}var _=[59,59.9,59.99,59.999,59.9999];function I(e,t){var r=b(e+.05,w);var n=o(Math.floor(r/A),2)+":"+o(b(Math.floor(r/T),60),2);if(t!=="M"){if(!f(t))t=0;var a=Math.min(b(e/k,60),_[t]);var i=(100+a).toFixed(t).substr(1);if(t>0){i=i.replace(/0+$/,"").replace(/[\.]$/,"")}n+=":"+i}return n}y.formatDate=function(e,t,r,n,a,i){a=D(a)&&a;if(!t){if(r==="y")t=i.year;else if(r==="m")t=i.month;else if(r==="d"){t=i.dayMonth+"\n"+i.year}else{return I(e,r)+"\n"+d(i.dayMonthYear,e,n,a)}}return d(t,e,n,a)};var R=3*w;y.incrementMonth=function(t,e,r){r=D(r)&&r;var n=b(t,w);t=Math.round(t-n);if(r){try{var a=Math.round(t/w)+M;var i=S.getComponentMethod("calendars","getCal")(r);var o=i.fromJD(a);if(e%12)i.add(o,e,"m");else i.add(o,e/12,"y");return(o.toJD()-M)*w+n}catch(e){c.error("invalid ms "+t+" in calendar "+r)}}var s=new Date(t+R);return s.setUTCMonth(s.getUTCMonth()+e)+n-R};y.findExactDates=function(e,t){var r=0;var n=0;var a=0;var i=0;var o;var s;var l=D(t)&&S.getComponentMethod("calendars","getCal")(t);for(var c=0;c<e.length;c++){s=e[c];if(!f(s)){i++;continue}if(s%w)continue;if(l){try{o=l.fromJD(s/w+M);if(o.day()===1){if(o.month()===1)r++;else n++}else a++}catch(e){}}else{o=new Date(s);if(o.getUTCDate()===1){if(o.getUTCMonth()===0)r++;else n++}else a++}}n+=r;a+=n;var u=e.length-i;return{exactYears:r/u,exactMonths:n/u,exactDays:a/u}}},{"../constants/numerical":210,"../registry":313,"./loggers":234,"./mod":237,"d3-time-format":13,"fast-isnumeric":15}],222:[function(e,t,r){"use strict";var n=e("@plotly/d3");var o=e("./loggers");var a=e("./matrix");var i=e("gl-mat4");function s(e){var t;if(typeof e==="string"){t=document.getElementById(e);if(t===null){throw new Error("No DOM element with id '"+e+"' exists on the page.")}return t}else if(e===null||e===undefined){throw new Error("DOM element provided is null or undefined")}return e}function l(e){var t=n.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")}function c(e){var t=e&&e.parentNode;if(t)t.removeChild(e)}function u(e,t){f("global",e,t)}function f(e,t,r){var n="plotly.js-style-"+e;var a=document.getElementById(n);if(!a){a=document.createElement("style");a.setAttribute("id",n);a.appendChild(document.createTextNode(""));document.head.appendChild(a)}var i=a.sheet;if(i.insertRule){i.insertRule(t+"{"+r+"}",0)}else if(i.addRule){i.addRule(t,r,0)}else o.warn("addStyleRule failed")}function d(e){var t="plotly.js-style-"+e;var r=document.getElementById(t);if(r)c(r)}function h(e){var t=v(e);var n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];t.forEach(function(e){var t=p(e);if(t){var r=a.convertCssMatrix(t);n=i.multiply(n,n,r)}});return n}function p(e){var t=window.getComputedStyle(e,null);var r=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");if(r==="none")return null;return r.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(e){return+e})}function v(e){var t=[];while(g(e)){t.push(e);e=e.parentNode}return t}function g(e){return e&&(e instanceof Element||e instanceof HTMLElement)}function m(e,t){return e&&t&&e.x===t.x&&e.y===t.y&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}t.exports={getGraphDiv:s,isPlotDiv:l,removeElement:c,addStyleRule:u,addRelatedStyleRule:f,deleteRelatedStyleRule:d,getFullTransformMatrix:h,getElementTransformMatrix:p,getElementAndAncestors:v,equalDomRects:m}},{"./loggers":234,"./matrix":236,"@plotly/d3":11,"gl-mat4":31}],223:[function(e,t,r){"use strict";var i=e("events").EventEmitter;var n={init:function(r){if(r._ev instanceof i)return r;var n=new i;var a=new i;r._ev=n;r._internalEv=a;r.on=n.on.bind(n);r.once=n.once.bind(n);r.removeListener=n.removeListener.bind(n);r.removeAllListeners=n.removeAllListeners.bind(n);r._internalOn=a.on.bind(a);r._internalOnce=a.once.bind(a);r._removeInternalListener=a.removeListener.bind(a);r._removeAllInternalListeners=a.removeAllListeners.bind(a);r.emit=function(e,t){if(typeof jQuery!=="undefined"){jQuery(r).trigger(e,t)}n.emit(e,t);a.emit(e,t)};return r},triggerHandler:function(e,t,r){var n;var a;if(typeof jQuery!=="undefined"){n=jQuery(e).triggerHandler(t,r)}var i=e._ev;if(!i)return n;var o=i._events[t];if(!o)return n;function s(e){if(e.listener){i.removeListener(t,e.listener);if(!e.fired){e.fired=true;return e.listener.apply(i,[r])}}else{return e.apply(i,[r])}}o=Array.isArray(o)?o:[o];var l;for(l=0;l<o.length-1;l++){s(o[l])}a=s(o[l]);return n!==undefined?n:a},purge:function(e){delete e._ev;delete e.on;delete e.once;delete e.removeListener;delete e.removeAllListeners;delete e.emit;delete e._ev;delete e._internalEv;delete e._internalOn;delete e._internalOnce;delete e._removeInternalListener;delete e._removeAllInternalListeners;return e}};t.exports=n},{events:12}],224:[function(e,t,r){"use strict";var p=e("./is_plain_object.js");var v=Array.isArray;function g(e,t){var r,n;for(r=0;r<e.length;r++){n=e[r];if(n!==null&&typeof n==="object"){return false}if(n!==void 0){t[r]=n}}return true}r.extendFlat=function(){return m(arguments,false,false,false)};r.extendDeep=function(){return m(arguments,true,false,false)};r.extendDeepAll=function(){return m(arguments,true,true,false)};r.extendDeepNoArrays=function(){return m(arguments,true,false,true)};function m(e,t,r,n){var a=e[0];var i=e.length;var o,s,l,c,u,f,d;if(i===2&&v(a)&&v(e[1])&&a.length===0){d=g(e[1],a);if(d){return a}else{a.splice(0,a.length)}}for(var h=1;h<i;h++){o=e[h];for(s in o){l=a[s];c=o[s];if(n&&v(c)){a[s]=c}else if(t&&c&&(p(c)||(u=v(c)))){if(u){u=false;f=l&&v(l)?l:[]}else{f=l&&p(l)?l:{}}a[s]=m([f,c],t,r,n)}else if(typeof c!=="undefined"||r){a[s]=c}}}return a}},{"./is_plain_object.js":231}],225:[function(e,t,r){"use strict";t.exports=function e(t){var r={};var n=[];var a=0;for(var i=0;i<t.length;i++){var o=t[i];if(r[o]!==1){r[o]=1;n[a++]=o}}return n}},{}],226:[function(e,t,r){"use strict";t.exports=function e(t){var r=l(t)?s:o;var n=[];for(var a=0;a<t.length;a++){var i=t[a];if(r(i))n.push(i)}return n};function o(e){return e.visible===true}function s(e){var t=e[0].trace;return t.visible===true&&t._length!==0}function l(e){return Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace}},{}],227:[function(e,t,r){"use strict";var d=e("./mod").mod;r.segmentsIntersect=g;function g(e,t,r,n,a,i,o,s){var l=r-e;var c=a-e;var u=o-a;var f=n-t;var d=i-t;var h=s-i;var p=l*h-u*f;if(p===0)return null;var v=(c*h-u*d)/p;var g=(c*f-l*d)/p;if(g<0||g>1||v<0||v>1)return null;return{x:e+l*v,y:t+f*v}}r.segmentDistance=function e(t,r,n,a,i,o,s,l){if(g(t,r,n,a,i,o,s,l))return 0;var c=n-t;var u=a-r;var f=s-i;var d=l-o;var h=c*c+u*u;var p=f*f+d*d;var v=Math.min(m(c,u,h,i-t,o-r),m(c,u,h,s-t,l-r),m(f,d,p,t-i,r-o),m(f,d,p,n-i,a-o));return Math.sqrt(v)};function m(e,t,r,n,a){var i=n*e+a*t;if(i<0){return n*n+a*a}else if(i>r){var o=n-e;var s=a-t;return o*o+s*s}else{var l=n*t-a*e;return l*l/r}}var h,p,v;r.getTextLocation=function e(t,r,n,a){if(t!==p||a!==v){h={};p=t;v=a}if(h[n]){return h[n]}var i=t.getPointAtLength(d(n-a/2,r));var o=t.getPointAtLength(d(n+a/2,r));var s=Math.atan((o.y-i.y)/(o.x-i.x));var l=t.getPointAtLength(d(n,r));var c=(l.x*4+i.x+o.x)/6;var u=(l.y*4+i.y+o.y)/6;var f={x:c,y:u,theta:s};h[n]=f;return f};r.clearLocationCache=function(){p=null};r.getVisibleSegment=function e(a,t,r){var i=t.left;var o=t.right;var s=t.top;var l=t.bottom;var n=0;var c=a.getTotalLength();var u=c;var f,d;function h(e){var t=a.getPointAtLength(e);if(e===0)f=t;else if(e===c)d=t;var r=t.x<i?i-t.x:t.x>o?t.x-o:0;var n=t.y<s?s-t.y:t.y>l?t.y-l:0;return Math.sqrt(r*r+n*n)}var p=h(n);while(p){n+=p+r;if(n>u)return;p=h(n)}p=h(u);while(p){u-=p+r;if(n>u)return;p=h(u)}return{min:n,max:u,len:u-n,total:c,isClosed:n===0&&u===c&&Math.abs(f.x-d.x)<.1&&Math.abs(f.y-d.y)<.1}};r.findPointOnPath=function e(t,r,n,a){a=a||{};var i=a.pathLength||t.getTotalLength();var o=a.tolerance||.001;var s=a.iterationLimit||30;var l=t.getPointAtLength(0)[n]>t.getPointAtLength(i)[n]?-1:1;var c=0;var u=0;var f=i;var d;var h;var p;while(c<s){d=(u+f)/2;h=t.getPointAtLength(d);p=h[n]-r;if(Math.abs(p)<o){return h}else{if(l*p>0){f=d}else{u=d}c++}}return h}},{"./mod":237}],228:[function(e,t,r){"use strict";t.exports=function e(t){return t}},{}],229:[function(e,t,r){"use strict";t.exports=function e(t,r){if(!r)return t;var n=1/Math.abs(r);var a=n>1?(n*t+n*r)/n:t+r;var i=String(a).length;if(i>16){var o=String(r).length;var s=String(t).length;if(i>=s+o){var l=parseFloat(a).toPrecision(12);if(l.indexOf("e+")===-1)a=+l}}return a}},{}],230:[function(e,t,r){"use strict";var b=e("@plotly/d3");var x=e("d3-time-format").utcFormat;var n=e("fast-isnumeric");var a=e("../constants/numerical");var i=a.FP_SAFE;var o=-i;var s=a.BADNUM;var w=t.exports={};w.nestedProperty=e("./nested_property");w.keyedContainer=e("./keyed_container");w.relativeAttr=e("./relative_attr");w.isPlainObject=e("./is_plain_object");w.toLogRange=e("./to_log_range");w.relinkPrivateKeys=e("./relink_private");var l=e("./array");w.isTypedArray=l.isTypedArray;w.isArrayOrTypedArray=l.isArrayOrTypedArray;w.isArray1D=l.isArray1D;w.ensureArray=l.ensureArray;w.concat=l.concat;w.maxRowLength=l.maxRowLength;w.minRowLength=l.minRowLength;var c=e("./mod");w.mod=c.mod;w.modHalf=c.modHalf;var u=e("./coerce");w.valObjectMeta=u.valObjectMeta;w.coerce=u.coerce;w.coerce2=u.coerce2;w.coerceFont=u.coerceFont;w.coercePattern=u.coercePattern;w.coerceHoverinfo=u.coerceHoverinfo;w.coerceSelectionMarkerOpacity=u.coerceSelectionMarkerOpacity;w.validate=u.validate;var f=e("./dates");w.dateTime2ms=f.dateTime2ms;w.isDateTime=f.isDateTime;w.ms2DateTime=f.ms2DateTime;w.ms2DateTimeLocal=f.ms2DateTimeLocal;w.cleanDate=f.cleanDate;w.isJSDate=f.isJSDate;w.formatDate=f.formatDate;w.incrementMonth=f.incrementMonth;w.dateTick0=f.dateTick0;w.dfltRange=f.dfltRange;w.findExactDates=f.findExactDates;w.MIN_MS=f.MIN_MS;w.MAX_MS=f.MAX_MS;var d=e("./search");w.findBin=d.findBin;w.sorterAsc=d.sorterAsc;w.sorterDes=d.sorterDes;w.distinctVals=d.distinctVals;w.roundUp=d.roundUp;w.sort=d.sort;w.findIndexOfMin=d.findIndexOfMin;var h=e("./stats");w.aggNums=h.aggNums;w.len=h.len;w.mean=h.mean;w.median=h.median;w.midRange=h.midRange;w.variance=h.variance;w.stdev=h.stdev;w.interp=h.interp;var p=e("./matrix");w.init2dArray=p.init2dArray;w.transposeRagged=p.transposeRagged;w.dot=p.dot;w.translationMatrix=p.translationMatrix;w.rotationMatrix=p.rotationMatrix;w.rotationXYMatrix=p.rotationXYMatrix;w.apply3DTransform=p.apply3DTransform;w.apply2DTransform=p.apply2DTransform;w.apply2DTransform2=p.apply2DTransform2;w.convertCssMatrix=p.convertCssMatrix;w.inverseTransformMatrix=p.inverseTransformMatrix;var v=e("./angles");w.deg2rad=v.deg2rad;w.rad2deg=v.rad2deg;w.angleDelta=v.angleDelta;w.angleDist=v.angleDist;w.isFullCircle=v.isFullCircle;w.isAngleInsideSector=v.isAngleInsideSector;w.isPtInsideSector=v.isPtInsideSector;w.pathArc=v.pathArc;w.pathSector=v.pathSector;w.pathAnnulus=v.pathAnnulus;var g=e("./anchor_utils");w.isLeftAnchor=g.isLeftAnchor;w.isCenterAnchor=g.isCenterAnchor;w.isRightAnchor=g.isRightAnchor;w.isTopAnchor=g.isTopAnchor;w.isMiddleAnchor=g.isMiddleAnchor;w.isBottomAnchor=g.isBottomAnchor;var m=e("./geometry2d");w.segmentsIntersect=m.segmentsIntersect;w.segmentDistance=m.segmentDistance;w.getTextLocation=m.getTextLocation;w.clearLocationCache=m.clearLocationCache;w.getVisibleSegment=m.getVisibleSegment;w.findPointOnPath=m.findPointOnPath;var _=e("./extend");w.extendFlat=_.extendFlat;w.extendDeep=_.extendDeep;w.extendDeepAll=_.extendDeepAll;w.extendDeepNoArrays=_.extendDeepNoArrays;var y=e("./loggers");w.log=y.log;w.warn=y.warn;w.error=y.error;var A=e("./regex");w.counterRegex=A.counter;var T=e("./throttle");w.throttle=T.throttle;w.throttleDone=T.done;w.clearThrottle=T.clear;var k=e("./dom");w.getGraphDiv=k.getGraphDiv;w.isPlotDiv=k.isPlotDiv;w.removeElement=k.removeElement;w.addStyleRule=k.addStyleRule;w.addRelatedStyleRule=k.addRelatedStyleRule;w.deleteRelatedStyleRule=k.deleteRelatedStyleRule;w.getFullTransformMatrix=k.getFullTransformMatrix;w.getElementTransformMatrix=k.getElementTransformMatrix;w.getElementAndAncestors=k.getElementAndAncestors;w.equalDomRects=k.equalDomRects;w.clearResponsive=e("./clear_responsive");w.preserveDrawingBuffer=e("./preserve_drawing_buffer");w.makeTraceGroups=e("./make_trace_groups");w._=e("./localize");w.notifier=e("./notifier");w.filterUnique=e("./filter_unique");w.filterVisible=e("./filter_visible");w.pushUnique=e("./push_unique");w.increment=e("./increment");w.cleanNumber=e("./clean_number");w.ensureNumber=function e(t){if(!n(t))return s;t=Number(t);return t>i||t<o?s:t};w.isIndex=function(e,t){if(t!==undefined&&e>=t)return false;return n(e)&&e>=0&&e%1===0};w.noop=e("./noop");w.identity=e("./identity");w.repeat=function(e,t){var r=new Array(t);for(var n=0;n<t;n++){r[n]=e}return r};w.swapAttrs=function(e,t,r,n){if(!r)r="x";if(!n)n="y";for(var a=0;a<t.length;a++){var i=t[a];var o=w.nestedProperty(e,i.replace("?",r));var s=w.nestedProperty(e,i.replace("?",n));var l=o.get();o.set(s.get());s.set(l)}};w.raiseToTop=function e(t){t.parentNode.appendChild(t)};w.cancelTransition=function(e){return e.transition().duration(0)};w.constrain=function(e,t,r){if(t>r)return Math.max(r,Math.min(t,e));return Math.max(t,Math.min(r,e))};w.bBoxIntersect=function(e,t,r){r=r||0;return e.left<=t.right+r&&t.left<=e.right+r&&e.top<=t.bottom+r&&t.top<=e.bottom+r};w.simpleMap=function(e,t,r,n,a){var i=e.length;var o=new Array(i);for(var s=0;s<i;s++)o[s]=t(e[s],r,n,a);return o};w.randstr=function e(t,r,n,a){if(!n)n=16;if(r===undefined)r=24;if(r<=0)return"0";var i=Math.log(Math.pow(2,r))/Math.log(n);var o="";var s,l,c;for(s=2;i===Infinity;s*=2){i=Math.log(Math.pow(2,r/s))/Math.log(n)*s}var u=i-Math.floor(i);for(s=0;s<Math.floor(i);s++){c=Math.floor(Math.random()*n).toString(n);o=c+o}if(u){l=Math.pow(n,u);c=Math.floor(Math.random()*l).toString(n);o=c+o}var f=parseInt(o,n);if(t&&t[o]||f!==Infinity&&f>=Math.pow(2,r)){if(a>10){w.warn("randstr failed uniqueness");return o}return e(t,r,n,(a||0)+1)}else return o};w.OptionControl=function(t,r){if(!t)t={};if(!r)r="opt";var n={};n.optionList=[];n._newoption=function(e){e[r]=t;n[e.name]=e;n.optionList.push(e)};n["_"+r]=t;return n};w.smooth=function(e,t){t=Math.round(t)||0;if(t<2)return e;var r=e.length;var n=2*r;var a=2*t-1;var i=new Array(a);var o=new Array(r);var s;var l;var c;var u;for(s=0;s<a;s++){i[s]=(1-Math.cos(Math.PI*(s+1)/t))/(2*t)}for(s=0;s<r;s++){u=0;for(l=0;l<a;l++){c=s+l+1-t;if(c<-r)c-=n*Math.round(c/n);else if(c>=n)c-=n*Math.floor(c/n);if(c<0)c=-1-c;else if(c>=r)c=n-1-c;u+=e[c]*i[l]}o[s]=u}return o};w.syncOrAsync=function(e,t,r){var n,a;function i(){return w.syncOrAsync(e,t,r)}while(e.length){a=e.splice(0,1)[0];n=a(t);if(n&&n.then){return n.then(i).then(undefined,w.promiseError)}}return r&&r(t)};w.stripTrailingSlash=function(e){if(e.substr(-1)==="/")return e.substr(0,e.length-1);return e};w.noneOrAll=function(e,t,r){if(!e)return;var n=false;var a=true;var i;var o;for(i=0;i<r.length;i++){o=e[r[i]];if(o!==undefined&&o!==null)n=true;else a=false}if(n&&!a){for(i=0;i<r.length;i++){e[r[i]]=t[r[i]]}}};w.mergeArray=function(e,t,r,n){var a=typeof n==="function";if(w.isArrayOrTypedArray(e)){var i=Math.min(e.length,t.length);for(var o=0;o<i;o++){var s=e[o];t[o][r]=a?n(s):s}}};w.mergeArrayCastPositive=function(e,t,r){return w.mergeArray(e,t,r,function(e){var t=+e;return!isFinite(t)?0:t>0?t:0})};w.fillArray=function(e,t,r,n){n=n||w.identity;if(w.isArrayOrTypedArray(e)){for(var a=0;a<t.length;a++){t[a][r]=n(e[a])}}};w.castOption=function(e,t,r,n){n=n||w.identity;var a=w.nestedProperty(e,r).get();if(w.isArrayOrTypedArray(a)){if(Array.isArray(t)&&w.isArrayOrTypedArray(a[t[0]])){return n(a[t[0]][t[1]])}else{return n(a[t])}}else{return a}};w.extractOption=function(e,t,r,n){if(r in e)return e[r];var a=w.nestedProperty(t,n).get();if(!Array.isArray(a))return a};function M(e){var t={};for(var r in e){var n=e[r];for(var a=0;a<n.length;a++){t[n[a]]=+r}}return t}w.tagSelected=function(t,e,r){var n=e.selectedpoints;var a=e._indexToPoints;var i;if(a){i=M(a)}function o(e){return e!==undefined&&e<t.length}for(var s=0;s<n.length;s++){var l=n[s];if(w.isIndex(l)||w.isArrayOrTypedArray(l)&&w.isIndex(l[0])&&w.isIndex(l[1])){var c=i?i[l]:l;var u=r?r[c]:c;if(o(u)){t[u].selected=1}}}};w.selIndices2selPoints=function(e){var t=e.selectedpoints;var r=e._indexToPoints;if(r){var n=M(r);var a=[];for(var i=0;i<t.length;i++){var o=t[i];if(w.isIndex(o)){var s=n[o];if(w.isIndex(s)){a.push(s)}}}return a}else{return t}};w.getTargetArray=function(e,t){var r=t.target;if(typeof r==="string"&&r){var n=w.nestedProperty(e,r).get();return Array.isArray(n)?n:false}else if(Array.isArray(r)){return r}return false};w.minExtend=function(e,t){var r={};if(typeof t!=="object")t={};var n=3;var a=Object.keys(e);var i,o,s;for(i=0;i<a.length;i++){o=a[i];s=e[o];if(o.charAt(0)==="_"||typeof s==="function")continue;else if(o==="module")r[o]=s;else if(Array.isArray(s)){if(o==="colorscale"){r[o]=s.slice()}else{r[o]=s.slice(0,n)}}else if(w.isTypedArray(s)){r[o]=s.subarray(0,n)}else if(s&&typeof s==="object")r[o]=w.minExtend(e[o],t[o]);else r[o]=s}a=Object.keys(t);for(i=0;i<a.length;i++){o=a[i];s=t[o];if(typeof s!=="object"||!(o in r)||typeof r[o]!=="object"){r[o]=s}}return r};w.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)};w.containsAny=function(e,t){for(var r=0;r<t.length;r++){if(e.indexOf(t[r])!==-1)return true}return false};w.isIE=function(){return typeof window.navigator.msSaveBlob!=="undefined"};var S=/Version\/[\d\.]+.*Safari/;w.isSafari=function(){return S.test(window.navigator.userAgent)};var C=/iPad|iPhone|iPod/;w.isIOS=function(){return C.test(window.navigator.userAgent)};var L=/Firefox\/(\d+)\.\d+/;w.getFirefoxVersion=function(){var e=L.exec(window.navigator.userAgent);if(e&&e.length===2){var t=parseInt(e[1]);if(!isNaN(t)){return t}}return null};w.isD3Selection=function(e){return e instanceof b.selection};w.ensureSingle=function(e,t,r,n){var a=e.select(t+(r?"."+r:""));if(a.size())return a;var i=e.append(t);if(r)i.classed(r,true);if(n)i.call(n);return i};w.ensureSingleById=function(e,t,r,n){var a=e.select(t+"#"+r);if(a.size())return a;var i=e.append(t).attr("id",r);if(n)i.call(n);return i};w.objectFromPath=function(e,t){var r=e.split(".");var n;var a=n={};for(var i=0;i<r.length;i++){var o=r[i];var s=null;var l=r[i].match(/(.*)\[([0-9]+)\]/);if(l){o=l[1];s=l[2];n=n[o]=[];if(i===r.length-1){n[s]=t}else{n[s]={}}n=n[s]}else{if(i===r.length-1){n[o]=t}else{n[o]={}}n=n[o]}}return a};var E=/^([^\[\.]+)\.(.+)?/;var D=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;w.expandObjectPaths=function(e){var t,r,n,a,i,o,s;if(typeof e==="object"&&!Array.isArray(e)){for(r in e){if(e.hasOwnProperty(r)){if(t=r.match(E)){a=e[r];n=t[1];delete e[r];e[n]=w.extendDeepNoArrays(e[n]||{},w.objectFromPath(r,w.expandObjectPaths(a))[n])}else if(t=r.match(D)){a=e[r];n=t[1];i=parseInt(t[2]);delete e[r];e[n]=e[n]||[];if(t[3]==="."){s=t[4];o=e[n][i]=e[n][i]||{};w.extendDeepNoArrays(o,w.objectFromPath(s,w.expandObjectPaths(a)))}else{e[n][i]=w.expandObjectPaths(a)}}else{e[r]=w.expandObjectPaths(e[r])}}}}return e};w.numSeparate=function(e,t,r){if(!r)r=false;if(typeof t!=="string"||t.length===0){throw new Error("Separator string required for formatting!")}if(typeof e==="number"){e=String(e)}var n=/(\d+)(\d{3})/;var a=t.charAt(0);var i=t.charAt(1);var o=e.split(".");var s=o[0];var l=o.length>1?a+o[1]:"";if(i&&(o.length>1||s.length>4||r)){while(n.test(s)){s=s.replace(n,"$1"+i+"$2")}}return s+l};w.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var O=/^\w*$/;w.templateString=function(e,n){var a={};return e.replace(w.TEMPLATE_STRING_REGEX,function(e,t){var r;if(O.test(t)){r=n[t]}else{a[t]=a[t]||w.nestedProperty(n,t).get;r=a[t]()}return w.isValidTextValue(r)?r:""})};var P={max:10,count:0,name:"hovertemplate"};w.hovertemplateString=function(){return z.apply(P,arguments)};var I={max:10,count:0,name:"texttemplate"};w.texttemplateString=function(){return z.apply(I,arguments)};var R=/^[:|\|]/;function z(e,v,g){var m=this;var _=arguments;if(!v)v={};var y={};return e.replace(w.TEMPLATE_STRING_REGEX,function(e,t,r){var n=t==="xother"||t==="yother";var a=t==="_xother"||t==="_yother";var i=t==="_xother_"||t==="_yother_";var o=t==="xother_"||t==="yother_";var s=n||a||o||i;var l=t;if(a||i)l=l.substring(1);if(o||i)l=l.substring(0,l.length-1);var c;if(s){c=v[l];if(c===undefined)return""}else{var u,f;for(f=3;f<_.length;f++){u=_[f];if(!u)continue;if(u.hasOwnProperty(l)){c=u[l];break}if(!O.test(l)){c=w.nestedProperty(u,l).get();c=y[l]||w.nestedProperty(u,l).get();if(c)y[l]=c}if(c!==undefined)break}}if(c===undefined&&m){if(m.count<m.max){w.warn("Variable '"+l+"' in "+m.name+" could not be found!");c=e}if(m.count===m.max){w.warn("Too many "+m.name+" warnings - additional warnings will be suppressed")}m.count++;return e}if(r){var d;if(r[0]===":"){d=g?g.numberFormat:b.format;c=d(r.replace(R,""))(c)}if(r[0]==="|"){d=g?g.timeFormat:x;var h=w.dateTime2ms(c);c=w.formatDate(h,r.replace(R,""),false,d)}}else{var p=l+"Label";if(v.hasOwnProperty(p))c=v[p]}if(s){c="("+c+")";if(a||i)c=" "+c;if(o||i)c=c+" "}return c})}var N=48;var F=57;w.subplotSort=function(e,t){var r=Math.min(e.length,t.length)+1;var n=0;var a=0;for(var i=0;i<r;i++){var o=e.charCodeAt(i)||0;var s=t.charCodeAt(i)||0;var l=o>=N&&o<=F;var c=s>=N&&s<=F;if(l)n=10*n+o-N;if(c)a=10*a+s-N;if(!l||!c){if(n!==a)return n-a;if(o!==s)return o-s}}return a-n};var j=2e9;w.seedPseudoRandom=function(){j=2e9};w.pseudoRandom=function(){var e=j;j=(69069*j+1)%4294967296;if(Math.abs(j-e)<429496729)return w.pseudoRandom();return j/4294967296};w.fillText=function(e,t,r){var n=Array.isArray(r)?function(e){r.push(e)}:function(e){r.text=e};var a=w.extractOption(e,t,"htx","hovertext");if(w.isValidTextValue(a))return n(a);var i=w.extractOption(e,t,"tx","text");if(w.isValidTextValue(i))return n(i)};w.isValidTextValue=function(e){return e||e===0};w.formatPercent=function(e,t){t=t||0;var r=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%";for(var n=0;n<t;n++){if(r.indexOf(".")!==-1){r=r.replace("0%","%");r=r.replace(".%","%")}}return r};w.isHidden=function(e){var t=window.getComputedStyle(e).display;return!t||t==="none"};w.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""};w.strRotate=function(e){return e?"rotate("+e+")":""};w.strScale=function(e){return e!==1?"scale("+e+")":""};w.getTextTransform=function(e){var t=e.noCenter;var r=e.textX;var n=e.textY;var a=e.targetX;var i=e.targetY;var o=e.anchorX||0;var s=e.anchorY||0;var l=e.rotate;var c=e.scale;if(!c)c=0;else if(c>1)c=1;return w.strTranslate(a-c*(r+o),i-c*(n+s))+w.strScale(c)+(l?"rotate("+l+(t?"":" "+r+" "+n)+")":"")};w.ensureUniformFontSize=function(e,t){var r=w.extendFlat({},t);r.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0);return r};w.join2=function(e,t,r){var n=e.length;if(n>1){return e.slice(0,-1).join(t)+r+e[n-1]}return e.join(t)};w.bigFont=function(e){return Math.round(1.2*e)};var B=w.getFirefoxVersion();var H=B!==null&&B<86;w.getPositionFromD3Event=function(){if(H){return[b.event.layerX,b.event.layerY]}else{return[b.event.offsetX,b.event.offsetY]}}},{"../constants/numerical":210,"./anchor_utils":214,"./angles":215,"./array":216,"./clean_number":217,"./clear_responsive":219,"./coerce":220,"./dates":221,"./dom":222,"./extend":224,"./filter_unique":225,"./filter_visible":226,"./geometry2d":227,"./identity":228,"./increment":229,"./is_plain_object":231,"./keyed_container":232,"./localize":233,"./loggers":234,"./make_trace_groups":235,"./matrix":236,"./mod":237,"./nested_property":238,"./noop":239,"./notifier":240,"./preserve_drawing_buffer":243,"./push_unique":244,"./regex":246,"./relative_attr":247,"./relink_private":248,"./search":249,"./stats":251,"./throttle":253,"./to_log_range":254,"@plotly/d3":11,"d3-time-format":13,"fast-isnumeric":15}],231:[function(e,t,r){"use strict";t.exports=function e(t){if(window&&window.process&&window.process.versions){return Object.prototype.toString.call(t)==="[object Object]"}return Object.prototype.toString.call(t)==="[object Object]"&&Object.getPrototypeOf(t).hasOwnProperty("hasOwnProperty")}},{}],232:[function(e,t,r){"use strict";var p=e("./nested_property");var a=/^\w*$/;var v=0;var g=1;var m=2;var _=3;var y=4;t.exports=function e(t,i,o,s){o=o||"name";s=s||"value";var n,l,c;var u={};if(i&&i.length){c=p(t,i);l=c.get()}else{l=t}i=i||"";var f={};if(l){for(n=0;n<l.length;n++){f[l[n][o]]=n}}var d=a.test(s);var h={set:function(e,t){var r=t===null?y:v;if(!l){if(!c||r===y)return;l=[];c.set(l)}var n=f[e];if(n===undefined){if(r===y)return;r=r|_;n=l.length;f[e]=n}else if(t!==(d?l[n][s]:p(l[n],s).get())){r=r|m}var a=l[n]=l[n]||{};a[o]=e;if(d){a[s]=t}else{p(a,s).set(t)}if(t!==null){r=r&~y}u[n]=u[n]|r;return h},get:function(e){if(!l)return;var t=f[e];if(t===undefined){return undefined}else if(d){return l[t][s]}else{return p(l[t],s).get()}},rename:function(e,t){var r=f[e];if(r===undefined)return h;u[r]=u[r]|g;f[t]=r;delete f[e];l[r][o]=t;return h},remove:function(e){var t=f[e];if(t===undefined)return h;var r=l[t];if(Object.keys(r).length>2){u[t]=u[t]|m;return h.set(e,null)}if(d){for(n=t;n<l.length;n++){u[n]=u[n]|_}for(n=t;n<l.length;n++){f[l[n][o]]--}l.splice(t,1);delete f[e]}else{p(r,s).set(null);u[t]=u[t]|m|y}return h},constructUpdate:function(){var e,t;var r={};var n=Object.keys(u);for(var a=0;a<n.length;a++){t=n[a];e=i+"["+t+"]";if(l[t]){if(u[t]&g){r[e+"."+o]=l[t][o]}if(u[t]&m){if(d){r[e+"."+s]=u[t]&y?null:l[t][s]}else{r[e+"."+s]=u[t]&y?null:p(l[t],s).get()}}}else{r[e]=null}}return r}};return h}},{"./nested_property":238}],233:[function(e,t,r){"use strict";var u=e("../registry");t.exports=function e(t,r){var n=t._context.locale;for(var a=0;a<2;a++){var i=t._context.locales;for(var o=0;o<2;o++){var s=(i[n]||{}).dictionary;if(s){var l=s[r];if(l)return l}i=u.localeRegistry}var c=n.split("-")[0];if(c===n)break;n=c}return r}},{"../registry":313}],234:[function(e,t,r){"use strict";var n=e("../plot_api/plot_config").dfltConfig;var a=e("./notifier");var i=t.exports={};i.log=function(){var e;if(n.logging>1){var t=["LOG:"];for(e=0;e<arguments.length;e++){t.push(arguments[e])}console.trace.apply(console,t)}if(n.notifyOnLogging>1){var r=[];for(e=0;e<arguments.length;e++){r.push(arguments[e])}a(r.join("<br>"),"long")}};i.warn=function(){var e;if(n.logging>0){var t=["WARN:"];for(e=0;e<arguments.length;e++){t.push(arguments[e])}console.trace.apply(console,t)}if(n.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++){r.push(arguments[e])}a(r.join("<br>"),"stick")}};i.error=function(){var e;if(n.logging>0){var t=["ERROR:"];for(e=0;e<arguments.length;e++){t.push(arguments[e])}console.error.apply(console,t)}if(n.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++){r.push(arguments[e])}a(r.join("<br>"),"stick")}}},{"../plot_api/plot_config":263,"./notifier":240}],235:[function(e,t,r){"use strict";var o=e("@plotly/d3");t.exports=function e(t,r,n){var a=t.selectAll("g."+n.replace(/\s/g,".")).data(r,function(e){return e[0].trace.uid});a.exit().remove();a.enter().append("g").attr("class",n);a.order();var i=t.classed("rangeplot")?"nodeRangePlot3":"node3";a.each(function(e){e[0][i]=o.select(this)});return a}},{"@plotly/d3":11}],236:[function(e,t,o){"use strict";var r=e("gl-mat4");o.init2dArray=function(e,t){var r=new Array(e);for(var n=0;n<e;n++)r[n]=new Array(t);return r};o.transposeRagged=function(e){var t=0;var r=e.length;var n,a;for(n=0;n<r;n++)t=Math.max(t,e[n].length);var i=new Array(t);for(n=0;n<t;n++){i[n]=new Array(r);for(a=0;a<r;a++)i[n][a]=e[a][n]}return i};o.dot=function(e,t){if(!(e.length&&t.length)||e.length!==t.length)return null;var r=e.length;var n;var a;if(e[0].length){n=new Array(r);for(a=0;a<r;a++)n[a]=o.dot(e[a],t)}else if(t[0].length){var i=o.transposeRagged(t);n=new Array(i.length);for(a=0;a<i.length;a++)n[a]=o.dot(e,i[a])}else{n=0;for(a=0;a<r;a++)n+=e[a]*t[a]}return n};o.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]};o.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]};o.rotationXYMatrix=function(e,t,r){return o.dot(o.dot(o.translationMatrix(t,r),o.rotationMatrix(e)),o.translationMatrix(-t,-r))};o.apply3DTransform=function(r){return function(){var e=arguments;var t=arguments.length===1?e[0]:[e[0],e[1],e[2]||0];return o.dot(r,[t[0],t[1],t[2],1]).slice(0,3)}};o.apply2DTransform=function(r){return function(){var e=arguments;if(e.length===3){e=e[0]}var t=arguments.length===1?e[0]:[e[0],e[1]];return o.dot(r,[t[0],t[1],1]).slice(0,2)}};o.apply2DTransform2=function(e){var t=o.apply2DTransform(e);return function(e){return t(e.slice(0,2)).concat(t(e.slice(2,4)))}};o.convertCssMatrix=function(e){if(e){var t=e.length;if(t===16)return e;if(t===6){return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};o.inverseTransformMatrix=function(e){var t=[];r.invert(t,e);return[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}},{"gl-mat4":31}],237:[function(e,t,r){"use strict";function n(e,t){var r=e%t;return r<0?r+t:r}function a(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}t.exports={mod:n,modHalf:a}},{}],238:[function(e,t,r){"use strict";var l=e("fast-isnumeric");var f=e("./array").isArrayOrTypedArray;t.exports=function e(t,r){if(l(r))r=String(r);else if(typeof r!=="string"||r.substr(r.length-4)==="[-1]"){throw"bad property string"}var n=0;var a=r.split(".");var i;var o;var s;while(n<a.length){i=String(a[n]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/);if(i){if(i[1])a[n]=i[1];else if(n===0)a.splice(0,1);else throw"bad property string";o=i[2].substr(1,i[2].length-2).split("][");for(s=0;s<o.length;s++){n++;a.splice(n,0,Number(o[s]))}}n++}if(typeof t!=="object"){return g(t,r,a)}return{set:h(t,a,r),get:c(t,a),astr:r,parts:a,obj:t}};function c(o,s){return function(){var e=o;var t;var r;var n;var a;var i;for(a=0;a<s.length-1;a++){t=s[a];if(t===-1){r=true;n=[];for(i=0;i<e.length;i++){n[i]=c(e[i],s.slice(a+1))();if(n[i]!==n[0])r=false}return r?n[0]:n}if(typeof t==="number"&&!f(e)){return undefined}e=e[t];if(typeof e!=="object"||e===null){return undefined}}if(typeof e!=="object"||e===null)return undefined;n=e[s[a]];if(n===null)return undefined;return n}}var n=/(^|\.)args\[/;function d(e,t){return e===undefined||e===null&&!t.match(n)}function h(s,l,c){return function(e){var t=s;var r="";var n=[[s,r]];var a=d(e,c);var i;var o;for(o=0;o<l.length-1;o++){i=l[o];if(typeof i==="number"&&!f(t)){throw"array index but container is not an array"}if(i===-1){a=!p(t,l.slice(o+1),e,c);if(a)break;else return}if(!v(t,i,l[o+1],a)){break}t=t[i];if(typeof t!=="object"||t===null){throw"container is not an object"}r=u(r,i);n.push([t,r])}if(a){if(o===l.length-1){delete t[l[o]];if(Array.isArray(t)&&+l[o]===t.length-1){while(t.length&&t[t.length-1]===undefined){t.pop()}}}}else t[l[o]]=e}}function u(e,t){var r=t;if(l(t))r="["+t+"]";else if(e)r="."+t;return e+r}function p(e,t,r,n){var a=f(r);var i=true;var o=r;var s=n.replace("-1",0);var l=a?false:d(r,s);var c=t[0];var u;for(u=0;u<e.length;u++){s=n.replace("-1",u);if(a){o=r[u%r.length];l=d(o,s)}if(l)i=false;if(!v(e,u,c,l)){continue}h(e[u],t,n.replace("-1",u))(o)}return i}function v(e,t,r,n){if(e[t]===undefined){if(n)return false;if(typeof r==="number")e[t]=[];else e[t]={}}return true}function g(e,t,r){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:r,obj:e}}},{"./array":216,"fast-isnumeric":15}],239:[function(e,t,r){"use strict";t.exports=function e(){}},{}],240:[function(e,t,r){"use strict";var l=e("@plotly/d3");var n=e("fast-isnumeric");var a=[];t.exports=function(e,i){if(a.indexOf(e)!==-1)return;a.push(e);var o=1e3;if(n(i))o=i;else if(i==="long")o=3e3;var t=l.select("body").selectAll(".plotly-notifier").data([0]);t.enter().append("div").classed("plotly-notifier",true);var r=t.selectAll(".notifier-note").data(a);function s(e){e.duration(700).style("opacity",0).each("end",function(e){var t=a.indexOf(e);if(t!==-1)a.splice(t,1);l.select(this).remove()})}r.enter().append("div").classed("notifier-note",true).style("opacity",0).each(function(e){var t=l.select(this);t.append("button").classed("notifier-close",true).html("&times;").on("click",function(){t.transition().call(s)});var r=t.append("p");var n=e.split(/<br\s*\/?>/g);for(var a=0;a<n.length;a++){if(a)r.append("br");r.append("span").text(n[a])}if(i==="stick"){t.transition().duration(350).style("opacity",1)}else{t.transition().duration(700).style("opacity",1).transition().delay(o).call(s)}})}},{"@plotly/d3":11,"fast-isnumeric":15}],241:[function(e,t,r){"use strict";var s=e("./setcursor");var l="data-savedcursor";var c="!!";t.exports=function e(t,r){var n=t.attr(l);if(r){if(!n){var a=(t.attr("class")||"").split(" ");for(var i=0;i<a.length;i++){var o=a[i];if(o.indexOf("cursor-")===0){t.attr(l,o.substr(7)).classed(o,false)}}if(!t.attr(l)){t.attr(l,c)}}s(t,r)}else if(n){t.attr(l,null);if(n===c)s(t);else s(t,n)}}},{"./setcursor":250}],242:[function(e,t,r){"use strict";var h=e("./matrix").dot;var _=e("../constants/numerical").BADNUM;var c=t.exports={};c.tester=function e(t){var h=t.slice();var p=h[0][0];var v=p;var g=h[0][1];var m=g;var r;h.push(h[0]);for(r=1;r<h.length;r++){p=Math.min(p,h[r][0]);v=Math.max(v,h[r][0]);g=Math.min(g,h[r][1]);m=Math.max(m,h[r][1])}var n=false;var a;if(h.length===5){if(h[0][0]===h[1][0]){if(h[2][0]===h[3][0]&&h[0][1]===h[3][1]&&h[1][1]===h[2][1]){n=true;a=function(e){return e[0]===h[0][0]}}}else if(h[0][1]===h[1][1]){if(h[2][1]===h[3][1]&&h[0][0]===h[3][0]&&h[1][0]===h[2][0]){n=true;a=function(e){return e[1]===h[0][1]}}}}function i(e,t){var r=e[0];var n=e[1];if(r===_||r<p||r>v||n===_||n<g||n>m){return false}if(t&&a(e))return false;return true}function o(e,t){var r=e[0];var n=e[1];if(r===_||r<p||r>v||n===_||n<g||n>m){return false}var a=h.length;var i=h[0][0];var o=h[0][1];var s=0;var l;var c;var u;var f;var d;for(l=1;l<a;l++){c=i;u=o;i=h[l][0];o=h[l][1];f=Math.min(c,i);if(r<f||r>Math.max(c,i)||n>Math.max(u,o)){continue}else if(n<Math.min(u,o)){if(r!==f)s++}else{if(i===c)d=n;else d=u+(r-c)*(o-u)/(i-c);if(n===d){if(l===1&&t)return false;return true}if(n<=d&&r!==f)s++}}return s%2===1}var s=true;var l=h[0];for(r=1;r<h.length;r++){if(l[0]!==h[r][0]||l[1]!==h[r][1]){s=false;break}}return{xmin:p,xmax:v,ymin:g,ymax:m,pts:h,contains:n?i:o,isRect:n,degenerate:s}};c.isSegmentBent=function e(t,r,n,a){var i=t[r];var o=[t[n][0]-i[0],t[n][1]-i[1]];var s=h(o,o);var l=Math.sqrt(s);var c=[-o[1]/l,o[0]/l];var u;var f;var d;for(u=r+1;u<n;u++){f=[t[u][0]-i[0],t[u][1]-i[1]];d=h(f,o);if(d<0||d>s||Math.abs(h(f,c))>a)return true}return false};c.filter=function e(a,i){var o=[a[0]];var s=0;var l=0;function t(e){a.push(e);var t=o.length;var r=s;o.splice(l+1);for(var n=r+1;n<a.length;n++){if(n===a.length-1||c.isSegmentBent(a,r,n+1,i)){o.push(a[n]);if(o.length<t-2){s=n;l=o.length-1}r=n}}}if(a.length>1){var r=a.pop();t(r)}return{addPt:t,raw:a,filtered:o}}},{"../constants/numerical":210,"./matrix":236}],243:[function(e,t,r){"use strict";var u=e("fast-isnumeric");var f=e("is-mobile");t.exports=function e(t){var r;if(t&&t.hasOwnProperty("userAgent")){r=t.userAgent}else{r=d()}if(typeof r!=="string")return true;var n=f({ua:{headers:{"user-agent":r}},tablet:true,featureDetect:false});if(!n){var a=r.split(" ");for(var i=1;i<a.length;i++){var o=a[i];if(o.indexOf("Safari")!==-1){for(var s=i-1;s>-1;s--){var l=a[s];if(l.substr(0,8)==="Version/"){var c=l.substr(8).split(".")[0];if(u(c))c=+c;if(c>=13)return true}}}}}return n};function d(){var e;if(typeof navigator!=="undefined"){e=navigator.userAgent}if(e&&e.headers&&typeof e.headers["user-agent"]==="string"){e=e.headers["user-agent"]}return e}},{"fast-isnumeric":15,"is-mobile":49}],244:[function(e,t,r){"use strict";t.exports=function e(t,r){if(r instanceof RegExp){var n=r.toString();for(var a=0;a<t.length;a++){if(t[a]instanceof RegExp&&t[a].toString()===n){return t}}t.push(r)}else if((r||r===0)&&t.indexOf(r)===-1)t.push(r);return t}},{}],245:[function(e,t,r){"use strict";var i=e("../lib");var s=e("../plot_api/plot_config").dfltConfig;function n(e,t){var r=[];var n;for(var a=0;a<t.length;a++){n=t[a];if(n===e)r[a]=n;else if(typeof n==="object"){r[a]=Array.isArray(n)?i.extendDeep([],n):i.extendDeepAll({},n)}else r[a]=n}return r}var a={};a.add=function(e,t,r,n,a){var i,o;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};o=e.undoQueue.index;if(e.autoplay){if(!e.undoQueue.inSequence)e.autoplay=false;return}if(!e.undoQueue.sequence||e.undoQueue.beginSequence){i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}};e.undoQueue.queue.splice(o,e.undoQueue.queue.length-o,i);e.undoQueue.index+=1}else{i=e.undoQueue.queue[o-1]}e.undoQueue.beginSequence=false;if(i){i.undo.calls.unshift(t);i.undo.args.unshift(r);i.redo.calls.push(n);i.redo.args.push(a)}if(e.undoQueue.queue.length>s.queueLength){e.undoQueue.queue.shift();e.undoQueue.index--}};a.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};e.undoQueue.sequence=true;e.undoQueue.beginSequence=true};a.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};e.undoQueue.sequence=false;e.undoQueue.beginSequence=false};a.undo=function e(t){var r,n;if(t.undoQueue===undefined||isNaN(t.undoQueue.index)||t.undoQueue.index<=0){return}t.undoQueue.index--;r=t.undoQueue.queue[t.undoQueue.index];t.undoQueue.inSequence=true;for(n=0;n<r.undo.calls.length;n++){a.plotDo(t,r.undo.calls[n],r.undo.args[n])}t.undoQueue.inSequence=false;t.autoplay=false};a.redo=function e(t){var r,n;if(t.undoQueue===undefined||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length){return}r=t.undoQueue.queue[t.undoQueue.index];t.undoQueue.inSequence=true;for(n=0;n<r.redo.calls.length;n++){a.plotDo(t,r.redo.calls[n],r.redo.args[n])}t.undoQueue.inSequence=false;t.autoplay=false;t.undoQueue.index++};a.plotDo=function(e,t,r){e.autoplay=true;r=n(e,r);t.apply(null,r)};t.exports=a},{"../lib":230,"../plot_api/plot_config":263}],246:[function(e,t,r){"use strict";r.counter=function(e,t,r,n){var a=(t||"")+(r?"":"$");var i=n===false?"":"^";if(e==="xy"){return new RegExp(i+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+a)}return new RegExp(i+e+"([2-9]|[1-9][0-9]+)?"+a)}},{}],247:[function(e,t,r){"use strict";var n=/^(.*)(\.[^\.\[\]]+|\[\d\])$/;var a=/^[^\.\[\]]+$/;t.exports=function(e,t){while(t){var r=e.match(n);if(r)e=r[1];else if(e.match(a))e="";else throw new Error("bad relativeAttr call:"+[e,t]);if(t.charAt(0)==="^")t=t.slice(1);else break}if(e&&t.charAt(0)!=="["){return e+"."+t}return e+t}},{}],248:[function(e,t,r){"use strict";var l=e("./array").isArrayOrTypedArray;var c=e("./is_plain_object");t.exports=function e(t,r){for(var n in r){var a=r[n];var i=t[n];if(i===a)continue;if(n.charAt(0)==="_"||typeof a==="function"){if(n in t)continue;t[n]=a}else if(l(a)&&l(i)&&c(a[0])){if(n==="customdata"||n==="ids")continue;var o=Math.min(a.length,i.length);for(var s=0;s<o;s++){if(i[s]!==a[s]&&c(a[s])&&c(i[s])){e(i[s],a[s])}}}else if(c(a)&&c(i)){e(i,a);if(!Object.keys(i).length)delete t[n]}}}},{"./array":216,"./is_plain_object":231}],249:[function(e,t,u){"use strict";var c=e("fast-isnumeric");var f=e("./loggers");var o=e("./identity");var d=e("../constants/numerical").BADNUM;var h=1e-9;u.findBin=function(e,t,r){if(c(t.start)){return r?Math.ceil((e-t.start)/t.size-h)-1:Math.floor((e-t.start)/t.size+h)}else{var n=0;var a=t.length;var i=0;var o=a>1?(t[a-1]-t[0])/(a-1):1;var s,l;if(o>=0){l=r?p:v}else{l=r?m:g}e+=o*h*(r?-1:1)*(o>=0?1:-1);while(n<a&&i++<100){s=Math.floor((n+a)/2);if(l(t[s],e))n=s+1;else a=s}if(i>90)f.log("Long binary search...");return n-1}};function p(e,t){return e<t}function v(e,t){return e<=t}function g(e,t){return e>t}function m(e,t){return e>=t}u.sorterAsc=function(e,t){return e-t};u.sorterDes=function(e,t){return t-e};u.distinctVals=function(e){var t=e.slice();t.sort(u.sorterAsc);var r;for(r=t.length-1;r>-1;r--){if(t[r]!==d)break}var n=t[r]-t[0]||1;var a=n/(r||1)/1e4;var i=[];var o;for(var s=0;s<=r;s++){var l=t[s];var c=l-o;if(o===undefined){i.push(l);o=l}else if(c>a){n=Math.min(n,c);i.push(l);o=l}}return{vals:i,minDiff:n}};u.roundUp=function(e,t,r){var n=0;var a=t.length-1;var i;var o=0;var s=r?0:1;var l=r?1:0;var c=r?Math.ceil:Math.floor;while(n<a&&o++<100){i=c((n+a)/2);if(t[i]<=e)n=i+s;else a=i-l}return t[n]};u.sort=function(e,t){var r=0;var n=0;for(var a=1;a<e.length;a++){var i=t(e[a],e[a-1]);if(i<0)r=1;else if(i>0)n=1;if(r&&n)return e.sort(t)}return n?e:e.reverse()};u.findIndexOfMin=function(e,t){t=t||o;var r=Infinity;var n;for(var a=0;a<e.length;a++){var i=t(e[a]);if(i<r){r=i;n=a}}return n}},{"../constants/numerical":210,"./identity":228,"./loggers":234,"fast-isnumeric":15}],250:[function(e,t,r){"use strict";t.exports=function e(t,r){(t.attr("class")||"").split(" ").forEach(function(e){if(e.indexOf("cursor-")===0)t.classed(e,false)});if(r)t.classed("cursor-"+r,true)}},{}],251:[function(e,t,o){"use strict";var s=e("fast-isnumeric");var l=e("./array").isArrayOrTypedArray;o.aggNums=function(e,t,r,n){var a,i;if(!n||n>r.length)n=r.length;if(!s(t))t=false;if(l(r[0])){i=new Array(n);for(a=0;a<n;a++)i[a]=o.aggNums(e,t,r[a]);r=i}for(a=0;a<n;a++){if(!s(t))t=r[a];else if(s(r[a]))t=e(+t,+r[a])}return t};o.len=function(e){return o.aggNums(function(e){return e+1},0,e)};o.mean=function(e,t){if(!t)t=o.len(e);return o.aggNums(function(e,t){return e+t},0,e)/t};o.midRange=function(e){if(e===undefined||e.length===0)return undefined;return(o.aggNums(Math.max,null,e)+o.aggNums(Math.min,null,e))/2};o.variance=function(e,t,r){if(!t)t=o.len(e);if(!s(r))r=o.mean(e,t);return o.aggNums(function(e,t){return e+Math.pow(t-r,2)},0,e)/t};o.stdev=function(e,t,r){return Math.sqrt(o.variance(e,t,r))};o.median=function(e){var t=e.slice().sort();return o.interp(t,.5)};o.interp=function(e,t){if(!s(t))throw"n should be a finite number";t=t*e.length-.5;if(t<0)return e[0];if(t>e.length-1)return e[e.length-1];var r=t%1;return r*e[Math.ceil(t)]+(1-r)*e[Math.floor(t)]}},{"./array":216,"fast-isnumeric":15}],252:[function(e,t,r){"use strict";var w=e("@plotly/d3");var A=e("../lib");var b=A.strTranslate;var T=e("../constants/xmlns_namespaces");var k=e("../constants/alignment").LINE_SPACING;function x(e,t){return e.node().getBoundingClientRect()[t]}var n=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;r.convertToTspans=function(p,e,v){var g=p.text();var t=!p.attr("data-notex")&&typeof MathJax!=="undefined"&&g.match(n);var m=w.select(p.node().parentNode);if(m.empty())return;var _=p.attr("class")?p.attr("class").split(" ")[0]:"text";_+="-math";m.selectAll("svg."+_).remove();m.selectAll("g."+_+"-group").remove();p.style("display",null).attr({"data-unformatted":g,"data-math":"N"});function y(){if(!m.empty()){_=p.attr("class")+"-math";m.select("svg."+_).remove()}p.text("").style("white-space","pre");var e=f(p.node(),g);if(e){p.style("pointer-events","all")}r.positionText(p);if(v)v.call(p)}if(t){(e&&e._promises||[]).push(new Promise(function(d){p.style("display","none");var h=parseInt(p.node().style.fontSize,10);var e={fontSize:h};o(t[2],e,function(e,t,r){m.selectAll("svg."+_).remove();m.selectAll("g."+_+"-group").remove();var n=e&&e.select("svg");if(!n||!n.node()){y();d();return}var a=m.append("g").classed(_+"-group",true).attr({"pointer-events":"none","data-unformatted":g,"data-math":"Y"});a.node().appendChild(n.node());if(t&&t.node()){n.node().insertBefore(t.node().cloneNode(true),n.node().firstChild)}n.attr({class:_,height:r.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var i=p.node().style.fill||"black";var o=n.select("g");o.attr({fill:i,stroke:i});var s=x(o,"width");var l=x(o,"height");var c=+p.attr("x")-s*{start:0,middle:.5,end:1}[p.attr("text-anchor")||"start"];var u=h||x(p,"height");var f=-u/4;if(_[0]==="y"){a.attr({transform:"rotate("+[-90,+p.attr("x"),+p.attr("y")]+")"+b(-s/2,f-l/2)});n.attr({x:+p.attr("x"),y:+p.attr("y")})}else if(_[0]==="l"){n.attr({x:p.attr("x"),y:f-l/2})}else if(_[0]==="a"&&_.indexOf("atitle")!==0){n.attr({x:0,y:f})}else{n.attr({x:c,y:+p.attr("y")+f-l/2})}if(v)v.call(p,a);d(a)})}))}else y();return p};var a=/(<|&lt;|&#60;)/g;var i=/(>|&gt;|&#62;)/g;function s(e){return e.replace(a,"\\lt ").replace(i,"\\gt ")}function o(r,t,n){var a,e,i,o;MathJax.Hub.Queue(function(){e=A.extendDeepAll({},MathJax.Hub.config);i=MathJax.Hub.processSectionDelay;if(MathJax.Hub.processSectionDelay!==undefined){MathJax.Hub.processSectionDelay=0}return MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){a=MathJax.Hub.config.menuSettings.renderer;if(a!=="SVG"){return MathJax.Hub.setRenderer("SVG")}},function(){var e="math-output-"+A.randstr({},64);o=w.select("body").append("div").attr({id:e}).style({visibility:"hidden",position:"absolute"}).style({"font-size":t.fontSize+"px"}).text(s(r));return MathJax.Hub.Typeset(o.node())},function(){var e=w.select("body").select("#MathJax_SVG_glyphs");if(o.select(".MathJax_SVG").empty()||!o.select("svg").node()){A.log("There was an error in the tex syntax.",r);n()}else{var t=o.select("svg").node().getBoundingClientRect();n(o.select(".MathJax_SVG"),e,t)}o.remove();if(a!=="SVG"){return MathJax.Hub.setRenderer(a)}},function(){if(i!==undefined){MathJax.Hub.processSectionDelay=i}return MathJax.Hub.Config(e)})}var M={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"};var S={sub:"0.3em",sup:"-0.6em"};var C={sub:"-0.21em",sup:"0.42em"};var L="";var E=["http:","https:","mailto:","",undefined,":"];var D=r.NEWLINES=/(\r\n?|\n)/g;var O=/(<[^<>]*>)/;var P=/<(\/?)([^ >]*)(\s+(.*))?>/i;var I=/<br(\s+.*)?>/i;r.BR_TAG_ALL=/<br(\s+.*)?>/gi;var R=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i;var z=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i;var N=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i;var F=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function j(e,t){if(!e)return null;var r=e.match(t);var n=r&&(r[3]||r[4]);return n&&H(n)}var B=/(^|;)\s*color:/;r.plainText=function(e,t){t=t||{};var r=t.len!==undefined&&t.len!==-1?t.len:Infinity;var n=t.allowedTags!==undefined?t.allowedTags:["br"];var a="...";var i=a.length;var o=e.split(O);var s=[];var l="";var c=0;for(var u=0;u<o.length;u++){var f=o[u];var d=f.match(P);var h=d&&d[2].toLowerCase();if(h){if(n.indexOf(h)!==-1){s.push(f);l=h}}else{var p=f.length;if(c+p<r){s.push(f);c+=p}else if(c<r){var v=r-c;if(l&&(l!=="br"||v<=i||p<=i)){s.pop()}if(r>i){s.push(f.substr(0,v-i)+a)}else{s.push(f.substr(0,v))}break}l=""}}return s.join("")};var l={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""};var c=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function H(e){return e.replace(c,function(e,t){var r;if(t.charAt(0)==="#"){r=u(t.charAt(1)==="x"?parseInt(t.substr(2),16):parseInt(t.substr(1),10))}else r=l[t];return r||e})}r.convertEntities=H;function u(e){if(e>1114111)return;var t=String.fromCodePoint;if(t)return t(e);var r=String.fromCharCode;if(e<=65535)return r(e);return r((e>>10)+55232,e%1024+56320)}function f(n,r){r=r.replace(D," ");var e=false;var c=[];var u;var a=-1;function t(){a++;var e=document.createElementNS(T.svg,"tspan");w.select(e).attr({class:"line",dy:a*k+"em"});n.appendChild(e);u=e;var t=c;c=[{node:e}];if(t.length>1){for(var r=1;r<t.length;r++){i(t[r])}}}function i(e){var t=e.type;var r={};var n;if(t==="a"){n="a";var a=e.target;var i=e.href;var o=e.popup;if(i){r={"xlink:xlink:show":a==="_blank"||a.charAt(0)!=="_"?"new":"replace",target:a,"xlink:xlink:href":i};if(o){r.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+o+'");return false;'}}}else n="tspan";if(e.style)r.style=e.style;var s=document.createElementNS(T.svg,n);if(t==="sup"||t==="sub"){f(u,L);u.appendChild(s);var l=document.createElementNS(T.svg,"tspan");f(l,L);w.select(l).attr("dy",C[t]);r.dy=S[t];u.appendChild(s);u.appendChild(l)}else{u.appendChild(s)}w.select(s).attr(r);u=e.node=s;c.push(e)}function f(e,t){e.appendChild(document.createTextNode(t))}function o(e){if(c.length===1){A.log("Ignoring unexpected end tag </"+e+">.",r);return}var t=c.pop();if(e!==t.type){A.log("Start tag <"+t.type+"> doesnt match end tag <"+e+">. Pretending it did match.",r)}u=c[c.length-1].node}var s=I.test(r);if(s)t();else{u=n;c=[{node:n}]}var l=r.split(O);for(var d=0;d<l.length;d++){var h=l[d];var p=h.match(P);var v=p&&p[2].toLowerCase();var g=M[v];if(v==="br"){t()}else if(g===undefined){f(u,H(h))}else{if(p[1]){o(v)}else{var m=p[4];var _={type:v};var y=j(m,R);if(y){y=y.replace(B,"$1 fill:");if(g)y+=";"+g}else if(g)y=g;if(y)_.style=y;if(v==="a"){e=true;var b=j(m,z);if(b){var x=document.createElement("a");x.href=b;if(E.indexOf(x.protocol)!==-1){_.href=encodeURI(decodeURI(b));_.target=j(m,N)||"_blank";_.popup=j(m,F)}}}i(_)}}}return e}r.sanitizeHTML=function e(t){t=t.replace(D," ");var r=document.createElement("p");var n=r;var a=[];var i=t.split(O);for(var o=0;o<i.length;o++){var s=i[o];var l=s.match(P);var c=l&&l[2].toLowerCase();if(c in M){if(l[1]){if(a.length){n=a.pop()}}else{var u=l[4];var f=j(u,R);var d=f?{style:f}:{};if(c==="a"){var h=j(u,z);if(h){var p=document.createElement("a");p.href=h;if(E.indexOf(p.protocol)!==-1){d.href=encodeURI(decodeURI(h));var v=j(u,N);if(v){d.target=v}}}}var g=document.createElement(c);n.appendChild(g);w.select(g).attr(d);n=g;a.push(g)}}else{n.appendChild(document.createTextNode(H(s)))}}var m="innerHTML";return r[m]};r.lineCount=function e(t){return t.selectAll("tspan.line").size()||1};r.positionText=function e(t,a,i){return t.each(function(){var r=w.select(this);function e(e,t){if(t===undefined){t=r.attr(e);if(t===null){r.attr(e,0);t=0}}else r.attr(e,t);return t}var t=e("x",a);var n=e("y",i);if(this.nodeName==="text"){r.selectAll("tspan.line").attr({x:t,y:n})}})};function d(e,t,a){var r=a.horizontalAlign;var n=a.verticalAlign||"top";var i=e.node().getBoundingClientRect();var o=t.node().getBoundingClientRect();var s;var l;var c;if(n==="bottom"){l=function(){return i.bottom-s.height}}else if(n==="middle"){l=function(){return i.top+(i.height-s.height)/2}}else{l=function(){return i.top}}if(r==="right"){c=function(){return i.right-s.width}}else if(r==="center"){c=function(){return i.left+(i.width-s.width)/2}}else{c=function(){return i.left}}return function(){s=this.node().getBoundingClientRect();var e=c()-o.left;var t=l()-o.top;var r=a.gd||{};if(a.gd){r._fullLayout._calcInverseTransform(r);var n=A.apply3DTransform(r._fullLayout._invTransform)(e,t);e=n[0];t=n[1]}this.style({top:t+"px",left:e+"px","z-index":1e3});return this}}var h="1px ";r.makeTextShadow=function(e){var t=h;var r=h;var n=h;return t+r+n+e+", "+"-"+t+"-"+r+n+e+", "+t+"-"+r+n+e+", "+"-"+t+r+n+e};r.makeEditable=function(o,s){var l=s.gd;var e=s.delegate;var c=w.dispatch("edit","input","cancel");var r=e||o;o.style({"pointer-events":e?"none":"all"});if(o.size()!==1)throw new Error("boo");function t(){n();o.style({opacity:0});var e=r.attr("class");var t;if(e)t="."+e.split(" ")[0]+"-math-group";else t="[class*=-math-group]";if(t){w.select(o.node().parentNode).select(t).style({opacity:0})}}function u(e){var t=e.node();var r=document.createRange();r.selectNodeContents(t);var n=window.getSelection();n.removeAllRanges();n.addRange(r);t.focus()}function n(){var e=w.select(l);var t=e.select(".svg-container");var r=t.append("div");var n=o.node().style;var a=parseFloat(n.fontSize||12);var i=s.text;if(i===undefined)i=o.attr("data-unformatted");r.classed("plugin-editable editable",true).style({position:"absolute","font-family":n.fontFamily||"Arial","font-size":a,color:s.fill||n.fill||"black",opacity:1,"background-color":s.background||"transparent",outline:"#ffffff33 1px solid",margin:[-a/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:true}).text(i).call(d(o,t,s)).on("blur",function(){l._editing=false;o.text(this.textContent).style({opacity:1});var e=w.select(this).attr("class");var t;if(e)t="."+e.split(" ")[0]+"-math-group";else t="[class*=-math-group]";if(t){w.select(o.node().parentNode).select(t).style({opacity:0})}var r=this.textContent;w.select(this).transition().duration(0).remove();w.select(document).on("mouseup",null);c.edit.call(o,r)}).on("focus",function(){var e=this;l._editing=true;w.select(document).on("mouseup",function(){if(w.event.target===e)return false;if(document.activeElement===r.node())r.node().blur()})}).on("keyup",function(){if(w.event.which===27){l._editing=false;o.style({opacity:1});w.select(this).style({opacity:0}).on("blur",function(){return false}).transition().remove();c.cancel.call(o,this.textContent)}else{c.input.call(o,this.textContent);w.select(this).call(d(o,t,s))}}).on("keydown",function(){if(w.event.which===13)this.blur()}).call(u)}if(s.immediate)t();else r.on("click",t);return w.rebind(o,c,"on")}},{"../constants/alignment":205,"../constants/xmlns_namespaces":211,"../lib":230,"@plotly/d3":11}],253:[function(e,t,r){"use strict";var l={};r.throttle=function e(t,r,n){var a=l[t];var i=Date.now();if(!a){for(var o in l){if(l[o].ts<i-6e4){delete l[o]}}a=l[t]={ts:0,timer:null}}c(a);function s(){n();a.ts=Date.now();if(a.onDone){a.onDone();a.onDone=null}}if(i>a.ts+r){s();return}a.timer=setTimeout(function(){s();a.timer=null},r)};r.done=function(e){var n=l[e];if(!n||!n.timer)return Promise.resolve();return new Promise(function(t){var r=n.onDone;n.onDone=function e(){if(r)r();t();n.onDone=null}})};r.clear=function(e){if(e){c(l[e]);delete l[e]}else{for(var t in l)r.clear(t)}};function c(e){if(e&&e.timer!==null){clearTimeout(e.timer);e.timer=null}}},{}],254:[function(e,t,r){"use strict";var a=e("fast-isnumeric");t.exports=function e(t,r){if(t>0)return Math.log(t)/Math.LN10;var n=Math.log(Math.min(r[0],r[1]))/Math.LN10;if(!a(n))n=Math.log(Math.max(r[0],r[1]))/Math.LN10-6;return n}},{"fast-isnumeric":15}],255:[function(e,t,r){"use strict";t.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],256:[function(e,t,r){"use strict";t.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],257:[function(e,t,r){"use strict";var c=e("../registry");t.exports=function e(t){var r=c.layoutArrayContainers;var n=c.layoutArrayRegexes;var a=t.split("[")[0];var i;var o;for(var s=0;s<n.length;s++){o=t.match(n[s]);if(o&&o.index===0){i=o[0];break}}if(!i)i=r[r.indexOf(a)];if(!i)return false;var l=t.substr(i.length);if(!l)return{array:i,index:"",property:""};o=l.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/);if(!o)return false;return{array:i,index:Number(o[1]),property:o[3]||""}}},{"../registry":313}],258:[function(e,t,r){"use strict";var n=e("../lib");var o=n.extendFlat;var s=n.isPlainObject;var a={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]};var i={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]};var l=a.flags.slice().concat(["fullReplot"]);var c=i.flags.slice().concat("layoutReplot");t.exports={traces:a,layout:i,traceFlags:function(){return u(l)},layoutFlags:function(){return u(c)},update:function(e,t){var r=t.editType;if(r&&r!=="none"){var n=r.split("+");for(var a=0;a<n.length;a++){e[n[a]]=true}}},overrideAll:f};function u(e){var t={};for(var r=0;r<e.length;r++)t[e[r]]=false;return t}function f(e,t,r){var n=o({},e);for(var a in n){var i=n[a];if(s(i)){n[a]=d(i,t,r,a)}}if(r==="from-root")n.editType=t;return n}function d(e,t,r,n){if(e.valType){var a=o({},e);a.editType=t;if(Array.isArray(e.items)){a.items=new Array(e.items.length);for(var i=0;i<e.items.length;i++){a.items[i]=d(e.items[i],t,"from-root")}}return a}else{return f(e,t,n.charAt(0)==="_"?"nested":"from-root")}}},{"../lib":230}],259:[function(e,t,M){"use strict";var u=e("fast-isnumeric");var S=e("gl-mat4/fromQuat");var x=e("../registry");var C=e("../lib");var L=e("../plots/plots");var r=e("../plots/cartesian/axis_ids");var E=e("../components/color");var D=r.cleanId;var f=r.getFromTrace;var w=x.traceIs;M.clearPromiseQueue=function(e){if(Array.isArray(e._promises)&&e._promises.length>0){C.log("Clearing previous rejected promises from queue.")}e._promises=[]};M.cleanLayout=function(e){var t,r;if(!e)e={};if(e.xaxis1){if(!e.xaxis)e.xaxis=e.xaxis1;delete e.xaxis1}if(e.yaxis1){if(!e.yaxis)e.yaxis=e.yaxis1;delete e.yaxis1}if(e.scene1){if(!e.scene)e.scene=e.scene1;delete e.scene1}var n=(L.subplotsRegistry.cartesian||{}).attrRegex;var a=(L.subplotsRegistry.polar||{}).attrRegex;var i=(L.subplotsRegistry.ternary||{}).attrRegex;var o=(L.subplotsRegistry.gl3d||{}).attrRegex;var s=Object.keys(e);for(t=0;t<s.length;t++){var l=s[t];if(n&&n.test(l)){var c=e[l];if(c.anchor&&c.anchor!=="free"){c.anchor=D(c.anchor)}if(c.overlaying)c.overlaying=D(c.overlaying);if(!c.type){if(c.isdate)c.type="date";else if(c.islog)c.type="log";else if(c.isdate===false&&c.islog===false)c.type="linear"}if(c.autorange==="withzero"||c.autorange==="tozero"){c.autorange=true;c.rangemode="tozero"}delete c.islog;delete c.isdate;delete c.categories;if(I(c,"domain"))delete c.domain;if(c.autotick!==undefined){if(c.tickmode===undefined){c.tickmode=c.autotick?"auto":"linear"}delete c.autotick}P(c)}else if(a&&a.test(l)){var u=e[l];P(u.radialaxis)}else if(i&&i.test(l)){var f=e[l];P(f.aaxis);P(f.baxis);P(f.caxis)}else if(o&&o.test(l)){var d=e[l];var h=d.cameraposition;if(Array.isArray(h)&&h[0].length===4){var p=h[0];var v=h[1];var g=h[2];var m=S([],p);var _=[];for(r=0;r<3;++r){_[r]=v[r]+g*m[2+4*r]}d.camera={eye:{x:_[0],y:_[1],z:_[2]},center:{x:v[0],y:v[1],z:v[2]},up:{x:0,y:0,z:1}};delete d.cameraposition}P(d.xaxis);P(d.yaxis);P(d.zaxis)}}var y=Array.isArray(e.annotations)?e.annotations.length:0;for(t=0;t<y;t++){var b=e.annotations[t];if(!C.isPlainObject(b))continue;if(b.ref){if(b.ref==="paper"){b.xref="paper";b.yref="paper"}else if(b.ref==="data"){b.xref="x";b.yref="y"}delete b.ref}O(b,"xref");O(b,"yref")}var x=Array.isArray(e.shapes)?e.shapes.length:0;for(t=0;t<x;t++){var w=e.shapes[t];if(!C.isPlainObject(w))continue;O(w,"xref");O(w,"yref")}var A=Array.isArray(e.images)?e.images.length:0;for(t=0;t<A;t++){var T=e.images[t];if(!C.isPlainObject(T))continue;O(T,"xref");O(T,"yref")}var k=e.legend;if(k){if(k.x>3){k.x=1.02;k.xanchor="left"}else if(k.x<-2){k.x=-.02;k.xanchor="right"}if(k.y>3){k.y=1.02;k.yanchor="bottom"}else if(k.y<-2){k.y=-.02;k.yanchor="top"}}P(e);if(e.dragmode==="rotate")e.dragmode="orbit";E.clean(e);if(e.template&&e.template.layout){M.cleanLayout(e.template.layout)}return e};function O(e,t){var r=e[t];var n=t.charAt(0);if(r&&r!=="paper"){e[t]=D(r,n,true)}}function P(a){if(a){if(typeof a.title==="string"||typeof a.title==="number"){a.title={text:a.title}}e("titlefont","font");e("titleposition","position");e("titleside","side");e("titleoffset","offset")}function e(e,t){var r=a[e];var n=a.title&&a.title[t];if(r&&!n){if(!a.title){a.title={}}a.title[t]=a[e];delete a[e]}}}M.cleanData=function(e){for(var t=0;t<e.length;t++){var r=e[t];var n;if(r.type==="histogramy"&&"xbins"in r&&!("ybins"in r)){r.ybins=r.xbins;delete r.xbins}if(r.error_y&&"opacity"in r.error_y){var a=E.defaults;var i=r.error_y.color||(w(r,"bar")?E.defaultLine:a[t%a.length]);r.error_y.color=E.addOpacity(E.rgb(i),E.opacity(i)*r.error_y.opacity);delete r.error_y.opacity}if("bardir"in r){if(r.bardir==="h"&&(w(r,"bar")||r.type.substr(0,9)==="histogram")){r.orientation="h";M.swapXYData(r)}delete r.bardir}if(r.type==="histogramy")M.swapXYData(r);if(r.type==="histogramx"||r.type==="histogramy"){r.type="histogram"}if("scl"in r&&!("colorscale"in r)){r.colorscale=r.scl;delete r.scl}if("reversescl"in r&&!("reversescale"in r)){r.reversescale=r.reversescl;delete r.reversescl}if(r.xaxis)r.xaxis=D(r.xaxis,"x");if(r.yaxis)r.yaxis=D(r.yaxis,"y");if(w(r,"gl3d")&&r.scene){r.scene=L.subplotsRegistry.gl3d.cleanId(r.scene)}if(!w(r,"pie-like")&&!w(r,"bar-like")){if(Array.isArray(r.textposition)){for(n=0;n<r.textposition.length;n++){r.textposition[n]=k(r.textposition[n])}}else if(r.textposition){r.textposition=k(r.textposition)}}var o=x.getModule(r);if(o&&o.colorbar){var s=o.colorbar.container;var l=s?r[s]:r;if(l&&l.colorscale){if(l.colorscale==="YIGnBu")l.colorscale="YlGnBu";if(l.colorscale==="YIOrRd")l.colorscale="YlOrRd"}}if(r.type==="surface"&&C.isPlainObject(r.contours)){var c=["x","y","z"];for(n=0;n<c.length;n++){var u=r.contours[c[n]];if(!C.isPlainObject(u))continue;if(u.highlightColor){u.highlightcolor=u.highlightColor;delete u.highlightColor}if(u.highlightWidth){u.highlightwidth=u.highlightWidth;delete u.highlightWidth}}}if(r.type==="candlestick"||r.type==="ohlc"){var f=(r.increasing||{}).showlegend!==false;var d=(r.decreasing||{}).showlegend!==false;var h=A(r.increasing);var p=A(r.decreasing);if(h!==false&&p!==false){var v=T(h,p,f,d);if(v)r.name=v}else if((h||p)&&!r.name){r.name=h||p}}if(Array.isArray(r.transforms)){var g=r.transforms;for(n=0;n<g.length;n++){var m=g[n];if(!C.isPlainObject(m))continue;switch(m.type){case"filter":if(m.filtersrc){m.target=m.filtersrc;delete m.filtersrc}if(m.calendar){if(!m.valuecalendar){m.valuecalendar=m.calendar}delete m.calendar}break;case"groupby":m.styles=m.styles||m.style;if(m.styles&&!Array.isArray(m.styles)){var _=m.styles;var y=Object.keys(_);m.styles=[];for(var b=0;b<y.length;b++){m.styles.push({target:y[b],value:_[y[b]]})}}break}}}if(I(r,"line"))delete r.line;if("marker"in r){if(I(r.marker,"line"))delete r.marker.line;if(I(r,"marker"))delete r.marker}E.clean(r);if(r.autobinx){delete r.autobinx;delete r.xbins}if(r.autobiny){delete r.autobiny;delete r.ybins}P(r);if(r.colorbar)P(r.colorbar);if(r.marker&&r.marker.colorbar)P(r.marker.colorbar);if(r.line&&r.line.colorbar)P(r.line.colorbar);if(r.aaxis)P(r.aaxis);if(r.baxis)P(r.baxis)}};function A(e){if(!C.isPlainObject(e))return false;var t=e.name;delete e.name;delete e.showlegend;return(typeof t==="string"||typeof t==="number")&&String(t)}function T(e,t,r,n){if(r&&!n)return e;if(n&&!r)return t;if(!e.trim())return t;if(!t.trim())return e;var a=Math.min(e.length,t.length);var i;for(i=0;i<a;i++){if(e.charAt(i)!==t.charAt(i))break}var o=e.substr(0,i);return o.trim()}function k(e){var t="middle";var r="center";if(typeof e==="string"){if(e.indexOf("top")!==-1)t="top";else if(e.indexOf("bottom")!==-1)t="bottom";if(e.indexOf("left")!==-1)r="left";else if(e.indexOf("right")!==-1)r="right"}return t+" "+r}function I(e,t){return t in e&&typeof e[t]==="object"&&Object.keys(e[t]).length===0}M.swapXYData=function(e){var t;C.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]);if(Array.isArray(e.z)&&Array.isArray(e.z[0])){if(e.transpose)delete e.transpose;else e.transpose=true}if(e.error_x&&e.error_y){var r=e.error_y;var n="copy_ystyle"in r?r.copy_ystyle:!(r.color||r.thickness||r.width);C.swapAttrs(e,["error_?.copy_ystyle"]);if(n){C.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}}if(typeof e.hoverinfo==="string"){var a=e.hoverinfo.split("+");for(t=0;t<a.length;t++){if(a[t]==="x")a[t]="y";else if(a[t]==="y")a[t]="x"}e.hoverinfo=a.join("+")}};M.coerceTraceIndices=function(e,t){if(u(t)){return[t]}else if(!Array.isArray(t)||!t.length){return e.data.map(function(e,t){return t})}else if(Array.isArray(t)){var r=[];for(var n=0;n<t.length;n++){if(C.isIndex(t[n],e.data.length)){r.push(t[n])}else{C.warn("trace index (",t[n],") is not a number or is out of bounds")}}return r}return t};M.manageArrayContainers=function(e,t,r){var n=e.obj;var a=e.parts;var i=a.length;var o=a[i-1];var s=u(o);if(s&&t===null){var l=a.slice(0,i-1).join(".");var c=C.nestedProperty(n,l).get();c.splice(o,1)}else if(s&&e.get()===undefined){if(e.get()===undefined)r[e.astr]=null;e.set(t)}else{e.set(t)}};var n=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function a(e){var t=e.search(n);if(t>0)return e.substr(0,t)}M.hasParent=function(e,t){var r=a(t);while(r){if(r in e)return true;r=a(r)}return false};var d=["x","y","z"];M.clearAxisTypes=function(e,t,r){for(var n=0;n<t.length;n++){var a=e._fullData[n];for(var i=0;i<3;i++){var o=f(e,a,d[i]);if(o&&o.type!=="log"){var s=o._name;var l=o._id.substr(1);if(l.substr(0,5)==="scene"){if(r[l]!==undefined)continue;s=l+"."+s}var c=s+".type";if(r[s]===undefined&&r[c]===undefined){C.nestedProperty(e.layout,c).set(null)}}}}}},{"../components/color":100,"../lib":230,"../plots/cartesian/axis_ids":280,"../plots/plots":311,"../registry":313,"fast-isnumeric":15,"gl-mat4/fromQuat":21}],260:[function(e,t,r){"use strict";var n=e("./plot_api");r._doPlot=n._doPlot;r.newPlot=n.newPlot;r.restyle=n.restyle;r.relayout=n.relayout;r.redraw=n.redraw;r.update=n.update;r._guiRestyle=n._guiRestyle;r._guiRelayout=n._guiRelayout;r._guiUpdate=n._guiUpdate;r._storeDirectGUIEdit=n._storeDirectGUIEdit;r.react=n.react;r.extendTraces=n.extendTraces;r.prependTraces=n.prependTraces;r.addTraces=n.addTraces;r.deleteTraces=n.deleteTraces;r.moveTraces=n.moveTraces;r.purge=n.purge;r.addFrames=n.addFrames;r.deleteFrames=n.deleteFrames;r.animate=n.animate;r.setPlotConfig=n.setPlotConfig;r.toImage=e("./to_image");r.validate=e("./validate");r.downloadImage=e("../snapshot/download");var a=e("./template_api");r.makeTemplate=a.makeTemplate;r.validateTemplate=a.validateTemplate},{"../snapshot/download":315,"./plot_api":262,"./template_api":267,"./to_image":268,"./validate":269}],261:[function(e,t,r){"use strict";var n=e("../lib/is_plain_object");var E=e("../lib/noop");var D=e("../lib/loggers");var O=e("../lib/search").sorterAsc;var P=e("../registry");r.containerArrayMatch=e("./container_array_match");var I=r.isAddVal=function e(t){return t==="add"||n(t)};var R=r.isRemoveVal=function e(t){return t===null||t==="remove"};r.applyContainerArrayChanges=function e(t,r,n,a,i){var o=r.astr;var s=P.getComponentMethod(o,"supplyLayoutDefaults");var l=P.getComponentMethod(o,"draw");var c=P.getComponentMethod(o,"drawOne");var u=a.replot||a.recalc||s===E||l===E;var f=t.layout;var d=t._fullLayout;if(n[""]){if(Object.keys(n).length>1){D.warn("Full array edits are incompatible with other edits",o)}var h=n[""][""];if(R(h))r.set(null);else if(Array.isArray(h))r.set(h);else{D.warn("Unrecognized full array edit value",o,h);return true}if(u)return false;s(f,d);l(t);return true}var p=Object.keys(n).map(Number).sort(O);var v=r.get();var g=v||[];var m=i(d,o).get();var _=[];var y=-1;var b=g.length;var x;var w;var A;var T;var k;var M;var S,C;for(x=0;x<p.length;x++){A=p[x];T=n[A];k=Object.keys(T);M=T[""],S=I(M);if(A<0||A>g.length-(S?0:1)){D.warn("index out of range",o,A);continue}if(M!==undefined){if(k.length>1){D.warn("Insertion & removal are incompatible with edits to the same index.",o,A)}if(R(M)){_.push(A)}else if(S){if(M==="add")M={};g.splice(A,0,M);if(m)m.splice(A,0,{})}else{D.warn("Unrecognized full object edit value",o,A,M)}if(y===-1)y=A}else{for(w=0;w<k.length;w++){C=o+"["+A+"].";i(g[A],k[w],C).set(T[k[w]])}}}for(x=_.length-1;x>=0;x--){g.splice(_[x],1);if(m)m.splice(_[x],1)}if(!g.length)r.set(null);else if(!v)r.set(g);if(u)return false;s(f,d);if(c!==E){var L;if(y===-1){L=p}else{b=Math.max(g.length,b);L=[];for(x=0;x<p.length;x++){A=p[x];if(A>=y)break;L.push(A)}for(x=y;x<b;x++){L.push(x)}}for(x=0;x<L.length;x++){c(t,L[x])}}else l(t);return true}},{"../lib/is_plain_object":231,"../lib/loggers":234,"../lib/noop":239,"../lib/search":249,"../registry":313,"./container_array_match":257}],262:[function(e,t,E){"use strict";var T=e("@plotly/d3");var h=e("fast-isnumeric");var f=e("has-hover");var Q=e("../lib");var K=Q.nestedProperty;var k=e("../lib/events");var A=e("../lib/queue");var ee=e("../registry");var te=e("./plot_schema");var X=e("../plots/plots");var re=e("../plots/cartesian/axes");var M=e("../components/drawing");var n=e("../components/color");var S=e("../plots/cartesian/graph_interact").initInteractions;var o=e("../constants/xmlns_namespaces");var r=e("../plots/cartesian/select").clearSelect;var d=e("./plot_config").dfltConfig;var ne=e("./manage_arrays");var ae=e("./helpers");var D=e("./subroutines");var ie=e("./edit_types");var oe=e("../plots/cartesian/constants").AX_NAME_PATTERN;var C=0;var L=5;function a(a,e,t,r){var n;a=Q.getGraphDiv(a);k.init(a);if(Q.isPlainObject(e)){var i=e;e=i.data;t=i.layout;r=i.config;n=i.frames}var o=k.triggerHandler(a,"plotly_beforeplot",[e,t,r]);if(o===false)return Promise.reject();if(!e&&!t&&!Q.isPlotDiv(a)){Q.warn("Calling _doPlot as if redrawing "+"but this container doesn't yet have a plot.",a)}function s(){if(n){return E.addFrames(a,n)}}P(a,r);if(!t)t={};T.select(a).classed("js-plotly-plot",true);M.makeTester();if(!Array.isArray(a._promises))a._promises=[];var l=(a.data||[]).length===0&&Array.isArray(e);if(Array.isArray(e)){ae.cleanData(e);if(l)a.data=e;else a.data.push.apply(a.data,e);a.empty=false}if(!a.layout||l){a.layout=ae.cleanLayout(t)}X.supplyDefaults(a);var c=a._fullLayout;var u=c._has("cartesian");c._replotting=true;if(l||c._shouldCreateBgLayer){Le(a);if(c._shouldCreateBgLayer){delete c._shouldCreateBgLayer}}M.initGradients(a);M.initPatterns(a);if(l)re.saveShowSpikeInitial(a);var f=!a.calcdata||a.calcdata.length!==(a._fullData||[]).length;if(f)X.doCalcdata(a);for(var d=0;d<a.calcdata.length;d++){a.calcdata[d][0].trace=a._fullData[d]}if(a._context.responsive){if(!a._responsiveChartHandler){a._responsiveChartHandler=function(){if(!Q.isHidden(a))X.resize(a)};window.addEventListener("resize",a._responsiveChartHandler)}}else{Q.clearResponsive(a)}var h=Q.extendFlat({},c._size);var p=0;function v(){var e=c._basePlotModules;for(var t=0;t<e.length;t++){if(e[t].drawFramework){e[t].drawFramework(a)}}if(!c._glcanvas&&c._has("gl")){c._glcanvas=c._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:true,pick:false},{key:"focusLayer",context:false,pick:false},{key:"pickLayer",context:false,pick:true}],function(e){return e.key});c._glcanvas.enter().append("canvas").attr("class",function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"})}if(c._glcanvas){c._glcanvas.attr("width",c.width).attr("height",c.height);var r=c._glcanvas.data()[0].regl;if(r){if(Math.floor(c.width)!==r._gl.drawingBufferWidth||Math.floor(c.height)!==r._gl.drawingBufferHeight){var n="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(p){Q.error(n)}else{Q.log(n+" Clearing graph and plotting again.");X.cleanPlot([],{},a._fullData,c);X.supplyDefaults(a);c=a._fullLayout;X.doCalcdata(a);p++;return v()}}}}if(c.modebar.orientation==="h"){c._modebardiv.style("height",null).style("width","100%")}else{c._modebardiv.style("width",null).style("height",c.height+"px")}return X.previousPromises(a)}function g(){X.clearAutoMarginIds(a);D.drawMarginPushers(a);re.allowAutoMargin(a);if(c._has("pie")){var e=a._fullData;for(var t=0;t<e.length;t++){var r=e[t];if(r.type==="pie"&&r.automargin){X.allowAutoMargin(a,"pie."+r.uid+".automargin")}}}X.doAutoMargin(a);return X.previousPromises(a)}function m(){if(!X.didMarginChange(h,c._size))return;return Q.syncOrAsync([g,D.layoutStyles],a)}function _(){if(!f){y();return}return Q.syncOrAsync([ee.getComponentMethod("shapes","calcAutorange"),ee.getComponentMethod("annotations","calcAutorange"),y],a)}function y(){if(a._transitioning)return;D.doAutoRangeAndConstraints(a);if(l)re.saveRangeInitial(a);ee.getComponentMethod("rangeslider","calcAutorange")(a)}function b(){return re.draw(a,l?"":"redraw")}var x=[X.previousPromises,s,v,g,m];if(u)x.push(_);x.push(D.layoutStyles);if(u){x.push(b,function e(t){if(t._fullLayout._insideTickLabelsAutorange){U(t,t._fullLayout._insideTickLabelsAutorange).then(function(){t._fullLayout._insideTickLabelsAutorange=undefined})}})}x.push(D.drawData,D.finalDraw,S,X.addLinks,X.rehover,X.redrag,X.doAutoMargin,w,X.previousPromises);function w(e){if(e._fullLayout._insideTickLabelsAutorange){if(l)re.saveRangeInitial(e,true)}}var A=Q.syncOrAsync(x,a);if(!A||!A.then)A=Promise.resolve();return A.then(function(){O(a);return a})}function O(e){var t=e._fullLayout;if(t._redrawFromAutoMarginCount){t._redrawFromAutoMarginCount--}else{e.emit("plotly_afterplot")}}function i(e){return Q.extendFlat(d,e)}function p(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){Q.error(e)}}function v(e,t){var r=n.combine(t,"white");p(e,r)}function P(e,t){if(!e._context){e._context=Q.extendDeep({},d);var r=T.select("base");e._context._baseUrl=r.size()&&r.attr("href")?window.location.href.split("#")[0]:""}var n=e._context;var a,i,o;if(t){i=Object.keys(t);for(a=0;a<i.length;a++){o=i[a];if(o==="editable"||o==="edits")continue;if(o in n){if(o==="setBackground"&&t[o]==="opaque"){n[o]=v}else{n[o]=t[o]}}}if(t.plot3dPixelRatio&&!n.plotGlPixelRatio){n.plotGlPixelRatio=n.plot3dPixelRatio}var s=t.editable;if(s!==undefined){n.editable=s;i=Object.keys(n.edits);for(a=0;a<i.length;a++){n.edits[i[a]]=s}}if(t.edits){i=Object.keys(t.edits);for(a=0;a<i.length;a++){o=i[a];if(o in n.edits){n.edits[o]=t.edits[o]}}}n._exportedPlot=t._exportedPlot}if(n.staticPlot){n.editable=false;n.edits={};n.autosizable=false;n.scrollZoom=false;n.doubleClick=false;n.showTips=false;n.showLink=false;n.displayModeBar=false}if(n.displayModeBar==="hover"&&!f){n.displayModeBar=true}if(n.setBackground==="transparent"||typeof n.setBackground!=="function"){n.setBackground=p}n._hasZeroHeight=n._hasZeroHeight||e.clientHeight===0;n._hasZeroWidth=n._hasZeroWidth||e.clientWidth===0;var l=n.scrollZoom;var c=n._scrollZoom={};if(l===true){c.cartesian=1;c.gl3d=1;c.geo=1;c.mapbox=1}else if(typeof l==="string"){var u=l.split("+");for(a=0;a<u.length;a++){c[u[a]]=1}}else if(l!==false){c.gl3d=1;c.geo=1;c.mapbox=1}}function s(e){e=Q.getGraphDiv(e);if(!Q.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e)}ae.cleanData(e.data);ae.cleanLayout(e.layout);e.calcdata=undefined;return E._doPlot(e).then(function(){e.emit("plotly_redraw");return e})}function l(e,t,r,n){e=Q.getGraphDiv(e);X.cleanPlot([],{},e._fullData||[],e._fullLayout||{});X.purge(e);return E._doPlot(e,t,r,n)}function g(e,t){var r=t+1;var n=[];var a;var i;for(a=0;a<e.length;a++){i=e[a];if(i<0){n.push(r+i)}else{n.push(i)}}return n}function u(e,t,r){var n,a;for(n=0;n<t.length;n++){a=t[n];if(a!==parseInt(a,10)){throw new Error("all values in "+r+" must be integers")}if(a>=e.data.length||a<-e.data.length){throw new Error(r+" must be valid indices for gd.data.")}if(t.indexOf(a,n+1)>-1||a>=0&&t.indexOf(-e.data.length+a)>-1||a<0&&t.indexOf(e.data.length+a)>-1){throw new Error("each index in "+r+" must be unique.")}}}function m(e,t,r){if(!Array.isArray(e.data)){throw new Error("gd.data must be an array.")}if(typeof t==="undefined"){throw new Error("currentIndices is a required argument.")}else if(!Array.isArray(t)){t=[t]}u(e,t,"currentIndices");if(typeof r!=="undefined"&&!Array.isArray(r)){r=[r]}if(typeof r!=="undefined"){u(e,r,"newIndices")}if(typeof r!=="undefined"&&t.length!==r.length){throw new Error("current and new indices must be of equal length.")}}function _(e,t,r){var n,a;if(!Array.isArray(e.data)){throw new Error("gd.data must be an array.")}if(typeof t==="undefined"){throw new Error("traces must be defined.")}if(!Array.isArray(t)){t=[t]}for(n=0;n<t.length;n++){a=t[n];if(typeof a!=="object"||(Array.isArray(a)||a===null)){throw new Error("all values in traces array must be non-array objects")}}if(typeof r!=="undefined"&&!Array.isArray(r)){r=[r]}if(typeof r!=="undefined"&&r.length!==t.length){throw new Error("if indices is specified, traces.length must equal indices.length")}}function y(e,t,r,n){var a=Q.isPlainObject(n);if(!Array.isArray(e.data)){throw new Error("gd.data must be an array")}if(!Q.isPlainObject(t)){throw new Error("update must be a key:value object")}if(typeof r==="undefined"){throw new Error("indices must be an integer or array of integers")}u(e,r,"indices");for(var i in t){if(!Array.isArray(t[i])||t[i].length!==r.length){throw new Error("attribute "+i+" must be an array of length equal to indices array length")}if(a&&(!(i in n)||!Array.isArray(n[i])||n[i].length!==t[i].length)){throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 "+"corrispondence with the keys and number of traces in the update object")}}}function b(e,t,r,n){var a=Q.isPlainObject(n);var i=[];var o,s,l,c,u;if(!Array.isArray(r))r=[r];r=g(r,e.data.length-1);for(var f in t){for(var d=0;d<r.length;d++){o=e.data[r[d]];l=K(o,f);s=l.get();c=t[f][d];if(!Q.isArrayOrTypedArray(c)){throw new Error("attribute: "+f+" index: "+d+" must be an array")}if(!Q.isArrayOrTypedArray(s)){throw new Error("cannot extend missing or non-array attribute: "+f)}if(s.constructor!==c.constructor){throw new Error("cannot extend array with an array of a different type: "+f)}u=a?n[f][d]:n;if(!h(u))u=-1;i.push({prop:l,target:s,insert:c,maxp:Math.floor(u)})}}return i}function c(e,t,r,n,a){y(e,t,r,n);var i=b(e,t,r,n);var o={};var s={};for(var l=0;l<i.length;l++){var c=i[l].prop;var u=i[l].maxp;var f=a(i[l].target,i[l].insert,u);c.set(f[0]);if(!Array.isArray(o[c.astr]))o[c.astr]=[];o[c.astr].push(f[1]);if(!Array.isArray(s[c.astr]))s[c.astr]=[];s[c.astr].push(i[l].target.length)}return{update:o,maxPoints:s}}function x(e,t){var r=new e.constructor(e.length+t.length);r.set(e);r.set(t,e.length);return r}function w(e,t,r,n){e=Q.getGraphDiv(e);function a(e,t,r){var n,a;if(Q.isTypedArray(e)){if(r<0){var i=new e.constructor(0);var o=x(e,t);if(r<0){n=o;a=i}else{n=i;a=o}}else{n=new e.constructor(r);a=new e.constructor(e.length+t.length-r);if(r===t.length){n.set(t);a.set(e)}else if(r<t.length){var s=t.length-r;n.set(t.subarray(s));a.set(e);a.set(t.subarray(0,s),e.length)}else{var l=r-t.length;var c=e.length-l;n.set(e.subarray(c));n.set(t,l);a.set(e.subarray(0,c))}}}else{n=e.concat(t);a=r>=0&&r<n.length?n.splice(0,n.length-r):[]}return[n,a]}var i=c(e,t,r,n,a);var o=E.redraw(e);var s=[e,i.update,r,i.maxPoints];A.add(e,E.prependTraces,s,w,arguments);return o}function I(e,t,r,n){e=Q.getGraphDiv(e);function a(e,t,r){var n,a;if(Q.isTypedArray(e)){if(r<=0){var i=new e.constructor(0);var o=x(t,e);if(r<0){n=o;a=i}else{n=i;a=o}}else{n=new e.constructor(r);a=new e.constructor(e.length+t.length-r);if(r===t.length){n.set(t);a.set(e)}else if(r<t.length){var s=t.length-r;n.set(t.subarray(0,s));a.set(t.subarray(s));a.set(e,s)}else{var l=r-t.length;n.set(t);n.set(e.subarray(0,l),t.length);a.set(e.subarray(l))}}}else{n=t.concat(e);a=r>=0&&r<n.length?n.splice(r,n.length):[]}return[n,a]}var i=c(e,t,r,n,a);var o=E.redraw(e);var s=[e,i.update,r,i.maxPoints];A.add(e,E.extendTraces,s,I,arguments);return o}function R(t,r,e){t=Q.getGraphDiv(t);var n=[];var a=E.deleteTraces;var i=R;var o=[t,n];var s=[t,r];var l;var c;_(t,r,e);if(!Array.isArray(r)){r=[r]}r=r.map(function(e){return Q.extendFlat({},e)});ae.cleanData(r);for(l=0;l<r.length;l++){t.data.push(r[l])}for(l=0;l<r.length;l++){n.push(-r.length+l)}if(typeof e==="undefined"){c=E.redraw(t);A.add(t,a,o,i,s);return c}if(!Array.isArray(e)){e=[e]}try{m(t,n,e)}catch(e){t.data.splice(t.data.length-r.length,r.length);throw e}A.startSequence(t);A.add(t,a,o,i,s);c=E.moveTraces(t,n,e);A.stopSequence(t);return c}function z(e,t){e=Q.getGraphDiv(e);var r=[];var n=E.addTraces;var a=z;var i=[e,r,t];var o=[e,t];var s;var l;if(typeof t==="undefined"){throw new Error("indices must be an integer or array of integers.")}else if(!Array.isArray(t)){t=[t]}u(e,t,"indices");t=g(t,e.data.length-1);t.sort(Q.sorterDes);for(s=0;s<t.length;s+=1){l=e.data.splice(t[s],1)[0];r.push(l)}var c=E.redraw(e);A.add(e,n,i,a,o);return c}function N(e,t,r){e=Q.getGraphDiv(e);var n=[];var a=[];var i=N;var o=N;var s=[e,r,t];var l=[e,t,r];var c;m(e,t,r);t=Array.isArray(t)?t:[t];if(typeof r==="undefined"){r=[];for(c=0;c<t.length;c++){r.push(-t.length+c)}}r=Array.isArray(r)?r:[r];t=g(t,e.data.length-1);r=g(r,e.data.length-1);for(c=0;c<e.data.length;c++){if(t.indexOf(c)===-1){n.push(e.data[c])}}for(c=0;c<t.length;c++){a.push({newIndex:r[c],trace:e.data[t[c]]})}a.sort(function(e,t){return e.newIndex-t.newIndex});for(c=0;c<a.length;c+=1){n.splice(a[c].newIndex,0,a[c].trace)}e.data=n;var u=E.redraw(e);A.add(e,i,s,o,l);return u}function F(e,t,r,n){e=Q.getGraphDiv(e);ae.clearPromiseQueue(e);var a={};if(typeof t==="string")a[t]=r;else if(Q.isPlainObject(t)){a=Q.extendFlat({},t);if(n===undefined)n=r}else{Q.warn("Restyle fail.",t,r,n);return Promise.reject()}if(Object.keys(a).length)e.changed=true;var i=ae.coerceTraceIndices(e,n);var o=H(e,a,i);var s=o.flags;if(s.calc)e.calcdata=undefined;if(s.clearAxisTypes)ae.clearAxisTypes(e,i,{});var l=[];if(s.fullReplot){l.push(E._doPlot)}else{l.push(X.previousPromises);X.supplyDefaults(e);if(s.markerSize){X.doCalcdata(e);q(l)}if(s.style)l.push(D.doTraceStyle);if(s.colorbars)l.push(D.doColorBars);l.push(O)}l.push(X.rehover,X.redrag);A.add(e,F,[e,o.undoit,o.traces],F,[e,o.redoit,o.traces]);var c=Q.syncOrAsync(l,e);if(!c||!c.then)c=Promise.resolve();return c.then(function(){e.emit("plotly_restyle",o.eventData);return e})}function se(e){if(e===undefined)return null;return e}function le(o,e){if(!e)return K;return function(e,r,n){var a=K(e,r);var i=a.set;a.set=function(e){var t=(n||"")+r;j(t,a.get(),e,o);i(e)};return a}}function j(e,t,r,n){if(Array.isArray(t)||Array.isArray(r)){var a=Array.isArray(t)?t:[];var i=Array.isArray(r)?r:[];var o=Math.max(a.length,i.length);for(var s=0;s<o;s++){j(e+"["+s+"]",a[s],i[s],n)}}else if(Q.isPlainObject(t)||Q.isPlainObject(r)){var l=Q.isPlainObject(t)?t:{};var c=Q.isPlainObject(r)?r:{};var u=Q.extendFlat({},l,c);for(var f in u){j(e+"."+f,l[f],c[f],n)}}else if(n[e]===undefined){n[e]=se(t)}}function B(e,t,r){for(var n in r){var a=K(e,n);j(n,a.get(),r[n],t)}}function H(o,s,l){var c=o._fullLayout;var n=o._fullData;var u=o.data;var f=c._guiEditing;var d=le(c._preGUI,f);var e=Q.extendDeepAll({},s);var t;ce(s);var r=ie.traceFlags();var a={};var h={};var i;function p(){return l.map(function(){return undefined})}function v(e){var t=re.id2name(e);if(i.indexOf(t)===-1)i.push(t)}function g(e){return"LAYOUT"+e+".autorange"}function m(e){return"LAYOUT"+e+".range"}function _(e){for(var t=e;t<n.length;t++){if(n[t]._input===u[e])return n[t]}}function y(e,t,r){if(Array.isArray(e)){e.forEach(function(e){y(e,t,r)});return}if(e in s||ae.hasParent(s,e))return;var n;if(e.substr(0,6)==="LAYOUT"){n=d(o.layout,e.replace("LAYOUT",""))}else{var a=l[r];var i=c._tracePreGUI[_(a)._fullInput.uid];n=le(i,f)(u[a],e)}if(!(e in h)){h[e]=p()}if(h[e][r]===undefined){h[e][r]=se(n.get())}if(t!==undefined){n.set(t)}}function b(t){return function(e){return n[e][t]}}function x(r){return function(e,t){return e===false?n[l[t]][r]:null}}for(var w in s){if(ae.hasParent(s,w)){throw new Error("cannot set "+w+" and a parent attribute simultaneously")}var A=s[w];var T;var k;var M;var S;var C;var L;if(w==="autobinx"||w==="autobiny"){w=w.charAt(w.length-1)+"bins";if(Array.isArray(A))A=A.map(x(w));else if(A===false)A=l.map(b(w));else A=null}a[w]=A;if(w.substr(0,6)==="LAYOUT"){M=d(o.layout,w.replace("LAYOUT",""));h[w]=[se(M.get())];M.set(Array.isArray(A)?A[0]:A);r.calc=true;continue}h[w]=p();for(t=0;t<l.length;t++){T=u[l[t]];k=_(l[t]);var E=c._tracePreGUI[k._fullInput.uid];M=le(E,f)(T,w);S=M.get();C=Array.isArray(A)?A[t%A.length]:A;if(C===undefined)continue;var D=M.parts[M.parts.length-1];var O=w.substr(0,w.length-D.length-1);var P=O?O+".":"";var I=O?K(k,O).get():k;L=te.getTraceValObject(k,M.parts);if(L&&L.impliedEdits&&C!==null){for(var R in L.impliedEdits){y(Q.relativeAttr(w,R),L.impliedEdits[R],t)}}else if((D==="thicknessmode"||D==="lenmode")&&S!==C&&(C==="fraction"||C==="pixels")&&I){var z=c._size;var N=I.orient;var F=N==="top"||N==="bottom";if(D==="thicknessmode"){var j=F?z.h:z.w;y(P+"thickness",I.thickness*(C==="fraction"?1/j:j),t)}else{var B=F?z.w:z.h;y(P+"len",I.len*(C==="fraction"?1/B:B),t)}}else if(w==="type"&&(C==="pie"!==(S==="pie")||C==="funnelarea"!==(S==="funnelarea"))){var H="x";var U="y";if((C==="bar"||S==="bar")&&T.orientation==="h"){H="y";U="x"}Q.swapAttrs(T,["?","?src"],"labels",H);Q.swapAttrs(T,["d?","?0"],"label",H);Q.swapAttrs(T,["?","?src"],"values",U);if(S==="pie"||S==="funnelarea"){K(T,"marker.color").set(K(T,"marker.colors").get());c._pielayer.selectAll("g.trace").remove()}else if(ee.traceIs(T,"cartesian")){K(T,"marker.colors").set(K(T,"marker.color").get())}}h[w][t]=se(S);var V=["swapxy","swapxyaxes","orientation","orientationaxes"];if(V.indexOf(w)!==-1){if(w==="orientation"){M.set(C);var q=T.x&&!T.y?"h":"v";if((M.get()||q)===k.orientation){continue}}else if(w==="orientationaxes"){T.orientation={v:"h",h:"v"}[k.orientation]}ae.swapXYData(T);r.calc=r.clearAxisTypes=true}else if(X.dataArrayContainers.indexOf(M.parts[0])!==-1){ae.manageArrayContainers(M,C,h);r.calc=true}else{if(L){if(L.arrayOk&&!ee.traceIs(k,"regl")&&(Q.isArrayOrTypedArray(C)||Q.isArrayOrTypedArray(S))){r.calc=true}else ie.update(r,L)}else{r.calc=true}M.set(C)}}if(["swapxyaxes","orientationaxes"].indexOf(w)!==-1){re.swap(o,l)}if(w==="orientationaxes"){var Y=K(o.layout,"hovermode");var G=Y.get();if(G==="x"){Y.set("y")}else if(G==="y"){Y.set("x")}else if(G==="x unified"){Y.set("y unified")}else if(G==="y unified"){Y.set("x unified")}}if(["orientation","type"].indexOf(w)!==-1){i=[];for(t=0;t<l.length;t++){var W=u[l[t]];if(ee.traceIs(W,"cartesian")){v(W.xaxis||"x");v(W.yaxis||"y")}}y(i.map(g),true,0);y(i.map(m),[0,1],0)}}if(r.calc||r.plot){r.fullReplot=true}return{flags:r,undoit:h,redoit:a,traces:l,eventData:Q.extendDeepNoArrays([],[e,l])}}function ce(r){var e=Q.counterRegex("axis",".title",false,false);var t=/colorbar\.title$/;var n=Object.keys(r);var a,i,o;for(a=0;a<n.length;a++){i=n[a];o=r[i];if((i==="title"||e.test(i)||t.test(i))&&(typeof o==="string"||typeof o==="number")){s(i,i.replace("title","title.text"))}else if(i.indexOf("titlefont")>-1){s(i,i.replace("titlefont","title.font"))}else if(i.indexOf("titleposition")>-1){s(i,i.replace("titleposition","title.position"))}else if(i.indexOf("titleside")>-1){s(i,i.replace("titleside","title.side"))}else if(i.indexOf("titleoffset")>-1){s(i,i.replace("titleoffset","title.offset"))}}function s(e,t){r[t]=r[e];delete r[e]}}function U(e,t,r){e=Q.getGraphDiv(e);ae.clearPromiseQueue(e);var n={};if(typeof t==="string"){n[t]=r}else if(Q.isPlainObject(t)){n=Q.extendFlat({},t)}else{Q.warn("Relayout fail.",t,r);return Promise.reject()}if(Object.keys(n).length)e.changed=true;var a=Y(e,n);var i=a.flags;if(i.calc)e.calcdata=undefined;var o=[X.previousPromises];if(i.layoutReplot){o.push(D.layoutReplot)}else if(Object.keys(n).length){V(e,i,a)||X.supplyDefaults(e);if(i.legend)o.push(D.doLegend);if(i.layoutstyle)o.push(D.layoutStyles);if(i.axrange)q(o,a.rangesAltered);if(i.ticks)o.push(D.doTicksRelayout);if(i.modebar)o.push(D.doModeBar);if(i.camera)o.push(D.doCamera);if(i.colorbars)o.push(D.doColorBars);o.push(O)}o.push(X.rehover,X.redrag);A.add(e,U,[e,a.undoit],U,[e,a.redoit]);var s=Q.syncOrAsync(o,e);if(!s||!s.then)s=Promise.resolve(e);return s.then(function(){e.emit("plotly_relayout",a.eventData);return e})}function V(e,t,r){var n=e._fullLayout;if(!t.axrange)return false;for(var a in t){if(a!=="axrange"&&t[a])return false}for(var i in r.rangesAltered){var o=re.id2name(i);var s=e.layout[o];var l=n[o];l.autorange=s.autorange;if(s.range){l.range=s.range.slice()}l.cleanRange();if(l._matchGroup){for(var c in l._matchGroup){if(c!==i){var u=n[re.id2name(c)];u.autorange=l.autorange;u.range=l.range.slice();u._input.range=l.range.slice()}}}}return true}function q(e,o){var t=o?function(e){var t=[];var r=true;for(var n in o){var a=re.getFromId(e,n);t.push(n);if((a.ticklabelposition||"").indexOf("inside")!==-1){if(a._anchorAxis){t.push(a._anchorAxis._id)}}if(a._matchGroup){for(var i in a._matchGroup){if(!o[i]){t.push(i)}}}if(a.automargin)r=false}return re.draw(e,t,{skipTitle:r})}:function(e){return re.draw(e,"redraw")};e.push(r,D.doAutoRangeAndConstraints,t,D.drawData,D.finalDraw)}var ue=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/;var fe=/^[xyz]axis[0-9]*\.autorange$/;var de=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function Y(e,n){var a=e.layout;var t=e._fullLayout;var r=t._guiEditing;var i=le(t._preGUI,r);var o=Object.keys(n);var s=re.list(e);var l=Q.extendDeepAll({},n);var c={};var u,f,d;ce(n);o=Object.keys(n);for(f=0;f<o.length;f++){if(o[f].indexOf("allaxes")===0){for(d=0;d<s.length;d++){var h=s[d]._id.substr(1);var p=h.indexOf("scene")!==-1?h+".":"";var v=o[f].replace("allaxes",p+s[d]._name);if(!n[v])n[v]=n[o[f]]}delete n[o[f]]}}var g=ie.layoutFlags();var m={};var _={};function y(e,t){if(Array.isArray(e)){e.forEach(function(e){y(e,t)});return}if(e in n||ae.hasParent(n,e))return;var r=i(a,e);if(!(e in _)){_[e]=se(r.get())}if(t!==undefined)r.set(t)}var b={};var x;function w(e){var t=re.name2id(e.split(".")[0]);b[t]=1;return t}for(var A in n){if(ae.hasParent(n,A)){throw new Error("cannot set "+A+" and a parent attribute simultaneously")}var T=i(a,A);var k=n[A];var M=T.parts.length;var S=M-1;while(S>0&&typeof T.parts[S]!=="string")S--;var C=T.parts[S];var L=T.parts[S-1]+"."+C;var E=T.parts.slice(0,S).join(".");var D=K(e.layout,E).get();var O=K(t,E).get();var P=T.get();if(k===undefined)continue;m[A]=k;_[A]=C==="reverse"?k:se(P);var I=te.getLayoutValObject(t,T.parts);if(I&&I.impliedEdits&&k!==null){for(var R in I.impliedEdits){y(Q.relativeAttr(A,R),I.impliedEdits[R])}}if(["width","height"].indexOf(A)!==-1){if(k){y("autosize",null);var z=A==="height"?"width":"height";y(z,t[z])}else{t[A]=e._initialAutoSize[A]}}else if(A==="autosize"){y("width",k?null:t.width);y("height",k?null:t.height)}else if(L.match(ue)){w(L);K(t,E+"._inputRange").set(null)}else if(L.match(fe)){w(L);K(t,E+"._inputRange").set(null);var N=K(t,E).get();if(N._inputDomain){N._input.domain=N._inputDomain.slice()}}else if(L.match(de)){K(t,E+"._inputDomain").set(null)}if(C==="type"){x=D;var F=O.type==="linear"&&k==="log";var j=O.type==="log"&&k==="linear";if(F||j){if(!x||!x.range){y(E+".autorange",true)}else if(!O.autorange){var B=x.range[0];var H=x.range[1];if(F){if(B<=0&&H<=0){y(E+".autorange",true)}if(B<=0)B=H/1e6;else if(H<=0)H=B/1e6;y(E+".range[0]",Math.log(B)/Math.LN10);y(E+".range[1]",Math.log(H)/Math.LN10)}else{y(E+".range[0]",Math.pow(10,B));y(E+".range[1]",Math.pow(10,H))}}else if(F){x.range=x.range[1]>x.range[0]?[1,2]:[2,1]}if(Array.isArray(t._subplots.polar)&&t._subplots.polar.length&&t[T.parts[0]]&&T.parts[1]==="radialaxis"){delete t[T.parts[0]]._subplot.viewInitial["radialaxis.range"]}ee.getComponentMethod("annotations","convertCoords")(e,O,k,y);ee.getComponentMethod("images","convertCoords")(e,O,k,y)}else{y(E+".autorange",true);y(E+".range",null)}K(t,E+"._inputRange").set(null)}else if(C.match(oe)){var U=K(t,A).get();var V=(k||{}).type;if(!V||V==="-")V="linear";ee.getComponentMethod("annotations","convertCoords")(e,U,V,y);ee.getComponentMethod("images","convertCoords")(e,U,V,y)}var q=ne.containerArrayMatch(A);if(q){u=q.array;f=q.index;var Y=q.property;var G=I||{editType:"calc"};if(f!==""&&Y===""){if(ne.isAddVal(k)){_[A]=null}else if(ne.isRemoveVal(k)){_[A]=(K(a,u).get()||[])[f]}else{Q.warn("unrecognized full object value",n)}}ie.update(g,G);if(!c[u])c[u]={};var W=c[u][f];if(!W)W=c[u][f]={};W[Y]=k;delete n[A]}else if(C==="reverse"){if(D.range)D.range.reverse();else{y(E+".autorange",true);D.range=[1,0]}if(O.autorange)g.calc=true;else g.plot=true}else{if(t._has("scatter-like")&&t._has("regl")&&(A==="dragmode"&&(k==="lasso"||k==="select")&&!(P==="lasso"||P==="select"))){g.plot=true}else if(t._has("gl2d")){g.plot=true}else if(I)ie.update(g,I);else g.calc=true;T.set(k)}}for(u in c){var X=ne.applyContainerArrayChanges(e,i(a,u),c[u],g,i);if(!X)g.plot=true}for(var Z in b){x=re.getFromId(e,Z);var J=x&&x._constraintGroup;if(J){g.calc=true;for(var $ in J){if(!b[$]){re.getFromId(e,$)._constraintShrinkable=true}}}}if(he(e)||n.height||n.width)g.plot=true;if(g.plot||g.calc){g.layoutReplot=true}return{flags:g,rangesAltered:b,undoit:_,redoit:m,eventData:l}}function he(e){var t=e._fullLayout;var r=t.width;var n=t.height;if(e.layout.autosize)X.plotAutoSize(e,e.layout,t);return t.width!==r||t.height!==n}function G(e,t,r,n){e=Q.getGraphDiv(e);ae.clearPromiseQueue(e);if(!Q.isPlainObject(t))t={};if(!Q.isPlainObject(r))r={};if(Object.keys(t).length)e.changed=true;if(Object.keys(r).length)e.changed=true;var a=ae.coerceTraceIndices(e,n);var i=H(e,Q.extendFlat({},t),a);var o=i.flags;var s=Y(e,Q.extendFlat({},r));var l=s.flags;if(o.calc||l.calc)e.calcdata=undefined;if(o.clearAxisTypes)ae.clearAxisTypes(e,a,r);var c=[];if(l.layoutReplot){c.push(D.layoutReplot)}else if(o.fullReplot){c.push(E._doPlot)}else{c.push(X.previousPromises);V(e,l,s)||X.supplyDefaults(e);if(o.style)c.push(D.doTraceStyle);if(o.colorbars||l.colorbars)c.push(D.doColorBars);if(l.legend)c.push(D.doLegend);if(l.layoutstyle)c.push(D.layoutStyles);if(l.axrange)q(c,s.rangesAltered);if(l.ticks)c.push(D.doTicksRelayout);if(l.modebar)c.push(D.doModeBar);if(l.camera)c.push(D.doCamera);c.push(O)}c.push(X.rehover,X.redrag);A.add(e,G,[e,i.undoit,s.undoit,i.traces],G,[e,i.redoit,s.redoit,i.traces]);var u=Q.syncOrAsync(c,e);if(!u||!u.then)u=Promise.resolve(e);return u.then(function(){e.emit("plotly_update",{data:i.eventData,layout:s.eventData});return e})}function W(n){return function e(t){t._fullLayout._guiEditing=true;var r=n.apply(null,arguments);t._fullLayout._guiEditing=false;return r}}var Z=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}];var J=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];var a=e.match(n.pattern);if(a){return{head:a[1],attr:n.attr}}}}function pe(e,t){var r=K(t,e).get();if(r!==undefined)return r;var n=e.split(".");n.pop();while(n.length>1){n.pop();r=K(t,n.join(".")+".uirevision").get();if(r!==undefined)return r}return t.uirevision}function ve(e,t){for(var r=0;r<t.length;r++){if(t[r]._fullInput.uid===e)return r}return-1}function ge(e,t,r){for(var n=0;n<t.length;n++){if(t[n].uid===e)return n}return!t[r]||t[r].uid?-1:r}function me(e,t){var r=Q.isPlainObject(e);var n=Array.isArray(e);if(r||n){return(r&&Q.isPlainObject(t)||n&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t)}return e===t}function _e(e,t,r,n){var a=n._preGUI;var i,o,s,l,c,u,f,d;var h=[];var p={};for(i in a){c=$(i,Z);if(c){o=c.attr||c.head+".uirevision";s=K(n,o).get();l=s&&pe(o,t);if(l&&l===s){u=a[i];if(u===null)u=undefined;f=K(t,i);d=f.get();if(me(d,u)){if(d===undefined&&i.substr(i.length-9)==="autorange"){h.push(i.substr(0,i.length-10))}f.set(se(K(n,i).get()));continue}}}else{Q.warn("unrecognized GUI edit: "+i)}delete a[i];if(i.substr(i.length-8,6)==="range["){p[i.substr(0,i.length-9)]=1}}for(var v=0;v<h.length;v++){var g=h[v];if(p[g]){var m=K(t,g).get();if(m)delete m.autorange}}var _=n._tracePreGUI;for(var y in _){var b=_[y];var x=null;var w;for(i in b){if(!x){var A=ve(y,r);if(A<0){delete _[y];break}var T=r[A];w=T._fullInput;var k=ge(y,e,w.index);if(k<0){delete _[y];break}x=e[k]}c=$(i,J);if(c){if(c.attr){s=K(n,c.attr).get();l=s&&pe(c.attr,t)}else{s=w.uirevision;l=x.uirevision;if(l===undefined)l=t.uirevision}if(l&&l===s){u=b[i];if(u===null)u=undefined;f=K(x,i);d=f.get();if(me(d,u)){f.set(se(K(w,i).get()));continue}}}else{Q.warn("unrecognized GUI edit: "+i+" in trace uid "+y)}delete b[i]}}}function ye(e,t,r,n){var a,i;function o(){return E.addFrames(e,a)}e=Q.getGraphDiv(e);ae.clearPromiseQueue(e);var s=e._fullData;var l=e._fullLayout;if(!Q.isPlotDiv(e)||!s||!l){i=E.newPlot(e,t,r,n)}else{if(Q.isPlainObject(t)){var c=t;t=c.data;r=c.layout;n=c.config;a=c.frames}var u=false;if(n){var f=Q.extendDeep({},e._context);e._context=undefined;P(e,n);u=Ae(f,e._context)}e.data=t||[];ae.cleanData(e.data);e.layout=r||{};ae.cleanLayout(e.layout);_e(e.data,e.layout,s,l);X.supplyDefaults(e,{skipUpdateCalc:true});var d=e._fullData;var h=e._fullLayout;var p=h.datarevision===undefined;var v=h.transition;var g=xe(e,l,h,p,v);var m=g.newDataRevision;var _=be(e,s,d,p,v,m);if(he(e))g.layoutReplot=true;if(_.calc||g.calc){e.calcdata=undefined;var y=Object.getOwnPropertyNames(h);for(var b=0;b<y.length;b++){var x=y[b];var w=x.substring(0,5);if(w==="xaxis"||w==="yaxis"){var A=h[x]._emptyCategories;if(A)A()}}}else{X.supplyDefaultsUpdateCalc(e.calcdata,d)}var T=[];if(a){e._transitionData={};X.createTransitionData(e);T.push(o)}if(h.transition&&!u&&(_.anim||g.anim)){if(g.ticks)T.push(D.doTicksRelayout);X.doCalcdata(e);D.doAutoRangeAndConstraints(e);T.push(function(){return X.transitionFromReact(e,_,g,l)})}else if(_.fullReplot||g.layoutReplot||u){e._fullLayout._skipDefaults=true;T.push(E._doPlot)}else{for(var k in g.arrays){var M=g.arrays[k];if(M.length){var S=ee.getComponentMethod(k,"drawOne");if(S!==Q.noop){for(var C=0;C<M.length;C++){S(e,M[C])}}else{var L=ee.getComponentMethod(k,"draw");if(L===Q.noop){throw new Error("cannot draw components: "+k)}L(e)}}}T.push(X.previousPromises);if(_.style)T.push(D.doTraceStyle);if(_.colorbars||g.colorbars)T.push(D.doColorBars);if(g.legend)T.push(D.doLegend);if(g.layoutstyle)T.push(D.layoutStyles);if(g.axrange)q(T);if(g.ticks)T.push(D.doTicksRelayout);if(g.modebar)T.push(D.doModeBar);if(g.camera)T.push(D.doCamera);T.push(O)}T.push(X.rehover,X.redrag);i=Q.syncOrAsync(T,e);if(!i||!i.then)i=Promise.resolve(e)}return i.then(function(){e.emit("plotly_react",{data:t,layout:r});return e})}function be(e,t,r,n,a,i){var o=t.length===r.length;if(!a&&!o){return{fullReplot:true,calc:true}}var s=ie.traceFlags();s.arrays={};s.nChanges=0;s.nChangesAnim=0;var l,c;function u(e){var t=te.getTraceValObject(c,e);if(!c._module.animatable&&t.anim){t.anim=false}return t}var f={getValObject:u,flags:s,immutable:n,transition:a,newDataRevision:i,gd:e};var d={};for(l=0;l<t.length;l++){if(r[l]){c=r[l]._fullInput;if(X.hasMakesDataTransform(c))c=r[l];if(d[c.uid])continue;d[c.uid]=1;we(t[l]._fullInput,c,[],f)}}if(s.calc||s.plot){s.fullReplot=true}if(a&&s.nChanges&&s.nChangesAnim){s.anim=s.nChanges===s.nChangesAnim&&o?"all":"some"}return s}function xe(e,t,r,n,a){var i=ie.layoutFlags();i.arrays={};i.rangesAltered={};i.nChanges=0;i.nChangesAnim=0;function o(e){return te.getLayoutValObject(r,e)}var s={getValObject:o,flags:i,immutable:n,transition:a,gd:e};we(t,r,[],s);if(i.plot||i.calc){i.layoutReplot=true}if(a&&i.nChanges&&i.nChangesAnim){i.anim=i.nChanges===i.nChangesAnim?"all":"some"}return i}function we(e,t,r,n){var a,i,o;var s=n.getValObject;var l=n.flags;var c=n.immutable;var u=n.inArray;var f=n.arrayIndex;function d(){var e=a.editType;if(u&&e.indexOf("arraydraw")!==-1){Q.pushUnique(l.arrays[u],f);return}ie.update(l,a);if(e!=="none"){l.nChanges++}if(n.transition&&a.anim){l.nChangesAnim++}if(ue.test(o)||fe.test(o)){l.rangesAltered[r[0]]=1}if(de.test(o)){K(t,"_inputDomain").set(null)}if(i==="datarevision"){l.newDataRevision=1}}function h(e){return e.valType==="data_array"||e.arrayOk}for(i in e){if(l.calc&&!n.transition)return;var p=e[i];var v=t[i];var g=r.concat(i);o=g.join(".");if(i.charAt(0)==="_"||typeof p==="function"||p===v)continue;if((i==="tick0"||i==="dtick")&&r[0]!=="geo"){var m=t.tickmode;if(m==="auto"||m==="array"||!m)continue}if(i==="range"&&t.autorange)continue;if((i==="zmin"||i==="zmax")&&t.type==="contourcarpet")continue;a=s(g);if(!a)continue;if(a._compareAsJSON&&JSON.stringify(p)===JSON.stringify(v))continue;var _=a.valType;var y;var b=h(a);var x=Array.isArray(p);var w=Array.isArray(v);if(x&&w){var A="_input_"+i;var T=e[A];var k=t[A];if(Array.isArray(T)&&T===k)continue}if(v===undefined){if(b&&x)l.calc=true;else d()}else if(a._isLinkedToArray){var M=[];var S=false;if(!u)l.arrays[i]=M;var C=Math.min(p.length,v.length);var L=Math.max(p.length,v.length);if(C!==L){if(a.editType==="arraydraw"){S=true}else{d();continue}}for(y=0;y<C;y++){we(p[y],v[y],g.concat(y),Q.extendFlat({inArray:i,arrayIndex:y},n))}if(S){for(y=C;y<L;y++){M.push(y)}}}else if(!_&&Q.isPlainObject(p)){we(p,v,g,n)}else if(b){if(x&&w){if(c){l.calc=true}if(c||n.newDataRevision){d()}}else if(x!==w){l.calc=true}else d()}else if(x&&w){if(p.length!==v.length||String(p)!==String(v)){d()}}else{d()}}for(i in t){if(!(i in e||i.charAt(0)==="_"||typeof t[i]==="function")){a=s(r.concat(i));if(h(a)&&Array.isArray(t[i])){l.calc=true;return}else d()}}}function Ae(e,t){var r;for(r in e){if(r.charAt(0)==="_")continue;var n=e[r];var a=t[r];if(n!==a){if(Q.isPlainObject(n)&&Q.isPlainObject(a)){if(Ae(n,a)){return true}}else if(Array.isArray(n)&&Array.isArray(a)){if(n.length!==a.length){return true}for(var i=0;i<n.length;i++){if(n[i]!==a[i]){if(Q.isPlainObject(n[i])&&Q.isPlainObject(a[i])){if(Ae(n[i],a[i])){return true}}else{return true}}}}else{return true}}}}function Te(y,b,x){y=Q.getGraphDiv(y);if(!Q.isPlotDiv(y)){throw new Error("This element is not a Plotly plot: "+y+". It's likely that you've failed "+"to create a plot before animating it. For more details, see "+"https://plotly.com/javascript/animations/")}var w=y._transitionData;if(!w._frameQueue){w._frameQueue=[]}x=X.supplyAnimationDefaults(x);var A=x.transition;var t=x.frame;if(w._frameWaitingCnt===undefined){w._frameWaitingCnt=0}function T(e){if(Array.isArray(A)){if(e>=A.length){return A[0]}else{return A[e]}}else{return A}}function k(e){if(Array.isArray(t)){if(e>=t.length){return t[0]}else{return t[e]}}else{return t}}function M(e,t){var r=0;return function(){if(e&&++r===t){return e()}}}return new Promise(function(o,s){function e(){if(w._frameQueue.length===0){return}while(w._frameQueue.length){var e=w._frameQueue.pop();if(e.onInterrupt){e.onInterrupt()}}y.emit("plotly_animationinterrupted",[])}function t(e){if(e.length===0)return;for(var t=0;t<e.length;t++){var r;if(e[t].type==="byname"){r=X.computeFrame(y,e[t].name)}else{r=e[t].data}var n=k(t);var a=T(t);a.duration=Math.min(a.duration,n.duration);var i={frame:r,name:e[t].name,frameOpts:n,transitionOpts:a};if(t===e.length-1){i.onComplete=M(o,2);i.onInterrupt=s}w._frameQueue.push(i)}if(x.mode==="immediate"){w._lastFrameAt=-Infinity}if(!w._animationRaf){l()}}function r(){y.emit("plotly_animated");window.cancelAnimationFrame(w._animationRaf);w._animationRaf=null}function n(){if(w._currentFrame&&w._currentFrame.onComplete){w._currentFrame.onComplete()}var e=w._currentFrame=w._frameQueue.shift();if(e){var t=e.name?e.name.toString():null;y._fullLayout._currentFrame=t;w._lastFrameAt=Date.now();w._timeToNext=e.frameOpts.duration;X.transition(y,e.frame.data,e.frame.layout,ae.coerceTraceIndices(y,e.frame.traces),e.frameOpts,e.transitionOpts).then(function(){if(e.onComplete){e.onComplete()}});y.emit("plotly_animatingframe",{name:t,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})}else{r()}}function l(){y.emit("plotly_animating");w._lastFrameAt=-Infinity;w._timeToNext=0;w._runningTransitions=0;w._currentFrame=null;var e=function(){w._animationRaf=window.requestAnimationFrame(e);if(Date.now()-w._lastFrameAt>w._timeToNext){n()}};e()}var a=0;function i(e){if(Array.isArray(A)){if(a>=A.length){e.transitionOpts=A[a]}else{e.transitionOpts=A[0]}}else{e.transitionOpts=A}a++;return e}var c,u;var f=[];var d=b===undefined||b===null;var h=Array.isArray(b);var p=!d&&!h&&Q.isPlainObject(b);if(p){f.push({type:"object",data:i(Q.extendFlat({},b))})}else if(d||["string","number"].indexOf(typeof b)!==-1){for(c=0;c<w._frames.length;c++){u=w._frames[c];if(!u)continue;if(d||String(u.group)===String(b)){f.push({type:"byname",name:String(u.name),data:i({name:u.name})})}}}else if(h){for(c=0;c<b.length;c++){var v=b[c];if(["number","string"].indexOf(typeof v)!==-1){v=String(v);f.push({type:"byname",name:v,data:i({name:v})})}else if(Q.isPlainObject(v)){f.push({type:"object",data:i(Q.extendFlat({},v))})}}}for(c=0;c<f.length;c++){u=f[c];if(u.type==="byname"&&!w._frameHash[u.data.name]){Q.warn('animate failure: frame not found: "'+u.data.name+'"');s();return}}if(["next","immediate"].indexOf(x.mode)!==-1){e()}if(x.direction==="reverse"){f.reverse()}var g=y._fullLayout._currentFrame;if(g&&x.fromcurrent){var m=-1;for(c=0;c<f.length;c++){u=f[c];if(u.type==="byname"&&u.name===g){m=c;break}}if(m>0&&m<f.length-1){var _=[];for(c=0;c<f.length;c++){u=f[c];if(f[c].type!=="byname"||c>m){_.push(u)}}f=_}}if(f.length>0){t(f)}else{y.emit("plotly_animated");o()}})}function ke(e,t,r){e=Q.getGraphDiv(e);if(t===null||t===undefined){return Promise.resolve()}if(!Q.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed "+"to create a plot before adding frames. For more details, see "+"https://plotly.com/javascript/animations/")}var n,a,i,o;var s=e._transitionData._frames;var l=e._transitionData._frameHash;if(!Array.isArray(t)){throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t)}var c=s.length+t.length*2;var u=[];var f={};for(n=t.length-1;n>=0;n--){if(!Q.isPlainObject(t[n]))continue;var d=t[n].name;var h=(l[d]||f[d]||{}).name;var p=t[n].name;var v=l[h]||f[h];if(h&&p&&typeof p==="number"&&v&&C<L){C++;Q.warn('addFrames: overwriting frame "'+(l[h]||f[h]).name+'" with a frame whose name of type "number" also equates to "'+h+'". This is valid but may potentially lead to unexpected '+"behavior since all plotly.js frame names are stored internally "+"as strings.");if(C===L){Q.warn("addFrames: This API call has yielded too many of these warnings. "+"For the rest of this call, further warnings about numeric frame "+"names will be suppressed.")}}f[d]={name:d};u.push({frame:X.supplyFrameDefaults(t[n]),index:r&&r[n]!==undefined&&r[n]!==null?r[n]:c+n})}u.sort(function(e,t){if(e.index>t.index)return-1;if(e.index<t.index)return 1;return 0});var g=[];var m=[];var _=s.length;for(n=u.length-1;n>=0;n--){a=u[n].frame;if(typeof a.name==="number"){Q.warn("Warning: addFrames accepts frames with numeric names, but the numbers are"+"implicitly cast to strings")}if(!a.name){while(l[a.name="frame "+e._transitionData._counter++]);}if(l[a.name]){for(i=0;i<s.length;i++){if((s[i]||{}).name===a.name)break}g.push({type:"replace",index:i,value:a});m.unshift({type:"replace",index:i,value:s[i]})}else{o=Math.max(0,Math.min(u[n].index,_));g.push({type:"insert",index:o,value:a});m.unshift({type:"delete",index:o});_++}}var y=X.modifyFrames;var b=X.modifyFrames;var x=[e,m];var w=[e,g];if(A)A.add(e,y,x,b,w);return X.modifyFrames(e,g)}function Me(e,t){e=Q.getGraphDiv(e);if(!Q.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e)}var r,n;var a=e._transitionData._frames;var i=[];var o=[];if(!t){t=[];for(r=0;r<a.length;r++){t.push(r)}}t=t.slice();t.sort();for(r=t.length-1;r>=0;r--){n=t[r];i.push({type:"delete",index:n});o.unshift({type:"insert",index:n,value:a[n]})}var s=X.modifyFrames;var l=X.modifyFrames;var c=[e,o];var u=[e,i];if(A)A.add(e,s,c,l,u);return X.modifyFrames(e,i)}function Se(e){e=Q.getGraphDiv(e);var t=e._fullLayout||{};var r=e._fullData||[];X.cleanPlot([],{},r,t);X.purge(e);k.purge(e);if(t._container)t._container.remove();delete e._context;return e}function Ce(e){var t=e._fullLayout;var r=e.getBoundingClientRect();if(Q.equalDomRects(r,t._lastBBox))return;var n=t._invTransform=Q.inverseTransformMatrix(Q.getFullTransformMatrix(e));t._invScaleX=Math.sqrt(n[0][0]*n[0][0]+n[0][1]*n[0][1]+n[0][2]*n[0][2]);t._invScaleY=Math.sqrt(n[1][0]*n[1][0]+n[1][1]*n[1][1]+n[1][2]*n[1][2]);t._lastBBox=r}function Le(e){var t=T.select(e);var r=e._fullLayout;r._calcInverseTransform=Ce;r._calcInverseTransform(e);r._container=t.selectAll(".plot-container").data([0]);r._container.enter().insert("div",":first-child").classed("plot-container",true).classed("plotly",true);r._paperdiv=r._container.selectAll(".svg-container").data([0]);r._paperdiv.enter().append("div").classed("user-select-none",true).classed("svg-container",true).style("position","relative");r._glcontainer=r._paperdiv.selectAll(".gl-container").data([{}]);r._glcontainer.enter().append("div").classed("gl-container",true);r._paperdiv.selectAll(".main-svg").remove();r._paperdiv.select(".modebar-container").remove();r._paper=r._paperdiv.insert("svg",":first-child").classed("main-svg",true);r._toppaper=r._paperdiv.append("svg").classed("main-svg",true);r._modebardiv=r._paperdiv.append("div");delete r._modeBar;r._hoverpaper=r._paperdiv.append("svg").classed("main-svg",true);if(!r._uid){var n={};T.selectAll("defs").each(function(){if(this.id)n[this.id.split("-")[1]]=1});r._uid=Q.randstr(n)}r._paperdiv.selectAll(".main-svg").attr(o.svgAttrs);r._defs=r._paper.append("defs").attr("id","defs-"+r._uid);r._clips=r._defs.append("g").classed("clips",true);r._topdefs=r._toppaper.append("defs").attr("id","topdefs-"+r._uid);r._topclips=r._topdefs.append("g").classed("clips",true);r._bgLayer=r._paper.append("g").classed("bglayer",true);r._draggers=r._paper.append("g").classed("draglayer",true);var a=r._paper.append("g").classed("layer-below",true);r._imageLowerLayer=a.append("g").classed("imagelayer",true);r._shapeLowerLayer=a.append("g").classed("shapelayer",true);r._cartesianlayer=r._paper.append("g").classed("cartesianlayer",true);r._polarlayer=r._paper.append("g").classed("polarlayer",true);r._ternarylayer=r._paper.append("g").classed("ternarylayer",true);r._geolayer=r._paper.append("g").classed("geolayer",true);r._funnelarealayer=r._paper.append("g").classed("funnelarealayer",true);r._pielayer=r._paper.append("g").classed("pielayer",true);r._iciclelayer=r._paper.append("g").classed("iciclelayer",true);r._treemaplayer=r._paper.append("g").classed("treemaplayer",true);r._sunburstlayer=r._paper.append("g").classed("sunburstlayer",true);r._indicatorlayer=r._toppaper.append("g").classed("indicatorlayer",true);r._glimages=r._paper.append("g").classed("glimages",true);var i=r._toppaper.append("g").classed("layer-above",true);r._imageUpperLayer=i.append("g").classed("imagelayer",true);r._shapeUpperLayer=i.append("g").classed("shapelayer",true);r._infolayer=r._toppaper.append("g").classed("infolayer",true);r._menulayer=r._toppaper.append("g").classed("menulayer",true);r._zoomlayer=r._toppaper.append("g").classed("zoomlayer",true);r._hoverlayer=r._hoverpaper.append("g").classed("hoverlayer",true);r._modebardiv.classed("modebar-container",true).style("position","absolute").style("top","0px").style("right","0px");e.emit("plotly_framework")}E.animate=Te;E.addFrames=ke;E.deleteFrames=Me;E.addTraces=R;E.deleteTraces=z;E.extendTraces=w;E.moveTraces=N;E.prependTraces=I;E.newPlot=l;E._doPlot=a;E.purge=Se;E.react=ye;E.redraw=s;E.relayout=U;E.restyle=F;E.setPlotConfig=i;E.update=G;E._guiRelayout=W(U);E._guiRestyle=W(F);E._guiUpdate=W(G);E._storeDirectGUIEdit=B},{"../components/color":100,"../components/drawing":122,"../constants/xmlns_namespaces":211,"../lib":230,"../lib/events":223,"../lib/queue":245,"../plots/cartesian/axes":276,"../plots/cartesian/constants":283,"../plots/cartesian/graph_interact":286,"../plots/cartesian/select":296,"../plots/plots":311,"../registry":313,"./edit_types":258,"./helpers":259,"./manage_arrays":261,"./plot_config":263,"./plot_schema":264,"./subroutines":266,"@plotly/d3":11,"fast-isnumeric":15,"has-hover":46}],263:[function(e,t,r){"use strict";var n={staticPlot:{valType:"boolean",dflt:false},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:false},edits:{annotationPosition:{valType:"boolean",dflt:false},annotationTail:{valType:"boolean",dflt:false},annotationText:{valType:"boolean",dflt:false},axisTitleText:{valType:"boolean",dflt:false},colorbarPosition:{valType:"boolean",dflt:false},colorbarTitleText:{valType:"boolean",dflt:false},legendPosition:{valType:"boolean",dflt:false},legendText:{valType:"boolean",dflt:false},shapePosition:{valType:"boolean",dflt:false},titleText:{valType:"boolean",dflt:false}},autosizable:{valType:"boolean",dflt:false},responsive:{valType:"boolean",dflt:false},fillFrame:{valType:"boolean",dflt:false},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[true,false],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[false,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:true},showAxisRangeEntryBoxes:{valType:"boolean",dflt:true},showTips:{valType:"boolean",dflt:true},showLink:{valType:"boolean",dflt:false},linkText:{valType:"string",dflt:"Edit chart",noBlank:true},sendData:{valType:"boolean",dflt:true},showSources:{valType:"any",dflt:false},displayModeBar:{valType:"enumerated",values:["hover",true,false],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:false},showEditInChartStudio:{valType:"boolean",dflt:false},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:false},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:true},watermark:{valType:"boolean",dflt:false},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:true,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}};var a={};function i(e,t){for(var r in e){var n=e[r];if(n.valType){t[r]=n.dflt}else{if(!t[r]){t[r]={}}i(n,t[r])}}}i(n,a);t.exports={configAttributes:n,dfltConfig:a}},{}],264:[function(e,t,d){"use strict";var u=e("../registry");var r=e("../lib");var h=e("../plots/attributes");var f=e("../plots/layout_attributes");var n=e("../plots/frame_attributes");var a=e("../plots/animation_attributes");var i=e("./plot_config").configAttributes;var o=e("./edit_types");var l=r.extendDeepAll;var p=r.isPlainObject;var v=r.isArrayOrTypedArray;var c=r.nestedProperty;var s=r.valObjectMeta;var g="_isSubplotObj";var m="_isLinkedToArray";var _="_arrayAttrRegexps";var y="_deprecated";var b=[g,m,_,y];d.IS_SUBPLOT_OBJ=g;d.IS_LINKED_TO_ARRAY=m;d.DEPRECATED=y;d.UNDERSCORE_ATTRS=b;d.get=function(){var t={};u.allTypes.forEach(function(e){t[e]=T(e)});var r={};Object.keys(u.transformsRegistry).forEach(function(e){r[e]=M(e)});return{defs:{valObjects:s,metaKeys:b.concat(["description","role","editType","impliedEdits"]),editType:{traces:o.traces,layout:o.layout},impliedEdits:{}},traces:t,layout:k(),transforms:r,frames:S(),animation:C(a),config:C(i)}};d.crawl=function(n,a,e,i){var o=e||0;i=i||"";Object.keys(n).forEach(function(e){var t=n[e];if(b.indexOf(e)!==-1)return;var r=(i?i+".":"")+e;a(t,e,n,o,r);if(d.isValObject(t))return;if(p(t)&&e!=="impliedEdits"){d.crawl(t,a,o+1,r)}})};d.isValObject=function(e){return e&&e.valType!==undefined};d.findArrayAttributes=function(e){var o=[];var s=[];var l=[];var i,c;function t(e,t,r,n){s=s.slice(0,n).concat([t]);l=l.slice(0,n).concat([e&&e._isLinkedToArray]);var a=e&&(e.valType==="data_array"||e.arrayOk===true)&&!(s[n-1]==="colorbar"&&(t==="ticktext"||t==="tickvals"));if(!a)return;u(i,0,"")}function u(e,t,r){var n=e[s[t]];var a=r+s[t];if(t===s.length-1){if(v(n)){o.push(c+a)}}else{if(l[t]){if(Array.isArray(n)){for(var i=0;i<n.length;i++){if(p(n[i])){u(n[i],t+1,a+"["+i+"].")}}}}else if(p(n)){u(n,t+1,a+".")}}}i=e;c="";d.crawl(h,t);if(e._module&&e._module.attributes){d.crawl(e._module.attributes,t)}var r=e.transforms;if(r){for(var n=0;n<r.length;n++){var a=r[n];var f=a._module;if(f){c="transforms["+n+"].";i=a;d.crawl(f.attributes,t)}}}return o};d.getTraceValObject=function(e,t){var r=t[0];var n=1;var a,i;if(r==="transforms"){if(t.length===1){return h.transforms}var o=e.transforms;if(!Array.isArray(o)||!o.length)return false;var s=t[1];if(!A(s)||s>=o.length){return false}a=(u.transformsRegistry[o[s].type]||{}).attributes;i=a&&a[t[2]];n=3}else{var l=e._module;if(!l)l=(u.modules[e.type||h.type.dflt]||{})._module;if(!l)return false;a=l.attributes;i=a&&a[r];if(!i){var c=l.basePlotModule;if(c&&c.attributes){i=c.attributes[r]}}if(!i)i=h[r]}return w(i,t,n)};d.getLayoutValObject=function(e,t){var r=x(e,t[0]);return w(r,t,1)};function x(e,t){var r,n,a,i;var o=e._basePlotModules;if(o){var s;for(r=0;r<o.length;r++){a=o[r];if(a.attrRegex&&a.attrRegex.test(t)){if(a.layoutAttrOverrides)return a.layoutAttrOverrides;if(!s&&a.layoutAttributes)s=a.layoutAttributes}var l=a.baseLayoutAttrOverrides;if(l&&t in l)return l[t]}if(s)return s}var c=e._modules;if(c){for(r=0;r<c.length;r++){i=c[r].layoutAttributes;if(i&&t in i){return i[t]}}}for(n in u.componentsRegistry){a=u.componentsRegistry[n];if(a.name==="colorscale"&&t.indexOf("coloraxis")===0){return a.layoutAttributes[t]}else if(!a.schema&&t===a.name){return a.layoutAttributes}}if(t in f)return f[t];return false}function w(e,t,r){if(!e)return false;if(e._isLinkedToArray){if(A(t[r]))r++;else if(r<t.length)return false}for(;r<t.length;r++){var n=e[t[r]];if(p(n))e=n;else break;if(r===t.length-1)break;if(e._isLinkedToArray){r++;if(!A(t[r]))return false}else if(e.valType==="info_array"){r++;var a=t[r];if(!A(a))return false;var i=e.items;if(Array.isArray(i)){if(a>=i.length)return false;if(e.dimensions===2){r++;if(t.length===r)return e;var o=t[r];if(!A(o))return false;e=i[a][o]}else e=i[a]}else{e=i}}}return e}function A(e){return e===Math.round(e)&&e>=0}function T(e){var t,r;t=u.modules[e]._module,r=t.basePlotModule;var n={};n.type=null;var i=l({},h);var o=l({},t.attributes);d.crawl(o,function(e,t,r,n,a){c(i,a).set(undefined);if(e===undefined)c(o,a).set(undefined)});l(n,i);if(u.traceIs(e,"noOpacity")){delete n.opacity}if(!u.traceIs(e,"showLegend")){delete n.showlegend;delete n.legendgroup}if(u.traceIs(e,"noHover")){delete n.hoverinfo;delete n.hoverlabel}if(!t.selectPoints){delete n.selectedpoints}l(n,o);if(r.attributes){l(n,r.attributes)}n.type=e;var a={meta:t.meta||{},categories:t.categories||{},animatable:Boolean(t.animatable),type:e,attributes:C(n)};if(t.layoutAttributes){var s={};l(s,t.layoutAttributes);a.layoutAttributes=C(s)}if(!t.animatable){d.crawl(a,function(e){if(d.isValObject(e)&&"anim"in e){delete e.anim}})}return a}function k(){var e={};var t,r;l(e,f);for(t in u.subplotsRegistry){r=u.subplotsRegistry[t];if(!r.layoutAttributes)continue;if(Array.isArray(r.attr)){for(var n=0;n<r.attr.length;n++){O(e,r,r.attr[n])}}else{var a=r.attr==="subplot"?r.name:r.attr;O(e,r,a)}}for(t in u.componentsRegistry){r=u.componentsRegistry[t];var i=r.schema;if(i&&(i.subplots||i.layout)){var o=i.subplots;if(o&&o.xaxis&&!o.yaxis){for(var s in o.xaxis){delete e.yaxis[s]}}}else if(r.name==="colorscale"){l(e,r.layoutAttributes)}else if(r.layoutAttributes){P(e,r.layoutAttributes,r.name)}}return{layoutAttributes:C(e)}}function M(r){var e=u.transformsRegistry[r];var n=l({},e.attributes);Object.keys(u.componentsRegistry).forEach(function(e){var t=u.componentsRegistry[e];if(t.schema&&t.schema.transforms&&t.schema.transforms[r]){Object.keys(t.schema.transforms[r]).forEach(function(e){P(n,t.schema.transforms[r][e],e)})}});return{attributes:C(n)}}function S(){var e={frames:l({},n)};C(e);return e.frames}function C(e){L(e);E(e);D(e);return e}function L(e){function n(e){return{valType:"string",editType:"none"}}function t(e,t,r){if(d.isValObject(e)){if(e.arrayOk===true||e.valType==="data_array"){r[t+"src"]=n(t)}}else if(p(e)){e.role="object"}}d.crawl(e,t)}function E(e){function t(e,t,r){if(!e)return;var n=e[m];if(!n)return;delete e[m];r[t]={items:{}};r[t].items[n]=e;r[t].role="object"}d.crawl(e,t)}function D(e){function n(e){for(var t in e){if(p(e[t])){n(e[t])}else if(Array.isArray(e[t])){for(var r=0;r<e[t].length;r++){n(e[t][r])}}else{if(e[t]instanceof RegExp){e[t]=e[t].toString()}}}}n(e)}function O(e,t,r){var n=c(e,r);var a=l({},t.layoutAttributes);a[g]=true;n.set(a)}function P(e,t,r){var n=c(e,r);n.set(l(n.get()||{},t))}},{"../lib":230,"../plots/animation_attributes":270,"../plots/attributes":272,"../plots/frame_attributes":306,"../plots/layout_attributes":309,"../registry":313,"./edit_types":258,"./plot_config":263}],265:[function(e,t,r){"use strict";var h=e("../lib");var s=e("../plots/attributes");var p="templateitemname";var n={name:{valType:"string",editType:"none"}};n[p]={valType:"string",editType:"calc"};r.templatedArray=function(e,t){t._isLinkedToArray=e;t.name=n.name;t[p]=n[p];return t};r.traceTemplater=function(n){var a={};var i,o;for(i in n){o=n[i];if(Array.isArray(o)&&o.length){a[i]=0}}function e(e){i=h.coerce(e,{},s,"type");var t={type:i,_template:null};if(i in a){o=n[i];var r=a[i]%o.length;a[i]++;t._template=o[r]}else{}return t}return{newTrace:e}};r.newContainer=function(e,t,r){var n=e._template;var a=n&&(n[t]||r&&n[r]);if(!h.isPlainObject(a))a=null;var i=e[t]={_template:a};return i};r.arrayTemplater=function(e,t,i){var r=e._template;var o=r&&r[u(t)];var s=r&&r[t];if(!Array.isArray(s)||!s.length){s=[]}var l={};function n(e){var t={name:e.name,_input:e};var r=t[p]=e[p];if(!c(r)){t._template=o;return t}for(var n=0;n<s.length;n++){var a=s[n];if(a.name===r){l[r]=1;t._template=a;return t}}t[i]=e[i]||false;t._template=false;return t}function a(){var e=[];for(var t=0;t<s.length;t++){var r=s[t];var n=r.name;if(c(n)&&!l[n]){var a={_template:r,name:n,_input:{_templateitemname:n}};a[p]=r[p];e.push(a);l[n]=1}}return e}return{newItem:n,defaultItems:a}};function c(e){return e&&typeof e==="string"}function u(e){var t=e.length-1;if(e.charAt(t)!=="s"){h.warn("bad argument to arrayDefaultKey: "+e)}return e.substr(0,e.length-1)+"defaults"}r.arrayDefaultKey=u;r.arrayEditor=function(a,e,t){var r=(h.nestedProperty(a,e).get()||[]).length;var n=t._index;var i=n>=r&&(t._input||{})._templateitemname;if(i)n=r;var o=e+"["+n+"]";var s;function l(){s={};if(i){s[o]={};s[o][p]=i}}l();function c(e,t){s[e]=t}function u(e,t){if(i){h.nestedProperty(s[o],e).set(t)}else{s[o+"."+e]=t}}function f(){var e=s;l();return e}function d(e,t){if(e)u(e,t);var r=f();for(var n in r){h.nestedProperty(a,n).set(r[n])}}return{modifyBase:c,modifyItem:u,getUpdateObj:f,applyUpdate:d}}},{"../lib":230,"../plots/attributes":272}],266:[function(e,t,W){"use strict";var X=e("@plotly/d3");var f=e("../registry");var Z=e("../plots/plots");var J=e("../lib");var d=e("../lib/clear_gl_canvases");var $=e("../components/color");var Q=e("../components/drawing");var a=e("../components/titles");var K=e("../components/modebar");var ee=e("../plots/cartesian/axes");var te=e("../constants/alignment");var r=e("../plots/cartesian/constraints");var l=r.enforce;var c=r.clean;var u=e("../plots/cartesian/autorange").doAutoRange;var i="start";var n="middle";var o="end";W.layoutStyles=function(e){return J.syncOrAsync([Z.doAutoMargin,s],e)};function re(e,t,r){for(var n=0;n<r.length;n++){var a=r[n][0];var i=r[n][1];if(a[0]>=e[1]||a[1]<=e[0]){continue}if(i[0]<t[1]&&i[1]>t[0]){return true}}return false}function s(e){var t=e._fullLayout;var a=t._size;var i=a.p;var r=ee.list(e,"",true);var n,o,s,l,c,u;t._paperdiv.style({width:e._context.responsive&&t.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":t.width+"px",height:e._context.responsive&&t.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":t.height+"px"}).selectAll(".main-svg").call(Q.setSize,t.width,t.height);e._context.setBackground(e,t.paper_bgcolor);W.drawMainTitle(e);K.manage(e);if(!t._has("cartesian")){return Z.previousPromises(e)}function f(e,t,r){var n=e._lw/2;if(e._id.charAt(0)==="x"){if(!t)return a.t+a.h*(1-(e.position||0))+n%1;else if(r==="top")return t._offset-i-n;return t._offset+t._length+i+n}if(!t)return a.l+a.w*(e.position||0)+n%1;else if(r==="right")return t._offset+t._length+i+n;return t._offset-i-n}for(n=0;n<r.length;n++){l=r[n];var d=l._anchorAxis;l._linepositions={};l._lw=Q.crispRound(e,l.linewidth,1);l._mainLinePosition=f(l,d,l.side);l._mainMirrorPosition=l.mirror&&d?f(l,d,te.OPPOSITE_SIDE[l.side]):null}var h=[];var p=[];var v=[];var g=$.opacity(t.paper_bgcolor)===1&&$.opacity(t.plot_bgcolor)===1&&t.paper_bgcolor===t.plot_bgcolor;for(o in t._plots){s=t._plots[o];if(s.mainplot){if(s.bg){s.bg.remove()}s.bg=undefined}else{var m=s.xaxis.domain;var _=s.yaxis.domain;var y=s.plotgroup;if(re(m,_,v)){var b=y.node();var x=s.bg=J.ensureSingle(y,"rect","bg");b.insertBefore(x.node(),b.childNodes[0]);p.push(o)}else{y.select("rect.bg").remove();v.push([m,_]);if(!g){h.push(o);p.push(o)}}}}var w=t._bgLayer.selectAll(".bg").data(h);w.enter().append("rect").classed("bg",true);w.exit().remove();w.each(function(e){t._plots[e].bg=X.select(this)});for(n=0;n<p.length;n++){s=t._plots[p[n]];c=s.xaxis;u=s.yaxis;if(s.bg&&c._offset!==undefined&&u._offset!==undefined){s.bg.call(Q.setRect,c._offset-i,u._offset-i,c._length+2*i,u._length+2*i).call($.fill,t.plot_bgcolor).style("stroke-width",0)}}if(!t._hasOnlyLargeSploms){for(o in t._plots){s=t._plots[o];c=s.xaxis;u=s.yaxis;var A=s.clipId="clip"+t._uid+o+"plot";var T=J.ensureSingleById(t._clips,"clipPath",A,function(e){e.classed("plotclip",true).append("rect")});s.clipRect=T.select("rect").attr({width:c._length,height:u._length});Q.setTranslate(s.plot,c._offset,u._offset);var k;var M;if(s._hasClipOnAxisFalse){k=null;M=A}else{k=A;M=null}Q.setClipUrl(s.plot,k,e);s.layerClipId=M}}var S,C,L,E,D,O;var P,I,R,z,N,F;var j;function B(e){return"M"+S+","+e+"H"+C}function H(e){return"M"+c._offset+","+e+"h"+c._length}function U(e){return"M"+e+","+I+"V"+P}function V(e){return"M"+e+","+u._offset+"v"+u._length}function q(e,t,r){if(!e.showline||o!==e._mainSubplot)return"";if(!e._anchorAxis)return r(e._mainLinePosition);var n=t(e._mainLinePosition);if(e.mirror)n+=t(e._mainMirrorPosition);return n}for(o in t._plots){s=t._plots[o];c=s.xaxis;u=s.yaxis;var Y="M0,0";if(ne(c,o)){D=ae(c,"left",u,r);S=c._offset-(D?i+D:0);O=ae(c,"right",u,r);C=c._offset+c._length+(O?i+O:0);L=f(c,u,"bottom");E=f(c,u,"top");j=!c._anchorAxis||o!==c._mainSubplot;if(j&&(c.mirror==="allticks"||c.mirror==="all")){c._linepositions[o]=[L,E]}Y=q(c,B,H);if(j&&c.showline&&(c.mirror==="all"||c.mirror==="allticks")){Y+=B(L)+B(E)}s.xlines.style("stroke-width",c._lw+"px").call($.stroke,c.showline?c.linecolor:"rgba(0,0,0,0)")}s.xlines.attr("d",Y);var G="M0,0";if(ne(u,o)){N=ae(u,"bottom",c,r);P=u._offset+u._length+(N?i:0);F=ae(u,"top",c,r);I=u._offset-(F?i:0);R=f(u,c,"left");z=f(u,c,"right");j=!u._anchorAxis||o!==u._mainSubplot;if(j&&(u.mirror==="allticks"||u.mirror==="all")){u._linepositions[o]=[R,z]}G=q(u,U,V);if(j&&u.showline&&(u.mirror==="all"||u.mirror==="allticks")){G+=U(R)+U(z)}s.ylines.style("stroke-width",u._lw+"px").call($.stroke,u.showline?u.linecolor:"rgba(0,0,0,0)")}s.ylines.attr("d",G)}ee.makeClipPaths(e);return Z.previousPromises(e)}function ne(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||e.mirror==="all"||e.mirror==="allticks")}function h(e,t,r){if(!r.showline||!r._lw)return false;if(r.mirror==="all"||r.mirror==="allticks")return true;var n=r._anchorAxis;if(!n)return false;var a=te.FROM_BL[t];if(r.side===t){return n.domain[a]===e.domain[a]}return r.mirror&&n.domain[1-a]===e.domain[1-a]}function ae(e,t,r,n){if(h(e,t,r)){return r._lw}for(var a=0;a<n.length;a++){var i=n[a];if(i._mainAxis===r._mainAxis&&h(e,t,i)){return i._lw}}return 0}W.drawMainTitle=function(e){var t=e._fullLayout;var r=g(t);var n=m(t);a.draw(e,"gtitle",{propContainer:t,propName:"title.text",placeholder:t._dfltTitle.plot,attributes:{x:p(t,r),y:v(t,n),"text-anchor":r,dy:n}})};function p(e,t){var r=e.title;var n=e._size;var a=0;if(t===i){a=r.pad.l}else if(t===o){a=-r.pad.r}switch(r.xref){case"paper":return n.l+n.w*r.x+a;case"container":default:return e.width*r.x+a}}function v(e,t){var r=e.title;var n=e._size;var a=0;if(t==="0em"||!t){a=-r.pad.b}else if(t===te.CAP_SHIFT+"em"){a=r.pad.t}if(r.y==="auto"){return n.t/2}else{switch(r.yref){case"paper":return n.t+n.h-n.h*r.y+a;case"container":default:return e.height-e.height*r.y+a}}}function g(e){var t=e.title;var r=n;if(J.isRightAnchor(t)){r=o}else if(J.isLeftAnchor(t)){r=i}return r}function m(e){var t=e.title;var r="0em";if(J.isTopAnchor(t)){r=te.CAP_SHIFT+"em"}else if(J.isMiddleAnchor(t)){r=te.MID_SHIFT+"em"}return r}W.doTraceStyle=function(e){var t=e.calcdata;var r=[];var n;for(n=0;n<t.length;n++){var a=t[n];var i=a[0]||{};var o=i.trace||{};var s=o._module||{};var l=s.arraysToCalcdata;if(l)l(a,o);var c=s.editStyle;if(c)r.push({fn:c,cd0:i})}if(r.length){for(n=0;n<r.length;n++){var u=r[n];u.fn(e,u.cd0)}d(e);W.redrawReglTraces(e)}Z.style(e);f.getComponentMethod("legend","draw")(e);return Z.previousPromises(e)};W.doColorBars=function(e){f.getComponentMethod("colorbar","draw")(e);return Z.previousPromises(e)};W.layoutReplot=function(e){var t=e.layout;e.layout=undefined;return f.call("_doPlot",e,"",t)};W.doLegend=function(e){f.getComponentMethod("legend","draw")(e);return Z.previousPromises(e)};W.doTicksRelayout=function(e){ee.draw(e,"redraw");if(e._fullLayout._hasOnlyLargeSploms){f.subplotsRegistry.splom.updateGrid(e);d(e);W.redrawReglTraces(e)}W.drawMainTitle(e);return Z.previousPromises(e)};W.doModeBar=function(e){var t=e._fullLayout;K.manage(e);for(var r=0;r<t._basePlotModules.length;r++){var n=t._basePlotModules[r].updateFx;if(n)n(e)}return Z.previousPromises(e)};W.doCamera=function(e){var t=e._fullLayout;var r=t._subplots.gl3d;for(var n=0;n<r.length;n++){var a=t[r[n]];var i=a._scene;i.setViewport(a)}};W.drawData=function(e){var t=e._fullLayout;d(e);var r=t._basePlotModules;for(var n=0;n<r.length;n++){r[n].plot(e)}W.redrawReglTraces(e);Z.style(e);f.getComponentMethod("shapes","draw")(e);f.getComponentMethod("annotations","draw")(e);f.getComponentMethod("images","draw")(e);t._replotting=false;return Z.previousPromises(e)};W.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var r=e._fullData;var n=[];var a=[];var i,o;if(t._hasOnlyLargeSploms){t._splomGrid.draw()}for(i=0;i<r.length;i++){var s=r[i];if(s.visible===true&&s._length!==0){if(s.type==="splom"){t._splomScenes[s.uid].draw()}else if(s.type==="scattergl"){J.pushUnique(n,s.xaxis+s.yaxis)}else if(s.type==="scatterpolargl"){J.pushUnique(a,s.subplot)}}}for(i=0;i<n.length;i++){o=t._plots[n[i]];if(o._scene)o._scene.draw()}for(i=0;i<a.length;i++){o=t[a[i]]._subplot;if(o._scene)o._scene.draw()}}};W.doAutoRangeAndConstraints=function(e){var t=ee.list(e,"",true);var r;var n={};for(var a=0;a<t.length;a++){r=t[a];if(!n[r._id]){n[r._id]=1;c(e,r);u(e,r);var i=r._matchGroup;if(i){for(var o in i){var s=ee.getFromId(e,o);u(e,s,r.range);n[o]=1}}}}l(e)};W.finalDraw=function(e){f.getComponentMethod("rangeslider","draw")(e);f.getComponentMethod("rangeselector","draw")(e)};W.drawMarginPushers=function(e){f.getComponentMethod("legend","draw")(e);f.getComponentMethod("rangeselector","draw")(e);f.getComponentMethod("sliders","draw")(e);f.getComponentMethod("updatemenus","draw")(e);f.getComponentMethod("colorbar","draw")(e)}},{"../components/color":100,"../components/drawing":122,"../components/modebar":163,"../components/titles":198,"../constants/alignment":205,"../lib":230,"../lib/clear_gl_canvases":218,"../plots/cartesian/autorange":275,"../plots/cartesian/axes":276,"../plots/cartesian/constraints":284,"../plots/plots":311,"../registry":313,"@plotly/d3":11}],267:[function(e,t,r){"use strict";var T=e("../lib");var k=T.isPlainObject;var n=e("./plot_schema");var y=e("../plots/plots");var h=e("../plots/attributes");var M=e("./plot_template");var b=e("./plot_config").dfltConfig;r.makeTemplate=function(e){e=T.isPlainObject(e)?e:T.getGraphDiv(e);e=T.extendDeep({_context:b},{data:e.data,layout:e.layout});y.supplyDefaults(e);var t=e.data||[];var r=e.layout||{};r._basePlotModules=e._fullLayout._basePlotModules;r._modules=e._fullLayout._modules;var a={data:{},layout:{}};t.forEach(function(e){var t={};C(e,t,g.bind(null,e));var r=T.coerce(e,{},h,"type");var n=a.data[r];if(!n)n=a.data[r]=[];n.push(t)});C(r,a.layout,v.bind(null,r));delete a.layout.template;var n=r.template;if(k(n)){var i=n.layout;var o,s,l,c,u,f;if(k(i)){p(i,a.layout)}var d=n.data;if(k(d)){for(s in a.data){l=d[s];if(Array.isArray(l)){u=a.data[s];f=u.length;c=l.length;for(o=0;o<f;o++){p(l[o%c],u[o])}for(o=f;o<c;o++){u.push(T.extendDeep({},l[o]))}}}for(s in d){if(!(s in a.data)){a.data[s]=T.extendDeep([],d[s])}}}}return a};function p(s,e){s=T.extendDeep({},s);var t=Object.keys(s).sort();var r,l;function n(e,t,r){if(k(t)&&k(e)){p(e,t)}else if(Array.isArray(t)&&Array.isArray(e)){var n=M.arrayTemplater({_template:s},r);for(l=0;l<t.length;l++){var a=t[l];var i=n.newItem(a)._template;if(i)p(i,a)}var o=n.defaultItems();for(l=0;l<o.length;l++)t.push(o[l]._template);for(l=0;l<t.length;l++)delete t[l].templateitemname}}for(r=0;r<t.length;r++){var a=t[r];var i=s[a];if(a in e){n(i,e[a],a)}else e[a]=i;if(S(a)===a){for(var o in e){var c=S(o);if(o!==c&&c===a&&!(o in s)){n(i,e[o],a)}}}}}function S(e){return e.replace(/[0-9]+$/,"")}function C(e,t,r,n,a){var i=a&&r(a);for(var o in e){var s=e[o];var l=L(e,o,n);var c=L(e,o,a);var u=r(c);if(!u){var f=S(o);if(f!==o){c=L(e,f,a);u=r(c)}}if(i&&i===u)continue;if(!u||u._noTemplating||u.valType==="data_array"||u.arrayOk&&Array.isArray(s)){continue}if(!u.valType&&k(s)){C(s,t,r,l,c)}else if(u._isLinkedToArray&&Array.isArray(s)){var d=false;var h=0;var p={};for(var v=0;v<s.length;v++){var g=s[v];if(k(g)){var m=g.name;if(m){if(!p[m]){C(g,t,r,L(s,h,l),L(s,h,c));h++;p[m]=1}}else if(!d){var _=M.arrayDefaultKey(o);var y=L(e,_,n);var b=L(s,h,l);C(g,t,r,b,L(s,h,c));var x=T.nestedProperty(t,b);var w=T.nestedProperty(t,y);w.set(x.get());x.set(null);d=true}}}}else{var A=T.nestedProperty(t,l);A.set(s)}}}function v(e,t){return n.getLayoutValObject(e,T.nestedProperty({},t).parts)}function g(e,t){return n.getTraceValObject(e,T.nestedProperty({},t).parts)}function L(e,t,r){var n;if(!r)n=t;else if(Array.isArray(e))n=r+"["+t+"]";else n=r+"."+t;return n}r.validateTemplate=function(e,t){var r=T.extendDeep({},{_context:b,data:e.data,layout:e.layout});var n=r.layout||{};if(!k(t))t=n.template||{};var a=t.layout;var i=t.data;var o=[];r.layout=n;r.layout.template=t;y.supplyDefaults(r);var s=r._fullLayout;var l=r._fullData;var c={};function u(e,t){for(var r in e){if(r.charAt(0)!=="_"&&k(e[r])){var n=S(r);var a=[];var i;for(i=0;i<t.length;i++){a.push(L(e,r,t[i]));if(n!==r)a.push(L(e,n,t[i]))}for(i=0;i<a.length;i++){c[a[i]]=1}u(e[r],a)}}}function f(e,t){for(var r in e){if(r.indexOf("defaults")===-1&&k(e[r])){var n=L(e,r,t);if(c[n]){f(e[r],n)}else{o.push({code:"unused",path:n})}}}}if(!k(a)){o.push({code:"layout"})}else{u(s,["layout"]);f(a,"layout")}if(!k(i)){o.push({code:"data"})}else{var d={};var h;for(var p=0;p<l.length;p++){var v=l[p];h=v.type;d[h]=(d[h]||0)+1;if(!v._fullInput._template){o.push({code:"missing",index:v._fullInput.index,traceType:h})}}for(h in i){var g=i[h].length;var m=d[h]||0;if(g>m){o.push({code:"unused",traceType:h,templateCount:g,dataCount:m})}else if(m>g){o.push({code:"reused",traceType:h,templateCount:g,dataCount:m})}}}function _(e,t){for(var r in e){if(r.charAt(0)==="_")continue;var n=e[r];var a=L(e,r,t);if(k(n)){if(Array.isArray(e)&&n._template===false&&n.templateitemname){o.push({code:"missing",path:a,templateitemname:n.templateitemname})}_(n,a)}else if(Array.isArray(n)&&x(n)){_(n,a)}}}_({data:l,layout:s},"");if(o.length)return o.map(w)};function x(e){for(var t=0;t<e.length;t++){if(k(e[t]))return true}}function w(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":if(e.path){t="There are no templates for item "+e.path+" with name "+e.templateitemname}else{t="There are no templates for trace "+e.index+", of type "+e.traceType+"."}break;case"unused":if(e.path){t="The template item at "+e.path+" was not used in constructing the plot."}else if(e.dataCount){t="Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type."}else{t="The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data."}break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type.";break}e.msg=t;return e}},{"../lib":230,"../plots/attributes":272,"../plots/plots":311,"./plot_config":263,"./plot_schema":264,"./plot_template":265}],268:[function(e,t,r){"use strict";var w=e("fast-isnumeric");var A=e("./plot_api");var T=e("../plots/plots");var k=e("../lib");var M=e("../snapshot/helpers");var S=e("../snapshot/tosvg");var C=e("../snapshot/svgtoimg");var L=e("../version").version;var E={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:false},imageDataOnly:{valType:"boolean",dflt:false}};function n(e,r){r=r||{};var n;var t;var a;var i;if(k.isPlainObject(e)){n=e.data||[];t=e.layout||{};a=e.config||{};i={}}else{e=k.getGraphDiv(e);n=k.extendDeep([],e.data);t=k.extendDeep({},e.layout);a=e._context;i=e._fullLayout||{}}function o(e){return!(e in r)||k.validate(r[e],E[e])}if(!o("width")&&r.width!==null||!o("height")&&r.height!==null){throw new Error("Height and width should be pixel values.")}if(!o("format")){throw new Error("Export format is not "+k.join2(E.format.values,", "," or ")+".")}var s={};function l(e,t){return k.coerce(r,s,E,e,t)}var c=l("format");var u=l("width");var f=l("height");var d=l("scale");var h=l("setBackground");var p=l("imageDataOnly");var v=document.createElement("div");v.style.position="absolute";v.style.left="-5000px";document.body.appendChild(v);var g=k.extendFlat({},t);if(u){g.width=u}else if(r.width===null&&w(i.width)){g.width=i.width}if(f){g.height=f}else if(r.height===null&&w(i.height)){g.height=i.height}var m=k.extendFlat({},a,{_exportedPlot:true,staticPlot:true,setBackground:h});var _=M.getRedrawFunc(v);function y(){return new Promise(function(e){setTimeout(e,M.getDelay(v._fullLayout))})}function b(){return new Promise(function(e,t){var r=S(v,c,d);var n=v._fullLayout.width;var a=v._fullLayout.height;function i(){A.purge(v);document.body.removeChild(v)}if(c==="full-json"){var o=T.graphJson(v,false,"keepdata","object",true,true);o.version=L;o=JSON.stringify(o);i();if(p){return e(o)}else{return e(M.encodeJSON(o))}}i();if(c==="svg"){if(p){return e(r)}else{return e(M.encodeSVG(r))}}var s=document.createElement("canvas");s.id=k.randstr();C({format:c,width:n,height:a,scale:d,canvas:s,svg:r,promise:true}).then(e).catch(t)})}function x(e){if(p){return e.replace(M.IMAGE_URL_PREFIX,"")}else{return e}}return new Promise(function(t,r){A.newPlot(v,n,g,m).then(_).then(y).then(b).then(function(e){t(x(e))}).catch(function(e){r(e)})})}t.exports=n},{"../lib":230,"../plots/plots":311,"../snapshot/helpers":317,"../snapshot/svgtoimg":319,"../snapshot/tosvg":321,"../version":386,"./plot_api":262,"fast-isnumeric":15}],269:[function(e,t,r){"use strict";var O=e("../lib");var T=e("../plots/plots");var k=e("./plot_schema");var M=e("./plot_config").dfltConfig;var P=O.isPlainObject;var I=Array.isArray;var R=O.isArrayOrTypedArray;t.exports=function e(t,r){if(t===undefined)t=[];if(r===undefined)r={};var n=k.get();var a=[];var i={_context:O.extendFlat({},M)};var o,s;if(I(t)){i.data=O.extendDeep([],t);o=t}else{i.data=[];o=[];a.push(N("array","data"))}if(P(r)){i.layout=O.extendDeep({},r);s=r}else{i.layout={};s={};if(arguments.length>1){a.push(N("object","layout"))}}T.supplyDefaults(i);var l=i._fullData;var c=o.length;for(var u=0;u<c;u++){var f=o[u];var d=["data",u];if(!P(f)){a.push(N("object",d));continue}var h=l[u];var p=h.type;var v=n.traces[p].attributes;v.type={valType:"enumerated",values:[p]};if(h.visible===false&&f.visible!==false){a.push(N("invisible",d))}z(f,h,v,a,d);var g=f.transforms;var m=h.transforms;if(g){if(!I(g)){a.push(N("array",d,["transforms"]))}d.push("transforms");for(var _=0;_<g.length;_++){var y=["transforms",_];var b=g[_].type;if(!P(g[_])){a.push(N("object",d,y));continue}var x=n.transforms[b]?n.transforms[b].attributes:{};x.type={valType:"enumerated",values:Object.keys(n.transforms)};z(g[_],m[_],x,a,d,y)}}}var w=i._fullLayout;var A=S(n,l);z(s,w,A,a,"layout");return a.length===0?void 0:a};function z(e,t,r,n,a,i){i=i||[];var o=Object.keys(e);for(var s=0;s<o.length;s++){var l=o[s];if(l==="transforms")continue;var c=i.slice();c.push(l);var u=e[l];var f=t[l];var d=j(r,l);var h=(d||{}).valType;var p=h==="info_array";var v=h==="colorscale";var g=(d||{}).items;if(!F(r,l)){n.push(N("schema",a,c))}else if(P(u)&&P(f)&&h!=="any"){z(u,f,d,n,a,c)}else if(p&&I(u)){if(u.length>f.length){n.push(N("unused",a,c.concat(f.length)))}var m=f.length;var _=Array.isArray(g);if(_)m=Math.min(m,g.length);var y,b,x,w,A;if(d.dimensions===2){for(b=0;b<m;b++){if(I(u[b])){if(u[b].length>f[b].length){n.push(N("unused",a,c.concat(b,f[b].length)))}var T=f[b].length;for(y=0;y<(_?Math.min(T,g[b].length):T);y++){x=_?g[b][y]:g;w=u[b][y];A=f[b][y];if(!O.validate(w,x)){n.push(N("value",a,c.concat(b,y),w))}else if(A!==w&&A!==+w){n.push(N("dynamic",a,c.concat(b,y),w,A))}}}else{n.push(N("array",a,c.concat(b),u[b]))}}}else{for(b=0;b<m;b++){x=_?g[b]:g;w=u[b];A=f[b];if(!O.validate(w,x)){n.push(N("value",a,c.concat(b),w))}else if(A!==w&&A!==+w){n.push(N("dynamic",a,c.concat(b),w,A))}}}}else if(d.items&&!p&&I(u)){var k=g[Object.keys(g)[0]];var M=[];var S,C;for(S=0;S<f.length;S++){var L=f[S]._index||S;C=c.slice();C.push(L);if(P(u[L])&&P(f[S])){M.push(L);var E=u[L];var D=f[S];if(P(E)&&E.visible!==false&&D.visible===false){n.push(N("invisible",a,C))}else z(E,D,k,n,a,C)}}for(S=0;S<u.length;S++){C=c.slice();C.push(S);if(!P(u[S])){n.push(N("object",a,C,u[S]))}else if(M.indexOf(S)===-1){n.push(N("unused",a,C))}}}else if(!P(u)&&P(f)){n.push(N("object",a,c,u))}else if(!R(u)&&R(f)&&!p&&!v){n.push(N("array",a,c,u))}else if(!(l in t)){n.push(N("unused",a,c,u))}else if(!O.validate(u,d)){n.push(N("value",a,c,u))}else if(d.valType==="enumerated"&&(d.coerceNumber&&u!==+f||u!==f)){n.push(N("dynamic",a,c,u,f))}}return n}function S(e,t){var r=e.layout.layoutAttributes;for(var n=0;n<t.length;n++){var a=t[n];var i=e.traces[a.type];var o=i.layoutAttributes;if(o){if(a.subplot){O.extendFlat(r[i.attributes.subplot.dflt],o)}else{O.extendFlat(r,o)}}}return r}var c={object:function(e,t){var r;if(e==="layout"&&t==="")r="The layout argument";else if(e[0]==="data"&&t===""){r="Trace "+e[1]+" in the data argument"}else r=a(e)+"key "+t;return r+" must be linked to an object container"},array:function(e,t){var r;if(e==="data")r="The data argument";else r=a(e)+"key "+t;return r+" must be linked to an array container"},schema:function(e,t){return a(e)+"key "+t+" is not part of the schema"},unused:function(e,t,r){var n=P(r)?"container":"key";return a(e)+n+" "+t+" did not get coerced"},dynamic:function(e,t,r,n){return[a(e)+"key",t,"(set to '"+r+"')","got reset to","'"+n+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?a(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,r){return[a(e)+"key "+t,"is set to an invalid value ("+r+")"].join(" ")}};function a(e){if(I(e))return"In data trace "+e[1]+", ";return"In "+e+", "}function N(e,t,r,n,a){r=r||"";var i,o;if(I(t)){i=t[0];o=t[1]}else{i=t;o=null}var s=u(r);var l=c[e](t,s,n,a);O.log(l);return{code:e,container:i,trace:o,path:r,astr:s,msg:l}}function F(e,t){var r=i(t);var n=r.keyMinusId;var a=r.id;if(n in e&&e[n]._isSubplotObj&&a){return true}return t in e}function j(e,t){if(t in e)return e[t];var r=i(t);return e[r.keyMinusId]}var n=O.counterRegex("([a-z]+)");function i(e){var t=e.match(n);return{keyMinusId:t&&t[1],id:t&&t[2]}}function u(e){if(!I(e))return String(e);var t="";for(var r=0;r<e.length;r++){var n=e[r];if(typeof n==="number"){t=t.substr(0,t.length-1)+"["+n+"]"}else{t+=n}if(r<e.length-1)t+="."}return t}},{"../lib":230,"../plots/plots":311,"./plot_config":263,"./plot_schema":264}],270:[function(e,t,r){"use strict";t.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:false},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:true}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],271:[function(e,t,r){"use strict";var v=e("../lib");var g=e("../plot_api/plot_template");t.exports=function e(t,r,n){var a=n.name;var i=n.inclusionAttr||"visible";var o=r[a];var s=v.isArrayOrTypedArray(t[a])?t[a]:[];var l=r[a]=[];var c=g.arrayTemplater(r,a,i);var u,f;for(u=0;u<s.length;u++){var d=s[u];if(!v.isPlainObject(d)){f=c.newItem({});f[i]=false}else{f=c.newItem(d)}f._index=u;if(f[i]!==false){n.handleItemDefaults(d,f,r,n)}l.push(f)}var h=c.defaultItems();for(u=0;u<h.length;u++){f=h[u];f._index=l.length;n.handleItemDefaults({},f,r,n,{});l.push(f)}if(v.isArrayOrTypedArray(o)){var p=Math.min(o.length,l.length);for(u=0;u<p;u++){v.relinkPrivateKeys(l[u],o[u])}}return l}},{"../lib":230,"../plot_api/plot_template":265}],272:[function(e,t,r){"use strict";var n=e("./font_attributes");var a=e("../components/fx/attributes");t.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:true},visible:{valType:"enumerated",values:[true,false,"legendonly"],dflt:true,editType:"calc"},showlegend:{valType:"boolean",dflt:true,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:n({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:true},ids:{valType:"data_array",editType:"calc",anim:true},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:true,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:true,dflt:"all",editType:"none"},hoverlabel:a.hoverlabel,stream:{token:{valType:"string",noBlank:true,strict:true,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":131,"./font_attributes":305}],273:[function(e,t,r){"use strict";var x=e("fast-isnumeric");var n=e("../../lib");var w=n.dateTime2ms;var A=n.incrementMonth;var a=e("../../constants/numerical");var T=a.ONEAVGMONTH;t.exports=function e(t,r,n,a){if(r.type!=="date")return a;var i=t[n+"periodalignment"];if(!i)return a;var o=t[n+"period"];var s;if(x(o)){o=+o;if(o<=0)return a}else if(typeof o==="string"&&o.charAt(0)==="M"){var l=+o.substring(1);if(l>0&&Math.round(l)===l){s=l}else return a}var c=r.calendar;var u="start"===i;var f="end"===i;var d=t[n+"period0"];var h=w(d,c)||0;var p=[];var v=a.length;for(var g=0;g<v;g++){var m=a[g];var _,y,b;if(s){_=Math.round((m-h)/(s*T));b=A(h,s*_,c);while(b>m){b=A(b,-s,c)}while(b<=m){b=A(b,s,c)}y=A(b,-s,c)}else{_=Math.round((m-h)/o);b=h+_*o;while(b>m){b-=o}while(b<=m){b+=o}y=b-o}p[g]=u?y:f?b:(y+b)/2}return p}},{"../../constants/numerical":210,"../../lib":230,"fast-isnumeric":15}],274:[function(e,t,r){"use strict";t.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],275:[function(e,t,r){"use strict";var _=e("@plotly/d3");var C=e("fast-isnumeric");var O=e("../../lib");var L=e("../../constants/numerical").FP_SAFE;var s=e("../../registry");var y=e("../../components/drawing");var n=e("./axis_ids");var g=n.getFromId;var l=n.isLinked;t.exports={getAutoRange:c,makePadFn:I,doAutoRange:a,findExtremes:i,concatExtremes:R};function c(e,t){var r,n;var a=[];var i=e._fullLayout;var o=I(i,t,0);var s=I(i,t,1);var l=R(e,t);var c=l.min;var u=l.max;if(c.length===0||u.length===0){return O.simpleMap(t.range,t.r2l)}var f=c[0].val;var d=u[0].val;for(r=1;r<c.length;r++){if(f!==d)break;f=Math.min(f,c[r].val)}for(r=1;r<u.length;r++){if(f!==d)break;d=Math.max(d,u[r].val)}var h=false;if(t.range){var p=O.simpleMap(t.range,t.r2l);h=p[1]<p[0]}if(t.autorange==="reversed"){h=true;t.autorange=true}var v=t.rangemode;var g=v==="tozero";var m=v==="nonnegative";var _=t._length;var y=_/10;var b=0;var x,w,A,T,k,M;for(r=0;r<c.length;r++){x=c[r];for(n=0;n<u.length;n++){w=u[n];M=w.val-x.val-P(t,x.val,w.val);if(M>0){k=_-o(x)-s(w);if(k>y){if(M/k>b){A=x;T=w;b=M/k}}else if(M/_>b){A={val:x.val,nopad:1};T={val:w.val,nopad:1};b=M/_}}}}function S(e,t){return Math.max(e,s(t))}if(f===d){var C=f-1;var L=f+1;if(g){if(f===0){a=[0,1]}else{var E=(f>0?u:c).reduce(S,0);var D=f/(1-Math.min(.5,E/_));a=f>0?[0,D]:[D,0]}}else if(m){a=[Math.max(0,C),Math.max(1,L)]}else{a=[C,L]}}else{if(g){if(A.val>=0){A={val:0,nopad:1}}if(T.val<=0){T={val:0,nopad:1}}}else if(m){if(A.val-b*o(A)<0){A={val:0,nopad:1}}if(T.val<=0){T={val:1,nopad:1}}}b=(T.val-A.val-P(t,x.val,w.val))/(_-o(A)-s(T));a=[A.val-b*o(A),T.val+b*s(T)]}if(h)a.reverse();return O.simpleMap(a,t.l2r||Number)}function P(e,t,r){var n=0;if(e.rangebreaks){var a=e.locateBreaks(t,r);for(var i=0;i<a.length;i++){var o=a[i];n+=o.max-o.min}}return n}function I(e,t,r){var n=.05*t._length;var a=t._anchorAxis||{};if((t.ticklabelposition||"").indexOf("inside")!==-1||(a.ticklabelposition||"").indexOf("inside")!==-1){var i=t.autorange==="reversed";if(!i){var o=O.simpleMap(t.range,t.r2l);i=o[1]<o[0]}if(i)r=!r}var s=0;if(!l(e,t._id)){s=u(e,t,r)}n=Math.max(s,n);if(t.constrain==="domain"&&t._inputDomain){n*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])}return function e(t){if(t.nopad)return 0;return t.pad+(t.extrapad?n:s)}}var b=3;function u(e,t,r){var n=0;var a=t._id.charAt(0)==="x";for(var i in e._plots){var o=e._plots[i];if(t._id!==o.xaxis._id&&t._id!==o.yaxis._id)continue;var s=(a?o.yaxis:o.xaxis)||{};if((s.ticklabelposition||"").indexOf("inside")!==-1){if(!r&&(s.side==="left"||s.side==="bottom")||r&&(s.side==="top"||s.side==="right")){if(s._vals){var l=O.deg2rad(s._tickAngles[s._id+"tick"]||0);var c=Math.abs(Math.cos(l));var u=Math.abs(Math.sin(l));if(!s._vals[0].bb){var f=s._id+"tick";var d=s._selections[f];d.each(function(e){var t=_.select(this);var r=t.select(".text-math-group");if(r.empty()){e.bb=y.bBox(t.node())}})}for(var h=0;h<s._vals.length;h++){var p=s._vals[h];var v=p.bb;if(v){var g=2*b+v.width;var m=2*b+v.height;n=Math.max(n,a?Math.max(g*c,m*u):Math.max(m*c,g*u))}}}if(s.ticks==="inside"&&s.ticklabelposition==="inside"){n+=s.ticklen||0}}}}return n}function R(e,t,r){var a=t._id;var n=e._fullData;var i=e._fullLayout;var o=[];var s=[];var l,c,u;function f(e,t){for(l=0;l<t.length;l++){var r=e[t[l]];var n=(r._extremes||{})[a];if(r.visible===true&&n){for(c=0;c<n.min.length;c++){u=n.min[c];E(o,u.val,u.pad,{extrapad:u.extrapad})}for(c=0;c<n.max.length;c++){u=n.max[c];D(s,u.val,u.pad,{extrapad:u.extrapad})}}}}f(n,t._traceIndices);f(i.annotations||[],t._annIndices||[]);f(i.shapes||[],t._shapeIndices||[]);if(t._matchGroup&&!r){for(var d in t._matchGroup){if(d!==t._id){var h=g(e,d);var p=R(e,h,true);var v=t._length/h._length;for(c=0;c<p.min.length;c++){u=p.min[c];E(o,u.val,u.pad*v,{extrapad:u.extrapad})}for(c=0;c<p.max.length;c++){u=p.max[c];D(s,u.val,u.pad*v,{extrapad:u.extrapad})}}}}return{min:o,max:s}}function a(e,t,r){t.setScale();if(t.autorange){t.range=r?r.slice():c(e,t);t._r=t.range.slice();t._rl=O.simpleMap(t._r,t.r2l);var n=t._input;var a={};a[t._attr+".range"]=t.range;a[t._attr+".autorange"]=t.autorange;s.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,a);n.range=t.range.slice();n.autorange=t.autorange}var i=t._anchorAxis;if(i&&i.rangeslider){var o=i.rangeslider[t._name];if(o){if(o.rangemode==="auto"){o.range=c(e,t)}}i._input.rangeslider[t._name]=O.extendFlat({},o)}}function i(t,r,e){if(!e)e={};if(!t._m)t.setScale();var n=[];var a=[];var i=r.length;var o=e.padded||false;var s=e.tozero&&(t.type==="linear"||t.type==="-");var l=t.type==="log";var c=false;var u=e.vpadLinearized||false;var f,d,h,p,v,g,m,_,y;function b(t){if(Array.isArray(t)){c=true;return function(e){return Math.max(Number(t[e]||0),0)}}else{var e=Math.max(Number(t||0),0);return function(){return e}}}var x=b((t._m>0?e.ppadplus:e.ppadminus)||e.ppad||0);var w=b((t._m>0?e.ppadminus:e.ppadplus)||e.ppad||0);var A=b(e.vpadplus||e.vpad);var T=b(e.vpadminus||e.vpad);if(!c){_=Infinity;y=-Infinity;if(l){for(f=0;f<i;f++){d=r[f];if(d<_&&d>0)_=d;if(d>y&&d<L)y=d}}else{for(f=0;f<i;f++){d=r[f];if(d<_&&d>-L)_=d;if(d>y&&d<L)y=d}}r=[_,y];i=2}var k={tozero:s,extrapad:o};function M(e){h=r[e];if(!C(h))return;g=x(e);m=w(e);if(u){p=t.c2l(h)-T(e);v=t.c2l(h)+A(e)}else{_=h-T(e);y=h+A(e);if(l&&_<y/10)_=y/10;p=t.c2l(_);v=t.c2l(y)}if(s){p=Math.min(0,p);v=Math.max(0,v)}if(z(p)){E(n,p,m,k)}if(z(v)){D(a,v,g,k)}}var S=Math.min(6,i);for(f=0;f<S;f++)M(f);for(f=i-1;f>=S;f--)M(f);return{min:n,max:a,opts:e}}function E(e,t,r,n){o(e,t,r,n,f)}function D(e,t,r,n){o(e,t,r,n,d)}function o(e,t,r,n,a){var i=n.tozero;var o=n.extrapad;var s=true;for(var l=0;l<e.length&&s;l++){var c=e[l];if(a(c.val,t)&&c.pad>=r&&(c.extrapad||!o)){s=false;break}else if(a(t,c.val)&&c.pad<=r&&(o||!c.extrapad)){e.splice(l,1);l--}}if(s){var u=i&&t===0;e.push({val:t,pad:u?0:r,extrapad:u?false:o})}}function z(e){return C(e)&&Math.abs(e)<L}function f(e,t){return e<=t}function d(e,t){return e>=t}},{"../../components/drawing":122,"../../constants/numerical":210,"../../lib":230,"../../registry":313,"./axis_ids":280,"@plotly/d3":11,"fast-isnumeric":15}],276:[function(e,t,r){"use strict";var k=e("@plotly/d3");var C=e("fast-isnumeric");var q=e("../../plots/plots");var Y=e("../../registry");var G=e("../../lib");var h=G.strTranslate;var g=e("../../lib/svg_text_utils");var m=e("../../components/titles");var u=e("../../components/color");var M=e("../../components/drawing");var b=e("./layout_attributes");var _=e("./clean_ticks");var n=e("../../constants/numerical");var y=n.ONEMAXYEAR;var x=n.ONEAVGYEAR;var w=n.ONEMINYEAR;var A=n.ONEMAXQUARTER;var T=n.ONEAVGQUARTER;var S=n.ONEMINQUARTER;var L=n.ONEMAXMONTH;var E=n.ONEAVGMONTH;var D=n.ONEMINMONTH;var O=n.ONEWEEK;var P=n.ONEDAY;var I=P/2;var R=n.ONEHOUR;var f=n.ONEMIN;var d=n.ONESEC;var v=n.MINUS_SIGN;var z=n.BADNUM;var c={K:"zeroline"};var N={K:"gridline",L:"path"};var F={K:"tick",L:"path"};var j={K:"tick",L:"text"};var a=e("../../constants/alignment");var B=a.MID_SHIFT;var H=a.CAP_SHIFT;var W=a.LINE_SPACING;var X=a.OPPOSITE_SIDE;var U=3;var Z=t.exports={};Z.setConvert=e("./set_convert");var s=e("./axis_autotype");var i=e("./axis_ids");var o=i.idSort;var V=i.isLinked;Z.id2name=i.id2name;Z.name2id=i.name2id;Z.cleanId=i.cleanId;Z.list=i.list;Z.listIds=i.listIds;Z.getFromId=i.getFromId;Z.getFromTrace=i.getFromTrace;var l=e("./autorange");Z.getAutoRange=l.getAutoRange;Z.findExtremes=l.findExtremes;var p=1e-4;function J(e){var t=(e[1]-e[0])*p;return[e[0]-t,e[1]+t]}Z.coerceRef=function(e,t,r,n,a,i){var o=n.charAt(n.length-1);var s=r._fullLayout._subplots[o+"axis"];var l=n+"ref";var c={};if(!a)a=s[0]||(typeof i==="string"?i:i[0]);if(!i)i=a;s=s.concat(s.map(function(e){return e+" domain"}));c[l]={valType:"enumerated",values:s.concat(i?typeof i==="string"?[i]:i:[]),dflt:a};return G.coerce(e,t,c,l)};Z.getRefType=function(e){if(e===undefined){return e}if(e==="paper"){return"paper"}if(e==="pixel"){return"pixel"}if(/( domain)$/.test(e)){return"domain"}else{return"range"}};Z.coercePosition=function(e,t,r,n,a,i){var o,s;var l=Z.getRefType(n);if(l!=="range"){o=G.ensureNumber;s=r(a,i)}else{var c=Z.getFromId(t,n);i=c.fraction2r(i);s=r(a,i);o=c.cleanPos}e[a]=o(s)};Z.cleanPosition=function(e,t,r){var n=r==="paper"||r==="pixel"?G.ensureNumber:Z.getFromId(t,r).cleanPos;return n(e)};Z.redrawComponents=function(f,d){d=d?d:Z.listIds(f);var h=f._fullLayout;function e(e,t,r,n){var a=Y.getComponentMethod(e,t);var i={};for(var o=0;o<d.length;o++){var s=h[Z.id2name(d[o])];var l=s[r];for(var c=0;c<l.length;c++){var u=l[c];if(!i[u]){a(f,u);i[u]=1;if(n)return}}}}e("annotations","drawOne","_annIndices");e("shapes","drawOne","_shapeIndices");e("images","draw","_imgIndices",true)};var $=Z.getDataConversions=function(e,t,r,n){var a;var i=r==="x"||r==="y"||r==="z"?r:n;if(Array.isArray(i)){a={type:s(n,undefined,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]};Z.setConvert(a);if(a.type==="category"){for(var o=0;o<n.length;o++){a.d2c(n[o])}}}else{a=Z.getFromTrace(e,t,i)}if(a)return{d2c:a.d2c,c2d:a.c2d};if(i==="ids")return{d2c:K,c2d:K};return{d2c:Q,c2d:Q}};function Q(e){return+e}function K(e){return String(e)}Z.getDataToCoordFunc=function(e,t,r,n){return $(e,t,r,n).d2c};Z.counterLetter=function(e){var t=e.charAt(0);if(t==="x")return"y";if(t==="y")return"x"};Z.minDtick=function(e,t,r,n){if(["log","category","multicategory"].indexOf(e.type)!==-1||!n){e._minDtick=0}else if(e._minDtick===undefined){e._minDtick=t;e._forceTick0=r}else if(e._minDtick){if((e._minDtick/t+1e-6)%1<2e-6&&((r-e._forceTick0)/t%1+1.000001)%1<2e-6){e._minDtick=t;e._forceTick0=r}else if((t/e._minDtick+1e-6)%1>2e-6||((r-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6){e._minDtick=0}}};Z.saveRangeInitial=function(e,t){var r=Z.list(e,"",true);var n=false;for(var a=0;a<r.length;a++){var i=r[a];var o=i._rangeInitial===undefined;var s=o||!(i.range[0]===i._rangeInitial[0]&&i.range[1]===i._rangeInitial[1]);if(o&&i.autorange===false||t&&s){i._rangeInitial=i.range.slice();n=true}}return n};Z.saveShowSpikeInitial=function(e,t){var r=Z.list(e,"",true);var n=false;var a="on";for(var i=0;i<r.length;i++){var o=r[i];var s=o._showSpikeInitial===undefined;var l=s||!(o.showspikes===o._showspikes);if(s||t&&l){o._showSpikeInitial=o.showspikes;n=true}if(a==="on"&&!o.showspikes){a="off"}}e._fullLayout._cartesianSpikesEnabled=a;return n};Z.autoBin=function(e,t,r,n,a,i){var o=G.aggNums(Math.min,null,e);var s=G.aggNums(Math.max,null,e);if(t.type==="category"||t.type==="multicategory"){return{start:o-.5,end:s+.5,size:Math.max(1,Math.round(i)||1),_dataSpan:s-o}}if(!a)a=t.calendar;var l;if(t.type==="log"){l={type:"linear",range:[o,s]}}else{l={type:t.type,range:G.simpleMap([o,s],t.c2r,0,a),calendar:a}}Z.setConvert(l);i=i&&_.dtick(i,l.type);if(i){l.dtick=i;l.tick0=_.tick0(undefined,l.type,a)}else{var c;if(r)c=(s-o)/r;else{var u=G.distinctVals(e);var f=Math.pow(10,Math.floor(Math.log(u.minDiff)/Math.LN10));var d=f*G.roundUp(u.minDiff/f,[.9,1.9,4.9,9.9],true);c=Math.max(d,2*G.stdev(e)/Math.pow(e.length,n?.25:.4));if(!C(c))c=1}Z.autoTicks(l,c)}var h=l.dtick;var p=Z.tickIncrement(Z.tickFirst(l),h,"reverse",a);var v,g;if(typeof h==="number"){p=ee(p,e,l,o,s);g=1+Math.floor((s-p)/h);v=p+g*h}else{if(l.dtick.charAt(0)==="M"){p=te(p,e,h,o,a)}v=p;g=0;while(v<=s){v=Z.tickIncrement(v,h,false,a);g++}}return{start:t.c2r(p,0,a),end:t.c2r(v,0,a),size:h,_dataSpan:s-o}};function ee(t,e,r,n,a){var i=0;var o=0;var s=0;var l=0;function c(e){return(1+(e-t)*100/r.dtick)%100<2}for(var u=0;u<e.length;u++){if(e[u]%1===0)s++;else if(!C(e[u]))l++;if(c(e[u]))i++;if(c(e[u]+r.dtick/2))o++}var f=e.length-l;if(s===f&&r.type!=="date"){if(r.dtick<1){t=n-.5*r.dtick}else{t-=.5;if(t+r.dtick<n)t+=r.dtick}}else if(o<f*.1){if(i>f*.3||c(n)||c(a)){var d=r.dtick/2;t+=t+d<n?d:-d}}return t}function te(e,t,r,n,a){var i=G.findExactDates(t,a);var o=.8;if(i.exactDays>o){var s=Number(r.substr(1));if(i.exactYears>o&&s%12===0){e=Z.tickIncrement(e,"M6","reverse")+P*1.5}else if(i.exactMonths>o){e=Z.tickIncrement(e,"M1","reverse")+P*15.5}else{e-=I}var l=Z.tickIncrement(e,r);if(l<=n)return l}return e}Z.prepTicks=function(e,t){var r=G.simpleMap(e.range,e.r2l,undefined,undefined,t);e._dtickInit=e.dtick;e._tick0Init=e.tick0;if(e.tickmode==="auto"||!e.dtick){var n=e.nticks;var a;if(!n){if(e.type==="category"||e.type==="multicategory"){a=e.tickfont?G.bigFont(e.tickfont.size||12):15;n=e._length/a}else{a=e._id.charAt(0)==="y"?40:80;n=G.constrain(e._length/a,4,9)+1}if(e._name==="radialaxis")n*=2}if(e.tickmode==="array")n*=100;e._roughDTick=Math.abs(r[1]-r[0])/n;Z.autoTicks(e,e._roughDTick);if(e._minDtick>0&&e.dtick<e._minDtick*2){e.dtick=e._minDtick;e.tick0=e.l2r(e._forceTick0)}}if(e.ticklabelmode==="period"){ne(e)}if(!e.tick0){e.tick0=e.type==="date"?"2000-01-01":0}if(e.type==="date"&&e.dtick<.1)e.dtick=.1;pe(e)};function re(e){return+e.substring(1)}function ne(e){var t;function r(){return!(C(e.dtick)||e.dtick.charAt(0)!=="M")}var n=r();var a=Z.getTickFormat(e);if(a){var i=e._dtickInit!==e.dtick;if(!/%[fLQsSMX]/.test(a)){if(/%[HI]/.test(a)){t=R;if(i&&!n&&e.dtick<R)e.dtick=R}else if(/%p/.test(a)){t=I;if(i&&!n&&e.dtick<I)e.dtick=I}else if(/%[Aadejuwx]/.test(a)){t=P;if(i&&!n&&e.dtick<P)e.dtick=P}else if(/%[UVW]/.test(a)){t=O;if(i&&!n&&e.dtick<O)e.dtick=O}else if(/%[Bbm]/.test(a)){t=E;if(i&&(n?re(e.dtick)<1:e.dtick<D))e.dtick="M1"}else if(/%[q]/.test(a)){t=T;if(i&&(n?re(e.dtick)<3:e.dtick<S))e.dtick="M3"}else if(/%[Yy]/.test(a)){t=x;if(i&&(n?re(e.dtick)<12:e.dtick<w))e.dtick="M12"}}}n=r();if(n&&e.tick0===e._dowTick0){e.tick0=e._rawTick0}e._definedDelta=t}function ae(e,t,r){for(var n=0;n<e.length;n++){var a=e[n].value;var i=n;var o=n+1;if(n<e.length-1){i=n;o=n+1}else if(n>0){i=n-1;o=n}else{i=n;o=n}var s=e[i].value;var l=e[o].value;var c=Math.abs(l-s);var u=r||c;var f=0;if(u>=w){if(c>=w&&c<=y){f=c}else{f=x}}else if(r===T&&u>=S){if(c>=S&&c<=A){f=c}else{f=T}}else if(u>=D){if(c>=D&&c<=L){f=c}else{f=E}}else if(r===O&&u>=O){f=O}else if(u>=P){f=P}else if(r===I&&u>=I){f=I}else if(r===R&&u>=R){f=R}var d;if(f>=c){f=c;d=true}var h=a+f;if(t.rangebreaks&&f>0){var p=84;var v=0;for(var g=0;g<p;g++){var m=(g+.5)/p;if(t.maskBreaks(a*(1-m)+m*h)!==z)v++}f*=v/p;if(!f){e[n].drop=true}if(d&&c>O)f=c}if(f>0||n===0){e[n].periodX=a+f/2}}}Z.calcTicks=function e(t,r){Z.prepTicks(t,r);var n=G.simpleMap(t.range,t.r2l,undefined,undefined,r);if(t.tickmode==="array")return ie(t);var a=J(n);var i=a[0];var o=a[1];var s=n[1]<n[0];var l=Math.min(n[0],n[1]);var c=Math.max(n[0],n[1]);var u=t.type==="log"&&!(C(t.dtick)||t.dtick.charAt(0)==="L");var f=t.ticklabelmode==="period";t._tmin=Z.tickFirst(t,r);if(t._tmin<i!==s)return[];if(t.type==="category"||t.type==="multicategory"){o=s?Math.max(-.5,o):Math.min(t._categories.length-.5,o)}var d=t._tmin;if(t.rangebreaks&&t._tick0Init!==t.tick0){d=Ze(d,t);if(!s){d=Z.tickIncrement(d,t.dtick,!s,t.calendar)}}if(f){d=Z.tickIncrement(d,t.dtick,!s,t.calendar)}var h=Math.max(1e3,t._length||0);var p=[];var v=null;for(;s?d>=o:d<=o;d=Z.tickIncrement(d,t.dtick,s,t.calendar)){if(t.rangebreaks){if(!s){if(d<i)continue;if(t.maskBreaks(d)===z&&Ze(d,t)>=c)break}}if(p.length>h||d===v)break;v=d;var g=false;if(u&&d!==(d|0)){g=true}p.push({minor:g,value:d})}if(f)ae(p,t,t._definedDelta);var m;if(t.rangebreaks){var _=t._id.charAt(0)==="y";var y=1;if(t.tickmode==="auto"){y=t.tickfont?t.tickfont.size:12}var b=NaN;for(m=p.length-1;m>-1;m--){if(p[m].drop){p.splice(m,1);continue}p[m].value=Ze(p[m].value,t);var x=t.c2p(p[m].value);if(_?b>x-y:b<x+y){p.splice(s?m+1:m,1)}else{b=x}}}if(Xe(t)&&Math.abs(n[1]-n[0])===360){p.pop()}t._tmax=(p[p.length-1]||{}).value;t._prevDateHead="";t._inCalcTicks=true;var w=[];var A,T;for(m=0;m<p.length;m++){var k=p[m].minor;var M=p[m].value;A=Z.tickText(t,M,false,k);T=p[m].periodX;if(T!==undefined){A.periodX=T;if(T>c||T<l){if(T>c)A.periodX=c;if(T<l)A.periodX=l;A.text=" ";t._prevDateHead=""}}w.push(A)}t._inCalcTicks=false;return w};function ie(t){var e=t.tickvals;var r=t.ticktext;var n=new Array(e.length);var a=G.simpleMap(t.range,t.r2l);var i=J(a);var o=Math.min(i[0],i[1]);var s=Math.max(i[0],i[1]);var l=0;if(!Array.isArray(r))r=[];var c=t.type==="category"?t.d2l_noadd:t.d2l;if(t.type==="log"&&String(t.dtick).charAt(0)!=="L"){t.dtick="L"+Math.pow(10,Math.floor(Math.min(t.range[0],t.range[1]))-1)}for(var u=0;u<e.length;u++){var f=c(e[u]);if(f>o&&f<s){if(r[u]===undefined)n[l]=Z.tickText(t,f);else n[l]=ve(t,f,String(r[u]));l++}}if(l<e.length)n.splice(l,e.length-l);if(t.rangebreaks){n=n.filter(function(e){return t.maskBreaks(e.x)!==z})}return n}var oe=[2,5,10];var se=[1,2,3,6,12];var le=[1,2,5,10,15,30];var ce=[1,2,3,7,14];var ue=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1];var fe=[-.301,0,.301,.699,1];var de=[15,30,45,90,180];function he(e,t,r){return t*G.roundUp(e/t,r)}Z.autoTicks=function(e,t){var r;function n(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if(e.type==="date"){e.tick0=G.dateTick0(e.calendar,0);var a=2*t;if(a>x){t/=x;r=n(10);e.dtick="M"+12*he(t,r,oe)}else if(a>E){t/=E;e.dtick="M"+he(t,1,se)}else if(a>P){e.dtick=he(t,P,e._hasDayOfWeekBreaks?[1,2,7,14]:ce);var i=Z.getTickFormat(e);var o=e.ticklabelmode==="period";if(o)e._rawTick0=e.tick0;if(/%[uVW]/.test(i)){e.tick0=G.dateTick0(e.calendar,2)}else{e.tick0=G.dateTick0(e.calendar,1)}if(o)e._dowTick0=e.tick0}else if(a>R){e.dtick=he(t,R,se)}else if(a>f){e.dtick=he(t,f,le)}else if(a>d){e.dtick=he(t,d,le)}else{r=n(10);e.dtick=he(t,r,oe)}}else if(e.type==="log"){e.tick0=0;var s=G.simpleMap(e.range,e.r2l);if(t>.7){e.dtick=Math.ceil(t)}else if(Math.abs(s[1]-s[0])<1){var l=1.5*Math.abs((s[1]-s[0])/t);t=Math.abs(Math.pow(10,s[1])-Math.pow(10,s[0]))/l;r=n(10);e.dtick="L"+he(t,r,oe)}else{e.dtick=t>.3?"D2":"D1"}}else if(e.type==="category"||e.type==="multicategory"){e.tick0=0;e.dtick=Math.ceil(Math.max(t,1))}else if(Xe(e)){e.tick0=0;r=1;e.dtick=he(t,r,de)}else{e.tick0=0;r=n(10);e.dtick=he(t,r,oe)}if(e.dtick===0)e.dtick=1;if(!C(e.dtick)&&typeof e.dtick!=="string"){var c=e.dtick;e.dtick=1;throw"ax.dtick error: "+String(c)}};function pe(e){var t=e.dtick;e._tickexponent=0;if(!C(t)&&typeof t!=="string"){t=1}if(e.type==="category"||e.type==="multicategory"){e._tickround=null}if(e.type==="date"){var r=e.r2l(e.tick0);var n=e.l2r(r).replace(/(^-|i)/g,"");var a=n.length;if(String(t).charAt(0)==="M"){if(a>10||n.substr(5)!=="01-01")e._tickround="d";else e._tickround=+t.substr(1)%12===0?"y":"m"}else if(t>=P&&a<=10||t>=P*15)e._tickround="d";else if(t>=f&&a<=16||t>=R)e._tickround="M";else if(t>=d&&a<=19||t>=f)e._tickround="S";else{var i=e.l2r(r+t).replace(/^-/,"").length;e._tickround=Math.max(a,i)-20;if(e._tickround<0)e._tickround=4}}else if(C(t)||t.charAt(0)==="L"){var o=e.range.map(e.r2d||Number);if(!C(t))t=Number(t.substr(1));e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var s=Math.max(Math.abs(o[0]),Math.abs(o[1]));var l=Math.floor(Math.log(s)/Math.LN10+.01);var c=e.minexponent===undefined?3:e.minexponent;if(Math.abs(l)>c){if(Te(e.exponentformat)&&!ke(l)){e._tickexponent=3*Math.round((l-1)/3)}else e._tickexponent=l}}else{e._tickround=null}}Z.tickIncrement=function(e,t,r,n){var a=r?-1:1;if(C(t))return G.increment(e,a*t);var i=t.charAt(0);var o=a*Number(t.substr(1));if(i==="M")return G.incrementMonth(e,o,n);if(i==="L")return Math.log(Math.pow(10,e)+o)/Math.LN10;if(i==="D"){var s=t==="D2"?fe:ue;var l=e+a*.01;var c=G.roundUp(G.mod(l,1),s,r);return Math.floor(l)+Math.log(k.round(Math.pow(10,c),1))/Math.LN10}throw"unrecognized dtick "+String(t)};Z.tickFirst=function(e,t){var r=e.r2l||Number;var n=G.simpleMap(e.range,r,undefined,undefined,t);var a=n[1]<n[0];var i=a?Math.floor:Math.ceil;var o=J(n)[0];var s=e.dtick;var l=r(e.tick0);if(C(s)){var c=i((o-l)/s)*s+l;if(e.type==="category"||e.type==="multicategory"){c=G.constrain(c,0,e._categories.length-1)}return c}var u=s.charAt(0);var f=Number(s.substr(1));if(u==="M"){var d=0;var h=l;var p,v,g;while(d<10){p=Z.tickIncrement(h,s,a,e.calendar);if((p-o)*(h-o)<=0){if(a)return Math.min(h,p);return Math.max(h,p)}v=(o-(h+p)/2)/(p-h);g=u+(Math.abs(Math.round(v))||1)*f;h=Z.tickIncrement(h,g,v<0?!a:a,e.calendar);d++}G.error("tickFirst did not converge",e);return h}else if(u==="L"){return Math.log(i((Math.pow(10,o)-l)/f)*f+l)/Math.LN10}else if(u==="D"){var m=s==="D2"?fe:ue;var _=G.roundUp(G.mod(o,1),m,a);return Math.floor(o)+Math.log(k.round(Math.pow(10,_),1))/Math.LN10}else throw"unrecognized dtick "+String(s)};Z.tickText=function(r,n,a,e){var t=ve(r,n);var i=r.tickmode==="array";var o=a||i;var s=r.type;var l=s==="category"?r.d2l_noadd:r.d2l;var c;if(i&&Array.isArray(r.ticktext)){var u=G.simpleMap(r.range,r.r2l);var f=(Math.abs(u[1]-u[0])-(r._lBreaks||0))/1e4;for(c=0;c<r.ticktext.length;c++){if(Math.abs(n-l(r.tickvals[c]))<f)break}if(c<r.ticktext.length){t.text=String(r.ticktext[c]);return t}}function d(e){if(e===undefined)return true;if(a)return e==="none";var t={first:r._tmin,last:r._tmax}[e];return e!=="all"&&n!==t}var h=a?"never":r.exponentformat!=="none"&&d(r.showexponent)?"hide":"";if(s==="date")ge(r,t,a,o);else if(s==="log")me(r,t,a,o,h);else if(s==="category")_e(r,t);else if(s==="multicategory")ye(r,t,a);else if(Xe(r))xe(r,t,a,o,h);else be(r,t,a,o,h);if(!e){if(r.tickprefix&&!d(r.showtickprefix))t.text=r.tickprefix+t.text;if(r.ticksuffix&&!d(r.showticksuffix))t.text+=r.ticksuffix}if(r.tickson==="boundaries"||r.showdividers){var p=function(e){var t=r.l2p(e);return t>=0&&t<=r._length?e:null};t.xbnd=[p(t.x-.5),p(t.x+r.dtick-.5)]}return t};Z.hoverLabelText=function(e,t,r){if(r)e=G.extendFlat({},e,{hoverformat:r});var n=Array.isArray(t)?t[0]:t;var a=Array.isArray(t)?t[1]:undefined;if(a!==undefined&&a!==n){return Z.hoverLabelText(e,n,r)+" - "+Z.hoverLabelText(e,a,r)}var i=e.type==="log"&&n<=0;var o=Z.tickText(e,e.c2l(i?-n:n),"hover").text;if(i){return n===0?"0":v+o}return o};function ve(e,t,r){var n=e.tickfont||{};return{x:t,dx:0,dy:0,text:r||"",fontSize:n.size,font:n.family,fontColor:n.color}}function ge(e,t,r,n){var a=e._tickround;var i=r&&e.hoverformat||Z.getTickFormat(e);if(n){if(C(a))a=4;else a={y:"m",m:"d",d:"M",M:"S",S:4}[a]}var o=G.formatDate(t.x,i,a,e._dateFormat,e.calendar,e._extraFormat);var s;var l=o.indexOf("\n");if(l!==-1){s=o.substr(l+1);o=o.substr(0,l)}if(n){if(o==="00:00:00"||o==="00:00"){o=s;s=""}else if(o.length===8){o=o.replace(/:00$/,"")}}if(s){if(r){if(a==="d")o+=", "+s;else o=s+(o?", "+o:"")}else{if(!e._inCalcTicks||e._prevDateHead!==s){e._prevDateHead=s;o+="<br>"+s}else{var c=Je(e);var u=e._realSide||e.side;if(!c&&u==="top"||c&&u==="bottom"){o+="<br> "}}}}t.text=o}function me(e,t,r,n,a){var i=e.dtick;var o=t.x;var s=e.tickformat;var l=typeof i==="string"&&i.charAt(0);if(a==="never"){a=""}if(n&&l!=="L"){i="L3";l="L"}if(s||l==="L"){t.text=Me(Math.pow(10,o),e,a,n)}else if(C(i)||l==="D"&&G.mod(o+.01,1)<.1){var c=Math.round(o);var u=Math.abs(c);var f=e.exponentformat;if(f==="power"||Te(f)&&ke(c)){if(c===0)t.text=1;else if(c===1)t.text="10";else t.text="10<sup>"+(c>1?"":v)+u+"</sup>";t.fontSize*=1.25}else if((f==="e"||f==="E")&&u>2){t.text="1"+f+(c>0?"+":v)+u}else{t.text=Me(Math.pow(10,o),e,"","fakehover");if(i==="D1"&&e._id.charAt(0)==="y"){t.dy-=t.fontSize/6}}}else if(l==="D"){t.text=String(Math.round(Math.pow(10,G.mod(o,1))));t.fontSize*=.75}else throw"unrecognized dtick "+String(i);if(e.dtick==="D1"){var d=String(t.text).charAt(0);if(d==="0"||d==="1"){if(e._id.charAt(0)==="y"){t.dx-=t.fontSize/4}else{t.dy+=t.fontSize/2;t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(o<0?.5:.25)}}}}function _e(e,t){var r=e._categories[Math.round(t.x)];if(r===undefined)r="";t.text=String(r)}function ye(e,t,r){var n=Math.round(t.x);var a=e._categories[n]||[];var i=a[1]===undefined?"":String(a[1]);var o=a[0]===undefined?"":String(a[0]);if(r){t.text=o+" - "+i}else{t.text=i;t.text2=o}}function be(e,t,r,n,a){if(a==="never"){a=""}else if(e.showexponent==="all"&&Math.abs(t.x/e.dtick)<1e-6){a="hide"}t.text=Me(t.x,e,a,n)}function xe(e,t,r,n,a){if(e.thetaunit==="radians"&&!r){var i=t.x/180;if(i===0){t.text="0"}else{var o=we(i);if(o[1]>=100){t.text=Me(G.deg2rad(t.x),e,a,n)}else{var s=t.x<0;if(o[1]===1){if(o[0]===1)t.text="";else t.text=o[0]+""}else{t.text=["<sup>",o[0],"</sup>","","<sub>",o[1],"</sub>",""].join("")}if(s)t.text=v+t.text}}}else{t.text=Me(t.x,e,a,n)}}function we(e){function r(e,t){return Math.abs(e-t)<=1e-6}function n(e,t){return r(t,0)?e:n(t,e%t)}function t(e){var t=1;while(!r(Math.round(e*t)/t,e)){t*=10}return t}var a=t(e);var i=e*a;var o=Math.abs(n(i,a));return[Math.round(i/o),Math.round(a/o)]}var Ae=["f","p","n","","m","","k","M","G","T"];function Te(e){return e==="SI"||e==="B"}function ke(e){return e>14||e<-15}function Me(e,t,r,n){var a=e<0;var i=t._tickround;var o=r||t.exponentformat||"B";var s=t._tickexponent;var l=Z.getTickFormat(t);var c=t.separatethousands;if(n){var u={exponentformat:o,minexponent:t.minexponent,dtick:t.showexponent==="none"?t.dtick:C(e)?Math.abs(e)||1:1,range:t.showexponent==="none"?t.range.map(t.r2d):[0,e||1]};pe(u);i=(Number(u._tickround)||0)+4;s=u._tickexponent;if(t.hoverformat)l=t.hoverformat}if(l)return t._numFormat(l)(e).replace(/-/g,v);var f=Math.pow(10,-i)/2;if(o==="none")s=0;e=Math.abs(e);if(e<f){e="0";a=false}else{e+=f;if(s){e*=Math.pow(10,-s);i+=s}if(i===0)e=String(Math.floor(e));else if(i<0){e=String(Math.round(e));e=e.substr(0,e.length+i);for(var d=i;d<0;d++)e+="0"}else{e=String(e);var h=e.indexOf(".")+1;if(h)e=e.substr(0,h+i).replace(/\.?0+$/,"")}e=G.numSeparate(e,t._separators,c)}if(s&&o!=="hide"){if(Te(o)&&ke(s))o="power";var p;if(s<0)p=v+-s;else if(o!=="power")p="+"+s;else p=String(s);if(o==="e"||o==="E"){e+=o+p}else if(o==="power"){e+="10<sup>"+p+"</sup>"}else if(o==="B"&&s===9){e+="B"}else if(Te(o)){e+=Ae[s/3+5]}}if(a)return v+e;return e}Z.getTickFormat=function(e){var t;function r(e){return typeof e!=="string"?e:Number(e.replace("M",""))*E}function o(e,t){var r=["L","D"];if(typeof e===typeof t){if(typeof e==="number"){return e-t}else{var n=r.indexOf(e.charAt(0));var a=r.indexOf(t.charAt(0));if(n===a){return Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,""))}else{return n-a}}}else{return typeof e==="number"?1:-1}}function n(e,t,r){var n=r||function(e){return e};var a=t[0];var i=t[1];return(!a&&typeof a!=="number"||n(a)<=n(e))&&(!i&&typeof i!=="number"||n(i)>=n(e))}function a(e,t){var r=t[0]===null;var n=t[1]===null;var a=o(e,t[0])>=0;var i=o(e,t[1])<=0;return(r||a)&&(n||i)}var i,s;if(e.tickformatstops&&e.tickformatstops.length>0){switch(e.type){case"date":case"linear":{for(t=0;t<e.tickformatstops.length;t++){s=e.tickformatstops[t];if(s.enabled&&n(e.dtick,s.dtickrange,r)){i=s;break}}break}case"log":{for(t=0;t<e.tickformatstops.length;t++){s=e.tickformatstops[t];if(s.enabled&&a(e.dtick,s.dtickrange)){i=s;break}}break}default:}}return i?i.value:e.tickformat};Z.getSubplots=function(e,t){var r=e._fullLayout._subplots;var n=r.cartesian.concat(r.gl2d||[]);var a=t?Z.findSubplotsWithAxis(n,t):n;a.sort(function(e,t){var r=e.substr(1).split("y");var n=t.substr(1).split("y");if(r[0]===n[0])return+r[1]-+n[1];return+r[0]-+n[0]});return a};Z.findSubplotsWithAxis=function(e,t){var r=new RegExp(t._id.charAt(0)==="x"?"^"+t._id+"y":t._id+"$");var n=[];for(var a=0;a<e.length;a++){var i=e[a];if(r.test(i))n.push(i)}return n};Z.makeClipPaths=function(e){var t=e._fullLayout;if(t._hasOnlyLargeSploms)return;var r={_offset:0,_length:t.width,_id:""};var n={_offset:0,_length:t.height,_id:""};var a=Z.list(e,"x",true);var i=Z.list(e,"y",true);var o=[];var s,l;for(s=0;s<a.length;s++){o.push({x:a[s],y:n});for(l=0;l<i.length;l++){if(s===0)o.push({x:r,y:i[l]});o.push({x:a[s],y:i[l]})}}var c=t._clips.selectAll(".axesclip").data(o,function(e){return e.x._id+e.y._id});c.enter().append("clipPath").classed("axesclip",true).attr("id",function(e){return"clip"+t._uid+e.x._id+e.y._id}).append("rect");c.exit().remove();c.each(function(e){k.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})};Z.draw=function(n,e,a){var i=n._fullLayout;if(e==="redraw"){i._paper.selectAll("g.subplot").each(function(e){var t=e[0];var r=i._plots[t];if(r){var n=r.xaxis;var a=r.yaxis;r.xaxislayer.selectAll("."+n._id+"tick").remove();r.yaxislayer.selectAll("."+a._id+"tick").remove();r.xaxislayer.selectAll("."+n._id+"tick2").remove();r.yaxislayer.selectAll("."+a._id+"tick2").remove();r.xaxislayer.selectAll("."+n._id+"divider").remove();r.yaxislayer.selectAll("."+a._id+"divider").remove();if(r.gridlayer)r.gridlayer.selectAll("path").remove();if(r.zerolinelayer)r.zerolinelayer.selectAll("path").remove();i._infolayer.select(".g-"+n._id+"title").remove();i._infolayer.select(".g-"+a._id+"title").remove()}})}var t=!e||e==="redraw"?Z.listIds(n):e;return G.syncOrAsync(t.map(function(r){return function(){if(!r)return;var e=Z.getFromId(n,r);var t=Z.drawOne(n,e,a);e._r=e.range.slice();e._rl=G.simpleMap(e._r,e.r2l);return t}}))};Z.drawOne=function(h,p,e){e=e||{};var t,r,n;p.setScale();var v=h._fullLayout;var a=p._id;var g=a.charAt(0);var m=Z.counterLetter(a);var i=v._plots[p._mainSubplot];if(!i)return;var o=i[g+"axislayer"];var s=p._mainLinePosition;var l=p._mainMirrorPosition;var c=p._vals=Z.calcTicks(p);var u=[p.mirror,s,l].join("_");for(t=0;t<c.length;t++){c[t].axInfo=u}p._selections={};if(p._tickAngles)p._prevTickAngles=p._tickAngles;p._tickAngles={};p._depth=null;var f={};function _(e){var t=a+(e||"tick");if(!f[t])f[t]=Ee(p,t);return f[t]}if(!p.visible)return;var d=Z.makeTransTickFn(p);var y=Z.makeTransTickLabelFn(p);var b;var x;var w=p.ticks==="inside";var A=p.ticks==="outside";if(p.tickson==="boundaries"){var T=Se(p,c);x=Z.clipEnds(p,T);b=w?x:T}else{x=Z.clipEnds(p,c);b=w&&p.ticklabelmode!=="period"?x:c}var k=p._gridVals=x;var M=Le(p,c);if(!v._hasOnlyLargeSploms){var S=p._subplotsWith;var C={};for(t=0;t<S.length;t++){r=S[t];n=v._plots[r];var L=n[m+"axis"];var E=L._mainAxis._id;if(C[E])continue;C[E]=1;var D=g==="x"?"M0,"+L._offset+"v"+L._length:"M"+L._offset+",0h"+L._length;Z.drawGrid(h,p,{vals:k,counterAxis:L,layer:n.gridlayer.select("."+a),path:D,transFn:d});Z.drawZeroLine(h,p,{counterAxis:L,layer:n.zerolinelayer,path:D,transFn:d})}}var O=Z.getTickSigns(p);var P=[];if(p.ticks){var I=Z.makeTickPath(p,s,O[2]);var R;var z;if(p._anchorAxis&&p.mirror&&p.mirror!==true){R=Z.makeTickPath(p,l,O[3]);z=I+R}else{R="";z=I}var N;if(p.showdividers&&A&&p.tickson==="boundaries"){var F={};for(t=0;t<M.length;t++){F[M[t].x]=1}N=function(e){return F[e.x]?R:z}}else{N=z}Z.drawTicks(h,p,{vals:b,layer:o,path:N,transFn:d});if(p.mirror==="allticks"){P=Object.keys(p._linepositions||{})}}for(t=0;t<P.length;t++){r=P[t];n=v._plots[r];var j=p._linepositions[r]||[];var B=Z.makeTickPath(p,j[0],O[0])+Z.makeTickPath(p,j[1],O[1]);Z.drawTicks(h,p,{vals:b,layer:n[g+"axislayer"],path:B,transFn:d})}var H=[];H.push(function(){return Z.drawLabels(h,p,{vals:c,layer:o,plotinfo:n,transFn:y,labelFns:Z.makeLabelFns(p,s)})});if(p.type==="multicategory"){var U={x:2,y:10}[g];H.push(function(){var e={x:"height",y:"width"}[g];var t=_()[e]+U+(p._tickAngles[a+"tick"]?p.tickfont.size*W:0);return Z.drawLabels(h,p,{vals:Ce(p,c),layer:o,cls:a+"tick2",repositionOnUpdate:true,secondary:true,transFn:d,labelFns:Z.makeLabelFns(p,s+t*O[4])})});H.push(function(){p._depth=O[4]*(_("tick2")[p.side]-s);return Ie(h,p,{vals:M,layer:o,path:Z.makeTickPath(p,s,O[4],p._depth),transFn:d})})}else if(p.title.hasOwnProperty("standoff")){H.push(function(){p._depth=O[4]*(_()[p.side]-s)})}var V=Y.getComponentMethod("rangeslider","isVisible")(p);H.push(function(){var e=p.side.charAt(0);var t=X[p.side].charAt(0);var r=Z.getPxPosition(h,p);var n=A?p.ticklen:0;var a;var i;var o;var s;if(p.automargin||V){if(p.type==="multicategory"){a=_("tick2")}else{a=_();if(g==="x"&&e==="b"){p._depth=Math.max(a.width>0?a.bottom-r:0,n)}}}if(p.automargin){i={x:0,y:0,r:0,l:0,t:0,b:0};var l=[0,1];if(g==="x"){if(e==="b"){i[e]=p._depth}else{i[e]=p._depth=Math.max(a.width>0?r-a.top:0,n);l.reverse()}if(a.width>0){var c=a.right-(p._offset+p._length);if(c>0){i.xr=1;i.r=c}var u=p._offset-a.left;if(u>0){i.xl=0;i.l=u}}}else{if(e==="l"){i[e]=p._depth=Math.max(a.height>0?r-a.left:0,n)}else{i[e]=p._depth=Math.max(a.height>0?a.right-r:0,n);l.reverse()}if(a.height>0){var f=a.bottom-(p._offset+p._length);if(f>0){i.yb=0;i.b=f}var d=p._offset-a.top;if(d>0){i.yt=1;i.t=d}}}i[m]=p.anchor==="free"?p.position:p._anchorAxis.domain[l[0]];if(p.title.text!==v._dfltTitle[g]){i[e]+=Re(p)+(p.title.standoff||0)}if(p.mirror&&p.anchor!=="free"){o={x:0,y:0,r:0,l:0,t:0,b:0};o[t]=p.linewidth;if(p.mirror&&p.mirror!==true)o[t]+=n;if(p.mirror===true||p.mirror==="ticks"){o[m]=p._anchorAxis.domain[l[1]]}else if(p.mirror==="all"||p.mirror==="allticks"){o[m]=[p._counterDomainMin,p._counterDomainMax][l[1]]}}}if(V){s=Y.getComponentMethod("rangeslider","autoMarginOpts")(h,p)}q.autoMargin(h,He(p),i);q.autoMargin(h,Ue(p),o);q.autoMargin(h,Ve(p),s)});if(!e.skipTitle&&!(V&&p.side==="bottom")){H.push(function(){return ze(h,p)})}return G.syncOrAsync(H)};function Se(e,t){var n=[];var r;var a=function(e,t){var r=e.xbnd[t];if(r!==null){n.push(G.extendFlat({},e,{x:r}))}};if(t.length){for(r=0;r<t.length;r++){a(t[r],0)}a(t[r-1],1)}return n}function Ce(e,t){var r=[];var n={};for(var a=0;a<t.length;a++){var i=t[a];if(n[i.text2]){n[i.text2].push(i.x)}else{n[i.text2]=[i.x]}}for(var o in n){r.push(ve(e,G.interp(n[o],.5),o))}return r}function Le(e,t){var n=[];var r,a;var i=t.length&&t[t.length-1].x<t[0].x;var o=function(e,t){var r=e.xbnd[t];if(r!==null){n.push(G.extendFlat({},e,{x:r}))}};if(e.showdividers&&t.length){for(r=0;r<t.length;r++){var s=t[r];if(s.text2!==a){o(s,i?1:0)}a=s.text2}o(t[r-1],i?0:1)}return n}function Ee(e,t){var r,n;var a,i;if(e._selections[t].size()){r=Infinity;n=-Infinity;a=Infinity;i=-Infinity;e._selections[t].each(function(){var e=Be(this);var t=M.bBox(e.node().parentNode);r=Math.min(r,t.top);n=Math.max(n,t.bottom);a=Math.min(a,t.left);i=Math.max(i,t.right)})}else{r=0;n=0;a=0;i=0}return{top:r,bottom:n,left:a,right:i,height:n-r,width:i-a}}Z.getTickSigns=function(e){var t=e._id.charAt(0);var r={x:"top",y:"right"}[t];var n=e.side===r?1:-1;var a=[-1,1,n,-n];if(e.ticks!=="inside"===(t==="x")){a=a.map(function(e){return-e})}if(e.side){a.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)])}return a};Z.makeTransTickFn=function(t){return t._id.charAt(0)==="x"?function(e){return h(t._offset+t.l2p(e.x),0)}:function(e){return h(0,t._offset+t.l2p(e.x))}};Z.makeTransTickLabelFn=function(t){var e=Oe(t);var r=e[0];var n=e[1];return t._id.charAt(0)==="x"?function(e){return h(r+t._offset+t.l2p(De(e)),n)}:function(e){return h(n,r+t._offset+t.l2p(De(e)))}};function De(e){return e.periodX!==undefined?e.periodX:e.x}function Oe(e){var t=e.ticklabelposition||"";var r=function(e){return t.indexOf(e)!==-1};var n=r("top");var a=r("left");var i=r("right");var o=r("bottom");var s=r("inside");var l=o||a||n||i;if(!l&&!s)return[0,0];var c=e.side;var u=l?(e.tickwidth||0)/2:0;var f=U;var d=e.tickfont?e.tickfont.size:12;if(o||n){u+=d*H;f+=(e.linewidth||0)/2}if(a||i){u+=(e.linewidth||0)/2;f+=U}if(s&&c==="top"){f-=d*(1-H)}if(a||n)u=-u;if(c==="bottom"||c==="right")f=-f;return[l?u:0,s?f:0]}Z.makeTickPath=function(e,t,r,n){n=n!==undefined?n:e.ticklen;var a=e._id.charAt(0);var i=(e.linewidth||1)/2;return a==="x"?"M0,"+(t+i*r)+"v"+n*r:"M"+(t+i*r)+",0h"+n*r};Z.makeLabelFns=function(n,t,e){var r=n.ticklabelposition||"";var a=function(e){return r.indexOf(e)!==-1};var i=a("top");var o=a("left");var s=a("right");var l=a("bottom");var c=l||o||i||s;var u=a("inside");var f=r==="inside"&&n.ticks==="inside"||!u&&n.ticks==="outside"&&n.tickson!=="boundaries";var d=0;var h=0;var p=f?n.ticklen:0;if(u){p*=-1}else if(c){p=0}if(f){d+=p;if(e){var v=G.deg2rad(e);d=p*Math.cos(v)+1;h=p*Math.sin(v)}}if(n.showticklabels&&(f||n.showline)){d+=.2*n.tickfont.size}d+=(n.linewidth||1)/2*(u?-1:1);var g={labelStandoff:d,labelShift:h};var m,_,y,b;var x=0;var w=n.side;var A=n._id.charAt(0);var T=n.tickangle;var k;if(A==="x"){k=!u&&w==="bottom"||u&&w==="top";b=k?1:-1;if(u)b*=-1;m=h*b;_=t+d*b;y=k?1:-.2;if(Math.abs(T)===90){if(u){y+=B}else{if(T===-90&&w==="bottom"){y=H}else if(T===90&&w==="top"){y=B}else{y=.5}}x=B/2*(T/90)}g.xFn=function(e){return e.dx+m+x*e.fontSize};g.yFn=function(e){return e.dy+_+e.fontSize*y};g.anchorFn=function(e,t){if(c){if(o)return"end";if(s)return"start"}if(!C(t)||t===0||t===180){return"middle"}return t*b<0!==u?"end":"start"};g.heightFn=function(e,t,r){return t<-60||t>60?-.5*r:n.side==="top"!==u?-r:0}}else if(A==="y"){k=!u&&w==="left"||u&&w==="right";b=k?1:-1;if(u)b*=-1;m=d;_=h*b;y=0;if(!u&&Math.abs(T)===90){if(T===-90&&w==="left"||T===90&&w==="right"){y=H}else{y=.5}}if(u){var M=C(T)?+T:0;if(M!==0){var S=G.deg2rad(M);x=Math.abs(Math.sin(S))*H*b;y=0}}g.xFn=function(e){return e.dx+t-(m+e.fontSize*y)*b+x*e.fontSize};g.yFn=function(e){return e.dy+_+e.fontSize*B};g.anchorFn=function(e,t){if(C(t)&&Math.abs(t)===90){return"middle"}return k?"end":"start"};g.heightFn=function(e,t,r){if(n.side==="right")t*=-1;return t<-30?-r:t<30?-.5*r:0}}return g};function Pe(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}Z.drawTicks=function(e,t,r){r=r||{};var n=t._id+"tick";var a=r.vals;if(t.ticklabelmode==="period"){a=a.slice();a.shift()}var i=r.layer.selectAll("path."+n).data(t.ticks?a:[],Pe);i.exit().remove();i.enter().append("path").classed(n,1).classed("ticks",1).classed("crisp",r.crisp!==false).call(u.stroke,t.tickcolor).style("stroke-width",M.crispRound(e,t.tickwidth,1)+"px").attr("d",r.path).style("display",null);$e(t,[F]);i.attr("transform",r.transFn)};Z.drawGrid=function(e,t,r){r=r||{};var n=t._id+"grid";var a=r.vals;var i=r.counterAxis;if(t.showgrid===false){a=[]}else if(i&&Z.shouldShowZeroLine(e,t,i)){var o=t.tickmode==="array";for(var s=0;s<a.length;s++){var l=a[s].x;if(o?!l:Math.abs(l)<t.dtick/100){a=a.slice(0,s).concat(a.slice(s+1));if(o)s--;else break}}}var c=r.layer.selectAll("path."+n).data(a,Pe);c.exit().remove();c.enter().append("path").classed(n,1).classed("crisp",r.crisp!==false);t._gw=M.crispRound(e,t.gridwidth,1);c.attr("transform",r.transFn).attr("d",r.path).call(u.stroke,t.gridcolor||"#ddd").style("stroke-width",t._gw+"px").style("display",null);$e(t,[N]);if(typeof r.path==="function")c.attr("d",r.path)};Z.drawZeroLine=function(e,t,r){r=r||r;var n=t._id+"zl";var a=Z.shouldShowZeroLine(e,t,r.counterAxis);var i=r.layer.selectAll("path."+n).data(a?[{x:0,id:t._id}]:[]);i.exit().remove();i.enter().append("path").classed(n,1).classed("zl",1).classed("crisp",r.crisp!==false).each(function(){r.layer.selectAll("path").sort(function(e,t){return o(e.id,t.id)})});i.attr("transform",r.transFn).attr("d",r.path).call(u.stroke,t.zerolinecolor||u.defaultLine).style("stroke-width",M.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null);$e(t,[c])};Z.drawLabels=function(p,m,_){_=_||{};var v=p._fullLayout;var e=m._id;var y=e.charAt(0);var t=_.cls||e+"tick";var b=_.vals;var d=_.labelFns;var x=_.secondary?0:m.tickangle;var r=(m._prevTickAngles||{})[t];var w=_.layer.selectAll("g."+t).data(m.showticklabels?b:[],Pe);var n=[];w.enter().append("g").classed(t,1).append("text").attr("text-anchor","middle").each(function(e){var t=k.select(this);var r=p._promises.length;t.call(g.positionText,d.xFn(e),d.yFn(e)).call(M.font,e.font,e.fontSize,e.fontColor).text(e.text).call(g.convertToTspans,p);if(p._promises[r]){n.push(p._promises.pop().then(function(){A(t,x)}))}else{A(t,x)}});$e(m,[j]);w.exit().remove();if(_.repositionOnUpdate){w.each(function(e){k.select(this).select("text").call(g.positionText,d.xFn(e),d.yFn(e))})}function A(e,f){e.each(function(e){var t=k.select(this);var r=t.select(".text-math-group");var n=d.anchorFn(e,f);var a=_.transFn.call(t.node(),e)+(C(f)&&+f!==0?" rotate("+f+","+d.xFn(e)+","+(d.yFn(e)-e.fontSize/2)+")":"");var i=g.lineCount(t);var o=W*e.fontSize;var s=d.heightFn(e,C(f)?+f:0,(i-1)*o);if(s){a+=h(0,s)}if(r.empty()){var l=t.select("text");l.attr({transform:a,"text-anchor":n});l.style("opacity",1);if(m._adjustTickLabelsOverflow){m._adjustTickLabelsOverflow()}}else{var c=M.bBox(r.node()).width;var u=c*{end:-.5,start:.5}[n];r.attr("transform",a+h(u,0))}})}m._adjustTickLabelsOverflow=function(){var e=m.ticklabeloverflow;if(!e||e==="allow")return;var o=e.indexOf("hide")!==-1;var s=m._id.charAt(0)==="x";var t=0;var r=s?p._fullLayout.width:p._fullLayout.height;if(e.indexOf("domain")!==-1){var n=G.simpleMap(m.range,m.r2l);t=m.l2p(n[0])+m._offset;r=m.l2p(n[1])+m._offset}var l=Math.min(t,r);var c=Math.max(t,r);var u=m.side;var f=Infinity;var d=-Infinity;w.each(function(e){var t=k.select(this);var r=t.select(".text-math-group");if(r.empty()){var n=M.bBox(t.node());var a=0;if(s){if(n.right>c)a=1;else if(n.left<l)a=1}else{if(n.bottom>c)a=1;else if(n.top+(m.tickangle?0:e.fontSize/4)<l)a=1}var i=t.select("text");if(a){if(o)i.style("opacity",0)}else{i.style("opacity",1);if(u==="bottom"||u==="right"){f=Math.min(f,s?n.top:n.left)}else{f=-Infinity}if(u==="top"||u==="left"){d=Math.max(d,s?n.bottom:n.right)}else{d=Infinity}}}});for(var a in v._plots){var i=v._plots[a];if(m._id!==i.xaxis._id&&m._id!==i.yaxis._id)continue;var h=s?i.yaxis:i.xaxis;if(h){h["_visibleLabelMin_"+m._id]=f;h["_visibleLabelMax_"+m._id]=d}}};m._hideCounterAxisInsideTickLabels=function(e){var t=m._id.charAt(0)==="x";var r=[];for(var n in v._plots){var a=v._plots[n];if(m._id!==a.xaxis._id&&m._id!==a.yaxis._id)continue;r.push(t?a.yaxis:a.xaxis)}r.forEach(function(i,o){if(i&&Je(i)){(e||[c,N,F,j]).forEach(function(n){var a=n.K==="tick"&&n.L==="text"&&m.ticklabelmode==="period";var e=v._plots[m._mainSubplot];var t;if(n.K===c.K)t=e.zerolinelayer.selectAll("."+m._id+"zl");else if(n.K===N.K)t=e.gridlayer.selectAll("."+m._id);else t=e[m._id.charAt(0)+"axislayer"];t.each(function(){var e=k.select(this);if(n.L)e=e.selectAll(n.L);e.each(function(e){var t=m.l2p(a?De(e):e.x)+m._offset;var r=k.select(this);if(t<m["_visibleLabelMax_"+i._id]&&t>m["_visibleLabelMin_"+i._id]){r.style("display","none")}else if(n.K==="tick"&&!o){r.style("display",null)}})})})}})};A(w,r+1?r:x);function a(){return n.length&&Promise.all(n)}var T=null;function i(){A(w,x);if(b.length&&y==="x"&&!C(x)&&(m.type!=="log"||String(m.dtick).charAt(0)!=="D")){T=0;var a=0;var i=[];var e;w.each(function(e){a=Math.max(a,e.fontSize);var t=m.l2p(e.x);var r=Be(this);var n=M.bBox(r.node());i.push({top:0,bottom:10,height:10,left:t-n.width/2,right:t+n.width/2+2,width:n.width+2})});if((m.tickson==="boundaries"||m.showdividers)&&!_.secondary){var t=2;if(m.ticks)t+=m.tickwidth/2;for(e=0;e<i.length;e++){var r=b[e].xbnd;var n=i[e];if(r[0]!==null&&n.left-m.l2p(r[0])<t||r[1]!==null&&m.l2p(r[1])-n.right<t){T=90;break}}}else{var o=b.length;var s=Math.abs((b[o-1].x-b[0].x)*m._m)/(o-1);var l=m.ticklabelposition||"";var c=function(e){return l.indexOf(e)!==-1};var u=c("top");var f=c("left");var d=c("right");var h=c("bottom");var p=h||f||u||d;var v=!p?0:(m.tickwidth||0)+2*U;var g=s<a*2.5||m.type==="multicategory";for(e=0;e<i.length-1;e++){if(G.bBoxIntersect(i[e],i[e+1],v)){T=g?90:30;break}}}if(T){A(w,T)}}}if(m._selections){m._selections[t]=w}var o=[a];if(m.automargin&&v._redrawFromAutoMarginCount&&r===90){T=90;o.push(function(){A(w,r)})}else{o.push(i)}if(m._tickAngles){o.push(function(){m._tickAngles[t]=T===null?C(x)?x:0:T})}var s=m._anchorAxis;if(s&&s.autorange&&Je(m)&&!V(v,m._id)){if(!v._insideTickLabelsAutorange){v._insideTickLabelsAutorange={}}v._insideTickLabelsAutorange[s._name+".autorange"]=s.autorange;o.push(function e(){w.each(function(e,t){var r=Be(this);var n=r.select(".text-math-group");if(n.empty()){m._vals[t].bb=M.bBox(r.node())}})})}var l=G.syncOrAsync(o);if(l&&l.then)p._promises.push(l);return l};function Ie(e,t,r){var n=t._id+"divider";var a=r.vals;var i=r.layer.selectAll("path."+n).data(a,Pe);i.exit().remove();i.enter().insert("path",":first-child").classed(n,1).classed("crisp",1).call(u.stroke,t.dividercolor).style("stroke-width",M.crispRound(e,t.dividerwidth,1)+"px");i.attr("transform",r.transFn).attr("d",r.path)}Z.getPxPosition=function(e,t){var r=e._fullLayout._size;var n=t._id.charAt(0);var a=t.side;var i;if(t.anchor!=="free"){i=t._anchorAxis}else if(n==="x"){i={_offset:r.t+(1-(t.position||0))*r.h,_length:0}}else if(n==="y"){i={_offset:r.l+(t.position||0)*r.w,_length:0}}if(a==="top"||a==="left"){return i._offset}else if(a==="bottom"||a==="right"){return i._offset+i._length}};function Re(e){var t=e.title.font.size;var r=(e.title.text.match(g.BR_TAG_ALL)||[]).length;if(e.title.hasOwnProperty("standoff")){return r?t*(H+r*W):t*H}else{return r?t*(r+1)*W:t}}function ze(e,t){var r=e._fullLayout;var n=t._id;var a=n.charAt(0);var i=t.title.font.size;var o;if(t.title.hasOwnProperty("standoff")){o=t._depth+t.title.standoff+Re(t)}else{var s=Je(t);if(t.type==="multicategory"){o=t._depth}else{var l=1.5*i;if(s){l=.5*i;if(t.ticks==="outside"){l+=t.ticklen}}o=10+l+(t.linewidth?t.linewidth-1:0)}if(!s){if(a==="x"){o+=t.side==="top"?i*(t.showticklabels?1:0):i*(t.showticklabels?1.5:.5)}else{o+=t.side==="right"?i*(t.showticklabels?1:.5):i*(t.showticklabels?.5:0)}}}var c=Z.getPxPosition(e,t);var u,f,d;if(a==="x"){f=t._offset+t._length/2;d=t.side==="top"?c-o:c+o}else{d=t._offset+t._length/2;f=t.side==="right"?c+o:c-o;u={rotate:"-90",offset:0}}var h;if(t.type!=="multicategory"){var p=t._selections[t._id+"tick"];h={selection:p,side:t.side};if(p&&p.node()&&p.node().parentNode){var v=M.getTranslate(p.node().parentNode);h.offsetLeft=v.x;h.offsetTop=v.y}if(t.title.hasOwnProperty("standoff")){h.pad=0}}return m.draw(e,n+"title",{propContainer:t,propName:t._name+".title.text",placeholder:r._dfltTitle[a],avoid:h,transform:u,attributes:{x:f,y:d,"text-anchor":"middle"}})}Z.shouldShowZeroLine=function(e,t,r){var n=G.simpleMap(t.range,t.r2l);return n[0]*n[1]<=0&&t.zeroline&&(t.type==="linear"||t.type==="-")&&!(t.rangebreaks&&t.maskBreaks(0)===z)&&(Ne(t,0)||!Fe(e,t,r,n)||je(e,t))};Z.clipEnds=function(t,e){return e.filter(function(e){return Ne(t,e.x)})};function Ne(e,t){var r=e.l2p(t);return r>1&&r<e._length-1}function Fe(e,i,t,r){var n=t._mainAxis;if(!n)return;var a=e._fullLayout;var o=i._id.charAt(0);var s=Z.counterLetter(i._id);var l=i._offset+(Math.abs(r[0])<Math.abs(r[1])===(o==="x")?0:i._length);function c(e){if(!e.showline||!e.linewidth)return false;var t=Math.max((e.linewidth+i.zerolinewidth)/2,1);function r(e){return typeof e==="number"&&Math.abs(e-l)<t}if(r(e._mainLinePosition)||r(e._mainMirrorPosition)){return true}var n=e._linepositions||{};for(var a in n){if(r(n[a][0])||r(n[a][1])){return true}}}var u=a._plots[t._mainSubplot];if(!(u.mainplotinfo||u).overlays.length){return c(t,l)}var f=Z.list(e,s);for(var d=0;d<f.length;d++){var h=f[d];if(h._mainAxis===n&&c(h,l)){return true}}}function je(e,t){var r=e._fullData;var n=t._mainSubplot;var a=t._id.charAt(0);for(var i=0;i<r.length;i++){var o=r[i];if(o.visible===true&&o.xaxis+o.yaxis===n){if(Y.traceIs(o,"bar-like")&&o.orientation==={x:"h",y:"v"}[a])return true;if(o.fill&&o.fill.charAt(o.fill.length-1)===a)return true}}return false}function Be(e){var t=k.select(e);var r=t.select(".text-math-group");return r.empty()?t.select("text"):r}Z.allowAutoMargin=function(e){var t=Z.list(e,"",true);for(var r=0;r<t.length;r++){var n=t[r];if(n.automargin){q.allowAutoMargin(e,He(n));if(n.mirror){q.allowAutoMargin(e,Ue(n))}}if(Y.getComponentMethod("rangeslider","isVisible")(n)){q.allowAutoMargin(e,Ve(n))}}};function He(e){return e._id+".automargin"}function Ue(e){return He(e)+".mirror"}function Ve(e){return e._id+".rangeslider"}Z.swap=function(e,t){var r=qe(e,t);for(var n=0;n<r.length;n++){Ge(e,r[n].x,r[n].y)}};function qe(e,t){var r=[];var n,a;for(n=0;n<t.length;n++){var i=[];var o=e._fullData[t[n]].xaxis;var s=e._fullData[t[n]].yaxis;if(!o||!s)continue;for(a=0;a<r.length;a++){if(r[a].x.indexOf(o)!==-1||r[a].y.indexOf(s)!==-1){i.push(a)}}if(!i.length){r.push({x:[o],y:[s]});continue}var l=r[i[0]];var c;if(i.length>1){for(a=1;a<i.length;a++){c=r[i[a]];Ye(l.x,c.x);Ye(l.y,c.y)}}Ye(l.x,[o]);Ye(l.y,[s])}return r}function Ye(e,t){for(var r=0;r<t.length;r++){if(e.indexOf(t[r])===-1)e.push(t[r])}}function Ge(e,t,r){var n=[];var a=[];var i=e.layout;var o,s;for(o=0;o<t.length;o++)n.push(Z.getFromId(e,t[o]));for(o=0;o<r.length;o++)a.push(Z.getFromId(e,r[o]));var l=Object.keys(b);var c=["anchor","domain","overlaying","position","side","tickangle","editType"];var u=["linear","log"];for(o=0;o<l.length;o++){var f=l[o];var d=n[0][f];var h=a[0][f];var p=true;var v=false;var g=false;if(f.charAt(0)==="_"||typeof d==="function"||c.indexOf(f)!==-1){continue}for(s=1;s<n.length&&p;s++){var m=n[s][f];if(f==="type"&&u.indexOf(d)!==-1&&u.indexOf(m)!==-1&&d!==m){v=true}else if(m!==d)p=false}for(s=1;s<a.length&&p;s++){var _=a[s][f];if(f==="type"&&u.indexOf(h)!==-1&&u.indexOf(_)!==-1&&h!==_){g=true}else if(a[s][f]!==h)p=false}if(p){if(v)i[n[0]._name].type="linear";if(g)i[a[0]._name].type="linear";We(i,f,n,a,e._fullLayout._dfltTitle)}}for(o=0;o<e._fullLayout.annotations.length;o++){var y=e._fullLayout.annotations[o];if(t.indexOf(y.xref)!==-1&&r.indexOf(y.yref)!==-1){G.swapAttrs(i.annotations[o],["?"])}}}function We(e,t,r,n,a){var i=G.nestedProperty;var o=i(e[r[0]._name],t).get();var s=i(e[n[0]._name],t).get();var l;if(t==="title"){if(o&&o.text===a.x){o.text=a.y}if(s&&s.text===a.y){s.text=a.x}}for(l=0;l<r.length;l++){i(e,r[l]._name+"."+t).set(s)}for(l=0;l<n.length;l++){i(e,n[l]._name+"."+t).set(o)}}function Xe(e){return e._id==="angularaxis"}function Ze(e,t){var r=t._rangebreaks.length;for(var n=0;n<r;n++){var a=t._rangebreaks[n];if(e>=a.min&&e<a.max){return a.max}}return e}function Je(e){return(e.ticklabelposition||"").indexOf("inside")!==-1}function $e(e,t){if(Je(e._anchorAxis||{})){if(e._hideCounterAxisInsideTickLabels){e._hideCounterAxisInsideTickLabels(t)}}}},{"../../components/color":100,"../../components/drawing":122,"../../components/titles":198,"../../constants/alignment":205,"../../constants/numerical":210,"../../lib":230,"../../lib/svg_text_utils":252,"../../plots/plots":311,"../../registry":313,"./autorange":275,"./axis_autotype":277,"./axis_ids":280,"./clean_ticks":282,"./layout_attributes":291,"./set_convert":297,"@plotly/d3":11,"fast-isnumeric":15}],277:[function(e,t,r){"use strict";var f=e("fast-isnumeric");var n=e("../../lib");var d=e("../../constants/numerical").BADNUM;var u=n.isArrayOrTypedArray;var h=n.isDateTime;var p=n.cleanNumber;var v=Math.round;t.exports=function e(t,r,n){var a=t;var i=n.noMultiCategory;if(u(a)&&!a.length)return"-";if(!i&&b(a))return"multicategory";if(i&&Array.isArray(a[0])){var o=[];for(var s=0;s<a.length;s++){if(u(a[s])){for(var l=0;l<a[s].length;l++){o.push(a[s][l])}}}a=o}if(m(a,r))return"date";var c=n.autotypenumbers!=="strict";if(y(a,c))return"category";if(g(a,c))return"linear";return"-"};function a(e,t){return t?f(e):typeof e==="number"}function g(e,t){var r=e.length;for(var n=0;n<r;n++){if(a(e[n],t))return true}return false}function m(e,t){var r=e.length;var n=_(r);var a=0;var i=0;var o={};for(var s=0;s<r;s+=n){var l=v(s);var c=e[l];var u=String(c);if(o[u])continue;o[u]=1;if(h(c,t))a++;if(f(c))i++}return a>i*2}function _(e){return Math.max(1,(e-1)/1e3)}function y(e,t){var r=e.length;var n=_(r);var a=0;var i=0;var o={};for(var s=0;s<r;s+=n){var l=v(s);var c=e[l];var u=String(c);if(o[u])continue;o[u]=1;var f=typeof c;if(f==="boolean")i++;else if(t?p(c)!==d:f==="number")a++;else if(f==="string")i++}return i>a*2}function b(e){return u(e[0])&&u(e[1])}},{"../../constants/numerical":210,"../../lib":230,"fast-isnumeric":15}],278:[function(e,t,r){"use strict";var d=e("fast-isnumeric");var S=e("../../registry");var C=e("../../lib");var L=e("../array_container_defaults");var E=e("./layout_attributes");var D=e("./tick_value_defaults");var O=e("./tick_mark_defaults");var P=e("./tick_label_defaults");var I=e("./category_order_defaults");var R=e("./line_grid_defaults");var z=e("./set_convert");var N=e("./constants").WEEKDAY_PATTERN;var h=e("./constants").HOUR_PATTERN;t.exports=function e(t,r,n,a,i){var o=a.letter;var s=a.font||{};var l=a.splomStash||{};var c=n("visible",!a.visibleDflt);var u=r._template||{};var f=r.type||u.type||"-";var d;if(f==="date"){var h=S.getComponentMethod("calendars","handleDefaults");h(t,r,"calendar",a.calendar);if(!a.noTicklabelmode){d=n("ticklabelmode")}}var p="";if(!a.noTicklabelposition||f==="multicategory"){p=C.coerce(t,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:d==="period"?["outside","inside"]:o==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")}if(!a.noTicklabeloverflow){n("ticklabeloverflow",p.indexOf("inside")!==-1?"hide past domain":f==="category"||f==="multicategory"?"allow":"hide past div")}z(r,i);var v=!r.isValidRange(t.range);if(v&&a.reverseDflt)v="reversed";var g=n("autorange",v);if(g&&(f==="linear"||f==="-"))n("rangemode");n("range");r.cleanRange();I(t,r,n,a);if(f!=="category"&&!a.noHover)n("hoverformat");var m=n("color");var _=m!==E.color.dflt?m:s.color;var y=l.label||i._dfltTitle[o];P(t,r,n,f,a,{pass:1});if(!c)return r;n("title.text",y);C.coerceFont(n,"title.font",{family:s.family,size:C.bigFont(s.size),color:_});D(t,r,n,f);P(t,r,n,f,a,{pass:2});O(t,r,n,a);R(t,r,n,{dfltColor:m,bgColor:a.bgColor,showGrid:a.showGrid,attributes:E});if(r.showline||r.ticks)n("mirror");if(a.automargin)n("automargin");var b=f==="multicategory";if(!a.noTickson&&(f==="category"||b)&&(r.ticks||r.showgrid)){var x;if(b)x="boundaries";var w=n("tickson",x);if(w==="boundaries"){delete r.ticklabelposition}}if(b){var A=n("showdividers");if(A){n("dividercolor");n("dividerwidth")}}if(f==="date"){L(t,r,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:F});if(!r.rangebreaks.length){delete r.rangebreaks}else{for(var T=0;T<r.rangebreaks.length;T++){if(r.rangebreaks[T].pattern===N){r._hasDayOfWeekBreaks=true;break}}z(r,i);if(i._has("scattergl")||i._has("splom")){for(var k=0;k<a.data.length;k++){var M=a.data[k];if(M.type==="scattergl"||M.type==="splom"){M.visible=false;C.warn(M.type+" traces do not work on axes with rangebreaks."+" Setting trace "+M.index+" to `visible: false`.")}}}}}return r};function F(r,n,e){function t(e,t){return C.coerce(r,n,E.rangebreaks,e,t)}var a=t("enabled");if(a){var i=t("bounds");if(i&&i.length>=2){var o="";var s,l;if(i.length===2){for(s=0;s<2;s++){l=p(i[s]);if(l){o=N;break}}}var c=t("pattern",o);if(c===N){for(s=0;s<2;s++){l=p(i[s]);if(l){n.bounds[s]=i[s]=l-1}}}if(c){for(s=0;s<2;s++){l=i[s];switch(c){case N:if(!d(l)){n.enabled=false;return}l=+l;if(l!==Math.floor(l)||l<0||l>=7){n.enabled=false;return}n.bounds[s]=i[s]=l;break;case h:if(!d(l)){n.enabled=false;return}l=+l;if(l<0||l>24){n.enabled=false;return}n.bounds[s]=i[s]=l;break}}}if(e.autorange===false){var u=e.range;if(u[0]<u[1]){if(i[0]<u[0]&&i[1]>u[1]){n.enabled=false;return}}else if(i[0]>u[0]&&i[1]<u[1]){n.enabled=false;return}}}else{var f=t("values");if(f&&f.length){t("dvalue")}else{n.enabled=false;return}}}}var n={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function p(e){if(typeof e!=="string")return;return n[e.substr(0,3).toLowerCase()]}},{"../../lib":230,"../../registry":313,"../array_container_defaults":271,"./category_order_defaults":281,"./constants":283,"./layout_attributes":291,"./line_grid_defaults":293,"./set_convert":297,"./tick_label_defaults":298,"./tick_mark_defaults":299,"./tick_value_defaults":300,"fast-isnumeric":15}],279:[function(e,t,r){"use strict";var n=e("../../constants/docs");var a=n.FORMAT_LINK;var i=n.DATE_FORMAT_LINK;function o(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?s:l)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}}function s(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+a+"."].join(" ")}function l(e,t){return s(e,t)+[" And for dates see: "+i+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}t.exports={axisHoverFormat:o,descriptionOnlyNumbers:s,descriptionWithDates:l}},{"../../constants/docs":207}],280:[function(e,t,u){"use strict";var o=e("../../registry");var s=e("./constants");u.id2name=function e(t){if(typeof t!=="string"||!t.match(s.AX_ID_PATTERN))return;var r=t.split(" ")[0].substr(1);if(r==="1")r="";return t.charAt(0)+"axis"+r};u.name2id=function e(t){if(!t.match(s.AX_NAME_PATTERN))return;var r=t.substr(5);if(r==="1")r="";return t.charAt(0)+r};u.cleanId=function e(t,r,n){var a=/( domain)$/.test(t);if(typeof t!=="string"||!t.match(s.AX_ID_PATTERN))return;if(r&&t.charAt(0)!==r)return;if(a&&!n)return;var i=t.split(" ")[0].substr(1).replace(/^0+/,"");if(i==="1")i="";return t.charAt(0)+i+(a&&n?" domain":"")};u.list=function(e,t,r){var n=e._fullLayout;if(!n)return[];var a=u.listIds(e,t);var i=new Array(a.length);var o;for(o=0;o<a.length;o++){var s=a[o];i[o]=n[s.charAt(0)+"axis"+s.substr(1)]}if(!r){var l=n._subplots.gl3d||[];for(o=0;o<l.length;o++){var c=n[l[o]];if(t)i.push(c[t+"axis"]);else i.push(c.xaxis,c.yaxis,c.zaxis)}}return i};u.listIds=function(e,t){var r=e._fullLayout;if(!r)return[];var n=r._subplots;if(t)return n[t+"axis"];return n.xaxis.concat(n.yaxis)};u.getFromId=function(e,t,r){var n=e._fullLayout;t=t===undefined||typeof t!=="string"?t:t.replace(" domain","");if(r==="x")t=t.replace(/y[0-9]*/,"");else if(r==="y")t=t.replace(/x[0-9]*/,"");return n[u.id2name(t)]};u.getFromTrace=function(e,t,r){var n=e._fullLayout;var a=null;if(o.traceIs(t,"gl3d")){var i=t.scene;if(i.substr(0,5)==="scene"){a=n[i][r+"axis"]}}else{a=u.getFromId(e,t[r+"axis"]||r)}return a};u.idSort=function(e,t){var r=e.charAt(0);var n=t.charAt(0);if(r!==n)return r>n?1:-1;return+(e.substr(1)||1)-+(t.substr(1)||1)};u.ref2id=function(e){return/^[xyz]/.test(e)?e.split(" ")[0]:false};function r(e,t){if(t&&t.length){for(var r=0;r<t.length;r++){if(t[r][e])return true}}return false}u.isLinked=function(e,t){return r(t,e._axisMatchGroups)||r(t,e._axisConstraintGroups)}},{"../../registry":313,"./constants":283}],281:[function(e,t,r){"use strict";function u(e,t){var r=t.dataAttr||e._id.charAt(0);var n={};var a;var i,o;if(t.axData){a=t.axData}else{a=[];for(i=0;i<t.data.length;i++){var s=t.data[i];if(s[r+"axis"]===e._id){a.push(s)}}}for(i=0;i<a.length;i++){var l=a[i][r];for(o=0;o<l.length;o++){var c=l[o];if(c!==null&&c!==undefined){n[c]=1}}}return Object.keys(n)}t.exports=function e(t,r,n,a){if(r.type!=="category")return;var i=t.categoryarray;var o=Array.isArray(i)&&i.length>0;var s;if(o)s="array";var l=n("categoryorder",s);var c;if(l==="array"){c=n("categoryarray")}if(!o&&l==="array"){l=r.categoryorder="trace"}if(l==="trace"){r._initialCategories=[]}else if(l==="array"){r._initialCategories=c.slice()}else{c=u(r,a).sort();if(l==="category ascending"){r._initialCategories=c}else if(l==="category descending"){r._initialCategories=c.reverse()}}}},{}],282:[function(e,t,r){"use strict";var l=e("fast-isnumeric");var a=e("../../lib");var n=e("../../constants/numerical");var c=n.ONEDAY;var i=n.ONEWEEK;r.dtick=function(e,t){var r=t==="log";var n=t==="date";var a=t==="category";var i=n?c:1;if(!e)return i;if(l(e)){e=Number(e);if(e<=0)return i;if(a){return Math.max(1,Math.round(e))}if(n){return Math.max(.1,e)}return e}if(typeof e!=="string"||!(n||r)){return i}var o=e.charAt(0);var s=e.substr(1);s=l(s)?Number(s):0;if(s<=0||!(n&&o==="M"&&s===Math.round(s)||r&&o==="L"||r&&o==="D"&&(s===1||s===2))){return i}return e};r.tick0=function(e,t,r,n){if(t==="date"){return a.cleanDate(e,a.dateTick0(r,n%i===0?1:0))}if(n==="D1"||n==="D2"){return undefined}return l(e)?Number(e):0}},{"../../constants/numerical":210,"../../lib":230,"fast-isnumeric":15}],283:[function(e,t,r){"use strict";var n=e("../../lib/regex").counter;t.exports={idRegex:{x:n("x","( domain)?"),y:n("y","( domain)?")},attrRegex:n("[xy]axis"),xAxisMatch:n("xaxis"),yAxisMatch:n("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":246}],284:[function(e,t,r){"use strict";var C=e("../../lib");var j=e("./autorange");var B=e("./axis_ids").id2name;var L=e("./layout_attributes");var H=e("./scale_zoom");var T=e("./set_convert");var U=e("../../constants/numerical").ALMOST_EQUAL;var i=e("../../constants/alignment").FROM_BL;r.handleDefaults=function(e,r,t){var n=t.axIds;var a=t.axHasImage;var i=r._axisConstraintGroups=[];var o=r._axisMatchGroups=[];var s,l,c,u,f,d,h,p;for(s=0;s<n.length;s++){u=B(n[s]);f=e[u];d=r[u];k(f,d,{axIds:n,layoutOut:r,hasImage:a[u]})}function v(e,t){for(s=0;s<e.length;s++){l=e[s];for(c in l){r[B(c)][t]=l}}}v(o,"_matchGroup");for(s=0;s<i.length;s++){l=i[s];for(c in l){d=r[B(c)];if(d.fixedrange){for(var g in l){var m=B(g);if((e[m]||{}).fixedrange===false){C.warn("fixedrange was specified as false for axis "+m+" but was overridden because another "+"axis in its constraint group has fixedrange true")}r[m].fixedrange=true}break}}}s=0;while(s<i.length){l=i[s];for(c in l){d=r[B(c)];if(d._matchGroup&&Object.keys(d._matchGroup).length===Object.keys(l).length){i.splice(s,1);s--}break}s++}v(i,"_constraintGroup");var _=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"];var y=false;var b=false;function x(){p=d[h];if(h==="rangebreaks"){b=d._hasDayOfWeekBreaks}}for(s=0;s<o.length;s++){l=o[s];for(var w=0;w<_.length;w++){h=_[w];p=null;var A;for(c in l){u=B(c);f=e[u];d=r[u];if(!(h in d)){continue}if(!d.matches){A=d;if(h in f){x();break}}if(p===null&&h in f){x()}}if(h==="range"&&p){y=true}if(h==="autorange"&&p===null&&y){p=false}if(p===null&&h in A){p=A[h]}if(p!==null){for(c in l){d=r[B(c)];d[h]=h==="range"?p.slice():p;if(h==="rangebreaks"){d._hasDayOfWeekBreaks=b;T(d,r)}}}}}};function k(r,n,e){var t=e.axIds;var a=e.layoutOut;var i=e.hasImage;var o=a._axisConstraintGroups;var s=a._axisMatchGroups;var l=n._id;var c=l.charAt(0);var u=((a._splomAxes||{})[c]||{})[l]||{};var f=n._id;var d=f.charAt(0)==="x";n._matchGroup=null;n._constraintGroup=null;function h(e,t){return C.coerce(r,n,L,e,t)}h("constrain",i?"domain":"range");C.coerce(r,n,{constraintoward:{valType:"enumerated",values:d?["left","center","right"]:["bottom","middle","top"],dflt:d?"center":"middle"}},"constraintoward");var p=n.type;var v,g;var m=[];for(v=0;v<t.length;v++){g=t[v];if(g===f)continue;var _=a[B(g)];if(_.type===p){m.push(g)}}var y=D(o,f);if(y){var b=[];for(v=0;v<m.length;v++){g=m[v];if(!y[g])b.push(g)}m=b}var x=m.length;var w,A;if(x&&(r.matches||u.matches)){w=C.coerce(r,n,{matches:{valType:"enumerated",values:m,dflt:m.indexOf(u.matches)!==-1?u.matches:undefined}},"matches")}var T=i&&!d?n.anchor:undefined;if(x&&!w&&(r.scaleanchor||T)){A=C.coerce(r,n,{scaleanchor:{valType:"enumerated",values:m}},"scaleanchor",T)}if(w){n._matchGroup=O(s,f,w,1);var k=a[B(w)];var M=E(a,n)/E(a,k);if(d!==(w.charAt(0)==="x")){M=(d?"x":"y")+M}O(o,f,w,M)}else if(r.matches&&t.indexOf(r.matches)!==-1){C.warn("ignored "+n._name+'.matches: "'+r.matches+'" to avoid an infinite loop')}if(A){var S=h("scaleratio");if(!S)S=n.scaleratio=1;O(o,f,A,S)}else if(r.scaleanchor&&t.indexOf(r.scaleanchor)!==-1){C.warn("ignored "+n._name+'.scaleanchor: "'+r.scaleanchor+'" to avoid either an infinite loop '+"and possibly inconsistent scaleratios, or because this axis "+"declares a *matches* constraint.")}}function E(e,t){var r=t.domain;if(!r){r=e[B(t.overlaying)].domain}return r[1]-r[0]}function D(e,t){for(var r=0;r<e.length;r++){if(e[r][t]){return e[r]}}return null}function O(e,t,r,n){var a,i,o,s,l;var c=D(e,t);if(c===null){c={};c[t]=1;l=e.length;e.push(c)}else{l=e.indexOf(c)}var u=Object.keys(c);for(a=0;a<e.length;a++){o=e[a];if(a!==l&&o[r]){var f=o[r];for(i=0;i<u.length;i++){s=u[i];o[s]=h(f,h(n,c[s]))}e.splice(l,1);return}}if(n!==1){for(i=0;i<u.length;i++){var d=u[i];c[d]=h(n,c[d])}}c[r]=1}function h(e,t){var r="";var n="";var a,i;if(typeof e==="string"){r=e.match(/^[xy]*/)[0];a=r.length;e=+e.substr(a)}if(typeof t==="string"){n=t.match(/^[xy]*/)[0];i=n.length;t=+t.substr(i)}var o=e*t;if(!a&&!i){return o}if(!a||!i||r.charAt(0)===n.charAt(0)){return r+n+e*t}if(a===i){return o}return(a>i?r.substr(i):n.substr(a))+o}function V(e,t){var r=t._size;var n=r.h/r.w;var a={};var i=Object.keys(e);for(var o=0;o<i.length;o++){var s=i[o];var l=e[s];if(typeof l==="string"){var c=l.match(/^[xy]*/)[0];var u=c.length;l=+l.substr(u);var f=c.charAt(0)==="y"?n:1/n;for(var d=0;d<u;d++){l*=f}}a[s]=l}return a}r.enforce=function e(t){var r=t._fullLayout;var n=r._axisConstraintGroups||[];var a,i,o,s,l,c,u,f;for(a=0;a<n.length;a++){o=V(n[a],r);var d=Object.keys(o);var h=Infinity;var p=0;var v=Infinity;var g={};var m={};var _=false;for(i=0;i<d.length;i++){s=d[i];m[s]=l=r[B(s)];if(l._inputDomain)l.domain=l._inputDomain.slice();else l._inputDomain=l.domain.slice();if(!l._inputRange)l._inputRange=l.range.slice();l.setScale();g[s]=c=Math.abs(l._m)/o[s];h=Math.min(h,c);if(l.constrain==="domain"||!l._constraintShrinkable){v=Math.min(v,c)}delete l._constraintShrinkable;p=Math.max(p,c);if(l.constrain==="domain")_=true}if(h>U*p&&!_)continue;for(i=0;i<d.length;i++){s=d[i];c=g[s];l=m[s];u=l.constrain;if(c!==v||u==="domain"){f=c/v;if(u==="range"){H(l,f)}else{var y=l._inputDomain;var b=(l.domain[1]-l.domain[0])/(y[1]-y[0]);var x=(l.r2l(l.range[1])-l.r2l(l.range[0]))/(l.r2l(l._inputRange[1])-l.r2l(l._inputRange[0]));f/=b;if(f*x<1){l.domain=l._input.domain=y.slice();H(l,f);continue}if(x<1){l.range=l._input.range=l._inputRange.slice();f*=x}if(l.autorange){var w=l.r2l(l.range[0]);var A=l.r2l(l.range[1]);var T=(w+A)/2;var k=T;var M=T;var S=Math.abs(A-T);var C=T-S*f*1.0001;var L=T+S*f*1.0001;var E=j.makePadFn(r,l,0);var D=j.makePadFn(r,l,1);q(l,f);var O=Math.abs(l._m);var P=j.concatExtremes(t,l);var I=P.min;var R=P.max;var z;var N;for(N=0;N<I.length;N++){z=I[N].val-E(I[N])/O;if(z>C&&z<k){k=z}}for(N=0;N<R.length;N++){z=R[N].val+D(R[N])/O;if(z<L&&z>M){M=z}}var F=(M-k)/(2*S);f/=F;k=l.l2r(k);M=l.l2r(M);l.range=l._input.range=w<A?[k,M]:[M,k]}q(l,f)}}}}};r.getAxisGroup=function e(t,r){var n=t._axisMatchGroups;for(var a=0;a<n.length;a++){var i=n[a];if(i[r])return"g"+a}return r};r.clean=function e(t,r){if(r._inputDomain){var n=false;var a=r._id;var i=t._fullLayout._axisConstraintGroups;for(var o=0;o<i.length;o++){if(i[o][a]){n=true;break}}if(!n||r.constrain!=="domain"){r._input.domain=r.domain=r._inputDomain;delete r._inputDomain}}};function q(e,t){var r=e._inputDomain;var n=i[e.constraintoward];var a=r[0]+(r[1]-r[0])*n;e.domain=e._input.domain=[a+(r[0]-a)/t,a+(r[1]-a)/t];e.setScale()}},{"../../constants/alignment":205,"../../constants/numerical":210,"../../lib":230,"./autorange":275,"./axis_ids":280,"./layout_attributes":291,"./scale_zoom":295,"./set_convert":297}],285:[function(e,t,r){"use strict";var pe=e("@plotly/d3");var ve=e("tinycolor2");var n=e("has-passive-events");var ge=e("../../registry");var me=e("../../lib");var i=me.strTranslate;var _e=e("../../lib/svg_text_utils");var a=e("../../components/color");var ye=e("../../components/drawing");var be=e("../../components/fx");var xe=e("./axes");var o=e("../../lib/setcursor");var we=e("../../components/dragelement");var s=e("../../components/dragelement/helpers");var Ae=s.selectingOrDrawing;var Te=s.freeMode;var ke=e("../../constants/alignment").FROM_TL;var Me=e("../../lib/clear_gl_canvases");var Se=e("../../plot_api/subroutines").redrawReglTraces;var Ce=e("../plots");var Le=e("./axis_ids").getFromId;var Ee=e("./select").prepSelect;var De=e("./select").clearSelect;var Oe=e("./select").selectOnClick;var Pe=e("./scale_zoom");var Ie=e("./constants");var Re=Ie.MINDRAG;var ze=Ie.MINZOOM;var l=true;function c(b,u,e,t,r,n,x,w){var i=b._fullLayout._zoomlayer;var f=x+w==="nsew";var d=(x+w).length===1;var A,T;var k,M;var h,p;var o,s;var v,g;var m;var S;var C,L;var l;var E,D;var O,P,I;var _;var y;var R;function c(){A=u.xaxis;T=u.yaxis;v=A._length;g=T._length;o=A._offset;s=T._offset;k={};k[A._id]=A;M={};M[T._id]=T;if(x&&w){var e=u.overlays;for(var t=0;t<e.length;t++){var r=e[t].xaxis;k[r._id]=r;var n=e[t].yaxis;M[n._id]=n}}h=et(k);p=et(M);C=Fe(h,w);L=Fe(p,x);l=!L&&!C;S=Qe(b,b._fullLayout._axisMatchGroups,k,M);m=Qe(b,b._fullLayout._axisConstraintGroups,k,M,S);var a=m.isSubplotConstrained||S.isSubplotConstrained;E=w||a;D=x||a;var i=b._fullLayout;O=i._has("scattergl");P=i._has("splom");I=i._has("svg")}c();var a=Ve(L+C,b._fullLayout.dragmode,f);var z=Ne(u,x+w+"drag",a,e,t,r,n);if(l&&!f){z.onmousedown=null;z.style.pointerEvents="none";return z}var N={element:z,gd:b,plotinfo:u};N.prepFn=function(e,t,r){var n=N.dragmode;var a=b._fullLayout.dragmode;if(a!==n){N.dragmode=a}c();y=b._fullLayout._invScaleX;R=b._fullLayout._invScaleY;if(!l){if(f){if(e.shiftKey){if(a==="pan")a="zoom";else if(!Ae(a))a="pan"}else if(e.ctrlKey){a="pan"}}else{a="pan"}}if(Te(a))N.minDrag=1;else N.minDrag=undefined;if(Ae(a)){N.xaxes=h;N.yaxes=p;Ee(e,t,r,N,a)}else{N.clickFn=j;if(Ae(n)){F()}if(!l){if(a==="zoom"){N.moveFn=$;N.doneFn=K;N.minDrag=1;J(e,t,r)}else if(a==="pan"){N.moveFn=ie;N.doneFn=ce}}}b._fullLayout._redrag=function(){var e=b._dragdata;if(e&&e.element===z){var t=b._fullLayout.dragmode;if(!Ae(t)){c();ue([0,0,v,g]);N.moveFn(e.dx,e.dy)}}}};function F(){N.plotinfo.selection=false;De(b)}function j(e,t){var r=N.gd;if(r._fullLayout._activeShapeIndex>=0){r._fullLayout._deactivateShape(r);return}var n=r._fullLayout.clickmode;We(r);if(e===2&&!d)le();if(f){if(n.indexOf("select")>-1){Oe(t,r,h,p,u.id,N)}if(n.indexOf("event")>-1){be.click(r,t,u.id)}}else if(e===1&&d){var a=x?T:A;var i=x==="s"||w==="w"?0:1;var o=a._name+".range["+i+"]";var s=je(a,i);var l="left";var c="middle";if(a.fixedrange)return;if(x){c=x==="n"?"top":"bottom";if(a.side==="right")l="right"}else if(w==="e")l="right";if(r._context.showAxisRangeEntryBoxes){pe.select(z).call(_e.makeEditable,{gd:r,immediate:true,background:r._fullLayout.paper_bgcolor,text:String(s),fill:a.tickfont?a.tickfont.color:"#444",horizontalAlign:l,verticalAlign:c}).on("edit",function(e){var t=a.d2r(e);if(t!==undefined){ge.call("_guiRelayout",r,o,t)}})}}}we.init(N);var B,H;var U;var V;var q;var Y;var G;var W;var X;var Z;function J(e,t,r){var n=z.getBoundingClientRect();B=t-n.left;H=r-n.top;b._fullLayout._calcInverseTransform(b);var a=me.apply3DTransform(b._fullLayout._invTransform)(B,H);B=a[0];H=a[1];U={l:B,r:B,w:0,t:H,b:H,h:0};V=b._hmpixcount?b._hmlumcount/b._hmpixcount:ve(b._fullLayout.plot_bgcolor).getLuminance();q="M0,0H"+v+"V"+g+"H0V0";Y=false;G="xy";Z=false;W=qe(i,V,o,s,q);X=Ye(i,o,s)}function $(e,t){if(b._transitioningWithDuration){return false}var r=Math.max(0,Math.min(v,y*e+B));var n=Math.max(0,Math.min(g,R*t+H));var a=Math.abs(r-B);var i=Math.abs(n-H);U.l=Math.min(B,r);U.r=Math.max(B,r);U.t=Math.min(H,n);U.b=Math.max(H,n);function o(){G="";U.r=U.l;U.t=U.b;X.attr("d","M0,0Z")}if(m.isSubplotConstrained){if(a>ze||i>ze){G="xy";if(a/v>i/g){i=a*g/v;if(H>n)U.t=H-i;else U.b=H+i}else{a=i*v/g;if(B>r)U.l=B-a;else U.r=B+a}X.attr("d",$e(U))}else{o()}}else if(S.isSubplotConstrained){if(a>ze||i>ze){G="xy";var s=Math.min(U.l/v,(g-U.b)/g);var l=Math.max(U.r/v,(g-U.t)/g);U.l=s*v;U.r=l*v;U.b=(1-s)*g;U.t=(1-l)*g;X.attr("d",$e(U))}else{o()}}else if(!L||i<Math.min(Math.max(a*.6,Re),ze)){if(a<Re||!C){o()}else{U.t=0;U.b=g;G="x";X.attr("d",Ze(U,H))}}else if(!C||a<Math.min(i*.6,ze)){U.l=0;U.r=v;G="y";X.attr("d",Je(U,B))}else{G="xy";X.attr("d",$e(U))}U.w=U.r-U.l;U.h=U.b-U.t;if(G)Z=true;b._dragged=Z;Ge(W,X,U,q,Y,V);Q();b.emit("plotly_relayouting",_);Y=true}function Q(){_={};if(G==="xy"||G==="x"){Be(h,U.l/v,U.r/v,_,m.xaxes);oe("x",_)}if(G==="xy"||G==="y"){Be(p,(g-U.b)/g,(g-U.t)/g,_,m.yaxes);oe("y",_)}}function K(){Q();We(b);ce();Xe(b)}var ee=[0,0,v,g];var te=null;var re=Ie.REDRAWDELAY;var ne=u.mainplot?b._fullLayout._plots[u.mainplot]:u;function ae(e){if(!b._context._scrollZoom.cartesian&&!b._fullLayout._enablescrollzoom){return}F();if(b._transitioningWithDuration){e.preventDefault();e.stopPropagation();return}c();clearTimeout(te);var t=-e.deltaY;if(!isFinite(t))t=e.wheelDelta/10;if(!isFinite(t)){me.log("Did not find wheel motion attributes: ",e);return}var r=Math.exp(-Math.min(Math.max(t,-20),20)/200);var n=ne.draglayer.select(".nsewdrag").node().getBoundingClientRect();var a=(e.clientX-n.left)/n.width;var i=(n.bottom-e.clientY)/n.height;var o;function s(t,e,r){if(t.fixedrange)return;var n=me.simpleMap(t.range,t.r2l);var a=n[0]+(n[1]-n[0])*e;function i(e){return t.l2r(a+(e-a)*r)}t.range=n.map(i)}if(E){if(!w)a=.5;for(o=0;o<h.length;o++){s(h[o],a,r)}oe("x");ee[2]*=r;ee[0]+=ee[2]*a*(1/r-1)}if(D){if(!x)i=.5;for(o=0;o<p.length;o++){s(p[o],i,r)}oe("y");ee[3]*=r;ee[1]+=ee[3]*(1-i)*(1/r-1)}ue(ee);se();b.emit("plotly_relayouting",_);te=setTimeout(function(){if(!b._fullLayout)return;ee=[0,0,v,g];ce()},re);e.preventDefault();return}if(x.length*w.length!==1){Ke(z,ae)}function ie(e,t){e=e*y;t=t*R;if(b._transitioningWithDuration){return}b._fullLayout._replotting=true;if(C==="ew"||L==="ns"){var r=C?-e:0;var n=L?-t:0;if(S.isSubplotConstrained){if(C&&L){var a=(e/v-t/g)/2;e=a*v;t=-a*g;r=-e;n=-t}if(L){r=-n*v/g}else{n=-r*g/v}}if(C){He(h,e);oe("x")}if(L){He(p,t);oe("y")}ue([r,n,v,g]);se();b.emit("plotly_relayouting",_);return}function i(e,t,r){var n=1-t;var a;var i;for(var o=0;o<e.length;o++){var s=e[o];if(s.fixedrange)continue;a=s;i=s._rl[n]+(s._rl[t]-s._rl[n])/Ue(r/s._length);var l=s.l2r(i);if(l!==false&&l!==undefined)s.range[t]=l}return a._length*(a._rl[t]-i)/(a._rl[t]-a._rl[n])}var o=C==="w"===(L==="n")?1:-1;if(C&&L&&(m.isSubplotConstrained||S.isSubplotConstrained)){var s=(e/v+o*t/g)/2;e=s*v;t=o*s*g}var l,c;if(C==="w")e=i(h,0,e);else if(C==="e")e=i(h,1,-e);else if(!C)e=0;if(L==="n")t=i(p,1,t);else if(L==="s")t=i(p,0,-t);else if(!L)t=0;l=C==="w"?e:0;c=L==="n"?t:0;if(m.isSubplotConstrained&&!S.isSubplotConstrained||S.isSubplotConstrained&&C&&L&&o>0){var u;if(S.isSubplotConstrained||!C&&L.length===1){for(u=0;u<h.length;u++){h[u].range=h[u]._r.slice();Pe(h[u],1-t/g)}e=t*v/g;l=e/2}if(S.isSubplotConstrained||!L&&C.length===1){for(u=0;u<p.length;u++){p[u].range=p[u]._r.slice();Pe(p[u],1-e/v)}t=e*g/v;c=t/2}}if(!S.isSubplotConstrained||!L){oe("x")}if(!S.isSubplotConstrained||!C){oe("y")}var f=v-e;var d=g-t;if(S.isSubplotConstrained&&!(C&&L)){if(C){c=l?0:e*g/v;d=f*g/v}else{l=c?0:t*v/g;f=d*v/g}}ue([l,c,f,d]);se();b.emit("plotly_relayouting",_)}function oe(e,t){var r=S.isSubplotConstrained?{x:p,y:h}[e]:S[e+"axes"];var n=S.isSubplotConstrained?{x:h,y:p}[e]:[];for(var a=0;a<r.length;a++){var i=r[a];var o=i._id;var s=S.xLinks[o]||S.yLinks[o];var l=n[0]||k[s]||M[s];if(l){if(t){t[i._name+".range[0]"]=t[l._name+".range[0]"];t[i._name+".range[1]"]=t[l._name+".range[1]"]}else{i.range=l.range.slice()}}}}function se(){var t=[];var r;function e(e){for(r=0;r<e.length;r++){if(!e[r].fixedrange)t.push(e[r]._id)}}if(E){e(h);e(m.xaxes);e(S.xaxes)}if(D){e(p);e(m.yaxes);e(S.yaxes)}_={};for(r=0;r<t.length;r++){var n=t[r];var a=Le(b,n);xe.drawOne(b,a,{skipTitle:true});_[a._name+".range[0]"]=a.range[0];_[a._name+".range[1]"]=a.range[1]}xe.redrawComponents(b,t)}function le(){if(b._transitioningWithDuration)return;var e=b._context.doubleClick;var t=[];if(C)t=t.concat(h);if(L)t=t.concat(p);if(S.xaxes)t=t.concat(S.xaxes);if(S.yaxes)t=t.concat(S.yaxes);var r={};var n,a,i;if(e==="reset+autosize"){e="autosize";for(a=0;a<t.length;a++){n=t[a];if(n._rangeInitial&&(n.range[0]!==n._rangeInitial[0]||n.range[1]!==n._rangeInitial[1])||!n._rangeInitial&&!n.autorange){e="reset";break}}}if(e==="autosize"){for(a=0;a<t.length;a++){n=t[a];if(!n.fixedrange)r[n._name+".autorange"]=true}}else if(e==="reset"){if(C||m.isSubplotConstrained)t=t.concat(m.xaxes);if(L&&!m.isSubplotConstrained)t=t.concat(m.yaxes);if(m.isSubplotConstrained){if(!C)t=t.concat(h);else if(!L)t=t.concat(p)}for(a=0;a<t.length;a++){n=t[a];if(!n.fixedrange){if(!n._rangeInitial){r[n._name+".autorange"]=true}else{i=n._rangeInitial;r[n._name+".range[0]"]=i[0];r[n._name+".range[1]"]=i[1]}}}}b.emit("plotly_doubleclick",null);ge.call("_guiRelayout",b,r)}function ce(){ue([0,0,v,g]);me.syncOrAsync([Ce.previousPromises,function(){b._fullLayout._replotting=false;ge.call("_guiRelayout",b,_)}],b)}function ue(e){var t=b._fullLayout;var r=t._plots;var n=t._subplots.cartesian;var a,i,o,s;if(P){ge.subplotsRegistry.splom.drag(b)}if(O){for(a=0;a<n.length;a++){i=r[n[a]];o=i.xaxis;s=i.yaxis;if(i._scene){var l=me.simpleMap(o.range,o.r2l);var c=me.simpleMap(s.range,s.r2l);i._scene.update({range:[l[0],c[0],l[1],c[1]]})}}}if(P||O){Me(b);Se(b)}if(I){var u=e[2]/A._length;var f=e[3]/T._length;for(a=0;a<n.length;a++){i=r[n[a]];o=i.xaxis;s=i.yaxis;var d=(E||S.isSubplotConstrained)&&!o.fixedrange&&k[o._id];var h=(D||S.isSubplotConstrained)&&!s.fixedrange&&M[s._id];var p,v;var g,m;if(d){p=u;g=w||S.isSubplotConstrained?e[0]:he(o,p)}else if(S.xaHash[o._id]){p=u;g=e[0]*o._length/A._length}else if(S.yaHash[o._id]){p=f;g=L==="ns"?-e[1]*o._length/T._length:he(o,p,{n:"top",s:"bottom"}[L])}else{p=fe(o,u,f);g=de(o,p)}if(h){v=f;m=x||S.isSubplotConstrained?e[1]:he(s,v)}else if(S.yaHash[s._id]){v=f;m=e[1]*s._length/T._length}else if(S.xaHash[s._id]){v=u;m=C==="ew"?-e[0]*s._length/A._length:he(s,v,{e:"right",w:"left"}[C])}else{v=fe(s,u,f);m=de(s,v)}if(!p&&!v){continue}if(!p)p=1;if(!v)v=1;var _=o._offset-g/p;var y=s._offset-m/v;i.clipRect.call(ye.setTranslate,g,m).call(ye.setScale,p,v);i.plot.call(ye.setTranslate,_,y).call(ye.setScale,1/p,1/v);if(p!==i.xScaleFactor||v!==i.yScaleFactor){ye.setPointGroupScale(i.zoomScalePts,p,v);ye.setTextPointsScale(i.zoomScaleTxt,p,v)}ye.hideOutsideRangePoints(i.clipOnAxisFalseTraces,i);i.xScaleFactor=p;i.yScaleFactor=v}}}function fe(e,t,r){if(e.fixedrange)return 0;if(E&&m.xaHash[e._id]){return t}if(D&&(m.isSubplotConstrained?m.xaHash:m.yaHash)[e._id]){return r}return 0}function de(e,t){if(t){e.range=e._r.slice();Pe(e,t);return he(e,t)}return 0}function he(e,t,r){return e._length*(1-t)*ke[r||e.constraintoward||"middle"]}return z}function u(t,e,r,n){var a=me.ensureSingle(t.draglayer,e,r,function(e){e.classed("drag",true).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id)});a.call(o,n);return a.node()}function Ne(e,t,r,n,a,i,o){var s=u(e,"rect",t,r);pe.select(s).call(ye.setRect,n,a,i,o);return s}function Fe(e,t){for(var r=0;r<e.length;r++){if(!e[r].fixedrange)return t}return""}function je(e,t){var r=e.range[t];var n=Math.abs(r-e.range[1-t]);var a;if(e.type==="date"){return r}else if(e.type==="log"){a=Math.ceil(Math.max(0,-Math.log(n)/Math.LN10))+3;return pe.format("."+a+"g")(Math.pow(10,r))}else{a=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(n)/Math.LN10)+4;return pe.format("."+String(a)+"g")(r)}}function Be(e,t,r,n,a){for(var i=0;i<e.length;i++){var o=e[i];if(o.fixedrange)continue;if(o.rangebreaks){var s=o._id.charAt(0)==="y";var l=s?1-t:t;var c=s?1-r:r;n[o._name+".range[0]"]=o.l2r(o.p2l(l*o._length));n[o._name+".range[1]"]=o.l2r(o.p2l(c*o._length))}else{var u=o._rl[0];var f=o._rl[1]-u;n[o._name+".range[0]"]=o.l2r(u+f*t);n[o._name+".range[1]"]=o.l2r(u+f*r)}}if(a&&a.length){var d=(t+(1-r))/2;Be(a,d,1-d,n,[])}}function He(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!n.fixedrange){if(n.rangebreaks){var a=0;var i=n._length;var o=n.p2l(a+t)-n.p2l(a);var s=n.p2l(i+t)-n.p2l(i);var l=(o+s)/2;n.range=[n.l2r(n._rl[0]-l),n.l2r(n._rl[1]-l)]}else{n.range=[n.l2r(n._rl[0]-t/n._m),n.l2r(n._rl[1]-t/n._m)]}}}}function Ue(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function Ve(e,t,r){if(!e)return"pointer";if(e==="nsew"){if(r)return"";if(t==="pan")return"move";return"crosshair"}return e.toLowerCase()+"-resize"}function qe(e,t,r,n,a){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",i(r,n)).attr("d",a+"Z")}function Ye(e,t,r){return e.append("path").attr("class","zoombox-corners").style({fill:a.background,stroke:a.defaultLine,"stroke-width":1,opacity:0}).attr("transform",i(t,r)).attr("d","M0,0Z")}function Ge(e,t,r,n,a,i){e.attr("d",n+"M"+r.l+","+r.t+"v"+r.h+"h"+r.w+"v-"+r.h+"h-"+r.w+"Z");f(e,t,a,i)}function f(e,t,r,n){if(!r){e.transition().style("fill",n>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200);t.transition().style("opacity",1).duration(200)}}function We(e){pe.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Xe(e){if(l&&e.data&&e._context.showTips){me.notifier(me._(e,"Double-click to zoom back out"),"long");l=false}}function Ze(e,t){return"M"+(e.l-.5)+","+(t-ze-.5)+"h-3v"+(2*ze+1)+"h3ZM"+(e.r+.5)+","+(t-ze-.5)+"h3v"+(2*ze+1)+"h-3Z"}function Je(e,t){return"M"+(t-ze-.5)+","+(e.t-.5)+"v-3h"+(2*ze+1)+"v3ZM"+(t-ze-.5)+","+(e.b+.5)+"v3h"+(2*ze+1)+"v-3Z"}function $e(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,ze)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function Qe(e,t,r,n,a){var i=false;var o={};var s={};var l,c,u,f;var d=(a||{}).xaHash;var h=(a||{}).yaHash;for(var p=0;p<t.length;p++){var v=t[p];for(l in r){if(v[l]){for(u in v){if(!(a&&(d[u]||h[u]))&&!(u.charAt(0)==="x"?r:n)[u]){o[u]=l}}for(c in n){if(!(a&&(d[c]||h[c]))&&v[c]){i=true}}}}for(c in n){if(v[c]){for(f in v){if(!(a&&(d[f]||h[f]))&&!(f.charAt(0)==="x"?r:n)[f]){s[f]=c}}}}}if(i){me.extendFlat(o,s);s={}}var g={};var m=[];for(u in o){var _=Le(e,u);m.push(_);g[_._id]=_}var y={};var b=[];for(f in s){var x=Le(e,f);b.push(x);y[x._id]=x}return{xaHash:g,yaHash:y,xaxes:m,yaxes:b,xLinks:o,yLinks:s,isSubplotConstrained:i}}function Ke(e,t){if(!n){if(e.onwheel!==undefined)e.onwheel=t;else if(e.onmousewheel!==undefined)e.onmousewheel=t;else if(!e.isAddedWheelEvent){e.isAddedWheelEvent=true;e.addEventListener("wheel",t,{passive:false})}}else{var r=e.onwheel!==undefined?"wheel":"mousewheel";if(e._onwheel){e.removeEventListener(r,e._onwheel)}e._onwheel=t;e.addEventListener(r,t,{passive:false})}}function et(e){var t=[];for(var r in e)t.push(e[r]);return t}t.exports={makeDragBox:c,makeDragger:u,makeRectDragger:Ne,makeZoombox:qe,makeCorners:Ye,updateZoombox:Ge,xyCorners:$e,transitionZoombox:f,removeZoombox:We,showDoubleClickNotifier:Xe,attachWheelEventHandler:Ke}},{"../../components/color":100,"../../components/dragelement":119,"../../components/dragelement/helpers":118,"../../components/drawing":122,"../../components/fx":140,"../../constants/alignment":205,"../../lib":230,"../../lib/clear_gl_canvases":218,"../../lib/setcursor":250,"../../lib/svg_text_utils":252,"../../plot_api/subroutines":266,"../../registry":313,"../plots":311,"./axes":276,"./axis_ids":280,"./constants":283,"./scale_zoom":295,"./select":296,"@plotly/d3":11,"has-passive-events":47,tinycolor2:65}],286:[function(e,t,n){"use strict";var a=e("@plotly/d3");var c=e("../../components/fx");var u=e("../../components/dragelement");var i=e("../../lib/setcursor");var f=e("./dragbox").makeDragBox;var d=e("./constants").DRAGGERSIZE;n.initInteractions=function e(s){var l=s._fullLayout;if(s._context.staticPlot){a.select(s).selectAll(".drag").remove();return}if(!l._has("cartesian")&&!l._has("splom"))return;var t=Object.keys(l._plots||{}).sort(function(e,t){if((l._plots[e].mainplot&&true)===(l._plots[t].mainplot&&true)){var r=e.split("y");var n=t.split("y");return r[0]===n[0]?Number(r[1]||1)-Number(n[1]||1):Number(r[0]||1)-Number(n[0]||1)}return l._plots[e].mainplot?1:-1});t.forEach(function(t){var e=l._plots[t];var r=e.xaxis;var n=e.yaxis;if(!e.mainplot){var a=f(s,e,r._offset,n._offset,r._length,n._length,"ns","ew");a.onmousemove=function(e){s._fullLayout._rehover=function(){if(s._fullLayout._hoversubplot===t&&s._fullLayout._plots[t]){c.hover(s,e,t)}};c.hover(s,e,t);s._fullLayout._lasthover=a;s._fullLayout._hoversubplot=t};a.onmouseout=function(e){if(s._dragging)return;s._fullLayout._hoversubplot=null;u.unhover(s,e)};if(s._context.showAxisDragHandles){f(s,e,r._offset-d,n._offset-d,d,d,"n","w");f(s,e,r._offset+r._length,n._offset-d,d,d,"n","e");f(s,e,r._offset-d,n._offset+n._length,d,d,"s","w");f(s,e,r._offset+r._length,n._offset+n._length,d,d,"s","e")}}if(s._context.showAxisDragHandles){if(t===r._mainSubplot){var i=r._mainLinePosition;if(r.side==="top")i-=d;f(s,e,r._offset+r._length*.1,i,r._length*.8,d,"","ew");f(s,e,r._offset,i,r._length*.1,d,"","w");f(s,e,r._offset+r._length*.9,i,r._length*.1,d,"","e")}if(t===n._mainSubplot){var o=n._mainLinePosition;if(n.side!=="right")o-=d;f(s,e,o,n._offset+n._length*.1,d,n._length*.8,"ns","");f(s,e,o,n._offset+n._length*.9,d,n._length*.1,"s","");f(s,e,o,n._offset,d,n._length*.1,"n","")}}});var r=l._hoverlayer.node();r.onmousemove=function(e){e.target=s._fullLayout._lasthover;c.hover(s,e,l._hoversubplot)};r.onclick=function(e){e.target=s._fullLayout._lasthover;c.click(s,e)};r.onmousedown=function(e){s._fullLayout._lasthover.onmousedown(e)};n.updateFx(s)};n.updateFx=function(e){var t=e._fullLayout;var r=t.dragmode==="pan"?"move":"crosshair";i(t._draggers,r)}},{"../../components/dragelement":119,"../../components/fx":140,"../../lib/setcursor":250,"./constants":283,"./dragbox":285,"@plotly/d3":11}],287:[function(e,t,r){"use strict";function n(e){var t=e._fullLayout._zoomlayer;if(t){t.selectAll(".outline-controllers").remove()}}function a(e){var t=e._fullLayout._zoomlayer;if(t){t.selectAll(".select-outline").remove()}e._fullLayout._drawing=false}t.exports={clearOutlineControllers:n,clearSelect:a}},{}],288:[function(e,t,r){"use strict";var n=e("../../lib").strTranslate;function a(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}function i(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}}function o(t){var r=t._id.charAt(0)==="y"?1:0;return function(e){return a(t,e[r])}}function s(e){return n(e.xaxis._offset,e.yaxis._offset)}t.exports={p2r:a,r2p:i,axValue:o,getTransform:s}},{"../../lib":230}],289:[function(e,t,r){"use strict";var y=e("../../registry");var b=e("../../lib");var x=e("./axis_ids");t.exports=function e(_){return function e(t,r){var n=t[_];if(!Array.isArray(n))return;var a=y.subplotsRegistry.cartesian;var i=a.idRegex;var o=r._subplots;var s=o.xaxis;var l=o.yaxis;var c=o.cartesian;var u=r._has("cartesian")||r._has("gl2d");for(var f=0;f<n.length;f++){var d=n[f];if(!b.isPlainObject(d))continue;var h=x.cleanId(d.xref,"x",false);var p=x.cleanId(d.yref,"y",false);var v=i.x.test(h);var g=i.y.test(p);if(v||g){if(!u)b.pushUnique(r._basePlotModules,a);var m=false;if(v&&s.indexOf(h)===-1){s.push(h);m=true}if(g&&l.indexOf(p)===-1){l.push(p);m=true}if(m&&v&&g){c.push(h+p)}}}}}},{"../../lib":230,"../../registry":313,"./axis_ids":280}],290:[function(e,t,r){"use strict";var b=e("@plotly/d3");var x=e("../../registry");var v=e("../../lib");var n=e("../plots");var w=e("../../components/drawing");var A=e("../get_data").getModuleCalcData;var _=e("./axis_ids");var T=e("./constants");var i=e("../../constants/xmlns_namespaces");var d=v.ensureSingle;function h(e,t,r){return v.ensureSingle(e,t,r,function(e){e.datum(r)})}r.name="cartesian";r.attr=["xaxis","yaxis"];r.idRoot=["x","y"];r.idRegex=T.idRegex;r.attrRegex=T.attrRegex;r.attributes=e("./attributes");r.layoutAttributes=e("./layout_attributes");r.supplyLayoutDefaults=e("./layout_defaults");r.transitionAxes=e("./transition_axes");r.finalizeSubplots=function(e,t){var r=t._subplots;var n=r.xaxis;var a=r.yaxis;var i=r.cartesian;var o=i.concat(r.gl2d||[]);var s={};var l={};var c,u,f;for(c=0;c<o.length;c++){var d=o[c].split("y");s[d[0]]=1;l["y"+d[1]]=1}for(c=0;c<n.length;c++){u=n[c];if(!s[u]){f=(e[_.id2name(u)]||{}).anchor;if(!T.idRegex.y.test(f))f="y";i.push(u+f);o.push(u+f);if(!l[f]){l[f]=1;v.pushUnique(a,f)}}}for(c=0;c<a.length;c++){f=a[c];if(!l[f]){u=(e[_.id2name(f)]||{}).anchor;if(!T.idRegex.x.test(u))u="x";i.push(u+f);o.push(u+f);if(!s[u]){s[u]=1;v.pushUnique(n,u)}}}if(!o.length){u="";f="";for(var h in e){if(T.attrRegex.test(h)){var p=h.charAt(0);if(p==="x"){if(!u||+h.substr(5)<+u.substr(5)){u=h}}else if(!f||+h.substr(5)<+f.substr(5)){f=h}}}u=u?_.name2id(u):"x";f=f?_.name2id(f):"y";n.push(u);a.push(f);i.push(u+f)}};r.plot=function(e,t,r,n){var a=e._fullLayout;var i=a._subplots.cartesian;var o=e.calcdata;var s;if(!Array.isArray(t)){t=[];for(s=0;s<o.length;s++)t.push(s)}for(s=0;s<i.length;s++){var l=i[s];var c=a._plots[l];var u=[];var f;for(var d=0;d<o.length;d++){var h=o[d];var p=h[0].trace;if(p.xaxis+p.yaxis===l){if(t.indexOf(p.index)!==-1||p.carpet){if(f&&f[0].trace.xaxis+f[0].trace.yaxis===l&&["tonextx","tonexty","tonext"].indexOf(p.fill)!==-1&&u.indexOf(f)===-1){u.push(f)}u.push(h)}f=h}}g(e,c,u,r,n)}};function g(n,a,e,i,o){var t=T.traceLayerClasses;var r=n._fullLayout;var s=r._modules;var l,c,u;var f=[];var d=[];for(var h=0;h<s.length;h++){l=s[h];var p=l.name;var v=x.modules[p].categories;if(v.svg){var g=l.layerName||p+"layer";var m=l.plot;c=A(e,m);u=c[0];e=c[1];if(u.length){f.push({i:t.indexOf(g),className:g,plotMethod:m,cdModule:u})}if(v.zoomScale){d.push("."+g)}}}f.sort(function(e,t){return e.i-t.i});var _=a.plot.selectAll("g.mlayer").data(f,function(e){return e.className});_.enter().append("g").attr("class",function(e){return e.className}).classed("mlayer",true).classed("rangeplot",a.isRangePlot);_.exit().remove();_.order();_.each(function(e){var t=b.select(this);var r=e.className;e.plotMethod(n,a,e.cdModule,t,i,o);if(T.clipOnAxisFalseQuery.indexOf("."+r)===-1){w.setClipUrl(t,a.layerClipId,n)}});if(r._has("scattergl")){l=x.getModule("scattergl");u=A(e,l)[0];l.plot(n,a,u)}if(!n._context.staticPlot){if(a._hasClipOnAxisFalse){a.clipOnAxisFalseTraces=a.plot.selectAll(T.clipOnAxisFalseQuery.join(",")).selectAll(".trace")}if(d.length){var y=a.plot.selectAll(d.join(",")).selectAll(".trace");a.zoomScalePts=y.selectAll("path.point");a.zoomScaleTxt=y.selectAll(".textpoint")}}}r.clean=function(e,t,r,n){var a=n._plots||{};var i=t._plots||{};var o=n._subplots||{};var s;var l,c;if(n._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms){for(c in a){s=a[c];if(s.plotgroup)s.plotgroup.remove()}}var u=n._has&&n._has("gl");var f=t._has&&t._has("gl");if(u&&!f){for(c in a){s=a[c];if(s._scene)s._scene.destroy()}}if(o.xaxis&&o.yaxis){var d=_.listIds({_fullLayout:n});for(l=0;l<d.length;l++){var h=d[l];if(!t[_.id2name(h)]){n._infolayer.selectAll(".g-"+h+"title").remove()}}}var p=n._has&&n._has("cartesian");var v=t._has&&t._has("cartesian");if(p&&!v){y(n._cartesianlayer.selectAll(".subplot"),n);n._defs.selectAll(".axesclip").remove();delete n._axisConstraintGroups;delete n._axisMatchGroups}else if(o.cartesian){for(l=0;l<o.cartesian.length;l++){var g=o.cartesian[l];if(!i[g]){var m="."+g+",."+g+"-x,."+g+"-y";n._cartesianlayer.selectAll(m).remove();k(g,n)}}}};r.drawFramework=function(n){var a=n._fullLayout;var e=o(n);var t=a._cartesianlayer.selectAll(".subplot").data(e,String);t.enter().append("g").attr("class",function(e){return"subplot "+e[0]});t.order();t.exit().call(y,a);t.each(function(e){var t=e[0];var r=a._plots[t];r.plotgroup=b.select(this);s(n,r);r.draglayer=d(a._draggers,"g",t)})};r.rangePlot=function(e,t,r){s(e,t);g(e,t,r);n.style(e)};function o(e){var t=e._fullLayout;var r=t._subplots.cartesian;var n=r.length;var a,i,o,s,l,c;var u=[];var f=[];for(a=0;a<n;a++){o=r[a];s=t._plots[o];l=s.xaxis;c=s.yaxis;var d=l._mainAxis;var h=c._mainAxis;var p=d._id+h._id;var v=t._plots[p];s.overlays=[];if(p!==o&&v){s.mainplot=p;s.mainplotinfo=v;f.push(o)}else{s.mainplot=undefined;s.mainplotinfo=undefined;u.push(o)}}for(a=0;a<f.length;a++){o=f[a];s=t._plots[o];s.mainplotinfo.overlays.push(s)}var g=u.concat(f);var m=new Array(n);for(a=0;a<n;a++){o=g[a];s=t._plots[o];l=s.xaxis;c=s.yaxis;var _=[o,l.layer,c.layer,l.overlaying||"",c.overlaying||""];for(i=0;i<s.overlays.length;i++){_.push(s.overlays[i].id)}m[a]=_}return m}function s(e,t){var r=t.plotgroup;var n=t.id;var a=T.layerValue2layerClass[t.xaxis.layer];var i=T.layerValue2layerClass[t.yaxis.layer];var o=e._fullLayout._hasOnlyLargeSploms;if(!t.mainplot){if(o){t.xlines=d(r,"path","xlines-above");t.ylines=d(r,"path","ylines-above");t.xaxislayer=d(r,"g","xaxislayer-above");t.yaxislayer=d(r,"g","yaxislayer-above")}else{var s=d(r,"g","layer-subplot");t.shapelayer=d(s,"g","shapelayer");t.imagelayer=d(s,"g","imagelayer");t.gridlayer=d(r,"g","gridlayer");t.zerolinelayer=d(r,"g","zerolinelayer");d(r,"path","xlines-below");d(r,"path","ylines-below");t.overlinesBelow=d(r,"g","overlines-below");d(r,"g","xaxislayer-below");d(r,"g","yaxislayer-below");t.overaxesBelow=d(r,"g","overaxes-below");t.plot=d(r,"g","plot");t.overplot=d(r,"g","overplot");t.xlines=d(r,"path","xlines-above");t.ylines=d(r,"path","ylines-above");t.overlinesAbove=d(r,"g","overlines-above");d(r,"g","xaxislayer-above");d(r,"g","yaxislayer-above");t.overaxesAbove=d(r,"g","overaxes-above");t.xlines=r.select(".xlines-"+a);t.ylines=r.select(".ylines-"+i);t.xaxislayer=r.select(".xaxislayer-"+a);t.yaxislayer=r.select(".yaxislayer-"+i)}}else{var l=t.mainplotinfo;var c=l.plotgroup;var u=n+"-x";var f=n+"-y";t.gridlayer=l.gridlayer;t.zerolinelayer=l.zerolinelayer;d(l.overlinesBelow,"path",u);d(l.overlinesBelow,"path",f);d(l.overaxesBelow,"g",u);d(l.overaxesBelow,"g",f);t.plot=d(l.overplot,"g",n);d(l.overlinesAbove,"path",u);d(l.overlinesAbove,"path",f);d(l.overaxesAbove,"g",u);d(l.overaxesAbove,"g",f);t.xlines=c.select(".overlines-"+a).select("."+u);t.ylines=c.select(".overlines-"+i).select("."+f);t.xaxislayer=c.select(".overaxes-"+a).select("."+u);t.yaxislayer=c.select(".overaxes-"+i).select("."+f)}if(!o){h(t.gridlayer,"g",t.xaxis._id);h(t.gridlayer,"g",t.yaxis._id);t.gridlayer.selectAll("g").map(function(e){return e[0]}).sort(_.idSort)}t.xlines.style("fill","none").classed("crisp",true);t.ylines.style("fill","none").classed("crisp",true)}function y(e,n){if(!e)return;var a={};e.each(function(e){var t=e[0];var r=b.select(this);r.remove();k(t,n);a[t]=true});for(var t in n._plots){var r=n._plots[t];var i=r.overlays||[];for(var o=0;o<i.length;o++){var s=i[o];if(a[s.id]){s.plot.selectAll(".trace").remove()}}}}function k(e,t){t._draggers.selectAll("g."+e).remove();t._defs.select("#clip"+t._uid+e+"plot").remove()}r.toSVG=function(e){var n=e._fullLayout._glimages;var r=b.select(e).selectAll(".svg-container");var t=r.filter(function(e,t){return t===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function a(){var e=this;var t=e.toDataURL("image/png");var r=n.append("svg:image");r.attr({xmlns:i.svg,"xlink:href":t,preserveAspectRatio:"none",x:0,y:0,width:e.width,height:e.height})}t.each(a)};r.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":122,"../../constants/xmlns_namespaces":211,"../../lib":230,"../../registry":313,"../get_data":307,"../plots":311,"./attributes":274,"./axis_ids":280,"./constants":283,"./graph_interact":286,"./layout_attributes":291,"./layout_defaults":292,"./transition_axes":301,"@plotly/d3":11}],291:[function(e,t,r){"use strict";var n=e("../font_attributes");var a=e("../../components/color/attributes");var i=e("../../components/drawing/attributes").dash;var o=e("../../lib/extend").extendFlat;var s=e("../../plot_api/plot_template").templatedArray;var l=e("../../plots/cartesian/axis_format_attributes").descriptionWithDates;var c=e("../../constants/numerical").ONEDAY;var u=e("./constants");var f=u.HOUR_PATTERN;var d=u.WEEKDAY_PATTERN;t.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:a.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:n({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:true},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[true,false,"reversed"],dflt:true,editType:"axrange",impliedEdits:{"range[0]":undefined,"range[1]":undefined}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":false},anim:true},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":false},anim:true}],editType:"axrange",impliedEdits:{autorange:false},anim:true},fixedrange:{valType:"boolean",dflt:false,editType:"calc"},scaleanchor:{valType:"enumerated",values:[u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"calc"},rangebreaks:s("rangebreak",{enabled:{valType:"boolean",dflt:true,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[d,f,""],editType:"calc"},values:{valType:"info_array",freeLength:true,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:c},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:undefined,dtick:undefined}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[true,"ticks",false,"all","allticks"],dflt:false,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:true,editType:"ticks"},automargin:{valType:"boolean",dflt:false,editType:"ticks"},showspikes:{valType:"boolean",dflt:false,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:o({},i,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:n({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:false,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:l("tick label")},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:true,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:l("hover text")},showline:{valType:"boolean",dflt:false,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:a.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:a.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:true,editType:"ticks"},dividercolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:n({editType:"ticks"})}}},{"../../components/color/attributes":99,"../../components/drawing/attributes":121,"../../constants/numerical":210,"../../lib/extend":224,"../../plot_api/plot_template":265,"../../plots/cartesian/axis_format_attributes":279,"../font_attributes":305,"./constants":283}],292:[function(e,t,r){"use strict";var se=e("../../lib");var le=e("../../components/color");var ce=e("../../components/fx/helpers").isUnifiedHover;var ue=e("../../components/fx/hovermode_defaults");var fe=e("../../plot_api/plot_template");var de=e("../layout_attributes");var he=e("./layout_attributes");var pe=e("./type_defaults");var ve=e("./axis_defaults");var ge=e("./constraints");var me=e("./position_defaults");var _e=e("./axis_ids");var ye=_e.id2name;var be=_e.name2id;var xe=e("./constants").AX_ID_PATTERN;var n=e("../../registry");var we=n.traceIs;var Ae=n.getComponentMethod;function Te(e,t,r){if(Array.isArray(e[t]))e[t].push(r);else e[t]=[r]}t.exports=function e(o,t,r){var n=t.autotypenumbers;var a={};var i={};var s={};var l={};var c={};var u={};var f={};var d={};var h={};var p={};var v,g;for(v=0;v<r.length;v++){var m=r[v];if(!we(m,"cartesian")&&!we(m,"gl2d"))continue;var _;if(m.xaxis){_=ye(m.xaxis);Te(a,_,m)}else if(m.xaxes){for(g=0;g<m.xaxes.length;g++){Te(a,ye(m.xaxes[g]),m)}}var y;if(m.yaxis){y=ye(m.yaxis);Te(a,y,m)}else if(m.yaxes){for(g=0;g<m.yaxes.length;g++){Te(a,ye(m.yaxes[g]),m)}}if(m.type==="funnel"){if(m.orientation==="h"){if(_)i[_]=true;if(y)f[y]=true}else{if(y)s[y]=true}}else if(m.type==="image"){if(y)d[y]=true;if(_)d[_]=true}else{if(y){c[y]=true;u[y]=true}if(!we(m,"carpet")||m.type==="carpet"&&!m._cheater){if(_)l[_]=true}}if(m.type==="carpet"&&m._cheater){if(_)i[_]=true}if(we(m,"2dMap")){h[_]=true;h[y]=true}if(we(m,"oriented")){var b=m.orientation==="h"?y:_;p[b]=true}}var x=t._subplots;var w=x.xaxis;var A=x.yaxis;var T=se.simpleMap(w,ye);var k=se.simpleMap(A,ye);var M=T.concat(k);var S=le.background;if(w.length&&A.length){S=se.coerce(o,t,de,"plot_bgcolor")}var C=le.combine(S,t.paper_bgcolor);var L;var E;var D;var O;var P;function I(){var e=a[L]||[];P._traceIndices=e.map(function(e){return e._expandedIndex});P._annIndices=[];P._shapeIndices=[];P._imgIndices=[];P._subplotsWith=[];P._counterAxes=[];P._name=P._attr=L;P._id=E}function R(e,t){return se.coerce(O,P,he,e,t)}function z(e,t){return se.coerce2(O,P,he,e,t)}function N(e){return e==="x"?A:w}function F(e,t){var r=e==="x"?T:k;var n=[];for(var a=0;a<r.length;a++){var i=r[a];if(i!==t&&!(o[i]||{}).overlaying){n.push(be(i))}}return n}var j={x:N("x"),y:N("y")};var B=j.x.concat(j.y);var H={};var U=[];function V(){var e=O.matches;if(xe.test(e)&&B.indexOf(e)===-1){H[e]=O.type;U=Object.keys(H)}}var q=ue(o,t);var Y=ce(q);for(v=0;v<M.length;v++){L=M[v];E=be(L);D=L.charAt(0);if(!se.isPlainObject(o[L])){o[L]={}}O=o[L];P=fe.newContainer(t,L,D+"axis");I();var G=D==="x"&&!l[L]&&i[L]||D==="y"&&!c[L]&&s[L];var W=D==="y"&&(!u[L]&&f[L]||d[L]);var X={letter:D,font:t.font,outerTicks:h[L],showGrid:!p[L],data:a[L]||[],bgColor:C,calendar:t.calendar,automargin:true,visibleDflt:G,reverseDflt:W,autotypenumbersDflt:n,splomStash:((t._splomAxes||{})[D]||{})[E]};R("uirevision",t.uirevision);pe(O,P,R,X);ve(O,P,R,X,t);var Z=Y&&D===q.charAt(0);var J=z("spikecolor",Y?P.color:undefined);var $=z("spikethickness",Y?1.5:undefined);var Q=z("spikedash",Y?"dot":undefined);var K=z("spikemode",Y?"across":undefined);var ee=z("spikesnap");var te=R("showspikes",!!Z||!!J||!!$||!!Q||!!K||!!ee);if(!te){delete P.spikecolor;delete P.spikethickness;delete P.spikedash;delete P.spikemode;delete P.spikesnap}me(O,P,R,{letter:D,counterAxes:j[D],overlayableAxes:F(D,L),grid:t.grid});R("title.standoff");V();P._input=O}v=0;while(v<U.length){E=U[v++];L=ye(E);D=L.charAt(0);if(!se.isPlainObject(o[L])){o[L]={}}O=o[L];P=fe.newContainer(t,L,D+"axis");I();var re={letter:D,font:t.font,outerTicks:h[L],showGrid:!p[L],data:[],bgColor:C,calendar:t.calendar,automargin:true,visibleDflt:false,reverseDflt:false,autotypenumbersDflt:n,splomStash:((t._splomAxes||{})[D]||{})[E]};R("uirevision",t.uirevision);P.type=H[E]||"linear";ve(O,P,R,re,t);me(O,P,R,{letter:D,counterAxes:j[D],overlayableAxes:F(D,L),grid:t.grid});R("fixedrange");V();P._input=O}var ne=Ae("rangeslider","handleDefaults");var ae=Ae("rangeselector","handleDefaults");for(v=0;v<T.length;v++){L=T[v];O=o[L];P=t[L];ne(o,t,L);if(P.type==="date"){ae(O,P,t,k,P.calendar)}R("fixedrange")}for(v=0;v<k.length;v++){L=k[v];O=o[L];P=t[L];var ie=t[ye(P.anchor)];var oe=Ae("rangeslider","isVisible")(ie);R("fixedrange",oe)}ge.handleDefaults(o,t,{axIds:B.concat(U).sort(_e.idSort),axHasImage:d})}},{"../../components/color":100,"../../components/fx/helpers":136,"../../components/fx/hovermode_defaults":139,"../../lib":230,"../../plot_api/plot_template":265,"../../registry":313,"../layout_attributes":309,"./axis_defaults":278,"./axis_ids":280,"./constants":283,"./constraints":284,"./layout_attributes":291,"./position_defaults":294,"./type_defaults":302}],293:[function(e,t,r){"use strict";var m=e("tinycolor2").mix;var _=e("../../components/color/attributes").lightFraction;var y=e("../../lib");t.exports=function e(r,n,t,a){a=a||{};var i=a.dfltColor;function o(e,t){return y.coerce2(r,n,a.attributes,e,t)}var s=o("linecolor",i);var l=o("linewidth");var c=t("showline",a.showLine||!!s||!!l);if(!c){delete n.linecolor;delete n.linewidth}var u=m(i,a.bgColor,a.blend||_).toRgbString();var f=o("gridcolor",u);var d=o("gridwidth");var h=t("showgrid",a.showGrid||!!f||!!d);if(!h){delete n.gridcolor;delete n.gridwidth}if(!a.noZeroLine){var p=o("zerolinecolor",i);var v=o("zerolinewidth");var g=t("zeroline",a.showGrid||!!p||!!v);if(!g){delete n.zerolinecolor;delete n.zerolinewidth}}}},{"../../components/color/attributes":99,"../../lib":230,tinycolor2:65}],294:[function(e,t,r){"use strict";var g=e("fast-isnumeric");var m=e("../../lib");t.exports=function e(t,r,n,a){var i=a.counterAxes||[];var o=a.overlayableAxes||[];var s=a.letter;var l=a.grid;var c,u,f,d;if(l){u=l._domains[s][l._axisMap[r._id]];c=l._anchors[r._id];if(u){f=l[s+"side"].split(" ")[0];d=l.domain[s][f==="right"||f==="top"?1:0]}}u=u||[0,1];c=c||(g(t.position)?"free":i[0]||"free");f=f||(s==="x"?"bottom":"left");d=d||0;var h=m.coerce(t,r,{anchor:{valType:"enumerated",values:["free"].concat(i),dflt:c}},"anchor");if(h==="free")n("position",d);m.coerce(t,r,{side:{valType:"enumerated",values:s==="x"?["bottom","top"]:["left","right"],dflt:f}},"side");var p=false;if(o.length){p=m.coerce(t,r,{overlaying:{valType:"enumerated",values:[false].concat(o),dflt:false}},"overlaying")}if(!p){var v=n("domain",u);if(v[0]>v[1]-1/4096)r.domain=u;m.noneOrAll(t.domain,r.domain,u)}n("layer");return r}},{"../../lib":230,"fast-isnumeric":15}],295:[function(e,t,r){"use strict";var o=e("../../constants/alignment").FROM_BL;t.exports=function e(t,r,n){if(n===undefined){n=o[t.constraintoward||"center"]}var a=[t.r2l(t.range[0]),t.r2l(t.range[1])];var i=a[0]+(a[1]-a[0])*n;t.range=t._input.range=[t.l2r(i+(a[0]-i)*r),t.l2r(i+(a[1]-i)*r)];t.setScale()}},{"../../constants/alignment":205}],296:[function(e,t,r){"use strict";var a=e("polybooljs");var g=e("../../registry");var G=e("../../components/drawing").dashStyle;var W=e("../../components/color");var X=e("../../components/fx");var i=e("../../components/fx/helpers").makeEventData;var n=e("../../components/dragelement/helpers");var Z=n.freeMode;var J=n.rectMode;var $=n.drawMode;var Q=n.openMode;var K=n.selectMode;var ee=e("../../components/shapes/draw_newshape/display_outlines");var te=e("../../components/shapes/draw_newshape/helpers").handleEllipse;var l=e("../../components/shapes/draw_newshape/newshapes");var re=e("../../lib");var c=e("../../lib/polygon");var ne=e("../../lib/throttle");var h=e("./axis_ids").getFromId;var m=e("../../lib/clear_gl_canvases");var _=e("../../plot_api/subroutines").redrawReglTraces;var ae=e("./constants");var ie=ae.MINSELECT;var oe=c.filter;var se=c.tester;var u=e("./handle_outline").clearSelect;var o=e("./helpers");var le=o.p2r;var ce=o.axValue;var ue=o.getTransform;function s(e,t,r,l,n){var c=Z(n);var u=J(n);var f=Q(n);var d=$(n);var h=K(n);var a=n==="drawline";var p=n==="drawcircle";var v=a||p;var g=l.gd;var m=g._fullLayout;var i=m._zoomlayer;var o=l.element.getBoundingClientRect();var s=l.plotinfo;var _=ue(s);var y=t-o.left;var b=r-o.top;m._calcInverseTransform(g);var x=re.apply3DTransform(m._invTransform)(y,b);y=x[0];b=x[1];var w=m._invScaleX;var A=m._invScaleY;var T=y;var k=b;var M="M"+y+","+b;var S=l.xaxes[0]._length;var C=l.yaxes[0]._length;var L=l.xaxes.concat(l.yaxes);var E=e.altKey&&!($(n)&&f);var D,O,P,I;var R,z,N;he(e,g,l);if(c){D=oe([[y,b]],ae.BENDPX)}var F=i.selectAll("path.select-outline-"+s.id).data(d?[0]:[1,2]);var j=m.newshape;F.enter().append("path").attr("class",function(e){return"select-outline select-outline-"+e+" select-outline-"+s.id}).style(d?{opacity:j.opacity/2,fill:f?undefined:j.fillcolor,stroke:j.line.color,"stroke-dasharray":G(j.line.dash,j.line.width),"stroke-width":j.line.width+"px"}:{}).attr("fill-rule",j.fillrule).classed("cursor-move",d?true:false).attr("transform",_).attr("d",M+"Z");var B=i.append("path").attr("class","zoombox-corners").style({fill:W.background,stroke:W.defaultLine,"stroke-width":1}).attr("transform",_).attr("d","M0,0Z");var H=m._uid+ae.SELECTID;var U=[];var V=ve(g,l.xaxes,l.yaxes,l.subplot);function q(e,t){return e-t}var Y;if(s.fillRangeItems){Y=s.fillRangeItems}else{if(u){Y=function(e,t){var r=e.range={};for(R=0;R<L.length;R++){var n=L[R];var a=n._id.charAt(0);r[n._id]=[le(n,t[a+"min"]),le(n,t[a+"max"])].sort(q)}}}else{Y=function(e,t,r){var n=e.lassoPoints={};for(R=0;R<L.length;R++){var a=L[R];n[a._id]=r.filtered.map(ce(a))}}}}l.moveFn=function(e,t){T=Math.max(0,Math.min(S,w*e+y));k=Math.max(0,Math.min(C,A*t+b));var r=Math.abs(T-y);var n=Math.abs(k-b);if(u){var a;var i,o;if(h){var s=m.selectdirection;if(s==="any"){if(n<Math.min(r*.6,ie)){a="h"}else if(r<Math.min(n*.6,ie)){a="v"}else{a="d"}}else{a=s}switch(a){case"h":i=p?C/2:0;o=C;break;case"v":i=p?S/2:0;o=S;break}}if(d){switch(m.newshape.drawdirection){case"vertical":a="h";i=p?C/2:0;o=C;break;case"horizontal":a="v";i=p?S/2:0;o=S;break;case"ortho":if(r<n){a="h";i=b;o=k}else{a="v";i=y;o=T}break;default:a="d"}}if(a==="h"){I=v?te(p,[T,i],[T,o]):[[y,i],[y,o],[T,o],[T,i]];I.xmin=v?T:Math.min(y,T);I.xmax=v?T:Math.max(y,T);I.ymin=Math.min(i,o);I.ymax=Math.max(i,o);B.attr("d","M"+I.xmin+","+(b-ie)+"h-4v"+2*ie+"h4Z"+"M"+(I.xmax-1)+","+(b-ie)+"h4v"+2*ie+"h-4Z")}else if(a==="v"){I=v?te(p,[i,k],[o,k]):[[i,b],[i,k],[o,k],[o,b]];I.xmin=Math.min(i,o);I.xmax=Math.max(i,o);I.ymin=v?k:Math.min(b,k);I.ymax=v?k:Math.max(b,k);B.attr("d","M"+(y-ie)+","+I.ymin+"v-4h"+2*ie+"v4Z"+"M"+(y-ie)+","+(I.ymax-1)+"v4h"+2*ie+"v-4Z")}else if(a==="d"){I=v?te(p,[y,b],[T,k]):[[y,b],[y,k],[T,k],[T,b]];I.xmin=Math.min(y,T);I.xmax=Math.max(y,T);I.ymin=Math.min(b,k);I.ymax=Math.max(b,k);B.attr("d","M0,0Z")}}else if(c){D.addPt([T,k]);I=D.filtered}if(l.selectionDefs&&l.selectionDefs.length){P=me(l.mergedPolygons,I,E);I.subtract=E;O=de(l.selectionDefs.concat([I]))}else{P=[I];O=se(I)}ee(ye(P,f),F,l);if(h){ne.throttle(H,ae.SELECTDELAY,function(){U=[];var e;var t=[];var r;for(R=0;R<V.length;R++){z=V[R];r=z._module.selectPoints(z,O);t.push(r);e=_e(r,z);if(U.length){for(var n=0;n<e.length;n++){U.push(e[n])}}else U=e}N={points:U};ge(g,V,N);Y(N,I,D);l.gd.emit("plotly_selecting",N)})}};l.clickFn=function(e,t){B.remove();if(g._fullLayout._activeShapeIndex>=0){g._fullLayout._deactivateShape(g);return}if(d)return;var r=m.clickmode;ne.done(H).then(function(){ne.clear(H);if(e===2){F.remove();for(R=0;R<V.length;R++){z=V[R];z._module.selectPoints(z,false)}ge(g,V);pe(l);g.emit("plotly_deselect",null)}else{if(r.indexOf("select")>-1){fe(t,g,l.xaxes,l.yaxes,l.subplot,l,F)}if(r==="event"){g.emit("plotly_selected",undefined)}}X.click(g,t)}).catch(re.error)};l.doneFn=function(){B.remove();ne.done(H).then(function(){ne.clear(H);l.gd.emit("plotly_selected",N);if(I&&l.selectionDefs){I.subtract=E;l.selectionDefs.push(I);l.mergedPolygons.length=0;[].push.apply(l.mergedPolygons,P)}if(l.doneFnCompleted){l.doneFnCompleted(U)}}).catch(re.error);if(d){pe(l)}}}function fe(e,t,r,n,a,i,o){var s=t._hoverdata;var l=t._fullLayout;var c=l.clickmode;var u=c.indexOf("event")>-1;var f=[];var d,h,p,v,g;var m,_,y,b,x;if(L(s)){he(e,t,i);d=ve(t,r,n,a);var w=E(s,d);var A=w.pointNumbers.length>0;if(A?O(d,w):P(d)&&(_=D(w))){if(o)o.remove();for(x=0;x<d.length;x++){h=d[x];h._module.selectPoints(h,false)}ge(t,d);pe(i);if(u){t.emit("plotly_deselect",null)}}else{y=e.shiftKey&&(_!==undefined?_:D(w));p=C(w.pointNumber,w.searchInfo,y);var T=i.selectionDefs.concat([p]);v=de(T);for(x=0;x<d.length;x++){g=d[x]._module.selectPoints(d[x],v);m=_e(g,d[x]);if(f.length){for(var k=0;k<m.length;k++){f.push(m[k])}}else f=m}b={points:f};ge(t,d,b);if(p&&i){i.selectionDefs.push(p)}if(o){var M=i.mergedPolygons;var S=Q(i.dragmode);ee(ye(M,S),o,i)}if(u){t.emit("plotly_selected",b)}}}}function C(e,t,r){return{pointNumber:e,searchInfo:t,subtract:r}}function f(e){return"pointNumber"in e&&"searchInfo"in e}function d(o){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(e,t,r,n){var a=o.searchInfo.cd[0].trace._expandedIndex;var i=n.cd[0].trace._expandedIndex;return i===a&&r===o.pointNumber},isRect:false,degenerate:false,subtract:o.subtract}}function de(e){var o=[];var t=f(e[0])?0:e[0][0][0];var r=t;var n=f(e[0])?0:e[0][0][1];var a=n;for(var i=0;i<e.length;i++){if(f(e[i])){o.push(d(e[i]))}else{var s=c.tester(e[i]);s.subtract=e[i].subtract;o.push(s);t=Math.min(t,s.xmin);r=Math.max(r,s.xmax);n=Math.min(n,s.ymin);a=Math.max(a,s.ymax)}}function l(e,t,r,n){var a=false;for(var i=0;i<o.length;i++){if(o[i].contains(e,t,r,n)){a=o[i].subtract===false}}return a}return{xmin:t,xmax:r,ymin:n,ymax:a,pts:[],contains:l,isRect:false,degenerate:false}}function he(e,t,r){t._fullLayout._drawing=false;var n=t._fullLayout;var a=r.plotinfo;var i=r.dragmode;var o=n._lastSelectedSubplot&&n._lastSelectedSubplot===a.id;var s=(e.shiftKey||e.altKey)&&!($(i)&&Q(i));if(o&&s&&(a.selection&&a.selection.selectionDefs)&&!r.selectionDefs){r.selectionDefs=a.selection.selectionDefs;r.mergedPolygons=a.selection.mergedPolygons}else if(!s||!a.selection){pe(r)}if(!o){u(t);n._lastSelectedSubplot=a.id}}function pe(e){var t=e.dragmode;var r=e.plotinfo;var n=e.gd;if(n._fullLayout._activeShapeIndex>=0){n._fullLayout._deactivateShape(n)}if($(t)){var a=n._fullLayout;var i=a._zoomlayer;var o=i.selectAll(".select-outline-"+r.id);if(o&&n._fullLayout._drawing){var s=l(o,e);if(s){g.call("_guiRelayout",n,{shapes:s})}n._fullLayout._drawing=false}}r.selection={};r.selection.selectionDefs=e.selectionDefs=[];r.selection.mergedPolygons=e.mergedPolygons=[]}function ve(e,t,r,n){var a=[];var i=t.map(function(e){return e._id});var o=r.map(function(e){return e._id});var s,l,c;for(c=0;c<e.calcdata.length;c++){s=e.calcdata[c];l=s[0].trace;if(l.visible!==true||!l._module||!l._module.selectPoints)continue;if(n&&(l.subplot===n||l.geo===n)){a.push(d(l._module,s,t[0],r[0]))}else if(l.type==="splom"&&l._xaxes[i[0]]&&l._yaxes[o[0]]){var u=d(l._module,s,t[0],r[0]);u.scene=e._fullLayout._splomScenes[l.uid];a.push(u)}else if(l.type==="sankey"){var f=d(l._module,s,t[0],r[0]);a.push(f)}else{if(i.indexOf(l.xaxis)===-1)continue;if(o.indexOf(l.yaxis)===-1)continue;a.push(d(l._module,s,h(e,l.xaxis),h(e,l.yaxis)))}}return a;function d(e,t,r,n){return{_module:e,cd:t,xaxis:r,yaxis:n}}}function L(e){return e&&Array.isArray(e)&&e[0].hoverOnBox!==true}function E(e,t){var r=e[0];var n=-1;var a=[];var i,o;for(o=0;o<t.length;o++){i=t[o];if(r.fullData._expandedIndex===i.cd[0].trace._expandedIndex){if(r.hoverOnBox===true){break}if(r.pointNumber!==undefined){n=r.pointNumber}else if(r.binNumber!==undefined){n=r.binNumber;a=r.pointNumbers}break}}return{pointNumber:n,pointNumbers:a,searchInfo:i}}function D(e){var t=e.searchInfo.cd[0].trace;var r=e.pointNumber;var n=e.pointNumbers;var a=n.length>0;var i=a?n[0]:r;return t.selectedpoints?t.selectedpoints.indexOf(i)>-1:false}function O(e,t){var r=[];var n,a,i,o;for(o=0;o<e.length;o++){n=e[o];if(n.cd[0].trace.selectedpoints&&n.cd[0].trace.selectedpoints.length>0){r.push(n)}}if(r.length===1){i=r[0]===t.searchInfo;if(i){a=t.searchInfo.cd[0].trace;if(a.selectedpoints.length===t.pointNumbers.length){for(o=0;o<t.pointNumbers.length;o++){if(a.selectedpoints.indexOf(t.pointNumbers[o])<0){return false}}return true}}}return false}function P(e){var t=0;var r,n,a;for(a=0;a<e.length;a++){r=e[a];n=r.cd[0].trace;if(n.selectedpoints){if(n.selectedpoints.length>1)return false;t+=n.selectedpoints.length;if(t>1)return false}}return t===1}function ge(e,t,r){var n,a,i,o;for(n=0;n<t.length;n++){var s=t[n].cd[0].trace._fullInput;var l=e._fullLayout._tracePreGUI[s.uid]||{};if(l.selectedpoints===undefined){l.selectedpoints=s._input.selectedpoints||null}}if(r){var c=r.points||[];for(n=0;n<t.length;n++){o=t[n].cd[0].trace;o._input.selectedpoints=o._fullInput.selectedpoints=[];if(o._fullInput!==o)o.selectedpoints=[]}for(n=0;n<c.length;n++){var u=c[n];var f=u.data;var d=u.fullData;if(u.pointIndices){[].push.apply(f.selectedpoints,u.pointIndices);if(o._fullInput!==o){[].push.apply(d.selectedpoints,u.pointIndices)}}else{f.selectedpoints.push(u.pointIndex);if(o._fullInput!==o){d.selectedpoints.push(u.pointIndex)}}}}else{for(n=0;n<t.length;n++){o=t[n].cd[0].trace;delete o.selectedpoints;delete o._input.selectedpoints;if(o._fullInput!==o){delete o._fullInput.selectedpoints}}}var h=false;for(n=0;n<t.length;n++){a=t[n];i=a.cd;o=i[0].trace;if(g.traceIs(o,"regl")){h=true}var p=a._module;var v=p.styleOnSelect||p.style;if(v){v(e,i,i[0].node3);if(i[0].nodeRangePlot3)v(e,i,i[0].nodeRangePlot3)}}if(h){m(e);_(e)}}function me(e,t,r){var n;if(r){n=a.difference({regions:e,inverted:false},{regions:[t],inverted:false});return n.regions}n=a.union({regions:e,inverted:false},{regions:[t],inverted:false});return n.regions}function _e(e,t){if(Array.isArray(e)){var r=t.cd;var n=t.cd[0].trace;for(var a=0;a<e.length;a++){e[a]=i(e[a],n,r)}}return e}function ye(e,t){var r=[];for(var n=0;n<e.length;n++){r[n]=[];for(var a=0;a<e[n].length;a++){r[n][a]=[];r[n][a][0]=a?"L":"M";for(var i=0;i<e[n][a].length;i++){r[n][a].push(e[n][a][i])}}if(!t){r[n].push(["Z",r[n][0][1],r[n][0][2]])}}return r}t.exports={prepSelect:s,clearSelect:u,clearSelectionsCache:pe,selectOnClick:fe}},{"../../components/color":100,"../../components/dragelement/helpers":118,"../../components/drawing":122,"../../components/fx":140,"../../components/fx/helpers":136,"../../components/shapes/draw_newshape/display_outlines":188,"../../components/shapes/draw_newshape/helpers":189,"../../components/shapes/draw_newshape/newshapes":190,"../../lib":230,"../../lib/clear_gl_canvases":218,"../../lib/polygon":242,"../../lib/throttle":253,"../../plot_api/subroutines":266,"../../registry":313,"./axis_ids":280,"./constants":283,"./handle_outline":287,"./helpers":288,polybooljs:55}],297:[function(e,t,r){"use strict";var b=e("@plotly/d3");var x=e("d3-time-format").utcFormat;var w=e("fast-isnumeric");var A=e("../../lib");var T=A.cleanNumber;var k=A.ms2DateTime;var M=A.dateTime2ms;var S=A.ensureNumber;var C=A.isArrayOrTypedArray;var n=e("../../constants/numerical");var L=n.FP_SAFE;var E=n.BADNUM;var D=n.LOG_CLIP;var O=n.ONEWEEK;var P=n.ONEDAY;var I=n.ONEHOUR;var R=n.ONEMIN;var z=n.ONESEC;var N=e("./axis_ids");var F=e("./constants");var j=F.HOUR_PATTERN;var B=F.WEEKDAY_PATTERN;function H(e){return Math.pow(10,e)}function U(e){return e!==null&&e!==undefined}t.exports=function e(_,p){p=p||{};var v=_._id||"x";var g=v.charAt(0);function r(e,t){if(e>0)return Math.log(e)/Math.LN10;else if(e<=0&&t&&_.range&&_.range.length===2){var r=_.range[0];var n=_.range[1];return.5*(r+n-2*D*Math.abs(r-n))}else return E}function n(e,t,r,n){if((n||{}).msUTC&&w(e)){return+e}var a=M(e,r||_.calendar);if(a===E){if(w(e)){e=+e;var i=Math.floor(A.mod(e+.05,1)*10);var o=Math.round(e-i/10);a=M(new Date(o))+i/10}else return E}return a}function a(e,t,r){return k(e,t,r||_.calendar)}function t(e){return _._categories[Math.round(e)]}function m(e){if(U(e)){if(_._categoriesMap===undefined){_._categoriesMap={}}if(_._categoriesMap[e]!==undefined){return _._categoriesMap[e]}else{_._categories.push(typeof e==="number"?String(e):e);var t=_._categories.length-1;_._categoriesMap[e]=t;return t}}return E}function f(e,t){var r=new Array(t);for(var n=0;n<t;n++){var a=(e[0]||[])[n];var i=(e[1]||[])[n];r[n]=o([a,i])}return r}function o(e){if(_._categoriesMap){return _._categoriesMap[e]}}function i(e){var t=o(e);if(t!==undefined)return t;if(w(e))return+e}function s(e){return w(e)?+e:o(e)}function u(e,t,r){return b.round(r+t*e,2)}function l(e,t,r){return(e-r)/t}var d=function e(t){if(!w(t))return E;return u(t,_._m,_._b)};var c=function(e){return l(e,_._m,_._b)};if(_.rangebreaks){var h=g==="y";d=function(e){if(!w(e))return E;var t=_._rangebreaks.length;if(!t)return u(e,_._m,_._b);var r=h;if(_.range[0]>_.range[1])r=!r;var n=r?-1:1;var a=n*e;var i=0;for(var o=0;o<t;o++){var s=n*_._rangebreaks[o].min;var l=n*_._rangebreaks[o].max;if(a<s)break;if(a>l)i=o+1;else{i=a<(s+l)/2?o:o+1;break}}var c=_._B[i]||0;if(!isFinite(c))return 0;return u(e,_._m2,c)};c=function(e){var t=_._rangebreaks.length;if(!t)return l(e,_._m,_._b);var r=0;for(var n=0;n<t;n++){if(e<_._rangebreaks[n].pmin)break;if(e>_._rangebreaks[n].pmax)r=n+1}return l(e,_._m2,_._B[r])}}_.c2l=_.type==="log"?r:S;_.l2c=_.type==="log"?H:S;_.l2p=d;_.p2l=c;_.c2p=_.type==="log"?function(e,t){return d(r(e,t))}:d;_.p2c=_.type==="log"?function(e){return H(c(e))}:c;if(["linear","-"].indexOf(_.type)!==-1){_.d2r=_.r2d=_.d2c=_.r2c=_.d2l=_.r2l=T;_.c2d=_.c2r=_.l2d=_.l2r=S;_.d2p=_.r2p=function(e){return _.l2p(T(e))};_.p2d=_.p2r=c;_.cleanPos=S}else if(_.type==="log"){_.d2r=_.d2l=function(e,t){return r(T(e),t)};_.r2d=_.r2c=function(e){return H(T(e))};_.d2c=_.r2l=T;_.c2d=_.l2r=S;_.c2r=r;_.l2d=H;_.d2p=function(e,t){return _.l2p(_.d2r(e,t))};_.p2d=function(e){return H(c(e))};_.r2p=function(e){return _.l2p(T(e))};_.p2r=c;_.cleanPos=S}else if(_.type==="date"){_.d2r=_.r2d=A.identity;_.d2c=_.r2c=_.d2l=_.r2l=n;_.c2d=_.c2r=_.l2d=_.l2r=a;_.d2p=_.r2p=function(e,t,r){return _.l2p(n(e,0,r))};_.p2d=_.p2r=function(e,t,r){return a(c(e),t,r)};_.cleanPos=function(e){return A.cleanDate(e,E,_.calendar)}}else if(_.type==="category"){_.d2c=_.d2l=m;_.r2d=_.c2d=_.l2d=t;_.d2r=_.d2l_noadd=i;_.r2c=function(e){var t=s(e);return t!==undefined?t:_.fraction2r(.5)};_.l2r=_.c2r=S;_.r2l=s;_.d2p=function(e){return _.l2p(_.r2c(e))};_.p2d=function(e){return t(c(e))};_.r2p=_.d2p;_.p2r=c;_.cleanPos=function(e){if(typeof e==="string"&&e!=="")return e;return S(e)}}else if(_.type==="multicategory"){_.r2d=_.c2d=_.l2d=t;_.d2r=_.d2l_noadd=i;_.r2c=function(e){var t=i(e);return t!==undefined?t:_.fraction2r(.5)};_.r2c_just_indices=o;_.l2r=_.c2r=S;_.r2l=i;_.d2p=function(e){return _.l2p(_.r2c(e))};_.p2d=function(e){return t(c(e))};_.r2p=_.d2p;_.p2r=c;_.cleanPos=function(e){if(Array.isArray(e)||typeof e==="string"&&e!=="")return e;return S(e)};_.setupMultiCategory=function(e){var t=_._traceIndices;var r,n;var a=_._matchGroup;if(a&&_._categories.length===0){for(var i in a){if(i!==v){var o=p[N.id2name(i)];t=t.concat(o._traceIndices)}}}var s=[[0,{}],[0,{}]];var l=[];for(r=0;r<t.length;r++){var c=e[t[r]];if(g in c){var u=c[g];var f=c._length||A.minRowLength(u);if(C(u[0])&&C(u[1])){for(n=0;n<f;n++){var d=u[0][n];var h=u[1][n];if(U(d)&&U(h)){l.push([d,h]);if(!(d in s[0][1])){s[0][1][d]=s[0][0]++}if(!(h in s[1][1])){s[1][1][h]=s[1][0]++}}}}}}l.sort(function(e,t){var r=s[0][1];var n=r[e[0]]-r[t[0]];if(n)return n;var a=s[1][1];return a[e[1]]-a[t[1]]});for(r=0;r<l.length;r++){m(l[r])}}}_.fraction2r=function(e){var t=_.r2l(_.range[0]);var r=_.r2l(_.range[1]);return _.l2r(t+e*(r-t))};_.r2fraction=function(e){var t=_.r2l(_.range[0]);var r=_.r2l(_.range[1]);return(_.r2l(e)-t)/(r-t)};_.cleanRange=function(e,t){if(!t)t={};if(!e)e="range";var r=A.nestedProperty(_,e).get();var n,a;if(_.type==="date")a=A.dfltRange(_.calendar);else if(g==="y")a=F.DFLTRANGEY;else a=t.dfltRange||F.DFLTRANGEX;a=a.slice();if(_.rangemode==="tozero"||_.rangemode==="nonnegative"){a[0]=0}if(!r||r.length!==2){A.nestedProperty(_,e).set(a);return}if(_.type==="date"&&!_.autorange){r[0]=A.cleanDate(r[0],E,_.calendar);r[1]=A.cleanDate(r[1],E,_.calendar)}for(n=0;n<2;n++){if(_.type==="date"){if(!A.isDateTime(r[n],_.calendar)){_[e]=a;break}if(_.r2l(r[0])===_.r2l(r[1])){var i=A.constrain(_.r2l(r[0]),A.MIN_MS+1e3,A.MAX_MS-1e3);r[0]=_.l2r(i-1e3);r[1]=_.l2r(i+1e3);break}}else{if(!w(r[n])){if(w(r[1-n])){r[n]=r[1-n]*(n?10:.1)}else{_[e]=a;break}}if(r[n]<-L)r[n]=-L;else if(r[n]>L)r[n]=L;if(r[0]===r[1]){var o=Math.max(1,Math.abs(r[0]*1e-6));r[0]-=o;r[1]+=o}}}};_.setScale=function(e){var t=p._size;if(_.overlaying){var r=N.getFromId({_fullLayout:p},_.overlaying);_.domain=r.domain}var n=e&&_._r?"_r":"range";var a=_.calendar;_.cleanRange(n);var i=_.r2l(_[n][0],a);var o=_.r2l(_[n][1],a);var s=g==="y";if(s){_._offset=t.t+(1-_.domain[1])*t.h;_._length=t.h*(_.domain[1]-_.domain[0]);_._m=_._length/(i-o);_._b=-_._m*o}else{_._offset=t.l+_.domain[0]*t.w;_._length=t.w*(_.domain[1]-_.domain[0]);_._m=_._length/(o-i);_._b=-_._m*i}_._rangebreaks=[];_._lBreaks=0;_._m2=0;_._B=[];if(_.rangebreaks){var l,c;_._rangebreaks=_.locateBreaks(Math.min(i,o),Math.max(i,o));if(_._rangebreaks.length){for(l=0;l<_._rangebreaks.length;l++){c=_._rangebreaks[l];_._lBreaks+=Math.abs(c.max-c.min)}var u=s;if(i>o)u=!u;if(u)_._rangebreaks.reverse();var f=u?-1:1;_._m2=f*_._length/(Math.abs(o-i)-_._lBreaks);_._B.push(-_._m2*(s?o:i));for(l=0;l<_._rangebreaks.length;l++){c=_._rangebreaks[l];_._B.push(_._B[_._B.length-1]-f*_._m2*(c.max-c.min))}for(l=0;l<_._rangebreaks.length;l++){c=_._rangebreaks[l];c.pmin=d(c.min);c.pmax=d(c.max)}}}if(!isFinite(_._m)||!isFinite(_._b)||_._length<0){p._replotting=false;throw new Error("Something went wrong with axis scaling")}};_.maskBreaks=function(e){var t=_.rangebreaks||[];var r,n,a,i,o;if(!t._cachedPatterns){t._cachedPatterns=t.map(function(e){return e.enabled&&e.bounds?A.simpleMap(e.bounds,e.pattern?T:_.d2c):null})}if(!t._cachedValues){t._cachedValues=t.map(function(e){return e.enabled&&e.values?A.simpleMap(e.values,_.d2c).sort(A.sorterAsc):null})}for(var s=0;s<t.length;s++){var l=t[s];if(l.enabled){if(l.bounds){var c=l.pattern;r=t._cachedPatterns[s];n=r[0];a=r[1];switch(c){case B:o=new Date(e);i=o.getUTCDay();if(n>a){a+=7;if(i<n)i+=7}break;case j:o=new Date(e);var u=o.getUTCHours();var f=o.getUTCMinutes();var d=o.getUTCSeconds();var h=o.getUTCMilliseconds();i=u+(f/60+d/3600+h/36e5);if(n>a){a+=24;if(i<n)i+=24}break;case"":i=e;break}if(i>=n&&i<a)return E}else{var p=t._cachedValues[s];for(var v=0;v<p.length;v++){n=p[v];a=n+l.dvalue;if(e>=n&&e<a)return E}}}}return e};_.locateBreaks=function(i,o){var e,t,r,n;var s=[];if(!_.rangebreaks)return s;var a=_.rangebreaks.slice().sort(function(e,t){if(e.pattern===B&&t.pattern===j)return-1;if(t.pattern===B&&e.pattern===j)return 1;return 0});var l=function(e,t){e=A.constrain(e,i,o);t=A.constrain(t,i,o);if(e===t)return;var r=true;for(var n=0;n<s.length;n++){var a=s[n];if(e<a.max&&t>=a.min){if(e<a.min){a.min=e}if(t>a.max){a.max=t}r=false}}if(r){s.push({min:e,max:t})}};for(e=0;e<a.length;e++){var c=a[e];if(c.enabled){if(c.bounds){var u=i;var f=o;if(c.pattern){u=Math.floor(u)}t=A.simpleMap(c.bounds,c.pattern?T:_.r2l);r=t[0];n=t[1];var d=new Date(u);var h;var p;switch(c.pattern){case B:p=O;h=((n<r?7:0)+(n-r))*P;u+=r*P-(d.getUTCDay()*P+d.getUTCHours()*I+d.getUTCMinutes()*R+d.getUTCSeconds()*z+d.getUTCMilliseconds());break;case j:p=P;h=((n<r?24:0)+(n-r))*I;u+=r*I-(d.getUTCHours()*I+d.getUTCMinutes()*R+d.getUTCSeconds()*z+d.getUTCMilliseconds());break;default:u=Math.min(t[0],t[1]);f=Math.max(t[0],t[1]);p=f-u;h=p}for(var v=u;v<f;v+=p){l(v,v+h)}}else{var g=A.simpleMap(c.values,_.d2c);for(var m=0;m<g.length;m++){r=g[m];n=r+c.dvalue;l(r,n)}}}}s.sort(function(e,t){return e.min-t.min});return s};_.makeCalcdata=function(e,t,r){var n,a,i,o;var s=_.type;var l=s==="date"&&e[t+"calendar"];if(t in e){n=e[t];o=e._length||A.minRowLength(n);if(A.isTypedArray(n)&&(s==="linear"||s==="log")){if(o===n.length){return n}else if(n.subarray){return n.subarray(0,o)}}if(s==="multicategory"){return f(n,o)}a=new Array(o);for(i=0;i<o;i++){a[i]=_.d2c(n[i],0,l,r)}}else{var c=t+"0"in e?_.d2c(e[t+"0"],0,l):0;var u=e["d"+t]?Number(e["d"+t]):1;n=e[{x:"y",y:"x"}[t]];o=e._length||n.length;a=new Array(o);for(i=0;i<o;i++){a[i]=c+i*u}}if(_.rangebreaks){for(i=0;i<o;i++){a[i]=_.maskBreaks(a[i])}}return a};_.isValidRange=function(e){return Array.isArray(e)&&e.length===2&&w(_.r2l(e[0]))&&w(_.r2l(e[1]))};_.isPtWithinRange=function(e,t){var r=_.c2l(e[g],null,t);var n=_.r2l(_.range[0]);var a=_.r2l(_.range[1]);if(n<a){return n<=r&&r<=a}else{return a<=r&&r<=n}};_._emptyCategories=function(){_._categories=[];_._categoriesMap={}};_.clearCalc=function(){var e=_._matchGroup;if(e){var t=null;var r=null;for(var n in e){var a=p[N.id2name(n)];if(a._categories){t=a._categories;r=a._categoriesMap;break}}if(t&&r){_._categories=t;_._categoriesMap=r}else{_._emptyCategories()}}else{_._emptyCategories()}if(_._initialCategories){for(var i=0;i<_._initialCategories.length;i++){m(_._initialCategories[i])}}};_.sortByInitialCategories=function(){var e=[];_._emptyCategories();if(_._initialCategories){for(var t=0;t<_._initialCategories.length;t++){m(_._initialCategories[t])}}e=e.concat(_._traceIndices);var r=_._matchGroup;for(var n in r){if(v===n)continue;var a=p[N.id2name(n)];a._categories=_._categories;a._categoriesMap=_._categoriesMap;e=e.concat(a._traceIndices)}return e};var y=p._d3locale;if(_.type==="date"){_._dateFormat=y?y.timeFormat:x;_._extraFormat=p._extraFormat}_._separators=p.separators;_._numFormat=y?y.numberFormat:b.format;delete _._minDtick;delete _._forceTick0}},{"../../constants/numerical":210,"../../lib":230,"./axis_ids":280,"./constants":283,"@plotly/d3":11,"d3-time-format":13,"fast-isnumeric":15}],298:[function(e,t,r){"use strict";var p=e("../../lib");var v=e("../../components/color").contrast;var g=e("./layout_attributes");var m=e("../array_container_defaults");t.exports=function e(t,r,n,a,i,o){if(!o||o.pass===1){s(t,r,n,a,i)}if(!o||o.pass===2){l(t,r,n,a,i)}};function s(e,t,r,n,a){var i=_(e);var o=r("tickprefix");if(o)r("showtickprefix",i);var s=r("ticksuffix",a.tickSuffixDflt);if(s)r("showticksuffix",i)}function l(e,t,r,n,a){var i=_(e);var o=r("tickprefix");if(o)r("showtickprefix",i);var s=r("ticksuffix",a.tickSuffixDflt);if(s)r("showticksuffix",i);var l=r("showticklabels");if(l){var c=a.font||{};var u=t.color;var f=t.ticklabelposition||"";var d=f.indexOf("inside")!==-1?v(a.bgColor):u&&u!==g.color.dflt?u:c.color;p.coerceFont(r,"tickfont",{family:c.family,size:c.size,color:d});r("tickangle");if(n!=="category"){var h=r("tickformat");m(e,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:y});if(!t.tickformatstops.length){delete t.tickformatstops}if(!h&&n!=="date"){r("showexponent",i);r("exponentformat");r("minexponent");r("separatethousands")}}}}function _(t){var e=["showexponent","showtickprefix","showticksuffix"];var r=e.filter(function(e){return t[e]!==undefined});var n=function(e){return t[e]===t[r[0]]};if(r.every(n)||r.length===1){return t[r[0]]}}function y(r,n){function e(e,t){return p.coerce(r,n,g.tickformatstops,e,t)}var t=e("enabled");if(t){e("dtickrange");e("value")}}},{"../../components/color":100,"../../lib":230,"../array_container_defaults":271,"./layout_attributes":291}],299:[function(e,t,r){"use strict";var c=e("../../lib");var u=e("./layout_attributes");t.exports=function e(t,r,n,a){var i=c.coerce2(t,r,u,"ticklen");var o=c.coerce2(t,r,u,"tickwidth");var s=c.coerce2(t,r,u,"tickcolor",r.color);var l=n("ticks",a.outerTicks||i||o||s?"outside":"");if(!l){delete r.ticklen;delete r.tickwidth;delete r.tickcolor}}},{"../../lib":230,"./layout_attributes":291}],300:[function(e,t,r){"use strict";var h=e("./clean_ticks");var p=e("../../lib").isArrayOrTypedArray;t.exports=function e(r,n,t,a){function i(e){var t=r[e];return t!==undefined?t:(n._template||{})[e]}var o=i("tick0");var s=i("dtick");var l=i("tickvals");var c=p(l)?"array":s?"linear":"auto";var u=t("tickmode",c);if(u==="auto")t("nticks");else if(u==="linear"){var f=n.dtick=h.dtick(s,a);n.tick0=h.tick0(o,a,n.calendar,f)}else if(a!=="multicategory"){var d=t("tickvals");if(d===undefined)n.tickmode="auto";else t("ticktext")}}},{"../../lib":230,"./clean_ticks":282}],301:[function(e,t,r){"use strict";var v=e("@plotly/d3");var g=e("../../registry");var S=e("../../lib");var C=e("../../components/drawing");var L=e("./axes");t.exports=function e(M,i,n,t){var a=M._fullLayout;if(i.length===0){L.redrawComponents(M);return}function o(e){var t=e.xaxis;var r=e.yaxis;a._defs.select("#"+e.clipId+"> rect").call(C.setTranslate,0,0).call(C.setScale,1,1);e.plot.call(C.setTranslate,t._offset,r._offset).call(C.setScale,1,1);var n=e.plot.selectAll(".scatterlayer .trace");n.selectAll(".point").call(C.setPointGroupScale,1,1);n.selectAll(".textpoint").call(C.setTextPointsScale,1,1);n.call(C.hideOutsideRangePoints,e)}function s(e,t){var r=e.plotinfo;var n=r.xaxis;var a=r.yaxis;var i=n._length;var o=a._length;var s=!!e.xr1;var l=!!e.yr1;var c=[];if(s){var u=S.simpleMap(e.xr0,n.r2l);var f=S.simpleMap(e.xr1,n.r2l);var d=u[1]-u[0];var h=f[1]-f[0];c[0]=(u[0]*(1-t)+t*f[0]-u[0])/(u[1]-u[0])*i;c[2]=i*(1-t+t*h/d);n.range[0]=n.l2r(u[0]*(1-t)+t*f[0]);n.range[1]=n.l2r(u[1]*(1-t)+t*f[1])}else{c[0]=0;c[2]=i}if(l){var p=S.simpleMap(e.yr0,a.r2l);var v=S.simpleMap(e.yr1,a.r2l);var g=p[1]-p[0];var m=v[1]-v[0];c[1]=(p[1]*(1-t)+t*v[1]-p[1])/(p[0]-p[1])*o;c[3]=o*(1-t+t*m/g);a.range[0]=n.l2r(p[0]*(1-t)+t*v[0]);a.range[1]=a.l2r(p[1]*(1-t)+t*v[1])}else{c[1]=0;c[3]=o}L.drawOne(M,n,{skipTitle:true});L.drawOne(M,a,{skipTitle:true});L.redrawComponents(M,[n._id,a._id]);var _=s?i/c[2]:1;var y=l?o/c[3]:1;var b=s?c[0]:0;var x=l?c[1]:0;var w=s?c[0]/c[2]*i:0;var A=l?c[1]/c[3]*o:0;var T=n._offset-w;var k=a._offset-A;r.clipRect.call(C.setTranslate,b,x).call(C.setScale,1/_,1/y);r.plot.call(C.setTranslate,T,k).call(C.setScale,_,y);C.setPointGroupScale(r.zoomScalePts,1/_,1/y);C.setTextPointsScale(r.zoomScaleTxt,1/_,1/y)}var l;if(t){l=t()}function c(){var e={};for(var t=0;t<i.length;t++){var r=i[t];var n=r.plotinfo.xaxis;var a=r.plotinfo.yaxis;if(r.xr1)e[n._name+".range"]=r.xr1.slice();if(r.yr1)e[a._name+".range"]=r.yr1.slice()}l&&l();return g.call("relayout",M,e).then(function(){for(var e=0;e<i.length;e++){o(i[e].plotinfo)}})}function r(){var e={};for(var t=0;t<i.length;t++){var r=i[t];var n=r.plotinfo.xaxis;var a=r.plotinfo.yaxis;if(r.xr0)e[n._name+".range"]=r.xr0.slice();if(r.yr0)e[a._name+".range"]=r.yr0.slice()}return g.call("relayout",M,e).then(function(){for(var e=0;e<i.length;e++){o(i[e].plotinfo)}})}var u,f,d;var h=v.ease(n.easing);M._transitionData._interruptCallbacks.push(function(){window.cancelAnimationFrame(d);d=null;return r()});function p(){f=Date.now();var e=Math.min(1,(f-u)/n.duration);var t=h(e);for(var r=0;r<i.length;r++){s(i[r],t)}if(f-u>n.duration){c();d=window.cancelAnimationFrame(p)}else{d=window.requestAnimationFrame(p)}}u=Date.now();d=window.requestAnimationFrame(p);return Promise.resolve()}},{"../../components/drawing":122,"../../lib":230,"../../registry":313,"./axes":276,"@plotly/d3":11}],302:[function(e,t,r){"use strict";var p=e("../../registry").traceIs;var v=e("./axis_autotype");t.exports=function e(t,r,n,a){n("autotypenumbers",a.autotypenumbersDflt);var i=n("type",(a.splomStash||{}).type);if(i==="-"){o(r,a.data);if(r.type==="-"){r.type="linear"}else{t.type=r.type}}};function o(e,t){if(e.type!=="-")return;var r=e._id;var n=r.charAt(0);var a;if(r.indexOf("scene")!==-1)r=n;var i=g(t,r,n);if(!i)return;if(i.type==="histogram"&&n==={v:"y",h:"x"}[i.orientation||"v"]){e.type="linear";return}var o=n+"calendar";var s=i[o];var l={noMultiCategory:!p(i,"cartesian")||p(i,"noMultiCategory")};if(i.type==="box"&&i._hasPreCompStats&&n==={h:"x",v:"y"}[i.orientation||"v"]){l.noMultiCategory=true}l.autotypenumbers=e.autotypenumbers;if(_(i,n)){var c=m(i);var u=[];for(a=0;a<t.length;a++){var f=t[a];if(!p(f,"box-violin")||(f[n+"axis"]||n)!==r)continue;if(f[c]!==undefined)u.push(f[c][0]);else if(f.name!==undefined)u.push(f.name);else u.push("text");if(f[o]!==s)s=undefined}e.type=v(u,s,l)}else if(i.type==="splom"){var d=i.dimensions;var h=d[i._axesDim[r]];if(h.visible)e.type=v(h.values,s,l)}else{e.type=v(i[n]||[i[n+"0"]],s,l)}}function g(e,t,r){for(var n=0;n<e.length;n++){var a=e[n];if(a.type==="splom"&&a._length>0&&(a["_"+r+"axes"]||{})[t]){return a}if((a[r+"axis"]||r)===t){if(_(a,r)){return a}else if((a[r]||[]).length||a[r+"0"]){return a}}}}function m(e){return{v:"x",h:"y"}[e.orientation||"v"]}function _(e,t){var r=m(e);var n=p(e,"box-violin");var a=p(e._fullInput||{},"candlestick");return n&&!a&&t===r&&e[r]===undefined&&e[r+"0"]===undefined}},{"../../registry":313,"./axis_autotype":277}],303:[function(e,t,h){"use strict";var o=e("../registry");var d=e("../lib");h.manageCommandObserver=function(r,e,t,n){var a={};var i=true;if(e&&e._commandObserver){a=e._commandObserver}if(!a.cache){a.cache={}}a.lookupTable={};var o=h.hasSimpleAPICommandBindings(r,t,a.lookupTable);if(e&&e._commandObserver){if(!o){if(e._commandObserver.remove){e._commandObserver.remove();e._commandObserver=null;return a}}else{return a}}if(o){c(r,o,a.cache);a.check=function e(){if(!i)return;var t=c(r,o,a.cache);if(t.changed&&n){if(a.lookupTable[t.value]!==undefined){a.disable();Promise.resolve(n({value:t.value,type:o.type,prop:o.prop,traces:o.traces,index:a.lookupTable[t.value]})).then(a.enable,a.enable)}}return t.changed};var s=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"];for(var l=0;l<s.length;l++){r._internalOn(s[l],a.check)}a.remove=function(){for(var e=0;e<s.length;e++){r._removeInternalListener(s[e],a.check)}}}else{d.log("Unable to automatically bind plot updates to API command");a.lookupTable={};a.remove=function(){}}a.disable=function e(){i=false};a.enable=function e(){i=true};if(e){e._commandObserver=a}return a};h.hasSimpleAPICommandBindings=function(e,t,r){var n;var a=t.length;var i;for(n=0;n<a;n++){var o;var s=t[n];var l=s.method;var c=s.args;if(!Array.isArray(c))c=[];if(!l){return false}var u=h.computeAPICommandBindings(e,l,c);if(u.length!==1){return false}if(!i){i=u[0];if(Array.isArray(i.traces)){i.traces.sort()}}else{o=u[0];if(o.type!==i.type){return false}if(o.prop!==i.prop){return false}if(Array.isArray(i.traces)){if(Array.isArray(o.traces)){o.traces.sort();for(var f=0;f<i.traces.length;f++){if(i.traces[f]!==o.traces[f]){return false}}}else{return false}}else{if(o.prop!==i.prop){return false}}}o=u[0];var d=o.value;if(Array.isArray(d)){if(d.length===1){d=d[0]}else{return false}}if(r){r[d]=n}}return i};function c(e,t,r){var n,a,i;var o=false;if(t.type==="data"){n=e._fullData[t.traces!==null?t.traces[0]:0]}else if(t.type==="layout"){n=e._fullLayout}else{return false}a=d.nestedProperty(n,t.prop).get();i=r[t.type]=r[t.type]||{};if(i.hasOwnProperty(t.prop)){if(i[t.prop]!==a){o=true}}i[t.prop]=a;return{changed:o,value:a}}h.executeAPICommand=function(e,t,r){if(t==="skip")return Promise.resolve();var n=o.apiMethodRegistry[t];var a=[e];if(!Array.isArray(r))r=[];for(var i=0;i<r.length;i++){a.push(r[i])}return n.apply(null,a).catch(function(e){d.warn("API call to Plotly."+t+" rejected.",e);return Promise.reject(e)})};h.computeAPICommandBindings=function(e,t,r){var n;if(!Array.isArray(r))r=[];switch(t){case"restyle":n=s(e,r);break;case"relayout":n=i(e,r);break;case"update":n=s(e,[r[0],r[2]]).concat(i(e,[r[1]]));break;case"animate":n=a(e,r);break;default:n=[]}return n};function a(e,t){if(Array.isArray(t[0])&&t[0].length===1&&["string","number"].indexOf(typeof t[0][0])!==-1){return[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]}else{return[]}}function i(e,t){var n=[];var r=t[0];var a={};if(typeof r==="string"){a[r]=t[1]}else if(d.isPlainObject(r)){a=r}else{return n}l(a,function(e,t,r){n.push({type:"layout",prop:e,value:r})},"",0);return n}function s(c,e){var u,t,r,n;var f=[];t=e[0];r=e[1];u=e[2];n={};if(typeof t==="string"){n[t]=r}else if(d.isPlainObject(t)){n=t;if(u===undefined){u=r}}else{return f}if(u===undefined){u=null}l(n,function(e,t,r){var n;var a;if(Array.isArray(r)){a=r.slice();var i=Math.min(a.length,c.data.length);if(u){i=Math.min(i,u.length)}n=[];for(var o=0;o<i;o++){n[o]=u?u[o]:o}}else{a=r;n=u?u.slice():null}if(n===null){if(Array.isArray(a)){a=a[0]}}else if(Array.isArray(n)){if(!Array.isArray(a)){var s=a;a=[];for(var l=0;l<n.length;l++){a[l]=s}}a.length=Math.min(n.length,a.length)}f.push({type:"data",prop:e,traces:n,value:a})},"",0);return f}function l(n,a,i,o){Object.keys(n).forEach(function(e){var t=n[e];if(e[0]==="_")return;var r=i+(o>0?".":"")+e;if(d.isPlainObject(t)){l(t,a,r,o+1)}else{a(r,e,t)}})}},{"../lib":230,"../registry":313}],304:[function(e,t,r){"use strict";var s=e("../lib/extend").extendFlat;r.attributes=function(e,t){e=e||{};t=t||{};var r={valType:"info_array",editType:e.editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]};var n=e.name?e.name+" ":"";var a=e.trace?"trace ":"subplot ";var i=t.description?" "+t.description:"";var o={x:s({},r,{}),y:s({},r,{}),editType:e.editType};if(!e.noGridCell){o.row={valType:"integer",min:0,dflt:0,editType:e.editType};o.column={valType:"integer",min:0,dflt:0,editType:e.editType}}return o};r.defaults=function(e,t,r,n){var a=n&&n.x||[0,1];var i=n&&n.y||[0,1];var o=t.grid;if(o){var s=r("domain.column");if(s!==undefined){if(s<o.columns)a=o._domains.x[s];else delete e.domain.column}var l=r("domain.row");if(l!==undefined){if(l<o.rows)i=o._domains.y[l];else delete e.domain.row}}var c=r("domain.x",a);var u=r("domain.y",i);if(!(c[0]<c[1]))e.domain.x=a.slice();if(!(u[0]<u[1]))e.domain.y=i.slice()}},{"../lib/extend":224}],305:[function(e,t,r){"use strict";t.exports=function(e){var t=e.editType;var r=e.colorEditType;if(r===undefined)r=t;var n={family:{valType:"string",noBlank:true,strict:true,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:r},editType:t};if(e.arrayOk){n.family.arrayOk=true;n.size.arrayOk=true;n.color.arrayOk=true}return n}},{}],306:[function(e,t,r){"use strict";t.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],307:[function(e,t,r){"use strict";var f=e("../registry");var d=e("./cartesian/constants").SUBPLOT_PATTERN;r.getSubplotCalcData=function(e,t,r){var n=f.subplotsRegistry[t];if(!n)return[];var a=n.attr;var i=[];for(var o=0;o<e.length;o++){var s=e[o];var l=s[0].trace;if(l[a]===r)i.push(s)}return i};r.getModuleCalcData=function(e,t){var r=[];var n=[];var a;if(typeof t==="string"){a=f.getModule(t).plot}else if(typeof t==="function"){a=t}else{a=t.plot}if(!a){return[r,e]}for(var i=0;i<e.length;i++){var o=e[i];var s=o[0].trace;if(s.visible!==true||s._length===0)continue;if(s._module.plot===a){r.push(o)}else{n.push(o)}}return[r,n]};r.getSubplotData=function e(t,r,n){if(!f.subplotsRegistry[r])return[];var a=f.subplotsRegistry[r].attr;var i=[];var o,s,l;if(r==="gl2d"){var c=n.match(d);s="x"+c[1];l="y"+c[2]}for(var u=0;u<t.length;u++){o=t[u];if(r==="gl2d"&&f.traceIs(o,"gl2d")){if(o[a[0]]===s&&o[a[1]]===l){i.push(o)}}else{if(o[a]===n)i.push(o)}}return i}},{"../registry":313,"./cartesian/constants":283}],308:[function(e,t,r){"use strict";function n(e,t){var r=[0,0,0,0];var n,a;for(n=0;n<4;++n){for(a=0;a<4;++a){r[a]+=e[4*n+a]*t[n]}}return r}function a(e,t){var r=n(e.projection,n(e.view,n(e.model,[t[0],t[1],t[2],1])));return r}t.exports=a},{}],309:[function(e,t,r){"use strict";var n=e("./font_attributes");var a=e("./animation_attributes");var i=e("../components/color/attributes");var o=e("../components/shapes/draw_newshape/attributes");var s=e("./pad_attributes");var l=e("../lib/extend").extendFlat;var c=n({editType:"calc"});c.family.dflt='"Open Sans", verdana, arial, sans-serif';c.size.dflt=12;c.color.dflt=i.defaultLine;t.exports={font:c,title:{text:{valType:"string",editType:"layoutstyle"},font:n({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:l(s({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[false,"hide","show"],dflt:false,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:false,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:true,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:i.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:i.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:false,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:i.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:o.newshape,activeshape:o.activeshape,meta:{valType:"any",arrayOk:true,editType:"plot"},transition:l({},a.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:n({editType:"layoutstyle"})}}},{"../components/color/attributes":99,"../components/shapes/draw_newshape/attributes":185,"../lib/extend":224,"./animation_attributes":270,"./font_attributes":305,"./pad_attributes":310}],310:[function(e,t,r){"use strict";t.exports=function(e){var t=e.editType;return{t:{valType:"number",dflt:0,editType:t},r:{valType:"number",dflt:0,editType:t},b:{valType:"number",dflt:0,editType:t},l:{valType:"number",dflt:0,editType:t},editType:t}}},{}],311:[function(e,t,r){"use strict";var l=e("@plotly/d3");var n=e("d3-time-format").timeFormatLocale;var N=e("fast-isnumeric");var F=e("../registry");var _=e("../plot_api/plot_schema");var A=e("../plot_api/plot_template");var j=e("../lib");var y=e("../components/color");var b=e("../constants/numerical").BADNUM;var O=e("./cartesian/axis_ids");var B=e("./cartesian/handle_outline").clearSelect;var a=e("./animation_attributes");var i=e("./frame_attributes");var s=e("../plots/get_data").getModuleCalcData;var H=j.relinkPrivateKeys;var U=j._;var V=t.exports={};j.extendFlat(V,F);V.attributes=e("./attributes");V.attributes.type.values=V.allTypes;V.fontAttrs=e("./font_attributes");V.layoutAttributes=e("./layout_attributes");V.fontWeight="normal";var x=V.transformsRegistry;var o=e("./command");V.executeAPICommand=o.executeAPICommand;V.computeAPICommandBindings=o.computeAPICommandBindings;V.manageCommandObserver=o.manageCommandObserver;V.hasSimpleAPICommandBindings=o.hasSimpleAPICommandBindings;V.redrawText=function(t){t=j.getGraphDiv(t);return new Promise(function(e){setTimeout(function(){if(!t._fullLayout)return;F.getComponentMethod("annotations","draw")(t);F.getComponentMethod("legend","draw")(t);F.getComponentMethod("colorbar","draw")(t);e(V.previousPromises(t))},300)})};V.resize=function(r){r=j.getGraphDiv(r);var n;var e=new Promise(function(t,e){if(!r||j.isHidden(r)){e(new Error("Resize must be passed a displayed plot div element."))}if(r._redrawTimer)clearTimeout(r._redrawTimer);if(r._resolveResize)n=r._resolveResize;r._resolveResize=t;r._redrawTimer=setTimeout(function(){if(!r.layout||r.layout.width&&r.layout.height||j.isHidden(r)){t(r);return}delete r.layout.width;delete r.layout.height;var e=r.changed;r.autoplay=true;F.call("relayout",r,{autosize:true}).then(function(){r.changed=e;if(r._resolveResize===t){delete r._resolveResize;t(r)}})},100)});if(n)n(e);return e};V.previousPromises=function(e){if((e._promises||[]).length){return Promise.all(e._promises).then(function(){e._promises=[]})}};V.addLinks=function(e){if(!e._context.showLink&&!e._context.showSources)return;var t=e._fullLayout;var r=j.ensureSingle(t._paper,"text","js-plot-link-container",function(e){e.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:y.defaultLine,"pointer-events":"all"}).each(function(){var e=l.select(this);e.append("tspan").classed("js-link-to-tool",true);e.append("tspan").classed("js-link-spacer",true);e.append("tspan").classed("js-sourcelinks",true)})});var n=r.node();var a={y:t._paper.attr("height")-9};if(document.body.contains(n)&&n.getComputedTextLength()>=t.width-20){a["text-anchor"]="start";a.x=5}else{a["text-anchor"]="end";a.x=t._paper.attr("width")-7}r.attr(a);var i=r.select(".js-link-to-tool");var o=r.select(".js-link-spacer");var s=r.select(".js-sourcelinks");if(e._context.showSources)e._context.showSources(e);if(e._context.showLink)c(e,i);o.text(i.text()&&s.text()?" - ":"")};function c(e,t){t.text("");var r=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));if(e._context.sendData){r.on("click",function(){V.sendDataToCloud(e)})}else{var n=window.location.pathname.split("/");var a=window.location.search;r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+n[2].split(".")[0]+"/"+n[1]+a})}}V.sendDataToCloud=function(e){var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(!t)return;e.emit("plotly_beforeexport");var r=l.select(e).append("div").attr("id","hiddenform").style("display","none");var n=r.append("form").attr({action:t+"/external",method:"post",target:"_blank"});var a=n.append("input").attr({type:"text",name:"data"});a.node().value=V.graphJson(e,false,"keepdata");n.node().submit();r.remove();e.emit("plotly_afterexport");return false};var q=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"];var Y=["year","month","dayMonth","dayMonthYear"];V.supplyDefaults=function(e,t){var r=t&&t.skipUpdateCalc;var n=e._fullLayout||{};if(n._skipDefaults){delete n._skipDefaults;return}var a=e._fullLayout={};var i=e.layout||{};var o=e._fullData||[];var s=e._fullData=[];var l=e.data||[];var c=e.calcdata||[];var u=e._context||{};var f;if(!e._transitionData)V.createTransitionData(e);a._dfltTitle={plot:U(e,"Click to enter Plot title"),x:U(e,"Click to enter X axis title"),y:U(e,"Click to enter Y axis title"),colorbar:U(e,"Click to enter Colorscale title"),annotation:U(e,"new text")};a._traceWord=U(e,"trace");var d=X(e,q);a._mapboxAccessToken=u.mapboxAccessToken;if(n._initialAutoSizeIsDone){var h=n.width;var p=n.height;V.supplyLayoutGlobalDefaults(i,a,d);if(!i.width)a.width=h;if(!i.height)a.height=p;V.sanitizeMargins(a)}else{V.supplyLayoutGlobalDefaults(i,a,d);var v=!i.width||!i.height;var g=a.autosize;var m=u.autosizable;var _=v&&(g||m);if(_)V.plotAutoSize(e,i,a);else if(v)V.sanitizeMargins(a);if(!g&&v){i.width=a.width;i.height=a.height}}a._d3locale=Z(d,a.separators);a._extraFormat=X(e,Y);a._initialAutoSizeIsDone=true;a._dataLength=l.length;a._modules=[];a._visibleModules=[];a._basePlotModules=[];var y=a._subplots=W();var b=a._splomAxes={x:{},y:{}};var x=a._splomSubplots={};a._splomGridDflt={};a._scatterStackOpts={};a._firstScatter={};a._alignmentOpts={};a._colorAxes={};a._requestRangeslider={};a._traceUids=G(o,l);a._globalTransforms=(e._context||{}).globalTransforms;V.supplyDataDefaults(l,s,i,a);var w=Object.keys(b.x);var A=Object.keys(b.y);if(w.length>1&&A.length>1){F.getComponentMethod("grid","sizeDefaults")(i,a);for(f=0;f<w.length;f++){j.pushUnique(y.xaxis,w[f])}for(f=0;f<A.length;f++){j.pushUnique(y.yaxis,A[f])}for(var T in x){j.pushUnique(y.cartesian,T)}}a._has=V._hasPlotType.bind(a);if(o.length===s.length){for(f=0;f<s.length;f++){H(s[f],o[f])}}V.supplyLayoutModuleDefaults(i,a,s,e._transitionData);var k=a._visibleModules;var M=[];for(f=0;f<k.length;f++){var S=k[f].crossTraceDefaults;if(S)j.pushUnique(M,S)}for(f=0;f<M.length;f++){M[f](s,a)}a._hasOnlyLargeSploms=a._basePlotModules.length===1&&a._basePlotModules[0].name==="splom"&&w.length>15&&A.length>15&&a.shapes.length===0&&a.images.length===0;V.linkSubplots(s,a,o,n);V.cleanPlot(s,a,o,n);var C=!!(n._has&&n._has("gl2d"));var L=!!(a._has&&a._has("gl2d"));var E=!!(n._has&&n._has("cartesian"));var D=!!(a._has&&a._has("cartesian"));var O=E||C;var P=D||L;if(O&&!P){n._bgLayer.remove()}else if(P&&!O){a._shouldCreateBgLayer=true}if(n._zoomlayer&&!e._dragging){B({_fullLayout:n})}J(s,a);H(a,n);F.getComponentMethod("colorscale","crossTraceDefaults")(s,a);if(!a._preGUI)a._preGUI={};if(!a._tracePreGUI)a._tracePreGUI={};var I=a._tracePreGUI;var R={};var z;for(z in I)R[z]="old";for(f=0;f<s.length;f++){z=s[f]._fullInput.uid;if(!R[z])I[z]={};R[z]="new"}for(z in R){if(R[z]==="old")delete I[z]}$(a);F.getComponentMethod("rangeslider","makeData")(a);if(!r&&c.length===s.length){V.supplyDefaultsUpdateCalc(c,s)}};V.supplyDefaultsUpdateCalc=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];var a=(e[r]||[])[0];if(a&&a.trace){var i=a.trace;if(i._hasCalcTransform){var o=i._arrayAttrs;var s,l,c;for(s=0;s<o.length;s++){l=o[s];c=j.nestedProperty(i,l).get().slice();j.nestedProperty(n,l).set(c)}}a.trace=n}}};function G(e,t){var r=t.length;var n=[];var a,i;for(a=0;a<e.length;a++){var o=e[a]._fullInput;if(o!==i)n.push(o);i=o}var s=n.length;var l=new Array(r);var c={};function u(e,t){l[t]=e;c[e]=1}function f(e,t){if(e&&typeof e==="string"&&!c[e]){u(e,t);return true}}for(a=0;a<r;a++){var d=t[a].uid;if(typeof d==="number")d=String(d);if(f(d,a))continue;if(a<s&&f(n[a].uid,a))continue;u(j.randstr(c),a)}return l}function W(){var e=F.collectableSubplotTypes;var t={};var r,n;if(!e){e=[];var a=F.subplotsRegistry;for(var i in a){var o=a[i];var s=o.attr;if(s){e.push(i);if(Array.isArray(s)){for(n=0;n<s.length;n++){j.pushUnique(e,s[n])}}}}}for(r=0;r<e.length;r++){t[e[r]]=[]}return t}function X(e,a){var t=e._context.locale;if(!t)t="en-US";var i=false;var o={};function r(e){var t=true;for(var r=0;r<a.length;r++){var n=a[r];if(!o[n]){if(e[n]){o[n]=e[n]}else t=false}}if(t)i=true}for(var n=0;n<2;n++){var s=e._context.locales;for(var l=0;l<2;l++){var c=(s[t]||{}).format;if(c){r(c);if(i)break}s=F.localeRegistry}var u=t.split("-")[0];if(i||u===t)break;t=u}if(!i)r(F.localeRegistry.en.format);return o}function Z(e,t){e.decimal=t.charAt(0);e.thousands=t.charAt(1);return{numberFormat:l.locale(e).numberFormat,timeFormat:n(e).utcFormat}}function J(e,t){var r;var n=[];if(t.meta){r=t._meta={meta:t.meta,layout:{meta:t.meta}}}for(var a=0;a<e.length;a++){var i=e[a];if(i.meta){n[i.index]=i._meta={meta:i.meta}}else if(t.meta){i._meta={meta:t.meta}}if(t.meta){i._meta.layout={meta:t.meta}}}if(n.length){if(!r){r=t._meta={}}r.data=n}}V.createTransitionData=function(e){if(!e._transitionData){e._transitionData={}}if(!e._transitionData._frames){e._transitionData._frames=[]}if(!e._transitionData._frameHash){e._transitionData._frameHash={}}if(!e._transitionData._counter){e._transitionData._counter=0}if(!e._transitionData._interruptCallbacks){e._transitionData._interruptCallbacks=[]}};V._hasPlotType=function(e){var t;var r=this._basePlotModules||[];for(t=0;t<r.length;t++){if(r[t].name===e)return true}var n=this._modules||[];for(t=0;t<n.length;t++){var a=n[t].name;if(a===e)return true;var i=F.modules[a];if(i&&i.categories[e])return true}return false};V.cleanPlot=function(e,t,r,n){var a,i;var o=n._basePlotModules||[];for(a=0;a<o.length;a++){var s=o[a];if(s.clean){s.clean(e,t,r,n)}}var l=n._has&&n._has("gl");var c=t._has&&t._has("gl");if(l&&!c){if(n._glcontainer!==undefined){n._glcontainer.selectAll(".gl-canvas").remove();n._glcontainer.selectAll(".no-webgl").remove();n._glcanvas=null}}var u=!!n._infolayer;e:for(a=0;a<r.length;a++){var f=r[a];var d=f.uid;for(i=0;i<e.length;i++){var h=e[i];if(d===h.uid)continue e}if(u){n._infolayer.select(".cb"+d).remove()}}};V.linkSubplots=function(e,t,r,n){var a,i;var o=n._plots||{};var s=t._plots={};var l=t._subplots;var c={_fullData:e,_fullLayout:t};var u=l.cartesian.concat(l.gl2d||[]);for(a=0;a<u.length;a++){var f=u[a];var d=o[f];var h=O.getFromId(c,f,"x");var p=O.getFromId(c,f,"y");var v;if(d){v=s[f]=d}else{v=s[f]={};v.id=f}h._counterAxes.push(p._id);p._counterAxes.push(h._id);h._subplotsWith.push(f);p._subplotsWith.push(f);v.xaxis=h;v.yaxis=p;v._hasClipOnAxisFalse=false;for(i=0;i<e.length;i++){var g=e[i];if(g.xaxis===v.xaxis._id&&g.yaxis===v.yaxis._id&&g.cliponaxis===false){v._hasClipOnAxisFalse=true;break}}}var m=O.list(c,null,true);var _;for(a=0;a<m.length;a++){_=m[a];var y=null;if(_.overlaying){y=O.getFromId(c,_.overlaying);if(y&&y.overlaying){_.overlaying=false;y=null}}_._mainAxis=y||_;if(y)_.domain=y.domain.slice();_._anchorAxis=_.anchor==="free"?null:O.getFromId(c,_.anchor)}for(a=0;a<m.length;a++){_=m[a];_._counterAxes.sort(O.idSort);_._subplotsWith.sort(j.subplotSort);_._mainSubplot=T(_,t);if(_._counterAxes.length&&(_.spikemode&&_.spikemode.indexOf("across")!==-1||_.automargin&&_.mirror&&_.anchor!=="free"||F.getComponentMethod("rangeslider","isVisible")(_))){var b=1;var x=0;for(i=0;i<_._counterAxes.length;i++){var w=O.getFromId(c,_._counterAxes[i]);b=Math.min(b,w.domain[0]);x=Math.max(x,w.domain[1])}if(b<x){_._counterDomainMin=b;_._counterDomainMax=x}}}};function T(e,t){var r={_fullLayout:t};var n=e._id.charAt(0)==="x";var a=e._mainAxis._anchorAxis;var i="";var o="";var s="";if(a){s=a._mainAxis._id;i=n?e._id+s:s+e._id}if(!i||!t._plots[i]){i="";var l=e._counterAxes;for(var c=0;c<l.length;c++){var u=l[c];var f=n?e._id+u:u+e._id;if(!o)o=f;var d=O.getFromId(r,u);if(s&&d.overlaying===s){i=f;break}}}return i||o}V.clearExpandedTraceDefaultColors=function(e){var a,i,t;function r(e,t,r,n){i[n]=t;i.length=n+1;if(e.valType==="color"&&e.dflt===undefined){a.push(i.join("."))}}i=[];a=e._module._colorAttrs;if(!a){e._module._colorAttrs=a=[];_.crawl(e._module.attributes,r)}for(t=0;t<a.length;t++){var n=j.nestedProperty(e,"_input."+a[t]);if(!n.get()){j.nestedProperty(e,a[t]).set(null)}}};V.supplyDataDefaults=function(e,r,t,n){var a=n._modules;var i=n._visibleModules;var o=n._basePlotModules;var s=0;var l=0;var c,u,f;n._transformModules=[];function d(e){r.push(e);var t=e._module;if(!t)return;j.pushUnique(a,t);if(e.visible===true)j.pushUnique(i,t);j.pushUnique(o,e._module.basePlotModule);s++;if(e._input.visible!==false)l++}var h={};var p=[];var v=(t.template||{}).data||{};var g=A.traceTemplater(v);for(c=0;c<e.length;c++){f=e[c];u=g.newTrace(f);u.uid=n._traceUids[c];V.supplyTraceDefaults(f,u,l,n,c);u.index=c;u._input=f;u._expandedIndex=s;if(u.transforms&&u.transforms.length){var m=f.visible!==false&&u.visible===false;var _=k(u,r,t,n);for(var y=0;y<_.length;y++){var b=_[y];var x={_template:u._template,type:u.type,uid:u.uid+y};if(m&&b.visible===false){delete b.visible}V.supplyTraceDefaults(b,x,s,n,c);H(x,b);x.index=c;x._input=f;x._fullInput=u;x._expandedIndex=s;x._expandedInput=b;d(x)}}else{u._fullInput=u;u._expandedInput=u;d(u)}if(F.traceIs(u,"carpetAxis")){h[u.carpet]=u}if(F.traceIs(u,"carpetDependent")){p.push(c)}}for(c=0;c<p.length;c++){u=r[p[c]];if(!u.visible)continue;var w=h[u.carpet];u._carpet=w;if(!w||!w.visible){u.visible=false;continue}u.xaxis=w.xaxis;u.yaxis=w.yaxis}};V.supplyAnimationDefaults=function(r){r=r||{};var e;var n={};function t(e,t){return j.coerce(r||{},n,a,e,t)}t("mode");t("direction");t("fromcurrent");if(Array.isArray(r.frame)){n.frame=[];for(e=0;e<r.frame.length;e++){n.frame[e]=V.supplyAnimationFrameDefaults(r.frame[e]||{})}}else{n.frame=V.supplyAnimationFrameDefaults(r.frame||{})}if(Array.isArray(r.transition)){n.transition=[];for(e=0;e<r.transition.length;e++){n.transition[e]=V.supplyAnimationTransitionDefaults(r.transition[e]||{})}}else{n.transition=V.supplyAnimationTransitionDefaults(r.transition||{})}return n};V.supplyAnimationFrameDefaults=function(r){var n={};function e(e,t){return j.coerce(r||{},n,a.frame,e,t)}e("duration");e("redraw");return n};V.supplyAnimationTransitionDefaults=function(r){var n={};function e(e,t){return j.coerce(r||{},n,a.transition,e,t)}e("duration");e("easing");return n};V.supplyFrameDefaults=function(r){var n={};function e(e,t){return j.coerce(r,n,i,e,t)}e("group");e("name");e("traces");e("baseframe");e("data");e("layout");return n};V.supplyTraceDefaults=function(r,n,e,t,a){var i=t.colorway||y.defaults;var o=i[e%i.length];var s;function l(e,t){return j.coerce(r,n,V.attributes,e,t)}var c=l("visible");l("type");l("name",t._traceWord+" "+a);l("uirevision",t.uirevision);var u=V.getModule(n);n._module=u;if(u){var f=u.basePlotModule;var d=f.attr;var h=f.attributes;if(d&&h){var p=t._subplots;var v="";if(c||f.name!=="gl2d"){if(Array.isArray(d)){for(s=0;s<d.length;s++){var g=d[s];var m=j.coerce(r,n,h,g);if(p[g])j.pushUnique(p[g],m);v+=m}}else{v=j.coerce(r,n,h,d)}if(p[f.name]){j.pushUnique(p[f.name],v)}}}}if(c){l("customdata");l("ids");l("meta");if(F.traceIs(n,"showLegend")){j.coerce(r,n,u.attributes.showlegend?u.attributes:V.attributes,"showlegend");l("legendgroup");var _=l("legendgrouptitle.text");if(_){j.coerceFont(l,"legendgrouptitle.font",j.extendFlat({},t.font,{size:Math.round(t.font.size*1.1)}))}l("legendrank");n._dfltShowLegend=true}else{n._dfltShowLegend=false}if(u){u.supplyDefaults(r,n,o,t)}if(!F.traceIs(n,"noOpacity")){l("opacity")}if(F.traceIs(n,"notLegendIsolatable")){n.visible=!!n.visible}if(!F.traceIs(n,"noHover")){if(!n.hovertemplate)j.coerceHoverinfo(r,n,t);if(n.type!=="parcats"){F.getComponentMethod("fx","supplyDefaults")(r,n,o,t)}}if(u&&u.selectPoints){l("selectedpoints")}V.supplyTransformDefaults(r,n,t)}return n};function v(e){var t=e.transforms;if(Array.isArray(t)&&t.length){for(var r=0;r<t.length;r++){var n=t[r];var a=n._module||x[n.type];if(a&&a.makesData)return true}}return false}V.hasMakesDataTransform=v;V.supplyTransformDefaults=function(e,t,r){if(!(t._length||v(e)))return;var n=r._globalTransforms||[];var a=r._transformModules||[];if(!Array.isArray(e.transforms)&&n.length===0)return;var i=e.transforms||[];var o=n.concat(i);var s=t.transforms=[];for(var l=0;l<o.length;l++){var c=o[l];var u=c.type;var f=x[u];var d;var h=!(c._module&&c._module===f);var p=f&&typeof f.transform==="function";if(!f)j.warn("Unrecognized transform type "+u+".");if(f&&f.supplyDefaults&&(h||p)){d=f.supplyDefaults(c,t,r,e);d.type=u;d._module=f;j.pushUnique(a,f)}else{d=j.extendFlat({},c)}s.push(d)}};function k(e,t,r,n){var a=e.transforms;var i=[e];for(var o=0;o<a.length;o++){var s=a[o];var l=x[s.type];if(l&&l.transform){i=l.transform(i,{transform:s,fullTrace:e,fullData:t,layout:r,fullLayout:n,transformIndex:o})}}return i}V.supplyLayoutGlobalDefaults=function(r,n,e){function t(e,t){return j.coerce(r,n,V.layoutAttributes,e,t)}var a=r.template;if(j.isPlainObject(a)){n.template=a;n._template=a.layout;n._dataTemplate=a.data}t("autotypenumbers");var i=j.coerceFont(t,"font");t("title.text",n._dfltTitle.plot);j.coerceFont(t,"title.font",{family:i.family,size:Math.round(i.size*1.4),color:i.color});t("title.xref");t("title.yref");t("title.x");t("title.y");t("title.xanchor");t("title.yanchor");t("title.pad.t");t("title.pad.r");t("title.pad.b");t("title.pad.l");var o=t("uniformtext.mode");if(o){t("uniformtext.minsize")}t("autosize",!(r.width&&r.height));t("width");t("height");t("margin.l");t("margin.r");t("margin.t");t("margin.b");t("margin.pad");t("margin.autoexpand");if(r.width&&r.height)V.sanitizeMargins(n);F.getComponentMethod("grid","sizeDefaults")(r,n);t("paper_bgcolor");t("separators",e.decimal+e.thousands);t("hidesources");t("colorway");t("datarevision");var s=t("uirevision");t("editrevision",s);t("selectionrevision",s);F.getComponentMethod("modebar","supplyLayoutDefaults")(r,n);F.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(r,n,t);t("meta");if(j.isPlainObject(r.transition)){t("transition.duration");t("transition.easing");t("transition.ordering")}F.getComponentMethod("calendars","handleDefaults")(r,n,"calendar");F.getComponentMethod("fx","supplyLayoutGlobalDefaults")(r,n,t)};function g(e){return typeof e==="string"&&e.substr(e.length-2)==="px"&&parseFloat(e)}V.plotAutoSize=function e(t,r,n){var a=t._context||{};var i=a.frameMargins;var o;var s;var l=j.isPlotDiv(t);if(l)t.emit("plotly_autosize");if(a.fillFrame){o=window.innerWidth;s=window.innerHeight;document.body.style.overflow="hidden"}else{var c=l?window.getComputedStyle(t):{};o=g(c.width)||g(c.maxWidth)||n.width;s=g(c.height)||g(c.maxHeight)||n.height;if(N(i)&&i>0){var u=1-2*i;o=Math.round(u*o);s=Math.round(u*s)}}var f=V.layoutAttributes.width.min;var d=V.layoutAttributes.height.min;if(o<f)o=f;if(s<d)s=d;var h=!r.width&&Math.abs(n.width-o)>1;var p=!r.height&&Math.abs(n.height-s)>1;if(p||h){if(h)n.width=o;if(p)n.height=s}if(!t._initialAutoSize){t._initialAutoSize={width:o,height:s}}V.sanitizeMargins(n)};V.supplyLayoutModuleDefaults=function(e,t,r,n){var a=F.componentsRegistry;var i=t._basePlotModules;var o,s,l;var c=F.subplotsRegistry.cartesian;for(o in a){l=a[o];if(l.includeBasePlot){l.includeBasePlot(e,t)}}if(!i.length){i.push(c)}if(t._has("cartesian")){F.getComponentMethod("grid","contentDefaults")(e,t);c.finalizeSubplots(e,t)}for(var u in t._subplots){t._subplots[u].sort(j.subplotSort)}for(s=0;s<i.length;s++){l=i[s];if(l.supplyLayoutDefaults){l.supplyLayoutDefaults(e,t,r)}}var f=t._modules;for(s=0;s<f.length;s++){l=f[s];if(l.supplyLayoutDefaults){l.supplyLayoutDefaults(e,t,r)}}var d=t._transformModules;for(s=0;s<d.length;s++){l=d[s];if(l.supplyLayoutDefaults){l.supplyLayoutDefaults(e,t,r,n)}}for(o in a){l=a[o];if(l.supplyLayoutDefaults){l.supplyLayoutDefaults(e,t,r)}}};V.purge=function(e){var t=e._fullLayout||{};if(t._glcontainer!==undefined){t._glcontainer.selectAll(".gl-canvas").remove();t._glcontainer.remove();t._glcanvas=null}if(t._modeBar)t._modeBar.destroy();if(e._transitionData){if(e._transitionData._interruptCallbacks){e._transitionData._interruptCallbacks.length=0}if(e._transitionData._animationRaf){window.cancelAnimationFrame(e._transitionData._animationRaf)}}j.clearThrottle();j.clearResponsive(e);delete e.data;delete e.layout;delete e._fullData;delete e._fullLayout;delete e.calcdata;delete e.empty;delete e.fid;delete e.undoqueue;delete e.undonum;delete e.autoplay;delete e.changed;delete e._promises;delete e._redrawTimer;delete e._hmlumcount;delete e._hmpixcount;delete e._transitionData;delete e._transitioning;delete e._initialAutoSize;delete e._transitioningWithDuration;delete e._dragging;delete e._dragged;delete e._dragdata;delete e._hoverdata;delete e._snapshotInProgress;delete e._editing;delete e._mouseDownTime;delete e._legendMouseDownTime;if(e.removeAllListeners)e.removeAllListeners()};V.style=function(e){var t=e._fullLayout._visibleModules;var r=[];var n;for(n=0;n<t.length;n++){var a=t[n];if(a.style){j.pushUnique(r,a.style)}}for(n=0;n<r.length;n++){r[n](e)}};V.sanitizeMargins=function(e){if(!e||!e.margin)return;var t=e.width;var r=e.height;var n=e.margin;var a=t-(n.l+n.r);var i=r-(n.t+n.b);var o;if(a<0){o=(t-1)/(n.l+n.r);n.l=Math.floor(o*n.l);n.r=Math.floor(o*n.r)}if(i<0){o=(r-1)/(n.t+n.b);n.t=Math.floor(o*n.t);n.b=Math.floor(o*n.b)}};V.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}};V.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};function $(e){var t=e.margin;if(!e._size){var r=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)};r.w=Math.round(e.width)-r.l-r.r;r.h=Math.round(e.height)-r.t-r.b}if(!e._pushmargin)e._pushmargin={};if(!e._pushmarginIds)e._pushmarginIds={}}var Q=2;var K=2;var ee=64;var te=64;V.autoMargin=function(e,t,r){var n=e._fullLayout;var a=n.width;var i=n.height;var o=n.margin;var s=j.constrain(a-o.l-o.r,Q,ee);var l=j.constrain(i-o.t-o.b,K,te);var c=Math.max(0,a-s);var u=Math.max(0,i-l);var f=n._pushmargin;var d=n._pushmarginIds;if(o.autoexpand!==false){if(!r){delete f[t];delete d[t]}else{var h=r.pad;if(h===undefined){h=Math.min(12,o.l,o.r,o.t,o.b)}if(c){var p=(r.l+r.r)/c;if(p>1){r.l/=p;r.r/=p}}if(u){var v=(r.t+r.b)/u;if(v>1){r.t/=v;r.b/=v}}var g=r.xl!==undefined?r.xl:r.x;var m=r.xr!==undefined?r.xr:r.x;var _=r.yt!==undefined?r.yt:r.y;var y=r.yb!==undefined?r.yb:r.y;f[t]={l:{val:g,size:r.l+h},r:{val:m,size:r.r+h},b:{val:y,size:r.b+h},t:{val:_,size:r.t+h}};d[t]=1}if(!n._replotting){return V.doAutoMargin(e)}}};V.doAutoMargin=function(e){var t=e._fullLayout;var r=t.width;var n=t.height;if(!t._size)t._size={};$(t);var a=t._size;var i=t.margin;var o=j.extendFlat({},a);var s=i.l;var l=i.r;var c=i.t;var u=i.b;var f=t._pushmargin;var d=t._pushmarginIds;if(t.margin.autoexpand!==false){for(var h in f){if(!d[h])delete f[h]}f.base={l:{val:0,size:s},r:{val:1,size:l},t:{val:1,size:c},b:{val:0,size:u}};for(var p in f){var v=f[p].l||{};var g=f[p].b||{};var m=v.val;var _=v.size;var y=g.val;var b=g.size;for(var x in f){if(N(_)&&f[x].r){var w=f[x].r.val;var A=f[x].r.size;if(w>m){var T=(_*w+(A-r)*m)/(w-m);var k=(A*(1-m)+(_-r)*(1-w))/(w-m);if(T+k>s+l){s=T;l=k}}}if(N(b)&&f[x].t){var M=f[x].t.val;var S=f[x].t.size;if(M>y){var C=(b*M+(S-n)*y)/(M-y);var L=(S*(1-y)+(b-n)*(1-M))/(M-y);if(C+L>u+c){u=C;c=L}}}}}}var E=j.constrain(r-i.l-i.r,Q,ee);var D=j.constrain(n-i.t-i.b,K,te);var O=Math.max(0,r-E);var P=Math.max(0,n-D);if(O){var I=(s+l)/O;if(I>1){s/=I;l/=I}}if(P){var R=(u+c)/P;if(R>1){u/=R;c/=R}}a.l=Math.round(s);a.r=Math.round(l);a.t=Math.round(c);a.b=Math.round(u);a.p=Math.round(i.pad);a.w=Math.round(r)-a.l-a.r;a.h=Math.round(n)-a.t-a.b;if(!t._replotting&&V.didMarginChange(o,a)){if("_redrawFromAutoMarginCount"in t){t._redrawFromAutoMarginCount++}else{t._redrawFromAutoMarginCount=1}var z=3*(1+Object.keys(d).length);if(t._redrawFromAutoMarginCount<z){return F.call("_doPlot",e)}else{t._size=o;j.warn("Too many auto-margin redraws.")}}re(e)};function re(e){var n=O.list(e,"",true);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(e){for(var t=0;t<n.length;t++){var r=n[t][e];if(r)r()}})}var u=["l","r","t","b","p","w","h"];V.didMarginChange=function(e,t){for(var r=0;r<u.length;r++){var n=u[r];var a=e[n];var i=t[n];if(!N(a)||Math.abs(i-a)>1){return true}}return false};V.graphJson=function(e,r,i,t,n,a){if(n&&r&&!e._fullData||n&&!r&&!e._fullLayout){V.supplyDefaults(e)}var o=n?e._fullData:e.data;var s=n?e._fullLayout:e.layout;var l=(e._transitionData||{})._frames;function c(t,r){if(typeof t==="function"){return r?"_function_":null}if(j.isPlainObject(t)){var n={};var a;Object.keys(t).sort().forEach(function(e){if(["_","["].indexOf(e.charAt(0))!==-1)return;if(typeof t[e]==="function"){if(r)n[e]="_function";return}if(i==="keepdata"){if(e.substr(e.length-3)==="src"){return}}else if(i==="keepstream"){a=t[e+"src"];if(typeof a==="string"&&a.indexOf(":")>0){if(!j.isPlainObject(t.stream)){return}}}else if(i!=="keepall"){a=t[e+"src"];if(typeof a==="string"&&a.indexOf(":")>0){return}}n[e]=c(t[e],r)});return n}if(Array.isArray(t)){return t.map(function(e){return c(e,r)})}if(j.isTypedArray(t)){return j.simpleMap(t,j.identity)}if(j.isJSDate(t))return j.ms2DateTimeLocal(+t);return t}var u={data:(o||[]).map(function(e){var t=c(e);if(r){delete t.fit}return t})};if(!r){u.layout=c(s);if(n){var f=s._size;u.layout.computed={margin:{b:f.b,l:f.l,r:f.r,t:f.t}}}}if(l)u.frames=c(l);if(a)u.config=c(e._context,true);return t==="object"?u:JSON.stringify(u)};V.modifyFrames=function(e,t){var r,n,a;var i=e._transitionData._frames;var o=e._transitionData._frameHash;for(r=0;r<t.length;r++){n=t[r];switch(n.type){case"replace":a=n.value;var s=(i[n.index]||{}).name;var l=a.name;i[n.index]=o[l]=a;if(l!==s){delete o[s];o[l]=a}break;case"insert":a=n.value;o[a.name]=a;i.splice(n.index,0,a);break;case"delete":a=i[n.index];delete o[a.name];i.splice(n.index,1);break}}return Promise.resolve()};V.computeFrame=function(e,t){var r=e._transitionData._frameHash;var n,a,i,o;if(!t){throw new Error("computeFrame must be given a string frame name")}var s=r[t.toString()];if(!s){return false}var l=[s];var c=[s.name];while(s.baseframe&&(s=r[s.baseframe.toString()])){if(c.indexOf(s.name)!==-1)break;l.push(s);c.push(s.name)}var u={};while(s=l.pop()){if(s.layout){u.layout=V.extendLayout(u.layout,s.layout)}if(s.data){if(!u.data){u.data=[]}a=s.traces;if(!a){a=[];for(n=0;n<s.data.length;n++){a[n]=n}}if(!u.traces){u.traces=[]}for(n=0;n<s.data.length;n++){i=a[n];if(i===undefined||i===null){continue}o=u.traces.indexOf(i);if(o===-1){o=u.data.length;u.traces[o]=i}u.data[o]=V.extendTrace(u.data[o],s.data[n])}}}return u};V.recomputeFrameHash=function(e){var t=e._transitionData._frameHash={};var r=e._transitionData._frames;for(var n=0;n<r.length;n++){var a=r[n];if(a&&a.name){t[a.name]=a}}};V.extendObjectWithContainers=function(e,t,r){var n,a,i,o,s,l,c,u;var f=j.extendDeepNoArrays({},t||{});var d=j.expandObjectPaths(f);var h={};if(r&&r.length){for(i=0;i<r.length;i++){n=j.nestedProperty(d,r[i]);a=n.get();if(a===undefined){j.nestedProperty(h,r[i]).set(null)}else{n.set(null);j.nestedProperty(h,r[i]).set(a)}}}e=j.extendDeepNoArrays(e||{},d);if(r&&r.length){for(i=0;i<r.length;i++){s=j.nestedProperty(h,r[i]);c=s.get();if(!c)continue;l=j.nestedProperty(e,r[i]);u=l.get();if(!Array.isArray(u)){u=[];l.set(u)}for(o=0;o<c.length;o++){var p=c[o];if(p===null)u[o]=null;else{u[o]=V.extendObjectWithContainers(u[o],p)}}l.set(u)}}return e};V.dataArrayContainers=["transforms","dimensions"];V.layoutArrayContainers=F.layoutArrayContainers;V.extendTrace=function(e,t){return V.extendObjectWithContainers(e,t,V.dataArrayContainers)};V.extendLayout=function(e,t){return V.extendObjectWithContainers(e,t,V.layoutArrayContainers)};V.transition=function(w,A,T,k,e,l){var t={redraw:e.redraw};var M={};var S=[];t.prepareFn=function(){var e=Array.isArray(A)?A.length:0;var t=k.slice(0,e);for(var r=0;r<t.length;r++){var n=t[r];var a=w._fullData[n];var i=a._module;if(!i)continue;if(i.animatable){var o=i.basePlotModule.name;if(!M[o])M[o]=[];M[o].push(n)}w.data[t[r]]=V.extendTrace(w.data[t[r]],A[r])}var s=j.expandObjectPaths(j.extendDeepNoArrays({},T));var l=/^[xy]axis[0-9]*$/;for(var c in s){if(!l.test(c))continue;delete s[c].range}V.extendLayout(w.layout,s);delete w.calcdata;V.supplyDefaults(w);V.doCalcdata(w);var u=j.expandObjectPaths(T);if(u){var f=w._fullLayout._plots;for(var d in f){var h=f[d];var p=h.xaxis;var v=h.yaxis;var g=p.range.slice();var m=v.range.slice();var _=null;var y=null;var b=null;var x=null;if(Array.isArray(u[p._name+".range"])){_=u[p._name+".range"].slice()}else if(Array.isArray((u[p._name]||{}).range)){_=u[p._name].range.slice()}if(Array.isArray(u[v._name+".range"])){y=u[v._name+".range"].slice()}else if(Array.isArray((u[v._name]||{}).range)){y=u[v._name].range.slice()}if(g&&_&&(p.r2l(g[0])!==p.r2l(_[0])||p.r2l(g[1])!==p.r2l(_[1]))){b={xr0:g,xr1:_}}if(m&&y&&(v.r2l(m[0])!==v.r2l(y[0])||v.r2l(m[1])!==v.r2l(y[1]))){x={yr0:m,yr1:y}}if(b||x){S.push(j.extendFlat({plotinfo:h},b,x))}}}return Promise.resolve()};t.runFn=function(e){var t;var r=w._fullLayout._basePlotModules;var n=S.length;var a;if(T){for(a=0;a<r.length;a++){if(r[a].transitionAxes){r[a].transitionAxes(w,S,l,e)}}}if(n){t=j.extendFlat({},l);t.duration=0;delete M.cartesian}else{t=l}for(var i in M){var o=M[i];var s=w._fullData[o[0]]._module;s.basePlotModule.plot(w,o,t,e)}};return C(w,l,t)};V.transitionFromReact=function(f,d,h,p){var v=f._fullLayout;var g=v.transition;var m={};var _=[];m.prepareFn=function(){var e=v._plots;m.redraw=false;if(d.anim==="some")m.redraw=true;if(h.anim==="some")m.redraw=true;for(var t in e){var r=e[t];var n=r.xaxis;var a=r.yaxis;var i=p[n._name].range.slice();var o=p[a._name].range.slice();var s=n.range.slice();var l=a.range.slice();n.setScale();a.setScale();var c=null;var u=null;if(n.r2l(i[0])!==n.r2l(s[0])||n.r2l(i[1])!==n.r2l(s[1])){c={xr0:i,xr1:s}}if(a.r2l(o[0])!==a.r2l(l[0])||a.r2l(o[1])!==a.r2l(l[1])){u={yr0:o,yr1:l}}if(c||u){_.push(j.extendFlat({plotinfo:r},c,u))}}return Promise.resolve()};m.runFn=function(t){var e=f._fullData;var r=f._fullLayout;var n=r._basePlotModules;var a;var i;var o;var s=[];for(var l=0;l<e.length;l++){s.push(l)}function c(){if(!f._fullLayout)return;for(var e=0;e<n.length;e++){if(n[e].transitionAxes){n[e].transitionAxes(f,_,a,t)}}}function u(){if(!f._fullLayout)return;for(var e=0;e<n.length;e++){n[e].plot(f,o,i,t)}}if(_.length&&d.anim){if(g.ordering==="traces first"){a=j.extendFlat({},g,{duration:0});o=s;i=g;setTimeout(c,g.duration);u()}else{a=g;o=null;i=j.extendFlat({},g,{duration:0});setTimeout(u,a.duration);c()}}else if(_.length){a=g;c()}else if(d.anim){o=s;i=g;u()}};return C(f,g,m)};function C(a,i,o){var s=false;function e(e){var t=Promise.resolve();if(!e)return t;while(e.length){t=t.then(e.shift())}return t}function t(e){if(!e)return;while(e.length){e.shift()}}function r(){a.emit("plotly_transitioning",[]);return new Promise(function(e){a._transitioning=true;if(i.duration>0){a._transitioningWithDuration=true}a._transitionData._interruptCallbacks.push(function(){s=true});if(o.redraw){a._transitionData._interruptCallbacks.push(function(){return F.call("redraw",a)})}a._transitionData._interruptCallbacks.push(function(){a.emit("plotly_transitioninterrupted",[])});var t=0;var r=0;function n(){t++;return function(){r++;if(!s&&r===t){l(e)}}}o.runFn(n);setTimeout(n())})}function l(e){if(!a._transitionData)return;t(a._transitionData._interruptCallbacks);return Promise.resolve().then(function(){if(o.redraw){return F.call("redraw",a)}}).then(function(){a._transitioning=false;a._transitioningWithDuration=false;a.emit("plotly_transitioned",[])}).then(e)}function n(){if(!a._transitionData)return;a._transitioning=false;return e(a._transitionData._interruptCallbacks)}var c=[V.previousPromises,n,o.prepareFn,V.rehover,r];var u=j.syncOrAsync(c,a);if(!u||!u.then){u=Promise.resolve()}return u.then(function(){return a})}V.doCalcdata=function(a,e){var t=O.list(a);var i=a._fullData;var r=a._fullLayout;var o,s,n,l;var c=new Array(i.length);var u=(a.calcdata||[]).slice();a.calcdata=c;r._numBoxes=0;r._numViolins=0;r._violinScaleGroupStats={};a._hmpixcount=0;a._hmlumcount=0;r._piecolormap={};r._sunburstcolormap={};r._treemapcolormap={};r._iciclecolormap={};r._funnelareacolormap={};for(n=0;n<i.length;n++){if(Array.isArray(e)&&e.indexOf(n)===-1){c[n]=u[n];continue}}for(n=0;n<i.length;n++){o=i[n];o._arrayAttrs=_.findArrayAttributes(o);o._extremes={}}var f=r._subplots.polar||[];for(n=0;n<f.length;n++){t.push(r[f[n]].radialaxis,r[f[n]].angularaxis)}for(var d in r._colorAxes){var h=r[d];if(h.cauto!==false){delete h.cmin;delete h.cmax}}var p=false;function v(e){o=i[e];s=o._module;if(o.visible===true&&o.transforms){if(s&&s.calc){var t=s.calc(a,o);if(t[0]&&t[0].t&&t[0].t._scene){delete t[0].t._scene.dirty}}for(l=0;l<o.transforms.length;l++){var r=o.transforms[l];s=x[r.type];if(s&&s.calcTransform){o._hasCalcTransform=true;p=true;s.calcTransform(a,o,r)}}}}function g(e,t){o=i[e];s=o._module;if(!!s.isContainer!==t)return;var r=[];if(o.visible===true&&o._length!==0){delete o._indexToPoints;var n=o.transforms||[];for(l=n.length-1;l>=0;l--){if(n[l].enabled){o._indexToPoints=n[l]._indexToPoints;break}}if(s&&s.calc){r=s.calc(a,o)}}if(!Array.isArray(r)||!r[0]){r=[{x:b,y:b}]}if(!r[0].t)r[0].t={};r[0].trace=o;c[e]=r}M(t,i,r);for(n=0;n<i.length;n++)g(n,true);for(n=0;n<i.length;n++)v(n);if(p)M(t,i,r);for(n=0;n<i.length;n++)g(n,true);for(n=0;n<i.length;n++)g(n,false);S(a);var m=w(t,a);if(m.length){r._numBoxes=0;r._numViolins=0;for(n=0;n<m.length;n++)g(m[n],true);for(n=0;n<m.length;n++)g(m[n],false);S(a)}F.getComponentMethod("fx","calc")(a);F.getComponentMethod("errorbars","calc")(a)};var P=/(total|sum|min|max|mean|median) (ascending|descending)/;function w(e,l){var t=[];var r,n,a,i,o;function s(e,t,r){var n=t._id.charAt(0);if(e==="histogram2dcontour"){var a=t._counterAxes[0];var i=O.getFromId(l,a);var o=n==="x"||a==="x"&&i.type==="category";var s=n==="y"||a==="y"&&i.type==="category";return function(e,t){if(e===0||t===0)return-1;if(o&&e===r[t].length-1)return-1;if(s&&t===r.length-1)return-1;return(n==="y"?t:e)-1}}else{return function(e,t){return n==="y"?t:e}}}var c={min:function(e){return j.aggNums(Math.min,null,e)},max:function(e){return j.aggNums(Math.max,null,e)},sum:function(e){return j.aggNums(function(e,t){return e+t},null,e)},total:function(e){return j.aggNums(function(e,t){return e+t},null,e)},mean:function(e){return j.mean(e)},median:function(e){return j.median(e)}};for(r=0;r<e.length;r++){var u=e[r];if(u.type!=="category")continue;var f=u.categoryorder.match(P);if(f){var d=f[1];var h=f[2];var p=u._id.charAt(0);var v=p==="x";var g=[];for(n=0;n<u._categories.length;n++){g.push([u._categories[n],[]])}for(n=0;n<u._traceIndices.length;n++){var m=u._traceIndices[n];var _=l._fullData[m];if(_.visible!==true)continue;var y=_.type;if(F.traceIs(_,"histogram")){delete _._xautoBinFinished;delete _._yautoBinFinished}var b=y==="splom";var x=y==="scattergl";var w=l.calcdata[m];for(a=0;a<w.length;a++){var A=w[a];var T,k;if(b){var M=_._axesDim[u._id];if(!v){var S=_._diag[M][0];if(S)u=l._fullLayout[O.id2name(S)]}var C=A.trace.dimensions[M].values;for(i=0;i<C.length;i++){T=u._categoriesMap[C[i]];for(o=0;o<A.trace.dimensions.length;o++){if(o===M)continue;var L=A.trace.dimensions[o];g[T][1].push(L.values[i])}}}else if(x){for(i=0;i<A.t.x.length;i++){if(v){T=A.t.x[i];k=A.t.y[i]}else{T=A.t.y[i];k=A.t.x[i]}g[T][1].push(k)}if(A.t&&A.t._scene){delete A.t._scene.dirty}}else if(A.hasOwnProperty("z")){k=A.z;var E=s(_.type,u,k);for(i=0;i<k.length;i++){for(o=0;o<k[i].length;o++){T=E(o,i);if(T+1)g[T][1].push(k[i][o])}}}else{T=A.p;if(T===undefined)T=A[p];k=A.s;if(k===undefined)k=A.v;if(k===undefined)k=v?A.y:A.x;if(!Array.isArray(k)){if(k===undefined)k=[];else k=[k]}for(i=0;i<k.length;i++){g[T][1].push(k[i])}}}}u._categoriesValue=g;var D=[];for(n=0;n<g.length;n++){D.push([g[n][0],c[d](g[n][1])])}D.sort(function(e,t){return e[1]-t[1]});u._categoriesAggregatedValue=D;u._initialCategories=D.map(function(e){return e[0]});if(h==="descending"){u._initialCategories.reverse()}t=t.concat(u.sortByInitialCategories())}}return t}function M(e,t,r){var n={};function a(e){e.clearCalc();if(e.type==="multicategory"){e.setupMultiCategory(t)}n[e._id]=1}j.simpleMap(e,a);var i=r._axisMatchGroups||[];for(var o=0;o<i.length;o++){for(var s in i[o]){if(!n[s]){a(r[O.id2name(s)])}}}}function S(e){var t=e._fullLayout;var r=t._visibleModules;var n={};var a,i,o;for(i=0;i<r.length;i++){var s=r[i];var l=s.crossTraceCalc;if(l){var c=s.basePlotModule.name;if(n[c]){j.pushUnique(n[c],l)}else{n[c]=[l]}}}for(o in n){var u=n[o];var f=t._subplots[o];if(Array.isArray(f)){for(a=0;a<f.length;a++){var d=f[a];var h=o==="cartesian"?t._plots[d]:t[d];for(i=0;i<u.length;i++){u[i](e,h,d)}}}else{for(i=0;i<u.length;i++){u[i](e)}}}}V.rehover=function(e){if(e._fullLayout._rehover){e._fullLayout._rehover()}};V.redrag=function(e){if(e._fullLayout._redrag){e._fullLayout._redrag()}};V.generalUpdatePerTraceModule=function(e,t,r,n){var a=t.traceHash;var i={};var o;for(o=0;o<r.length;o++){var s=r[o];var l=s[0].trace;if(l.visible){i[l.type]=i[l.type]||[];i[l.type].push(s)}}for(var c in a){if(!i[c]){var u=a[c][0];var f=u[0].trace;f.visible=false;i[c]=[u]}}for(var d in i){var h=i[d];var p=h[0][0].trace._module;p.plot(e,t,j.filterVisible(h),n)}t.traceHash=i};V.plotBasePlot=function(e,t,r,n,a){var i=F.getModule(e);var o=s(t.calcdata,i)[0];i.plot(t,o,n,a)};V.cleanBasePlot=function(e,t,r,n,a){var i=a._has&&a._has(e);var o=r._has&&r._has(e);if(i&&!o){a["_"+e+"layer"].selectAll("g.trace").remove()}}},{"../components/color":100,"../constants/numerical":210,"../lib":230,"../plot_api/plot_schema":264,"../plot_api/plot_template":265,"../plots/get_data":307,"../registry":313,"./animation_attributes":270,"./attributes":272,"./cartesian/axis_ids":280,"./cartesian/handle_outline":287,"./command":303,"./font_attributes":305,"./frame_attributes":306,"./layout_attributes":309,"@plotly/d3":11,"d3-time-format":13,"fast-isnumeric":15}],312:[function(e,t,r){"use strict";var n=e("../constants/docs");var a=n.FORMAT_LINK;var i=n.DATE_FORMAT_LINK;function o(e){var t=e&&e.supportOther;return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(t?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),'Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',a,"for details on the formatting syntax.",'Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',i,"for details on the date formatting syntax."].join(" ")}function s(e){var t=e.description?" "+e.description:"";var r=e.keys||[];if(r.length>0){var n=[];for(var a=0;a<r.length;a++){n[a]="`"+r[a]+"`"}t=t+"Finally, the template string has access to ";if(r.length===1){t="variable "+n[0]}else{t="variables "+n.slice(0,-1).join(", ")+" and "+n.slice(-1)+"."}}return t}r.hovertemplateAttrs=function(e,t){e=e||{};t=t||{};var r=s(t);var n={valType:"string",dflt:"",editType:e.editType||"none"};if(e.arrayOk!==false){n.arrayOk=true}return n};r.texttemplateAttrs=function(e,t){e=e||{};t=t||{};var r=s(t);var n={valType:"string",dflt:"",editType:e.editType||"calc"};if(e.arrayOk!==false){n.arrayOk=true}return n}},{"../constants/docs":207}],313:[function(e,t,f){"use strict";var d=e("./lib/loggers");var n=e("./lib/noop");var i=e("./lib/push_unique");var o=e("./lib/is_plain_object");var h=e("./lib/dom").addStyleRule;var r=e("./lib/extend");var a=e("./plots/attributes");var s=e("./plots/layout_attributes");var p=r.extendFlat;var l=r.extendDeepAll;f.modules={};f.allCategories={};f.allTypes=[];f.subplotsRegistry={};f.transformsRegistry={};f.componentsRegistry={};f.layoutArrayContainers=[];f.layoutArrayRegexes=[];f.traceLayoutAttributes={};f.localeRegistry={};f.apiMethodRegistry={};f.collectableSubplotTypes=null;f.register=function e(t){f.collectableSubplotTypes=null;if(!t){throw new Error("No argument passed to Plotly.register.")}else if(t&&!Array.isArray(t)){t=[t]}for(var r=0;r<t.length;r++){var n=t[r];if(!n){throw new Error("Invalid module was attempted to be registered!")}switch(n.moduleType){case"trace":c(n);break;case"transform":g(n);break;case"component":u(n);break;case"locale":m(n);break;case"apiMethod":var a=n.name;f.apiMethodRegistry[a]=n.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}};f.getModule=function(e){var t=f.modules[w(e)];if(!t)return false;return t._module};f.traceIs=function(e,t){e=w(e);if(e==="various")return false;var r=f.modules[e];if(!r){if(e){d.log("Unrecognized trace type "+e+".")}r=f.modules[a.type.dflt]}return!!r.categories[t]};f.getTransformIndices=function(e,t){var r=[];var n=e.transforms||[];for(var a=0;a<n.length;a++){if(n[a].type===t){r.push(a)}}return r};f.hasTransform=function(e,t){var r=e.transforms||[];for(var n=0;n<r.length;n++){if(r[n].type===t){return true}}return false};f.getComponentMethod=function(e,t){var r=f.componentsRegistry[e];if(!r)return n;return r[t]||n};f.call=function(){var e=arguments[0];var t=[].slice.call(arguments,1);return f.apiMethodRegistry[e].apply(null,t)};function c(e){var t=e.name;var r=e.categories;var n=e.meta;if(f.modules[t]){d.log("Type "+t+" already registered");return}if(!f.subplotsRegistry[e.basePlotModule.name]){v(e.basePlotModule)}var a={};for(var i=0;i<r.length;i++){a[r[i]]=true;f.allCategories[r[i]]=true}f.modules[t]={_module:e,categories:a};if(n&&Object.keys(n).length){f.modules[t].meta=n}f.allTypes.push(t);for(var o in f.componentsRegistry){y(o,t)}if(e.layoutAttributes){p(f.traceLayoutAttributes,e.layoutAttributes)}var s=e.basePlotModule;var l=s.name;if(l==="mapbox"){var c=s.constants.styleRules;for(var u in c){h(".js-plotly-plot .plotly .mapboxgl-"+u,c[u])}}if((l==="geo"||l==="mapbox")&&(typeof window!==undefined&&window.PlotlyGeoAssets===undefined)){window.PlotlyGeoAssets={topojson:{}}}}function v(e){var t=e.name;if(f.subplotsRegistry[t]){d.log("Plot type "+t+" already registered.");return}_(e);f.subplotsRegistry[t]=e;for(var r in f.componentsRegistry){x(r,e.name)}}function u(e){if(typeof e.name!=="string"){throw new Error("Component module *name* must be a string.")}var t=e.name;f.componentsRegistry[t]=e;if(e.layoutAttributes){if(e.layoutAttributes._isLinkedToArray){i(f.layoutArrayContainers,t)}_(e)}for(var r in f.modules){y(t,r)}for(var n in f.subplotsRegistry){x(t,n)}for(var a in f.transformsRegistry){b(t,a)}if(e.schema&&e.schema.layout){l(s,e.schema.layout)}}function g(e){if(typeof e.name!=="string"){throw new Error("Transform module *name* must be a string.")}var t="Transform module "+e.name;var r=typeof e.transform==="function";var n=typeof e.calcTransform==="function";if(!r&&!n){throw new Error(t+" is missing a *transform* or *calcTransform* method.")}if(r&&n){d.log([t+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" "))}if(!o(e.attributes)){d.log(t+" registered without an *attributes* object.")}if(typeof e.supplyDefaults!=="function"){d.log(t+" registered without a *supplyDefaults* method.")}f.transformsRegistry[e.name]=e;for(var a in f.componentsRegistry){b(a,e.name)}}function m(e){var t=e.name;var r=t.split("-")[0];var n=e.dictionary;var a=e.format;var i=n&&Object.keys(n).length;var o=a&&Object.keys(a).length;var s=f.localeRegistry;var l=s[t];if(!l)s[t]=l={};if(r!==t){var c=s[r];if(!c)s[r]=c={};if(i&&c.dictionary===l.dictionary){c.dictionary=n}if(o&&c.format===l.format){c.format=a}}if(i)l.dictionary=n;if(o)l.format=a}function _(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t){for(var r=0;r<t.length;r++){i(f.layoutArrayRegexes,t[r])}}}}function y(e,t){var r=f.componentsRegistry[e].schema;if(!r||!r.traces)return;var n=r.traces[t];if(n){l(f.modules[t]._module.attributes,n)}}function b(e,t){var r=f.componentsRegistry[e].schema;if(!r||!r.transforms)return;var n=r.transforms[t];if(n){l(f.transformsRegistry[t].attributes,n)}}function x(e,t){var r=f.componentsRegistry[e].schema;if(!r||!r.subplots)return;var n=f.subplotsRegistry[t];var a=n.layoutAttributes;var i=n.attr==="subplot"?n.name:n.attr;if(Array.isArray(i))i=i[0];var o=r.subplots[i];if(a&&o){l(a,o)}}function w(e){if(typeof e==="object")e=e.type;return e}},{"./lib/dom":222,"./lib/extend":224,"./lib/is_plain_object":231,"./lib/loggers":234,"./lib/noop":239,"./lib/push_unique":244,"./plots/attributes":272,"./plots/layout_attributes":309}],314:[function(e,t,r){"use strict";var g=e("../registry");var n=e("../lib");var m=n.extendFlat;var _=n.extendDeep;function y(e){var t;switch(e){case"themes__thumb":t={autosize:true,width:150,height:150,title:{text:""},showlegend:false,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:true,showlegend:false,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function b(e){var t=["xaxis","yaxis","zaxis"];return t.indexOf(e.slice(0,5))>-1}t.exports=function e(t,r){var n;var a=t.data;var i=t.layout;var o=_([],a);var s=_({},i,y(r.tileClass));var l=t._context||{};if(r.width)s.width=r.width;if(r.height)s.height=r.height;if(r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){s.annotations=[];var c=Object.keys(s);for(n=0;n<c.length;n++){if(b(c[n])){s[c[n]].title={text:""}}}for(n=0;n<o.length;n++){var u=o[n];u.showscale=false;if(u.marker)u.marker.showscale=false;if(g.traceIs(u,"pie-like"))u.textposition="none"}}if(Array.isArray(r.annotations)){for(n=0;n<r.annotations.length;n++){s.annotations.push(r.annotations[n])}}var f=Object.keys(s).filter(function(e){return e.match(/^scene\d*$/)});if(f.length){var d={};if(r.tileClass==="thumbnail"){d={title:{text:""},showaxeslabels:false,showticklabels:false,linetickenable:false}}for(n=0;n<f.length;n++){var h=s[f[n]];if(!h.xaxis){h.xaxis={}}if(!h.yaxis){h.yaxis={}}if(!h.zaxis){h.zaxis={}}m(h.xaxis,d);m(h.yaxis,d);m(h.zaxis,d);h._scene=null}}var p=document.createElement("div");if(r.tileClass)p.className=r.tileClass;var v={gd:p,td:p,layout:s,data:o,config:{staticPlot:r.staticPlot===undefined?true:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===undefined?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||false,showLink:r.showLink||false,showTips:r.showTips||false,mapboxAccessToken:l.mapboxAccessToken}};if(r.setBackground!=="transparent"){v.config.setBackground=r.setBackground||"opaque"}v.gd.defaultLayout=y(r.tileClass);return v}},{"../lib":230,"../registry":313}],315:[function(e,t,r){"use strict";var s=e("../lib");var l=e("../plot_api/to_image");var c=e("./filesaver");var u=e("./helpers");function n(a,i){var o;if(!s.isPlainObject(a))o=s.getGraphDiv(a);i=i||{};i.format=i.format||"png";i.width=i.width||null;i.height=i.height||null;i.imageDataOnly=true;return new Promise(function(t,r){if(o&&o._snapshotInProgress){r(new Error("Snapshotting already in progress."))}if(s.isIE()&&i.format!=="svg"){r(new Error(u.MSG_IE_BAD_FORMAT))}if(o)o._snapshotInProgress=true;var e=l(a,i);var n=i.filename||a.fn||"newplot";n+="."+i.format.replace("-",".");e.then(function(e){if(o)o._snapshotInProgress=false;return c(e,n,i.format)}).then(function(e){t(e)}).catch(function(e){if(o)o._snapshotInProgress=false;r(e)})})}t.exports=n},{"../lib":230,"../plot_api/to_image":268,"./filesaver":316,"./helpers":317}],316:[function(e,t,r){"use strict";var u=e("../lib");var f=e("./helpers");function n(i,o,s){var l=document.createElement("a");var c="download"in l;var e=new Promise(function(e,t){var r;var n;if(u.isSafari()){var a=s==="svg"?",":";base64,";f.octetStream(a+encodeURIComponent(i));return e(o)}if(u.isIE()){r=f.createBlob(i,"svg");window.navigator.msSaveBlob(r,o);r=null;return e(o)}if(c){r=f.createBlob(i,s);n=f.createObjectURL(r);l.href=n;l.download=o;document.body.appendChild(l);l.click();document.body.removeChild(l);f.revokeObjectURL(n);r=null;return e(o)}t(new Error("download error"))});return e}t.exports=n},{"../lib":230,"./helpers":317}],317:[function(e,t,r){"use strict";var n=e("../registry");r.getDelay=function(e){if(!e._has)return 0;return e._has("gl3d")||e._has("gl2d")||e._has("mapbox")?500:0};r.getRedrawFunc=function(e){return function(){n.getComponentMethod("colorbar","draw")(e)}};r.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)};r.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var a=window.URL||window.webkitURL;r.createObjectURL=function(e){return a.createObjectURL(e)};r.revokeObjectURL=function(e){return a.revokeObjectURL(e)};r.createBlob=function(e,t){if(t==="svg"){return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"})}else if(t==="full-json"){return new window.Blob([e],{type:"application/json;charset=utf-8"})}else{var r=i(window.atob(e));return new window.Blob([r],{type:"image/"+t})}};r.octetStream=function(e){document.location.href="data:application/octet-stream"+e};function i(e){var t=e.length;var r=new ArrayBuffer(t);var n=new Uint8Array(r);for(var a=0;a<t;a++){n[a]=e.charCodeAt(a)}return r}r.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;r.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":313}],318:[function(e,t,r){"use strict";var n=e("./helpers");var a={getDelay:n.getDelay,getRedrawFunc:n.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};t.exports=a},{"./cloneplot":314,"./download":315,"./helpers":317,"./svgtoimg":319,"./toimage":320,"./tosvg":321}],319:[function(e,t,r){"use strict";var y=e("../lib");var n=e("events").EventEmitter;var b=e("./helpers");function a(g){var m=g.emitter||new n;var _=new Promise(function(r,n){var e=window.Image;var t=g.svg;var a=g.format||"png";if(y.isIE()&&a!=="svg"){var i=new Error(b.MSG_IE_BAD_FORMAT);n(i);if(!g.promise){return m.emit("error",i)}else{return _}}var o=g.canvas;var s=g.scale||1;var l=g.width||300;var c=g.height||150;var u=s*l;var f=s*c;var d=o.getContext("2d");var h=new e;var p,v;if(a==="svg"||y.isSafari()){v=b.encodeSVG(t)}else{p=b.createBlob(t,"svg");v=b.createObjectURL(p)}o.width=u;o.height=f;h.onload=function(){var e;p=null;b.revokeObjectURL(v);if(a!=="svg"){d.drawImage(h,0,0,u,f)}switch(a){case"jpeg":e=o.toDataURL("image/jpeg");break;case"png":e=o.toDataURL("image/png");break;case"webp":e=o.toDataURL("image/webp");break;case"svg":e=v;break;default:var t="Image format is not jpeg, png, svg or webp.";n(new Error(t));if(!g.promise){return m.emit("error",t)}}r(e);if(!g.promise){m.emit("success",e)}};h.onerror=function(e){p=null;b.revokeObjectURL(v);n(e);if(!g.promise){return m.emit("error",e)}};h.src=v});if(g.promise){return _}return m}t.exports=a},{"../lib":230,"./helpers":317,events:12}],320:[function(e,t,r){"use strict";var s=e("events").EventEmitter;var l=e("../registry");var c=e("../lib");var u=e("./helpers");var f=e("./cloneplot");var d=e("./tosvg");var h=e("./svgtoimg");function n(e,r){var n=new s;var t=f(e,{format:"png"});var a=t.gd;a.style.position="absolute";a.style.left="-5000px";document.body.appendChild(a);function i(){var e=u.getDelay(a._fullLayout);setTimeout(function(){var e=d(a);var t=document.createElement("canvas");t.id=c.randstr();n=h({format:r.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:t,emitter:n,svg:e});n.clean=function(){if(a)document.body.removeChild(a)}},e)}var o=u.getRedrawFunc(a);l.call("_doPlot",a,t.data,t.layout,t.config).then(o).then(i).catch(function(e){n.emit("error",e)});return n}t.exports=n},{"../lib":230,"../registry":313,"./cloneplot":314,"./helpers":317,"./svgtoimg":319,"./tosvg":321,events:12}],321:[function(e,t,r){"use strict";var _=e("@plotly/d3");var y=e("../lib");var b=e("../components/drawing");var x=e("../components/color");var w=e("../constants/xmlns_namespaces");var A=/"/g;var T="TOBESTRIPPED";var k=new RegExp('("'+T+")|("+T+'")',"g");function M(e){var t=_.select("body").append("div").style({display:"none"}).html("");var r=e.replace(/(&[^;]*;)/gi,function(e){if(e==="&lt;"){return"&#60;"}if(e==="&rt;"){return"&#62;"}if(e.indexOf("<")!==-1||e.indexOf(">")!==-1){return""}return t.html(e).text()});t.remove();return r}function S(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}t.exports=function e(t,r,n){var a=t._fullLayout;var i=a._paper;var o=a._toppaper;var s=a.width;var l=a.height;var c,u;i.insert("rect",":first-child").call(b.setRect,0,0,s,l).call(x.fill,a.paper_bgcolor);var f=a._basePlotModules||[];for(c=0;c<f.length;c++){var d=f[c];if(d.toSVG)d.toSVG(t)}if(o){var h=o.node().childNodes;var p=Array.prototype.slice.call(h);for(c=0;c<p.length;c++){var v=p[c];if(v.childNodes.length)i.node().appendChild(v)}}if(a._draggers){a._draggers.remove()}i.node().style.background="";i.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var e=_.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){e.remove();return}else{e.style({visibility:null,display:null})}var t=this.style.fontFamily;if(t&&t.indexOf('"')!==-1){e.style("font-family",t.replace(A,T))}});var g=[];if(a._gradientUrlQueryParts){for(u in a._gradientUrlQueryParts)g.push(u)}if(a._patternUrlQueryParts){for(u in a._patternUrlQueryParts)g.push(u)}if(g.length){i.selectAll(g.join(",")).each(function(){var e=_.select(this);var t=this.style.fill;if(t&&t.indexOf("url(")!==-1){e.style("fill",t.replace(A,T))}var r=this.style.stroke;if(r&&r.indexOf("url(")!==-1){e.style("stroke",r.replace(A,T))}})}if(r==="pdf"||r==="eps"){i.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0)}i.node().setAttributeNS(w.xmlns,"xmlns",w.svg);i.node().setAttributeNS(w.xmlns,"xmlns:xlink",w.xlink);if(r==="svg"&&n){i.attr("width",n*s);i.attr("height",n*l);i.attr("viewBox","0 0 "+s+" "+l)}var m=(new window.XMLSerializer).serializeToString(i.node());m=M(m);m=S(m);m=m.replace(k,"'");if(y.isIE()){m=m.replace(/"/gi,"'");m=m.replace(/(\('#)([^']*)('\))/gi,'("#$2")');m=m.replace(/(\\')/gi,'"')}return m}},{"../components/color":100,"../components/drawing":122,"../constants/xmlns_namespaces":211,"../lib":230,"@plotly/d3":11}],322:[function(e,t,r){"use strict";var o=e("../../lib");t.exports=function e(t,r){for(var n=0;n<t.length;n++)t[n].i=n;o.mergeArray(r.text,t,"tx");o.mergeArray(r.hovertext,t,"htx");var a=r.marker;if(a){o.mergeArray(a.opacity,t,"mo",true);o.mergeArray(a.color,t,"mc");var i=a.line;if(i){o.mergeArray(i.color,t,"mlc");o.mergeArrayCastPositive(i.width,t,"mlw")}}}},{"../../lib":230}],323:[function(e,t,r){"use strict";var n=e("../scatter/attributes");var a=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var i=e("../../plots/template_attributes").hovertemplateAttrs;var o=e("../../plots/template_attributes").texttemplateAttrs;var s=e("../../components/colorscale/attributes");var l=e("../../plots/font_attributes");var c=e("./constants");var u=e("../../components/drawing/attributes").pattern;var f=e("../../lib/extend").extendFlat;var d=l({editType:"calc",arrayOk:true,colorEditType:"style"});var h=n.marker;var p=h.line;var v=f({},p.width,{dflt:0});var g=f({width:v,editType:"calc"},s("marker.line"));var m=f({line:g,editType:"calc"},s("marker"),{opacity:{valType:"number",arrayOk:true,dflt:1,min:0,max:1,editType:"style"},pattern:u});t.exports={x:n.x,x0:n.x0,dx:n.dx,y:n.y,y0:n.y0,dy:n.dy,xperiod:n.xperiod,yperiod:n.yperiod,xperiod0:n.xperiod0,yperiod0:n.yperiod0,xperiodalignment:n.xperiodalignment,yperiodalignment:n.yperiodalignment,xhoverformat:a("x"),yhoverformat:a("y"),text:n.text,texttemplate:o({editType:"plot"},{keys:c.eventDataKeys}),hovertext:n.hovertext,hovertemplate:i({},{keys:c.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:true,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:f({},d,{}),insidetextfont:f({},d,{}),outsidetextfont:f({},d,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:f({},n.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:true,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:true,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:true,editType:"calc"},marker:m,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:n.selected.marker.opacity,color:n.selected.marker.color,editType:"style"},textfont:n.selected.textfont,editType:"style"},unselected:{marker:{opacity:n.unselected.marker.opacity,color:n.unselected.marker.color,editType:"style"},textfont:n.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":107,"../../components/drawing/attributes":121,"../../lib/extend":224,"../../plots/cartesian/axis_format_attributes":279,"../../plots/font_attributes":305,"../../plots/template_attributes":312,"../scatter/attributes":353,"./constants":325}],324:[function(e,t,r){"use strict";var h=e("../../plots/cartesian/axes");var p=e("../../plots/cartesian/align_period");var v=e("../../components/colorscale/helpers").hasColorscale;var g=e("../../components/colorscale/calc");var m=e("./arrays_to_calcdata");var _=e("../scatter/calc_selection");t.exports=function e(t,r){var n=h.getFromId(t,r.xaxis||"x");var a=h.getFromId(t,r.yaxis||"y");var i,o,s;var l={msUTC:!!(r.base||r.base===0)};var c;if(r.orientation==="h"){i=n.makeCalcdata(r,"x",l);s=a.makeCalcdata(r,"y");o=p(r,a,"y",s);c=!!r.yperiodalignment}else{i=a.makeCalcdata(r,"y",l);s=n.makeCalcdata(r,"x");o=p(r,n,"x",s);c=!!r.xperiodalignment}var u=Math.min(o.length,i.length);var f=new Array(u);for(var d=0;d<u;d++){f[d]={p:o[d],s:i[d]};if(c){f[d].orig_p=s[d]}if(r.ids){f[d].id=String(r.ids[d])}}if(v(r,"marker")){g(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"})}if(v(r,"marker.line")){g(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"})}m(f,r);_(f,r);return f}},{"../../components/colorscale/calc":108,"../../components/colorscale/helpers":111,"../../plots/cartesian/align_period":273,"../../plots/cartesian/axes":276,"../scatter/calc_selection":355,"./arrays_to_calcdata":322}],325:[function(e,t,r){"use strict";t.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],326:[function(e,t,r){"use strict";var x=e("fast-isnumeric");var p=e("../../lib").isArrayOrTypedArray;var w=e("../../constants/numerical").BADNUM;var v=e("../../registry");var A=e("../../plots/cartesian/axes");var T=e("../../plots/cartesian/constraints").getAxisGroup;var f=e("./sieve.js");function n(e,t){var r=t.xaxis;var n=t.yaxis;var a=e._fullLayout;var i=e._fullData;var o=e.calcdata;var s=[];var l=[];for(var c=0;c<i.length;c++){var u=i[c];if(u.visible===true&&v.traceIs(u,"bar")&&u.xaxis===r._id&&u.yaxis===n._id){if(u.orientation==="h"){s.push(o[c])}else{l.push(o[c])}if(u._computePh){var f=e.calcdata[c];for(var d=0;d<f.length;d++){if(typeof f[d].ph0==="function")f[d].ph0=f[d].ph0();if(typeof f[d].ph1==="function")f[d].ph1=f[d].ph1()}}}}var h={xCat:r.type==="category"||r.type==="multicategory",yCat:n.type==="category"||n.type==="multicategory",mode:a.barmode,norm:a.barnorm,gap:a.bargap,groupgap:a.bargroupgap};g(e,r,n,l,h);g(e,n,r,s,h)}function g(e,t,r,n,a){if(!n.length)return;var i;var o;var s,l,c;u(r,n);switch(a.mode){case"overlay":d(t,r,n,a);break;case"group":i=[];o=[];for(s=0;s<n.length;s++){l=n[s];c=l[0].trace;if(c.offset===undefined)o.push(l);else i.push(l)}if(o.length){h(e,t,r,o,a)}if(i.length){d(t,r,i,a)}break;case"stack":case"relative":i=[];o=[];for(s=0;s<n.length;s++){l=n[s];c=l[0].trace;if(c.base===undefined)o.push(l);else i.push(l)}if(o.length){m(e,t,r,o,a)}if(i.length){d(t,r,i,a)}break}C(n,t)}function u(e,t){var r,n;for(r=0;r<t.length;r++){var a=t[r];var i=a[0].trace;var o=i.type==="funnel"?i._base:i.base;var s;var l=i.orientation==="h"?i.xcalendar:i.ycalendar;var c=e.type==="category"||e.type==="multicategory"?function(){return null}:e.d2c;if(p(o)){for(n=0;n<Math.min(o.length,a.length);n++){s=c(o[n],0,l);if(x(s)){a[n].b=+s;a[n].hasB=1}else a[n].b=0}for(;n<a.length;n++){a[n].b=0}}else{s=c(o,0,l);var u=x(s);s=u?s:0;for(n=0;n<a.length;n++){a[n].b=s;if(u)a[n].hasB=1}}}}function d(e,t,r,n){for(var a=0;a<r.length;a++){var i=r[a];var o=new f([i],{posAxis:e,sepNegVal:false,overlapNoMerge:!n.norm});_(e,o,n);if(n.norm){l(o);b(t,o,n)}else{s(t,o)}}}function h(e,t,r,n,a){var i=new f(n,{posAxis:t,sepNegVal:false,overlapNoMerge:!a.norm});o(e,t,i,a);c(i,t);if(a.norm){l(i);b(r,i,a)}else{s(r,i)}}function m(e,t,r,n,a){var i=new f(n,{posAxis:t,sepNegVal:a.mode==="relative",overlapNoMerge:!(a.norm||a.mode==="stack"||a.mode==="relative")});_(t,i,a);y(r,i,a);for(var o=0;o<n.length;o++){var s=n[o];for(var l=0;l<s.length;l++){var c=s[l];if(c.s!==w){var u=c.b+c.s===i.get(c.p,c.s);if(u)c._outmost=true}}}if(a.norm)b(r,i,a)}function _(e,t,r){var n=t.minDiff;var a=t.traces;var i=n*(1-r.gap);var o=i;var s=o*(1-(r.groupgap||0));var l=-s/2;for(var c=0;c<a.length;c++){var u=a[c];var f=u[0].t;f.barwidth=s;f.poffset=l;f.bargroupwidth=i;f.bardelta=n}t.binWidth=a[0][0].t.barwidth/100;k(t);M(e,t);S(e,t)}function o(e,t,r,n){var a=e._fullLayout;var i=r.positions;var o=r.distinctPositions;var s=r.minDiff;var l=r.traces;var c=l.length;var u=i.length!==o.length;var f=s*(1-n.gap);var d=T(a,t._id)+l[0][0].trace.orientation;var h=a._alignmentOpts[d]||{};for(var p=0;p<c;p++){var v=l[p];var g=v[0].trace;var m=h[g.alignmentgroup]||{};var _=Object.keys(m.offsetGroups||{}).length;var y;if(_){y=f/_}else{y=u?f/c:f}var b=y*(1-(n.groupgap||0));var x;if(_){x=((2*g._offsetIndex+1-_)*y-b)/2}else{x=u?((2*p+1-c)*y-b)/2:-b/2}var w=v[0].t;w.barwidth=b;w.poffset=x;w.bargroupwidth=f;w.bardelta=s}r.binWidth=l[0][0].t.barwidth/100;k(r);M(t,r);S(t,r,u)}function k(e){var t=e.traces;var r,n;for(r=0;r<t.length;r++){var a=t[r];var i=a[0];var o=i.trace;var s=i.t;var l=o._offset||o.offset;var c=s.poffset;var u;if(p(l)){u=Array.prototype.slice.call(l,0,a.length);for(n=0;n<u.length;n++){if(!x(u[n])){u[n]=c}}for(n=u.length;n<a.length;n++){u.push(c)}s.poffset=u}else if(l!==undefined){s.poffset=l}var f=o._width||o.width;var d=s.barwidth;if(p(f)){var h=Array.prototype.slice.call(f,0,a.length);for(n=0;n<h.length;n++){if(!x(h[n]))h[n]=d}for(n=h.length;n<a.length;n++){h.push(d)}s.barwidth=h;if(l===undefined){u=[];for(n=0;n<a.length;n++){u.push(c+(d-h[n])/2)}s.poffset=u}}else if(f!==undefined){s.barwidth=f;if(l===undefined){s.poffset=c+(d-f)/2}}}}function M(e,t){var r=t.traces;var n=L(e);for(var a=0;a<r.length;a++){var i=r[a];var o=i[0].t;var s=o.poffset;var l=Array.isArray(s);var c=o.barwidth;var u=Array.isArray(c);for(var f=0;f<i.length;f++){var d=i[f];var h=d.w=u?c[f]:c;d[n]=d.p+(l?s[f]:s)+h/2}}}function S(e,t,r){var n=t.traces;var a=t.minDiff;var i=a/2;A.minDtick(e,t.minDiff,t.distinctPositions[0],r);for(var o=0;o<n.length;o++){var s=n[o];var l=s[0];var c=l.trace;var u=[];var f,d,h,p;for(p=0;p<s.length;p++){f=s[p];d=f.p-i;h=f.p+i;u.push(d,h)}if(c.width||c.offset){var v=l.t;var g=v.poffset;var m=v.barwidth;var _=Array.isArray(g);var y=Array.isArray(m);for(p=0;p<s.length;p++){f=s[p];var b=_?g[p]:g;var x=y?m[p]:m;d=f.p+b;h=d+x;u.push(d,h)}}c._extremes[e._id]=A.findExtremes(e,u,{padded:false})}}function s(e,t){var r=t.traces;var n=L(e);for(var a=0;a<r.length;a++){var i=r[a];var o=i[0].trace;var s=[];var l=false;for(var c=0;c<i.length;c++){var u=i[c];var f=u.b;var d=f+u.s;u[n]=d;s.push(d);if(u.hasB)s.push(f);if(!u.hasB||!u.b){l=true}}o._extremes[e._id]=A.findExtremes(e,s,{tozero:l,padded:true})}}function y(e,t,r){var n=L(e);var a=t.traces;var i;var o;var s;var l,c;var u;for(l=0;l<a.length;l++){i=a[l];o=i[0].trace;if(o.type==="funnel"){for(c=0;c<i.length;c++){u=i[c];if(u.s!==w){t.put(u.p,-.5*u.s)}}}}for(l=0;l<a.length;l++){i=a[l];o=i[0].trace;s=o.type==="funnel";var f=[];for(c=0;c<i.length;c++){u=i[c];if(u.s!==w){var d;if(s){d=u.s}else{d=u.s+u.b}var h=t.put(u.p,d);var p=h+d;u.b=h;u[n]=p;if(!r.norm){f.push(p);if(u.hasB){f.push(h)}}}}if(!r.norm){o._extremes[e._id]=A.findExtremes(e,f,{tozero:true,padded:true})}}}function l(e){var t=e.traces;for(var r=0;r<t.length;r++){var n=t[r];for(var a=0;a<n.length;a++){var i=n[a];if(i.s!==w){e.put(i.p,i.b+i.s)}}}}function c(e,t){var r=e.traces;for(var n=0;n<r.length;n++){var a=r[n];var i=a[0].trace;if(i.base===undefined){var o=new f([a],{posAxis:t,sepNegVal:true,overlapNoMerge:true});for(var s=0;s<a.length;s++){var l=a[s];if(l.p!==w){var c=o.put(l.p,l.b+l.s);if(c)l.b=c}}}}}function b(t,e,r){var n=e.traces;var a=L(t);var i=r.norm==="fraction"?1:100;var o=i/1e9;var s=t.l2c(t.c2l(0));var l=r.mode==="stack"?i:s;function c(e){return x(t.c2l(e))&&(e<s-o||e>l+o||!x(s))}for(var u=0;u<n.length;u++){var f=n[u];var d=f[0].trace;var h=[];var p=false;var v=false;for(var g=0;g<f.length;g++){var m=f[g];if(m.s!==w){var _=Math.abs(i/e.get(m.p,m.s));m.b*=_;m.s*=_;var y=m.b;var b=y+m.s;m[a]=b;h.push(b);v=v||c(b);if(m.hasB){h.push(y);v=v||c(y)}if(!m.hasB||!m.b){p=true}}}d._extremes[t._id]=A.findExtremes(t,h,{tozero:p,padded:v})}}function C(e,t){var r=L(t);var n={};var a,i,o;var s=Infinity;var l=-Infinity;for(a=0;a<e.length;a++){o=e[a];for(i=0;i<o.length;i++){var c=o[i].p;if(x(c)){s=Math.min(s,c);l=Math.max(l,c)}}}var u=1e4/(l-s);var f=n.round=function(e){return String(Math.round(u*(e-s)))};for(a=0;a<e.length;a++){o=e[a];o[0].t.extents=n;var d=o[0].t.poffset;var h=Array.isArray(d);for(i=0;i<o.length;i++){var p=o[i];var v=p[r]-p.w/2;if(x(v)){var g=p[r]+p.w/2;var m=f(p.p);if(n[m]){n[m]=[Math.min(v,n[m][0]),Math.max(g,n[m][1])]}else{n[m]=[v,g]}}p.p0=p.p+(h?d[i]:d);p.p1=p.p0+p.w;p.s0=p.b;p.s1=p.s0+p.s}}}function L(e){return e._id.charAt(0)}t.exports={crossTraceCalc:n,setGroupPositions:g}},{"../../constants/numerical":210,"../../lib":230,"../../plots/cartesian/axes":276,"../../plots/cartesian/constraints":284,"../../registry":313,"./sieve.js":336,"fast-isnumeric":15}],327:[function(e,t,r){"use strict";var x=e("../../lib");var c=e("../../components/color");var u=e("../../registry");var f=e("../scatter/xy_defaults");var d=e("../scatter/period_defaults");var h=e("./style_defaults");var p=e("../../plots/cartesian/constraints").getAxisGroup;var v=e("./attributes");var w=x.coerceFont;function n(r,n,e,t){function a(e,t){return x.coerce(r,n,v,e,t)}var i=f(r,n,t,a);if(!i){n.visible=false;return}d(r,n,t,a);a("xhoverformat");a("yhoverformat");a("orientation",n.x&&!n.y?"h":"v");a("base");a("offset");a("width");a("text");a("hovertext");a("hovertemplate");var o=a("textposition");g(r,n,t,a,o,{moduleHasSelected:true,moduleHasUnselected:true,moduleHasConstrain:true,moduleHasCliponaxis:true,moduleHasTextangle:true,moduleHasInsideanchor:true});h(r,n,a,e,t);var s=(n.marker.line||{}).color;var l=u.getComponentMethod("errorbars","supplyDefaults");l(r,n,s||c.defaultLine,{axis:"y"});l(r,n,s||c.defaultLine,{axis:"x",inherit:"y"});x.coerceSelectionMarkerOpacity(n,a)}function o(e,t,r,n){var a=t.orientation;var i=t[{v:"x",h:"y"}[a]+"axis"];var o=p(r,i)+a;var s=r._alignmentOpts||{};var l=n("alignmentgroup");var c=s[o];if(!c)c=s[o]={};var u=c[l];if(u){u.traces.push(t)}else{u=c[l]={traces:[t],alignmentIndex:Object.keys(c).length,offsetGroups:{}}}var f=n("offsetgroup");var d=u.offsetGroups;var h=d[f];if(f){if(!h){h=d[f]={offsetIndex:Object.keys(d).length}}t._offsetIndex=h.offsetIndex}}function a(e,t){var r,n;function a(e){return x.coerce(n._input,n,v,e)}if(t.barmode==="group"){for(var i=0;i<e.length;i++){n=e[i];if(n.type==="bar"){r=n._input;o(r,n,t,a)}}}}function g(e,t,r,n,a,i){i=i||{};var o=!(i.moduleHasSelected===false);var s=!(i.moduleHasUnselected===false);var l=!(i.moduleHasConstrain===false);var c=!(i.moduleHasCliponaxis===false);var u=!(i.moduleHasTextangle===false);var f=!(i.moduleHasInsideanchor===false);var d=!!i.hasPathbar;var h=Array.isArray(a)||a==="auto";var p=h||a==="inside";var v=h||a==="outside";if(p||v){var g=w(n,"textfont",r.font);var m=x.extendFlat({},g);var _=e.textfont&&e.textfont.color;var y=!_;if(y){delete m.color}w(n,"insidetextfont",m);if(d){var b=x.extendFlat({},g);if(y){delete b.color}w(n,"pathbar.textfont",b)}if(v)w(n,"outsidetextfont",g);if(o)n("selected.textfont.color");if(s)n("unselected.textfont.color");if(l)n("constraintext");if(c)n("cliponaxis");if(u)n("textangle");n("texttemplate")}if(p){if(f)n("insidetextanchor")}}t.exports={supplyDefaults:n,crossTraceDefaults:a,handleGroupingDefaults:o,handleText:g}},{"../../components/color":100,"../../lib":230,"../../plots/cartesian/constraints":284,"../../registry":313,"../scatter/period_defaults":373,"../scatter/xy_defaults":380,"./attributes":323,"./style_defaults":338}],328:[function(e,t,r){"use strict";t.exports=function e(t,r,n){t.x="xVal"in r?r.xVal:r.x;t.y="yVal"in r?r.yVal:r.y;if(r.xa)t.xaxis=r.xa;if(r.ya)t.yaxis=r.ya;if(n.orientation==="h"){t.label=t.y;t.value=t.x}else{t.label=t.x;t.value=t.y}return t}},{}],329:[function(e,t,r){"use strict";var o=e("fast-isnumeric");var n=e("tinycolor2");var a=e("../../lib").isArrayOrTypedArray;r.coerceString=function(e,t,r){if(typeof t==="string"){if(t||!e.noBlank)return t}else if(typeof t==="number"||t===true){if(!e.strict)return String(t)}return r!==undefined?r:e.dflt};r.coerceNumber=function(e,t,r){if(o(t)){t=+t;var n=e.min;var a=e.max;var i=n!==undefined&&t<n||a!==undefined&&t>a;if(!i)return t}return r!==undefined?r:e.dflt};r.coerceColor=function(e,t,r){if(n(t).isValid())return t;return r!==undefined?r:e.dflt};r.coerceEnumerated=function(e,t,r){if(e.coerceNumber)t=+t;if(e.values.indexOf(t)!==-1)return t;return r!==undefined?r:e.dflt};r.getValue=function(e,t){var r;if(!Array.isArray(e))r=e;else if(t<e.length)r=e[t];return r};r.getLineWidth=function(e,t){var r=0<t.mlw?t.mlw:!a(e.marker.line.width)?e.marker.line.width:0;return r}},{"../../lib":230,"fast-isnumeric":15,tinycolor2:65}],330:[function(e,t,r){"use strict";var B=e("../../components/fx");var c=e("../../registry");var i=e("../../components/color");var H=e("../../lib").fillText;var o=e("./helpers").getLineWidth;var U=e("../../plots/cartesian/axes").hoverLabelText;var V=e("../../constants/numerical").BADNUM;function n(e,t,r,n,a){var i=u(e,t,r,n,a);if(i){var o=i.cd;var s=o[0].trace;var l=o[i.index];i.color=f(s,l);c.getComponentMethod("errorbars","hoverInfo")(l,s,i);return[i]}}function u(e,t,r,n,a){var i=e.cd;var o=i[0].trace;var s=i[0].t;var l=n==="closest";var c=o.type==="waterfall";var u=e.maxHoverDistance;var f=e.maxSpikeDistance;var d,h,p,v,g,m,_;if(o.orientation==="h"){d=r;h=t;p="y";v="x";g=L;m=M}else{d=t;h=r;p="x";v="y";m=L;g=M}var y=o[p+"period"];function b(e){return w(e,-1)}function x(e){return w(e,1)}function w(e,t){if(y){return e.p+t*Math.abs(e.p-e.orig_p)}return e[p]+t*e.w/2}var A=l||y?b:function(e){return Math.min(b(e),e.p-s.bardelta/2)};var T=l||y?x:function(e){return Math.max(x(e),e.p+s.bardelta/2)};function k(e,t,r){if(a.finiteRange)r=0;return B.inbox(e-d,t-d,r+Math.min(1,Math.abs(t-e)/_)-1)}function M(e){return k(A(e),T(e),u)}function S(e){return k(b(e),x(e),f)}function C(e){var t=e[v];if(c){var r=Math.abs(e.rawS)||0;if(h>0){t+=r}else if(h<0){t-=r}}return t}function L(e){var t=h;var r=e.b;var n=C(e);return B.inbox(r-t,n-t,u+(n-t)/(n-r)-1)}function E(e){var t=h;var r=e.b;var n=C(e);return B.inbox(r-t,n-t,f+(n-t)/(n-r)-1)}var D=e[p+"a"];var O=e[v+"a"];_=Math.abs(D.r2c(D.range[1])-D.r2c(D.range[0]));function P(e){return(g(e)+m(e))/2}var I=B.getDistanceFunction(n,g,m,P);B.getClosest(i,I,e);if(e.index===false)return;if(i[e.index].p===V)return;if(!l){A=function(e){return Math.min(b(e),e.p-s.bargroupwidth/2)};T=function(e){return Math.max(x(e),e.p+s.bargroupwidth/2)}}var R=e.index;var z=i[R];var N=o.base?z.b+z.s:z.s;e[v+"0"]=e[v+"1"]=O.c2p(z[v],true);e[v+"LabelVal"]=N;var F=s.extents[s.extents.round(z.p)];e[p+"0"]=D.c2p(l?A(z):F[0],true);e[p+"1"]=D.c2p(l?T(z):F[1],true);var j=z.orig_p!==undefined;e[p+"LabelVal"]=j?z.orig_p:z.p;e.labelLabel=U(D,e[p+"LabelVal"],o[p+"hoverformat"]);e.valueLabel=U(O,e[v+"LabelVal"],o[v+"hoverformat"]);e.baseLabel=U(O,z.b,o[v+"hoverformat"]);e.spikeDistance=(E(z)+S(z))/2;e[p+"Spike"]=D.c2p(z.p,true);H(z,o,e);e.hovertemplate=o.hovertemplate;return e}function f(e,t){var r=t.mcc||e.marker.color;var n=t.mlcc||e.marker.line.color;var a=o(e,t);if(i.opacity(r))return r;else if(i.opacity(n)&&a)return n}t.exports={hoverPoints:n,hoverOnBars:u,getTraceColor:f}},{"../../components/color":100,"../../components/fx":140,"../../constants/numerical":210,"../../lib":230,"../../plots/cartesian/axes":276,"../../registry":313,"./helpers":329}],331:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,colorbar:e("../scatter/marker_colorbar"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"bar",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:true,meta:{}}},{"../../plots/cartesian":290,"../scatter/marker_colorbar":371,"./arrays_to_calcdata":322,"./attributes":323,"./calc":324,"./cross_trace_calc":326,"./defaults":327,"./event_data":328,"./hover":330,"./layout_attributes":332,"./layout_defaults":333,"./plot":334,"./select":335,"./style":337}],332:[function(e,t,r){"use strict";t.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],333:[function(e,t,r){"use strict";var h=e("../../registry");var p=e("../../plots/cartesian/axes");var v=e("../../lib");var g=e("./layout_attributes");t.exports=function(r,n,e){function t(e,t){return v.coerce(r,n,g,e,t)}var a=false;var i=false;var o=false;var s={};var l=t("barmode");for(var c=0;c<e.length;c++){var u=e[c];if(h.traceIs(u,"bar")&&u.visible)a=true;else continue;if(l==="group"){var f=u.xaxis+u.yaxis;if(s[f])o=true;s[f]=true}if(u.visible&&u.type==="histogram"){var d=p.getFromId({_fullLayout:n},u[u.orientation==="v"?"xaxis":"yaxis"]);if(d.type!=="category")i=true}}if(!a){delete n.barmode;return}if(l!=="overlay")t("barnorm");t("bargap",i&&!o?0:.2);t("bargroupgap")}},{"../../lib":230,"../../plots/cartesian/axes":276,"../../registry":313,"./layout_attributes":332}],334:[function(e,t,r){"use strict";var D=e("@plotly/d3");var O=e("fast-isnumeric");var U=e("../../lib");var V=e("../../lib/svg_text_utils");var P=e("../../components/color");var q=e("../../components/drawing");var n=e("../../registry");var x=e("../../plots/cartesian/axes").tickText;var a=e("./uniform_text");var Y=a.recordMinTextSize;var i=a.clearMinTextSize;var G=e("./style");var I=e("./helpers");var o=e("./constants");var s=e("./attributes");var l=s.text;var c=s.textposition;var b=e("../../components/fx/helpers").appendArrayPointValue;var W=o.TEXTPAD;function u(e){return e.id}function f(e){if(e.ids){return u}}function R(e,t){return e<t?1:-1}function z(e,t,r,n){var a=[];var i=[];var o=n?t:r;var s=n?r:t;a[0]=o.c2p(e.s0,true);i[0]=s.c2p(e.p0,true);a[1]=o.c2p(e.s1,true);i[1]=s.c2p(e.p1,true);return n?[a,i]:[i,a]}function X(e,t,r,n){if(!t.uniformtext.mode&&d(r)){var a;if(n){a=n()}return e.transition().duration(r.duration).ease(r.easing).each("end",function(){a&&a()}).each("interrupt",function(){a&&a()})}else{return e}}function d(e){return e&&e.duration>0}function h(T,k,e,t,M,S){var C=k.xaxis;var L=k.yaxis;var E=T._fullLayout;if(!M){M={mode:E.barmode,norm:E.barmode,gap:E.bargap,groupgap:E.bargroupgap};i("bar",E)}var r=U.makeTraceGroups(t,e,"trace bars").each(function(_){var e=D.select(this);var y=_[0].trace;var t=y.type==="waterfall";var r=y.type==="funnel";var n=y.type==="bar";var b=n||r;var x=0;if(t&&y.connector.visible&&y.connector.mode==="between"){x=y.connector.line.width/2}var w=y.orientation==="h";var A=d(M);var a=U.ensureSingle(e,"g","points");var i=f(y);var o=a.selectAll("g.point").data(U.identity,i);o.enter().append("g").classed("point",true);o.exit().remove();o.each(function(e,t){var r=D.select(this);var n=z(e,C,L,w);var a=n[0][0];var i=n[0][1];var o=n[1][0];var s=n[1][1];var l=(w?i-a:s-o)===0;if(l&&b&&I.getLineWidth(y,e)){l=false}if(!l){l=!O(a)||!O(i)||!O(o)||!O(s)}e.isBlank=l;if(l){if(w){i=a}else{s=o}}if(x&&!l){if(w){a-=R(a,i)*x;i+=R(a,i)*x}else{o-=R(o,s)*x;s+=R(o,s)*x}}var c;var u;if(y.type==="waterfall"){if(!l){var f=y[e.dir].marker;c=f.line.width;u=f.color}}else{c=I.getLineWidth(y,e);u=e.mc||y.marker.color}function d(e){var t=D.round(c/2%1,2);return M.gap===0&&M.groupgap===0?D.round(Math.round(e)-t,2):e}function h(e,t,r){if(r&&e===t){return e}return Math.abs(e-t)>=2?d(e):e>t?Math.ceil(e):Math.floor(e)}if(!T._context.staticPlot){var p=P.opacity(u);var v=p<1||c>.01?d:h;a=v(a,i,w);i=v(i,a,w);o=v(o,s,!w);s=v(s,o,!w)}var g=X(U.ensureSingle(r,"path"),E,M,S);g.style("vector-effect","non-scaling-stroke").attr("d",isNaN((i-a)*(s-o))||l&&T._context.staticPlot?"M0,0Z":"M"+a+","+o+"V"+s+"H"+i+"V"+o+"Z").call(q.setClipUrl,k.layerClipId,T);if(!E.uniformtext.mode&&A){var m=q.makePointStyleFns(y);q.singlePointStyle(e,g,y,m,T)}N(T,k,r,_,t,a,i,o,s,M,S);if(k.layerClipId){q.hideOutsideRangePoint(e,r.select("text"),C,L,y.xcalendar,y.ycalendar)}});var s=y.cliponaxis===false;q.setClipUrl(e,s?null:k.layerClipId,T)});n.getComponentMethod("errorbars","plot")(T,r,k,M)}function N(a,e,t,r,n,i,o,s,l,c,u){var f=e.xaxis;var d=e.yaxis;var h=a._fullLayout;var p;function v(e,t,r){var n=U.ensureSingle(e,"text").text(t).attr({class:"bartext bartext-"+p,"text-anchor":"middle","data-notex":1}).call(q.font,r).call(V.convertToTspans,a);return n}var g=r[0].trace;var m=g.orientation==="h";var _=$(h,r,n,f,d);p=Q(g,n);var y=c.mode==="stack"||c.mode==="relative";var b=r[n];var x=!y||b._outmost;if(!_||p==="none"||(b.isBlank||i===o||s===l)&&(p==="auto"||p==="inside")){t.select("text").remove();return}var w=h.font;var A=G.getBarColor(r[n],g);var T=G.getInsideTextFont(g,n,w,A);var k=G.getOutsideTextFont(g,n,w);var M=t.datum();if(m){if(f.type==="log"&&M.s0<=0){if(f.range[0]<f.range[1]){i=0}else{i=f._length}}}else{if(d.type==="log"&&M.s0<=0){if(d.range[0]<d.range[1]){s=d._length}else{s=0}}}var S=Math.abs(o-i)-2*W;var C=Math.abs(l-s)-2*W;var L;var E;var D;var O;var P;if(p==="outside"){if(!x&&!b.hasB)p="inside"}if(p==="auto"){if(x){p="inside";P=U.ensureUniformFontSize(a,T);L=v(t,_,P);E=q.bBox(L.node()),D=E.width,O=E.height;var I=D>0&&O>0;var R=D<=S&&O<=C;var z=D<=C&&O<=S;var N=m?S>=D*(C/O):C>=O*(S/D);if(I&&(R||z||N)){p="inside"}else{p="outside";L.remove();L=null}}else{p="inside"}}if(!L){P=U.ensureUniformFontSize(a,p==="outside"?k:T);L=v(t,_,P);var F=L.attr("transform");L.attr("transform","");E=q.bBox(L.node()),D=E.width,O=E.height;L.attr("transform",F);if(D<=0||O<=0){L.remove();return}}var j=g.textangle;var B,H;if(p==="outside"){H=g.constraintext==="both"||g.constraintext==="outside";B=J(i,o,s,l,E,{isHorizontal:m,constrained:H,angle:j})}else{H=g.constraintext==="both"||g.constraintext==="inside";B=Z(i,o,s,l,E,{isHorizontal:m,constrained:H,angle:j,anchor:g.insidetextanchor})}B.fontSize=P.size;Y(g.type,B,h);b.transform=B;X(L,h,c,u).attr("transform",U.getTextTransform(B))}function F(e){return e==="auto"?0:e}function j(e,t){var r=Math.PI/180*t;var n=Math.abs(Math.sin(r));var a=Math.abs(Math.cos(r));return{x:e.width*a+e.height*n,y:e.width*n+e.height*a}}function Z(e,t,r,n,a,i){var o=!!i.isHorizontal;var s=!!i.constrained;var l=i.angle||0;var c=i.anchor||"end";var u=c==="end";var f=c==="start";var d=i.leftToRight||0;var h=(d+1)/2;var p=1-h;var v=a.width;var g=a.height;var m=Math.abs(t-e);var _=Math.abs(n-r);var y=m>2*W&&_>2*W?W:0;m-=2*y;_-=2*y;var b=F(l);if(l==="auto"&&!(v<=m&&g<=_)&&(v>m||g>_)&&(!(v>_||g>m)||v<g!==m<_)){b+=90}var x=j(a,b);var w=1;if(s){w=Math.min(1,m/x.x,_/x.y)}var A=a.left*p+a.right*h;var T=(a.top+a.bottom)/2;var k=(e+W)*p+(t-W)*h;var M=(r+n)/2;var S=0;var C=0;if(f||u){var L=(o?x.x:x.y)/2;var E=o?R(e,t):R(r,n);if(o){if(f){k=e+E*y;S=-E*L}else{k=t-E*y;S=E*L}}else{if(f){M=r+E*y;C=-E*L}else{M=n-E*y;C=E*L}}}return{textX:A,textY:T,targetX:k,targetY:M,anchorX:S,anchorY:C,scale:w,rotate:b}}function J(e,t,r,n,a,i){var o=!!i.isHorizontal;var s=!!i.constrained;var l=i.angle||0;var c=a.width;var u=a.height;var f=Math.abs(t-e);var d=Math.abs(n-r);var h;if(o){h=d>2*W?W:0}else{h=f>2*W?W:0}var p=1;if(s){p=o?Math.min(1,d/u):Math.min(1,f/c)}var v=F(l);var g=j(a,v);var m=(o?g.x:g.y)/2;var _=(a.left+a.right)/2;var y=(a.top+a.bottom)/2;var b=(e+t)/2;var x=(r+n)/2;var w=0;var A=0;var T=o?R(t,e):R(r,n);if(o){b=t-T*h;w=T*m}else{x=n+T*h;A=-T*m}return{textX:_,textY:y,targetX:b,targetY:x,anchorX:w,anchorY:A,scale:p,rotate:v}}function $(e,t,r,n,a){var i=t[0].trace;var o=i.texttemplate;var s;if(o){s=p(e,t,r,n,a)}else if(i.textinfo){s=v(t,r,n,a)}else{s=I.getValue(i.text,r)}return I.coerceString(l,s)}function Q(e,t){var r=I.getValue(e.textposition,t);return I.coerceEnumerated(c,r)}function p(e,t,r,n,a){var i=t[0].trace;var o=U.castOption(i,r,"texttemplate");if(!o)return"";var s=i.type==="waterfall";var l=i.type==="funnel";var c,u;var f,d;if(i.orientation==="h"){c="y";u=a;f="x";d=n}else{c="x";u=n;f="y";d=a}function h(e){return x(u,u.c2l(e),true).text}function p(e){return x(d,d.c2l(e),true).text}var v=t[r];var g={};g.label=v.p;g.labelLabel=g[c+"Label"]=h(v.p);var m=U.castOption(i,v.i,"text");if(m===0||m)g.text=m;g.value=v.s;g.valueLabel=g[f+"Label"]=p(v.s);var _={};b(_,i,v.i);if(s){g.delta=+v.rawS||v.s;g.deltaLabel=p(g.delta);g.final=v.v;g.finalLabel=p(g.final);g.initial=g.final-g.delta;g.initialLabel=p(g.initial)}if(l){g.value=v.s;g.valueLabel=p(g.value);g.percentInitial=v.begR;g.percentInitialLabel=U.formatPercent(v.begR);g.percentPrevious=v.difR;g.percentPreviousLabel=U.formatPercent(v.difR);g.percentTotal=v.sumR;g.percenTotalLabel=U.formatPercent(v.sumR)}var y=U.castOption(i,v.i,"customdata");if(y)g.customdata=y;return U.texttemplateString(o,g,e._d3locale,_,g,i._meta||{})}function v(e,t,r,n){var a=e[0].trace;var i=a.orientation==="h";var o=a.type==="waterfall";var s=a.type==="funnel";function l(e){var t=i?n:r;return x(t,e,true).text}function c(e){var t=i?r:n;return x(t,+e,true).text}var u=a.textinfo;var f=e[t];var d=u.split("+");var h=[];var p;var v=function(e){return d.indexOf(e)!==-1};if(v("label")){h.push(l(e[t].p))}if(v("text")){p=U.castOption(a,f.i,"text");if(p===0||p)h.push(p)}if(o){var g=+f.rawS||f.s;var m=f.v;var _=m-g;if(v("initial"))h.push(c(_));if(v("delta"))h.push(c(g));if(v("final"))h.push(c(m))}if(s){if(v("value"))h.push(c(f.s));var y=0;if(v("percent initial"))y++;if(v("percent previous"))y++;if(v("percent total"))y++;var b=y>1;if(v("percent initial")){p=U.formatPercent(f.begR);if(b)p+=" of initial";h.push(p)}if(v("percent previous")){p=U.formatPercent(f.difR);if(b)p+=" of previous";h.push(p)}if(v("percent total")){p=U.formatPercent(f.sumR);if(b)p+=" of total";h.push(p)}}return h.join("<br>")}t.exports={plot:h,toMoveInsideBar:Z}},{"../../components/color":100,"../../components/drawing":122,"../../components/fx/helpers":136,"../../lib":230,"../../lib/svg_text_utils":252,"../../plots/cartesian/axes":276,"../../registry":313,"./attributes":323,"./constants":325,"./helpers":329,"./style":337,"./uniform_text":339,"@plotly/d3":11,"fast-isnumeric":15}],335:[function(e,t,r){"use strict";t.exports=function e(t,r){var n=t.cd;var a=t.xaxis;var i=t.yaxis;var o=n[0].trace;var s=o.type==="funnel";var l=o.orientation==="h";var c=[];var u;if(r===false){for(u=0;u<n.length;u++){n[u].selected=0}}else{for(u=0;u<n.length;u++){var f=n[u];var d="ct"in f?f.ct:h(f,a,i,l,s);if(r.contains(d,false,u,t)){c.push({pointNumber:u,x:a.c2d(f.x),y:i.c2d(f.y)});f.selected=1}else{f.selected=0}}}return c};function h(e,t,r,n,a){var i=t.c2p(n?e.s0:e.p0,true);var o=t.c2p(n?e.s1:e.p1,true);var s=r.c2p(n?e.p0:e.s0,true);var l=r.c2p(n?e.p1:e.s1,true);if(a){return[(i+o)/2,(s+l)/2]}else{if(n){return[o,(s+l)/2]}else{return[(i+o)/2,l]}}}},{}],336:[function(e,t,r){"use strict";t.exports=n;var u=e("../../lib").distinctVals;var f=e("../../constants/numerical").BADNUM;function n(e,t){this.traces=e;this.sepNegVal=t.sepNegVal;this.overlapNoMerge=t.overlapNoMerge;var r=Infinity;var n=[];for(var a=0;a<e.length;a++){var i=e[a];for(var o=0;o<i.length;o++){var s=i[o];if(s.p!==f)n.push(s.p)}if(i[0]&&i[0].width1){r=Math.min(i[0].width1,r)}}this.positions=n;var l=u(n);this.distinctPositions=l.vals;if(l.vals.length===1&&r!==Infinity)this.minDiff=r;else this.minDiff=Math.min(l.minDiff,r);var c=(t.posAxis||{}).type;if(c==="category"||c==="multicategory"){this.minDiff=1}this.binWidth=this.minDiff;this.bins={}}n.prototype.put=function e(t,r){var n=this.getLabel(t,r);var a=this.bins[n]||0;this.bins[n]=a+r;return a};n.prototype.get=function e(t,r){var n=this.getLabel(t,r);return this.bins[n]||0};n.prototype.getLabel=function e(t,r){var n=r<0&&this.sepNegVal?"v":"^";var a=this.overlapNoMerge?t:Math.round(t/this.binWidth);return n+a}},{"../../constants/numerical":210,"../../lib":230}],337:[function(e,t,r){"use strict";var o=e("@plotly/d3");var s=e("../../components/color");var l=e("../../components/drawing");var c=e("../../lib");var a=e("../../registry");var i=e("./uniform_text").resizeText;var n=e("./attributes");var u=n.textfont;var f=n.insidetextfont;var d=n.outsidetextfont;var h=e("./helpers");function p(n){var e=o.select(n).selectAll("g.barlayer").selectAll("g.trace");i(n,e,"bar");var t=e.size();var r=n._fullLayout;e.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){if(r.barmode==="stack"&&t>1||r.bargap===0&&r.bargroupgap===0&&!e[0].trace.marker.line.width){o.select(this).attr("shape-rendering","crispEdges")}});e.selectAll("g.points").each(function(e){var t=o.select(this);var r=e[0].trace;v(t,r,n)});a.getComponentMethod("errorbars","style")(e)}function v(e,t,r){l.pointStyle(e.selectAll("path"),t,r);g(e,t,r)}function g(e,n,a){e.selectAll("text").each(function(e){var t=o.select(this);var r=c.ensureUniformFontSize(a,b(t,e,n,a));l.font(t,r)})}function m(e,t,r){var n=t[0].trace;if(n.selectedpoints){_(r,n,e)}else{v(r,n,e);a.getComponentMethod("errorbars","style")(r)}}function _(e,t,r){l.selectedPointStyle(e.selectAll("path"),t);y(e.selectAll("text"),t,r)}function y(e,a,i){e.each(function(e){var t=o.select(this);var r;if(e.selected){r=c.ensureUniformFontSize(i,b(t,e,a,i));var n=a.selected.textfont&&a.selected.textfont.color;if(n){r.color=n}l.font(t,r)}else{l.selectedTextStyle(t,a)}})}function b(e,t,r,n){var a=n._fullLayout.font;var i=r.textfont;if(e.classed("bartext-inside")){var o=k(t,r);i=w(r,t.i,a,o)}else if(e.classed("bartext-outside")){i=A(r,t.i,a)}return i}function x(e,t,r){return T(u,e.textfont,t,r)}function w(e,t,r,n){var a=x(e,t,r);var i=e._input.textfont===undefined||e._input.textfont.color===undefined||Array.isArray(e.textfont.color)&&e.textfont.color[t]===undefined;if(i){a={color:s.contrast(n),family:a.family,size:a.size}}return T(f,e.insidetextfont,t,a)}function A(e,t,r){var n=x(e,t,r);return T(d,e.outsidetextfont,t,n)}function T(e,t,r,n){t=t||{};var a=h.getValue(t.family,r);var i=h.getValue(t.size,r);var o=h.getValue(t.color,r);return{family:h.coerceString(e.family,a,n.family),size:h.coerceNumber(e.size,i,n.size),color:h.coerceColor(e.color,o,n.color)}}function k(e,t){if(t.type==="waterfall"){return t[e.dir].marker.color}return e.mcc||e.mc||t.marker.color}t.exports={style:p,styleTextPoints:g,styleOnSelect:m,getInsideTextFont:w,getOutsideTextFont:A,getBarColor:k,resizeText:i}},{"../../components/color":100,"../../components/drawing":122,"../../lib":230,"../../registry":313,"./attributes":323,"./helpers":329,"./uniform_text":339,"@plotly/d3":11}],338:[function(e,t,r){"use strict";var l=e("../../components/color");var c=e("../../components/colorscale/helpers").hasColorscale;var u=e("../../components/colorscale/defaults");var f=e("../../lib").coercePattern;t.exports=function e(t,r,n,a,i){var o=n("marker.color",a);var s=c(t,"marker");if(s){u(t,r,i,n,{prefix:"marker.",cLetter:"c"})}n("marker.line.color",l.defaultLine);if(c(t,"marker.line")){u(t,r,i,n,{prefix:"marker.line.",cLetter:"c"})}n("marker.line.width");n("marker.opacity");f(n,"marker.pattern",o,s);n("selected.marker.color");n("unselected.marker.color")}},{"../../components/color":100,"../../components/colorscale/defaults":110,"../../components/colorscale/helpers":111,"../../lib":230}],339:[function(e,t,r){"use strict";var s=e("@plotly/d3");var l=e("../../lib");function n(e,t,r){var n=e._fullLayout;var a=n["_"+r+"Text_minsize"];if(a){var i=n.uniformtext.mode==="hide";var o;switch(r){case"funnelarea":case"pie":case"sunburst":o="g.slice";break;case"treemap":case"icicle":o="g.slice, g.pathbar";break;default:o="g.points > g.point"}t.selectAll(o).each(function(e){var t=e.transform;if(t){t.scale=i&&t.hide?0:a/t.fontSize;var r=s.select(this).select("text");r.attr("transform",l.getTextTransform(t))}})}}function a(e,t,r){if(r.uniformtext.mode){var n=o(e);var a=r.uniformtext.minsize;var i=t.scale*t.fontSize;t.hide=i<a;r[n]=r[n]||Infinity;if(!t.hide){r[n]=Math.min(r[n],Math.max(i,a))}}}function i(e,t){var r=o(e);t[r]=undefined}function o(e){return"_"+e+"Text_minsize"}t.exports={recordMinTextSize:a,clearMinTextSize:i,resizeText:n}},{"../../lib":230,"@plotly/d3":11}],340:[function(e,t,r){"use strict";var n=e("../../plots/attributes");var a=e("../../plots/domain").attributes;var i=e("../../plots/font_attributes");var o=e("../../components/color/attributes");var s=e("../../plots/template_attributes").hovertemplateAttrs;var l=e("../../plots/template_attributes").texttemplateAttrs;var c=e("../../lib/extend").extendFlat;var u=i({editType:"plot",arrayOk:true,colorEditType:"plot"});t.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:true,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:true,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:true,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:c({},n.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:s({},{keys:["label","color","value","percent","text"]}),texttemplate:l({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:true,editType:"plot"},textfont:c({},u,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:c({},u,{}),outsidetextfont:c({},u,{}),automargin:{valType:"boolean",dflt:false,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:c({},u,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:a({name:"pie",trace:true,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:true,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:true,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:c({},u,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":99,"../../lib/extend":224,"../../plots/attributes":272,"../../plots/domain":304,"../../plots/font_attributes":305,"../../plots/template_attributes":312}],341:[function(e,t,a){"use strict";var i=e("../../plots/plots");a.name="pie";a.plot=function(e,t,r,n){i.plotBasePlot(a.name,e,t,r,n)};a.clean=function(e,t,r,n){i.cleanBasePlot(a.name,e,t,r,n)}},{"../../plots/plots":311}],342:[function(e,t,r){"use strict";var x=e("fast-isnumeric");var i=e("tinycolor2");var a=e("../../components/color");var h={};function n(e,t){var r=[];var n=e._fullLayout;var a=n.hiddenlabels||[];var i=t.labels;var o=t.marker.colors||[];var s=t.values;var l=t._length;var c=t._hasValues&&l;var u,f;if(t.dlabel){i=new Array(l);for(u=0;u<l;u++){i[u]=String(t.label0+u*t.dlabel)}}var d={};var h=w(n["_"+t.type+"colormap"]);var p=0;var v=false;for(u=0;u<l;u++){var g,m,_;if(c){g=s[u];if(!x(g))continue;g=+g;if(g<0)continue}else g=1;m=i[u];if(m===undefined||m==="")m=u;m=String(m);var y=d[m];if(y===undefined){d[m]=r.length;_=a.indexOf(m)!==-1;if(!_)p+=g;r.push({v:g,label:m,color:h(o[u],m),i:u,pts:[u],hidden:_})}else{v=true;f=r[y];f.v+=g;f.pts.push(u);if(!f.hidden)p+=g;if(f.color===false&&o[u]){f.color=h(o[u],m)}}}var b=t.type==="funnelarea"?v:t.sort;if(b)r.sort(function(e,t){return t.v-e.v});if(r[0])r[0].vTotal=p;return r}function w(n){return function e(t,r){if(!t)return false;t=i(t);if(!t.isValid())return false;t=a.addOpacity(t,t.getAlpha());if(!n[r])n[r]=t;return t}}function o(e,t){var r=(t||{}).type;if(!r)r="pie";var n=e._fullLayout;var a=e.calcdata;var i=n[r+"colorway"];var o=n["_"+r+"colormap"];if(n["extend"+r+"colors"]){i=p(i,h)}var s=0;for(var l=0;l<a.length;l++){var c=a[l];var u=c[0].trace.type;if(u!==r)continue;for(var f=0;f<c.length;f++){var d=c[f];if(d.color===false){if(o[d.label]){d.color=o[d.label]}else{o[d.label]=d.color=i[s%i.length];s++}}}}}function p(e,t){var r;var n=JSON.stringify(e);var a=t[n];if(!a){a=e.slice();for(r=0;r<e.length;r++){a.push(i(e[r]).lighten(20).toHexString())}for(r=0;r<e.length;r++){a.push(i(e[r]).darken(20).toHexString())}t[n]=a}return a}t.exports={calc:n,crossTraceCalc:o,makePullColorFn:w,generateExtendedColors:p}},{"../../components/color":100,"fast-isnumeric":15,tinycolor2:65}],343:[function(e,t,r){"use strict";var l=e("fast-isnumeric");var y=e("../../lib");var b=e("./attributes");var x=e("../../plots/domain").defaults;var w=e("../bar/defaults").handleText;function A(e,t){var r=Array.isArray(e);var n=y.isArrayOrTypedArray(t);var a=Math.min(r?e.length:Infinity,n?t.length:Infinity);if(!isFinite(a))a=0;if(a&&n){var i;for(var o=0;o<a;o++){var s=t[o];if(l(s)&&s>0){i=true;break}}if(!i)a=0}return{hasLabels:r,hasValues:n,len:a}}function n(r,n,e,t){function a(e,t){return y.coerce(r,n,b,e,t)}var i=a("labels");var o=a("values");var s=A(i,o);var l=s.len;n._hasLabels=s.hasLabels;n._hasValues=s.hasValues;if(!n._hasLabels&&n._hasValues){a("label0");a("dlabel")}if(!l){n.visible=false;return}n._length=l;var c=a("marker.line.width");if(c)a("marker.line.color");a("marker.colors");a("scalegroup");var u=a("text");var f=a("texttemplate");var d;if(!f)d=a("textinfo",Array.isArray(u)?"text+percent":"percent");a("hovertext");a("hovertemplate");if(f||d&&d!=="none"){var h=a("textposition");w(r,n,t,a,h,{moduleHasSelected:false,moduleHasUnselected:false,moduleHasConstrain:false,moduleHasCliponaxis:false,moduleHasTextangle:false,moduleHasInsideanchor:false});var p=Array.isArray(h)||h==="auto";var v=p||h==="outside";if(v){a("automargin")}if(h==="inside"||h==="auto"||Array.isArray(h)){a("insidetextorientation")}}x(n,t,a);var g=a("hole");var m=a("title.text");if(m){var _=a("title.position",g?"middle center":"top center");if(!g&&_==="middle center")n.title.position="top center";y.coerceFont(a,"title.font",t.font)}a("sort");a("direction");a("rotation");a("pull")}t.exports={handleLabelsAndValues:A,supplyDefaults:n}},{"../../lib":230,"../../plots/domain":304,"../bar/defaults":327,"./attributes":340,"fast-isnumeric":15}],344:[function(e,t,r){"use strict";var a=e("../../components/fx/helpers").appendArrayMultiPointValues;t.exports=function e(t,r){var n={curveNumber:r.index,pointNumbers:t.pts,data:r._input,fullData:r,label:t.label,color:t.color,value:t.v,percent:t.percent,text:t.text,v:t.v};if(t.pts.length===1)n.pointNumber=n.i=t.pts[0];a(n,r,t.pts);if(r.type==="funnelarea"){delete n.v;delete n.i}return n}},{"../../components/fx/helpers":136}],345:[function(e,t,n){"use strict";var a=e("../../lib");function i(e){return e.indexOf("e")!==-1?e.replace(/[.]?0+e/,"e"):e.indexOf(".")!==-1?e.replace(/[.]?0+$/,""):e}n.formatPiePercent=function e(t,r){var n=i((t*100).toPrecision(3));return a.numSeparate(n,r)+"%"};n.formatPieValue=function e(t,r){var n=i(t.toPrecision(10));return a.numSeparate(n,r)};n.getFirstFilled=function e(t,r){if(!Array.isArray(t))return;for(var n=0;n<r.length;n++){var a=t[r[n]];if(a||a===0||a==="")return a}};n.castOption=function e(t,r){if(Array.isArray(t))return n.getFirstFilled(t,r);else if(t)return t};n.getRotationAngle=function(e){return(e==="auto"?0:e)*Math.PI/180}},{"../../lib":230}],346:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,supplyLayoutDefaults:e("./layout_defaults"),layoutAttributes:e("./layout_attributes"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style"),styleOne:e("./style_one"),moduleType:"trace",name:"pie",basePlotModule:e("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":340,"./base_plot":341,"./calc":342,"./defaults":343,"./layout_attributes":347,"./layout_defaults":348,"./plot":349,"./style":350,"./style_one":351}],347:[function(e,t,r){"use strict";t.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:true,editType:"calc"}}},{}],348:[function(e,t,r){"use strict";var a=e("../../lib");var i=e("./layout_attributes");t.exports=function e(r,n){function t(e,t){return a.coerce(r,n,i,e,t)}t("hiddenlabels");t("piecolorway",n.colorway);t("extendpiecolors")}},{"../../lib":230,"./layout_attributes":347}],349:[function(e,t,r){"use strict";var x=e("@plotly/d3");var u=e("../../plots/plots");var m=e("../../components/fx");var f=e("../../components/color");var w=e("../../components/drawing");var A=e("../../lib");var d=A.strScale;var h=A.strTranslate;var T=e("../../lib/svg_text_utils");var n=e("../bar/uniform_text");var k=n.recordMinTextSize;var a=n.clearMinTextSize;var s=e("../bar/constants").TEXTPAD;var M=e("./helpers");var _=e("./event_data");var b=e("../../lib").isValidTextValue;function i(y,e){var b=y._fullLayout;var c=b._size;a("pie",b);o(e,y);B(e,c);var t=A.makeTraceGroups(b._pielayer,e,"trace").each(function(g){var l=x.select(this);var m=g[0];var _=m.trace;U(g);l.attr("stroke-linejoin","round");l.each(function(){var e=x.select(this).selectAll("g.slice").data(g);e.enter().append("g").classed("slice",true);e.exit().remove();var p=[[[],[]],[[],[]]];var v=false;e.each(function(l,c){if(l.hidden){x.select(this).selectAll("path,g").remove();return}l.pointNumber=l.i;l.curveNumber=_.index;p[l.pxmid[1]<0?0:1][l.pxmid[0]<0?0:1].push(l);var u=m.cx;var f=m.cy;var e=x.select(this);var t=e.selectAll("path.surface").data([l]);t.enter().append("path").classed("surface",true).style({"pointer-events":"all"});e.call(C,y,g);if(_.pull){var r=+M.castOption(_.pull,l.pts)||0;if(r>0){u+=r*l.pxmid[0];f+=r*l.pxmid[1]}}l.cxFinal=u;l.cyFinal=f;function n(e,t,r,n){var a=n*(t[0]-e[0]);var i=n*(t[1]-e[1]);return"a"+n*m.r+","+n*m.r+" 0 "+l.largeArc+(r?" 1 ":" 0 ")+a+","+i}var a=_.hole;if(l.v===m.vTotal){var i="M"+(u+l.px0[0])+","+(f+l.px0[1])+n(l.px0,l.pxmid,true,1)+n(l.pxmid,l.px0,true,1)+"Z";if(a){t.attr("d","M"+(u+a*l.px0[0])+","+(f+a*l.px0[1])+n(l.px0,l.pxmid,false,a)+n(l.pxmid,l.px0,false,a)+"Z"+i)}else t.attr("d",i)}else{var o=n(l.px0,l.px1,true,1);if(a){var s=1-a;t.attr("d","M"+(u+a*l.px1[0])+","+(f+a*l.px1[1])+n(l.px1,l.px0,false,a)+"l"+s*l.px0[0]+","+s*l.px0[1]+o+"Z")}else{t.attr("d","M"+u+","+f+"l"+l.px0[0]+","+l.px0[1]+o+"Z")}}q(y,l,m);var d=M.castOption(_.textposition,l.pts);var h=e.selectAll("g.slicetext").data(l.text&&d!=="none"?[0]:[]);h.enter().append("g").classed("slicetext",true);h.exit().remove();h.each(function(){var e=A.ensureSingle(x.select(this),"text","",function(e){e.attr("data-notex",1)});var t=A.ensureUniformFontSize(y,d==="outside"?L(_,l,b.font):E(_,l,b.font));e.text(l.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(w.font,t).call(T.convertToTspans,y);var r=w.bBox(e.node());var n;if(d==="outside"){n=R(r,l)}else{n=D(r,l,m);if(d==="auto"&&n.scale<1){var a=A.ensureUniformFontSize(y,_.outsidetextfont);e.call(w.font,a);r=w.bBox(e.node());n=R(r,l)}}var i=n.textPosAngle;var o=i===undefined?l.pxmid:V(m.r,i);n.targetX=u+o[0]*n.rCenter+(n.x||0);n.targetY=f+o[1]*n.rCenter+(n.y||0);Y(n,r);if(n.outside){var s=n.targetY;l.yLabelMin=s-r.height/2;l.yLabelMid=s;l.yLabelMax=s+r.height/2;l.labelExtraX=0;l.labelExtraY=0;v=true}n.fontSize=t.size;k(_.type,n,b);g[c].transform=n;e.attr("transform",A.getTextTransform(n))})});var t=x.select(this).selectAll("g.titletext").data(_.title.text?[0]:[]);t.enter().append("g").classed("titletext",true);t.exit().remove();t.each(function(){var e=A.ensureSingle(x.select(this),"text","",function(e){e.attr("data-notex",1)});var t=_.title.text;if(_._meta){t=A.templateString(t,_._meta)}e.text(t).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(w.font,_.title.font).call(T.convertToTspans,y);var r;if(_.title.position==="middle center"){r=z(m)}else{r=N(m,c)}e.attr("transform",h(r.x,r.y)+d(Math.min(1,r.scale))+h(r.tx,r.ty))});if(v)j(p,_);S(e,_);if(v&&_.automargin){var r=w.bBox(l.node());var n=_.domain;var a=c.w*(n.x[1]-n.x[0]);var i=c.h*(n.y[1]-n.y[0]);var o=(.5*a-m.r)/c.w;var s=(.5*i-m.r)/c.h;u.autoMargin(y,"pie."+_.uid+".automargin",{xl:n.x[0]-o,xr:n.x[1]+o,yb:n.y[0]-s,yt:n.y[1]+s,l:Math.max(m.cx-m.r-r.left,0),r:Math.max(r.right-(m.cx+m.r),0),b:Math.max(r.bottom-(m.cy+m.r),0),t:Math.max(m.cy-m.r-r.top,0),pad:5})}})});setTimeout(function(){t.selectAll("tspan").each(function(){var e=x.select(this);if(e.attr("dy"))e.attr("dy",e.attr("dy"))})},0)}function S(e,c){e.each(function(e){var t=x.select(this);if(!e.labelExtraX&&!e.labelExtraY){t.select("path.textline").remove();return}var r=t.select("g.slicetext text");e.transform.targetX+=e.labelExtraX;e.transform.targetY+=e.labelExtraY;r.attr("transform",A.getTextTransform(e.transform));var n=e.cxFinal+e.pxmid[0];var a=e.cyFinal+e.pxmid[1];var i="M"+n+","+a;var o=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4;if(e.labelExtraX){var s=e.labelExtraX*e.pxmid[1]/e.pxmid[0];var l=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]);if(Math.abs(s)>Math.abs(l)){i+="l"+l*e.pxmid[0]/e.pxmid[1]+","+l+"H"+(n+e.labelExtraX+o)}else{i+="l"+e.labelExtraX+","+s+"v"+(l-s)+"h"+o}}else{i+="V"+(e.yLabelMid+e.labelExtraY)+"h"+o}A.ensureSingle(t,"path","textline").call(f.stroke,c.outsidetextfont.color).attr({"stroke-width":Math.min(2,c.outsidetextfont.size/8),d:i,fill:"none"})})}function C(e,d,t){var h=t[0];var p=h.trace;var v=h.cx;var g=h.cy;if(!("_hasHoverLabel"in p))p._hasHoverLabel=false;if(!("_hasHoverEvent"in p))p._hasHoverEvent=false;e.on("mouseover",function(e){var t=d._fullLayout;var r=d._fullData[p.index];if(d._dragging||t.hovermode===false)return;var n=r.hoverinfo;if(Array.isArray(n)){n=m.castHoverinfo({hoverinfo:[M.castOption(n,e.pts)],_module:p._module},t,0)}if(n==="all")n="label+text+value+percent+name";if(r.hovertemplate||n!=="none"&&n!=="skip"&&n){var a=e.rInscribed||0;var i=v+e.pxmid[0]*(1-a);var o=g+e.pxmid[1]*(1-a);var s=t.separators;var l=[];if(n&&n.indexOf("label")!==-1)l.push(e.label);e.text=M.castOption(r.hovertext||r.text,e.pts);if(n&&n.indexOf("text")!==-1){var c=e.text;if(A.isValidTextValue(c))l.push(c)}e.value=e.v;e.valueLabel=M.formatPieValue(e.v,s);if(n&&n.indexOf("value")!==-1)l.push(e.valueLabel);e.percent=e.v/h.vTotal;e.percentLabel=M.formatPiePercent(e.percent,s);if(n&&n.indexOf("percent")!==-1)l.push(e.percentLabel);var u=r.hoverlabel;var f=u.font;m.loneHover({trace:p,x0:i-a*h.r,x1:i+a*h.r,y:o,text:l.join("<br>"),name:r.hovertemplate||n.indexOf("name")!==-1?r.name:undefined,idealAlign:e.pxmid[0]<0?"left":"right",color:M.castOption(u.bgcolor,e.pts)||e.color,borderColor:M.castOption(u.bordercolor,e.pts),fontFamily:M.castOption(f.family,e.pts),fontSize:M.castOption(f.size,e.pts),fontColor:M.castOption(f.color,e.pts),nameLength:M.castOption(u.namelength,e.pts),textAlign:M.castOption(u.align,e.pts),hovertemplate:M.castOption(r.hovertemplate,e.pts),hovertemplateLabels:e,eventData:[_(e,r)]},{container:t._hoverlayer.node(),outerContainer:t._paper.node(),gd:d});p._hasHoverLabel=true}p._hasHoverEvent=true;d.emit("plotly_hover",{points:[_(e,r)],event:x.event})});e.on("mouseout",function(e){var t=d._fullLayout;var r=d._fullData[p.index];var n=x.select(this).datum();if(p._hasHoverEvent){e.originalEvent=x.event;d.emit("plotly_unhover",{points:[_(n,r)],event:x.event});p._hasHoverEvent=false}if(p._hasHoverLabel){m.loneUnhover(t._hoverlayer.node());p._hasHoverLabel=false}});e.on("click",function(e){var t=d._fullLayout;var r=d._fullData[p.index];if(d._dragging||t.hovermode===false)return;d._hoverdata=[_(e,r)];m.click(d,x.event)})}function L(e,t,r){var n=M.castOption(e.outsidetextfont.color,t.pts)||M.castOption(e.textfont.color,t.pts)||r.color;var a=M.castOption(e.outsidetextfont.family,t.pts)||M.castOption(e.textfont.family,t.pts)||r.family;var i=M.castOption(e.outsidetextfont.size,t.pts)||M.castOption(e.textfont.size,t.pts)||r.size;return{color:n,family:a,size:i}}function E(e,t,r){var n=M.castOption(e.insidetextfont.color,t.pts);if(!n&&e._input.textfont){n=M.castOption(e._input.textfont.color,t.pts)}var a=M.castOption(e.insidetextfont.family,t.pts)||M.castOption(e.textfont.family,t.pts)||r.family;var i=M.castOption(e.insidetextfont.size,t.pts)||M.castOption(e.textfont.size,t.pts)||r.size;return{color:n||f.contrast(t.color),family:a,size:i}}function o(e,t){var r,n;for(var a=0;a<e.length;a++){r=e[a][0];n=r.trace;if(n.title.text){var i=n.title.text;if(n._meta){i=A.templateString(i,n._meta)}var o=w.tester.append("text").attr("data-notex",1).text(i).call(w.font,n.title.font).call(T.convertToTspans,t);var s=w.bBox(o.node(),true);r.titleBox={width:s.width,height:s.height};o.remove()}}}function D(i,o,e){var s=e.r||o.rpx1;var t=o.rInscribed;var r=o.startangle===o.stopangle;if(r){return{rCenter:1-t,scale:0,rotate:0,textPosAngle:0}}var l=o.ring;var n=l===1&&Math.abs(o.startangle-o.stopangle)===Math.PI*2;var a=o.halfangle;var c=o.midangle;var u=e.trace.insidetextorientation;var f=u==="horizontal";var d=u==="tangential";var h=u==="radial";var p=u==="auto";var v=[];var g;if(!p){var m=function(e,t){if(O(o,e)){var r=Math.abs(e-o.startangle);var n=Math.abs(e-o.stopangle);var a=r<n?r:n;if(t==="tan"){g=I(i,s,l,a,0)}else{g=P(i,s,l,a,Math.PI/2)}g.textPosAngle=e;v.push(g)}};var _;if(f||d){for(_=4;_>=-4;_-=2)m(Math.PI*_,"tan");for(_=4;_>=-4;_-=2)m(Math.PI*(_+1),"tan")}if(f||h){for(_=4;_>=-4;_-=2)m(Math.PI*(_+1.5),"rad");for(_=4;_>=-4;_-=2)m(Math.PI*(_+.5),"rad")}}if(n||p||f){var y=Math.sqrt(i.width*i.width+i.height*i.height);g={scale:t*s*2/y,rCenter:1-t,rotate:0};g.textPosAngle=(o.startangle+o.stopangle)/2;if(g.scale>=1)return g;v.push(g)}if(p||h){g=P(i,s,l,a,c);g.textPosAngle=(o.startangle+o.stopangle)/2;v.push(g)}if(p||d){g=I(i,s,l,a,c);g.textPosAngle=(o.startangle+o.stopangle)/2;v.push(g)}var b=0;var x=0;for(var w=0;w<v.length;w++){var A=v[w].scale;if(x<A){x=A;b=w}if(!p&&x>=1){break}}return v[b]}function O(e,t){var r=e.startangle;var n=e.stopangle;return r>t&&t>n||r<t&&t<n}function P(e,t,r,n,a){t=Math.max(0,t-2*s);var i=e.width/e.height;var o=p(i,n,t,r);return{scale:o*2/e.height,rCenter:l(i,o/t),rotate:c(a)}}function I(e,t,r,n,a){t=Math.max(0,t-2*s);var i=e.height/e.width;var o=p(i,n,t,r);return{scale:o*2/e.width,rCenter:l(i,o/t),rotate:c(a+Math.PI/2)}}function l(e,t){return Math.cos(t)-e*t}function c(e){return(180/Math.PI*e+720)%180-90}function p(e,t,r,n){var a=e+1/(2*Math.tan(t));return r*Math.min(1/(Math.sqrt(a*a+.5)+a),n/(Math.sqrt(e*e+n/2)+e))}function v(e,t){if(e.v===t.vTotal&&!t.trace.hole)return 1;return Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2)}function R(e,t){var r=t.pxmid[0];var n=t.pxmid[1];var a=e.width/2;var i=e.height/2;if(r<0)a*=-1;if(n<0)i*=-1;return{scale:1,rCenter:1,rotate:0,x:a+Math.abs(i)*(a>0?1:-1)/2,y:i/(1+r*r/(n*n)),outside:true}}function z(e){var t=Math.sqrt(e.titleBox.width*e.titleBox.width+e.titleBox.height*e.titleBox.height);return{x:e.cx,y:e.cy,scale:e.trace.hole*e.r*2/t,tx:0,ty:-e.titleBox.height/2+e.trace.title.font.size}}function N(e,t){var r=1;var n=1;var a;var i=e.trace;var o={x:e.cx,y:e.cy};var s={tx:0,ty:0};s.ty+=i.title.font.size;a=F(i);if(i.title.position.indexOf("top")!==-1){o.y-=(1+a)*e.r;s.ty-=e.titleBox.height}else if(i.title.position.indexOf("bottom")!==-1){o.y+=(1+a)*e.r}var l=g(e.r,e.trace.aspectratio);var c=t.w*(i.domain.x[1]-i.domain.x[0])/2;if(i.title.position.indexOf("left")!==-1){c=c+l;o.x-=(1+a)*l;s.tx+=e.titleBox.width/2}else if(i.title.position.indexOf("center")!==-1){c*=2}else if(i.title.position.indexOf("right")!==-1){c=c+l;o.x+=(1+a)*l;s.tx-=e.titleBox.width/2}r=c/e.titleBox.width;n=y(e,t)/e.titleBox.height;return{x:o.x,y:o.y,scale:Math.min(r,n),tx:s.tx,ty:s.ty}}function g(e,t){return e/(t===undefined?1:t)}function y(e,t){var r=e.trace;var n=t.h*(r.domain.y[1]-r.domain.y[0]);return Math.min(e.titleBox.height,n/2)}function F(e){var t=e.pull;if(!t)return 0;var r;if(Array.isArray(t)){t=0;for(r=0;r<e.pull.length;r++){if(e.pull[r]>t)t=e.pull[r]}}return t}function j(e,h){var t,p,r,v,g,m,_,n,a,y,i,o,s;function l(e,t){return e.pxmid[1]-t.pxmid[1]}function c(e,t){return t.pxmid[1]-e.pxmid[1]}function u(e,t){if(!t)t={};var r=t.labelExtraY+(p?t.yLabelMax:t.yLabelMin);var n=p?e.yLabelMin:e.yLabelMax;var a=p?e.yLabelMax:e.yLabelMin;var i=e.cyFinal+g(e.px0[1],e.px1[1]);var o=r-n;var s,l,c,u,f,d;if(o*_>0)e.labelExtraY=o;if(!Array.isArray(h.pull))return;for(l=0;l<y.length;l++){c=y[l];if(c===e||(M.castOption(h.pull,e.pts)||0)>=(M.castOption(h.pull,c.pts)||0)){continue}if((e.pxmid[1]-c.pxmid[1])*_>0){u=c.cyFinal+g(c.px0[1],c.px1[1]);o=u-n-e.labelExtraY;if(o*_>0)e.labelExtraY+=o}else if((a+e.labelExtraY-i)*_>0){s=3*m*Math.abs(l-y.indexOf(e));f=c.cxFinal+v(c.px0[0],c.px1[0]);d=f+s-(e.cxFinal+e.pxmid[0])-e.labelExtraX;if(d*m>0)e.labelExtraX+=d}}}for(p=0;p<2;p++){r=p?l:c;g=p?Math.max:Math.min;_=p?1:-1;for(t=0;t<2;t++){v=t?Math.max:Math.min;m=t?1:-1;n=e[p][t];n.sort(r);a=e[1-p][t];y=a.concat(n);o=[];for(i=0;i<n.length;i++){if(n[i].yLabelMid!==undefined)o.push(n[i])}s=false;for(i=0;p&&i<a.length;i++){if(a[i].yLabelMid!==undefined){s=a[i];break}}for(i=0;i<o.length;i++){var f=i&&o[i-1];if(s&&!i)f=s;u(o[i],f)}}}}function B(e,t){var r=[];for(var n=0;n<e.length;n++){var a=e[n][0];var i=a.trace;var o=i.domain;var s=t.w*(o.x[1]-o.x[0]);var l=t.h*(o.y[1]-o.y[0]);if(i.title.text&&i.title.position!=="middle center"){l-=y(a,t)}var c=s/2;var u=l/2;if(i.type==="funnelarea"&&!i.scalegroup){u/=i.aspectratio}a.r=Math.min(c,u)/(1+F(i));a.cx=t.l+t.w*(i.domain.x[1]+i.domain.x[0])/2;a.cy=t.t+t.h*(1-i.domain.y[0])-l/2;if(i.title.text&&i.title.position.indexOf("bottom")!==-1){a.cy-=y(a,t)}if(i.scalegroup&&r.indexOf(i.scalegroup)===-1){r.push(i.scalegroup)}}H(e,r)}function H(e,t){var r,n,a;for(var i=0;i<t.length;i++){var o=Infinity;var s=t[i];for(n=0;n<e.length;n++){r=e[n][0];a=r.trace;if(a.scalegroup===s){var l;if(a.type==="pie"){l=r.r*r.r}else if(a.type==="funnelarea"){var c,u;if(a.aspectratio>1){c=r.r;u=c/a.aspectratio}else{u=r.r;c=u*a.aspectratio}c*=(1+a.baseratio)/2;l=c*u}o=Math.min(o,l/r.vTotal)}}for(n=0;n<e.length;n++){r=e[n][0];a=r.trace;if(a.scalegroup===s){var f=o*r.vTotal;if(a.type==="funnelarea"){f/=(1+a.baseratio)/2;f/=a.aspectratio}r.r=Math.sqrt(f)}}}}function U(e){var t=e[0];var r=t.r;var n=t.trace;var a=M.getRotationAngle(n.rotation);var i=2*Math.PI/t.vTotal;var o="px0";var s="px1";var l,c,u;if(n.direction==="counterclockwise"){for(l=0;l<e.length;l++){if(!e[l].hidden)break}if(l===e.length)return;a+=i*e[l].v;i*=-1;o="px1";s="px0"}u=V(r,a);for(l=0;l<e.length;l++){c=e[l];if(c.hidden)continue;c[o]=u;c.startangle=a;a+=i*c.v/2;c.pxmid=V(r,a);c.midangle=a;a+=i*c.v/2;u=V(r,a);c.stopangle=a;c[s]=u;c.largeArc=c.v>t.vTotal/2?1:0;c.halfangle=Math.PI*Math.min(c.v/t.vTotal,.5);c.ring=1-n.hole;c.rInscribed=v(c,t)}}function V(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}function q(e,t,r){var n=e._fullLayout;var a=r.trace;var i=a.texttemplate;var o=a.textinfo;if(!i&&o&&o!=="none"){var s=o.split("+");var l=function(e){return s.indexOf(e)!==-1};var c=l("label");var u=l("text");var f=l("value");var d=l("percent");var h=n.separators;var p;p=c?[t.label]:[];if(u){var v=M.getFirstFilled(a.text,t.pts);if(b(v))p.push(v)}if(f)p.push(M.formatPieValue(t.v,h));if(d)p.push(M.formatPiePercent(t.v/r.vTotal,h));t.text=p.join("<br>")}function g(e){return{label:e.label,value:e.v,valueLabel:M.formatPieValue(e.v,n.separators),percent:e.v/r.vTotal,percentLabel:M.formatPiePercent(e.v/r.vTotal,n.separators),color:e.color,text:e.text,customdata:A.castOption(a,e.i,"customdata")}}if(i){var m=A.castOption(a,t.i,"texttemplate");if(!m){t.text=""}else{var _=g(t);var y=M.getFirstFilled(a.text,t.pts);if(b(y)||y==="")_.text=y;t.text=A.texttemplateString(m,_,e._fullLayout._d3locale,_,a._meta||{})}}}function Y(e,t){var r=e.rotate*Math.PI/180;var n=Math.cos(r);var a=Math.sin(r);var i=(t.left+t.right)/2;var o=(t.top+t.bottom)/2;e.textX=i*n-o*a;e.textY=i*a+o*n;e.noCenter=true}t.exports={plot:i,formatSliceLabel:q,transformInsideText:D,determineInsideTextFont:E,positionTitleOutside:N,prerenderTitles:o,layoutAreas:B,attachFxHandlers:C,computeTransform:Y}},{"../../components/color":100,"../../components/drawing":122,"../../components/fx":140,"../../lib":230,"../../lib/svg_text_utils":252,"../../plots/plots":311,"../bar/constants":325,"../bar/uniform_text":339,"./event_data":344,"./helpers":345,"@plotly/d3":11}],350:[function(e,t,r){"use strict";var a=e("@plotly/d3");var i=e("./style_one");var n=e("../bar/uniform_text").resizeText;t.exports=function e(t){var r=t._fullLayout._pielayer.selectAll(".trace");n(t,r,"pie");r.each(function(e){var t=e[0];var r=t.trace;var n=a.select(this);n.style({opacity:r.opacity});n.selectAll("path.surface").each(function(e){a.select(this).call(i,e,r)})})}},{"../bar/uniform_text":339,"./style_one":351,"@plotly/d3":11}],351:[function(e,t,r){"use strict";var s=e("../../components/color");var l=e("./helpers").castOption;t.exports=function e(t,r,n){var a=n.marker.line;var i=l(a.color,r.pts)||s.defaultLine;var o=l(a.width,r.pts)||0;t.style("stroke-width",o).call(s.fill,r.color).call(s.stroke,i)}},{"../../components/color":100,"./helpers":345}],352:[function(e,t,r){"use strict";var s=e("../../lib");t.exports=function e(t,r){for(var n=0;n<t.length;n++)t[n].i=n;s.mergeArray(r.text,t,"tx");s.mergeArray(r.texttemplate,t,"txt");s.mergeArray(r.hovertext,t,"htx");s.mergeArray(r.customdata,t,"data");s.mergeArray(r.textposition,t,"tp");if(r.textfont){s.mergeArrayCastPositive(r.textfont.size,t,"ts");s.mergeArray(r.textfont.color,t,"tc");s.mergeArray(r.textfont.family,t,"tf")}var a=r.marker;if(a){s.mergeArrayCastPositive(a.size,t,"ms");s.mergeArrayCastPositive(a.opacity,t,"mo");s.mergeArray(a.symbol,t,"mx");s.mergeArray(a.color,t,"mc");var i=a.line;if(a.line){s.mergeArray(i.color,t,"mlc");s.mergeArrayCastPositive(i.width,t,"mlw")}var o=a.gradient;if(o&&o.type!=="none"){s.mergeArray(o.type,t,"mgt");s.mergeArray(o.color,t,"mgc")}}}},{"../../lib":230}],353:[function(e,t,r){"use strict";var n=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var a=e("../../plots/template_attributes").texttemplateAttrs;var i=e("../../plots/template_attributes").hovertemplateAttrs;var o=e("../../components/colorscale/attributes");var s=e("../../plots/font_attributes");var l=e("../../components/drawing/attributes").dash;var c=e("../../components/drawing");var u=e("./constants");var f=e("../../lib/extend").extendFlat;function d(e){return{valType:"any",dflt:0,editType:"calc"}}function h(e){return{valType:"any",editType:"calc"}}function p(e){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:true},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:true},dx:{valType:"number",dflt:1,editType:"calc",anim:true},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:true},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:true},dy:{valType:"number",dflt:1,editType:"calc",anim:true},xperiod:d("x"),yperiod:d("y"),xperiod0:h("x0"),yperiod0:h("y0"),xperiodalignment:p("x"),yperiodalignment:p("y"),xhoverformat:n("x"),yhoverformat:n("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:true,editType:"calc"},texttemplate:a({},{}),hovertext:{valType:"string",dflt:"",arrayOk:true,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:i({},{keys:u.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:true},width:{valType:"number",min:0,dflt:2,editType:"style",anim:true},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:f({},l,{editType:"style"}),simplify:{valType:"boolean",dflt:true,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:false,editType:"calc"},cliponaxis:{valType:"boolean",dflt:true,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:true},marker:f({symbol:{valType:"enumerated",values:c.symbolList,dflt:"circle",arrayOk:true,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:true,editType:"style",anim:true},size:{valType:"number",min:0,dflt:6,arrayOk:true,editType:"calc",anim:true},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:f({width:{valType:"number",min:0,arrayOk:true,editType:"style",anim:true},editType:"calc"},o("marker.line",{anim:true})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:true,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:true,editType:"calc"},editType:"calc"},editType:"calc"},o("marker",{anim:true})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:true,editType:"calc"},textfont:s({editType:"calc",colorEditType:"style",arrayOk:true})}},{"../../components/colorscale/attributes":107,"../../components/drawing":122,"../../components/drawing/attributes":121,"../../lib/extend":224,"../../plots/cartesian/axis_format_attributes":279,"../../plots/font_attributes":305,"../../plots/template_attributes":312,"./constants":357}],354:[function(e,t,r){"use strict";var O=e("fast-isnumeric");var P=e("../../lib");var I=e("../../plots/cartesian/axes");var R=e("../../plots/cartesian/align_period");var z=e("../../constants/numerical").BADNUM;var m=e("./subtypes");var N=e("./colorscale_calc");var F=e("./arrays_to_calcdata");var j=e("./calc_selection");function n(e,t){var r=e._fullLayout;var n=I.getFromId(e,t.xaxis||"x");var a=I.getFromId(e,t.yaxis||"y");var i=n.makeCalcdata(t,"x");var o=a.makeCalcdata(t,"y");var s=R(t,n,"x",i);var l=R(t,a,"y",o);var c=t._length;var u=new Array(c);var f=t.ids;var d=V(t,r,n,a);var h=false;var p,v,g,m,_,y;U(r,t);var b="x";var x="y";var w;if(d){P.pushUnique(d.traceIndices,t._expandedIndex);p=d.orientation==="v";if(p){x="s";w="x"}else{b="s";w="y"}_=d.stackgaps==="interpolate"}else{var A=H(t,c);B(e,t,n,a,s,l,A)}var T=!!t.xperiodalignment;var k=!!t.yperiodalignment;for(v=0;v<c;v++){var M=u[v]={};var S=O(s[v]);var C=O(l[v]);if(S&&C){M[b]=s[v];M[x]=l[v];if(T){M.orig_x=i[v]}if(k){M.orig_y=o[v]}}else if(d&&(p?S:C)){M[w]=p?s[v]:l[v];M.gap=true;if(_){M.s=z;h=true}else{M.s=0}}else{M[b]=M[x]=z}if(f){M.id=String(f[v])}}F(u,t);N(e,t);j(u,t);if(d){v=0;while(v<u.length){if(u[v][w]===z){u.splice(v,1)}else v++}P.sort(u,function(e,t){return e[w]-t[w]||e.i-t.i});if(h){v=0;while(v<u.length-1&&u[v].gap){v++}y=u[v].s;if(!y)y=u[v].s=0;for(g=0;g<v;g++){u[g].s=y}m=u.length-1;while(m>v&&u[m].gap){m--}y=u[m].s;for(g=u.length-1;g>m;g--){u[g].s=y}while(v<m){v++;if(u[v].gap){g=v+1;while(u[g].gap){g++}var L=u[v-1][w];var E=u[v-1].s;var D=(u[g].s-E)/(u[g][w]-L);while(v<g){u[v].s=E+(u[v][w]-L)*D;v++}}}}}return u}function B(e,t,r,n,a,i,o){var s=t._length;var l=e._fullLayout;var c=r._id;var u=n._id;var f=l._firstScatter[_(t)]===t.uid;var d=(V(t,l,r,n)||{}).orientation;var h=t.fill;r._minDtick=0;n._minDtick=0;var p={padded:true};var v={padded:true};if(o){p.ppad=v.ppad=o}var g=s<2||a[0]!==a[s-1]||i[0]!==i[s-1];if(g&&(h==="tozerox"||h==="tonextx"&&(f||d==="h"))){p.tozero=true}else if(!(t.error_y||{}).visible&&(h==="tonexty"||h==="tozeroy"||!m.hasMarkers(t)&&!m.hasText(t))){p.padded=false;p.ppad=0}if(g&&(h==="tozeroy"||h==="tonexty"&&(f||d==="v"))){v.tozero=true}else if(h==="tonextx"||h==="tozerox"){v.padded=false}if(c)t._extremes[c]=I.findExtremes(r,a,p);if(u)t._extremes[u]=I.findExtremes(n,i,v)}function H(e,t){if(!m.hasMarkers(e))return;var r=e.marker;var n=1.6*(e.marker.sizeref||1);var a;if(e.marker.sizemode==="area"){a=function(e){return Math.max(Math.sqrt((e||0)/n),3)}}else{a=function(e){return Math.max((e||0)/n,3)}}if(P.isArrayOrTypedArray(r.size)){var i={type:"linear"};I.setConvert(i);var o=i.makeCalcdata(e.marker,"size");var s=new Array(t);for(var l=0;l<t;l++){s[l]=a(o[l])}return s}else{return a(r.size)}}function U(e,t){var r=_(t);var n=e._firstScatter;if(!n[r])n[r]=t.uid}function _(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function V(e,t,r,n){var a=e.stackgroup;if(!a)return;var i=t._scatterStackOpts[r._id+n._id][a];var o=i.orientation==="v"?n:r;if(o.type==="linear"||o.type==="log")return i}t.exports={calc:n,calcMarkerSize:H,calcAxisExpansion:B,setFirstScatter:U,getStackOpts:V}},{"../../constants/numerical":210,"../../lib":230,"../../plots/cartesian/align_period":273,"../../plots/cartesian/axes":276,"./arrays_to_calcdata":352,"./calc_selection":355,"./colorscale_calc":356,"./subtypes":378,"fast-isnumeric":15}],355:[function(e,t,r){"use strict";var n=e("../../lib");t.exports=function e(t,r){if(n.isArrayOrTypedArray(r.selectedpoints)){n.tagSelected(t,r)}}},{"../../lib":230}],356:[function(e,t,r){"use strict";var n=e("../../components/colorscale/helpers").hasColorscale;var a=e("../../components/colorscale/calc");var i=e("./subtypes");t.exports=function e(t,r){if(i.hasLines(r)&&n(r,"line")){a(t,r,{vals:r.line.color,containerStr:"line",cLetter:"c"})}if(i.hasMarkers(r)){if(n(r,"marker")){a(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"})}if(n(r,"marker.line")){a(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"})}}}},{"../../components/colorscale/calc":108,"../../components/colorscale/helpers":111,"./subtypes":378}],357:[function(e,t,r){"use strict";t.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],358:[function(e,t,r){"use strict";var I=e("./calc");t.exports=function e(t,r){var n=r.xaxis;var a=r.yaxis;var i=n._id+a._id;var o=t._fullLayout._scatterStackOpts[i];if(!o)return;var s=t.calcdata;var l,c,u,f,d,h,p,v,g;var m,_,y,b,x;var w;for(var A in o){m=o[A];var T=m.traceIndices;if(!T.length)continue;_=m.stackgaps==="interpolate";y=m.groupnorm;if(m.orientation==="v"){b="x";x="y"}else{b="y";x="x"}w=new Array(T.length);for(l=0;l<w.length;l++){w[l]=false}h=s[T[0]];var k=new Array(h.length);for(l=0;l<h.length;l++){k[l]=h[l][b]}for(l=1;l<T.length;l++){d=s[T[l]];for(c=u=0;c<d.length;c++){p=d[c][b];for(;p>k[u]&&u<k.length;u++){R(d,c,k[u],l,w,_,b);c++}if(p!==k[u]){for(f=0;f<l;f++){R(s[T[f]],u,p,f,w,_,b)}k.splice(u,0,p)}u++}for(;u<k.length;u++){R(d,c,k[u],l,w,_,b);c++}}var M=k.length;for(c=0;c<h.length;c++){v=h[c][x]=h[c].s;for(l=1;l<T.length;l++){d=s[T[l]];d[0].trace._rawLength=d[0].trace._length;d[0].trace._length=M;v+=d[c].s;d[c][x]=v}if(y){g=(y==="fraction"?v:v/100)||1;for(l=0;l<T.length;l++){var S=s[T[l]][c];S[x]/=g;S.sNorm=S.s/g}}}for(l=0;l<T.length;l++){d=s[T[l]];var C=d[0].trace;var L=I.calcMarkerSize(C,C._rawLength);var E=Array.isArray(L);if(L&&w[l]||E){var D=L;L=new Array(M);for(c=0;c<M;c++){L[c]=d[c].gap?0:E?D[d[c].i]:D}}var O=new Array(M);var P=new Array(M);for(c=0;c<M;c++){O[c]=d[c].x;P[c]=d[c].y}I.calcAxisExpansion(t,C,n,a,O,P,L);d[0].t.orientation=m.orientation}}};function R(e,t,r,n,a,i,o){a[n]=true;var s={i:null,gap:true,s:0};s[o]=r;e.splice(t,0,s);if(t&&r===e[t-1][o]){var l=e[t-1];s.s=l.s;s.i=l.i;s.gap=l.gap}else if(i){s.s=c(e,t,r,o)}if(!t){e[0].t=e[1].t;e[0].trace=e[1].trace;delete e[1].t;delete e[1].trace}}function c(e,t,r,n){var a=e[t-1];var i=e[t+1];if(!i)return a.s;if(!a)return i.s;return a.s+(i.s-a.s)*(r-a[n])/(i[n]-a[n])}},{"./calc":354}],359:[function(e,t,r){"use strict";t.exports=function e(t){for(var r=0;r<t.length;r++){var n=t[r];if(n.type!=="scatter")continue;var a=n.fill;if(a==="none"||a==="toself")continue;n.opacity=undefined;if(a==="tonexty"||a==="tonextx"){for(var i=r-1;i>=0;i--){var o=t[i];if(o.type==="scatter"&&o.xaxis===n.xaxis&&o.yaxis===n.yaxis){o.opacity=undefined;break}}}}}},{}],360:[function(e,t,r){"use strict";var h=e("../../lib");var p=e("../../registry");var v=e("./attributes");var g=e("./constants");var m=e("./subtypes");var _=e("./xy_defaults");var y=e("./period_defaults");var b=e("./stack_defaults");var x=e("./marker_defaults");var w=e("./line_defaults");var A=e("./line_shape_defaults");var T=e("./text_defaults");var k=e("./fillcolor_defaults");t.exports=function e(r,n,t,a){function i(e,t){return h.coerce(r,n,v,e,t)}var o=_(r,n,a,i);if(!o)n.visible=false;if(!n.visible)return;y(r,n,a,i);i("xhoverformat");i("yhoverformat");var s=b(r,n,a,i);var l=!s&&o<g.PTS_LINESONLY?"lines+markers":"lines";i("text");i("hovertext");i("mode",l);if(m.hasLines(n)){w(r,n,t,a,i);A(r,n,i);i("connectgaps");i("line.simplify")}if(m.hasMarkers(n)){x(r,n,t,a,i,{gradient:true})}if(m.hasText(n)){i("texttemplate");T(r,n,a,i)}var c=[];if(m.hasMarkers(n)||m.hasText(n)){i("cliponaxis");i("marker.maxdisplayed");c.push("points")}i("fill",s?s.fillDflt:"none");if(n.fill!=="none"){k(r,n,t,i);if(!m.hasLines(n))A(r,n,i)}var u=(n.line||{}).color;var f=(n.marker||{}).color;if(n.fill==="tonext"||n.fill==="toself"){c.push("fills")}i("hoveron",c.join("+")||"points");if(n.hoveron!=="fills")i("hovertemplate");var d=p.getComponentMethod("errorbars","supplyDefaults");d(r,n,u||f||t,{axis:"y"});d(r,n,u||f||t,{axis:"x",inherit:"y"});h.coerceSelectionMarkerOpacity(n,i)}},{"../../lib":230,"../../registry":313,"./attributes":353,"./constants":357,"./fillcolor_defaults":361,"./line_defaults":366,"./line_shape_defaults":368,"./marker_defaults":372,"./period_defaults":373,"./stack_defaults":376,"./subtypes":378,"./text_defaults":379,"./xy_defaults":380}],361:[function(e,t,r){"use strict";var l=e("../../components/color");var c=e("../../lib").isArrayOrTypedArray;t.exports=function e(t,r,n,a){var i=false;if(r.marker){var o=r.marker.color;var s=(r.marker.line||{}).color;if(o&&!c(o)){i=o}else if(s&&!c(s)){i=s}}a("fillcolor",l.addOpacity((r.line||{}).color||i||n,.5))}},{"../../components/color":100,"../../lib":230}],362:[function(e,t,r){"use strict";var l=e("../../plots/cartesian/axes");t.exports=function e(t,r,n){var a={};var i={_fullLayout:n};var o=l.getFromTrace(i,r,"x");var s=l.getFromTrace(i,r,"y");a.xLabel=l.tickText(o,o.c2l(t.x),true).text;a.yLabel=l.tickText(s,s.c2l(t.y),true).text;return a}},{"../../plots/cartesian/axes":276}],363:[function(e,t,r){"use strict";var s=e("../../components/color");var l=e("./subtypes");t.exports=function e(t,r){var n,a;if(t.mode==="lines"){n=t.line.color;return n&&s.opacity(n)?n:t.fillcolor}else if(t.mode==="none"){return t.fill?t.fillcolor:""}else{var i=r.mcc||(t.marker||{}).color;var o=r.mlcc||((t.marker||{}).line||{}).color;a=i&&s.opacity(i)?i:o&&s.opacity(o)&&(r.mlw||((t.marker||{}).line||{}).width)?o:"";if(a){if(s.opacity(a)<.3){return s.addOpacity(a,.3)}else return a}else{n=(t.line||{}).color;return n&&s.opacity(n)&&l.hasLines(t)&&t.line.width?n:t.fillcolor}}}},{"../../components/color":100,"./subtypes":378}],364:[function(e,t,r){"use strict";var q=e("../../lib");var Y=e("../../components/fx");var G=e("../../registry");var W=e("./get_trace_color");var X=e("../../components/color");var Z=q.fillText;t.exports=function e(t,r,n,a){var i=t.cd;var o=i[0].trace;var s=t.xa;var l=t.ya;var c=s.c2p(r);var u=l.c2p(n);var f=[c,u];var d=o.hoveron||"";var h=o.mode.indexOf("markers")!==-1?3:.5;if(d.indexOf("points")!==-1){var p=function(e){var t=Math.max(3,e.mrc||0);var r=1-1/t;var n=Math.abs(s.c2p(e.x)-c);if(e.orig_x!==undefined)n+=s.c2p(e.orig_x)-s.c2p(e.x);return n<t?r*n/t:n-t+r};var v=function(e){var t=Math.max(3,e.mrc||0);var r=1-1/t;var n=Math.abs(l.c2p(e.y)-u);if(e.orig_y!==undefined)n+=l.c2p(e.orig_y)-l.c2p(e.y);return n<t?r*n/t:n-t+r};var g=function(e){var t=Math.max(h,e.mrc||0);var r=s.c2p(e.x)-c;var n=l.c2p(e.y)-u;return Math.max(Math.sqrt(r*r+n*n)-t,1-h/t)};var m=Y.getDistanceFunction(a,p,v,g);Y.getClosest(i,m,t);if(t.index!==false){var _=i[t.index];var y=s.c2p(_.x,true);var b=l.c2p(_.y,true);var x=_.mrc||1;t.index=_.i;var w=i[0].t.orientation;var A=w&&(_.sNorm||_.s);var T=w==="h"?A:_.orig_x!==undefined?_.orig_x:_.x;var k=w==="v"?A:_.orig_y!==undefined?_.orig_y:_.y;q.extendFlat(t,{color:W(o,_),x0:y-x,x1:y+x,xLabelVal:T,y0:b-x,y1:b+x,yLabelVal:k,spikeDistance:g(_),hovertemplate:o.hovertemplate});Z(_,o,t);G.getComponentMethod("errorbars","hoverInfo")(_,o,t);return[t]}}if(d.indexOf("fills")!==-1&&o._polygons){var M=o._polygons;var S=[];var C=false;var L=Infinity;var E=-Infinity;var D=Infinity;var O=-Infinity;var P,I,R,z,N,F,j,B,H;for(P=0;P<M.length;P++){R=M[P];if(R.contains(f)){C=!C;S.push(R);D=Math.min(D,R.ymin);O=Math.max(O,R.ymax)}}if(C){D=Math.max(D,0);O=Math.min(O,l._length);var U=(D+O)/2;for(P=0;P<S.length;P++){z=S[P].pts;for(I=1;I<z.length;I++){B=z[I-1][1];H=z[I][1];if(B>U!==H>=U){F=z[I-1][0];j=z[I][0];if(H-B){N=F+(j-F)*(U-B)/(H-B);L=Math.min(L,N);E=Math.max(E,N)}}}}L=Math.max(L,0);E=Math.min(E,s._length);var V=X.defaultLine;if(X.opacity(o.fillcolor))V=o.fillcolor;else if(X.opacity((o.line||{}).color)){V=o.line.color}q.extendFlat(t,{distance:t.maxHoverDistance,x0:L,x1:E,y0:U,y1:U,color:V,hovertemplate:false});delete t.index;if(o.text&&!Array.isArray(o.text)){t.text=String(o.text)}else t.text=o.name;return[t]}}}},{"../../components/color":100,"../../components/fx":140,"../../lib":230,"../../registry":313,"./get_trace_color":363}],365:[function(e,t,r){"use strict";var n=e("./subtypes");t.exports={hasLines:n.hasLines,hasMarkers:n.hasMarkers,hasText:n.hasText,isBubble:n.isBubble,attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./cross_trace_calc"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot"),colorbar:e("./marker_colorbar"),formatLabels:e("./format_labels"),style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("./select"),animatable:true,moduleType:"trace",name:"scatter",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":290,"./arrays_to_calcdata":352,"./attributes":353,"./calc":354,"./cross_trace_calc":358,"./cross_trace_defaults":359,"./defaults":360,"./format_labels":362,"./hover":364,"./marker_colorbar":371,"./plot":374,"./select":375,"./style":377,"./subtypes":378}],366:[function(e,t,r){"use strict";var c=e("../../lib").isArrayOrTypedArray;var u=e("../../components/colorscale/helpers").hasColorscale;var f=e("../../components/colorscale/defaults");t.exports=function e(t,r,n,a,i,o){var s=(t.marker||{}).color;i("line.color",n);if(u(t,"line")){f(t,r,a,i,{prefix:"line.",cLetter:"c"})}else{var l=(c(s)?false:s)||n;i("line.color",l)}i("line.width");if(!(o||{}).noDash)i("line.dash")}},{"../../components/colorscale/defaults":110,"../../components/colorscale/helpers":111,"../../lib":230}],367:[function(e,t,r){"use strict";var n=e("../../constants/numerical");var ue=n.BADNUM;var a=n.LOG_CLIP;var fe=a+.5;var de=a-.5;var he=e("../../lib");var pe=he.segmentsIntersect;var ve=he.constrain;var ge=e("./constants");t.exports=function e(a,i){var o=i.xaxis;var s=i.yaxis;var l=o.type==="log";var c=s.type==="log";var u=o._length;var f=s._length;var t=i.connectGaps;var d=i.baseTolerance;var r=i.shape;var n=r==="linear";var h=i.fill&&i.fill!=="none";var p=[];var v=ge.minTolerance;var g=a.length;var m=new Array(g);var _=0;var y;var b,x,w,A;var T;var k;var M;var S;var C,L,E,D;var O,P,I;function R(e){var t=a[e];if(!t)return false;var r=i.linearized?o.l2p(t.x):o.c2p(t.x);var n=i.linearized?s.l2p(t.y):s.c2p(t.y);if(r===ue){if(l)r=o.c2p(t.x,true);if(r===ue)return false;if(c&&n===ue){r*=Math.abs(o._m*f*(o._m>0?fe:de)/(s._m*u*(s._m>0?fe:de)))}r*=1e3}if(n===ue){if(c)n=s.c2p(t.y,true);if(n===ue)return false;n*=1e3}return[r,n]}function z(e,t,r,n){var a=r-e;var i=n-t;var o=.5-e;var s=.5-t;var l=a*a+i*i;var c=a*o+i*s;if(c>0&&c<l){var u=o*i-s*a;if(u*u<l)return true}}var N,F;function j(e,t){var r=e[0]/u;var n=e[1]/f;var a=Math.max(0,-r,r-1,-n,n-1);if(a&&N!==undefined&&z(r,n,N,F)){a=0}if(a&&t&&z(r,n,t[0]/u,t[1]/f)){a=0}return(1+ge.toleranceGrowth*a)*d}function B(e,t){var r=e[0]-t[0];var n=e[1]-t[1];return Math.sqrt(r*r+n*n)}var H=ge.maxScreensAway;var U=-u*H;var V=u*(1+H);var q=-f*H;var Y=f*(1+H);var G=[[U,q,V,q],[V,q,V,Y],[V,Y,U,Y],[U,Y,U,q]];var W,X,Z,J,$,Q;function K(e,t){var r=[];var n=0;for(var a=0;a<4;a++){var i=G[a];var o=pe(e[0],e[1],t[0],t[1],i[0],i[1],i[2],i[3]);if(o&&(!n||Math.abs(o.x-r[0][0])>1||Math.abs(o.y-r[0][1])>1)){o=[o.x,o.y];if(n&&B(o,e)<B(r[0],e))r.unshift(o);else r.push(o);n++}}return r}function ee(e){if(e[0]<U||e[0]>V||e[1]<q||e[1]>Y){return[ve(e[0],U,V),ve(e[1],q,Y)]}}function te(e,t){if(e[0]===t[0]&&(e[0]===U||e[0]===V))return true;if(e[1]===t[1]&&(e[1]===q||e[1]===Y))return true}function re(e,t){var r=[];var n=ee(e);var a=ee(t);if(n&&a&&te(n,a))return r;if(n)r.push(n);if(a)r.push(a);return r}function ne(s,l,c){return function(e,t){var r=ee(e);var n=ee(t);var a=[];if(r&&n&&te(r,n))return a;if(r)a.push(r);if(n)a.push(n);var i=2*he.constrain((e[s]+t[s])/2,l,c)-((r||e)[s]+(n||t)[s]);if(i){var o;if(r&&n){o=i>0===r[s]>n[s]?r:n}else o=r||n;o[s]+=i}return a}}var ae;if(r==="linear"||r==="spline"){ae=K}else if(r==="hv"||r==="vh"){ae=re}else if(r==="hvh")ae=ne(0,U,V);else if(r==="vhv")ae=ne(1,q,Y);function ie(e,t){var r=t[0]-e[0];var n=(t[1]-e[1])/r;var a=(e[1]*t[0]-t[1]*e[0])/r;if(a>0)return[n>0?U:V,Y];else return[n>0?V:U,q]}function oe(e){var t=e[0];var r=e[1];var n=t===m[_-1][0];var a=r===m[_-1][1];if(n&&a)return;if(_>1){var i=t===m[_-2][0];var o=r===m[_-2][1];if(n&&(t===U||t===V)&&i){if(o)_--;else m[_-1]=e}else if(a&&(r===q||r===Y)&&o){if(i)_--;else m[_-1]=e}else m[_++]=e}else m[_++]=e}function se(e){if(m[_-1][0]!==e[0]&&m[_-1][1]!==e[1]){oe([Z,J])}oe(e);$=null;Z=J=0}function le(e){N=e[0]/u;F=e[1]/f;W=e[0]<U?U:e[0]>V?V:0;X=e[1]<q?q:e[1]>Y?Y:0;if(W||X){if(!_){m[_++]=[W||e[0],X||e[1]]}else if($){var t=ae($,e);if(t.length>1){se(t[0]);m[_++]=t[1]}}else{Q=ae(m[_-1],e)[0];m[_++]=Q}var r=m[_-1];if(W&&X&&(r[0]!==W||r[1]!==X)){if($){if(Z!==W&&J!==X){if(Z&&J){oe(ie($,e))}else{oe([Z||W,J||X])}}else if(Z&&J){oe([Z,J])}}oe([W,X])}else if(Z-W&&J-X){oe([W||Z,X||J])}$=e;Z=W;J=X}else{if($){se(ae($,e)[0])}m[_++]=e}}for(y=0;y<g;y++){b=R(y);if(!b)continue;_=0;$=null;le(b);for(y++;y<g;y++){w=R(y);if(!w){if(t)continue;else break}if(!n||!i.simplify){le(w);continue}var ce=R(y+1);C=B(w,b);if(!(h&&(_===0||_===g-1))&&C<j(w,ce)*v)continue;M=[(w[0]-b[0])/C,(w[1]-b[1])/C];A=b;L=C;E=O=P=0;k=false;x=w;for(y++;y<a.length;y++){T=ce;ce=R(y+1);if(!T){if(t)continue;else break}S=[T[0]-b[0],T[1]-b[1]];I=S[0]*M[1]-S[1]*M[0];O=Math.min(O,I);P=Math.max(P,I);if(P-O>j(T,ce))break;x=T;D=S[0]*M[0]+S[1]*M[1];if(D>L){L=D;w=T;k=false}else if(D<E){E=D;A=T;k=true}}if(k){le(w);if(x!==A)le(A)}else{if(A!==b)le(A);if(x!==w)le(w)}le(x);if(y>=a.length||!T)break;le(T);b=T}if($)oe([Z||$[0],J||$[1]]);p.push(m.slice(0,_))}return p}},{"../../constants/numerical":210,"../../lib":230,"./constants":357}],368:[function(e,t,r){"use strict";t.exports=function e(t,r,n){var a=n("line.shape");if(a==="spline")n("line.smoothing")}},{}],369:[function(e,t,r){"use strict";var g={tonextx:1,tonexty:1,tonext:1};t.exports=function e(t,r,n){var a,i,o,s,l;var c={};var u=false;var f=-1;var d=0;var h=-1;for(i=0;i<n.length;i++){a=n[i][0].trace;o=a.stackgroup||"";if(o){if(o in c){l=c[o]}else{l=c[o]=d;d++}}else if(a.fill in g&&h>=0){l=h}else{l=h=d;d++}if(l<f)u=true;a._groupIndex=f=l}var p=n.slice();if(u){p.sort(function(e,t){var r=e[0].trace;var n=t[0].trace;return r._groupIndex-n._groupIndex||r.index-n.index})}var v={};for(i=0;i<p.length;i++){a=p[i][0].trace;o=a.stackgroup||"";if(a.visible===true){a._nexttrace=null;if(a.fill in g){s=v[o];a._prevtrace=s||null;if(s){s._nexttrace=a}}a._ownfill=a.fill&&(a.fill.substr(0,6)==="tozero"||a.fill==="toself"||a.fill.substr(0,2)==="to"&&!a._prevtrace);v[o]=a}else{a._prevtrace=a._nexttrace=a._ownfill=null}}return p}},{}],370:[function(e,t,r){"use strict";var o=e("fast-isnumeric");t.exports=function e(t){var r=t.marker;var n=r.sizeref||1;var a=r.sizemin||0;var i=r.sizemode==="area"?function(e){return Math.sqrt(e/n)}:function(e){return e/n};return function(e){var t=i(e/2);return o(t)&&t>0?Math.max(t,a):0}}},{"fast-isnumeric":15}],371:[function(e,t,r){"use strict";t.exports={container:"marker",min:"cmin",max:"cmax"}},{}],372:[function(e,t,r){"use strict";var f=e("../../components/color");var d=e("../../components/colorscale/helpers").hasColorscale;var h=e("../../components/colorscale/defaults");var p=e("./subtypes");t.exports=function e(t,r,n,a,i,o){var s=p.isBubble(t);var l=(t.line||{}).color;var c;o=o||{};if(l)n=l;i("marker.symbol");i("marker.opacity",s?.7:1);i("marker.size");i("marker.color",n);if(d(t,"marker")){h(t,r,a,i,{prefix:"marker.",cLetter:"c"})}if(!o.noSelect){i("selected.marker.color");i("unselected.marker.color");i("selected.marker.size");i("unselected.marker.size")}if(!o.noLine){if(l&&!Array.isArray(l)&&r.marker.color!==l){c=l}else if(s)c=f.background;else c=f.defaultLine;i("marker.line.color",c);if(d(t,"marker.line")){h(t,r,a,i,{prefix:"marker.line.",cLetter:"c"})}i("marker.line.width",s?1:0)}if(s){i("marker.sizeref");i("marker.sizemin");i("marker.sizemode")}if(o.gradient){var u=i("marker.gradient.type");if(u!=="none"){i("marker.gradient.color")}}}},{"../../components/color":100,"../../components/colorscale/defaults":110,"../../components/colorscale/helpers":111,"./subtypes":378}],373:[function(e,t,r){"use strict";var n=e("../../lib").dateTick0;var a=e("../../constants/numerical");var i=a.ONEWEEK;function l(e,t){if(e%i===0){return n(t,1)}return n(t,0)}t.exports=function e(t,r,n,a,i){if(!i){i={x:true,y:true}}if(i.x){var o=a("xperiod");if(o){a("xperiod0",l(o,r.xcalendar));a("xperiodalignment")}}if(i.y){var s=a("yperiod");if(s){a("yperiod0",l(s,r.ycalendar));a("yperiodalignment")}}}},{"../../constants/numerical":210,"../../lib":230}],374:[function(e,t,r){"use strict";var Z=e("@plotly/d3");var J=e("../../registry");var $=e("../../lib");var Q=$.ensureSingle;var K=$.identity;var ee=e("../../components/drawing");var te=e("./subtypes");var re=e("./line_points");var h=e("./link_traces");var ne=e("../../lib/polygon").tester;t.exports=function e(r,n,t,a,i,o){var s,l;var c=!i;var u=!!i&&i.duration>0;var f=h(r,n,t);s=a.selectAll("g.trace").data(f,function(e){return e[0].trace.uid});s.enter().append("g").attr("class",function(e){return"trace scatter trace"+e[0].trace.uid}).style("stroke-miterlimit",2);s.order();p(r,s,n);if(u){if(o){l=o()}var d=Z.transition().duration(i.duration).ease(i.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()});d.each(function(){a.selectAll("g.trace").each(function(e,t){v(r,t,n,e,f,this,i)})})}else{s.each(function(e,t){v(r,t,n,e,f,this,i)})}if(c){s.exit().remove()}a.selectAll("path:not([d])").remove()};function p(i,e,o){e.each(function(e){var t=Q(Z.select(this),"g","fills");ee.setClipUrl(t,o.layerClipId,i);var r=e[0].trace;var n=[];if(r._ownfill)n.push("_ownFill");if(r._nexttrace)n.push("_nextFill");var a=t.selectAll("g").data(n,K);a.enter().append("g");a.exit().each(function(e){r[e]=null}).remove();a.order().each(function(e){r[e]=Q(Z.select(this),"path","js-fill")})})}function v(m,e,_,a,t,r,n){var i;ae(m,e,_,a,t);var y=!!n&&n.duration>0;function b(e){return y?e.transition():e}var x=_.xaxis;var w=_.yaxis;var o=a[0].trace;var s=o.line;var l=Z.select(r);var c=Q(l,"g","errorbars");var u=Q(l,"g","lines");var f=Q(l,"g","points");var d=Q(l,"g","text");J.getComponentMethod("errorbars","plot")(m,c,_,n);if(o.visible!==true)return;b(l).style("opacity",o.opacity);var h,p;var v=o.fill.charAt(o.fill.length-1);if(v!=="x"&&v!=="y")v="";a[0][_.isRangePlot?"nodeRangePlot3":"node3"]=l;var g="";var A=[];var T=o._prevtrace;if(T){g=T._prevRevpath||"";p=T._nextFill;A=T._polygons}var k;var M;var S="";var C="";var L,E,D;var O,P,I,R;var z=[];var N=$.noop;h=o._ownFill;if(te.hasLines(o)||o.fill!=="none"){if(p){p.datum(a)}if(["hv","vh","hvh","vhv"].indexOf(s.shape)!==-1){L=ee.steps(s.shape);E=ee.steps(s.shape.split("").reverse().join(""))}else if(s.shape==="spline"){L=E=function(e){var t=e[e.length-1];if(e.length>1&&e[0][0]===t[0]&&e[0][1]===t[1]){return ee.smoothclosed(e.slice(1),s.smoothing)}else{return ee.smoothopen(e,s.smoothing)}}}else{L=E=function(e){return"M"+e.join("L")}}D=function(e){return E(e.reverse())};z=re(a,{xaxis:x,yaxis:w,connectGaps:o.connectgaps,baseTolerance:Math.max(s.width||1,3)/4,shape:s.shape,simplify:s.simplify,fill:o.fill});R=o._polygons=new Array(z.length);for(i=0;i<z.length;i++){o._polygons[i]=ne(z[i])}if(z.length){O=z[0][0];P=z[z.length-1];I=P[P.length-1]}N=function(n){return function(e){k=L(e);M=D(e);if(!S){S=k;C=M}else if(v){S+="L"+k.substr(1);C=M+("L"+C.substr(1))}else{S+="Z"+k;C=M+"Z"+C}if(te.hasLines(o)&&e.length>1){var t=Z.select(this);t.datum(a);if(n){b(t.style("opacity",0).attr("d",k).call(ee.lineGroupStyle)).style("opacity",1)}else{var r=b(t);r.attr("d",k);ee.singleLineStyle(a,r)}}}}}var F=u.selectAll(".js-line").data(z);b(F.exit()).style("opacity",0).remove();F.each(N(false));F.enter().append("path").classed("js-line",true).style("vector-effect","non-scaling-stroke").call(ee.lineGroupStyle).each(N(true));ee.setClipUrl(F,_.layerClipId,m);function j(e){b(e).attr("d","M0,0Z")}if(z.length){if(h){h.datum(a);if(O&&I){if(v){if(v==="y"){O[1]=I[1]=w.c2p(0,true)}else if(v==="x"){O[0]=I[0]=x.c2p(0,true)}b(h).attr("d","M"+I+"L"+O+"L"+S.substr(1)).call(ee.singleFillStyle)}else{b(h).attr("d",S+"Z").call(ee.singleFillStyle)}}}else if(p){if(o.fill.substr(0,6)==="tonext"&&S&&g){if(o.fill==="tonext"){b(p).attr("d",S+"Z"+g+"Z").call(ee.singleFillStyle)}else{b(p).attr("d",S+"L"+g.substr(1)+"Z").call(ee.singleFillStyle)}o._polygons=o._polygons.concat(A)}else{j(p);o._polygons=null}}o._prevRevpath=C;o._prevPolygons=R}else{if(h)j(h);else if(p)j(p);o._polygons=o._prevRevpath=o._prevPolygons=null}function B(e){return e.filter(function(e){return!e.gap&&e.vis})}function H(e){return e.filter(function(e){return e.vis})}function U(e){return e.filter(function(e){return!e.gap})}function V(e){return e.id}function q(e){if(e.ids){return V}}function Y(){return false}function G(e,t,r){var n,a,i;var o=r[0].trace;var s=te.hasMarkers(o);var l=te.hasText(o);var c=q(o);var u=Y;var f=Y;if(s||l){var d=K;var h=o.stackgroup;var p=h&&m._fullLayout._scatterStackOpts[x._id+w._id][h].stackgaps==="infer zero";if(o.marker.maxdisplayed||o._needsCull){d=p?H:B}else if(h&&!p){d=U}if(s)u=d;if(l)f=d}a=e.selectAll("path.point");n=a.data(u,c);var v=n.enter().append("path").classed("point",true);if(y){v.call(ee.pointStyle,o,m).call(ee.translatePoints,x,w).style("opacity",0).transition().style("opacity",1)}n.order();var g;if(s){g=ee.makePointStyleFns(o)}n.each(function(e){var t=Z.select(this);var r=b(t);i=ee.translatePoint(e,r,x,w);if(i){ee.singlePointStyle(e,r,o,g,m);if(_.layerClipId){ee.hideOutsideRangePoint(e,r,x,w,o.xcalendar,o.ycalendar)}if(o.customdata){t.classed("plotly-customdata",e.data!==null&&e.data!==undefined)}}else{r.remove()}});if(y){n.exit().transition().style("opacity",0).remove()}else{n.exit().remove()}a=t.selectAll("g");n=a.data(f,c);n.enter().append("g").classed("textpoint",true).append("text");n.order();n.each(function(e){var t=Z.select(this);var r=b(t.select("text"));i=ee.translatePoint(e,r,x,w);if(i){if(_.layerClipId){ee.hideOutsideRangePoint(e,t,x,w,o.xcalendar,o.ycalendar)}}else{t.remove()}});n.selectAll("text").call(ee.textPointStyle,o,m).each(function(e){var t=x.c2p(e.x);var r=w.c2p(e.y);Z.select(this).selectAll("tspan.line").each(function(){b(Z.select(this)).attr({x:t,y:r})})});n.exit().remove()}f.datum(a);d.datum(a);G(f,d,a);var W=o.cliponaxis===false;var X=W?null:_.layerClipId;ee.setClipUrl(f,X,m);ee.setClipUrl(d,X,m)}function ae(e,n,t,r,a){var i=t.xaxis;var o=t.yaxis;var s=Z.extent($.simpleMap(i.range,i.r2c));var l=Z.extent($.simpleMap(o.range,o.r2c));var c=r[0].trace;if(!te.hasMarkers(c))return;var u=c.marker.maxdisplayed;if(u===0)return;var f=r.filter(function(e){return e.x>=s[0]&&e.x<=s[1]&&e.y>=l[0]&&e.y<=l[1]});var d=Math.ceil(f.length/u);var h=0;a.forEach(function(e,t){var r=e[0].trace;if(te.hasMarkers(r)&&r.marker.maxdisplayed>0&&t<n){h++}});var p=Math.round(h*d/3+Math.floor(h/3)*d/7.1);r.forEach(function(e){delete e.vis});f.forEach(function(e,t){if(Math.round((t+p)%d)===0)e.vis=true})}},{"../../components/drawing":122,"../../lib":230,"../../lib/polygon":242,"../../registry":313,"./line_points":367,"./link_traces":369,"./subtypes":378,"@plotly/d3":11}],375:[function(e,t,r){"use strict";var h=e("./subtypes");t.exports=function e(t,r){var n=t.cd;var a=t.xaxis;var i=t.yaxis;var o=[];var s=n[0].trace;var l;var c;var u;var f;var d=!h.hasMarkers(s)&&!h.hasText(s);if(d)return[];if(r===false){for(l=0;l<n.length;l++){n[l].selected=0}}else{for(l=0;l<n.length;l++){c=n[l];u=a.c2p(c.x);f=i.c2p(c.y);if(c.i!==null&&r.contains([u,f],false,l,t)){o.push({pointNumber:c.i,x:a.c2d(c.x),y:i.c2d(c.y)});c.selected=1}else{c.selected=0}}}return o}},{"./subtypes":378}],376:[function(e,t,r){"use strict";var y=["orientation","groupnorm","stackgaps"];t.exports=function e(t,r,n,a){var i=n._scatterStackOpts;var o=a("stackgroup");if(o){var s=r.xaxis+r.yaxis;var l=i[s];if(!l)l=i[s]={};var c=l[o];var u=false;if(c){c.traces.push(r)}else{c=l[o]={traceIndices:[],traces:[r]};u=true}var f={orientation:r.x&&!r.y?"h":"v"};for(var d=0;d<y.length;d++){var h=y[d];var p=h+"Found";if(!c[p]){var v=t[h]!==undefined;var g=h==="orientation";if(v||u){c[h]=a(h,f[h]);if(g){c.fillDflt=c[h]==="h"?"tonextx":"tonexty"}if(v){c[p]=true;if(!u){delete c.traces[0][h];if(g){for(var m=0;m<c.traces.length-1;m++){var _=c.traces[m];if(_._input.fill!==_.fill){_.fill=c.fillDflt}}}}}}}}return c}}},{}],377:[function(e,t,r){"use strict";var a=e("@plotly/d3");var i=e("../../components/drawing");var o=e("../../registry");function n(n){var e=a.select(n).selectAll("g.trace.scatter");e.style("opacity",function(e){return e[0].trace.opacity});e.selectAll("g.points").each(function(e){var t=a.select(this);var r=e.trace||e[0].trace;s(t,r,n)});e.selectAll("g.text").each(function(e){var t=a.select(this);var r=e.trace||e[0].trace;l(t,r,n)});e.selectAll("g.trace path.js-line").call(i.lineGroupStyle);e.selectAll("g.trace path.js-fill").call(i.fillGroupStyle);o.getComponentMethod("errorbars","style")(e)}function s(e,t,r){i.pointStyle(e.selectAll("path.point"),t,r)}function l(e,t,r){i.textPointStyle(e.selectAll("text"),t,r)}function c(e,t,r){var n=t[0].trace;if(n.selectedpoints){i.selectedPointStyle(r.selectAll("path.point"),n);i.selectedTextStyle(r.selectAll("text"),n)}else{s(r,n,e);l(r,n,e)}}t.exports={style:n,stylePoints:s,styleText:l,styleOnSelect:c}},{"../../components/drawing":122,"../../registry":313,"@plotly/d3":11}],378:[function(e,t,r){"use strict";var n=e("../../lib");t.exports={hasLines:function(e){return e.visible&&e.mode&&e.mode.indexOf("lines")!==-1},hasMarkers:function(e){return e.visible&&(e.mode&&e.mode.indexOf("markers")!==-1||e.type==="splom")},hasText:function(e){return e.visible&&e.mode&&e.mode.indexOf("text")!==-1},isBubble:function(e){return n.isPlainObject(e.marker)&&n.isArrayOrTypedArray(e.marker.size)}}},{"../../lib":230}],379:[function(e,t,r){"use strict";var i=e("../../lib");t.exports=function(e,t,r,n,a){a=a||{};n("textposition");i.coerceFont(n,"textfont",r.font);if(!a.noSelect){n("selected.textfont.color");n("unselected.textfont.color")}}},{"../../lib":230}],380:[function(e,t,r){"use strict";var u=e("../../lib");var f=e("../../registry");t.exports=function e(t,r,n,a){var i=a("x");var o=a("y");var s;var l=f.getComponentMethod("calendars","handleTraceDefaults");l(t,r,["x","y"],n);if(i){var c=u.minRowLength(i);if(o){s=Math.min(c,u.minRowLength(o))}else{s=c;a("y0");a("dy")}}else{if(!o)return 0;s=u.minRowLength(o);a("x0");a("dx")}r._length=s;return s}},{"../../lib":230,"../../registry":313}],381:[function(e,t,r){"use strict";var f=e("../plots/cartesian/axes");var g=e("../lib");var m=e("../plot_api/plot_schema");var v=e("./helpers").pointsAccessorFunction;var d=e("../constants/numerical").BADNUM;r.moduleType="transform";r.name="aggregate";var _=r.attributes={enabled:{valType:"boolean",dflt:true,editType:"calc"},groups:{valType:"string",strict:true,noBlank:true,arrayOk:true,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:true,editType:"calc"},editType:"calc"},editType:"calc"};var y=_.aggregations;r.supplyDefaults=function(r,e){var n={};var a;function t(e,t){return g.coerce(r,n,_,e,t)}var i=t("enabled");if(!i)return n;var o=m.findArrayAttributes(e);var s={};for(a=0;a<o.length;a++)s[o[a]]=1;var l=t("groups");if(!Array.isArray(l)){if(!s[l]){n.enabled=false;return n}s[l]=0}var c=r.aggregations||[];var u=n.aggregations=new Array(c.length);var f;function d(e,t){return g.coerce(c[a],f,y,e,t)}for(a=0;a<c.length;a++){f={_index:a};var h=d("target");var p=d("func");var v=d("enabled");if(v&&h&&(s[h]||p==="count"&&s[h]===undefined)){if(p==="stddev")d("funcmode");s[h]=0;u[a]=f}else u[a]={enabled:false,_index:a}}for(a=0;a<o.length;a++){if(s[o[a]]){u.push({target:o[a],func:y.func.dflt,enabled:true,_index:-1})}}return n};r.calcTransform=function(e,t,r){if(!r.enabled)return;var n=r.groups;var a=g.getTargetArray(t,{target:n});if(!a)return;var i,o,s,l;var c={};var u={};var f=[];var d=v(t.transforms,r);var h=a.length;if(t._length)h=Math.min(h,t._length);for(i=0;i<h;i++){o=a[i];s=c[o];if(s===undefined){c[o]=f.length;l=[i];f.push(l);u[c[o]]=d(i)}else{f[s].push(i);u[c[o]]=(u[c[o]]||[]).concat(d(i))}}r._indexToPoints=u;var p=r.aggregations;for(i=0;i<p.length;i++){b(e,t,f,p[i])}if(typeof n==="string"){b(e,t,f,{target:n,func:"first",enabled:true})}t._length=f.length};function b(e,t,r,n){if(!n.enabled)return;var a=n.target;var i=g.nestedProperty(t,a);var o=i.get();var s=f.getDataConversions(e,t,a,o);var l=h(n,s);var c=new Array(r.length);for(var u=0;u<r.length;u++){c[u]=l(o,r[u])}i.set(c);if(n.func==="count"){g.pushUnique(t._arrayAttrs,a)}}function h(u,e){var t=u.func;var f=e.d2c;var l=e.c2d;switch(t){case"count":return n;case"first":return a;case"last":return i;case"sum":return function(e,t){var r=0;for(var n=0;n<t.length;n++){var a=f(e[t[n]]);if(a!==d)r+=a}return l(r)};case"avg":return function(e,t){var r=0;var n=0;for(var a=0;a<t.length;a++){var i=f(e[t[a]]);if(i!==d){r+=i;n++}}return n?l(r/n):d};case"min":return function(e,t){var r=Infinity;for(var n=0;n<t.length;n++){var a=f(e[t[n]]);if(a!==d)r=Math.min(r,a)}return r===Infinity?d:l(r)};case"max":return function(e,t){var r=-Infinity;for(var n=0;n<t.length;n++){var a=f(e[t[n]]);if(a!==d)r=Math.max(r,a)}return r===-Infinity?d:l(r)};case"range":return function(e,t){var r=Infinity;var n=-Infinity;for(var a=0;a<t.length;a++){var i=f(e[t[a]]);if(i!==d){r=Math.min(r,i);n=Math.max(n,i)}}return n===-Infinity||r===Infinity?d:l(n-r)};case"change":return function(e,t){var r=f(e[t[0]]);var n=f(e[t[t.length-1]]);return r===d||n===d?d:l(n-r)};case"median":return function(e,t){var r=[];for(var n=0;n<t.length;n++){var a=f(e[t[n]]);if(a!==d)r.push(a)}if(!r.length)return d;r.sort(g.sorterAsc);var i=(r.length-1)/2;return l((r[Math.floor(i)]+r[Math.ceil(i)])/2)};case"mode":return function(e,t){var r={};var n=0;var a=d;for(var i=0;i<t.length;i++){var o=f(e[t[i]]);if(o!==d){var s=r[o]=(r[o]||0)+1;if(s>n){n=s;a=o}}}return n?l(a):d};case"rms":return function(e,t){var r=0;var n=0;for(var a=0;a<t.length;a++){var i=f(e[t[a]]);if(i!==d){r+=i*i;n++}}return n?l(Math.sqrt(r/n)):d};case"stddev":return function(e,t){var r=0;var n=0;var a=1;var i=d;var o;for(o=0;o<t.length&&i===d;o++){i=f(e[t[o]])}if(i===d)return d;for(;o<t.length;o++){var s=f(e[t[o]]);if(s!==d){var l=s-i;r+=l;n+=l*l;a++}}var c=u.funcmode==="sample"?a-1:a;if(!c)return 0;return Math.sqrt((n-r*r/a)/c)}}}function n(e,t){return t.length}function a(e,t){return e[t[0]]}function i(e,t){return e[t[t.length-1]]}},{"../constants/numerical":210,"../lib":230,"../plot_api/plot_schema":264,"../plots/cartesian/axes":276,"./helpers":384}],382:[function(e,t,o){"use strict";var x=e("../lib");var s=e("../registry");var w=e("../plots/cartesian/axes");var A=e("./helpers").pointsAccessorFunction;var r=e("../constants/filter_ops");var u=r.COMPARISON_OPS;var f=r.INTERVAL_OPS;var d=r.SET_OPS;o.moduleType="transform";o.name="filter";o.attributes={enabled:{valType:"boolean",dflt:true,editType:"calc"},target:{valType:"string",strict:true,noBlank:true,arrayOk:true,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(u).concat(f).concat(d),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:false,editType:"calc"},editType:"calc"};o.supplyDefaults=function(r){var n={};function e(e,t){return x.coerce(r,n,o.attributes,e,t)}var t=e("enabled");if(t){var a=e("target");if(x.isArrayOrTypedArray(a)&&a.length===0){n.enabled=false;return n}e("preservegaps");e("operation");e("value");var i=s.getComponentMethod("calendars","handleDefaults");i(r,n,"valuecalendar",null);i(r,n,"targetcalendar",null)}return n};o.calcTransform=function(e,a,t){if(!t.enabled)return;var r=x.getTargetArray(a,t);if(!r)return;var n=t.target;var i=r.length;if(a._length)i=Math.min(i,a._length);var o=t.targetcalendar;var s=a._arrayAttrs;var l=t.preservegaps;if(typeof n==="string"){var c=x.nestedProperty(a,n+"calendar").get();if(c)o=c}var u=w.getDataToCoordFunc(e,a,n,r);var f=T(t,u,o);var d={};var h={};var p=0;function v(e,t){for(var r=0;r<s.length;r++){var n=x.nestedProperty(a,s[r]);e(n,t)}}var g;var m;if(l){g=function(e){d[e.astr]=x.extendDeep([],e.get());e.set(new Array(i))};m=function(e,t){var r=d[e.astr][t];e.get()[t]=r}}else{g=function(e){d[e.astr]=x.extendDeep([],e.get());e.set([])};m=function(e,t){var r=d[e.astr][t];e.get().push(r)}}v(g);var _=A(a.transforms,t);for(var y=0;y<i;y++){var b=f(r[y]);if(b){v(m,y);h[p++]=_(y)}else if(l)p++}t._indexToPoints=h;a._length=p};function T(t,r,n){var a=t.operation;var e=t.value;var i=Array.isArray(e);function o(e){return e.indexOf(a)!==-1}var s=function(e){return r(e,0,t.valuecalendar)};var l=function(e){return r(e,0,n)};var c;if(o(u)){c=i?s(e[0]):s(e)}else if(o(f)){c=i?[s(e[0]),s(e[1])]:[s(e),s(e)]}else if(o(d)){c=i?e.map(s):[s(e)]}switch(a){case"=":return function(e){return l(e)===c};case"!=":return function(e){return l(e)!==c};case"<":return function(e){return l(e)<c};case"<=":return function(e){return l(e)<=c};case">":return function(e){return l(e)>c};case">=":return function(e){return l(e)>=c};case"[]":return function(e){var t=l(e);return t>=c[0]&&t<=c[1]};case"()":return function(e){var t=l(e);return t>c[0]&&t<c[1]};case"[)":return function(e){var t=l(e);return t>=c[0]&&t<c[1]};case"(]":return function(e){var t=l(e);return t>c[0]&&t<=c[1]};case"][":return function(e){var t=l(e);return t<=c[0]||t>=c[1]};case")(":return function(e){var t=l(e);return t<c[0]||t>c[1]};case"](":return function(e){var t=l(e);return t<=c[0]||t>c[1]};case")[":return function(e){var t=l(e);return t<c[0]||t>=c[1]};case"{}":return function(e){return c.indexOf(l(e))!==-1};case"}{":return function(e){return c.indexOf(l(e))===-1}}}},{"../constants/filter_ops":208,"../lib":230,"../plots/cartesian/axes":276,"../registry":313,"./helpers":384}],383:[function(e,t,f){"use strict";var M=e("../lib");var S=e("../plot_api/plot_schema");var C=e("../plots/plots");var L=e("./helpers").pointsAccessorFunction;f.moduleType="transform";f.name="groupby";f.attributes={enabled:{valType:"boolean",dflt:true,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:true},editType:"calc"},editType:"calc"};f.supplyDefaults=function(r,e,t){var n;var a={};function i(e,t){return M.coerce(r,a,f.attributes,e,t)}var o=i("enabled");if(!o)return a;i("groups");i("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var s=r.styles;var l=a.styles=[];if(s){for(n=0;n<s.length;n++){var c=l[n]={};M.coerce(s[n],l[n],f.attributes.styles,"target");var u=M.coerce(s[n],l[n],f.attributes.styles,"value");if(M.isPlainObject(u))c.value=M.extendDeep({},u);else if(u)delete c.value}}return a};f.transform=function(e,t){var r,n,a;var i=[];for(n=0;n<e.length;n++){r=o(e[n],t);for(a=0;a<r.length;a++){i.push(r[a])}}return i};function o(e,t){var r,n,a,i,o,s,l,c,u;var f;var d=t.transform;var h=t.transformIndex;var p=e.transforms[h].groups;var v=L(e.transforms,d);if(!M.isArrayOrTypedArray(p)||p.length===0){return[e]}var g=M.filterUnique(p);var m=new Array(g.length);var _=p.length;var y=S.findArrayAttributes(e);var b=d.styles||[];var x={};for(r=0;r<b.length;r++){x[b[r].target]=b[r].value}if(d.styles){f=M.keyedContainer(d,"styles","target","value.name")}var w={};var A={};for(r=0;r<g.length;r++){s=g[r];w[s]=r;A[s]=0;l=m[r]=M.extendDeepNoArrays({},e);l._group=s;l.transforms[h]._indexToPoints={};var T=null;if(f){T=f.get(s)}if(T||T===""){l.name=T}else{l.name=M.templateString(d.nameformat,{trace:e.name,group:s})}c=l.transforms;l.transforms=[];for(n=0;n<c.length;n++){l.transforms[n]=M.extendDeepNoArrays({},c[n])}for(n=0;n<y.length;n++){M.nestedProperty(l,y[n]).set([])}}for(a=0;a<y.length;a++){i=y[a];for(n=0,u=[];n<g.length;n++){u[n]=M.nestedProperty(m[n],i).get()}o=M.nestedProperty(e,i).get();for(n=0;n<_;n++){u[w[p[n]]].push(o[n])}}for(n=0;n<_;n++){l=m[w[p[n]]];var k=l.transforms[h]._indexToPoints;k[A[p[n]]]=v(n);A[p[n]]++}for(r=0;r<g.length;r++){s=g[r];l=m[r];C.clearExpandedTraceDefaultColors(l);l=M.extendDeepNoArrays(l,x[s]||{})}return m}},{"../lib":230,"../plot_api/plot_schema":264,"../plots/plots":311,"./helpers":384}],384:[function(e,t,r){"use strict";r.pointsAccessorFunction=function(e,t){var r;var n;for(var a=0;a<e.length;a++){r=e[a];if(r===t)break;if(!r._indexToPoints||r.enabled===false)continue;n=r._indexToPoints}var i=n?function(e){return n[e]}:function(e){return[e]};return i}},{}],385:[function(e,t,a){"use strict";var g=e("../lib");var m=e("../plots/cartesian/axes");var _=e("./helpers").pointsAccessorFunction;var i=e("../constants/numerical").BADNUM;a.moduleType="transform";a.name="sort";a.attributes={enabled:{valType:"boolean",dflt:true,editType:"calc"},target:{valType:"string",strict:true,noBlank:true,arrayOk:true,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"};a.supplyDefaults=function(r){var n={};function e(e,t){return g.coerce(r,n,a.attributes,e,t)}var t=e("enabled");if(t){e("target");e("order")}return n};a.calcTransform=function(e,t,r){if(!r.enabled)return;var n=g.getTargetArray(t,r);if(!n)return;var a=r.target;var i=n.length;if(t._length)i=Math.min(i,t._length);var o=t._arrayAttrs;var s=m.getDataToCoordFunc(e,t,a,n);var l=y(r,n,s,i);var c=_(t.transforms,r);var u={};var f,d;for(f=0;f<o.length;f++){var h=g.nestedProperty(t,o[f]);var p=h.get();var v=new Array(i);for(d=0;d<i;d++){v[d]=p[l[d]]}h.set(v)}for(d=0;d<i;d++){u[d]=c(l[d])}r._indexToPoints=u;t._length=i};function y(e,t,r,n){var a=new Array(n);var i=new Array(n);var o;for(o=0;o<n;o++){a[o]={v:t[o],i:o}}a.sort(s(e,r));for(o=0;o<n;o++){i[o]=a[o].i}return i}function s(e,a){switch(e.order){case"ascending":return function(e,t){var r=a(e.v);var n=a(t.v);if(r===i){return 1}if(n===i){return-1}return r-n};case"descending":return function(e,t){var r=a(e.v);var n=a(t.v);if(r===i){return 1}if(n===i){return-1}return n-r}}}},{"../constants/numerical":210,"../lib":230,"../plots/cartesian/axes":276,"./helpers":384}],386:[function(e,t,r){"use strict";r.version="2.2.0"},{}]},{},[8])(8)});(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.Plotly=e()}})(function(){var nc,e,t;return function(){function u(i,o,s){function l(r,e){if(!o[r]){if(!i[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(c)return c(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var a=o[r]={exports:{}};i[r][0].call(a.exports,function(e){var t=i[r][1][e];return l(t||e)},a,a.exports,u,i,o,s)}return o[r].exports}for(var c="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}return u}()({1:[function(e,t,r){"use strict";var n=e("../src/lib");var a={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var i in a){var o=i.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");n.addStyleRule(o,a[i])}},{"../src/lib":285}],2:[function(e,t,r){"use strict";t.exports=e("../src/transforms/aggregate")},{"../src/transforms/aggregate":541}],3:[function(e,t,r){"use strict";t.exports=e("../src/traces/bar")},{"../src/traces/bar":391}],4:[function(e,t,r){"use strict";t.exports=e("../src/traces/box")},{"../src/traces/box":406}],5:[function(e,t,r){"use strict";t.exports=e("../src/components/calendars")},{"../src/components/calendars":153}],6:[function(e,t,r){"use strict";t.exports=e("../src/traces/contour")},{"../src/traces/contour":426}],7:[function(e,t,r){"use strict";t.exports=e("../src/core")},{"../src/core":267}],8:[function(e,t,r){"use strict";t.exports=e("../src/transforms/filter")},{"../src/transforms/filter":542}],9:[function(e,t,r){"use strict";t.exports=e("../src/transforms/groupby")},{"../src/transforms/groupby":543}],10:[function(e,t,r){"use strict";t.exports=e("../src/traces/heatmap")},{"../src/traces/heatmap":442}],11:[function(e,t,r){"use strict";t.exports=e("../src/traces/histogram")},{"../src/traces/histogram":460}],12:[function(e,t,r){"use strict";t.exports=e("../src/traces/histogram2d")},{"../src/traces/histogram2d":466}],13:[function(e,t,r){"use strict";t.exports=e("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":470}],14:[function(e,t,r){"use strict";t.exports=e("../src/traces/image")},{"../src/traces/image":478}],15:[function(e,t,r){"use strict";var n=e("./core");n.register([e("./bar"),e("./box"),e("./heatmap"),e("./histogram"),e("./histogram2d"),e("./histogram2dcontour"),e("./contour"),e("./scatterternary"),e("./violin"),e("./image"),e("./pie"),e("./aggregate"),e("./filter"),e("./groupby"),e("./sort"),e("./calendars")]);t.exports=n},{"./aggregate":2,"./bar":3,"./box":4,"./calendars":5,"./contour":6,"./core":7,"./filter":8,"./groupby":9,"./heatmap":10,"./histogram":11,"./histogram2d":12,"./histogram2dcontour":13,"./image":14,"./pie":16,"./scatterternary":17,"./sort":18,"./violin":19}],16:[function(e,t,r){"use strict";t.exports=e("../src/traces/pie")},{"../src/traces/pie":487}],17:[function(e,t,r){"use strict";t.exports=e("../src/traces/scatterternary")},{"../src/traces/scatterternary":528}],18:[function(e,t,r){"use strict";t.exports=e("../src/transforms/sort")},{"../src/transforms/sort":545}],19:[function(e,t,r){"use strict";t.exports=e("../src/traces/violin")},{"../src/traces/violin":536}],20:[function(e,rc,t){!function(){var I={version:"3.6.1"};var a=[].slice,f=function(e){return a.call(e)};var R=this.document;function s(e){return e&&(e.ownerDocument||e.document||e).documentElement}function z(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(R){try{f(R.documentElement.childNodes)[0].nodeType}catch(e){f=function(e){var t=e.length,r=new Array(t);while(t--)r[t]=e[t];return r}}}if(!Date.now)Date.now=function(){return+new Date};if(R){try{R.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var t=this.Element.prototype,r=t.setAttribute,n=t.setAttributeNS,i=this.CSSStyleDeclaration.prototype,o=i.setProperty;t.setAttribute=function(e,t){r.call(this,e,t+"")};t.setAttributeNS=function(e,t,r){n.call(this,e,t,r+"")};i.setProperty=function(e,t,r){o.call(this,e,t+"",r)}}}I.ascending=l;function l(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}I.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};I.min=function(e,t){var r=-1,n=e.length,a,i;if(arguments.length===1){while(++r<n)if((i=e[r])!=null&&i>=i){a=i;break}while(++r<n)if((i=e[r])!=null&&a>i)a=i}else{while(++r<n)if((i=t.call(e,e[r],r))!=null&&i>=i){a=i;break}while(++r<n)if((i=t.call(e,e[r],r))!=null&&a>i)a=i}return a};I.max=function(e,t){var r=-1,n=e.length,a,i;if(arguments.length===1){while(++r<n)if((i=e[r])!=null&&i>=i){a=i;break}while(++r<n)if((i=e[r])!=null&&i>a)a=i}else{while(++r<n)if((i=t.call(e,e[r],r))!=null&&i>=i){a=i;break}while(++r<n)if((i=t.call(e,e[r],r))!=null&&i>a)a=i}return a};I.extent=function(e,t){var r=-1,n=e.length,a,i,o;if(arguments.length===1){while(++r<n)if((i=e[r])!=null&&i>=i){a=o=i;break}while(++r<n)if((i=e[r])!=null){if(a>i)a=i;if(o<i)o=i}}else{while(++r<n)if((i=t.call(e,e[r],r))!=null&&i>=i){a=o=i;break}while(++r<n)if((i=t.call(e,e[r],r))!=null){if(a>i)a=i;if(o<i)o=i}}return[a,o]};function c(e){return e===null?NaN:+e}function u(e){return!isNaN(e)}I.sum=function(e,t){var r=0,n=e.length,a,i=-1;if(arguments.length===1){while(++i<n)if(u(a=+e[i]))r+=a}else{while(++i<n)if(u(a=+t.call(e,e[i],i)))r+=a}return r};I.mean=function(e,t){var r=0,n=e.length,a,i=-1,o=n;if(arguments.length===1){while(++i<n)if(u(a=c(e[i])))r+=a;else--o}else{while(++i<n)if(u(a=c(t.call(e,e[i],i))))r+=a;else--o}if(o)return r/o};I.quantile=function(e,t){var r=(e.length-1)*t+1,n=Math.floor(r),a=+e[n-1],i=r-n;return i?a+i*(e[n]-a):a};I.median=function(e,t){var r=[],n=e.length,a,i=-1;if(arguments.length===1){while(++i<n)if(u(a=c(e[i])))r.push(a)}else{while(++i<n)if(u(a=c(t.call(e,e[i],i))))r.push(a)}if(r.length)return I.quantile(r.sort(l),.5)};I.variance=function(e,t){var r=e.length,n=0,a,i,o=0,s=-1,l=0;if(arguments.length===1){while(++s<r){if(u(a=c(e[s]))){i=a-n;n+=i/++l;o+=i*(a-n)}}}else{while(++s<r){if(u(a=c(t.call(e,e[s],s)))){i=a-n;n+=i/++l;o+=i*(a-n)}}}if(l>1)return o/(l-1)};I.deviation=function(){var e=I.variance.apply(this,arguments);return e?Math.sqrt(e):e};function e(i){return{left:function(e,t,r,n){if(arguments.length<3)r=0;if(arguments.length<4)n=e.length;while(r<n){var a=r+n>>>1;if(i(e[a],t)<0)r=a+1;else n=a}return r},right:function(e,t,r,n){if(arguments.length<3)r=0;if(arguments.length<4)n=e.length;while(r<n){var a=r+n>>>1;if(i(e[a],t)>0)n=a;else r=a+1}return r}}}var d=e(l);I.bisectLeft=d.left;I.bisect=I.bisectRight=d.right;I.bisector=function(r){return e(r.length===1?function(e,t){return l(r(e),t)}:r)};I.shuffle=function(e,t,r){if((n=arguments.length)<3){r=e.length;if(n<2)t=0}var n=r-t,a,i;while(n){i=Math.random()*n--|0;a=e[n+t],e[n+t]=e[i+t],e[i+t]=a}return e};I.permute=function(e,t){var r=t.length,n=new Array(r);while(r--)n[r]=e[t[r]];return n};I.pairs=function(e){var t=0,r=e.length-1,n,a=e[0],i=new Array(r<0?0:r);while(t<r)i[t]=[n=a,a=e[++t]];return i};I.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,r=I.min(e,h),n=new Array(r);++t<r;){for(var a=-1,i,o=n[t]=new Array(i);++a<i;){o[a]=e[a][t]}}return n};function h(e){return e.length}I.zip=function(){return I.transpose(arguments)};I.keys=function(e){var t=[];for(var r in e)t.push(r);return t};I.values=function(e){var t=[];for(var r in e)t.push(e[r]);return t};I.entries=function(e){var t=[];for(var r in e)t.push({key:r,value:e[r]});return t};I.merge=function(e){var t=e.length,r,n=-1,a=0,i,o;while(++n<t)a+=e[n].length;i=new Array(a);while(--t>=0){o=e[t];r=o.length;while(--r>=0){i[--a]=o[r]}}return i};var P=Math.abs;I.range=function(e,t,r){if(arguments.length<3){r=1;if(arguments.length<2){t=e;e=0}}if((t-e)/r===Infinity)throw new Error("infinite range");var n=[],a=p(P(r)),i=-1,o;e*=a,t*=a,r*=a;if(r<0)while((o=e+r*++i)>t)n.push(o/a);else while((o=e+r*++i)<t)n.push(o/a);return n};function p(e){var t=1;while(e*t%1)t*=10;return t}function v(e,t){for(var r in t){Object.defineProperty(e.prototype,r,{value:t[r],enumerable:false})}}I.map=function(e,t){var r=new _;if(e instanceof _){e.forEach(function(e,t){r.set(e,t)})}else if(Array.isArray(e)){var n=-1,a=e.length,i;if(arguments.length===1)while(++n<a)r.set(n,e[n]);else while(++n<a)r.set(t.call(e,i=e[n],n),i)}else{for(var o in e)r.set(o,e[o])}return r};function _(){this._=Object.create(null)}var g="__proto__",m="\0";v(_,{has:x,get:function(e){return this._[y(e)]},set:function(e,t){return this._[y(e)]=t},remove:w,keys:A,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:b(t),value:this._[t]});return e},size:T,empty:k,forEach:function(e){for(var t in this._)e.call(this,b(t),this._[t])}});function y(e){return(e+="")===g||e[0]===m?m+e:e}function b(e){return(e+="")[0]===m?e.slice(1):e}function x(e){return y(e)in this._}function w(e){return(e=y(e))in this._&&delete this._[e]}function A(){var e=[];for(var t in this._)e.push(b(t));return e}function T(){var e=0;for(var t in this._)++e;return e}function k(){for(var e in this._)return false;return true}I.nest=function(){var f={},d=[],t=[],h,p;function v(r,e,n){if(n>=d.length)return p?p.call(f,e):h?e.sort(h):e;var t=-1,a=e.length,i=d[n++],o,s,l,c=new _,u;while(++t<a){if(u=c.get(o=i(s=e[t]))){u.push(s)}else{c.set(o,[s])}}if(r){s=r();l=function(e,t){s.set(e,v(r,t,n))}}else{s={};l=function(e,t){s[e]=v(r,t,n)}}c.forEach(l);return s}function i(e,r){if(r>=d.length)return e;var n=[],a=t[r++];e.forEach(function(e,t){n.push({key:e,values:i(t,r)})});return a?n.sort(function(e,t){return a(e.key,t.key)}):n}f.map=function(e,t){return v(t,e,0)};f.entries=function(e){return i(v(I.map,e,0),0)};f.key=function(e){d.push(e);return f};f.sortKeys=function(e){t[d.length-1]=e;return f};f.sortValues=function(e){h=e;return f};f.rollup=function(e){p=e;return f};return f};I.set=function(e){var t=new M;if(e)for(var r=0,n=e.length;r<n;++r)t.add(e[r]);return t};function M(){this._=Object.create(null)}v(M,{has:x,add:function(e){this._[y(e+="")]=true;return e},remove:w,values:A,size:T,empty:k,forEach:function(e){for(var t in this._)e.call(this,b(t))}});I.behavior={};function N(e){return e}I.rebind=function(e,t){var r=1,n=arguments.length,a;while(++r<n)e[a=arguments[r]]=S(e,t,t[a]);return e};function S(t,r,n){return function(){var e=n.apply(r,arguments);return e===r?t:e}}function C(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var r=0,n=L.length;r<n;++r){var a=L[r]+t;if(a in e)return a}}var L=["webkit","ms","moz","Moz","o","O"];function E(){}I.dispatch=function(){var e=new D,t=-1,r=arguments.length;while(++t<r)e[arguments[t]]=O(e);return e};function D(){}D.prototype.on=function(e,t){var r=e.indexOf("."),n="";if(r>=0){n=e.slice(r+1);e=e.slice(0,r)}if(e)return arguments.length<2?this[e].on(n):this[e].on(n,t);if(arguments.length===2){if(t==null)for(e in this){if(this.hasOwnProperty(e))this[e].on(n,null)}return this}};function O(a){var i=[],o=new _;function e(){var e=i,t=-1,r=e.length,n;while(++t<r)if(n=e[t].on)n.apply(this,arguments);return a}e.on=function(e,t){var r=o.get(e),n;if(arguments.length<2)return r&&r.on;if(r){r.on=null;i=i.slice(0,n=i.indexOf(r)).concat(i.slice(n+1));o.remove(e)}if(t)i.push(o.set(e,{on:t}));return a};return e}I.event=null;function F(){I.event.preventDefault()}function j(){var e=I.event,t;while(t=e.sourceEvent)e=t;return e}function B(a){var i=new D,e=0,t=arguments.length;while(++e<t)i[arguments[e]]=O(i);i.of=function(r,n){return function(e){try{var t=e.sourceEvent=I.event;e.target=a;I.event=e;i[e.type].apply(r,n)}finally{I.event=t}}};return i}I.requote=function(e){return e.replace(H,"\\$&")};var H=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var U={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)e[r]=t[r]};function V(e){U(e,W);return e}var q=function(e,t){return t.querySelector(e)},Y=function(e,t){return t.querySelectorAll(e)},G=function(e,t){var r=e.matches||e[C(e,"matchesSelector")];G=function(e,t){return r.call(e,t)};return G(e,t)};if(typeof Sizzle==="function"){q=function(e,t){return Sizzle(e,t)[0]||null};Y=Sizzle;G=Sizzle.matchesSelector}I.selection=function(){return I.select(R.documentElement)};var W=I.selection.prototype=[];W.select=function(e){var t=[],r,n,a,i;e=X(e);for(var o=-1,s=this.length;++o<s;){t.push(r=[]);r.parentNode=(a=this[o]).parentNode;for(var l=-1,c=a.length;++l<c;){if(i=a[l]){r.push(n=e.call(i,i.__data__,l,o));if(n&&"__data__"in i)n.__data__=i.__data__}else{r.push(null)}}}return V(t)};function X(e){return typeof e==="function"?e:function(){return q(e,this)}}W.selectAll=function(e){var t=[],r,n;e=Z(e);for(var a=-1,i=this.length;++a<i;){for(var o=this[a],s=-1,l=o.length;++s<l;){if(n=o[s]){t.push(r=f(e.call(n,n.__data__,s,a)));r.parentNode=n}}}return V(t)};function Z(e){return typeof e==="function"?e:function(){return Y(e,this)}}var J="http://www.w3.org/1999/xhtml";var $={svg:"http://www.w3.org/2000/svg",xhtml:J,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};I.ns={prefix:$,qualify:function(e){var t=e.indexOf(":"),r=e;if(t>=0&&(r=e.slice(0,t))!=="xmlns")e=e.slice(t+1);return $.hasOwnProperty(r)?{space:$[r],local:e}:e}};W.attr=function(e,t){if(arguments.length<2){if(typeof e==="string"){var r=this.node();e=I.ns.qualify(e);return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}for(t in e)this.each(Q(t,e[t]));return this}return this.each(Q(e,t))};function Q(t,r){t=I.ns.qualify(t);function e(){this.removeAttribute(t)}function n(){this.removeAttributeNS(t.space,t.local)}function a(){this.setAttribute(t,r)}function i(){this.setAttributeNS(t.space,t.local,r)}function o(){var e=r.apply(this,arguments);if(e==null)this.removeAttribute(t);else this.setAttribute(t,e)}function s(){var e=r.apply(this,arguments);if(e==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,e)}return r==null?t.local?n:e:typeof r==="function"?t.local?s:o:t.local?i:a}function K(e){return e.trim().replace(/\s+/g," ")}W.classed=function(e,t){if(arguments.length<2){if(typeof e==="string"){var r=this.node(),n=(e=te(e)).length,a=-1;if(t=r.classList){while(++a<n)if(!t.contains(e[a]))return false}else{t=r.getAttribute("class");while(++a<n)if(!ee(e[a]).test(t))return false}return true}for(t in e)this.each(re(t,e[t]));return this}return this.each(re(e,t))};function ee(e){return new RegExp("(?:^|\\s+)"+I.requote(e)+"(?:\\s+|$)","g")}function te(e){return(e+"").trim().split(/^|\s+/)}function re(r,n){r=te(r).map(ne);var a=r.length;function e(){var e=-1;while(++e<a)r[e](this,n)}function t(){var e=-1,t=n.apply(this,arguments);while(++e<a)r[e](this,t)}return typeof n==="function"?t:e}function ne(n){var a=ee(n);return function(e,t){if(r=e.classList)return t?r.add(n):r.remove(n);var r=e.getAttribute("class")||"";if(t){a.lastIndex=0;if(!a.test(r))e.setAttribute("class",K(r+" "+n))}else{e.setAttribute("class",K(r.replace(a," ")))}}}W.style=function(e,t,r){var n=arguments.length;if(n<3){if(typeof e!=="string"){if(n<2)t="";for(r in e)this.each(ae(r,e[r],t));return this}if(n<2){var a=this.node();return z(a).getComputedStyle(a,null).getPropertyValue(e)}r=""}return this.each(ae(e,t,r))};function ae(t,r,n){function e(){this.style.removeProperty(t)}function a(){this.style.setProperty(t,r,n)}function i(){var e=r.apply(this,arguments);if(e==null)this.style.removeProperty(t);else this.style.setProperty(t,e,n)}return r==null?e:typeof r==="function"?i:a}W.property=function(e,t){if(arguments.length<2){if(typeof e==="string")return this.node()[e];for(t in e)this.each(ie(t,e[t]));return this}return this.each(ie(e,t))};function ie(t,r){function e(){delete this[t]}function n(){this[t]=r}function a(){var e=r.apply(this,arguments);if(e==null)delete this[t];else this[t]=e}return r==null?e:typeof r==="function"?a:n}W.text=function(t){return arguments.length?this.each(typeof t==="function"?function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}:t==null?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent};W.html=function(t){return arguments.length?this.each(typeof t==="function"?function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}:t==null?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML};W.append=function(e){e=oe(e);return this.select(function(){return this.appendChild(e.apply(this,arguments))})};function oe(r){function e(){var e=this.ownerDocument,t=this.namespaceURI;return t===J&&e.documentElement.namespaceURI===J?e.createElement(r):e.createElementNS(t,r)}function t(){return this.ownerDocument.createElementNS(r.space,r.local)}return typeof r==="function"?r:(r=I.ns.qualify(r)).local?t:e}W.insert=function(e,t){e=oe(e);t=X(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})};W.remove=function(){return this.each(se)};function se(){var e=this.parentNode;if(e)e.removeChild(this)}W.data=function(e,p){var t=-1,r=this.length,n,a;if(!arguments.length){e=new Array(r=(n=this[0]).length);while(++t<r){if(a=n[t]){e[t]=a.__data__}}return e}function i(e,t){var r,n=e.length,a=t.length,i=Math.min(n,a),o=new Array(a),s=new Array(a),l=new Array(n),c,u;if(p){var f=new _,d=new Array(n),h;for(r=-1;++r<n;){if(c=e[r]){if(f.has(h=p.call(c,c.__data__,r))){l[r]=c}else{f.set(h,c)}d[r]=h}}for(r=-1;++r<a;){if(!(c=f.get(h=p.call(t,u=t[r],r)))){s[r]=le(u)}else if(c!==true){o[r]=c;c.__data__=u}f.set(h,true)}for(r=-1;++r<n;){if(r in d&&f.get(d[r])!==true){l[r]=e[r]}}}else{for(r=-1;++r<i;){c=e[r];u=t[r];if(c){c.__data__=u;o[r]=c}else{s[r]=le(u)}}for(;r<a;++r){s[r]=le(t[r])}for(;r<n;++r){l[r]=e[r]}}s.update=o;s.parentNode=o.parentNode=l.parentNode=e.parentNode;v.push(s);g.push(o);m.push(l)}var v=de([]),g=V([]),m=V([]);if(typeof e==="function"){while(++t<r){i(n=this[t],e.call(n,n.parentNode.__data__,t))}}else{while(++t<r){i(n=this[t],e)}}g.enter=function(){return v};g.exit=function(){return m};return g};function le(e){return{__data__:e}}W.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")};W.filter=function(e){var t=[],r,n,a;if(typeof e!=="function")e=ce(e);for(var i=0,o=this.length;i<o;i++){t.push(r=[]);r.parentNode=(n=this[i]).parentNode;for(var s=0,l=n.length;s<l;s++){if((a=n[s])&&e.call(a,a.__data__,s,i)){r.push(a)}}}return V(t)};function ce(e){return function(){return G(this,e)}}W.order=function(){for(var e=-1,t=this.length;++e<t;){for(var r=this[e],n=r.length-1,a=r[n],i;--n>=0;){if(i=r[n]){if(a&&a!==i.nextSibling)a.parentNode.insertBefore(i,a);a=i}}}return this};W.sort=function(e){e=ue.apply(this,arguments);for(var t=-1,r=this.length;++t<r;)this[t].sort(e);return this.order()};function ue(r){if(!arguments.length)r=l;return function(e,t){return e&&t?r(e.__data__,t.__data__):!e-!t}}W.each=function(n){return fe(this,function(e,t,r){n.call(e,e.__data__,t,r)})};function fe(e,t){for(var r=0,n=e.length;r<n;r++){for(var a=e[r],i=0,o=a.length,s;i<o;i++){if(s=a[i])t(s,i,r)}}return e}W.call=function(e){var t=f(arguments);e.apply(t[0]=this,t);return this};W.empty=function(){return!this.node()};W.node=function(){for(var e=0,t=this.length;e<t;e++){for(var r=this[e],n=0,a=r.length;n<a;n++){var i=r[n];if(i)return i}}return null};W.size=function(){var e=0;fe(this,function(){++e});return e};function de(e){U(e,he);return e}var he=[];I.selection.enter=de;I.selection.enter.prototype=he;he.append=W.append;he.empty=W.empty;he.node=W.node;he.call=W.call;he.size=W.size;he.select=function(e){var t=[],r,n,a,i,o;for(var s=-1,l=this.length;++s<l;){a=(i=this[s]).update;t.push(r=[]);r.parentNode=i.parentNode;for(var c=-1,u=i.length;++c<u;){if(o=i[c]){r.push(a[c]=n=e.call(i.parentNode,o.__data__,c,s));n.__data__=o.__data__}else{r.push(null)}}}return V(t)};he.insert=function(e,t){if(arguments.length<2)t=pe(this);return W.insert.call(this,e,t)};function pe(o){var s,l;return function(e,t,r){var n=o[r].update,a=n.length,i;if(r!=l)l=r,s=0;if(t>=s)s=t+1;while(!(i=n[s])&&++s<a);return i}}I.select=function(e){var t;if(typeof e==="string"){t=[q(e,R)];t.parentNode=R.documentElement}else{t=[e];t.parentNode=s(e)}return V([t])};I.selectAll=function(e){var t;if(typeof e==="string"){t=f(Y(e,R));t.parentNode=R.documentElement}else{t=f(e);t.parentNode=null}return V([t])};W.on=function(e,t,r){var n=arguments.length;if(n<3){if(typeof e!=="string"){if(n<2)t=false;for(r in e)this.each(ve(r,e[r],t));return this}if(n<2)return(n=this.node()["__on"+e])&&n._;r=false}return this.each(ve(e,t,r))};function ve(a,t,r){var n="__on"+a,e=a.indexOf("."),i=me;if(e>0)a=a.slice(0,e);var o=ge.get(a);if(o)a=o,i=_e;function s(){var e=this[n];if(e){this.removeEventListener(a,e,e.$);delete this[n]}}function l(){var e=i(t,f(arguments));s.call(this);this.addEventListener(a,this[n]=e,e.$=r);e._=t}function c(){var e=new RegExp("^__on([^.]+)"+I.requote(a)+"$"),t;for(var r in this){if(t=r.match(e)){var n=this[r];this.removeEventListener(t[1],n,n.$);delete this[r]}}}return e?t?l:s:t?E:c}var ge=I.map({mouseenter:"mouseover",mouseleave:"mouseout"});if(R){ge.forEach(function(e){if("on"+e in R)ge.remove(e)})}function me(r,n){return function(e){var t=I.event;I.event=e;n[0]=this.__data__;try{r.apply(this,n)}finally{I.event=t}}}function _e(e,t){var n=me(e,t);return function(e){var t=this,r=e.relatedTarget;if(!r||r!==t&&!(r.compareDocumentPosition(t)&8)){n.call(t,e)}}}var ye,be=0;function xe(e){var r=".dragsuppress-"+ ++be,n="click"+r,a=I.select(z(e)).on("touchmove"+r,F).on("dragstart"+r,F).on("selectstart"+r,F);if(ye==null){ye="onselectstart"in e?false:C(e.style,"userSelect")}if(ye){var i=s(e).style,o=i[ye];i[ye]="none"}return function(e){a.on(r,null);if(ye)i[ye]=o;if(e){var t=function(){a.on(n,null)};a.on(n,function(){F();t()},true);setTimeout(t,0)}}}I.mouse=function(e){return Ae(e,j())};var we=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ae(e,t){if(t.changedTouches)t=t.changedTouches[0];var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();if(we<0){var a=z(e);if(a.scrollX||a.scrollY){r=I.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=r[0][0].getScreenCTM();we=!(i.f||i.e);r.remove()}}if(we)n.x=t.pageX,n.y=t.pageY;else n.x=t.clientX,n.y=t.clientY;n=n.matrixTransform(e.getScreenCTM().inverse());return[n.x,n.y]}var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}I.touch=function(e,t,r){if(arguments.length<3)r=t,t=j().changedTouches;if(t)for(var n=0,a=t.length,i;n<a;++n){if((i=t[n]).identifier===r){return Ae(e,i)}}};I.behavior.drag=function(){var _=B(r,"drag","dragstart","dragend"),y=null,e=n(E,I.mouse,z,"mousemove","mouseup"),t=n(Te,I.touch,N,"touchmove","touchend");function r(){this.on("mousedown.drag",e).on("touchstart.drag",t)}function n(h,p,v,g,m){return function(){var e=this,t=I.event.target.correspondingElement||I.event.target,n=e.parentNode,a=_.of(e,arguments),i=0,o=h(),r=".drag"+(o==null?"":"-"+o),s,l=I.select(v(t)).on(g+r,f).on(m+r,d),c=xe(t),u=p(n,o);if(y){s=y.apply(e,arguments);s=[s.x-u[0],s.y-u[1]]}else{s=[0,0]}a({type:"dragstart"});function f(){var e=p(n,o),t,r;if(!e)return;t=e[0]-u[0];r=e[1]-u[1];i|=t|r;u=e;a({type:"drag",x:e[0]+s[0],y:e[1]+s[1],dx:t,dy:r})}function d(){if(!p(n,o))return;l.on(g+r,null).on(m+r,null);c(i);a({type:"dragend"})}}}r.origin=function(e){if(!arguments.length)return y;y=e;return r};return I.rebind(r,_,"on")};function Te(){return I.event.changedTouches[0].identifier}I.touches=function(r,e){if(arguments.length<2)e=j().touches;return e?f(e).map(function(e){var t=Ae(r,e);t.identifier=e.identifier;return t}):[]};var ke=1e-6,Me=ke*ke,Se=Math.PI,Ce=2*Se,Le=Ce-ke,Ee=Se/2,De=Se/180,Oe=180/Se;function Pe(e){return e>0?1:e<0?-1:0}function Ie(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0])}function Re(e){return e>1?0:e<-1?Se:Math.acos(e)}function ze(e){return e>1?Ee:e<-1?-Ee:Math.asin(e)}function Ne(e){return((e=Math.exp(e))-1/e)/2}function Fe(e){return((e=Math.exp(e))+1/e)/2}function je(e){return((e=Math.exp(2*e))-1)/(e+1)}function Be(e){return(e=Math.sin(e/2))*e}var He=Math.SQRT2,Ue=2,Ve=4;I.interpolateZoom=function(e,t){var a=e[0],i=e[1],o=e[2],r=t[0],n=t[1],s=t[2],l=r-a,c=n-i,u=l*l+c*c,f,d;if(u<Me){d=Math.log(s/o)/He;f=function(e){return[a+e*l,i+e*c,o*Math.exp(He*e*d)]}}else{var h=Math.sqrt(u),p=(s*s-o*o+Ve*u)/(2*o*Ue*h),v=(s*s-o*o-Ve*u)/(2*s*Ue*h),g=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);d=(m-g)/He;f=function(e){var t=e*d,r=Fe(g),n=o/(Ue*h)*(r*je(He*t+g)-Ne(g));return[a+n*l,i+n*c,o*r/Fe(He*t+g)]}}f.duration=d*1e3;return f};I.behavior.zoom=function(){var b={x:0,y:0,k:1},t,l,r,c=[960,500],n=qe,a=250,i=0,s="mousedown.zoom",u="mousemove.zoom",f="mouseup.zoom",o,x="touchstart.zoom",w,A=B(g,"zoomstart","zoom","zoomend"),d,h,p,v;if(!Ge){Ge="onwheel"in R?(Ye=function(){return-I.event.deltaY*(I.event.deltaMode?120:1)},"wheel"):"onmousewheel"in R?(Ye=function(){return I.event.wheelDelta},"mousewheel"):(Ye=function(){return-I.event.detail},"MozMousePixelScroll")}function g(e){e.on(s,D).on(Ge+".zoom",y).on("dblclick.zoom",P).on(x,O)}g.event=function(e){e.each(function(){var s=A.of(this,arguments),t=b;if(El){I.select(this).transition().each("start.zoom",function(){b=this.__chart__||{x:0,y:0,k:1};C(s)}).tween("zoom:zoom",function(){var n=c[0],e=c[1],a=l?l[0]:n/2,i=l?l[1]:e/2,o=I.interpolateZoom([(a-b.x)/b.k,(i-b.y)/b.k,n/b.k],[(a-t.x)/t.k,(i-t.y)/t.k,n/t.k]);return function(e){var t=o(e),r=n/t[2];this.__chart__=b={x:a-t[0]*r,y:i-t[1]*r,k:r};L(s)}}).each("interrupt.zoom",function(){E(s)}).each("end.zoom",function(){E(s)})}else{this.__chart__=b;C(s);L(s);E(s)}})};g.translate=function(e){if(!arguments.length)return[b.x,b.y];b={x:+e[0],y:+e[1],k:b.k};_();return g};g.scale=function(e){if(!arguments.length)return b.k;b={x:b.x,y:b.y,k:null};k(+e);_();return g};g.scaleExtent=function(e){if(!arguments.length)return n;n=e==null?qe:[+e[0],+e[1]];return g};g.center=function(e){if(!arguments.length)return r;r=e&&[+e[0],+e[1]];return g};g.size=function(e){if(!arguments.length)return c;c=e&&[+e[0],+e[1]];return g};g.duration=function(e){if(!arguments.length)return a;a=+e;return g};g.x=function(e){if(!arguments.length)return h;h=e;d=e.copy();b={x:0,y:0,k:1};return g};g.y=function(e){if(!arguments.length)return v;v=e;p=e.copy();b={x:0,y:0,k:1};return g};function T(e){return[(e[0]-b.x)/b.k,(e[1]-b.y)/b.k]}function m(e){return[e[0]*b.k+b.x,e[1]*b.k+b.y]}function k(e){b.k=Math.max(n[0],Math.min(n[1],e))}function M(e,t){t=m(t);b.x+=e[0]-t[0];b.y+=e[1]-t[1]}function S(e,t,r,n){e.__chart__={x:b.x,y:b.y,k:b.k};k(Math.pow(2,n));M(l=t,r);e=I.select(e);if(a>0)e=e.transition().duration(a);e.call(g.event)}function _(){if(h)h.domain(d.range().map(function(e){return(e-b.x)/b.k}).map(d.invert));if(v)v.domain(p.range().map(function(e){return(e-b.y)/b.k}).map(p.invert))}function C(e){if(!i++)e({type:"zoomstart"})}function L(e){_();e({type:"zoom",scale:b.k,translate:[b.x,b.y]})}function E(e){if(!--i)e({type:"zoomend"}),l=null}function D(){var e=this,t=A.of(e,arguments),r=0,n=I.select(z(e)).on(u,o).on(f,s),a=T(I.mouse(e)),i=xe(e);kl.call(e);C(t);function o(){r=1;M(I.mouse(e),a);L(t)}function s(){n.on(u,null).on(f,null);i(r);E(t)}}function O(){var u=this,c=A.of(u,arguments),f={},d=0,h,a=".zoom-"+I.event.changedTouches[0].identifier,p="touchmove"+a,v="touchend"+a,g=[],i=I.select(u),o=xe(u);e();C(c);i.on(s,null).on(x,e);function m(){var e=I.touches(u);h=b.k;e.forEach(function(e){if(e.identifier in f)f[e.identifier]=T(e)});return e}function e(){var e=I.event.target;I.select(e).on(p,_).on(v,y);g.push(e);var t=I.event.changedTouches;for(var r=0,n=t.length;r<n;++r){f[t[r].identifier]=null}var a=m(),i=Date.now();if(a.length===1){if(i-w<500){var o=a[0];S(u,o,f[o.identifier],Math.floor(Math.log(b.k)/Math.LN2)+1);F()}w=i}else if(a.length>1){var o=a[0],s=a[1],l=o[0]-s[0],c=o[1]-s[1];d=l*l+c*c}}function _(){var e=I.touches(u),t,r,n,a;kl.call(u);for(var i=0,o=e.length;i<o;++i,a=null){n=e[i];if(a=f[n.identifier]){if(r)break;t=n,r=a}}if(a){var s=(s=n[0]-t[0])*s+(s=n[1]-t[1])*s,l=d&&Math.sqrt(s/d);t=[(t[0]+n[0])/2,(t[1]+n[1])/2];r=[(r[0]+a[0])/2,(r[1]+a[1])/2];k(l*h)}w=null;M(t,r);L(c)}function y(){if(I.event.touches.length){var e=I.event.changedTouches;for(var t=0,r=e.length;t<r;++t){delete f[e[t].identifier]}for(var n in f){return void m()}}I.selectAll(g).on(a,null);i.on(s,D).on(x,O);o();E(c)}}function y(){var e=A.of(this,arguments);if(o)clearTimeout(o);else kl.call(this),t=T(l=r||I.mouse(this)),C(e);o=setTimeout(function(){o=null;E(e)},50);F();k(Math.pow(2,Ye()*.002)*b.k);M(l,t);L(e)}function P(){var e=I.mouse(this),t=Math.log(b.k)/Math.LN2;S(this,e,T(e),I.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return I.rebind(g,A,"on")};var qe=[0,Infinity],Ye,Ge;I.color=We;function We(){}We.prototype.toString=function(){return this.rgb()+""};I.hsl=Xe;function Xe(e,t,r){return this instanceof Xe?void(this.h=+e,this.s=+t,this.l=+r):arguments.length<2?e instanceof Xe?new Xe(e.h,e.s,e.l):gt(""+e,mt,Xe):new Xe(e,t,r)}var Ze=Xe.prototype=new We;Ze.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);return new Xe(this.h,this.s,this.l/e)};Ze.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new Xe(this.h,this.s,e*this.l)};Ze.rgb=function(){return Je(this.h,this.s,this.l)};function Je(e,t,r){var n,a;e=isNaN(e)?0:(e%=360)<0?e+360:e;t=isNaN(t)?0:t<0?0:t>1?1:t;r=r<0?0:r>1?1:r;a=r<=.5?r*(1+t):r+t-r*t;n=2*r-a;function i(e){if(e>360)e-=360;else if(e<0)e+=360;if(e<60)return n+(a-n)*e/60;if(e<180)return a;if(e<240)return n+(a-n)*(240-e)/60;return n}function o(e){return Math.round(i(e)*255)}return new ft(o(e+120),o(e),o(e-120))}I.hcl=$e;function $e(e,t,r){return this instanceof $e?void(this.h=+e,this.c=+t,this.l=+r):arguments.length<2?e instanceof $e?new $e(e.h,e.c,e.l):e instanceof et?st(e.l,e.a,e.b):st((e=_t((e=I.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new $e(e,t,r)}var Qe=$e.prototype=new We;Qe.brighter=function(e){return new $e(this.h,this.c,Math.min(100,this.l+tt*(arguments.length?e:1)))};Qe.darker=function(e){return new $e(this.h,this.c,Math.max(0,this.l-tt*(arguments.length?e:1)))};Qe.rgb=function(){return Ke(this.h,this.c,this.l).rgb()};function Ke(e,t,r){if(isNaN(e))e=0;if(isNaN(t))t=0;return new et(r,Math.cos(e*=De)*t,Math.sin(e)*t)}I.lab=et;function et(e,t,r){return this instanceof et?void(this.l=+e,this.a=+t,this.b=+r):arguments.length<2?e instanceof et?new et(e.l,e.a,e.b):e instanceof $e?Ke(e.h,e.c,e.l):_t((e=ft(e)).r,e.g,e.b):new et(e,t,r)}var tt=18;var rt=.95047,nt=1,at=1.08883;var it=et.prototype=new We;it.brighter=function(e){return new et(Math.min(100,this.l+tt*(arguments.length?e:1)),this.a,this.b)};it.darker=function(e){return new et(Math.max(0,this.l-tt*(arguments.length?e:1)),this.a,this.b)};it.rgb=function(){return ot(this.l,this.a,this.b)};function ot(e,t,r){var n=(e+16)/116,a=n+t/500,i=n-r/200;a=lt(a)*rt;n=lt(n)*nt;i=lt(i)*at;return new ft(ut(3.2404542*a-1.5371385*n-.4985314*i),ut(-.969266*a+1.8760108*n+.041556*i),ut(.0556434*a-.2040259*n+1.0572252*i))}function st(e,t,r){return e>0?new $e(Math.atan2(r,t)*Oe,Math.sqrt(t*t+r*r),e):new $e(NaN,NaN,e)}function lt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ct(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ut(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}I.rgb=ft;function ft(e,t,r){return this instanceof ft?void(this.r=~~e,this.g=~~t,this.b=~~r):arguments.length<2?e instanceof ft?new ft(e.r,e.g,e.b):gt(""+e,ft,Je):new ft(e,t,r)}function dt(e){return new ft(e>>16,e>>8&255,e&255)}function ht(e){return dt(e)+""}var pt=ft.prototype=new We;pt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,r=this.g,n=this.b,a=30;if(!t&&!r&&!n)return new ft(a,a,a);if(t&&t<a)t=a;if(r&&r<a)r=a;if(n&&n<a)n=a;return new ft(Math.min(255,t/e),Math.min(255,r/e),Math.min(255,n/e))};pt.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new ft(e*this.r,e*this.g,e*this.b)};pt.hsl=function(){return mt(this.r,this.g,this.b)};pt.toString=function(){return"#"+vt(this.r)+vt(this.g)+vt(this.b)};function vt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function gt(e,t,r){var n=0,a=0,i=0,o,s,l;o=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase());if(o){s=o[2].split(",");switch(o[1]){case"hsl":{return r(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100)}case"rgb":{return t(bt(s[0]),bt(s[1]),bt(s[2]))}}}if(l=xt.get(e)){return t(l.r,l.g,l.b)}if(e!=null&&e.charAt(0)==="#"&&!isNaN(l=parseInt(e.slice(1),16))){if(e.length===4){n=(l&3840)>>4;n=n>>4|n;a=l&240;a=a>>4|a;i=l&15;i=i<<4|i}else if(e.length===7){n=(l&16711680)>>16;a=(l&65280)>>8;i=l&255}}return t(n,a,i)}function mt(e,t,r){var n=Math.min(e/=255,t/=255,r/=255),a=Math.max(e,t,r),i=a-n,o,s,l=(a+n)/2;if(i){s=l<.5?i/(a+n):i/(2-a-n);if(e==a)o=(t-r)/i+(t<r?6:0);else if(t==a)o=(r-e)/i+2;else o=(e-t)/i+4;o*=60}else{o=NaN;s=l>0&&l<1?0:o}return new Xe(o,s,l)}function _t(e,t,r){e=yt(e);t=yt(t);r=yt(r);var n=ct((.4124564*e+.3575761*t+.1804375*r)/rt),a=ct((.2126729*e+.7151522*t+.072175*r)/nt),i=ct((.0193339*e+.119192*t+.9503041*r)/at);return et(116*a-16,500*(n-a),200*(a-i))}function yt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function bt(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}var xt=I.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});xt.forEach(function(e,t){xt.set(e,dt(t))});function wt(e){return typeof e==="function"?e:function(){return e}}I.functor=wt;I.xhr=At(N);function At(n){return function(e,t,r){if(arguments.length===2&&typeof t==="function")r=t,t=null;return Tt(e,t,n,r)}}function Tt(a,i,r,e){var o={},s=I.dispatch("beforesend","progress","load","error"),l={},c=new XMLHttpRequest,u=null;if(self.XDomainRequest&&!("withCredentials"in c)&&/^(http(s)?:)?\/\//.test(a))c=new XDomainRequest;"onload"in c?c.onload=c.onerror=t:c.onreadystatechange=function(){c.readyState>3&&t()};function t(){var e=c.status,t;if(!e&&Mt(c)||e>=200&&e<300||e===304){try{t=r.call(o,c)}catch(e){s.error.call(o,e);return}s.load.call(o,t)}else{s.error.call(o,c)}}c.onprogress=function(e){var t=I.event;I.event=e;try{s.progress.call(o,c)}finally{I.event=t}};o.header=function(e,t){e=(e+"").toLowerCase();if(arguments.length<2)return l[e];if(t==null)delete l[e];else l[e]=t+"";return o};o.mimeType=function(e){if(!arguments.length)return i;i=e==null?null:e+"";return o};o.responseType=function(e){if(!arguments.length)return u;u=e;return o};o.response=function(e){r=e;return o};["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(f(arguments)))}});o.send=function(e,t,r){if(arguments.length===2&&typeof t==="function")r=t,t=null;c.open(e,a,true);if(i!=null&&!("accept"in l))l["accept"]=i+",*/*";if(c.setRequestHeader)for(var n in l)c.setRequestHeader(n,l[n]);if(i!=null&&c.overrideMimeType)c.overrideMimeType(i);if(u!=null)c.responseType=u;if(r!=null)o.on("error",r).on("load",function(e){r(null,e)});s.beforesend.call(o,c);c.send(t==null?null:t);return o};o.abort=function(){c.abort();return o};I.rebind(o,s,"on");return e==null?o:o.get(kt(e))}function kt(r){return r.length===1?function(e,t){r(e==null?t:null)}:r}function Mt(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}I.dsv=function(a,i){var t=new RegExp('["'+a+"\n]"),d=a.charCodeAt(0);function o(e,t,r){if(arguments.length<3)r=t,t=null;var n=Tt(e,i,t==null?s:l(t),r);n.row=function(e){return arguments.length?n.response((t=e)==null?s:l(e)):t};return n}function s(e){return o.parse(e.responseText)}function l(t){return function(e){return o.parse(e.responseText,t)}}o.parse=function(e,n){var t;return o.parseRows(e,function(a,e){if(t)return t(a,e-1);var r=function(e){var t={};var r=a.length;for(var n=0;n<r;++n){t[a[n]]=e[n]}return t};t=n?function(e,t){return n(r(e),t)}:r})};o.parseRows=function(a,e){var i={},o={},t=[],s=a.length,l=0,r=0,n,c;function u(){if(l>=s)return o;if(c)return c=false,i;var e=l;if(a.charCodeAt(e)===34){var t=e;while(t++<s){if(a.charCodeAt(t)===34){if(a.charCodeAt(t+1)!==34)break;++t}}l=t+2;var r=a.charCodeAt(t+1);if(r===13){c=true;if(a.charCodeAt(t+2)===10)++l}else if(r===10){c=true}return a.slice(e+1,t).replace(/""/g,'"')}while(l<s){var r=a.charCodeAt(l++),n=1;if(r===10)c=true;else if(r===13){c=true;if(a.charCodeAt(l)===10)++l,++n}else if(r!==d)continue;return a.slice(e,l-n)}return a.slice(e)}while((n=u())!==o){var f=[];while(n!==i&&n!==o){f.push(n);n=u()}if(e&&(f=e(f,r++))==null)continue;t.push(f)}return t};o.format=function(e){if(Array.isArray(e[0]))return o.formatRows(e);var r=new M,n=[];e.forEach(function(e){for(var t in e){if(!r.has(t)){n.push(r.add(t))}}});return[n.map(c).join(a)].concat(e.map(function(t){return n.map(function(e){return c(t[e])}).join(a)})).join("\n")};o.formatRows=function(e){return e.map(r).join("\n")};function r(e){return e.map(c).join(a)}function c(e){return t.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return o};I.csv=I.dsv(",","text/csv");I.tsv=I.dsv("\t","text/tab-separated-values");var St,Ct,Lt,Et,Dt=this[C(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};I.timer=function(){Ot.apply(this,arguments)};function Ot(e,t,r){var n=arguments.length;if(n<2)t=0;if(n<3)r=Date.now();var a=r+t,i={c:e,t:a,n:null};if(Ct)Ct.n=i;else St=i;Ct=i;if(!Lt){Et=clearTimeout(Et);Lt=1;Dt(Pt)}return i}function Pt(){var e=It(),t=Rt()-e;if(t>24){if(isFinite(t)){clearTimeout(Et);Et=setTimeout(Pt,t)}Lt=0}else{Lt=1;Dt(Pt)}}I.timer.flush=function(){It();Rt()};function It(){var e=Date.now(),t=St;while(t){if(e>=t.t&&t.c(e-t.t))t.c=null;t=t.n}return e}function Rt(){var e,t=St,r=Infinity;while(t){if(t.c){if(t.t<r)r=t.t;t=(e=t).n}else{t=e?e.n=t.n:St=t.n}}Ct=e;return r}function zt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}I.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Nt=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Ft);I.formatPrefix=function(e,t){var r=0;if(e=+e){if(e<0)e*=-1;if(t)e=I.round(e,zt(e,t));r=1+Math.floor(1e-12+Math.log(e)/Math.LN10);r=Math.max(-24,Math.min(24,Math.floor((r-1)/3)*3))}return Nt[8+r/3]};function Ft(e,t){var r=Math.pow(10,P(8-t)*3);return{scale:t>8?function(e){return e/r}:function(e){return e*r},symbol:e}}function jt(e){var T=e.decimal,s=e.thousands,l=e.grouping,n=e.currency,k=l&&s?function(e,t){var r=e.length,n=[],a=0,i=l[0],o=0;while(r>0&&i>0){if(o+i+1>t)i=Math.max(1,t-o);n.push(e.substring(r-=i,r+i));if((o+=i+1)>t)break;i=l[a=(a+1)%l.length]}return n.reverse().join(s)}:N;return function(e){var t=Bt.exec(e),u=t[1]||" ",f=t[2]||">",d=t[3]||"-",r=t[4]||"",h=t[5],p=+t[6],v=t[7],g=t[8],m=t[9],_=1,y="",b="",x=false,w=true;if(g)g=+g.substring(1);if(h||u==="0"&&f==="="){h=u="0";f="="}switch(m){case"n":v=true;m="g";break;case"%":_=100;b="%";m="f";break;case"p":_=100;b="%";m="r";break;case"b":case"o":case"x":case"X":if(r==="#")y="0"+m.toLowerCase();case"c":w=false;case"d":x=true;g=0;break;case"s":_=-1;m="r";break}if(r==="$")y=n[0],b=n[1];if(m=="r"&&!g)m="g";if(g!=null){if(m=="g")g=Math.max(1,Math.min(21,g));else if(m=="e"||m=="f")g=Math.max(0,Math.min(20,g))}m=Ht.get(m)||Ut;var A=h&&v;return function(e){var t=b;if(x&&e%1)return"";var r=e<0||e===0&&1/e<0?(e=-e,"-"):d==="-"?"":d;if(_<0){var n=I.formatPrefix(e,g);e=n.scale(e);t=n.symbol+b}else{e*=_}e=m(e,g);var a=e.lastIndexOf("."),i,o;if(a<0){var s=w?e.lastIndexOf("e"):-1;if(s<0)i=e,o="";else i=e.substring(0,s),o=e.substring(s)}else{i=e.substring(0,a);o=T+e.substring(a+1)}if(!h&&v)i=k(i,Infinity);var l=y.length+i.length+o.length+(A?0:r.length),c=l<p?new Array(l=p-l+1).join(u):"";if(A)i=k(c+i,c.length?p-o.length:Infinity);r+=y;e=i+o;return(f==="<"?r+e+c:f===">"?c+r+e:f==="^"?c.substring(0,l>>=1)+r+e+c.substring(l):r+(A?e:c+e))+t}}}var Bt=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var Ht=I.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=I.round(e,zt(e,t))).toFixed(Math.max(0,Math.min(20,zt(e*(1+1e-15),t))))}});function Ut(e){return e+""}var Vt=I.time={},qt=Date;function Yt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Yt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Gt.setUTCDate.apply(this._,arguments)},setDay:function(){Gt.setUTCDay.apply(this._,arguments)},setFullYear:function(){Gt.setUTCFullYear.apply(this._,arguments)},setHours:function(){Gt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Gt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Gt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Gt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Gt.setUTCSeconds.apply(this._,arguments)},setTime:function(){Gt.setTime.apply(this._,arguments)}};var Gt=Date.prototype;function Wt(n,i,o){function e(e){var t=n(e),r=a(t,1);return e-t<r-e?t:r}function s(e){i(e=n(new qt(e-1)),1);return e}function a(e,t){i(e=new qt(+e),t);return e}function l(e,t,r){var n=s(e),a=[];if(r>1){while(n<t){if(!(o(n)%r))a.push(new Date(+n));i(n,1)}}else{while(n<t)a.push(new Date(+n)),i(n,1)}return a}function t(e,t,r){try{qt=Yt;var n=new Yt;n._=e;return l(n,t,r)}finally{qt=Date}}n.floor=n;n.round=e;n.ceil=s;n.offset=a;n.range=l;var r=n.utc=Xt(n);r.floor=r;r.round=Xt(e);r.ceil=Xt(s);r.offset=Xt(a);r.range=t;return n}function Xt(n){return function(e,t){try{qt=Yt;var r=new Yt;r._=e;return n(r,t)._}finally{qt=Date}}}Vt.year=Wt(function(e){e=Vt.day(e);e.setMonth(0,1);return e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()});Vt.years=Vt.year.range;Vt.years.utc=Vt.year.utc.range;Vt.day=Wt(function(e){var t=new qt(2e3,0);t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate());return t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1});Vt.days=Vt.day.range;Vt.days.utc=Vt.day.utc.range;Vt.dayOfYear=function(e){var t=Vt.year(e);return Math.floor((e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,r){r=7-r;var t=Vt[e]=Wt(function(e){(e=Vt.day(e)).setDate(e.getDate()-(e.getDay()+r)%7);return e},function(e,t){e.setDate(e.getDate()+Math.floor(t)*7)},function(e){var t=Vt.year(e).getDay();return Math.floor((Vt.dayOfYear(e)+(t+r)%7)/7)-(t!==r)});Vt[e+"s"]=t.range;Vt[e+"s"].utc=t.utc.range;Vt[e+"OfYear"]=function(e){var t=Vt.year(e).getDay();return Math.floor((Vt.dayOfYear(e)+(t+r)%7)/7)}});Vt.week=Vt.sunday;Vt.weeks=Vt.sunday.range;Vt.weeks.utc=Vt.sunday.utc.range;Vt.weekOfYear=Vt.sundayOfYear;function Zt(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,l=e.shortMonths;function c(s){var l=s.length;function e(e){var t=[],r=-1,n=0,a,i,o;while(++r<l){if(s.charCodeAt(r)===37){t.push(s.slice(n,r));if((i=Jt[a=s.charAt(++r)])!=null)a=s.charAt(++r);if(o=b[a])a=o(e,i==null?a==="e"?" ":"0":i);t.push(a);n=r+1}}t.push(s.slice(n,r));return t.join("")}e.parse=function(e){var t={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=u(t,s,e,0);if(r!=e.length)return null;if("p"in t)t.H=t.H%12+t.p*12;var n=t.Z!=null&&qt!==Yt,a=new(n?Yt:qt);if("j"in t)a.setFullYear(t.y,0,t.j);else if("W"in t||"U"in t){if(!("w"in t))t.w="W"in t?1:0;a.setFullYear(t.y,0,1);a.setFullYear(t.y,0,"W"in t?(t.w+6)%7+t.W*7-(a.getDay()+5)%7:t.w+t.U*7-(a.getDay()+6)%7)}else a.setFullYear(t.y,t.m,t.d);a.setHours(t.H+(t.Z/100|0),t.M+t.Z%100,t.S,t.L);return n?a._:a};e.toString=function(){return s};return e}function u(e,t,r,n){var a,i,o,s=0,l=t.length,c=r.length;while(s<l){if(n>=c)return-1;a=t.charCodeAt(s++);if(a===37){o=t.charAt(s++);i=x[o in Jt?t.charAt(s++):o];if(!i||(n=i(e,r,n))<0)return-1}else if(a!=r.charCodeAt(n++)){return-1}}return n}c.utc=function(e){var r=c(e);function t(e){try{qt=Yt;var t=new qt;t._=e;return r(t)}finally{qt=Date}}t.parse=function(e){try{qt=Yt;var t=r.parse(e);return t&&t._}finally{qt=Date}};t.toString=r.toString;return t};c.multi=c.utc.multi=_r;var f=I.map(),d=er(i),h=tr(i),p=er(o),v=tr(o),g=er(s),m=tr(s),_=er(l),y=tr(l);a.forEach(function(e,t){f.set(e.toLowerCase(),t)});var b={a:function(e){return o[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:c(t),d:function(e,t){return Kt(e.getDate(),t,2)},e:function(e,t){return Kt(e.getDate(),t,2)},H:function(e,t){return Kt(e.getHours(),t,2)},I:function(e,t){return Kt(e.getHours()%12||12,t,2)},j:function(e,t){return Kt(1+Vt.dayOfYear(e),t,3)},L:function(e,t){return Kt(e.getMilliseconds(),t,3)},m:function(e,t){return Kt(e.getMonth()+1,t,2)},M:function(e,t){return Kt(e.getMinutes(),t,2)},p:function(e){return a[+(e.getHours()>=12)]},S:function(e,t){return Kt(e.getSeconds(),t,2)},U:function(e,t){return Kt(Vt.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Kt(Vt.mondayOfYear(e),t,2)},x:c(r),X:c(n),y:function(e,t){return Kt(e.getFullYear()%100,t,2)},Y:function(e,t){return Kt(e.getFullYear()%1e4,t,4)},Z:gr,"%":function(){return"%"}};var x={a:w,A:A,b:T,B:k,c:M,d:ur,e:ur,H:dr,I:dr,j:fr,L:vr,m:cr,M:hr,p:L,S:pr,U:nr,w:rr,W:ar,x:S,X:C,y:or,Y:ir,Z:sr,"%":mr};function w(e,t,r){p.lastIndex=0;var n=p.exec(t.slice(r));return n?(e.w=v.get(n[0].toLowerCase()),r+n[0].length):-1}function A(e,t,r){d.lastIndex=0;var n=d.exec(t.slice(r));return n?(e.w=h.get(n[0].toLowerCase()),r+n[0].length):-1}function T(e,t,r){_.lastIndex=0;var n=_.exec(t.slice(r));return n?(e.m=y.get(n[0].toLowerCase()),r+n[0].length):-1}function k(e,t,r){g.lastIndex=0;var n=g.exec(t.slice(r));return n?(e.m=m.get(n[0].toLowerCase()),r+n[0].length):-1}function M(e,t,r){return u(e,b.c.toString(),t,r)}function S(e,t,r){return u(e,b.x.toString(),t,r)}function C(e,t,r){return u(e,b.X.toString(),t,r)}function L(e,t,r){var n=f.get(t.slice(r,r+=2).toLowerCase());return n==null?-1:(e.p=n,r)}return c}var Jt={"-":"",_:" ",0:"0"},$t=/^\s*\d+/,Qt=/^%/;function Kt(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function er(e){return new RegExp("^(?:"+e.map(I.requote).join("|")+")","i")}function tr(e){var t=new _,r=-1,n=e.length;while(++r<n)t.set(e[r].toLowerCase(),r);return t}function rr(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function nr(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r));return n?(e.U=+n[0],r+n[0].length):-1}function ar(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r));return n?(e.W=+n[0],r+n[0].length):-1}function ir(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function or(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r,r+2));return n?(e.y=lr(+n[0]),r+n[0].length):-1}function sr(e,t,r){return/^[+-]\d{4}$/.test(t=t.slice(r,r+5))?(e.Z=-t,r+5):-1}function lr(e){return e+(e>68?1900:2e3)}function cr(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function ur(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function fr(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r,r+3));return n?(e.j=+n[0],r+n[0].length):-1}function dr(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function hr(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function pr(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function vr(e,t,r){$t.lastIndex=0;var n=$t.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function gr(e){var t=e.getTimezoneOffset(),r=t>0?"-":"+",n=P(t)/60|0,a=P(t)%60;return r+Kt(n,"0",2)+Kt(a,"0",2)}function mr(e,t,r){Qt.lastIndex=0;var n=Qt.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function _r(n){var e=n.length,t=-1;while(++t<e)n[t][0]=this(n[t][0]);return function(e){var t=0,r=n[t];while(!r[1](e))r=n[++t];return r[0](e)}}I.locale=function(e){return{numberFormat:jt(e),timeFormat:Zt(e)}};var yr=I.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});I.format=yr.numberFormat;I.geo={};function br(){}br.prototype={s:0,t:0,add:function(e){wr(e,this.t,xr);wr(xr.s,this.s,this);if(this.s)this.t+=xr.t;else this.s=xr.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var xr=new br;function wr(e,t,r){var n=r.s=e+t,a=n-e,i=n-a;r.t=e-i+(t-a)}I.geo.stream=function(e,t){if(e&&Tr.hasOwnProperty(e.type)){Tr[e.type](e,t)}else{Ar(e,t)}};function Ar(e,t){if(e&&kr.hasOwnProperty(e.type)){kr[e.type](e,t)}}var Tr={Feature:function(e,t){Ar(e.geometry,t)},FeatureCollection:function(e,t){var r=e.features,n=-1,a=r.length;while(++n<a)Ar(r[n].geometry,t)}};var kr={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates;t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){var r=e.coordinates,n=-1,a=r.length;while(++n<a)e=r[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){Mr(e.coordinates,t,0)},MultiLineString:function(e,t){var r=e.coordinates,n=-1,a=r.length;while(++n<a)Mr(r[n],t,0)},Polygon:function(e,t){Sr(e.coordinates,t)},MultiPolygon:function(e,t){var r=e.coordinates,n=-1,a=r.length;while(++n<a)Sr(r[n],t)},GeometryCollection:function(e,t){var r=e.geometries,n=-1,a=r.length;while(++n<a)Ar(r[n],t)}};function Mr(e,t,r){var n=-1,a=e.length-r,i;t.lineStart();while(++n<a)i=e[n],t.point(i[0],i[1],i[2]);t.lineEnd()}function Sr(e,t){var r=-1,n=e.length;t.polygonStart();while(++r<n)Mr(e[r],t,1);t.polygonEnd()}I.geo.area=function(e){Cr=0;I.geo.stream(e,Er);return Cr};var Cr,Lr=new br;var Er={sphere:function(){Cr+=4*Se},point:E,lineStart:E,lineEnd:E,polygonStart:function(){Lr.reset();Er.lineStart=Dr},polygonEnd:function(){var e=2*Lr;Cr+=e<0?4*Se+e:e;Er.lineStart=Er.lineEnd=Er.point=E}};function Dr(){var r,n,u,f,d;Er.point=function(e,t){Er.point=a;u=(r=e)*De,f=Math.cos(t=(n=t)*De/2+Se/4),d=Math.sin(t)};function a(e,t){e*=De;t=t*De/2+Se/4;var r=e-u,n=r>=0?1:-1,a=n*r,i=Math.cos(t),o=Math.sin(t),s=d*o,l=f*i+s*Math.cos(a),c=s*n*Math.sin(a);Lr.add(Math.atan2(c,l));u=e,f=i,d=o}Er.lineEnd=function(){a(r,n)}}function Or(e){var t=e[0],r=e[1],n=Math.cos(r);return[n*Math.cos(t),n*Math.sin(t),Math.sin(r)]}function Pr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ir(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Rr(e,t){e[0]+=t[0];e[1]+=t[1];e[2]+=t[2]}function zr(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Nr(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t;e[1]/=t;e[2]/=t}function Fr(e){return[Math.atan2(e[1],e[0]),ze(e[2])]}function jr(e,t){return P(e[0]-t[0])<ke&&P(e[1]-t[1])<ke}I.geo.bounds=function(){var f,d,h,p,v,n,a,g,i,l,c;var u={point:m,lineStart:e,lineEnd:t,polygonStart:function(){u.point=r;u.lineStart=s;u.lineEnd=_;i=0;Er.polygonStart()},polygonEnd:function(){Er.polygonEnd();u.point=m;u.lineStart=e;u.lineEnd=t;if(Lr<0)f=-(h=180),d=-(p=90);else if(i>ke)p=90;else if(i<-ke)d=-90;c[0]=f,c[1]=h}};function m(e,t){l.push(c=[f=e,h=e]);if(t<d)d=t;if(t>p)p=t}function o(e,t){var r=Or([e*De,t*De]);if(g){var n=Ir(g,r),a=[n[1],-n[0],0],i=Ir(a,n);Nr(i);i=Fr(i);var o=e-v,s=o>0?1:-1,l=i[0]*Oe*s,c=P(o)>180;if(c^(s*v<l&&l<s*e)){var u=i[1]*Oe;if(u>p)p=u}else if(l=(l+360)%360-180,c^(s*v<l&&l<s*e)){var u=-i[1]*Oe;if(u<d)d=u}else{if(t<d)d=t;if(t>p)p=t}if(c){if(e<v){if(y(f,e)>y(f,h))h=e}else{if(y(e,h)>y(f,h))f=e}}else{if(h>=f){if(e<f)f=e;if(e>h)h=e}else{if(e>v){if(y(f,e)>y(f,h))h=e}else{if(y(e,h)>y(f,h))f=e}}}}else{m(e,t)}g=r,v=e}function e(){u.point=o}function t(){c[0]=f,c[1]=h;u.point=m;g=null}function r(e,t){if(g){var r=e-v;i+=P(r)>180?r+(r>0?360:-360):r}else n=e,a=t;Er.point(e,t);o(e,t)}function s(){Er.lineStart()}function _(){r(n,a);Er.lineEnd();if(P(i)>ke)f=-(h=180);c[0]=f,c[1]=h;g=null}function y(e,t){return(t-=e)<0?t+360:t}function b(e,t){return e[0]-t[0]}function x(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(e){p=h=-(f=d=Infinity);l=[];I.geo.stream(e,u);var t=l.length;if(t){l.sort(b);for(var r=1,n=l[0],a,i=[n];r<t;++r){a=l[r];if(x(a[0],n)||x(a[1],n)){if(y(n[0],a[1])>y(n[0],n[1]))n[1]=a[1];if(y(a[0],n[1])>y(n[0],n[1]))n[0]=a[0]}else{i.push(n=a)}}var o=-Infinity,s;for(var t=i.length-1,r=0,n=i[t],a;r<=t;n=a,++r){a=i[r];if((s=y(n[1],a[0]))>o)o=s,f=a[0],h=n[1]}}l=c=null;return f===Infinity||d===Infinity?[[NaN,NaN],[NaN,NaN]]:[[f,d],[h,p]]}}();I.geo.centroid=function(e){Br=Hr=Ur=Vr=qr=Yr=Gr=Wr=Xr=Zr=Jr=0;I.geo.stream(e,$r);var t=Xr,r=Zr,n=Jr,a=t*t+r*r+n*n;if(a<Me){t=Yr,r=Gr,n=Wr;if(Hr<ke)t=Ur,r=Vr,n=qr;a=t*t+r*r+n*n;if(a<Me)return[NaN,NaN]}return[Math.atan2(r,t)*Oe,ze(n/Math.sqrt(a))*Oe]};var Br,Hr,Ur,Vr,qr,Yr,Gr,Wr,Xr,Zr,Jr;var $r={sphere:E,point:Qr,lineStart:en,lineEnd:tn,polygonStart:function(){$r.lineStart=rn},polygonEnd:function(){$r.lineStart=en}};function Qr(e,t){e*=De;var r=Math.cos(t*=De);Kr(r*Math.cos(e),r*Math.sin(e),Math.sin(t))}function Kr(e,t,r){++Br;Ur+=(e-Ur)/Br;Vr+=(t-Vr)/Br;qr+=(r-qr)/Br}function en(){var s,l,c;$r.point=function(e,t){e*=De;var r=Math.cos(t*=De);s=r*Math.cos(e);l=r*Math.sin(e);c=Math.sin(t);$r.point=n;Kr(s,l,c)};function n(e,t){e*=De;var r=Math.cos(t*=De),n=r*Math.cos(e),a=r*Math.sin(e),i=Math.sin(t),o=Math.atan2(Math.sqrt((o=l*i-c*a)*o+(o=c*n-s*i)*o+(o=s*a-l*n)*o),s*n+l*a+c*i);Hr+=o;Yr+=o*(s+(s=n));Gr+=o*(l+(l=a));Wr+=o*(c+(c=i));Kr(s,l,c)}}function tn(){$r.point=Qr}function rn(){var n,a,h,p,v;$r.point=function(e,t){n=e,a=t;$r.point=i;e*=De;var r=Math.cos(t*=De);h=r*Math.cos(e);p=r*Math.sin(e);v=Math.sin(t);Kr(h,p,v)};$r.lineEnd=function(){i(n,a);$r.lineEnd=tn;$r.point=Qr};function i(e,t){e*=De;var r=Math.cos(t*=De),n=r*Math.cos(e),a=r*Math.sin(e),i=Math.sin(t),o=p*i-v*a,s=v*n-h*i,l=h*a-p*n,c=Math.sqrt(o*o+s*s+l*l),u=h*n+p*a+v*i,f=c&&-Re(u)/c,d=Math.atan2(c,u);Xr+=f*o;Zr+=f*s;Jr+=f*l;Hr+=d;Yr+=d*(h+(h=n));Gr+=d*(p+(p=a));Wr+=d*(v+(v=i));Kr(h,p,v)}}function nn(r,n){function e(e,t){return e=r(e,t),n(e[0],e[1])}if(r.invert&&n.invert)e.invert=function(e,t){return e=n.invert(e,t),e&&r.invert(e[0],e[1])};return e}function an(){return true}function on(e,t,r,n,s){var l=[],c=[];e.forEach(function(e){if((t=e.length-1)<=0)return;var t,r=e[0],n=e[t];if(jr(r,n)){s.lineStart();for(var a=0;a<t;++a)s.point((r=e[a])[0],r[1]);s.lineEnd();return}var i=new ln(r,e,null,true),o=new ln(r,null,i,false);i.o=o;l.push(i);c.push(o);i=new ln(n,e,null,false);o=new ln(n,null,i,true);i.o=o;l.push(i);c.push(o)});c.sort(t);sn(l);sn(c);if(!l.length)return;for(var a=0,i=r,o=c.length;a<o;++a){c[a].e=i=!i}var u=l[0],f,d;while(1){var h=u,p=true;while(h.v)if((h=h.n)===u)return;f=h.z;s.lineStart();do{h.v=h.o.v=true;if(h.e){if(p){for(var a=0,o=f.length;a<o;++a)s.point((d=f[a])[0],d[1])}else{n(h.x,h.n.x,1,s)}h=h.n}else{if(p){f=h.p.z;for(var a=f.length-1;a>=0;--a)s.point((d=f[a])[0],d[1])}else{n(h.x,h.p.x,-1,s)}h=h.p}h=h.o;f=h.z;p=!p}while(!h.v);s.lineEnd()}}function sn(e){if(!(t=e.length))return;var t,r=0,n=e[0],a;while(++r<t){n.n=a=e[r];a.p=n;n=a}n.n=a=e[0];a.p=n}function ln(e,t,r,n){this.x=e;this.z=t;this.o=r;this.e=n;this.v=false;this.n=this.p=null}function cn(_,y,b,x){return function(n,o){var a=y(o),t=n.invert(x[0],x[1]);var r={point:i,lineStart:s,lineEnd:l,polygonStart:function(){r.point=v;r.lineStart=g;r.lineEnd=m;c=[];h=[]},polygonEnd:function(){r.point=i;r.lineStart=s;r.lineEnd=l;c=I.merge(c);var e=mn(t,h);if(c.length){if(!d)o.polygonStart(),d=true;on(c,dn,e,b,o)}else if(e){if(!d)o.polygonStart(),d=true;o.lineStart();b(null,null,1,o);o.lineEnd()}if(d)o.polygonEnd(),d=false;c=h=null},sphere:function(){o.polygonStart();o.lineStart();b(null,null,1,o);o.lineEnd();o.polygonEnd()}};function i(e,t){var r=n(e,t);if(_(e=r[0],t=r[1]))o.point(e,t)}function e(e,t){var r=n(e,t);a.point(r[0],r[1])}function s(){r.point=e;a.lineStart()}function l(){r.point=i;a.lineEnd()}var c;var u=fn(),f=y(u),d=false,h,p;function v(e,t){p.push([e,t]);var r=n(e,t);f.point(r[0],r[1])}function g(){f.lineStart();p=[]}function m(){v(p[0][0],p[0][1]);f.lineEnd();var e=f.clean(),t=u.buffer(),r,n=t.length;p.pop();h.push(p);p=null;if(!n)return;if(e&1){r=t[0];var n=r.length-1,a=-1,i;if(n>0){if(!d)o.polygonStart(),d=true;o.lineStart();while(++a<n)o.point((i=r[a])[0],i[1]);o.lineEnd()}return}if(n>1&&e&2)t.push(t.pop().concat(t.shift()));c.push(t.filter(un))}return r}}function un(e){return e.length>1}function fn(){var t=[],r;return{lineStart:function(){t.push(r=[])},point:function(e,t){r.push([e,t])},lineEnd:E,buffer:function(){var e=t;t=[];r=null;return e},rejoin:function(){if(t.length>1)t.push(t.pop().concat(t.shift()))}}}function dn(e,t){return((e=e.x)[0]<0?e[1]-Ee-ke:Ee-e[1])-((t=t.x)[0]<0?t[1]-Ee-ke:Ee-t[1])}var hn=cn(an,pn,gn,[-Se,-Se/2]);function pn(a){var i=NaN,o=NaN,s=NaN,l;return{lineStart:function(){a.lineStart();l=1},point:function(e,t){var r=e>0?Se:-Se,n=P(e-i);if(P(n-Se)<ke){a.point(i,o=(o+t)/2>0?Ee:-Ee);a.point(s,o);a.lineEnd();a.lineStart();a.point(r,o);a.point(e,o);l=0}else if(s!==r&&n>=Se){if(P(i-s)<ke)i-=s*ke;if(P(e-r)<ke)e-=r*ke;o=vn(i,o,e,t);a.point(s,o);a.lineEnd();a.lineStart();a.point(r,o);l=0}a.point(i=e,o=t);s=r},lineEnd:function(){a.lineEnd();i=o=NaN},clean:function(){return 2-l}}}function vn(e,t,r,n){var a,i,o=Math.sin(e-r);return P(o)>ke?Math.atan((Math.sin(t)*(i=Math.cos(n))*Math.sin(r)-Math.sin(n)*(a=Math.cos(t))*Math.sin(e))/(a*i*o)):(t+n)/2}function gn(e,t,r,n){var a;if(e==null){a=r*Ee;n.point(-Se,a);n.point(0,a);n.point(Se,a);n.point(Se,0);n.point(Se,-a);n.point(0,-a);n.point(-Se,-a);n.point(-Se,0);n.point(-Se,a)}else if(P(e[0]-t[0])>ke){var i=e[0]<t[0]?Se:-Se;a=r*i/2;n.point(-i,a);n.point(0,a);n.point(i,a)}else{n.point(t[0],t[1])}}function mn(e,t){var r=e[0],n=e[1],a=[Math.sin(r),-Math.cos(r),0],i=0,o=0;Lr.reset();for(var s=0,l=t.length;s<l;++s){var c=t[s],u=c.length;if(!u)continue;var f=c[0],d=f[0],h=f[1]/2+Se/4,p=Math.sin(h),v=Math.cos(h),g=1;while(true){if(g===u)g=0;e=c[g];var m=e[0],_=e[1]/2+Se/4,y=Math.sin(_),b=Math.cos(_),x=m-d,w=x>=0?1:-1,A=w*x,T=A>Se,k=p*y;Lr.add(Math.atan2(k*w*Math.sin(A),v*b+k*Math.cos(A)));i+=T?x+w*Ce:x;if(T^d>=r^m>=r){var M=Ir(Or(f),Or(e));Nr(M);var S=Ir(a,M);Nr(S);var C=(T^x>=0?-1:1)*ze(S[2]);if(n>C||n===C&&(M[0]||M[1])){o+=T^x>=0?1:-1}}if(!g++)break;d=m,p=y,v=b,f=e}}return(i<-ke||i<ke&&Lr<-ke)^o&1}function _n(a){var E=Math.cos(a),h=E>0,p=P(E)>ke,e=ta(a,6*De);return cn(v,t,e,h?[0,-a]:[-Se,a-Se]);function v(e,t){return Math.cos(e)*Math.cos(t)>E}function t(s){var l,c,u,f,d;return{lineStart:function(){f=u=false;d=1},point:function(e,t){var r=[e,t],n,a=v(e,t),i=h?a?0:m(e,t):a?m(e+(e<0?Se:-Se),t):0;if(!l&&(f=u=a))s.lineStart();if(a!==u){n=g(l,r);if(jr(l,n)||jr(r,n)){r[0]+=ke;r[1]+=ke;a=v(r[0],r[1])}}if(a!==u){d=0;if(a){s.lineStart();n=g(r,l);s.point(n[0],n[1])}else{n=g(l,r);s.point(n[0],n[1]);s.lineEnd()}l=n}else if(p&&l&&h^a){var o;if(!(i&c)&&(o=g(r,l,true))){d=0;if(h){s.lineStart();s.point(o[0][0],o[0][1]);s.point(o[1][0],o[1][1]);s.lineEnd()}else{s.point(o[1][0],o[1][1]);s.lineEnd();s.lineStart();s.point(o[0][0],o[0][1])}}}if(a&&(!l||!jr(l,r))){s.point(r[0],r[1])}l=r,u=a,c=i},lineEnd:function(){if(u)s.lineEnd();l=null},clean:function(){return d|(f&&u)<<1}}}function g(e,t,r){var n=Or(e),a=Or(t);var i=[1,0,0],o=Ir(n,a),s=Pr(o,o),l=o[0],c=s-l*l;if(!c)return!r&&e;var u=E*s/c,f=-E*l/c,d=Ir(i,o),h=zr(i,u),p=zr(o,f);Rr(h,p);var v=d,g=Pr(h,v),m=Pr(v,v),_=g*g-m*(Pr(h,h)-1);if(_<0)return;var y=Math.sqrt(_),b=zr(v,(-g-y)/m);Rr(b,h);b=Fr(b);if(!r)return b;var x=e[0],w=t[0],A=e[1],T=t[1],k;if(w<x)k=x,x=w,w=k;var M=w-x,S=P(M-Se)<ke,C=S||M<ke;if(!S&&T<A)k=A,A=T,T=k;if(C?S?A+T>0^b[1]<(P(b[0]-x)<ke?A:T):A<=b[1]&&b[1]<=T:M>Se^(x<=b[0]&&b[0]<=w)){var L=zr(v,(-g+y)/m);Rr(L,h);return[b,Fr(L)]}}function m(e,t){var r=h?a:Se-a,n=0;if(e<-r)n|=1;else if(e>r)n|=2;if(t<-r)n|=4;else if(t>r)n|=8;return n}}function yn(d,h,p,v){return function(e){var t=e.a,r=e.b,n=t.x,a=t.y,i=r.x,o=r.y,s=0,l=1,c=i-n,u=o-a,f;f=d-n;if(!c&&f>0)return;f/=c;if(c<0){if(f<s)return;if(f<l)l=f}else if(c>0){if(f>l)return;if(f>s)s=f}f=p-n;if(!c&&f<0)return;f/=c;if(c<0){if(f>l)return;if(f>s)s=f}else if(c>0){if(f<s)return;if(f<l)l=f}f=h-a;if(!u&&f>0)return;f/=u;if(u<0){if(f<s)return;if(f<l)l=f}else if(u>0){if(f>l)return;if(f>s)s=f}f=v-a;if(!u&&f<0)return;f/=u;if(u<0){if(f>l)return;if(f>s)s=f}else if(u>0){if(f<s)return;if(f<l)l=f}if(s>0)e.a={x:n+s*c,y:a+s*u};if(l<1)e.b={x:n+l*c,y:a+l*u};return e}}var bn=1e9;I.geo.clipExtent=function(){var t,r,n,a,i,o,s={stream:function(e){if(i)i.valid=false;i=o(e);i.valid=true;return i},extent:function(e){if(!arguments.length)return[[t,r],[n,a]];o=xn(t=+e[0][0],r=+e[0][1],n=+e[1][0],a=+e[1][1]);if(i)i.valid=false,i=null;return s}};return s.extent([[0,0],[960,500]])};function xn(A,T,k,M){return function(a){var n=a,e=fn(),i=yn(A,T,k,M),o,u,s;var t={point:r,lineStart:b,lineEnd:x,polygonStart:function(){a=e;o=[];u=[];y=true},polygonEnd:function(){a=n;o=I.merge(o);var e=l([A,M]),t=y&&e,r=o.length;if(t||r){a.polygonStart();if(t){a.lineStart();c(null,null,1,a);a.lineEnd()}if(r){on(o,C,e,c,a)}a.polygonEnd()}o=u=s=null}};function l(e){var t=0,r=u.length,n=e[1];for(var a=0;a<r;++a){for(var i=1,o=u[a],s=o.length,l=o[0],c;i<s;++i){c=o[i];if(l[1]<=n){if(c[1]>n&&Ie(l,c,e)>0)++t}else{if(c[1]<=n&&Ie(l,c,e)<0)--t}l=c}}return t!==0}function c(e,t,r,n){var a=0,i=0;if(e==null||(a=S(e,r))!==(i=S(t,r))||L(e,t)<0^r>0){do{n.point(a===0||a===3?A:k,a>1?M:T)}while((a=(a+r+4)%4)!==i)}else{n.point(t[0],t[1])}}function f(e,t){return A<=e&&e<=k&&T<=t&&t<=M}function r(e,t){if(f(e,t))a.point(e,t)}var d,h,p,v,g,m,_,y;function b(){t.point=w;if(u)u.push(s=[]);_=true;m=false;v=g=NaN}function x(){if(o){w(d,h);if(p&&m)e.rejoin();o.push(e.buffer())}t.point=r;if(m)a.lineEnd()}function w(e,t){e=Math.max(-bn,Math.min(bn,e));t=Math.max(-bn,Math.min(bn,t));var r=f(e,t);if(u)s.push([e,t]);if(_){d=e,h=t,p=r;_=false;if(r){a.lineStart();a.point(e,t)}}else{if(r&&m)a.point(e,t);else{var n={a:{x:v,y:g},b:{x:e,y:t}};if(i(n)){if(!m){a.lineStart();a.point(n.a.x,n.a.y)}a.point(n.b.x,n.b.y);if(!r)a.lineEnd();y=false}else if(r){a.lineStart();a.point(e,t);y=false}}}v=e,g=t,m=r}return t};function S(e,t){return P(e[0]-A)<ke?t>0?0:3:P(e[0]-k)<ke?t>0?2:1:P(e[1]-T)<ke?t>0?1:0:t>0?3:2}function C(e,t){return L(e.x,t.x)}function L(e,t){var r=S(e,1),n=S(t,1);return r!==n?r-n:r===0?t[1]-e[1]:r===1?e[0]-t[0]:r===2?e[1]-t[1]:t[0]-e[0]}}function wn(e){var t=0,r=Se/3,n=Wn(e),a=n(t,r);a.parallels=function(e){if(!arguments.length)return[t/Se*180,r/Se*180];return n(t=e[0]*Se/180,r=e[1]*Se/180)};return a}function An(e,t){var r=Math.sin(e),n=(r+Math.sin(t))/2,a=1+r*(2*n-r),i=Math.sqrt(a)/n;function o(e,t){var r=Math.sqrt(a-2*n*Math.sin(t))/n;return[r*Math.sin(e*=n),i-r*Math.cos(e)]}o.invert=function(e,t){var r=i-t;return[Math.atan2(e,r)/n,ze((a-(e*e+r*r)*n*n)/(2*n))]};return o}(I.geo.conicEqualArea=function(){return wn(An)}).raw=An;I.geo.albers=function(){return I.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};I.geo.albersUsa=function(){var i=I.geo.albers();var o=I.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);var s=I.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);var n,a={point:function(e,t){n=[e,t]}},l,c,u;function f(e){var t=e[0],r=e[1];n=null;(l(t,r),n)||(c(t,r),n)||u(t,r);return n}f.invert=function(e){var t=i.scale(),r=i.translate(),n=(e[0]-r[0])/t,a=(e[1]-r[1])/t;return(a>=.12&&a<.234&&n>=-.425&&n<-.214?o:a>=.166&&a<.234&&n>=-.214&&n<-.115?s:i).invert(e)};f.stream=function(e){var r=i.stream(e),n=o.stream(e),a=s.stream(e);return{point:function(e,t){r.point(e,t);n.point(e,t);a.point(e,t)},sphere:function(){r.sphere();n.sphere();a.sphere()},lineStart:function(){r.lineStart();n.lineStart();a.lineStart()},lineEnd:function(){r.lineEnd();n.lineEnd();a.lineEnd()},polygonStart:function(){r.polygonStart();n.polygonStart();a.polygonStart()},polygonEnd:function(){r.polygonEnd();n.polygonEnd();a.polygonEnd()}}};f.precision=function(e){if(!arguments.length)return i.precision();i.precision(e);o.precision(e);s.precision(e);return f};f.scale=function(e){if(!arguments.length)return i.scale();i.scale(e);o.scale(e*.35);s.scale(e);return f.translate(i.translate())};f.translate=function(e){if(!arguments.length)return i.translate();var t=i.scale(),r=+e[0],n=+e[1];l=i.translate(e).clipExtent([[r-.455*t,n-.238*t],[r+.455*t,n+.238*t]]).stream(a).point;c=o.translate([r-.307*t,n+.201*t]).clipExtent([[r-.425*t+ke,n+.12*t+ke],[r-.214*t-ke,n+.234*t-ke]]).stream(a).point;u=s.translate([r-.205*t,n+.212*t]).clipExtent([[r-.214*t+ke,n+.166*t+ke],[r-.115*t-ke,n+.234*t-ke]]).stream(a).point;return f};return f.scale(1070)};var Tn,kn,Mn={point:E,lineStart:E,lineEnd:E,polygonStart:function(){kn=0;Mn.lineStart=Sn},polygonEnd:function(){Mn.lineStart=Mn.lineEnd=Mn.point=E;Tn+=P(kn/2)}};function Sn(){var r,n,a,i;Mn.point=function(e,t){Mn.point=o;r=a=e,n=i=t};function o(e,t){kn+=i*e-a*t;a=e,i=t}Mn.lineEnd=function(){o(r,n)}}var Cn,Ln,En,Dn;var On={point:Pn,lineStart:E,lineEnd:E,polygonStart:E,polygonEnd:E};function Pn(e,t){if(e<Cn)Cn=e;if(e>En)En=e;if(t<Ln)Ln=t;if(t>Dn)Dn=t}function In(){var r=Rn(4.5),n=[];var a={point:e,lineStart:function(){a.point=t},lineEnd:o,polygonStart:function(){a.lineEnd=s},polygonEnd:function(){a.lineEnd=o;a.point=e},pointRadius:function(e){r=Rn(e);return a},result:function(){if(n.length){var e=n.join("");n=[];return e}}};function e(e,t){n.push("M",e,",",t,r)}function t(e,t){n.push("M",e,",",t);a.point=i}function i(e,t){n.push("L",e,",",t)}function o(){a.point=e}function s(){n.push("Z")}return a}function Rn(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var zn={point:Nn,lineStart:Fn,lineEnd:jn,polygonStart:function(){zn.lineStart=Bn},polygonEnd:function(){zn.point=Nn;zn.lineStart=Fn;zn.lineEnd=jn}};function Nn(e,t){Ur+=e;Vr+=t;++qr}function Fn(){var i,o;zn.point=function(e,t){zn.point=r;Nn(i=e,o=t)};function r(e,t){var r=e-i,n=t-o,a=Math.sqrt(r*r+n*n);Yr+=a*(i+e)/2;Gr+=a*(o+t)/2;Wr+=a;Nn(i=e,o=t)}}function jn(){zn.point=Nn}function Bn(){var r,n,i,o;zn.point=function(e,t){zn.point=a;Nn(r=i=e,n=o=t)};function a(e,t){var r=e-i,n=t-o,a=Math.sqrt(r*r+n*n);Yr+=a*(i+e)/2;Gr+=a*(o+t)/2;Wr+=a;a=o*e-i*t;Xr+=a*(i+e);Zr+=a*(o+t);Jr+=a*3;Nn(i=e,o=t)}zn.lineEnd=function(){a(r,n)}}function Hn(r){var n=4.5;var a={point:e,lineStart:function(){a.point=t},lineEnd:o,polygonStart:function(){a.lineEnd=s},polygonEnd:function(){a.lineEnd=o;a.point=e},pointRadius:function(e){n=e;return a},result:E};function e(e,t){r.moveTo(e+n,t);r.arc(e,t,n,0,Ce)}function t(e,t){r.moveTo(e,t);a.point=i}function i(e,t){r.lineTo(e,t)}function o(){a.point=e}function s(){r.closePath()}return a}function Un(L){var E=.5,D=Math.cos(30*De),w=16;function t(e){return(w?n:r)(e)}function r(r){return Yn(r,function(e,t){e=L(e,t);r.point(e[0],e[1])})}function n(a){var r,n,i,o,s,l,c,u,f,d,h,p,v;var g={point:e,lineStart:t,lineEnd:_,polygonStart:function(){a.polygonStart();g.lineStart=y},polygonEnd:function(){a.polygonEnd();g.lineStart=t}};function e(e,t){e=L(e,t);a.point(e[0],e[1])}function t(){f=NaN;g.point=m;a.lineStart()}function m(e,t){var r=Or([e,t]),n=L(e,t);O(f,d,u,h,p,v,f=n[0],d=n[1],u=e,h=r[0],p=r[1],v=r[2],w,a);a.point(f,d)}function _(){g.point=e;a.lineEnd()}function y(){t();g.point=b;g.lineEnd=x}function b(e,t){m(r=e,n=t),i=f,o=d,s=h,l=p,c=v;g.point=m}function x(){O(f,d,u,h,p,v,i,o,r,s,l,c,w,a);g.lineEnd=_;_()}return g}function O(e,t,r,n,a,i,o,s,l,c,u,f,d,h){var p=o-e,v=s-t,g=p*p+v*v;if(g>4*E&&d--){var m=n+c,_=a+u,y=i+f,b=Math.sqrt(m*m+_*_+y*y),x=Math.asin(y/=b),w=P(P(y)-1)<ke||P(r-l)<ke?(r+l)/2:Math.atan2(_,m),A=L(w,x),T=A[0],k=A[1],M=T-e,S=k-t,C=v*M-p*S;if(C*C/g>E||P((p*M+v*S)/g-.5)>.3||n*c+a*u+i*f<D){O(e,t,r,n,a,i,T,k,w,m/=b,_/=b,y,d,h);h.point(T,k);O(T,k,w,m,_,y,o,s,l,c,u,f,d,h)}}}t.precision=function(e){if(!arguments.length)return Math.sqrt(E);w=(E=e*e)>0&&16;return t};return t}I.geo.path=function(){var t=4.5,r,n,a,i,o;function s(e){if(e){if(typeof t==="function")i.pointRadius(+t.apply(this,arguments));if(!o||!o.valid)o=a(i);I.geo.stream(e,o)}return i.result()}s.area=function(e){Tn=0;I.geo.stream(e,a(Mn));return Tn};s.centroid=function(e){Ur=Vr=qr=Yr=Gr=Wr=Xr=Zr=Jr=0;I.geo.stream(e,a(zn));return Jr?[Xr/Jr,Zr/Jr]:Wr?[Yr/Wr,Gr/Wr]:qr?[Ur/qr,Vr/qr]:[NaN,NaN]};s.bounds=function(e){En=Dn=-(Cn=Ln=Infinity);I.geo.stream(e,a(On));return[[Cn,Ln],[En,Dn]]};s.projection=function(e){if(!arguments.length)return r;a=(r=e)?e.stream||Vn(e):N;return l()};s.context=function(e){if(!arguments.length)return n;i=(n=e)==null?new In:new Hn(e);if(typeof t!=="function")i.pointRadius(t);return l()};s.pointRadius=function(e){if(!arguments.length)return t;t=typeof e==="function"?e:(i.pointRadius(+e),+e);return s};function l(){o=null;return s}return s.projection(I.geo.albersUsa()).context(null)};function Vn(r){var t=Un(function(e,t){return r([e*Oe,t*Oe])});return function(e){return Xn(t(e))}}I.geo.transform=function(n){return{stream:function(e){var t=new qn(e);for(var r in n)t[r]=n[r];return t}}};function qn(e){this.stream=e}qn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Yn(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}I.geo.projection=Gn;I.geo.projectionMutator=Wn;function Gn(e){return Wn(function(){return e})()}function Wn(e){var r,t,n,a=Un(function(e,t){e=r(e,t);return[e[0]*i+h,p-e[1]*i]}),i=150,o=480,s=250,l=0,c=0,u=0,f=0,d=0,h,p,v=hn,g=N,m=null,_=null,y;function b(e){e=n(e[0]*De,e[1]*De);return[e[0]*i+h,p-e[1]*i]}function x(e){e=n.invert((e[0]-h)/i,(p-e[1])/i);return e&&[e[0]*Oe,e[1]*Oe]}b.stream=function(e){if(y)y.valid=false;y=Xn(v(t,a(g(e))));y.valid=true;return y};b.clipAngle=function(e){if(!arguments.length)return m;v=e==null?(m=e,hn):_n((m=+e)*De);return A()};b.clipExtent=function(e){if(!arguments.length)return _;_=e;g=e?xn(e[0][0],e[0][1],e[1][0],e[1][1]):N;return A()};b.scale=function(e){if(!arguments.length)return i;i=+e;return w()};b.translate=function(e){if(!arguments.length)return[o,s];o=+e[0];s=+e[1];return w()};b.center=function(e){if(!arguments.length)return[l*Oe,c*Oe];l=e[0]%360*De;c=e[1]%360*De;return w()};b.rotate=function(e){if(!arguments.length)return[u*Oe,f*Oe,d*Oe];u=e[0]%360*De;f=e[1]%360*De;d=e.length>2?e[2]%360*De:0;return w()};I.rebind(b,a,"precision");function w(){n=nn(t=$n(u,f,d),r);var e=r(l,c);h=o-e[0]*i;p=s+e[1]*i;return A()}function A(){if(y)y.valid=false,y=null;return b}return function(){r=e.apply(this,arguments);b.invert=r.invert&&x;return w()}}function Xn(r){return Yn(r,function(e,t){r.point(e*De,t*De)})}function Zn(e,t){return[e,t]}(I.geo.equirectangular=function(){return Gn(Zn)}).raw=Zn.invert=Zn;I.geo.rotation=function(t){t=$n(t[0]%360*De,t[1]*De,t.length>2?t[2]*De:0);function e(e){e=t(e[0]*De,e[1]*De);return e[0]*=Oe,e[1]*=Oe,e}e.invert=function(e){e=t.invert(e[0]*De,e[1]*De);return e[0]*=Oe,e[1]*=Oe,e};return e};function Jn(e,t){return[e>Se?e-Ce:e<-Se?e+Ce:e,t]}Jn.invert=Zn;function $n(e,t,r){return e?t||r?nn(Kn(e),ea(t,r)):Kn(e):t||r?ea(t,r):Jn}function Qn(r){return function(e,t){return e+=r,[e>Se?e-Ce:e<-Se?e+Ce:e,t]}}function Kn(e){var t=Qn(e);t.invert=Qn(-e);return t}function ea(e,t){var s=Math.cos(e),l=Math.sin(e),c=Math.cos(t),u=Math.sin(t);function r(e,t){var r=Math.cos(t),n=Math.cos(e)*r,a=Math.sin(e)*r,i=Math.sin(t),o=i*s+n*l;return[Math.atan2(a*c-o*u,n*s-i*l),ze(o*c+a*u)]}r.invert=function(e,t){var r=Math.cos(t),n=Math.cos(e)*r,a=Math.sin(e)*r,i=Math.sin(t),o=i*c-a*u;return[Math.atan2(a*c+i*u,n*s+o*l),ze(o*s-n*l)]};return r}I.geo.circle=function(){var t=[0,0],r,n=6,a;function i(){var e=typeof t==="function"?t.apply(this,arguments):t,r=$n(-e[0]*De,-e[1]*De,0).invert,n=[];a(null,null,1,{point:function(e,t){n.push(e=r(e,t));e[0]*=Oe,e[1]*=Oe}});return{type:"Polygon",coordinates:[n]}}i.origin=function(e){if(!arguments.length)return t;t=e;return i};i.angle=function(e){if(!arguments.length)return r;a=ta((r=+e)*De,n*De);return i};i.precision=function(e){if(!arguments.length)return n;a=ta(r*De,(n=+e)*De);return i};return i.angle(90)};function ta(s,l){var c=Math.cos(s),u=Math.sin(s);return function(e,t,r,n){var a=r*l;if(e!=null){e=ra(c,e);t=ra(c,t);if(r>0?e<t:e>t)e+=r*Ce}else{e=s+r*Ce;t=s-.5*a}for(var i,o=e;r>0?o>t:o<t;o-=a){n.point((i=Fr([c,-u*Math.cos(o),-u*Math.sin(o)]))[0],i[1])}}}function ra(e,t){var r=Or(t);r[0]-=e;Nr(r);var n=Re(-r[1]);return((-r[2]<0?-n:n)+2*Math.PI-ke)%(2*Math.PI)}I.geo.distance=function(e,t){var r=(t[0]-e[0])*De,n=e[1]*De,a=t[1]*De,i=Math.sin(r),o=Math.cos(r),s=Math.sin(n),l=Math.cos(n),c=Math.sin(a),u=Math.cos(a),f;return Math.atan2(Math.sqrt((f=u*i)*f+(f=l*c-s*u*o)*f),s*c+l*u*o)};I.geo.graticule=function(){var t,r,n,a,i,o,s,l,c=10,u=c,f=90,d=360,h,p,v,g,m=2.5;function _(){return{type:"MultiLineString",coordinates:e()}}function e(){return I.range(Math.ceil(a/f)*f,n,f).map(v).concat(I.range(Math.ceil(l/d)*d,s,d).map(g)).concat(I.range(Math.ceil(r/c)*c,t,c).filter(function(e){return P(e%f)>ke}).map(h)).concat(I.range(Math.ceil(o/u)*u,i,u).filter(function(e){return P(e%d)>ke}).map(p))}_.lines=function(){return e().map(function(e){return{type:"LineString",coordinates:e}})};_.outline=function(){return{type:"Polygon",coordinates:[v(a).concat(g(s).slice(1),v(n).reverse().slice(1),g(l).reverse().slice(1))]}};_.extent=function(e){if(!arguments.length)return _.minorExtent();return _.majorExtent(e).minorExtent(e)};_.majorExtent=function(e){if(!arguments.length)return[[a,l],[n,s]];a=+e[0][0],n=+e[1][0];l=+e[0][1],s=+e[1][1];if(a>n)e=a,a=n,n=e;if(l>s)e=l,l=s,s=e;return _.precision(m)};_.minorExtent=function(e){if(!arguments.length)return[[r,o],[t,i]];r=+e[0][0],t=+e[1][0];o=+e[0][1],i=+e[1][1];if(r>t)e=r,r=t,t=e;if(o>i)e=o,o=i,i=e;return _.precision(m)};_.step=function(e){if(!arguments.length)return _.minorStep();return _.majorStep(e).minorStep(e)};_.majorStep=function(e){if(!arguments.length)return[f,d];f=+e[0],d=+e[1];return _};_.minorStep=function(e){if(!arguments.length)return[c,u];c=+e[0],u=+e[1];return _};_.precision=function(e){if(!arguments.length)return m;m=+e;h=na(o,i,90);p=aa(r,t,m);v=na(l,s,90);g=aa(a,n,m);return _};return _.majorExtent([[-180,-90+ke],[180,90-ke]]).minorExtent([[-180,-80-ke],[180,80+ke]])};function na(e,t,r){var n=I.range(e,t-ke,r).concat(t);return function(t){return n.map(function(e){return[t,e]})}}function aa(e,t,r){var n=I.range(e,t-ke,r).concat(t);return function(t){return n.map(function(e){return[e,t]})}}function ia(e){return e.source}function oa(e){return e.target}I.geo.greatArc=function(){var t=ia,r,n=oa,a;function i(){return{type:"LineString",coordinates:[r||t.apply(this,arguments),a||n.apply(this,arguments)]}}i.distance=function(){return I.geo.distance(r||t.apply(this,arguments),a||n.apply(this,arguments))};i.source=function(e){if(!arguments.length)return t;t=e,r=typeof e==="function"?null:e;return i};i.target=function(e){if(!arguments.length)return n;n=e,a=typeof e==="function"?null:e;return i};i.precision=function(){return arguments.length?i:0};return i};I.geo.interpolate=function(e,t){return sa(e[0]*De,e[1]*De,t[0]*De,t[1]*De)};function sa(e,t,r,n){var a=Math.cos(t),o=Math.sin(t),i=Math.cos(n),s=Math.sin(n),l=a*Math.cos(e),c=a*Math.sin(e),u=i*Math.cos(r),f=i*Math.sin(r),d=2*Math.asin(Math.sqrt(Be(n-t)+a*i*Be(r-e))),h=1/Math.sin(d);var p=d?function(e){var t=Math.sin(e*=d)*h,r=Math.sin(d-e)*h,n=r*l+t*u,a=r*c+t*f,i=r*o+t*s;return[Math.atan2(a,n)*Oe,Math.atan2(i,Math.sqrt(n*n+a*a))*Oe]}:function(){return[e*Oe,t*Oe]};p.distance=d;return p}I.geo.length=function(e){la=0;I.geo.stream(e,ca);return la};var la;var ca={sphere:E,point:E,lineStart:ua,lineEnd:E,polygonStart:E,polygonEnd:E};function ua(){var o,s,l;ca.point=function(e,t){o=e*De,s=Math.sin(t*=De),l=Math.cos(t);ca.point=r};ca.lineEnd=function(){ca.point=ca.lineEnd=E};function r(e,t){var r=Math.sin(t*=De),n=Math.cos(t),a=P((e*=De)-o),i=Math.cos(a);la+=Math.atan2(Math.sqrt((a=n*Math.sin(a))*a+(a=l*r-s*n*i)*a),s*r+l*n*i);o=e,s=r,l=n}}function fa(i,o){function e(e,t){var r=Math.cos(e),n=Math.cos(t),a=i(r*n);return[a*n*Math.sin(e),a*Math.sin(t)]}e.invert=function(e,t){var r=Math.sqrt(e*e+t*t),n=o(r),a=Math.sin(n),i=Math.cos(n);return[Math.atan2(e*a,r*i),Math.asin(r&&t*a/r)]};return e}var da=fa(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(I.geo.azimuthalEqualArea=function(){return Gn(da)}).raw=da;var ha=fa(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},N);(I.geo.azimuthalEquidistant=function(){return Gn(ha)}).raw=ha;function pa(e,t){var r=Math.cos(e),n=function(e){return Math.tan(Se/4+e/2)},a=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(n(t)/n(e)),i=r*Math.pow(n(e),a)/a;if(!a)return ma;function o(e,t){if(i>0){if(t<-Ee+ke)t=-Ee+ke}else{if(t>Ee-ke)t=Ee-ke}var r=i/Math.pow(n(t),a);return[r*Math.sin(a*e),i-r*Math.cos(a*e)]}o.invert=function(e,t){var r=i-t,n=Pe(a)*Math.sqrt(e*e+r*r);return[Math.atan2(e,r)/a,2*Math.atan(Math.pow(i/n,1/a))-Ee]};return o}(I.geo.conicConformal=function(){return wn(pa)}).raw=pa;function va(e,t){var r=Math.cos(e),n=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),a=r/n+e;if(P(n)<ke)return Zn;function i(e,t){var r=a-t;return[r*Math.sin(n*e),a-r*Math.cos(n*e)]}i.invert=function(e,t){var r=a-t;return[Math.atan2(e,r)/n,a-Pe(n)*Math.sqrt(e*e+r*r)]};return i}(I.geo.conicEquidistant=function(){return wn(va)}).raw=va;var ga=fa(function(e){return 1/e},Math.atan);(I.geo.gnomonic=function(){return Gn(ga)}).raw=ga;function ma(e,t){return[e,Math.log(Math.tan(Se/4+t/2))]}ma.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Ee]};function _a(e){var a=Gn(e),i=a.scale,o=a.translate,s=a.clipExtent,l;a.scale=function(){var e=i.apply(a,arguments);return e===a?l?a.clipExtent(null):a:e};a.translate=function(){var e=o.apply(a,arguments);return e===a?l?a.clipExtent(null):a:e};a.clipExtent=function(e){var t=s.apply(a,arguments);if(t===a){if(l=e==null){var r=Se*i(),n=o();s([[n[0]-r,n[1]-r],[n[0]+r,n[1]+r]])}}else if(l){t=null}return t};return a.clipExtent(null)}(I.geo.mercator=function(){return _a(ma)}).raw=ma;var ya=fa(function(){return 1},Math.asin);(I.geo.orthographic=function(){return Gn(ya)}).raw=ya;var ba=fa(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(I.geo.stereographic=function(){return Gn(ba)}).raw=ba;function xa(e,t){return[Math.log(Math.tan(Se/4+t/2)),-e]}xa.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Ee]};(I.geo.transverseMercator=function(){var e=_a(xa),t=e.center,r=e.rotate;e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])};e.rotate=function(e){return e?r([e[0],e[1],e.length>2?e[2]+90:90]):(e=r(),[e[0],e[1],e[2]-90])};return r([0,0,90])}).raw=xa;I.geom={};function wa(e){return e[0]}function Aa(e){return e[1]}I.geom.hull=function(e){var d=wa,h=Aa;if(arguments.length)return t(e);function t(e){if(e.length<3)return[];var t=wt(d),r=wt(h),n,a=e.length,i=[],o=[];for(n=0;n<a;n++){i.push([+t.call(this,e[n],n),+r.call(this,e[n],n),n])}i.sort(ka);for(n=0;n<a;n++)o.push([i[n][0],-i[n][1]]);var s=Ta(i),l=Ta(o);var c=l[0]===s[0],u=l[l.length-1]===s[s.length-1],f=[];for(n=s.length-1;n>=0;--n)f.push(e[i[s[n]][2]]);for(n=+c;n<l.length-u;++n)f.push(e[i[l[n]][2]]);return f}t.x=function(e){return arguments.length?(d=e,t):d};t.y=function(e){return arguments.length?(h=e,t):h};return t};function Ta(e){var t=e.length,r=[0,1],n=2;for(var a=2;a<t;a++){while(n>1&&Ie(e[r[n-2]],e[r[n-1]],e[a])<=0)--n;r[n++]=a}return r.slice(0,n)}function ka(e,t){return e[0]-t[0]||e[1]-t[1]}I.geom.polygon=function(e){U(e,Ma);return e};var Ma=I.geom.polygon.prototype=[];Ma.area=function(){var e=-1,t=this.length,r,n=this[t-1],a=0;while(++e<t){r=n;n=this[e];a+=r[1]*n[0]-r[0]*n[1]}return a*.5};Ma.centroid=function(e){var t=-1,r=this.length,n=0,a=0,i,o=this[r-1],s;if(!arguments.length)e=-1/(6*this.area());while(++t<r){i=o;o=this[t];s=i[0]*o[1]-o[0]*i[1];n+=(i[0]+o[0])*s;a+=(i[1]+o[1])*s}return[n*e,a*e]};Ma.clip=function(e){var t,r=La(e),n=-1,a=this.length-La(this),i,o,s=this[a-1],l,c,u;while(++n<a){t=e.slice();e.length=0;l=this[n];c=t[(o=t.length-r)-1];i=-1;while(++i<o){u=t[i];if(Sa(u,s,l)){if(!Sa(c,s,l)){e.push(Ca(c,u,s,l))}e.push(u)}else if(Sa(c,s,l)){e.push(Ca(c,u,s,l))}c=u}if(r)e.push(e[0]);s=l}return e};function Sa(e,t,r){return(r[0]-t[0])*(e[1]-t[1])<(r[1]-t[1])*(e[0]-t[0])}function Ca(e,t,r,n){var a=e[0],i=r[0],o=t[0]-a,s=n[0]-i,l=e[1],c=r[1],u=t[1]-l,f=n[1]-c,d=(s*(l-c)-f*(a-i))/(f*o-s*u);return[a+d*o,l+d*u]}function La(e){var t=e[0],r=e[e.length-1];return!(t[0]-r[0]||t[1]-r[1])}var Ea,Da,Oa,Pa=[],Ia,Ra,za=[];function Na(){ai(this);this.edge=this.site=this.circle=null}function Fa(e){var t=Pa.pop()||new Na;t.site=e;return t}function ja(e){Za(e);Oa.remove(e);Pa.push(e);ai(e)}function Ba(e){var t=e.circle,r=t.x,n=t.cy,a={x:r,y:n},i=e.P,o=e.N,s=[e];ja(e);var l=i;while(l.circle&&P(r-l.circle.x)<ke&&P(n-l.circle.cy)<ke){i=l.P;s.unshift(l);ja(l);l=i}s.unshift(l);Za(l);var c=o;while(c.circle&&P(r-c.circle.x)<ke&&P(n-c.circle.cy)<ke){o=c.N;s.push(c);ja(c);c=o}s.push(c);Za(c);var u=s.length,f;for(f=1;f<u;++f){c=s[f];l=s[f-1];ti(c.edge,l.site,c.site,a)}l=s[0];c=s[u-1];c.edge=Ka(l.site,c.site,null,a);Xa(l);Xa(c)}function Ha(e){var t=e.x,r=e.y,n,a,i,o,s=Oa._;while(s){i=Ua(s,r)-t;if(i>ke)s=s.L;else{o=t-Va(s,r);if(o>ke){if(!s.R){n=s;break}s=s.R}else{if(i>-ke){n=s.P;a=s}else if(o>-ke){n=s;a=s.N}else{n=a=s}break}}}var l=Fa(e);Oa.insert(n,l);if(!n&&!a)return;if(n===a){Za(n);a=Fa(n.site);Oa.insert(l,a);l.edge=a.edge=Ka(n.site,l.site);Xa(n);Xa(a);return}if(!a){l.edge=Ka(n.site,l.site);return}Za(n);Za(a);var c=n.site,u=c.x,f=c.y,d=e.x-u,h=e.y-f,p=a.site,v=p.x-u,g=p.y-f,m=2*(d*g-h*v),_=d*d+h*h,y=v*v+g*g,b={x:(g*_-h*y)/m+u,y:(d*y-v*_)/m+f};ti(a.edge,c,p,b);l.edge=Ka(c,e,null,b);a.edge=Ka(e,p,null,b);Xa(n);Xa(a)}function Ua(e,t){var r=e.site,n=r.x,a=r.y,i=a-t;if(!i)return n;var o=e.P;if(!o)return-Infinity;r=o.site;var s=r.x,l=r.y,c=l-t;if(!c)return s;var u=s-n,f=1/i-1/c,d=u/c;if(f)return(-d+Math.sqrt(d*d-2*f*(u*u/(-2*c)-l+c/2+a-i/2)))/f+n;return(n+s)/2}function Va(e,t){var r=e.N;if(r)return Ua(r,t);var n=e.site;return n.y===t?n.x:Infinity}function qa(e){this.site=e;this.edges=[]}qa.prototype.prepare=function(){var e=this.edges,t=e.length,r;while(t--){r=e[t].edge;if(!r.b||!r.a)e.splice(t,1)}e.sort(Ga);return e.length};function Ya(e){var t=e[0][0],r=e[1][0],n=e[0][1],a=e[1][1],i,o,s,l,c=Da,u=c.length,f,d,h,p,v,g;while(u--){f=c[u];if(!f||!f.prepare())continue;h=f.edges;p=h.length;d=0;while(d<p){g=h[d].end(),s=g.x,l=g.y;v=h[++d%p].start(),i=v.x,o=v.y;if(P(s-i)>ke||P(l-o)>ke){h.splice(d,0,new ri(ei(f.site,g,P(s-t)<ke&&a-l>ke?{x:t,y:P(i-t)<ke?o:a}:P(l-a)<ke&&r-s>ke?{x:P(o-a)<ke?i:r,y:a}:P(s-r)<ke&&l-n>ke?{x:r,y:P(i-r)<ke?o:n}:P(l-n)<ke&&s-t>ke?{x:P(o-n)<ke?i:t,y:n}:null),f.site,null));++p}}}}function Ga(e,t){return t.angle-e.angle}function Wa(){ai(this);this.x=this.y=this.arc=this.site=this.cy=null}function Xa(e){var t=e.P,r=e.N;if(!t||!r)return;var n=t.site,a=e.site,i=r.site;if(n===i)return;var o=a.x,s=a.y,l=n.x-o,c=n.y-s,u=i.x-o,f=i.y-s;var d=2*(l*f-c*u);if(d>=-Me)return;var h=l*l+c*c,p=u*u+f*f,v=(f*h-c*p)/d,g=(l*p-u*h)/d,f=g+s;var m=za.pop()||new Wa;m.arc=e;m.site=a;m.x=v+o;m.y=f+Math.sqrt(v*v+g*g);m.cy=f;e.circle=m;var _=null,y=Ra._;while(y){if(m.y<y.y||m.y===y.y&&m.x<=y.x){if(y.L)y=y.L;else{_=y.P;break}}else{if(y.R)y=y.R;else{_=y;break}}}Ra.insert(_,m);if(!_)Ia=m}function Za(e){var t=e.circle;if(t){if(!t.P)Ia=t.N;Ra.remove(t);za.push(t);ai(t);e.circle=null}}function Ja(e){var t=Ea,r=yn(e[0][0],e[0][1],e[1][0],e[1][1]),n=t.length,a;while(n--){a=t[n];if(!$a(a,e)||!r(a)||P(a.a.x-a.b.x)<ke&&P(a.a.y-a.b.y)<ke){a.a=a.b=null;t.splice(n,1)}}}function $a(e,t){var r=e.b;if(r)return true;var n=e.a,a=t[0][0],i=t[1][0],o=t[0][1],s=t[1][1],l=e.l,c=e.r,u=l.x,f=l.y,d=c.x,h=c.y,p=(u+d)/2,v=(f+h)/2,g,m;if(h===f){if(p<a||p>=i)return;if(u>d){if(!n)n={x:p,y:o};else if(n.y>=s)return;r={x:p,y:s}}else{if(!n)n={x:p,y:s};else if(n.y<o)return;r={x:p,y:o}}}else{g=(u-d)/(h-f);m=v-g*p;if(g<-1||g>1){if(u>d){if(!n)n={x:(o-m)/g,y:o};else if(n.y>=s)return;r={x:(s-m)/g,y:s}}else{if(!n)n={x:(s-m)/g,y:s};else if(n.y<o)return;r={x:(o-m)/g,y:o}}}else{if(f<h){if(!n)n={x:a,y:g*a+m};else if(n.x>=i)return;r={x:i,y:g*i+m}}else{if(!n)n={x:i,y:g*i+m};else if(n.x<a)return;r={x:a,y:g*a+m}}}}e.a=n;e.b=r;return true}function Qa(e,t){this.l=e;this.r=t;this.a=this.b=null}function Ka(e,t,r,n){var a=new Qa(e,t);Ea.push(a);if(r)ti(a,e,t,r);if(n)ti(a,t,e,n);Da[e.i].edges.push(new ri(a,e,t));Da[t.i].edges.push(new ri(a,t,e));return a}function ei(e,t,r){var n=new Qa(e,null);n.a=t;n.b=r;Ea.push(n);return n}function ti(e,t,r,n){if(!e.a&&!e.b){e.a=n;e.l=t;e.r=r}else if(e.l===r){e.b=n}else{e.a=n}}function ri(e,t,r){var n=e.a,a=e.b;this.edge=e;this.site=t;this.angle=r?Math.atan2(r.y-t.y,r.x-t.x):e.l===t?Math.atan2(a.x-n.x,n.y-a.y):Math.atan2(n.x-a.x,a.y-n.y)}ri.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ni(){this._=null}function ai(e){e.U=e.C=e.L=e.R=e.P=e.N=null}ni.prototype={insert:function(e,t){var r,n,a;if(e){t.P=e;t.N=e.N;if(e.N)e.N.P=t;e.N=t;if(e.R){e=e.R;while(e.L)e=e.L;e.L=t}else{e.R=t}r=e}else if(this._){e=si(this._);t.P=null;t.N=e;e.P=e.L=t;r=e}else{t.P=t.N=null;this._=t;r=null}t.L=t.R=null;t.U=r;t.C=true;e=t;while(r&&r.C){n=r.U;if(r===n.L){a=n.R;if(a&&a.C){r.C=a.C=false;n.C=true;e=n}else{if(e===r.R){ii(this,r);e=r;r=e.U}r.C=false;n.C=true;oi(this,n)}}else{a=n.L;if(a&&a.C){r.C=a.C=false;n.C=true;e=n}else{if(e===r.L){oi(this,r);e=r;r=e.U}r.C=false;n.C=true;ii(this,n)}}r=e.U}this._.C=false},remove:function(e){if(e.N)e.N.P=e.P;if(e.P)e.P.N=e.N;e.N=e.P=null;var t=e.U,r,n=e.L,a=e.R,i,o;if(!n)i=a;else if(!a)i=n;else i=si(a);if(t){if(t.L===e)t.L=i;else t.R=i}else{this._=i}if(n&&a){o=i.C;i.C=e.C;i.L=n;n.U=i;if(i!==a){t=i.U;i.U=e.U;e=i.R;t.L=e;i.R=a;a.U=i}else{i.U=t;t=i;e=i.R}}else{o=e.C;e=i}if(e)e.U=t;if(o)return;if(e&&e.C){e.C=false;return}do{if(e===this._)break;if(e===t.L){r=t.R;if(r.C){r.C=false;t.C=true;ii(this,t);r=t.R}if(r.L&&r.L.C||r.R&&r.R.C){if(!r.R||!r.R.C){r.L.C=false;r.C=true;oi(this,r);r=t.R}r.C=t.C;t.C=r.R.C=false;ii(this,t);e=this._;break}}else{r=t.L;if(r.C){r.C=false;t.C=true;oi(this,t);r=t.L}if(r.L&&r.L.C||r.R&&r.R.C){if(!r.L||!r.L.C){r.R.C=false;r.C=true;ii(this,r);r=t.L}r.C=t.C;t.C=r.L.C=false;oi(this,t);e=this._;break}}r.C=true;e=t;t=t.U}while(!e.C);if(e)e.C=false}};function ii(e,t){var r=t,n=t.R,a=r.U;if(a){if(a.L===r)a.L=n;else a.R=n}else{e._=n}n.U=a;r.U=n;r.R=n.L;if(r.R)r.R.U=r;n.L=r}function oi(e,t){var r=t,n=t.L,a=r.U;if(a){if(a.L===r)a.L=n;else a.R=n}else{e._=n}n.U=a;r.U=n;r.L=n.R;if(r.L)r.L.U=r;n.R=r}function si(e){while(e.L)e=e.L;return e}function li(e,t){var r=e.sort(ci).pop(),n,a,i;Ea=[];Da=new Array(e.length);Oa=new ni;Ra=new ni;while(true){i=Ia;if(r&&(!i||r.y<i.y||r.y===i.y&&r.x<i.x)){if(r.x!==n||r.y!==a){Da[r.i]=new qa(r);Ha(r);n=r.x,a=r.y}r=e.pop()}else if(i){Ba(i.arc)}else{break}}if(t)Ja(t),Ya(t);var o={cells:Da,edges:Ea};Oa=Ra=Ea=Da=null;return o}function ci(e,t){return t.y-e.y||t.x-e.x}I.geom.voronoi=function(e){var t=wa,r=Aa,n=t,a=r,f=ui;if(e)return i(e);function i(i){var o=new Array(i.length),s=f[0][0],l=f[0][1],c=f[1][0],u=f[1][1];li(d(i),f).cells.forEach(function(e,t){var r=e.edges,n=e.site,a=o[t]=r.length?r.map(function(e){var t=e.start();return[t.x,t.y]}):n.x>=s&&n.x<=c&&n.y>=l&&n.y<=u?[[s,u],[c,u],[c,l],[s,l]]:[];a.point=i[t]});return o}function d(e){return e.map(function(e,t){return{x:Math.round(n(e,t)/ke)*ke,y:Math.round(a(e,t)/ke)*ke,i:t}})}i.links=function(t){return li(d(t)).edges.filter(function(e){return e.l&&e.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})};i.triangles=function(u){var f=[];li(d(u)).cells.forEach(function(e,t){var r=e.site,n=e.edges.sort(Ga),a=-1,i=n.length,o,s,l=n[i-1].edge,c=l.l===r?l.r:l.l;while(++a<i){o=l;s=c;l=n[a].edge;c=l.l===r?l.r:l.l;if(t<s.i&&t<c.i&&fi(r,s,c)<0){f.push([u[t],u[s.i],u[c.i]])}}});return f};i.x=function(e){return arguments.length?(n=wt(t=e),i):t};i.y=function(e){return arguments.length?(a=wt(r=e),i):r};i.clipExtent=function(e){if(!arguments.length)return f===ui?null:f;f=e==null?ui:e;return i};i.size=function(e){if(!arguments.length)return f===ui?null:f&&f[1];return i.clipExtent(e&&[[0,0],e])};return i};var ui=[[-1e6,-1e6],[1e6,1e6]];function fi(e,t,r){return(e.x-r.x)*(t.y-e.y)-(e.x-t.x)*(r.y-e.y)}I.geom.delaunay=function(e){return I.geom.voronoi().triangles(e)};I.geom.quadtree=function(e,y,b,x,w){var A=wa,T=Aa,k;if(k=arguments.length){A=di;T=hi;if(k===3){w=b;x=y;b=y=0}return t(e)}function t(e){var t,r=wt(A),n=wt(T),a,i,o,s,l,c,u,f;if(y!=null){l=y,c=b,u=x,f=w}else{u=f=-(l=c=Infinity);a=[],i=[];s=e.length;if(k)for(o=0;o<s;++o){t=e[o];if(t.x<l)l=t.x;if(t.y<c)c=t.y;if(t.x>u)u=t.x;if(t.y>f)f=t.y;a.push(t.x);i.push(t.y)}else for(o=0;o<s;++o){var d=+r(t=e[o],o),h=+n(t,o);if(d<l)l=d;if(h<c)c=h;if(d>u)u=d;if(h>f)f=h;a.push(d);i.push(h)}}var p=u-l,v=f-c;if(p>v)f=c+p;else u=l+v;function g(e,t,r,n,a,i,o,s){if(isNaN(r)||isNaN(n))return;if(e.leaf){var l=e.x,c=e.y;if(l!=null){if(P(l-r)+P(c-n)<.01){m(e,t,r,n,a,i,o,s)}else{var u=e.point;e.x=e.y=e.point=null;m(e,u,l,c,a,i,o,s);m(e,t,r,n,a,i,o,s)}}else{e.x=r,e.y=n,e.point=t}}else{m(e,t,r,n,a,i,o,s)}}function m(e,t,r,n,a,i,o,s){var l=(a+o)*.5,c=(i+s)*.5,u=r>=l,f=n>=c,d=f<<1|u;e.leaf=false;e=e.nodes[d]||(e.nodes[d]=pi());if(u)a=l;else o=l;if(f)i=c;else s=c;g(e,t,r,n,a,i,o,s)}var _=pi();_.add=function(e){g(_,e,+r(e,++o),+n(e,o),l,c,u,f)};_.visit=function(e){vi(e,_,l,c,u,f)};_.find=function(e){return gi(_,e[0],e[1],l,c,u,f)};o=-1;if(y==null){while(++o<s){g(_,e[o],a[o],i[o],l,c,u,f)}--o}else e.forEach(_.add);a=i=e=t=null;return _}t.x=function(e){return arguments.length?(A=e,t):A};t.y=function(e){return arguments.length?(T=e,t):T};t.extent=function(e){if(!arguments.length)return y==null?null:[[y,b],[x,w]];if(e==null)y=b=x=w=null;else y=+e[0][0],b=+e[0][1],x=+e[1][0],w=+e[1][1];return t};t.size=function(e){if(!arguments.length)return y==null?null:[x-y,w-b];if(e==null)y=b=x=w=null;else y=b=0,x=+e[0],w=+e[1];return t};return t};function di(e){return e.x}function hi(e){return e.y}function pi(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function vi(e,t,r,n,a,i){if(!e(t,r,n,a,i)){var o=(r+a)*.5,s=(n+i)*.5,l=t.nodes;if(l[0])vi(e,l[0],r,n,o,s);if(l[1])vi(e,l[1],o,n,a,s);if(l[2])vi(e,l[2],r,s,o,i);if(l[3])vi(e,l[3],o,s,a,i)}}function gi(e,_,y,b,x,w,A){var T=Infinity,k;(function e(t,r,n,a,i){if(r>w||n>A||a<b||i<x)return;if(o=t.point){var o,s=_-t.x,l=y-t.y,c=s*s+l*l;if(c<T){var u=Math.sqrt(T=c);b=_-u,x=y-u;w=_+u,A=y+u;k=o}}var f=t.nodes,d=(r+a)*.5,h=(n+i)*.5,p=_>=d,v=y>=h;for(var g=v<<1|p,m=g+4;g<m;++g){if(t=f[g&3])switch(g&3){case 0:e(t,r,n,d,h);break;case 1:e(t,d,n,a,h);break;case 2:e(t,r,h,d,i);break;case 3:e(t,d,h,a,i);break}}})(e,b,x,w,A);return k}I.interpolateRgb=mi;function mi(e,t){e=I.rgb(e);t=I.rgb(t);var r=e.r,n=e.g,a=e.b,i=t.r-r,o=t.g-n,s=t.b-a;return function(e){return"#"+vt(Math.round(r+i*e))+vt(Math.round(n+o*e))+vt(Math.round(a+s*e))}}I.interpolateObject=_i;function _i(e,t){var r={},n={},a;for(a in e){if(a in t){r[a]=Ai(e[a],t[a])}else{n[a]=e[a]}}for(a in t){if(!(a in e)){n[a]=t[a]}}return function(e){for(a in r)n[a]=r[a](e);return n}}I.interpolateNumber=yi;function yi(t,r){t=+t,r=+r;return function(e){return t*(1-e)+r*e}}I.interpolateString=bi;function bi(e,n){var t=xi.lastIndex=wi.lastIndex=0,r,a,i,o=-1,s=[],l=[];e=e+"",n=n+"";while((r=xi.exec(e))&&(a=wi.exec(n))){if((i=a.index)>t){i=n.slice(t,i);if(s[o])s[o]+=i;else s[++o]=i}if((r=r[0])===(a=a[0])){if(s[o])s[o]+=a;else s[++o]=a}else{s[++o]=null;l.push({i:o,x:yi(r,a)})}t=wi.lastIndex}if(t<n.length){i=n.slice(t);if(s[o])s[o]+=i;else s[++o]=i}return s.length<2?l[0]?(n=l[0].x,function(e){return n(e)+""}):function(){return n}:(n=l.length,function(e){for(var t=0,r;t<n;++t)s[(r=l[t]).i]=r.x(e);return s.join("")})}var xi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wi=new RegExp(xi.source,"g");I.interpolate=Ai;function Ai(e,t){var r=I.interpolators.length,n;while(--r>=0&&!(n=I.interpolators[r](e,t)));return n}I.interpolators=[function(e,t){var r=typeof t;return(r==="string"?xt.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?mi:bi:t instanceof We?mi:Array.isArray(t)?Ti:r==="object"&&isNaN(t)?_i:yi)(e,t)}];I.interpolateArray=Ti;function Ti(e,t){var r=[],n=[],a=e.length,i=t.length,o=Math.min(e.length,t.length),s;for(s=0;s<o;++s)r.push(Ai(e[s],t[s]));for(;s<a;++s)n[s]=e[s];for(;s<i;++s)n[s]=t[s];return function(e){for(s=0;s<o;++s)n[s]=r[s](e);return n}}var ki=function(){return N};var Mi=I.map({linear:ki,poly:Ii,quad:function(){return Di},cubic:function(){return Oi},sin:function(){return Ri},exp:function(){return zi},circle:function(){return Ni},elastic:Fi,back:ji,bounce:function(){return Bi}});var Si=I.map({in:N,out:Li,"in-out":Ei,"out-in":function(e){return Ei(Li(e))}});I.ease=function(e){var t=e.indexOf("-"),r=t>=0?e.slice(0,t):e,n=t>=0?e.slice(t+1):"in";r=Mi.get(r)||ki;n=Si.get(n)||N;return Ci(n(r.apply(null,a.call(arguments,1))))};function Ci(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function Li(t){return function(e){return 1-t(1-e)}}function Ei(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function Di(e){return e*e}function Oi(e){return e*e*e}function Pi(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)}function Ii(t){return function(e){return Math.pow(e,t)}}function Ri(e){return 1-Math.cos(e*Ee)}function zi(e){return Math.pow(2,10*(e-1))}function Ni(e){return 1-Math.sqrt(1-e*e)}function Fi(t,r){var n;if(arguments.length<2)r=.45;if(arguments.length)n=r/Ce*Math.asin(1/t);else t=1,n=r/4;return function(e){return 1+t*Math.pow(2,-10*e)*Math.sin((e-n)*Ce/r)}}function ji(t){if(!t)t=1.70158;return function(e){return e*e*((t+1)*e-t)}}function Bi(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}I.interpolateHcl=Hi;function Hi(e,t){e=I.hcl(e);t=I.hcl(t);var r=e.h,n=e.c,a=e.l,i=t.h-r,o=t.c-n,s=t.l-a;if(isNaN(o))o=0,n=isNaN(n)?t.c:n;if(isNaN(i))i=0,r=isNaN(r)?t.h:r;else if(i>180)i-=360;else if(i<-180)i+=360;return function(e){return Ke(r+i*e,n+o*e,a+s*e)+""}}I.interpolateHsl=Ui;function Ui(e,t){e=I.hsl(e);t=I.hsl(t);var r=e.h,n=e.s,a=e.l,i=t.h-r,o=t.s-n,s=t.l-a;if(isNaN(o))o=0,n=isNaN(n)?t.s:n;if(isNaN(i))i=0,r=isNaN(r)?t.h:r;else if(i>180)i-=360;else if(i<-180)i+=360;return function(e){return Je(r+i*e,n+o*e,a+s*e)+""}}I.interpolateLab=Vi;function Vi(e,t){e=I.lab(e);t=I.lab(t);var r=e.l,n=e.a,a=e.b,i=t.l-r,o=t.a-n,s=t.b-a;return function(e){return ot(r+i*e,n+o*e,a+s*e)+""}}I.interpolateRound=qi;function qi(t,r){r-=t;return function(e){return Math.round(t+r*e)}}I.transform=function(e){var r=R.createElementNS(I.ns.prefix.svg,"g");return(I.transform=function(e){if(e!=null){r.setAttribute("transform",e);var t=r.transform.baseVal.consolidate()}return new Yi(t?t.matrix:Zi)})(e)};function Yi(e){var t=[e.a,e.b],r=[e.c,e.d],n=Wi(t),a=Gi(t,r),i=Wi(Xi(r,t,-a))||0;if(t[0]*r[1]<r[0]*t[1]){t[0]*=-1;t[1]*=-1;n*=-1;a*=-1}this.rotate=(n?Math.atan2(t[1],t[0]):Math.atan2(-r[0],r[1]))*Oe;this.translate=[e.e,e.f];this.scale=[n,i];this.skew=i?Math.atan2(a,i)*Oe:0}Yi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Gi(e,t){return e[0]*t[0]+e[1]*t[1]}function Wi(e){var t=Math.sqrt(Gi(e,e));if(t){e[0]/=t;e[1]/=t}return t}function Xi(e,t,r){e[0]+=r*t[0];e[1]+=r*t[1];return e}var Zi={a:1,b:0,c:0,d:1,e:0,f:0};I.interpolateTransform=to;function Ji(e){return e.length?e.pop()+",":""}function $i(e,t,r,n){if(e[0]!==t[0]||e[1]!==t[1]){var a=r.push("translate(",null,",",null,")");n.push({i:a-4,x:yi(e[0],t[0])},{i:a-2,x:yi(e[1],t[1])})}else if(t[0]||t[1]){r.push("translate("+t+")")}}function Qi(e,t,r,n){if(e!==t){if(e-t>180)t+=360;else if(t-e>180)e+=360;n.push({i:r.push(Ji(r)+"rotate(",null,")")-2,x:yi(e,t)})}else if(t){r.push(Ji(r)+"rotate("+t+")")}}function Ki(e,t,r,n){if(e!==t){n.push({i:r.push(Ji(r)+"skewX(",null,")")-2,x:yi(e,t)})}else if(t){r.push(Ji(r)+"skewX("+t+")")}}function eo(e,t,r,n){if(e[0]!==t[0]||e[1]!==t[1]){var a=r.push(Ji(r)+"scale(",null,",",null,")");n.push({i:a-4,x:yi(e[0],t[0])},{i:a-2,x:yi(e[1],t[1])})}else if(t[0]!==1||t[1]!==1){r.push(Ji(r)+"scale("+t+")")}}function to(e,t){var a=[],i=[];e=I.transform(e),t=I.transform(t);$i(e.translate,t.translate,a,i);Qi(e.rotate,t.rotate,a,i);Ki(e.skew,t.skew,a,i);eo(e.scale,t.scale,a,i);e=t=null;return function(e){var t=-1,r=i.length,n;while(++t<r)a[(n=i[t]).i]=n.x(e);return a.join("")}}function ro(t,r){r=(r-=t=+t)||1/r;return function(e){return(e-t)/r}}function no(t,r){r=(r-=t=+t)||1/r;return function(e){return Math.max(0,Math.min(1,(e-t)/r))}}I.layout={};I.layout.bundle=function(){return function(e){var t=[],r=-1,n=e.length;while(++r<n)t.push(ao(e[r]));return t}};function ao(e){var t=e.source,r=e.target,n=oo(t,r),a=[t];while(t!==n){t=t.parent;a.push(t)}var i=a.length;while(r!==n){a.splice(i,0,r);r=r.parent}return a}function io(e){var t=[],r=e.parent;while(r!=null){t.push(e);e=r;r=r.parent}t.push(e);return t}function oo(e,t){if(e===t)return e;var r=io(e),n=io(t),a=r.pop(),i=n.pop(),o=null;while(a===i){o=a;a=r.pop();i=n.pop()}return o}I.layout.chord=function(){var t={},g,m,_,y,b=0,x,w,A;function e(){var e={},r=[],t=I.range(y),n=[],a,i,o,s,l;g=[];m=[];a=0,s=-1;while(++s<y){i=0,l=-1;while(++l<y){i+=_[s][l]}r.push(i);n.push(I.range(y));a+=i}if(x){t.sort(function(e,t){return x(r[e],r[t])})}if(w){n.forEach(function(e,r){e.sort(function(e,t){return w(_[r][e],_[r][t])})})}a=(Ce-b*y)/a;i=0,s=-1;while(++s<y){o=i,l=-1;while(++l<y){var c=t[s],u=n[c][l],f=_[c][u],d=i,h=i+=f*a;e[c+"-"+u]={index:c,subindex:u,startAngle:d,endAngle:h,value:f}}m[c]={index:c,startAngle:o,endAngle:i,value:r[c]};i+=b}s=-1;while(++s<y){l=s-1;while(++l<y){var p=e[s+"-"+l],v=e[l+"-"+s];if(p.value||v.value){g.push(p.value<v.value?{source:v,target:p}:{source:p,target:v})}}}if(A)T()}function T(){g.sort(function(e,t){return A((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}t.matrix=function(e){if(!arguments.length)return _;y=(_=e)&&_.length;g=m=null;return t};t.padding=function(e){if(!arguments.length)return b;b=e;g=m=null;return t};t.sortGroups=function(e){if(!arguments.length)return x;x=e;g=m=null;return t};t.sortSubgroups=function(e){if(!arguments.length)return w;w=e;g=null;return t};t.sortChords=function(e){if(!arguments.length)return A;A=e;if(g)T();return t};t.chords=function(){if(!g)e();return g};t.groups=function(){if(!m)e();return m};return t};I.layout.force=function(){var a={},f=I.dispatch("start","tick","end"),d,h=[1,1],e,p,v=.9,i=ho,o=po,g=-30,u=vo,m=.1,_=.64,y=[],b=[],x,w,A;function T(c){return function(e,t,r,n){if(e.point!==c){var a=e.cx-c.x,i=e.cy-c.y,o=n-t,s=a*a+i*i;if(o*o/_<s){if(s<u){var l=e.charge/s;c.px-=a*l;c.py-=i*l}return true}if(e.point&&s&&s<u){var l=e.pointCharge/s;c.px-=a*l;c.py-=i*l}}return!e.charge}}a.tick=function(){if((p*=.99)<.005){d=null;f.end({type:"end",alpha:p=0});return true}var e=y.length,t=b.length,r,n,a,i,o,s,l,c,u;for(n=0;n<t;++n){a=b[n];i=a.source;o=a.target;c=o.x-i.x;u=o.y-i.y;if(s=c*c+u*u){s=p*w[n]*((s=Math.sqrt(s))-x[n])/s;c*=s;u*=s;o.x-=c*(l=i.weight+o.weight?i.weight/(i.weight+o.weight):.5);o.y-=u*l;i.x+=c*(l=1-l);i.y+=u*l}}if(l=p*m){c=h[0]/2;u=h[1]/2;n=-1;if(l)while(++n<e){a=y[n];a.x+=(c-a.x)*l;a.y+=(u-a.y)*l}}if(g){fo(r=I.geom.quadtree(y),p,A);n=-1;while(++n<e){if(!(a=y[n]).fixed){r.visit(T(a))}}}n=-1;while(++n<e){a=y[n];if(a.fixed){a.x=a.px;a.y=a.py}else{a.x-=(a.px-(a.px=a.x))*v;a.y-=(a.py-(a.py=a.y))*v}}f.tick({type:"tick",alpha:p})};a.nodes=function(e){if(!arguments.length)return y;y=e;return a};a.links=function(e){if(!arguments.length)return b;b=e;return a};a.size=function(e){if(!arguments.length)return h;h=e;return a};a.linkDistance=function(e){if(!arguments.length)return i;i=typeof e==="function"?e:+e;return a};a.distance=a.linkDistance;a.linkStrength=function(e){if(!arguments.length)return o;o=typeof e==="function"?e:+e;return a};a.friction=function(e){if(!arguments.length)return v;v=+e;return a};a.charge=function(e){if(!arguments.length)return g;g=typeof e==="function"?e:+e;return a};a.chargeDistance=function(e){if(!arguments.length)return Math.sqrt(u);u=e*e;return a};a.gravity=function(e){if(!arguments.length)return m;m=+e;return a};a.theta=function(e){if(!arguments.length)return Math.sqrt(_);_=e*e;return a};a.alpha=function(e){if(!arguments.length)return p;e=+e;if(p){if(e>0){p=e}else{d.c=null,d.t=NaN,d=null;f.end({type:"end",alpha:p=0})}}else if(e>0){f.start({type:"start",alpha:p=e});d=Ot(a.tick)}return a};a.start=function(){var s,l=y.length,c=b.length,e=h[0],t=h[1],u,r;for(s=0;s<l;++s){(r=y[s]).index=s;r.weight=0}for(s=0;s<c;++s){r=b[s];if(typeof r.source=="number")r.source=y[r.source];if(typeof r.target=="number")r.target=y[r.target];++r.source.weight;++r.target.weight}for(s=0;s<l;++s){r=y[s];if(isNaN(r.x))r.x=n("x",e);if(isNaN(r.y))r.y=n("y",t);if(isNaN(r.px))r.px=r.x;if(isNaN(r.py))r.py=r.y}x=[];if(typeof i==="function")for(s=0;s<c;++s)x[s]=+i.call(this,b[s],s);else for(s=0;s<c;++s)x[s]=i;w=[];if(typeof o==="function")for(s=0;s<c;++s)w[s]=+o.call(this,b[s],s);else for(s=0;s<c;++s)w[s]=o;A=[];if(typeof g==="function")for(s=0;s<l;++s)A[s]=+g.call(this,y[s],s);else for(s=0;s<l;++s)A[s]=g;function n(e,t){if(!u){u=new Array(l);for(a=0;a<l;++a){u[a]=[]}for(a=0;a<c;++a){var r=b[a];u[r.source.index].push(r.target);u[r.target.index].push(r.source)}}var n=u[s],a=-1,i=n.length,o;while(++a<i)if(!isNaN(o=n[a][e]))return o;return Math.random()*t}return a.resume()};a.resume=function(){return a.alpha(.1)};a.stop=function(){return a.alpha(0)};a.drag=function(){if(!e)e=I.behavior.drag().origin(N).on("dragstart.force",so).on("drag.force",t).on("dragend.force",lo);if(!arguments.length)return e;this.on("mouseover.force",co).on("mouseout.force",uo).call(e)};function t(e){e.px=I.event.x,e.py=I.event.y;a.resume()}return I.rebind(a,f,"on")};function so(e){e.fixed|=2}function lo(e){e.fixed&=~6}function co(e){e.fixed|=4;e.px=e.x,e.py=e.y}function uo(e){e.fixed&=~4}function fo(e,t,r){var n=0,a=0;e.charge=0;if(!e.leaf){var i=e.nodes,o=i.length,s=-1,l;while(++s<o){l=i[s];if(l==null)continue;fo(l,t,r);e.charge+=l.charge;n+=l.charge*l.cx;a+=l.charge*l.cy}}if(e.point){if(!e.leaf){e.point.x+=Math.random()-.5;e.point.y+=Math.random()-.5}var c=t*r[e.point.index];e.charge+=e.pointCharge=c;n+=c*e.point.x;a+=c*e.point.y}e.cx=n/e.charge;e.cy=a/e.charge}var ho=20,po=1,vo=Infinity;I.layout.hierarchy=function(){var s=xo,l=yo,c=bo;function u(e){var t=[e],r=[],n;e.depth=0;while((n=t.pop())!=null){r.push(n);if((i=l.call(u,n,n.depth))&&(a=i.length)){var a,i,o;while(--a>=0){t.push(o=i[a]);o.parent=n;o.depth=n.depth+1}if(c)n.value=0;n.children=i}else{if(c)n.value=+c.call(u,n,n.depth)||0;delete n.children}}_o(e,function(e){var t,r;if(s&&(t=e.children))t.sort(s);if(c&&(r=e.parent))r.value+=e.value});return r}u.sort=function(e){if(!arguments.length)return s;s=e;return u};u.children=function(e){if(!arguments.length)return l;l=e;return u};u.value=function(e){if(!arguments.length)return c;c=e;return u};u.revalue=function(e){if(c){mo(e,function(e){if(e.children)e.value=0});_o(e,function(e){var t;if(!e.children)e.value=+c.call(u,e,e.depth)||0;if(t=e.parent)t.value+=e.value})}return e};return u};function go(e,t){I.rebind(e,t,"sort","children","value");e.nodes=e;e.links=wo;return e}function mo(e,t){var r=[e];while((e=r.pop())!=null){t(e);if((a=e.children)&&(n=a.length)){var n,a;while(--n>=0)r.push(a[n])}}}function _o(e,t){var r=[e],n=[];while((e=r.pop())!=null){n.push(e);if((o=e.children)&&(i=o.length)){var a=-1,i,o;while(++a<i)r.push(o[a])}}while((e=n.pop())!=null){t(e)}}function yo(e){return e.children}function bo(e){return e.value}function xo(e,t){return t.value-e.value}function wo(e){return I.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}I.layout.partition=function(){var n=I.layout.hierarchy(),a=[1,1];function c(e,t,r,n){var a=e.children;e.x=t;e.y=e.depth*n;e.dx=r;e.dy=n;if(a&&(o=a.length)){var i=-1,o,s,l;r=e.value?r/e.value:0;while(++i<o){c(s=a[i],t,l=s.value*r,n);t+=l}}}function i(e){var t=e.children,r=0;if(t&&(a=t.length)){var n=-1,a;while(++n<a)r=Math.max(r,i(t[n]))}return 1+r}function t(e,t){var r=n.call(this,e,t);c(r[0],0,a[0],a[1]/i(r[0]));return r}t.size=function(e){if(!arguments.length)return a;a=e;return t};return go(t,n)};I.layout.pie=function(){var d=Number,h=Ao,p=0,v=Ce,g=0;function m(r){var e=r.length,n=r.map(function(e,t){return+d.call(m,e,t)}),t=+(typeof p==="function"?p.apply(this,arguments):p),a=(typeof v==="function"?v.apply(this,arguments):v)-t,i=Math.min(Math.abs(a)/e,+(typeof g==="function"?g.apply(this,arguments):g)),o=i*(a<0?-1:1),s=I.sum(n),l=s?(a-e*o)/s:0,c=I.range(e),u=[],f;if(h!=null)c.sort(h===Ao?function(e,t){return n[t]-n[e]}:function(e,t){return h(r[e],r[t])});c.forEach(function(e){u[e]={data:r[e],value:f=n[e],startAngle:t,endAngle:t+=f*l+o,padAngle:i}});return u}m.value=function(e){if(!arguments.length)return d;d=e;return m};m.sort=function(e){if(!arguments.length)return h;h=e;return m};m.startAngle=function(e){if(!arguments.length)return p;p=e;return m};m.endAngle=function(e){if(!arguments.length)return v;v=e;return m};m.padAngle=function(e){if(!arguments.length)return g;g=e;return m};return m};var Ao={};I.layout.stack=function(){var f=N,d=Lo,h=Eo,p=Mo,v=To,g=ko;function m(e,t){if(!(s=e.length))return e;var r=e.map(function(e,t){return f.call(m,e,t)});var n=r.map(function(e){return e.map(function(e,t){return[v.call(m,e,t),g.call(m,e,t)]})});var a=d.call(m,n,t);r=I.permute(r,a);n=I.permute(n,a);var i=h.call(m,n,t);var o=r[0].length,s,l,c,u;for(c=0;c<o;++c){p.call(m,r[0][c],u=i[c],n[0][c][1]);for(l=1;l<s;++l){p.call(m,r[l][c],u+=n[l-1][c][1],n[l][c][1])}}return e}m.values=function(e){if(!arguments.length)return f;f=e;return m};m.order=function(e){if(!arguments.length)return d;d=typeof e==="function"?e:So.get(e)||Lo;return m};m.offset=function(e){if(!arguments.length)return h;h=typeof e==="function"?e:Co.get(e)||Eo;return m};m.x=function(e){if(!arguments.length)return v;v=e;return m};m.y=function(e){if(!arguments.length)return g;g=e;return m};m.out=function(e){if(!arguments.length)return p;p=e;return m};return m};function To(e){return e.x}function ko(e){return e.y}function Mo(e,t,r){e.y0=t;e.y=r}var So=I.map({"inside-out":function(e){var t=e.length,r,n,a=e.map(Do),i=e.map(Oo),o=I.range(t).sort(function(e,t){return a[e]-a[t]}),s=0,l=0,c=[],u=[];for(r=0;r<t;++r){n=o[r];if(s<l){s+=i[n];c.push(n)}else{l+=i[n];u.push(n)}}return u.reverse().concat(c)},reverse:function(e){return I.range(e.length).reverse()},default:Lo});var Co=I.map({silhouette:function(e){var t=e.length,r=e[0].length,n=[],a=0,i,o,s,l=[];for(o=0;o<r;++o){for(i=0,s=0;i<t;i++)s+=e[i][o][1];if(s>a)a=s;n.push(s)}for(o=0;o<r;++o){l[o]=(a-n[o])/2}return l},wiggle:function(e){var t=e.length,r=e[0],n=r.length,a,i,o,s,l,c,u,f,d,h=[];h[0]=f=d=0;for(i=1;i<n;++i){for(a=0,s=0;a<t;++a)s+=e[a][i][1];for(a=0,l=0,u=r[i][0]-r[i-1][0];a<t;++a){for(o=0,c=(e[a][i][1]-e[a][i-1][1])/(2*u);o<a;++o){c+=(e[o][i][1]-e[o][i-1][1])/u}l+=c*e[a][i][1]}h[i]=f-=s?l/s*u:0;if(f<d)d=f}for(i=0;i<n;++i)h[i]-=d;return h},expand:function(e){var t=e.length,r=e[0].length,n=1/t,a,i,o,s=[];for(i=0;i<r;++i){for(a=0,o=0;a<t;a++)o+=e[a][i][1];if(o)for(a=0;a<t;a++)e[a][i][1]/=o;else for(a=0;a<t;a++)e[a][i][1]=n}for(i=0;i<r;++i)s[i]=0;return s},zero:Eo});function Lo(e){return I.range(e.length)}function Eo(e){var t=-1,r=e[0].length,n=[];while(++t<r)n[t]=0;return n}function Do(e){var t=1,r=0,n=e[0][1],a,i=e.length;for(;t<i;++t){if((a=e[t][1])>n){r=t;n=a}}return r}function Oo(e){return e.reduce(Po,0)}function Po(e,t){return e+t[1]}I.layout.histogram=function(){var f=true,d=Number,h=zo,p=Io;function r(e,t){var r=[],n=e.map(d,this),a=h.call(this,n,t),i=p.call(this,a,n,t),o,t=-1,s=n.length,l=i.length-1,c=f?1:1/s,u;while(++t<l){o=r[t]=[];o.dx=i[t+1]-(o.x=i[t]);o.y=0}if(l>0){t=-1;while(++t<s){u=n[t];if(u>=a[0]&&u<=a[1]){o=r[I.bisect(i,u,1,l)-1];o.y+=c;o.push(e[t])}}}return r}r.value=function(e){if(!arguments.length)return d;d=e;return r};r.range=function(e){if(!arguments.length)return h;h=wt(e);return r};r.bins=function(t){if(!arguments.length)return p;p=typeof t==="number"?function(e){return Ro(e,t)}:wt(t);return r};r.frequency=function(e){if(!arguments.length)return f;f=!!e;return r};return r};function Io(e,t){return Ro(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Ro(e,t){var r=-1,n=+e[0],a=(e[1]-n)/t,i=[];while(++r<=t)i[r]=a*r+n;return i}function zo(e){return[I.min(e),I.max(e)]}I.layout.pack=function(){var l=I.layout.hierarchy().sort(No),c=0,u=[1,1],f;function t(e,t){var r=l.call(this,e,t),n=r[0],a=u[0],i=u[1],o=f==null?Math.sqrt:typeof f==="function"?f:function(){return f};n.x=n.y=0;_o(n,function(e){e.r=+o(e.value)});_o(n,Ho);if(c){var s=c*(f?1:Math.max(2*n.r/a,2*n.r/i))/2;_o(n,function(e){e.r+=s});_o(n,Ho);_o(n,function(e){e.r-=s})}qo(n,a/2,i/2,f?1:1/Math.max(2*n.r/a,2*n.r/i));return r}t.size=function(e){if(!arguments.length)return u;u=e;return t};t.radius=function(e){if(!arguments.length)return f;f=e==null||typeof e==="function"?e:+e;return t};t.padding=function(e){if(!arguments.length)return c;c=+e;return t};return go(t,l)};function No(e,t){return e.value-t.value}function Fo(e,t){var r=e._pack_next;e._pack_next=t;t._pack_prev=e;t._pack_next=r;r._pack_prev=t}function jo(e,t){e._pack_next=t;t._pack_prev=e}function Bo(e,t){var r=t.x-e.x,n=t.y-e.y,a=e.r+t.r;return.999*a*a>r*r+n*n}function Ho(e){if(!(t=e.children)||!(d=t.length))return;var t,r=Infinity,n=-Infinity,a=Infinity,i=-Infinity,o,s,l,c,u,f,d;function h(e){r=Math.min(e.x-e.r,r);n=Math.max(e.x+e.r,n);a=Math.min(e.y-e.r,a);i=Math.max(e.y+e.r,i)}t.forEach(Uo);o=t[0];o.x=-o.r;o.y=0;h(o);if(d>1){s=t[1];s.x=s.r;s.y=0;h(s);if(d>2){l=t[2];Yo(o,s,l);h(l);Fo(o,l);o._pack_prev=l;Fo(l,s);s=o._pack_next;for(c=3;c<d;c++){Yo(o,s,l=t[c]);var p=0,v=1,g=1;for(u=s._pack_next;u!==s;u=u._pack_next,v++){if(Bo(u,l)){p=1;break}}if(p==1){for(f=o._pack_prev;f!==u._pack_prev;f=f._pack_prev,g++){if(Bo(f,l)){break}}}if(p){if(v<g||v==g&&s.r<o.r)jo(o,s=u);else jo(o=f,s);c--}else{Fo(o,l);s=l;h(l)}}}}var m=(r+n)/2,_=(a+i)/2,y=0;for(c=0;c<d;c++){l=t[c];l.x-=m;l.y-=_;y=Math.max(y,l.r+Math.sqrt(l.x*l.x+l.y*l.y))}e.r=y;t.forEach(Vo)}function Uo(e){e._pack_next=e._pack_prev=e}function Vo(e){delete e._pack_next;delete e._pack_prev}function qo(e,t,r,n){var a=e.children;e.x=t+=n*e.x;e.y=r+=n*e.y;e.r*=n;if(a){var i=-1,o=a.length;while(++i<o)qo(a[i],t,r,n)}}function Yo(e,t,r){var n=e.r+r.r,a=t.x-e.x,i=t.y-e.y;if(n&&(a||i)){var o=t.r+r.r,s=a*a+i*i;o*=o;n*=n;var l=.5+(n-o)/(2*s),c=Math.sqrt(Math.max(0,2*o*(n+s)-(n-=s)*n-o*o))/(2*s);r.x=e.x+l*a+c*i;r.y=e.y+l*i-c*a}else{r.x=e.x+n;r.y=e.y}}I.layout.tree=function(){var f=I.layout.hierarchy().sort(null).value(null),d=Go,h=[1,1],p=null;function t(e,t){var r=f.call(this,e,t),n=r[0],a=v(n);_o(a,g),a.parent.m=-a.z;mo(a,m);if(p)mo(n,_);else{var i=n,o=n,s=n;mo(n,function(e){if(e.x<i.x)i=e;if(e.x>o.x)o=e;if(e.depth>s.depth)s=e});var l=d(i,o)/2-i.x,c=h[0]/(o.x+d(o,i)/2+l),u=h[1]/(s.depth||1);mo(n,function(e){e.x=(e.x+l)*c;e.y=e.depth*u})}return r}function v(e){var t={A:null,children:[e]},r=[t],n;while((n=r.pop())!=null){for(var a=n.children,i,o=0,s=a.length;o<s;++o){r.push((a[o]=i={_:a[o],parent:n,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i)}}return t.children[0]}function g(e){var t=e.children,r=e.parent.children,n=e.i?r[e.i-1]:null;if(t.length){Jo(e);var a=(t[0].z+t[t.length-1].z)/2;if(n){e.z=n.z+d(e._,n._);e.m=e.z-a}else{e.z=a}}else if(n){e.z=n.z+d(e._,n._)}e.parent.A=i(e,n,e.parent.A||r[0])}function m(e){e._.x=e.z+e.parent.m;e.m+=e.parent.m}function i(e,t,r){if(t){var n=e,a=e,i=t,o=n.parent.children[0],s=n.m,l=a.m,c=i.m,u=o.m,f;while(i=Xo(i),n=Wo(n),i&&n){o=Wo(o);a=Xo(a);a.a=e;f=i.z+c-n.z-s+d(i._,n._);if(f>0){Zo($o(i,e,r),e,f);s+=f;l+=f}c+=i.m;s+=n.m;u+=o.m;l+=a.m}if(i&&!Xo(a)){a.t=i;a.m+=c-l}if(n&&!Wo(o)){o.t=n;o.m+=s-u;r=e}}return r}function _(e){e.x*=h[0];e.y=e.depth*h[1]}t.separation=function(e){if(!arguments.length)return d;d=e;return t};t.size=function(e){if(!arguments.length)return p?null:h;p=(h=e)==null?_:null;return t};t.nodeSize=function(e){if(!arguments.length)return p?h:null;p=(h=e)==null?null:_;return t};return go(t,f)};function Go(e,t){return e.parent==t.parent?1:2}function Wo(e){var t=e.children;return t.length?t[0]:e.t}function Xo(e){var t=e.children,r;return(r=t.length)?t[r-1]:e.t}function Zo(e,t,r){var n=r/(t.i-e.i);t.c-=n;t.s+=r;e.c+=n;t.z+=r;t.m+=r}function Jo(e){var t=0,r=0,n=e.children,a=n.length,i;while(--a>=0){i=n[a];i.z+=t;i.m+=t;t+=i.s+(r+=i.c)}}function $o(e,t,r){return e.a.parent===t.parent?e.a:r}I.layout.cluster=function(){var u=I.layout.hierarchy().sort(null).value(null),f=Go,d=[1,1],h=false;function t(e,t){var r=u.call(this,e,t),n=r[0],a,i=0;_o(n,function(e){var t=e.children;if(t&&t.length){e.x=Ko(t);e.y=Qo(t)}else{e.x=a?i+=f(e,a):0;e.y=0;a=e}});var o=es(n),s=ts(n),l=o.x-f(o,s)/2,c=s.x+f(s,o)/2;_o(n,h?function(e){e.x=(e.x-n.x)*d[0];e.y=(n.y-e.y)*d[1]}:function(e){e.x=(e.x-l)/(c-l)*d[0];e.y=(1-(n.y?e.y/n.y:1))*d[1]});return r}t.separation=function(e){if(!arguments.length)return f;f=e;return t};t.size=function(e){if(!arguments.length)return h?null:d;h=(d=e)==null;return t};t.nodeSize=function(e){if(!arguments.length)return h?d:null;h=(d=e)!=null;return t};return go(t,u)};function Qo(e){return 1+I.max(e,function(e){return e.y})}function Ko(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function es(e){var t=e.children;return t&&t.length?es(t[0]):e}function ts(e){var t=e.children,r;return t&&(r=t.length)?ts(t[r-1]):e}I.layout.treemap=function(){var n=I.layout.hierarchy(),u=Math.round,a=[1,1],i=null,f=rs,o=false,s,d="squarify",l=.5*(1+Math.sqrt(5));function h(e,t){var r=-1,n=e.length,a,i;while(++r<n){i=(a=e[r]).value*(t<0?0:t);a.area=isNaN(i)||i<=0?0:i}}function p(e){var t=e.children;if(t&&t.length){var r=f(e),n=[],a=t.slice(),i,o=Infinity,s,l=d==="slice"?r.dx:d==="dice"?r.dy:d==="slice-dice"?e.depth&1?r.dy:r.dx:Math.min(r.dx,r.dy),c;h(a,r.dx*r.dy/e.value);n.area=0;while((c=a.length)>0){n.push(i=a[c-1]);n.area+=i.area;if(d!=="squarify"||(s=v(n,l))<=o){a.pop();o=s}else{n.area-=n.pop().area;g(n,l,r,false);l=Math.min(r.dx,r.dy);n.length=n.area=0;o=Infinity}}if(n.length){g(n,l,r,true);n.length=n.area=0}t.forEach(p)}}function c(e){var t=e.children;if(t&&t.length){var r=f(e),n=t.slice(),a,i=[];h(n,r.dx*r.dy/e.value);i.area=0;while(a=n.pop()){i.push(a);i.area+=a.area;if(a.z!=null){g(i,a.z?r.dx:r.dy,r,!n.length);i.length=i.area=0}}t.forEach(c)}}function v(e,t){var r=e.area,n,a=0,i=Infinity,o=-1,s=e.length;while(++o<s){if(!(n=e[o].area))continue;if(n<i)i=n;if(n>a)a=n}r*=r;t*=t;return r?Math.max(t*a*l/r,r/(t*i*l)):Infinity}function g(e,t,r,n){var a=-1,i=e.length,o=r.x,s=r.y,l=t?u(e.area/t):0,c;if(t==r.dx){if(n||l>r.dy)l=r.dy;while(++a<i){c=e[a];c.x=o;c.y=s;c.dy=l;o+=c.dx=Math.min(r.x+r.dx-o,l?u(c.area/l):0)}c.z=true;c.dx+=r.x+r.dx-o;r.y+=l;r.dy-=l}else{if(n||l>r.dx)l=r.dx;while(++a<i){c=e[a];c.x=o;c.y=s;c.dx=l;s+=c.dy=Math.min(r.y+r.dy-s,l?u(c.area/l):0)}c.z=false;c.dy+=r.y+r.dy-s;r.x+=l;r.dx-=l}}function m(e){var t=s||n(e),r=t[0];r.x=r.y=0;if(r.value)r.dx=a[0],r.dy=a[1];else r.dx=r.dy=0;if(s)n.revalue(r);h([r],r.dx*r.dy/r.value);(s?c:p)(r);if(o)s=t;return t}m.size=function(e){if(!arguments.length)return a;a=e;return m};m.padding=function(r){if(!arguments.length)return i;function e(e){var t=r.call(m,e,e.depth);return t==null?rs(e):ns(e,typeof t==="number"?[t,t,t,t]:t)}function t(e){return ns(e,r)}var n;f=(i=r)==null?rs:(n=typeof r)==="function"?e:n==="number"?(r=[r,r,r,r],t):t;return m};m.round=function(e){if(!arguments.length)return u!=Number;u=e?Math.round:Number;return m};m.sticky=function(e){if(!arguments.length)return o;o=e;s=null;return m};m.ratio=function(e){if(!arguments.length)return l;l=e;return m};m.mode=function(e){if(!arguments.length)return d;d=e+"";return m};return go(m,n)};function rs(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function ns(e,t){var r=e.x+t[3],n=e.y+t[0],a=e.dx-t[1]-t[3],i=e.dy-t[0]-t[2];if(a<0){r+=a/2;a=0}if(i<0){n+=i/2;i=0}return{x:r,y:n,dx:a,dy:i}}I.random={normal:function(n,a){var e=arguments.length;if(e<2)a=1;if(e<1)n=0;return function(){var e,t,r;do{e=Math.random()*2-1;t=Math.random()*2-1;r=e*e+t*t}while(!r||r>1);return n+a*e*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var e=I.random.normal.apply(I,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=I.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(r){return function(){for(var e=0,t=0;t<r;t++)e+=Math.random();return e}}};I.scale={};function as(e){var t=e[0],r=e[e.length-1];return t<r?[t,r]:[r,t]}function is(e){return e.rangeExtent?e.rangeExtent():as(e.range())}function os(e,t,r,n){var a=r(e[0],e[1]),i=n(t[0],t[1]);return function(e){return i(a(e))}}function ss(e,t){var r=0,n=e.length-1,a=e[r],i=e[n],o;if(i<a){o=r,r=n,n=o;o=a,a=i,i=o}e[r]=t.floor(a);e[n]=t.ceil(i);return e}function ls(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:cs}var cs={floor:N,ceil:N};function us(r,e,t,n){var a=[],i=[],o=0,s=Math.min(r.length,e.length)-1;if(r[s]<r[0]){r=r.slice().reverse();e=e.slice().reverse()}while(++o<=s){a.push(t(r[o-1],r[o]));i.push(n(e[o-1],e[o]))}return function(e){var t=I.bisect(r,e,1,s)-1;return i[t](a[t](e))}}I.scale.linear=function(){return fs([0,1],[0,1],Ai,false)};function fs(r,n,a,i){var o,s;function t(){var e=Math.min(r.length,n.length)>2?us:os,t=i?no:ro;o=e(r,n,t,a);s=e(n,r,t,Ai);return l}function l(e){return o(e)}l.invert=function(e){return s(e)};l.domain=function(e){if(!arguments.length)return r;r=e.map(Number);return t()};l.range=function(e){if(!arguments.length)return n;n=e;return t()};l.rangeRound=function(e){return l.range(e).interpolate(qi)};l.clamp=function(e){if(!arguments.length)return i;i=e;return t()};l.interpolate=function(e){if(!arguments.length)return a;a=e;return t()};l.ticks=function(e){return vs(r,e)};l.tickFormat=function(e,t){return gs(r,e,t)};l.nice=function(e){hs(r,e);return t()};l.copy=function(){return fs(r,n,a,i)};return t()}function ds(e,t){return I.rebind(e,t,"range","rangeRound","interpolate","clamp")}function hs(e,t){ss(e,ls(ps(e,t)[2]));ss(e,ls(ps(e,t)[2]));return e}function ps(e,t){if(t==null)t=10;var r=as(e),n=r[1]-r[0],a=Math.pow(10,Math.floor(Math.log(n/t)/Math.LN10)),i=t/n*a;if(i<=.15)a*=10;else if(i<=.35)a*=5;else if(i<=.75)a*=2;r[0]=Math.ceil(r[0]/a)*a;r[1]=Math.floor(r[1]/a)*a+a*.5;r[2]=a;return r}function vs(e,t){return I.range.apply(I,ps(e,t))}function gs(e,t,r){var n=ps(e,t);if(r){var a=Bt.exec(r);a.shift();if(a[8]==="s"){var i=I.formatPrefix(Math.max(P(n[0]),P(n[1])));if(!a[7])a[7]="."+_s(i.scale(n[2]));a[8]="f";r=I.format(a.join(""));return function(e){return r(i.scale(e))+i.symbol}}if(!a[7])a[7]="."+ys(a[8],n);r=a.join("")}else{r=",."+_s(n[2])+"f"}return I.format(r)}var ms={s:1,g:1,p:1,r:1,e:1};function _s(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function ys(e,t){var r=_s(t[2]);return e in ms?Math.abs(r-_s(Math.max(P(t[0]),P(t[1]))))+ +(e!=="e"):r-(e==="%")*2}I.scale.log=function(){return bs(I.scale.linear().domain([0,1]),10,true,[1,10])};function bs(t,l,c,u){function f(e){return(c?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(l)}function d(e){return c?Math.pow(l,e):-Math.pow(l,-e)}function a(e){return t(f(e))}a.invert=function(e){return d(t.invert(e))};a.domain=function(e){if(!arguments.length)return u;c=e[0]>=0;t.domain((u=e.map(Number)).map(f));return a};a.base=function(e){if(!arguments.length)return l;l=+e;t.domain(u.map(f));return a};a.nice=function(){var e=ss(u.map(f),c?Math:ws);t.domain(e);u=e.map(d);return a};a.ticks=function(){var e=as(u),t=[],r=e[0],n=e[1],a=Math.floor(f(r)),i=Math.ceil(f(n)),o=l%1?2:l;if(isFinite(i-a)){if(c){for(;a<i;a++)for(var s=1;s<o;s++)t.push(d(a)*s);t.push(d(a))}else{t.push(d(a));for(;a++<i;)for(var s=o-1;s>0;s--)t.push(d(a)*s)}for(a=0;t[a]<r;a++){}for(i=t.length;t[i-1]>n;i--){}t=t.slice(a,i)}return t};a.tickFormat=function(e,r){if(!arguments.length)return xs;if(arguments.length<2)r=xs;else if(typeof r!=="function")r=I.format(r);var n=Math.max(1,l*e/a.ticks().length);return function(e){var t=e/d(Math.round(f(e)));if(t*l<l-.5)t*=l;return t<=n?r(e):""}};a.copy=function(){return bs(t.copy(),l,c,u)};return ds(a,t)}var xs=I.format(".0e"),ws={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};I.scale.pow=function(){return As(I.scale.linear(),1,[0,1])};function As(t,r,n){var a=Ts(r),i=Ts(1/r);function o(e){return t(a(e))}o.invert=function(e){return i(t.invert(e))};o.domain=function(e){if(!arguments.length)return n;t.domain((n=e.map(Number)).map(a));return o};o.ticks=function(e){return vs(n,e)};o.tickFormat=function(e,t){return gs(n,e,t)};o.nice=function(e){return o.domain(hs(n,e))};o.exponent=function(e){if(!arguments.length)return r;a=Ts(r=e);i=Ts(1/r);t.domain(n.map(a));return o};o.copy=function(){return As(t.copy(),r,n)};return ds(o,t)}function Ts(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}I.scale.sqrt=function(){return I.scale.pow().exponent(.5)};I.scale.ordinal=function(){return ks([],{t:"range",a:[[]]})};function ks(s,l){var a,c,u;function f(e){return c[((a.get(e)||(l.t==="range"?a.set(e,s.push(e)):NaN))-1)%c.length]}function d(t,r){return I.range(s.length).map(function(e){return t+r*e})}f.domain=function(e){if(!arguments.length)return s;s=[];a=new _;var t=-1,r=e.length,n;while(++t<r)if(!a.has(n=e[t]))a.set(n,s.push(n));return f[l.t].apply(f,l.a)};f.range=function(e){if(!arguments.length)return c;c=e;u=0;l={t:"range",a:arguments};return f};f.rangePoints=function(e,t){if(arguments.length<2)t=0;var r=e[0],n=e[1],a=s.length<2?(r=(r+n)/2,0):(n-r)/(s.length-1+t);c=d(r+a*t/2,a);u=0;l={t:"rangePoints",a:arguments};return f};f.rangeRoundPoints=function(e,t){if(arguments.length<2)t=0;var r=e[0],n=e[1],a=s.length<2?(r=n=Math.round((r+n)/2),0):(n-r)/(s.length-1+t)|0;c=d(r+Math.round(a*t/2+(n-r-(s.length-1+t)*a)/2),a);u=0;l={t:"rangeRoundPoints",a:arguments};return f};f.rangeBands=function(e,t,r){if(arguments.length<2)t=0;if(arguments.length<3)r=t;var n=e[1]<e[0],a=e[n-0],i=e[1-n],o=(i-a)/(s.length-t+2*r);c=d(a+o*r,o);if(n)c.reverse();u=o*(1-t);l={t:"rangeBands",a:arguments};return f};f.rangeRoundBands=function(e,t,r){if(arguments.length<2)t=0;if(arguments.length<3)r=t;var n=e[1]<e[0],a=e[n-0],i=e[1-n],o=Math.floor((i-a)/(s.length-t+2*r));c=d(a+Math.round((i-a-(s.length-t)*o)/2),o);if(n)c.reverse();u=Math.round(o*(1-t));l={t:"rangeRoundBands",a:arguments};return f};f.rangeBand=function(){return u};f.rangeExtent=function(){return as(l.a[0])};f.copy=function(){return ks(s,l)};return f.domain(s)}I.scale.category10=function(){return I.scale.ordinal().range(Ms)};I.scale.category20=function(){return I.scale.ordinal().range(Ss)};I.scale.category20b=function(){return I.scale.ordinal().range(Cs)};I.scale.category20c=function(){return I.scale.ordinal().range(Ls)};var Ms=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ht);var Ss=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ht);var Cs=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ht);var Ls=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ht);I.scale.quantile=function(){return Es([],[])};function Es(r,n){var a;function t(){var e=0,t=n.length;a=[];while(++e<t)a[e-1]=I.quantile(r,e/t);return i}function i(e){if(!isNaN(e=+e))return n[I.bisect(a,e)]}i.domain=function(e){if(!arguments.length)return r;r=e.map(c).filter(u).sort(l);return t()};i.range=function(e){if(!arguments.length)return n;n=e;return t()};i.quantiles=function(){return a};i.invertExtent=function(e){e=n.indexOf(e);return e<0?[NaN,NaN]:[e>0?a[e-1]:r[0],e<a.length?a[e]:r[r.length-1]]};i.copy=function(){return Es(r,n)};return t()}I.scale.quantize=function(){return Ds(0,1,[0,1])};function Ds(t,r,n){var a,i;function e(e){return n[Math.max(0,Math.min(i,Math.floor(a*(e-t))))]}function o(){a=n.length/(r-t);i=n.length-1;return e}e.domain=function(e){if(!arguments.length)return[t,r];t=+e[0];r=+e[e.length-1];return o()};e.range=function(e){if(!arguments.length)return n;n=e;return o()};e.invertExtent=function(e){e=n.indexOf(e);e=e<0?NaN:e/a+t;return[e,e+1/a]};e.copy=function(){return Ds(t,r,n)};return o()}I.scale.threshold=function(){return Os([.5],[0,1])};function Os(t,r){function n(e){if(e<=e)return r[I.bisect(t,e)]}n.domain=function(e){if(!arguments.length)return t;t=e;return n};n.range=function(e){if(!arguments.length)return r;r=e;return n};n.invertExtent=function(e){e=r.indexOf(e);return[t[e-1],t[e]]};n.copy=function(){return Os(t,r)};return n}I.scale.identity=function(){return Ps([0,1])};function Ps(r){function t(e){return+e}t.invert=t;t.domain=t.range=function(e){if(!arguments.length)return r;r=e.map(t);return t};t.ticks=function(e){return vs(r,e)};t.tickFormat=function(e,t){return gs(r,e,t)};t.copy=function(){return Ps(r)};return t}I.svg={};function Is(){return 0}I.svg.arc=function(){var F=zs,j=Ns,B=Is,H=Rs,U=Fs,V=js,q=Bs;function t(){var e=Math.max(0,+F.apply(this,arguments)),t=Math.max(0,+j.apply(this,arguments)),r=U.apply(this,arguments)-Ee,n=V.apply(this,arguments)-Ee,a=Math.abs(n-r),i=r>n?0:1;if(t<e)o=t,t=e,e=o;if(a>=Le)return Y(t,i)+(e?Y(e,1-i):"")+"Z";var o,s,l,c,u=0,f=0,d,h,p,v,g,m,_,y,b=[];if(c=(+q.apply(this,arguments)||0)/2){l=H===Rs?Math.sqrt(e*e+t*t):+H.apply(this,arguments);if(!i)f*=-1;if(t)f=ze(l/t*Math.sin(c));if(e)u=ze(l/e*Math.sin(c))}if(t){d=t*Math.cos(r+f);h=t*Math.sin(r+f);p=t*Math.cos(n-f);v=t*Math.sin(n-f);var x=Math.abs(n-r-2*f)<=Se?0:1;if(f&&Hs(d,h,p,v)===i^x){var w=(r+n)/2;d=t*Math.cos(w);h=t*Math.sin(w);p=v=null}}else{d=h=0}if(e){g=e*Math.cos(n-u);m=e*Math.sin(n-u);_=e*Math.cos(r+u);y=e*Math.sin(r+u);var A=Math.abs(r-n+2*u)<=Se?0:1;if(u&&Hs(g,m,_,y)===1-i^A){var T=(r+n)/2;g=e*Math.cos(T);m=e*Math.sin(T);_=y=null}}else{g=m=0}if(a>ke&&(o=Math.min(Math.abs(t-e)/2,+B.apply(this,arguments)))>.001){s=e<t^i?0:1;var k=o,M=o;if(a<Se){var S=_==null?[g,m]:p==null?[d,h]:Ca([d,h],[_,y],[p,v],[g,m]),C=d-S[0],L=h-S[1],E=p-S[0],D=v-S[1],O=1/Math.sin(Math.acos((C*E+L*D)/(Math.sqrt(C*C+L*L)*Math.sqrt(E*E+D*D)))/2),P=Math.sqrt(S[0]*S[0]+S[1]*S[1]);M=Math.min(o,(e-P)/(O-1));k=Math.min(o,(t-P)/(O+1))}if(p!=null){var I=Us(_==null?[g,m]:[_,y],[d,h],t,k,i),R=Us([p,v],[g,m],t,k,i);if(o===k){b.push("M",I[0],"A",k,",",k," 0 0,",s," ",I[1],"A",t,",",t," 0 ",1-i^Hs(I[1][0],I[1][1],R[1][0],R[1][1]),",",i," ",R[1],"A",k,",",k," 0 0,",s," ",R[0])}else{b.push("M",I[0],"A",k,",",k," 0 1,",s," ",R[0])}}else{b.push("M",d,",",h)}if(_!=null){var z=Us([d,h],[_,y],e,-M,i),N=Us([g,m],p==null?[d,h]:[p,v],e,-M,i);if(o===M){b.push("L",N[0],"A",M,",",M," 0 0,",s," ",N[1],"A",e,",",e," 0 ",i^Hs(N[1][0],N[1][1],z[1][0],z[1][1]),",",1-i," ",z[1],"A",M,",",M," 0 0,",s," ",z[0])}else{b.push("L",N[0],"A",M,",",M," 0 0,",s," ",z[0])}}else{b.push("L",g,",",m)}}else{b.push("M",d,",",h);if(p!=null)b.push("A",t,",",t," 0 ",x,",",i," ",p,",",v);b.push("L",g,",",m);if(_!=null)b.push("A",e,",",e," 0 ",A,",",1-i," ",_,",",y)}b.push("Z");return b.join("")}function Y(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}t.innerRadius=function(e){if(!arguments.length)return F;F=wt(e);return t};t.outerRadius=function(e){if(!arguments.length)return j;j=wt(e);return t};t.cornerRadius=function(e){if(!arguments.length)return B;B=wt(e);return t};t.padRadius=function(e){if(!arguments.length)return H;H=e==Rs?Rs:wt(e);return t};t.startAngle=function(e){if(!arguments.length)return U;U=wt(e);return t};t.endAngle=function(e){if(!arguments.length)return V;V=wt(e);return t};t.padAngle=function(e){if(!arguments.length)return q;q=wt(e);return t};t.centroid=function(){var e=(+F.apply(this,arguments)+ +j.apply(this,arguments))/2,t=(+U.apply(this,arguments)+ +V.apply(this,arguments))/2-Ee;return[Math.cos(t)*e,Math.sin(t)*e]};return t};var Rs="auto";function zs(e){return e.innerRadius}function Ns(e){return e.outerRadius}function Fs(e){return e.startAngle}function js(e){return e.endAngle}function Bs(e){return e&&e.padAngle}function Hs(e,t,r,n){return(e-r)*t-(t-n)*e>0?0:1}function Us(e,t,r,n,a){var i=e[0]-t[0],o=e[1]-t[1],s=(a?n:-n)/Math.sqrt(i*i+o*o),l=s*o,c=-s*i,u=e[0]+l,f=e[1]+c,d=t[0]+l,h=t[1]+c,p=(u+d)/2,v=(f+h)/2,g=d-u,m=h-f,_=g*g+m*m,y=r-n,b=u*h-d*f,x=(m<0?-1:1)*Math.sqrt(Math.max(0,y*y*_-b*b)),w=(b*m-g*x)/_,A=(-b*g-m*x)/_,T=(b*m+g*x)/_,k=(-b*g+m*x)/_,M=w-p,S=A-v,C=T-p,L=k-v;if(M*M+S*S>C*C+L*L)w=T,A=k;return[[w-l,A-c],[w*r/y,A*r/y]]}function Vs(c){var u=wa,f=Aa,d=an,h=Ys,t=h.key,p=.7;function r(e){var t=[],r=[],n=-1,a=e.length,i,o=wt(u),s=wt(f);function l(){t.push("M",h(c(r),p))}while(++n<a){if(d.call(this,i=e[n],n)){r.push([+o.call(this,i,n),+s.call(this,i,n)])}else if(r.length){l();r=[]}}if(r.length)l();return t.length?t.join(""):null}r.x=function(e){if(!arguments.length)return u;u=e;return r};r.y=function(e){if(!arguments.length)return f;f=e;return r};r.defined=function(e){if(!arguments.length)return d;d=e;return r};r.interpolate=function(e){if(!arguments.length)return t;if(typeof e==="function")t=h=e;else t=(h=qs.get(e)||Ys).key;return r};r.tension=function(e){if(!arguments.length)return p;p=e;return r};return r}I.svg.line=function(){return Vs(N)};var qs=I.map({linear:Ys,"linear-closed":Gs,step:Ws,"step-before":Xs,"step-after":Zs,basis:tl,"basis-open":rl,"basis-closed":nl,bundle:al,cardinal:Qs,"cardinal-open":Js,"cardinal-closed":$s,monotone:hl});qs.forEach(function(e,t){t.key=e;t.closed=/-closed$/.test(e)});function Ys(e){return e.length>1?e.join("L"):e+"Z"}function Gs(e){return e.join("L")+"Z"}function Ws(e){var t=0,r=e.length,n=e[0],a=[n[0],",",n[1]];while(++t<r)a.push("H",(n[0]+(n=e[t])[0])/2,"V",n[1]);if(r>1)a.push("H",n[0]);return a.join("")}function Xs(e){var t=0,r=e.length,n=e[0],a=[n[0],",",n[1]];while(++t<r)a.push("V",(n=e[t])[1],"H",n[0]);return a.join("")}function Zs(e){var t=0,r=e.length,n=e[0],a=[n[0],",",n[1]];while(++t<r)a.push("H",(n=e[t])[0],"V",n[1]);return a.join("")}function Js(e,t){return e.length<4?Ys(e):e[1]+Ks(e.slice(1,-1),el(e,t))}function $s(e,t){return e.length<3?Gs(e):e[0]+Ks((e.push(e[0]),e),el([e[e.length-2]].concat(e,[e[1]]),t))}function Qs(e,t){return e.length<3?Ys(e):e[0]+Ks(e,el(e,t))}function Ks(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2){return Ys(e)}var r=e.length!=t.length,n="",a=e[0],i=e[1],o=t[0],s=o,l=1;if(r){n+="Q"+(i[0]-o[0]*2/3)+","+(i[1]-o[1]*2/3)+","+i[0]+","+i[1];a=e[1];l=2}if(t.length>1){s=t[1];i=e[l];l++;n+="C"+(a[0]+o[0])+","+(a[1]+o[1])+","+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1];for(var c=2;c<t.length;c++,l++){i=e[l];s=t[c];n+="S"+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1]}}if(r){var u=e[l];n+="Q"+(i[0]+s[0]*2/3)+","+(i[1]+s[1]*2/3)+","+u[0]+","+u[1]}return n}function el(e,t){var r=[],n=(1-t)/2,a,i=e[0],o=e[1],s=1,l=e.length;while(++s<l){a=i;i=o;o=e[s];r.push([n*(o[0]-a[0]),n*(o[1]-a[1])])}return r}function tl(e){if(e.length<3)return Ys(e);var t=1,r=e.length,n=e[0],a=n[0],i=n[1],o=[a,a,a,(n=e[1])[0]],s=[i,i,i,n[1]],l=[a,",",i,"L",il(ll,o),",",il(ll,s)];e.push(e[r-1]);while(++t<=r){n=e[t];o.shift();o.push(n[0]);s.shift();s.push(n[1]);cl(l,o,s)}e.pop();l.push("L",n);return l.join("")}function rl(e){if(e.length<4)return Ys(e);var t=[],r=-1,n=e.length,a,i=[0],o=[0];while(++r<3){a=e[r];i.push(a[0]);o.push(a[1])}t.push(il(ll,i)+","+il(ll,o));--r;while(++r<n){a=e[r];i.shift();i.push(a[0]);o.shift();o.push(a[1]);cl(t,i,o)}return t.join("")}function nl(e){var t,r=-1,n=e.length,a=n+4,i,o=[],s=[];while(++r<4){i=e[r%n];o.push(i[0]);s.push(i[1])}t=[il(ll,o),",",il(ll,s)];--r;while(++r<a){i=e[r%n];o.shift();o.push(i[0]);s.shift();s.push(i[1]);cl(t,o,s)}return t.join("")}function al(e,t){var r=e.length-1;if(r){var n=e[0][0],a=e[0][1],i=e[r][0]-n,o=e[r][1]-a,s=-1,l,c;while(++s<=r){l=e[s];c=s/r;l[0]=t*l[0]+(1-t)*(n+c*i);l[1]=t*l[1]+(1-t)*(a+c*o)}}return tl(e)}function il(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}var ol=[0,2/3,1/3,0],sl=[0,1/3,2/3,0],ll=[0,1/6,2/3,1/6];function cl(e,t,r){e.push("C",il(ol,t),",",il(ol,r),",",il(sl,t),",",il(sl,r),",",il(ll,t),",",il(ll,r))}function ul(e,t){return(t[1]-e[1])/(t[0]-e[0])}function fl(e){var t=0,r=e.length-1,n=[],a=e[0],i=e[1],o=n[0]=ul(a,i);while(++t<r){n[t]=(o+(o=ul(a=i,i=e[t+1])))/2}n[t]=o;return n}function dl(e){var t=[],r,n,a,i,o=fl(e),s=-1,l=e.length-1;while(++s<l){r=ul(e[s],e[s+1]);if(P(r)<ke){o[s]=o[s+1]=0}else{n=o[s]/r;a=o[s+1]/r;i=n*n+a*a;if(i>9){i=r*3/Math.sqrt(i);o[s]=i*n;o[s+1]=i*a}}}s=-1;while(++s<=l){i=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s]));t.push([i||0,o[s]*i||0])}return t}function hl(e){return e.length<3?Ys(e):e[0]+Ks(e,dl(e))}I.svg.line.radial=function(){var e=Vs(pl);e.radius=e.x,delete e.x;e.angle=e.y,delete e.y;return e};function pl(e){var t,r=-1,n=e.length,a,i;while(++r<n){t=e[r];a=t[0];i=t[1]-Ee;t[0]=a*Math.cos(i);t[1]=a*Math.sin(i)}return e}function vl(p){var v=wa,g=wa,m=0,_=Aa,y=an,b=Ys,t=b.key,x=b,w="L",A=.7;function r(e){var t=[],r=[],n=[],a=-1,i=e.length,o,s=wt(v),l=wt(m),c=v===g?function(){return f}:wt(g),u=m===_?function(){return d}:wt(_),f,d;function h(){t.push("M",b(p(n),A),w,x(p(r.reverse()),A),"Z")}while(++a<i){if(y.call(this,o=e[a],a)){r.push([f=+s.call(this,o,a),d=+l.call(this,o,a)]);n.push([+c.call(this,o,a),+u.call(this,o,a)])}else if(r.length){h();r=[];n=[]}}if(r.length)h();return t.length?t.join(""):null}r.x=function(e){if(!arguments.length)return g;v=g=e;return r};r.x0=function(e){if(!arguments.length)return v;v=e;return r};r.x1=function(e){if(!arguments.length)return g;g=e;return r};r.y=function(e){if(!arguments.length)return _;m=_=e;return r};r.y0=function(e){if(!arguments.length)return m;m=e;return r};r.y1=function(e){if(!arguments.length)return _;_=e;return r};r.defined=function(e){if(!arguments.length)return y;y=e;return r};r.interpolate=function(e){if(!arguments.length)return t;if(typeof e==="function")t=b=e;else t=(b=qs.get(e)||Ys).key;x=b.reverse||b;w=b.closed?"M":"L";return r};r.tension=function(e){if(!arguments.length)return A;A=e;return r};return r}Xs.reverse=Zs;Zs.reverse=Xs;I.svg.area=function(){return vl(N)};I.svg.area.radial=function(){var e=vl(pl);e.radius=e.x,delete e.x;e.innerRadius=e.x0,delete e.x0;e.outerRadius=e.x1,delete e.x1;e.angle=e.y,delete e.y;e.startAngle=e.y0,delete e.y0;e.endAngle=e.y1,delete e.y1;return e};I.svg.chord=function(){var a=ia,i=oa,l=gl,c=Fs,u=js;function t(e,t){var r=o(this,a,e,t),n=o(this,i,e,t);return"M"+r.p0+f(r.r,r.p1,r.a1-r.a0)+(s(r,n)?d(r.r,r.p1,r.r,r.p0):d(r.r,r.p1,n.r,n.p0)+f(n.r,n.p1,n.a1-n.a0)+d(n.r,n.p1,r.r,r.p0))+"Z"}function o(e,t,r,n){var a=t.call(e,r,n),i=l.call(e,a,n),o=c.call(e,a,n)-Ee,s=u.call(e,a,n)-Ee;return{r:i,a0:o,a1:s,p0:[i*Math.cos(o),i*Math.sin(o)],p1:[i*Math.cos(s),i*Math.sin(s)]}}function s(e,t){return e.a0==t.a0&&e.a1==t.a1}function f(e,t,r){return"A"+e+","+e+" 0 "+ +(r>Se)+",1 "+t}function d(e,t,r,n){return"Q 0,0 "+n}t.radius=function(e){if(!arguments.length)return l;l=wt(e);return t};t.source=function(e){if(!arguments.length)return a;a=wt(e);return t};t.target=function(e){if(!arguments.length)return i;i=wt(e);return t};t.startAngle=function(e){if(!arguments.length)return c;c=wt(e);return t};t.endAngle=function(e){if(!arguments.length)return u;u=wt(e);return t};return t};function gl(e){return e.radius}I.svg.diagonal=function(){var o=ia,s=oa,l=ml;function t(e,t){var r=o.call(this,e,t),n=s.call(this,e,t),a=(r.y+n.y)/2,i=[r,{x:r.x,y:a},{x:n.x,y:a},n];i=i.map(l);return"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}t.source=function(e){if(!arguments.length)return o;o=wt(e);return t};t.target=function(e){if(!arguments.length)return s;s=wt(e);return t};t.projection=function(e){if(!arguments.length)return l;l=e;return t};return t};function ml(e){return[e.x,e.y]}I.svg.diagonal.radial=function(){var e=I.svg.diagonal(),t=ml,r=e.projection;e.projection=function(e){return arguments.length?r(_l(t=e)):t};return e};function _l(n){return function(){var e=n.apply(this,arguments),t=e[0],r=e[1]-Ee;return[t*Math.cos(r),t*Math.sin(r)]}}I.svg.symbol=function(){var r=bl,n=yl;function t(e,t){return(wl.get(r.call(this,e,t))||xl)(n.call(this,e,t))}t.type=function(e){if(!arguments.length)return r;r=wt(e);return t};t.size=function(e){if(!arguments.length)return n;n=wt(e);return t};return t};function yl(){return 64}function bl(){return"circle"}function xl(e){var t=Math.sqrt(e/Se);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}var wl=I.map({circle:xl,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Tl)),r=t*Tl;return"M0,"+-t+"L"+r+",0"+" 0,"+t+" "+-r+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Al),r=t*Al/2;return"M0,"+r+"L"+t+","+-r+" "+-t+","+-r+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Al),r=t*Al/2;return"M0,"+-r+"L"+t+","+r+" "+-t+","+r+"Z"}});I.svg.symbolTypes=wl.keys();var Al=Math.sqrt(3),Tl=Math.tan(30*De);W.transition=function(e){var t=El||++Ll,r=Il(e),n=[],a,i,o=Dl||{time:Date.now(),ease:Pi,delay:0,duration:250};for(var s=-1,l=this.length;++s<l;){n.push(a=[]);for(var c=this[s],u=-1,f=c.length;++u<f;){if(i=c[u])Rl(i,u,r,t,o);a.push(i)}}return Sl(n,r,t)};W.interrupt=function(e){return this.each(e==null?kl:Ml(Il(e)))};var kl=Ml(Il());function Ml(n){return function(){var e,t,r;if((e=this[n])&&(r=e[t=e.active])){r.timer.c=null;r.timer.t=NaN;if(--e.count)delete e[t];else delete this[n];e.active+=.5;r.event&&r.event.interrupt.call(this,this.__data__,r.index)}}}function Sl(e,t,r){U(e,Cl);e.namespace=t;e.id=r;return e}var Cl=[],Ll=0,El,Dl;Cl.call=W.call;Cl.empty=W.empty;Cl.node=W.node;Cl.size=W.size;I.transition=function(e,t){return e&&e.transition?El?e.transition(t):e:I.selection().transition(e)};I.transition.prototype=Cl;Cl.select=function(e){var t=this.id,r=this.namespace,n=[],a,i,o;e=X(e);for(var s=-1,l=this.length;++s<l;){n.push(a=[]);for(var c=this[s],u=-1,f=c.length;++u<f;){if((o=c[u])&&(i=e.call(o,o.__data__,u,s))){if("__data__"in o)i.__data__=o.__data__;Rl(i,u,r,t,o[r][t]);a.push(i)}else{a.push(null)}}}return Sl(n,r,t)};Cl.selectAll=function(e){var t=this.id,r=this.namespace,n=[],a,i,o,s,l;e=Z(e);for(var c=-1,u=this.length;++c<u;){for(var f=this[c],d=-1,h=f.length;++d<h;){if(o=f[d]){l=o[r][t];i=e.call(o,o.__data__,d,c);n.push(a=[]);for(var p=-1,v=i.length;++p<v;){if(s=i[p])Rl(s,p,r,t,l);a.push(s)}}}}return Sl(n,r,t)};Cl.filter=function(e){var t=[],r,n,a;if(typeof e!=="function")e=ce(e);for(var i=0,o=this.length;i<o;i++){t.push(r=[]);for(var n=this[i],s=0,l=n.length;s<l;s++){if((a=n[s])&&e.call(a,a.__data__,s,i)){r.push(a)}}}return Sl(t,this.namespace,this.id)};Cl.tween=function(t,r){var n=this.id,a=this.namespace;if(arguments.length<2)return this.node()[a][n].tween.get(t);return fe(this,r==null?function(e){e[a][n].tween.remove(t)}:function(e){e[a][n].tween.set(t,r)})};function Ol(e,n,a,i){var o=e.id,s=e.namespace;return fe(e,typeof a==="function"?function(e,t,r){e[s][o].tween.set(n,i(a.call(e,e.__data__,t,r)))}:(a=i(a),function(e){e[s][o].tween.set(n,a)}))}Cl.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var n=e=="transform"?to:Ai,a=I.ns.qualify(e);function i(){this.removeAttribute(a)}function o(){this.removeAttributeNS(a.space,a.local)}function r(r){return r==null?i:(r+="",function(){var e=this.getAttribute(a),t;return e!==r&&(t=n(e,r),function(e){this.setAttribute(a,t(e))})})}function s(r){return r==null?o:(r+="",function(){var e=this.getAttributeNS(a.space,a.local),t;return e!==r&&(t=n(e,r),function(e){this.setAttributeNS(a.space,a.local,t(e))})})}return Ol(this,"attr."+e,t,a.local?s:r)};Cl.attrTween=function(e,n){var a=I.ns.qualify(e);function t(e,t){var r=n.call(this,e,t,this.getAttribute(a));return r&&function(e){this.setAttribute(a,r(e))}}function r(e,t){var r=n.call(this,e,t,this.getAttributeNS(a.space,a.local));return r&&function(e){this.setAttributeNS(a.space,a.local,r(e))}}return this.tween("attr."+e,a.local?r:t)};Cl.style=function(n,e,a){var t=arguments.length;if(t<3){if(typeof n!=="string"){if(t<2)e="";for(a in n)this.style(a,n[a],e);return this}a=""}function i(){this.style.removeProperty(n)}function r(r){return r==null?i:(r+="",function(){var e=z(this).getComputedStyle(this,null).getPropertyValue(n),t;return e!==r&&(t=Ai(e,r),function(e){this.style.setProperty(n,t(e),a)})})}return Ol(this,"style."+n,e,r)};Cl.styleTween=function(n,a,i){if(arguments.length<3)i="";function e(e,t){var r=a.call(this,e,t,z(this).getComputedStyle(this,null).getPropertyValue(n));return r&&function(e){this.style.setProperty(n,r(e),i)}}return this.tween("style."+n,e)};Cl.text=function(e){return Ol(this,"text",e,Pl)};function Pl(e){if(e==null)e="";return function(){this.textContent=e}}Cl.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;if(this[t].count<2&&(e=this.parentNode))e.removeChild(this)})};Cl.ease=function(t){var r=this.id,n=this.namespace;if(arguments.length<1)return this.node()[n][r].ease;if(typeof t!=="function")t=I.ease.apply(I,arguments);return fe(this,function(e){e[n][r].ease=t})};Cl.delay=function(n){var a=this.id,i=this.namespace;if(arguments.length<1)return this.node()[i][a].delay;return fe(this,typeof n==="function"?function(e,t,r){e[i][a].delay=+n.call(e,e.__data__,t,r)}:(n=+n,function(e){e[i][a].delay=n}))};Cl.duration=function(n){var a=this.id,i=this.namespace;if(arguments.length<1)return this.node()[i][a].duration;return fe(this,typeof n==="function"?function(e,t,r){e[i][a].duration=Math.max(1,n.call(e,e.__data__,t,r))}:(n=Math.max(1,n),function(e){e[i][a].duration=n}))};Cl.each=function(n,r){var a=this.id,i=this.namespace;if(arguments.length<2){var e=Dl,t=El;try{El=a;fe(this,function(e,t,r){Dl=e[i][a];n.call(e,e.__data__,t,r)})}finally{Dl=e;El=t}}else{fe(this,function(e){var t=e[i][a];(t.event||(t.event=I.dispatch("start","end","interrupt"))).on(n,r)})}return this};Cl.transition=function(){var e=this.id,t=++Ll,r=this.namespace,n=[],a,i,o,s;for(var l=0,c=this.length;l<c;l++){n.push(a=[]);for(var i=this[l],u=0,f=i.length;u<f;u++){if(o=i[u]){s=o[r][e];Rl(o,u,r,t,{time:s.time,ease:s.ease,delay:s.delay+s.duration,duration:s.duration})}a.push(o)}}return Sl(n,r,t)};function Il(e){return e==null?"__transition__":"__transition_"+e+"__"}function Rl(i,o,a,s,e){var l=i[a]||(i[a]={active:0,count:0}),c=l[s],u,f,d,h,p;function t(e){var t=c.delay;f.t=t+u;if(t<=e)return r(e-t);f.c=r}function r(e){var t=l.active,r=l[t];if(r){r.timer.c=null;r.timer.t=NaN;--l.count;delete l[t];r.event&&r.event.interrupt.call(i,i.__data__,r.index)}for(var n in l){if(+n<s){var a=l[n];a.timer.c=null;a.timer.t=NaN;--l.count;delete l[n]}}f.c=v;Ot(function(){if(f.c&&v(e||1)){f.c=null;f.t=NaN}return 1},0,u);l.active=s;c.event&&c.event.start.call(i,i.__data__,o);p=[];c.tween.forEach(function(e,t){if(t=t.call(i,i.__data__,o)){p.push(t)}});h=c.ease;d=c.duration}function v(e){var t=e/d,r=h(t),n=p.length;while(n>0){p[--n].call(i,r)}if(t>=1){c.event&&c.event.end.call(i,i.__data__,o);if(--l.count)delete l[s];else delete i[a];return 1}}if(!c){u=e.time;f=Ot(t,0,u);c=l[s]={tween:new _,time:u,timer:f,delay:e.delay,duration:e.duration,ease:e.ease,index:o};e=null;++l.count}}I.svg.axis=function(){var M=I.scale.linear(),S=zl,C=6,L=6,E=3,D=[10],O=null,P;function r(e){e.each(function(){var e=I.select(this);var t=this.__chart__||M,r=this.__chart__=M.copy();var n=O==null?r.ticks?r.ticks.apply(r,D):r.domain():O,a=P==null?r.tickFormat?r.tickFormat.apply(r,D):N:P,i=e.selectAll(".tick").data(n,r),o=i.enter().insert("g",".domain").attr("class","tick").style("opacity",ke),s=I.transition(i.exit()).style("opacity",ke).remove(),l=I.transition(i.order()).style("opacity",1),c=Math.max(C,0)+E,u;var f=is(r),d=e.selectAll(".domain").data([0]),h=(d.enter().append("path").attr("class","domain"),I.transition(d));o.append("line");o.append("text");var p=o.select("line"),v=l.select("line"),g=i.select("text").text(a),m=o.select("text"),_=l.select("text"),y=S==="top"||S==="left"?-1:1,b,x,w,A;if(S==="bottom"||S==="top"){u=Fl,b="x",w="y",x="x2",A="y2";g.attr("dy",y<0?"0em":".71em").style("text-anchor","middle");h.attr("d","M"+f[0]+","+y*L+"V0H"+f[1]+"V"+y*L)}else{u=jl,b="y",w="x",x="y2",A="x2";g.attr("dy",".32em").style("text-anchor",y<0?"end":"start");h.attr("d","M"+y*L+","+f[0]+"H0V"+f[1]+"H"+y*L)}p.attr(A,y*C);m.attr(w,y*c);v.attr(x,0).attr(A,y*C);_.attr(b,0).attr(w,y*c);if(r.rangeBand){var T=r,k=T.rangeBand()/2;t=r=function(e){return T(e)+k}}else if(t.rangeBand){t=r}else{s.call(u,r,t)}o.call(u,t,r);l.call(u,r,r)})}r.scale=function(e){if(!arguments.length)return M;M=e;return r};r.orient=function(e){if(!arguments.length)return S;S=e in Nl?e+"":zl;return r};r.ticks=function(){if(!arguments.length)return D;D=f(arguments);return r};r.tickValues=function(e){if(!arguments.length)return O;O=e;return r};r.tickFormat=function(e){if(!arguments.length)return P;P=e;return r};r.tickSize=function(e){var t=arguments.length;if(!t)return C;C=+e;L=+arguments[t-1];return r};r.innerTickSize=function(e){if(!arguments.length)return C;C=+e;return r};r.outerTickSize=function(e){if(!arguments.length)return L;L=+e;return r};r.tickPadding=function(e){if(!arguments.length)return E;E=+e;return r};r.tickSubdivide=function(){return arguments.length&&r};return r};var zl="bottom",Nl={top:1,right:1,bottom:1,left:1};function Fl(e,r,n){e.attr("transform",function(e){var t=r(e);return"translate("+(isFinite(t)?t:n(e))+",0)"})}function jl(e,r,n){e.attr("transform",function(e){var t=r(e);return"translate(0,"+(isFinite(t)?t:n(e))+")"})}I.svg.brush=function(){var b=B(L,"brushstart","brush","brushend"),x=null,w=null,A=[0,0],T=[0,0],k,M,S=true,C=true,o=Hl[0];function L(e){e.each(function(){var e=I.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",s).on("touchstart.brush",s);var t=e.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var r=e.selectAll(".resize").data(o,N);r.exit().remove();r.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Bl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");r.style("display",L.empty()?"none":null);var n=I.transition(e),a=I.transition(t),i;if(x){i=is(x);a.attr("x",i[0]).attr("width",i[1]-i[0]);D(n)}if(w){i=is(w);a.attr("y",i[0]).attr("height",i[1]-i[0]);O(n)}E(n)})}L.event=function(e){e.each(function(){var n=b.of(this,arguments),a={x:A,y:T,i:k,j:M},e=this.__chart__||a;this.__chart__=a;if(El){I.select(this).transition().each("start.brush",function(){k=e.i;M=e.j;A=e.x;T=e.y;n({type:"brushstart"})}).tween("brush:brush",function(){var t=Ti(A,a.x),r=Ti(T,a.y);k=M=null;return function(e){A=a.x=t(e);T=a.y=r(e);n({type:"brush",mode:"resize"})}}).each("end.brush",function(){k=a.i;M=a.j;n({type:"brush",mode:"resize"});n({type:"brushend"})})}else{n({type:"brushstart"});n({type:"brush",mode:"resize"});n({type:"brushend"})}})};function E(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+A[+/e$/.test(e)]+","+T[+/^s/.test(e)]+")"})}function D(e){e.select(".extent").attr("x",A[0]);e.selectAll(".extent,.n>rect,.s>rect").attr("width",A[1]-A[0])}function O(e){e.select(".extent").attr("y",T[0]);e.selectAll(".extent,.e>rect,.w>rect").attr("height",T[1]-T[0])}function s(){var r=this,e=I.select(I.event.target),n=b.of(r,arguments),a=I.select(r),t=e.datum(),i=!/^(n|s)$/.test(t)&&x,o=!/^(e|w)$/.test(t)&&w,f=e.classed("extent"),s=xe(r),d,h=I.mouse(r),l;var c=I.select(z(r)).on("keydown.brush",v).on("keyup.brush",g);if(I.event.changedTouches){c.on("touchmove.brush",m).on("touchend.brush",y)}else{c.on("mousemove.brush",m).on("mouseup.brush",y)}a.interrupt().selectAll("*").interrupt();if(f){h[0]=A[0]-h[0];h[1]=T[0]-h[1]}else if(t){var u=+/w$/.test(t),p=+/^n/.test(t);l=[A[1-u]-h[0],T[1-p]-h[1]];h[0]=A[u];h[1]=T[p]}else if(I.event.altKey)d=h.slice();a.style("pointer-events","none").selectAll(".resize").style("display",null);I.select("body").style("cursor",e.style("cursor"));n({type:"brushstart"});m();function v(){if(I.event.keyCode==32){if(!f){d=null;h[0]-=A[1];h[1]-=T[1];f=2}F()}}function g(){if(I.event.keyCode==32&&f==2){h[0]+=A[1];h[1]+=T[1];f=0;F()}}function m(){var e=I.mouse(r),t=false;if(l){e[0]+=l[0];e[1]+=l[1]}if(!f){if(I.event.altKey){if(!d)d=[(A[0]+A[1])/2,(T[0]+T[1])/2];h[0]=A[+(e[0]<d[0])];h[1]=T[+(e[1]<d[1])]}else d=null}if(i&&_(e,x,0)){D(a);t=true}if(o&&_(e,w,1)){O(a);t=true}if(t){E(a);n({type:"brush",mode:f?"move":"resize"})}}function _(e,t,r){var n=is(t),a=n[0],i=n[1],o=h[r],s=r?T:A,l=s[1]-s[0],c,u;if(f){a-=o;i-=l+o}c=(r?C:S)?Math.max(a,Math.min(i,e[r])):e[r];if(f){u=(c+=o)+l}else{if(d)o=Math.max(a,Math.min(i,2*d[r]-c));if(o<c){u=c;c=o}else{u=o}}if(s[0]!=c||s[1]!=u){if(r)M=null;else k=null;s[0]=c;s[1]=u;return true}}function y(){m();a.style("pointer-events","all").selectAll(".resize").style("display",L.empty()?"none":null);I.select("body").style("cursor",null);c.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);s();n({type:"brushend"})}}L.x=function(e){if(!arguments.length)return x;x=e;o=Hl[!x<<1|!w];return L};L.y=function(e){if(!arguments.length)return w;w=e;o=Hl[!x<<1|!w];return L};L.clamp=function(e){if(!arguments.length)return x&&w?[S,C]:x?S:w?C:null;if(x&&w)S=!!e[0],C=!!e[1];else if(x)S=!!e;else if(w)C=!!e;return L};L.extent=function(e){var t,r,n,a,i;if(!arguments.length){if(x){if(k){t=k[0],r=k[1]}else{t=A[0],r=A[1];if(x.invert)t=x.invert(t),r=x.invert(r);if(r<t)i=t,t=r,r=i}}if(w){if(M){n=M[0],a=M[1]}else{n=T[0],a=T[1];if(w.invert)n=w.invert(n),a=w.invert(a);if(a<n)i=n,n=a,a=i}}return x&&w?[[t,n],[r,a]]:x?[t,r]:w&&[n,a]}if(x){t=e[0],r=e[1];if(w)t=t[0],r=r[0];k=[t,r];if(x.invert)t=x(t),r=x(r);if(r<t)i=t,t=r,r=i;if(t!=A[0]||r!=A[1])A=[t,r]}if(w){n=e[0],a=e[1];if(x)n=n[1],a=a[1];M=[n,a];if(w.invert)n=w(n),a=w(a);if(a<n)i=n,n=a,a=i;if(n!=T[0]||a!=T[1])T=[n,a]}return L};L.clear=function(){if(!L.empty()){A=[0,0],T=[0,0];k=M=null}return L};L.empty=function(){return!!x&&A[0]==A[1]||!!w&&T[0]==T[1]};return I.rebind(L,b,"on")};var Bl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var Hl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];var Ul=Vt.format=yr.timeFormat;var Vl=Ul.utc;var ql=Vl("%Y-%m-%dT%H:%M:%S.%LZ");Ul.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Yl:ql;function Yl(e){return e.toISOString()}Yl.parse=function(e){var t=new Date(e);return isNaN(t)?null:t};Yl.toString=ql.toString;Vt.second=Wt(function(e){return new qt(Math.floor(e/1e3)*1e3)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*1e3)},function(e){return e.getSeconds()});Vt.seconds=Vt.second.range;Vt.seconds.utc=Vt.second.utc.range;Vt.minute=Wt(function(e){return new qt(Math.floor(e/6e4)*6e4)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*6e4)},function(e){return e.getMinutes()});Vt.minutes=Vt.minute.range;Vt.minutes.utc=Vt.minute.utc.range;Vt.hour=Wt(function(e){var t=e.getTimezoneOffset()/60;return new qt((Math.floor(e/36e5-t)+t)*36e5)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*36e5)},function(e){return e.getHours()});Vt.hours=Vt.hour.range;Vt.hours.utc=Vt.hour.utc.range;Vt.month=Wt(function(e){e=Vt.day(e);e.setDate(1);return e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()});Vt.months=Vt.month.range;Vt.months.utc=Vt.month.utc.range;function Gl(t,i,e){function o(e){return t(e)}o.invert=function(e){return Wl(t.invert(e))};o.domain=function(e){if(!arguments.length)return t.domain().map(Wl);t.domain(e);return o};function s(e,t){var r=e[1]-e[0],n=r/t,a=I.bisect(Xl,n);return a==Xl.length?[i.year,ps(e.map(function(e){return e/31536e6}),t)[2]]:!a?[$l,ps(e,t)[2]]:i[n/Xl[a-1]<Xl[a]/n?a-1:a]}o.nice=function(t,r){var e=o.domain(),n=as(e),a=t==null?s(n,10):typeof t==="number"&&s(n,t);if(a)t=a[0],r=a[1];function i(e){return!isNaN(e)&&!t.range(e,Wl(+e+1),r).length}return o.domain(ss(e,r>1?{floor:function(e){while(i(e=t.floor(e)))e=Wl(e-1);return e},ceil:function(e){while(i(e=t.ceil(e)))e=Wl(+e+1);return e}}:t))};o.ticks=function(e,t){var r=as(o.domain()),n=e==null?s(r,10):typeof e==="number"?s(r,e):!e.range&&[{range:e},t];if(n)e=n[0],t=n[1];return e.range(r[0],Wl(+r[1]+1),t<1?1:t)};o.tickFormat=function(){return e};o.copy=function(){return Gl(t.copy(),i,e)};return ds(o,t)}function Wl(e){return new Date(e)}var Xl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6];var Zl=[[Vt.second,1],[Vt.second,5],[Vt.second,15],[Vt.second,30],[Vt.minute,1],[Vt.minute,5],[Vt.minute,15],[Vt.minute,30],[Vt.hour,1],[Vt.hour,3],[Vt.hour,6],[Vt.hour,12],[Vt.day,1],[Vt.day,2],[Vt.week,1],[Vt.month,1],[Vt.month,3],[Vt.year,1]];var Jl=Ul.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&e.getDate()!=1}],["%b %d",function(e){return e.getDate()!=1}],["%B",function(e){return e.getMonth()}],["%Y",an]]);var $l={range:function(e,t,r){return I.range(Math.ceil(e/r)*r,+t,r).map(Wl)},floor:N,ceil:N};Zl.year=Vt.year;Vt.scale=function(){return Gl(I.scale.linear(),Zl,Jl)};var Ql=Zl.map(function(e){return[e[0].utc,e[1]]});var Kl=Vl.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],["%b %d",function(e){return e.getUTCDate()!=1}],["%B",function(e){return e.getUTCMonth()}],["%Y",an]]);Ql.year=Vt.year.utc;Vt.scale.utc=function(){return Gl(I.scale.linear(),Ql,Kl)};I.text=At(function(e){return e.responseText});I.json=function(e,t){return Tt(e,"application/json",ec,t)};function ec(e){return JSON.parse(e.responseText)}I.html=function(e,t){return Tt(e,"text/html",tc,t)};function tc(e){var t=R.createRange();t.selectNode(R.body);return t.createContextualFragment(e.responseText)}I.xml=At(function(e){return e.responseXML});if(typeof nc==="function"&&nc.amd)this.d3=I,nc(I);else if(typeof rc==="object"&&rc.exports)rc.exports=I;else this.d3=I}.apply(self)},{}],21:[function(S,C,e){(function(M){(function(){"use strict";var e=S("object-assign");function i(e,t){if(e===t){return 0}var r=e.length;var n=t.length;for(var a=0,i=Math.min(r,n);a<i;++a){if(e[a]!==t[a]){r=e[a];n=t[a];break}}if(r<n){return-1}if(n<r){return 1}return 0}function o(e){if(M.Buffer&&typeof M.Buffer.isBuffer==="function"){return M.Buffer.isBuffer(e)}return!!(e!=null&&e._isBuffer)}var u=S("util/");var n=Object.prototype.hasOwnProperty;var f=Array.prototype.slice;var a=function(){return function e(){}.name==="foo"}();function s(e){return Object.prototype.toString.call(e)}function l(e){if(o(e)){return false}if(typeof M.ArrayBuffer!=="function"){return false}if(typeof ArrayBuffer.isView==="function"){return ArrayBuffer.isView(e)}if(!e){return false}if(e instanceof DataView){return true}if(e.buffer&&e.buffer instanceof ArrayBuffer){return true}return false}var c=C.exports=g;var d=/\s*function\s+([^\(\s]*)\s*/;function h(e){if(!u.isFunction(e)){return}if(a){return e.name}var t=e.toString();var r=t.match(d);return r&&r[1]}c.AssertionError=function e(t){this.name="AssertionError";this.actual=t.actual;this.expected=t.expected;this.operator=t.operator;if(t.message){this.message=t.message;this.generatedMessage=false}else{this.message=p(this);this.generatedMessage=true}var r=t.stackStartFunction||v;if(Error.captureStackTrace){Error.captureStackTrace(this,r)}else{var n=new Error;if(n.stack){var a=n.stack;var i=h(r);var o=a.indexOf("\n"+i);if(o>=0){var s=a.indexOf("\n",o+1);a=a.substring(s+1)}this.stack=a}}};u.inherits(c.AssertionError,Error);function t(e,t){if(typeof e==="string"){return e.length<t?e:e.slice(0,t)}else{return e}}function r(e){if(a||!u.isFunction(e)){return u.inspect(e)}var t=h(e);var r=t?": "+t:"";return"[Function"+r+"]"}function p(e){return t(r(e.actual),128)+" "+e.operator+" "+t(r(e.expected),128)}function v(e,t,r,n,a){throw new c.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:a})}c.fail=v;function g(e,t){if(!e)v(e,true,t,"==",c.ok)}c.ok=g;c.equal=function e(t,r,n){if(t!=r)v(t,r,n,"==",c.equal)};c.notEqual=function e(t,r,n){if(t==r){v(t,r,n,"!=",c.notEqual)}};c.deepEqual=function e(t,r,n){if(!m(t,r,false)){v(t,r,n,"deepEqual",c.deepEqual)}};c.deepStrictEqual=function e(t,r,n){if(!m(t,r,true)){v(t,r,n,"deepStrictEqual",c.deepStrictEqual)}};function m(e,t,r,n){if(e===t){return true}else if(o(e)&&o(t)){return i(e,t)===0}else if(u.isDate(e)&&u.isDate(t)){return e.getTime()===t.getTime()}else if(u.isRegExp(e)&&u.isRegExp(t)){return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase}else if((e===null||typeof e!=="object")&&(t===null||typeof t!=="object")){return r?e===t:e==t}else if(l(e)&&l(t)&&s(e)===s(t)&&!(e instanceof Float32Array||e instanceof Float64Array)){return i(new Uint8Array(e.buffer),new Uint8Array(t.buffer))===0}else if(o(e)!==o(t)){return false}else{n=n||{actual:[],expected:[]};var a=n.actual.indexOf(e);if(a!==-1){if(a===n.expected.indexOf(t)){return true}}n.actual.push(e);n.expected.push(t);return y(e,t,r,n)}}function _(e){return Object.prototype.toString.call(e)=="[object Arguments]"}function y(e,t,r,n){if(e===null||e===undefined||t===null||t===undefined)return false;if(u.isPrimitive(e)||u.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return false;var a=_(e);var i=_(t);if(a&&!i||!a&&i)return false;if(a){e=f.call(e);t=f.call(t);return m(e,t,r)}var o=k(e);var s=k(t);var l,c;if(o.length!==s.length)return false;o.sort();s.sort();for(c=o.length-1;c>=0;c--){if(o[c]!==s[c])return false}for(c=o.length-1;c>=0;c--){l=o[c];if(!m(e[l],t[l],r,n))return false}return true}c.notDeepEqual=function e(t,r,n){if(m(t,r,false)){v(t,r,n,"notDeepEqual",c.notDeepEqual)}};c.notDeepStrictEqual=b;function b(e,t,r){if(m(e,t,true)){v(e,t,r,"notDeepStrictEqual",b)}}c.strictEqual=function e(t,r,n){if(t!==r){v(t,r,n,"===",c.strictEqual)}};c.notStrictEqual=function e(t,r,n){if(t===r){v(t,r,n,"!==",c.notStrictEqual)}};function x(e,t){if(!e||!t){return false}if(Object.prototype.toString.call(t)=="[object RegExp]"){return t.test(e)}try{if(e instanceof t){return true}}catch(e){}if(Error.isPrototypeOf(t)){return false}return t.call({},e)===true}function w(e){var t;try{e()}catch(e){t=e}return t}function A(e,t,r,n){var a;if(typeof t!=="function"){throw new TypeError('"block" argument must be a function')}if(typeof r==="string"){n=r;r=null}a=w(t);n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:".");if(e&&!a){v(a,r,"Missing expected exception"+n)}var i=typeof n==="string";var o=!e&&u.isError(a);var s=!e&&a&&!r;if(o&&i&&x(a,r)||s){v(a,r,"Got unwanted exception"+n)}if(e&&a&&r&&!x(a,r)||!e&&a){throw a}}c.throws=function(e,t,r){A(true,e,t,r)};c.doesNotThrow=function(e,t,r){A(false,e,t,r)};c.ifError=function(e){if(e)throw e};function T(e,t){if(!e)v(e,true,t,"==",T)}c.strict=e(T,c,{equal:c.strictEqual,deepEqual:c.deepStrictEqual,notEqual:c.notStrictEqual,notDeepEqual:c.notDeepStrictEqual});c.strict.strict=c.strict;var k=Object.keys||function(e){var t=[];for(var r in e){if(n.call(e,r))t.push(r)}return t}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"object-assign":71,"util/":24}],22:[function(e,t,r){if(typeof Object.create==="function"){t.exports=function e(t,r){t.super_=r;t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}else{t.exports=function e(t,r){t.super_=r;var n=function(){};n.prototype=r.prototype;t.prototype=new n;t.prototype.constructor=t}}},{}],23:[function(e,t,r){t.exports=function e(t){return t&&typeof t==="object"&&typeof t.copy==="function"&&typeof t.fill==="function"&&typeof t.readUInt8==="function"}},{}],24:[function(I,e,R){(function(O,P){(function(){var s=/%[sdj%]/g;R.format=function(e){if(!x(e)){var t=[];for(var r=0;r<arguments.length;r++){t.push(l(arguments[r]))}return t.join(" ")}var r=1;var n=arguments;var a=n.length;var i=String(e).replace(s,function(e){if(e==="%%")return"%";if(r>=a)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}});for(var o=n[r];r<a;o=n[++r]){if(c(o)||!d(o)){i+=" "+o}else{i+=" "+l(o)}}return i};R.deprecate=function(e,t){if(f(P.process)){return function(){return R.deprecate(e,t).apply(this,arguments)}}if(O.noDeprecation===true){return e}var r=false;function n(){if(!r){if(O.throwDeprecation){throw new Error(t)}else if(O.traceDeprecation){console.trace(t)}else{console.error(t)}r=true}return e.apply(this,arguments)}return n};var e={};var n;R.debuglog=function(t){if(f(n))n=O.env.NODE_DEBUG||"";t=t.toUpperCase();if(!e[t]){if(new RegExp("\\b"+t+"\\b","i").test(n)){var r=O.pid;e[t]=function(){var e=R.format.apply(R,arguments);console.error("%s %d: %s",t,r,e)}}else{e[t]=function(){}}}return e[t]};function l(e,t){var r={seen:[],stylize:i};if(arguments.length>=3)r.depth=arguments[2];if(arguments.length>=4)r.colors=arguments[3];if(o(t)){r.showHidden=t}else if(t){R._extend(r,t)}if(f(r.showHidden))r.showHidden=false;if(f(r.depth))r.depth=2;if(f(r.colors))r.colors=false;if(f(r.customInspect))r.customInspect=true;if(r.colors)r.stylize=a;return p(r,e,r.depth)}R.inspect=l;l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(e,t){var r=l.styles[t];if(r){return"["+l.colors[r][0]+"m"+e+"["+l.colors[r][1]+"m"}else{return e}}function i(e,t){return e}function h(e){var r={};e.forEach(function(e,t){r[e]=true});return r}function p(t,r,n){if(t.customInspect&&r&&k(r.inspect)&&r.inspect!==R.inspect&&!(r.constructor&&r.constructor.prototype===r)){var e=r.inspect(n,t);if(!x(e)){e=p(t,e,n)}return e}var a=v(t,r);if(a){return a}var i=Object.keys(r);var o=h(i);if(t.showHidden){i=Object.getOwnPropertyNames(r)}if(T(r)&&(i.indexOf("message")>=0||i.indexOf("description")>=0)){return g(r)}if(i.length===0){if(k(r)){var s=r.name?": "+r.name:"";return t.stylize("[Function"+s+"]","special")}if(w(r)){return t.stylize(RegExp.prototype.toString.call(r),"regexp")}if(A(r)){return t.stylize(Date.prototype.toString.call(r),"date")}if(T(r)){return g(r)}}var l="",c=false,u=["{","}"];if(b(r)){c=true;u=["[","]"]}if(k(r)){var f=r.name?": "+r.name:"";l=" [Function"+f+"]"}if(w(r)){l=" "+RegExp.prototype.toString.call(r)}if(A(r)){l=" "+Date.prototype.toUTCString.call(r)}if(T(r)){l=" "+g(r)}if(i.length===0&&(!c||r.length==0)){return u[0]+l+u[1]}if(n<0){if(w(r)){return t.stylize(RegExp.prototype.toString.call(r),"regexp")}else{return t.stylize("[Object]","special")}}t.seen.push(r);var d;if(c){d=m(t,r,n,o,i)}else{d=i.map(function(e){return _(t,r,n,o,e,c)})}t.seen.pop();return y(d,l,u)}function v(e,t){if(f(t))return e.stylize("undefined","undefined");if(x(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(u(t))return e.stylize(""+t,"number");if(o(t))return e.stylize(""+t,"boolean");if(c(t))return e.stylize("null","null")}function g(e){return"["+Error.prototype.toString.call(e)+"]"}function m(t,r,n,a,e){var i=[];for(var o=0,s=r.length;o<s;++o){if(D(r,String(o))){i.push(_(t,r,n,a,String(o),true))}else{i.push("")}}e.forEach(function(e){if(!e.match(/^\d+$/)){i.push(_(t,r,n,a,e,true))}});return i}function _(e,t,r,n,a,i){var o,s,l;l=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]};if(l.get){if(l.set){s=e.stylize("[Getter/Setter]","special")}else{s=e.stylize("[Getter]","special")}}else{if(l.set){s=e.stylize("[Setter]","special")}}if(!D(n,a)){o="["+a+"]"}if(!s){if(e.seen.indexOf(l.value)<0){if(c(r)){s=p(e,l.value,null)}else{s=p(e,l.value,r-1)}if(s.indexOf("\n")>-1){if(i){s=s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2)}else{s="\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")}}}else{s=e.stylize("[Circular]","special")}}if(f(o)){if(i&&a.match(/^\d+$/)){return s}o=JSON.stringify(""+a);if(o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){o=o.substr(1,o.length-2);o=e.stylize(o,"name")}else{o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");o=e.stylize(o,"string")}}return o+": "+s}function y(e,t,r){var n=0;var a=e.reduce(function(e,t){n++;if(t.indexOf("\n")>=0)n++;return e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(a>60){return r[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]}return r[0]+t+" "+e.join(", ")+" "+r[1]}function b(e){return Array.isArray(e)}R.isArray=b;function o(e){return typeof e==="boolean"}R.isBoolean=o;function c(e){return e===null}R.isNull=c;function t(e){return e==null}R.isNullOrUndefined=t;function u(e){return typeof e==="number"}R.isNumber=u;function x(e){return typeof e==="string"}R.isString=x;function r(e){return typeof e==="symbol"}R.isSymbol=r;function f(e){return e===void 0}R.isUndefined=f;function w(e){return d(e)&&S(e)==="[object RegExp]"}R.isRegExp=w;function d(e){return typeof e==="object"&&e!==null}R.isObject=d;function A(e){return d(e)&&S(e)==="[object Date]"}R.isDate=A;function T(e){return d(e)&&(S(e)==="[object Error]"||e instanceof Error)}R.isError=T;function k(e){return typeof e==="function"}R.isFunction=k;function M(e){return e===null||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||typeof e==="symbol"||typeof e==="undefined"}R.isPrimitive=M;R.isBuffer=I("./support/isBuffer");function S(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(){var e=new Date;var t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}R.log=function(){console.log("%s - %s",E(),R.format.apply(R,arguments))};R.inherits=I("inherits");R._extend=function(e,t){if(!t||!d(t))return e;var r=Object.keys(t);var n=r.length;while(n--){e[r[n]]=t[r[n]]}return e};function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}).call(this)}).call(this,I("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":23,_process:96,inherits:22}],25:[function(e,t,r){"use strict";r.byteLength=o;r.toByteArray=s;r.fromByteArray=v;var l=[];var c=[];var u=typeof Uint8Array!=="undefined"?Uint8Array:Array;var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var a=0,i=n.length;a<i;++a){l[a]=n[a];c[n.charCodeAt(a)]=a}c["-".charCodeAt(0)]=62;c["_".charCodeAt(0)]=63;function f(e){var t=e.length;if(t%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var r=e.indexOf("=");if(r===-1)r=t;var n=r===t?0:4-r%4;return[r,n]}function o(e){var t=f(e);var r=t[0];var n=t[1];return(r+n)*3/4-n}function d(e,t,r){return(t+r)*3/4-r}function s(e){var t;var r=f(e);var n=r[0];var a=r[1];var i=new u(d(e,n,a));var o=0;var s=a>0?n-4:n;var l;for(l=0;l<s;l+=4){t=c[e.charCodeAt(l)]<<18|c[e.charCodeAt(l+1)]<<12|c[e.charCodeAt(l+2)]<<6|c[e.charCodeAt(l+3)];i[o++]=t>>16&255;i[o++]=t>>8&255;i[o++]=t&255}if(a===2){t=c[e.charCodeAt(l)]<<2|c[e.charCodeAt(l+1)]>>4;i[o++]=t&255}if(a===1){t=c[e.charCodeAt(l)]<<10|c[e.charCodeAt(l+1)]<<4|c[e.charCodeAt(l+2)]>>2;i[o++]=t>>8&255;i[o++]=t&255}return i}function h(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[e&63]}function p(e,t,r){var n;var a=[];for(var i=t;i<r;i+=3){n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255);a.push(h(n))}return a.join("")}function v(e){var t;var r=e.length;var n=r%3;var a=[];var i=16383;for(var o=0,s=r-n;o<s;o+=i){a.push(p(e,o,o+i>s?s:o+i))}if(n===1){t=e[r-1];a.push(l[t>>2]+l[t<<4&63]+"==")}else if(n===2){t=(e[r-2]<<8)+e[r-1];a.push(l[t>>10]+l[t>>4&63]+l[t<<2&63]+"=")}return a.join("")}},{}],26:[function(e,t,r){},{}],27:[function(e,t,r){"use strict";var n=typeof Reflect==="object"?Reflect:null;var f=n&&typeof n.apply==="function"?n.apply:function e(t,r,n){return Function.prototype.apply.call(t,r,n)};var a;if(n&&typeof n.ownKeys==="function"){a=n.ownKeys}else if(Object.getOwnPropertySymbols){a=function e(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}}else{a=function e(t){return Object.getOwnPropertyNames(t)}}function l(e){if(console&&console.warn)console.warn(e)}var i=Number.isNaN||function e(t){return t!==t};function o(){o.init.call(this)}t.exports=o;t.exports.once=b;o.EventEmitter=o;o.prototype._events=undefined;o.prototype._eventsCount=0;o.prototype._maxListeners=undefined;var s=10;function c(e){if(typeof e!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:true,get:function(){return s},set:function(e){if(typeof e!=="number"||e<0||i(e)){throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".")}s=e}});o.init=function(){if(this._events===undefined||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};o.prototype.setMaxListeners=function e(t){if(typeof t!=="number"||t<0||i(t)){throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".")}this._maxListeners=t;return this};function u(e){if(e._maxListeners===undefined)return o.defaultMaxListeners;return e._maxListeners}o.prototype.getMaxListeners=function e(){return u(this)};o.prototype.emit=function e(t){var r=[];for(var n=1;n<arguments.length;n++)r.push(arguments[n]);var a=t==="error";var i=this._events;if(i!==undefined)a=a&&i.error===undefined;else if(!a)return false;if(a){var o;if(r.length>0)o=r[0];if(o instanceof Error){throw o}var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));s.context=o;throw s}var l=i[t];if(l===undefined)return false;if(typeof l==="function"){f(l,this,r)}else{var c=l.length;var u=m(l,c);for(var n=0;n<c;++n)f(u[n],this,r)}return true};function d(e,t,r,n){var a;var i;var o;c(r);i=e._events;if(i===undefined){i=e._events=Object.create(null);e._eventsCount=0}else{if(i.newListener!==undefined){e.emit("newListener",t,r.listener?r.listener:r);i=e._events}o=i[t]}if(o===undefined){o=i[t]=r;++e._eventsCount}else{if(typeof o==="function"){o=i[t]=n?[r,o]:[o,r]}else if(n){o.unshift(r)}else{o.push(r)}a=u(e);if(a>0&&o.length>a&&!o.warned){o.warned=true;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners "+"added. Use emitter.setMaxListeners() to "+"increase limit");s.name="MaxListenersExceededWarning";s.emitter=e;s.type=t;s.count=o.length;l(s)}}return e}o.prototype.addListener=function e(t,r){return d(this,t,r,false)};o.prototype.on=o.prototype.addListener;o.prototype.prependListener=function e(t,r){return d(this,t,r,true)};function h(){if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;if(arguments.length===0)return this.listener.call(this.target);return this.listener.apply(this.target,arguments)}}function p(e,t,r){var n={fired:false,wrapFn:undefined,target:e,type:t,listener:r};var a=h.bind(n);a.listener=r;n.wrapFn=a;return a}o.prototype.once=function e(t,r){c(r);this.on(t,p(this,t,r));return this};o.prototype.prependOnceListener=function e(t,r){c(r);this.prependListener(t,p(this,t,r));return this};o.prototype.removeListener=function e(t,r){var n,a,i,o,s;c(r);a=this._events;if(a===undefined)return this;n=a[t];if(n===undefined)return this;if(n===r||n.listener===r){if(--this._eventsCount===0)this._events=Object.create(null);else{delete a[t];if(a.removeListener)this.emit("removeListener",t,n.listener||r)}}else if(typeof n!=="function"){i=-1;for(o=n.length-1;o>=0;o--){if(n[o]===r||n[o].listener===r){s=n[o].listener;i=o;break}}if(i<0)return this;if(i===0)n.shift();else{_(n,i)}if(n.length===1)a[t]=n[0];if(a.removeListener!==undefined)this.emit("removeListener",t,s||r)}return this};o.prototype.off=o.prototype.removeListener;o.prototype.removeAllListeners=function e(t){var r,n,a;n=this._events;if(n===undefined)return this;if(n.removeListener===undefined){if(arguments.length===0){this._events=Object.create(null);this._eventsCount=0}else if(n[t]!==undefined){if(--this._eventsCount===0)this._events=Object.create(null);else delete n[t]}return this}if(arguments.length===0){var i=Object.keys(n);var o;for(a=0;a<i.length;++a){o=i[a];if(o==="removeListener")continue;this.removeAllListeners(o)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}r=n[t];if(typeof r==="function"){this.removeListener(t,r)}else if(r!==undefined){for(a=r.length-1;a>=0;a--){this.removeListener(t,r[a])}}return this};function v(e,t,r){var n=e._events;if(n===undefined)return[];var a=n[t];if(a===undefined)return[];if(typeof a==="function")return r?[a.listener||a]:[a];return r?y(a):m(a,a.length)}o.prototype.listeners=function e(t){return v(this,t,true)};o.prototype.rawListeners=function e(t){return v(this,t,false)};o.listenerCount=function(e,t){if(typeof e.listenerCount==="function"){return e.listenerCount(t)}else{return g.call(e,t)}};o.prototype.listenerCount=g;function g(e){var t=this._events;if(t!==undefined){var r=t[e];if(typeof r==="function"){return 1}else if(r!==undefined){return r.length}}return 0}o.prototype.eventNames=function e(){return this._eventsCount>0?a(this._events):[]};function m(e,t){var r=new Array(t);for(var n=0;n<t;++n)r[n]=e[n];return r}function _(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function y(e){var t=new Array(e.length);for(var r=0;r<t.length;++r){t[r]=e[r].listener||e[r]}return t}function b(a,i){return new Promise(function(e,r){function n(){if(t!==undefined){a.removeListener("error",t)}e([].slice.call(arguments))}var t;if(i!=="error"){t=function e(t){a.removeListener(i,n);r(t)};a.once("error",t)}a.once(i,n)})}},{}],28:[function(J,e,$){(function(e){(function(){"use strict";var n=J("base64-js");var i=J("ieee754");$.Buffer=d;$.SlowBuffer=t;$.INSPECT_MAX_BYTES=50;var r=2147483647;$.kMaxLength=r;d.TYPED_ARRAY_SUPPORT=e();if(!d.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function e(){try{var e=new Uint8Array(1);e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return e.foo()===42}catch(e){return false}}Object.defineProperty(d.prototype,"parent",{enumerable:true,get:function(){if(!d.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(d.prototype,"offset",{enumerable:true,get:function(){if(!d.isBuffer(this))return undefined;return this.byteOffset}});function o(e){if(e>r){throw new RangeError('The value "'+e+'" is invalid for option "size"')}var t=new Uint8Array(e);t.__proto__=d.prototype;return t}function d(e,t,r){if(typeof e==="number"){if(typeof t==="string"){throw new TypeError('The "string" argument must be of type string. Received type number')}return c(e)}return a(e,t,r)}if(typeof Symbol!=="undefined"&&Symbol.species!=null&&d[Symbol.species]===d){Object.defineProperty(d,Symbol.species,{value:null,configurable:true,enumerable:false,writable:false})}d.poolSize=8192;function a(e,t,r){if(typeof e==="string"){return u(e,t)}if(ArrayBuffer.isView(e)){return f(e)}if(e==null){throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof e)}if(X(e,ArrayBuffer)||e&&X(e.buffer,ArrayBuffer)){return h(e,t,r)}if(typeof e==="number"){throw new TypeError('The "value" argument must not be of type number. Received type number')}var n=e.valueOf&&e.valueOf();if(n!=null&&n!==e){return d.from(n,t,r)}var a=p(e);if(a)return a;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]==="function"){return d.from(e[Symbol.toPrimitive]("string"),t,r)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof e)}d.from=function(e,t,r){return a(e,t,r)};d.prototype.__proto__=Uint8Array.prototype;d.__proto__=Uint8Array;function s(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be of type number')}else if(e<0){throw new RangeError('The value "'+e+'" is invalid for option "size"')}}function l(e,t,r){s(e);if(e<=0){return o(e)}if(t!==undefined){return typeof r==="string"?o(e).fill(t,r):o(e).fill(t)}return o(e)}d.alloc=function(e,t,r){return l(e,t,r)};function c(e){s(e);return o(e<0?0:v(e)|0)}d.allocUnsafe=function(e){return c(e)};d.allocUnsafeSlow=function(e){return c(e)};function u(e,t){if(typeof t!=="string"||t===""){t="utf8"}if(!d.isEncoding(t)){throw new TypeError("Unknown encoding: "+t)}var r=g(e,t)|0;var n=o(r);var a=n.write(e,t);if(a!==r){n=n.slice(0,a)}return n}function f(e){var t=e.length<0?0:v(e.length)|0;var r=o(t);for(var n=0;n<t;n+=1){r[n]=e[n]&255}return r}function h(e,t,r){if(t<0||e.byteLength<t){throw new RangeError('"offset" is outside of buffer bounds')}if(e.byteLength<t+(r||0)){throw new RangeError('"length" is outside of buffer bounds')}var n;if(t===undefined&&r===undefined){n=new Uint8Array(e)}else if(r===undefined){n=new Uint8Array(e,t)}else{n=new Uint8Array(e,t,r)}n.__proto__=d.prototype;return n}function p(e){if(d.isBuffer(e)){var t=v(e.length)|0;var r=o(t);if(r.length===0){return r}e.copy(r,0,0,t);return r}if(e.length!==undefined){if(typeof e.length!=="number"||Z(e.length)){return o(0)}return f(e)}if(e.type==="Buffer"&&Array.isArray(e.data)){return f(e.data)}}function v(e){if(e>=r){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+r.toString(16)+" bytes")}return e|0}function t(e){if(+e!=e){e=0}return d.alloc(+e)}d.isBuffer=function e(t){return t!=null&&t._isBuffer===true&&t!==d.prototype};d.compare=function e(t,r){if(X(t,Uint8Array))t=d.from(t,t.offset,t.byteLength);if(X(r,Uint8Array))r=d.from(r,r.offset,r.byteLength);if(!d.isBuffer(t)||!d.isBuffer(r)){throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array')}if(t===r)return 0;var n=t.length;var a=r.length;for(var i=0,o=Math.min(n,a);i<o;++i){if(t[i]!==r[i]){n=t[i];a=r[i];break}}if(n<a)return-1;if(a<n)return 1;return 0};d.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};d.concat=function e(t,r){if(!Array.isArray(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return d.alloc(0)}var n;if(r===undefined){r=0;for(n=0;n<t.length;++n){r+=t[n].length}}var a=d.allocUnsafe(r);var i=0;for(n=0;n<t.length;++n){var o=t[n];if(X(o,Uint8Array)){o=d.from(o)}if(!d.isBuffer(o)){throw new TypeError('"list" argument must be an Array of Buffers')}o.copy(a,i);i+=o.length}return a};function g(e,t){if(d.isBuffer(e)){return e.length}if(ArrayBuffer.isView(e)||X(e,ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. '+"Received type "+typeof e)}var r=e.length;var n=arguments.length>2&&arguments[2]===true;if(!n&&r===0)return 0;var a=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return G(e).length;default:if(a){return n?-1:V(e).length}t=(""+t).toLowerCase();a=true}}}d.byteLength=g;function m(e,t,r){var n=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;t>>>=0;if(r<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return P(this,t,r);case"utf8":case"utf-8":return C(this,t,r);case"ascii":return D(this,t,r);case"latin1":case"binary":return O(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true}}}d.prototype._isBuffer=true;function _(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}d.prototype.swap16=function e(){var t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var r=0;r<t;r+=2){_(this,r,r+1)}return this};d.prototype.swap32=function e(){var t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var r=0;r<t;r+=4){_(this,r,r+3);_(this,r+1,r+2)}return this};d.prototype.swap64=function e(){var t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var r=0;r<t;r+=8){_(this,r,r+7);_(this,r+1,r+6);_(this,r+2,r+5);_(this,r+3,r+4)}return this};d.prototype.toString=function e(){var t=this.length;if(t===0)return"";if(arguments.length===0)return C(this,0,t);return m.apply(this,arguments)};d.prototype.toLocaleString=d.prototype.toString;d.prototype.equals=function e(t){if(!d.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return d.compare(this,t)===0};d.prototype.inspect=function e(){var t="";var r=$.INSPECT_MAX_BYTES;t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim();if(this.length>r)t+=" ... ";return"<Buffer "+t+">"};d.prototype.compare=function e(t,r,n,a,i){if(X(t,Uint8Array)){t=d.from(t,t.offset,t.byteLength)}if(!d.isBuffer(t)){throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. '+"Received type "+typeof t)}if(r===undefined){r=0}if(n===undefined){n=t?t.length:0}if(a===undefined){a=0}if(i===undefined){i=this.length}if(r<0||n>t.length||a<0||i>this.length){throw new RangeError("out of range index")}if(a>=i&&r>=n){return 0}if(a>=i){return-1}if(r>=n){return 1}r>>>=0;n>>>=0;a>>>=0;i>>>=0;if(this===t)return 0;var o=i-a;var s=n-r;var l=Math.min(o,s);var c=this.slice(a,i);var u=t.slice(r,n);for(var f=0;f<l;++f){if(c[f]!==u[f]){o=c[f];s=u[f];break}}if(o<s)return-1;if(s<o)return 1;return 0};function y(e,t,r,n,a){if(e.length===0)return-1;if(typeof r==="string"){n=r;r=0}else if(r>2147483647){r=2147483647}else if(r<-2147483648){r=-2147483648}r=+r;if(Z(r)){r=a?0:e.length-1}if(r<0)r=e.length+r;if(r>=e.length){if(a)return-1;else r=e.length-1}else if(r<0){if(a)r=0;else return-1}if(typeof t==="string"){t=d.from(t,n)}if(d.isBuffer(t)){if(t.length===0){return-1}return b(e,t,r,n,a)}else if(typeof t==="number"){t=t&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(a){return Uint8Array.prototype.indexOf.call(e,t,r)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,r)}}return b(e,[t],r,n,a)}throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,a){var i=1;var o=e.length;var s=t.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(e.length<2||t.length<2){return-1}i=2;o/=2;s/=2;r/=2}}function l(e,t){if(i===1){return e[t]}else{return e.readUInt16BE(t*i)}}var c;if(a){var u=-1;for(c=r;c<o;c++){if(l(e,c)===l(t,u===-1?0:c-u)){if(u===-1)u=c;if(c-u+1===s)return u*i}else{if(u!==-1)c-=c-u;u=-1}}}else{if(r+s>o)r=o-s;for(c=r;c>=0;c--){var f=true;for(var d=0;d<s;d++){if(l(e,c+d)!==l(t,d)){f=false;break}}if(f)return c}}return-1}d.prototype.includes=function e(t,r,n){return this.indexOf(t,r,n)!==-1};d.prototype.indexOf=function e(t,r,n){return y(this,t,r,n,true)};d.prototype.lastIndexOf=function e(t,r,n){return y(this,t,r,n,false)};function x(e,t,r,n){r=Number(r)||0;var a=e.length-r;if(!n){n=a}else{n=Number(n);if(n>a){n=a}}var i=t.length;if(n>i/2){n=i/2}for(var o=0;o<n;++o){var s=parseInt(t.substr(o*2,2),16);if(Z(s))return o;e[r+o]=s}return o}function w(e,t,r,n){return W(V(t,e.length-r),e,r,n)}function A(e,t,r,n){return W(q(t),e,r,n)}function T(e,t,r,n){return A(e,t,r,n)}function k(e,t,r,n){return W(G(t),e,r,n)}function M(e,t,r,n){return W(Y(t,e.length-r),e,r,n)}d.prototype.write=function e(t,r,n,a){if(r===undefined){a="utf8";n=this.length;r=0}else if(n===undefined&&typeof r==="string"){a=r;n=this.length;r=0}else if(isFinite(r)){r=r>>>0;if(isFinite(n)){n=n>>>0;if(a===undefined)a="utf8"}else{a=n;n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var i=this.length-r;if(n===undefined||n>i)n=i;if(t.length>0&&(n<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!a)a="utf8";var o=false;for(;;){switch(a){case"hex":return x(this,t,r,n);case"utf8":case"utf-8":return w(this,t,r,n);case"ascii":return A(this,t,r,n);case"latin1":case"binary":return T(this,t,r,n);case"base64":return k(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,r,n);default:if(o)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();o=true}}};d.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function S(e,t,r){if(t===0&&r===e.length){return n.fromByteArray(e)}else{return n.fromByteArray(e.slice(t,r))}}function C(e,t,r){r=Math.min(e.length,r);var n=[];var a=t;while(a<r){var i=e[a];var o=null;var s=i>239?4:i>223?3:i>191?2:1;if(a+s<=r){var l,c,u,f;switch(s){case 1:if(i<128){o=i}break;case 2:l=e[a+1];if((l&192)===128){f=(i&31)<<6|l&63;if(f>127){o=f}}break;case 3:l=e[a+1];c=e[a+2];if((l&192)===128&&(c&192)===128){f=(i&15)<<12|(l&63)<<6|c&63;if(f>2047&&(f<55296||f>57343)){o=f}}break;case 4:l=e[a+1];c=e[a+2];u=e[a+3];if((l&192)===128&&(c&192)===128&&(u&192)===128){f=(i&15)<<18|(l&63)<<12|(c&63)<<6|u&63;if(f>65535&&f<1114112){o=f}}}}if(o===null){o=65533;s=1}else if(o>65535){o-=65536;n.push(o>>>10&1023|55296);o=56320|o&1023}n.push(o);a+=s}return E(n)}var L=4096;function E(e){var t=e.length;if(t<=L){return String.fromCharCode.apply(String,e)}var r="";var n=0;while(n<t){r+=String.fromCharCode.apply(String,e.slice(n,n+=L))}return r}function D(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a){n+=String.fromCharCode(e[a]&127)}return n}function O(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a){n+=String.fromCharCode(e[a])}return n}function P(e,t,r){var n=e.length;if(!t||t<0)t=0;if(!r||r<0||r>n)r=n;var a="";for(var i=t;i<r;++i){a+=U(e[i])}return a}function I(e,t,r){var n=e.slice(t,r);var a="";for(var i=0;i<n.length;i+=2){a+=String.fromCharCode(n[i]+n[i+1]*256)}return a}d.prototype.slice=function e(t,r){var n=this.length;t=~~t;r=r===undefined?n:~~r;if(t<0){t+=n;if(t<0)t=0}else if(t>n){t=n}if(r<0){r+=n;if(r<0)r=0}else if(r>n){r=n}if(r<t)r=t;var a=this.subarray(t,r);a.__proto__=d.prototype;return a};function R(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUIntLE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)R(t,r,this.length);var a=this[t];var i=1;var o=0;while(++o<r&&(i*=256)){a+=this[t+o]*i}return a};d.prototype.readUIntBE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n){R(t,r,this.length)}var a=this[t+--r];var i=1;while(r>0&&(i*=256)){a+=this[t+--r]*i}return a};d.prototype.readUInt8=function e(t,r){t=t>>>0;if(!r)R(t,1,this.length);return this[t]};d.prototype.readUInt16LE=function e(t,r){t=t>>>0;if(!r)R(t,2,this.length);return this[t]|this[t+1]<<8};d.prototype.readUInt16BE=function e(t,r){t=t>>>0;if(!r)R(t,2,this.length);return this[t]<<8|this[t+1]};d.prototype.readUInt32LE=function e(t,r){t=t>>>0;if(!r)R(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};d.prototype.readUInt32BE=function e(t,r){t=t>>>0;if(!r)R(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};d.prototype.readIntLE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)R(t,r,this.length);var a=this[t];var i=1;var o=0;while(++o<r&&(i*=256)){a+=this[t+o]*i}i*=128;if(a>=i)a-=Math.pow(2,8*r);return a};d.prototype.readIntBE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)R(t,r,this.length);var a=r;var i=1;var o=this[t+--a];while(a>0&&(i*=256)){o+=this[t+--a]*i}i*=128;if(o>=i)o-=Math.pow(2,8*r);return o};d.prototype.readInt8=function e(t,r){t=t>>>0;if(!r)R(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};d.prototype.readInt16LE=function e(t,r){t=t>>>0;if(!r)R(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};d.prototype.readInt16BE=function e(t,r){t=t>>>0;if(!r)R(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};d.prototype.readInt32LE=function e(t,r){t=t>>>0;if(!r)R(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};d.prototype.readInt32BE=function e(t,r){t=t>>>0;if(!r)R(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};d.prototype.readFloatLE=function e(t,r){t=t>>>0;if(!r)R(t,4,this.length);return i.read(this,t,true,23,4)};d.prototype.readFloatBE=function e(t,r){t=t>>>0;if(!r)R(t,4,this.length);return i.read(this,t,false,23,4)};d.prototype.readDoubleLE=function e(t,r){t=t>>>0;if(!r)R(t,8,this.length);return i.read(this,t,true,52,8)};d.prototype.readDoubleBE=function e(t,r){t=t>>>0;if(!r)R(t,8,this.length);return i.read(this,t,false,52,8)};function z(e,t,r,n,a,i){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}d.prototype.writeUIntLE=function e(t,r,n,a){t=+t;r=r>>>0;n=n>>>0;if(!a){var i=Math.pow(2,8*n)-1;z(this,t,r,n,i,0)}var o=1;var s=0;this[r]=t&255;while(++s<n&&(o*=256)){this[r+s]=t/o&255}return r+n};d.prototype.writeUIntBE=function e(t,r,n,a){t=+t;r=r>>>0;n=n>>>0;if(!a){var i=Math.pow(2,8*n)-1;z(this,t,r,n,i,0)}var o=n-1;var s=1;this[r+o]=t&255;while(--o>=0&&(s*=256)){this[r+o]=t/s&255}return r+n};d.prototype.writeUInt8=function e(t,r,n){t=+t;r=r>>>0;if(!n)z(this,t,r,1,255,0);this[r]=t&255;return r+1};d.prototype.writeUInt16LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)z(this,t,r,2,65535,0);this[r]=t&255;this[r+1]=t>>>8;return r+2};d.prototype.writeUInt16BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)z(this,t,r,2,65535,0);this[r]=t>>>8;this[r+1]=t&255;return r+2};d.prototype.writeUInt32LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)z(this,t,r,4,4294967295,0);this[r+3]=t>>>24;this[r+2]=t>>>16;this[r+1]=t>>>8;this[r]=t&255;return r+4};d.prototype.writeUInt32BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)z(this,t,r,4,4294967295,0);this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};d.prototype.writeIntLE=function e(t,r,n,a){t=+t;r=r>>>0;if(!a){var i=Math.pow(2,8*n-1);z(this,t,r,n,i-1,-i)}var o=0;var s=1;var l=0;this[r]=t&255;while(++o<n&&(s*=256)){if(t<0&&l===0&&this[r+o-1]!==0){l=1}this[r+o]=(t/s>>0)-l&255}return r+n};d.prototype.writeIntBE=function e(t,r,n,a){t=+t;r=r>>>0;if(!a){var i=Math.pow(2,8*n-1);z(this,t,r,n,i-1,-i)}var o=n-1;var s=1;var l=0;this[r+o]=t&255;while(--o>=0&&(s*=256)){if(t<0&&l===0&&this[r+o+1]!==0){l=1}this[r+o]=(t/s>>0)-l&255}return r+n};d.prototype.writeInt8=function e(t,r,n){t=+t;r=r>>>0;if(!n)z(this,t,r,1,127,-128);if(t<0)t=255+t+1;this[r]=t&255;return r+1};d.prototype.writeInt16LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)z(this,t,r,2,32767,-32768);this[r]=t&255;this[r+1]=t>>>8;return r+2};d.prototype.writeInt16BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)z(this,t,r,2,32767,-32768);this[r]=t>>>8;this[r+1]=t&255;return r+2};d.prototype.writeInt32LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)z(this,t,r,4,2147483647,-2147483648);this[r]=t&255;this[r+1]=t>>>8;this[r+2]=t>>>16;this[r+3]=t>>>24;return r+4};d.prototype.writeInt32BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)z(this,t,r,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};function N(e,t,r,n,a,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(e,t,r,n,a){t=+t;r=r>>>0;if(!a){N(e,t,r,4,34028234663852886e22,-34028234663852886e22)}i.write(e,t,r,n,23,4);return r+4}d.prototype.writeFloatLE=function e(t,r,n){return F(this,t,r,true,n)};d.prototype.writeFloatBE=function e(t,r,n){return F(this,t,r,false,n)};function j(e,t,r,n,a){t=+t;r=r>>>0;if(!a){N(e,t,r,8,17976931348623157e292,-17976931348623157e292)}i.write(e,t,r,n,52,8);return r+8}d.prototype.writeDoubleLE=function e(t,r,n){return j(this,t,r,true,n)};d.prototype.writeDoubleBE=function e(t,r,n){return j(this,t,r,false,n)};d.prototype.copy=function e(t,r,n,a){if(!d.isBuffer(t))throw new TypeError("argument should be a Buffer");if(!n)n=0;if(!a&&a!==0)a=this.length;if(r>=t.length)r=t.length;if(!r)r=0;if(a>0&&a<n)a=n;if(a===n)return 0;if(t.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("sourceEnd out of bounds");if(a>this.length)a=this.length;if(t.length-r<a-n){a=t.length-r+n}var i=a-n;if(this===t&&typeof Uint8Array.prototype.copyWithin==="function"){this.copyWithin(r,n,a)}else if(this===t&&n<r&&r<a){for(var o=i-1;o>=0;--o){t[o+r]=this[o+n]}}else{Uint8Array.prototype.set.call(t,this.subarray(n,a),r)}return i};d.prototype.fill=function e(t,r,n,a){if(typeof t==="string"){if(typeof r==="string"){a=r;r=0;n=this.length}else if(typeof n==="string"){a=n;n=this.length}if(a!==undefined&&typeof a!=="string"){throw new TypeError("encoding must be a string")}if(typeof a==="string"&&!d.isEncoding(a)){throw new TypeError("Unknown encoding: "+a)}if(t.length===1){var i=t.charCodeAt(0);if(a==="utf8"&&i<128||a==="latin1"){t=i}}}else if(typeof t==="number"){t=t&255}if(r<0||this.length<r||this.length<n){throw new RangeError("Out of range index")}if(n<=r){return this}r=r>>>0;n=n===undefined?this.length:n>>>0;if(!t)t=0;var o;if(typeof t==="number"){for(o=r;o<n;++o){this[o]=t}}else{var s=d.isBuffer(t)?t:d.from(t,a);var l=s.length;if(l===0){throw new TypeError('The value "'+t+'" is invalid for argument "value"')}for(o=0;o<n-r;++o){this[o+r]=s[o%l]}}return this};var B=/[^+/0-9A-Za-z-_]/g;function H(e){e=e.split("=")[0];e=e.trim().replace(B,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function U(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function V(e,t){t=t||Infinity;var r;var n=e.length;var a=null;var i=[];for(var o=0;o<n;++o){r=e.charCodeAt(o);if(r>55295&&r<57344){if(!a){if(r>56319){if((t-=3)>-1)i.push(239,191,189);continue}else if(o+1===n){if((t-=3)>-1)i.push(239,191,189);continue}a=r;continue}if(r<56320){if((t-=3)>-1)i.push(239,191,189);a=r;continue}r=(a-55296<<10|r-56320)+65536}else if(a){if((t-=3)>-1)i.push(239,191,189)}a=null;if(r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return i}function q(e){var t=[];for(var r=0;r<e.length;++r){t.push(e.charCodeAt(r)&255)}return t}function Y(e,t){var r,n,a;var i=[];for(var o=0;o<e.length;++o){if((t-=2)<0)break;r=e.charCodeAt(o);n=r>>8;a=r%256;i.push(a);i.push(n)}return i}function G(e){return n.toByteArray(H(e))}function W(e,t,r,n){for(var a=0;a<n;++a){if(a+r>=t.length||a>=e.length)break;t[a+r]=e[a]}return a}function X(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function Z(e){return e!==e}}).call(this)}).call(this,J("buffer").Buffer)},{"base64-js":25,buffer:28,ieee754:64}],29:[function(r,n,a){(function(e,t){typeof a==="object"&&typeof n!=="undefined"?t(a,r("d3-time")):typeof nc==="function"&&nc.amd?nc(["exports","d3-time"],t):(e=e||self,t(e.d3=e.d3||{},e.d3))})(this,function(t,Y){"use strict";function G(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);t.setFullYear(e.y);return t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function W(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));t.setUTCFullYear(e.y);return t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function X(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function r(e){var n=e.dateTime,a=e.date,i=e.time,t=e.periods,r=e.days,o=e.shortDays,s=e.months,l=e.shortMonths;var c=J(t),u=$(t),f=J(r),d=$(r),h=J(o),p=$(o),v=J(s),g=$(s),m=J(l),_=$(l);var y={a:P,A:I,b:R,B:z,c:null,d:_e,e:_e,f:Ae,H:ye,I:be,j:xe,L:we,m:Te,M:ke,p:N,q:F,Q:Ke,s:et,S:Me,u:Se,U:Ce,V:Le,w:Ee,W:De,x:null,X:null,y:Oe,Y:Pe,Z:Ie,"%":Qe};var b={a:j,A:B,b:H,B:U,c:null,d:Re,e:Re,f:Be,H:ze,I:Ne,j:Fe,L:je,m:He,M:Ue,p:V,q:q,Q:Ke,s:et,S:Ve,u:qe,U:Ye,V:Ge,w:We,W:Xe,x:null,X:null,y:Ze,Y:Je,Z:$e,"%":Qe};var x={a:M,A:S,b:C,B:L,c:E,d:le,e:le,f:pe,H:ue,I:ue,j:ce,L:he,m:se,M:fe,p:k,q:oe,Q:ge,s:me,S:de,u:K,U:ee,V:te,w:Q,W:re,x:D,X:O,y:ae,Y:ne,Z:ie,"%":ve};y.x=w(a,y);y.X=w(i,y);y.c=w(n,y);b.x=w(a,b);b.X=w(i,b);b.c=w(n,b);function w(l,c){return function(e){var t=[],r=-1,n=0,a=l.length,i,o,s;if(!(e instanceof Date))e=new Date(+e);while(++r<a){if(l.charCodeAt(r)===37){t.push(l.slice(n,r));if((o=Z[i=l.charAt(++r)])!=null)i=l.charAt(++r);else o=i==="e"?" ":"0";if(s=c[i])i=s(e,o);t.push(i);n=r+1}}t.push(l.slice(n,r));return t.join("")}}function A(i,o){return function(e){var t=X(1900,undefined,1),r=T(t,i,e+="",0),n,a;if(r!=e.length)return null;if("Q"in t)return new Date(t.Q);if("s"in t)return new Date(t.s*1e3+("L"in t?t.L:0));if(o&&!("Z"in t))t.Z=0;if("p"in t)t.H=t.H%12+t.p*12;if(t.m===undefined)t.m="q"in t?t.q:0;if("V"in t){if(t.V<1||t.V>53)return null;if(!("w"in t))t.w=1;if("Z"in t){n=W(X(t.y,0,1)),a=n.getUTCDay();n=a>4||a===0?Y.utcMonday.ceil(n):Y.utcMonday(n);n=Y.utcDay.offset(n,(t.V-1)*7);t.y=n.getUTCFullYear();t.m=n.getUTCMonth();t.d=n.getUTCDate()+(t.w+6)%7}else{n=G(X(t.y,0,1)),a=n.getDay();n=a>4||a===0?Y.timeMonday.ceil(n):Y.timeMonday(n);n=Y.timeDay.offset(n,(t.V-1)*7);t.y=n.getFullYear();t.m=n.getMonth();t.d=n.getDate()+(t.w+6)%7}}else if("W"in t||"U"in t){if(!("w"in t))t.w="u"in t?t.u%7:"W"in t?1:0;a="Z"in t?W(X(t.y,0,1)).getUTCDay():G(X(t.y,0,1)).getDay();t.m=0;t.d="W"in t?(t.w+6)%7+t.W*7-(a+5)%7:t.w+t.U*7-(a+6)%7}if("Z"in t){t.H+=t.Z/100|0;t.M+=t.Z%100;return W(t)}return G(t)}}function T(e,t,r,n){var a=0,i=t.length,o=r.length,s,l;while(a<i){if(n>=o)return-1;s=t.charCodeAt(a++);if(s===37){s=t.charAt(a++);l=x[s in Z?t.charAt(a++):s];if(!l||(n=l(e,r,n))<0)return-1}else if(s!=r.charCodeAt(n++)){return-1}}return n}function k(e,t,r){var n=c.exec(t.slice(r));return n?(e.p=u[n[0].toLowerCase()],r+n[0].length):-1}function M(e,t,r){var n=h.exec(t.slice(r));return n?(e.w=p[n[0].toLowerCase()],r+n[0].length):-1}function S(e,t,r){var n=f.exec(t.slice(r));return n?(e.w=d[n[0].toLowerCase()],r+n[0].length):-1}function C(e,t,r){var n=m.exec(t.slice(r));return n?(e.m=_[n[0].toLowerCase()],r+n[0].length):-1}function L(e,t,r){var n=v.exec(t.slice(r));return n?(e.m=g[n[0].toLowerCase()],r+n[0].length):-1}function E(e,t,r){return T(e,n,t,r)}function D(e,t,r){return T(e,a,t,r)}function O(e,t,r){return T(e,i,t,r)}function P(e){return o[e.getDay()]}function I(e){return r[e.getDay()]}function R(e){return l[e.getMonth()]}function z(e){return s[e.getMonth()]}function N(e){return t[+(e.getHours()>=12)]}function F(e){return 1+~~(e.getMonth()/3)}function j(e){return o[e.getUTCDay()]}function B(e){return r[e.getUTCDay()]}function H(e){return l[e.getUTCMonth()]}function U(e){return s[e.getUTCMonth()]}function V(e){return t[+(e.getUTCHours()>=12)]}function q(e){return 1+~~(e.getUTCMonth()/3)}return{format:function(e){var t=w(e+="",y);t.toString=function(){return e};return t},parse:function(e){var t=A(e+="",false);t.toString=function(){return e};return t},utcFormat:function(e){var t=w(e+="",b);t.toString=function(){return e};return t},utcParse:function(e){var t=A(e+="",true);t.toString=function(){return e};return t}}}var Z={"-":"",_:" ",0:"0"},a=/^\s*\d+/,i=/^%/,n=/[\\^$*+?|[\]().{}]/g;function o(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function s(e){return e.replace(n,"\\$&")}function J(e){return new RegExp("^(?:"+e.map(s).join("|")+")","i")}function $(e){var t={},r=-1,n=e.length;while(++r<n)t[e[r].toLowerCase()]=r;return t}function Q(e,t,r){var n=a.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function K(e,t,r){var n=a.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function ee(e,t,r){var n=a.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function te(e,t,r){var n=a.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function re(e,t,r){var n=a.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function ne(e,t,r){var n=a.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function ae(e,t,r){var n=a.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function ie(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function oe(e,t,r){var n=a.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function se(e,t,r){var n=a.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function le(e,t,r){var n=a.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function ce(e,t,r){var n=a.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function ue(e,t,r){var n=a.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function fe(e,t,r){var n=a.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function de(e,t,r){var n=a.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function he(e,t,r){var n=a.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function pe(e,t,r){var n=a.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function ve(e,t,r){var n=i.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function ge(e,t,r){var n=a.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function me(e,t,r){var n=a.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function _e(e,t){return o(e.getDate(),t,2)}function ye(e,t){return o(e.getHours(),t,2)}function be(e,t){return o(e.getHours()%12||12,t,2)}function xe(e,t){return o(1+Y.timeDay.count(Y.timeYear(e),e),t,3)}function we(e,t){return o(e.getMilliseconds(),t,3)}function Ae(e,t){return we(e,t)+"000"}function Te(e,t){return o(e.getMonth()+1,t,2)}function ke(e,t){return o(e.getMinutes(),t,2)}function Me(e,t){return o(e.getSeconds(),t,2)}function Se(e){var t=e.getDay();return t===0?7:t}function Ce(e,t){return o(Y.timeSunday.count(Y.timeYear(e)-1,e),t,2)}function Le(e,t){var r=e.getDay();e=r>=4||r===0?Y.timeThursday(e):Y.timeThursday.ceil(e);return o(Y.timeThursday.count(Y.timeYear(e),e)+(Y.timeYear(e).getDay()===4),t,2)}function Ee(e){return e.getDay()}function De(e,t){return o(Y.timeMonday.count(Y.timeYear(e)-1,e),t,2)}function Oe(e,t){return o(e.getFullYear()%100,t,2)}function Pe(e,t){return o(e.getFullYear()%1e4,t,4)}function Ie(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+o(t/60|0,"0",2)+o(t%60,"0",2)}function Re(e,t){return o(e.getUTCDate(),t,2)}function ze(e,t){return o(e.getUTCHours(),t,2)}function Ne(e,t){return o(e.getUTCHours()%12||12,t,2)}function Fe(e,t){return o(1+Y.utcDay.count(Y.utcYear(e),e),t,3)}function je(e,t){return o(e.getUTCMilliseconds(),t,3)}function Be(e,t){return je(e,t)+"000"}function He(e,t){return o(e.getUTCMonth()+1,t,2)}function Ue(e,t){return o(e.getUTCMinutes(),t,2)}function Ve(e,t){return o(e.getUTCSeconds(),t,2)}function qe(e){var t=e.getUTCDay();return t===0?7:t}function Ye(e,t){return o(Y.utcSunday.count(Y.utcYear(e)-1,e),t,2)}function Ge(e,t){var r=e.getUTCDay();e=r>=4||r===0?Y.utcThursday(e):Y.utcThursday.ceil(e);return o(Y.utcThursday.count(Y.utcYear(e),e)+(Y.utcYear(e).getUTCDay()===4),t,2)}function We(e){return e.getUTCDay()}function Xe(e,t){return o(Y.utcMonday.count(Y.utcYear(e)-1,e),t,2)}function Ze(e,t){return o(e.getUTCFullYear()%100,t,2)}function Je(e,t){return o(e.getUTCFullYear()%1e4,t,4)}function $e(){return"+0000"}function Qe(){return"%"}function Ke(e){return+e}function et(e){return Math.floor(+e/1e3)}var l;e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function e(e){l=r(e);t.timeFormat=l.format;t.timeParse=l.parse;t.utcFormat=l.utcFormat;t.utcParse=l.utcParse;return l}var c="%Y-%m-%dT%H:%M:%S.%LZ";function u(e){return e.toISOString()}var f=Date.prototype.toISOString?u:t.utcFormat(c);function d(e){var t=new Date(e);return isNaN(t)?null:t}var h=+new Date("2000-01-01T00:00:00.000Z")?d:t.utcParse(c);t.isoFormat=f;t.isoParse=h;t.timeFormatDefaultLocale=e;t.timeFormatLocale=r;Object.defineProperty(t,"__esModule",{value:true})})},{"d3-time":30}],30:[function(e,r,n){(function(e,t){typeof n==="object"&&typeof r!=="undefined"?t(n):typeof nc==="function"&&nc.amd?nc(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(this,function(e){"use strict";var a=new Date,l=new Date;function c(i,o,r,n){function s(e){return i(e=arguments.length===0?new Date:new Date(+e)),e}s.floor=function(e){return i(e=new Date(+e)),e};s.ceil=function(e){return i(e=new Date(e-1)),o(e,1),i(e),e};s.round=function(e){var t=s(e),r=s.ceil(e);return e-t<r-e?t:r};s.offset=function(e,t){return o(e=new Date(+e),t==null?1:Math.floor(t)),e};s.range=function(e,t,r){var n=[],a;e=s.ceil(e);r=r==null?1:Math.floor(r);if(!(e<t)||!(r>0))return n;do{n.push(a=new Date(+e)),o(e,r),i(e)}while(a<e&&e<t);return n};s.filter=function(r){return c(function(e){if(e>=e)while(i(e),!r(e))e.setTime(e-1)},function(e,t){if(e>=e){if(t<0)while(++t<=0){while(o(e,-1),!r(e)){}}else while(--t>=0){while(o(e,+1),!r(e)){}}}})};if(r){s.count=function(e,t){a.setTime(+e),l.setTime(+t);i(a),i(l);return Math.floor(r(a,l))};s.every=function(t){t=Math.floor(t);return!isFinite(t)||!(t>0)?null:!(t>1)?s:s.filter(n?function(e){return n(e)%t===0}:function(e){return s.count(0,e)%t===0})}}return s}var t=c(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});t.every=function(r){r=Math.floor(r);if(!isFinite(r)||!(r>0))return null;if(!(r>1))return t;return c(function(e){e.setTime(Math.floor(e/r)*r)},function(e,t){e.setTime(+e+t*r)},function(e,t){return(t-e)/r})};var r=t.range;var n=1e3;var i=6e4;var o=36e5;var s=864e5;var u=6048e5;var f=c(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*n)},function(e,t){return(t-e)/n},function(e){return e.getUTCSeconds()});var d=f.range;var h=c(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*n)},function(e,t){e.setTime(+e+t*i)},function(e,t){return(t-e)/i},function(e){return e.getMinutes()});var p=h.range;var v=c(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*n-e.getMinutes()*i)},function(e,t){e.setTime(+e+t*o)},function(e,t){return(t-e)/o},function(e){return e.getHours()});var g=v.range;var m=c(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i)/s},function(e){return e.getDate()-1});var _=m.range;function y(t){return c(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7);e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i)/u})}var b=y(0);var x=y(1);var w=y(2);var A=y(3);var T=y(4);var k=y(5);var M=y(6);var S=b.range;var C=x.range;var L=w.range;var E=A.range;var D=T.range;var O=k.range;var P=M.range;var I=c(function(e){e.setDate(1);e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});var R=I.range;var z=c(function(e){e.setMonth(0,1);e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});z.every=function(r){return!isFinite(r=Math.floor(r))||!(r>0)?null:c(function(e){e.setFullYear(Math.floor(e.getFullYear()/r)*r);e.setMonth(0,1);e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*r)})};var N=z.range;var F=c(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*i)},function(e,t){return(t-e)/i},function(e){return e.getUTCMinutes()});var j=F.range;var B=c(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*o)},function(e,t){return(t-e)/o},function(e){return e.getUTCHours()});var H=B.range;var U=c(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/s},function(e){return e.getUTCDate()-1});var V=U.range;function q(t){return c(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/u})}var Y=q(0);var G=q(1);var W=q(2);var X=q(3);var Z=q(4);var J=q(5);var $=q(6);var Q=Y.range;var K=G.range;var ee=W.range;var te=X.range;var re=Z.range;var ne=J.range;var ae=$.range;var ie=c(function(e){e.setUTCDate(1);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()});var oe=ie.range;var se=c(function(e){e.setUTCMonth(0,1);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});se.every=function(r){return!isFinite(r=Math.floor(r))||!(r>0)?null:c(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/r)*r);e.setUTCMonth(0,1);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*r)})};var le=se.range;e.timeDay=m;e.timeDays=_;e.timeFriday=k;e.timeFridays=O;e.timeHour=v;e.timeHours=g;e.timeInterval=c;e.timeMillisecond=t;e.timeMilliseconds=r;e.timeMinute=h;e.timeMinutes=p;e.timeMonday=x;e.timeMondays=C;e.timeMonth=I;e.timeMonths=R;e.timeSaturday=M;e.timeSaturdays=P;e.timeSecond=f;e.timeSeconds=d;e.timeSunday=b;e.timeSundays=S;e.timeThursday=T;e.timeThursdays=D;e.timeTuesday=w;e.timeTuesdays=L;e.timeWednesday=A;e.timeWednesdays=E;e.timeWeek=b;e.timeWeeks=S;e.timeYear=z;e.timeYears=N;e.utcDay=U;e.utcDays=V;e.utcFriday=J;e.utcFridays=ne;e.utcHour=B;e.utcHours=H;e.utcMillisecond=t;e.utcMilliseconds=r;e.utcMinute=F;e.utcMinutes=j;e.utcMonday=G;e.utcMondays=K;e.utcMonth=ie;e.utcMonths=oe;e.utcSaturday=$;e.utcSaturdays=ae;e.utcSecond=f;e.utcSeconds=d;e.utcSunday=Y;e.utcSundays=Q;e.utcThursday=Z;e.utcThursdays=re;e.utcTuesday=W;e.utcTuesdays=ee;e.utcWednesday=X;e.utcWednesdays=te;e.utcWeek=Y;e.utcWeeks=Q;e.utcYear=se;e.utcYears=le;Object.defineProperty(e,"__esModule",{value:true})})},{}],31:[function(e,t,r){"use strict";var n=e("is-string-blank");t.exports=function(e){var t=typeof e;if(t==="string"){var r=e;e=+e;if(e===0&&n(r))return false}else if(t!=="number")return false;return e-e<1}},{"is-string-blank":68}],32:[function(e,t,r){t.exports=n;function n(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],f=t[9],d=t[10],h=t[11],p=t[12],v=t[13],g=t[14],m=t[15];e[0]=s*(d*m-h*g)-f*(l*m-c*g)+v*(l*h-c*d);e[1]=-(n*(d*m-h*g)-f*(a*m-i*g)+v*(a*h-i*d));e[2]=n*(l*m-c*g)-s*(a*m-i*g)+v*(a*c-i*l);e[3]=-(n*(l*h-c*d)-s*(a*h-i*d)+f*(a*c-i*l));e[4]=-(o*(d*m-h*g)-u*(l*m-c*g)+p*(l*h-c*d));e[5]=r*(d*m-h*g)-u*(a*m-i*g)+p*(a*h-i*d);e[6]=-(r*(l*m-c*g)-o*(a*m-i*g)+p*(a*c-i*l));e[7]=r*(l*h-c*d)-o*(a*h-i*d)+u*(a*c-i*l);e[8]=o*(f*m-h*v)-u*(s*m-c*v)+p*(s*h-c*f);e[9]=-(r*(f*m-h*v)-u*(n*m-i*v)+p*(n*h-i*f));e[10]=r*(s*m-c*v)-o*(n*m-i*v)+p*(n*c-i*s);e[11]=-(r*(s*h-c*f)-o*(n*h-i*f)+u*(n*c-i*s));e[12]=-(o*(f*g-d*v)-u*(s*g-l*v)+p*(s*d-l*f));e[13]=r*(f*g-d*v)-u*(n*g-a*v)+p*(n*d-a*f);e[14]=-(r*(s*g-l*v)-o*(n*g-a*v)+p*(n*l-a*s));e[15]=r*(s*d-l*f)-o*(n*d-a*f)+u*(n*l-a*s);return e}},{}],33:[function(e,t,r){t.exports=n;function n(e){var t=new Float32Array(16);t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];return t}},{}],34:[function(e,t,r){t.exports=n;function n(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[4]=t[4];e[5]=t[5];e[6]=t[6];e[7]=t[7];e[8]=t[8];e[9]=t[9];e[10]=t[10];e[11]=t[11];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15];return e}},{}],35:[function(e,t,r){t.exports=n;function n(){var e=new Float32Array(16);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],36:[function(e,t,r){t.exports=n;function n(e){var t=e[0],r=e[1],n=e[2],a=e[3],i=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],f=e[10],d=e[11],h=e[12],p=e[13],v=e[14],g=e[15],m=t*o-r*i,_=t*s-n*i,y=t*l-a*i,b=r*s-n*o,x=r*l-a*o,w=n*l-a*s,A=c*p-u*h,T=c*v-f*h,k=c*g-d*h,M=u*v-f*p,S=u*g-d*p,C=f*g-d*v;return m*C-_*S+y*M+b*k-x*T+w*A}},{}],37:[function(e,t,r){t.exports=n;function n(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=r+r,s=n+n,l=a+a,c=r*o,u=n*o,f=n*s,d=a*o,h=a*s,p=a*l,v=i*o,g=i*s,m=i*l;e[0]=1-f-p;e[1]=u+m;e[2]=d-g;e[3]=0;e[4]=u-m;e[5]=1-c-p;e[6]=h+v;e[7]=0;e[8]=d+g;e[9]=h-v;e[10]=1-c-f;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],38:[function(e,t,r){t.exports=n;function n(e,t,r){var n,a,i;var o=r[0];var s=r[1];var l=r[2];var c=Math.sqrt(o*o+s*s+l*l);if(Math.abs(c)<1e-6){return null}c=1/c;o*=c;s*=c;l*=c;n=Math.sin(t);a=Math.cos(t);i=1-a;e[0]=o*o*i+a;e[1]=s*o*i+l*n;e[2]=l*o*i-s*n;e[3]=0;e[4]=o*s*i-l*n;e[5]=s*s*i+a;e[6]=l*s*i+o*n;e[7]=0;e[8]=o*l*i+s*n;e[9]=s*l*i-o*n;e[10]=l*l*i+a;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],39:[function(e,t,r){t.exports=n;function n(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3],s=n+n,l=a+a,c=i+i,u=n*s,f=n*l,d=n*c,h=a*l,p=a*c,v=i*c,g=o*s,m=o*l,_=o*c;e[0]=1-(h+v);e[1]=f+_;e[2]=d-m;e[3]=0;e[4]=f-_;e[5]=1-(u+v);e[6]=p+g;e[7]=0;e[8]=d+m;e[9]=p-g;e[10]=1-(u+h);e[11]=0;e[12]=r[0];e[13]=r[1];e[14]=r[2];e[15]=1;return e}},{}],40:[function(e,t,r){t.exports=n;function n(e,t){e[0]=t[0];e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=t[1];e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=t[2];e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],41:[function(e,t,r){t.exports=n;function n(e,t){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=t[0];e[13]=t[1];e[14]=t[2];e[15]=1;return e}},{}],42:[function(e,t,r){t.exports=n;function n(e,t){var r=Math.sin(t),n=Math.cos(t);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=n;e[6]=r;e[7]=0;e[8]=0;e[9]=-r;e[10]=n;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],43:[function(e,t,r){t.exports=n;function n(e,t){var r=Math.sin(t),n=Math.cos(t);e[0]=n;e[1]=0;e[2]=-r;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=r;e[9]=0;e[10]=n;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],44:[function(e,t,r){t.exports=n;function n(e,t){var r=Math.sin(t),n=Math.cos(t);e[0]=n;e[1]=r;e[2]=0;e[3]=0;e[4]=-r;e[5]=n;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],45:[function(e,t,r){t.exports=n;function n(e,t,r,n,a,i,o){var s=1/(r-t),l=1/(a-n),c=1/(i-o);e[0]=i*2*s;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=i*2*l;e[6]=0;e[7]=0;e[8]=(r+t)*s;e[9]=(a+n)*l;e[10]=(o+i)*c;e[11]=-1;e[12]=0;e[13]=0;e[14]=o*i*2*c;e[15]=0;return e}},{}],46:[function(e,t,r){t.exports=n;function n(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],47:[function(e,t,r){t.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":32,"./clone":33,"./copy":34,"./create":35,"./determinant":36,"./fromQuat":37,"./fromRotation":38,"./fromRotationTranslation":39,"./fromScaling":40,"./fromTranslation":41,"./fromXRotation":42,"./fromYRotation":43,"./fromZRotation":44,"./frustum":45,"./identity":46,"./invert":48,"./lookAt":49,"./multiply":50,"./ortho":51,"./perspective":52,"./perspectiveFromFieldOfView":53,"./rotate":54,"./rotateX":55,"./rotateY":56,"./rotateZ":57,"./scale":58,"./str":59,"./translate":60,"./transpose":61}],48:[function(e,t,r){t.exports=n;function n(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],f=t[9],d=t[10],h=t[11],p=t[12],v=t[13],g=t[14],m=t[15],_=r*s-n*o,y=r*l-a*o,b=r*c-i*o,x=n*l-a*s,w=n*c-i*s,A=a*c-i*l,T=u*v-f*p,k=u*g-d*p,M=u*m-h*p,S=f*g-d*v,C=f*m-h*v,L=d*m-h*g,E=_*L-y*C+b*S+x*M-w*k+A*T;if(!E){return null}E=1/E;e[0]=(s*L-l*C+c*S)*E;e[1]=(a*C-n*L-i*S)*E;e[2]=(v*A-g*w+m*x)*E;e[3]=(d*w-f*A-h*x)*E;e[4]=(l*M-o*L-c*k)*E;e[5]=(r*L-a*M+i*k)*E;e[6]=(g*b-p*A-m*y)*E;e[7]=(u*A-d*b+h*y)*E;e[8]=(o*C-s*M+c*T)*E;e[9]=(n*M-r*C-i*T)*E;e[10]=(p*w-v*b+m*_)*E;e[11]=(f*b-u*w-h*_)*E;e[12]=(s*k-o*S-l*T)*E;e[13]=(r*S-n*k+a*T)*E;e[14]=(v*y-p*x-g*_)*E;e[15]=(u*x-f*y+d*_)*E;return e}},{}],49:[function(e,t,r){var A=e("./identity");t.exports=n;function n(e,t,r,n){var a,i,o,s,l,c,u,f,d,h,p=t[0],v=t[1],g=t[2],m=n[0],_=n[1],y=n[2],b=r[0],x=r[1],w=r[2];if(Math.abs(p-b)<1e-6&&Math.abs(v-x)<1e-6&&Math.abs(g-w)<1e-6){return A(e)}u=p-b;f=v-x;d=g-w;h=1/Math.sqrt(u*u+f*f+d*d);u*=h;f*=h;d*=h;a=_*d-y*f;i=y*u-m*d;o=m*f-_*u;h=Math.sqrt(a*a+i*i+o*o);if(!h){a=0;i=0;o=0}else{h=1/h;a*=h;i*=h;o*=h}s=f*o-d*i;l=d*a-u*o;c=u*i-f*a;h=Math.sqrt(s*s+l*l+c*c);if(!h){s=0;l=0;c=0}else{h=1/h;s*=h;l*=h;c*=h}e[0]=a;e[1]=s;e[2]=u;e[3]=0;e[4]=i;e[5]=l;e[6]=f;e[7]=0;e[8]=o;e[9]=c;e[10]=d;e[11]=0;e[12]=-(a*p+i*v+o*g);e[13]=-(s*p+l*v+c*g);e[14]=-(u*p+f*v+d*g);e[15]=1;return e}},{"./identity":46}],50:[function(e,t,r){t.exports=n;function n(e,t,r){var n=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],f=t[8],d=t[9],h=t[10],p=t[11],v=t[12],g=t[13],m=t[14],_=t[15];var y=r[0],b=r[1],x=r[2],w=r[3];e[0]=y*n+b*s+x*f+w*v;e[1]=y*a+b*l+x*d+w*g;e[2]=y*i+b*c+x*h+w*m;e[3]=y*o+b*u+x*p+w*_;y=r[4];b=r[5];x=r[6];w=r[7];e[4]=y*n+b*s+x*f+w*v;e[5]=y*a+b*l+x*d+w*g;e[6]=y*i+b*c+x*h+w*m;e[7]=y*o+b*u+x*p+w*_;y=r[8];b=r[9];x=r[10];w=r[11];e[8]=y*n+b*s+x*f+w*v;e[9]=y*a+b*l+x*d+w*g;e[10]=y*i+b*c+x*h+w*m;e[11]=y*o+b*u+x*p+w*_;y=r[12];b=r[13];x=r[14];w=r[15];e[12]=y*n+b*s+x*f+w*v;e[13]=y*a+b*l+x*d+w*g;e[14]=y*i+b*c+x*h+w*m;e[15]=y*o+b*u+x*p+w*_;return e}},{}],51:[function(e,t,r){t.exports=n;function n(e,t,r,n,a,i,o){var s=1/(t-r),l=1/(n-a),c=1/(i-o);e[0]=-2*s;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=-2*l;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=2*c;e[11]=0;e[12]=(t+r)*s;e[13]=(a+n)*l;e[14]=(o+i)*c;e[15]=1;return e}},{}],52:[function(e,t,r){t.exports=n;function n(e,t,r,n,a){var i=1/Math.tan(t/2),o=1/(n-a);e[0]=i/r;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=i;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=(a+n)*o;e[11]=-1;e[12]=0;e[13]=0;e[14]=2*a*n*o;e[15]=0;return e}},{}],53:[function(e,t,r){t.exports=n;function n(e,t,r,n){var a=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),c=2/(a+i);e[0]=l;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=c;e[6]=0;e[7]=0;e[8]=-((o-s)*l*.5);e[9]=(a-i)*c*.5;e[10]=n/(r-n);e[11]=-1;e[12]=0;e[13]=0;e[14]=n*r/(r-n);e[15]=0;return e}},{}],54:[function(e,t,r){t.exports=n;function n(e,t,r,n){var a=n[0],i=n[1],o=n[2],s=Math.sqrt(a*a+i*i+o*o),l,c,u,f,d,h,p,v,g,m,_,y,b,x,w,A,T,k,M,S,C,L,E,D;if(Math.abs(s)<1e-6){return null}s=1/s;a*=s;i*=s;o*=s;l=Math.sin(r);c=Math.cos(r);u=1-c;f=t[0];d=t[1];h=t[2];p=t[3];v=t[4];g=t[5];m=t[6];_=t[7];y=t[8];b=t[9];x=t[10];w=t[11];A=a*a*u+c;T=i*a*u+o*l;k=o*a*u-i*l;M=a*i*u-o*l;S=i*i*u+c;C=o*i*u+a*l;L=a*o*u+i*l;E=i*o*u-a*l;D=o*o*u+c;e[0]=f*A+v*T+y*k;e[1]=d*A+g*T+b*k;e[2]=h*A+m*T+x*k;e[3]=p*A+_*T+w*k;e[4]=f*M+v*S+y*C;e[5]=d*M+g*S+b*C;e[6]=h*M+m*S+x*C;e[7]=p*M+_*S+w*C;e[8]=f*L+v*E+y*D;e[9]=d*L+g*E+b*D;e[10]=h*L+m*E+x*D;e[11]=p*L+_*E+w*D;if(t!==e){e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}return e}},{}],55:[function(e,t,r){t.exports=n;function n(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],f=t[10],d=t[11];if(t!==e){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[4]=i*a+c*n;e[5]=o*a+u*n;e[6]=s*a+f*n;e[7]=l*a+d*n;e[8]=c*a-i*n;e[9]=u*a-o*n;e[10]=f*a-s*n;e[11]=d*a-l*n;return e}},{}],56:[function(e,t,r){t.exports=n;function n(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[0],o=t[1],s=t[2],l=t[3],c=t[8],u=t[9],f=t[10],d=t[11];if(t!==e){e[4]=t[4];e[5]=t[5];e[6]=t[6];e[7]=t[7];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[0]=i*a-c*n;e[1]=o*a-u*n;e[2]=s*a-f*n;e[3]=l*a-d*n;e[8]=i*n+c*a;e[9]=o*n+u*a;e[10]=s*n+f*a;e[11]=l*n+d*a;return e}},{}],57:[function(e,t,r){t.exports=n;function n(e,t,r){var n=Math.sin(r),a=Math.cos(r),i=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],f=t[6],d=t[7];if(t!==e){e[8]=t[8];e[9]=t[9];e[10]=t[10];e[11]=t[11];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[0]=i*a+c*n;e[1]=o*a+u*n;e[2]=s*a+f*n;e[3]=l*a+d*n;e[4]=c*a-i*n;e[5]=u*a-o*n;e[6]=f*a-s*n;e[7]=d*a-l*n;return e}},{}],58:[function(e,t,r){t.exports=n;function n(e,t,r){var n=r[0],a=r[1],i=r[2];e[0]=t[0]*n;e[1]=t[1]*n;e[2]=t[2]*n;e[3]=t[3]*n;e[4]=t[4]*a;e[5]=t[5]*a;e[6]=t[6]*a;e[7]=t[7]*a;e[8]=t[8]*i;e[9]=t[9]*i;e[10]=t[10]*i;e[11]=t[11]*i;e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15];return e}},{}],59:[function(e,t,r){t.exports=n;function n(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},{}],60:[function(e,t,r){t.exports=n;function n(e,t,r){var n=r[0],a=r[1],i=r[2],o,s,l,c,u,f,d,h,p,v,g,m;if(t===e){e[12]=t[0]*n+t[4]*a+t[8]*i+t[12];e[13]=t[1]*n+t[5]*a+t[9]*i+t[13];e[14]=t[2]*n+t[6]*a+t[10]*i+t[14];e[15]=t[3]*n+t[7]*a+t[11]*i+t[15]}else{o=t[0];s=t[1];l=t[2];c=t[3];u=t[4];f=t[5];d=t[6];h=t[7];p=t[8];v=t[9];g=t[10];m=t[11];e[0]=o;e[1]=s;e[2]=l;e[3]=c;e[4]=u;e[5]=f;e[6]=d;e[7]=h;e[8]=p;e[9]=v;e[10]=g;e[11]=m;e[12]=o*n+u*a+p*i+t[12];e[13]=s*n+f*a+v*i+t[13];e[14]=l*n+d*a+g*i+t[14];e[15]=c*n+h*a+m*i+t[15]}return e}},{}],61:[function(e,t,r){t.exports=n;function n(e,t){if(e===t){var r=t[1],n=t[2],a=t[3],i=t[6],o=t[7],s=t[11];e[1]=t[4];e[2]=t[8];e[3]=t[12];e[4]=r;e[6]=t[9];e[7]=t[13];e[8]=n;e[9]=i;e[11]=t[14];e[12]=a;e[13]=o;e[14]=s}else{e[0]=t[0];e[1]=t[4];e[2]=t[8];e[3]=t[12];e[4]=t[1];e[5]=t[5];e[6]=t[9];e[7]=t[13];e[8]=t[2];e[9]=t[6];e[10]=t[10];e[11]=t[14];e[12]=t[3];e[13]=t[7];e[14]=t[11];e[15]=t[15]}return e}},{}],62:[function(n,a,e){(function(r){(function(){"use strict";var e=n("is-browser");var t;if(typeof r.matchMedia==="function"){t=!r.matchMedia("(hover: none)").matches}else{t=e}a.exports=t}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"is-browser":66}],63:[function(e,t,r){"use strict";var n=e("is-browser");function a(){var t=false;try{var e=Object.defineProperty({},"passive",{get:function(){t=true}});window.addEventListener("test",null,e);window.removeEventListener("test",null,e)}catch(e){t=false}return t}t.exports=n&&a()},{"is-browser":66}],64:[function(e,t,r){r.read=function(e,t,r,n,a){var i,o;var s=a*8-n-1;var l=(1<<s)-1;var c=l>>1;var u=-7;var f=r?a-1:0;var d=r?-1:1;var h=e[t+f];f+=d;i=h&(1<<-u)-1;h>>=-u;u+=s;for(;u>0;i=i*256+e[t+f],f+=d,u-=8){}o=i&(1<<-u)-1;i>>=-u;u+=n;for(;u>0;o=o*256+e[t+f],f+=d,u-=8){}if(i===0){i=1-c}else if(i===l){return o?NaN:(h?-1:1)*Infinity}else{o=o+Math.pow(2,n);i=i-c}return(h?-1:1)*o*Math.pow(2,i-n)};r.write=function(e,t,r,n,a,i){var o,s,l;var c=i*8-a-1;var u=(1<<c)-1;var f=u>>1;var d=a===23?Math.pow(2,-24)-Math.pow(2,-77):0;var h=n?0:i-1;var p=n?1:-1;var v=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){s=isNaN(t)?1:0;o=u}else{o=Math.floor(Math.log(t)/Math.LN2);if(t*(l=Math.pow(2,-o))<1){o--;l*=2}if(o+f>=1){t+=d/l}else{t+=d*Math.pow(2,1-f)}if(t*l>=2){o++;l/=2}if(o+f>=u){s=0;o=u}else if(o+f>=1){s=(t*l-1)*Math.pow(2,a);o=o+f}else{s=t*Math.pow(2,f-1)*Math.pow(2,a);o=0}}for(;a>=8;e[r+h]=s&255,h+=p,s/=256,a-=8){}o=o<<a|s;c+=a;for(;c>0;e[r+h]=o&255,h+=p,o/=256,c-=8){}e[r+h-p]|=v*128}},{}],65:[function(e,t,r){if(typeof Object.create==="function"){t.exports=function e(t,r){if(r){t.super_=r;t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}}else{t.exports=function e(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype;t.prototype=new n;t.prototype.constructor=t}}}},{}],66:[function(e,t,r){t.exports=true},{}],67:[function(e,t,r){"use strict";t.exports=i;t.exports.isMobile=i;t.exports.default=i;var n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i;var a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function i(e){if(!e)e={};var t=e.ua;if(!t&&typeof navigator!=="undefined")t=navigator.userAgent;if(t&&t.headers&&typeof t.headers["user-agent"]==="string"){t=t.headers["user-agent"]}if(typeof t!=="string")return false;var r=e.tablet?a.test(t):n.test(t);if(!r&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1){r=true}return r}},{}],68:[function(e,t,r){"use strict";t.exports=function(e){var t=e.length,r;for(var n=0;n<t;n++){r=e.charCodeAt(n);if((r<9||r>13)&&r!==32&&r!==133&&r!==160&&r!==5760&&r!==6158&&(r<8192||r>8205)&&r!==8232&&r!==8233&&r!==8239&&r!==8287&&r!==8288&&r!==12288&&r!==65279){return false}}return true}},{}],69:[function(e,t,r){var n={left:0,top:0};t.exports=a;function a(e,t,r){t=t||e.currentTarget||e.srcElement;if(!Array.isArray(r)){r=[0,0]}var n=e.clientX||0;var a=e.clientY||0;var i=o(t);r[0]=n-i.left;r[1]=a-i.top;return r}function o(e){if(e===window||e===document||e===document.body){return n}else{return e.getBoundingClientRect()}}},{}],70:[function(e,a,t){(function(e,m){(function(){(function e(t,r,n){r[t]=r[t]||n();if(typeof a!="undefined"&&a.exports){a.exports=r[t]}else if(typeof nc=="function"&&nc.amd){nc(function e(){return r[t]})}})("Promise",typeof e!="undefined"?e:this,function e(){"use strict";var t,r,n,i=Object.prototype.toString,a=typeof m!="undefined"?function e(t){return m(t)}:setTimeout;try{Object.defineProperty({},"x",{});t=function e(t,r,n,a){return Object.defineProperty(t,r,{value:n,writable:true,configurable:a!==false})}}catch(e){t=function e(t,r,n){t[r]=n;return t}}n=function e(){var n,a,i;function o(e,t){this.fn=e;this.self=t;this.next=void 0}return{add:function e(t,r){i=new o(t,r);if(a){a.next=i}else{n=i}a=i;i=void 0},drain:function e(){var t=n;n=a=r=void 0;while(t){t.fn.call(t.self);t=t.next}}}}();function o(e,t){n.add(e,t);if(!r){r=a(n.drain)}}function s(e){var t,r=typeof e;if(e!=null&&(r=="object"||r=="function")){t=e.then}return typeof t=="function"?t:false}function l(){for(var e=0;e<this.chain.length;e++){c(this,this.state===1?this.chain[e].success:this.chain[e].failure,this.chain[e])}this.chain.length=0}function c(e,t,r){var n,a;try{if(t===false){r.reject(e.msg)}else{if(t===true){n=e.msg}else{n=t.call(void 0,e.msg)}if(n===r.promise){r.reject(TypeError("Promise-chain cycle"))}else if(a=s(n)){a.call(n,r.resolve,r.reject)}else{r.resolve(n)}}}catch(e){r.reject(e)}}function u(e){var r,n=this;if(n.triggered){return}n.triggered=true;if(n.def){n=n.def}try{if(r=s(e)){o(function(){var t=new h(n);try{r.call(e,function e(){u.apply(t,arguments)},function e(){f.apply(t,arguments)})}catch(e){f.call(t,e)}})}else{n.msg=e;n.state=1;if(n.chain.length>0){o(l,n)}}}catch(e){f.call(new h(n),e)}}function f(e){var t=this;if(t.triggered){return}t.triggered=true;if(t.def){t=t.def}t.msg=e;t.state=2;if(t.chain.length>0){o(l,t)}}function d(t,n,a,i){for(var e=0;e<n.length;e++){(function e(r){t.resolve(n[r]).then(function e(t){a(r,t)},i)})(e)}}function h(e){this.def=e;this.triggered=false}function p(e){this.promise=e;this.state=0;this.triggered=false;this.chain=[];this.msg=void 0}function v(e){if(typeof e!="function"){throw TypeError("Not a function")}if(this.__NPO__!==0){throw TypeError("Not a promise")}this.__NPO__=1;var a=new p(this);this["then"]=function e(t,r){var n={success:typeof t=="function"?t:true,failure:typeof r=="function"?r:false};n.promise=new this.constructor(function e(t,r){if(typeof t!="function"||typeof r!="function"){throw TypeError("Not a function")}n.resolve=t;n.reject=r});a.chain.push(n);if(a.state!==0){o(l,a)}return n.promise};this["catch"]=function e(t){return this.then(void 0,t)};try{e.call(void 0,function e(t){u.call(a,t)},function e(t){f.call(a,t)})}catch(e){f.call(a,e)}}var g=t({},"constructor",v,false);v.prototype=g;t(g,"__NPO__",0,false);t(v,"resolve",function e(n){var t=this;if(n&&typeof n=="object"&&n.__NPO__===1){return n}return new t(function e(t,r){if(typeof t!="function"||typeof r!="function"){throw TypeError("Not a function")}t(n)})});t(v,"reject",function e(n){return new this(function e(t,r){if(typeof t!="function"||typeof r!="function"){throw TypeError("Not a function")}r(n)})});t(v,"all",function e(r){var s=this;if(i.call(r)!="[object Array]"){return s.reject(TypeError("Not an array"))}if(r.length===0){return s.resolve([])}return new s(function e(n,t){if(typeof n!="function"||typeof t!="function"){throw TypeError("Not a function")}var a=r.length,i=Array(a),o=0;d(s,r,function e(t,r){i[t]=r;if(++o===a){n(i)}},t)})});t(v,"race",function e(r){var a=this;if(i.call(r)!="[object Array]"){return a.reject(TypeError("Not an array"))}return new a(function e(n,t){if(typeof n!="function"||typeof t!="function"){throw TypeError("Not a function")}d(a,r,function e(t,r){n(r)},t)})});return v})}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},e("timers").setImmediate)},{timers:118}],71:[function(e,t,r){"use strict";var l=Object.getOwnPropertySymbols;var c=Object.prototype.hasOwnProperty;var u=Object.prototype.propertyIsEnumerable;function f(e){if(e===null||e===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(e)}function n(){try{if(!Object.assign){return false}var e=new String("abc");e[5]="de";if(Object.getOwnPropertyNames(e)[0]==="5"){return false}var t={};for(var r=0;r<10;r++){t["_"+String.fromCharCode(r)]=r}var n=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if(n.join("")!=="0123456789"){return false}var a={};"abcdefghijklmnopqrst".split("").forEach(function(e){a[e]=e});if(Object.keys(Object.assign({},a)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(e){return false}}t.exports=n()?Object.assign:function(e,t){var r;var n=f(e);var a;for(var i=1;i<arguments.length;i++){r=Object(arguments[i]);for(var o in r){if(c.call(r,o)){n[o]=r[o]}}if(l){a=l(r);for(var s=0;s<a.length;s++){if(u.call(r,a[s])){n[a[s]]=r[a[s]]}}}}return n}},{}],72:[function(e,t,r){t.exports=a;var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0};var n=/([astvzqmhlc])([^astvzqmhlc]*)/gi;function a(e){var a=[];e.replace(n,function(e,t,r){var n=t.toLowerCase();r=s(r);if(n=="m"&&r.length>2){a.push([t].concat(r.splice(0,2)));n="l";t=t=="m"?"l":"L"}while(true){if(r.length==i[n]){r.unshift(t);return a.push(r)}if(r.length<i[n])throw new Error("malformed path data");a.push([t].concat(r.splice(0,i[n])))}});return a}var o=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function s(e){var t=e.match(o);return t?t.map(Number):[]}},{}],73:[function(e,t,r){var n=e("./lib/build-log");var a=e("./lib/epsilon");var i=e("./lib/intersecter");var o=e("./lib/segment-chainer");var s=e("./lib/segment-selector");var l=e("./lib/geojson");var c=false;var u=a();var f;f={buildLog:function(e){if(e===true)c=n();else if(e===false)c=false;return c===false?false:c.list},epsilon:function(e){return u.epsilon(e)},segments:function(e){var t=i(true,u,c);e.regions.forEach(t.addRegion);return{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){var r=i(false,u,c);return{combined:r.calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:s.union(e.combined,c),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:s.intersect(e.combined,c),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:s.difference(e.combined,c),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:s.differenceRev(e.combined,c),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:s.xor(e.combined,c),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:o(e.segments,u,c),inverted:e.inverted}},polygonFromGeoJSON:function(e){return l.toPolygon(f,e)},polygonToGeoJSON:function(e){return l.fromPolygon(f,u,e)},union:function(e,t){return d(e,t,f.selectUnion)},intersect:function(e,t){return d(e,t,f.selectIntersect)},difference:function(e,t){return d(e,t,f.selectDifference)},differenceRev:function(e,t){return d(e,t,f.selectDifferenceRev)},xor:function(e,t){return d(e,t,f.selectXor)}};function d(e,t,r){var n=f.segments(e);var a=f.segments(t);var i=f.combine(n,a);var o=r(i);return f.polygon(o)}if(typeof window==="object")window.PolyBool=f;t.exports=f},{"./lib/build-log":74,"./lib/epsilon":75,"./lib/geojson":76,"./lib/intersecter":77,"./lib/segment-chainer":79,"./lib/segment-selector":80}],74:[function(e,t,r){function n(){var r;var e=0;var t=false;function n(e,t){r.list.push({type:e,data:t?JSON.parse(JSON.stringify(t)):void 0});return r}r={list:[],segmentId:function(){return e++},checkIntersection:function(e,t){return n("check",{seg1:e,seg2:t})},segmentChop:function(e,t){n("div_seg",{seg:e,pt:t});return n("chop",{seg:e,pt:t})},statusRemove:function(e){return n("pop_seg",{seg:e})},segmentUpdate:function(e){return n("seg_update",{seg:e})},segmentNew:function(e,t){return n("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return n("rem_seg",{seg:e})},tempStatus:function(e,t,r){return n("temp_status",{seg:e,above:t,below:r})},rewind:function(e){return n("rewind",{seg:e})},status:function(e,t,r){return n("status",{seg:e,above:t,below:r})},vert:function(e){if(e===t)return r;t=e;return n("vert",{x:e})},log:function(e){if(typeof e!=="string")e=JSON.stringify(e,false,"  ");return n("log",{txt:e})},reset:function(){return n("reset")},selected:function(e){return n("selected",{segs:e})},chainStart:function(e){return n("chain_start",{seg:e})},chainRemoveHead:function(e,t){return n("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return n("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return n("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return n("chain_match",{index:e})},chainClose:function(e){return n("chain_close",{index:e})},chainAddHead:function(e,t){return n("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return n("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return n("chain_con",{index1:e,index2:t})},chainReverse:function(e){return n("chain_rev",{index:e})},chainJoin:function(e,t){return n("chain_join",{index1:e,index2:t})},done:function(){return n("done")}};return r}t.exports=n},{}],75:[function(e,t,r){function n(p){if(typeof p!=="number")p=1e-10;var r={epsilon:function(e){if(typeof e==="number")p=e;return p},pointAboveOrOnLine:function(e,t,r){var n=t[0];var a=t[1];var i=r[0];var o=r[1];var s=e[0];var l=e[1];return(i-n)*(l-a)-(o-a)*(s-n)>=-p},pointBetween:function(e,t,r){var n=e[1]-t[1];var a=r[0]-t[0];var i=e[0]-t[0];var o=r[1]-t[1];var s=i*a+n*o;if(s<p)return false;var l=a*a+o*o;if(s-l>-p)return false;return true},pointsSameX:function(e,t){return Math.abs(e[0]-t[0])<p},pointsSameY:function(e,t){return Math.abs(e[1]-t[1])<p},pointsSame:function(e,t){return r.pointsSameX(e,t)&&r.pointsSameY(e,t)},pointsCompare:function(e,t){if(r.pointsSameX(e,t))return r.pointsSameY(e,t)?0:e[1]<t[1]?-1:1;return e[0]<t[0]?-1:1},pointsCollinear:function(e,t,r){var n=e[0]-t[0];var a=e[1]-t[1];var i=t[0]-r[0];var o=t[1]-r[1];return Math.abs(n*o-i*a)<p},linesIntersect:function(e,t,r,n){var a=t[0]-e[0];var i=t[1]-e[1];var o=n[0]-r[0];var s=n[1]-r[1];var l=a*s-i*o;if(Math.abs(l)<p)return false;var c=e[0]-r[0];var u=e[1]-r[1];var f=(o*u-s*c)/l;var d=(a*u-i*c)/l;var h={alongA:0,alongB:0,pt:[e[0]+f*a,e[1]+f*i]};if(f<=-p)h.alongA=-2;else if(f<p)h.alongA=-1;else if(f-1<=-p)h.alongA=0;else if(f-1<p)h.alongA=1;else h.alongA=2;if(d<=-p)h.alongB=-2;else if(d<p)h.alongB=-1;else if(d-1<=-p)h.alongB=0;else if(d-1<p)h.alongB=1;else h.alongB=2;return h},pointInsideRegion:function(e,t){var r=e[0];var n=e[1];var a=t[t.length-1][0];var i=t[t.length-1][1];var o=false;for(var s=0;s<t.length;s++){var l=t[s][0];var c=t[s][1];if(c-n>p!=i-n>p&&(a-l)*(n-c)/(i-c)+l-r>p)o=!o;a=l;i=c}return o}};return r}t.exports=n},{}],76:[function(e,t,r){var n={toPolygon:function(a,e){function t(e){if(e.length<=0)return a.segments({inverted:false,regions:[]});function t(e){var t=e.slice(0,e.length-1);return a.segments({inverted:false,regions:[t]})}var r=t(e[0]);for(var n=1;n<e.length;n++)r=a.selectDifference(a.combine(r,t(e[n])));return r}if(e.type==="Polygon"){return a.polygon(t(e.coordinates))}else if(e.type==="MultiPolygon"){var r=a.segments({inverted:false,regions:[]});for(var n=0;n<e.coordinates.length;n++)r=a.selectUnion(a.combine(r,t(e.coordinates[n])));return a.polygon(r)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,r,t){t=e.polygon(e.segments(t));function i(e,t){return r.pointInsideRegion([(e[0][0]+e[1][0])*.5,(e[0][1]+e[1][1])*.5],t)}function o(e){return{region:e,children:[]}}var n=o(null);function s(e,t){for(var r=0;r<e.children.length;r++){var n=e.children[r];if(i(t,n.region)){s(n,t);return}}var a=o(t);for(var r=0;r<e.children.length;r++){var n=e.children[r];if(i(n.region,t)){a.children.push(n);e.children.splice(r,1);r--}}e.children.push(a)}for(var a=0;a<t.regions.length;a++){var l=t.regions[a];if(l.length<3)continue;s(n,l)}function c(e,t){var r=0;var n=e[e.length-1][0];var a=e[e.length-1][1];var i=[];for(var o=0;o<e.length;o++){var s=e[o][0];var l=e[o][1];i.push([s,l]);r+=l*n-s*a;n=s;a=l}var c=r<0;if(c!==t)i.reverse();i.push([i[0][0],i[0][1]]);return i}var u=[];function f(e){var t=[c(e.region,false)];u.push(t);for(var r=0;r<e.children.length;r++)t.push(d(e.children[r]))}function d(e){for(var t=0;t<e.children.length;t++)f(e.children[t]);return c(e.region,true)}for(var a=0;a<n.children.length;a++)f(n.children[a]);if(u.length<=0)return{type:"Polygon",coordinates:[]};if(u.length==1)return{type:"Polygon",coordinates:u[0]};return{type:"MultiPolygon",coordinates:u}}};t.exports=n},{}],77:[function(e,t,r){var w=e("./linked-list");function n(m,_,y){function i(e,t){return{id:y?y.segmentId():-1,start:e,end:t,myFill:{above:null,below:null},otherFill:null}}function a(e,t,r){return{id:y?y.segmentId():-1,start:e,end:t,myFill:{above:r.myFill.above,below:r.myFill.below},otherFill:null}}var b=w.create();function o(e,t,r,n,a,i){var o=_.pointsCompare(t,a);if(o!==0)return o;if(_.pointsSame(r,i))return 0;if(e!==n)return e?1:-1;return _.pointAboveOrOnLine(r,n?a:i,n?i:a)?1:-1}function s(r,n){b.insertBefore(r,function(e){var t=o(r.isStart,r.pt,n,e.isStart,e.pt,e.other.pt);return t<0})}function n(e,t){var r=w.node({isStart:true,pt:e.start,seg:e,primary:t,other:null,status:null});s(r,e.end);return r}function l(e,t,r){var n=w.node({isStart:false,pt:t.end,seg:t,primary:r,other:e,status:null});e.other=n;s(n,e.pt)}function c(e,t){var r=n(e,t);l(r,e,t);return r}function u(e,t){if(y)y.segmentChop(e.seg,t);e.other.remove();e.seg.end=t;e.other.pt=t;s(e.other,e.pt)}function x(e,t){var r=a(t,e.seg.end,e.seg);u(e,t);return c(r,e.primary)}function f(e,t){var n=w.create();function a(e,t){var r=e.seg.start;var n=e.seg.end;var a=t.seg.start;var i=t.seg.end;if(_.pointsCollinear(r,a,i)){if(_.pointsCollinear(n,a,i))return 1;return _.pointAboveOrOnLine(n,a,i)?1:-1}return _.pointAboveOrOnLine(r,a,i)?1:-1}function r(r){return n.findTransition(function(e){var t=a(r,e.ev);return t>0})}function i(e,t){var r=e.seg;var n=t.seg;var a=r.start;var i=r.end;var o=n.start;var s=n.end;if(y)y.checkIntersection(r,n);var l=_.linesIntersect(a,i,o,s);if(l===false){if(!_.pointsCollinear(a,i,o))return false;if(_.pointsSame(a,s)||_.pointsSame(i,o))return false;var c=_.pointsSame(a,o);var u=_.pointsSame(i,s);if(c&&u)return t;var f=!c&&_.pointBetween(a,o,s);var d=!u&&_.pointBetween(i,o,s);if(c){if(d){x(t,i)}else{x(e,s)}return t}else if(f){if(!u){if(d){x(t,i)}else{x(e,s)}}x(t,a)}}else{if(l.alongA===0){if(l.alongB===-1)x(e,o);else if(l.alongB===0)x(e,l.pt);else if(l.alongB===1)x(e,s)}if(l.alongB===0){if(l.alongA===-1)x(t,a);else if(l.alongA===0)x(t,l.pt);else if(l.alongA===1)x(t,i)}}return false}var o=[];while(!b.isEmpty()){var s=b.getHead();if(y)y.vert(s.pt[0]);if(s.isStart){if(y)y.segmentNew(s.seg,s.primary);var l=r(s);var c=l.before?l.before.ev:null;var u=l.after?l.after.ev:null;if(y){y.tempStatus(s.seg,c?c.seg:false,u?u.seg:false)}function f(){if(c){var e=i(s,c);if(e)return e}if(u)return i(s,u);return false}var d=f();if(d){if(m){var h;if(s.seg.myFill.below===null)h=true;else h=s.seg.myFill.above!==s.seg.myFill.below;if(h)d.seg.myFill.above=!d.seg.myFill.above}else{d.seg.otherFill=s.seg.myFill}if(y)y.segmentUpdate(d.seg);s.other.remove();s.remove()}if(b.getHead()!==s){if(y)y.rewind(s.seg);continue}if(m){var h;if(s.seg.myFill.below===null)h=true;else h=s.seg.myFill.above!==s.seg.myFill.below;if(!u){s.seg.myFill.below=e}else{s.seg.myFill.below=u.seg.myFill.above}if(h)s.seg.myFill.above=!s.seg.myFill.below;else s.seg.myFill.above=s.seg.myFill.below}else{if(s.seg.otherFill===null){var p;if(!u){p=s.primary?t:e}else{if(s.primary===u.primary)p=u.seg.otherFill.above;else p=u.seg.myFill.above}s.seg.otherFill={above:p,below:p}}}if(y){y.status(s.seg,c?c.seg:false,u?u.seg:false)}s.other.status=l.insert(w.node({ev:s}))}else{var v=s.status;if(v===null){throw new Error("PolyBool: Zero-length segment detected; your epsilon is "+"probably too small or too large")}if(n.exists(v.prev)&&n.exists(v.next))i(v.prev.ev,v.next.ev);if(y)y.statusRemove(v.ev.seg);v.remove();if(!s.primary){var g=s.seg.myFill;s.seg.myFill=s.seg.otherFill;s.seg.otherFill=g}o.push(s.seg)}b.getHead().remove()}if(y)y.done();return o}if(!m){return{calculate:function(e,t,r,n){e.forEach(function(e){c(a(e.start,e.end,e),true)});r.forEach(function(e){c(a(e.start,e.end,e),false)});return f(t,n)}}}return{addRegion:function(e){var t;var r=e[e.length-1];for(var n=0;n<e.length;n++){t=r;r=e[n];var a=_.pointsCompare(t,r);if(a===0)continue;c(i(a<0?t:r,a<0?r:t),true)}},calculate:function(e){return f(e,false)}}}t.exports=n},{"./linked-list":78}],78:[function(e,t,r){var n={create:function(){var a={root:{root:true,next:null},exists:function(e){if(e===null||e===a.root)return false;return true},isEmpty:function(){return a.root.next===null},getHead:function(){return a.root.next},insertBefore:function(e,t){var r=a.root;var n=a.root.next;while(n!==null){if(t(n)){e.prev=n.prev;e.next=n;n.prev.next=e;n.prev=e;return}r=n;n=n.next}r.next=e;e.prev=r;e.next=null},findTransition:function(e){var t=a.root;var r=a.root.next;while(r!==null){if(e(r))break;t=r;r=r.next}return{before:t===a.root?null:t,after:r,insert:function(e){e.prev=t;e.next=r;t.next=e;if(r!==null)r.prev=e;return e}}}};return a},node:function(e){e.prev=null;e.next=null;e.remove=function(){e.prev.next=e.next;if(e.next)e.next.prev=e.prev;e.prev=null;e.next=null};return e}};t.exports=n},{}],79:[function(e,t,r){function n(e,k,M){var S=[];var C=[];e.forEach(function(e){var t=e.start;var r=e.end;if(k.pointsSame(t,r)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is "+"probably too small or too large");return}if(M)M.chainStart(e);var n={index:0,matches_head:false,matches_pt1:false};var a={index:0,matches_head:false,matches_pt1:false};var i=n;function o(e,t,r){i.index=e;i.matches_head=t;i.matches_pt1=r;if(i===n){i=a;return false}i=null;return true}for(var s=0;s<S.length;s++){var l=S[s];var c=l[0];var u=l[1];var f=l[l.length-1];var d=l[l.length-2];if(k.pointsSame(c,t)){if(o(s,true,true))break}else if(k.pointsSame(c,r)){if(o(s,true,false))break}else if(k.pointsSame(f,t)){if(o(s,false,true))break}else if(k.pointsSame(f,r)){if(o(s,false,false))break}}if(i===n){S.push([t,r]);if(M)M.chainNew(t,r);return}if(i===a){if(M)M.chainMatch(n.index);var h=n.index;var p=n.matches_pt1?r:t;var v=n.matches_head;var l=S[h];var g=v?l[0]:l[l.length-1];var m=v?l[1]:l[l.length-2];var _=v?l[l.length-1]:l[0];var y=v?l[l.length-2]:l[1];if(k.pointsCollinear(m,g,p)){if(v){if(M)M.chainRemoveHead(n.index,p);l.shift()}else{if(M)M.chainRemoveTail(n.index,p);l.pop()}g=m}if(k.pointsSame(_,p)){S.splice(h,1);if(k.pointsCollinear(y,_,g)){if(v){if(M)M.chainRemoveTail(n.index,g);l.pop()}else{if(M)M.chainRemoveHead(n.index,g);l.shift()}}if(M)M.chainClose(n.index);C.push(l);return}if(v){if(M)M.chainAddHead(n.index,p);l.unshift(p)}else{if(M)M.chainAddTail(n.index,p);l.push(p)}return}function b(e){if(M)M.chainReverse(e);S[e].reverse()}function x(e,t){var r=S[e];var n=S[t];var a=r[r.length-1];var i=r[r.length-2];var o=n[0];var s=n[1];if(k.pointsCollinear(i,a,o)){if(M)M.chainRemoveTail(e,a);r.pop();a=i}if(k.pointsCollinear(a,o,s)){if(M)M.chainRemoveHead(t,o);n.shift()}if(M)M.chainJoin(e,t);S[e]=r.concat(n);S.splice(t,1)}var w=n.index;var A=a.index;if(M)M.chainConnect(w,A);var T=S[w].length<S[A].length;if(n.matches_head){if(a.matches_head){if(T){b(w);x(w,A)}else{b(A);x(A,w)}}else{x(A,w)}}else{if(a.matches_head){x(w,A)}else{if(T){b(w);x(A,w)}else{b(A);x(w,A)}}}});return C}t.exports=n},{}],80:[function(e,t,r){function n(e,r,n){var a=[];e.forEach(function(e){var t=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);if(r[t]!==0){a.push({id:n?n.segmentId():-1,start:e.start,end:e.end,myFill:{above:r[t]===1,below:r[t]===2},otherFill:null})}});if(n)n.selected(a);return a}var a={union:function(e,t){return n(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return n(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return n(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return n(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return n(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}};t.exports=a},{}],81:[function(e,t,r){"use strict";var n=e("stream").Transform;var a=e("stream-parser");function i(){n.call(this,{readableObjectMode:true})}i.prototype=Object.create(n.prototype);i.prototype.constructor=i;a(i.prototype);r.ParserStream=i;r.sliceEq=function(e,t,r){for(var n=t,a=0;a<r.length;){if(e[n++]!==r[a++])return false}return true};r.str2arr=function(e,t){var r=[],n=0;if(t&&t==="hex"){while(n<e.length){r.push(parseInt(e.slice(n,n+2),16));n+=2}}else{for(;n<e.length;n++){r.push(e.charCodeAt(n)&255)}}return r};r.readUInt16LE=function(e,t){return e[t]|e[t+1]<<8};r.readUInt16BE=function(e,t){return e[t+1]|e[t]<<8};r.readUInt32LE=function(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]*16777216};r.readUInt32BE=function(e,t){return e[t+3]|e[t+2]<<8|e[t+1]<<16|e[t]*16777216};function o(e,t,r){Error.call(this);Error.captureStackTrace(this,this.constructor);this.name=this.constructor.name;this.message=e;if(t)this.code=t;if(r)this.statusCode=r}o.prototype=Object.create(Error.prototype);o.prototype.constructor=o;r.ProbeError=o},{stream:98,"stream-parser":114}],82:[function(e,t,r){"use strict";function m(e,t){var r=new Error(e);r.code=t;return r}function _(t){try{return decodeURIComponent(escape(t))}catch(e){return t}}function n(e,t,r){this.input=e.subarray(t,r);this.start=t;var n=String.fromCharCode.apply(null,this.input.subarray(0,4));if(n!=="II*\0"&&n!=="MM\0*"){throw m("invalid TIFF signature","EBADDATA")}this.big_endian=n[0]==="M"}n.prototype.each=function(e){this.aborted=false;var t=this.read_uint32(4);this.ifds_to_read=[{id:0,offset:t}];while(this.ifds_to_read.length>0&&!this.aborted){var r=this.ifds_to_read.shift();if(!r.offset)continue;this.scan_ifd(r.id,r.offset,e)}};n.prototype.read_uint16=function(e){var t=this.input;if(e+2>t.length)throw m("unexpected EOF","EBADDATA");return this.big_endian?t[e]*256+t[e+1]:t[e]+t[e+1]*256};n.prototype.read_uint32=function(e){var t=this.input;if(e+4>t.length)throw m("unexpected EOF","EBADDATA");return this.big_endian?t[e]*16777216+t[e+1]*65536+t[e+2]*256+t[e+3]:t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216};n.prototype.is_subifd_link=function(e,t){return e===0&&t===34665||e===0&&t===34853||e===34665&&t===40965};n.prototype.exif_format_length=function(e){switch(e){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}};n.prototype.exif_format_read=function(e,t){var r;switch(e){case 1:case 2:r=this.input[t];return r;case 6:r=this.input[t];return r|(r&128)*33554430;case 3:r=this.read_uint16(t);return r;case 8:r=this.read_uint16(t);return r|(r&32768)*131070;case 4:r=this.read_uint32(t);return r;case 9:r=this.read_uint32(t);return r|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}};n.prototype.scan_ifd=function(e,t,r){var n=this.read_uint16(t);t+=2;for(var a=0;a<n;a++){var i=this.read_uint16(t);var o=this.read_uint16(t+2);var s=this.read_uint32(t+4);var l=this.exif_format_length(o);var c=s*l;var u=c<=4?t+8:this.read_uint32(t+8);var f=false;if(u+c>this.input.length){throw m("unexpected EOF","EBADDATA")}var d=[];var h=u;for(var p=0;p<s;p++,h+=l){var v=this.exif_format_read(o,h);if(v===null){d=null;break}d.push(v)}if(Array.isArray(d)&&o===2){d=_(String.fromCharCode.apply(null,d));if(d&&d[d.length-1]==="\0")d=d.slice(0,-1)}if(this.is_subifd_link(e,i)){if(Array.isArray(d)&&Number.isInteger(d[0])&&d[0]>0){this.ifds_to_read.push({id:i,offset:d[0]});f=true}}var g={is_big_endian:this.big_endian,ifd:e,tag:i,format:o,count:s,entry_offset:t+this.start,data_length:c,data_offset:u+this.start,value:d,is_subifd_link:f};if(r(g)===false){this.aborted=true;return}t+=12}if(e===0){this.ifds_to_read.push({id:1,offset:this.read_uint32(t)})}};t.exports.ExifParser=n;t.exports.get_orientation=function(e){var t=0;try{new n(e,0,e.length).each(function(e){if(e.ifd===0&&e.tag===274&&Array.isArray(e.value)){t=e.value[0];return false}});return t}catch(e){return-1}}},{}],83:[function(e,t,r){"use strict";var p=e("./common").readUInt16BE;var a=e("./common").readUInt32BE;function c(e,t){if(e.length<4+t)return null;var r=a(e,t);if(e.length<r+t||r<8)return null;return{boxtype:String.fromCharCode.apply(null,e.slice(t+4,t+8)),data:e.slice(t+8,t+r),end:t+r}}t.exports.unbox=c;function i(e,t){var r=0;for(;;){var n=c(e,r);if(!n)break;switch(n.boxtype){case"ispe":t.sizes.push({width:a(n.data,4),height:a(n.data,8)});break;case"irot":t.transforms.push({type:"irot",value:n.data[0]&3});break;case"imir":t.transforms.push({type:"imir",value:n.data[0]&1});break}r=n.end}}function v(e,t,r){var n=0;for(var a=0;a<r;a++){n=n*256+(e[t+a]||0)}return n}function o(e,t){var r=e[4]>>4&15;var n=e[4]&15;var a=e[5]>>4&15;var i=p(e,6);var o=8;for(var s=0;s<i;s++){var l=p(e,o);o+=2;var c=p(e,o);o+=2;var u=v(e,o,a);o+=a;var f=p(e,o);o+=2;if(c===0&&f===1){var d=v(e,o,r);var h=v(e,o+r,n);t.item_loc[l]={length:h,offset:d+u}}o+=f*(r+n)}}function s(e,t){var r=p(e,4);var n=6;for(var a=0;a<r;a++){var i=c(e,n);if(!i)break;if(i.boxtype==="infe"){var o=p(i.data,4);var s="";for(var l=8;l<i.data.length&&i.data[l];l++){s+=String.fromCharCode(i.data[l])}t.item_inf[s]=o}n=i.end}}function l(e,t){var r=0;for(;;){var n=c(e,r);if(!n)break;if(n.boxtype==="ipco")i(n.data,t);r=n.end}}function u(e,t){var r=4;for(;;){var n=c(e,r);if(!n)break;if(n.boxtype==="iprp")l(n.data,t);if(n.boxtype==="iloc")o(n.data,t);if(n.boxtype==="iinf")s(n.data,t);r=n.end}}function f(e){var t=e.reduce(function(e,t){return e.width>t.width||e.width===t.width&&e.height>t.height?e:t});var r=e.reduce(function(e,t){return e.height>t.height||e.height===t.height&&e.width>t.width?e:t});var n;if(t.width>r.height||t.width===r.height&&t.height>r.width){n=t}else{n=r}return n}t.exports.readSizeFromMeta=function(e){var t={sizes:[],transforms:[],item_inf:{},item_loc:{}};u(e,t);if(!t.sizes.length)return;var r=f(t.sizes);var a=1;t.transforms.forEach(function(e){var t={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1};var r={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(e.type==="imir"){if(e.value===0){a=r[a]}else{a=r[a];a=t[a];a=t[a]}}if(e.type==="irot"){for(var n=0;n<e.value;n++){a=t[a]}}});var n=null;if(t.item_inf.Exif){n=t.item_loc[t.item_inf.Exif]}return{width:r.width,height:r.height,orientation:t.transforms.length?a:null,variants:t.sizes,exif_location:n}};t.exports.getMimeType=function(e){var t=String.fromCharCode.apply(null,e.slice(0,4));var r={};r[t]=true;for(var n=8;n<e.length;n+=4){r[String.fromCharCode.apply(null,e.slice(n,n+4))]=true}if(!r.mif1&&!r.msf1&&!r.miaf)return;if(t==="avif"||t==="avis"||t==="avio"){return{type:"avif",mime:"image/avif"}}if(t==="heic"||t==="heix"){return{type:"heic",mime:"image/heic"}}if(t==="hevc"||t==="hevx"){return{type:"heic",mime:"image/heic-sequence"}}if(r.avif||r.avis){return{type:"avif",mime:"image/avif"}}if(r.heic||r.heix||r.hevc||r.hevx||r.heis){if(r.msf1){return{type:"heif",mime:"image/heif-sequence"}}return{type:"heif",mime:"image/heif"}}return{type:"avif",mime:"image/avif"}}},{"./common":81}],84:[function(e,t,r){"use strict";var n=e("../common").str2arr;var f=e("../common").sliceEq;var d=e("../common").readUInt32BE;var h=e("../miaf_utils");var p=e("../exif_utils");var v=n("ftyp");t.exports=function(e){if(!f(e,4,v))return;var t=h.unbox(e,0);if(!t)return;var r=h.getMimeType(t.data);if(!r)return;var n,a=t.end;for(;;){var i=h.unbox(e,a);if(!i)break;a=i.end;if(i.boxtype==="mdat")return;if(i.boxtype==="meta"){n=i.data;break}}if(!n)return;var o=h.readSizeFromMeta(n);if(!o)return;var s={width:o.width,height:o.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(o.variants.length>1){s.variants=o.variants}if(o.orientation){s.orientation=o.orientation}if(o.exif_location&&o.exif_location.offset+o.exif_location.length<=e.length){var l=d(e,o.exif_location.offset);var c=e.slice(o.exif_location.offset+l+4,o.exif_location.offset+o.exif_location.length);var u=p.get_orientation(c);if(u>0)s.orientation=u}return s}},{"../common":81,"../exif_utils":82,"../miaf_utils":83}],85:[function(e,t,r){"use strict";var n=e("../common").str2arr;var a=e("../common").sliceEq;var i=e("../common").readUInt16LE;var o=n("BM");t.exports=function(e){if(e.length<26)return;if(!a(e,0,o))return;return{width:i(e,18),height:i(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":81}],86:[function(e,t,r){"use strict";var n=e("../common").str2arr;var a=e("../common").sliceEq;var i=e("../common").readUInt16LE;var o=n("GIF87a");var s=n("GIF89a");t.exports=function(e){if(e.length<10)return;if(!a(e,0,o)&&!a(e,0,s))return;return{width:i(e,6),height:i(e,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":81}],87:[function(e,t,r){"use strict";var u=e("../common").readUInt16LE;var f=0;var d=1;var h=16;t.exports=function(e){var t=u(e,0);var r=u(e,2);var n=u(e,4);if(t!==f||r!==d||!n){return}var a=[];var i={width:0,height:0};for(var o=0;o<n;o++){var s=e[6+h*o]||256;var l=e[6+h*o+1]||256;var c={width:s,height:l};a.push(c);if(s>i.width||l>i.height){i=c}}return{width:i.width,height:i.height,variants:a,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}},{"../common":81}],88:[function(e,t,r){"use strict";var o=e("../common").readUInt16BE;var n=e("../common").str2arr;var s=e("../common").sliceEq;var l=e("../exif_utils");var c=n("Exif\0\0");t.exports=function(e){if(e.length<2)return;if(e[0]!==255||e[1]!==216)return;var t=2;for(;;){if(e.length-t<2)return;if(e[t++]!==255)return;var r=e[t++];var n;while(r===255)r=e[t++];if(208<=r&&r<=217||r===1){n=0}else if(192<=r&&r<=254){if(e.length-t<2)return;n=o(e,t)-2;t+=2}else{return}if(r===217||r===218){return}var a;if(r===225&&n>=10&&s(e,t,c)){a=l.get_orientation(e.slice(t+6,t+n))}if(n>=5&&(192<=r&&r<=207)&&r!==196&&r!==200&&r!==204){if(e.length-t<n)return;var i={width:o(e,t+3),height:o(e,t+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};if(a>0){i.orientation=a}return i}t+=n}}},{"../common":81,"../exif_utils":82}],89:[function(e,t,r){"use strict";var n=e("../common").str2arr;var a=e("../common").sliceEq;var i=e("../common").readUInt32BE;var o=n("PNG\r\n\n");var s=n("IHDR");t.exports=function(e){if(e.length<24)return;if(!a(e,0,o))return;if(!a(e,12,s))return;return{width:i(e,16),height:i(e,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":81}],90:[function(e,t,r){"use strict";var n=e("../common").str2arr;var a=e("../common").sliceEq;var i=e("../common").readUInt32BE;var o=n("8BPS\0");t.exports=function(e){if(e.length<6+16)return;if(!a(e,0,o))return;return{width:i(e,6+12),height:i(e,6+8),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":81}],91:[function(e,t,r){"use strict";function n(e){return e===32||e===9||e===13||e===10}function d(e){return typeof e==="number"&&isFinite(e)&&e>0}function h(e){var t=0,r=e.length;if(e[0]===239&&e[1]===187&&e[2]===191)t=3;while(t<r&&n(e[t]))t++;if(t===r)return false;return e[t]===60}var p=/<[-_.:a-zA-Z0-9][^>]*>/;var v=/^<([-_.:a-zA-Z0-9]+:)?svg\s/;var a=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/;var i=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/;var o=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/;var s=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function g(e){var t=e.match(a);var r=e.match(i);var n=e.match(o);return{width:t&&(t[1]||t[2]),height:r&&(r[1]||r[2]),viewbox:n&&(n[1]||n[2])}}function m(e){if(!s.test(e))return"px";return e.match(s)[0]}t.exports=function(e){if(!h(e))return;var t="";for(var r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}var n=(t.match(p)||[""])[0];if(!v.test(n))return;var a=g(n);var i=parseFloat(a.width);var o=parseFloat(a.height);if(a.width&&a.height){if(!d(i)||!d(o))return;return{width:i,height:o,type:"svg",mime:"image/svg+xml",wUnits:m(a.width),hUnits:m(a.height)}}var s=(a.viewbox||"").split(" ");var l={width:s[2],height:s[3]};var c=parseFloat(l.width);var u=parseFloat(l.height);if(!d(c)||!d(u))return;if(m(l.width)!==m(l.height))return;var f=c/u;if(a.width){if(!d(i))return;return{width:i,height:i/f,type:"svg",mime:"image/svg+xml",wUnits:m(a.width),hUnits:m(a.width)}}if(a.height){if(!d(o))return;return{width:o*f,height:o,type:"svg",mime:"image/svg+xml",wUnits:m(a.height),hUnits:m(a.height)}}return{width:c,height:u,type:"svg",mime:"image/svg+xml",wUnits:m(l.width),hUnits:m(l.height)}}},{}],92:[function(e,t,r){"use strict";var n=e("../common").str2arr;var c=e("../common").sliceEq;var a=e("../common").readUInt16LE;var i=e("../common").readUInt16BE;var o=e("../common").readUInt32LE;var s=e("../common").readUInt32BE;var u=n("II*\0");var f=n("MM\0*");function d(e,t,r){return r?i(e,t):a(e,t)}function h(e,t,r){return r?s(e,t):o(e,t)}function p(e,t,r){var n=d(e,t+2,r);var a=h(e,t+4,r);if(a!==1||n!==3&&n!==4)return null;if(n===3){return d(e,t+8,r)}return h(e,t+8,r)}t.exports=function(e){if(e.length<8)return;if(!c(e,0,u)&&!c(e,0,f))return;var t=e[0]===77;var r=h(e,4,t)-8;if(r<0)return;var n=r+8;if(e.length-n<2)return;var a=d(e,n+0,t)*12;if(a<=0)return;n+=2;if(e.length-n<a)return;var i,o,s,l;for(i=0;i<a;i+=12){l=d(e,n+i,t);if(l===256){o=p(e,n+i,t)}else if(l===257){s=p(e,n+i,t)}}if(o&&s){return{width:o,height:s,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}},{"../common":81}],93:[function(e,t,r){"use strict";var n=e("../common").str2arr;var s=e("../common").sliceEq;var a=e("../common").readUInt16LE;var l=e("../common").readUInt32LE;var c=e("../exif_utils");var u=n("RIFF");var f=n("WEBP");function d(e,t){if(e[t+3]!==157||e[t+4]!==1||e[t+5]!==42){return}return{width:a(e,t+6)&16383,height:a(e,t+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function h(e,t){if(e[t]!==47)return;var r=l(e,t+1);return{width:(r&16383)+1,height:(r>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function p(e,t){return{width:(e[t+6]<<16|e[t+5]<<8|e[t+4])+1,height:(e[t+9]<<t|e[t+8]<<8|e[t+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}t.exports=function(e){if(e.length<16)return;if(!s(e,0,u)&&!s(e,8,f))return;var t=12;var r=null;var n=0;var a=l(e,4)+8;if(a>e.length)return;while(t+8<a){if(e[t]===0){t++;continue}var i=String.fromCharCode.apply(null,e.slice(t,t+4));var o=l(e,t+4);if(i==="VP8 "&&o>=10){r=r||d(e,t+8)}else if(i==="VP8L"&&o>=9){r=r||h(e,t+8)}else if(i==="VP8X"&&o>=10){r=r||p(e,t+8)}else if(i==="EXIF"){n=c.get_orientation(e.slice(t+8,t+8+o));t=Infinity}t+=8+o}if(!r)return;if(n>0){r.orientation=n}return r}},{"../common":81,"../exif_utils":82}],94:[function(e,t,r){"use strict";t.exports={avif:e("./parse_sync/avif"),bmp:e("./parse_sync/bmp"),gif:e("./parse_sync/gif"),ico:e("./parse_sync/ico"),jpeg:e("./parse_sync/jpeg"),png:e("./parse_sync/png"),psd:e("./parse_sync/psd"),svg:e("./parse_sync/svg"),tiff:e("./parse_sync/tiff"),webp:e("./parse_sync/webp")}},{"./parse_sync/avif":84,"./parse_sync/bmp":85,"./parse_sync/gif":86,"./parse_sync/ico":87,"./parse_sync/jpeg":88,"./parse_sync/png":89,"./parse_sync/psd":90,"./parse_sync/svg":91,"./parse_sync/tiff":92,"./parse_sync/webp":93}],95:[function(e,t,r){"use strict";var a=e("./lib/parsers_sync");function n(e){var t=Object.keys(a);for(var r=0;r<t.length;r++){var n=a[t[r]](e);if(n)return n}return null}t.exports=function e(t){return n(t)};t.exports.parsers=a},{"./lib/parsers_sync":94}],96:[function(e,t,r){var n=t.exports={};var a;var i;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){a=setTimeout}else{a=o}}catch(e){a=o}try{if(typeof clearTimeout==="function"){i=clearTimeout}else{i=s}}catch(e){i=s}})();function l(t){if(a===setTimeout){return setTimeout(t,0)}if((a===o||!a)&&setTimeout){a=setTimeout;return setTimeout(t,0)}try{return a(t,0)}catch(e){try{return a.call(null,t,0)}catch(e){return a.call(this,t,0)}}}function c(t){if(i===clearTimeout){return clearTimeout(t)}if((i===s||!i)&&clearTimeout){i=clearTimeout;return clearTimeout(t)}try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}var u=[];var f=false;var d;var h=-1;function p(){if(!f||!d){return}f=false;if(d.length){u=d.concat(u)}else{h=-1}if(u.length){v()}}function v(){if(f){return}var e=l(p);f=true;var t=u.length;while(t){d=u;u=[];while(++h<t){if(d){d[h].run()}}h=-1;t=u.length}d=null;f=false;c(e)}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}u.push(new g(e,t));if(u.length===1&&!f){l(v)}};function g(e,t){this.fun=e;this.array=t}g.prototype.run=function(){this.fun.apply(null,this.array)};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function m(){}n.on=m;n.addListener=m;n.once=m;n.off=m;n.removeListener=m;n.removeAllListeners=m;n.emit=m;n.prependListener=m;n.prependOnceListener=m;n.listeners=function(e){return[]};n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},{}],97:[function(e,t,r){var n=e("buffer");var a=n.Buffer;function i(e,t){for(var r in e){t[r]=e[r]}}if(a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow){t.exports=n}else{i(n,r);r.Buffer=o}function o(e,t,r){return a(e,t,r)}o.prototype=Object.create(a.prototype);i(a,o);o.from=function(e,t,r){if(typeof e==="number"){throw new TypeError("Argument must not be a number")}return a(e,t,r)};o.alloc=function(e,t,r){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}var n=a(e);if(t!==undefined){if(typeof r==="string"){n.fill(t,r)}else{n.fill(t)}}else{n.fill(0)}return n};o.allocUnsafe=function(e){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}return a(e)};o.allocUnsafeSlow=function(e){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}return n.SlowBuffer(e)}},{buffer:28}],98:[function(e,t,r){t.exports=a;var u=e("events").EventEmitter;var n=e("inherits");n(a,u);a.Readable=e("readable-stream/lib/_stream_readable.js");a.Writable=e("readable-stream/lib/_stream_writable.js");a.Duplex=e("readable-stream/lib/_stream_duplex.js");a.Transform=e("readable-stream/lib/_stream_transform.js");a.PassThrough=e("readable-stream/lib/_stream_passthrough.js");a.finished=e("readable-stream/lib/internal/streams/end-of-stream.js");a.pipeline=e("readable-stream/lib/internal/streams/pipeline.js");a.Stream=a;function a(){u.call(this)}a.prototype.pipe=function(t,e){var r=this;function n(e){if(t.writable){if(false===t.write(e)&&r.pause){r.pause()}}}r.on("data",n);function a(){if(r.readable&&r.resume){r.resume()}}t.on("drain",a);if(!t._isStdio&&(!e||e.end!==false)){r.on("end",o);r.on("close",s)}var i=false;function o(){if(i)return;i=true;t.end()}function s(){if(i)return;i=true;if(typeof t.destroy==="function")t.destroy()}function l(e){c();if(u.listenerCount(this,"error")===0){throw e}}r.on("error",l);t.on("error",l);function c(){r.removeListener("data",n);t.removeListener("drain",a);r.removeListener("end",o);r.removeListener("close",s);r.removeListener("error",l);t.removeListener("error",l);r.removeListener("end",c);r.removeListener("close",c);t.removeListener("close",c)}r.on("end",c);r.on("close",c);t.on("close",c);t.emit("pipe",r);return t}},{events:27,inherits:65,"readable-stream/lib/_stream_duplex.js":100,"readable-stream/lib/_stream_passthrough.js":101,"readable-stream/lib/_stream_readable.js":102,"readable-stream/lib/_stream_transform.js":103,"readable-stream/lib/_stream_writable.js":104,"readable-stream/lib/internal/streams/end-of-stream.js":108,"readable-stream/lib/internal/streams/pipeline.js":110}],99:[function(e,t,r){"use strict";function i(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var o={};function n(e,n,t){if(!t){t=Error}function a(e,t,r){if(typeof n==="string"){return n}else{return n(e,t,r)}}var r=function(n){i(e,n);function e(e,t,r){return n.call(this,a(e,t,r))||this}return e}(t);r.prototype.name=t.name;r.prototype.code=e;o[e]=r}function s(e,t){if(Array.isArray(e)){var r=e.length;e=e.map(function(e){return String(e)});if(r>2){return"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]}else if(r===2){return"one of ".concat(t," ").concat(e[0]," or ").concat(e[1])}else{return"of ".concat(t," ").concat(e[0])}}else{return"of ".concat(t," ").concat(String(e))}}function l(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function c(e,t,r){if(r===undefined||r>e.length){r=e.length}return e.substring(r-t.length,r)===t}function u(e,t,r){if(typeof r!=="number"){r=0}if(r+t.length>e.length){return false}else{return e.indexOf(t,r)!==-1}}n("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);n("ERR_INVALID_ARG_TYPE",function(e,t,r){var n;if(typeof t==="string"&&l(t,"not ")){n="must not be";t=t.replace(/^not /,"")}else{n="must be"}var a;if(c(e," argument")){a="The ".concat(e," ").concat(n," ").concat(s(t,"type"))}else{var i=u(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(i," ").concat(n," ").concat(s(t,"type"))}a+=". Received type ".concat(typeof r);return a},TypeError);n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");n("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});n("ERR_STREAM_PREMATURE_CLOSE","Premature close");n("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});n("ERR_MULTIPLE_CALLBACK","Callback called multiple times");n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");n("ERR_STREAM_WRITE_AFTER_END","write after end");n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);n("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");t.exports.codes=o},{}],100:[function(u,f,e){(function(c){(function(){"use strict";var e=Object.keys||function(e){var t=[];for(var r in e){t.push(r)}return t};f.exports=o;var t=u("./_stream_readable");var r=u("./_stream_writable");u("inherits")(o,t);{var n=e(r.prototype);for(var a=0;a<n.length;a++){var i=n[a];if(!o.prototype[i])o.prototype[i]=r.prototype[i]}}function o(e){if(!(this instanceof o))return new o(e);t.call(this,e);r.call(this,e);this.allowHalfOpen=true;if(e){if(e.readable===false)this.readable=false;if(e.writable===false)this.writable=false;if(e.allowHalfOpen===false){this.allowHalfOpen=false;this.once("end",s)}}}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:false,get:function e(){return this._writableState.highWaterMark}});Object.defineProperty(o.prototype,"writableBuffer",{enumerable:false,get:function e(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(o.prototype,"writableLength",{enumerable:false,get:function e(){return this._writableState.length}});function s(){if(this._writableState.ended)return;c.nextTick(l,this)}function l(e){e.end()}Object.defineProperty(o.prototype,"destroyed",{enumerable:false,get:function e(){if(this._readableState===undefined||this._writableState===undefined){return false}return this._readableState.destroyed&&this._writableState.destroyed},set:function e(t){if(this._readableState===undefined||this._writableState===undefined){return}this._readableState.destroyed=t;this._writableState.destroyed=t}})}).call(this)}).call(this,u("_process"))},{"./_stream_readable":102,"./_stream_writable":104,_process:96,inherits:65}],101:[function(e,t,r){"use strict";t.exports=a;var n=e("./_stream_transform");e("inherits")(a,n);function a(e){if(!(this instanceof a))return new a(e);n.call(this,e)}a.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":103,inherits:65}],102:[function(J,$,e){(function(X,Z){(function(){"use strict";$.exports=M;var n;M.ReadableState=k;var e=J("events").EventEmitter;var g=function e(t,r){return t.listeners(r).length};var a=J("./internal/streams/stream");var s=J("buffer").Buffer;var t=Z.Uint8Array||function(){};function l(e){return s.from(e)}function i(e){return s.isBuffer(e)||e instanceof t}var r=J("util");var m;if(r&&r.debuglog){m=r.debuglog("stream")}else{m=function e(){}}var o=J("./internal/streams/buffer_list");var c=J("./internal/streams/destroy");var u=J("./internal/streams/state"),f=u.getHighWaterMark;var d=J("../errors").codes,h=d.ERR_INVALID_ARG_TYPE,p=d.ERR_STREAM_PUSH_AFTER_EOF,v=d.ERR_METHOD_NOT_IMPLEMENTED,_=d.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;var y;var b;var x;J("inherits")(M,a);var w=c.errorOrDestroy;var A=["error","close","destroy","pause","resume"];function T(e,t,r){if(typeof e.prependListener==="function")return e.prependListener(t,r);if(!e._events||!e._events[t])e.on(t,r);else if(Array.isArray(e._events[t]))e._events[t].unshift(r);else e._events[t]=[r,e._events[t]]}function k(e,t,r){n=n||J("./_stream_duplex");e=e||{};if(typeof r!=="boolean")r=t instanceof n;this.objectMode=!!e.objectMode;if(r)this.objectMode=this.objectMode||!!e.readableObjectMode;this.highWaterMark=f(this,e,"readableHighWaterMark",r);this.buffer=new o;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.paused=true;this.emitClose=e.emitClose!==false;this.autoDestroy=!!e.autoDestroy;this.destroyed=false;this.defaultEncoding=e.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(e.encoding){if(!y)y=J("string_decoder/").StringDecoder;this.decoder=new y(e.encoding);this.encoding=e.encoding}}function M(e){n=n||J("./_stream_duplex");if(!(this instanceof M))return new M(e);var t=this instanceof n;this._readableState=new k(e,this,t);this.readable=true;if(e){if(typeof e.read==="function")this._read=e.read;if(typeof e.destroy==="function")this._destroy=e.destroy}a.call(this)}Object.defineProperty(M.prototype,"destroyed",{enumerable:false,get:function e(){if(this._readableState===undefined){return false}return this._readableState.destroyed},set:function e(t){if(!this._readableState){return}this._readableState.destroyed=t}});M.prototype.destroy=c.destroy;M.prototype._undestroy=c.undestroy;M.prototype._destroy=function(e,t){t(e)};M.prototype.push=function(e,t){var r=this._readableState;var n;if(!r.objectMode){if(typeof e==="string"){t=t||r.defaultEncoding;if(t!==r.encoding){e=s.from(e,t);t=""}n=true}}else{n=true}return S(this,e,t,false,n)};M.prototype.unshift=function(e){return S(this,e,null,true,false)};function S(e,t,r,n,a){m("readableAddChunk",t);var i=e._readableState;if(t===null){i.reading=false;P(e,i)}else{var o;if(!a)o=L(i,t);if(o){w(e,o)}else if(i.objectMode||t&&t.length>0){if(typeof t!=="string"&&!i.objectMode&&Object.getPrototypeOf(t)!==s.prototype){t=l(t)}if(n){if(i.endEmitted)w(e,new _);else C(e,i,t,true)}else if(i.ended){w(e,new p)}else if(i.destroyed){return false}else{i.reading=false;if(i.decoder&&!r){t=i.decoder.write(t);if(i.objectMode||t.length!==0)C(e,i,t,false);else z(e,i)}else{C(e,i,t,false)}}}else if(!n){i.reading=false;z(e,i)}}return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function C(e,t,r,n){if(t.flowing&&t.length===0&&!t.sync){t.awaitDrain=0;e.emit("data",r)}else{t.length+=t.objectMode?1:r.length;if(n)t.buffer.unshift(r);else t.buffer.push(r);if(t.needReadable)I(e)}z(e,t)}function L(e,t){var r;if(!i(t)&&typeof t!=="string"&&t!==undefined&&!e.objectMode){r=new h("chunk",["string","Buffer","Uint8Array"],t)}return r}M.prototype.isPaused=function(){return this._readableState.flowing===false};M.prototype.setEncoding=function(e){if(!y)y=J("string_decoder/").StringDecoder;var t=new y(e);this._readableState.decoder=t;this._readableState.encoding=this._readableState.decoder.encoding;var r=this._readableState.buffer.head;var n="";while(r!==null){n+=t.write(r.data);r=r.next}this._readableState.buffer.clear();if(n!=="")this._readableState.buffer.push(n);this._readableState.length=n.length;return this};var E=1073741824;function D(e){if(e>=E){e=E}else{e--;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;e++}return e}function O(e,t){if(e<=0||t.length===0&&t.ended)return 0;if(t.objectMode)return 1;if(e!==e){if(t.flowing&&t.length)return t.buffer.head.data.length;else return t.length}if(e>t.highWaterMark)t.highWaterMark=D(e);if(e<=t.length)return e;if(!t.ended){t.needReadable=true;return 0}return t.length}M.prototype.read=function(e){m("read",e);e=parseInt(e,10);var t=this._readableState;var r=e;if(e!==0)t.emittedReadable=false;if(e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended)){m("read: emitReadable",t.length,t.ended);if(t.length===0&&t.ended)Y(this);else I(this);return null}e=O(e,t);if(e===0&&t.ended){if(t.length===0)Y(this);return null}var n=t.needReadable;m("need readable",n);if(t.length===0||t.length-e<t.highWaterMark){n=true;m("length less than watermark",n)}if(t.ended||t.reading){n=false;m("reading or ended",n)}else if(n){m("do read");t.reading=true;t.sync=true;if(t.length===0)t.needReadable=true;this._read(t.highWaterMark);t.sync=false;if(!t.reading)e=O(r,t)}var a;if(e>0)a=q(e,t);else a=null;if(a===null){t.needReadable=t.length<=t.highWaterMark;e=0}else{t.length-=e;t.awaitDrain=0}if(t.length===0){if(!t.ended)t.needReadable=true;if(r!==e&&t.ended)Y(this)}if(a!==null)this.emit("data",a);return a};function P(e,t){m("onEofChunk");if(t.ended)return;if(t.decoder){var r=t.decoder.end();if(r&&r.length){t.buffer.push(r);t.length+=t.objectMode?1:r.length}}t.ended=true;if(t.sync){I(e)}else{t.needReadable=false;if(!t.emittedReadable){t.emittedReadable=true;R(e)}}}function I(e){var t=e._readableState;m("emitReadable",t.needReadable,t.emittedReadable);t.needReadable=false;if(!t.emittedReadable){m("emitReadable",t.flowing);t.emittedReadable=true;X.nextTick(R,e)}}function R(e){var t=e._readableState;m("emitReadable_",t.destroyed,t.length,t.ended);if(!t.destroyed&&(t.length||t.ended)){e.emit("readable");t.emittedReadable=false}t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark;V(e)}function z(e,t){if(!t.readingMore){t.readingMore=true;X.nextTick(N,e,t)}}function N(e,t){while(!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0)){var r=t.length;m("maybeReadMore read 0");e.read(0);if(r===t.length)break}t.readingMore=false}M.prototype._read=function(e){w(this,new v("_read()"))};M.prototype.pipe=function(r,e){var n=this;var a=this._readableState;switch(a.pipesCount){case 0:a.pipes=r;break;case 1:a.pipes=[a.pipes,r];break;default:a.pipes.push(r);break}a.pipesCount+=1;m("pipe count=%d opts=%j",a.pipesCount,e);var t=(!e||e.end!==false)&&r!==X.stdout&&r!==X.stderr;var i=t?s:v;if(a.endEmitted)X.nextTick(i);else n.once("end",i);r.on("unpipe",o);function o(e,t){m("onunpipe");if(e===n){if(t&&t.hasUnpiped===false){t.hasUnpiped=true;u()}}}function s(){m("onend");r.end()}var l=F(n);r.on("drain",l);var c=false;function u(){m("cleanup");r.removeListener("close",h);r.removeListener("finish",p);r.removeListener("drain",l);r.removeListener("error",d);r.removeListener("unpipe",o);n.removeListener("end",s);n.removeListener("end",v);n.removeListener("data",f);c=true;if(a.awaitDrain&&(!r._writableState||r._writableState.needDrain))l()}n.on("data",f);function f(e){m("ondata");var t=r.write(e);m("dest.write",t);if(t===false){if((a.pipesCount===1&&a.pipes===r||a.pipesCount>1&&W(a.pipes,r)!==-1)&&!c){m("false write response, pause",a.awaitDrain);a.awaitDrain++}n.pause()}}function d(e){m("onerror",e);v();r.removeListener("error",d);if(g(r,"error")===0)w(r,e)}T(r,"error",d);function h(){r.removeListener("finish",p);v()}r.once("close",h);function p(){m("onfinish");r.removeListener("close",h);v()}r.once("finish",p);function v(){m("unpipe");n.unpipe(r)}r.emit("pipe",n);if(!a.flowing){m("pipe resume");n.resume()}return r};function F(r){return function e(){var t=r._readableState;m("pipeOnDrain",t.awaitDrain);if(t.awaitDrain)t.awaitDrain--;if(t.awaitDrain===0&&g(r,"data")){t.flowing=true;V(r)}}}M.prototype.unpipe=function(e){var t=this._readableState;var r={hasUnpiped:false};if(t.pipesCount===0)return this;if(t.pipesCount===1){if(e&&e!==t.pipes)return this;if(!e)e=t.pipes;t.pipes=null;t.pipesCount=0;t.flowing=false;if(e)e.emit("unpipe",this,r);return this}if(!e){var n=t.pipes;var a=t.pipesCount;t.pipes=null;t.pipesCount=0;t.flowing=false;for(var i=0;i<a;i++){n[i].emit("unpipe",this,{hasUnpiped:false})}return this}var o=W(t.pipes,e);if(o===-1)return this;t.pipes.splice(o,1);t.pipesCount-=1;if(t.pipesCount===1)t.pipes=t.pipes[0];e.emit("unpipe",this,r);return this};M.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t);var n=this._readableState;if(e==="data"){n.readableListening=this.listenerCount("readable")>0;if(n.flowing!==false)this.resume()}else if(e==="readable"){if(!n.endEmitted&&!n.readableListening){n.readableListening=n.needReadable=true;n.flowing=false;n.emittedReadable=false;m("on readable",n.length,n.reading);if(n.length){I(this)}else if(!n.reading){X.nextTick(B,this)}}}return r};M.prototype.addListener=M.prototype.on;M.prototype.removeListener=function(e,t){var r=a.prototype.removeListener.call(this,e,t);if(e==="readable"){X.nextTick(j,this)}return r};M.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);if(e==="readable"||e===undefined){X.nextTick(j,this)}return t};function j(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0;if(t.resumeScheduled&&!t.paused){t.flowing=true}else if(e.listenerCount("data")>0){e.resume()}}function B(e){m("readable nexttick read 0");e.read(0)}M.prototype.resume=function(){var e=this._readableState;if(!e.flowing){m("resume");e.flowing=!e.readableListening;H(this,e)}e.paused=false;return this};function H(e,t){if(!t.resumeScheduled){t.resumeScheduled=true;X.nextTick(U,e,t)}}function U(e,t){m("resume",t.reading);if(!t.reading){e.read(0)}t.resumeScheduled=false;e.emit("resume");V(e);if(t.flowing&&!t.reading)e.read(0)}M.prototype.pause=function(){m("call pause flowing=%j",this._readableState.flowing);if(this._readableState.flowing!==false){m("pause");this._readableState.flowing=false;this.emit("pause")}this._readableState.paused=true;return this};function V(e){var t=e._readableState;m("flow",t.flowing);while(t.flowing&&e.read()!==null){}}M.prototype.wrap=function(r){var n=this;var a=this._readableState;var i=false;r.on("end",function(){m("wrapped end");if(a.decoder&&!a.ended){var e=a.decoder.end();if(e&&e.length)n.push(e)}n.push(null)});r.on("data",function(e){m("wrapped data");if(a.decoder)e=a.decoder.write(e);if(a.objectMode&&(e===null||e===undefined))return;else if(!a.objectMode&&(!e||!e.length))return;var t=n.push(e);if(!t){i=true;r.pause()}});for(var e in r){if(this[e]===undefined&&typeof r[e]==="function"){this[e]=function e(t){return function e(){return r[t].apply(r,arguments)}}(e)}}for(var t=0;t<A.length;t++){r.on(A[t],this.emit.bind(this,A[t]))}this._read=function(e){m("wrapped _read",e);if(i){i=false;r.resume()}};return this};if(typeof Symbol==="function"){M.prototype[Symbol.asyncIterator]=function(){if(b===undefined){b=J("./internal/streams/async_iterator")}return b(this)}}Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:false,get:function e(){return this._readableState.highWaterMark}});Object.defineProperty(M.prototype,"readableBuffer",{enumerable:false,get:function e(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(M.prototype,"readableFlowing",{enumerable:false,get:function e(){return this._readableState.flowing},set:function e(t){if(this._readableState){this._readableState.flowing=t}}});M._fromList=q;Object.defineProperty(M.prototype,"readableLength",{enumerable:false,get:function e(){return this._readableState.length}});function q(e,t){if(t.length===0)return null;var r;if(t.objectMode)r=t.buffer.shift();else if(!e||e>=t.length){if(t.decoder)r=t.buffer.join("");else if(t.buffer.length===1)r=t.buffer.first();else r=t.buffer.concat(t.length);t.buffer.clear()}else{r=t.buffer.consume(e,t.decoder)}return r}function Y(e){var t=e._readableState;m("endReadable",t.endEmitted);if(!t.endEmitted){t.ended=true;X.nextTick(G,t,e)}}function G(e,t){m("endReadableNT",e.endEmitted,e.length);if(!e.endEmitted&&e.length===0){e.endEmitted=true;t.readable=false;t.emit("end");if(e.autoDestroy){var r=t._writableState;if(!r||r.autoDestroy&&r.finished){t.destroy()}}}}if(typeof Symbol==="function"){M.from=function(e,t){if(x===undefined){x=J("./internal/streams/from")}return x(M,e,t)}}function W(e,t){for(var r=0,n=e.length;r<n;r++){if(e[r]===t)return r}return-1}}).call(this)}).call(this,J("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../errors":99,"./_stream_duplex":100,"./internal/streams/async_iterator":105,"./internal/streams/buffer_list":106,"./internal/streams/destroy":107,"./internal/streams/from":109,"./internal/streams/state":111,"./internal/streams/stream":112,_process:96,buffer:28,events:27,inherits:65,"string_decoder/":113,util:26}],103:[function(e,t,r){"use strict";t.exports=u;var n=e("../errors").codes,a=n.ERR_METHOD_NOT_IMPLEMENTED,i=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0;var l=e("./_stream_duplex");e("inherits")(u,l);function c(e,t){var r=this._transformState;r.transforming=false;var n=r.writecb;if(n===null){return this.emit("error",new i)}r.writechunk=null;r.writecb=null;if(t!=null)this.push(t);n(e);var a=this._readableState;a.reading=false;if(a.needReadable||a.length<a.highWaterMark){this._read(a.highWaterMark)}}function u(e){if(!(this instanceof u))return new u(e);l.call(this,e);this._transformState={afterTransform:c.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(e){if(typeof e.transform==="function")this._transform=e.transform;if(typeof e.flush==="function")this._flush=e.flush}this.on("prefinish",f)}function f(){var r=this;if(typeof this._flush==="function"&&!this._readableState.destroyed){this._flush(function(e,t){d(r,e,t)})}else{d(this,null,null)}}u.prototype.push=function(e,t){this._transformState.needTransform=false;return l.prototype.push.call(this,e,t)};u.prototype._transform=function(e,t,r){r(new a("_transform()"))};u.prototype._write=function(e,t,r){var n=this._transformState;n.writecb=r;n.writechunk=e;n.writeencoding=t;if(!n.transforming){var a=this._readableState;if(n.needTransform||a.needReadable||a.length<a.highWaterMark)this._read(a.highWaterMark)}};u.prototype._read=function(e){var t=this._transformState;if(t.writechunk!==null&&!t.transforming){t.transforming=true;this._transform(t.writechunk,t.writeencoding,t.afterTransform)}else{t.needTransform=true}};u.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,function(e){t(e)})};function d(e,t,r){if(t)return e.emit("error",t);if(r!=null)e.push(r);if(e._writableState.length)throw new s;if(e._transformState.transforming)throw new o;return e.push(null)}},{"../errors":99,"./_stream_duplex":100,inherits:65}],104:[function(Y,G,e){(function(V,q){(function(){"use strict";G.exports=k;function e(e,t,r){this.chunk=e;this.encoding=t;this.callback=r;this.next=null}function d(e){var t=this;this.next=null;this.entry=null;this.finish=function(){U(t,e)}}var a;k.WritableState=A;var t={deprecate:Y("util-deprecate")};var r=Y("./internal/streams/stream");var o=Y("buffer").Buffer;var n=q.Uint8Array||function(){};function s(e){return o.from(e)}function l(e){return o.isBuffer(e)||e instanceof n}var i=Y("./internal/streams/destroy");var c=Y("./internal/streams/state"),u=c.getHighWaterMark;var f=Y("../errors").codes,h=f.ERR_INVALID_ARG_TYPE,p=f.ERR_METHOD_NOT_IMPLEMENTED,v=f.ERR_MULTIPLE_CALLBACK,g=f.ERR_STREAM_CANNOT_PIPE,m=f.ERR_STREAM_DESTROYED,_=f.ERR_STREAM_NULL_VALUES,y=f.ERR_STREAM_WRITE_AFTER_END,b=f.ERR_UNKNOWN_ENCODING;var x=i.errorOrDestroy;Y("inherits")(k,r);function w(){}function A(e,t,r){a=a||Y("./_stream_duplex");e=e||{};if(typeof r!=="boolean")r=t instanceof a;this.objectMode=!!e.objectMode;if(r)this.objectMode=this.objectMode||!!e.writableObjectMode;this.highWaterMark=u(this,e,"writableHighWaterMark",r);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var n=e.decodeStrings===false;this.decodeStrings=!n;this.defaultEncoding=e.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(e){P(t,e)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.emitClose=e.emitClose!==false;this.autoDestroy=!!e.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new d(this)}A.prototype.getBuffer=function e(){var t=this.bufferedRequest;var r=[];while(t){r.push(t);t=t.next}return r};(function(){try{Object.defineProperty(A.prototype,"buffer",{get:t.deprecate(function e(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}})();var T;if(typeof Symbol==="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==="function"){T=Function.prototype[Symbol.hasInstance];Object.defineProperty(k,Symbol.hasInstance,{value:function e(t){if(T.call(this,t))return true;if(this!==k)return false;return t&&t._writableState instanceof A}})}else{T=function e(t){return t instanceof this}}function k(e){a=a||Y("./_stream_duplex");var t=this instanceof a;if(!t&&!T.call(k,this))return new k(e);this._writableState=new A(e,this,t);this.writable=true;if(e){if(typeof e.write==="function")this._write=e.write;if(typeof e.writev==="function")this._writev=e.writev;if(typeof e.destroy==="function")this._destroy=e.destroy;if(typeof e.final==="function")this._final=e.final}r.call(this)}k.prototype.pipe=function(){x(this,new g)};function M(e,t){var r=new y;x(e,r);V.nextTick(t,r)}function S(e,t,r,n){var a;if(r===null){a=new _}else if(typeof r!=="string"&&!t.objectMode){a=new h("chunk",["string","Buffer"],r)}if(a){x(e,a);V.nextTick(n,a);return false}return true}k.prototype.write=function(e,t,r){var n=this._writableState;var a=false;var i=!n.objectMode&&l(e);if(i&&!o.isBuffer(e)){e=s(e)}if(typeof t==="function"){r=t;t=null}if(i)t="buffer";else if(!t)t=n.defaultEncoding;if(typeof r!=="function")r=w;if(n.ending)M(this,r);else if(i||S(this,n,e,r)){n.pendingcb++;a=L(this,n,i,e,t,r)}return a};k.prototype.cork=function(){this._writableState.corked++};k.prototype.uncork=function(){var e=this._writableState;if(e.corked){e.corked--;if(!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest)z(this,e)}};k.prototype.setDefaultEncoding=function e(t){if(typeof t==="string")t=t.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new b(t);this._writableState.defaultEncoding=t;return this};Object.defineProperty(k.prototype,"writableBuffer",{enumerable:false,get:function e(){return this._writableState&&this._writableState.getBuffer()}});function C(e,t,r){if(!e.objectMode&&e.decodeStrings!==false&&typeof t==="string"){t=o.from(t,r)}return t}Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:false,get:function e(){return this._writableState.highWaterMark}});function L(e,t,r,n,a,i){if(!r){var o=C(t,n,a);if(n!==o){r=true;a="buffer";n=o}}var s=t.objectMode?1:n.length;t.length+=s;var l=t.length<t.highWaterMark;if(!l)t.needDrain=true;if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:a,isBuf:r,callback:i,next:null};if(c){c.next=t.lastBufferedRequest}else{t.bufferedRequest=t.lastBufferedRequest}t.bufferedRequestCount+=1}else{E(e,t,false,s,n,a,i)}return l}function E(e,t,r,n,a,i,o){t.writelen=n;t.writecb=o;t.writing=true;t.sync=true;if(t.destroyed)t.onwrite(new m("write"));else if(r)e._writev(a,t.onwrite);else e._write(a,i,t.onwrite);t.sync=false}function D(e,t,r,n,a){--t.pendingcb;if(r){V.nextTick(a,n);V.nextTick(B,e,t);e._writableState.errorEmitted=true;x(e,n)}else{a(n);e._writableState.errorEmitted=true;x(e,n);B(e,t)}}function O(e){e.writing=false;e.writecb=null;e.length-=e.writelen;e.writelen=0}function P(e,t){var r=e._writableState;var n=r.sync;var a=r.writecb;if(typeof a!=="function")throw new v;O(r);if(t)D(e,r,n,t,a);else{var i=N(r)||e.destroyed;if(!i&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest){z(e,r)}if(n){V.nextTick(I,e,r,i,a)}else{I(e,r,i,a)}}}function I(e,t,r,n){if(!r)R(e,t);t.pendingcb--;n();B(e,t)}function R(e,t){if(t.length===0&&t.needDrain){t.needDrain=false;e.emit("drain")}}function z(e,t){t.bufferProcessing=true;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount;var a=new Array(n);var i=t.corkedRequestsFree;i.entry=r;var o=0;var s=true;while(r){a[o]=r;if(!r.isBuf)s=false;r=r.next;o+=1}a.allBuffers=s;E(e,t,true,t.length,a,"",i.finish);t.pendingcb++;t.lastBufferedRequest=null;if(i.next){t.corkedRequestsFree=i.next;i.next=null}else{t.corkedRequestsFree=new d(t)}t.bufferedRequestCount=0}else{while(r){var l=r.chunk;var c=r.encoding;var u=r.callback;var f=t.objectMode?1:l.length;E(e,t,false,f,l,c,u);r=r.next;t.bufferedRequestCount--;if(t.writing){break}}if(r===null)t.lastBufferedRequest=null}t.bufferedRequest=r;t.bufferProcessing=false}k.prototype._write=function(e,t,r){r(new p("_write()"))};k.prototype._writev=null;k.prototype.end=function(e,t,r){var n=this._writableState;if(typeof e==="function"){r=e;e=null;t=null}else if(typeof t==="function"){r=t;t=null}if(e!==null&&e!==undefined)this.write(e,t);if(n.corked){n.corked=1;this.uncork()}if(!n.ending)H(this,n,r);return this};Object.defineProperty(k.prototype,"writableLength",{enumerable:false,get:function e(){return this._writableState.length}});function N(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function F(t,r){t._final(function(e){r.pendingcb--;if(e){x(t,e)}r.prefinished=true;t.emit("prefinish");B(t,r)})}function j(e,t){if(!t.prefinished&&!t.finalCalled){if(typeof e._final==="function"&&!t.destroyed){t.pendingcb++;t.finalCalled=true;V.nextTick(F,e,t)}else{t.prefinished=true;e.emit("prefinish")}}}function B(e,t){var r=N(t);if(r){j(e,t);if(t.pendingcb===0){t.finished=true;e.emit("finish");if(t.autoDestroy){var n=e._readableState;if(!n||n.autoDestroy&&n.endEmitted){e.destroy()}}}}return r}function H(e,t,r){t.ending=true;B(e,t);if(r){if(t.finished)V.nextTick(r);else e.once("finish",r)}t.ended=true;e.writable=false}function U(e,t,r){var n=e.entry;e.entry=null;while(n){var a=n.callback;t.pendingcb--;a(r);n=n.next}t.corkedRequestsFree.next=e}Object.defineProperty(k.prototype,"destroyed",{enumerable:false,get:function e(){if(this._writableState===undefined){return false}return this._writableState.destroyed},set:function e(t){if(!this._writableState){return}this._writableState.destroyed=t}});k.prototype.destroy=i.destroy;k.prototype._undestroy=i.undestroy;k.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,Y("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../errors":99,"./_stream_duplex":100,"./internal/streams/destroy":107,"./internal/streams/state":111,"./internal/streams/stream":112,_process:96,buffer:28,inherits:65,"util-deprecate":120}],105:[function(_,y,e){(function(m){(function(){"use strict";var e;function n(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var i=_("./end-of-stream");var o=Symbol("lastResolve");var s=Symbol("lastReject");var l=Symbol("error");var c=Symbol("ended");var u=Symbol("lastPromise");var f=Symbol("handlePromise");var d=Symbol("stream");function h(e,t){return{value:e,done:t}}function t(e){var t=e[o];if(t!==null){var r=e[d].read();if(r!==null){e[u]=null;e[o]=null;e[s]=null;t(h(r,false))}}}function p(e){m.nextTick(t,e)}function v(r,n){return function(e,t){r.then(function(){if(n[c]){e(h(undefined,true));return}n[f](e,t)},t)}}var r=Object.getPrototypeOf(function(){});var g=Object.setPrototypeOf((e={get stream(){return this[d]},next:function e(){var r=this;var t=this[l];if(t!==null){return Promise.reject(t)}if(this[c]){return Promise.resolve(h(undefined,true))}if(this[d].destroyed){return new Promise(function(e,t){m.nextTick(function(){if(r[l]){t(r[l])}else{e(h(undefined,true))}})})}var n=this[u];var a;if(n){a=new Promise(v(n,this))}else{var i=this[d].read();if(i!==null){return Promise.resolve(h(i,false))}a=new Promise(this[f])}this[u]=a;return a}},n(e,Symbol.asyncIterator,function(){return this}),n(e,"return",function e(){var n=this;return new Promise(function(t,r){n[d].destroy(null,function(e){if(e){r(e);return}t(h(undefined,true))})})}),e),r);var a=function e(t){var r;var a=Object.create(g,(r={},n(r,d,{value:t,writable:true}),n(r,o,{value:null,writable:true}),n(r,s,{value:null,writable:true}),n(r,l,{value:null,writable:true}),n(r,c,{value:t._readableState.endEmitted,writable:true}),n(r,f,{value:function e(t,r){var n=a[d].read();if(n){a[u]=null;a[o]=null;a[s]=null;t(h(n,false))}else{a[o]=t;a[s]=r}},writable:true}),r));a[u]=null;i(t,function(e){if(e&&e.code!=="ERR_STREAM_PREMATURE_CLOSE"){var t=a[s];if(t!==null){a[u]=null;a[o]=null;a[s]=null;t(e)}a[l]=e;return}var r=a[o];if(r!==null){a[u]=null;a[o]=null;a[s]=null;r(h(undefined,true))}a[c]=true});t.on("readable",p.bind(null,a));return a};y.exports=a}).call(this)}).call(this,_("_process"))},{"./end-of-stream":108,_process:96}],106:[function(e,t,r){"use strict";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);if(e)n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable});r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};if(e%2){n(Object(r),true).forEach(function(e){i(t,e,r[e])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))}else{n(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}}return t}function i(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function l(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}var c=e("buffer"),u=c.Buffer;var f=e("util"),d=f.inspect;var h=d&&d.custom||"inspect";function p(e,t,r){u.prototype.copy.call(e,t,r)}t.exports=function(){function e(){o(this,e);this.head=null;this.tail=null;this.length=0}l(e,[{key:"push",value:function e(t){var r={data:t,next:null};if(this.length>0)this.tail.next=r;else this.head=r;this.tail=r;++this.length}},{key:"unshift",value:function e(t){var r={data:t,next:this.head};if(this.length===0)this.tail=r;this.head=r;++this.length}},{key:"shift",value:function e(){if(this.length===0)return;var t=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return t}},{key:"clear",value:function e(){this.head=this.tail=null;this.length=0}},{key:"join",value:function e(t){if(this.length===0)return"";var r=this.head;var n=""+r.data;while(r=r.next){n+=t+r.data}return n}},{key:"concat",value:function e(t){if(this.length===0)return u.alloc(0);var r=u.allocUnsafe(t>>>0);var n=this.head;var a=0;while(n){p(n.data,r,a);a+=n.data.length;n=n.next}return r}},{key:"consume",value:function e(t,r){var n;if(t<this.head.data.length){n=this.head.data.slice(0,t);this.head.data=this.head.data.slice(t)}else if(t===this.head.data.length){n=this.shift()}else{n=r?this._getString(t):this._getBuffer(t)}return n}},{key:"first",value:function e(){return this.head.data}},{key:"_getString",value:function e(t){var r=this.head;var n=1;var a=r.data;t-=a.length;while(r=r.next){var i=r.data;var o=t>i.length?i.length:t;if(o===i.length)a+=i;else a+=i.slice(0,t);t-=o;if(t===0){if(o===i.length){++n;if(r.next)this.head=r.next;else this.head=this.tail=null}else{this.head=r;r.data=i.slice(o)}break}++n}this.length-=n;return a}},{key:"_getBuffer",value:function e(t){var r=u.allocUnsafe(t);var n=this.head;var a=1;n.data.copy(r);t-=n.data.length;while(n=n.next){var i=n.data;var o=t>i.length?i.length:t;i.copy(r,r.length-t,0,o);t-=o;if(t===0){if(o===i.length){++a;if(n.next)this.head=n.next;else this.head=this.tail=null}else{this.head=n;n.data=i.slice(o)}break}++a}this.length-=a;return r}},{key:h,value:function e(t,r){return d(this,a({},r,{depth:0,customInspect:false}))}}]);return e}()},{buffer:28,util:26}],107:[function(e,n,t){(function(l){(function(){"use strict";function e(e,t){var r=this;var n=this._readableState&&this._readableState.destroyed;var a=this._writableState&&this._writableState.destroyed;if(n||a){if(t){t(e)}else if(e){if(!this._writableState){l.nextTick(s,this,e)}else if(!this._writableState.errorEmitted){this._writableState.errorEmitted=true;l.nextTick(s,this,e)}}return this}if(this._readableState){this._readableState.destroyed=true}if(this._writableState){this._writableState.destroyed=true}this._destroy(e||null,function(e){if(!t&&e){if(!r._writableState){l.nextTick(i,r,e)}else if(!r._writableState.errorEmitted){r._writableState.errorEmitted=true;l.nextTick(i,r,e)}else{l.nextTick(o,r)}}else if(t){l.nextTick(o,r);t(e)}else{l.nextTick(o,r)}});return this}function i(e,t){s(e,t);o(e)}function o(e){if(e._writableState&&!e._writableState.emitClose)return;if(e._readableState&&!e._readableState.emitClose)return;e.emit("close")}function t(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finalCalled=false;this._writableState.prefinished=false;this._writableState.finished=false;this._writableState.errorEmitted=false}}function s(e,t){e.emit("error",t)}function r(e,t){var r=e._readableState;var n=e._writableState;if(r&&r.autoDestroy||n&&n.autoDestroy)e.destroy(t);else e.emit("error",t)}n.exports={destroy:e,undestroy:t,errorOrDestroy:r}}).call(this)}).call(this,e("_process"))},{_process:96}],108:[function(e,t,r){"use strict";var h=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function p(n){var a=false;return function(){if(a)return;a=true;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}n.apply(this,t)}}function v(){}function g(e){return e.setHeader&&typeof e.abort==="function"}function m(r,e,n){if(typeof e==="function")return m(r,null,e);if(!e)e={};n=p(n||v);var a=e.readable||e.readable!==false&&r.readable;var i=e.writable||e.writable!==false&&r.writable;var t=function e(){if(!r.writable)s()};var o=r._writableState&&r._writableState.finished;var s=function e(){i=false;o=true;if(!a)n.call(r)};var l=r._readableState&&r._readableState.endEmitted;var c=function e(){a=false;l=true;if(!i)n.call(r)};var u=function e(t){n.call(r,t)};var f=function e(){var t;if(a&&!l){if(!r._readableState||!r._readableState.ended)t=new h;return n.call(r,t)}if(i&&!o){if(!r._writableState||!r._writableState.ended)t=new h;return n.call(r,t)}};var d=function e(){r.req.on("finish",s)};if(g(r)){r.on("complete",s);r.on("abort",f);if(r.req)d();else r.on("request",d)}else if(i&&!r._writableState){r.on("end",t);r.on("close",t)}r.on("end",c);r.on("finish",s);if(e.error!==false)r.on("error",u);r.on("close",f);return function(){r.removeListener("complete",s);r.removeListener("abort",f);r.removeListener("request",d);if(r.req)r.req.removeListener("finish",s);r.removeListener("end",t);r.removeListener("close",t);r.removeListener("finish",s);r.removeListener("end",c);r.removeListener("error",u);r.removeListener("close",f)}}t.exports=m},{"../../../errors":99}],109:[function(e,t,r){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],110:[function(o,e,t){"use strict";var s;function l(e){var t=false;return function(){if(t)return;t=true;e.apply(void 0,arguments)}}var r=o("../../../errors").codes,n=r.ERR_MISSING_ARGS,c=r.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function u(e){return e.setHeader&&typeof e.abort==="function"}function f(t,e,r,n){n=l(n);var a=false;t.on("close",function(){a=true});if(s===undefined)s=o("./end-of-stream");s(t,{readable:e,writable:r},function(e){if(e)return n(e);a=true;n()});var i=false;return function(e){if(a)return;if(i)return;i=true;if(u(t))return t.abort();if(typeof t.destroy==="function")return t.destroy();n(e||new c("pipe"))}}function d(e){e()}function h(e,t){return e.pipe(t)}function p(e){if(!e.length)return a;if(typeof e[e.length-1]!=="function")return a;return e.pop()}function i(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++){a[t]=arguments[t]}var i=p(a);if(Array.isArray(a[0]))a=a[0];if(a.length<2){throw new n("streams")}var o;var s=a.map(function(e,t){var r=t<a.length-1;var n=t>0;return f(e,r,n,function(e){if(!o)o=e;if(e)s.forEach(d);if(r)return;s.forEach(d);i(o)})});return a.reduce(h)}e.exports=i},{"../../../errors":99,"./end-of-stream":108}],111:[function(e,t,r){"use strict";var o=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;function s(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function n(e,t,r,n){var a=s(t,n,r);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var i=n?r:"highWaterMark";throw new o(i,a)}return Math.floor(a)}return e.objectMode?16:16*1024}t.exports={getHighWaterMark:n}},{"../../../errors":99}],112:[function(e,t,r){t.exports=e("events").EventEmitter},{events:27}],113:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer;var a=n.isEncoding||function(e){e=""+e;switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function i(e){if(!e)return"utf8";var t;while(true){switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase();t=true}}}function o(e){var t=i(e);if(typeof t!=="string"&&(n.isEncoding===a||!a(e)))throw new Error("Unknown encoding: "+e);return t||e}r.StringDecoder=s;function s(e){this.encoding=o(e);var t;switch(this.encoding){case"utf16le":this.text=p;this.end=v;t=4;break;case"utf8":this.fillLast=f;t=4;break;case"base64":this.text=g;this.end=m;t=3;break;default:this.write=_;this.end=y;return}this.lastNeed=0;this.lastTotal=0;this.lastChar=n.allocUnsafe(t)}s.prototype.write=function(e){if(e.length===0)return"";var t;var r;if(this.lastNeed){t=this.fillLast(e);if(t===undefined)return"";r=this.lastNeed;this.lastNeed=0}else{r=0}if(r<e.length)return t?t+this.text(e,r):this.text(e,r);return t||""};s.prototype.end=h;s.prototype.text=d;s.prototype.fillLast=function(e){if(this.lastNeed<=e.length){e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length);this.lastNeed-=e.length};function l(e){if(e<=127)return 0;else if(e>>5===6)return 2;else if(e>>4===14)return 3;else if(e>>3===30)return 4;return e>>6===2?-1:-2}function c(e,t,r){var n=t.length-1;if(n<r)return 0;var a=l(t[n]);if(a>=0){if(a>0)e.lastNeed=a-1;return a}if(--n<r||a===-2)return 0;a=l(t[n]);if(a>=0){if(a>0)e.lastNeed=a-2;return a}if(--n<r||a===-2)return 0;a=l(t[n]);if(a>=0){if(a>0){if(a===2)a=0;else e.lastNeed=a-3}return a}return 0}function u(e,t,r){if((t[0]&192)!==128){e.lastNeed=0;return""}if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128){e.lastNeed=1;return""}if(e.lastNeed>2&&t.length>2){if((t[2]&192)!==128){e.lastNeed=2;return""}}}}function f(e){var t=this.lastTotal-this.lastNeed;var r=u(this,e,t);if(r!==undefined)return r;if(this.lastNeed<=e.length){e.copy(this.lastChar,t,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}e.copy(this.lastChar,t,0,e.length);this.lastNeed-=e.length}function d(e,t){var r=c(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);e.copy(this.lastChar,0,n);return e.toString("utf8",t,n)}function h(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed)return t+"";return t}function p(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=e[e.length-2];this.lastChar[1]=e[e.length-1];return r.slice(0,-1)}}return r}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=e[e.length-1];return e.toString("utf16le",t,e.length-1)}function v(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function g(e,t){var r=(e.length-t)%3;if(r===0)return e.toString("base64",t);this.lastNeed=3-r;this.lastTotal=3;if(r===1){this.lastChar[0]=e[e.length-1]}else{this.lastChar[0]=e[e.length-2];this.lastChar[1]=e[e.length-1]}return e.toString("base64",t,e.length-r)}function m(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed)return t+this.lastChar.toString("base64",0,3-this.lastNeed);return t}function _(e){return e.toString(this.encoding)}function y(e){return e&&e.length?this.write(e):""}},{"safe-buffer":97}],114:[function(t,y,e){(function(e,_){(function(){var r=t("assert");var l=t("debug")("stream-parser");y.exports=e;var c=-1;var u=0;var n=1;var f=2;function e(e){var t=e&&"function"==typeof e._transform;var r=e&&"function"==typeof e._write;if(!t&&!r)throw new Error("must pass a Writable or Transform stream in");l("extending Parser into stream");e._bytes=i;e._skipBytes=o;if(t)e._passthrough=s;if(t){e._transform=h}else{e._write=d}}function a(e){l("initializing parser stream");e._parserBytesLeft=0;e._parserBuffers=[];e._parserBuffered=0;e._parserState=c;e._parserCallback=null;if("function"==typeof e.push){e._parserOutput=e.push.bind(e)}e._parserInit=true}function i(e,t){r(!this._parserCallback,'there is already a "callback" set!');r(isFinite(e)&&e>0,'can only buffer a finite number of bytes > 0, got "'+e+'"');if(!this._parserInit)a(this);l("buffering %o bytes",e);this._parserBytesLeft=e;this._parserCallback=t;this._parserState=u}function o(e,t){r(!this._parserCallback,'there is already a "callback" set!');r(e>0,'can only skip > 0 bytes, got "'+e+'"');if(!this._parserInit)a(this);l("skipping %o bytes",e);this._parserBytesLeft=e;this._parserCallback=t;this._parserState=n}function s(e,t){r(!this._parserCallback,'There is already a "callback" set!');r(e>0,'can only pass through > 0 bytes, got "'+e+'"');if(!this._parserInit)a(this);l("passing through %o bytes",e);this._parserBytesLeft=e;this._parserCallback=t;this._parserState=f}function d(e,t,r){if(!this._parserInit)a(this);l("write(%o bytes)",e.length);if("function"==typeof t)r=t;g(this,e,null,r)}function h(e,t,r){if(!this._parserInit)a(this);l("transform(%o bytes)",e.length);if("function"!=typeof t){t=this._parserOutput}g(this,e,t,r)}function p(r,n,a,i){if(r._parserBytesLeft<=0){return i(new Error("got data but not currently parsing anything"))}if(n.length<=r._parserBytesLeft){return function(){return v(r,n,a,i)}}else{return function(){var t=n.slice(0,r._parserBytesLeft);return v(r,t,a,function(e){if(e)return i(e);if(n.length>t.length){return function(){return p(r,n.slice(t.length),a,i)}}})}}}function v(e,t,r,n){e._parserBytesLeft-=t.length;l("%o bytes left for stream piece",e._parserBytesLeft);if(e._parserState===u){e._parserBuffers.push(t);e._parserBuffered+=t.length}else if(e._parserState===f){r(t)}if(0===e._parserBytesLeft){var a=e._parserCallback;if(a&&e._parserState===u&&e._parserBuffers.length>1){t=_.concat(e._parserBuffers,e._parserBuffered)}if(e._parserState!==u){t=null}e._parserCallback=null;e._parserBuffered=0;e._parserState=c;e._parserBuffers.splice(0);if(a){var i=[];if(t){i.push(t)}else{}if(r){i.push(r)}var o=a.length>i.length;if(o){i.push(m(n))}var s=a.apply(e,i);if(!o||n===s)return n}}else{return n}}var g=m(p);function m(t){return function(){var e=t.apply(this,arguments);while("function"==typeof e){e=e()}return e}}}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{_process:96,assert:21,buffer:28,debug:115}],115:[function(s,l,c){(function(o){(function(){c=l.exports=s("./debug");c.log=r;c.formatArgs=t;c.save=n;c.load=a;c.useColors=e;c.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:i();c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function e(){if(typeof window!=="undefined"&&window.process&&window.process.type==="renderer"){return true}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}c.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}};function t(e){var t=this.useColors;e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+c.humanize(this.diff);if(!t)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var n=0;var a=0;e[0].replace(/%[a-zA-Z%]/g,function(e){if("%%"===e)return;n++;if("%c"===e){a=n}});e.splice(a,0,r)}function r(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function n(e){try{if(null==e){c.storage.removeItem("debug")}else{c.storage.debug=e}}catch(e){}}function a(){var e;try{e=c.storage.debug}catch(e){}if(!e&&typeof o!=="undefined"&&"env"in o){e=o.env.DEBUG}return e}c.enable(a());function i(){try{return window.localStorage}catch(e){}}}).call(this)}).call(this,s("_process"))},{"./debug":116,_process:96}],116:[function(e,t,l){l=t.exports=n.debug=n["default"]=n;l.coerce=s;l.disable=i;l.enable=a;l.enabled=o;l.humanize=e("ms");l.names=[];l.skips=[];l.formatters={};var c;function r(e){var t=0,r;for(r in e){t=(t<<5)-t+e.charCodeAt(r);t|=0}return l.colors[Math.abs(t)%l.colors.length]}function n(e){function s(){if(!s.enabled)return;var a=s;var e=+new Date;var t=e-(c||e);a.diff=t;a.prev=c;a.curr=e;c=e;var i=new Array(arguments.length);for(var r=0;r<i.length;r++){i[r]=arguments[r]}i[0]=l.coerce(i[0]);if("string"!==typeof i[0]){i.unshift("%O")}var o=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(e,t){if(e==="%%")return e;o++;var r=l.formatters[t];if("function"===typeof r){var n=i[o];e=r.call(a,n);i.splice(o,1);o--}return e});l.formatArgs.call(a,i);var n=s.log||l.log||console.log.bind(console);n.apply(a,i)}s.namespace=e;s.enabled=l.enabled(e);s.useColors=l.useColors();s.color=r(e);if("function"===typeof l.init){l.init(s)}return s}function a(e){l.save(e);l.names=[];l.skips=[];var t=(typeof e==="string"?e:"").split(/[\s,]+/);var r=t.length;for(var n=0;n<r;n++){if(!t[n])continue;e=t[n].replace(/\*/g,".*?");if(e[0]==="-"){l.skips.push(new RegExp("^"+e.substr(1)+"$"))}else{l.names.push(new RegExp("^"+e+"$"))}}}function i(){l.enable("")}function o(e){var t,r;for(t=0,r=l.skips.length;t<r;t++){if(l.skips[t].test(e)){return false}}for(t=0,r=l.names.length;t<r;t++){if(l.names[t].test(e)){return true}}return false}function s(e){if(e instanceof Error)return e.stack||e.message;return e}},{ms:117}],117:[function(e,t,r){var a=1e3;var i=a*60;var o=i*60;var s=o*24;var l=s*365.25;t.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0){return n(e)}else if(r==="number"&&isNaN(e)===false){return t.long?u(e):c(e)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function n(e){e=String(e);if(e.length>100){return}var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t){return}var r=parseFloat(t[1]);var n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*l;case"days":case"day":case"d":return r*s;case"hours":case"hour":case"hrs":case"hr":case"h":return r*o;case"minutes":case"minute":case"mins":case"min":case"m":return r*i;case"seconds":case"second":case"secs":case"sec":case"s":return r*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return undefined}}function c(e){if(e>=s){return Math.round(e/s)+"d"}if(e>=o){return Math.round(e/o)+"h"}if(e>=i){return Math.round(e/i)+"m"}if(e>=a){return Math.round(e/a)+"s"}return e+"ms"}function u(e){return f(e,s,"day")||f(e,o,"hour")||f(e,i,"minute")||f(e,a,"second")||e+" ms"}function f(e,t,r){if(e<t){return}if(e<t*1.5){return Math.floor(e/t)+" "+r}return Math.ceil(e/t)+" "+r+"s"}},{}],118:[function(l,e,c){(function(n,s){(function(){var e=l("process/browser.js").nextTick;var t=Function.prototype.apply;var a=Array.prototype.slice;var i={};var o=0;c.setTimeout=function(){return new r(t.call(setTimeout,window,arguments),clearTimeout)};c.setInterval=function(){return new r(t.call(setInterval,window,arguments),clearInterval)};c.clearTimeout=c.clearInterval=function(e){e.close()};function r(e,t){this._id=e;this._clearFn=t}r.prototype.unref=r.prototype.ref=function(){};r.prototype.close=function(){this._clearFn.call(window,this._id)};c.enroll=function(e,t){clearTimeout(e._idleTimeoutId);e._idleTimeout=t};c.unenroll=function(e){clearTimeout(e._idleTimeoutId);e._idleTimeout=-1};c._unrefActive=c.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;if(e>=0){t._idleTimeoutId=setTimeout(function e(){if(t._onTimeout)t._onTimeout()},e)}};c.setImmediate=typeof n==="function"?n:function(t){var r=o++;var n=arguments.length<2?false:a.call(arguments,1);i[r]=true;e(function e(){if(i[r]){if(n){t.apply(null,n)}else{t.call(null)}c.clearImmediate(r)}});return r};c.clearImmediate=typeof s==="function"?s:function(e){delete i[e]}}).call(this)}).call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":96,timers:118}],119:[function(e,X,t){(function(d){var n=/^\s+/,a=/\s+$/,i=0,o=d.round,c=d.min,u=d.max,e=d.random;function f(e,t){e=e?e:"";t=t||{};if(e instanceof f){return e}if(!(this instanceof f)){return new f(e,t)}var r=s(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=o(100*this._a)/100,this._format=t.format||r.format;this._gradientType=t.gradientType;if(this._r<1){this._r=o(this._r)}if(this._g<1){this._g=o(this._g)}if(this._b<1){this._b=o(this._b)}this._ok=r.ok;this._tc_id=i++}f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb();var t,r,n,a,i,o;t=e.r/255;r=e.g/255;n=e.b/255;if(t<=.03928){a=t/12.92}else{a=d.pow((t+.055)/1.055,2.4)}if(r<=.03928){i=r/12.92}else{i=d.pow((r+.055)/1.055,2.4)}if(n<=.03928){o=n/12.92}else{o=d.pow((n+.055)/1.055,2.4)}return.2126*a+.7152*i+.0722*o},setAlpha:function(e){this._a=I(e);this._roundA=o(100*this._a)/100;return this},toHsv:function(){var e=v(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=v(this._r,this._g,this._b);var t=o(e.h*360),r=o(e.s*100),n=o(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+n+"%)":"hsva("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=h(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=h(this._r,this._g,this._b);var t=o(e.h*360),r=o(e.s*100),n=o(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+n+"%)":"hsla("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return r(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(R(this._r,255)*100)+"%",g:o(R(this._g,255)*100)+"%",b:o(R(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+o(R(this._r,255)*100)+"%, "+o(R(this._g,255)*100)+"%, "+o(R(this._b,255)*100)+"%)":"rgba("+o(R(this._r,255)*100)+"%, "+o(R(this._g,255)*100)+"%, "+o(R(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){if(this._a===0){return"transparent"}if(this._a<1){return false}return O[t(this._r,this._g,this._b,true)]||false},toFilter:function(e){var t="#"+m(this._r,this._g,this._b,this._a);var r=t;var n=this._gradientType?"GradientType = 1, ":"";if(e){var a=f(e);r="#"+m(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=false;var n=this._a<1&&this._a>=0;var a=!t&&n&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");if(a){if(e==="name"&&this._a===0){return this.toName()}return this.toRgbString()}if(e==="rgb"){r=this.toRgbString()}if(e==="prgb"){r=this.toPercentageRgbString()}if(e==="hex"||e==="hex6"){r=this.toHexString()}if(e==="hex3"){r=this.toHexString(true)}if(e==="hex4"){r=this.toHex8String(true)}if(e==="hex8"){r=this.toHex8String()}if(e==="name"){r=this.toName()}if(e==="hsl"){r=this.toHslString()}if(e==="hsv"){r=this.toHsvString()}return r||this.toHexString()},clone:function(){return f(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));this._r=r._r;this._g=r._g;this._b=r._b;this.setAlpha(r._a);return this},lighten:function(){return this._applyModification(x,arguments)},brighten:function(){return this._applyModification(w,arguments)},darken:function(){return this._applyModification(A,arguments)},desaturate:function(){return this._applyModification(_,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(T,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(L,arguments)},complement:function(){return this._applyCombination(k,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(S,arguments)}};f.fromRatio=function(e,t){if(typeof e=="object"){var r={};for(var n in e){if(e.hasOwnProperty(n)){if(n==="a"){r[n]=e[n]}else{r[n]=H(e[n])}}}e=r}return f(e,t)};function s(e){var t={r:0,g:0,b:0};var r=1;var n=null;var a=null;var i=null;var o=false;var s=false;if(typeof e=="string"){e=G(e)}if(typeof e=="object"){if(Y(e.r)&&Y(e.g)&&Y(e.b)){t=l(e.r,e.g,e.b);o=true;s=String(e.r).substr(-1)==="%"?"prgb":"rgb"}else if(Y(e.h)&&Y(e.s)&&Y(e.v)){n=H(e.s);a=H(e.v);t=g(e.h,n,a);o=true;s="hsv"}else if(Y(e.h)&&Y(e.s)&&Y(e.l)){n=H(e.s);i=H(e.l);t=p(e.h,n,i);o=true;s="hsl"}if(e.hasOwnProperty("a")){r=e.a}}r=I(r);return{ok:o,format:e.format||s,r:c(255,u(t.r,0)),g:c(255,u(t.g,0)),b:c(255,u(t.b,0)),a:r}}function l(e,t,r){return{r:R(e,255)*255,g:R(t,255)*255,b:R(r,255)*255}}function h(e,t,r){e=R(e,255);t=R(t,255);r=R(r,255);var n=u(e,t,r),a=c(e,t,r);var i,o,s=(n+a)/2;if(n==a){i=o=0}else{var l=n-a;o=s>.5?l/(2-n-a):l/(n+a);switch(n){case e:i=(t-r)/l+(t<r?6:0);break;case t:i=(r-e)/l+2;break;case r:i=(e-t)/l+4;break}i/=6}return{h:i,s:o,l:s}}function p(e,t,r){var n,a,i;e=R(e,360);t=R(t,100);r=R(r,100);function o(e,t,r){if(r<0)r+=1;if(r>1)r-=1;if(r<1/6)return e+(t-e)*6*r;if(r<1/2)return t;if(r<2/3)return e+(t-e)*(2/3-r)*6;return e}if(t===0){n=a=i=r}else{var s=r<.5?r*(1+t):r+t-r*t;var l=2*r-s;n=o(l,s,e+1/3);a=o(l,s,e);i=o(l,s,e-1/3)}return{r:n*255,g:a*255,b:i*255}}function v(e,t,r){e=R(e,255);t=R(t,255);r=R(r,255);var n=u(e,t,r),a=c(e,t,r);var i,o,s=n;var l=n-a;o=n===0?0:l/n;if(n==a){i=0}else{switch(n){case e:i=(t-r)/l+(t<r?6:0);break;case t:i=(r-e)/l+2;break;case r:i=(e-t)/l+4;break}i/=6}return{h:i,s:o,v:s}}function g(e,t,r){e=R(e,360)*6;t=R(t,100);r=R(r,100);var n=d.floor(e),a=e-n,i=r*(1-t),o=r*(1-a*t),s=r*(1-(1-a)*t),l=n%6,c=[r,o,i,i,s,r][l],u=[s,r,r,o,i,i][l],f=[i,i,s,r,r,o][l];return{r:c*255,g:u*255,b:f*255}}function t(e,t,r,n){var a=[B(o(e).toString(16)),B(o(t).toString(16)),B(o(r).toString(16))];if(n&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)){return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)}return a.join("")}function r(e,t,r,n,a){var i=[B(o(e).toString(16)),B(o(t).toString(16)),B(o(r).toString(16)),B(U(n))];if(a&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)){return i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0)}return i.join("")}function m(e,t,r,n){var a=[B(U(n)),B(o(e).toString(16)),B(o(t).toString(16)),B(o(r).toString(16))];return a.join("")}f.equals=function(e,t){if(!e||!t){return false}return f(e).toRgbString()==f(t).toRgbString()};f.random=function(){return f.fromRatio({r:e(),g:e(),b:e()})};function _(e,t){t=t===0?0:t||10;var r=f(e).toHsl();r.s-=t/100;r.s=z(r.s);return f(r)}function y(e,t){t=t===0?0:t||10;var r=f(e).toHsl();r.s+=t/100;r.s=z(r.s);return f(r)}function b(e){return f(e).desaturate(100)}function x(e,t){t=t===0?0:t||10;var r=f(e).toHsl();r.l+=t/100;r.l=z(r.l);return f(r)}function w(e,t){t=t===0?0:t||10;var r=f(e).toRgb();r.r=u(0,c(255,r.r-o(255*-(t/100))));r.g=u(0,c(255,r.g-o(255*-(t/100))));r.b=u(0,c(255,r.b-o(255*-(t/100))));return f(r)}function A(e,t){t=t===0?0:t||10;var r=f(e).toHsl();r.l-=t/100;r.l=z(r.l);return f(r)}function T(e,t){var r=f(e).toHsl();var n=(r.h+t)%360;r.h=n<0?360+n:n;return f(r)}function k(e){var t=f(e).toHsl();t.h=(t.h+180)%360;return f(t)}function M(e){var t=f(e).toHsl();var r=t.h;return[f(e),f({h:(r+120)%360,s:t.s,l:t.l}),f({h:(r+240)%360,s:t.s,l:t.l})]}function S(e){var t=f(e).toHsl();var r=t.h;return[f(e),f({h:(r+90)%360,s:t.s,l:t.l}),f({h:(r+180)%360,s:t.s,l:t.l}),f({h:(r+270)%360,s:t.s,l:t.l})]}function C(e){var t=f(e).toHsl();var r=t.h;return[f(e),f({h:(r+72)%360,s:t.s,l:t.l}),f({h:(r+216)%360,s:t.s,l:t.l})]}function L(e,t,r){t=t||6;r=r||30;var n=f(e).toHsl();var a=360/r;var i=[f(e)];for(n.h=(n.h-(a*t>>1)+720)%360;--t;){n.h=(n.h+a)%360;i.push(f(n))}return i}function E(e,t){t=t||6;var r=f(e).toHsv();var n=r.h,a=r.s,i=r.v;var o=[];var s=1/t;while(t--){o.push(f({h:n,s:a,v:i}));i=(i+s)%1}return o}f.mix=function(e,t,r){r=r===0?0:r||50;var n=f(e).toRgb();var a=f(t).toRgb();var i=r/100;var o={r:(a.r-n.r)*i+n.r,g:(a.g-n.g)*i+n.g,b:(a.b-n.b)*i+n.b,a:(a.a-n.a)*i+n.a};return f(o)};f.readability=function(e,t){var r=f(e);var n=f(t);return(d.max(r.getLuminance(),n.getLuminance())+.05)/(d.min(r.getLuminance(),n.getLuminance())+.05)};f.isReadable=function(e,t,r){var n=f.readability(e,t);var a,i;i=false;a=W(r);switch(a.level+a.size){case"AAsmall":case"AAAlarge":i=n>=4.5;break;case"AAlarge":i=n>=3;break;case"AAAsmall":i=n>=7;break}return i};f.mostReadable=function(e,t,r){var n=null;var a=0;var i;var o,s,l;r=r||{};o=r.includeFallbackColors;s=r.level;l=r.size;for(var c=0;c<t.length;c++){i=f.readability(e,t[c]);if(i>a){a=i;n=f(t[c])}}if(f.isReadable(e,n,{level:s,size:l})||!o){return n}else{r.includeFallbackColors=false;return f.mostReadable(e,["#fff","#000"],r)}};var D=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var O=f.hexNames=P(D);function P(e){var t={};for(var r in e){if(e.hasOwnProperty(r)){t[e[r]]=r}}return t}function I(e){e=parseFloat(e);if(isNaN(e)||e<0||e>1){e=1}return e}function R(e,t){if(F(e)){e="100%"}var r=j(e);e=c(t,u(0,parseFloat(e)));if(r){e=parseInt(e*t,10)/100}if(d.abs(e-t)<1e-6){return 1}return e%t/parseFloat(t)}function z(e){return c(1,u(0,e))}function N(e){return parseInt(e,16)}function F(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function j(e){return typeof e==="string"&&e.indexOf("%")!=-1}function B(e){return e.length==1?"0"+e:""+e}function H(e){if(e<=1){e=e*100+"%"}return e}function U(e){return d.round(parseFloat(e)*255).toString(16)}function V(e){return N(e)/255}var q=function(){var e="[-\\+]?\\d+%?";var t="[-\\+]?\\d*\\.\\d+%?";var r="(?:"+t+")|(?:"+e+")";var n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";var a="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+a),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+a),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+a),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Y(e){return!!q.CSS_UNIT.exec(e)}function G(e){e=e.replace(n,"").replace(a,"").toLowerCase();var t=false;if(D[e]){e=D[e];t=true}else if(e=="transparent"){return{r:0,g:0,b:0,a:0,format:"name"}}var r;if(r=q.rgb.exec(e)){return{r:r[1],g:r[2],b:r[3]}}if(r=q.rgba.exec(e)){return{r:r[1],g:r[2],b:r[3],a:r[4]}}if(r=q.hsl.exec(e)){return{h:r[1],s:r[2],l:r[3]}}if(r=q.hsla.exec(e)){return{h:r[1],s:r[2],l:r[3],a:r[4]}}if(r=q.hsv.exec(e)){return{h:r[1],s:r[2],v:r[3]}}if(r=q.hsva.exec(e)){return{h:r[1],s:r[2],v:r[3],a:r[4]}}if(r=q.hex8.exec(e)){return{r:N(r[1]),g:N(r[2]),b:N(r[3]),a:V(r[4]),format:t?"name":"hex8"}}if(r=q.hex6.exec(e)){return{r:N(r[1]),g:N(r[2]),b:N(r[3]),format:t?"name":"hex"}}if(r=q.hex4.exec(e)){return{r:N(r[1]+""+r[1]),g:N(r[2]+""+r[2]),b:N(r[3]+""+r[3]),a:V(r[4]+""+r[4]),format:t?"name":"hex8"}}if(r=q.hex3.exec(e)){return{r:N(r[1]+""+r[1]),g:N(r[2]+""+r[2]),b:N(r[3]+""+r[3]),format:t?"name":"hex"}}return false}function W(e){var t,r;e=e||{level:"AA",size:"small"};t=(e.level||"AA").toUpperCase();r=(e.size||"small").toLowerCase();if(t!=="AA"&&t!=="AAA"){t="AA"}if(r!=="small"&&r!=="large"){r="small"}return{level:t,size:r}}if(typeof X!=="undefined"&&X.exports){X.exports=f}else if(typeof nc==="function"&&nc.amd){nc(function(){return f})}else{window.tinycolor=f}})(Math)},{}],120:[function(e,t,r){(function(r){(function(){t.exports=e;function e(e,t){if(a("noDeprecation")){return e}var r=false;function n(){if(!r){if(a("throwDeprecation")){throw new Error(t)}else if(a("traceDeprecation")){console.trace(t)}else{console.warn(t)}r=true}return e.apply(this,arguments)}return n}function a(e){try{if(!r.localStorage)return false}catch(e){return false}var t=r.localStorage[e];if(null==t)return false;return String(t).toLowerCase()==="true"}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],121:[function(e,t,r){var u=e("../main");var n=e("object-assign");var f=u.instance();function d(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}d.prototype=new u.baseCalendar;n(d.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:false,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if(typeof e==="string"){var r=e.match(o);return r?r[0]:""}var n=this._validateYear(e);var a=e.month();var i=""+this.toChineseMonth(n,a);if(t&&i.length<2){i="0"+i}if(this.isIntercalaryMonth(n,a)){i+="i"}return i},monthNames:function(e){if(typeof e==="string"){var t=e.match(l);return t?t[0]:""}var r=this._validateYear(e);var n=e.month();var a=this.toChineseMonth(r,n);var i=["","","","","","","","","","","",""][a-1];if(this.isIntercalaryMonth(r,n)){i=""+i}return i},monthNamesShort:function(e){if(typeof e==="string"){var t=e.match(c);return t?t[0]:""}var r=this._validateYear(e);var n=e.month();var a=this.toChineseMonth(r,n);var i=["","","","","","","","","","","",""][a-1];if(this.isIntercalaryMonth(r,n)){i=""+i}return i},parseMonth:function(e,t){e=this._validateYear(e);var r=parseInt(t);var n;if(!isNaN(r)){var a=t[t.length-1];n=a==="i"||a==="I"}else{if(t[0]===""){n=true;t=t.substring(1)}if(t[t.length-1]===""){t=t.substring(0,t.length-1)}r=1+["","","","","","","","","","","",""].indexOf(t)}var i=this.toMonthIndex(e,r,n);return i},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:false}},_validateYear:function(e,t){if(e.year){e=e.year()}if(typeof e!=="number"||e<1888||e>2111){throw t.replace(/\{0\}/,this.local.name)}return e},toMonthIndex:function(e,t,r){var n=this.intercalaryMonth(e);var a=r&&t!==n;if(a||t<1||t>12){throw u.local.invalidMonth.replace(/\{0\}/,this.local.name)}var i;if(!n){i=t-1}else if(!r&&t<=n){i=t-1}else{i=t}return i},toChineseMonth:function(e,t){if(e.year){e=e.year();t=e.month()}var r=this.intercalaryMonth(e);var n=r?12:11;if(t<0||t>n){throw u.local.invalidMonth.replace(/\{0\}/,this.local.name)}var a;if(!r){a=t+1}else if(t<r){a=t+1}else{a=t}return a},intercalaryMonth:function(e){e=this._validateYear(e);var t=w[e-w[0]];var r=t>>13;return r},isIntercalaryMonth:function(e,t){if(e.year){e=e.year();t=e.month()}var r=this.intercalaryMonth(e);return!!r&&r===t},leapYear:function(e){return this.intercalaryMonth(e)!==0},weekOfYear:function(e,t,r){var n=this._validateYear(e,u.local.invalidyear);var a=A[n-A[0]];var i=a>>9&4095;var o=a>>5&15;var s=a&31;var l;l=f.newDate(i,o,s);l.add(4-(l.dayOfWeek()||7),"d");var c=this.toJD(e,t,r)-l.toJD();return 1+Math.floor(c/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){if(e.year){t=e.month();e=e.year()}e=this._validateYear(e);var r=w[e-w[0]];var n=r>>13;var a=n?12:11;if(t>a){throw u.local.invalidMonth.replace(/\{0\}/,this.local.name)}var i=r&1<<12-t?30:29;return i},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var n=this._validate(e,i,r,u.local.invalidDate);e=this._validateYear(n.year());t=n.month();r=n.day();var a=this.isIntercalaryMonth(e,t);var i=this.toChineseMonth(e,t);var o=h(e,i,r,a);return f.toJD(o.year,o.month,o.day)},fromJD:function(e){var t=f.fromJD(e);var r=a(t.year(),t.month(),t.day());var n=this.toMonthIndex(r.year,r.month,r.isIntercalary);return this.newDate(r.year,n,r.day)},fromString:function(e){var t=e.match(s);var r=this._validateYear(+t[1]);var n=+t[2];var a=!!t[3];var i=this.toMonthIndex(r,n,a);var o=+t[4];return this.newDate(r,i,o)},add:function(e,t,r){var n=e.year();var a=e.month();var i=this.isIntercalaryMonth(n,a);var o=this.toChineseMonth(n,a);var s=Object.getPrototypeOf(d.prototype).add.call(this,e,t,r);if(r==="y"){var l=s.year();var c=s.month();var u=this.isIntercalaryMonth(l,o);var f=i&&u?this.toMonthIndex(l,o,true):this.toMonthIndex(l,o,false);if(f!==c){s.month(f)}}return s}});var s=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m;var o=/^\d?\d[iI]?/m;var l=/^??[]?/m;var c=/^??[]?/m;u.calendars.chinese=d;var w=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548];var A=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function a(e,t,r,n){var a;var i;if(typeof e==="object"){a=e;i=t||{}}else{var o=typeof e==="number"&&e>=1888&&e<=2111;if(!o)throw new Error("Solar year outside range 1888-2111");var s=typeof t==="number"&&t>=1&&t<=12;if(!s)throw new Error("Solar month outside range 1 - 12");var l=typeof r==="number"&&r>=1&&r<=31;if(!l)throw new Error("Solar day outside range 1 - 31");a={year:e,month:t,day:r};i=n||{}}var c=A[a.year-A[0]];var u=a.year<<9|a.month<<5|a.day;i.year=u>=c?a.year:a.year-1;c=A[i.year-A[0]];var f=c>>9&4095;var d=c>>5&15;var h=c&31;var p;var v=new Date(f,d-1,h);var g=new Date(a.year,a.month-1,a.day);p=Math.round((g-v)/(24*3600*1e3));var m=w[i.year-w[0]];var _;for(_=0;_<13;_++){var y=m&1<<12-_?30:29;if(p<y){break}p-=y}var b=m>>13;if(!b||_<b){i.isIntercalary=false;i.month=1+_}else if(_===b){i.isIntercalary=true;i.month=_}else{i.isIntercalary=false;i.month=_}i.day=1+p;return i}function h(e,t,r,n,a){var i;var o;if(typeof e==="object"){o=e;i=t||{}}else{var s=typeof e==="number"&&e>=1888&&e<=2111;if(!s)throw new Error("Lunar year outside range 1888-2111");var l=typeof t==="number"&&t>=1&&t<=12;if(!l)throw new Error("Lunar month outside range 1 - 12");var c=typeof r==="number"&&r>=1&&r<=30;if(!c)throw new Error("Lunar day outside range 1 - 30");var u;if(typeof n==="object"){u=false;i=n}else{u=!!n;i=a||{}}o={year:e,month:t,day:r,isIntercalary:u}}var f;f=o.day-1;var d=w[o.year-w[0]];var h=d>>13;var p;if(!h){p=o.month-1}else if(o.month>h){p=o.month}else if(o.isIntercalary){p=o.month}else{p=o.month-1}for(var v=0;v<p;v++){var g=d&1<<12-v?30:29;f+=g}var m=A[o.year-A[0]];var _=m>>9&4095;var y=m>>5&15;var b=m&31;var x=new Date(_,y-1,b+f);i.year=x.getFullYear();i.month=1+x.getMonth();i.day=x.getDate();return i}},{"../main":135,"object-assign":71}],122:[function(e,t,r){var a=e("../main");var n=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new a.baseCalendar;n(i.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);var e=t.year()+(t.year()<0?1:0);return e%4===3||e%4===-1},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return 13},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-n.dayOfWeek(),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var n=this._validate(e,t,r,a.local.invalidDate);e=n.year();if(e<0){e++}return n.day()+(n.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch;var r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;if(r<=0){r--}t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var n=Math.floor(t/30)+1;var a=t-(n-1)*30+1;return this.newDate(r,n,a)}});a.calendars.coptic=i},{"../main":135,"object-assign":71}],123:[function(e,t,r){var a=e("../main");var n=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new a.baseCalendar;n(i.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:false}},leapYear:function(e){this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);return false},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);return 13},daysInYear:function(e){this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);return 400},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-n.dayOfWeek(),"d");return Math.floor((n.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[r.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,r){var n=this._validate(e,t,r,a.local.invalidDate);return(n.day()+1)%8},weekDay:function(e,t,r){var n=this.dayOfWeek(e,t,r);return n>=2&&n<=6},extraInfo:function(e,t,r){var n=this._validate(e,t,r,a.local.invalidDate);return{century:o[Math.floor((n.year()-1)/100)+1]||""}},toJD:function(e,t,r){var n=this._validate(e,t,r,a.local.invalidDate);e=n.year()+(n.year()<0?1:0);t=n.month();r=n.day();return r+(t>1?16:0)+(t>2?(t-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1;e-=(t-1)*400;e+=e>15?16:0;var r=Math.floor(e/32)+1;var n=e-(r-1)*32+1;return this.newDate(t<=0?t-1:t,r,n)}});var o={20:"Fruitbat",21:"Anchovy"};a.calendars.discworld=i},{"../main":135,"object-assign":71}],124:[function(e,t,r){var a=e("../main");var n=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new a.baseCalendar;n(i.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);var e=t.year()+(t.year()<0?1:0);return e%4===3||e%4===-1},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return 13},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-n.dayOfWeek(),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var n=this._validate(e,t,r,a.local.invalidDate);e=n.year();if(e<0){e++}return n.day()+(n.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch;var r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;if(r<=0){r--}t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var n=Math.floor(t/30)+1;var a=t-(n-1)*30+1;return this.newDate(r,n,a)}});a.calendars.ethiopian=i},{"../main":135,"object-assign":71}],125:[function(e,t,r){var s=e("../main");var n=e("object-assign");function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}a.prototype=new s.baseCalendar;n(a.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:false,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return this._leapYear(t.year())},_leapYear:function(e){e=e<0?e+1:e;return i(e*7+1,19)<7},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-n.dayOfWeek(),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);e=t.year();return this.toJD(e===-1?+1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){if(e.year){t=e.month();e=e.year()}this._validate(e,t,this.minDay,s.local.invalidMonth);return t===12&&this.leapYear(e)?30:t===8&&i(this.daysInYear(e),10)===5?30:t===9&&i(this.daysInYear(e),10)===3?29:this.daysPerMonth[t-1]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},extraInfo:function(e,t,r){var n=this._validate(e,t,r,s.local.invalidDate);return{yearType:(this.leapYear(n)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(n)%10-3]}},toJD:function(e,t,r){var n=this._validate(e,t,r,s.local.invalidDate);e=n.year();t=n.month();r=n.day();var a=e<=0?e+1:e;var i=this.jdEpoch+this._delay1(a)+this._delay2(a)+r+1;if(t<7){for(var o=7;o<=this.monthsInYear(e);o++){i+=this.daysInMonth(e,o)}for(var o=1;o<t;o++){i+=this.daysInMonth(e,o)}}else{for(var o=7;o<t;o++){i+=this.daysInMonth(e,o)}}return i},_delay1:function(e){var t=Math.floor((235*e-234)/19);var r=12084+13753*t;var n=t*29+Math.floor(r/25920);if(i(3*(n+1),7)<3){n++}return n},_delay2:function(e){var t=this._delay1(e-1);var r=this._delay1(e);var n=this._delay1(e+1);return n-r===356?2:r-t===382?1:0},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((e-this.jdEpoch)*98496/35975351)-1;while(e>=this.toJD(t===-1?+1:t+1,7,1)){t++}var r=e<this.toJD(t,1,1)?7:1;while(e>this.toJD(t,r,this.daysInMonth(t,r))){r++}var n=e-this.toJD(t,r,1)+1;return this.newDate(t,r,n)}});function i(e,t){return e-t*Math.floor(e/t)}s.calendars.hebrew=a},{"../main":135,"object-assign":71}],126:[function(e,t,r){var a=e("../main");var n=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new a.baseCalendar;n(i.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);return(t.year()*11+14)%30<11},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-n.dayOfWeek(),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var n=this._validate(e,t,r,a.local.invalidDate);e=n.year();t=n.month();r=n.day();e=e<=0?e+1:e;return r+Math.ceil(29.5*(t-1))+(e-1)*354+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((30*(e-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var r=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1);var n=e-this.toJD(t,r,1)+1;return this.newDate(t,r,n)}});a.calendars.islamic=i},{"../main":135,"object-assign":71}],127:[function(e,t,r){var a=e("../main");var n=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new a.baseCalendar;n(i.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);var e=t.year()<0?t.year()+1:t.year();return e%4===0},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(4-(n.dayOfWeek()||7),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var n=this._validate(e,t,r,a.local.invalidDate);e=n.year();t=n.month();r=n.day();if(e<0){e++}if(t<=2){e--;t+=12}return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r-1524.5},fromJD:function(e){var t=Math.floor(e+.5);var r=t+1524;var n=Math.floor((r-122.1)/365.25);var a=Math.floor(365.25*n);var i=Math.floor((r-a)/30.6001);var o=i-Math.floor(i<14?1:13);var s=n-Math.floor(o>2?4716:4715);var l=r-a-Math.floor(30.6001*i);if(s<=0){s--}return this.newDate(s,o,l)}});a.calendars.julian=i},{"../main":135,"object-assign":71}],128:[function(e,t,r){var s=e("../main");var n=e("object-assign");function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}a.prototype=new s.baseCalendar;n(a.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:true,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:false,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return false},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);e=t.year();var r=Math.floor(e/400);e=e%400;e+=e<0?400:0;var n=Math.floor(e/20);return r+"."+n+"."+e%20},forYear:function(e){e=e.split(".");if(e.length<3){throw"Invalid Mayan year"}var t=0;for(var r=0;r<e.length;r++){var n=parseInt(e[r],10);if(Math.abs(n)>19||r>0&&n<0){throw"Invalid Mayan year"}t=t*20+n}return t},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return 18},weekOfYear:function(e,t,r){this._validate(e,t,r,s.local.invalidDate);return 0},daysInYear:function(e){this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return 360},daysInMonth:function(e,t){this._validate(e,t,this.minDay,s.local.invalidMonth);return 20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,r){var n=this._validate(e,t,r,s.local.invalidDate);return n.day()},weekDay:function(e,t,r){this._validate(e,t,r,s.local.invalidDate);return true},extraInfo:function(e,t,r){var n=this._validate(e,t,r,s.local.invalidDate);var a=n.toJD();var i=this._toHaab(a);var o=this._toTzolkin(a);return{haabMonthName:this.local.haabMonths[i[0]-1],haabMonth:i[0],haabDay:i[1],tzolkinDayName:this.local.tzolkinMonths[o[0]-1],tzolkinDay:o[0],tzolkinTrecena:o[1]}},_toHaab:function(e){e-=this.jdEpoch;var t=i(e+8+(18-1)*20,365);return[Math.floor(t/20)+1,i(t,20)]},_toTzolkin:function(e){e-=this.jdEpoch;return[o(e+20,20),o(e+4,13)]},toJD:function(e,t,r){var n=this._validate(e,t,r,s.local.invalidDate);return n.day()+n.month()*20+n.year()*360+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var t=Math.floor(e/360);e=e%360;e+=e<0?360:0;var r=Math.floor(e/20);var n=e%20;return this.newDate(t,r,n)}});function i(e,t){return e-t*Math.floor(e/t)}function o(e,t){return i(e-1,t)+1}s.calendars.mayan=a},{"../main":135,"object-assign":71}],129:[function(e,t,r){var o=e("../main");var n=e("object-assign");function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}a.prototype=new o.baseCalendar;var s=o.instance("gregorian");n(a.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return s.leapYear(t.year()+(t.year()<1?1:0)+1469)},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(1-(n.dayOfWeek()||7),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,o.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var n=this._validate(e,t,r,o.local.invalidMonth);var e=n.year();if(e<0){e++}var a=n.day();for(var i=1;i<n.month();i++){a+=this.daysPerMonth[i-1]}return a+s.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);var t=Math.floor((e-(this.jdEpoch-1))/366);while(e>=this.toJD(t+1,1,1)){t++}var r=e-Math.floor(this.toJD(t,1,1)+.5)+1;var n=1;while(r>this.daysInMonth(t,n)){r-=this.daysInMonth(t,n);n++}return this.newDate(t,n,r)}});o.calendars.nanakshahi=a},{"../main":135,"object-assign":71}],130:[function(e,t,r){var u=e("../main");var n=e("object-assign");function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}a.prototype=new u.baseCalendar;n(a.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:false}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-n.dayOfWeek(),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,u.local.invalidYear);e=t.year();if(typeof this.NEPALI_CALENDAR_DATA[e]==="undefined"){return this.daysPerYear}var r=0;for(var n=this.minMonth;n<=12;n++){r+=this.NEPALI_CALENDAR_DATA[e][n]}return r},daysInMonth:function(e,t){if(e.year){t=e.month();e=e.year()}this._validate(e,t,this.minDay,u.local.invalidMonth);return typeof this.NEPALI_CALENDAR_DATA[e]==="undefined"?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},toJD:function(e,t,r){var n=this._validate(e,t,r,u.local.invalidDate);e=n.year();t=n.month();r=n.day();var a=u.instance();var i=0;var o=t;var s=e;this._createMissingCalendarData(e);var l=e-(o>9||o===9&&r>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);if(t!==9){i=r;o--}while(o!==9){if(o<=0){o=12;s--}i+=this.NEPALI_CALENDAR_DATA[s][o];o--}if(t===9){i+=r-this.NEPALI_CALENDAR_DATA[s][0];if(i<0){i+=a.daysInYear(l)}}else{i+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0]}return a.newDate(l,1,1).add(i,"d").toJD()},fromJD:function(e){var t=u.instance();var r=t.fromJD(e);var n=r.year();var a=r.dayOfYear();var i=n+56;this._createMissingCalendarData(i);var o=9;var s=this.NEPALI_CALENDAR_DATA[i][0];var l=this.NEPALI_CALENDAR_DATA[i][o]-s+1;while(a>l){o++;if(o>12){o=1;i++}l+=this.NEPALI_CALENDAR_DATA[i][o]}var c=this.NEPALI_CALENDAR_DATA[i][o]-(l-a);return this.newDate(i,o,c)},_createMissingCalendarData:function(e){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var r=e-1;r<e+2;r++){if(typeof this.NEPALI_CALENDAR_DATA[r]==="undefined"){this.NEPALI_CALENDAR_DATA[r]=t}}},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}});u.calendars.nepali=a},{"../main":135,"object-assign":71}],131:[function(e,t,r){var o=e("../main");var n=e("object-assign");function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}a.prototype=new o.baseCalendar;n(a.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);return((t.year()-(t.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-((n.dayOfWeek()+1)%7),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,o.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var n=this._validate(e,t,r,o.local.invalidDate);e=n.year();t=n.month();r=n.day();var a=e-(e>=0?474:473);var i=474+f(a,2820);return r+(t<=7?(t-1)*31:(t-1)*30+6)+Math.floor((i*682-110)/2816)+(i-1)*365+Math.floor(a/2820)*1029983+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=e-this.toJD(475,1,1);var r=Math.floor(t/1029983);var n=f(t,1029983);var a=2820;if(n!==1029982){var i=Math.floor(n/366);var o=f(n,366);a=Math.floor((2134*i+2816*o+2815)/1028522)+i+1}var s=a+2820*r+474;s=s<=0?s-1:s;var l=e-this.toJD(s,1,1)+1;var c=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30);var u=e-this.toJD(s,c,1)+1;return this.newDate(s,c,u)}});function f(e,t){return e-t*Math.floor(e/t)}o.calendars.persian=a;o.calendars.jalali=a},{"../main":135,"object-assign":71}],132:[function(e,t,r){var a=e("../main");var n=e("object-assign");var i=a.instance();function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new a.baseCalendar;n(o.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);var e=this._t2gYear(t.year());return i.leapYear(e)},weekOfYear:function(e,t,r){var n=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);var e=this._t2gYear(n.year());return i.weekOfYear(e,n.month(),n.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var n=this._validate(e,t,r,a.local.invalidDate);var e=this._t2gYear(n.year());return i.toJD(e,n.month(),n.day())},fromJD:function(e){var t=i.fromJD(e);var r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}});a.calendars.taiwan=o},{"../main":135,"object-assign":71}],133:[function(e,t,r){var a=e("../main");var n=e("object-assign");var i=a.instance();function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new a.baseCalendar;n(o.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);var e=this._t2gYear(t.year());return i.leapYear(e)},weekOfYear:function(e,t,r){var n=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);var e=this._t2gYear(n.year());return i.weekOfYear(e,n.month(),n.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var n=this._validate(e,t,r,a.local.invalidDate);var e=this._t2gYear(n.year());return i.toJD(e,n.month(),n.day())},fromJD:function(e){var t=i.fromJD(e);var r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}});a.calendars.thai=o},{"../main":135,"object-assign":71}],134:[function(e,t,r){var o=e("../main");var n=e("object-assign");function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}a.prototype=new o.baseCalendar;n(a.prototype,{name:"UmmAlQura",hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:true}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);return this.daysInYear(t.year())===355},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(-n.dayOfWeek(),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=0;for(var r=1;r<=12;r++){t+=this.daysInMonth(e,r)}return t},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,o.local.invalidMonth);var n=r.toJD()-24e5+.5;var a=0;for(var i=0;i<c.length;i++){if(c[i]>n){return c[a]-c[a-1]}a++}return 30},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var n=this._validate(e,t,r,o.local.invalidDate);var a=12*(n.year()-1)+n.month()-15292;var i=n.day()+c[a-1]-1;return i+24e5-.5},fromJD:function(e){var t=e-24e5+.5;var r=0;for(var n=0;n<c.length;n++){if(c[n]>t)break;r++}var a=r+15292;var i=Math.floor((a-1)/12);var o=i+1;var s=a-12*i;var l=t-c[r-1]+1;return this.newDate(o,s,l)},isValid:function(e,t,r){var n=o.baseCalendar.prototype.isValid.apply(this,arguments);if(n){e=e.year!=null?e.year:e;n=e>=1276&&e<=1500}return n},_validate:function(e,t,r,n){var a=o.baseCalendar.prototype._validate.apply(this,arguments);if(a.year<1276||a.year>1500){throw n.replace(/\{0\}/,this.local.name)}return a}});o.calendars.ummalqura=a;var c=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":135,"object-assign":71}],135:[function(e,t,r){var n=e("object-assign");function a(){this.regionalOptions=[];this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"};this.local=this.regionalOptions[""];this.calendars={};this._localCals={}}n(a.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase();t=t||"";var r=this._localCals[e+"-"+t];if(!r&&this.calendars[e]){r=new this.calendars[e](t);this._localCals[e+"-"+t]=r}if(!r){throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e)}return r},newDate:function(e,t,r,n,a){n=(e!=null&&e.year?e.calendar():typeof n==="string"?this.instance(n,a):n)||this.instance();return n.newDate(e,t,r)},substituteDigits:function(t){return function(e){return(e+"").replace(/[0-9]/g,function(e){return t[e]})}},substituteChineseDigits:function(a,i){return function(e){var t="";var r=0;while(e>0){var n=e%10;t=(n===0?"":a[n]+i[r])+t;r++;e=Math.floor(e/10)}if(t.indexOf(a[1]+i[1])===0){t=t.substr(1)}return t||a[0]}}});function i(e,t,r,n){this._calendar=e;this._year=t;this._month=r;this._day=n;if(this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day)){throw(c.local.invalidDate||c.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}}function o(e,t){e=""+e;return"000000".substring(0,t-e.length)+e}n(i.prototype,{newDate:function(e,t,r){return this._calendar.newDate(e==null?this:e,t,r)},year:function(e){return arguments.length===0?this._year:this.set(e,"y")},month:function(e){return arguments.length===0?this._month:this.set(e,"m")},day:function(e){return arguments.length===0?this._day:this.set(e,"d")},date:function(e,t,r){if(!this._calendar.isValid(e,t,r)){throw(c.local.invalidDate||c.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}this._year=e;this._month=t;this._day=r;return this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name){throw(c.local.differentCalendars||c.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name)}var t=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return t===0?0:t<0?-1:+1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+o(Math.abs(this.year()),4)+"-"+o(this.month(),2)+"-"+o(this.day(),2)}});function s(){this.shortYearCutoff="+10"}n(s.prototype,{_validateLevel:0,newDate:function(e,t,r){if(e==null){return this.today()}if(e.year){this._validate(e,t,r,c.local.invalidDate||c.regionalOptions[""].invalidDate);r=e.day();t=e.month();e=e.year()}return new i(this,e,t,r)},today:function(){return this.fromJSDate(new Date)},epoch:function(e){var t=this._validate(e,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear);return t.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+o(Math.abs(t.year()),4)},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear);return 12},monthOfYear:function(e,t){var r=this._validate(e,t,this.minDay,c.local.invalidMonth||c.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(e,t){var r=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;this._validate(e,r,this.minDay,c.local.invalidMonth||c.regionalOptions[""].invalidMonth);return r},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(e,t,r){var n=this._validate(e,t,r,c.local.invalidDate||c.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,r){var n=this._validate(e,t,r,c.local.invalidDate||c.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(e,t,r){this._validate(e,t,r,c.local.invalidDate||c.regionalOptions[""].invalidDate);return{}},add:function(e,t,r){this._validate(e,this.minMonth,this.minDay,c.local.invalidDate||c.regionalOptions[""].invalidDate);return this._correctAdd(e,this._add(e,t,r),t,r)},_add:function(e,t,r){this._validateLevel++;if(r==="d"||r==="w"){var n=e.toJD()+t*(r==="w"?this.daysInWeek():1);var a=e.calendar().fromJD(n);this._validateLevel--;return[a.year(),a.month(),a.day()]}try{var i=e.year()+(r==="y"?t:0);var o=e.monthOfYear()+(r==="m"?t:0);var a=e.day();var s=function(e){while(o<e.minMonth){i--;o+=e.monthsInYear(i)}var t=e.monthsInYear(i);while(o>t-1+e.minMonth){i++;o-=t;t=e.monthsInYear(i)}};if(r==="y"){if(e.month()!==this.fromMonthOfYear(i,o)){o=this.newDate(i,e.month(),this.minDay).monthOfYear()}o=Math.min(o,this.monthsInYear(i));a=Math.min(a,this.daysInMonth(i,this.fromMonthOfYear(i,o)))}else if(r==="m"){s(this);a=Math.min(a,this.daysInMonth(i,this.fromMonthOfYear(i,o)))}var l=[i,this.fromMonthOfYear(i,o),a];this._validateLevel--;return l}catch(e){this._validateLevel--;throw e}},_correctAdd:function(e,t,r,n){if(!this.hasYearZero&&(n==="y"||n==="m")){if(t[0]===0||e.year()>0!==t[0]>0){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[n];var i=r<0?-1:+1;t=this._add(e,r*a[0]+i*a[1],a[2])}}return e.date(t[0],t[1],t[2])},set:function(e,t,r){this._validate(e,this.minMonth,this.minDay,c.local.invalidDate||c.regionalOptions[""].invalidDate);var n=r==="y"?t:e.year();var a=r==="m"?t:e.month();var i=r==="d"?t:e.day();if(r==="y"||r==="m"){i=Math.min(i,this.daysInMonth(n,a))}return e.date(n,a,i)},isValid:function(e,t,r){this._validateLevel++;var n=this.hasYearZero||e!==0;if(n){var a=this.newDate(e,t,this.minDay);n=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(a)&&(r>=this.minDay&&r-this.minDay<this.daysInMonth(a))}this._validateLevel--;return n},toJSDate:function(e,t,r){var n=this._validate(e,t,r,c.local.invalidDate||c.regionalOptions[""].invalidDate);return c.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(e){return this.fromJD(c.instance().fromJSDate(e).toJD())},_validate:function(e,t,r,n){if(e.year){if(this._validateLevel===0&&this.name!==e.calendar().name){throw(c.local.differentCalendars||c.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name)}return e}try{this._validateLevel++;if(this._validateLevel===1&&!this.isValid(e,t,r)){throw n.replace(/\{0\}/,this.local.name)}var a=this.newDate(e,t,r);this._validateLevel--;return a}catch(e){this._validateLevel--;throw e}}});function l(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}l.prototype=new s;n(l.prototype,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear);var e=t.year()+(t.year()<0?1:0);return e%4===0&&(e%100!==0||e%400===0)},weekOfYear:function(e,t,r){var n=this.newDate(e,t,r);n.add(4-(n.dayOfWeek()||7),"d");return Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,c.local.invalidMonth||c.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var n=this._validate(e,t,r,c.local.invalidDate||c.regionalOptions[""].invalidDate);e=n.year();t=n.month();r=n.day();if(e<0){e++}if(t<3){t+=12;e--}var a=Math.floor(e/100);var i=2-a+Math.floor(a/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r+i-1524.5},fromJD:function(e){var t=Math.floor(e+.5);var r=Math.floor((t-1867216.25)/36524.25);r=t+1+r-Math.floor(r/4);var n=r+1524;var a=Math.floor((n-122.1)/365.25);var i=Math.floor(365.25*a);var o=Math.floor((n-i)/30.6001);var s=n-i-Math.floor(o*30.6001);var l=o-(o>13.5?13:1);var c=a-(l>2.5?4716:4715);if(c<=0){c--}return this.newDate(c,l,s)},toJSDate:function(e,t,r){var n=this._validate(e,t,r,c.local.invalidDate||c.regionalOptions[""].invalidDate);var a=new Date(n.year(),n.month()-1,n.day());a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);a.setHours(a.getHours()>12?a.getHours()+2:0);return a},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var c=t.exports=new a;c.cdate=i;c.baseCalendar=s;c.calendars.gregorian=l},{"object-assign":71}],136:[function(e,t,r){var n=e("object-assign");var C=e("./main");n(C.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});C.local=C.regionalOptions[""];n(C.cdate.prototype,{formatDate:function(e,t){if(typeof e!=="string"){t=e;e=""}return this._calendar.formatDate(e||"",this,t)}});n(C.baseCalendar.prototype,{UNIX_EPOCH:C.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:C.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(n,e,t){if(typeof n!=="string"){t=e;e=n;n=""}if(!e){return""}if(e.calendar()!==this){throw C.local.invalidFormat||C.regionalOptions[""].invalidFormat}n=n||this.local.dateFormat;t=t||{};var r=t.dayNamesShort||this.local.dayNamesShort;var a=t.dayNames||this.local.dayNames;var i=t.monthNumbers||this.local.monthNumbers;var o=t.monthNamesShort||this.local.monthNamesShort;var s=t.monthNames||this.local.monthNames;var l=t.calculateWeek||this.local.calculateWeek;var c=function(e,t){var r=1;while(y+r<n.length&&n.charAt(y+r)===e){r++}y+=r-1;return Math.floor(r/(t||1))>1};var u=function(e,t,r,n){var a=""+t;if(c(e,n)){while(a.length<r){a="0"+a}}return a};var f=function(e,t,r,n){return c(e)?n[t]:r[t]};var d=this;var h=function(e){return typeof i==="function"?i.call(d,e,c("m")):g(u("m",e.month(),2))};var p=function(e,t){if(t){return typeof s==="function"?s.call(d,e):s[e.month()-d.minMonth]}else{return typeof o==="function"?o.call(d,e):o[e.month()-d.minMonth]}};var v=this.local.digits;var g=function(e){return t.localNumbers&&v?v(e):e};var m="";var _=false;for(var y=0;y<n.length;y++){if(_){if(n.charAt(y)==="'"&&!c("'")){_=false}else{m+=n.charAt(y)}}else{switch(n.charAt(y)){case"d":m+=g(u("d",e.day(),2));break;case"D":m+=f("D",e.dayOfWeek(),r,a);break;case"o":m+=u("o",e.dayOfYear(),3);break;case"w":m+=u("w",e.weekOfYear(),2);break;case"m":m+=h(e);break;case"M":m+=p(e,c("M"));break;case"y":m+=c("y",2)?e.year():(e.year()%100<10?"0":"")+e.year()%100;break;case"Y":c("Y",2);m+=e.formatYear();break;case"J":m+=e.toJD();break;case"@":m+=(e.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":m+=(e.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":if(c("'")){m+="'"}else{_=true}break;default:m+=n.charAt(y)}}}return m},parseDate:function(n,o,e){if(o==null){throw C.local.invalidArguments||C.regionalOptions[""].invalidArguments}o=typeof o==="object"?o.toString():o+"";if(o===""){return null}n=n||this.local.dateFormat;e=e||{};var t=e.shortYearCutoff||this.shortYearCutoff;t=typeof t!=="string"?t:this.today().year()%100+parseInt(t,10);var r=e.dayNamesShort||this.local.dayNamesShort;var a=e.dayNames||this.local.dayNames;var i=e.parseMonth||this.local.parseMonth;var s=e.monthNumbers||this.local.monthNumbers;var l=e.monthNamesShort||this.local.monthNamesShort;var c=e.monthNames||this.local.monthNames;var u=-1;var f=-1;var d=-1;var h=-1;var p=-1;var v=false;var g=false;var m=function(e,t){var r=1;while(k+r<n.length&&n.charAt(k+r)===e){r++}k+=r-1;return Math.floor(r/(t||1))>1};var _=function(e,t){var r=m(e,t);var n=[2,3,r?4:2,r?4:2,10,11,20]["oyYJ@!".indexOf(e)+1];var a=new RegExp("^-?\\d{1,"+n+"}");var i=o.substring(T).match(a);if(!i){throw(C.local.missingNumberAt||C.regionalOptions[""].missingNumberAt).replace(/\{0\}/,T)}T+=i[0].length;return parseInt(i[0],10)};var y=this;var b=function(){if(typeof s==="function"){m("m");var e=s.call(y,o.substring(T));T+=e.length;return e}return _("m")};var x=function(e,t,r,n){var a=m(e,n)?r:t;for(var i=0;i<a.length;i++){if(o.substr(T,a[i].length).toLowerCase()===a[i].toLowerCase()){T+=a[i].length;return i+y.minMonth}}throw(C.local.unknownNameAt||C.regionalOptions[""].unknownNameAt).replace(/\{0\}/,T)};var w=function(){if(typeof c==="function"){var e=m("M")?c.call(y,o.substring(T)):l.call(y,o.substring(T));T+=e.length;return e}return x("M",l,c)};var A=function(){if(o.charAt(T)!==n.charAt(k)){throw(C.local.unexpectedLiteralAt||C.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,T)}T++};var T=0;for(var k=0;k<n.length;k++){if(g){if(n.charAt(k)==="'"&&!m("'")){g=false}else{A()}}else{switch(n.charAt(k)){case"d":h=_("d");break;case"D":x("D",r,a);break;case"o":p=_("o");break;case"w":_("w");break;case"m":d=b();break;case"M":d=w();break;case"y":var M=k;v=!m("y",2);k=M;f=_("y",2);break;case"Y":f=_("Y",2);break;case"J":u=_("J")+.5;if(o.charAt(T)==="."){T++;_("J")}break;case"@":u=_("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":u=_("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":T=o.length;break;case"'":if(m("'")){A()}else{g=true}break;default:A()}}}if(T<o.length){throw C.local.unexpectedText||C.regionalOptions[""].unexpectedText}if(f===-1){f=this.today().year()}else if(f<100&&v){f+=t===-1?1900:this.today().year()-this.today().year()%100-(f<=t?0:100)}if(typeof d==="string"){d=i.call(this,f,d)}if(p>-1){d=1;h=p;for(var S=this.daysInMonth(f,d);h>S;S=this.daysInMonth(f,d)){d++;h-=S}}return u>-1?this.fromJD(u):this.newDate(f,d,h)},determineDate:function(e,t,a,i,o){if(a&&typeof a!=="object"){o=i;i=a;a=null}if(typeof i!=="string"){o=i;i=""}var s=this;var r=function(e){try{return s.parseDate(i,e,o)}catch(e){}e=e.toLowerCase();var t=(e.match(/^c/)&&a?a.newDate():null)||s.today();var r=/([+-]?[0-9]+)\s*(d|w|m|y)?/g;var n=r.exec(e);while(n){t.add(parseInt(n[1],10),n[2]||"d");n=r.exec(e)}return t};t=t?t.newDate():null;e=e==null?t:typeof e==="string"?r(e):typeof e==="number"?isNaN(e)||e===Infinity||e===-Infinity?t:s.today().add(e,"d"):s.newDate(e);return e}})},{"./main":135,"object-assign":71}],137:[function(e,t,r){"use strict";t.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:true},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:true}]},{}],138:[function(e,t,r){"use strict";var n=e("./arrow_paths");var a=e("../../plots/font_attributes");var i=e("../../plots/cartesian/constants");var o=e("../../plot_api/plot_template").templatedArray;var s=e("../../constants/axis_placeable_objects");function l(e){return["In order for absolute positioning of the arrow to work, *a"+e+"ref* must be exactly the same as *"+e+"ref*, otherwise *a"+e+"ref* will revert to *pixel* (explained next).","For relative positioning, *a"+e+"ref* can be set to *pixel*,","in which case the *a"+e+"* value is specified in pixels","relative to *"+e+"*.","Absolute positioning is useful","for trendline annotations which should continue to indicate","the correct trend when zoomed. Relative positioning is useful","for specifying the text offset for an annotated point."].join(" ")}function c(e,t,r){return["Sets the",e,"component of the arrow tail about the arrow head.","If `a"+e+"ref` is `pixel`, a positive (negative)","component corresponds to an arrow pointing","from",r,"to",t,"("+t,"to",r+").","If `a"+e+"ref` is not `pixel` and is exactly the same as `"+e+"ref`,","this is an absolute value on that axis,","like `"+e+"`, specified in the same coordinates as `"+e+"ref`."].join(" ")}t.exports=o("annotation",{visible:{valType:"boolean",dflt:true,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:a({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:true,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:n.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:n.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",i.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",i.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[false,"onoff","onout"],dflt:false,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:a({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":261,"../../plot_api/plot_template":320,"../../plots/cartesian/constants":338,"../../plots/font_attributes":360,"./arrow_paths":137}],139:[function(e,t,r){"use strict";var a=e("../../lib");var b=e("../../plots/cartesian/axes");var i=e("./draw").draw;t.exports=function e(t){var r=t._fullLayout;var n=a.filterVisible(r.annotations);if(n.length&&t._fullData.length){return a.syncOrAsync([i,o],t)}};function o(i){var e=i._fullLayout;a.filterVisible(e.annotations).forEach(function(e){var t=b.getFromId(i,e.xref);var r=b.getFromId(i,e.yref);var n=b.getRefType(e.xref);var a=b.getRefType(e.yref);e._extremes={};if(n==="range")s(e,t);if(a==="range")s(e,r)})}function s(e,t){var r=t._id;var n=r.charAt(0);var a=e[n];var i=e["a"+n];var o=e[n+"ref"];var s=e["a"+n+"ref"];var l=e["_"+n+"padplus"];var c=e["_"+n+"padminus"];var u={x:1,y:-1}[n]*e[n+"shift"];var f=3*e.arrowsize*e.arrowwidth||0;var d=f+u;var h=f-u;var p=3*e.startarrowsize*e.arrowwidth||0;var v=p+u;var g=p-u;var m;if(s===o){var _=b.findExtremes(t,[t.r2c(a)],{ppadplus:d,ppadminus:h});var y=b.findExtremes(t,[t.r2c(i)],{ppadplus:Math.max(l,v),ppadminus:Math.max(c,g)});m={min:[_.min[0],y.min[0]],max:[_.max[0],y.max[0]]}}else{v=i?v+i:v;g=i?g-i:g;m=b.findExtremes(t,[t.r2c(a)],{ppadplus:Math.max(l,d,v),ppadminus:Math.max(c,h,g)})}e._extremes[r]=m}},{"../../lib":285,"../../plots/cartesian/axes":331,"./draw":144}],140:[function(e,t,r){"use strict";var c=e("../../lib");var u=e("../../registry");var f=e("../../plot_api/plot_template").arrayEditor;t.exports={hasClickToShow:n,onClick:a};function n(e,t){var r=d(e,t);return r.on.length>0||r.explicitOff.length>0}function a(e,t){var r=d(e,t);var n=r.on;var a=r.off.concat(r.explicitOff);var i={};var o=e._fullLayout.annotations;var s,l;if(!(n.length||a.length))return;for(s=0;s<n.length;s++){l=f(e.layout,"annotations",o[n[s]]);l.modifyItem("visible",true);c.extendFlat(i,l.getUpdateObj())}for(s=0;s<a.length;s++){l=f(e.layout,"annotations",o[a[s]]);l.modifyItem("visible",false);c.extendFlat(i,l.getUpdateObj())}return u.call("update",e,{},i)}function d(e,t){var r=e._fullLayout.annotations;var n=[];var a=[];var i=[];var o=(t||[]).length;var s,l,c,u,f,d,h,p;for(s=0;s<r.length;s++){c=r[s];u=c.clicktoshow;if(u){for(l=0;l<o;l++){f=t[l];d=f.xaxis;h=f.yaxis;if(d._id===c.xref&&h._id===c.yref&&d.d2r(f.x)===v(c._xclick,d)&&h.d2r(f.y)===v(c._yclick,h)){if(c.visible){if(u==="onout")p=a;else p=i}else{p=n}p.push(s);break}}if(l===o){if(c.visible&&u==="onout")a.push(s)}}}return{on:n,off:a,explicitOff:i}}function v(e,t){return t.type==="log"?t.l2r(e):t.d2r(e)}},{"../../lib":285,"../../plot_api/plot_template":320,"../../registry":373}],141:[function(e,t,r){"use strict";var _=e("../../lib");var y=e("../color");t.exports=function e(t,r,n,a){a("opacity");var i=a("bgcolor");var o=a("bordercolor");var s=y.opacity(o);a("borderpad");var l=a("borderwidth");var c=a("showarrow");a("text",c?" ":n._dfltTitle.annotation);a("textangle");_.coerceFont(a,"font",n.font);a("width");a("align");var u=a("height");if(u)a("valign");if(c){var f=a("arrowside");var d;var h;if(f.indexOf("end")!==-1){d=a("arrowhead");h=a("arrowsize")}if(f.indexOf("start")!==-1){a("startarrowhead",d);a("startarrowsize",h)}a("arrowcolor",s?r.bordercolor:y.defaultLine);a("arrowwidth",(s&&l||1)*2);a("standoff");a("startstandoff")}var p=a("hovertext");var v=n.hoverlabel||{};if(p){var g=a("hoverlabel.bgcolor",v.bgcolor||(y.opacity(i)?y.rgb(i):y.defaultLine));var m=a("hoverlabel.bordercolor",v.bordercolor||y.contrast(g));_.coerceFont(a,"hoverlabel.font",{family:v.font.family,size:v.font.size,color:v.font.color||m})}a("captureevents",!!p)}},{"../../lib":285,"../color":155}],142:[function(e,t,r){"use strict";var h=e("fast-isnumeric");var p=e("../../lib/to_log_range");t.exports=function e(t,n,r,a){n=n||{};var i=r==="log"&&n.type==="linear";var o=r==="linear"&&n.type==="log";if(!(i||o))return;var s=t._fullLayout.annotations;var l=n._id.charAt(0);var c;var u;function f(e){var t=c[e];var r=null;if(i)r=p(t,n.range);else r=Math.pow(10,t);if(!h(r))r=null;a(u+e,r)}for(var d=0;d<s.length;d++){c=s[d];u="annotations["+d+"].";if(c[l+"ref"]===n._id)f(l);if(c["a"+l+"ref"]===n._id)f("a"+l)}}},{"../../lib/to_log_range":309,"fast-isnumeric":31}],143:[function(e,t,r){"use strict";var y=e("../../lib");var b=e("../../plots/cartesian/axes");var n=e("../../plots/array_container_defaults");var x=e("./common_defaults");var w=e("./attributes");t.exports=function e(t,r){n(t,r,{name:"annotations",handleItemDefaults:a})};function a(r,n,e){function t(e,t){return y.coerce(r,n,w,e,t)}var a=t("visible");var i=t("clicktoshow");if(!(a||i))return;x(r,n,e,t);var o=n.showarrow;var s=["x","y"];var l=[-10,-30];var c={_fullLayout:e};for(var u=0;u<2;u++){var f=s[u];var d=b.coerceRef(r,n,c,f,"","paper");if(d!=="paper"){var h=b.getFromId(c,d);h._annIndices.push(n._index)}b.coercePosition(n,c,t,d,f,.5);if(o){var p="a"+f;var v=b.coerceRef(r,n,c,p,"pixel",["pixel","paper"]);if(v!=="pixel"&&v!==d){v=n[p]="pixel"}var g=v==="pixel"?l[u]:.4;b.coercePosition(n,c,t,v,p,g)}t(f+"anchor");t(f+"shift")}y.noneOrAll(r,n,["x","y"]);if(o){y.noneOrAll(r,n,["ax","ay"])}if(i){var m=t("xclick");var _=t("yclick");n._xclick=m===undefined?n.x:b.cleanPosition(m,c,n.xref);n._yclick=_===undefined?n.y:b.cleanPosition(_,c,n.yref)}}},{"../../lib":285,"../../plots/array_container_defaults":326,"../../plots/cartesian/axes":331,"./attributes":138,"./common_defaults":141}],144:[function(e,t,r){"use strict";var u=e("@plotly/d3");var ge=e("../../registry");var n=e("../../plots/plots");var me=e("../../lib");var _e=me.strTranslate;var ye=e("../../plots/cartesian/axes");var be=e("../color");var xe=e("../drawing");var f=e("../fx");var we=e("../../lib/svg_text_utils");var Ae=e("../../lib/setcursor");var Te=e("../dragelement");var d=e("../../plot_api/plot_template").arrayEditor;var ke=e("./draw_arrow_head");t.exports={draw:a,drawOne:i,drawRaw:o};function a(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var r=0;r<t.annotations.length;r++){if(t.annotations[r].visible){i(e,r)}}return n.previousPromises(e)}function i(e,t){var r=e._fullLayout;var n=r.annotations[t]||{};var a=ye.getFromId(e,n.xref);var i=ye.getFromId(e,n.yref);if(a)a.setScale();if(i)i.setScale();o(e,n,t,false,a,i)}function Me(e,t,r,n,a){var i=a[r];var o=a[r+"ref"];var s=r.indexOf("y")!==-1;var l=ye.getRefType(o)==="domain";var c=s?n.h:n.w;if(e){if(l){return i+(s?-t:t)/e._length}else{return e.p2r(e.r2p(i)+t)}}else{return i+(s?-t:t)/c}}function o(Y,G,r,W,X,Z){var J=Y._fullLayout;var $=Y._fullLayout._size;var Q=Y._context.edits;var e,t;if(W){e="annotation-"+W;t=W+".annotations"}else{e="annotation";t="annotations"}var n=d(Y.layout,t,G);var K=n.modifyBase;var ee=n.modifyItem;var te=n.getUpdateObj;J._infolayer.selectAll("."+e+'[data-index="'+r+'"]').remove();var re="clip"+J._uid+"_ann"+r;if(!G._input||G.visible===false){u.selectAll("#"+re).remove();return}var ne={x:{},y:{}};var ae=+G.textangle||0;var ie=J._infolayer.append("g").classed(e,true).attr("data-index",String(r)).style("opacity",G.opacity);var oe=ie.append("g").classed("annotation-text-g",true);var se=Q[G.showarrow?"annotationTail":"annotationPosition"];var a=G.captureevents||Q.annotationText||se;function le(e){var t={index:r,annotation:G._input,fullAnnotation:G,event:e};if(W){t.subplotId=W}return t}var ce=oe.append("g").style("pointer-events",a?"all":null).call(Ae,"pointer").on("click",function(){Y._dragging=false;Y.emit("plotly_clickannotation",le(u.event))});if(G.hovertext){ce.on("mouseover",function(){var e=G.hoverlabel;var t=e.font;var r=this.getBoundingClientRect();var n=Y.getBoundingClientRect();f.loneHover({x0:r.left-n.left,x1:r.right-n.left,y:(r.top+r.bottom)/2-n.top,text:G.hovertext,color:e.bgcolor,borderColor:e.bordercolor,fontFamily:t.family,fontSize:t.size,fontColor:t.color},{container:J._hoverlayer.node(),outerContainer:J._paper.node(),gd:Y})}).on("mouseout",function(){f.loneUnhover(J._hoverlayer.node())})}var ue=G.borderwidth;var i=G.borderpad;var fe=ue+i;var de=ce.append("rect").attr("class","bg").style("stroke-width",ue+"px").call(be.stroke,G.bordercolor).call(be.fill,G.bgcolor);var he=G.width||G.height;var pe=J._topclips.selectAll("#"+re).data(he?[0]:[]);pe.enter().append("clipPath").classed("annclip",true).attr("id",re).append("rect");pe.exit().remove();var o=G.font;var s=J._meta?me.templateString(G.text,J._meta):G.text;var ve=ce.append("text").classed("annotation-text",true).text(s);function l(e){e.call(xe.font,o).attr({"text-anchor":{left:"start",right:"end"}[G.align]||"middle"});we.convertToTspans(e,Y,c);return e}function c(){var e=ve.selectAll("a");if(e.size()===1&&e.text()===ve.text()){var t=ce.insert("a",":first-child").attr({"xlink:xlink:href":e.attr("xlink:href"),"xlink:xlink:show":e.attr("xlink:show")}).style({cursor:"pointer"});t.node().appendChild(de.node())}var r=ce.select(".annotation-text-math-group");var n=!r.empty();var a=xe.bBox((n?r:ve).node());var i=a.width;var o=a.height;var s=G.width||i;var l=G.height||o;var c=Math.round(s+2*fe);var u=Math.round(l+2*fe);function f(e,t){if(t==="auto"){if(e<1/3)t="left";else if(e>2/3)t="right";else t="center"}return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t]}var d=false;var h=["x","y"];for(var p=0;p<h.length;p++){var v=h[p];var g=G[v+"ref"]||v;var m=G["a"+v+"ref"];var _={x:X,y:Z}[v];var y=(ae+(v==="x"?0:-90))*Math.PI/180;var b=c*Math.cos(y);var x=u*Math.sin(y);var w=Math.abs(b)+Math.abs(x);var A=G[v+"anchor"];var T=G[v+"shift"]*(v==="x"?1:-1);var k=ne[v];var M;var S;var C;var L;var E;var D=ye.getRefType(g);if(_&&D!=="domain"){var O=_.r2fraction(G[v]);if(O<0||O>1){if(m===g){O=_.r2fraction(G["a"+v]);if(O<0||O>1){d=true}}else{d=true}}M=_._offset+_.r2p(G[v]);L=.5}else{var P=D==="domain";if(v==="x"){C=G[v];M=P?_._offset+_._length*C:M=$.l+$.w*C}else{C=1-G[v];M=P?_._offset+_._length*C:M=$.t+$.h*C}L=G.showarrow?.5:C}if(G.showarrow){k.head=M;var I=G["a"+v];E=b*f(.5,G.xanchor)-x*f(.5,G.yanchor);if(m===g){var R=ye.getRefType(m);if(R==="domain"){if(v==="y"){I=1-I}k.tail=_._offset+_._length*I}else if(R==="paper"){if(v==="y"){I=1-I;k.tail=$.t+$.h*I}else{k.tail=$.l+$.w*I}}else{k.tail=_._offset+_.r2p(I)}S=E}else{k.tail=M+I;S=E+I}k.text=k.tail+E;var z=J[v==="x"?"width":"height"];if(g==="paper"){k.head=me.constrain(k.head,1,z-1)}if(m==="pixel"){var N=-Math.max(k.tail-3,k.text);var F=Math.min(k.tail+3,k.text)-z;if(N>0){k.tail+=N;k.text+=N}else if(F>0){k.tail-=F;k.text-=F}}k.tail+=T;k.head+=T}else{E=w*f(L,A);S=E;k.text=M+E}k.text+=T;E+=T;S+=T;G["_"+v+"padplus"]=w/2+S;G["_"+v+"padminus"]=w/2-S;G["_"+v+"size"]=w;G["_"+v+"shift"]=E}if(d){ce.remove();return}var j=0;var B=0;if(G.align!=="left"){j=(s-i)*(G.align==="center"?.5:1)}if(G.valign!=="top"){B=(l-o)*(G.valign==="middle"?.5:1)}if(n){r.select("svg").attr({x:fe+j-1,y:fe+B}).call(xe.setClipUrl,he?re:null,Y)}else{var H=fe+B-a.top;var U=fe+j-a.left;ve.call(we.positionText,U,H).call(xe.setClipUrl,he?re:null,Y)}pe.select("rect").call(xe.setRect,fe,fe,s,l);de.call(xe.setRect,ue/2,ue/2,c-ue,u-ue);ce.call(xe.setTranslate,Math.round(ne.x.text-c/2),Math.round(ne.y.text-u/2));oe.attr({transform:"rotate("+ae+","+ne.x.text+","+ne.y.text+")"});var V=function(e,t){ie.selectAll(".annotation-arrow-g").remove();var r=ne.x.head;var n=ne.y.head;var a=ne.x.tail+e;var i=ne.y.tail+t;var o=ne.x.text+e;var s=ne.y.text+t;var l=me.rotationXYMatrix(ae,o,s);var c=me.apply2DTransform(l);var u=me.apply2DTransform2(l);var f=+de.attr("width");var d=+de.attr("height");var h=o-.5*f;var p=h+f;var v=s-.5*d;var g=v+d;var m=[[h,v,h,g],[h,g,p,g],[p,g,p,v],[p,v,h,v]].map(u);if(m.reduce(function(e,t){return e^!!me.segmentsIntersect(r,n,r+1e6,n+1e6,t[0],t[1],t[2],t[3])},false)){return}m.forEach(function(e){var t=me.segmentsIntersect(a,i,r,n,e[0],e[1],e[2],e[3]);if(t){a=t.x;i=t.y}});var _=G.arrowwidth;var y=G.arrowcolor;var b=G.arrowside;var x=ie.append("g").style({opacity:be.opacity(y)}).classed("annotation-arrow-g",true);var w=x.append("path").attr("d","M"+a+","+i+"L"+r+","+n).style("stroke-width",_+"px").call(be.stroke,be.rgb(y));ke(w,b,G);if(Q.annotationPosition&&w.node().parentNode&&!W){var A=r;var T=n;if(G.standoff){var k=Math.sqrt(Math.pow(r-a,2)+Math.pow(n-i,2));A+=G.standoff*(a-r)/k;T+=G.standoff*(i-n)/k}var M=x.append("path").classed("annotation-arrow",true).classed("anndrag",true).classed("cursor-move",true).attr({d:"M3,3H-3V-3H3ZM0,0L"+(a-A)+","+(i-T),transform:_e(A,T)}).style("stroke-width",_+6+"px").call(be.stroke,"rgba(0,0,0,0)").call(be.fill,"rgba(0,0,0,0)");var S,C;Te.init({element:M.node(),gd:Y,prepFn:function(){var e=xe.getTranslate(ce);S=e.x;C=e.y;if(X&&X.autorange){K(X._name+".autorange",true)}if(Z&&Z.autorange){K(Z._name+".autorange",true)}},moveFn:function(e,t){var r=c(S,C);var n=r[0]+e;var a=r[1]+t;ce.call(xe.setTranslate,n,a);ee("x",Me(X,e,"x",$,G));ee("y",Me(Z,t,"y",$,G));if(G.axref===G.xref){ee("ax",Me(X,e,"ax",$,G))}if(G.ayref===G.yref){ee("ay",Me(Z,t,"ay",$,G))}x.attr("transform",_e(e,t));oe.attr({transform:"rotate("+ae+","+n+","+a+")"})},doneFn:function(){ge.call("_guiRelayout",Y,te());var e=document.querySelector(".js-notes-box-panel");if(e)e.redraw(e.selectedObj)}})}};if(G.showarrow)V(0,0);if(se){var q;Te.init({element:ce.node(),gd:Y,prepFn:function(){q=oe.attr("transform")},moveFn:function(e,t){var r="pointer";if(G.showarrow){if(G.axref===G.xref){ee("ax",Me(X,e,"ax",$,G))}else{ee("ax",G.ax+e)}if(G.ayref===G.yref){ee("ay",Me(Z,t,"ay",$.w,G))}else{ee("ay",G.ay+t)}V(e,t)}else if(!W){var n,a;if(X){n=Me(X,e,"x",$,G)}else{var i=G._xsize/$.w;var o=G.x+(G._xshift-G.xshift)/$.w-i/2;n=Te.align(o+e/$.w,i,0,1,G.xanchor)}if(Z){a=Me(Z,t,"y",$,G)}else{var s=G._ysize/$.h;var l=G.y-(G._yshift+G.yshift)/$.h-s/2;a=Te.align(l-t/$.h,s,0,1,G.yanchor)}ee("x",n);ee("y",a);if(!X||!Z){r=Te.getCursor(X?.5:n,Z?.5:a,G.xanchor,G.yanchor)}}else return;oe.attr({transform:_e(e,t)+q});Ae(ce,r)},clickFn:function(e,t){if(G.captureevents){Y.emit("plotly_clickannotation",le(t))}},doneFn:function(){Ae(ce);ge.call("_guiRelayout",Y,te());var e=document.querySelector(".js-notes-box-panel");if(e)e.redraw(e.selectedObj)}})}}if(Q.annotationText){ve.call(we.makeEditable,{delegate:ce,gd:Y}).call(l).on("edit",function(e){G.text=e;this.call(l);ee("text",e);if(X&&X.autorange){K(X._name+".autorange",true)}if(Z&&Z.autorange){K(Z._name+".autorange",true)}ge.call("_guiRelayout",Y,te())})}else ve.call(l)}},{"../../lib":285,"../../lib/setcursor":305,"../../lib/svg_text_utils":307,"../../plot_api/plot_template":320,"../../plots/cartesian/axes":331,"../../plots/plots":366,"../../registry":373,"../color":155,"../dragelement":174,"../drawing":177,"../fx":195,"./draw_arrow_head":145,"@plotly/d3":20}],145:[function(e,t,r){"use strict";var O=e("@plotly/d3");var P=e("../color");var I=e("./arrow_paths");var n=e("../../lib");var R=n.strScale;var z=n.strRotate;var N=n.strTranslate;t.exports=function e(a,t,i){var o=a.node();var r=I[i.arrowhead||0];var n=I[i.startarrowhead||0];var s=(i.arrowwidth||1)*(i.arrowsize||1);var l=(i.arrowwidth||1)*(i.startarrowsize||1);var c=t.indexOf("start")>=0;var u=t.indexOf("end")>=0;var f=r.backoff*s+i.standoff;var d=n.backoff*l+i.startstandoff;var h,p,v,g;if(o.nodeName==="line"){h={x:+a.attr("x1"),y:+a.attr("y1")};p={x:+a.attr("x2"),y:+a.attr("y2")};var m=h.x-p.x;var _=h.y-p.y;v=Math.atan2(_,m);g=v+Math.PI;if(f&&d){if(f+d>Math.sqrt(m*m+_*_)){E();return}}if(f){if(f*f>m*m+_*_){E();return}var y=f*Math.cos(v);var b=f*Math.sin(v);p.x+=y;p.y+=b;a.attr({x2:p.x,y2:p.y})}if(d){if(d*d>m*m+_*_){E();return}var x=d*Math.cos(v);var w=d*Math.sin(v);h.x-=x;h.y-=w;a.attr({x1:h.x,y1:h.y})}}else if(o.nodeName==="path"){var A=o.getTotalLength();var T="";if(A<f+d){E();return}var k=o.getPointAtLength(0);var M=o.getPointAtLength(.1);v=Math.atan2(k.y-M.y,k.x-M.x);h=o.getPointAtLength(Math.min(d,A));T="0px,"+d+"px,";var S=o.getPointAtLength(A);var C=o.getPointAtLength(A-.1);g=Math.atan2(S.y-C.y,S.x-C.x);p=o.getPointAtLength(Math.max(0,A-f));var L=T?d+f:f;T+=A-L+"px,"+A+"px";a.style("stroke-dasharray",T)}function E(){a.style("stroke-dasharray","0px,100px")}function D(e,t,r,n){if(!e.path)return;if(e.noRotate)r=0;O.select(o.parentNode).append("path").attr({class:a.attr("class"),d:e.path,transform:N(t.x,t.y)+z(r*180/Math.PI)+R(n)}).style({fill:P.rgb(i.arrowcolor),"stroke-width":0})}if(c)D(n,h,v,l);if(u)D(r,p,g,s)}},{"../../lib":285,"../color":155,"./arrow_paths":137,"@plotly/d3":20}],146:[function(e,t,r){"use strict";var n=e("./draw");var a=e("./click");t.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:n.draw,drawOne:n.drawOne,drawRaw:n.drawRaw,hasClickToShow:a.hasClickToShow,onClick:a.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":344,"./attributes":138,"./calc_autorange":139,"./click":140,"./convert_coords":142,"./defaults":143,"./draw":144}],147:[function(e,t,r){"use strict";var n=e("../annotations/attributes");var a=e("../../plot_api/edit_types").overrideAll;var i=e("../../plot_api/plot_template").templatedArray;t.exports=a(i("annotation",{visible:n.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:n.xanchor,xshift:n.xshift,yanchor:n.yanchor,yshift:n.yshift,text:n.text,textangle:n.textangle,font:n.font,width:n.width,height:n.height,opacity:n.opacity,align:n.align,valign:n.valign,bgcolor:n.bgcolor,bordercolor:n.bordercolor,borderpad:n.borderpad,borderwidth:n.borderwidth,showarrow:n.showarrow,arrowcolor:n.arrowcolor,arrowhead:n.arrowhead,startarrowhead:n.startarrowhead,arrowside:n.arrowside,arrowsize:n.arrowsize,startarrowsize:n.startarrowsize,arrowwidth:n.arrowwidth,standoff:n.standoff,startstandoff:n.startstandoff,hovertext:n.hovertext,hoverlabel:n.hoverlabel,captureevents:n.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":313,"../../plot_api/plot_template":320,"../annotations/attributes":138}],148:[function(e,t,r){"use strict";var o=e("../../lib");var s=e("../../plots/cartesian/axes");t.exports=function e(t){var r=t.fullSceneLayout;var n=r.annotations;for(var a=0;a<n.length;a++){i(n[a],t)}t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function i(e,t){var r=t.fullSceneLayout;var n=r.domain;var a=t.fullLayout._size;var i={pdata:null,type:"linear",autorange:false,range:[-Infinity,Infinity]};e._xa={};o.extendFlat(e._xa,i);s.setConvert(e._xa);e._xa._offset=a.l+n.x[0]*a.w;e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*a.w*(n.x[1]-n.x[0])};e._ya={};o.extendFlat(e._ya,i);s.setConvert(e._ya);e._ya._offset=a.t+(1-n.y[1])*a.h;e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*a.h*(n.y[1]-n.y[0])}}},{"../../lib":285,"../../plots/cartesian/axes":331}],149:[function(e,t,r){"use strict";var s=e("../../lib");var l=e("../../plots/cartesian/axes");var a=e("../../plots/array_container_defaults");var c=e("../annotations/common_defaults");var u=e("./attributes");t.exports=function e(t,r,n){a(t,r,{name:"annotations",handleItemDefaults:i,fullLayout:n.fullLayout})};function i(r,n,a,e){function i(e,t){return s.coerce(r,n,u,e,t)}function t(e){var t=e+"axis";var r={_fullLayout:{}};r._fullLayout[t]=a[t];return l.coercePosition(n,r,i,e,e,.5)}var o=i("visible");if(!o)return;c(r,n,e.fullLayout,i);t("x");t("y");t("z");s.noneOrAll(r,n,["x","y","z"]);n.xref="x";n.yref="y";n.zref="z";i("xanchor");i("yanchor");i("xshift");i("yshift");if(n.showarrow){n.axref="pixel";n.ayref="pixel";i("ax",-10);i("ay",-30);s.noneOrAll(r,n,["ax","ay"])}}},{"../../lib":285,"../../plots/array_container_defaults":326,"../../plots/cartesian/axes":331,"../annotations/common_defaults":141,"./attributes":147}],150:[function(e,t,r){"use strict";var h=e("../annotations/draw").drawRaw;var p=e("../../plots/gl3d/project");var v=["x","y","z"];t.exports=function e(t){var r=t.fullSceneLayout;var n=t.dataScale;var a=r.annotations;for(var i=0;i<a.length;i++){var o=a[i];var s=false;for(var l=0;l<3;l++){var c=v[l];var u=o[c];var f=r[c+"axis"];var d=f.r2fraction(u);if(d<0||d>1){s=true;break}}if(s){t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+i+'"]').remove()}else{o._pdata=p(t.glplot.cameraParams,[r.xaxis.r2l(o.x)*n[0],r.yaxis.r2l(o.y)*n[1],r.zaxis.r2l(o.z)*n[2]]);h(t.graphDiv,o,i,t.id,o._xa,o._ya)}}}},{"../../plots/gl3d/project":363,"../annotations/draw":144}],151:[function(e,t,r){"use strict";var s=e("../../registry");var l=e("../../lib");t.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:n,convert:e("./convert"),draw:e("./draw")};function n(e,t){var r=s.subplotsRegistry.gl3d;if(!r)return;var n=r.attrRegex;var a=Object.keys(e);for(var i=0;i<a.length;i++){var o=a[i];if(n.test(o)&&(e[o].annotations||[]).length){l.pushUnique(t._basePlotModules,r);l.pushUnique(t._subplots.gl3d,o)}}}},{"../../lib":285,"../../registry":373,"./attributes":147,"./convert":148,"./defaults":149,"./draw":150}],152:[function(e,t,r){"use strict";t.exports=e("world-calendars/dist/main");e("world-calendars/dist/plus");e("world-calendars/dist/calendars/chinese");e("world-calendars/dist/calendars/coptic");e("world-calendars/dist/calendars/discworld");e("world-calendars/dist/calendars/ethiopian");e("world-calendars/dist/calendars/hebrew");e("world-calendars/dist/calendars/islamic");e("world-calendars/dist/calendars/julian");e("world-calendars/dist/calendars/mayan");e("world-calendars/dist/calendars/nanakshahi");e("world-calendars/dist/calendars/nepali");e("world-calendars/dist/calendars/persian");e("world-calendars/dist/calendars/taiwan");e("world-calendars/dist/calendars/thai");e("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":121,"world-calendars/dist/calendars/coptic":122,"world-calendars/dist/calendars/discworld":123,"world-calendars/dist/calendars/ethiopian":124,"world-calendars/dist/calendars/hebrew":125,"world-calendars/dist/calendars/islamic":126,"world-calendars/dist/calendars/julian":127,"world-calendars/dist/calendars/mayan":128,"world-calendars/dist/calendars/nanakshahi":129,"world-calendars/dist/calendars/nepali":130,"world-calendars/dist/calendars/persian":131,"world-calendars/dist/calendars/taiwan":132,"world-calendars/dist/calendars/thai":133,"world-calendars/dist/calendars/ummalqura":134,"world-calendars/dist/main":135,"world-calendars/dist/plus":136}],153:[function(e,t,r){"use strict";var n=e("./calendars");var i=e("../../lib");var a=e("../../constants/numerical");var f=a.EPOCHJD;var d=a.ONEDAY;var o={valType:"enumerated",values:Object.keys(n.calendars),editType:"calc",dflt:"gregorian"};var s=function(e,t,r,n){var a={};a[r]=o;return i.coerce(e,t,a,r,n)};var l=function(e,t,r,n){for(var a=0;a<r.length;a++){s(e,t,r[a]+"calendar",n.calendar)}};var c={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"};var u={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"};var h={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]};var p="##";var v={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:p,w:p,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function g(e,t,r){var n=Math.floor((t+.05)/d)+f;var a=_(r).fromJD(n);var i=0;var o,s,l,c,u;while((i=e.indexOf("%",i))!==-1){o=e.charAt(i+1);if(o==="0"||o==="-"||o==="_"){l=3;s=e.charAt(i+2);if(o==="_")o="-"}else{s=o;o="0";l=2}c=v[s];if(!c){i+=l}else{if(c===p)u=p;else u=a.formatDate(c[o]);e=e.substr(0,i)+u+e.substr(i+l);i+=u.length}}return e}var m={};function _(e){var t=m[e];if(t)return t;t=m[e]=n.instance(e);return t}function y(e){return i.extendFlat({},o,{description:e})}function b(e){return"Sets the calendar system to use with `"+e+"` date data."}var x={xcalendar:y(b("x"))};var w=i.extendFlat({},x,{ycalendar:y(b("y"))});var A=i.extendFlat({},w,{zcalendar:y(b("z"))});var T=y(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));t.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:w,bar:w,box:w,heatmap:w,contour:w,histogram:w,histogram2d:w,histogram2dcontour:w,scatter3d:A,surface:A,mesh3d:A,scattergl:w,ohlc:x,candlestick:x},layout:{calendar:y(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:T},yaxis:{calendar:T},scene:{xaxis:{calendar:T},yaxis:{calendar:T},zaxis:{calendar:T}},polar:{radialaxis:{calendar:T}}},transforms:{filter:{valuecalendar:y(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:y(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:o,handleDefaults:s,handleTraceDefaults:l,CANONICAL_SUNDAY:u,CANONICAL_TICK:c,DFLTRANGE:h,getCal:_,worldCalFmt:g}},{"../../constants/numerical":265,"../../lib":285,"./calendars":152}],154:[function(e,t,r){"use strict";r.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];r.defaultLine="#444";r.lightLine="#eee";r.background="#fff";r.borderLine="#BEC8D9";r.lightFraction=100*(14-4)/(15-4)},{}],155:[function(e,t,r){"use strict";var o=e("tinycolor2");var s=e("fast-isnumeric");var l=e("../../lib/array").isTypedArray;var c=t.exports={};var n=e("./attributes");c.defaults=n.defaults;var i=c.defaultLine=n.defaultLine;c.lightLine=n.lightLine;var u=c.background=n.background;c.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"};c.rgb=function(e){return c.tinyRGB(o(e))};c.opacity=function(e){return e?o(e).getAlpha():0};c.addOpacity=function(e,t){var r=o(e).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+t+")"};c.combine=function(e,t){var r=o(e).toRgb();if(r.a===1)return o(e).toRgbString();var n=o(t||u).toRgb();var a=n.a===1?n:{r:255*(1-n.a)+n.r*n.a,g:255*(1-n.a)+n.g*n.a,b:255*(1-n.a)+n.b*n.a};var i={r:a.r*(1-r.a)+r.r*r.a,g:a.g*(1-r.a)+r.g*r.a,b:a.b*(1-r.a)+r.b*r.a};return o(i).toRgbString()};c.contrast=function(e,t,r){var n=o(e);if(n.getAlpha()!==1)n=o(c.combine(e,u));var a=n.isDark()?t?n.lighten(t):u:r?n.darken(r):i;return a.toString()};c.stroke=function(e,t){var r=o(t);e.style({stroke:c.tinyRGB(r),"stroke-opacity":r.getAlpha()})};c.fill=function(e,t){var r=o(t);e.style({fill:c.tinyRGB(r),"fill-opacity":r.getAlpha()})};c.clean=function(e){if(!e||typeof e!=="object")return;var t=Object.keys(e);var r,n,a,i;for(r=0;r<t.length;r++){a=t[r];i=e[a];if(a.substr(a.length-5)==="color"){if(Array.isArray(i)){for(n=0;n<i.length;n++)i[n]=f(i[n])}else e[a]=f(i)}else if(a.substr(a.length-10)==="colorscale"&&Array.isArray(i)){for(n=0;n<i.length;n++){if(Array.isArray(i[n]))i[n][1]=f(i[n][1])}}else if(Array.isArray(i)){var o=i[0];if(!Array.isArray(o)&&o&&typeof o==="object"){for(n=0;n<i.length;n++)c.clean(i[n])}}else if(i&&typeof i==="object"&&!l(i))c.clean(i)}};function f(e){if(s(e)||typeof e!=="string")return e;var t=e.trim();if(t.substr(0,3)!=="rgb")return e;var r=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return e;var n=r[1].trim().split(/\s*[\s,]\s*/);var a=t.charAt(3)==="a"&&n.length===4;if(!a&&n.length!==3)return e;for(var i=0;i<n.length;i++){if(!n[i].length)return e;n[i]=Number(n[i]);if(!(n[i]>=0)){return e}if(i===3){if(n[i]>1)n[i]=1}else if(n[i]>=1){return e}}var o=Math.round(n[0]*255)+", "+Math.round(n[1]*255)+", "+Math.round(n[2]*255);if(a)return"rgba("+o+", "+n[3]+")";return"rgb("+o+")"}},{"../../lib/array":271,"./attributes":154,"fast-isnumeric":31,tinycolor2:119}],156:[function(e,t,r){"use strict";var n=e("../../plots/cartesian/layout_attributes");var a=e("../../plots/font_attributes");var i=e("../../lib/extend").extendFlat;var o=e("../../plot_api/edit_types").overrideAll;t.exports=o({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:n.linecolor,outlinewidth:n.linewidth,bordercolor:n.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:i({},n.ticks,{dflt:""}),ticklabeloverflow:i({},n.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside bottom","inside bottom"],dflt:"outside"},ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,tickfont:a({}),tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,tickprefix:n.tickprefix,showtickprefix:n.showtickprefix,ticksuffix:n.ticksuffix,showticksuffix:n.showticksuffix,separatethousands:n.separatethousands,exponentformat:n.exponentformat,minexponent:n.minexponent,showexponent:n.showexponent,title:{text:{valType:"string"},font:a({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:a({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":279,"../../plot_api/edit_types":313,"../../plots/cartesian/layout_attributes":346,"../../plots/font_attributes":360}],157:[function(e,t,r){"use strict";t.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],158:[function(e,t,r){"use strict";var p=e("../../lib");var v=e("../../plot_api/plot_template");var g=e("../../plots/cartesian/tick_value_defaults");var m=e("../../plots/cartesian/tick_mark_defaults");var _=e("../../plots/cartesian/tick_label_defaults");var y=e("./attributes");t.exports=function e(t,r,n){var a=v.newContainer(r,"colorbar");var i=t.colorbar||{};function o(e,t){return p.coerce(i,a,y,e,t)}var s=o("thicknessmode");o("thickness",s==="fraction"?30/(n.width-n.margin.l-n.margin.r):30);var l=o("lenmode");o("len",l==="fraction"?1:n.height-n.margin.t-n.margin.b);o("x");o("xanchor");o("xpad");o("y");o("yanchor");o("ypad");p.noneOrAll(i,a,["x","y"]);o("outlinecolor");o("outlinewidth");o("bordercolor");o("borderwidth");o("bgcolor");var c=o("ticklabelposition");o("ticklabeloverflow",c.indexOf("inside")!==-1?"hide past domain":"hide past div");g(i,a,o,"linear");var u=n.font;var f={outerTicks:false,font:u};if(c.indexOf("inside")!==-1){f.bgColor="black"}_(i,a,o,"linear",f);m(i,a,o,"linear",f);o("title.text",n._dfltTitle.colorbar);var d=a.tickfont;var h=p.extendFlat({},d,{color:u.color,size:p.bigFont(d.size)});p.coerceFont(o,"title.font",h);o("title.side")}},{"../../lib":285,"../../plot_api/plot_template":320,"../../plots/cartesian/tick_label_defaults":353,"../../plots/cartesian/tick_mark_defaults":354,"../../plots/cartesian/tick_value_defaults":355,"./attributes":156}],159:[function(e,t,r){"use strict";var U=e("@plotly/d3");var V=e("tinycolor2");var q=e("../../plots/plots");var c=e("../../registry");var Y=e("../../plots/cartesian/axes");var u=e("../dragelement");var G=e("../../lib");var W=G.strTranslate;var X=e("../../lib/extend").extendFlat;var f=e("../../lib/setcursor");var Z=e("../drawing");var J=e("../color");var $=e("../titles");var Q=e("../../lib/svg_text_utils");var y=e("../colorscale/helpers").flipScale;var l=e("../../plots/cartesian/axis_defaults");var d=e("../../plots/cartesian/position_defaults");var h=e("../../plots/cartesian/layout_attributes");var n=e("../../constants/alignment");var K=n.LINE_SPACING;var ee=n.FROM_TL;var te=n.FROM_BR;var re=e("./constants").cn;function a(n){var e=n._fullLayout;var t=e._infolayer.selectAll("g."+re.colorbar).data(i(n),function(e){return e._id});t.enter().append("g").attr("class",function(e){return e._id}).classed(re.colorbar,true);t.each(function(e){var t=U.select(this);G.ensureSingle(t,"rect",re.cbbg);G.ensureSingle(t,"g",re.cbfills);G.ensureSingle(t,"g",re.cblines);G.ensureSingle(t,"g",re.cbaxis,function(e){e.classed(re.crisp,true)});G.ensureSingle(t,"g",re.cbtitleunshift,function(e){e.append("g").classed(re.cbtitle,true)});G.ensureSingle(t,"rect",re.cboutline);var r=o(t,e,n);if(r&&r.then)(n._promises||[]).push(r);if(n._context.edits.colorbarPosition){s(t,e,n)}});t.exit().each(function(e){q.autoMargin(n,e._id)}).remove();t.order()}function i(e){var t=e._fullLayout;var r=e.calcdata;var n=[];var a;var i;var o;var s;function l(e){return X(e,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function c(){if(typeof s.calc==="function"){s.calc(e,o,a)}else{a._fillgradient=i.reversescale?y(i.colorscale):i.colorscale;a._zrange=[i[s.min],i[s.max]]}}for(var u=0;u<r.length;u++){var f=r[u];o=f[0].trace;var d=o._module.colorbar;if(o.visible===true&&d){var h=Array.isArray(d);var p=h?d:[d];for(var v=0;v<p.length;v++){s=p[v];var g=s.container;i=g?o[g]:o;if(i&&i.showscale){a=l(i.colorbar);a._id="cb"+o.uid+(h&&g?"-"+g:"");a._traceIndex=o.index;a._propPrefix=(g?g+".":"")+"colorbar.";a._meta=o._meta;c();n.push(a)}}}}for(var m in t._colorAxes){i=t[m];if(i.showscale){var _=t._colorAxes[m];a=l(i.colorbar);a._id="cb"+m;a._propPrefix=m+".colorbar.";a._meta=t._meta;s={min:"cmin",max:"cmax"};if(_[0]!=="heatmap"){o=_[1];s.calc=o._module.colorbar.calc}c();n.push(a)}}return n}function o(d,h,p){var a=p._fullLayout;var v=a._size;var e=h._fillcolor;var g=h._line;var t=h.title;var m=t.side;var _=h._zrange||U.extent((typeof e==="function"?e:g.color).domain());var y=typeof g.color==="function"?g.color:function(){return g.color};var b=typeof e==="function"?e:function(){return e};var r=h._levels;var n=ne(p,h,_);var x=n.fill;var w=n.line;var A=Math.round(h.thickness*(h.thicknessmode==="fraction"?v.w:1));var i=A/v.w;var o=Math.round(h.len*(h.lenmode==="fraction"?v.h:1));var s=o/v.h;var l=h.xpad/v.w;var T=(h.borderwidth+h.outlinewidth)/2;var c=h.ypad/v.h;var k=Math.round(h.x*v.w+h.xpad);var u=h.x-i*({middle:.5,right:1}[h.xanchor]||0);var f=h.y+s*(({top:-.5,bottom:.5}[h.yanchor]||0)-.5);var M=Math.round(v.h*(1-f));var S=M-o;h._lenFrac=s;h._thickFrac=i;h._xLeftFrac=u;h._yBottomFrac=f;var C=h._axis=ae(p,h,_);C.position=h.x+l+i;if(["top","bottom"].indexOf(m)!==-1){C.title.side=m;C.titlex=h.x+l;C.titley=f+(t.side==="top"?s-c:c)}if(g.color&&h.tickmode==="auto"){C.tickmode="linear";C.tick0=r.start;var L=r.size;var E=G.constrain((M-S)/50,4,15)+1;var D=(_[1]-_[0])/((h.nticks||E)*L);if(D>1){var O=Math.pow(10,Math.floor(Math.log(D)/Math.LN10));L*=O*G.roundUp(D/O,[2,5,10]);if((Math.abs(r.start)/r.size+1e-6)%1<2e-6){C.tick0=0}}C.dtick=L}C.domain=[f+c,f+s-c];C.setScale();d.attr("transform",W(Math.round(v.l),Math.round(v.t)));var P=d.select("."+re.cbtitleunshift).attr("transform",W(-Math.round(v.l),-Math.round(v.t)));var I=d.select("."+re.cbaxis);var R;var z=0;function N(e,t){var r={propContainer:C,propName:h._propPrefix+"title",traceIndex:h._traceIndex,_meta:h._meta,placeholder:a._dfltTitle.colorbar,containerGroup:d.select("."+re.cbtitle)};var n=e.charAt(0)==="h"?e.substr(1):"h"+e;d.selectAll("."+n+",."+n+"-math-group").remove();$.draw(p,e,X(r,t||{}))}function F(){if(["top","bottom"].indexOf(m)!==-1){var e=v.l+(h.x+l)*v.w;var t=C.title.font.size;var r;if(m==="top"){r=(1-(f+s-c))*v.h+v.t+3+t*.75}else{r=(1-(f+c))*v.h+v.t-3-t*.25}N(C._id+"title",{attributes:{x:e,y:r,"text-anchor":"start"}})}}function j(){if(["top","bottom"].indexOf(m)===-1){var e=C.title.font.size;var t=C._offset+C._length/2;var r=v.l+(C.position||0)*v.w+(C.side==="right"?10+e*(C.showticklabels?1:.5):-10-e*(C.showticklabels?.5:0));N("h"+C._id+"title",{avoid:{selection:U.select(p).selectAll("g."+C._id+"tick"),side:m,offsetLeft:v.l,offsetTop:0,maxShift:a.width},attributes:{x:r,y:t,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}function B(){if(["top","bottom"].indexOf(m)!==-1){var e=d.select("."+re.cbtitle);var t=e.select("text");var r=[-h.outlinewidth/2,h.outlinewidth/2];var n=e.select(".h"+C._id+"title-math-group").node();var a=15.6;if(t.node()){a=parseInt(t.node().style.fontSize,10)*K}if(n){z=Z.bBox(n).height;if(z>a){r[1]-=(z-a)/2}}else if(t.node()&&!t.classed(re.jsPlaceholder)){z=Z.bBox(t.node()).height}if(z){z+=5;if(m==="top"){C.domain[1]-=z/v.h;r[1]*=-1}else{C.domain[0]+=z/v.h;var i=Q.lineCount(t);r[1]+=(1-i)*a}e.attr("transform",W(r[0],r[1]));C.setScale()}}d.selectAll("."+re.cbfills+",."+re.cblines).attr("transform",W(0,Math.round(v.h*(1-C.domain[1]))));I.attr("transform",W(0,Math.round(-v.t)));var o=d.select("."+re.cbfills).selectAll("rect."+re.cbfill).attr("style","").data(x);o.enter().append("rect").classed(re.cbfill,true).style("stroke","none");o.exit().remove();var s=_.map(C.c2p).map(Math.round).sort(function(e,t){return e-t});o.each(function(e,t){var r=[t===0?_[0]:(x[t]+x[t-1])/2,t===x.length-1?_[1]:(x[t]+x[t+1])/2].map(C.c2p).map(Math.round);r[1]=G.constrain(r[1]+(r[1]>r[0])?1:-1,s[0],s[1]);var n=U.select(this).attr({x:k,width:Math.max(A,2),y:U.min(r),height:Math.max(U.max(r)-U.min(r),2)});if(h._fillgradient){Z.gradient(n,p,h._id,"vertical",h._fillgradient,"fill")}else{var a=b(e).replace("e-","");n.attr("fill",V(a).toHexString())}});var l=d.select("."+re.cblines).selectAll("path."+re.cbline).data(g.color&&g.width?w:[]);l.enter().append("path").classed(re.cbline,true);l.exit().remove();l.each(function(e){U.select(this).attr("d","M"+k+","+(Math.round(C.c2p(e))+g.width/2%1)+"h"+A).call(Z.lineGroupStyle,g.width,y(e),g.dash)});I.selectAll("g."+C._id+"tick,path").remove();var c=k+A+(h.outlinewidth||0)/2-(h.ticks==="outside"?1:0);var u=Y.calcTicks(C);var f=Y.getTickSigns(C)[2];Y.drawTicks(p,C,{vals:C.ticks==="inside"?Y.clipEnds(C,u):u,layer:I,path:Y.makeTickPath(C,c,f),transFn:Y.makeTransTickFn(C)});return Y.drawLabels(p,C,{vals:u,layer:I,transFn:Y.makeTransTickLabelFn(C),labelFns:Y.makeLabelFns(C,c)})}function H(){var e=A+h.outlinewidth/2;if(C.ticklabelposition.indexOf("inside")===-1){e+=Z.bBox(I.node()).width}R=P.select("text");if(R.node()&&!R.classed(re.jsPlaceholder)){var t=P.select(".h"+C._id+"title-math-group").node();var r;if(t&&["top","bottom"].indexOf(m)!==-1){r=Z.bBox(t).width}else{r=Z.bBox(P.node()).right-k-v.l}e=Math.max(e,r)}var n=2*h.xpad+e+h.borderwidth+h.outlinewidth/2;var a=M-S;d.select("."+re.cbbg).attr({x:k-h.xpad-(h.borderwidth+h.outlinewidth)/2,y:S-T,width:Math.max(n,2),height:Math.max(a+2*T,2)}).call(J.fill,h.bgcolor).call(J.stroke,h.bordercolor).style("stroke-width",h.borderwidth);d.selectAll("."+re.cboutline).attr({x:k,y:S+h.ypad+(m==="top"?z:0),width:Math.max(A,2),height:Math.max(a-2*h.ypad-z,2)}).call(J.stroke,h.outlinecolor).style({fill:"none","stroke-width":h.outlinewidth});var i=({center:.5,right:1}[h.xanchor]||0)*n;d.attr("transform",W(v.l-i,v.t));var o={};var s=ee[h.yanchor];var l=te[h.yanchor];if(h.lenmode==="pixels"){o.y=h.y;o.t=a*s;o.b=a*l}else{o.t=o.b=0;o.yt=h.y+h.len*s;o.yb=h.y-h.len*l}var c=ee[h.xanchor];var u=te[h.xanchor];if(h.thicknessmode==="pixels"){o.x=h.x;o.l=n*c;o.r=n*u}else{var f=n-A;o.l=f*c;o.r=f*u;o.xl=h.x-h.thickness*c;o.xr=h.x+h.thickness*u}q.autoMargin(p,h._id,o)}return G.syncOrAsync([q.previousPromises,F,B,j,q.previousPromises,H],p)}function s(n,a,t){var e=t._fullLayout;var i=e._size;var o,s,l;u.init({element:n.node(),gd:t,prepFn:function(){o=n.attr("transform");f(n)},moveFn:function(e,t){n.attr("transform",o+W(e,t));s=u.align(a._xLeftFrac+e/i.w,a._thickFrac,0,1,a.xanchor);l=u.align(a._yBottomFrac-t/i.h,a._lenFrac,0,1,a.yanchor);var r=u.getCursor(s,l,a.xanchor,a.yanchor);f(n,r)},doneFn:function(){f(n);if(s!==undefined&&l!==undefined){var e={};e[a._propPrefix+"x"]=s;e[a._propPrefix+"y"]=l;if(a._traceIndex!==undefined){c.call("_guiRestyle",t,e,a._traceIndex)}else{c.call("_guiRelayout",t,e)}}}})}function ne(e,t,r){var n=t._levels;var a=[];var i=[];var o;var s;var l=n.end+n.size/100;var c=n.size;var u=1.001*r[0]-.001*r[1];var f=1.001*r[1]-.001*r[0];for(s=0;s<1e5;s++){o=n.start+s*c;if(c>0?o>=l:o<=l)break;if(o>u&&o<f)a.push(o)}if(t._fillgradient){i=[0]}else if(typeof t._fillcolor==="function"){var d=t._filllevels;if(d){l=d.end+d.size/100;c=d.size;for(s=0;s<1e5;s++){o=d.start+s*c;if(c>0?o>=l:o<=l)break;if(o>r[0]&&o<r[1])i.push(o)}}else{i=a.map(function(e){return e-n.size/2});i.push(i[i.length-1]+n.size)}}else if(t._fillcolor&&typeof t._fillcolor==="string"){i=[0]}if(n.size<0){a.reverse();i.reverse()}return{line:a,fill:i}}function ae(e,t,r){var n=e._fullLayout;var a={type:"linear",range:r,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:true,anchor:"free",side:"right",position:1};var i={type:"linear",_id:"y"+t._id};var o={letter:"y",font:n.font,noHover:true,noTickson:true,noTicklabelmode:true,calendar:n.calendar};function s(e,t){return G.coerce(a,i,h,e,t)}l(a,i,s,o,n);d(a,i,s,o);return i}t.exports={draw:a}},{"../../constants/alignment":260,"../../lib":285,"../../lib/extend":279,"../../lib/setcursor":305,"../../lib/svg_text_utils":307,"../../plots/cartesian/axes":331,"../../plots/cartesian/axis_defaults":333,"../../plots/cartesian/layout_attributes":346,"../../plots/cartesian/position_defaults":349,"../../plots/plots":366,"../../registry":373,"../color":155,"../colorscale/helpers":166,"../dragelement":174,"../drawing":177,"../titles":253,"./constants":157,"@plotly/d3":20,tinycolor2:119}],160:[function(e,t,r){"use strict";var n=e("../../lib");t.exports=function e(t){return n.isPlainObject(t.colorbar)}},{"../../lib":285}],161:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"colorbar",attributes:e("./attributes"),supplyDefaults:e("./defaults"),draw:e("./draw").draw,hasColorbar:e("./has_colorbar")}},{"./attributes":156,"./defaults":158,"./draw":159,"./has_colorbar":160}],162:[function(e,t,r){"use strict";var T=e("../colorbar/attributes");var k=e("../../lib/regex").counter;var M=e("./scales.js").scales;var n=Object.keys(M);function S(e){return"`"+e+"`"}t.exports=function e(t,r){t=t||"";r=r||{};var n=r.cLetter||"c";var a="onlyIfNumerical"in r?r.onlyIfNumerical:Boolean(t);var i="noScale"in r?r.noScale:t==="marker.line";var o="showScaleDflt"in r?r.showScaleDflt:n==="z";var s=typeof r.colorscaleDflt==="string"?M[r.colorscaleDflt]:null;var l=r.editTypeOverride||"";var c=t?t+".":"";var u,f;if("colorAttr"in r){u=r.colorAttr;f=r.colorAttr}else{u={z:"z",c:"color"}[n];f="in "+S(c+u)}var d=a?" Has an effect only if "+f+"is set to a numerical array.":"";var h=n+"auto";var p=n+"min";var v=n+"max";var g=n+"mid";var m=S(c+h);var _=S(c+p);var y=S(c+v);var b=_+" and "+y;var x={};x[p]=x[v]=undefined;var w={};w[h]=false;var A={};if(u==="color"){A.color={valType:"color",arrayOk:true,editType:l||"style"};if(r.anim){A.color.anim=true}}A[h]={valType:"boolean",dflt:true,editType:"calc",impliedEdits:x};A[p]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:w};A[v]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:w};A[g]={valType:"number",dflt:null,editType:"calc",impliedEdits:x};A.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:false}};A.autocolorscale={valType:"boolean",dflt:r.autoColorDflt===false?false:true,editType:"calc",impliedEdits:{colorscale:undefined}};A.reversescale={valType:"boolean",dflt:false,editType:"plot"};if(!i){A.showscale={valType:"boolean",dflt:o,editType:"calc"};A.colorbar=T}if(!r.noColorAxis){A.coloraxis={valType:"subplotid",regex:k("coloraxis"),dflt:null,editType:"calc"}}return A}},{"../../lib/regex":301,"../colorbar/attributes":156,"./scales.js":170}],163:[function(e,t,r){"use strict";var g=e("fast-isnumeric");var m=e("../../lib");var _=e("./helpers").extractOpts;t.exports=function e(t,r,n){var a=t._fullLayout;var i=n.vals;var o=n.containerStr;var s=o?m.nestedProperty(r,o).get():r;var l=_(s);var c=l.auto!==false;var u=l.min;var f=l.max;var d=l.mid;var h=function(){return m.aggNums(Math.min,null,i)};var p=function(){return m.aggNums(Math.max,null,i)};if(u===undefined){u=h()}else if(c){if(s._colorAx&&g(u)){u=Math.min(u,h())}else{u=h()}}if(f===undefined){f=p()}else if(c){if(s._colorAx&&g(f)){f=Math.max(f,p())}else{f=p()}}if(c&&d!==undefined){if(f-d>d-u){u=d-(f-d)}else if(f-d<d-u){f=d+(d-u)}}if(u===f){u-=.5;f+=.5}l._sync("min",u);l._sync("max",f);if(l.autocolorscale){var v;if(u*f<0)v=a.colorscale.diverging;else if(u>=0)v=a.colorscale.sequential;else v=a.colorscale.sequentialminus;l._sync("colorscale",v)}}},{"../../lib":285,"./helpers":166,"fast-isnumeric":31}],164:[function(e,t,r){"use strict";var u=e("../../lib");var f=e("./helpers").hasColorscale;var d=e("./helpers").extractOpts;t.exports=function e(t,i){function o(e,t){var r=e["_"+t];if(r!==undefined){e[t]=r}}function r(e,t){var r=t.container?u.nestedProperty(e,t.container).get():e;if(r){if(r.coloraxis){r._colorAx=i[r.coloraxis]}else{var n=d(r);var a=n.auto;if(a||n.min===undefined){o(r,t.min)}if(a||n.max===undefined){o(r,t.max)}if(n.autocolorscale){o(r,"colorscale")}}}}for(var n=0;n<t.length;n++){var a=t[n];var s=a._module.colorbar;if(s){if(Array.isArray(s)){for(var l=0;l<s.length;l++){r(a,s[l])}}else{r(a,s)}}if(f(a,"marker.line")){r(a,{container:"marker.line",min:"cmin",max:"cmax"})}}for(var c in i._colorAxes){r(i[c],{min:"cmin",max:"cmax"})}}},{"../../lib":285,"./helpers":166}],165:[function(e,t,r){"use strict";var M=e("fast-isnumeric");var S=e("../../lib");var C=e("../colorbar/has_colorbar");var L=e("../colorbar/defaults");var E=e("./scales").isValid;var D=e("../../registry").traceIs;function O(e,t){var r=t.slice(0,t.length-1);return t?S.nestedProperty(e,r).get()||{}:e}t.exports=function e(t,r,n,a,i){var o=i.prefix;var s=i.cLetter;var l="_module"in r;var c=O(t,o);var u=O(r,o);var f=O(r._template||{},o)||{};var d=function(){delete t.coloraxis;delete r.coloraxis;return e(t,r,n,a,i)};if(l){var h=n._colorAxes||{};var p=a(o+"coloraxis");if(p){var v=D(r,"contour")&&S.nestedProperty(r,"contours.coloring").get()||"heatmap";var g=h[p];if(g){g[2].push(d);if(g[0]!==v){g[0]=false;S.warn(["Ignoring coloraxis:",p,"setting","as it is linked to incompatible colorscales."].join(" "))}}else{h[p]=[v,r,[d]]}return}}var m=c[s+"min"];var _=c[s+"max"];var y=M(m)&&M(_)&&m<_;var b=a(o+s+"auto",!y);if(b){a(o+s+"mid")}else{a(o+s+"min");a(o+s+"max")}var x=c.colorscale;var w=f.colorscale;var A;if(x!==undefined)A=!E(x);if(w!==undefined)A=!E(w);a(o+"autocolorscale",A);a(o+"colorscale");a(o+"reversescale");if(o!=="marker.line."){var T;if(o&&l)T=C(c);var k=a(o+"showscale",T);if(k){if(o&&f)u._template=f;L(c,u,n)}}}},{"../../lib":285,"../../registry":373,"../colorbar/defaults":158,"../colorbar/has_colorbar":160,"./scales":170,"fast-isnumeric":31}],166:[function(e,t,r){"use strict";var d=e("@plotly/d3");var h=e("tinycolor2");var p=e("fast-isnumeric");var s=e("../../lib");var v=e("../color");var l=e("./scales").isValid;function n(e,t,r){var n=t?s.nestedProperty(e,t).get()||{}:e;var a=n[r||"color"];var i=false;if(s.isArrayOrTypedArray(a)){for(var o=0;o<a.length;o++){if(p(a[o])){i=true;break}}}return s.isPlainObject(n)&&(i||n.showscale===true||p(n.cmin)&&p(n.cmax)||l(n.colorscale)||s.isPlainObject(n.colorbar))}var c=["showscale","autocolorscale","colorscale","reversescale","colorbar"];var u=["min","max","mid","auto"];function f(e){var t=e._colorAx;var n=t?t:e;var r={};var a;var i,o;for(i=0;i<c.length;i++){o=c[i];r[o]=n[o]}if(t){a="c";for(i=0;i<u.length;i++){o=u[i];r[o]=n["c"+o]}}else{var s;for(i=0;i<u.length;i++){o=u[i];s="c"+o;if(s in n){r[o]=n[s];continue}s="z"+o;if(s in n){r[o]=n[s]}}a=s.charAt(0)}r._sync=function(e,t){var r=u.indexOf(e)!==-1?a+e:e;n[r]=n["_"+r]=t};return r}function a(e){var t=f(e);var r=t.min;var n=t.max;var a=t.reversescale?g(t.colorscale):t.colorscale;var i=a.length;var o=new Array(i);var s=new Array(i);for(var l=0;l<i;l++){var c=a[l];o[l]=r+c[0]*(n-r);s[l]=c[1]}return{domain:o,range:s}}function g(e){var t=e.length;var r=new Array(t);for(var n=t-1,a=0;n>=0;n--,a++){var i=e[n];r[a]=[1-i[0],i[1]]}return r}function i(e,t){t=t||{};var r=e.domain;var n=e.range;var a=n.length;var i=new Array(a);for(var o=0;o<a;o++){var s=h(n[o]).toRgb();i[o]=[s.r,s.g,s.b,s.a]}var l=d.scale.linear().domain(r).range(i).clamp(true);var c=t.noNumericCheck;var u=t.returnArray;var f;if(c&&u){f=l}else if(c){f=function(e){return m(l(e))}}else if(u){f=function(e){if(p(e))return l(e);else if(h(e).isValid())return e;else return v.defaultLine}}else{f=function(e){if(p(e))return m(l(e));else if(h(e).isValid())return e;else return v.defaultLine}}f.domain=l.domain;f.range=function(){return n};return f}function o(e,t){return i(a(e),t)}function m(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return h(t).toRgbString()}t.exports={hasColorscale:n,extractOpts:f,extractScale:a,flipScale:g,makeColorScaleFunc:i,makeColorScaleFuncFromTrace:o}},{"../../lib":285,"../color":155,"./scales":170,"@plotly/d3":20,"fast-isnumeric":31,tinycolor2:119}],167:[function(e,t,r){"use strict";var n=e("./scales");var a=e("./helpers");t.exports={moduleType:"component",name:"colorscale",attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),handleDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc"),scales:n.scales,defaultScale:n.defaultScale,getScale:n.get,isValidScale:n.isValid,hasColorscale:a.hasColorscale,extractOpts:a.extractOpts,extractScale:a.extractScale,flipScale:a.flipScale,makeColorScaleFunc:a.makeColorScaleFunc,makeColorScaleFuncFromTrace:a.makeColorScaleFuncFromTrace}},{"./attributes":162,"./calc":163,"./cross_trace_defaults":164,"./defaults":165,"./helpers":166,"./layout_attributes":168,"./layout_defaults":169,"./scales":170}],168:[function(e,t,r){"use strict";var n=e("../../lib/extend").extendFlat;var a=e("./attributes");var i=e("./scales").scales;var o="Note that `autocolorscale` must be true for this attribute to work.";t.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:i.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:i.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:i.RdBu,editType:"calc"}},coloraxis:n({_isSubplotObj:true,editType:"calc"},a("",{colorAttr:"corresponding trace color array(s)",noColorAxis:true,showScaleDflt:true}))}},{"../../lib/extend":279,"./attributes":162,"./scales":170}],169:[function(e,t,r){"use strict";var f=e("../../lib");var d=e("../../plot_api/plot_template");var h=e("./layout_attributes");var p=e("./defaults");t.exports=function e(r,n){function t(e,t){return f.coerce(r,n,h,e,t)}t("colorscale.sequential");t("colorscale.sequentialminus");t("colorscale.diverging");var a=n._colorAxes;var i,o;function s(e,t){return f.coerce(i,o,h.coloraxis,e,t)}for(var l in a){var c=a[l];if(c[0]){i=r[l]||{};o=d.newContainer(n,l,"coloraxis");o._name=l;p(i,o,n,s,{prefix:"",cLetter:"c"})}else{for(var u=0;u<c[2].length;u++){c[2][u]()}delete n._colorAxes[l]}}}},{"../../lib":285,"../../plot_api/plot_template":320,"./defaults":165,"./layout_attributes":168}],170:[function(e,t,r){"use strict";var a=e("tinycolor2");var n={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]};var i=n.RdBu;function o(t,r){if(!r)r=i;if(!t)return r;function e(){try{t=n[t]||JSON.parse(t)}catch(e){t=r}}if(typeof t==="string"){e();if(typeof t==="string")e()}if(!s(t))return r;return t}function s(e){var t=0;if(!Array.isArray(e)||e.length<2)return false;if(!e[0]||!e[e.length-1])return false;if(+e[0][0]!==0||+e[e.length-1][0]!==1)return false;for(var r=0;r<e.length;r++){var n=e[r];if(n.length!==2||+n[0]<t||!a(n[1]).isValid()){return false}t=+n[0]}return true}function l(e){if(n[e]!==undefined)return true;else return s(e)}t.exports={scales:n,defaultScale:i,get:o,isValid:l}},{tinycolor2:119}],171:[function(e,t,r){"use strict";t.exports=function e(t,r,n,a,i){var o=(t-n)/(a-n);var s=o+r/(a-n);var l=(o+s)/2;if(i==="left"||i==="bottom")return o;if(i==="center"||i==="middle")return l;if(i==="right"||i==="top")return s;if(o<2/3-l)return o;if(s>4/3-l)return s;return l}},{}],172:[function(e,t,r){"use strict";var i=e("../../lib");var o=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];t.exports=function e(t,r,n,a){if(n==="left")t=0;else if(n==="center")t=1;else if(n==="right")t=2;else t=i.constrain(Math.floor(t*3),0,2);if(a==="bottom")r=0;else if(a==="middle")r=1;else if(a==="top")r=2;else r=i.constrain(Math.floor(r*3),0,2);return o[r][t]}},{"../../lib":285}],173:[function(e,t,r){"use strict";r.selectMode=function(e){return e==="lasso"||e==="select"};r.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"};r.openMode=function(e){return e==="drawline"||e==="drawopenpath"};r.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"};r.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"};r.selectingOrDrawing=function(e){return r.freeMode(e)||r.rectMode(e)}},{}],174:[function(e,t,r){"use strict";var n=e("mouse-event-offset");var y=e("has-hover");var b=e("has-passive-events");var x=e("../../lib").removeElement;var w=e("../../plots/cartesian/constants");var A=t.exports={};A.align=e("./align");A.getCursor=e("./cursor");var a=e("./unhover");A.unhover=a.wrapped;A.unhoverRaw=a.raw;A.init=function e(o){var s=o.gd;var a=1;var i=s._context.doubleClickDelay;var l=o.element;var c,u,r,f,d,h,p,v;if(!s._mouseDownTime)s._mouseDownTime=0;l.style.pointerEvents="all";l.onmousedown=n;if(!b){l.ontouchstart=n}else{if(l._ontouchstart){l.removeEventListener("touchstart",l._ontouchstart)}l._ontouchstart=n;l.addEventListener("touchstart",n,{passive:false})}function t(e,t,r){if(Math.abs(e)<r)e=0;if(Math.abs(t)<r)t=0;return[e,t]}var g=o.clampFn||t;function n(e){s._dragged=false;s._dragging=true;var t=k(e);c=t[0];u=t[1];p=e.target;h=e;v=e.buttons===2||e.ctrlKey;if(typeof e.clientX==="undefined"&&typeof e.clientY==="undefined"){e.clientX=c;e.clientY=u}r=(new Date).getTime();if(r-s._mouseDownTime<i){a+=1}else{a=1;s._mouseDownTime=r}if(o.prepFn)o.prepFn(e,c,u);if(y&&!v){d=T();d.style.cursor=window.getComputedStyle(l).cursor}else if(!y){d=document;f=window.getComputedStyle(document.documentElement).cursor;document.documentElement.style.cursor=window.getComputedStyle(l).cursor}document.addEventListener("mouseup",_);document.addEventListener("touchend",_);if(o.dragmode!==false){e.preventDefault();document.addEventListener("mousemove",m);document.addEventListener("touchmove",m,{passive:false})}return}function m(e){e.preventDefault();var t=k(e);var r=o.minDrag||w.MINDRAG;var n=g(t[0]-c,t[1]-u,r);var a=n[0];var i=n[1];if(a||i){s._dragged=true;A.unhover(s,e)}if(s._dragged&&o.moveFn&&!v){s._dragdata={element:l,dx:a,dy:i};o.moveFn(a,i)}return}function _(t){delete s._dragdata;if(o.dragmode!==false){t.preventDefault();document.removeEventListener("mousemove",m);document.removeEventListener("touchmove",m)}document.removeEventListener("mouseup",_);document.removeEventListener("touchend",_);if(y){x(d)}else if(f){d.documentElement.style.cursor=f;f=null}if(!s._dragging){s._dragged=false;return}s._dragging=false;if((new Date).getTime()-s._mouseDownTime>i){a=Math.max(a-1,1)}if(s._dragged){if(o.doneFn)o.doneFn()}else{if(o.clickFn)o.clickFn(a,h);if(!v){var r;try{r=new MouseEvent("click",t)}catch(e){var n=k(t);r=document.createEvent("MouseEvents");r.initMouseEvent("click",t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,n[0],n[1],t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}p.dispatchEvent(r)}}s._dragging=false;s._dragged=false;return}};function T(){var e=document.createElement("div");e.className="dragcover";var t=e.style;t.position="fixed";t.left=0;t.right=0;t.top=0;t.bottom=0;t.zIndex=999999999;t.background="none";document.body.appendChild(e);return e}A.coverSlip=T;function k(e){return n(e.changedTouches?e.changedTouches[0]:e,document.body)}},{"../../lib":285,"../../plots/cartesian/constants":338,"./align":171,"./cursor":172,"./unhover":175,"has-hover":62,"has-passive-events":63,"mouse-event-offset":69}],175:[function(e,t,r){"use strict";var i=e("../../lib/events");var n=e("../../lib/throttle");var a=e("../../lib/dom").getGraphDiv;var o=e("../fx/constants");var s=t.exports={};s.wrapped=function(e,t,r){e=a(e);if(e._fullLayout){n.clear(e._fullLayout._uid+o.HOVERID)}s.raw(e,t,r)};s.raw=function e(t,r){var n=t._fullLayout;var a=t._hoverdata;if(!r)r={};if(r.target&&!t._dragged&&i.triggerHandler(t,"plotly_beforehover",r)===false){return}n._hoverlayer.selectAll("g").remove();n._hoverlayer.selectAll("line").remove();n._hoverlayer.selectAll("circle").remove();t._hoverdata=undefined;if(r.target&&a){t.emit("plotly_unhover",{event:r,points:a})}}},{"../../lib/dom":277,"../../lib/events":278,"../../lib/throttle":308,"../fx/constants":189}],176:[function(e,t,r){"use strict";r.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"};r.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:true,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:true,editType:"style"},fgcolor:{valType:"color",arrayOk:true,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:true,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:true,editType:"style"},editType:"style"}},{}],177:[function(e,t,r){"use strict";var S=e("@plotly/d3");var o=e("fast-isnumeric");var v=e("tinycolor2");var b=e("../../registry");var C=e("../color");var a=e("../colorscale");var L=e("../../lib");var f=L.strTranslate;var g=e("../../lib/svg_text_utils");var n=e("../../constants/xmlns_namespaces");var i=e("../../constants/alignment");var d=i.LINE_SPACING;var x=e("../../constants/interactions").DESELECTDIM;var s=e("../../traces/scatter/subtypes");var l=e("../../traces/scatter/make_bubble_size_func");var m=e("../../components/fx/helpers").appendArrayPointValue;var E=t.exports={};E.font=function(e,t,r,n){if(L.isPlainObject(t)){n=t.color;r=t.size;t=t.family}if(t)e.style("font-family",t);if(r+1)e.style("font-size",r+"px");if(n)e.call(C.fill,n)};E.setPosition=function(e,t,r){e.attr("x",t).attr("y",r)};E.setSize=function(e,t,r){e.attr("width",t).attr("height",r)};E.setRect=function(e,t,r,n,a){e.call(E.setPosition,t,r).call(E.setSize,n,a)};E.translatePoint=function(e,t,r,n){var a=r.c2p(e.x);var i=n.c2p(e.y);if(o(a)&&o(i)&&t.node()){if(t.node().nodeName==="text"){t.attr("x",a).attr("y",i)}else{t.attr("transform",f(a,i))}}else{return false}return true};E.translatePoints=function(e,r,n){e.each(function(e){var t=S.select(this);E.translatePoint(e,t,r,n)})};E.hideOutsideRangePoint=function(e,t,r,n,a,i){t.attr("display",r.isPtWithinRange(e,a)&&n.isPtWithinRange(e,i)?null:"none")};E.hideOutsideRangePoints=function(i,e){if(!e._hasClipOnAxisFalse)return;var o=e.xaxis;var s=e.yaxis;i.each(function(e){var t=e[0].trace;var r=t.xcalendar;var n=t.ycalendar;var a=b.traceIs(t,"bar-like")?".bartext":".point,.textpoint";i.selectAll(a).each(function(e){E.hideOutsideRangePoint(e,S.select(this),o,s,r,n)})})};E.crispRound=function(e,t,r){if(!t||!o(t))return r||0;if(e._context.staticPlot)return t;if(t<1)return 1;return Math.round(t)};E.singleLineStyle=function(e,t,r,n,a){t.style("fill","none");var i=(((e||[])[0]||{}).trace||{}).line||{};var o=r||i.width||0;var s=a||i.dash||"";C.stroke(t,n||i.color);E.dashLine(t,s,o)};E.lineGroupStyle=function(e,a,i,o){e.style("fill","none").each(function(e){var t=(((e||[])[0]||{}).trace||{}).line||{};var r=a||t.width||0;var n=o||t.dash||"";S.select(this).call(C.stroke,i||t.color).call(E.dashLine,n,r)})};E.dashLine=function(e,t,r){r=+r||0;t=E.dashStyle(t,r);e.style({"stroke-dasharray":t,"stroke-width":r+"px"})};E.dashStyle=function(e,t){t=+t||1;var r=Math.max(t,3);if(e==="solid")e="";else if(e==="dot")e=r+"px,"+r+"px";else if(e==="dash")e=3*r+"px,"+3*r+"px";else if(e==="longdash")e=5*r+"px,"+5*r+"px";else if(e==="dashdot"){e=3*r+"px,"+r+"px,"+r+"px,"+r+"px"}else if(e==="longdashdot"){e=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"}return e};E.singleFillStyle=function(e){var t=S.select(e.node());var r=t.data();var n=(((r[0]||[])[0]||{}).trace||{}).fillcolor;if(n){e.call(C.fill,n)}};E.fillGroupStyle=function(e){e.style("stroke-width",0).each(function(e){var t=S.select(this);if(e[0].trace){t.call(C.fill,e[0].trace.fillcolor)}})};var c=e("./symbol_defs");E.symbolNames=[];E.symbolFuncs=[];E.symbolNeedLines={};E.symbolNoDot={};E.symbolNoFill={};E.symbolList=[];Object.keys(c).forEach(function(e){var t=c[e];var r=t.n;E.symbolList.push(r,String(r),e,r+100,String(r+100),e+"-open");E.symbolNames[r]=e;E.symbolFuncs[r]=t.f;if(t.needLine){E.symbolNeedLines[r]=true}if(t.noDot){E.symbolNoDot[r]=true}else{E.symbolList.push(r+200,String(r+200),e+"-dot",r+300,String(r+300),e+"-open-dot")}if(t.noFill){E.symbolNoFill[r]=true}});var u=E.symbolNames.length;var h="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";E.symbolNumber=function(e){if(o(e)){e=+e}else if(typeof e==="string"){var t=0;if(e.indexOf("-open")>0){t=100;e=e.replace("-open","")}if(e.indexOf("-dot")>0){t+=200;e=e.replace("-dot","")}e=E.symbolNames.indexOf(e);if(e>=0){e+=t}}return e%100>=u||e>=400?0:Math.floor(Math.max(e,0))};function D(e,t){var r=e%100;return E.symbolFuncs[r](t)+(e>=200?h:"")}var p={x1:1,x2:0,y1:0,y2:0};var _={x1:0,x2:0,y1:1,y2:0};var y=S.format("~.1f");var O={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:true},horizontal:{node:"linearGradient",attrs:p},horizontalreversed:{node:"linearGradient",attrs:p,reversed:true},vertical:{node:"linearGradient",attrs:_},verticalreversed:{node:"linearGradient",attrs:_,reversed:true}};E.gradient=function(e,t,r,n,a,i){var o=a.length;var s=O[n];var l=new Array(o);for(var c=0;c<o;c++){if(s.reversed){l[o-1-c]=[y((1-a[c][0])*100),a[c][1]]}else{l[c]=[y(a[c][0]*100),a[c][1]]}}var u=t._fullLayout;var f="g"+u._uid+"-"+r;var d=u._defs.select(".gradients").selectAll("#"+f).data([n+l.join(";")],L.identity);d.exit().remove();d.enter().append(s.node).each(function(){var e=S.select(this);if(s.attrs)e.attr(s.attrs);e.attr("id",f);var t=e.selectAll("stop").data(l);t.exit().remove();t.enter().append("stop");t.each(function(e){var t=v(e[1]);S.select(this).attr({offset:e[0]+"%","stop-color":C.tinyRGB(t),"stop-opacity":t.getAlpha()})})});e.style(i,F(f,t)).style(i+"-opacity",null);var h=function(e){return"."+e.attr("class").replace(/\s/g,".")};var p=h(S.select(e.node().parentNode))+">"+h(e);u._gradientUrlQueryParts[p]=1};E.pattern=function(e,t,r,n,a,i,o,s,l,c,u,f){var d=t==="legend";if(s){if(l==="overlay"){c=s;u=C.contrast(c)}else{c=undefined;u=s}}var h=r._fullLayout;var p="p"+h._uid+"-"+n;var v,g;var m=function(e,t,r,n,a){return n+(a-n)*(e-t)/(r-t)};var _,y,b;var x;var w={};switch(a){case"/":v=i*Math.sqrt(2);g=i*Math.sqrt(2);_="M-"+v/4+","+g/4+"l"+v/2+",-"+g/2+"M0,"+g+"L"+v+",0"+"M"+v/4*3+","+g/4*5+"l"+v/2+",-"+g/2;y=o*i;x="path";w={d:_,opacity:f,stroke:u,"stroke-width":y+"px"};break;case"\\":v=i*Math.sqrt(2);g=i*Math.sqrt(2);_="M"+v/4*3+",-"+g/4+"l"+v/2+","+g/2+"M0,0L"+v+","+g+"M-"+v/4+","+g/4*3+"l"+v/2+","+g/2;y=o*i;x="path";w={d:_,opacity:f,stroke:u,"stroke-width":y+"px"};break;case"x":v=i*Math.sqrt(2);g=i*Math.sqrt(2);_="M-"+v/4+","+g/4+"l"+v/2+",-"+g/2+"M0,"+g+"L"+v+",0"+"M"+v/4*3+","+g/4*5+"l"+v/2+",-"+g/2+"M"+v/4*3+",-"+g/4+"l"+v/2+","+g/2+"M0,0L"+v+","+g+"M-"+v/4+","+g/4*3+"l"+v/2+","+g/2;y=i-i*Math.sqrt(1-o);x="path";w={d:_,opacity:f,stroke:u,"stroke-width":y+"px"};break;case"|":v=i;g=i;x="path";_="M"+v/2+",0L"+v/2+","+g;y=o*i;x="path";w={d:_,opacity:f,stroke:u,"stroke-width":y+"px"};break;case"-":v=i;g=i;x="path";_="M0,"+g/2+"L"+v+","+g/2;y=o*i;x="path";w={d:_,opacity:f,stroke:u,"stroke-width":y+"px"};break;case"+":v=i;g=i;x="path";_="M"+v/2+",0L"+v/2+","+g+"M0,"+g/2+"L"+v+","+g/2;y=i-i*Math.sqrt(1-o);x="path";w={d:_,opacity:f,stroke:u,"stroke-width":y+"px"};break;case".":v=i;g=i;if(o<Math.PI/4){b=Math.sqrt(o*i*i/Math.PI)}else{b=m(o,Math.PI/4,1,i/2,i/Math.sqrt(2))}x="circle";w={cx:v/2,cy:g/2,r:b,opacity:f,fill:u};break}var A=[a||"noSh",c||"noBg",u||"noFg",i,o].join(";");var T=h._defs.select(".patterns").selectAll("#"+p).data([A],L.identity);T.exit().remove();T.enter().append("pattern").each(function(){var e=S.select(this);e.attr({id:p,width:v+"px",height:g+"px",patternUnits:"userSpaceOnUse",patternTransform:d?"scale(0.8)":""});if(c){var t=e.selectAll("rect").data([0]);t.exit().remove();t.enter().append("rect").attr({width:v+"px",height:g+"px",fill:c})}var r=e.selectAll(x).data([0]);r.exit().remove();r.enter().append(x).attr(w)});e.style("fill",F(p,r)).style("fill-opacity",null);e.classed("pattern_filled",true);var k=function(e){return"."+e.attr("class").replace(/\s/g,".")};var M=k(S.select(e.node().parentNode))+">.pattern_filled";h._patternUrlQueryParts[M]=1};E.initGradients=function(e){var t=e._fullLayout;var r=L.ensureSingle(t._defs,"g","gradients");r.selectAll("linearGradient,radialGradient").remove();t._gradientUrlQueryParts={}};E.initPatterns=function(e){var t=e._fullLayout;var r=L.ensureSingle(t._defs,"g","patterns");r.selectAll("pattern").remove();t._patternUrlQueryParts={}};E.getPatternAttr=function(e,t,r){if(e&&L.isArrayOrTypedArray(e)){return t<e.length?e[t]:r}return e};E.pointStyle=function(e,t,r){if(!e.size())return;var n=E.makePointStyleFns(t);e.each(function(e){E.singlePointStyle(e,S.select(this),t,n,r)})};E.singlePointStyle=function(e,t,r,n,a){var i=r.marker;var o=i.line;t.style("opacity",n.selectedOpacityFn?n.selectedOpacityFn(e):e.mo===undefined?i.opacity:e.mo);if(n.ms2mrc){var s;if(e.ms==="various"||i.size==="various"){s=3}else{s=n.ms2mrc(e.ms)}e.mrc=s;if(n.selectedSizeFn){s=e.mrc=n.selectedSizeFn(e)}var l=E.symbolNumber(e.mx||i.symbol)||0;e.om=l%200>=100;t.attr("d",D(l,s))}var c=false;var u,f,d;if(e.so){d=o.outlierwidth;f=o.outliercolor;u=i.outliercolor}else{var h=(o||{}).width;d=(e.mlw+1||h+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0;if("mlc"in e)f=e.mlcc=n.lineScale(e.mlc);else if(L.isArrayOrTypedArray(o.color))f=C.defaultLine;else f=o.color;if(L.isArrayOrTypedArray(i.color)){u=C.defaultLine;c=true}if("mc"in e){u=e.mcc=n.markerScale(e.mc)}else{u=i.color||"rgba(0,0,0,0)"}if(n.selectedColorFn){u=n.selectedColorFn(e)}}if(e.om){t.call(C.stroke,u).style({"stroke-width":(d||1)+"px",fill:"none"})}else{t.style("stroke-width",(e.isBlank?0:d)+"px");var p=i.gradient;var v=e.mgt;if(v)c=true;else v=p&&p.type;if(L.isArrayOrTypedArray(v)){v=v[0];if(!O[v])v=0}var g=i.pattern;var m=g&&E.getPatternAttr(g.shape,e.i,"");if(v&&v!=="none"){var _=e.mgc;if(_)c=true;else _=p.color;var y=r.uid;if(c)y+="-"+e.i;E.gradient(t,a,y,v,[[0,_],[1,u]],"fill")}else if(m){var b=E.getPatternAttr(g.bgcolor,e.i,null);var x=E.getPatternAttr(g.fgcolor,e.i,null);var w=g.fgopacity;var A=E.getPatternAttr(g.size,e.i,8);var T=E.getPatternAttr(g.solidity,e.i,.3);var k=e.mcc||L.isArrayOrTypedArray(g.shape)||L.isArrayOrTypedArray(g.bgcolor)||L.isArrayOrTypedArray(g.size)||L.isArrayOrTypedArray(g.solidity);var M=r.uid;if(k)M+="-"+e.i;E.pattern(t,"point",a,M,m,A,T,e.mcc,g.fillmode,b,x,w)}else{C.fill(t,u)}if(d){C.stroke(t,f)}}};E.makePointStyleFns=function(e){var t={};var r=e.marker;t.markerScale=E.tryColorscale(r,"");t.lineScale=E.tryColorscale(r,"line");if(b.traceIs(e,"symbols")){t.ms2mrc=s.isBubble(e)?l(e):function(){return(r.size||6)/2}}if(e.selectedpoints){L.extendFlat(t,E.makeSelectedPointStyleFns(e))}return t};E.makeSelectedPointStyleFns=function(e){var t={};var r=e.selected||{};var n=e.unselected||{};var a=e.marker||{};var i=r.marker||{};var o=n.marker||{};var s=a.opacity;var l=i.opacity;var c=o.opacity;var u=l!==undefined;var f=c!==undefined;if(L.isArrayOrTypedArray(s)||u||f){t.selectedOpacityFn=function(e){var t=e.mo===undefined?a.opacity:e.mo;if(e.selected){return u?l:t}else{return f?c:x*t}}}var d=a.color;var h=i.color;var p=o.color;if(h||p){t.selectedColorFn=function(e){var t=e.mcc||d;if(e.selected){return h||t}else{return p||t}}}var v=a.size;var g=i.size;var m=o.size;var _=g!==undefined;var y=m!==undefined;if(b.traceIs(e,"symbols")&&(_||y)){t.selectedSizeFn=function(e){var t=e.mrc||v/2;if(e.selected){return _?g/2:t}else{return y?m/2:t}}}return t};E.makeSelectedTextStyleFns=function(e){var t={};var r=e.selected||{};var n=e.unselected||{};var a=e.textfont||{};var i=r.textfont||{};var o=n.textfont||{};var s=a.color;var l=i.color;var c=o.color;t.selectedTextColorFn=function(e){var t=e.tc||s;if(e.selected){return l||t}else{if(c)return c;else return l?t:C.addOpacity(t,x)}};return t};E.selectedPointStyle=function(e,t){if(!e.size()||!t.selectedpoints)return;var a=E.makeSelectedPointStyleFns(t);var i=t.marker||{};var n=[];if(a.selectedOpacityFn){n.push(function(e,t){e.style("opacity",a.selectedOpacityFn(t))})}if(a.selectedColorFn){n.push(function(e,t){C.fill(e,a.selectedColorFn(t))})}if(a.selectedSizeFn){n.push(function(e,t){var r=t.mx||i.symbol||0;var n=a.selectedSizeFn(t);e.attr("d",D(E.symbolNumber(r),n));t.mrc2=n})}if(n.length){e.each(function(e){var t=S.select(this);for(var r=0;r<n.length;r++){n[r](t,e)}})}};E.tryColorscale=function(e,t){var r=t?L.nestedProperty(e,t).get():e;if(r){var n=r.color;if((r.colorscale||r._colorAx)&&L.isArrayOrTypedArray(n)){return a.makeColorScaleFuncFromTrace(r)}}return L.identity};var w={start:1,end:-1,middle:0,bottom:1,top:-1};function A(e,t,r,n){var a=S.select(e.node().parentNode);var i=t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle";var o=t.indexOf("left")!==-1?"end":t.indexOf("right")!==-1?"start":"middle";var s=n?n/.8+1:0;var l=(g.lineCount(e)-1)*d+1;var c=w[o]*s;var u=r*.75+w[i]*s+(w[i]-1)*l*r/2;e.attr("text-anchor",o);a.attr("transform",f(c,u))}function T(e,t){var r=e.ts||t.textfont.size;return o(r)&&r>0?r:0}E.textPointStyle=function(e,u,f){if(!e.size())return;var d;if(u.selectedpoints){var t=E.makeSelectedTextStyleFns(u);d=t.selectedTextColorFn}var h=u.texttemplate;var p=f._fullLayout;e.each(function(e){var t=S.select(this);var r=h?L.extractOption(e,u,"txt","texttemplate"):L.extractOption(e,u,"tx","text");if(!r&&r!==0){t.remove();return}if(h){var n=u._module.formatLabels;var a=n?n(e,u,p):{};var i={};m(i,u,e.i);var o=u._meta||{};r=L.texttemplateString(r,a,p._d3locale,i,e,o)}var s=e.tp||u.textposition;var l=T(e,u);var c=d?d(e):e.tc||u.textfont.color;t.call(E.font,e.tf||u.textfont.family,l,c).text(r).call(g.convertToTspans,f).call(A,s,l,e.mrc)})};E.selectedTextStyle=function(e,i){if(!e.size()||!i.selectedpoints)return;var o=E.makeSelectedTextStyleFns(i);e.each(function(e){var t=S.select(this);var r=o.selectedTextColorFn(e);var n=e.tp||i.textposition;var a=T(e,i);C.fill(t,r);A(t,n,a,e.mrc2||e.mrc)})};var k=.5;E.smoothopen=function(e,t){if(e.length<3){return"M"+e.join("L")}var r="M"+e[0];var n=[];var a;for(a=1;a<e.length-1;a++){n.push(M(e[a-1],e[a],e[a+1],t))}r+="Q"+n[0][0]+" "+e[1];for(a=2;a<e.length-1;a++){r+="C"+n[a-2][1]+" "+n[a-1][0]+" "+e[a]}r+="Q"+n[e.length-3][1]+" "+e[e.length-1];return r};E.smoothclosed=function(e,t){if(e.length<3){return"M"+e.join("L")+"Z"}var r="M"+e[0];var n=e.length-1;var a=[M(e[n],e[0],e[1],t)];var i;for(i=1;i<n;i++){a.push(M(e[i-1],e[i],e[i+1],t))}a.push(M(e[n-1],e[n],e[0],t));for(i=1;i<=n;i++){r+="C"+a[i-1][1]+" "+a[i][0]+" "+e[i]}r+="C"+a[n][1]+" "+a[0][0]+" "+e[0]+"Z";return r};function M(e,t,r,n){var a=e[0]-t[0];var i=e[1]-t[1];var o=r[0]-t[0];var s=r[1]-t[1];var l=Math.pow(a*a+i*i,k/2);var c=Math.pow(o*o+s*s,k/2);var u=(c*c*a-l*l*o)*n;var f=(c*c*i-l*l*s)*n;var d=3*c*(l+c);var h=3*l*(l+c);return[[S.round(t[0]+(d&&u/d),2),S.round(t[1]+(d&&f/d),2)],[S.round(t[0]-(h&&u/h),2),S.round(t[1]-(h&&f/h),2)]]}var P={hv:function(e,t){return"H"+S.round(t[0],2)+"V"+S.round(t[1],2)},vh:function(e,t){return"V"+S.round(t[1],2)+"H"+S.round(t[0],2)},hvh:function(e,t){return"H"+S.round((e[0]+t[0])/2,2)+"V"+S.round(t[1],2)+"H"+S.round(t[0],2)},vhv:function(e,t){return"V"+S.round((e[1]+t[1])/2,2)+"H"+S.round(t[0],2)+"V"+S.round(t[1],2)}};var I=function(e,t){return"L"+S.round(t[0],2)+","+S.round(t[1],2)};E.steps=function(e){var n=P[e]||I;return function(e){var t="M"+S.round(e[0][0],2)+","+S.round(e[0][1],2);for(var r=1;r<e.length;r++){t+=n(e[r-1],e[r])}return t}};E.makeTester=function(){var e=L.ensureSingleById(S.select("body"),"svg","js-plotly-tester",function(e){e.attr(n.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})});var t=L.ensureSingle(e,"path","js-reference-point",function(e){e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});E.tester=e;E.testref=t};E.savedBBoxes={};var R=0;var z=1e4;E.bBox=function(e,t,r){if(!r)r=N(e);var n;if(r){n=E.savedBBoxes[r];if(n)return L.extendFlat({},n)}else if(e.childNodes.length===1){var a=e.childNodes[0];r=N(a);if(r){var i=+a.getAttribute("x")||0;var o=+a.getAttribute("y")||0;var s=a.getAttribute("transform");if(!s){var l=E.bBox(a,false,r);if(i){l.left+=i;l.right+=i}if(o){l.top+=o;l.bottom+=o}return l}r+="~"+i+"~"+o+"~"+s;n=E.savedBBoxes[r];if(n)return L.extendFlat({},n)}}var c,u;if(t){c=e}else{u=E.tester.node();c=e.cloneNode(true);u.appendChild(c)}S.select(c).attr("transform",null).call(g.positionText,0,0);var f=c.getBoundingClientRect();var d=E.testref.node().getBoundingClientRect();if(!t)u.removeChild(c);var h={height:f.height,width:f.width,left:f.left-d.left,top:f.top-d.top,right:f.right-d.left,bottom:f.bottom-d.top};if(R>=z){E.savedBBoxes={};R=0}if(r)E.savedBBoxes[r]=h;R++;return L.extendFlat({},h)};function N(e){var t=e.getAttribute("data-unformatted");if(t===null)return;return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}E.setClipUrl=function(e,t,r){e.attr("clip-path",F(t,r))};function F(e,t){if(!e)return null;var r=t._context;var n=r._exportedPlot?"":r._baseUrl||"";return n?"url('"+n+"#"+e+"')":"url(#"+e+")"}E.getTranslate=function(e){var t=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/;var r=e.attr?"attr":"getAttribute";var n=e[r]("transform")||"";var a=n.replace(t,function(e,t,r){return[t,r].join(" ")}).split(" ");return{x:+a[0]||0,y:+a[1]||0}};E.setTranslate=function(e,t,r){var n=/(\btranslate\(.*?\);?)/;var a=e.attr?"attr":"getAttribute";var i=e.attr?"attr":"setAttribute";var o=e[a]("transform")||"";t=t||0;r=r||0;o=o.replace(n,"").trim();o+=f(t,r);o=o.trim();e[i]("transform",o);return o};E.getScale=function(e){var t=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/;var r=e.attr?"attr":"getAttribute";var n=e[r]("transform")||"";var a=n.replace(t,function(e,t,r){return[t,r].join(" ")}).split(" ");return{x:+a[0]||1,y:+a[1]||1}};E.setScale=function(e,t,r){var n=/(\bscale\(.*?\);?)/;var a=e.attr?"attr":"getAttribute";var i=e.attr?"attr":"setAttribute";var o=e[a]("transform")||"";t=t||1;r=r||1;o=o.replace(n,"").trim();o+="scale("+t+","+r+")";o=o.trim();e[i]("transform",o);return o};var j=/\s*sc.*/;E.setPointGroupScale=function(e,t,r){t=t||1;r=r||1;if(!e)return;var n=t===1&&r===1?"":"scale("+t+","+r+")";e.each(function(){var e=(this.getAttribute("transform")||"").replace(j,"");e+=n;e=e.trim();this.setAttribute("transform",e)})};var B=/translate\([^)]*\)\s*$/;E.setTextPointsScale=function(e,o,s){if(!e)return;e.each(function(){var e;var t=S.select(this);var r=t.select("text");if(!r.node())return;var n=parseFloat(r.attr("x")||0);var a=parseFloat(r.attr("y")||0);var i=(t.attr("transform")||"").match(B);if(o===1&&s===1){e=[]}else{e=[f(n,a),"scale("+o+","+s+")",f(-n,-a)]}if(i){e.push(i)}t.attr("transform",e.join(""))})}},{"../../components/fx/helpers":191,"../../constants/alignment":260,"../../constants/interactions":264,"../../constants/xmlns_namespaces":266,"../../lib":285,"../../lib/svg_text_utils":307,"../../registry":373,"../../traces/scatter/make_bubble_size_func":511,"../../traces/scatter/subtypes":519,"../color":155,"../colorscale":167,"./symbol_defs":178,"@plotly/d3":20,"fast-isnumeric":31,tinycolor2:119}],178:[function(e,t,r){"use strict";var f=e("@plotly/d3");t.exports={circle:{n:0,f:function(e){var t=f.round(e,2);return"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"}},square:{n:1,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"}},diamond:{n:2,f:function(e){var t=f.round(e*1.3,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"}},cross:{n:3,f:function(e){var t=f.round(e*.4,2);var r=f.round(e*1.2,2);return"M"+r+","+t+"H"+t+"V"+r+"H-"+t+"V"+t+"H-"+r+"V-"+t+"H-"+t+"V-"+r+"H"+t+"V-"+t+"H"+r+"Z"}},x:{n:4,f:function(e){var t=f.round(e*.8/Math.sqrt(2),2);var r="l"+t+","+t;var n="l"+t+",-"+t;var a="l-"+t+",-"+t;var i="l-"+t+","+t;return"M0,"+t+r+n+a+n+a+i+a+i+r+i+r+"Z"}},"triangle-up":{n:5,f:function(e){var t=f.round(e*2/Math.sqrt(3),2);var r=f.round(e/2,2);var n=f.round(e,2);return"M-"+t+","+r+"H"+t+"L0,-"+n+"Z"}},"triangle-down":{n:6,f:function(e){var t=f.round(e*2/Math.sqrt(3),2);var r=f.round(e/2,2);var n=f.round(e,2);return"M-"+t+",-"+r+"H"+t+"L0,"+n+"Z"}},"triangle-left":{n:7,f:function(e){var t=f.round(e*2/Math.sqrt(3),2);var r=f.round(e/2,2);var n=f.round(e,2);return"M"+r+",-"+t+"V"+t+"L-"+n+",0Z"}},"triangle-right":{n:8,f:function(e){var t=f.round(e*2/Math.sqrt(3),2);var r=f.round(e/2,2);var n=f.round(e,2);return"M-"+r+",-"+t+"V"+t+"L"+n+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=f.round(e*.6,2);var r=f.round(e*1.2,2);return"M-"+r+",-"+t+"H"+t+"V"+r+"Z"}},"triangle-se":{n:10,f:function(e){var t=f.round(e*.6,2);var r=f.round(e*1.2,2);return"M"+t+",-"+r+"V"+t+"H-"+r+"Z"}},"triangle-sw":{n:11,f:function(e){var t=f.round(e*.6,2);var r=f.round(e*1.2,2);return"M"+r+","+t+"H-"+t+"V-"+r+"Z"}},"triangle-nw":{n:12,f:function(e){var t=f.round(e*.6,2);var r=f.round(e*1.2,2);return"M-"+t+","+r+"V-"+t+"H"+r+"Z"}},pentagon:{n:13,f:function(e){var t=f.round(e*.951,2);var r=f.round(e*.588,2);var n=f.round(-e,2);var a=f.round(e*-.309,2);var i=f.round(e*.809,2);return"M"+t+","+a+"L"+r+","+i+"H-"+r+"L-"+t+","+a+"L0,"+n+"Z"}},hexagon:{n:14,f:function(e){var t=f.round(e,2);var r=f.round(e/2,2);var n=f.round(e*Math.sqrt(3)/2,2);return"M"+n+",-"+r+"V"+r+"L0,"+t+"L-"+n+","+r+"V-"+r+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=f.round(e,2);var r=f.round(e/2,2);var n=f.round(e*Math.sqrt(3)/2,2);return"M-"+r+","+n+"H"+r+"L"+t+",0L"+r+",-"+n+"H-"+r+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=f.round(e*.924,2);var r=f.round(e*.383,2);return"M-"+r+",-"+t+"H"+r+"L"+t+",-"+r+"V"+r+"L"+r+","+t+"H-"+r+"L-"+t+","+r+"V-"+r+"Z"}},star:{n:17,f:function(e){var t=e*1.4;var r=f.round(t*.225,2);var n=f.round(t*.951,2);var a=f.round(t*.363,2);var i=f.round(t*.588,2);var o=f.round(-t,2);var s=f.round(t*-.309,2);var l=f.round(t*.118,2);var c=f.round(t*.809,2);var u=f.round(t*.382,2);return"M"+r+","+s+"H"+n+"L"+a+","+l+"L"+i+","+c+"L0,"+u+"L-"+i+","+c+"L-"+a+","+l+"L-"+n+","+s+"H-"+r+"L0,"+o+"Z"}},hexagram:{n:18,f:function(e){var t=f.round(e*.66,2);var r=f.round(e*.38,2);var n=f.round(e*.76,2);return"M-"+n+",0l-"+r+",-"+t+"h"+n+"l"+r+",-"+t+"l"+r+","+t+"h"+n+"l-"+r+","+t+"l"+r+","+t+"h-"+n+"l-"+r+","+t+"l-"+r+",-"+t+"h-"+n+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=f.round(e*Math.sqrt(3)*.8,2);var r=f.round(e*.8,2);var n=f.round(e*1.6,2);var a=f.round(e*4,2);var i="A "+a+","+a+" 0 0 1 ";return"M-"+t+","+r+i+t+","+r+i+"0,-"+n+i+"-"+t+","+r+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=f.round(e*Math.sqrt(3)*.8,2);var r=f.round(e*.8,2);var n=f.round(e*1.6,2);var a=f.round(e*4,2);var i="A "+a+","+a+" 0 0 1 ";return"M"+t+",-"+r+i+"-"+t+",-"+r+i+"0,"+n+i+t+",-"+r+"Z"}},"star-square":{n:21,f:function(e){var t=f.round(e*1.1,2);var r=f.round(e*2,2);var n="A "+r+","+r+" 0 0 1 ";return"M-"+t+",-"+t+n+"-"+t+","+t+n+t+","+t+n+t+",-"+t+n+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=f.round(e*1.4,2);var r=f.round(e*1.9,2);var n="A "+r+","+r+" 0 0 1 ";return"M-"+t+",0"+n+"0,"+t+n+t+",0"+n+"0,-"+t+n+"-"+t+",0"+"Z"}},"diamond-tall":{n:23,f:function(e){var t=f.round(e*.7,2);var r=f.round(e*1.4,2);return"M0,"+r+"L"+t+",0L0,-"+r+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=f.round(e*1.4,2);var r=f.round(e*.7,2);return"M0,"+r+"L"+t+",0L0,-"+r+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"H-"+t+"L"+t+",-"+t+"H-"+t+"Z"},noDot:true},bowtie:{n:26,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"V-"+t+"L-"+t+","+t+"V-"+t+"Z"},noDot:true},"circle-cross":{n:27,f:function(e){var t=f.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:true,noDot:true},"circle-x":{n:28,f:function(e){var t=f.round(e,2);var r=f.round(e/Math.sqrt(2),2);return"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:true,noDot:true},"square-cross":{n:29,f:function(e){var t=f.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:true,noDot:true},"square-x":{n:30,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:true,noDot:true},"diamond-cross":{n:31,f:function(e){var t=f.round(e*1.3,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"+"M0,-"+t+"V"+t+"M-"+t+",0H"+t},needLine:true,noDot:true},"diamond-x":{n:32,f:function(e){var t=f.round(e*1.3,2);var r=f.round(e*.65,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"+"M-"+r+",-"+r+"L"+r+","+r+"M-"+r+","+r+"L"+r+",-"+r},needLine:true,noDot:true},"cross-thin":{n:33,f:function(e){var t=f.round(e*1.4,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t},needLine:true,noDot:true,noFill:true},"x-thin":{n:34,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t},needLine:true,noDot:true,noFill:true},asterisk:{n:35,f:function(e){var t=f.round(e*1.2,2);var r=f.round(e*.85,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r},needLine:true,noDot:true,noFill:true},hash:{n:36,f:function(e){var t=f.round(e/2,2);var r=f.round(e,2);return"M"+t+","+r+"V-"+r+"m-"+r+",0V"+r+"M"+r+","+t+"H-"+r+"m0,-"+r+"H"+r},needLine:true,noFill:true},"y-up":{n:37,f:function(e){var t=f.round(e*1.2,2);var r=f.round(e*1.6,2);var n=f.round(e*.8,2);return"M-"+t+","+n+"L0,0M"+t+","+n+"L0,0M0,-"+r+"L0,0"},needLine:true,noDot:true,noFill:true},"y-down":{n:38,f:function(e){var t=f.round(e*1.2,2);var r=f.round(e*1.6,2);var n=f.round(e*.8,2);return"M-"+t+",-"+n+"L0,0M"+t+",-"+n+"L0,0M0,"+r+"L0,0"},needLine:true,noDot:true,noFill:true},"y-left":{n:39,f:function(e){var t=f.round(e*1.2,2);var r=f.round(e*1.6,2);var n=f.round(e*.8,2);return"M"+n+","+t+"L0,0M"+n+",-"+t+"L0,0M-"+r+",0L0,0"},needLine:true,noDot:true,noFill:true},"y-right":{n:40,f:function(e){var t=f.round(e*1.2,2);var r=f.round(e*1.6,2);var n=f.round(e*.8,2);return"M-"+n+","+t+"L0,0M-"+n+",-"+t+"L0,0M"+r+",0L0,0"},needLine:true,noDot:true,noFill:true},"line-ew":{n:41,f:function(e){var t=f.round(e*1.4,2);return"M"+t+",0H-"+t},needLine:true,noDot:true,noFill:true},"line-ns":{n:42,f:function(e){var t=f.round(e*1.4,2);return"M0,"+t+"V-"+t},needLine:true,noDot:true,noFill:true},"line-ne":{n:43,f:function(e){var t=f.round(e,2);return"M"+t+",-"+t+"L-"+t+","+t},needLine:true,noDot:true,noFill:true},"line-nw":{n:44,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t},needLine:true,noDot:true,noFill:true},"arrow-up":{n:45,f:function(e){var t=f.round(e,2);var r=f.round(e*2,2);return"M0,0L-"+t+","+r+"H"+t+"Z"},noDot:true},"arrow-down":{n:46,f:function(e){var t=f.round(e,2);var r=f.round(e*2,2);return"M0,0L-"+t+",-"+r+"H"+t+"Z"},noDot:true},"arrow-left":{n:47,f:function(e){var t=f.round(e*2,2);var r=f.round(e,2);return"M0,0L"+t+",-"+r+"V"+r+"Z"},noDot:true},"arrow-right":{n:48,f:function(e){var t=f.round(e*2,2);var r=f.round(e,2);return"M0,0L-"+t+",-"+r+"V"+r+"Z"},noDot:true},"arrow-bar-up":{n:49,f:function(e){var t=f.round(e,2);var r=f.round(e*2,2);return"M-"+t+",0H"+t+"M0,0L-"+t+","+r+"H"+t+"Z"},needLine:true,noDot:true},"arrow-bar-down":{n:50,f:function(e){var t=f.round(e,2);var r=f.round(e*2,2);return"M-"+t+",0H"+t+"M0,0L-"+t+",-"+r+"H"+t+"Z"},needLine:true,noDot:true},"arrow-bar-left":{n:51,f:function(e){var t=f.round(e*2,2);var r=f.round(e,2);return"M0,-"+r+"V"+r+"M0,0L"+t+",-"+r+"V"+r+"Z"},needLine:true,noDot:true},"arrow-bar-right":{n:52,f:function(e){var t=f.round(e*2,2);var r=f.round(e,2);return"M0,-"+r+"V"+r+"M0,0L-"+t+",-"+r+"V"+r+"Z"},needLine:true,noDot:true}}},{"@plotly/d3":20}],179:[function(e,t,r){"use strict";t.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],180:[function(e,t,r){"use strict";var _=e("fast-isnumeric");var l=e("../../registry");var y=e("../../plots/cartesian/axes");var b=e("../../lib");var x=e("./compute_error");t.exports=function e(t){var r=t.calcdata;for(var n=0;n<r.length;n++){var a=r[n];var i=a[0].trace;if(i.visible===true&&l.traceIs(i,"errorBarsOK")){var o=y.getFromId(t,i.xaxis);var s=y.getFromId(t,i.yaxis);c(a,i,o,"x");c(a,i,s,"y")}}};function c(e,t,r,n){var a=t["error_"+n]||{};var i=a.visible&&["linear","log"].indexOf(r.type)!==-1;var o=[];if(!i)return;var s=x(a);for(var l=0;l<e.length;l++){var c=e[l];var u=c.i;if(u===undefined)u=l;else if(u===null)continue;var f=c[n];if(!_(r.c2l(f)))continue;var d=s(f,u);if(_(d[0])&&_(d[1])){var h=c[n+"s"]=f-d[0];var p=c[n+"h"]=f+d[1];o.push(h,p)}}var v=r._id;var g=t._extremes[v];var m=y.findExtremes(r,o,b.extendFlat({tozero:g.opts.tozero},{padded:true}));g.min=g.min.concat(m.min);g.max=g.max.concat(m.max)}},{"../../lib":285,"../../plots/cartesian/axes":331,"../../registry":373,"./compute_error":181,"fast-isnumeric":31}],181:[function(e,t,r){"use strict";t.exports=function e(t){var r=t.type;var n=t.symmetric;if(r==="data"){var i=t.array||[];if(n){return function e(t,r){var n=+i[r];return[n,n]}}else{var o=t.arrayminus||[];return function e(t,r){var n=+i[r];var a=+o[r];if(!isNaN(n)||!isNaN(a)){return[a||0,n||0]}return[NaN,NaN]}}}else{var a=l(r,t.value);var s=l(r,t.valueminus);if(n||t.valueminus===undefined){return function e(t){var r=a(t);return[r,r]}}else{return function e(t){return[s(t),a(t)]}}}};function l(e,t){if(e==="percent"){return function(e){return Math.abs(e*t/100)}}if(e==="constant"){return function(){return Math.abs(t)}}if(e==="sqrt"){return function(e){return Math.sqrt(Math.abs(e))}}}},{}],182:[function(e,t,r){"use strict";var p=e("fast-isnumeric");var v=e("../../registry");var g=e("../../lib");var m=e("../../plot_api/plot_template");var _=e("./attributes");t.exports=function(e,t,r,n){var a="error_"+n.axis;var i=m.newContainer(t,a);var o=e[a]||{};function s(e,t){return g.coerce(o,i,_,e,t)}var l=o.array!==undefined||o.value!==undefined||o.type==="sqrt";var c=s("visible",l);if(c===false)return;var u=s("type","array"in o?"data":"percent");var f=true;if(u!=="sqrt"){f=s("symmetric",!((u==="data"?"arrayminus":"valueminus")in o))}if(u==="data"){s("array");s("traceref");if(!f){s("arrayminus");s("tracerefminus")}}else if(u==="percent"||u==="constant"){s("value");if(!f)s("valueminus")}var d="copy_"+n.inherit+"style";if(n.inherit){var h=t["error_"+n.inherit];if((h||{}).visible){s(d,!(o.color||p(o.thickness)||p(o.width)))}}if(!n.inherit||!i[d]){s("color",r);s("thickness");s("width",v.traceIs(t,"gl3d")?0:4)}}},{"../../lib":285,"../../plot_api/plot_template":320,"../../registry":373,"./attributes":179,"fast-isnumeric":31}],183:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plot_api/edit_types").overrideAll;var i=e("./attributes");var o={error_x:n.extendFlat({},i),error_y:n.extendFlat({},i)};delete o.error_x.copy_zstyle;delete o.error_y.copy_zstyle;delete o.error_y.copy_ystyle;var s={error_x:n.extendFlat({},i),error_y:n.extendFlat({},i),error_z:n.extendFlat({},i)};delete s.error_x.copy_ystyle;delete s.error_y.copy_ystyle;delete s.error_z.copy_ystyle;delete s.error_z.copy_zstyle;t.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:o,bar:o,histogram:o,scatter3d:a(s,"calc","nested"),scattergl:a(o,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:l};function l(e,t,r){if((t.error_y||{}).visible){r.yerr=e.yh-e.y;if(!t.error_y.symmetric)r.yerrneg=e.y-e.ys}if((t.error_x||{}).visible){r.xerr=e.xh-e.x;if(!t.error_x.symmetric)r.xerrneg=e.x-e.xs}}},{"../../lib":285,"../../plot_api/edit_types":313,"./attributes":179,"./calc":180,"./compute_error":181,"./defaults":182,"./plot":184,"./style":185}],184:[function(e,t,r){"use strict";var g=e("@plotly/d3");var m=e("fast-isnumeric");var s=e("../drawing");var _=e("../../traces/scatter/subtypes");t.exports=function e(i,t,o,f){var d;var h=o.xaxis;var p=o.yaxis;var v=f&&f.duration>0;t.each(function(e){var t=e[0].trace;var l=t.error_x||{};var c=t.error_y||{};var r;if(t.ids){r=function(e){return e.id}}var u=_.hasMarkers(t)&&t.marker.maxdisplayed>0;if(!c.visible&&!l.visible)e=[];var n=g.select(this).selectAll("g.errorbar").data(e,r);n.exit().remove();if(!e.length)return;if(!l.visible)n.selectAll("path.xerror").remove();if(!c.visible)n.selectAll("path.yerror").remove();n.style("opacity",1);var a=n.enter().append("g").classed("errorbar",true);if(v){a.style("opacity",0).transition().duration(f.duration).style("opacity",1)}s.setClipUrl(n,o.layerClipId,i);n.each(function(e){var t=g.select(this);var r=y(e,h,p);if(u&&!e.vis)return;var n;var a=t.select("path.yerror");if(c.visible&&m(r.x)&&m(r.yh)&&m(r.ys)){var i=c.width;n="M"+(r.x-i)+","+r.yh+"h"+2*i+"m-"+i+",0V"+r.ys;if(!r.noYS)n+="m-"+i+",0h"+2*i;d=!a.size();if(d){a=t.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",true)}else if(v){a=a.transition().duration(f.duration).ease(f.easing)}a.attr("d",n)}else a.remove();var o=t.select("path.xerror");if(l.visible&&m(r.y)&&m(r.xh)&&m(r.xs)){var s=(l.copy_ystyle?c:l).width;n="M"+r.xh+","+(r.y-s)+"v"+2*s+"m0,-"+s+"H"+r.xs;if(!r.noXS)n+="m0,-"+s+"v"+2*s;d=!o.size();if(d){o=t.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",true)}else if(v){o=o.transition().duration(f.duration).ease(f.easing)}o.attr("d",n)}else o.remove()})})};function y(e,t,r){var n={x:t.c2p(e.x),y:r.c2p(e.y)};if(e.yh!==undefined){n.yh=r.c2p(e.yh);n.ys=r.c2p(e.ys);if(!m(n.ys)){n.noYS=true;n.ys=r.c2p(e.ys,true)}}if(e.xh!==undefined){n.xh=t.c2p(e.xh);n.xs=t.c2p(e.xs);if(!m(n.xs)){n.noXS=true;n.xs=t.c2p(e.xs,true)}}return n}},{"../../traces/scatter/subtypes":519,"../drawing":177,"@plotly/d3":20,"fast-isnumeric":31}],185:[function(e,t,r){"use strict";var i=e("@plotly/d3");var o=e("../color");t.exports=function e(t){t.each(function(e){var t=e[0].trace;var r=t.error_y||{};var n=t.error_x||{};var a=i.select(this);a.selectAll("path.yerror").style("stroke-width",r.thickness+"px").call(o.stroke,r.color);if(n.copy_ystyle)n=r;a.selectAll("path.xerror").style("stroke-width",n.thickness+"px").call(o.stroke,n.color)})}},{"../color":155,"@plotly/d3":20}],186:[function(e,t,r){"use strict";var n=e("../../plots/font_attributes");var a=e("./layout_attributes").hoverlabel;var i=e("../../lib/extend").extendFlat;t.exports={hoverlabel:{bgcolor:i({},a.bgcolor,{arrayOk:true}),bordercolor:i({},a.bordercolor,{arrayOk:true}),font:n({arrayOk:true,editType:"none"}),align:i({},a.align,{arrayOk:true}),namelength:i({},a.namelength,{arrayOk:true}),editType:"none"}}},{"../../lib/extend":279,"../../plots/font_attributes":360,"./layout_attributes":196}],187:[function(e,t,r){"use strict";var c=e("../../lib");var u=e("../../registry");t.exports=function e(t){var r=t.calcdata;var n=t._fullLayout;function a(t){return function(e){return c.coerceHoverinfo({hoverinfo:e},{_module:t._module},n)}}for(var i=0;i<r.length;i++){var o=r[i];var s=o[0].trace;if(u.traceIs(s,"pie-like"))continue;var l=u.traceIs(s,"2dMap")?f:c.fillArray;l(s.hoverinfo,o,"hi",a(s));if(s.hovertemplate)l(s.hovertemplate,o,"ht");if(!s.hoverlabel)continue;l(s.hoverlabel.bgcolor,o,"hbg");l(s.hoverlabel.bordercolor,o,"hbc");l(s.hoverlabel.font.size,o,"hts");l(s.hoverlabel.font.color,o,"htc");l(s.hoverlabel.font.family,o,"htf");l(s.hoverlabel.namelength,o,"hnl");l(s.hoverlabel.align,o,"hta")}};function f(e,t,r,n){n=n||c.identity;if(Array.isArray(e)){t[0][r]=n(e)}}},{"../../lib":285,"../../registry":373}],188:[function(e,t,r){"use strict";var o=e("../../registry");var s=e("./hover").hover;t.exports=function e(t,r,n){var a=o.getComponentMethod("annotations","onClick")(t,t._hoverdata);if(n!==undefined){s(t,r,n,true)}function i(){t.emit("plotly_click",{points:t._hoverdata,event:r})}if(t._hoverdata&&r&&r.target){if(a&&a.then){a.then(i)}else i();if(r.stopImmediatePropagation)r.stopImmediatePropagation()}}},{"../../registry":373,"./hover":192}],189:[function(e,t,r){"use strict";t.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],190:[function(e,t,r){"use strict";var s=e("../../lib");var l=e("./attributes");var c=e("./hoverlabel_defaults");t.exports=function e(r,n,t,a){function i(e,t){return s.coerce(r,n,l,e,t)}var o=s.extendFlat({},a.hoverlabel);if(n.hovertemplate)o.namelength=-1;c(r,n,i,o)}},{"../../lib":285,"./attributes":186,"./hoverlabel_defaults":193}],191:[function(e,t,o){"use strict";var u=e("../../lib");o.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo};o.isTraceInSubplots=function(e,t){if(e.type==="splom"){var r=e.xaxes||[];var n=e.yaxes||[];for(var a=0;a<r.length;a++){for(var i=0;i<n.length;i++){if(t.indexOf(r[a]+n[i])!==-1){return true}}}return false}return t.indexOf(o.getSubplot(e))!==-1};o.flat=function(e,t){var r=new Array(e.length);for(var n=0;n<e.length;n++){r[n]=t}return r};o.p2c=function(e,t){var r=new Array(e.length);for(var n=0;n<e.length;n++){r[n]=e[n].p2c(t)}return r};o.getDistanceFunction=function(e,t,r,n){if(e==="closest")return n||o.quadrature(t,r);return e.charAt(0)==="x"?t:r};o.getClosest=function(e,t,r){if(r.index!==false){if(r.index>=0&&r.index<e.length){r.distance=0}else r.index=false}else{for(var n=0;n<e.length;n++){var a=t(e[n]);if(a<=r.distance){r.index=n;r.distance=a}}}return r};o.inbox=function(e,t,r){return e*t<0||e===0?r:Infinity};o.quadrature=function(n,a){return function(e){var t=n(e);var r=a(e);return Math.sqrt(t*t+r*r)}};o.makeEventData=function(e,t,r){var n="index"in e?e.index:e.pointNumber;var a={data:t._input,fullData:t,curveNumber:t.index,pointNumber:n};if(t._indexToPoints){var i=t._indexToPoints[n];if(i.length===1){a.pointIndex=i[0]}else{a.pointIndices=i}}else{a.pointIndex=n}if(t._module.eventData){a=t._module.eventData(a,e,t,r,n)}else{if("xVal"in e)a.x=e.xVal;else if("x"in e)a.x=e.x;if("yVal"in e)a.y=e.yVal;else if("y"in e)a.y=e.y;if(e.xa)a.xaxis=e.xa;if(e.ya)a.yaxis=e.ya;if(e.zLabelVal!==undefined)a.z=e.zLabelVal}o.appendArrayPointValue(a,t,n);return a};o.appendArrayPointValue=function(e,t,r){var n=t._arrayAttrs;if(!n){return}for(var a=0;a<n.length;a++){var i=n[a];var o=f(i);if(e[o]===undefined){var s=u.nestedProperty(t,i).get();var l=d(s,r);if(l!==undefined)e[o]=l}}};o.appendArrayMultiPointValues=function(e,t,r){var n=t._arrayAttrs;if(!n){return}for(var a=0;a<n.length;a++){var i=n[a];var o=f(i);if(e[o]===undefined){var s=u.nestedProperty(t,i).get();var l=new Array(r.length);for(var c=0;c<r.length;c++){l[c]=d(s,r[c])}e[o]=l}}};var r={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function f(e){return r[e]||e}function d(e,t){if(Array.isArray(t)){if(Array.isArray(e)&&Array.isArray(e[t[0]])){return e[t[0]][t[1]]}}else{return e[t]}}var n={x:true,y:true};var a={"x unified":true,"y unified":true};o.isUnifiedHover=function(e){if(typeof e!=="string")return false;return!!a[e]};o.isXYhover=function(e){if(typeof e!=="string")return false;return!!n[e]}},{"../../lib":285}],192:[function(e,t,r){"use strict";var xe=e("@plotly/d3");var we=e("fast-isnumeric");var F=e("tinycolor2");var Ae=e("../../lib");var Z=Ae.strTranslate;var J=Ae.strRotate;var Te=e("../../lib/events");var $=e("../../lib/svg_text_utils");var ke=e("../../lib/override_cursor");var Q=e("../drawing");var Me=e("../color");var Se=e("../dragelement");var j=e("../../plots/cartesian/axes");var Ce=e("../../registry");var Le=e("./helpers");var K=e("./constants");var ee=e("../legend/defaults");var te=e("../legend/draw");var re=K.YANGLE;var n=Math.PI*re/180;var A=1/Math.sin(n);var m=Math.cos(n);var _=Math.sin(n);var ne=K.HOVERARROWSIZE;var ae=K.HOVERTEXTPAD;var Ee={box:true,ohlc:true,violin:true,candlestick:true};r.hover=function e(t,r,n,a){t=Ae.getGraphDiv(t);Ae.throttle(t._fullLayout._uid+K.HOVERID,K.HOVERMINTIME,function(){i(t,r,n,a)})};r.loneHover=function e(t,n){var r=true;if(!Array.isArray(t)){r=false;t=[t]}var a=t.map(function(e){return{color:e.color||Me.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,nameLength:e.nameLength,textAlign:e.textAlign,trace:e.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:e.hovertemplate||false,eventData:e.eventData||false,hovertemplateLabels:e.hovertemplateLabels||false}});var i=xe.select(n.container);var o=n.outerContainer?xe.select(n.outerContainer):i;var s={hovermode:"closest",rotateLabels:false,bgColor:n.bgColor||Me.background,container:i,outerContainer:o};var l=Oe(a,s,n.gd);var c=5;var u=0;var f=0;l.sort(function(e,t){return e.y0-t.y0}).each(function(e,t){var r=e.y0-e.by/2;if(r-c<u){e.offset=u-r+c}else{e.offset=0}u=r+e.by+e.offset;if(t===n.anchorIndex||0)f=e.offset}).each(function(e){e.offset-=f});var d=n.gd._fullLayout._invScaleX;var h=n.gd._fullLayout._invScaleY;Ie(l,s.rotateLabels,d,h);return r?l:l.node()};function i(e,d,t,r){if(!t)t="xy";var h=Array.isArray(t)?t:[t];var p=e._fullLayout;var n=p._plots||[];var a=n[t];var v=p._has("cartesian");if(a){var i=a.overlays.map(function(e){return e.id});h=h.concat(i)}var o=h.length;var g=new Array(o);var m=new Array(o);var s=false;for(var l=0;l<o;l++){var c=h[l];if(n[c]){s=true;g[l]=n[c].xaxis;m[l]=n[c].yaxis}else if(p[c]&&p[c]._subplot){var u=p[c]._subplot;g[l]=u.xaxis;m[l]=u.yaxis}else{Ae.warn("Unrecognized subplot: "+c);return}}var _=d.hovermode||p.hovermode;if(_&&!s)_="closest";if(["x","y","closest","x unified","y unified"].indexOf(_)===-1||!e.calcdata||e.querySelector(".zoombox")||e._dragging){return Se.unhoverRaw(e,d)}var y=p.hoverdistance;if(y===-1)y=Infinity;var b=p.spikedistance;if(b===-1)b=Infinity;var x=[];var w=[];var A,T;var f,k,M,S,C,L,E,D,O,P,I;var R={hLinePoint:null,vLinePoint:null};var z=false;if(Array.isArray(d)){_="array";for(f=0;f<d.length;f++){M=e.calcdata[d[f].curveNumber||0];if(M){S=M[0].trace;if(M[0].trace.hoverinfo!=="skip"){w.push(M);if(S.orientation==="h"){z=true}}}}}else{for(k=0;k<e.calcdata.length;k++){M=e.calcdata[k];S=M[0].trace;if(S.hoverinfo!=="skip"&&Le.isTraceInSubplots(S,h)){w.push(M);if(S.orientation==="h"){z=true}}}var N=!d.target;var F,j;if(N){if("xpx"in d)F=d.xpx;else F=g[0]._length/2;if("ypx"in d)j=d.ypx;else j=m[0]._length/2}else{if(Te.triggerHandler(e,"plotly_beforehover",d)===false){return}var B=d.composedPath&&d.composedPath()[0];if(!B){B=d.target}var H=B.getBoundingClientRect();F=d.clientX-H.left;j=d.clientY-H.top;p._calcInverseTransform(e);var U=Ae.apply3DTransform(p._invTransform)(F,j);F=U[0];j=U[1];if(F<0||F>g[0]._length||j<0||j>m[0]._length){return Se.unhoverRaw(e,d)}}d.pointerX=F+g[0]._offset;d.pointerY=j+m[0]._offset;if("xval"in d)A=Le.flat(h,d.xval);else A=Le.p2c(g,F);if("yval"in d)T=Le.flat(h,d.yval);else T=Le.p2c(m,j);if(!we(A[0])||!we(T[0])){Ae.warn("Fx.hover failed",d,e);return Se.unhoverRaw(e,d)}}var V=Infinity;function q(e,t){for(k=0;k<w.length;k++){M=w[k];if(!M||!M[0]||!M[0].trace)continue;S=M[0].trace;if(S.visible!==true||S._length===0)continue;if(["carpet","contourcarpet"].indexOf(S._module.name)!==-1)continue;if(S.type==="splom"){L=0;C=h[L]}else{C=Le.getSubplot(S);L=h.indexOf(C)}E=_;if(Le.isUnifiedHover(E)){E=E.charAt(0)}P={cd:M,trace:S,xa:g[L],ya:m[L],maxHoverDistance:y,maxSpikeDistance:b,index:false,distance:Math.min(V,y),spikeDistance:Infinity,xSpike:undefined,ySpike:undefined,color:Me.defaultLine,name:S.name,x0:undefined,x1:undefined,y0:undefined,y1:undefined,xLabelVal:undefined,yLabelVal:undefined,zLabelVal:undefined,text:undefined};if(p[C]){P.subplot=p[C]._subplot}if(p._splomScenes&&p._splomScenes[S.uid]){P.scene=p._splomScenes[S.uid]}I=x.length;if(E==="array"){var r=d[k];if("pointNumber"in r){P.index=r.pointNumber;E="closest"}else{E="";if("xval"in r){D=r.xval;E="x"}if("yval"in r){O=r.yval;E=E?"closest":"y"}}}else if(e!==undefined&&t!==undefined){D=e;O=t}else{D=A[L];O=T[L]}if(y!==0){if(S._module&&S._module.hoverPoints){var n=S._module.hoverPoints(P,D,O,E,{finiteRange:true,hoverLayer:p._hoverlayer});if(n){var a;for(var i=0;i<n.length;i++){a=n[i];if(we(a.x0)&&we(a.y0)){x.push(Re(a,_))}}}}else{Ae.log("Unrecognized trace type in hover:",S)}}if(_==="closest"&&x.length>I){x.splice(0,I);V=x[0].distance}if(v&&b!==0){if(x.length===0){P.distance=b;P.index=false;var o=S._module.hoverPoints(P,D,O,"closest",{hoverLayer:p._hoverlayer});if(o){o=o.filter(function(e){return e.spikeDistance<=b})}if(o&&o.length){var s;var l=o.filter(function(e){return e.xa.showspikes&&e.xa.spikesnap!=="hovered data"});if(l.length){var c=l[0];if(we(c.x0)&&we(c.y0)){s=G(c);if(!R.vLinePoint||R.vLinePoint.spikeDistance>s.spikeDistance){R.vLinePoint=s}}}var u=o.filter(function(e){return e.ya.showspikes&&e.ya.spikesnap!=="hovered data"});if(u.length){var f=u[0];if(we(f.x0)&&we(f.y0)){s=G(f);if(!R.hLinePoint||R.hLinePoint.spikeDistance>s.spikeDistance){R.hLinePoint=s}}}}}}}}q();function Y(e,t){var r=null;var n=Infinity;var a;for(var i=0;i<e.length;i++){a=e[i].spikeDistance;if(a<=n&&a<=t){r=e[i];n=a}}return r}function G(e){if(!e)return null;return{xa:e.xa,ya:e.ya,x:e.xSpike!==undefined?e.xSpike:(e.x0+e.x1)/2,y:e.ySpike!==undefined?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}}var W={fullLayout:p,container:p._hoverlayer,outerContainer:p._paperdiv,event:d};var X=e._spikepoints;var Z={vLinePoint:R.vLinePoint,hLinePoint:R.hLinePoint};e._spikepoints=Z;if(v&&b!==0){if(x.length!==0){var J=x.filter(function(e){return e.ya.showspikes});var $=Y(J,b);R.hLinePoint=G($);var Q=x.filter(function(e){return e.xa.showspikes});var K=Y(Q,b);R.vLinePoint=G(K)}}if(x.length===0){var ee=Se.unhoverRaw(e,d);if(v&&(R.hLinePoint!==null||R.vLinePoint!==null)){if(Fe(X)){ze(e,R,W)}}return ee}if(v){if(Fe(X)){ze(e,R,W)}}var te=function(){x.sort(function(e,t){return e.distance-t.distance});x=je(x,_)};te();if(Le.isXYhover(E)&&x[0].length!==0&&x[0].trace.type!=="splom"){var re=x[0];if(Ee[re.trace.type]){x=x.filter(function(e){return e.trace.index===re.trace.index})}else{x=[re]}var ne=x.length;var ae=Be("x",re,p);var ie=Be("y",re,p);q(ae,ie);var oe=[];var se={};var le=0;var ce=function(e){var t=Ee[e.trace.type]?De(e):e.trace.index;if(!se[t]){le++;se[t]=le;oe.push(e)}else{var r=se[t]-1;var n=oe[r];if(r>0&&Math.abs(e.distance)<Math.abs(n.distance)){oe[r]=e}}};var ue;for(ue=0;ue<ne;ue++){ce(x[ue])}for(ue=x.length-1;ue>ne-1;ue--){ce(x[ue])}x=oe;te()}var fe=e._hoverdata;var de=[];for(f=0;f<x.length;f++){var he=x[f];var pe=Le.makeEventData(he,he.trace,he.cd);if(he.hovertemplate!==false){var ve=false;if(he.cd[he.index]&&he.cd[he.index].ht){ve=he.cd[he.index].ht}he.hovertemplate=ve||he.trace.hovertemplate||false}he.eventData=[pe];de.push(pe)}e._hoverdata=de;var ge=_==="y"&&(w.length>1||x.length>1)||_==="closest"&&z&&x.length>1;var me=Me.combine(p.plot_bgcolor||Me.background,p.paper_bgcolor);var _e={hovermode:_,rotateLabels:ge,bgColor:me,container:p._hoverlayer,outerContainer:p._paperdiv,commonLabelOpts:p.hoverlabel,hoverdistance:p.hoverdistance};var ye=Oe(x,_e,e);if(!Le.isUnifiedHover(_)){Pe(ye,ge?"xa":"ya",p);Ie(ye,ge,p._invScaleX,p._invScaleY)}if(d.target&&d.target.tagName){var be=Ce.getComponentMethod("annotations","hasClickToShow")(e,de);ke(xe.select(d.target),be?"pointer":"")}if(!d.target||r||!Ne(e,d,fe))return;if(fe){e.emit("plotly_unhover",{event:d,points:fe})}e.emit("plotly_hover",{event:d,points:e._hoverdata,xaxes:g,yaxes:m,xvals:A,yvals:T})}function De(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa,e.ya||""].join(",")}var d=/<extra>([\s\S]*)<\/extra>/;function Oe(e,t,M){var S=M._fullLayout;var C=t.hovermode;var L=t.rotateLabels;var E=t.bgColor;var r=t.container;var n=t.outerContainer;var x=t.commonLabelOpts||{};var D=t.fontFamily||K.HOVERFONT;var O=t.fontSize||K.HOVERFONTSIZE;var w=e[0];var A=w.xa;var T=w.ya;var a=C.charAt(0);var P=w[a+"Label"];var i=n.node().getBoundingClientRect();var I=i.top;var R=i.width;var z=i.height;var N=P!==undefined&&w.distance<=t.hoverdistance&&(C==="x"||C==="y");if(N){var o=true;var s,l;for(s=0;s<e.length;s++){if(o&&e[s].zLabel===undefined)o=false;l=e[s].hoverinfo||e[s].trace.hoverinfo;if(l){var c=Array.isArray(l)?l:l.split("+");if(c.indexOf("all")===-1&&c.indexOf(C)===-1){N=false;break}}}if(o)N=false}var u=r.selectAll("g.axistext").data(N?[0]:[]);u.enter().append("g").classed("axistext",true);u.exit().remove();u.each(function(){var e=xe.select(this);var t=Ae.ensureSingle(e,"path","",function(e){e.style({"stroke-width":"1px"})});var r=Ae.ensureSingle(e,"text","",function(e){e.attr("data-notex",1)});var n=x.bgcolor||Me.defaultLine;var a=x.bordercolor||Me.contrast(n);var i=Me.contrast(n);var o={family:x.font.family||D,size:x.font.size||O,color:x.font.color||i};t.style({fill:n,stroke:a});r.text(P).call(Q.font,o).call($.positionText,0,0).call($.convertToTspans,M);e.attr("transform","");var s=r.node().getBoundingClientRect();var l,c;if(C==="x"){var u=A.side==="top"?"-":"";r.attr("text-anchor","middle").call($.positionText,0,A.side==="top"?I-s.bottom-ne-ae:I-s.top+ne+ae);l=A._offset+(w.x0+w.x1)/2;c=T._offset+(A.side==="top"?0:T._length);var f=s.width/2+ae;if(l<f){l=f;t.attr("d","M-"+(f-ne)+",0"+"L-"+(f-ne*2)+","+u+ne+"H"+(ae+s.width/2)+"v"+u+(ae*2+s.height)+"H-"+f+"V"+u+ne+"Z")}else if(l>S.width-f){l=S.width-f;t.attr("d","M"+(f-ne)+",0"+"L"+f+","+u+ne+"v"+u+(ae*2+s.height)+"H-"+f+"V"+u+ne+"H"+(f-ne*2)+"Z")}else{t.attr("d","M0,0"+"L"+ne+","+u+ne+"H"+(ae+s.width/2)+"v"+u+(ae*2+s.height)+"H-"+(ae+s.width/2)+"V"+u+ne+"H-"+ne+"Z")}}else{var d;var h;var p;if(T.side==="right"){d="start";h=1;p="";l=A._offset+A._length}else{d="end";h=-1;p="-";l=A._offset}c=T._offset+(w.y0+w.y1)/2;r.attr("text-anchor",d);t.attr("d","M0,0"+"L"+p+ne+","+ne+"V"+(ae+s.height/2)+"h"+p+(ae*2+s.width)+"V-"+(ae+s.height/2)+"H"+p+ne+"V-"+ne+"Z");var v=s.height/2;var g=I-s.top-v;var m="clip"+S._uid+"commonlabel"+T._id;var _;if(l<s.width+2*ae+ne){_="M-"+(ne+ae)+"-"+v+"h-"+(s.width-ae)+"V"+v+"h"+(s.width-ae)+"Z";var y=s.width-l+ae;$.positionText(r,y,g);if(d==="end"){r.selectAll("tspan").each(function(){var e=xe.select(this);var t=Q.tester.append("text").text(e.text()).call(Q.font,o);var r=t.node().getBoundingClientRect();if(Math.round(r.width)<Math.round(s.width)){e.attr("x",y-r.width)}t.remove()})}}else{$.positionText(r,h*(ae+ne),g);_=null}var b=S._topclips.selectAll("#"+m).data(_?[0]:[]);b.enter().append("clipPath").attr("id",m).append("path");b.exit().remove();b.select("path").attr("d",_);Q.setClipUrl(r,_?m:null,M)}e.attr("transform",Z(l,c))});if(Le.isUnifiedHover(C)){r.selectAll("g.hovertext").remove();if(e.length===0)return;var f={showlegend:true,legend:{title:{text:P,font:S.hoverlabel.font},font:S.hoverlabel.font,bgcolor:S.hoverlabel.bgcolor,bordercolor:S.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:S.legend?S.legend.traceorder:undefined,orientation:"v"}};var d={};ee(f,d,M._fullData);var h=d.legend;h.entries=[];for(var p=0;p<e.length;p++){var v=ie(e[p],true,C,S,P);var g=v[0];var m=v[1];var _=e[p];_.name=m;if(m!==""){_.text=m+" : "+g}else{_.text=g}var y=_.cd[_.index];if(y){if(y.mc)_.mc=y.mc;if(y.mcc)_.mc=y.mcc;if(y.mlc)_.mlc=y.mlc;if(y.mlcc)_.mlc=y.mlcc;if(y.mlw)_.mlw=y.mlw;if(y.mrc)_.mrc=y.mrc;if(y.dir)_.dir=y.dir}_._distinct=true;h.entries.push([_])}h.entries.sort(function(e,t){return e[0].trace.index-t[0].trace.index});h.layer=r;h._inHover=true;te(M,h);var b=e[0];var k=(b.y0+b.y1)/2;var F=(b.x0+b.x1)/2;var j=r.select("g.legend");var B=j.node().getBoundingClientRect();F+=A._offset;k+=T._offset-B.height/2;var H=B.width+2*ae;var U=F+H<=R;var V=F-H>=0;if(!U&&V){F-=H}else{F+=2*ae}var q=B.height+2*ae;var Y=k<=I;var G=k+q>=z;var W=q<=z;if(W){if(Y){k=T._offset+2*ae}else if(G){k=z-q}}j.attr("transform",Z(F,k));return j}var X=r.selectAll("g.hovertext").data(e,function(e){return De(e)});X.enter().append("g").classed("hovertext",true).each(function(){var e=xe.select(this);e.append("rect").call(Me.fill,Me.addOpacity(E,.8));e.append("text").classed("name",true);e.append("path").style("stroke-width","1px");e.append("text").classed("nums",true).call(Q.font,D,O)});X.exit().remove();X.each(function(e){var t=xe.select(this).attr("transform","");var r=e.color;if(Array.isArray(r)){r=r[e.eventData[0].pointNumber]}var n=e.bgcolor||r;var a=Me.combine(Me.opacity(n)?n:Me.defaultLine,E);var i=Me.combine(Me.opacity(r)?r:Me.defaultLine,E);var o=e.borderColor||Me.contrast(a);var s=ie(e,N,C,S,P,t);var l=s[0];var c=s[1];var u=t.select("text.nums").call(Q.font,e.fontFamily||D,e.fontSize||O,e.fontColor||o).text(l).attr("data-notex",1).call($.positionText,0,0).call($.convertToTspans,M);var f=t.select("text.name");var d=0;var h=0;if(c&&c!==l){f.call(Q.font,e.fontFamily||D,e.fontSize||O,i).text(c).attr("data-notex",1).call($.positionText,0,0).call($.convertToTspans,M);var p=f.node().getBoundingClientRect();d=p.width+2*ae;h=p.height+2*ae}else{f.remove();t.select("rect").remove()}t.select("path").style({fill:a,stroke:o});var v=u.node().getBoundingClientRect();var g=e.xa._offset+(e.x0+e.x1)/2;var m=e.ya._offset+(e.y0+e.y1)/2;var _=Math.abs(e.x1-e.x0);var y=Math.abs(e.y1-e.y0);var b=v.width+ne+ae+d;var x,w;e.ty0=I-v.top;e.bx=v.width+2*ae;e.by=Math.max(v.height+2*ae,h);e.anchor="start";e.txwidth=v.width;e.tx2width=d;e.offset=0;if(L){e.pos=g;x=m+y/2+b<=z;w=m-y/2-b>=0;if((e.idealAlign==="top"||!x)&&w){m-=y/2;e.anchor="end"}else if(x){m+=y/2;e.anchor="start"}else e.anchor="middle"}else{e.pos=m;x=g+_/2+b<=R;w=g-_/2-b>=0;if((e.idealAlign==="left"||!x)&&w){g-=_/2;e.anchor="end"}else if(x){g+=_/2;e.anchor="start"}else{e.anchor="middle";var A=b/2;var T=g+A-R;var k=g-A;if(T>0)g-=T;if(k<0)g+=-k}}u.attr("text-anchor",e.anchor);if(d)f.attr("text-anchor",e.anchor);t.attr("transform",Z(g,m)+(L?J(re):""))});return X}function ie(r,e,t,n,a,i){var o="";var s="";if(r.nameOverride!==undefined)r.name=r.nameOverride;if(r.name){if(r.trace._meta){r.name=Ae.templateString(r.name,r.trace._meta)}o=h(r.name,r.nameLength)}var l=t.charAt(0);var c=l==="x"?"y":"x";if(r.zLabel!==undefined){if(r.xLabel!==undefined)s+="x: "+r.xLabel+"<br>";if(r.yLabel!==undefined)s+="y: "+r.yLabel+"<br>";if(r.trace.type!=="choropleth"&&r.trace.type!=="choroplethmapbox"){s+=(s?"z: ":"")+r.zLabel}}else if(e&&r[l+"Label"]===a){s=r[c+"Label"]||""}else if(r.xLabel===undefined){if(r.yLabel!==undefined&&r.trace.type!=="scattercarpet"){s=r.yLabel}}else if(r.yLabel===undefined)s=r.xLabel;else s="("+r.xLabel+", "+r.yLabel+")";if((r.text||r.text===0)&&!Array.isArray(r.text)){s+=(s?"<br>":"")+r.text}if(r.extraText!==undefined)s+=(s?"<br>":"")+r.extraText;if(i&&s===""&&!r.hovertemplate){if(o==="")i.remove();s=o}var u=r.hovertemplate||false;if(u){var f=r.hovertemplateLabels||r;if(r[l+"Label"]!==a){f[l+"other"]=f[l+"Val"];f[l+"otherLabel"]=f[l+"Label"]}s=Ae.hovertemplateString(u,f,n._d3locale,r.eventData[0]||{},r.trace._meta);s=s.replace(d,function(e,t){o=h(t,r.nameLength);return""})}return[s,o]}function Pe(e,a,i){var t=0;var o=1;var r=e.size();var s=new Array(r);var l=0;e.each(function(e){var t=e[a];var r=t._id.charAt(0)==="x";var n=t.range;if(l===0&&n&&n[0]>n[1]!==r){o=-1}s[l++]=[{datum:e,traceIndex:e.trace.index,dp:0,pos:e.pos,posref:e.posref,size:e.by*(r?A:1)/2,pmin:0,pmax:r?i.width:i.height}]});s.sort(function(e,t){return e[0].posref-t[0].posref||o*(t[0].traceIndex-e[0].traceIndex)});var c,u,f,d,h,p,n;function v(e){var t=e[0];var r=e[e.length-1];u=t.pmin-t.pos-t.dp+t.size;f=r.pos+r.dp+r.size-t.pmax;if(u>.01){for(h=e.length-1;h>=0;h--)e[h].dp+=u;c=false}if(f<.01)return;if(u<-.01){for(h=e.length-1;h>=0;h--)e[h].dp-=f;c=false}if(!c)return;var n=0;for(d=0;d<e.length;d++){p=e[d];if(p.pos+p.dp+p.size>t.pmax)n++}for(d=e.length-1;d>=0;d--){if(n<=0)break;p=e[d];if(p.pos>t.pmax-1){p.del=true;n--}}for(d=0;d<e.length;d++){if(n<=0)break;p=e[d];if(p.pos<t.pmin+1){p.del=true;n--;f=p.size*2;for(h=e.length-1;h>=0;h--)e[h].dp-=f}}for(d=e.length-1;d>=0;d--){if(n<=0)break;p=e[d];if(p.pos+p.dp+p.size>t.pmax){p.del=true;n--}}}while(!c&&t<=r){t++;c=true;d=0;while(d<s.length-1){var g=s[d];var m=s[d+1];var _=g[g.length-1];var y=m[0];u=_.pos+_.dp+_.size-y.pos-y.dp+y.size;if(u>.01&&_.pmin===y.pmin&&_.pmax===y.pmax){for(h=m.length-1;h>=0;h--)m[h].dp+=u;g.push.apply(g,m);s.splice(d+1,1);n=0;for(h=g.length-1;h>=0;h--)n+=g[h].dp;f=n/g.length;for(h=g.length-1;h>=0;h--)g[h].dp-=f;c=false}else d++}s.forEach(v)}for(d=s.length-1;d>=0;d--){var b=s[d];for(h=b.length-1;h>=0;h--){var x=b[h];var w=x.datum;w.offset=x.dp;w.del=x.del}}}function Ie(e,p,t,r){var v=function(e){return e*t};var g=function(e){return e*r};e.each(function(e){var t=xe.select(this);if(e.del)return t.remove();var r=t.select("text.nums");var n=e.anchor;var a=n==="end"?-1:1;var i={start:1,end:-1,middle:0}[n];var o=i*(ne+ae);var s=o+i*(e.txwidth+ae);var l=0;var c=e.offset;var u=n==="middle";if(u){o-=e.tx2width/2;s+=e.txwidth/2+ae}if(p){c*=-_;l=e.offset*m}t.select("path").attr("d",u?"M-"+v(e.bx/2+e.tx2width/2)+","+g(c-e.by/2)+"h"+v(e.bx)+"v"+g(e.by)+"h-"+v(e.bx)+"Z":"M0,0L"+v(a*ne+l)+","+g(ne+c)+"v"+g(e.by/2-ne)+"h"+v(a*e.bx)+"v-"+g(e.by)+"H"+v(a*ne+l)+"V"+g(c-ne)+"Z");var f=l+o;var d=c+e.ty0-e.by/2+ae;var h=e.textAlign||"auto";if(h!=="auto"){if(h==="left"&&n!=="start"){r.attr("text-anchor","start");f=u?-e.bx/2-e.tx2width/2+ae:-e.bx-ae}else if(h==="right"&&n!=="end"){r.attr("text-anchor","end");f=u?e.bx/2-e.tx2width/2-ae:e.bx+ae}}r.call($.positionText,v(f),g(d));if(e.tx2width){t.select("text.name").call($.positionText,v(s+i*ae+l),g(c+e.ty0-e.by/2+ae));t.select("rect").call(Q.setRect,v(s+(i-1)*e.tx2width/2+l),g(c-e.by/2-1),v(e.tx2width),g(e.by+2))}})}function Re(a,e){var n=a.index;var i=a.trace||{};var o=a.cd[0];var r=a.cd[n]||{};function s(e){return e||we(e)&&e===0}var l=Array.isArray(n)?function(e,t){var r=Ae.castOption(o,n,e);return s(r)?r:Ae.extractOption({},i,"",t)}:function(e,t){return Ae.extractOption(r,i,e,t)};function t(e,t,r){var n=l(t,r);if(s(n))a[e]=n}t("hoverinfo","hi","hoverinfo");t("bgcolor","hbg","hoverlabel.bgcolor");t("borderColor","hbc","hoverlabel.bordercolor");t("fontFamily","htf","hoverlabel.font.family");t("fontSize","hts","hoverlabel.font.size");t("fontColor","htc","hoverlabel.font.color");t("nameLength","hnl","hoverlabel.namelength");t("textAlign","hta","hoverlabel.align");a.posref=e==="y"||e==="closest"&&i.orientation==="h"?a.xa._offset+(a.x0+a.x1)/2:a.ya._offset+(a.y0+a.y1)/2;a.x0=Ae.constrain(a.x0,0,a.xa._length);a.x1=Ae.constrain(a.x1,0,a.xa._length);a.y0=Ae.constrain(a.y0,0,a.ya._length);a.y1=Ae.constrain(a.y1,0,a.ya._length);if(a.xLabelVal!==undefined){a.xLabel="xLabel"in a?a.xLabel:j.hoverLabelText(a.xa,a.xLabelVal,i.xhoverformat);a.xVal=a.xa.c2d(a.xLabelVal)}if(a.yLabelVal!==undefined){a.yLabel="yLabel"in a?a.yLabel:j.hoverLabelText(a.ya,a.yLabelVal,i.yhoverformat);a.yVal=a.ya.c2d(a.yLabelVal)}if(a.zLabelVal!==undefined&&a.zLabel===undefined){a.zLabel=String(a.zLabelVal)}if(!isNaN(a.xerr)&&!(a.xa.type==="log"&&a.xerr<=0)){var c=j.tickText(a.xa,a.xa.c2l(a.xerr),"hover").text;if(a.xerrneg!==undefined){a.xLabel+=" +"+c+" / -"+j.tickText(a.xa,a.xa.c2l(a.xerrneg),"hover").text}else a.xLabel+="  "+c;if(e==="x")a.distance+=1}if(!isNaN(a.yerr)&&!(a.ya.type==="log"&&a.yerr<=0)){var u=j.tickText(a.ya,a.ya.c2l(a.yerr),"hover").text;if(a.yerrneg!==undefined){a.yLabel+=" +"+u+" / -"+j.tickText(a.ya,a.ya.c2l(a.yerrneg),"hover").text}else a.yLabel+="  "+u;if(e==="y")a.distance+=1}var f=a.hoverinfo||a.trace.hoverinfo;if(f&&f!=="all"){f=Array.isArray(f)?f:f.split("+");if(f.indexOf("x")===-1)a.xLabel=undefined;if(f.indexOf("y")===-1)a.yLabel=undefined;if(f.indexOf("z")===-1)a.zLabel=undefined;if(f.indexOf("text")===-1)a.text=undefined;if(f.indexOf("name")===-1)a.name=undefined}return a}function ze(e,t,r){var n=r.container;var a=r.fullLayout;var i=a._size;var o=r.event;var s=!!t.hLinePoint;var l=!!t.vLinePoint;var c,u;n.selectAll(".spikeline").remove();if(!(l||s))return;var f=Me.combine(a.plot_bgcolor,a.paper_bgcolor);if(s){var d=t.hLinePoint;var h,p;c=d&&d.xa;u=d&&d.ya;var v=u.spikesnap;if(v==="cursor"){h=o.pointerX;p=o.pointerY}else{h=c._offset+d.x;p=u._offset+d.y}var g=F.readability(d.color,f)<1.5?Me.contrast(f):d.color;var m=u.spikemode;var _=u.spikethickness;var y=u.spikecolor||g;var b=j.getPxPosition(e,u);var x,w;if(m.indexOf("toaxis")!==-1||m.indexOf("across")!==-1){if(m.indexOf("toaxis")!==-1){x=b;w=h}if(m.indexOf("across")!==-1){var A=u._counterDomainMin;var T=u._counterDomainMax;if(u.anchor==="free"){A=Math.min(A,u.position);T=Math.max(T,u.position)}x=i.l+A*i.w;w=i.l+T*i.w}n.insert("line",":first-child").attr({x1:x,x2:w,y1:p,y2:p,"stroke-width":_,stroke:y,"stroke-dasharray":Q.dashStyle(u.spikedash,_)}).classed("spikeline",true).classed("crisp",true);n.insert("line",":first-child").attr({x1:x,x2:w,y1:p,y2:p,"stroke-width":_+2,stroke:f}).classed("spikeline",true).classed("crisp",true)}if(m.indexOf("marker")!==-1){n.insert("circle",":first-child").attr({cx:b+(u.side!=="right"?_:-_),cy:p,r:_,fill:y}).classed("spikeline",true)}}if(l){var k=t.vLinePoint;var M,S;c=k&&k.xa;u=k&&k.ya;var C=c.spikesnap;if(C==="cursor"){M=o.pointerX;S=o.pointerY}else{M=c._offset+k.x;S=u._offset+k.y}var L=F.readability(k.color,f)<1.5?Me.contrast(f):k.color;var E=c.spikemode;var D=c.spikethickness;var O=c.spikecolor||L;var P=j.getPxPosition(e,c);var I,R;if(E.indexOf("toaxis")!==-1||E.indexOf("across")!==-1){if(E.indexOf("toaxis")!==-1){I=P;R=S}if(E.indexOf("across")!==-1){var z=c._counterDomainMin;var N=c._counterDomainMax;if(c.anchor==="free"){z=Math.min(z,c.position);N=Math.max(N,c.position)}I=i.t+(1-N)*i.h;R=i.t+(1-z)*i.h}n.insert("line",":first-child").attr({x1:M,x2:M,y1:I,y2:R,"stroke-width":D,stroke:O,"stroke-dasharray":Q.dashStyle(c.spikedash,D)}).classed("spikeline",true).classed("crisp",true);n.insert("line",":first-child").attr({x1:M,x2:M,y1:I,y2:R,"stroke-width":D+2,stroke:f}).classed("spikeline",true).classed("crisp",true)}if(E.indexOf("marker")!==-1){n.insert("circle",":first-child").attr({cx:M,cy:P-(c.side!=="top"?D:-D),r:D,fill:O}).classed("spikeline",true)}}}function Ne(e,t,r){if(!r||r.length!==e._hoverdata.length)return true;for(var n=r.length-1;n>=0;n--){var a=r[n];var i=e._hoverdata[n];if(a.curveNumber!==i.curveNumber||String(a.pointNumber)!==String(i.pointNumber)||String(a.pointNumbers)!==String(i.pointNumbers)){return true}}return false}function Fe(e,t){if(!t)return true;if(t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint)return true;return false}function h(e,t){return $.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em"]})}function je(e,t){var r=t.charAt(0);var n=[];var a=[];var i=[];for(var o=0;o<e.length;o++){var s=e[o];if(Ce.traceIs(s.trace,"bar-like")||Ce.traceIs(s.trace,"box-violin")){i.push(s)}else if(s.trace[r+"period"]){a.push(s)}else{n.push(s)}}return n.concat(a).concat(i)}function Be(e,t,r){var n=t[e+"a"];var a=t[e+"Val"];if(n.type==="category")a=n._categoriesMap[a];else if(n.type==="date")a=n.d2c(a);var i=t.cd[t.index];if(i&&i.t&&i.t.posLetter===n._id){if(r.boxmode==="group"||r.violinmode==="group"){a+=i.t.dPos}}return a}},{"../../lib":285,"../../lib/events":278,"../../lib/override_cursor":296,"../../lib/svg_text_utils":307,"../../plots/cartesian/axes":331,"../../registry":373,"../color":155,"../dragelement":174,"../drawing":177,"../legend/defaults":207,"../legend/draw":208,"./constants":189,"./helpers":191,"@plotly/d3":20,"fast-isnumeric":31,tinycolor2:119}],193:[function(e,t,r){"use strict";var o=e("../../lib");var s=e("../color");var l=e("./helpers").isUnifiedHover;t.exports=function e(t,r,n,a){a=a||{};function i(e){if(!a.font[e]){a.font[e]=r.legend?r.legend.font[e]:r.font[e]}}if(r&&l(r.hovermode)){if(!a.font)a.font={};i("size");i("family");i("color");if(r.legend){if(!a.bgcolor)a.bgcolor=s.combine(r.legend.bgcolor,r.paper_bgcolor);if(!a.bordercolor)a.bordercolor=r.legend.bordercolor}else{if(!a.bgcolor)a.bgcolor=r.paper_bgcolor}}n("hoverlabel.bgcolor",a.bgcolor);n("hoverlabel.bordercolor",a.bordercolor);n("hoverlabel.namelength",a.namelength);o.coerceFont(n,"hoverlabel.font",a.font);n("hoverlabel.align",a.align)}},{"../../lib":285,"../color":155,"./helpers":191}],194:[function(e,t,r){"use strict";var a=e("../../lib");var i=e("./layout_attributes");t.exports=function e(r,n){function t(e,t){if(n[e]!==undefined)return n[e];return a.coerce(r,n,i,e,t)}t("clickmode");return t("hovermode")}},{"../../lib":285,"./layout_attributes":196}],195:[function(e,t,r){"use strict";var n=e("@plotly/d3");var a=e("../../lib");var i=e("../dragelement");var o=e("./helpers");var s=e("./layout_attributes");var l=e("./hover");t.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:s},attributes:e("./attributes"),layoutAttributes:s,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:o.getDistanceFunction,getClosest:o.getClosest,inbox:o.inbox,quadrature:o.quadrature,appendArrayPointValue:o.appendArrayPointValue,castHoverOption:u,castHoverinfo:f,hover:l.hover,unhover:i.unhover,loneHover:l.loneHover,loneUnhover:c,click:e("./click")};function c(e){var t=a.isD3Selection(e)?e:n.select(e);t.selectAll("g.hovertext").remove();t.selectAll(".spikeline").remove()}function u(e,t,r){return a.castOption(e,t,"hoverlabel."+r)}function f(t,r,e){function n(e){return a.coerceHoverinfo({hoverinfo:e},{_module:t._module},r)}return a.castOption(t,e,"hoverinfo",n)}},{"../../lib":285,"../dragelement":174,"./attributes":186,"./calc":187,"./click":188,"./constants":189,"./defaults":190,"./helpers":191,"./hover":192,"./layout_attributes":196,"./layout_defaults":197,"./layout_global_defaults":198,"@plotly/d3":20}],196:[function(e,t,r){"use strict";var n=e("./constants");var a=e("../../plots/font_attributes")({editType:"none"});a.family.dflt=n.HOVERFONT;a.size.dflt=n.HOVERFONTSIZE;t.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",false],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",false,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:a,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":360,"./constants":189}],197:[function(e,t,r){"use strict";var c=e("../../lib");var u=e("./layout_attributes");var f=e("./hovermode_defaults");var d=e("./hoverlabel_defaults");t.exports=function e(r,n){function t(e,t){return c.coerce(r,n,u,e,t)}var a=f(r,n);if(a){t("hoverdistance");t("spikedistance")}var i=t("dragmode");if(i==="select")t("selectdirection");var o=n._has("mapbox");var s=n._has("geo");var l=n._basePlotModules.length;if(n.dragmode==="zoom"&&((o||s)&&l===1||o&&s&&l===2)){n.dragmode="pan"}d(r,n,t)}},{"../../lib":285,"./hoverlabel_defaults":193,"./hovermode_defaults":194,"./layout_attributes":196}],198:[function(e,t,r){"use strict";var a=e("../../lib");var i=e("./hoverlabel_defaults");var o=e("./layout_attributes");t.exports=function e(r,n){function t(e,t){return a.coerce(r,n,o,e,t)}i(r,n,t)}},{"../../lib":285,"./hoverlabel_defaults":193,"./layout_attributes":196}],199:[function(e,t,r){"use strict";var w=e("../../lib");var n=e("../../lib/regex").counter;var a=e("../../plots/domain").attributes;var i=e("../../plots/cartesian/constants").idRegex;var A=e("../../plot_api/plot_template");var T={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:true,dimensions:2,items:{valType:"enumerated",values:[n("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:true,items:{valType:"enumerated",values:[i.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:true,items:{valType:"enumerated",values:[i.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:a({name:"grid",editType:"plot",noGridCell:true},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function P(e,t,r){var n=t[r+"axes"];var a=Object.keys((e._splomAxes||{})[r]||{});if(Array.isArray(n))return n;if(a.length)return a}function o(e,t){var r=e.grid||{};var n=P(t,r,"x");var a=P(t,r,"y");if(!e.grid&&!n&&!a)return;var i=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]);var o=Array.isArray(n);var s=Array.isArray(a);var l=o&&n!==r.xaxes&&s&&a!==r.yaxes;var c,u;if(i){c=r.subplots.length;u=r.subplots[0].length}else{if(s)c=a.length;if(o)u=n.length}var f=A.newContainer(t,"grid");function d(e,t){return w.coerce(r,f,T,e,t)}var h=d("rows",c);var p=d("columns",u);if(!(h*p>1)){delete t.grid;return}if(!i&&!o&&!s){var v=d("pattern")==="independent";if(v)i=true}f._hasSubplotGrid=i;var g=d("roworder");var m=g==="top to bottom";var _=i?.2:.1;var y=i?.3:.1;var b,x;if(l&&t._splomGridDflt){b=t._splomGridDflt.xside;x=t._splomGridDflt.yside}f._domains={x:k("x",d,_,b,p),y:k("y",d,y,x,h,m)}}function k(e,t,r,n,a,i){var o=t(e+"gap",r);var s=t("domain."+e);t(e+"side",n);var l=new Array(a);var c=s[0];var u=(s[1]-c)/(a-o);var f=u*(1-o);for(var d=0;d<a;d++){var h=c+u*d;l[i?a-1-d:d]=[h,h+f]}return l}function s(e,t){var r=t.grid;if(!r||!r._domains)return;var n=e.grid||{};var a=t._subplots;var i=r._hasSubplotGrid;var o=r.rows;var s=r.columns;var l=r.pattern==="independent";var c,u,f,d,h,p,v;var g=r._axisMap={};if(i){var m=n.subplots||[];p=r.subplots=new Array(o);var _=1;for(c=0;c<o;c++){var y=p[c]=new Array(s);var b=m[c]||[];for(u=0;u<s;u++){if(l){h=_===1?"xy":"x"+_+"y"+_;_++}else h=b[u];y[u]="";if(a.cartesian.indexOf(h)!==-1){v=h.indexOf("y");f=h.slice(0,v);d=h.slice(v);if(g[f]!==undefined&&g[f]!==u||g[d]!==undefined&&g[d]!==c){continue}y[u]=h;g[f]=u;g[d]=c}}}}else{var x=P(t,n,"x");var w=P(t,n,"y");r.xaxes=I(x,a.xaxis,s,g,"x");r.yaxes=I(w,a.yaxis,o,g,"y")}var A=r._anchors={};var T=r.roworder==="top to bottom";for(var k in g){var M=k.charAt(0);var S=r[M+"side"];var C,L,E;if(S.length<8){A[k]="free"}else if(M==="x"){if(S.charAt(0)==="t"===T){C=0;L=1;E=o}else{C=o-1;L=-1;E=-1}if(i){var D=g[k];for(c=C;c!==E;c+=L){h=p[c][D];if(!h)continue;v=h.indexOf("y");if(h.slice(0,v)===k){A[k]=h.slice(v);break}}}else{for(c=C;c!==E;c+=L){d=r.yaxes[c];if(a.cartesian.indexOf(k+d)!==-1){A[k]=d;break}}}}else{if(S.charAt(0)==="l"){C=0;L=1;E=s}else{C=s-1;L=-1;E=-1}if(i){var O=g[k];for(c=C;c!==E;c+=L){h=p[O][c];if(!h)continue;v=h.indexOf("y");if(h.slice(v)===k){A[k]=h.slice(0,v);break}}}else{for(c=C;c!==E;c+=L){f=r.xaxes[c];if(a.cartesian.indexOf(f+k)!==-1){A[k]=f;break}}}}}}function I(e,r,t,n,a){var i=new Array(t);var o;function s(e,t){if(r.indexOf(t)!==-1&&n[t]===undefined){i[e]=t;n[t]=e}else i[e]=""}if(Array.isArray(e)){for(o=0;o<t;o++){s(o,e[o])}}else{s(0,a);for(o=1;o<t;o++){s(o,a+(o+1))}}return i}t.exports={moduleType:"component",name:"grid",schema:{layout:{grid:T}},layoutAttributes:T,sizeDefaults:o,contentDefaults:s}},{"../../lib":285,"../../lib/regex":301,"../../plot_api/plot_template":320,"../../plots/cartesian/constants":338,"../../plots/domain":359}],200:[function(e,t,r){"use strict";var n=e("../../plots/cartesian/constants");var a=e("../../plot_api/plot_template").templatedArray;var i=e("../../constants/axis_placeable_objects");t.exports=a("image",{visible:{valType:"boolean",dflt:true,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",n.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",n.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":261,"../../plot_api/plot_template":320,"../../plots/cartesian/constants":338}],201:[function(e,t,r){"use strict";var m=e("fast-isnumeric");var _=e("../../lib/to_log_range");t.exports=function e(t,r,n,a){r=r||{};var i=n==="log"&&r.type==="linear";var o=n==="linear"&&r.type==="log";if(!(i||o))return;var s=t._fullLayout.images;var l=r._id.charAt(0);var c;var u;for(var f=0;f<s.length;f++){c=s[f];u="images["+f+"].";if(c[l+"ref"]===r._id){var d=c[l];var h=c["size"+l];var p=null;var v=null;if(i){p=_(d,r.range);var g=h/Math.pow(10,p)/2;v=2*Math.log(g+Math.sqrt(1+g*g))/Math.LN10}else{p=Math.pow(10,d);v=p*(Math.pow(10,h/2)-Math.pow(10,-h/2))}if(!m(p)){p=null;v=null}else if(!m(v))v=null;a(u+l,p);a(u+"size"+l,v)}}}},{"../../lib/to_log_range":309,"fast-isnumeric":31}],202:[function(e,t,r){"use strict";var d=e("../../lib");var h=e("../../plots/cartesian/axes");var a=e("../../plots/array_container_defaults");var p=e("./attributes");var i="images";t.exports=function e(t,r){var n={name:i,handleItemDefaults:o};a(t,r,n)};function o(r,n,e){function t(e,t){return d.coerce(r,n,p,e,t)}var a=t("source");var i=t("visible",!!a);if(!i)return n;t("layer");t("xanchor");t("yanchor");t("sizex");t("sizey");t("sizing");t("opacity");var o={_fullLayout:e};var s=["x","y"];for(var l=0;l<2;l++){var c=s[l];var u=h.coerceRef(r,n,o,c,"paper",undefined);if(u!=="paper"){var f=h.getFromId(o,u);f._imgIndices.push(n._index)}h.coercePosition(n,o,t,u,c,0)}return n}},{"../../lib":285,"../../plots/array_container_defaults":326,"../../plots/cartesian/axes":331,"./attributes":200}],203:[function(e,t,r){"use strict";var b=e("@plotly/d3");var x=e("../drawing");var w=e("../../plots/cartesian/axes");var v=e("../../plots/cartesian/axis_ids");var g=e("../../constants/xmlns_namespaces");t.exports=function e(m){var _=m._fullLayout;var t=[];var r={};var n=[];var a;var i;for(i=0;i<_.images.length;i++){var o=_.images[i];if(o.visible){if(o.layer==="below"&&o.xref!=="paper"&&o.yref!=="paper"){a=v.ref2id(o.xref)+v.ref2id(o.yref);var s=_._plots[a];if(!s){n.push(o);continue}if(s.mainplot){a=s.mainplot.id}if(!r[a]){r[a]=[]}r[a].push(o)}else if(o.layer==="above"){t.push(o)}else{n.push(o)}}}var y={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function l(r){var a=b.select(this);if(this._imgSrc===r.source){return}a.attr("xmlns",g.svg);if(r.source&&r.source.slice(0,5)==="data:"){a.attr("xlink:href",r.source);this._imgSrc=r.source}else{var e=new Promise(function(n){var e=new Image;this.img=e;e.setAttribute("crossOrigin","anonymous");e.onerror=t;e.onload=function(){var e=document.createElement("canvas");e.width=this.width;e.height=this.height;var t=e.getContext("2d");t.drawImage(this,0,0);var r=e.toDataURL("image/png");a.attr("xlink:href",r);n()};a.on("error",t);e.src=r.source;this._imgSrc=r.source;function t(){a.remove();n()}}.bind(this));m._promises.push(e)}}function c(e){var t=b.select(this);var r=w.getFromId(m,e.xref);var n=w.getFromId(m,e.yref);var a=w.getRefType(e.xref)==="domain";var i=w.getRefType(e.yref)==="domain";var o=_._size;var s,l;if(r!==undefined){s=typeof e.xref==="string"&&a?r._length*e.sizex:Math.abs(r.l2p(e.sizex)-r.l2p(0))}else{s=e.sizex*o.w}if(n!==undefined){l=typeof e.yref==="string"&&i?n._length*e.sizey:Math.abs(n.l2p(e.sizey)-n.l2p(0))}else{l=e.sizey*o.h}var c=s*y.x[e.xanchor].offset;var u=l*y.y[e.yanchor].offset;var f=y.x[e.xanchor].sizing+y.y[e.yanchor].sizing;var d,h;if(r!==undefined){d=typeof e.xref==="string"&&a?r._length*e.x+r._offset:r.r2p(e.x)+r._offset}else{d=e.x*o.w+o.l}d+=c;if(n!==undefined){h=typeof e.yref==="string"&&i?n._length*(1-e.y)+n._offset:n.r2p(e.y)+n._offset}else{h=o.h-e.y*o.h+o.t}h+=u;switch(e.sizing){case"fill":f+=" slice";break;case"stretch":f="none";break}t.attr({x:d,y:h,width:s,height:l,preserveAspectRatio:f,opacity:e.opacity});var p=r&&w.getRefType(e.xref)!=="domain"?r._id:"";var v=n&&w.getRefType(e.yref)!=="domain"?n._id:"";var g=p+v;x.setClipUrl(t,g?"clip"+_._uid+g:null,m)}var u=_._imageLowerLayer.selectAll("image").data(n);var f=_._imageUpperLayer.selectAll("image").data(t);u.enter().append("image");f.enter().append("image");u.exit().remove();f.exit().remove();u.each(function(e){l.bind(this)(e);c.bind(this)(e)});f.each(function(e){l.bind(this)(e);c.bind(this)(e)});var d=Object.keys(_._plots);for(i=0;i<d.length;i++){a=d[i];var h=_._plots[a];if(!h.imagelayer)continue;var p=h.imagelayer.selectAll("image").data(r[a]||[]);p.enter().append("image");p.exit().remove();p.each(function(e){l.bind(this)(e);c.bind(this)(e)})}}},{"../../constants/xmlns_namespaces":266,"../../plots/cartesian/axes":331,"../../plots/cartesian/axis_ids":335,"../drawing":177,"@plotly/d3":20}],204:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":344,"./attributes":200,"./convert_coords":201,"./defaults":202,"./draw":203}],205:[function(e,t,r){"use strict";var n=e("../../plots/font_attributes");var a=e("../color/attributes");t.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:n({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",false],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",false],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:n({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":360,"../color/attributes":154}],206:[function(e,t,r){"use strict";t.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],207:[function(e,t,r){"use strict";var x=e("../../registry");var w=e("../../lib");var A=e("../../plot_api/plot_template");var T=e("./attributes");var k=e("../../plots/layout_attributes");var M=e("./helpers");t.exports=function e(t,r,n){var a=t.legend||{};var i=0;var o=false;var s="normal";for(var l=0;l<n.length;l++){var c=n[l];if(!c.visible)continue;if(c.showlegend||c._dfltShowLegend&&!(c._module&&c._module.attributes&&c._module.attributes.showlegend&&c._module.attributes.showlegend.dflt===false)){i++;if(c.showlegend){o=true;if(x.traceIs(c,"pie-like")||c._input.showlegend===true){i++}}}if(x.traceIs(c,"bar")&&r.barmode==="stack"||["tonextx","tonexty"].indexOf(c.fill)!==-1){s=M.isGrouped({traceorder:s})?"grouped+reversed":"reversed"}if(c.legendgroup!==undefined&&c.legendgroup!==""){s=M.isReversed({traceorder:s})?"reversed+grouped":"grouped"}}var u=w.coerce(t,r,k,"showlegend",o&&i>1);if(u===false&&!a.uirevision)return;var f=A.newContainer(r,"legend");function d(e,t){return w.coerce(a,f,T,e,t)}d("uirevision",r.uirevision);if(u===false)return;d("bgcolor",r.paper_bgcolor);d("bordercolor");d("borderwidth");var h=w.coerceFont(d,"font",r.font);var p=d("orientation");var v=p==="h";var g,m,_;if(v){g=0;if(x.getComponentMethod("rangeslider","isVisible")(t.xaxis)){m=1.1;_="bottom"}else{m=-.1;_="top"}}else{g=1.02;m=1;_="auto"}d("traceorder",s);if(M.isGrouped(r.legend))d("tracegroupgap");d("itemsizing");d("itemwidth");d("itemclick");d("itemdoubleclick");d("x",g);d("xanchor");d("y",m);d("yanchor",_);d("valign");w.noneOrAll(a,f,["x","y"]);var y=d("title.text");if(y){d("title.side",v?"left":"top");var b=w.extendFlat({},h,{size:w.bigFont(h.size)});w.coerceFont(d,"title.font",b)}}},{"../../lib":285,"../../plot_api/plot_template":320,"../../plots/layout_attributes":364,"../../registry":373,"./attributes":205,"./helpers":211}],208:[function(e,t,r){"use strict";var F=e("@plotly/d3");var R=e("../../lib");var o=e("../../plots/plots");var z=e("../../registry");var c=e("../../lib/events");var N=e("../dragelement");var j=e("../drawing");var s=e("../color");var m=e("../../lib/svg_text_utils");var u=e("./handle_click");var B=e("./constants");var n=e("../../constants/alignment");var _=n.LINE_SPACING;var H=n.FROM_TL;var i=n.FROM_BR;var l=e("./get_legend_data");var f=e("./style");var U=e("./helpers");var y=1;t.exports=function e(t,r){if(!r)r=t._fullLayout.legend||{};return a(t,r)};function a(T,k){var M=T._fullLayout;var S="legend"+M._uid;var C;var L=k._inHover;if(L){C=k.layer;S+="-hover"}else{C=M._infolayer}if(!C)return;if(!T._legendMouseDownTime)T._legendMouseDownTime=0;var e;if(!L){if(!T.calcdata)return;e=M.showlegend&&l(T.calcdata,k)}else{if(!k.entries)return;e=l(k.entries,k)}var r=M.hiddenlabels||[];if(!L&&(!M.showlegend||!e.length)){C.selectAll(".legend").remove();M._topdefs.select("#"+S).remove();return o.autoMargin(T,"legend")}var E=R.ensureSingle(C,"g","legend",function(e){if(!L)e.attr("pointer-events","all")});var D=R.ensureSingleById(M._topdefs,"clipPath",S,function(e){e.append("rect")});var O=R.ensureSingle(E,"rect","bg",function(e){e.attr("shape-rendering","crispEdges")});O.call(s.stroke,k.bordercolor).call(s.fill,k.bgcolor).style("stroke-width",k.borderwidth+"px");var P=R.ensureSingle(E,"g","scrollbox");var t=k.title;k._titleWidth=0;k._titleHeight=0;if(t.text){var n=R.ensureSingle(P,"text","legendtitletext");n.attr("text-anchor","start").call(j.font,t.font).text(t.text);v(n,P,T,k,y)}else{P.selectAll(".legendtitletext").remove()}var I=R.ensureSingle(E,"rect","scrollbar",function(e){e.attr(B.scrollBarEnterAttrs).call(s.fill,B.scrollBarColor)});var a=P.selectAll("g.groups").data(e);a.enter().append("g").attr("class","groups");a.exit().remove();var i=a.selectAll("g.traces").data(R.identity);i.enter().append("g").attr("class","traces");i.exit().remove();i.style("opacity",function(e){var t=e[0].trace;if(z.traceIs(t,"pie-like")){return r.indexOf(e[0].label)!==-1?.5:1}else{return t.visible==="legendonly"?.5:1}}).each(function(){F.select(this).call(d,T,k)}).call(f,T,k).each(function(){if(!L)F.select(this).call(p,T)});R.syncOrAsync([o.previousPromises,function(){return b(T,a,i,k)},function(){if(!L&&Y(T))return;var a=M._size;var n=k.borderwidth;var e=a.l+a.w*k.x-H[G(k)]*k._width;var t=a.t+a.h*(1-k.y)-H[W(k)]*k._effHeight;if(!L&&M.margin.autoexpand){var r=e;var i=t;e=R.constrain(e,0,M.width-k._width);t=R.constrain(t,0,M.height-k._effHeight);if(e!==r){R.log("Constrain legend.x to make legend fit inside graph")}if(t!==i){R.log("Constrain legend.y to make legend fit inside graph")}}if(!L)j.setTranslate(E,e,t);I.on(".drag",null);E.on("wheel",null);if(L||k._height<=k._maxHeight||T._context.staticPlot){var o=k._effHeight;if(L)o=k._height;O.attr({width:k._width-n,height:o-n,x:n/2,y:n/2});j.setTranslate(P,0,0);D.select("rect").attr({width:k._width-2*n,height:o-2*n,x:n,y:n});j.setClipUrl(P,S,T);j.setRect(I,0,0,0,0);delete k._scrollY}else{var s=Math.max(B.scrollBarMinHeight,k._effHeight*k._effHeight/k._height);var l=k._effHeight-s-2*B.scrollBarMargin;var c=k._height-k._effHeight;var u=l/c;var f=Math.min(k._scrollY||0,c);O.attr({width:k._width-2*n+B.scrollBarWidth+B.scrollBarMargin,height:k._effHeight-n,x:n/2,y:n/2});D.select("rect").attr({width:k._width-2*n+B.scrollBarWidth+B.scrollBarMargin,height:k._effHeight-2*n,x:n,y:n+f});j.setClipUrl(P,S,T);y(f,s,u);E.on("wheel",function(){f=R.constrain(k._scrollY+F.event.deltaY/l*c,0,c);y(f,s,u);if(f!==0&&f!==c){F.event.preventDefault()}});var d,h,p;var v=function(e,t,r){var n=(r-t)/u+e;return R.constrain(n,0,c)};var g=function(e,t,r){var n=(t-r)/u+e;return R.constrain(n,0,c)};var m=F.behavior.drag().on("dragstart",function(){var e=F.event.sourceEvent;if(e.type==="touchstart"){d=e.changedTouches[0].clientY}else{d=e.clientY}p=f}).on("drag",function(){var e=F.event.sourceEvent;if(e.buttons===2||e.ctrlKey)return;if(e.type==="touchmove"){h=e.changedTouches[0].clientY}else{h=e.clientY}f=v(p,d,h);y(f,s,u)});I.call(m);var _=F.behavior.drag().on("dragstart",function(){var e=F.event.sourceEvent;if(e.type==="touchstart"){d=e.changedTouches[0].clientY;p=f}}).on("drag",function(){var e=F.event.sourceEvent;if(e.type==="touchmove"){h=e.changedTouches[0].clientY;f=g(p,d,h);y(f,s,u)}});P.call(_)}function y(e,t,r){k._scrollY=T._fullLayout.legend._scrollY=e;j.setTranslate(P,0,-e);j.setRect(I,k._width,B.scrollBarMargin+e*r,B.scrollBarWidth,t);D.select("rect").attr("y",n+e)}if(T._context.edits.legendPosition){var b,x,w,A;E.classed("cursor-move",true);N.init({element:E.node(),gd:T,prepFn:function(){var e=j.getTranslate(E);w=e.x;A=e.y},moveFn:function(e,t){var r=w+e;var n=A+t;j.setTranslate(E,r,n);b=N.align(r,0,a.l,a.l+a.w,k.xanchor);x=N.align(n,0,a.t+a.h,a.t,k.yanchor)},doneFn:function(){if(b!==undefined&&x!==undefined){z.call("_guiRelayout",T,{"legend.x":b,"legend.y":x})}},clickFn:function(e,t){var r=C.selectAll("g.traces").filter(function(){var e=this.getBoundingClientRect();return t.clientX>=e.left&&t.clientX<=e.right&&t.clientY>=e.top&&t.clientY<=e.bottom});if(r.size()>0){V(T,E,r,e,t)}}})}}],T)}function V(e,t,r,n,a){var i=r.data()[0][0].trace;var o={event:a,node:r.node(),curveNumber:i.index,expandedIndex:i._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};if(i._group){o.group=i._group}if(z.traceIs(i,"pie-like")){o.label=r.datum()[0].label}var s=c.triggerHandler(e,"plotly_legendclick",o);if(s===false)return;if(n===1){t._clickTimeout=setTimeout(function(){if(!e._fullLayout)return;u(r,e,n)},e._context.doubleClickDelay)}else if(n===2){if(t._clickTimeout)clearTimeout(t._clickTimeout);e._legendMouseDownTime=0;var l=c.triggerHandler(e,"plotly_legenddoubleclick",o);if(l!==false)u(r,e,n)}}function d(o,s,l){var c=o.data()[0][0];var u=c.trace;var e=z.traceIs(u,"pie-like");var t=!l._inHover&&s._context.edits.legendText&&!e;var f=l._maxNameLength;var r,n;if(c.groupTitle){r=c.groupTitle.text;n=c.groupTitle.font}else{n=l.font;if(!l.entries){r=e?c.label:u.name;if(u._meta){r=R.templateString(r,u._meta)}}else{r=c.text}}var a=R.ensureSingle(o,"text","legendtext");a.attr("text-anchor","start").call(j.font,n).text(t?h(r,f):r);var i=l.itemwidth+B.itemGap*2;m.positionText(a,i,0);if(t){a.call(m.makeEditable,{gd:s,text:r}).call(v,o,s,l).on("edit",function(e){this.text(h(e,f)).call(v,o,s,l);var t=c.trace._fullInput||{};var r={};if(z.hasTransform(t,"groupby")){var n=z.getTransformIndices(t,"groupby");var a=n[n.length-1];var i=R.keyedContainer(t,"transforms["+a+"].styles","target","value.name");i.set(c.trace._group,e);r=i.constructUpdate()}else{r.name=e}return z.call("_guiRestyle",s,r,u.index)})}else{v(a,o,s,l)}}function h(e,t){var r=Math.max(4,t);if(e&&e.trim().length>=r/2)return e;e=e||"";for(var n=r-e.length;n>0;n--)e+=" ";return e}function p(t,r){var n=r._context.doubleClickDelay;var e;var a=1;var i=R.ensureSingle(t,"rect","legendtoggle",function(e){if(!r._context.staticPlot){e.style("cursor","pointer").attr("pointer-events","all")}e.call(s.fill,"rgba(0,0,0,0)")});if(r._context.staticPlot)return;i.on("mousedown",function(){e=(new Date).getTime();if(e-r._legendMouseDownTime<n){a+=1}else{a=1;r._legendMouseDownTime=e}});i.on("mouseup",function(){if(r._dragged||r._editing)return;var e=r._fullLayout.legend;if((new Date).getTime()-r._legendMouseDownTime>n){a=Math.max(a-1,1)}V(r,e,t,a,F.event)})}function v(e,t,r,n,a){if(n._inHover)e.attr("data-notex",true);m.convertToTspans(e,r,function(){g(t,r,n,a)})}function g(e,t,r,n){var a=e.data()[0][0];if(!r._inHover&&a&&!a.trace.showlegend){e.remove();return}var i=e.select("g[class*=math-group]");var o=i.node();if(!r)r=t._fullLayout.legend;var s=r.borderwidth;var l;if(n===y){l=r.title.font}else if(a.groupTitle){l=a.groupTitle.font}else{l=r.font}var c=l.size*_;var u,f;if(o){var d=j.bBox(o);u=d.height;f=d.width;if(n===y){j.setTranslate(i,s,s+u*.75)}else{j.setTranslate(i,0,u*.25)}}else{var h=e.select(n===y?".legendtitletext":".legendtext");var p=m.lineCount(h);var v=h.node();u=c*p;f=v?j.bBox(v).width:0;if(n===y){if(r.title.side==="left"){f+=B.itemGap*2}m.positionText(h,s+B.titlePad,s+c)}else{var g=B.itemGap*2+r.itemwidth;if(a.groupTitle){g=B.itemGap;f-=r.itemwidth}m.positionText(h,g,-c*((p-1)/2-.3))}}if(n===y){r._titleWidth=f;r._titleHeight=u}else{a.lineHeight=c;a.height=Math.max(u,16)+3;a.width=f}}function q(e){var t=0;var r=0;var n=e.title.side;if(n){if(n.indexOf("left")!==-1){t=e._titleWidth}if(n.indexOf("top")!==-1){r=e._titleHeight}}return[t,r]}function b(e,t,r,a){var n=e._fullLayout;if(!a)a=n.legend;var i=n._size;var o=U.isVertical(a);var s=U.isGrouped(a);var l=a.borderwidth;var c=2*l;var u=B.itemGap;var f=a.itemwidth+u*2;var d=2*(l+u);var h=W(a);var p=a.y<0||a.y===0&&h==="top";var v=a.y>1||a.y===1&&h==="bottom";var g=a.tracegroupgap;a._maxHeight=Math.max(p||v?n.height/2:i.h,30);var m=0;a._width=0;a._height=0;var _=q(a);if(o){r.each(function(e){var t=e[0].height;j.setTranslate(this,l+_[0],l+_[1]+a._height+t/2+u);a._height+=t;a._width=Math.max(a._width,e[0].width)});m=f+a._width;a._width+=u+f+c;a._height+=d;if(s){t.each(function(e,t){j.setTranslate(this,0,t*a.tracegroupgap)});a._height+=(a._lgroupsLength-1)*a.tracegroupgap}}else{var y=G(a);var b=a.x<0||a.x===0&&y==="right";var x=a.x>1||a.x===1&&y==="left";var w=v||p;var A=n.width/2;a._maxWidth=Math.max(b?w&&y==="left"?i.l+i.w:A:x?w&&y==="right"?i.r+i.w:A:i.w,2*f);var T=0;var k=0;r.each(function(e){var t=e[0].width+f;T=Math.max(T,t);k+=t});m=null;var M=0;if(s){var S=0;var C=0;var L=0;t.each(function(){var r=0;var n=0;F.select(this).selectAll("g.traces").each(function(e){var t=e[0].height;j.setTranslate(this,_[0],_[1]+l+u+t/2+n);n+=t;r=Math.max(r,f+e[0].width)});S=Math.max(S,n);var e=r+u;if(e+l+C>a._maxWidth){M=Math.max(M,C);C=0;L+=S+g;S=n}j.setTranslate(this,C,L);C+=e});a._width=Math.max(M,C)+l;a._height=L+S+d}else{var E=r.size();var D=k+c+(E-1)*u<a._maxWidth;var O=0;var P=0;var I=0;var R=0;r.each(function(e){var t=e[0].height;var r=f+e[0].width;var n=(D?r:T)+u;if(n+l+P-u>=a._maxWidth){M=Math.max(M,R);P=0;I+=O;a._height+=O;O=0}j.setTranslate(this,_[0]+l+P,_[1]+l+I+t/2+u);R=P+r+u;P+=n;O=Math.max(O,t)});if(D){a._width=P+c;a._height=O+d}else{a._width=Math.max(M,R)+c;a._height+=O+d}}}a._width=Math.ceil(Math.max(a._width+_[0],a._titleWidth+2*(l+B.titlePad)));a._height=Math.ceil(Math.max(a._height+_[1],a._titleHeight+2*(l+B.itemGap)));a._effHeight=Math.min(a._height,a._maxHeight);var z=e._context.edits;var N=z.legendText||z.legendPosition;r.each(function(e){var t=F.select(this).select(".legendtoggle");var r=e[0].height;var n=N?f:m||f+e[0].width;if(!o)n+=u/2;j.setRect(t,0,-r/2,n,r)})}function Y(e){var t=e._fullLayout;var r=t.legend;var n=G(r);var a=W(r);return o.autoMargin(e,"legend",{x:r.x,y:r.y,l:r._width*H[n],r:r._width*i[n],b:r._effHeight*i[a],t:r._effHeight*H[a]})}function G(e){return R.isRightAnchor(e)?"right":R.isCenterAnchor(e)?"center":"left"}function W(e){return R.isBottomAnchor(e)?"bottom":R.isMiddleAnchor(e)?"middle":"top"}},{"../../constants/alignment":260,"../../lib":285,"../../lib/events":278,"../../lib/svg_text_utils":307,"../../plots/plots":366,"../../registry":373,"../color":155,"../dragelement":174,"../drawing":177,"./constants":206,"./get_legend_data":209,"./handle_click":210,"./helpers":211,"./style":213,"@plotly/d3":20}],209:[function(e,t,r){"use strict";var L=e("../../registry");var E=e("./helpers");t.exports=function e(t,n){var r=E.isGrouped(n);var a=E.isReversed(n);var i={};var o=[];var s=false;var l={};var c=0;var u=0;var f,d;function h(e,t){if(e===""||!E.isGrouped(n)){var r="~~i"+c;o.push(r);i[r]=[t];c++}else if(o.indexOf(e)===-1){o.push(e);s=true;i[e]=[t]}else{i[e].push(t)}}for(f=0;f<t.length;f++){var p=t[f];var v=p[0];var g=v.trace;var m=g.legendgroup;if(!n._inHover&&(!g.visible||!g.showlegend))continue;if(L.traceIs(g,"pie-like")){if(!l[m])l[m]={};for(d=0;d<p.length;d++){var _=p[d].label;if(!l[m][_]){h(m,{label:_,color:p[d].color,i:p[d].i,trace:g,pts:p[d].pts});l[m][_]=true;u=Math.max(u,(_||"").length)}}}else{h(m,v);u=Math.max(u,(g.name||"").length)}}if(!o.length)return[];var y=!s||!r;var b=[];for(f=0;f<o.length;f++){var x=i[o[f]];if(y){b.push(x[0])}else{b.push(x)}}if(y)b=[b];for(f=0;f<b.length;f++){var w=Infinity;for(d=0;d<b[f].length;d++){var A=b[f][d].trace.legendrank;if(w>A)w=A}b[f][0]._groupMinRank=w;b[f][0]._preGroupSort=f}var T=function(e,t){return e[0]._groupMinRank-t[0]._groupMinRank||e[0]._preGroupSort-t[0]._preGroupSort};var k=function(e,t){return e.trace.legendrank-t.trace.legendrank||e._preSort-t._preSort};b.forEach(function(e,t){e[0]._preGroupSort=t});b.sort(T);for(f=0;f<b.length;f++){b[f].forEach(function(e,t){e._preSort=t});b[f].sort(k);var M=b[f][0];var S=null;for(d=0;d<b[f].length;d++){var C=b[f][d].trace.legendgrouptitle;if(C&&C.text){S=C;break}}if(a)b[f].reverse();if(S){b[f].unshift({i:-1,groupTitle:S,trace:{showlegend:M.trace.showlegend}})}for(d=0;d<b[f].length;d++){b[f][d]=[b[f][d]]}}n._lgroupsLength=b.length;n._maxNameLength=u;return b}},{"../../registry":373,"./helpers":211}],210:[function(e,t,r){"use strict";var F=e("../../lib");var j=e("../../registry");var B=true;t.exports=function e(t,r,n){var a=r._fullLayout;if(r._dragged||r._editing)return;var i=a.legend.itemclick;var o=a.legend.itemdoubleclick;if(n===1&&i==="toggle"&&o==="toggleothers"&&B&&r.data&&r._context.showTips){F.notifier(F._(r,"Double-click on legend to isolate one trace"),"long");B=false}else{B=false}var s;if(n===1)s=i;else if(n===2)s=o;if(!s)return;var l=a.hiddenlabels?a.hiddenlabels.slice():[];var c=t.data()[0][0];if(c.groupTitle)return;var u=r._fullData;var f=c.trace;var d=f.legendgroup;var h,p,v,g,m,_;var y={};var b=[];var x=[];var w=[];function A(e,t,r){var n=b.indexOf(e);var a=y[t];if(!a){a=y[t]=[]}if(b.indexOf(e)===-1){b.push(e);n=b.length-1}a[n]=r;return n}function T(e,t){var r=e._fullInput;if(j.hasTransform(r,"groupby")){var n=x[r.index];if(!n){var a=j.getTransformIndices(r,"groupby");var i=a[a.length-1];n=F.keyedContainer(r,"transforms["+i+"].styles","target","value.visible");x[r.index]=n}var o=n.get(e._group);if(o===undefined){o=true}if(o!==false){n.set(e._group,t)}w[r.index]=A(r.index,"visible",r.visible===false?false:true)}else{var s=r.visible===false?false:t;A(r.index,"visible",s)}}if(j.traceIs(f,"pie-like")){var k=c.label;var M=l.indexOf(k);if(s==="toggle"){if(M===-1)l.push(k);else l.splice(M,1)}else if(s==="toggleothers"){l=[];r.calcdata[0].forEach(function(e){if(k!==e.label){l.push(e.label)}});if(r._fullLayout.hiddenlabels&&r._fullLayout.hiddenlabels.length===l.length&&M===-1){l=[]}}j.call("_guiRelayout",r,"hiddenlabels",l)}else{var S=d&&d.length;var C=[];var L;if(S){for(h=0;h<u.length;h++){L=u[h];if(!L.visible)continue;if(L.legendgroup===d){C.push(h)}}}if(s==="toggle"){var E;switch(f.visible){case true:E="legendonly";break;case false:E=false;break;case"legendonly":E=true;break}if(S){for(h=0;h<u.length;h++){if(u[h].visible!==false&&u[h].legendgroup===d){T(u[h],E)}}}else{T(f,E)}}else if(s==="toggleothers"){var D,O,P,I;var R=true;for(h=0;h<u.length;h++){D=u[h]===f;P=u[h].showlegend!==true;if(D||P)continue;O=S&&u[h].legendgroup===d;if(!O&&u[h].visible===true&&!j.traceIs(u[h],"notLegendIsolatable")){R=false;break}}for(h=0;h<u.length;h++){if(u[h].visible===false)continue;if(j.traceIs(u[h],"notLegendIsolatable")){continue}switch(f.visible){case"legendonly":T(u[h],true);break;case true:I=R?true:"legendonly";D=u[h]===f;P=u[h].showlegend!==true&&!u[h].legendgroup;O=D||S&&u[h].legendgroup===d;T(u[h],O||P?true:I);break}}}for(h=0;h<x.length;h++){v=x[h];if(!v)continue;var z=v.constructUpdate();var N=Object.keys(z);for(p=0;p<N.length;p++){g=N[p];_=y[g]=y[g]||[];_[w[h]]=z[g]}}m=Object.keys(y);for(h=0;h<m.length;h++){g=m[h];for(p=0;p<b.length;p++){if(!y[g].hasOwnProperty(p)){y[g][p]=undefined}}}j.call("_guiRestyle",r,y,b)}}},{"../../lib":285,"../../registry":373}],211:[function(e,t,r){"use strict";r.isGrouped=function e(t){return(t.traceorder||"").indexOf("grouped")!==-1};r.isVertical=function e(t){return t.orientation!=="h"};r.isReversed=function e(t){return(t.traceorder||"").indexOf("reversed")!==-1}},{}],212:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":205,"./defaults":207,"./draw":208,"./style":213}],213:[function(e,t,r){"use strict";var k=e("@plotly/d3");var M=e("../../registry");var S=e("../../lib");var m=S.strTranslate;var C=e("../drawing");var L=e("../color");var E=e("../colorscale/helpers").extractOpts;var D=e("../../traces/scatter/subtypes");var _=e("../../traces/pie/style_one");var O=e("../../traces/pie/helpers").castOption;var P=e("./constants");var I=12;var R=5;var z=2;var N=10;var F=5;t.exports=function e(t,w,y){var r=w._fullLayout;if(!y)y=r.legend;var b=y.itemsizing==="constant";var A=y.itemwidth;var n=(A+P.itemGap*2)/2;var x=m(n,0);var T=function(e,t,r,n){var a;if(e+1){a=e}else if(t&&t.width>0){a=t.width}else{return 0}return b?n:Math.min(a,r)};t.each(function(e){var t=k.select(this);var r=S.ensureSingle(t,"g","layers");r.style("opacity",e[0].trace.opacity);var n=y.valign;var a=e[0].lineHeight;var i=e[0].height;if(n==="middle"||!a||!i){r.attr("transform",null)}else{var o={top:1,bottom:-1}[n];var s=o*(.5*(a-i+3));r.attr("transform",m(0,s))}var l=r.selectAll("g.legendfill").data([e]);l.enter().append("g").classed("legendfill",true);var c=r.selectAll("g.legendlines").data([e]);c.enter().append("g").classed("legendlines",true);var u=r.selectAll("g.legendsymbols").data([e]);u.enter().append("g").classed("legendsymbols",true);u.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",true)}).each(g).each(o).each(l).each(s).each(u).each(p).each(h).each(a).each(i).each(f).each(d);function a(e){var t=B(e);var r=t.showFill;var n=t.showLine;var a=t.showGradientLine;var i=t.showGradientFill;var o=t.anyFill;var s=t.anyLine;var l=e[0];var c=l.trace;var u,f;var d=E(c);var h=d.colorscale;var p=d.reversescale;var v=function(e){if(e.size()){var t="legendfill-"+c.uid;C.gradient(e,w,t,j(p),h,"fill")}};var g=function(e){if(e.size()){var t="legendline-"+c.uid;C.lineGroupStyle(e);C.gradient(e,w,t,j(p),h,"stroke")}};var m=D.hasMarkers(c)||!o?"M5,0":s?"M5,-2":"M5,-3";var _=k.select(this);var y=_.select(".legendfill").selectAll("path").data(r||i?[e]:[]);y.enter().append("path").classed("js-fill",true);y.exit().remove();y.attr("d",m+"h"+A+"v6h-"+A+"z").call(r?C.fillGroupStyle:v);if(n||a){var b=T(undefined,c.line,N,R);f=S.minExtend(c,{line:{width:b}});u=[S.minExtend(l,{trace:f})]}var x=_.select(".legendlines").selectAll("path").data(n||a?[u]:[]);x.enter().append("path").classed("js-line",true);x.exit().remove();x.attr("d",m+(a?"l"+A+",0.0001":"h"+A)).call(n?C.lineGroupStyle:g)}function i(e){var t=B(e);var r=t.anyFill;var n=t.anyLine;var a=t.showLine;var i=t.showMarker;var o=e[0];var s=o.trace;var l=!i&&!n&&!r&&D.hasText(s);var c,u;function f(e,t,r,n){var a=S.nestedProperty(s,e).get();var i=S.isArrayOrTypedArray(a)&&t?t(a):a;if(b&&i&&n!==undefined){i=n}if(r){if(i<r[0])return r[0];else if(i>r[1])return r[1]}return i}function d(e){if(o._distinct&&o.index&&e[o.index])return e[o.index];return e[0]}if(i||l||a){var h={};var p={};if(i){h.mc=f("marker.color",d);h.mx=f("marker.symbol",d);h.mo=f("marker.opacity",S.mean,[.2,1]);h.mlc=f("marker.line.color",d);h.mlw=f("marker.line.width",S.mean,[0,5],z);p.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var v=f("marker.size",S.mean,[2,16],I);h.ms=v;p.marker.size=v}if(a){p.line={width:f("line.width",d,[0,10],R)}}if(l){h.tx="Aa";h.tp=f("textposition",d);h.ts=10;h.tc=f("textfont.color",d);h.tf=f("textfont.family",d)}c=[S.minExtend(o,h)];u=S.minExtend(s,p);u.selectedpoints=null;u.texttemplate=null}var g=k.select(this).select("g.legendpoints");var m=g.selectAll("path.scatterpts").data(i?c:[]);m.enter().insert("path",":first-child").classed("scatterpts",true).attr("transform",x);m.exit().remove();m.call(C.pointStyle,u,w);if(i)c[0].mrc=3;var _=g.selectAll("g.pointtext").data(l?c:[]);_.enter().append("g").classed("pointtext",true).append("text").attr("transform",x);_.exit().remove();_.selectAll("text").call(C.textPointStyle,u,w)}function o(e){var a=e[0].trace;var t=a.type==="waterfall";if(e[0]._distinct&&t){var r=e[0].trace[e[0].dir].marker;e[0].mc=r.color;e[0].mlw=r.line.width;e[0].mlc=r.line.color;return c(e,this,"waterfall")}var n=[];if(a.visible&&t){n=e[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]}var i=k.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(n);i.enter().append("path").classed("legendwaterfall",true).attr("transform",x).style("stroke-miterlimit",1);i.exit().remove();i.each(function(e){var t=k.select(this);var r=a[e[0]].marker;var n=T(undefined,r.line,F,z);t.attr("d",e[1]).style("stroke-width",n+"px").call(L.fill,r.color);if(n){t.call(L.stroke,r.line.color)}})}function s(e){c(e,this)}function l(e){c(e,this,"funnel")}function c(e,t,r){var g=e[0].trace;var m=g.marker||{};var _=m.line||{};var n=!r?M.traceIs(g,"bar"):g.visible&&g.type===r;var a=k.select(t).select("g.legendpoints").selectAll("path.legend"+r).data(n?[e]:[]);a.enter().append("path").classed("legend"+r,true).attr("d","M6,6H-6V-6H6Z").attr("transform",x);a.exit().remove();a.each(function(e){var t=k.select(this);var r=e[0];var n=T(r.mlw,m.line,F,z);t.style("stroke-width",n+"px");var a=r.mcc;if(!y._inHover&&"mc"in r){var i=E(m);var o=i.mid;if(o===undefined)o=(i.max+i.min)/2;a=C.tryColorscale(m,"")(o)}var s=a||r.mc||m.color;var l=m.pattern;var c=l&&C.getPatternAttr(l.shape,0,"");if(c){var u=C.getPatternAttr(l.bgcolor,0,null);var f=C.getPatternAttr(l.fgcolor,0,null);var d=l.fgopacity;var h=H(l.size,8,10);var p=H(l.solidity,.5,1);var v="legend-"+g.uid;t.call(C.pattern,"legend",w,v,c,h,p,a,l.fillmode,u,f,d)}else{t.call(L.fill,s)}if(n)L.stroke(t,r.mlc||_.color)})}function u(e){var n=e[0].trace;var a=k.select(this).select("g.legendpoints").selectAll("path.legendbox").data(n.visible&&M.traceIs(n,"box-violin")?[e]:[]);a.enter().append("path").classed("legendbox",true).attr("d","M6,6H-6V-6H6Z").attr("transform",x);a.exit().remove();a.each(function(){var e=k.select(this);if((n.boxpoints==="all"||n.points==="all")&&L.opacity(n.fillcolor)===0&&L.opacity((n.line||{}).color)===0){var t=S.minExtend(n,{marker:{size:b?I:S.constrain(n.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});a.call(C.pointStyle,t,w)}else{var r=T(undefined,n.line,F,z);e.style("stroke-width",r+"px").call(L.fill,n.fillcolor);if(r)L.stroke(e,n.line.color)}})}function f(e){var i=e[0].trace;var t=k.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(i.visible&&i.type==="candlestick"?[e,e]:[]);t.enter().append("path").classed("legendcandle",true).attr("d",function(e,t){if(t)return"M-15,0H-8M-8,6V-6H8Z";return"M15,0H8M8,-6V6H-8Z"}).attr("transform",x).style("stroke-miterlimit",1);t.exit().remove();t.each(function(e,t){var r=k.select(this);var n=i[t?"increasing":"decreasing"];var a=T(undefined,n.line,F,z);r.style("stroke-width",a+"px").call(L.fill,n.fillcolor);if(a)L.stroke(r,n.line.color)})}function d(e){var i=e[0].trace;var t=k.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(i.visible&&i.type==="ohlc"?[e,e]:[]);t.enter().append("path").classed("legendohlc",true).attr("d",function(e,t){if(t)return"M-15,0H0M-8,-6V0";return"M15,0H0M8,6V0"}).attr("transform",x).style("stroke-miterlimit",1);t.exit().remove();t.each(function(e,t){var r=k.select(this);var n=i[t?"increasing":"decreasing"];var a=T(undefined,n.line,F,z);r.style("fill","none").call(C.dashLine,n.line.dash,a);if(a)L.stroke(r,n.line.color)})}function h(e){v(e,this,"pie")}function p(e){v(e,this,"funnelarea")}function v(e,t,r){var n=e[0];var a=n.trace;var i=!r?M.traceIs(a,r):a.visible&&a.type===r;var o=k.select(t).select("g.legendpoints").selectAll("path.legend"+r).data(i?[e]:[]);o.enter().append("path").classed("legend"+r,true).attr("d","M6,6H-6V-6H6Z").attr("transform",x);o.exit().remove();if(o.size()){var s=(a.marker||{}).line;var l=T(O(s.width,n.pts),s,F,z);var c=S.minExtend(a,{marker:{line:{width:l}}});c.marker.line.color=s.color;var u=S.minExtend(n,{trace:c});_(o,u,c)}}function g(e){var u=e[0].trace;var f;var t=[];if(u.visible){switch(u.type){case"histogram2d":case"heatmap":t=[["M-15,-2V4H15V-2Z"]];f=true;break;case"choropleth":case"choroplethmapbox":t=[["M-6,-6V6H6V-6Z"]];f=true;break;case"densitymapbox":t=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]];f="radial";break;case"cone":t=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]];f=false;break;case"streamtube":t=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]];f=false;break;case"surface":t=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]];f=true;break;case"mesh3d":t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];f=false;break;case"volume":t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];f=true;break;case"isosurface":t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]];f=false;break}}var r=k.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(t);r.enter().append("path").classed("legend3dandfriends",true).attr("transform",x).style("stroke-miterlimit",1);r.exit().remove();r.each(function(e,t){var r=k.select(this);var n=E(u);var a=n.colorscale;var i=n.reversescale;var o=function(e){if(e.size()){var t="legendfill-"+u.uid;C.gradient(e,w,t,j(i,f==="radial"),a,"fill")}};var s;if(!a){var l=u.vertexcolor||u.facecolor||u.color;s=S.isArrayOrTypedArray(l)?l[t]||l[0]:l}else{if(!f){var c=a.length;s=t===0?a[i?c-1:0][1]:t===1?a[i?0:c-1][1]:a[Math.floor((c-1)/2)][1]}}r.attr("d",e[0]);if(s){r.call(L.fill,s)}else{r.call(o)}})}};function j(e,t){var r=t?"radial":"horizontal";return r+(e?"":"reversed")}function B(e){var t=e[0].trace;var r=t.contours;var n=D.hasLines(t);var a=D.hasMarkers(t);var i=t.visible&&t.fill&&t.fill!=="none";var o=false;var s=false;if(r){var l=r.coloring;if(l==="lines"){o=true}else{n=l==="none"||l==="heatmap"||r.showlines}if(r.type==="constraint"){i=r._operation!=="="}else if(l==="fill"||l==="heatmap"){s=true}}return{showMarker:a,showLine:n,showFill:i,showGradientLine:o,showGradientFill:s,anyLine:n||o,anyFill:i||s}}function H(e,t,r){if(e&&S.isArrayOrTypedArray(e))return t;if(e>r)return r;return e}},{"../../lib":285,"../../registry":373,"../../traces/pie/helpers":486,"../../traces/pie/style_one":492,"../../traces/scatter/subtypes":519,"../color":155,"../colorscale/helpers":166,"../drawing":177,"./constants":206,"@plotly/d3":20}],214:[function(e,t,r){"use strict";var n=e("./constants");t.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:true,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:true,dflt:"",editType:"modebar"}}},{"./constants":216}],215:[function(e,t,r){"use strict";var _=e("../../registry");var n=e("../../plots/plots");var y=e("../../plots/cartesian/axis_ids");var a=e("../../fonts/ploticon");var i=e("../shapes/draw").eraseActiveShape;var o=e("../../lib");var s=o._;var l=t.exports={};l.toImage={name:"toImage",title:function(e){var t=e._context.toImageButtonOptions||{};var r=t.format||"png";return r==="png"?s(e,"Download plot as a png"):s(e,"Download plot")},icon:a.camera,click:function(t){var r=t._context.toImageButtonOptions;var n={format:r.format||"png"};o.notifier(s(t,"Taking snapshot - this may take a few seconds"),"long");if(n.format!=="svg"&&o.isIE()){o.notifier(s(t,"IE only supports svg.  Changing format to svg."),"long");n.format="svg"}["filename","width","height","scale"].forEach(function(e){if(e in r){n[e]=r[e]}});_.call("downloadImage",t,n).then(function(e){o.notifier(s(t,"Snapshot succeeded")+" - "+e,"long")}).catch(function(){o.notifier(s(t,"Sorry, there was a problem downloading your snapshot!"),"long")})}};l.sendDataToCloud={name:"sendDataToCloud",title:function(e){return s(e,"Edit in Chart Studio")},icon:a.disk,click:function(e){n.sendDataToCloud(e)}};l.editInChartStudio={name:"editInChartStudio",title:function(e){return s(e,"Edit in Chart Studio")},icon:a.pencil,click:function(e){n.sendDataToCloud(e)}};l.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"dragmode",val:"zoom",icon:a.zoombox,click:c};l.pan2d={name:"pan2d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"dragmode",val:"pan",icon:a.pan,click:c};l.select2d={name:"select2d",_cat:"select",title:function(e){return s(e,"Box Select")},attr:"dragmode",val:"select",icon:a.selectbox,click:c};l.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return s(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:a.lasso,click:c};l.drawclosedpath={name:"drawclosedpath",title:function(e){return s(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:a.drawclosedpath,click:c};l.drawopenpath={name:"drawopenpath",title:function(e){return s(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:a.drawopenpath,click:c};l.drawline={name:"drawline",title:function(e){return s(e,"Draw line")},attr:"dragmode",val:"drawline",icon:a.drawline,click:c};l.drawrect={name:"drawrect",title:function(e){return s(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:a.drawrect,click:c};l.drawcircle={name:"drawcircle",title:function(e){return s(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:a.drawcircle,click:c};l.eraseshape={name:"eraseshape",title:function(e){return s(e,"Erase active shape")},icon:a.eraseshape,click:i};l.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:c};l.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:c};l.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return s(e,"Autoscale")},attr:"zoom",val:"auto",icon:a.autoscale,click:c};l.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return s(e,"Reset axes")},attr:"zoom",val:"reset",icon:a.home,click:c};l.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return s(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:a.tooltip_basic,gravity:"ne",click:c};l.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return s(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:a.tooltip_compare,gravity:"ne",click:c};function c(e,t){var r=t.currentTarget;var n=r.getAttribute("data-attr");var a=r.getAttribute("data-val")||true;var i=e._fullLayout;var o={};var s=y.list(e,null,true);var l=i._cartesianSpikesEnabled;var c,u;if(n==="zoom"){var f=a==="in"?.5:2;var d=(1+f)/2;var h=(1-f)/2;var p;for(u=0;u<s.length;u++){c=s[u];if(!c.fixedrange){p=c._name;if(a==="auto"){o[p+".autorange"]=true}else if(a==="reset"){if(c._rangeInitial===undefined){o[p+".autorange"]=true}else{var v=c._rangeInitial.slice();o[p+".range[0]"]=v[0];o[p+".range[1]"]=v[1]}if(c._showSpikeInitial!==undefined){o[p+".showspikes"]=c._showSpikeInitial;if(l==="on"&&!c._showSpikeInitial){l="off"}}}else{var g=[c.r2l(c.range[0]),c.r2l(c.range[1])];var m=[d*g[0]+h*g[1],d*g[1]+h*g[0]];o[p+".range[0]"]=c.l2r(m[0]);o[p+".range[1]"]=c.l2r(m[1])}}}}else{if(n==="hovermode"&&(a==="x"||a==="y")){a=i._isHoriz?"y":"x";r.setAttribute("data-val",a)}o[n]=a}i._cartesianSpikesEnabled=l;_.call("_guiRelayout",e,o)}l.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:a.zoombox,click:u};l.pan3d={name:"pan3d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:a.pan,click:u};l.orbitRotation={name:"orbitRotation",title:function(e){return s(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:a["3d_rotate"],click:u};l.tableRotation={name:"tableRotation",title:function(e){return s(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:a["z-axis"],click:u};function u(e,t){var r=t.currentTarget;var n=r.getAttribute("data-attr");var a=r.getAttribute("data-val")||true;var i=e._fullLayout._subplots.gl3d||[];var o={};var s=n.split(".");for(var l=0;l<i.length;l++){o[i[l]+"."+s[1]]=a}var c=a==="pan"?a:"zoom";o.dragmode=c;_.call("_guiRelayout",e,o)}l.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return s(e,"Reset camera to default")},attr:"resetDefault",icon:a.home,click:f};l.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return s(e,"Reset camera to last save")},attr:"resetLastSave",icon:a.movie,click:f};function f(e,t){var r=t.currentTarget;var n=r.getAttribute("data-attr");var a=n==="resetLastSave";var i=n==="resetDefault";var o=e._fullLayout;var s=o._subplots.gl3d||[];var l={};for(var c=0;c<s.length;c++){var u=s[c];var f=u+".camera";var d=u+".aspectratio";var h=u+".aspectmode";var p=o[u]._scene;var v;if(a){l[f+".up"]=p.viewInitial.up;l[f+".eye"]=p.viewInitial.eye;l[f+".center"]=p.viewInitial.center;v=true}else if(i){l[f+".up"]=null;l[f+".eye"]=null;l[f+".center"]=null;v=true}if(v){l[d+".x"]=p.viewInitial.aspectratio.x;l[d+".y"]=p.viewInitial.aspectratio.y;l[d+".z"]=p.viewInitial.aspectratio.z;l[h]=p.viewInitial.aspectmode}}_.call("_guiRelayout",e,l)}l.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:a.tooltip_basic,gravity:"ne",click:h};function d(e,t){var r=t.currentTarget;var n=r._previousVal;var a=e._fullLayout;var i=a._subplots.gl3d||[];var o=["xaxis","yaxis","zaxis"];var s={};var l={};if(n){l=n;r._previousVal=null}else{for(var c=0;c<i.length;c++){var u=i[c];var f=a[u];var d=u+".hovermode";s[d]=f.hovermode;l[d]=false;for(var h=0;h<3;h++){var p=o[h];var v=u+"."+p+".showspikes";l[v]=false;s[v]=f[p].showspikes}}r._previousVal=s}return l}function h(e,t){var r=d(e,t);_.call("_guiRelayout",e,r)}l.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:p};l.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:p};l.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return s(e,"Reset")},attr:"reset",val:null,icon:a.autoscale,click:p};l.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:a.tooltip_basic,gravity:"ne",click:g};function p(e,t){var r=t.currentTarget;var n=r.getAttribute("data-attr");var a=r.getAttribute("data-val")||true;var i=e._fullLayout;var o=i._subplots.geo||[];for(var s=0;s<o.length;s++){var l=o[s];var c=i[l];if(n==="zoom"){var u=c.projection.scale;var f=a==="in"?2*u:.5*u;_.call("_guiRelayout",e,l+".projection.scale",f)}}if(n==="reset"){x(e,"geo")}}l.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:a.tooltip_basic,gravity:"ne",click:g};l.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:a.tooltip_basic,gravity:"ne",click:g};function v(e){var t=e._fullLayout;if(t.hovermode)return false;if(t._has("cartesian")){return t._isHoriz?"y":"x"}return"closest"}function g(e){var t=v(e);_.call("_guiRelayout",e,"hovermode",t)}l.resetViewSankey={name:"resetSankeyGroup",title:function(e){return s(e,"Reset view")},icon:a.home,click:function(e){var t={"node.groups":[],"node.x":[],"node.y":[]};for(var r=0;r<e._fullData.length;r++){var n=e._fullData[r]._viewInitial;t["node.groups"].push(n.node.groups.slice());t["node.x"].push(n.node.x.slice());t["node.y"].push(n.node.y.slice())}_.call("restyle",e,t)}};l.toggleHover={name:"toggleHover",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:a.tooltip_basic,gravity:"ne",click:function(e,t){var r=d(e,t);r.hovermode=v(e);_.call("_guiRelayout",e,r)}};l.resetViews={name:"resetViews",title:function(e){return s(e,"Reset views")},icon:a.home,click:function(e,t){var r=t.currentTarget;r.setAttribute("data-attr","zoom");r.setAttribute("data-val","reset");c(e,t);r.setAttribute("data-attr","resetLastSave");f(e,t);x(e,"geo");x(e,"mapbox")}};l.toggleSpikelines={name:"toggleSpikelines",title:function(e){return s(e,"Toggle Spike Lines")},icon:a.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout;var r=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled=r==="on"?"off":"on";_.call("_guiRelayout",e,m(e))}};function m(e){var t=e._fullLayout;var r=t._cartesianSpikesEnabled==="on";var n=y.list(e,null,true);var a={};for(var i=0;i<n.length;i++){var o=n[i];a[o._name+".showspikes"]=r?true:o._showSpikeInitial}return a}l.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return s(e,"Reset view")},attr:"reset",icon:a.home,click:function(e){x(e,"mapbox")}};l.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:b};l.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:b};function b(e,t){var r=t.currentTarget;var n=r.getAttribute("data-val");var a=e._fullLayout;var i=a._subplots.mapbox||[];var o=1.05;var s={};for(var l=0;l<i.length;l++){var c=i[l];var u=a[c].zoom;var f=n==="in"?o*u:u/o;s[c+".zoom"]=f}_.call("_guiRelayout",e,s)}function x(e,t){var r=e._fullLayout;var n=r._subplots[t]||[];var a={};for(var i=0;i<n.length;i++){var o=n[i];var s=r[o]._subplot;var l=s.viewInitial;var c=Object.keys(l);for(var u=0;u<c.length;u++){var f=c[u];a[o+"."+f]=l[f]}}_.call("_guiRelayout",e,a)}},{"../../fonts/ploticon":268,"../../lib":285,"../../plots/cartesian/axis_ids":335,"../../plots/plots":366,"../../registry":373,"../shapes/draw":239}],216:[function(e,t,r){"use strict";var n=e("./buttons");var a=Object.keys(n);var i=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"];var o=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(i);var s=[];var l=function(e){if(o.indexOf(e._cat||e.name)!==-1)return;var t=e.name;var r=(e._cat||e.name).toLowerCase();if(s.indexOf(t)===-1)s.push(t);if(s.indexOf(r)===-1)s.push(r)};a.forEach(function(e){l(n[e])});s.sort();t.exports={DRAW_MODES:i,backButtons:o,foreButtons:s}},{"./buttons":215}],217:[function(e,t,r){"use strict";var s=e("../../lib");var l=e("../color");var c=e("../../plot_api/plot_template");var u=e("./attributes");t.exports=function e(t,r){var n=t.modebar||{};var a=c.newContainer(r,"modebar");function i(e,t){return s.coerce(n,a,u,e,t)}i("orientation");i("bgcolor",l.addOpacity(r.paper_bgcolor,.5));var o=l.contrast(l.rgb(r.modebar.bgcolor));i("color",l.addOpacity(o,.3));i("activecolor",l.addOpacity(o,.7));i("uirevision",r.uirevision);i("add");i("remove")}},{"../../lib":285,"../../plot_api/plot_template":320,"../color":155,"./attributes":214}],218:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"modebar",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),manage:e("./manage")}},{"./attributes":214,"./defaults":217,"./manage":219}],219:[function(e,t,r){"use strict";var n=e("../../plots/cartesian/axis_ids");var a=e("../../traces/scatter/subtypes");var i=e("../../registry");var P=e("../fx/helpers").isUnifiedHover;var s=e("./modebar");var I=e("./buttons");var R=e("./constants").DRAW_MODES;t.exports=function e(t){var r=t._fullLayout;var n=t._context;var a=r._modeBar;if(!n.displayModeBar&&!n.watermark){if(a){a.destroy();delete r._modeBar}return}if(!Array.isArray(n.modeBarButtonsToRemove)){throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "))}if(!Array.isArray(n.modeBarButtonsToAdd)){throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "))}var i=n.modeBarButtons;var o;if(Array.isArray(i)&&i.length){o=c(i)}else if(!n.displayModeBar&&n.watermark){o=[]}else{o=l(t)}if(a)a.update(t,o);else r._modeBar=s(t,o)};function l(e){var t=e._fullLayout;var r=e._fullData;var n=e._context;function a(e,t){if(typeof t==="string"){if(t.toLowerCase()===e.toLowerCase())return true}else{var r=t.name;var n=t._cat||t.name;if(r===e||n===e.toLowerCase())return true}return false}var i=t.modebar.add;if(typeof i==="string")i=[i];var o=t.modebar.remove;if(typeof o==="string")o=[o];var s=n.modeBarButtonsToAdd.concat(i.filter(function(e){for(var t=0;t<n.modeBarButtonsToRemove.length;t++){if(a(e,n.modeBarButtonsToRemove[t]))return false}return true}));var u=n.modeBarButtonsToRemove.concat(o.filter(function(e){for(var t=0;t<n.modeBarButtonsToAdd.length;t++){if(a(e,n.modeBarButtonsToAdd[t]))return false}return true}));var l=t._has("cartesian");var c=t._has("gl3d");var f=t._has("geo");var d=t._has("pie");var h=t._has("funnelarea");var p=t._has("gl2d");var v=t._has("ternary");var g=t._has("mapbox");var m=t._has("polar");var _=t._has("sankey");var y=z(t);var b=P(t.hovermode);var x=[];function w(e){if(!e.length)return;var t=[];for(var r=0;r<e.length;r++){var n=e[r];var a=I[n];var i=a.name.toLowerCase();var o=(a._cat||a.name).toLowerCase();var s=false;for(var l=0;l<u.length;l++){var c=u[l].toLowerCase();if(c===i||c===o){s=true;break}}if(s)continue;t.push(I[n])}x.push(t)}var A=["toImage"];if(n.showEditInChartStudio)A.push("editInChartStudio");else if(n.showSendToCloud)A.push("sendDataToCloud");w(A);var T=[];var k=[];var M=[];var S=[];if((l||p||d||h||v)+f+c+g+m>1){k=["toggleHover"];M=["resetViews"]}else if(f){T=["zoomInGeo","zoomOutGeo"];k=["hoverClosestGeo"];M=["resetGeo"]}else if(c){k=["hoverClosest3d"];M=["resetCameraDefault3d","resetCameraLastSave3d"]}else if(g){T=["zoomInMapbox","zoomOutMapbox"];k=["toggleHover"];M=["resetViewMapbox"]}else if(p){k=["hoverClosestGl2d"]}else if(d){k=["hoverClosestPie"]}else if(_){k=["hoverClosestCartesian","hoverCompareCartesian"];M=["resetViewSankey"]}else{k=["toggleHover"]}if(l){k=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]}if(F(r)||b){k=[]}if((l||p)&&!y){T=["zoomIn2d","zoomOut2d","autoScale2d"];if(M[0]!=="resetViews")M=["resetScale2d"]}if(c){S=["zoom3d","pan3d","orbitRotation","tableRotation"]}else if((l||p)&&!y||v){S=["zoom2d","pan2d"]}else if(g||f){S=["pan2d"]}else if(m){S=["zoom2d"]}if(N(r)){S.push("select2d","lasso2d")}var C=[];var L=function(e){if(C.indexOf(e)!==-1)return;if(k.indexOf(e)!==-1){C.push(e)}};if(Array.isArray(s)){var E=[];for(var D=0;D<s.length;D++){var O=s[D];if(typeof O==="string"){O=O.toLowerCase();if(R.indexOf(O)!==-1){if(t._has("mapbox")||t._has("cartesian")){S.push(O)}}else if(O==="togglespikelines"){L("toggleSpikelines")}else if(O==="togglehover"){L("toggleHover")}else if(O==="hovercompare"){L("hoverCompareCartesian")}else if(O==="hoverclosest"){L("hoverClosestCartesian");L("hoverClosestGeo");L("hoverClosest3d");L("hoverClosestGl2d");L("hoverClosestPie")}else if(O==="v1hovermode"){L("toggleHover");L("hoverClosestCartesian");L("hoverCompareCartesian");L("hoverClosestGeo");L("hoverClosest3d");L("hoverClosestGl2d");L("hoverClosestPie")}}else E.push(O)}s=E}w(S);w(T.concat(M));w(C);return j(x,s)}function z(e){var t=n.list({_fullLayout:e},null,true);for(var r=0;r<t.length;r++){if(!t[r].fixedrange){return false}}return true}function N(e){var t=false;for(var r=0;r<e.length;r++){if(t)break;var n=e[r];if(!n._module||!n._module.selectPoints)continue;if(i.traceIs(n,"scatter-like")){if(a.hasMarkers(n)||a.hasText(n)){t=true}}else if(i.traceIs(n,"box-violin")){if(n.boxpoints==="all"||n.points==="all"){t=true}}else{t=true}}return t}function F(e){for(var t=0;t<e.length;t++){if(!i.traceIs(e[t],"noHover"))return false}return true}function j(e,t){if(t.length){if(Array.isArray(t[0])){for(var r=0;r<t.length;r++){e.push(t[r])}}else e.push(t)}return e}function c(e){for(var t=0;t<e.length;t++){var r=e[t];for(var n=0;n<r.length;n++){var a=r[n];if(typeof a==="string"){if(I[a]!==undefined){e[t][n]=I[a]}else{throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}}}}return e}},{"../../plots/cartesian/axis_ids":335,"../../registry":373,"../../traces/scatter/subtypes":519,"../fx/helpers":191,"./buttons":215,"./constants":216,"./modebar":220}],220:[function(e,t,r){"use strict";var l=e("@plotly/d3");var o=e("fast-isnumeric");var f=e("../../lib");var s=e("../../fonts/ploticon");var c=new DOMParser;function a(e){this.container=e.container;this.element=document.createElement("div");this.update(e.graphInfo,e.buttons);this.container.appendChild(this.element)}var n=a.prototype;n.update=function(e,t){this.graphInfo=e;var r=this.graphInfo._context;var n=this.graphInfo._fullLayout;var a="modebar-"+n._uid;this.element.setAttribute("id",a);this._uid=a;this.element.className="modebar";if(r.displayModeBar==="hover")this.element.className+=" modebar--hover ease-bg";if(n.modebar.orientation==="v"){this.element.className+=" vertical";t=t.reverse()}var i=n.modebar;var o=r.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";f.deleteRelatedStyleRule(a);f.addRelatedStyleRule(a,o+"#"+a+" .modebar-group","background-color: "+i.bgcolor);f.addRelatedStyleRule(a,"#"+a+" .modebar-btn .icon path","fill: "+i.color);f.addRelatedStyleRule(a,"#"+a+" .modebar-btn:hover .icon path","fill: "+i.activecolor);f.addRelatedStyleRule(a,"#"+a+" .modebar-btn.active .icon path","fill: "+i.activecolor);var s=!this.hasButtons(t);var l=this.hasLogo!==r.displaylogo;var c=this.locale!==r.locale;this.locale=r.locale;if(s||l||c){this.removeAllButtons();this.updateButtons(t);if(r.watermark||r.displaylogo){var u=this.getLogo();if(r.watermark){u.className=u.className+" watermark"}if(n.modebar.orientation==="v"){this.element.insertBefore(u,this.element.childNodes[0])}else{this.element.appendChild(u)}this.hasLogo=true}}this.updateActiveButton()};n.updateButtons=function(e){var a=this;this.buttons=e;this.buttonElements=[];this.buttonsNames=[];this.buttons.forEach(function(e){var n=a.createGroup();e.forEach(function(e){var t=e.name;if(!t){throw new Error("must provide button 'name' in button config")}if(a.buttonsNames.indexOf(t)!==-1){throw new Error("button name '"+t+"' is taken")}a.buttonsNames.push(t);var r=a.createButton(e);a.buttonElements.push(r);n.appendChild(r)});a.element.appendChild(n)})};n.createGroup=function(){var e=document.createElement("div");e.className="modebar-group";return e};n.createButton=function(t){var r=this;var e=document.createElement("a");e.setAttribute("rel","tooltip");e.className="modebar-btn";var n=t.title;if(n===undefined)n=t.name;else if(typeof n==="function")n=n(this.graphInfo);if(n||n===0)e.setAttribute("data-title",n);if(t.attr!==undefined)e.setAttribute("data-attr",t.attr);var a=t.val;if(a!==undefined){if(typeof a==="function")a=a(this.graphInfo);e.setAttribute("data-val",a)}var i=t.click;if(typeof i!=="function"){throw new Error("must provide button 'click' function in button config")}else{e.addEventListener("click",function(e){t.click(r.graphInfo,e);r.updateActiveButton(e.currentTarget)})}e.setAttribute("data-toggle",t.toggle||false);if(t.toggle)l.select(e).classed("active",true);var o=t.icon;if(typeof o==="function"){e.appendChild(o())}else{e.appendChild(this.createIcon(o||s.question))}e.setAttribute("data-gravity",t.gravity||"n");return e};n.createIcon=function(e){var t=o(e.height)?Number(e.height):e.ascent-e.descent;var r="http://www.w3.org/2000/svg";var n;if(e.path){n=document.createElementNS(r,"svg");n.setAttribute("viewBox",[0,0,e.width,t].join(" "));n.setAttribute("class","icon");var a=document.createElementNS(r,"path");a.setAttribute("d",e.path);if(e.transform){a.setAttribute("transform",e.transform)}else if(e.ascent!==undefined){a.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")")}n.appendChild(a)}if(e.svg){var i=c.parseFromString(e.svg,"application/xml");n=i.childNodes[0]}n.setAttribute("height","1em");n.setAttribute("width","1em");return n};n.updateActiveButton=function(e){var o=this.graphInfo._fullLayout;var s=e!==undefined?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var t=e.getAttribute("data-val")||true;var r=e.getAttribute("data-attr");var n=e.getAttribute("data-toggle")==="true";var a=l.select(e);if(n){if(r===s){a.classed("active",!a.classed("active"))}}else{var i=r===null?r:f.nestedProperty(o,r).get();a.classed("active",i===t)}})};n.hasButtons=function(e){var t=this.buttons;if(!t)return false;if(e.length!==t.length)return false;for(var r=0;r<e.length;++r){if(e[r].length!==t[r].length)return false;for(var n=0;n<e[r].length;n++){if(e[r][n].name!==t[r][n].name)return false}}return true};n.getLogo=function(){var e=this.createGroup();var t=document.createElement("a");t.href="https://plotly.com/";t.target="_blank";t.setAttribute("data-title",f._(this.graphInfo,"Produced with Plotly"));t.className="modebar-btn plotlyjsicon modebar-btn--logo";t.appendChild(this.createIcon(s.newplotlylogo));e.appendChild(t);return e};n.removeAllButtons=function(){while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}this.hasLogo=false};n.destroy=function(){f.removeElement(this.container.querySelector(".modebar"));f.deleteRelatedStyleRule(this._uid)};function i(e,t){var r=e._fullLayout;var n=new a({graphInfo:e,container:r._modebardiv.node(),buttons:t});if(r._privateplot){l.select(n.element).append("span").classed("badge-private float--left",true).text("PRIVATE")}return n}t.exports=i},{"../../fonts/ploticon":268,"../../lib":285,"@plotly/d3":20,"fast-isnumeric":31}],221:[function(e,t,r){"use strict";var n=e("../../plots/font_attributes");var a=e("../color/attributes");var i=e("../../plot_api/plot_template").templatedArray;var o=i("button",{visible:{valType:"boolean",dflt:true,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});t.exports={visible:{valType:"boolean",editType:"plot"},buttons:o,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:n({editType:"plot"}),bgcolor:{valType:"color",dflt:a.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":320,"../../plots/font_attributes":360,"../color/attributes":154}],222:[function(e,t,r){"use strict";t.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],223:[function(e,t,r){"use strict";var h=e("../../lib");var p=e("../color");var v=e("../../plot_api/plot_template");var g=e("../../plots/array_container_defaults");var m=e("./attributes");var _=e("./constants");t.exports=function e(t,r,n,a,i){var o=t.rangeselector||{};var s=v.newContainer(r,"rangeselector");function l(e,t){return h.coerce(o,s,m,e,t)}var c=g(o,s,{name:"buttons",handleItemDefaults:y,calendar:i});var u=l("visible",c.length>0);if(u){var f=b(r,n,a);l("x",f[0]);l("y",f[1]);h.noneOrAll(t,r,["x","y"]);l("xanchor");l("yanchor");h.coerceFont(l,"font",n.font);var d=l("bgcolor");l("activecolor",p.contrast(d,_.lightAmount,_.darkAmount));l("bordercolor");l("borderwidth")}};function y(r,n,e,t){var a=t.calendar;function i(e,t){return h.coerce(r,n,m.buttons,e,t)}var o=i("visible");if(o){var s=i("step");if(s!=="all"){if(a&&a!=="gregorian"&&(s==="month"||s==="year")){n.stepmode="backward"}else{i("stepmode")}i("count")}i("label")}}function b(t,r,e){var n=e.filter(function(e){return r[e].anchor===t._id});var a=0;for(var i=0;i<n.length;i++){var o=r[n[i]].domain;if(o)a=Math.max(o[1],a)}return[t.domain[0],a+_.yPad]}},{"../../lib":285,"../../plot_api/plot_template":320,"../../plots/array_container_defaults":326,"../color":155,"./attributes":221,"./constants":222}],224:[function(e,t,r){"use strict";var h=e("@plotly/d3");var o=e("../../registry");var p=e("../../plots/plots");var a=e("../color");var v=e("../drawing");var g=e("../../lib");var m=g.strTranslate;var _=e("../../lib/svg_text_utils");var i=e("../../plots/cartesian/axis_ids");var n=e("../../constants/alignment");var y=n.LINE_SPACING;var b=n.FROM_TL;var x=n.FROM_BR;var w=e("./constants");var s=e("./get_update_object");t.exports=function e(i){var t=i._fullLayout;var r=t._infolayer.selectAll(".rangeselector").data(l(i),c);r.enter().append("g").classed("rangeselector",true);r.exit().remove();r.style({cursor:"pointer","pointer-events":"all"});r.each(function(e){var t=h.select(this);var n=e;var a=n.rangeselector;var r=t.selectAll("g.button").data(g.filterVisible(a.buttons));r.enter().append("g").classed("button",true);r.exit().remove();r.each(function(e){var t=h.select(this);var r=s(n,e);e._isActive=u(n,e,r);t.call(f,a,e);t.call(A,a,e,i);t.on("click",function(){if(i._dragged)return;o.call("_guiRelayout",i,r)});t.on("mouseover",function(){e._isHovered=true;t.call(f,a,e)});t.on("mouseout",function(){e._isHovered=false;t.call(f,a,e)})});k(i,r,a,n._name,t)})};function l(e){var t=i.list(e,"x",true);var r=[];for(var n=0;n<t.length;n++){var a=t[n];if(a.rangeselector&&a.rangeselector.visible){r.push(a)}}return r}function c(e){return e._id}function u(e,t,r){if(t.step==="all"){return e.autorange===true}else{var n=Object.keys(r);return e.range[0]===r[n[0]]&&e.range[1]===r[n[1]]}}function f(e,t,r){var n=g.ensureSingle(e,"rect","selector-rect",function(e){e.attr("shape-rendering","crispEdges")});n.attr({rx:w.rx,ry:w.ry});n.call(a.stroke,t.bordercolor).call(a.fill,d(t,r)).style("stroke-width",t.borderwidth+"px")}function d(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}function A(e,t,r,n){function a(e){_.convertToTspans(e,n)}var i=g.ensureSingle(e,"text","selector-text",function(e){e.attr("text-anchor","middle")});i.call(v.font,t.font).text(T(r,n._fullLayout._meta)).call(a)}function T(e,t){if(e.label){return t?g.templateString(e.label,t):e.label}if(e.step==="all")return"all";return e.count+e.step.charAt(0)}function k(e,t,s,r,n){var l=0;var c=0;var u=s.borderwidth;t.each(function(){var e=h.select(this);var t=e.select(".selector-text");var r=s.font.size*y;var n=Math.max(r*_.lineCount(t),16)+3;c=Math.max(c,n)});t.each(function(){var e=h.select(this);var t=e.select(".selector-rect");var r=e.select(".selector-text");var n=r.node()&&v.bBox(r.node()).width;var a=s.font.size*y;var i=_.lineCount(r);var o=Math.max(n+10,w.minButtonWidth);e.attr("transform",m(u+l,u));t.attr({x:0,y:0,width:o,height:c});_.positionText(r,o/2,c/2-(i-1)*a/2+3);l+=o+5});var a=e._fullLayout._size;var i=a.l+a.w*s.x;var o=a.t+a.h*(1-s.y);var f="left";if(g.isRightAnchor(s)){i-=l;f="right"}if(g.isCenterAnchor(s)){i-=l/2;f="center"}var d="top";if(g.isBottomAnchor(s)){o-=c;d="bottom"}if(g.isMiddleAnchor(s)){o-=c/2;d="middle"}l=Math.ceil(l);c=Math.ceil(c);i=Math.round(i);o=Math.round(o);p.autoMargin(e,r+"-range-selector",{x:s.x,y:s.y,l:l*b[f],r:l*x[f],b:c*x[d],t:c*b[d]});n.attr("transform",m(i,o))}},{"../../constants/alignment":260,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/cartesian/axis_ids":335,"../../plots/plots":366,"../../registry":373,"../color":155,"../drawing":177,"./constants":222,"./get_update_object":225,"@plotly/d3":20}],225:[function(e,t,r){"use strict";var c=e("@plotly/d3");t.exports=function e(t,r){var n=t._name;var a={};if(r.step==="all"){a[n+".autorange"]=true}else{var i=o(t,r);a[n+".range[0]"]=i[0];a[n+".range[1]"]=i[1]}return a};function o(e,t){var r=e.range;var n=new Date(e.r2l(r[1]));var a=t.step;var i=t.count;var o;switch(t.stepmode){case"backward":o=e.l2r(+c.time[a].utc.offset(n,-i));break;case"todate":var s=c.time[a].utc.offset(n,-i);o=e.l2r(+c.time[a].utc.ceil(s));break}var l=r[1];return[o,l]}},{"@plotly/d3":20}],226:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":221,"./defaults":223,"./draw":224}],227:[function(e,t,r){"use strict";var n=e("../color/attributes");t.exports={bgcolor:{valType:"color",dflt:n.background,editType:"plot"},bordercolor:{valType:"color",dflt:n.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:true,editType:"calc",impliedEdits:{"range[0]":undefined,"range[1]":undefined}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":false}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":false}}],editType:"calc",impliedEdits:{autorange:false}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:true,editType:"calc"},editType:"calc"}},{"../color/attributes":154}],228:[function(e,t,r){"use strict";var o=e("../../plots/cartesian/axis_ids").list;var s=e("../../plots/cartesian/autorange").getAutoRange;var l=e("./constants");t.exports=function e(t){var r=o(t,"x",true);for(var n=0;n<r.length;n++){var a=r[n];var i=a[l.name];if(i&&i.visible&&i.autorange){i._input.autorange=true;i._input.range=i.range=s(t,a)}}}},{"../../plots/cartesian/autorange":330,"../../plots/cartesian/axis_ids":335,"./constants":229}],229:[function(e,t,r){"use strict";t.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],230:[function(e,t,r){"use strict";var x=e("../../lib");var w=e("../../plot_api/plot_template");var A=e("../../plots/cartesian/axis_ids");var T=e("./attributes");var k=e("./oppaxis_attributes");t.exports=function e(t,r,n){var a=t[n];var i=r[n];if(!(a.rangeslider||r._requestRangeslider[i._id]))return;if(!x.isPlainObject(a.rangeslider)){a.rangeslider={}}var o=a.rangeslider;var s=w.newContainer(i,"rangeslider");function l(e,t){return x.coerce(o,s,T,e,t)}var c,u;function f(e,t){return x.coerce(c,u,k,e,t)}var d=l("visible");if(!d)return;l("bgcolor",r.plot_bgcolor);l("bordercolor");l("borderwidth");l("thickness");l("autorange",!i.isValidRange(o.range));l("range");var h=r._subplots;if(h){var p=h.cartesian.filter(function(e){return e.substr(0,e.indexOf("y"))===A.name2id(n)}).map(function(e){return e.substr(e.indexOf("y"),e.length)});var v=x.simpleMap(p,A.id2name);for(var g=0;g<v.length;g++){var m=v[g];c=o[m]||{};u=w.newContainer(s,m,"yaxis");var _=r[m];var y;if(c.range&&_.isValidRange(c.range)){y="fixed"}var b=f("rangemode",y);if(b!=="match"){f("range",_.range.slice())}}}s._input=o}},{"../../lib":285,"../../plot_api/plot_template":320,"../../plots/cartesian/axis_ids":335,"./attributes":227,"./oppaxis_attributes":234}],231:[function(e,t,r){"use strict";var M=e("@plotly/d3");var s=e("../../registry");var g=e("../../plots/plots");var S=e("../../lib");var C=S.strTranslate;var l=e("../drawing");var h=e("../color");var L=e("../titles");var m=e("../../plots/cartesian");var E=e("../../plots/cartesian/axis_ids");var n=e("../dragelement");var b=e("../../lib/setcursor");var D=e("./constants");t.exports=function(T){var k=T._fullLayout;var e=k._rangeSliderData;for(var t=0;t<e.length;t++){var r=e[t][D.name];r._clipId=r._id+"-"+k._uid}function n(e){return e._name}var a=k._infolayer.selectAll("g."+D.containerClassName).data(e,n);a.exit().each(function(e){var t=e[D.name];k._topdefs.select("#"+t._clipId).remove()}).remove();if(e.length===0)return;a.enter().append("g").classed(D.containerClassName,true).attr("pointer-events","all");a.each(function(e){var t=M.select(this);var r=e[D.name];var n=k[E.id2name(e.anchor)];var a=r[E.id2name(e.anchor)];if(r.range){var i=S.simpleMap(r.range,e.r2l);var o=S.simpleMap(e.range,e.r2l);var s;if(o[0]<o[1]){s=[Math.min(i[0],o[0]),Math.max(i[1],o[1])]}else{s=[Math.max(i[0],o[0]),Math.min(i[1],o[1])]}r.range=r._input.range=S.simpleMap(s,e.l2r)}e.cleanRange("rangeslider.range");var l=k._size;var c=e.domain;r._width=l.w*(c[1]-c[0]);var u=Math.round(l.l+l.w*c[0]);var f=Math.round(l.t+l.h*(1-e._counterDomainMin)+(e.side==="bottom"?e._depth:0)+r._offsetShift+D.extraPad);t.attr("transform",C(u,f));r._rl=S.simpleMap(r.range,e.r2l);var d=r._rl[0];var h=r._rl[1];var p=h-d;r.p2d=function(e){return e/r._width*p+d};r.d2p=function(e){return(e-d)/p*r._width};if(e.rangebreaks){var v=e.locateBreaks(d,h);if(v.length){var g,m;var _=0;for(g=0;g<v.length;g++){m=v[g];_+=m.max-m.min}var y=r._width/(h-d-_);var b=[-y*d];for(g=0;g<v.length;g++){m=v[g];b.push(b[b.length-1]-y*(m.max-m.min))}r.d2p=function(e){var t=b[0];for(var r=0;r<v.length;r++){var n=v[r];if(e>=n.max)t=b[r+1];else if(e<n.min)break}return t+y*e};for(g=0;g<v.length;g++){m=v[g];m.pmin=r.d2p(m.min);m.pmax=r.d2p(m.max)}r.p2d=function(e){var t=b[0];for(var r=0;r<v.length;r++){var n=v[r];if(e>=n.pmax)t=b[r+1];else if(e<n.pmin)break}return(e-t)/y}}}if(a.rangemode!=="match"){var x=n.r2l(a.range[0]);var w=n.r2l(a.range[1]);var A=w-x;r.d2pOppAxis=function(e){return(e-x)/A*r._height}}t.call(I,T,e,r).call(R,T,e,r).call(z,T,e,r).call(N,T,e,r,a).call(F,T,e,r).call(j,T,e,r);O(t,T,e,r);P(t,T,e,r,n,a);if(e.side==="bottom"){L.draw(T,e._id+"title",{propContainer:e,propName:e._name+".title",placeholder:k._dfltTitle.x,attributes:{x:e._offset+e._length/2,y:f+r._height+r._offsetShift+10+1.5*e.title.font.size,"text-anchor":"middle"}})}})};function O(h,p,v,g){if(p._context.staticPlot)return;var m=h.select("rect."+D.slideBoxClassName).node();var _=h.select("rect."+D.grabAreaMinClassName).node();var y=h.select("rect."+D.grabAreaMaxClassName).node();function e(){var e=M.event;var s=e.target;var l=e.clientX||e.touches[0].clientX;var c=l-h.node().getBoundingClientRect().left;var u=g.d2p(v._rl[0]);var f=g.d2p(v._rl[1]);var d=n.coverSlip();this.addEventListener("touchmove",t);this.addEventListener("touchend",r);d.addEventListener("mousemove",t);d.addEventListener("mouseup",r);function t(e){var t=e.clientX||e.touches[0].clientX;var r=+t-l;var n,a,i;switch(s){case m:i="ew-resize";n=u+r;a=f+r;break;case _:i="col-resize";n=u+r;a=f;break;case y:i="col-resize";n=u;a=f+r;break;default:i="ew-resize";n=c;a=c+r;break}if(a<n){var o=a;a=n;n=o}g._pixelMin=n;g._pixelMax=a;b(M.select(d),i);x(h,p,v,g)}function r(){d.removeEventListener("mousemove",t);d.removeEventListener("mouseup",r);this.removeEventListener("touchmove",t);this.removeEventListener("touchend",r);S.removeElement(d)}}h.on("mousedown",e);h.on("touchstart",e)}function x(e,t,r,n){function a(e){return r.l2r(S.constrain(e,n._rl[0],n._rl[1]))}var i=a(n.p2d(n._pixelMin));var o=a(n.p2d(n._pixelMax));window.requestAnimationFrame(function(){s.call("_guiRelayout",t,r._name+".range",[i,o])})}function P(e,t,r,n,a,i){var o=D.handleWidth/2;function s(e){return S.constrain(e,0,n._width)}function l(e){return S.constrain(e,0,n._height)}function c(e){return S.constrain(e,-o,n._width+o)}var u=s(n.d2p(r._rl[0]));var f=s(n.d2p(r._rl[1]));e.select("rect."+D.slideBoxClassName).attr("x",u).attr("width",f-u);e.select("rect."+D.maskMinClassName).attr("width",u);e.select("rect."+D.maskMaxClassName).attr("x",f).attr("width",n._width-f);if(i.rangemode!=="match"){var d=n._height-l(n.d2pOppAxis(a._rl[1]));var h=n._height-l(n.d2pOppAxis(a._rl[0]));e.select("rect."+D.maskMinOppAxisClassName).attr("x",u).attr("height",d).attr("width",f-u);e.select("rect."+D.maskMaxOppAxisClassName).attr("x",u).attr("y",h).attr("height",n._height-h).attr("width",f-u);e.select("rect."+D.slideBoxClassName).attr("y",d).attr("height",h-d)}var p=.5;var v=Math.round(c(u-o))-p;var g=Math.round(c(f-o))+p;e.select("g."+D.grabberMinClassName).attr("transform",C(v,p));e.select("g."+D.grabberMaxClassName).attr("transform",C(g,p))}function I(e,t,r,n){var a=S.ensureSingle(e,"rect",D.bgClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})});var i=n.borderwidth%2===0?n.borderwidth:n.borderwidth-1;var o=-n._offsetShift;var s=l.crispRound(t,n.borderwidth);a.attr({width:n._width+i,height:n._height+i,transform:C(o,o),fill:n.bgcolor,stroke:n.bordercolor,"stroke-width":s})}function R(e,t,r,n){var a=t._fullLayout;var i=S.ensureSingleById(a._topdefs,"clipPath",n._clipId,function(e){e.append("rect").attr({x:0,y:0})});i.select("rect").attr({width:n._width,height:n._height})}function z(e,f,d,h){var p=f.calcdata;var t=e.selectAll("g."+D.rangePlotClassName).data(d._subplotsWith,S.identity);t.enter().append("g").attr("class",function(e){return D.rangePlotClassName+" "+e}).call(l.setClipUrl,h._clipId,f);t.order();t.exit().remove();var v;t.each(function(e,t){var r=M.select(this);var n=t===0;var a=E.getFromId(f,e,"y");var i=a._name;var o=h[i];var s={data:[],layout:{xaxis:{type:d.type,domain:[0,1],range:h.range.slice(),calendar:d.calendar},width:h._width,height:h._height,margin:{t:0,b:0,l:0,r:0}},_context:f._context};if(d.rangebreaks){s.layout.xaxis.rangebreaks=d.rangebreaks}s.layout[i]={type:a.type,domain:[0,1],range:o.rangemode!=="match"?o.range.slice():a.range.slice(),calendar:a.calendar};if(a.rangebreaks){s.layout[i].rangebreaks=a.rangebreaks}g.supplyDefaults(s);var l=s._fullLayout.xaxis;var c=s._fullLayout[i];l.clearCalc();l.setScale();c.clearCalc();c.setScale();var u={id:e,plotgroup:r,xaxis:l,yaxis:c,isRangePlot:true};if(n)v=u;else{u.mainplot="xy";u.mainplotinfo=v}m.rangePlot(f,u,_(p,e))})}function _(e,t){var r=[];for(var n=0;n<e.length;n++){var a=e[n];var i=a[0].trace;if(i.xaxis+i.yaxis===t){r.push(a)}}return r}function N(e,t,r,n,a){var i=S.ensureSingle(e,"rect",D.maskMinClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})});i.attr("height",n._height).call(h.fill,D.maskColor);var o=S.ensureSingle(e,"rect",D.maskMaxClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});o.attr("height",n._height).call(h.fill,D.maskColor);if(a.rangemode!=="match"){var s=S.ensureSingle(e,"rect",D.maskMinOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});s.attr("width",n._width).call(h.fill,D.maskOppAxisColor);var l=S.ensureSingle(e,"rect",D.maskMaxOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});l.attr("width",n._width).style("border-top",D.maskOppBorder).call(h.fill,D.maskOppAxisColor)}}function F(e,t,r,n){if(t._context.staticPlot)return;var a=S.ensureSingle(e,"rect",D.slideBoxClassName,function(e){e.attr({y:0,cursor:D.slideBoxCursor,"shape-rendering":"crispEdges"})});a.attr({height:n._height,fill:D.slideBoxFill})}function j(e,t,r,n){var a=S.ensureSingle(e,"g",D.grabberMinClassName);var i=S.ensureSingle(e,"g",D.grabberMaxClassName);var o={x:0,width:D.handleWidth,rx:D.handleRadius,fill:h.background,stroke:h.defaultLine,"stroke-width":D.handleStrokeWidth,"shape-rendering":"crispEdges"};var s={y:Math.round(n._height/4),height:Math.round(n._height/2)};var l=S.ensureSingle(a,"rect",D.handleMinClassName,function(e){e.attr(o)});l.attr(s);var c=S.ensureSingle(i,"rect",D.handleMaxClassName,function(e){e.attr(o)});c.attr(s);var u={width:D.grabAreaWidth,x:0,y:0,fill:D.grabAreaFill,cursor:!t._context.staticPlot?D.grabAreaCursor:undefined};var f=S.ensureSingle(a,"rect",D.grabAreaMinClassName,function(e){e.attr(u)});f.attr("height",n._height);var d=S.ensureSingle(i,"rect",D.grabAreaMaxClassName,function(e){e.attr(u)});d.attr("height",n._height)}},{"../../lib":285,"../../lib/setcursor":305,"../../plots/cartesian":345,"../../plots/cartesian/axis_ids":335,"../../plots/plots":366,"../../registry":373,"../color":155,"../dragelement":174,"../drawing":177,"../titles":253,"./constants":229,"@plotly/d3":20}],232:[function(e,t,r){"use strict";var s=e("../../plots/cartesian/axis_ids");var l=e("../../lib/svg_text_utils");var c=e("./constants");var u=e("../../constants/alignment").LINE_SPACING;var f=c.name;function d(e){var t=e&&e[f];return t&&t.visible}r.isVisible=d;r.makeData=function(e){var t=s.list({_fullLayout:e},"x",true);var r=e.margin;var n=[];if(!e._has("gl2d")){for(var a=0;a<t.length;a++){var i=t[a];if(d(i)){n.push(i);var o=i[f];o._id=f+i._id;o._height=(e.height-r.b-r.t)*o.thickness;o._offsetShift=Math.floor(o.borderwidth/2)}}}e._rangeSliderData=n};r.autoMarginOpts=function(e,t){var r=e._fullLayout;var n=t[f];var a=t._id.charAt(0);var i=0;var o=0;if(t.side==="bottom"){i=t._depth;if(t.title.text!==r._dfltTitle[a]){o=1.5*t.title.font.size+10+n._offsetShift;var s=(t.title.text.match(l.BR_TAG_ALL)||[]).length;o+=s*t.title.font.size*u}}return{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:n._height+i+Math.max(r.margin.b,o),pad:c.extraPad+n._offsetShift*2}}},{"../../constants/alignment":260,"../../lib/svg_text_utils":307,"../../plots/cartesian/axis_ids":335,"./constants":229}],233:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("./attributes");var i=e("./oppaxis_attributes");var o=e("./helpers");t.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:n.extendFlat({},a,{yaxis:i})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw"),isVisible:o.isVisible,makeData:o.makeData,autoMarginOpts:o.autoMarginOpts}},{"../../lib":285,"./attributes":227,"./calc_autorange":228,"./defaults":230,"./draw":231,"./helpers":232,"./oppaxis_attributes":234}],234:[function(e,t,r){"use strict";t.exports={_isSubplotObj:true,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],235:[function(e,t,r){"use strict";var n=e("../annotations/attributes");var a=e("../../traces/scatter/attributes").line;var i=e("../drawing/attributes").dash;var o=e("../../lib/extend").extendFlat;var s=e("../../plot_api/plot_template").templatedArray;var l=e("../../constants/axis_placeable_objects");t.exports=s("shape",{visible:{valType:"boolean",dflt:true,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:o({},n.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:o({},n.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:o({},a.color,{editType:"arraydraw"}),width:o({},a.width,{editType:"calc+arraydraw"}),dash:o({},i,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:false,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":261,"../../lib/extend":279,"../../plot_api/plot_template":320,"../../traces/scatter/attributes":494,"../annotations/attributes":138,"../drawing/attributes":176}],236:[function(e,t,r){"use strict";var p=e("../../lib");var v=e("../../plots/cartesian/axes");var g=e("./constants");var m=e("./helpers");t.exports=function e(t){var r=t._fullLayout;var n=p.filterVisible(r.shapes);if(!n.length||!t._fullData.length)return;for(var a=0;a<n.length;a++){var i=n[a];i._extremes={};var o;var s;var l=v.getRefType(i.xref);var c=v.getRefType(i.yref);if(i.xref!=="paper"&&l!=="domain"){var u=i.xsizemode==="pixel"?i.xanchor:i.x0;var f=i.xsizemode==="pixel"?i.xanchor:i.x1;o=v.getFromId(t,i.xref);s=b(o,u,f,i.path,g.paramIsX);if(s){i._extremes[o._id]=v.findExtremes(o,s,_(i))}}if(i.yref!=="paper"&&c!=="domain"){var d=i.ysizemode==="pixel"?i.yanchor:i.y0;var h=i.ysizemode==="pixel"?i.yanchor:i.y1;o=v.getFromId(t,i.yref);s=b(o,d,h,i.path,g.paramIsY);if(s){i._extremes[o._id]=v.findExtremes(o,s,y(i))}}}};function _(e){return n(e.line.width,e.xsizemode,e.x0,e.x1,e.path,false)}function y(e){return n(e.line.width,e.ysizemode,e.y0,e.y1,e.path,true)}function n(e,t,r,n,a,i){var o=e/2;var s=i;if(t==="pixel"){var l=a?m.extractPathCoords(a,i?g.paramIsY:g.paramIsX):[r,n];var c=p.aggNums(Math.max,null,l);var u=p.aggNums(Math.min,null,l);var f=u<0?Math.abs(u)+o:o;var d=c>0?c+o:o;return{ppad:o,ppadplus:s?f:d,ppadminus:s?d:f}}else{return{ppad:o}}}function b(e,t,r,n,a){var i=e.type==="category"||e.type==="multicategory"?e.r2c:e.d2c;if(t!==undefined)return[i(t),i(r)];if(!n)return;var o=Infinity;var s=-Infinity;var l=n.match(g.segmentRE);var c;var u;var f;var d;var h;if(e.type==="date")i=m.decodeDate(i);for(c=0;c<l.length;c++){u=l[c];f=a[u.charAt(0)].drawn;if(f===undefined)continue;d=l[c].substr(1).match(g.paramRE);if(!d||d.length<f)continue;h=i(d[f]);if(h<o)o=h;if(h>s)s=h}if(s>=o)return[o,s]}},{"../../lib":285,"../../plots/cartesian/axes":331,"./constants":237,"./helpers":246}],237:[function(e,t,r){"use strict";t.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:true,drawn:0},L:{0:true,drawn:0},H:{0:true,drawn:0},V:{},Q:{0:true,2:true,drawn:2},C:{0:true,2:true,4:true,drawn:4},T:{0:true,drawn:0},S:{0:true,2:true,drawn:2},Z:{}},paramIsY:{M:{1:true,drawn:1},L:{1:true,drawn:1},H:{},V:{0:true,drawn:0},Q:{1:true,3:true,drawn:3},C:{1:true,3:true,5:true,drawn:5},T:{1:true,drawn:1},S:{1:true,3:true,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],238:[function(e,t,r){"use strict";var L=e("../../lib");var E=e("../../plots/cartesian/axes");var n=e("../../plots/array_container_defaults");var D=e("./attributes");var O=e("./helpers");t.exports=function e(t,r){n(t,r,{name:"shapes",handleItemDefaults:a})};function a(r,n,e){function t(e,t){return L.coerce(r,n,D,e,t)}var a=t("visible");if(!a)return;var i=t("path");var o=i?"path":"rect";var s=t("type",o);if(n.type!=="path")delete n.path;t("editable");t("layer");t("opacity");t("fillcolor");t("fillrule");var l=t("line.width");if(l){t("line.color");t("line.dash")}var c=t("xsizemode");var u=t("ysizemode");var f=["x","y"];for(var d=0;d<2;d++){var h=f[d];var p=h+"anchor";var v=h==="x"?c:u;var g={_fullLayout:e};var m;var _;var y;var b=E.coerceRef(r,n,g,h,undefined,"paper");var x=E.getRefType(b);if(x==="range"){m=E.getFromId(g,b);m._shapeIndices.push(n._index);y=O.rangeToShapePosition(m);_=O.shapePositionToRange(m)}else{_=y=L.identity}if(s!=="path"){var w=.25;var A=.75;var T=h+"0";var k=h+"1";var M=r[T];var S=r[k];r[T]=_(r[T],true);r[k]=_(r[k],true);if(v==="pixel"){t(T,0);t(k,10)}else{E.coercePosition(n,g,t,b,T,w);E.coercePosition(n,g,t,b,k,A)}n[T]=y(n[T]);n[k]=y(n[k]);r[T]=M;r[k]=S}if(v==="pixel"){var C=r[p];r[p]=_(r[p],true);E.coercePosition(n,g,t,b,p,.25);n[p]=y(n[p]);r[p]=C}}if(s==="path"){t("path")}else{L.noneOrAll(r,n,["x0","x1","y0","y1"])}}},{"../../lib":285,"../../plots/array_container_defaults":326,"../../plots/cartesian/axes":331,"./attributes":235,"./helpers":246}],239:[function(e,t,r){"use strict";var g=e("../../registry");var m=e("../../lib");var Q=e("../../plots/cartesian/axes");var _=e("./draw_newshape/helpers").readPaths;var y=e("./draw_newshape/display_outlines");var i=e("../../plots/cartesian/handle_outline").clearOutlineControllers;var b=e("../color");var K=e("../drawing");var x=e("../../plot_api/plot_template").arrayEditor;var ee=e("../dragelement");var te=e("../../lib/setcursor");var re=e("./constants");var ne=e("./helpers");t.exports={draw:a,drawOne:o,eraseActiveShape:n};function a(e){var t=e._fullLayout;t._shapeUpperLayer.selectAll("path").remove();t._shapeLowerLayer.selectAll("path").remove();for(var r in t._plots){var n=t._plots[r].shapelayer;if(n)n.selectAll("path").remove()}for(var a=0;a<t.shapes.length;a++){if(t.shapes[a].visible){o(e,a)}}}function ae(e){return!!e._fullLayout._drawing}function w(e){return!e._context.edits.shapePosition}function o(p,v){p._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+v+'"]').remove();var e=ne.makeOptionsAndPlotinfo(p,v);var g=e.options;var m=e.plotinfo;if(!g._input||g.visible===false)return;if(g.layer!=="below"){r(p._fullLayout._shapeUpperLayer)}else if(g.xref==="paper"||g.yref==="paper"){r(p._fullLayout._shapeLowerLayer)}else{if(m._hadPlotinfo){var t=m.mainplotinfo||m;r(t.shapelayer)}else{r(p._fullLayout._shapeLowerLayer)}}function r(e){var t=oe(p,g);var r={"data-index":v,"fill-rule":g.fillrule,d:t};var n=g.opacity;var a=g.fillcolor;var i=g.line.width?g.line.color:"rgba(0,0,0,0)";var o=g.line.width;var s=g.line.dash;if(!o&&g.editable===true){o=5;s="solid"}var l=t[t.length-1]!=="Z";var c=w(p)&&g.editable&&p._fullLayout._activeShapeIndex===v;if(c){a=l?"rgba(0,0,0,0)":p._fullLayout.activeshape.fillcolor;n=p._fullLayout.activeshape.opacity}var u=e.append("path").attr(r).style("opacity",n).call(b.stroke,i).call(b.fill,a).call(K.dashLine,s,o);ie(u,p,g);var f;if(c||p._context.edits.shapePosition)f=x(p.layout,"shapes",g);if(c){u.style({cursor:"move"});var d={element:u.node(),plotinfo:m,gd:p,editHelpers:f,isActiveShape:true};var h=_(t,p);y(h,u,d)}else{if(p._context.edits.shapePosition){A(p,u,g,v,e,f)}else if(g.editable===true){u.style("pointer-events",l||b.opacity(a)*n<=.5?"stroke":"all")}}u.node().addEventListener("click",function(){return T(p,u)})}}function ie(e,t,r){var n=(r.xref+r.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");K.setClipUrl(e,n?"clip"+t._fullLayout._uid+n:null,t)}function A(_,y,b,i,x,e){var w=10;var A=10;var T=b.xsizemode==="pixel";var k=b.ysizemode==="pixel";var M=b.type==="line";var S=b.type==="path";var C=e.modifyItem;var L,E,D,O,P,I;var R,z,N,F,j,B,H,U;var V;var q=Q.getFromId(_,b.xref);var t=Q.getRefType(b.xref);var Y=Q.getFromId(_,b.yref);var r=Q.getRefType(b.yref);var G=ne.getDataToPixel(_,q,false,t);var W=ne.getDataToPixel(_,Y,true,r);var X=ne.getPixelToData(_,q,false,t);var Z=ne.getPixelToData(_,Y,true,r);var n=a();var s={element:n.node(),gd:_,prepFn:c,doneFn:u,clickFn:f};var J;ee.init(s);n.node().onmousemove=l;function a(){return M?o():y}function o(){var e=10;var t=Math.max(b.line.width,e);var r=x.append("g").attr("data-index",i);r.append("path").attr("d",y.attr("d")).style({cursor:"move","stroke-width":t,"stroke-opacity":"0"});var n={"fill-opacity":"0"};var a=Math.max(t/2,e);r.append("circle").attr({"data-line-point":"start-point",cx:T?G(b.xanchor)+b.x0:G(b.x0),cy:k?W(b.yanchor)-b.y0:W(b.y0),r:a}).style(n).classed("cursor-grab",true);r.append("circle").attr({"data-line-point":"end-point",cx:T?G(b.xanchor)+b.x1:G(b.x1),cy:k?W(b.yanchor)-b.y1:W(b.y1),r:a}).style(n).classed("cursor-grab",true);return r}function l(e){if(ae(_)){J=null;return}if(M){if(e.target.tagName==="path"){J="move"}else{J=e.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point"}}else{var t=s.element.getBoundingClientRect();var r=t.right-t.left;var n=t.bottom-t.top;var a=e.clientX-t.left;var i=e.clientY-t.top;var o=!S&&r>w&&n>A&&!e.shiftKey?ee.getCursor(a/r,1-i/n):"move";te(y,o);J=o.split("-")[0]}}function c(e){if(ae(_))return;if(T){P=G(b.xanchor)}if(k){I=W(b.yanchor)}if(b.type==="path"){V=b.path}else{L=T?b.x0:G(b.x0);E=k?b.y0:W(b.y0);D=T?b.x1:G(b.x1);O=k?b.y1:W(b.y1)}if(L<D){N=L;H="x0";F=D;U="x1"}else{N=D;H="x1";F=L;U="x0"}if(!k&&E<O||k&&E>O){R=E;j="y0";z=O;B="y1"}else{R=O;j="y1";z=E;B="y0"}l(e);$(x,b);v(y,b,_);s.moveFn=J==="move"?d:h;s.altKey=e.altKey}function u(){if(ae(_))return;te(y);p(x);ie(y,_,b);g.call("_guiRelayout",_,e.getUpdateObj())}function f(){if(ae(_))return;p(x)}function d(r,n){if(b.type==="path"){var e=function(e){return e};var t=e;var a=e;if(T){C("xanchor",b.xanchor=X(P+r))}else{t=function e(t){return X(G(t)+r)};if(q&&q.type==="date")t=ne.encodeDate(t)}if(k){C("yanchor",b.yanchor=Z(I+n))}else{a=function e(t){return Z(W(t)+n)};if(Y&&Y.type==="date")a=ne.encodeDate(a)}C("path",b.path=se(V,t,a))}else{if(T){C("xanchor",b.xanchor=X(P+r))}else{C("x0",b.x0=X(L+r));C("x1",b.x1=X(D+r))}if(k){C("yanchor",b.yanchor=Z(I+n))}else{C("y0",b.y0=Z(E+n));C("y1",b.y1=Z(O+n))}}y.attr("d",oe(_,b));$(x,b)}function h(r,n){if(S){var e=function(e){return e};var t=e;var a=e;if(T){C("xanchor",b.xanchor=X(P+r))}else{t=function e(t){return X(G(t)+r)};if(q&&q.type==="date")t=ne.encodeDate(t)}if(k){C("yanchor",b.yanchor=Z(I+n))}else{a=function e(t){return Z(W(t)+n)};if(Y&&Y.type==="date")a=ne.encodeDate(a)}C("path",b.path=se(V,t,a))}else if(M){if(J==="resize-over-start-point"){var i=L+r;var o=k?E-n:E+n;C("x0",b.x0=T?i:X(i));C("y0",b.y0=k?o:Z(o))}else if(J==="resize-over-end-point"){var s=D+r;var l=k?O-n:O+n;C("x1",b.x1=T?s:X(s));C("y1",b.y1=k?l:Z(l))}}else{var c=function(e){return J.indexOf(e)!==-1};var u=c("n");var f=c("s");var d=c("w");var h=c("e");var p=u?R+n:R;var v=f?z+n:z;var g=d?N+r:N;var m=h?F+r:F;if(k){if(u)p=R-n;if(f)v=z-n}if(!k&&v-p>A||k&&p-v>A){C(j,b[j]=k?p:Z(p));C(B,b[B]=k?v:Z(v))}if(m-g>w){C(H,b[H]=T?g:X(g));C(U,b[U]=T?m:X(m))}}y.attr("d",oe(_,b));$(x,b)}function $(l,c){if(T||k){e()}function e(){var e=c.type!=="path";var t=l.selectAll(".visual-cue").data([0]);var r=1;t.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":r}).classed("visual-cue",true);var n=G(T?c.xanchor:m.midRange(e?[c.x0,c.x1]:ne.extractPathCoords(c.path,re.paramIsX)));var a=W(k?c.yanchor:m.midRange(e?[c.y0,c.y1]:ne.extractPathCoords(c.path,re.paramIsY)));n=ne.roundPositionForSharpStrokeRendering(n,r);a=ne.roundPositionForSharpStrokeRendering(a,r);if(T&&k){var i="M"+(n-1-r)+","+(a-1-r)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";t.attr("d",i)}else if(T){var o="M"+(n-1-r)+","+(a-9-r)+"v18 h2 v-18 Z";t.attr("d",o)}else{var s="M"+(n-9-r)+","+(a-1-r)+"h18 v2 h-18 Z";t.attr("d",s)}}}function p(e){e.selectAll(".visual-cue").remove()}function v(e,t,r){var n=t.xref;var a=t.yref;var i=Q.getFromId(r,n);var o=Q.getFromId(r,a);var s="";if(n!=="paper"&&!i.autorange)s+=n;if(a!=="paper"&&!o.autorange)s+=a;K.setClipUrl(e,s?"clip"+r._fullLayout._uid+s:null,r)}}function oe(e,t){var r=t.type;var n=Q.getRefType(t.xref);var a=Q.getRefType(t.yref);var i=Q.getFromId(e,t.xref);var o=Q.getFromId(e,t.yref);var s=e._fullLayout._size;var l,c,u,f;var d,h,p,v;if(i){if(n==="domain"){c=function(e){return i._offset+i._length*e}}else{l=ne.shapePositionToRange(i);c=function(e){return i._offset+i.r2p(l(e,true))}}}else{c=function(e){return s.l+s.w*e}}if(o){if(a==="domain"){f=function(e){return o._offset+o._length*(1-e)}}else{u=ne.shapePositionToRange(o);f=function(e){return o._offset+o.r2p(u(e,true))}}}else{f=function(e){return s.t+s.h*(1-e)}}if(r==="path"){if(i&&i.type==="date")c=ne.decodeDate(c);if(o&&o.type==="date")f=ne.decodeDate(f);return k(t,c,f)}if(t.xsizemode==="pixel"){var g=c(t.xanchor);d=g+t.x0;h=g+t.x1}else{d=c(t.x0);h=c(t.x1)}if(t.ysizemode==="pixel"){var m=f(t.yanchor);p=m-t.y0;v=m-t.y1}else{p=f(t.y0);v=f(t.y1)}if(r==="line")return"M"+d+","+p+"L"+h+","+v;if(r==="rect")return"M"+d+","+p+"H"+h+"V"+v+"H"+d+"Z";var _=(d+h)/2;var y=(p+v)/2;var b=Math.abs(_-d);var x=Math.abs(y-p);var w="A"+b+","+x;var A=_+b+","+y;var T=_+","+(y-x);return"M"+A+w+" 0 1,1 "+T+w+" 0 0,1 "+A+"Z"}function k(e,s,l){var t=e.path;var c=e.xsizemode;var u=e.ysizemode;var f=e.xanchor;var d=e.yanchor;return t.replace(re.segmentRE,function(e){var t=0;var r=e.charAt(0);var n=re.paramIsX[r];var a=re.paramIsY[r];var i=re.numParams[r];var o=e.substr(1).replace(re.paramRE,function(e){if(n[t]){if(c==="pixel")e=s(f)+Number(e);else e=s(e)}else if(a[t]){if(u==="pixel")e=l(d)-Number(e);else e=l(e)}t++;if(t>i)e="X";return e});if(t>i){o=o.replace(/[\s,]*X.*/,"");m.log("Ignoring extra params in segment "+e)}return r+o})}function se(e,s,l){return e.replace(re.segmentRE,function(e){var t=0;var r=e.charAt(0);var n=re.paramIsX[r];var a=re.paramIsY[r];var i=re.numParams[r];var o=e.substr(1).replace(re.paramRE,function(e){if(t>=i)return e;if(n[t])e=s(e);else if(a[t])e=l(e);t++;return e});return r+o})}function T(e,t){if(!w(e))return;var r=t.node();var n=+r.getAttribute("data-index");if(n>=0){if(n===e._fullLayout._activeShapeIndex){s(e);return}e._fullLayout._activeShapeIndex=n;e._fullLayout._deactivateShape=s;a(e)}}function s(e){if(!w(e))return;var t=e._fullLayout._activeShapeIndex;if(t>=0){i(e);delete e._fullLayout._activeShapeIndex;a(e)}}function n(e){if(!w(e))return;i(e);var t=e._fullLayout._activeShapeIndex;var r=(e.layout||{}).shapes||[];if(t<r.length){var n=[];for(var a=0;a<r.length;a++){if(a!==t){n.push(r[a])}}delete e._fullLayout._activeShapeIndex;g.call("_guiRelayout",e,{shapes:n})}}},{"../../lib":285,"../../lib/setcursor":305,"../../plot_api/plot_template":320,"../../plots/cartesian/axes":331,"../../plots/cartesian/handle_outline":342,"../../registry":373,"../color":155,"../dragelement":174,"../drawing":177,"./constants":237,"./draw_newshape/display_outlines":243,"./draw_newshape/helpers":244,"./helpers":246}],240:[function(e,t,r){"use strict";var n=e("../../drawing/attributes").dash;var a=e("../../../lib/extend").extendFlat;t.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:a({},n,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":279,"../../drawing/attributes":176}],241:[function(e,t,r){"use strict";var n=32;t.exports={CIRCLE_SIDES:n,i000:0,i090:n/4,i180:n/2,i270:n/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],242:[function(e,t,r){"use strict";var o=e("../../color");t.exports=function e(t,r,n){n("newshape.drawdirection");n("newshape.layer");n("newshape.fillcolor");n("newshape.fillrule");n("newshape.opacity");var a=n("newshape.line.width");if(a){var i=(t||{}).plot_bgcolor||"#FFF";n("newshape.line.color",o.contrast(i));n("newshape.line.dash")}n("activeshape.fillcolor");n("activeshape.opacity")}},{"../../color":155}],243:[function(e,t,r){"use strict";var E=e("../../dragelement");var n=e("../../dragelement/helpers");var D=n.drawMode;var O=e("../../../registry");var a=e("./constants");var P=a.i000;var I=a.i090;var R=a.i180;var z=a.i270;var i=e("../../../plots/cartesian/handle_outline");var N=i.clearOutlineControllers;var o=e("./helpers");var F=o.pointsShapeRectangle;var j=o.pointsShapeEllipse;var B=o.writePaths;var H=e("./newshapes");t.exports=function e(u,r,n,t){if(!t)t=0;var c=n.gd;function f(){e(u,r,n,t++);if(j(u[0])){a({redrawing:true})}}function a(e){n.isActiveShape=false;var t=H(r,n);if(Object.keys(t).length){O.call((e||{}).redrawing?"relayout":"_guiRelayout",c,t)}}var i=n.isActiveShape;var o=c._fullLayout;var s=o._zoomlayer;var l=n.dragmode;var d=D(l);if(d)c._fullLayout._drawing=true;else if(c._fullLayout._activeShapeIndex>=0)N(c);r.attr("d",B(u));var h;var p;var v;var g;var m;if(i&&!t){m=U([],u);var _=s.append("g").attr("class","outline-controllers");T(_);L()}function y(e){v=+e.srcElement.getAttribute("data-i");g=+e.srcElement.getAttribute("data-j");h[v][g].moveFn=b}function b(e,t){if(!u.length)return;var r=m[v][g][1];var n=m[v][g][2];var a=u[v];var i=a.length;if(F(a)){for(var o=0;o<i;o++){if(o===g)continue;var s=a[o];if(s[1]===a[g][1]){s[1]=r+e}if(s[2]===a[g][2]){s[2]=n+t}}a[g][1]=r+e;a[g][2]=n+t;if(!F(a)){for(var l=0;l<i;l++){for(var c=0;c<a[l].length;c++){a[l][c]=m[v][l][c]}}}}else{a[g][1]=r+e;a[g][2]=n+t}f()}function x(){a()}function w(){if(!u.length)return;if(!u[v])return;if(!u[v].length)return;var e=[];for(var t=0;t<u[v].length;t++){if(t!==g){e.push(u[v][t])}}if(e.length>1&&!(e.length===2&&e[1][0]==="Z")){if(g===0){e[0][0]="M"}u[v]=e;f();a()}}function A(e,t){if(e===2){v=+t.srcElement.getAttribute("data-i");g=+t.srcElement.getAttribute("data-j");var r=u[v];if(!F(r)&&!j(r)){w()}}}function T(e){h=[];for(var t=0;t<u.length;t++){var r=u[t];var n=F(r);var a=!n&&j(r);h[t]=[];for(var i=0;i<r.length;i++){if(r[i][0]==="Z")continue;if(a&&i!==P&&i!==I&&i!==R&&i!==z){continue}var o=r[i][1];var s=r[i][2];var l=e.append("circle").classed("cursor-grab",true).attr("data-i",t).attr("data-j",i).attr("cx",o).attr("cy",s).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});h[t][i]={element:l.node(),gd:c,prepFn:y,doneFn:x,clickFn:A};E.init(h[t][i])}}}function k(e,t){if(!u.length)return;for(var r=0;r<u.length;r++){for(var n=0;n<u[r].length;n++){for(var a=0;a+2<u[r][n].length;a+=2){u[r][n][a+1]=m[r][n][a+1]+e;u[r][n][a+2]=m[r][n][a+2]+t}}}}function M(e,t){k(e,t);f()}function S(e){v=+e.srcElement.getAttribute("data-i");if(!v)v=0;p[v].moveFn=M}function C(){a()}function L(){p=[];if(!u.length)return;var e=0;p[e]={element:r[0][0],gd:c,prepFn:S,doneFn:C};E.init(p[e])}};function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];e[r]=[];for(var a=0;a<n.length;a++){e[r][a]=[];for(var i=0;i<n[a].length;i++){e[r][a][i]=n[a][i]}}}return e}},{"../../../plots/cartesian/handle_outline":342,"../../../registry":373,"../../dragelement":174,"../../dragelement/helpers":173,"./constants":241,"./helpers":244,"./newshapes":245}],244:[function(e,t,f){"use strict";var R=e("parse-svg-path");var r=e("./constants");var z=r.CIRCLE_SIDES;var d=r.SQRT2;var n=e("../../../plots/cartesian/helpers");var N=n.p2r;var F=n.r2p;var u=[0,3,4,5,6,1,2];var h=[0,3,4,1,2];f.writePaths=function(e){var t=e.length;if(!t)return"M0,0Z";var r="";for(var n=0;n<t;n++){var a=e[n].length;for(var i=0;i<a;i++){var o=e[n][i][0];if(o==="Z"){r+="Z"}else{var s=e[n][i].length;for(var l=0;l<s;l++){var c=l;if(o==="Q"||o==="S"){c=h[l]}else if(o==="C"){c=u[l]}r+=e[n][i][c];if(l>0&&l<s-1){r+=","}}}}}return r};f.readPaths=function(e,t,r,n){var a=R(e);var i=[];var o=-1;var s=function(){o++;i[o]=[]};var l;var c=0;var u=0;var f;var d;var h=function(){f=c;d=u};h();for(var p=0;p<a.length;p++){var v=[];var g,m,_,y;var b=a[p][0];var x=b;switch(b){case"M":s();c=+a[p][1];u=+a[p][2];v.push([x,c,u]);h();break;case"Q":case"S":g=+a[p][1];_=+a[p][2];c=+a[p][3];u=+a[p][4];v.push([x,c,u,g,_]);break;case"C":g=+a[p][1];_=+a[p][2];m=+a[p][3];y=+a[p][4];c=+a[p][5];u=+a[p][6];v.push([x,c,u,g,_,m,y]);break;case"T":case"L":c=+a[p][1];u=+a[p][2];v.push([x,c,u]);break;case"H":x="L";c=+a[p][1];v.push([x,c,u]);break;case"V":x="L";u=+a[p][1];v.push([x,c,u]);break;case"A":x="L";var w=+a[p][1];var A=+a[p][2];if(!+a[p][4]){w=-w;A=-A}var T=c-w;var k=u;for(l=1;l<=z/2;l++){var M=2*Math.PI*l/z;v.push([x,T+w*Math.cos(M),k+A*Math.sin(M)])}break;case"Z":if(c!==f||u!==d){c=f;u=d;v.push([x,c,u])}break}var S=(r||{}).domain;var C=t._fullLayout._size;var L=r&&r.xsizemode==="pixel";var E=r&&r.ysizemode==="pixel";var D=n===false;for(var O=0;O<v.length;O++){for(l=0;l+2<7;l+=2){var P=v[O][l+1];var I=v[O][l+2];if(P===undefined||I===undefined)continue;c=P;u=I;if(r){if(r.xaxis&&r.xaxis.p2r){if(D)P-=r.xaxis._offset;if(L){P=F(r.xaxis,r.xanchor)+P}else{P=N(r.xaxis,P)}}else{if(D)P-=C.l;if(S)P=S.x[0]+P/C.w;else P=P/C.w}if(r.yaxis&&r.yaxis.p2r){if(D)I-=r.yaxis._offset;if(E){I=F(r.yaxis,r.yanchor)-I}else{I=N(r.yaxis,I)}}else{if(D)I-=C.t;if(S)I=S.y[1]-I/C.h;else I=1-I/C.h}}v[O][l+1]=P;v[O][l+2]=I}i[o].push(v[O].slice())}}return i};function s(e,t){return Math.abs(e-t)<=1e-6}function l(e,t){var r=t[1]-e[1];var n=t[2]-e[2];return Math.sqrt(r*r+n*n)}f.pointsShapeRectangle=function(e){var t=e.length;if(t!==5)return false;for(var r=1;r<3;r++){var n=e[0][r]-e[1][r];var a=e[3][r]-e[2][r];if(!s(n,a))return false;var i=e[0][r]-e[3][r];var o=e[1][r]-e[2][r];if(!s(i,o))return false}if(!s(e[0][1],e[1][1])&&!s(e[0][1],e[3][1]))return false;return!!(l(e[0],e[1])*l(e[0],e[3]))};f.pointsShapeEllipse=function(e){var t=e.length;if(t!==z+1)return false;t=z;for(var r=0;r<t;r++){var n=(t*2-r)%t;var a=(t/2+n)%t;var i=(t/2+r)%t;if(!s(l(e[r],e[i]),l(e[n],e[a])))return false}return true};f.handleEllipse=function(e,t,r){if(!e)return[t,r];var n=f.ellipseOver({x0:t[0],y0:t[1],x1:r[0],y1:r[1]});var a=(n.x1+n.x0)/2;var i=(n.y1+n.y0)/2;var o=(n.x1-n.x0)/2;var s=(n.y1-n.y0)/2;if(!o)o=s=s/d;if(!s)s=o=o/d;var l=[];for(var c=0;c<z;c++){var u=c*2*Math.PI/z;l.push([a+o*Math.cos(u),i+s*Math.sin(u)])}return l};f.ellipseOver=function(e){var t=e.x0;var r=e.y0;var n=e.x1;var a=e.y1;var i=n-t;var o=a-r;t-=i;r-=o;var s=(t+n)/2;var l=(r+a)/2;var c=d;i*=c;o*=c;return{x0:s-i,y0:l-o,x1:s+i,y1:l+o}}},{"../../../plots/cartesian/helpers":343,"./constants":241,"parse-svg-path":72}],245:[function(e,t,r){"use strict";var n=e("../../dragelement/helpers");var U=n.drawMode;var V=n.openMode;var a=e("./constants");var q=a.i000;var Y=a.i090;var G=a.i180;var W=a.i270;var X=a.cos45;var Z=a.sin45;var i=e("../../../plots/cartesian/helpers");var J=i.p2r;var $=i.r2p;var o=e("../../../plots/cartesian/handle_outline");var Q=o.clearSelect;var s=e("./helpers");var K=s.readPaths;var ee=s.writePaths;var te=s.ellipseOver;t.exports=function e(t,r){if(!t.length)return;var n=t[0][0];if(!n)return;var a=n.getAttribute("d");var i=r.gd;var o=i._fullLayout.newshape;var s=r.plotinfo;var l=s.xaxis;var c=s.yaxis;var u=!!s.domain||!s.xaxis;var f=!!s.domain||!s.yaxis;var d=r.isActiveShape;var h=r.dragmode;var p=(i.layout||{}).shapes||[];if(!U(h)&&d!==undefined){var v=i._fullLayout._activeShapeIndex;if(v<p.length){switch(i._fullLayout.shapes[v].type){case"rect":h="drawrect";break;case"circle":h="drawcircle";break;case"line":h="drawline";break;case"path":var g=p[v].path||"";if(g[g.length-1]==="Z"){h="drawclosedpath"}else{h="drawopenpath"}break}}}var m=V(h);var _=K(a,i,s,d);var y={editable:true,xref:u?"paper":l._id,yref:f?"paper":c._id,layer:o.layer,opacity:o.opacity,line:{color:o.line.color,width:o.line.width,dash:o.line.dash}};if(!m){y.fillcolor=o.fillcolor;y.fillrule=o.fillrule}var b;if(_.length===1)b=_[0];if(b&&h==="drawrect"){y.type="rect";y.x0=b[0][1];y.y0=b[0][2];y.x1=b[2][1];y.y1=b[2][2]}else if(b&&h==="drawline"){y.type="line";y.x0=b[0][1];y.y0=b[0][2];y.x1=b[1][1];y.y1=b[1][2]}else if(b&&h==="drawcircle"){y.type="circle";var x=b[q][1];var w=b[Y][1];var A=b[G][1];var T=b[W][1];var k=b[q][2];var M=b[Y][2];var S=b[G][2];var C=b[W][2];var L=s.xaxis&&(s.xaxis.type==="date"||s.xaxis.type==="log");var E=s.yaxis&&(s.yaxis.type==="date"||s.yaxis.type==="log");if(L){x=$(s.xaxis,x);w=$(s.xaxis,w);A=$(s.xaxis,A);T=$(s.xaxis,T)}if(E){k=$(s.yaxis,k);M=$(s.yaxis,M);S=$(s.yaxis,S);C=$(s.yaxis,C)}var D=(w+T)/2;var O=(k+S)/2;var P=(T-w+A-x)/2;var I=(C-M+S-k)/2;var R=te({x0:D,y0:O,x1:D+P*X,y1:O+I*Z});if(L){R.x0=J(s.xaxis,R.x0);R.x1=J(s.xaxis,R.x1)}if(E){R.y0=J(s.yaxis,R.y0);R.y1=J(s.yaxis,R.y1)}y.x0=R.x0;y.y0=R.y0;y.x1=R.x1;y.y1=R.y1}else{y.type="path";if(l&&c)re(_,l,c);y.path=ee(_);b=null}Q(i);var z=r.editHelpers;var N=(z||{}).modifyItem;var F=[];for(var j=0;j<p.length;j++){var B=i._fullLayout.shapes[j];F[j]=B._input;if(d!==undefined&&j===i._fullLayout._activeShapeIndex){var H=y;switch(B.type){case"line":case"rect":case"circle":N("x0",H.x0);N("x1",H.x1);N("y0",H.y0);N("y1",H.y1);break;case"path":N("path",H.path);break}}}if(d===undefined){F.push(y);return F}return z?z.getUpdateObj():{}};function re(e,t,r){var n=t.type==="date";var a=r.type==="date";if(!n&&!a)return e;for(var i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++){for(var s=0;s+2<e[i][o].length;s+=2){if(n)e[i][o][s+1]=e[i][o][s+1].replace(" ","_");if(a)e[i][o][s+2]=e[i][o][s+2].replace(" ","_")}}}return e}},{"../../../plots/cartesian/handle_outline":342,"../../../plots/cartesian/helpers":343,"../../dragelement/helpers":173,"./constants":241,"./helpers":244}],246:[function(e,t,s){"use strict";var i=e("./constants");var o=e("../../lib");s.rangeToShapePosition=function(e){return e.type==="log"?e.r2d:function(e){return e}};s.shapePositionToRange=function(e){return e.type==="log"?e.d2r:function(e){return e}};s.decodeDate=function(t){return function(e){if(e.replace)e=e.replace("_"," ");return t(e)}};s.encodeDate=function(t){return function(e){return t(e).replace(" ","_")}};s.extractPathCoords=function(e,n){var a=[];var t=e.match(i.segmentRE);t.forEach(function(e){var t=n[e.charAt(0)].drawn;if(t===undefined)return;var r=e.substr(1).match(i.paramRE);if(!r||r.length<t)return;a.push(o.cleanNumber(r[t]))});return a};s.getDataToPixel=function(e,t,r,n){var a=e._fullLayout._size;var i;if(t){if(n==="domain"){i=function(e){return t._length*(r?1-e:e)+t._offset}}else{var o=s.shapePositionToRange(t);i=function(e){return t._offset+t.r2p(o(e,true))};if(t.type==="date")i=s.decodeDate(i)}}else if(r){i=function(e){return a.t+a.h*(1-e)}}else{i=function(e){return a.l+a.w*e}}return i};s.getPixelToData=function(e,r,n,t){var a=e._fullLayout._size;var i;if(r){if(t==="domain"){i=function(e){var t=(e-r._offset)/r._length;return n?1-t:t}}else{var o=s.rangeToShapePosition(r);i=function(e){return o(r.p2r(e-r._offset))}}}else if(n){i=function(e){return 1-(e-a.t)/a.h}}else{i=function(e){return(e-a.l)/a.w}}return i};s.roundPositionForSharpStrokeRendering=function(e,t){var r=Math.round(t%2)===1;var n=Math.round(e);return r?n+.5:n};s.makeOptionsAndPlotinfo=function(e,t){var r=e._fullLayout.shapes[t]||{};var n=e._fullLayout._plots[r.xref+r.yref];var a=!!n;if(a){n._hadPlotinfo=true}else{n={};if(r.xref&&r.xref!=="paper")n.xaxis=e._fullLayout[r.xref+"axis"];if(r.yref&&r.yref!=="paper")n.yaxis=e._fullLayout[r.yref+"axis"]}n.xsizemode=r.xsizemode;n.ysizemode=r.ysizemode;n.xanchor=r.xanchor;n.yanchor=r.yanchor;return{options:r,plotinfo:n}}},{"../../lib":285,"./constants":237}],247:[function(e,t,r){"use strict";var n=e("./draw");t.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),supplyDrawNewShapeDefaults:e("./draw_newshape/defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:n.draw,drawOne:n.drawOne}},{"../../plots/cartesian/include_components":344,"./attributes":235,"./calc_autorange":236,"./defaults":238,"./draw":239,"./draw_newshape/defaults":242}],248:[function(e,t,r){"use strict";var n=e("../../plots/font_attributes");var a=e("../../plots/pad_attributes");var i=e("../../lib/extend").extendDeepAll;var o=e("../../plot_api/edit_types").overrideAll;var s=e("../../plots/animation_attributes");var l=e("../../plot_api/plot_template").templatedArray;var c=e("./constants");var u=l("step",{visible:{valType:"boolean",dflt:true},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:true,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:true}});t.exports=o(l("slider",{visible:{valType:"boolean",dflt:true},active:{valType:"number",min:0,dflt:0},steps:u,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:i(a({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:true},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:n({})},font:n({}),activebgcolor:{valType:"color",dflt:c.gripBgActiveColor},bgcolor:{valType:"color",dflt:c.railBgColor},bordercolor:{valType:"color",dflt:c.railBorderColor},borderwidth:{valType:"number",min:0,dflt:c.railBorderWidth},ticklen:{valType:"number",min:0,dflt:c.tickLength},tickcolor:{valType:"color",dflt:c.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:c.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":279,"../../plot_api/edit_types":313,"../../plot_api/plot_template":320,"../../plots/animation_attributes":325,"../../plots/font_attributes":360,"../../plots/pad_attributes":365,"./constants":249}],249:[function(e,t,r){"use strict";t.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],250:[function(e,t,r){"use strict";var f=e("../../lib");var d=e("../../plots/array_container_defaults");var h=e("./attributes");var n=e("./constants");var a=n.name;var i=h.steps;t.exports=function e(t,r){d(t,r,{name:a,handleItemDefaults:o})};function o(r,n,e){function t(e,t){return f.coerce(r,n,h,e,t)}var a=d(r,n,{name:"steps",handleItemDefaults:p});var i=0;for(var o=0;o<a.length;o++){if(a[o].visible)i++}var s;if(i<2)s=n.visible=false;else s=t("visible");if(!s)return;n._stepCount=i;var l=n._visibleSteps=f.filterVisible(a);var c=t("active");if(!(a[c]||{}).visible)n.active=l[0]._index;t("x");t("y");f.noneOrAll(r,n,["x","y"]);t("xanchor");t("yanchor");t("len");t("lenmode");t("pad.t");t("pad.r");t("pad.b");t("pad.l");f.coerceFont(t,"font",e.font);var u=t("currentvalue.visible");if(u){t("currentvalue.xanchor");t("currentvalue.prefix");t("currentvalue.suffix");t("currentvalue.offset");f.coerceFont(t,"currentvalue.font",n.font)}t("transition.duration");t("transition.easing");t("bgcolor");t("activebgcolor");t("bordercolor");t("borderwidth");t("ticklen");t("tickwidth");t("tickcolor");t("minorticklen")}function p(r,n){function e(e,t){return f.coerce(r,n,i,e,t)}var t;if(r.method!=="skip"&&!Array.isArray(r.args)){t=n.visible=false}else t=e("visible");if(t){e("method");e("args");var a=e("label","step-"+n._index);e("value",a);e("execute")}}},{"../../lib":285,"../../plots/array_container_defaults":326,"./attributes":248,"./constants":249}],251:[function(e,t,r){"use strict";var p=e("@plotly/d3");var v=e("../../plots/plots");var l=e("../color");var g=e("../drawing");var m=e("../../lib");var c=m.strTranslate;var _=e("../../lib/svg_text_utils");var u=e("../../plot_api/plot_template").arrayEditor;var y=e("./constants");var n=e("../../constants/alignment");var d=n.LINE_SPACING;var b=n.FROM_TL;var x=n.FROM_BR;t.exports=function e(n){var t=n._fullLayout;var r=f(t,n);var a=t._infolayer.selectAll("g."+y.containerClassName).data(r.length>0?[0]:[]);a.enter().append("g").classed(y.containerClassName,true).style("cursor","ew-resize");function i(e){if(e._commandObserver){e._commandObserver.remove();delete e._commandObserver}v.autoMargin(n,w(e))}a.exit().each(function(){p.select(this).selectAll("g."+y.groupClassName).each(i)}).remove();if(r.length===0)return;var o=a.selectAll("g."+y.groupClassName).data(r,h);o.enter().append("g").classed(y.groupClassName,true);o.exit().each(i).remove();for(var s=0;s<r.length;s++){var l=r[s];A(n,l)}o.each(function(e){var r=p.select(this);L(e);v.manageCommandObserver(n,e,e._visibleSteps,function(e){var t=r.data()[0];if(t.active===e.index)return;if(t._dragging)return;C(n,r,t,e.index,false,true)});T(n,p.select(this),e)})};function w(e){return y.autoMarginIdRoot+e._index}function f(e,t){var r=e[y.name];var n=[];for(var a=0;a<r.length;a++){var i=r[a];if(!i.visible)continue;i._gd=t;n.push(i)}return n}function h(e){return e._index}function A(e,i){var t=g.tester.selectAll("g."+y.labelGroupClass).data(i._visibleSteps);t.enter().append("g").classed(y.labelGroupClass,true);var o=0;var s=0;t.each(function(e){var t=p.select(this);var r=M(t,{step:e},i);var n=r.node();if(n){var a=g.bBox(n);s=Math.max(s,a.height);o=Math.max(o,a.width)}});t.remove();var a=i._dims={};a.inputAreaWidth=Math.max(y.railWidth,y.gripHeight);var r=e._fullLayout._size;a.lx=r.l+r.w*i.x;a.ly=r.t+r.h*(1-i.y);if(i.lenmode==="fraction"){a.outerLength=Math.round(r.w*i.len)}else{a.outerLength=i.len}a.inputAreaStart=0;a.inputAreaLength=Math.round(a.outerLength-i.pad.l-i.pad.r);var n=a.inputAreaLength-2*y.stepInset;var l=n/(i._stepCount-1);var c=o+y.labelPadding;a.labelStride=Math.max(1,Math.ceil(c/l));a.labelHeight=s;a.currentValueMaxWidth=0;a.currentValueHeight=0;a.currentValueTotalHeight=0;a.currentValueMaxLines=1;if(i.currentvalue.visible){var u=g.tester.append("g");t.each(function(e){var t=k(u,i,e.label);var r=t.node()&&g.bBox(t.node())||{width:0,height:0};var n=_.lineCount(t);a.currentValueMaxWidth=Math.max(a.currentValueMaxWidth,Math.ceil(r.width));a.currentValueHeight=Math.max(a.currentValueHeight,Math.ceil(r.height));a.currentValueMaxLines=Math.max(a.currentValueMaxLines,n)});a.currentValueTotalHeight=a.currentValueHeight+i.currentvalue.offset;u.remove()}a.height=a.currentValueTotalHeight+y.tickOffset+i.ticklen+y.labelOffset+a.labelHeight+i.pad.t+i.pad.b;var f="left";if(m.isRightAnchor(i)){a.lx-=a.outerLength;f="right"}if(m.isCenterAnchor(i)){a.lx-=a.outerLength/2;f="center"}var d="top";if(m.isBottomAnchor(i)){a.ly-=a.height;d="bottom"}if(m.isMiddleAnchor(i)){a.ly-=a.height/2;d="middle"}a.outerLength=Math.ceil(a.outerLength);a.height=Math.ceil(a.height);a.lx=Math.round(a.lx);a.ly=Math.round(a.ly);var h={y:i.y,b:a.height*x[d],t:a.height*b[d]};if(i.lenmode==="fraction"){h.l=0;h.xl=i.x-i.len*b[f];h.r=0;h.xr=i.x+i.len*x[f]}else{h.x=i.x;h.l=a.outerLength*b[f];h.r=a.outerLength*x[f]}v.autoMargin(e,w(i),h)}function T(e,t,r){if(!(r.steps[r.active]||{}).visible){r.active=r._visibleSteps[0]._index}t.call(k,r).call(I,r).call(i,r).call(s,r).call(P,e,r).call(a,e,r);var n=r._dims;g.setTranslate(t,n.lx+r.pad.l,n.ly+r.pad.t);t.call(E,r,false);t.call(k,r)}function k(e,t,r){if(!t.currentvalue.visible)return;var n=t._dims;var a,i;switch(t.currentvalue.xanchor){case"right":a=n.inputAreaLength-y.currentValueInset-n.currentValueMaxWidth;i="left";break;case"center":a=n.inputAreaLength*.5;i="middle";break;default:a=y.currentValueInset;i="left"}var o=m.ensureSingle(e,"text",y.labelClass,function(e){e.attr({"text-anchor":i,"data-notex":1})});var s=t.currentvalue.prefix?t.currentvalue.prefix:"";if(typeof r==="string"){s+=r}else{var l=t.steps[t.active].label;var c=t._gd._fullLayout._meta;if(c)l=m.templateString(l,c);s+=l}if(t.currentvalue.suffix){s+=t.currentvalue.suffix}o.call(g.font,t.currentvalue.font).text(s).call(_.convertToTspans,t._gd);var u=_.lineCount(o);var f=(n.currentValueMaxLines+1-u)*t.currentvalue.font.size*d;_.positionText(o,a,f);return o}function a(t,r,n){var e=m.ensureSingle(t,"rect",y.gripRectClass,function(e){e.call(o,r,t,n).style("pointer-events","all")});e.attr({width:y.gripWidth,height:y.gripHeight,rx:y.gripRadius,ry:y.gripRadius}).call(l.stroke,n.bordercolor).call(l.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px")}function M(e,t,r){var n=m.ensureSingle(e,"text",y.labelClass,function(e){e.attr({"text-anchor":"middle","data-notex":1})});var a=t.step.label;var i=r._gd._fullLayout._meta;if(i)a=m.templateString(a,i);n.call(g.font,r.font).text(a).call(_.convertToTspans,r._gd);return n}function i(e,r){var t=m.ensureSingle(e,"g",y.labelsClass);var n=r._dims;var a=t.selectAll("g."+y.labelGroupClass).data(n.labelSteps);a.enter().append("g").classed(y.labelGroupClass,true);a.exit().remove();a.each(function(e){var t=p.select(this);t.call(M,e,r);g.setTranslate(t,D(r,e.fraction),y.tickOffset+r.ticklen+r.font.size*d+y.labelOffset+n.currentValueTotalHeight)})}function S(e,t,r,n,a){var i=Math.round(n*(r._stepCount-1));var o=r._visibleSteps[i]._index;if(o!==r.active){C(e,t,r,o,true,a)}}function C(t,r,e,n,a,i){var o=e.active;e.active=n;u(t.layout,y.name,e).applyUpdate("active",n);var s=e.steps[e.active];r.call(E,e,i);r.call(k,e);t.emit("plotly_sliderchange",{slider:e,step:e.steps[e.active],interaction:a,previousActive:o});if(s&&s.method&&a){if(r._nextMethod){r._nextMethod.step=s;r._nextMethod.doCallback=a;r._nextMethod.doTransition=i}else{r._nextMethod={step:s,doCallback:a,doTransition:i};r._nextMethodRaf=window.requestAnimationFrame(function(){var e=r._nextMethod.step;if(!e.method)return;if(e.execute){v.executeAPICommand(t,e.method,e.args)}r._nextMethod=null;r._nextMethodRaf=null})}}}function o(e,n,a){var i=a.node();var o=p.select(n);function s(){return a.data()[0]}e.on("mousedown",function(){var e=s();n.emit("plotly_sliderstart",{slider:e});var t=a.select("."+y.gripRectClass);p.event.stopPropagation();p.event.preventDefault();t.call(l.fill,e.activebgcolor);var r=O(e,p.mouse(i)[0]);S(n,a,e,r,true);e._dragging=true;o.on("mousemove",function(){var e=s();var t=O(e,p.mouse(i)[0]);S(n,a,e,t,false)});o.on("mouseup",function(){var e=s();e._dragging=false;t.call(l.fill,e.bgcolor);o.on("mouseup",null);o.on("mousemove",null);n.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})})})}function s(e,a){var t=e.selectAll("rect."+y.tickRectClass).data(a._visibleSteps);var i=a._dims;t.enter().append("rect").classed(y.tickRectClass,true);t.exit().remove();t.attr({width:a.tickwidth+"px","shape-rendering":"crispEdges"});t.each(function(e,t){var r=t%i.labelStride===0;var n=p.select(this);n.attr({height:r?a.ticklen:a.minorticklen}).call(l.fill,r?a.tickcolor:a.tickcolor);g.setTranslate(n,D(a,t/(a._stepCount-1))-.5*a.tickwidth,(r?y.tickOffset:y.minorTickOffset)+i.currentValueTotalHeight)})}function L(e){var t=e._dims;t.labelSteps=[];var r=e._stepCount;for(var n=0;n<r;n+=t.labelStride){t.labelSteps.push({fraction:n/(r-1),step:e._visibleSteps[n]})}}function E(e,t,r){var n=e.select("rect."+y.gripRectClass);var a=0;for(var i=0;i<t._stepCount;i++){if(t._visibleSteps[i]._index===t.active){a=i;break}}var o=D(t,a/(t._stepCount-1));if(t._invokingCommand)return;var s=n;if(r&&t.transition.duration>0){s=s.transition().duration(t.transition.duration).ease(t.transition.easing)}s.attr("transform",c(o-y.gripWidth*.5,t._dims.currentValueTotalHeight))}function D(e,t){var r=e._dims;return r.inputAreaStart+y.stepInset+(r.inputAreaLength-2*y.stepInset)*Math.min(1,Math.max(0,t))}function O(e,t){var r=e._dims;return Math.min(1,Math.max(0,(t-y.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*y.stepInset-2*r.inputAreaStart)))}function P(t,r,n){var e=n._dims;var a=m.ensureSingle(t,"rect",y.railTouchRectClass,function(e){e.call(o,r,t,n).style("pointer-events","all")});a.attr({width:e.inputAreaLength,height:Math.max(e.inputAreaWidth,y.tickOffset+n.ticklen+e.labelHeight)}).call(l.fill,n.bgcolor).attr("opacity",0);g.setTranslate(a,0,e.currentValueTotalHeight)}function I(e,t){var r=t._dims;var n=r.inputAreaLength-y.railInset*2;var a=m.ensureSingle(e,"rect",y.railRectClass);a.attr({width:n,height:y.railWidth,rx:y.railRadius,ry:y.railRadius,"shape-rendering":"crispEdges"}).call(l.stroke,t.bordercolor).call(l.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px");g.setTranslate(a,y.railInset,(r.inputAreaWidth-y.railWidth)*.5+r.currentValueTotalHeight)}},{"../../constants/alignment":260,"../../lib":285,"../../lib/svg_text_utils":307,"../../plot_api/plot_template":320,"../../plots/plots":366,"../color":155,"../drawing":177,"./constants":249,"@plotly/d3":20}],252:[function(e,t,r){"use strict";var n=e("./constants");t.exports={moduleType:"component",name:n.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":248,"./constants":249,"./defaults":250,"./draw":251}],253:[function(e,t,r){"use strict";var C=e("@plotly/d3");var L=e("fast-isnumeric");var E=e("../../plots/plots");var D=e("../../registry");var O=e("../../lib");var P=O.strTranslate;var I=e("../drawing");var R=e("../color");var z=e("../../lib/svg_text_utils");var N=e("../../constants/interactions");var F=e("../../constants/alignment").OPPOSITE_SIDE;var j=/ [XY][0-9]* /;function n(r,e,t){var n=t.propContainer;var a=t.propName;var i=t.placeholder;var o=t.traceIndex;var d=t.avoid||{};var s=t.attributes;var l=t.transform;var c=t.containerGroup;var h=r._fullLayout;var u=1;var f=false;var p=n.title;var v=(p&&p.text?p.text:"").trim();var g=p&&p.font?p.font:{};var m=g.family;var _=g.size;var y=g.color;var b;if(a==="title.text")b="titleText";else if(a.indexOf("axis")!==-1)b="axisTitleText";else if(a.indexOf("colorbar"!==-1))b="colorbarTitleText";var x=r._context.edits[b];if(v==="")u=0;else if(v.replace(j," % ")===i.replace(j," % ")){u=.2;f=true;if(!x)v=""}if(t._meta){v=O.templateString(v,t._meta)}else if(h._meta){v=O.templateString(v,h._meta)}var w=v||x;if(!c){c=O.ensureSingle(h._infolayer,"g","g-"+e)}var A=c.selectAll("text").data(w?[0]:[]);A.enter().append("text");A.text(v).attr("class",e);A.exit().remove();if(!w)return c;function T(e){O.syncOrAsync([k,M],e)}function k(e){var t;if(l){t="";if(l.rotate){t+="rotate("+[l.rotate,s.x,s.y]+")"}if(l.offset){t+=P(0,l.offset)}}else{t=null}e.attr("transform",t);e.style({"font-family":m,"font-size":C.round(_,2)+"px",fill:R.rgb(y),opacity:u*R.opacity(y),"font-weight":E.fontWeight}).attr(s).call(z.convertToTspans,r);return E.previousPromises(r)}function M(e){var t=C.select(e.node().parentNode);if(d&&d.selection&&d.side&&v){t.attr("transform",null);var r=F[d.side];var n=d.side==="left"||d.side==="top"?-1:1;var a=L(d.pad)?d.pad:2;var i=I.bBox(t.node());var o={left:0,top:0,right:h.width,bottom:h.height};var s=d.maxShift||n*(o[d.side]-i[d.side]);var l=0;if(s<0){l=s}else{var c=d.offsetLeft||0;var u=d.offsetTop||0;i.left-=c;i.right-=c;i.top-=u;i.bottom-=u;d.selection.each(function(){var e=I.bBox(this);if(O.bBoxIntersect(i,e,a)){l=Math.max(l,n*(e[d.side]-i[r])+a)}});l=Math.min(s,l)}if(l>0||s<0){var f={left:[-l,0],right:[l,0],top:[0,-l],bottom:[0,l]}[d.side];t.attr("transform",P(f[0],f[1]))}}}A.call(T);function S(){u=0;f=true;A.text(i).on("mouseover.opacity",function(){C.select(this).transition().duration(N.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){C.select(this).transition().duration(N.HIDE_PLACEHOLDER).style("opacity",0)})}if(x){if(!v)S();else A.on(".opacity",null);A.call(z.makeEditable,{gd:r}).on("edit",function(e){if(o!==undefined){D.call("_guiRestyle",r,a,e,o)}else{D.call("_guiRelayout",r,a,e)}}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(T)}).on("input",function(e){this.text(e||" ").call(z.positionText,s.x,s.y)})}A.classed("js-placeholder",f);return c}t.exports={draw:n}},{"../../constants/alignment":260,"../../constants/interactions":264,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/plots":366,"../../registry":373,"../color":155,"../drawing":177,"@plotly/d3":20,"fast-isnumeric":31}],254:[function(e,t,r){"use strict";var n=e("../../plots/font_attributes");var a=e("../color/attributes");var i=e("../../lib/extend").extendFlat;var o=e("../../plot_api/edit_types").overrideAll;var s=e("../../plots/pad_attributes");var l=e("../../plot_api/plot_template").templatedArray;var c=l("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:true,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:true,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:true}});t.exports=o(l("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:true},buttons:c,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:i(s({editType:"arraydraw"}),{}),font:n({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:a.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":279,"../../plot_api/edit_types":313,"../../plot_api/plot_template":320,"../../plots/font_attributes":360,"../../plots/pad_attributes":365,"../color/attributes":154}],255:[function(e,t,r){"use strict";t.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},{}],256:[function(e,t,r){"use strict";var o=e("../../lib");var s=e("../../plots/array_container_defaults");var l=e("./attributes");var n=e("./constants");var a=n.name;var i=l.buttons;t.exports=function e(t,r){var n={name:a,handleItemDefaults:c};s(t,r,n)};function c(r,n,e){function t(e,t){return o.coerce(r,n,l,e,t)}var a=s(r,n,{name:"buttons",handleItemDefaults:u});var i=t("visible",a.length>0);if(!i)return;t("active");t("direction");t("type");t("showactive");t("x");t("y");o.noneOrAll(r,n,["x","y"]);t("xanchor");t("yanchor");t("pad.t");t("pad.r");t("pad.b");t("pad.l");o.coerceFont(t,"font",e.font);t("bgcolor",e.paper_bgcolor);t("bordercolor");t("borderwidth")}function u(r,n){function e(e,t){return o.coerce(r,n,i,e,t)}var t=e("visible",r.method==="skip"||Array.isArray(r.args));if(t){e("method");e("args");e("args2");e("label");e("execute")}}},{"../../lib":285,"../../plots/array_container_defaults":326,"./attributes":254,"./constants":255}],257:[function(e,t,r){"use strict";var g=e("@plotly/d3");var m=e("../../plots/plots");var i=e("../color");var p=e("../drawing");var _=e("../../lib");var v=e("../../lib/svg_text_utils");var l=e("../../plot_api/plot_template").arrayEditor;var y=e("../../constants/alignment").LINE_SPACING;var b=e("./constants");var d=e("./scrollbox");t.exports=function e(a){var t=a._fullLayout;var r=_.filterVisible(t[b.name]);function n(e){m.autoMargin(a,P(e))}var i=t._menulayer.selectAll("g."+b.containerClassName).data(r.length>0?[0]:[]);i.enter().append("g").classed(b.containerClassName,true).style("cursor","pointer");i.exit().each(function(){g.select(this).selectAll("g."+b.headerGroupClassName).each(n)}).remove();if(r.length===0)return;var o=i.selectAll("g."+b.headerGroupClassName).data(r,h);o.enter().append("g").classed(b.headerGroupClassName,true);var s=_.ensureSingle(i,"g",b.dropdownButtonGroupClassName,function(e){e.style("pointer-events","all")});for(var l=0;l<r.length;l++){var c=r[l];O(a,c)}var u="updatemenus"+t._uid;var f=new d(a,s,u);if(o.enter().size()){s.node().parentNode.appendChild(s.node());s.call(R)}o.exit().each(function(e){s.call(R);n(e)}).remove();o.each(function(t){var r=g.select(this);var n=t.type==="dropdown"?s:null;m.manageCommandObserver(a,t,t.buttons,function(e){A(a,t,t.buttons[e.index],r,n,f,e.index,true)});if(t.type==="dropdown"){T(a,r,s,f,t);if(w(s,t)){k(a,r,s,f,t)}}else{k(a,r,null,null,t)}})};function h(e){return e._index}function x(e){return+e.attr(b.menuIndexAttrName)===-1}function w(e,t){return+e.attr(b.menuIndexAttrName)===t._index}function A(e,t,r,n,a,i,o,s){t.active=o;l(e.layout,b.name,t).applyUpdate("active",o);if(t.type==="buttons"){k(e,n,null,null,t)}else if(t.type==="dropdown"){a.attr(b.menuIndexAttrName,"-1");T(e,n,a,i,t);if(!s){k(e,n,a,i,t)}}}function T(e,t,r,n,a){var i=_.ensureSingle(t,"g",b.headerClassName,function(e){e.style("pointer-events","all")});var o=a._dims;var s=a.active;var l=a.buttons[s]||b.blankHeaderOpts;var c={y:a.pad.t,yPad:0,x:a.pad.l,xPad:0,index:0};var u={width:o.headerWidth,height:o.headerHeight};i.call(C,a,l,e).call(I,a,c,u);var f=_.ensureSingle(t,"text",b.headerArrowClassName,function(e){e.attr("text-anchor","end").call(p.font,a.font).text(b.arrowSymbol[a.direction])});f.attr({x:o.headerWidth-b.arrowOffsetX+a.pad.l,y:o.headerHeight/2+b.textOffsetY+a.pad.t});i.on("click",function(){r.call(R,String(w(r,a)?-1:a._index));k(e,t,r,n,a)});i.on("mouseover",function(){i.call(E)});i.on("mouseout",function(){i.call(D,a)});p.setTranslate(t,o.lx,o.ly)}function k(n,a,i,o,s){if(!i){i=a;i.attr("pointer-events","all")}var e=!x(i)||s.type==="buttons"?s.buttons:[];var t=s.type==="dropdown"?b.dropdownButtonClassName:b.buttonClassName;var l=i.selectAll("g."+t).data(_.filterVisible(e));var r=l.enter().append("g").classed(t,true);var c=l.exit();if(s.type==="dropdown"){r.attr("opacity","0").transition().attr("opacity","1");c.transition().attr("opacity","0").remove()}else{c.remove()}var u=0;var f=0;var d=s._dims;var h=["up","down"].indexOf(s.direction)!==-1;if(s.type==="dropdown"){if(h){f=d.headerHeight+b.gapButtonHeader}else{u=d.headerWidth+b.gapButtonHeader}}if(s.type==="dropdown"&&s.direction==="up"){f=-b.gapButtonHeader+b.gapButton-d.openHeight}if(s.type==="dropdown"&&s.direction==="left"){u=-b.gapButtonHeader+b.gapButton-d.openWidth}var p={x:d.lx+u+s.pad.l,y:d.ly+f+s.pad.t,yPad:b.gapButton,xPad:b.gapButton,index:0};var v={l:p.x+s.borderwidth,t:p.y+s.borderwidth};l.each(function(e,t){var r=g.select(this);r.call(C,s,e,n).call(I,s,p);r.on("click",function(){if(g.event.defaultPrevented)return;if(e.execute){if(e.args2&&s.active===t){A(n,s,e,a,i,o,-1);m.executeAPICommand(n,e.method,e.args2)}else{A(n,s,e,a,i,o,t);m.executeAPICommand(n,e.method,e.args)}}n.emit("plotly_buttonclicked",{menu:s,button:e,active:s.active})});r.on("mouseover",function(){r.call(E)});r.on("mouseout",function(){r.call(D,s);l.call(L,s)})});l.call(L,s);if(h){v.w=Math.max(d.openWidth,d.headerWidth);v.h=p.y-v.t}else{v.w=p.x-v.l;v.h=Math.max(d.openHeight,d.headerHeight)}v.direction=s.direction;if(o){if(l.size()){M(n,a,i,o,s,v)}else{S(o)}}}function M(e,t,r,n,a,i){var o=a.direction;var s=o==="up"||o==="down";var l=a._dims;var c=a.active;var u,f;var d;if(s){f=0;for(d=0;d<c;d++){f+=l.heights[d]+b.gapButton}}else{u=0;for(d=0;d<c;d++){u+=l.widths[d]+b.gapButton}}n.enable(i,u,f);if(n.hbar){n.hbar.attr("opacity","0").transition().attr("opacity","1")}if(n.vbar){n.vbar.attr("opacity","0").transition().attr("opacity","1")}}function S(e){var t=!!e.hbar;var r=!!e.vbar;if(t){e.hbar.transition().attr("opacity","0").each("end",function(){t=false;if(!r)e.disable()})}if(r){e.vbar.transition().attr("opacity","0").each("end",function(){r=false;if(!t)e.disable()})}}function C(e,t,r,n){e.call(a,t).call(o,t,r,n)}function a(e,t){var r=_.ensureSingle(e,"rect",b.itemRectClassName,function(e){e.attr({rx:b.rx,ry:b.ry,"shape-rendering":"crispEdges"})});r.call(i.stroke,t.bordercolor).call(i.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function o(e,t,r,n){var a=_.ensureSingle(e,"text",b.itemTextClassName,function(e){e.attr({"text-anchor":"start","data-notex":1})});var i=r.label;var o=n._fullLayout._meta;if(o)i=_.templateString(i,o);a.call(p.font,t.font).text(i).call(v.convertToTspans,n)}function L(e,n){var a=n.active;e.each(function(e,t){var r=g.select(this);if(t===a&&n.showactive){r.select("rect."+b.itemRectClassName).call(i.fill,b.activeColor)}})}function E(e){e.select("rect."+b.itemRectClassName).call(i.fill,b.hoverColor)}function D(e,t){e.select("rect."+b.itemRectClassName).call(i.fill,t.bgcolor)}function O(c,u){var f=u._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0};var e=p.tester.selectAll("g."+b.dropdownButtonClassName).data(_.filterVisible(u.buttons));e.enter().append("g").classed(b.dropdownButtonClassName,true);var d=["up","down"].indexOf(u.direction)!==-1;e.each(function(e,t){var r=g.select(this);r.call(C,u,e,c);var n=r.select("."+b.itemTextClassName);var a=n.node()&&p.bBox(n.node()).width;var i=Math.max(a+b.textPadX,b.minWidth);var o=u.font.size*y;var s=v.lineCount(n);var l=Math.max(o*s,b.minHeight)+b.textOffsetY;l=Math.ceil(l);i=Math.ceil(i);f.widths[t]=i;f.heights[t]=l;f.height1=Math.max(f.height1,l);f.width1=Math.max(f.width1,i);if(d){f.totalWidth=Math.max(f.totalWidth,i);f.openWidth=f.totalWidth;f.totalHeight+=l+b.gapButton;f.openHeight+=l+b.gapButton}else{f.totalWidth+=i+b.gapButton;f.openWidth+=i+b.gapButton;f.totalHeight=Math.max(f.totalHeight,l);f.openHeight=f.totalHeight}});if(d){f.totalHeight-=b.gapButton}else{f.totalWidth-=b.gapButton}f.headerWidth=f.width1+b.arrowPadX;f.headerHeight=f.height1;if(u.type==="dropdown"){if(d){f.width1+=b.arrowPadX;f.totalHeight=f.height1}else{f.totalWidth=f.width1}f.totalWidth+=b.arrowPadX}e.remove();var t=f.totalWidth+u.pad.l+u.pad.r;var r=f.totalHeight+u.pad.t+u.pad.b;var n=c._fullLayout._size;f.lx=n.l+n.w*u.x;f.ly=n.t+n.h*(1-u.y);var a="left";if(_.isRightAnchor(u)){f.lx-=t;a="right"}if(_.isCenterAnchor(u)){f.lx-=t/2;a="center"}var i="top";if(_.isBottomAnchor(u)){f.ly-=r;i="bottom"}if(_.isMiddleAnchor(u)){f.ly-=r/2;i="middle"}f.totalWidth=Math.ceil(f.totalWidth);f.totalHeight=Math.ceil(f.totalHeight);f.lx=Math.round(f.lx);f.ly=Math.round(f.ly);m.autoMargin(c,P(u),{x:u.x,y:u.y,l:t*({right:1,center:.5}[a]||0),r:t*({left:1,center:.5}[a]||0),b:r*({top:1,middle:.5}[i]||0),t:r*({bottom:1,middle:.5}[i]||0)})}function P(e){return b.autoMarginIdRoot+e._index}function I(e,t,r,n){n=n||{};var a=e.select("."+b.itemRectClassName);var i=e.select("."+b.itemTextClassName);var o=t.borderwidth;var s=r.index;var l=t._dims;p.setTranslate(e,o+r.x,o+r.y);var c=["up","down"].indexOf(t.direction)!==-1;var u=n.height||(c?l.heights[s]:l.height1);a.attr({x:0,y:0,width:n.width||(c?l.width1:l.widths[s]),height:u});var f=t.font.size*y;var d=v.lineCount(i);var h=(d-1)*f/2;v.positionText(i,b.textOffsetX,u/2-h+b.textOffsetY);if(c){r.y+=l.heights[s]+r.yPad}else{r.x+=l.widths[s]+r.xPad}r.index++}function R(e,t){e.attr(b.menuIndexAttrName,t||"-1").selectAll("g."+b.dropdownButtonClassName).remove()}},{"../../constants/alignment":260,"../../lib":285,"../../lib/svg_text_utils":307,"../../plot_api/plot_template":320,"../../plots/plots":366,"../color":155,"../drawing":177,"./constants":255,"./scrollbox":259,"@plotly/d3":20}],258:[function(e,t,r){arguments[4][252][0].apply(r,arguments)},{"./attributes":254,"./constants":255,"./defaults":256,"./draw":257,dup:252}],259:[function(e,t,r){"use strict";t.exports=G;var V=e("@plotly/d3");var q=e("../color");var Y=e("../drawing");var h=e("../../lib");function G(e,t,r){this.gd=e;this.container=t;this.id=r;this.position=null;this.translateX=null;this.translateY=null;this.hbar=null;this.vbar=null;this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]);this.bg.exit().on(".drag",null).on("wheel",null).remove();this.bg.enter().append("rect").classed("scrollbox-bg",true).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}G.barWidth=2;G.barLength=20;G.barRadius=2;G.barPad=1;G.barColor="#808BA4";G.prototype.enable=function e(t,r,n){var a=this.gd._fullLayout;var i=a.width;var o=a.height;this.position=t;var s=this.position.l;var l=this.position.w;var c=this.position.t;var u=this.position.h;var f=this.position.direction;var d=f==="down";var h=f==="left";var p=f==="right";var v=f==="up";var g=l;var m=u;var _,y;var b,x;if(!d&&!h&&!p&&!v){this.position.direction="down";d=true}var w=d||v;if(w){_=s;y=_+g;if(d){b=c;x=Math.min(b+m,o);m=x-b}else{x=c+m;b=Math.max(x-m,0);m=x-b}}else{b=c;x=b+m;if(h){y=s+g;_=Math.max(y-g,0);g=y-_}else{_=s;y=Math.min(_+g,i);g=y-_}}this._box={l:_,t:b,w:g,h:m};var A=l>g;var T=G.barLength+2*G.barPad;var k=G.barWidth+2*G.barPad;var M=s;var S=c+u;if(S+k>o)S=o-k;var C=this.container.selectAll("rect.scrollbar-horizontal").data(A?[0]:[]);C.exit().on(".drag",null).remove();C.enter().append("rect").classed("scrollbar-horizontal",true).call(q.fill,G.barColor);if(A){this.hbar=C.attr({rx:G.barRadius,ry:G.barRadius,x:M,y:S,width:T,height:k});this._hbarXMin=M+T/2;this._hbarTranslateMax=g-T}else{delete this.hbar;delete this._hbarXMin;delete this._hbarTranslateMax}var L=u>m;var E=G.barWidth+2*G.barPad;var D=G.barLength+2*G.barPad;var O=s+l;var P=c;if(O+E>i)O=i-E;var I=this.container.selectAll("rect.scrollbar-vertical").data(L?[0]:[]);I.exit().on(".drag",null).remove();I.enter().append("rect").classed("scrollbar-vertical",true).call(q.fill,G.barColor);if(L){this.vbar=I.attr({rx:G.barRadius,ry:G.barRadius,x:O,y:P,width:E,height:D});this._vbarYMin=P+D/2;this._vbarTranslateMax=m-D}else{delete this.vbar;delete this._vbarYMin;delete this._vbarTranslateMax}var R=this.id;var z=_-.5;var N=L?y+E+.5:y+.5;var F=b-.5;var j=A?x+k+.5:x+.5;var B=a._topdefs.selectAll("#"+R).data(A||L?[0]:[]);B.exit().remove();B.enter().append("clipPath").attr("id",R).append("rect");if(A||L){this._clipRect=B.select("rect").attr({x:Math.floor(z),y:Math.floor(F),width:Math.ceil(N)-Math.floor(z),height:Math.ceil(j)-Math.floor(F)});this.container.call(Y.setClipUrl,R,this.gd);this.bg.attr({x:s,y:c,width:l,height:u})}else{this.bg.attr({width:0,height:0});this.container.on("wheel",null).on(".drag",null).call(Y.setClipUrl,null);delete this._clipRect}if(A||L){var H=V.behavior.drag().on("dragstart",function(){V.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(H);var U=V.behavior.drag().on("dragstart",function(){V.event.sourceEvent.preventDefault();V.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));if(A){this.hbar.on(".drag",null).call(U)}if(L){this.vbar.on(".drag",null).call(U)}}this.setTranslate(r,n)};G.prototype.disable=function e(){if(this.hbar||this.vbar){this.bg.attr({width:0,height:0});this.container.on("wheel",null).on(".drag",null).call(Y.setClipUrl,null);delete this._clipRect}if(this.hbar){this.hbar.on(".drag",null);this.hbar.remove();delete this.hbar;delete this._hbarXMin;delete this._hbarTranslateMax}if(this.vbar){this.vbar.on(".drag",null);this.vbar.remove();delete this.vbar;delete this._vbarYMin;delete this._vbarTranslateMax}};G.prototype._onBoxDrag=function e(){var t=this.translateX;var r=this.translateY;if(this.hbar){t-=V.event.dx}if(this.vbar){r-=V.event.dy}this.setTranslate(t,r)};G.prototype._onBoxWheel=function e(){var t=this.translateX;var r=this.translateY;if(this.hbar){t+=V.event.deltaY}if(this.vbar){r+=V.event.deltaY}this.setTranslate(t,r)};G.prototype._onBarDrag=function e(){var t=this.translateX;var r=this.translateY;if(this.hbar){var n=t+this._hbarXMin;var a=n+this._hbarTranslateMax;var i=h.constrain(V.event.x,n,a);var o=(i-n)/(a-n);var s=this.position.w-this._box.w;t=o*s}if(this.vbar){var l=r+this._vbarYMin;var c=l+this._vbarTranslateMax;var u=h.constrain(V.event.y,l,c);var f=(u-l)/(c-l);var d=this.position.h-this._box.h;r=f*d}this.setTranslate(t,r)};G.prototype.setTranslate=function e(t,r){var n=this.position.w-this._box.w;var a=this.position.h-this._box.h;t=h.constrain(t||0,0,n);r=h.constrain(r||0,0,a);this.translateX=t;this.translateY=r;this.container.call(Y.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-r);if(this._clipRect){this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+r-.5)})}if(this.hbar){var i=t/n;this.hbar.call(Y.setTranslate,t+i*this._hbarTranslateMax,r)}if(this.vbar){var o=r/a;this.vbar.call(Y.setTranslate,t,r+o*this._vbarTranslateMax)}}},{"../../lib":285,"../color":155,"../drawing":177,"@plotly/d3":20}],260:[function(e,t,r){"use strict";t.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],261:[function(e,t,r){"use strict";t.exports={axisRefDescription:function(e,t,r){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+r+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",r,"of the domain of the","second",e,"axis."].join(" ")}}},{}],262:[function(e,t,r){"use strict";t.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format#locale_format"}},{}],263:[function(e,t,r){"use strict";t.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],264:[function(e,t,r){"use strict";t.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],265:[function(e,t,r){"use strict";t.exports={BADNUM:undefined,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:""}},{}],266:[function(e,t,r){"use strict";r.xmlns="http://www.w3.org/2000/xmlns/";r.svg="http://www.w3.org/2000/svg";r.xlink="http://www.w3.org/1999/xlink";r.svgAttrs={xmlns:r.svg,"xmlns:xlink":r.xlink}},{}],267:[function(e,t,r){"use strict";r.version=e("./version").version;e("native-promise-only");e("../build/plotcss");var n=e("./registry");var a=r.register=n.register;var i=e("./plot_api");var o=Object.keys(i);for(var s=0;s<o.length;s++){var l=o[s];if(l.charAt(0)!=="_")r[l]=i[l];a({moduleType:"apiMethod",name:l,fn:i[l]})}a(e("./traces/scatter"));a([e("./components/legend"),e("./components/fx"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars"),e("./components/colorscale"),e("./components/colorbar"),e("./components/modebar")]);a([e("./locale-en"),e("./locale-en-us")]);if(window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)){a(window.PlotlyLocales);delete window.PlotlyLocales}r.Icons=e("./fonts/ploticon");var c=e("./components/fx");var u=e("./plots/plots");r.Plots={resize:u.resize,graphJson:u.graphJson,sendDataToCloud:u.sendDataToCloud};r.Fx={hover:c.hover,unhover:c.unhover,loneHover:c.loneHover,loneUnhover:c.loneUnhover};r.Snapshot=e("./snapshot");r.PlotSchema=e("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":146,"./components/annotations3d":151,"./components/colorbar":161,"./components/colorscale":167,"./components/errorbars":183,"./components/fx":195,"./components/grid":199,"./components/images":204,"./components/legend":212,"./components/modebar":218,"./components/rangeselector":226,"./components/rangeslider":233,"./components/shapes":247,"./components/sliders":252,"./components/updatemenus":258,"./fonts/ploticon":268,"./locale-en":311,"./locale-en-us":310,"./plot_api":315,"./plot_api/plot_schema":319,"./plots/plots":366,"./registry":373,"./snapshot":378,"./traces/scatter":506,"./version":546,"native-promise-only":70}],268:[function(e,t,r){"use strict";t.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],269:[function(e,t,r){"use strict";r.isLeftAnchor=function e(t){return t.xanchor==="left"||t.xanchor==="auto"&&t.x<=1/3};r.isCenterAnchor=function e(t){return t.xanchor==="center"||t.xanchor==="auto"&&t.x>1/3&&t.x<2/3};r.isRightAnchor=function e(t){return t.xanchor==="right"||t.xanchor==="auto"&&t.x>=2/3};r.isTopAnchor=function e(t){return t.yanchor==="top"||t.yanchor==="auto"&&t.y>=2/3};r.isMiddleAnchor=function e(t){return t.yanchor==="middle"||t.yanchor==="auto"&&t.y>1/3&&t.y<2/3};r.isBottomAnchor=function e(t){return t.yanchor==="bottom"||t.yanchor==="auto"&&t.y<=1/3}},{}],270:[function(e,t,r){"use strict";var n=e("./mod");var o=n.mod;var a=n.modHalf;var m=Math.PI;var _=2*m;function i(e){return e/180*m}function s(e){return e/m*180}function y(e){return Math.abs(e[1]-e[0])>_-1e-14}function l(e,t){return a(t-e,_)}function c(e,t){return Math.abs(l(e,t))}function u(e,t){if(y(t))return true;var r,n;if(t[0]<t[1]){r=t[0];n=t[1]}else{r=t[1];n=t[0]}r=o(r,_);n=o(n,_);if(r>n)n+=_;var a=o(e,_);var i=a+_;return a>=r&&a<=n||i>=r&&i<=n}function f(e,t,r,n){if(!u(t,n))return false;var a,i;if(r[0]<r[1]){a=r[0];i=r[1]}else{a=r[1];i=r[0]}return e>=a&&e<=i}function d(e,t,r,n,a,i,o){a=a||0;i=i||0;var s=y([r,n]);var l,c,u;var f,d;if(s){l=0;c=m;u=_}else{if(r<n){l=r;u=n}else{l=n;u=r}}if(e<t){f=e;d=t}else{f=t;d=e}function h(e,t){return[e*Math.cos(t)+a,i-e*Math.sin(t)]}var p=Math.abs(u-l)<=m?0:1;function v(e,t,r){return"A"+[e,e]+" "+[0,p,r]+" "+h(e,t)}var g;if(s){if(f===null){g="M"+h(d,l)+v(d,c,0)+v(d,u,0)+"Z"}else{g="M"+h(f,l)+v(f,c,0)+v(f,u,0)+"Z"+"M"+h(d,l)+v(d,c,1)+v(d,u,1)+"Z"}}else{if(f===null){g="M"+h(d,l)+v(d,u,0);if(o)g+="L0,0Z"}else{g="M"+h(f,l)+"L"+h(d,l)+v(d,u,0)+"L"+h(f,u)+v(f,l,1)+"Z"}}return g}function h(e,t,r,n,a){return d(null,e,t,r,n,a,0)}function p(e,t,r,n,a){return d(null,e,t,r,n,a,1)}function v(e,t,r,n,a,i){return d(e,t,r,n,a,i,1)}t.exports={deg2rad:i,rad2deg:s,angleDelta:l,angleDist:c,isFullCircle:y,isAngleInsideSector:u,isPtInsideSector:f,pathArc:h,pathSector:p,pathAnnulus:v}},{"./mod":292}],271:[function(e,t,r){"use strict";var f=Array.isArray;var n=ArrayBuffer;var a=DataView;function i(e){return n.isView(e)&&!(e instanceof a)}r.isTypedArray=i;function o(e){return f(e)||i(e)}r.isArrayOrTypedArray=o;function s(e){return!o(e[0])}r.isArray1D=s;r.ensureArray=function(e,t){if(!f(e))e=[];e.length=t;return e};r.concat=function(){var e=[];var t=true;var r=0;var n,a,i,o,s,l,c,u;for(i=0;i<arguments.length;i++){o=arguments[i];l=o.length;if(l){if(a)e.push(o);else{a=o;s=l}if(f(o)){n=false}else{t=false;if(!r){n=o.constructor}else if(n!==o.constructor){n=false}}r+=l}}if(!r)return[];if(!e.length)return a;if(t)return a.concat.apply(a,e);if(n){c=new n(r);c.set(a);for(i=0;i<e.length;i++){o=e[i];c.set(o,s);s+=o.length}return c}c=new Array(r);for(u=0;u<a.length;u++)c[u]=a[u];for(i=0;i<e.length;i++){o=e[i];for(u=0;u<o.length;u++)c[s+u]=o[u];s+=u}return c};r.maxRowLength=function(e){return l(e,Math.max,0)};r.minRowLength=function(e){return l(e,Math.min,Infinity)};function l(e,t,r){if(o(e)){if(o(e[0])){var n=r;for(var a=0;a<e.length;a++){n=t(n,e[a].length)}return n}else{return e.length}}return 0}},{}],272:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../constants/numerical").BADNUM;var i=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;t.exports=function e(t){if(typeof t==="string"){t=t.replace(i,"")}if(n(t))return Number(t);return a}},{"../constants/numerical":265,"fast-isnumeric":31}],273:[function(e,t,r){"use strict";t.exports=function e(t){var r=t._fullLayout;if(r._glcanvas&&r._glcanvas.size()){r._glcanvas.each(function(e){if(e.regl)e.regl.clear({color:true,depth:true})})}}},{}],274:[function(e,t,r){"use strict";t.exports=function e(t){if(t._responsiveChartHandler){window.removeEventListener("resize",t._responsiveChartHandler);delete t._responsiveChartHandler}}},{}],275:[function(e,t,_){"use strict";var a=e("fast-isnumeric");var i=e("tinycolor2");var l=e("../plots/attributes");var n=e("../components/colorscale/scales");var c=e("../components/color");var o=e("../constants/interactions").DESELECTDIM;var d=e("./nested_property");var s=e("./regex").counter;var u=e("./mod").modHalf;var h=e("./array").isArrayOrTypedArray;_.valObjectMeta={data_array:{coerceFunction:function(e,t,r){if(h(e))t.set(e);else if(r!==undefined)t.set(r)}},enumerated:{coerceFunction:function(e,t,r,n){if(n.coerceNumber)e=+e;if(n.values.indexOf(e)===-1)t.set(r);else t.set(e)},validateFunction:function(e,t){if(t.coerceNumber)e=+e;var r=t.values;for(var n=0;n<r.length;n++){var a=String(r[n]);if(a.charAt(0)==="/"&&a.charAt(a.length-1)==="/"){var i=new RegExp(a.substr(1,a.length-2));if(i.test(e))return true}else if(e===r[n])return true}return false}},boolean:{coerceFunction:function(e,t,r){if(e===true||e===false)t.set(e);else t.set(r)}},number:{coerceFunction:function(e,t,r,n){if(!a(e)||n.min!==undefined&&e<n.min||n.max!==undefined&&e>n.max){t.set(r)}else t.set(+e)}},integer:{coerceFunction:function(e,t,r,n){if(e%1||!a(e)||n.min!==undefined&&e<n.min||n.max!==undefined&&e>n.max){t.set(r)}else t.set(+e)}},string:{coerceFunction:function(e,t,r,n){if(typeof e!=="string"){var a=typeof e==="number";if(n.strict===true||!a)t.set(r);else t.set(String(e))}else if(n.noBlank&&!e)t.set(r);else t.set(e)}},color:{coerceFunction:function(e,t,r){if(i(e).isValid())t.set(e);else t.set(r)}},colorlist:{coerceFunction:function(e,t,r){function n(e){return i(e).isValid()}if(!Array.isArray(e)||!e.length)t.set(r);else if(e.every(n))t.set(e);else t.set(r)}},colorscale:{coerceFunction:function(e,t,r){t.set(n.get(e,r))}},angle:{coerceFunction:function(e,t,r){if(e==="auto")t.set("auto");else if(!a(e))t.set(r);else t.set(u(+e,360))}},subplotid:{coerceFunction:function(e,t,r,n){var a=n.regex||s(r);if(typeof e==="string"&&a.test(e)){t.set(e);return}t.set(r)},validateFunction:function(e,t){var r=t.dflt;if(e===r)return true;if(typeof e!=="string")return false;if(s(r).test(e))return true;return false}},flaglist:{coerceFunction:function(e,t,r,n){if(typeof e!=="string"){t.set(r);return}if((n.extras||[]).indexOf(e)!==-1){t.set(e);return}var a=e.split("+");var i=0;while(i<a.length){var o=a[i];if(n.flags.indexOf(o)===-1||a.indexOf(o)<i){a.splice(i,1)}else i++}if(!a.length)t.set(r);else t.set(a.join("+"))}},any:{coerceFunction:function(e,t,r){if(e===undefined)t.set(r);else t.set(e)}},info_array:{coerceFunction:function(e,t,r,n){function a(e,t,r){var n;var a={set:function(e){n=e}};if(r===undefined)r=t.dflt;_.valObjectMeta[t.valType].coerceFunction(e,a,r,t);return n}var i=n.dimensions===2||n.dimensions==="1-2"&&Array.isArray(e)&&Array.isArray(e[0]);if(!Array.isArray(e)){t.set(r);return}var o=n.items;var s=[];var l=Array.isArray(o);var c=l&&i&&Array.isArray(o[0]);var u=i&&l&&!c;var f=l&&!u?o.length:e.length;var d,h,p,v,g,m;r=Array.isArray(r)?r:[];if(i){for(d=0;d<f;d++){s[d]=[];p=Array.isArray(e[d])?e[d]:[];if(u)g=o.length;else if(l)g=o[d].length;else g=p.length;for(h=0;h<g;h++){if(u)v=o[h];else if(l)v=o[d][h];else v=o;m=a(p[h],v,(r[d]||[])[h]);if(m!==undefined)s[d][h]=m}}}else{for(d=0;d<f;d++){m=a(e[d],l?o[d]:o,r[d]);if(m!==undefined)s[d]=m}}t.set(s)},validateFunction:function(e,t){if(!Array.isArray(e))return false;var r=t.items;var n=Array.isArray(r);var a=t.dimensions===2;if(!t.freeLength&&e.length!==r.length)return false;for(var i=0;i<e.length;i++){if(a){if(!Array.isArray(e[i])||!t.freeLength&&e[i].length!==r[i].length){return false}for(var o=0;o<e[i].length;o++){if(!p(e[i][o],n?r[i][o]:r)){return false}}}else if(!p(e[i],n?r[i]:r))return false}return true}}};_.coerce=function(e,t,r,n,a){var i=d(r,n).get();var o=d(e,n);var s=d(t,n);var l=o.get();var c=t._template;if(l===undefined&&c){l=d(c,n).get();c=0}if(a===undefined)a=i.dflt;if(i.arrayOk&&h(l)){s.set(l);return l}var u=_.valObjectMeta[i.valType].coerceFunction;u(l,s,a,i);var f=s.get();if(c&&f===a&&!p(l,i)){l=d(c,n).get();u(l,s,a,i);f=s.get()}return f};_.coerce2=function(e,t,r,n,a){var i=d(e,n);var o=_.coerce(e,t,r,n,a);var s=i.get();return s!==undefined&&s!==null?o:false};_.coerceFont=function(e,t,r){var n={};r=r||{};n.family=e(t+".family",r.family);n.size=e(t+".size",r.size);n.color=e(t+".color",r.color);return n};_.coercePattern=function(e,t,r,n){var a=e(t+".shape");if(a){e(t+".solidity");e(t+".size");var i=e(t+".fillmode");var o=i==="overlay";if(!n){var s=e(t+".bgcolor",o?r:undefined);e(t+".fgcolor",o?c.contrast(s):r)}e(t+".fgopacity",o?.5:1)}};_.coerceHoverinfo=function(e,t,r){var n=t._module.attributes;var a=n.hoverinfo?n:l;var i=a.hoverinfo;var o;if(r._dataLength===1){var s=i.dflt==="all"?i.flags.slice():i.dflt.split("+");s.splice(s.indexOf("name"),1);o=s.join("+")}return _.coerce(e,t,a,"hoverinfo",o)};_.coerceSelectionMarkerOpacity=function(e,t){if(!e.marker)return;var r=e.marker.opacity;if(r===undefined)return;var n;var a;if(!h(r)&&!e.selected&&!e.unselected){n=r;a=o*r}t("selected.marker.opacity",n);t("unselected.marker.opacity",a)};function p(e,t){var r=_.valObjectMeta[t.valType];if(t.arrayOk&&h(e))return true;if(r.validateFunction){return r.validateFunction(e,t)}var n={};var a=n;var i={set:function(e){a=e}};r.coerceFunction(e,i,n,t);return a!==n}_.validate=p},{"../components/color":155,"../components/colorscale/scales":170,"../constants/interactions":264,"../plots/attributes":327,"./array":271,"./mod":292,"./nested_property":293,"./regex":301,"fast-isnumeric":31,tinycolor2:119}],276:[function(e,t,y){"use strict";var l=e("d3-time-format").timeFormat;var f=e("fast-isnumeric");var c=e("./loggers");var b=e("./mod").mod;var r=e("../constants/numerical");var x=r.BADNUM;var w=r.ONEDAY;var A=r.ONEHOUR;var T=r.ONEMIN;var k=r.ONESEC;var M=r.EPOCHJD;var S=e("../registry");var h=e("d3-time-format").utcFormat;var C=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m;var L=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m;var E=(new Date).getFullYear()-70;function D(e){return e&&S.componentsRegistry.calendars&&typeof e==="string"&&e!=="gregorian"}y.dateTick0=function(e,t){var r=a(e,!!t);if(t<2)return r;var n=y.dateTime2ms(r,e);n+=w*(t-1);return y.ms2DateTime(n,0,e)};function a(e,t){if(D(e)){return t?S.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:S.getComponentMethod("calendars","CANONICAL_TICK")[e]}else{return t?"2000-01-02":"2000-01-01"}}y.dfltRange=function(e){if(D(e)){return S.getComponentMethod("calendars","DFLTRANGE")[e]}else{return["2000-01-01","2001-01-01"]}};y.isJSDate=function(e){return typeof e==="object"&&e!==null&&typeof e.getTime==="function"};var O,P;y.dateTime2ms=function(e,t){if(y.isJSDate(e)){var r=e.getTimezoneOffset()*T;var n=(e.getUTCMinutes()-e.getMinutes())*T+(e.getUTCSeconds()-e.getSeconds())*k+(e.getUTCMilliseconds()-e.getMilliseconds());if(n){var a=3*T;r=r-a/2+b(n-r+a/2,a)}e=Number(e)-r;if(e>=O&&e<=P)return e;return x}if(typeof e!=="string"&&typeof e!=="number")return x;e=String(e);var i=D(t);var o=e.charAt(0);if(i&&(o==="G"||o==="g")){e=e.substr(1);t=""}var s=i&&t.substr(0,7)==="chinese";var l=e.match(s?L:C);if(!l)return x;var c=l[1];var u=l[3]||"1";var f=Number(l[5]||1);var d=Number(l[7]||0);var h=Number(l[9]||0);var p=Number(l[11]||0);if(i){if(c.length===2)return x;c=Number(c);var v;try{var g=S.getComponentMethod("calendars","getCal")(t);if(s){var m=u.charAt(u.length-1)==="i";u=parseInt(u,10);v=g.newDate(c,g.toMonthIndex(c,u,m),f)}else{v=g.newDate(c,Number(u),f)}}catch(e){return x}if(!v)return x;return(v.toJD()-M)*w+d*A+h*T+p*k}if(c.length===2){c=(Number(c)+2e3-E)%100+E}else c=Number(c);u-=1;var _=new Date(Date.UTC(2e3,u,f,d,h));_.setUTCFullYear(c);if(_.getUTCMonth()!==u)return x;if(_.getUTCDate()!==f)return x;return _.getTime()+p*k};O=y.MIN_MS=y.dateTime2ms("-9999");P=y.MAX_MS=y.dateTime2ms("9999-12-31 23:59:59.9999");y.isDateTime=function(e,t){return y.dateTime2ms(e,t)!==x};function o(e,t){return String(e+Math.pow(10,t)).substr(1)}var p=90*w;var v=3*A;var g=5*T;y.ms2DateTime=function(e,t,r){if(typeof e!=="number"||!(e>=O&&e<=P))return x;if(!t)t=0;var n=Math.floor(b(e+.05,1)*10);var a=Math.round(e-n/10);var i,o,s,l,c,u;if(D(r)){var f=Math.floor(a/w)+M;var d=Math.floor(b(e,w));try{i=S.getComponentMethod("calendars","getCal")(r).fromJD(f).formatDate("yyyy-mm-dd")}catch(e){i=h("G%Y-%m-%d")(new Date(a))}if(i.charAt(0)==="-"){while(i.length<11)i="-0"+i.substr(1)}else{while(i.length<10)i="0"+i}o=t<p?Math.floor(d/A):0;s=t<p?Math.floor(d%A/T):0;l=t<v?Math.floor(d%T/k):0;c=t<g?d%k*10+n:0}else{u=new Date(a);i=h("%Y-%m-%d")(u);o=t<p?u.getUTCHours():0;s=t<p?u.getUTCMinutes():0;l=t<v?u.getUTCSeconds():0;c=t<g?u.getUTCMilliseconds()*10+n:0}return m(i,o,s,l,c)};y.ms2DateTimeLocal=function(e){if(!(e>=O+w&&e<=P-w))return x;var t=Math.floor(b(e+.05,1)*10);var r=new Date(Math.round(e-t/10));var n=l("%Y-%m-%d")(r);var a=r.getHours();var i=r.getMinutes();var o=r.getSeconds();var s=r.getUTCMilliseconds()*10+t;return m(n,a,i,o,s)};function m(e,t,r,n,a){if(t||r||n||a){e+=" "+o(t,2)+":"+o(r,2);if(n||a){e+=":"+o(n,2);if(a){var i=4;while(a%10===0){i-=1;a/=10}e+="."+o(a,i)}}}return e}y.cleanDate=function(e,t,r){if(e===x)return t;if(y.isJSDate(e)||typeof e==="number"&&isFinite(e)){if(D(r)){c.error("JS Dates and milliseconds are incompatible with world calendars",e);return t}e=y.ms2DateTimeLocal(+e);if(!e&&t!==undefined)return t}else if(!y.isDateTime(e,r)){c.error("unrecognized date",e);return t}return e};var i=/%\d?f/g;var s=/%h/g;var u={1:"1",2:"1",3:"2",4:"2"};function d(e,n,t,r){e=e.replace(i,function(e){var t=Math.min(+e.charAt(1)||6,6);var r=(n/1e3%1+2).toFixed(t).substr(2).replace(/0+$/,"")||"0";return r});var a=new Date(Math.floor(n+.05));e=e.replace(s,function(){return u[t("%q")(a)]});if(D(r)){try{e=S.getComponentMethod("calendars","worldCalFmt")(e,n,r)}catch(e){return"Invalid"}}return t(e)(a)}var _=[59,59.9,59.99,59.999,59.9999];function I(e,t){var r=b(e+.05,w);var n=o(Math.floor(r/A),2)+":"+o(b(Math.floor(r/T),60),2);if(t!=="M"){if(!f(t))t=0;var a=Math.min(b(e/k,60),_[t]);var i=(100+a).toFixed(t).substr(1);if(t>0){i=i.replace(/0+$/,"").replace(/[\.]$/,"")}n+=":"+i}return n}y.formatDate=function(e,t,r,n,a,i){a=D(a)&&a;if(!t){if(r==="y")t=i.year;else if(r==="m")t=i.month;else if(r==="d"){t=i.dayMonth+"\n"+i.year}else{return I(e,r)+"\n"+d(i.dayMonthYear,e,n,a)}}return d(t,e,n,a)};var R=3*w;y.incrementMonth=function(t,e,r){r=D(r)&&r;var n=b(t,w);t=Math.round(t-n);if(r){try{var a=Math.round(t/w)+M;var i=S.getComponentMethod("calendars","getCal")(r);var o=i.fromJD(a);if(e%12)i.add(o,e,"m");else i.add(o,e/12,"y");return(o.toJD()-M)*w+n}catch(e){c.error("invalid ms "+t+" in calendar "+r)}}var s=new Date(t+R);return s.setUTCMonth(s.getUTCMonth()+e)+n-R};y.findExactDates=function(e,t){var r=0;var n=0;var a=0;var i=0;var o;var s;var l=D(t)&&S.getComponentMethod("calendars","getCal")(t);for(var c=0;c<e.length;c++){s=e[c];if(!f(s)){i++;continue}if(s%w)continue;if(l){try{o=l.fromJD(s/w+M);if(o.day()===1){if(o.month()===1)r++;else n++}else a++}catch(e){}}else{o=new Date(s);if(o.getUTCDate()===1){if(o.getUTCMonth()===0)r++;else n++}else a++}}n+=r;a+=n;var u=e.length-i;return{exactYears:r/u,exactMonths:n/u,exactDays:a/u}}},{"../constants/numerical":265,"../registry":373,"./loggers":289,"./mod":292,"d3-time-format":29,"fast-isnumeric":31}],277:[function(e,t,r){"use strict";var n=e("@plotly/d3");var o=e("./loggers");var a=e("./matrix");var i=e("gl-mat4");function s(e){var t;if(typeof e==="string"){t=document.getElementById(e);if(t===null){throw new Error("No DOM element with id '"+e+"' exists on the page.")}return t}else if(e===null||e===undefined){throw new Error("DOM element provided is null or undefined")}return e}function l(e){var t=n.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")}function c(e){var t=e&&e.parentNode;if(t)t.removeChild(e)}function u(e,t){f("global",e,t)}function f(e,t,r){var n="plotly.js-style-"+e;var a=document.getElementById(n);if(!a){a=document.createElement("style");a.setAttribute("id",n);a.appendChild(document.createTextNode(""));document.head.appendChild(a)}var i=a.sheet;if(i.insertRule){i.insertRule(t+"{"+r+"}",0)}else if(i.addRule){i.addRule(t,r,0)}else o.warn("addStyleRule failed")}function d(e){var t="plotly.js-style-"+e;var r=document.getElementById(t);if(r)c(r)}function h(e){var t=v(e);var n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];t.forEach(function(e){var t=p(e);if(t){var r=a.convertCssMatrix(t);n=i.multiply(n,n,r)}});return n}function p(e){var t=window.getComputedStyle(e,null);var r=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");if(r==="none")return null;return r.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(e){return+e})}function v(e){var t=[];while(g(e)){t.push(e);e=e.parentNode}return t}function g(e){return e&&(e instanceof Element||e instanceof HTMLElement)}function m(e,t){return e&&t&&e.x===t.x&&e.y===t.y&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}t.exports={getGraphDiv:s,isPlotDiv:l,removeElement:c,addStyleRule:u,addRelatedStyleRule:f,deleteRelatedStyleRule:d,getFullTransformMatrix:h,getElementTransformMatrix:p,getElementAndAncestors:v,equalDomRects:m}},{"./loggers":289,"./matrix":291,"@plotly/d3":20,"gl-mat4":47}],278:[function(e,t,r){"use strict";var i=e("events").EventEmitter;var n={init:function(r){if(r._ev instanceof i)return r;var n=new i;var a=new i;r._ev=n;r._internalEv=a;r.on=n.on.bind(n);r.once=n.once.bind(n);r.removeListener=n.removeListener.bind(n);r.removeAllListeners=n.removeAllListeners.bind(n);r._internalOn=a.on.bind(a);r._internalOnce=a.once.bind(a);r._removeInternalListener=a.removeListener.bind(a);r._removeAllInternalListeners=a.removeAllListeners.bind(a);r.emit=function(e,t){if(typeof jQuery!=="undefined"){jQuery(r).trigger(e,t)}n.emit(e,t);a.emit(e,t)};return r},triggerHandler:function(e,t,r){var n;var a;if(typeof jQuery!=="undefined"){n=jQuery(e).triggerHandler(t,r)}var i=e._ev;if(!i)return n;var o=i._events[t];if(!o)return n;function s(e){if(e.listener){i.removeListener(t,e.listener);if(!e.fired){e.fired=true;return e.listener.apply(i,[r])}}else{return e.apply(i,[r])}}o=Array.isArray(o)?o:[o];var l;for(l=0;l<o.length-1;l++){s(o[l])}a=s(o[l]);return n!==undefined?n:a},purge:function(e){delete e._ev;delete e.on;delete e.once;delete e.removeListener;delete e.removeAllListeners;delete e.emit;delete e._ev;delete e._internalEv;delete e._internalOn;delete e._internalOnce;delete e._removeInternalListener;delete e._removeAllInternalListeners;return e}};t.exports=n},{events:27}],279:[function(e,t,r){"use strict";var p=e("./is_plain_object.js");var v=Array.isArray;function g(e,t){var r,n;for(r=0;r<e.length;r++){n=e[r];if(n!==null&&typeof n==="object"){return false}if(n!==void 0){t[r]=n}}return true}r.extendFlat=function(){return m(arguments,false,false,false)};r.extendDeep=function(){return m(arguments,true,false,false)};r.extendDeepAll=function(){return m(arguments,true,true,false)};r.extendDeepNoArrays=function(){return m(arguments,true,false,true)};function m(e,t,r,n){var a=e[0];var i=e.length;var o,s,l,c,u,f,d;if(i===2&&v(a)&&v(e[1])&&a.length===0){d=g(e[1],a);if(d){return a}else{a.splice(0,a.length)}}for(var h=1;h<i;h++){o=e[h];for(s in o){l=a[s];c=o[s];if(n&&v(c)){a[s]=c}else if(t&&c&&(p(c)||(u=v(c)))){if(u){u=false;f=l&&v(l)?l:[]}else{f=l&&p(l)?l:{}}a[s]=m([f,c],t,r,n)}else if(typeof c!=="undefined"||r){a[s]=c}}}return a}},{"./is_plain_object.js":286}],280:[function(e,t,r){"use strict";t.exports=function e(t){var r={};var n=[];var a=0;for(var i=0;i<t.length;i++){var o=t[i];if(r[o]!==1){r[o]=1;n[a++]=o}}return n}},{}],281:[function(e,t,r){"use strict";t.exports=function e(t){var r=l(t)?s:o;var n=[];for(var a=0;a<t.length;a++){var i=t[a];if(r(i))n.push(i)}return n};function o(e){return e.visible===true}function s(e){var t=e[0].trace;return t.visible===true&&t._length!==0}function l(e){return Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace}},{}],282:[function(e,t,r){"use strict";var d=e("./mod").mod;r.segmentsIntersect=g;function g(e,t,r,n,a,i,o,s){var l=r-e;var c=a-e;var u=o-a;var f=n-t;var d=i-t;var h=s-i;var p=l*h-u*f;if(p===0)return null;var v=(c*h-u*d)/p;var g=(c*f-l*d)/p;if(g<0||g>1||v<0||v>1)return null;return{x:e+l*v,y:t+f*v}}r.segmentDistance=function e(t,r,n,a,i,o,s,l){if(g(t,r,n,a,i,o,s,l))return 0;var c=n-t;var u=a-r;var f=s-i;var d=l-o;var h=c*c+u*u;var p=f*f+d*d;var v=Math.min(m(c,u,h,i-t,o-r),m(c,u,h,s-t,l-r),m(f,d,p,t-i,r-o),m(f,d,p,n-i,a-o));return Math.sqrt(v)};function m(e,t,r,n,a){var i=n*e+a*t;if(i<0){return n*n+a*a}else if(i>r){var o=n-e;var s=a-t;return o*o+s*s}else{var l=n*t-a*e;return l*l/r}}var h,p,v;r.getTextLocation=function e(t,r,n,a){if(t!==p||a!==v){h={};p=t;v=a}if(h[n]){return h[n]}var i=t.getPointAtLength(d(n-a/2,r));var o=t.getPointAtLength(d(n+a/2,r));var s=Math.atan((o.y-i.y)/(o.x-i.x));var l=t.getPointAtLength(d(n,r));var c=(l.x*4+i.x+o.x)/6;var u=(l.y*4+i.y+o.y)/6;var f={x:c,y:u,theta:s};h[n]=f;return f};r.clearLocationCache=function(){p=null};r.getVisibleSegment=function e(a,t,r){var i=t.left;var o=t.right;var s=t.top;var l=t.bottom;var n=0;var c=a.getTotalLength();var u=c;var f,d;function h(e){var t=a.getPointAtLength(e);if(e===0)f=t;else if(e===c)d=t;var r=t.x<i?i-t.x:t.x>o?t.x-o:0;var n=t.y<s?s-t.y:t.y>l?t.y-l:0;return Math.sqrt(r*r+n*n)}var p=h(n);while(p){n+=p+r;if(n>u)return;p=h(n)}p=h(u);while(p){u-=p+r;if(n>u)return;p=h(u)}return{min:n,max:u,len:u-n,total:c,isClosed:n===0&&u===c&&Math.abs(f.x-d.x)<.1&&Math.abs(f.y-d.y)<.1}};r.findPointOnPath=function e(t,r,n,a){a=a||{};var i=a.pathLength||t.getTotalLength();var o=a.tolerance||.001;var s=a.iterationLimit||30;var l=t.getPointAtLength(0)[n]>t.getPointAtLength(i)[n]?-1:1;var c=0;var u=0;var f=i;var d;var h;var p;while(c<s){d=(u+f)/2;h=t.getPointAtLength(d);p=h[n]-r;if(Math.abs(p)<o){return h}else{if(l*p>0){f=d}else{u=d}c++}}return h}},{"./mod":292}],283:[function(e,t,r){"use strict";t.exports=function e(t){return t}},{}],284:[function(e,t,r){"use strict";t.exports=function e(t,r){if(!r)return t;var n=1/Math.abs(r);var a=n>1?(n*t+n*r)/n:t+r;var i=String(a).length;if(i>16){var o=String(r).length;var s=String(t).length;if(i>=s+o){var l=parseFloat(a).toPrecision(12);if(l.indexOf("e+")===-1)a=+l}}return a}},{}],285:[function(e,t,r){"use strict";var b=e("@plotly/d3");var x=e("d3-time-format").utcFormat;var n=e("fast-isnumeric");var a=e("../constants/numerical");var i=a.FP_SAFE;var o=-i;var s=a.BADNUM;var w=t.exports={};w.nestedProperty=e("./nested_property");w.keyedContainer=e("./keyed_container");w.relativeAttr=e("./relative_attr");w.isPlainObject=e("./is_plain_object");w.toLogRange=e("./to_log_range");w.relinkPrivateKeys=e("./relink_private");var l=e("./array");w.isTypedArray=l.isTypedArray;w.isArrayOrTypedArray=l.isArrayOrTypedArray;w.isArray1D=l.isArray1D;w.ensureArray=l.ensureArray;w.concat=l.concat;w.maxRowLength=l.maxRowLength;w.minRowLength=l.minRowLength;var c=e("./mod");w.mod=c.mod;w.modHalf=c.modHalf;var u=e("./coerce");w.valObjectMeta=u.valObjectMeta;w.coerce=u.coerce;w.coerce2=u.coerce2;w.coerceFont=u.coerceFont;w.coercePattern=u.coercePattern;w.coerceHoverinfo=u.coerceHoverinfo;w.coerceSelectionMarkerOpacity=u.coerceSelectionMarkerOpacity;w.validate=u.validate;var f=e("./dates");w.dateTime2ms=f.dateTime2ms;w.isDateTime=f.isDateTime;w.ms2DateTime=f.ms2DateTime;w.ms2DateTimeLocal=f.ms2DateTimeLocal;w.cleanDate=f.cleanDate;w.isJSDate=f.isJSDate;w.formatDate=f.formatDate;w.incrementMonth=f.incrementMonth;w.dateTick0=f.dateTick0;w.dfltRange=f.dfltRange;w.findExactDates=f.findExactDates;w.MIN_MS=f.MIN_MS;w.MAX_MS=f.MAX_MS;var d=e("./search");w.findBin=d.findBin;w.sorterAsc=d.sorterAsc;w.sorterDes=d.sorterDes;w.distinctVals=d.distinctVals;w.roundUp=d.roundUp;w.sort=d.sort;w.findIndexOfMin=d.findIndexOfMin;var h=e("./stats");w.aggNums=h.aggNums;w.len=h.len;w.mean=h.mean;w.median=h.median;w.midRange=h.midRange;w.variance=h.variance;w.stdev=h.stdev;w.interp=h.interp;var p=e("./matrix");w.init2dArray=p.init2dArray;w.transposeRagged=p.transposeRagged;w.dot=p.dot;w.translationMatrix=p.translationMatrix;w.rotationMatrix=p.rotationMatrix;w.rotationXYMatrix=p.rotationXYMatrix;w.apply3DTransform=p.apply3DTransform;w.apply2DTransform=p.apply2DTransform;w.apply2DTransform2=p.apply2DTransform2;w.convertCssMatrix=p.convertCssMatrix;w.inverseTransformMatrix=p.inverseTransformMatrix;var v=e("./angles");w.deg2rad=v.deg2rad;w.rad2deg=v.rad2deg;w.angleDelta=v.angleDelta;w.angleDist=v.angleDist;w.isFullCircle=v.isFullCircle;w.isAngleInsideSector=v.isAngleInsideSector;w.isPtInsideSector=v.isPtInsideSector;w.pathArc=v.pathArc;w.pathSector=v.pathSector;w.pathAnnulus=v.pathAnnulus;var g=e("./anchor_utils");w.isLeftAnchor=g.isLeftAnchor;w.isCenterAnchor=g.isCenterAnchor;w.isRightAnchor=g.isRightAnchor;w.isTopAnchor=g.isTopAnchor;w.isMiddleAnchor=g.isMiddleAnchor;w.isBottomAnchor=g.isBottomAnchor;var m=e("./geometry2d");w.segmentsIntersect=m.segmentsIntersect;w.segmentDistance=m.segmentDistance;w.getTextLocation=m.getTextLocation;w.clearLocationCache=m.clearLocationCache;w.getVisibleSegment=m.getVisibleSegment;w.findPointOnPath=m.findPointOnPath;var _=e("./extend");w.extendFlat=_.extendFlat;w.extendDeep=_.extendDeep;w.extendDeepAll=_.extendDeepAll;w.extendDeepNoArrays=_.extendDeepNoArrays;var y=e("./loggers");w.log=y.log;w.warn=y.warn;w.error=y.error;var A=e("./regex");w.counterRegex=A.counter;var T=e("./throttle");w.throttle=T.throttle;w.throttleDone=T.done;w.clearThrottle=T.clear;var k=e("./dom");w.getGraphDiv=k.getGraphDiv;w.isPlotDiv=k.isPlotDiv;w.removeElement=k.removeElement;w.addStyleRule=k.addStyleRule;w.addRelatedStyleRule=k.addRelatedStyleRule;w.deleteRelatedStyleRule=k.deleteRelatedStyleRule;w.getFullTransformMatrix=k.getFullTransformMatrix;w.getElementTransformMatrix=k.getElementTransformMatrix;w.getElementAndAncestors=k.getElementAndAncestors;w.equalDomRects=k.equalDomRects;w.clearResponsive=e("./clear_responsive");w.preserveDrawingBuffer=e("./preserve_drawing_buffer");w.makeTraceGroups=e("./make_trace_groups");w._=e("./localize");w.notifier=e("./notifier");w.filterUnique=e("./filter_unique");w.filterVisible=e("./filter_visible");w.pushUnique=e("./push_unique");w.increment=e("./increment");w.cleanNumber=e("./clean_number");w.ensureNumber=function e(t){if(!n(t))return s;t=Number(t);return t>i||t<o?s:t};w.isIndex=function(e,t){if(t!==undefined&&e>=t)return false;return n(e)&&e>=0&&e%1===0};w.noop=e("./noop");w.identity=e("./identity");w.repeat=function(e,t){var r=new Array(t);for(var n=0;n<t;n++){r[n]=e}return r};w.swapAttrs=function(e,t,r,n){if(!r)r="x";if(!n)n="y";for(var a=0;a<t.length;a++){var i=t[a];var o=w.nestedProperty(e,i.replace("?",r));var s=w.nestedProperty(e,i.replace("?",n));var l=o.get();o.set(s.get());s.set(l)}};w.raiseToTop=function e(t){t.parentNode.appendChild(t)};w.cancelTransition=function(e){return e.transition().duration(0)};w.constrain=function(e,t,r){if(t>r)return Math.max(r,Math.min(t,e));return Math.max(t,Math.min(r,e))};w.bBoxIntersect=function(e,t,r){r=r||0;return e.left<=t.right+r&&t.left<=e.right+r&&e.top<=t.bottom+r&&t.top<=e.bottom+r};w.simpleMap=function(e,t,r,n,a){var i=e.length;var o=new Array(i);for(var s=0;s<i;s++)o[s]=t(e[s],r,n,a);return o};w.randstr=function e(t,r,n,a){if(!n)n=16;if(r===undefined)r=24;if(r<=0)return"0";var i=Math.log(Math.pow(2,r))/Math.log(n);var o="";var s,l,c;for(s=2;i===Infinity;s*=2){i=Math.log(Math.pow(2,r/s))/Math.log(n)*s}var u=i-Math.floor(i);for(s=0;s<Math.floor(i);s++){c=Math.floor(Math.random()*n).toString(n);o=c+o}if(u){l=Math.pow(n,u);c=Math.floor(Math.random()*l).toString(n);o=c+o}var f=parseInt(o,n);if(t&&t[o]||f!==Infinity&&f>=Math.pow(2,r)){if(a>10){w.warn("randstr failed uniqueness");return o}return e(t,r,n,(a||0)+1)}else return o};w.OptionControl=function(t,r){if(!t)t={};if(!r)r="opt";var n={};n.optionList=[];n._newoption=function(e){e[r]=t;n[e.name]=e;n.optionList.push(e)};n["_"+r]=t;return n};w.smooth=function(e,t){t=Math.round(t)||0;if(t<2)return e;var r=e.length;var n=2*r;var a=2*t-1;var i=new Array(a);var o=new Array(r);var s;var l;var c;var u;for(s=0;s<a;s++){i[s]=(1-Math.cos(Math.PI*(s+1)/t))/(2*t)}for(s=0;s<r;s++){u=0;for(l=0;l<a;l++){c=s+l+1-t;if(c<-r)c-=n*Math.round(c/n);else if(c>=n)c-=n*Math.floor(c/n);if(c<0)c=-1-c;else if(c>=r)c=n-1-c;u+=e[c]*i[l]}o[s]=u}return o};w.syncOrAsync=function(e,t,r){var n,a;function i(){return w.syncOrAsync(e,t,r)}while(e.length){a=e.splice(0,1)[0];n=a(t);if(n&&n.then){return n.then(i).then(undefined,w.promiseError)}}return r&&r(t)};w.stripTrailingSlash=function(e){if(e.substr(-1)==="/")return e.substr(0,e.length-1);return e};w.noneOrAll=function(e,t,r){if(!e)return;var n=false;var a=true;var i;var o;for(i=0;i<r.length;i++){o=e[r[i]];if(o!==undefined&&o!==null)n=true;else a=false}if(n&&!a){for(i=0;i<r.length;i++){e[r[i]]=t[r[i]]}}};w.mergeArray=function(e,t,r,n){var a=typeof n==="function";if(w.isArrayOrTypedArray(e)){var i=Math.min(e.length,t.length);for(var o=0;o<i;o++){var s=e[o];t[o][r]=a?n(s):s}}};w.mergeArrayCastPositive=function(e,t,r){return w.mergeArray(e,t,r,function(e){var t=+e;return!isFinite(t)?0:t>0?t:0})};w.fillArray=function(e,t,r,n){n=n||w.identity;if(w.isArrayOrTypedArray(e)){for(var a=0;a<t.length;a++){t[a][r]=n(e[a])}}};w.castOption=function(e,t,r,n){n=n||w.identity;var a=w.nestedProperty(e,r).get();if(w.isArrayOrTypedArray(a)){if(Array.isArray(t)&&w.isArrayOrTypedArray(a[t[0]])){return n(a[t[0]][t[1]])}else{return n(a[t])}}else{return a}};w.extractOption=function(e,t,r,n){if(r in e)return e[r];var a=w.nestedProperty(t,n).get();if(!Array.isArray(a))return a};function M(e){var t={};for(var r in e){var n=e[r];for(var a=0;a<n.length;a++){t[n[a]]=+r}}return t}w.tagSelected=function(t,e,r){var n=e.selectedpoints;var a=e._indexToPoints;var i;if(a){i=M(a)}function o(e){return e!==undefined&&e<t.length}for(var s=0;s<n.length;s++){var l=n[s];if(w.isIndex(l)||w.isArrayOrTypedArray(l)&&w.isIndex(l[0])&&w.isIndex(l[1])){var c=i?i[l]:l;var u=r?r[c]:c;if(o(u)){t[u].selected=1}}}};w.selIndices2selPoints=function(e){var t=e.selectedpoints;var r=e._indexToPoints;if(r){var n=M(r);var a=[];for(var i=0;i<t.length;i++){var o=t[i];if(w.isIndex(o)){var s=n[o];if(w.isIndex(s)){a.push(s)}}}return a}else{return t}};w.getTargetArray=function(e,t){var r=t.target;if(typeof r==="string"&&r){var n=w.nestedProperty(e,r).get();return Array.isArray(n)?n:false}else if(Array.isArray(r)){return r}return false};w.minExtend=function(e,t){var r={};if(typeof t!=="object")t={};var n=3;var a=Object.keys(e);var i,o,s;for(i=0;i<a.length;i++){o=a[i];s=e[o];if(o.charAt(0)==="_"||typeof s==="function")continue;else if(o==="module")r[o]=s;else if(Array.isArray(s)){if(o==="colorscale"){r[o]=s.slice()}else{r[o]=s.slice(0,n)}}else if(w.isTypedArray(s)){r[o]=s.subarray(0,n)}else if(s&&typeof s==="object")r[o]=w.minExtend(e[o],t[o]);else r[o]=s}a=Object.keys(t);for(i=0;i<a.length;i++){o=a[i];s=t[o];if(typeof s!=="object"||!(o in r)||typeof r[o]!=="object"){r[o]=s}}return r};w.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)};w.containsAny=function(e,t){for(var r=0;r<t.length;r++){if(e.indexOf(t[r])!==-1)return true}return false};w.isIE=function(){return typeof window.navigator.msSaveBlob!=="undefined"};var S=/Version\/[\d\.]+.*Safari/;w.isSafari=function(){return S.test(window.navigator.userAgent)};var C=/iPad|iPhone|iPod/;w.isIOS=function(){return C.test(window.navigator.userAgent)};var L=/Firefox\/(\d+)\.\d+/;w.getFirefoxVersion=function(){var e=L.exec(window.navigator.userAgent);if(e&&e.length===2){var t=parseInt(e[1]);if(!isNaN(t)){return t}}return null};w.isD3Selection=function(e){return e instanceof b.selection};w.ensureSingle=function(e,t,r,n){var a=e.select(t+(r?"."+r:""));if(a.size())return a;var i=e.append(t);if(r)i.classed(r,true);if(n)i.call(n);return i};w.ensureSingleById=function(e,t,r,n){var a=e.select(t+"#"+r);if(a.size())return a;var i=e.append(t).attr("id",r);if(n)i.call(n);return i};w.objectFromPath=function(e,t){var r=e.split(".");var n;var a=n={};for(var i=0;i<r.length;i++){var o=r[i];var s=null;var l=r[i].match(/(.*)\[([0-9]+)\]/);if(l){o=l[1];s=l[2];n=n[o]=[];if(i===r.length-1){n[s]=t}else{n[s]={}}n=n[s]}else{if(i===r.length-1){n[o]=t}else{n[o]={}}n=n[o]}}return a};var E=/^([^\[\.]+)\.(.+)?/;var D=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;w.expandObjectPaths=function(e){var t,r,n,a,i,o,s;if(typeof e==="object"&&!Array.isArray(e)){for(r in e){if(e.hasOwnProperty(r)){if(t=r.match(E)){a=e[r];n=t[1];delete e[r];e[n]=w.extendDeepNoArrays(e[n]||{},w.objectFromPath(r,w.expandObjectPaths(a))[n])}else if(t=r.match(D)){a=e[r];n=t[1];i=parseInt(t[2]);delete e[r];e[n]=e[n]||[];if(t[3]==="."){s=t[4];o=e[n][i]=e[n][i]||{};w.extendDeepNoArrays(o,w.objectFromPath(s,w.expandObjectPaths(a)))}else{e[n][i]=w.expandObjectPaths(a)}}else{e[r]=w.expandObjectPaths(e[r])}}}}return e};w.numSeparate=function(e,t,r){if(!r)r=false;if(typeof t!=="string"||t.length===0){throw new Error("Separator string required for formatting!")}if(typeof e==="number"){e=String(e)}var n=/(\d+)(\d{3})/;var a=t.charAt(0);var i=t.charAt(1);var o=e.split(".");var s=o[0];var l=o.length>1?a+o[1]:"";if(i&&(o.length>1||s.length>4||r)){while(n.test(s)){s=s.replace(n,"$1"+i+"$2")}}return s+l};w.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var O=/^\w*$/;w.templateString=function(e,n){var a={};return e.replace(w.TEMPLATE_STRING_REGEX,function(e,t){var r;if(O.test(t)){r=n[t]}else{a[t]=a[t]||w.nestedProperty(n,t).get;r=a[t]()}return w.isValidTextValue(r)?r:""})};var P={max:10,count:0,name:"hovertemplate"};w.hovertemplateString=function(){return z.apply(P,arguments)};var I={max:10,count:0,name:"texttemplate"};w.texttemplateString=function(){return z.apply(I,arguments)};var R=/^[:|\|]/;function z(e,v,g){var m=this;var _=arguments;if(!v)v={};var y={};return e.replace(w.TEMPLATE_STRING_REGEX,function(e,t,r){var n=t==="xother"||t==="yother";var a=t==="_xother"||t==="_yother";var i=t==="_xother_"||t==="_yother_";var o=t==="xother_"||t==="yother_";var s=n||a||o||i;var l=t;if(a||i)l=l.substring(1);if(o||i)l=l.substring(0,l.length-1);var c;if(s){c=v[l];if(c===undefined)return""}else{var u,f;for(f=3;f<_.length;f++){u=_[f];if(!u)continue;if(u.hasOwnProperty(l)){c=u[l];break}if(!O.test(l)){c=w.nestedProperty(u,l).get();c=y[l]||w.nestedProperty(u,l).get();if(c)y[l]=c}if(c!==undefined)break}}if(c===undefined&&m){if(m.count<m.max){w.warn("Variable '"+l+"' in "+m.name+" could not be found!");c=e}if(m.count===m.max){w.warn("Too many "+m.name+" warnings - additional warnings will be suppressed")}m.count++;return e}if(r){var d;if(r[0]===":"){d=g?g.numberFormat:b.format;c=d(r.replace(R,""))(c)}if(r[0]==="|"){d=g?g.timeFormat:x;var h=w.dateTime2ms(c);c=w.formatDate(h,r.replace(R,""),false,d)}}else{var p=l+"Label";if(v.hasOwnProperty(p))c=v[p]}if(s){c="("+c+")";if(a||i)c=" "+c;if(o||i)c=c+" "}return c})}var N=48;var F=57;w.subplotSort=function(e,t){var r=Math.min(e.length,t.length)+1;var n=0;var a=0;for(var i=0;i<r;i++){var o=e.charCodeAt(i)||0;var s=t.charCodeAt(i)||0;var l=o>=N&&o<=F;var c=s>=N&&s<=F;if(l)n=10*n+o-N;if(c)a=10*a+s-N;if(!l||!c){if(n!==a)return n-a;if(o!==s)return o-s}}return a-n};var j=2e9;w.seedPseudoRandom=function(){j=2e9};w.pseudoRandom=function(){var e=j;j=(69069*j+1)%4294967296;if(Math.abs(j-e)<429496729)return w.pseudoRandom();return j/4294967296};w.fillText=function(e,t,r){var n=Array.isArray(r)?function(e){r.push(e)}:function(e){r.text=e};var a=w.extractOption(e,t,"htx","hovertext");if(w.isValidTextValue(a))return n(a);var i=w.extractOption(e,t,"tx","text");if(w.isValidTextValue(i))return n(i)};w.isValidTextValue=function(e){return e||e===0};w.formatPercent=function(e,t){t=t||0;var r=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%";for(var n=0;n<t;n++){if(r.indexOf(".")!==-1){r=r.replace("0%","%");r=r.replace(".%","%")}}return r};w.isHidden=function(e){var t=window.getComputedStyle(e).display;return!t||t==="none"};w.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""};w.strRotate=function(e){return e?"rotate("+e+")":""};w.strScale=function(e){return e!==1?"scale("+e+")":""};w.getTextTransform=function(e){var t=e.noCenter;var r=e.textX;var n=e.textY;var a=e.targetX;var i=e.targetY;var o=e.anchorX||0;var s=e.anchorY||0;var l=e.rotate;var c=e.scale;if(!c)c=0;else if(c>1)c=1;return w.strTranslate(a-c*(r+o),i-c*(n+s))+w.strScale(c)+(l?"rotate("+l+(t?"":" "+r+" "+n)+")":"")};w.ensureUniformFontSize=function(e,t){var r=w.extendFlat({},t);r.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0);return r};w.join2=function(e,t,r){var n=e.length;if(n>1){return e.slice(0,-1).join(t)+r+e[n-1]}return e.join(t)};w.bigFont=function(e){return Math.round(1.2*e)};var B=w.getFirefoxVersion();var H=B!==null&&B<86;w.getPositionFromD3Event=function(){if(H){return[b.event.layerX,b.event.layerY]}else{return[b.event.offsetX,b.event.offsetY]}}},{"../constants/numerical":265,"./anchor_utils":269,"./angles":270,"./array":271,"./clean_number":272,"./clear_responsive":274,"./coerce":275,"./dates":276,"./dom":277,"./extend":279,"./filter_unique":280,"./filter_visible":281,"./geometry2d":282,"./identity":283,"./increment":284,"./is_plain_object":286,"./keyed_container":287,"./localize":288,"./loggers":289,"./make_trace_groups":290,"./matrix":291,"./mod":292,"./nested_property":293,"./noop":294,"./notifier":295,"./preserve_drawing_buffer":298,"./push_unique":299,"./regex":301,"./relative_attr":302,"./relink_private":303,"./search":304,"./stats":306,"./throttle":308,"./to_log_range":309,"@plotly/d3":20,"d3-time-format":29,"fast-isnumeric":31}],286:[function(e,t,r){"use strict";t.exports=function e(t){if(window&&window.process&&window.process.versions){return Object.prototype.toString.call(t)==="[object Object]"}return Object.prototype.toString.call(t)==="[object Object]"&&Object.getPrototypeOf(t).hasOwnProperty("hasOwnProperty")}},{}],287:[function(e,t,r){"use strict";var p=e("./nested_property");var a=/^\w*$/;var v=0;var g=1;var m=2;var _=3;var y=4;t.exports=function e(t,i,o,s){o=o||"name";s=s||"value";var n,l,c;var u={};if(i&&i.length){c=p(t,i);l=c.get()}else{l=t}i=i||"";var f={};if(l){for(n=0;n<l.length;n++){f[l[n][o]]=n}}var d=a.test(s);var h={set:function(e,t){var r=t===null?y:v;if(!l){if(!c||r===y)return;l=[];c.set(l)}var n=f[e];if(n===undefined){if(r===y)return;r=r|_;n=l.length;f[e]=n}else if(t!==(d?l[n][s]:p(l[n],s).get())){r=r|m}var a=l[n]=l[n]||{};a[o]=e;if(d){a[s]=t}else{p(a,s).set(t)}if(t!==null){r=r&~y}u[n]=u[n]|r;return h},get:function(e){if(!l)return;var t=f[e];if(t===undefined){return undefined}else if(d){return l[t][s]}else{return p(l[t],s).get()}},rename:function(e,t){var r=f[e];if(r===undefined)return h;u[r]=u[r]|g;f[t]=r;delete f[e];l[r][o]=t;return h},remove:function(e){var t=f[e];if(t===undefined)return h;var r=l[t];if(Object.keys(r).length>2){u[t]=u[t]|m;return h.set(e,null)}if(d){for(n=t;n<l.length;n++){u[n]=u[n]|_}for(n=t;n<l.length;n++){f[l[n][o]]--}l.splice(t,1);delete f[e]}else{p(r,s).set(null);u[t]=u[t]|m|y}return h},constructUpdate:function(){var e,t;var r={};var n=Object.keys(u);for(var a=0;a<n.length;a++){t=n[a];e=i+"["+t+"]";if(l[t]){if(u[t]&g){r[e+"."+o]=l[t][o]}if(u[t]&m){if(d){r[e+"."+s]=u[t]&y?null:l[t][s]}else{r[e+"."+s]=u[t]&y?null:p(l[t],s).get()}}}else{r[e]=null}}return r}};return h}},{"./nested_property":293}],288:[function(e,t,r){"use strict";var u=e("../registry");t.exports=function e(t,r){var n=t._context.locale;for(var a=0;a<2;a++){var i=t._context.locales;for(var o=0;o<2;o++){var s=(i[n]||{}).dictionary;if(s){var l=s[r];if(l)return l}i=u.localeRegistry}var c=n.split("-")[0];if(c===n)break;n=c}return r}},{"../registry":373}],289:[function(e,t,r){"use strict";var n=e("../plot_api/plot_config").dfltConfig;var a=e("./notifier");var i=t.exports={};i.log=function(){var e;if(n.logging>1){var t=["LOG:"];for(e=0;e<arguments.length;e++){t.push(arguments[e])}console.trace.apply(console,t)}if(n.notifyOnLogging>1){var r=[];for(e=0;e<arguments.length;e++){r.push(arguments[e])}a(r.join("<br>"),"long")}};i.warn=function(){var e;if(n.logging>0){var t=["WARN:"];for(e=0;e<arguments.length;e++){t.push(arguments[e])}console.trace.apply(console,t)}if(n.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++){r.push(arguments[e])}a(r.join("<br>"),"stick")}};i.error=function(){var e;if(n.logging>0){var t=["ERROR:"];for(e=0;e<arguments.length;e++){t.push(arguments[e])}console.error.apply(console,t)}if(n.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++){r.push(arguments[e])}a(r.join("<br>"),"stick")}}},{"../plot_api/plot_config":318,"./notifier":295}],290:[function(e,t,r){"use strict";var o=e("@plotly/d3");t.exports=function e(t,r,n){var a=t.selectAll("g."+n.replace(/\s/g,".")).data(r,function(e){return e[0].trace.uid});a.exit().remove();a.enter().append("g").attr("class",n);a.order();var i=t.classed("rangeplot")?"nodeRangePlot3":"node3";a.each(function(e){e[0][i]=o.select(this)});return a}},{"@plotly/d3":20}],291:[function(e,t,o){"use strict";var r=e("gl-mat4");o.init2dArray=function(e,t){var r=new Array(e);for(var n=0;n<e;n++)r[n]=new Array(t);return r};o.transposeRagged=function(e){var t=0;var r=e.length;var n,a;for(n=0;n<r;n++)t=Math.max(t,e[n].length);var i=new Array(t);for(n=0;n<t;n++){i[n]=new Array(r);for(a=0;a<r;a++)i[n][a]=e[a][n]}return i};o.dot=function(e,t){if(!(e.length&&t.length)||e.length!==t.length)return null;var r=e.length;var n;var a;if(e[0].length){n=new Array(r);for(a=0;a<r;a++)n[a]=o.dot(e[a],t)}else if(t[0].length){var i=o.transposeRagged(t);n=new Array(i.length);for(a=0;a<i.length;a++)n[a]=o.dot(e,i[a])}else{n=0;for(a=0;a<r;a++)n+=e[a]*t[a]}return n};o.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]};o.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]};o.rotationXYMatrix=function(e,t,r){return o.dot(o.dot(o.translationMatrix(t,r),o.rotationMatrix(e)),o.translationMatrix(-t,-r))};o.apply3DTransform=function(r){return function(){var e=arguments;var t=arguments.length===1?e[0]:[e[0],e[1],e[2]||0];return o.dot(r,[t[0],t[1],t[2],1]).slice(0,3)}};o.apply2DTransform=function(r){return function(){var e=arguments;if(e.length===3){e=e[0]}var t=arguments.length===1?e[0]:[e[0],e[1]];return o.dot(r,[t[0],t[1],1]).slice(0,2)}};o.apply2DTransform2=function(e){var t=o.apply2DTransform(e);return function(e){return t(e.slice(0,2)).concat(t(e.slice(2,4)))}};o.convertCssMatrix=function(e){if(e){var t=e.length;if(t===16)return e;if(t===6){return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};o.inverseTransformMatrix=function(e){var t=[];r.invert(t,e);return[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}},{"gl-mat4":47}],292:[function(e,t,r){"use strict";function n(e,t){var r=e%t;return r<0?r+t:r}function a(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}t.exports={mod:n,modHalf:a}},{}],293:[function(e,t,r){"use strict";var l=e("fast-isnumeric");var f=e("./array").isArrayOrTypedArray;t.exports=function e(t,r){if(l(r))r=String(r);else if(typeof r!=="string"||r.substr(r.length-4)==="[-1]"){throw"bad property string"}var n=0;var a=r.split(".");var i;var o;var s;while(n<a.length){i=String(a[n]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/);if(i){if(i[1])a[n]=i[1];else if(n===0)a.splice(0,1);else throw"bad property string";o=i[2].substr(1,i[2].length-2).split("][");for(s=0;s<o.length;s++){n++;a.splice(n,0,Number(o[s]))}}n++}if(typeof t!=="object"){return g(t,r,a)}return{set:h(t,a,r),get:c(t,a),astr:r,parts:a,obj:t}};function c(o,s){return function(){var e=o;var t;var r;var n;var a;var i;for(a=0;a<s.length-1;a++){t=s[a];if(t===-1){r=true;n=[];for(i=0;i<e.length;i++){n[i]=c(e[i],s.slice(a+1))();if(n[i]!==n[0])r=false}return r?n[0]:n}if(typeof t==="number"&&!f(e)){return undefined}e=e[t];if(typeof e!=="object"||e===null){return undefined}}if(typeof e!=="object"||e===null)return undefined;n=e[s[a]];if(n===null)return undefined;return n}}var n=/(^|\.)args\[/;function d(e,t){return e===undefined||e===null&&!t.match(n)}function h(s,l,c){return function(e){var t=s;var r="";var n=[[s,r]];var a=d(e,c);var i;var o;for(o=0;o<l.length-1;o++){i=l[o];if(typeof i==="number"&&!f(t)){throw"array index but container is not an array"}if(i===-1){a=!p(t,l.slice(o+1),e,c);if(a)break;else return}if(!v(t,i,l[o+1],a)){break}t=t[i];if(typeof t!=="object"||t===null){throw"container is not an object"}r=u(r,i);n.push([t,r])}if(a){if(o===l.length-1){delete t[l[o]];if(Array.isArray(t)&&+l[o]===t.length-1){while(t.length&&t[t.length-1]===undefined){t.pop()}}}}else t[l[o]]=e}}function u(e,t){var r=t;if(l(t))r="["+t+"]";else if(e)r="."+t;return e+r}function p(e,t,r,n){var a=f(r);var i=true;var o=r;var s=n.replace("-1",0);var l=a?false:d(r,s);var c=t[0];var u;for(u=0;u<e.length;u++){s=n.replace("-1",u);if(a){o=r[u%r.length];l=d(o,s)}if(l)i=false;if(!v(e,u,c,l)){continue}h(e[u],t,n.replace("-1",u))(o)}return i}function v(e,t,r,n){if(e[t]===undefined){if(n)return false;if(typeof r==="number")e[t]=[];else e[t]={}}return true}function g(e,t,r){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:r,obj:e}}},{"./array":271,"fast-isnumeric":31}],294:[function(e,t,r){"use strict";t.exports=function e(){}},{}],295:[function(e,t,r){"use strict";var l=e("@plotly/d3");var n=e("fast-isnumeric");var a=[];t.exports=function(e,i){if(a.indexOf(e)!==-1)return;a.push(e);var o=1e3;if(n(i))o=i;else if(i==="long")o=3e3;var t=l.select("body").selectAll(".plotly-notifier").data([0]);t.enter().append("div").classed("plotly-notifier",true);var r=t.selectAll(".notifier-note").data(a);function s(e){e.duration(700).style("opacity",0).each("end",function(e){var t=a.indexOf(e);if(t!==-1)a.splice(t,1);l.select(this).remove()})}r.enter().append("div").classed("notifier-note",true).style("opacity",0).each(function(e){var t=l.select(this);t.append("button").classed("notifier-close",true).html("&times;").on("click",function(){t.transition().call(s)});var r=t.append("p");var n=e.split(/<br\s*\/?>/g);for(var a=0;a<n.length;a++){if(a)r.append("br");r.append("span").text(n[a])}if(i==="stick"){t.transition().duration(350).style("opacity",1)}else{t.transition().duration(700).style("opacity",1).transition().delay(o).call(s)}})}},{"@plotly/d3":20,"fast-isnumeric":31}],296:[function(e,t,r){"use strict";var s=e("./setcursor");var l="data-savedcursor";var c="!!";t.exports=function e(t,r){var n=t.attr(l);if(r){if(!n){var a=(t.attr("class")||"").split(" ");for(var i=0;i<a.length;i++){var o=a[i];if(o.indexOf("cursor-")===0){t.attr(l,o.substr(7)).classed(o,false)}}if(!t.attr(l)){t.attr(l,c)}}s(t,r)}else if(n){t.attr(l,null);if(n===c)s(t);else s(t,n)}}},{"./setcursor":305}],297:[function(e,t,r){"use strict";var h=e("./matrix").dot;var _=e("../constants/numerical").BADNUM;var c=t.exports={};c.tester=function e(t){var h=t.slice();var p=h[0][0];var v=p;var g=h[0][1];var m=g;var r;h.push(h[0]);for(r=1;r<h.length;r++){p=Math.min(p,h[r][0]);v=Math.max(v,h[r][0]);g=Math.min(g,h[r][1]);m=Math.max(m,h[r][1])}var n=false;var a;if(h.length===5){if(h[0][0]===h[1][0]){if(h[2][0]===h[3][0]&&h[0][1]===h[3][1]&&h[1][1]===h[2][1]){n=true;a=function(e){return e[0]===h[0][0]}}}else if(h[0][1]===h[1][1]){if(h[2][1]===h[3][1]&&h[0][0]===h[3][0]&&h[1][0]===h[2][0]){n=true;a=function(e){return e[1]===h[0][1]}}}}function i(e,t){var r=e[0];var n=e[1];if(r===_||r<p||r>v||n===_||n<g||n>m){return false}if(t&&a(e))return false;return true}function o(e,t){var r=e[0];var n=e[1];if(r===_||r<p||r>v||n===_||n<g||n>m){return false}var a=h.length;var i=h[0][0];var o=h[0][1];var s=0;var l;var c;var u;var f;var d;for(l=1;l<a;l++){c=i;u=o;i=h[l][0];o=h[l][1];f=Math.min(c,i);if(r<f||r>Math.max(c,i)||n>Math.max(u,o)){continue}else if(n<Math.min(u,o)){if(r!==f)s++}else{if(i===c)d=n;else d=u+(r-c)*(o-u)/(i-c);if(n===d){if(l===1&&t)return false;return true}if(n<=d&&r!==f)s++}}return s%2===1}var s=true;var l=h[0];for(r=1;r<h.length;r++){if(l[0]!==h[r][0]||l[1]!==h[r][1]){s=false;break}}return{xmin:p,xmax:v,ymin:g,ymax:m,pts:h,contains:n?i:o,isRect:n,degenerate:s}};c.isSegmentBent=function e(t,r,n,a){var i=t[r];var o=[t[n][0]-i[0],t[n][1]-i[1]];var s=h(o,o);var l=Math.sqrt(s);var c=[-o[1]/l,o[0]/l];var u;var f;var d;for(u=r+1;u<n;u++){f=[t[u][0]-i[0],t[u][1]-i[1]];d=h(f,o);if(d<0||d>s||Math.abs(h(f,c))>a)return true}return false};c.filter=function e(a,i){var o=[a[0]];var s=0;var l=0;function t(e){a.push(e);var t=o.length;var r=s;o.splice(l+1);for(var n=r+1;n<a.length;n++){if(n===a.length-1||c.isSegmentBent(a,r,n+1,i)){o.push(a[n]);if(o.length<t-2){s=n;l=o.length-1}r=n}}}if(a.length>1){var r=a.pop();t(r)}return{addPt:t,raw:a,filtered:o}}},{"../constants/numerical":265,"./matrix":291}],298:[function(e,t,r){"use strict";var u=e("fast-isnumeric");var f=e("is-mobile");t.exports=function e(t){var r;if(t&&t.hasOwnProperty("userAgent")){r=t.userAgent}else{r=d()}if(typeof r!=="string")return true;var n=f({ua:{headers:{"user-agent":r}},tablet:true,featureDetect:false});if(!n){var a=r.split(" ");for(var i=1;i<a.length;i++){var o=a[i];if(o.indexOf("Safari")!==-1){for(var s=i-1;s>-1;s--){var l=a[s];if(l.substr(0,8)==="Version/"){var c=l.substr(8).split(".")[0];if(u(c))c=+c;if(c>=13)return true}}}}}return n};function d(){var e;if(typeof navigator!=="undefined"){e=navigator.userAgent}if(e&&e.headers&&typeof e.headers["user-agent"]==="string"){e=e.headers["user-agent"]}return e}},{"fast-isnumeric":31,"is-mobile":67}],299:[function(e,t,r){"use strict";t.exports=function e(t,r){if(r instanceof RegExp){var n=r.toString();for(var a=0;a<t.length;a++){if(t[a]instanceof RegExp&&t[a].toString()===n){return t}}t.push(r)}else if((r||r===0)&&t.indexOf(r)===-1)t.push(r);return t}},{}],300:[function(e,t,r){"use strict";var i=e("../lib");var s=e("../plot_api/plot_config").dfltConfig;function n(e,t){var r=[];var n;for(var a=0;a<t.length;a++){n=t[a];if(n===e)r[a]=n;else if(typeof n==="object"){r[a]=Array.isArray(n)?i.extendDeep([],n):i.extendDeepAll({},n)}else r[a]=n}return r}var a={};a.add=function(e,t,r,n,a){var i,o;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};o=e.undoQueue.index;if(e.autoplay){if(!e.undoQueue.inSequence)e.autoplay=false;return}if(!e.undoQueue.sequence||e.undoQueue.beginSequence){i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}};e.undoQueue.queue.splice(o,e.undoQueue.queue.length-o,i);e.undoQueue.index+=1}else{i=e.undoQueue.queue[o-1]}e.undoQueue.beginSequence=false;if(i){i.undo.calls.unshift(t);i.undo.args.unshift(r);i.redo.calls.push(n);i.redo.args.push(a)}if(e.undoQueue.queue.length>s.queueLength){e.undoQueue.queue.shift();e.undoQueue.index--}};a.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};e.undoQueue.sequence=true;e.undoQueue.beginSequence=true};a.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};e.undoQueue.sequence=false;e.undoQueue.beginSequence=false};a.undo=function e(t){var r,n;if(t.undoQueue===undefined||isNaN(t.undoQueue.index)||t.undoQueue.index<=0){return}t.undoQueue.index--;r=t.undoQueue.queue[t.undoQueue.index];t.undoQueue.inSequence=true;for(n=0;n<r.undo.calls.length;n++){a.plotDo(t,r.undo.calls[n],r.undo.args[n])}t.undoQueue.inSequence=false;t.autoplay=false};a.redo=function e(t){var r,n;if(t.undoQueue===undefined||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length){return}r=t.undoQueue.queue[t.undoQueue.index];t.undoQueue.inSequence=true;for(n=0;n<r.redo.calls.length;n++){a.plotDo(t,r.redo.calls[n],r.redo.args[n])}t.undoQueue.inSequence=false;t.autoplay=false;t.undoQueue.index++};a.plotDo=function(e,t,r){e.autoplay=true;r=n(e,r);t.apply(null,r)};t.exports=a},{"../lib":285,"../plot_api/plot_config":318}],301:[function(e,t,r){"use strict";r.counter=function(e,t,r,n){var a=(t||"")+(r?"":"$");var i=n===false?"":"^";if(e==="xy"){return new RegExp(i+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+a)}return new RegExp(i+e+"([2-9]|[1-9][0-9]+)?"+a)}},{}],302:[function(e,t,r){"use strict";var n=/^(.*)(\.[^\.\[\]]+|\[\d\])$/;var a=/^[^\.\[\]]+$/;t.exports=function(e,t){while(t){var r=e.match(n);if(r)e=r[1];else if(e.match(a))e="";else throw new Error("bad relativeAttr call:"+[e,t]);if(t.charAt(0)==="^")t=t.slice(1);else break}if(e&&t.charAt(0)!=="["){return e+"."+t}return e+t}},{}],303:[function(e,t,r){"use strict";var l=e("./array").isArrayOrTypedArray;var c=e("./is_plain_object");t.exports=function e(t,r){for(var n in r){var a=r[n];var i=t[n];if(i===a)continue;if(n.charAt(0)==="_"||typeof a==="function"){if(n in t)continue;t[n]=a}else if(l(a)&&l(i)&&c(a[0])){if(n==="customdata"||n==="ids")continue;var o=Math.min(a.length,i.length);for(var s=0;s<o;s++){if(i[s]!==a[s]&&c(a[s])&&c(i[s])){e(i[s],a[s])}}}else if(c(a)&&c(i)){e(i,a);if(!Object.keys(i).length)delete t[n]}}}},{"./array":271,"./is_plain_object":286}],304:[function(e,t,u){"use strict";var c=e("fast-isnumeric");var f=e("./loggers");var o=e("./identity");var d=e("../constants/numerical").BADNUM;var h=1e-9;u.findBin=function(e,t,r){if(c(t.start)){return r?Math.ceil((e-t.start)/t.size-h)-1:Math.floor((e-t.start)/t.size+h)}else{var n=0;var a=t.length;var i=0;var o=a>1?(t[a-1]-t[0])/(a-1):1;var s,l;if(o>=0){l=r?p:v}else{l=r?m:g}e+=o*h*(r?-1:1)*(o>=0?1:-1);while(n<a&&i++<100){s=Math.floor((n+a)/2);if(l(t[s],e))n=s+1;else a=s}if(i>90)f.log("Long binary search...");return n-1}};function p(e,t){return e<t}function v(e,t){return e<=t}function g(e,t){return e>t}function m(e,t){return e>=t}u.sorterAsc=function(e,t){return e-t};u.sorterDes=function(e,t){return t-e};u.distinctVals=function(e){var t=e.slice();t.sort(u.sorterAsc);var r;for(r=t.length-1;r>-1;r--){if(t[r]!==d)break}var n=t[r]-t[0]||1;var a=n/(r||1)/1e4;var i=[];var o;for(var s=0;s<=r;s++){var l=t[s];var c=l-o;if(o===undefined){i.push(l);o=l}else if(c>a){n=Math.min(n,c);i.push(l);o=l}}return{vals:i,minDiff:n}};u.roundUp=function(e,t,r){var n=0;var a=t.length-1;var i;var o=0;var s=r?0:1;var l=r?1:0;var c=r?Math.ceil:Math.floor;while(n<a&&o++<100){i=c((n+a)/2);if(t[i]<=e)n=i+s;else a=i-l}return t[n]};u.sort=function(e,t){var r=0;var n=0;for(var a=1;a<e.length;a++){var i=t(e[a],e[a-1]);if(i<0)r=1;else if(i>0)n=1;if(r&&n)return e.sort(t)}return n?e:e.reverse()};u.findIndexOfMin=function(e,t){t=t||o;var r=Infinity;var n;for(var a=0;a<e.length;a++){var i=t(e[a]);if(i<r){r=i;n=a}}return n}},{"../constants/numerical":265,"./identity":283,"./loggers":289,"fast-isnumeric":31}],305:[function(e,t,r){"use strict";t.exports=function e(t,r){(t.attr("class")||"").split(" ").forEach(function(e){if(e.indexOf("cursor-")===0)t.classed(e,false)});if(r)t.classed("cursor-"+r,true)}},{}],306:[function(e,t,o){"use strict";var s=e("fast-isnumeric");var l=e("./array").isArrayOrTypedArray;o.aggNums=function(e,t,r,n){var a,i;if(!n||n>r.length)n=r.length;if(!s(t))t=false;if(l(r[0])){i=new Array(n);for(a=0;a<n;a++)i[a]=o.aggNums(e,t,r[a]);r=i}for(a=0;a<n;a++){if(!s(t))t=r[a];else if(s(r[a]))t=e(+t,+r[a])}return t};o.len=function(e){return o.aggNums(function(e){return e+1},0,e)};o.mean=function(e,t){if(!t)t=o.len(e);return o.aggNums(function(e,t){return e+t},0,e)/t};o.midRange=function(e){if(e===undefined||e.length===0)return undefined;return(o.aggNums(Math.max,null,e)+o.aggNums(Math.min,null,e))/2};o.variance=function(e,t,r){if(!t)t=o.len(e);if(!s(r))r=o.mean(e,t);return o.aggNums(function(e,t){return e+Math.pow(t-r,2)},0,e)/t};o.stdev=function(e,t,r){return Math.sqrt(o.variance(e,t,r))};o.median=function(e){var t=e.slice().sort();return o.interp(t,.5)};o.interp=function(e,t){if(!s(t))throw"n should be a finite number";t=t*e.length-.5;if(t<0)return e[0];if(t>e.length-1)return e[e.length-1];var r=t%1;return r*e[Math.ceil(t)]+(1-r)*e[Math.floor(t)]}},{"./array":271,"fast-isnumeric":31}],307:[function(e,t,r){"use strict";var w=e("@plotly/d3");var A=e("../lib");var b=A.strTranslate;var T=e("../constants/xmlns_namespaces");var k=e("../constants/alignment").LINE_SPACING;function x(e,t){return e.node().getBoundingClientRect()[t]}var n=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;r.convertToTspans=function(p,e,v){var g=p.text();var t=!p.attr("data-notex")&&typeof MathJax!=="undefined"&&g.match(n);var m=w.select(p.node().parentNode);if(m.empty())return;var _=p.attr("class")?p.attr("class").split(" ")[0]:"text";_+="-math";m.selectAll("svg."+_).remove();m.selectAll("g."+_+"-group").remove();p.style("display",null).attr({"data-unformatted":g,"data-math":"N"});function y(){if(!m.empty()){_=p.attr("class")+"-math";m.select("svg."+_).remove()}p.text("").style("white-space","pre");var e=f(p.node(),g);if(e){p.style("pointer-events","all")}r.positionText(p);if(v)v.call(p)}if(t){(e&&e._promises||[]).push(new Promise(function(d){p.style("display","none");var h=parseInt(p.node().style.fontSize,10);var e={fontSize:h};o(t[2],e,function(e,t,r){m.selectAll("svg."+_).remove();m.selectAll("g."+_+"-group").remove();var n=e&&e.select("svg");if(!n||!n.node()){y();d();return}var a=m.append("g").classed(_+"-group",true).attr({"pointer-events":"none","data-unformatted":g,"data-math":"Y"});a.node().appendChild(n.node());if(t&&t.node()){n.node().insertBefore(t.node().cloneNode(true),n.node().firstChild)}n.attr({class:_,height:r.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var i=p.node().style.fill||"black";var o=n.select("g");o.attr({fill:i,stroke:i});var s=x(o,"width");var l=x(o,"height");var c=+p.attr("x")-s*{start:0,middle:.5,end:1}[p.attr("text-anchor")||"start"];var u=h||x(p,"height");var f=-u/4;if(_[0]==="y"){a.attr({transform:"rotate("+[-90,+p.attr("x"),+p.attr("y")]+")"+b(-s/2,f-l/2)});n.attr({x:+p.attr("x"),y:+p.attr("y")})}else if(_[0]==="l"){n.attr({x:p.attr("x"),y:f-l/2})}else if(_[0]==="a"&&_.indexOf("atitle")!==0){n.attr({x:0,y:f})}else{n.attr({x:c,y:+p.attr("y")+f-l/2})}if(v)v.call(p,a);d(a)})}))}else y();return p};var a=/(<|&lt;|&#60;)/g;var i=/(>|&gt;|&#62;)/g;function s(e){return e.replace(a,"\\lt ").replace(i,"\\gt ")}function o(r,t,n){var a,e,i,o;MathJax.Hub.Queue(function(){e=A.extendDeepAll({},MathJax.Hub.config);i=MathJax.Hub.processSectionDelay;if(MathJax.Hub.processSectionDelay!==undefined){MathJax.Hub.processSectionDelay=0}return MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){a=MathJax.Hub.config.menuSettings.renderer;if(a!=="SVG"){return MathJax.Hub.setRenderer("SVG")}},function(){var e="math-output-"+A.randstr({},64);o=w.select("body").append("div").attr({id:e}).style({visibility:"hidden",position:"absolute"}).style({"font-size":t.fontSize+"px"}).text(s(r));return MathJax.Hub.Typeset(o.node())},function(){var e=w.select("body").select("#MathJax_SVG_glyphs");if(o.select(".MathJax_SVG").empty()||!o.select("svg").node()){A.log("There was an error in the tex syntax.",r);n()}else{var t=o.select("svg").node().getBoundingClientRect();n(o.select(".MathJax_SVG"),e,t)}o.remove();if(a!=="SVG"){return MathJax.Hub.setRenderer(a)}},function(){if(i!==undefined){MathJax.Hub.processSectionDelay=i}return MathJax.Hub.Config(e)})}var M={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"};var S={sub:"0.3em",sup:"-0.6em"};var C={sub:"-0.21em",sup:"0.42em"};var L="";var E=["http:","https:","mailto:","",undefined,":"];var D=r.NEWLINES=/(\r\n?|\n)/g;var O=/(<[^<>]*>)/;var P=/<(\/?)([^ >]*)(\s+(.*))?>/i;var I=/<br(\s+.*)?>/i;r.BR_TAG_ALL=/<br(\s+.*)?>/gi;var R=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i;var z=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i;var N=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i;var F=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function j(e,t){if(!e)return null;var r=e.match(t);var n=r&&(r[3]||r[4]);return n&&H(n)}var B=/(^|;)\s*color:/;r.plainText=function(e,t){t=t||{};var r=t.len!==undefined&&t.len!==-1?t.len:Infinity;var n=t.allowedTags!==undefined?t.allowedTags:["br"];var a="...";var i=a.length;var o=e.split(O);var s=[];var l="";var c=0;for(var u=0;u<o.length;u++){var f=o[u];var d=f.match(P);var h=d&&d[2].toLowerCase();if(h){if(n.indexOf(h)!==-1){s.push(f);l=h}}else{var p=f.length;if(c+p<r){s.push(f);c+=p}else if(c<r){var v=r-c;if(l&&(l!=="br"||v<=i||p<=i)){s.pop()}if(r>i){s.push(f.substr(0,v-i)+a)}else{s.push(f.substr(0,v))}break}l=""}}return s.join("")};var l={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""};var c=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function H(e){return e.replace(c,function(e,t){var r;if(t.charAt(0)==="#"){r=u(t.charAt(1)==="x"?parseInt(t.substr(2),16):parseInt(t.substr(1),10))}else r=l[t];return r||e})}r.convertEntities=H;function u(e){if(e>1114111)return;var t=String.fromCodePoint;if(t)return t(e);var r=String.fromCharCode;if(e<=65535)return r(e);return r((e>>10)+55232,e%1024+56320)}function f(n,r){r=r.replace(D," ");var e=false;var c=[];var u;var a=-1;function t(){a++;var e=document.createElementNS(T.svg,"tspan");w.select(e).attr({class:"line",dy:a*k+"em"});n.appendChild(e);u=e;var t=c;c=[{node:e}];if(t.length>1){for(var r=1;r<t.length;r++){i(t[r])}}}function i(e){var t=e.type;var r={};var n;if(t==="a"){n="a";var a=e.target;var i=e.href;var o=e.popup;if(i){r={"xlink:xlink:show":a==="_blank"||a.charAt(0)!=="_"?"new":"replace",target:a,"xlink:xlink:href":i};if(o){r.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+o+'");return false;'}}}else n="tspan";if(e.style)r.style=e.style;var s=document.createElementNS(T.svg,n);if(t==="sup"||t==="sub"){f(u,L);u.appendChild(s);var l=document.createElementNS(T.svg,"tspan");f(l,L);w.select(l).attr("dy",C[t]);r.dy=S[t];u.appendChild(s);u.appendChild(l)}else{u.appendChild(s)}w.select(s).attr(r);u=e.node=s;c.push(e)}function f(e,t){e.appendChild(document.createTextNode(t))}function o(e){if(c.length===1){A.log("Ignoring unexpected end tag </"+e+">.",r);return}var t=c.pop();if(e!==t.type){A.log("Start tag <"+t.type+"> doesnt match end tag <"+e+">. Pretending it did match.",r)}u=c[c.length-1].node}var s=I.test(r);if(s)t();else{u=n;c=[{node:n}]}var l=r.split(O);for(var d=0;d<l.length;d++){var h=l[d];var p=h.match(P);var v=p&&p[2].toLowerCase();var g=M[v];if(v==="br"){t()}else if(g===undefined){f(u,H(h))}else{if(p[1]){o(v)}else{var m=p[4];var _={type:v};var y=j(m,R);if(y){y=y.replace(B,"$1 fill:");if(g)y+=";"+g}else if(g)y=g;if(y)_.style=y;if(v==="a"){e=true;var b=j(m,z);if(b){var x=document.createElement("a");x.href=b;if(E.indexOf(x.protocol)!==-1){_.href=encodeURI(decodeURI(b));_.target=j(m,N)||"_blank";_.popup=j(m,F)}}}i(_)}}}return e}r.sanitizeHTML=function e(t){t=t.replace(D," ");var r=document.createElement("p");var n=r;var a=[];var i=t.split(O);for(var o=0;o<i.length;o++){var s=i[o];var l=s.match(P);var c=l&&l[2].toLowerCase();if(c in M){if(l[1]){if(a.length){n=a.pop()}}else{var u=l[4];var f=j(u,R);var d=f?{style:f}:{};if(c==="a"){var h=j(u,z);if(h){var p=document.createElement("a");p.href=h;if(E.indexOf(p.protocol)!==-1){d.href=encodeURI(decodeURI(h));var v=j(u,N);if(v){d.target=v}}}}var g=document.createElement(c);n.appendChild(g);w.select(g).attr(d);n=g;a.push(g)}}else{n.appendChild(document.createTextNode(H(s)))}}var m="innerHTML";return r[m]};r.lineCount=function e(t){return t.selectAll("tspan.line").size()||1};r.positionText=function e(t,a,i){return t.each(function(){var r=w.select(this);function e(e,t){if(t===undefined){t=r.attr(e);if(t===null){r.attr(e,0);t=0}}else r.attr(e,t);return t}var t=e("x",a);var n=e("y",i);if(this.nodeName==="text"){r.selectAll("tspan.line").attr({x:t,y:n})}})};function d(e,t,a){var r=a.horizontalAlign;var n=a.verticalAlign||"top";var i=e.node().getBoundingClientRect();var o=t.node().getBoundingClientRect();var s;var l;var c;if(n==="bottom"){l=function(){return i.bottom-s.height}}else if(n==="middle"){l=function(){return i.top+(i.height-s.height)/2}}else{l=function(){return i.top}}if(r==="right"){c=function(){return i.right-s.width}}else if(r==="center"){c=function(){return i.left+(i.width-s.width)/2}}else{c=function(){return i.left}}return function(){s=this.node().getBoundingClientRect();var e=c()-o.left;var t=l()-o.top;var r=a.gd||{};if(a.gd){r._fullLayout._calcInverseTransform(r);var n=A.apply3DTransform(r._fullLayout._invTransform)(e,t);e=n[0];t=n[1]}this.style({top:t+"px",left:e+"px","z-index":1e3});return this}}var h="1px ";r.makeTextShadow=function(e){var t=h;var r=h;var n=h;return t+r+n+e+", "+"-"+t+"-"+r+n+e+", "+t+"-"+r+n+e+", "+"-"+t+r+n+e};r.makeEditable=function(o,s){var l=s.gd;var e=s.delegate;var c=w.dispatch("edit","input","cancel");var r=e||o;o.style({"pointer-events":e?"none":"all"});if(o.size()!==1)throw new Error("boo");function t(){n();o.style({opacity:0});var e=r.attr("class");var t;if(e)t="."+e.split(" ")[0]+"-math-group";else t="[class*=-math-group]";if(t){w.select(o.node().parentNode).select(t).style({opacity:0})}}function u(e){var t=e.node();var r=document.createRange();r.selectNodeContents(t);var n=window.getSelection();n.removeAllRanges();n.addRange(r);t.focus()}function n(){var e=w.select(l);var t=e.select(".svg-container");var r=t.append("div");var n=o.node().style;var a=parseFloat(n.fontSize||12);var i=s.text;if(i===undefined)i=o.attr("data-unformatted");r.classed("plugin-editable editable",true).style({position:"absolute","font-family":n.fontFamily||"Arial","font-size":a,color:s.fill||n.fill||"black",opacity:1,"background-color":s.background||"transparent",outline:"#ffffff33 1px solid",margin:[-a/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:true}).text(i).call(d(o,t,s)).on("blur",function(){l._editing=false;o.text(this.textContent).style({opacity:1});var e=w.select(this).attr("class");var t;if(e)t="."+e.split(" ")[0]+"-math-group";else t="[class*=-math-group]";if(t){w.select(o.node().parentNode).select(t).style({opacity:0})}var r=this.textContent;w.select(this).transition().duration(0).remove();w.select(document).on("mouseup",null);c.edit.call(o,r)}).on("focus",function(){var e=this;l._editing=true;w.select(document).on("mouseup",function(){if(w.event.target===e)return false;if(document.activeElement===r.node())r.node().blur()})}).on("keyup",function(){if(w.event.which===27){l._editing=false;o.style({opacity:1});w.select(this).style({opacity:0}).on("blur",function(){return false}).transition().remove();c.cancel.call(o,this.textContent)}else{c.input.call(o,this.textContent);w.select(this).call(d(o,t,s))}}).on("keydown",function(){if(w.event.which===13)this.blur()}).call(u)}if(s.immediate)t();else r.on("click",t);return w.rebind(o,c,"on")}},{"../constants/alignment":260,"../constants/xmlns_namespaces":266,"../lib":285,"@plotly/d3":20}],308:[function(e,t,r){"use strict";var l={};r.throttle=function e(t,r,n){var a=l[t];var i=Date.now();if(!a){for(var o in l){if(l[o].ts<i-6e4){delete l[o]}}a=l[t]={ts:0,timer:null}}c(a);function s(){n();a.ts=Date.now();if(a.onDone){a.onDone();a.onDone=null}}if(i>a.ts+r){s();return}a.timer=setTimeout(function(){s();a.timer=null},r)};r.done=function(e){var n=l[e];if(!n||!n.timer)return Promise.resolve();return new Promise(function(t){var r=n.onDone;n.onDone=function e(){if(r)r();t();n.onDone=null}})};r.clear=function(e){if(e){c(l[e]);delete l[e]}else{for(var t in l)r.clear(t)}};function c(e){if(e&&e.timer!==null){clearTimeout(e.timer);e.timer=null}}},{}],309:[function(e,t,r){"use strict";var a=e("fast-isnumeric");t.exports=function e(t,r){if(t>0)return Math.log(t)/Math.LN10;var n=Math.log(Math.min(r[0],r[1]))/Math.LN10;if(!a(n))n=Math.log(Math.max(r[0],r[1]))/Math.LN10-6;return n}},{"fast-isnumeric":31}],310:[function(e,t,r){"use strict";t.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],311:[function(e,t,r){"use strict";t.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],312:[function(e,t,r){"use strict";var c=e("../registry");t.exports=function e(t){var r=c.layoutArrayContainers;var n=c.layoutArrayRegexes;var a=t.split("[")[0];var i;var o;for(var s=0;s<n.length;s++){o=t.match(n[s]);if(o&&o.index===0){i=o[0];break}}if(!i)i=r[r.indexOf(a)];if(!i)return false;var l=t.substr(i.length);if(!l)return{array:i,index:"",property:""};o=l.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/);if(!o)return false;return{array:i,index:Number(o[1]),property:o[3]||""}}},{"../registry":373}],313:[function(e,t,r){"use strict";var n=e("../lib");var o=n.extendFlat;var s=n.isPlainObject;var a={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]};var i={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]};var l=a.flags.slice().concat(["fullReplot"]);var c=i.flags.slice().concat("layoutReplot");t.exports={traces:a,layout:i,traceFlags:function(){return u(l)},layoutFlags:function(){return u(c)},update:function(e,t){var r=t.editType;if(r&&r!=="none"){var n=r.split("+");for(var a=0;a<n.length;a++){e[n[a]]=true}}},overrideAll:f};function u(e){var t={};for(var r=0;r<e.length;r++)t[e[r]]=false;return t}function f(e,t,r){var n=o({},e);for(var a in n){var i=n[a];if(s(i)){n[a]=d(i,t,r,a)}}if(r==="from-root")n.editType=t;return n}function d(e,t,r,n){if(e.valType){var a=o({},e);a.editType=t;if(Array.isArray(e.items)){a.items=new Array(e.items.length);for(var i=0;i<e.items.length;i++){a.items[i]=d(e.items[i],t,"from-root")}}return a}else{return f(e,t,n.charAt(0)==="_"?"nested":"from-root")}}},{"../lib":285}],314:[function(e,t,M){"use strict";var u=e("fast-isnumeric");var S=e("gl-mat4/fromQuat");var x=e("../registry");var C=e("../lib");var L=e("../plots/plots");var r=e("../plots/cartesian/axis_ids");var E=e("../components/color");var D=r.cleanId;var f=r.getFromTrace;var w=x.traceIs;M.clearPromiseQueue=function(e){if(Array.isArray(e._promises)&&e._promises.length>0){C.log("Clearing previous rejected promises from queue.")}e._promises=[]};M.cleanLayout=function(e){var t,r;if(!e)e={};if(e.xaxis1){if(!e.xaxis)e.xaxis=e.xaxis1;delete e.xaxis1}if(e.yaxis1){if(!e.yaxis)e.yaxis=e.yaxis1;delete e.yaxis1}if(e.scene1){if(!e.scene)e.scene=e.scene1;delete e.scene1}var n=(L.subplotsRegistry.cartesian||{}).attrRegex;var a=(L.subplotsRegistry.polar||{}).attrRegex;var i=(L.subplotsRegistry.ternary||{}).attrRegex;var o=(L.subplotsRegistry.gl3d||{}).attrRegex;var s=Object.keys(e);for(t=0;t<s.length;t++){var l=s[t];if(n&&n.test(l)){var c=e[l];if(c.anchor&&c.anchor!=="free"){c.anchor=D(c.anchor)}if(c.overlaying)c.overlaying=D(c.overlaying);if(!c.type){if(c.isdate)c.type="date";else if(c.islog)c.type="log";else if(c.isdate===false&&c.islog===false)c.type="linear"}if(c.autorange==="withzero"||c.autorange==="tozero"){c.autorange=true;c.rangemode="tozero"}delete c.islog;delete c.isdate;delete c.categories;if(I(c,"domain"))delete c.domain;if(c.autotick!==undefined){if(c.tickmode===undefined){c.tickmode=c.autotick?"auto":"linear"}delete c.autotick}P(c)}else if(a&&a.test(l)){var u=e[l];P(u.radialaxis)}else if(i&&i.test(l)){var f=e[l];P(f.aaxis);P(f.baxis);P(f.caxis)}else if(o&&o.test(l)){var d=e[l];var h=d.cameraposition;if(Array.isArray(h)&&h[0].length===4){var p=h[0];var v=h[1];var g=h[2];var m=S([],p);var _=[];for(r=0;r<3;++r){_[r]=v[r]+g*m[2+4*r]}d.camera={eye:{x:_[0],y:_[1],z:_[2]},center:{x:v[0],y:v[1],z:v[2]},up:{x:0,y:0,z:1}};delete d.cameraposition}P(d.xaxis);P(d.yaxis);P(d.zaxis)}}var y=Array.isArray(e.annotations)?e.annotations.length:0;for(t=0;t<y;t++){var b=e.annotations[t];if(!C.isPlainObject(b))continue;if(b.ref){if(b.ref==="paper"){b.xref="paper";b.yref="paper"}else if(b.ref==="data"){b.xref="x";b.yref="y"}delete b.ref}O(b,"xref");O(b,"yref")}var x=Array.isArray(e.shapes)?e.shapes.length:0;for(t=0;t<x;t++){var w=e.shapes[t];if(!C.isPlainObject(w))continue;O(w,"xref");O(w,"yref")}var A=Array.isArray(e.images)?e.images.length:0;for(t=0;t<A;t++){var T=e.images[t];if(!C.isPlainObject(T))continue;O(T,"xref");O(T,"yref")}var k=e.legend;if(k){if(k.x>3){k.x=1.02;k.xanchor="left"}else if(k.x<-2){k.x=-.02;k.xanchor="right"}if(k.y>3){k.y=1.02;k.yanchor="bottom"}else if(k.y<-2){k.y=-.02;k.yanchor="top"}}P(e);if(e.dragmode==="rotate")e.dragmode="orbit";E.clean(e);if(e.template&&e.template.layout){M.cleanLayout(e.template.layout)}return e};function O(e,t){var r=e[t];var n=t.charAt(0);if(r&&r!=="paper"){e[t]=D(r,n,true)}}function P(a){if(a){if(typeof a.title==="string"||typeof a.title==="number"){a.title={text:a.title}}e("titlefont","font");e("titleposition","position");e("titleside","side");e("titleoffset","offset")}function e(e,t){var r=a[e];var n=a.title&&a.title[t];if(r&&!n){if(!a.title){a.title={}}a.title[t]=a[e];delete a[e]}}}M.cleanData=function(e){for(var t=0;t<e.length;t++){var r=e[t];var n;if(r.type==="histogramy"&&"xbins"in r&&!("ybins"in r)){r.ybins=r.xbins;delete r.xbins}if(r.error_y&&"opacity"in r.error_y){var a=E.defaults;var i=r.error_y.color||(w(r,"bar")?E.defaultLine:a[t%a.length]);r.error_y.color=E.addOpacity(E.rgb(i),E.opacity(i)*r.error_y.opacity);delete r.error_y.opacity}if("bardir"in r){if(r.bardir==="h"&&(w(r,"bar")||r.type.substr(0,9)==="histogram")){r.orientation="h";M.swapXYData(r)}delete r.bardir}if(r.type==="histogramy")M.swapXYData(r);if(r.type==="histogramx"||r.type==="histogramy"){r.type="histogram"}if("scl"in r&&!("colorscale"in r)){r.colorscale=r.scl;delete r.scl}if("reversescl"in r&&!("reversescale"in r)){r.reversescale=r.reversescl;delete r.reversescl}if(r.xaxis)r.xaxis=D(r.xaxis,"x");if(r.yaxis)r.yaxis=D(r.yaxis,"y");if(w(r,"gl3d")&&r.scene){r.scene=L.subplotsRegistry.gl3d.cleanId(r.scene)}if(!w(r,"pie-like")&&!w(r,"bar-like")){if(Array.isArray(r.textposition)){for(n=0;n<r.textposition.length;n++){r.textposition[n]=k(r.textposition[n])}}else if(r.textposition){r.textposition=k(r.textposition)}}var o=x.getModule(r);if(o&&o.colorbar){var s=o.colorbar.container;var l=s?r[s]:r;if(l&&l.colorscale){if(l.colorscale==="YIGnBu")l.colorscale="YlGnBu";if(l.colorscale==="YIOrRd")l.colorscale="YlOrRd"}}if(r.type==="surface"&&C.isPlainObject(r.contours)){var c=["x","y","z"];for(n=0;n<c.length;n++){var u=r.contours[c[n]];if(!C.isPlainObject(u))continue;if(u.highlightColor){u.highlightcolor=u.highlightColor;delete u.highlightColor}if(u.highlightWidth){u.highlightwidth=u.highlightWidth;delete u.highlightWidth}}}if(r.type==="candlestick"||r.type==="ohlc"){var f=(r.increasing||{}).showlegend!==false;var d=(r.decreasing||{}).showlegend!==false;var h=A(r.increasing);var p=A(r.decreasing);if(h!==false&&p!==false){var v=T(h,p,f,d);if(v)r.name=v}else if((h||p)&&!r.name){r.name=h||p}}if(Array.isArray(r.transforms)){var g=r.transforms;for(n=0;n<g.length;n++){var m=g[n];if(!C.isPlainObject(m))continue;switch(m.type){case"filter":if(m.filtersrc){m.target=m.filtersrc;delete m.filtersrc}if(m.calendar){if(!m.valuecalendar){m.valuecalendar=m.calendar}delete m.calendar}break;case"groupby":m.styles=m.styles||m.style;if(m.styles&&!Array.isArray(m.styles)){var _=m.styles;var y=Object.keys(_);m.styles=[];for(var b=0;b<y.length;b++){m.styles.push({target:y[b],value:_[y[b]]})}}break}}}if(I(r,"line"))delete r.line;if("marker"in r){if(I(r.marker,"line"))delete r.marker.line;if(I(r,"marker"))delete r.marker}E.clean(r);if(r.autobinx){delete r.autobinx;delete r.xbins}if(r.autobiny){delete r.autobiny;delete r.ybins}P(r);if(r.colorbar)P(r.colorbar);if(r.marker&&r.marker.colorbar)P(r.marker.colorbar);if(r.line&&r.line.colorbar)P(r.line.colorbar);if(r.aaxis)P(r.aaxis);if(r.baxis)P(r.baxis)}};function A(e){if(!C.isPlainObject(e))return false;var t=e.name;delete e.name;delete e.showlegend;return(typeof t==="string"||typeof t==="number")&&String(t)}function T(e,t,r,n){if(r&&!n)return e;if(n&&!r)return t;if(!e.trim())return t;if(!t.trim())return e;var a=Math.min(e.length,t.length);var i;for(i=0;i<a;i++){if(e.charAt(i)!==t.charAt(i))break}var o=e.substr(0,i);return o.trim()}function k(e){var t="middle";var r="center";if(typeof e==="string"){if(e.indexOf("top")!==-1)t="top";else if(e.indexOf("bottom")!==-1)t="bottom";if(e.indexOf("left")!==-1)r="left";else if(e.indexOf("right")!==-1)r="right"}return t+" "+r}function I(e,t){return t in e&&typeof e[t]==="object"&&Object.keys(e[t]).length===0}M.swapXYData=function(e){var t;C.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]);if(Array.isArray(e.z)&&Array.isArray(e.z[0])){if(e.transpose)delete e.transpose;else e.transpose=true}if(e.error_x&&e.error_y){var r=e.error_y;var n="copy_ystyle"in r?r.copy_ystyle:!(r.color||r.thickness||r.width);C.swapAttrs(e,["error_?.copy_ystyle"]);if(n){C.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}}if(typeof e.hoverinfo==="string"){var a=e.hoverinfo.split("+");for(t=0;t<a.length;t++){if(a[t]==="x")a[t]="y";else if(a[t]==="y")a[t]="x"}e.hoverinfo=a.join("+")}};M.coerceTraceIndices=function(e,t){if(u(t)){return[t]}else if(!Array.isArray(t)||!t.length){return e.data.map(function(e,t){return t})}else if(Array.isArray(t)){var r=[];for(var n=0;n<t.length;n++){if(C.isIndex(t[n],e.data.length)){r.push(t[n])}else{C.warn("trace index (",t[n],") is not a number or is out of bounds")}}return r}return t};M.manageArrayContainers=function(e,t,r){var n=e.obj;var a=e.parts;var i=a.length;var o=a[i-1];var s=u(o);if(s&&t===null){var l=a.slice(0,i-1).join(".");var c=C.nestedProperty(n,l).get();c.splice(o,1)}else if(s&&e.get()===undefined){if(e.get()===undefined)r[e.astr]=null;e.set(t)}else{e.set(t)}};var n=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function a(e){var t=e.search(n);if(t>0)return e.substr(0,t)}M.hasParent=function(e,t){var r=a(t);while(r){if(r in e)return true;r=a(r)}return false};var d=["x","y","z"];M.clearAxisTypes=function(e,t,r){for(var n=0;n<t.length;n++){var a=e._fullData[n];for(var i=0;i<3;i++){var o=f(e,a,d[i]);if(o&&o.type!=="log"){var s=o._name;var l=o._id.substr(1);if(l.substr(0,5)==="scene"){if(r[l]!==undefined)continue;s=l+"."+s}var c=s+".type";if(r[s]===undefined&&r[c]===undefined){C.nestedProperty(e.layout,c).set(null)}}}}}},{"../components/color":155,"../lib":285,"../plots/cartesian/axis_ids":335,"../plots/plots":366,"../registry":373,"fast-isnumeric":31,"gl-mat4/fromQuat":37}],315:[function(e,t,r){"use strict";var n=e("./plot_api");r._doPlot=n._doPlot;r.newPlot=n.newPlot;r.restyle=n.restyle;r.relayout=n.relayout;r.redraw=n.redraw;r.update=n.update;r._guiRestyle=n._guiRestyle;r._guiRelayout=n._guiRelayout;r._guiUpdate=n._guiUpdate;r._storeDirectGUIEdit=n._storeDirectGUIEdit;r.react=n.react;r.extendTraces=n.extendTraces;r.prependTraces=n.prependTraces;r.addTraces=n.addTraces;r.deleteTraces=n.deleteTraces;r.moveTraces=n.moveTraces;r.purge=n.purge;r.addFrames=n.addFrames;r.deleteFrames=n.deleteFrames;r.animate=n.animate;r.setPlotConfig=n.setPlotConfig;r.toImage=e("./to_image");r.validate=e("./validate");r.downloadImage=e("../snapshot/download");var a=e("./template_api");r.makeTemplate=a.makeTemplate;r.validateTemplate=a.validateTemplate},{"../snapshot/download":375,"./plot_api":317,"./template_api":322,"./to_image":323,"./validate":324}],316:[function(e,t,r){"use strict";var n=e("../lib/is_plain_object");var E=e("../lib/noop");var D=e("../lib/loggers");var O=e("../lib/search").sorterAsc;var P=e("../registry");r.containerArrayMatch=e("./container_array_match");var I=r.isAddVal=function e(t){return t==="add"||n(t)};var R=r.isRemoveVal=function e(t){return t===null||t==="remove"};r.applyContainerArrayChanges=function e(t,r,n,a,i){var o=r.astr;var s=P.getComponentMethod(o,"supplyLayoutDefaults");var l=P.getComponentMethod(o,"draw");var c=P.getComponentMethod(o,"drawOne");var u=a.replot||a.recalc||s===E||l===E;var f=t.layout;var d=t._fullLayout;if(n[""]){if(Object.keys(n).length>1){D.warn("Full array edits are incompatible with other edits",o)}var h=n[""][""];if(R(h))r.set(null);else if(Array.isArray(h))r.set(h);else{D.warn("Unrecognized full array edit value",o,h);return true}if(u)return false;s(f,d);l(t);return true}var p=Object.keys(n).map(Number).sort(O);var v=r.get();var g=v||[];var m=i(d,o).get();var _=[];var y=-1;var b=g.length;var x;var w;var A;var T;var k;var M;var S,C;for(x=0;x<p.length;x++){A=p[x];T=n[A];k=Object.keys(T);M=T[""],S=I(M);if(A<0||A>g.length-(S?0:1)){D.warn("index out of range",o,A);continue}if(M!==undefined){if(k.length>1){D.warn("Insertion & removal are incompatible with edits to the same index.",o,A)}if(R(M)){_.push(A)}else if(S){if(M==="add")M={};g.splice(A,0,M);if(m)m.splice(A,0,{})}else{D.warn("Unrecognized full object edit value",o,A,M)}if(y===-1)y=A}else{for(w=0;w<k.length;w++){C=o+"["+A+"].";i(g[A],k[w],C).set(T[k[w]])}}}for(x=_.length-1;x>=0;x--){g.splice(_[x],1);if(m)m.splice(_[x],1)}if(!g.length)r.set(null);else if(!v)r.set(g);if(u)return false;s(f,d);if(c!==E){var L;if(y===-1){L=p}else{b=Math.max(g.length,b);L=[];for(x=0;x<p.length;x++){A=p[x];if(A>=y)break;L.push(A)}for(x=y;x<b;x++){L.push(x)}}for(x=0;x<L.length;x++){c(t,L[x])}}else l(t);return true}},{"../lib/is_plain_object":286,"../lib/loggers":289,"../lib/noop":294,"../lib/search":304,"../registry":373,"./container_array_match":312}],317:[function(e,t,E){"use strict";var T=e("@plotly/d3");var h=e("fast-isnumeric");var f=e("has-hover");var Q=e("../lib");var K=Q.nestedProperty;var k=e("../lib/events");var A=e("../lib/queue");var ee=e("../registry");var te=e("./plot_schema");var X=e("../plots/plots");var re=e("../plots/cartesian/axes");var M=e("../components/drawing");var n=e("../components/color");var S=e("../plots/cartesian/graph_interact").initInteractions;var o=e("../constants/xmlns_namespaces");var r=e("../plots/cartesian/select").clearSelect;var d=e("./plot_config").dfltConfig;var ne=e("./manage_arrays");var ae=e("./helpers");var D=e("./subroutines");var ie=e("./edit_types");var oe=e("../plots/cartesian/constants").AX_NAME_PATTERN;var C=0;var L=5;function a(a,e,t,r){var n;a=Q.getGraphDiv(a);k.init(a);if(Q.isPlainObject(e)){var i=e;e=i.data;t=i.layout;r=i.config;n=i.frames}var o=k.triggerHandler(a,"plotly_beforeplot",[e,t,r]);if(o===false)return Promise.reject();if(!e&&!t&&!Q.isPlotDiv(a)){Q.warn("Calling _doPlot as if redrawing "+"but this container doesn't yet have a plot.",a)}function s(){if(n){return E.addFrames(a,n)}}P(a,r);if(!t)t={};T.select(a).classed("js-plotly-plot",true);M.makeTester();if(!Array.isArray(a._promises))a._promises=[];var l=(a.data||[]).length===0&&Array.isArray(e);if(Array.isArray(e)){ae.cleanData(e);if(l)a.data=e;else a.data.push.apply(a.data,e);a.empty=false}if(!a.layout||l){a.layout=ae.cleanLayout(t)}X.supplyDefaults(a);var c=a._fullLayout;var u=c._has("cartesian");c._replotting=true;if(l||c._shouldCreateBgLayer){Le(a);if(c._shouldCreateBgLayer){delete c._shouldCreateBgLayer}}M.initGradients(a);M.initPatterns(a);if(l)re.saveShowSpikeInitial(a);var f=!a.calcdata||a.calcdata.length!==(a._fullData||[]).length;if(f)X.doCalcdata(a);for(var d=0;d<a.calcdata.length;d++){a.calcdata[d][0].trace=a._fullData[d]}if(a._context.responsive){if(!a._responsiveChartHandler){a._responsiveChartHandler=function(){if(!Q.isHidden(a))X.resize(a)};window.addEventListener("resize",a._responsiveChartHandler)}}else{Q.clearResponsive(a)}var h=Q.extendFlat({},c._size);var p=0;function v(){var e=c._basePlotModules;for(var t=0;t<e.length;t++){if(e[t].drawFramework){e[t].drawFramework(a)}}if(!c._glcanvas&&c._has("gl")){c._glcanvas=c._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:true,pick:false},{key:"focusLayer",context:false,pick:false},{key:"pickLayer",context:false,pick:true}],function(e){return e.key});c._glcanvas.enter().append("canvas").attr("class",function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"})}if(c._glcanvas){c._glcanvas.attr("width",c.width).attr("height",c.height);var r=c._glcanvas.data()[0].regl;if(r){if(Math.floor(c.width)!==r._gl.drawingBufferWidth||Math.floor(c.height)!==r._gl.drawingBufferHeight){var n="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(p){Q.error(n)}else{Q.log(n+" Clearing graph and plotting again.");X.cleanPlot([],{},a._fullData,c);X.supplyDefaults(a);c=a._fullLayout;X.doCalcdata(a);p++;return v()}}}}if(c.modebar.orientation==="h"){c._modebardiv.style("height",null).style("width","100%")}else{c._modebardiv.style("width",null).style("height",c.height+"px")}return X.previousPromises(a)}function g(){X.clearAutoMarginIds(a);D.drawMarginPushers(a);re.allowAutoMargin(a);if(c._has("pie")){var e=a._fullData;for(var t=0;t<e.length;t++){var r=e[t];if(r.type==="pie"&&r.automargin){X.allowAutoMargin(a,"pie."+r.uid+".automargin")}}}X.doAutoMargin(a);return X.previousPromises(a)}function m(){if(!X.didMarginChange(h,c._size))return;return Q.syncOrAsync([g,D.layoutStyles],a)}function _(){if(!f){y();return}return Q.syncOrAsync([ee.getComponentMethod("shapes","calcAutorange"),ee.getComponentMethod("annotations","calcAutorange"),y],a)}function y(){if(a._transitioning)return;D.doAutoRangeAndConstraints(a);if(l)re.saveRangeInitial(a);ee.getComponentMethod("rangeslider","calcAutorange")(a)}function b(){return re.draw(a,l?"":"redraw")}var x=[X.previousPromises,s,v,g,m];if(u)x.push(_);x.push(D.layoutStyles);if(u){x.push(b,function e(t){if(t._fullLayout._insideTickLabelsAutorange){U(t,t._fullLayout._insideTickLabelsAutorange).then(function(){t._fullLayout._insideTickLabelsAutorange=undefined})}})}x.push(D.drawData,D.finalDraw,S,X.addLinks,X.rehover,X.redrag,X.doAutoMargin,w,X.previousPromises);function w(e){if(e._fullLayout._insideTickLabelsAutorange){if(l)re.saveRangeInitial(e,true)}}var A=Q.syncOrAsync(x,a);if(!A||!A.then)A=Promise.resolve();return A.then(function(){O(a);return a})}function O(e){var t=e._fullLayout;if(t._redrawFromAutoMarginCount){t._redrawFromAutoMarginCount--}else{e.emit("plotly_afterplot")}}function i(e){return Q.extendFlat(d,e)}function p(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){Q.error(e)}}function v(e,t){var r=n.combine(t,"white");p(e,r)}function P(e,t){if(!e._context){e._context=Q.extendDeep({},d);var r=T.select("base");e._context._baseUrl=r.size()&&r.attr("href")?window.location.href.split("#")[0]:""}var n=e._context;var a,i,o;if(t){i=Object.keys(t);for(a=0;a<i.length;a++){o=i[a];if(o==="editable"||o==="edits")continue;if(o in n){if(o==="setBackground"&&t[o]==="opaque"){n[o]=v}else{n[o]=t[o]}}}if(t.plot3dPixelRatio&&!n.plotGlPixelRatio){n.plotGlPixelRatio=n.plot3dPixelRatio}var s=t.editable;if(s!==undefined){n.editable=s;i=Object.keys(n.edits);for(a=0;a<i.length;a++){n.edits[i[a]]=s}}if(t.edits){i=Object.keys(t.edits);for(a=0;a<i.length;a++){o=i[a];if(o in n.edits){n.edits[o]=t.edits[o]}}}n._exportedPlot=t._exportedPlot}if(n.staticPlot){n.editable=false;n.edits={};n.autosizable=false;n.scrollZoom=false;n.doubleClick=false;n.showTips=false;n.showLink=false;n.displayModeBar=false}if(n.displayModeBar==="hover"&&!f){n.displayModeBar=true}if(n.setBackground==="transparent"||typeof n.setBackground!=="function"){n.setBackground=p}n._hasZeroHeight=n._hasZeroHeight||e.clientHeight===0;n._hasZeroWidth=n._hasZeroWidth||e.clientWidth===0;var l=n.scrollZoom;var c=n._scrollZoom={};if(l===true){c.cartesian=1;c.gl3d=1;c.geo=1;c.mapbox=1}else if(typeof l==="string"){var u=l.split("+");for(a=0;a<u.length;a++){c[u[a]]=1}}else if(l!==false){c.gl3d=1;c.geo=1;c.mapbox=1}}function s(e){e=Q.getGraphDiv(e);if(!Q.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e)}ae.cleanData(e.data);ae.cleanLayout(e.layout);e.calcdata=undefined;return E._doPlot(e).then(function(){e.emit("plotly_redraw");return e})}function l(e,t,r,n){e=Q.getGraphDiv(e);X.cleanPlot([],{},e._fullData||[],e._fullLayout||{});X.purge(e);return E._doPlot(e,t,r,n)}function g(e,t){var r=t+1;var n=[];var a;var i;for(a=0;a<e.length;a++){i=e[a];if(i<0){n.push(r+i)}else{n.push(i)}}return n}function u(e,t,r){var n,a;for(n=0;n<t.length;n++){a=t[n];if(a!==parseInt(a,10)){throw new Error("all values in "+r+" must be integers")}if(a>=e.data.length||a<-e.data.length){throw new Error(r+" must be valid indices for gd.data.")}if(t.indexOf(a,n+1)>-1||a>=0&&t.indexOf(-e.data.length+a)>-1||a<0&&t.indexOf(e.data.length+a)>-1){throw new Error("each index in "+r+" must be unique.")}}}function m(e,t,r){if(!Array.isArray(e.data)){throw new Error("gd.data must be an array.")}if(typeof t==="undefined"){throw new Error("currentIndices is a required argument.")}else if(!Array.isArray(t)){t=[t]}u(e,t,"currentIndices");if(typeof r!=="undefined"&&!Array.isArray(r)){r=[r]}if(typeof r!=="undefined"){u(e,r,"newIndices")}if(typeof r!=="undefined"&&t.length!==r.length){throw new Error("current and new indices must be of equal length.")}}function _(e,t,r){var n,a;if(!Array.isArray(e.data)){throw new Error("gd.data must be an array.")}if(typeof t==="undefined"){throw new Error("traces must be defined.")}if(!Array.isArray(t)){t=[t]}for(n=0;n<t.length;n++){a=t[n];if(typeof a!=="object"||(Array.isArray(a)||a===null)){throw new Error("all values in traces array must be non-array objects")}}if(typeof r!=="undefined"&&!Array.isArray(r)){r=[r]}if(typeof r!=="undefined"&&r.length!==t.length){throw new Error("if indices is specified, traces.length must equal indices.length")}}function y(e,t,r,n){var a=Q.isPlainObject(n);if(!Array.isArray(e.data)){throw new Error("gd.data must be an array")}if(!Q.isPlainObject(t)){throw new Error("update must be a key:value object")}if(typeof r==="undefined"){throw new Error("indices must be an integer or array of integers")}u(e,r,"indices");for(var i in t){if(!Array.isArray(t[i])||t[i].length!==r.length){throw new Error("attribute "+i+" must be an array of length equal to indices array length")}if(a&&(!(i in n)||!Array.isArray(n[i])||n[i].length!==t[i].length)){throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 "+"corrispondence with the keys and number of traces in the update object")}}}function b(e,t,r,n){var a=Q.isPlainObject(n);var i=[];var o,s,l,c,u;if(!Array.isArray(r))r=[r];r=g(r,e.data.length-1);for(var f in t){for(var d=0;d<r.length;d++){o=e.data[r[d]];l=K(o,f);s=l.get();c=t[f][d];if(!Q.isArrayOrTypedArray(c)){throw new Error("attribute: "+f+" index: "+d+" must be an array")}if(!Q.isArrayOrTypedArray(s)){throw new Error("cannot extend missing or non-array attribute: "+f)}if(s.constructor!==c.constructor){throw new Error("cannot extend array with an array of a different type: "+f)}u=a?n[f][d]:n;if(!h(u))u=-1;i.push({prop:l,target:s,insert:c,maxp:Math.floor(u)})}}return i}function c(e,t,r,n,a){y(e,t,r,n);var i=b(e,t,r,n);var o={};var s={};for(var l=0;l<i.length;l++){var c=i[l].prop;var u=i[l].maxp;var f=a(i[l].target,i[l].insert,u);c.set(f[0]);if(!Array.isArray(o[c.astr]))o[c.astr]=[];o[c.astr].push(f[1]);if(!Array.isArray(s[c.astr]))s[c.astr]=[];s[c.astr].push(i[l].target.length)}return{update:o,maxPoints:s}}function x(e,t){var r=new e.constructor(e.length+t.length);r.set(e);r.set(t,e.length);return r}function w(e,t,r,n){e=Q.getGraphDiv(e);function a(e,t,r){var n,a;if(Q.isTypedArray(e)){if(r<0){var i=new e.constructor(0);var o=x(e,t);if(r<0){n=o;a=i}else{n=i;a=o}}else{n=new e.constructor(r);a=new e.constructor(e.length+t.length-r);if(r===t.length){n.set(t);a.set(e)}else if(r<t.length){var s=t.length-r;n.set(t.subarray(s));a.set(e);a.set(t.subarray(0,s),e.length)}else{var l=r-t.length;var c=e.length-l;n.set(e.subarray(c));n.set(t,l);a.set(e.subarray(0,c))}}}else{n=e.concat(t);a=r>=0&&r<n.length?n.splice(0,n.length-r):[]}return[n,a]}var i=c(e,t,r,n,a);var o=E.redraw(e);var s=[e,i.update,r,i.maxPoints];A.add(e,E.prependTraces,s,w,arguments);return o}function I(e,t,r,n){e=Q.getGraphDiv(e);function a(e,t,r){var n,a;if(Q.isTypedArray(e)){if(r<=0){var i=new e.constructor(0);var o=x(t,e);if(r<0){n=o;a=i}else{n=i;a=o}}else{n=new e.constructor(r);a=new e.constructor(e.length+t.length-r);if(r===t.length){n.set(t);a.set(e)}else if(r<t.length){var s=t.length-r;n.set(t.subarray(0,s));a.set(t.subarray(s));a.set(e,s)}else{var l=r-t.length;n.set(t);n.set(e.subarray(0,l),t.length);a.set(e.subarray(l))}}}else{n=t.concat(e);a=r>=0&&r<n.length?n.splice(r,n.length):[]}return[n,a]}var i=c(e,t,r,n,a);var o=E.redraw(e);var s=[e,i.update,r,i.maxPoints];A.add(e,E.extendTraces,s,I,arguments);return o}function R(t,r,e){t=Q.getGraphDiv(t);var n=[];var a=E.deleteTraces;var i=R;var o=[t,n];var s=[t,r];var l;var c;_(t,r,e);if(!Array.isArray(r)){r=[r]}r=r.map(function(e){return Q.extendFlat({},e)});ae.cleanData(r);for(l=0;l<r.length;l++){t.data.push(r[l])}for(l=0;l<r.length;l++){n.push(-r.length+l)}if(typeof e==="undefined"){c=E.redraw(t);A.add(t,a,o,i,s);return c}if(!Array.isArray(e)){e=[e]}try{m(t,n,e)}catch(e){t.data.splice(t.data.length-r.length,r.length);throw e}A.startSequence(t);A.add(t,a,o,i,s);c=E.moveTraces(t,n,e);A.stopSequence(t);return c}function z(e,t){e=Q.getGraphDiv(e);var r=[];var n=E.addTraces;var a=z;var i=[e,r,t];var o=[e,t];var s;var l;if(typeof t==="undefined"){throw new Error("indices must be an integer or array of integers.")}else if(!Array.isArray(t)){t=[t]}u(e,t,"indices");t=g(t,e.data.length-1);t.sort(Q.sorterDes);for(s=0;s<t.length;s+=1){l=e.data.splice(t[s],1)[0];r.push(l)}var c=E.redraw(e);A.add(e,n,i,a,o);return c}function N(e,t,r){e=Q.getGraphDiv(e);var n=[];var a=[];var i=N;var o=N;var s=[e,r,t];var l=[e,t,r];var c;m(e,t,r);t=Array.isArray(t)?t:[t];if(typeof r==="undefined"){r=[];for(c=0;c<t.length;c++){r.push(-t.length+c)}}r=Array.isArray(r)?r:[r];t=g(t,e.data.length-1);r=g(r,e.data.length-1);for(c=0;c<e.data.length;c++){if(t.indexOf(c)===-1){n.push(e.data[c])}}for(c=0;c<t.length;c++){a.push({newIndex:r[c],trace:e.data[t[c]]})}a.sort(function(e,t){return e.newIndex-t.newIndex});for(c=0;c<a.length;c+=1){n.splice(a[c].newIndex,0,a[c].trace)}e.data=n;var u=E.redraw(e);A.add(e,i,s,o,l);return u}function F(e,t,r,n){e=Q.getGraphDiv(e);ae.clearPromiseQueue(e);var a={};if(typeof t==="string")a[t]=r;else if(Q.isPlainObject(t)){a=Q.extendFlat({},t);if(n===undefined)n=r}else{Q.warn("Restyle fail.",t,r,n);return Promise.reject()}if(Object.keys(a).length)e.changed=true;var i=ae.coerceTraceIndices(e,n);var o=H(e,a,i);var s=o.flags;if(s.calc)e.calcdata=undefined;if(s.clearAxisTypes)ae.clearAxisTypes(e,i,{});var l=[];if(s.fullReplot){l.push(E._doPlot)}else{l.push(X.previousPromises);X.supplyDefaults(e);if(s.markerSize){X.doCalcdata(e);q(l)}if(s.style)l.push(D.doTraceStyle);if(s.colorbars)l.push(D.doColorBars);l.push(O)}l.push(X.rehover,X.redrag);A.add(e,F,[e,o.undoit,o.traces],F,[e,o.redoit,o.traces]);var c=Q.syncOrAsync(l,e);if(!c||!c.then)c=Promise.resolve();return c.then(function(){e.emit("plotly_restyle",o.eventData);return e})}function se(e){if(e===undefined)return null;return e}function le(o,e){if(!e)return K;return function(e,r,n){var a=K(e,r);var i=a.set;a.set=function(e){var t=(n||"")+r;j(t,a.get(),e,o);i(e)};return a}}function j(e,t,r,n){if(Array.isArray(t)||Array.isArray(r)){var a=Array.isArray(t)?t:[];var i=Array.isArray(r)?r:[];var o=Math.max(a.length,i.length);for(var s=0;s<o;s++){j(e+"["+s+"]",a[s],i[s],n)}}else if(Q.isPlainObject(t)||Q.isPlainObject(r)){var l=Q.isPlainObject(t)?t:{};var c=Q.isPlainObject(r)?r:{};var u=Q.extendFlat({},l,c);for(var f in u){j(e+"."+f,l[f],c[f],n)}}else if(n[e]===undefined){n[e]=se(t)}}function B(e,t,r){for(var n in r){var a=K(e,n);j(n,a.get(),r[n],t)}}function H(o,s,l){var c=o._fullLayout;var n=o._fullData;var u=o.data;var f=c._guiEditing;var d=le(c._preGUI,f);var e=Q.extendDeepAll({},s);var t;ce(s);var r=ie.traceFlags();var a={};var h={};var i;function p(){return l.map(function(){return undefined})}function v(e){var t=re.id2name(e);if(i.indexOf(t)===-1)i.push(t)}function g(e){return"LAYOUT"+e+".autorange"}function m(e){return"LAYOUT"+e+".range"}function _(e){for(var t=e;t<n.length;t++){if(n[t]._input===u[e])return n[t]}}function y(e,t,r){if(Array.isArray(e)){e.forEach(function(e){y(e,t,r)});return}if(e in s||ae.hasParent(s,e))return;var n;if(e.substr(0,6)==="LAYOUT"){n=d(o.layout,e.replace("LAYOUT",""))}else{var a=l[r];var i=c._tracePreGUI[_(a)._fullInput.uid];n=le(i,f)(u[a],e)}if(!(e in h)){h[e]=p()}if(h[e][r]===undefined){h[e][r]=se(n.get())}if(t!==undefined){n.set(t)}}function b(t){return function(e){return n[e][t]}}function x(r){return function(e,t){return e===false?n[l[t]][r]:null}}for(var w in s){if(ae.hasParent(s,w)){throw new Error("cannot set "+w+" and a parent attribute simultaneously")}var A=s[w];var T;var k;var M;var S;var C;var L;if(w==="autobinx"||w==="autobiny"){w=w.charAt(w.length-1)+"bins";if(Array.isArray(A))A=A.map(x(w));else if(A===false)A=l.map(b(w));else A=null}a[w]=A;if(w.substr(0,6)==="LAYOUT"){M=d(o.layout,w.replace("LAYOUT",""));h[w]=[se(M.get())];M.set(Array.isArray(A)?A[0]:A);r.calc=true;continue}h[w]=p();for(t=0;t<l.length;t++){T=u[l[t]];k=_(l[t]);var E=c._tracePreGUI[k._fullInput.uid];M=le(E,f)(T,w);S=M.get();C=Array.isArray(A)?A[t%A.length]:A;if(C===undefined)continue;var D=M.parts[M.parts.length-1];var O=w.substr(0,w.length-D.length-1);var P=O?O+".":"";var I=O?K(k,O).get():k;L=te.getTraceValObject(k,M.parts);if(L&&L.impliedEdits&&C!==null){for(var R in L.impliedEdits){y(Q.relativeAttr(w,R),L.impliedEdits[R],t)}}else if((D==="thicknessmode"||D==="lenmode")&&S!==C&&(C==="fraction"||C==="pixels")&&I){var z=c._size;var N=I.orient;var F=N==="top"||N==="bottom";if(D==="thicknessmode"){var j=F?z.h:z.w;y(P+"thickness",I.thickness*(C==="fraction"?1/j:j),t)}else{var B=F?z.w:z.h;y(P+"len",I.len*(C==="fraction"?1/B:B),t)}}else if(w==="type"&&(C==="pie"!==(S==="pie")||C==="funnelarea"!==(S==="funnelarea"))){var H="x";var U="y";if((C==="bar"||S==="bar")&&T.orientation==="h"){H="y";U="x"}Q.swapAttrs(T,["?","?src"],"labels",H);Q.swapAttrs(T,["d?","?0"],"label",H);Q.swapAttrs(T,["?","?src"],"values",U);if(S==="pie"||S==="funnelarea"){K(T,"marker.color").set(K(T,"marker.colors").get());c._pielayer.selectAll("g.trace").remove()}else if(ee.traceIs(T,"cartesian")){K(T,"marker.colors").set(K(T,"marker.color").get())}}h[w][t]=se(S);var V=["swapxy","swapxyaxes","orientation","orientationaxes"];if(V.indexOf(w)!==-1){if(w==="orientation"){M.set(C);var q=T.x&&!T.y?"h":"v";if((M.get()||q)===k.orientation){continue}}else if(w==="orientationaxes"){T.orientation={v:"h",h:"v"}[k.orientation]}ae.swapXYData(T);r.calc=r.clearAxisTypes=true}else if(X.dataArrayContainers.indexOf(M.parts[0])!==-1){ae.manageArrayContainers(M,C,h);r.calc=true}else{if(L){if(L.arrayOk&&!ee.traceIs(k,"regl")&&(Q.isArrayOrTypedArray(C)||Q.isArrayOrTypedArray(S))){r.calc=true}else ie.update(r,L)}else{r.calc=true}M.set(C)}}if(["swapxyaxes","orientationaxes"].indexOf(w)!==-1){re.swap(o,l)}if(w==="orientationaxes"){var Y=K(o.layout,"hovermode");var G=Y.get();if(G==="x"){Y.set("y")}else if(G==="y"){Y.set("x")}else if(G==="x unified"){Y.set("y unified")}else if(G==="y unified"){Y.set("x unified")}}if(["orientation","type"].indexOf(w)!==-1){i=[];for(t=0;t<l.length;t++){var W=u[l[t]];if(ee.traceIs(W,"cartesian")){v(W.xaxis||"x");v(W.yaxis||"y")}}y(i.map(g),true,0);y(i.map(m),[0,1],0)}}if(r.calc||r.plot){r.fullReplot=true}return{flags:r,undoit:h,redoit:a,traces:l,eventData:Q.extendDeepNoArrays([],[e,l])}}function ce(r){var e=Q.counterRegex("axis",".title",false,false);var t=/colorbar\.title$/;var n=Object.keys(r);var a,i,o;for(a=0;a<n.length;a++){i=n[a];o=r[i];if((i==="title"||e.test(i)||t.test(i))&&(typeof o==="string"||typeof o==="number")){s(i,i.replace("title","title.text"))}else if(i.indexOf("titlefont")>-1){s(i,i.replace("titlefont","title.font"))}else if(i.indexOf("titleposition")>-1){s(i,i.replace("titleposition","title.position"))}else if(i.indexOf("titleside")>-1){s(i,i.replace("titleside","title.side"))}else if(i.indexOf("titleoffset")>-1){s(i,i.replace("titleoffset","title.offset"))}}function s(e,t){r[t]=r[e];delete r[e]}}function U(e,t,r){e=Q.getGraphDiv(e);ae.clearPromiseQueue(e);var n={};if(typeof t==="string"){n[t]=r}else if(Q.isPlainObject(t)){n=Q.extendFlat({},t)}else{Q.warn("Relayout fail.",t,r);return Promise.reject()}if(Object.keys(n).length)e.changed=true;var a=Y(e,n);var i=a.flags;if(i.calc)e.calcdata=undefined;var o=[X.previousPromises];if(i.layoutReplot){o.push(D.layoutReplot)}else if(Object.keys(n).length){V(e,i,a)||X.supplyDefaults(e);if(i.legend)o.push(D.doLegend);if(i.layoutstyle)o.push(D.layoutStyles);if(i.axrange)q(o,a.rangesAltered);if(i.ticks)o.push(D.doTicksRelayout);if(i.modebar)o.push(D.doModeBar);if(i.camera)o.push(D.doCamera);if(i.colorbars)o.push(D.doColorBars);o.push(O)}o.push(X.rehover,X.redrag);A.add(e,U,[e,a.undoit],U,[e,a.redoit]);var s=Q.syncOrAsync(o,e);if(!s||!s.then)s=Promise.resolve(e);return s.then(function(){e.emit("plotly_relayout",a.eventData);return e})}function V(e,t,r){var n=e._fullLayout;if(!t.axrange)return false;for(var a in t){if(a!=="axrange"&&t[a])return false}for(var i in r.rangesAltered){var o=re.id2name(i);var s=e.layout[o];var l=n[o];l.autorange=s.autorange;if(s.range){l.range=s.range.slice()}l.cleanRange();if(l._matchGroup){for(var c in l._matchGroup){if(c!==i){var u=n[re.id2name(c)];u.autorange=l.autorange;u.range=l.range.slice();u._input.range=l.range.slice()}}}}return true}function q(e,o){var t=o?function(e){var t=[];var r=true;for(var n in o){var a=re.getFromId(e,n);t.push(n);if((a.ticklabelposition||"").indexOf("inside")!==-1){if(a._anchorAxis){t.push(a._anchorAxis._id)}}if(a._matchGroup){for(var i in a._matchGroup){if(!o[i]){t.push(i)}}}if(a.automargin)r=false}return re.draw(e,t,{skipTitle:r})}:function(e){return re.draw(e,"redraw")};e.push(r,D.doAutoRangeAndConstraints,t,D.drawData,D.finalDraw)}var ue=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/;var fe=/^[xyz]axis[0-9]*\.autorange$/;var de=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function Y(e,n){var a=e.layout;var t=e._fullLayout;var r=t._guiEditing;var i=le(t._preGUI,r);var o=Object.keys(n);var s=re.list(e);var l=Q.extendDeepAll({},n);var c={};var u,f,d;ce(n);o=Object.keys(n);for(f=0;f<o.length;f++){if(o[f].indexOf("allaxes")===0){for(d=0;d<s.length;d++){var h=s[d]._id.substr(1);var p=h.indexOf("scene")!==-1?h+".":"";var v=o[f].replace("allaxes",p+s[d]._name);if(!n[v])n[v]=n[o[f]]}delete n[o[f]]}}var g=ie.layoutFlags();var m={};var _={};function y(e,t){if(Array.isArray(e)){e.forEach(function(e){y(e,t)});return}if(e in n||ae.hasParent(n,e))return;var r=i(a,e);if(!(e in _)){_[e]=se(r.get())}if(t!==undefined)r.set(t)}var b={};var x;function w(e){var t=re.name2id(e.split(".")[0]);b[t]=1;return t}for(var A in n){if(ae.hasParent(n,A)){throw new Error("cannot set "+A+" and a parent attribute simultaneously")}var T=i(a,A);var k=n[A];var M=T.parts.length;var S=M-1;while(S>0&&typeof T.parts[S]!=="string")S--;var C=T.parts[S];var L=T.parts[S-1]+"."+C;var E=T.parts.slice(0,S).join(".");var D=K(e.layout,E).get();var O=K(t,E).get();var P=T.get();if(k===undefined)continue;m[A]=k;_[A]=C==="reverse"?k:se(P);var I=te.getLayoutValObject(t,T.parts);if(I&&I.impliedEdits&&k!==null){for(var R in I.impliedEdits){y(Q.relativeAttr(A,R),I.impliedEdits[R])}}if(["width","height"].indexOf(A)!==-1){if(k){y("autosize",null);var z=A==="height"?"width":"height";y(z,t[z])}else{t[A]=e._initialAutoSize[A]}}else if(A==="autosize"){y("width",k?null:t.width);y("height",k?null:t.height)}else if(L.match(ue)){w(L);K(t,E+"._inputRange").set(null)}else if(L.match(fe)){w(L);K(t,E+"._inputRange").set(null);var N=K(t,E).get();if(N._inputDomain){N._input.domain=N._inputDomain.slice()}}else if(L.match(de)){K(t,E+"._inputDomain").set(null)}if(C==="type"){x=D;var F=O.type==="linear"&&k==="log";var j=O.type==="log"&&k==="linear";if(F||j){if(!x||!x.range){y(E+".autorange",true)}else if(!O.autorange){var B=x.range[0];var H=x.range[1];if(F){if(B<=0&&H<=0){y(E+".autorange",true)}if(B<=0)B=H/1e6;else if(H<=0)H=B/1e6;y(E+".range[0]",Math.log(B)/Math.LN10);y(E+".range[1]",Math.log(H)/Math.LN10)}else{y(E+".range[0]",Math.pow(10,B));y(E+".range[1]",Math.pow(10,H))}}else if(F){x.range=x.range[1]>x.range[0]?[1,2]:[2,1]}if(Array.isArray(t._subplots.polar)&&t._subplots.polar.length&&t[T.parts[0]]&&T.parts[1]==="radialaxis"){delete t[T.parts[0]]._subplot.viewInitial["radialaxis.range"]}ee.getComponentMethod("annotations","convertCoords")(e,O,k,y);ee.getComponentMethod("images","convertCoords")(e,O,k,y)}else{y(E+".autorange",true);y(E+".range",null)}K(t,E+"._inputRange").set(null)}else if(C.match(oe)){var U=K(t,A).get();var V=(k||{}).type;if(!V||V==="-")V="linear";ee.getComponentMethod("annotations","convertCoords")(e,U,V,y);ee.getComponentMethod("images","convertCoords")(e,U,V,y)}var q=ne.containerArrayMatch(A);if(q){u=q.array;f=q.index;var Y=q.property;var G=I||{editType:"calc"};if(f!==""&&Y===""){if(ne.isAddVal(k)){_[A]=null}else if(ne.isRemoveVal(k)){_[A]=(K(a,u).get()||[])[f]}else{Q.warn("unrecognized full object value",n)}}ie.update(g,G);if(!c[u])c[u]={};var W=c[u][f];if(!W)W=c[u][f]={};W[Y]=k;delete n[A]}else if(C==="reverse"){if(D.range)D.range.reverse();else{y(E+".autorange",true);D.range=[1,0]}if(O.autorange)g.calc=true;else g.plot=true}else{if(t._has("scatter-like")&&t._has("regl")&&(A==="dragmode"&&(k==="lasso"||k==="select")&&!(P==="lasso"||P==="select"))){g.plot=true}else if(t._has("gl2d")){g.plot=true}else if(I)ie.update(g,I);else g.calc=true;T.set(k)}}for(u in c){var X=ne.applyContainerArrayChanges(e,i(a,u),c[u],g,i);if(!X)g.plot=true}for(var Z in b){x=re.getFromId(e,Z);var J=x&&x._constraintGroup;if(J){g.calc=true;for(var $ in J){if(!b[$]){re.getFromId(e,$)._constraintShrinkable=true}}}}if(he(e)||n.height||n.width)g.plot=true;if(g.plot||g.calc){g.layoutReplot=true}return{flags:g,rangesAltered:b,undoit:_,redoit:m,eventData:l}}function he(e){var t=e._fullLayout;var r=t.width;var n=t.height;if(e.layout.autosize)X.plotAutoSize(e,e.layout,t);return t.width!==r||t.height!==n}function G(e,t,r,n){e=Q.getGraphDiv(e);ae.clearPromiseQueue(e);if(!Q.isPlainObject(t))t={};if(!Q.isPlainObject(r))r={};if(Object.keys(t).length)e.changed=true;if(Object.keys(r).length)e.changed=true;var a=ae.coerceTraceIndices(e,n);var i=H(e,Q.extendFlat({},t),a);var o=i.flags;var s=Y(e,Q.extendFlat({},r));var l=s.flags;if(o.calc||l.calc)e.calcdata=undefined;if(o.clearAxisTypes)ae.clearAxisTypes(e,a,r);var c=[];if(l.layoutReplot){c.push(D.layoutReplot)}else if(o.fullReplot){c.push(E._doPlot)}else{c.push(X.previousPromises);V(e,l,s)||X.supplyDefaults(e);if(o.style)c.push(D.doTraceStyle);if(o.colorbars||l.colorbars)c.push(D.doColorBars);if(l.legend)c.push(D.doLegend);if(l.layoutstyle)c.push(D.layoutStyles);if(l.axrange)q(c,s.rangesAltered);if(l.ticks)c.push(D.doTicksRelayout);if(l.modebar)c.push(D.doModeBar);if(l.camera)c.push(D.doCamera);c.push(O)}c.push(X.rehover,X.redrag);A.add(e,G,[e,i.undoit,s.undoit,i.traces],G,[e,i.redoit,s.redoit,i.traces]);var u=Q.syncOrAsync(c,e);if(!u||!u.then)u=Promise.resolve(e);return u.then(function(){e.emit("plotly_update",{data:i.eventData,layout:s.eventData});return e})}function W(n){return function e(t){t._fullLayout._guiEditing=true;var r=n.apply(null,arguments);t._fullLayout._guiEditing=false;return r}}var Z=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}];var J=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];var a=e.match(n.pattern);if(a){return{head:a[1],attr:n.attr}}}}function pe(e,t){var r=K(t,e).get();if(r!==undefined)return r;var n=e.split(".");n.pop();while(n.length>1){n.pop();r=K(t,n.join(".")+".uirevision").get();if(r!==undefined)return r}return t.uirevision}function ve(e,t){for(var r=0;r<t.length;r++){if(t[r]._fullInput.uid===e)return r}return-1}function ge(e,t,r){for(var n=0;n<t.length;n++){if(t[n].uid===e)return n}return!t[r]||t[r].uid?-1:r}function me(e,t){var r=Q.isPlainObject(e);var n=Array.isArray(e);if(r||n){return(r&&Q.isPlainObject(t)||n&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t)}return e===t}function _e(e,t,r,n){var a=n._preGUI;var i,o,s,l,c,u,f,d;var h=[];var p={};for(i in a){c=$(i,Z);if(c){o=c.attr||c.head+".uirevision";s=K(n,o).get();l=s&&pe(o,t);if(l&&l===s){u=a[i];if(u===null)u=undefined;f=K(t,i);d=f.get();if(me(d,u)){if(d===undefined&&i.substr(i.length-9)==="autorange"){h.push(i.substr(0,i.length-10))}f.set(se(K(n,i).get()));continue}}}else{Q.warn("unrecognized GUI edit: "+i)}delete a[i];if(i.substr(i.length-8,6)==="range["){p[i.substr(0,i.length-9)]=1}}for(var v=0;v<h.length;v++){var g=h[v];if(p[g]){var m=K(t,g).get();if(m)delete m.autorange}}var _=n._tracePreGUI;for(var y in _){var b=_[y];var x=null;var w;for(i in b){if(!x){var A=ve(y,r);if(A<0){delete _[y];break}var T=r[A];w=T._fullInput;var k=ge(y,e,w.index);if(k<0){delete _[y];break}x=e[k]}c=$(i,J);if(c){if(c.attr){s=K(n,c.attr).get();l=s&&pe(c.attr,t)}else{s=w.uirevision;l=x.uirevision;if(l===undefined)l=t.uirevision}if(l&&l===s){u=b[i];if(u===null)u=undefined;f=K(x,i);d=f.get();if(me(d,u)){f.set(se(K(w,i).get()));continue}}}else{Q.warn("unrecognized GUI edit: "+i+" in trace uid "+y)}delete b[i]}}}function ye(e,t,r,n){var a,i;function o(){return E.addFrames(e,a)}e=Q.getGraphDiv(e);ae.clearPromiseQueue(e);var s=e._fullData;var l=e._fullLayout;if(!Q.isPlotDiv(e)||!s||!l){i=E.newPlot(e,t,r,n)}else{if(Q.isPlainObject(t)){var c=t;t=c.data;r=c.layout;n=c.config;a=c.frames}var u=false;if(n){var f=Q.extendDeep({},e._context);e._context=undefined;P(e,n);u=Ae(f,e._context)}e.data=t||[];ae.cleanData(e.data);e.layout=r||{};ae.cleanLayout(e.layout);_e(e.data,e.layout,s,l);X.supplyDefaults(e,{skipUpdateCalc:true});var d=e._fullData;var h=e._fullLayout;var p=h.datarevision===undefined;var v=h.transition;var g=xe(e,l,h,p,v);var m=g.newDataRevision;var _=be(e,s,d,p,v,m);if(he(e))g.layoutReplot=true;if(_.calc||g.calc){e.calcdata=undefined;var y=Object.getOwnPropertyNames(h);for(var b=0;b<y.length;b++){var x=y[b];var w=x.substring(0,5);if(w==="xaxis"||w==="yaxis"){var A=h[x]._emptyCategories;if(A)A()}}}else{X.supplyDefaultsUpdateCalc(e.calcdata,d)}var T=[];if(a){e._transitionData={};X.createTransitionData(e);T.push(o)}if(h.transition&&!u&&(_.anim||g.anim)){if(g.ticks)T.push(D.doTicksRelayout);X.doCalcdata(e);D.doAutoRangeAndConstraints(e);T.push(function(){return X.transitionFromReact(e,_,g,l)})}else if(_.fullReplot||g.layoutReplot||u){e._fullLayout._skipDefaults=true;T.push(E._doPlot)}else{for(var k in g.arrays){var M=g.arrays[k];if(M.length){var S=ee.getComponentMethod(k,"drawOne");if(S!==Q.noop){for(var C=0;C<M.length;C++){S(e,M[C])}}else{var L=ee.getComponentMethod(k,"draw");if(L===Q.noop){throw new Error("cannot draw components: "+k)}L(e)}}}T.push(X.previousPromises);if(_.style)T.push(D.doTraceStyle);if(_.colorbars||g.colorbars)T.push(D.doColorBars);if(g.legend)T.push(D.doLegend);if(g.layoutstyle)T.push(D.layoutStyles);if(g.axrange)q(T);if(g.ticks)T.push(D.doTicksRelayout);if(g.modebar)T.push(D.doModeBar);if(g.camera)T.push(D.doCamera);T.push(O)}T.push(X.rehover,X.redrag);i=Q.syncOrAsync(T,e);if(!i||!i.then)i=Promise.resolve(e)}return i.then(function(){e.emit("plotly_react",{data:t,layout:r});return e})}function be(e,t,r,n,a,i){var o=t.length===r.length;if(!a&&!o){return{fullReplot:true,calc:true}}var s=ie.traceFlags();s.arrays={};s.nChanges=0;s.nChangesAnim=0;var l,c;function u(e){var t=te.getTraceValObject(c,e);if(!c._module.animatable&&t.anim){t.anim=false}return t}var f={getValObject:u,flags:s,immutable:n,transition:a,newDataRevision:i,gd:e};var d={};for(l=0;l<t.length;l++){if(r[l]){c=r[l]._fullInput;if(X.hasMakesDataTransform(c))c=r[l];if(d[c.uid])continue;d[c.uid]=1;we(t[l]._fullInput,c,[],f)}}if(s.calc||s.plot){s.fullReplot=true}if(a&&s.nChanges&&s.nChangesAnim){s.anim=s.nChanges===s.nChangesAnim&&o?"all":"some"}return s}function xe(e,t,r,n,a){var i=ie.layoutFlags();i.arrays={};i.rangesAltered={};i.nChanges=0;i.nChangesAnim=0;function o(e){return te.getLayoutValObject(r,e)}var s={getValObject:o,flags:i,immutable:n,transition:a,gd:e};we(t,r,[],s);if(i.plot||i.calc){i.layoutReplot=true}if(a&&i.nChanges&&i.nChangesAnim){i.anim=i.nChanges===i.nChangesAnim?"all":"some"}return i}function we(e,t,r,n){var a,i,o;var s=n.getValObject;var l=n.flags;var c=n.immutable;var u=n.inArray;var f=n.arrayIndex;function d(){var e=a.editType;if(u&&e.indexOf("arraydraw")!==-1){Q.pushUnique(l.arrays[u],f);return}ie.update(l,a);if(e!=="none"){l.nChanges++}if(n.transition&&a.anim){l.nChangesAnim++}if(ue.test(o)||fe.test(o)){l.rangesAltered[r[0]]=1}if(de.test(o)){K(t,"_inputDomain").set(null)}if(i==="datarevision"){l.newDataRevision=1}}function h(e){return e.valType==="data_array"||e.arrayOk}for(i in e){if(l.calc&&!n.transition)return;var p=e[i];var v=t[i];var g=r.concat(i);o=g.join(".");if(i.charAt(0)==="_"||typeof p==="function"||p===v)continue;if((i==="tick0"||i==="dtick")&&r[0]!=="geo"){var m=t.tickmode;if(m==="auto"||m==="array"||!m)continue}if(i==="range"&&t.autorange)continue;if((i==="zmin"||i==="zmax")&&t.type==="contourcarpet")continue;a=s(g);if(!a)continue;if(a._compareAsJSON&&JSON.stringify(p)===JSON.stringify(v))continue;var _=a.valType;var y;var b=h(a);var x=Array.isArray(p);var w=Array.isArray(v);if(x&&w){var A="_input_"+i;var T=e[A];var k=t[A];if(Array.isArray(T)&&T===k)continue}if(v===undefined){if(b&&x)l.calc=true;else d()}else if(a._isLinkedToArray){var M=[];var S=false;if(!u)l.arrays[i]=M;var C=Math.min(p.length,v.length);var L=Math.max(p.length,v.length);if(C!==L){if(a.editType==="arraydraw"){S=true}else{d();continue}}for(y=0;y<C;y++){we(p[y],v[y],g.concat(y),Q.extendFlat({inArray:i,arrayIndex:y},n))}if(S){for(y=C;y<L;y++){M.push(y)}}}else if(!_&&Q.isPlainObject(p)){we(p,v,g,n)}else if(b){if(x&&w){if(c){l.calc=true}if(c||n.newDataRevision){d()}}else if(x!==w){l.calc=true}else d()}else if(x&&w){if(p.length!==v.length||String(p)!==String(v)){d()}}else{d()}}for(i in t){if(!(i in e||i.charAt(0)==="_"||typeof t[i]==="function")){a=s(r.concat(i));if(h(a)&&Array.isArray(t[i])){l.calc=true;return}else d()}}}function Ae(e,t){var r;for(r in e){if(r.charAt(0)==="_")continue;var n=e[r];var a=t[r];if(n!==a){if(Q.isPlainObject(n)&&Q.isPlainObject(a)){if(Ae(n,a)){return true}}else if(Array.isArray(n)&&Array.isArray(a)){if(n.length!==a.length){return true}for(var i=0;i<n.length;i++){if(n[i]!==a[i]){if(Q.isPlainObject(n[i])&&Q.isPlainObject(a[i])){if(Ae(n[i],a[i])){return true}}else{return true}}}}else{return true}}}}function Te(y,b,x){y=Q.getGraphDiv(y);if(!Q.isPlotDiv(y)){throw new Error("This element is not a Plotly plot: "+y+". It's likely that you've failed "+"to create a plot before animating it. For more details, see "+"https://plotly.com/javascript/animations/")}var w=y._transitionData;if(!w._frameQueue){w._frameQueue=[]}x=X.supplyAnimationDefaults(x);var A=x.transition;var t=x.frame;if(w._frameWaitingCnt===undefined){w._frameWaitingCnt=0}function T(e){if(Array.isArray(A)){if(e>=A.length){return A[0]}else{return A[e]}}else{return A}}function k(e){if(Array.isArray(t)){if(e>=t.length){return t[0]}else{return t[e]}}else{return t}}function M(e,t){var r=0;return function(){if(e&&++r===t){return e()}}}return new Promise(function(o,s){function e(){if(w._frameQueue.length===0){return}while(w._frameQueue.length){var e=w._frameQueue.pop();if(e.onInterrupt){e.onInterrupt()}}y.emit("plotly_animationinterrupted",[])}function t(e){if(e.length===0)return;for(var t=0;t<e.length;t++){var r;if(e[t].type==="byname"){r=X.computeFrame(y,e[t].name)}else{r=e[t].data}var n=k(t);var a=T(t);a.duration=Math.min(a.duration,n.duration);var i={frame:r,name:e[t].name,frameOpts:n,transitionOpts:a};if(t===e.length-1){i.onComplete=M(o,2);i.onInterrupt=s}w._frameQueue.push(i)}if(x.mode==="immediate"){w._lastFrameAt=-Infinity}if(!w._animationRaf){l()}}function r(){y.emit("plotly_animated");window.cancelAnimationFrame(w._animationRaf);w._animationRaf=null}function n(){if(w._currentFrame&&w._currentFrame.onComplete){w._currentFrame.onComplete()}var e=w._currentFrame=w._frameQueue.shift();if(e){var t=e.name?e.name.toString():null;y._fullLayout._currentFrame=t;w._lastFrameAt=Date.now();w._timeToNext=e.frameOpts.duration;X.transition(y,e.frame.data,e.frame.layout,ae.coerceTraceIndices(y,e.frame.traces),e.frameOpts,e.transitionOpts).then(function(){if(e.onComplete){e.onComplete()}});y.emit("plotly_animatingframe",{name:t,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})}else{r()}}function l(){y.emit("plotly_animating");w._lastFrameAt=-Infinity;w._timeToNext=0;w._runningTransitions=0;w._currentFrame=null;var e=function(){w._animationRaf=window.requestAnimationFrame(e);if(Date.now()-w._lastFrameAt>w._timeToNext){n()}};e()}var a=0;function i(e){if(Array.isArray(A)){if(a>=A.length){e.transitionOpts=A[a]}else{e.transitionOpts=A[0]}}else{e.transitionOpts=A}a++;return e}var c,u;var f=[];var d=b===undefined||b===null;var h=Array.isArray(b);var p=!d&&!h&&Q.isPlainObject(b);if(p){f.push({type:"object",data:i(Q.extendFlat({},b))})}else if(d||["string","number"].indexOf(typeof b)!==-1){for(c=0;c<w._frames.length;c++){u=w._frames[c];if(!u)continue;if(d||String(u.group)===String(b)){f.push({type:"byname",name:String(u.name),data:i({name:u.name})})}}}else if(h){for(c=0;c<b.length;c++){var v=b[c];if(["number","string"].indexOf(typeof v)!==-1){v=String(v);f.push({type:"byname",name:v,data:i({name:v})})}else if(Q.isPlainObject(v)){f.push({type:"object",data:i(Q.extendFlat({},v))})}}}for(c=0;c<f.length;c++){u=f[c];if(u.type==="byname"&&!w._frameHash[u.data.name]){Q.warn('animate failure: frame not found: "'+u.data.name+'"');s();return}}if(["next","immediate"].indexOf(x.mode)!==-1){e()}if(x.direction==="reverse"){f.reverse()}var g=y._fullLayout._currentFrame;if(g&&x.fromcurrent){var m=-1;for(c=0;c<f.length;c++){u=f[c];if(u.type==="byname"&&u.name===g){m=c;break}}if(m>0&&m<f.length-1){var _=[];for(c=0;c<f.length;c++){u=f[c];if(f[c].type!=="byname"||c>m){_.push(u)}}f=_}}if(f.length>0){t(f)}else{y.emit("plotly_animated");o()}})}function ke(e,t,r){e=Q.getGraphDiv(e);if(t===null||t===undefined){return Promise.resolve()}if(!Q.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed "+"to create a plot before adding frames. For more details, see "+"https://plotly.com/javascript/animations/")}var n,a,i,o;var s=e._transitionData._frames;var l=e._transitionData._frameHash;if(!Array.isArray(t)){throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t)}var c=s.length+t.length*2;var u=[];var f={};for(n=t.length-1;n>=0;n--){if(!Q.isPlainObject(t[n]))continue;var d=t[n].name;var h=(l[d]||f[d]||{}).name;var p=t[n].name;var v=l[h]||f[h];if(h&&p&&typeof p==="number"&&v&&C<L){C++;Q.warn('addFrames: overwriting frame "'+(l[h]||f[h]).name+'" with a frame whose name of type "number" also equates to "'+h+'". This is valid but may potentially lead to unexpected '+"behavior since all plotly.js frame names are stored internally "+"as strings.");if(C===L){Q.warn("addFrames: This API call has yielded too many of these warnings. "+"For the rest of this call, further warnings about numeric frame "+"names will be suppressed.")}}f[d]={name:d};u.push({frame:X.supplyFrameDefaults(t[n]),index:r&&r[n]!==undefined&&r[n]!==null?r[n]:c+n})}u.sort(function(e,t){if(e.index>t.index)return-1;if(e.index<t.index)return 1;return 0});var g=[];var m=[];var _=s.length;for(n=u.length-1;n>=0;n--){a=u[n].frame;if(typeof a.name==="number"){Q.warn("Warning: addFrames accepts frames with numeric names, but the numbers are"+"implicitly cast to strings")}if(!a.name){while(l[a.name="frame "+e._transitionData._counter++]);}if(l[a.name]){for(i=0;i<s.length;i++){if((s[i]||{}).name===a.name)break}g.push({type:"replace",index:i,value:a});m.unshift({type:"replace",index:i,value:s[i]})}else{o=Math.max(0,Math.min(u[n].index,_));g.push({type:"insert",index:o,value:a});m.unshift({type:"delete",index:o});_++}}var y=X.modifyFrames;var b=X.modifyFrames;var x=[e,m];var w=[e,g];if(A)A.add(e,y,x,b,w);return X.modifyFrames(e,g)}function Me(e,t){e=Q.getGraphDiv(e);if(!Q.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e)}var r,n;var a=e._transitionData._frames;var i=[];var o=[];if(!t){t=[];for(r=0;r<a.length;r++){t.push(r)}}t=t.slice();t.sort();for(r=t.length-1;r>=0;r--){n=t[r];i.push({type:"delete",index:n});o.unshift({type:"insert",index:n,value:a[n]})}var s=X.modifyFrames;var l=X.modifyFrames;var c=[e,o];var u=[e,i];if(A)A.add(e,s,c,l,u);return X.modifyFrames(e,i)}function Se(e){e=Q.getGraphDiv(e);var t=e._fullLayout||{};var r=e._fullData||[];X.cleanPlot([],{},r,t);X.purge(e);k.purge(e);if(t._container)t._container.remove();delete e._context;return e}function Ce(e){var t=e._fullLayout;var r=e.getBoundingClientRect();if(Q.equalDomRects(r,t._lastBBox))return;var n=t._invTransform=Q.inverseTransformMatrix(Q.getFullTransformMatrix(e));t._invScaleX=Math.sqrt(n[0][0]*n[0][0]+n[0][1]*n[0][1]+n[0][2]*n[0][2]);t._invScaleY=Math.sqrt(n[1][0]*n[1][0]+n[1][1]*n[1][1]+n[1][2]*n[1][2]);t._lastBBox=r}function Le(e){var t=T.select(e);var r=e._fullLayout;r._calcInverseTransform=Ce;r._calcInverseTransform(e);r._container=t.selectAll(".plot-container").data([0]);r._container.enter().insert("div",":first-child").classed("plot-container",true).classed("plotly",true);r._paperdiv=r._container.selectAll(".svg-container").data([0]);r._paperdiv.enter().append("div").classed("user-select-none",true).classed("svg-container",true).style("position","relative");r._glcontainer=r._paperdiv.selectAll(".gl-container").data([{}]);r._glcontainer.enter().append("div").classed("gl-container",true);r._paperdiv.selectAll(".main-svg").remove();r._paperdiv.select(".modebar-container").remove();r._paper=r._paperdiv.insert("svg",":first-child").classed("main-svg",true);r._toppaper=r._paperdiv.append("svg").classed("main-svg",true);r._modebardiv=r._paperdiv.append("div");delete r._modeBar;r._hoverpaper=r._paperdiv.append("svg").classed("main-svg",true);if(!r._uid){var n={};T.selectAll("defs").each(function(){if(this.id)n[this.id.split("-")[1]]=1});r._uid=Q.randstr(n)}r._paperdiv.selectAll(".main-svg").attr(o.svgAttrs);r._defs=r._paper.append("defs").attr("id","defs-"+r._uid);r._clips=r._defs.append("g").classed("clips",true);r._topdefs=r._toppaper.append("defs").attr("id","topdefs-"+r._uid);r._topclips=r._topdefs.append("g").classed("clips",true);r._bgLayer=r._paper.append("g").classed("bglayer",true);r._draggers=r._paper.append("g").classed("draglayer",true);var a=r._paper.append("g").classed("layer-below",true);r._imageLowerLayer=a.append("g").classed("imagelayer",true);r._shapeLowerLayer=a.append("g").classed("shapelayer",true);r._cartesianlayer=r._paper.append("g").classed("cartesianlayer",true);r._polarlayer=r._paper.append("g").classed("polarlayer",true);r._ternarylayer=r._paper.append("g").classed("ternarylayer",true);r._geolayer=r._paper.append("g").classed("geolayer",true);r._funnelarealayer=r._paper.append("g").classed("funnelarealayer",true);r._pielayer=r._paper.append("g").classed("pielayer",true);r._iciclelayer=r._paper.append("g").classed("iciclelayer",true);r._treemaplayer=r._paper.append("g").classed("treemaplayer",true);r._sunburstlayer=r._paper.append("g").classed("sunburstlayer",true);r._indicatorlayer=r._toppaper.append("g").classed("indicatorlayer",true);r._glimages=r._paper.append("g").classed("glimages",true);var i=r._toppaper.append("g").classed("layer-above",true);r._imageUpperLayer=i.append("g").classed("imagelayer",true);r._shapeUpperLayer=i.append("g").classed("shapelayer",true);r._infolayer=r._toppaper.append("g").classed("infolayer",true);r._menulayer=r._toppaper.append("g").classed("menulayer",true);r._zoomlayer=r._toppaper.append("g").classed("zoomlayer",true);r._hoverlayer=r._hoverpaper.append("g").classed("hoverlayer",true);r._modebardiv.classed("modebar-container",true).style("position","absolute").style("top","0px").style("right","0px");e.emit("plotly_framework")}E.animate=Te;E.addFrames=ke;E.deleteFrames=Me;E.addTraces=R;E.deleteTraces=z;E.extendTraces=w;E.moveTraces=N;E.prependTraces=I;E.newPlot=l;E._doPlot=a;E.purge=Se;E.react=ye;E.redraw=s;E.relayout=U;E.restyle=F;E.setPlotConfig=i;E.update=G;E._guiRelayout=W(U);E._guiRestyle=W(F);E._guiUpdate=W(G);E._storeDirectGUIEdit=B},{"../components/color":155,"../components/drawing":177,"../constants/xmlns_namespaces":266,"../lib":285,"../lib/events":278,"../lib/queue":300,"../plots/cartesian/axes":331,"../plots/cartesian/constants":338,"../plots/cartesian/graph_interact":341,"../plots/cartesian/select":351,"../plots/plots":366,"../registry":373,"./edit_types":313,"./helpers":314,"./manage_arrays":316,"./plot_config":318,"./plot_schema":319,"./subroutines":321,"@plotly/d3":20,"fast-isnumeric":31,"has-hover":62}],318:[function(e,t,r){"use strict";var n={staticPlot:{valType:"boolean",dflt:false},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:false},edits:{annotationPosition:{valType:"boolean",dflt:false},annotationTail:{valType:"boolean",dflt:false},annotationText:{valType:"boolean",dflt:false},axisTitleText:{valType:"boolean",dflt:false},colorbarPosition:{valType:"boolean",dflt:false},colorbarTitleText:{valType:"boolean",dflt:false},legendPosition:{valType:"boolean",dflt:false},legendText:{valType:"boolean",dflt:false},shapePosition:{valType:"boolean",dflt:false},titleText:{valType:"boolean",dflt:false}},autosizable:{valType:"boolean",dflt:false},responsive:{valType:"boolean",dflt:false},fillFrame:{valType:"boolean",dflt:false},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[true,false],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[false,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:true},showAxisRangeEntryBoxes:{valType:"boolean",dflt:true},showTips:{valType:"boolean",dflt:true},showLink:{valType:"boolean",dflt:false},linkText:{valType:"string",dflt:"Edit chart",noBlank:true},sendData:{valType:"boolean",dflt:true},showSources:{valType:"any",dflt:false},displayModeBar:{valType:"enumerated",values:["hover",true,false],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:false},showEditInChartStudio:{valType:"boolean",dflt:false},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:false},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:true},watermark:{valType:"boolean",dflt:false},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:true,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}};var a={};function i(e,t){for(var r in e){var n=e[r];if(n.valType){t[r]=n.dflt}else{if(!t[r]){t[r]={}}i(n,t[r])}}}i(n,a);t.exports={configAttributes:n,dfltConfig:a}},{}],319:[function(e,t,d){"use strict";var u=e("../registry");var r=e("../lib");var h=e("../plots/attributes");var f=e("../plots/layout_attributes");var n=e("../plots/frame_attributes");var a=e("../plots/animation_attributes");var i=e("./plot_config").configAttributes;var o=e("./edit_types");var l=r.extendDeepAll;var p=r.isPlainObject;var v=r.isArrayOrTypedArray;var c=r.nestedProperty;var s=r.valObjectMeta;var g="_isSubplotObj";var m="_isLinkedToArray";var _="_arrayAttrRegexps";var y="_deprecated";var b=[g,m,_,y];d.IS_SUBPLOT_OBJ=g;d.IS_LINKED_TO_ARRAY=m;d.DEPRECATED=y;d.UNDERSCORE_ATTRS=b;d.get=function(){var t={};u.allTypes.forEach(function(e){t[e]=T(e)});var r={};Object.keys(u.transformsRegistry).forEach(function(e){r[e]=M(e)});return{defs:{valObjects:s,metaKeys:b.concat(["description","role","editType","impliedEdits"]),editType:{traces:o.traces,layout:o.layout},impliedEdits:{}},traces:t,layout:k(),transforms:r,frames:S(),animation:C(a),config:C(i)}};d.crawl=function(n,a,e,i){var o=e||0;i=i||"";Object.keys(n).forEach(function(e){var t=n[e];if(b.indexOf(e)!==-1)return;var r=(i?i+".":"")+e;a(t,e,n,o,r);if(d.isValObject(t))return;if(p(t)&&e!=="impliedEdits"){d.crawl(t,a,o+1,r)}})};d.isValObject=function(e){return e&&e.valType!==undefined};d.findArrayAttributes=function(e){var o=[];var s=[];var l=[];var i,c;function t(e,t,r,n){s=s.slice(0,n).concat([t]);l=l.slice(0,n).concat([e&&e._isLinkedToArray]);var a=e&&(e.valType==="data_array"||e.arrayOk===true)&&!(s[n-1]==="colorbar"&&(t==="ticktext"||t==="tickvals"));if(!a)return;u(i,0,"")}function u(e,t,r){var n=e[s[t]];var a=r+s[t];if(t===s.length-1){if(v(n)){o.push(c+a)}}else{if(l[t]){if(Array.isArray(n)){for(var i=0;i<n.length;i++){if(p(n[i])){u(n[i],t+1,a+"["+i+"].")}}}}else if(p(n)){u(n,t+1,a+".")}}}i=e;c="";d.crawl(h,t);if(e._module&&e._module.attributes){d.crawl(e._module.attributes,t)}var r=e.transforms;if(r){for(var n=0;n<r.length;n++){var a=r[n];var f=a._module;if(f){c="transforms["+n+"].";i=a;d.crawl(f.attributes,t)}}}return o};d.getTraceValObject=function(e,t){var r=t[0];var n=1;var a,i;if(r==="transforms"){if(t.length===1){return h.transforms}var o=e.transforms;if(!Array.isArray(o)||!o.length)return false;var s=t[1];if(!A(s)||s>=o.length){return false}a=(u.transformsRegistry[o[s].type]||{}).attributes;i=a&&a[t[2]];n=3}else{var l=e._module;if(!l)l=(u.modules[e.type||h.type.dflt]||{})._module;if(!l)return false;a=l.attributes;i=a&&a[r];if(!i){var c=l.basePlotModule;if(c&&c.attributes){i=c.attributes[r]}}if(!i)i=h[r]}return w(i,t,n)};d.getLayoutValObject=function(e,t){var r=x(e,t[0]);return w(r,t,1)};function x(e,t){var r,n,a,i;var o=e._basePlotModules;if(o){var s;for(r=0;r<o.length;r++){a=o[r];if(a.attrRegex&&a.attrRegex.test(t)){if(a.layoutAttrOverrides)return a.layoutAttrOverrides;if(!s&&a.layoutAttributes)s=a.layoutAttributes}var l=a.baseLayoutAttrOverrides;if(l&&t in l)return l[t]}if(s)return s}var c=e._modules;if(c){for(r=0;r<c.length;r++){i=c[r].layoutAttributes;if(i&&t in i){return i[t]}}}for(n in u.componentsRegistry){a=u.componentsRegistry[n];if(a.name==="colorscale"&&t.indexOf("coloraxis")===0){return a.layoutAttributes[t]}else if(!a.schema&&t===a.name){return a.layoutAttributes}}if(t in f)return f[t];return false}function w(e,t,r){if(!e)return false;if(e._isLinkedToArray){if(A(t[r]))r++;else if(r<t.length)return false}for(;r<t.length;r++){var n=e[t[r]];if(p(n))e=n;else break;if(r===t.length-1)break;if(e._isLinkedToArray){r++;if(!A(t[r]))return false}else if(e.valType==="info_array"){r++;var a=t[r];if(!A(a))return false;var i=e.items;if(Array.isArray(i)){if(a>=i.length)return false;if(e.dimensions===2){r++;if(t.length===r)return e;var o=t[r];if(!A(o))return false;e=i[a][o]}else e=i[a]}else{e=i}}}return e}function A(e){return e===Math.round(e)&&e>=0}function T(e){var t,r;t=u.modules[e]._module,r=t.basePlotModule;var n={};n.type=null;var i=l({},h);var o=l({},t.attributes);d.crawl(o,function(e,t,r,n,a){c(i,a).set(undefined);if(e===undefined)c(o,a).set(undefined)});l(n,i);if(u.traceIs(e,"noOpacity")){delete n.opacity}if(!u.traceIs(e,"showLegend")){delete n.showlegend;delete n.legendgroup}if(u.traceIs(e,"noHover")){delete n.hoverinfo;delete n.hoverlabel}if(!t.selectPoints){delete n.selectedpoints}l(n,o);if(r.attributes){l(n,r.attributes)}n.type=e;var a={meta:t.meta||{},categories:t.categories||{},animatable:Boolean(t.animatable),type:e,attributes:C(n)};if(t.layoutAttributes){var s={};l(s,t.layoutAttributes);a.layoutAttributes=C(s)}if(!t.animatable){d.crawl(a,function(e){if(d.isValObject(e)&&"anim"in e){delete e.anim}})}return a}function k(){var e={};var t,r;l(e,f);for(t in u.subplotsRegistry){r=u.subplotsRegistry[t];if(!r.layoutAttributes)continue;if(Array.isArray(r.attr)){for(var n=0;n<r.attr.length;n++){O(e,r,r.attr[n])}}else{var a=r.attr==="subplot"?r.name:r.attr;O(e,r,a)}}for(t in u.componentsRegistry){r=u.componentsRegistry[t];var i=r.schema;if(i&&(i.subplots||i.layout)){var o=i.subplots;if(o&&o.xaxis&&!o.yaxis){for(var s in o.xaxis){delete e.yaxis[s]}}}else if(r.name==="colorscale"){l(e,r.layoutAttributes)}else if(r.layoutAttributes){P(e,r.layoutAttributes,r.name)}}return{layoutAttributes:C(e)}}function M(r){var e=u.transformsRegistry[r];var n=l({},e.attributes);Object.keys(u.componentsRegistry).forEach(function(e){var t=u.componentsRegistry[e];if(t.schema&&t.schema.transforms&&t.schema.transforms[r]){Object.keys(t.schema.transforms[r]).forEach(function(e){P(n,t.schema.transforms[r][e],e)})}});return{attributes:C(n)}}function S(){var e={frames:l({},n)};C(e);return e.frames}function C(e){L(e);E(e);D(e);return e}function L(e){function n(e){return{valType:"string",editType:"none"}}function t(e,t,r){if(d.isValObject(e)){if(e.arrayOk===true||e.valType==="data_array"){r[t+"src"]=n(t)}}else if(p(e)){e.role="object"}}d.crawl(e,t)}function E(e){function t(e,t,r){if(!e)return;var n=e[m];if(!n)return;delete e[m];r[t]={items:{}};r[t].items[n]=e;r[t].role="object"}d.crawl(e,t)}function D(e){function n(e){for(var t in e){if(p(e[t])){n(e[t])}else if(Array.isArray(e[t])){for(var r=0;r<e[t].length;r++){n(e[t][r])}}else{if(e[t]instanceof RegExp){e[t]=e[t].toString()}}}}n(e)}function O(e,t,r){var n=c(e,r);var a=l({},t.layoutAttributes);a[g]=true;n.set(a)}function P(e,t,r){var n=c(e,r);n.set(l(n.get()||{},t))}},{"../lib":285,"../plots/animation_attributes":325,"../plots/attributes":327,"../plots/frame_attributes":361,"../plots/layout_attributes":364,"../registry":373,"./edit_types":313,"./plot_config":318}],320:[function(e,t,r){"use strict";var h=e("../lib");var s=e("../plots/attributes");var p="templateitemname";var n={name:{valType:"string",editType:"none"}};n[p]={valType:"string",editType:"calc"};r.templatedArray=function(e,t){t._isLinkedToArray=e;t.name=n.name;t[p]=n[p];return t};r.traceTemplater=function(n){var a={};var i,o;for(i in n){o=n[i];if(Array.isArray(o)&&o.length){a[i]=0}}function e(e){i=h.coerce(e,{},s,"type");var t={type:i,_template:null};if(i in a){o=n[i];var r=a[i]%o.length;a[i]++;t._template=o[r]}else{}return t}return{newTrace:e}};r.newContainer=function(e,t,r){var n=e._template;var a=n&&(n[t]||r&&n[r]);if(!h.isPlainObject(a))a=null;var i=e[t]={_template:a};return i};r.arrayTemplater=function(e,t,i){var r=e._template;var o=r&&r[u(t)];var s=r&&r[t];if(!Array.isArray(s)||!s.length){s=[]}var l={};function n(e){var t={name:e.name,_input:e};var r=t[p]=e[p];if(!c(r)){t._template=o;return t}for(var n=0;n<s.length;n++){var a=s[n];if(a.name===r){l[r]=1;t._template=a;return t}}t[i]=e[i]||false;t._template=false;return t}function a(){var e=[];for(var t=0;t<s.length;t++){var r=s[t];var n=r.name;if(c(n)&&!l[n]){var a={_template:r,name:n,_input:{_templateitemname:n}};a[p]=r[p];e.push(a);l[n]=1}}return e}return{newItem:n,defaultItems:a}};function c(e){return e&&typeof e==="string"}function u(e){var t=e.length-1;if(e.charAt(t)!=="s"){h.warn("bad argument to arrayDefaultKey: "+e)}return e.substr(0,e.length-1)+"defaults"}r.arrayDefaultKey=u;r.arrayEditor=function(a,e,t){var r=(h.nestedProperty(a,e).get()||[]).length;var n=t._index;var i=n>=r&&(t._input||{})._templateitemname;if(i)n=r;var o=e+"["+n+"]";var s;function l(){s={};if(i){s[o]={};s[o][p]=i}}l();function c(e,t){s[e]=t}function u(e,t){if(i){h.nestedProperty(s[o],e).set(t)}else{s[o+"."+e]=t}}function f(){var e=s;l();return e}function d(e,t){if(e)u(e,t);var r=f();for(var n in r){h.nestedProperty(a,n).set(r[n])}}return{modifyBase:c,modifyItem:u,getUpdateObj:f,applyUpdate:d}}},{"../lib":285,"../plots/attributes":327}],321:[function(e,t,W){"use strict";var X=e("@plotly/d3");var f=e("../registry");var Z=e("../plots/plots");var J=e("../lib");var d=e("../lib/clear_gl_canvases");var $=e("../components/color");var Q=e("../components/drawing");var a=e("../components/titles");var K=e("../components/modebar");var ee=e("../plots/cartesian/axes");var te=e("../constants/alignment");var r=e("../plots/cartesian/constraints");var l=r.enforce;var c=r.clean;var u=e("../plots/cartesian/autorange").doAutoRange;var i="start";var n="middle";var o="end";W.layoutStyles=function(e){return J.syncOrAsync([Z.doAutoMargin,s],e)};function re(e,t,r){for(var n=0;n<r.length;n++){var a=r[n][0];var i=r[n][1];if(a[0]>=e[1]||a[1]<=e[0]){continue}if(i[0]<t[1]&&i[1]>t[0]){return true}}return false}function s(e){var t=e._fullLayout;var a=t._size;var i=a.p;var r=ee.list(e,"",true);var n,o,s,l,c,u;t._paperdiv.style({width:e._context.responsive&&t.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":t.width+"px",height:e._context.responsive&&t.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":t.height+"px"}).selectAll(".main-svg").call(Q.setSize,t.width,t.height);e._context.setBackground(e,t.paper_bgcolor);W.drawMainTitle(e);K.manage(e);if(!t._has("cartesian")){return Z.previousPromises(e)}function f(e,t,r){var n=e._lw/2;if(e._id.charAt(0)==="x"){if(!t)return a.t+a.h*(1-(e.position||0))+n%1;else if(r==="top")return t._offset-i-n;return t._offset+t._length+i+n}if(!t)return a.l+a.w*(e.position||0)+n%1;else if(r==="right")return t._offset+t._length+i+n;return t._offset-i-n}for(n=0;n<r.length;n++){l=r[n];var d=l._anchorAxis;l._linepositions={};l._lw=Q.crispRound(e,l.linewidth,1);l._mainLinePosition=f(l,d,l.side);l._mainMirrorPosition=l.mirror&&d?f(l,d,te.OPPOSITE_SIDE[l.side]):null}var h=[];var p=[];var v=[];var g=$.opacity(t.paper_bgcolor)===1&&$.opacity(t.plot_bgcolor)===1&&t.paper_bgcolor===t.plot_bgcolor;for(o in t._plots){s=t._plots[o];if(s.mainplot){if(s.bg){s.bg.remove()}s.bg=undefined}else{var m=s.xaxis.domain;var _=s.yaxis.domain;var y=s.plotgroup;if(re(m,_,v)){var b=y.node();var x=s.bg=J.ensureSingle(y,"rect","bg");b.insertBefore(x.node(),b.childNodes[0]);p.push(o)}else{y.select("rect.bg").remove();v.push([m,_]);if(!g){h.push(o);p.push(o)}}}}var w=t._bgLayer.selectAll(".bg").data(h);w.enter().append("rect").classed("bg",true);w.exit().remove();w.each(function(e){t._plots[e].bg=X.select(this)});for(n=0;n<p.length;n++){s=t._plots[p[n]];c=s.xaxis;u=s.yaxis;if(s.bg&&c._offset!==undefined&&u._offset!==undefined){s.bg.call(Q.setRect,c._offset-i,u._offset-i,c._length+2*i,u._length+2*i).call($.fill,t.plot_bgcolor).style("stroke-width",0)}}if(!t._hasOnlyLargeSploms){for(o in t._plots){s=t._plots[o];c=s.xaxis;u=s.yaxis;var A=s.clipId="clip"+t._uid+o+"plot";var T=J.ensureSingleById(t._clips,"clipPath",A,function(e){e.classed("plotclip",true).append("rect")});s.clipRect=T.select("rect").attr({width:c._length,height:u._length});Q.setTranslate(s.plot,c._offset,u._offset);var k;var M;if(s._hasClipOnAxisFalse){k=null;M=A}else{k=A;M=null}Q.setClipUrl(s.plot,k,e);s.layerClipId=M}}var S,C,L,E,D,O;var P,I,R,z,N,F;var j;function B(e){return"M"+S+","+e+"H"+C}function H(e){return"M"+c._offset+","+e+"h"+c._length}function U(e){return"M"+e+","+I+"V"+P}function V(e){return"M"+e+","+u._offset+"v"+u._length}function q(e,t,r){if(!e.showline||o!==e._mainSubplot)return"";if(!e._anchorAxis)return r(e._mainLinePosition);var n=t(e._mainLinePosition);if(e.mirror)n+=t(e._mainMirrorPosition);return n}for(o in t._plots){s=t._plots[o];c=s.xaxis;u=s.yaxis;var Y="M0,0";if(ne(c,o)){D=ae(c,"left",u,r);S=c._offset-(D?i+D:0);O=ae(c,"right",u,r);C=c._offset+c._length+(O?i+O:0);L=f(c,u,"bottom");E=f(c,u,"top");j=!c._anchorAxis||o!==c._mainSubplot;if(j&&(c.mirror==="allticks"||c.mirror==="all")){c._linepositions[o]=[L,E]}Y=q(c,B,H);if(j&&c.showline&&(c.mirror==="all"||c.mirror==="allticks")){Y+=B(L)+B(E)}s.xlines.style("stroke-width",c._lw+"px").call($.stroke,c.showline?c.linecolor:"rgba(0,0,0,0)")}s.xlines.attr("d",Y);var G="M0,0";if(ne(u,o)){N=ae(u,"bottom",c,r);P=u._offset+u._length+(N?i:0);F=ae(u,"top",c,r);I=u._offset-(F?i:0);R=f(u,c,"left");z=f(u,c,"right");j=!u._anchorAxis||o!==u._mainSubplot;if(j&&(u.mirror==="allticks"||u.mirror==="all")){u._linepositions[o]=[R,z]}G=q(u,U,V);if(j&&u.showline&&(u.mirror==="all"||u.mirror==="allticks")){G+=U(R)+U(z)}s.ylines.style("stroke-width",u._lw+"px").call($.stroke,u.showline?u.linecolor:"rgba(0,0,0,0)")}s.ylines.attr("d",G)}ee.makeClipPaths(e);return Z.previousPromises(e)}function ne(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||e.mirror==="all"||e.mirror==="allticks")}function h(e,t,r){if(!r.showline||!r._lw)return false;if(r.mirror==="all"||r.mirror==="allticks")return true;var n=r._anchorAxis;if(!n)return false;var a=te.FROM_BL[t];if(r.side===t){return n.domain[a]===e.domain[a]}return r.mirror&&n.domain[1-a]===e.domain[1-a]}function ae(e,t,r,n){if(h(e,t,r)){return r._lw}for(var a=0;a<n.length;a++){var i=n[a];if(i._mainAxis===r._mainAxis&&h(e,t,i)){return i._lw}}return 0}W.drawMainTitle=function(e){var t=e._fullLayout;var r=g(t);var n=m(t);a.draw(e,"gtitle",{propContainer:t,propName:"title.text",placeholder:t._dfltTitle.plot,attributes:{x:p(t,r),y:v(t,n),"text-anchor":r,dy:n}})};function p(e,t){var r=e.title;var n=e._size;var a=0;if(t===i){a=r.pad.l}else if(t===o){a=-r.pad.r}switch(r.xref){case"paper":return n.l+n.w*r.x+a;case"container":default:return e.width*r.x+a}}function v(e,t){var r=e.title;var n=e._size;var a=0;if(t==="0em"||!t){a=-r.pad.b}else if(t===te.CAP_SHIFT+"em"){a=r.pad.t}if(r.y==="auto"){return n.t/2}else{switch(r.yref){case"paper":return n.t+n.h-n.h*r.y+a;case"container":default:return e.height-e.height*r.y+a}}}function g(e){var t=e.title;var r=n;if(J.isRightAnchor(t)){r=o}else if(J.isLeftAnchor(t)){r=i}return r}function m(e){var t=e.title;var r="0em";if(J.isTopAnchor(t)){r=te.CAP_SHIFT+"em"}else if(J.isMiddleAnchor(t)){r=te.MID_SHIFT+"em"}return r}W.doTraceStyle=function(e){var t=e.calcdata;var r=[];var n;for(n=0;n<t.length;n++){var a=t[n];var i=a[0]||{};var o=i.trace||{};var s=o._module||{};var l=s.arraysToCalcdata;if(l)l(a,o);var c=s.editStyle;if(c)r.push({fn:c,cd0:i})}if(r.length){for(n=0;n<r.length;n++){var u=r[n];u.fn(e,u.cd0)}d(e);W.redrawReglTraces(e)}Z.style(e);f.getComponentMethod("legend","draw")(e);return Z.previousPromises(e)};W.doColorBars=function(e){f.getComponentMethod("colorbar","draw")(e);return Z.previousPromises(e)};W.layoutReplot=function(e){var t=e.layout;e.layout=undefined;return f.call("_doPlot",e,"",t)};W.doLegend=function(e){f.getComponentMethod("legend","draw")(e);return Z.previousPromises(e)};W.doTicksRelayout=function(e){ee.draw(e,"redraw");if(e._fullLayout._hasOnlyLargeSploms){f.subplotsRegistry.splom.updateGrid(e);d(e);W.redrawReglTraces(e)}W.drawMainTitle(e);return Z.previousPromises(e)};W.doModeBar=function(e){var t=e._fullLayout;K.manage(e);for(var r=0;r<t._basePlotModules.length;r++){var n=t._basePlotModules[r].updateFx;if(n)n(e)}return Z.previousPromises(e)};W.doCamera=function(e){var t=e._fullLayout;var r=t._subplots.gl3d;for(var n=0;n<r.length;n++){var a=t[r[n]];var i=a._scene;i.setViewport(a)}};W.drawData=function(e){var t=e._fullLayout;d(e);var r=t._basePlotModules;for(var n=0;n<r.length;n++){r[n].plot(e)}W.redrawReglTraces(e);Z.style(e);f.getComponentMethod("shapes","draw")(e);f.getComponentMethod("annotations","draw")(e);f.getComponentMethod("images","draw")(e);t._replotting=false;return Z.previousPromises(e)};W.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var r=e._fullData;var n=[];var a=[];var i,o;if(t._hasOnlyLargeSploms){t._splomGrid.draw()}for(i=0;i<r.length;i++){var s=r[i];if(s.visible===true&&s._length!==0){if(s.type==="splom"){t._splomScenes[s.uid].draw()}else if(s.type==="scattergl"){J.pushUnique(n,s.xaxis+s.yaxis)}else if(s.type==="scatterpolargl"){J.pushUnique(a,s.subplot)}}}for(i=0;i<n.length;i++){o=t._plots[n[i]];if(o._scene)o._scene.draw()}for(i=0;i<a.length;i++){o=t[a[i]]._subplot;if(o._scene)o._scene.draw()}}};W.doAutoRangeAndConstraints=function(e){var t=ee.list(e,"",true);var r;var n={};for(var a=0;a<t.length;a++){r=t[a];if(!n[r._id]){n[r._id]=1;c(e,r);u(e,r);var i=r._matchGroup;if(i){for(var o in i){var s=ee.getFromId(e,o);u(e,s,r.range);n[o]=1}}}}l(e)};W.finalDraw=function(e){f.getComponentMethod("rangeslider","draw")(e);f.getComponentMethod("rangeselector","draw")(e)};W.drawMarginPushers=function(e){f.getComponentMethod("legend","draw")(e);f.getComponentMethod("rangeselector","draw")(e);f.getComponentMethod("sliders","draw")(e);f.getComponentMethod("updatemenus","draw")(e);f.getComponentMethod("colorbar","draw")(e)}},{"../components/color":155,"../components/drawing":177,"../components/modebar":218,"../components/titles":253,"../constants/alignment":260,"../lib":285,"../lib/clear_gl_canvases":273,"../plots/cartesian/autorange":330,"../plots/cartesian/axes":331,"../plots/cartesian/constraints":339,"../plots/plots":366,"../registry":373,"@plotly/d3":20}],322:[function(e,t,r){"use strict";var T=e("../lib");var k=T.isPlainObject;var n=e("./plot_schema");var y=e("../plots/plots");var h=e("../plots/attributes");var M=e("./plot_template");var b=e("./plot_config").dfltConfig;r.makeTemplate=function(e){e=T.isPlainObject(e)?e:T.getGraphDiv(e);e=T.extendDeep({_context:b},{data:e.data,layout:e.layout});y.supplyDefaults(e);var t=e.data||[];var r=e.layout||{};r._basePlotModules=e._fullLayout._basePlotModules;r._modules=e._fullLayout._modules;var a={data:{},layout:{}};t.forEach(function(e){var t={};C(e,t,g.bind(null,e));var r=T.coerce(e,{},h,"type");var n=a.data[r];if(!n)n=a.data[r]=[];n.push(t)});C(r,a.layout,v.bind(null,r));delete a.layout.template;var n=r.template;if(k(n)){var i=n.layout;var o,s,l,c,u,f;if(k(i)){p(i,a.layout)}var d=n.data;if(k(d)){for(s in a.data){l=d[s];if(Array.isArray(l)){u=a.data[s];f=u.length;c=l.length;for(o=0;o<f;o++){p(l[o%c],u[o])}for(o=f;o<c;o++){u.push(T.extendDeep({},l[o]))}}}for(s in d){if(!(s in a.data)){a.data[s]=T.extendDeep([],d[s])}}}}return a};function p(s,e){s=T.extendDeep({},s);var t=Object.keys(s).sort();var r,l;function n(e,t,r){if(k(t)&&k(e)){p(e,t)}else if(Array.isArray(t)&&Array.isArray(e)){var n=M.arrayTemplater({_template:s},r);for(l=0;l<t.length;l++){var a=t[l];var i=n.newItem(a)._template;if(i)p(i,a)}var o=n.defaultItems();for(l=0;l<o.length;l++)t.push(o[l]._template);for(l=0;l<t.length;l++)delete t[l].templateitemname}}for(r=0;r<t.length;r++){var a=t[r];var i=s[a];if(a in e){n(i,e[a],a)}else e[a]=i;if(S(a)===a){for(var o in e){var c=S(o);if(o!==c&&c===a&&!(o in s)){n(i,e[o],a)}}}}}function S(e){return e.replace(/[0-9]+$/,"")}function C(e,t,r,n,a){var i=a&&r(a);for(var o in e){var s=e[o];var l=L(e,o,n);var c=L(e,o,a);var u=r(c);if(!u){var f=S(o);if(f!==o){c=L(e,f,a);u=r(c)}}if(i&&i===u)continue;if(!u||u._noTemplating||u.valType==="data_array"||u.arrayOk&&Array.isArray(s)){continue}if(!u.valType&&k(s)){C(s,t,r,l,c)}else if(u._isLinkedToArray&&Array.isArray(s)){var d=false;var h=0;var p={};for(var v=0;v<s.length;v++){var g=s[v];if(k(g)){var m=g.name;if(m){if(!p[m]){C(g,t,r,L(s,h,l),L(s,h,c));h++;p[m]=1}}else if(!d){var _=M.arrayDefaultKey(o);var y=L(e,_,n);var b=L(s,h,l);C(g,t,r,b,L(s,h,c));var x=T.nestedProperty(t,b);var w=T.nestedProperty(t,y);w.set(x.get());x.set(null);d=true}}}}else{var A=T.nestedProperty(t,l);A.set(s)}}}function v(e,t){return n.getLayoutValObject(e,T.nestedProperty({},t).parts)}function g(e,t){return n.getTraceValObject(e,T.nestedProperty({},t).parts)}function L(e,t,r){var n;if(!r)n=t;else if(Array.isArray(e))n=r+"["+t+"]";else n=r+"."+t;return n}r.validateTemplate=function(e,t){var r=T.extendDeep({},{_context:b,data:e.data,layout:e.layout});var n=r.layout||{};if(!k(t))t=n.template||{};var a=t.layout;var i=t.data;var o=[];r.layout=n;r.layout.template=t;y.supplyDefaults(r);var s=r._fullLayout;var l=r._fullData;var c={};function u(e,t){for(var r in e){if(r.charAt(0)!=="_"&&k(e[r])){var n=S(r);var a=[];var i;for(i=0;i<t.length;i++){a.push(L(e,r,t[i]));if(n!==r)a.push(L(e,n,t[i]))}for(i=0;i<a.length;i++){c[a[i]]=1}u(e[r],a)}}}function f(e,t){for(var r in e){if(r.indexOf("defaults")===-1&&k(e[r])){var n=L(e,r,t);if(c[n]){f(e[r],n)}else{o.push({code:"unused",path:n})}}}}if(!k(a)){o.push({code:"layout"})}else{u(s,["layout"]);f(a,"layout")}if(!k(i)){o.push({code:"data"})}else{var d={};var h;for(var p=0;p<l.length;p++){var v=l[p];h=v.type;d[h]=(d[h]||0)+1;if(!v._fullInput._template){o.push({code:"missing",index:v._fullInput.index,traceType:h})}}for(h in i){var g=i[h].length;var m=d[h]||0;if(g>m){o.push({code:"unused",traceType:h,templateCount:g,dataCount:m})}else if(m>g){o.push({code:"reused",traceType:h,templateCount:g,dataCount:m})}}}function _(e,t){for(var r in e){if(r.charAt(0)==="_")continue;var n=e[r];var a=L(e,r,t);if(k(n)){if(Array.isArray(e)&&n._template===false&&n.templateitemname){o.push({code:"missing",path:a,templateitemname:n.templateitemname})}_(n,a)}else if(Array.isArray(n)&&x(n)){_(n,a)}}}_({data:l,layout:s},"");if(o.length)return o.map(w)};function x(e){for(var t=0;t<e.length;t++){if(k(e[t]))return true}}function w(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":if(e.path){t="There are no templates for item "+e.path+" with name "+e.templateitemname}else{t="There are no templates for trace "+e.index+", of type "+e.traceType+"."}break;case"unused":if(e.path){t="The template item at "+e.path+" was not used in constructing the plot."}else if(e.dataCount){t="Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type."}else{t="The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data."}break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type.";break}e.msg=t;return e}},{"../lib":285,"../plots/attributes":327,"../plots/plots":366,"./plot_config":318,"./plot_schema":319,"./plot_template":320}],323:[function(e,t,r){"use strict";var w=e("fast-isnumeric");var A=e("./plot_api");var T=e("../plots/plots");var k=e("../lib");var M=e("../snapshot/helpers");var S=e("../snapshot/tosvg");var C=e("../snapshot/svgtoimg");var L=e("../version").version;var E={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:false},imageDataOnly:{valType:"boolean",dflt:false}};function n(e,r){r=r||{};var n;var t;var a;var i;if(k.isPlainObject(e)){n=e.data||[];t=e.layout||{};a=e.config||{};i={}}else{e=k.getGraphDiv(e);n=k.extendDeep([],e.data);t=k.extendDeep({},e.layout);a=e._context;i=e._fullLayout||{}}function o(e){return!(e in r)||k.validate(r[e],E[e])}if(!o("width")&&r.width!==null||!o("height")&&r.height!==null){throw new Error("Height and width should be pixel values.")}if(!o("format")){throw new Error("Export format is not "+k.join2(E.format.values,", "," or ")+".")}var s={};function l(e,t){return k.coerce(r,s,E,e,t)}var c=l("format");var u=l("width");var f=l("height");var d=l("scale");var h=l("setBackground");var p=l("imageDataOnly");var v=document.createElement("div");v.style.position="absolute";v.style.left="-5000px";document.body.appendChild(v);var g=k.extendFlat({},t);if(u){g.width=u}else if(r.width===null&&w(i.width)){g.width=i.width}if(f){g.height=f}else if(r.height===null&&w(i.height)){g.height=i.height}var m=k.extendFlat({},a,{_exportedPlot:true,staticPlot:true,setBackground:h});var _=M.getRedrawFunc(v);function y(){return new Promise(function(e){setTimeout(e,M.getDelay(v._fullLayout))})}function b(){return new Promise(function(e,t){var r=S(v,c,d);var n=v._fullLayout.width;var a=v._fullLayout.height;function i(){A.purge(v);document.body.removeChild(v)}if(c==="full-json"){var o=T.graphJson(v,false,"keepdata","object",true,true);o.version=L;o=JSON.stringify(o);i();if(p){return e(o)}else{return e(M.encodeJSON(o))}}i();if(c==="svg"){if(p){return e(r)}else{return e(M.encodeSVG(r))}}var s=document.createElement("canvas");s.id=k.randstr();C({format:c,width:n,height:a,scale:d,canvas:s,svg:r,promise:true}).then(e).catch(t)})}function x(e){if(p){return e.replace(M.IMAGE_URL_PREFIX,"")}else{return e}}return new Promise(function(t,r){A.newPlot(v,n,g,m).then(_).then(y).then(b).then(function(e){t(x(e))}).catch(function(e){r(e)})})}t.exports=n},{"../lib":285,"../plots/plots":366,"../snapshot/helpers":377,"../snapshot/svgtoimg":379,"../snapshot/tosvg":381,"../version":546,"./plot_api":317,"fast-isnumeric":31}],324:[function(e,t,r){"use strict";var O=e("../lib");var T=e("../plots/plots");var k=e("./plot_schema");var M=e("./plot_config").dfltConfig;var P=O.isPlainObject;var I=Array.isArray;var R=O.isArrayOrTypedArray;t.exports=function e(t,r){if(t===undefined)t=[];if(r===undefined)r={};var n=k.get();var a=[];var i={_context:O.extendFlat({},M)};var o,s;if(I(t)){i.data=O.extendDeep([],t);o=t}else{i.data=[];o=[];a.push(N("array","data"))}if(P(r)){i.layout=O.extendDeep({},r);s=r}else{i.layout={};s={};if(arguments.length>1){a.push(N("object","layout"))}}T.supplyDefaults(i);var l=i._fullData;var c=o.length;for(var u=0;u<c;u++){var f=o[u];var d=["data",u];if(!P(f)){a.push(N("object",d));continue}var h=l[u];var p=h.type;var v=n.traces[p].attributes;v.type={valType:"enumerated",values:[p]};if(h.visible===false&&f.visible!==false){a.push(N("invisible",d))}z(f,h,v,a,d);var g=f.transforms;var m=h.transforms;if(g){if(!I(g)){a.push(N("array",d,["transforms"]))}d.push("transforms");for(var _=0;_<g.length;_++){var y=["transforms",_];var b=g[_].type;if(!P(g[_])){a.push(N("object",d,y));continue}var x=n.transforms[b]?n.transforms[b].attributes:{};x.type={valType:"enumerated",values:Object.keys(n.transforms)};z(g[_],m[_],x,a,d,y)}}}var w=i._fullLayout;var A=S(n,l);z(s,w,A,a,"layout");return a.length===0?void 0:a};function z(e,t,r,n,a,i){i=i||[];var o=Object.keys(e);for(var s=0;s<o.length;s++){var l=o[s];if(l==="transforms")continue;var c=i.slice();c.push(l);var u=e[l];var f=t[l];var d=j(r,l);var h=(d||{}).valType;var p=h==="info_array";var v=h==="colorscale";var g=(d||{}).items;if(!F(r,l)){n.push(N("schema",a,c))}else if(P(u)&&P(f)&&h!=="any"){z(u,f,d,n,a,c)}else if(p&&I(u)){if(u.length>f.length){n.push(N("unused",a,c.concat(f.length)))}var m=f.length;var _=Array.isArray(g);if(_)m=Math.min(m,g.length);var y,b,x,w,A;if(d.dimensions===2){for(b=0;b<m;b++){if(I(u[b])){if(u[b].length>f[b].length){n.push(N("unused",a,c.concat(b,f[b].length)))}var T=f[b].length;for(y=0;y<(_?Math.min(T,g[b].length):T);y++){x=_?g[b][y]:g;w=u[b][y];A=f[b][y];if(!O.validate(w,x)){n.push(N("value",a,c.concat(b,y),w))}else if(A!==w&&A!==+w){n.push(N("dynamic",a,c.concat(b,y),w,A))}}}else{n.push(N("array",a,c.concat(b),u[b]))}}}else{for(b=0;b<m;b++){x=_?g[b]:g;w=u[b];A=f[b];if(!O.validate(w,x)){n.push(N("value",a,c.concat(b),w))}else if(A!==w&&A!==+w){n.push(N("dynamic",a,c.concat(b),w,A))}}}}else if(d.items&&!p&&I(u)){var k=g[Object.keys(g)[0]];var M=[];var S,C;for(S=0;S<f.length;S++){var L=f[S]._index||S;C=c.slice();C.push(L);if(P(u[L])&&P(f[S])){M.push(L);var E=u[L];var D=f[S];if(P(E)&&E.visible!==false&&D.visible===false){n.push(N("invisible",a,C))}else z(E,D,k,n,a,C)}}for(S=0;S<u.length;S++){C=c.slice();C.push(S);if(!P(u[S])){n.push(N("object",a,C,u[S]))}else if(M.indexOf(S)===-1){n.push(N("unused",a,C))}}}else if(!P(u)&&P(f)){n.push(N("object",a,c,u))}else if(!R(u)&&R(f)&&!p&&!v){n.push(N("array",a,c,u))}else if(!(l in t)){n.push(N("unused",a,c,u))}else if(!O.validate(u,d)){n.push(N("value",a,c,u))}else if(d.valType==="enumerated"&&(d.coerceNumber&&u!==+f||u!==f)){n.push(N("dynamic",a,c,u,f))}}return n}function S(e,t){var r=e.layout.layoutAttributes;for(var n=0;n<t.length;n++){var a=t[n];var i=e.traces[a.type];var o=i.layoutAttributes;if(o){if(a.subplot){O.extendFlat(r[i.attributes.subplot.dflt],o)}else{O.extendFlat(r,o)}}}return r}var c={object:function(e,t){var r;if(e==="layout"&&t==="")r="The layout argument";else if(e[0]==="data"&&t===""){r="Trace "+e[1]+" in the data argument"}else r=a(e)+"key "+t;return r+" must be linked to an object container"},array:function(e,t){var r;if(e==="data")r="The data argument";else r=a(e)+"key "+t;return r+" must be linked to an array container"},schema:function(e,t){return a(e)+"key "+t+" is not part of the schema"},unused:function(e,t,r){var n=P(r)?"container":"key";return a(e)+n+" "+t+" did not get coerced"},dynamic:function(e,t,r,n){return[a(e)+"key",t,"(set to '"+r+"')","got reset to","'"+n+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?a(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,r){return[a(e)+"key "+t,"is set to an invalid value ("+r+")"].join(" ")}};function a(e){if(I(e))return"In data trace "+e[1]+", ";return"In "+e+", "}function N(e,t,r,n,a){r=r||"";var i,o;if(I(t)){i=t[0];o=t[1]}else{i=t;o=null}var s=u(r);var l=c[e](t,s,n,a);O.log(l);return{code:e,container:i,trace:o,path:r,astr:s,msg:l}}function F(e,t){var r=i(t);var n=r.keyMinusId;var a=r.id;if(n in e&&e[n]._isSubplotObj&&a){return true}return t in e}function j(e,t){if(t in e)return e[t];var r=i(t);return e[r.keyMinusId]}var n=O.counterRegex("([a-z]+)");function i(e){var t=e.match(n);return{keyMinusId:t&&t[1],id:t&&t[2]}}function u(e){if(!I(e))return String(e);var t="";for(var r=0;r<e.length;r++){var n=e[r];if(typeof n==="number"){t=t.substr(0,t.length-1)+"["+n+"]"}else{t+=n}if(r<e.length-1)t+="."}return t}},{"../lib":285,"../plots/plots":366,"./plot_config":318,"./plot_schema":319}],325:[function(e,t,r){"use strict";t.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:false},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:true}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],326:[function(e,t,r){"use strict";var v=e("../lib");var g=e("../plot_api/plot_template");t.exports=function e(t,r,n){var a=n.name;var i=n.inclusionAttr||"visible";var o=r[a];var s=v.isArrayOrTypedArray(t[a])?t[a]:[];var l=r[a]=[];var c=g.arrayTemplater(r,a,i);var u,f;for(u=0;u<s.length;u++){var d=s[u];if(!v.isPlainObject(d)){f=c.newItem({});f[i]=false}else{f=c.newItem(d)}f._index=u;if(f[i]!==false){n.handleItemDefaults(d,f,r,n)}l.push(f)}var h=c.defaultItems();for(u=0;u<h.length;u++){f=h[u];f._index=l.length;n.handleItemDefaults({},f,r,n,{});l.push(f)}if(v.isArrayOrTypedArray(o)){var p=Math.min(o.length,l.length);for(u=0;u<p;u++){v.relinkPrivateKeys(l[u],o[u])}}return l}},{"../lib":285,"../plot_api/plot_template":320}],327:[function(e,t,r){"use strict";var n=e("./font_attributes");var a=e("../components/fx/attributes");t.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:true},visible:{valType:"enumerated",values:[true,false,"legendonly"],dflt:true,editType:"calc"},showlegend:{valType:"boolean",dflt:true,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:n({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:true},ids:{valType:"data_array",editType:"calc",anim:true},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:true,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:true,dflt:"all",editType:"none"},hoverlabel:a.hoverlabel,stream:{token:{valType:"string",noBlank:true,strict:true,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":186,"./font_attributes":360}],328:[function(e,t,r){"use strict";var x=e("fast-isnumeric");var n=e("../../lib");var w=n.dateTime2ms;var A=n.incrementMonth;var a=e("../../constants/numerical");var T=a.ONEAVGMONTH;t.exports=function e(t,r,n,a){if(r.type!=="date")return a;var i=t[n+"periodalignment"];if(!i)return a;var o=t[n+"period"];var s;if(x(o)){o=+o;if(o<=0)return a}else if(typeof o==="string"&&o.charAt(0)==="M"){var l=+o.substring(1);if(l>0&&Math.round(l)===l){s=l}else return a}var c=r.calendar;var u="start"===i;var f="end"===i;var d=t[n+"period0"];var h=w(d,c)||0;var p=[];var v=a.length;for(var g=0;g<v;g++){var m=a[g];var _,y,b;if(s){_=Math.round((m-h)/(s*T));b=A(h,s*_,c);while(b>m){b=A(b,-s,c)}while(b<=m){b=A(b,s,c)}y=A(b,-s,c)}else{_=Math.round((m-h)/o);b=h+_*o;while(b>m){b-=o}while(b<=m){b+=o}y=b-o}p[g]=u?y:f?b:(y+b)/2}return p}},{"../../constants/numerical":265,"../../lib":285,"fast-isnumeric":31}],329:[function(e,t,r){"use strict";t.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],330:[function(e,t,r){"use strict";var _=e("@plotly/d3");var C=e("fast-isnumeric");var O=e("../../lib");var L=e("../../constants/numerical").FP_SAFE;var s=e("../../registry");var y=e("../../components/drawing");var n=e("./axis_ids");var g=n.getFromId;var l=n.isLinked;t.exports={getAutoRange:c,makePadFn:I,doAutoRange:a,findExtremes:i,concatExtremes:R};function c(e,t){var r,n;var a=[];var i=e._fullLayout;var o=I(i,t,0);var s=I(i,t,1);var l=R(e,t);var c=l.min;var u=l.max;if(c.length===0||u.length===0){return O.simpleMap(t.range,t.r2l)}var f=c[0].val;var d=u[0].val;for(r=1;r<c.length;r++){if(f!==d)break;f=Math.min(f,c[r].val)}for(r=1;r<u.length;r++){if(f!==d)break;d=Math.max(d,u[r].val)}var h=false;if(t.range){var p=O.simpleMap(t.range,t.r2l);h=p[1]<p[0]}if(t.autorange==="reversed"){h=true;t.autorange=true}var v=t.rangemode;var g=v==="tozero";var m=v==="nonnegative";var _=t._length;var y=_/10;var b=0;var x,w,A,T,k,M;for(r=0;r<c.length;r++){x=c[r];for(n=0;n<u.length;n++){w=u[n];M=w.val-x.val-P(t,x.val,w.val);if(M>0){k=_-o(x)-s(w);if(k>y){if(M/k>b){A=x;T=w;b=M/k}}else if(M/_>b){A={val:x.val,nopad:1};T={val:w.val,nopad:1};b=M/_}}}}function S(e,t){return Math.max(e,s(t))}if(f===d){var C=f-1;var L=f+1;if(g){if(f===0){a=[0,1]}else{var E=(f>0?u:c).reduce(S,0);var D=f/(1-Math.min(.5,E/_));a=f>0?[0,D]:[D,0]}}else if(m){a=[Math.max(0,C),Math.max(1,L)]}else{a=[C,L]}}else{if(g){if(A.val>=0){A={val:0,nopad:1}}if(T.val<=0){T={val:0,nopad:1}}}else if(m){if(A.val-b*o(A)<0){A={val:0,nopad:1}}if(T.val<=0){T={val:1,nopad:1}}}b=(T.val-A.val-P(t,x.val,w.val))/(_-o(A)-s(T));a=[A.val-b*o(A),T.val+b*s(T)]}if(h)a.reverse();return O.simpleMap(a,t.l2r||Number)}function P(e,t,r){var n=0;if(e.rangebreaks){var a=e.locateBreaks(t,r);for(var i=0;i<a.length;i++){var o=a[i];n+=o.max-o.min}}return n}function I(e,t,r){var n=.05*t._length;var a=t._anchorAxis||{};if((t.ticklabelposition||"").indexOf("inside")!==-1||(a.ticklabelposition||"").indexOf("inside")!==-1){var i=t.autorange==="reversed";if(!i){var o=O.simpleMap(t.range,t.r2l);i=o[1]<o[0]}if(i)r=!r}var s=0;if(!l(e,t._id)){s=u(e,t,r)}n=Math.max(s,n);if(t.constrain==="domain"&&t._inputDomain){n*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])}return function e(t){if(t.nopad)return 0;return t.pad+(t.extrapad?n:s)}}var b=3;function u(e,t,r){var n=0;var a=t._id.charAt(0)==="x";for(var i in e._plots){var o=e._plots[i];if(t._id!==o.xaxis._id&&t._id!==o.yaxis._id)continue;var s=(a?o.yaxis:o.xaxis)||{};if((s.ticklabelposition||"").indexOf("inside")!==-1){if(!r&&(s.side==="left"||s.side==="bottom")||r&&(s.side==="top"||s.side==="right")){if(s._vals){var l=O.deg2rad(s._tickAngles[s._id+"tick"]||0);var c=Math.abs(Math.cos(l));var u=Math.abs(Math.sin(l));if(!s._vals[0].bb){var f=s._id+"tick";var d=s._selections[f];d.each(function(e){var t=_.select(this);var r=t.select(".text-math-group");if(r.empty()){e.bb=y.bBox(t.node())}})}for(var h=0;h<s._vals.length;h++){var p=s._vals[h];var v=p.bb;if(v){var g=2*b+v.width;var m=2*b+v.height;n=Math.max(n,a?Math.max(g*c,m*u):Math.max(m*c,g*u))}}}if(s.ticks==="inside"&&s.ticklabelposition==="inside"){n+=s.ticklen||0}}}}return n}function R(e,t,r){var a=t._id;var n=e._fullData;var i=e._fullLayout;var o=[];var s=[];var l,c,u;function f(e,t){for(l=0;l<t.length;l++){var r=e[t[l]];var n=(r._extremes||{})[a];if(r.visible===true&&n){for(c=0;c<n.min.length;c++){u=n.min[c];E(o,u.val,u.pad,{extrapad:u.extrapad})}for(c=0;c<n.max.length;c++){u=n.max[c];D(s,u.val,u.pad,{extrapad:u.extrapad})}}}}f(n,t._traceIndices);f(i.annotations||[],t._annIndices||[]);f(i.shapes||[],t._shapeIndices||[]);if(t._matchGroup&&!r){for(var d in t._matchGroup){if(d!==t._id){var h=g(e,d);var p=R(e,h,true);var v=t._length/h._length;for(c=0;c<p.min.length;c++){u=p.min[c];E(o,u.val,u.pad*v,{extrapad:u.extrapad})}for(c=0;c<p.max.length;c++){u=p.max[c];D(s,u.val,u.pad*v,{extrapad:u.extrapad})}}}}return{min:o,max:s}}function a(e,t,r){t.setScale();if(t.autorange){t.range=r?r.slice():c(e,t);t._r=t.range.slice();t._rl=O.simpleMap(t._r,t.r2l);var n=t._input;var a={};a[t._attr+".range"]=t.range;a[t._attr+".autorange"]=t.autorange;s.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,a);n.range=t.range.slice();n.autorange=t.autorange}var i=t._anchorAxis;if(i&&i.rangeslider){var o=i.rangeslider[t._name];if(o){if(o.rangemode==="auto"){o.range=c(e,t)}}i._input.rangeslider[t._name]=O.extendFlat({},o)}}function i(t,r,e){if(!e)e={};if(!t._m)t.setScale();var n=[];var a=[];var i=r.length;var o=e.padded||false;var s=e.tozero&&(t.type==="linear"||t.type==="-");var l=t.type==="log";var c=false;var u=e.vpadLinearized||false;var f,d,h,p,v,g,m,_,y;function b(t){if(Array.isArray(t)){c=true;return function(e){return Math.max(Number(t[e]||0),0)}}else{var e=Math.max(Number(t||0),0);return function(){return e}}}var x=b((t._m>0?e.ppadplus:e.ppadminus)||e.ppad||0);var w=b((t._m>0?e.ppadminus:e.ppadplus)||e.ppad||0);var A=b(e.vpadplus||e.vpad);var T=b(e.vpadminus||e.vpad);if(!c){_=Infinity;y=-Infinity;if(l){for(f=0;f<i;f++){d=r[f];if(d<_&&d>0)_=d;if(d>y&&d<L)y=d}}else{for(f=0;f<i;f++){d=r[f];if(d<_&&d>-L)_=d;if(d>y&&d<L)y=d}}r=[_,y];i=2}var k={tozero:s,extrapad:o};function M(e){h=r[e];if(!C(h))return;g=x(e);m=w(e);if(u){p=t.c2l(h)-T(e);v=t.c2l(h)+A(e)}else{_=h-T(e);y=h+A(e);if(l&&_<y/10)_=y/10;p=t.c2l(_);v=t.c2l(y)}if(s){p=Math.min(0,p);v=Math.max(0,v)}if(z(p)){E(n,p,m,k)}if(z(v)){D(a,v,g,k)}}var S=Math.min(6,i);for(f=0;f<S;f++)M(f);for(f=i-1;f>=S;f--)M(f);return{min:n,max:a,opts:e}}function E(e,t,r,n){o(e,t,r,n,f)}function D(e,t,r,n){o(e,t,r,n,d)}function o(e,t,r,n,a){var i=n.tozero;var o=n.extrapad;var s=true;for(var l=0;l<e.length&&s;l++){var c=e[l];if(a(c.val,t)&&c.pad>=r&&(c.extrapad||!o)){s=false;break}else if(a(t,c.val)&&c.pad<=r&&(o||!c.extrapad)){e.splice(l,1);l--}}if(s){var u=i&&t===0;e.push({val:t,pad:u?0:r,extrapad:u?false:o})}}function z(e){return C(e)&&Math.abs(e)<L}function f(e,t){return e<=t}function d(e,t){return e>=t}},{"../../components/drawing":177,"../../constants/numerical":265,"../../lib":285,"../../registry":373,"./axis_ids":335,"@plotly/d3":20,"fast-isnumeric":31}],331:[function(e,t,r){"use strict";var k=e("@plotly/d3");var C=e("fast-isnumeric");var q=e("../../plots/plots");var Y=e("../../registry");var G=e("../../lib");var h=G.strTranslate;var g=e("../../lib/svg_text_utils");var m=e("../../components/titles");var u=e("../../components/color");var M=e("../../components/drawing");var b=e("./layout_attributes");var _=e("./clean_ticks");var n=e("../../constants/numerical");var y=n.ONEMAXYEAR;var x=n.ONEAVGYEAR;var w=n.ONEMINYEAR;var A=n.ONEMAXQUARTER;var T=n.ONEAVGQUARTER;var S=n.ONEMINQUARTER;var L=n.ONEMAXMONTH;var E=n.ONEAVGMONTH;var D=n.ONEMINMONTH;var O=n.ONEWEEK;var P=n.ONEDAY;var I=P/2;var R=n.ONEHOUR;var f=n.ONEMIN;var d=n.ONESEC;var v=n.MINUS_SIGN;var z=n.BADNUM;var c={K:"zeroline"};var N={K:"gridline",L:"path"};var F={K:"tick",L:"path"};var j={K:"tick",L:"text"};var a=e("../../constants/alignment");var B=a.MID_SHIFT;var H=a.CAP_SHIFT;var W=a.LINE_SPACING;var X=a.OPPOSITE_SIDE;var U=3;var Z=t.exports={};Z.setConvert=e("./set_convert");var s=e("./axis_autotype");var i=e("./axis_ids");var o=i.idSort;var V=i.isLinked;Z.id2name=i.id2name;Z.name2id=i.name2id;Z.cleanId=i.cleanId;Z.list=i.list;Z.listIds=i.listIds;Z.getFromId=i.getFromId;Z.getFromTrace=i.getFromTrace;var l=e("./autorange");Z.getAutoRange=l.getAutoRange;Z.findExtremes=l.findExtremes;var p=1e-4;function J(e){var t=(e[1]-e[0])*p;return[e[0]-t,e[1]+t]}Z.coerceRef=function(e,t,r,n,a,i){var o=n.charAt(n.length-1);var s=r._fullLayout._subplots[o+"axis"];var l=n+"ref";var c={};if(!a)a=s[0]||(typeof i==="string"?i:i[0]);if(!i)i=a;s=s.concat(s.map(function(e){return e+" domain"}));c[l]={valType:"enumerated",values:s.concat(i?typeof i==="string"?[i]:i:[]),dflt:a};return G.coerce(e,t,c,l)};Z.getRefType=function(e){if(e===undefined){return e}if(e==="paper"){return"paper"}if(e==="pixel"){return"pixel"}if(/( domain)$/.test(e)){return"domain"}else{return"range"}};Z.coercePosition=function(e,t,r,n,a,i){var o,s;var l=Z.getRefType(n);if(l!=="range"){o=G.ensureNumber;s=r(a,i)}else{var c=Z.getFromId(t,n);i=c.fraction2r(i);s=r(a,i);o=c.cleanPos}e[a]=o(s)};Z.cleanPosition=function(e,t,r){var n=r==="paper"||r==="pixel"?G.ensureNumber:Z.getFromId(t,r).cleanPos;return n(e)};Z.redrawComponents=function(f,d){d=d?d:Z.listIds(f);var h=f._fullLayout;function e(e,t,r,n){var a=Y.getComponentMethod(e,t);var i={};for(var o=0;o<d.length;o++){var s=h[Z.id2name(d[o])];var l=s[r];for(var c=0;c<l.length;c++){var u=l[c];if(!i[u]){a(f,u);i[u]=1;if(n)return}}}}e("annotations","drawOne","_annIndices");e("shapes","drawOne","_shapeIndices");e("images","draw","_imgIndices",true)};var $=Z.getDataConversions=function(e,t,r,n){var a;var i=r==="x"||r==="y"||r==="z"?r:n;if(Array.isArray(i)){a={type:s(n,undefined,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]};Z.setConvert(a);if(a.type==="category"){for(var o=0;o<n.length;o++){a.d2c(n[o])}}}else{a=Z.getFromTrace(e,t,i)}if(a)return{d2c:a.d2c,c2d:a.c2d};if(i==="ids")return{d2c:K,c2d:K};return{d2c:Q,c2d:Q}};function Q(e){return+e}function K(e){return String(e)}Z.getDataToCoordFunc=function(e,t,r,n){return $(e,t,r,n).d2c};Z.counterLetter=function(e){var t=e.charAt(0);if(t==="x")return"y";if(t==="y")return"x"};Z.minDtick=function(e,t,r,n){if(["log","category","multicategory"].indexOf(e.type)!==-1||!n){e._minDtick=0}else if(e._minDtick===undefined){e._minDtick=t;e._forceTick0=r}else if(e._minDtick){if((e._minDtick/t+1e-6)%1<2e-6&&((r-e._forceTick0)/t%1+1.000001)%1<2e-6){e._minDtick=t;e._forceTick0=r}else if((t/e._minDtick+1e-6)%1>2e-6||((r-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6){e._minDtick=0}}};Z.saveRangeInitial=function(e,t){var r=Z.list(e,"",true);var n=false;for(var a=0;a<r.length;a++){var i=r[a];var o=i._rangeInitial===undefined;var s=o||!(i.range[0]===i._rangeInitial[0]&&i.range[1]===i._rangeInitial[1]);if(o&&i.autorange===false||t&&s){i._rangeInitial=i.range.slice();n=true}}return n};Z.saveShowSpikeInitial=function(e,t){var r=Z.list(e,"",true);var n=false;var a="on";for(var i=0;i<r.length;i++){var o=r[i];var s=o._showSpikeInitial===undefined;var l=s||!(o.showspikes===o._showspikes);if(s||t&&l){o._showSpikeInitial=o.showspikes;n=true}if(a==="on"&&!o.showspikes){a="off"}}e._fullLayout._cartesianSpikesEnabled=a;return n};Z.autoBin=function(e,t,r,n,a,i){var o=G.aggNums(Math.min,null,e);var s=G.aggNums(Math.max,null,e);if(t.type==="category"||t.type==="multicategory"){return{start:o-.5,end:s+.5,size:Math.max(1,Math.round(i)||1),_dataSpan:s-o}}if(!a)a=t.calendar;var l;if(t.type==="log"){l={type:"linear",range:[o,s]}}else{l={type:t.type,range:G.simpleMap([o,s],t.c2r,0,a),calendar:a}}Z.setConvert(l);i=i&&_.dtick(i,l.type);if(i){l.dtick=i;l.tick0=_.tick0(undefined,l.type,a)}else{var c;if(r)c=(s-o)/r;else{var u=G.distinctVals(e);var f=Math.pow(10,Math.floor(Math.log(u.minDiff)/Math.LN10));var d=f*G.roundUp(u.minDiff/f,[.9,1.9,4.9,9.9],true);c=Math.max(d,2*G.stdev(e)/Math.pow(e.length,n?.25:.4));if(!C(c))c=1}Z.autoTicks(l,c)}var h=l.dtick;var p=Z.tickIncrement(Z.tickFirst(l),h,"reverse",a);var v,g;if(typeof h==="number"){p=ee(p,e,l,o,s);g=1+Math.floor((s-p)/h);v=p+g*h}else{if(l.dtick.charAt(0)==="M"){p=te(p,e,h,o,a)}v=p;g=0;while(v<=s){v=Z.tickIncrement(v,h,false,a);g++}}return{start:t.c2r(p,0,a),end:t.c2r(v,0,a),size:h,_dataSpan:s-o}};function ee(t,e,r,n,a){var i=0;var o=0;var s=0;var l=0;function c(e){return(1+(e-t)*100/r.dtick)%100<2}for(var u=0;u<e.length;u++){if(e[u]%1===0)s++;else if(!C(e[u]))l++;if(c(e[u]))i++;if(c(e[u]+r.dtick/2))o++}var f=e.length-l;if(s===f&&r.type!=="date"){if(r.dtick<1){t=n-.5*r.dtick}else{t-=.5;if(t+r.dtick<n)t+=r.dtick}}else if(o<f*.1){if(i>f*.3||c(n)||c(a)){var d=r.dtick/2;t+=t+d<n?d:-d}}return t}function te(e,t,r,n,a){var i=G.findExactDates(t,a);var o=.8;if(i.exactDays>o){var s=Number(r.substr(1));if(i.exactYears>o&&s%12===0){e=Z.tickIncrement(e,"M6","reverse")+P*1.5}else if(i.exactMonths>o){e=Z.tickIncrement(e,"M1","reverse")+P*15.5}else{e-=I}var l=Z.tickIncrement(e,r);if(l<=n)return l}return e}Z.prepTicks=function(e,t){var r=G.simpleMap(e.range,e.r2l,undefined,undefined,t);e._dtickInit=e.dtick;e._tick0Init=e.tick0;if(e.tickmode==="auto"||!e.dtick){var n=e.nticks;var a;if(!n){if(e.type==="category"||e.type==="multicategory"){a=e.tickfont?G.bigFont(e.tickfont.size||12):15;n=e._length/a}else{a=e._id.charAt(0)==="y"?40:80;n=G.constrain(e._length/a,4,9)+1}if(e._name==="radialaxis")n*=2}if(e.tickmode==="array")n*=100;e._roughDTick=Math.abs(r[1]-r[0])/n;Z.autoTicks(e,e._roughDTick);if(e._minDtick>0&&e.dtick<e._minDtick*2){e.dtick=e._minDtick;e.tick0=e.l2r(e._forceTick0)}}if(e.ticklabelmode==="period"){ne(e)}if(!e.tick0){e.tick0=e.type==="date"?"2000-01-01":0}if(e.type==="date"&&e.dtick<.1)e.dtick=.1;pe(e)};function re(e){return+e.substring(1)}function ne(e){var t;function r(){return!(C(e.dtick)||e.dtick.charAt(0)!=="M")}var n=r();var a=Z.getTickFormat(e);if(a){var i=e._dtickInit!==e.dtick;if(!/%[fLQsSMX]/.test(a)){if(/%[HI]/.test(a)){t=R;if(i&&!n&&e.dtick<R)e.dtick=R}else if(/%p/.test(a)){t=I;if(i&&!n&&e.dtick<I)e.dtick=I}else if(/%[Aadejuwx]/.test(a)){t=P;if(i&&!n&&e.dtick<P)e.dtick=P}else if(/%[UVW]/.test(a)){t=O;if(i&&!n&&e.dtick<O)e.dtick=O}else if(/%[Bbm]/.test(a)){t=E;if(i&&(n?re(e.dtick)<1:e.dtick<D))e.dtick="M1"}else if(/%[q]/.test(a)){t=T;if(i&&(n?re(e.dtick)<3:e.dtick<S))e.dtick="M3"}else if(/%[Yy]/.test(a)){t=x;if(i&&(n?re(e.dtick)<12:e.dtick<w))e.dtick="M12"}}}n=r();if(n&&e.tick0===e._dowTick0){e.tick0=e._rawTick0}e._definedDelta=t}function ae(e,t,r){for(var n=0;n<e.length;n++){var a=e[n].value;var i=n;var o=n+1;if(n<e.length-1){i=n;o=n+1}else if(n>0){i=n-1;o=n}else{i=n;o=n}var s=e[i].value;var l=e[o].value;var c=Math.abs(l-s);var u=r||c;var f=0;if(u>=w){if(c>=w&&c<=y){f=c}else{f=x}}else if(r===T&&u>=S){if(c>=S&&c<=A){f=c}else{f=T}}else if(u>=D){if(c>=D&&c<=L){f=c}else{f=E}}else if(r===O&&u>=O){f=O}else if(u>=P){f=P}else if(r===I&&u>=I){f=I}else if(r===R&&u>=R){f=R}var d;if(f>=c){f=c;d=true}var h=a+f;if(t.rangebreaks&&f>0){var p=84;var v=0;for(var g=0;g<p;g++){var m=(g+.5)/p;if(t.maskBreaks(a*(1-m)+m*h)!==z)v++}f*=v/p;if(!f){e[n].drop=true}if(d&&c>O)f=c}if(f>0||n===0){e[n].periodX=a+f/2}}}Z.calcTicks=function e(t,r){Z.prepTicks(t,r);var n=G.simpleMap(t.range,t.r2l,undefined,undefined,r);if(t.tickmode==="array")return ie(t);var a=J(n);var i=a[0];var o=a[1];var s=n[1]<n[0];var l=Math.min(n[0],n[1]);var c=Math.max(n[0],n[1]);var u=t.type==="log"&&!(C(t.dtick)||t.dtick.charAt(0)==="L");var f=t.ticklabelmode==="period";t._tmin=Z.tickFirst(t,r);if(t._tmin<i!==s)return[];if(t.type==="category"||t.type==="multicategory"){o=s?Math.max(-.5,o):Math.min(t._categories.length-.5,o)}var d=t._tmin;if(t.rangebreaks&&t._tick0Init!==t.tick0){d=Ze(d,t);if(!s){d=Z.tickIncrement(d,t.dtick,!s,t.calendar)}}if(f){d=Z.tickIncrement(d,t.dtick,!s,t.calendar)}var h=Math.max(1e3,t._length||0);var p=[];var v=null;for(;s?d>=o:d<=o;d=Z.tickIncrement(d,t.dtick,s,t.calendar)){if(t.rangebreaks){if(!s){if(d<i)continue;if(t.maskBreaks(d)===z&&Ze(d,t)>=c)break}}if(p.length>h||d===v)break;v=d;var g=false;if(u&&d!==(d|0)){g=true}p.push({minor:g,value:d})}if(f)ae(p,t,t._definedDelta);var m;if(t.rangebreaks){var _=t._id.charAt(0)==="y";var y=1;if(t.tickmode==="auto"){y=t.tickfont?t.tickfont.size:12}var b=NaN;for(m=p.length-1;m>-1;m--){if(p[m].drop){p.splice(m,1);continue}p[m].value=Ze(p[m].value,t);var x=t.c2p(p[m].value);if(_?b>x-y:b<x+y){p.splice(s?m+1:m,1)}else{b=x}}}if(Xe(t)&&Math.abs(n[1]-n[0])===360){p.pop()}t._tmax=(p[p.length-1]||{}).value;t._prevDateHead="";t._inCalcTicks=true;var w=[];var A,T;for(m=0;m<p.length;m++){var k=p[m].minor;var M=p[m].value;A=Z.tickText(t,M,false,k);T=p[m].periodX;if(T!==undefined){A.periodX=T;if(T>c||T<l){if(T>c)A.periodX=c;if(T<l)A.periodX=l;A.text=" ";t._prevDateHead=""}}w.push(A)}t._inCalcTicks=false;return w};function ie(t){var e=t.tickvals;var r=t.ticktext;var n=new Array(e.length);var a=G.simpleMap(t.range,t.r2l);var i=J(a);var o=Math.min(i[0],i[1]);var s=Math.max(i[0],i[1]);var l=0;if(!Array.isArray(r))r=[];var c=t.type==="category"?t.d2l_noadd:t.d2l;if(t.type==="log"&&String(t.dtick).charAt(0)!=="L"){t.dtick="L"+Math.pow(10,Math.floor(Math.min(t.range[0],t.range[1]))-1)}for(var u=0;u<e.length;u++){var f=c(e[u]);if(f>o&&f<s){if(r[u]===undefined)n[l]=Z.tickText(t,f);else n[l]=ve(t,f,String(r[u]));l++}}if(l<e.length)n.splice(l,e.length-l);if(t.rangebreaks){n=n.filter(function(e){return t.maskBreaks(e.x)!==z})}return n}var oe=[2,5,10];var se=[1,2,3,6,12];var le=[1,2,5,10,15,30];var ce=[1,2,3,7,14];var ue=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1];var fe=[-.301,0,.301,.699,1];var de=[15,30,45,90,180];function he(e,t,r){return t*G.roundUp(e/t,r)}Z.autoTicks=function(e,t){var r;function n(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if(e.type==="date"){e.tick0=G.dateTick0(e.calendar,0);var a=2*t;if(a>x){t/=x;r=n(10);e.dtick="M"+12*he(t,r,oe)}else if(a>E){t/=E;e.dtick="M"+he(t,1,se)}else if(a>P){e.dtick=he(t,P,e._hasDayOfWeekBreaks?[1,2,7,14]:ce);var i=Z.getTickFormat(e);var o=e.ticklabelmode==="period";if(o)e._rawTick0=e.tick0;if(/%[uVW]/.test(i)){e.tick0=G.dateTick0(e.calendar,2)}else{e.tick0=G.dateTick0(e.calendar,1)}if(o)e._dowTick0=e.tick0}else if(a>R){e.dtick=he(t,R,se)}else if(a>f){e.dtick=he(t,f,le)}else if(a>d){e.dtick=he(t,d,le)}else{r=n(10);e.dtick=he(t,r,oe)}}else if(e.type==="log"){e.tick0=0;var s=G.simpleMap(e.range,e.r2l);if(t>.7){e.dtick=Math.ceil(t)}else if(Math.abs(s[1]-s[0])<1){var l=1.5*Math.abs((s[1]-s[0])/t);t=Math.abs(Math.pow(10,s[1])-Math.pow(10,s[0]))/l;r=n(10);e.dtick="L"+he(t,r,oe)}else{e.dtick=t>.3?"D2":"D1"}}else if(e.type==="category"||e.type==="multicategory"){e.tick0=0;e.dtick=Math.ceil(Math.max(t,1))}else if(Xe(e)){e.tick0=0;r=1;e.dtick=he(t,r,de)}else{e.tick0=0;r=n(10);e.dtick=he(t,r,oe)}if(e.dtick===0)e.dtick=1;if(!C(e.dtick)&&typeof e.dtick!=="string"){var c=e.dtick;e.dtick=1;throw"ax.dtick error: "+String(c)}};function pe(e){var t=e.dtick;e._tickexponent=0;if(!C(t)&&typeof t!=="string"){t=1}if(e.type==="category"||e.type==="multicategory"){e._tickround=null}if(e.type==="date"){var r=e.r2l(e.tick0);var n=e.l2r(r).replace(/(^-|i)/g,"");var a=n.length;if(String(t).charAt(0)==="M"){if(a>10||n.substr(5)!=="01-01")e._tickround="d";else e._tickround=+t.substr(1)%12===0?"y":"m"}else if(t>=P&&a<=10||t>=P*15)e._tickround="d";else if(t>=f&&a<=16||t>=R)e._tickround="M";else if(t>=d&&a<=19||t>=f)e._tickround="S";else{var i=e.l2r(r+t).replace(/^-/,"").length;e._tickround=Math.max(a,i)-20;if(e._tickround<0)e._tickround=4}}else if(C(t)||t.charAt(0)==="L"){var o=e.range.map(e.r2d||Number);if(!C(t))t=Number(t.substr(1));e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var s=Math.max(Math.abs(o[0]),Math.abs(o[1]));var l=Math.floor(Math.log(s)/Math.LN10+.01);var c=e.minexponent===undefined?3:e.minexponent;if(Math.abs(l)>c){if(Te(e.exponentformat)&&!ke(l)){e._tickexponent=3*Math.round((l-1)/3)}else e._tickexponent=l}}else{e._tickround=null}}Z.tickIncrement=function(e,t,r,n){var a=r?-1:1;if(C(t))return G.increment(e,a*t);var i=t.charAt(0);var o=a*Number(t.substr(1));if(i==="M")return G.incrementMonth(e,o,n);if(i==="L")return Math.log(Math.pow(10,e)+o)/Math.LN10;if(i==="D"){var s=t==="D2"?fe:ue;var l=e+a*.01;var c=G.roundUp(G.mod(l,1),s,r);return Math.floor(l)+Math.log(k.round(Math.pow(10,c),1))/Math.LN10}throw"unrecognized dtick "+String(t)};Z.tickFirst=function(e,t){var r=e.r2l||Number;var n=G.simpleMap(e.range,r,undefined,undefined,t);var a=n[1]<n[0];var i=a?Math.floor:Math.ceil;var o=J(n)[0];var s=e.dtick;var l=r(e.tick0);if(C(s)){var c=i((o-l)/s)*s+l;if(e.type==="category"||e.type==="multicategory"){c=G.constrain(c,0,e._categories.length-1)}return c}var u=s.charAt(0);var f=Number(s.substr(1));if(u==="M"){var d=0;var h=l;var p,v,g;while(d<10){p=Z.tickIncrement(h,s,a,e.calendar);if((p-o)*(h-o)<=0){if(a)return Math.min(h,p);return Math.max(h,p)}v=(o-(h+p)/2)/(p-h);g=u+(Math.abs(Math.round(v))||1)*f;h=Z.tickIncrement(h,g,v<0?!a:a,e.calendar);d++}G.error("tickFirst did not converge",e);return h}else if(u==="L"){return Math.log(i((Math.pow(10,o)-l)/f)*f+l)/Math.LN10}else if(u==="D"){var m=s==="D2"?fe:ue;var _=G.roundUp(G.mod(o,1),m,a);return Math.floor(o)+Math.log(k.round(Math.pow(10,_),1))/Math.LN10}else throw"unrecognized dtick "+String(s)};Z.tickText=function(r,n,a,e){var t=ve(r,n);var i=r.tickmode==="array";var o=a||i;var s=r.type;var l=s==="category"?r.d2l_noadd:r.d2l;var c;if(i&&Array.isArray(r.ticktext)){var u=G.simpleMap(r.range,r.r2l);var f=(Math.abs(u[1]-u[0])-(r._lBreaks||0))/1e4;for(c=0;c<r.ticktext.length;c++){if(Math.abs(n-l(r.tickvals[c]))<f)break}if(c<r.ticktext.length){t.text=String(r.ticktext[c]);return t}}function d(e){if(e===undefined)return true;if(a)return e==="none";var t={first:r._tmin,last:r._tmax}[e];return e!=="all"&&n!==t}var h=a?"never":r.exponentformat!=="none"&&d(r.showexponent)?"hide":"";if(s==="date")ge(r,t,a,o);else if(s==="log")me(r,t,a,o,h);else if(s==="category")_e(r,t);else if(s==="multicategory")ye(r,t,a);else if(Xe(r))xe(r,t,a,o,h);else be(r,t,a,o,h);if(!e){if(r.tickprefix&&!d(r.showtickprefix))t.text=r.tickprefix+t.text;if(r.ticksuffix&&!d(r.showticksuffix))t.text+=r.ticksuffix}if(r.tickson==="boundaries"||r.showdividers){var p=function(e){var t=r.l2p(e);return t>=0&&t<=r._length?e:null};t.xbnd=[p(t.x-.5),p(t.x+r.dtick-.5)]}return t};Z.hoverLabelText=function(e,t,r){if(r)e=G.extendFlat({},e,{hoverformat:r});var n=Array.isArray(t)?t[0]:t;var a=Array.isArray(t)?t[1]:undefined;if(a!==undefined&&a!==n){return Z.hoverLabelText(e,n,r)+" - "+Z.hoverLabelText(e,a,r)}var i=e.type==="log"&&n<=0;var o=Z.tickText(e,e.c2l(i?-n:n),"hover").text;if(i){return n===0?"0":v+o}return o};function ve(e,t,r){var n=e.tickfont||{};return{x:t,dx:0,dy:0,text:r||"",fontSize:n.size,font:n.family,fontColor:n.color}}function ge(e,t,r,n){var a=e._tickround;var i=r&&e.hoverformat||Z.getTickFormat(e);if(n){if(C(a))a=4;else a={y:"m",m:"d",d:"M",M:"S",S:4}[a]}var o=G.formatDate(t.x,i,a,e._dateFormat,e.calendar,e._extraFormat);var s;var l=o.indexOf("\n");if(l!==-1){s=o.substr(l+1);o=o.substr(0,l)}if(n){if(o==="00:00:00"||o==="00:00"){o=s;s=""}else if(o.length===8){o=o.replace(/:00$/,"")}}if(s){if(r){if(a==="d")o+=", "+s;else o=s+(o?", "+o:"")}else{if(!e._inCalcTicks||e._prevDateHead!==s){e._prevDateHead=s;o+="<br>"+s}else{var c=Je(e);var u=e._realSide||e.side;if(!c&&u==="top"||c&&u==="bottom"){o+="<br> "}}}}t.text=o}function me(e,t,r,n,a){var i=e.dtick;var o=t.x;var s=e.tickformat;var l=typeof i==="string"&&i.charAt(0);if(a==="never"){a=""}if(n&&l!=="L"){i="L3";l="L"}if(s||l==="L"){t.text=Me(Math.pow(10,o),e,a,n)}else if(C(i)||l==="D"&&G.mod(o+.01,1)<.1){var c=Math.round(o);var u=Math.abs(c);var f=e.exponentformat;if(f==="power"||Te(f)&&ke(c)){if(c===0)t.text=1;else if(c===1)t.text="10";else t.text="10<sup>"+(c>1?"":v)+u+"</sup>";t.fontSize*=1.25}else if((f==="e"||f==="E")&&u>2){t.text="1"+f+(c>0?"+":v)+u}else{t.text=Me(Math.pow(10,o),e,"","fakehover");if(i==="D1"&&e._id.charAt(0)==="y"){t.dy-=t.fontSize/6}}}else if(l==="D"){t.text=String(Math.round(Math.pow(10,G.mod(o,1))));t.fontSize*=.75}else throw"unrecognized dtick "+String(i);if(e.dtick==="D1"){var d=String(t.text).charAt(0);if(d==="0"||d==="1"){if(e._id.charAt(0)==="y"){t.dx-=t.fontSize/4}else{t.dy+=t.fontSize/2;t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(o<0?.5:.25)}}}}function _e(e,t){var r=e._categories[Math.round(t.x)];if(r===undefined)r="";t.text=String(r)}function ye(e,t,r){var n=Math.round(t.x);var a=e._categories[n]||[];var i=a[1]===undefined?"":String(a[1]);var o=a[0]===undefined?"":String(a[0]);if(r){t.text=o+" - "+i}else{t.text=i;t.text2=o}}function be(e,t,r,n,a){if(a==="never"){a=""}else if(e.showexponent==="all"&&Math.abs(t.x/e.dtick)<1e-6){a="hide"}t.text=Me(t.x,e,a,n)}function xe(e,t,r,n,a){if(e.thetaunit==="radians"&&!r){var i=t.x/180;if(i===0){t.text="0"}else{var o=we(i);if(o[1]>=100){t.text=Me(G.deg2rad(t.x),e,a,n)}else{var s=t.x<0;if(o[1]===1){if(o[0]===1)t.text="";else t.text=o[0]+""}else{t.text=["<sup>",o[0],"</sup>","","<sub>",o[1],"</sub>",""].join("")}if(s)t.text=v+t.text}}}else{t.text=Me(t.x,e,a,n)}}function we(e){function r(e,t){return Math.abs(e-t)<=1e-6}function n(e,t){return r(t,0)?e:n(t,e%t)}function t(e){var t=1;while(!r(Math.round(e*t)/t,e)){t*=10}return t}var a=t(e);var i=e*a;var o=Math.abs(n(i,a));return[Math.round(i/o),Math.round(a/o)]}var Ae=["f","p","n","","m","","k","M","G","T"];function Te(e){return e==="SI"||e==="B"}function ke(e){return e>14||e<-15}function Me(e,t,r,n){var a=e<0;var i=t._tickround;var o=r||t.exponentformat||"B";var s=t._tickexponent;var l=Z.getTickFormat(t);var c=t.separatethousands;if(n){var u={exponentformat:o,minexponent:t.minexponent,dtick:t.showexponent==="none"?t.dtick:C(e)?Math.abs(e)||1:1,range:t.showexponent==="none"?t.range.map(t.r2d):[0,e||1]};pe(u);i=(Number(u._tickround)||0)+4;s=u._tickexponent;if(t.hoverformat)l=t.hoverformat}if(l)return t._numFormat(l)(e).replace(/-/g,v);var f=Math.pow(10,-i)/2;if(o==="none")s=0;e=Math.abs(e);if(e<f){e="0";a=false}else{e+=f;if(s){e*=Math.pow(10,-s);i+=s}if(i===0)e=String(Math.floor(e));else if(i<0){e=String(Math.round(e));e=e.substr(0,e.length+i);for(var d=i;d<0;d++)e+="0"}else{e=String(e);var h=e.indexOf(".")+1;if(h)e=e.substr(0,h+i).replace(/\.?0+$/,"")}e=G.numSeparate(e,t._separators,c)}if(s&&o!=="hide"){if(Te(o)&&ke(s))o="power";var p;if(s<0)p=v+-s;else if(o!=="power")p="+"+s;else p=String(s);if(o==="e"||o==="E"){e+=o+p}else if(o==="power"){e+="10<sup>"+p+"</sup>"}else if(o==="B"&&s===9){e+="B"}else if(Te(o)){e+=Ae[s/3+5]}}if(a)return v+e;return e}Z.getTickFormat=function(e){var t;function r(e){return typeof e!=="string"?e:Number(e.replace("M",""))*E}function o(e,t){var r=["L","D"];if(typeof e===typeof t){if(typeof e==="number"){return e-t}else{var n=r.indexOf(e.charAt(0));var a=r.indexOf(t.charAt(0));if(n===a){return Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,""))}else{return n-a}}}else{return typeof e==="number"?1:-1}}function n(e,t,r){var n=r||function(e){return e};var a=t[0];var i=t[1];return(!a&&typeof a!=="number"||n(a)<=n(e))&&(!i&&typeof i!=="number"||n(i)>=n(e))}function a(e,t){var r=t[0]===null;var n=t[1]===null;var a=o(e,t[0])>=0;var i=o(e,t[1])<=0;return(r||a)&&(n||i)}var i,s;if(e.tickformatstops&&e.tickformatstops.length>0){switch(e.type){case"date":case"linear":{for(t=0;t<e.tickformatstops.length;t++){s=e.tickformatstops[t];if(s.enabled&&n(e.dtick,s.dtickrange,r)){i=s;break}}break}case"log":{for(t=0;t<e.tickformatstops.length;t++){s=e.tickformatstops[t];if(s.enabled&&a(e.dtick,s.dtickrange)){i=s;break}}break}default:}}return i?i.value:e.tickformat};Z.getSubplots=function(e,t){var r=e._fullLayout._subplots;var n=r.cartesian.concat(r.gl2d||[]);var a=t?Z.findSubplotsWithAxis(n,t):n;a.sort(function(e,t){var r=e.substr(1).split("y");var n=t.substr(1).split("y");if(r[0]===n[0])return+r[1]-+n[1];return+r[0]-+n[0]});return a};Z.findSubplotsWithAxis=function(e,t){var r=new RegExp(t._id.charAt(0)==="x"?"^"+t._id+"y":t._id+"$");var n=[];for(var a=0;a<e.length;a++){var i=e[a];if(r.test(i))n.push(i)}return n};Z.makeClipPaths=function(e){var t=e._fullLayout;if(t._hasOnlyLargeSploms)return;var r={_offset:0,_length:t.width,_id:""};var n={_offset:0,_length:t.height,_id:""};var a=Z.list(e,"x",true);var i=Z.list(e,"y",true);var o=[];var s,l;for(s=0;s<a.length;s++){o.push({x:a[s],y:n});for(l=0;l<i.length;l++){if(s===0)o.push({x:r,y:i[l]});o.push({x:a[s],y:i[l]})}}var c=t._clips.selectAll(".axesclip").data(o,function(e){return e.x._id+e.y._id});c.enter().append("clipPath").classed("axesclip",true).attr("id",function(e){return"clip"+t._uid+e.x._id+e.y._id}).append("rect");c.exit().remove();c.each(function(e){k.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})};Z.draw=function(n,e,a){var i=n._fullLayout;if(e==="redraw"){i._paper.selectAll("g.subplot").each(function(e){var t=e[0];var r=i._plots[t];if(r){var n=r.xaxis;var a=r.yaxis;r.xaxislayer.selectAll("."+n._id+"tick").remove();r.yaxislayer.selectAll("."+a._id+"tick").remove();r.xaxislayer.selectAll("."+n._id+"tick2").remove();r.yaxislayer.selectAll("."+a._id+"tick2").remove();r.xaxislayer.selectAll("."+n._id+"divider").remove();r.yaxislayer.selectAll("."+a._id+"divider").remove();if(r.gridlayer)r.gridlayer.selectAll("path").remove();if(r.zerolinelayer)r.zerolinelayer.selectAll("path").remove();i._infolayer.select(".g-"+n._id+"title").remove();i._infolayer.select(".g-"+a._id+"title").remove()}})}var t=!e||e==="redraw"?Z.listIds(n):e;return G.syncOrAsync(t.map(function(r){return function(){if(!r)return;var e=Z.getFromId(n,r);var t=Z.drawOne(n,e,a);e._r=e.range.slice();e._rl=G.simpleMap(e._r,e.r2l);return t}}))};Z.drawOne=function(h,p,e){e=e||{};var t,r,n;p.setScale();var v=h._fullLayout;var a=p._id;var g=a.charAt(0);var m=Z.counterLetter(a);var i=v._plots[p._mainSubplot];if(!i)return;var o=i[g+"axislayer"];var s=p._mainLinePosition;var l=p._mainMirrorPosition;var c=p._vals=Z.calcTicks(p);var u=[p.mirror,s,l].join("_");for(t=0;t<c.length;t++){c[t].axInfo=u}p._selections={};if(p._tickAngles)p._prevTickAngles=p._tickAngles;p._tickAngles={};p._depth=null;var f={};function _(e){var t=a+(e||"tick");if(!f[t])f[t]=Ee(p,t);return f[t]}if(!p.visible)return;var d=Z.makeTransTickFn(p);var y=Z.makeTransTickLabelFn(p);var b;var x;var w=p.ticks==="inside";var A=p.ticks==="outside";if(p.tickson==="boundaries"){var T=Se(p,c);x=Z.clipEnds(p,T);b=w?x:T}else{x=Z.clipEnds(p,c);b=w&&p.ticklabelmode!=="period"?x:c}var k=p._gridVals=x;var M=Le(p,c);if(!v._hasOnlyLargeSploms){var S=p._subplotsWith;var C={};for(t=0;t<S.length;t++){r=S[t];n=v._plots[r];var L=n[m+"axis"];var E=L._mainAxis._id;if(C[E])continue;C[E]=1;var D=g==="x"?"M0,"+L._offset+"v"+L._length:"M"+L._offset+",0h"+L._length;Z.drawGrid(h,p,{vals:k,counterAxis:L,layer:n.gridlayer.select("."+a),path:D,transFn:d});Z.drawZeroLine(h,p,{counterAxis:L,layer:n.zerolinelayer,path:D,transFn:d})}}var O=Z.getTickSigns(p);var P=[];if(p.ticks){var I=Z.makeTickPath(p,s,O[2]);var R;var z;if(p._anchorAxis&&p.mirror&&p.mirror!==true){R=Z.makeTickPath(p,l,O[3]);z=I+R}else{R="";z=I}var N;if(p.showdividers&&A&&p.tickson==="boundaries"){var F={};for(t=0;t<M.length;t++){F[M[t].x]=1}N=function(e){return F[e.x]?R:z}}else{N=z}Z.drawTicks(h,p,{vals:b,layer:o,path:N,transFn:d});if(p.mirror==="allticks"){P=Object.keys(p._linepositions||{})}}for(t=0;t<P.length;t++){r=P[t];n=v._plots[r];var j=p._linepositions[r]||[];var B=Z.makeTickPath(p,j[0],O[0])+Z.makeTickPath(p,j[1],O[1]);Z.drawTicks(h,p,{vals:b,layer:n[g+"axislayer"],path:B,transFn:d})}var H=[];H.push(function(){return Z.drawLabels(h,p,{vals:c,layer:o,plotinfo:n,transFn:y,labelFns:Z.makeLabelFns(p,s)})});if(p.type==="multicategory"){var U={x:2,y:10}[g];H.push(function(){var e={x:"height",y:"width"}[g];var t=_()[e]+U+(p._tickAngles[a+"tick"]?p.tickfont.size*W:0);return Z.drawLabels(h,p,{vals:Ce(p,c),layer:o,cls:a+"tick2",repositionOnUpdate:true,secondary:true,transFn:d,labelFns:Z.makeLabelFns(p,s+t*O[4])})});H.push(function(){p._depth=O[4]*(_("tick2")[p.side]-s);return Ie(h,p,{vals:M,layer:o,path:Z.makeTickPath(p,s,O[4],p._depth),transFn:d})})}else if(p.title.hasOwnProperty("standoff")){H.push(function(){p._depth=O[4]*(_()[p.side]-s)})}var V=Y.getComponentMethod("rangeslider","isVisible")(p);H.push(function(){var e=p.side.charAt(0);var t=X[p.side].charAt(0);var r=Z.getPxPosition(h,p);var n=A?p.ticklen:0;var a;var i;var o;var s;if(p.automargin||V){if(p.type==="multicategory"){a=_("tick2")}else{a=_();if(g==="x"&&e==="b"){p._depth=Math.max(a.width>0?a.bottom-r:0,n)}}}if(p.automargin){i={x:0,y:0,r:0,l:0,t:0,b:0};var l=[0,1];if(g==="x"){if(e==="b"){i[e]=p._depth}else{i[e]=p._depth=Math.max(a.width>0?r-a.top:0,n);l.reverse()}if(a.width>0){var c=a.right-(p._offset+p._length);if(c>0){i.xr=1;i.r=c}var u=p._offset-a.left;if(u>0){i.xl=0;i.l=u}}}else{if(e==="l"){i[e]=p._depth=Math.max(a.height>0?r-a.left:0,n)}else{i[e]=p._depth=Math.max(a.height>0?a.right-r:0,n);l.reverse()}if(a.height>0){var f=a.bottom-(p._offset+p._length);if(f>0){i.yb=0;i.b=f}var d=p._offset-a.top;if(d>0){i.yt=1;i.t=d}}}i[m]=p.anchor==="free"?p.position:p._anchorAxis.domain[l[0]];if(p.title.text!==v._dfltTitle[g]){i[e]+=Re(p)+(p.title.standoff||0)}if(p.mirror&&p.anchor!=="free"){o={x:0,y:0,r:0,l:0,t:0,b:0};o[t]=p.linewidth;if(p.mirror&&p.mirror!==true)o[t]+=n;if(p.mirror===true||p.mirror==="ticks"){o[m]=p._anchorAxis.domain[l[1]]}else if(p.mirror==="all"||p.mirror==="allticks"){o[m]=[p._counterDomainMin,p._counterDomainMax][l[1]]}}}if(V){s=Y.getComponentMethod("rangeslider","autoMarginOpts")(h,p)}q.autoMargin(h,He(p),i);q.autoMargin(h,Ue(p),o);q.autoMargin(h,Ve(p),s)});if(!e.skipTitle&&!(V&&p.side==="bottom")){H.push(function(){return ze(h,p)})}return G.syncOrAsync(H)};function Se(e,t){var n=[];var r;var a=function(e,t){var r=e.xbnd[t];if(r!==null){n.push(G.extendFlat({},e,{x:r}))}};if(t.length){for(r=0;r<t.length;r++){a(t[r],0)}a(t[r-1],1)}return n}function Ce(e,t){var r=[];var n={};for(var a=0;a<t.length;a++){var i=t[a];if(n[i.text2]){n[i.text2].push(i.x)}else{n[i.text2]=[i.x]}}for(var o in n){r.push(ve(e,G.interp(n[o],.5),o))}return r}function Le(e,t){var n=[];var r,a;var i=t.length&&t[t.length-1].x<t[0].x;var o=function(e,t){var r=e.xbnd[t];if(r!==null){n.push(G.extendFlat({},e,{x:r}))}};if(e.showdividers&&t.length){for(r=0;r<t.length;r++){var s=t[r];if(s.text2!==a){o(s,i?1:0)}a=s.text2}o(t[r-1],i?0:1)}return n}function Ee(e,t){var r,n;var a,i;if(e._selections[t].size()){r=Infinity;n=-Infinity;a=Infinity;i=-Infinity;e._selections[t].each(function(){var e=Be(this);var t=M.bBox(e.node().parentNode);r=Math.min(r,t.top);n=Math.max(n,t.bottom);a=Math.min(a,t.left);i=Math.max(i,t.right)})}else{r=0;n=0;a=0;i=0}return{top:r,bottom:n,left:a,right:i,height:n-r,width:i-a}}Z.getTickSigns=function(e){var t=e._id.charAt(0);var r={x:"top",y:"right"}[t];var n=e.side===r?1:-1;var a=[-1,1,n,-n];if(e.ticks!=="inside"===(t==="x")){a=a.map(function(e){return-e})}if(e.side){a.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)])}return a};Z.makeTransTickFn=function(t){return t._id.charAt(0)==="x"?function(e){return h(t._offset+t.l2p(e.x),0)}:function(e){return h(0,t._offset+t.l2p(e.x))}};Z.makeTransTickLabelFn=function(t){var e=Oe(t);var r=e[0];var n=e[1];return t._id.charAt(0)==="x"?function(e){return h(r+t._offset+t.l2p(De(e)),n)}:function(e){return h(n,r+t._offset+t.l2p(De(e)))}};function De(e){return e.periodX!==undefined?e.periodX:e.x}function Oe(e){var t=e.ticklabelposition||"";var r=function(e){return t.indexOf(e)!==-1};var n=r("top");var a=r("left");var i=r("right");var o=r("bottom");var s=r("inside");var l=o||a||n||i;if(!l&&!s)return[0,0];var c=e.side;var u=l?(e.tickwidth||0)/2:0;var f=U;var d=e.tickfont?e.tickfont.size:12;if(o||n){u+=d*H;f+=(e.linewidth||0)/2}if(a||i){u+=(e.linewidth||0)/2;f+=U}if(s&&c==="top"){f-=d*(1-H)}if(a||n)u=-u;if(c==="bottom"||c==="right")f=-f;return[l?u:0,s?f:0]}Z.makeTickPath=function(e,t,r,n){n=n!==undefined?n:e.ticklen;var a=e._id.charAt(0);var i=(e.linewidth||1)/2;return a==="x"?"M0,"+(t+i*r)+"v"+n*r:"M"+(t+i*r)+",0h"+n*r};Z.makeLabelFns=function(n,t,e){var r=n.ticklabelposition||"";var a=function(e){return r.indexOf(e)!==-1};var i=a("top");var o=a("left");var s=a("right");var l=a("bottom");var c=l||o||i||s;var u=a("inside");var f=r==="inside"&&n.ticks==="inside"||!u&&n.ticks==="outside"&&n.tickson!=="boundaries";var d=0;var h=0;var p=f?n.ticklen:0;if(u){p*=-1}else if(c){p=0}if(f){d+=p;if(e){var v=G.deg2rad(e);d=p*Math.cos(v)+1;h=p*Math.sin(v)}}if(n.showticklabels&&(f||n.showline)){d+=.2*n.tickfont.size}d+=(n.linewidth||1)/2*(u?-1:1);var g={labelStandoff:d,labelShift:h};var m,_,y,b;var x=0;var w=n.side;var A=n._id.charAt(0);var T=n.tickangle;var k;if(A==="x"){k=!u&&w==="bottom"||u&&w==="top";b=k?1:-1;if(u)b*=-1;m=h*b;_=t+d*b;y=k?1:-.2;if(Math.abs(T)===90){if(u){y+=B}else{if(T===-90&&w==="bottom"){y=H}else if(T===90&&w==="top"){y=B}else{y=.5}}x=B/2*(T/90)}g.xFn=function(e){return e.dx+m+x*e.fontSize};g.yFn=function(e){return e.dy+_+e.fontSize*y};g.anchorFn=function(e,t){if(c){if(o)return"end";if(s)return"start"}if(!C(t)||t===0||t===180){return"middle"}return t*b<0!==u?"end":"start"};g.heightFn=function(e,t,r){return t<-60||t>60?-.5*r:n.side==="top"!==u?-r:0}}else if(A==="y"){k=!u&&w==="left"||u&&w==="right";b=k?1:-1;if(u)b*=-1;m=d;_=h*b;y=0;if(!u&&Math.abs(T)===90){if(T===-90&&w==="left"||T===90&&w==="right"){y=H}else{y=.5}}if(u){var M=C(T)?+T:0;if(M!==0){var S=G.deg2rad(M);x=Math.abs(Math.sin(S))*H*b;y=0}}g.xFn=function(e){return e.dx+t-(m+e.fontSize*y)*b+x*e.fontSize};g.yFn=function(e){return e.dy+_+e.fontSize*B};g.anchorFn=function(e,t){if(C(t)&&Math.abs(t)===90){return"middle"}return k?"end":"start"};g.heightFn=function(e,t,r){if(n.side==="right")t*=-1;return t<-30?-r:t<30?-.5*r:0}}return g};function Pe(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}Z.drawTicks=function(e,t,r){r=r||{};var n=t._id+"tick";var a=r.vals;if(t.ticklabelmode==="period"){a=a.slice();a.shift()}var i=r.layer.selectAll("path."+n).data(t.ticks?a:[],Pe);i.exit().remove();i.enter().append("path").classed(n,1).classed("ticks",1).classed("crisp",r.crisp!==false).call(u.stroke,t.tickcolor).style("stroke-width",M.crispRound(e,t.tickwidth,1)+"px").attr("d",r.path).style("display",null);$e(t,[F]);i.attr("transform",r.transFn)};Z.drawGrid=function(e,t,r){r=r||{};var n=t._id+"grid";var a=r.vals;var i=r.counterAxis;if(t.showgrid===false){a=[]}else if(i&&Z.shouldShowZeroLine(e,t,i)){var o=t.tickmode==="array";for(var s=0;s<a.length;s++){var l=a[s].x;if(o?!l:Math.abs(l)<t.dtick/100){a=a.slice(0,s).concat(a.slice(s+1));if(o)s--;else break}}}var c=r.layer.selectAll("path."+n).data(a,Pe);c.exit().remove();c.enter().append("path").classed(n,1).classed("crisp",r.crisp!==false);t._gw=M.crispRound(e,t.gridwidth,1);c.attr("transform",r.transFn).attr("d",r.path).call(u.stroke,t.gridcolor||"#ddd").style("stroke-width",t._gw+"px").style("display",null);$e(t,[N]);if(typeof r.path==="function")c.attr("d",r.path)};Z.drawZeroLine=function(e,t,r){r=r||r;var n=t._id+"zl";var a=Z.shouldShowZeroLine(e,t,r.counterAxis);var i=r.layer.selectAll("path."+n).data(a?[{x:0,id:t._id}]:[]);i.exit().remove();i.enter().append("path").classed(n,1).classed("zl",1).classed("crisp",r.crisp!==false).each(function(){r.layer.selectAll("path").sort(function(e,t){return o(e.id,t.id)})});i.attr("transform",r.transFn).attr("d",r.path).call(u.stroke,t.zerolinecolor||u.defaultLine).style("stroke-width",M.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null);$e(t,[c])};Z.drawLabels=function(p,m,_){_=_||{};var v=p._fullLayout;var e=m._id;var y=e.charAt(0);var t=_.cls||e+"tick";var b=_.vals;var d=_.labelFns;var x=_.secondary?0:m.tickangle;var r=(m._prevTickAngles||{})[t];var w=_.layer.selectAll("g."+t).data(m.showticklabels?b:[],Pe);var n=[];w.enter().append("g").classed(t,1).append("text").attr("text-anchor","middle").each(function(e){var t=k.select(this);var r=p._promises.length;t.call(g.positionText,d.xFn(e),d.yFn(e)).call(M.font,e.font,e.fontSize,e.fontColor).text(e.text).call(g.convertToTspans,p);if(p._promises[r]){n.push(p._promises.pop().then(function(){A(t,x)}))}else{A(t,x)}});$e(m,[j]);w.exit().remove();if(_.repositionOnUpdate){w.each(function(e){k.select(this).select("text").call(g.positionText,d.xFn(e),d.yFn(e))})}function A(e,f){e.each(function(e){var t=k.select(this);var r=t.select(".text-math-group");var n=d.anchorFn(e,f);var a=_.transFn.call(t.node(),e)+(C(f)&&+f!==0?" rotate("+f+","+d.xFn(e)+","+(d.yFn(e)-e.fontSize/2)+")":"");var i=g.lineCount(t);var o=W*e.fontSize;var s=d.heightFn(e,C(f)?+f:0,(i-1)*o);if(s){a+=h(0,s)}if(r.empty()){var l=t.select("text");l.attr({transform:a,"text-anchor":n});l.style("opacity",1);if(m._adjustTickLabelsOverflow){m._adjustTickLabelsOverflow()}}else{var c=M.bBox(r.node()).width;var u=c*{end:-.5,start:.5}[n];r.attr("transform",a+h(u,0))}})}m._adjustTickLabelsOverflow=function(){var e=m.ticklabeloverflow;if(!e||e==="allow")return;var o=e.indexOf("hide")!==-1;var s=m._id.charAt(0)==="x";var t=0;var r=s?p._fullLayout.width:p._fullLayout.height;if(e.indexOf("domain")!==-1){var n=G.simpleMap(m.range,m.r2l);t=m.l2p(n[0])+m._offset;r=m.l2p(n[1])+m._offset}var l=Math.min(t,r);var c=Math.max(t,r);var u=m.side;var f=Infinity;var d=-Infinity;w.each(function(e){var t=k.select(this);var r=t.select(".text-math-group");if(r.empty()){var n=M.bBox(t.node());var a=0;if(s){if(n.right>c)a=1;else if(n.left<l)a=1}else{if(n.bottom>c)a=1;else if(n.top+(m.tickangle?0:e.fontSize/4)<l)a=1}var i=t.select("text");if(a){if(o)i.style("opacity",0)}else{i.style("opacity",1);if(u==="bottom"||u==="right"){f=Math.min(f,s?n.top:n.left)}else{f=-Infinity}if(u==="top"||u==="left"){d=Math.max(d,s?n.bottom:n.right)}else{d=Infinity}}}});for(var a in v._plots){var i=v._plots[a];if(m._id!==i.xaxis._id&&m._id!==i.yaxis._id)continue;var h=s?i.yaxis:i.xaxis;if(h){h["_visibleLabelMin_"+m._id]=f;h["_visibleLabelMax_"+m._id]=d}}};m._hideCounterAxisInsideTickLabels=function(e){var t=m._id.charAt(0)==="x";var r=[];for(var n in v._plots){var a=v._plots[n];if(m._id!==a.xaxis._id&&m._id!==a.yaxis._id)continue;r.push(t?a.yaxis:a.xaxis)}r.forEach(function(i,o){if(i&&Je(i)){(e||[c,N,F,j]).forEach(function(n){var a=n.K==="tick"&&n.L==="text"&&m.ticklabelmode==="period";var e=v._plots[m._mainSubplot];var t;if(n.K===c.K)t=e.zerolinelayer.selectAll("."+m._id+"zl");else if(n.K===N.K)t=e.gridlayer.selectAll("."+m._id);else t=e[m._id.charAt(0)+"axislayer"];t.each(function(){var e=k.select(this);if(n.L)e=e.selectAll(n.L);e.each(function(e){var t=m.l2p(a?De(e):e.x)+m._offset;var r=k.select(this);if(t<m["_visibleLabelMax_"+i._id]&&t>m["_visibleLabelMin_"+i._id]){r.style("display","none")}else if(n.K==="tick"&&!o){r.style("display",null)}})})})}})};A(w,r+1?r:x);function a(){return n.length&&Promise.all(n)}var T=null;function i(){A(w,x);if(b.length&&y==="x"&&!C(x)&&(m.type!=="log"||String(m.dtick).charAt(0)!=="D")){T=0;var a=0;var i=[];var e;w.each(function(e){a=Math.max(a,e.fontSize);var t=m.l2p(e.x);var r=Be(this);var n=M.bBox(r.node());i.push({top:0,bottom:10,height:10,left:t-n.width/2,right:t+n.width/2+2,width:n.width+2})});if((m.tickson==="boundaries"||m.showdividers)&&!_.secondary){var t=2;if(m.ticks)t+=m.tickwidth/2;for(e=0;e<i.length;e++){var r=b[e].xbnd;var n=i[e];if(r[0]!==null&&n.left-m.l2p(r[0])<t||r[1]!==null&&m.l2p(r[1])-n.right<t){T=90;break}}}else{var o=b.length;var s=Math.abs((b[o-1].x-b[0].x)*m._m)/(o-1);var l=m.ticklabelposition||"";var c=function(e){return l.indexOf(e)!==-1};var u=c("top");var f=c("left");var d=c("right");var h=c("bottom");var p=h||f||u||d;var v=!p?0:(m.tickwidth||0)+2*U;var g=s<a*2.5||m.type==="multicategory";for(e=0;e<i.length-1;e++){if(G.bBoxIntersect(i[e],i[e+1],v)){T=g?90:30;break}}}if(T){A(w,T)}}}if(m._selections){m._selections[t]=w}var o=[a];if(m.automargin&&v._redrawFromAutoMarginCount&&r===90){T=90;o.push(function(){A(w,r)})}else{o.push(i)}if(m._tickAngles){o.push(function(){m._tickAngles[t]=T===null?C(x)?x:0:T})}var s=m._anchorAxis;if(s&&s.autorange&&Je(m)&&!V(v,m._id)){if(!v._insideTickLabelsAutorange){v._insideTickLabelsAutorange={}}v._insideTickLabelsAutorange[s._name+".autorange"]=s.autorange;o.push(function e(){w.each(function(e,t){var r=Be(this);var n=r.select(".text-math-group");if(n.empty()){m._vals[t].bb=M.bBox(r.node())}})})}var l=G.syncOrAsync(o);if(l&&l.then)p._promises.push(l);return l};function Ie(e,t,r){var n=t._id+"divider";var a=r.vals;var i=r.layer.selectAll("path."+n).data(a,Pe);i.exit().remove();i.enter().insert("path",":first-child").classed(n,1).classed("crisp",1).call(u.stroke,t.dividercolor).style("stroke-width",M.crispRound(e,t.dividerwidth,1)+"px");i.attr("transform",r.transFn).attr("d",r.path)}Z.getPxPosition=function(e,t){var r=e._fullLayout._size;var n=t._id.charAt(0);var a=t.side;var i;if(t.anchor!=="free"){i=t._anchorAxis}else if(n==="x"){i={_offset:r.t+(1-(t.position||0))*r.h,_length:0}}else if(n==="y"){i={_offset:r.l+(t.position||0)*r.w,_length:0}}if(a==="top"||a==="left"){return i._offset}else if(a==="bottom"||a==="right"){return i._offset+i._length}};function Re(e){var t=e.title.font.size;var r=(e.title.text.match(g.BR_TAG_ALL)||[]).length;if(e.title.hasOwnProperty("standoff")){return r?t*(H+r*W):t*H}else{return r?t*(r+1)*W:t}}function ze(e,t){var r=e._fullLayout;var n=t._id;var a=n.charAt(0);var i=t.title.font.size;var o;if(t.title.hasOwnProperty("standoff")){o=t._depth+t.title.standoff+Re(t)}else{var s=Je(t);if(t.type==="multicategory"){o=t._depth}else{var l=1.5*i;if(s){l=.5*i;if(t.ticks==="outside"){l+=t.ticklen}}o=10+l+(t.linewidth?t.linewidth-1:0)}if(!s){if(a==="x"){o+=t.side==="top"?i*(t.showticklabels?1:0):i*(t.showticklabels?1.5:.5)}else{o+=t.side==="right"?i*(t.showticklabels?1:.5):i*(t.showticklabels?.5:0)}}}var c=Z.getPxPosition(e,t);var u,f,d;if(a==="x"){f=t._offset+t._length/2;d=t.side==="top"?c-o:c+o}else{d=t._offset+t._length/2;f=t.side==="right"?c+o:c-o;u={rotate:"-90",offset:0}}var h;if(t.type!=="multicategory"){var p=t._selections[t._id+"tick"];h={selection:p,side:t.side};if(p&&p.node()&&p.node().parentNode){var v=M.getTranslate(p.node().parentNode);h.offsetLeft=v.x;h.offsetTop=v.y}if(t.title.hasOwnProperty("standoff")){h.pad=0}}return m.draw(e,n+"title",{propContainer:t,propName:t._name+".title.text",placeholder:r._dfltTitle[a],avoid:h,transform:u,attributes:{x:f,y:d,"text-anchor":"middle"}})}Z.shouldShowZeroLine=function(e,t,r){var n=G.simpleMap(t.range,t.r2l);return n[0]*n[1]<=0&&t.zeroline&&(t.type==="linear"||t.type==="-")&&!(t.rangebreaks&&t.maskBreaks(0)===z)&&(Ne(t,0)||!Fe(e,t,r,n)||je(e,t))};Z.clipEnds=function(t,e){return e.filter(function(e){return Ne(t,e.x)})};function Ne(e,t){var r=e.l2p(t);return r>1&&r<e._length-1}function Fe(e,i,t,r){var n=t._mainAxis;if(!n)return;var a=e._fullLayout;var o=i._id.charAt(0);var s=Z.counterLetter(i._id);var l=i._offset+(Math.abs(r[0])<Math.abs(r[1])===(o==="x")?0:i._length);function c(e){if(!e.showline||!e.linewidth)return false;var t=Math.max((e.linewidth+i.zerolinewidth)/2,1);function r(e){return typeof e==="number"&&Math.abs(e-l)<t}if(r(e._mainLinePosition)||r(e._mainMirrorPosition)){return true}var n=e._linepositions||{};for(var a in n){if(r(n[a][0])||r(n[a][1])){return true}}}var u=a._plots[t._mainSubplot];if(!(u.mainplotinfo||u).overlays.length){return c(t,l)}var f=Z.list(e,s);for(var d=0;d<f.length;d++){var h=f[d];if(h._mainAxis===n&&c(h,l)){return true}}}function je(e,t){var r=e._fullData;var n=t._mainSubplot;var a=t._id.charAt(0);for(var i=0;i<r.length;i++){var o=r[i];if(o.visible===true&&o.xaxis+o.yaxis===n){if(Y.traceIs(o,"bar-like")&&o.orientation==={x:"h",y:"v"}[a])return true;if(o.fill&&o.fill.charAt(o.fill.length-1)===a)return true}}return false}function Be(e){var t=k.select(e);var r=t.select(".text-math-group");return r.empty()?t.select("text"):r}Z.allowAutoMargin=function(e){var t=Z.list(e,"",true);for(var r=0;r<t.length;r++){var n=t[r];if(n.automargin){q.allowAutoMargin(e,He(n));if(n.mirror){q.allowAutoMargin(e,Ue(n))}}if(Y.getComponentMethod("rangeslider","isVisible")(n)){q.allowAutoMargin(e,Ve(n))}}};function He(e){return e._id+".automargin"}function Ue(e){return He(e)+".mirror"}function Ve(e){return e._id+".rangeslider"}Z.swap=function(e,t){var r=qe(e,t);for(var n=0;n<r.length;n++){Ge(e,r[n].x,r[n].y)}};function qe(e,t){var r=[];var n,a;for(n=0;n<t.length;n++){var i=[];var o=e._fullData[t[n]].xaxis;var s=e._fullData[t[n]].yaxis;if(!o||!s)continue;for(a=0;a<r.length;a++){if(r[a].x.indexOf(o)!==-1||r[a].y.indexOf(s)!==-1){i.push(a)}}if(!i.length){r.push({x:[o],y:[s]});continue}var l=r[i[0]];var c;if(i.length>1){for(a=1;a<i.length;a++){c=r[i[a]];Ye(l.x,c.x);Ye(l.y,c.y)}}Ye(l.x,[o]);Ye(l.y,[s])}return r}function Ye(e,t){for(var r=0;r<t.length;r++){if(e.indexOf(t[r])===-1)e.push(t[r])}}function Ge(e,t,r){var n=[];var a=[];var i=e.layout;var o,s;for(o=0;o<t.length;o++)n.push(Z.getFromId(e,t[o]));for(o=0;o<r.length;o++)a.push(Z.getFromId(e,r[o]));var l=Object.keys(b);var c=["anchor","domain","overlaying","position","side","tickangle","editType"];var u=["linear","log"];for(o=0;o<l.length;o++){var f=l[o];var d=n[0][f];var h=a[0][f];var p=true;var v=false;var g=false;if(f.charAt(0)==="_"||typeof d==="function"||c.indexOf(f)!==-1){continue}for(s=1;s<n.length&&p;s++){var m=n[s][f];if(f==="type"&&u.indexOf(d)!==-1&&u.indexOf(m)!==-1&&d!==m){v=true}else if(m!==d)p=false}for(s=1;s<a.length&&p;s++){var _=a[s][f];if(f==="type"&&u.indexOf(h)!==-1&&u.indexOf(_)!==-1&&h!==_){g=true}else if(a[s][f]!==h)p=false}if(p){if(v)i[n[0]._name].type="linear";if(g)i[a[0]._name].type="linear";We(i,f,n,a,e._fullLayout._dfltTitle)}}for(o=0;o<e._fullLayout.annotations.length;o++){var y=e._fullLayout.annotations[o];if(t.indexOf(y.xref)!==-1&&r.indexOf(y.yref)!==-1){G.swapAttrs(i.annotations[o],["?"])}}}function We(e,t,r,n,a){var i=G.nestedProperty;var o=i(e[r[0]._name],t).get();var s=i(e[n[0]._name],t).get();var l;if(t==="title"){if(o&&o.text===a.x){o.text=a.y}if(s&&s.text===a.y){s.text=a.x}}for(l=0;l<r.length;l++){i(e,r[l]._name+"."+t).set(s)}for(l=0;l<n.length;l++){i(e,n[l]._name+"."+t).set(o)}}function Xe(e){return e._id==="angularaxis"}function Ze(e,t){var r=t._rangebreaks.length;for(var n=0;n<r;n++){var a=t._rangebreaks[n];if(e>=a.min&&e<a.max){return a.max}}return e}function Je(e){return(e.ticklabelposition||"").indexOf("inside")!==-1}function $e(e,t){if(Je(e._anchorAxis||{})){if(e._hideCounterAxisInsideTickLabels){e._hideCounterAxisInsideTickLabels(t)}}}},{"../../components/color":155,"../../components/drawing":177,"../../components/titles":253,"../../constants/alignment":260,"../../constants/numerical":265,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/plots":366,"../../registry":373,"./autorange":330,"./axis_autotype":332,"./axis_ids":335,"./clean_ticks":337,"./layout_attributes":346,"./set_convert":352,"@plotly/d3":20,"fast-isnumeric":31}],332:[function(e,t,r){"use strict";var f=e("fast-isnumeric");var n=e("../../lib");var d=e("../../constants/numerical").BADNUM;var u=n.isArrayOrTypedArray;var h=n.isDateTime;var p=n.cleanNumber;var v=Math.round;t.exports=function e(t,r,n){var a=t;var i=n.noMultiCategory;if(u(a)&&!a.length)return"-";if(!i&&b(a))return"multicategory";if(i&&Array.isArray(a[0])){var o=[];for(var s=0;s<a.length;s++){if(u(a[s])){for(var l=0;l<a[s].length;l++){o.push(a[s][l])}}}a=o}if(m(a,r))return"date";var c=n.autotypenumbers!=="strict";if(y(a,c))return"category";if(g(a,c))return"linear";return"-"};function a(e,t){return t?f(e):typeof e==="number"}function g(e,t){var r=e.length;for(var n=0;n<r;n++){if(a(e[n],t))return true}return false}function m(e,t){var r=e.length;var n=_(r);var a=0;var i=0;var o={};for(var s=0;s<r;s+=n){var l=v(s);var c=e[l];var u=String(c);if(o[u])continue;o[u]=1;if(h(c,t))a++;if(f(c))i++}return a>i*2}function _(e){return Math.max(1,(e-1)/1e3)}function y(e,t){var r=e.length;var n=_(r);var a=0;var i=0;var o={};for(var s=0;s<r;s+=n){var l=v(s);var c=e[l];var u=String(c);if(o[u])continue;o[u]=1;var f=typeof c;if(f==="boolean")i++;else if(t?p(c)!==d:f==="number")a++;else if(f==="string")i++}return i>a*2}function b(e){return u(e[0])&&u(e[1])}},{"../../constants/numerical":265,"../../lib":285,"fast-isnumeric":31}],333:[function(e,t,r){"use strict";var d=e("fast-isnumeric");var S=e("../../registry");var C=e("../../lib");var L=e("../array_container_defaults");var E=e("./layout_attributes");var D=e("./tick_value_defaults");var O=e("./tick_mark_defaults");var P=e("./tick_label_defaults");var I=e("./category_order_defaults");var R=e("./line_grid_defaults");var z=e("./set_convert");var N=e("./constants").WEEKDAY_PATTERN;var h=e("./constants").HOUR_PATTERN;t.exports=function e(t,r,n,a,i){var o=a.letter;var s=a.font||{};var l=a.splomStash||{};var c=n("visible",!a.visibleDflt);var u=r._template||{};var f=r.type||u.type||"-";var d;if(f==="date"){var h=S.getComponentMethod("calendars","handleDefaults");h(t,r,"calendar",a.calendar);if(!a.noTicklabelmode){d=n("ticklabelmode")}}var p="";if(!a.noTicklabelposition||f==="multicategory"){p=C.coerce(t,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:d==="period"?["outside","inside"]:o==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")}if(!a.noTicklabeloverflow){n("ticklabeloverflow",p.indexOf("inside")!==-1?"hide past domain":f==="category"||f==="multicategory"?"allow":"hide past div")}z(r,i);var v=!r.isValidRange(t.range);if(v&&a.reverseDflt)v="reversed";var g=n("autorange",v);if(g&&(f==="linear"||f==="-"))n("rangemode");n("range");r.cleanRange();I(t,r,n,a);if(f!=="category"&&!a.noHover)n("hoverformat");var m=n("color");var _=m!==E.color.dflt?m:s.color;var y=l.label||i._dfltTitle[o];P(t,r,n,f,a,{pass:1});if(!c)return r;n("title.text",y);C.coerceFont(n,"title.font",{family:s.family,size:C.bigFont(s.size),color:_});D(t,r,n,f);P(t,r,n,f,a,{pass:2});O(t,r,n,a);R(t,r,n,{dfltColor:m,bgColor:a.bgColor,showGrid:a.showGrid,attributes:E});if(r.showline||r.ticks)n("mirror");if(a.automargin)n("automargin");var b=f==="multicategory";if(!a.noTickson&&(f==="category"||b)&&(r.ticks||r.showgrid)){var x;if(b)x="boundaries";var w=n("tickson",x);if(w==="boundaries"){delete r.ticklabelposition}}if(b){var A=n("showdividers");if(A){n("dividercolor");n("dividerwidth")}}if(f==="date"){L(t,r,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:F});if(!r.rangebreaks.length){delete r.rangebreaks}else{for(var T=0;T<r.rangebreaks.length;T++){if(r.rangebreaks[T].pattern===N){r._hasDayOfWeekBreaks=true;break}}z(r,i);if(i._has("scattergl")||i._has("splom")){for(var k=0;k<a.data.length;k++){var M=a.data[k];if(M.type==="scattergl"||M.type==="splom"){M.visible=false;C.warn(M.type+" traces do not work on axes with rangebreaks."+" Setting trace "+M.index+" to `visible: false`.")}}}}}return r};function F(r,n,e){function t(e,t){return C.coerce(r,n,E.rangebreaks,e,t)}var a=t("enabled");if(a){var i=t("bounds");if(i&&i.length>=2){var o="";var s,l;if(i.length===2){for(s=0;s<2;s++){l=p(i[s]);if(l){o=N;break}}}var c=t("pattern",o);if(c===N){for(s=0;s<2;s++){l=p(i[s]);if(l){n.bounds[s]=i[s]=l-1}}}if(c){for(s=0;s<2;s++){l=i[s];switch(c){case N:if(!d(l)){n.enabled=false;return}l=+l;if(l!==Math.floor(l)||l<0||l>=7){n.enabled=false;return}n.bounds[s]=i[s]=l;break;case h:if(!d(l)){n.enabled=false;return}l=+l;if(l<0||l>24){n.enabled=false;return}n.bounds[s]=i[s]=l;break}}}if(e.autorange===false){var u=e.range;if(u[0]<u[1]){if(i[0]<u[0]&&i[1]>u[1]){n.enabled=false;return}}else if(i[0]>u[0]&&i[1]<u[1]){n.enabled=false;return}}}else{var f=t("values");if(f&&f.length){t("dvalue")}else{n.enabled=false;return}}}}var n={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function p(e){if(typeof e!=="string")return;return n[e.substr(0,3).toLowerCase()]}},{"../../lib":285,"../../registry":373,"../array_container_defaults":326,"./category_order_defaults":336,"./constants":338,"./layout_attributes":346,"./line_grid_defaults":348,"./set_convert":352,"./tick_label_defaults":353,"./tick_mark_defaults":354,"./tick_value_defaults":355,"fast-isnumeric":31}],334:[function(e,t,r){"use strict";var n=e("../../constants/docs");var a=n.FORMAT_LINK;var i=n.DATE_FORMAT_LINK;function o(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?s:l)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}}function s(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+a+"."].join(" ")}function l(e,t){return s(e,t)+[" And for dates see: "+i+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}t.exports={axisHoverFormat:o,descriptionOnlyNumbers:s,descriptionWithDates:l}},{"../../constants/docs":262}],335:[function(e,t,u){"use strict";var o=e("../../registry");var s=e("./constants");u.id2name=function e(t){if(typeof t!=="string"||!t.match(s.AX_ID_PATTERN))return;var r=t.split(" ")[0].substr(1);if(r==="1")r="";return t.charAt(0)+"axis"+r};u.name2id=function e(t){if(!t.match(s.AX_NAME_PATTERN))return;var r=t.substr(5);if(r==="1")r="";return t.charAt(0)+r};u.cleanId=function e(t,r,n){var a=/( domain)$/.test(t);if(typeof t!=="string"||!t.match(s.AX_ID_PATTERN))return;if(r&&t.charAt(0)!==r)return;if(a&&!n)return;var i=t.split(" ")[0].substr(1).replace(/^0+/,"");if(i==="1")i="";return t.charAt(0)+i+(a&&n?" domain":"")};u.list=function(e,t,r){var n=e._fullLayout;if(!n)return[];var a=u.listIds(e,t);var i=new Array(a.length);var o;for(o=0;o<a.length;o++){var s=a[o];i[o]=n[s.charAt(0)+"axis"+s.substr(1)]}if(!r){var l=n._subplots.gl3d||[];for(o=0;o<l.length;o++){var c=n[l[o]];if(t)i.push(c[t+"axis"]);else i.push(c.xaxis,c.yaxis,c.zaxis)}}return i};u.listIds=function(e,t){var r=e._fullLayout;if(!r)return[];var n=r._subplots;if(t)return n[t+"axis"];return n.xaxis.concat(n.yaxis)};u.getFromId=function(e,t,r){var n=e._fullLayout;t=t===undefined||typeof t!=="string"?t:t.replace(" domain","");if(r==="x")t=t.replace(/y[0-9]*/,"");else if(r==="y")t=t.replace(/x[0-9]*/,"");return n[u.id2name(t)]};u.getFromTrace=function(e,t,r){var n=e._fullLayout;var a=null;if(o.traceIs(t,"gl3d")){var i=t.scene;if(i.substr(0,5)==="scene"){a=n[i][r+"axis"]}}else{a=u.getFromId(e,t[r+"axis"]||r)}return a};u.idSort=function(e,t){var r=e.charAt(0);var n=t.charAt(0);if(r!==n)return r>n?1:-1;return+(e.substr(1)||1)-+(t.substr(1)||1)};u.ref2id=function(e){return/^[xyz]/.test(e)?e.split(" ")[0]:false};function r(e,t){if(t&&t.length){for(var r=0;r<t.length;r++){if(t[r][e])return true}}return false}u.isLinked=function(e,t){return r(t,e._axisMatchGroups)||r(t,e._axisConstraintGroups)}},{"../../registry":373,"./constants":338}],336:[function(e,t,r){"use strict";function u(e,t){var r=t.dataAttr||e._id.charAt(0);var n={};var a;var i,o;if(t.axData){a=t.axData}else{a=[];for(i=0;i<t.data.length;i++){var s=t.data[i];if(s[r+"axis"]===e._id){a.push(s)}}}for(i=0;i<a.length;i++){var l=a[i][r];for(o=0;o<l.length;o++){var c=l[o];if(c!==null&&c!==undefined){n[c]=1}}}return Object.keys(n)}t.exports=function e(t,r,n,a){if(r.type!=="category")return;var i=t.categoryarray;var o=Array.isArray(i)&&i.length>0;var s;if(o)s="array";var l=n("categoryorder",s);var c;if(l==="array"){c=n("categoryarray")}if(!o&&l==="array"){l=r.categoryorder="trace"}if(l==="trace"){r._initialCategories=[]}else if(l==="array"){r._initialCategories=c.slice()}else{c=u(r,a).sort();if(l==="category ascending"){r._initialCategories=c}else if(l==="category descending"){r._initialCategories=c.reverse()}}}},{}],337:[function(e,t,r){"use strict";var l=e("fast-isnumeric");var a=e("../../lib");var n=e("../../constants/numerical");var c=n.ONEDAY;var i=n.ONEWEEK;r.dtick=function(e,t){var r=t==="log";var n=t==="date";var a=t==="category";var i=n?c:1;if(!e)return i;if(l(e)){e=Number(e);if(e<=0)return i;if(a){return Math.max(1,Math.round(e))}if(n){return Math.max(.1,e)}return e}if(typeof e!=="string"||!(n||r)){return i}var o=e.charAt(0);var s=e.substr(1);s=l(s)?Number(s):0;if(s<=0||!(n&&o==="M"&&s===Math.round(s)||r&&o==="L"||r&&o==="D"&&(s===1||s===2))){return i}return e};r.tick0=function(e,t,r,n){if(t==="date"){return a.cleanDate(e,a.dateTick0(r,n%i===0?1:0))}if(n==="D1"||n==="D2"){return undefined}return l(e)?Number(e):0}},{"../../constants/numerical":265,"../../lib":285,"fast-isnumeric":31}],338:[function(e,t,r){"use strict";var n=e("../../lib/regex").counter;t.exports={idRegex:{x:n("x","( domain)?"),y:n("y","( domain)?")},attrRegex:n("[xy]axis"),xAxisMatch:n("xaxis"),yAxisMatch:n("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":301}],339:[function(e,t,r){"use strict";var C=e("../../lib");var j=e("./autorange");var B=e("./axis_ids").id2name;var L=e("./layout_attributes");var H=e("./scale_zoom");var T=e("./set_convert");var U=e("../../constants/numerical").ALMOST_EQUAL;var i=e("../../constants/alignment").FROM_BL;r.handleDefaults=function(e,r,t){var n=t.axIds;var a=t.axHasImage;var i=r._axisConstraintGroups=[];var o=r._axisMatchGroups=[];var s,l,c,u,f,d,h,p;for(s=0;s<n.length;s++){u=B(n[s]);f=e[u];d=r[u];k(f,d,{axIds:n,layoutOut:r,hasImage:a[u]})}function v(e,t){for(s=0;s<e.length;s++){l=e[s];for(c in l){r[B(c)][t]=l}}}v(o,"_matchGroup");for(s=0;s<i.length;s++){l=i[s];for(c in l){d=r[B(c)];if(d.fixedrange){for(var g in l){var m=B(g);if((e[m]||{}).fixedrange===false){C.warn("fixedrange was specified as false for axis "+m+" but was overridden because another "+"axis in its constraint group has fixedrange true")}r[m].fixedrange=true}break}}}s=0;while(s<i.length){l=i[s];for(c in l){d=r[B(c)];if(d._matchGroup&&Object.keys(d._matchGroup).length===Object.keys(l).length){i.splice(s,1);s--}break}s++}v(i,"_constraintGroup");var _=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"];var y=false;var b=false;function x(){p=d[h];if(h==="rangebreaks"){b=d._hasDayOfWeekBreaks}}for(s=0;s<o.length;s++){l=o[s];for(var w=0;w<_.length;w++){h=_[w];p=null;var A;for(c in l){u=B(c);f=e[u];d=r[u];if(!(h in d)){continue}if(!d.matches){A=d;if(h in f){x();break}}if(p===null&&h in f){x()}}if(h==="range"&&p){y=true}if(h==="autorange"&&p===null&&y){p=false}if(p===null&&h in A){p=A[h]}if(p!==null){for(c in l){d=r[B(c)];d[h]=h==="range"?p.slice():p;if(h==="rangebreaks"){d._hasDayOfWeekBreaks=b;T(d,r)}}}}}};function k(r,n,e){var t=e.axIds;var a=e.layoutOut;var i=e.hasImage;var o=a._axisConstraintGroups;var s=a._axisMatchGroups;var l=n._id;var c=l.charAt(0);var u=((a._splomAxes||{})[c]||{})[l]||{};var f=n._id;var d=f.charAt(0)==="x";n._matchGroup=null;n._constraintGroup=null;function h(e,t){return C.coerce(r,n,L,e,t)}h("constrain",i?"domain":"range");C.coerce(r,n,{constraintoward:{valType:"enumerated",values:d?["left","center","right"]:["bottom","middle","top"],dflt:d?"center":"middle"}},"constraintoward");var p=n.type;var v,g;var m=[];for(v=0;v<t.length;v++){g=t[v];if(g===f)continue;var _=a[B(g)];if(_.type===p){m.push(g)}}var y=D(o,f);if(y){var b=[];for(v=0;v<m.length;v++){g=m[v];if(!y[g])b.push(g)}m=b}var x=m.length;var w,A;if(x&&(r.matches||u.matches)){w=C.coerce(r,n,{matches:{valType:"enumerated",values:m,dflt:m.indexOf(u.matches)!==-1?u.matches:undefined}},"matches")}var T=i&&!d?n.anchor:undefined;if(x&&!w&&(r.scaleanchor||T)){A=C.coerce(r,n,{scaleanchor:{valType:"enumerated",values:m}},"scaleanchor",T)}if(w){n._matchGroup=O(s,f,w,1);var k=a[B(w)];var M=E(a,n)/E(a,k);if(d!==(w.charAt(0)==="x")){M=(d?"x":"y")+M}O(o,f,w,M)}else if(r.matches&&t.indexOf(r.matches)!==-1){C.warn("ignored "+n._name+'.matches: "'+r.matches+'" to avoid an infinite loop')}if(A){var S=h("scaleratio");if(!S)S=n.scaleratio=1;O(o,f,A,S)}else if(r.scaleanchor&&t.indexOf(r.scaleanchor)!==-1){C.warn("ignored "+n._name+'.scaleanchor: "'+r.scaleanchor+'" to avoid either an infinite loop '+"and possibly inconsistent scaleratios, or because this axis "+"declares a *matches* constraint.")}}function E(e,t){var r=t.domain;if(!r){r=e[B(t.overlaying)].domain}return r[1]-r[0]}function D(e,t){for(var r=0;r<e.length;r++){if(e[r][t]){return e[r]}}return null}function O(e,t,r,n){var a,i,o,s,l;var c=D(e,t);if(c===null){c={};c[t]=1;l=e.length;e.push(c)}else{l=e.indexOf(c)}var u=Object.keys(c);for(a=0;a<e.length;a++){o=e[a];if(a!==l&&o[r]){var f=o[r];for(i=0;i<u.length;i++){s=u[i];o[s]=h(f,h(n,c[s]))}e.splice(l,1);return}}if(n!==1){for(i=0;i<u.length;i++){var d=u[i];c[d]=h(n,c[d])}}c[r]=1}function h(e,t){var r="";var n="";var a,i;if(typeof e==="string"){r=e.match(/^[xy]*/)[0];a=r.length;e=+e.substr(a)}if(typeof t==="string"){n=t.match(/^[xy]*/)[0];i=n.length;t=+t.substr(i)}var o=e*t;if(!a&&!i){return o}if(!a||!i||r.charAt(0)===n.charAt(0)){return r+n+e*t}if(a===i){return o}return(a>i?r.substr(i):n.substr(a))+o}function V(e,t){var r=t._size;var n=r.h/r.w;var a={};var i=Object.keys(e);for(var o=0;o<i.length;o++){var s=i[o];var l=e[s];if(typeof l==="string"){var c=l.match(/^[xy]*/)[0];var u=c.length;l=+l.substr(u);var f=c.charAt(0)==="y"?n:1/n;for(var d=0;d<u;d++){l*=f}}a[s]=l}return a}r.enforce=function e(t){var r=t._fullLayout;var n=r._axisConstraintGroups||[];var a,i,o,s,l,c,u,f;for(a=0;a<n.length;a++){o=V(n[a],r);var d=Object.keys(o);var h=Infinity;var p=0;var v=Infinity;var g={};var m={};var _=false;for(i=0;i<d.length;i++){s=d[i];m[s]=l=r[B(s)];if(l._inputDomain)l.domain=l._inputDomain.slice();else l._inputDomain=l.domain.slice();if(!l._inputRange)l._inputRange=l.range.slice();l.setScale();g[s]=c=Math.abs(l._m)/o[s];h=Math.min(h,c);if(l.constrain==="domain"||!l._constraintShrinkable){v=Math.min(v,c)}delete l._constraintShrinkable;p=Math.max(p,c);if(l.constrain==="domain")_=true}if(h>U*p&&!_)continue;for(i=0;i<d.length;i++){s=d[i];c=g[s];l=m[s];u=l.constrain;if(c!==v||u==="domain"){f=c/v;if(u==="range"){H(l,f)}else{var y=l._inputDomain;var b=(l.domain[1]-l.domain[0])/(y[1]-y[0]);var x=(l.r2l(l.range[1])-l.r2l(l.range[0]))/(l.r2l(l._inputRange[1])-l.r2l(l._inputRange[0]));f/=b;if(f*x<1){l.domain=l._input.domain=y.slice();H(l,f);continue}if(x<1){l.range=l._input.range=l._inputRange.slice();f*=x}if(l.autorange){var w=l.r2l(l.range[0]);var A=l.r2l(l.range[1]);var T=(w+A)/2;var k=T;var M=T;var S=Math.abs(A-T);var C=T-S*f*1.0001;var L=T+S*f*1.0001;var E=j.makePadFn(r,l,0);var D=j.makePadFn(r,l,1);q(l,f);var O=Math.abs(l._m);var P=j.concatExtremes(t,l);var I=P.min;var R=P.max;var z;var N;for(N=0;N<I.length;N++){z=I[N].val-E(I[N])/O;if(z>C&&z<k){k=z}}for(N=0;N<R.length;N++){z=R[N].val+D(R[N])/O;if(z<L&&z>M){M=z}}var F=(M-k)/(2*S);f/=F;k=l.l2r(k);M=l.l2r(M);l.range=l._input.range=w<A?[k,M]:[M,k]}q(l,f)}}}}};r.getAxisGroup=function e(t,r){var n=t._axisMatchGroups;for(var a=0;a<n.length;a++){var i=n[a];if(i[r])return"g"+a}return r};r.clean=function e(t,r){if(r._inputDomain){var n=false;var a=r._id;var i=t._fullLayout._axisConstraintGroups;for(var o=0;o<i.length;o++){if(i[o][a]){n=true;break}}if(!n||r.constrain!=="domain"){r._input.domain=r.domain=r._inputDomain;delete r._inputDomain}}};function q(e,t){var r=e._inputDomain;var n=i[e.constraintoward];var a=r[0]+(r[1]-r[0])*n;e.domain=e._input.domain=[a+(r[0]-a)/t,a+(r[1]-a)/t];e.setScale()}},{"../../constants/alignment":260,"../../constants/numerical":265,"../../lib":285,"./autorange":330,"./axis_ids":335,"./layout_attributes":346,"./scale_zoom":350,"./set_convert":352}],340:[function(e,t,r){"use strict";var pe=e("@plotly/d3");var ve=e("tinycolor2");var n=e("has-passive-events");var ge=e("../../registry");var me=e("../../lib");var i=me.strTranslate;var _e=e("../../lib/svg_text_utils");var a=e("../../components/color");var ye=e("../../components/drawing");var be=e("../../components/fx");var xe=e("./axes");var o=e("../../lib/setcursor");var we=e("../../components/dragelement");var s=e("../../components/dragelement/helpers");var Ae=s.selectingOrDrawing;var Te=s.freeMode;var ke=e("../../constants/alignment").FROM_TL;var Me=e("../../lib/clear_gl_canvases");var Se=e("../../plot_api/subroutines").redrawReglTraces;var Ce=e("../plots");var Le=e("./axis_ids").getFromId;var Ee=e("./select").prepSelect;var De=e("./select").clearSelect;var Oe=e("./select").selectOnClick;var Pe=e("./scale_zoom");var Ie=e("./constants");var Re=Ie.MINDRAG;var ze=Ie.MINZOOM;var l=true;function c(b,u,e,t,r,n,x,w){var i=b._fullLayout._zoomlayer;var f=x+w==="nsew";var d=(x+w).length===1;var A,T;var k,M;var h,p;var o,s;var v,g;var m;var S;var C,L;var l;var E,D;var O,P,I;var _;var y;var R;function c(){A=u.xaxis;T=u.yaxis;v=A._length;g=T._length;o=A._offset;s=T._offset;k={};k[A._id]=A;M={};M[T._id]=T;if(x&&w){var e=u.overlays;for(var t=0;t<e.length;t++){var r=e[t].xaxis;k[r._id]=r;var n=e[t].yaxis;M[n._id]=n}}h=et(k);p=et(M);C=Fe(h,w);L=Fe(p,x);l=!L&&!C;S=Qe(b,b._fullLayout._axisMatchGroups,k,M);m=Qe(b,b._fullLayout._axisConstraintGroups,k,M,S);var a=m.isSubplotConstrained||S.isSubplotConstrained;E=w||a;D=x||a;var i=b._fullLayout;O=i._has("scattergl");P=i._has("splom");I=i._has("svg")}c();var a=Ve(L+C,b._fullLayout.dragmode,f);var z=Ne(u,x+w+"drag",a,e,t,r,n);if(l&&!f){z.onmousedown=null;z.style.pointerEvents="none";return z}var N={element:z,gd:b,plotinfo:u};N.prepFn=function(e,t,r){var n=N.dragmode;var a=b._fullLayout.dragmode;if(a!==n){N.dragmode=a}c();y=b._fullLayout._invScaleX;R=b._fullLayout._invScaleY;if(!l){if(f){if(e.shiftKey){if(a==="pan")a="zoom";else if(!Ae(a))a="pan"}else if(e.ctrlKey){a="pan"}}else{a="pan"}}if(Te(a))N.minDrag=1;else N.minDrag=undefined;if(Ae(a)){N.xaxes=h;N.yaxes=p;Ee(e,t,r,N,a)}else{N.clickFn=j;if(Ae(n)){F()}if(!l){if(a==="zoom"){N.moveFn=$;N.doneFn=K;N.minDrag=1;J(e,t,r)}else if(a==="pan"){N.moveFn=ie;N.doneFn=ce}}}b._fullLayout._redrag=function(){var e=b._dragdata;if(e&&e.element===z){var t=b._fullLayout.dragmode;if(!Ae(t)){c();ue([0,0,v,g]);N.moveFn(e.dx,e.dy)}}}};function F(){N.plotinfo.selection=false;De(b)}function j(e,t){var r=N.gd;if(r._fullLayout._activeShapeIndex>=0){r._fullLayout._deactivateShape(r);return}var n=r._fullLayout.clickmode;We(r);if(e===2&&!d)le();if(f){if(n.indexOf("select")>-1){Oe(t,r,h,p,u.id,N)}if(n.indexOf("event")>-1){be.click(r,t,u.id)}}else if(e===1&&d){var a=x?T:A;var i=x==="s"||w==="w"?0:1;var o=a._name+".range["+i+"]";var s=je(a,i);var l="left";var c="middle";if(a.fixedrange)return;if(x){c=x==="n"?"top":"bottom";if(a.side==="right")l="right"}else if(w==="e")l="right";if(r._context.showAxisRangeEntryBoxes){pe.select(z).call(_e.makeEditable,{gd:r,immediate:true,background:r._fullLayout.paper_bgcolor,text:String(s),fill:a.tickfont?a.tickfont.color:"#444",horizontalAlign:l,verticalAlign:c}).on("edit",function(e){var t=a.d2r(e);if(t!==undefined){ge.call("_guiRelayout",r,o,t)}})}}}we.init(N);var B,H;var U;var V;var q;var Y;var G;var W;var X;var Z;function J(e,t,r){var n=z.getBoundingClientRect();B=t-n.left;H=r-n.top;b._fullLayout._calcInverseTransform(b);var a=me.apply3DTransform(b._fullLayout._invTransform)(B,H);B=a[0];H=a[1];U={l:B,r:B,w:0,t:H,b:H,h:0};V=b._hmpixcount?b._hmlumcount/b._hmpixcount:ve(b._fullLayout.plot_bgcolor).getLuminance();q="M0,0H"+v+"V"+g+"H0V0";Y=false;G="xy";Z=false;W=qe(i,V,o,s,q);X=Ye(i,o,s)}function $(e,t){if(b._transitioningWithDuration){return false}var r=Math.max(0,Math.min(v,y*e+B));var n=Math.max(0,Math.min(g,R*t+H));var a=Math.abs(r-B);var i=Math.abs(n-H);U.l=Math.min(B,r);U.r=Math.max(B,r);U.t=Math.min(H,n);U.b=Math.max(H,n);function o(){G="";U.r=U.l;U.t=U.b;X.attr("d","M0,0Z")}if(m.isSubplotConstrained){if(a>ze||i>ze){G="xy";if(a/v>i/g){i=a*g/v;if(H>n)U.t=H-i;else U.b=H+i}else{a=i*v/g;if(B>r)U.l=B-a;else U.r=B+a}X.attr("d",$e(U))}else{o()}}else if(S.isSubplotConstrained){if(a>ze||i>ze){G="xy";var s=Math.min(U.l/v,(g-U.b)/g);var l=Math.max(U.r/v,(g-U.t)/g);U.l=s*v;U.r=l*v;U.b=(1-s)*g;U.t=(1-l)*g;X.attr("d",$e(U))}else{o()}}else if(!L||i<Math.min(Math.max(a*.6,Re),ze)){if(a<Re||!C){o()}else{U.t=0;U.b=g;G="x";X.attr("d",Ze(U,H))}}else if(!C||a<Math.min(i*.6,ze)){U.l=0;U.r=v;G="y";X.attr("d",Je(U,B))}else{G="xy";X.attr("d",$e(U))}U.w=U.r-U.l;U.h=U.b-U.t;if(G)Z=true;b._dragged=Z;Ge(W,X,U,q,Y,V);Q();b.emit("plotly_relayouting",_);Y=true}function Q(){_={};if(G==="xy"||G==="x"){Be(h,U.l/v,U.r/v,_,m.xaxes);oe("x",_)}if(G==="xy"||G==="y"){Be(p,(g-U.b)/g,(g-U.t)/g,_,m.yaxes);oe("y",_)}}function K(){Q();We(b);ce();Xe(b)}var ee=[0,0,v,g];var te=null;var re=Ie.REDRAWDELAY;var ne=u.mainplot?b._fullLayout._plots[u.mainplot]:u;function ae(e){if(!b._context._scrollZoom.cartesian&&!b._fullLayout._enablescrollzoom){return}F();if(b._transitioningWithDuration){e.preventDefault();e.stopPropagation();return}c();clearTimeout(te);var t=-e.deltaY;if(!isFinite(t))t=e.wheelDelta/10;if(!isFinite(t)){me.log("Did not find wheel motion attributes: ",e);return}var r=Math.exp(-Math.min(Math.max(t,-20),20)/200);var n=ne.draglayer.select(".nsewdrag").node().getBoundingClientRect();var a=(e.clientX-n.left)/n.width;var i=(n.bottom-e.clientY)/n.height;var o;function s(t,e,r){if(t.fixedrange)return;var n=me.simpleMap(t.range,t.r2l);var a=n[0]+(n[1]-n[0])*e;function i(e){return t.l2r(a+(e-a)*r)}t.range=n.map(i)}if(E){if(!w)a=.5;for(o=0;o<h.length;o++){s(h[o],a,r)}oe("x");ee[2]*=r;ee[0]+=ee[2]*a*(1/r-1)}if(D){if(!x)i=.5;for(o=0;o<p.length;o++){s(p[o],i,r)}oe("y");ee[3]*=r;ee[1]+=ee[3]*(1-i)*(1/r-1)}ue(ee);se();b.emit("plotly_relayouting",_);te=setTimeout(function(){if(!b._fullLayout)return;ee=[0,0,v,g];ce()},re);e.preventDefault();return}if(x.length*w.length!==1){Ke(z,ae)}function ie(e,t){e=e*y;t=t*R;if(b._transitioningWithDuration){return}b._fullLayout._replotting=true;if(C==="ew"||L==="ns"){var r=C?-e:0;var n=L?-t:0;if(S.isSubplotConstrained){if(C&&L){var a=(e/v-t/g)/2;e=a*v;t=-a*g;r=-e;n=-t}if(L){r=-n*v/g}else{n=-r*g/v}}if(C){He(h,e);oe("x")}if(L){He(p,t);oe("y")}ue([r,n,v,g]);se();b.emit("plotly_relayouting",_);return}function i(e,t,r){var n=1-t;var a;var i;for(var o=0;o<e.length;o++){var s=e[o];if(s.fixedrange)continue;a=s;i=s._rl[n]+(s._rl[t]-s._rl[n])/Ue(r/s._length);var l=s.l2r(i);if(l!==false&&l!==undefined)s.range[t]=l}return a._length*(a._rl[t]-i)/(a._rl[t]-a._rl[n])}var o=C==="w"===(L==="n")?1:-1;if(C&&L&&(m.isSubplotConstrained||S.isSubplotConstrained)){var s=(e/v+o*t/g)/2;e=s*v;t=o*s*g}var l,c;if(C==="w")e=i(h,0,e);else if(C==="e")e=i(h,1,-e);else if(!C)e=0;if(L==="n")t=i(p,1,t);else if(L==="s")t=i(p,0,-t);else if(!L)t=0;l=C==="w"?e:0;c=L==="n"?t:0;if(m.isSubplotConstrained&&!S.isSubplotConstrained||S.isSubplotConstrained&&C&&L&&o>0){var u;if(S.isSubplotConstrained||!C&&L.length===1){for(u=0;u<h.length;u++){h[u].range=h[u]._r.slice();Pe(h[u],1-t/g)}e=t*v/g;l=e/2}if(S.isSubplotConstrained||!L&&C.length===1){for(u=0;u<p.length;u++){p[u].range=p[u]._r.slice();Pe(p[u],1-e/v)}t=e*g/v;c=t/2}}if(!S.isSubplotConstrained||!L){oe("x")}if(!S.isSubplotConstrained||!C){oe("y")}var f=v-e;var d=g-t;if(S.isSubplotConstrained&&!(C&&L)){if(C){c=l?0:e*g/v;d=f*g/v}else{l=c?0:t*v/g;f=d*v/g}}ue([l,c,f,d]);se();b.emit("plotly_relayouting",_)}function oe(e,t){var r=S.isSubplotConstrained?{x:p,y:h}[e]:S[e+"axes"];var n=S.isSubplotConstrained?{x:h,y:p}[e]:[];for(var a=0;a<r.length;a++){var i=r[a];var o=i._id;var s=S.xLinks[o]||S.yLinks[o];var l=n[0]||k[s]||M[s];if(l){if(t){t[i._name+".range[0]"]=t[l._name+".range[0]"];t[i._name+".range[1]"]=t[l._name+".range[1]"]}else{i.range=l.range.slice()}}}}function se(){var t=[];var r;function e(e){for(r=0;r<e.length;r++){if(!e[r].fixedrange)t.push(e[r]._id)}}if(E){e(h);e(m.xaxes);e(S.xaxes)}if(D){e(p);e(m.yaxes);e(S.yaxes)}_={};for(r=0;r<t.length;r++){var n=t[r];var a=Le(b,n);xe.drawOne(b,a,{skipTitle:true});_[a._name+".range[0]"]=a.range[0];_[a._name+".range[1]"]=a.range[1]}xe.redrawComponents(b,t)}function le(){if(b._transitioningWithDuration)return;var e=b._context.doubleClick;var t=[];if(C)t=t.concat(h);if(L)t=t.concat(p);if(S.xaxes)t=t.concat(S.xaxes);if(S.yaxes)t=t.concat(S.yaxes);var r={};var n,a,i;if(e==="reset+autosize"){e="autosize";for(a=0;a<t.length;a++){n=t[a];if(n._rangeInitial&&(n.range[0]!==n._rangeInitial[0]||n.range[1]!==n._rangeInitial[1])||!n._rangeInitial&&!n.autorange){e="reset";break}}}if(e==="autosize"){for(a=0;a<t.length;a++){n=t[a];if(!n.fixedrange)r[n._name+".autorange"]=true}}else if(e==="reset"){if(C||m.isSubplotConstrained)t=t.concat(m.xaxes);if(L&&!m.isSubplotConstrained)t=t.concat(m.yaxes);if(m.isSubplotConstrained){if(!C)t=t.concat(h);else if(!L)t=t.concat(p)}for(a=0;a<t.length;a++){n=t[a];if(!n.fixedrange){if(!n._rangeInitial){r[n._name+".autorange"]=true}else{i=n._rangeInitial;r[n._name+".range[0]"]=i[0];r[n._name+".range[1]"]=i[1]}}}}b.emit("plotly_doubleclick",null);ge.call("_guiRelayout",b,r)}function ce(){ue([0,0,v,g]);me.syncOrAsync([Ce.previousPromises,function(){b._fullLayout._replotting=false;ge.call("_guiRelayout",b,_)}],b)}function ue(e){var t=b._fullLayout;var r=t._plots;var n=t._subplots.cartesian;var a,i,o,s;if(P){ge.subplotsRegistry.splom.drag(b)}if(O){for(a=0;a<n.length;a++){i=r[n[a]];o=i.xaxis;s=i.yaxis;if(i._scene){var l=me.simpleMap(o.range,o.r2l);var c=me.simpleMap(s.range,s.r2l);i._scene.update({range:[l[0],c[0],l[1],c[1]]})}}}if(P||O){Me(b);Se(b)}if(I){var u=e[2]/A._length;var f=e[3]/T._length;for(a=0;a<n.length;a++){i=r[n[a]];o=i.xaxis;s=i.yaxis;var d=(E||S.isSubplotConstrained)&&!o.fixedrange&&k[o._id];var h=(D||S.isSubplotConstrained)&&!s.fixedrange&&M[s._id];var p,v;var g,m;if(d){p=u;g=w||S.isSubplotConstrained?e[0]:he(o,p)}else if(S.xaHash[o._id]){p=u;g=e[0]*o._length/A._length}else if(S.yaHash[o._id]){p=f;g=L==="ns"?-e[1]*o._length/T._length:he(o,p,{n:"top",s:"bottom"}[L])}else{p=fe(o,u,f);g=de(o,p)}if(h){v=f;m=x||S.isSubplotConstrained?e[1]:he(s,v)}else if(S.yaHash[s._id]){v=f;m=e[1]*s._length/T._length}else if(S.xaHash[s._id]){v=u;m=C==="ew"?-e[0]*s._length/A._length:he(s,v,{e:"right",w:"left"}[C])}else{v=fe(s,u,f);m=de(s,v)}if(!p&&!v){continue}if(!p)p=1;if(!v)v=1;var _=o._offset-g/p;var y=s._offset-m/v;i.clipRect.call(ye.setTranslate,g,m).call(ye.setScale,p,v);i.plot.call(ye.setTranslate,_,y).call(ye.setScale,1/p,1/v);if(p!==i.xScaleFactor||v!==i.yScaleFactor){ye.setPointGroupScale(i.zoomScalePts,p,v);ye.setTextPointsScale(i.zoomScaleTxt,p,v)}ye.hideOutsideRangePoints(i.clipOnAxisFalseTraces,i);i.xScaleFactor=p;i.yScaleFactor=v}}}function fe(e,t,r){if(e.fixedrange)return 0;if(E&&m.xaHash[e._id]){return t}if(D&&(m.isSubplotConstrained?m.xaHash:m.yaHash)[e._id]){return r}return 0}function de(e,t){if(t){e.range=e._r.slice();Pe(e,t);return he(e,t)}return 0}function he(e,t,r){return e._length*(1-t)*ke[r||e.constraintoward||"middle"]}return z}function u(t,e,r,n){var a=me.ensureSingle(t.draglayer,e,r,function(e){e.classed("drag",true).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id)});a.call(o,n);return a.node()}function Ne(e,t,r,n,a,i,o){var s=u(e,"rect",t,r);pe.select(s).call(ye.setRect,n,a,i,o);return s}function Fe(e,t){for(var r=0;r<e.length;r++){if(!e[r].fixedrange)return t}return""}function je(e,t){var r=e.range[t];var n=Math.abs(r-e.range[1-t]);var a;if(e.type==="date"){return r}else if(e.type==="log"){a=Math.ceil(Math.max(0,-Math.log(n)/Math.LN10))+3;return pe.format("."+a+"g")(Math.pow(10,r))}else{a=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(n)/Math.LN10)+4;return pe.format("."+String(a)+"g")(r)}}function Be(e,t,r,n,a){for(var i=0;i<e.length;i++){var o=e[i];if(o.fixedrange)continue;if(o.rangebreaks){var s=o._id.charAt(0)==="y";var l=s?1-t:t;var c=s?1-r:r;n[o._name+".range[0]"]=o.l2r(o.p2l(l*o._length));n[o._name+".range[1]"]=o.l2r(o.p2l(c*o._length))}else{var u=o._rl[0];var f=o._rl[1]-u;n[o._name+".range[0]"]=o.l2r(u+f*t);n[o._name+".range[1]"]=o.l2r(u+f*r)}}if(a&&a.length){var d=(t+(1-r))/2;Be(a,d,1-d,n,[])}}function He(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!n.fixedrange){if(n.rangebreaks){var a=0;var i=n._length;var o=n.p2l(a+t)-n.p2l(a);var s=n.p2l(i+t)-n.p2l(i);var l=(o+s)/2;n.range=[n.l2r(n._rl[0]-l),n.l2r(n._rl[1]-l)]}else{n.range=[n.l2r(n._rl[0]-t/n._m),n.l2r(n._rl[1]-t/n._m)]}}}}function Ue(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function Ve(e,t,r){if(!e)return"pointer";if(e==="nsew"){if(r)return"";if(t==="pan")return"move";return"crosshair"}return e.toLowerCase()+"-resize"}function qe(e,t,r,n,a){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",i(r,n)).attr("d",a+"Z")}function Ye(e,t,r){return e.append("path").attr("class","zoombox-corners").style({fill:a.background,stroke:a.defaultLine,"stroke-width":1,opacity:0}).attr("transform",i(t,r)).attr("d","M0,0Z")}function Ge(e,t,r,n,a,i){e.attr("d",n+"M"+r.l+","+r.t+"v"+r.h+"h"+r.w+"v-"+r.h+"h-"+r.w+"Z");f(e,t,a,i)}function f(e,t,r,n){if(!r){e.transition().style("fill",n>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200);t.transition().style("opacity",1).duration(200)}}function We(e){pe.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Xe(e){if(l&&e.data&&e._context.showTips){me.notifier(me._(e,"Double-click to zoom back out"),"long");l=false}}function Ze(e,t){return"M"+(e.l-.5)+","+(t-ze-.5)+"h-3v"+(2*ze+1)+"h3ZM"+(e.r+.5)+","+(t-ze-.5)+"h3v"+(2*ze+1)+"h-3Z"}function Je(e,t){return"M"+(t-ze-.5)+","+(e.t-.5)+"v-3h"+(2*ze+1)+"v3ZM"+(t-ze-.5)+","+(e.b+.5)+"v3h"+(2*ze+1)+"v-3Z"}function $e(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,ze)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function Qe(e,t,r,n,a){var i=false;var o={};var s={};var l,c,u,f;var d=(a||{}).xaHash;var h=(a||{}).yaHash;for(var p=0;p<t.length;p++){var v=t[p];for(l in r){if(v[l]){for(u in v){if(!(a&&(d[u]||h[u]))&&!(u.charAt(0)==="x"?r:n)[u]){o[u]=l}}for(c in n){if(!(a&&(d[c]||h[c]))&&v[c]){i=true}}}}for(c in n){if(v[c]){for(f in v){if(!(a&&(d[f]||h[f]))&&!(f.charAt(0)==="x"?r:n)[f]){s[f]=c}}}}}if(i){me.extendFlat(o,s);s={}}var g={};var m=[];for(u in o){var _=Le(e,u);m.push(_);g[_._id]=_}var y={};var b=[];for(f in s){var x=Le(e,f);b.push(x);y[x._id]=x}return{xaHash:g,yaHash:y,xaxes:m,yaxes:b,xLinks:o,yLinks:s,isSubplotConstrained:i}}function Ke(e,t){if(!n){if(e.onwheel!==undefined)e.onwheel=t;else if(e.onmousewheel!==undefined)e.onmousewheel=t;else if(!e.isAddedWheelEvent){e.isAddedWheelEvent=true;e.addEventListener("wheel",t,{passive:false})}}else{var r=e.onwheel!==undefined?"wheel":"mousewheel";if(e._onwheel){e.removeEventListener(r,e._onwheel)}e._onwheel=t;e.addEventListener(r,t,{passive:false})}}function et(e){var t=[];for(var r in e)t.push(e[r]);return t}t.exports={makeDragBox:c,makeDragger:u,makeRectDragger:Ne,makeZoombox:qe,makeCorners:Ye,updateZoombox:Ge,xyCorners:$e,transitionZoombox:f,removeZoombox:We,showDoubleClickNotifier:Xe,attachWheelEventHandler:Ke}},{"../../components/color":155,"../../components/dragelement":174,"../../components/dragelement/helpers":173,"../../components/drawing":177,"../../components/fx":195,"../../constants/alignment":260,"../../lib":285,"../../lib/clear_gl_canvases":273,"../../lib/setcursor":305,"../../lib/svg_text_utils":307,"../../plot_api/subroutines":321,"../../registry":373,"../plots":366,"./axes":331,"./axis_ids":335,"./constants":338,"./scale_zoom":350,"./select":351,"@plotly/d3":20,"has-passive-events":63,tinycolor2:119}],341:[function(e,t,n){"use strict";var a=e("@plotly/d3");var c=e("../../components/fx");var u=e("../../components/dragelement");var i=e("../../lib/setcursor");var f=e("./dragbox").makeDragBox;var d=e("./constants").DRAGGERSIZE;n.initInteractions=function e(s){var l=s._fullLayout;if(s._context.staticPlot){a.select(s).selectAll(".drag").remove();return}if(!l._has("cartesian")&&!l._has("splom"))return;var t=Object.keys(l._plots||{}).sort(function(e,t){if((l._plots[e].mainplot&&true)===(l._plots[t].mainplot&&true)){var r=e.split("y");var n=t.split("y");return r[0]===n[0]?Number(r[1]||1)-Number(n[1]||1):Number(r[0]||1)-Number(n[0]||1)}return l._plots[e].mainplot?1:-1});t.forEach(function(t){var e=l._plots[t];var r=e.xaxis;var n=e.yaxis;if(!e.mainplot){var a=f(s,e,r._offset,n._offset,r._length,n._length,"ns","ew");a.onmousemove=function(e){s._fullLayout._rehover=function(){if(s._fullLayout._hoversubplot===t&&s._fullLayout._plots[t]){c.hover(s,e,t)}};c.hover(s,e,t);s._fullLayout._lasthover=a;s._fullLayout._hoversubplot=t};a.onmouseout=function(e){if(s._dragging)return;s._fullLayout._hoversubplot=null;u.unhover(s,e)};if(s._context.showAxisDragHandles){f(s,e,r._offset-d,n._offset-d,d,d,"n","w");f(s,e,r._offset+r._length,n._offset-d,d,d,"n","e");f(s,e,r._offset-d,n._offset+n._length,d,d,"s","w");f(s,e,r._offset+r._length,n._offset+n._length,d,d,"s","e")}}if(s._context.showAxisDragHandles){if(t===r._mainSubplot){var i=r._mainLinePosition;if(r.side==="top")i-=d;f(s,e,r._offset+r._length*.1,i,r._length*.8,d,"","ew");f(s,e,r._offset,i,r._length*.1,d,"","w");f(s,e,r._offset+r._length*.9,i,r._length*.1,d,"","e")}if(t===n._mainSubplot){var o=n._mainLinePosition;if(n.side!=="right")o-=d;f(s,e,o,n._offset+n._length*.1,d,n._length*.8,"ns","");f(s,e,o,n._offset+n._length*.9,d,n._length*.1,"s","");f(s,e,o,n._offset,d,n._length*.1,"n","")}}});var r=l._hoverlayer.node();r.onmousemove=function(e){e.target=s._fullLayout._lasthover;c.hover(s,e,l._hoversubplot)};r.onclick=function(e){e.target=s._fullLayout._lasthover;c.click(s,e)};r.onmousedown=function(e){s._fullLayout._lasthover.onmousedown(e)};n.updateFx(s)};n.updateFx=function(e){var t=e._fullLayout;var r=t.dragmode==="pan"?"move":"crosshair";i(t._draggers,r)}},{"../../components/dragelement":174,"../../components/fx":195,"../../lib/setcursor":305,"./constants":338,"./dragbox":340,"@plotly/d3":20}],342:[function(e,t,r){"use strict";function n(e){var t=e._fullLayout._zoomlayer;if(t){t.selectAll(".outline-controllers").remove()}}function a(e){var t=e._fullLayout._zoomlayer;if(t){t.selectAll(".select-outline").remove()}e._fullLayout._drawing=false}t.exports={clearOutlineControllers:n,clearSelect:a}},{}],343:[function(e,t,r){"use strict";var n=e("../../lib").strTranslate;function a(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}function i(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}}function o(t){var r=t._id.charAt(0)==="y"?1:0;return function(e){return a(t,e[r])}}function s(e){return n(e.xaxis._offset,e.yaxis._offset)}t.exports={p2r:a,r2p:i,axValue:o,getTransform:s}},{"../../lib":285}],344:[function(e,t,r){"use strict";var y=e("../../registry");var b=e("../../lib");var x=e("./axis_ids");t.exports=function e(_){return function e(t,r){var n=t[_];if(!Array.isArray(n))return;var a=y.subplotsRegistry.cartesian;var i=a.idRegex;var o=r._subplots;var s=o.xaxis;var l=o.yaxis;var c=o.cartesian;var u=r._has("cartesian")||r._has("gl2d");for(var f=0;f<n.length;f++){var d=n[f];if(!b.isPlainObject(d))continue;var h=x.cleanId(d.xref,"x",false);var p=x.cleanId(d.yref,"y",false);var v=i.x.test(h);var g=i.y.test(p);if(v||g){if(!u)b.pushUnique(r._basePlotModules,a);var m=false;if(v&&s.indexOf(h)===-1){s.push(h);m=true}if(g&&l.indexOf(p)===-1){l.push(p);m=true}if(m&&v&&g){c.push(h+p)}}}}}},{"../../lib":285,"../../registry":373,"./axis_ids":335}],345:[function(e,t,r){"use strict";var b=e("@plotly/d3");var x=e("../../registry");var v=e("../../lib");var n=e("../plots");var w=e("../../components/drawing");var A=e("../get_data").getModuleCalcData;var _=e("./axis_ids");var T=e("./constants");var i=e("../../constants/xmlns_namespaces");var d=v.ensureSingle;function h(e,t,r){return v.ensureSingle(e,t,r,function(e){e.datum(r)})}r.name="cartesian";r.attr=["xaxis","yaxis"];r.idRoot=["x","y"];r.idRegex=T.idRegex;r.attrRegex=T.attrRegex;r.attributes=e("./attributes");r.layoutAttributes=e("./layout_attributes");r.supplyLayoutDefaults=e("./layout_defaults");r.transitionAxes=e("./transition_axes");r.finalizeSubplots=function(e,t){var r=t._subplots;var n=r.xaxis;var a=r.yaxis;var i=r.cartesian;var o=i.concat(r.gl2d||[]);var s={};var l={};var c,u,f;for(c=0;c<o.length;c++){var d=o[c].split("y");s[d[0]]=1;l["y"+d[1]]=1}for(c=0;c<n.length;c++){u=n[c];if(!s[u]){f=(e[_.id2name(u)]||{}).anchor;if(!T.idRegex.y.test(f))f="y";i.push(u+f);o.push(u+f);if(!l[f]){l[f]=1;v.pushUnique(a,f)}}}for(c=0;c<a.length;c++){f=a[c];if(!l[f]){u=(e[_.id2name(f)]||{}).anchor;if(!T.idRegex.x.test(u))u="x";i.push(u+f);o.push(u+f);if(!s[u]){s[u]=1;v.pushUnique(n,u)}}}if(!o.length){u="";f="";for(var h in e){if(T.attrRegex.test(h)){var p=h.charAt(0);if(p==="x"){if(!u||+h.substr(5)<+u.substr(5)){u=h}}else if(!f||+h.substr(5)<+f.substr(5)){f=h}}}u=u?_.name2id(u):"x";f=f?_.name2id(f):"y";n.push(u);a.push(f);i.push(u+f)}};r.plot=function(e,t,r,n){var a=e._fullLayout;var i=a._subplots.cartesian;var o=e.calcdata;var s;if(!Array.isArray(t)){t=[];for(s=0;s<o.length;s++)t.push(s)}for(s=0;s<i.length;s++){var l=i[s];var c=a._plots[l];var u=[];var f;for(var d=0;d<o.length;d++){var h=o[d];var p=h[0].trace;if(p.xaxis+p.yaxis===l){if(t.indexOf(p.index)!==-1||p.carpet){if(f&&f[0].trace.xaxis+f[0].trace.yaxis===l&&["tonextx","tonexty","tonext"].indexOf(p.fill)!==-1&&u.indexOf(f)===-1){u.push(f)}u.push(h)}f=h}}g(e,c,u,r,n)}};function g(n,a,e,i,o){var t=T.traceLayerClasses;var r=n._fullLayout;var s=r._modules;var l,c,u;var f=[];var d=[];for(var h=0;h<s.length;h++){l=s[h];var p=l.name;var v=x.modules[p].categories;if(v.svg){var g=l.layerName||p+"layer";var m=l.plot;c=A(e,m);u=c[0];e=c[1];if(u.length){f.push({i:t.indexOf(g),className:g,plotMethod:m,cdModule:u})}if(v.zoomScale){d.push("."+g)}}}f.sort(function(e,t){return e.i-t.i});var _=a.plot.selectAll("g.mlayer").data(f,function(e){return e.className});_.enter().append("g").attr("class",function(e){return e.className}).classed("mlayer",true).classed("rangeplot",a.isRangePlot);_.exit().remove();_.order();_.each(function(e){var t=b.select(this);var r=e.className;e.plotMethod(n,a,e.cdModule,t,i,o);if(T.clipOnAxisFalseQuery.indexOf("."+r)===-1){w.setClipUrl(t,a.layerClipId,n)}});if(r._has("scattergl")){l=x.getModule("scattergl");u=A(e,l)[0];l.plot(n,a,u)}if(!n._context.staticPlot){if(a._hasClipOnAxisFalse){a.clipOnAxisFalseTraces=a.plot.selectAll(T.clipOnAxisFalseQuery.join(",")).selectAll(".trace")}if(d.length){var y=a.plot.selectAll(d.join(",")).selectAll(".trace");a.zoomScalePts=y.selectAll("path.point");a.zoomScaleTxt=y.selectAll(".textpoint")}}}r.clean=function(e,t,r,n){var a=n._plots||{};var i=t._plots||{};var o=n._subplots||{};var s;var l,c;if(n._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms){for(c in a){s=a[c];if(s.plotgroup)s.plotgroup.remove()}}var u=n._has&&n._has("gl");var f=t._has&&t._has("gl");if(u&&!f){for(c in a){s=a[c];if(s._scene)s._scene.destroy()}}if(o.xaxis&&o.yaxis){var d=_.listIds({_fullLayout:n});for(l=0;l<d.length;l++){var h=d[l];if(!t[_.id2name(h)]){n._infolayer.selectAll(".g-"+h+"title").remove()}}}var p=n._has&&n._has("cartesian");var v=t._has&&t._has("cartesian");if(p&&!v){y(n._cartesianlayer.selectAll(".subplot"),n);n._defs.selectAll(".axesclip").remove();delete n._axisConstraintGroups;delete n._axisMatchGroups}else if(o.cartesian){for(l=0;l<o.cartesian.length;l++){var g=o.cartesian[l];if(!i[g]){var m="."+g+",."+g+"-x,."+g+"-y";n._cartesianlayer.selectAll(m).remove();k(g,n)}}}};r.drawFramework=function(n){var a=n._fullLayout;var e=o(n);var t=a._cartesianlayer.selectAll(".subplot").data(e,String);t.enter().append("g").attr("class",function(e){return"subplot "+e[0]});t.order();t.exit().call(y,a);t.each(function(e){var t=e[0];var r=a._plots[t];r.plotgroup=b.select(this);s(n,r);r.draglayer=d(a._draggers,"g",t)})};r.rangePlot=function(e,t,r){s(e,t);g(e,t,r);n.style(e)};function o(e){var t=e._fullLayout;var r=t._subplots.cartesian;var n=r.length;var a,i,o,s,l,c;var u=[];var f=[];for(a=0;a<n;a++){o=r[a];s=t._plots[o];l=s.xaxis;c=s.yaxis;var d=l._mainAxis;var h=c._mainAxis;var p=d._id+h._id;var v=t._plots[p];s.overlays=[];if(p!==o&&v){s.mainplot=p;s.mainplotinfo=v;f.push(o)}else{s.mainplot=undefined;s.mainplotinfo=undefined;u.push(o)}}for(a=0;a<f.length;a++){o=f[a];s=t._plots[o];s.mainplotinfo.overlays.push(s)}var g=u.concat(f);var m=new Array(n);for(a=0;a<n;a++){o=g[a];s=t._plots[o];l=s.xaxis;c=s.yaxis;var _=[o,l.layer,c.layer,l.overlaying||"",c.overlaying||""];for(i=0;i<s.overlays.length;i++){_.push(s.overlays[i].id)}m[a]=_}return m}function s(e,t){var r=t.plotgroup;var n=t.id;var a=T.layerValue2layerClass[t.xaxis.layer];var i=T.layerValue2layerClass[t.yaxis.layer];var o=e._fullLayout._hasOnlyLargeSploms;if(!t.mainplot){if(o){t.xlines=d(r,"path","xlines-above");t.ylines=d(r,"path","ylines-above");t.xaxislayer=d(r,"g","xaxislayer-above");t.yaxislayer=d(r,"g","yaxislayer-above")}else{var s=d(r,"g","layer-subplot");t.shapelayer=d(s,"g","shapelayer");t.imagelayer=d(s,"g","imagelayer");t.gridlayer=d(r,"g","gridlayer");t.zerolinelayer=d(r,"g","zerolinelayer");d(r,"path","xlines-below");d(r,"path","ylines-below");t.overlinesBelow=d(r,"g","overlines-below");d(r,"g","xaxislayer-below");d(r,"g","yaxislayer-below");t.overaxesBelow=d(r,"g","overaxes-below");t.plot=d(r,"g","plot");t.overplot=d(r,"g","overplot");t.xlines=d(r,"path","xlines-above");t.ylines=d(r,"path","ylines-above");t.overlinesAbove=d(r,"g","overlines-above");d(r,"g","xaxislayer-above");d(r,"g","yaxislayer-above");t.overaxesAbove=d(r,"g","overaxes-above");t.xlines=r.select(".xlines-"+a);t.ylines=r.select(".ylines-"+i);t.xaxislayer=r.select(".xaxislayer-"+a);t.yaxislayer=r.select(".yaxislayer-"+i)}}else{var l=t.mainplotinfo;var c=l.plotgroup;var u=n+"-x";var f=n+"-y";t.gridlayer=l.gridlayer;t.zerolinelayer=l.zerolinelayer;d(l.overlinesBelow,"path",u);d(l.overlinesBelow,"path",f);d(l.overaxesBelow,"g",u);d(l.overaxesBelow,"g",f);t.plot=d(l.overplot,"g",n);d(l.overlinesAbove,"path",u);d(l.overlinesAbove,"path",f);d(l.overaxesAbove,"g",u);d(l.overaxesAbove,"g",f);t.xlines=c.select(".overlines-"+a).select("."+u);t.ylines=c.select(".overlines-"+i).select("."+f);t.xaxislayer=c.select(".overaxes-"+a).select("."+u);t.yaxislayer=c.select(".overaxes-"+i).select("."+f)}if(!o){h(t.gridlayer,"g",t.xaxis._id);h(t.gridlayer,"g",t.yaxis._id);t.gridlayer.selectAll("g").map(function(e){return e[0]}).sort(_.idSort)}t.xlines.style("fill","none").classed("crisp",true);t.ylines.style("fill","none").classed("crisp",true)}function y(e,n){if(!e)return;var a={};e.each(function(e){var t=e[0];var r=b.select(this);r.remove();k(t,n);a[t]=true});for(var t in n._plots){var r=n._plots[t];var i=r.overlays||[];for(var o=0;o<i.length;o++){var s=i[o];if(a[s.id]){s.plot.selectAll(".trace").remove()}}}}function k(e,t){t._draggers.selectAll("g."+e).remove();t._defs.select("#clip"+t._uid+e+"plot").remove()}r.toSVG=function(e){var n=e._fullLayout._glimages;var r=b.select(e).selectAll(".svg-container");var t=r.filter(function(e,t){return t===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function a(){var e=this;var t=e.toDataURL("image/png");var r=n.append("svg:image");r.attr({xmlns:i.svg,"xlink:href":t,preserveAspectRatio:"none",x:0,y:0,width:e.width,height:e.height})}t.each(a)};r.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":177,"../../constants/xmlns_namespaces":266,"../../lib":285,"../../registry":373,"../get_data":362,"../plots":366,"./attributes":329,"./axis_ids":335,"./constants":338,"./graph_interact":341,"./layout_attributes":346,"./layout_defaults":347,"./transition_axes":356,"@plotly/d3":20}],346:[function(e,t,r){"use strict";var n=e("../font_attributes");var a=e("../../components/color/attributes");var i=e("../../components/drawing/attributes").dash;var o=e("../../lib/extend").extendFlat;var s=e("../../plot_api/plot_template").templatedArray;var l=e("../../plots/cartesian/axis_format_attributes").descriptionWithDates;var c=e("../../constants/numerical").ONEDAY;var u=e("./constants");var f=u.HOUR_PATTERN;var d=u.WEEKDAY_PATTERN;t.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:a.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:n({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:true},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[true,false,"reversed"],dflt:true,editType:"axrange",impliedEdits:{"range[0]":undefined,"range[1]":undefined}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":false},anim:true},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":false},anim:true}],editType:"axrange",impliedEdits:{autorange:false},anim:true},fixedrange:{valType:"boolean",dflt:false,editType:"calc"},scaleanchor:{valType:"enumerated",values:[u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"calc"},rangebreaks:s("rangebreak",{enabled:{valType:"boolean",dflt:true,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[d,f,""],editType:"calc"},values:{valType:"info_array",freeLength:true,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:c},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:undefined,dtick:undefined}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[true,"ticks",false,"all","allticks"],dflt:false,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:true,editType:"ticks"},automargin:{valType:"boolean",dflt:false,editType:"ticks"},showspikes:{valType:"boolean",dflt:false,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:o({},i,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:n({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:false,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:l("tick label")},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:true,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:l("hover text")},showline:{valType:"boolean",dflt:false,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:a.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:a.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:true,editType:"ticks"},dividercolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",u.idRegex.x.toString(),u.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:n({editType:"ticks"})}}},{"../../components/color/attributes":154,"../../components/drawing/attributes":176,"../../constants/numerical":265,"../../lib/extend":279,"../../plot_api/plot_template":320,"../../plots/cartesian/axis_format_attributes":334,"../font_attributes":360,"./constants":338}],347:[function(e,t,r){"use strict";var se=e("../../lib");var le=e("../../components/color");var ce=e("../../components/fx/helpers").isUnifiedHover;var ue=e("../../components/fx/hovermode_defaults");var fe=e("../../plot_api/plot_template");var de=e("../layout_attributes");var he=e("./layout_attributes");var pe=e("./type_defaults");var ve=e("./axis_defaults");var ge=e("./constraints");var me=e("./position_defaults");var _e=e("./axis_ids");var ye=_e.id2name;var be=_e.name2id;var xe=e("./constants").AX_ID_PATTERN;var n=e("../../registry");var we=n.traceIs;var Ae=n.getComponentMethod;function Te(e,t,r){if(Array.isArray(e[t]))e[t].push(r);else e[t]=[r]}t.exports=function e(o,t,r){var n=t.autotypenumbers;var a={};var i={};var s={};var l={};var c={};var u={};var f={};var d={};var h={};var p={};var v,g;for(v=0;v<r.length;v++){var m=r[v];if(!we(m,"cartesian")&&!we(m,"gl2d"))continue;var _;if(m.xaxis){_=ye(m.xaxis);Te(a,_,m)}else if(m.xaxes){for(g=0;g<m.xaxes.length;g++){Te(a,ye(m.xaxes[g]),m)}}var y;if(m.yaxis){y=ye(m.yaxis);Te(a,y,m)}else if(m.yaxes){for(g=0;g<m.yaxes.length;g++){Te(a,ye(m.yaxes[g]),m)}}if(m.type==="funnel"){if(m.orientation==="h"){if(_)i[_]=true;if(y)f[y]=true}else{if(y)s[y]=true}}else if(m.type==="image"){if(y)d[y]=true;if(_)d[_]=true}else{if(y){c[y]=true;u[y]=true}if(!we(m,"carpet")||m.type==="carpet"&&!m._cheater){if(_)l[_]=true}}if(m.type==="carpet"&&m._cheater){if(_)i[_]=true}if(we(m,"2dMap")){h[_]=true;h[y]=true}if(we(m,"oriented")){var b=m.orientation==="h"?y:_;p[b]=true}}var x=t._subplots;var w=x.xaxis;var A=x.yaxis;var T=se.simpleMap(w,ye);var k=se.simpleMap(A,ye);var M=T.concat(k);var S=le.background;if(w.length&&A.length){S=se.coerce(o,t,de,"plot_bgcolor")}var C=le.combine(S,t.paper_bgcolor);var L;var E;var D;var O;var P;function I(){var e=a[L]||[];P._traceIndices=e.map(function(e){return e._expandedIndex});P._annIndices=[];P._shapeIndices=[];P._imgIndices=[];P._subplotsWith=[];P._counterAxes=[];P._name=P._attr=L;P._id=E}function R(e,t){return se.coerce(O,P,he,e,t)}function z(e,t){return se.coerce2(O,P,he,e,t)}function N(e){return e==="x"?A:w}function F(e,t){var r=e==="x"?T:k;var n=[];for(var a=0;a<r.length;a++){var i=r[a];if(i!==t&&!(o[i]||{}).overlaying){n.push(be(i))}}return n}var j={x:N("x"),y:N("y")};var B=j.x.concat(j.y);var H={};var U=[];function V(){var e=O.matches;if(xe.test(e)&&B.indexOf(e)===-1){H[e]=O.type;U=Object.keys(H)}}var q=ue(o,t);var Y=ce(q);for(v=0;v<M.length;v++){L=M[v];E=be(L);D=L.charAt(0);if(!se.isPlainObject(o[L])){o[L]={}}O=o[L];P=fe.newContainer(t,L,D+"axis");I();var G=D==="x"&&!l[L]&&i[L]||D==="y"&&!c[L]&&s[L];var W=D==="y"&&(!u[L]&&f[L]||d[L]);var X={letter:D,font:t.font,outerTicks:h[L],showGrid:!p[L],data:a[L]||[],bgColor:C,calendar:t.calendar,automargin:true,visibleDflt:G,reverseDflt:W,autotypenumbersDflt:n,splomStash:((t._splomAxes||{})[D]||{})[E]};R("uirevision",t.uirevision);pe(O,P,R,X);ve(O,P,R,X,t);var Z=Y&&D===q.charAt(0);var J=z("spikecolor",Y?P.color:undefined);var $=z("spikethickness",Y?1.5:undefined);var Q=z("spikedash",Y?"dot":undefined);var K=z("spikemode",Y?"across":undefined);var ee=z("spikesnap");var te=R("showspikes",!!Z||!!J||!!$||!!Q||!!K||!!ee);if(!te){delete P.spikecolor;delete P.spikethickness;delete P.spikedash;delete P.spikemode;delete P.spikesnap}me(O,P,R,{letter:D,counterAxes:j[D],overlayableAxes:F(D,L),grid:t.grid});R("title.standoff");V();P._input=O}v=0;while(v<U.length){E=U[v++];L=ye(E);D=L.charAt(0);if(!se.isPlainObject(o[L])){o[L]={}}O=o[L];P=fe.newContainer(t,L,D+"axis");I();var re={letter:D,font:t.font,outerTicks:h[L],showGrid:!p[L],data:[],bgColor:C,calendar:t.calendar,automargin:true,visibleDflt:false,reverseDflt:false,autotypenumbersDflt:n,splomStash:((t._splomAxes||{})[D]||{})[E]};R("uirevision",t.uirevision);P.type=H[E]||"linear";ve(O,P,R,re,t);me(O,P,R,{letter:D,counterAxes:j[D],overlayableAxes:F(D,L),grid:t.grid});R("fixedrange");V();P._input=O}var ne=Ae("rangeslider","handleDefaults");var ae=Ae("rangeselector","handleDefaults");for(v=0;v<T.length;v++){L=T[v];O=o[L];P=t[L];ne(o,t,L);if(P.type==="date"){ae(O,P,t,k,P.calendar)}R("fixedrange")}for(v=0;v<k.length;v++){L=k[v];O=o[L];P=t[L];var ie=t[ye(P.anchor)];var oe=Ae("rangeslider","isVisible")(ie);R("fixedrange",oe)}ge.handleDefaults(o,t,{axIds:B.concat(U).sort(_e.idSort),axHasImage:d})}},{"../../components/color":155,"../../components/fx/helpers":191,"../../components/fx/hovermode_defaults":194,"../../lib":285,"../../plot_api/plot_template":320,"../../registry":373,"../layout_attributes":364,"./axis_defaults":333,"./axis_ids":335,"./constants":338,"./constraints":339,"./layout_attributes":346,"./position_defaults":349,"./type_defaults":357}],348:[function(e,t,r){"use strict";var m=e("tinycolor2").mix;var _=e("../../components/color/attributes").lightFraction;var y=e("../../lib");t.exports=function e(r,n,t,a){a=a||{};var i=a.dfltColor;function o(e,t){return y.coerce2(r,n,a.attributes,e,t)}var s=o("linecolor",i);var l=o("linewidth");var c=t("showline",a.showLine||!!s||!!l);if(!c){delete n.linecolor;delete n.linewidth}var u=m(i,a.bgColor,a.blend||_).toRgbString();var f=o("gridcolor",u);var d=o("gridwidth");var h=t("showgrid",a.showGrid||!!f||!!d);if(!h){delete n.gridcolor;delete n.gridwidth}if(!a.noZeroLine){var p=o("zerolinecolor",i);var v=o("zerolinewidth");var g=t("zeroline",a.showGrid||!!p||!!v);if(!g){delete n.zerolinecolor;delete n.zerolinewidth}}}},{"../../components/color/attributes":154,"../../lib":285,tinycolor2:119}],349:[function(e,t,r){"use strict";var g=e("fast-isnumeric");var m=e("../../lib");t.exports=function e(t,r,n,a){var i=a.counterAxes||[];var o=a.overlayableAxes||[];var s=a.letter;var l=a.grid;var c,u,f,d;if(l){u=l._domains[s][l._axisMap[r._id]];c=l._anchors[r._id];if(u){f=l[s+"side"].split(" ")[0];d=l.domain[s][f==="right"||f==="top"?1:0]}}u=u||[0,1];c=c||(g(t.position)?"free":i[0]||"free");f=f||(s==="x"?"bottom":"left");d=d||0;var h=m.coerce(t,r,{anchor:{valType:"enumerated",values:["free"].concat(i),dflt:c}},"anchor");if(h==="free")n("position",d);m.coerce(t,r,{side:{valType:"enumerated",values:s==="x"?["bottom","top"]:["left","right"],dflt:f}},"side");var p=false;if(o.length){p=m.coerce(t,r,{overlaying:{valType:"enumerated",values:[false].concat(o),dflt:false}},"overlaying")}if(!p){var v=n("domain",u);if(v[0]>v[1]-1/4096)r.domain=u;m.noneOrAll(t.domain,r.domain,u)}n("layer");return r}},{"../../lib":285,"fast-isnumeric":31}],350:[function(e,t,r){"use strict";var o=e("../../constants/alignment").FROM_BL;t.exports=function e(t,r,n){if(n===undefined){n=o[t.constraintoward||"center"]}var a=[t.r2l(t.range[0]),t.r2l(t.range[1])];var i=a[0]+(a[1]-a[0])*n;t.range=t._input.range=[t.l2r(i+(a[0]-i)*r),t.l2r(i+(a[1]-i)*r)];t.setScale()}},{"../../constants/alignment":260}],351:[function(e,t,r){"use strict";var a=e("polybooljs");var g=e("../../registry");var G=e("../../components/drawing").dashStyle;var W=e("../../components/color");var X=e("../../components/fx");var i=e("../../components/fx/helpers").makeEventData;var n=e("../../components/dragelement/helpers");var Z=n.freeMode;var J=n.rectMode;var $=n.drawMode;var Q=n.openMode;var K=n.selectMode;var ee=e("../../components/shapes/draw_newshape/display_outlines");var te=e("../../components/shapes/draw_newshape/helpers").handleEllipse;var l=e("../../components/shapes/draw_newshape/newshapes");var re=e("../../lib");var c=e("../../lib/polygon");var ne=e("../../lib/throttle");var h=e("./axis_ids").getFromId;var m=e("../../lib/clear_gl_canvases");var _=e("../../plot_api/subroutines").redrawReglTraces;var ae=e("./constants");var ie=ae.MINSELECT;var oe=c.filter;var se=c.tester;var u=e("./handle_outline").clearSelect;var o=e("./helpers");var le=o.p2r;var ce=o.axValue;var ue=o.getTransform;function s(e,t,r,l,n){var c=Z(n);var u=J(n);var f=Q(n);var d=$(n);var h=K(n);var a=n==="drawline";var p=n==="drawcircle";var v=a||p;var g=l.gd;var m=g._fullLayout;var i=m._zoomlayer;var o=l.element.getBoundingClientRect();var s=l.plotinfo;var _=ue(s);var y=t-o.left;var b=r-o.top;m._calcInverseTransform(g);var x=re.apply3DTransform(m._invTransform)(y,b);y=x[0];b=x[1];var w=m._invScaleX;var A=m._invScaleY;var T=y;var k=b;var M="M"+y+","+b;var S=l.xaxes[0]._length;var C=l.yaxes[0]._length;var L=l.xaxes.concat(l.yaxes);var E=e.altKey&&!($(n)&&f);var D,O,P,I;var R,z,N;he(e,g,l);if(c){D=oe([[y,b]],ae.BENDPX)}var F=i.selectAll("path.select-outline-"+s.id).data(d?[0]:[1,2]);var j=m.newshape;F.enter().append("path").attr("class",function(e){return"select-outline select-outline-"+e+" select-outline-"+s.id}).style(d?{opacity:j.opacity/2,fill:f?undefined:j.fillcolor,stroke:j.line.color,"stroke-dasharray":G(j.line.dash,j.line.width),"stroke-width":j.line.width+"px"}:{}).attr("fill-rule",j.fillrule).classed("cursor-move",d?true:false).attr("transform",_).attr("d",M+"Z");var B=i.append("path").attr("class","zoombox-corners").style({fill:W.background,stroke:W.defaultLine,"stroke-width":1}).attr("transform",_).attr("d","M0,0Z");var H=m._uid+ae.SELECTID;var U=[];var V=ve(g,l.xaxes,l.yaxes,l.subplot);function q(e,t){return e-t}var Y;if(s.fillRangeItems){Y=s.fillRangeItems}else{if(u){Y=function(e,t){var r=e.range={};for(R=0;R<L.length;R++){var n=L[R];var a=n._id.charAt(0);r[n._id]=[le(n,t[a+"min"]),le(n,t[a+"max"])].sort(q)}}}else{Y=function(e,t,r){var n=e.lassoPoints={};for(R=0;R<L.length;R++){var a=L[R];n[a._id]=r.filtered.map(ce(a))}}}}l.moveFn=function(e,t){T=Math.max(0,Math.min(S,w*e+y));k=Math.max(0,Math.min(C,A*t+b));var r=Math.abs(T-y);var n=Math.abs(k-b);if(u){var a;var i,o;if(h){var s=m.selectdirection;if(s==="any"){if(n<Math.min(r*.6,ie)){a="h"}else if(r<Math.min(n*.6,ie)){a="v"}else{a="d"}}else{a=s}switch(a){case"h":i=p?C/2:0;o=C;break;case"v":i=p?S/2:0;o=S;break}}if(d){switch(m.newshape.drawdirection){case"vertical":a="h";i=p?C/2:0;o=C;break;case"horizontal":a="v";i=p?S/2:0;o=S;break;case"ortho":if(r<n){a="h";i=b;o=k}else{a="v";i=y;o=T}break;default:a="d"}}if(a==="h"){I=v?te(p,[T,i],[T,o]):[[y,i],[y,o],[T,o],[T,i]];I.xmin=v?T:Math.min(y,T);I.xmax=v?T:Math.max(y,T);I.ymin=Math.min(i,o);I.ymax=Math.max(i,o);B.attr("d","M"+I.xmin+","+(b-ie)+"h-4v"+2*ie+"h4Z"+"M"+(I.xmax-1)+","+(b-ie)+"h4v"+2*ie+"h-4Z")}else if(a==="v"){I=v?te(p,[i,k],[o,k]):[[i,b],[i,k],[o,k],[o,b]];I.xmin=Math.min(i,o);I.xmax=Math.max(i,o);I.ymin=v?k:Math.min(b,k);I.ymax=v?k:Math.max(b,k);B.attr("d","M"+(y-ie)+","+I.ymin+"v-4h"+2*ie+"v4Z"+"M"+(y-ie)+","+(I.ymax-1)+"v4h"+2*ie+"v-4Z")}else if(a==="d"){I=v?te(p,[y,b],[T,k]):[[y,b],[y,k],[T,k],[T,b]];I.xmin=Math.min(y,T);I.xmax=Math.max(y,T);I.ymin=Math.min(b,k);I.ymax=Math.max(b,k);B.attr("d","M0,0Z")}}else if(c){D.addPt([T,k]);I=D.filtered}if(l.selectionDefs&&l.selectionDefs.length){P=me(l.mergedPolygons,I,E);I.subtract=E;O=de(l.selectionDefs.concat([I]))}else{P=[I];O=se(I)}ee(ye(P,f),F,l);if(h){ne.throttle(H,ae.SELECTDELAY,function(){U=[];var e;var t=[];var r;for(R=0;R<V.length;R++){z=V[R];r=z._module.selectPoints(z,O);t.push(r);e=_e(r,z);if(U.length){for(var n=0;n<e.length;n++){U.push(e[n])}}else U=e}N={points:U};ge(g,V,N);Y(N,I,D);l.gd.emit("plotly_selecting",N)})}};l.clickFn=function(e,t){B.remove();if(g._fullLayout._activeShapeIndex>=0){g._fullLayout._deactivateShape(g);return}if(d)return;var r=m.clickmode;ne.done(H).then(function(){ne.clear(H);if(e===2){F.remove();for(R=0;R<V.length;R++){z=V[R];z._module.selectPoints(z,false)}ge(g,V);pe(l);g.emit("plotly_deselect",null)}else{if(r.indexOf("select")>-1){fe(t,g,l.xaxes,l.yaxes,l.subplot,l,F)}if(r==="event"){g.emit("plotly_selected",undefined)}}X.click(g,t)}).catch(re.error)};l.doneFn=function(){B.remove();ne.done(H).then(function(){ne.clear(H);l.gd.emit("plotly_selected",N);if(I&&l.selectionDefs){I.subtract=E;l.selectionDefs.push(I);l.mergedPolygons.length=0;[].push.apply(l.mergedPolygons,P)}if(l.doneFnCompleted){l.doneFnCompleted(U)}}).catch(re.error);if(d){pe(l)}}}function fe(e,t,r,n,a,i,o){var s=t._hoverdata;var l=t._fullLayout;var c=l.clickmode;var u=c.indexOf("event")>-1;var f=[];var d,h,p,v,g;var m,_,y,b,x;if(L(s)){he(e,t,i);d=ve(t,r,n,a);var w=E(s,d);var A=w.pointNumbers.length>0;if(A?O(d,w):P(d)&&(_=D(w))){if(o)o.remove();for(x=0;x<d.length;x++){h=d[x];h._module.selectPoints(h,false)}ge(t,d);pe(i);if(u){t.emit("plotly_deselect",null)}}else{y=e.shiftKey&&(_!==undefined?_:D(w));p=C(w.pointNumber,w.searchInfo,y);var T=i.selectionDefs.concat([p]);v=de(T);for(x=0;x<d.length;x++){g=d[x]._module.selectPoints(d[x],v);m=_e(g,d[x]);if(f.length){for(var k=0;k<m.length;k++){f.push(m[k])}}else f=m}b={points:f};ge(t,d,b);if(p&&i){i.selectionDefs.push(p)}if(o){var M=i.mergedPolygons;var S=Q(i.dragmode);ee(ye(M,S),o,i)}if(u){t.emit("plotly_selected",b)}}}}function C(e,t,r){return{pointNumber:e,searchInfo:t,subtract:r}}function f(e){return"pointNumber"in e&&"searchInfo"in e}function d(o){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(e,t,r,n){var a=o.searchInfo.cd[0].trace._expandedIndex;var i=n.cd[0].trace._expandedIndex;return i===a&&r===o.pointNumber},isRect:false,degenerate:false,subtract:o.subtract}}function de(e){var o=[];var t=f(e[0])?0:e[0][0][0];var r=t;var n=f(e[0])?0:e[0][0][1];var a=n;for(var i=0;i<e.length;i++){if(f(e[i])){o.push(d(e[i]))}else{var s=c.tester(e[i]);s.subtract=e[i].subtract;o.push(s);t=Math.min(t,s.xmin);r=Math.max(r,s.xmax);n=Math.min(n,s.ymin);a=Math.max(a,s.ymax)}}function l(e,t,r,n){var a=false;for(var i=0;i<o.length;i++){if(o[i].contains(e,t,r,n)){a=o[i].subtract===false}}return a}return{xmin:t,xmax:r,ymin:n,ymax:a,pts:[],contains:l,isRect:false,degenerate:false}}function he(e,t,r){t._fullLayout._drawing=false;var n=t._fullLayout;var a=r.plotinfo;var i=r.dragmode;var o=n._lastSelectedSubplot&&n._lastSelectedSubplot===a.id;var s=(e.shiftKey||e.altKey)&&!($(i)&&Q(i));if(o&&s&&(a.selection&&a.selection.selectionDefs)&&!r.selectionDefs){r.selectionDefs=a.selection.selectionDefs;r.mergedPolygons=a.selection.mergedPolygons}else if(!s||!a.selection){pe(r)}if(!o){u(t);n._lastSelectedSubplot=a.id}}function pe(e){var t=e.dragmode;var r=e.plotinfo;var n=e.gd;if(n._fullLayout._activeShapeIndex>=0){n._fullLayout._deactivateShape(n)}if($(t)){var a=n._fullLayout;var i=a._zoomlayer;var o=i.selectAll(".select-outline-"+r.id);if(o&&n._fullLayout._drawing){var s=l(o,e);if(s){g.call("_guiRelayout",n,{shapes:s})}n._fullLayout._drawing=false}}r.selection={};r.selection.selectionDefs=e.selectionDefs=[];r.selection.mergedPolygons=e.mergedPolygons=[]}function ve(e,t,r,n){var a=[];var i=t.map(function(e){return e._id});var o=r.map(function(e){return e._id});var s,l,c;for(c=0;c<e.calcdata.length;c++){s=e.calcdata[c];l=s[0].trace;if(l.visible!==true||!l._module||!l._module.selectPoints)continue;if(n&&(l.subplot===n||l.geo===n)){a.push(d(l._module,s,t[0],r[0]))}else if(l.type==="splom"&&l._xaxes[i[0]]&&l._yaxes[o[0]]){var u=d(l._module,s,t[0],r[0]);u.scene=e._fullLayout._splomScenes[l.uid];a.push(u)}else if(l.type==="sankey"){var f=d(l._module,s,t[0],r[0]);a.push(f)}else{if(i.indexOf(l.xaxis)===-1)continue;if(o.indexOf(l.yaxis)===-1)continue;a.push(d(l._module,s,h(e,l.xaxis),h(e,l.yaxis)))}}return a;function d(e,t,r,n){return{_module:e,cd:t,xaxis:r,yaxis:n}}}function L(e){return e&&Array.isArray(e)&&e[0].hoverOnBox!==true}function E(e,t){var r=e[0];var n=-1;var a=[];var i,o;for(o=0;o<t.length;o++){i=t[o];if(r.fullData._expandedIndex===i.cd[0].trace._expandedIndex){if(r.hoverOnBox===true){break}if(r.pointNumber!==undefined){n=r.pointNumber}else if(r.binNumber!==undefined){n=r.binNumber;a=r.pointNumbers}break}}return{pointNumber:n,pointNumbers:a,searchInfo:i}}function D(e){var t=e.searchInfo.cd[0].trace;var r=e.pointNumber;var n=e.pointNumbers;var a=n.length>0;var i=a?n[0]:r;return t.selectedpoints?t.selectedpoints.indexOf(i)>-1:false}function O(e,t){var r=[];var n,a,i,o;for(o=0;o<e.length;o++){n=e[o];if(n.cd[0].trace.selectedpoints&&n.cd[0].trace.selectedpoints.length>0){r.push(n)}}if(r.length===1){i=r[0]===t.searchInfo;if(i){a=t.searchInfo.cd[0].trace;if(a.selectedpoints.length===t.pointNumbers.length){for(o=0;o<t.pointNumbers.length;o++){if(a.selectedpoints.indexOf(t.pointNumbers[o])<0){return false}}return true}}}return false}function P(e){var t=0;var r,n,a;for(a=0;a<e.length;a++){r=e[a];n=r.cd[0].trace;if(n.selectedpoints){if(n.selectedpoints.length>1)return false;t+=n.selectedpoints.length;if(t>1)return false}}return t===1}function ge(e,t,r){var n,a,i,o;for(n=0;n<t.length;n++){var s=t[n].cd[0].trace._fullInput;var l=e._fullLayout._tracePreGUI[s.uid]||{};if(l.selectedpoints===undefined){l.selectedpoints=s._input.selectedpoints||null}}if(r){var c=r.points||[];for(n=0;n<t.length;n++){o=t[n].cd[0].trace;o._input.selectedpoints=o._fullInput.selectedpoints=[];if(o._fullInput!==o)o.selectedpoints=[]}for(n=0;n<c.length;n++){var u=c[n];var f=u.data;var d=u.fullData;if(u.pointIndices){[].push.apply(f.selectedpoints,u.pointIndices);if(o._fullInput!==o){[].push.apply(d.selectedpoints,u.pointIndices)}}else{f.selectedpoints.push(u.pointIndex);if(o._fullInput!==o){d.selectedpoints.push(u.pointIndex)}}}}else{for(n=0;n<t.length;n++){o=t[n].cd[0].trace;delete o.selectedpoints;delete o._input.selectedpoints;if(o._fullInput!==o){delete o._fullInput.selectedpoints}}}var h=false;for(n=0;n<t.length;n++){a=t[n];i=a.cd;o=i[0].trace;if(g.traceIs(o,"regl")){h=true}var p=a._module;var v=p.styleOnSelect||p.style;if(v){v(e,i,i[0].node3);if(i[0].nodeRangePlot3)v(e,i,i[0].nodeRangePlot3)}}if(h){m(e);_(e)}}function me(e,t,r){var n;if(r){n=a.difference({regions:e,inverted:false},{regions:[t],inverted:false});return n.regions}n=a.union({regions:e,inverted:false},{regions:[t],inverted:false});return n.regions}function _e(e,t){if(Array.isArray(e)){var r=t.cd;var n=t.cd[0].trace;for(var a=0;a<e.length;a++){e[a]=i(e[a],n,r)}}return e}function ye(e,t){var r=[];for(var n=0;n<e.length;n++){r[n]=[];for(var a=0;a<e[n].length;a++){r[n][a]=[];r[n][a][0]=a?"L":"M";for(var i=0;i<e[n][a].length;i++){r[n][a].push(e[n][a][i])}}if(!t){r[n].push(["Z",r[n][0][1],r[n][0][2]])}}return r}t.exports={prepSelect:s,clearSelect:u,clearSelectionsCache:pe,selectOnClick:fe}},{"../../components/color":155,"../../components/dragelement/helpers":173,"../../components/drawing":177,"../../components/fx":195,"../../components/fx/helpers":191,"../../components/shapes/draw_newshape/display_outlines":243,"../../components/shapes/draw_newshape/helpers":244,"../../components/shapes/draw_newshape/newshapes":245,"../../lib":285,"../../lib/clear_gl_canvases":273,"../../lib/polygon":297,"../../lib/throttle":308,"../../plot_api/subroutines":321,"../../registry":373,"./axis_ids":335,"./constants":338,"./handle_outline":342,"./helpers":343,polybooljs:73}],352:[function(e,t,r){"use strict";var b=e("@plotly/d3");var x=e("d3-time-format").utcFormat;var w=e("fast-isnumeric");var A=e("../../lib");var T=A.cleanNumber;var k=A.ms2DateTime;var M=A.dateTime2ms;var S=A.ensureNumber;var C=A.isArrayOrTypedArray;var n=e("../../constants/numerical");var L=n.FP_SAFE;var E=n.BADNUM;var D=n.LOG_CLIP;var O=n.ONEWEEK;var P=n.ONEDAY;var I=n.ONEHOUR;var R=n.ONEMIN;var z=n.ONESEC;var N=e("./axis_ids");var F=e("./constants");var j=F.HOUR_PATTERN;var B=F.WEEKDAY_PATTERN;function H(e){return Math.pow(10,e)}function U(e){return e!==null&&e!==undefined}t.exports=function e(_,p){p=p||{};var v=_._id||"x";var g=v.charAt(0);function r(e,t){if(e>0)return Math.log(e)/Math.LN10;else if(e<=0&&t&&_.range&&_.range.length===2){var r=_.range[0];var n=_.range[1];return.5*(r+n-2*D*Math.abs(r-n))}else return E}function n(e,t,r,n){if((n||{}).msUTC&&w(e)){return+e}var a=M(e,r||_.calendar);if(a===E){if(w(e)){e=+e;var i=Math.floor(A.mod(e+.05,1)*10);var o=Math.round(e-i/10);a=M(new Date(o))+i/10}else return E}return a}function a(e,t,r){return k(e,t,r||_.calendar)}function t(e){return _._categories[Math.round(e)]}function m(e){if(U(e)){if(_._categoriesMap===undefined){_._categoriesMap={}}if(_._categoriesMap[e]!==undefined){return _._categoriesMap[e]}else{_._categories.push(typeof e==="number"?String(e):e);var t=_._categories.length-1;_._categoriesMap[e]=t;return t}}return E}function f(e,t){var r=new Array(t);for(var n=0;n<t;n++){var a=(e[0]||[])[n];var i=(e[1]||[])[n];r[n]=o([a,i])}return r}function o(e){if(_._categoriesMap){return _._categoriesMap[e]}}function i(e){var t=o(e);if(t!==undefined)return t;if(w(e))return+e}function s(e){return w(e)?+e:o(e)}function u(e,t,r){return b.round(r+t*e,2)}function l(e,t,r){return(e-r)/t}var d=function e(t){if(!w(t))return E;return u(t,_._m,_._b)};var c=function(e){return l(e,_._m,_._b)};if(_.rangebreaks){var h=g==="y";d=function(e){if(!w(e))return E;var t=_._rangebreaks.length;if(!t)return u(e,_._m,_._b);var r=h;if(_.range[0]>_.range[1])r=!r;var n=r?-1:1;var a=n*e;var i=0;for(var o=0;o<t;o++){var s=n*_._rangebreaks[o].min;var l=n*_._rangebreaks[o].max;if(a<s)break;if(a>l)i=o+1;else{i=a<(s+l)/2?o:o+1;break}}var c=_._B[i]||0;if(!isFinite(c))return 0;return u(e,_._m2,c)};c=function(e){var t=_._rangebreaks.length;if(!t)return l(e,_._m,_._b);var r=0;for(var n=0;n<t;n++){if(e<_._rangebreaks[n].pmin)break;if(e>_._rangebreaks[n].pmax)r=n+1}return l(e,_._m2,_._B[r])}}_.c2l=_.type==="log"?r:S;_.l2c=_.type==="log"?H:S;_.l2p=d;_.p2l=c;_.c2p=_.type==="log"?function(e,t){return d(r(e,t))}:d;_.p2c=_.type==="log"?function(e){return H(c(e))}:c;if(["linear","-"].indexOf(_.type)!==-1){_.d2r=_.r2d=_.d2c=_.r2c=_.d2l=_.r2l=T;_.c2d=_.c2r=_.l2d=_.l2r=S;_.d2p=_.r2p=function(e){return _.l2p(T(e))};_.p2d=_.p2r=c;_.cleanPos=S}else if(_.type==="log"){_.d2r=_.d2l=function(e,t){return r(T(e),t)};_.r2d=_.r2c=function(e){return H(T(e))};_.d2c=_.r2l=T;_.c2d=_.l2r=S;_.c2r=r;_.l2d=H;_.d2p=function(e,t){return _.l2p(_.d2r(e,t))};_.p2d=function(e){return H(c(e))};_.r2p=function(e){return _.l2p(T(e))};_.p2r=c;_.cleanPos=S}else if(_.type==="date"){_.d2r=_.r2d=A.identity;_.d2c=_.r2c=_.d2l=_.r2l=n;_.c2d=_.c2r=_.l2d=_.l2r=a;_.d2p=_.r2p=function(e,t,r){return _.l2p(n(e,0,r))};_.p2d=_.p2r=function(e,t,r){return a(c(e),t,r)};_.cleanPos=function(e){return A.cleanDate(e,E,_.calendar)}}else if(_.type==="category"){_.d2c=_.d2l=m;_.r2d=_.c2d=_.l2d=t;_.d2r=_.d2l_noadd=i;_.r2c=function(e){var t=s(e);return t!==undefined?t:_.fraction2r(.5)};_.l2r=_.c2r=S;_.r2l=s;_.d2p=function(e){return _.l2p(_.r2c(e))};_.p2d=function(e){return t(c(e))};_.r2p=_.d2p;_.p2r=c;_.cleanPos=function(e){if(typeof e==="string"&&e!=="")return e;return S(e)}}else if(_.type==="multicategory"){_.r2d=_.c2d=_.l2d=t;_.d2r=_.d2l_noadd=i;_.r2c=function(e){var t=i(e);return t!==undefined?t:_.fraction2r(.5)};_.r2c_just_indices=o;_.l2r=_.c2r=S;_.r2l=i;_.d2p=function(e){return _.l2p(_.r2c(e))};_.p2d=function(e){return t(c(e))};_.r2p=_.d2p;_.p2r=c;_.cleanPos=function(e){if(Array.isArray(e)||typeof e==="string"&&e!=="")return e;return S(e)};_.setupMultiCategory=function(e){var t=_._traceIndices;var r,n;var a=_._matchGroup;if(a&&_._categories.length===0){for(var i in a){if(i!==v){var o=p[N.id2name(i)];t=t.concat(o._traceIndices)}}}var s=[[0,{}],[0,{}]];var l=[];for(r=0;r<t.length;r++){var c=e[t[r]];if(g in c){var u=c[g];var f=c._length||A.minRowLength(u);if(C(u[0])&&C(u[1])){for(n=0;n<f;n++){var d=u[0][n];var h=u[1][n];if(U(d)&&U(h)){l.push([d,h]);if(!(d in s[0][1])){s[0][1][d]=s[0][0]++}if(!(h in s[1][1])){s[1][1][h]=s[1][0]++}}}}}}l.sort(function(e,t){var r=s[0][1];var n=r[e[0]]-r[t[0]];if(n)return n;var a=s[1][1];return a[e[1]]-a[t[1]]});for(r=0;r<l.length;r++){m(l[r])}}}_.fraction2r=function(e){var t=_.r2l(_.range[0]);var r=_.r2l(_.range[1]);return _.l2r(t+e*(r-t))};_.r2fraction=function(e){var t=_.r2l(_.range[0]);var r=_.r2l(_.range[1]);return(_.r2l(e)-t)/(r-t)};_.cleanRange=function(e,t){if(!t)t={};if(!e)e="range";var r=A.nestedProperty(_,e).get();var n,a;if(_.type==="date")a=A.dfltRange(_.calendar);else if(g==="y")a=F.DFLTRANGEY;else a=t.dfltRange||F.DFLTRANGEX;a=a.slice();if(_.rangemode==="tozero"||_.rangemode==="nonnegative"){a[0]=0}if(!r||r.length!==2){A.nestedProperty(_,e).set(a);return}if(_.type==="date"&&!_.autorange){r[0]=A.cleanDate(r[0],E,_.calendar);r[1]=A.cleanDate(r[1],E,_.calendar)}for(n=0;n<2;n++){if(_.type==="date"){if(!A.isDateTime(r[n],_.calendar)){_[e]=a;break}if(_.r2l(r[0])===_.r2l(r[1])){var i=A.constrain(_.r2l(r[0]),A.MIN_MS+1e3,A.MAX_MS-1e3);r[0]=_.l2r(i-1e3);r[1]=_.l2r(i+1e3);break}}else{if(!w(r[n])){if(w(r[1-n])){r[n]=r[1-n]*(n?10:.1)}else{_[e]=a;break}}if(r[n]<-L)r[n]=-L;else if(r[n]>L)r[n]=L;if(r[0]===r[1]){var o=Math.max(1,Math.abs(r[0]*1e-6));r[0]-=o;r[1]+=o}}}};_.setScale=function(e){var t=p._size;if(_.overlaying){var r=N.getFromId({_fullLayout:p},_.overlaying);_.domain=r.domain}var n=e&&_._r?"_r":"range";var a=_.calendar;_.cleanRange(n);var i=_.r2l(_[n][0],a);var o=_.r2l(_[n][1],a);var s=g==="y";if(s){_._offset=t.t+(1-_.domain[1])*t.h;_._length=t.h*(_.domain[1]-_.domain[0]);_._m=_._length/(i-o);_._b=-_._m*o}else{_._offset=t.l+_.domain[0]*t.w;_._length=t.w*(_.domain[1]-_.domain[0]);_._m=_._length/(o-i);_._b=-_._m*i}_._rangebreaks=[];_._lBreaks=0;_._m2=0;_._B=[];if(_.rangebreaks){var l,c;_._rangebreaks=_.locateBreaks(Math.min(i,o),Math.max(i,o));if(_._rangebreaks.length){for(l=0;l<_._rangebreaks.length;l++){c=_._rangebreaks[l];_._lBreaks+=Math.abs(c.max-c.min)}var u=s;if(i>o)u=!u;if(u)_._rangebreaks.reverse();var f=u?-1:1;_._m2=f*_._length/(Math.abs(o-i)-_._lBreaks);_._B.push(-_._m2*(s?o:i));for(l=0;l<_._rangebreaks.length;l++){c=_._rangebreaks[l];_._B.push(_._B[_._B.length-1]-f*_._m2*(c.max-c.min))}for(l=0;l<_._rangebreaks.length;l++){c=_._rangebreaks[l];c.pmin=d(c.min);c.pmax=d(c.max)}}}if(!isFinite(_._m)||!isFinite(_._b)||_._length<0){p._replotting=false;throw new Error("Something went wrong with axis scaling")}};_.maskBreaks=function(e){var t=_.rangebreaks||[];var r,n,a,i,o;if(!t._cachedPatterns){t._cachedPatterns=t.map(function(e){return e.enabled&&e.bounds?A.simpleMap(e.bounds,e.pattern?T:_.d2c):null})}if(!t._cachedValues){t._cachedValues=t.map(function(e){return e.enabled&&e.values?A.simpleMap(e.values,_.d2c).sort(A.sorterAsc):null})}for(var s=0;s<t.length;s++){var l=t[s];if(l.enabled){if(l.bounds){var c=l.pattern;r=t._cachedPatterns[s];n=r[0];a=r[1];switch(c){case B:o=new Date(e);i=o.getUTCDay();if(n>a){a+=7;if(i<n)i+=7}break;case j:o=new Date(e);var u=o.getUTCHours();var f=o.getUTCMinutes();var d=o.getUTCSeconds();var h=o.getUTCMilliseconds();i=u+(f/60+d/3600+h/36e5);if(n>a){a+=24;if(i<n)i+=24}break;case"":i=e;break}if(i>=n&&i<a)return E}else{var p=t._cachedValues[s];for(var v=0;v<p.length;v++){n=p[v];a=n+l.dvalue;if(e>=n&&e<a)return E}}}}return e};_.locateBreaks=function(i,o){var e,t,r,n;var s=[];if(!_.rangebreaks)return s;var a=_.rangebreaks.slice().sort(function(e,t){if(e.pattern===B&&t.pattern===j)return-1;if(t.pattern===B&&e.pattern===j)return 1;return 0});var l=function(e,t){e=A.constrain(e,i,o);t=A.constrain(t,i,o);if(e===t)return;var r=true;for(var n=0;n<s.length;n++){var a=s[n];if(e<a.max&&t>=a.min){if(e<a.min){a.min=e}if(t>a.max){a.max=t}r=false}}if(r){s.push({min:e,max:t})}};for(e=0;e<a.length;e++){var c=a[e];if(c.enabled){if(c.bounds){var u=i;var f=o;if(c.pattern){u=Math.floor(u)}t=A.simpleMap(c.bounds,c.pattern?T:_.r2l);r=t[0];n=t[1];var d=new Date(u);var h;var p;switch(c.pattern){case B:p=O;h=((n<r?7:0)+(n-r))*P;u+=r*P-(d.getUTCDay()*P+d.getUTCHours()*I+d.getUTCMinutes()*R+d.getUTCSeconds()*z+d.getUTCMilliseconds());break;case j:p=P;h=((n<r?24:0)+(n-r))*I;u+=r*I-(d.getUTCHours()*I+d.getUTCMinutes()*R+d.getUTCSeconds()*z+d.getUTCMilliseconds());break;default:u=Math.min(t[0],t[1]);f=Math.max(t[0],t[1]);p=f-u;h=p}for(var v=u;v<f;v+=p){l(v,v+h)}}else{var g=A.simpleMap(c.values,_.d2c);for(var m=0;m<g.length;m++){r=g[m];n=r+c.dvalue;l(r,n)}}}}s.sort(function(e,t){return e.min-t.min});return s};_.makeCalcdata=function(e,t,r){var n,a,i,o;var s=_.type;var l=s==="date"&&e[t+"calendar"];if(t in e){n=e[t];o=e._length||A.minRowLength(n);if(A.isTypedArray(n)&&(s==="linear"||s==="log")){if(o===n.length){return n}else if(n.subarray){return n.subarray(0,o)}}if(s==="multicategory"){return f(n,o)}a=new Array(o);for(i=0;i<o;i++){a[i]=_.d2c(n[i],0,l,r)}}else{var c=t+"0"in e?_.d2c(e[t+"0"],0,l):0;var u=e["d"+t]?Number(e["d"+t]):1;n=e[{x:"y",y:"x"}[t]];o=e._length||n.length;a=new Array(o);for(i=0;i<o;i++){a[i]=c+i*u}}if(_.rangebreaks){for(i=0;i<o;i++){a[i]=_.maskBreaks(a[i])}}return a};_.isValidRange=function(e){return Array.isArray(e)&&e.length===2&&w(_.r2l(e[0]))&&w(_.r2l(e[1]))};_.isPtWithinRange=function(e,t){var r=_.c2l(e[g],null,t);var n=_.r2l(_.range[0]);var a=_.r2l(_.range[1]);if(n<a){return n<=r&&r<=a}else{return a<=r&&r<=n}};_._emptyCategories=function(){_._categories=[];_._categoriesMap={}};_.clearCalc=function(){var e=_._matchGroup;if(e){var t=null;var r=null;for(var n in e){var a=p[N.id2name(n)];if(a._categories){t=a._categories;r=a._categoriesMap;break}}if(t&&r){_._categories=t;_._categoriesMap=r}else{_._emptyCategories()}}else{_._emptyCategories()}if(_._initialCategories){for(var i=0;i<_._initialCategories.length;i++){m(_._initialCategories[i])}}};_.sortByInitialCategories=function(){var e=[];_._emptyCategories();if(_._initialCategories){for(var t=0;t<_._initialCategories.length;t++){m(_._initialCategories[t])}}e=e.concat(_._traceIndices);var r=_._matchGroup;for(var n in r){if(v===n)continue;var a=p[N.id2name(n)];a._categories=_._categories;a._categoriesMap=_._categoriesMap;e=e.concat(a._traceIndices)}return e};var y=p._d3locale;if(_.type==="date"){_._dateFormat=y?y.timeFormat:x;_._extraFormat=p._extraFormat}_._separators=p.separators;_._numFormat=y?y.numberFormat:b.format;delete _._minDtick;delete _._forceTick0}},{"../../constants/numerical":265,"../../lib":285,"./axis_ids":335,"./constants":338,"@plotly/d3":20,"d3-time-format":29,"fast-isnumeric":31}],353:[function(e,t,r){"use strict";var p=e("../../lib");var v=e("../../components/color").contrast;var g=e("./layout_attributes");var m=e("../array_container_defaults");t.exports=function e(t,r,n,a,i,o){if(!o||o.pass===1){s(t,r,n,a,i)}if(!o||o.pass===2){l(t,r,n,a,i)}};function s(e,t,r,n,a){var i=_(e);var o=r("tickprefix");if(o)r("showtickprefix",i);var s=r("ticksuffix",a.tickSuffixDflt);if(s)r("showticksuffix",i)}function l(e,t,r,n,a){var i=_(e);var o=r("tickprefix");if(o)r("showtickprefix",i);var s=r("ticksuffix",a.tickSuffixDflt);if(s)r("showticksuffix",i);var l=r("showticklabels");if(l){var c=a.font||{};var u=t.color;var f=t.ticklabelposition||"";var d=f.indexOf("inside")!==-1?v(a.bgColor):u&&u!==g.color.dflt?u:c.color;p.coerceFont(r,"tickfont",{family:c.family,size:c.size,color:d});r("tickangle");if(n!=="category"){var h=r("tickformat");m(e,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:y});if(!t.tickformatstops.length){delete t.tickformatstops}if(!h&&n!=="date"){r("showexponent",i);r("exponentformat");r("minexponent");r("separatethousands")}}}}function _(t){var e=["showexponent","showtickprefix","showticksuffix"];var r=e.filter(function(e){return t[e]!==undefined});var n=function(e){return t[e]===t[r[0]]};if(r.every(n)||r.length===1){return t[r[0]]}}function y(r,n){function e(e,t){return p.coerce(r,n,g.tickformatstops,e,t)}var t=e("enabled");if(t){e("dtickrange");e("value")}}},{"../../components/color":155,"../../lib":285,"../array_container_defaults":326,"./layout_attributes":346}],354:[function(e,t,r){"use strict";var c=e("../../lib");var u=e("./layout_attributes");t.exports=function e(t,r,n,a){var i=c.coerce2(t,r,u,"ticklen");var o=c.coerce2(t,r,u,"tickwidth");var s=c.coerce2(t,r,u,"tickcolor",r.color);var l=n("ticks",a.outerTicks||i||o||s?"outside":"");if(!l){delete r.ticklen;delete r.tickwidth;delete r.tickcolor}}},{"../../lib":285,"./layout_attributes":346}],355:[function(e,t,r){"use strict";var h=e("./clean_ticks");var p=e("../../lib").isArrayOrTypedArray;t.exports=function e(r,n,t,a){function i(e){var t=r[e];return t!==undefined?t:(n._template||{})[e]}var o=i("tick0");var s=i("dtick");var l=i("tickvals");var c=p(l)?"array":s?"linear":"auto";var u=t("tickmode",c);if(u==="auto")t("nticks");else if(u==="linear"){var f=n.dtick=h.dtick(s,a);n.tick0=h.tick0(o,a,n.calendar,f)}else if(a!=="multicategory"){var d=t("tickvals");if(d===undefined)n.tickmode="auto";else t("ticktext")}}},{"../../lib":285,"./clean_ticks":337}],356:[function(e,t,r){"use strict";var v=e("@plotly/d3");var g=e("../../registry");var S=e("../../lib");var C=e("../../components/drawing");var L=e("./axes");t.exports=function e(M,i,n,t){var a=M._fullLayout;if(i.length===0){L.redrawComponents(M);return}function o(e){var t=e.xaxis;var r=e.yaxis;a._defs.select("#"+e.clipId+"> rect").call(C.setTranslate,0,0).call(C.setScale,1,1);e.plot.call(C.setTranslate,t._offset,r._offset).call(C.setScale,1,1);var n=e.plot.selectAll(".scatterlayer .trace");n.selectAll(".point").call(C.setPointGroupScale,1,1);n.selectAll(".textpoint").call(C.setTextPointsScale,1,1);n.call(C.hideOutsideRangePoints,e)}function s(e,t){var r=e.plotinfo;var n=r.xaxis;var a=r.yaxis;var i=n._length;var o=a._length;var s=!!e.xr1;var l=!!e.yr1;var c=[];if(s){var u=S.simpleMap(e.xr0,n.r2l);var f=S.simpleMap(e.xr1,n.r2l);var d=u[1]-u[0];var h=f[1]-f[0];c[0]=(u[0]*(1-t)+t*f[0]-u[0])/(u[1]-u[0])*i;c[2]=i*(1-t+t*h/d);n.range[0]=n.l2r(u[0]*(1-t)+t*f[0]);n.range[1]=n.l2r(u[1]*(1-t)+t*f[1])}else{c[0]=0;c[2]=i}if(l){var p=S.simpleMap(e.yr0,a.r2l);var v=S.simpleMap(e.yr1,a.r2l);var g=p[1]-p[0];var m=v[1]-v[0];c[1]=(p[1]*(1-t)+t*v[1]-p[1])/(p[0]-p[1])*o;c[3]=o*(1-t+t*m/g);a.range[0]=n.l2r(p[0]*(1-t)+t*v[0]);a.range[1]=a.l2r(p[1]*(1-t)+t*v[1])}else{c[1]=0;c[3]=o}L.drawOne(M,n,{skipTitle:true});L.drawOne(M,a,{skipTitle:true});L.redrawComponents(M,[n._id,a._id]);var _=s?i/c[2]:1;var y=l?o/c[3]:1;var b=s?c[0]:0;var x=l?c[1]:0;var w=s?c[0]/c[2]*i:0;var A=l?c[1]/c[3]*o:0;var T=n._offset-w;var k=a._offset-A;r.clipRect.call(C.setTranslate,b,x).call(C.setScale,1/_,1/y);r.plot.call(C.setTranslate,T,k).call(C.setScale,_,y);C.setPointGroupScale(r.zoomScalePts,1/_,1/y);C.setTextPointsScale(r.zoomScaleTxt,1/_,1/y)}var l;if(t){l=t()}function c(){var e={};for(var t=0;t<i.length;t++){var r=i[t];var n=r.plotinfo.xaxis;var a=r.plotinfo.yaxis;if(r.xr1)e[n._name+".range"]=r.xr1.slice();if(r.yr1)e[a._name+".range"]=r.yr1.slice()}l&&l();return g.call("relayout",M,e).then(function(){for(var e=0;e<i.length;e++){o(i[e].plotinfo)}})}function r(){var e={};for(var t=0;t<i.length;t++){var r=i[t];var n=r.plotinfo.xaxis;var a=r.plotinfo.yaxis;if(r.xr0)e[n._name+".range"]=r.xr0.slice();if(r.yr0)e[a._name+".range"]=r.yr0.slice()}return g.call("relayout",M,e).then(function(){for(var e=0;e<i.length;e++){o(i[e].plotinfo)}})}var u,f,d;var h=v.ease(n.easing);M._transitionData._interruptCallbacks.push(function(){window.cancelAnimationFrame(d);d=null;return r()});function p(){f=Date.now();var e=Math.min(1,(f-u)/n.duration);var t=h(e);for(var r=0;r<i.length;r++){s(i[r],t)}if(f-u>n.duration){c();d=window.cancelAnimationFrame(p)}else{d=window.requestAnimationFrame(p)}}u=Date.now();d=window.requestAnimationFrame(p);return Promise.resolve()}},{"../../components/drawing":177,"../../lib":285,"../../registry":373,"./axes":331,"@plotly/d3":20}],357:[function(e,t,r){"use strict";var p=e("../../registry").traceIs;var v=e("./axis_autotype");t.exports=function e(t,r,n,a){n("autotypenumbers",a.autotypenumbersDflt);var i=n("type",(a.splomStash||{}).type);if(i==="-"){o(r,a.data);if(r.type==="-"){r.type="linear"}else{t.type=r.type}}};function o(e,t){if(e.type!=="-")return;var r=e._id;var n=r.charAt(0);var a;if(r.indexOf("scene")!==-1)r=n;var i=g(t,r,n);if(!i)return;if(i.type==="histogram"&&n==={v:"y",h:"x"}[i.orientation||"v"]){e.type="linear";return}var o=n+"calendar";var s=i[o];var l={noMultiCategory:!p(i,"cartesian")||p(i,"noMultiCategory")};if(i.type==="box"&&i._hasPreCompStats&&n==={h:"x",v:"y"}[i.orientation||"v"]){l.noMultiCategory=true}l.autotypenumbers=e.autotypenumbers;if(_(i,n)){var c=m(i);var u=[];for(a=0;a<t.length;a++){var f=t[a];if(!p(f,"box-violin")||(f[n+"axis"]||n)!==r)continue;if(f[c]!==undefined)u.push(f[c][0]);else if(f.name!==undefined)u.push(f.name);else u.push("text");if(f[o]!==s)s=undefined}e.type=v(u,s,l)}else if(i.type==="splom"){var d=i.dimensions;var h=d[i._axesDim[r]];if(h.visible)e.type=v(h.values,s,l)}else{e.type=v(i[n]||[i[n+"0"]],s,l)}}function g(e,t,r){for(var n=0;n<e.length;n++){var a=e[n];if(a.type==="splom"&&a._length>0&&(a["_"+r+"axes"]||{})[t]){return a}if((a[r+"axis"]||r)===t){if(_(a,r)){return a}else if((a[r]||[]).length||a[r+"0"]){return a}}}}function m(e){return{v:"x",h:"y"}[e.orientation||"v"]}function _(e,t){var r=m(e);var n=p(e,"box-violin");var a=p(e._fullInput||{},"candlestick");return n&&!a&&t===r&&e[r]===undefined&&e[r+"0"]===undefined}},{"../../registry":373,"./axis_autotype":332}],358:[function(e,t,h){"use strict";var o=e("../registry");var d=e("../lib");h.manageCommandObserver=function(r,e,t,n){var a={};var i=true;if(e&&e._commandObserver){a=e._commandObserver}if(!a.cache){a.cache={}}a.lookupTable={};var o=h.hasSimpleAPICommandBindings(r,t,a.lookupTable);if(e&&e._commandObserver){if(!o){if(e._commandObserver.remove){e._commandObserver.remove();e._commandObserver=null;return a}}else{return a}}if(o){c(r,o,a.cache);a.check=function e(){if(!i)return;var t=c(r,o,a.cache);if(t.changed&&n){if(a.lookupTable[t.value]!==undefined){a.disable();Promise.resolve(n({value:t.value,type:o.type,prop:o.prop,traces:o.traces,index:a.lookupTable[t.value]})).then(a.enable,a.enable)}}return t.changed};var s=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"];for(var l=0;l<s.length;l++){r._internalOn(s[l],a.check)}a.remove=function(){for(var e=0;e<s.length;e++){r._removeInternalListener(s[e],a.check)}}}else{d.log("Unable to automatically bind plot updates to API command");a.lookupTable={};a.remove=function(){}}a.disable=function e(){i=false};a.enable=function e(){i=true};if(e){e._commandObserver=a}return a};h.hasSimpleAPICommandBindings=function(e,t,r){var n;var a=t.length;var i;for(n=0;n<a;n++){var o;var s=t[n];var l=s.method;var c=s.args;if(!Array.isArray(c))c=[];if(!l){return false}var u=h.computeAPICommandBindings(e,l,c);if(u.length!==1){return false}if(!i){i=u[0];if(Array.isArray(i.traces)){i.traces.sort()}}else{o=u[0];if(o.type!==i.type){return false}if(o.prop!==i.prop){return false}if(Array.isArray(i.traces)){if(Array.isArray(o.traces)){o.traces.sort();for(var f=0;f<i.traces.length;f++){if(i.traces[f]!==o.traces[f]){return false}}}else{return false}}else{if(o.prop!==i.prop){return false}}}o=u[0];var d=o.value;if(Array.isArray(d)){if(d.length===1){d=d[0]}else{return false}}if(r){r[d]=n}}return i};function c(e,t,r){var n,a,i;var o=false;if(t.type==="data"){n=e._fullData[t.traces!==null?t.traces[0]:0]}else if(t.type==="layout"){n=e._fullLayout}else{return false}a=d.nestedProperty(n,t.prop).get();i=r[t.type]=r[t.type]||{};if(i.hasOwnProperty(t.prop)){if(i[t.prop]!==a){o=true}}i[t.prop]=a;return{changed:o,value:a}}h.executeAPICommand=function(e,t,r){if(t==="skip")return Promise.resolve();var n=o.apiMethodRegistry[t];var a=[e];if(!Array.isArray(r))r=[];for(var i=0;i<r.length;i++){a.push(r[i])}return n.apply(null,a).catch(function(e){d.warn("API call to Plotly."+t+" rejected.",e);return Promise.reject(e)})};h.computeAPICommandBindings=function(e,t,r){var n;if(!Array.isArray(r))r=[];switch(t){case"restyle":n=s(e,r);break;case"relayout":n=i(e,r);break;case"update":n=s(e,[r[0],r[2]]).concat(i(e,[r[1]]));break;case"animate":n=a(e,r);break;default:n=[]}return n};function a(e,t){if(Array.isArray(t[0])&&t[0].length===1&&["string","number"].indexOf(typeof t[0][0])!==-1){return[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]}else{return[]}}function i(e,t){var n=[];var r=t[0];var a={};if(typeof r==="string"){a[r]=t[1]}else if(d.isPlainObject(r)){a=r}else{return n}l(a,function(e,t,r){n.push({type:"layout",prop:e,value:r})},"",0);return n}function s(c,e){var u,t,r,n;var f=[];t=e[0];r=e[1];u=e[2];n={};if(typeof t==="string"){n[t]=r}else if(d.isPlainObject(t)){n=t;if(u===undefined){u=r}}else{return f}if(u===undefined){u=null}l(n,function(e,t,r){var n;var a;if(Array.isArray(r)){a=r.slice();var i=Math.min(a.length,c.data.length);if(u){i=Math.min(i,u.length)}n=[];for(var o=0;o<i;o++){n[o]=u?u[o]:o}}else{a=r;n=u?u.slice():null}if(n===null){if(Array.isArray(a)){a=a[0]}}else if(Array.isArray(n)){if(!Array.isArray(a)){var s=a;a=[];for(var l=0;l<n.length;l++){a[l]=s}}a.length=Math.min(n.length,a.length)}f.push({type:"data",prop:e,traces:n,value:a})},"",0);return f}function l(n,a,i,o){Object.keys(n).forEach(function(e){var t=n[e];if(e[0]==="_")return;var r=i+(o>0?".":"")+e;if(d.isPlainObject(t)){l(t,a,r,o+1)}else{a(r,e,t)}})}},{"../lib":285,"../registry":373}],359:[function(e,t,r){"use strict";var s=e("../lib/extend").extendFlat;r.attributes=function(e,t){e=e||{};t=t||{};var r={valType:"info_array",editType:e.editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]};var n=e.name?e.name+" ":"";var a=e.trace?"trace ":"subplot ";var i=t.description?" "+t.description:"";var o={x:s({},r,{}),y:s({},r,{}),editType:e.editType};if(!e.noGridCell){o.row={valType:"integer",min:0,dflt:0,editType:e.editType};o.column={valType:"integer",min:0,dflt:0,editType:e.editType}}return o};r.defaults=function(e,t,r,n){var a=n&&n.x||[0,1];var i=n&&n.y||[0,1];var o=t.grid;if(o){var s=r("domain.column");if(s!==undefined){if(s<o.columns)a=o._domains.x[s];else delete e.domain.column}var l=r("domain.row");if(l!==undefined){if(l<o.rows)i=o._domains.y[l];else delete e.domain.row}}var c=r("domain.x",a);var u=r("domain.y",i);if(!(c[0]<c[1]))e.domain.x=a.slice();if(!(u[0]<u[1]))e.domain.y=i.slice()}},{"../lib/extend":279}],360:[function(e,t,r){"use strict";t.exports=function(e){var t=e.editType;var r=e.colorEditType;if(r===undefined)r=t;var n={family:{valType:"string",noBlank:true,strict:true,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:r},editType:t};if(e.arrayOk){n.family.arrayOk=true;n.size.arrayOk=true;n.color.arrayOk=true}return n}},{}],361:[function(e,t,r){"use strict";t.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],362:[function(e,t,r){"use strict";var f=e("../registry");var d=e("./cartesian/constants").SUBPLOT_PATTERN;r.getSubplotCalcData=function(e,t,r){var n=f.subplotsRegistry[t];if(!n)return[];var a=n.attr;var i=[];for(var o=0;o<e.length;o++){var s=e[o];var l=s[0].trace;if(l[a]===r)i.push(s)}return i};r.getModuleCalcData=function(e,t){var r=[];var n=[];var a;if(typeof t==="string"){a=f.getModule(t).plot}else if(typeof t==="function"){a=t}else{a=t.plot}if(!a){return[r,e]}for(var i=0;i<e.length;i++){var o=e[i];var s=o[0].trace;if(s.visible!==true||s._length===0)continue;if(s._module.plot===a){r.push(o)}else{n.push(o)}}return[r,n]};r.getSubplotData=function e(t,r,n){if(!f.subplotsRegistry[r])return[];var a=f.subplotsRegistry[r].attr;var i=[];var o,s,l;if(r==="gl2d"){var c=n.match(d);s="x"+c[1];l="y"+c[2]}for(var u=0;u<t.length;u++){o=t[u];if(r==="gl2d"&&f.traceIs(o,"gl2d")){if(o[a[0]]===s&&o[a[1]]===l){i.push(o)}}else{if(o[a]===n)i.push(o)}}return i}},{"../registry":373,"./cartesian/constants":338}],363:[function(e,t,r){"use strict";function n(e,t){var r=[0,0,0,0];var n,a;for(n=0;n<4;++n){for(a=0;a<4;++a){r[a]+=e[4*n+a]*t[n]}}return r}function a(e,t){var r=n(e.projection,n(e.view,n(e.model,[t[0],t[1],t[2],1])));return r}t.exports=a},{}],364:[function(e,t,r){"use strict";var n=e("./font_attributes");var a=e("./animation_attributes");var i=e("../components/color/attributes");var o=e("../components/shapes/draw_newshape/attributes");var s=e("./pad_attributes");var l=e("../lib/extend").extendFlat;var c=n({editType:"calc"});c.family.dflt='"Open Sans", verdana, arial, sans-serif';c.size.dflt=12;c.color.dflt=i.defaultLine;t.exports={font:c,title:{text:{valType:"string",editType:"layoutstyle"},font:n({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:l(s({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[false,"hide","show"],dflt:false,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:false,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:true,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:i.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:i.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:false,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:i.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:o.newshape,activeshape:o.activeshape,meta:{valType:"any",arrayOk:true,editType:"plot"},transition:l({},a.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:n({editType:"layoutstyle"})}}},{"../components/color/attributes":154,"../components/shapes/draw_newshape/attributes":240,"../lib/extend":279,"./animation_attributes":325,"./font_attributes":360,"./pad_attributes":365}],365:[function(e,t,r){"use strict";t.exports=function(e){var t=e.editType;return{t:{valType:"number",dflt:0,editType:t},r:{valType:"number",dflt:0,editType:t},b:{valType:"number",dflt:0,editType:t},l:{valType:"number",dflt:0,editType:t},editType:t}}},{}],366:[function(e,t,r){"use strict";var l=e("@plotly/d3");var n=e("d3-time-format").timeFormatLocale;var N=e("fast-isnumeric");var F=e("../registry");var _=e("../plot_api/plot_schema");var A=e("../plot_api/plot_template");var j=e("../lib");var y=e("../components/color");var b=e("../constants/numerical").BADNUM;var O=e("./cartesian/axis_ids");var B=e("./cartesian/handle_outline").clearSelect;var a=e("./animation_attributes");var i=e("./frame_attributes");var s=e("../plots/get_data").getModuleCalcData;var H=j.relinkPrivateKeys;var U=j._;var V=t.exports={};j.extendFlat(V,F);V.attributes=e("./attributes");V.attributes.type.values=V.allTypes;V.fontAttrs=e("./font_attributes");V.layoutAttributes=e("./layout_attributes");V.fontWeight="normal";var x=V.transformsRegistry;var o=e("./command");V.executeAPICommand=o.executeAPICommand;V.computeAPICommandBindings=o.computeAPICommandBindings;V.manageCommandObserver=o.manageCommandObserver;V.hasSimpleAPICommandBindings=o.hasSimpleAPICommandBindings;V.redrawText=function(t){t=j.getGraphDiv(t);return new Promise(function(e){setTimeout(function(){if(!t._fullLayout)return;F.getComponentMethod("annotations","draw")(t);F.getComponentMethod("legend","draw")(t);F.getComponentMethod("colorbar","draw")(t);e(V.previousPromises(t))},300)})};V.resize=function(r){r=j.getGraphDiv(r);var n;var e=new Promise(function(t,e){if(!r||j.isHidden(r)){e(new Error("Resize must be passed a displayed plot div element."))}if(r._redrawTimer)clearTimeout(r._redrawTimer);if(r._resolveResize)n=r._resolveResize;r._resolveResize=t;r._redrawTimer=setTimeout(function(){if(!r.layout||r.layout.width&&r.layout.height||j.isHidden(r)){t(r);return}delete r.layout.width;delete r.layout.height;var e=r.changed;r.autoplay=true;F.call("relayout",r,{autosize:true}).then(function(){r.changed=e;if(r._resolveResize===t){delete r._resolveResize;t(r)}})},100)});if(n)n(e);return e};V.previousPromises=function(e){if((e._promises||[]).length){return Promise.all(e._promises).then(function(){e._promises=[]})}};V.addLinks=function(e){if(!e._context.showLink&&!e._context.showSources)return;var t=e._fullLayout;var r=j.ensureSingle(t._paper,"text","js-plot-link-container",function(e){e.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:y.defaultLine,"pointer-events":"all"}).each(function(){var e=l.select(this);e.append("tspan").classed("js-link-to-tool",true);e.append("tspan").classed("js-link-spacer",true);e.append("tspan").classed("js-sourcelinks",true)})});var n=r.node();var a={y:t._paper.attr("height")-9};if(document.body.contains(n)&&n.getComputedTextLength()>=t.width-20){a["text-anchor"]="start";a.x=5}else{a["text-anchor"]="end";a.x=t._paper.attr("width")-7}r.attr(a);var i=r.select(".js-link-to-tool");var o=r.select(".js-link-spacer");var s=r.select(".js-sourcelinks");if(e._context.showSources)e._context.showSources(e);if(e._context.showLink)c(e,i);o.text(i.text()&&s.text()?" - ":"")};function c(e,t){t.text("");var r=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));if(e._context.sendData){r.on("click",function(){V.sendDataToCloud(e)})}else{var n=window.location.pathname.split("/");var a=window.location.search;r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+n[2].split(".")[0]+"/"+n[1]+a})}}V.sendDataToCloud=function(e){var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(!t)return;e.emit("plotly_beforeexport");var r=l.select(e).append("div").attr("id","hiddenform").style("display","none");var n=r.append("form").attr({action:t+"/external",method:"post",target:"_blank"});var a=n.append("input").attr({type:"text",name:"data"});a.node().value=V.graphJson(e,false,"keepdata");n.node().submit();r.remove();e.emit("plotly_afterexport");return false};var q=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"];var Y=["year","month","dayMonth","dayMonthYear"];V.supplyDefaults=function(e,t){var r=t&&t.skipUpdateCalc;var n=e._fullLayout||{};if(n._skipDefaults){delete n._skipDefaults;return}var a=e._fullLayout={};var i=e.layout||{};var o=e._fullData||[];var s=e._fullData=[];var l=e.data||[];var c=e.calcdata||[];var u=e._context||{};var f;if(!e._transitionData)V.createTransitionData(e);a._dfltTitle={plot:U(e,"Click to enter Plot title"),x:U(e,"Click to enter X axis title"),y:U(e,"Click to enter Y axis title"),colorbar:U(e,"Click to enter Colorscale title"),annotation:U(e,"new text")};a._traceWord=U(e,"trace");var d=X(e,q);a._mapboxAccessToken=u.mapboxAccessToken;if(n._initialAutoSizeIsDone){var h=n.width;var p=n.height;V.supplyLayoutGlobalDefaults(i,a,d);if(!i.width)a.width=h;if(!i.height)a.height=p;V.sanitizeMargins(a)}else{V.supplyLayoutGlobalDefaults(i,a,d);var v=!i.width||!i.height;var g=a.autosize;var m=u.autosizable;var _=v&&(g||m);if(_)V.plotAutoSize(e,i,a);else if(v)V.sanitizeMargins(a);if(!g&&v){i.width=a.width;i.height=a.height}}a._d3locale=Z(d,a.separators);a._extraFormat=X(e,Y);a._initialAutoSizeIsDone=true;a._dataLength=l.length;a._modules=[];a._visibleModules=[];a._basePlotModules=[];var y=a._subplots=W();var b=a._splomAxes={x:{},y:{}};var x=a._splomSubplots={};a._splomGridDflt={};a._scatterStackOpts={};a._firstScatter={};a._alignmentOpts={};a._colorAxes={};a._requestRangeslider={};a._traceUids=G(o,l);a._globalTransforms=(e._context||{}).globalTransforms;V.supplyDataDefaults(l,s,i,a);var w=Object.keys(b.x);var A=Object.keys(b.y);if(w.length>1&&A.length>1){F.getComponentMethod("grid","sizeDefaults")(i,a);for(f=0;f<w.length;f++){j.pushUnique(y.xaxis,w[f])}for(f=0;f<A.length;f++){j.pushUnique(y.yaxis,A[f])}for(var T in x){j.pushUnique(y.cartesian,T)}}a._has=V._hasPlotType.bind(a);if(o.length===s.length){for(f=0;f<s.length;f++){H(s[f],o[f])}}V.supplyLayoutModuleDefaults(i,a,s,e._transitionData);var k=a._visibleModules;var M=[];for(f=0;f<k.length;f++){var S=k[f].crossTraceDefaults;if(S)j.pushUnique(M,S)}for(f=0;f<M.length;f++){M[f](s,a)}a._hasOnlyLargeSploms=a._basePlotModules.length===1&&a._basePlotModules[0].name==="splom"&&w.length>15&&A.length>15&&a.shapes.length===0&&a.images.length===0;V.linkSubplots(s,a,o,n);V.cleanPlot(s,a,o,n);var C=!!(n._has&&n._has("gl2d"));var L=!!(a._has&&a._has("gl2d"));var E=!!(n._has&&n._has("cartesian"));var D=!!(a._has&&a._has("cartesian"));var O=E||C;var P=D||L;if(O&&!P){n._bgLayer.remove()}else if(P&&!O){a._shouldCreateBgLayer=true}if(n._zoomlayer&&!e._dragging){B({_fullLayout:n})}J(s,a);H(a,n);F.getComponentMethod("colorscale","crossTraceDefaults")(s,a);if(!a._preGUI)a._preGUI={};if(!a._tracePreGUI)a._tracePreGUI={};var I=a._tracePreGUI;var R={};var z;for(z in I)R[z]="old";for(f=0;f<s.length;f++){z=s[f]._fullInput.uid;if(!R[z])I[z]={};R[z]="new"}for(z in R){if(R[z]==="old")delete I[z]}$(a);F.getComponentMethod("rangeslider","makeData")(a);if(!r&&c.length===s.length){V.supplyDefaultsUpdateCalc(c,s)}};V.supplyDefaultsUpdateCalc=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];var a=(e[r]||[])[0];if(a&&a.trace){var i=a.trace;if(i._hasCalcTransform){var o=i._arrayAttrs;var s,l,c;for(s=0;s<o.length;s++){l=o[s];c=j.nestedProperty(i,l).get().slice();j.nestedProperty(n,l).set(c)}}a.trace=n}}};function G(e,t){var r=t.length;var n=[];var a,i;for(a=0;a<e.length;a++){var o=e[a]._fullInput;if(o!==i)n.push(o);i=o}var s=n.length;var l=new Array(r);var c={};function u(e,t){l[t]=e;c[e]=1}function f(e,t){if(e&&typeof e==="string"&&!c[e]){u(e,t);return true}}for(a=0;a<r;a++){var d=t[a].uid;if(typeof d==="number")d=String(d);if(f(d,a))continue;if(a<s&&f(n[a].uid,a))continue;u(j.randstr(c),a)}return l}function W(){var e=F.collectableSubplotTypes;var t={};var r,n;if(!e){e=[];var a=F.subplotsRegistry;for(var i in a){var o=a[i];var s=o.attr;if(s){e.push(i);if(Array.isArray(s)){for(n=0;n<s.length;n++){j.pushUnique(e,s[n])}}}}}for(r=0;r<e.length;r++){t[e[r]]=[]}return t}function X(e,a){var t=e._context.locale;if(!t)t="en-US";var i=false;var o={};function r(e){var t=true;for(var r=0;r<a.length;r++){var n=a[r];if(!o[n]){if(e[n]){o[n]=e[n]}else t=false}}if(t)i=true}for(var n=0;n<2;n++){var s=e._context.locales;for(var l=0;l<2;l++){var c=(s[t]||{}).format;if(c){r(c);if(i)break}s=F.localeRegistry}var u=t.split("-")[0];if(i||u===t)break;t=u}if(!i)r(F.localeRegistry.en.format);return o}function Z(e,t){e.decimal=t.charAt(0);e.thousands=t.charAt(1);return{numberFormat:l.locale(e).numberFormat,timeFormat:n(e).utcFormat}}function J(e,t){var r;var n=[];if(t.meta){r=t._meta={meta:t.meta,layout:{meta:t.meta}}}for(var a=0;a<e.length;a++){var i=e[a];if(i.meta){n[i.index]=i._meta={meta:i.meta}}else if(t.meta){i._meta={meta:t.meta}}if(t.meta){i._meta.layout={meta:t.meta}}}if(n.length){if(!r){r=t._meta={}}r.data=n}}V.createTransitionData=function(e){if(!e._transitionData){e._transitionData={}}if(!e._transitionData._frames){e._transitionData._frames=[]}if(!e._transitionData._frameHash){e._transitionData._frameHash={}}if(!e._transitionData._counter){e._transitionData._counter=0}if(!e._transitionData._interruptCallbacks){e._transitionData._interruptCallbacks=[]}};V._hasPlotType=function(e){var t;var r=this._basePlotModules||[];for(t=0;t<r.length;t++){if(r[t].name===e)return true}var n=this._modules||[];for(t=0;t<n.length;t++){var a=n[t].name;if(a===e)return true;var i=F.modules[a];if(i&&i.categories[e])return true}return false};V.cleanPlot=function(e,t,r,n){var a,i;var o=n._basePlotModules||[];for(a=0;a<o.length;a++){var s=o[a];if(s.clean){s.clean(e,t,r,n)}}var l=n._has&&n._has("gl");var c=t._has&&t._has("gl");if(l&&!c){if(n._glcontainer!==undefined){n._glcontainer.selectAll(".gl-canvas").remove();n._glcontainer.selectAll(".no-webgl").remove();n._glcanvas=null}}var u=!!n._infolayer;e:for(a=0;a<r.length;a++){var f=r[a];var d=f.uid;for(i=0;i<e.length;i++){var h=e[i];if(d===h.uid)continue e}if(u){n._infolayer.select(".cb"+d).remove()}}};V.linkSubplots=function(e,t,r,n){var a,i;var o=n._plots||{};var s=t._plots={};var l=t._subplots;var c={_fullData:e,_fullLayout:t};var u=l.cartesian.concat(l.gl2d||[]);for(a=0;a<u.length;a++){var f=u[a];var d=o[f];var h=O.getFromId(c,f,"x");var p=O.getFromId(c,f,"y");var v;if(d){v=s[f]=d}else{v=s[f]={};v.id=f}h._counterAxes.push(p._id);p._counterAxes.push(h._id);h._subplotsWith.push(f);p._subplotsWith.push(f);v.xaxis=h;v.yaxis=p;v._hasClipOnAxisFalse=false;for(i=0;i<e.length;i++){var g=e[i];if(g.xaxis===v.xaxis._id&&g.yaxis===v.yaxis._id&&g.cliponaxis===false){v._hasClipOnAxisFalse=true;break}}}var m=O.list(c,null,true);var _;for(a=0;a<m.length;a++){_=m[a];var y=null;if(_.overlaying){y=O.getFromId(c,_.overlaying);if(y&&y.overlaying){_.overlaying=false;y=null}}_._mainAxis=y||_;if(y)_.domain=y.domain.slice();_._anchorAxis=_.anchor==="free"?null:O.getFromId(c,_.anchor)}for(a=0;a<m.length;a++){_=m[a];_._counterAxes.sort(O.idSort);_._subplotsWith.sort(j.subplotSort);_._mainSubplot=T(_,t);if(_._counterAxes.length&&(_.spikemode&&_.spikemode.indexOf("across")!==-1||_.automargin&&_.mirror&&_.anchor!=="free"||F.getComponentMethod("rangeslider","isVisible")(_))){var b=1;var x=0;for(i=0;i<_._counterAxes.length;i++){var w=O.getFromId(c,_._counterAxes[i]);b=Math.min(b,w.domain[0]);x=Math.max(x,w.domain[1])}if(b<x){_._counterDomainMin=b;_._counterDomainMax=x}}}};function T(e,t){var r={_fullLayout:t};var n=e._id.charAt(0)==="x";var a=e._mainAxis._anchorAxis;var i="";var o="";var s="";if(a){s=a._mainAxis._id;i=n?e._id+s:s+e._id}if(!i||!t._plots[i]){i="";var l=e._counterAxes;for(var c=0;c<l.length;c++){var u=l[c];var f=n?e._id+u:u+e._id;if(!o)o=f;var d=O.getFromId(r,u);if(s&&d.overlaying===s){i=f;break}}}return i||o}V.clearExpandedTraceDefaultColors=function(e){var a,i,t;function r(e,t,r,n){i[n]=t;i.length=n+1;if(e.valType==="color"&&e.dflt===undefined){a.push(i.join("."))}}i=[];a=e._module._colorAttrs;if(!a){e._module._colorAttrs=a=[];_.crawl(e._module.attributes,r)}for(t=0;t<a.length;t++){var n=j.nestedProperty(e,"_input."+a[t]);if(!n.get()){j.nestedProperty(e,a[t]).set(null)}}};V.supplyDataDefaults=function(e,r,t,n){var a=n._modules;var i=n._visibleModules;var o=n._basePlotModules;var s=0;var l=0;var c,u,f;n._transformModules=[];function d(e){r.push(e);var t=e._module;if(!t)return;j.pushUnique(a,t);if(e.visible===true)j.pushUnique(i,t);j.pushUnique(o,e._module.basePlotModule);s++;if(e._input.visible!==false)l++}var h={};var p=[];var v=(t.template||{}).data||{};var g=A.traceTemplater(v);for(c=0;c<e.length;c++){f=e[c];u=g.newTrace(f);u.uid=n._traceUids[c];V.supplyTraceDefaults(f,u,l,n,c);u.index=c;u._input=f;u._expandedIndex=s;if(u.transforms&&u.transforms.length){var m=f.visible!==false&&u.visible===false;var _=k(u,r,t,n);for(var y=0;y<_.length;y++){var b=_[y];var x={_template:u._template,type:u.type,uid:u.uid+y};if(m&&b.visible===false){delete b.visible}V.supplyTraceDefaults(b,x,s,n,c);H(x,b);x.index=c;x._input=f;x._fullInput=u;x._expandedIndex=s;x._expandedInput=b;d(x)}}else{u._fullInput=u;u._expandedInput=u;d(u)}if(F.traceIs(u,"carpetAxis")){h[u.carpet]=u}if(F.traceIs(u,"carpetDependent")){p.push(c)}}for(c=0;c<p.length;c++){u=r[p[c]];if(!u.visible)continue;var w=h[u.carpet];u._carpet=w;if(!w||!w.visible){u.visible=false;continue}u.xaxis=w.xaxis;u.yaxis=w.yaxis}};V.supplyAnimationDefaults=function(r){r=r||{};var e;var n={};function t(e,t){return j.coerce(r||{},n,a,e,t)}t("mode");t("direction");t("fromcurrent");if(Array.isArray(r.frame)){n.frame=[];for(e=0;e<r.frame.length;e++){n.frame[e]=V.supplyAnimationFrameDefaults(r.frame[e]||{})}}else{n.frame=V.supplyAnimationFrameDefaults(r.frame||{})}if(Array.isArray(r.transition)){n.transition=[];for(e=0;e<r.transition.length;e++){n.transition[e]=V.supplyAnimationTransitionDefaults(r.transition[e]||{})}}else{n.transition=V.supplyAnimationTransitionDefaults(r.transition||{})}return n};V.supplyAnimationFrameDefaults=function(r){var n={};function e(e,t){return j.coerce(r||{},n,a.frame,e,t)}e("duration");e("redraw");return n};V.supplyAnimationTransitionDefaults=function(r){var n={};function e(e,t){return j.coerce(r||{},n,a.transition,e,t)}e("duration");e("easing");return n};V.supplyFrameDefaults=function(r){var n={};function e(e,t){return j.coerce(r,n,i,e,t)}e("group");e("name");e("traces");e("baseframe");e("data");e("layout");return n};V.supplyTraceDefaults=function(r,n,e,t,a){var i=t.colorway||y.defaults;var o=i[e%i.length];var s;function l(e,t){return j.coerce(r,n,V.attributes,e,t)}var c=l("visible");l("type");l("name",t._traceWord+" "+a);l("uirevision",t.uirevision);var u=V.getModule(n);n._module=u;if(u){var f=u.basePlotModule;var d=f.attr;var h=f.attributes;if(d&&h){var p=t._subplots;var v="";if(c||f.name!=="gl2d"){if(Array.isArray(d)){for(s=0;s<d.length;s++){var g=d[s];var m=j.coerce(r,n,h,g);if(p[g])j.pushUnique(p[g],m);v+=m}}else{v=j.coerce(r,n,h,d)}if(p[f.name]){j.pushUnique(p[f.name],v)}}}}if(c){l("customdata");l("ids");l("meta");if(F.traceIs(n,"showLegend")){j.coerce(r,n,u.attributes.showlegend?u.attributes:V.attributes,"showlegend");l("legendgroup");var _=l("legendgrouptitle.text");if(_){j.coerceFont(l,"legendgrouptitle.font",j.extendFlat({},t.font,{size:Math.round(t.font.size*1.1)}))}l("legendrank");n._dfltShowLegend=true}else{n._dfltShowLegend=false}if(u){u.supplyDefaults(r,n,o,t)}if(!F.traceIs(n,"noOpacity")){l("opacity")}if(F.traceIs(n,"notLegendIsolatable")){n.visible=!!n.visible}if(!F.traceIs(n,"noHover")){if(!n.hovertemplate)j.coerceHoverinfo(r,n,t);if(n.type!=="parcats"){F.getComponentMethod("fx","supplyDefaults")(r,n,o,t)}}if(u&&u.selectPoints){l("selectedpoints")}V.supplyTransformDefaults(r,n,t)}return n};function v(e){var t=e.transforms;if(Array.isArray(t)&&t.length){for(var r=0;r<t.length;r++){var n=t[r];var a=n._module||x[n.type];if(a&&a.makesData)return true}}return false}V.hasMakesDataTransform=v;V.supplyTransformDefaults=function(e,t,r){if(!(t._length||v(e)))return;var n=r._globalTransforms||[];var a=r._transformModules||[];if(!Array.isArray(e.transforms)&&n.length===0)return;var i=e.transforms||[];var o=n.concat(i);var s=t.transforms=[];for(var l=0;l<o.length;l++){var c=o[l];var u=c.type;var f=x[u];var d;var h=!(c._module&&c._module===f);var p=f&&typeof f.transform==="function";if(!f)j.warn("Unrecognized transform type "+u+".");if(f&&f.supplyDefaults&&(h||p)){d=f.supplyDefaults(c,t,r,e);d.type=u;d._module=f;j.pushUnique(a,f)}else{d=j.extendFlat({},c)}s.push(d)}};function k(e,t,r,n){var a=e.transforms;var i=[e];for(var o=0;o<a.length;o++){var s=a[o];var l=x[s.type];if(l&&l.transform){i=l.transform(i,{transform:s,fullTrace:e,fullData:t,layout:r,fullLayout:n,transformIndex:o})}}return i}V.supplyLayoutGlobalDefaults=function(r,n,e){function t(e,t){return j.coerce(r,n,V.layoutAttributes,e,t)}var a=r.template;if(j.isPlainObject(a)){n.template=a;n._template=a.layout;n._dataTemplate=a.data}t("autotypenumbers");var i=j.coerceFont(t,"font");t("title.text",n._dfltTitle.plot);j.coerceFont(t,"title.font",{family:i.family,size:Math.round(i.size*1.4),color:i.color});t("title.xref");t("title.yref");t("title.x");t("title.y");t("title.xanchor");t("title.yanchor");t("title.pad.t");t("title.pad.r");t("title.pad.b");t("title.pad.l");var o=t("uniformtext.mode");if(o){t("uniformtext.minsize")}t("autosize",!(r.width&&r.height));t("width");t("height");t("margin.l");t("margin.r");t("margin.t");t("margin.b");t("margin.pad");t("margin.autoexpand");if(r.width&&r.height)V.sanitizeMargins(n);F.getComponentMethod("grid","sizeDefaults")(r,n);t("paper_bgcolor");t("separators",e.decimal+e.thousands);t("hidesources");t("colorway");t("datarevision");var s=t("uirevision");t("editrevision",s);t("selectionrevision",s);F.getComponentMethod("modebar","supplyLayoutDefaults")(r,n);F.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(r,n,t);t("meta");if(j.isPlainObject(r.transition)){t("transition.duration");t("transition.easing");t("transition.ordering")}F.getComponentMethod("calendars","handleDefaults")(r,n,"calendar");F.getComponentMethod("fx","supplyLayoutGlobalDefaults")(r,n,t)};function g(e){return typeof e==="string"&&e.substr(e.length-2)==="px"&&parseFloat(e)}V.plotAutoSize=function e(t,r,n){var a=t._context||{};var i=a.frameMargins;var o;var s;var l=j.isPlotDiv(t);if(l)t.emit("plotly_autosize");if(a.fillFrame){o=window.innerWidth;s=window.innerHeight;document.body.style.overflow="hidden"}else{var c=l?window.getComputedStyle(t):{};o=g(c.width)||g(c.maxWidth)||n.width;s=g(c.height)||g(c.maxHeight)||n.height;if(N(i)&&i>0){var u=1-2*i;o=Math.round(u*o);s=Math.round(u*s)}}var f=V.layoutAttributes.width.min;var d=V.layoutAttributes.height.min;if(o<f)o=f;if(s<d)s=d;var h=!r.width&&Math.abs(n.width-o)>1;var p=!r.height&&Math.abs(n.height-s)>1;if(p||h){if(h)n.width=o;if(p)n.height=s}if(!t._initialAutoSize){t._initialAutoSize={width:o,height:s}}V.sanitizeMargins(n)};V.supplyLayoutModuleDefaults=function(e,t,r,n){var a=F.componentsRegistry;var i=t._basePlotModules;var o,s,l;var c=F.subplotsRegistry.cartesian;for(o in a){l=a[o];if(l.includeBasePlot){l.includeBasePlot(e,t)}}if(!i.length){i.push(c)}if(t._has("cartesian")){F.getComponentMethod("grid","contentDefaults")(e,t);c.finalizeSubplots(e,t)}for(var u in t._subplots){t._subplots[u].sort(j.subplotSort)}for(s=0;s<i.length;s++){l=i[s];if(l.supplyLayoutDefaults){l.supplyLayoutDefaults(e,t,r)}}var f=t._modules;for(s=0;s<f.length;s++){l=f[s];if(l.supplyLayoutDefaults){l.supplyLayoutDefaults(e,t,r)}}var d=t._transformModules;for(s=0;s<d.length;s++){l=d[s];if(l.supplyLayoutDefaults){l.supplyLayoutDefaults(e,t,r,n)}}for(o in a){l=a[o];if(l.supplyLayoutDefaults){l.supplyLayoutDefaults(e,t,r)}}};V.purge=function(e){var t=e._fullLayout||{};if(t._glcontainer!==undefined){t._glcontainer.selectAll(".gl-canvas").remove();t._glcontainer.remove();t._glcanvas=null}if(t._modeBar)t._modeBar.destroy();if(e._transitionData){if(e._transitionData._interruptCallbacks){e._transitionData._interruptCallbacks.length=0}if(e._transitionData._animationRaf){window.cancelAnimationFrame(e._transitionData._animationRaf)}}j.clearThrottle();j.clearResponsive(e);delete e.data;delete e.layout;delete e._fullData;delete e._fullLayout;delete e.calcdata;delete e.empty;delete e.fid;delete e.undoqueue;delete e.undonum;delete e.autoplay;delete e.changed;delete e._promises;delete e._redrawTimer;delete e._hmlumcount;delete e._hmpixcount;delete e._transitionData;delete e._transitioning;delete e._initialAutoSize;delete e._transitioningWithDuration;delete e._dragging;delete e._dragged;delete e._dragdata;delete e._hoverdata;delete e._snapshotInProgress;delete e._editing;delete e._mouseDownTime;delete e._legendMouseDownTime;if(e.removeAllListeners)e.removeAllListeners()};V.style=function(e){var t=e._fullLayout._visibleModules;var r=[];var n;for(n=0;n<t.length;n++){var a=t[n];if(a.style){j.pushUnique(r,a.style)}}for(n=0;n<r.length;n++){r[n](e)}};V.sanitizeMargins=function(e){if(!e||!e.margin)return;var t=e.width;var r=e.height;var n=e.margin;var a=t-(n.l+n.r);var i=r-(n.t+n.b);var o;if(a<0){o=(t-1)/(n.l+n.r);n.l=Math.floor(o*n.l);n.r=Math.floor(o*n.r)}if(i<0){o=(r-1)/(n.t+n.b);n.t=Math.floor(o*n.t);n.b=Math.floor(o*n.b)}};V.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}};V.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};function $(e){var t=e.margin;if(!e._size){var r=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)};r.w=Math.round(e.width)-r.l-r.r;r.h=Math.round(e.height)-r.t-r.b}if(!e._pushmargin)e._pushmargin={};if(!e._pushmarginIds)e._pushmarginIds={}}var Q=2;var K=2;var ee=64;var te=64;V.autoMargin=function(e,t,r){var n=e._fullLayout;var a=n.width;var i=n.height;var o=n.margin;var s=j.constrain(a-o.l-o.r,Q,ee);var l=j.constrain(i-o.t-o.b,K,te);var c=Math.max(0,a-s);var u=Math.max(0,i-l);var f=n._pushmargin;var d=n._pushmarginIds;if(o.autoexpand!==false){if(!r){delete f[t];delete d[t]}else{var h=r.pad;if(h===undefined){h=Math.min(12,o.l,o.r,o.t,o.b)}if(c){var p=(r.l+r.r)/c;if(p>1){r.l/=p;r.r/=p}}if(u){var v=(r.t+r.b)/u;if(v>1){r.t/=v;r.b/=v}}var g=r.xl!==undefined?r.xl:r.x;var m=r.xr!==undefined?r.xr:r.x;var _=r.yt!==undefined?r.yt:r.y;var y=r.yb!==undefined?r.yb:r.y;f[t]={l:{val:g,size:r.l+h},r:{val:m,size:r.r+h},b:{val:y,size:r.b+h},t:{val:_,size:r.t+h}};d[t]=1}if(!n._replotting){return V.doAutoMargin(e)}}};V.doAutoMargin=function(e){var t=e._fullLayout;var r=t.width;var n=t.height;if(!t._size)t._size={};$(t);var a=t._size;var i=t.margin;var o=j.extendFlat({},a);var s=i.l;var l=i.r;var c=i.t;var u=i.b;var f=t._pushmargin;var d=t._pushmarginIds;if(t.margin.autoexpand!==false){for(var h in f){if(!d[h])delete f[h]}f.base={l:{val:0,size:s},r:{val:1,size:l},t:{val:1,size:c},b:{val:0,size:u}};for(var p in f){var v=f[p].l||{};var g=f[p].b||{};var m=v.val;var _=v.size;var y=g.val;var b=g.size;for(var x in f){if(N(_)&&f[x].r){var w=f[x].r.val;var A=f[x].r.size;if(w>m){var T=(_*w+(A-r)*m)/(w-m);var k=(A*(1-m)+(_-r)*(1-w))/(w-m);if(T+k>s+l){s=T;l=k}}}if(N(b)&&f[x].t){var M=f[x].t.val;var S=f[x].t.size;if(M>y){var C=(b*M+(S-n)*y)/(M-y);var L=(S*(1-y)+(b-n)*(1-M))/(M-y);if(C+L>u+c){u=C;c=L}}}}}}var E=j.constrain(r-i.l-i.r,Q,ee);var D=j.constrain(n-i.t-i.b,K,te);var O=Math.max(0,r-E);var P=Math.max(0,n-D);if(O){var I=(s+l)/O;if(I>1){s/=I;l/=I}}if(P){var R=(u+c)/P;if(R>1){u/=R;c/=R}}a.l=Math.round(s);a.r=Math.round(l);a.t=Math.round(c);a.b=Math.round(u);a.p=Math.round(i.pad);a.w=Math.round(r)-a.l-a.r;a.h=Math.round(n)-a.t-a.b;if(!t._replotting&&V.didMarginChange(o,a)){if("_redrawFromAutoMarginCount"in t){t._redrawFromAutoMarginCount++}else{t._redrawFromAutoMarginCount=1}var z=3*(1+Object.keys(d).length);if(t._redrawFromAutoMarginCount<z){return F.call("_doPlot",e)}else{t._size=o;j.warn("Too many auto-margin redraws.")}}re(e)};function re(e){var n=O.list(e,"",true);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(e){for(var t=0;t<n.length;t++){var r=n[t][e];if(r)r()}})}var u=["l","r","t","b","p","w","h"];V.didMarginChange=function(e,t){for(var r=0;r<u.length;r++){var n=u[r];var a=e[n];var i=t[n];if(!N(a)||Math.abs(i-a)>1){return true}}return false};V.graphJson=function(e,r,i,t,n,a){if(n&&r&&!e._fullData||n&&!r&&!e._fullLayout){V.supplyDefaults(e)}var o=n?e._fullData:e.data;var s=n?e._fullLayout:e.layout;var l=(e._transitionData||{})._frames;function c(t,r){if(typeof t==="function"){return r?"_function_":null}if(j.isPlainObject(t)){var n={};var a;Object.keys(t).sort().forEach(function(e){if(["_","["].indexOf(e.charAt(0))!==-1)return;if(typeof t[e]==="function"){if(r)n[e]="_function";return}if(i==="keepdata"){if(e.substr(e.length-3)==="src"){return}}else if(i==="keepstream"){a=t[e+"src"];if(typeof a==="string"&&a.indexOf(":")>0){if(!j.isPlainObject(t.stream)){return}}}else if(i!=="keepall"){a=t[e+"src"];if(typeof a==="string"&&a.indexOf(":")>0){return}}n[e]=c(t[e],r)});return n}if(Array.isArray(t)){return t.map(function(e){return c(e,r)})}if(j.isTypedArray(t)){return j.simpleMap(t,j.identity)}if(j.isJSDate(t))return j.ms2DateTimeLocal(+t);return t}var u={data:(o||[]).map(function(e){var t=c(e);if(r){delete t.fit}return t})};if(!r){u.layout=c(s);if(n){var f=s._size;u.layout.computed={margin:{b:f.b,l:f.l,r:f.r,t:f.t}}}}if(l)u.frames=c(l);if(a)u.config=c(e._context,true);return t==="object"?u:JSON.stringify(u)};V.modifyFrames=function(e,t){var r,n,a;var i=e._transitionData._frames;var o=e._transitionData._frameHash;for(r=0;r<t.length;r++){n=t[r];switch(n.type){case"replace":a=n.value;var s=(i[n.index]||{}).name;var l=a.name;i[n.index]=o[l]=a;if(l!==s){delete o[s];o[l]=a}break;case"insert":a=n.value;o[a.name]=a;i.splice(n.index,0,a);break;case"delete":a=i[n.index];delete o[a.name];i.splice(n.index,1);break}}return Promise.resolve()};V.computeFrame=function(e,t){var r=e._transitionData._frameHash;var n,a,i,o;if(!t){throw new Error("computeFrame must be given a string frame name")}var s=r[t.toString()];if(!s){return false}var l=[s];var c=[s.name];while(s.baseframe&&(s=r[s.baseframe.toString()])){if(c.indexOf(s.name)!==-1)break;l.push(s);c.push(s.name)}var u={};while(s=l.pop()){if(s.layout){u.layout=V.extendLayout(u.layout,s.layout)}if(s.data){if(!u.data){u.data=[]}a=s.traces;if(!a){a=[];for(n=0;n<s.data.length;n++){a[n]=n}}if(!u.traces){u.traces=[]}for(n=0;n<s.data.length;n++){i=a[n];if(i===undefined||i===null){continue}o=u.traces.indexOf(i);if(o===-1){o=u.data.length;u.traces[o]=i}u.data[o]=V.extendTrace(u.data[o],s.data[n])}}}return u};V.recomputeFrameHash=function(e){var t=e._transitionData._frameHash={};var r=e._transitionData._frames;for(var n=0;n<r.length;n++){var a=r[n];if(a&&a.name){t[a.name]=a}}};V.extendObjectWithContainers=function(e,t,r){var n,a,i,o,s,l,c,u;var f=j.extendDeepNoArrays({},t||{});var d=j.expandObjectPaths(f);var h={};if(r&&r.length){for(i=0;i<r.length;i++){n=j.nestedProperty(d,r[i]);a=n.get();if(a===undefined){j.nestedProperty(h,r[i]).set(null)}else{n.set(null);j.nestedProperty(h,r[i]).set(a)}}}e=j.extendDeepNoArrays(e||{},d);if(r&&r.length){for(i=0;i<r.length;i++){s=j.nestedProperty(h,r[i]);c=s.get();if(!c)continue;l=j.nestedProperty(e,r[i]);u=l.get();if(!Array.isArray(u)){u=[];l.set(u)}for(o=0;o<c.length;o++){var p=c[o];if(p===null)u[o]=null;else{u[o]=V.extendObjectWithContainers(u[o],p)}}l.set(u)}}return e};V.dataArrayContainers=["transforms","dimensions"];V.layoutArrayContainers=F.layoutArrayContainers;V.extendTrace=function(e,t){return V.extendObjectWithContainers(e,t,V.dataArrayContainers)};V.extendLayout=function(e,t){return V.extendObjectWithContainers(e,t,V.layoutArrayContainers)};V.transition=function(w,A,T,k,e,l){var t={redraw:e.redraw};var M={};var S=[];t.prepareFn=function(){var e=Array.isArray(A)?A.length:0;var t=k.slice(0,e);for(var r=0;r<t.length;r++){var n=t[r];var a=w._fullData[n];var i=a._module;if(!i)continue;if(i.animatable){var o=i.basePlotModule.name;if(!M[o])M[o]=[];M[o].push(n)}w.data[t[r]]=V.extendTrace(w.data[t[r]],A[r])}var s=j.expandObjectPaths(j.extendDeepNoArrays({},T));var l=/^[xy]axis[0-9]*$/;for(var c in s){if(!l.test(c))continue;delete s[c].range}V.extendLayout(w.layout,s);delete w.calcdata;V.supplyDefaults(w);V.doCalcdata(w);var u=j.expandObjectPaths(T);if(u){var f=w._fullLayout._plots;for(var d in f){var h=f[d];var p=h.xaxis;var v=h.yaxis;var g=p.range.slice();var m=v.range.slice();var _=null;var y=null;var b=null;var x=null;if(Array.isArray(u[p._name+".range"])){_=u[p._name+".range"].slice()}else if(Array.isArray((u[p._name]||{}).range)){_=u[p._name].range.slice()}if(Array.isArray(u[v._name+".range"])){y=u[v._name+".range"].slice()}else if(Array.isArray((u[v._name]||{}).range)){y=u[v._name].range.slice()}if(g&&_&&(p.r2l(g[0])!==p.r2l(_[0])||p.r2l(g[1])!==p.r2l(_[1]))){b={xr0:g,xr1:_}}if(m&&y&&(v.r2l(m[0])!==v.r2l(y[0])||v.r2l(m[1])!==v.r2l(y[1]))){x={yr0:m,yr1:y}}if(b||x){S.push(j.extendFlat({plotinfo:h},b,x))}}}return Promise.resolve()};t.runFn=function(e){var t;var r=w._fullLayout._basePlotModules;var n=S.length;var a;if(T){for(a=0;a<r.length;a++){if(r[a].transitionAxes){r[a].transitionAxes(w,S,l,e)}}}if(n){t=j.extendFlat({},l);t.duration=0;delete M.cartesian}else{t=l}for(var i in M){var o=M[i];var s=w._fullData[o[0]]._module;s.basePlotModule.plot(w,o,t,e)}};return C(w,l,t)};V.transitionFromReact=function(f,d,h,p){var v=f._fullLayout;var g=v.transition;var m={};var _=[];m.prepareFn=function(){var e=v._plots;m.redraw=false;if(d.anim==="some")m.redraw=true;if(h.anim==="some")m.redraw=true;for(var t in e){var r=e[t];var n=r.xaxis;var a=r.yaxis;var i=p[n._name].range.slice();var o=p[a._name].range.slice();var s=n.range.slice();var l=a.range.slice();n.setScale();a.setScale();var c=null;var u=null;if(n.r2l(i[0])!==n.r2l(s[0])||n.r2l(i[1])!==n.r2l(s[1])){c={xr0:i,xr1:s}}if(a.r2l(o[0])!==a.r2l(l[0])||a.r2l(o[1])!==a.r2l(l[1])){u={yr0:o,yr1:l}}if(c||u){_.push(j.extendFlat({plotinfo:r},c,u))}}return Promise.resolve()};m.runFn=function(t){var e=f._fullData;var r=f._fullLayout;var n=r._basePlotModules;var a;var i;var o;var s=[];for(var l=0;l<e.length;l++){s.push(l)}function c(){if(!f._fullLayout)return;for(var e=0;e<n.length;e++){if(n[e].transitionAxes){n[e].transitionAxes(f,_,a,t)}}}function u(){if(!f._fullLayout)return;for(var e=0;e<n.length;e++){n[e].plot(f,o,i,t)}}if(_.length&&d.anim){if(g.ordering==="traces first"){a=j.extendFlat({},g,{duration:0});o=s;i=g;setTimeout(c,g.duration);u()}else{a=g;o=null;i=j.extendFlat({},g,{duration:0});setTimeout(u,a.duration);c()}}else if(_.length){a=g;c()}else if(d.anim){o=s;i=g;u()}};return C(f,g,m)};function C(a,i,o){var s=false;function e(e){var t=Promise.resolve();if(!e)return t;while(e.length){t=t.then(e.shift())}return t}function t(e){if(!e)return;while(e.length){e.shift()}}function r(){a.emit("plotly_transitioning",[]);return new Promise(function(e){a._transitioning=true;if(i.duration>0){a._transitioningWithDuration=true}a._transitionData._interruptCallbacks.push(function(){s=true});if(o.redraw){a._transitionData._interruptCallbacks.push(function(){return F.call("redraw",a)})}a._transitionData._interruptCallbacks.push(function(){a.emit("plotly_transitioninterrupted",[])});var t=0;var r=0;function n(){t++;return function(){r++;if(!s&&r===t){l(e)}}}o.runFn(n);setTimeout(n())})}function l(e){if(!a._transitionData)return;t(a._transitionData._interruptCallbacks);return Promise.resolve().then(function(){if(o.redraw){return F.call("redraw",a)}}).then(function(){a._transitioning=false;a._transitioningWithDuration=false;a.emit("plotly_transitioned",[])}).then(e)}function n(){if(!a._transitionData)return;a._transitioning=false;return e(a._transitionData._interruptCallbacks)}var c=[V.previousPromises,n,o.prepareFn,V.rehover,r];var u=j.syncOrAsync(c,a);if(!u||!u.then){u=Promise.resolve()}return u.then(function(){return a})}V.doCalcdata=function(a,e){var t=O.list(a);var i=a._fullData;var r=a._fullLayout;var o,s,n,l;var c=new Array(i.length);var u=(a.calcdata||[]).slice();a.calcdata=c;r._numBoxes=0;r._numViolins=0;r._violinScaleGroupStats={};a._hmpixcount=0;a._hmlumcount=0;r._piecolormap={};r._sunburstcolormap={};r._treemapcolormap={};r._iciclecolormap={};r._funnelareacolormap={};for(n=0;n<i.length;n++){if(Array.isArray(e)&&e.indexOf(n)===-1){c[n]=u[n];continue}}for(n=0;n<i.length;n++){o=i[n];o._arrayAttrs=_.findArrayAttributes(o);o._extremes={}}var f=r._subplots.polar||[];for(n=0;n<f.length;n++){t.push(r[f[n]].radialaxis,r[f[n]].angularaxis)}for(var d in r._colorAxes){var h=r[d];if(h.cauto!==false){delete h.cmin;delete h.cmax}}var p=false;function v(e){o=i[e];s=o._module;if(o.visible===true&&o.transforms){if(s&&s.calc){var t=s.calc(a,o);if(t[0]&&t[0].t&&t[0].t._scene){delete t[0].t._scene.dirty}}for(l=0;l<o.transforms.length;l++){var r=o.transforms[l];s=x[r.type];if(s&&s.calcTransform){o._hasCalcTransform=true;p=true;s.calcTransform(a,o,r)}}}}function g(e,t){o=i[e];s=o._module;if(!!s.isContainer!==t)return;var r=[];if(o.visible===true&&o._length!==0){delete o._indexToPoints;var n=o.transforms||[];for(l=n.length-1;l>=0;l--){if(n[l].enabled){o._indexToPoints=n[l]._indexToPoints;break}}if(s&&s.calc){r=s.calc(a,o)}}if(!Array.isArray(r)||!r[0]){r=[{x:b,y:b}]}if(!r[0].t)r[0].t={};r[0].trace=o;c[e]=r}M(t,i,r);for(n=0;n<i.length;n++)g(n,true);for(n=0;n<i.length;n++)v(n);if(p)M(t,i,r);for(n=0;n<i.length;n++)g(n,true);for(n=0;n<i.length;n++)g(n,false);S(a);var m=w(t,a);if(m.length){r._numBoxes=0;r._numViolins=0;for(n=0;n<m.length;n++)g(m[n],true);for(n=0;n<m.length;n++)g(m[n],false);S(a)}F.getComponentMethod("fx","calc")(a);F.getComponentMethod("errorbars","calc")(a)};var P=/(total|sum|min|max|mean|median) (ascending|descending)/;function w(e,l){var t=[];var r,n,a,i,o;function s(e,t,r){var n=t._id.charAt(0);if(e==="histogram2dcontour"){var a=t._counterAxes[0];var i=O.getFromId(l,a);var o=n==="x"||a==="x"&&i.type==="category";var s=n==="y"||a==="y"&&i.type==="category";return function(e,t){if(e===0||t===0)return-1;if(o&&e===r[t].length-1)return-1;if(s&&t===r.length-1)return-1;return(n==="y"?t:e)-1}}else{return function(e,t){return n==="y"?t:e}}}var c={min:function(e){return j.aggNums(Math.min,null,e)},max:function(e){return j.aggNums(Math.max,null,e)},sum:function(e){return j.aggNums(function(e,t){return e+t},null,e)},total:function(e){return j.aggNums(function(e,t){return e+t},null,e)},mean:function(e){return j.mean(e)},median:function(e){return j.median(e)}};for(r=0;r<e.length;r++){var u=e[r];if(u.type!=="category")continue;var f=u.categoryorder.match(P);if(f){var d=f[1];var h=f[2];var p=u._id.charAt(0);var v=p==="x";var g=[];for(n=0;n<u._categories.length;n++){g.push([u._categories[n],[]])}for(n=0;n<u._traceIndices.length;n++){var m=u._traceIndices[n];var _=l._fullData[m];if(_.visible!==true)continue;var y=_.type;if(F.traceIs(_,"histogram")){delete _._xautoBinFinished;delete _._yautoBinFinished}var b=y==="splom";var x=y==="scattergl";var w=l.calcdata[m];for(a=0;a<w.length;a++){var A=w[a];var T,k;if(b){var M=_._axesDim[u._id];if(!v){var S=_._diag[M][0];if(S)u=l._fullLayout[O.id2name(S)]}var C=A.trace.dimensions[M].values;for(i=0;i<C.length;i++){T=u._categoriesMap[C[i]];for(o=0;o<A.trace.dimensions.length;o++){if(o===M)continue;var L=A.trace.dimensions[o];g[T][1].push(L.values[i])}}}else if(x){for(i=0;i<A.t.x.length;i++){if(v){T=A.t.x[i];k=A.t.y[i]}else{T=A.t.y[i];k=A.t.x[i]}g[T][1].push(k)}if(A.t&&A.t._scene){delete A.t._scene.dirty}}else if(A.hasOwnProperty("z")){k=A.z;var E=s(_.type,u,k);for(i=0;i<k.length;i++){for(o=0;o<k[i].length;o++){T=E(o,i);if(T+1)g[T][1].push(k[i][o])}}}else{T=A.p;if(T===undefined)T=A[p];k=A.s;if(k===undefined)k=A.v;if(k===undefined)k=v?A.y:A.x;if(!Array.isArray(k)){if(k===undefined)k=[];else k=[k]}for(i=0;i<k.length;i++){g[T][1].push(k[i])}}}}u._categoriesValue=g;var D=[];for(n=0;n<g.length;n++){D.push([g[n][0],c[d](g[n][1])])}D.sort(function(e,t){return e[1]-t[1]});u._categoriesAggregatedValue=D;u._initialCategories=D.map(function(e){return e[0]});if(h==="descending"){u._initialCategories.reverse()}t=t.concat(u.sortByInitialCategories())}}return t}function M(e,t,r){var n={};function a(e){e.clearCalc();if(e.type==="multicategory"){e.setupMultiCategory(t)}n[e._id]=1}j.simpleMap(e,a);var i=r._axisMatchGroups||[];for(var o=0;o<i.length;o++){for(var s in i[o]){if(!n[s]){a(r[O.id2name(s)])}}}}function S(e){var t=e._fullLayout;var r=t._visibleModules;var n={};var a,i,o;for(i=0;i<r.length;i++){var s=r[i];var l=s.crossTraceCalc;if(l){var c=s.basePlotModule.name;if(n[c]){j.pushUnique(n[c],l)}else{n[c]=[l]}}}for(o in n){var u=n[o];var f=t._subplots[o];if(Array.isArray(f)){for(a=0;a<f.length;a++){var d=f[a];var h=o==="cartesian"?t._plots[d]:t[d];for(i=0;i<u.length;i++){u[i](e,h,d)}}}else{for(i=0;i<u.length;i++){u[i](e)}}}}V.rehover=function(e){if(e._fullLayout._rehover){e._fullLayout._rehover()}};V.redrag=function(e){if(e._fullLayout._redrag){e._fullLayout._redrag()}};V.generalUpdatePerTraceModule=function(e,t,r,n){var a=t.traceHash;var i={};var o;for(o=0;o<r.length;o++){var s=r[o];var l=s[0].trace;if(l.visible){i[l.type]=i[l.type]||[];i[l.type].push(s)}}for(var c in a){if(!i[c]){var u=a[c][0];var f=u[0].trace;f.visible=false;i[c]=[u]}}for(var d in i){var h=i[d];var p=h[0][0].trace._module;p.plot(e,t,j.filterVisible(h),n)}t.traceHash=i};V.plotBasePlot=function(e,t,r,n,a){var i=F.getModule(e);var o=s(t.calcdata,i)[0];i.plot(t,o,n,a)};V.cleanBasePlot=function(e,t,r,n,a){var i=a._has&&a._has(e);var o=r._has&&r._has(e);if(i&&!o){a["_"+e+"layer"].selectAll("g.trace").remove()}}},{"../components/color":155,"../constants/numerical":265,"../lib":285,"../plot_api/plot_schema":319,"../plot_api/plot_template":320,"../plots/get_data":362,"../registry":373,"./animation_attributes":325,"./attributes":327,"./cartesian/axis_ids":335,"./cartesian/handle_outline":342,"./command":358,"./font_attributes":360,"./frame_attributes":361,"./layout_attributes":364,"@plotly/d3":20,"d3-time-format":29,"fast-isnumeric":31}],367:[function(e,t,r){"use strict";var _=e("../lib");var y=e("../plot_api/plot_template");var b=e("./domain").defaults;t.exports=function e(t,r,n,a){var i=a.type;var o=a.attributes;var s=a.handleDefaults;var l=a.partition||"x";var c=r._subplots[i];var u=c.length;var f=u&&c[0].replace(/\d+$/,"");var d,h;function p(e,t){return _.coerce(d,h,o,e,t)}for(var v=0;v<u;v++){var g=c[v];if(t[g])d=t[g];else d=t[g]={};h=y.newContainer(r,g,f);p("uirevision",r.uirevision);var m={};m[l]=[v/u,(v+1)/u];b(h,r,p,m);a.id=g;s(d,h,p,a)}}},{"../lib":285,"../plot_api/plot_template":320,"./domain":359}],368:[function(e,t,r){"use strict";var n=e("../constants/docs");var a=n.FORMAT_LINK;var i=n.DATE_FORMAT_LINK;function o(e){var t=e&&e.supportOther;return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(t?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),'Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',a,"for details on the formatting syntax.",'Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',i,"for details on the date formatting syntax."].join(" ")}function s(e){var t=e.description?" "+e.description:"";var r=e.keys||[];if(r.length>0){var n=[];for(var a=0;a<r.length;a++){n[a]="`"+r[a]+"`"}t=t+"Finally, the template string has access to ";if(r.length===1){t="variable "+n[0]}else{t="variables "+n.slice(0,-1).join(", ")+" and "+n.slice(-1)+"."}}return t}r.hovertemplateAttrs=function(e,t){e=e||{};t=t||{};var r=s(t);var n={valType:"string",dflt:"",editType:e.editType||"none"};if(e.arrayOk!==false){n.arrayOk=true}return n};r.texttemplateAttrs=function(e,t){e=e||{};t=t||{};var r=s(t);var n={valType:"string",dflt:"",editType:e.editType||"calc"};if(e.arrayOk!==false){n.arrayOk=true}return n}},{"../constants/docs":262}],369:[function(e,t,r){"use strict";var c=e("./ternary");var u=e("../../plots/get_data").getSubplotCalcData;var n=e("../../lib").counterRegex;var f="ternary";r.name=f;var a=r.attr="subplot";r.idRoot=f;r.idRegex=r.attrRegex=n(f);var i=r.attributes={};i[a]={valType:"subplotid",dflt:"ternary",editType:"calc"};r.layoutAttributes=e("./layout_attributes");r.supplyLayoutDefaults=e("./layout_defaults");r.plot=function e(t){var r=t._fullLayout;var n=t.calcdata;var a=r._subplots[f];for(var i=0;i<a.length;i++){var o=a[i];var s=u(n,f,o);var l=r[o]._subplot;if(!l){l=new c({id:o,graphDiv:t,container:r._ternarylayer.node()},r);r[o]._subplot=l}l.plot(s,r,t._promises)}};r.clean=function(e,t,r,n){var a=n._subplots[f]||[];for(var i=0;i<a.length;i++){var o=a[i];var s=n[o]._subplot;if(!t[o]&&!!s){s.plotContainer.remove();s.clipDef.remove();s.clipDefRelative.remove();s.layers["a-title"].remove();s.layers["b-title"].remove();s.layers["c-title"].remove()}}}},{"../../lib":285,"../../plots/get_data":362,"./layout_attributes":370,"./layout_defaults":371,"./ternary":372}],370:[function(e,t,r){"use strict";var n=e("../../components/color/attributes");var a=e("../domain").attributes;var i=e("../cartesian/layout_attributes");var o=e("../../plot_api/edit_types").overrideAll;var s=e("../../lib/extend").extendFlat;var l={title:{text:i.title.text,font:i.title.font},color:i.color,tickmode:i.tickmode,nticks:s({},i.nticks,{dflt:6,min:1}),tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:i.ticks,ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,showticklabels:i.showticklabels,showtickprefix:i.showtickprefix,tickprefix:i.tickprefix,showticksuffix:i.showticksuffix,ticksuffix:i.ticksuffix,showexponent:i.showexponent,exponentformat:i.exponentformat,minexponent:i.minexponent,separatethousands:i.separatethousands,tickfont:i.tickfont,tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,hoverformat:i.hoverformat,showline:s({},i.showline,{dflt:true}),linecolor:i.linecolor,linewidth:i.linewidth,showgrid:s({},i.showgrid,{dflt:true}),gridcolor:i.gridcolor,gridwidth:i.gridwidth,layer:i.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:i._deprecated.title,titlefont:i._deprecated.titlefont}};var c=t.exports=o({domain:a({name:"ternary"}),bgcolor:{valType:"color",dflt:n.background},sum:{valType:"number",dflt:1,min:0},aaxis:l,baxis:l,caxis:l},"plot","from-root");c.uirevision={valType:"any",editType:"none"};c.aaxis.uirevision=c.baxis.uirevision=c.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":154,"../../lib/extend":279,"../../plot_api/edit_types":313,"../cartesian/layout_attributes":346,"../domain":359}],371:[function(e,t,r){"use strict";var h=e("../../components/color");var p=e("../../plot_api/plot_template");var v=e("../../lib");var a=e("../subplot_defaults");var g=e("../cartesian/tick_label_defaults");var m=e("../cartesian/tick_mark_defaults");var _=e("../cartesian/tick_value_defaults");var y=e("../cartesian/line_grid_defaults");var b=e("./layout_attributes");var x=["aaxis","baxis","caxis"];t.exports=function e(t,r,n){a(t,r,n,{type:"ternary",attributes:b,handleDefaults:i,font:r.font,paper_bgcolor:r.paper_bgcolor})};function i(e,t,r,n){var a=r("bgcolor");var i=r("sum");n.bgColor=h.combine(a,n.paper_bgcolor);var o,s,l;for(var c=0;c<x.length;c++){o=x[c];s=e[o]||{};l=p.newContainer(t,o);l._name=o;w(s,l,n,t)}var u=t.aaxis;var f=t.baxis;var d=t.caxis;if(u.min+f.min+d.min>=i){u.min=0;f.min=0;d.min=0;if(e.aaxis)delete e.aaxis.min;if(e.baxis)delete e.baxis.min;if(e.caxis)delete e.caxis.min}}function w(r,n,e,t){var a=b[n._name];function i(e,t){return v.coerce(r,n,a,e,t)}i("uirevision",t.uirevision);n.type="linear";var o=i("color");var s=o!==a.color.dflt?o:e.font.color;var l=n._name;var c=l.charAt(0).toUpperCase();var u="Component "+c;var f=i("title.text",u);n._hovertitle=f===u?f:c;v.coerceFont(i,"title.font",{family:e.font.family,size:v.bigFont(e.font.size),color:s});i("min");_(r,n,i,"linear");g(r,n,i,"linear",{});m(r,n,i,{outerTicks:true});var d=i("showticklabels");if(d){v.coerceFont(i,"tickfont",{family:e.font.family,size:e.font.size,color:s});i("tickangle");i("tickformat")}y(r,n,i,{dfltColor:o,bgColor:e.bgColor,blend:60,showLine:true,showGrid:true,noZeroLine:true,attributes:a});i("hoverformat");i("layer")}},{"../../components/color":155,"../../lib":285,"../../plot_api/plot_template":320,"../cartesian/line_grid_defaults":348,"../cartesian/tick_label_defaults":353,"../cartesian/tick_mark_defaults":354,"../cartesian/tick_value_defaults":355,"../subplot_defaults":367,"./layout_attributes":370}],372:[function(e,t,r){"use strict";var o=e("@plotly/d3");var D=e("tinycolor2");var n=e("../../registry");var O=e("../../lib");var P=O.strTranslate;var I=O._;var R=e("../../components/color");var z=e("../../components/drawing");var E=e("../cartesian/set_convert");var N=e("../../lib/extend").extendFlat;var s=e("../plots");var x=e("../cartesian/axes");var F=e("../../components/dragelement");var j=e("../../components/fx");var a=e("../../components/dragelement/helpers");var B=a.freeMode;var H=a.rectMode;var u=e("../../components/titles");var U=e("../cartesian/select").prepSelect;var V=e("../cartesian/select").selectOnClick;var i=e("../cartesian/select").clearSelect;var l=e("../cartesian/select").clearSelectionsCache;var q=e("../cartesian/constants");function c(e,t){this.id=e.id;this.graphDiv=e.graphDiv;this.init(t);this.makeFramework(t);this.aTickLayout=null;this.bTickLayout=null;this.cTickLayout=null}t.exports=c;var f=c.prototype;f.init=function(e){this.container=e._ternarylayer;this.defs=e._defs;this.layoutId=e._uid;this.traceHash={};this.layers={}};f.plot=function(e,t){var r=this;var n=t[r.id];var a=t._size;r._hasClipOnAxisFalse=false;for(var i=0;i<e.length;i++){var o=e[i][0].trace;if(o.cliponaxis===false){r._hasClipOnAxisFalse=true;break}}r.updateLayers(n);r.adjustLayout(n,a);s.generalUpdatePerTraceModule(r.graphDiv,r,e,n);r.layers.plotbg.select("path").call(R.fill,n.bgcolor)};f.makeFramework=function(e){var t=this;var r=t.graphDiv;var n=e[t.id];var a=t.clipId="clip"+t.layoutId+t.id;var i=t.clipIdRelative="clip-relative"+t.layoutId+t.id;t.clipDef=O.ensureSingleById(e._clips,"clipPath",a,function(e){e.append("path").attr("d","M0,0Z")});t.clipDefRelative=O.ensureSingleById(e._clips,"clipPath",i,function(e){e.append("path").attr("d","M0,0Z")});t.plotContainer=O.ensureSingle(t.container,"g",t.id);t.updateLayers(n);z.setClipUrl(t.layers.backplot,a,r);z.setClipUrl(t.layers.grids,a,r)};f.updateLayers=function(e){var t=this;var r=t.layers;var n=["draglayer","plotbg","backplot","grids"];if(e.aaxis.layer==="below traces"){n.push("aaxis","aline")}if(e.baxis.layer==="below traces"){n.push("baxis","bline")}if(e.caxis.layer==="below traces"){n.push("caxis","cline")}n.push("frontplot");if(e.aaxis.layer==="above traces"){n.push("aaxis","aline")}if(e.baxis.layer==="above traces"){n.push("baxis","bline")}if(e.caxis.layer==="above traces"){n.push("caxis","cline")}var a=t.plotContainer.selectAll("g.toplevel").data(n,String);var i=["agrid","bgrid","cgrid"];a.enter().append("g").attr("class",function(e){return"toplevel "+e}).each(function(e){var t=o.select(this);r[e]=t;if(e==="frontplot"){t.append("g").classed("scatterlayer",true)}else if(e==="backplot"){t.append("g").classed("maplayer",true)}else if(e==="plotbg"){t.append("path").attr("d","M0,0Z")}else if(e==="aline"||e==="bline"||e==="cline"){t.append("path")}else if(e==="grids"){i.forEach(function(e){r[e]=t.append("g").classed("grid "+e,true)})}});a.order()};var Y=Math.sqrt(4/3);f.adjustLayout=function(e,t){var r=this;var n=e.domain;var a=(n.x[0]+n.x[1])/2;var i=(n.y[0]+n.y[1])/2;var o=n.x[1]-n.x[0];var s=n.y[1]-n.y[0];var l=o*t.w;var c=s*t.h;var u=e.sum;var f=e.aaxis.min;var d=e.baxis.min;var h=e.caxis.min;var p,v,g,m,_,y;if(l>Y*c){m=c;g=m*Y}else{g=l;m=g/Y}_=o*g/l;y=s*m/c;p=t.l+t.w*a-g/2;v=t.t+t.h*(1-i)-m/2;r.x0=p;r.y0=v;r.w=g;r.h=m;r.sum=u;r.xaxis={type:"linear",range:[f+2*h-u,u-f-2*d],domain:[a-_/2,a+_/2],_id:"x"};E(r.xaxis,r.graphDiv._fullLayout);r.xaxis.setScale();r.xaxis.isPtWithinRange=function(e){return e.a>=r.aaxis.range[0]&&e.a<=r.aaxis.range[1]&&e.b>=r.baxis.range[1]&&e.b<=r.baxis.range[0]&&e.c>=r.caxis.range[1]&&e.c<=r.caxis.range[0]};r.yaxis={type:"linear",range:[f,u-d-h],domain:[i-y/2,i+y/2],_id:"y"};E(r.yaxis,r.graphDiv._fullLayout);r.yaxis.setScale();r.yaxis.isPtWithinRange=function(){return true};var b=r.yaxis.domain[0];var x=r.aaxis=N({},e.aaxis,{range:[f,u-d-h],side:"left",tickangle:(+e.aaxis.tickangle||0)-30,domain:[b,b+y*Y],anchor:"free",position:0,_id:"y",_length:g});E(x,r.graphDiv._fullLayout);x.setScale();var w=r.baxis=N({},e.baxis,{range:[u-f-h,d],side:"bottom",domain:r.xaxis.domain,anchor:"free",position:0,_id:"x",_length:g});E(w,r.graphDiv._fullLayout);w.setScale();var A=r.caxis=N({},e.caxis,{range:[u-f-d,h],side:"right",tickangle:(+e.caxis.tickangle||0)+30,domain:[b,b+y*Y],anchor:"free",position:0,_id:"y",_length:g});E(A,r.graphDiv._fullLayout);A.setScale();var T="M"+p+","+(v+m)+"h"+g+"l-"+g/2+",-"+m+"Z";r.clipDef.select("path").attr("d",T);r.layers.plotbg.select("path").attr("d",T);var k="M0,"+m+"h"+g+"l-"+g/2+",-"+m+"Z";r.clipDefRelative.select("path").attr("d",k);var M=P(p,v);r.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",M);r.clipDefRelative.select("path").attr("transform",null);var S=P(p-w._offset,v+m);r.layers.baxis.attr("transform",S);r.layers.bgrid.attr("transform",S);var C=P(p+g/2,v)+"rotate(30)"+P(0,-x._offset);r.layers.aaxis.attr("transform",C);r.layers.agrid.attr("transform",C);var L=P(p+g/2,v)+"rotate(-30)"+P(0,-A._offset);r.layers.caxis.attr("transform",L);r.layers.cgrid.attr("transform",L);r.drawAxes(true);r.layers.aline.select("path").attr("d",x.showline?"M"+p+","+(v+m)+"l"+g/2+",-"+m:"M0,0").call(R.stroke,x.linecolor||"#000").style("stroke-width",(x.linewidth||0)+"px");r.layers.bline.select("path").attr("d",w.showline?"M"+p+","+(v+m)+"h"+g:"M0,0").call(R.stroke,w.linecolor||"#000").style("stroke-width",(w.linewidth||0)+"px");r.layers.cline.select("path").attr("d",A.showline?"M"+(p+g/2)+","+v+"l"+g/2+","+m:"M0,0").call(R.stroke,A.linecolor||"#000").style("stroke-width",(A.linewidth||0)+"px");if(!r.graphDiv._context.staticPlot){r.initInteractions()}z.setClipUrl(r.layers.frontplot,r._hasClipOnAxisFalse?null:r.clipId,r.graphDiv)};f.drawAxes=function(e){var t=this;var r=t.graphDiv;var n=t.id.substr(7)+"title";var a=t.layers;var i=t.aaxis;var o=t.baxis;var s=t.caxis;t.drawAx(i);t.drawAx(o);t.drawAx(s);if(e){var l=Math.max(i.showticklabels?i.tickfont.size/2:0,(s.showticklabels?s.tickfont.size*.75:0)+(s.ticks==="outside"?s.ticklen*.87:0));var c=(o.showticklabels?o.tickfont.size:0)+(o.ticks==="outside"?o.ticklen:0)+3;a["a-title"]=u.draw(r,"a"+n,{propContainer:i,propName:t.id+".aaxis.title",placeholder:I(r,"Click to enter Component A title"),attributes:{x:t.x0+t.w/2,y:t.y0-i.title.font.size/3-l,"text-anchor":"middle"}});a["b-title"]=u.draw(r,"b"+n,{propContainer:o,propName:t.id+".baxis.title",placeholder:I(r,"Click to enter Component B title"),attributes:{x:t.x0-c,y:t.y0+t.h+o.title.font.size*.83+c,"text-anchor":"middle"}});a["c-title"]=u.draw(r,"c"+n,{propContainer:s,propName:t.id+".caxis.title",placeholder:I(r,"Click to enter Component C title"),attributes:{x:t.x0+t.w+c,y:t.y0+t.h+s.title.font.size*.83+c,"text-anchor":"middle"}})}};f.drawAx=function(e){var t=this;var r=t.graphDiv;var n=e._name;var a=n.charAt(0);var i=e._id;var o=t.layers[n];var s=30;var l=a+"tickLayout";var c=w(e);if(t[l]!==c){o.selectAll("."+i+"tick").remove();t[l]=c}e.setScale();var u=x.calcTicks(e);var f=x.clipEnds(e,u);var d=x.makeTransTickFn(e);var h=x.getTickSigns(e)[2];var p=O.deg2rad(s);var v=h*(e.linewidth||1)/2;var g=h*e.ticklen;var m=t.w;var _=t.h;var y=a==="b"?"M0,"+v+"l"+Math.sin(p)*g+","+Math.cos(p)*g:"M"+v+",0l"+Math.cos(p)*g+","+-Math.sin(p)*g;var b={a:"M0,0l"+_+",-"+m/2,b:"M0,0l-"+m/2+",-"+_,c:"M0,0l-"+_+","+m/2}[a];x.drawTicks(r,e,{vals:e.ticks==="inside"?f:u,layer:o,path:y,transFn:d,crisp:false});x.drawGrid(r,e,{vals:f,layer:t.layers[a+"grid"],path:b,transFn:d,crisp:false});x.drawLabels(r,e,{vals:u,layer:o,transFn:d,labelFns:x.makeLabelFns(e,0,s)})};function w(e){return e.ticks+String(e.ticklen)+String(e.showticklabels)}var d=q.MINZOOM/2+.87;var G="m-0.87,.5h"+d+"v3h-"+(d+5.2)+"l"+(d/2+2.6)+",-"+(d*.87+4.5)+"l2.6,1.5l-"+d/2+","+d*.87+"Z";var W="m0.87,.5h-"+d+"v3h"+(d+5.2)+"l-"+(d/2+2.6)+",-"+(d*.87+4.5)+"l-2.6,1.5l"+d/2+","+d*.87+"Z";var X="m0,1l"+d/2+","+d*.87+"l2.6,-1.5l-"+(d/2+2.6)+",-"+(d*.87+4.5)+"l-"+(d/2+2.6)+","+(d*.87+4.5)+"l2.6,1.5l"+d/2+",-"+d*.87+"Z";var Z="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z";var J=true;f.clearSelect=function(){l(this.dragOptions);i(this.dragOptions.gd)};f.initInteractions=function(){var h=this;var o=h.layers.plotbg.select("path").node();var p=h.graphDiv;var s=p._fullLayout._zoomlayer;var v;var g;this.dragOptions={element:o,gd:p,plotinfo:{id:h.id,domain:p._fullLayout[h.id].domain,xaxis:h.xaxis,yaxis:h.yaxis},subplot:h.id,prepFn:function(e,t,r){h.dragOptions.xaxes=[h.xaxis];h.dragOptions.yaxes=[h.yaxis];v=p._fullLayout._invScaleX;g=p._fullLayout._invScaleY;var n=h.dragOptions.dragmode=p._fullLayout.dragmode;if(B(n))h.dragOptions.minDrag=1;else h.dragOptions.minDrag=undefined;if(n==="zoom"){h.dragOptions.moveFn=l;h.dragOptions.clickFn=a;h.dragOptions.doneFn=c;i(e,t,r)}else if(n==="pan"){h.dragOptions.moveFn=f;h.dragOptions.clickFn=a;h.dragOptions.doneFn=d;u();h.clearSelect(p)}else if(H(n)||B(n)){U(e,t,r,h.dragOptions,n)}}};var m,_,y,b,x,w,A,T,k,M;function S(e){var t={};t[h.id+".aaxis.min"]=e.a;t[h.id+".baxis.min"]=e.b;t[h.id+".caxis.min"]=e.c;return t}function a(e,t){var r=p._fullLayout.clickmode;$(p);if(e===2){p.emit("plotly_doubleclick",null);n.call("_guiRelayout",p,S({a:0,b:0,c:0}))}if(r.indexOf("select")>-1&&e===1){V(t,p,[h.xaxis],[h.yaxis],h.id,h.dragOptions)}if(r.indexOf("event")>-1){j.click(p,t,h.id)}}function i(e,t,r){var n=o.getBoundingClientRect();m=t-n.left;_=r-n.top;p._fullLayout._calcInverseTransform(p);var a=p._fullLayout._invTransform;var i=O.apply3DTransform(a)(m,_);m=i[0];_=i[1];y={a:h.aaxis.range[0],b:h.baxis.range[1],c:h.caxis.range[1]};x=y;b=h.aaxis.range[1]-y.a;w=D(h.graphDiv._fullLayout[h.id].bgcolor).getLuminance();A="M0,"+h.h+"L"+h.w/2+", 0L"+h.w+","+h.h+"Z";T=false;k=s.append("path").attr("class","zoombox").attr("transform",P(h.x0,h.y0)).style({fill:w>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",A);M=s.append("path").attr("class","zoombox-corners").attr("transform",P(h.x0,h.y0)).style({fill:R.background,stroke:R.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z");h.clearSelect(p)}function C(e,t){return 1-t/h.h}function L(e,t){return 1-(e+(h.h-t)/Math.sqrt(3))/h.w}function E(e,t){return(e-(h.h-t)/Math.sqrt(3))/h.w}function l(e,t){var r=m+e*v;var n=_+t*g;var a=Math.max(0,Math.min(1,C(m,_),C(r,n)));var i=Math.max(0,Math.min(1,L(m,_),L(r,n)));var o=Math.max(0,Math.min(1,E(m,_),E(r,n)));var s=(a/2+o)*h.w;var l=(1-a/2-i)*h.w;var c=(s+l)/2;var u=l-s;var f=(1-a)*h.h;var d=f-u/Y;if(u<q.MINZOOM){x=y;k.attr("d",A);M.attr("d","M0,0Z")}else{x={a:y.a+a*b,b:y.b+i*b,c:y.c+o*b};k.attr("d",A+"M"+s+","+f+"H"+l+"L"+c+","+d+"L"+s+","+f+"Z");M.attr("d","M"+m+","+_+Z+"M"+s+","+f+G+"M"+l+","+f+W+"M"+c+","+d+X)}if(!T){k.transition().style("fill",w>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200);M.transition().style("opacity",1).duration(200);T=true}p.emit("plotly_relayouting",S(x))}function c(){$(p);if(x===y)return;n.call("_guiRelayout",p,S(x));if(J&&p.data&&p._context.showTips){O.notifier(I(p,"Double-click to zoom back out"),"long");J=false}}function u(){y={a:h.aaxis.range[0],b:h.baxis.range[1],c:h.caxis.range[1]};x=y}function f(e,t){var r=e/h.xaxis._m;var n=t/h.yaxis._m;x={a:y.a-n,b:y.b+(r+n)/2,c:y.c-(r-n)/2};var a=[x.a,x.b,x.c].sort(O.sorterAsc);var i={a:a.indexOf(x.a),b:a.indexOf(x.b),c:a.indexOf(x.c)};if(a[0]<0){if(a[1]+a[0]/2<0){a[2]+=a[0]+a[1];a[0]=a[1]=0}else{a[2]+=a[0]/2;a[1]+=a[0]/2;a[0]=0}x={a:a[i.a],b:a[i.b],c:a[i.c]};t=(y.a-x.a)*h.yaxis._m;e=(y.c-x.c-y.b+x.b)*h.xaxis._m}var o=P(h.x0+e,h.y0+t);h.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",o);var s=P(-e,-t);h.clipDefRelative.select("path").attr("transform",s);h.aaxis.range=[x.a,h.sum-x.b-x.c];h.baxis.range=[h.sum-x.a-x.c,x.b];h.caxis.range=[h.sum-x.a-x.b,x.c];h.drawAxes(false);if(h._hasClipOnAxisFalse){h.plotContainer.select(".scatterlayer").selectAll(".trace").call(z.hideOutsideRangePoints,h)}p.emit("plotly_relayouting",S(x))}function d(){n.call("_guiRelayout",p,S(x))}o.onmousemove=function(e){j.hover(p,e,h.id);p._fullLayout._lasthover=o;p._fullLayout._hoversubplot=h.id};o.onmouseout=function(e){if(p._dragging)return;F.unhover(p,e)};F.init(this.dragOptions)};function $(e){o.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},{"../../components/color":155,"../../components/dragelement":174,"../../components/dragelement/helpers":173,"../../components/drawing":177,"../../components/fx":195,"../../components/titles":253,"../../lib":285,"../../lib/extend":279,"../../registry":373,"../cartesian/axes":331,"../cartesian/constants":338,"../cartesian/select":351,"../cartesian/set_convert":352,"../plots":366,"@plotly/d3":20,tinycolor2:119}],373:[function(e,t,f){"use strict";var d=e("./lib/loggers");var n=e("./lib/noop");var i=e("./lib/push_unique");var o=e("./lib/is_plain_object");var h=e("./lib/dom").addStyleRule;var r=e("./lib/extend");var a=e("./plots/attributes");var s=e("./plots/layout_attributes");var p=r.extendFlat;var l=r.extendDeepAll;f.modules={};f.allCategories={};f.allTypes=[];f.subplotsRegistry={};f.transformsRegistry={};f.componentsRegistry={};f.layoutArrayContainers=[];f.layoutArrayRegexes=[];f.traceLayoutAttributes={};f.localeRegistry={};f.apiMethodRegistry={};f.collectableSubplotTypes=null;f.register=function e(t){f.collectableSubplotTypes=null;if(!t){throw new Error("No argument passed to Plotly.register.")}else if(t&&!Array.isArray(t)){t=[t]}for(var r=0;r<t.length;r++){var n=t[r];if(!n){throw new Error("Invalid module was attempted to be registered!")}switch(n.moduleType){case"trace":c(n);break;case"transform":g(n);break;case"component":u(n);break;case"locale":m(n);break;case"apiMethod":var a=n.name;f.apiMethodRegistry[a]=n.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}};f.getModule=function(e){var t=f.modules[w(e)];if(!t)return false;return t._module};f.traceIs=function(e,t){e=w(e);if(e==="various")return false;var r=f.modules[e];if(!r){if(e){d.log("Unrecognized trace type "+e+".")}r=f.modules[a.type.dflt]}return!!r.categories[t]};f.getTransformIndices=function(e,t){var r=[];var n=e.transforms||[];for(var a=0;a<n.length;a++){if(n[a].type===t){r.push(a)}}return r};f.hasTransform=function(e,t){var r=e.transforms||[];for(var n=0;n<r.length;n++){if(r[n].type===t){return true}}return false};f.getComponentMethod=function(e,t){var r=f.componentsRegistry[e];if(!r)return n;return r[t]||n};f.call=function(){var e=arguments[0];var t=[].slice.call(arguments,1);return f.apiMethodRegistry[e].apply(null,t)};function c(e){var t=e.name;var r=e.categories;var n=e.meta;if(f.modules[t]){d.log("Type "+t+" already registered");return}if(!f.subplotsRegistry[e.basePlotModule.name]){v(e.basePlotModule)}var a={};for(var i=0;i<r.length;i++){a[r[i]]=true;f.allCategories[r[i]]=true}f.modules[t]={_module:e,categories:a};if(n&&Object.keys(n).length){f.modules[t].meta=n}f.allTypes.push(t);for(var o in f.componentsRegistry){y(o,t)}if(e.layoutAttributes){p(f.traceLayoutAttributes,e.layoutAttributes)}var s=e.basePlotModule;var l=s.name;if(l==="mapbox"){var c=s.constants.styleRules;for(var u in c){h(".js-plotly-plot .plotly .mapboxgl-"+u,c[u])}}if((l==="geo"||l==="mapbox")&&(typeof window!==undefined&&window.PlotlyGeoAssets===undefined)){window.PlotlyGeoAssets={topojson:{}}}}function v(e){var t=e.name;if(f.subplotsRegistry[t]){d.log("Plot type "+t+" already registered.");return}_(e);f.subplotsRegistry[t]=e;for(var r in f.componentsRegistry){x(r,e.name)}}function u(e){if(typeof e.name!=="string"){throw new Error("Component module *name* must be a string.")}var t=e.name;f.componentsRegistry[t]=e;if(e.layoutAttributes){if(e.layoutAttributes._isLinkedToArray){i(f.layoutArrayContainers,t)}_(e)}for(var r in f.modules){y(t,r)}for(var n in f.subplotsRegistry){x(t,n)}for(var a in f.transformsRegistry){b(t,a)}if(e.schema&&e.schema.layout){l(s,e.schema.layout)}}function g(e){if(typeof e.name!=="string"){throw new Error("Transform module *name* must be a string.")}var t="Transform module "+e.name;var r=typeof e.transform==="function";var n=typeof e.calcTransform==="function";if(!r&&!n){throw new Error(t+" is missing a *transform* or *calcTransform* method.")}if(r&&n){d.log([t+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" "))}if(!o(e.attributes)){d.log(t+" registered without an *attributes* object.")}if(typeof e.supplyDefaults!=="function"){d.log(t+" registered without a *supplyDefaults* method.")}f.transformsRegistry[e.name]=e;for(var a in f.componentsRegistry){b(a,e.name)}}function m(e){var t=e.name;var r=t.split("-")[0];var n=e.dictionary;var a=e.format;var i=n&&Object.keys(n).length;var o=a&&Object.keys(a).length;var s=f.localeRegistry;var l=s[t];if(!l)s[t]=l={};if(r!==t){var c=s[r];if(!c)s[r]=c={};if(i&&c.dictionary===l.dictionary){c.dictionary=n}if(o&&c.format===l.format){c.format=a}}if(i)l.dictionary=n;if(o)l.format=a}function _(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t){for(var r=0;r<t.length;r++){i(f.layoutArrayRegexes,t[r])}}}}function y(e,t){var r=f.componentsRegistry[e].schema;if(!r||!r.traces)return;var n=r.traces[t];if(n){l(f.modules[t]._module.attributes,n)}}function b(e,t){var r=f.componentsRegistry[e].schema;if(!r||!r.transforms)return;var n=r.transforms[t];if(n){l(f.transformsRegistry[t].attributes,n)}}function x(e,t){var r=f.componentsRegistry[e].schema;if(!r||!r.subplots)return;var n=f.subplotsRegistry[t];var a=n.layoutAttributes;var i=n.attr==="subplot"?n.name:n.attr;if(Array.isArray(i))i=i[0];var o=r.subplots[i];if(a&&o){l(a,o)}}function w(e){if(typeof e==="object")e=e.type;return e}},{"./lib/dom":277,"./lib/extend":279,"./lib/is_plain_object":286,"./lib/loggers":289,"./lib/noop":294,"./lib/push_unique":299,"./plots/attributes":327,"./plots/layout_attributes":364}],374:[function(e,t,r){"use strict";var g=e("../registry");var n=e("../lib");var m=n.extendFlat;var _=n.extendDeep;function y(e){var t;switch(e){case"themes__thumb":t={autosize:true,width:150,height:150,title:{text:""},showlegend:false,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:true,showlegend:false,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function b(e){var t=["xaxis","yaxis","zaxis"];return t.indexOf(e.slice(0,5))>-1}t.exports=function e(t,r){var n;var a=t.data;var i=t.layout;var o=_([],a);var s=_({},i,y(r.tileClass));var l=t._context||{};if(r.width)s.width=r.width;if(r.height)s.height=r.height;if(r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){s.annotations=[];var c=Object.keys(s);for(n=0;n<c.length;n++){if(b(c[n])){s[c[n]].title={text:""}}}for(n=0;n<o.length;n++){var u=o[n];u.showscale=false;if(u.marker)u.marker.showscale=false;if(g.traceIs(u,"pie-like"))u.textposition="none"}}if(Array.isArray(r.annotations)){for(n=0;n<r.annotations.length;n++){s.annotations.push(r.annotations[n])}}var f=Object.keys(s).filter(function(e){return e.match(/^scene\d*$/)});if(f.length){var d={};if(r.tileClass==="thumbnail"){d={title:{text:""},showaxeslabels:false,showticklabels:false,linetickenable:false}}for(n=0;n<f.length;n++){var h=s[f[n]];if(!h.xaxis){h.xaxis={}}if(!h.yaxis){h.yaxis={}}if(!h.zaxis){h.zaxis={}}m(h.xaxis,d);m(h.yaxis,d);m(h.zaxis,d);h._scene=null}}var p=document.createElement("div");if(r.tileClass)p.className=r.tileClass;var v={gd:p,td:p,layout:s,data:o,config:{staticPlot:r.staticPlot===undefined?true:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===undefined?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||false,showLink:r.showLink||false,showTips:r.showTips||false,mapboxAccessToken:l.mapboxAccessToken}};if(r.setBackground!=="transparent"){v.config.setBackground=r.setBackground||"opaque"}v.gd.defaultLayout=y(r.tileClass);return v}},{"../lib":285,"../registry":373}],375:[function(e,t,r){"use strict";var s=e("../lib");var l=e("../plot_api/to_image");var c=e("./filesaver");var u=e("./helpers");function n(a,i){var o;if(!s.isPlainObject(a))o=s.getGraphDiv(a);i=i||{};i.format=i.format||"png";i.width=i.width||null;i.height=i.height||null;i.imageDataOnly=true;return new Promise(function(t,r){if(o&&o._snapshotInProgress){r(new Error("Snapshotting already in progress."))}if(s.isIE()&&i.format!=="svg"){r(new Error(u.MSG_IE_BAD_FORMAT))}if(o)o._snapshotInProgress=true;var e=l(a,i);var n=i.filename||a.fn||"newplot";n+="."+i.format.replace("-",".");e.then(function(e){if(o)o._snapshotInProgress=false;return c(e,n,i.format)}).then(function(e){t(e)}).catch(function(e){if(o)o._snapshotInProgress=false;r(e)})})}t.exports=n},{"../lib":285,"../plot_api/to_image":323,"./filesaver":376,"./helpers":377}],376:[function(e,t,r){"use strict";var u=e("../lib");var f=e("./helpers");function n(i,o,s){var l=document.createElement("a");var c="download"in l;var e=new Promise(function(e,t){var r;var n;if(u.isSafari()){var a=s==="svg"?",":";base64,";f.octetStream(a+encodeURIComponent(i));return e(o)}if(u.isIE()){r=f.createBlob(i,"svg");window.navigator.msSaveBlob(r,o);r=null;return e(o)}if(c){r=f.createBlob(i,s);n=f.createObjectURL(r);l.href=n;l.download=o;document.body.appendChild(l);l.click();document.body.removeChild(l);f.revokeObjectURL(n);r=null;return e(o)}t(new Error("download error"))});return e}t.exports=n},{"../lib":285,"./helpers":377}],377:[function(e,t,r){"use strict";var n=e("../registry");r.getDelay=function(e){if(!e._has)return 0;return e._has("gl3d")||e._has("gl2d")||e._has("mapbox")?500:0};r.getRedrawFunc=function(e){return function(){n.getComponentMethod("colorbar","draw")(e)}};r.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)};r.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var a=window.URL||window.webkitURL;r.createObjectURL=function(e){return a.createObjectURL(e)};r.revokeObjectURL=function(e){return a.revokeObjectURL(e)};r.createBlob=function(e,t){if(t==="svg"){return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"})}else if(t==="full-json"){return new window.Blob([e],{type:"application/json;charset=utf-8"})}else{var r=i(window.atob(e));return new window.Blob([r],{type:"image/"+t})}};r.octetStream=function(e){document.location.href="data:application/octet-stream"+e};function i(e){var t=e.length;var r=new ArrayBuffer(t);var n=new Uint8Array(r);for(var a=0;a<t;a++){n[a]=e.charCodeAt(a)}return r}r.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;r.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":373}],378:[function(e,t,r){"use strict";var n=e("./helpers");var a={getDelay:n.getDelay,getRedrawFunc:n.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};t.exports=a},{"./cloneplot":374,"./download":375,"./helpers":377,"./svgtoimg":379,"./toimage":380,"./tosvg":381}],379:[function(e,t,r){"use strict";var y=e("../lib");var n=e("events").EventEmitter;var b=e("./helpers");function a(g){var m=g.emitter||new n;var _=new Promise(function(r,n){var e=window.Image;var t=g.svg;var a=g.format||"png";if(y.isIE()&&a!=="svg"){var i=new Error(b.MSG_IE_BAD_FORMAT);n(i);if(!g.promise){return m.emit("error",i)}else{return _}}var o=g.canvas;var s=g.scale||1;var l=g.width||300;var c=g.height||150;var u=s*l;var f=s*c;var d=o.getContext("2d");var h=new e;var p,v;if(a==="svg"||y.isSafari()){v=b.encodeSVG(t)}else{p=b.createBlob(t,"svg");v=b.createObjectURL(p)}o.width=u;o.height=f;h.onload=function(){var e;p=null;b.revokeObjectURL(v);if(a!=="svg"){d.drawImage(h,0,0,u,f)}switch(a){case"jpeg":e=o.toDataURL("image/jpeg");break;case"png":e=o.toDataURL("image/png");break;case"webp":e=o.toDataURL("image/webp");break;case"svg":e=v;break;default:var t="Image format is not jpeg, png, svg or webp.";n(new Error(t));if(!g.promise){return m.emit("error",t)}}r(e);if(!g.promise){m.emit("success",e)}};h.onerror=function(e){p=null;b.revokeObjectURL(v);n(e);if(!g.promise){return m.emit("error",e)}};h.src=v});if(g.promise){return _}return m}t.exports=a},{"../lib":285,"./helpers":377,events:27}],380:[function(e,t,r){"use strict";var s=e("events").EventEmitter;var l=e("../registry");var c=e("../lib");var u=e("./helpers");var f=e("./cloneplot");var d=e("./tosvg");var h=e("./svgtoimg");function n(e,r){var n=new s;var t=f(e,{format:"png"});var a=t.gd;a.style.position="absolute";a.style.left="-5000px";document.body.appendChild(a);function i(){var e=u.getDelay(a._fullLayout);setTimeout(function(){var e=d(a);var t=document.createElement("canvas");t.id=c.randstr();n=h({format:r.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:t,emitter:n,svg:e});n.clean=function(){if(a)document.body.removeChild(a)}},e)}var o=u.getRedrawFunc(a);l.call("_doPlot",a,t.data,t.layout,t.config).then(o).then(i).catch(function(e){n.emit("error",e)});return n}t.exports=n},{"../lib":285,"../registry":373,"./cloneplot":374,"./helpers":377,"./svgtoimg":379,"./tosvg":381,events:27}],381:[function(e,t,r){"use strict";var _=e("@plotly/d3");var y=e("../lib");var b=e("../components/drawing");var x=e("../components/color");var w=e("../constants/xmlns_namespaces");var A=/"/g;var T="TOBESTRIPPED";var k=new RegExp('("'+T+")|("+T+'")',"g");function M(e){var t=_.select("body").append("div").style({display:"none"}).html("");var r=e.replace(/(&[^;]*;)/gi,function(e){if(e==="&lt;"){return"&#60;"}if(e==="&rt;"){return"&#62;"}if(e.indexOf("<")!==-1||e.indexOf(">")!==-1){return""}return t.html(e).text()});t.remove();return r}function S(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}t.exports=function e(t,r,n){var a=t._fullLayout;var i=a._paper;var o=a._toppaper;var s=a.width;var l=a.height;var c,u;i.insert("rect",":first-child").call(b.setRect,0,0,s,l).call(x.fill,a.paper_bgcolor);var f=a._basePlotModules||[];for(c=0;c<f.length;c++){var d=f[c];if(d.toSVG)d.toSVG(t)}if(o){var h=o.node().childNodes;var p=Array.prototype.slice.call(h);for(c=0;c<p.length;c++){var v=p[c];if(v.childNodes.length)i.node().appendChild(v)}}if(a._draggers){a._draggers.remove()}i.node().style.background="";i.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var e=_.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){e.remove();return}else{e.style({visibility:null,display:null})}var t=this.style.fontFamily;if(t&&t.indexOf('"')!==-1){e.style("font-family",t.replace(A,T))}});var g=[];if(a._gradientUrlQueryParts){for(u in a._gradientUrlQueryParts)g.push(u)}if(a._patternUrlQueryParts){for(u in a._patternUrlQueryParts)g.push(u)}if(g.length){i.selectAll(g.join(",")).each(function(){var e=_.select(this);var t=this.style.fill;if(t&&t.indexOf("url(")!==-1){e.style("fill",t.replace(A,T))}var r=this.style.stroke;if(r&&r.indexOf("url(")!==-1){e.style("stroke",r.replace(A,T))}})}if(r==="pdf"||r==="eps"){i.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0)}i.node().setAttributeNS(w.xmlns,"xmlns",w.svg);i.node().setAttributeNS(w.xmlns,"xmlns:xlink",w.xlink);if(r==="svg"&&n){i.attr("width",n*s);i.attr("height",n*l);i.attr("viewBox","0 0 "+s+" "+l)}var m=(new window.XMLSerializer).serializeToString(i.node());m=M(m);m=S(m);m=m.replace(k,"'");if(y.isIE()){m=m.replace(/"/gi,"'");m=m.replace(/(\('#)([^']*)('\))/gi,'("#$2")');m=m.replace(/(\\')/gi,'"')}return m}},{"../components/color":155,"../components/drawing":177,"../constants/xmlns_namespaces":266,"../lib":285,"@plotly/d3":20}],382:[function(e,t,r){"use strict";var o=e("../../lib");t.exports=function e(t,r){for(var n=0;n<t.length;n++)t[n].i=n;o.mergeArray(r.text,t,"tx");o.mergeArray(r.hovertext,t,"htx");var a=r.marker;if(a){o.mergeArray(a.opacity,t,"mo",true);o.mergeArray(a.color,t,"mc");var i=a.line;if(i){o.mergeArray(i.color,t,"mlc");o.mergeArrayCastPositive(i.width,t,"mlw")}}}},{"../../lib":285}],383:[function(e,t,r){"use strict";var n=e("../scatter/attributes");var a=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var i=e("../../plots/template_attributes").hovertemplateAttrs;var o=e("../../plots/template_attributes").texttemplateAttrs;var s=e("../../components/colorscale/attributes");var l=e("../../plots/font_attributes");var c=e("./constants");var u=e("../../components/drawing/attributes").pattern;var f=e("../../lib/extend").extendFlat;var d=l({editType:"calc",arrayOk:true,colorEditType:"style"});var h=n.marker;var p=h.line;var v=f({},p.width,{dflt:0});var g=f({width:v,editType:"calc"},s("marker.line"));var m=f({line:g,editType:"calc"},s("marker"),{opacity:{valType:"number",arrayOk:true,dflt:1,min:0,max:1,editType:"style"},pattern:u});t.exports={x:n.x,x0:n.x0,dx:n.dx,y:n.y,y0:n.y0,dy:n.dy,xperiod:n.xperiod,yperiod:n.yperiod,xperiod0:n.xperiod0,yperiod0:n.yperiod0,xperiodalignment:n.xperiodalignment,yperiodalignment:n.yperiodalignment,xhoverformat:a("x"),yhoverformat:a("y"),text:n.text,texttemplate:o({editType:"plot"},{keys:c.eventDataKeys}),hovertext:n.hovertext,hovertemplate:i({},{keys:c.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:true,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:f({},d,{}),insidetextfont:f({},d,{}),outsidetextfont:f({},d,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:f({},n.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:true,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:true,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:true,editType:"calc"},marker:m,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:n.selected.marker.opacity,color:n.selected.marker.color,editType:"style"},textfont:n.selected.textfont,editType:"style"},unselected:{marker:{opacity:n.unselected.marker.opacity,color:n.unselected.marker.color,editType:"style"},textfont:n.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":162,"../../components/drawing/attributes":176,"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../../plots/font_attributes":360,"../../plots/template_attributes":368,"../scatter/attributes":494,"./constants":385}],384:[function(e,t,r){"use strict";var h=e("../../plots/cartesian/axes");var p=e("../../plots/cartesian/align_period");var v=e("../../components/colorscale/helpers").hasColorscale;var g=e("../../components/colorscale/calc");var m=e("./arrays_to_calcdata");var _=e("../scatter/calc_selection");t.exports=function e(t,r){var n=h.getFromId(t,r.xaxis||"x");var a=h.getFromId(t,r.yaxis||"y");var i,o,s;var l={msUTC:!!(r.base||r.base===0)};var c;if(r.orientation==="h"){i=n.makeCalcdata(r,"x",l);s=a.makeCalcdata(r,"y");o=p(r,a,"y",s);c=!!r.yperiodalignment}else{i=a.makeCalcdata(r,"y",l);s=n.makeCalcdata(r,"x");o=p(r,n,"x",s);c=!!r.xperiodalignment}var u=Math.min(o.length,i.length);var f=new Array(u);for(var d=0;d<u;d++){f[d]={p:o[d],s:i[d]};if(c){f[d].orig_p=s[d]}if(r.ids){f[d].id=String(r.ids[d])}}if(v(r,"marker")){g(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"})}if(v(r,"marker.line")){g(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"})}m(f,r);_(f,r);return f}},{"../../components/colorscale/calc":163,"../../components/colorscale/helpers":166,"../../plots/cartesian/align_period":328,"../../plots/cartesian/axes":331,"../scatter/calc_selection":496,"./arrays_to_calcdata":382}],385:[function(e,t,r){"use strict";t.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],386:[function(e,t,r){"use strict";var x=e("fast-isnumeric");var p=e("../../lib").isArrayOrTypedArray;var w=e("../../constants/numerical").BADNUM;var v=e("../../registry");var A=e("../../plots/cartesian/axes");var T=e("../../plots/cartesian/constraints").getAxisGroup;var f=e("./sieve.js");function n(e,t){var r=t.xaxis;var n=t.yaxis;var a=e._fullLayout;var i=e._fullData;var o=e.calcdata;var s=[];var l=[];for(var c=0;c<i.length;c++){var u=i[c];if(u.visible===true&&v.traceIs(u,"bar")&&u.xaxis===r._id&&u.yaxis===n._id){if(u.orientation==="h"){s.push(o[c])}else{l.push(o[c])}if(u._computePh){var f=e.calcdata[c];for(var d=0;d<f.length;d++){if(typeof f[d].ph0==="function")f[d].ph0=f[d].ph0();if(typeof f[d].ph1==="function")f[d].ph1=f[d].ph1()}}}}var h={xCat:r.type==="category"||r.type==="multicategory",yCat:n.type==="category"||n.type==="multicategory",mode:a.barmode,norm:a.barnorm,gap:a.bargap,groupgap:a.bargroupgap};g(e,r,n,l,h);g(e,n,r,s,h)}function g(e,t,r,n,a){if(!n.length)return;var i;var o;var s,l,c;u(r,n);switch(a.mode){case"overlay":d(t,r,n,a);break;case"group":i=[];o=[];for(s=0;s<n.length;s++){l=n[s];c=l[0].trace;if(c.offset===undefined)o.push(l);else i.push(l)}if(o.length){h(e,t,r,o,a)}if(i.length){d(t,r,i,a)}break;case"stack":case"relative":i=[];o=[];for(s=0;s<n.length;s++){l=n[s];c=l[0].trace;if(c.base===undefined)o.push(l);else i.push(l)}if(o.length){m(e,t,r,o,a)}if(i.length){d(t,r,i,a)}break}C(n,t)}function u(e,t){var r,n;for(r=0;r<t.length;r++){var a=t[r];var i=a[0].trace;var o=i.type==="funnel"?i._base:i.base;var s;var l=i.orientation==="h"?i.xcalendar:i.ycalendar;var c=e.type==="category"||e.type==="multicategory"?function(){return null}:e.d2c;if(p(o)){for(n=0;n<Math.min(o.length,a.length);n++){s=c(o[n],0,l);if(x(s)){a[n].b=+s;a[n].hasB=1}else a[n].b=0}for(;n<a.length;n++){a[n].b=0}}else{s=c(o,0,l);var u=x(s);s=u?s:0;for(n=0;n<a.length;n++){a[n].b=s;if(u)a[n].hasB=1}}}}function d(e,t,r,n){for(var a=0;a<r.length;a++){var i=r[a];var o=new f([i],{posAxis:e,sepNegVal:false,overlapNoMerge:!n.norm});_(e,o,n);if(n.norm){l(o);b(t,o,n)}else{s(t,o)}}}function h(e,t,r,n,a){var i=new f(n,{posAxis:t,sepNegVal:false,overlapNoMerge:!a.norm});o(e,t,i,a);c(i,t);if(a.norm){l(i);b(r,i,a)}else{s(r,i)}}function m(e,t,r,n,a){var i=new f(n,{posAxis:t,sepNegVal:a.mode==="relative",overlapNoMerge:!(a.norm||a.mode==="stack"||a.mode==="relative")});_(t,i,a);y(r,i,a);for(var o=0;o<n.length;o++){var s=n[o];for(var l=0;l<s.length;l++){var c=s[l];if(c.s!==w){var u=c.b+c.s===i.get(c.p,c.s);if(u)c._outmost=true}}}if(a.norm)b(r,i,a)}function _(e,t,r){var n=t.minDiff;var a=t.traces;var i=n*(1-r.gap);var o=i;var s=o*(1-(r.groupgap||0));var l=-s/2;for(var c=0;c<a.length;c++){var u=a[c];var f=u[0].t;f.barwidth=s;f.poffset=l;f.bargroupwidth=i;f.bardelta=n}t.binWidth=a[0][0].t.barwidth/100;k(t);M(e,t);S(e,t)}function o(e,t,r,n){var a=e._fullLayout;var i=r.positions;var o=r.distinctPositions;var s=r.minDiff;var l=r.traces;var c=l.length;var u=i.length!==o.length;var f=s*(1-n.gap);var d=T(a,t._id)+l[0][0].trace.orientation;var h=a._alignmentOpts[d]||{};for(var p=0;p<c;p++){var v=l[p];var g=v[0].trace;var m=h[g.alignmentgroup]||{};var _=Object.keys(m.offsetGroups||{}).length;var y;if(_){y=f/_}else{y=u?f/c:f}var b=y*(1-(n.groupgap||0));var x;if(_){x=((2*g._offsetIndex+1-_)*y-b)/2}else{x=u?((2*p+1-c)*y-b)/2:-b/2}var w=v[0].t;w.barwidth=b;w.poffset=x;w.bargroupwidth=f;w.bardelta=s}r.binWidth=l[0][0].t.barwidth/100;k(r);M(t,r);S(t,r,u)}function k(e){var t=e.traces;var r,n;for(r=0;r<t.length;r++){var a=t[r];var i=a[0];var o=i.trace;var s=i.t;var l=o._offset||o.offset;var c=s.poffset;var u;if(p(l)){u=Array.prototype.slice.call(l,0,a.length);for(n=0;n<u.length;n++){if(!x(u[n])){u[n]=c}}for(n=u.length;n<a.length;n++){u.push(c)}s.poffset=u}else if(l!==undefined){s.poffset=l}var f=o._width||o.width;var d=s.barwidth;if(p(f)){var h=Array.prototype.slice.call(f,0,a.length);for(n=0;n<h.length;n++){if(!x(h[n]))h[n]=d}for(n=h.length;n<a.length;n++){h.push(d)}s.barwidth=h;if(l===undefined){u=[];for(n=0;n<a.length;n++){u.push(c+(d-h[n])/2)}s.poffset=u}}else if(f!==undefined){s.barwidth=f;if(l===undefined){s.poffset=c+(d-f)/2}}}}function M(e,t){var r=t.traces;var n=L(e);for(var a=0;a<r.length;a++){var i=r[a];var o=i[0].t;var s=o.poffset;var l=Array.isArray(s);var c=o.barwidth;var u=Array.isArray(c);for(var f=0;f<i.length;f++){var d=i[f];var h=d.w=u?c[f]:c;d[n]=d.p+(l?s[f]:s)+h/2}}}function S(e,t,r){var n=t.traces;var a=t.minDiff;var i=a/2;A.minDtick(e,t.minDiff,t.distinctPositions[0],r);for(var o=0;o<n.length;o++){var s=n[o];var l=s[0];var c=l.trace;var u=[];var f,d,h,p;for(p=0;p<s.length;p++){f=s[p];d=f.p-i;h=f.p+i;u.push(d,h)}if(c.width||c.offset){var v=l.t;var g=v.poffset;var m=v.barwidth;var _=Array.isArray(g);var y=Array.isArray(m);for(p=0;p<s.length;p++){f=s[p];var b=_?g[p]:g;var x=y?m[p]:m;d=f.p+b;h=d+x;u.push(d,h)}}c._extremes[e._id]=A.findExtremes(e,u,{padded:false})}}function s(e,t){var r=t.traces;var n=L(e);for(var a=0;a<r.length;a++){var i=r[a];var o=i[0].trace;var s=[];var l=false;for(var c=0;c<i.length;c++){var u=i[c];var f=u.b;var d=f+u.s;u[n]=d;s.push(d);if(u.hasB)s.push(f);if(!u.hasB||!u.b){l=true}}o._extremes[e._id]=A.findExtremes(e,s,{tozero:l,padded:true})}}function y(e,t,r){var n=L(e);var a=t.traces;var i;var o;var s;var l,c;var u;for(l=0;l<a.length;l++){i=a[l];o=i[0].trace;if(o.type==="funnel"){for(c=0;c<i.length;c++){u=i[c];if(u.s!==w){t.put(u.p,-.5*u.s)}}}}for(l=0;l<a.length;l++){i=a[l];o=i[0].trace;s=o.type==="funnel";var f=[];for(c=0;c<i.length;c++){u=i[c];if(u.s!==w){var d;if(s){d=u.s}else{d=u.s+u.b}var h=t.put(u.p,d);var p=h+d;u.b=h;u[n]=p;if(!r.norm){f.push(p);if(u.hasB){f.push(h)}}}}if(!r.norm){o._extremes[e._id]=A.findExtremes(e,f,{tozero:true,padded:true})}}}function l(e){var t=e.traces;for(var r=0;r<t.length;r++){var n=t[r];for(var a=0;a<n.length;a++){var i=n[a];if(i.s!==w){e.put(i.p,i.b+i.s)}}}}function c(e,t){var r=e.traces;for(var n=0;n<r.length;n++){var a=r[n];var i=a[0].trace;if(i.base===undefined){var o=new f([a],{posAxis:t,sepNegVal:true,overlapNoMerge:true});for(var s=0;s<a.length;s++){var l=a[s];if(l.p!==w){var c=o.put(l.p,l.b+l.s);if(c)l.b=c}}}}}function b(t,e,r){var n=e.traces;var a=L(t);var i=r.norm==="fraction"?1:100;var o=i/1e9;var s=t.l2c(t.c2l(0));var l=r.mode==="stack"?i:s;function c(e){return x(t.c2l(e))&&(e<s-o||e>l+o||!x(s))}for(var u=0;u<n.length;u++){var f=n[u];var d=f[0].trace;var h=[];var p=false;var v=false;for(var g=0;g<f.length;g++){var m=f[g];if(m.s!==w){var _=Math.abs(i/e.get(m.p,m.s));m.b*=_;m.s*=_;var y=m.b;var b=y+m.s;m[a]=b;h.push(b);v=v||c(b);if(m.hasB){h.push(y);v=v||c(y)}if(!m.hasB||!m.b){p=true}}}d._extremes[t._id]=A.findExtremes(t,h,{tozero:p,padded:v})}}function C(e,t){var r=L(t);var n={};var a,i,o;var s=Infinity;var l=-Infinity;for(a=0;a<e.length;a++){o=e[a];for(i=0;i<o.length;i++){var c=o[i].p;if(x(c)){s=Math.min(s,c);l=Math.max(l,c)}}}var u=1e4/(l-s);var f=n.round=function(e){return String(Math.round(u*(e-s)))};for(a=0;a<e.length;a++){o=e[a];o[0].t.extents=n;var d=o[0].t.poffset;var h=Array.isArray(d);for(i=0;i<o.length;i++){var p=o[i];var v=p[r]-p.w/2;if(x(v)){var g=p[r]+p.w/2;var m=f(p.p);if(n[m]){n[m]=[Math.min(v,n[m][0]),Math.max(g,n[m][1])]}else{n[m]=[v,g]}}p.p0=p.p+(h?d[i]:d);p.p1=p.p0+p.w;p.s0=p.b;p.s1=p.s0+p.s}}}function L(e){return e._id.charAt(0)}t.exports={crossTraceCalc:n,setGroupPositions:g}},{"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/axes":331,"../../plots/cartesian/constraints":339,"../../registry":373,"./sieve.js":396,"fast-isnumeric":31}],387:[function(e,t,r){"use strict";var x=e("../../lib");var c=e("../../components/color");var u=e("../../registry");var f=e("../scatter/xy_defaults");var d=e("../scatter/period_defaults");var h=e("./style_defaults");var p=e("../../plots/cartesian/constraints").getAxisGroup;var v=e("./attributes");var w=x.coerceFont;function n(r,n,e,t){function a(e,t){return x.coerce(r,n,v,e,t)}var i=f(r,n,t,a);if(!i){n.visible=false;return}d(r,n,t,a);a("xhoverformat");a("yhoverformat");a("orientation",n.x&&!n.y?"h":"v");a("base");a("offset");a("width");a("text");a("hovertext");a("hovertemplate");var o=a("textposition");g(r,n,t,a,o,{moduleHasSelected:true,moduleHasUnselected:true,moduleHasConstrain:true,moduleHasCliponaxis:true,moduleHasTextangle:true,moduleHasInsideanchor:true});h(r,n,a,e,t);var s=(n.marker.line||{}).color;var l=u.getComponentMethod("errorbars","supplyDefaults");l(r,n,s||c.defaultLine,{axis:"y"});l(r,n,s||c.defaultLine,{axis:"x",inherit:"y"});x.coerceSelectionMarkerOpacity(n,a)}function o(e,t,r,n){var a=t.orientation;var i=t[{v:"x",h:"y"}[a]+"axis"];var o=p(r,i)+a;var s=r._alignmentOpts||{};var l=n("alignmentgroup");var c=s[o];if(!c)c=s[o]={};var u=c[l];if(u){u.traces.push(t)}else{u=c[l]={traces:[t],alignmentIndex:Object.keys(c).length,offsetGroups:{}}}var f=n("offsetgroup");var d=u.offsetGroups;var h=d[f];if(f){if(!h){h=d[f]={offsetIndex:Object.keys(d).length}}t._offsetIndex=h.offsetIndex}}function a(e,t){var r,n;function a(e){return x.coerce(n._input,n,v,e)}if(t.barmode==="group"){for(var i=0;i<e.length;i++){n=e[i];if(n.type==="bar"){r=n._input;o(r,n,t,a)}}}}function g(e,t,r,n,a,i){i=i||{};var o=!(i.moduleHasSelected===false);var s=!(i.moduleHasUnselected===false);var l=!(i.moduleHasConstrain===false);var c=!(i.moduleHasCliponaxis===false);var u=!(i.moduleHasTextangle===false);var f=!(i.moduleHasInsideanchor===false);var d=!!i.hasPathbar;var h=Array.isArray(a)||a==="auto";var p=h||a==="inside";var v=h||a==="outside";if(p||v){var g=w(n,"textfont",r.font);var m=x.extendFlat({},g);var _=e.textfont&&e.textfont.color;var y=!_;if(y){delete m.color}w(n,"insidetextfont",m);if(d){var b=x.extendFlat({},g);if(y){delete b.color}w(n,"pathbar.textfont",b)}if(v)w(n,"outsidetextfont",g);if(o)n("selected.textfont.color");if(s)n("unselected.textfont.color");if(l)n("constraintext");if(c)n("cliponaxis");if(u)n("textangle");n("texttemplate")}if(p){if(f)n("insidetextanchor")}}t.exports={supplyDefaults:n,crossTraceDefaults:a,handleGroupingDefaults:o,handleText:g}},{"../../components/color":155,"../../lib":285,"../../plots/cartesian/constraints":339,"../../registry":373,"../scatter/period_defaults":514,"../scatter/xy_defaults":521,"./attributes":383,"./style_defaults":398}],388:[function(e,t,r){"use strict";t.exports=function e(t,r,n){t.x="xVal"in r?r.xVal:r.x;t.y="yVal"in r?r.yVal:r.y;if(r.xa)t.xaxis=r.xa;if(r.ya)t.yaxis=r.ya;if(n.orientation==="h"){t.label=t.y;t.value=t.x}else{t.label=t.x;t.value=t.y}return t}},{}],389:[function(e,t,r){"use strict";var o=e("fast-isnumeric");var n=e("tinycolor2");var a=e("../../lib").isArrayOrTypedArray;r.coerceString=function(e,t,r){if(typeof t==="string"){if(t||!e.noBlank)return t}else if(typeof t==="number"||t===true){if(!e.strict)return String(t)}return r!==undefined?r:e.dflt};r.coerceNumber=function(e,t,r){if(o(t)){t=+t;var n=e.min;var a=e.max;var i=n!==undefined&&t<n||a!==undefined&&t>a;if(!i)return t}return r!==undefined?r:e.dflt};r.coerceColor=function(e,t,r){if(n(t).isValid())return t;return r!==undefined?r:e.dflt};r.coerceEnumerated=function(e,t,r){if(e.coerceNumber)t=+t;if(e.values.indexOf(t)!==-1)return t;return r!==undefined?r:e.dflt};r.getValue=function(e,t){var r;if(!Array.isArray(e))r=e;else if(t<e.length)r=e[t];return r};r.getLineWidth=function(e,t){var r=0<t.mlw?t.mlw:!a(e.marker.line.width)?e.marker.line.width:0;return r}},{"../../lib":285,"fast-isnumeric":31,tinycolor2:119}],390:[function(e,t,r){"use strict";var B=e("../../components/fx");var c=e("../../registry");var i=e("../../components/color");var H=e("../../lib").fillText;var o=e("./helpers").getLineWidth;var U=e("../../plots/cartesian/axes").hoverLabelText;var V=e("../../constants/numerical").BADNUM;function n(e,t,r,n,a){var i=u(e,t,r,n,a);if(i){var o=i.cd;var s=o[0].trace;var l=o[i.index];i.color=f(s,l);c.getComponentMethod("errorbars","hoverInfo")(l,s,i);return[i]}}function u(e,t,r,n,a){var i=e.cd;var o=i[0].trace;var s=i[0].t;var l=n==="closest";var c=o.type==="waterfall";var u=e.maxHoverDistance;var f=e.maxSpikeDistance;var d,h,p,v,g,m,_;if(o.orientation==="h"){d=r;h=t;p="y";v="x";g=L;m=M}else{d=t;h=r;p="x";v="y";m=L;g=M}var y=o[p+"period"];function b(e){return w(e,-1)}function x(e){return w(e,1)}function w(e,t){if(y){return e.p+t*Math.abs(e.p-e.orig_p)}return e[p]+t*e.w/2}var A=l||y?b:function(e){return Math.min(b(e),e.p-s.bardelta/2)};var T=l||y?x:function(e){return Math.max(x(e),e.p+s.bardelta/2)};function k(e,t,r){if(a.finiteRange)r=0;return B.inbox(e-d,t-d,r+Math.min(1,Math.abs(t-e)/_)-1)}function M(e){return k(A(e),T(e),u)}function S(e){return k(b(e),x(e),f)}function C(e){var t=e[v];if(c){var r=Math.abs(e.rawS)||0;if(h>0){t+=r}else if(h<0){t-=r}}return t}function L(e){var t=h;var r=e.b;var n=C(e);return B.inbox(r-t,n-t,u+(n-t)/(n-r)-1)}function E(e){var t=h;var r=e.b;var n=C(e);return B.inbox(r-t,n-t,f+(n-t)/(n-r)-1)}var D=e[p+"a"];var O=e[v+"a"];_=Math.abs(D.r2c(D.range[1])-D.r2c(D.range[0]));function P(e){return(g(e)+m(e))/2}var I=B.getDistanceFunction(n,g,m,P);B.getClosest(i,I,e);if(e.index===false)return;if(i[e.index].p===V)return;if(!l){A=function(e){return Math.min(b(e),e.p-s.bargroupwidth/2)};T=function(e){return Math.max(x(e),e.p+s.bargroupwidth/2)}}var R=e.index;var z=i[R];var N=o.base?z.b+z.s:z.s;e[v+"0"]=e[v+"1"]=O.c2p(z[v],true);e[v+"LabelVal"]=N;var F=s.extents[s.extents.round(z.p)];e[p+"0"]=D.c2p(l?A(z):F[0],true);e[p+"1"]=D.c2p(l?T(z):F[1],true);var j=z.orig_p!==undefined;e[p+"LabelVal"]=j?z.orig_p:z.p;e.labelLabel=U(D,e[p+"LabelVal"],o[p+"hoverformat"]);e.valueLabel=U(O,e[v+"LabelVal"],o[v+"hoverformat"]);e.baseLabel=U(O,z.b,o[v+"hoverformat"]);e.spikeDistance=(E(z)+S(z))/2;e[p+"Spike"]=D.c2p(z.p,true);H(z,o,e);e.hovertemplate=o.hovertemplate;return e}function f(e,t){var r=t.mcc||e.marker.color;var n=t.mlcc||e.marker.line.color;var a=o(e,t);if(i.opacity(r))return r;else if(i.opacity(n)&&a)return n}t.exports={hoverPoints:n,hoverOnBars:u,getTraceColor:f}},{"../../components/color":155,"../../components/fx":195,"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/axes":331,"../../registry":373,"./helpers":389}],391:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,colorbar:e("../scatter/marker_colorbar"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"bar",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:true,meta:{}}},{"../../plots/cartesian":345,"../scatter/marker_colorbar":512,"./arrays_to_calcdata":382,"./attributes":383,"./calc":384,"./cross_trace_calc":386,"./defaults":387,"./event_data":388,"./hover":390,"./layout_attributes":392,"./layout_defaults":393,"./plot":394,"./select":395,"./style":397}],392:[function(e,t,r){"use strict";t.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],393:[function(e,t,r){"use strict";var h=e("../../registry");var p=e("../../plots/cartesian/axes");var v=e("../../lib");var g=e("./layout_attributes");t.exports=function(r,n,e){function t(e,t){return v.coerce(r,n,g,e,t)}var a=false;var i=false;var o=false;var s={};var l=t("barmode");for(var c=0;c<e.length;c++){var u=e[c];if(h.traceIs(u,"bar")&&u.visible)a=true;else continue;if(l==="group"){var f=u.xaxis+u.yaxis;if(s[f])o=true;s[f]=true}if(u.visible&&u.type==="histogram"){var d=p.getFromId({_fullLayout:n},u[u.orientation==="v"?"xaxis":"yaxis"]);if(d.type!=="category")i=true}}if(!a){delete n.barmode;return}if(l!=="overlay")t("barnorm");t("bargap",i&&!o?0:.2);t("bargroupgap")}},{"../../lib":285,"../../plots/cartesian/axes":331,"../../registry":373,"./layout_attributes":392}],394:[function(e,t,r){"use strict";var D=e("@plotly/d3");var O=e("fast-isnumeric");var U=e("../../lib");var V=e("../../lib/svg_text_utils");var P=e("../../components/color");var q=e("../../components/drawing");var n=e("../../registry");var x=e("../../plots/cartesian/axes").tickText;var a=e("./uniform_text");var Y=a.recordMinTextSize;var i=a.clearMinTextSize;var G=e("./style");var I=e("./helpers");var o=e("./constants");var s=e("./attributes");var l=s.text;var c=s.textposition;var b=e("../../components/fx/helpers").appendArrayPointValue;var W=o.TEXTPAD;function u(e){return e.id}function f(e){if(e.ids){return u}}function R(e,t){return e<t?1:-1}function z(e,t,r,n){var a=[];var i=[];var o=n?t:r;var s=n?r:t;a[0]=o.c2p(e.s0,true);i[0]=s.c2p(e.p0,true);a[1]=o.c2p(e.s1,true);i[1]=s.c2p(e.p1,true);return n?[a,i]:[i,a]}function X(e,t,r,n){if(!t.uniformtext.mode&&d(r)){var a;if(n){a=n()}return e.transition().duration(r.duration).ease(r.easing).each("end",function(){a&&a()}).each("interrupt",function(){a&&a()})}else{return e}}function d(e){return e&&e.duration>0}function h(T,k,e,t,M,S){var C=k.xaxis;var L=k.yaxis;var E=T._fullLayout;if(!M){M={mode:E.barmode,norm:E.barmode,gap:E.bargap,groupgap:E.bargroupgap};i("bar",E)}var r=U.makeTraceGroups(t,e,"trace bars").each(function(_){var e=D.select(this);var y=_[0].trace;var t=y.type==="waterfall";var r=y.type==="funnel";var n=y.type==="bar";var b=n||r;var x=0;if(t&&y.connector.visible&&y.connector.mode==="between"){x=y.connector.line.width/2}var w=y.orientation==="h";var A=d(M);var a=U.ensureSingle(e,"g","points");var i=f(y);var o=a.selectAll("g.point").data(U.identity,i);o.enter().append("g").classed("point",true);o.exit().remove();o.each(function(e,t){var r=D.select(this);var n=z(e,C,L,w);var a=n[0][0];var i=n[0][1];var o=n[1][0];var s=n[1][1];var l=(w?i-a:s-o)===0;if(l&&b&&I.getLineWidth(y,e)){l=false}if(!l){l=!O(a)||!O(i)||!O(o)||!O(s)}e.isBlank=l;if(l){if(w){i=a}else{s=o}}if(x&&!l){if(w){a-=R(a,i)*x;i+=R(a,i)*x}else{o-=R(o,s)*x;s+=R(o,s)*x}}var c;var u;if(y.type==="waterfall"){if(!l){var f=y[e.dir].marker;c=f.line.width;u=f.color}}else{c=I.getLineWidth(y,e);u=e.mc||y.marker.color}function d(e){var t=D.round(c/2%1,2);return M.gap===0&&M.groupgap===0?D.round(Math.round(e)-t,2):e}function h(e,t,r){if(r&&e===t){return e}return Math.abs(e-t)>=2?d(e):e>t?Math.ceil(e):Math.floor(e)}if(!T._context.staticPlot){var p=P.opacity(u);var v=p<1||c>.01?d:h;a=v(a,i,w);i=v(i,a,w);o=v(o,s,!w);s=v(s,o,!w)}var g=X(U.ensureSingle(r,"path"),E,M,S);g.style("vector-effect","non-scaling-stroke").attr("d",isNaN((i-a)*(s-o))||l&&T._context.staticPlot?"M0,0Z":"M"+a+","+o+"V"+s+"H"+i+"V"+o+"Z").call(q.setClipUrl,k.layerClipId,T);if(!E.uniformtext.mode&&A){var m=q.makePointStyleFns(y);q.singlePointStyle(e,g,y,m,T)}N(T,k,r,_,t,a,i,o,s,M,S);if(k.layerClipId){q.hideOutsideRangePoint(e,r.select("text"),C,L,y.xcalendar,y.ycalendar)}});var s=y.cliponaxis===false;q.setClipUrl(e,s?null:k.layerClipId,T)});n.getComponentMethod("errorbars","plot")(T,r,k,M)}function N(a,e,t,r,n,i,o,s,l,c,u){var f=e.xaxis;var d=e.yaxis;var h=a._fullLayout;var p;function v(e,t,r){var n=U.ensureSingle(e,"text").text(t).attr({class:"bartext bartext-"+p,"text-anchor":"middle","data-notex":1}).call(q.font,r).call(V.convertToTspans,a);return n}var g=r[0].trace;var m=g.orientation==="h";var _=$(h,r,n,f,d);p=Q(g,n);var y=c.mode==="stack"||c.mode==="relative";var b=r[n];var x=!y||b._outmost;if(!_||p==="none"||(b.isBlank||i===o||s===l)&&(p==="auto"||p==="inside")){t.select("text").remove();return}var w=h.font;var A=G.getBarColor(r[n],g);var T=G.getInsideTextFont(g,n,w,A);var k=G.getOutsideTextFont(g,n,w);var M=t.datum();if(m){if(f.type==="log"&&M.s0<=0){if(f.range[0]<f.range[1]){i=0}else{i=f._length}}}else{if(d.type==="log"&&M.s0<=0){if(d.range[0]<d.range[1]){s=d._length}else{s=0}}}var S=Math.abs(o-i)-2*W;var C=Math.abs(l-s)-2*W;var L;var E;var D;var O;var P;if(p==="outside"){if(!x&&!b.hasB)p="inside"}if(p==="auto"){if(x){p="inside";P=U.ensureUniformFontSize(a,T);L=v(t,_,P);E=q.bBox(L.node()),D=E.width,O=E.height;var I=D>0&&O>0;var R=D<=S&&O<=C;var z=D<=C&&O<=S;var N=m?S>=D*(C/O):C>=O*(S/D);if(I&&(R||z||N)){p="inside"}else{p="outside";L.remove();L=null}}else{p="inside"}}if(!L){P=U.ensureUniformFontSize(a,p==="outside"?k:T);L=v(t,_,P);var F=L.attr("transform");L.attr("transform","");E=q.bBox(L.node()),D=E.width,O=E.height;L.attr("transform",F);if(D<=0||O<=0){L.remove();return}}var j=g.textangle;var B,H;if(p==="outside"){H=g.constraintext==="both"||g.constraintext==="outside";B=J(i,o,s,l,E,{isHorizontal:m,constrained:H,angle:j})}else{H=g.constraintext==="both"||g.constraintext==="inside";B=Z(i,o,s,l,E,{isHorizontal:m,constrained:H,angle:j,anchor:g.insidetextanchor})}B.fontSize=P.size;Y(g.type,B,h);b.transform=B;X(L,h,c,u).attr("transform",U.getTextTransform(B))}function F(e){return e==="auto"?0:e}function j(e,t){var r=Math.PI/180*t;var n=Math.abs(Math.sin(r));var a=Math.abs(Math.cos(r));return{x:e.width*a+e.height*n,y:e.width*n+e.height*a}}function Z(e,t,r,n,a,i){var o=!!i.isHorizontal;var s=!!i.constrained;var l=i.angle||0;var c=i.anchor||"end";var u=c==="end";var f=c==="start";var d=i.leftToRight||0;var h=(d+1)/2;var p=1-h;var v=a.width;var g=a.height;var m=Math.abs(t-e);var _=Math.abs(n-r);var y=m>2*W&&_>2*W?W:0;m-=2*y;_-=2*y;var b=F(l);if(l==="auto"&&!(v<=m&&g<=_)&&(v>m||g>_)&&(!(v>_||g>m)||v<g!==m<_)){b+=90}var x=j(a,b);var w=1;if(s){w=Math.min(1,m/x.x,_/x.y)}var A=a.left*p+a.right*h;var T=(a.top+a.bottom)/2;var k=(e+W)*p+(t-W)*h;var M=(r+n)/2;var S=0;var C=0;if(f||u){var L=(o?x.x:x.y)/2;var E=o?R(e,t):R(r,n);if(o){if(f){k=e+E*y;S=-E*L}else{k=t-E*y;S=E*L}}else{if(f){M=r+E*y;C=-E*L}else{M=n-E*y;C=E*L}}}return{textX:A,textY:T,targetX:k,targetY:M,anchorX:S,anchorY:C,scale:w,rotate:b}}function J(e,t,r,n,a,i){var o=!!i.isHorizontal;var s=!!i.constrained;var l=i.angle||0;var c=a.width;var u=a.height;var f=Math.abs(t-e);var d=Math.abs(n-r);var h;if(o){h=d>2*W?W:0}else{h=f>2*W?W:0}var p=1;if(s){p=o?Math.min(1,d/u):Math.min(1,f/c)}var v=F(l);var g=j(a,v);var m=(o?g.x:g.y)/2;var _=(a.left+a.right)/2;var y=(a.top+a.bottom)/2;var b=(e+t)/2;var x=(r+n)/2;var w=0;var A=0;var T=o?R(t,e):R(r,n);if(o){b=t-T*h;w=T*m}else{x=n+T*h;A=-T*m}return{textX:_,textY:y,targetX:b,targetY:x,anchorX:w,anchorY:A,scale:p,rotate:v}}function $(e,t,r,n,a){var i=t[0].trace;var o=i.texttemplate;var s;if(o){s=p(e,t,r,n,a)}else if(i.textinfo){s=v(t,r,n,a)}else{s=I.getValue(i.text,r)}return I.coerceString(l,s)}function Q(e,t){var r=I.getValue(e.textposition,t);return I.coerceEnumerated(c,r)}function p(e,t,r,n,a){var i=t[0].trace;var o=U.castOption(i,r,"texttemplate");if(!o)return"";var s=i.type==="waterfall";var l=i.type==="funnel";var c,u;var f,d;if(i.orientation==="h"){c="y";u=a;f="x";d=n}else{c="x";u=n;f="y";d=a}function h(e){return x(u,u.c2l(e),true).text}function p(e){return x(d,d.c2l(e),true).text}var v=t[r];var g={};g.label=v.p;g.labelLabel=g[c+"Label"]=h(v.p);var m=U.castOption(i,v.i,"text");if(m===0||m)g.text=m;g.value=v.s;g.valueLabel=g[f+"Label"]=p(v.s);var _={};b(_,i,v.i);if(s){g.delta=+v.rawS||v.s;g.deltaLabel=p(g.delta);g.final=v.v;g.finalLabel=p(g.final);g.initial=g.final-g.delta;g.initialLabel=p(g.initial)}if(l){g.value=v.s;g.valueLabel=p(g.value);g.percentInitial=v.begR;g.percentInitialLabel=U.formatPercent(v.begR);g.percentPrevious=v.difR;g.percentPreviousLabel=U.formatPercent(v.difR);g.percentTotal=v.sumR;g.percenTotalLabel=U.formatPercent(v.sumR)}var y=U.castOption(i,v.i,"customdata");if(y)g.customdata=y;return U.texttemplateString(o,g,e._d3locale,_,g,i._meta||{})}function v(e,t,r,n){var a=e[0].trace;var i=a.orientation==="h";var o=a.type==="waterfall";var s=a.type==="funnel";function l(e){var t=i?n:r;return x(t,e,true).text}function c(e){var t=i?r:n;return x(t,+e,true).text}var u=a.textinfo;var f=e[t];var d=u.split("+");var h=[];var p;var v=function(e){return d.indexOf(e)!==-1};if(v("label")){h.push(l(e[t].p))}if(v("text")){p=U.castOption(a,f.i,"text");if(p===0||p)h.push(p)}if(o){var g=+f.rawS||f.s;var m=f.v;var _=m-g;if(v("initial"))h.push(c(_));if(v("delta"))h.push(c(g));if(v("final"))h.push(c(m))}if(s){if(v("value"))h.push(c(f.s));var y=0;if(v("percent initial"))y++;if(v("percent previous"))y++;if(v("percent total"))y++;var b=y>1;if(v("percent initial")){p=U.formatPercent(f.begR);if(b)p+=" of initial";h.push(p)}if(v("percent previous")){p=U.formatPercent(f.difR);if(b)p+=" of previous";h.push(p)}if(v("percent total")){p=U.formatPercent(f.sumR);if(b)p+=" of total";h.push(p)}}return h.join("<br>")}t.exports={plot:h,toMoveInsideBar:Z}},{"../../components/color":155,"../../components/drawing":177,"../../components/fx/helpers":191,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/cartesian/axes":331,"../../registry":373,"./attributes":383,"./constants":385,"./helpers":389,"./style":397,"./uniform_text":399,"@plotly/d3":20,"fast-isnumeric":31}],395:[function(e,t,r){"use strict";t.exports=function e(t,r){var n=t.cd;var a=t.xaxis;var i=t.yaxis;var o=n[0].trace;var s=o.type==="funnel";var l=o.orientation==="h";var c=[];var u;if(r===false){for(u=0;u<n.length;u++){n[u].selected=0}}else{for(u=0;u<n.length;u++){var f=n[u];var d="ct"in f?f.ct:h(f,a,i,l,s);if(r.contains(d,false,u,t)){c.push({pointNumber:u,x:a.c2d(f.x),y:i.c2d(f.y)});f.selected=1}else{f.selected=0}}}return c};function h(e,t,r,n,a){var i=t.c2p(n?e.s0:e.p0,true);var o=t.c2p(n?e.s1:e.p1,true);var s=r.c2p(n?e.p0:e.s0,true);var l=r.c2p(n?e.p1:e.s1,true);if(a){return[(i+o)/2,(s+l)/2]}else{if(n){return[o,(s+l)/2]}else{return[(i+o)/2,l]}}}},{}],396:[function(e,t,r){"use strict";t.exports=n;var u=e("../../lib").distinctVals;var f=e("../../constants/numerical").BADNUM;function n(e,t){this.traces=e;this.sepNegVal=t.sepNegVal;this.overlapNoMerge=t.overlapNoMerge;var r=Infinity;var n=[];for(var a=0;a<e.length;a++){var i=e[a];for(var o=0;o<i.length;o++){var s=i[o];if(s.p!==f)n.push(s.p)}if(i[0]&&i[0].width1){r=Math.min(i[0].width1,r)}}this.positions=n;var l=u(n);this.distinctPositions=l.vals;if(l.vals.length===1&&r!==Infinity)this.minDiff=r;else this.minDiff=Math.min(l.minDiff,r);var c=(t.posAxis||{}).type;if(c==="category"||c==="multicategory"){this.minDiff=1}this.binWidth=this.minDiff;this.bins={}}n.prototype.put=function e(t,r){var n=this.getLabel(t,r);var a=this.bins[n]||0;this.bins[n]=a+r;return a};n.prototype.get=function e(t,r){var n=this.getLabel(t,r);return this.bins[n]||0};n.prototype.getLabel=function e(t,r){var n=r<0&&this.sepNegVal?"v":"^";var a=this.overlapNoMerge?t:Math.round(t/this.binWidth);return n+a}},{"../../constants/numerical":265,"../../lib":285}],397:[function(e,t,r){"use strict";var o=e("@plotly/d3");var s=e("../../components/color");var l=e("../../components/drawing");var c=e("../../lib");var a=e("../../registry");var i=e("./uniform_text").resizeText;var n=e("./attributes");var u=n.textfont;var f=n.insidetextfont;var d=n.outsidetextfont;var h=e("./helpers");function p(n){var e=o.select(n).selectAll("g.barlayer").selectAll("g.trace");i(n,e,"bar");var t=e.size();var r=n._fullLayout;e.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){if(r.barmode==="stack"&&t>1||r.bargap===0&&r.bargroupgap===0&&!e[0].trace.marker.line.width){o.select(this).attr("shape-rendering","crispEdges")}});e.selectAll("g.points").each(function(e){var t=o.select(this);var r=e[0].trace;v(t,r,n)});a.getComponentMethod("errorbars","style")(e)}function v(e,t,r){l.pointStyle(e.selectAll("path"),t,r);g(e,t,r)}function g(e,n,a){e.selectAll("text").each(function(e){var t=o.select(this);var r=c.ensureUniformFontSize(a,b(t,e,n,a));l.font(t,r)})}function m(e,t,r){var n=t[0].trace;if(n.selectedpoints){_(r,n,e)}else{v(r,n,e);a.getComponentMethod("errorbars","style")(r)}}function _(e,t,r){l.selectedPointStyle(e.selectAll("path"),t);y(e.selectAll("text"),t,r)}function y(e,a,i){e.each(function(e){var t=o.select(this);var r;if(e.selected){r=c.ensureUniformFontSize(i,b(t,e,a,i));var n=a.selected.textfont&&a.selected.textfont.color;if(n){r.color=n}l.font(t,r)}else{l.selectedTextStyle(t,a)}})}function b(e,t,r,n){var a=n._fullLayout.font;var i=r.textfont;if(e.classed("bartext-inside")){var o=k(t,r);i=w(r,t.i,a,o)}else if(e.classed("bartext-outside")){i=A(r,t.i,a)}return i}function x(e,t,r){return T(u,e.textfont,t,r)}function w(e,t,r,n){var a=x(e,t,r);var i=e._input.textfont===undefined||e._input.textfont.color===undefined||Array.isArray(e.textfont.color)&&e.textfont.color[t]===undefined;if(i){a={color:s.contrast(n),family:a.family,size:a.size}}return T(f,e.insidetextfont,t,a)}function A(e,t,r){var n=x(e,t,r);return T(d,e.outsidetextfont,t,n)}function T(e,t,r,n){t=t||{};var a=h.getValue(t.family,r);var i=h.getValue(t.size,r);var o=h.getValue(t.color,r);return{family:h.coerceString(e.family,a,n.family),size:h.coerceNumber(e.size,i,n.size),color:h.coerceColor(e.color,o,n.color)}}function k(e,t){if(t.type==="waterfall"){return t[e.dir].marker.color}return e.mcc||e.mc||t.marker.color}t.exports={style:p,styleTextPoints:g,styleOnSelect:m,getInsideTextFont:w,getOutsideTextFont:A,getBarColor:k,resizeText:i}},{"../../components/color":155,"../../components/drawing":177,"../../lib":285,"../../registry":373,"./attributes":383,"./helpers":389,"./uniform_text":399,"@plotly/d3":20}],398:[function(e,t,r){"use strict";var l=e("../../components/color");var c=e("../../components/colorscale/helpers").hasColorscale;var u=e("../../components/colorscale/defaults");var f=e("../../lib").coercePattern;t.exports=function e(t,r,n,a,i){var o=n("marker.color",a);var s=c(t,"marker");if(s){u(t,r,i,n,{prefix:"marker.",cLetter:"c"})}n("marker.line.color",l.defaultLine);if(c(t,"marker.line")){u(t,r,i,n,{prefix:"marker.line.",cLetter:"c"})}n("marker.line.width");n("marker.opacity");f(n,"marker.pattern",o,s);n("selected.marker.color");n("unselected.marker.color")}},{"../../components/color":155,"../../components/colorscale/defaults":165,"../../components/colorscale/helpers":166,"../../lib":285}],399:[function(e,t,r){"use strict";var s=e("@plotly/d3");var l=e("../../lib");function n(e,t,r){var n=e._fullLayout;var a=n["_"+r+"Text_minsize"];if(a){var i=n.uniformtext.mode==="hide";var o;switch(r){case"funnelarea":case"pie":case"sunburst":o="g.slice";break;case"treemap":case"icicle":o="g.slice, g.pathbar";break;default:o="g.points > g.point"}t.selectAll(o).each(function(e){var t=e.transform;if(t){t.scale=i&&t.hide?0:a/t.fontSize;var r=s.select(this).select("text");r.attr("transform",l.getTextTransform(t))}})}}function a(e,t,r){if(r.uniformtext.mode){var n=o(e);var a=r.uniformtext.minsize;var i=t.scale*t.fontSize;t.hide=i<a;r[n]=r[n]||Infinity;if(!t.hide){r[n]=Math.min(r[n],Math.max(i,a))}}}function i(e,t){var r=o(e);t[r]=undefined}function o(e){return"_"+e+"Text_minsize"}t.exports={recordMinTextSize:a,clearMinTextSize:i,resizeText:n}},{"../../lib":285,"@plotly/d3":20}],400:[function(e,t,r){"use strict";var n=e("../scatter/attributes");var a=e("../bar/attributes");var i=e("../../components/color/attributes");var o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var s=e("../../plots/template_attributes").hovertemplateAttrs;var l=e("../../lib/extend").extendFlat;var c=n.marker;var u=c.line;t.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:n.xperiod,yperiod:n.yperiod,xperiod0:n.xperiod0,yperiod0:n.yperiod0,xperiodalignment:n.xperiodalignment,yperiodalignment:n.yperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",false],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[true,"sd",false],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:l({},c.symbol,{arrayOk:false,editType:"plot"}),opacity:l({},c.opacity,{arrayOk:false,dflt:1,editType:"style"}),size:l({},c.size,{arrayOk:false,editType:"calc"}),color:l({},c.color,{arrayOk:false,editType:"style"}),line:{color:l({},u.color,{arrayOk:false,dflt:i.defaultLine,editType:"style"}),width:l({},u.width,{arrayOk:false,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:n.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:a.offsetgroup,alignmentgroup:a.alignmentgroup,selected:{marker:n.selected.marker,editType:"style"},unselected:{marker:n.unselected.marker,editType:"style"},text:l({},n.text,{}),hovertext:l({},n.hovertext,{}),hovertemplate:s({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":154,"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../../plots/template_attributes":368,"../bar/attributes":383,"../scatter/attributes":494}],401:[function(e,t,r){"use strict";var ee=e("fast-isnumeric");var te=e("../../plots/cartesian/axes");var p=e("../../plots/cartesian/align_period");var re=e("../../lib");var ne=e("../../constants/numerical").BADNUM;var ae=re._;t.exports=function e(t,r){var n=t._fullLayout;var a=te.getFromId(t,r.xaxis||"x");var i=te.getFromId(t,r.yaxis||"y");var o=[];var s=r.type==="violin"?"_numViolins":"_numBoxes";var l,c;var u,f;var d,h;var p;if(r.orientation==="h"){u=a;f="x";d=i;h="y";p=!!r.yperiodalignment}else{u=i;f="y";d=a;h="x";p=!!r.xperiodalignment}var v=ie(r,h,d,n[s]);var g=v[0];var m=v[1];var _=re.distinctVals(g,d);var y=_.vals;var b=_.minDiff/2;var x;var w;var A;var T;var k;var M;var S=(r.boxpoints||r.points)==="all"?re.identity:function(e){return e.v<x.lf||e.v>x.uf};if(r._hasPreCompStats){var C=r[f];var L=function(e){return u.d2c((r[e]||[])[l])};var E=Infinity;var D=-Infinity;for(l=0;l<r._length;l++){var O=g[l];if(!ee(O))continue;x={};x.pos=x[h]=O;if(p&&m){x.orig_p=m[l]}x.q1=L("q1");x.med=L("median");x.q3=L("q3");w=[];if(C&&re.isArrayOrTypedArray(C[l])){for(c=0;c<C[l].length;c++){M=u.d2c(C[l][c]);if(M!==ne){k={v:M,i:[l,c]};le(k,r,[l,c]);w.push(k)}}}x.pts=w.sort(ue);A=x[f]=w.map(fe);T=A.length;if(x.med!==ne&&x.q1!==ne&&x.q3!==ne&&x.med>=x.q1&&x.q3>=x.med){var P=L("lowerfence");x.lf=P!==ne&&P<=x.q1?P:de(x,A,T);var I=L("upperfence");x.uf=I!==ne&&I>=x.q3?I:he(x,A,T);var R=L("mean");x.mean=R!==ne?R:T?re.mean(A,T):(x.q1+x.q3)/2;var z=L("sd");x.sd=R!==ne&&z>=0?z:T?re.stdev(A,T,x.mean):x.q3-x.q1;x.lo=pe(x);x.uo=ve(x);var N=L("notchspan");N=N!==ne&&N>0?N:ge(x,T);x.ln=x.med-N;x.un=x.med+N;var F=x.lf;var j=x.uf;if(r.boxpoints&&A.length){F=Math.min(F,A[0]);j=Math.max(j,A[T-1])}if(r.notched){F=Math.min(F,x.ln);j=Math.max(j,x.un)}x.min=F;x.max=j}else{re.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+x.q1,"median = "+x.med,"q3 = "+x.q3].join("\n"));var B;if(x.med!==ne){B=x.med}else if(x.q1!==ne){if(x.q3!==ne)B=(x.q1+x.q3)/2;else B=x.q1}else if(x.q3!==ne){B=x.q3}else{B=0}x.med=B;x.q1=x.q3=B;x.lf=x.uf=B;x.mean=x.sd=B;x.ln=x.un=B;x.min=x.max=B}E=Math.min(E,x.min);D=Math.max(D,x.max);x.pts2=w.filter(S);o.push(x)}r._extremes[u._id]=te.findExtremes(u,[E,D],{padded:true})}else{var H=u.makeCalcdata(r,f);var U=oe(y,b);var V=y.length;var q=se(V);for(l=0;l<r._length;l++){M=H[l];if(!ee(M))continue;var Y=re.findBin(g[l],U);if(Y>=0&&Y<V){k={v:M,i:l};le(k,r,l);q[Y].push(k)}}var G=Infinity;var W=-Infinity;var X=r.quartilemethod;var Z=X==="exclusive";var J=X==="inclusive";for(l=0;l<V;l++){if(q[l].length>0){x={};x.pos=x[h]=y[l];w=x.pts=q[l].sort(ue);A=x[f]=w.map(fe);T=A.length;x.min=A[0];x.max=A[T-1];x.mean=re.mean(A,T);x.sd=re.stdev(A,T,x.mean);x.med=re.interp(A,.5);if(T%2&&(Z||J)){var $;var Q;if(Z){$=A.slice(0,T/2);Q=A.slice(T/2+1)}else if(J){$=A.slice(0,T/2+1);Q=A.slice(T/2)}x.q1=re.interp($,.5);x.q3=re.interp(Q,.5)}else{x.q1=re.interp(A,.25);x.q3=re.interp(A,.75)}x.lf=de(x,A,T);x.uf=he(x,A,T);x.lo=pe(x);x.uo=ve(x);var K=ge(x,T);x.ln=x.med-K;x.un=x.med+K;G=Math.min(G,x.ln);W=Math.max(W,x.un);x.pts2=w.filter(S);o.push(x)}}r._extremes[u._id]=te.findExtremes(u,r.notched?H.concat([G,W]):H,{padded:true})}ce(o,r);if(o.length>0){o[0].t={num:n[s],dPos:b,posLetter:h,valLetter:f,labels:{med:ae(t,"median:"),min:ae(t,"min:"),q1:ae(t,"q1:"),q3:ae(t,"q3:"),max:ae(t,"max:"),mean:r.boxmean==="sd"?ae(t,"mean  :"):ae(t,"mean:"),lf:ae(t,"lower fence:"),uf:ae(t,"upper fence:")}};n[s]++;return o}else{return[{t:{empty:true}}]}};function ie(e,t,r,n){var a=t in e;var i=t+"0"in e;var o="d"+t in e;if(a||i&&o){var s=r.makeCalcdata(e,t);var l=p(e,r,t,s);return[l,s]}var c;if(i){c=e[t+"0"]}else if("name"in e&&(r.type==="category"||ee(e.name)&&["linear","log"].indexOf(r.type)!==-1||re.isDateTime(e.name)&&r.type==="date")){c=e.name}else{c=n}var u=r.type==="multicategory"?r.r2c_just_indices(c):r.d2c(c,0,e[t+"calendar"]);var f=e._length;var d=new Array(f);for(var h=0;h<f;h++)d[h]=u;return[d]}function oe(e,t){var r=e.length;var n=new Array(r+1);for(var a=0;a<r;a++){n[a]=e[a]-t}n[r]=e[r-1]+t;return n}function se(e){var t=new Array(e);for(var r=0;r<e;r++){t[r]=[]}return t}var a={text:"tx",hovertext:"htx"};function le(e,t,r){for(var n in a){if(re.isArrayOrTypedArray(t[n])){if(Array.isArray(r)){if(re.isArrayOrTypedArray(t[n][r[0]])){e[a[n]]=t[n][r[0]][r[1]]}}else{e[a[n]]=t[n][r]}}}}function ce(e,t){if(re.isArrayOrTypedArray(t.selectedpoints)){for(var r=0;r<e.length;r++){var n=e[r].pts||[];var a={};for(var i=0;i<n.length;i++){a[n[i].i]=i}re.tagSelected(n,t,a)}}}function ue(e,t){return e.v-t.v}function fe(e){return e.v}function de(e,t,r){if(r===0)return e.q1;return Math.min(e.q1,t[Math.min(re.findBin(2.5*e.q1-1.5*e.q3,t,true)+1,r-1)])}function he(e,t,r){if(r===0)return e.q3;return Math.max(e.q3,t[Math.max(re.findBin(2.5*e.q3-1.5*e.q1,t),0)])}function pe(e){return 4*e.q1-3*e.q3}function ve(e){return 4*e.q3-3*e.q1}function ge(e,t){if(t===0)return 0;return 1.57*(e.q3-e.q1)/Math.sqrt(t)}},{"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/align_period":328,"../../plots/cartesian/axes":331,"fast-isnumeric":31}],402:[function(e,t,r){"use strict";var $=e("../../plots/cartesian/axes");var Q=e("../../lib");var K=e("../../plots/cartesian/constraints").getAxisGroup;var h=["v","h"];function n(e,t){var r=e.calcdata;var n=t.xaxis;var a=t.yaxis;for(var i=0;i<h.length;i++){var o=h[i];var s=o==="h"?a:n;var l=[];for(var c=0;c<r.length;c++){var u=r[c];var f=u[0].t;var d=u[0].trace;if(d.visible===true&&(d.type==="box"||d.type==="candlestick")&&!f.empty&&(d.orientation||"v")===o&&d.xaxis===n._id&&d.yaxis===a._id){l.push(c)}}p("box",e,l,s)}}function p(e,t,r,n){var a=t.calcdata;var i=t._fullLayout;var o=n._id;var s=o.charAt(0);var l,c,u;var f=[];var d=0;for(l=0;l<r.length;l++){u=a[r[l]];for(c=0;c<u.length;c++){f.push(n.c2l(u[c].pos,true));d+=(u[c].pts2||[]).length}}if(!f.length)return;var h=Q.distinctVals(f);if(n.type==="category"||n.type==="multicategory"){h.minDiff=1}var p=h.minDiff/2;$.minDtick(n,h.minDiff,h.vals[0],true);var v=e==="violin"?"_numViolins":"_numBoxes";var g=i[v];var m=i[e+"mode"]==="group"&&g>1;var _=1-i[e+"gap"];var y=1-i[e+"groupgap"];for(l=0;l<r.length;l++){u=a[r[l]];var b=u[0].trace;var x=u[0].t;var w=b.width;var A=b.side;var T;var k;var M;var S;if(w){T=k=S=w/2;M=0}else{T=p;if(m){var C=K(i,n._id)+b.orientation;var L=i._alignmentOpts[C]||{};var E=L[b.alignmentgroup]||{};var D=Object.keys(E.offsetGroups||{}).length;var O=D||g;var P=D?b._offsetIndex:x.num;k=T*_*y/O;M=2*T*(-.5+(P+.5)/O)*_;S=T*_/O}else{k=T*_*y;M=0;S=T}}x.dPos=T;x.bPos=M;x.bdPos=k;x.wHover=S;var I;var R;var z=M+k;var N;var F;var j;var B;var H;var U;var V=Boolean(w);var q=(b.boxpoints||b.points)&&d>0;if(A==="positive"){I=T*(w?1:.5);N=z;R=N=M}else if(A==="negative"){I=N=M;R=T*(w?1:.5);F=z}else{I=R=T;N=F=z}if(q){var Y=b.pointpos;var G=b.jitter;var W=b.marker.size/2;var X=0;if(Y+G>=0){X=z*(Y+G);if(X>I){V=true;H=W;j=X}else if(X>N){H=W;j=I}}if(X<=I){j=I}var Z=0;if(Y-G<=0){Z=-z*(Y-G);if(Z>R){V=true;U=W;B=Z}else if(Z>F){U=W;B=R}}if(Z<=R){B=R}}else{j=I;B=R}var J=new Array(u.length);for(c=0;c<u.length;c++){J[c]=u[c].pos}b._extremes[o]=$.findExtremes(n,J,{padded:V,vpadminus:B,vpadplus:j,vpadLinearized:true,ppadminus:{x:U,y:H}[s],ppadplus:{x:H,y:U}[s]})}}t.exports={crossTraceCalc:n,setPositionOffset:p}},{"../../lib":285,"../../plots/cartesian/axes":331,"../../plots/cartesian/constraints":339}],403:[function(e,t,r){"use strict";var M=e("../../lib");var S=e("../../registry");var d=e("../../components/color");var h=e("../scatter/period_defaults");var s=e("../bar/defaults").handleGroupingDefaults;var C=e("../../plots/cartesian/axis_autotype");var L=e("./attributes");function n(r,n,e,t){function a(e,t){return M.coerce(r,n,L,e,t)}p(r,n,a,t);if(n.visible===false)return;h(r,n,t,a);a("xhoverformat");a("yhoverformat");var i=n._hasPreCompStats;if(i){a("lowerfence");a("upperfence")}a("line.color",(r.marker||{}).color||e);a("line.width");a("fillcolor",d.addOpacity(n.line.color,.5));var o=false;if(i){var s=a("mean");var l=a("sd");if(s&&s.length){o=true;if(l&&l.length)o="sd"}}a("boxmean",o);a("whiskerwidth");a("width");a("quartilemethod");var c=false;if(i){var u=a("notchspan");if(u&&u.length){c=true}}else if(M.validate(r.notchwidth,L.notchwidth)){c=true}var f=a("notched",c);if(f)a("notchwidth");v(r,n,a,{prefix:"box"})}function p(t,e,r,n){function a(e){var t=0;if(e&&e.length){t+=1;if(M.isArrayOrTypedArray(e[0])&&e[0].length){t+=1}}return t}function i(e){return M.validate(t[e],L[e])}var o=r("y");var s=r("x");var l;if(e.type==="box"){var c=r("q1");var u=r("median");var f=r("q3");e._hasPreCompStats=c&&c.length&&u&&u.length&&f&&f.length;l=Math.min(M.minRowLength(c),M.minRowLength(u),M.minRowLength(f))}var d=a(o);var h=a(s);var p=d&&M.minRowLength(o);var v=h&&M.minRowLength(s);var g=n.calendar;var m={autotypenumbers:n.autotypenumbers};var _,y;if(e._hasPreCompStats){switch(String(h)+String(d)){case"00":var b=i("x0")||i("dx");var x=i("y0")||i("dy");if(x&&!b){_="h"}else{_="v"}y=l;break;case"10":_="v";y=Math.min(l,v);break;case"20":_="h";y=Math.min(l,s.length);break;case"01":_="h";y=Math.min(l,p);break;case"02":_="v";y=Math.min(l,o.length);break;case"12":_="v";y=Math.min(l,v,o.length);break;case"21":_="h";y=Math.min(l,s.length,p);break;case"11":y=0;break;case"22":var w=false;var A;for(A=0;A<s.length;A++){if(C(s[A],g,m)==="category"){w=true;break}}if(w){_="v";y=Math.min(l,v,o.length)}else{for(A=0;A<o.length;A++){if(C(o[A],g,m)==="category"){w=true;break}}if(w){_="h";y=Math.min(l,s.length,p)}else{_="v";y=Math.min(l,v,o.length)}}break}}else if(d>0){_="v";if(h>0){y=Math.min(v,p)}else{y=Math.min(p)}}else if(h>0){_="h";y=Math.min(v)}else{y=0}if(!y){e.visible=false;return}e._length=y;var T=r("orientation",_);if(e._hasPreCompStats){if(T==="v"&&h===0){r("x0",0);r("dx",1)}else if(T==="h"&&d===0){r("y0",0);r("dy",1)}}else{if(T==="v"&&h===0){r("x0")}else if(T==="h"&&d===0){r("y0")}}var k=S.getComponentMethod("calendars","handleTraceDefaults");k(t,e,["x","y"],n)}function v(e,t,r,n){var a=n.prefix;var i=M.coerce2(e,t,L,"marker.outliercolor");var o=r("marker.line.outliercolor");var s="outliers";if(t._hasPreCompStats){s="all"}else if(i||o){s="suspectedoutliers"}var l=r(a+"points",s);if(l){r("jitter",l==="all"?.3:0);r("pointpos",l==="all"?-1.5:0);r("marker.symbol");r("marker.opacity");r("marker.size");r("marker.color",t.line.color);r("marker.line.color");r("marker.line.width");if(l==="suspectedoutliers"){r("marker.line.outliercolor",t.marker.color);r("marker.line.outlierwidth")}r("selected.marker.color");r("unselected.marker.color");r("selected.marker.size");r("unselected.marker.size");r("text");r("hovertext")}else{delete t.marker}var c=r("hoveron");if(c==="all"||c.indexOf("points")!==-1){r("hovertemplate")}M.coerceSelectionMarkerOpacity(t,r)}function a(e,t){var r,n;function a(e){return M.coerce(n._input,n,L,e)}for(var i=0;i<e.length;i++){n=e[i];var o=n.type;if(o==="box"||o==="violin"){r=n._input;if(t[o+"mode"]==="group"){s(r,n,t,a)}}}}t.exports={supplyDefaults:n,crossTraceDefaults:a,handleSampleDefaults:p,handlePointsDefaults:v}},{"../../components/color":155,"../../lib":285,"../../plots/cartesian/axis_autotype":332,"../../registry":373,"../bar/defaults":387,"../scatter/period_defaults":514,"./attributes":400}],404:[function(e,t,r){"use strict";t.exports=function e(t,r){if(r.hoverOnBox)t.hoverOnBox=r.hoverOnBox;if("xVal"in r)t.x=r.xVal;if("yVal"in r)t.y=r.yVal;if(r.xa)t.xaxis=r.xa;if(r.ya)t.yaxis=r.ya;return t}},{}],405:[function(e,t,r){"use strict";var U=e("../../plots/cartesian/axes");var V=e("../../lib");var q=e("../../components/fx");var Y=e("../../components/color");var M=V.fillText;function n(e,t,r,n){var a=e.cd;var i=a[0].trace;var o=i.hoveron;var s=[];var l;if(o.indexOf("boxes")!==-1){s=s.concat(c(e,t,r,n))}if(o.indexOf("points")!==-1){l=u(e,t,r)}if(n==="closest"){if(l)return[l];return s}if(l){s.push(l);return s}return s}function c(e,t,r,n){var a=e.cd;var i=e.xa;var o=e.ya;var s=a[0].trace;var l=a[0].t;var c=s.type==="violin";var u=[];var f,d,h,p,v,g,m,_,y,b,x;var w=l.bdPos;var A,T;var k=l.wHover;var M=function(e){return h.c2l(e.pos)+l.bPos-h.c2l(g)};if(c&&s.side!=="both"){if(s.side==="positive"){y=function(e){var t=M(e);return q.inbox(t,t+k,b)};A=w;T=0}if(s.side==="negative"){y=function(e){var t=M(e);return q.inbox(t-k,t,b)};A=0;T=w}}else{y=function(e){var t=M(e);return q.inbox(t-k,t+k,b)};A=T=w}var S;if(c){S=function(e){return q.inbox(e.span[0]-v,e.span[1]-v,b)}}else{S=function(e){return q.inbox(e.min-v,e.max-v,b)}}if(s.orientation==="h"){v=t;g=r;m=S;_=y;f="y";h=o;d="x";p=i}else{v=r;g=t;m=y;_=S;f="x";h=i;d="y";p=o}var C=Math.min(1,w/Math.abs(h.r2c(h.range[1])-h.r2c(h.range[0])));b=e.maxHoverDistance-C;x=e.maxSpikeDistance-C;function L(e){return(m(e)+_(e))/2}var E=q.getDistanceFunction(n,m,_,L);q.getClosest(a,E,e);if(e.index===false)return[];var D=a[e.index];var O=s.line.color;var P=(s.marker||{}).color;if(Y.opacity(O)&&s.line.width)e.color=O;else if(Y.opacity(P)&&s.boxpoints)e.color=P;else e.color=s.fillcolor;e[f+"0"]=h.c2p(D.pos+l.bPos-T,true);e[f+"1"]=h.c2p(D.pos+l.bPos+A,true);e[f+"LabelVal"]=D.orig_p!==undefined?D.orig_p:D.pos;var I=f+"Spike";e.spikeDistance=L(D)*x/b;e[I]=h.c2p(D.pos,true);var R={};var z=["med","q1","q3","min","max"];if(s.boxmean||(s.meanline||{}).visible){z.push("mean")}if(s.boxpoints||s.points){z.push("lf","uf")}for(var N=0;N<z.length;N++){var F=z[N];if(!(F in D)||D[F]in R)continue;R[D[F]]=true;var j=D[F];var B=p.c2p(j,true);var H=V.extendFlat({},e);H.attr=F;H[d+"0"]=H[d+"1"]=B;H[d+"LabelVal"]=j;H[d+"Label"]=(l.labels?l.labels[F]+" ":"")+U.hoverLabelText(p,j,s[d+"hoverformat"]);H.hoverOnBox=true;if(F==="mean"&&"sd"in D&&s.boxmean==="sd"){H[d+"err"]=D.sd}e.name="";e.spikeDistance=undefined;e[I]=undefined;H.hovertemplate=false;u.push(H)}return u}function u(e,t,r){var n=e.cd;var a=e.xa;var i=e.ya;var o=n[0].trace;var s=a.c2p(t);var l=i.c2p(r);var c;var u=function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(a.c2p(e.x)-s)-t,1-3/t)};var f=function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(i.c2p(e.y)-l)-t,1-3/t)};var d=q.quadrature(u,f);var h=false;var p,v;for(var g=0;g<n.length;g++){p=n[g];for(var m=0;m<(p.pts||[]).length;m++){v=p.pts[m];var _=d(v);if(_<=e.distance){e.distance=_;h=[g,m]}}}if(!h)return false;p=n[h[0]];v=p.pts[h[1]];var y=a.c2p(v.x,true);var b=i.c2p(v.y,true);var x=v.mrc||1;c=V.extendFlat({},e,{index:v.i,color:(o.marker||{}).color,name:o.name,x0:y-x,x1:y+x,y0:b-x,y1:b+x,spikeDistance:e.distance,hovertemplate:o.hovertemplate});var w=p.orig_p;var A=w!==undefined?w:p.pos;var T;if(o.orientation==="h"){T=i;c.xLabelVal=v.x;c.yLabelVal=A}else{T=a;c.xLabelVal=A;c.yLabelVal=v.y}var k=T._id.charAt(0);c[k+"Spike"]=T.c2p(p.pos,true);M(v,o,c);return c}t.exports={hoverPoints:n,hoverOnBoxes:c,hoverOnPoints:u}},{"../../components/color":155,"../../components/fx":195,"../../lib":285,"../../plots/cartesian/axes":331}],406:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults").supplyLayoutDefaults,calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"box",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":345,"./attributes":400,"./calc":401,"./cross_trace_calc":402,"./defaults":403,"./event_data":404,"./hover":405,"./layout_attributes":407,"./layout_defaults":408,"./plot":409,"./select":410,"./style":411}],407:[function(e,t,r){"use strict";t.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],408:[function(e,t,r){"use strict";var c=e("../../registry");var a=e("../../lib");var i=e("./layout_attributes");function o(e,t,r,n,a){var i=a+"Layout";var o=false;for(var s=0;s<r.length;s++){var l=r[s];if(c.traceIs(l,i)){o=true;break}}if(!o)return;n(a+"mode");n(a+"gap");n(a+"groupgap")}function n(r,n,e){function t(e,t){return a.coerce(r,n,i,e,t)}o(r,n,e,t,"box")}t.exports={supplyLayoutDefaults:n,_supply:o}},{"../../lib":285,"../../registry":373,"./layout_attributes":407}],409:[function(e,t,r){"use strict";var D=e("@plotly/d3");var O=e("../../lib");var l=e("../../components/drawing");var w=5;var A=.01;function n(e,t,r,n){var s=t.xaxis;var l=t.yaxis;O.makeTraceGroups(n,r,"trace boxes").each(function(e){var t=D.select(this);var r=e[0];var n=r.t;var a=r.trace;n.wdPos=n.bdPos*a.whiskerwidth;if(a.visible!==true||n.empty){t.remove();return}var i,o;if(a.orientation==="h"){i=l;o=s}else{i=s;o=l}c(t,{pos:i,val:o},a,n);u(t,{x:s,y:l},a,n);f(t,{pos:i,val:o},a,n)})}function c(e,t,_,r){var y=_.orientation==="h";var b=t.val;var x=t.pos;var w=!!x.rangebreaks;var A=r.bPos;var T=r.wdPos||0;var k=r.bPosPxOffset||0;var M=_.whiskerwidth||0;var S=_.notched||false;var C=S?1-2*_.notchwidth:1;var L;var E;if(Array.isArray(r.bdPos)){L=r.bdPos[0];E=r.bdPos[1]}else{L=r.bdPos;E=r.bdPos}var n=e.selectAll("path.box").data(_.type!=="violin"||_.box.visible?O.identity:[]);n.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box");n.exit().remove();n.each(function(e){if(e.empty)return"M0,0Z";var t=x.c2l(e.pos+A,true);var r=x.l2p(t-L)+k;var n=x.l2p(t+E)+k;var a=w?(r+n)/2:x.l2p(t)+k;var i=_.whiskerwidth;var o=w?r*i+(1-i)*a:x.l2p(t-T)+k;var s=w?n*i+(1-i)*a:x.l2p(t+T)+k;var l=x.l2p(t-L*C)+k;var c=x.l2p(t+E*C)+k;var u=b.c2p(e.q1,true);var f=b.c2p(e.q3,true);var d=O.constrain(b.c2p(e.med,true),Math.min(u,f)+1,Math.max(u,f)-1);var h=e.lf===undefined||_.boxpoints===false;var p=b.c2p(h?e.min:e.lf,true);var v=b.c2p(h?e.max:e.uf,true);var g=b.c2p(e.ln,true);var m=b.c2p(e.un,true);if(y){D.select(this).attr("d","M"+d+","+l+"V"+c+"M"+u+","+r+"V"+n+(S?"H"+g+"L"+d+","+c+"L"+m+","+n:"")+"H"+f+"V"+r+(S?"H"+m+"L"+d+","+l+"L"+g+","+r:"")+"Z"+"M"+u+","+a+"H"+p+"M"+f+","+a+"H"+v+(M===0?"":"M"+p+","+o+"V"+s+"M"+v+","+o+"V"+s))}else{D.select(this).attr("d","M"+l+","+d+"H"+c+"M"+r+","+u+"H"+n+(S?"V"+g+"L"+c+","+d+"L"+n+","+m:"")+"V"+f+"H"+r+(S?"V"+m+"L"+l+","+d+"L"+r+","+g:"")+"Z"+"M"+a+","+u+"V"+p+"M"+a+","+f+"V"+v+(M===0?"":"M"+o+","+p+"H"+s+"M"+o+","+v+"H"+s))}})}function u(e,t,_,r){var n=t.x;var a=t.y;var y=r.bdPos;var b=r.bPos;var x=_.boxpoints||_.points;O.seedPseudoRandom();var i=function(e){e.forEach(function(e){e.t=r;e.trace=_});return e};var o=e.selectAll("g.points").data(x?i:[]);o.enter().append("g").attr("class","points");o.exit().remove();var s=o.selectAll("path").data(function(e){var t;var r=e.pts2;var n=Math.max((e.max-e.min)/10,e.q3-e.q1);var a=n*1e-9;var i=n*A;var o=[];var s=0;var l;if(_.jitter){if(n===0){s=1;o=new Array(r.length);for(t=0;t<r.length;t++){o[t]=1}}else{for(t=0;t<r.length;t++){var c=Math.max(0,t-w);var u=r[c].v;var f=Math.min(r.length-1,t+w);var d=r[f].v;if(x!=="all"){if(r[t].v<e.lf)d=Math.min(d,e.lf);else u=Math.max(u,e.uf)}var h=Math.sqrt(i*(f-c)/(d-u+a))||0;h=O.constrain(Math.abs(h),0,1);o.push(h);s=Math.max(h,s)}}l=_.jitter*2/(s||1)}for(t=0;t<r.length;t++){var p=r[t];var v=p.v;var g=_.jitter?l*o[t]*(O.pseudoRandom()-.5):0;var m=e.pos+b+y*(_.pointpos+g);if(_.orientation==="h"){p.y=m;p.x=v}else{p.x=m;p.y=v}if(x==="suspectedoutliers"&&v<e.uo&&v>e.lo){p.so=true}}return r});s.enter().append("path").classed("point",true);s.exit().remove();s.call(l.translatePoints,n,a)}function f(e,t,l,r){var c=t.val;var u=t.pos;var f=!!u.rangebreaks;var d=r.bPos;var h=r.bPosPxOffset||0;var p=l.boxmean||(l.meanline||{}).visible;var v;var g;if(Array.isArray(r.bdPos)){v=r.bdPos[0];g=r.bdPos[1]}else{v=r.bdPos;g=r.bdPos}var n=e.selectAll("path.mean").data(l.type==="box"&&l.boxmean||l.type==="violin"&&l.box.visible&&l.meanline.visible?O.identity:[]);n.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"});n.exit().remove();n.each(function(e){var t=u.c2l(e.pos+d,true);var r=u.l2p(t-v)+h;var n=u.l2p(t+g)+h;var a=f?(r+n)/2:u.l2p(t)+h;var i=c.c2p(e.mean,true);var o=c.c2p(e.mean-e.sd,true);var s=c.c2p(e.mean+e.sd,true);if(l.orientation==="h"){D.select(this).attr("d","M"+i+","+r+"V"+n+(p==="sd"?"m0,0L"+o+","+a+"L"+i+","+r+"L"+s+","+a+"Z":""))}else{D.select(this).attr("d","M"+r+","+i+"H"+n+(p==="sd"?"m0,0L"+a+","+o+"L"+r+","+i+"L"+a+","+s+"Z":""))}})}t.exports={plot:n,plotBoxAndWhiskers:c,plotPoints:u,plotBoxMean:f}},{"../../components/drawing":177,"../../lib":285,"@plotly/d3":20}],410:[function(e,t,r){"use strict";t.exports=function e(t,r){var n=t.cd;var a=t.xaxis;var i=t.yaxis;var o=[];var s,l;if(r===false){for(s=0;s<n.length;s++){for(l=0;l<(n[s].pts||[]).length;l++){n[s].pts[l].selected=0}}}else{for(s=0;s<n.length;s++){for(l=0;l<(n[s].pts||[]).length;l++){var c=n[s].pts[l];var u=a.c2p(c.x);var f=i.c2p(c.y);if(r.contains([u,f],null,c.i,t)){o.push({pointNumber:c.i,x:a.c2d(c.x),y:i.c2d(c.y)});c.selected=1}else{c.selected=0}}}}return o}},{}],411:[function(e,t,r){"use strict";var l=e("@plotly/d3");var c=e("../../components/color");var u=e("../../components/drawing");function n(s,e,t){var r=t?t:l.select(s).selectAll("g.trace.boxes");r.style("opacity",function(e){return e[0].trace.opacity});r.each(function(e){var t=l.select(this);var n=e[0].trace;var r=n.line.width;function a(e,t,r,n){e.style("stroke-width",t+"px").call(c.stroke,r).call(c.fill,n)}var i=t.selectAll("path.box");if(n.type==="candlestick"){i.each(function(e){if(e.empty)return;var t=l.select(this);var r=n[e.dir];a(t,r.line.width,r.line.color,r.fillcolor);t.style("opacity",n.selectedpoints&&!e.selected?.3:1)})}else{a(i,r,n.line.color,n.fillcolor);t.selectAll("path.mean").style({"stroke-width":r,"stroke-dasharray":2*r+"px,"+r+"px"}).call(c.stroke,n.line.color);var o=t.selectAll("path.point");u.pointStyle(o,n,s)}})}function a(e,t,r){var n=t[0].trace;var a=r.selectAll("path.point");if(n.selectedpoints){u.selectedPointStyle(a,n)}else{u.pointStyle(a,n,e)}}t.exports={style:n,styleOnSelect:a}},{"../../components/color":155,"../../components/drawing":177,"@plotly/d3":20}],412:[function(e,t,r){"use strict";var n=e("../heatmap/attributes");var a=e("../scatter/attributes");var i=e("../../plots/cartesian/axis_format_attributes");var o=i.axisHoverFormat;var s=i.descriptionOnlyNumbers;var l=e("../../components/colorscale/attributes");var c=e("../../components/drawing/attributes").dash;var u=e("../../plots/font_attributes");var f=e("../../lib/extend").extendFlat;var d=e("../../constants/filter_ops");var h=d.COMPARISON_OPS2;var p=d.INTERVAL_OPS;var v=a.line;t.exports=f({z:n.z,x:n.x,x0:n.x0,dx:n.dx,y:n.y,y0:n.y0,dy:n.dy,xperiod:n.xperiod,yperiod:n.yperiod,xperiod0:a.xperiod0,yperiod0:a.yperiod0,xperiodalignment:n.xperiodalignment,yperiodalignment:n.yperiodalignment,text:n.text,hovertext:n.hovertext,transpose:n.transpose,xtype:n.xtype,ytype:n.ytype,xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z",1),hovertemplate:n.hovertemplate,hoverongaps:n.hoverongaps,connectgaps:f({},n.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:true,editType:"calc",impliedEdits:{"contours.start":undefined,"contours.end":undefined,"contours.size":undefined}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":false}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":false}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":false}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:true,editType:"plot"},showlabels:{valType:"boolean",dflt:false,editType:"plot"},labelfont:u({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:s("contour label")},operation:{valType:"enumerated",values:[].concat(h).concat(p),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:false}},line:{color:f({},v.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:c,smoothing:f({},v.smoothing,{}),editType:"plot"}},l("",{cLetter:"z",autoColorDflt:false,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":162,"../../components/drawing/attributes":176,"../../constants/filter_ops":263,"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../../plots/font_attributes":360,"../heatmap/attributes":434,"../scatter/attributes":494}],413:[function(e,t,r){"use strict";var p=e("../../components/colorscale");var v=e("../heatmap/calc");var g=e("./set_contours");var m=e("./end_plus");t.exports=function e(t,r){var n=v(t,r);var a=n[0].z;g(r,a);var i=r.contours;var o=p.extractOpts(r);var s;if(i.coloring==="heatmap"&&o.auto&&r.autocontour===false){var l=i.start;var c=m(i);var u=i.size||1;var f=Math.floor((c-l)/u)+1;if(!isFinite(u)){u=1;f=1}var d=l-u/2;var h=d+f*u;s=[d,h]}else{s=a}p.calc(t,r,{vals:s,cLetter:"z"});return n}},{"../../components/colorscale":167,"../heatmap/calc":435,"./end_plus":423,"./set_contours":431}],414:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e[0];var n=r.z;var a;switch(t.type){case"levels":var i=Math.min(n[0][0],n[0][1]);for(a=0;a<e.length;a++){var o=e[a];o.prefixBoundary=!o.edgepaths.length&&(i>o.level||o.starts.length&&i===o.level)}break;case"constraint":r.prefixBoundary=false;if(r.edgepaths.length)return;var s=r.x.length;var l=r.y.length;var c=-Infinity;var u=Infinity;for(a=0;a<l;a++){u=Math.min(u,n[a][0]);u=Math.min(u,n[a][s-1]);c=Math.max(c,n[a][0]);c=Math.max(c,n[a][s-1])}for(a=1;a<s-1;a++){u=Math.min(u,n[0][a]);u=Math.min(u,n[l-1][a]);c=Math.max(c,n[0][a]);c=Math.max(c,n[l-1][a])}var f=t.value;var d,h;switch(t._operation){case">":if(f>c){r.prefixBoundary=true}break;case"<":if(f<u||r.starts.length&&f===u){r.prefixBoundary=true}break;case"[]":d=Math.min(f[0],f[1]);h=Math.max(f[0],f[1]);if(h<u||d>c||r.starts.length&&h===u){r.prefixBoundary=true}break;case"][":d=Math.min(f[0],f[1]);h=Math.max(f[0],f[1]);if(d<u&&h>c){r.prefixBoundary=true}break}break}}},{}],415:[function(e,t,r){"use strict";var c=e("../../components/colorscale");var u=e("./make_color_map");var f=e("./end_plus");function n(e,t,r){var n=t.contours;var a=t.line;var i=n.size||1;var o=n.coloring;var s=u(t,{isColorbar:true});if(o==="heatmap"){var l=c.extractOpts(t);r._fillgradient=l.reversescale?c.flipScale(l.colorscale):l.colorscale;r._zrange=[l.min,l.max]}else if(o==="fill"){r._fillcolor=s}r._line={color:o==="lines"?s:a.color,width:n.showlines!==false?a.width:0,dash:a.dash};r._levels={start:n.start,end:f(n),size:i}}t.exports={min:"zmin",max:"zmax",calc:n}},{"../../components/colorscale":167,"./end_plus":423,"./make_color_map":428}],416:[function(e,t,r){"use strict";t.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],417:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var h=e("./label_defaults");var a=e("../../components/color");var p=a.addOpacity;var v=a.opacity;var i=e("../../constants/filter_ops");var g=i.CONSTRAINT_REDUCTION;var o=i.COMPARISON_OPS2;t.exports=function e(t,r,n,a,i,o){var s=r.contours;var l,c,u;var f=n("contours.operation");s._operation=g[f];m(n,s);if(f==="="){l=s.showlines=true}else{l=n("contours.showlines");u=n("fillcolor",p((t.line||{}).color||i,.5))}if(l){var d=u&&v(u)?p(r.fillcolor,1):i;c=n("line.color",d);n("line.width",2);n("line.dash")}n("line.smoothing");h(n,a,c,o)};function m(e,t){var r;if(o.indexOf(t.operation)===-1){e("contours.value",[0,1]);if(!Array.isArray(t.value)){if(n(t.value)){r=parseFloat(t.value);t.value=[r,r+1]}}else if(t.value.length>2){t.value=t.value.slice(2)}else if(t.length===0){t.value=[0,1]}else if(t.length<2){r=parseFloat(t.value[0]);t.value=[r,r+1]}else{t.value=[parseFloat(t.value[0]),parseFloat(t.value[1])]}}else{e("contours.value",0);if(!n(t.value)){if(Array.isArray(t.value)){t.value=parseFloat(t.value[0])}else{t.value=0}}}}},{"../../components/color":155,"../../constants/filter_ops":263,"./label_defaults":427,"fast-isnumeric":31}],418:[function(e,t,r){"use strict";var i=e("../../constants/filter_ops");var o=e("fast-isnumeric");t.exports={"[]":n("[]"),"][":n("]["),">":s(">"),"<":s("<"),"=":s("=")};function a(e,t){var r=Array.isArray(t);var n;function a(e){return o(e)?+e:null}if(i.COMPARISON_OPS2.indexOf(e)!==-1){n=r?a(t[0]):a(t)}else if(i.INTERVAL_OPS.indexOf(e)!==-1){n=r?[a(t[0]),a(t[1])]:[a(t),a(t)]}else if(i.SET_OPS.indexOf(e)!==-1){n=r?t.map(a):[a(t)]}return n}function n(n){return function(e){e=a(n,e);var t=Math.min(e[0],e[1]);var r=Math.max(e[0],e[1]);return{start:t,end:r,size:r-t}}}function s(t){return function(e){e=a(t,e);return{start:e,end:Infinity,size:Infinity}}}},{"../../constants/filter_ops":263,"fast-isnumeric":31}],419:[function(e,t,r){"use strict";t.exports=function e(t,r,n,a){var i=a("contours.start");var o=a("contours.end");var s=i===false||o===false;var l=n("contours.size");var c;if(s)c=r.autocontour=true;else c=n("autocontour",false);if(c||!l)n("ncontours")}},{}],420:[function(e,t,r){"use strict";var l=e("../../lib");t.exports=function(e,t){var r,n,a;var i=function(e){return e.reverse()};var o=function(e){return e};switch(t){case"=":case"<":return e;case">":if(e.length!==1){l.warn("Contour data invalid for the specified inequality operation.")}n=e[0];for(r=0;r<n.edgepaths.length;r++){n.edgepaths[r]=i(n.edgepaths[r])}for(r=0;r<n.paths.length;r++){n.paths[r]=i(n.paths[r])}for(r=0;r<n.starts.length;r++){n.starts[r]=i(n.starts[r])}return e;case"][":var s=i;i=o;o=s;case"[]":if(e.length!==2){l.warn("Contour data invalid for the specified inequality range operation.")}n=c(e[0]);a=c(e[1]);for(r=0;r<n.edgepaths.length;r++){n.edgepaths[r]=i(n.edgepaths[r])}for(r=0;r<n.paths.length;r++){n.paths[r]=i(n.paths[r])}for(r=0;r<n.starts.length;r++){n.starts[r]=i(n.starts[r])}while(a.edgepaths.length){n.edgepaths.push(o(a.edgepaths.shift()))}while(a.paths.length){n.paths.push(o(a.paths.shift()))}while(a.starts.length){n.starts.push(o(a.starts.shift()))}return[n]}};function c(e){return l.extendFlat({},e,{edgepaths:l.extendDeep([],e.edgepaths),paths:l.extendDeep([],e.paths),starts:l.extendDeep([],e.starts)})}},{"../../lib":285}],421:[function(e,t,r){"use strict";var c=e("../../lib");var u=e("../heatmap/xyz_defaults");var f=e("../scatter/period_defaults");var d=e("./constraint_defaults");var h=e("./contours_defaults");var p=e("./style_defaults");var v=e("./attributes");t.exports=function e(r,n,t,a){function i(e,t){return c.coerce(r,n,v,e,t)}function o(e){return c.coerce2(r,n,v,e)}var s=u(r,n,i,a);if(!s){n.visible=false;return}f(r,n,a,i);i("xhoverformat");i("yhoverformat");i("text");i("hovertext");i("hovertemplate");i("hoverongaps");var l=i("contours.type")==="constraint";i("connectgaps",c.isArray1D(n.z));if(l){d(r,n,i,a,t)}else{h(r,n,i,o);p(r,n,i,a)}}},{"../../lib":285,"../heatmap/xyz_defaults":448,"../scatter/period_defaults":514,"./attributes":412,"./constraint_defaults":417,"./contours_defaults":419,"./style_defaults":433}],422:[function(e,t,r){"use strict";var f=e("../../lib");var d=e("./constraint_mapping");var h=e("./end_plus");t.exports=function e(t,r,n){var a=t.type==="constraint"?d[t._operation](t.value):t;var i=a.size;var o=[];var s=h(a);var l=n.trace._carpetTrace;var c=l?{xaxis:l.aaxis,yaxis:l.baxis,x:n.a,y:n.b}:{xaxis:r.xaxis,yaxis:r.yaxis,x:n.x,y:n.y};for(var u=a.start;u<s;u+=i){o.push(f.extendFlat({level:u,crossings:{},starts:[],edgepaths:[],paths:[],z:n.z,smoothing:n.trace.line.smoothing},c));if(o.length>1e3){f.warn("Too many contours, clipping at 1000",t);break}}return o}},{"../../lib":285,"./constraint_mapping":418,"./end_plus":423}],423:[function(e,t,r){"use strict";t.exports=function e(t){return t.end+t.size/1e6}},{}],424:[function(e,t,r){"use strict";var z=e("../../lib");var N=e("./constants");t.exports=function e(t,r,n){var a,i,o,s,l;r=r||.01;n=n||.01;for(o=0;o<t.length;o++){s=t[o];for(l=0;l<s.starts.length;l++){i=s.starts[l];c(s,i,"edge",r,n)}a=0;while(Object.keys(s.crossings).length&&a<1e4){a++;i=Object.keys(s.crossings)[0].split(",").map(Number);c(s,i,undefined,r,n)}if(a===1e4)z.log("Infinite loop in contour?")}};function F(e,t,r,n){return Math.abs(e[0]-t[0])<r&&Math.abs(e[1]-t[1])<n}function j(e,t){var r=e[2]-t[2];var n=e[3]-t[3];return Math.sqrt(r*r+n*n)}function c(e,t,r,n,a){var i=t.join(",");var o=e.crossings[i];var s=B(o,r,t);var l=[H(e,t,[-s[0],-s[1]])];var c=e.z.length;var u=e.z[0].length;var f=t.slice();var d=s.slice();var h;for(h=0;h<1e4;h++){if(o>20){o=N.CHOOSESADDLE[o][(s[0]||s[1])<0?0:1];e.crossings[i]=N.SADDLEREMAINDER[o]}else{delete e.crossings[i]}s=N.NEWDELTA[o];if(!s){z.log("Found bad marching index:",o,t,e.level);break}l.push(H(e,t,s));t[0]+=s[0];t[1]+=s[1];i=t.join(",");if(F(l[l.length-1],l[l.length-2],n,a))l.pop();var p=s[0]&&(t[0]<0||t[0]>u-2)||s[1]&&(t[1]<0||t[1]>c-2);var v=t[0]===f[0]&&t[1]===f[1]&&s[0]===d[0]&&s[1]===d[1];if(v||r&&p)break;o=e.crossings[i]}if(h===1e4){z.log("Infinite loop in contour?")}var g=F(l[0],l[l.length-1],n,a);var m=0;var _=.2*e.smoothing;var y=[];var b=0;var x,w,A,T,k,M,S,C,L,E,D;for(h=1;h<l.length;h++){S=j(l[h],l[h-1]);m+=S;y.push(S)}var O=m/y.length*_;function P(e){return l[e%l.length]}for(h=l.length-2;h>=b;h--){x=y[h];if(x<O){A=0;for(w=h-1;w>=b;w--){if(x+y[w]<O){x+=y[w]}else break}if(g&&h===l.length-2){for(A=0;A<w;A++){if(x+y[A]<O){x+=y[A]}else break}}k=h-w+A+1;M=Math.floor((h+w+A+2)/2);if(!g&&h===l.length-2)T=l[l.length-1];else if(!g&&w===-1)T=l[0];else if(k%2)T=P(M);else{T=[(P(M)[0]+P(M+1)[0])/2,(P(M)[1]+P(M+1)[1])/2]}l.splice(w+1,h-w+1,T);h=w+1;if(A)b=A;if(g){if(h===l.length-2)l[A]=l[l.length-1];else if(h===0)l[l.length-1]=l[0]}}}l.splice(0,b);for(h=0;h<l.length;h++)l[h].length=2;if(l.length<2)return;else if(g){l.pop();e.paths.push(l)}else{if(!r){z.log("Unclosed interior contour?",e.level,f.join(","),l.join("L"))}var I=false;for(C=0;C<e.edgepaths.length;C++){E=e.edgepaths[C];if(!I&&F(E[0],l[l.length-1],n,a)){l.pop();I=true;var R=false;for(L=0;L<e.edgepaths.length;L++){D=e.edgepaths[L];if(F(D[D.length-1],l[0],n,a)){R=true;l.shift();e.edgepaths.splice(C,1);if(L===C){e.paths.push(l.concat(D))}else{if(L>C)L--;e.edgepaths[L]=D.concat(l,E)}break}}if(!R){e.edgepaths[C]=l.concat(E)}}}for(C=0;C<e.edgepaths.length;C++){if(I)break;E=e.edgepaths[C];if(F(E[E.length-1],l[0],n,a)){l.shift();e.edgepaths[C]=E.concat(l);I=true}}if(!I)e.edgepaths.push(l)}}function B(e,t,r){var n=0;var a=0;if(e>20&&t){if(e===208||e===1114){n=r[0]===0?1:-1}else{a=r[1]===0?1:-1}}else if(N.BOTTOMSTART.indexOf(e)!==-1)a=1;else if(N.LEFTSTART.indexOf(e)!==-1)n=1;else if(N.TOPSTART.indexOf(e)!==-1)a=-1;else n=-1;return[n,a]}function H(e,t,r){var n=t[0]+Math.max(r[0],0);var a=t[1]+Math.max(r[1],0);var i=e.z[a][n];var o=e.xaxis;var s=e.yaxis;if(r[1]){var l=(e.level-i)/(e.z[a][n+1]-i);return[o.c2p((1-l)*e.x[n]+l*e.x[n+1],true),s.c2p(e.y[a],true),n+l,a]}else{var c=(e.level-i)/(e.z[a+1][n]-i);return[o.c2p(e.x[n],true),s.c2p((1-c)*e.y[a]+c*e.y[a+1],true),n,a+c]}}},{"../../lib":285,"./constants":416}],425:[function(e,t,r){"use strict";var s=e("../../components/color");var l=e("../heatmap/hover");t.exports=function e(t,r,n,a,i){if(!i)i={};i.isContour=true;var o=l(t,r,n,a,i);if(o){o.forEach(function(e){var t=e.trace;if(t.contours.type==="constraint"){if(t.fillcolor&&s.opacity(t.fillcolor)){e.color=s.addOpacity(t.fillcolor,1)}else if(t.contours.showlines&&s.opacity(t.line.color)){e.color=s.addOpacity(t.line.color,1)}}})}return o}},{"../../components/color":155,"../heatmap/hover":441}],426:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot").plot,style:e("./style"),colorbar:e("./colorbar"),hoverPoints:e("./hover"),moduleType:"trace",name:"contour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":345,"./attributes":412,"./calc":413,"./colorbar":415,"./defaults":421,"./hover":425,"./plot":430,"./style":432}],427:[function(e,t,r){"use strict";var s=e("../../lib");t.exports=function e(t,r,n,a){if(!a)a={};var i=t("contours.showlabels");if(i){var o=r.font;s.coerceFont(t,"contours.labelfont",{family:o.family,size:o.size,color:n});t("contours.labelformat")}if(a.hasHover!==false)t("zhoverformat")}},{"../../lib":285}],428:[function(e,t,r){"use strict";var b=e("@plotly/d3");var x=e("../../components/colorscale");var w=e("./end_plus");t.exports=function e(t){var r=t.contours;var n=r.start;var a=w(r);var i=r.size||1;var o=Math.floor((a-n)/i)+1;var s=r.coloring==="lines"?0:1;var l=x.extractOpts(t);if(!isFinite(i)){i=1;o=1}var c=l.reversescale?x.flipScale(l.colorscale):l.colorscale;var u=c.length;var f=new Array(u);var d=new Array(u);var h,p;if(r.coloring==="heatmap"){var v=l.min;var g=l.max;for(p=0;p<u;p++){h=c[p];f[p]=h[0]*(g-v)+v;d[p]=h[1]}var m=b.extent([v,g,r.start,r.start+i*(o-1)]);var _=m[v<g?0:1];var y=m[v<g?1:0];if(_!==v){f.splice(0,0,_);d.splice(0,0,d[0])}if(y!==g){f.push(y);d.push(d[d.length-1])}}else{for(p=0;p<u;p++){h=c[p];f[p]=(h[0]*(o+s-1)-s/2)*i+n;d[p]=h[1]}}return x.makeColorScaleFunc({domain:f,range:d},{noNumericCheck:true})}},{"../../components/colorscale":167,"./end_plus":423,"@plotly/d3":20}],429:[function(e,t,r){"use strict";var v=e("./constants");t.exports=function e(t){var r=t[0].z;var n=r.length;var a=r[0].length;var i=n===2||a===2;var o;var s;var l;var c;var u;var f;var d;var h;var p;for(s=0;s<n-1;s++){c=[];if(s===0)c=c.concat(v.BOTTOMSTART);if(s===n-2)c=c.concat(v.TOPSTART);for(o=0;o<a-1;o++){l=c.slice();if(o===0)l=l.concat(v.LEFTSTART);if(o===a-2)l=l.concat(v.RIGHTSTART);u=o+","+s;f=[[r[s][o],r[s][o+1]],[r[s+1][o],r[s+1][o+1]]];for(p=0;p<t.length;p++){h=t[p];d=g(h.level,f);if(!d)continue;h.crossings[u]=d;if(l.indexOf(d)!==-1){h.starts.push([o,s]);if(i&&l.indexOf(d,l.indexOf(d)+1)!==-1){h.starts.push([o,s])}}}}}};function g(e,t){var r=(t[0][0]>e?0:1)+(t[0][1]>e?0:2)+(t[1][1]>e?0:4)+(t[1][0]>e?0:8);if(r===5||r===10){var n=(t[0][0]+t[0][1]+t[1][0]+t[1][1])/4;if(e>n)return r===5?713:1114;return r===5?104:208}return r===15?0:r}},{"./constants":416}],430:[function(e,t,P){"use strict";var I=e("@plotly/d3");var R=e("../../lib");var z=e("../../components/drawing");var l=e("../../components/colorscale");var c=e("../../lib/svg_text_utils");var u=e("../../plots/cartesian/axes");var f=e("../../plots/cartesian/set_convert");var b=e("../heatmap/plot");var x=e("./make_crossings");var w=e("./find_all_paths");var A=e("./empty_pathinfo");var T=e("./convert_to_constraints");var d=e("./close_boundaries");var N=e("./constants");var M=N.LABELOPTIMIZER;P.plot=function e(g,m,t,r){var _=m.xaxis;var y=m.yaxis;R.makeTraceGroups(r,t,"contour").each(function(e){var t=I.select(this);var r=e[0];var n=r.trace;var a=r.x;var i=r.y;var o=n.contours;var s=A(o,m,r);var l=R.ensureSingle(t,"g","heatmapcoloring");var c=[];if(o.coloring==="heatmap"){c=[e]}b(g,m,c,l);x(s);w(s);var u=_.c2p(a[0],true);var f=_.c2p(a[a.length-1],true);var d=y.c2p(i[0],true);var h=y.c2p(i[i.length-1],true);var p=[[u,h],[f,h],[f,d],[u,d]];var v=s;if(o.type==="constraint"){v=T(s,o._operation)}k(t,p,o);S(t,v,p,o);C(t,s,g,r,o);L(t,m,g,r,p)})};function k(e,t,r){var n=R.ensureSingle(e,"g","contourbg");var a=n.selectAll("path").data(r.coloring==="fill"?[0]:[]);a.enter().append("path");a.exit().remove();a.attr("d","M"+t.join("L")+"Z").style("stroke","none")}function S(e,t,r,n){var a=n.coloring==="fill"||n.type==="constraint"&&n._operation!=="=";var i="M"+r.join("L")+"Z";if(a){d(t,n)}var o=R.ensureSingle(e,"g","contourfill");var s=o.selectAll("path").data(a?t:[]);s.enter().append("path");s.exit().remove();s.each(function(e){var t=(e.prefixBoundary?i:"")+h(e,r);if(!t){I.select(this).remove()}else{I.select(this).attr("d",t).style("stroke","none")}})}function h(e,t){var r="";var n=0;var a=e.edgepaths.map(function(e,t){return t});var i=true;var o;var s;var l;var c;var u;var f;function d(e){return Math.abs(e[1]-t[0][1])<.01}function h(e){return Math.abs(e[1]-t[2][1])<.01}function p(e){return Math.abs(e[0]-t[0][0])<.01}function v(e){return Math.abs(e[0]-t[2][0])<.01}while(a.length){f=z.smoothopen(e.edgepaths[n],e.smoothing);r+=i?f:f.replace(/^M/,"L");a.splice(a.indexOf(n),1);o=e.edgepaths[n][e.edgepaths[n].length-1];c=-1;for(l=0;l<4;l++){if(!o){R.log("Missing end?",n,e);break}if(d(o)&&!v(o))s=t[1];else if(p(o))s=t[0];else if(h(o))s=t[3];else if(v(o))s=t[2];for(u=0;u<e.edgepaths.length;u++){var g=e.edgepaths[u][0];if(Math.abs(o[0]-s[0])<.01){if(Math.abs(o[0]-g[0])<.01&&(g[1]-o[1])*(s[1]-g[1])>=0){s=g;c=u}}else if(Math.abs(o[1]-s[1])<.01){if(Math.abs(o[1]-g[1])<.01&&(g[0]-o[0])*(s[0]-g[0])>=0){s=g;c=u}}else{R.log("endpt to newendpt is not vert. or horz.",o,s,g)}}o=s;if(c>=0)break;r+="L"+s}if(c===e.edgepaths.length){R.log("unclosed perimeter path");break}n=c;i=a.indexOf(n)===-1;if(i){n=a[0];r+="Z"}}for(n=0;n<e.paths.length;n++){r+=z.smoothclosed(e.paths[n],e.smoothing)}return r}function C(e,t,r,n,a){var i=R.ensureSingle(e,"g","contourlines");var o=a.showlines!==false;var s=a.showlabels;var l=o&&s;var c=P.createLines(i,o||s,t);var u=P.createLineClip(i,l,r,n.trace.uid);var f=e.selectAll("g.contourlabels").data(s?[0]:[]);f.exit().remove();f.enter().append("g").classed("contourlabels",true);if(s){var d=[];var h=[];R.clearLocationCache();var p=P.labelFormatter(r,n);var v=z.tester.append("text").attr("data-notex",1).call(z.font,a.labelfont);var g=t[0].xaxis;var m=t[0].yaxis;var _=g._length;var y=m._length;var b=g.range;var x=m.range;var w=R.aggNums(Math.min,null,n.x);var A=R.aggNums(Math.max,null,n.x);var T=R.aggNums(Math.min,null,n.y);var k=R.aggNums(Math.max,null,n.y);var M=Math.max(g.c2p(w,true),0);var S=Math.min(g.c2p(A,true),_);var C=Math.max(m.c2p(k,true),0);var L=Math.min(m.c2p(T,true),y);var E={};if(b[0]<b[1]){E.left=M;E.right=S}else{E.left=S;E.right=M}if(x[0]<x[1]){E.top=C;E.bottom=L}else{E.top=L;E.bottom=C}E.middle=(E.top+E.bottom)/2;E.center=(E.left+E.right)/2;d.push([[E.left,E.top],[E.right,E.top],[E.right,E.bottom],[E.left,E.bottom]]);var D=Math.sqrt(_*_+y*y);var O=N.LABELDISTANCE*D/Math.max(1,t.length/N.LABELINCREASE);c.each(function(e){var i=P.calcTextOpts(e.level,p,v,r);I.select(this).selectAll("path").each(function(){var e=this;var t=R.getVisibleSegment(e,E,i.height/2);if(!t)return;if(t.len<(i.width+i.height)*N.LABELMIN)return;var r=Math.min(Math.ceil(t.len/O),N.LABELMAX);for(var n=0;n<r;n++){var a=P.findBestTextLocation(e,t,i,h,E);if(!a)break;P.addLabelData(a,i,h,d)}})});v.remove();P.drawLabels(f,h,r,u,l?d:null)}if(s&&!o)c.remove()}P.createLines=function(e,t,r){var n=r[0].smoothing;var a=e.selectAll("g.contourlevel").data(t?r:[]);a.exit().remove();a.enter().append("g").classed("contourlevel",true);if(t){var i=a.selectAll("path.openline").data(function(e){return e.pedgepaths||e.edgepaths});i.exit().remove();i.enter().append("path").classed("openline",true);i.attr("d",function(e){return z.smoothopen(e,n)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var o=a.selectAll("path.closedline").data(function(e){return e.ppaths||e.paths});o.exit().remove();o.enter().append("path").classed("closedline",true);o.attr("d",function(e){return z.smoothclosed(e,n)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return a};P.createLineClip=function(e,t,r,n){var a=r._fullLayout._clips;var i=t?"clipline"+n:null;var o=a.selectAll("#"+i).data(t?[0]:[]);o.exit().remove();o.enter().append("clipPath").classed("contourlineclip",true).attr("id",i);z.setClipUrl(e,i,r);return o};P.labelFormatter=function(e,t){var r=e._fullLayout;var n=t.trace;var a=n.contours;var i={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(a.labelformat){i.tickformat=a.labelformat;f(i,r)}else{var o=l.extractOpts(n);if(o&&o.colorbar&&o.colorbar._axis){i=o.colorbar._axis}else{if(a.type==="constraint"){var s=a.value;if(Array.isArray(s)){i.range=[s[0],s[s.length-1]]}else i.range=[s,s]}else{i.range=[a.start,a.end];i.nticks=(a.end-a.start)/a.size}if(i.range[0]===i.range[1]){i.range[1]+=i.range[0]||1}if(!i.nticks)i.nticks=1e3;f(i,r);u.prepTicks(i);i._tmin=null;i._tmax=null}}return function(e){return u.tickText(i,e).text}};P.calcTextOpts=function(e,t,r,n){var a=t(e);r.text(a).call(c.convertToTspans,n);var i=r.node();var o=z.bBox(i,true);return{text:a,width:o.width,height:o.height,fontSize:+i.style["font-size"].replace("px",""),level:e,dy:(o.top+o.bottom)/2}};P.findBestTextLocation=function(e,t,r,n,a){var i=r.width;var o,s,l,c,u;if(t.isClosed){s=t.len/M.INITIALSEARCHPOINTS;o=t.min+s/2;l=t.max}else{s=(t.len-i)/(M.INITIALSEARCHPOINTS+1);o=t.min+s+i/2;l=t.max-(s+i)/2}var f=Infinity;for(var d=0;d<M.ITERATIONS;d++){for(var h=o;h<l;h+=s){var p=R.getTextLocation(e,t.total,h,i);var v=g(p,r,n,a);if(v<f){f=v;u=p;c=h}}if(f>M.MAXCOST*2)break;if(d)s/=2;o=c-s/2;l=o+s*1.5}if(f<=M.MAXCOST)return u};function g(e,t,r,n){var a=t.width/2;var i=t.height/2;var o=e.x;var s=e.y;var l=e.theta;var c=Math.cos(l)*a;var u=Math.sin(l)*a;var f=(o>n.center?n.right-o:o-n.left)/(c+Math.abs(Math.sin(l)*i));var d=(s>n.middle?n.bottom-s:s-n.top)/(Math.abs(u)+Math.cos(l)*i);if(f<1||d<1)return Infinity;var h=M.EDGECOST*(1/(f-1)+1/(d-1));h+=M.ANGLECOST*l*l;var p=o-c;var v=s-u;var g=o+c;var m=s+u;for(var _=0;_<r.length;_++){var y=r[_];var b=Math.cos(y.theta)*y.width/2;var x=Math.sin(y.theta)*y.width/2;var w=R.segmentDistance(p,v,g,m,y.x-b,y.y-x,y.x+b,y.y+x)*2/(t.height+y.height);var A=y.level===t.level;var T=A?M.SAMELEVELDISTANCE:1;if(w<=T)return Infinity;var k=M.NEIGHBORCOST*(A?M.SAMELEVELFACTOR:1);h+=k/(w-T)}return h}P.addLabelData=function(e,t,r,n){var a=t.fontSize;var i=t.width+a/3;var o=Math.max(0,t.height-a/3);var s=e.x;var l=e.y;var c=e.theta;var u=Math.sin(c);var f=Math.cos(c);var d=function(e,t){return[s+e*f-t*u,l+e*u+t*f]};var h=[d(-i/2,-o/2),d(-i/2,o/2),d(i/2,o/2),d(i/2,-o/2)];r.push({text:t.text,x:s,y:l,dy:t.dy,theta:c,level:t.level,width:i,height:o});n.push(h)};P.drawLabels=function(e,t,n,r,a){var i=e.selectAll("text").data(t,function(e){return e.text+","+e.x+","+e.y+","+e.theta});i.exit().remove();i.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(e){var t=e.x+Math.sin(e.theta)*e.dy;var r=e.y-Math.cos(e.theta)*e.dy;I.select(this).text(e.text).attr({x:t,y:r,transform:"rotate("+180*e.theta/Math.PI+" "+t+" "+r+")"}).call(c.convertToTspans,n)});if(a){var o="";for(var s=0;s<a.length;s++){o+="M"+a[s].join("L")+"Z"}var l=R.ensureSingle(r,"path","");l.attr("d",o)}};function L(e,t,r,n,a){var i=n.trace;var o=r._fullLayout._clips;var s="clip"+i.uid;var l=o.selectAll("#"+s).data(i.connectgaps?[]:[0]);l.enter().append("clipPath").classed("contourclip",true).attr("id",s);l.exit().remove();if(i.connectgaps===false){var c={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:t.xaxis,yaxis:t.yaxis,x:n.x,y:n.y,z:p(n),smoothing:0};x([c]);w([c]);d([c],{type:"levels"});var u=R.ensureSingle(l,"path","");u.attr("d",(c.prefixBoundary?"M"+a.join("L")+"Z":"")+h(c,a))}else s=null;z.setClipUrl(e,s,r)}function p(e){var t=e.trace._emptypoints;var r=[];var n=e.z.length;var a=e.z[0].length;var i;var o=[];var s;for(i=0;i<a;i++)o.push(1);for(i=0;i<n;i++)r.push(o.slice());for(i=0;i<t.length;i++){s=t[i];r[s[0]][s[1]]=0}e.zmask=r;return r}},{"../../components/colorscale":167,"../../components/drawing":177,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/cartesian/axes":331,"../../plots/cartesian/set_convert":352,"../heatmap/plot":445,"./close_boundaries":414,"./constants":416,"./convert_to_constraints":420,"./empty_pathinfo":422,"./find_all_paths":424,"./make_crossings":429,"@plotly/d3":20}],431:[function(e,t,r){"use strict";var f=e("../../plots/cartesian/axes");var d=e("../../lib");t.exports=function e(t,r){var n=t.contours;if(t.autocontour){var a=t.zmin;var i=t.zmax;if(t.zauto||a===undefined){a=d.aggNums(Math.min,null,r)}if(t.zauto||i===undefined){i=d.aggNums(Math.max,null,r)}var o=h(a,i,t.ncontours);n.size=o.dtick;n.start=f.tickFirst(o);o.range.reverse();n.end=f.tickFirst(o);if(n.start===a)n.start+=n.size;if(n.end===i)n.end-=n.size;if(n.start>n.end){n.start=n.end=(n.start+n.end)/2}if(!t._input.contours)t._input.contours={};d.extendFlat(t._input.contours,{start:n.start,end:n.end,size:n.size});t._input.autocontour=true}else if(n.type!=="constraint"){var s=n.start;var l=n.end;var c=t._input.contours;if(s>l){n.start=c.start=l;l=n.end=c.end=s;s=n.start}if(!(n.size>0)){var u;if(s===l)u=1;else u=h(s,l,t.ncontours).dtick;c.size=n.size=u}}};function h(e,t,r){var n={type:"linear",range:[e,t]};f.autoTicks(n,(t-e)/(r||15));return n}},{"../../lib":285,"../../plots/cartesian/axes":331}],432:[function(e,t,r){"use strict";var h=e("@plotly/d3");var p=e("../../components/drawing");var n=e("../heatmap/style");var v=e("./make_color_map");t.exports=function e(t){var r=h.select(t).selectAll("g.contour");r.style("opacity",function(e){return e[0].trace.opacity});r.each(function(e){var t=h.select(this);var r=e[0].trace;var n=r.contours;var a=r.line;var i=n.size||1;var o=n.start;var s=n.type==="constraint";var l=!s&&n.coloring==="lines";var c=!s&&n.coloring==="fill";var u=l||c?v(r):null;t.selectAll("g.contourlevel").each(function(e){h.select(this).selectAll("path").call(p.lineGroupStyle,a.width,l?u(e.level):a.color,a.dash)});var f=n.labelfont;t.selectAll("g.contourlabels text").each(function(e){p.font(h.select(this),{family:f.family,size:f.size,color:f.color||(l?u(e.level):a.color)})});if(s){t.selectAll("g.contourfill path").style("fill",r.fillcolor)}else if(c){var d;t.selectAll("g.contourfill path").style("fill",function(e){if(d===undefined)d=e.level;return u(e.level+.5*i)});if(d===undefined)d=o;t.selectAll("g.contourbg path").style("fill",u(d-.5*i))}});n(t)}},{"../../components/drawing":177,"../heatmap/style":446,"./make_color_map":428,"@plotly/d3":20}],433:[function(e,t,r){"use strict";var c=e("../../components/colorscale/defaults");var u=e("./label_defaults");t.exports=function e(t,r,n,a,i){var o=n("contours.coloring");var s;var l="";if(o==="fill")s=n("contours.showlines");if(s!==false){if(o!=="lines")l=n("line.color","#000");n("line.width",.5);n("line.dash")}if(o!=="none"){if(t.showlegend!==true)r.showlegend=false;r._dfltShowLegend=false;c(t,r,a,n,{prefix:"",cLetter:"z"})}n("line.smoothing");u(n,a,l,i)}},{"../../components/colorscale/defaults":165,"./label_defaults":427}],434:[function(e,t,r){"use strict";var n=e("../scatter/attributes");var a=e("../../plots/attributes");var i=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var o=e("../../plots/template_attributes").hovertemplateAttrs;var s=e("../../components/colorscale/attributes");var l=e("../../lib/extend").extendFlat;t.exports=l({z:{valType:"data_array",editType:"calc"},x:l({},n.x,{impliedEdits:{xtype:"array"}}),x0:l({},n.x0,{impliedEdits:{xtype:"scaled"}}),dx:l({},n.dx,{impliedEdits:{xtype:"scaled"}}),y:l({},n.y,{impliedEdits:{ytype:"array"}}),y0:l({},n.y0,{impliedEdits:{ytype:"scaled"}}),dy:l({},n.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:l({},n.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:l({},n.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:l({},n.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:l({},n.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:l({},n.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:l({},n.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:false,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",false],dflt:false,editType:"calc"},hoverongaps:{valType:"boolean",dflt:true,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z",1),hovertemplate:o(),showlegend:l({},a.showlegend,{dflt:false})},{transforms:undefined},s("",{cLetter:"z",autoColorDflt:false}))},{"../../components/colorscale/attributes":162,"../../lib/extend":279,"../../plots/attributes":327,"../../plots/cartesian/axis_format_attributes":334,"../../plots/template_attributes":368,"../scatter/attributes":494}],435:[function(e,t,r){"use strict";var P=e("../../registry");var I=e("../../lib");var R=e("../../plots/cartesian/axes");var z=e("../../plots/cartesian/align_period");var N=e("../histogram2d/calc");var F=e("../../components/colorscale/calc");var j=e("./convert_column_xyz");var B=e("./clean_2d_array");var H=e("./interp2d");var U=e("./find_empties");var V=e("./make_bound_array");var s=e("../../constants/numerical").BADNUM;t.exports=function e(t,r){var n=R.getFromId(t,r.xaxis||"x");var a=R.getFromId(t,r.yaxis||"y");var i=P.traceIs(r,"contour");var o=P.traceIs(r,"histogram");var s=P.traceIs(r,"gl2d");var l=i?"best":r.zsmooth;var c,u,f,d;var h,p,v,g;var m,_,y;n._minDtick=0;a._minDtick=0;if(o){y=N(t,r);d=y.orig_x;c=y.x;u=y.x0;f=y.dx;g=y.orig_y;h=y.y;p=y.y0;v=y.dy;m=y.z}else{var b=r.z;if(I.isArray1D(b)){j(r,n,a,"x","y",["z"]);c=r._x;h=r._y;b=r._z}else{d=r.x?n.makeCalcdata(r,"x"):[];g=r.y?a.makeCalcdata(r,"y"):[];c=z(r,n,"x",d);h=z(r,a,"y",g);r._x=c;r._y=h}u=r.x0;f=r.dx;p=r.y0;v=r.dy;m=B(b,r,n,a)}if(n.rangebreaks||a.rangebreaks){m=Y(c,h,m);if(!o){c=q(c);h=q(h);r._x=c;r._y=h}}if(!o&&(i||r.connectgaps)){r._emptypoints=U(m);H(m,r._emptypoints)}function x(e){l=r._input.zsmooth=r.zsmooth=false;I.warn('cannot use zsmooth: "fast": '+e)}if(l==="fast"){if(n.type==="log"||a.type==="log"){x("log axis found")}else if(!o){if(c.length){var w=(c[c.length-1]-c[0])/(c.length-1);var A=Math.abs(w/100);for(_=0;_<c.length-1;_++){if(Math.abs(c[_+1]-c[_]-w)>A){x("x scale is not linear");break}}}if(h.length&&l==="fast"){var T=(h[h.length-1]-h[0])/(h.length-1);var k=Math.abs(T/100);for(_=0;_<h.length-1;_++){if(Math.abs(h[_+1]-h[_]-T)>k){x("y scale is not linear");break}}}}}var M=I.maxRowLength(m);var S=r.xtype==="scaled"?"":c;var C=V(r,S,u,f,M,n);var L=r.ytype==="scaled"?"":h;var E=V(r,L,p,v,m.length,a);if(!s){r._extremes[n._id]=R.findExtremes(n,C);r._extremes[a._id]=R.findExtremes(a,E)}var D={x:C,y:E,z:m,text:r._text||r.text,hovertext:r._hovertext||r.hovertext};if(r.xperiodalignment&&d){D.orig_x=d}if(r.yperiodalignment&&g){D.orig_y=g}if(S&&S.length===C.length-1)D.xCenter=S;if(L&&L.length===E.length-1)D.yCenter=L;if(o){D.xRanges=y.xRanges;D.yRanges=y.yRanges;D.pts=y.pts}if(!i){F(t,r,{vals:m,cLetter:"z"})}if(i&&r.contours&&r.contours.coloring==="heatmap"){var O={type:r.type==="contour"?"heatmap":"histogram2d",xcalendar:r.xcalendar,ycalendar:r.ycalendar};D.xfill=V(O,S,u,f,M,n);D.yfill=V(O,L,p,v,m.length,a)}return[D]};function q(e){var t=[];var r=e.length;for(var n=0;n<r;n++){var a=e[n];if(a!==s)t.push(a)}return t}function Y(e,t,r){var n=[];var a=-1;for(var i=0;i<r.length;i++){if(t[i]===s)continue;a++;n[a]=[];for(var o=0;o<r[i].length;o++){if(e[o]===s)continue;n[a].push(r[i][o])}}return n}},{"../../components/colorscale/calc":163,"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/align_period":328,"../../plots/cartesian/axes":331,"../../registry":373,"../histogram2d/calc":463,"./clean_2d_array":436,"./convert_column_xyz":438,"./find_empties":440,"./interp2d":443,"./make_bound_array":444}],436:[function(e,t,r){"use strict";var m=e("fast-isnumeric");var _=e("../../lib");var y=e("../../constants/numerical").BADNUM;t.exports=function e(t,a,r,n){var i,o,s,l,c,u;function f(e){if(!m(e))return undefined;return+e}if(a&&a.transpose){i=0;for(c=0;c<t.length;c++)i=Math.max(i,t[c].length);if(i===0)return false;s=function(e){return e.length};l=function(e,t,r){return(e[r]||[])[t]}}else{i=t.length;s=function(e,t){return e[t].length};l=function(e,t,r){return(e[t]||[])[r]}}var d=function(e,t,r){if(t===y||r===y)return y;return l(e,t,r)};function h(r){if(a&&a.type!=="carpet"&&a.type!=="contourcarpet"&&r&&r.type==="category"&&a["_"+r._id.charAt(0)].length){var e=r._id.charAt(0);var n={};var t=a["_"+e+"CategoryMap"]||a[e];for(c=0;c<t.length;c++){n[t[c]]=c}return function(e){var t=n[r._categories[e]];return t+1?t:y}}else{return _.identity}}var p=h(r);var v=h(n);if(n&&n.type==="category")i=n._categories.length;var g=new Array(i);for(c=0;c<i;c++){if(r&&r.type==="category"){o=r._categories.length}else{o=s(t,c)}g[c]=new Array(o);for(u=0;u<o;u++)g[c][u]=f(d(t,v(c),p(u)))}return g}},{"../../constants/numerical":265,"../../lib":285,"fast-isnumeric":31}],437:[function(e,t,r){"use strict";t.exports={min:"zmin",max:"zmax"}},{}],438:[function(e,t,r){"use strict";var D=e("../../lib");var O=e("../../constants/numerical").BADNUM;var P=e("../../plots/cartesian/align_period");t.exports=function e(t,r,n,a,i,o){var s=t._length;var l=r.makeCalcdata(t,a);var c=n.makeCalcdata(t,i);l=P(t,r,a,l);c=P(t,n,i,c);var u=t.text;var f=u!==undefined&&D.isArray1D(u);var d=t.hovertext;var h=d!==undefined&&D.isArray1D(d);var p,v;var g=D.distinctVals(l);var m=g.vals;var _=D.distinctVals(c);var y=_.vals;var b=[];var x;var w;var A=y.length;var T=m.length;for(p=0;p<o.length;p++){b[p]=D.init2dArray(A,T)}if(f){x=D.init2dArray(A,T)}if(h){w=D.init2dArray(A,T)}var k=D.init2dArray(A,T);for(p=0;p<s;p++){if(l[p]!==O&&c[p]!==O){var M=D.findBin(l[p]+g.minDiff/2,m);var S=D.findBin(c[p]+_.minDiff/2,y);for(v=0;v<o.length;v++){var C=o[v];var L=t[C];var E=b[v];E[S][M]=L[p];k[S][M]=p}if(f)x[S][M]=u[p];if(h)w[S][M]=d[p]}}t["_"+a]=m;t["_"+i]=y;for(v=0;v<o.length;v++){t["_"+o[v]]=b[v]}if(f)t._text=x;if(h)t._hovertext=w;if(r&&r.type==="category"){t["_"+a+"CategoryMap"]=m.map(function(e){return r._categories[e]})}if(n&&n.type==="category"){t["_"+i+"CategoryMap"]=y.map(function(e){return n._categories[e]})}t._after2before=k}},{"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/align_period":328}],439:[function(e,t,r){"use strict";var s=e("../../lib");var l=e("./xyz_defaults");var c=e("../scatter/period_defaults");var u=e("./style_defaults");var f=e("../../components/colorscale/defaults");var d=e("./attributes");t.exports=function e(r,n,t,a){function i(e,t){return s.coerce(r,n,d,e,t)}var o=l(r,n,i,a);if(!o){n.visible=false;return}c(r,n,a,i);i("xhoverformat");i("yhoverformat");i("text");i("hovertext");i("hovertemplate");u(r,n,i,a);i("hoverongaps");i("connectgaps",s.isArray1D(n.z)&&n.zsmooth!==false);f(r,n,a,i,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":165,"../../lib":285,"../scatter/period_defaults":514,"./attributes":434,"./style_defaults":447,"./xyz_defaults":448}],440:[function(e,t,r){"use strict";var m=e("../../lib").maxRowLength;t.exports=function e(t){var r=[];var n={};var a=[];var i=t[0];var o=[];var s=[0,0,0];var l=m(t);var c;var u;var f;var d;var h;var p;var v;var g;for(u=0;u<t.length;u++){c=o;o=i;i=t[u+1]||[];for(f=0;f<l;f++){if(o[f]===undefined){p=(o[f-1]!==undefined?1:0)+(o[f+1]!==undefined?1:0)+(c[f]!==undefined?1:0)+(i[f]!==undefined?1:0);if(p){if(u===0)p++;if(f===0)p++;if(u===t.length-1)p++;if(f===o.length-1)p++;if(p<4){n[[u,f]]=[u,f,p]}r.push([u,f,p])}else a.push([u,f])}}}while(a.length){v={};g=false;for(h=a.length-1;h>=0;h--){d=a[h];u=d[0];f=d[1];p=((n[[u-1,f]]||s)[2]+(n[[u+1,f]]||s)[2]+(n[[u,f-1]]||s)[2]+(n[[u,f+1]]||s)[2])/20;if(p){v[d]=[u,f,p];a.splice(h,1);g=true}}if(!g){throw"findEmpties iterated with no new neighbors"}for(d in v){n[d]=v[d];r.push(v[d])}}return r.sort(function(e,t){return t[2]-e[2]})}},{"../../lib":285}],441:[function(e,t,r){"use strict";var z=e("../../components/fx");var N=e("../../lib");var F=e("../../plots/cartesian/axes");var j=e("../../components/colorscale").extractOpts;t.exports=function e(t,r,n,a,i){if(!i)i={};var o=i.isContour;var s=t.cd[0];var l=s.trace;var c=t.xa;var u=t.ya;var f=s.x;var d=s.y;var h=s.z;var p=s.xCenter;var v=s.yCenter;var g=s.zmask;var m=l.zhoverformat;var _=f;var y=d;var b,x,w,A;if(t.index!==false){try{w=Math.round(t.index[1]);A=Math.round(t.index[0])}catch(e){N.error("Error hovering on heatmap, "+"pointNumber must be [row,col], found:",t.index);return}if(w<0||w>=h[0].length||A<0||A>h.length){return}}else if(z.inbox(r-f[0],r-f[f.length-1],0)>0||z.inbox(n-d[0],n-d[d.length-1],0)>0){return}else{if(o){var T;_=[2*f[0]-f[1]];for(T=1;T<f.length;T++){_.push((f[T]+f[T-1])/2)}_.push([2*f[f.length-1]-f[f.length-2]]);y=[2*d[0]-d[1]];for(T=1;T<d.length;T++){y.push((d[T]+d[T-1])/2)}y.push([2*d[d.length-1]-d[d.length-2]])}w=Math.max(0,Math.min(_.length-2,N.findBin(r,_)));A=Math.max(0,Math.min(y.length-2,N.findBin(n,y)))}var k=c.c2p(f[w]);var M=c.c2p(f[w+1]);var S=u.c2p(d[A]);var C=u.c2p(d[A+1]);var L,E;if(o){L=s.orig_x||f;E=s.orig_y||d;M=k;b=L[w];C=S;x=E[A]}else{L=s.orig_x||p||f;E=s.orig_y||v||d;b=p?L[w]:(L[w]+L[w+1])/2;x=v?E[A]:(E[A]+E[A+1])/2;if(c&&c.type==="category")b=f[w];if(u&&u.type==="category")x=d[A];if(l.zsmooth){k=M=c.c2p(b);S=C=u.c2p(x)}}var D=h[A][w];if(g&&!g[A][w])D=undefined;if(D===undefined&&!l.hoverongaps)return;var O;if(Array.isArray(s.hovertext)&&Array.isArray(s.hovertext[A])){O=s.hovertext[A][w]}else if(Array.isArray(s.text)&&Array.isArray(s.text[A])){O=s.text[A][w]}var P=j(l);var I={type:"linear",range:[P.min,P.max],hoverformat:m,_separators:c._separators,_numFormat:c._numFormat};var R=F.tickText(I,D,"hover").text;return[N.extendFlat(t,{index:l._after2before?l._after2before[A][w]:[A,w],distance:t.maxHoverDistance,spikeDistance:t.maxSpikeDistance,x0:k,x1:M,y0:S,y1:C,xLabelVal:b,yLabelVal:x,zLabelVal:D,zLabel:R,text:O})]}},{"../../components/colorscale":167,"../../components/fx":195,"../../lib":285,"../../plots/cartesian/axes":331}],442:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:e("./colorbar"),style:e("./style"),hoverPoints:e("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":345,"./attributes":434,"./calc":435,"./colorbar":437,"./defaults":439,"./hover":441,"./plot":445,"./style":446}],443:[function(e,t,r){"use strict";var i=e("../../lib");var o=.01;var m=[[-1,0],[1,0],[0,-1],[0,1]];function s(e){return.5-.25*Math.min(1,e*.5)}t.exports=function e(t,r){var n=1;var a;l(t,r);for(a=0;a<r.length;a++){if(r[a][2]<4)break}r=r.slice(a);for(a=0;a<100&&n>o;a++){n=l(t,r,s(n))}if(n>o){i.log("interp2d didn't converge quickly",n)}return t};function l(e,t,r){var n=0;var a;var i;var o;var s;var l;var c;var u;var f;var d;var h;var p;var v;var g;for(s=0;s<t.length;s++){a=t[s];i=a[0];o=a[1];p=e[i][o];h=0;d=0;for(l=0;l<4;l++){c=m[l];u=e[i+c[0]];if(!u)continue;f=u[o+c[1]];if(f!==undefined){if(h===0){v=g=f}else{v=Math.min(v,f);g=Math.max(g,f)}d++;h+=f}}if(d===0){throw"iterateInterp2d order is wrong: no defined neighbors"}e[i][o]=h/d;if(p===undefined){if(d<4)n=1}else{e[i][o]=(1+r)*e[i][o]-r*p;if(g>v){n=Math.max(n,Math.abs(e[i][o]-p)/(g-v))}}}return n}},{"../../lib":285}],444:[function(e,t,r){"use strict";var b=e("../../registry");var x=e("../../lib").isArrayOrTypedArray;t.exports=function e(t,r,n,a,i,o){var s=[];var l=b.traceIs(t,"contour");var c=b.traceIs(t,"histogram");var u=b.traceIs(t,"gl2d");var f;var d;var h;var p=x(r)&&r.length>1;if(p&&!c&&o.type!=="category"){var v=r.length;if(v<=i){if(l||u)s=r.slice(0,i);else if(i===1){s=[r[0]-.5,r[0]+.5]}else{s=[1.5*r[0]-.5*r[1]];for(h=1;h<v;h++){s.push((r[h-1]+r[h])*.5)}s.push(1.5*r[v-1]-.5*r[v-2])}if(v<i){var g=s[s.length-1];var m=g-s[s.length-2];for(h=v;h<i;h++){g+=m;s.push(g)}}}else{return l?r.slice(0,i):r.slice(0,i+1)}}else{var _=t[o._id.charAt(0)+"calendar"];if(c){f=o.r2c(n,0,_)}else{if(x(r)&&r.length===1){f=r[0]}else if(n===undefined){f=0}else{var y=o.type==="log"?o.d2c:o.r2c;f=y(n,0,_)}}d=a||1;for(h=l||u?0:-.5;h<i;h++){s.push(f+d*h)}}return s}},{"../../lib":285,"../../registry":373}],445:[function(e,t,r){"use strict";var ye=e("@plotly/d3");var be=e("tinycolor2");var xe=e("../../registry");var we=e("../../lib");var Ae=e("../../components/colorscale").makeColorScaleFuncFromTrace;var Te=e("../../constants/xmlns_namespaces");t.exports=function(ge,e,t,r){var me=e.xaxis;var _e=e.yaxis;we.makeTraceGroups(r,t,"hm").each(function(e){var t=ye.select(this);var r=e[0];var n=r.trace;var a=r.z;var i=r.x;var o=r.y;var s=r.xCenter;var l=r.yCenter;var c=xe.traceIs(n,"contour");var u=c?"best":n.zsmooth;var f=a.length;var d=we.maxRowLength(a);var h=false;var p=false;var v,g,m,_,y,b;b=0;while(v===undefined&&b<i.length-1){v=me.c2p(i[b]);b++}b=i.length-1;while(g===undefined&&b>0){g=me.c2p(i[b]);b--}if(g<v){m=g;g=v;v=m;h=true}b=0;while(_===undefined&&b<o.length-1){_=_e.c2p(o[b]);b++}b=o.length-1;while(y===undefined&&b>0){y=_e.c2p(o[b]);b--}if(y<_){m=_;_=y;y=m;p=true}if(c){s=i;l=o;i=r.xfill;o=r.yfill}if(u!=="fast"){var x=u==="best"?0:.5;v=Math.max(-x*me._length,v);g=Math.min((1+x)*me._length,g);_=Math.max(-x*_e._length,_);y=Math.min((1+x)*_e._length,y)}var w=Math.round(g-v);var A=Math.round(y-_);var T=w<=0||A<=0;if(T){var k=t.selectAll("image").data([]);k.exit().remove();return}var M,S;if(u==="fast"){M=d;S=f}else{M=w;S=A}var C=document.createElement("canvas");C.width=M;C.height=S;var L=C.getContext("2d");var E=Ae(n,{noNumericCheck:true,returnArray:true});var D,O;if(u==="fast"){D=h?function(e){return d-1-e}:we.identity;O=p?function(e){return f-1-e}:we.identity}else{D=function(e){return we.constrain(Math.round(me.c2p(i[e])-v),0,w)};O=function(e){return we.constrain(Math.round(_e.c2p(o[e])-_),0,A)}}var P=O(0);var I=[P,P];var R=h?0:1;var z=p?0:1;var N=0;var F=0;var j=0;var B=0;var H,U,V,q,Y,G;function W(e,t){if(e!==undefined){var r=E(e);r[0]=Math.round(r[0]);r[1]=Math.round(r[1]);r[2]=Math.round(r[2]);N+=t;F+=r[0]*t;j+=r[1]*t;B+=r[2]*t;return r}return[0,0,0,0]}function X(e,t,r,n){var a=e[r.bin0];if(a===undefined)return W(undefined,1);var i=e[r.bin1];var o=t[r.bin0];var s=t[r.bin1];var l=i-a||0;var c=o-a||0;var u;if(i===undefined){if(s===undefined)u=0;else if(o===undefined)u=2*(s-a);else u=(2*s-o-a)*2/3}else if(s===undefined){if(o===undefined)u=0;else u=(2*a-i-o)*2/3}else if(o===undefined)u=(2*s-i-a)*2/3;else u=s+a-i-o;return W(a+r.frac*l+n.frac*(c+r.frac*u))}if(u){var Z=0;var J;try{J=new Uint8Array(w*A*4)}catch(e){J=new Array(w*A*4)}if(u==="best"){var $=s||i;var Q=l||o;var K=new Array($.length);var ee=new Array(Q.length);var te=new Array(w);var re=s?Me:ke;var ne=l?Me:ke;var ae,ie,oe;for(b=0;b<$.length;b++)K[b]=Math.round(me.c2p($[b])-v);for(b=0;b<Q.length;b++)ee[b]=Math.round(_e.c2p(Q[b])-_);for(b=0;b<w;b++)te[b]=re(b,K);for(U=0;U<A;U++){ae=ne(U,ee);ie=a[ae.bin0];oe=a[ae.bin1];for(b=0;b<w;b++,Z+=4){G=X(ie,oe,te[b],ae);Se(J,Z,G)}}}else{for(U=0;U<f;U++){Y=a[U];I=O(U);for(b=0;b<w;b++){G=W(Y[b],1);Z=(I*w+D(b))*4;Se(J,Z,G)}}}var se=L.createImageData(w,A);try{se.data.set(J)}catch(e){var le=se.data;var ce=le.length;for(U=0;U<ce;U++){le[U]=J[U]}}L.putImageData(se,0,0)}else{var ue=n.xgap;var fe=n.ygap;var de=Math.floor(ue/2);var he=Math.floor(fe/2);for(U=0;U<f;U++){Y=a[U];I.reverse();I[z]=O(U+1);if(I[0]===I[1]||I[0]===undefined||I[1]===undefined){continue}V=D(0);H=[V,V];for(b=0;b<d;b++){H.reverse();H[R]=D(b+1);if(H[0]===H[1]||H[0]===undefined||H[1]===undefined){continue}q=Y[b];G=W(q,(H[1]-H[0])*(I[1]-I[0]));L.fillStyle="rgba("+G.join(",")+")";L.fillRect(H[0]+de,I[0]+he,H[1]-H[0]-ue,I[1]-I[0]-fe)}}}F=Math.round(F/N);j=Math.round(j/N);B=Math.round(B/N);var pe=be("rgb("+F+","+j+","+B+")");ge._hmpixcount=(ge._hmpixcount||0)+N;ge._hmlumcount=(ge._hmlumcount||0)+N*pe.getLuminance();var ve=t.selectAll("image").data(e);ve.enter().append("svg:image").attr({xmlns:Te.svg,preserveAspectRatio:"none"});ve.attr({height:A,width:w,x:v,y:_,"xlink:href":C.toDataURL("image/png")})})};function ke(e,t){var r=t.length-2;var n=we.constrain(we.findBin(e,t),0,r);var a=t[n];var i=t[n+1];var o=we.constrain(n+(e-a)/(i-a)-.5,0,r);var s=Math.round(o);var l=Math.abs(o-s);if(!o||o===r||!l){return{bin0:s,bin1:s,frac:0}}return{bin0:s,frac:l,bin1:Math.round(s+l/(o-s))}}function Me(e,t){var r=t.length-1;var n=we.constrain(we.findBin(e,t),0,r);var a=t[n];var i=t[n+1];var o=(e-a)/(i-a)||0;if(o<=0){return{bin0:n,bin1:n,frac:0}}if(o<.5){return{bin0:n,bin1:n+1,frac:o}}return{bin0:n+1,bin1:n,frac:1-o}}function Se(e,t,r){e[t]=r[0];e[t+1]=r[1];e[t+2]=r[2];e[t+3]=Math.round(r[3]*255)}},{"../../components/colorscale":167,"../../constants/xmlns_namespaces":266,"../../lib":285,"../../registry":373,"@plotly/d3":20,tinycolor2:119}],446:[function(e,t,r){"use strict";var n=e("@plotly/d3");t.exports=function e(t){n.select(t).selectAll(".hm image").style("opacity",function(e){return e.trace.opacity})}},{"@plotly/d3":20}],447:[function(e,t,r){"use strict";t.exports=function e(t,r,n){var a=n("zsmooth");if(a===false){n("xgap");n("ygap")}n("zhoverformat")}},{}],448:[function(e,t,r){"use strict";var s=e("fast-isnumeric");var h=e("../../lib");var p=e("../../registry");t.exports=function e(t,r,n,a,i,o){var s=n("z");i=i||"x";o=o||"y";var l,c;if(s===undefined||!s.length)return 0;if(h.isArray1D(t.z)){l=n(i);c=n(o);var u=h.minRowLength(l);var f=h.minRowLength(c);if(u===0||f===0)return 0;r._length=Math.min(u,f,s.length)}else{l=v(i,n);c=v(o,n);if(!g(s))return 0;n("transpose");r._length=null}if(t.type==="heatmapgl")return true;var d=p.getComponentMethod("calendars","handleTraceDefaults");d(t,r,[i,o],a);return true};function v(e,t){var r=t(e);var n=r?t(e+"type","array"):"scaled";if(n==="scaled"){t(e+"0");t("d"+e)}return r}function g(e){var t=true;var r=false;var n=false;var a;for(var i=0;i<e.length;i++){a=e[i];if(!h.isArrayOrTypedArray(a)){t=false;break}if(a.length>0)r=true;for(var o=0;o<a.length;o++){if(s(a[o])){n=true;break}}}return t&&r&&n}},{"../../lib":285,"../../registry":373,"fast-isnumeric":31}],449:[function(e,t,r){"use strict";var n=e("../bar/attributes");var a=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var i=e("../../plots/template_attributes").hovertemplateAttrs;var o=e("./bin_attributes");var s=e("./constants");var l=e("../../lib/extend").extendFlat;t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:a("x"),yhoverformat:a("y"),text:l({},n.text,{}),hovertext:l({},n.hovertext,{}),orientation:n.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:false,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:o("x",true),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:o("y",true),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:i({},{keys:s.eventDataKeys}),marker:n.marker,offsetgroup:n.offsetgroup,alignmentgroup:n.alignmentgroup,selected:n.selected,unselected:n.unselected,_deprecated:{bardir:n._deprecated.bardir}}},{"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../../plots/template_attributes":368,"../bar/attributes":383,"./bin_attributes":451,"./constants":455}],450:[function(e,t,r){"use strict";t.exports=function e(t,r){var n=t.length;var a=0;for(var i=0;i<n;i++){if(r[i]){t[i]/=r[i];a+=t[i]}else t[i]=null}return a}},{}],451:[function(e,t,r){"use strict";t.exports=function e(t,r){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],452:[function(e,t,r){"use strict";var o=e("fast-isnumeric");t.exports={count:function(e,t,r){r[e]++;return 1},sum:function(e,t,r,n){var a=n[t];if(o(a)){a=Number(a);r[e]+=a;return a}return 0},avg:function(e,t,r,n,a){var i=n[t];if(o(i)){i=Number(i);r[e]+=i;a[e]++}return 0},min:function(e,t,r,n){var a=n[t];if(o(a)){a=Number(a);if(!o(r[e])){r[e]=a;return a}else if(r[e]>a){var i=a-r[e];r[e]=a;return i}}return 0},max:function(e,t,r,n){var a=n[t];if(o(a)){a=Number(a);if(!o(r[e])){r[e]=a;return a}else if(r[e]<a){var i=a-r[e];r[e]=a;return i}}return 0}}},{"fast-isnumeric":31}],453:[function(e,t,r){"use strict";var n=e("../../constants/numerical");var m=n.ONEAVGYEAR;var a=n.ONEAVGMONTH;var _=n.ONEDAY;var i=n.ONEHOUR;var o=n.ONEMIN;var s=n.ONESEC;var y=e("../../plots/cartesian/axes").tickIncrement;t.exports=function e(o,t,r,s,l){var n=-1.1*t;var a=-.1*t;var i=o-a;var c=r[0];var u=r[1];var f=Math.min(b(c+a,c+i,s,l),b(u+a,u+i,s,l));var d=Math.min(b(c+n,c+a,s,l),b(u+n,u+a,s,l));var h,p;if(f>d&&d<Math.abs(u-c)/4e3){h=f;p=false}else{h=Math.min(f,d);p=true}if(s.type==="date"&&h>_){var v=h===m?1:6;var g=h===m?"M12":"M1";return function(e,t){var r=s.c2d(e,m,l);var n=r.indexOf("-",v);if(n>0)r=r.substr(0,n);var a=s.d2c(r,0,l);if(a<e){var i=y(a,g,false,l);if((a+i)/2<e+o)a=i}if(t&&p){return y(a,g,true,l)}return a}}return function(e,t){var r=h*Math.round(e/h);if(r+h/10<e&&r+h*.9<e+o){r+=h}if(t&&p){r-=h}return r}};function b(e,t,r,n){if(e*t<=0)return Infinity;var a=Math.abs(t-e);var i=r.type==="date";var o=c(a,i);for(var s=0;s<10;s++){var l=c(o*80,i);if(o===l)break;if(u(l,e,t,i,r,n))o=l;else break}return o}function c(e,t){if(t&&e>s){if(e>_){if(e>m*1.1)return m;if(e>a*1.1)return a;return _}if(e>i)return i;if(e>o)return o;return s}return Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function u(e,t,r,n,a,i){if(n&&e>_){var o=f(t,a,i);var s=f(r,a,i);var l=e===m?0:1;return o[l]!==s[l]}return Math.floor(r/e)-Math.floor(t/e)>.1}function f(e,t,r){var n=t.c2d(e,m,r).split("-");if(n[0]===""){n.unshift();n[0]="-"+n[0]}return n}},{"../../constants/numerical":265,"../../plots/cartesian/axes":331}],454:[function(e,t,r){"use strict";var W=e("fast-isnumeric");var X=e("../../lib");var H=e("../../registry");var Z=e("../../plots/cartesian/axes");var J=e("../bar/arrays_to_calcdata");var $=e("./bin_functions");var Q=e("./norm_functions");var K=e("./average");var ee=e("./bin_label_vals");function n(n,e){var t=[];var r=[];var a=Z.getFromId(n,e.orientation==="h"?e.yaxis:e.xaxis);var i=e.orientation==="h"?"y":"x";var o={x:"y",y:"x"}[i];var s=e[i+"calendar"];var l=e.cumulative;var c;var u=te(n,e,a,i);var f=u[0];var d=u[1];var h=typeof f.size==="string";var p=[];var v=h?p:f;var g=[];var m=[];var _=[];var y=0;var b=e.histnorm;var x=e.histfunc;var w=b.indexOf("density")!==-1;var A,T,k;if(l.enabled&&w){b=b.replace(/ ?density$/,"");w=false}var M=x==="max"||x==="min";var S=M?null:0;var C=$.count;var L=Q[b];var E=false;var D=function(e){return a.r2c(e,0,s)};var O;if(X.isArrayOrTypedArray(e[o])&&x!=="count"){O=e[o];E=x==="avg";C=$[x]}c=D(f.start);T=D(f.end)+(c-Z.tickIncrement(c,f.size,false,s))/1e6;while(c<T&&t.length<1e6){A=Z.tickIncrement(c,f.size,false,s);t.push((c+A)/2);r.push(S);_.push([]);p.push(c);if(w)g.push(1/(A-c));if(E)m.push(0);if(A<=c)break;c=A}p.push(c);if(!h&&a.type==="date"){v={start:D(v.start),end:D(v.end),size:v.size}}if(!n._fullLayout._roundFnOpts)n._fullLayout._roundFnOpts={};var P=e["_"+i+"bingroup"];var I={leftGap:Infinity,rightGap:Infinity};if(P){if(!n._fullLayout._roundFnOpts[P])n._fullLayout._roundFnOpts[P]=I;I=n._fullLayout._roundFnOpts[P]}var R=r.length;var z=true;var N=I.leftGap;var F=I.rightGap;var j={};for(c=0;c<d.length;c++){var B=d[c];k=X.findBin(B,v);if(k>=0&&k<R){y+=C(k,c,r,O,m);if(z&&_[k].length&&B!==d[_[k][0]]){z=false}_[k].push(c);j[c]=k;N=Math.min(N,B-p[k]);F=Math.min(F,p[k+1]-B)}}I.leftGap=N;I.rightGap=F;var H;if(!z){H=function(t,r){return function(){var e=n._fullLayout._roundFnOpts[P];return ee(e.leftGap,e.rightGap,p,a,s)(t,r)}}}if(E)y=K(r,m);if(L)L(r,y,g);if(l.enabled)re(r,l.direction,l.currentbin);var U=Math.min(t.length,r.length);var V=[];var q=0;var Y=U-1;for(c=0;c<U;c++){if(r[c]){q=c;break}}for(c=U-1;c>=q;c--){if(r[c]){Y=c;break}}for(c=q;c<=Y;c++){if(W(t[c])&&W(r[c])){var G={p:t[c],s:r[c],b:0};if(!l.enabled){G.pts=_[c];if(z){G.ph0=G.ph1=_[c].length?d[_[c][0]]:t[c]}else{e._computePh=true;G.ph0=H(p[c]);G.ph1=H(p[c+1],true)}}V.push(G)}}if(V.length===1){V[0].width1=Z.tickIncrement(V[0].p,f.size,false,s)-V[0].p}J(V,e);if(X.isArrayOrTypedArray(e.selectedpoints)){X.tagSelected(V,e,j)}return V}function te(e,t,r,n,a){var i=n+"bins";var o=e._fullLayout;var s=t["_"+n+"bingroup"];var l=o._histogramBinOpts[s];var c=o.barmode==="overlay";var u,f,d,h,p,v,g;var m=function(e){return r.r2c(e,0,h)};var _=function(e){return r.c2r(e,0,h)};var y=r.type==="date"?function(e){return e||e===0?X.cleanDate(e,null,h):null}:function(e){return W(e)?Number(e):null};function b(e,t,r){if(t[e+"Found"]){t[e]=y(t[e]);if(t[e]===null)t[e]=r[e]}else{v[e]=t[e]=r[e];X.nestedProperty(f[0],i+"."+e).set(r[e])}}if(t["_"+n+"autoBinFinished"]){delete t["_"+n+"autoBinFinished"]}else{f=l.traces;var x=[];var w=true;var A=false;var T=false;for(u=0;u<f.length;u++){d=f[u];if(d.visible){var k=l.dirs[u];p=d["_"+k+"pos0"]=r.makeCalcdata(d,k);x=X.concat(x,p);delete d["_"+n+"autoBinFinished"];if(t.visible===true){if(w){w=false}else{delete d._autoBin;d["_"+n+"autoBinFinished"]=1}if(H.traceIs(d,"2dMap")){A=true}if(d.type==="histogram2dcontour"){T=true}}}}h=f[0][n+"calendar"];var M=Z.autoBin(x,r,l.nbins,A,h,l.sizeFound&&l.size);var S=f[0]._autoBin={};v=S[l.dirs[0]]={};if(T){if(!l.size){M.start=_(Z.tickIncrement(m(M.start),M.size,true,h))}if(l.end===undefined){M.end=_(Z.tickIncrement(m(M.end),M.size,false,h))}}if(c&&!H.traceIs(t,"2dMap")&&M._dataSpan===0&&r.type!=="category"&&r.type!=="multicategory"){if(a)return[M,p,true];M=U(e,t,r,n,i)}g=d.cumulative||{};if(g.enabled&&g.currentbin!=="include"){if(g.direction==="decreasing"){M.start=_(Z.tickIncrement(m(M.start),M.size,true,h))}else{M.end=_(Z.tickIncrement(m(M.end),M.size,false,h))}}l.size=M.size;if(!l.sizeFound){v.size=M.size;X.nestedProperty(f[0],i+".size").set(M.size)}b("start",l,M);b("end",l,M)}p=t["_"+n+"pos0"];delete t["_"+n+"pos0"];var C=t._input[i]||{};var L=X.extendFlat({},l);var E=l.start;var D=r.r2l(C.start);var O=D!==undefined;if((l.startFound||O)&&D!==r.r2l(E)){var P=O?D:X.aggNums(Math.min,null,p);var I={type:r.type==="category"||r.type==="multicategory"?"linear":r.type,r2l:r.r2l,dtick:l.size,tick0:E,calendar:h,range:[P,Z.tickIncrement(P,l.size,false,h)].map(r.l2r)};var R=Z.tickFirst(I);if(R>r.r2l(P)){R=Z.tickIncrement(R,l.size,true,h)}L.start=r.l2r(R);if(!O)X.nestedProperty(t,i+".start").set(L.start)}var z=l.end;var N=r.r2l(C.end);var F=N!==undefined;if((l.endFound||F)&&N!==r.r2l(z)){var j=F?N:X.aggNums(Math.max,null,p);L.end=r.l2r(j);if(!F)X.nestedProperty(t,i+".start").set(L.end)}var B="autobin"+n;if(t._input[B]===false){t._input[i]=X.extendFlat({},t[i]||{});delete t._input[B];delete t[B]}return[L,p]}function U(e,t,r,n,a){var i=e._fullLayout;var o=x(e,t);var s=false;var l=Infinity;var c=[t];var u,f,d;for(u=0;u<o.length;u++){f=o[u];if(f===t){s=true}else if(!s){d=i._histogramBinOpts[f["_"+n+"bingroup"]];l=Math.min(l,d.size||f[a].size)}else{var h=te(e,f,r,n,true);var p=h[0];var v=h[2];f["_"+n+"autoBinFinished"]=1;f["_"+n+"pos0"]=h[1];if(v){c.push(f)}else{l=Math.min(l,p.size)}}}var g=new Array(c.length);for(u=0;u<c.length;u++){var m=c[u]["_"+n+"pos0"];for(var _=0;_<m.length;_++){if(m[_]!==undefined){g[u]=m[_];break}}}if(!isFinite(l)){l=X.distinctVals(g).minDiff}for(u=0;u<c.length;u++){f=c[u];var y=f[n+"calendar"];var b={start:r.c2r(g[u]-l/2,0,y),end:r.c2r(g[u]+l/2,0,y),size:l};f._input[a]=f[a]=b;d=i._histogramBinOpts[f["_"+n+"bingroup"]];if(d)X.extendFlat(d,b)}return t[a]}function x(e,t){var r=t.xaxis;var n=t.yaxis;var a=t.orientation;var i=[];var o=e._fullData;for(var s=0;s<o.length;s++){var l=o[s];if(l.type==="histogram"&&l.visible===true&&l.orientation===a&&l.xaxis===r&&l.yaxis===n){i.push(l)}}return i}function re(t,e,r){var n,a,i;function o(e){i=t[e];t[e]/=2}function s(e){a=t[e];t[e]=i+a/2;i+=a}if(r==="half"){if(e==="increasing"){o(0);for(n=1;n<t.length;n++){s(n)}}else{o(t.length-1);for(n=t.length-2;n>=0;n--){s(n)}}}else if(e==="increasing"){for(n=1;n<t.length;n++){t[n]+=t[n-1]}if(r==="exclude"){t.unshift(0);t.pop()}}else{for(n=t.length-2;n>=0;n--){t[n]+=t[n+1]}if(r==="exclude"){t.push(0);t.shift()}}}t.exports={calc:n,calcAllAutoBins:te}},{"../../lib":285,"../../plots/cartesian/axes":331,"../../registry":373,"../bar/arrays_to_calcdata":382,"./average":450,"./bin_functions":452,"./bin_label_vals":453,"./norm_functions":461,"fast-isnumeric":31}],455:[function(e,t,r){"use strict";t.exports={eventDataKeys:["binNumber"]}},{}],456:[function(e,t,r){"use strict";var E=e("../../lib");var D=e("../../plots/cartesian/axis_ids");var O=e("../../registry").traceIs;var P=e("../bar/defaults").handleGroupingDefaults;var I=E.nestedProperty;var R=e("../../plots/cartesian/constraints").getAxisGroup;var z=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}];var N=["x","y"];t.exports=function e(t,n){var l=n._histogramBinOpts={};var r=[];var a={};var i=[];var o,s,c,u;var f,d,h;function p(e,t){return E.coerce(o._input,o,o._module.attributes,e,t)}function v(e){return e.orientation==="v"?"x":"y"}function g(e,t){var r=D.getFromTrace({_fullLayout:n},e,t);return r.type}function m(e,t,r){var n=e.uid+"__"+r;if(!t)t=n;var a=g(e,r);var i=e[r+"calendar"]||"";var o=l[t];var s=true;if(o){if(a===o.axType&&i===o.calendar){s=false;o.traces.push(e);o.dirs.push(r)}else{t=n;if(a!==o.axType){E.warn(["Attempted to group the bins of trace",e.index,"set on a","type:"+a,"axis","with bins on","type:"+o.axType,"axis."].join(" "))}if(i!==o.calendar){E.warn(["Attempted to group the bins of trace",e.index,"set with a",i,"calendar","with bins",o.calendar?"on a "+o.calendar+" calendar":"w/o a set calendar"].join(" "))}}}if(s){l[t]={traces:[e],dirs:[r],axType:a,calendar:e[r+"calendar"]||""}}e["_"+r+"bingroup"]=t}for(f=0;f<t.length;f++){o=t[f];if(O(o,"histogram")){r.push(o);delete o._xautoBinFinished;delete o._yautoBinFinished;if(!O(o,"2dMap")){P(o._input,o,n,p)}}}var _=n._alignmentOpts||{};for(f=0;f<r.length;f++){o=r[f];c="";if(!O(o,"2dMap")){u=v(o);if(n.barmode==="group"&&o.alignmentgroup){var y=o[u+"axis"];var b=R(n,y)+o.orientation;if((_[b]||{})[o.alignmentgroup]){c=b}}if(!c&&n.barmode!=="overlay"){c=R(n,o.xaxis)+R(n,o.yaxis)+v(o)}}if(c){if(!a[c]){a[c]=[]}a[c].push(o)}else{i.push(o)}}for(c in a){s=a[c];if(s.length===1){i.push(s[0]);continue}var x=false;if(s.length){o=s[0];x=p("bingroup")}c=x||c;for(f=0;f<s.length;f++){o=s[f];var w=o._input.bingroup;if(w&&w!==c){E.warn(["Trace",o.index,"must match","within bingroup",c+".","Ignoring its bingroup:",w,"setting."].join(" "))}o.bingroup=c;m(o,c,v(o))}}for(f=0;f<i.length;f++){o=i[f];var A=p("bingroup");if(O(o,"2dMap")){for(h=0;h<2;h++){u=N[h];var T=p(u+"bingroup",A?A+"__"+u:null);m(o,T,u)}}else{m(o,A,v(o))}}for(c in l){var k=l[c];s=k.traces;for(d=0;d<z.length;d++){var M=z[d];var S=M.name;var C;var L;if(S==="nbins"&&k.sizeFound)continue;for(f=0;f<s.length;f++){o=s[f];u=k.dirs[f];C=M.aStr[u];if(I(o._input,C).get()!==undefined){k[S]=p(C);k[S+"Found"]=true;break}L=(o._autoBin||{})[u]||{};if(L[S]){I(o,C).set(L[S])}}if(S==="start"||S==="end"){for(;f<s.length;f++){o=s[f];if(o["_"+u+"bingroup"]){L=(o._autoBin||{})[u]||{};p(C,L[S])}}}if(S==="nbins"&&!k.sizeFound&&!k.nbinsFound){o=s[0];k[S]=p(C)}}}}},{"../../lib":285,"../../plots/cartesian/axis_ids":335,"../../plots/cartesian/constraints":339,"../../registry":373,"../bar/defaults":387}],457:[function(e,t,r){"use strict";var m=e("../../registry");var _=e("../../lib");var y=e("../../components/color");var b=e("../bar/style_defaults");var x=e("./attributes");t.exports=function e(r,n,t,a){function i(e,t){return _.coerce(r,n,x,e,t)}var o=i("x");var s=i("y");var l=i("cumulative.enabled");if(l){i("cumulative.direction");i("cumulative.currentbin")}i("text");i("hovertext");i("hovertemplate");i("xhoverformat");i("yhoverformat");var c=i("orientation",s&&!o?"h":"v");var u=c==="v"?"x":"y";var f=c==="v"?"y":"x";var d=o&&s?Math.min(_.minRowLength(o)&&_.minRowLength(s)):_.minRowLength(n[u]||[]);if(!d){n.visible=false;return}n._length=d;var h=m.getComponentMethod("calendars","handleTraceDefaults");h(r,n,["x","y"],a);var p=n[f];if(p)i("histfunc");i("histnorm");i("autobin"+u);b(r,n,i,t,a);_.coerceSelectionMarkerOpacity(n,i);var v=(n.marker.line||{}).color;var g=m.getComponentMethod("errorbars","supplyDefaults");g(r,n,v||y.defaultLine,{axis:"y"});g(r,n,v||y.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":155,"../../lib":285,"../../registry":373,"../bar/style_defaults":398,"./attributes":449}],458:[function(e,t,r){"use strict";t.exports=function e(t,r,n,a,i){t.x="xVal"in r?r.xVal:r.x;t.y="yVal"in r?r.yVal:r.y;if("zLabelVal"in r)t.z=r.zLabelVal;if(r.xa)t.xaxis=r.xa;if(r.ya)t.yaxis=r.ya;if(!(n.cumulative||{}).enabled){var o=Array.isArray(i)?a[0].pts[i[0]][i[1]]:a[i].pts;t.pointNumbers=o;t.binNumber=t.pointNumber;delete t.pointNumber;delete t.pointIndex;var s;if(n._indexToPoints){s=[];for(var l=0;l<o.length;l++){s=s.concat(n._indexToPoints[o[l]])}}else{s=o}t.pointIndices=s}return t}},{}],459:[function(e,t,r){"use strict";var u=e("../bar/hover").hoverPoints;var f=e("../../plots/cartesian/axes").hoverLabelText;t.exports=function e(t,r,n,a,i){var o=u(t,r,n,a,i);if(!o)return;t=o[0];var s=t.cd[t.index];var l=t.cd[0].trace;if(!l.cumulative.enabled){var c=l.orientation==="h"?"y":"x";t[c+"Label"]=f(t[c+"a"],[s.ph0,s.ph1],l[c+"hoverformat"])}return o}},{"../../plots/cartesian/axes":331,"../bar/hover":390}],460:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("../bar/layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),supplyLayoutDefaults:e("../bar/layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("../bar/cross_trace_calc").crossTraceCalc,plot:e("../bar/plot").plot,layerName:"barlayer",style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,colorbar:e("../scatter/marker_colorbar"),hoverPoints:e("./hover"),selectPoints:e("../bar/select"),eventData:e("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":345,"../bar/cross_trace_calc":386,"../bar/layout_attributes":392,"../bar/layout_defaults":393,"../bar/plot":394,"../bar/select":395,"../bar/style":397,"../scatter/marker_colorbar":512,"./attributes":449,"./calc":454,"./cross_trace_defaults":456,"./defaults":457,"./event_data":458,"./hover":459}],461:[function(e,t,r){"use strict";t.exports={percent:function(e,t){var r=e.length;var n=100/t;for(var a=0;a<r;a++)e[a]*=n},probability:function(e,t){var r=e.length;for(var n=0;n<r;n++)e[n]/=t},density:function(e,t,r,n){var a=e.length;n=n||1;for(var i=0;i<a;i++)e[i]*=r[i]*n},"probability density":function(e,t,r,n){var a=e.length;if(n)t/=n;for(var i=0;i<a;i++)e[i]*=r[i]/t}}},{}],462:[function(e,t,r){"use strict";var n=e("../histogram/attributes");var a=e("../histogram/bin_attributes");var i=e("../heatmap/attributes");var o=e("../../plots/attributes");var s=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var l=e("../../plots/template_attributes").hovertemplateAttrs;var c=e("../../components/colorscale/attributes");var u=e("../../lib/extend").extendFlat;t.exports=u({x:n.x,y:n.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:n.histnorm,histfunc:n.histfunc,nbinsx:n.nbinsx,xbins:a("x"),nbinsy:n.nbinsy,ybins:a("y"),autobinx:n.autobinx,autobiny:n.autobiny,bingroup:u({},n.bingroup,{}),xbingroup:u({},n.bingroup,{}),ybingroup:u({},n.bingroup,{}),xgap:i.xgap,ygap:i.ygap,zsmooth:i.zsmooth,xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z",1),hovertemplate:l({},{keys:"z"}),showlegend:u({},o.showlegend,{dflt:false})},c("",{cLetter:"z",autoColorDflt:false}))},{"../../components/colorscale/attributes":162,"../../lib/extend":279,"../../plots/attributes":327,"../../plots/cartesian/axis_format_attributes":334,"../../plots/template_attributes":368,"../heatmap/attributes":434,"../histogram/attributes":449,"../histogram/bin_attributes":451}],463:[function(e,t,r){"use strict";var pe=e("../../lib");var ve=e("../../plots/cartesian/axes");var ge=e("../histogram/bin_functions");var me=e("../histogram/norm_functions");var _e=e("../histogram/average");var f=e("../histogram/bin_label_vals");var ye=e("../histogram/calc").calcAllAutoBins;t.exports=function e(t,r){var n=ve.getFromId(t,r.xaxis);var a=ve.getFromId(t,r.yaxis);var i=r.xcalendar;var o=r.ycalendar;var s=function(e){return n.r2c(e,0,i)};var l=function(e){return a.r2c(e,0,o)};var c=function(e){return n.c2r(e,0,i)};var u=function(e){return a.c2r(e,0,o)};var f,d,h,p;var v=ye(t,r,n,"x");var g=v[0];var m=v[1];var _=ye(t,r,a,"y");var y=_[0];var b=_[1];var x=r._length;if(m.length>x)m.splice(x,m.length-x);if(b.length>x)b.splice(x,b.length-x);var w=[];var A=[];var T=[];var k=typeof g.size==="string";var M=typeof y.size==="string";var S=[];var C=[];var L=k?S:g;var E=M?C:y;var D=0;var O=[];var P=[];var I=r.histnorm;var R=r.histfunc;var z=I.indexOf("density")!==-1;var N=R==="max"||R==="min";var F=N?null:0;var j=ge.count;var B=me[I];var H=false;var U=[];var V=[];var q="z"in r?r.z:"marker"in r&&Array.isArray(r.marker.color)?r.marker.color:"";if(q&&R!=="count"){H=R==="avg";j=ge[R]}var Y=g.size;var G=s(g.start);var W=s(g.end)+(G-ve.tickIncrement(G,Y,false,i))/1e6;for(f=G;f<W;f=ve.tickIncrement(f,Y,false,i)){A.push(F);S.push(f);if(H)T.push(0)}S.push(f);var X=A.length;var Z=(f-G)/X;var J=c(G+Z/2);var $=y.size;var Q=l(y.start);var K=l(y.end)+(Q-ve.tickIncrement(Q,$,false,o))/1e6;for(f=Q;f<K;f=ve.tickIncrement(f,$,false,o)){w.push(A.slice());C.push(f);var ee=new Array(X);for(d=0;d<X;d++)ee[d]=[];P.push(ee);if(H)O.push(T.slice())}C.push(f);var te=w.length;var re=(f-Q)/te;var ne=u(Q+re/2);if(z){U=be(A.length,L,Z,k);V=be(w.length,E,re,M)}if(!k&&n.type==="date")L=xe(s,L);if(!M&&a.type==="date")E=xe(l,E);var ae=true;var ie=true;var oe=new Array(X);var se=new Array(te);var le=Infinity;var ce=Infinity;var ue=Infinity;var fe=Infinity;for(f=0;f<x;f++){var de=m[f];var he=b[f];h=pe.findBin(de,L);p=pe.findBin(he,E);if(h>=0&&h<X&&p>=0&&p<te){D+=j(h,f,w[p],q,O[p]);P[p][h].push(f);if(ae){if(oe[h]===undefined)oe[h]=de;else if(oe[h]!==de)ae=false}if(ie){if(se[p]===undefined)se[p]=he;else if(se[p]!==he)ie=false}le=Math.min(le,de-S[h]);ce=Math.min(ce,S[h+1]-de);ue=Math.min(ue,he-C[p]);fe=Math.min(fe,C[p+1]-he)}}if(H){for(p=0;p<te;p++)D+=_e(w[p],O[p])}if(B){for(p=0;p<te;p++)B(w[p],D,U,V[p])}return{x:m,xRanges:we(S,ae&&oe,le,ce,n,i),x0:J,dx:Z,y:b,yRanges:we(C,ie&&se,ue,fe,a,o),y0:ne,dy:re,z:w,pts:P}};function be(e,t,r,n){var a=new Array(e);var i;if(n){for(i=0;i<e;i++)a[i]=1/(t[i+1]-t[i])}else{var o=1/r;for(i=0;i<e;i++)a[i]=o}return a}function xe(e,t){return{start:e(t.start),end:e(t.end),size:t.size}}function we(e,t,r,n,a,i){var o;var s=e.length-1;var l=new Array(s);var c=f(r,n,e,a,i);for(o=0;o<s;o++){var u=(t||[])[o];l[o]=u===undefined?[c(e[o]),c(e[o+1],true)]:[u,u]}return l}},{"../../lib":285,"../../plots/cartesian/axes":331,"../histogram/average":450,"../histogram/bin_functions":452,"../histogram/bin_label_vals":453,"../histogram/calc":454,"../histogram/norm_functions":461}],464:[function(e,t,r){"use strict";var o=e("../../lib");var s=e("./sample_defaults");var l=e("../heatmap/style_defaults");var c=e("../../components/colorscale/defaults");var u=e("./attributes");t.exports=function e(r,n,t,a){function i(e,t){return o.coerce(r,n,u,e,t)}s(r,n,i,a);if(n.visible===false)return;l(r,n,i,a);c(r,n,a,i,{prefix:"",cLetter:"z"});i("hovertemplate");i("xhoverformat");i("yhoverformat")}},{"../../components/colorscale/defaults":165,"../../lib":285,"../heatmap/style_defaults":447,"./attributes":462,"./sample_defaults":467}],465:[function(e,t,r){"use strict";var p=e("../heatmap/hover");var v=e("../../plots/cartesian/axes").hoverLabelText;t.exports=function e(t,r,n,a,i){var o=p(t,r,n,a,i);if(!o)return;t=o[0];var s=t.index;var l=s[0];var c=s[1];var u=t.cd[0];var f=u.trace;var d=u.xRanges[c];var h=u.yRanges[l];t.xLabel=v(t.xa,[d[0],d[1]],f.xhoverformat);t.yLabel=v(t.ya,[h[0],h[1]],f.yhoverformat);return o}},{"../../plots/cartesian/axes":331,"../heatmap/hover":441}],466:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../heatmap/calc"),plot:e("../heatmap/plot"),layerName:"heatmaplayer",colorbar:e("../heatmap/colorbar"),style:e("../heatmap/style"),hoverPoints:e("./hover"),eventData:e("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":345,"../heatmap/calc":435,"../heatmap/colorbar":437,"../heatmap/plot":445,"../heatmap/style":446,"../histogram/cross_trace_defaults":456,"../histogram/event_data":458,"./attributes":462,"./defaults":464,"./hover":465}],467:[function(e,t,r){"use strict";var f=e("../../registry");var d=e("../../lib");t.exports=function e(t,r,n,a){var i=n("x");var o=n("y");var s=d.minRowLength(i);var l=d.minRowLength(o);if(!s||!l){r.visible=false;return}r._length=Math.min(s,l);var c=f.getComponentMethod("calendars","handleTraceDefaults");c(t,r,["x","y"],a);var u=n("z")||n("marker.color");if(u)n("histfunc");n("histnorm");n("autobinx");n("autobiny")}},{"../../lib":285,"../../registry":373}],468:[function(e,t,r){"use strict";var n=e("../histogram2d/attributes");var a=e("../contour/attributes");var i=e("../../components/colorscale/attributes");var o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var s=e("../../lib/extend").extendFlat;t.exports=s({x:n.x,y:n.y,z:n.z,marker:n.marker,histnorm:n.histnorm,histfunc:n.histfunc,nbinsx:n.nbinsx,xbins:n.xbins,nbinsy:n.nbinsy,ybins:n.ybins,autobinx:n.autobinx,autobiny:n.autobiny,bingroup:n.bingroup,xbingroup:n.xbingroup,ybingroup:n.ybingroup,autocontour:a.autocontour,ncontours:a.ncontours,contours:a.contours,line:{color:a.line.color,width:s({},a.line.width,{dflt:.5}),dash:a.line.dash,smoothing:a.line.smoothing,editType:"plot"},xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z",1),hovertemplate:n.hovertemplate},i("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":162,"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../contour/attributes":412,"../histogram2d/attributes":462}],469:[function(e,t,r){"use strict";var s=e("../../lib");var l=e("../histogram2d/sample_defaults");var c=e("../contour/contours_defaults");var u=e("../contour/style_defaults");var f=e("./attributes");t.exports=function e(r,n,t,a){function i(e,t){return s.coerce(r,n,f,e,t)}function o(e){return s.coerce2(r,n,f,e)}l(r,n,i,a);if(n.visible===false)return;c(r,n,i,o);u(r,n,i,a);i("hovertemplate");i("xhoverformat");i("yhoverformat")}},{"../../lib":285,"../contour/contours_defaults":419,"../contour/style_defaults":433,"../histogram2d/sample_defaults":467,"./attributes":468}],470:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../contour/calc"),plot:e("../contour/plot").plot,layerName:"contourlayer",style:e("../contour/style"),colorbar:e("../contour/colorbar"),hoverPoints:e("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":345,"../contour/calc":413,"../contour/colorbar":415,"../contour/hover":425,"../contour/plot":430,"../contour/style":432,"../histogram/cross_trace_defaults":456,"./attributes":468,"./defaults":469}],471:[function(e,t,r){"use strict";var n=e("../../plots/attributes");var a=e("../../plots/template_attributes").hovertemplateAttrs;var i=e("../../lib/extend").extendFlat;var o=e("./constants").colormodel;var s=["rgb","rgba","rgba256","hsl","hsla"];var l=[];var c=[];for(var u=0;u<s.length;u++){var f=o[s[u]];l.push("For the `"+s[u]+"` colormodel, it is ["+(f.zminDflt||f.min).join(", ")+"].");c.push("For the `"+s[u]+"` colormodel, it is ["+(f.zmaxDflt||f.max).join(", ")+"].")}t.exports=i({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:s,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",false],dflt:false,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:i({},n.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:a({},{keys:["z","color","colormodel"]}),transforms:undefined})},{"../../lib/extend":279,"../../plots/attributes":327,"../../plots/template_attributes":368,"./constants":473}],472:[function(e,t,r){"use strict";var i=e("../../lib");var n=e("./constants");var o=e("fast-isnumeric");var p=e("../../plots/cartesian/axes");var v=e("../../lib").maxRowLength;var g=e("./helpers").getImageSize;t.exports=function e(t,r){var n;var a;if(r._hasZ){n=r.z.length;a=v(r.z)}else if(r._hasSource){var i=g(r.source);n=i.height;a=i.width}var o=p.getFromId(t,r.xaxis||"x");var s=p.getFromId(t,r.yaxis||"y");var l=o.d2c(r.x0)-r.dx/2;var c=s.d2c(r.y0)-r.dy/2;var u;var f=[l,l+a*r.dx];var d=[c,c+n*r.dy];if(o&&o.type==="log")for(u=0;u<a;u++)f.push(l+u*r.dx);if(s&&s.type==="log")for(u=0;u<n;u++)d.push(c+u*r.dy);r._extremes[o._id]=p.findExtremes(o,f);r._extremes[s._id]=p.findExtremes(s,d);r._scaler=m(r);var h={x0:l,y0:c,z:r.z,w:a,h:n};return[h]};function s(t,r,n,a){return function(e){return i.constrain((e-t)*r,n,a)}}function l(t,r){return function(e){return i.constrain(e,t,r)}}function m(a){var e=n.colormodel[a.colormodel];var t=e.colormodel||a.colormodel;var i=t.length;a._sArray=[];for(var r=0;r<i;r++){if(e.min[r]!==a.zmin[r]||e.max[r]!==a.zmax[r]){a._sArray.push(s(a.zmin[r],(e.max[r]-e.min[r])/(a.zmax[r]-a.zmin[r]),e.min[r],e.max[r]))}else{a._sArray.push(l(e.min[r],e.max[r]))}}return function(e){var t=e.slice(0,i);for(var r=0;r<i;r++){var n=t[r];if(!o(n))return false;t[r]=a._sArray[r](n)}return t}}},{"../../lib":285,"../../plots/cartesian/axes":331,"./constants":473,"./helpers":476,"fast-isnumeric":31}],473:[function(e,t,r){"use strict";t.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(e){return e.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(e){var t=e.slice(0,3);t[1]=t[1]+"%";t[2]=t[2]+"%";return t},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(e){var t=e.slice(0,4);t[1]=t[1]+"%";t[2]=t[2]+"%";return t},suffix:["","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],474:[function(e,t,r){"use strict";var o=e("../../lib");var s=e("./attributes");var l=e("./constants");var c=e("../../snapshot/helpers").IMAGE_URL_PREFIX;t.exports=function e(r,n){function t(e,t){return o.coerce(r,n,s,e,t)}t("source");if(n.source&&!n.source.match(c))delete n.source;n._hasSource=!!n.source;var a=t("z");n._hasZ=!(a===undefined||!a.length||!a[0]||!a[0].length);if(!n._hasZ&&!n._hasSource){n.visible=false;return}t("x0");t("y0");t("dx");t("dy");var i;if(n._hasZ){t("colormodel","rgb");i=l.colormodel[n.colormodel];t("zmin",i.zminDflt||i.min);t("zmax",i.zmaxDflt||i.max)}else if(n._hasSource){n.colormodel="rgba256";i=l.colormodel[n.colormodel];n.zmin=i.zminDflt;n.zmax=i.zmaxDflt}t("zsmooth");t("text");t("hovertext");t("hovertemplate");n._length=null}},{"../../lib":285,"../../snapshot/helpers":377,"./attributes":471,"./constants":473}],475:[function(e,t,r){"use strict";t.exports=function e(t,r){if("xVal"in r)t.x=r.xVal;if("yVal"in r)t.y=r.yVal;if(r.xa)t.xaxis=r.xa;if(r.ya)t.yaxis=r.ya;t.color=r.color;t.colormodel=r.trace.colormodel;if(!t.z)t.z=r.color;return t}},{}],476:[function(e,t,r){"use strict";var n=e("probe-image-size/sync");var a=e("../../snapshot/helpers").IMAGE_URL_PREFIX;var i=e("buffer/").Buffer;r.getImageSize=function(e){var t=e.replace(a,"");var r=new i(t,"base64");return n(r)}},{"../../snapshot/helpers":377,"buffer/":28,"probe-image-size/sync":95}],477:[function(e,t,r){"use strict";var k=e("../../components/fx");var M=e("../../lib");var S=e("./constants");t.exports=function e(t,r,n){var a=t.cd[0];var i=a.trace;var o=t.xa;var s=t.ya;if(k.inbox(r-a.x0,r-(a.x0+a.w*i.dx),0)>0||k.inbox(n-a.y0,n-(a.y0+a.h*i.dy),0)>0){return}var l=Math.floor((r-a.x0)/i.dx);var c=Math.floor(Math.abs(n-a.y0)/i.dy);var u;if(i._hasZ){u=a.z[c][l]}else if(i._hasSource){u=i._canvas.el.getContext("2d").getImageData(l,c,1,1).data}if(!u)return;var f=a.hi||i.hoverinfo;var d;if(f){var h=f.split("+");if(h.indexOf("all")!==-1)h=["color"];if(h.indexOf("color")!==-1)d=true}var p=S.colormodel[i.colormodel];var v=p.colormodel||i.colormodel;var g=v.length;var m=i._scaler(u);var _=p.suffix;var y=[];if(i.hovertemplate||d){y.push("["+[m[0]+_[0],m[1]+_[1],m[2]+_[2]].join(", "));if(g===4)y.push(", "+m[3]+_[3]);y.push("]");y=y.join("");t.extraText=v.toUpperCase()+": "+y}var b;if(Array.isArray(i.hovertext)&&Array.isArray(i.hovertext[c])){b=i.hovertext[c][l]}else if(Array.isArray(i.text)&&Array.isArray(i.text[c])){b=i.text[c][l]}var x=s.c2p(a.y0+(c+.5)*i.dy);var w=a.x0+(l+.5)*i.dx;var A=a.y0+(c+.5)*i.dy;var T="["+u.slice(0,i.colormodel.length).join(", ")+"]";return[M.extendFlat(t,{index:[c,l],x0:o.c2p(a.x0+l*i.dx),x1:o.c2p(a.x0+(l+1)*i.dx),y0:x,y1:x,color:m,xVal:w,xLabelVal:w,yVal:A,yLabelVal:A,zLabelVal:T,text:b,hovertemplateLabels:{zLabel:T,colorLabel:y,"color[0]Label":m[0]+_[0],"color[1]Label":m[1]+_[1],"color[2]Label":m[2]+_[2],"color[3]Label":m[3]+_[3]}})]}},{"../../components/fx":195,"../../lib":285,"./constants":473}],478:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover"),eventData:e("./event_data"),moduleType:"trace",name:"image",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:false,meta:{}}},{"../../plots/cartesian":345,"./attributes":471,"./calc":472,"./defaults":474,"./event_data":475,"./hover":477,"./plot":479,"./style":480}],479:[function(e,t,r){"use strict";var N=e("@plotly/d3");var F=e("../../lib");var j=F.strTranslate;var B=e("../../constants/xmlns_namespaces");var H=e("./constants");var a=F.isIOS()||F.isSafari()||F.isIE();t.exports=function e(P,t,r,n){var I=t.xaxis;var R=t.yaxis;var z=!(a||P._context._exportedPlot);F.makeTraceGroups(n,r,"im").each(function(e){var t=N.select(this);var p=e[0];var v=p.trace;var a=(v.zsmooth==="fast"||v.zsmooth===false&&z)&&!v._hasZ&&v._hasSource&&I.type==="linear"&&R.type==="linear";v._realImage=a;var i=p.z;var g=p.x0;var m=p.y0;var o=p.w;var s=p.h;var _=v.dx;var y=v.dy;var b,r,n,x,l,w;w=0;while(b===undefined&&w<o){b=I.c2p(g+w*_);w++}w=o;while(r===undefined&&w>0){r=I.c2p(g+w*_);w--}w=0;while(x===undefined&&w<s){x=R.c2p(m+w*y);w++}w=s;while(l===undefined&&w>0){l=R.c2p(m+w*y);w--}if(r<b){n=r;r=b;b=n}if(l<x){n=x;x=l;l=n}if(!a){var c=.5;b=Math.max(-c*I._length,b);r=Math.min((1+c)*I._length,r);x=Math.max(-c*R._length,x);l=Math.min((1+c)*R._length,l)}var A=Math.round(r-b);var T=Math.round(l-x);var u=A<=0||T<=0;if(u){var f=t.selectAll("image").data([]);f.exit().remove();return}function d(e){var t=document.createElement("canvas");t.width=A;t.height=T;var r=t.getContext("2d");var n=function(e){return F.constrain(Math.round(I.c2p(g+e*_)-b),0,A)};var a=function(e){return F.constrain(Math.round(R.c2p(m+e*y)-x),0,T)};var i=H.colormodel[v.colormodel];var o=i.colormodel||v.colormodel;var s=i.fmt;var l;for(w=0;w<p.w;w++){var c=n(w);var u=n(w+1);if(u===c||isNaN(u)||isNaN(c))continue;for(var f=0;f<p.h;f++){var d=a(f);var h=a(f+1);if(h===d||isNaN(h)||isNaN(d)||!e(w,f))continue;l=v._scaler(e(w,f));if(l){r.fillStyle=o+"("+s(l).join(",")+")"}else{r.fillStyle="rgba(0,0,0,0)"}r.fillRect(c,d,u-c,h-d)}}return t}var h=t.selectAll("image").data([e]);h.enter().append("svg:image").attr({xmlns:B.svg,preserveAspectRatio:"none"});h.exit().remove();var k=v.zsmooth===false?H.pixelatedStyle:"";if(a){var M=F.simpleMap(I.range,I.r2l);var S=F.simpleMap(R.range,R.r2l);var C=M[1]<M[0];var L=S[1]>S[0];if(C||L){var E=b+A/2;var D=x+T/2;k+="transform:"+j(E+"px",D+"px")+"scale("+(C?-1:1)+","+(L?-1:1)+")"+j(-E+"px",-D+"px")+";"}}h.attr("style",k);var O=new Promise(function(e){if(v._hasZ){e()}else if(v._hasSource){if(v._canvas&&v._canvas.el.width===o&&v._canvas.el.height===s&&v._canvas.source===v.source){e()}else{var t=document.createElement("canvas");t.width=o;t.height=s;var r=t.getContext("2d");v._image=v._image||new Image;var n=v._image;n.onload=function(){r.drawImage(n,0,0);v._canvas={el:t,source:v.source};e()};n.setAttribute("src",v.source)}}}).then(function(){var e,t;if(v._hasZ){t=d(function(e,t){return i[t][e]});e=t.toDataURL("image/png")}else if(v._hasSource){if(a){e=v.source}else{var r=v._canvas.el.getContext("2d");var n=r.getImageData(0,0,o,s).data;t=d(function(e,t){var r=4*(t*o+e);return[n[r],n[r+1],n[r+2],n[r+3]]});e=t.toDataURL("image/png")}}h.attr({"xlink:href":e,height:T,width:A,x:b,y:x})});P._promises.push(O)})}},{"../../constants/xmlns_namespaces":266,"../../lib":285,"./constants":473,"@plotly/d3":20}],480:[function(e,t,r){"use strict";var n=e("@plotly/d3");t.exports=function e(t){n.select(t).selectAll(".im image").style("opacity",function(e){return e[0].trace.opacity})}},{"@plotly/d3":20}],481:[function(e,t,r){"use strict";var n=e("../../plots/attributes");var a=e("../../plots/domain").attributes;var i=e("../../plots/font_attributes");var o=e("../../components/color/attributes");var s=e("../../plots/template_attributes").hovertemplateAttrs;var l=e("../../plots/template_attributes").texttemplateAttrs;var c=e("../../lib/extend").extendFlat;var u=i({editType:"plot",arrayOk:true,colorEditType:"plot"});t.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:true,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:true,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:true,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:c({},n.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:s({},{keys:["label","color","value","percent","text"]}),texttemplate:l({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:true,editType:"plot"},textfont:c({},u,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:c({},u,{}),outsidetextfont:c({},u,{}),automargin:{valType:"boolean",dflt:false,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:c({},u,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:a({name:"pie",trace:true,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:true,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:true,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:c({},u,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":154,"../../lib/extend":279,"../../plots/attributes":327,"../../plots/domain":359,"../../plots/font_attributes":360,"../../plots/template_attributes":368}],482:[function(e,t,a){"use strict";var i=e("../../plots/plots");a.name="pie";a.plot=function(e,t,r,n){i.plotBasePlot(a.name,e,t,r,n)};a.clean=function(e,t,r,n){i.cleanBasePlot(a.name,e,t,r,n)}},{"../../plots/plots":366}],483:[function(e,t,r){"use strict";var x=e("fast-isnumeric");var i=e("tinycolor2");var a=e("../../components/color");var h={};function n(e,t){var r=[];var n=e._fullLayout;var a=n.hiddenlabels||[];var i=t.labels;var o=t.marker.colors||[];var s=t.values;var l=t._length;var c=t._hasValues&&l;var u,f;if(t.dlabel){i=new Array(l);for(u=0;u<l;u++){i[u]=String(t.label0+u*t.dlabel)}}var d={};var h=w(n["_"+t.type+"colormap"]);var p=0;var v=false;for(u=0;u<l;u++){var g,m,_;if(c){g=s[u];if(!x(g))continue;g=+g;if(g<0)continue}else g=1;m=i[u];if(m===undefined||m==="")m=u;m=String(m);var y=d[m];if(y===undefined){d[m]=r.length;_=a.indexOf(m)!==-1;if(!_)p+=g;r.push({v:g,label:m,color:h(o[u],m),i:u,pts:[u],hidden:_})}else{v=true;f=r[y];f.v+=g;f.pts.push(u);if(!f.hidden)p+=g;if(f.color===false&&o[u]){f.color=h(o[u],m)}}}var b=t.type==="funnelarea"?v:t.sort;if(b)r.sort(function(e,t){return t.v-e.v});if(r[0])r[0].vTotal=p;return r}function w(n){return function e(t,r){if(!t)return false;t=i(t);if(!t.isValid())return false;t=a.addOpacity(t,t.getAlpha());if(!n[r])n[r]=t;return t}}function o(e,t){var r=(t||{}).type;if(!r)r="pie";var n=e._fullLayout;var a=e.calcdata;var i=n[r+"colorway"];var o=n["_"+r+"colormap"];if(n["extend"+r+"colors"]){i=p(i,h)}var s=0;for(var l=0;l<a.length;l++){var c=a[l];var u=c[0].trace.type;if(u!==r)continue;for(var f=0;f<c.length;f++){var d=c[f];if(d.color===false){if(o[d.label]){d.color=o[d.label]}else{o[d.label]=d.color=i[s%i.length];s++}}}}}function p(e,t){var r;var n=JSON.stringify(e);var a=t[n];if(!a){a=e.slice();for(r=0;r<e.length;r++){a.push(i(e[r]).lighten(20).toHexString())}for(r=0;r<e.length;r++){a.push(i(e[r]).darken(20).toHexString())}t[n]=a}return a}t.exports={calc:n,crossTraceCalc:o,makePullColorFn:w,generateExtendedColors:p}},{"../../components/color":155,"fast-isnumeric":31,tinycolor2:119}],484:[function(e,t,r){"use strict";var l=e("fast-isnumeric");var y=e("../../lib");var b=e("./attributes");var x=e("../../plots/domain").defaults;var w=e("../bar/defaults").handleText;function A(e,t){var r=Array.isArray(e);var n=y.isArrayOrTypedArray(t);var a=Math.min(r?e.length:Infinity,n?t.length:Infinity);if(!isFinite(a))a=0;if(a&&n){var i;for(var o=0;o<a;o++){var s=t[o];if(l(s)&&s>0){i=true;break}}if(!i)a=0}return{hasLabels:r,hasValues:n,len:a}}function n(r,n,e,t){function a(e,t){return y.coerce(r,n,b,e,t)}var i=a("labels");var o=a("values");var s=A(i,o);var l=s.len;n._hasLabels=s.hasLabels;n._hasValues=s.hasValues;if(!n._hasLabels&&n._hasValues){a("label0");a("dlabel")}if(!l){n.visible=false;return}n._length=l;var c=a("marker.line.width");if(c)a("marker.line.color");a("marker.colors");a("scalegroup");var u=a("text");var f=a("texttemplate");var d;if(!f)d=a("textinfo",Array.isArray(u)?"text+percent":"percent");a("hovertext");a("hovertemplate");if(f||d&&d!=="none"){var h=a("textposition");w(r,n,t,a,h,{moduleHasSelected:false,moduleHasUnselected:false,moduleHasConstrain:false,moduleHasCliponaxis:false,moduleHasTextangle:false,moduleHasInsideanchor:false});var p=Array.isArray(h)||h==="auto";var v=p||h==="outside";if(v){a("automargin")}if(h==="inside"||h==="auto"||Array.isArray(h)){a("insidetextorientation")}}x(n,t,a);var g=a("hole");var m=a("title.text");if(m){var _=a("title.position",g?"middle center":"top center");if(!g&&_==="middle center")n.title.position="top center";y.coerceFont(a,"title.font",t.font)}a("sort");a("direction");a("rotation");a("pull")}t.exports={handleLabelsAndValues:A,supplyDefaults:n}},{"../../lib":285,"../../plots/domain":359,"../bar/defaults":387,"./attributes":481,"fast-isnumeric":31}],485:[function(e,t,r){"use strict";var a=e("../../components/fx/helpers").appendArrayMultiPointValues;t.exports=function e(t,r){var n={curveNumber:r.index,pointNumbers:t.pts,data:r._input,fullData:r,label:t.label,color:t.color,value:t.v,percent:t.percent,text:t.text,v:t.v};if(t.pts.length===1)n.pointNumber=n.i=t.pts[0];a(n,r,t.pts);if(r.type==="funnelarea"){delete n.v;delete n.i}return n}},{"../../components/fx/helpers":191}],486:[function(e,t,n){"use strict";var a=e("../../lib");function i(e){return e.indexOf("e")!==-1?e.replace(/[.]?0+e/,"e"):e.indexOf(".")!==-1?e.replace(/[.]?0+$/,""):e}n.formatPiePercent=function e(t,r){var n=i((t*100).toPrecision(3));return a.numSeparate(n,r)+"%"};n.formatPieValue=function e(t,r){var n=i(t.toPrecision(10));return a.numSeparate(n,r)};n.getFirstFilled=function e(t,r){if(!Array.isArray(t))return;for(var n=0;n<r.length;n++){var a=t[r[n]];if(a||a===0||a==="")return a}};n.castOption=function e(t,r){if(Array.isArray(t))return n.getFirstFilled(t,r);else if(t)return t};n.getRotationAngle=function(e){return(e==="auto"?0:e)*Math.PI/180}},{"../../lib":285}],487:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,supplyLayoutDefaults:e("./layout_defaults"),layoutAttributes:e("./layout_attributes"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style"),styleOne:e("./style_one"),moduleType:"trace",name:"pie",basePlotModule:e("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":481,"./base_plot":482,"./calc":483,"./defaults":484,"./layout_attributes":488,"./layout_defaults":489,"./plot":490,"./style":491,"./style_one":492}],488:[function(e,t,r){"use strict";t.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:true,editType:"calc"}}},{}],489:[function(e,t,r){"use strict";var a=e("../../lib");var i=e("./layout_attributes");t.exports=function e(r,n){function t(e,t){return a.coerce(r,n,i,e,t)}t("hiddenlabels");t("piecolorway",n.colorway);t("extendpiecolors")}},{"../../lib":285,"./layout_attributes":488}],490:[function(e,t,r){"use strict";var x=e("@plotly/d3");var u=e("../../plots/plots");var m=e("../../components/fx");var f=e("../../components/color");var w=e("../../components/drawing");var A=e("../../lib");var d=A.strScale;var h=A.strTranslate;var T=e("../../lib/svg_text_utils");var n=e("../bar/uniform_text");var k=n.recordMinTextSize;var a=n.clearMinTextSize;var s=e("../bar/constants").TEXTPAD;var M=e("./helpers");var _=e("./event_data");var b=e("../../lib").isValidTextValue;function i(y,e){var b=y._fullLayout;var c=b._size;a("pie",b);o(e,y);B(e,c);var t=A.makeTraceGroups(b._pielayer,e,"trace").each(function(g){var l=x.select(this);var m=g[0];var _=m.trace;U(g);l.attr("stroke-linejoin","round");l.each(function(){var e=x.select(this).selectAll("g.slice").data(g);e.enter().append("g").classed("slice",true);e.exit().remove();var p=[[[],[]],[[],[]]];var v=false;e.each(function(l,c){if(l.hidden){x.select(this).selectAll("path,g").remove();return}l.pointNumber=l.i;l.curveNumber=_.index;p[l.pxmid[1]<0?0:1][l.pxmid[0]<0?0:1].push(l);var u=m.cx;var f=m.cy;var e=x.select(this);var t=e.selectAll("path.surface").data([l]);t.enter().append("path").classed("surface",true).style({"pointer-events":"all"});e.call(C,y,g);if(_.pull){var r=+M.castOption(_.pull,l.pts)||0;if(r>0){u+=r*l.pxmid[0];f+=r*l.pxmid[1]}}l.cxFinal=u;l.cyFinal=f;function n(e,t,r,n){var a=n*(t[0]-e[0]);var i=n*(t[1]-e[1]);return"a"+n*m.r+","+n*m.r+" 0 "+l.largeArc+(r?" 1 ":" 0 ")+a+","+i}var a=_.hole;if(l.v===m.vTotal){var i="M"+(u+l.px0[0])+","+(f+l.px0[1])+n(l.px0,l.pxmid,true,1)+n(l.pxmid,l.px0,true,1)+"Z";if(a){t.attr("d","M"+(u+a*l.px0[0])+","+(f+a*l.px0[1])+n(l.px0,l.pxmid,false,a)+n(l.pxmid,l.px0,false,a)+"Z"+i)}else t.attr("d",i)}else{var o=n(l.px0,l.px1,true,1);if(a){var s=1-a;t.attr("d","M"+(u+a*l.px1[0])+","+(f+a*l.px1[1])+n(l.px1,l.px0,false,a)+"l"+s*l.px0[0]+","+s*l.px0[1]+o+"Z")}else{t.attr("d","M"+u+","+f+"l"+l.px0[0]+","+l.px0[1]+o+"Z")}}q(y,l,m);var d=M.castOption(_.textposition,l.pts);var h=e.selectAll("g.slicetext").data(l.text&&d!=="none"?[0]:[]);h.enter().append("g").classed("slicetext",true);h.exit().remove();h.each(function(){var e=A.ensureSingle(x.select(this),"text","",function(e){e.attr("data-notex",1)});var t=A.ensureUniformFontSize(y,d==="outside"?L(_,l,b.font):E(_,l,b.font));e.text(l.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(w.font,t).call(T.convertToTspans,y);var r=w.bBox(e.node());var n;if(d==="outside"){n=R(r,l)}else{n=D(r,l,m);if(d==="auto"&&n.scale<1){var a=A.ensureUniformFontSize(y,_.outsidetextfont);e.call(w.font,a);r=w.bBox(e.node());n=R(r,l)}}var i=n.textPosAngle;var o=i===undefined?l.pxmid:V(m.r,i);n.targetX=u+o[0]*n.rCenter+(n.x||0);n.targetY=f+o[1]*n.rCenter+(n.y||0);Y(n,r);if(n.outside){var s=n.targetY;l.yLabelMin=s-r.height/2;l.yLabelMid=s;l.yLabelMax=s+r.height/2;l.labelExtraX=0;l.labelExtraY=0;v=true}n.fontSize=t.size;k(_.type,n,b);g[c].transform=n;e.attr("transform",A.getTextTransform(n))})});var t=x.select(this).selectAll("g.titletext").data(_.title.text?[0]:[]);t.enter().append("g").classed("titletext",true);t.exit().remove();t.each(function(){var e=A.ensureSingle(x.select(this),"text","",function(e){e.attr("data-notex",1)});var t=_.title.text;if(_._meta){t=A.templateString(t,_._meta)}e.text(t).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(w.font,_.title.font).call(T.convertToTspans,y);var r;if(_.title.position==="middle center"){r=z(m)}else{r=N(m,c)}e.attr("transform",h(r.x,r.y)+d(Math.min(1,r.scale))+h(r.tx,r.ty))});if(v)j(p,_);S(e,_);if(v&&_.automargin){var r=w.bBox(l.node());var n=_.domain;var a=c.w*(n.x[1]-n.x[0]);var i=c.h*(n.y[1]-n.y[0]);var o=(.5*a-m.r)/c.w;var s=(.5*i-m.r)/c.h;u.autoMargin(y,"pie."+_.uid+".automargin",{xl:n.x[0]-o,xr:n.x[1]+o,yb:n.y[0]-s,yt:n.y[1]+s,l:Math.max(m.cx-m.r-r.left,0),r:Math.max(r.right-(m.cx+m.r),0),b:Math.max(r.bottom-(m.cy+m.r),0),t:Math.max(m.cy-m.r-r.top,0),pad:5})}})});setTimeout(function(){t.selectAll("tspan").each(function(){var e=x.select(this);if(e.attr("dy"))e.attr("dy",e.attr("dy"))})},0)}function S(e,c){e.each(function(e){var t=x.select(this);if(!e.labelExtraX&&!e.labelExtraY){t.select("path.textline").remove();return}var r=t.select("g.slicetext text");e.transform.targetX+=e.labelExtraX;e.transform.targetY+=e.labelExtraY;r.attr("transform",A.getTextTransform(e.transform));var n=e.cxFinal+e.pxmid[0];var a=e.cyFinal+e.pxmid[1];var i="M"+n+","+a;var o=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4;if(e.labelExtraX){var s=e.labelExtraX*e.pxmid[1]/e.pxmid[0];var l=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]);if(Math.abs(s)>Math.abs(l)){i+="l"+l*e.pxmid[0]/e.pxmid[1]+","+l+"H"+(n+e.labelExtraX+o)}else{i+="l"+e.labelExtraX+","+s+"v"+(l-s)+"h"+o}}else{i+="V"+(e.yLabelMid+e.labelExtraY)+"h"+o}A.ensureSingle(t,"path","textline").call(f.stroke,c.outsidetextfont.color).attr({"stroke-width":Math.min(2,c.outsidetextfont.size/8),d:i,fill:"none"})})}function C(e,d,t){var h=t[0];var p=h.trace;var v=h.cx;var g=h.cy;if(!("_hasHoverLabel"in p))p._hasHoverLabel=false;if(!("_hasHoverEvent"in p))p._hasHoverEvent=false;e.on("mouseover",function(e){var t=d._fullLayout;var r=d._fullData[p.index];if(d._dragging||t.hovermode===false)return;var n=r.hoverinfo;if(Array.isArray(n)){n=m.castHoverinfo({hoverinfo:[M.castOption(n,e.pts)],_module:p._module},t,0)}if(n==="all")n="label+text+value+percent+name";if(r.hovertemplate||n!=="none"&&n!=="skip"&&n){var a=e.rInscribed||0;var i=v+e.pxmid[0]*(1-a);var o=g+e.pxmid[1]*(1-a);var s=t.separators;var l=[];if(n&&n.indexOf("label")!==-1)l.push(e.label);e.text=M.castOption(r.hovertext||r.text,e.pts);if(n&&n.indexOf("text")!==-1){var c=e.text;if(A.isValidTextValue(c))l.push(c)}e.value=e.v;e.valueLabel=M.formatPieValue(e.v,s);if(n&&n.indexOf("value")!==-1)l.push(e.valueLabel);e.percent=e.v/h.vTotal;e.percentLabel=M.formatPiePercent(e.percent,s);if(n&&n.indexOf("percent")!==-1)l.push(e.percentLabel);var u=r.hoverlabel;var f=u.font;m.loneHover({trace:p,x0:i-a*h.r,x1:i+a*h.r,y:o,text:l.join("<br>"),name:r.hovertemplate||n.indexOf("name")!==-1?r.name:undefined,idealAlign:e.pxmid[0]<0?"left":"right",color:M.castOption(u.bgcolor,e.pts)||e.color,borderColor:M.castOption(u.bordercolor,e.pts),fontFamily:M.castOption(f.family,e.pts),fontSize:M.castOption(f.size,e.pts),fontColor:M.castOption(f.color,e.pts),nameLength:M.castOption(u.namelength,e.pts),textAlign:M.castOption(u.align,e.pts),hovertemplate:M.castOption(r.hovertemplate,e.pts),hovertemplateLabels:e,eventData:[_(e,r)]},{container:t._hoverlayer.node(),outerContainer:t._paper.node(),gd:d});p._hasHoverLabel=true}p._hasHoverEvent=true;d.emit("plotly_hover",{points:[_(e,r)],event:x.event})});e.on("mouseout",function(e){var t=d._fullLayout;var r=d._fullData[p.index];var n=x.select(this).datum();if(p._hasHoverEvent){e.originalEvent=x.event;d.emit("plotly_unhover",{points:[_(n,r)],event:x.event});p._hasHoverEvent=false}if(p._hasHoverLabel){m.loneUnhover(t._hoverlayer.node());p._hasHoverLabel=false}});e.on("click",function(e){var t=d._fullLayout;var r=d._fullData[p.index];if(d._dragging||t.hovermode===false)return;d._hoverdata=[_(e,r)];m.click(d,x.event)})}function L(e,t,r){var n=M.castOption(e.outsidetextfont.color,t.pts)||M.castOption(e.textfont.color,t.pts)||r.color;var a=M.castOption(e.outsidetextfont.family,t.pts)||M.castOption(e.textfont.family,t.pts)||r.family;var i=M.castOption(e.outsidetextfont.size,t.pts)||M.castOption(e.textfont.size,t.pts)||r.size;return{color:n,family:a,size:i}}function E(e,t,r){var n=M.castOption(e.insidetextfont.color,t.pts);if(!n&&e._input.textfont){n=M.castOption(e._input.textfont.color,t.pts)}var a=M.castOption(e.insidetextfont.family,t.pts)||M.castOption(e.textfont.family,t.pts)||r.family;var i=M.castOption(e.insidetextfont.size,t.pts)||M.castOption(e.textfont.size,t.pts)||r.size;return{color:n||f.contrast(t.color),family:a,size:i}}function o(e,t){var r,n;for(var a=0;a<e.length;a++){r=e[a][0];n=r.trace;if(n.title.text){var i=n.title.text;if(n._meta){i=A.templateString(i,n._meta)}var o=w.tester.append("text").attr("data-notex",1).text(i).call(w.font,n.title.font).call(T.convertToTspans,t);var s=w.bBox(o.node(),true);r.titleBox={width:s.width,height:s.height};o.remove()}}}function D(i,o,e){var s=e.r||o.rpx1;var t=o.rInscribed;var r=o.startangle===o.stopangle;if(r){return{rCenter:1-t,scale:0,rotate:0,textPosAngle:0}}var l=o.ring;var n=l===1&&Math.abs(o.startangle-o.stopangle)===Math.PI*2;var a=o.halfangle;var c=o.midangle;var u=e.trace.insidetextorientation;var f=u==="horizontal";var d=u==="tangential";var h=u==="radial";var p=u==="auto";var v=[];var g;if(!p){var m=function(e,t){if(O(o,e)){var r=Math.abs(e-o.startangle);var n=Math.abs(e-o.stopangle);var a=r<n?r:n;if(t==="tan"){g=I(i,s,l,a,0)}else{g=P(i,s,l,a,Math.PI/2)}g.textPosAngle=e;v.push(g)}};var _;if(f||d){for(_=4;_>=-4;_-=2)m(Math.PI*_,"tan");for(_=4;_>=-4;_-=2)m(Math.PI*(_+1),"tan")}if(f||h){for(_=4;_>=-4;_-=2)m(Math.PI*(_+1.5),"rad");for(_=4;_>=-4;_-=2)m(Math.PI*(_+.5),"rad")}}if(n||p||f){var y=Math.sqrt(i.width*i.width+i.height*i.height);g={scale:t*s*2/y,rCenter:1-t,rotate:0};g.textPosAngle=(o.startangle+o.stopangle)/2;if(g.scale>=1)return g;v.push(g)}if(p||h){g=P(i,s,l,a,c);g.textPosAngle=(o.startangle+o.stopangle)/2;v.push(g)}if(p||d){g=I(i,s,l,a,c);g.textPosAngle=(o.startangle+o.stopangle)/2;v.push(g)}var b=0;var x=0;for(var w=0;w<v.length;w++){var A=v[w].scale;if(x<A){x=A;b=w}if(!p&&x>=1){break}}return v[b]}function O(e,t){var r=e.startangle;var n=e.stopangle;return r>t&&t>n||r<t&&t<n}function P(e,t,r,n,a){t=Math.max(0,t-2*s);var i=e.width/e.height;var o=p(i,n,t,r);return{scale:o*2/e.height,rCenter:l(i,o/t),rotate:c(a)}}function I(e,t,r,n,a){t=Math.max(0,t-2*s);var i=e.height/e.width;var o=p(i,n,t,r);return{scale:o*2/e.width,rCenter:l(i,o/t),rotate:c(a+Math.PI/2)}}function l(e,t){return Math.cos(t)-e*t}function c(e){return(180/Math.PI*e+720)%180-90}function p(e,t,r,n){var a=e+1/(2*Math.tan(t));return r*Math.min(1/(Math.sqrt(a*a+.5)+a),n/(Math.sqrt(e*e+n/2)+e))}function v(e,t){if(e.v===t.vTotal&&!t.trace.hole)return 1;return Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2)}function R(e,t){var r=t.pxmid[0];var n=t.pxmid[1];var a=e.width/2;var i=e.height/2;if(r<0)a*=-1;if(n<0)i*=-1;return{scale:1,rCenter:1,rotate:0,x:a+Math.abs(i)*(a>0?1:-1)/2,y:i/(1+r*r/(n*n)),outside:true}}function z(e){var t=Math.sqrt(e.titleBox.width*e.titleBox.width+e.titleBox.height*e.titleBox.height);return{x:e.cx,y:e.cy,scale:e.trace.hole*e.r*2/t,tx:0,ty:-e.titleBox.height/2+e.trace.title.font.size}}function N(e,t){var r=1;var n=1;var a;var i=e.trace;var o={x:e.cx,y:e.cy};var s={tx:0,ty:0};s.ty+=i.title.font.size;a=F(i);if(i.title.position.indexOf("top")!==-1){o.y-=(1+a)*e.r;s.ty-=e.titleBox.height}else if(i.title.position.indexOf("bottom")!==-1){o.y+=(1+a)*e.r}var l=g(e.r,e.trace.aspectratio);var c=t.w*(i.domain.x[1]-i.domain.x[0])/2;if(i.title.position.indexOf("left")!==-1){c=c+l;o.x-=(1+a)*l;s.tx+=e.titleBox.width/2}else if(i.title.position.indexOf("center")!==-1){c*=2}else if(i.title.position.indexOf("right")!==-1){c=c+l;o.x+=(1+a)*l;s.tx-=e.titleBox.width/2}r=c/e.titleBox.width;n=y(e,t)/e.titleBox.height;return{x:o.x,y:o.y,scale:Math.min(r,n),tx:s.tx,ty:s.ty}}function g(e,t){return e/(t===undefined?1:t)}function y(e,t){var r=e.trace;var n=t.h*(r.domain.y[1]-r.domain.y[0]);return Math.min(e.titleBox.height,n/2)}function F(e){var t=e.pull;if(!t)return 0;var r;if(Array.isArray(t)){t=0;for(r=0;r<e.pull.length;r++){if(e.pull[r]>t)t=e.pull[r]}}return t}function j(e,h){var t,p,r,v,g,m,_,n,a,y,i,o,s;function l(e,t){return e.pxmid[1]-t.pxmid[1]}function c(e,t){return t.pxmid[1]-e.pxmid[1]}function u(e,t){if(!t)t={};var r=t.labelExtraY+(p?t.yLabelMax:t.yLabelMin);var n=p?e.yLabelMin:e.yLabelMax;var a=p?e.yLabelMax:e.yLabelMin;var i=e.cyFinal+g(e.px0[1],e.px1[1]);var o=r-n;var s,l,c,u,f,d;if(o*_>0)e.labelExtraY=o;if(!Array.isArray(h.pull))return;for(l=0;l<y.length;l++){c=y[l];if(c===e||(M.castOption(h.pull,e.pts)||0)>=(M.castOption(h.pull,c.pts)||0)){continue}if((e.pxmid[1]-c.pxmid[1])*_>0){u=c.cyFinal+g(c.px0[1],c.px1[1]);o=u-n-e.labelExtraY;if(o*_>0)e.labelExtraY+=o}else if((a+e.labelExtraY-i)*_>0){s=3*m*Math.abs(l-y.indexOf(e));f=c.cxFinal+v(c.px0[0],c.px1[0]);d=f+s-(e.cxFinal+e.pxmid[0])-e.labelExtraX;if(d*m>0)e.labelExtraX+=d}}}for(p=0;p<2;p++){r=p?l:c;g=p?Math.max:Math.min;_=p?1:-1;for(t=0;t<2;t++){v=t?Math.max:Math.min;m=t?1:-1;n=e[p][t];n.sort(r);a=e[1-p][t];y=a.concat(n);o=[];for(i=0;i<n.length;i++){if(n[i].yLabelMid!==undefined)o.push(n[i])}s=false;for(i=0;p&&i<a.length;i++){if(a[i].yLabelMid!==undefined){s=a[i];break}}for(i=0;i<o.length;i++){var f=i&&o[i-1];if(s&&!i)f=s;u(o[i],f)}}}}function B(e,t){var r=[];for(var n=0;n<e.length;n++){var a=e[n][0];var i=a.trace;var o=i.domain;var s=t.w*(o.x[1]-o.x[0]);var l=t.h*(o.y[1]-o.y[0]);if(i.title.text&&i.title.position!=="middle center"){l-=y(a,t)}var c=s/2;var u=l/2;if(i.type==="funnelarea"&&!i.scalegroup){u/=i.aspectratio}a.r=Math.min(c,u)/(1+F(i));a.cx=t.l+t.w*(i.domain.x[1]+i.domain.x[0])/2;a.cy=t.t+t.h*(1-i.domain.y[0])-l/2;if(i.title.text&&i.title.position.indexOf("bottom")!==-1){a.cy-=y(a,t)}if(i.scalegroup&&r.indexOf(i.scalegroup)===-1){r.push(i.scalegroup)}}H(e,r)}function H(e,t){var r,n,a;for(var i=0;i<t.length;i++){var o=Infinity;var s=t[i];for(n=0;n<e.length;n++){r=e[n][0];a=r.trace;if(a.scalegroup===s){var l;if(a.type==="pie"){l=r.r*r.r}else if(a.type==="funnelarea"){var c,u;if(a.aspectratio>1){c=r.r;u=c/a.aspectratio}else{u=r.r;c=u*a.aspectratio}c*=(1+a.baseratio)/2;l=c*u}o=Math.min(o,l/r.vTotal)}}for(n=0;n<e.length;n++){r=e[n][0];a=r.trace;if(a.scalegroup===s){var f=o*r.vTotal;if(a.type==="funnelarea"){f/=(1+a.baseratio)/2;f/=a.aspectratio}r.r=Math.sqrt(f)}}}}function U(e){var t=e[0];var r=t.r;var n=t.trace;var a=M.getRotationAngle(n.rotation);var i=2*Math.PI/t.vTotal;var o="px0";var s="px1";var l,c,u;if(n.direction==="counterclockwise"){for(l=0;l<e.length;l++){if(!e[l].hidden)break}if(l===e.length)return;a+=i*e[l].v;i*=-1;o="px1";s="px0"}u=V(r,a);for(l=0;l<e.length;l++){c=e[l];if(c.hidden)continue;c[o]=u;c.startangle=a;a+=i*c.v/2;c.pxmid=V(r,a);c.midangle=a;a+=i*c.v/2;u=V(r,a);c.stopangle=a;c[s]=u;c.largeArc=c.v>t.vTotal/2?1:0;c.halfangle=Math.PI*Math.min(c.v/t.vTotal,.5);c.ring=1-n.hole;c.rInscribed=v(c,t)}}function V(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}function q(e,t,r){var n=e._fullLayout;var a=r.trace;var i=a.texttemplate;var o=a.textinfo;if(!i&&o&&o!=="none"){var s=o.split("+");var l=function(e){return s.indexOf(e)!==-1};var c=l("label");var u=l("text");var f=l("value");var d=l("percent");var h=n.separators;var p;p=c?[t.label]:[];if(u){var v=M.getFirstFilled(a.text,t.pts);if(b(v))p.push(v)}if(f)p.push(M.formatPieValue(t.v,h));if(d)p.push(M.formatPiePercent(t.v/r.vTotal,h));t.text=p.join("<br>")}function g(e){return{label:e.label,value:e.v,valueLabel:M.formatPieValue(e.v,n.separators),percent:e.v/r.vTotal,percentLabel:M.formatPiePercent(e.v/r.vTotal,n.separators),color:e.color,text:e.text,customdata:A.castOption(a,e.i,"customdata")}}if(i){var m=A.castOption(a,t.i,"texttemplate");if(!m){t.text=""}else{var _=g(t);var y=M.getFirstFilled(a.text,t.pts);if(b(y)||y==="")_.text=y;t.text=A.texttemplateString(m,_,e._fullLayout._d3locale,_,a._meta||{})}}}function Y(e,t){var r=e.rotate*Math.PI/180;var n=Math.cos(r);var a=Math.sin(r);var i=(t.left+t.right)/2;var o=(t.top+t.bottom)/2;e.textX=i*n-o*a;e.textY=i*a+o*n;e.noCenter=true}t.exports={plot:i,formatSliceLabel:q,transformInsideText:D,determineInsideTextFont:E,positionTitleOutside:N,prerenderTitles:o,layoutAreas:B,attachFxHandlers:C,computeTransform:Y}},{"../../components/color":155,"../../components/drawing":177,"../../components/fx":195,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/plots":366,"../bar/constants":385,"../bar/uniform_text":399,"./event_data":485,"./helpers":486,"@plotly/d3":20}],491:[function(e,t,r){"use strict";var a=e("@plotly/d3");var i=e("./style_one");var n=e("../bar/uniform_text").resizeText;t.exports=function e(t){var r=t._fullLayout._pielayer.selectAll(".trace");n(t,r,"pie");r.each(function(e){var t=e[0];var r=t.trace;var n=a.select(this);n.style({opacity:r.opacity});n.selectAll("path.surface").each(function(e){a.select(this).call(i,e,r)})})}},{"../bar/uniform_text":399,"./style_one":492,"@plotly/d3":20}],492:[function(e,t,r){"use strict";var s=e("../../components/color");var l=e("./helpers").castOption;t.exports=function e(t,r,n){var a=n.marker.line;var i=l(a.color,r.pts)||s.defaultLine;var o=l(a.width,r.pts)||0;t.style("stroke-width",o).call(s.fill,r.color).call(s.stroke,i)}},{"../../components/color":155,"./helpers":486}],493:[function(e,t,r){"use strict";var s=e("../../lib");t.exports=function e(t,r){for(var n=0;n<t.length;n++)t[n].i=n;s.mergeArray(r.text,t,"tx");s.mergeArray(r.texttemplate,t,"txt");s.mergeArray(r.hovertext,t,"htx");s.mergeArray(r.customdata,t,"data");s.mergeArray(r.textposition,t,"tp");if(r.textfont){s.mergeArrayCastPositive(r.textfont.size,t,"ts");s.mergeArray(r.textfont.color,t,"tc");s.mergeArray(r.textfont.family,t,"tf")}var a=r.marker;if(a){s.mergeArrayCastPositive(a.size,t,"ms");s.mergeArrayCastPositive(a.opacity,t,"mo");s.mergeArray(a.symbol,t,"mx");s.mergeArray(a.color,t,"mc");var i=a.line;if(a.line){s.mergeArray(i.color,t,"mlc");s.mergeArrayCastPositive(i.width,t,"mlw")}var o=a.gradient;if(o&&o.type!=="none"){s.mergeArray(o.type,t,"mgt");s.mergeArray(o.color,t,"mgc")}}}},{"../../lib":285}],494:[function(e,t,r){"use strict";var n=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var a=e("../../plots/template_attributes").texttemplateAttrs;var i=e("../../plots/template_attributes").hovertemplateAttrs;var o=e("../../components/colorscale/attributes");var s=e("../../plots/font_attributes");var l=e("../../components/drawing/attributes").dash;var c=e("../../components/drawing");var u=e("./constants");var f=e("../../lib/extend").extendFlat;function d(e){return{valType:"any",dflt:0,editType:"calc"}}function h(e){return{valType:"any",editType:"calc"}}function p(e){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:true},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:true},dx:{valType:"number",dflt:1,editType:"calc",anim:true},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:true},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:true},dy:{valType:"number",dflt:1,editType:"calc",anim:true},xperiod:d("x"),yperiod:d("y"),xperiod0:h("x0"),yperiod0:h("y0"),xperiodalignment:p("x"),yperiodalignment:p("y"),xhoverformat:n("x"),yhoverformat:n("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:true,editType:"calc"},texttemplate:a({},{}),hovertext:{valType:"string",dflt:"",arrayOk:true,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:i({},{keys:u.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:true},width:{valType:"number",min:0,dflt:2,editType:"style",anim:true},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:f({},l,{editType:"style"}),simplify:{valType:"boolean",dflt:true,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:false,editType:"calc"},cliponaxis:{valType:"boolean",dflt:true,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:true},marker:f({symbol:{valType:"enumerated",values:c.symbolList,dflt:"circle",arrayOk:true,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:true,editType:"style",anim:true},size:{valType:"number",min:0,dflt:6,arrayOk:true,editType:"calc",anim:true},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:f({width:{valType:"number",min:0,arrayOk:true,editType:"style",anim:true},editType:"calc"},o("marker.line",{anim:true})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:true,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:true,editType:"calc"},editType:"calc"},editType:"calc"},o("marker",{anim:true})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:true,editType:"calc"},textfont:s({editType:"calc",colorEditType:"style",arrayOk:true})}},{"../../components/colorscale/attributes":162,"../../components/drawing":177,"../../components/drawing/attributes":176,"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../../plots/font_attributes":360,"../../plots/template_attributes":368,"./constants":498}],495:[function(e,t,r){"use strict";var O=e("fast-isnumeric");var P=e("../../lib");var I=e("../../plots/cartesian/axes");var R=e("../../plots/cartesian/align_period");var z=e("../../constants/numerical").BADNUM;var m=e("./subtypes");var N=e("./colorscale_calc");var F=e("./arrays_to_calcdata");var j=e("./calc_selection");function n(e,t){var r=e._fullLayout;var n=I.getFromId(e,t.xaxis||"x");var a=I.getFromId(e,t.yaxis||"y");var i=n.makeCalcdata(t,"x");var o=a.makeCalcdata(t,"y");var s=R(t,n,"x",i);var l=R(t,a,"y",o);var c=t._length;var u=new Array(c);var f=t.ids;var d=V(t,r,n,a);var h=false;var p,v,g,m,_,y;U(r,t);var b="x";var x="y";var w;if(d){P.pushUnique(d.traceIndices,t._expandedIndex);p=d.orientation==="v";if(p){x="s";w="x"}else{b="s";w="y"}_=d.stackgaps==="interpolate"}else{var A=H(t,c);B(e,t,n,a,s,l,A)}var T=!!t.xperiodalignment;var k=!!t.yperiodalignment;for(v=0;v<c;v++){var M=u[v]={};var S=O(s[v]);var C=O(l[v]);if(S&&C){M[b]=s[v];M[x]=l[v];if(T){M.orig_x=i[v]}if(k){M.orig_y=o[v]}}else if(d&&(p?S:C)){M[w]=p?s[v]:l[v];M.gap=true;if(_){M.s=z;h=true}else{M.s=0}}else{M[b]=M[x]=z}if(f){M.id=String(f[v])}}F(u,t);N(e,t);j(u,t);if(d){v=0;while(v<u.length){if(u[v][w]===z){u.splice(v,1)}else v++}P.sort(u,function(e,t){return e[w]-t[w]||e.i-t.i});if(h){v=0;while(v<u.length-1&&u[v].gap){v++}y=u[v].s;if(!y)y=u[v].s=0;for(g=0;g<v;g++){u[g].s=y}m=u.length-1;while(m>v&&u[m].gap){m--}y=u[m].s;for(g=u.length-1;g>m;g--){u[g].s=y}while(v<m){v++;if(u[v].gap){g=v+1;while(u[g].gap){g++}var L=u[v-1][w];var E=u[v-1].s;var D=(u[g].s-E)/(u[g][w]-L);while(v<g){u[v].s=E+(u[v][w]-L)*D;v++}}}}}return u}function B(e,t,r,n,a,i,o){var s=t._length;var l=e._fullLayout;var c=r._id;var u=n._id;var f=l._firstScatter[_(t)]===t.uid;var d=(V(t,l,r,n)||{}).orientation;var h=t.fill;r._minDtick=0;n._minDtick=0;var p={padded:true};var v={padded:true};if(o){p.ppad=v.ppad=o}var g=s<2||a[0]!==a[s-1]||i[0]!==i[s-1];if(g&&(h==="tozerox"||h==="tonextx"&&(f||d==="h"))){p.tozero=true}else if(!(t.error_y||{}).visible&&(h==="tonexty"||h==="tozeroy"||!m.hasMarkers(t)&&!m.hasText(t))){p.padded=false;p.ppad=0}if(g&&(h==="tozeroy"||h==="tonexty"&&(f||d==="v"))){v.tozero=true}else if(h==="tonextx"||h==="tozerox"){v.padded=false}if(c)t._extremes[c]=I.findExtremes(r,a,p);if(u)t._extremes[u]=I.findExtremes(n,i,v)}function H(e,t){if(!m.hasMarkers(e))return;var r=e.marker;var n=1.6*(e.marker.sizeref||1);var a;if(e.marker.sizemode==="area"){a=function(e){return Math.max(Math.sqrt((e||0)/n),3)}}else{a=function(e){return Math.max((e||0)/n,3)}}if(P.isArrayOrTypedArray(r.size)){var i={type:"linear"};I.setConvert(i);var o=i.makeCalcdata(e.marker,"size");var s=new Array(t);for(var l=0;l<t;l++){s[l]=a(o[l])}return s}else{return a(r.size)}}function U(e,t){var r=_(t);var n=e._firstScatter;if(!n[r])n[r]=t.uid}function _(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function V(e,t,r,n){var a=e.stackgroup;if(!a)return;var i=t._scatterStackOpts[r._id+n._id][a];var o=i.orientation==="v"?n:r;if(o.type==="linear"||o.type==="log")return i}t.exports={calc:n,calcMarkerSize:H,calcAxisExpansion:B,setFirstScatter:U,getStackOpts:V}},{"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/align_period":328,"../../plots/cartesian/axes":331,"./arrays_to_calcdata":493,"./calc_selection":496,"./colorscale_calc":497,"./subtypes":519,"fast-isnumeric":31}],496:[function(e,t,r){"use strict";var n=e("../../lib");t.exports=function e(t,r){if(n.isArrayOrTypedArray(r.selectedpoints)){n.tagSelected(t,r)}}},{"../../lib":285}],497:[function(e,t,r){"use strict";var n=e("../../components/colorscale/helpers").hasColorscale;var a=e("../../components/colorscale/calc");var i=e("./subtypes");t.exports=function e(t,r){if(i.hasLines(r)&&n(r,"line")){a(t,r,{vals:r.line.color,containerStr:"line",cLetter:"c"})}if(i.hasMarkers(r)){if(n(r,"marker")){a(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"})}if(n(r,"marker.line")){a(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"})}}}},{"../../components/colorscale/calc":163,"../../components/colorscale/helpers":166,"./subtypes":519}],498:[function(e,t,r){"use strict";t.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],499:[function(e,t,r){"use strict";var I=e("./calc");t.exports=function e(t,r){var n=r.xaxis;var a=r.yaxis;var i=n._id+a._id;var o=t._fullLayout._scatterStackOpts[i];if(!o)return;var s=t.calcdata;var l,c,u,f,d,h,p,v,g;var m,_,y,b,x;var w;for(var A in o){m=o[A];var T=m.traceIndices;if(!T.length)continue;_=m.stackgaps==="interpolate";y=m.groupnorm;if(m.orientation==="v"){b="x";x="y"}else{b="y";x="x"}w=new Array(T.length);for(l=0;l<w.length;l++){w[l]=false}h=s[T[0]];var k=new Array(h.length);for(l=0;l<h.length;l++){k[l]=h[l][b]}for(l=1;l<T.length;l++){d=s[T[l]];for(c=u=0;c<d.length;c++){p=d[c][b];for(;p>k[u]&&u<k.length;u++){R(d,c,k[u],l,w,_,b);c++}if(p!==k[u]){for(f=0;f<l;f++){R(s[T[f]],u,p,f,w,_,b)}k.splice(u,0,p)}u++}for(;u<k.length;u++){R(d,c,k[u],l,w,_,b);c++}}var M=k.length;for(c=0;c<h.length;c++){v=h[c][x]=h[c].s;for(l=1;l<T.length;l++){d=s[T[l]];d[0].trace._rawLength=d[0].trace._length;d[0].trace._length=M;v+=d[c].s;d[c][x]=v}if(y){g=(y==="fraction"?v:v/100)||1;for(l=0;l<T.length;l++){var S=s[T[l]][c];S[x]/=g;S.sNorm=S.s/g}}}for(l=0;l<T.length;l++){d=s[T[l]];var C=d[0].trace;var L=I.calcMarkerSize(C,C._rawLength);var E=Array.isArray(L);if(L&&w[l]||E){var D=L;L=new Array(M);for(c=0;c<M;c++){L[c]=d[c].gap?0:E?D[d[c].i]:D}}var O=new Array(M);var P=new Array(M);for(c=0;c<M;c++){O[c]=d[c].x;P[c]=d[c].y}I.calcAxisExpansion(t,C,n,a,O,P,L);d[0].t.orientation=m.orientation}}};function R(e,t,r,n,a,i,o){a[n]=true;var s={i:null,gap:true,s:0};s[o]=r;e.splice(t,0,s);if(t&&r===e[t-1][o]){var l=e[t-1];s.s=l.s;s.i=l.i;s.gap=l.gap}else if(i){s.s=c(e,t,r,o)}if(!t){e[0].t=e[1].t;e[0].trace=e[1].trace;delete e[1].t;delete e[1].trace}}function c(e,t,r,n){var a=e[t-1];var i=e[t+1];if(!i)return a.s;if(!a)return i.s;return a.s+(i.s-a.s)*(r-a[n])/(i[n]-a[n])}},{"./calc":495}],500:[function(e,t,r){"use strict";t.exports=function e(t){for(var r=0;r<t.length;r++){var n=t[r];if(n.type!=="scatter")continue;var a=n.fill;if(a==="none"||a==="toself")continue;n.opacity=undefined;if(a==="tonexty"||a==="tonextx"){for(var i=r-1;i>=0;i--){var o=t[i];if(o.type==="scatter"&&o.xaxis===n.xaxis&&o.yaxis===n.yaxis){o.opacity=undefined;break}}}}}},{}],501:[function(e,t,r){"use strict";var h=e("../../lib");var p=e("../../registry");var v=e("./attributes");var g=e("./constants");var m=e("./subtypes");var _=e("./xy_defaults");var y=e("./period_defaults");var b=e("./stack_defaults");var x=e("./marker_defaults");var w=e("./line_defaults");var A=e("./line_shape_defaults");var T=e("./text_defaults");var k=e("./fillcolor_defaults");t.exports=function e(r,n,t,a){function i(e,t){return h.coerce(r,n,v,e,t)}var o=_(r,n,a,i);if(!o)n.visible=false;if(!n.visible)return;y(r,n,a,i);i("xhoverformat");i("yhoverformat");var s=b(r,n,a,i);var l=!s&&o<g.PTS_LINESONLY?"lines+markers":"lines";i("text");i("hovertext");i("mode",l);if(m.hasLines(n)){w(r,n,t,a,i);A(r,n,i);i("connectgaps");i("line.simplify")}if(m.hasMarkers(n)){x(r,n,t,a,i,{gradient:true})}if(m.hasText(n)){i("texttemplate");T(r,n,a,i)}var c=[];if(m.hasMarkers(n)||m.hasText(n)){i("cliponaxis");i("marker.maxdisplayed");c.push("points")}i("fill",s?s.fillDflt:"none");if(n.fill!=="none"){k(r,n,t,i);if(!m.hasLines(n))A(r,n,i)}var u=(n.line||{}).color;var f=(n.marker||{}).color;if(n.fill==="tonext"||n.fill==="toself"){c.push("fills")}i("hoveron",c.join("+")||"points");if(n.hoveron!=="fills")i("hovertemplate");var d=p.getComponentMethod("errorbars","supplyDefaults");d(r,n,u||f||t,{axis:"y"});d(r,n,u||f||t,{axis:"x",inherit:"y"});h.coerceSelectionMarkerOpacity(n,i)}},{"../../lib":285,"../../registry":373,"./attributes":494,"./constants":498,"./fillcolor_defaults":502,"./line_defaults":507,"./line_shape_defaults":509,"./marker_defaults":513,"./period_defaults":514,"./stack_defaults":517,"./subtypes":519,"./text_defaults":520,"./xy_defaults":521}],502:[function(e,t,r){"use strict";var l=e("../../components/color");var c=e("../../lib").isArrayOrTypedArray;t.exports=function e(t,r,n,a){var i=false;if(r.marker){var o=r.marker.color;var s=(r.marker.line||{}).color;if(o&&!c(o)){i=o}else if(s&&!c(s)){i=s}}a("fillcolor",l.addOpacity((r.line||{}).color||i||n,.5))}},{"../../components/color":155,"../../lib":285}],503:[function(e,t,r){"use strict";var l=e("../../plots/cartesian/axes");t.exports=function e(t,r,n){var a={};var i={_fullLayout:n};var o=l.getFromTrace(i,r,"x");var s=l.getFromTrace(i,r,"y");a.xLabel=l.tickText(o,o.c2l(t.x),true).text;a.yLabel=l.tickText(s,s.c2l(t.y),true).text;return a}},{"../../plots/cartesian/axes":331}],504:[function(e,t,r){"use strict";var s=e("../../components/color");var l=e("./subtypes");t.exports=function e(t,r){var n,a;if(t.mode==="lines"){n=t.line.color;return n&&s.opacity(n)?n:t.fillcolor}else if(t.mode==="none"){return t.fill?t.fillcolor:""}else{var i=r.mcc||(t.marker||{}).color;var o=r.mlcc||((t.marker||{}).line||{}).color;a=i&&s.opacity(i)?i:o&&s.opacity(o)&&(r.mlw||((t.marker||{}).line||{}).width)?o:"";if(a){if(s.opacity(a)<.3){return s.addOpacity(a,.3)}else return a}else{n=(t.line||{}).color;return n&&s.opacity(n)&&l.hasLines(t)&&t.line.width?n:t.fillcolor}}}},{"../../components/color":155,"./subtypes":519}],505:[function(e,t,r){"use strict";var q=e("../../lib");var Y=e("../../components/fx");var G=e("../../registry");var W=e("./get_trace_color");var X=e("../../components/color");var Z=q.fillText;t.exports=function e(t,r,n,a){var i=t.cd;var o=i[0].trace;var s=t.xa;var l=t.ya;var c=s.c2p(r);var u=l.c2p(n);var f=[c,u];var d=o.hoveron||"";var h=o.mode.indexOf("markers")!==-1?3:.5;if(d.indexOf("points")!==-1){var p=function(e){var t=Math.max(3,e.mrc||0);var r=1-1/t;var n=Math.abs(s.c2p(e.x)-c);if(e.orig_x!==undefined)n+=s.c2p(e.orig_x)-s.c2p(e.x);return n<t?r*n/t:n-t+r};var v=function(e){var t=Math.max(3,e.mrc||0);var r=1-1/t;var n=Math.abs(l.c2p(e.y)-u);if(e.orig_y!==undefined)n+=l.c2p(e.orig_y)-l.c2p(e.y);return n<t?r*n/t:n-t+r};var g=function(e){var t=Math.max(h,e.mrc||0);var r=s.c2p(e.x)-c;var n=l.c2p(e.y)-u;return Math.max(Math.sqrt(r*r+n*n)-t,1-h/t)};var m=Y.getDistanceFunction(a,p,v,g);Y.getClosest(i,m,t);if(t.index!==false){var _=i[t.index];var y=s.c2p(_.x,true);var b=l.c2p(_.y,true);var x=_.mrc||1;t.index=_.i;var w=i[0].t.orientation;var A=w&&(_.sNorm||_.s);var T=w==="h"?A:_.orig_x!==undefined?_.orig_x:_.x;var k=w==="v"?A:_.orig_y!==undefined?_.orig_y:_.y;q.extendFlat(t,{color:W(o,_),x0:y-x,x1:y+x,xLabelVal:T,y0:b-x,y1:b+x,yLabelVal:k,spikeDistance:g(_),hovertemplate:o.hovertemplate});Z(_,o,t);G.getComponentMethod("errorbars","hoverInfo")(_,o,t);return[t]}}if(d.indexOf("fills")!==-1&&o._polygons){var M=o._polygons;var S=[];var C=false;var L=Infinity;var E=-Infinity;var D=Infinity;var O=-Infinity;var P,I,R,z,N,F,j,B,H;for(P=0;P<M.length;P++){R=M[P];if(R.contains(f)){C=!C;S.push(R);D=Math.min(D,R.ymin);O=Math.max(O,R.ymax)}}if(C){D=Math.max(D,0);O=Math.min(O,l._length);var U=(D+O)/2;for(P=0;P<S.length;P++){z=S[P].pts;for(I=1;I<z.length;I++){B=z[I-1][1];H=z[I][1];if(B>U!==H>=U){F=z[I-1][0];j=z[I][0];if(H-B){N=F+(j-F)*(U-B)/(H-B);L=Math.min(L,N);E=Math.max(E,N)}}}}L=Math.max(L,0);E=Math.min(E,s._length);var V=X.defaultLine;if(X.opacity(o.fillcolor))V=o.fillcolor;else if(X.opacity((o.line||{}).color)){V=o.line.color}q.extendFlat(t,{distance:t.maxHoverDistance,x0:L,x1:E,y0:U,y1:U,color:V,hovertemplate:false});delete t.index;if(o.text&&!Array.isArray(o.text)){t.text=String(o.text)}else t.text=o.name;return[t]}}}},{"../../components/color":155,"../../components/fx":195,"../../lib":285,"../../registry":373,"./get_trace_color":504}],506:[function(e,t,r){"use strict";var n=e("./subtypes");t.exports={hasLines:n.hasLines,hasMarkers:n.hasMarkers,hasText:n.hasText,isBubble:n.isBubble,attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./cross_trace_calc"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot"),colorbar:e("./marker_colorbar"),formatLabels:e("./format_labels"),style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("./select"),animatable:true,moduleType:"trace",name:"scatter",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":345,"./arrays_to_calcdata":493,"./attributes":494,"./calc":495,"./cross_trace_calc":499,"./cross_trace_defaults":500,"./defaults":501,"./format_labels":503,"./hover":505,"./marker_colorbar":512,"./plot":515,"./select":516,"./style":518,"./subtypes":519}],507:[function(e,t,r){"use strict";var c=e("../../lib").isArrayOrTypedArray;var u=e("../../components/colorscale/helpers").hasColorscale;var f=e("../../components/colorscale/defaults");t.exports=function e(t,r,n,a,i,o){var s=(t.marker||{}).color;i("line.color",n);if(u(t,"line")){f(t,r,a,i,{prefix:"line.",cLetter:"c"})}else{var l=(c(s)?false:s)||n;i("line.color",l)}i("line.width");if(!(o||{}).noDash)i("line.dash")}},{"../../components/colorscale/defaults":165,"../../components/colorscale/helpers":166,"../../lib":285}],508:[function(e,t,r){"use strict";var n=e("../../constants/numerical");var ue=n.BADNUM;var a=n.LOG_CLIP;var fe=a+.5;var de=a-.5;var he=e("../../lib");var pe=he.segmentsIntersect;var ve=he.constrain;var ge=e("./constants");t.exports=function e(a,i){var o=i.xaxis;var s=i.yaxis;var l=o.type==="log";var c=s.type==="log";var u=o._length;var f=s._length;var t=i.connectGaps;var d=i.baseTolerance;var r=i.shape;var n=r==="linear";var h=i.fill&&i.fill!=="none";var p=[];var v=ge.minTolerance;var g=a.length;var m=new Array(g);var _=0;var y;var b,x,w,A;var T;var k;var M;var S;var C,L,E,D;var O,P,I;function R(e){var t=a[e];if(!t)return false;var r=i.linearized?o.l2p(t.x):o.c2p(t.x);var n=i.linearized?s.l2p(t.y):s.c2p(t.y);if(r===ue){if(l)r=o.c2p(t.x,true);if(r===ue)return false;if(c&&n===ue){r*=Math.abs(o._m*f*(o._m>0?fe:de)/(s._m*u*(s._m>0?fe:de)))}r*=1e3}if(n===ue){if(c)n=s.c2p(t.y,true);if(n===ue)return false;n*=1e3}return[r,n]}function z(e,t,r,n){var a=r-e;var i=n-t;var o=.5-e;var s=.5-t;var l=a*a+i*i;var c=a*o+i*s;if(c>0&&c<l){var u=o*i-s*a;if(u*u<l)return true}}var N,F;function j(e,t){var r=e[0]/u;var n=e[1]/f;var a=Math.max(0,-r,r-1,-n,n-1);if(a&&N!==undefined&&z(r,n,N,F)){a=0}if(a&&t&&z(r,n,t[0]/u,t[1]/f)){a=0}return(1+ge.toleranceGrowth*a)*d}function B(e,t){var r=e[0]-t[0];var n=e[1]-t[1];return Math.sqrt(r*r+n*n)}var H=ge.maxScreensAway;var U=-u*H;var V=u*(1+H);var q=-f*H;var Y=f*(1+H);var G=[[U,q,V,q],[V,q,V,Y],[V,Y,U,Y],[U,Y,U,q]];var W,X,Z,J,$,Q;function K(e,t){var r=[];var n=0;for(var a=0;a<4;a++){var i=G[a];var o=pe(e[0],e[1],t[0],t[1],i[0],i[1],i[2],i[3]);if(o&&(!n||Math.abs(o.x-r[0][0])>1||Math.abs(o.y-r[0][1])>1)){o=[o.x,o.y];if(n&&B(o,e)<B(r[0],e))r.unshift(o);else r.push(o);n++}}return r}function ee(e){if(e[0]<U||e[0]>V||e[1]<q||e[1]>Y){return[ve(e[0],U,V),ve(e[1],q,Y)]}}function te(e,t){if(e[0]===t[0]&&(e[0]===U||e[0]===V))return true;if(e[1]===t[1]&&(e[1]===q||e[1]===Y))return true}function re(e,t){var r=[];var n=ee(e);var a=ee(t);if(n&&a&&te(n,a))return r;if(n)r.push(n);if(a)r.push(a);return r}function ne(s,l,c){return function(e,t){var r=ee(e);var n=ee(t);var a=[];if(r&&n&&te(r,n))return a;if(r)a.push(r);if(n)a.push(n);var i=2*he.constrain((e[s]+t[s])/2,l,c)-((r||e)[s]+(n||t)[s]);if(i){var o;if(r&&n){o=i>0===r[s]>n[s]?r:n}else o=r||n;o[s]+=i}return a}}var ae;if(r==="linear"||r==="spline"){ae=K}else if(r==="hv"||r==="vh"){ae=re}else if(r==="hvh")ae=ne(0,U,V);else if(r==="vhv")ae=ne(1,q,Y);function ie(e,t){var r=t[0]-e[0];var n=(t[1]-e[1])/r;var a=(e[1]*t[0]-t[1]*e[0])/r;if(a>0)return[n>0?U:V,Y];else return[n>0?V:U,q]}function oe(e){var t=e[0];var r=e[1];var n=t===m[_-1][0];var a=r===m[_-1][1];if(n&&a)return;if(_>1){var i=t===m[_-2][0];var o=r===m[_-2][1];if(n&&(t===U||t===V)&&i){if(o)_--;else m[_-1]=e}else if(a&&(r===q||r===Y)&&o){if(i)_--;else m[_-1]=e}else m[_++]=e}else m[_++]=e}function se(e){if(m[_-1][0]!==e[0]&&m[_-1][1]!==e[1]){oe([Z,J])}oe(e);$=null;Z=J=0}function le(e){N=e[0]/u;F=e[1]/f;W=e[0]<U?U:e[0]>V?V:0;X=e[1]<q?q:e[1]>Y?Y:0;if(W||X){if(!_){m[_++]=[W||e[0],X||e[1]]}else if($){var t=ae($,e);if(t.length>1){se(t[0]);m[_++]=t[1]}}else{Q=ae(m[_-1],e)[0];m[_++]=Q}var r=m[_-1];if(W&&X&&(r[0]!==W||r[1]!==X)){if($){if(Z!==W&&J!==X){if(Z&&J){oe(ie($,e))}else{oe([Z||W,J||X])}}else if(Z&&J){oe([Z,J])}}oe([W,X])}else if(Z-W&&J-X){oe([W||Z,X||J])}$=e;Z=W;J=X}else{if($){se(ae($,e)[0])}m[_++]=e}}for(y=0;y<g;y++){b=R(y);if(!b)continue;_=0;$=null;le(b);for(y++;y<g;y++){w=R(y);if(!w){if(t)continue;else break}if(!n||!i.simplify){le(w);continue}var ce=R(y+1);C=B(w,b);if(!(h&&(_===0||_===g-1))&&C<j(w,ce)*v)continue;M=[(w[0]-b[0])/C,(w[1]-b[1])/C];A=b;L=C;E=O=P=0;k=false;x=w;for(y++;y<a.length;y++){T=ce;ce=R(y+1);if(!T){if(t)continue;else break}S=[T[0]-b[0],T[1]-b[1]];I=S[0]*M[1]-S[1]*M[0];O=Math.min(O,I);P=Math.max(P,I);if(P-O>j(T,ce))break;x=T;D=S[0]*M[0]+S[1]*M[1];if(D>L){L=D;w=T;k=false}else if(D<E){E=D;A=T;k=true}}if(k){le(w);if(x!==A)le(A)}else{if(A!==b)le(A);if(x!==w)le(w)}le(x);if(y>=a.length||!T)break;le(T);b=T}if($)oe([Z||$[0],J||$[1]]);p.push(m.slice(0,_))}return p}},{"../../constants/numerical":265,"../../lib":285,"./constants":498}],509:[function(e,t,r){"use strict";t.exports=function e(t,r,n){var a=n("line.shape");if(a==="spline")n("line.smoothing")}},{}],510:[function(e,t,r){"use strict";var g={tonextx:1,tonexty:1,tonext:1};t.exports=function e(t,r,n){var a,i,o,s,l;var c={};var u=false;var f=-1;var d=0;var h=-1;for(i=0;i<n.length;i++){a=n[i][0].trace;o=a.stackgroup||"";if(o){if(o in c){l=c[o]}else{l=c[o]=d;d++}}else if(a.fill in g&&h>=0){l=h}else{l=h=d;d++}if(l<f)u=true;a._groupIndex=f=l}var p=n.slice();if(u){p.sort(function(e,t){var r=e[0].trace;var n=t[0].trace;return r._groupIndex-n._groupIndex||r.index-n.index})}var v={};for(i=0;i<p.length;i++){a=p[i][0].trace;o=a.stackgroup||"";if(a.visible===true){a._nexttrace=null;if(a.fill in g){s=v[o];a._prevtrace=s||null;if(s){s._nexttrace=a}}a._ownfill=a.fill&&(a.fill.substr(0,6)==="tozero"||a.fill==="toself"||a.fill.substr(0,2)==="to"&&!a._prevtrace);v[o]=a}else{a._prevtrace=a._nexttrace=a._ownfill=null}}return p}},{}],511:[function(e,t,r){"use strict";var o=e("fast-isnumeric");t.exports=function e(t){var r=t.marker;var n=r.sizeref||1;var a=r.sizemin||0;var i=r.sizemode==="area"?function(e){return Math.sqrt(e/n)}:function(e){return e/n};return function(e){var t=i(e/2);return o(t)&&t>0?Math.max(t,a):0}}},{"fast-isnumeric":31}],512:[function(e,t,r){"use strict";t.exports={container:"marker",min:"cmin",max:"cmax"}},{}],513:[function(e,t,r){"use strict";var f=e("../../components/color");var d=e("../../components/colorscale/helpers").hasColorscale;var h=e("../../components/colorscale/defaults");var p=e("./subtypes");t.exports=function e(t,r,n,a,i,o){var s=p.isBubble(t);var l=(t.line||{}).color;var c;o=o||{};if(l)n=l;i("marker.symbol");i("marker.opacity",s?.7:1);i("marker.size");i("marker.color",n);if(d(t,"marker")){h(t,r,a,i,{prefix:"marker.",cLetter:"c"})}if(!o.noSelect){i("selected.marker.color");i("unselected.marker.color");i("selected.marker.size");i("unselected.marker.size")}if(!o.noLine){if(l&&!Array.isArray(l)&&r.marker.color!==l){c=l}else if(s)c=f.background;else c=f.defaultLine;i("marker.line.color",c);if(d(t,"marker.line")){h(t,r,a,i,{prefix:"marker.line.",cLetter:"c"})}i("marker.line.width",s?1:0)}if(s){i("marker.sizeref");i("marker.sizemin");i("marker.sizemode")}if(o.gradient){var u=i("marker.gradient.type");if(u!=="none"){i("marker.gradient.color")}}}},{"../../components/color":155,"../../components/colorscale/defaults":165,"../../components/colorscale/helpers":166,"./subtypes":519}],514:[function(e,t,r){"use strict";var n=e("../../lib").dateTick0;var a=e("../../constants/numerical");var i=a.ONEWEEK;function l(e,t){if(e%i===0){return n(t,1)}return n(t,0)}t.exports=function e(t,r,n,a,i){if(!i){i={x:true,y:true}}if(i.x){var o=a("xperiod");if(o){a("xperiod0",l(o,r.xcalendar));a("xperiodalignment")}}if(i.y){var s=a("yperiod");if(s){a("yperiod0",l(s,r.ycalendar));a("yperiodalignment")}}}},{"../../constants/numerical":265,"../../lib":285}],515:[function(e,t,r){"use strict";var Z=e("@plotly/d3");var J=e("../../registry");var $=e("../../lib");var Q=$.ensureSingle;var K=$.identity;var ee=e("../../components/drawing");var te=e("./subtypes");var re=e("./line_points");var h=e("./link_traces");var ne=e("../../lib/polygon").tester;t.exports=function e(r,n,t,a,i,o){var s,l;var c=!i;var u=!!i&&i.duration>0;var f=h(r,n,t);s=a.selectAll("g.trace").data(f,function(e){return e[0].trace.uid});s.enter().append("g").attr("class",function(e){return"trace scatter trace"+e[0].trace.uid}).style("stroke-miterlimit",2);s.order();p(r,s,n);if(u){if(o){l=o()}var d=Z.transition().duration(i.duration).ease(i.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()});d.each(function(){a.selectAll("g.trace").each(function(e,t){v(r,t,n,e,f,this,i)})})}else{s.each(function(e,t){v(r,t,n,e,f,this,i)})}if(c){s.exit().remove()}a.selectAll("path:not([d])").remove()};function p(i,e,o){e.each(function(e){var t=Q(Z.select(this),"g","fills");ee.setClipUrl(t,o.layerClipId,i);var r=e[0].trace;var n=[];if(r._ownfill)n.push("_ownFill");if(r._nexttrace)n.push("_nextFill");var a=t.selectAll("g").data(n,K);a.enter().append("g");a.exit().each(function(e){r[e]=null}).remove();a.order().each(function(e){r[e]=Q(Z.select(this),"path","js-fill")})})}function v(m,e,_,a,t,r,n){var i;ae(m,e,_,a,t);var y=!!n&&n.duration>0;function b(e){return y?e.transition():e}var x=_.xaxis;var w=_.yaxis;var o=a[0].trace;var s=o.line;var l=Z.select(r);var c=Q(l,"g","errorbars");var u=Q(l,"g","lines");var f=Q(l,"g","points");var d=Q(l,"g","text");J.getComponentMethod("errorbars","plot")(m,c,_,n);if(o.visible!==true)return;b(l).style("opacity",o.opacity);var h,p;var v=o.fill.charAt(o.fill.length-1);if(v!=="x"&&v!=="y")v="";a[0][_.isRangePlot?"nodeRangePlot3":"node3"]=l;var g="";var A=[];var T=o._prevtrace;if(T){g=T._prevRevpath||"";p=T._nextFill;A=T._polygons}var k;var M;var S="";var C="";var L,E,D;var O,P,I,R;var z=[];var N=$.noop;h=o._ownFill;if(te.hasLines(o)||o.fill!=="none"){if(p){p.datum(a)}if(["hv","vh","hvh","vhv"].indexOf(s.shape)!==-1){L=ee.steps(s.shape);E=ee.steps(s.shape.split("").reverse().join(""))}else if(s.shape==="spline"){L=E=function(e){var t=e[e.length-1];if(e.length>1&&e[0][0]===t[0]&&e[0][1]===t[1]){return ee.smoothclosed(e.slice(1),s.smoothing)}else{return ee.smoothopen(e,s.smoothing)}}}else{L=E=function(e){return"M"+e.join("L")}}D=function(e){return E(e.reverse())};z=re(a,{xaxis:x,yaxis:w,connectGaps:o.connectgaps,baseTolerance:Math.max(s.width||1,3)/4,shape:s.shape,simplify:s.simplify,fill:o.fill});R=o._polygons=new Array(z.length);for(i=0;i<z.length;i++){o._polygons[i]=ne(z[i])}if(z.length){O=z[0][0];P=z[z.length-1];I=P[P.length-1]}N=function(n){return function(e){k=L(e);M=D(e);if(!S){S=k;C=M}else if(v){S+="L"+k.substr(1);C=M+("L"+C.substr(1))}else{S+="Z"+k;C=M+"Z"+C}if(te.hasLines(o)&&e.length>1){var t=Z.select(this);t.datum(a);if(n){b(t.style("opacity",0).attr("d",k).call(ee.lineGroupStyle)).style("opacity",1)}else{var r=b(t);r.attr("d",k);ee.singleLineStyle(a,r)}}}}}var F=u.selectAll(".js-line").data(z);b(F.exit()).style("opacity",0).remove();F.each(N(false));F.enter().append("path").classed("js-line",true).style("vector-effect","non-scaling-stroke").call(ee.lineGroupStyle).each(N(true));ee.setClipUrl(F,_.layerClipId,m);function j(e){b(e).attr("d","M0,0Z")}if(z.length){if(h){h.datum(a);if(O&&I){if(v){if(v==="y"){O[1]=I[1]=w.c2p(0,true)}else if(v==="x"){O[0]=I[0]=x.c2p(0,true)}b(h).attr("d","M"+I+"L"+O+"L"+S.substr(1)).call(ee.singleFillStyle)}else{b(h).attr("d",S+"Z").call(ee.singleFillStyle)}}}else if(p){if(o.fill.substr(0,6)==="tonext"&&S&&g){if(o.fill==="tonext"){b(p).attr("d",S+"Z"+g+"Z").call(ee.singleFillStyle)}else{b(p).attr("d",S+"L"+g.substr(1)+"Z").call(ee.singleFillStyle)}o._polygons=o._polygons.concat(A)}else{j(p);o._polygons=null}}o._prevRevpath=C;o._prevPolygons=R}else{if(h)j(h);else if(p)j(p);o._polygons=o._prevRevpath=o._prevPolygons=null}function B(e){return e.filter(function(e){return!e.gap&&e.vis})}function H(e){return e.filter(function(e){return e.vis})}function U(e){return e.filter(function(e){return!e.gap})}function V(e){return e.id}function q(e){if(e.ids){return V}}function Y(){return false}function G(e,t,r){var n,a,i;var o=r[0].trace;var s=te.hasMarkers(o);var l=te.hasText(o);var c=q(o);var u=Y;var f=Y;if(s||l){var d=K;var h=o.stackgroup;var p=h&&m._fullLayout._scatterStackOpts[x._id+w._id][h].stackgaps==="infer zero";if(o.marker.maxdisplayed||o._needsCull){d=p?H:B}else if(h&&!p){d=U}if(s)u=d;if(l)f=d}a=e.selectAll("path.point");n=a.data(u,c);var v=n.enter().append("path").classed("point",true);if(y){v.call(ee.pointStyle,o,m).call(ee.translatePoints,x,w).style("opacity",0).transition().style("opacity",1)}n.order();var g;if(s){g=ee.makePointStyleFns(o)}n.each(function(e){var t=Z.select(this);var r=b(t);i=ee.translatePoint(e,r,x,w);if(i){ee.singlePointStyle(e,r,o,g,m);if(_.layerClipId){ee.hideOutsideRangePoint(e,r,x,w,o.xcalendar,o.ycalendar)}if(o.customdata){t.classed("plotly-customdata",e.data!==null&&e.data!==undefined)}}else{r.remove()}});if(y){n.exit().transition().style("opacity",0).remove()}else{n.exit().remove()}a=t.selectAll("g");n=a.data(f,c);n.enter().append("g").classed("textpoint",true).append("text");n.order();n.each(function(e){var t=Z.select(this);var r=b(t.select("text"));i=ee.translatePoint(e,r,x,w);if(i){if(_.layerClipId){ee.hideOutsideRangePoint(e,t,x,w,o.xcalendar,o.ycalendar)}}else{t.remove()}});n.selectAll("text").call(ee.textPointStyle,o,m).each(function(e){var t=x.c2p(e.x);var r=w.c2p(e.y);Z.select(this).selectAll("tspan.line").each(function(){b(Z.select(this)).attr({x:t,y:r})})});n.exit().remove()}f.datum(a);d.datum(a);G(f,d,a);var W=o.cliponaxis===false;var X=W?null:_.layerClipId;ee.setClipUrl(f,X,m);ee.setClipUrl(d,X,m)}function ae(e,n,t,r,a){var i=t.xaxis;var o=t.yaxis;var s=Z.extent($.simpleMap(i.range,i.r2c));var l=Z.extent($.simpleMap(o.range,o.r2c));var c=r[0].trace;if(!te.hasMarkers(c))return;var u=c.marker.maxdisplayed;if(u===0)return;var f=r.filter(function(e){return e.x>=s[0]&&e.x<=s[1]&&e.y>=l[0]&&e.y<=l[1]});var d=Math.ceil(f.length/u);var h=0;a.forEach(function(e,t){var r=e[0].trace;if(te.hasMarkers(r)&&r.marker.maxdisplayed>0&&t<n){h++}});var p=Math.round(h*d/3+Math.floor(h/3)*d/7.1);r.forEach(function(e){delete e.vis});f.forEach(function(e,t){if(Math.round((t+p)%d)===0)e.vis=true})}},{"../../components/drawing":177,"../../lib":285,"../../lib/polygon":297,"../../registry":373,"./line_points":508,"./link_traces":510,"./subtypes":519,"@plotly/d3":20}],516:[function(e,t,r){"use strict";var h=e("./subtypes");t.exports=function e(t,r){var n=t.cd;var a=t.xaxis;var i=t.yaxis;var o=[];var s=n[0].trace;var l;var c;var u;var f;var d=!h.hasMarkers(s)&&!h.hasText(s);if(d)return[];if(r===false){for(l=0;l<n.length;l++){n[l].selected=0}}else{for(l=0;l<n.length;l++){c=n[l];u=a.c2p(c.x);f=i.c2p(c.y);if(c.i!==null&&r.contains([u,f],false,l,t)){o.push({pointNumber:c.i,x:a.c2d(c.x),y:i.c2d(c.y)});c.selected=1}else{c.selected=0}}}return o}},{"./subtypes":519}],517:[function(e,t,r){"use strict";var y=["orientation","groupnorm","stackgaps"];t.exports=function e(t,r,n,a){var i=n._scatterStackOpts;var o=a("stackgroup");if(o){var s=r.xaxis+r.yaxis;var l=i[s];if(!l)l=i[s]={};var c=l[o];var u=false;if(c){c.traces.push(r)}else{c=l[o]={traceIndices:[],traces:[r]};u=true}var f={orientation:r.x&&!r.y?"h":"v"};for(var d=0;d<y.length;d++){var h=y[d];var p=h+"Found";if(!c[p]){var v=t[h]!==undefined;var g=h==="orientation";if(v||u){c[h]=a(h,f[h]);if(g){c.fillDflt=c[h]==="h"?"tonextx":"tonexty"}if(v){c[p]=true;if(!u){delete c.traces[0][h];if(g){for(var m=0;m<c.traces.length-1;m++){var _=c.traces[m];if(_._input.fill!==_.fill){_.fill=c.fillDflt}}}}}}}}return c}}},{}],518:[function(e,t,r){"use strict";var a=e("@plotly/d3");var i=e("../../components/drawing");var o=e("../../registry");function n(n){var e=a.select(n).selectAll("g.trace.scatter");e.style("opacity",function(e){return e[0].trace.opacity});e.selectAll("g.points").each(function(e){var t=a.select(this);var r=e.trace||e[0].trace;s(t,r,n)});e.selectAll("g.text").each(function(e){var t=a.select(this);var r=e.trace||e[0].trace;l(t,r,n)});e.selectAll("g.trace path.js-line").call(i.lineGroupStyle);e.selectAll("g.trace path.js-fill").call(i.fillGroupStyle);o.getComponentMethod("errorbars","style")(e)}function s(e,t,r){i.pointStyle(e.selectAll("path.point"),t,r)}function l(e,t,r){i.textPointStyle(e.selectAll("text"),t,r)}function c(e,t,r){var n=t[0].trace;if(n.selectedpoints){i.selectedPointStyle(r.selectAll("path.point"),n);i.selectedTextStyle(r.selectAll("text"),n)}else{s(r,n,e);l(r,n,e)}}t.exports={style:n,stylePoints:s,styleText:l,styleOnSelect:c}},{"../../components/drawing":177,"../../registry":373,"@plotly/d3":20}],519:[function(e,t,r){"use strict";var n=e("../../lib");t.exports={hasLines:function(e){return e.visible&&e.mode&&e.mode.indexOf("lines")!==-1},hasMarkers:function(e){return e.visible&&(e.mode&&e.mode.indexOf("markers")!==-1||e.type==="splom")},hasText:function(e){return e.visible&&e.mode&&e.mode.indexOf("text")!==-1},isBubble:function(e){return n.isPlainObject(e.marker)&&n.isArrayOrTypedArray(e.marker.size)}}},{"../../lib":285}],520:[function(e,t,r){"use strict";var i=e("../../lib");t.exports=function(e,t,r,n,a){a=a||{};n("textposition");i.coerceFont(n,"textfont",r.font);if(!a.noSelect){n("selected.textfont.color");n("unselected.textfont.color")}}},{"../../lib":285}],521:[function(e,t,r){"use strict";var u=e("../../lib");var f=e("../../registry");t.exports=function e(t,r,n,a){var i=a("x");var o=a("y");var s;var l=f.getComponentMethod("calendars","handleTraceDefaults");l(t,r,["x","y"],n);if(i){var c=u.minRowLength(i);if(o){s=Math.min(c,u.minRowLength(o))}else{s=c;a("y0");a("dy")}}else{if(!o)return 0;s=u.minRowLength(o);a("x0");a("dx")}r._length=s;return s}},{"../../lib":285,"../../registry":373}],522:[function(e,t,r){"use strict";var n=e("../../plots/template_attributes").hovertemplateAttrs;var a=e("../../plots/template_attributes").texttemplateAttrs;var i=e("../scatter/attributes");var o=e("../../plots/attributes");var s=e("../../components/colorscale/attributes");var l=e("../../components/drawing/attributes").dash;var c=e("../../lib/extend").extendFlat;var u=i.marker;var f=i.line;var d=u.line;t.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:c({},i.mode,{dflt:"markers"}),text:c({},i.text,{}),texttemplate:a({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:c({},i.hovertext,{}),line:{color:f.color,width:f.width,dash:l,shape:c({},f.shape,{values:["linear","spline"]}),smoothing:f.smoothing,editType:"calc"},connectgaps:i.connectgaps,cliponaxis:i.cliponaxis,fill:c({},i.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:i.fillcolor,marker:c({symbol:u.symbol,opacity:u.opacity,maxdisplayed:u.maxdisplayed,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,line:c({width:d.width,editType:"calc"},s("marker.line")),gradient:u.gradient,editType:"calc"},s("marker")),textfont:i.textfont,textposition:i.textposition,selected:i.selected,unselected:i.unselected,hoverinfo:c({},o.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:i.hoveron,hovertemplate:n()}},{"../../components/colorscale/attributes":162,"../../components/drawing/attributes":176,"../../lib/extend":279,"../../plots/attributes":327,"../../plots/template_attributes":368,"../scatter/attributes":494}],523:[function(e,t,r){"use strict";var x=e("fast-isnumeric");var w=e("../scatter/colorscale_calc");var A=e("../scatter/arrays_to_calcdata");var T=e("../scatter/calc_selection");var k=e("../scatter/calc").calcMarkerSize;var M=["a","b","c"];var S={a:["b","c"],b:["a","c"],c:["a","b"]};t.exports=function e(t,r){var n=t._fullLayout[r.subplot];var a=n.sum;var i=r.sum||a;var o={a:r.a,b:r.b,c:r.c};var s,l,c,u,f,d;for(s=0;s<M.length;s++){c=M[s];if(o[c])continue;f=o[S[c][0]];d=o[S[c][1]];u=new Array(f.length);for(l=0;l<f.length;l++){u[l]=i-f[l]-d[l]}o[c]=u}var h=r._length;var p=new Array(h);var v,g,m,_,y,b;for(s=0;s<h;s++){v=o.a[s];g=o.b[s];m=o.c[s];if(x(v)&&x(g)&&x(m)){v=+v;g=+g;m=+m;_=a/(v+g+m);if(_!==1){v*=_;g*=_;m*=_}b=v;y=m-g;p[s]={x:y,y:b,a:v,b:g,c:m}}else p[s]={x:false,y:false}}k(r,h);w(t,r);A(p,r);T(p,r);return p}},{"../scatter/arrays_to_calcdata":493,"../scatter/calc":495,"../scatter/calc_selection":496,"../scatter/colorscale_calc":497,"fast-isnumeric":31}],524:[function(e,t,r){"use strict";var d=e("../../lib");var h=e("../scatter/constants");var p=e("../scatter/subtypes");var v=e("../scatter/marker_defaults");var g=e("../scatter/line_defaults");var m=e("../scatter/line_shape_defaults");var _=e("../scatter/text_defaults");var y=e("../scatter/fillcolor_defaults");var b=e("./attributes");t.exports=function e(r,n,t,a){function i(e,t){return d.coerce(r,n,b,e,t)}var o=i("a");var s=i("b");var l=i("c");var c;if(o){c=o.length;if(s){c=Math.min(c,s.length);if(l)c=Math.min(c,l.length)}else if(l)c=Math.min(c,l.length);else c=0}else if(s&&l){c=Math.min(s.length,l.length)}if(!c){n.visible=false;return}n._length=c;i("sum");i("text");i("hovertext");if(n.hoveron!=="fills")i("hovertemplate");var u=c<h.PTS_LINESONLY?"lines+markers":"lines";i("mode",u);if(p.hasLines(n)){g(r,n,t,a,i);m(r,n,i);i("connectgaps")}if(p.hasMarkers(n)){v(r,n,t,a,i,{gradient:true})}if(p.hasText(n)){i("texttemplate");_(r,n,a,i)}var f=[];if(p.hasMarkers(n)||p.hasText(n)){i("cliponaxis");i("marker.maxdisplayed");f.push("points")}i("fill");if(n.fill!=="none"){y(r,n,t,i);if(!p.hasLines(n))m(r,n,i)}if(n.fill==="tonext"||n.fill==="toself"){f.push("fills")}i("hoveron",f.join("+")||"points");d.coerceSelectionMarkerOpacity(n,i)}},{"../../lib":285,"../scatter/constants":498,"../scatter/fillcolor_defaults":502,"../scatter/line_defaults":507,"../scatter/line_shape_defaults":509,"../scatter/marker_defaults":513,"../scatter/subtypes":519,"../scatter/text_defaults":520,"./attributes":522}],525:[function(e,t,r){"use strict";t.exports=function e(t,r,n,a,i){if(r.xa)t.xaxis=r.xa;if(r.ya)t.yaxis=r.ya;if(a[i]){var o=a[i];t.a=o.a;t.b=o.b;t.c=o.c}else{t.a=r.a;t.b=r.b;t.c=r.c}return t}},{}],526:[function(e,t,r){"use strict";var o=e("../../plots/cartesian/axes");t.exports=function e(t,r,n){var a={};var i=n[r.subplot]._subplot;a.aLabel=o.tickText(i.aaxis,t.a,true).text;a.bLabel=o.tickText(i.baxis,t.b,true).text;a.cLabel=o.tickText(i.caxis,t.c,true).text;return a}},{"../../plots/cartesian/axes":331}],527:[function(e,t,r){"use strict";var b=e("../scatter/hover");t.exports=function e(t,r,n,a){var i=b(t,r,n,a);if(!i||i[0].index===false)return;var o=i[0];if(o.index===undefined){var s=1-o.y0/t.ya._length;var l=t.xa._length;var c=l*s/2;var u=l-c;o.x0=Math.max(Math.min(o.x0,u),c);o.x1=Math.max(Math.min(o.x1,u),c);return i}var f=o.cd[o.index];var d=o.trace;var h=o.subplot;o.a=f.a;o.b=f.b;o.c=f.c;o.xLabelVal=undefined;o.yLabelVal=undefined;var p={};p[d.subplot]={_subplot:h};var v=d._module.formatLabels(f,d,p);o.aLabel=v.aLabel;o.bLabel=v.bLabel;o.cLabel=v.cLabel;var g=f.hi||d.hoverinfo;var m=[];function _(e,t){m.push(e._hovertitle+": "+t)}if(!d.hovertemplate){var y=g.split("+");if(y.indexOf("all")!==-1)y=["a","b","c"];if(y.indexOf("a")!==-1)_(h.aaxis,o.aLabel);if(y.indexOf("b")!==-1)_(h.baxis,o.bLabel);if(y.indexOf("c")!==-1)_(h.caxis,o.cLabel)}o.extraText=m.join("<br>");o.hovertemplate=d.hovertemplate;return i}},{"../scatter/hover":505}],528:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../scatter/select"),eventData:e("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:e("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":369,"../scatter/marker_colorbar":512,"../scatter/select":516,"../scatter/style":518,"./attributes":522,"./calc":523,"./defaults":524,"./event_data":525,"./format_labels":526,"./hover":527,"./plot":529}],529:[function(e,t,r){"use strict";var s=e("../scatter/plot");t.exports=function e(t,r,n){var a=r.plotContainer;a.select(".scatterlayer").selectAll("*").remove();var i={xaxis:r.xaxis,yaxis:r.yaxis,plot:a,layerClipId:r._hasClipOnAxisFalse?r.clipIdRelative:null};var o=r.layers.frontplot.select("g.scatterlayer");s(t,i,n,o)}},{"../scatter/plot":515}],530:[function(e,t,r){"use strict";var n=e("../box/attributes");var a=e("../../lib/extend").extendFlat;var i=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;t.exports={y:n.y,x:n.x,x0:n.x0,y0:n.y0,xhoverformat:i("x"),yhoverformat:i("y"),name:a({},n.name,{}),orientation:a({},n.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:n.fillcolor,points:a({},n.boxpoints,{}),jitter:a({},n.jitter,{}),pointpos:a({},n.pointpos,{}),width:a({},n.width,{}),marker:n.marker,text:n.text,hovertext:n.hovertext,hovertemplate:n.hovertemplate,box:{visible:{valType:"boolean",dflt:false,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:false,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:n.offsetgroup,alignmentgroup:n.alignmentgroup,selected:n.selected,unselected:n.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../box/attributes":400}],531:[function(e,t,r){"use strict";var M=e("../../lib");var S=e("../../plots/cartesian/axes");var C=e("../box/calc");var L=e("./helpers");var f=e("../../constants/numerical").BADNUM;t.exports=function e(t,r){var n=C(t,r);if(n[0].t.empty)return n;var a=t._fullLayout;var i=S.getFromId(t,r[r.orientation==="h"?"xaxis":"yaxis"]);var o=Infinity;var s=-Infinity;var l=0;var c=0;for(var u=0;u<n.length;u++){var f=n[u];var d=f.pts.map(L.extractVal);var h=f.bandwidth=E(r,f,d);var p=f.span=D(r,f,i,h);if(f.min===f.max&&h===0){p=f.span=[f.min,f.max];f.density=[{v:1,t:p[0]}];f.bandwidth=h;l=Math.max(l,1)}else{var v=p[1]-p[0];var g=Math.ceil(v/(h/3));var m=v/g;if(!isFinite(m)||!isFinite(g)){M.error("Something went wrong with computing the violin span");n[0].t.empty=true;return n}var _=L.makeKDE(f,r,d);f.density=new Array(g);for(var y=0,b=p[0];b<p[1]+m/2;y++,b+=m){var x=_(b);f.density[y]={v:x,t:b};l=Math.max(l,x)}}c=Math.max(c,d.length);o=Math.min(o,p[0]);s=Math.max(s,p[1])}var w=S.findExtremes(i,[o,s],{padded:true});r._extremes[i._id]=w;if(r.width){n[0].t.maxKDE=l}else{var A=a._violinScaleGroupStats;var T=r.scalegroup;var k=A[T];if(k){k.maxKDE=Math.max(k.maxKDE,l);k.maxCount=Math.max(k.maxCount,c)}else{A[T]={maxKDE:l,maxCount:c}}}n[0].t.labels.kde=M._(t,"kde:");return n};function o(e,t,r){var n=Math.min(t,r/1.349);return 1.059*n*Math.pow(e,-.2)}function E(e,t,r){var n=t.max-t.min;if(!n){if(e.bandwidth){return e.bandwidth}else{return 0}}if(e.bandwidth){return Math.max(e.bandwidth,n/1e4)}else{var a=r.length;var i=M.stdev(r,a-1,t.mean);return Math.max(o(a,i,t.q3-t.q1),n/100)}}function D(n,a,i,e){var t=n.spanmode;var o=n.span||[];var r=[a.min,a.max];var s=[a.min-2*e,a.max+2*e];var l;function c(e){var t=o[e];var r=i.type==="multicategory"?i.r2c(t):i.d2c(t,0,n[a.valLetter+"calendar"]);return r===f?s[e]:r}if(t==="soft"){l=s}else if(t==="hard"){l=r}else{l=[c(0),c(1)]}var u={type:"linear",range:l};S.setConvert(u);u.cleanRange();return l}},{"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/axes":331,"../box/calc":401,"./helpers":534}],532:[function(e,t,r){"use strict";var p=e("../box/cross_trace_calc").setPositionOffset;var v=["v","h"];t.exports=function e(t,r){var n=t.calcdata;var a=r.xaxis;var i=r.yaxis;for(var o=0;o<v.length;o++){var s=v[o];var l=s==="h"?i:a;var c=[];for(var u=0;u<n.length;u++){var f=n[u];var d=f[0].t;var h=f[0].trace;if(h.visible===true&&h.type==="violin"&&!d.empty&&h.orientation===s&&h.xaxis===a._id&&h.yaxis===i._id){c.push(u)}}p("violin",t,c,l)}}},{"../box/cross_trace_calc":402}],533:[function(e,t,r){"use strict";var x=e("../../lib");var w=e("../../components/color");var A=e("../box/defaults");var T=e("./attributes");t.exports=function e(r,n,t,a){function i(e,t){return x.coerce(r,n,T,e,t)}function o(e,t){return x.coerce2(r,n,T,e,t)}A.handleSampleDefaults(r,n,i,a);if(n.visible===false)return;i("bandwidth");i("side");var s=i("width");if(!s){i("scalegroup",n.name);i("scalemode")}var l=i("span");var c;if(Array.isArray(l))c="manual";i("spanmode",c);var u=i("line.color",(r.marker||{}).color||t);var f=i("line.width");var d=i("fillcolor",w.addOpacity(n.line.color,.5));A.handlePointsDefaults(r,n,i,{prefix:""});var h=o("box.width");var p=o("box.fillcolor",d);var v=o("box.line.color",u);var g=o("box.line.width",f);var m=i("box.visible",Boolean(h||p||v||g));if(!m)n.box={visible:false};var _=o("meanline.color",u);var y=o("meanline.width",f);var b=i("meanline.visible",Boolean(_||y));if(!b)n.meanline={visible:false}}},{"../../components/color":155,"../../lib":285,"../box/defaults":403,"./attributes":530}],534:[function(e,t,i){"use strict";var c=e("../../lib");var r={gaussian:function(e){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*e*e)}};i.makeKDE=function(e,t,n){var a=n.length;var i=r.gaussian;var o=e.bandwidth;var s=1/(a*o);return function(e){var t=0;for(var r=0;r<a;r++){t+=i((e-n[r])/o)}return s*t}};i.getPositionOnKdePath=function(e,t,r){var n,a;if(t.orientation==="h"){n="y";a="x"}else{n="x";a="y"}var i=c.findPointOnPath(e.path,r,a,{pathLength:e.pathLength});var o=e.posCenterPx;var s=i[n];var l=t.side==="both"?2*o-s:o;return[s,l]};i.getKdeValue=function(e,t,r){var n=e.pts.map(i.extractVal);var a=i.makeKDE(e,t,n);return a(r)/e.posDensityScale};i.extractVal=function(e){return e.v}},{"../../lib":285}],535:[function(e,t,r){"use strict";var O=e("../../lib");var P=e("../../plots/cartesian/axes");var I=e("../box/hover");var R=e("./helpers");t.exports=function e(t,r,n,a,i){if(!i)i={};var o=i.hoverLayer;var s=t.cd;var l=s[0].trace;var c=l.hoveron;var u=c.indexOf("violins")!==-1;var f=c.indexOf("kde")!==-1;var d=[];var h;var p;if(u||f){var v=I.hoverOnBoxes(t,r,n,a);if(f&&v.length>0){var g=t.xa;var m=t.ya;var _,y,b,x,w;if(l.orientation==="h"){w=r;_="y";b=m;y="x";x=g}else{w=n;_="x";b=g;y="y";x=m}var A=s[t.index];if(w>=A.span[0]&&w<=A.span[1]){var T=O.extendFlat({},t);var k=x.c2p(w,true);var M=R.getKdeValue(A,l,w);var S=R.getPositionOnKdePath(A,l,k);var C=b._offset;var L=b._length;T[_+"0"]=S[0];T[_+"1"]=S[1];T[y+"0"]=T[y+"1"]=k;T[y+"Label"]=y+": "+P.hoverLabelText(x,w,l[y+"hoverformat"])+", "+s[0].t.labels.kde+" "+M.toFixed(3);T.spikeDistance=v[0].spikeDistance;var E=_+"Spike";T[E]=v[0][E];v[0].spikeDistance=undefined;v[0][E]=undefined;T.hovertemplate=false;d.push(T);p={stroke:t.color};p[_+"1"]=O.constrain(C+S[0],C,C+L);p[_+"2"]=O.constrain(C+S[1],C,C+L);p[y+"1"]=p[y+"2"]=x._offset+k}}if(u){d=d.concat(v)}}if(c.indexOf("points")!==-1){h=I.hoverOnPoints(t,r,n)}var D=o.selectAll(".violinline-"+l.uid).data(p?[0]:[]);D.enter().append("line").classed("violinline-"+l.uid,true).attr("stroke-width",1.5);D.exit().remove();D.attr(p);if(a==="closest"){if(h)return[h];return d}if(h){d.push(h);return d}return d}},{"../../lib":285,"../../plots/cartesian/axes":331,"../box/hover":405,"./helpers":534}],536:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../box/select"),moduleType:"trace",name:"violin",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":345,"../box/defaults":403,"../box/select":410,"../scatter/style":518,"./attributes":530,"./calc":531,"./cross_trace_calc":532,"./defaults":533,"./hover":535,"./layout_attributes":537,"./layout_defaults":538,"./plot":539,"./style":540}],537:[function(e,t,r){"use strict";var n=e("../box/layout_attributes");var a=e("../../lib").extendFlat;t.exports={violinmode:a({},n.boxmode,{}),violingap:a({},n.boxgap,{}),violingroupgap:a({},n.boxgroupgap,{})}},{"../../lib":285,"../box/layout_attributes":407}],538:[function(e,t,r){"use strict";var i=e("../../lib");var o=e("./layout_attributes");var s=e("../box/layout_defaults");t.exports=function e(r,n,t){function a(e,t){return i.coerce(r,n,o,e,t)}s._supply(r,n,t,a,"violin")}},{"../../lib":285,"../box/layout_defaults":408,"./layout_attributes":537}],539:[function(e,t,r){"use strict";var C=e("@plotly/d3");var p=e("../../lib");var a=e("../../components/drawing");var v=e("../box/plot");var i=e("../scatter/line_points");var g=e("./helpers");t.exports=function e(t,f,r,n){var M=t._fullLayout;var d=f.xaxis;var h=f.yaxis;function S(e){var t=i(e,{xaxis:d,yaxis:h,connectGaps:true,baseTolerance:.75,shape:"spline",simplify:true,linearized:true});return a.smoothopen(t[0],1)}p.makeTraceGroups(n,r,"trace violins").each(function(e){var t=C.select(this);var r=e[0];var m=r.t;var _=r.trace;if(_.visible!==true||m.empty){t.remove();return}var y=m.bPos;var b=m.bdPos;var x=f[m.valLetter+"axis"];var w=f[m.posLetter+"axis"];var A=_.side==="both";var T=A||_.side==="positive";var k=A||_.side==="negative";var n=t.selectAll("path.violin").data(p.identity);n.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin");n.exit().remove();n.each(function(e){var t=C.select(this);var r=e.density;var n=r.length;var a=w.c2l(e.pos+y,true);var i=w.l2p(a);var o;if(_.width){o=m.maxKDE/b}else{var s=M._violinScaleGroupStats[_.scalegroup];o=_.scalemode==="count"?s.maxKDE/b*(s.maxCount/e.pts.length):s.maxKDE/b}var l,c,u;var f,d,h,p;if(T){h=new Array(n);for(f=0;f<n;f++){p=h[f]={};p[m.posLetter]=a+r[f].v/o;p[m.valLetter]=x.c2l(r[f].t,true)}l=S(h)}if(k){h=new Array(n);for(d=0,f=n-1;d<n;d++,f--){p=h[d]={};p[m.posLetter]=a-r[f].v/o;p[m.valLetter]=x.c2l(r[f].t,true)}c=S(h)}if(A){u=l+"L"+c.substr(1)+"Z"}else{var v=[i,x.c2p(r[0].t)];var g=[i,x.c2p(r[n-1].t)];if(_.orientation==="h"){v.reverse();g.reverse()}if(T){u="M"+v+"L"+l.substr(1)+"L"+g}else{u="M"+g+"L"+c.substr(1)+"L"+v}}t.attr("d",u);e.posCenterPx=i;e.posDensityScale=o*b;e.path=t.node();e.pathLength=e.path.getTotalLength()/(A?2:1)});var a=_.box;var i=a.width;var o=(a.line||{}).width;var s;var l;if(A){s=b*i;l=0}else if(T){s=[0,b*i/2];l=o*{x:1,y:-1}[m.posLetter]}else{s=[b*i/2,0];l=o*{x:-1,y:1}[m.posLetter]}v.plotBoxAndWhiskers(t,{pos:w,val:x},_,{bPos:y,bdPos:s,bPosPxOffset:l});v.plotBoxMean(t,{pos:w,val:x},_,{bPos:y,bdPos:s,bPosPxOffset:l});var c;if(!_.box.visible&&_.meanline.visible){c=p.identity}var u=t.selectAll("path.meanline").data(c||[]);u.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke");u.exit().remove();u.each(function(e){var t=x.c2p(e.mean,true);var r=g.getPositionOnKdePath(e,_,t);C.select(this).attr("d",_.orientation==="h"?"M"+t+","+r[0]+"V"+r[1]:"M"+r[0]+","+t+"H"+r[1])});v.plotPoints(t,{x:d,y:h},_,m)})}},{"../../components/drawing":177,"../../lib":285,"../box/plot":409,"../scatter/line_points":508,"./helpers":534,"@plotly/d3":20}],540:[function(e,t,r){"use strict";var c=e("@plotly/d3");var u=e("../../components/color");var f=e("../scatter/style").stylePoints;t.exports=function e(l){var t=c.select(l).selectAll("g.trace.violins");t.style("opacity",function(e){return e[0].trace.opacity});t.each(function(e){var t=e[0].trace;var r=c.select(this);var n=t.box||{};var a=n.line||{};var i=t.meanline||{};var o=i.width;r.selectAll("path.violin").style("stroke-width",t.line.width+"px").call(u.stroke,t.line.color).call(u.fill,t.fillcolor);r.selectAll("path.box").style("stroke-width",a.width+"px").call(u.stroke,a.color).call(u.fill,n.fillcolor);var s={"stroke-width":o+"px","stroke-dasharray":2*o+"px,"+o+"px"};r.selectAll("path.mean").style(s).call(u.stroke,i.color);r.selectAll("path.meanline").style(s).call(u.stroke,i.color);f(r,t,l)})}},{"../../components/color":155,"../scatter/style":518,"@plotly/d3":20}],541:[function(e,t,r){"use strict";var f=e("../plots/cartesian/axes");var g=e("../lib");var m=e("../plot_api/plot_schema");var v=e("./helpers").pointsAccessorFunction;var d=e("../constants/numerical").BADNUM;r.moduleType="transform";r.name="aggregate";var _=r.attributes={enabled:{valType:"boolean",dflt:true,editType:"calc"},groups:{valType:"string",strict:true,noBlank:true,arrayOk:true,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:true,editType:"calc"},editType:"calc"},editType:"calc"};var y=_.aggregations;r.supplyDefaults=function(r,e){var n={};var a;function t(e,t){return g.coerce(r,n,_,e,t)}var i=t("enabled");if(!i)return n;var o=m.findArrayAttributes(e);var s={};for(a=0;a<o.length;a++)s[o[a]]=1;var l=t("groups");if(!Array.isArray(l)){if(!s[l]){n.enabled=false;return n}s[l]=0}var c=r.aggregations||[];var u=n.aggregations=new Array(c.length);var f;function d(e,t){return g.coerce(c[a],f,y,e,t)}for(a=0;a<c.length;a++){f={_index:a};var h=d("target");var p=d("func");var v=d("enabled");if(v&&h&&(s[h]||p==="count"&&s[h]===undefined)){if(p==="stddev")d("funcmode");s[h]=0;u[a]=f}else u[a]={enabled:false,_index:a}}for(a=0;a<o.length;a++){if(s[o[a]]){u.push({target:o[a],func:y.func.dflt,enabled:true,_index:-1})}}return n};r.calcTransform=function(e,t,r){if(!r.enabled)return;var n=r.groups;var a=g.getTargetArray(t,{target:n});if(!a)return;var i,o,s,l;var c={};var u={};var f=[];var d=v(t.transforms,r);var h=a.length;if(t._length)h=Math.min(h,t._length);for(i=0;i<h;i++){o=a[i];s=c[o];if(s===undefined){c[o]=f.length;l=[i];f.push(l);u[c[o]]=d(i)}else{f[s].push(i);u[c[o]]=(u[c[o]]||[]).concat(d(i))}}r._indexToPoints=u;var p=r.aggregations;for(i=0;i<p.length;i++){b(e,t,f,p[i])}if(typeof n==="string"){b(e,t,f,{target:n,func:"first",enabled:true})}t._length=f.length};function b(e,t,r,n){if(!n.enabled)return;var a=n.target;var i=g.nestedProperty(t,a);var o=i.get();var s=f.getDataConversions(e,t,a,o);var l=h(n,s);var c=new Array(r.length);for(var u=0;u<r.length;u++){c[u]=l(o,r[u])}i.set(c);if(n.func==="count"){g.pushUnique(t._arrayAttrs,a)}}function h(u,e){var t=u.func;var f=e.d2c;var l=e.c2d;switch(t){case"count":return n;case"first":return a;case"last":return i;case"sum":return function(e,t){var r=0;for(var n=0;n<t.length;n++){var a=f(e[t[n]]);if(a!==d)r+=a}return l(r)};case"avg":return function(e,t){var r=0;var n=0;for(var a=0;a<t.length;a++){var i=f(e[t[a]]);if(i!==d){r+=i;n++}}return n?l(r/n):d};case"min":return function(e,t){var r=Infinity;for(var n=0;n<t.length;n++){var a=f(e[t[n]]);if(a!==d)r=Math.min(r,a)}return r===Infinity?d:l(r)};case"max":return function(e,t){var r=-Infinity;for(var n=0;n<t.length;n++){var a=f(e[t[n]]);if(a!==d)r=Math.max(r,a)}return r===-Infinity?d:l(r)};case"range":return function(e,t){var r=Infinity;var n=-Infinity;for(var a=0;a<t.length;a++){var i=f(e[t[a]]);if(i!==d){r=Math.min(r,i);n=Math.max(n,i)}}return n===-Infinity||r===Infinity?d:l(n-r)};case"change":return function(e,t){var r=f(e[t[0]]);var n=f(e[t[t.length-1]]);return r===d||n===d?d:l(n-r)};case"median":return function(e,t){var r=[];for(var n=0;n<t.length;n++){var a=f(e[t[n]]);if(a!==d)r.push(a)}if(!r.length)return d;r.sort(g.sorterAsc);var i=(r.length-1)/2;return l((r[Math.floor(i)]+r[Math.ceil(i)])/2)};case"mode":return function(e,t){var r={};var n=0;var a=d;for(var i=0;i<t.length;i++){var o=f(e[t[i]]);if(o!==d){var s=r[o]=(r[o]||0)+1;if(s>n){n=s;a=o}}}return n?l(a):d};case"rms":return function(e,t){var r=0;var n=0;for(var a=0;a<t.length;a++){var i=f(e[t[a]]);if(i!==d){r+=i*i;n++}}return n?l(Math.sqrt(r/n)):d};case"stddev":return function(e,t){var r=0;var n=0;var a=1;var i=d;var o;for(o=0;o<t.length&&i===d;o++){i=f(e[t[o]])}if(i===d)return d;for(;o<t.length;o++){var s=f(e[t[o]]);if(s!==d){var l=s-i;r+=l;n+=l*l;a++}}var c=u.funcmode==="sample"?a-1:a;if(!c)return 0;return Math.sqrt((n-r*r/a)/c)}}}function n(e,t){return t.length}function a(e,t){return e[t[0]]}function i(e,t){return e[t[t.length-1]]}},{"../constants/numerical":265,"../lib":285,"../plot_api/plot_schema":319,"../plots/cartesian/axes":331,"./helpers":544}],542:[function(e,t,o){"use strict";var x=e("../lib");var s=e("../registry");var w=e("../plots/cartesian/axes");var A=e("./helpers").pointsAccessorFunction;var r=e("../constants/filter_ops");var u=r.COMPARISON_OPS;var f=r.INTERVAL_OPS;var d=r.SET_OPS;o.moduleType="transform";o.name="filter";o.attributes={enabled:{valType:"boolean",dflt:true,editType:"calc"},target:{valType:"string",strict:true,noBlank:true,arrayOk:true,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(u).concat(f).concat(d),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:false,editType:"calc"},editType:"calc"};o.supplyDefaults=function(r){var n={};function e(e,t){return x.coerce(r,n,o.attributes,e,t)}var t=e("enabled");if(t){var a=e("target");if(x.isArrayOrTypedArray(a)&&a.length===0){n.enabled=false;return n}e("preservegaps");e("operation");e("value");var i=s.getComponentMethod("calendars","handleDefaults");i(r,n,"valuecalendar",null);i(r,n,"targetcalendar",null)}return n};o.calcTransform=function(e,a,t){if(!t.enabled)return;var r=x.getTargetArray(a,t);if(!r)return;var n=t.target;var i=r.length;if(a._length)i=Math.min(i,a._length);var o=t.targetcalendar;var s=a._arrayAttrs;var l=t.preservegaps;if(typeof n==="string"){var c=x.nestedProperty(a,n+"calendar").get();if(c)o=c}var u=w.getDataToCoordFunc(e,a,n,r);var f=T(t,u,o);var d={};var h={};var p=0;function v(e,t){for(var r=0;r<s.length;r++){var n=x.nestedProperty(a,s[r]);e(n,t)}}var g;var m;if(l){g=function(e){d[e.astr]=x.extendDeep([],e.get());e.set(new Array(i))};m=function(e,t){var r=d[e.astr][t];e.get()[t]=r}}else{g=function(e){d[e.astr]=x.extendDeep([],e.get());e.set([])};m=function(e,t){var r=d[e.astr][t];e.get().push(r)}}v(g);var _=A(a.transforms,t);for(var y=0;y<i;y++){var b=f(r[y]);if(b){v(m,y);h[p++]=_(y)}else if(l)p++}t._indexToPoints=h;a._length=p};function T(t,r,n){var a=t.operation;var e=t.value;var i=Array.isArray(e);function o(e){return e.indexOf(a)!==-1}var s=function(e){return r(e,0,t.valuecalendar)};var l=function(e){return r(e,0,n)};var c;if(o(u)){c=i?s(e[0]):s(e)}else if(o(f)){c=i?[s(e[0]),s(e[1])]:[s(e),s(e)]}else if(o(d)){c=i?e.map(s):[s(e)]}switch(a){case"=":return function(e){return l(e)===c};case"!=":return function(e){return l(e)!==c};case"<":return function(e){return l(e)<c};case"<=":return function(e){return l(e)<=c};case">":return function(e){return l(e)>c};case">=":return function(e){return l(e)>=c};case"[]":return function(e){var t=l(e);return t>=c[0]&&t<=c[1]};case"()":return function(e){var t=l(e);return t>c[0]&&t<c[1]};case"[)":return function(e){var t=l(e);return t>=c[0]&&t<c[1]};case"(]":return function(e){var t=l(e);return t>c[0]&&t<=c[1]};case"][":return function(e){var t=l(e);return t<=c[0]||t>=c[1]};case")(":return function(e){var t=l(e);return t<c[0]||t>c[1]};case"](":return function(e){var t=l(e);return t<=c[0]||t>c[1]};case")[":return function(e){var t=l(e);return t<c[0]||t>=c[1]};case"{}":return function(e){return c.indexOf(l(e))!==-1};case"}{":return function(e){return c.indexOf(l(e))===-1}}}},{"../constants/filter_ops":263,"../lib":285,"../plots/cartesian/axes":331,"../registry":373,"./helpers":544}],543:[function(e,t,f){"use strict";var M=e("../lib");var S=e("../plot_api/plot_schema");var C=e("../plots/plots");var L=e("./helpers").pointsAccessorFunction;f.moduleType="transform";f.name="groupby";f.attributes={enabled:{valType:"boolean",dflt:true,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:true},editType:"calc"},editType:"calc"};f.supplyDefaults=function(r,e,t){var n;var a={};function i(e,t){return M.coerce(r,a,f.attributes,e,t)}var o=i("enabled");if(!o)return a;i("groups");i("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var s=r.styles;var l=a.styles=[];if(s){for(n=0;n<s.length;n++){var c=l[n]={};M.coerce(s[n],l[n],f.attributes.styles,"target");var u=M.coerce(s[n],l[n],f.attributes.styles,"value");if(M.isPlainObject(u))c.value=M.extendDeep({},u);else if(u)delete c.value}}return a};f.transform=function(e,t){var r,n,a;var i=[];for(n=0;n<e.length;n++){r=o(e[n],t);for(a=0;a<r.length;a++){i.push(r[a])}}return i};function o(e,t){var r,n,a,i,o,s,l,c,u;var f;var d=t.transform;var h=t.transformIndex;var p=e.transforms[h].groups;var v=L(e.transforms,d);if(!M.isArrayOrTypedArray(p)||p.length===0){return[e]}var g=M.filterUnique(p);var m=new Array(g.length);var _=p.length;var y=S.findArrayAttributes(e);var b=d.styles||[];var x={};for(r=0;r<b.length;r++){x[b[r].target]=b[r].value}if(d.styles){f=M.keyedContainer(d,"styles","target","value.name")}var w={};var A={};for(r=0;r<g.length;r++){s=g[r];w[s]=r;A[s]=0;l=m[r]=M.extendDeepNoArrays({},e);l._group=s;l.transforms[h]._indexToPoints={};var T=null;if(f){T=f.get(s)}if(T||T===""){l.name=T}else{l.name=M.templateString(d.nameformat,{trace:e.name,group:s})}c=l.transforms;l.transforms=[];for(n=0;n<c.length;n++){l.transforms[n]=M.extendDeepNoArrays({},c[n])}for(n=0;n<y.length;n++){M.nestedProperty(l,y[n]).set([])}}for(a=0;a<y.length;a++){i=y[a];for(n=0,u=[];n<g.length;n++){u[n]=M.nestedProperty(m[n],i).get()}o=M.nestedProperty(e,i).get();for(n=0;n<_;n++){u[w[p[n]]].push(o[n])}}for(n=0;n<_;n++){l=m[w[p[n]]];var k=l.transforms[h]._indexToPoints;k[A[p[n]]]=v(n);A[p[n]]++}for(r=0;r<g.length;r++){s=g[r];l=m[r];C.clearExpandedTraceDefaultColors(l);l=M.extendDeepNoArrays(l,x[s]||{})}return m}},{"../lib":285,"../plot_api/plot_schema":319,"../plots/plots":366,"./helpers":544}],544:[function(e,t,r){"use strict";r.pointsAccessorFunction=function(e,t){var r;var n;for(var a=0;a<e.length;a++){r=e[a];if(r===t)break;if(!r._indexToPoints||r.enabled===false)continue;n=r._indexToPoints}var i=n?function(e){return n[e]}:function(e){return[e]};return i}},{}],545:[function(e,t,a){"use strict";var g=e("../lib");var m=e("../plots/cartesian/axes");var _=e("./helpers").pointsAccessorFunction;var i=e("../constants/numerical").BADNUM;a.moduleType="transform";a.name="sort";a.attributes={enabled:{valType:"boolean",dflt:true,editType:"calc"},target:{valType:"string",strict:true,noBlank:true,arrayOk:true,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"};a.supplyDefaults=function(r){var n={};function e(e,t){return g.coerce(r,n,a.attributes,e,t)}var t=e("enabled");if(t){e("target");e("order")}return n};a.calcTransform=function(e,t,r){if(!r.enabled)return;var n=g.getTargetArray(t,r);if(!n)return;var a=r.target;var i=n.length;if(t._length)i=Math.min(i,t._length);var o=t._arrayAttrs;var s=m.getDataToCoordFunc(e,t,a,n);var l=y(r,n,s,i);var c=_(t.transforms,r);var u={};var f,d;for(f=0;f<o.length;f++){var h=g.nestedProperty(t,o[f]);var p=h.get();var v=new Array(i);for(d=0;d<i;d++){v[d]=p[l[d]]}h.set(v)}for(d=0;d<i;d++){u[d]=c(l[d])}r._indexToPoints=u;t._length=i};function y(e,t,r,n){var a=new Array(n);var i=new Array(n);var o;for(o=0;o<n;o++){a[o]={v:t[o],i:o}}a.sort(s(e,r));for(o=0;o<n;o++){i[o]=a[o].i}return i}function s(e,a){switch(e.order){case"ascending":return function(e,t){var r=a(e.v);var n=a(t.v);if(r===i){return 1}if(n===i){return-1}return r-n};case"descending":return function(e,t){var r=a(e.v);var n=a(t.v);if(r===i){return 1}if(n===i){return-1}return n-r}}}},{"../constants/numerical":265,"../lib":285,"../plots/cartesian/axes":331,"./helpers":544}],546:[function(e,t,r){"use strict";r.version="2.2.0"},{}]},{},[15])(15)});(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?t(exports):typeof define==="function"&&define.amd?define(["exports"],t):(e=typeof globalThis!=="undefined"?globalThis:e||self,t(e.Popper={}))})(this,function(e){"use strict";function C(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function k(e){if(e==null){return window}if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t?t.defaultView||window:window}return e}function c(e){var t=k(e);var r=t.pageXOffset;var n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function L(e){var t=k(e).Element;return e instanceof t||e instanceof Element}function l(e){var t=k(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function a(e){if(typeof ShadowRoot==="undefined"){return false}var t=k(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function t(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function u(e){if(e===k(e)||!l(e)){return c(e)}else{return t(e)}}function f(e){return e?(e.nodeName||"").toLowerCase():null}function E(e){return((L(e)?e.ownerDocument:e.document)||window.document).documentElement}function d(e){return C(E(e)).left+c(e).scrollLeft}function M(e){return k(e).getComputedStyle(e)}function h(e){var t=M(e),r=t.overflow,n=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+n)}function y(e,t,r){if(r===void 0){r=false}var n=E(t);var a=C(e);var i=l(t);var o={scrollLeft:0,scrollTop:0};var s={x:0,y:0};if(i||!i&&!r){if(f(t)!=="body"||h(n)){o=u(t)}if(l(t)){s=C(t);s.x+=t.clientLeft;s.y+=t.clientTop}else if(n){s.x=d(n)}}return{x:a.left+o.scrollLeft-s.x,y:a.top+o.scrollTop-s.y,width:a.width,height:a.height}}function re(e){var t=C(e);var r=e.offsetWidth;var n=e.offsetHeight;if(Math.abs(t.width-r)<=1){r=t.width}if(Math.abs(t.height-n)<=1){n=t.height}return{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function p(e){if(f(e)==="html"){return e}return e.assignedSlot||e.parentNode||(a(e)?e.host:null)||E(e)}function v(e){if(["html","body","#document"].indexOf(f(e))>=0){return e.ownerDocument.body}if(l(e)&&h(e)){return e}return v(p(e))}function b(e,t){var r;if(t===void 0){t=[]}var n=v(e);var a=n===((r=e.ownerDocument)==null?void 0:r.body);var i=k(n);var o=a?[i].concat(i.visualViewport||[],h(n)?n:[]):n;var s=t.concat(o);return a?s:s.concat(b(p(o)))}function n(e){return["table","td","th"].indexOf(f(e))>=0}function i(e){if(!l(e)||M(e).position==="fixed"){return null}return e.offsetParent}function o(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1;var r=navigator.userAgent.indexOf("Trident")!==-1;if(r&&l(e)){var n=M(e);if(n.position==="fixed"){return null}}var a=p(e);while(l(a)&&["html","body"].indexOf(f(a))<0){var i=M(a);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none"){return a}else{a=a.parentNode}}return null}function ne(e){var t=k(e);var r=i(e);while(r&&n(r)&&M(r).position==="static"){r=i(r)}if(r&&(f(r)==="html"||f(r)==="body"&&M(r).position==="static")){return t}return r||o(e)||t}var ae="top";var ie="bottom";var oe="right";var se="left";var B="auto";var D=[ae,ie,oe,se];var le="start";var g="end";var O="clippingParents";var P="viewport";var I="popper";var R="reference";var m=D.reduce(function(e,t){return e.concat([t+"-"+le,t+"-"+g])},[]);var _=[].concat(D,[B]).reduce(function(e,t){return e.concat([t,t+"-"+le,t+"-"+g])},[]);var r="beforeRead";var s="read";var x="afterRead";var w="beforeMain";var A="main";var T="afterMain";var S="beforeWrite";var z="write";var N="afterWrite";var F=[r,s,x,w,A,T,S,z,N];function j(e){var r=new Map;var n=new Set;var a=[];e.forEach(function(e){r.set(e.name,e)});function i(e){n.add(e.name);var t=[].concat(e.requires||[],e.requiresIfExists||[]);t.forEach(function(e){if(!n.has(e)){var t=r.get(e);if(t){i(t)}}});a.push(e)}e.forEach(function(e){if(!n.has(e.name)){i(e)}});return a}function H(e){var r=j(e);return F.reduce(function(e,t){return e.concat(r.filter(function(e){return e.phase===t}))},[])}function U(t){var r;return function(){if(!r){r=new Promise(function(e){Promise.resolve().then(function(){r=undefined;e(t())})})}return r}}function V(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}return[].concat(r).reduce(function(e,t){return e.replace(/%s/,t)},e)}var q='Popper: modifier "%s" provided an invalid %s property, expected %s but got %s';var Y='Popper: modifier "%s" requires "%s", but "%s" modifier is not available';var G=["name","enabled","phase","fn","effect","requires","options"];function W(n){n.forEach(function(r){Object.keys(r).forEach(function(e){switch(e){case"name":if(typeof r.name!=="string"){console.error(V(q,String(r.name),'"name"','"string"','"'+String(r.name)+'"'))}break;case"enabled":if(typeof r.enabled!=="boolean"){console.error(V(q,r.name,'"enabled"','"boolean"','"'+String(r.enabled)+'"'))}case"phase":if(F.indexOf(r.phase)<0){console.error(V(q,r.name,'"phase"',"either "+F.join(", "),'"'+String(r.phase)+'"'))}break;case"fn":if(typeof r.fn!=="function"){console.error(V(q,r.name,'"fn"','"function"','"'+String(r.fn)+'"'))}break;case"effect":if(typeof r.effect!=="function"){console.error(V(q,r.name,'"effect"','"function"','"'+String(r.fn)+'"'))}break;case"requires":if(!Array.isArray(r.requires)){console.error(V(q,r.name,'"requires"','"array"','"'+String(r.requires)+'"'))}break;case"requiresIfExists":if(!Array.isArray(r.requiresIfExists)){console.error(V(q,r.name,'"requiresIfExists"','"array"','"'+String(r.requiresIfExists)+'"'))}break;case"options":case"data":break;default:console.error('PopperJS: an invalid property has been provided to the "'+r.name+'" modifier, valid properties are '+G.map(function(e){return'"'+e+'"'}).join(", ")+'; but "'+e+'" was provided.')}r.requires&&r.requires.forEach(function(t){if(n.find(function(e){return e.name===t})==null){console.error(V(Y,String(r.name),t,t))}})})})}function X(e,r){var n=new Set;return e.filter(function(e){var t=r(e);if(!n.has(t)){n.add(t);return true}})}function ce(e){return e.split("-")[0]}function Z(e){var t=e.reduce(function(e,t){var r=e[t.name];e[t.name]=r?Object.assign({},r,t,{options:Object.assign({},r.options,t.options),data:Object.assign({},r.data,t.data)}):t;return e},{});return Object.keys(t).map(function(e){return t[e]})}function J(e){var t=k(e);var r=E(e);var n=t.visualViewport;var a=r.clientWidth;var i=r.clientHeight;var o=0;var s=0;if(n){a=n.width;i=n.height;if(!/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){o=n.offsetLeft;s=n.offsetTop}}return{width:a,height:i,x:o+d(e),y:s}}var ue=Math.max;var fe=Math.min;var $=Math.round;function Q(e){var t;var r=E(e);var n=c(e);var a=(t=e.ownerDocument)==null?void 0:t.body;var i=ue(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0);var o=ue(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0);var s=-n.scrollLeft+d(e);var l=-n.scrollTop;if(M(a||r).direction==="rtl"){s+=ue(r.clientWidth,a?a.clientWidth:0)-i}return{width:i,height:o,x:s,y:l}}function K(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t)){return true}else if(r&&a(r)){var n=t;do{if(n&&e.isSameNode(n)){return true}n=n.parentNode||n.host}while(n)}return false}function ee(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function te(e){var t=C(e);t.top=t.top+e.clientTop;t.left=t.left+e.clientLeft;t.bottom=t.top+e.clientHeight;t.right=t.left+e.clientWidth;t.width=e.clientWidth;t.height=e.clientHeight;t.x=t.left;t.y=t.top;return t}function de(e,t){return t===P?ee(J(e)):l(t)?te(t):ee(Q(E(e)))}function he(e){var t=b(p(e));var r=["absolute","fixed"].indexOf(M(e).position)>=0;var n=r&&l(e)?ne(e):e;if(!L(n)){return[]}return t.filter(function(e){return L(e)&&K(e,n)&&f(e)!=="body"})}function pe(n,e,t){var r=e==="clippingParents"?he(n):[].concat(e);var a=[].concat(r,[t]);var i=a[0];var o=a.reduce(function(e,t){var r=de(n,t);e.top=ue(r.top,e.top);e.right=fe(r.right,e.right);e.bottom=fe(r.bottom,e.bottom);e.left=ue(r.left,e.left);return e},de(n,i));o.width=o.right-o.left;o.height=o.bottom-o.top;o.x=o.left;o.y=o.top;return o}function ve(e){return e.split("-")[1]}function ge(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function me(e){var t=e.reference,r=e.element,n=e.placement;var a=n?ce(n):null;var i=n?ve(n):null;var o=t.x+t.width/2-r.width/2;var s=t.y+t.height/2-r.height/2;var l;switch(a){case ae:l={x:o,y:t.y-r.height};break;case ie:l={x:o,y:t.y+t.height};break;case oe:l={x:t.x+t.width,y:s};break;case se:l={x:t.x-r.width,y:s};break;default:l={x:t.x,y:t.y}}var c=a?ge(a):null;if(c!=null){var u=c==="y"?"height":"width";switch(i){case le:l[c]=l[c]-(t[u]/2-r[u]/2);break;case g:l[c]=l[c]+(t[u]/2-r[u]/2);break}}return l}function _e(){return{top:0,right:0,bottom:0,left:0}}function ye(e){return Object.assign({},_e(),e)}function be(r,e){return e.reduce(function(e,t){e[t]=r;return e},{})}function xe(e,t){if(t===void 0){t={}}var r=t,n=r.placement,a=n===void 0?e.placement:n,i=r.boundary,o=i===void 0?O:i,s=r.rootBoundary,l=s===void 0?P:s,c=r.elementContext,u=c===void 0?I:c,f=r.altBoundary,d=f===void 0?false:f,h=r.padding,p=h===void 0?0:h;var v=ye(typeof p!=="number"?p:be(p,D));var g=u===I?R:I;var m=e.elements.reference;var _=e.rects.popper;var y=e.elements[d?g:u];var b=pe(L(y)?y:y.contextElement||E(e.elements.popper),o,l);var x=C(m);var w=me({reference:x,element:_,strategy:"absolute",placement:a});var A=ee(Object.assign({},_,w));var T=u===I?A:x;var k={top:b.top-T.top+v.top,bottom:T.bottom-b.bottom+v.bottom,left:b.left-T.left+v.left,right:T.right-b.right+v.right};var M=e.modifiersData.offset;if(u===I&&M){var S=M[a];Object.keys(k).forEach(function(e){var t=[oe,ie].indexOf(e)>=0?1:-1;var r=[ae,ie].indexOf(e)>=0?"y":"x";k[e]+=S[r]*t})}return k}var we="Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.";var Ae="Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.";var Te={placement:"bottom",modifiers:[],strategy:"absolute"};function ke(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return!t.some(function(e){return!(e&&typeof e.getBoundingClientRect==="function")})}function Me(e){if(e===void 0){e={}}var t=e,r=t.defaultModifiers,m=r===void 0?[]:r,n=t.defaultOptions,_=n===void 0?Te:n;return function e(u,f,t){if(t===void 0){t=_}var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},Te,_),modifiersData:{},elements:{reference:u,popper:f},attributes:{},styles:{}};var s=[];var h=false;var p={state:d,setOptions:function e(t){g();d.options=Object.assign({},_,d.options,t);d.scrollParents={reference:L(u)?b(u):u.contextElement?b(u.contextElement):[],popper:b(f)};var r=H(Z([].concat(m,d.options.modifiers)));d.orderedModifiers=r.filter(function(e){return e.enabled});{var n=X([].concat(r,d.options.modifiers),function(e){var t=e.name;return t});W(n);if(ce(d.options.placement)===B){var a=d.orderedModifiers.find(function(e){var t=e.name;return t==="flip"});if(!a){console.error(['Popper: "auto" placements require the "flip" modifier be',"present and enabled to work."].join(" "))}}var i=M(f),o=i.marginTop,s=i.marginRight,l=i.marginBottom,c=i.marginLeft;if([o,s,l,c].some(function(e){return parseFloat(e)})){console.warn(['Popper: CSS "margin" styles cannot be used to apply padding',"between the popper and its reference element or boundary.","To replicate margin, use the `offset` modifier, as well as","the `padding` option in the `preventOverflow` and `flip`","modifiers."].join(" "))}}v();return p.update()},forceUpdate:function e(){if(h){return}var t=d.elements,r=t.reference,n=t.popper;if(!ke(r,n)){{console.error(we)}return}d.rects={reference:y(r,ne(n),d.options.strategy==="fixed"),popper:re(n)};d.reset=false;d.placement=d.options.placement;d.orderedModifiers.forEach(function(e){return d.modifiersData[e.name]=Object.assign({},e.data)});var a=0;for(var i=0;i<d.orderedModifiers.length;i++){{a+=1;if(a>100){console.error(Ae);break}}if(d.reset===true){d.reset=false;i=-1;continue}var o=d.orderedModifiers[i],s=o.fn,l=o.options,c=l===void 0?{}:l,u=o.name;if(typeof s==="function"){d=s({state:d,options:c,name:u,instance:p})||d}}},update:U(function(){return new Promise(function(e){p.forceUpdate();e(d)})}),destroy:function e(){g();h=true}};if(!ke(u,f)){{console.error(we)}return p}p.setOptions(t).then(function(e){if(!h&&t.onFirstUpdate){t.onFirstUpdate(e)}});function v(){d.orderedModifiers.forEach(function(e){var t=e.name,r=e.options,n=r===void 0?{}:r,a=e.effect;if(typeof a==="function"){var i=a({state:d,name:t,instance:p,options:n});var o=function e(){};s.push(i||o)}})}function g(){s.forEach(function(e){return e()});s=[]}return p}}var Se={passive:true};function Ce(e){var t=e.state,r=e.instance,n=e.options;var a=n.scroll,i=a===void 0?true:a,o=n.resize,s=o===void 0?true:o;var l=k(t.elements.popper);var c=[].concat(t.scrollParents.reference,t.scrollParents.popper);if(i){c.forEach(function(e){e.addEventListener("scroll",r.update,Se)})}if(s){l.addEventListener("resize",r.update,Se)}return function(){if(i){c.forEach(function(e){e.removeEventListener("scroll",r.update,Se)})}if(s){l.removeEventListener("resize",r.update,Se)}}}var Le={name:"eventListeners",enabled:true,phase:"write",fn:function e(){},effect:Ce,data:{}};function Ee(e){var t=e.state,r=e.name;t.modifiersData[r]=me({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var De={name:"popperOffsets",enabled:true,phase:"read",fn:Ee,data:{}};var Oe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Pe(e){var t=e.x,r=e.y;var n=window;var a=n.devicePixelRatio||1;return{x:$($(t*a)/a)||0,y:$($(r*a)/a)||0}}function Ie(e){var t;var r=e.popper,n=e.popperRect,a=e.placement,i=e.offsets,o=e.position,s=e.gpuAcceleration,l=e.adaptive,c=e.roundOffsets;var u=c===true?Pe(i):typeof c==="function"?c(i):i,f=u.x,d=f===void 0?0:f,h=u.y,p=h===void 0?0:h;var v=i.hasOwnProperty("x");var g=i.hasOwnProperty("y");var m=se;var _=ae;var y=window;if(l){var b=ne(r);var x="clientHeight";var w="clientWidth";if(b===k(r)){b=E(r);if(M(b).position!=="static"){x="scrollHeight";w="scrollWidth"}}b=b;if(a===ae){_=ie;p-=b[x]-n.height;p*=s?1:-1}if(a===se){m=oe;d-=b[w]-n.width;d*=s?1:-1}}var A=Object.assign({position:o},l&&Oe);if(s){var T;return Object.assign({},A,(T={},T[_]=g?"0":"",T[m]=v?"0":"",T.transform=(y.devicePixelRatio||1)<2?"translate("+d+"px, "+p+"px)":"translate3d("+d+"px, "+p+"px, 0)",T))}return Object.assign({},A,(t={},t[_]=g?p+"px":"",t[m]=v?d+"px":"",t.transform="",t))}function Re(e){var t=e.state,r=e.options;var n=r.gpuAcceleration,a=n===void 0?true:n,i=r.adaptive,o=i===void 0?true:i,s=r.roundOffsets,l=s===void 0?true:s;{var c=M(t.elements.popper).transitionProperty||"";if(o&&["transform","top","right","bottom","left"].some(function(e){return c.indexOf(e)>=0})){console.warn(["Popper: Detected CSS transitions on at least one of the following",'CSS properties: "transform", "top", "right", "bottom", "left".',"\n\n",'Disable the "computeStyles" modifier\'s `adaptive` option to allow',"for smooth transitions, or remove these properties from the CSS","transition declaration on the popper element if only transitioning","opacity or background-color for example.","\n\n","We recommend using the popper element as a wrapper around an inner","element that can have any CSS property transitioned for animations."].join(" "))}}var u={placement:ce(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a};if(t.modifiersData.popperOffsets!=null){t.styles.popper=Object.assign({},t.styles.popper,Ie(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))}if(t.modifiersData.arrow!=null){t.styles.arrow=Object.assign({},t.styles.arrow,Ie(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:false,roundOffsets:l})))}t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var ze={name:"computeStyles",enabled:true,phase:"beforeWrite",fn:Re,data:{}};function Ne(e){var a=e.state;Object.keys(a.elements).forEach(function(e){var t=a.styles[e]||{};var r=a.attributes[e]||{};var n=a.elements[e];if(!l(n)||!f(n)){return}Object.assign(n.style,t);Object.keys(r).forEach(function(e){var t=r[e];if(t===false){n.removeAttribute(e)}else{n.setAttribute(e,t===true?"":t)}})})}function Fe(e){var i=e.state;var o={popper:{position:i.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(i.elements.popper.style,o.popper);i.styles=o;if(i.elements.arrow){Object.assign(i.elements.arrow.style,o.arrow)}return function(){Object.keys(i.elements).forEach(function(e){var t=i.elements[e];var r=i.attributes[e]||{};var n=Object.keys(i.styles.hasOwnProperty(e)?i.styles[e]:o[e]);var a=n.reduce(function(e,t){e[t]="";return e},{});if(!l(t)||!f(t)){return}Object.assign(t.style,a);Object.keys(r).forEach(function(e){t.removeAttribute(e)})})}}var je={name:"applyStyles",enabled:true,phase:"write",fn:Ne,effect:Fe,requires:["computeStyles"]};function Be(e,t,r){var n=ce(e);var a=[se,ae].indexOf(n)>=0?-1:1;var i=typeof r==="function"?r(Object.assign({},t,{placement:e})):r,o=i[0],s=i[1];o=o||0;s=(s||0)*a;return[se,oe].indexOf(n)>=0?{x:s,y:o}:{x:o,y:s}}function He(e){var r=e.state,t=e.options,n=e.name;var a=t.offset,i=a===void 0?[0,0]:a;var o=_.reduce(function(e,t){e[t]=Be(t,r.rects,i);return e},{});var s=o[r.placement],l=s.x,c=s.y;if(r.modifiersData.popperOffsets!=null){r.modifiersData.popperOffsets.x+=l;r.modifiersData.popperOffsets.y+=c}r.modifiersData[n]=o}var Ue={name:"offset",enabled:true,phase:"main",requires:["popperOffsets"],fn:He};var Ve={left:"right",right:"left",bottom:"top",top:"bottom"};function qe(e){return e.replace(/left|right|bottom|top/g,function(e){return Ve[e]})}var Ye={start:"end",end:"start"};function Ge(e){return e.replace(/start|end/g,function(e){return Ye[e]})}function We(r,e){if(e===void 0){e={}}var t=e,n=t.placement,a=t.boundary,i=t.rootBoundary,o=t.padding,s=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?_:l;var u=ve(n);var f=u?s?m:m.filter(function(e){return ve(e)===u}):D;var d=f.filter(function(e){return c.indexOf(e)>=0});if(d.length===0){d=f;{console.error(["Popper: The `allowedAutoPlacements` option did not allow any","placements. Ensure the `placement` option matches the variation","of the allowed placements.",'For example, "auto" cannot be used to allow "bottom-start".','Use "auto-start" instead.'].join(" "))}}var h=d.reduce(function(e,t){e[t]=xe(r,{placement:t,boundary:a,rootBoundary:i,padding:o})[ce(t)];return e},{});return Object.keys(h).sort(function(e,t){return h[e]-h[t]})}function Xe(e){if(ce(e)===B){return[]}var t=qe(e);return[Ge(e),t,Ge(t)]}function Ze(e){var r=e.state,t=e.options,n=e.name;if(r.modifiersData[n]._skip){return}var a=t.mainAxis,i=a===void 0?true:a,o=t.altAxis,s=o===void 0?true:o,l=t.fallbackPlacements,c=t.padding,u=t.boundary,f=t.rootBoundary,d=t.altBoundary,h=t.flipVariations,p=h===void 0?true:h,v=t.allowedAutoPlacements;var g=r.options.placement;var m=ce(g);var _=m===g;var y=l||(_||!p?[qe(g)]:Xe(g));var b=[g].concat(y).reduce(function(e,t){return e.concat(ce(t)===B?We(r,{placement:t,boundary:u,rootBoundary:f,padding:c,flipVariations:p,allowedAutoPlacements:v}):t)},[]);var x=r.rects.reference;var w=r.rects.popper;var A=new Map;var T=true;var k=b[0];for(var M=0;M<b.length;M++){var S=b[M];var C=ce(S);var L=ve(S)===le;var E=[ae,ie].indexOf(C)>=0;var D=E?"width":"height";var O=xe(r,{placement:S,boundary:u,rootBoundary:f,altBoundary:d,padding:c});var P=E?L?oe:se:L?ie:ae;if(x[D]>w[D]){P=qe(P)}var I=qe(P);var R=[];if(i){R.push(O[C]<=0)}if(s){R.push(O[P]<=0,O[I]<=0)}if(R.every(function(e){return e})){k=S;T=false;break}A.set(S,R)}if(T){var z=p?3:1;var N=function e(r){var t=b.find(function(e){var t=A.get(e);if(t){return t.slice(0,r).every(function(e){return e})}});if(t){k=t;return"break"}};for(var F=z;F>0;F--){var j=N(F);if(j==="break")break}}if(r.placement!==k){r.modifiersData[n]._skip=true;r.placement=k;r.reset=true}}var Je={name:"flip",enabled:true,phase:"main",fn:Ze,requiresIfExists:["offset"],data:{_skip:false}};function $e(e){return e==="x"?"y":"x"}function Qe(e,t,r){return ue(e,fe(t,r))}function Ke(e){var t=e.state,r=e.options,n=e.name;var a=r.mainAxis,i=a===void 0?true:a,o=r.altAxis,s=o===void 0?false:o,l=r.boundary,c=r.rootBoundary,u=r.altBoundary,f=r.padding,d=r.tether,h=d===void 0?true:d,p=r.tetherOffset,v=p===void 0?0:p;var g=xe(t,{boundary:l,rootBoundary:c,padding:f,altBoundary:u});var m=ce(t.placement);var _=ve(t.placement);var y=!_;var b=ge(m);var x=$e(b);var w=t.modifiersData.popperOffsets;var A=t.rects.reference;var T=t.rects.popper;var k=typeof v==="function"?v(Object.assign({},t.rects,{placement:t.placement})):v;var M={x:0,y:0};if(!w){return}if(i||s){var S=b==="y"?ae:se;var C=b==="y"?ie:oe;var L=b==="y"?"height":"width";var E=w[b];var D=w[b]+g[S];var O=w[b]-g[C];var P=h?-T[L]/2:0;var I=_===le?A[L]:T[L];var R=_===le?-T[L]:-A[L];var z=t.elements.arrow;var N=h&&z?re(z):{width:0,height:0};var F=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:_e();var j=F[S];var B=F[C];var H=Qe(0,A[L],N[L]);var U=y?A[L]/2-P-H-j-k:I-H-j-k;var V=y?-A[L]/2+P+H+B+k:R+H+B+k;var q=t.elements.arrow&&ne(t.elements.arrow);var Y=q?b==="y"?q.clientTop||0:q.clientLeft||0:0;var G=t.modifiersData.offset?t.modifiersData.offset[t.placement][b]:0;var W=w[b]+U-G-Y;var X=w[b]+V-G;if(i){var Z=Qe(h?fe(D,W):D,E,h?ue(O,X):O);w[b]=Z;M[b]=Z-E}if(s){var J=b==="x"?ae:se;var $=b==="x"?ie:oe;var Q=w[x];var K=Q+g[J];var ee=Q-g[$];var te=Qe(h?fe(K,W):K,Q,h?ue(ee,X):ee);w[x]=te;M[x]=te-Q}}t.modifiersData[n]=M}var et={name:"preventOverflow",enabled:true,phase:"main",fn:Ke,requiresIfExists:["offset"]};var tt=function e(t,r){t=typeof t==="function"?t(Object.assign({},r.rects,{placement:r.placement})):t;return ye(typeof t!=="number"?t:be(t,D))};function rt(e){var t;var r=e.state,n=e.name,a=e.options;var i=r.elements.arrow;var o=r.modifiersData.popperOffsets;var s=ce(r.placement);var l=ge(s);var c=[se,oe].indexOf(s)>=0;var u=c?"height":"width";if(!i||!o){return}var f=tt(a.padding,r);var d=re(i);var h=l==="y"?ae:se;var p=l==="y"?ie:oe;var v=r.rects.reference[u]+r.rects.reference[l]-o[l]-r.rects.popper[u];var g=o[l]-r.rects.reference[l];var m=ne(i);var _=m?l==="y"?m.clientHeight||0:m.clientWidth||0:0;var y=v/2-g/2;var b=f[h];var x=_-d[u]-f[p];var w=_/2-d[u]/2+y;var A=Qe(b,w,x);var T=l;r.modifiersData[n]=(t={},t[T]=A,t.centerOffset=A-w,t)}function nt(e){var t=e.state,r=e.options;var n=r.element,a=n===void 0?"[data-popper-arrow]":n;if(a==null){return}if(typeof a==="string"){a=t.elements.popper.querySelector(a);if(!a){return}}{if(!l(a)){console.error(['Popper: "arrow" element must be an HTMLElement (not an SVGElement).',"To use an SVG arrow, wrap it in an HTMLElement that will be used as","the arrow."].join(" "))}}if(!K(t.elements.popper,a)){{console.error(['Popper: "arrow" modifier\'s `element` must be a child of the popper',"element."].join(" "))}return}t.elements.arrow=a}var at={name:"arrow",enabled:true,phase:"main",fn:rt,effect:nt,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function it(e,t,r){if(r===void 0){r={x:0,y:0}}return{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function ot(t){return[ae,oe,ie,se].some(function(e){return t[e]>=0})}function st(e){var t=e.state,r=e.name;var n=t.rects.reference;var a=t.rects.popper;var i=t.modifiersData.preventOverflow;var o=xe(t,{elementContext:"reference"});var s=xe(t,{altBoundary:true});var l=it(o,n);var c=it(s,a,i);var u=ot(l);var f=ot(c);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:f};t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}var lt={name:"hide",enabled:true,phase:"main",requiresIfExists:["preventOverflow"],fn:st};var ct=[Le,De,ze,je];var ut=Me({defaultModifiers:ct});var ft=[Le,De,ze,je,Ue,Je,et,at,lt];var dt=Me({defaultModifiers:ft});e.applyStyles=je;e.arrow=at;e.computeStyles=ze;e.createPopper=dt;e.createPopperLite=ut;e.defaultModifiers=ft;e.detectOverflow=xe;e.eventListeners=Le;e.flip=Je;e.hide=lt;e.offset=Ue;e.popperGenerator=Me;e.popperOffsets=De;e.preventOverflow=et;Object.defineProperty(e,"__esModule",{value:true})});(function(r){if(typeof define==="function"&&define.amd){define(["jquery"],r)}else if(typeof module==="object"&&module.exports){module.exports=function(e,t){if(t===undefined){if(typeof window!=="undefined"){t=require("jquery")}else{t=require("jquery")(e)}}r(t);return t}}else{r(jQuery)}})(function(r){var e=function(){if(r&&r.fn&&r.fn.select2&&r.fn.select2.amd){var t=r.fn.select2.amd}var t;(function(){if(!t||!t.requirejs){if(!t){t={}}else{a=t}var e,a,u;(function(h){var i,o,p,v,g={},m={},_={},y={},r=Object.prototype.hasOwnProperty,n=[].slice,b=/\.js$/;function x(e,t){return r.call(e,t)}function s(e,t){var r,n,a,i,o,s,l,c,u,f,d,h,p=t&&t.split("/"),v=_.map,g=v&&v["*"]||{};if(e){e=e.split("/");o=e.length-1;if(_.nodeIdCompat&&b.test(e[o])){e[o]=e[o].replace(b,"")}if(e[0].charAt(0)==="."&&p){h=p.slice(0,p.length-1);e=h.concat(e)}for(u=0;u<e.length;u++){d=e[u];if(d==="."){e.splice(u,1);u-=1}else if(d===".."){if(u===0||u===1&&e[2]===".."||e[u-1]===".."){continue}else if(u>0){e.splice(u-1,2);u-=2}}}e=e.join("/")}if((p||g)&&v){r=e.split("/");for(u=r.length;u>0;u-=1){n=r.slice(0,u).join("/");if(p){for(f=p.length;f>0;f-=1){a=v[p.slice(0,f).join("/")];if(a){a=a[n];if(a){i=a;s=u;break}}}}if(i){break}if(!l&&g&&g[n]){l=g[n];c=u}}if(!i&&l){i=l;s=c}if(i){r.splice(0,s,i);e=r.join("/")}}return e}function w(t,r){return function(){var e=n.call(arguments,0);if(typeof e[0]!=="string"&&e.length===1){e.push(null)}return o.apply(h,e.concat([t,r]))}}function l(t){return function(e){return s(e,t)}}function A(t){return function(e){g[t]=e}}function T(e){if(x(m,e)){var t=m[e];delete m[e];y[e]=true;i.apply(h,t)}if(!x(g,e)&&!x(y,e)){throw new Error("No "+e)}return g[e]}function c(e){var t,r=e?e.indexOf("!"):-1;if(r>-1){t=e.substring(0,r);e=e.substring(r+1,e.length)}return[t,e]}function k(e){return e?c(e):[]}p=function(e,t){var r,n=c(e),a=n[0],i=t[1];e=n[1];if(a){a=s(a,i);r=T(a)}if(a){if(r&&r.normalize){e=r.normalize(e,l(i))}else{e=s(e,i)}}else{e=s(e,i);n=c(e);a=n[0];e=n[1];if(a){r=T(a)}}return{f:a?a+"!"+e:e,n:e,pr:a,p:r}};function t(e){return function(){return _&&_.config&&_.config[e]||{}}}v={require:function(e){return w(e)},exports:function(e){var t=g[e];if(typeof t!=="undefined"){return t}else{return g[e]={}}},module:function(e){return{id:e,uri:"",exports:g[e],config:t(e)}}};i=function(e,t,r,n){var a,i,o,s,l,c,u=[],f=typeof r,d;n=n||e;c=k(n);if(f==="undefined"||f==="function"){t=!t.length&&r.length?["require","exports","module"]:t;for(l=0;l<t.length;l+=1){s=p(t[l],c);i=s.f;if(i==="require"){u[l]=v.require(e)}else if(i==="exports"){u[l]=v.exports(e);d=true}else if(i==="module"){a=u[l]=v.module(e)}else if(x(g,i)||x(m,i)||x(y,i)){u[l]=T(i)}else if(s.p){s.p.load(s.n,w(n,true),A(i),{});u[l]=g[i]}else{throw new Error(e+" missing "+i)}}o=r?r.apply(g[e],u):undefined;if(e){if(a&&a.exports!==h&&a.exports!==g[e]){g[e]=a.exports}else if(o!==h||!d){g[e]=o}}}else if(e){g[e]=r}};e=a=o=function(e,t,r,n,a){if(typeof e==="string"){if(v[e]){return v[e](t)}return T(p(e,k(t)).f)}else if(!e.splice){_=e;if(_.deps){o(_.deps,_.callback)}if(!t){return}if(t.splice){e=t;t=r;r=null}else{e=h}}t=t||function(){};if(typeof r==="function"){r=n;n=a}if(n){i(h,e,t,r)}else{setTimeout(function(){i(h,e,t,r)},4)}return o};o.config=function(e){return o(e)};e._defined=g;u=function(e,t,r){if(typeof e!=="string"){throw new Error("See almond README: incorrect module build, no module name")}if(!t.splice){r=t;t=[]}if(!x(g,e)&&!x(m,e)){m[e]=[e,t,r]}};u.amd={jQuery:true}})();t.requirejs=e;t.require=a;t.define=u}})();t.define("almond",function(){});t.define("jquery",[],function(){var e=r||$;if(e==null&&console&&console.error){console.error("Select2: An instance of jQuery or a jQuery-compatible library was not "+"found. Make sure that you are including jQuery before Select2 on your "+"web page.")}return e});t.define("select2/utils",["jquery"],function(i){var a={};a.Extend=function(e,t){var r={}.hasOwnProperty;function n(){this.constructor=e}for(var a in t){if(r.call(t,a)){e[a]=t[a]}}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e};function f(e){var t=e.prototype;var r=[];for(var n in t){var a=t[n];if(typeof a!=="function"){continue}if(n==="constructor"){continue}r.push(n)}return r}a.Decorate=function(n,a){var e=f(a);var t=f(n);function i(){var e=Array.prototype.unshift;var t=a.prototype.constructor.length;var r=n.prototype.constructor;if(t>0){e.call(arguments,n.prototype.constructor);r=a.prototype.constructor}r.apply(this,arguments)}a.displayName=n.displayName;function r(){this.constructor=i}i.prototype=new r;for(var o=0;o<t.length;o++){var s=t[o];i.prototype[s]=n.prototype[s]}var l=function(e){var t=function(){};if(e in i.prototype){t=i.prototype[e]}var r=a.prototype[e];return function(){var e=Array.prototype.unshift;e.call(arguments,t);return r.apply(this,arguments)}};for(var c=0;c<e.length;c++){var u=e[c];i.prototype[u]=l(u)}return i};var e=function(){this.listeners={}};e.prototype.on=function(e,t){this.listeners=this.listeners||{};if(e in this.listeners){this.listeners[e].push(t)}else{this.listeners[e]=[t]}};e.prototype.trigger=function(e){var t=Array.prototype.slice;var r=t.call(arguments,1);this.listeners=this.listeners||{};if(r==null){r=[]}if(r.length===0){r.push({})}r[0]._type=e;if(e in this.listeners){this.invoke(this.listeners[e],t.call(arguments,1))}if("*"in this.listeners){this.invoke(this.listeners["*"],arguments)}};e.prototype.invoke=function(e,t){for(var r=0,n=e.length;r<n;r++){e[r].apply(this,t)}};a.Observable=e;a.generateChars=function(e){var t="";for(var r=0;r<e;r++){var n=Math.floor(Math.random()*36);t+=n.toString(36)}return t};a.bind=function(e,t){return function(){e.apply(t,arguments)}};a._convertData=function(e){for(var t in e){var r=t.split("-");var n=e;if(r.length===1){continue}for(var a=0;a<r.length;a++){var i=r[a];i=i.substring(0,1).toLowerCase()+i.substring(1);if(!(i in n)){n[i]={}}if(a==r.length-1){n[i]=e[t]}n=n[i]}delete e[t]}return e};a.hasScroll=function(e,t){var r=i(t);var n=t.style.overflowX;var a=t.style.overflowY;if(n===a&&(a==="hidden"||a==="visible")){return false}if(n==="scroll"||a==="scroll"){return true}return r.innerHeight()<t.scrollHeight||r.innerWidth()<t.scrollWidth};a.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};if(typeof e!=="string"){return e}return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})};a.__cache={};var r=0;a.GetUniqueElementId=function(e){var t=e.getAttribute("data-select2-id");if(t!=null){return t}if(e.id){t="select2-data-"+e.id}else{t="select2-data-"+(++r).toString()+"-"+a.generateChars(4)}e.setAttribute("data-select2-id",t);return t};a.StoreData=function(e,t,r){var n=a.GetUniqueElementId(e);if(!a.__cache[n]){a.__cache[n]={}}a.__cache[n][t]=r};a.GetData=function(e,t){var r=a.GetUniqueElementId(e);if(t){if(a.__cache[r]){if(a.__cache[r][t]!=null){return a.__cache[r][t]}return i(e).data(t)}return i(e).data(t)}else{return a.__cache[r]}};a.RemoveData=function(e){var t=a.GetUniqueElementId(e);if(a.__cache[t]!=null){delete a.__cache[t]}e.removeAttribute("data-select2-id")};a.copyNonInternalCssClasses=function(e,t){var r;var n=e.getAttribute("class").trim().split(/\s+/);n=n.filter(function(e){return e.indexOf("select2-")===0});var a=t.getAttribute("class").trim().split(/\s+/);a=a.filter(function(e){return e.indexOf("select2-")!==0});var i=n.concat(a);e.setAttribute("class",i.join(" "))};return a});t.define("select2/results",["jquery","./utils"],function(h,p){function n(e,t,r){this.$element=e;this.data=r;this.options=t;n.__super__.constructor.call(this)}p.Extend(n,p.Observable);n.prototype.render=function(){var e=h('<ul class="select2-results__options" role="listbox"></ul>');if(this.options.get("multiple")){e.attr("aria-multiselectable","true")}this.$results=e;return e};n.prototype.clear=function(){this.$results.empty()};n.prototype.displayMessage=function(e){var t=this.options.get("escapeMarkup");this.clear();this.hideLoading();var r=h('<li role="alert" aria-live="assertive"'+' class="select2-results__option"></li>');var n=this.options.get("translations").get(e.message);r.append(t(n(e.args)));r[0].className+=" select2-results__message";this.$results.append(r)};n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()};n.prototype.append=function(e){this.hideLoading();var t=[];if(e.results==null||e.results.length===0){if(this.$results.children().length===0){this.trigger("results:message",{message:"noResults"})}return}e.results=this.sort(e.results);for(var r=0;r<e.results.length;r++){var n=e.results[r];var a=this.option(n);t.push(a)}this.$results.append(t)};n.prototype.position=function(e,t){var r=t.find(".select2-results");r.append(e)};n.prototype.sort=function(e){var t=this.options.get("sorter");return t(e)};n.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option--selectable");var t=e.filter(".select2-results__option--selected");if(t.length>0){t.first().trigger("mouseenter")}else{e.first().trigger("mouseenter")}this.ensureHighlightVisible()};n.prototype.setClasses=function(){var r=this;this.data.current(function(e){var n=e.map(function(e){return e.id.toString()});var t=r.$results.find(".select2-results__option--selectable");t.each(function(){var e=h(this);var t=p.GetData(this,"data");var r=""+t.id;if(t.element!=null&&t.element.selected||t.element==null&&n.indexOf(r)>-1){this.classList.add("select2-results__option--selected");e.attr("aria-selected","true")}else{this.classList.remove("select2-results__option--selected");e.attr("aria-selected","false")}})})};n.prototype.showLoading=function(e){this.hideLoading();var t=this.options.get("translations").get("searching");var r={disabled:true,loading:true,text:t(e)};var n=this.option(r);n.className+=" loading-results";this.$results.prepend(n)};n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()};n.prototype.option=function(e){var t=document.createElement("li");t.classList.add("select2-results__option");t.classList.add("select2-results__option--selectable");var r={role:"option"};var n=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;if(e.element!=null&&n.call(e.element,":disabled")||e.element==null&&e.disabled){r["aria-disabled"]="true";t.classList.remove("select2-results__option--selectable");t.classList.add("select2-results__option--disabled")}if(e.id==null){t.classList.remove("select2-results__option--selectable")}if(e._resultId!=null){t.id=e._resultId}if(e.title){t.title=e.title}if(e.children){r.role="group";r["aria-label"]=e.text;t.classList.remove("select2-results__option--selectable");t.classList.add("select2-results__option--group")}for(var a in r){var i=r[a];t.setAttribute(a,i)}if(e.children){var o=h(t);var s=document.createElement("strong");s.className="select2-results__group";this.template(e,s);var l=[];for(var c=0;c<e.children.length;c++){var u=e.children[c];var f=this.option(u);l.push(f)}var d=h("<ul></ul>",{class:"select2-results__options select2-results__options--nested",role:"none"});d.append(l);o.append(s);o.append(d)}else{this.template(e,t)}p.StoreData(t,"data",e);return t};n.prototype.bind=function(t,e){var l=this;var r=t.id+"-results";this.$results.attr("id",r);t.on("results:all",function(e){l.clear();l.append(e.data);if(t.isOpen()){l.setClasses();l.highlightFirstItem()}});t.on("results:append",function(e){l.append(e.data);if(t.isOpen()){l.setClasses()}});t.on("query",function(e){l.hideMessages();l.showLoading(e)});t.on("select",function(){if(!t.isOpen()){return}l.setClasses();if(l.options.get("scrollAfterSelect")){l.highlightFirstItem()}});t.on("unselect",function(){if(!t.isOpen()){return}l.setClasses();if(l.options.get("scrollAfterSelect")){l.highlightFirstItem()}});t.on("open",function(){l.$results.attr("aria-expanded","true");l.$results.attr("aria-hidden","false");l.setClasses();l.ensureHighlightVisible()});t.on("close",function(){l.$results.attr("aria-expanded","false");l.$results.attr("aria-hidden","true");l.$results.removeAttr("aria-activedescendant")});t.on("results:toggle",function(){var e=l.getHighlightedResults();if(e.length===0){return}e.trigger("mouseup")});t.on("results:select",function(){var e=l.getHighlightedResults();if(e.length===0){return}var t=p.GetData(e[0],"data");if(e.hasClass("select2-results__option--selected")){l.trigger("close",{})}else{l.trigger("select",{data:t})}});t.on("results:previous",function(){var e=l.getHighlightedResults();var t=l.$results.find(".select2-results__option--selectable");var r=t.index(e);if(r<=0){return}var n=r-1;if(e.length===0){n=0}var a=t.eq(n);a.trigger("mouseenter");var i=l.$results.offset().top;var o=a.offset().top;var s=l.$results.scrollTop()+(o-i);if(n===0){l.$results.scrollTop(0)}else if(o-i<0){l.$results.scrollTop(s)}});t.on("results:next",function(){var e=l.getHighlightedResults();var t=l.$results.find(".select2-results__option--selectable");var r=t.index(e);var n=r+1;if(n>=t.length){return}var a=t.eq(n);a.trigger("mouseenter");var i=l.$results.offset().top+l.$results.outerHeight(false);var o=a.offset().top+a.outerHeight(false);var s=l.$results.scrollTop()+o-i;if(n===0){l.$results.scrollTop(0)}else if(o>i){l.$results.scrollTop(s)}});t.on("results:focus",function(e){e.element[0].classList.add("select2-results__option--highlighted");e.element[0].setAttribute("aria-selected","true")});t.on("results:message",function(e){l.displayMessage(e)});if(h.fn.mousewheel){this.$results.on("mousewheel",function(e){var t=l.$results.scrollTop();var r=l.$results.get(0).scrollHeight-t+e.deltaY;var n=e.deltaY>0&&t-e.deltaY<=0;var a=e.deltaY<0&&r<=l.$results.height();if(n){l.$results.scrollTop(0);e.preventDefault();e.stopPropagation()}else if(a){l.$results.scrollTop(l.$results.get(0).scrollHeight-l.$results.height());e.preventDefault();e.stopPropagation()}})}this.$results.on("mouseup",".select2-results__option--selectable",function(e){var t=h(this);var r=p.GetData(this,"data");if(t.hasClass("select2-results__option--selected")){if(l.options.get("multiple")){l.trigger("unselect",{originalEvent:e,data:r})}else{l.trigger("close",{})}return}l.trigger("select",{originalEvent:e,data:r})});this.$results.on("mouseenter",".select2-results__option--selectable",function(e){var t=p.GetData(this,"data");l.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false");l.trigger("results:focus",{data:t,element:h(this)})})};n.prototype.getHighlightedResults=function(){var e=this.$results.find(".select2-results__option--highlighted");return e};n.prototype.destroy=function(){this.$results.remove()};n.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(e.length===0){return}var t=this.$results.find(".select2-results__option--selectable");var r=t.index(e);var n=this.$results.offset().top;var a=e.offset().top;var i=this.$results.scrollTop()+(a-n);var o=a-n;i-=e.outerHeight(false)*2;if(r<=2){this.$results.scrollTop(0)}else if(o>this.$results.outerHeight()||o<0){this.$results.scrollTop(i)}};n.prototype.template=function(e,t){var r=this.options.get("templateResult");var n=this.options.get("escapeMarkup");var a=r(e,t);if(a==null){t.style.display="none"}else if(typeof a==="string"){t.innerHTML=n(a)}else{h(t).append(a)}};return n});t.define("select2/keys",[],function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return e});t.define("select2/selection/base",["jquery","../utils","../keys"],function(a,i,o){function r(e,t){this.$element=e;this.options=t;r.__super__.constructor.call(this)}i.Extend(r,i.Observable);r.prototype.render=function(){var e=a('<span class="select2-selection" role="combobox" '+' aria-haspopup="true" aria-expanded="false">'+"</span>");this._tabindex=0;if(i.GetData(this.$element[0],"old-tabindex")!=null){this._tabindex=i.GetData(this.$element[0],"old-tabindex")}else if(this.$element.attr("tabindex")!=null){this._tabindex=this.$element.attr("tabindex")}e.attr("title",this.$element.attr("title"));e.attr("tabindex",this._tabindex);e.attr("aria-disabled","false");this.$selection=e;return e};r.prototype.bind=function(e,t){var r=this;var n=e.id+"-results";this.container=e;this.$selection.on("focus",function(e){r.trigger("focus",e)});this.$selection.on("blur",function(e){r._handleBlur(e)});this.$selection.on("keydown",function(e){r.trigger("keypress",e);if(e.which===o.SPACE){e.preventDefault()}});e.on("results:focus",function(e){r.$selection.attr("aria-activedescendant",e.data._resultId)});e.on("selection:update",function(e){r.update(e.data)});e.on("open",function(){r.$selection.attr("aria-expanded","true");r.$selection.attr("aria-owns",n);r._attachCloseHandler(e)});e.on("close",function(){r.$selection.attr("aria-expanded","false");r.$selection.removeAttr("aria-activedescendant");r.$selection.removeAttr("aria-owns");r.$selection.trigger("focus");r._detachCloseHandler(e)});e.on("enable",function(){r.$selection.attr("tabindex",r._tabindex);r.$selection.attr("aria-disabled","false")});e.on("disable",function(){r.$selection.attr("tabindex","-1");r.$selection.attr("aria-disabled","true")})};r.prototype._handleBlur=function(e){var t=this;window.setTimeout(function(){if(document.activeElement==t.$selection[0]||a.contains(t.$selection[0],document.activeElement)){return}t.trigger("blur",e)},1)};r.prototype._attachCloseHandler=function(e){a(document.body).on("mousedown.select2."+e.id,function(e){var t=a(e.target);var r=t.closest(".select2");var n=a(".select2.select2-container--open");n.each(function(){if(this==r[0]){return}var e=i.GetData(this,"element");e.select2("close")})})};r.prototype._detachCloseHandler=function(e){a(document.body).off("mousedown.select2."+e.id)};r.prototype.position=function(e,t){var r=t.find(".selection");r.append(e)};r.prototype.destroy=function(){this._detachCloseHandler(this.container)};r.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")};r.prototype.isEnabled=function(){return!this.isDisabled()};r.prototype.isDisabled=function(){return this.options.get("disabled")};return r});t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,r,n){function a(){a.__super__.constructor.apply(this,arguments)}r.Extend(a,t);a.prototype.render=function(){var e=a.__super__.render.call(this);e[0].classList.add("select2-selection--single");e.html('<span class="select2-selection__rendered"></span>'+'<span class="select2-selection__arrow" role="presentation">'+'<b role="presentation"></b>'+"</span>");return e};a.prototype.bind=function(t,e){var r=this;a.__super__.bind.apply(this,arguments);var n=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n).attr("role","textbox").attr("aria-readonly","true");this.$selection.attr("aria-labelledby",n);this.$selection.attr("aria-controls",n);this.$selection.on("mousedown",function(e){if(e.which!==1){return}r.trigger("toggle",{originalEvent:e})});this.$selection.on("focus",function(e){});this.$selection.on("blur",function(e){});t.on("focus",function(e){if(!t.isOpen()){r.$selection.trigger("focus")}})};a.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty();e.removeAttr("title")};a.prototype.display=function(e,t){var r=this.options.get("templateSelection");var n=this.options.get("escapeMarkup");return n(r(e,t))};a.prototype.selectionContainer=function(){return e("<span></span>")};a.prototype.update=function(e){if(e.length===0){this.clear();return}var t=e[0];var r=this.$selection.find(".select2-selection__rendered");var n=this.display(t,r);r.empty().append(n);var a=t.title||t.text;if(a){r.attr("title",a)}else{r.removeAttr("title")}};return a});t.define("select2/selection/multiple",["jquery","./base","../utils"],function(i,e,d){function n(e,t){n.__super__.constructor.apply(this,arguments)}d.Extend(n,e);n.prototype.render=function(){var e=n.__super__.render.call(this);e[0].classList.add("select2-selection--multiple");e.html('<ul class="select2-selection__rendered"></ul>');return e};n.prototype.bind=function(e,t){var a=this;n.__super__.bind.apply(this,arguments);var r=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",r);this.$selection.on("click",function(e){a.trigger("toggle",{originalEvent:e})});this.$selection.on("click",".select2-selection__choice__remove",function(e){if(a.isDisabled()){return}var t=i(this);var r=t.parent();var n=d.GetData(r[0],"data");a.trigger("unselect",{originalEvent:e,data:n})});this.$selection.on("keydown",".select2-selection__choice__remove",function(e){if(a.isDisabled()){return}e.stopPropagation()})};n.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty();e.removeAttr("title")};n.prototype.display=function(e,t){var r=this.options.get("templateSelection");var n=this.options.get("escapeMarkup");return n(r(e,t))};n.prototype.selectionContainer=function(){var e=i('<li class="select2-selection__choice">'+'<button type="button" class="select2-selection__choice__remove" '+'tabindex="-1">'+'<span aria-hidden="true">&times;</span>'+"</button>"+'<span class="select2-selection__choice__display"></span>'+"</li>");return e};n.prototype.update=function(e){this.clear();if(e.length===0){return}var t=[];var r=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-";for(var n=0;n<e.length;n++){var a=e[n];var i=this.selectionContainer();var o=this.display(a,i);var s=r+d.generateChars(4)+"-";if(a.id){s+=a.id}else{s+=d.generateChars(4)}i.find(".select2-selection__choice__display").append(o).attr("id",s);var l=a.title||a.text;if(l){i.attr("title",l)}var c=this.options.get("translations").get("removeItem");var u=i.find(".select2-selection__choice__remove");u.attr("title",c());u.attr("aria-label",c());u.attr("aria-describedby",s);d.StoreData(i[0],"data",a);t.push(i)}var f=this.$selection.find(".select2-selection__rendered");f.append(t)};return n});t.define("select2/selection/placeholder",[],function(){function e(e,t,r){this.placeholder=this.normalizePlaceholder(r.get("placeholder"));e.call(this,t,r)}e.prototype.normalizePlaceholder=function(e,t){if(typeof t==="string"){t={id:"",text:t}}return t};e.prototype.createPlaceholder=function(e,t){var r=this.selectionContainer();r.html(this.display(t));r[0].classList.add("select2-selection__placeholder");r[0].classList.remove("select2-selection__choice");var n=t.title||t.text||r.text();this.$selection.find(".select2-selection__rendered").attr("title",n);return r};e.prototype.update=function(e,t){var r=t.length==1&&t[0].id!=this.placeholder.id;var n=t.length>1;if(n||r){return e.call(this,t)}this.clear();var a=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(a)};return e});t.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(i,n,s){function e(){}e.prototype.bind=function(e,t,r){var n=this;e.call(this,t,r);if(this.placeholder==null){if(this.options.get("debug")&&window.console&&console.error){console.error("Select2: The `allowClear` option should be used in combination "+"with the `placeholder` option.")}}this.$selection.on("mousedown",".select2-selection__clear",function(e){n._handleClear(e)});t.on("keypress",function(e){n._handleKeyboardClear(e,t)})};e.prototype._handleClear=function(e,t){if(this.isDisabled()){return}var r=this.$selection.find(".select2-selection__clear");if(r.length===0){return}t.stopPropagation();var n=s.GetData(r[0],"data");var a=this.$element.val();this.$element.val(this.placeholder.id);var i={data:n};this.trigger("clear",i);if(i.prevented){this.$element.val(a);return}for(var o=0;o<n.length;o++){i={data:n[o]};this.trigger("unselect",i);if(i.prevented){this.$element.val(a);return}}this.$element.trigger("input").trigger("change");this.trigger("toggle",{})};e.prototype._handleKeyboardClear=function(e,t,r){if(r.isOpen()){return}if(t.which==n.DELETE||t.which==n.BACKSPACE){this._handleClear(t)}};e.prototype.update=function(e,t){e.call(this,t);this.$selection.find(".select2-selection__clear").remove();this.$selection[0].classList.remove("select2-selection--clearable");if(this.$selection.find(".select2-selection__placeholder").length>0||t.length===0){return}var r=this.$selection.find(".select2-selection__rendered").attr("id");var n=this.options.get("translations").get("removeAllItems");var a=i('<button type="button" class="select2-selection__clear" tabindex="-1">'+'<span aria-hidden="true">&times;</span>'+"</button>");a.attr("title",n());a.attr("aria-label",n());a.attr("aria-describedby",r);s.StoreData(a[0],"data",t);this.$selection.prepend(a);this.$selection[0].classList.add("select2-selection--clearable")};return e});t.define("select2/selection/search",["jquery","../utils","../keys"],function(a,l,c){function e(e,t,r){e.call(this,t,r)}e.prototype.render=function(e){var t=this.options.get("translations").get("search");var r=a('<span class="select2-search select2-search--inline">'+'<textarea class="select2-search__field"'+' type="search" tabindex="-1"'+' autocorrect="off" autocapitalize="none"'+' spellcheck="false" role="searchbox" aria-autocomplete="list" >'+"</textarea>"+"</span>");this.$searchContainer=r;this.$search=r.find("textarea");this.$search.prop("autocomplete",this.options.get("autocomplete"));this.$search.attr("aria-label",t());var n=e.call(this);this._transferTabIndex();n.append(this.$searchContainer);return n};e.prototype.bind=function(e,t,r){var a=this;var n=t.id+"-results";var i=t.id+"-container";e.call(this,t,r);a.$search.attr("aria-describedby",i);t.on("open",function(){a.$search.attr("aria-controls",n);a.$search.trigger("focus")});t.on("close",function(){a.$search.val("");a.resizeSearch();a.$search.removeAttr("aria-controls");a.$search.removeAttr("aria-activedescendant");a.$search.trigger("focus")});t.on("enable",function(){a.$search.prop("disabled",false);a._transferTabIndex()});t.on("disable",function(){a.$search.prop("disabled",true)});t.on("focus",function(e){a.$search.trigger("focus")});t.on("results:focus",function(e){if(e.data._resultId){a.$search.attr("aria-activedescendant",e.data._resultId)}else{a.$search.removeAttr("aria-activedescendant")}});this.$selection.on("focusin",".select2-search--inline",function(e){a.trigger("focus",e)});this.$selection.on("focusout",".select2-search--inline",function(e){a._handleBlur(e)});this.$selection.on("keydown",".select2-search--inline",function(e){e.stopPropagation();a.trigger("keypress",e);a._keyUpPrevented=e.isDefaultPrevented();var t=e.which;if(t===c.BACKSPACE&&a.$search.val()===""){var r=a.$selection.find(".select2-selection__choice").last();if(r.length>0){var n=l.GetData(r[0],"data");a.searchRemoveChoice(n);e.preventDefault()}}});this.$selection.on("click",".select2-search--inline",function(e){if(a.$search.val()){e.stopPropagation()}});var o=document.documentMode;var s=o&&o<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){if(s){a.$selection.off("input.search input.searchcheck");return}a.$selection.off("keyup.search")});this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(s&&e.type==="input"){a.$selection.off("input.search input.searchcheck");return}var t=e.which;if(t==c.SHIFT||t==c.CTRL||t==c.ALT){return}if(t==c.TAB){return}a.handleSearch(e)})};e.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex"));this.$selection.attr("tabindex","-1")};e.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)};e.prototype.update=function(e,t){var r=this.$search[0]==document.activeElement;this.$search.attr("placeholder","");e.call(this,t);this.resizeSearch();if(r){this.$search.trigger("focus")}};e.prototype.handleSearch=function(){this.resizeSearch();if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=false};e.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t});this.$search.val(t.text);this.handleSearch()};e.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="100%";if(this.$search.attr("placeholder")===""){var t=this.$search.val().length+1;e=t*.75+"em"}this.$search.css("width",e)};return e});t.define("select2/selection/selectionCss",["../utils"],function(n){function e(){}e.prototype.render=function(e){var t=e.call(this);var r=this.options.get("selectionCssClass")||"";if(r.indexOf(":all:")!==-1){r=r.replace(":all:","");n.copyNonInternalCssClasses(t[0],this.$element[0])}t.addClass(r);return t};return e});t.define("select2/selection/eventRelay",["jquery"],function(o){function e(){}e.prototype.bind=function(e,t,r){var n=this;var a=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"];var i=["opening","closing","selecting","unselecting","clearing"];e.call(this,t,r);t.on("*",function(e,t){if(a.indexOf(e)===-1){return}t=t||{};var r=o.Event("select2:"+e,{params:t});n.$element.trigger(r);if(i.indexOf(e)===-1){return}t.prevented=r.isDefaultPrevented()})};return e});t.define("select2/translation",["jquery","require"],function(t,r){function n(e){this.dict=e||{}}n.prototype.all=function(){return this.dict};n.prototype.get=function(e){return this.dict[e]};n.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)};n._cache={};n.loadPath=function(e){if(!(e in n._cache)){var t=r(e);n._cache[e]=t}return new n(n._cache[e])};return n});t.define("select2/diacritics",[],function(){var e={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OE","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oe","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"'"};return e});t.define("select2/data/base",["../utils"],function(n){function r(e,t){r.__super__.constructor.call(this)}n.Extend(r,n.Observable);r.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")};r.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")};r.prototype.bind=function(e,t){};r.prototype.destroy=function(){};r.prototype.generateResultId=function(e,t){var r=e.id+"-result-";r+=n.generateChars(4);if(t.id!=null){r+="-"+t.id.toString()}else{r+="-"+n.generateChars(4)}return r};return r});t.define("select2/data/select",["./base","../utils","jquery"],function(e,l,c){function r(e,t){this.$element=e;this.options=t;r.__super__.constructor.call(this)}l.Extend(r,e);r.prototype.current=function(e){var t=this;var r=Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),function(e){return t.item(c(e))});e(r)};r.prototype.select=function(a){var i=this;a.selected=true;if(a.element!=null&&a.element.tagName.toLowerCase()==="option"){a.element.selected=true;this.$element.trigger("input").trigger("change");return}if(this.$element.prop("multiple")){this.current(function(e){var t=[];a=[a];a.push.apply(a,e);for(var r=0;r<a.length;r++){var n=a[r].id;if(t.indexOf(n)===-1){t.push(n)}}i.$element.val(t);i.$element.trigger("input").trigger("change")})}else{var e=a.id;this.$element.val(e);this.$element.trigger("input").trigger("change")}};r.prototype.unselect=function(a){var i=this;if(!this.$element.prop("multiple")){return}a.selected=false;if(a.element!=null&&a.element.tagName.toLowerCase()==="option"){a.element.selected=false;this.$element.trigger("input").trigger("change");return}this.current(function(e){var t=[];for(var r=0;r<e.length;r++){var n=e[r].id;if(n!==a.id&&t.indexOf(n)===-1){t.push(n)}}i.$element.val(t);i.$element.trigger("input").trigger("change")})};r.prototype.bind=function(e,t){var r=this;this.container=e;e.on("select",function(e){r.select(e.data)});e.on("unselect",function(e){r.unselect(e.data)})};r.prototype.destroy=function(){this.$element.find("*").each(function(){l.RemoveData(this)})};r.prototype.query=function(n,e){var a=[];var i=this;var t=this.$element.children();t.each(function(){if(this.tagName.toLowerCase()!=="option"&&this.tagName.toLowerCase()!=="optgroup"){return}var e=c(this);var t=i.item(e);var r=i.matches(n,t);if(r!==null){a.push(r)}});e({results:a})};r.prototype.addOptions=function(e){this.$element.append(e)};r.prototype.option=function(e){var t;if(e.children){t=document.createElement("optgroup");t.label=e.text}else{t=document.createElement("option");if(t.textContent!==undefined){t.textContent=e.text}else{t.innerText=e.text}}if(e.id!==undefined){t.value=e.id}if(e.disabled){t.disabled=true}if(e.selected){t.selected=true}if(e.title){t.title=e.title}var r=this._normalizeItem(e);r.element=t;l.StoreData(t,"data",r);return c(t)};r.prototype.item=function(e){var t={};t=l.GetData(e[0],"data");if(t!=null){return t}var r=e[0];if(r.tagName.toLowerCase()==="option"){t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")}}else if(r.tagName.toLowerCase()==="optgroup"){t={text:e.prop("label"),children:[],title:e.prop("title")};var n=e.children("option");var a=[];for(var i=0;i<n.length;i++){var o=c(n[i]);var s=this.item(o);a.push(s)}t.children=a}t=this._normalizeItem(t);t.element=e[0];l.StoreData(e[0],"data",t);return t};r.prototype._normalizeItem=function(e){if(e!==Object(e)){e={id:e,text:e}}e=c.extend({},{text:""},e);var t={selected:false,disabled:false};if(e.id!=null){e.id=e.id.toString()}if(e.text!=null){e.text=e.text.toString()}if(e._resultId==null&&e.id&&this.container!=null){e._resultId=this.generateResultId(this.container,e)}return c.extend({},t,e)};r.prototype.matches=function(e,t){var r=this.options.get("matcher");return r(e,t)};return r});t.define("select2/data/array",["./select","../utils","jquery"],function(e,t,p){function n(e,t){this._dataToConvert=t.get("data")||[];n.__super__.constructor.call(this,e,t)}t.Extend(n,e);n.prototype.bind=function(e,t){n.__super__.bind.call(this,e,t);this.addOptions(this.convertToOptions(this._dataToConvert))};n.prototype.select=function(r){var e=this.$element.find("option").filter(function(e,t){return t.value==r.id.toString()});if(e.length===0){e=this.option(r);this.addOptions(e)}n.__super__.select.call(this,r)};n.prototype.convertToOptions=function(e){var t=this;var r=this.$element.find("option");var n=r.map(function(){return t.item(p(this)).id}).get();var a=[];function i(e){return function(){return p(this).val()==e.id}}for(var o=0;o<e.length;o++){var s=this._normalizeItem(e[o]);if(n.indexOf(s.id)>=0){var l=r.filter(i(s));var c=this.item(l);var u=p.extend(true,{},s,c);var f=this.option(u);l.replaceWith(f);continue}var d=this.option(s);if(s.children){var h=this.convertToOptions(s.children);d.append(h)}a.push(d)}return a};return n});t.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,o){function r(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax"));if(this.ajaxOptions.processResults!=null){this.processResults=this.ajaxOptions.processResults}r.__super__.constructor.call(this,e,t)}t.Extend(r,e);r.prototype._applyDefaults=function(e){var t={data:function(e){return o.extend({},e,{q:e.term})},transport:function(e,t,r){var n=o.ajax(e);n.then(t);n.fail(r);return n}};return o.extend({},t,e,true)};r.prototype.processResults=function(e){return e};r.prototype.query=function(r,n){var e=[];var a=this;if(this._request!=null){if(typeof this._request.abort==="function"){this._request.abort()}this._request=null}var t=o.extend({type:"GET"},this.ajaxOptions);if(typeof t.url==="function"){t.url=t.url.call(this.$element,r)}if(typeof t.data==="function"){t.data=t.data.call(this.$element,r)}function i(){var e=t.transport(t,function(e){var t=a.processResults(e,r);if(a.options.get("debug")&&window.console&&console.error){if(!t||!t.results||!Array.isArray(t.results)){console.error("Select2: The AJAX results did not return an array in the "+"`results` key of the response.")}}n(t)},function(){if("status"in e&&(e.status===0||e.status==="0")){return}a.trigger("results:message",{message:"errorLoading"})});a._request=e}if(this.ajaxOptions.delay&&r.term!=null){if(this._queryTimeout){window.clearTimeout(this._queryTimeout)}this._queryTimeout=window.setTimeout(i,this.ajaxOptions.delay)}else{i()}};return r});t.define("select2/data/tags",["jquery"],function(r){function e(e,t,r){var n=r.get("tags");var a=r.get("createTag");if(a!==undefined){this.createTag=a}var i=r.get("insertTag");if(i!==undefined){this.insertTag=i}e.call(this,t,r);if(Array.isArray(n)){for(var o=0;o<n.length;o++){var s=n[o];var l=this._normalizeItem(s);var c=this.option(l);this.$element.append(c)}}}e.prototype.query=function(e,f,d){var h=this;this._removeOldTags();if(f.term==null||f.page!=null){e.call(this,f,d);return}function p(e,t){var r=e.results;for(var n=0;n<r.length;n++){var a=r[n];var i=a.children!=null&&!p({results:a.children},true);var o=(a.text||"").toUpperCase();var s=(f.term||"").toUpperCase();var l=o===s;if(l||i){if(t){return false}e.data=r;d(e);return}}if(t){return true}var c=h.createTag(f);if(c!=null){var u=h.option(c);u.attr("data-select2-tag","true");h.addOptions([u]);h.insertTag(r,c)}e.results=r;d(e)}e.call(this,f,p)};e.prototype.createTag=function(e,t){if(t.term==null){return null}var r=t.term.trim();if(r===""){return null}return{id:r,text:r}};e.prototype.insertTag=function(e,t,r){t.unshift(r)};e.prototype._removeOldTags=function(e){var t=this.$element.find("option[data-select2-tag]");t.each(function(){if(this.selected){return}r(this).remove()})};return e});t.define("select2/data/tokenizer",["jquery"],function(d){function e(e,t,r){var n=r.get("tokenizer");if(n!==undefined){this.tokenizer=n}e.call(this,t,r)}e.prototype.bind=function(e,t,r){e.call(this,t,r);this.$search=t.dropdown.$search||t.selection.$search||r.find(".select2-search__field")};e.prototype.query=function(e,t,r){var a=this;function n(e){var t=a._normalizeItem(e);var r=a.$element.find("option").filter(function(){return d(this).val()===t.id});if(!r.length){var n=a.option(t);n.attr("data-select2-tag",true);a._removeOldTags();a.addOptions([n])}i(t)}function i(e){a.trigger("select",{data:e})}t.term=t.term||"";var o=this.tokenizer(t,this.options,n);if(o.term!==t.term){if(this.$search.length){this.$search.val(o.term);this.$search.trigger("focus")}t.term=o.term}e.call(this,t,r)};e.prototype.tokenizer=function(e,t,r,n){var a=r.get("tokenSeparators")||[];var i=t.term;var o=0;var s=this.createTag||function(e){return{id:e.term,text:e.term}};while(o<i.length){var l=i[o];if(a.indexOf(l)===-1){o++;continue}var c=i.substr(0,o);var u=d.extend({},t,{term:c});var f=s(u);if(f==null){o++;continue}n(f);i=i.substr(o+1)||"";o=0}return{term:i}};return e});t.define("select2/data/minimumInputLength",[],function(){function e(e,t,r){this.minimumInputLength=r.get("minimumInputLength");e.call(this,t,r)}e.prototype.query=function(e,t,r){t.term=t.term||"";if(t.term.length<this.minimumInputLength){this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}});return}e.call(this,t,r)};return e});t.define("select2/data/maximumInputLength",[],function(){function e(e,t,r){this.maximumInputLength=r.get("maximumInputLength");e.call(this,t,r)}e.prototype.query=function(e,t,r){t.term=t.term||"";if(this.maximumInputLength>0&&t.term.length>this.maximumInputLength){this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}});return}e.call(this,t,r)};return e});t.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,r){this.maximumSelectionLength=r.get("maximumSelectionLength");e.call(this,t,r)}e.prototype.bind=function(e,t,r){var n=this;e.call(this,t,r);t.on("select",function(){n._checkIfMaximumSelected()})};e.prototype.query=function(e,t,r){var n=this;this._checkIfMaximumSelected(function(){e.call(n,t,r)})};e.prototype._checkIfMaximumSelected=function(e,r){var n=this;this.current(function(e){var t=e!=null?e.length:0;if(n.maximumSelectionLength>0&&t>=n.maximumSelectionLength){n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}});return}if(r){r()}})};return e});t.define("select2/dropdown",["jquery","./utils"],function(t,e){function r(e,t){this.$element=e;this.options=t;r.__super__.constructor.call(this)}e.Extend(r,e.Observable);r.prototype.render=function(){var e=t('<span class="select2-dropdown">'+'<span class="select2-results"></span>'+"</span>");e.attr("dir",this.options.get("dir"));this.$dropdown=e;return e};r.prototype.bind=function(){};r.prototype.position=function(e,t){};r.prototype.destroy=function(){this.$dropdown.remove()};return r});t.define("select2/dropdown/search",["jquery"],function(i){function e(){}e.prototype.render=function(e){var t=e.call(this);var r=this.options.get("translations").get("search");var n=i('<span class="select2-search select2-search--dropdown">'+'<input class="select2-search__field" type="search" tabindex="-1"'+' autocorrect="off" autocapitalize="none"'+' spellcheck="false" role="searchbox" aria-autocomplete="list" />'+"</span>");this.$searchContainer=n;this.$search=n.find("input");this.$search.prop("autocomplete",this.options.get("autocomplete"));this.$search.attr("aria-label",r());t.prepend(n);return t};e.prototype.bind=function(e,t,r){var n=this;var a=t.id+"-results";e.call(this,t,r);this.$search.on("keydown",function(e){n.trigger("keypress",e);n._keyUpPrevented=e.isDefaultPrevented()});this.$search.on("input",function(e){i(this).off("keyup")});this.$search.on("keyup input",function(e){n.handleSearch(e)});t.on("open",function(){n.$search.attr("tabindex",0);n.$search.attr("aria-controls",a);n.$search.trigger("focus");window.setTimeout(function(){n.$search.trigger("focus")},0)});t.on("close",function(){n.$search.attr("tabindex",-1);n.$search.removeAttr("aria-controls");n.$search.removeAttr("aria-activedescendant");n.$search.val("");n.$search.trigger("blur")});t.on("focus",function(){if(!t.isOpen()){n.$search.trigger("focus")}});t.on("results:all",function(e){if(e.query.term==null||e.query.term===""){var t=n.showSearch(e);if(t){n.$searchContainer[0].classList.remove("select2-search--hide")}else{n.$searchContainer[0].classList.add("select2-search--hide")}}});t.on("results:focus",function(e){if(e.data._resultId){n.$search.attr("aria-activedescendant",e.data._resultId)}else{n.$search.removeAttr("aria-activedescendant")}})};e.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=false};e.prototype.showSearch=function(e,t){return true};return e});t.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,r,n){this.placeholder=this.normalizePlaceholder(r.get("placeholder"));e.call(this,t,r,n)}e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results);e.call(this,t)};e.prototype.normalizePlaceholder=function(e,t){if(typeof t==="string"){t={id:"",text:t}}return t};e.prototype.removePlaceholder=function(e,t){var r=t.slice(0);for(var n=t.length-1;n>=0;n--){var a=t[n];if(this.placeholder.id===a.id){r.splice(n,1)}}return r};return e});t.define("select2/dropdown/infiniteScroll",["jquery"],function(n){function e(e,t,r,n){this.lastParams={};e.call(this,t,r,n);this.$loadingMore=this.createLoadingMore();this.loading=false}e.prototype.append=function(e,t){this.$loadingMore.remove();this.loading=false;e.call(this,t);if(this.showLoadingMore(t)){this.$results.append(this.$loadingMore);this.loadMoreIfNeeded()}};e.prototype.bind=function(e,t,r){var n=this;e.call(this,t,r);t.on("query",function(e){n.lastParams=e;n.loading=true});t.on("query:append",function(e){n.lastParams=e;n.loading=true});this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))};e.prototype.loadMoreIfNeeded=function(){var e=n.contains(document.documentElement,this.$loadingMore[0]);if(this.loading||!e){return}var t=this.$results.offset().top+this.$results.outerHeight(false);var r=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(false);if(t+50>=r){this.loadMore()}};e.prototype.loadMore=function(){this.loading=true;var e=n.extend({},{page:1},this.lastParams);e.page++;this.trigger("query:append",e)};e.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more};e.prototype.createLoadingMore=function(){var e=n("<li "+'class="select2-results__option select2-results__option--load-more"'+'role="option" aria-disabled="true"></li>');var t=this.options.get("translations").get("loadingMore");e.html(t(this.lastParams));return e};return e});t.define("select2/dropdown/attachBody",["jquery","../utils"],function(h,s){function e(e,t,r){this.$dropdownParent=h(r.get("dropdownParent")||document.body);e.call(this,t,r)}e.prototype.bind=function(e,t,r){var n=this;e.call(this,t,r);t.on("open",function(){n._showDropdown();n._attachPositioningHandler(t);n._bindContainerResultHandlers(t)});t.on("close",function(){n._hideDropdown();n._detachPositioningHandler(t)});this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})};e.prototype.destroy=function(e){e.call(this);this.$dropdownContainer.remove()};e.prototype.position=function(e,t,r){t.attr("class",r.attr("class"));t[0].classList.remove("select2");t[0].classList.add("select2-container--open");t.css({position:"absolute",top:-999999});this.$container=r};e.prototype.render=function(e){var t=h("<span></span>");var r=e.call(this);t.append(r);this.$dropdownContainer=t;return t};e.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()};e.prototype._bindContainerResultHandlers=function(e,t){if(this._containerResultsHandlersBound){return}var r=this;t.on("results:all",function(){r._positionDropdown();r._resizeDropdown()});t.on("results:append",function(){r._positionDropdown();r._resizeDropdown()});t.on("results:message",function(){r._positionDropdown();r._resizeDropdown()});t.on("select",function(){r._positionDropdown();r._resizeDropdown()});t.on("unselect",function(){r._positionDropdown();r._resizeDropdown()});this._containerResultsHandlersBound=true};e.prototype._attachPositioningHandler=function(e,t){var r=this;var n="scroll.select2."+t.id;var a="resize.select2."+t.id;var i="orientationchange.select2."+t.id;var o=this.$container.parents().filter(s.hasScroll);o.each(function(){s.StoreData(this,"select2-scroll-position",{x:h(this).scrollLeft(),y:h(this).scrollTop()})});o.on(n,function(e){var t=s.GetData(this,"select2-scroll-position");h(this).scrollTop(t.y)});h(window).on(n+" "+a+" "+i,function(e){r._positionDropdown();r._resizeDropdown()})};e.prototype._detachPositioningHandler=function(e,t){var r="scroll.select2."+t.id;var n="resize.select2."+t.id;var a="orientationchange.select2."+t.id;var i=this.$container.parents().filter(s.hasScroll);i.off(r);h(window).off(r+" "+n+" "+a)};e.prototype._positionDropdown=function(){var e=h(window);var t=this.$dropdown[0].classList.contains("select2-dropdown--above");var r=this.$dropdown[0].classList.contains("select2-dropdown--below");var n=null;var a=this.$container.offset();a.bottom=a.top+this.$container.outerHeight(false);var i={height:this.$container.outerHeight(false)};i.top=a.top;i.bottom=a.top+i.height;var o={height:this.$dropdown.outerHeight(false)};var s={top:e.scrollTop(),bottom:e.scrollTop()+e.height()};var l=s.top<a.top-o.height;var c=s.bottom>a.bottom+o.height;var u={left:a.left,top:i.bottom};var f=this.$dropdownParent;if(f.css("position")==="static"){f=f.offsetParent()}var d={top:0,left:0};if(h.contains(document.body,f[0])||f[0].isConnected){d=f.offset()}u.top-=d.top;u.left-=d.left;if(!t&&!r){n="below"}if(!c&&l&&!t){n="above"}else if(!l&&c&&t){n="below"}if(n=="above"||t&&n!=="below"){u.top=i.top-d.top-o.height}if(n!=null){this.$dropdown[0].classList.remove("select2-dropdown--below");this.$dropdown[0].classList.remove("select2-dropdown--above");this.$dropdown[0].classList.add("select2-dropdown--"+n);this.$container[0].classList.remove("select2-container--below");this.$container[0].classList.remove("select2-container--above");this.$container[0].classList.add("select2-container--"+n)}this.$dropdownContainer.css(u)};e.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(false)+"px"};if(this.options.get("dropdownAutoWidth")){e.minWidth=e.width;e.position="relative";e.width="auto"}this.$dropdown.css(e)};e.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown()};return e});t.define("select2/dropdown/minimumResultsForSearch",[],function(){function a(e){var t=0;for(var r=0;r<e.length;r++){var n=e[r];if(n.children){t+=a(n.children)}else{t++}}return t}function e(e,t,r,n){this.minimumResultsForSearch=r.get("minimumResultsForSearch");if(this.minimumResultsForSearch<0){this.minimumResultsForSearch=Infinity}e.call(this,t,r,n)}e.prototype.showSearch=function(e,t){if(a(t.data.results)<this.minimumResultsForSearch){return false}return e.call(this,t)};return e});t.define("select2/dropdown/selectOnClose",["../utils"],function(i){function e(){}e.prototype.bind=function(e,t,r){var n=this;e.call(this,t,r);t.on("close",function(e){n._handleSelectOnClose(e)})};e.prototype._handleSelectOnClose=function(e,t){if(t&&t.originalSelect2Event!=null){var r=t.originalSelect2Event;if(r._type==="select"||r._type==="unselect"){return}}var n=this.getHighlightedResults();if(n.length<1){return}var a=i.GetData(n[0],"data");if(a.element!=null&&a.element.selected||a.element==null&&a.selected){return}this.trigger("select",{data:a})};return e});t.define("select2/dropdown/closeOnSelect",[],function(){function e(){}e.prototype.bind=function(e,t,r){var n=this;e.call(this,t,r);t.on("select",function(e){n._selectTriggered(e)});t.on("unselect",function(e){n._selectTriggered(e)})};e.prototype._selectTriggered=function(e,t){var r=t.originalEvent;if(r&&(r.ctrlKey||r.metaKey)){return}this.trigger("close",{originalEvent:r,originalSelect2Event:t})};return e});t.define("select2/dropdown/dropdownCss",["../utils"],function(n){function e(){}e.prototype.render=function(e){var t=e.call(this);var r=this.options.get("dropdownCssClass")||"";if(r.indexOf(":all:")!==-1){r=r.replace(":all:","");n.copyNonInternalCssClasses(t[0],this.$element[0])}t.addClass(r);return t};return e});t.define("select2/dropdown/tagsSearchHighlight",["../utils"],function(i){function e(){}e.prototype.highlightFirstItem=function(e){var t=this.$results.find(".select2-results__option--selectable"+":not(.select2-results__option--selected)");if(t.length>0){var r=t.first();var n=i.GetData(r[0],"data");var a=n.element;if(a&&a.getAttribute){if(a.getAttribute("data-select2-tag")==="true"){r.trigger("mouseenter");return}}}e.call(this)};return e});t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum;var r="Please delete "+t+" character";if(t!=1){r+="s"}return r},inputTooShort:function(e){var t=e.minimum-e.input.length;var r="Please enter "+t+" or more characters";return r},loadingMore:function(){return"Loading more results"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";if(e.maximum!=1){t+="s"}return t},noResults:function(){return"No results found"},searching:function(){return"Searching"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"},search:function(){return"Search"}}});t.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./dropdown/tagsSearchHighlight","./i18n/en"],function(u,i,o,s,l,c,f,d,h,p,v,r,g,m,_,y,b,x,w,A,T,k,M,S,C,L,E,D,O,P,e){function t(){this.reset()}t.prototype.apply=function(e){e=u.extend(true,{},this.defaults,e);if(e.dataAdapter==null){if(e.ajax!=null){e.dataAdapter=_}else if(e.data!=null){e.dataAdapter=m}else{e.dataAdapter=g}if(e.minimumInputLength>0){e.dataAdapter=p.Decorate(e.dataAdapter,x)}if(e.maximumInputLength>0){e.dataAdapter=p.Decorate(e.dataAdapter,w)}if(e.maximumSelectionLength>0){e.dataAdapter=p.Decorate(e.dataAdapter,A)}if(e.tags){e.dataAdapter=p.Decorate(e.dataAdapter,y)}if(e.tokenSeparators!=null||e.tokenizer!=null){e.dataAdapter=p.Decorate(e.dataAdapter,b)}}if(e.resultsAdapter==null){e.resultsAdapter=i;if(e.ajax!=null){e.resultsAdapter=p.Decorate(e.resultsAdapter,S)}if(e.placeholder!=null){e.resultsAdapter=p.Decorate(e.resultsAdapter,M)}if(e.selectOnClose){e.resultsAdapter=p.Decorate(e.resultsAdapter,E)}if(e.tags){e.resultsAdapter=p.Decorate(e.resultsAdapter,P)}}if(e.dropdownAdapter==null){if(e.multiple){e.dropdownAdapter=T}else{var t=p.Decorate(T,k);e.dropdownAdapter=t}if(e.minimumResultsForSearch!==0){e.dropdownAdapter=p.Decorate(e.dropdownAdapter,L)}if(e.closeOnSelect){e.dropdownAdapter=p.Decorate(e.dropdownAdapter,D)}if(e.dropdownCssClass!=null){e.dropdownAdapter=p.Decorate(e.dropdownAdapter,O)}e.dropdownAdapter=p.Decorate(e.dropdownAdapter,C)}if(e.selectionAdapter==null){if(e.multiple){e.selectionAdapter=s}else{e.selectionAdapter=o}if(e.placeholder!=null){e.selectionAdapter=p.Decorate(e.selectionAdapter,l)}if(e.allowClear){e.selectionAdapter=p.Decorate(e.selectionAdapter,c)}if(e.multiple){e.selectionAdapter=p.Decorate(e.selectionAdapter,f)}if(e.selectionCssClass!=null){e.selectionAdapter=p.Decorate(e.selectionAdapter,d)}e.selectionAdapter=p.Decorate(e.selectionAdapter,h)}e.language=this._resolveLanguage(e.language);e.language.push("en");var r=[];for(var n=0;n<e.language.length;n++){var a=e.language[n];if(r.indexOf(a)===-1){r.push(a)}}e.language=r;e.translations=this._processTranslations(e.language,e.debug);return e};t.prototype.reset=function(){function l(e){function t(e){return r[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function c(e,t){if(e.term==null||e.term.trim()===""){return t}if(t.children&&t.children.length>0){var r=u.extend(true,{},t);for(var n=t.children.length-1;n>=0;n--){var a=t.children[n];var i=c(e,a);if(i==null){r.children.splice(n,1)}}if(r.children.length>0){return r}return c(e,r)}var o=l(t.text).toUpperCase();var s=l(e.term).toUpperCase();if(o.indexOf(s)>-1){return t}return null}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:true,debug:false,dropdownAutoWidth:false,escapeMarkup:p.escapeMarkup,language:{},matcher:c,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:false,scrollAfterSelect:false,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}};t.prototype.applyFromElement=function(e,t){var r=e.language;var n=this.defaults.language;var a=t.prop("lang");var i=t.closest("[lang]").prop("lang");var o=Array.prototype.concat.call(this._resolveLanguage(a),this._resolveLanguage(r),this._resolveLanguage(n),this._resolveLanguage(i));e.language=o;return e};t.prototype._resolveLanguage=function(e){if(!e){return[]}if(u.isEmptyObject(e)){return[]}if(u.isPlainObject(e)){return[e]}var t;if(!Array.isArray(e)){t=[e]}else{t=e}var r=[];for(var n=0;n<t.length;n++){r.push(t[n]);if(typeof t[n]==="string"&&t[n].indexOf("-")>0){var a=t[n].split("-");var i=a[0];r.push(i)}}return r};t.prototype._processTranslations=function(e,t){var r=new v;for(var n=0;n<e.length;n++){var a=new v;var i=e[n];if(typeof i==="string"){try{a=v.loadPath(i)}catch(e){try{i=this.defaults.amdLanguageBase+i;a=v.loadPath(i)}catch(e){if(t&&window.console&&console.warn){console.warn('Select2: The language file for "'+i+'" could '+"not be automatically loaded. A fallback will be used instead.")}}}}else if(u.isPlainObject(i)){a=new v(i)}else{a=i}r.extend(a)}return r};t.prototype.set=function(e,t){var r=u.camelCase(e);var n={};n[r]=t;var a=p._convertData(n);u.extend(true,this.defaults,a)};var n=new t;return n});t.define("select2/options",["jquery","./defaults","./utils"],function(d,r,h){function e(e,t){this.options=e;if(t!=null){this.fromElement(t)}if(t!=null){this.options=r.applyFromElement(this.options,t)}this.options=r.apply(this.options)}e.prototype.fromElement=function(e){var t=["select2"];if(this.options.multiple==null){this.options.multiple=e.prop("multiple")}if(this.options.disabled==null){this.options.disabled=e.prop("disabled")}if(this.options.autocomplete==null&&e.prop("autocomplete")){this.options.autocomplete=e.prop("autocomplete")}if(this.options.dir==null){if(e.prop("dir")){this.options.dir=e.prop("dir")}else if(e.closest("[dir]").prop("dir")){this.options.dir=e.closest("[dir]").prop("dir")}else{this.options.dir="ltr"}}e.prop("disabled",this.options.disabled);e.prop("multiple",this.options.multiple);if(h.GetData(e[0],"select2Tags")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-select2-tags` attribute has been changed to "+'use the `data-data` and `data-tags="true"` attributes and will be '+"removed in future versions of Select2.")}h.StoreData(e[0],"data",h.GetData(e[0],"select2Tags"));h.StoreData(e[0],"tags",true)}if(h.GetData(e[0],"ajaxUrl")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-ajax-url` attribute has been changed to "+"`data-ajax--url` and support for the old attribute will be removed"+" in future versions of Select2.")}e.attr("ajax--url",h.GetData(e[0],"ajaxUrl"));h.StoreData(e[0],"ajax-Url",h.GetData(e[0],"ajaxUrl"))}var r={};function n(e,t){return t.toUpperCase()}for(var a=0;a<e[0].attributes.length;a++){var i=e[0].attributes[a].name;var o="data-";if(i.substr(0,o.length)==o){var s=i.substring(o.length);var l=h.GetData(e[0],s);var c=s.replace(/-([a-z])/g,n);r[c]=l}}if(d.fn.jquery&&d.fn.jquery.substr(0,2)=="1."&&e[0].dataset){r=d.extend(true,{},e[0].dataset,r)}var u=d.extend(true,{},h.GetData(e[0]),r);u=h._convertData(u);for(var f in u){if(t.indexOf(f)>-1){continue}if(d.isPlainObject(this.options[f])){d.extend(this.options[f],u[f])}else{this.options[f]=u[f]}}return this};e.prototype.get=function(e){return this.options[e]};e.prototype.set=function(e,t){this.options[e]=t};return e});t.define("select2/core",["jquery","./options","./utils","./keys"],function(t,c,u,n){var f=function(e,t){if(u.GetData(e[0],"select2")!=null){u.GetData(e[0],"select2").destroy()}this.$element=e;this.id=this._generateId(e);t=t||{};this.options=new c(t,e);f.__super__.constructor.call(this);var r=e.attr("tabindex")||0;u.StoreData(e[0],"old-tabindex",r);e.attr("tabindex","-1");var n=this.options.get("dataAdapter");this.dataAdapter=new n(e,this.options);var a=this.render();this._placeContainer(a);var i=this.options.get("selectionAdapter");this.selection=new i(e,this.options);this.$selection=this.selection.render();this.selection.position(this.$selection,a);var o=this.options.get("dropdownAdapter");this.dropdown=new o(e,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,a);var s=this.options.get("resultsAdapter");this.results=new s(e,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);var l=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current(function(e){l.trigger("selection:update",{data:e})});e[0].classList.add("select2-hidden-accessible");e.attr("aria-hidden","true");this._syncAttributes();u.StoreData(e[0],"select2",this);e.data("select2",this)};u.Extend(f,u.Observable);f.prototype._generateId=function(e){var t="";if(e.attr("id")!=null){t=e.attr("id")}else if(e.attr("name")!=null){t=e.attr("name")+"-"+u.generateChars(2)}else{t=u.generateChars(4)}t=t.replace(/(:|\.|\[|\]|,)/g,"");t="select2-"+t;return t};f.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));if(t!=null){e.css("width",t)}};f.prototype._resolveWidth=function(e,t){var r=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if(t=="resolve"){var n=this._resolveWidth(e,"style");if(n!=null){return n}return this._resolveWidth(e,"element")}if(t=="element"){var a=e.outerWidth(false);if(a<=0){return"auto"}return a+"px"}if(t=="style"){var i=e.attr("style");if(typeof i!=="string"){return null}var o=i.split(";");for(var s=0,l=o.length;s<l;s=s+1){var c=o[s].replace(/\s/g,"");var u=c.match(r);if(u!==null&&u.length>=1){return u[1]}}return null}if(t=="computedstyle"){var f=window.getComputedStyle(e[0]);return f.width}return t};f.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container)};f.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})});this.$element.on("focus.select2",function(e){t.trigger("focus",e)});this._syncA=u.bind(this._syncAttributes,this);this._syncS=u.bind(this._syncSubtree,this);this._observer=new window.MutationObserver(function(e){t._syncA();t._syncS(e)});this._observer.observe(this.$element[0],{attributes:true,childList:true,subtree:false})};f.prototype._registerDataEvents=function(){var r=this;this.dataAdapter.on("*",function(e,t){r.trigger(e,t)})};f.prototype._registerSelectionEvents=function(){var r=this;var n=["toggle","focus"];this.selection.on("toggle",function(){r.toggleDropdown()});this.selection.on("focus",function(e){r.focus(e)});this.selection.on("*",function(e,t){if(n.indexOf(e)!==-1){return}r.trigger(e,t)})};f.prototype._registerDropdownEvents=function(){var r=this;this.dropdown.on("*",function(e,t){r.trigger(e,t)})};f.prototype._registerResultsEvents=function(){var r=this;this.results.on("*",function(e,t){r.trigger(e,t)})};f.prototype._registerEvents=function(){var r=this;this.on("open",function(){r.$container[0].classList.add("select2-container--open")});this.on("close",function(){r.$container[0].classList.remove("select2-container--open")});this.on("enable",function(){r.$container[0].classList.remove("select2-container--disabled")});this.on("disable",function(){r.$container[0].classList.add("select2-container--disabled")});this.on("blur",function(){r.$container[0].classList.remove("select2-container--focus")});this.on("query",function(t){if(!r.isOpen()){r.trigger("open",{})}this.dataAdapter.query(t,function(e){r.trigger("results:all",{data:e,query:t})})});this.on("query:append",function(t){this.dataAdapter.query(t,function(e){r.trigger("results:append",{data:e,query:t})})});this.on("keypress",function(e){var t=e.which;if(r.isOpen()){if(t===n.ESC||t===n.UP&&e.altKey){r.close(e);e.preventDefault()}else if(t===n.ENTER||t===n.TAB){r.trigger("results:select",{});e.preventDefault()}else if(t===n.SPACE&&e.ctrlKey){r.trigger("results:toggle",{});e.preventDefault()}else if(t===n.UP){r.trigger("results:previous",{});e.preventDefault()}else if(t===n.DOWN){r.trigger("results:next",{});e.preventDefault()}}else{if(t===n.ENTER||t===n.SPACE||t===n.DOWN&&e.altKey){r.open();e.preventDefault()}}})};f.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled"));if(this.isDisabled()){if(this.isOpen()){this.close()}this.trigger("disable",{})}else{this.trigger("enable",{})}};f.prototype._isChangeMutation=function(e){var t=this;if(e.addedNodes&&e.addedNodes.length>0){for(var r=0;r<e.addedNodes.length;r++){var n=e.addedNodes[r];if(n.selected){return true}}}else if(e.removedNodes&&e.removedNodes.length>0){return true}else if(Array.isArray(e)){return e.some(function(e){return t._isChangeMutation(e)})}return false};f.prototype._syncSubtree=function(e){var t=this._isChangeMutation(e);var r=this;if(t){this.dataAdapter.current(function(e){r.trigger("selection:update",{data:e})})}};f.prototype.trigger=function(e,t){var r=f.__super__.trigger;var n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(t===undefined){t={}}if(e in n){var a=n[e];var i={prevented:false,name:e,args:t};r.call(this,a,i);if(i.prevented){t.prevented=true;return}}r.call(this,e,t)};f.prototype.toggleDropdown=function(){if(this.isDisabled()){return}if(this.isOpen()){this.close()}else{this.open()}};f.prototype.open=function(){if(this.isOpen()){return}if(this.isDisabled()){return}this.trigger("query",{})};f.prototype.close=function(e){if(!this.isOpen()){return}this.trigger("close",{originalEvent:e})};f.prototype.isEnabled=function(){return!this.isDisabled()};f.prototype.isDisabled=function(){return this.options.get("disabled")};f.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")};f.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")};f.prototype.focus=function(e){if(this.hasFocus()){return}this.$container[0].classList.add("select2-container--focus");this.trigger("focus",{})};f.prototype.enable=function(e){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("enable")` method has been deprecated and will'+' be removed in later Select2 versions. Use $element.prop("disabled")'+" instead.")}if(e==null||e.length===0){e=[true]}var t=!e[0];this.$element.prop("disabled",t)};f.prototype.data=function(){if(this.options.get("debug")&&arguments.length>0&&window.console&&console.warn){console.warn('Select2: Data can no longer be set using `select2("data")`. You '+"should consider setting the value instead using `$element.val()`.")}var t=[];this.dataAdapter.current(function(e){t=e});return t};f.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("val")` method has been deprecated and will be'+" removed in later Select2 versions. Use $element.val() instead.")}if(e==null||e.length===0){return this.$element.val()}var t=e[0];if(Array.isArray(t)){t=t.map(function(e){return e.toString()})}this.$element.val(t).trigger("input").trigger("change")};f.prototype.destroy=function(){u.RemoveData(this.$container[0]);this.$container.remove();this._observer.disconnect();this._observer=null;this._syncA=null;this._syncS=null;this.$element.off(".select2");this.$element.attr("tabindex",u.GetData(this.$element[0],"old-tabindex"));this.$element[0].classList.remove("select2-hidden-accessible");this.$element.attr("aria-hidden","false");u.RemoveData(this.$element[0]);this.$element.removeData("select2");this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null};f.prototype.render=function(){var e=t('<span class="select2 select2-container">'+'<span class="selection"></span>'+'<span class="dropdown-wrapper" aria-hidden="true"></span>'+"</span>");e.attr("dir",this.options.get("dir"));this.$container=e;this.$container[0].classList.add("select2-container--"+this.options.get("theme"));u.StoreData(e[0],"element",this.$element);return e};return f});t.define("jquery-mousewheel",["jquery"],function(e){return e});t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(a,e,i,t,o){if(a.fn.select2==null){var s=["open","close","destroy"];a.fn.select2=function(r){r=r||{};if(typeof r==="object"){this.each(function(){var e=a.extend(true,{},r);var t=new i(a(this),e)});return this}else if(typeof r==="string"){var t;var n=Array.prototype.slice.call(arguments,1);this.each(function(){var e=o.GetData(this,"select2");if(e==null&&window.console&&console.error){console.error("The select2('"+r+"') method was called on an "+"element that is not using Select2.")}t=e[r].apply(e,n)});if(s.indexOf(r)>-1){return this}return t}else{throw new Error("Invalid arguments for Select2: "+r)}}}if(a.fn.select2.defaults==null){a.fn.select2.defaults=t}return i});return{define:t.define,require:t.require}}();var t=e.require("jquery.select2");r.fn.select2.amd=e;return t});