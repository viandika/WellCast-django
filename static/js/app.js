(function(e,t){if(typeof module!="undefined"){module.exports=t()}else if(typeof define==="function"&&define.amd){define([],t)}else{e._hyperscript=t()}})(typeof self!=="undefined"?self:this,function(){"use strict";function j(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}return e}function H(e,t){var r=e[t];if(r){return r}else{var a={};e[t]=a;return a}}function t(e){try{return JSON.parse(e)}catch(e){r(e);return null}}function r(e){if(console.error){console.error(e)}else if(console.log){console.log("ERROR: ",e)}}function s(e,t){return new(e.bind.apply(e,[e].concat(t)))}var B=typeof self!=="undefined"?self:typeof global!=="undefined"?global:this;var q=function(){var A={"+":"PLUS","-":"MINUS","*":"MULTIPLY","/":"DIVIDE",".":"PERIOD","..":"ELLIPSIS","\\":"BACKSLASH",":":"COLON","%":"PERCENT","|":"PIPE","!":"EXCLAMATION","?":"QUESTION","#":"POUND","&":"AMPERSAND",$:"DOLLAR",";":"SEMI",",":"COMMA","(":"L_PAREN",")":"R_PAREN","<":"L_ANG",">":"R_ANG","<=":"LTE_ANG",">=":"GTE_ANG","==":"EQ","===":"EQQ","!=":"NEQ","!==":"NEQQ","{":"L_BRACE","}":"R_BRACE","[":"L_BRACKET","]":"R_BRACKET","=":"EQUALS"};function S(e){return I(e)||O(e)||e==="-"||e==="_"||e===":"}function E(e){return I(e)||O(e)||e==="-"||e==="_"||e===":"}function L(e){return e===" "||e==="\t"||D(e)}function C(e){return"[Line: "+e.line+", Column: "+e.col+"]"}function D(e){return e==="\r"||e==="\n"}function O(e){return e>="0"&&e<="9"}function I(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}function P(e){return e==="_"||e==="$"}function R(e){return e==="`"||e==="^"}function N(i,o,e){s();var t=null;function s(){while(x(0,true).type==="WHITESPACE"){o.push(i.shift())}}function l(e,t){U.raiseParseError(e,t)}function r(e){var t=u(e);if(t){return t}else{l(this,"Expected '"+e+"' but found '"+b().value+"'")}}function a(e,t,r){for(var a=0;a<arguments.length;a++){var n=arguments[a];var i=u(n);if(i){return i}}}function n(e,t,r){for(var a=0;a<arguments.length;a++){var n=arguments[a];var i=v(n);if(i){return i}}}function u(e){if(b()&&b().op&&b().value===e){return p()}}function c(e,t,r,a){var n=f(e,t,r,a);if(n){return n}else{l(this,"Expected one of "+JSON.stringify([e,t,r]))}}function f(e,t,r,a){if(b()&&b().type&&[e,t,r,a].indexOf(b().type)>=0){return p()}}function d(e,t){var r=v(e,t);if(r){return r}else{l(this,"Expected '"+e+"' but found '"+b().value+"'")}}function v(e,t){if(k.indexOf(e)!==-1){return}var t=t||"IDENTIFIER";if(b()&&b().value===e&&b().type===t){return p()}}function p(){var e=i.shift();o.push(e);t=e;s();return e}function h(e,t){var r=[];var a=x(0,true);while((t==null||a.type!==t)&&(e==null||a.value!==e)&&a.type!=="EOF"){var n=i.shift();o.push(n);r.push(a);a=x(0,true)}s();return r}function m(){if(o[o.length-1]&&o[o.length-1].type==="WHITESPACE"){return o[o.length-1].value}else{return""}}function g(){return h(null,"WHITESPACE")}function y(){return i.length>0}function x(e,t){var r;var a=0;do{if(!t){while(i[a]&&i[a].type==="WHITESPACE"){a++}}r=i[a];e--;a++}while(e>-1);if(r){return r}else{return{type:"EOF",value:"<<<EOF>>>"}}}function b(){return x(0)}function _(){return t}function w(){return e.substring(this.startToken.start,this.endToken.end)}function T(){return e.split("\n")[this.startToken.line-1]}var k=[];function M(e){k.push(e)}function A(){k.pop()}function S(){var e=k;k=[];return e}function E(e){k=e}return{pushFollow:M,popFollow:A,clearFollow:S,restoreFollow:E,matchAnyToken:n,matchAnyOpToken:a,matchOpToken:u,requireOpToken:r,matchTokenType:f,requireTokenType:c,consumeToken:p,matchToken:v,requireToken:d,list:i,consumed:o,source:e,hasMore:y,currentToken:b,lastMatch:_,token:x,consumeUntil:h,consumeUntilWhitespace:g,lastWhitespace:m,sourceFor:w,lineFor:T}}function z(e){if(e.length>0){var t=e[e.length-1];if(t.type==="IDENTIFIER"||t.type==="CLASS_REF"||t.type==="ID_REF"){return false}if(t.op&&(t.value===">"||t.value===")")){return false}}return true}function e(e,t){var r=[];var a=e;var n=0;var i=0;var o=1;var s="<START>";var l=0;function u(){return t&&l===0}while(n<a.length){if(_()==="-"&&w()==="-"){d()}else{if(L(_())){r.push(M())}else if(!k()&&_()==="."&&(I(w())||w()==="{")){r.push(v())}else if(!k()&&_()==="#"&&(I(w())||w()==="{")){r.push(m())}else if(_()==="["&&w()==="@"){r.push(p())}else if(_()==="@"){r.push(h())}else if(I(_())||!u()&&P(_())){r.push(g())}else if(O(_())){r.push(y())}else if(!u()&&(_()==='"'||_()==="`")){r.push(b())}else if(!u()&&_()==="'"){if(z(r)){r.push(b())}else{r.push(x())}}else if(A[_()]){if(s==="$"&&_()==="{"){l++}if(_()==="}"){l--}r.push(x())}else if(u()||R(_())){r.push(f("RESERVED",T()))}else{if(n<a.length){throw Error("Unknown token: "+_()+" ")}}}}return N(r,[],a);function c(e,t){var r=f(e,t);r.op=true;return r}function f(e,t){return{type:e,value:t,start:n,end:n+1,column:i,line:o}}function d(){while(_()&&!D(_())){T()}T()}function v(){var e=f("CLASS_REF");var t=T();if(_()==="{"){e.template=true;t+=T();while(_()&&_()!=="}"){t+=T()}if(_()!=="}"){throw Error("Unterminated class reference")}else{t+=T()}}else{while(S(_())){t+=T()}}e.value=t;e.end=n;return e}function p(){var e=f("ATTRIBUTE_REF");var t=T();while(n<a.length&&_()!=="]"){t+=T()}if(_()==="]"){t+=T()}e.value=t;e.end=n;return e}function h(){var e=f("ATTRIBUTE_REF");var t=T();while(E(_())){t+=T()}e.value=t;e.end=n;return e}function m(){var e=f("ID_REF");var t=T();if(_()==="{"){e.template=true;t+=T();while(_()&&_()!=="}"){t+=T()}if(_()!=="}"){throw Error("Unterminated id reference")}else{T()}}else{while(E(_())){t+=T()}}e.value=t;e.end=n;return e}function g(){var e=f("IDENTIFIER");var t=T();while(I(_())||P(_())){t+=T()}e.value=t;e.end=n;return e}function y(){var e=f("NUMBER");var t=T();while(O(_())){t+=T()}if(_()==="."&&O(w())){t+=T()}while(O(_())){t+=T()}e.value=t;e.end=n;return e}function x(){var e=c();var t=T();while(_()&&A[t+_()]){t+=T()}e.type=A[t];e.value=t;e.end=n;return e}function b(){var e=f("STRING");var t=T();var r="";while(_()&&_()!==t){if(_()==="\\"){T()}r+=T()}if(_()!==t){throw Error("Unterminated string at "+C(e))}else{T()}e.value=r;e.end=n;e.template=t==="`";return e}function _(){return a.charAt(n)}function w(){return a.charAt(n+1)}function T(){s=_();n++;i++;return s}function k(){return I(s)||O(s)||s===")"||s==="}"||s==="]"}function M(){var e=f("WHITESPACE");var t="";while(_()&&L(_())){if(D(_())){i=0;o++}t+=T()}e.value=t;e.end=n;return e}}return{tokenize:e,makeTokensObject:N}}();var U=function(){var s={};var o={};var l={};var n=[];var u=[];function c(e,t,r){e.startToken=t;e.sourceFor=r.sourceFor;e.lineFor=r.lineFor;e.programSource=r.source}function i(e,t,r){var a=s[e];if(a){var n=t.currentToken();var i=a(U,V,t,r);if(i){c(i,n,t);i.endToken=i.endToken||t.lastMatch();var r=i.root;while(r!=null){c(r,n,t);r=r.root}}return i}}function f(e,t,r,a){var n=i(e,t,a);return n||h(t,r||"Expected "+e)}function d(e,t){for(var r=0;r<e.length;r++){var a=e[r];var n=i(a,t);if(n){return n}}}function r(e,t){s[e]=t}function e(e,n){var i=e+"Command";var t=function(e,t,r){var a=n(e,t,r);if(a){a.type=i;a.execute=function(e){e.meta.command=a;return t.unifiedExec(this,e)};return a}};s[i]=t;o[e]=t}function t(n,i){var o=n+"Feature";var e=function(e,t,r){var a=i(e,t,r);if(a){a.keyword=n;a.type=o;return a}};s[o]=e;l[n]=e}function a(e,t){n.push(e);r(e,t)}function v(e,t){u.push(e);r(e,t)}r("feature",function(e,t,r){if(r.matchOpToken("(")){var a=e.requireElement("feature",r);r.requireOpToken(")");return a}var n=l[r.currentToken().value];if(n){return n(e,t,r)}});r("command",function(e,t,r){if(r.matchOpToken("(")){var a=e.requireElement("command",r);r.requireOpToken(")");return a}var n=o[r.currentToken().value];if(n){var a=n(e,t,r)}else if(r.currentToken().type==="IDENTIFIER"&&r.token(1).value==="("){var a=e.requireElement("pseudoCommand",r)}if(a){return e.parseElement("indirectStatement",r,a)}return a});r("commandList",function(e,t,r){var a=e.parseElement("command",r);if(a){r.matchToken("then");a.next=e.parseElement("commandList",r);return a}});r("leaf",function(e,t,r){var a=d(n,r);if(a==null){return i("symbol",r)}return a});r("indirectExpression",function(e,t,r,a){for(var n=0;n<u.length;n++){var i=u[n];a.endToken=r.lastMatch();var o=e.parseElement(i,r,a);if(o){return o}}return a});r("indirectStatement",function(e,t,r,a){if(r.matchToken("unless")){a.endToken=r.lastMatch();var n=e.requireElement("expression",r);var i={type:"unlessStatementModifier",args:[n],op:function(e,t){if(t){return this.next}else{return a}},execute:function(e){return t.unifiedExec(this,e)}};a.parent=i;return i}return a});r("primaryExpression",function(e,t,r){var a=e.parseElement("leaf",r);if(a){return e.parseElement("indirectExpression",r,a)}e.raiseParseError(r,"Unexpected value: "+r.currentToken().value)});function p(e){var t=e.currentToken();var r=e.source;var a=r.split("\n");var n=t&&t.line?t.line-1:a.length-1;var i=a[n];var o=t&&t.line?t.column:i.length-1;return i+"\n"+" ".repeat(o)+"^^\n\n"}function h(e,t){t=(t||"Unexpected Token : "+e.currentToken().value)+"\n\n"+p(e);var r=new Error(t);r["tokens"]=e;throw r}function m(e){var t=i("hyperscript",e);if(e.hasMore())h(e);return t}function g(e,t){if(e){e.parent=t;g(e.next,t)}}function y(e){return o[e.value]}function x(e){return l[e.value]}function b(e){if(e.value=="end"||e.value=="then"||e.value=="else"||e.value==")"||y(e)||x(e)||e.type=="EOF"){return true}}function _(e){var t=[""];do{t.push(e.lastWhitespace());if(e.currentToken().value==="$"){e.consumeToken();var r=e.matchOpToken("{");t.push(f("expression",e));if(r){e.requireOpToken("}")}t.push("")}else if(e.currentToken().value==="\\"){e.consumeToken();e.consumeToken()}else{var a=e.consumeToken();t[t.length-1]+=a?a.value:""}}while(e.hasMore());t.push(e.lastWhitespace());return t}return{setParent:g,requireElement:f,parseElement:i,featureStart:x,commandStart:y,commandBoundary:b,parseAnyOf:d,parseHyperScript:m,raiseParseError:h,addGrammarElement:r,addCommand:e,addFeature:t,addLeafExpression:a,addIndirectExpression:v,parseStringTemplate:_}}();var Y={dynamicResolvers:[],String:function(e){if(e.toString){return e.toString()}else{return""+e}},Int:function(e){return parseInt(e)},Float:function(e){return parseFloat(e)},Number:function(e){console.log(e);return Number(e)},Date:function(e){return Date(e)},Array:function(e){return Array.from(e)},JSON:function(e){return JSON.stringify(e)},Object:function(e){if(e instanceof String){e=e.toString()}if(typeof e==="string"){return JSON.parse(e)}else{return j({},e)}}};var V=function(){function r(e,t){var r=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector;return r&&r.call(e,t)}function i(e,t){var r;if(window.CustomEvent&&typeof window.CustomEvent==="function"){r=new CustomEvent(e,{bubbles:true,cancelable:true,detail:t})}else{r=document.createEvent("CustomEvent");r.initCustomEvent(e,true,true,t)}return r}function o(e,t,r){r=r||{};r["sentBy"]=e;var a=i(t,r);var n=e.dispatchEvent(a);return n}function l(e){return Array.isArray(e)||e instanceof NodeList}function a(e,t){if(e==null){}else if(l(e)){for(var r=0;r<e.length;r++){t(e[r])}}else{t(e)}}var s={array_sentinel:true};function f(e){var t=[];for(var r=0;r<e.length;r++){var a=e[r];if(Array.isArray(a)){t.push(s);for(var n=0;n<a.length;n++){t.push(a[n])}t.push(s)}else{t.push(a)}}return t}function d(e){var t=[];for(var r=0;r<e.length;r++){var a=e[r];if(a===s){a=e[++r];var n=[];t.push(n);while(a!==s){n.push(a);a=e[++r]}}else{t.push(a)}}return t}function v(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.asyncWrapper){e[t]=r.value}if(Array.isArray(r)){for(var a=0;a<r.length;a++){var n=r[a];if(n.asyncWrapper){r[a]=n.value}}}}}var u={halt_flag:true};function p(t,r){while(true){try{var a=e(t,r)}catch(e){V.registerHyperTrace(r,e);if(r.meta.errorHandler&&!r.meta.handlingError){r.meta.handlingError=true;r[r.meta.errorSymmbol]=e;t=r.meta.errorHandler;continue}else if(r.meta.reject){r.meta.reject(e);a=u}else{throw e}}if(a==null){console.error(t," did not return a next element to execute! context: ",r);return}else if(a.then){a.then(function(e){p(e,r)}).catch(function(e){V.registerHyperTrace(r,e);if(r.meta.errorHandler&&!r.meta.handlingError){r.meta.handlingError=true;r[r.meta.errorSymmbol]=e;p(r.meta.errorHandler,r)}else if(r.meta.reject){r.meta.reject(e)}else{throw e}});return}else if(a===u){return}else{t=a}}}function e(n,t){var i=[t];var e=false;var o=false;if(n.args){for(var r=0;r<n.args.length;r++){var a=n.args[r];if(a==null){i.push(null)}else if(Array.isArray(a)){var s=[];for(var l=0;l<a.length;l++){var u=a[l];var c=u?u.evaluate(t):null;if(c){if(c.then){e=true}else if(c.asyncWrapper){o=true}}s.push(c)}i.push(s)}else if(a.evaluate){var c=a.evaluate(t);if(c){if(c.then){e=true}else if(c.asyncWrapper){o=true}}i.push(c)}else{i.push(a)}}}if(e){return new Promise(function(r,a){var e=f(i);Promise.all(e).then(function(e){e=d(e);if(o){v(e)}try{var t=n.op.apply(n,e);r(t)}catch(e){a(e)}}).catch(function(e){if(t.meta.errorHandler&&!t.meta.handlingError){t.meta.handlingError=true;t[t.meta.errorSymmbol]=e;p(t.meta.errorHandler,t)}else if(t.meta.reject){t.meta.reject(e)}else{}})})}else{if(o){v(i)}return n.op.apply(n,i)}}var t=null;function n(){if(t==null){t=_hyperscript.config.attributes.replace(/ /g,"").split(",")}return t}function c(e){for(var t=0;t<n().length;t++){var r=n()[t];if(e.hasAttribute&&e.hasAttribute(r)){return e.getAttribute(r)}}if(e["type"]==="text/hyperscript"){return e.innerText}return null}function h(e,t){if(e){if(e.hyperscriptFeatures){j(t,e.hyperscriptFeatures)}h(e.parentElement,t)}}function m(e,t,r,a){var n={meta:{parser:U,lexer:q,runtime:V,owner:e,feature:t,iterators:{}},me:r,event:a,target:a?a.target:null,detail:a?a.detail:null,body:"document"in B?document.body:null};n.meta.ctx=n;h(e,n);return n}function g(){return n().map(function(e){return"["+e+"]"}).join(", ")}function y(e,t){var r=Y.dynamicResolvers;for(var a=0;a<r.length;a++){var n=r[a];var i=n(t,e);if(i!==undefined){return i}}if(e==null){return null}var o=Y[t];if(o){return o(e)}throw"Unknown conversion : "+t}function x(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function b(e){var t=q.tokenize(e);if(U.commandStart(t.currentToken())){var r=U.parseElement("commandList",t);var a=r;while(a.next){a=a.next}a.next={op:function(){return u}};return r}else if(U.featureStart(t.currentToken())){var n=U.parseElement("hyperscript",t);return n}else{var i=U.parseElement("expression",t);return i}}function _(e,t){t=j(m(document.body,null,document.body,null),t||{});var r=b(e);if(r.execute){return r.execute(t)}else if(r.apply){r.apply(document.body,null)}else{return r.evaluate(t)}}function w(e){var t=V.getScriptSelector();if(r(e,t)){T(e,e)}if(e["type"]==="text/hyperscript"){T(e,document.body)}if(e.querySelectorAll){a(e.querySelectorAll(t+", [type='text/hyperscript']"),function(e){T(e,e.type==="text/hyperscript"?document.body:e)})}}function T(t,e){if(t.closest&&t.closest(_hyperscript.config.disableSelector)){return}var r=k(t);if(!r.initialized){var a=c(t);if(a){try{r.initialized=true;r.script=a;var n=q.tokenize(a);var i=U.parseHyperScript(n);i.apply(e||t,t);setTimeout(function(){o(e||t,"load",{hyperscript:true})},1)}catch(e){V.triggerEvent(t,"exception",{error:e});console.error("hyperscript errors were found on the following element:",t,"\n\n",e.message,e.stack)}}}}function k(e){var t="hyperscript-internal-data";var r=e[t];if(!r){r=e[t]={}}return r}function M(e,t,r){if(e==null&&r){return true}var a=Object.prototype.toString.call(e).slice(8,-1);return a===t}function A(e){var t=e.meta.owner;if(t){var r=k(t);var a="elementScope";if(e.meta.feature&&e.meta.feature.behavior){a=e.meta.feature.behavior+"Scope"}var n=H(r,a);return n}else{return{}}}function S(e,t,r){if(e==="me"||e==="my"||e==="I"){return t["me"]}if(e==="it"||e==="its"){return t["result"]}if(e==="you"||e==="your"||e==="yourself"){return t["beingTold"]}else{if(r==="global"){return B[e]}else if(r==="element"){var a=A(t);return a[e]}else if(r==="local"){return t[e]}else{if(t.meta&&t.meta.context){var n=t.meta.context[e];if(typeof n!=="undefined"){return n}}var i=t[e];if(typeof i!=="undefined"){return i}else{var a=A(t);i=a[e];if(typeof i!=="undefined"){return i}else{return B[e]}}}}}function E(e,t,r,a){if(r==="global"){B[e]=a}else if(r==="element"){var n=A(t);n[e]=a}else if(r==="local"){t[e]=a}else{var i=t[e];if(typeof i!=="undefined"){t[e]=a}else{var n=A(t);i=n[e];if(typeof i!=="undefined"){n[e]=a}else{i=B[e];if(typeof i!=="undefined"){B[e]=a}else{t[e]=a}}}}}function L(e,t){if(e){if(e.resolveNext){return e.resolveNext(t)}else if(e.next){return e.next}else{return L(e.parent,t)}}}function C(e,t,r){if(e!=null){var a=r&&e.getAttribute?e.getAttribute(t):e[t];if(typeof a!=="undefined"){return a}if(l(e)){var n=[];for(var i=0;i<e.length;i++){var o=e[i];var s=r?o.getAttribute(t):o[t];if(s){n.push(s)}}return n}}}function D(e,t,r,a){if(typeof document==="undefined"||e===document.body){var n=B}else{var n=e["hyperscriptFeatures"];if(n==null){n={};e["hyperscriptFeatures"]=n}}while(t.length>0){var i=t.shift();var o=n[i];if(o==null){o={};n[i]=o}n=o}n[r]=a}function O(e,t){var r=[];var a=e;while(a.meta.caller){a=a.meta.caller}if(a.meta.traceMap){return a.meta.traceMap.get(t,r)}}function I(e,t){var n=[];var r=null;while(e!=null){n.push(e);r=e;e=e.meta.caller}if(r.meta.traceMap==null){r.meta.traceMap=new Map}if(!r.meta.traceMap.get(t)){var a={trace:n,print:function(e){e=e||console.error;e("hypertrace /// ");var t=0;for(var r=0;r<n.length;r++){t=Math.max(t,n[r].meta.feature.displayName.length)}for(var r=0;r<n.length;r++){var a=n[r];e("  ->",a.meta.feature.displayName.padEnd(t+2),"-",a.meta.owner)}}};r.meta.traceMap.set(t,a)}}function P(e){return e.replace(/:/g,function(e){return"\\"+e})}function R(e,t){if(e==null){throw new Error(t.sourceFor()+" is null")}}function N(e){return e==undefined||e.length===0}function z(e){var t=e.getRootNode();if(!(e instanceof Document||e instanceof ShadowRoot))t=document;return t}var F="document"in B?document.currentScript.src:null;return{typeCheck:M,forEach:a,triggerEvent:o,matchesSelector:r,getScript:c,processNode:w,evaluate:_,parse:b,getScriptSelector:g,resolveSymbol:S,setSymbol:E,makeContext:m,findNext:L,unifiedEval:e,convertValue:y,unifiedExec:p,resolveProperty:C,assignToNamespace:D,registerHyperTrace:I,getHyperTrace:O,getInternalData:k,escapeSelector:P,nullCheck:R,isEmpty:N,getRootNode:z,hyperscriptUrl:F,HALT:u}}();{U.addLeafExpression("parenthesized",function(e,t,r){if(r.matchOpToken("(")){var a=r.clearFollow();try{var n=e.requireElement("expression",r)}finally{r.restoreFollow(a)}r.requireOpToken(")");return n}});U.addLeafExpression("string",function(e,t,r){var a=r.matchTokenType("STRING");if(!a)return;var n=a.value;if(a.template){var i=q.tokenize(n,true);var o=e.parseStringTemplate(i)}else{var o=[]}return{type:"string",token:a,args:o,op:function(e){var t="";for(var r=1;r<arguments.length;r++){var a=arguments[r];if(a!==undefined){t+=a}}return t},evaluate:function(e){if(o.length===0){return n}else{return t.unifiedEval(this,e)}}}});U.addGrammarElement("nakedString",function(e,t,r){if(r.hasMore()){var a=r.consumeUntilWhitespace();r.matchTokenType("WHITESPACE");return{type:"nakedString",tokens:a,evaluate:function(e){return a.map(function(e){return e.value}).join("")}}}});U.addLeafExpression("number",function(e,t,r){var a=r.matchTokenType("NUMBER");if(!a)return;var n=a;var i=parseFloat(a.value);return{type:"number",value:i,numberToken:n,evaluate:function(){return i}}});U.addLeafExpression("idRef",function(e,r,t){var a=t.matchTokenType("ID_REF");if(!a)return;if(a.template){var n=a.value.substr(2,a.value.length-2);var i=q.tokenize(n);var o=e.requireElement("expression",i);return{type:"idRefTemplate",args:[o],op:function(e,t){return r.getRootNode(e.me).getElementById(t)},evaluate:function(e){return r.unifiedEval(this,e)}}}else{return{type:"idRef",css:a.value,value:a.value.substr(1),evaluate:function(e){return r.getRootNode(e.me).getElementById(this.value)}}}});U.addLeafExpression("classRef",function(e,r,t){var a=t.matchTokenType("CLASS_REF");if(!a)return;if(a.template){var n=a.value.substr(2,a.value.length-2);var i=q.tokenize(n);var o=e.requireElement("expression",i);return{type:"classRefTemplate",args:[o],op:function(e,t){return r.getRootNode(e.me).querySelectorAll(r.escapeSelector("."+t))},evaluate:function(e){return r.unifiedEval(this,e)}}}else{return{type:"classRef",css:a.value,className:function(){return this.css.substr(1)},evaluate:function(e){return r.getRootNode(e.me).querySelectorAll(r.escapeSelector(this.css))}}}});U.addLeafExpression("queryRef",function(e,s,t){var r=t.matchOpToken("<");if(!r)return;var a=t.consumeUntil("/");t.requireOpToken("/");t.requireOpToken(">");var l=a.map(function(e){if(e.type==="STRING"){return'"'+e.value+'"'}else{return e.value}}).join("");if(l.indexOf("$")>=0){var u=true;var n=q.tokenize(l,true);var i=e.parseStringTemplate(n)}return{type:"queryRef",css:l,args:i,op:function(e,t){var r=l;var a=[];if(u){r="";for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i){if(i instanceof Element){i.dataset.hsQueryId=a.length;r+="[data-hs-query-id='"+a.length+"']";a.push(i)}else r+=i}}}var o=s.getRootNode(e.me).querySelectorAll(r);s.forEach(a,function(e){e.removeAttribute("data-hs-query-id")});return o},evaluate:function(e){return s.unifiedEval(this,e)}}});U.addLeafExpression("attributeRef",function(e,t,r){var a=r.matchTokenType("ATTRIBUTE_REF");if(!a)return;var n=a.value;if(n.indexOf("[")===0){var i=n.substring(2,n.length-1)}else{var i=n.substring(1)}var o="["+i+"]";var s=i.split("=");var l=s[0];var u=s[1];if(u){if(u.indexOf('"')===0){u=u.substring(1,u.length-1)}}return{type:"attributeRef",name:l,css:o,value:u,op:function(e){var t=e.beingTold||e.me;if(t){return t.getAttribute(l)}},evaluate:function(e){return t.unifiedEval(this,e)}}});U.addGrammarElement("objectKey",function(e,t,r){var a;if(a=r.matchTokenType("STRING")){return{type:"objectKey",key:a.value,evaluate:function(){return this.key}}}else if(r.matchOpToken("[")){var n=e.parseElement("expression",r);r.requireOpToken("]");return{type:"objectKey",expr:n,args:[n],op:function(e,t){return t},evaluate:function(e){return t.unifiedEval(this,e)}}}else{var i="";do{a=r.matchTokenType("IDENTIFIER")||r.matchOpToken("-");if(a)i+=a.value}while(a);return{type:"objectKey",key:i,evaluate:function(){return this.key}}}});U.addLeafExpression("objectLiteral",function(e,t,r){if(!r.matchOpToken("{"))return;var a=[];var n=[];if(!r.matchOpToken("}")){do{var i=e.requireElement("objectKey",r);r.requireOpToken(":");var o=e.requireElement("expression",r);n.push(o);a.push(i)}while(r.matchOpToken(","));r.requireOpToken("}")}return{type:"objectLiteral",args:[a,n],op:function(e,t,r){var a={};for(var n=0;n<t.length;n++){a[t[n]]=r[n]}return a},evaluate:function(e){return t.unifiedEval(this,e)}}});U.addGrammarElement("namedArgumentList",function(e,t,r){if(!r.matchOpToken("("))return;var i=[];var a=[];if(!r.matchOpToken(")")){do{var n=r.requireTokenType("IDENTIFIER");r.requireOpToken(":");var o=e.requireElement("expression",r);a.push(o);i.push({name:n,value:o})}while(r.matchOpToken(","));r.requireOpToken(")")}return{type:"namedArgumentList",fields:i,args:[a],op:function(e,t){var r={_namedArgList_:true};for(var a=0;a<t.length;a++){var n=i[a];r[n.name.value]=t[a]}return r},evaluate:function(e){return t.unifiedEval(this,e)}}});U.addGrammarElement("symbol",function(e,t,r){var a="default";if(r.matchToken("global")){a="global"}else if(r.matchToken("element")){a="element";if(r.matchOpToken("'")){r.requireToken("s")}}else if(r.matchToken("local")){a="local"}var n=r.matchTokenType("IDENTIFIER");if(n){return{type:"symbol",symbolType:a,token:n,name:n.value,evaluate:function(e){return t.resolveSymbol(n.value,e,a)}}}});U.addGrammarElement("implicitMeTarget",function(e,t,r){return{type:"implicitMeTarget",evaluate:function(e){return e.beingTold||e.me}}});U.addLeafExpression("boolean",function(e,t,r){var a=r.matchToken("true")||r.matchToken("false");if(!a)return;return{type:"boolean",evaluate:function(e){return a.value==="true"}}});U.addLeafExpression("null",function(e,t,r){if(r.matchToken("null")){return{type:"null",evaluate:function(e){return null}}}});U.addLeafExpression("arrayLiteral",function(e,t,r){if(!r.matchOpToken("["))return;var a=[];if(!r.matchOpToken("]")){do{var n=e.requireElement("expression",r);a.push(n)}while(r.matchOpToken(","));r.requireOpToken("]")}return{type:"arrayLiteral",values:a,args:[a],op:function(e,t){return t},evaluate:function(e){return t.unifiedEval(this,e)}}});U.addLeafExpression("blockLiteral",function(e,t,r){if(!r.matchOpToken("\\"))return;var a=[];var n=r.matchTokenType("IDENTIFIER");if(n){a.push(n);while(r.matchOpToken(",")){a.push(r.requireTokenType("IDENTIFIER"))}}r.requireOpToken("-");r.requireOpToken(">");var i=e.requireElement("expression",r);return{type:"blockLiteral",args:a,expr:i,evaluate:function(t){var e=function(){for(var e=0;e<a.length;e++){t[a[e].value]=arguments[e]}return i.evaluate(t)};return e}}});U.addGrammarElement("timeExpression",function(e,t,r){var a=e.requireElement("expression",r);var n=1;if(r.matchToken("s")||r.matchToken("seconds")){n=1e3}else if(r.matchToken("ms")||r.matchToken("milliseconds")){}return{type:"timeExpression",time:a,factor:n,args:[a],op:function(e,t){return t*this.factor},evaluate:function(e){return t.unifiedEval(this,e)}}});U.addIndirectExpression("propertyAccess",function(e,a,t,r){if(!t.matchOpToken("."))return;var n=t.requireTokenType("IDENTIFIER");var i={type:"propertyAccess",root:r,prop:n,args:[r],op:function(e,t){var r=a.resolveProperty(t,n.value);return r},evaluate:function(e){return a.unifiedEval(this,e)}};return e.parseElement("indirectExpression",t,i)});U.addIndirectExpression("of",function(e,r,t,a){if(!t.matchToken("of"))return;var n=e.requireElement("expression",t);var i=null;var o=a;while(o.root){i=o;o=o.root}if(o.type!=="symbol"&&o.type!=="attributeRef"){e.raiseParseError(t,"Cannot take a property of a non-symbol: "+o.type)}var s=o.type==="attributeRef";var l=o.name;var u={type:"ofExpression",prop:o.token,root:n,attribute:s,expression:a,args:[n],op:function(e,t){return r.resolveProperty(t,l,s)},evaluate:function(e){return r.unifiedEval(this,e)}};if(o.type==="attributeRef"){u.attribute=o}if(i){i.root=u;i.args=[u]}else{a=u}return e.parseElement("indirectExpression",t,a)});U.addIndirectExpression("possessive",function(e,a,t,r){if(e.possessivesDisabled){return}var n=t.matchOpToken("'");if(n||r.type==="symbol"&&(r.name==="my"||r.name==="its"||r.name==="your")&&t.currentToken().type==="IDENTIFIER"){if(n){t.requireToken("s")}var i=e.parseElement("attributeRef",t);if(i==null){var o=t.requireTokenType("IDENTIFIER")}var s={type:"possessive",root:r,attribute:i,prop:o,args:[r],op:function(e,t){if(i){var r=a.resolveProperty(t,i.name,true)}else{var r=a.resolveProperty(t,o.value,false)}return r},evaluate:function(e){return a.unifiedEval(this,e)}};return e.parseElement("indirectExpression",t,s)}});U.addIndirectExpression("inExpression",function(e,n,t,i){if(!t.matchToken("in"))return;if(i.type!=="idRef"&&i.type==="queryRef"||i.type==="classRef"){var o=true}var r=e.requireElement("expression",t);var a={type:"inExpression",root:i,args:[o?null:i,r],op:function(e,t,r){var a=[];if(o){n.forEach(r,function(e){var t=e.querySelectorAll(i.css);for(var r=0;r<t.length;r++){a.push(t[r])}})}else{n.forEach(t,function(t){n.forEach(r,function(e){if(t===e){a.push(t)}})})}if(a.length>0){return a}else{return null}},evaluate:function(e){return n.unifiedEval(this,e)}};return e.parseElement("indirectExpression",t,a)});U.addIndirectExpression("asExpression",function(e,r,t,a){if(!t.matchToken("as"))return;var n=e.requireElement("dotOrColonPath",t).evaluate();var i={type:"asExpression",root:a,args:[a],op:function(e,t){return r.convertValue(t,n)},evaluate:function(e){return r.unifiedEval(this,e)}};return e.parseElement("indirectExpression",t,i)});U.addIndirectExpression("functionCall",function(e,n,t,i){if(!t.matchOpToken("("))return;var r=[];if(!t.matchOpToken(")")){do{r.push(e.requireElement("expression",t))}while(t.matchOpToken(","));t.requireOpToken(")")}if(i.root){var a={type:"functionCall",root:i,argExressions:r,args:[i.root,r],op:function(e,t,r){n.nullCheck(t,i.root);var a=t[i.prop.value];n.nullCheck(a,i);if(a.hyperfunc){r.push(e)}return a.apply(t,r)},evaluate:function(e){return n.unifiedEval(this,e)}}}else{var a={type:"functionCall",root:i,argExressions:r,args:[i,r],op:function(e,t,r){n.nullCheck(t,i);if(t.hyperfunc){r.push(e)}var a=t.apply(null,r);return a},evaluate:function(e){return n.unifiedEval(this,e)}}}return e.parseElement("indirectExpression",t,a)});U.addIndirectExpression("attributeRefAccess",function(e,a,t,r){var n=e.parseElement("attributeRef",t);if(!n)return;var i={type:"attributeRefAccess",root:r,attribute:n,args:[r],op:function(e,t){var r=a.resolveProperty(t,n.name,true);return r},evaluate:function(e){return V.unifiedEval(this,e)}};return i});U.addIndirectExpression("arrayIndex",function(e,t,r,a){if(!r.matchOpToken("["))return;var n=false;var i=false;var o=null;var s=null;if(r.matchOpToken("..")){n=true;o=e.requireElement("expression",r)}else{o=e.requireElement("expression",r);if(r.matchOpToken("..")){i=true;var l=r.currentToken();if(l.type!=="R_BRACKET"){s=e.parseElement("expression",r)}}}r.requireOpToken("]");var u={type:"arrayIndex",root:a,firstIndex:o,secondIndex:s,args:[a,o,s],op:function(e,t,r,a){if(n){return t.slice(0,r+1)}else if(i){if(a!=null){return t.slice(r,a+1)}else{return t.slice(r)}}else{return t[r]}},evaluate:function(e){return V.unifiedEval(this,e)}};return U.parseElement("indirectExpression",r,u)});U.addGrammarElement("postfixExpression",function(e,a,t){var r=e.parseElement("primaryExpression",t);if(t.matchOpToken(":")){var n=t.requireTokenType("IDENTIFIER");var i=!t.matchOpToken("!");return{type:"typeCheck",typeName:n,root:r,nullOk:i,args:[r],op:function(e,t){var r=a.typeCheck(t,this.typeName.value,this.nullOk);if(r){return t}else{throw new Error("Typecheck failed!  Expected: "+this.typeName.value)}},evaluate:function(e){return a.unifiedEval(this,e)}}}else{return r}});U.addGrammarElement("logicalNot",function(e,t,r){if(!r.matchToken("not"))return;var a=e.requireElement("unaryExpression",r);return{type:"logicalNot",root:a,args:[a],op:function(e,t){return!t},evaluate:function(e){return t.unifiedEval(this,e)}}});U.addGrammarElement("noExpression",function(e,r,t){if(!t.matchToken("no"))return;var a=e.requireElement("unaryExpression",t);return{type:"noExpression",root:a,args:[a],op:function(e,t){return r.isEmpty(t)},evaluate:function(e){return r.unifiedEval(this,e)}}});U.addGrammarElement("negativeNumber",function(e,t,r){if(!r.matchOpToken("-"))return;var a=e.requireElement("unaryExpression",r);return{type:"negativeNumber",root:a,args:[a],op:function(e,t){return-1*t},evaluate:function(e){return t.unifiedEval(this,e)}}});U.addGrammarElement("unaryExpression",function(e,t,r){return e.parseAnyOf(["logicalNot","relativePositionalExpression","positionalExpression","noExpression","negativeNumber","postfixExpression"],r)});U.addGrammarElement("relativePositionalExpression",function(e,t,r){var a=r.matchAnyToken("next","previous");if(!a)return;if(a.value==="next"){var s="nextElementSibling"}else{var s="previousElementSibling"}var n=e.parseElement("expression",r);var i=n.css;if(i==null){e.raiseParseError(r,"Expected a CSS expression")}if(r.matchToken("from")){var o=e.requireElement("expression",r)}else{var o=e.requireElement("implicitMeTarget",r)}if(r.matchToken("within")){var l=e.requireElement("expression",r)}else{var l=document.body}return{type:"relativePositionalExpression",from:o,inElt:l,operator:a.value,propName:s,args:[i,o,l],op:function(e,t,r,a){var n=r;while(n&&n!==a){var i=n[s];while(i){if(i.matches(t)){return i}else{var o=i.querySelector(t);if(o){return o}}i=i[s]}n=n.parentElement}},evaluate:function(e){return t.unifiedEval(this,e)}}});U.addGrammarElement("positionalExpression",function(e,t,r){var a=r.matchAnyToken("first","last","random");if(!a)return;r.matchAnyToken("in","from","of");var n=e.requireElement("unaryExpression",r);return{type:"positionalExpression",rhs:n,operator:a.value,args:[n],op:function(e,t){if(t&&!Array.isArray(t)){if(t.children){t=t.children}else{t=Array.from(t)}}if(t){if(this.operator==="first"){return t[0]}else if(this.operator==="last"){return t[t.length-1]}else if(this.operator==="random"){return t[Math.floor(Math.random()*t.length)]}}},evaluate:function(e){return t.unifiedEval(this,e)}}});U.addGrammarElement("mathOperator",function(e,t,r){var a=e.parseElement("unaryExpression",r);var n,i=null;n=r.matchAnyOpToken("+","-","*","/","%");while(n){i=i||n;var o=n.value;if(i.value!==o){e.raiseParseError(r,"You must parenthesize math operations with different operators")}var s=e.parseElement("unaryExpression",r);a={type:"mathOperator",lhs:a,rhs:s,operator:o,args:[a,s],op:function(e,t,r){if(this.operator==="+"){return t+r}else if(this.operator==="-"){return t-r}else if(this.operator==="*"){return t*r}else if(this.operator==="/"){return t/r}else if(this.operator==="%"){return t%r}},evaluate:function(e){return t.unifiedEval(this,e)}};n=r.matchAnyOpToken("+","-","*","/","%")}return a});U.addGrammarElement("mathExpression",function(e,t,r){return e.parseAnyOf(["mathOperator","unaryExpression"],r)});U.addGrammarElement("comparisonOperator",function(e,a,t){var r=e.parseElement("mathExpression",t);var n=t.matchAnyOpToken("<",">","<=",">=","==","===","!=","!==");var i=n?n.value:null;var o=true;var s=false;if(i==null){if(t.matchToken("is")||t.matchToken("am")){if(t.matchToken("not")){if(t.matchToken("in")){i="not in"}else if(t.matchToken("a")){i="not a";s=true}else if(t.matchToken("empty")){i="not empty";o=false}else{i="!="}}else if(t.matchToken("in")){i="in"}else if(t.matchToken("a")){i="a";s=true}else if(t.matchToken("empty")){i="empty";o=false}else{i="=="}}else if(t.matchToken("matches")||t.matchToken("match")){i="match"}else if(t.matchToken("contains")||t.matchToken("contain")){i="contain"}else if(t.matchToken("do")||t.matchToken("does")){t.requireToken("not");if(t.matchToken("matches")||t.matchToken("match")){i="not match"}else if(t.matchToken("contains")||t.matchToken("contain")){i="not contain"}else{e.raiseParseError(t,"Expected matches or contains")}}}if(i){if(s){var l=t.requireTokenType("IDENTIFIER");var u=!t.matchOpToken("!")}else if(o){var c=e.requireElement("mathExpression",t);if(i==="match"||i==="not match"){c=c.css?c.css:c}}r={type:"comparisonOperator",operator:i,typeName:l,nullOk:u,lhs:r,rhs:c,args:[r,c],op:function(e,t,r){if(this.operator==="=="){return t==r}else if(this.operator==="!="){return t!=r}if(this.operator==="in"){return r!=null&&Array.from(r).indexOf(t)>=0}if(this.operator==="not in"){return r==null||Array.from(r).indexOf(t)<0}if(this.operator==="match"){return t!=null&&t.matches(r)}if(this.operator==="not match"){return t==null||!t.matches(r)}if(this.operator==="contain"){return t!=null&&t.contains(r)}if(this.operator==="not contain"){return t==null||!t.contains(r)}if(this.operator==="==="){return t===r}else if(this.operator==="!=="){return t!==r}else if(this.operator==="<"){return t<r}else if(this.operator===">"){return t>r}else if(this.operator==="<="){return t<=r}else if(this.operator===">="){return t>=r}else if(this.operator==="empty"){return a.isEmpty(t)}else if(this.operator==="not empty"){return!a.isEmpty(t)}else if(this.operator==="a"){return a.typeCheck(t,this.typeName.value,this.nullOk)}else if(this.operator==="not a"){return!a.typeCheck(t,this.typeName.value,this.nullOk)}else{throw"Unknown comparison : "+this.operator}},evaluate:function(e){return a.unifiedEval(this,e)}}}return r});U.addGrammarElement("comparisonExpression",function(e,t,r){return e.parseAnyOf(["comparisonOperator","mathExpression"],r)});U.addGrammarElement("logicalOperator",function(e,t,r){var a=e.parseElement("comparisonExpression",r);var n,i=null;n=r.matchToken("and")||r.matchToken("or");while(n){i=i||n;if(i.value!==n.value){e.raiseParseError(r,"You must parenthesize logical operations with different operators")}var o=e.requireElement("comparisonExpression",r);a={type:"logicalOperator",operator:n.value,lhs:a,rhs:o,args:[a,o],op:function(e,t,r){if(this.operator==="and"){return t&&r}else{return t||r}},evaluate:function(e){return t.unifiedEval(this,e)}};n=r.matchToken("and")||r.matchToken("or")}return a});U.addGrammarElement("logicalExpression",function(e,t,r){return e.parseAnyOf(["logicalOperator","mathExpression"],r)});U.addGrammarElement("asyncExpression",function(e,t,r){if(r.matchToken("async")){var a=e.requireElement("logicalExpression",r);var n={type:"asyncExpression",value:a,evaluate:function(e){return{asyncWrapper:true,value:this.value.evaluate(e)}}};return n}else{return e.parseElement("logicalExpression",r)}});U.addGrammarElement("expression",function(e,t,r){r.matchToken("the");return e.parseElement("asyncExpression",r)});U.addGrammarElement("assignableExpression",function(e,t,r){r.matchToken("the");var a=e.parseElement("primaryExpression",r);if(a.type==="symbol"||a.type==="ofExpression"||a.type==="propertyAccess"||a.type==="attributeRefAccess"||a.type==="attributeRef"||a.type==="possessive"){return a}else{U.raiseParseError(r,"A target expression must be writable.  The expression type '"+a.type+"' is not.")}return a});U.addGrammarElement("hyperscript",function(e,t,r){var n=[];if(r.hasMore()){while(e.featureStart(r.currentToken())||r.currentToken().value==="("){var a=e.requireElement("feature",r);n.push(a);r.matchToken("end")}}return{type:"hyperscript",features:n,apply:function(t,r,a){V.forEach(n,function(e){e.install(t,r,a)})}}});var I=function(e){var t=[];if(e.token(0).value==="("&&(e.token(1).value===")"||e.token(2).value===","||e.token(2).value===")")){e.matchOpToken("(");do{t.push(e.requireTokenType("IDENTIFIER"))}while(e.matchOpToken(","));e.requireOpToken(")")}return t};U.addFeature("on",function(e,c,t){if(!t.matchToken("on"))return;var r=false;if(t.matchToken("every")){r=true}var a=[];var n=null;do{var i=e.requireElement("eventName",t,"Expected event name");var o=i.evaluate();if(n){n=n+" or "+o}else{n="on "+o}var s=I(t);var l=null;if(t.matchOpToken("[")){l=e.requireElement("expression",t);t.requireOpToken("]")}if(t.currentToken().type==="NUMBER"){var u=t.consumeToken();var f=parseInt(u.value);if(t.matchToken("to")){var d=t.consumeToken();var v=parseInt(d.value)}else if(t.matchToken("and")){var p=true;t.requireToken("on")}}if(o==="intersection"){var h={};if(t.matchToken("with")){h["with"]=e.parseElement("expression",t).evaluate()}if(t.matchToken("having")){do{if(t.matchToken("margin")){h["rootMargin"]=e.parseElement("stringLike",t).evaluate()}else if(t.matchToken("threshold")){h["threshold"]=e.parseElement("expression",t).evaluate()}else{e.raiseParseError(t,"Unknown intersection config specification")}}while(t.matchToken("and"))}}else if(o==="mutation"){var m={};if(t.matchToken("of")){do{if(t.matchToken("anything")){m["attributes"]=true;m["subtree"]=true;m["characterData"]=true;m["childList"]=true}else if(t.matchToken("childList")){m["childList"]=true}else if(t.matchToken("attributes")){m["attributes"]=true;m["attributeOldValue"]=true}else if(t.matchToken("subtree")){m["subtree"]=true}else if(t.matchToken("characterData")){m["characterData"]=true;m["characterDataOldValue"]=true}else if(t.currentToken().type==="ATTRIBUTE_REF"){var g=t.consumeToken();if(m["attributeFilter"]==null){m["attributeFilter"]=[]}if(g.value.indexOf("@")==0){m["attributeFilter"].push(g.value.substring(1))}else{e.raiseParseError(t,"Only shorthand attribute references are allowed here")}}else{e.raiseParseError(t,"Unknown mutation config specification")}}while(t.matchToken("or"))}else{m["attributes"]=true;m["characterData"]=true;m["childList"]=true}}var y=null;var x=false;if(t.matchToken("from")){if(t.matchToken("elsewhere")){x=true}else{y=e.parseElement("expression",t);if(!y){e.raiseParseError('Expected either target value or "elsewhere".',t)}}}if(y===null&&x===false&&t.matchToken("elsewhere")){x=true}if(t.matchToken("in")){var b=e.parseAnyOf(["idRef","queryRef","classRef"],t)}if(t.matchToken("debounced")){t.requireToken("at");var _=e.requireElement("timeExpression",t);var w=_.evaluate({})}else if(t.matchToken("throttled")){t.requireToken("at");var _=e.requireElement("timeExpression",t);var T=_.evaluate({})}a.push({execCount:0,every:r,on:o,args:s,filter:l,from:y,inExpr:b,elsewhere:x,startCount:f,endCount:v,unbounded:p,debounceTime:w,throttleTime:T,mutationSpec:m,intersectionSpec:h})}while(t.matchToken("or"));var k=[];var M=true;if(!r){if(t.matchToken("queue")){if(t.matchToken("all")){var A=true;var M=false}else if(t.matchToken("first")){var S=true}else if(t.matchToken("none")){var E=true}else{t.requireToken("last")}}}var L=e.requireElement("commandList",t);var C={type:"implicitReturn",op:function(e){e.meta.resolve();return c.HALT},execute:function(e){}};if(L){var D=L;while(D.next){D=D.next}D.next=C}else{L=C}var O={displayName:n,events:a,start:L,every:r,executing:false,execCount:0,queue:k,execute:function(a){if(this.executing&&this.every===false){if(E||S&&k.length>0){return}if(M){O.queue.length=0}O.queue.push(a);return}this.execCount++;this.executing=true;a.meta.resolve=function(){O.executing=false;var e=O.queue.shift();if(e){setTimeout(function(){O.execute(e)},1)}};a.meta.reject=function(e){console.error(e.message?e.message:e);var t=c.getHyperTrace(a,e);if(t){t.print()}c.triggerEvent(a.me,"exception",{error:e});O.executing=false;var r=O.queue.shift();if(r){setTimeout(function(){O.execute(r)},1)}};L.execute(a)},install:function(u,e){c.forEach(O.events,function(l){var e;if(l.elsewhere){e=[document]}else if(l.from){e=l.from.evaluate({me:u})}else{e=[u]}c.forEach(e,function(o){var s=l.on;if(l.mutationSpec){s="hyperscript:mutation";var r=new MutationObserver(function(e,t){console.log(o,e);if(!O.executing){V.triggerEvent(o,s,{mutationList:e,observer:t})}});r.observe(o,l.mutationSpec)}if(l.intersectionSpec){s="hyperscript:insersection";var r=new IntersectionObserver(function(e){V.forEach(e,function(e){var t={observer:r};t=j(t,e);t["intersecting"]=e.isIntersecting;V.triggerEvent(o,s,t)})},l.intersectionSpec);r.observe(o)}o.addEventListener(s,function e(t){if(u instanceof Node&&o!==u&&!u.isConnected){o.removeEventListener(s,e);return}var r=c.makeContext(u,O,u,t);if(l.elsewhere&&u.contains(t.target)){return}if(l.from){r.result=o}c.forEach(l.args,function(e){r[e.value]=r.event[e.value]||(r.event.detail?r.event.detail[e.value]:null)});if(l.filter){var a=r.meta.context;r.meta.context=r.event;try{var n=l.filter.evaluate(r);if(n){}else{return}}finally{r.meta.context=a}}if(l.inExpr){var i=t.target;while(true){if(i.matches&&i.matches(l.inExpr.css)){r.result=i;break}else{i=i.parentElement;if(i==null){return}}}}l.execCount++;if(l.startCount){if(l.endCount){if(l.execCount<l.startCount||l.execCount>l.endCount){return}}else if(l.unbounded){if(l.execCount<l.startCount){return}}else if(l.execCount!==l.startCount){return}}if(l.debounceTime){if(l.debounced){clearTimeout(l.debounced)}l.debounced=setTimeout(function(){O.execute(r)},l.debounceTime);return}if(l.throttleTime){if(l.lastExec&&Date.now()<l.lastExec+l.throttleTime){return}else{l.lastExec=Date.now()}}O.execute(r)})})})}};e.setParent(L,O);return O});U.addFeature("def",function(e,u,t){if(!t.matchToken("def"))return;var r=e.requireElement("dotOrColonPath",t);var a=r.evaluate();var n=a.split(".");var i=n.pop();var c=[];if(t.matchOpToken("(")){if(t.matchOpToken(")")){}else{do{c.push(t.requireTokenType("IDENTIFIER"))}while(t.matchOpToken(","));t.requireOpToken(")")}}var f=e.parseElement("commandList",t);if(t.matchToken("catch")){var d=t.requireTokenType("IDENTIFIER").value;var v=e.parseElement("commandList",t)}var p={displayName:i+"("+c.map(function(e){return e.value}).join(", ")+")",name:i,args:c,start:f,errorHandler:v,errorSymbol:d,install:function(s,l){var e=function(){var e=u.makeContext(l,p,s,null);e.meta.errorHandler=v;e.meta.errorSymmbol=d;for(var t=0;t<c.length;t++){var r=c[t];var a=arguments[t];if(r){e[r.value]=a}}e.meta.caller=arguments[c.length];if(e.meta.caller){e.meta.callingCommand=e.meta.caller.meta.command}var n,i=null;var o=new Promise(function(e,t){n=e;i=t});f.execute(e);if(e.meta.returned){return e.meta.returnValue}else{e.meta.resolve=n;e.meta.reject=i;return o}};e.hyperfunc=true;e.hypername=a;u.assignToNamespace(s,n,i,e)}};var o={type:"implicitReturn",op:function(e){e.meta.returned=true;if(e.meta.resolve){e.meta.resolve()}return u.HALT},execute:function(e){}};if(f){var s=f;while(s.next){s=s.next}s.next=o}else{p.start=o}if(v){var s=v;while(s.next){s=s.next}s.next=o}e.setParent(f,p);return p});U.addFeature("init",function(e,r,t){if(!t.matchToken("init"))return;var a=e.parseElement("commandList",t);var n={start:a,install:function(e,t){setTimeout(function(){a.execute(r.makeContext(e,this,e,null))},0)}};var i={type:"implicitReturn",op:function(e){return r.HALT},execute:function(e){}};if(a){var o=a;while(o.next){o=o.next}o.next=i}else{n.start=i}e.setParent(a,n);return n});U.addFeature("worker",function(e,t,r){if(r.matchToken("worker")){e.raiseParseError(r,"In order to use the 'worker' feature, include "+"the _hyperscript worker plugin. See "+"https://hyperscript.org/features/worker/ for "+"more info.")}});U.addFeature("behavior",function(e,o,t){if(!t.matchToken("behavior"))return;var s=e.parseElement("dotOrColonPath",t).evaluate();var r=s.split(".");var a=r.pop();var l=[];if(t.matchOpToken("(")&&!t.matchOpToken(")")){do{l.push(t.requireTokenType("IDENTIFIER").value)}while(t.matchOpToken(","));t.requireOpToken(")")}var u=e.parseElement("hyperscript",t);for(var n=0;n<u.features.length;n++){var i=u.features[n];i.behavior=s}return{install:function(e,t){o.assignToNamespace(B.document&&B.document.body,r,a,function(e,t,r){var a=o.getInternalData(e);var n=H(a,s+"Scope");for(var i=0;i<l.length;i++){n[l[i]]=r[l[i]]}u.apply(e,t)})}}});U.addFeature("install",function(e,t,r){if(!r.matchToken("install"))return;var o=e.requireElement("dotOrColonPath",r).evaluate();var s=o.split(".");var a=e.parseElement("namedArgumentList",r);var l;return l={install:function(n,i){t.unifiedEval({args:[a],op:function(e,t){var r=B;for(var a=0;a<s.length;a++){r=r[s[a]];if(typeof r!=="object"&&typeof r!=="function")throw new Error("No such behavior defined as "+o)}if(!(r instanceof Function))throw new Error(o+" is not a behavior");r(n,i,t)}},t.makeContext(n,l,n))}}});U.addGrammarElement("jsBody",function(e,t,r){var a=r.currentToken().start;var n=r.currentToken();var i=[];var o="";var s=false;while(r.hasMore()){n=r.consumeToken();var l=r.currentToken(true);if(l.type==="IDENTIFIER"&&l.value==="end"){break}if(s){if(n.type==="IDENTIFIER"||n.type==="NUMBER"){o+=n.value}else{if(o!=="")i.push(o);o="";s=false}}else if(n.type==="IDENTIFIER"&&n.value==="function"){s=true}}var u=n.end+1;return{type:"jsBody",exposedFunctionNames:i,jsSource:r.source.substring(a,u)}});U.addFeature("js",function(e,t,r){if(!r.matchToken("js"))return;var a=e.parseElement("jsBody",r);var n=a.jsSource+"\nreturn { "+a.exposedFunctionNames.map(function(e){return e+":"+e}).join(",")+" } ";var i=new Function(n);return{jsSource:n,function:i,exposedFunctionNames:a.exposedFunctionNames,install:function(){j(B,i())}}});U.addCommand("js",function(e,a,t){if(!t.matchToken("js"))return;var n=[];if(t.matchOpToken("(")){if(t.matchOpToken(")")){}else{do{var r=t.requireTokenType("IDENTIFIER");n.push(r.value)}while(t.matchOpToken(","));t.requireOpToken(")")}}var i=e.parseElement("jsBody",t);t.matchToken("end");var o=s(Function,n.concat([i.jsSource]));return{jsSource:i.jsSource,function:o,inputs:n,op:function(r){var t=[];n.forEach(function(e){t.push(a.resolveSymbol(e,r))});var e=o.apply(B,t);if(e&&typeof e.then==="function"){return Promise(function(t){e.then(function(e){r.result=e;t(a.findNext(this,r))})})}else{r.result=e;return a.findNext(this,r)}}}});U.addCommand("async",function(e,t,r){if(!r.matchToken("async"))return;if(r.matchToken("do")){var a=e.requireElement("commandList",r);r.requireToken("end")}else{var a=e.requireElement("command",r)}return{body:a,op:function(e){setTimeout(function(){a.execute(e)});return t.findNext(this,e)}}});U.addCommand("tell",function(e,r,t){var a=t.currentToken();if(!t.matchToken("tell"))return;var n=e.requireElement("expression",t);var i=e.requireElement("commandList",t);if(t.hasMore()){t.requireToken("end")}var o="tell_"+a.start;var s={value:n,body:i,args:[n],resolveNext:function(e){var t=e.meta.iterators[o];if(t.index<t.value.length){e.beingTold=t.value[t.index++];return i}else{e.beingTold=t.originalBeingTold;if(this.next){return this.next}else{return r.findNext(this.parent,e)}}},op:function(e,t){if(t==null){t=[]}else if(!(Array.isArray(t)||t instanceof NodeList)){t=[t]}e.meta.iterators[o]={originalBeingTold:e.beingTold,index:0,value:t};return this.resolveNext(e)}};e.setParent(i,s);return s});U.addCommand("wait",function(e,o,t){if(!t.matchToken("wait"))return;if(t.matchToken("for")){t.matchToken("a");var s=[];do{s.push({name:U.requireElement("dotOrColonPath",t,"Expected event name").evaluate(),args:I(t)})}while(t.matchToken("or"));if(t.matchToken("from")){var r=e.requireElement("expression",t)}var l={event:s,on:r,args:[r],op:function(n,e){var i=e?e:n.me;if(!(i instanceof EventTarget))throw new Error("Not a valid event target: "+this.on.sourceFor());return new Promise(function(r){var a=false;o.forEach(s,function(e){var t=function(t){n.result=t;o.forEach(e.args,function(e){n[e.value]=t[e.value]||(t.detail?t.detail[e.value]:null)});if(!a){a=true;r(o.findNext(l,n))}};i.addEventListener(e.name,t,{once:true})})})}}}else{if(t.matchToken("a")){t.requireToken("tick");a=0}else{var a=U.requireElement("timeExpression",t)}var l={type:"waitCmd",time:a,args:[a],op:function(t,r){return new Promise(function(e){setTimeout(function(){e(o.findNext(l,t))},r)})},execute:function(e){return o.unifiedExec(this,e)}}}return l});U.addGrammarElement("dotOrColonPath",function(e,t,r){var a=r.matchTokenType("IDENTIFIER");if(a){var n=[a.value];var i=r.matchOpToken(".")||r.matchOpToken(":");if(i){do{n.push(r.requireTokenType("IDENTIFIER").value)}while(r.matchOpToken(i.value))}return{type:"dotOrColonPath",path:n,evaluate:function(){return n.join(i?i.value:"")}}}});U.addGrammarElement("eventName",function(e,t,r){var a;if(a=r.matchTokenType("STRING")){return{evaluate:function(){return a.value}}}return e.parseElement("dotOrColonPath",r)});U.addCommand("send",function(e,n,t){if(!t.matchToken("send"))return;var r=e.requireElement("eventName",t);var a=e.parseElement("namedArgumentList",t);if(t.matchToken("to")){var i=e.requireElement("expression",t)}else{var i=e.requireElement("implicitMeTarget",t)}var o={eventName:r,details:a,to:i,args:[i,r,a],op:function(e,t,r,a){n.forEach(t,function(e){n.triggerEvent(e,r,a?a:{})});return n.findNext(o,e)}};return o});var l=function(e,a,t,r){if(r){var n=e.requireElement("expression",t)}var i={value:n,args:[n],op:function(e,t){var r=e.meta.resolve;e.meta.returned=true;if(r){if(t){r(t)}else{r()}}else{e.meta.returned=true;e.meta.returnValue=t}return a.HALT}};return i};U.addCommand("return",function(e,t,r){if(r.matchToken("return")){return l(e,t,r,true)}});U.addCommand("exit",function(e,t,r){if(r.matchToken("exit")){return l(e,t,r,false)}});U.addCommand("halt",function(e,t,r){if(r.matchToken("halt")){if(r.matchToken("the")){r.requireToken("event");if(r.matchOpToken("'")){r.requireToken("s")}var a=true}if(r.matchToken("bubbling")){var n=true}else if(r.matchToken("default")){var i=true}var o=l(e,t,r,false);var s={keepExecuting:true,bubbling:n,haltDefault:i,exit:o,op:function(e){if(e.event){if(n){e.event.stopPropagation()}else if(i){e.event.preventDefault()}else{e.event.stopPropagation();e.event.preventDefault()}if(a){return t.findNext(this,e)}else{return o}}}};return s}});U.addCommand("log",function(e,a,t){if(!t.matchToken("log"))return;var r=[e.parseElement("expression",t)];while(t.matchOpToken(",")){r.push(e.requireElement("expression",t))}if(t.matchToken("with")){var n=e.requireElement("expression",t)}var i={exprs:r,withExpr:n,args:[n,r],op:function(e,t,r){if(t){t.apply(null,r)}else{console.log.apply(null,r)}return a.findNext(this,e)}};return i});U.addCommand("throw",function(e,a,t){if(!t.matchToken("throw"))return;var r=e.requireElement("expression",t);var n={expr:r,args:[r],op:function(e,t){a.registerHyperTrace(e,t);var r=e.meta&&e.meta.reject;if(r){r(t);return a.HALT}else{throw t}}};return n});var n=function(e,r,t){var a=e.requireElement("expression",t);var n={expr:a,args:[a],op:function(e,t){e.result=t;return r.findNext(n,e)}};return n};U.addCommand("call",function(e,t,r){if(!r.matchToken("call"))return;var a=n(e,t,r);if(a.expr&&a.expr.type!=="functionCall"){e.raiseParseError(r,"Must be a function invocation")}return a});U.addCommand("get",function(e,t,r){if(r.matchToken("get")){return n(e,t,r)}});U.addCommand("make",function(e,u,t){if(!t.matchToken("make"))return;t.matchToken("a")||t.matchToken("an");var c=e.requireElement("expression",t);var r=[];if(c.type!=="queryRef"&&t.matchToken("from")){do{r.push(e.requireElement("expression",t))}while(t.matchOpToken(","))}if(t.matchToken("called")){var f=t.requireTokenType("IDENTIFIER").value}if(c.type==="queryRef")return{op:function(e){var t,r="div",a,n=[];var i=/(?:(^|#|\.)([^#\. ]+))/g;while(t=i.exec(c.css)){if(t[1]==="")r=t[2].trim();else if(t[1]==="#")a=t[2].trim();else n.push(t[2].trim())}var o=document.createElement(r);if(a!==undefined)o.id=a;for(var s=0;s<n.length;s++){var l=n[s];o.classList.add(l)}e.result=o;if(f)e[f]=o;return u.findNext(this,e)}};else return{args:[c,r],op:function(e,t,r){e.result=s(t,r);if(f)e[f]=e.result;return u.findNext(this,e)}}});U.addGrammarElement("pseudoCommand",function(e,i,t){var r=e.requireElement("primaryExpression",t);if(r.type!=="functionCall"&&r.root.type!=="symbol"){e.raiseParseError("Implicit function calls must start with a simple function",t)}if(!t.matchAnyToken("to","on","with")&&e.commandBoundary(t.currentToken())){var a=e.requireElement("implicitMeTarget",t)}else{var a=e.requireElement("expression",t)}var o=r.root.name;var n=r.argExressions;var s={type:"pseudoCommand",expr:r,args:[a,n],op:function(e,t,r){var a=t[o];if(a.hyperfunc){r.push(e)}var n=a.apply(t,r);e.result=n;return i.findNext(s,e)},execute:function(e){return i.unifiedExec(this,e)}};return s});var u=function(e,a,t,n,r){var i=n.type==="symbol";var o=n.type==="attributeRef";if(!o&&!i&&n.root==null){e.raiseParseError(t,"Can only put directly into symbols, not references")}var s=null;var l=null;if(i){}else if(o){s=e.requireElement("implicitMeTarget",t);var u=n}else{l=n.prop?n.prop.value:null;var u=n.attribute;s=n.root}var c={target:n,symbolWrite:i,value:r,args:[s,r],op:function(e,t,r){if(i){a.setSymbol(n.name,e,n.symbolType,r)}else{a.forEach(t,function(e){if(u){if(r==null){e.removeAttribute(u.name)}else{e.setAttribute(u.name,r)}}else{e[l]=r}})}return a.findNext(this,e)}};return c};U.addCommand("default",function(e,r,t){if(!t.matchToken("default"))return;var a=e.requireElement("assignableExpression",t);t.requireToken("to");var n=e.requireElement("expression",t);var i=u(e,r,t,a,n);var o={target:a,value:n,setter:i,args:[a],op:function(e,t){if(t){return r.findNext(this,e)}else{return i}}};i.parent=o;return o});U.addCommand("set",function(e,a,t){if(!t.matchToken("set"))return;if(t.currentToken().type==="L_BRACE"){var r=e.requireElement("objectLiteral",t);t.requireToken("on");var n=e.requireElement("expression",t);return{objectLiteral:r,target:n,args:[r,n],op:function(e,t,r){j(r,t);return a.findNext(this,e)}}}try{t.pushFollow("to");var n=e.requireElement("assignableExpression",t)}finally{t.popFollow()}t.requireToken("to");var i=e.requireElement("expression",t);return u(e,a,t,n,i)});U.addCommand("if",function(e,r,t){if(!t.matchToken("if"))return;var a=e.requireElement("expression",t);t.matchToken("then");var n=e.parseElement("commandList",t);if(t.matchToken("else")){var i=e.parseElement("commandList",t)}if(t.hasMore()){t.requireToken("end")}var o={expr:a,trueBranch:n,falseBranch:i,args:[a],op:function(e,t){if(t){return n}else if(i){return i}else{return r.findNext(this,e)}}};e.setParent(n,o);e.setParent(i,o);return o});var a=function(e,t,n,r){var a=t.currentToken();if(t.matchToken("for")||r){var i=t.requireTokenType("IDENTIFIER");var o=i.value;t.requireToken("in");var s=e.requireElement("expression",t)}else if(t.matchToken("in")){var o="it";var s=e.requireElement("expression",t)}else if(t.matchToken("while")){var l=e.requireElement("expression",t)}else if(t.matchToken("until")){var u=true;if(t.matchToken("event")){var c=U.requireElement("dotOrColonPath",t,"Expected event name");if(t.matchToken("from")){var f=e.requireElement("expression",t)}}else{var l=e.requireElement("expression",t)}}else if(t.matchTokenType("NUMBER")){var d=parseFloat(a.value);t.requireToken("times")}else{t.matchToken("forever");var v=true}if(t.matchToken("index")){var i=t.requireTokenType("IDENTIFIER");var p=i.value}var h=e.parseElement("commandList",t);if(h&&c){var m=h;while(m.next){m=m.next}var g={type:"waitATick",op:function(){return new Promise(function(e){setTimeout(function(){e(n.findNext(g))},0)})}};m.next=g}if(t.hasMore()){t.requireToken("end")}if(o==null){o="_implicit_repeat_"+a.start;var y=o}else{var y=o+"_"+a.start}var x={identifier:o,indexIdentifier:p,slot:y,expression:s,forever:v,times:d,until:u,event:c,on:f,whileExpr:l,resolveNext:function(){return this},loop:h,args:[l],op:function(e,t){var r=e.meta.iterators[y];var a=false;if(this.forever){a=true}else if(this.until){if(c){a=e.meta.iterators[y].eventFired===false}else{a=t!==true}}else if(t){a=true}else if(d){a=r.index<this.times}else{a=r.value!==null&&r.index<r.value.length}if(a){if(r.value){e[o]=r.value[r.index];e.result=r.value[r.index]}else{e.result=r.index}if(p){e[p]=r.index}r.index++;return h}else{e.meta.iterators[y]=null;return n.findNext(this.parent,e)}}};e.setParent(h,x);var b={name:"repeatInit",args:[s,c,f],op:function(t,e,r,a){t.meta.iterators[y]={index:0,value:e,eventFired:false};if(c){var n=a||t.me;n.addEventListener(r,function(e){t.meta.iterators[y].eventFired=true},{once:true})}return x},execute:function(e){return n.unifiedExec(this,e)}};e.setParent(x,b);return b};U.addCommand("repeat",function(e,t,r){if(r.matchToken("repeat")){return a(e,r,t,false)}});U.addCommand("for",function(e,t,r){if(r.matchToken("for")){return a(e,r,t,true)}});U.addGrammarElement("stringLike",function(e,t,r){return U.parseAnyOf(["string","nakedString"],r)});U.addCommand("append",function(e,r,t){if(!t.matchToken("append"))return;var a=null;var n=null;var i=e.requireElement("expression",t);if(t.matchToken("to")){a=e.requireElement("expression",t)}if(a==null){n="result"}else if(a.type==="symbol"){n=a.name}else if(a.type==="propertyAccess"){n=a.prop.value}else{throw"Unable to append to "+a.type}return{value:i,target:a,args:[i],op:function(e,t){if(Array.isArray(e[n])){e[n].push(t)}else if(e[n]instanceof Element){if(typeof t=="string"){e[n].innerHTML+=t}else{throw"Don't know how to append non-strings to an HTML Element yet."}}else{e[n]+=t}return r.findNext(this,e)},execute:function(e){return r.unifiedExec(this,e,i,a)}}});U.addCommand("increment",function(i,o,s){if(!s.matchToken("increment"))return;var t;var l=i.parseElement("assignableExpression",s);if(s.matchToken("by")){t=i.requireElement("expression",s)}return{target:l,args:[l,t],op:function(e,t,r){t=t?parseFloat(t):0;r=r?parseFloat(r):1;var a=t+r;var n=u(i,o,s,l,a);e.result=a;n.parent=this;return n},execute:function(e){return o.unifiedExec(this,e,l,t)}}});U.addCommand("decrement",function(i,o,s){if(!s.matchToken("decrement"))return;var t;var l=i.parseElement("assignableExpression",s);if(s.matchToken("by")){t=i.requireElement("expression",s)}return{target:l,args:[l,t],op:function(e,t,r){t=t?parseFloat(t):0;r=r?parseFloat(r):1;var a=t-r;var n=u(i,o,s,l,a);e.result=a;n.parent=this;return n},execute:function(e){return o.unifiedExec(this,e,l,t)}}});U.addCommand("fetch",function(e,a,t){if(!t.matchToken("fetch"))return;var r=e.requireElement("stringLike",t);var n=e.parseElement("objectLiteral",t);var i="text";var o;if(t.matchToken("as")){if(t.matchToken("json")){i="json"}else if(t.matchToken("response")){i="response"}else if(t.matchToken("html")){i="html"}else if(t.matchToken("text")){}else{o=e.requireElement("dotOrColonPath",t).evaluate()}}var s={url:r,argExpressions:n,args:[r,n],op:function(t,e,r){return fetch(e,r).then(function(e){if(i==="response"){t.result=e;return a.findNext(s,t)}if(i==="json"){return e.json().then(function(e){t.result=e;return a.findNext(s,t)})}return e.text().then(function(e){if(o)e=a.convertValue(e,o);if(i==="html")e=a.convertValue(e,"Fragment");t.result=e;return a.findNext(s,t)})}).catch(function(e){a.triggerEvent(t.me,"fetch:error",{reason:e});throw e})}};return s})}function e(e){if(document.readyState!=="loading"){setTimeout(e)}else{document.addEventListener("DOMContentLoaded",e)}}function i(){var e=document.querySelector('meta[name="htmx-config"]');if(e){return t(e.content)}else{return null}}function o(){var e=i();if(e){_hyperscript.config=j(_hyperscript.config,e)}}if("document"in B){Promise.all(Array.from(document.querySelectorAll("script[type='text/hyperscript'][src]")).map(function(e){return fetch(e.src).then(function(e){return e.text()}).then(function(e){return V.evaluate(e)})})).then(function(){e(function(){o();V.processNode(document.documentElement);document.addEventListener("htmx:load",function(e){V.processNode(e.detail.elt)})})})}return j(function(e,t){return V.evaluate(e,t)},{internals:{lexer:q,parser:U,runtime:V},addFeature:function(e,t){U.addFeature(e,t)},addCommand:function(e,t){U.addCommand(e,t)},addLeafExpression:function(e,t){U.addLeafExpression(e,t)},addIndirectExpression:function(e,t){U.addIndirectExpression(e,t)},evaluate:function(e,t){return V.evaluate(e,t)},parse:function(e){return V.parse(e)},processNode:function(e){V.processNode(e)},config:{attributes:"_, script, data-script",defaultTransition:"all 500ms ease-in",disableSelector:"[disable-scripting], [data-disable-scripting]",conversions:Y}})});(function(){function o(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}return e}_hyperscript.addCommand("settle",function(e,o,t){if(t.matchToken("settle")){if(!e.commandBoundary(t.currentToken())){var r=e.requireElement("expression",t)}else{var r=e.requireElement("implicitMeTarget",t)}var s={type:"settleCmd",args:[r],op:function(e,t){var r=null;var a=false;var n=false;var i=new Promise(function(e){r=e});t.addEventListener("transitionstart",function(){n=true},{once:true});setTimeout(function(){if(!n&&!a){r(o.findNext(s,e))}},500);t.addEventListener("transitionend",function(){if(!a){r(o.findNext(s,e))}},{once:true});return i},execute:function(e){return o.unifiedExec(this,e)}};return s}});_hyperscript.addCommand("add",function(e,a,t){if(t.matchToken("add")){var r=e.parseElement("classRef",t);var n=null;var i=null;if(r==null){n=e.parseElement("attributeRef",t);if(n==null){i=e.parseElement("objectLiteral",t);if(i==null){e.raiseParseError(t,"Expected either a class reference or attribute expression")}}}else{var o=[r];while(r=e.parseElement("classRef",t)){o.push(r)}}if(t.matchToken("to")){var s=e.requireElement("expression",t)}else{var s=e.parseElement("implicitMeTarget",t)}if(o){var l={classRefs:o,to:s,args:[s],op:function(e,r){a.forEach(o,function(t){a.forEach(r,function(e){if(e instanceof Element)e.classList.add(t.className())})});return a.findNext(this,e)}}}else if(n){var l={type:"addCmd",attributeRef:n,to:s,args:[s],op:function(e,t,r){a.forEach(t,function(e){e.setAttribute(n.name,n.value)});return a.findNext(l,e)},execute:function(e){return a.unifiedExec(this,e)}}}else{var l={type:"addCmd",cssDeclaration:i,to:s,args:[s,i],op:function(e,t,r){a.forEach(t,function(e){for(var t in r){if(r.hasOwnProperty(t)){e.style.setProperty(t,r[t])}}});return a.findNext(l,e)},execute:function(e){return a.unifiedExec(this,e)}}}return l}});_hyperscript.addCommand("remove",function(e,a,t){if(t.matchToken("remove")){var r=e.parseElement("classRef",t);var n=null;var i=null;if(r==null){n=e.parseElement("attributeRef",t);if(n==null){i=e.parseElement("expression",t);if(i==null){e.raiseParseError(t,"Expected either a class reference, attribute expression or value expression")}}}else{var o=[r];while(r=e.parseElement("classRef",t)){o.push(r)}}if(t.matchToken("from")){var s=e.requireElement("expression",t)}else{var s=e.requireElement("implicitMeTarget",t)}if(i){var l={elementExpr:i,from:s,args:[i],op:function(e,t){a.forEach(t,function(e){if(e.parentElement){e.parentElement.removeChild(e)}});return a.findNext(this,e)}}}else{var l={classRefs:o,attributeRef:n,elementExpr:i,from:s,args:[s],op:function(e,r){if(this.classRefs){a.forEach(o,function(t){a.forEach(r,function(e){e.classList.remove(t.className())})})}else{a.forEach(r,function(e){e.removeAttribute(n.name)})}return a.findNext(this,e)}}}return l}});_hyperscript.addCommand("toggle",function(e,o,t){if(t.matchToken("toggle")){if(t.matchToken("between")){var r=true;var a=e.parseElement("classRef",t);t.requireToken("and");var n=e.requireElement("classRef",t)}else{var a=e.parseElement("classRef",t);var i=null;if(a==null){i=e.parseElement("attributeRef",t);if(i==null){e.raiseParseError(t,"Expected either a class reference or attribute expression")}}else{var s=[a];while(a=e.parseElement("classRef",t)){s.push(a)}}}if(t.matchToken("on")){var l=e.requireElement("expression",t)}else{var l=e.requireElement("implicitMeTarget",t)}if(t.matchToken("for")){var u=e.requireElement("timeExpression",t)}else if(t.matchToken("until")){var c=e.requireElement("dotOrColonPath",t,"Expected event name");if(t.matchToken("from")){var f=e.requireElement("expression",t)}}var d={classRef:a,classRef2:n,classRefs:s,attributeRef:i,on:l,time:u,evt:c,from:f,toggle:function(e){if(r){o.forEach(e,function(e){if(e.classList.contains(a.className())){e.classList.remove(a.className());e.classList.add(n.className())}else{e.classList.add(a.className());e.classList.remove(n.className())}})}else if(this.classRefs){o.forEach(this.classRefs,function(t){o.forEach(e,function(e){e.classList.toggle(t.className())})})}else{o.forEach(e,function(e){if(e.hasAttribute(i.name)){e.removeAttribute(i.name)}else{e.setAttribute(i.name,i.value)}})}},args:[l,u,c,f],op:function(r,a,t,n,i){if(t){return new Promise(function(e){d.toggle(a);setTimeout(function(){d.toggle(a);e(o.findNext(d,r))},t)})}else if(n){return new Promise(function(e){var t=i||r.me;t.addEventListener(n,function(){d.toggle(a);e(o.findNext(d,r))},{once:true});d.toggle(a)})}else{this.toggle(a);return o.findNext(d,r)}}};return d}});var s={display:function(e,t,r){if(r){t.style.display=r}else if(e==="hide"){t.style.display="none"}else{t.style.display="block"}},visibility:function(e,t,r){if(r){t.style.visibility=r}else if(e==="hide"){t.style.visibility="hidden"}else{t.style.visibility="visible"}},opacity:function(e,t,r){if(r){t.style.opacity=r}else if(e==="hide"){t.style.opacity="0"}else{t.style.opacity="1"}}};var l=function(e,t,r){var a;var n=r.currentToken();if(n.value==="with"||e.commandBoundary(n)){a=e.parseElement("implicitMeTarget",r)}else{a=e.parseElement("expression",r)}return a};var u=function(e,t,r){var a=_hyperscript.config.defaultHideShowStrategy;var n=s;if(_hyperscript.config.hideShowStrategies){n=o(n,_hyperscript.config.hideShowStrategies)}r=r||a||"display";var i=n[r];if(i==null){e.raiseParseError(t,"Unknown show/hide strategy : "+r)}return i};_hyperscript.addCommand("hide",function(e,r,t){if(t.matchToken("hide")){var a=l(e,r,t);var n=null;if(t.matchToken("with")){n=t.requireTokenType("IDENTIFIER").value}var i=u(e,t,n);return{target:a,args:[a],op:function(e,t){r.forEach(t,function(e){i("hide",e)});return r.findNext(this,e)}}}});_hyperscript.addCommand("show",function(e,r,t){if(t.matchToken("show")){var a=l(e,r,t);var n=null;if(t.matchToken("with")){n=t.requireTokenType("IDENTIFIER").value}var i=null;if(t.matchOpToken(":")){var o=t.consumeUntilWhitespace();t.matchTokenType("WHITESPACE");i=o.map(function(e){return e.value}).join("")}var s=u(e,t,n);return{target:a,args:[a],op:function(e,t){r.forEach(t,function(e){s("show",e,i)});return r.findNext(this,e)}}}});_hyperscript.addCommand("trigger",function(e,a,t){if(t.matchToken("trigger")){var r=e.requireElement("eventName",t);var n=e.parseElement("namedArgumentList",t);var i={eventName:r,details:n,args:[r,n],op:function(e,t,r){a.triggerEvent(e.me,t,r?r:{});return a.findNext(i,e)}};return i}});_hyperscript.addCommand("take",function(e,n,t){if(t.matchToken("take")){var r=e.parseElement("classRef",t);if(t.matchToken("from")){var a=e.requireElement("expression",t)}else{var a=r}if(t.matchToken("for")){var i=e.requireElement("expression",t)}else{var i=e.requireElement("implicitMeTarget",t)}var o={classRef:r,from:a,forElt:i,args:[a,i],op:function(e,t,r){var a=this.classRef.css.substr(1);n.forEach(t,function(e){e.classList.remove(a)});n.forEach(r,function(e){e.classList.add(a)});return n.findNext(this,e)}};return o}});function d(e,t,r){if(t){var a=e[t]}else{var a=e}if(a instanceof Element||a instanceof HTMLDocument){while(a.firstChild)a.removeChild(a.firstChild);a.append(_hyperscript.internals.runtime.convertValue(r,"Fragment"))}else{if(t){e[t]=r}else{throw"Don't know how to put a value into "+typeof e}}}_hyperscript.addCommand("put",function(e,n,t){if(t.matchToken("put")){var r=e.requireElement("expression",t);var a=t.matchAnyToken("into","before","after");if(a==null&&t.matchToken("at")){a=t.matchAnyToken("start","end");t.requireToken("of")}if(a==null){e.raiseParseError(t,"Expected one of 'into', 'before', 'at start of', 'at end of', 'after'")}var i=e.requireElement("expression",t);var o=a.value;var s=false;var l=null;var u=null;if(i.type==="propertyAccess"&&o==="into"){u=i.prop.value;l=i.root}else if(i.type==="symbol"&&o==="into"){s=true;u=i.name}else if(i.type==="attributeRef"&&o==="into"){var c=true;u=i.name;l=e.requireElement("implicitMeTarget",t)}else if(i.type==="attributeRefAccess"&&o==="into"){var c=true;u=i.attribute.name;l=i.root}else{l=i}var f={target:i,operation:o,symbolWrite:s,value:r,args:[l,r],op:function(e,t,r){if(s){d(e,u,r)}else{if(o==="into"){if(c){n.forEach(t,function(e){e.setAttribute(u,r)})}else{n.forEach(t,function(e){d(e,u,r)})}}else{var a=o==="before"?Element.prototype.before:o==="after"?Element.prototype.after:o==="start"?Element.prototype.prepend:o==="end"?Element.prototype.append:"unreachable";n.forEach(t,function(e){a.call(e,r instanceof Node?r:n.convertValue(r,"Fragment"))})}}return n.findNext(this,e)}};return f}});function c(e,t,r){if(r.matchToken("the")||r.matchToken("element")||r.matchToken("elements")||r.currentToken().type==="CLASS_REF"||r.currentToken().type==="ID_REF"||r.currentToken().op&&r.currentToken().value==="<"){e.possessivesDisabled=true;try{var a=e.parseElement("expression",r)}finally{delete e.possessivesDisabled}if(r.matchOpToken("'")){r.requireToken("s")}}else if(r.currentToken().type==="IDENTIFIER"&&r.currentToken().value==="its"){var n=r.matchToken("its");var a={type:"pseudopossessiveIts",token:n,name:n.value,evaluate:function(e){return t.resolveSymbol("it",e)}}}else{r.matchToken("my")||r.matchToken("me");var a=e.parseElement("implicitMeTarget",r)}return a}_hyperscript.addCommand("transition",function(e,g,t){if(t.matchToken("transition")){var r=c(e,g,t);var a=[];var n=[];var i=[];var o=t.currentToken();while(!e.commandBoundary(o)&&o.value!=="over"&&o.value!=="using"){a.push(e.requireElement("stringLike",t));if(t.matchToken("from")){n.push(e.requireElement("stringLike",t))}else{n.push(null)}t.requireToken("to");i.push(e.requireElement("stringLike",t));o=t.currentToken()}if(t.matchToken("over")){var s=e.requireElement("timeExpression",t)}else if(t.matchToken("using")){var l=e.requireElement("expression",t)}var u={to:i,args:[r,a,n,i,l,s],op:function(e,t,d,v,p,h,m){var r=[];g.forEach(t,function(f){var e=new Promise(function(i,e){var o=f.style.transition;if(m){f.style.transition="all "+m+"ms ease-in"}else if(h){f.style.transition=h}else{f.style.transition=_hyperscript.config.defaultTransition}var s=g.getInternalData(f);var t=getComputedStyle(f);var r={};for(var a=0;a<t.length;a++){var n=t[a];var l=t[n];r[n]=l}if(!s.initalStyles){s.initalStyles=r}for(var a=0;a<d.length;a++){var u=d[a];var c=v[a];if(c=="computed"||c==null){f.style[u]=r[u]}else{f.style[u]=c}}setTimeout(function(){var e=[];for(var t=0;t<d.length;t++){var r=d[t];var a=p[t];if(a=="initial"){var n=s.initalStyles[r];f.style[r]=n}else{f.style[r]=a}}f.addEventListener("transitionend",function(){f.style.transition=o;i()},{once:true})},5)});r.push(e)});return Promise.all(r).then(function(){return g.findNext(u,e)})}};return u}});_hyperscript.addCommand("measure",function(e,n,t){if(!t.matchToken("measure"))return;var r=c(e,n,t);var i=[];if(!e.commandBoundary(t.currentToken()))do{i.push(t.matchTokenType("IDENTIFIER").value)}while(t.matchOpToken(","));return{properties:i,args:[r],op:function(t,e){if(0 in e)e=e[0];var r=e.getBoundingClientRect();var a={top:e.scrollTop,left:e.scrollLeft,topMax:e.scrollTopMax,leftMax:e.scrollLeftMax,height:e.scrollHeight,width:e.scrollWidth};t.result={x:r.x,y:r.y,left:r.left,top:r.top,right:r.right,bottom:r.bottom,width:r.width,height:r.height,bounds:r,scrollLeft:a.left,scrollTop:a.top,scrollLeftMax:a.leftMax,scrollTopMax:a.topMax,scrollWidth:a.width,scrollHeight:a.height,scroll:a};n.forEach(i,function(e){if(e in t.result)t[e]=t.result[e];else throw"No such measurement as "+e});return n.findNext(this,t)}}});_hyperscript.addLeafExpression("closestExpr",function(e,t,r){if(r.matchToken("closest")){if(r.matchToken("parent")){var a=true}var n=null;if(r.currentToken().type==="ATTRIBUTE_REF"){var i=e.parseElement("attributeRefAccess",r,null);n="["+i.attribute.name+"]"}if(n==null){var o=e.parseElement("expression",r);if(o.css==null){e.raiseParseError(r,"Expected a CSS expression")}else{n=o.css}}if(r.matchToken("to")){var s=e.parseElement("expression",r)}else{var s=e.parseElement("implicitMeTarget",r)}var l={type:"closestExpr",parentSearch:a,expr:o,css:n,to:s,args:[s],op:function(e,t){if(t==null||!(t instanceof Element)){return null}else{if(a){var r=t.parentElement?t.parentElement.closest(n):null}else{var r=t.closest(n)}return r}},evaluate:function(e){return t.unifiedEval(this,e)}};if(i){i.root=l;i.args=[l];return i}else{return l}}});_hyperscript.addCommand("go",function(e,r,t){if(t.matchToken("go")){if(t.matchToken("back")){var a=true}else{t.matchToken("to");if(t.matchToken("url")){var n=e.requireElement("stringLike",t);var i=true;if(t.matchToken("in")){t.requireToken("new");t.requireToken("window");var o=true}}else{t.matchToken("the");var s=t.matchAnyToken("top","bottom","middle");var l=t.matchAnyToken("left","center","right");if(s||l){t.requireToken("of")}var n=e.requireElement("expression",t);var u=t.matchAnyToken("smoothly","instantly");var c={};if(s){if(s.value==="top"){c.block="start"}else if(s.value==="bottom"){c.block="end"}else if(s.value==="middle"){c.block="center"}}if(l){if(l.value==="left"){c.inline="start"}else if(l.value==="center"){c.inline="center"}else if(l.value==="right"){c.inline="end"}}if(u){if(u.value==="smoothly"){c.behavior="smooth"}else if(u.value==="instantly"){c.behavior="instant"}}}}var f={target:n,args:[n],op:function(e,t){if(a){window.history.back()}else if(i){if(t){if(t.indexOf("#")===0&&!o){window.location.href=t}else{window.open(t,o?"_blank":null)}}}else{r.forEach(t,function(e){e.scrollIntoView(c)})}return r.findNext(f)}};return f}});_hyperscript.config.conversions["Values"]=function(e){var a={};var n=_hyperscript.internals.runtime.forEach;n(e,function(e){var t=o(e);if(t!==undefined){a[t.name]=t.value;return}if(e.querySelectorAll!=undefined){var r=e.querySelectorAll("input,select,textarea");n(r,i)}});return a;function i(e){var t=o(e);if(t==undefined){return}if(a[t.name]==undefined){a[t.name]=t.value;return}if(Array.isArray(a[t.name])&&Array.isArray(t.value)){a[t.name]=[].concat(a[t.name],t.value);return}}function o(e){try{var t={name:e.name,value:e.value};if(t.name==undefined||t.value==undefined){return undefined}if(e.type=="radio"&&e.checked==false){return undefined}if(e.type=="checkbox"){if(e.checked==false){t.value=undefined}else if(typeof t.value==="string"){t.value=[t.value]}}if(e.type=="select-multiple"){var r=e.querySelectorAll("option[selected]");t.value=[];for(var a=0;a<r.length;a++){t.value.push(r[a].value)}}return t}catch(e){return undefined}}};_hyperscript.config.conversions["HTML"]=function(e){var n=function(e){if(e instanceof Array){return e.map(function(e){return n(e)}).join("")}if(e instanceof HTMLElement){return e.outerHTML}if(e instanceof NodeList){var t="";for(var r=0;r<e.length;r++){var a=e[r];if(a instanceof HTMLElement){t+=a.outerHTML}}return t}if(e.toString){return e.toString()}return""};return n(e)};_hyperscript.config.conversions["Fragment"]=function(e){var r=document.createDocumentFragment();_hyperscript.internals.runtime.forEach(e,function(e){if(e instanceof Node)r.append(e);else{var t=document.createElement("template");t.innerHTML=e;r.append(t.content)}});return r}})();(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t(require("@popperjs/core")):typeof define==="function"&&define.amd?define(["@popperjs/core"],t):(e=typeof globalThis!=="undefined"?globalThis:e||self,e.bootstrap=t(e.Popper))})(this,function(e){"use strict";function t(r){if(r&&r.__esModule)return r;var a=Object.create(null);if(r){Object.keys(r).forEach(function(e){if(e!=="default"){var t=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(a,e,t.get?t:{enumerable:true,get:function(){return r[e]}})}})}a["default"]=r;return Object.freeze(a)}var f=t(e);const n=3;const h={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(e=>e.matches(t))},parents(e,t){const r=[];let a=e.parentNode;while(a&&a.nodeType===Node.ELEMENT_NODE&&a.nodeType!==n){if(a.matches(t)){r.push(a)}a=a.parentNode}return r},prev(e,t){let r=e.previousElementSibling;while(r){if(r.matches(t)){return[r]}r=r.previousElementSibling}return[]},next(e,t){let r=e.nextElementSibling;while(r){if(r.matches(t)){return[r]}r=r.nextElementSibling}return[]}};const r=1e6;const i=1e3;const s="transitionend";const l=e=>{if(e===null||e===undefined){return`${e}`}return{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()};const d=e=>{do{e+=Math.floor(Math.random()*r)}while(document.getElementById(e));return e};const a=t=>{let r=t.getAttribute("data-bs-target");if(!r||r==="#"){let e=t.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith(".")){return null}if(e.includes("#")&&!e.startsWith("#")){e=`#${e.split("#")[1]}`}r=e&&e!=="#"?e.trim():null}return r};const o=e=>{const t=a(e);if(t){return document.querySelector(t)?t:null}return null};const u=e=>{const t=a(e);return t?document.querySelector(t):null};const c=e=>{if(!e){return 0}let{transitionDuration:t,transitionDelay:r}=window.getComputedStyle(e);const a=Number.parseFloat(t);const n=Number.parseFloat(r);if(!a&&!n){return 0}t=t.split(",")[0];r=r.split(",")[0];return(Number.parseFloat(t)+Number.parseFloat(r))*i};const v=e=>{e.dispatchEvent(new Event(s))};const p=e=>{if(!e||typeof e!=="object"){return false}if(typeof e.jquery!=="undefined"){e=e[0]}return typeof e.nodeType!=="undefined"};const m=e=>{if(p(e)){return e.jquery?e[0]:e}if(typeof e==="string"&&e.length>0){return h.findOne(e)}return null};const g=(n,i,o)=>{Object.keys(o).forEach(e=>{const t=o[e];const r=i[e];const a=r&&p(r)?"element":l(r);if(!new RegExp(t).test(a)){throw new TypeError(`${n.toUpperCase()}: Option "${e}" provided type "${a}" but expected type "${t}".`)}})};const y=e=>{if(!p(e)||e.getClientRects().length===0){return false}return getComputedStyle(e).getPropertyValue("visibility")==="visible"};const x=e=>{if(!e||e.nodeType!==Node.ELEMENT_NODE){return true}if(e.classList.contains("disabled")){return true}if(typeof e.disabled!=="undefined"){return e.disabled}return e.hasAttribute("disabled")&&e.getAttribute("disabled")!=="false"};const b=e=>{if(!document.documentElement.attachShadow){return null}if(typeof e.getRootNode==="function"){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}if(e instanceof ShadowRoot){return e}if(!e.parentNode){return null}return b(e.parentNode)};const _=()=>{};const w=e=>e.offsetHeight;const T=()=>{const{jQuery:e}=window;if(e&&!document.body.hasAttribute("data-bs-no-jquery")){return e}return null};const k=[];const M=e=>{if(document.readyState==="loading"){if(!k.length){document.addEventListener("DOMContentLoaded",()=>{k.forEach(e=>e())})}k.push(e)}else{e()}};const A=()=>document.documentElement.dir==="rtl";const S=a=>{M(()=>{const e=T();if(e){const t=a.NAME;const r=e.fn[t];e.fn[t]=a.jQueryInterface;e.fn[t].Constructor=a;e.fn[t].noConflict=()=>{e.fn[t]=r;return a.jQueryInterface}}})};const E=e=>{if(typeof e==="function"){e()}};const L=(t,r,e=true)=>{if(!e){E(t);return}const a=5;const n=c(r)+a;let i=false;const o=({target:e})=>{if(e!==r){return}i=true;r.removeEventListener(s,o);E(t)};r.addEventListener(s,o);setTimeout(()=>{if(!i){v(r)}},n)};const C=(e,t,r,a)=>{let n=e.indexOf(t);if(n===-1){return e[!r&&a?e.length-1:0]}const i=e.length;n+=r?1:-1;if(a){n=(n+i)%i}return e[Math.max(0,Math.min(n,i-1))]};const D=/[^.]*(?=\..*)\.|.*/;const O=/\..*/;const I=/::\d+$/;const P={};let R=1;const N={mouseenter:"mouseover",mouseleave:"mouseout"};const z=/^(mouseenter|mouseleave)/i;const F=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function j(e,t){return t&&`${t}::${R++}`||e.uidEvent||R++}function H(e){const t=j(e);e.uidEvent=t;P[t]=P[t]||{};return P[t]}function B(r,a){return function e(t){t.delegateTarget=r;if(e.oneOff){Z.off(r,t.type,a)}return a.apply(r,[t])}}function q(i,o,s){return function r(a){const n=i.querySelectorAll(o);for(let{target:t}=a;t&&t!==this;t=t.parentNode){for(let e=n.length;e--;){if(n[e]===t){a.delegateTarget=t;if(r.oneOff){Z.off(i,a.type,o,s)}return s.apply(t,[a])}}}return null}}function U(r,a,n=null){const i=Object.keys(r);for(let e=0,t=i.length;e<t;e++){const o=r[i[e]];if(o.originalHandler===a&&o.delegationSelector===n){return o}}return null}function Y(e,t,r){const a=typeof t==="string";const n=a?r:t;let i=$(e);const o=F.has(i);if(!o){i=e}return[a,n,i]}function V(e,t,r,a,n){if(typeof t!=="string"||!e){return}if(!r){r=a;a=null}if(z.test(t)){const v=t=>{return function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget)){return t.call(this,e)}}};if(a){a=v(a)}else{r=v(r)}}const[i,o,s]=Y(t,r,a);const l=H(e);const u=l[s]||(l[s]={});const c=U(u,o,i?r:null);if(c){c.oneOff=c.oneOff&&n;return}const f=j(o,t.replace(D,""));const d=i?q(e,r,a):B(e,r);d.delegationSelector=i?r:null;d.originalHandler=o;d.oneOff=n;d.uidEvent=f;u[f]=d;e.addEventListener(s,d,i)}function G(e,t,r,a,n){const i=U(t[r],a,n);if(!i){return}e.removeEventListener(r,i,Boolean(n));delete t[r][i.uidEvent]}function W(r,a,n,i){const o=a[n]||{};Object.keys(o).forEach(e=>{if(e.includes(i)){const t=o[e];G(r,a,n,t.originalHandler,t.delegationSelector)}})}function $(e){e=e.replace(O,"");return N[e]||e}const Z={on(e,t,r,a){V(e,t,r,a,false)},one(e,t,r,a){V(e,t,r,a,true)},off(a,n,e,t){if(typeof n!=="string"||!a){return}const[r,i,o]=Y(n,e,t);const s=o!==n;const l=H(a);const u=n.startsWith(".");if(typeof i!=="undefined"){if(!l||!l[o]){return}G(a,l,o,i,r?e:null);return}if(u){Object.keys(l).forEach(e=>{W(a,l,e,n.slice(1))})}const c=l[o]||{};Object.keys(c).forEach(e=>{const t=e.replace(I,"");if(!s||n.includes(t)){const r=c[e];G(a,l,o,r.originalHandler,r.delegationSelector)}})},trigger(e,t,r){if(typeof t!=="string"||!e){return null}const a=T();const n=$(t);const i=t!==n;const o=F.has(n);let s;let l=true;let u=true;let c=false;let f=null;if(i&&a){s=a.Event(t,r);a(e).trigger(s);l=!s.isPropagationStopped();u=!s.isImmediatePropagationStopped();c=s.isDefaultPrevented()}if(o){f=document.createEvent("HTMLEvents");f.initEvent(n,l,true)}else{f=new CustomEvent(t,{bubbles:l,cancelable:true})}if(typeof r!=="undefined"){Object.keys(r).forEach(e=>{Object.defineProperty(f,e,{get(){return r[e]}})})}if(c){f.preventDefault()}if(u){e.dispatchEvent(f)}if(f.defaultPrevented&&typeof s!=="undefined"){s.preventDefault()}return f}};const X=new Map;var J={set(e,t,r){if(!X.has(e)){X.set(e,new Map)}const a=X.get(e);if(!a.has(t)&&a.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(a.keys())[0]}.`);return}a.set(t,r)},get(e,t){if(X.has(e)){return X.get(e).get(t)||null}return null},remove(e,t){if(!X.has(e)){return}const r=X.get(e);r.delete(t);if(r.size===0){X.delete(e)}}};const K="5.0.2";class Q{constructor(e){e=m(e);if(!e){return}this._element=e;J.set(this._element,this.constructor.DATA_KEY,this)}dispose(){J.remove(this._element,this.constructor.DATA_KEY);Z.off(this._element,this.constructor.EVENT_KEY);Object.getOwnPropertyNames(this).forEach(e=>{this[e]=null})}_queueCallback(e,t,r=true){L(e,t,r)}static getInstance(e){return J.get(e,this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,typeof t==="object"?t:null)}static get VERSION(){return K}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}const ee="alert";const te="bs.alert";const re=`.${te}`;const ae=".data-api";const ne='[data-bs-dismiss="alert"]';const ie=`close${re}`;const oe=`closed${re}`;const se=`click${re}${ae}`;const le="alert";const ue="fade";const ce="show";class fe extends Q{static get NAME(){return ee}close(e){const t=e?this._getRootElement(e):this._element;const r=this._triggerCloseEvent(t);if(r===null||r.defaultPrevented){return}this._removeElement(t)}_getRootElement(e){return u(e)||e.closest(`.${le}`)}_triggerCloseEvent(e){return Z.trigger(e,ie)}_removeElement(e){e.classList.remove(ce);const t=e.classList.contains(ue);this._queueCallback(()=>this._destroyElement(e),e,t)}_destroyElement(e){e.remove();Z.trigger(e,oe)}static jQueryInterface(t){return this.each(function(){const e=fe.getOrCreateInstance(this);if(t==="close"){e[t](this)}})}static handleDismiss(t){return function(e){if(e){e.preventDefault()}t.close(this)}}}Z.on(document,se,ne,fe.handleDismiss(new fe));S(fe);const de="button";const ve="bs.button";const pe=`.${ve}`;const he=".data-api";const me="active";const ge='[data-bs-toggle="button"]';const ye=`click${pe}${he}`;class xe extends Q{static get NAME(){return de}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(me))}static jQueryInterface(t){return this.each(function(){const e=xe.getOrCreateInstance(this);if(t==="toggle"){e[t]()}})}}Z.on(document,ye,ge,e=>{e.preventDefault();const t=e.target.closest(ge);const r=xe.getOrCreateInstance(t);r.toggle()});S(xe);function be(e){if(e==="true"){return true}if(e==="false"){return false}if(e===Number(e).toString()){return Number(e)}if(e===""||e==="null"){return null}return e}function _e(e){return e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const we={setDataAttribute(e,t,r){e.setAttribute(`data-bs-${_e(t)}`,r)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${_e(t)}`)},getDataAttributes(r){if(!r){return{}}const a={};Object.keys(r.dataset).filter(e=>e.startsWith("bs")).forEach(e=>{let t=e.replace(/^bs/,"");t=t.charAt(0).toLowerCase()+t.slice(1,t.length);a[t]=be(r.dataset[e])});return a},getDataAttribute(e,t){return be(e.getAttribute(`data-bs-${_e(t)}`))},offset(e){const t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},position(e){return{top:e.offsetTop,left:e.offsetLeft}}};const Te="carousel";const ke="bs.carousel";const Me=`.${ke}`;const Ae=".data-api";const Se="ArrowLeft";const Ee="ArrowRight";const Le=500;const Ce=40;const De={interval:5e3,keyboard:true,slide:false,pause:"hover",wrap:true,touch:true};const Oe={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"};const Ie="next";const Pe="prev";const Re="left";const Ne="right";const ze={[Se]:Ne,[Ee]:Re};const Fe=`slide${Me}`;const je=`slid${Me}`;const He=`keydown${Me}`;const Be=`mouseenter${Me}`;const qe=`mouseleave${Me}`;const Ue=`touchstart${Me}`;const Ye=`touchmove${Me}`;const Ve=`touchend${Me}`;const Ge=`pointerdown${Me}`;const We=`pointerup${Me}`;const $e=`dragstart${Me}`;const Ze=`load${Me}${Ae}`;const Xe=`click${Me}${Ae}`;const Je="carousel";const Ke="active";const Qe="slide";const et="carousel-item-end";const tt="carousel-item-start";const rt="carousel-item-next";const at="carousel-item-prev";const nt="pointer-event";const it=".active";const ot=".active.carousel-item";const st=".carousel-item";const lt=".carousel-item img";const ut=".carousel-item-next, .carousel-item-prev";const ct=".carousel-indicators";const ft="[data-bs-target]";const dt="[data-bs-slide], [data-bs-slide-to]";const vt='[data-bs-ride="carousel"]';const pt="touch";const ht="pen";class mt extends Q{constructor(e,t){super(e);this._items=null;this._interval=null;this._activeElement=null;this._isPaused=false;this._isSliding=false;this.touchTimeout=null;this.touchStartX=0;this.touchDeltaX=0;this._config=this._getConfig(t);this._indicatorsElement=h.findOne(ct,this._element);this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0;this._pointerEvent=Boolean(window.PointerEvent);this._addEventListeners()}static get Default(){return De}static get NAME(){return Te}next(){this._slide(Ie)}nextWhenVisible(){if(!document.hidden&&y(this._element)){this.next()}}prev(){this._slide(Pe)}pause(e){if(!e){this._isPaused=true}if(h.findOne(ut,this._element)){v(this._element);this.cycle(true)}clearInterval(this._interval);this._interval=null}cycle(e){if(!e){this._isPaused=false}if(this._interval){clearInterval(this._interval);this._interval=null}if(this._config&&this._config.interval&&!this._isPaused){this._updateInterval();this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval)}}to(e){this._activeElement=h.findOne(ot,this._element);const t=this._getItemIndex(this._activeElement);if(e>this._items.length-1||e<0){return}if(this._isSliding){Z.one(this._element,je,()=>this.to(e));return}if(t===e){this.pause();this.cycle();return}const r=e>t?Ie:Pe;this._slide(r,this._items[e])}_getConfig(e){e={...De,...we.getDataAttributes(this._element),...typeof e==="object"?e:{}};g(Te,e,Oe);return e}_handleSwipe(){const e=Math.abs(this.touchDeltaX);if(e<=Ce){return}const t=e/this.touchDeltaX;this.touchDeltaX=0;if(!t){return}this._slide(t>0?Ne:Re)}_addEventListeners(){if(this._config.keyboard){Z.on(this._element,He,e=>this._keydown(e))}if(this._config.pause==="hover"){Z.on(this._element,Be,e=>this.pause(e));Z.on(this._element,qe,e=>this.cycle(e))}if(this._config.touch&&this._touchSupported){this._addTouchEventListeners()}}_addTouchEventListeners(){const t=e=>{if(this._pointerEvent&&(e.pointerType===ht||e.pointerType===pt)){this.touchStartX=e.clientX}else if(!this._pointerEvent){this.touchStartX=e.touches[0].clientX}};const r=e=>{this.touchDeltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this.touchStartX};const a=e=>{if(this._pointerEvent&&(e.pointerType===ht||e.pointerType===pt)){this.touchDeltaX=e.clientX-this.touchStartX}this._handleSwipe();if(this._config.pause==="hover"){this.pause();if(this.touchTimeout){clearTimeout(this.touchTimeout)}this.touchTimeout=setTimeout(e=>this.cycle(e),Le+this._config.interval)}};h.find(lt,this._element).forEach(e=>{Z.on(e,$e,e=>e.preventDefault())});if(this._pointerEvent){Z.on(this._element,Ge,e=>t(e));Z.on(this._element,We,e=>a(e));this._element.classList.add(nt)}else{Z.on(this._element,Ue,e=>t(e));Z.on(this._element,Ye,e=>r(e));Z.on(this._element,Ve,e=>a(e))}}_keydown(e){if(/input|textarea/i.test(e.target.tagName)){return}const t=ze[e.key];if(t){e.preventDefault();this._slide(t)}}_getItemIndex(e){this._items=e&&e.parentNode?h.find(st,e.parentNode):[];return this._items.indexOf(e)}_getItemByOrder(e,t){const r=e===Ie;return C(this._items,t,r,this._config.wrap)}_triggerSlideEvent(e,t){const r=this._getItemIndex(e);const a=this._getItemIndex(h.findOne(ot,this._element));return Z.trigger(this._element,Fe,{relatedTarget:e,direction:t,from:a,to:r})}_setActiveIndicatorElement(t){if(this._indicatorsElement){const e=h.findOne(it,this._indicatorsElement);e.classList.remove(Ke);e.removeAttribute("aria-current");const r=h.find(ft,this._indicatorsElement);for(let e=0;e<r.length;e++){if(Number.parseInt(r[e].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(t)){r[e].classList.add(Ke);r[e].setAttribute("aria-current","true");break}}}}_updateInterval(){const e=this._activeElement||h.findOne(ot,this._element);if(!e){return}const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);if(t){this._config.defaultInterval=this._config.defaultInterval||this._config.interval;this._config.interval=t}else{this._config.interval=this._config.defaultInterval||this._config.interval}}_slide(e,t){const r=this._directionToOrder(e);const a=h.findOne(ot,this._element);const n=this._getItemIndex(a);const i=t||this._getItemByOrder(r,a);const o=this._getItemIndex(i);const s=Boolean(this._interval);const l=r===Ie;const u=l?tt:et;const c=l?rt:at;const f=this._orderToDirection(r);if(i&&i.classList.contains(Ke)){this._isSliding=false;return}if(this._isSliding){return}const d=this._triggerSlideEvent(i,f);if(d.defaultPrevented){return}if(!a||!i){return}this._isSliding=true;if(s){this.pause()}this._setActiveIndicatorElement(i);this._activeElement=i;const v=()=>{Z.trigger(this._element,je,{relatedTarget:i,direction:f,from:n,to:o})};if(this._element.classList.contains(Qe)){i.classList.add(c);w(i);a.classList.add(u);i.classList.add(u);const p=()=>{i.classList.remove(u,c);i.classList.add(Ke);a.classList.remove(Ke,c,u);this._isSliding=false;setTimeout(v,0)};this._queueCallback(p,a,true)}else{a.classList.remove(Ke);i.classList.add(Ke);this._isSliding=false;v()}if(s){this.cycle()}}_directionToOrder(e){if(![Ne,Re].includes(e)){return e}if(A()){return e===Re?Pe:Ie}return e===Re?Ie:Pe}_orderToDirection(e){if(![Ie,Pe].includes(e)){return e}if(A()){return e===Pe?Re:Ne}return e===Pe?Ne:Re}static carouselInterface(e,t){const r=mt.getOrCreateInstance(e,t);let{_config:a}=r;if(typeof t==="object"){a={...a,...t}}const n=typeof t==="string"?t:a.slide;if(typeof t==="number"){r.to(t)}else if(typeof n==="string"){if(typeof r[n]==="undefined"){throw new TypeError(`No method named "${n}"`)}r[n]()}else if(a.interval&&a.ride){r.pause();r.cycle()}}static jQueryInterface(e){return this.each(function(){mt.carouselInterface(this,e)})}static dataApiClickHandler(e){const t=u(this);if(!t||!t.classList.contains(Je)){return}const r={...we.getDataAttributes(t),...we.getDataAttributes(this)};const a=this.getAttribute("data-bs-slide-to");if(a){r.interval=false}mt.carouselInterface(t,r);if(a){mt.getInstance(t).to(a)}e.preventDefault()}}Z.on(document,Xe,dt,mt.dataApiClickHandler);Z.on(window,Ze,()=>{const r=h.find(vt);for(let e=0,t=r.length;e<t;e++){mt.carouselInterface(r[e],mt.getInstance(r[e]))}});S(mt);const gt="collapse";const yt="bs.collapse";const xt=`.${yt}`;const bt=".data-api";const _t={toggle:true,parent:""};const wt={toggle:"boolean",parent:"(string|element)"};const Tt=`show${xt}`;const kt=`shown${xt}`;const Mt=`hide${xt}`;const At=`hidden${xt}`;const St=`click${xt}${bt}`;const Et="show";const Lt="collapse";const Ct="collapsing";const Dt="collapsed";const Ot="width";const It="height";const Pt=".show, .collapsing";const Rt='[data-bs-toggle="collapse"]';class Nt extends Q{constructor(e,t){super(e);this._isTransitioning=false;this._config=this._getConfig(t);this._triggerArray=h.find(`${Rt}[href="#${this._element.id}"],`+`${Rt}[data-bs-target="#${this._element.id}"]`);const r=h.find(Rt);for(let e=0,t=r.length;e<t;e++){const a=r[e];const n=o(a);const i=h.find(n).filter(e=>e===this._element);if(n!==null&&i.length){this._selector=n;this._triggerArray.push(a)}}this._parent=this._config.parent?this._getParent():null;if(!this._config.parent){this._addAriaAndCollapsedClass(this._element,this._triggerArray)}if(this._config.toggle){this.toggle()}}static get Default(){return _t}static get NAME(){return gt}toggle(){if(this._element.classList.contains(Et)){this.hide()}else{this.show()}}show(){if(this._isTransitioning||this._element.classList.contains(Et)){return}let e;let t;if(this._parent){e=h.find(Pt,this._parent).filter(e=>{if(typeof this._config.parent==="string"){return e.getAttribute("data-bs-parent")===this._config.parent}return e.classList.contains(Lt)});if(e.length===0){e=null}}const r=h.findOne(this._selector);if(e){const l=e.find(e=>r!==e);t=l?Nt.getInstance(l):null;if(t&&t._isTransitioning){return}}const a=Z.trigger(this._element,Tt);if(a.defaultPrevented){return}if(e){e.forEach(e=>{if(r!==e){Nt.collapseInterface(e,"hide")}if(!t){J.set(e,yt,null)}})}const n=this._getDimension();this._element.classList.remove(Lt);this._element.classList.add(Ct);this._element.style[n]=0;if(this._triggerArray.length){this._triggerArray.forEach(e=>{e.classList.remove(Dt);e.setAttribute("aria-expanded",true)})}this.setTransitioning(true);const i=()=>{this._element.classList.remove(Ct);this._element.classList.add(Lt,Et);this._element.style[n]="";this.setTransitioning(false);Z.trigger(this._element,kt)};const o=n[0].toUpperCase()+n.slice(1);const s=`scroll${o}`;this._queueCallback(i,this._element,true);this._element.style[n]=`${this._element[s]}px`}hide(){if(this._isTransitioning||!this._element.classList.contains(Et)){return}const e=Z.trigger(this._element,Mt);if(e.defaultPrevented){return}const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`;w(this._element);this._element.classList.add(Ct);this._element.classList.remove(Lt,Et);const r=this._triggerArray.length;if(r>0){for(let e=0;e<r;e++){const n=this._triggerArray[e];const i=u(n);if(i&&!i.classList.contains(Et)){n.classList.add(Dt);n.setAttribute("aria-expanded",false)}}}this.setTransitioning(true);const a=()=>{this.setTransitioning(false);this._element.classList.remove(Ct);this._element.classList.add(Lt);Z.trigger(this._element,At)};this._element.style[t]="";this._queueCallback(a,this._element,true)}setTransitioning(e){this._isTransitioning=e}_getConfig(e){e={..._t,...e};e.toggle=Boolean(e.toggle);g(gt,e,wt);return e}_getDimension(){return this._element.classList.contains(Ot)?Ot:It}_getParent(){let{parent:e}=this._config;e=m(e);const t=`${Rt}[data-bs-parent="${e}"]`;h.find(t,e).forEach(e=>{const t=u(e);this._addAriaAndCollapsedClass(t,[e])});return e}_addAriaAndCollapsedClass(e,t){if(!e||!t.length){return}const r=e.classList.contains(Et);t.forEach(e=>{if(r){e.classList.remove(Dt)}else{e.classList.add(Dt)}e.setAttribute("aria-expanded",r)})}static collapseInterface(e,t){let r=Nt.getInstance(e);const a={..._t,...we.getDataAttributes(e),...typeof t==="object"&&t?t:{}};if(!r&&a.toggle&&typeof t==="string"&&/show|hide/.test(t)){a.toggle=false}if(!r){r=new Nt(e,a)}if(typeof t==="string"){if(typeof r[t]==="undefined"){throw new TypeError(`No method named "${t}"`)}r[t]()}}static jQueryInterface(e){return this.each(function(){Nt.collapseInterface(this,e)})}}Z.on(document,St,Rt,function(e){if(e.target.tagName==="A"||e.delegateTarget&&e.delegateTarget.tagName==="A"){e.preventDefault()}const a=we.getDataAttributes(this);const t=o(this);const r=h.find(t);r.forEach(e=>{const t=Nt.getInstance(e);let r;if(t){if(t._parent===null&&typeof a.parent==="string"){t._config.parent=a.parent;t._parent=t._getParent()}r="toggle"}else{r=a}Nt.collapseInterface(e,r)})});S(Nt);const zt="dropdown";const Ft="bs.dropdown";const jt=`.${Ft}`;const Ht=".data-api";const Bt="Escape";const qt="Space";const Ut="Tab";const Yt="ArrowUp";const Vt="ArrowDown";const Gt=2;const Wt=new RegExp(`${Yt}|${Vt}|${Bt}`);const $t=`hide${jt}`;const Zt=`hidden${jt}`;const Xt=`show${jt}`;const Jt=`shown${jt}`;const Kt=`click${jt}`;const Qt=`click${jt}${Ht}`;const er=`keydown${jt}${Ht}`;const tr=`keyup${jt}${Ht}`;const rr="show";const ar="dropup";const nr="dropend";const ir="dropstart";const or="navbar";const sr='[data-bs-toggle="dropdown"]';const lr=".dropdown-menu";const ur=".navbar-nav";const cr=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)";const fr=A()?"top-end":"top-start";const dr=A()?"top-start":"top-end";const vr=A()?"bottom-end":"bottom-start";const pr=A()?"bottom-start":"bottom-end";const hr=A()?"left-start":"right-start";const mr=A()?"right-start":"left-start";const gr={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:true};const yr={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class xr extends Q{constructor(e,t){super(e);this._popper=null;this._config=this._getConfig(t);this._menu=this._getMenuElement();this._inNavbar=this._detectNavbar();this._addEventListeners()}static get Default(){return gr}static get DefaultType(){return yr}static get NAME(){return zt}toggle(){if(x(this._element)){return}const e=this._element.classList.contains(rr);if(e){this.hide();return}this.show()}show(){if(x(this._element)||this._menu.classList.contains(rr)){return}const t=xr.getParentFromElement(this._element);const e={relatedTarget:this._element};const r=Z.trigger(this._element,Xt,e);if(r.defaultPrevented){return}if(this._inNavbar){we.setDataAttribute(this._menu,"popper","none")}else{if(typeof f==="undefined"){throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)")}let e=this._element;if(this._config.reference==="parent"){e=t}else if(p(this._config.reference)){e=m(this._config.reference)}else if(typeof this._config.reference==="object"){e=this._config.reference}const a=this._getPopperConfig();const n=a.modifiers.find(e=>e.name==="applyStyles"&&e.enabled===false);this._popper=f.createPopper(e,this._menu,a);if(n){we.setDataAttribute(this._menu,"popper","static")}}if("ontouchstart"in document.documentElement&&!t.closest(ur)){[].concat(...document.body.children).forEach(e=>Z.on(e,"mouseover",_))}this._element.focus();this._element.setAttribute("aria-expanded",true);this._menu.classList.toggle(rr);this._element.classList.toggle(rr);Z.trigger(this._element,Jt,e)}hide(){if(x(this._element)||!this._menu.classList.contains(rr)){return}const e={relatedTarget:this._element};this._completeHide(e)}dispose(){if(this._popper){this._popper.destroy()}super.dispose()}update(){this._inNavbar=this._detectNavbar();if(this._popper){this._popper.update()}}_addEventListeners(){Z.on(this._element,Kt,e=>{e.preventDefault();this.toggle()})}_completeHide(e){const t=Z.trigger(this._element,$t,e);if(t.defaultPrevented){return}if("ontouchstart"in document.documentElement){[].concat(...document.body.children).forEach(e=>Z.off(e,"mouseover",_))}if(this._popper){this._popper.destroy()}this._menu.classList.remove(rr);this._element.classList.remove(rr);this._element.setAttribute("aria-expanded","false");we.removeDataAttribute(this._menu,"popper");Z.trigger(this._element,Zt,e)}_getConfig(e){e={...this.constructor.Default,...we.getDataAttributes(this._element),...e};g(zt,e,this.constructor.DefaultType);if(typeof e.reference==="object"&&!p(e.reference)&&typeof e.reference.getBoundingClientRect!=="function"){throw new TypeError(`${zt.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`)}return e}_getMenuElement(){return h.next(this._element,lr)[0]}_getPlacement(){const e=this._element.parentNode;if(e.classList.contains(nr)){return hr}if(e.classList.contains(ir)){return mr}const t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";if(e.classList.contains(ar)){return t?dr:fr}return t?pr:vr}_detectNavbar(){return this._element.closest(`.${or}`)!==null}_getOffset(){const{offset:t}=this._config;if(typeof t==="string"){return t.split(",").map(e=>Number.parseInt(e,10))}if(typeof t==="function"){return e=>t(e,this._element)}return t}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};if(this._config.display==="static"){e.modifiers=[{name:"applyStyles",enabled:false}]}return{...e,...typeof this._config.popperConfig==="function"?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:t}){const r=h.find(cr,this._menu).filter(y);if(!r.length){return}C(r,t,e===Vt,!r.includes(t)).focus()}static dropdownInterface(e,t){const r=xr.getOrCreateInstance(e,t);if(typeof t==="string"){if(typeof r[t]==="undefined"){throw new TypeError(`No method named "${t}"`)}r[t]()}}static jQueryInterface(e){return this.each(function(){xr.dropdownInterface(this,e)})}static clearMenus(r){if(r&&(r.button===Gt||r.type==="keyup"&&r.key!==Ut)){return}const a=h.find(sr);for(let e=0,t=a.length;e<t;e++){const n=xr.getInstance(a[e]);if(!n||n._config.autoClose===false){continue}if(!n._element.classList.contains(rr)){continue}const i={relatedTarget:n._element};if(r){const o=r.composedPath();const s=o.includes(n._menu);if(o.includes(n._element)||n._config.autoClose==="inside"&&!s||n._config.autoClose==="outside"&&s){continue}if(n._menu.contains(r.target)&&(r.type==="keyup"&&r.key===Ut||/input|select|option|textarea|form/i.test(r.target.tagName))){continue}if(r.type==="click"){i.clickEvent=r}}n._completeHide(i)}}static getParentFromElement(e){return u(e)||e.parentNode}static dataApiKeydownHandler(e){if(/input|textarea/i.test(e.target.tagName)?e.key===qt||e.key!==Bt&&(e.key!==Vt&&e.key!==Yt||e.target.closest(lr)):!Wt.test(e.key)){return}const t=this.classList.contains(rr);if(!t&&e.key===Bt){return}e.preventDefault();e.stopPropagation();if(x(this)){return}const r=()=>this.matches(sr)?this:h.prev(this,sr)[0];if(e.key===Bt){r().focus();xr.clearMenus();return}if(e.key===Yt||e.key===Vt){if(!t){r().click()}xr.getInstance(r())._selectMenuItem(e);return}if(!t||e.key===qt){xr.clearMenus()}}}Z.on(document,er,sr,xr.dataApiKeydownHandler);Z.on(document,er,lr,xr.dataApiKeydownHandler);Z.on(document,Qt,xr.clearMenus);Z.on(document,tr,xr.clearMenus);Z.on(document,Qt,sr,function(e){e.preventDefault();xr.dropdownInterface(this)});S(xr);const br=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top";const _r=".sticky-top";class wr{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const t=this.getWidth();this._disableOverFlow();this._setElementAttributes(this._element,"paddingRight",e=>e+t);this._setElementAttributes(br,"paddingRight",e=>e+t);this._setElementAttributes(_r,"marginRight",e=>e-t)}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow");this._element.style.overflow="hidden"}_setElementAttributes(e,r,a){const n=this.getWidth();const t=e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+n){return}this._saveInitialAttribute(e,r);const t=window.getComputedStyle(e)[r];e.style[r]=`${a(Number.parseFloat(t))}px`};this._applyManipulationCallback(e,t)}reset(){this._resetElementAttributes(this._element,"overflow");this._resetElementAttributes(this._element,"paddingRight");this._resetElementAttributes(br,"paddingRight");this._resetElementAttributes(_r,"marginRight")}_saveInitialAttribute(e,t){const r=e.style[t];if(r){we.setDataAttribute(e,t,r)}}_resetElementAttributes(e,r){const t=e=>{const t=we.getDataAttribute(e,r);if(typeof t==="undefined"){e.style.removeProperty(r)}else{we.removeDataAttribute(e,r);e.style[r]=t}};this._applyManipulationCallback(e,t)}_applyManipulationCallback(e,t){if(p(e)){t(e)}else{h.find(e,this._element).forEach(t)}}isOverflowing(){return this.getWidth()>0}}const Tr={isVisible:true,isAnimated:false,rootElement:"body",clickCallback:null};const kr={isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"};const Mr="backdrop";const Ar="modal-backdrop";const Sr="fade";const Er="show";const Lr=`mousedown.bs.${Mr}`;class Cr{constructor(e){this._config=this._getConfig(e);this._isAppended=false;this._element=null}show(e){if(!this._config.isVisible){E(e);return}this._append();if(this._config.isAnimated){w(this._getElement())}this._getElement().classList.add(Er);this._emulateAnimation(()=>{E(e)})}hide(e){if(!this._config.isVisible){E(e);return}this._getElement().classList.remove(Er);this._emulateAnimation(()=>{this.dispose();E(e)})}_getElement(){if(!this._element){const e=document.createElement("div");e.className=Ar;if(this._config.isAnimated){e.classList.add(Sr)}this._element=e}return this._element}_getConfig(e){e={...Tr,...typeof e==="object"?e:{}};e.rootElement=m(e.rootElement);g(Mr,e,kr);return e}_append(){if(this._isAppended){return}this._config.rootElement.appendChild(this._getElement());Z.on(this._getElement(),Lr,()=>{E(this._config.clickCallback)});this._isAppended=true}dispose(){if(!this._isAppended){return}Z.off(this._element,Lr);this._element.remove();this._isAppended=false}_emulateAnimation(e){L(e,this._getElement(),this._config.isAnimated)}}const Dr="modal";const Or="bs.modal";const Ir=`.${Or}`;const Pr=".data-api";const Rr="Escape";const Nr={backdrop:true,keyboard:true,focus:true};const zr={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"};const Fr=`hide${Ir}`;const jr=`hidePrevented${Ir}`;const Hr=`hidden${Ir}`;const Br=`show${Ir}`;const qr=`shown${Ir}`;const Ur=`focusin${Ir}`;const Yr=`resize${Ir}`;const Vr=`click.dismiss${Ir}`;const Gr=`keydown.dismiss${Ir}`;const Wr=`mouseup.dismiss${Ir}`;const $r=`mousedown.dismiss${Ir}`;const Zr=`click${Ir}${Pr}`;const Xr="modal-open";const Jr="fade";const Kr="show";const Qr="modal-static";const ea=".modal-dialog";const ta=".modal-body";const ra='[data-bs-toggle="modal"]';const aa='[data-bs-dismiss="modal"]';class na extends Q{constructor(e,t){super(e);this._config=this._getConfig(t);this._dialog=h.findOne(ea,this._element);this._backdrop=this._initializeBackDrop();this._isShown=false;this._ignoreBackdropClick=false;this._isTransitioning=false;this._scrollBar=new wr}static get Default(){return Nr}static get NAME(){return Dr}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||this._isTransitioning){return}const t=Z.trigger(this._element,Br,{relatedTarget:e});if(t.defaultPrevented){return}this._isShown=true;if(this._isAnimated()){this._isTransitioning=true}this._scrollBar.hide();document.body.classList.add(Xr);this._adjustDialog();this._setEscapeEvent();this._setResizeEvent();Z.on(this._element,Vr,aa,e=>this.hide(e));Z.on(this._dialog,$r,()=>{Z.one(this._element,Wr,e=>{if(e.target===this._element){this._ignoreBackdropClick=true}})});this._showBackdrop(()=>this._showElement(e))}hide(e){if(e&&["A","AREA"].includes(e.target.tagName)){e.preventDefault()}if(!this._isShown||this._isTransitioning){return}const t=Z.trigger(this._element,Fr);if(t.defaultPrevented){return}this._isShown=false;const r=this._isAnimated();if(r){this._isTransitioning=true}this._setEscapeEvent();this._setResizeEvent();Z.off(document,Ur);this._element.classList.remove(Kr);Z.off(this._element,Vr);Z.off(this._dialog,$r);this._queueCallback(()=>this._hideModal(),this._element,r)}dispose(){[window,this._dialog].forEach(e=>Z.off(e,Ir));this._backdrop.dispose();super.dispose();Z.off(document,Ur)}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Cr({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_getConfig(e){e={...Nr,...we.getDataAttributes(this._element),...typeof e==="object"?e:{}};g(Dr,e,zr);return e}_showElement(e){const t=this._isAnimated();const r=h.findOne(ta,this._dialog);if(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE){document.body.appendChild(this._element)}this._element.style.display="block";this._element.removeAttribute("aria-hidden");this._element.setAttribute("aria-modal",true);this._element.setAttribute("role","dialog");this._element.scrollTop=0;if(r){r.scrollTop=0}if(t){w(this._element)}this._element.classList.add(Kr);if(this._config.focus){this._enforceFocus()}const a=()=>{if(this._config.focus){this._element.focus()}this._isTransitioning=false;Z.trigger(this._element,qr,{relatedTarget:e})};this._queueCallback(a,this._dialog,t)}_enforceFocus(){Z.off(document,Ur);Z.on(document,Ur,e=>{if(document!==e.target&&this._element!==e.target&&!this._element.contains(e.target)){this._element.focus()}})}_setEscapeEvent(){if(this._isShown){Z.on(this._element,Gr,e=>{if(this._config.keyboard&&e.key===Rr){e.preventDefault();this.hide()}else if(!this._config.keyboard&&e.key===Rr){this._triggerBackdropTransition()}})}else{Z.off(this._element,Gr)}}_setResizeEvent(){if(this._isShown){Z.on(window,Yr,()=>this._adjustDialog())}else{Z.off(window,Yr)}}_hideModal(){this._element.style.display="none";this._element.setAttribute("aria-hidden",true);this._element.removeAttribute("aria-modal");this._element.removeAttribute("role");this._isTransitioning=false;this._backdrop.hide(()=>{document.body.classList.remove(Xr);this._resetAdjustments();this._scrollBar.reset();Z.trigger(this._element,Hr)})}_showBackdrop(e){Z.on(this._element,Vr,e=>{if(this._ignoreBackdropClick){this._ignoreBackdropClick=false;return}if(e.target!==e.currentTarget){return}if(this._config.backdrop===true){this.hide()}else if(this._config.backdrop==="static"){this._triggerBackdropTransition()}});this._backdrop.show(e)}_isAnimated(){return this._element.classList.contains(Jr)}_triggerBackdropTransition(){const e=Z.trigger(this._element,jr);if(e.defaultPrevented){return}const{classList:t,scrollHeight:r,style:a}=this._element;const n=r>document.documentElement.clientHeight;if(!n&&a.overflowY==="hidden"||t.contains(Qr)){return}if(!n){a.overflowY="hidden"}t.add(Qr);this._queueCallback(()=>{t.remove(Qr);if(!n){this._queueCallback(()=>{a.overflowY=""},this._dialog)}},this._dialog);this._element.focus()}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight;const t=this._scrollBar.getWidth();const r=t>0;if(!r&&e&&!A()||r&&!e&&A()){this._element.style.paddingLeft=`${t}px`}if(r&&!e&&!A()||!r&&e&&A()){this._element.style.paddingRight=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="";this._element.style.paddingRight=""}static jQueryInterface(t,r){return this.each(function(){const e=na.getOrCreateInstance(this,t);if(typeof t!=="string"){return}if(typeof e[t]==="undefined"){throw new TypeError(`No method named "${t}"`)}e[t](r)})}}Z.on(document,Zr,ra,function(e){const t=u(this);if(["A","AREA"].includes(this.tagName)){e.preventDefault()}Z.one(t,Br,e=>{if(e.defaultPrevented){return}Z.one(t,Hr,()=>{if(y(this)){this.focus()}})});const r=na.getOrCreateInstance(t);r.toggle(this)});S(na);const ia="offcanvas";const oa="bs.offcanvas";const sa=`.${oa}`;const la=".data-api";const ua=`load${sa}${la}`;const ca="Escape";const fa={backdrop:true,keyboard:true,scroll:false};const da={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"};const va="show";const pa=".offcanvas.show";const ha=`show${sa}`;const ma=`shown${sa}`;const ga=`hide${sa}`;const ya=`hidden${sa}`;const xa=`focusin${sa}`;const ba=`click${sa}${la}`;const _a=`click.dismiss${sa}`;const wa=`keydown.dismiss${sa}`;const Ta='[data-bs-dismiss="offcanvas"]';const ka='[data-bs-toggle="offcanvas"]';class Ma extends Q{constructor(e,t){super(e);this._config=this._getConfig(t);this._isShown=false;this._backdrop=this._initializeBackDrop();this._addEventListeners()}static get NAME(){return ia}static get Default(){return fa}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown){return}const t=Z.trigger(this._element,ha,{relatedTarget:e});if(t.defaultPrevented){return}this._isShown=true;this._element.style.visibility="visible";this._backdrop.show();if(!this._config.scroll){(new wr).hide();this._enforceFocusOnElement(this._element)}this._element.removeAttribute("aria-hidden");this._element.setAttribute("aria-modal",true);this._element.setAttribute("role","dialog");this._element.classList.add(va);const r=()=>{Z.trigger(this._element,ma,{relatedTarget:e})};this._queueCallback(r,this._element,true)}hide(){if(!this._isShown){return}const e=Z.trigger(this._element,ga);if(e.defaultPrevented){return}Z.off(document,xa);this._element.blur();this._isShown=false;this._element.classList.remove(va);this._backdrop.hide();const t=()=>{this._element.setAttribute("aria-hidden",true);this._element.removeAttribute("aria-modal");this._element.removeAttribute("role");this._element.style.visibility="hidden";if(!this._config.scroll){(new wr).reset()}Z.trigger(this._element,ya)};this._queueCallback(t,this._element,true)}dispose(){this._backdrop.dispose();super.dispose();Z.off(document,xa)}_getConfig(e){e={...fa,...we.getDataAttributes(this._element),...typeof e==="object"?e:{}};g(ia,e,da);return e}_initializeBackDrop(){return new Cr({isVisible:this._config.backdrop,isAnimated:true,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_enforceFocusOnElement(t){Z.off(document,xa);Z.on(document,xa,e=>{if(document!==e.target&&t!==e.target&&!t.contains(e.target)){t.focus()}});t.focus()}_addEventListeners(){Z.on(this._element,_a,Ta,()=>this.hide());Z.on(this._element,wa,e=>{if(this._config.keyboard&&e.key===ca){this.hide()}})}static jQueryInterface(t){return this.each(function(){const e=Ma.getOrCreateInstance(this,t);if(typeof t!=="string"){return}if(e[t]===undefined||t.startsWith("_")||t==="constructor"){throw new TypeError(`No method named "${t}"`)}e[t](this)})}}Z.on(document,ba,ka,function(e){const t=u(this);if(["A","AREA"].includes(this.tagName)){e.preventDefault()}if(x(this)){return}Z.one(t,ya,()=>{if(y(this)){this.focus()}});const r=h.findOne(pa);if(r&&r!==t){Ma.getInstance(r).hide()}const a=Ma.getOrCreateInstance(t);a.toggle(this)});Z.on(window,ua,()=>h.find(pa).forEach(e=>Ma.getOrCreateInstance(e).show()));S(Ma);const Aa=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]);const Sa=/^aria-[\w-]*$/i;const Ea=/^(?:(?:https?|mailto|ftp|tel|file):|[^#&/:?]*(?:[#/?]|$))/i;const La=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;const Ca=(e,t)=>{const r=e.nodeName.toLowerCase();if(t.includes(r)){if(Aa.has(r)){return Boolean(Ea.test(e.nodeValue)||La.test(e.nodeValue))}return true}const a=t.filter(e=>e instanceof RegExp);for(let e=0,t=a.length;e<t;e++){if(a[e].test(r)){return true}}return false};const Da={"*":["class","dir","id","lang","role",Sa],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function Oa(e,r,t){if(!e.length){return e}if(t&&typeof t==="function"){return t(e)}const a=new window.DOMParser;const n=a.parseFromString(e,"text/html");const i=Object.keys(r);const o=[].concat(...n.body.querySelectorAll("*"));for(let e=0,t=o.length;e<t;e++){const s=o[e];const l=s.nodeName.toLowerCase();if(!i.includes(l)){s.remove();continue}const u=[].concat(...s.attributes);const c=[].concat(r["*"]||[],r[l]||[]);u.forEach(e=>{if(!Ca(e,c)){s.removeAttribute(e.nodeName)}})}return n.body.innerHTML}const Ia="tooltip";const Pa="bs.tooltip";const Ra=`.${Pa}`;const Na="bs-tooltip";const za=new RegExp(`(^|\\s)${Na}\\S+`,"g");const Fa=new Set(["sanitize","allowList","sanitizeFn"]);const ja={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"};const Ha={AUTO:"auto",TOP:"top",RIGHT:A()?"left":"right",BOTTOM:"bottom",LEFT:A()?"right":"left"};const Ba={animation:true,template:'<div class="tooltip" role="tooltip">'+'<div class="tooltip-arrow"></div>'+'<div class="tooltip-inner"></div>'+"</div>",trigger:"hover focus",title:"",delay:0,html:false,selector:false,placement:"top",offset:[0,0],container:false,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:true,sanitizeFn:null,allowList:Da,popperConfig:null};const qa={HIDE:`hide${Ra}`,HIDDEN:`hidden${Ra}`,SHOW:`show${Ra}`,SHOWN:`shown${Ra}`,INSERTED:`inserted${Ra}`,CLICK:`click${Ra}`,FOCUSIN:`focusin${Ra}`,FOCUSOUT:`focusout${Ra}`,MOUSEENTER:`mouseenter${Ra}`,MOUSELEAVE:`mouseleave${Ra}`};const Ua="fade";const Ya="modal";const Va="show";const Ga="show";const Wa="out";const $a=".tooltip-inner";const Za="hover";const Xa="focus";const Ja="click";const Ka="manual";class Qa extends Q{constructor(e,t){if(typeof f==="undefined"){throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)")}super(e);this._isEnabled=true;this._timeout=0;this._hoverState="";this._activeTrigger={};this._popper=null;this._config=this._getConfig(t);this.tip=null;this._setListeners()}static get Default(){return Ba}static get NAME(){return Ia}static get Event(){return qa}static get DefaultType(){return ja}enable(){this._isEnabled=true}disable(){this._isEnabled=false}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(e){if(!this._isEnabled){return}if(e){const t=this._initializeOnDelegatedTarget(e);t._activeTrigger.click=!t._activeTrigger.click;if(t._isWithActiveTrigger()){t._enter(null,t)}else{t._leave(null,t)}}else{if(this.getTipElement().classList.contains(Va)){this._leave(null,this);return}this._enter(null,this)}}dispose(){clearTimeout(this._timeout);Z.off(this._element.closest(`.${Ya}`),"hide.bs.modal",this._hideModalHandler);if(this.tip){this.tip.remove()}if(this._popper){this._popper.destroy()}super.dispose()}show(){if(this._element.style.display==="none"){throw new Error("Please use show on visible elements")}if(!(this.isWithContent()&&this._isEnabled)){return}const e=Z.trigger(this._element,this.constructor.Event.SHOW);const t=b(this._element);const r=t===null?this._element.ownerDocument.documentElement.contains(this._element):t.contains(this._element);if(e.defaultPrevented||!r){return}const a=this.getTipElement();const n=d(this.constructor.NAME);a.setAttribute("id",n);this._element.setAttribute("aria-describedby",n);this.setContent();if(this._config.animation){a.classList.add(Ua)}const i=typeof this._config.placement==="function"?this._config.placement.call(this,a,this._element):this._config.placement;const o=this._getAttachment(i);this._addAttachmentClass(o);const{container:s}=this._config;J.set(a,this.constructor.DATA_KEY,this);if(!this._element.ownerDocument.documentElement.contains(this.tip)){s.appendChild(a);Z.trigger(this._element,this.constructor.Event.INSERTED)}if(this._popper){this._popper.update()}else{this._popper=f.createPopper(this._element,a,this._getPopperConfig(o))}a.classList.add(Va);const l=typeof this._config.customClass==="function"?this._config.customClass():this._config.customClass;if(l){a.classList.add(...l.split(" "))}if("ontouchstart"in document.documentElement){[].concat(...document.body.children).forEach(e=>{Z.on(e,"mouseover",_)})}const u=()=>{const e=this._hoverState;this._hoverState=null;Z.trigger(this._element,this.constructor.Event.SHOWN);if(e===Wa){this._leave(null,this)}};const c=this.tip.classList.contains(Ua);this._queueCallback(u,this.tip,c)}hide(){if(!this._popper){return}const e=this.getTipElement();const t=()=>{if(this._isWithActiveTrigger()){return}if(this._hoverState!==Ga){e.remove()}this._cleanTipClass();this._element.removeAttribute("aria-describedby");Z.trigger(this._element,this.constructor.Event.HIDDEN);if(this._popper){this._popper.destroy();this._popper=null}};const r=Z.trigger(this._element,this.constructor.Event.HIDE);if(r.defaultPrevented){return}e.classList.remove(Va);if("ontouchstart"in document.documentElement){[].concat(...document.body.children).forEach(e=>Z.off(e,"mouseover",_))}this._activeTrigger[Ja]=false;this._activeTrigger[Xa]=false;this._activeTrigger[Za]=false;const a=this.tip.classList.contains(Ua);this._queueCallback(t,this.tip,a);this._hoverState=""}update(){if(this._popper!==null){this._popper.update()}}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip){return this.tip}const e=document.createElement("div");e.innerHTML=this._config.template;this.tip=e.children[0];return this.tip}setContent(){const e=this.getTipElement();this.setElementContent(h.findOne($a,e),this.getTitle());e.classList.remove(Ua,Va)}setElementContent(e,t){if(e===null){return}if(p(t)){t=m(t);if(this._config.html){if(t.parentNode!==e){e.innerHTML="";e.appendChild(t)}}else{e.textContent=t.textContent}return}if(this._config.html){if(this._config.sanitize){t=Oa(t,this._config.allowList,this._config.sanitizeFn)}e.innerHTML=t}else{e.textContent=t}}getTitle(){let e=this._element.getAttribute("data-bs-original-title");if(!e){e=typeof this._config.title==="function"?this._config.title.call(this._element):this._config.title}return e}updateAttachment(e){if(e==="right"){return"end"}if(e==="left"){return"start"}return e}_initializeOnDelegatedTarget(e,t){const r=this.constructor.DATA_KEY;t=t||J.get(e.delegateTarget,r);if(!t){t=new this.constructor(e.delegateTarget,this._getDelegateConfig());J.set(e.delegateTarget,r,t)}return t}_getOffset(){const{offset:t}=this._config;if(typeof t==="string"){return t.split(",").map(e=>Number.parseInt(e,10))}if(typeof t==="function"){return e=>t(e,this._element)}return t}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:true,phase:"afterWrite",fn:e=>this._handlePopperPlacementChange(e)}],onFirstUpdate:e=>{if(e.options.placement!==e.placement){this._handlePopperPlacementChange(e)}}};return{...t,...typeof this._config.popperConfig==="function"?this._config.popperConfig(t):this._config.popperConfig}}_addAttachmentClass(e){this.getTipElement().classList.add(`${Na}-${this.updateAttachment(e)}`)}_getAttachment(e){return Ha[e.toUpperCase()]}_setListeners(){const e=this._config.trigger.split(" ");e.forEach(e=>{if(e==="click"){Z.on(this._element,this.constructor.Event.CLICK,this._config.selector,e=>this.toggle(e))}else if(e!==Ka){const t=e===Za?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN;const r=e===Za?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;Z.on(this._element,t,this._config.selector,e=>this._enter(e));Z.on(this._element,r,this._config.selector,e=>this._leave(e))}});this._hideModalHandler=()=>{if(this._element){this.hide()}};Z.on(this._element.closest(`.${Ya}`),"hide.bs.modal",this._hideModalHandler);if(this._config.selector){this._config={...this._config,trigger:"manual",selector:""}}else{this._fixTitle()}}_fixTitle(){const e=this._element.getAttribute("title");const t=typeof this._element.getAttribute("data-bs-original-title");if(e||t!=="string"){this._element.setAttribute("data-bs-original-title",e||"");if(e&&!this._element.getAttribute("aria-label")&&!this._element.textContent){this._element.setAttribute("aria-label",e)}this._element.setAttribute("title","")}}_enter(e,t){t=this._initializeOnDelegatedTarget(e,t);if(e){t._activeTrigger[e.type==="focusin"?Xa:Za]=true}if(t.getTipElement().classList.contains(Va)||t._hoverState===Ga){t._hoverState=Ga;return}clearTimeout(t._timeout);t._hoverState=Ga;if(!t._config.delay||!t._config.delay.show){t.show();return}t._timeout=setTimeout(()=>{if(t._hoverState===Ga){t.show()}},t._config.delay.show)}_leave(e,t){t=this._initializeOnDelegatedTarget(e,t);if(e){t._activeTrigger[e.type==="focusout"?Xa:Za]=t._element.contains(e.relatedTarget)}if(t._isWithActiveTrigger()){return}clearTimeout(t._timeout);t._hoverState=Wa;if(!t._config.delay||!t._config.delay.hide){t.hide();return}t._timeout=setTimeout(()=>{if(t._hoverState===Wa){t.hide()}},t._config.delay.hide)}_isWithActiveTrigger(){for(const e in this._activeTrigger){if(this._activeTrigger[e]){return true}}return false}_getConfig(e){const t=we.getDataAttributes(this._element);Object.keys(t).forEach(e=>{if(Fa.has(e)){delete t[e]}});e={...this.constructor.Default,...t,...typeof e==="object"&&e?e:{}};e.container=e.container===false?document.body:m(e.container);if(typeof e.delay==="number"){e.delay={show:e.delay,hide:e.delay}}if(typeof e.title==="number"){e.title=e.title.toString()}if(typeof e.content==="number"){e.content=e.content.toString()}g(Ia,e,this.constructor.DefaultType);if(e.sanitize){e.template=Oa(e.template,e.allowList,e.sanitizeFn)}return e}_getDelegateConfig(){const e={};if(this._config){for(const t in this._config){if(this.constructor.Default[t]!==this._config[t]){e[t]=this._config[t]}}}return e}_cleanTipClass(){const t=this.getTipElement();const e=t.getAttribute("class").match(za);if(e!==null&&e.length>0){e.map(e=>e.trim()).forEach(e=>t.classList.remove(e))}}_handlePopperPlacementChange(e){const{state:t}=e;if(!t){return}this.tip=t.elements.popper;this._cleanTipClass();this._addAttachmentClass(this._getAttachment(t.placement))}static jQueryInterface(t){return this.each(function(){const e=Qa.getOrCreateInstance(this,t);if(typeof t==="string"){if(typeof e[t]==="undefined"){throw new TypeError(`No method named "${t}"`)}e[t]()}})}}S(Qa);const en="popover";const tn="bs.popover";const rn=`.${tn}`;const an="bs-popover";const nn=new RegExp(`(^|\\s)${an}\\S+`,"g");const on={...Qa.Default,placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip">'+'<div class="popover-arrow"></div>'+'<h3 class="popover-header"></h3>'+'<div class="popover-body"></div>'+"</div>"};const sn={...Qa.DefaultType,content:"(string|element|function)"};const ln={HIDE:`hide${rn}`,HIDDEN:`hidden${rn}`,SHOW:`show${rn}`,SHOWN:`shown${rn}`,INSERTED:`inserted${rn}`,CLICK:`click${rn}`,FOCUSIN:`focusin${rn}`,FOCUSOUT:`focusout${rn}`,MOUSEENTER:`mouseenter${rn}`,MOUSELEAVE:`mouseleave${rn}`};const un="fade";const cn="show";const fn=".popover-header";const dn=".popover-body";class vn extends Qa{static get Default(){return on}static get NAME(){return en}static get Event(){return ln}static get DefaultType(){return sn}isWithContent(){return this.getTitle()||this._getContent()}getTipElement(){if(this.tip){return this.tip}this.tip=super.getTipElement();if(!this.getTitle()){h.findOne(fn,this.tip).remove()}if(!this._getContent()){h.findOne(dn,this.tip).remove()}return this.tip}setContent(){const e=this.getTipElement();this.setElementContent(h.findOne(fn,e),this.getTitle());let t=this._getContent();if(typeof t==="function"){t=t.call(this._element)}this.setElementContent(h.findOne(dn,e),t);e.classList.remove(un,cn)}_addAttachmentClass(e){this.getTipElement().classList.add(`${an}-${this.updateAttachment(e)}`)}_getContent(){return this._element.getAttribute("data-bs-content")||this._config.content}_cleanTipClass(){const t=this.getTipElement();const e=t.getAttribute("class").match(nn);if(e!==null&&e.length>0){e.map(e=>e.trim()).forEach(e=>t.classList.remove(e))}}static jQueryInterface(t){return this.each(function(){const e=vn.getOrCreateInstance(this,t);if(typeof t==="string"){if(typeof e[t]==="undefined"){throw new TypeError(`No method named "${t}"`)}e[t]()}})}}S(vn);const pn="scrollspy";const hn="bs.scrollspy";const mn=`.${hn}`;const gn=".data-api";const yn={offset:10,method:"auto",target:""};const xn={offset:"number",method:"string",target:"(string|element)"};const bn=`activate${mn}`;const _n=`scroll${mn}`;const wn=`load${mn}${gn}`;const Tn="dropdown-item";const kn="active";const Mn='[data-bs-spy="scroll"]';const An=".nav, .list-group";const Sn=".nav-link";const En=".nav-item";const Ln=".list-group-item";const Cn=".dropdown";const Dn=".dropdown-toggle";const On="offset";const In="position";class Pn extends Q{constructor(e,t){super(e);this._scrollElement=this._element.tagName==="BODY"?window:this._element;this._config=this._getConfig(t);this._selector=`${this._config.target} ${Sn}, ${this._config.target} ${Ln}, ${this._config.target} .${Tn}`;this._offsets=[];this._targets=[];this._activeTarget=null;this._scrollHeight=0;Z.on(this._scrollElement,_n,()=>this._process());this.refresh();this._process()}static get Default(){return yn}static get NAME(){return pn}refresh(){const e=this._scrollElement===this._scrollElement.window?On:In;const n=this._config.method==="auto"?e:this._config.method;const i=n===In?this._getScrollTop():0;this._offsets=[];this._targets=[];this._scrollHeight=this._getScrollHeight();const t=h.find(this._selector);t.map(e=>{const t=o(e);const r=t?h.findOne(t):null;if(r){const a=r.getBoundingClientRect();if(a.width||a.height){return[we[n](r).top+i,t]}}return null}).filter(e=>e).sort((e,t)=>e[0]-t[0]).forEach(e=>{this._offsets.push(e[0]);this._targets.push(e[1])})}dispose(){Z.off(this._scrollElement,mn);super.dispose()}_getConfig(t){t={...yn,...we.getDataAttributes(this._element),...typeof t==="object"&&t?t:{}};if(typeof t.target!=="string"&&p(t.target)){let{id:e}=t.target;if(!e){e=d(pn);t.target.id=e}t.target=`#${e}`}g(pn,t,xn);return t}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const t=this._getScrollTop()+this._config.offset;const e=this._getScrollHeight();const r=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e){this.refresh()}if(t>=r){const a=this._targets[this._targets.length-1];if(this._activeTarget!==a){this._activate(a)}return}if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0){this._activeTarget=null;this._clear();return}for(let e=this._offsets.length;e--;){const n=this._activeTarget!==this._targets[e]&&t>=this._offsets[e]&&(typeof this._offsets[e+1]==="undefined"||t<this._offsets[e+1]);if(n){this._activate(this._targets[e])}}}_activate(t){this._activeTarget=t;this._clear();const e=this._selector.split(",").map(e=>`${e}[data-bs-target="${t}"],${e}[href="${t}"]`);const r=h.findOne(e.join(","));if(r.classList.contains(Tn)){h.findOne(Dn,r.closest(Cn)).classList.add(kn);r.classList.add(kn)}else{r.classList.add(kn);h.parents(r,An).forEach(e=>{h.prev(e,`${Sn}, ${Ln}`).forEach(e=>e.classList.add(kn));h.prev(e,En).forEach(e=>{h.children(e,Sn).forEach(e=>e.classList.add(kn))})})}Z.trigger(this._scrollElement,bn,{relatedTarget:t})}_clear(){h.find(this._selector).filter(e=>e.classList.contains(kn)).forEach(e=>e.classList.remove(kn))}static jQueryInterface(t){return this.each(function(){const e=Pn.getOrCreateInstance(this,t);if(typeof t!=="string"){return}if(typeof e[t]==="undefined"){throw new TypeError(`No method named "${t}"`)}e[t]()})}}Z.on(window,wn,()=>{h.find(Mn).forEach(e=>new Pn(e))});S(Pn);const Rn="tab";const Nn="bs.tab";const zn=`.${Nn}`;const Fn=".data-api";const jn=`hide${zn}`;const Hn=`hidden${zn}`;const Bn=`show${zn}`;const qn=`shown${zn}`;const Un=`click${zn}${Fn}`;const Yn="dropdown-menu";const Vn="active";const Gn="fade";const Wn="show";const $n=".dropdown";const Zn=".nav, .list-group";const Xn=".active";const Jn=":scope > li > .active";const Kn='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]';const Qn=".dropdown-toggle";const ei=":scope > .dropdown-menu .active";class ti extends Q{static get NAME(){return Rn}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(Vn)){return}let e;const t=u(this._element);const r=this._element.closest(Zn);if(r){const o=r.nodeName==="UL"||r.nodeName==="OL"?Jn:Xn;e=h.find(o,r);e=e[e.length-1]}const a=e?Z.trigger(e,jn,{relatedTarget:this._element}):null;const n=Z.trigger(this._element,Bn,{relatedTarget:e});if(n.defaultPrevented||a!==null&&a.defaultPrevented){return}this._activate(this._element,r);const i=()=>{Z.trigger(e,Hn,{relatedTarget:this._element});Z.trigger(this._element,qn,{relatedTarget:e})};if(t){this._activate(t,t.parentNode,i)}else{i()}}_activate(e,t,r){const a=t&&(t.nodeName==="UL"||t.nodeName==="OL")?h.find(Jn,t):h.children(t,Xn);const n=a[0];const i=r&&n&&n.classList.contains(Gn);const o=()=>this._transitionComplete(e,n,r);if(n&&i){n.classList.remove(Wn);this._queueCallback(o,e,true)}else{o()}}_transitionComplete(e,t,r){if(t){t.classList.remove(Vn);const n=h.findOne(ei,t.parentNode);if(n){n.classList.remove(Vn)}if(t.getAttribute("role")==="tab"){t.setAttribute("aria-selected",false)}}e.classList.add(Vn);if(e.getAttribute("role")==="tab"){e.setAttribute("aria-selected",true)}w(e);if(e.classList.contains(Gn)){e.classList.add(Wn)}let a=e.parentNode;if(a&&a.nodeName==="LI"){a=a.parentNode}if(a&&a.classList.contains(Yn)){const i=e.closest($n);if(i){h.find(Qn,i).forEach(e=>e.classList.add(Vn))}e.setAttribute("aria-expanded",true)}if(r){r()}}static jQueryInterface(t){return this.each(function(){const e=ti.getOrCreateInstance(this);if(typeof t==="string"){if(typeof e[t]==="undefined"){throw new TypeError(`No method named "${t}"`)}e[t]()}})}}Z.on(document,Un,Kn,function(e){if(["A","AREA"].includes(this.tagName)){e.preventDefault()}if(x(this)){return}const t=ti.getOrCreateInstance(this);t.show()});S(ti);const ri="toast";const ai="bs.toast";const ni=`.${ai}`;const ii=`click.dismiss${ni}`;const oi=`mouseover${ni}`;const si=`mouseout${ni}`;const li=`focusin${ni}`;const ui=`focusout${ni}`;const ci=`hide${ni}`;const fi=`hidden${ni}`;const di=`show${ni}`;const vi=`shown${ni}`;const pi="fade";const hi="hide";const mi="show";const gi="showing";const yi={animation:"boolean",autohide:"boolean",delay:"number"};const xi={animation:true,autohide:true,delay:5e3};const bi='[data-bs-dismiss="toast"]';class _i extends Q{constructor(e,t){super(e);this._config=this._getConfig(t);this._timeout=null;this._hasMouseInteraction=false;this._hasKeyboardInteraction=false;this._setListeners()}static get DefaultType(){return yi}static get Default(){return xi}static get NAME(){return ri}show(){const e=Z.trigger(this._element,di);if(e.defaultPrevented){return}this._clearTimeout();if(this._config.animation){this._element.classList.add(pi)}const t=()=>{this._element.classList.remove(gi);this._element.classList.add(mi);Z.trigger(this._element,vi);this._maybeScheduleHide()};this._element.classList.remove(hi);w(this._element);this._element.classList.add(gi);this._queueCallback(t,this._element,this._config.animation)}hide(){if(!this._element.classList.contains(mi)){return}const e=Z.trigger(this._element,ci);if(e.defaultPrevented){return}const t=()=>{this._element.classList.add(hi);Z.trigger(this._element,fi)};this._element.classList.remove(mi);this._queueCallback(t,this._element,this._config.animation)}dispose(){this._clearTimeout();if(this._element.classList.contains(mi)){this._element.classList.remove(mi)}super.dispose()}_getConfig(e){e={...xi,...we.getDataAttributes(this._element),...typeof e==="object"&&e?e:{}};g(ri,e,this.constructor.DefaultType);return e}_maybeScheduleHide(){if(!this._config.autohide){return}if(this._hasMouseInteraction||this._hasKeyboardInteraction){return}this._timeout=setTimeout(()=>{this.hide()},this._config.delay)}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t;break}if(t){this._clearTimeout();return}const r=e.relatedTarget;if(this._element===r||this._element.contains(r)){return}this._maybeScheduleHide()}_setListeners(){Z.on(this._element,ii,bi,()=>this.hide());Z.on(this._element,oi,e=>this._onInteraction(e,true));Z.on(this._element,si,e=>this._onInteraction(e,false));Z.on(this._element,li,e=>this._onInteraction(e,true));Z.on(this._element,ui,e=>this._onInteraction(e,false))}_clearTimeout(){clearTimeout(this._timeout);this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=_i.getOrCreateInstance(this,t);if(typeof t==="string"){if(typeof e[t]==="undefined"){throw new TypeError(`No method named "${t}"`)}e[t](this)}})}}S(_i);var wi={Alert:fe,Button:xe,Carousel:mt,Collapse:Nt,Dropdown:xr,Modal:na,Offcanvas:Ma,Popover:vn,ScrollSpy:Pn,Tab:ti,Toast:_i,Tooltip:Qa};return wi});(function(e,t){if(typeof define==="function"&&define.amd){define([],t)}else{e.htmx=t()}})(typeof self!=="undefined"?self:this,function(){return function(){"use strict";var htmx={onLoad:onLoadHelper,process:processNode,on:addEventListenerImpl,off:removeEventListenerImpl,trigger:triggerEvent,ajax:ajaxHelper,find:find,findAll:findAll,closest:closest,values:function(e,t){var r=getInputValues(e,t||"post");return r.values},remove:removeElement,addClass:addClassToElement,removeClass:removeClassFromElement,toggleClass:toggleClassOnElement,takeClass:takeClassForElement,defineExtension:defineExtension,removeExtension:removeExtension,logAll:logAll,logger:null,useTemplateFragments:false,config:{historyEnabled:true,historyCacheSize:10,refreshOnHistoryMiss:false,defaultSwapStyle:"innerHTML",defaultSwapDelay:0,defaultSettleDelay:20,includeIndicatorStyles:true,indicatorClass:"htmx-indicator",requestClass:"htmx-request",settlingClass:"htmx-settling",swappingClass:"htmx-swapping",allowEval:true,attributesToSettle:["class","style","width","height"],withCredentials:false,wsReconnectDelay:"full-jitter",disableSelector:"[hx-disable], [data-hx-disable]"},parseInterval:parseInterval,_:internalEval,createEventSource:function(e){return new EventSource(e,{withCredentials:true})},createWebSocket:function(e){return new WebSocket(e,[])}};var VERBS=["get","post","put","delete","patch"];var VERB_SELECTOR=VERBS.map(function(e){return"[hx-"+e+"], [data-hx-"+e+"]"}).join(", ");function parseInterval(e){if(e==undefined){return undefined}if(e.slice(-2)=="ms"){return parseFloat(e.slice(0,-2))||undefined}if(e.slice(-1)=="s"){return parseFloat(e.slice(0,-1))*1e3||undefined}return parseFloat(e)||undefined}function getRawAttribute(e,t){return e.getAttribute&&e.getAttribute(t)}function hasAttribute(e,t){return e.hasAttribute&&(e.hasAttribute(t)||e.hasAttribute("data-"+t))}function getAttributeValue(e,t){return getRawAttribute(e,t)||getRawAttribute(e,"data-"+t)}function parentElt(e){return e.parentElement}function getDocument(){return document}function getClosestMatch(e,t){if(t(e)){return e}else if(parentElt(e)){return getClosestMatch(parentElt(e),t)}else{return null}}function getClosestAttributeValue(e,t){var r=null;getClosestMatch(e,function(e){return r=getAttributeValue(e,t)});return r}function matches(e,t){var r=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector;return r&&r.call(e,t)}function getStartTag(e){var t=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i;var r=t.exec(e);if(r){return r[1].toLowerCase()}else{return""}}function parseHTML(e,t){var r=new DOMParser;var a=r.parseFromString(e,"text/html");var n=a.body;while(t>0){t--;n=n.firstChild}if(n==null){n=getDocument().createDocumentFragment()}return n}function makeFragment(e){if(htmx.config.useTemplateFragments){var t=parseHTML("<body><template>"+e+"</template></body>",0);return t.querySelector("template").content}else{var r=getStartTag(e);switch(r){case"thead":case"tbody":case"tfoot":case"colgroup":case"caption":return parseHTML("<table>"+e+"</table>",1);case"col":return parseHTML("<table><colgroup>"+e+"</colgroup></table>",2);case"tr":return parseHTML("<table><tbody>"+e+"</tbody></table>",2);case"td":case"th":return parseHTML("<table><tbody><tr>"+e+"</tr></tbody></table>",3);case"script":return parseHTML("<div>"+e+"</div>",1);default:return parseHTML(e,0)}}}function maybeCall(e){if(e){e()}}function isType(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function isFunction(e){return isType(e,"Function")}function isRawObject(e){return isType(e,"Object")}function getInternalData(e){var t="htmx-internal-data";var r=e[t];if(!r){r=e[t]={}}return r}function toArray(e){var t=[];if(e){for(var r=0;r<e.length;r++){t.push(e[r])}}return t}function forEach(e,t){if(e){for(var r=0;r<e.length;r++){t(e[r])}}}function isScrolledIntoView(e){var t=e.getBoundingClientRect();var r=t.top;var a=t.bottom;return r<window.innerHeight&&a>=0}function bodyContains(e){return getDocument().body.contains(e)}function splitOnWhitespace(e){return e.trim().split(/\s+/)}function mergeObjects(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}return e}function parseJSON(e){try{return JSON.parse(e)}catch(e){logError(e);return null}}function internalEval(str){return maybeEval(getDocument().body,function(){return eval(str)})}function onLoadHelper(t){var e=htmx.on("htmx:load",function(e){t(e.detail.elt)});return e}function logAll(){htmx.logger=function(e,t,r){if(console){console.log(t,e,r)}}}function find(e,t){if(t){return e.querySelector(t)}else{return find(getDocument(),e)}}function findAll(e,t){if(t){return e.querySelectorAll(t)}else{return findAll(getDocument(),e)}}function removeElement(e,t){e=resolveTarget(e);if(t){setTimeout(function(){removeElement(e)},t)}else{e.parentElement.removeChild(e)}}function addClassToElement(e,t,r){e=resolveTarget(e);if(r){setTimeout(function(){addClassToElement(e,t)},r)}else{e.classList.add(t)}}function removeClassFromElement(e,t,r){e=resolveTarget(e);if(r){setTimeout(function(){removeClassFromElement(e,t)},r)}else{e.classList.remove(t)}}function toggleClassOnElement(e,t){e=resolveTarget(e);e.classList.toggle(t)}function takeClassForElement(e,t){e=resolveTarget(e);forEach(e.parentElement.children,function(e){removeClassFromElement(e,t)});addClassToElement(e,t)}function closest(e,t){e=resolveTarget(e);if(e.closest){return e.closest(t)}else{do{if(e==null||matches(e,t)){return e}}while(e=e&&parentElt(e))}}function querySelectorAllExt(e,t){if(t.indexOf("closest ")===0){return[closest(e,t.substr(8))]}else if(t.indexOf("find ")===0){return[find(e,t.substr(5))]}else{return getDocument().querySelectorAll(t)}}function querySelectorExt(e,t){return querySelectorAllExt(e,t)[0]}function resolveTarget(e){if(isType(e,"String")){return find(e)}else{return e}}function processEventArgs(e,t,r){if(isFunction(t)){return{target:getDocument().body,event:e,listener:t}}else{return{target:resolveTarget(e),event:t,listener:r}}}function addEventListenerImpl(t,r,a){ready(function(){var e=processEventArgs(t,r,a);e.target.addEventListener(e.event,e.listener)});var e=isFunction(r);return e?r:a}function removeEventListenerImpl(t,r,a){ready(function(){var e=processEventArgs(t,r,a);e.target.removeEventListener(e.event,e.listener)});return isFunction(r)?r:a}function getTarget(e){var t=getClosestMatch(e,function(e){return getAttributeValue(e,"hx-target")!==null});if(t){var r=getAttributeValue(t,"hx-target");if(r==="this"){return t}else{return querySelectorExt(e,r)}}else{var a=getInternalData(e);if(a.boosted){return getDocument().body}else{return e}}}function shouldSettleAttribute(e){var t=htmx.config.attributesToSettle;for(var r=0;r<t.length;r++){if(e===t[r]){return true}}return false}function cloneAttributes(t,r){forEach(t.attributes,function(e){if(!r.hasAttribute(e.name)&&shouldSettleAttribute(e.name)){t.removeAttribute(e.name)}});forEach(r.attributes,function(e){if(shouldSettleAttribute(e.name)){t.setAttribute(e.name,e.value)}})}function isInlineSwap(e,t){var r=getExtensions(t);for(var a=0;a<r.length;a++){var n=r[a];try{if(n.isInlineSwap(e)){return true}}catch(e){logError(e)}}return e==="outerHTML"}function oobSwap(e,t,r){var a="#"+t.id;var n="outerHTML";if(e==="true"){}else if(e.indexOf(":")>0){n=e.substr(0,e.indexOf(":"));a=e.substr(e.indexOf(":")+1,e.length)}else{n=e}var i=getDocument().querySelector(a);if(i){var o;o=getDocument().createDocumentFragment();o.appendChild(t);if(!isInlineSwap(n,i)){o=t}swap(n,i,i,o,r)}else{t.parentNode.removeChild(t);triggerErrorEvent(getDocument().body,"htmx:oobErrorNoTarget",{content:t})}return e}function handleOutOfBandSwaps(e,r){forEach(findAll(e,"[hx-swap-oob], [data-hx-swap-oob]"),function(e){var t=getAttributeValue(e,"hx-swap-oob");if(t!=null){oobSwap(t,e,r)}})}function handlePreservedElements(e){forEach(findAll(e,"[hx-preserve], [data-hx-preserve]"),function(e){var t=getAttributeValue(e,"id");var r=getDocument().getElementById(t);if(r!=null){e.parentNode.replaceChild(r,e)}})}function handleAttributes(a,e,n){forEach(e.querySelectorAll("[id]"),function(e){if(e.id&&e.id.length>0){var t=a.querySelector(e.tagName+"[id='"+e.id+"']");if(t&&t!==a){var r=e.cloneNode();cloneAttributes(e,t);n.tasks.push(function(){cloneAttributes(e,r)})}}})}function makeAjaxLoadTask(e){return function(){processNode(e);processScripts(e);processFocus(e);triggerEvent(e,"htmx:load")}}function processFocus(e){var t="[autofocus]";var r=matches(e,t)?e:e.querySelector(t);if(r!=null){r.focus()}}function insertNodesBefore(e,t,r,a){handleAttributes(e,r,a);while(r.childNodes.length>0){var n=r.firstChild;e.insertBefore(n,t);if(n.nodeType!==Node.TEXT_NODE&&n.nodeType!==Node.COMMENT_NODE){a.tasks.push(makeAjaxLoadTask(n))}}}function cleanUpElement(t){var e=getInternalData(t);if(e.webSocket){e.webSocket.close()}if(e.sseEventSource){e.sseEventSource.close()}if(e.listenerInfos){forEach(e.listenerInfos,function(e){if(t!==e.on){e.on.removeEventListener(e.trigger,e.listener)}})}if(t.children){forEach(t.children,function(e){cleanUpElement(e)})}}function swapOuterHTML(e,t,r){if(e.tagName==="BODY"){return swapInnerHTML(e,t,r)}else{var a=e.previousSibling;insertNodesBefore(parentElt(e),e,t,r);if(a==null){var n=parentElt(e).firstChild}else{var n=a.nextSibling}getInternalData(e).replacedWith=n;r.elts=[];while(n&&n!==e){if(n.nodeType===Node.ELEMENT_NODE){r.elts.push(n)}n=n.nextElementSibling}cleanUpElement(e);parentElt(e).removeChild(e)}}function swapAfterBegin(e,t,r){return insertNodesBefore(e,e.firstChild,t,r)}function swapBeforeBegin(e,t,r){return insertNodesBefore(parentElt(e),e,t,r)}function swapBeforeEnd(e,t,r){return insertNodesBefore(e,null,t,r)}function swapAfterEnd(e,t,r){return insertNodesBefore(parentElt(e),e.nextSibling,t,r)}function swapInnerHTML(e,t,r){var a=e.firstChild;insertNodesBefore(e,a,t,r);if(a){while(a.nextSibling){cleanUpElement(a.nextSibling);e.removeChild(a.nextSibling)}cleanUpElement(a);e.removeChild(a)}}function maybeSelectFromResponse(e,t){var r=getClosestAttributeValue(e,"hx-select");if(r){var a=getDocument().createDocumentFragment();forEach(t.querySelectorAll(r),function(e){a.appendChild(e)});t=a}return t}function swap(e,t,r,a,n){switch(e){case"none":return;case"outerHTML":swapOuterHTML(r,a,n);return;case"afterbegin":swapAfterBegin(r,a,n);return;case"beforebegin":swapBeforeBegin(r,a,n);return;case"beforeend":swapBeforeEnd(r,a,n);return;case"afterend":swapAfterEnd(r,a,n);return;default:var i=getExtensions(t);for(var o=0;o<i.length;o++){var s=i[o];try{var l=s.handleSwap(e,r,a,n);if(l){if(typeof l.length!=="undefined"){for(var u=0;u<l.length;u++){var c=l[u];if(c.nodeType!==Node.TEXT_NODE&&c.nodeType!==Node.COMMENT_NODE){n.tasks.push(makeAjaxLoadTask(c))}}}return}}catch(e){logError(e)}}swapInnerHTML(r,a,n)}}var TITLE_FINDER=/<title>([\s\S]+?)<\/title>/im;function findTitle(e){if(e.indexOf("<title>")>-1&&(e.indexOf("<svg>")==-1||e.indexOf("<title>")<e.indexOf("<svg>"))){var t=TITLE_FINDER.exec(e);if(t){return t[1]}}}function selectAndSwap(e,t,r,a,n){var i=findTitle(a);if(i){var o=find("title");if(o){o.innerHTML=i}else{window.document.title=i}}var s=makeFragment(a);if(s){handleOutOfBandSwaps(s,n);s=maybeSelectFromResponse(r,s);handlePreservedElements(s);return swap(e,r,t,s,n)}}function handleTrigger(e,t,r){var a=e.getResponseHeader(t);if(a.indexOf("{")===0){var n=parseJSON(a);for(var i in n){if(n.hasOwnProperty(i)){var o=n[i];if(!isRawObject(o)){o={value:o}}triggerEvent(r,i,o)}}}else{triggerEvent(r,a,[])}}var WHITESPACE=/\s/;var WHITESPACE_OR_COMMA=/[\s,]/;var SYMBOL_START=/[_$a-zA-Z]/;var SYMBOL_CONT=/[_$a-zA-Z0-9]/;var STRINGISH_START=['"',"'","/"];var NOT_WHITESPACE=/[^\s]/;function tokenizeString(e){var t=[];var r=0;while(r<e.length){if(SYMBOL_START.exec(e.charAt(r))){var a=r;while(SYMBOL_CONT.exec(e.charAt(r+1))){r++}t.push(e.substr(a,r-a+1))}else if(STRINGISH_START.indexOf(e.charAt(r))!==-1){var n=e.charAt(r);var a=r;r++;while(r<e.length&&e.charAt(r)!==n){if(e.charAt(r)==="\\"){r++}r++}t.push(e.substr(a,r-a+1))}else{var i=e.charAt(r);t.push(i)}r++}return t}function isPossibleRelativeReference(e,t,r){return SYMBOL_START.exec(e.charAt(0))&&e!=="true"&&e!=="false"&&e!=="this"&&e!==r&&t!=="."}function maybeGenerateConditional(e,t,r){if(t[0]==="["){t.shift();var a=1;var n=" return (function("+r+"){ return (";var i=null;while(t.length>0){var o=t[0];if(o==="]"){a--;if(a===0){if(i===null){n=n+"true"}t.shift();n+=")})";try{var s=maybeEval(e,function(){return Function(n)()},function(){return true});s.source=n;return s}catch(e){triggerErrorEvent(getDocument().body,"htmx:syntax:error",{error:e,source:n});return null}}}else if(o==="["){a++}if(isPossibleRelativeReference(o,i,r)){n+="(("+r+"."+o+") ? ("+r+"."+o+") : (window."+o+"))"}else{n=n+o}i=t.shift()}}}function consumeUntil(e,t){var r="";while(e.length>0&&!e[0].match(t)){r+=e.shift()}return r}var INPUT_SELECTOR="input, textarea, select";function getTriggerSpecs(e){var t=getAttributeValue(e,"hx-trigger");var r=[];if(t){var a=tokenizeString(t);do{consumeUntil(a,NOT_WHITESPACE);var n=a.length;var i=consumeUntil(a,/[,\[\s]/);if(i!==""){if(i==="every"){var o={trigger:"every"};consumeUntil(a,NOT_WHITESPACE);o.pollInterval=parseInterval(consumeUntil(a,WHITESPACE));r.push(o)}else if(i.indexOf("sse:")===0){r.push({trigger:"sse",sseEvent:i.substr(4)})}else{var s={trigger:i};var l=maybeGenerateConditional(e,a,"event");if(l){s.eventFilter=l}while(a.length>0&&a[0]!==","){consumeUntil(a,NOT_WHITESPACE);var u=a.shift();if(u==="changed"){s.changed=true}else if(u==="once"){s.once=true}else if(u==="consume"){s.consume=true}else if(u==="delay"&&a[0]===":"){a.shift();s.delay=parseInterval(consumeUntil(a,WHITESPACE_OR_COMMA))}else if(u==="from"&&a[0]===":"){a.shift();s.from=consumeUntil(a,WHITESPACE_OR_COMMA)}else if(u==="target"&&a[0]===":"){a.shift();s.target=consumeUntil(a,WHITESPACE_OR_COMMA)}else if(u==="throttle"&&a[0]===":"){a.shift();s.throttle=parseInterval(consumeUntil(a,WHITESPACE_OR_COMMA))}else if(u==="queue"&&a[0]===":"){a.shift();s.queue=consumeUntil(a,WHITESPACE_OR_COMMA)}else if((u==="root"||u==="threshold")&&a[0]===":"){a.shift();s[u]=consumeUntil(a,WHITESPACE_OR_COMMA)}else{triggerErrorEvent(e,"htmx:syntax:error",{token:a.shift()})}}r.push(s)}}if(a.length===n){triggerErrorEvent(e,"htmx:syntax:error",{token:a.shift()})}consumeUntil(a,NOT_WHITESPACE)}while(a[0]===","&&a.shift())}if(r.length>0){return r}else if(matches(e,"form")){return[{trigger:"submit"}]}else if(matches(e,INPUT_SELECTOR)){return[{trigger:"change"}]}else{return[{trigger:"click"}]}}function cancelPolling(e){getInternalData(e).cancelled=true}function processPolling(e,t,r,a){var n=getInternalData(e);n.timeout=setTimeout(function(){if(bodyContains(e)&&n.cancelled!==true){issueAjaxRequest(t,r,e);processPolling(e,t,getAttributeValue(e,"hx-"+t),a)}},a)}function isLocalLink(e){return location.hostname===e.hostname&&getRawAttribute(e,"href")&&getRawAttribute(e,"href").indexOf("#")!==0}function boostElement(t,r,e){if(t.tagName==="A"&&isLocalLink(t)||t.tagName==="FORM"){r.boosted=true;var a,n;if(t.tagName==="A"){a="get";n=getRawAttribute(t,"href");r.pushURL=true}else{var i=getRawAttribute(t,"method");a=i?i.toLowerCase():"get";if(a==="get"){r.pushURL=true}n=getRawAttribute(t,"action")}e.forEach(function(e){addEventListener(t,a,n,r,e,true)})}}function shouldCancel(e){return e.tagName==="FORM"||matches(e,'input[type="submit"], button')&&closest(e,"form")!==null||e.tagName==="A"&&e.href&&(e.getAttribute("href")==="#"||e.getAttribute("href").indexOf("#")!==0)}function ignoreBoostedAnchorCtrlClick(e,t){return getInternalData(e).boosted&&e.tagName==="A"&&t.type==="click"&&(t.ctrlKey||t.metaKey)}function maybeFilterEvent(e,t){var r=e.eventFilter;if(r){try{return r(t)!==true}catch(e){triggerErrorEvent(getDocument().body,"htmx:eventFilter:error",{error:e,source:r.source});return true}}return false}function addEventListener(a,n,i,e,o,s){var l=a;if(o.from){l=find(o.from)}var u=function(e){if(!bodyContains(a)){l.removeEventListener(o.trigger,u);return}if(ignoreBoostedAnchorCtrlClick(a,e)){return}if(s||shouldCancel(a)){e.preventDefault()}if(maybeFilterEvent(o,e)){return}var t=getInternalData(e);t.triggerSpec=o;if(t.handledFor==null){t.handledFor=[]}var r=getInternalData(a);if(t.handledFor.indexOf(a)<0){t.handledFor.push(a);if(o.consume){e.stopPropagation()}if(o.target&&e.target){if(!matches(e.target,o.target)){return}}if(o.once){if(r.triggeredOnce){return}else{r.triggeredOnce=true}}if(o.changed){if(r.lastValue===a.value){return}else{r.lastValue=a.value}}if(r.delayed){clearTimeout(r.delayed)}if(r.throttle){return}if(o.throttle){if(!r.throttle){issueAjaxRequest(n,i,a,e);r.throttle=setTimeout(function(){r.throttle=null},o.throttle)}}else if(o.delay){r.delayed=setTimeout(function(){issueAjaxRequest(n,i,a,e)},o.delay)}else{issueAjaxRequest(n,i,a,e)}}};if(e.listenerInfos==null){e.listenerInfos=[]}e.listenerInfos.push({trigger:o.trigger,listener:u,on:l});l.addEventListener(o.trigger,u)}var windowIsScrolling=false;var scrollHandler=null;function initScrollHandler(){if(!scrollHandler){scrollHandler=function(){windowIsScrolling=true};window.addEventListener("scroll",scrollHandler);setInterval(function(){if(windowIsScrolling){windowIsScrolling=false;forEach(getDocument().querySelectorAll("[hx-trigger='revealed'],[data-hx-trigger='revealed']"),function(e){maybeReveal(e)})}},200)}}function maybeReveal(e){var t=getInternalData(e);if(!t.revealed&&isScrolledIntoView(e)){t.revealed=true;if(t.initialized){issueAjaxRequest(t.verb,t.path,e)}else{e.addEventListener("htmx:afterProcessNode",function(){issueAjaxRequest(t.verb,t.path,e)},{once:true})}}}function processWebSocketInfo(e,t,r){var a=splitOnWhitespace(r);for(var n=0;n<a.length;n++){var i=a[n].split(/:(.+)/);if(i[0]==="connect"){ensureWebSocket(e,i[1],0)}if(i[0]==="send"){processWebSocketSend(e)}}}function ensureWebSocket(s,r,a){if(!bodyContains(s)){return}if(r.indexOf("/")==0){var e=location.hostname+(location.port?":"+location.port:"");if(location.protocol=="https:"){r="wss://"+e+r}else if(location.protocol=="http:"){r="ws://"+e+r}}var t=htmx.createWebSocket(r);t.onerror=function(e){triggerErrorEvent(s,"htmx:wsError",{error:e,socket:t});maybeCloseWebSocketSource(s)};t.onclose=function(e){if([1006,1012,1013].includes(e.code)){var t=getWebSocketReconnectDelay(a);setTimeout(function(){ensureWebSocket(s,r,a+1)},t)}};t.onopen=function(e){a=0};getInternalData(s).webSocket=t;t.addEventListener("message",function(e){if(maybeCloseWebSocketSource(s)){return}var t=e.data;withExtensions(s,function(e){t=e.transformResponse(t,null,s)});var r=makeSettleInfo(s);var a=makeFragment(t);var n=toArray(a.children);for(var i=0;i<n.length;i++){var o=n[i];oobSwap(getAttributeValue(o,"hx-swap-oob")||"true",o,r)}settleImmediately(r.tasks)})}function maybeCloseWebSocketSource(e){if(!bodyContains(e)){getInternalData(e).webSocket.close();return true}}function processWebSocketSend(u){var c=getClosestMatch(u,function(e){return getInternalData(e).webSocket!=null});if(c){u.addEventListener(getTriggerSpecs(u)[0].trigger,function(e){var t=getInternalData(c).webSocket;var r=getHeaders(u,c);var a=getInputValues(u,"post");var n=a.errors;var i=a.values;var o=getExpressionVars(u);var s=mergeObjects(i,o);var l=filterValues(s,u);l["HEADERS"]=r;if(n&&n.length>0){triggerEvent(u,"htmx:validation:halted",n);return}t.send(JSON.stringify(l));if(shouldCancel(u)){e.preventDefault()}})}else{triggerErrorEvent(u,"htmx:noWebSocketSourceError")}}function getWebSocketReconnectDelay(e){var t=htmx.config.wsReconnectDelay;if(typeof t==="function"){return t(e)}if(t==="full-jitter"){var r=Math.min(e,6);var a=1e3*Math.pow(2,r);return a*Math.random()}logError('htmx.config.wsReconnectDelay must either be a function or the string "full-jitter"')}function processSSEInfo(e,t,r){var a=splitOnWhitespace(r);for(var n=0;n<a.length;n++){var i=a[n].split(/:(.+)/);if(i[0]==="connect"){processSSESource(e,i[1])}if(i[0]==="swap"){processSSESwap(e,i[1])}}}function processSSESource(t,e){var r=htmx.createEventSource(e);r.onerror=function(e){triggerErrorEvent(t,"htmx:sseError",{error:e,source:r});maybeCloseSSESource(t)};getInternalData(t).sseEventSource=r}function processSSESwap(i,o){var s=getClosestMatch(i,hasEventSource);if(s){var l=getInternalData(s).sseEventSource;var u=function(e){if(maybeCloseSSESource(s)){l.removeEventListener(o,u);return}var t=e.data;withExtensions(i,function(e){t=e.transformResponse(t,null,i)});var r=getSwapSpecification(i);var a=getTarget(i);var n=makeSettleInfo(i);selectAndSwap(r.swapStyle,i,a,t,n);settleImmediately(n.tasks);triggerEvent(i,"htmx:sseMessage",e)};getInternalData(i).sseListener=u;l.addEventListener(o,u)}else{triggerErrorEvent(i,"htmx:noSSESourceError")}}function processSSETrigger(e,t,r,a){var n=getClosestMatch(e,hasEventSource);if(n){var i=getInternalData(n).sseEventSource;var o=function(){if(!maybeCloseSSESource(n)){if(bodyContains(e)){issueAjaxRequest(t,r,e)}else{i.removeEventListener(a,o)}}};getInternalData(e).sseListener=o;i.addEventListener(a,o)}else{triggerErrorEvent(e,"htmx:noSSESourceError")}}function maybeCloseSSESource(e){if(!bodyContains(e)){getInternalData(e).sseEventSource.close();return true}}function hasEventSource(e){return getInternalData(e).sseEventSource!=null}function loadImmediately(e,t,r,a,n){var i=function(){if(!a.loaded){a.loaded=true;issueAjaxRequest(t,r,e)}};if(n){setTimeout(i,n)}else{i()}}function processVerbs(i,o,e){var t=false;forEach(VERBS,function(a){if(hasAttribute(i,"hx-"+a)){var n=getAttributeValue(i,"hx-"+a);t=true;o.path=n;o.verb=a;e.forEach(function(e){if(e.sseEvent){processSSETrigger(i,a,n,e.sseEvent)}else if(e.trigger==="revealed"){initScrollHandler();maybeReveal(i)}else if(e.trigger==="intersect"){var t={};if(e.root){t.root=querySelectorExt(e.root)}if(e.threshold){t.threshold=parseFloat(e.threshold)}var r=new IntersectionObserver(function(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.isIntersecting){triggerEvent(i,"intersect");break}}},t);r.observe(i);addEventListener(i,a,n,o,e)}else if(e.trigger==="load"){loadImmediately(i,a,n,o,e.delay)}else if(e.pollInterval){o.polling=true;processPolling(i,a,n,e.pollInterval)}else{addEventListener(i,a,n,o,e)}})}});return t}function evalScript(e){if(e.type==="text/javascript"||e.type===""){try{maybeEval(e,function(){(1,eval)(e.innerText)})}catch(e){logError(e)}}}function processScripts(e){if(matches(e,"script")){evalScript(e)}forEach(findAll(e,"script"),function(e){evalScript(e)})}function isBoosted(){return document.querySelector("[hx-boost], [data-hx-boost]")}function findElementsToProcess(e){if(e.querySelectorAll){var t=isBoosted()?", a, form":"";var r=e.querySelectorAll(VERB_SELECTOR+t+", [hx-sse], [data-hx-sse], [hx-ws],"+" [data-hx-ws]");return r}else{return[]}}function initNode(e){if(e.closest&&e.closest(htmx.config.disableSelector)){return}var t=getInternalData(e);if(!t.initialized){t.initialized=true;triggerEvent(e,"htmx:beforeProcessNode");if(e.value){t.lastValue=e.value}var r=getTriggerSpecs(e);var a=processVerbs(e,t,r);if(!a&&getClosestAttributeValue(e,"hx-boost")==="true"){boostElement(e,t,r)}var n=getAttributeValue(e,"hx-sse");if(n){processSSEInfo(e,t,n)}var i=getAttributeValue(e,"hx-ws");if(i){processWebSocketInfo(e,t,i)}triggerEvent(e,"htmx:afterProcessNode")}}function processNode(e){e=resolveTarget(e);initNode(e);forEach(findElementsToProcess(e),function(e){initNode(e)})}function kebabEventName(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function makeEvent(e,t){var r;if(window.CustomEvent&&typeof window.CustomEvent==="function"){r=new CustomEvent(e,{bubbles:true,cancelable:true,detail:t})}else{r=getDocument().createEvent("CustomEvent");r.initCustomEvent(e,true,true,t)}return r}function triggerErrorEvent(e,t,r){triggerEvent(e,t,mergeObjects({error:t},r))}function ignoreEventForLogging(e){return e==="htmx:afterProcessNode"}function withExtensions(e,t){forEach(getExtensions(e),function(e){try{t(e)}catch(e){logError(e)}})}function logError(e){if(console.error){console.error(e)}else if(console.log){console.log("ERROR: ",e)}}function triggerEvent(e,t,r){e=resolveTarget(e);if(r==null){r={}}r["elt"]=e;var a=makeEvent(t,r);if(htmx.logger&&!ignoreEventForLogging(t)){htmx.logger(e,t,r)}if(r.error){logError(r.error);triggerEvent(e,"htmx:error",{errorInfo:r})}var n=e.dispatchEvent(a);var i=kebabEventName(t);if(n&&i!==t){var o=makeEvent(i,a.detail);n=n&&e.dispatchEvent(o)}withExtensions(e,function(e){n=n&&e.onEvent(t,a)!==false});return n}var currentPathForHistory=null;function getHistoryElement(){var e=getDocument().querySelector("[hx-history-elt],[data-hx-history-elt]");return e||getDocument().body}function saveToHistoryCache(e,t,r,a){var n=parseJSON(localStorage.getItem("htmx-history-cache"))||[];for(var i=0;i<n.length;i++){if(n[i].url===e){n.splice(i,1);break}}n.push({url:e,content:t,title:r,scroll:a});while(n.length>htmx.config.historyCacheSize){n.shift()}while(n.length>0){try{localStorage.setItem("htmx-history-cache",JSON.stringify(n));break}catch(e){triggerErrorEvent(getDocument().body,"htmx:historyCacheError",{cause:e,cache:n});n.shift()}}}function getCachedHistory(e){var t=parseJSON(localStorage.getItem("htmx-history-cache"))||[];for(var r=0;r<t.length;r++){if(t[r].url===e){return t[r]}}return null}function cleanInnerHtmlForHistory(e){var t=htmx.config.requestClass;var r=e.cloneNode(true);forEach(findAll(r,"."+t),function(e){removeClassFromElement(e,t)});return r.innerHTML}function saveHistory(){var e=getHistoryElement();var t=currentPathForHistory||location.pathname+location.search;triggerEvent(getDocument().body,"htmx:beforeHistorySave",{path:t,historyElt:e});if(htmx.config.historyEnabled)history.replaceState({htmx:true},getDocument().title,window.location.href);saveToHistoryCache(t,cleanInnerHtmlForHistory(e),getDocument().title,window.scrollY)}function pushUrlIntoHistory(e){if(htmx.config.historyEnabled)history.pushState({htmx:true},"",e);currentPathForHistory=e}function settleImmediately(e){forEach(e,function(e){e.call()})}function loadHistoryFromServer(a){var e=new XMLHttpRequest;var n={path:a,xhr:e};triggerEvent(getDocument().body,"htmx:historyCacheMiss",n);e.open("GET",a,true);e.setRequestHeader("HX-History-Restore-Request","true");e.onload=function(){if(this.status>=200&&this.status<400){triggerEvent(getDocument().body,"htmx:historyCacheMissLoad",n);var e=makeFragment(this.response);e=e.querySelector("[hx-history-elt],[data-hx-history-elt]")||e;var t=getHistoryElement();var r=makeSettleInfo(t);swapInnerHTML(t,e,r);settleImmediately(r.tasks);currentPathForHistory=a;triggerEvent(getDocument().body,"htmx:historyRestore",{path:a})}else{triggerErrorEvent(getDocument().body,"htmx:historyCacheMissLoadError",n)}};e.send()}function restoreHistory(e){saveHistory();e=e||location.pathname+location.search;var t=getCachedHistory(e);if(t){var r=makeFragment(t.content);var a=getHistoryElement();var n=makeSettleInfo(a);swapInnerHTML(a,r,n);settleImmediately(n.tasks);document.title=t.title;window.scrollTo(0,t.scroll);currentPathForHistory=e;triggerEvent(getDocument().body,"htmx:historyRestore",{path:e})}else{if(htmx.config.refreshOnHistoryMiss){window.location.reload(true)}else{loadHistoryFromServer(e)}}}function shouldPush(e){var t=getClosestAttributeValue(e,"hx-push-url");return t&&t!=="false"||getInternalData(e).boosted&&getInternalData(e).pushURL}function getPushUrl(e){var t=getClosestAttributeValue(e,"hx-push-url");return t==="true"||t==="false"?null:t}function addRequestIndicatorClasses(e){var t=getClosestAttributeValue(e,"hx-indicator");if(t){var r=querySelectorAllExt(e,t)}else{r=[e]}forEach(r,function(e){e.classList["add"].call(e.classList,htmx.config.requestClass)});return r}function removeRequestIndicatorClasses(e){forEach(e,function(e){e.classList["remove"].call(e.classList,htmx.config.requestClass)})}function haveSeenNode(e,t){for(var r=0;r<e.length;r++){var a=e[r];if(a.isSameNode(t)){return true}}return false}function shouldInclude(e){if(e.name===""||e.name==null||e.disabled){return false}if(e.type==="button"||e.type==="submit"||e.tagName==="image"||e.tagName==="reset"||e.tagName==="file"){return false}if(e.type==="checkbox"||e.type==="radio"){return e.checked}return true}function processInputValue(t,r,a,e,n){if(e==null||haveSeenNode(t,e)){return}else{t.push(e)}if(shouldInclude(e)){var i=getRawAttribute(e,"name");var o=e.value;if(e.multiple){o=toArray(e.querySelectorAll("option:checked")).map(function(e){return e.value})}if(e.files){o=toArray(e.files)}if(i!=null&&o!=null){var s=r[i];if(s){if(Array.isArray(s)){if(Array.isArray(o)){r[i]=s.concat(o)}else{s.push(o)}}else{if(Array.isArray(o)){r[i]=[s].concat(o)}else{r[i]=[s,o]}}}else{r[i]=o}}if(n){validateElement(e,a)}}if(matches(e,"form")){var l=e.elements;forEach(l,function(e){processInputValue(t,r,a,e,n)})}}function validateElement(e,t){if(e.willValidate){triggerEvent(e,"htmx:validation:validate");if(!e.checkValidity()){t.push({elt:e,message:e.validationMessage,validity:e.validity});triggerEvent(e,"htmx:validation:failed",{message:e.validationMessage,validity:e.validity})}}}function getInputValues(e,t){var r=[];var a={};var n={};var i=[];var o=matches(e,"form")&&e.noValidate!==true;if(t!=="get"){processInputValue(r,n,i,closest(e,"form"),o)}processInputValue(r,a,i,e,o);var s=getClosestAttributeValue(e,"hx-include");if(s){var l=querySelectorAllExt(e,s);forEach(l,function(e){processInputValue(r,a,i,e,o);if(!matches(e,"form")){forEach(e.querySelectorAll(INPUT_SELECTOR),function(e){processInputValue(r,a,i,e,o)})}})}a=mergeObjects(a,n);return{errors:i,values:a}}function appendParam(e,t,r){if(e!==""){e+="&"}e+=encodeURIComponent(t)+"="+encodeURIComponent(r);return e}function urlEncode(e){var t="";for(var r in e){if(e.hasOwnProperty(r)){var a=e[r];if(Array.isArray(a)){forEach(a,function(e){t=appendParam(t,r,e)})}else{t=appendParam(t,r,a)}}}return t}function makeFormData(e){var t=new FormData;for(var r in e){if(e.hasOwnProperty(r)){var a=e[r];if(Array.isArray(a)){forEach(a,function(e){t.append(r,e)})}else{t.append(r,a)}}}return t}function getHeaders(e,t,r){var a={"HX-Request":"true","HX-Trigger":getRawAttribute(e,"id"),"HX-Trigger-Name":getRawAttribute(e,"name"),"HX-Target":getAttributeValue(t,"id"),"HX-Current-URL":getDocument().location.href};getValuesForElement(e,"hx-headers",false,a);if(r!==undefined){a["HX-Prompt"]=r}return a}function filterValues(t,e){var r=getClosestAttributeValue(e,"hx-params");if(r){if(r==="none"){return{}}else if(r==="*"){return t}else if(r.indexOf("not ")===0){forEach(r.substr(4).split(","),function(e){e=e.trim();delete t[e]});return t}else{var a={};forEach(r.split(","),function(e){e=e.trim();a[e]=t[e]});return a}}else{return t}}function isAnchorLink(e){return getRawAttribute(e,"href")&&getRawAttribute(e,"href").indexOf("#")>=0}function getSwapSpecification(e){var t=getClosestAttributeValue(e,"hx-swap");var r={swapStyle:getInternalData(e).boosted?"innerHTML":htmx.config.defaultSwapStyle,swapDelay:htmx.config.defaultSwapDelay,settleDelay:htmx.config.defaultSettleDelay};if(getInternalData(e).boosted&&!isAnchorLink(e)){r["show"]="top"}if(t){var a=splitOnWhitespace(t);if(a.length>0){r["swapStyle"]=a[0];for(var n=1;n<a.length;n++){var i=a[n];if(i.indexOf("swap:")===0){r["swapDelay"]=parseInterval(i.substr(5))}if(i.indexOf("settle:")===0){r["settleDelay"]=parseInterval(i.substr(7))}if(i.indexOf("scroll:")===0){r["scroll"]=i.substr(7)}if(i.indexOf("show:")===0){r["show"]=i.substr(5)}}}}return r}function encodeParamsForBody(t,r,a){var n=null;withExtensions(r,function(e){if(n==null){n=e.encodeParameters(t,a,r)}});if(n!=null){return n}else{if(getClosestAttributeValue(r,"hx-encoding")==="multipart/form-data"){return makeFormData(a)}else{return urlEncode(a)}}}function makeSettleInfo(e){return{tasks:[],elts:[e]}}function updateScrollState(e,t){var r=e[0];var a=e[e.length-1];if(t.scroll){if(t.scroll==="top"&&r){r.scrollTop=0}if(t.scroll==="bottom"&&a){a.scrollTop=a.scrollHeight}}if(t.show){if(t.show==="top"&&r){r.scrollIntoView(true)}if(t.show==="bottom"&&a){a.scrollIntoView(false)}}}function getValuesForElement(e,t,r,a){if(a==null){a={}}if(e==null){return a}var n=getAttributeValue(e,t);if(n){var i=n.trim();var o=r;if(i.indexOf("javascript:")===0){i=i.substr(11);o=true}if(i.indexOf("{")!==0){i="{"+i+"}"}var s;if(o){s=maybeEval(e,function(){return Function("return ("+i+")")()},{})}else{s=parseJSON(i)}for(var l in s){if(s.hasOwnProperty(l)){if(a[l]==null){a[l]=s[l]}}}}return getValuesForElement(parentElt(e),t,r,a)}function maybeEval(e,t,r){if(htmx.config.allowEval){return t()}else{triggerErrorEvent(e,"htmx:evalDisallowedError");return r}}function getHXVarsForElement(e,t){return getValuesForElement(e,"hx-vars",true,t)}function getHXValsForElement(e,t){return getValuesForElement(e,"hx-vals",false,t)}function getExpressionVars(e){return mergeObjects(getHXVarsForElement(e),getHXValsForElement(e))}function safelySetHeaderValue(t,r,a){if(a!==null){try{t.setRequestHeader(r,a)}catch(e){t.setRequestHeader(r,encodeURIComponent(a));t.setRequestHeader(r+"-URI-AutoEncoded","true")}}}function getResponseURL(t){if(t.responseURL&&typeof URL!=="undefined"){try{var e=new URL(t.responseURL);return e.pathname+e.search}catch(e){triggerErrorEvent(getDocument().body,"htmx:badResponseUrl",{url:t.responseURL})}}}function hasHeader(e,t){return e.getAllResponseHeaders().match(t)}function ajaxHelper(e,t,r){if(r){if(r instanceof Element||isType(r,"String")){return issueAjaxRequest(e,t,null,null,{targetOverride:resolveTarget(r)})}else{return issueAjaxRequest(e,t,resolveTarget(r.source),r.event,{handler:r.handler,headers:r.headers,values:r.values,targetOverride:resolveTarget(r.target)})}}else{return issueAjaxRequest(e,t)}}function hierarchyForElt(e){var t=[];while(e){t.push(e);e=e.parentElement}return t}function issueAjaxRequest(e,t,a,r,n){var i=null;var o=null;n=n!=null?n:{};if(typeof Promise!=="undefined"){var s=new Promise(function(e,t){i=e;o=t})}if(a==null){a=getDocument().body}var l=n.handler||handleAjaxResponse;if(!bodyContains(a)){return}var u=n.targetOverride||getTarget(a);if(u==null){triggerErrorEvent(a,"htmx:targetError",{target:getAttributeValue(a,"hx-target")});return}var c=getInternalData(a);if(c.requestInFlight){var f="last";var d=getInternalData(r);if(d&&d.triggerSpec&&d.triggerSpec.queue){f=d.triggerSpec.queue}if(c.queuedRequests==null){c.queuedRequests=[]}if(f==="first"&&c.queuedRequests.length===0){c.queuedRequests.push(function(){issueAjaxRequest(e,t,a,r)})}else if(f==="all"){c.queuedRequests.push(function(){issueAjaxRequest(e,t,a,r)})}else if(f==="last"){c.queuedRequests=[];c.queuedRequests.push(function(){issueAjaxRequest(e,t,a,r)})}return}else{c.requestInFlight=true}var v=function(){c.requestInFlight=false;if(c.queuedRequests!=null&&c.queuedRequests.length>0){var e=c.queuedRequests.shift();e()}};var p=getClosestAttributeValue(a,"hx-prompt");if(p){var h=prompt(p);if(h===null||!triggerEvent(a,"htmx:prompt",{prompt:h,target:u})){maybeCall(i);v();return s}}var m=getClosestAttributeValue(a,"hx-confirm");if(m){if(!confirm(m)){maybeCall(i);v();return s}}var g=new XMLHttpRequest;var y=getHeaders(a,u,h);if(n.headers){y=mergeObjects(y,n.values)}var x=getInputValues(a,e);var b=x.errors;var _=x.values;if(n.values){_=mergeObjects(_,n.values)}var w=getExpressionVars(a);var T=mergeObjects(_,w);var k=filterValues(T,a);if(e!=="get"&&getClosestAttributeValue(a,"hx-encoding")==null){y["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"}if(t==null||t===""){t=getDocument().location.href}var M={parameters:k,unfilteredParameters:T,headers:y,target:u,verb:e,errors:b,path:t,triggeringEvent:r};if(!triggerEvent(a,"htmx:configRequest",M)){maybeCall(i);v();return s}t=M.path;e=M.verb;y=M.headers;k=M.parameters;b=M.errors;if(b&&b.length>0){triggerEvent(a,"htmx:validation:halted",M);maybeCall(i);v();return s}var A=t.split("#");var S=A[0];var E=A[1];if(e==="get"){var L=S;var C=Object.keys(k).length!==0;if(C){if(L.indexOf("?")<0){L+="?"}else{L+="&"}L+=urlEncode(k);if(E){L+="#"+E}}g.open("GET",L,true)}else{g.open(e.toUpperCase(),t,true)}g.overrideMimeType("text/html");g.withCredentials=htmx.config.withCredentials;for(var D in y){if(y.hasOwnProperty(D)){var O=y[D];safelySetHeaderValue(g,D,O)}}var I={xhr:g,target:u,requestConfig:M,pathInfo:{path:t,finalPath:L,anchor:E}};g.onload=function(){try{var e=hierarchyForElt(a);l(a,I);removeRequestIndicatorClasses(P);triggerEvent(a,"htmx:afterRequest",I);triggerEvent(a,"htmx:afterOnLoad",I);if(!bodyContains(a)){var t=null;while(e.length>0&&t==null){var r=e.shift();if(bodyContains(r)){t=r}}if(t){triggerEvent(t,"htmx:afterRequest",I);triggerEvent(t,"htmx:afterOnLoad",I)}}maybeCall(i);v()}catch(e){triggerErrorEvent(a,"htmx:onLoadError",mergeObjects({error:e},I));throw e}};g.onerror=function(){removeRequestIndicatorClasses(P);triggerErrorEvent(a,"htmx:afterRequest",I);triggerErrorEvent(a,"htmx:sendError",I);maybeCall(o);v()};g.onabort=function(){removeRequestIndicatorClasses(P);triggerErrorEvent(a,"htmx:afterRequest",I);triggerErrorEvent(a,"htmx:sendAbort",I);maybeCall(o);v()};if(!triggerEvent(a,"htmx:beforeRequest",I)){maybeCall(i);v();return s}var P=addRequestIndicatorClasses(a);forEach(["loadstart","loadend","progress","abort"],function(t){forEach([g,g.upload],function(e){e.addEventListener(t,function(e){triggerEvent(a,"htmx:xhr:"+t,{lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total})})})});triggerEvent(a,"htmx:beforeSend",I);g.send(e==="get"?null:encodeParamsForBody(g,a,k));return s}function handleAjaxResponse(o,s){var l=s.xhr;var u=s.target;if(!triggerEvent(o,"htmx:beforeOnLoad",s))return;if(hasHeader(l,/HX-Trigger:/i)){handleTrigger(l,"HX-Trigger",o)}if(hasHeader(l,/HX-Push:/i)){var c=l.getResponseHeader("HX-Push")}if(hasHeader(l,/HX-Redirect:/i)){window.location.href=l.getResponseHeader("HX-Redirect");return}if(hasHeader(l,/HX-Refresh:/i)){if("true"===l.getResponseHeader("HX-Refresh")){location.reload();return}}var f=shouldPush(o)||c;if(l.status>=200&&l.status<400){if(l.status===286){cancelPolling(o)}if(l.status!==204){if(!triggerEvent(u,"htmx:beforeSwap",s))return;var d=l.response;withExtensions(o,function(e){d=e.transformResponse(d,l,o)});if(f){saveHistory()}var v=getSwapSpecification(o);u.classList.add(htmx.config.swappingClass);var e=function(){try{var e=document.activeElement;var t={};try{t={elt:e,start:e?e.selectionStart:null,end:e?e.selectionEnd:null}}catch(e){}var r=makeSettleInfo(u);selectAndSwap(v.swapStyle,u,o,d,r);if(t.elt&&!bodyContains(t.elt)&&t.elt.id){var a=document.getElementById(t.elt.id);if(a){if(t.start&&a.setSelectionRange){a.setSelectionRange(t.start,t.end)}a.focus()}}u.classList.remove(htmx.config.swappingClass);forEach(r.elts,function(e){if(e.classList){e.classList.add(htmx.config.settlingClass)}triggerEvent(e,"htmx:afterSwap",s)});if(s.pathInfo.anchor){location.hash=s.pathInfo.anchor}if(hasHeader(l,/HX-Trigger-After-Swap:/i)){var n=o;if(!bodyContains(o)){n=getDocument().body}handleTrigger(l,"HX-Trigger-After-Swap",n)}var i=function(){forEach(r.tasks,function(e){e.call()});forEach(r.elts,function(e){if(e.classList){e.classList.remove(htmx.config.settlingClass)}triggerEvent(e,"htmx:afterSettle",s)});if(f){var e=c||getPushUrl(o)||getResponseURL(l)||s.pathInfo.finalPath||s.pathInfo.path;pushUrlIntoHistory(e);triggerEvent(getDocument().body,"htmx:pushedIntoHistory",{path:e})}updateScrollState(r.elts,v);if(hasHeader(l,/HX-Trigger-After-Settle:/i)){var t=o;if(!bodyContains(o)){t=getDocument().body}handleTrigger(l,"HX-Trigger-After-Settle",t)}};if(v.settleDelay>0){setTimeout(i,v.settleDelay)}else{i()}}catch(e){triggerErrorEvent(o,"htmx:swapError",s);throw e}};if(v.swapDelay>0){setTimeout(e,v.swapDelay)}else{e()}}}else{triggerErrorEvent(o,"htmx:responseError",mergeObjects({error:"Response Status Error Code "+l.status+" from "+s.pathInfo.path},s))}}var extensions={};function extensionBase(){return{onEvent:function(e,t){return true},transformResponse:function(e,t,r){return e},isInlineSwap:function(e){return false},handleSwap:function(e,t,r,a){return false},encodeParameters:function(e,t,r){return null}}}function defineExtension(e,t){extensions[e]=mergeObjects(extensionBase(),t)}function removeExtension(e){delete extensions[e]}function getExtensions(e,r,a){if(e==undefined){return r}if(r==undefined){r=[]}if(a==undefined){a=[]}var t=getAttributeValue(e,"hx-ext");if(t){forEach(t.split(","),function(e){e=e.replace(/ /g,"");if(e.slice(0,7)=="ignore:"){a.push(e.slice(7));return}if(a.indexOf(e)<0){var t=extensions[e];if(t&&r.indexOf(t)<0){r.push(t)}}})}return getExtensions(parentElt(e),r,a)}function ready(e){if(getDocument().readyState!=="loading"){e()}else{getDocument().addEventListener("DOMContentLoaded",e)}}function insertIndicatorStyles(){if(htmx.config.includeIndicatorStyles!==false){getDocument().head.insertAdjacentHTML("beforeend","<style>                      ."+htmx.config.indicatorClass+"{opacity:0;transition: opacity 200ms ease-in;}                      ."+htmx.config.requestClass+" ."+htmx.config.indicatorClass+"{opacity:1}                      ."+htmx.config.requestClass+"."+htmx.config.indicatorClass+"{opacity:1}                    </style>")}}function getMetaConfig(){var e=getDocument().querySelector('meta[name="htmx-config"]');if(e){return parseJSON(e.content)}else{return null}}function mergeMetaConfig(){var e=getMetaConfig();if(e){htmx.config=mergeObjects(htmx.config,e)}}ready(function(){mergeMetaConfig();insertIndicatorStyles();var e=getDocument().body;processNode(e);window.onpopstate=function(e){if(e.state&&e.state.htmx){restoreHistory()}};setTimeout(function(){triggerEvent(e,"htmx:load",{})},0)});return htmx}()});(function(e,t){"use strict";if(typeof module==="object"&&typeof module.exports==="object"){module.exports=e.document?t(e,true):function(e){if(!e.document){throw new Error("jQuery requires a window with a document")}return t(e)}}else{t(e)}})(typeof window!=="undefined"?window:this,function(T,e){"use strict";var t=[];var a=Object.getPrototypeOf;var s=t.slice;var h=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)};var l=t.push;var n=t.indexOf;var r={};var i=r.toString;var m=r.hasOwnProperty;var o=m.toString;var u=o.call(Object);var g={};var y=function e(t){return typeof t==="function"&&typeof t.nodeType!=="number"&&typeof t.item!=="function"};var x=function e(t){return t!=null&&t===t.window};var k=T.document;var c={type:true,src:true,nonce:true,noModule:true};function b(e,t,r){r=r||k;var a,n,i=r.createElement("script");i.text=e;if(t){for(a in c){n=t[a]||t.getAttribute&&t.getAttribute(a);if(n){i.setAttribute(a,n)}}}r.head.appendChild(i).parentNode.removeChild(i)}function _(e){if(e==null){return e+""}return typeof e==="object"||typeof e==="function"?r[i.call(e)]||"object":typeof e}var f="3.6.0",M=function(e,t){return new M.fn.init(e,t)};M.fn=M.prototype={jquery:f,constructor:M,length:0,toArray:function(){return s.call(this)},get:function(e){if(e==null){return s.call(this)}return e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=M.merge(this.constructor(),e);t.prevObject=this;return t},each:function(e){return M.each(this,e)},map:function(r){return this.pushStack(M.map(this,function(e,t){return r.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(M.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(M.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:t.sort,splice:t.splice};M.extend=M.fn.extend=function(){var e,t,r,a,n,i,o=arguments[0]||{},s=1,l=arguments.length,u=false;if(typeof o==="boolean"){u=o;o=arguments[s]||{};s++}if(typeof o!=="object"&&!y(o)){o={}}if(s===l){o=this;s--}for(;s<l;s++){if((e=arguments[s])!=null){for(t in e){a=e[t];if(t==="__proto__"||o===a){continue}if(u&&a&&(M.isPlainObject(a)||(n=Array.isArray(a)))){r=o[t];if(n&&!Array.isArray(r)){i=[]}else if(!n&&!M.isPlainObject(r)){i={}}else{i=r}n=false;o[t]=M.extend(u,i,a)}else if(a!==undefined){o[t]=a}}}}return o};M.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:true,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,r;if(!e||i.call(e)!=="[object Object]"){return false}t=a(e);if(!t){return true}r=m.call(t,"constructor")&&t.constructor;return typeof r==="function"&&o.call(r)===u},isEmptyObject:function(e){var t;for(t in e){return false}return true},globalEval:function(e,t,r){b(e,{nonce:t&&t.nonce},r)},each:function(e,t){var r,a=0;if(d(e)){r=e.length;for(;a<r;a++){if(t.call(e[a],a,e[a])===false){break}}}else{for(a in e){if(t.call(e[a],a,e[a])===false){break}}}return e},makeArray:function(e,t){var r=t||[];if(e!=null){if(d(Object(e))){M.merge(r,typeof e==="string"?[e]:e)}else{l.call(r,e)}}return r},inArray:function(e,t,r){return t==null?-1:n.call(t,e,r)},merge:function(e,t){var r=+t.length,a=0,n=e.length;for(;a<r;a++){e[n++]=t[a]}e.length=n;return e},grep:function(e,t,r){var a,n=[],i=0,o=e.length,s=!r;for(;i<o;i++){a=!t(e[i],i);if(a!==s){n.push(e[i])}}return n},map:function(e,t,r){var a,n,i=0,o=[];if(d(e)){a=e.length;for(;i<a;i++){n=t(e[i],i,r);if(n!=null){o.push(n)}}}else{for(i in e){n=t(e[i],i,r);if(n!=null){o.push(n)}}}return h(o)},guid:1,support:g});if(typeof Symbol==="function"){M.fn[Symbol.iterator]=t[Symbol.iterator]}M.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){r["[object "+t+"]"]=t.toLowerCase()});function d(e){var t=!!e&&"length"in e&&e.length,r=_(e);if(y(e)||x(e)){return false}return r==="array"||t===0||typeof t==="number"&&t>0&&t-1 in e}var v=function(r){var e,v,b,i,n,p,f,h,_,l,u,w,T,o,k,m,s,c,g,M="sizzle"+1*new Date,d=r.document,A=0,a=0,y=le(),x=le(),S=le(),E=le(),L=function(e,t){if(e===t){u=true}return 0},C={}.hasOwnProperty,t=[],D=t.pop,O=t.push,I=t.push,P=t.slice,R=function(e,t){var r=0,a=e.length;for(;r<a;r++){if(e[r]===t){return r}}return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|"+"ismap|loop|multiple|open|readonly|required|scoped",z="[\\x20\\t\\r\\n\\f]",F="(?:\\\\[\\da-fA-F]{1,6}"+z+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",j="\\["+z+"*("+F+")(?:"+z+"*([*^$|!~]?=)"+z+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+z+"*\\]",H=":("+F+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|"+".*"+")\\)|)",B=new RegExp(z+"+","g"),q=new RegExp("^"+z+"+|((?:^|[^\\\\])(?:\\\\.)*)"+z+"+$","g"),U=new RegExp("^"+z+"*,"+z+"*"),Y=new RegExp("^"+z+"*([>+~]|"+z+")"+z+"*"),V=new RegExp(z+"|>"),G=new RegExp(H),W=new RegExp("^"+F+"$"),$={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+z+"*(even|odd|(([+-]|)(\\d*)n|)"+z+"*(?:([+-]|)"+z+"*(\\d+)|))"+z+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+z+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+z+"*((?:-\\d)?\\d*)"+z+"*\\)|)(?=[^-]|$)","i")},Z=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+z+"?|\\\\([^\\r\\n\\f])","g"),re=function(e,t){var r="0x"+e.slice(1)-65536;return t?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)},ae=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){if(t){if(e==="\0"){return"�"}return e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" "}return"\\"+e},ie=function(){w()},oe=be(function(e){return e.disabled===true&&e.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{I.apply(t=P.call(d.childNodes),d.childNodes);t[d.childNodes.length].nodeType}catch(e){I={apply:t.length?function(e,t){O.apply(e,P.call(t))}:function(e,t){var r=e.length,a=0;while(e[r++]=t[a++]){}e.length=r-1}}}function se(t,e,r,a){var n,i,o,s,l,u,c,f=e&&e.ownerDocument,d=e?e.nodeType:9;r=r||[];if(typeof t!=="string"||!t||d!==1&&d!==9&&d!==11){return r}if(!a){w(e);e=e||T;if(k){if(d!==11&&(l=Q.exec(t))){if(n=l[1]){if(d===9){if(o=e.getElementById(n)){if(o.id===n){r.push(o);return r}}else{return r}}else{if(f&&(o=f.getElementById(n))&&g(e,o)&&o.id===n){r.push(o);return r}}}else if(l[2]){I.apply(r,e.getElementsByTagName(t));return r}else if((n=l[3])&&v.getElementsByClassName&&e.getElementsByClassName){I.apply(r,e.getElementsByClassName(n));return r}}if(v.qsa&&!E[t+" "]&&(!m||!m.test(t))&&(d!==1||e.nodeName.toLowerCase()!=="object")){c=t;f=e;if(d===1&&(V.test(t)||Y.test(t))){f=ee.test(t)&&ge(e.parentNode)||e;if(f!==e||!v.scope){if(s=e.getAttribute("id")){s=s.replace(ae,ne)}else{e.setAttribute("id",s=M)}}u=p(t);i=u.length;while(i--){u[i]=(s?"#"+s:":scope")+" "+xe(u[i])}c=u.join(",")}try{I.apply(r,f.querySelectorAll(c));return r}catch(e){E(t,true)}finally{if(s===M){e.removeAttribute("id")}}}}}return h(t.replace(q,"$1"),e,r,a)}function le(){var r=[];function a(e,t){if(r.push(e+" ")>b.cacheLength){delete a[r.shift()]}return a[e+" "]=t}return a}function ue(e){e[M]=true;return e}function ce(e){var t=T.createElement("fieldset");try{return!!e(t)}catch(e){return false}finally{if(t.parentNode){t.parentNode.removeChild(t)}t=null}}function fe(e,t){var r=e.split("|"),a=r.length;while(a--){b.attrHandle[r[a]]=t}}function de(e,t){var r=t&&e,a=r&&e.nodeType===1&&t.nodeType===1&&e.sourceIndex-t.sourceIndex;if(a){return a}if(r){while(r=r.nextSibling){if(r===t){return-1}}}return e?1:-1}function ve(r){return function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type===r}}function pe(r){return function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&e.type===r}}function he(t){return function(e){if("form"in e){if(e.parentNode&&e.disabled===false){if("label"in e){if("label"in e.parentNode){return e.parentNode.disabled===t}else{return e.disabled===t}}return e.isDisabled===t||e.isDisabled!==!t&&oe(e)===t}return e.disabled===t}else if("label"in e){return e.disabled===t}return false}}function me(o){return ue(function(i){i=+i;return ue(function(e,t){var r,a=o([],e.length,i),n=a.length;while(n--){if(e[r=a[n]]){e[r]=!(t[r]=e[r])}}})})}function ge(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}v=se.support={};n=se.isXML=function(e){var t=e&&e.namespaceURI,r=e&&(e.ownerDocument||e).documentElement;return!Z.test(t||r&&r.nodeName||"HTML")};w=se.setDocument=function(e){var t,r,a=e?e.ownerDocument||e:d;if(a==T||a.nodeType!==9||!a.documentElement){return T}T=a;o=T.documentElement;k=!n(T);if(d!=T&&(r=T.defaultView)&&r.top!==r){if(r.addEventListener){r.addEventListener("unload",ie,false)}else if(r.attachEvent){r.attachEvent("onunload",ie)}}v.scope=ce(function(e){o.appendChild(e).appendChild(T.createElement("div"));return typeof e.querySelectorAll!=="undefined"&&!e.querySelectorAll(":scope fieldset div").length});v.attributes=ce(function(e){e.className="i";return!e.getAttribute("className")});v.getElementsByTagName=ce(function(e){e.appendChild(T.createComment(""));return!e.getElementsByTagName("*").length});v.getElementsByClassName=K.test(T.getElementsByClassName);v.getById=ce(function(e){o.appendChild(e).id=M;return!T.getElementsByName||!T.getElementsByName(M).length});if(v.getById){b.filter["ID"]=function(e){var t=e.replace(te,re);return function(e){return e.getAttribute("id")===t}};b.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&k){var r=t.getElementById(e);return r?[r]:[]}}}else{b.filter["ID"]=function(e){var r=e.replace(te,re);return function(e){var t=typeof e.getAttributeNode!=="undefined"&&e.getAttributeNode("id");return t&&t.value===r}};b.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&k){var r,a,n,i=t.getElementById(e);if(i){r=i.getAttributeNode("id");if(r&&r.value===e){return[i]}n=t.getElementsByName(e);a=0;while(i=n[a++]){r=i.getAttributeNode("id");if(r&&r.value===e){return[i]}}}return[]}}}b.find["TAG"]=v.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!=="undefined"){return t.getElementsByTagName(e)}else if(v.qsa){return t.querySelectorAll(e)}}:function(e,t){var r,a=[],n=0,i=t.getElementsByTagName(e);if(e==="*"){while(r=i[n++]){if(r.nodeType===1){a.push(r)}}return a}return i};b.find["CLASS"]=v.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!=="undefined"&&k){return t.getElementsByClassName(e)}};s=[];m=[];if(v.qsa=K.test(T.querySelectorAll)){ce(function(e){var t;o.appendChild(e).innerHTML="<a id='"+M+"'></a>"+"<select id='"+M+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(e.querySelectorAll("[msallowcapture^='']").length){m.push("[*^$]="+z+"*(?:''|\"\")")}if(!e.querySelectorAll("[selected]").length){m.push("\\["+z+"*(?:value|"+N+")")}if(!e.querySelectorAll("[id~="+M+"-]").length){m.push("~=")}t=T.createElement("input");t.setAttribute("name","");e.appendChild(t);if(!e.querySelectorAll("[name='']").length){m.push("\\["+z+"*name"+z+"*="+z+"*(?:''|\"\")")}if(!e.querySelectorAll(":checked").length){m.push(":checked")}if(!e.querySelectorAll("a#"+M+"+*").length){m.push(".#.+[+~]")}e.querySelectorAll("\\\f");m.push("[\\r\\n\\f]")});ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a>"+"<select disabled='disabled'><option/></select>";var t=T.createElement("input");t.setAttribute("type","hidden");e.appendChild(t).setAttribute("name","D");if(e.querySelectorAll("[name=d]").length){m.push("name"+z+"*[*^$|!~]?=")}if(e.querySelectorAll(":enabled").length!==2){m.push(":enabled",":disabled")}o.appendChild(e).disabled=true;if(e.querySelectorAll(":disabled").length!==2){m.push(":enabled",":disabled")}e.querySelectorAll("*,:x");m.push(",.*:")})}if(v.matchesSelector=K.test(c=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector)){ce(function(e){v.disconnectedMatch=c.call(e,"*");c.call(e,"[s!='']:x");s.push("!=",H)})}m=m.length&&new RegExp(m.join("|"));s=s.length&&new RegExp(s.join("|"));t=K.test(o.compareDocumentPosition);g=t||K.test(o.contains)?function(e,t){var r=e.nodeType===9?e.documentElement:e,a=t&&t.parentNode;return e===a||!!(a&&a.nodeType===1&&(r.contains?r.contains(a):e.compareDocumentPosition&&e.compareDocumentPosition(a)&16))}:function(e,t){if(t){while(t=t.parentNode){if(t===e){return true}}}return false};L=t?function(e,t){if(e===t){u=true;return 0}var r=!e.compareDocumentPosition-!t.compareDocumentPosition;if(r){return r}r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1;if(r&1||!v.sortDetached&&t.compareDocumentPosition(e)===r){if(e==T||e.ownerDocument==d&&g(d,e)){return-1}if(t==T||t.ownerDocument==d&&g(d,t)){return 1}return l?R(l,e)-R(l,t):0}return r&4?-1:1}:function(e,t){if(e===t){u=true;return 0}var r,a=0,n=e.parentNode,i=t.parentNode,o=[e],s=[t];if(!n||!i){return e==T?-1:t==T?1:n?-1:i?1:l?R(l,e)-R(l,t):0}else if(n===i){return de(e,t)}r=e;while(r=r.parentNode){o.unshift(r)}r=t;while(r=r.parentNode){s.unshift(r)}while(o[a]===s[a]){a++}return a?de(o[a],s[a]):o[a]==d?-1:s[a]==d?1:0};return T};se.matches=function(e,t){return se(e,null,null,t)};se.matchesSelector=function(e,t){w(e);if(v.matchesSelector&&k&&!E[t+" "]&&(!s||!s.test(t))&&(!m||!m.test(t))){try{var r=c.call(e,t);if(r||v.disconnectedMatch||e.document&&e.document.nodeType!==11){return r}}catch(e){E(t,true)}}return se(t,T,null,[e]).length>0};se.contains=function(e,t){if((e.ownerDocument||e)!=T){w(e)}return g(e,t)};se.attr=function(e,t){if((e.ownerDocument||e)!=T){w(e)}var r=b.attrHandle[t.toLowerCase()],a=r&&C.call(b.attrHandle,t.toLowerCase())?r(e,t,!k):undefined;return a!==undefined?a:v.attributes||!k?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null};se.escape=function(e){return(e+"").replace(ae,ne)};se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};se.uniqueSort=function(e){var t,r=[],a=0,n=0;u=!v.detectDuplicates;l=!v.sortStable&&e.slice(0);e.sort(L);if(u){while(t=e[n++]){if(t===e[n]){a=r.push(n)}}while(a--){e.splice(r[a],1)}}l=null;return e};i=se.getText=function(e){var t,r="",a=0,n=e.nodeType;if(!n){while(t=e[a++]){r+=i(t)}}else if(n===1||n===9||n===11){if(typeof e.textContent==="string"){return e.textContent}else{for(e=e.firstChild;e;e=e.nextSibling){r+=i(e)}}}else if(n===3||n===4){return e.nodeValue}return r};b=se.selectors={cacheLength:50,createPseudo:ue,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(te,re);e[3]=(e[3]||e[4]||e[5]||"").replace(te,re);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){se.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+(e[7]+e[8]||e[3]==="odd")}else if(e[3]){se.error(e[0])}return e},PSEUDO:function(e){var t,r=!e[6]&&e[2];if($["CHILD"].test(e[0])){return null}if(e[3]){e[2]=e[4]||e[5]||""}else if(r&&G.test(r)&&(t=p(r,true))&&(t=r.indexOf(")",r.length-t)-r.length)){e[0]=e[0].slice(0,t);e[2]=r.slice(0,t)}return e.slice(0,3)}},filter:{TAG:function(e){var t=e.replace(te,re).toLowerCase();return e==="*"?function(){return true}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=y[e+" "];return t||(t=new RegExp("(^|"+z+")"+e+"("+z+"|$)"))&&y(e,function(e){return t.test(typeof e.className==="string"&&e.className||typeof e.getAttribute!=="undefined"&&e.getAttribute("class")||"")})},ATTR:function(r,a,n){return function(e){var t=se.attr(e,r);if(t==null){return a==="!="}if(!a){return true}t+="";return a==="="?t===n:a==="!="?t!==n:a==="^="?n&&t.indexOf(n)===0:a==="*="?n&&t.indexOf(n)>-1:a==="$="?n&&t.slice(-n.length)===n:a==="~="?(" "+t.replace(B," ")+" ").indexOf(n)>-1:a==="|="?t===n||t.slice(0,n.length+1)===n+"-":false}},CHILD:function(p,e,t,h,m){var g=p.slice(0,3)!=="nth",y=p.slice(-4)!=="last",x=e==="of-type";return h===1&&m===0?function(e){return!!e.parentNode}:function(e,t,r){var a,n,i,o,s,l,u=g!==y?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),d=!r&&!x,v=false;if(c){if(g){while(u){o=e;while(o=o[u]){if(x?o.nodeName.toLowerCase()===f:o.nodeType===1){return false}}l=u=p==="only"&&!l&&"nextSibling"}return true}l=[y?c.firstChild:c.lastChild];if(y&&d){o=c;i=o[M]||(o[M]={});n=i[o.uniqueID]||(i[o.uniqueID]={});a=n[p]||[];s=a[0]===A&&a[1];v=s&&a[2];o=s&&c.childNodes[s];while(o=++s&&o&&o[u]||(v=s=0)||l.pop()){if(o.nodeType===1&&++v&&o===e){n[p]=[A,s,v];break}}}else{if(d){o=e;i=o[M]||(o[M]={});n=i[o.uniqueID]||(i[o.uniqueID]={});a=n[p]||[];s=a[0]===A&&a[1];v=s}if(v===false){while(o=++s&&o&&o[u]||(v=s=0)||l.pop()){if((x?o.nodeName.toLowerCase()===f:o.nodeType===1)&&++v){if(d){i=o[M]||(o[M]={});n=i[o.uniqueID]||(i[o.uniqueID]={});n[p]=[A,v]}if(o===e){break}}}}}v-=m;return v===h||v%h===0&&v/h>=0}}},PSEUDO:function(e,i){var t,o=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);if(o[M]){return o(i)}if(o.length>1){t=[e,e,"",i];return b.setFilters.hasOwnProperty(e.toLowerCase())?ue(function(e,t){var r,a=o(e,i),n=a.length;while(n--){r=R(e,a[n]);e[r]=!(t[r]=a[n])}}):function(e){return o(e,0,t)}}return o}},pseudos:{not:ue(function(e){var a=[],n=[],s=f(e.replace(q,"$1"));return s[M]?ue(function(e,t,r,a){var n,i=s(e,null,a,[]),o=e.length;while(o--){if(n=i[o]){e[o]=!(t[o]=n)}}}):function(e,t,r){a[0]=e;s(a,null,r,n);a[0]=null;return!n.pop()}}),has:ue(function(t){return function(e){return se(t,e).length>0}}),contains:ue(function(t){t=t.replace(te,re);return function(e){return(e.textContent||i(e)).indexOf(t)>-1}}),lang:ue(function(r){if(!W.test(r||"")){se.error("unsupported lang: "+r)}r=r.replace(te,re).toLowerCase();return function(e){var t;do{if(t=k?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang")){t=t.toLowerCase();return t===r||t.indexOf(r+"-")===0}}while((e=e.parentNode)&&e.nodeType===1);return false}}),target:function(e){var t=r.location&&r.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===o},focus:function(e){return e===T.activeElement&&(!T.hasFocus||T.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:he(false),disabled:he(true),checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeType<6){return false}}return true},parent:function(e){return!b.pseudos["empty"](e)},header:function(e){return J.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:me(function(){return[0]}),last:me(function(e,t){return[t-1]}),eq:me(function(e,t,r){return[r<0?r+t:r]}),even:me(function(e,t){var r=0;for(;r<t;r+=2){e.push(r)}return e}),odd:me(function(e,t){var r=1;for(;r<t;r+=2){e.push(r)}return e}),lt:me(function(e,t,r){var a=r<0?r+t:r>t?t:r;for(;--a>=0;){e.push(a)}return e}),gt:me(function(e,t,r){var a=r<0?r+t:r;for(;++a<t;){e.push(a)}return e})}};b.pseudos["nth"]=b.pseudos["eq"];for(e in{radio:true,checkbox:true,file:true,password:true,image:true}){b.pseudos[e]=ve(e)}for(e in{submit:true,reset:true}){b.pseudos[e]=pe(e)}function ye(){}ye.prototype=b.filters=b.pseudos;b.setFilters=new ye;p=se.tokenize=function(e,t){var r,a,n,i,o,s,l,u=x[e+" "];if(u){return t?0:u.slice(0)}o=e;s=[];l=b.preFilter;while(o){if(!r||(a=U.exec(o))){if(a){o=o.slice(a[0].length)||o}s.push(n=[])}r=false;if(a=Y.exec(o)){r=a.shift();n.push({value:r,type:a[0].replace(q," ")});o=o.slice(r.length)}for(i in b.filter){if((a=$[i].exec(o))&&(!l[i]||(a=l[i](a)))){r=a.shift();n.push({value:r,type:i,matches:a});o=o.slice(r.length)}}if(!r){break}}return t?o.length:o?se.error(e):x(e,s).slice(0)};function xe(e){var t=0,r=e.length,a="";for(;t<r;t++){a+=e[t].value}return a}function be(s,e,t){var l=e.dir,u=e.next,c=u||l,f=t&&c==="parentNode",d=a++;return e.first?function(e,t,r){while(e=e[l]){if(e.nodeType===1||f){return s(e,t,r)}}return false}:function(e,t,r){var a,n,i,o=[A,d];if(r){while(e=e[l]){if(e.nodeType===1||f){if(s(e,t,r)){return true}}}}else{while(e=e[l]){if(e.nodeType===1||f){i=e[M]||(e[M]={});n=i[e.uniqueID]||(i[e.uniqueID]={});if(u&&u===e.nodeName.toLowerCase()){e=e[l]||e}else if((a=n[c])&&a[0]===A&&a[1]===d){return o[2]=a[2]}else{n[c]=o;if(o[2]=s(e,t,r)){return true}}}}}return false}}function _e(n){return n.length>1?function(e,t,r){var a=n.length;while(a--){if(!n[a](e,t,r)){return false}}return true}:n[0]}function we(e,t,r){var a=0,n=t.length;for(;a<n;a++){se(e,t[a],r)}return r}function Te(e,t,r,a,n){var i,o=[],s=0,l=e.length,u=t!=null;for(;s<l;s++){if(i=e[s]){if(!r||r(i,a,n)){o.push(i);if(u){t.push(s)}}}}return o}function ke(v,p,h,m,g,e){if(m&&!m[M]){m=ke(m)}if(g&&!g[M]){g=ke(g,e)}return ue(function(e,t,r,a){var n,i,o,s=[],l=[],u=t.length,c=e||we(p||"*",r.nodeType?[r]:r,[]),f=v&&(e||!p)?Te(c,s,v,r,a):c,d=h?g||(e?v:u||m)?[]:t:f;if(h){h(f,d,r,a)}if(m){n=Te(d,l);m(n,[],r,a);i=n.length;while(i--){if(o=n[i]){d[l[i]]=!(f[l[i]]=o)}}}if(e){if(g||v){if(g){n=[];i=d.length;while(i--){if(o=d[i]){n.push(f[i]=o)}}g(null,d=[],n,a)}i=d.length;while(i--){if((o=d[i])&&(n=g?R(e,o):s[i])>-1){e[n]=!(t[n]=o)}}}}else{d=Te(d===t?d.splice(u,d.length):d);if(g){g(null,t,d,a)}else{I.apply(t,d)}}})}function Me(e){var n,t,r,a=e.length,i=b.relative[e[0].type],o=i||b.relative[" "],s=i?1:0,l=be(function(e){return e===n},o,true),u=be(function(e){return R(n,e)>-1},o,true),c=[function(e,t,r){var a=!i&&(r||t!==_)||((n=t).nodeType?l(e,t,r):u(e,t,r));n=null;return a}];for(;s<a;s++){if(t=b.relative[e[s].type]){c=[be(_e(c),t)]}else{t=b.filter[e[s].type].apply(null,e[s].matches);if(t[M]){r=++s;for(;r<a;r++){if(b.relative[e[r].type]){break}}return ke(s>1&&_e(c),s>1&&xe(e.slice(0,s-1).concat({value:e[s-2].type===" "?"*":""})).replace(q,"$1"),t,s<r&&Me(e.slice(s,r)),r<a&&Me(e=e.slice(r)),r<a&&xe(e))}c.push(t)}}return _e(c)}function Ae(m,g){var y=g.length>0,x=m.length>0,e=function(e,t,r,a,n){var i,o,s,l=0,u="0",c=e&&[],f=[],d=_,v=e||x&&b.find["TAG"]("*",n),p=A+=d==null?1:Math.random()||.1,h=v.length;if(n){_=t==T||t||n}for(;u!==h&&(i=v[u])!=null;u++){if(x&&i){o=0;if(!t&&i.ownerDocument!=T){w(i);r=!k}while(s=m[o++]){if(s(i,t||T,r)){a.push(i);break}}if(n){A=p}}if(y){if(i=!s&&i){l--}if(e){c.push(i)}}}l+=u;if(y&&u!==l){o=0;while(s=g[o++]){s(c,f,t,r)}if(e){if(l>0){while(u--){if(!(c[u]||f[u])){f[u]=D.call(a)}}}f=Te(f)}I.apply(a,f);if(n&&!e&&f.length>0&&l+g.length>1){se.uniqueSort(a)}}if(n){A=p;_=d}return c};return y?ue(e):e}f=se.compile=function(e,t){var r,a=[],n=[],i=S[e+" "];if(!i){if(!t){t=p(e)}r=t.length;while(r--){i=Me(t[r]);if(i[M]){a.push(i)}else{n.push(i)}}i=S(e,Ae(n,a));i.selector=e}return i};h=se.select=function(e,t,r,a){var n,i,o,s,l,u=typeof e==="function"&&e,c=!a&&p(e=u.selector||e);r=r||[];if(c.length===1){i=c[0]=c[0].slice(0);if(i.length>2&&(o=i[0]).type==="ID"&&t.nodeType===9&&k&&b.relative[i[1].type]){t=(b.find["ID"](o.matches[0].replace(te,re),t)||[])[0];if(!t){return r}else if(u){t=t.parentNode}e=e.slice(i.shift().value.length)}n=$["needsContext"].test(e)?0:i.length;while(n--){o=i[n];if(b.relative[s=o.type]){break}if(l=b.find[s]){if(a=l(o.matches[0].replace(te,re),ee.test(i[0].type)&&ge(t.parentNode)||t)){i.splice(n,1);e=a.length&&xe(i);if(!e){I.apply(r,a);return r}break}}}}(u||f(e,c))(a,t,!k,r,!t||ee.test(e)&&ge(t.parentNode)||t);return r};v.sortStable=M.split("").sort(L).join("")===M;v.detectDuplicates=!!u;w();v.sortDetached=ce(function(e){return e.compareDocumentPosition(T.createElement("fieldset"))&1});if(!ce(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){fe("type|href|height|width",function(e,t,r){if(!r){return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}})}if(!v.attributes||!ce(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){fe("value",function(e,t,r){if(!r&&e.nodeName.toLowerCase()==="input"){return e.defaultValue}})}if(!ce(function(e){return e.getAttribute("disabled")==null})){fe(N,function(e,t,r){var a;if(!r){return e[t]===true?t.toLowerCase():(a=e.getAttributeNode(t))&&a.specified?a.value:null}})}return se}(T);M.find=v;M.expr=v.selectors;M.expr[":"]=M.expr.pseudos;M.uniqueSort=M.unique=v.uniqueSort;M.text=v.getText;M.isXMLDoc=v.isXML;M.contains=v.contains;M.escapeSelector=v.escape;var p=function(e,t,r){var a=[],n=r!==undefined;while((e=e[t])&&e.nodeType!==9){if(e.nodeType===1){if(n&&M(e).is(r)){break}a.push(e)}}return a};var w=function(e,t){var r=[];for(;e;e=e.nextSibling){if(e.nodeType===1&&e!==t){r.push(e)}}return r};var A=M.expr.match.needsContext;function S(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var E=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function L(e,r,a){if(y(r)){return M.grep(e,function(e,t){return!!r.call(e,t,e)!==a})}if(r.nodeType){return M.grep(e,function(e){return e===r!==a})}if(typeof r!=="string"){return M.grep(e,function(e){return n.call(r,e)>-1!==a})}return M.filter(r,e,a)}M.filter=function(e,t,r){var a=t[0];if(r){e=":not("+e+")"}if(t.length===1&&a.nodeType===1){return M.find.matchesSelector(a,e)?[a]:[]}return M.find.matches(e,M.grep(t,function(e){return e.nodeType===1}))};M.fn.extend({find:function(e){var t,r,a=this.length,n=this;if(typeof e!=="string"){return this.pushStack(M(e).filter(function(){for(t=0;t<a;t++){if(M.contains(n[t],this)){return true}}}))}r=this.pushStack([]);for(t=0;t<a;t++){M.find(e,n[t],r)}return a>1?M.uniqueSort(r):r},filter:function(e){return this.pushStack(L(this,e||[],false))},not:function(e){return this.pushStack(L(this,e||[],true))},is:function(e){return!!L(this,typeof e==="string"&&A.test(e)?M(e):e||[],false).length}});var C,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,O=M.fn.init=function(e,t,r){var a,n;if(!e){return this}r=r||C;if(typeof e==="string"){if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3){a=[null,e,null]}else{a=D.exec(e)}if(a&&(a[1]||!t)){if(a[1]){t=t instanceof M?t[0]:t;M.merge(this,M.parseHTML(a[1],t&&t.nodeType?t.ownerDocument||t:k,true));if(E.test(a[1])&&M.isPlainObject(t)){for(a in t){if(y(this[a])){this[a](t[a])}else{this.attr(a,t[a])}}}return this}else{n=k.getElementById(a[2]);if(n){this[0]=n;this.length=1}return this}}else if(!t||t.jquery){return(t||r).find(e)}else{return this.constructor(t).find(e)}}else if(e.nodeType){this[0]=e;this.length=1;return this}else if(y(e)){return r.ready!==undefined?r.ready(e):e(M)}return M.makeArray(e,this)};O.prototype=M.fn;C=M(k);var I=/^(?:parents|prev(?:Until|All))/,P={children:true,contents:true,next:true,prev:true};M.fn.extend({has:function(e){var t=M(e,this),r=t.length;return this.filter(function(){var e=0;for(;e<r;e++){if(M.contains(this,t[e])){return true}}})},closest:function(e,t){var r,a=0,n=this.length,i=[],o=typeof e!=="string"&&M(e);if(!A.test(e)){for(;a<n;a++){for(r=this[a];r&&r!==t;r=r.parentNode){if(r.nodeType<11&&(o?o.index(r)>-1:r.nodeType===1&&M.find.matchesSelector(r,e))){i.push(r);break}}}}return this.pushStack(i.length>1?M.uniqueSort(i):i)},index:function(e){if(!e){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof e==="string"){return n.call(M(e),this[0])}return n.call(this,e.jquery?e[0]:e)},add:function(e,t){return this.pushStack(M.uniqueSort(M.merge(this.get(),M(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function R(e,t){while((e=e[t])&&e.nodeType!==1){}return e}M.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return p(e,"parentNode")},parentsUntil:function(e,t,r){return p(e,"parentNode",r)},next:function(e){return R(e,"nextSibling")},prev:function(e){return R(e,"previousSibling")},nextAll:function(e){return p(e,"nextSibling")},prevAll:function(e){return p(e,"previousSibling")},nextUntil:function(e,t,r){return p(e,"nextSibling",r)},prevUntil:function(e,t,r){return p(e,"previousSibling",r)},siblings:function(e){return w((e.parentNode||{}).firstChild,e)},children:function(e){return w(e.firstChild)},contents:function(e){if(e.contentDocument!=null&&a(e.contentDocument)){return e.contentDocument}if(S(e,"template")){e=e.content||e}return M.merge([],e.childNodes)}},function(a,n){M.fn[a]=function(e,t){var r=M.map(this,n,e);if(a.slice(-5)!=="Until"){t=e}if(t&&typeof t==="string"){r=M.filter(t,r)}if(this.length>1){if(!P[a]){M.uniqueSort(r)}if(I.test(a)){r.reverse()}}return this.pushStack(r)}});var N=/[^\x20\t\r\n\f]+/g;function z(e){var r={};M.each(e.match(N)||[],function(e,t){r[t]=true});return r}M.Callbacks=function(a){a=typeof a==="string"?z(a):M.extend({},a);var r,e,t,n,i=[],o=[],s=-1,l=function(){n=n||a.once;t=r=true;for(;o.length;s=-1){e=o.shift();while(++s<i.length){if(i[s].apply(e[0],e[1])===false&&a.stopOnFalse){s=i.length;e=false}}}if(!a.memory){e=false}r=false;if(n){if(e){i=[]}else{i=""}}},u={add:function(){if(i){if(e&&!r){s=i.length-1;o.push(e)}(function r(e){M.each(e,function(e,t){if(y(t)){if(!a.unique||!u.has(t)){i.push(t)}}else if(t&&t.length&&_(t)!=="string"){r(t)}})})(arguments);if(e&&!r){l()}}return this},remove:function(){M.each(arguments,function(e,t){var r;while((r=M.inArray(t,i,r))>-1){i.splice(r,1);if(r<=s){s--}}});return this},has:function(e){return e?M.inArray(e,i)>-1:i.length>0},empty:function(){if(i){i=[]}return this},disable:function(){n=o=[];i=e="";return this},disabled:function(){return!i},lock:function(){n=o=[];if(!e&&!r){i=e=""}return this},locked:function(){return!!n},fireWith:function(e,t){if(!n){t=t||[];t=[e,t.slice?t.slice():t];o.push(t);if(!r){l()}}return this},fire:function(){u.fireWith(this,arguments);return this},fired:function(){return!!t}};return u};function F(e){return e}function j(e){throw e}function H(e,t,r,a){var n;try{if(e&&y(n=e.promise)){n.call(e).done(t).fail(r)}else if(e&&y(n=e.then)){n.call(e,t,r)}else{t.apply(undefined,[e].slice(a))}}catch(e){r.apply(undefined,[e])}}M.extend({Deferred:function(e){var i=[["notify","progress",M.Callbacks("memory"),M.Callbacks("memory"),2],["resolve","done",M.Callbacks("once memory"),M.Callbacks("once memory"),0,"resolved"],["reject","fail",M.Callbacks("once memory"),M.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){s.done(arguments).fail(arguments);return this},catch:function(e){return o.then(null,e)},pipe:function(){var n=arguments;return M.Deferred(function(a){M.each(i,function(e,t){var r=y(n[t[4]])&&n[t[4]];s[t[1]](function(){var e=r&&r.apply(this,arguments);if(e&&y(e.promise)){e.promise().progress(a.notify).done(a.resolve).fail(a.reject)}else{a[t[0]+"With"](this,r?[e]:arguments)}})});n=null}).promise()},then:function(t,r,a){var l=0;function u(n,i,o,s){return function(){var r=this,a=arguments,e=function(){var e,t;if(n<l){return}e=o.apply(r,a);if(e===i.promise()){throw new TypeError("Thenable self-resolution")}t=e&&(typeof e==="object"||typeof e==="function")&&e.then;if(y(t)){if(s){t.call(e,u(l,i,F,s),u(l,i,j,s))}else{l++;t.call(e,u(l,i,F,s),u(l,i,j,s),u(l,i,F,i.notifyWith))}}else{if(o!==F){r=undefined;a=[e]}(s||i.resolveWith)(r,a)}},t=s?e:function(){try{e()}catch(e){if(M.Deferred.exceptionHook){M.Deferred.exceptionHook(e,t.stackTrace)}if(n+1>=l){if(o!==j){r=undefined;a=[e]}i.rejectWith(r,a)}}};if(n){t()}else{if(M.Deferred.getStackHook){t.stackTrace=M.Deferred.getStackHook()}T.setTimeout(t)}}}return M.Deferred(function(e){i[0][3].add(u(0,e,y(a)?a:F,e.notifyWith));i[1][3].add(u(0,e,y(t)?t:F));i[2][3].add(u(0,e,y(r)?r:j))}).promise()},promise:function(e){return e!=null?M.extend(e,o):o}},s={};M.each(i,function(e,t){var r=t[2],a=t[5];o[t[1]]=r.add;if(a){r.add(function(){n=a},i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock)}r.add(t[3].fire);s[t[0]]=function(){s[t[0]+"With"](this===s?undefined:this,arguments);return this};s[t[0]+"With"]=r.fireWith});o.promise(s);if(e){e.call(s,s)}return s},when:function(e){var r=arguments.length,t=r,a=Array(t),n=s.call(arguments),i=M.Deferred(),o=function(t){return function(e){a[t]=this;n[t]=arguments.length>1?s.call(arguments):e;if(!--r){i.resolveWith(a,n)}}};if(r<=1){H(e,i.done(o(t)).resolve,i.reject,!r);if(i.state()==="pending"||y(n[t]&&n[t].then)){return i.then()}}while(t--){H(n[t],o(t),i.reject)}return i.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;M.Deferred.exceptionHook=function(e,t){if(T.console&&T.console.warn&&e&&B.test(e.name)){T.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)}};M.readyException=function(e){T.setTimeout(function(){throw e})};var q=M.Deferred();M.fn.ready=function(e){q.then(e).catch(function(e){M.readyException(e)});return this};M.extend({isReady:false,readyWait:1,ready:function(e){if(e===true?--M.readyWait:M.isReady){return}M.isReady=true;if(e!==true&&--M.readyWait>0){return}q.resolveWith(k,[M])}});M.ready.then=q.then;function U(){k.removeEventListener("DOMContentLoaded",U);T.removeEventListener("load",U);M.ready()}if(k.readyState==="complete"||k.readyState!=="loading"&&!k.documentElement.doScroll){T.setTimeout(M.ready)}else{k.addEventListener("DOMContentLoaded",U);T.addEventListener("load",U)}var Y=function(e,t,r,a,n,i,o){var s=0,l=e.length,u=r==null;if(_(r)==="object"){n=true;for(s in r){Y(e,t,s,r[s],true,i,o)}}else if(a!==undefined){n=true;if(!y(a)){o=true}if(u){if(o){t.call(e,a);t=null}else{u=t;t=function(e,t,r){return u.call(M(e),r)}}}if(t){for(;s<l;s++){t(e[s],r,o?a:a.call(e[s],s,t(e[s],r)))}}}if(n){return e}if(u){return t.call(e)}return l?t(e[0],r):i};var V=/^-ms-/,G=/-([a-z])/g;function W(e,t){return t.toUpperCase()}function $(e){return e.replace(V,"ms-").replace(G,W)}var Z=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function X(){this.expando=M.expando+X.uid++}X.uid=1;X.prototype={cache:function(e){var t=e[this.expando];if(!t){t={};if(Z(e)){if(e.nodeType){e[this.expando]=t}else{Object.defineProperty(e,this.expando,{value:t,configurable:true})}}}return t},set:function(e,t,r){var a,n=this.cache(e);if(typeof t==="string"){n[$(t)]=r}else{for(a in t){n[$(a)]=t[a]}}return n},get:function(e,t){return t===undefined?this.cache(e):e[this.expando]&&e[this.expando][$(t)]},access:function(e,t,r){if(t===undefined||t&&typeof t==="string"&&r===undefined){return this.get(e,t)}this.set(e,t,r);return r!==undefined?r:t},remove:function(e,t){var r,a=e[this.expando];if(a===undefined){return}if(t!==undefined){if(Array.isArray(t)){t=t.map($)}else{t=$(t);t=t in a?[t]:t.match(N)||[]}r=t.length;while(r--){delete a[t[r]]}}if(t===undefined||M.isEmptyObject(a)){if(e.nodeType){e[this.expando]=undefined}else{delete e[this.expando]}}},hasData:function(e){var t=e[this.expando];return t!==undefined&&!M.isEmptyObject(t)}};var J=new X;var K=new X;var Q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ee=/[A-Z]/g;function te(e){if(e==="true"){return true}if(e==="false"){return false}if(e==="null"){return null}if(e===+e+""){return+e}if(Q.test(e)){return JSON.parse(e)}return e}function re(e,t,r){var a;if(r===undefined&&e.nodeType===1){a="data-"+t.replace(ee,"-$&").toLowerCase();r=e.getAttribute(a);if(typeof r==="string"){try{r=te(r)}catch(e){}K.set(e,t,r)}else{r=undefined}}return r}M.extend({hasData:function(e){return K.hasData(e)||J.hasData(e)},data:function(e,t,r){return K.access(e,t,r)},removeData:function(e,t){K.remove(e,t)},_data:function(e,t,r){return J.access(e,t,r)},_removeData:function(e,t){J.remove(e,t)}});M.fn.extend({data:function(r,e){var t,a,n,i=this[0],o=i&&i.attributes;if(r===undefined){if(this.length){n=K.get(i);if(i.nodeType===1&&!J.get(i,"hasDataAttrs")){t=o.length;while(t--){if(o[t]){a=o[t].name;if(a.indexOf("data-")===0){a=$(a.slice(5));re(i,a,n[a])}}}J.set(i,"hasDataAttrs",true)}}return n}if(typeof r==="object"){return this.each(function(){K.set(this,r)})}return Y(this,function(e){var t;if(i&&e===undefined){t=K.get(i,r);if(t!==undefined){return t}t=re(i,r);if(t!==undefined){return t}return}this.each(function(){K.set(this,r,e)})},null,e,arguments.length>1,null,true)},removeData:function(e){return this.each(function(){K.remove(this,e)})}});M.extend({queue:function(e,t,r){var a;if(e){t=(t||"fx")+"queue";a=J.get(e,t);if(r){if(!a||Array.isArray(r)){a=J.access(e,t,M.makeArray(r))}else{a.push(r)}}return a||[]}},dequeue:function(e,t){t=t||"fx";var r=M.queue(e,t),a=r.length,n=r.shift(),i=M._queueHooks(e,t),o=function(){M.dequeue(e,t)};if(n==="inprogress"){n=r.shift();a--}if(n){if(t==="fx"){r.unshift("inprogress")}delete i.stop;n.call(e,o,i)}if(!a&&i){i.empty.fire()}},_queueHooks:function(e,t){var r=t+"queueHooks";return J.get(e,r)||J.access(e,r,{empty:M.Callbacks("once memory").add(function(){J.remove(e,[t+"queue",r])})})}});M.fn.extend({queue:function(t,r){var e=2;if(typeof t!=="string"){r=t;t="fx";e--}if(arguments.length<e){return M.queue(this[0],t)}return r===undefined?this:this.each(function(){var e=M.queue(this,t,r);M._queueHooks(this,t);if(t==="fx"&&e[0]!=="inprogress"){M.dequeue(this,t)}})},dequeue:function(e){return this.each(function(){M.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,a=1,n=M.Deferred(),i=this,o=this.length,s=function(){if(!--a){n.resolveWith(i,[i])}};if(typeof e!=="string"){t=e;e=undefined}e=e||"fx";while(o--){r=J.get(i[o],e+"queueHooks");if(r&&r.empty){a++;r.empty.add(s)}}s();return n.promise(t)}});var ae=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var ne=new RegExp("^(?:([+-])=|)("+ae+")([a-z%]*)$","i");var ie=["Top","Right","Bottom","Left"];var oe=k.documentElement;var se=function(e){return M.contains(e.ownerDocument,e)},le={composed:true};if(oe.getRootNode){se=function(e){return M.contains(e.ownerDocument,e)||e.getRootNode(le)===e.ownerDocument}}var ue=function(e,t){e=t||e;return e.style.display==="none"||e.style.display===""&&se(e)&&M.css(e,"display")==="none"};function ce(e,t,r,a){var n,i,o=20,s=a?function(){return a.cur()}:function(){return M.css(e,t,"")},l=s(),u=r&&r[3]||(M.cssNumber[t]?"":"px"),c=e.nodeType&&(M.cssNumber[t]||u!=="px"&&+l)&&ne.exec(M.css(e,t));if(c&&c[3]!==u){l=l/2;u=u||c[3];c=+l||1;while(o--){M.style(e,t,c+u);if((1-i)*(1-(i=s()/l||.5))<=0){o=0}c=c/i}c=c*2;M.style(e,t,c+u);r=r||[]}if(r){c=+c||+l||0;n=r[1]?c+(r[1]+1)*r[2]:+r[2];if(a){a.unit=u;a.start=c;a.end=n}}return n}var fe={};function de(e){var t,r=e.ownerDocument,a=e.nodeName,n=fe[a];if(n){return n}t=r.body.appendChild(r.createElement(a));n=M.css(t,"display");t.parentNode.removeChild(t);if(n==="none"){n="block"}fe[a]=n;return n}function ve(e,t){var r,a,n=[],i=0,o=e.length;for(;i<o;i++){a=e[i];if(!a.style){continue}r=a.style.display;if(t){if(r==="none"){n[i]=J.get(a,"display")||null;if(!n[i]){a.style.display=""}}if(a.style.display===""&&ue(a)){n[i]=de(a)}}else{if(r!=="none"){n[i]="none";J.set(a,"display",r)}}}for(i=0;i<o;i++){if(n[i]!=null){e[i].style.display=n[i]}}return e}M.fn.extend({show:function(){return ve(this,true)},hide:function(){return ve(this)},toggle:function(e){if(typeof e==="boolean"){return e?this.show():this.hide()}return this.each(function(){if(ue(this)){M(this).show()}else{M(this).hide()}})}});var pe=/^(?:checkbox|radio)$/i;var he=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i;var me=/^$|^module$|\/(?:java|ecma)script/i;(function(){var e=k.createDocumentFragment(),t=e.appendChild(k.createElement("div")),r=k.createElement("input");r.setAttribute("type","radio");r.setAttribute("checked","checked");r.setAttribute("name","t");t.appendChild(r);g.checkClone=t.cloneNode(true).cloneNode(true).lastChild.checked;t.innerHTML="<textarea>x</textarea>";g.noCloneChecked=!!t.cloneNode(true).lastChild.defaultValue;t.innerHTML="<option></option>";g.option=!!t.lastChild})();var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead;ge.th=ge.td;if(!g.option){ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]}function ye(e,t){var r;if(typeof e.getElementsByTagName!=="undefined"){r=e.getElementsByTagName(t||"*")}else if(typeof e.querySelectorAll!=="undefined"){r=e.querySelectorAll(t||"*")}else{r=[]}if(t===undefined||t&&S(e,t)){return M.merge([e],r)}return r}function xe(e,t){var r=0,a=e.length;for(;r<a;r++){J.set(e[r],"globalEval",!t||J.get(t[r],"globalEval"))}}var be=/<|&#?\w+;/;function _e(e,t,r,a,n){var i,o,s,l,u,c,f=t.createDocumentFragment(),d=[],v=0,p=e.length;for(;v<p;v++){i=e[v];if(i||i===0){if(_(i)==="object"){M.merge(d,i.nodeType?[i]:i)}else if(!be.test(i)){d.push(t.createTextNode(i))}else{o=o||f.appendChild(t.createElement("div"));s=(he.exec(i)||["",""])[1].toLowerCase();l=ge[s]||ge._default;o.innerHTML=l[1]+M.htmlPrefilter(i)+l[2];c=l[0];while(c--){o=o.lastChild}M.merge(d,o.childNodes);o=f.firstChild;o.textContent=""}}}f.textContent="";v=0;while(i=d[v++]){if(a&&M.inArray(i,a)>-1){if(n){n.push(i)}continue}u=se(i);o=ye(f.appendChild(i),"script");if(u){xe(o)}if(r){c=0;while(i=o[c++]){if(me.test(i.type||"")){r.push(i)}}}}return f}var we=/^([^.]*)(?:\.(.+)|)/;function Te(){return true}function ke(){return false}function Me(e,t){return e===Ae()===(t==="focus")}function Ae(){try{return k.activeElement}catch(e){}}function Se(e,t,r,a,n,i){var o,s;if(typeof t==="object"){if(typeof r!=="string"){a=a||r;r=undefined}for(s in t){Se(e,s,r,a,t[s],i)}return e}if(a==null&&n==null){n=r;a=r=undefined}else if(n==null){if(typeof r==="string"){n=a;a=undefined}else{n=a;a=r;r=undefined}}if(n===false){n=ke}else if(!n){return e}if(i===1){o=n;n=function(e){M().off(e);return o.apply(this,arguments)};n.guid=o.guid||(o.guid=M.guid++)}return e.each(function(){M.event.add(this,t,n,a,r)})}M.event={global:{},add:function(t,e,r,a,n){var i,o,s,l,u,c,f,d,v,p,h,m=J.get(t);if(!Z(t)){return}if(r.handler){i=r;r=i.handler;n=i.selector}if(n){M.find.matchesSelector(oe,n)}if(!r.guid){r.guid=M.guid++}if(!(l=m.events)){l=m.events=Object.create(null)}if(!(o=m.handle)){o=m.handle=function(e){return typeof M!=="undefined"&&M.event.triggered!==e.type?M.event.dispatch.apply(t,arguments):undefined}}e=(e||"").match(N)||[""];u=e.length;while(u--){s=we.exec(e[u])||[];v=h=s[1];p=(s[2]||"").split(".").sort();if(!v){continue}f=M.event.special[v]||{};v=(n?f.delegateType:f.bindType)||v;f=M.event.special[v]||{};c=M.extend({type:v,origType:h,data:a,handler:r,guid:r.guid,selector:n,needsContext:n&&M.expr.match.needsContext.test(n),namespace:p.join(".")},i);if(!(d=l[v])){d=l[v]=[];d.delegateCount=0;if(!f.setup||f.setup.call(t,a,p,o)===false){if(t.addEventListener){t.addEventListener(v,o)}}}if(f.add){f.add.call(t,c);if(!c.handler.guid){c.handler.guid=r.guid}}if(n){d.splice(d.delegateCount++,0,c)}else{d.push(c)}M.event.global[v]=true}},remove:function(e,t,r,a,n){var i,o,s,l,u,c,f,d,v,p,h,m=J.hasData(e)&&J.get(e);if(!m||!(l=m.events)){return}t=(t||"").match(N)||[""];u=t.length;while(u--){s=we.exec(t[u])||[];v=h=s[1];p=(s[2]||"").split(".").sort();if(!v){for(v in l){M.event.remove(e,v+t[u],r,a,true)}continue}f=M.event.special[v]||{};v=(a?f.delegateType:f.bindType)||v;d=l[v]||[];s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)");o=i=d.length;while(i--){c=d[i];if((n||h===c.origType)&&(!r||r.guid===c.guid)&&(!s||s.test(c.namespace))&&(!a||a===c.selector||a==="**"&&c.selector)){d.splice(i,1);if(c.selector){d.delegateCount--}if(f.remove){f.remove.call(e,c)}}}if(o&&!d.length){if(!f.teardown||f.teardown.call(e,p,m.handle)===false){M.removeEvent(e,v,m.handle)}delete l[v]}}if(M.isEmptyObject(l)){J.remove(e,"handle events")}},dispatch:function(e){var t,r,a,n,i,o,s=new Array(arguments.length),l=M.event.fix(e),u=(J.get(this,"events")||Object.create(null))[l.type]||[],c=M.event.special[l.type]||{};s[0]=l;for(t=1;t<arguments.length;t++){s[t]=arguments[t]}l.delegateTarget=this;if(c.preDispatch&&c.preDispatch.call(this,l)===false){return}o=M.event.handlers.call(this,l,u);t=0;while((n=o[t++])&&!l.isPropagationStopped()){l.currentTarget=n.elem;r=0;while((i=n.handlers[r++])&&!l.isImmediatePropagationStopped()){if(!l.rnamespace||i.namespace===false||l.rnamespace.test(i.namespace)){l.handleObj=i;l.data=i.data;a=((M.event.special[i.origType]||{}).handle||i.handler).apply(n.elem,s);if(a!==undefined){if((l.result=a)===false){l.preventDefault();l.stopPropagation()}}}}}if(c.postDispatch){c.postDispatch.call(this,l)}return l.result},handlers:function(e,t){var r,a,n,i,o,s=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!(e.type==="click"&&e.button>=1)){for(;u!==this;u=u.parentNode||this){if(u.nodeType===1&&!(e.type==="click"&&u.disabled===true)){i=[];o={};for(r=0;r<l;r++){a=t[r];n=a.selector+" ";if(o[n]===undefined){o[n]=a.needsContext?M(n,this).index(u)>-1:M.find(n,this,null,[u]).length}if(o[n]){i.push(a)}}if(i.length){s.push({elem:u,handlers:i})}}}}u=this;if(l<t.length){s.push({elem:u,handlers:t.slice(l)})}return s},addProp:function(t,e){Object.defineProperty(M.Event.prototype,t,{enumerable:true,configurable:true,get:y(e)?function(){if(this.originalEvent){return e(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[t]}},set:function(e){Object.defineProperty(this,t,{enumerable:true,configurable:true,writable:true,value:e})}})},fix:function(e){return e[M.expando]?e:new M.Event(e)},special:{load:{noBubble:true},click:{setup:function(e){var t=this||e;if(pe.test(t.type)&&t.click&&S(t,"input")){Ee(t,"click",Te)}return false},trigger:function(e){var t=this||e;if(pe.test(t.type)&&t.click&&S(t,"input")){Ee(t,"click")}return true},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&S(t,"input")&&J.get(t,"click")||S(t,"a")}},beforeunload:{postDispatch:function(e){if(e.result!==undefined&&e.originalEvent){e.originalEvent.returnValue=e.result}}}}};function Ee(e,n,i){if(!i){if(J.get(e,n)===undefined){M.event.add(e,n,Te)}return}J.set(e,n,false);M.event.add(e,n,{namespace:false,handler:function(e){var t,r,a=J.get(this,n);if(e.isTrigger&1&&this[n]){if(!a.length){a=s.call(arguments);J.set(this,n,a);t=i(this,n);this[n]();r=J.get(this,n);if(a!==r||t){J.set(this,n,false)}else{r={}}if(a!==r){e.stopImmediatePropagation();e.preventDefault();return r&&r.value}}else if((M.event.special[n]||{}).delegateType){e.stopPropagation()}}else if(a.length){J.set(this,n,{value:M.event.trigger(M.extend(a[0],M.Event.prototype),a.slice(1),this)});e.stopImmediatePropagation()}}})}M.removeEvent=function(e,t,r){if(e.removeEventListener){e.removeEventListener(t,r)}};M.Event=function(e,t){if(!(this instanceof M.Event)){return new M.Event(e,t)}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.returnValue===false?Te:ke;this.target=e.target&&e.target.nodeType===3?e.target.parentNode:e.target;this.currentTarget=e.currentTarget;this.relatedTarget=e.relatedTarget}else{this.type=e}if(t){M.extend(this,t)}this.timeStamp=e&&e.timeStamp||Date.now();this[M.expando]=true};M.Event.prototype={constructor:M.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Te;if(e&&!this.isSimulated){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Te;if(e&&!this.isSimulated){e.stopPropagation()}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Te;if(e&&!this.isSimulated){e.stopImmediatePropagation()}this.stopPropagation()}};M.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,char:true,code:true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:true},M.event.addProp);M.each({focus:"focusin",blur:"focusout"},function(e,t){M.event.special[e]={setup:function(){Ee(this,e,Me);return false},trigger:function(){Ee(this,e);return true},_default:function(){return true},delegateType:t}});M.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){M.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,r=this,a=e.relatedTarget,n=e.handleObj;if(!a||a!==r&&!M.contains(r,a)){e.type=n.origType;t=n.handler.apply(this,arguments);e.type=i}return t}}});M.fn.extend({on:function(e,t,r,a){return Se(this,e,t,r,a)},one:function(e,t,r,a){return Se(this,e,t,r,a,1)},off:function(e,t,r){var a,n;if(e&&e.preventDefault&&e.handleObj){a=e.handleObj;M(e.delegateTarget).off(a.namespace?a.origType+"."+a.namespace:a.origType,a.selector,a.handler);return this}if(typeof e==="object"){for(n in e){this.off(n,t,e[n])}return this}if(t===false||typeof t==="function"){r=t;t=undefined}if(r===false){r=ke}return this.each(function(){M.event.remove(this,e,r,t)})}});var Le=/<script|<style|<link/i,Ce=/checked\s*(?:[^=]|=\s*.checked.)/i,De=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Oe(e,t){if(S(e,"table")&&S(t.nodeType!==11?t:t.firstChild,"tr")){return M(e).children("tbody")[0]||e}return e}function Ie(e){e.type=(e.getAttribute("type")!==null)+"/"+e.type;return e}function Pe(e){if((e.type||"").slice(0,5)==="true/"){e.type=e.type.slice(5)}else{e.removeAttribute("type")}return e}function Re(e,t){var r,a,n,i,o,s,l;if(t.nodeType!==1){return}if(J.hasData(e)){i=J.get(e);l=i.events;if(l){J.remove(t,"handle events");for(n in l){for(r=0,a=l[n].length;r<a;r++){M.event.add(t,n,l[n][r])}}}}if(K.hasData(e)){o=K.access(e);s=M.extend({},o);K.set(t,s)}}function Ne(e,t){var r=t.nodeName.toLowerCase();if(r==="input"&&pe.test(e.type)){t.checked=e.checked}else if(r==="input"||r==="textarea"){t.defaultValue=e.defaultValue}}function ze(r,a,n,i){a=h(a);var e,t,o,s,l,u,c=0,f=r.length,d=f-1,v=a[0],p=y(v);if(p||f>1&&typeof v==="string"&&!g.checkClone&&Ce.test(v)){return r.each(function(e){var t=r.eq(e);if(p){a[0]=v.call(this,e,t.html())}ze(t,a,n,i)})}if(f){e=_e(a,r[0].ownerDocument,false,r,i);t=e.firstChild;if(e.childNodes.length===1){e=t}if(t||i){o=M.map(ye(e,"script"),Ie);s=o.length;for(;c<f;c++){l=e;if(c!==d){l=M.clone(l,true,true);if(s){M.merge(o,ye(l,"script"))}}n.call(r[c],l,c)}if(s){u=o[o.length-1].ownerDocument;M.map(o,Pe);for(c=0;c<s;c++){l=o[c];if(me.test(l.type||"")&&!J.access(l,"globalEval")&&M.contains(u,l)){if(l.src&&(l.type||"").toLowerCase()!=="module"){if(M._evalUrl&&!l.noModule){M._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u)}}else{b(l.textContent.replace(De,""),l,u)}}}}}}return r}function Fe(e,t,r){var a,n=t?M.filter(t,e):e,i=0;for(;(a=n[i])!=null;i++){if(!r&&a.nodeType===1){M.cleanData(ye(a))}if(a.parentNode){if(r&&se(a)){xe(ye(a,"script"))}a.parentNode.removeChild(a)}}return e}M.extend({htmlPrefilter:function(e){return e},clone:function(e,t,r){var a,n,i,o,s=e.cloneNode(true),l=se(e);if(!g.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!M.isXMLDoc(e)){o=ye(s);i=ye(e);for(a=0,n=i.length;a<n;a++){Ne(i[a],o[a])}}if(t){if(r){i=i||ye(e);o=o||ye(s);for(a=0,n=i.length;a<n;a++){Re(i[a],o[a])}}else{Re(e,s)}}o=ye(s,"script");if(o.length>0){xe(o,!l&&ye(e,"script"))}return s},cleanData:function(e){var t,r,a,n=M.event.special,i=0;for(;(r=e[i])!==undefined;i++){if(Z(r)){if(t=r[J.expando]){if(t.events){for(a in t.events){if(n[a]){M.event.remove(r,a)}else{M.removeEvent(r,a,t.handle)}}}r[J.expando]=undefined}if(r[K.expando]){r[K.expando]=undefined}}}}});M.fn.extend({detach:function(e){return Fe(this,e,true)},remove:function(e){return Fe(this,e)},text:function(e){return Y(this,function(e){return e===undefined?M.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=e}})},null,e,arguments.length)},append:function(){return ze(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Oe(this,e);t.appendChild(e)}})},prepend:function(){return ze(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Oe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return ze(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}})},after:function(){return ze(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)}})},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){if(e.nodeType===1){M.cleanData(ye(e,false));e.textContent=""}}return this},clone:function(e,t){e=e==null?false:e;t=t==null?e:t;return this.map(function(){return M.clone(this,e,t)})},html:function(e){return Y(this,function(e){var t=this[0]||{},r=0,a=this.length;if(e===undefined&&t.nodeType===1){return t.innerHTML}if(typeof e==="string"&&!Le.test(e)&&!ge[(he.exec(e)||["",""])[1].toLowerCase()]){e=M.htmlPrefilter(e);try{for(;r<a;r++){t=this[r]||{};if(t.nodeType===1){M.cleanData(ye(t,false));t.innerHTML=e}}t=0}catch(e){}}if(t){this.empty().append(e)}},null,e,arguments.length)},replaceWith:function(){var r=[];return ze(this,arguments,function(e){var t=this.parentNode;if(M.inArray(this,r)<0){M.cleanData(ye(this));if(t){t.replaceChild(e,this)}}},r)}});M.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,o){M.fn[e]=function(e){var t,r=[],a=M(e),n=a.length-1,i=0;for(;i<=n;i++){t=i===n?this:this.clone(true);M(a[i])[o](t);l.apply(r,t.get())}return this.pushStack(r)}});var je=new RegExp("^("+ae+")(?!px)[a-z%]+$","i");var He=function(e){var t=e.ownerDocument.defaultView;if(!t||!t.opener){t=T}return t.getComputedStyle(e)};var Be=function(e,t,r){var a,n,i={};for(n in t){i[n]=e.style[n];e.style[n]=t[n]}a=r.call(e);for(n in t){e.style[n]=i[n]}return a};var qe=new RegExp(ie.join("|"),"i");(function(){function e(){if(!u){return}l.style.cssText="position:absolute;left:-11111px;width:60px;"+"margin-top:1px;padding:0;border:0";u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;"+"margin:auto;border:1px;padding:1px;"+"width:60%;top:1%";oe.appendChild(l).appendChild(u);var e=T.getComputedStyle(u);r=e.top!=="1%";s=t(e.marginLeft)===12;u.style.right="60%";i=t(e.right)===36;a=t(e.width)===36;u.style.position="absolute";n=t(u.offsetWidth/3)===12;oe.removeChild(l);u=null}function t(e){return Math.round(parseFloat(e))}var r,a,n,i,o,s,l=k.createElement("div"),u=k.createElement("div");if(!u.style){return}u.style.backgroundClip="content-box";u.cloneNode(true).style.backgroundClip="";g.clearCloneStyle=u.style.backgroundClip==="content-box";M.extend(g,{boxSizingReliable:function(){e();return a},pixelBoxStyles:function(){e();return i},pixelPosition:function(){e();return r},reliableMarginLeft:function(){e();return s},scrollboxSize:function(){e();return n},reliableTrDimensions:function(){var e,t,r,a;if(o==null){e=k.createElement("table");t=k.createElement("tr");r=k.createElement("div");e.style.cssText="position:absolute;left:-11111px;border-collapse:separate";t.style.cssText="border:1px solid";t.style.height="1px";r.style.height="9px";r.style.display="block";oe.appendChild(e).appendChild(t).appendChild(r);a=T.getComputedStyle(t);o=parseInt(a.height,10)+parseInt(a.borderTopWidth,10)+parseInt(a.borderBottomWidth,10)===t.offsetHeight;oe.removeChild(e)}return o}})})();function Ue(e,t,r){var a,n,i,o,s=e.style;r=r||He(e);if(r){o=r.getPropertyValue(t)||r[t];if(o===""&&!se(e)){o=M.style(e,t)}if(!g.pixelBoxStyles()&&je.test(o)&&qe.test(t)){a=s.width;n=s.minWidth;i=s.maxWidth;s.minWidth=s.maxWidth=s.width=o;o=r.width;s.width=a;s.minWidth=n;s.maxWidth=i}}return o!==undefined?o+"":o}function Ye(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}var Ve=["Webkit","Moz","ms"],Ge=k.createElement("div").style,We={};function $e(e){var t=e[0].toUpperCase()+e.slice(1),r=Ve.length;while(r--){e=Ve[r]+t;if(e in Ge){return e}}}function Ze(e){var t=M.cssProps[e]||We[e];if(t){return t}if(e in Ge){return e}return We[e]=$e(e)||e}var Xe=/^(none|table(?!-c[ea]).+)/,Je=/^--/,Ke={position:"absolute",visibility:"hidden",display:"block"},Qe={letterSpacing:"0",fontWeight:"400"};function et(e,t,r){var a=ne.exec(t);return a?Math.max(0,a[2]-(r||0))+(a[3]||"px"):t}function tt(e,t,r,a,n,i){var o=t==="width"?1:0,s=0,l=0;if(r===(a?"border":"content")){return 0}for(;o<4;o+=2){if(r==="margin"){l+=M.css(e,r+ie[o],true,n)}if(!a){l+=M.css(e,"padding"+ie[o],true,n);if(r!=="padding"){l+=M.css(e,"border"+ie[o]+"Width",true,n)}else{s+=M.css(e,"border"+ie[o]+"Width",true,n)}}else{if(r==="content"){l-=M.css(e,"padding"+ie[o],true,n)}if(r!=="margin"){l-=M.css(e,"border"+ie[o]+"Width",true,n)}}}if(!a&&i>=0){l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-l-s-.5))||0}return l}function rt(e,t,r){var a=He(e),n=!g.boxSizingReliable()||r,i=n&&M.css(e,"boxSizing",false,a)==="border-box",o=i,s=Ue(e,t,a),l="offset"+t[0].toUpperCase()+t.slice(1);if(je.test(s)){if(!r){return s}s="auto"}if((!g.boxSizingReliable()&&i||!g.reliableTrDimensions()&&S(e,"tr")||s==="auto"||!parseFloat(s)&&M.css(e,"display",false,a)==="inline")&&e.getClientRects().length){i=M.css(e,"boxSizing",false,a)==="border-box";o=l in e;if(o){s=e[l]}}s=parseFloat(s)||0;return s+tt(e,t,r||(i?"border":"content"),o,a,s)+"px"}M.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=Ue(e,"opacity");return r===""?"1":r}}}},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,gridArea:true,gridColumn:true,gridColumnEnd:true,gridColumnStart:true,gridRow:true,gridRowEnd:true,gridRowStart:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{},style:function(e,t,r,a){if(!e||e.nodeType===3||e.nodeType===8||!e.style){return}var n,i,o,s=$(t),l=Je.test(t),u=e.style;if(!l){t=Ze(s)}o=M.cssHooks[t]||M.cssHooks[s];if(r!==undefined){i=typeof r;if(i==="string"&&(n=ne.exec(r))&&n[1]){r=ce(e,t,n);i="number"}if(r==null||r!==r){return}if(i==="number"&&!l){r+=n&&n[3]||(M.cssNumber[s]?"":"px")}if(!g.clearCloneStyle&&r===""&&t.indexOf("background")===0){u[t]="inherit"}if(!o||!("set"in o)||(r=o.set(e,r,a))!==undefined){if(l){u.setProperty(t,r)}else{u[t]=r}}}else{if(o&&"get"in o&&(n=o.get(e,false,a))!==undefined){return n}return u[t]}},css:function(e,t,r,a){var n,i,o,s=$(t),l=Je.test(t);if(!l){t=Ze(s)}o=M.cssHooks[t]||M.cssHooks[s];if(o&&"get"in o){n=o.get(e,true,r)}if(n===undefined){n=Ue(e,t,a)}if(n==="normal"&&t in Qe){n=Qe[t]}if(r===""||r){i=parseFloat(n);return r===true||isFinite(i)?i||0:n}return n}});M.each(["height","width"],function(e,u){M.cssHooks[u]={get:function(e,t,r){if(t){return Xe.test(M.css(e,"display"))&&(!e.getClientRects().length||!e.getBoundingClientRect().width)?Be(e,Ke,function(){return rt(e,u,r)}):rt(e,u,r)}},set:function(e,t,r){var a,n=He(e),i=!g.scrollboxSize()&&n.position==="absolute",o=i||r,s=o&&M.css(e,"boxSizing",false,n)==="border-box",l=r?tt(e,u,r,s,n):0;if(s&&i){l-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(n[u])-tt(e,u,"border",false,n)-.5)}if(l&&(a=ne.exec(t))&&(a[3]||"px")!=="px"){e.style[u]=t;t=M.css(e,u)}return et(e,t,l)}}});M.cssHooks.marginLeft=Ye(g.reliableMarginLeft,function(e,t){if(t){return(parseFloat(Ue(e,"marginLeft"))||e.getBoundingClientRect().left-Be(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}});M.each({margin:"",padding:"",border:"Width"},function(n,i){M.cssHooks[n+i]={expand:function(e){var t=0,r={},a=typeof e==="string"?e.split(" "):[e];for(;t<4;t++){r[n+ie[t]+i]=a[t]||a[t-2]||a[0]}return r}};if(n!=="margin"){M.cssHooks[n+i].set=et}});M.fn.extend({css:function(e,t){return Y(this,function(e,t,r){var a,n,i={},o=0;if(Array.isArray(t)){a=He(e);n=t.length;for(;o<n;o++){i[t[o]]=M.css(e,t[o],false,a)}return i}return r!==undefined?M.style(e,t,r):M.css(e,t)},e,t,arguments.length>1)}});function at(e,t,r,a,n){return new at.prototype.init(e,t,r,a,n)}M.Tween=at;at.prototype={constructor:at,init:function(e,t,r,a,n,i){this.elem=e;this.prop=r;this.easing=n||M.easing._default;this.options=t;this.start=this.now=this.cur();this.end=a;this.unit=i||(M.cssNumber[r]?"":"px")},cur:function(){var e=at.propHooks[this.prop];return e&&e.get?e.get(this):at.propHooks._default.get(this)},run:function(e){var t,r=at.propHooks[this.prop];if(this.options.duration){this.pos=t=M.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration)}else{this.pos=t=e}this.now=(this.end-this.start)*t+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(r&&r.set){r.set(this)}else{at.propHooks._default.set(this)}return this}};at.prototype.init.prototype=at.prototype;at.propHooks={_default:{get:function(e){var t;if(e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null){return e.elem[e.prop]}t=M.css(e.elem,e.prop,"");return!t||t==="auto"?0:t},set:function(e){if(M.fx.step[e.prop]){M.fx.step[e.prop](e)}else if(e.elem.nodeType===1&&(M.cssHooks[e.prop]||e.elem.style[Ze(e.prop)]!=null)){M.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}};at.propHooks.scrollTop=at.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};M.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"};M.fx=at.prototype.init;M.fx.step={};var nt,it,ot=/^(?:toggle|show|hide)$/,st=/queueHooks$/;function lt(){if(it){if(k.hidden===false&&T.requestAnimationFrame){T.requestAnimationFrame(lt)}else{T.setTimeout(lt,M.fx.interval)}M.fx.tick()}}function ut(){T.setTimeout(function(){nt=undefined});return nt=Date.now()}function ct(e,t){var r,a=0,n={height:e};t=t?1:0;for(;a<4;a+=2-t){r=ie[a];n["margin"+r]=n["padding"+r]=e}if(t){n.opacity=n.width=e}return n}function ft(e,t,r){var a,n=(pt.tweeners[t]||[]).concat(pt.tweeners["*"]),i=0,o=n.length;for(;i<o;i++){if(a=n[i].call(r,t,e)){return a}}}function dt(e,t,r){var a,n,i,o,s,l,u,c,f="width"in t||"height"in t,d=this,v={},p=e.style,h=e.nodeType&&ue(e),m=J.get(e,"fxshow");if(!r.queue){o=M._queueHooks(e,"fx");if(o.unqueued==null){o.unqueued=0;s=o.empty.fire;o.empty.fire=function(){if(!o.unqueued){s()}}}o.unqueued++;d.always(function(){d.always(function(){o.unqueued--;if(!M.queue(e,"fx").length){o.empty.fire()}})})}for(a in t){n=t[a];if(ot.test(n)){delete t[a];i=i||n==="toggle";if(n===(h?"hide":"show")){if(n==="show"&&m&&m[a]!==undefined){h=true}else{continue}}v[a]=m&&m[a]||M.style(e,a)}}l=!M.isEmptyObject(t);if(!l&&M.isEmptyObject(v)){return}if(f&&e.nodeType===1){r.overflow=[p.overflow,p.overflowX,p.overflowY];u=m&&m.display;if(u==null){u=J.get(e,"display")}c=M.css(e,"display");if(c==="none"){if(u){c=u}else{ve([e],true);u=e.style.display||u;c=M.css(e,"display");ve([e])}}if(c==="inline"||c==="inline-block"&&u!=null){if(M.css(e,"float")==="none"){if(!l){d.done(function(){p.display=u});if(u==null){c=p.display;u=c==="none"?"":c}}p.display="inline-block"}}}if(r.overflow){p.overflow="hidden";d.always(function(){p.overflow=r.overflow[0];p.overflowX=r.overflow[1];p.overflowY=r.overflow[2]})}l=false;for(a in v){if(!l){if(m){if("hidden"in m){h=m.hidden}}else{m=J.access(e,"fxshow",{display:u})}if(i){m.hidden=!h}if(h){ve([e],true)}d.done(function(){if(!h){ve([e])}J.remove(e,"fxshow");for(a in v){M.style(e,a,v[a])}})}l=ft(h?m[a]:0,a,d);if(!(a in m)){m[a]=l.start;if(h){l.end=l.start;l.start=0}}}}function vt(e,t){var r,a,n,i,o;for(r in e){a=$(r);n=t[a];i=e[r];if(Array.isArray(i)){n=i[1];i=e[r]=i[0]}if(r!==a){e[a]=i;delete e[r]}o=M.cssHooks[a];if(o&&"expand"in o){i=o.expand(i);delete e[a];for(r in i){if(!(r in e)){e[r]=i[r];t[r]=n}}}else{t[a]=n}}}function pt(o,e,t){var r,s,a=0,n=pt.prefilters.length,l=M.Deferred().always(function(){delete i.elem}),i=function(){if(s){return false}var e=nt||ut(),t=Math.max(0,u.startTime+u.duration-e),r=t/u.duration||0,a=1-r,n=0,i=u.tweens.length;for(;n<i;n++){u.tweens[n].run(a)}l.notifyWith(o,[u,a,t]);if(a<1&&i){return t}if(!i){l.notifyWith(o,[u,1,0])}l.resolveWith(o,[u]);return false},u=l.promise({elem:o,props:M.extend({},e),opts:M.extend(true,{specialEasing:{},easing:M.easing._default},t),originalProperties:e,originalOptions:t,startTime:nt||ut(),duration:t.duration,tweens:[],createTween:function(e,t){var r=M.Tween(o,u.opts,e,t,u.opts.specialEasing[e]||u.opts.easing);u.tweens.push(r);return r},stop:function(e){var t=0,r=e?u.tweens.length:0;if(s){return this}s=true;for(;t<r;t++){u.tweens[t].run(1)}if(e){l.notifyWith(o,[u,1,0]);l.resolveWith(o,[u,e])}else{l.rejectWith(o,[u,e])}return this}}),c=u.props;vt(c,u.opts.specialEasing);for(;a<n;a++){r=pt.prefilters[a].call(u,o,c,u.opts);if(r){if(y(r.stop)){M._queueHooks(u.elem,u.opts.queue).stop=r.stop.bind(r)}return r}}M.map(c,ft,u);if(y(u.opts.start)){u.opts.start.call(o,u)}u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always);M.fx.timer(M.extend(i,{elem:o,anim:u,queue:u.opts.queue}));return u}M.Animation=M.extend(pt,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);ce(r.elem,e,ne.exec(t),r);return r}]},tweener:function(e,t){if(y(e)){t=e;e=["*"]}else{e=e.match(N)}var r,a=0,n=e.length;for(;a<n;a++){r=e[a];pt.tweeners[r]=pt.tweeners[r]||[];pt.tweeners[r].unshift(t)}},prefilters:[dt],prefilter:function(e,t){if(t){pt.prefilters.unshift(e)}else{pt.prefilters.push(e)}}});M.speed=function(e,t,r){var a=e&&typeof e==="object"?M.extend({},e):{complete:r||!r&&t||y(e)&&e,duration:e,easing:r&&t||t&&!y(t)&&t};if(M.fx.off){a.duration=0}else{if(typeof a.duration!=="number"){if(a.duration in M.fx.speeds){a.duration=M.fx.speeds[a.duration]}else{a.duration=M.fx.speeds._default}}}if(a.queue==null||a.queue===true){a.queue="fx"}a.old=a.complete;a.complete=function(){if(y(a.old)){a.old.call(this)}if(a.queue){M.dequeue(this,a.queue)}};return a};M.fn.extend({fadeTo:function(e,t,r,a){return this.filter(ue).css("opacity",0).show().end().animate({opacity:t},e,r,a)},animate:function(t,e,r,a){var n=M.isEmptyObject(t),i=M.speed(e,r,a),o=function(){var e=pt(this,M.extend({},t),i);if(n||J.get(this,"finish")){e.stop(true)}};o.finish=o;return n||i.queue===false?this.each(o):this.queue(i.queue,o)},stop:function(n,e,i){var o=function(e){var t=e.stop;delete e.stop;t(i)};if(typeof n!=="string"){i=e;e=n;n=undefined}if(e){this.queue(n||"fx",[])}return this.each(function(){var e=true,t=n!=null&&n+"queueHooks",r=M.timers,a=J.get(this);if(t){if(a[t]&&a[t].stop){o(a[t])}}else{for(t in a){if(a[t]&&a[t].stop&&st.test(t)){o(a[t])}}}for(t=r.length;t--;){if(r[t].elem===this&&(n==null||r[t].queue===n)){r[t].anim.stop(i);e=false;r.splice(t,1)}}if(e||!i){M.dequeue(this,n)}})},finish:function(o){if(o!==false){o=o||"fx"}return this.each(function(){var e,t=J.get(this),r=t[o+"queue"],a=t[o+"queueHooks"],n=M.timers,i=r?r.length:0;t.finish=true;M.queue(this,o,[]);if(a&&a.stop){a.stop.call(this,true)}for(e=n.length;e--;){if(n[e].elem===this&&n[e].queue===o){n[e].anim.stop(true);n.splice(e,1)}}for(e=0;e<i;e++){if(r[e]&&r[e].finish){r[e].finish.call(this)}}delete t.finish})}});M.each(["toggle","show","hide"],function(e,a){var n=M.fn[a];M.fn[a]=function(e,t,r){return e==null||typeof e==="boolean"?n.apply(this,arguments):this.animate(ct(a,true),e,t,r)}});M.each({slideDown:ct("show"),slideUp:ct("hide"),slideToggle:ct("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,a){M.fn[e]=function(e,t,r){return this.animate(a,e,t,r)}});M.timers=[];M.fx.tick=function(){var e,t=0,r=M.timers;nt=Date.now();for(;t<r.length;t++){e=r[t];if(!e()&&r[t]===e){r.splice(t--,1)}}if(!r.length){M.fx.stop()}nt=undefined};M.fx.timer=function(e){M.timers.push(e);M.fx.start()};M.fx.interval=13;M.fx.start=function(){if(it){return}it=true;lt()};M.fx.stop=function(){it=null};M.fx.speeds={slow:600,fast:200,_default:400};M.fn.delay=function(a,e){a=M.fx?M.fx.speeds[a]||a:a;e=e||"fx";return this.queue(e,function(e,t){var r=T.setTimeout(e,a);t.stop=function(){T.clearTimeout(r)}})};(function(){var e=k.createElement("input"),t=k.createElement("select"),r=t.appendChild(k.createElement("option"));e.type="checkbox";g.checkOn=e.value!=="";g.optSelected=r.selected;e=k.createElement("input");e.value="t";e.type="radio";g.radioValue=e.value==="t"})();var ht,mt=M.expr.attrHandle;M.fn.extend({attr:function(e,t){return Y(this,M.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){M.removeAttr(this,e)})}});M.extend({attr:function(e,t,r){var a,n,i=e.nodeType;if(i===3||i===8||i===2){return}if(typeof e.getAttribute==="undefined"){return M.prop(e,t,r)}if(i!==1||!M.isXMLDoc(e)){n=M.attrHooks[t.toLowerCase()]||(M.expr.match.bool.test(t)?ht:undefined)}if(r!==undefined){if(r===null){M.removeAttr(e,t);return}if(n&&"set"in n&&(a=n.set(e,r,t))!==undefined){return a}e.setAttribute(t,r+"");return r}if(n&&"get"in n&&(a=n.get(e,t))!==null){return a}a=M.find.attr(e,t);return a==null?undefined:a},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&t==="radio"&&S(e,"input")){var r=e.value;e.setAttribute("type",t);if(r){e.value=r}return t}}}},removeAttr:function(e,t){var r,a=0,n=t&&t.match(N);if(n&&e.nodeType===1){while(r=n[a++]){e.removeAttribute(r)}}}});ht={set:function(e,t,r){if(t===false){M.removeAttr(e,r)}else{e.setAttribute(r,r)}return r}};M.each(M.expr.match.bool.source.match(/\w+/g),function(e,t){var o=mt[t]||M.find.attr;mt[t]=function(e,t,r){var a,n,i=t.toLowerCase();if(!r){n=mt[i];mt[i]=a;a=o(e,t,r)!=null?i:null;mt[i]=n}return a}});var gt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;M.fn.extend({prop:function(e,t){return Y(this,M.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[M.propFix[e]||e]})}});M.extend({prop:function(e,t,r){var a,n,i=e.nodeType;if(i===3||i===8||i===2){return}if(i!==1||!M.isXMLDoc(e)){t=M.propFix[t]||t;n=M.propHooks[t]}if(r!==undefined){if(n&&"set"in n&&(a=n.set(e,r,t))!==undefined){return a}return e[t]=r}if(n&&"get"in n&&(a=n.get(e,t))!==null){return a}return e[t]},propHooks:{tabIndex:{get:function(e){var t=M.find.attr(e,"tabindex");if(t){return parseInt(t,10)}if(gt.test(e.nodeName)||yt.test(e.nodeName)&&e.href){return 0}return-1}}},propFix:{for:"htmlFor",class:"className"}});if(!g.optSelected){M.propHooks.selected={get:function(e){var t=e.parentNode;if(t&&t.parentNode){t.parentNode.selectedIndex}return null},set:function(e){var t=e.parentNode;if(t){t.selectedIndex;if(t.parentNode){t.parentNode.selectedIndex}}}}}M.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){M.propFix[this.toLowerCase()]=this});function xt(e){var t=e.match(N)||[];return t.join(" ")}function bt(e){return e.getAttribute&&e.getAttribute("class")||""}function _t(e){if(Array.isArray(e)){return e}if(typeof e==="string"){return e.match(N)||[]}return[]}M.fn.extend({addClass:function(t){var e,r,a,n,i,o,s,l=0;if(y(t)){return this.each(function(e){M(this).addClass(t.call(this,e,bt(this)))})}e=_t(t);if(e.length){while(r=this[l++]){n=bt(r);a=r.nodeType===1&&" "+xt(n)+" ";if(a){o=0;while(i=e[o++]){if(a.indexOf(" "+i+" ")<0){a+=i+" "}}s=xt(a);if(n!==s){r.setAttribute("class",s)}}}}return this},removeClass:function(t){var e,r,a,n,i,o,s,l=0;if(y(t)){return this.each(function(e){M(this).removeClass(t.call(this,e,bt(this)))})}if(!arguments.length){return this.attr("class","")}e=_t(t);if(e.length){while(r=this[l++]){n=bt(r);a=r.nodeType===1&&" "+xt(n)+" ";if(a){o=0;while(i=e[o++]){while(a.indexOf(" "+i+" ")>-1){a=a.replace(" "+i+" "," ")}}s=xt(a);if(n!==s){r.setAttribute("class",s)}}}}return this},toggleClass:function(n,t){var i=typeof n,o=i==="string"||Array.isArray(n);if(typeof t==="boolean"&&o){return t?this.addClass(n):this.removeClass(n)}if(y(n)){return this.each(function(e){M(this).toggleClass(n.call(this,e,bt(this),t),t)})}return this.each(function(){var e,t,r,a;if(o){t=0;r=M(this);a=_t(n);while(e=a[t++]){if(r.hasClass(e)){r.removeClass(e)}else{r.addClass(e)}}}else if(n===undefined||i==="boolean"){e=bt(this);if(e){J.set(this,"__className__",e)}if(this.setAttribute){this.setAttribute("class",e||n===false?"":J.get(this,"__className__")||"")}}})},hasClass:function(e){var t,r,a=0;t=" "+e+" ";while(r=this[a++]){if(r.nodeType===1&&(" "+xt(bt(r))+" ").indexOf(t)>-1){return true}}return false}});var wt=/\r/g;M.fn.extend({val:function(r){var a,e,n,t=this[0];if(!arguments.length){if(t){a=M.valHooks[t.type]||M.valHooks[t.nodeName.toLowerCase()];if(a&&"get"in a&&(e=a.get(t,"value"))!==undefined){return e}e=t.value;if(typeof e==="string"){return e.replace(wt,"")}return e==null?"":e}return}n=y(r);return this.each(function(e){var t;if(this.nodeType!==1){return}if(n){t=r.call(this,e,M(this).val())}else{t=r}if(t==null){t=""}else if(typeof t==="number"){t+=""}else if(Array.isArray(t)){t=M.map(t,function(e){return e==null?"":e+""})}a=M.valHooks[this.type]||M.valHooks[this.nodeName.toLowerCase()];if(!a||!("set"in a)||a.set(this,t,"value")===undefined){this.value=t}})}});M.extend({valHooks:{option:{get:function(e){var t=M.find.attr(e,"value");return t!=null?t:xt(M.text(e))}},select:{get:function(e){var t,r,a,n=e.options,i=e.selectedIndex,o=e.type==="select-one",s=o?null:[],l=o?i+1:n.length;if(i<0){a=l}else{a=o?i:0}for(;a<l;a++){r=n[a];if((r.selected||a===i)&&!r.disabled&&(!r.parentNode.disabled||!S(r.parentNode,"optgroup"))){t=M(r).val();if(o){return t}s.push(t)}}return s},set:function(e,t){var r,a,n=e.options,i=M.makeArray(t),o=n.length;while(o--){a=n[o];if(a.selected=M.inArray(M.valHooks.option.get(a),i)>-1){r=true}}if(!r){e.selectedIndex=-1}return i}}}});M.each(["radio","checkbox"],function(){M.valHooks[this]={set:function(e,t){if(Array.isArray(t)){return e.checked=M.inArray(M(e).val(),t)>-1}}};if(!g.checkOn){M.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value}}});g.focusin="onfocusin"in T;var Tt=/^(?:focusinfocus|focusoutblur)$/,kt=function(e){e.stopPropagation()};M.extend(M.event,{trigger:function(e,t,r,a){var n,i,o,s,l,u,c,f,d=[r||k],v=m.call(e,"type")?e.type:e,p=m.call(e,"namespace")?e.namespace.split("."):[];i=f=o=r=r||k;if(r.nodeType===3||r.nodeType===8){return}if(Tt.test(v+M.event.triggered)){return}if(v.indexOf(".")>-1){p=v.split(".");v=p.shift();p.sort()}l=v.indexOf(":")<0&&"on"+v;e=e[M.expando]?e:new M.Event(v,typeof e==="object"&&e);e.isTrigger=a?2:3;e.namespace=p.join(".");e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;e.result=undefined;if(!e.target){e.target=r}t=t==null?[e]:M.makeArray(t,[e]);c=M.event.special[v]||{};if(!a&&c.trigger&&c.trigger.apply(r,t)===false){return}if(!a&&!c.noBubble&&!x(r)){s=c.delegateType||v;if(!Tt.test(s+v)){i=i.parentNode}for(;i;i=i.parentNode){d.push(i);o=i}if(o===(r.ownerDocument||k)){d.push(o.defaultView||o.parentWindow||T)}}n=0;while((i=d[n++])&&!e.isPropagationStopped()){f=i;e.type=n>1?s:c.bindType||v;u=(J.get(i,"events")||Object.create(null))[e.type]&&J.get(i,"handle");if(u){u.apply(i,t)}u=l&&i[l];if(u&&u.apply&&Z(i)){e.result=u.apply(i,t);if(e.result===false){e.preventDefault()}}}e.type=v;if(!a&&!e.isDefaultPrevented()){if((!c._default||c._default.apply(d.pop(),t)===false)&&Z(r)){if(l&&y(r[v])&&!x(r)){o=r[l];if(o){r[l]=null}M.event.triggered=v;if(e.isPropagationStopped()){f.addEventListener(v,kt)}r[v]();if(e.isPropagationStopped()){f.removeEventListener(v,kt)}M.event.triggered=undefined;if(o){r[l]=o}}}}return e.result},simulate:function(e,t,r){var a=M.extend(new M.Event,r,{type:e,isSimulated:true});M.event.trigger(a,null,t)}});M.fn.extend({trigger:function(e,t){return this.each(function(){M.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];if(r){return M.event.trigger(e,t,r,true)}}});if(!g.focusin){M.each({focus:"focusin",blur:"focusout"},function(r,a){var n=function(e){M.event.simulate(a,e.target,M.event.fix(e))};M.event.special[a]={setup:function(){var e=this.ownerDocument||this.document||this,t=J.access(e,a);if(!t){e.addEventListener(r,n,true)}J.access(e,a,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=J.access(e,a)-1;if(!t){e.removeEventListener(r,n,true);J.remove(e,a)}else{J.access(e,a,t)}}}})}var Mt=T.location;var At={guid:Date.now()};var St=/\?/;M.parseXML=function(e){var t,r;if(!e||typeof e!=="string"){return null}try{t=(new T.DOMParser).parseFromString(e,"text/xml")}catch(e){}r=t&&t.getElementsByTagName("parsererror")[0];if(!t||r){M.error("Invalid XML: "+(r?M.map(r.childNodes,function(e){return e.textContent}).join("\n"):e))}return t};var Et=/\[\]$/,Lt=/\r?\n/g,Ct=/^(?:submit|button|image|reset|file)$/i,Dt=/^(?:input|select|textarea|keygen)/i;function Ot(r,e,a,n){var t;if(Array.isArray(e)){M.each(e,function(e,t){if(a||Et.test(r)){n(r,t)}else{Ot(r+"["+(typeof t==="object"&&t!=null?e:"")+"]",t,a,n)}})}else if(!a&&_(e)==="object"){for(t in e){Ot(r+"["+t+"]",e[t],a,n)}}else{n(r,e)}}M.param=function(e,t){var r,a=[],n=function(e,t){var r=y(t)?t():t;a[a.length]=encodeURIComponent(e)+"="+encodeURIComponent(r==null?"":r)};if(e==null){return""}if(Array.isArray(e)||e.jquery&&!M.isPlainObject(e)){M.each(e,function(){n(this.name,this.value)})}else{for(r in e){Ot(r,e[r],t,n)}}return a.join("&")};M.fn.extend({serialize:function(){return M.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=M.prop(this,"elements");return e?M.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!M(this).is(":disabled")&&Dt.test(this.nodeName)&&!Ct.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var r=M(this).val();if(r==null){return null}if(Array.isArray(r)){return M.map(r,function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}})}return{name:t.name,value:r.replace(Lt,"\r\n")}}).get()}});var It=/%20/g,Pt=/#.*$/,Rt=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,zt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ft=/^(?:GET|HEAD)$/,jt=/^\/\//,Ht={},Bt={},qt="*/".concat("*"),Ut=k.createElement("a");Ut.href=Mt.href;function Yt(i){return function(e,t){if(typeof e!=="string"){t=e;e="*"}var r,a=0,n=e.toLowerCase().match(N)||[];if(y(t)){while(r=n[a++]){if(r[0]==="+"){r=r.slice(1)||"*";(i[r]=i[r]||[]).unshift(t)}else{(i[r]=i[r]||[]).push(t)}}}}}function Vt(t,n,i,o){var s={},l=t===Bt;function u(e){var a;s[e]=true;M.each(t[e]||[],function(e,t){var r=t(n,i,o);if(typeof r==="string"&&!l&&!s[r]){n.dataTypes.unshift(r);u(r);return false}else if(l){return!(a=r)}});return a}return u(n.dataTypes[0])||!s["*"]&&u("*")}function Gt(e,t){var r,a,n=M.ajaxSettings.flatOptions||{};for(r in t){if(t[r]!==undefined){(n[r]?e:a||(a={}))[r]=t[r]}}if(a){M.extend(true,e,a)}return e}function Wt(e,t,r){var a,n,i,o,s=e.contents,l=e.dataTypes;while(l[0]==="*"){l.shift();if(a===undefined){a=e.mimeType||t.getResponseHeader("Content-Type")}}if(a){for(n in s){if(s[n]&&s[n].test(a)){l.unshift(n);break}}}if(l[0]in r){i=l[0]}else{for(n in r){if(!l[0]||e.converters[n+" "+l[0]]){i=n;break}if(!o){o=n}}i=i||o}if(i){if(i!==l[0]){l.unshift(i)}return r[i]}}function $t(e,t,r,a){var n,i,o,s,l,u={},c=e.dataTypes.slice();if(c[1]){for(o in e.converters){u[o.toLowerCase()]=e.converters[o]}}i=c.shift();while(i){if(e.responseFields[i]){r[e.responseFields[i]]=t}if(!l&&a&&e.dataFilter){t=e.dataFilter(t,e.dataType)}l=i;i=c.shift();if(i){if(i==="*"){i=l}else if(l!=="*"&&l!==i){o=u[l+" "+i]||u["* "+i];if(!o){for(n in u){s=n.split(" ");if(s[1]===i){o=u[l+" "+s[0]]||u["* "+s[0]];if(o){if(o===true){o=u[n]}else if(u[n]!==true){i=s[0];c.unshift(s[1])}break}}}}if(o!==true){if(o&&e.throws){t=o(t)}else{try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+i}}}}}}}return{state:"success",data:t}}M.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Mt.href,type:"GET",isLocal:zt.test(Mt.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":JSON.parse,"text xml":M.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(e,t){return t?Gt(Gt(e,M.ajaxSettings),t):Gt(M.ajaxSettings,e)},ajaxPrefilter:Yt(Ht),ajaxTransport:Yt(Bt),ajax:function(e,t){if(typeof e==="object"){t=e;e=undefined}t=t||{};var c,f,d,r,v,a,p,h,n,i,m=M.ajaxSetup({},t),g=m.context||m,y=m.context&&(g.nodeType||g.jquery)?M(g):M.event,x=M.Deferred(),b=M.Callbacks("once memory"),_=m.statusCode||{},o={},s={},l="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(p){if(!r){r={};while(t=Nt.exec(d)){r[t[1].toLowerCase()+" "]=(r[t[1].toLowerCase()+" "]||[]).concat(t[2])}}t=r[e.toLowerCase()+" "]}return t==null?null:t.join(", ")},getAllResponseHeaders:function(){return p?d:null},setRequestHeader:function(e,t){if(p==null){e=s[e.toLowerCase()]=s[e.toLowerCase()]||e;o[e]=t}return this},overrideMimeType:function(e){if(p==null){m.mimeType=e}return this},statusCode:function(e){var t;if(e){if(p){w.always(e[w.status])}else{for(t in e){_[t]=[_[t],e[t]]}}}return this},abort:function(e){var t=e||l;if(c){c.abort(t)}u(0,t);return this}};x.promise(w);m.url=((e||m.url||Mt.href)+"").replace(jt,Mt.protocol+"//");m.type=t.method||t.type||m.method||m.type;m.dataTypes=(m.dataType||"*").toLowerCase().match(N)||[""];if(m.crossDomain==null){a=k.createElement("a");try{a.href=m.url;a.href=a.href;m.crossDomain=Ut.protocol+"//"+Ut.host!==a.protocol+"//"+a.host}catch(e){m.crossDomain=true}}if(m.data&&m.processData&&typeof m.data!=="string"){m.data=M.param(m.data,m.traditional)}Vt(Ht,m,t,w);if(p){return w}h=M.event&&m.global;if(h&&M.active++===0){M.event.trigger("ajaxStart")}m.type=m.type.toUpperCase();m.hasContent=!Ft.test(m.type);f=m.url.replace(Pt,"");if(!m.hasContent){i=m.url.slice(f.length);if(m.data&&(m.processData||typeof m.data==="string")){f+=(St.test(f)?"&":"?")+m.data;delete m.data}if(m.cache===false){f=f.replace(Rt,"$1");i=(St.test(f)?"&":"?")+"_="+At.guid+++i}m.url=f+i}else if(m.data&&m.processData&&(m.contentType||"").indexOf("application/x-www-form-urlencoded")===0){m.data=m.data.replace(It,"+")}if(m.ifModified){if(M.lastModified[f]){w.setRequestHeader("If-Modified-Since",M.lastModified[f])}if(M.etag[f]){w.setRequestHeader("If-None-Match",M.etag[f])}}if(m.data&&m.hasContent&&m.contentType!==false||t.contentType){w.setRequestHeader("Content-Type",m.contentType)}w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+(m.dataTypes[0]!=="*"?", "+qt+"; q=0.01":""):m.accepts["*"]);for(n in m.headers){w.setRequestHeader(n,m.headers[n])}if(m.beforeSend&&(m.beforeSend.call(g,w,m)===false||p)){return w.abort()}l="abort";b.add(m.complete);w.done(m.success);w.fail(m.error);c=Vt(Bt,m,t,w);if(!c){u(-1,"No Transport")}else{w.readyState=1;if(h){y.trigger("ajaxSend",[w,m])}if(p){return w}if(m.async&&m.timeout>0){v=T.setTimeout(function(){w.abort("timeout")},m.timeout)}try{p=false;c.send(o,u)}catch(e){if(p){throw e}u(-1,e)}}function u(e,t,r,a){var n,i,o,s,l,u=t;if(p){return}p=true;if(v){T.clearTimeout(v)}c=undefined;d=a||"";w.readyState=e>0?4:0;n=e>=200&&e<300||e===304;if(r){s=Wt(m,w,r)}if(!n&&M.inArray("script",m.dataTypes)>-1&&M.inArray("json",m.dataTypes)<0){m.converters["text script"]=function(){}}s=$t(m,s,w,n);if(n){if(m.ifModified){l=w.getResponseHeader("Last-Modified");if(l){M.lastModified[f]=l}l=w.getResponseHeader("etag");if(l){M.etag[f]=l}}if(e===204||m.type==="HEAD"){u="nocontent"}else if(e===304){u="notmodified"}else{u=s.state;i=s.data;o=s.error;n=!o}}else{o=u;if(e||!u){u="error";if(e<0){e=0}}}w.status=e;w.statusText=(t||u)+"";if(n){x.resolveWith(g,[i,u,w])}else{x.rejectWith(g,[w,u,o])}w.statusCode(_);_=undefined;if(h){y.trigger(n?"ajaxSuccess":"ajaxError",[w,m,n?i:o])}b.fireWith(g,[w,u]);if(h){y.trigger("ajaxComplete",[w,m]);if(!--M.active){M.event.trigger("ajaxStop")}}}return w},getJSON:function(e,t,r){return M.get(e,t,r,"json")},getScript:function(e,t){return M.get(e,undefined,t,"script")}});M.each(["get","post"],function(e,n){M[n]=function(e,t,r,a){if(y(t)){a=a||r;r=t;t=undefined}return M.ajax(M.extend({url:e,type:n,dataType:a,data:t,success:r},M.isPlainObject(e)&&e))}});M.ajaxPrefilter(function(e){var t;for(t in e.headers){if(t.toLowerCase()==="content-type"){e.contentType=e.headers[t]||""}}});M._evalUrl=function(e,t,r){return M.ajax({url:e,type:"GET",dataType:"script",cache:true,async:false,global:false,converters:{"text script":function(){}},dataFilter:function(e){M.globalEval(e,t,r)}})};M.fn.extend({wrapAll:function(e){var t;if(this[0]){if(y(e)){e=e.call(this[0])}t=M(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){t.insertBefore(this[0])}t.map(function(){var e=this;while(e.firstElementChild){e=e.firstElementChild}return e}).append(this)}return this},wrapInner:function(r){if(y(r)){return this.each(function(e){M(this).wrapInner(r.call(this,e))})}return this.each(function(){var e=M(this),t=e.contents();if(t.length){t.wrapAll(r)}else{e.append(r)}})},wrap:function(t){var r=y(t);return this.each(function(e){M(this).wrapAll(r?t.call(this,e):t)})},unwrap:function(e){this.parent(e).not("body").each(function(){M(this).replaceWith(this.childNodes)});return this}});M.expr.pseudos.hidden=function(e){return!M.expr.pseudos.visible(e)};M.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)};M.ajaxSettings.xhr=function(){try{return new T.XMLHttpRequest}catch(e){}};var Zt={0:200,1223:204},Xt=M.ajaxSettings.xhr();g.cors=!!Xt&&"withCredentials"in Xt;g.ajax=Xt=!!Xt;M.ajaxTransport(function(n){var i,o;if(g.cors||Xt&&!n.crossDomain){return{send:function(e,t){var r,a=n.xhr();a.open(n.type,n.url,n.async,n.username,n.password);if(n.xhrFields){for(r in n.xhrFields){a[r]=n.xhrFields[r]}}if(n.mimeType&&a.overrideMimeType){a.overrideMimeType(n.mimeType)}if(!n.crossDomain&&!e["X-Requested-With"]){e["X-Requested-With"]="XMLHttpRequest"}for(r in e){a.setRequestHeader(r,e[r])}i=function(e){return function(){if(i){i=o=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null;if(e==="abort"){a.abort()}else if(e==="error"){if(typeof a.status!=="number"){t(0,"error")}else{t(a.status,a.statusText)}}else{t(Zt[a.status]||a.status,a.statusText,(a.responseType||"text")!=="text"||typeof a.responseText!=="string"?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders())}}}};a.onload=i();o=a.onerror=a.ontimeout=i("error");if(a.onabort!==undefined){a.onabort=o}else{a.onreadystatechange=function(){if(a.readyState===4){T.setTimeout(function(){if(i){o()}})}}}i=i("abort");try{a.send(n.hasContent&&n.data||null)}catch(e){if(i){throw e}}},abort:function(){if(i){i()}}}}});M.ajaxPrefilter(function(e){if(e.crossDomain){e.contents.script=false}});M.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){M.globalEval(e);return e}}});M.ajaxPrefilter("script",function(e){if(e.cache===undefined){e.cache=false}if(e.crossDomain){e.type="GET"}});M.ajaxTransport("script",function(r){if(r.crossDomain||r.scriptAttrs){var a,n;return{send:function(e,t){a=M("<script>").attr(r.scriptAttrs||{}).prop({charset:r.scriptCharset,src:r.url}).on("load error",n=function(e){a.remove();n=null;if(e){t(e.type==="error"?404:200,e.type)}});k.head.appendChild(a[0])},abort:function(){if(n){n()}}}}});var Jt=[],Kt=/(=)\?(?=&|$)|\?\?/;M.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Jt.pop()||M.expando+"_"+At.guid++;this[e]=true;return e}});M.ajaxPrefilter("json jsonp",function(e,t,r){var a,n,i,o=e.jsonp!==false&&(Kt.test(e.url)?"url":typeof e.data==="string"&&(e.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Kt.test(e.data)&&"data");if(o||e.dataTypes[0]==="jsonp"){a=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback;if(o){e[o]=e[o].replace(Kt,"$1"+a)}else if(e.jsonp!==false){e.url+=(St.test(e.url)?"&":"?")+e.jsonp+"="+a}e.converters["script json"]=function(){if(!i){M.error(a+" was not called")}return i[0]};e.dataTypes[0]="json";n=T[a];T[a]=function(){i=arguments};r.always(function(){if(n===undefined){M(T).removeProp(a)}else{T[a]=n}if(e[a]){e.jsonpCallback=t.jsonpCallback;Jt.push(a)}if(i&&y(n)){n(i[0])}i=n=undefined});return"script"}});g.createHTMLDocument=function(){var e=k.implementation.createHTMLDocument("").body;e.innerHTML="<form></form><form></form>";return e.childNodes.length===2}();M.parseHTML=function(e,t,r){if(typeof e!=="string"){return[]}if(typeof t==="boolean"){r=t;t=false}var a,n,i;if(!t){if(g.createHTMLDocument){t=k.implementation.createHTMLDocument("");a=t.createElement("base");a.href=k.location.href;t.head.appendChild(a)}else{t=k}}n=E.exec(e);i=!r&&[];if(n){return[t.createElement(n[1])]}n=_e([e],t,i);if(i&&i.length){M(i).remove()}return M.merge([],n.childNodes)};M.fn.load=function(e,t,r){var a,n,i,o=this,s=e.indexOf(" ");if(s>-1){a=xt(e.slice(s));e=e.slice(0,s)}if(y(t)){r=t;t=undefined}else if(t&&typeof t==="object"){n="POST"}if(o.length>0){M.ajax({url:e,type:n||"GET",dataType:"html",data:t}).done(function(e){i=arguments;o.html(a?M("<div>").append(M.parseHTML(e)).find(a):e)}).always(r&&function(e,t){o.each(function(){r.apply(this,i||[e.responseText,t,e])})})}return this};M.expr.pseudos.animated=function(t){return M.grep(M.timers,function(e){return t===e.elem}).length};M.offset={setOffset:function(e,t,r){var a,n,i,o,s,l,u,c=M.css(e,"position"),f=M(e),d={};if(c==="static"){e.style.position="relative"}s=f.offset();i=M.css(e,"top");l=M.css(e,"left");u=(c==="absolute"||c==="fixed")&&(i+l).indexOf("auto")>-1;if(u){a=f.position();o=a.top;n=a.left}else{o=parseFloat(i)||0;n=parseFloat(l)||0}if(y(t)){t=t.call(e,r,M.extend({},s))}if(t.top!=null){d.top=t.top-s.top+o}if(t.left!=null){d.left=t.left-s.left+n}if("using"in t){t.using.call(e,d)}else{f.css(d)}}};M.fn.extend({offset:function(t){if(arguments.length){return t===undefined?this:this.each(function(e){M.offset.setOffset(this,t,e)})}var e,r,a=this[0];if(!a){return}if(!a.getClientRects().length){return{top:0,left:0}}e=a.getBoundingClientRect();r=a.ownerDocument.defaultView;return{top:e.top+r.pageYOffset,left:e.left+r.pageXOffset}},position:function(){if(!this[0]){return}var e,t,r,a=this[0],n={top:0,left:0};if(M.css(a,"position")==="fixed"){t=a.getBoundingClientRect()}else{t=this.offset();r=a.ownerDocument;e=a.offsetParent||r.documentElement;while(e&&(e===r.body||e===r.documentElement)&&M.css(e,"position")==="static"){e=e.parentNode}if(e&&e!==a&&e.nodeType===1){n=M(e).offset();n.top+=M.css(e,"borderTopWidth",true);n.left+=M.css(e,"borderLeftWidth",true)}}return{top:t.top-n.top-M.css(a,"marginTop",true),left:t.left-n.left-M.css(a,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&M.css(e,"position")==="static"){e=e.offsetParent}return e||oe})}});M.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i="pageYOffset"===n;M.fn[t]=function(e){return Y(this,function(e,t,r){var a;if(x(e)){a=e}else if(e.nodeType===9){a=e.defaultView}if(r===undefined){return a?a[n]:e[t]}if(a){a.scrollTo(!i?r:a.pageXOffset,i?r:a.pageYOffset)}else{e[t]=r}},t,e,arguments.length)}});M.each(["top","left"],function(e,r){M.cssHooks[r]=Ye(g.pixelPosition,function(e,t){if(t){t=Ue(e,r);return je.test(t)?M(e).position()[r]+"px":t}})});M.each({Height:"height",Width:"width"},function(o,s){M.each({padding:"inner"+o,content:s,"":"outer"+o},function(a,i){M.fn[i]=function(e,t){var r=arguments.length&&(a||typeof e!=="boolean"),n=a||(e===true||t===true?"margin":"border");return Y(this,function(e,t,r){var a;if(x(e)){return i.indexOf("outer")===0?e["inner"+o]:e.document.documentElement["client"+o]}if(e.nodeType===9){a=e.documentElement;return Math.max(e.body["scroll"+o],a["scroll"+o],e.body["offset"+o],a["offset"+o],a["client"+o])}return r===undefined?M.css(e,t,n):M.style(e,t,r,n)},s,r?e:undefined,r)}})});M.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){M.fn[t]=function(e){return this.on(t,e)}});M.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,a){return this.on(t,e,r,a)},undelegate:function(e,t,r){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});M.each(("blur focus focusin focusout resize scroll click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup contextmenu").split(" "),function(e,r){M.fn[r]=function(e,t){return arguments.length>0?this.on(r,null,e,t):this.trigger(r)}});var Qt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;M.proxy=function(e,t){var r,a,n;if(typeof t==="string"){r=e[t];t=e;e=r}if(!y(e)){return undefined}a=s.call(arguments,2);n=function(){return e.apply(t||this,a.concat(s.call(arguments)))};n.guid=e.guid=e.guid||M.guid++;return n};M.holdReady=function(e){if(e){M.readyWait++}else{M.ready(true)}};M.isArray=Array.isArray;M.parseJSON=JSON.parse;M.nodeName=S;M.isFunction=y;M.isWindow=x;M.camelCase=$;M.type=_;M.now=Date.now;M.isNumeric=function(e){var t=M.type(e);return(t==="number"||t==="string")&&!isNaN(e-parseFloat(e))};M.trim=function(e){return e==null?"":(e+"").replace(Qt,"")};if(typeof define==="function"&&define.amd){define("jquery",[],function(){return M})}var er=T.jQuery,tr=T.$;M.noConflict=function(e){if(T.$===M){T.$=tr}if(e&&T.jQuery===M){T.jQuery=er}return M};if(typeof e==="undefined"){T.jQuery=T.$=M}return M});(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.Plotly=e()}})(function(){var au,e,t;return function(){function c(i,o,s){function l(r,e){if(!o[r]){if(!i[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(u)return u(r,!0);var a=new Error("Cannot find module '"+r+"'");throw a.code="MODULE_NOT_FOUND",a}var n=o[r]={exports:{}};i[r][0].call(n.exports,function(e){var t=i[r][1][e];return l(t||e)},n,n.exports,c,i,o,s)}return o[r].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}return c}()({1:[function(e,t,r){"use strict";var a=e("../src/lib");var n={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var i in n){var o=i.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");a.addStyleRule(o,n[i])}},{"../src/lib":230}],2:[function(e,t,r){"use strict";t.exports=e("../src/transforms/aggregate")},{"../src/transforms/aggregate":381}],3:[function(e,t,r){"use strict";t.exports=e("../src/traces/bar")},{"../src/traces/bar":331}],4:[function(e,t,r){"use strict";t.exports=e("../src/components/calendars")},{"../src/components/calendars":98}],5:[function(e,t,r){"use strict";t.exports=e("../src/core")},{"../src/core":212}],6:[function(e,t,r){"use strict";t.exports=e("../src/transforms/filter")},{"../src/transforms/filter":382}],7:[function(e,t,r){"use strict";t.exports=e("../src/transforms/groupby")},{"../src/transforms/groupby":383}],8:[function(e,t,r){"use strict";var a=e("./core");a.register([e("./bar"),e("./pie"),e("./aggregate"),e("./filter"),e("./groupby"),e("./sort"),e("./calendars")]);t.exports=a},{"./aggregate":2,"./bar":3,"./calendars":4,"./core":5,"./filter":6,"./groupby":7,"./pie":9,"./sort":10}],9:[function(e,t,r){"use strict";t.exports=e("../src/traces/pie")},{"../src/traces/pie":346}],10:[function(e,t,r){"use strict";t.exports=e("../src/transforms/sort")},{"../src/transforms/sort":385}],11:[function(e,ru,t){!function(){var P={version:"3.6.1"};var n=[].slice,f=function(e){return n.call(e)};var R=this.document;function s(e){return e&&(e.ownerDocument||e.document||e).documentElement}function N(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(R){try{f(R.documentElement.childNodes)[0].nodeType}catch(e){f=function(e){var t=e.length,r=new Array(t);while(t--)r[t]=e[t];return r}}}if(!Date.now)Date.now=function(){return+new Date};if(R){try{R.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var t=this.Element.prototype,r=t.setAttribute,a=t.setAttributeNS,i=this.CSSStyleDeclaration.prototype,o=i.setProperty;t.setAttribute=function(e,t){r.call(this,e,t+"")};t.setAttributeNS=function(e,t,r){a.call(this,e,t,r+"")};i.setProperty=function(e,t,r){o.call(this,e,t+"",r)}}}P.ascending=l;function l(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}P.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};P.min=function(e,t){var r=-1,a=e.length,n,i;if(arguments.length===1){while(++r<a)if((i=e[r])!=null&&i>=i){n=i;break}while(++r<a)if((i=e[r])!=null&&n>i)n=i}else{while(++r<a)if((i=t.call(e,e[r],r))!=null&&i>=i){n=i;break}while(++r<a)if((i=t.call(e,e[r],r))!=null&&n>i)n=i}return n};P.max=function(e,t){var r=-1,a=e.length,n,i;if(arguments.length===1){while(++r<a)if((i=e[r])!=null&&i>=i){n=i;break}while(++r<a)if((i=e[r])!=null&&i>n)n=i}else{while(++r<a)if((i=t.call(e,e[r],r))!=null&&i>=i){n=i;break}while(++r<a)if((i=t.call(e,e[r],r))!=null&&i>n)n=i}return n};P.extent=function(e,t){var r=-1,a=e.length,n,i,o;if(arguments.length===1){while(++r<a)if((i=e[r])!=null&&i>=i){n=o=i;break}while(++r<a)if((i=e[r])!=null){if(n>i)n=i;if(o<i)o=i}}else{while(++r<a)if((i=t.call(e,e[r],r))!=null&&i>=i){n=o=i;break}while(++r<a)if((i=t.call(e,e[r],r))!=null){if(n>i)n=i;if(o<i)o=i}}return[n,o]};function u(e){return e===null?NaN:+e}function c(e){return!isNaN(e)}P.sum=function(e,t){var r=0,a=e.length,n,i=-1;if(arguments.length===1){while(++i<a)if(c(n=+e[i]))r+=n}else{while(++i<a)if(c(n=+t.call(e,e[i],i)))r+=n}return r};P.mean=function(e,t){var r=0,a=e.length,n,i=-1,o=a;if(arguments.length===1){while(++i<a)if(c(n=u(e[i])))r+=n;else--o}else{while(++i<a)if(c(n=u(t.call(e,e[i],i))))r+=n;else--o}if(o)return r/o};P.quantile=function(e,t){var r=(e.length-1)*t+1,a=Math.floor(r),n=+e[a-1],i=r-a;return i?n+i*(e[a]-n):n};P.median=function(e,t){var r=[],a=e.length,n,i=-1;if(arguments.length===1){while(++i<a)if(c(n=u(e[i])))r.push(n)}else{while(++i<a)if(c(n=u(t.call(e,e[i],i))))r.push(n)}if(r.length)return P.quantile(r.sort(l),.5)};P.variance=function(e,t){var r=e.length,a=0,n,i,o=0,s=-1,l=0;if(arguments.length===1){while(++s<r){if(c(n=u(e[s]))){i=n-a;a+=i/++l;o+=i*(n-a)}}}else{while(++s<r){if(c(n=u(t.call(e,e[s],s)))){i=n-a;a+=i/++l;o+=i*(n-a)}}}if(l>1)return o/(l-1)};P.deviation=function(){var e=P.variance.apply(this,arguments);return e?Math.sqrt(e):e};function e(i){return{left:function(e,t,r,a){if(arguments.length<3)r=0;if(arguments.length<4)a=e.length;while(r<a){var n=r+a>>>1;if(i(e[n],t)<0)r=n+1;else a=n}return r},right:function(e,t,r,a){if(arguments.length<3)r=0;if(arguments.length<4)a=e.length;while(r<a){var n=r+a>>>1;if(i(e[n],t)>0)a=n;else r=n+1}return r}}}var d=e(l);P.bisectLeft=d.left;P.bisect=P.bisectRight=d.right;P.bisector=function(r){return e(r.length===1?function(e,t){return l(r(e),t)}:r)};P.shuffle=function(e,t,r){if((a=arguments.length)<3){r=e.length;if(a<2)t=0}var a=r-t,n,i;while(a){i=Math.random()*a--|0;n=e[a+t],e[a+t]=e[i+t],e[i+t]=n}return e};P.permute=function(e,t){var r=t.length,a=new Array(r);while(r--)a[r]=e[t[r]];return a};P.pairs=function(e){var t=0,r=e.length-1,a,n=e[0],i=new Array(r<0?0:r);while(t<r)i[t]=[a=n,n=e[++t]];return i};P.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,r=P.min(e,v),a=new Array(r);++t<r;){for(var n=-1,i,o=a[t]=new Array(i);++n<i;){o[n]=e[n][t]}}return a};function v(e){return e.length}P.zip=function(){return P.transpose(arguments)};P.keys=function(e){var t=[];for(var r in e)t.push(r);return t};P.values=function(e){var t=[];for(var r in e)t.push(e[r]);return t};P.entries=function(e){var t=[];for(var r in e)t.push({key:r,value:e[r]});return t};P.merge=function(e){var t=e.length,r,a=-1,n=0,i,o;while(++a<t)n+=e[a].length;i=new Array(n);while(--t>=0){o=e[t];r=o.length;while(--r>=0){i[--n]=o[r]}}return i};var I=Math.abs;P.range=function(e,t,r){if(arguments.length<3){r=1;if(arguments.length<2){t=e;e=0}}if((t-e)/r===Infinity)throw new Error("infinite range");var a=[],n=p(I(r)),i=-1,o;e*=n,t*=n,r*=n;if(r<0)while((o=e+r*++i)>t)a.push(o/n);else while((o=e+r*++i)<t)a.push(o/n);return a};function p(e){var t=1;while(e*t%1)t*=10;return t}function h(e,t){for(var r in t){Object.defineProperty(e.prototype,r,{value:t[r],enumerable:false})}}P.map=function(e,t){var r=new y;if(e instanceof y){e.forEach(function(e,t){r.set(e,t)})}else if(Array.isArray(e)){var a=-1,n=e.length,i;if(arguments.length===1)while(++a<n)r.set(a,e[a]);else while(++a<n)r.set(t.call(e,i=e[a],a),i)}else{for(var o in e)r.set(o,e[o])}return r};function y(){this._=Object.create(null)}var m="__proto__",g="\0";h(y,{has:_,get:function(e){return this._[x(e)]},set:function(e,t){return this._[x(e)]=t},remove:w,keys:T,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:b(t),value:this._[t]});return e},size:k,empty:M,forEach:function(e){for(var t in this._)e.call(this,b(t),this._[t])}});function x(e){return(e+="")===m||e[0]===g?g+e:e}function b(e){return(e+="")[0]===g?e.slice(1):e}function _(e){return x(e)in this._}function w(e){return(e=x(e))in this._&&delete this._[e]}function T(){var e=[];for(var t in this._)e.push(b(t));return e}function k(){var e=0;for(var t in this._)++e;return e}function M(){for(var e in this._)return false;return true}P.nest=function(){var f={},d=[],t=[],v,p;function h(r,e,a){if(a>=d.length)return p?p.call(f,e):v?e.sort(v):e;var t=-1,n=e.length,i=d[a++],o,s,l,u=new y,c;while(++t<n){if(c=u.get(o=i(s=e[t]))){c.push(s)}else{u.set(o,[s])}}if(r){s=r();l=function(e,t){s.set(e,h(r,t,a))}}else{s={};l=function(e,t){s[e]=h(r,t,a)}}u.forEach(l);return s}function i(e,r){if(r>=d.length)return e;var a=[],n=t[r++];e.forEach(function(e,t){a.push({key:e,values:i(t,r)})});return n?a.sort(function(e,t){return n(e.key,t.key)}):a}f.map=function(e,t){return h(t,e,0)};f.entries=function(e){return i(h(P.map,e,0),0)};f.key=function(e){d.push(e);return f};f.sortKeys=function(e){t[d.length-1]=e;return f};f.sortValues=function(e){v=e;return f};f.rollup=function(e){p=e;return f};return f};P.set=function(e){var t=new A;if(e)for(var r=0,a=e.length;r<a;++r)t.add(e[r]);return t};function A(){this._=Object.create(null)}h(A,{has:_,add:function(e){this._[x(e+="")]=true;return e},remove:w,values:T,size:k,empty:M,forEach:function(e){for(var t in this._)e.call(this,b(t))}});P.behavior={};function z(e){return e}P.rebind=function(e,t){var r=1,a=arguments.length,n;while(++r<a)e[n=arguments[r]]=S(e,t,t[n]);return e};function S(t,r,a){return function(){var e=a.apply(r,arguments);return e===r?t:e}}function E(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var r=0,a=L.length;r<a;++r){var n=L[r]+t;if(n in e)return n}}var L=["webkit","ms","moz","Moz","o","O"];function C(){}P.dispatch=function(){var e=new D,t=-1,r=arguments.length;while(++t<r)e[arguments[t]]=O(e);return e};function D(){}D.prototype.on=function(e,t){var r=e.indexOf("."),a="";if(r>=0){a=e.slice(r+1);e=e.slice(0,r)}if(e)return arguments.length<2?this[e].on(a):this[e].on(a,t);if(arguments.length===2){if(t==null)for(e in this){if(this.hasOwnProperty(e))this[e].on(a,null)}return this}};function O(n){var i=[],o=new y;function e(){var e=i,t=-1,r=e.length,a;while(++t<r)if(a=e[t].on)a.apply(this,arguments);return n}e.on=function(e,t){var r=o.get(e),a;if(arguments.length<2)return r&&r.on;if(r){r.on=null;i=i.slice(0,a=i.indexOf(r)).concat(i.slice(a+1));o.remove(e)}if(t)i.push(o.set(e,{on:t}));return n};return e}P.event=null;function F(){P.event.preventDefault()}function j(){var e=P.event,t;while(t=e.sourceEvent)e=t;return e}function H(n){var i=new D,e=0,t=arguments.length;while(++e<t)i[arguments[e]]=O(i);i.of=function(r,a){return function(e){try{var t=e.sourceEvent=P.event;e.target=n;P.event=e;i[e.type].apply(r,a)}finally{P.event=t}}};return i}P.requote=function(e){return e.replace(B,"\\$&")};var B=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var q={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)e[r]=t[r]};function U(e){q(e,W);return e}var Y=function(e,t){return t.querySelector(e)},V=function(e,t){return t.querySelectorAll(e)},G=function(e,t){var r=e.matches||e[E(e,"matchesSelector")];G=function(e,t){return r.call(e,t)};return G(e,t)};if(typeof Sizzle==="function"){Y=function(e,t){return Sizzle(e,t)[0]||null};V=Sizzle;G=Sizzle.matchesSelector}P.selection=function(){return P.select(R.documentElement)};var W=P.selection.prototype=[];W.select=function(e){var t=[],r,a,n,i;e=$(e);for(var o=-1,s=this.length;++o<s;){t.push(r=[]);r.parentNode=(n=this[o]).parentNode;for(var l=-1,u=n.length;++l<u;){if(i=n[l]){r.push(a=e.call(i,i.__data__,l,o));if(a&&"__data__"in i)a.__data__=i.__data__}else{r.push(null)}}}return U(t)};function $(e){return typeof e==="function"?e:function(){return Y(e,this)}}W.selectAll=function(e){var t=[],r,a;e=Z(e);for(var n=-1,i=this.length;++n<i;){for(var o=this[n],s=-1,l=o.length;++s<l;){if(a=o[s]){t.push(r=f(e.call(a,a.__data__,s,n)));r.parentNode=a}}}return U(t)};function Z(e){return typeof e==="function"?e:function(){return V(e,this)}}var X="http://www.w3.org/1999/xhtml";var J={svg:"http://www.w3.org/2000/svg",xhtml:X,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};P.ns={prefix:J,qualify:function(e){var t=e.indexOf(":"),r=e;if(t>=0&&(r=e.slice(0,t))!=="xmlns")e=e.slice(t+1);return J.hasOwnProperty(r)?{space:J[r],local:e}:e}};W.attr=function(e,t){if(arguments.length<2){if(typeof e==="string"){var r=this.node();e=P.ns.qualify(e);return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}for(t in e)this.each(K(t,e[t]));return this}return this.each(K(e,t))};function K(t,r){t=P.ns.qualify(t);function e(){this.removeAttribute(t)}function a(){this.removeAttributeNS(t.space,t.local)}function n(){this.setAttribute(t,r)}function i(){this.setAttributeNS(t.space,t.local,r)}function o(){var e=r.apply(this,arguments);if(e==null)this.removeAttribute(t);else this.setAttribute(t,e)}function s(){var e=r.apply(this,arguments);if(e==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,e)}return r==null?t.local?a:e:typeof r==="function"?t.local?s:o:t.local?i:n}function Q(e){return e.trim().replace(/\s+/g," ")}W.classed=function(e,t){if(arguments.length<2){if(typeof e==="string"){var r=this.node(),a=(e=te(e)).length,n=-1;if(t=r.classList){while(++n<a)if(!t.contains(e[n]))return false}else{t=r.getAttribute("class");while(++n<a)if(!ee(e[n]).test(t))return false}return true}for(t in e)this.each(re(t,e[t]));return this}return this.each(re(e,t))};function ee(e){return new RegExp("(?:^|\\s+)"+P.requote(e)+"(?:\\s+|$)","g")}function te(e){return(e+"").trim().split(/^|\s+/)}function re(r,a){r=te(r).map(ae);var n=r.length;function e(){var e=-1;while(++e<n)r[e](this,a)}function t(){var e=-1,t=a.apply(this,arguments);while(++e<n)r[e](this,t)}return typeof a==="function"?t:e}function ae(a){var n=ee(a);return function(e,t){if(r=e.classList)return t?r.add(a):r.remove(a);var r=e.getAttribute("class")||"";if(t){n.lastIndex=0;if(!n.test(r))e.setAttribute("class",Q(r+" "+a))}else{e.setAttribute("class",Q(r.replace(n," ")))}}}W.style=function(e,t,r){var a=arguments.length;if(a<3){if(typeof e!=="string"){if(a<2)t="";for(r in e)this.each(ne(r,e[r],t));return this}if(a<2){var n=this.node();return N(n).getComputedStyle(n,null).getPropertyValue(e)}r=""}return this.each(ne(e,t,r))};function ne(t,r,a){function e(){this.style.removeProperty(t)}function n(){this.style.setProperty(t,r,a)}function i(){var e=r.apply(this,arguments);if(e==null)this.style.removeProperty(t);else this.style.setProperty(t,e,a)}return r==null?e:typeof r==="function"?i:n}W.property=function(e,t){if(arguments.length<2){if(typeof e==="string")return this.node()[e];for(t in e)this.each(ie(t,e[t]));return this}return this.each(ie(e,t))};function ie(t,r){function e(){delete this[t]}function a(){this[t]=r}function n(){var e=r.apply(this,arguments);if(e==null)delete this[t];else this[t]=e}return r==null?e:typeof r==="function"?n:a}W.text=function(t){return arguments.length?this.each(typeof t==="function"?function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}:t==null?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent};W.html=function(t){return arguments.length?this.each(typeof t==="function"?function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}:t==null?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML};W.append=function(e){e=oe(e);return this.select(function(){return this.appendChild(e.apply(this,arguments))})};function oe(r){function e(){var e=this.ownerDocument,t=this.namespaceURI;return t===X&&e.documentElement.namespaceURI===X?e.createElement(r):e.createElementNS(t,r)}function t(){return this.ownerDocument.createElementNS(r.space,r.local)}return typeof r==="function"?r:(r=P.ns.qualify(r)).local?t:e}W.insert=function(e,t){e=oe(e);t=$(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})};W.remove=function(){return this.each(se)};function se(){var e=this.parentNode;if(e)e.removeChild(this)}W.data=function(e,p){var t=-1,r=this.length,a,n;if(!arguments.length){e=new Array(r=(a=this[0]).length);while(++t<r){if(n=a[t]){e[t]=n.__data__}}return e}function i(e,t){var r,a=e.length,n=t.length,i=Math.min(a,n),o=new Array(n),s=new Array(n),l=new Array(a),u,c;if(p){var f=new y,d=new Array(a),v;for(r=-1;++r<a;){if(u=e[r]){if(f.has(v=p.call(u,u.__data__,r))){l[r]=u}else{f.set(v,u)}d[r]=v}}for(r=-1;++r<n;){if(!(u=f.get(v=p.call(t,c=t[r],r)))){s[r]=le(c)}else if(u!==true){o[r]=u;u.__data__=c}f.set(v,true)}for(r=-1;++r<a;){if(r in d&&f.get(d[r])!==true){l[r]=e[r]}}}else{for(r=-1;++r<i;){u=e[r];c=t[r];if(u){u.__data__=c;o[r]=u}else{s[r]=le(c)}}for(;r<n;++r){s[r]=le(t[r])}for(;r<a;++r){l[r]=e[r]}}s.update=o;s.parentNode=o.parentNode=l.parentNode=e.parentNode;h.push(s);m.push(o);g.push(l)}var h=de([]),m=U([]),g=U([]);if(typeof e==="function"){while(++t<r){i(a=this[t],e.call(a,a.parentNode.__data__,t))}}else{while(++t<r){i(a=this[t],e)}}m.enter=function(){return h};m.exit=function(){return g};return m};function le(e){return{__data__:e}}W.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")};W.filter=function(e){var t=[],r,a,n;if(typeof e!=="function")e=ue(e);for(var i=0,o=this.length;i<o;i++){t.push(r=[]);r.parentNode=(a=this[i]).parentNode;for(var s=0,l=a.length;s<l;s++){if((n=a[s])&&e.call(n,n.__data__,s,i)){r.push(n)}}}return U(t)};function ue(e){return function(){return G(this,e)}}W.order=function(){for(var e=-1,t=this.length;++e<t;){for(var r=this[e],a=r.length-1,n=r[a],i;--a>=0;){if(i=r[a]){if(n&&n!==i.nextSibling)n.parentNode.insertBefore(i,n);n=i}}}return this};W.sort=function(e){e=ce.apply(this,arguments);for(var t=-1,r=this.length;++t<r;)this[t].sort(e);return this.order()};function ce(r){if(!arguments.length)r=l;return function(e,t){return e&&t?r(e.__data__,t.__data__):!e-!t}}W.each=function(a){return fe(this,function(e,t,r){a.call(e,e.__data__,t,r)})};function fe(e,t){for(var r=0,a=e.length;r<a;r++){for(var n=e[r],i=0,o=n.length,s;i<o;i++){if(s=n[i])t(s,i,r)}}return e}W.call=function(e){var t=f(arguments);e.apply(t[0]=this,t);return this};W.empty=function(){return!this.node()};W.node=function(){for(var e=0,t=this.length;e<t;e++){for(var r=this[e],a=0,n=r.length;a<n;a++){var i=r[a];if(i)return i}}return null};W.size=function(){var e=0;fe(this,function(){++e});return e};function de(e){q(e,ve);return e}var ve=[];P.selection.enter=de;P.selection.enter.prototype=ve;ve.append=W.append;ve.empty=W.empty;ve.node=W.node;ve.call=W.call;ve.size=W.size;ve.select=function(e){var t=[],r,a,n,i,o;for(var s=-1,l=this.length;++s<l;){n=(i=this[s]).update;t.push(r=[]);r.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;){if(o=i[u]){r.push(n[u]=a=e.call(i.parentNode,o.__data__,u,s));a.__data__=o.__data__}else{r.push(null)}}}return U(t)};ve.insert=function(e,t){if(arguments.length<2)t=pe(this);return W.insert.call(this,e,t)};function pe(o){var s,l;return function(e,t,r){var a=o[r].update,n=a.length,i;if(r!=l)l=r,s=0;if(t>=s)s=t+1;while(!(i=a[s])&&++s<n);return i}}P.select=function(e){var t;if(typeof e==="string"){t=[Y(e,R)];t.parentNode=R.documentElement}else{t=[e];t.parentNode=s(e)}return U([t])};P.selectAll=function(e){var t;if(typeof e==="string"){t=f(V(e,R));t.parentNode=R.documentElement}else{t=f(e);t.parentNode=null}return U([t])};W.on=function(e,t,r){var a=arguments.length;if(a<3){if(typeof e!=="string"){if(a<2)t=false;for(r in e)this.each(he(r,e[r],t));return this}if(a<2)return(a=this.node()["__on"+e])&&a._;r=false}return this.each(he(e,t,r))};function he(n,t,r){var a="__on"+n,e=n.indexOf("."),i=ge;if(e>0)n=n.slice(0,e);var o=me.get(n);if(o)n=o,i=ye;function s(){var e=this[a];if(e){this.removeEventListener(n,e,e.$);delete this[a]}}function l(){var e=i(t,f(arguments));s.call(this);this.addEventListener(n,this[a]=e,e.$=r);e._=t}function u(){var e=new RegExp("^__on([^.]+)"+P.requote(n)+"$"),t;for(var r in this){if(t=r.match(e)){var a=this[r];this.removeEventListener(t[1],a,a.$);delete this[r]}}}return e?t?l:s:t?C:u}var me=P.map({mouseenter:"mouseover",mouseleave:"mouseout"});if(R){me.forEach(function(e){if("on"+e in R)me.remove(e)})}function ge(r,a){return function(e){var t=P.event;P.event=e;a[0]=this.__data__;try{r.apply(this,a)}finally{P.event=t}}}function ye(e,t){var a=ge(e,t);return function(e){var t=this,r=e.relatedTarget;if(!r||r!==t&&!(r.compareDocumentPosition(t)&8)){a.call(t,e)}}}var xe,be=0;function _e(e){var r=".dragsuppress-"+ ++be,a="click"+r,n=P.select(N(e)).on("touchmove"+r,F).on("dragstart"+r,F).on("selectstart"+r,F);if(xe==null){xe="onselectstart"in e?false:E(e.style,"userSelect")}if(xe){var i=s(e).style,o=i[xe];i[xe]="none"}return function(e){n.on(r,null);if(xe)i[xe]=o;if(e){var t=function(){n.on(a,null)};n.on(a,function(){F();t()},true);setTimeout(t,0)}}}P.mouse=function(e){return Te(e,j())};var we=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Te(e,t){if(t.changedTouches)t=t.changedTouches[0];var r=e.ownerSVGElement||e;if(r.createSVGPoint){var a=r.createSVGPoint();if(we<0){var n=N(e);if(n.scrollX||n.scrollY){r=P.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=r[0][0].getScreenCTM();we=!(i.f||i.e);r.remove()}}if(we)a.x=t.pageX,a.y=t.pageY;else a.x=t.clientX,a.y=t.clientY;a=a.matrixTransform(e.getScreenCTM().inverse());return[a.x,a.y]}var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}P.touch=function(e,t,r){if(arguments.length<3)r=t,t=j().changedTouches;if(t)for(var a=0,n=t.length,i;a<n;++a){if((i=t[a]).identifier===r){return Te(e,i)}}};P.behavior.drag=function(){var y=H(r,"drag","dragstart","dragend"),x=null,e=a(C,P.mouse,N,"mousemove","mouseup"),t=a(ke,P.touch,z,"touchmove","touchend");function r(){this.on("mousedown.drag",e).on("touchstart.drag",t)}function a(v,p,h,m,g){return function(){var e=this,t=P.event.target.correspondingElement||P.event.target,a=e.parentNode,n=y.of(e,arguments),i=0,o=v(),r=".drag"+(o==null?"":"-"+o),s,l=P.select(h(t)).on(m+r,f).on(g+r,d),u=_e(t),c=p(a,o);if(x){s=x.apply(e,arguments);s=[s.x-c[0],s.y-c[1]]}else{s=[0,0]}n({type:"dragstart"});function f(){var e=p(a,o),t,r;if(!e)return;t=e[0]-c[0];r=e[1]-c[1];i|=t|r;c=e;n({type:"drag",x:e[0]+s[0],y:e[1]+s[1],dx:t,dy:r})}function d(){if(!p(a,o))return;l.on(m+r,null).on(g+r,null);u(i);n({type:"dragend"})}}}r.origin=function(e){if(!arguments.length)return x;x=e;return r};return P.rebind(r,y,"on")};function ke(){return P.event.changedTouches[0].identifier}P.touches=function(r,e){if(arguments.length<2)e=j().touches;return e?f(e).map(function(e){var t=Te(r,e);t.identifier=e.identifier;return t}):[]};var Me=1e-6,Ae=Me*Me,Se=Math.PI,Ee=2*Se,Le=Ee-Me,Ce=Se/2,De=Se/180,Oe=180/Se;function Ie(e){return e>0?1:e<0?-1:0}function Pe(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0])}function Re(e){return e>1?0:e<-1?Se:Math.acos(e)}function Ne(e){return e>1?Ce:e<-1?-Ce:Math.asin(e)}function ze(e){return((e=Math.exp(e))-1/e)/2}function Fe(e){return((e=Math.exp(e))+1/e)/2}function je(e){return((e=Math.exp(2*e))-1)/(e+1)}function He(e){return(e=Math.sin(e/2))*e}var Be=Math.SQRT2,qe=2,Ue=4;P.interpolateZoom=function(e,t){var n=e[0],i=e[1],o=e[2],r=t[0],a=t[1],s=t[2],l=r-n,u=a-i,c=l*l+u*u,f,d;if(c<Ae){d=Math.log(s/o)/Be;f=function(e){return[n+e*l,i+e*u,o*Math.exp(Be*e*d)]}}else{var v=Math.sqrt(c),p=(s*s-o*o+Ue*c)/(2*o*qe*v),h=(s*s-o*o-Ue*c)/(2*s*qe*v),m=Math.log(Math.sqrt(p*p+1)-p),g=Math.log(Math.sqrt(h*h+1)-h);d=(g-m)/Be;f=function(e){var t=e*d,r=Fe(m),a=o/(qe*v)*(r*je(Be*t+m)-ze(m));return[n+a*l,i+a*u,o*r/Fe(Be*t+m)]}}f.duration=d*1e3;return f};P.behavior.zoom=function(){var b={x:0,y:0,k:1},t,l,r,u=[960,500],a=Ye,n=250,i=0,s="mousedown.zoom",c="mousemove.zoom",f="mouseup.zoom",o,_="touchstart.zoom",w,T=H(m,"zoomstart","zoom","zoomend"),d,v,p,h;if(!Ge){Ge="onwheel"in R?(Ve=function(){return-P.event.deltaY*(P.event.deltaMode?120:1)},"wheel"):"onmousewheel"in R?(Ve=function(){return P.event.wheelDelta},"mousewheel"):(Ve=function(){return-P.event.detail},"MozMousePixelScroll")}function m(e){e.on(s,D).on(Ge+".zoom",x).on("dblclick.zoom",I).on(_,O)}m.event=function(e){e.each(function(){var s=T.of(this,arguments),t=b;if(Cl){P.select(this).transition().each("start.zoom",function(){b=this.__chart__||{x:0,y:0,k:1};E(s)}).tween("zoom:zoom",function(){var a=u[0],e=u[1],n=l?l[0]:a/2,i=l?l[1]:e/2,o=P.interpolateZoom([(n-b.x)/b.k,(i-b.y)/b.k,a/b.k],[(n-t.x)/t.k,(i-t.y)/t.k,a/t.k]);return function(e){var t=o(e),r=a/t[2];this.__chart__=b={x:n-t[0]*r,y:i-t[1]*r,k:r};L(s)}}).each("interrupt.zoom",function(){C(s)}).each("end.zoom",function(){C(s)})}else{this.__chart__=b;E(s);L(s);C(s)}})};m.translate=function(e){if(!arguments.length)return[b.x,b.y];b={x:+e[0],y:+e[1],k:b.k};y();return m};m.scale=function(e){if(!arguments.length)return b.k;b={x:b.x,y:b.y,k:null};M(+e);y();return m};m.scaleExtent=function(e){if(!arguments.length)return a;a=e==null?Ye:[+e[0],+e[1]];return m};m.center=function(e){if(!arguments.length)return r;r=e&&[+e[0],+e[1]];return m};m.size=function(e){if(!arguments.length)return u;u=e&&[+e[0],+e[1]];return m};m.duration=function(e){if(!arguments.length)return n;n=+e;return m};m.x=function(e){if(!arguments.length)return v;v=e;d=e.copy();b={x:0,y:0,k:1};return m};m.y=function(e){if(!arguments.length)return h;h=e;p=e.copy();b={x:0,y:0,k:1};return m};function k(e){return[(e[0]-b.x)/b.k,(e[1]-b.y)/b.k]}function g(e){return[e[0]*b.k+b.x,e[1]*b.k+b.y]}function M(e){b.k=Math.max(a[0],Math.min(a[1],e))}function A(e,t){t=g(t);b.x+=e[0]-t[0];b.y+=e[1]-t[1]}function S(e,t,r,a){e.__chart__={x:b.x,y:b.y,k:b.k};M(Math.pow(2,a));A(l=t,r);e=P.select(e);if(n>0)e=e.transition().duration(n);e.call(m.event)}function y(){if(v)v.domain(d.range().map(function(e){return(e-b.x)/b.k}).map(d.invert));if(h)h.domain(p.range().map(function(e){return(e-b.y)/b.k}).map(p.invert))}function E(e){if(!i++)e({type:"zoomstart"})}function L(e){y();e({type:"zoom",scale:b.k,translate:[b.x,b.y]})}function C(e){if(!--i)e({type:"zoomend"}),l=null}function D(){var e=this,t=T.of(e,arguments),r=0,a=P.select(N(e)).on(c,o).on(f,s),n=k(P.mouse(e)),i=_e(e);Ml.call(e);E(t);function o(){r=1;A(P.mouse(e),n);L(t)}function s(){a.on(c,null).on(f,null);i(r);C(t)}}function O(){var c=this,u=T.of(c,arguments),f={},d=0,v,n=".zoom-"+P.event.changedTouches[0].identifier,p="touchmove"+n,h="touchend"+n,m=[],i=P.select(c),o=_e(c);e();E(u);i.on(s,null).on(_,e);function g(){var e=P.touches(c);v=b.k;e.forEach(function(e){if(e.identifier in f)f[e.identifier]=k(e)});return e}function e(){var e=P.event.target;P.select(e).on(p,y).on(h,x);m.push(e);var t=P.event.changedTouches;for(var r=0,a=t.length;r<a;++r){f[t[r].identifier]=null}var n=g(),i=Date.now();if(n.length===1){if(i-w<500){var o=n[0];S(c,o,f[o.identifier],Math.floor(Math.log(b.k)/Math.LN2)+1);F()}w=i}else if(n.length>1){var o=n[0],s=n[1],l=o[0]-s[0],u=o[1]-s[1];d=l*l+u*u}}function y(){var e=P.touches(c),t,r,a,n;Ml.call(c);for(var i=0,o=e.length;i<o;++i,n=null){a=e[i];if(n=f[a.identifier]){if(r)break;t=a,r=n}}if(n){var s=(s=a[0]-t[0])*s+(s=a[1]-t[1])*s,l=d&&Math.sqrt(s/d);t=[(t[0]+a[0])/2,(t[1]+a[1])/2];r=[(r[0]+n[0])/2,(r[1]+n[1])/2];M(l*v)}w=null;A(t,r);L(u)}function x(){if(P.event.touches.length){var e=P.event.changedTouches;for(var t=0,r=e.length;t<r;++t){delete f[e[t].identifier]}for(var a in f){return void g()}}P.selectAll(m).on(n,null);i.on(s,D).on(_,O);o();C(u)}}function x(){var e=T.of(this,arguments);if(o)clearTimeout(o);else Ml.call(this),t=k(l=r||P.mouse(this)),E(e);o=setTimeout(function(){o=null;C(e)},50);F();M(Math.pow(2,Ve()*.002)*b.k);A(l,t);L(e)}function I(){var e=P.mouse(this),t=Math.log(b.k)/Math.LN2;S(this,e,k(e),P.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return P.rebind(m,T,"on")};var Ye=[0,Infinity],Ve,Ge;P.color=We;function We(){}We.prototype.toString=function(){return this.rgb()+""};P.hsl=$e;function $e(e,t,r){return this instanceof $e?void(this.h=+e,this.s=+t,this.l=+r):arguments.length<2?e instanceof $e?new $e(e.h,e.s,e.l):mt(""+e,gt,$e):new $e(e,t,r)}var Ze=$e.prototype=new We;Ze.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);return new $e(this.h,this.s,this.l/e)};Ze.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new $e(this.h,this.s,e*this.l)};Ze.rgb=function(){return Xe(this.h,this.s,this.l)};function Xe(e,t,r){var a,n;e=isNaN(e)?0:(e%=360)<0?e+360:e;t=isNaN(t)?0:t<0?0:t>1?1:t;r=r<0?0:r>1?1:r;n=r<=.5?r*(1+t):r+t-r*t;a=2*r-n;function i(e){if(e>360)e-=360;else if(e<0)e+=360;if(e<60)return a+(n-a)*e/60;if(e<180)return n;if(e<240)return a+(n-a)*(240-e)/60;return a}function o(e){return Math.round(i(e)*255)}return new ft(o(e+120),o(e),o(e-120))}P.hcl=Je;function Je(e,t,r){return this instanceof Je?void(this.h=+e,this.c=+t,this.l=+r):arguments.length<2?e instanceof Je?new Je(e.h,e.c,e.l):e instanceof et?st(e.l,e.a,e.b):st((e=yt((e=P.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Je(e,t,r)}var Ke=Je.prototype=new We;Ke.brighter=function(e){return new Je(this.h,this.c,Math.min(100,this.l+tt*(arguments.length?e:1)))};Ke.darker=function(e){return new Je(this.h,this.c,Math.max(0,this.l-tt*(arguments.length?e:1)))};Ke.rgb=function(){return Qe(this.h,this.c,this.l).rgb()};function Qe(e,t,r){if(isNaN(e))e=0;if(isNaN(t))t=0;return new et(r,Math.cos(e*=De)*t,Math.sin(e)*t)}P.lab=et;function et(e,t,r){return this instanceof et?void(this.l=+e,this.a=+t,this.b=+r):arguments.length<2?e instanceof et?new et(e.l,e.a,e.b):e instanceof Je?Qe(e.h,e.c,e.l):yt((e=ft(e)).r,e.g,e.b):new et(e,t,r)}var tt=18;var rt=.95047,at=1,nt=1.08883;var it=et.prototype=new We;it.brighter=function(e){return new et(Math.min(100,this.l+tt*(arguments.length?e:1)),this.a,this.b)};it.darker=function(e){return new et(Math.max(0,this.l-tt*(arguments.length?e:1)),this.a,this.b)};it.rgb=function(){return ot(this.l,this.a,this.b)};function ot(e,t,r){var a=(e+16)/116,n=a+t/500,i=a-r/200;n=lt(n)*rt;a=lt(a)*at;i=lt(i)*nt;return new ft(ct(3.2404542*n-1.5371385*a-.4985314*i),ct(-.969266*n+1.8760108*a+.041556*i),ct(.0556434*n-.2040259*a+1.0572252*i))}function st(e,t,r){return e>0?new Je(Math.atan2(r,t)*Oe,Math.sqrt(t*t+r*r),e):new Je(NaN,NaN,e)}function lt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ut(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ct(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}P.rgb=ft;function ft(e,t,r){return this instanceof ft?void(this.r=~~e,this.g=~~t,this.b=~~r):arguments.length<2?e instanceof ft?new ft(e.r,e.g,e.b):mt(""+e,ft,Xe):new ft(e,t,r)}function dt(e){return new ft(e>>16,e>>8&255,e&255)}function vt(e){return dt(e)+""}var pt=ft.prototype=new We;pt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,r=this.g,a=this.b,n=30;if(!t&&!r&&!a)return new ft(n,n,n);if(t&&t<n)t=n;if(r&&r<n)r=n;if(a&&a<n)a=n;return new ft(Math.min(255,t/e),Math.min(255,r/e),Math.min(255,a/e))};pt.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new ft(e*this.r,e*this.g,e*this.b)};pt.hsl=function(){return gt(this.r,this.g,this.b)};pt.toString=function(){return"#"+ht(this.r)+ht(this.g)+ht(this.b)};function ht(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function mt(e,t,r){var a=0,n=0,i=0,o,s,l;o=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase());if(o){s=o[2].split(",");switch(o[1]){case"hsl":{return r(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100)}case"rgb":{return t(bt(s[0]),bt(s[1]),bt(s[2]))}}}if(l=_t.get(e)){return t(l.r,l.g,l.b)}if(e!=null&&e.charAt(0)==="#"&&!isNaN(l=parseInt(e.slice(1),16))){if(e.length===4){a=(l&3840)>>4;a=a>>4|a;n=l&240;n=n>>4|n;i=l&15;i=i<<4|i}else if(e.length===7){a=(l&16711680)>>16;n=(l&65280)>>8;i=l&255}}return t(a,n,i)}function gt(e,t,r){var a=Math.min(e/=255,t/=255,r/=255),n=Math.max(e,t,r),i=n-a,o,s,l=(n+a)/2;if(i){s=l<.5?i/(n+a):i/(2-n-a);if(e==n)o=(t-r)/i+(t<r?6:0);else if(t==n)o=(r-e)/i+2;else o=(e-t)/i+4;o*=60}else{o=NaN;s=l>0&&l<1?0:o}return new $e(o,s,l)}function yt(e,t,r){e=xt(e);t=xt(t);r=xt(r);var a=ut((.4124564*e+.3575761*t+.1804375*r)/rt),n=ut((.2126729*e+.7151522*t+.072175*r)/at),i=ut((.0193339*e+.119192*t+.9503041*r)/nt);return et(116*n-16,500*(a-n),200*(n-i))}function xt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function bt(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}var _t=P.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});_t.forEach(function(e,t){_t.set(e,dt(t))});function wt(e){return typeof e==="function"?e:function(){return e}}P.functor=wt;P.xhr=Tt(z);function Tt(a){return function(e,t,r){if(arguments.length===2&&typeof t==="function")r=t,t=null;return kt(e,t,a,r)}}function kt(n,i,r,e){var o={},s=P.dispatch("beforesend","progress","load","error"),l={},u=new XMLHttpRequest,c=null;if(self.XDomainRequest&&!("withCredentials"in u)&&/^(http(s)?:)?\/\//.test(n))u=new XDomainRequest;"onload"in u?u.onload=u.onerror=t:u.onreadystatechange=function(){u.readyState>3&&t()};function t(){var e=u.status,t;if(!e&&At(u)||e>=200&&e<300||e===304){try{t=r.call(o,u)}catch(e){s.error.call(o,e);return}s.load.call(o,t)}else{s.error.call(o,u)}}u.onprogress=function(e){var t=P.event;P.event=e;try{s.progress.call(o,u)}finally{P.event=t}};o.header=function(e,t){e=(e+"").toLowerCase();if(arguments.length<2)return l[e];if(t==null)delete l[e];else l[e]=t+"";return o};o.mimeType=function(e){if(!arguments.length)return i;i=e==null?null:e+"";return o};o.responseType=function(e){if(!arguments.length)return c;c=e;return o};o.response=function(e){r=e;return o};["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(f(arguments)))}});o.send=function(e,t,r){if(arguments.length===2&&typeof t==="function")r=t,t=null;u.open(e,n,true);if(i!=null&&!("accept"in l))l["accept"]=i+",*/*";if(u.setRequestHeader)for(var a in l)u.setRequestHeader(a,l[a]);if(i!=null&&u.overrideMimeType)u.overrideMimeType(i);if(c!=null)u.responseType=c;if(r!=null)o.on("error",r).on("load",function(e){r(null,e)});s.beforesend.call(o,u);u.send(t==null?null:t);return o};o.abort=function(){u.abort();return o};P.rebind(o,s,"on");return e==null?o:o.get(Mt(e))}function Mt(r){return r.length===1?function(e,t){r(e==null?t:null)}:r}function At(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}P.dsv=function(n,i){var t=new RegExp('["'+n+"\n]"),d=n.charCodeAt(0);function o(e,t,r){if(arguments.length<3)r=t,t=null;var a=kt(e,i,t==null?s:l(t),r);a.row=function(e){return arguments.length?a.response((t=e)==null?s:l(e)):t};return a}function s(e){return o.parse(e.responseText)}function l(t){return function(e){return o.parse(e.responseText,t)}}o.parse=function(e,a){var t;return o.parseRows(e,function(n,e){if(t)return t(n,e-1);var r=function(e){var t={};var r=n.length;for(var a=0;a<r;++a){t[n[a]]=e[a]}return t};t=a?function(e,t){return a(r(e),t)}:r})};o.parseRows=function(n,e){var i={},o={},t=[],s=n.length,l=0,r=0,a,u;function c(){if(l>=s)return o;if(u)return u=false,i;var e=l;if(n.charCodeAt(e)===34){var t=e;while(t++<s){if(n.charCodeAt(t)===34){if(n.charCodeAt(t+1)!==34)break;++t}}l=t+2;var r=n.charCodeAt(t+1);if(r===13){u=true;if(n.charCodeAt(t+2)===10)++l}else if(r===10){u=true}return n.slice(e+1,t).replace(/""/g,'"')}while(l<s){var r=n.charCodeAt(l++),a=1;if(r===10)u=true;else if(r===13){u=true;if(n.charCodeAt(l)===10)++l,++a}else if(r!==d)continue;return n.slice(e,l-a)}return n.slice(e)}while((a=c())!==o){var f=[];while(a!==i&&a!==o){f.push(a);a=c()}if(e&&(f=e(f,r++))==null)continue;t.push(f)}return t};o.format=function(e){if(Array.isArray(e[0]))return o.formatRows(e);var r=new A,a=[];e.forEach(function(e){for(var t in e){if(!r.has(t)){a.push(r.add(t))}}});return[a.map(u).join(n)].concat(e.map(function(t){return a.map(function(e){return u(t[e])}).join(n)})).join("\n")};o.formatRows=function(e){return e.map(r).join("\n")};function r(e){return e.map(u).join(n)}function u(e){return t.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return o};P.csv=P.dsv(",","text/csv");P.tsv=P.dsv("\t","text/tab-separated-values");var St,Et,Lt,Ct,Dt=this[E(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};P.timer=function(){Ot.apply(this,arguments)};function Ot(e,t,r){var a=arguments.length;if(a<2)t=0;if(a<3)r=Date.now();var n=r+t,i={c:e,t:n,n:null};if(Et)Et.n=i;else St=i;Et=i;if(!Lt){Ct=clearTimeout(Ct);Lt=1;Dt(It)}return i}function It(){var e=Pt(),t=Rt()-e;if(t>24){if(isFinite(t)){clearTimeout(Ct);Ct=setTimeout(It,t)}Lt=0}else{Lt=1;Dt(It)}}P.timer.flush=function(){Pt();Rt()};function Pt(){var e=Date.now(),t=St;while(t){if(e>=t.t&&t.c(e-t.t))t.c=null;t=t.n}return e}function Rt(){var e,t=St,r=Infinity;while(t){if(t.c){if(t.t<r)r=t.t;t=(e=t).n}else{t=e?e.n=t.n:St=t.n}}Et=e;return r}function Nt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}P.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var zt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Ft);P.formatPrefix=function(e,t){var r=0;if(e=+e){if(e<0)e*=-1;if(t)e=P.round(e,Nt(e,t));r=1+Math.floor(1e-12+Math.log(e)/Math.LN10);r=Math.max(-24,Math.min(24,Math.floor((r-1)/3)*3))}return zt[8+r/3]};function Ft(e,t){var r=Math.pow(10,I(8-t)*3);return{scale:t>8?function(e){return e/r}:function(e){return e*r},symbol:e}}function jt(e){var k=e.decimal,s=e.thousands,l=e.grouping,a=e.currency,M=l&&s?function(e,t){var r=e.length,a=[],n=0,i=l[0],o=0;while(r>0&&i>0){if(o+i+1>t)i=Math.max(1,t-o);a.push(e.substring(r-=i,r+i));if((o+=i+1)>t)break;i=l[n=(n+1)%l.length]}return a.reverse().join(s)}:z;return function(e){var t=Ht.exec(e),c=t[1]||" ",f=t[2]||">",d=t[3]||"-",r=t[4]||"",v=t[5],p=+t[6],h=t[7],m=t[8],g=t[9],y=1,x="",b="",_=false,w=true;if(m)m=+m.substring(1);if(v||c==="0"&&f==="="){v=c="0";f="="}switch(g){case"n":h=true;g="g";break;case"%":y=100;b="%";g="f";break;case"p":y=100;b="%";g="r";break;case"b":case"o":case"x":case"X":if(r==="#")x="0"+g.toLowerCase();case"c":w=false;case"d":_=true;m=0;break;case"s":y=-1;g="r";break}if(r==="$")x=a[0],b=a[1];if(g=="r"&&!m)g="g";if(m!=null){if(g=="g")m=Math.max(1,Math.min(21,m));else if(g=="e"||g=="f")m=Math.max(0,Math.min(20,m))}g=Bt.get(g)||qt;var T=v&&h;return function(e){var t=b;if(_&&e%1)return"";var r=e<0||e===0&&1/e<0?(e=-e,"-"):d==="-"?"":d;if(y<0){var a=P.formatPrefix(e,m);e=a.scale(e);t=a.symbol+b}else{e*=y}e=g(e,m);var n=e.lastIndexOf("."),i,o;if(n<0){var s=w?e.lastIndexOf("e"):-1;if(s<0)i=e,o="";else i=e.substring(0,s),o=e.substring(s)}else{i=e.substring(0,n);o=k+e.substring(n+1)}if(!v&&h)i=M(i,Infinity);var l=x.length+i.length+o.length+(T?0:r.length),u=l<p?new Array(l=p-l+1).join(c):"";if(T)i=M(u+i,u.length?p-o.length:Infinity);r+=x;e=i+o;return(f==="<"?r+e+u:f===">"?u+r+e:f==="^"?u.substring(0,l>>=1)+r+e+u.substring(l):r+(T?e:u+e))+t}}}var Ht=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var Bt=P.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=P.round(e,Nt(e,t))).toFixed(Math.max(0,Math.min(20,Nt(e*(1+1e-15),t))))}});function qt(e){return e+""}var Ut=P.time={},Yt=Date;function Vt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Vt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Gt.setUTCDate.apply(this._,arguments)},setDay:function(){Gt.setUTCDay.apply(this._,arguments)},setFullYear:function(){Gt.setUTCFullYear.apply(this._,arguments)},setHours:function(){Gt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Gt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Gt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Gt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Gt.setUTCSeconds.apply(this._,arguments)},setTime:function(){Gt.setTime.apply(this._,arguments)}};var Gt=Date.prototype;function Wt(a,i,o){function e(e){var t=a(e),r=n(t,1);return e-t<r-e?t:r}function s(e){i(e=a(new Yt(e-1)),1);return e}function n(e,t){i(e=new Yt(+e),t);return e}function l(e,t,r){var a=s(e),n=[];if(r>1){while(a<t){if(!(o(a)%r))n.push(new Date(+a));i(a,1)}}else{while(a<t)n.push(new Date(+a)),i(a,1)}return n}function t(e,t,r){try{Yt=Vt;var a=new Vt;a._=e;return l(a,t,r)}finally{Yt=Date}}a.floor=a;a.round=e;a.ceil=s;a.offset=n;a.range=l;var r=a.utc=$t(a);r.floor=r;r.round=$t(e);r.ceil=$t(s);r.offset=$t(n);r.range=t;return a}function $t(a){return function(e,t){try{Yt=Vt;var r=new Vt;r._=e;return a(r,t)._}finally{Yt=Date}}}Ut.year=Wt(function(e){e=Ut.day(e);e.setMonth(0,1);return e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()});Ut.years=Ut.year.range;Ut.years.utc=Ut.year.utc.range;Ut.day=Wt(function(e){var t=new Yt(2e3,0);t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate());return t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1});Ut.days=Ut.day.range;Ut.days.utc=Ut.day.utc.range;Ut.dayOfYear=function(e){var t=Ut.year(e);return Math.floor((e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,r){r=7-r;var t=Ut[e]=Wt(function(e){(e=Ut.day(e)).setDate(e.getDate()-(e.getDay()+r)%7);return e},function(e,t){e.setDate(e.getDate()+Math.floor(t)*7)},function(e){var t=Ut.year(e).getDay();return Math.floor((Ut.dayOfYear(e)+(t+r)%7)/7)-(t!==r)});Ut[e+"s"]=t.range;Ut[e+"s"].utc=t.utc.range;Ut[e+"OfYear"]=function(e){var t=Ut.year(e).getDay();return Math.floor((Ut.dayOfYear(e)+(t+r)%7)/7)}});Ut.week=Ut.sunday;Ut.weeks=Ut.sunday.range;Ut.weeks.utc=Ut.sunday.utc.range;Ut.weekOfYear=Ut.sundayOfYear;function Zt(e){var t=e.dateTime,r=e.date,a=e.time,n=e.periods,i=e.days,o=e.shortDays,s=e.months,l=e.shortMonths;function u(s){var l=s.length;function e(e){var t=[],r=-1,a=0,n,i,o;while(++r<l){if(s.charCodeAt(r)===37){t.push(s.slice(a,r));if((i=Xt[n=s.charAt(++r)])!=null)n=s.charAt(++r);if(o=b[n])n=o(e,i==null?n==="e"?" ":"0":i);t.push(n);a=r+1}}t.push(s.slice(a,r));return t.join("")}e.parse=function(e){var t={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=c(t,s,e,0);if(r!=e.length)return null;if("p"in t)t.H=t.H%12+t.p*12;var a=t.Z!=null&&Yt!==Vt,n=new(a?Vt:Yt);if("j"in t)n.setFullYear(t.y,0,t.j);else if("W"in t||"U"in t){if(!("w"in t))t.w="W"in t?1:0;n.setFullYear(t.y,0,1);n.setFullYear(t.y,0,"W"in t?(t.w+6)%7+t.W*7-(n.getDay()+5)%7:t.w+t.U*7-(n.getDay()+6)%7)}else n.setFullYear(t.y,t.m,t.d);n.setHours(t.H+(t.Z/100|0),t.M+t.Z%100,t.S,t.L);return a?n._:n};e.toString=function(){return s};return e}function c(e,t,r,a){var n,i,o,s=0,l=t.length,u=r.length;while(s<l){if(a>=u)return-1;n=t.charCodeAt(s++);if(n===37){o=t.charAt(s++);i=_[o in Xt?t.charAt(s++):o];if(!i||(a=i(e,r,a))<0)return-1}else if(n!=r.charCodeAt(a++)){return-1}}return a}u.utc=function(e){var r=u(e);function t(e){try{Yt=Vt;var t=new Yt;t._=e;return r(t)}finally{Yt=Date}}t.parse=function(e){try{Yt=Vt;var t=r.parse(e);return t&&t._}finally{Yt=Date}};t.toString=r.toString;return t};u.multi=u.utc.multi=yr;var f=P.map(),d=er(i),v=tr(i),p=er(o),h=tr(o),m=er(s),g=tr(s),y=er(l),x=tr(l);n.forEach(function(e,t){f.set(e.toLowerCase(),t)});var b={a:function(e){return o[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:u(t),d:function(e,t){return Qt(e.getDate(),t,2)},e:function(e,t){return Qt(e.getDate(),t,2)},H:function(e,t){return Qt(e.getHours(),t,2)},I:function(e,t){return Qt(e.getHours()%12||12,t,2)},j:function(e,t){return Qt(1+Ut.dayOfYear(e),t,3)},L:function(e,t){return Qt(e.getMilliseconds(),t,3)},m:function(e,t){return Qt(e.getMonth()+1,t,2)},M:function(e,t){return Qt(e.getMinutes(),t,2)},p:function(e){return n[+(e.getHours()>=12)]},S:function(e,t){return Qt(e.getSeconds(),t,2)},U:function(e,t){return Qt(Ut.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Qt(Ut.mondayOfYear(e),t,2)},x:u(r),X:u(a),y:function(e,t){return Qt(e.getFullYear()%100,t,2)},Y:function(e,t){return Qt(e.getFullYear()%1e4,t,4)},Z:mr,"%":function(){return"%"}};var _={a:w,A:T,b:k,B:M,c:A,d:cr,e:cr,H:dr,I:dr,j:fr,L:hr,m:ur,M:vr,p:L,S:pr,U:ar,w:rr,W:nr,x:S,X:E,y:or,Y:ir,Z:sr,"%":gr};function w(e,t,r){p.lastIndex=0;var a=p.exec(t.slice(r));return a?(e.w=h.get(a[0].toLowerCase()),r+a[0].length):-1}function T(e,t,r){d.lastIndex=0;var a=d.exec(t.slice(r));return a?(e.w=v.get(a[0].toLowerCase()),r+a[0].length):-1}function k(e,t,r){y.lastIndex=0;var a=y.exec(t.slice(r));return a?(e.m=x.get(a[0].toLowerCase()),r+a[0].length):-1}function M(e,t,r){m.lastIndex=0;var a=m.exec(t.slice(r));return a?(e.m=g.get(a[0].toLowerCase()),r+a[0].length):-1}function A(e,t,r){return c(e,b.c.toString(),t,r)}function S(e,t,r){return c(e,b.x.toString(),t,r)}function E(e,t,r){return c(e,b.X.toString(),t,r)}function L(e,t,r){var a=f.get(t.slice(r,r+=2).toLowerCase());return a==null?-1:(e.p=a,r)}return u}var Xt={"-":"",_:" ",0:"0"},Jt=/^\s*\d+/,Kt=/^%/;function Qt(e,t,r){var a=e<0?"-":"",n=(a?-e:e)+"",i=n.length;return a+(i<r?new Array(r-i+1).join(t)+n:n)}function er(e){return new RegExp("^(?:"+e.map(P.requote).join("|")+")","i")}function tr(e){var t=new y,r=-1,a=e.length;while(++r<a)t.set(e[r].toLowerCase(),r);return t}function rr(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function ar(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r));return a?(e.U=+a[0],r+a[0].length):-1}function nr(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r));return a?(e.W=+a[0],r+a[0].length):-1}function ir(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function or(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r,r+2));return a?(e.y=lr(+a[0]),r+a[0].length):-1}function sr(e,t,r){return/^[+-]\d{4}$/.test(t=t.slice(r,r+5))?(e.Z=-t,r+5):-1}function lr(e){return e+(e>68?1900:2e3)}function ur(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function cr(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function fr(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r,r+3));return a?(e.j=+a[0],r+a[0].length):-1}function dr(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function vr(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function pr(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function hr(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function mr(e){var t=e.getTimezoneOffset(),r=t>0?"-":"+",a=I(t)/60|0,n=I(t)%60;return r+Qt(a,"0",2)+Qt(n,"0",2)}function gr(e,t,r){Kt.lastIndex=0;var a=Kt.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function yr(a){var e=a.length,t=-1;while(++t<e)a[t][0]=this(a[t][0]);return function(e){var t=0,r=a[t];while(!r[1](e))r=a[++t];return r[0](e)}}P.locale=function(e){return{numberFormat:jt(e),timeFormat:Zt(e)}};var xr=P.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});P.format=xr.numberFormat;P.geo={};function br(){}br.prototype={s:0,t:0,add:function(e){wr(e,this.t,_r);wr(_r.s,this.s,this);if(this.s)this.t+=_r.t;else this.s=_r.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var _r=new br;function wr(e,t,r){var a=r.s=e+t,n=a-e,i=a-n;r.t=e-i+(t-n)}P.geo.stream=function(e,t){if(e&&kr.hasOwnProperty(e.type)){kr[e.type](e,t)}else{Tr(e,t)}};function Tr(e,t){if(e&&Mr.hasOwnProperty(e.type)){Mr[e.type](e,t)}}var kr={Feature:function(e,t){Tr(e.geometry,t)},FeatureCollection:function(e,t){var r=e.features,a=-1,n=r.length;while(++a<n)Tr(r[a].geometry,t)}};var Mr={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates;t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){var r=e.coordinates,a=-1,n=r.length;while(++a<n)e=r[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){Ar(e.coordinates,t,0)},MultiLineString:function(e,t){var r=e.coordinates,a=-1,n=r.length;while(++a<n)Ar(r[a],t,0)},Polygon:function(e,t){Sr(e.coordinates,t)},MultiPolygon:function(e,t){var r=e.coordinates,a=-1,n=r.length;while(++a<n)Sr(r[a],t)},GeometryCollection:function(e,t){var r=e.geometries,a=-1,n=r.length;while(++a<n)Tr(r[a],t)}};function Ar(e,t,r){var a=-1,n=e.length-r,i;t.lineStart();while(++a<n)i=e[a],t.point(i[0],i[1],i[2]);t.lineEnd()}function Sr(e,t){var r=-1,a=e.length;t.polygonStart();while(++r<a)Ar(e[r],t,1);t.polygonEnd()}P.geo.area=function(e){Er=0;P.geo.stream(e,Cr);return Er};var Er,Lr=new br;var Cr={sphere:function(){Er+=4*Se},point:C,lineStart:C,lineEnd:C,polygonStart:function(){Lr.reset();Cr.lineStart=Dr},polygonEnd:function(){var e=2*Lr;Er+=e<0?4*Se+e:e;Cr.lineStart=Cr.lineEnd=Cr.point=C}};function Dr(){var r,a,c,f,d;Cr.point=function(e,t){Cr.point=n;c=(r=e)*De,f=Math.cos(t=(a=t)*De/2+Se/4),d=Math.sin(t)};function n(e,t){e*=De;t=t*De/2+Se/4;var r=e-c,a=r>=0?1:-1,n=a*r,i=Math.cos(t),o=Math.sin(t),s=d*o,l=f*i+s*Math.cos(n),u=s*a*Math.sin(n);Lr.add(Math.atan2(u,l));c=e,f=i,d=o}Cr.lineEnd=function(){n(r,a)}}function Or(e){var t=e[0],r=e[1],a=Math.cos(r);return[a*Math.cos(t),a*Math.sin(t),Math.sin(r)]}function Ir(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Pr(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Rr(e,t){e[0]+=t[0];e[1]+=t[1];e[2]+=t[2]}function Nr(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function zr(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t;e[1]/=t;e[2]/=t}function Fr(e){return[Math.atan2(e[1],e[0]),Ne(e[2])]}function jr(e,t){return I(e[0]-t[0])<Me&&I(e[1]-t[1])<Me}P.geo.bounds=function(){var f,d,v,p,h,a,n,m,i,l,u;var c={point:g,lineStart:e,lineEnd:t,polygonStart:function(){c.point=r;c.lineStart=s;c.lineEnd=y;i=0;Cr.polygonStart()},polygonEnd:function(){Cr.polygonEnd();c.point=g;c.lineStart=e;c.lineEnd=t;if(Lr<0)f=-(v=180),d=-(p=90);else if(i>Me)p=90;else if(i<-Me)d=-90;u[0]=f,u[1]=v}};function g(e,t){l.push(u=[f=e,v=e]);if(t<d)d=t;if(t>p)p=t}function o(e,t){var r=Or([e*De,t*De]);if(m){var a=Pr(m,r),n=[a[1],-a[0],0],i=Pr(n,a);zr(i);i=Fr(i);var o=e-h,s=o>0?1:-1,l=i[0]*Oe*s,u=I(o)>180;if(u^(s*h<l&&l<s*e)){var c=i[1]*Oe;if(c>p)p=c}else if(l=(l+360)%360-180,u^(s*h<l&&l<s*e)){var c=-i[1]*Oe;if(c<d)d=c}else{if(t<d)d=t;if(t>p)p=t}if(u){if(e<h){if(x(f,e)>x(f,v))v=e}else{if(x(e,v)>x(f,v))f=e}}else{if(v>=f){if(e<f)f=e;if(e>v)v=e}else{if(e>h){if(x(f,e)>x(f,v))v=e}else{if(x(e,v)>x(f,v))f=e}}}}else{g(e,t)}m=r,h=e}function e(){c.point=o}function t(){u[0]=f,u[1]=v;c.point=g;m=null}function r(e,t){if(m){var r=e-h;i+=I(r)>180?r+(r>0?360:-360):r}else a=e,n=t;Cr.point(e,t);o(e,t)}function s(){Cr.lineStart()}function y(){r(a,n);Cr.lineEnd();if(I(i)>Me)f=-(v=180);u[0]=f,u[1]=v;m=null}function x(e,t){return(t-=e)<0?t+360:t}function b(e,t){return e[0]-t[0]}function _(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(e){p=v=-(f=d=Infinity);l=[];P.geo.stream(e,c);var t=l.length;if(t){l.sort(b);for(var r=1,a=l[0],n,i=[a];r<t;++r){n=l[r];if(_(n[0],a)||_(n[1],a)){if(x(a[0],n[1])>x(a[0],a[1]))a[1]=n[1];if(x(n[0],a[1])>x(a[0],a[1]))a[0]=n[0]}else{i.push(a=n)}}var o=-Infinity,s;for(var t=i.length-1,r=0,a=i[t],n;r<=t;a=n,++r){n=i[r];if((s=x(a[1],n[0]))>o)o=s,f=n[0],v=a[1]}}l=u=null;return f===Infinity||d===Infinity?[[NaN,NaN],[NaN,NaN]]:[[f,d],[v,p]]}}();P.geo.centroid=function(e){Hr=Br=qr=Ur=Yr=Vr=Gr=Wr=$r=Zr=Xr=0;P.geo.stream(e,Jr);var t=$r,r=Zr,a=Xr,n=t*t+r*r+a*a;if(n<Ae){t=Vr,r=Gr,a=Wr;if(Br<Me)t=qr,r=Ur,a=Yr;n=t*t+r*r+a*a;if(n<Ae)return[NaN,NaN]}return[Math.atan2(r,t)*Oe,Ne(a/Math.sqrt(n))*Oe]};var Hr,Br,qr,Ur,Yr,Vr,Gr,Wr,$r,Zr,Xr;var Jr={sphere:C,point:Kr,lineStart:ea,lineEnd:ta,polygonStart:function(){Jr.lineStart=ra},polygonEnd:function(){Jr.lineStart=ea}};function Kr(e,t){e*=De;var r=Math.cos(t*=De);Qr(r*Math.cos(e),r*Math.sin(e),Math.sin(t))}function Qr(e,t,r){++Hr;qr+=(e-qr)/Hr;Ur+=(t-Ur)/Hr;Yr+=(r-Yr)/Hr}function ea(){var s,l,u;Jr.point=function(e,t){e*=De;var r=Math.cos(t*=De);s=r*Math.cos(e);l=r*Math.sin(e);u=Math.sin(t);Jr.point=a;Qr(s,l,u)};function a(e,t){e*=De;var r=Math.cos(t*=De),a=r*Math.cos(e),n=r*Math.sin(e),i=Math.sin(t),o=Math.atan2(Math.sqrt((o=l*i-u*n)*o+(o=u*a-s*i)*o+(o=s*n-l*a)*o),s*a+l*n+u*i);Br+=o;Vr+=o*(s+(s=a));Gr+=o*(l+(l=n));Wr+=o*(u+(u=i));Qr(s,l,u)}}function ta(){Jr.point=Kr}function ra(){var a,n,v,p,h;Jr.point=function(e,t){a=e,n=t;Jr.point=i;e*=De;var r=Math.cos(t*=De);v=r*Math.cos(e);p=r*Math.sin(e);h=Math.sin(t);Qr(v,p,h)};Jr.lineEnd=function(){i(a,n);Jr.lineEnd=ta;Jr.point=Kr};function i(e,t){e*=De;var r=Math.cos(t*=De),a=r*Math.cos(e),n=r*Math.sin(e),i=Math.sin(t),o=p*i-h*n,s=h*a-v*i,l=v*n-p*a,u=Math.sqrt(o*o+s*s+l*l),c=v*a+p*n+h*i,f=u&&-Re(c)/u,d=Math.atan2(u,c);$r+=f*o;Zr+=f*s;Xr+=f*l;Br+=d;Vr+=d*(v+(v=a));Gr+=d*(p+(p=n));Wr+=d*(h+(h=i));Qr(v,p,h)}}function aa(r,a){function e(e,t){return e=r(e,t),a(e[0],e[1])}if(r.invert&&a.invert)e.invert=function(e,t){return e=a.invert(e,t),e&&r.invert(e[0],e[1])};return e}function na(){return true}function ia(e,t,r,a,s){var l=[],u=[];e.forEach(function(e){if((t=e.length-1)<=0)return;var t,r=e[0],a=e[t];if(jr(r,a)){s.lineStart();for(var n=0;n<t;++n)s.point((r=e[n])[0],r[1]);s.lineEnd();return}var i=new sa(r,e,null,true),o=new sa(r,null,i,false);i.o=o;l.push(i);u.push(o);i=new sa(a,e,null,false);o=new sa(a,null,i,true);i.o=o;l.push(i);u.push(o)});u.sort(t);oa(l);oa(u);if(!l.length)return;for(var n=0,i=r,o=u.length;n<o;++n){u[n].e=i=!i}var c=l[0],f,d;while(1){var v=c,p=true;while(v.v)if((v=v.n)===c)return;f=v.z;s.lineStart();do{v.v=v.o.v=true;if(v.e){if(p){for(var n=0,o=f.length;n<o;++n)s.point((d=f[n])[0],d[1])}else{a(v.x,v.n.x,1,s)}v=v.n}else{if(p){f=v.p.z;for(var n=f.length-1;n>=0;--n)s.point((d=f[n])[0],d[1])}else{a(v.x,v.p.x,-1,s)}v=v.p}v=v.o;f=v.z;p=!p}while(!v.v);s.lineEnd()}}function oa(e){if(!(t=e.length))return;var t,r=0,a=e[0],n;while(++r<t){a.n=n=e[r];n.p=a;a=n}a.n=n=e[0];n.p=a}function sa(e,t,r,a){this.x=e;this.z=t;this.o=r;this.e=a;this.v=false;this.n=this.p=null}function la(y,x,b,_){return function(a,o){var n=x(o),t=a.invert(_[0],_[1]);var r={point:i,lineStart:s,lineEnd:l,polygonStart:function(){r.point=h;r.lineStart=m;r.lineEnd=g;u=[];v=[]},polygonEnd:function(){r.point=i;r.lineStart=s;r.lineEnd=l;u=P.merge(u);var e=ma(t,v);if(u.length){if(!d)o.polygonStart(),d=true;ia(u,fa,e,b,o)}else if(e){if(!d)o.polygonStart(),d=true;o.lineStart();b(null,null,1,o);o.lineEnd()}if(d)o.polygonEnd(),d=false;u=v=null},sphere:function(){o.polygonStart();o.lineStart();b(null,null,1,o);o.lineEnd();o.polygonEnd()}};function i(e,t){var r=a(e,t);if(y(e=r[0],t=r[1]))o.point(e,t)}function e(e,t){var r=a(e,t);n.point(r[0],r[1])}function s(){r.point=e;n.lineStart()}function l(){r.point=i;n.lineEnd()}var u;var c=ca(),f=x(c),d=false,v,p;function h(e,t){p.push([e,t]);var r=a(e,t);f.point(r[0],r[1])}function m(){f.lineStart();p=[]}function g(){h(p[0][0],p[0][1]);f.lineEnd();var e=f.clean(),t=c.buffer(),r,a=t.length;p.pop();v.push(p);p=null;if(!a)return;if(e&1){r=t[0];var a=r.length-1,n=-1,i;if(a>0){if(!d)o.polygonStart(),d=true;o.lineStart();while(++n<a)o.point((i=r[n])[0],i[1]);o.lineEnd()}return}if(a>1&&e&2)t.push(t.pop().concat(t.shift()));u.push(t.filter(ua))}return r}}function ua(e){return e.length>1}function ca(){var t=[],r;return{lineStart:function(){t.push(r=[])},point:function(e,t){r.push([e,t])},lineEnd:C,buffer:function(){var e=t;t=[];r=null;return e},rejoin:function(){if(t.length>1)t.push(t.pop().concat(t.shift()))}}}function fa(e,t){return((e=e.x)[0]<0?e[1]-Ce-Me:Ce-e[1])-((t=t.x)[0]<0?t[1]-Ce-Me:Ce-t[1])}var da=la(na,va,ha,[-Se,-Se/2]);function va(n){var i=NaN,o=NaN,s=NaN,l;return{lineStart:function(){n.lineStart();l=1},point:function(e,t){var r=e>0?Se:-Se,a=I(e-i);if(I(a-Se)<Me){n.point(i,o=(o+t)/2>0?Ce:-Ce);n.point(s,o);n.lineEnd();n.lineStart();n.point(r,o);n.point(e,o);l=0}else if(s!==r&&a>=Se){if(I(i-s)<Me)i-=s*Me;if(I(e-r)<Me)e-=r*Me;o=pa(i,o,e,t);n.point(s,o);n.lineEnd();n.lineStart();n.point(r,o);l=0}n.point(i=e,o=t);s=r},lineEnd:function(){n.lineEnd();i=o=NaN},clean:function(){return 2-l}}}function pa(e,t,r,a){var n,i,o=Math.sin(e-r);return I(o)>Me?Math.atan((Math.sin(t)*(i=Math.cos(a))*Math.sin(r)-Math.sin(a)*(n=Math.cos(t))*Math.sin(e))/(n*i*o)):(t+a)/2}function ha(e,t,r,a){var n;if(e==null){n=r*Ce;a.point(-Se,n);a.point(0,n);a.point(Se,n);a.point(Se,0);a.point(Se,-n);a.point(0,-n);a.point(-Se,-n);a.point(-Se,0);a.point(-Se,n)}else if(I(e[0]-t[0])>Me){var i=e[0]<t[0]?Se:-Se;n=r*i/2;a.point(-i,n);a.point(0,n);a.point(i,n)}else{a.point(t[0],t[1])}}function ma(e,t){var r=e[0],a=e[1],n=[Math.sin(r),-Math.cos(r),0],i=0,o=0;Lr.reset();for(var s=0,l=t.length;s<l;++s){var u=t[s],c=u.length;if(!c)continue;var f=u[0],d=f[0],v=f[1]/2+Se/4,p=Math.sin(v),h=Math.cos(v),m=1;while(true){if(m===c)m=0;e=u[m];var g=e[0],y=e[1]/2+Se/4,x=Math.sin(y),b=Math.cos(y),_=g-d,w=_>=0?1:-1,T=w*_,k=T>Se,M=p*x;Lr.add(Math.atan2(M*w*Math.sin(T),h*b+M*Math.cos(T)));i+=k?_+w*Ee:_;if(k^d>=r^g>=r){var A=Pr(Or(f),Or(e));zr(A);var S=Pr(n,A);zr(S);var E=(k^_>=0?-1:1)*Ne(S[2]);if(a>E||a===E&&(A[0]||A[1])){o+=k^_>=0?1:-1}}if(!m++)break;d=g,p=x,h=b,f=e}}return(i<-Me||i<Me&&Lr<-Me)^o&1}function ga(n){var C=Math.cos(n),v=C>0,p=I(C)>Me,e=en(n,6*De);return la(h,t,e,v?[0,-n]:[-Se,n-Se]);function h(e,t){return Math.cos(e)*Math.cos(t)>C}function t(s){var l,u,c,f,d;return{lineStart:function(){f=c=false;d=1},point:function(e,t){var r=[e,t],a,n=h(e,t),i=v?n?0:g(e,t):n?g(e+(e<0?Se:-Se),t):0;if(!l&&(f=c=n))s.lineStart();if(n!==c){a=m(l,r);if(jr(l,a)||jr(r,a)){r[0]+=Me;r[1]+=Me;n=h(r[0],r[1])}}if(n!==c){d=0;if(n){s.lineStart();a=m(r,l);s.point(a[0],a[1])}else{a=m(l,r);s.point(a[0],a[1]);s.lineEnd()}l=a}else if(p&&l&&v^n){var o;if(!(i&u)&&(o=m(r,l,true))){d=0;if(v){s.lineStart();s.point(o[0][0],o[0][1]);s.point(o[1][0],o[1][1]);s.lineEnd()}else{s.point(o[1][0],o[1][1]);s.lineEnd();s.lineStart();s.point(o[0][0],o[0][1])}}}if(n&&(!l||!jr(l,r))){s.point(r[0],r[1])}l=r,c=n,u=i},lineEnd:function(){if(c)s.lineEnd();l=null},clean:function(){return d|(f&&c)<<1}}}function m(e,t,r){var a=Or(e),n=Or(t);var i=[1,0,0],o=Pr(a,n),s=Ir(o,o),l=o[0],u=s-l*l;if(!u)return!r&&e;var c=C*s/u,f=-C*l/u,d=Pr(i,o),v=Nr(i,c),p=Nr(o,f);Rr(v,p);var h=d,m=Ir(v,h),g=Ir(h,h),y=m*m-g*(Ir(v,v)-1);if(y<0)return;var x=Math.sqrt(y),b=Nr(h,(-m-x)/g);Rr(b,v);b=Fr(b);if(!r)return b;var _=e[0],w=t[0],T=e[1],k=t[1],M;if(w<_)M=_,_=w,w=M;var A=w-_,S=I(A-Se)<Me,E=S||A<Me;if(!S&&k<T)M=T,T=k,k=M;if(E?S?T+k>0^b[1]<(I(b[0]-_)<Me?T:k):T<=b[1]&&b[1]<=k:A>Se^(_<=b[0]&&b[0]<=w)){var L=Nr(h,(-m+x)/g);Rr(L,v);return[b,Fr(L)]}}function g(e,t){var r=v?n:Se-n,a=0;if(e<-r)a|=1;else if(e>r)a|=2;if(t<-r)a|=4;else if(t>r)a|=8;return a}}function ya(d,v,p,h){return function(e){var t=e.a,r=e.b,a=t.x,n=t.y,i=r.x,o=r.y,s=0,l=1,u=i-a,c=o-n,f;f=d-a;if(!u&&f>0)return;f/=u;if(u<0){if(f<s)return;if(f<l)l=f}else if(u>0){if(f>l)return;if(f>s)s=f}f=p-a;if(!u&&f<0)return;f/=u;if(u<0){if(f>l)return;if(f>s)s=f}else if(u>0){if(f<s)return;if(f<l)l=f}f=v-n;if(!c&&f>0)return;f/=c;if(c<0){if(f<s)return;if(f<l)l=f}else if(c>0){if(f>l)return;if(f>s)s=f}f=h-n;if(!c&&f<0)return;f/=c;if(c<0){if(f>l)return;if(f>s)s=f}else if(c>0){if(f<s)return;if(f<l)l=f}if(s>0)e.a={x:a+s*u,y:n+s*c};if(l<1)e.b={x:a+l*u,y:n+l*c};return e}}var xa=1e9;P.geo.clipExtent=function(){var t,r,a,n,i,o,s={stream:function(e){if(i)i.valid=false;i=o(e);i.valid=true;return i},extent:function(e){if(!arguments.length)return[[t,r],[a,n]];o=ba(t=+e[0][0],r=+e[0][1],a=+e[1][0],n=+e[1][1]);if(i)i.valid=false,i=null;return s}};return s.extent([[0,0],[960,500]])};function ba(T,k,M,A){return function(n){var a=n,e=ca(),i=ya(T,k,M,A),o,c,s;var t={point:r,lineStart:b,lineEnd:_,polygonStart:function(){n=e;o=[];c=[];x=true},polygonEnd:function(){n=a;o=P.merge(o);var e=l([T,A]),t=x&&e,r=o.length;if(t||r){n.polygonStart();if(t){n.lineStart();u(null,null,1,n);n.lineEnd()}if(r){ia(o,E,e,u,n)}n.polygonEnd()}o=c=s=null}};function l(e){var t=0,r=c.length,a=e[1];for(var n=0;n<r;++n){for(var i=1,o=c[n],s=o.length,l=o[0],u;i<s;++i){u=o[i];if(l[1]<=a){if(u[1]>a&&Pe(l,u,e)>0)++t}else{if(u[1]<=a&&Pe(l,u,e)<0)--t}l=u}}return t!==0}function u(e,t,r,a){var n=0,i=0;if(e==null||(n=S(e,r))!==(i=S(t,r))||L(e,t)<0^r>0){do{a.point(n===0||n===3?T:M,n>1?A:k)}while((n=(n+r+4)%4)!==i)}else{a.point(t[0],t[1])}}function f(e,t){return T<=e&&e<=M&&k<=t&&t<=A}function r(e,t){if(f(e,t))n.point(e,t)}var d,v,p,h,m,g,y,x;function b(){t.point=w;if(c)c.push(s=[]);y=true;g=false;h=m=NaN}function _(){if(o){w(d,v);if(p&&g)e.rejoin();o.push(e.buffer())}t.point=r;if(g)n.lineEnd()}function w(e,t){e=Math.max(-xa,Math.min(xa,e));t=Math.max(-xa,Math.min(xa,t));var r=f(e,t);if(c)s.push([e,t]);if(y){d=e,v=t,p=r;y=false;if(r){n.lineStart();n.point(e,t)}}else{if(r&&g)n.point(e,t);else{var a={a:{x:h,y:m},b:{x:e,y:t}};if(i(a)){if(!g){n.lineStart();n.point(a.a.x,a.a.y)}n.point(a.b.x,a.b.y);if(!r)n.lineEnd();x=false}else if(r){n.lineStart();n.point(e,t);x=false}}}h=e,m=t,g=r}return t};function S(e,t){return I(e[0]-T)<Me?t>0?0:3:I(e[0]-M)<Me?t>0?2:1:I(e[1]-k)<Me?t>0?1:0:t>0?3:2}function E(e,t){return L(e.x,t.x)}function L(e,t){var r=S(e,1),a=S(t,1);return r!==a?r-a:r===0?t[1]-e[1]:r===1?e[0]-t[0]:r===2?e[1]-t[1]:t[0]-e[0]}}function _a(e){var t=0,r=Se/3,a=Ga(e),n=a(t,r);n.parallels=function(e){if(!arguments.length)return[t/Se*180,r/Se*180];return a(t=e[0]*Se/180,r=e[1]*Se/180)};return n}function wa(e,t){var r=Math.sin(e),a=(r+Math.sin(t))/2,n=1+r*(2*a-r),i=Math.sqrt(n)/a;function o(e,t){var r=Math.sqrt(n-2*a*Math.sin(t))/a;return[r*Math.sin(e*=a),i-r*Math.cos(e)]}o.invert=function(e,t){var r=i-t;return[Math.atan2(e,r)/a,Ne((n-(e*e+r*r)*a*a)/(2*a))]};return o}(P.geo.conicEqualArea=function(){return _a(wa)}).raw=wa;P.geo.albers=function(){return P.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};P.geo.albersUsa=function(){var i=P.geo.albers();var o=P.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);var s=P.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);var a,n={point:function(e,t){a=[e,t]}},l,u,c;function f(e){var t=e[0],r=e[1];a=null;(l(t,r),a)||(u(t,r),a)||c(t,r);return a}f.invert=function(e){var t=i.scale(),r=i.translate(),a=(e[0]-r[0])/t,n=(e[1]-r[1])/t;return(n>=.12&&n<.234&&a>=-.425&&a<-.214?o:n>=.166&&n<.234&&a>=-.214&&a<-.115?s:i).invert(e)};f.stream=function(e){var r=i.stream(e),a=o.stream(e),n=s.stream(e);return{point:function(e,t){r.point(e,t);a.point(e,t);n.point(e,t)},sphere:function(){r.sphere();a.sphere();n.sphere()},lineStart:function(){r.lineStart();a.lineStart();n.lineStart()},lineEnd:function(){r.lineEnd();a.lineEnd();n.lineEnd()},polygonStart:function(){r.polygonStart();a.polygonStart();n.polygonStart()},polygonEnd:function(){r.polygonEnd();a.polygonEnd();n.polygonEnd()}}};f.precision=function(e){if(!arguments.length)return i.precision();i.precision(e);o.precision(e);s.precision(e);return f};f.scale=function(e){if(!arguments.length)return i.scale();i.scale(e);o.scale(e*.35);s.scale(e);return f.translate(i.translate())};f.translate=function(e){if(!arguments.length)return i.translate();var t=i.scale(),r=+e[0],a=+e[1];l=i.translate(e).clipExtent([[r-.455*t,a-.238*t],[r+.455*t,a+.238*t]]).stream(n).point;u=o.translate([r-.307*t,a+.201*t]).clipExtent([[r-.425*t+Me,a+.12*t+Me],[r-.214*t-Me,a+.234*t-Me]]).stream(n).point;c=s.translate([r-.205*t,a+.212*t]).clipExtent([[r-.214*t+Me,a+.166*t+Me],[r-.115*t-Me,a+.234*t-Me]]).stream(n).point;return f};return f.scale(1070)};var Ta,ka,Ma={point:C,lineStart:C,lineEnd:C,polygonStart:function(){ka=0;Ma.lineStart=Aa},polygonEnd:function(){Ma.lineStart=Ma.lineEnd=Ma.point=C;Ta+=I(ka/2)}};function Aa(){var r,a,n,i;Ma.point=function(e,t){Ma.point=o;r=n=e,a=i=t};function o(e,t){ka+=i*e-n*t;n=e,i=t}Ma.lineEnd=function(){o(r,a)}}var Sa,Ea,La,Ca;var Da={point:Oa,lineStart:C,lineEnd:C,polygonStart:C,polygonEnd:C};function Oa(e,t){if(e<Sa)Sa=e;if(e>La)La=e;if(t<Ea)Ea=t;if(t>Ca)Ca=t}function Ia(){var r=Pa(4.5),a=[];var n={point:e,lineStart:function(){n.point=t},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o;n.point=e},pointRadius:function(e){r=Pa(e);return n},result:function(){if(a.length){var e=a.join("");a=[];return e}}};function e(e,t){a.push("M",e,",",t,r)}function t(e,t){a.push("M",e,",",t);n.point=i}function i(e,t){a.push("L",e,",",t)}function o(){n.point=e}function s(){a.push("Z")}return n}function Pa(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var Ra={point:Na,lineStart:za,lineEnd:Fa,polygonStart:function(){Ra.lineStart=ja},polygonEnd:function(){Ra.point=Na;Ra.lineStart=za;Ra.lineEnd=Fa}};function Na(e,t){qr+=e;Ur+=t;++Yr}function za(){var i,o;Ra.point=function(e,t){Ra.point=r;Na(i=e,o=t)};function r(e,t){var r=e-i,a=t-o,n=Math.sqrt(r*r+a*a);Vr+=n*(i+e)/2;Gr+=n*(o+t)/2;Wr+=n;Na(i=e,o=t)}}function Fa(){Ra.point=Na}function ja(){var r,a,i,o;Ra.point=function(e,t){Ra.point=n;Na(r=i=e,a=o=t)};function n(e,t){var r=e-i,a=t-o,n=Math.sqrt(r*r+a*a);Vr+=n*(i+e)/2;Gr+=n*(o+t)/2;Wr+=n;n=o*e-i*t;$r+=n*(i+e);Zr+=n*(o+t);Xr+=n*3;Na(i=e,o=t)}Ra.lineEnd=function(){n(r,a)}}function Ha(r){var a=4.5;var n={point:e,lineStart:function(){n.point=t},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o;n.point=e},pointRadius:function(e){a=e;return n},result:C};function e(e,t){r.moveTo(e+a,t);r.arc(e,t,a,0,Ee)}function t(e,t){r.moveTo(e,t);n.point=i}function i(e,t){r.lineTo(e,t)}function o(){n.point=e}function s(){r.closePath()}return n}function Ba(L){var C=.5,D=Math.cos(30*De),w=16;function t(e){return(w?a:r)(e)}function r(r){return Ya(r,function(e,t){e=L(e,t);r.point(e[0],e[1])})}function a(n){var r,a,i,o,s,l,u,c,f,d,v,p,h;var m={point:e,lineStart:t,lineEnd:y,polygonStart:function(){n.polygonStart();m.lineStart=x},polygonEnd:function(){n.polygonEnd();m.lineStart=t}};function e(e,t){e=L(e,t);n.point(e[0],e[1])}function t(){f=NaN;m.point=g;n.lineStart()}function g(e,t){var r=Or([e,t]),a=L(e,t);O(f,d,c,v,p,h,f=a[0],d=a[1],c=e,v=r[0],p=r[1],h=r[2],w,n);n.point(f,d)}function y(){m.point=e;n.lineEnd()}function x(){t();m.point=b;m.lineEnd=_}function b(e,t){g(r=e,a=t),i=f,o=d,s=v,l=p,u=h;m.point=g}function _(){O(f,d,c,v,p,h,i,o,r,s,l,u,w,n);m.lineEnd=y;y()}return m}function O(e,t,r,a,n,i,o,s,l,u,c,f,d,v){var p=o-e,h=s-t,m=p*p+h*h;if(m>4*C&&d--){var g=a+u,y=n+c,x=i+f,b=Math.sqrt(g*g+y*y+x*x),_=Math.asin(x/=b),w=I(I(x)-1)<Me||I(r-l)<Me?(r+l)/2:Math.atan2(y,g),T=L(w,_),k=T[0],M=T[1],A=k-e,S=M-t,E=h*A-p*S;if(E*E/m>C||I((p*A+h*S)/m-.5)>.3||a*u+n*c+i*f<D){O(e,t,r,a,n,i,k,M,w,g/=b,y/=b,x,d,v);v.point(k,M);O(k,M,w,g,y,x,o,s,l,u,c,f,d,v)}}}t.precision=function(e){if(!arguments.length)return Math.sqrt(C);w=(C=e*e)>0&&16;return t};return t}P.geo.path=function(){var t=4.5,r,a,n,i,o;function s(e){if(e){if(typeof t==="function")i.pointRadius(+t.apply(this,arguments));if(!o||!o.valid)o=n(i);P.geo.stream(e,o)}return i.result()}s.area=function(e){Ta=0;P.geo.stream(e,n(Ma));return Ta};s.centroid=function(e){qr=Ur=Yr=Vr=Gr=Wr=$r=Zr=Xr=0;P.geo.stream(e,n(Ra));return Xr?[$r/Xr,Zr/Xr]:Wr?[Vr/Wr,Gr/Wr]:Yr?[qr/Yr,Ur/Yr]:[NaN,NaN]};s.bounds=function(e){La=Ca=-(Sa=Ea=Infinity);P.geo.stream(e,n(Da));return[[Sa,Ea],[La,Ca]]};s.projection=function(e){if(!arguments.length)return r;n=(r=e)?e.stream||qa(e):z;return l()};s.context=function(e){if(!arguments.length)return a;i=(a=e)==null?new Ia:new Ha(e);if(typeof t!=="function")i.pointRadius(t);return l()};s.pointRadius=function(e){if(!arguments.length)return t;t=typeof e==="function"?e:(i.pointRadius(+e),+e);return s};function l(){o=null;return s}return s.projection(P.geo.albersUsa()).context(null)};function qa(r){var t=Ba(function(e,t){return r([e*Oe,t*Oe])});return function(e){return Wa(t(e))}}P.geo.transform=function(a){return{stream:function(e){var t=new Ua(e);for(var r in a)t[r]=a[r];return t}}};function Ua(e){this.stream=e}Ua.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ya(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}P.geo.projection=Va;P.geo.projectionMutator=Ga;function Va(e){return Ga(function(){return e})()}function Ga(e){var r,t,a,n=Ba(function(e,t){e=r(e,t);return[e[0]*i+v,p-e[1]*i]}),i=150,o=480,s=250,l=0,u=0,c=0,f=0,d=0,v,p,h=da,m=z,g=null,y=null,x;function b(e){e=a(e[0]*De,e[1]*De);return[e[0]*i+v,p-e[1]*i]}function _(e){e=a.invert((e[0]-v)/i,(p-e[1])/i);return e&&[e[0]*Oe,e[1]*Oe]}b.stream=function(e){if(x)x.valid=false;x=Wa(h(t,n(m(e))));x.valid=true;return x};b.clipAngle=function(e){if(!arguments.length)return g;h=e==null?(g=e,da):ga((g=+e)*De);return T()};b.clipExtent=function(e){if(!arguments.length)return y;y=e;m=e?ba(e[0][0],e[0][1],e[1][0],e[1][1]):z;return T()};b.scale=function(e){if(!arguments.length)return i;i=+e;return w()};b.translate=function(e){if(!arguments.length)return[o,s];o=+e[0];s=+e[1];return w()};b.center=function(e){if(!arguments.length)return[l*Oe,u*Oe];l=e[0]%360*De;u=e[1]%360*De;return w()};b.rotate=function(e){if(!arguments.length)return[c*Oe,f*Oe,d*Oe];c=e[0]%360*De;f=e[1]%360*De;d=e.length>2?e[2]%360*De:0;return w()};P.rebind(b,n,"precision");function w(){a=aa(t=Xa(c,f,d),r);var e=r(l,u);v=o-e[0]*i;p=s+e[1]*i;return T()}function T(){if(x)x.valid=false,x=null;return b}return function(){r=e.apply(this,arguments);b.invert=r.invert&&_;return w()}}function Wa(r){return Ya(r,function(e,t){r.point(e*De,t*De)})}function $a(e,t){return[e,t]}(P.geo.equirectangular=function(){return Va($a)}).raw=$a.invert=$a;P.geo.rotation=function(t){t=Xa(t[0]%360*De,t[1]*De,t.length>2?t[2]*De:0);function e(e){e=t(e[0]*De,e[1]*De);return e[0]*=Oe,e[1]*=Oe,e}e.invert=function(e){e=t.invert(e[0]*De,e[1]*De);return e[0]*=Oe,e[1]*=Oe,e};return e};function Za(e,t){return[e>Se?e-Ee:e<-Se?e+Ee:e,t]}Za.invert=$a;function Xa(e,t,r){return e?t||r?aa(Ka(e),Qa(t,r)):Ka(e):t||r?Qa(t,r):Za}function Ja(r){return function(e,t){return e+=r,[e>Se?e-Ee:e<-Se?e+Ee:e,t]}}function Ka(e){var t=Ja(e);t.invert=Ja(-e);return t}function Qa(e,t){var s=Math.cos(e),l=Math.sin(e),u=Math.cos(t),c=Math.sin(t);function r(e,t){var r=Math.cos(t),a=Math.cos(e)*r,n=Math.sin(e)*r,i=Math.sin(t),o=i*s+a*l;return[Math.atan2(n*u-o*c,a*s-i*l),Ne(o*u+n*c)]}r.invert=function(e,t){var r=Math.cos(t),a=Math.cos(e)*r,n=Math.sin(e)*r,i=Math.sin(t),o=i*u-n*c;return[Math.atan2(n*u+i*c,a*s+o*l),Ne(o*s-a*l)]};return r}P.geo.circle=function(){var t=[0,0],r,a=6,n;function i(){var e=typeof t==="function"?t.apply(this,arguments):t,r=Xa(-e[0]*De,-e[1]*De,0).invert,a=[];n(null,null,1,{point:function(e,t){a.push(e=r(e,t));e[0]*=Oe,e[1]*=Oe}});return{type:"Polygon",coordinates:[a]}}i.origin=function(e){if(!arguments.length)return t;t=e;return i};i.angle=function(e){if(!arguments.length)return r;n=en((r=+e)*De,a*De);return i};i.precision=function(e){if(!arguments.length)return a;n=en(r*De,(a=+e)*De);return i};return i.angle(90)};function en(s,l){var u=Math.cos(s),c=Math.sin(s);return function(e,t,r,a){var n=r*l;if(e!=null){e=tn(u,e);t=tn(u,t);if(r>0?e<t:e>t)e+=r*Ee}else{e=s+r*Ee;t=s-.5*n}for(var i,o=e;r>0?o>t:o<t;o-=n){a.point((i=Fr([u,-c*Math.cos(o),-c*Math.sin(o)]))[0],i[1])}}}function tn(e,t){var r=Or(t);r[0]-=e;zr(r);var a=Re(-r[1]);return((-r[2]<0?-a:a)+2*Math.PI-Me)%(2*Math.PI)}P.geo.distance=function(e,t){var r=(t[0]-e[0])*De,a=e[1]*De,n=t[1]*De,i=Math.sin(r),o=Math.cos(r),s=Math.sin(a),l=Math.cos(a),u=Math.sin(n),c=Math.cos(n),f;return Math.atan2(Math.sqrt((f=c*i)*f+(f=l*u-s*c*o)*f),s*u+l*c*o)};P.geo.graticule=function(){var t,r,a,n,i,o,s,l,u=10,c=u,f=90,d=360,v,p,h,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:e()}}function e(){return P.range(Math.ceil(n/f)*f,a,f).map(h).concat(P.range(Math.ceil(l/d)*d,s,d).map(m)).concat(P.range(Math.ceil(r/u)*u,t,u).filter(function(e){return I(e%f)>Me}).map(v)).concat(P.range(Math.ceil(o/c)*c,i,c).filter(function(e){return I(e%d)>Me}).map(p))}y.lines=function(){return e().map(function(e){return{type:"LineString",coordinates:e}})};y.outline=function(){return{type:"Polygon",coordinates:[h(n).concat(m(s).slice(1),h(a).reverse().slice(1),m(l).reverse().slice(1))]}};y.extent=function(e){if(!arguments.length)return y.minorExtent();return y.majorExtent(e).minorExtent(e)};y.majorExtent=function(e){if(!arguments.length)return[[n,l],[a,s]];n=+e[0][0],a=+e[1][0];l=+e[0][1],s=+e[1][1];if(n>a)e=n,n=a,a=e;if(l>s)e=l,l=s,s=e;return y.precision(g)};y.minorExtent=function(e){if(!arguments.length)return[[r,o],[t,i]];r=+e[0][0],t=+e[1][0];o=+e[0][1],i=+e[1][1];if(r>t)e=r,r=t,t=e;if(o>i)e=o,o=i,i=e;return y.precision(g)};y.step=function(e){if(!arguments.length)return y.minorStep();return y.majorStep(e).minorStep(e)};y.majorStep=function(e){if(!arguments.length)return[f,d];f=+e[0],d=+e[1];return y};y.minorStep=function(e){if(!arguments.length)return[u,c];u=+e[0],c=+e[1];return y};y.precision=function(e){if(!arguments.length)return g;g=+e;v=rn(o,i,90);p=an(r,t,g);h=rn(l,s,90);m=an(n,a,g);return y};return y.majorExtent([[-180,-90+Me],[180,90-Me]]).minorExtent([[-180,-80-Me],[180,80+Me]])};function rn(e,t,r){var a=P.range(e,t-Me,r).concat(t);return function(t){return a.map(function(e){return[t,e]})}}function an(e,t,r){var a=P.range(e,t-Me,r).concat(t);return function(t){return a.map(function(e){return[e,t]})}}function nn(e){return e.source}function on(e){return e.target}P.geo.greatArc=function(){var t=nn,r,a=on,n;function i(){return{type:"LineString",coordinates:[r||t.apply(this,arguments),n||a.apply(this,arguments)]}}i.distance=function(){return P.geo.distance(r||t.apply(this,arguments),n||a.apply(this,arguments))};i.source=function(e){if(!arguments.length)return t;t=e,r=typeof e==="function"?null:e;return i};i.target=function(e){if(!arguments.length)return a;a=e,n=typeof e==="function"?null:e;return i};i.precision=function(){return arguments.length?i:0};return i};P.geo.interpolate=function(e,t){return sn(e[0]*De,e[1]*De,t[0]*De,t[1]*De)};function sn(e,t,r,a){var n=Math.cos(t),o=Math.sin(t),i=Math.cos(a),s=Math.sin(a),l=n*Math.cos(e),u=n*Math.sin(e),c=i*Math.cos(r),f=i*Math.sin(r),d=2*Math.asin(Math.sqrt(He(a-t)+n*i*He(r-e))),v=1/Math.sin(d);var p=d?function(e){var t=Math.sin(e*=d)*v,r=Math.sin(d-e)*v,a=r*l+t*c,n=r*u+t*f,i=r*o+t*s;return[Math.atan2(n,a)*Oe,Math.atan2(i,Math.sqrt(a*a+n*n))*Oe]}:function(){return[e*Oe,t*Oe]};p.distance=d;return p}P.geo.length=function(e){ln=0;P.geo.stream(e,un);return ln};var ln;var un={sphere:C,point:C,lineStart:cn,lineEnd:C,polygonStart:C,polygonEnd:C};function cn(){var o,s,l;un.point=function(e,t){o=e*De,s=Math.sin(t*=De),l=Math.cos(t);un.point=r};un.lineEnd=function(){un.point=un.lineEnd=C};function r(e,t){var r=Math.sin(t*=De),a=Math.cos(t),n=I((e*=De)-o),i=Math.cos(n);ln+=Math.atan2(Math.sqrt((n=a*Math.sin(n))*n+(n=l*r-s*a*i)*n),s*r+l*a*i);o=e,s=r,l=a}}function fn(i,o){function e(e,t){var r=Math.cos(e),a=Math.cos(t),n=i(r*a);return[n*a*Math.sin(e),n*Math.sin(t)]}e.invert=function(e,t){var r=Math.sqrt(e*e+t*t),a=o(r),n=Math.sin(a),i=Math.cos(a);return[Math.atan2(e*n,r*i),Math.asin(r&&t*n/r)]};return e}var dn=fn(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(P.geo.azimuthalEqualArea=function(){return Va(dn)}).raw=dn;var vn=fn(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},z);(P.geo.azimuthalEquidistant=function(){return Va(vn)}).raw=vn;function pn(e,t){var r=Math.cos(e),a=function(e){return Math.tan(Se/4+e/2)},n=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(a(t)/a(e)),i=r*Math.pow(a(e),n)/n;if(!n)return gn;function o(e,t){if(i>0){if(t<-Ce+Me)t=-Ce+Me}else{if(t>Ce-Me)t=Ce-Me}var r=i/Math.pow(a(t),n);return[r*Math.sin(n*e),i-r*Math.cos(n*e)]}o.invert=function(e,t){var r=i-t,a=Ie(n)*Math.sqrt(e*e+r*r);return[Math.atan2(e,r)/n,2*Math.atan(Math.pow(i/a,1/n))-Ce]};return o}(P.geo.conicConformal=function(){return _a(pn)}).raw=pn;function hn(e,t){var r=Math.cos(e),a=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),n=r/a+e;if(I(a)<Me)return $a;function i(e,t){var r=n-t;return[r*Math.sin(a*e),n-r*Math.cos(a*e)]}i.invert=function(e,t){var r=n-t;return[Math.atan2(e,r)/a,n-Ie(a)*Math.sqrt(e*e+r*r)]};return i}(P.geo.conicEquidistant=function(){return _a(hn)}).raw=hn;var mn=fn(function(e){return 1/e},Math.atan);(P.geo.gnomonic=function(){return Va(mn)}).raw=mn;function gn(e,t){return[e,Math.log(Math.tan(Se/4+t/2))]}gn.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Ce]};function yn(e){var n=Va(e),i=n.scale,o=n.translate,s=n.clipExtent,l;n.scale=function(){var e=i.apply(n,arguments);return e===n?l?n.clipExtent(null):n:e};n.translate=function(){var e=o.apply(n,arguments);return e===n?l?n.clipExtent(null):n:e};n.clipExtent=function(e){var t=s.apply(n,arguments);if(t===n){if(l=e==null){var r=Se*i(),a=o();s([[a[0]-r,a[1]-r],[a[0]+r,a[1]+r]])}}else if(l){t=null}return t};return n.clipExtent(null)}(P.geo.mercator=function(){return yn(gn)}).raw=gn;var xn=fn(function(){return 1},Math.asin);(P.geo.orthographic=function(){return Va(xn)}).raw=xn;var bn=fn(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(P.geo.stereographic=function(){return Va(bn)}).raw=bn;function _n(e,t){return[Math.log(Math.tan(Se/4+t/2)),-e]}_n.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Ce]};(P.geo.transverseMercator=function(){var e=yn(_n),t=e.center,r=e.rotate;e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])};e.rotate=function(e){return e?r([e[0],e[1],e.length>2?e[2]+90:90]):(e=r(),[e[0],e[1],e[2]-90])};return r([0,0,90])}).raw=_n;P.geom={};function wn(e){return e[0]}function Tn(e){return e[1]}P.geom.hull=function(e){var d=wn,v=Tn;if(arguments.length)return t(e);function t(e){if(e.length<3)return[];var t=wt(d),r=wt(v),a,n=e.length,i=[],o=[];for(a=0;a<n;a++){i.push([+t.call(this,e[a],a),+r.call(this,e[a],a),a])}i.sort(Mn);for(a=0;a<n;a++)o.push([i[a][0],-i[a][1]]);var s=kn(i),l=kn(o);var u=l[0]===s[0],c=l[l.length-1]===s[s.length-1],f=[];for(a=s.length-1;a>=0;--a)f.push(e[i[s[a]][2]]);for(a=+u;a<l.length-c;++a)f.push(e[i[l[a]][2]]);return f}t.x=function(e){return arguments.length?(d=e,t):d};t.y=function(e){return arguments.length?(v=e,t):v};return t};function kn(e){var t=e.length,r=[0,1],a=2;for(var n=2;n<t;n++){while(a>1&&Pe(e[r[a-2]],e[r[a-1]],e[n])<=0)--a;r[a++]=n}return r.slice(0,a)}function Mn(e,t){return e[0]-t[0]||e[1]-t[1]}P.geom.polygon=function(e){q(e,An);return e};var An=P.geom.polygon.prototype=[];An.area=function(){var e=-1,t=this.length,r,a=this[t-1],n=0;while(++e<t){r=a;a=this[e];n+=r[1]*a[0]-r[0]*a[1]}return n*.5};An.centroid=function(e){var t=-1,r=this.length,a=0,n=0,i,o=this[r-1],s;if(!arguments.length)e=-1/(6*this.area());while(++t<r){i=o;o=this[t];s=i[0]*o[1]-o[0]*i[1];a+=(i[0]+o[0])*s;n+=(i[1]+o[1])*s}return[a*e,n*e]};An.clip=function(e){var t,r=Ln(e),a=-1,n=this.length-Ln(this),i,o,s=this[n-1],l,u,c;while(++a<n){t=e.slice();e.length=0;l=this[a];u=t[(o=t.length-r)-1];i=-1;while(++i<o){c=t[i];if(Sn(c,s,l)){if(!Sn(u,s,l)){e.push(En(u,c,s,l))}e.push(c)}else if(Sn(u,s,l)){e.push(En(u,c,s,l))}u=c}if(r)e.push(e[0]);s=l}return e};function Sn(e,t,r){return(r[0]-t[0])*(e[1]-t[1])<(r[1]-t[1])*(e[0]-t[0])}function En(e,t,r,a){var n=e[0],i=r[0],o=t[0]-n,s=a[0]-i,l=e[1],u=r[1],c=t[1]-l,f=a[1]-u,d=(s*(l-u)-f*(n-i))/(f*o-s*c);return[n+d*o,l+d*c]}function Ln(e){var t=e[0],r=e[e.length-1];return!(t[0]-r[0]||t[1]-r[1])}var Cn,Dn,On,In=[],Pn,Rn,Nn=[];function zn(){ni(this);this.edge=this.site=this.circle=null}function Fn(e){var t=In.pop()||new zn;t.site=e;return t}function jn(e){Zn(e);On.remove(e);In.push(e);ni(e)}function Hn(e){var t=e.circle,r=t.x,a=t.cy,n={x:r,y:a},i=e.P,o=e.N,s=[e];jn(e);var l=i;while(l.circle&&I(r-l.circle.x)<Me&&I(a-l.circle.cy)<Me){i=l.P;s.unshift(l);jn(l);l=i}s.unshift(l);Zn(l);var u=o;while(u.circle&&I(r-u.circle.x)<Me&&I(a-u.circle.cy)<Me){o=u.N;s.push(u);jn(u);u=o}s.push(u);Zn(u);var c=s.length,f;for(f=1;f<c;++f){u=s[f];l=s[f-1];ti(u.edge,l.site,u.site,n)}l=s[0];u=s[c-1];u.edge=Qn(l.site,u.site,null,n);$n(l);$n(u)}function Bn(e){var t=e.x,r=e.y,a,n,i,o,s=On._;while(s){i=qn(s,r)-t;if(i>Me)s=s.L;else{o=t-Un(s,r);if(o>Me){if(!s.R){a=s;break}s=s.R}else{if(i>-Me){a=s.P;n=s}else if(o>-Me){a=s;n=s.N}else{a=n=s}break}}}var l=Fn(e);On.insert(a,l);if(!a&&!n)return;if(a===n){Zn(a);n=Fn(a.site);On.insert(l,n);l.edge=n.edge=Qn(a.site,l.site);$n(a);$n(n);return}if(!n){l.edge=Qn(a.site,l.site);return}Zn(a);Zn(n);var u=a.site,c=u.x,f=u.y,d=e.x-c,v=e.y-f,p=n.site,h=p.x-c,m=p.y-f,g=2*(d*m-v*h),y=d*d+v*v,x=h*h+m*m,b={x:(m*y-v*x)/g+c,y:(d*x-h*y)/g+f};ti(n.edge,u,p,b);l.edge=Qn(u,e,null,b);n.edge=Qn(e,p,null,b);$n(a);$n(n)}function qn(e,t){var r=e.site,a=r.x,n=r.y,i=n-t;if(!i)return a;var o=e.P;if(!o)return-Infinity;r=o.site;var s=r.x,l=r.y,u=l-t;if(!u)return s;var c=s-a,f=1/i-1/u,d=c/u;if(f)return(-d+Math.sqrt(d*d-2*f*(c*c/(-2*u)-l+u/2+n-i/2)))/f+a;return(a+s)/2}function Un(e,t){var r=e.N;if(r)return qn(r,t);var a=e.site;return a.y===t?a.x:Infinity}function Yn(e){this.site=e;this.edges=[]}Yn.prototype.prepare=function(){var e=this.edges,t=e.length,r;while(t--){r=e[t].edge;if(!r.b||!r.a)e.splice(t,1)}e.sort(Gn);return e.length};function Vn(e){var t=e[0][0],r=e[1][0],a=e[0][1],n=e[1][1],i,o,s,l,u=Dn,c=u.length,f,d,v,p,h,m;while(c--){f=u[c];if(!f||!f.prepare())continue;v=f.edges;p=v.length;d=0;while(d<p){m=v[d].end(),s=m.x,l=m.y;h=v[++d%p].start(),i=h.x,o=h.y;if(I(s-i)>Me||I(l-o)>Me){v.splice(d,0,new ri(ei(f.site,m,I(s-t)<Me&&n-l>Me?{x:t,y:I(i-t)<Me?o:n}:I(l-n)<Me&&r-s>Me?{x:I(o-n)<Me?i:r,y:n}:I(s-r)<Me&&l-a>Me?{x:r,y:I(i-r)<Me?o:a}:I(l-a)<Me&&s-t>Me?{x:I(o-a)<Me?i:t,y:a}:null),f.site,null));++p}}}}function Gn(e,t){return t.angle-e.angle}function Wn(){ni(this);this.x=this.y=this.arc=this.site=this.cy=null}function $n(e){var t=e.P,r=e.N;if(!t||!r)return;var a=t.site,n=e.site,i=r.site;if(a===i)return;var o=n.x,s=n.y,l=a.x-o,u=a.y-s,c=i.x-o,f=i.y-s;var d=2*(l*f-u*c);if(d>=-Ae)return;var v=l*l+u*u,p=c*c+f*f,h=(f*v-u*p)/d,m=(l*p-c*v)/d,f=m+s;var g=Nn.pop()||new Wn;g.arc=e;g.site=n;g.x=h+o;g.y=f+Math.sqrt(h*h+m*m);g.cy=f;e.circle=g;var y=null,x=Rn._;while(x){if(g.y<x.y||g.y===x.y&&g.x<=x.x){if(x.L)x=x.L;else{y=x.P;break}}else{if(x.R)x=x.R;else{y=x;break}}}Rn.insert(y,g);if(!y)Pn=g}function Zn(e){var t=e.circle;if(t){if(!t.P)Pn=t.N;Rn.remove(t);Nn.push(t);ni(t);e.circle=null}}function Xn(e){var t=Cn,r=ya(e[0][0],e[0][1],e[1][0],e[1][1]),a=t.length,n;while(a--){n=t[a];if(!Jn(n,e)||!r(n)||I(n.a.x-n.b.x)<Me&&I(n.a.y-n.b.y)<Me){n.a=n.b=null;t.splice(a,1)}}}function Jn(e,t){var r=e.b;if(r)return true;var a=e.a,n=t[0][0],i=t[1][0],o=t[0][1],s=t[1][1],l=e.l,u=e.r,c=l.x,f=l.y,d=u.x,v=u.y,p=(c+d)/2,h=(f+v)/2,m,g;if(v===f){if(p<n||p>=i)return;if(c>d){if(!a)a={x:p,y:o};else if(a.y>=s)return;r={x:p,y:s}}else{if(!a)a={x:p,y:s};else if(a.y<o)return;r={x:p,y:o}}}else{m=(c-d)/(v-f);g=h-m*p;if(m<-1||m>1){if(c>d){if(!a)a={x:(o-g)/m,y:o};else if(a.y>=s)return;r={x:(s-g)/m,y:s}}else{if(!a)a={x:(s-g)/m,y:s};else if(a.y<o)return;r={x:(o-g)/m,y:o}}}else{if(f<v){if(!a)a={x:n,y:m*n+g};else if(a.x>=i)return;r={x:i,y:m*i+g}}else{if(!a)a={x:i,y:m*i+g};else if(a.x<n)return;r={x:n,y:m*n+g}}}}e.a=a;e.b=r;return true}function Kn(e,t){this.l=e;this.r=t;this.a=this.b=null}function Qn(e,t,r,a){var n=new Kn(e,t);Cn.push(n);if(r)ti(n,e,t,r);if(a)ti(n,t,e,a);Dn[e.i].edges.push(new ri(n,e,t));Dn[t.i].edges.push(new ri(n,t,e));return n}function ei(e,t,r){var a=new Kn(e,null);a.a=t;a.b=r;Cn.push(a);return a}function ti(e,t,r,a){if(!e.a&&!e.b){e.a=a;e.l=t;e.r=r}else if(e.l===r){e.b=a}else{e.a=a}}function ri(e,t,r){var a=e.a,n=e.b;this.edge=e;this.site=t;this.angle=r?Math.atan2(r.y-t.y,r.x-t.x):e.l===t?Math.atan2(n.x-a.x,a.y-n.y):Math.atan2(a.x-n.x,n.y-a.y)}ri.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ai(){this._=null}function ni(e){e.U=e.C=e.L=e.R=e.P=e.N=null}ai.prototype={insert:function(e,t){var r,a,n;if(e){t.P=e;t.N=e.N;if(e.N)e.N.P=t;e.N=t;if(e.R){e=e.R;while(e.L)e=e.L;e.L=t}else{e.R=t}r=e}else if(this._){e=si(this._);t.P=null;t.N=e;e.P=e.L=t;r=e}else{t.P=t.N=null;this._=t;r=null}t.L=t.R=null;t.U=r;t.C=true;e=t;while(r&&r.C){a=r.U;if(r===a.L){n=a.R;if(n&&n.C){r.C=n.C=false;a.C=true;e=a}else{if(e===r.R){ii(this,r);e=r;r=e.U}r.C=false;a.C=true;oi(this,a)}}else{n=a.L;if(n&&n.C){r.C=n.C=false;a.C=true;e=a}else{if(e===r.L){oi(this,r);e=r;r=e.U}r.C=false;a.C=true;ii(this,a)}}r=e.U}this._.C=false},remove:function(e){if(e.N)e.N.P=e.P;if(e.P)e.P.N=e.N;e.N=e.P=null;var t=e.U,r,a=e.L,n=e.R,i,o;if(!a)i=n;else if(!n)i=a;else i=si(n);if(t){if(t.L===e)t.L=i;else t.R=i}else{this._=i}if(a&&n){o=i.C;i.C=e.C;i.L=a;a.U=i;if(i!==n){t=i.U;i.U=e.U;e=i.R;t.L=e;i.R=n;n.U=i}else{i.U=t;t=i;e=i.R}}else{o=e.C;e=i}if(e)e.U=t;if(o)return;if(e&&e.C){e.C=false;return}do{if(e===this._)break;if(e===t.L){r=t.R;if(r.C){r.C=false;t.C=true;ii(this,t);r=t.R}if(r.L&&r.L.C||r.R&&r.R.C){if(!r.R||!r.R.C){r.L.C=false;r.C=true;oi(this,r);r=t.R}r.C=t.C;t.C=r.R.C=false;ii(this,t);e=this._;break}}else{r=t.L;if(r.C){r.C=false;t.C=true;oi(this,t);r=t.L}if(r.L&&r.L.C||r.R&&r.R.C){if(!r.L||!r.L.C){r.R.C=false;r.C=true;ii(this,r);r=t.L}r.C=t.C;t.C=r.L.C=false;oi(this,t);e=this._;break}}r.C=true;e=t;t=t.U}while(!e.C);if(e)e.C=false}};function ii(e,t){var r=t,a=t.R,n=r.U;if(n){if(n.L===r)n.L=a;else n.R=a}else{e._=a}a.U=n;r.U=a;r.R=a.L;if(r.R)r.R.U=r;a.L=r}function oi(e,t){var r=t,a=t.L,n=r.U;if(n){if(n.L===r)n.L=a;else n.R=a}else{e._=a}a.U=n;r.U=a;r.L=a.R;if(r.L)r.L.U=r;a.R=r}function si(e){while(e.L)e=e.L;return e}function li(e,t){var r=e.sort(ui).pop(),a,n,i;Cn=[];Dn=new Array(e.length);On=new ai;Rn=new ai;while(true){i=Pn;if(r&&(!i||r.y<i.y||r.y===i.y&&r.x<i.x)){if(r.x!==a||r.y!==n){Dn[r.i]=new Yn(r);Bn(r);a=r.x,n=r.y}r=e.pop()}else if(i){Hn(i.arc)}else{break}}if(t)Xn(t),Vn(t);var o={cells:Dn,edges:Cn};On=Rn=Cn=Dn=null;return o}function ui(e,t){return t.y-e.y||t.x-e.x}P.geom.voronoi=function(e){var t=wn,r=Tn,a=t,n=r,f=ci;if(e)return i(e);function i(i){var o=new Array(i.length),s=f[0][0],l=f[0][1],u=f[1][0],c=f[1][1];li(d(i),f).cells.forEach(function(e,t){var r=e.edges,a=e.site,n=o[t]=r.length?r.map(function(e){var t=e.start();return[t.x,t.y]}):a.x>=s&&a.x<=u&&a.y>=l&&a.y<=c?[[s,c],[u,c],[u,l],[s,l]]:[];n.point=i[t]});return o}function d(e){return e.map(function(e,t){return{x:Math.round(a(e,t)/Me)*Me,y:Math.round(n(e,t)/Me)*Me,i:t}})}i.links=function(t){return li(d(t)).edges.filter(function(e){return e.l&&e.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})};i.triangles=function(c){var f=[];li(d(c)).cells.forEach(function(e,t){var r=e.site,a=e.edges.sort(Gn),n=-1,i=a.length,o,s,l=a[i-1].edge,u=l.l===r?l.r:l.l;while(++n<i){o=l;s=u;l=a[n].edge;u=l.l===r?l.r:l.l;if(t<s.i&&t<u.i&&fi(r,s,u)<0){f.push([c[t],c[s.i],c[u.i]])}}});return f};i.x=function(e){return arguments.length?(a=wt(t=e),i):t};i.y=function(e){return arguments.length?(n=wt(r=e),i):r};i.clipExtent=function(e){if(!arguments.length)return f===ci?null:f;f=e==null?ci:e;return i};i.size=function(e){if(!arguments.length)return f===ci?null:f&&f[1];return i.clipExtent(e&&[[0,0],e])};return i};var ci=[[-1e6,-1e6],[1e6,1e6]];function fi(e,t,r){return(e.x-r.x)*(t.y-e.y)-(e.x-t.x)*(r.y-e.y)}P.geom.delaunay=function(e){return P.geom.voronoi().triangles(e)};P.geom.quadtree=function(e,x,b,_,w){var T=wn,k=Tn,M;if(M=arguments.length){T=di;k=vi;if(M===3){w=b;_=x;b=x=0}return t(e)}function t(e){var t,r=wt(T),a=wt(k),n,i,o,s,l,u,c,f;if(x!=null){l=x,u=b,c=_,f=w}else{c=f=-(l=u=Infinity);n=[],i=[];s=e.length;if(M)for(o=0;o<s;++o){t=e[o];if(t.x<l)l=t.x;if(t.y<u)u=t.y;if(t.x>c)c=t.x;if(t.y>f)f=t.y;n.push(t.x);i.push(t.y)}else for(o=0;o<s;++o){var d=+r(t=e[o],o),v=+a(t,o);if(d<l)l=d;if(v<u)u=v;if(d>c)c=d;if(v>f)f=v;n.push(d);i.push(v)}}var p=c-l,h=f-u;if(p>h)f=u+p;else c=l+h;function m(e,t,r,a,n,i,o,s){if(isNaN(r)||isNaN(a))return;if(e.leaf){var l=e.x,u=e.y;if(l!=null){if(I(l-r)+I(u-a)<.01){g(e,t,r,a,n,i,o,s)}else{var c=e.point;e.x=e.y=e.point=null;g(e,c,l,u,n,i,o,s);g(e,t,r,a,n,i,o,s)}}else{e.x=r,e.y=a,e.point=t}}else{g(e,t,r,a,n,i,o,s)}}function g(e,t,r,a,n,i,o,s){var l=(n+o)*.5,u=(i+s)*.5,c=r>=l,f=a>=u,d=f<<1|c;e.leaf=false;e=e.nodes[d]||(e.nodes[d]=pi());if(c)n=l;else o=l;if(f)i=u;else s=u;m(e,t,r,a,n,i,o,s)}var y=pi();y.add=function(e){m(y,e,+r(e,++o),+a(e,o),l,u,c,f)};y.visit=function(e){hi(e,y,l,u,c,f)};y.find=function(e){return mi(y,e[0],e[1],l,u,c,f)};o=-1;if(x==null){while(++o<s){m(y,e[o],n[o],i[o],l,u,c,f)}--o}else e.forEach(y.add);n=i=e=t=null;return y}t.x=function(e){return arguments.length?(T=e,t):T};t.y=function(e){return arguments.length?(k=e,t):k};t.extent=function(e){if(!arguments.length)return x==null?null:[[x,b],[_,w]];if(e==null)x=b=_=w=null;else x=+e[0][0],b=+e[0][1],_=+e[1][0],w=+e[1][1];return t};t.size=function(e){if(!arguments.length)return x==null?null:[_-x,w-b];if(e==null)x=b=_=w=null;else x=b=0,_=+e[0],w=+e[1];return t};return t};function di(e){return e.x}function vi(e){return e.y}function pi(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function hi(e,t,r,a,n,i){if(!e(t,r,a,n,i)){var o=(r+n)*.5,s=(a+i)*.5,l=t.nodes;if(l[0])hi(e,l[0],r,a,o,s);if(l[1])hi(e,l[1],o,a,n,s);if(l[2])hi(e,l[2],r,s,o,i);if(l[3])hi(e,l[3],o,s,n,i)}}function mi(e,y,x,b,_,w,T){var k=Infinity,M;(function e(t,r,a,n,i){if(r>w||a>T||n<b||i<_)return;if(o=t.point){var o,s=y-t.x,l=x-t.y,u=s*s+l*l;if(u<k){var c=Math.sqrt(k=u);b=y-c,_=x-c;w=y+c,T=x+c;M=o}}var f=t.nodes,d=(r+n)*.5,v=(a+i)*.5,p=y>=d,h=x>=v;for(var m=h<<1|p,g=m+4;m<g;++m){if(t=f[m&3])switch(m&3){case 0:e(t,r,a,d,v);break;case 1:e(t,d,a,n,v);break;case 2:e(t,r,v,d,i);break;case 3:e(t,d,v,n,i);break}}})(e,b,_,w,T);return M}P.interpolateRgb=gi;function gi(e,t){e=P.rgb(e);t=P.rgb(t);var r=e.r,a=e.g,n=e.b,i=t.r-r,o=t.g-a,s=t.b-n;return function(e){return"#"+ht(Math.round(r+i*e))+ht(Math.round(a+o*e))+ht(Math.round(n+s*e))}}P.interpolateObject=yi;function yi(e,t){var r={},a={},n;for(n in e){if(n in t){r[n]=Ti(e[n],t[n])}else{a[n]=e[n]}}for(n in t){if(!(n in e)){a[n]=t[n]}}return function(e){for(n in r)a[n]=r[n](e);return a}}P.interpolateNumber=xi;function xi(t,r){t=+t,r=+r;return function(e){return t*(1-e)+r*e}}P.interpolateString=bi;function bi(e,a){var t=_i.lastIndex=wi.lastIndex=0,r,n,i,o=-1,s=[],l=[];e=e+"",a=a+"";while((r=_i.exec(e))&&(n=wi.exec(a))){if((i=n.index)>t){i=a.slice(t,i);if(s[o])s[o]+=i;else s[++o]=i}if((r=r[0])===(n=n[0])){if(s[o])s[o]+=n;else s[++o]=n}else{s[++o]=null;l.push({i:o,x:xi(r,n)})}t=wi.lastIndex}if(t<a.length){i=a.slice(t);if(s[o])s[o]+=i;else s[++o]=i}return s.length<2?l[0]?(a=l[0].x,function(e){return a(e)+""}):function(){return a}:(a=l.length,function(e){for(var t=0,r;t<a;++t)s[(r=l[t]).i]=r.x(e);return s.join("")})}var _i=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wi=new RegExp(_i.source,"g");P.interpolate=Ti;function Ti(e,t){var r=P.interpolators.length,a;while(--r>=0&&!(a=P.interpolators[r](e,t)));return a}P.interpolators=[function(e,t){var r=typeof t;return(r==="string"?_t.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?gi:bi:t instanceof We?gi:Array.isArray(t)?ki:r==="object"&&isNaN(t)?yi:xi)(e,t)}];P.interpolateArray=ki;function ki(e,t){var r=[],a=[],n=e.length,i=t.length,o=Math.min(e.length,t.length),s;for(s=0;s<o;++s)r.push(Ti(e[s],t[s]));for(;s<n;++s)a[s]=e[s];for(;s<i;++s)a[s]=t[s];return function(e){for(s=0;s<o;++s)a[s]=r[s](e);return a}}var Mi=function(){return z};var Ai=P.map({linear:Mi,poly:Pi,quad:function(){return Di},cubic:function(){return Oi},sin:function(){return Ri},exp:function(){return Ni},circle:function(){return zi},elastic:Fi,back:ji,bounce:function(){return Hi}});var Si=P.map({in:z,out:Li,"in-out":Ci,"out-in":function(e){return Ci(Li(e))}});P.ease=function(e){var t=e.indexOf("-"),r=t>=0?e.slice(0,t):e,a=t>=0?e.slice(t+1):"in";r=Ai.get(r)||Mi;a=Si.get(a)||z;return Ei(a(r.apply(null,n.call(arguments,1))))};function Ei(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function Li(t){return function(e){return 1-t(1-e)}}function Ci(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function Di(e){return e*e}function Oi(e){return e*e*e}function Ii(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)}function Pi(t){return function(e){return Math.pow(e,t)}}function Ri(e){return 1-Math.cos(e*Ce)}function Ni(e){return Math.pow(2,10*(e-1))}function zi(e){return 1-Math.sqrt(1-e*e)}function Fi(t,r){var a;if(arguments.length<2)r=.45;if(arguments.length)a=r/Ee*Math.asin(1/t);else t=1,a=r/4;return function(e){return 1+t*Math.pow(2,-10*e)*Math.sin((e-a)*Ee/r)}}function ji(t){if(!t)t=1.70158;return function(e){return e*e*((t+1)*e-t)}}function Hi(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}P.interpolateHcl=Bi;function Bi(e,t){e=P.hcl(e);t=P.hcl(t);var r=e.h,a=e.c,n=e.l,i=t.h-r,o=t.c-a,s=t.l-n;if(isNaN(o))o=0,a=isNaN(a)?t.c:a;if(isNaN(i))i=0,r=isNaN(r)?t.h:r;else if(i>180)i-=360;else if(i<-180)i+=360;return function(e){return Qe(r+i*e,a+o*e,n+s*e)+""}}P.interpolateHsl=qi;function qi(e,t){e=P.hsl(e);t=P.hsl(t);var r=e.h,a=e.s,n=e.l,i=t.h-r,o=t.s-a,s=t.l-n;if(isNaN(o))o=0,a=isNaN(a)?t.s:a;if(isNaN(i))i=0,r=isNaN(r)?t.h:r;else if(i>180)i-=360;else if(i<-180)i+=360;return function(e){return Xe(r+i*e,a+o*e,n+s*e)+""}}P.interpolateLab=Ui;function Ui(e,t){e=P.lab(e);t=P.lab(t);var r=e.l,a=e.a,n=e.b,i=t.l-r,o=t.a-a,s=t.b-n;return function(e){return ot(r+i*e,a+o*e,n+s*e)+""}}P.interpolateRound=Yi;function Yi(t,r){r-=t;return function(e){return Math.round(t+r*e)}}P.transform=function(e){var r=R.createElementNS(P.ns.prefix.svg,"g");return(P.transform=function(e){if(e!=null){r.setAttribute("transform",e);var t=r.transform.baseVal.consolidate()}return new Vi(t?t.matrix:Zi)})(e)};function Vi(e){var t=[e.a,e.b],r=[e.c,e.d],a=Wi(t),n=Gi(t,r),i=Wi($i(r,t,-n))||0;if(t[0]*r[1]<r[0]*t[1]){t[0]*=-1;t[1]*=-1;a*=-1;n*=-1}this.rotate=(a?Math.atan2(t[1],t[0]):Math.atan2(-r[0],r[1]))*Oe;this.translate=[e.e,e.f];this.scale=[a,i];this.skew=i?Math.atan2(n,i)*Oe:0}Vi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Gi(e,t){return e[0]*t[0]+e[1]*t[1]}function Wi(e){var t=Math.sqrt(Gi(e,e));if(t){e[0]/=t;e[1]/=t}return t}function $i(e,t,r){e[0]+=r*t[0];e[1]+=r*t[1];return e}var Zi={a:1,b:0,c:0,d:1,e:0,f:0};P.interpolateTransform=to;function Xi(e){return e.length?e.pop()+",":""}function Ji(e,t,r,a){if(e[0]!==t[0]||e[1]!==t[1]){var n=r.push("translate(",null,",",null,")");a.push({i:n-4,x:xi(e[0],t[0])},{i:n-2,x:xi(e[1],t[1])})}else if(t[0]||t[1]){r.push("translate("+t+")")}}function Ki(e,t,r,a){if(e!==t){if(e-t>180)t+=360;else if(t-e>180)e+=360;a.push({i:r.push(Xi(r)+"rotate(",null,")")-2,x:xi(e,t)})}else if(t){r.push(Xi(r)+"rotate("+t+")")}}function Qi(e,t,r,a){if(e!==t){a.push({i:r.push(Xi(r)+"skewX(",null,")")-2,x:xi(e,t)})}else if(t){r.push(Xi(r)+"skewX("+t+")")}}function eo(e,t,r,a){if(e[0]!==t[0]||e[1]!==t[1]){var n=r.push(Xi(r)+"scale(",null,",",null,")");a.push({i:n-4,x:xi(e[0],t[0])},{i:n-2,x:xi(e[1],t[1])})}else if(t[0]!==1||t[1]!==1){r.push(Xi(r)+"scale("+t+")")}}function to(e,t){var n=[],i=[];e=P.transform(e),t=P.transform(t);Ji(e.translate,t.translate,n,i);Ki(e.rotate,t.rotate,n,i);Qi(e.skew,t.skew,n,i);eo(e.scale,t.scale,n,i);e=t=null;return function(e){var t=-1,r=i.length,a;while(++t<r)n[(a=i[t]).i]=a.x(e);return n.join("")}}function ro(t,r){r=(r-=t=+t)||1/r;return function(e){return(e-t)/r}}function ao(t,r){r=(r-=t=+t)||1/r;return function(e){return Math.max(0,Math.min(1,(e-t)/r))}}P.layout={};P.layout.bundle=function(){return function(e){var t=[],r=-1,a=e.length;while(++r<a)t.push(no(e[r]));return t}};function no(e){var t=e.source,r=e.target,a=oo(t,r),n=[t];while(t!==a){t=t.parent;n.push(t)}var i=n.length;while(r!==a){n.splice(i,0,r);r=r.parent}return n}function io(e){var t=[],r=e.parent;while(r!=null){t.push(e);e=r;r=r.parent}t.push(e);return t}function oo(e,t){if(e===t)return e;var r=io(e),a=io(t),n=r.pop(),i=a.pop(),o=null;while(n===i){o=n;n=r.pop();i=a.pop()}return o}P.layout.chord=function(){var t={},m,g,y,x,b=0,_,w,T;function e(){var e={},r=[],t=P.range(x),a=[],n,i,o,s,l;m=[];g=[];n=0,s=-1;while(++s<x){i=0,l=-1;while(++l<x){i+=y[s][l]}r.push(i);a.push(P.range(x));n+=i}if(_){t.sort(function(e,t){return _(r[e],r[t])})}if(w){a.forEach(function(e,r){e.sort(function(e,t){return w(y[r][e],y[r][t])})})}n=(Ee-b*x)/n;i=0,s=-1;while(++s<x){o=i,l=-1;while(++l<x){var u=t[s],c=a[u][l],f=y[u][c],d=i,v=i+=f*n;e[u+"-"+c]={index:u,subindex:c,startAngle:d,endAngle:v,value:f}}g[u]={index:u,startAngle:o,endAngle:i,value:r[u]};i+=b}s=-1;while(++s<x){l=s-1;while(++l<x){var p=e[s+"-"+l],h=e[l+"-"+s];if(p.value||h.value){m.push(p.value<h.value?{source:h,target:p}:{source:p,target:h})}}}if(T)k()}function k(){m.sort(function(e,t){return T((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}t.matrix=function(e){if(!arguments.length)return y;x=(y=e)&&y.length;m=g=null;return t};t.padding=function(e){if(!arguments.length)return b;b=e;m=g=null;return t};t.sortGroups=function(e){if(!arguments.length)return _;_=e;m=g=null;return t};t.sortSubgroups=function(e){if(!arguments.length)return w;w=e;m=null;return t};t.sortChords=function(e){if(!arguments.length)return T;T=e;if(m)k();return t};t.chords=function(){if(!m)e();return m};t.groups=function(){if(!g)e();return g};return t};P.layout.force=function(){var n={},f=P.dispatch("start","tick","end"),d,v=[1,1],e,p,h=.9,i=vo,o=po,m=-30,c=ho,g=.1,y=.64,x=[],b=[],_,w,T;function k(u){return function(e,t,r,a){if(e.point!==u){var n=e.cx-u.x,i=e.cy-u.y,o=a-t,s=n*n+i*i;if(o*o/y<s){if(s<c){var l=e.charge/s;u.px-=n*l;u.py-=i*l}return true}if(e.point&&s&&s<c){var l=e.pointCharge/s;u.px-=n*l;u.py-=i*l}}return!e.charge}}n.tick=function(){if((p*=.99)<.005){d=null;f.end({type:"end",alpha:p=0});return true}var e=x.length,t=b.length,r,a,n,i,o,s,l,u,c;for(a=0;a<t;++a){n=b[a];i=n.source;o=n.target;u=o.x-i.x;c=o.y-i.y;if(s=u*u+c*c){s=p*w[a]*((s=Math.sqrt(s))-_[a])/s;u*=s;c*=s;o.x-=u*(l=i.weight+o.weight?i.weight/(i.weight+o.weight):.5);o.y-=c*l;i.x+=u*(l=1-l);i.y+=c*l}}if(l=p*g){u=v[0]/2;c=v[1]/2;a=-1;if(l)while(++a<e){n=x[a];n.x+=(u-n.x)*l;n.y+=(c-n.y)*l}}if(m){fo(r=P.geom.quadtree(x),p,T);a=-1;while(++a<e){if(!(n=x[a]).fixed){r.visit(k(n))}}}a=-1;while(++a<e){n=x[a];if(n.fixed){n.x=n.px;n.y=n.py}else{n.x-=(n.px-(n.px=n.x))*h;n.y-=(n.py-(n.py=n.y))*h}}f.tick({type:"tick",alpha:p})};n.nodes=function(e){if(!arguments.length)return x;x=e;return n};n.links=function(e){if(!arguments.length)return b;b=e;return n};n.size=function(e){if(!arguments.length)return v;v=e;return n};n.linkDistance=function(e){if(!arguments.length)return i;i=typeof e==="function"?e:+e;return n};n.distance=n.linkDistance;n.linkStrength=function(e){if(!arguments.length)return o;o=typeof e==="function"?e:+e;return n};n.friction=function(e){if(!arguments.length)return h;h=+e;return n};n.charge=function(e){if(!arguments.length)return m;m=typeof e==="function"?e:+e;return n};n.chargeDistance=function(e){if(!arguments.length)return Math.sqrt(c);c=e*e;return n};n.gravity=function(e){if(!arguments.length)return g;g=+e;return n};n.theta=function(e){if(!arguments.length)return Math.sqrt(y);y=e*e;return n};n.alpha=function(e){if(!arguments.length)return p;e=+e;if(p){if(e>0){p=e}else{d.c=null,d.t=NaN,d=null;f.end({type:"end",alpha:p=0})}}else if(e>0){f.start({type:"start",alpha:p=e});d=Ot(n.tick)}return n};n.start=function(){var s,l=x.length,u=b.length,e=v[0],t=v[1],c,r;for(s=0;s<l;++s){(r=x[s]).index=s;r.weight=0}for(s=0;s<u;++s){r=b[s];if(typeof r.source=="number")r.source=x[r.source];if(typeof r.target=="number")r.target=x[r.target];++r.source.weight;++r.target.weight}for(s=0;s<l;++s){r=x[s];if(isNaN(r.x))r.x=a("x",e);if(isNaN(r.y))r.y=a("y",t);if(isNaN(r.px))r.px=r.x;if(isNaN(r.py))r.py=r.y}_=[];if(typeof i==="function")for(s=0;s<u;++s)_[s]=+i.call(this,b[s],s);else for(s=0;s<u;++s)_[s]=i;w=[];if(typeof o==="function")for(s=0;s<u;++s)w[s]=+o.call(this,b[s],s);else for(s=0;s<u;++s)w[s]=o;T=[];if(typeof m==="function")for(s=0;s<l;++s)T[s]=+m.call(this,x[s],s);else for(s=0;s<l;++s)T[s]=m;function a(e,t){if(!c){c=new Array(l);for(n=0;n<l;++n){c[n]=[]}for(n=0;n<u;++n){var r=b[n];c[r.source.index].push(r.target);c[r.target.index].push(r.source)}}var a=c[s],n=-1,i=a.length,o;while(++n<i)if(!isNaN(o=a[n][e]))return o;return Math.random()*t}return n.resume()};n.resume=function(){return n.alpha(.1)};n.stop=function(){return n.alpha(0)};n.drag=function(){if(!e)e=P.behavior.drag().origin(z).on("dragstart.force",so).on("drag.force",t).on("dragend.force",lo);if(!arguments.length)return e;this.on("mouseover.force",uo).on("mouseout.force",co).call(e)};function t(e){e.px=P.event.x,e.py=P.event.y;n.resume()}return P.rebind(n,f,"on")};function so(e){e.fixed|=2}function lo(e){e.fixed&=~6}function uo(e){e.fixed|=4;e.px=e.x,e.py=e.y}function co(e){e.fixed&=~4}function fo(e,t,r){var a=0,n=0;e.charge=0;if(!e.leaf){var i=e.nodes,o=i.length,s=-1,l;while(++s<o){l=i[s];if(l==null)continue;fo(l,t,r);e.charge+=l.charge;a+=l.charge*l.cx;n+=l.charge*l.cy}}if(e.point){if(!e.leaf){e.point.x+=Math.random()-.5;e.point.y+=Math.random()-.5}var u=t*r[e.point.index];e.charge+=e.pointCharge=u;a+=u*e.point.x;n+=u*e.point.y}e.cx=a/e.charge;e.cy=n/e.charge}var vo=20,po=1,ho=Infinity;P.layout.hierarchy=function(){var s=_o,l=xo,u=bo;function c(e){var t=[e],r=[],a;e.depth=0;while((a=t.pop())!=null){r.push(a);if((i=l.call(c,a,a.depth))&&(n=i.length)){var n,i,o;while(--n>=0){t.push(o=i[n]);o.parent=a;o.depth=a.depth+1}if(u)a.value=0;a.children=i}else{if(u)a.value=+u.call(c,a,a.depth)||0;delete a.children}}yo(e,function(e){var t,r;if(s&&(t=e.children))t.sort(s);if(u&&(r=e.parent))r.value+=e.value});return r}c.sort=function(e){if(!arguments.length)return s;s=e;return c};c.children=function(e){if(!arguments.length)return l;l=e;return c};c.value=function(e){if(!arguments.length)return u;u=e;return c};c.revalue=function(e){if(u){go(e,function(e){if(e.children)e.value=0});yo(e,function(e){var t;if(!e.children)e.value=+u.call(c,e,e.depth)||0;if(t=e.parent)t.value+=e.value})}return e};return c};function mo(e,t){P.rebind(e,t,"sort","children","value");e.nodes=e;e.links=wo;return e}function go(e,t){var r=[e];while((e=r.pop())!=null){t(e);if((n=e.children)&&(a=n.length)){var a,n;while(--a>=0)r.push(n[a])}}}function yo(e,t){var r=[e],a=[];while((e=r.pop())!=null){a.push(e);if((o=e.children)&&(i=o.length)){var n=-1,i,o;while(++n<i)r.push(o[n])}}while((e=a.pop())!=null){t(e)}}function xo(e){return e.children}function bo(e){return e.value}function _o(e,t){return t.value-e.value}function wo(e){return P.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}P.layout.partition=function(){var a=P.layout.hierarchy(),n=[1,1];function u(e,t,r,a){var n=e.children;e.x=t;e.y=e.depth*a;e.dx=r;e.dy=a;if(n&&(o=n.length)){var i=-1,o,s,l;r=e.value?r/e.value:0;while(++i<o){u(s=n[i],t,l=s.value*r,a);t+=l}}}function i(e){var t=e.children,r=0;if(t&&(n=t.length)){var a=-1,n;while(++a<n)r=Math.max(r,i(t[a]))}return 1+r}function t(e,t){var r=a.call(this,e,t);u(r[0],0,n[0],n[1]/i(r[0]));return r}t.size=function(e){if(!arguments.length)return n;n=e;return t};return mo(t,a)};P.layout.pie=function(){var d=Number,v=To,p=0,h=Ee,m=0;function g(r){var e=r.length,a=r.map(function(e,t){return+d.call(g,e,t)}),t=+(typeof p==="function"?p.apply(this,arguments):p),n=(typeof h==="function"?h.apply(this,arguments):h)-t,i=Math.min(Math.abs(n)/e,+(typeof m==="function"?m.apply(this,arguments):m)),o=i*(n<0?-1:1),s=P.sum(a),l=s?(n-e*o)/s:0,u=P.range(e),c=[],f;if(v!=null)u.sort(v===To?function(e,t){return a[t]-a[e]}:function(e,t){return v(r[e],r[t])});u.forEach(function(e){c[e]={data:r[e],value:f=a[e],startAngle:t,endAngle:t+=f*l+o,padAngle:i}});return c}g.value=function(e){if(!arguments.length)return d;d=e;return g};g.sort=function(e){if(!arguments.length)return v;v=e;return g};g.startAngle=function(e){if(!arguments.length)return p;p=e;return g};g.endAngle=function(e){if(!arguments.length)return h;h=e;return g};g.padAngle=function(e){if(!arguments.length)return m;m=e;return g};return g};var To={};P.layout.stack=function(){var f=z,d=Lo,v=Co,p=Ao,h=ko,m=Mo;function g(e,t){if(!(s=e.length))return e;var r=e.map(function(e,t){return f.call(g,e,t)});var a=r.map(function(e){return e.map(function(e,t){return[h.call(g,e,t),m.call(g,e,t)]})});var n=d.call(g,a,t);r=P.permute(r,n);a=P.permute(a,n);var i=v.call(g,a,t);var o=r[0].length,s,l,u,c;for(u=0;u<o;++u){p.call(g,r[0][u],c=i[u],a[0][u][1]);for(l=1;l<s;++l){p.call(g,r[l][u],c+=a[l-1][u][1],a[l][u][1])}}return e}g.values=function(e){if(!arguments.length)return f;f=e;return g};g.order=function(e){if(!arguments.length)return d;d=typeof e==="function"?e:So.get(e)||Lo;return g};g.offset=function(e){if(!arguments.length)return v;v=typeof e==="function"?e:Eo.get(e)||Co;return g};g.x=function(e){if(!arguments.length)return h;h=e;return g};g.y=function(e){if(!arguments.length)return m;m=e;return g};g.out=function(e){if(!arguments.length)return p;p=e;return g};return g};function ko(e){return e.x}function Mo(e){return e.y}function Ao(e,t,r){e.y0=t;e.y=r}var So=P.map({"inside-out":function(e){var t=e.length,r,a,n=e.map(Do),i=e.map(Oo),o=P.range(t).sort(function(e,t){return n[e]-n[t]}),s=0,l=0,u=[],c=[];for(r=0;r<t;++r){a=o[r];if(s<l){s+=i[a];u.push(a)}else{l+=i[a];c.push(a)}}return c.reverse().concat(u)},reverse:function(e){return P.range(e.length).reverse()},default:Lo});var Eo=P.map({silhouette:function(e){var t=e.length,r=e[0].length,a=[],n=0,i,o,s,l=[];for(o=0;o<r;++o){for(i=0,s=0;i<t;i++)s+=e[i][o][1];if(s>n)n=s;a.push(s)}for(o=0;o<r;++o){l[o]=(n-a[o])/2}return l},wiggle:function(e){var t=e.length,r=e[0],a=r.length,n,i,o,s,l,u,c,f,d,v=[];v[0]=f=d=0;for(i=1;i<a;++i){for(n=0,s=0;n<t;++n)s+=e[n][i][1];for(n=0,l=0,c=r[i][0]-r[i-1][0];n<t;++n){for(o=0,u=(e[n][i][1]-e[n][i-1][1])/(2*c);o<n;++o){u+=(e[o][i][1]-e[o][i-1][1])/c}l+=u*e[n][i][1]}v[i]=f-=s?l/s*c:0;if(f<d)d=f}for(i=0;i<a;++i)v[i]-=d;return v},expand:function(e){var t=e.length,r=e[0].length,a=1/t,n,i,o,s=[];for(i=0;i<r;++i){for(n=0,o=0;n<t;n++)o+=e[n][i][1];if(o)for(n=0;n<t;n++)e[n][i][1]/=o;else for(n=0;n<t;n++)e[n][i][1]=a}for(i=0;i<r;++i)s[i]=0;return s},zero:Co});function Lo(e){return P.range(e.length)}function Co(e){var t=-1,r=e[0].length,a=[];while(++t<r)a[t]=0;return a}function Do(e){var t=1,r=0,a=e[0][1],n,i=e.length;for(;t<i;++t){if((n=e[t][1])>a){r=t;a=n}}return r}function Oo(e){return e.reduce(Io,0)}function Io(e,t){return e+t[1]}P.layout.histogram=function(){var f=true,d=Number,v=No,p=Po;function r(e,t){var r=[],a=e.map(d,this),n=v.call(this,a,t),i=p.call(this,n,a,t),o,t=-1,s=a.length,l=i.length-1,u=f?1:1/s,c;while(++t<l){o=r[t]=[];o.dx=i[t+1]-(o.x=i[t]);o.y=0}if(l>0){t=-1;while(++t<s){c=a[t];if(c>=n[0]&&c<=n[1]){o=r[P.bisect(i,c,1,l)-1];o.y+=u;o.push(e[t])}}}return r}r.value=function(e){if(!arguments.length)return d;d=e;return r};r.range=function(e){if(!arguments.length)return v;v=wt(e);return r};r.bins=function(t){if(!arguments.length)return p;p=typeof t==="number"?function(e){return Ro(e,t)}:wt(t);return r};r.frequency=function(e){if(!arguments.length)return f;f=!!e;return r};return r};function Po(e,t){return Ro(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Ro(e,t){var r=-1,a=+e[0],n=(e[1]-a)/t,i=[];while(++r<=t)i[r]=n*r+a;return i}function No(e){return[P.min(e),P.max(e)]}P.layout.pack=function(){var l=P.layout.hierarchy().sort(zo),u=0,c=[1,1],f;function t(e,t){var r=l.call(this,e,t),a=r[0],n=c[0],i=c[1],o=f==null?Math.sqrt:typeof f==="function"?f:function(){return f};a.x=a.y=0;yo(a,function(e){e.r=+o(e.value)});yo(a,Bo);if(u){var s=u*(f?1:Math.max(2*a.r/n,2*a.r/i))/2;yo(a,function(e){e.r+=s});yo(a,Bo);yo(a,function(e){e.r-=s})}Yo(a,n/2,i/2,f?1:1/Math.max(2*a.r/n,2*a.r/i));return r}t.size=function(e){if(!arguments.length)return c;c=e;return t};t.radius=function(e){if(!arguments.length)return f;f=e==null||typeof e==="function"?e:+e;return t};t.padding=function(e){if(!arguments.length)return u;u=+e;return t};return mo(t,l)};function zo(e,t){return e.value-t.value}function Fo(e,t){var r=e._pack_next;e._pack_next=t;t._pack_prev=e;t._pack_next=r;r._pack_prev=t}function jo(e,t){e._pack_next=t;t._pack_prev=e}function Ho(e,t){var r=t.x-e.x,a=t.y-e.y,n=e.r+t.r;return.999*n*n>r*r+a*a}function Bo(e){if(!(t=e.children)||!(d=t.length))return;var t,r=Infinity,a=-Infinity,n=Infinity,i=-Infinity,o,s,l,u,c,f,d;function v(e){r=Math.min(e.x-e.r,r);a=Math.max(e.x+e.r,a);n=Math.min(e.y-e.r,n);i=Math.max(e.y+e.r,i)}t.forEach(qo);o=t[0];o.x=-o.r;o.y=0;v(o);if(d>1){s=t[1];s.x=s.r;s.y=0;v(s);if(d>2){l=t[2];Vo(o,s,l);v(l);Fo(o,l);o._pack_prev=l;Fo(l,s);s=o._pack_next;for(u=3;u<d;u++){Vo(o,s,l=t[u]);var p=0,h=1,m=1;for(c=s._pack_next;c!==s;c=c._pack_next,h++){if(Ho(c,l)){p=1;break}}if(p==1){for(f=o._pack_prev;f!==c._pack_prev;f=f._pack_prev,m++){if(Ho(f,l)){break}}}if(p){if(h<m||h==m&&s.r<o.r)jo(o,s=c);else jo(o=f,s);u--}else{Fo(o,l);s=l;v(l)}}}}var g=(r+a)/2,y=(n+i)/2,x=0;for(u=0;u<d;u++){l=t[u];l.x-=g;l.y-=y;x=Math.max(x,l.r+Math.sqrt(l.x*l.x+l.y*l.y))}e.r=x;t.forEach(Uo)}function qo(e){e._pack_next=e._pack_prev=e}function Uo(e){delete e._pack_next;delete e._pack_prev}function Yo(e,t,r,a){var n=e.children;e.x=t+=a*e.x;e.y=r+=a*e.y;e.r*=a;if(n){var i=-1,o=n.length;while(++i<o)Yo(n[i],t,r,a)}}function Vo(e,t,r){var a=e.r+r.r,n=t.x-e.x,i=t.y-e.y;if(a&&(n||i)){var o=t.r+r.r,s=n*n+i*i;o*=o;a*=a;var l=.5+(a-o)/(2*s),u=Math.sqrt(Math.max(0,2*o*(a+s)-(a-=s)*a-o*o))/(2*s);r.x=e.x+l*n+u*i;r.y=e.y+l*i-u*n}else{r.x=e.x+a;r.y=e.y}}P.layout.tree=function(){var f=P.layout.hierarchy().sort(null).value(null),d=Go,v=[1,1],p=null;function t(e,t){var r=f.call(this,e,t),a=r[0],n=h(a);yo(n,m),n.parent.m=-n.z;go(n,g);if(p)go(a,y);else{var i=a,o=a,s=a;go(a,function(e){if(e.x<i.x)i=e;if(e.x>o.x)o=e;if(e.depth>s.depth)s=e});var l=d(i,o)/2-i.x,u=v[0]/(o.x+d(o,i)/2+l),c=v[1]/(s.depth||1);go(a,function(e){e.x=(e.x+l)*u;e.y=e.depth*c})}return r}function h(e){var t={A:null,children:[e]},r=[t],a;while((a=r.pop())!=null){for(var n=a.children,i,o=0,s=n.length;o<s;++o){r.push((n[o]=i={_:n[o],parent:a,children:(i=n[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i)}}return t.children[0]}function m(e){var t=e.children,r=e.parent.children,a=e.i?r[e.i-1]:null;if(t.length){Xo(e);var n=(t[0].z+t[t.length-1].z)/2;if(a){e.z=a.z+d(e._,a._);e.m=e.z-n}else{e.z=n}}else if(a){e.z=a.z+d(e._,a._)}e.parent.A=i(e,a,e.parent.A||r[0])}function g(e){e._.x=e.z+e.parent.m;e.m+=e.parent.m}function i(e,t,r){if(t){var a=e,n=e,i=t,o=a.parent.children[0],s=a.m,l=n.m,u=i.m,c=o.m,f;while(i=$o(i),a=Wo(a),i&&a){o=Wo(o);n=$o(n);n.a=e;f=i.z+u-a.z-s+d(i._,a._);if(f>0){Zo(Jo(i,e,r),e,f);s+=f;l+=f}u+=i.m;s+=a.m;c+=o.m;l+=n.m}if(i&&!$o(n)){n.t=i;n.m+=u-l}if(a&&!Wo(o)){o.t=a;o.m+=s-c;r=e}}return r}function y(e){e.x*=v[0];e.y=e.depth*v[1]}t.separation=function(e){if(!arguments.length)return d;d=e;return t};t.size=function(e){if(!arguments.length)return p?null:v;p=(v=e)==null?y:null;return t};t.nodeSize=function(e){if(!arguments.length)return p?v:null;p=(v=e)==null?null:y;return t};return mo(t,f)};function Go(e,t){return e.parent==t.parent?1:2}function Wo(e){var t=e.children;return t.length?t[0]:e.t}function $o(e){var t=e.children,r;return(r=t.length)?t[r-1]:e.t}function Zo(e,t,r){var a=r/(t.i-e.i);t.c-=a;t.s+=r;e.c+=a;t.z+=r;t.m+=r}function Xo(e){var t=0,r=0,a=e.children,n=a.length,i;while(--n>=0){i=a[n];i.z+=t;i.m+=t;t+=i.s+(r+=i.c)}}function Jo(e,t,r){return e.a.parent===t.parent?e.a:r}P.layout.cluster=function(){var c=P.layout.hierarchy().sort(null).value(null),f=Go,d=[1,1],v=false;function t(e,t){var r=c.call(this,e,t),a=r[0],n,i=0;yo(a,function(e){var t=e.children;if(t&&t.length){e.x=Qo(t);e.y=Ko(t)}else{e.x=n?i+=f(e,n):0;e.y=0;n=e}});var o=es(a),s=ts(a),l=o.x-f(o,s)/2,u=s.x+f(s,o)/2;yo(a,v?function(e){e.x=(e.x-a.x)*d[0];e.y=(a.y-e.y)*d[1]}:function(e){e.x=(e.x-l)/(u-l)*d[0];e.y=(1-(a.y?e.y/a.y:1))*d[1]});return r}t.separation=function(e){if(!arguments.length)return f;f=e;return t};t.size=function(e){if(!arguments.length)return v?null:d;v=(d=e)==null;return t};t.nodeSize=function(e){if(!arguments.length)return v?d:null;v=(d=e)!=null;return t};return mo(t,c)};function Ko(e){return 1+P.max(e,function(e){return e.y})}function Qo(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function es(e){var t=e.children;return t&&t.length?es(t[0]):e}function ts(e){var t=e.children,r;return t&&(r=t.length)?ts(t[r-1]):e}P.layout.treemap=function(){var a=P.layout.hierarchy(),c=Math.round,n=[1,1],i=null,f=rs,o=false,s,d="squarify",l=.5*(1+Math.sqrt(5));function v(e,t){var r=-1,a=e.length,n,i;while(++r<a){i=(n=e[r]).value*(t<0?0:t);n.area=isNaN(i)||i<=0?0:i}}function p(e){var t=e.children;if(t&&t.length){var r=f(e),a=[],n=t.slice(),i,o=Infinity,s,l=d==="slice"?r.dx:d==="dice"?r.dy:d==="slice-dice"?e.depth&1?r.dy:r.dx:Math.min(r.dx,r.dy),u;v(n,r.dx*r.dy/e.value);a.area=0;while((u=n.length)>0){a.push(i=n[u-1]);a.area+=i.area;if(d!=="squarify"||(s=h(a,l))<=o){n.pop();o=s}else{a.area-=a.pop().area;m(a,l,r,false);l=Math.min(r.dx,r.dy);a.length=a.area=0;o=Infinity}}if(a.length){m(a,l,r,true);a.length=a.area=0}t.forEach(p)}}function u(e){var t=e.children;if(t&&t.length){var r=f(e),a=t.slice(),n,i=[];v(a,r.dx*r.dy/e.value);i.area=0;while(n=a.pop()){i.push(n);i.area+=n.area;if(n.z!=null){m(i,n.z?r.dx:r.dy,r,!a.length);i.length=i.area=0}}t.forEach(u)}}function h(e,t){var r=e.area,a,n=0,i=Infinity,o=-1,s=e.length;while(++o<s){if(!(a=e[o].area))continue;if(a<i)i=a;if(a>n)n=a}r*=r;t*=t;return r?Math.max(t*n*l/r,r/(t*i*l)):Infinity}function m(e,t,r,a){var n=-1,i=e.length,o=r.x,s=r.y,l=t?c(e.area/t):0,u;if(t==r.dx){if(a||l>r.dy)l=r.dy;while(++n<i){u=e[n];u.x=o;u.y=s;u.dy=l;o+=u.dx=Math.min(r.x+r.dx-o,l?c(u.area/l):0)}u.z=true;u.dx+=r.x+r.dx-o;r.y+=l;r.dy-=l}else{if(a||l>r.dx)l=r.dx;while(++n<i){u=e[n];u.x=o;u.y=s;u.dx=l;s+=u.dy=Math.min(r.y+r.dy-s,l?c(u.area/l):0)}u.z=false;u.dy+=r.y+r.dy-s;r.x+=l;r.dx-=l}}function g(e){var t=s||a(e),r=t[0];r.x=r.y=0;if(r.value)r.dx=n[0],r.dy=n[1];else r.dx=r.dy=0;if(s)a.revalue(r);v([r],r.dx*r.dy/r.value);(s?u:p)(r);if(o)s=t;return t}g.size=function(e){if(!arguments.length)return n;n=e;return g};g.padding=function(r){if(!arguments.length)return i;function e(e){var t=r.call(g,e,e.depth);return t==null?rs(e):as(e,typeof t==="number"?[t,t,t,t]:t)}function t(e){return as(e,r)}var a;f=(i=r)==null?rs:(a=typeof r)==="function"?e:a==="number"?(r=[r,r,r,r],t):t;return g};g.round=function(e){if(!arguments.length)return c!=Number;c=e?Math.round:Number;return g};g.sticky=function(e){if(!arguments.length)return o;o=e;s=null;return g};g.ratio=function(e){if(!arguments.length)return l;l=e;return g};g.mode=function(e){if(!arguments.length)return d;d=e+"";return g};return mo(g,a)};function rs(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function as(e,t){var r=e.x+t[3],a=e.y+t[0],n=e.dx-t[1]-t[3],i=e.dy-t[0]-t[2];if(n<0){r+=n/2;n=0}if(i<0){a+=i/2;i=0}return{x:r,y:a,dx:n,dy:i}}P.random={normal:function(a,n){var e=arguments.length;if(e<2)n=1;if(e<1)a=0;return function(){var e,t,r;do{e=Math.random()*2-1;t=Math.random()*2-1;r=e*e+t*t}while(!r||r>1);return a+n*e*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var e=P.random.normal.apply(P,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=P.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(r){return function(){for(var e=0,t=0;t<r;t++)e+=Math.random();return e}}};P.scale={};function ns(e){var t=e[0],r=e[e.length-1];return t<r?[t,r]:[r,t]}function is(e){return e.rangeExtent?e.rangeExtent():ns(e.range())}function os(e,t,r,a){var n=r(e[0],e[1]),i=a(t[0],t[1]);return function(e){return i(n(e))}}function ss(e,t){var r=0,a=e.length-1,n=e[r],i=e[a],o;if(i<n){o=r,r=a,a=o;o=n,n=i,i=o}e[r]=t.floor(n);e[a]=t.ceil(i);return e}function ls(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:us}var us={floor:z,ceil:z};function cs(r,e,t,a){var n=[],i=[],o=0,s=Math.min(r.length,e.length)-1;if(r[s]<r[0]){r=r.slice().reverse();e=e.slice().reverse()}while(++o<=s){n.push(t(r[o-1],r[o]));i.push(a(e[o-1],e[o]))}return function(e){var t=P.bisect(r,e,1,s)-1;return i[t](n[t](e))}}P.scale.linear=function(){return fs([0,1],[0,1],Ti,false)};function fs(r,a,n,i){var o,s;function t(){var e=Math.min(r.length,a.length)>2?cs:os,t=i?ao:ro;o=e(r,a,t,n);s=e(a,r,t,Ti);return l}function l(e){return o(e)}l.invert=function(e){return s(e)};l.domain=function(e){if(!arguments.length)return r;r=e.map(Number);return t()};l.range=function(e){if(!arguments.length)return a;a=e;return t()};l.rangeRound=function(e){return l.range(e).interpolate(Yi)};l.clamp=function(e){if(!arguments.length)return i;i=e;return t()};l.interpolate=function(e){if(!arguments.length)return n;n=e;return t()};l.ticks=function(e){return hs(r,e)};l.tickFormat=function(e,t){return ms(r,e,t)};l.nice=function(e){vs(r,e);return t()};l.copy=function(){return fs(r,a,n,i)};return t()}function ds(e,t){return P.rebind(e,t,"range","rangeRound","interpolate","clamp")}function vs(e,t){ss(e,ls(ps(e,t)[2]));ss(e,ls(ps(e,t)[2]));return e}function ps(e,t){if(t==null)t=10;var r=ns(e),a=r[1]-r[0],n=Math.pow(10,Math.floor(Math.log(a/t)/Math.LN10)),i=t/a*n;if(i<=.15)n*=10;else if(i<=.35)n*=5;else if(i<=.75)n*=2;r[0]=Math.ceil(r[0]/n)*n;r[1]=Math.floor(r[1]/n)*n+n*.5;r[2]=n;return r}function hs(e,t){return P.range.apply(P,ps(e,t))}function ms(e,t,r){var a=ps(e,t);if(r){var n=Ht.exec(r);n.shift();if(n[8]==="s"){var i=P.formatPrefix(Math.max(I(a[0]),I(a[1])));if(!n[7])n[7]="."+ys(i.scale(a[2]));n[8]="f";r=P.format(n.join(""));return function(e){return r(i.scale(e))+i.symbol}}if(!n[7])n[7]="."+xs(n[8],a);r=n.join("")}else{r=",."+ys(a[2])+"f"}return P.format(r)}var gs={s:1,g:1,p:1,r:1,e:1};function ys(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function xs(e,t){var r=ys(t[2]);return e in gs?Math.abs(r-ys(Math.max(I(t[0]),I(t[1]))))+ +(e!=="e"):r-(e==="%")*2}P.scale.log=function(){return bs(P.scale.linear().domain([0,1]),10,true,[1,10])};function bs(t,l,u,c){function f(e){return(u?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(l)}function d(e){return u?Math.pow(l,e):-Math.pow(l,-e)}function n(e){return t(f(e))}n.invert=function(e){return d(t.invert(e))};n.domain=function(e){if(!arguments.length)return c;u=e[0]>=0;t.domain((c=e.map(Number)).map(f));return n};n.base=function(e){if(!arguments.length)return l;l=+e;t.domain(c.map(f));return n};n.nice=function(){var e=ss(c.map(f),u?Math:ws);t.domain(e);c=e.map(d);return n};n.ticks=function(){var e=ns(c),t=[],r=e[0],a=e[1],n=Math.floor(f(r)),i=Math.ceil(f(a)),o=l%1?2:l;if(isFinite(i-n)){if(u){for(;n<i;n++)for(var s=1;s<o;s++)t.push(d(n)*s);t.push(d(n))}else{t.push(d(n));for(;n++<i;)for(var s=o-1;s>0;s--)t.push(d(n)*s)}for(n=0;t[n]<r;n++){}for(i=t.length;t[i-1]>a;i--){}t=t.slice(n,i)}return t};n.tickFormat=function(e,r){if(!arguments.length)return _s;if(arguments.length<2)r=_s;else if(typeof r!=="function")r=P.format(r);var a=Math.max(1,l*e/n.ticks().length);return function(e){var t=e/d(Math.round(f(e)));if(t*l<l-.5)t*=l;return t<=a?r(e):""}};n.copy=function(){return bs(t.copy(),l,u,c)};return ds(n,t)}var _s=P.format(".0e"),ws={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};P.scale.pow=function(){return Ts(P.scale.linear(),1,[0,1])};function Ts(t,r,a){var n=ks(r),i=ks(1/r);function o(e){return t(n(e))}o.invert=function(e){return i(t.invert(e))};o.domain=function(e){if(!arguments.length)return a;t.domain((a=e.map(Number)).map(n));return o};o.ticks=function(e){return hs(a,e)};o.tickFormat=function(e,t){return ms(a,e,t)};o.nice=function(e){return o.domain(vs(a,e))};o.exponent=function(e){if(!arguments.length)return r;n=ks(r=e);i=ks(1/r);t.domain(a.map(n));return o};o.copy=function(){return Ts(t.copy(),r,a)};return ds(o,t)}function ks(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}P.scale.sqrt=function(){return P.scale.pow().exponent(.5)};P.scale.ordinal=function(){return Ms([],{t:"range",a:[[]]})};function Ms(s,l){var n,u,c;function f(e){return u[((n.get(e)||(l.t==="range"?n.set(e,s.push(e)):NaN))-1)%u.length]}function d(t,r){return P.range(s.length).map(function(e){return t+r*e})}f.domain=function(e){if(!arguments.length)return s;s=[];n=new y;var t=-1,r=e.length,a;while(++t<r)if(!n.has(a=e[t]))n.set(a,s.push(a));return f[l.t].apply(f,l.a)};f.range=function(e){if(!arguments.length)return u;u=e;c=0;l={t:"range",a:arguments};return f};f.rangePoints=function(e,t){if(arguments.length<2)t=0;var r=e[0],a=e[1],n=s.length<2?(r=(r+a)/2,0):(a-r)/(s.length-1+t);u=d(r+n*t/2,n);c=0;l={t:"rangePoints",a:arguments};return f};f.rangeRoundPoints=function(e,t){if(arguments.length<2)t=0;var r=e[0],a=e[1],n=s.length<2?(r=a=Math.round((r+a)/2),0):(a-r)/(s.length-1+t)|0;u=d(r+Math.round(n*t/2+(a-r-(s.length-1+t)*n)/2),n);c=0;l={t:"rangeRoundPoints",a:arguments};return f};f.rangeBands=function(e,t,r){if(arguments.length<2)t=0;if(arguments.length<3)r=t;var a=e[1]<e[0],n=e[a-0],i=e[1-a],o=(i-n)/(s.length-t+2*r);u=d(n+o*r,o);if(a)u.reverse();c=o*(1-t);l={t:"rangeBands",a:arguments};return f};f.rangeRoundBands=function(e,t,r){if(arguments.length<2)t=0;if(arguments.length<3)r=t;var a=e[1]<e[0],n=e[a-0],i=e[1-a],o=Math.floor((i-n)/(s.length-t+2*r));u=d(n+Math.round((i-n-(s.length-t)*o)/2),o);if(a)u.reverse();c=Math.round(o*(1-t));l={t:"rangeRoundBands",a:arguments};return f};f.rangeBand=function(){return c};f.rangeExtent=function(){return ns(l.a[0])};f.copy=function(){return Ms(s,l)};return f.domain(s)}P.scale.category10=function(){return P.scale.ordinal().range(As)};P.scale.category20=function(){return P.scale.ordinal().range(Ss)};P.scale.category20b=function(){return P.scale.ordinal().range(Es)};P.scale.category20c=function(){return P.scale.ordinal().range(Ls)};var As=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(vt);var Ss=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(vt);var Es=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(vt);var Ls=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(vt);P.scale.quantile=function(){return Cs([],[])};function Cs(r,a){var n;function t(){var e=0,t=a.length;n=[];while(++e<t)n[e-1]=P.quantile(r,e/t);return i}function i(e){if(!isNaN(e=+e))return a[P.bisect(n,e)]}i.domain=function(e){if(!arguments.length)return r;r=e.map(u).filter(c).sort(l);return t()};i.range=function(e){if(!arguments.length)return a;a=e;return t()};i.quantiles=function(){return n};i.invertExtent=function(e){e=a.indexOf(e);return e<0?[NaN,NaN]:[e>0?n[e-1]:r[0],e<n.length?n[e]:r[r.length-1]]};i.copy=function(){return Cs(r,a)};return t()}P.scale.quantize=function(){return Ds(0,1,[0,1])};function Ds(t,r,a){var n,i;function e(e){return a[Math.max(0,Math.min(i,Math.floor(n*(e-t))))]}function o(){n=a.length/(r-t);i=a.length-1;return e}e.domain=function(e){if(!arguments.length)return[t,r];t=+e[0];r=+e[e.length-1];return o()};e.range=function(e){if(!arguments.length)return a;a=e;return o()};e.invertExtent=function(e){e=a.indexOf(e);e=e<0?NaN:e/n+t;return[e,e+1/n]};e.copy=function(){return Ds(t,r,a)};return o()}P.scale.threshold=function(){return Os([.5],[0,1])};function Os(t,r){function a(e){if(e<=e)return r[P.bisect(t,e)]}a.domain=function(e){if(!arguments.length)return t;t=e;return a};a.range=function(e){if(!arguments.length)return r;r=e;return a};a.invertExtent=function(e){e=r.indexOf(e);return[t[e-1],t[e]]};a.copy=function(){return Os(t,r)};return a}P.scale.identity=function(){return Is([0,1])};function Is(r){function t(e){return+e}t.invert=t;t.domain=t.range=function(e){if(!arguments.length)return r;r=e.map(t);return t};t.ticks=function(e){return hs(r,e)};t.tickFormat=function(e,t){return ms(r,e,t)};t.copy=function(){return Is(r)};return t}P.svg={};function Ps(){return 0}P.svg.arc=function(){var F=Ns,j=zs,H=Ps,B=Rs,q=Fs,U=js,Y=Hs;function t(){var e=Math.max(0,+F.apply(this,arguments)),t=Math.max(0,+j.apply(this,arguments)),r=q.apply(this,arguments)-Ce,a=U.apply(this,arguments)-Ce,n=Math.abs(a-r),i=r>a?0:1;if(t<e)o=t,t=e,e=o;if(n>=Le)return V(t,i)+(e?V(e,1-i):"")+"Z";var o,s,l,u,c=0,f=0,d,v,p,h,m,g,y,x,b=[];if(u=(+Y.apply(this,arguments)||0)/2){l=B===Rs?Math.sqrt(e*e+t*t):+B.apply(this,arguments);if(!i)f*=-1;if(t)f=Ne(l/t*Math.sin(u));if(e)c=Ne(l/e*Math.sin(u))}if(t){d=t*Math.cos(r+f);v=t*Math.sin(r+f);p=t*Math.cos(a-f);h=t*Math.sin(a-f);var _=Math.abs(a-r-2*f)<=Se?0:1;if(f&&Bs(d,v,p,h)===i^_){var w=(r+a)/2;d=t*Math.cos(w);v=t*Math.sin(w);p=h=null}}else{d=v=0}if(e){m=e*Math.cos(a-c);g=e*Math.sin(a-c);y=e*Math.cos(r+c);x=e*Math.sin(r+c);var T=Math.abs(r-a+2*c)<=Se?0:1;if(c&&Bs(m,g,y,x)===1-i^T){var k=(r+a)/2;m=e*Math.cos(k);g=e*Math.sin(k);y=x=null}}else{m=g=0}if(n>Me&&(o=Math.min(Math.abs(t-e)/2,+H.apply(this,arguments)))>.001){s=e<t^i?0:1;var M=o,A=o;if(n<Se){var S=y==null?[m,g]:p==null?[d,v]:En([d,v],[y,x],[p,h],[m,g]),E=d-S[0],L=v-S[1],C=p-S[0],D=h-S[1],O=1/Math.sin(Math.acos((E*C+L*D)/(Math.sqrt(E*E+L*L)*Math.sqrt(C*C+D*D)))/2),I=Math.sqrt(S[0]*S[0]+S[1]*S[1]);A=Math.min(o,(e-I)/(O-1));M=Math.min(o,(t-I)/(O+1))}if(p!=null){var P=qs(y==null?[m,g]:[y,x],[d,v],t,M,i),R=qs([p,h],[m,g],t,M,i);if(o===M){b.push("M",P[0],"A",M,",",M," 0 0,",s," ",P[1],"A",t,",",t," 0 ",1-i^Bs(P[1][0],P[1][1],R[1][0],R[1][1]),",",i," ",R[1],"A",M,",",M," 0 0,",s," ",R[0])}else{b.push("M",P[0],"A",M,",",M," 0 1,",s," ",R[0])}}else{b.push("M",d,",",v)}if(y!=null){var N=qs([d,v],[y,x],e,-A,i),z=qs([m,g],p==null?[d,v]:[p,h],e,-A,i);if(o===A){b.push("L",z[0],"A",A,",",A," 0 0,",s," ",z[1],"A",e,",",e," 0 ",i^Bs(z[1][0],z[1][1],N[1][0],N[1][1]),",",1-i," ",N[1],"A",A,",",A," 0 0,",s," ",N[0])}else{b.push("L",z[0],"A",A,",",A," 0 0,",s," ",N[0])}}else{b.push("L",m,",",g)}}else{b.push("M",d,",",v);if(p!=null)b.push("A",t,",",t," 0 ",_,",",i," ",p,",",h);b.push("L",m,",",g);if(y!=null)b.push("A",e,",",e," 0 ",T,",",1-i," ",y,",",x)}b.push("Z");return b.join("")}function V(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}t.innerRadius=function(e){if(!arguments.length)return F;F=wt(e);return t};t.outerRadius=function(e){if(!arguments.length)return j;j=wt(e);return t};t.cornerRadius=function(e){if(!arguments.length)return H;H=wt(e);return t};t.padRadius=function(e){if(!arguments.length)return B;B=e==Rs?Rs:wt(e);return t};t.startAngle=function(e){if(!arguments.length)return q;q=wt(e);return t};t.endAngle=function(e){if(!arguments.length)return U;U=wt(e);return t};t.padAngle=function(e){if(!arguments.length)return Y;Y=wt(e);return t};t.centroid=function(){var e=(+F.apply(this,arguments)+ +j.apply(this,arguments))/2,t=(+q.apply(this,arguments)+ +U.apply(this,arguments))/2-Ce;return[Math.cos(t)*e,Math.sin(t)*e]};return t};var Rs="auto";function Ns(e){return e.innerRadius}function zs(e){return e.outerRadius}function Fs(e){return e.startAngle}function js(e){return e.endAngle}function Hs(e){return e&&e.padAngle}function Bs(e,t,r,a){return(e-r)*t-(t-a)*e>0?0:1}function qs(e,t,r,a,n){var i=e[0]-t[0],o=e[1]-t[1],s=(n?a:-a)/Math.sqrt(i*i+o*o),l=s*o,u=-s*i,c=e[0]+l,f=e[1]+u,d=t[0]+l,v=t[1]+u,p=(c+d)/2,h=(f+v)/2,m=d-c,g=v-f,y=m*m+g*g,x=r-a,b=c*v-d*f,_=(g<0?-1:1)*Math.sqrt(Math.max(0,x*x*y-b*b)),w=(b*g-m*_)/y,T=(-b*m-g*_)/y,k=(b*g+m*_)/y,M=(-b*m+g*_)/y,A=w-p,S=T-h,E=k-p,L=M-h;if(A*A+S*S>E*E+L*L)w=k,T=M;return[[w-l,T-u],[w*r/x,T*r/x]]}function Us(u){var c=wn,f=Tn,d=na,v=Vs,t=v.key,p=.7;function r(e){var t=[],r=[],a=-1,n=e.length,i,o=wt(c),s=wt(f);function l(){t.push("M",v(u(r),p))}while(++a<n){if(d.call(this,i=e[a],a)){r.push([+o.call(this,i,a),+s.call(this,i,a)])}else if(r.length){l();r=[]}}if(r.length)l();return t.length?t.join(""):null}r.x=function(e){if(!arguments.length)return c;c=e;return r};r.y=function(e){if(!arguments.length)return f;f=e;return r};r.defined=function(e){if(!arguments.length)return d;d=e;return r};r.interpolate=function(e){if(!arguments.length)return t;if(typeof e==="function")t=v=e;else t=(v=Ys.get(e)||Vs).key;return r};r.tension=function(e){if(!arguments.length)return p;p=e;return r};return r}P.svg.line=function(){return Us(z)};var Ys=P.map({linear:Vs,"linear-closed":Gs,step:Ws,"step-before":$s,"step-after":Zs,basis:tl,"basis-open":rl,"basis-closed":al,bundle:nl,cardinal:Ks,"cardinal-open":Xs,"cardinal-closed":Js,monotone:vl});Ys.forEach(function(e,t){t.key=e;t.closed=/-closed$/.test(e)});function Vs(e){return e.length>1?e.join("L"):e+"Z"}function Gs(e){return e.join("L")+"Z"}function Ws(e){var t=0,r=e.length,a=e[0],n=[a[0],",",a[1]];while(++t<r)n.push("H",(a[0]+(a=e[t])[0])/2,"V",a[1]);if(r>1)n.push("H",a[0]);return n.join("")}function $s(e){var t=0,r=e.length,a=e[0],n=[a[0],",",a[1]];while(++t<r)n.push("V",(a=e[t])[1],"H",a[0]);return n.join("")}function Zs(e){var t=0,r=e.length,a=e[0],n=[a[0],",",a[1]];while(++t<r)n.push("H",(a=e[t])[0],"V",a[1]);return n.join("")}function Xs(e,t){return e.length<4?Vs(e):e[1]+Qs(e.slice(1,-1),el(e,t))}function Js(e,t){return e.length<3?Gs(e):e[0]+Qs((e.push(e[0]),e),el([e[e.length-2]].concat(e,[e[1]]),t))}function Ks(e,t){return e.length<3?Vs(e):e[0]+Qs(e,el(e,t))}function Qs(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2){return Vs(e)}var r=e.length!=t.length,a="",n=e[0],i=e[1],o=t[0],s=o,l=1;if(r){a+="Q"+(i[0]-o[0]*2/3)+","+(i[1]-o[1]*2/3)+","+i[0]+","+i[1];n=e[1];l=2}if(t.length>1){s=t[1];i=e[l];l++;a+="C"+(n[0]+o[0])+","+(n[1]+o[1])+","+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1];for(var u=2;u<t.length;u++,l++){i=e[l];s=t[u];a+="S"+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1]}}if(r){var c=e[l];a+="Q"+(i[0]+s[0]*2/3)+","+(i[1]+s[1]*2/3)+","+c[0]+","+c[1]}return a}function el(e,t){var r=[],a=(1-t)/2,n,i=e[0],o=e[1],s=1,l=e.length;while(++s<l){n=i;i=o;o=e[s];r.push([a*(o[0]-n[0]),a*(o[1]-n[1])])}return r}function tl(e){if(e.length<3)return Vs(e);var t=1,r=e.length,a=e[0],n=a[0],i=a[1],o=[n,n,n,(a=e[1])[0]],s=[i,i,i,a[1]],l=[n,",",i,"L",il(ll,o),",",il(ll,s)];e.push(e[r-1]);while(++t<=r){a=e[t];o.shift();o.push(a[0]);s.shift();s.push(a[1]);ul(l,o,s)}e.pop();l.push("L",a);return l.join("")}function rl(e){if(e.length<4)return Vs(e);var t=[],r=-1,a=e.length,n,i=[0],o=[0];while(++r<3){n=e[r];i.push(n[0]);o.push(n[1])}t.push(il(ll,i)+","+il(ll,o));--r;while(++r<a){n=e[r];i.shift();i.push(n[0]);o.shift();o.push(n[1]);ul(t,i,o)}return t.join("")}function al(e){var t,r=-1,a=e.length,n=a+4,i,o=[],s=[];while(++r<4){i=e[r%a];o.push(i[0]);s.push(i[1])}t=[il(ll,o),",",il(ll,s)];--r;while(++r<n){i=e[r%a];o.shift();o.push(i[0]);s.shift();s.push(i[1]);ul(t,o,s)}return t.join("")}function nl(e,t){var r=e.length-1;if(r){var a=e[0][0],n=e[0][1],i=e[r][0]-a,o=e[r][1]-n,s=-1,l,u;while(++s<=r){l=e[s];u=s/r;l[0]=t*l[0]+(1-t)*(a+u*i);l[1]=t*l[1]+(1-t)*(n+u*o)}}return tl(e)}function il(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}var ol=[0,2/3,1/3,0],sl=[0,1/3,2/3,0],ll=[0,1/6,2/3,1/6];function ul(e,t,r){e.push("C",il(ol,t),",",il(ol,r),",",il(sl,t),",",il(sl,r),",",il(ll,t),",",il(ll,r))}function cl(e,t){return(t[1]-e[1])/(t[0]-e[0])}function fl(e){var t=0,r=e.length-1,a=[],n=e[0],i=e[1],o=a[0]=cl(n,i);while(++t<r){a[t]=(o+(o=cl(n=i,i=e[t+1])))/2}a[t]=o;return a}function dl(e){var t=[],r,a,n,i,o=fl(e),s=-1,l=e.length-1;while(++s<l){r=cl(e[s],e[s+1]);if(I(r)<Me){o[s]=o[s+1]=0}else{a=o[s]/r;n=o[s+1]/r;i=a*a+n*n;if(i>9){i=r*3/Math.sqrt(i);o[s]=i*a;o[s+1]=i*n}}}s=-1;while(++s<=l){i=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s]));t.push([i||0,o[s]*i||0])}return t}function vl(e){return e.length<3?Vs(e):e[0]+Qs(e,dl(e))}P.svg.line.radial=function(){var e=Us(pl);e.radius=e.x,delete e.x;e.angle=e.y,delete e.y;return e};function pl(e){var t,r=-1,a=e.length,n,i;while(++r<a){t=e[r];n=t[0];i=t[1]-Ce;t[0]=n*Math.cos(i);t[1]=n*Math.sin(i)}return e}function hl(p){var h=wn,m=wn,g=0,y=Tn,x=na,b=Vs,t=b.key,_=b,w="L",T=.7;function r(e){var t=[],r=[],a=[],n=-1,i=e.length,o,s=wt(h),l=wt(g),u=h===m?function(){return f}:wt(m),c=g===y?function(){return d}:wt(y),f,d;function v(){t.push("M",b(p(a),T),w,_(p(r.reverse()),T),"Z")}while(++n<i){if(x.call(this,o=e[n],n)){r.push([f=+s.call(this,o,n),d=+l.call(this,o,n)]);a.push([+u.call(this,o,n),+c.call(this,o,n)])}else if(r.length){v();r=[];a=[]}}if(r.length)v();return t.length?t.join(""):null}r.x=function(e){if(!arguments.length)return m;h=m=e;return r};r.x0=function(e){if(!arguments.length)return h;h=e;return r};r.x1=function(e){if(!arguments.length)return m;m=e;return r};r.y=function(e){if(!arguments.length)return y;g=y=e;return r};r.y0=function(e){if(!arguments.length)return g;g=e;return r};r.y1=function(e){if(!arguments.length)return y;y=e;return r};r.defined=function(e){if(!arguments.length)return x;x=e;return r};r.interpolate=function(e){if(!arguments.length)return t;if(typeof e==="function")t=b=e;else t=(b=Ys.get(e)||Vs).key;_=b.reverse||b;w=b.closed?"M":"L";return r};r.tension=function(e){if(!arguments.length)return T;T=e;return r};return r}$s.reverse=Zs;Zs.reverse=$s;P.svg.area=function(){return hl(z)};P.svg.area.radial=function(){var e=hl(pl);e.radius=e.x,delete e.x;e.innerRadius=e.x0,delete e.x0;e.outerRadius=e.x1,delete e.x1;e.angle=e.y,delete e.y;e.startAngle=e.y0,delete e.y0;e.endAngle=e.y1,delete e.y1;return e};P.svg.chord=function(){var n=nn,i=on,l=ml,u=Fs,c=js;function t(e,t){var r=o(this,n,e,t),a=o(this,i,e,t);return"M"+r.p0+f(r.r,r.p1,r.a1-r.a0)+(s(r,a)?d(r.r,r.p1,r.r,r.p0):d(r.r,r.p1,a.r,a.p0)+f(a.r,a.p1,a.a1-a.a0)+d(a.r,a.p1,r.r,r.p0))+"Z"}function o(e,t,r,a){var n=t.call(e,r,a),i=l.call(e,n,a),o=u.call(e,n,a)-Ce,s=c.call(e,n,a)-Ce;return{r:i,a0:o,a1:s,p0:[i*Math.cos(o),i*Math.sin(o)],p1:[i*Math.cos(s),i*Math.sin(s)]}}function s(e,t){return e.a0==t.a0&&e.a1==t.a1}function f(e,t,r){return"A"+e+","+e+" 0 "+ +(r>Se)+",1 "+t}function d(e,t,r,a){return"Q 0,0 "+a}t.radius=function(e){if(!arguments.length)return l;l=wt(e);return t};t.source=function(e){if(!arguments.length)return n;n=wt(e);return t};t.target=function(e){if(!arguments.length)return i;i=wt(e);return t};t.startAngle=function(e){if(!arguments.length)return u;u=wt(e);return t};t.endAngle=function(e){if(!arguments.length)return c;c=wt(e);return t};return t};function ml(e){return e.radius}P.svg.diagonal=function(){var o=nn,s=on,l=gl;function t(e,t){var r=o.call(this,e,t),a=s.call(this,e,t),n=(r.y+a.y)/2,i=[r,{x:r.x,y:n},{x:a.x,y:n},a];i=i.map(l);return"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}t.source=function(e){if(!arguments.length)return o;o=wt(e);return t};t.target=function(e){if(!arguments.length)return s;s=wt(e);return t};t.projection=function(e){if(!arguments.length)return l;l=e;return t};return t};function gl(e){return[e.x,e.y]}P.svg.diagonal.radial=function(){var e=P.svg.diagonal(),t=gl,r=e.projection;e.projection=function(e){return arguments.length?r(yl(t=e)):t};return e};function yl(a){return function(){var e=a.apply(this,arguments),t=e[0],r=e[1]-Ce;return[t*Math.cos(r),t*Math.sin(r)]}}P.svg.symbol=function(){var r=bl,a=xl;function t(e,t){return(wl.get(r.call(this,e,t))||_l)(a.call(this,e,t))}t.type=function(e){if(!arguments.length)return r;r=wt(e);return t};t.size=function(e){if(!arguments.length)return a;a=wt(e);return t};return t};function xl(){return 64}function bl(){return"circle"}function _l(e){var t=Math.sqrt(e/Se);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}var wl=P.map({circle:_l,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*kl)),r=t*kl;return"M0,"+-t+"L"+r+",0"+" 0,"+t+" "+-r+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Tl),r=t*Tl/2;return"M0,"+r+"L"+t+","+-r+" "+-t+","+-r+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Tl),r=t*Tl/2;return"M0,"+-r+"L"+t+","+r+" "+-t+","+r+"Z"}});P.svg.symbolTypes=wl.keys();var Tl=Math.sqrt(3),kl=Math.tan(30*De);W.transition=function(e){var t=Cl||++Ll,r=Pl(e),a=[],n,i,o=Dl||{time:Date.now(),ease:Ii,delay:0,duration:250};for(var s=-1,l=this.length;++s<l;){a.push(n=[]);for(var u=this[s],c=-1,f=u.length;++c<f;){if(i=u[c])Rl(i,c,r,t,o);n.push(i)}}return Sl(a,r,t)};W.interrupt=function(e){return this.each(e==null?Ml:Al(Pl(e)))};var Ml=Al(Pl());function Al(a){return function(){var e,t,r;if((e=this[a])&&(r=e[t=e.active])){r.timer.c=null;r.timer.t=NaN;if(--e.count)delete e[t];else delete this[a];e.active+=.5;r.event&&r.event.interrupt.call(this,this.__data__,r.index)}}}function Sl(e,t,r){q(e,El);e.namespace=t;e.id=r;return e}var El=[],Ll=0,Cl,Dl;El.call=W.call;El.empty=W.empty;El.node=W.node;El.size=W.size;P.transition=function(e,t){return e&&e.transition?Cl?e.transition(t):e:P.selection().transition(e)};P.transition.prototype=El;El.select=function(e){var t=this.id,r=this.namespace,a=[],n,i,o;e=$(e);for(var s=-1,l=this.length;++s<l;){a.push(n=[]);for(var u=this[s],c=-1,f=u.length;++c<f;){if((o=u[c])&&(i=e.call(o,o.__data__,c,s))){if("__data__"in o)i.__data__=o.__data__;Rl(i,c,r,t,o[r][t]);n.push(i)}else{n.push(null)}}}return Sl(a,r,t)};El.selectAll=function(e){var t=this.id,r=this.namespace,a=[],n,i,o,s,l;e=Z(e);for(var u=-1,c=this.length;++u<c;){for(var f=this[u],d=-1,v=f.length;++d<v;){if(o=f[d]){l=o[r][t];i=e.call(o,o.__data__,d,u);a.push(n=[]);for(var p=-1,h=i.length;++p<h;){if(s=i[p])Rl(s,p,r,t,l);n.push(s)}}}}return Sl(a,r,t)};El.filter=function(e){var t=[],r,a,n;if(typeof e!=="function")e=ue(e);for(var i=0,o=this.length;i<o;i++){t.push(r=[]);for(var a=this[i],s=0,l=a.length;s<l;s++){if((n=a[s])&&e.call(n,n.__data__,s,i)){r.push(n)}}}return Sl(t,this.namespace,this.id)};El.tween=function(t,r){var a=this.id,n=this.namespace;if(arguments.length<2)return this.node()[n][a].tween.get(t);return fe(this,r==null?function(e){e[n][a].tween.remove(t)}:function(e){e[n][a].tween.set(t,r)})};function Ol(e,a,n,i){var o=e.id,s=e.namespace;return fe(e,typeof n==="function"?function(e,t,r){e[s][o].tween.set(a,i(n.call(e,e.__data__,t,r)))}:(n=i(n),function(e){e[s][o].tween.set(a,n)}))}El.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var a=e=="transform"?to:Ti,n=P.ns.qualify(e);function i(){this.removeAttribute(n)}function o(){this.removeAttributeNS(n.space,n.local)}function r(r){return r==null?i:(r+="",function(){var e=this.getAttribute(n),t;return e!==r&&(t=a(e,r),function(e){this.setAttribute(n,t(e))})})}function s(r){return r==null?o:(r+="",function(){var e=this.getAttributeNS(n.space,n.local),t;return e!==r&&(t=a(e,r),function(e){this.setAttributeNS(n.space,n.local,t(e))})})}return Ol(this,"attr."+e,t,n.local?s:r)};El.attrTween=function(e,a){var n=P.ns.qualify(e);function t(e,t){var r=a.call(this,e,t,this.getAttribute(n));return r&&function(e){this.setAttribute(n,r(e))}}function r(e,t){var r=a.call(this,e,t,this.getAttributeNS(n.space,n.local));return r&&function(e){this.setAttributeNS(n.space,n.local,r(e))}}return this.tween("attr."+e,n.local?r:t)};El.style=function(a,e,n){var t=arguments.length;if(t<3){if(typeof a!=="string"){if(t<2)e="";for(n in a)this.style(n,a[n],e);return this}n=""}function i(){this.style.removeProperty(a)}function r(r){return r==null?i:(r+="",function(){var e=N(this).getComputedStyle(this,null).getPropertyValue(a),t;return e!==r&&(t=Ti(e,r),function(e){this.style.setProperty(a,t(e),n)})})}return Ol(this,"style."+a,e,r)};El.styleTween=function(a,n,i){if(arguments.length<3)i="";function e(e,t){var r=n.call(this,e,t,N(this).getComputedStyle(this,null).getPropertyValue(a));return r&&function(e){this.style.setProperty(a,r(e),i)}}return this.tween("style."+a,e)};El.text=function(e){return Ol(this,"text",e,Il)};function Il(e){if(e==null)e="";return function(){this.textContent=e}}El.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;if(this[t].count<2&&(e=this.parentNode))e.removeChild(this)})};El.ease=function(t){var r=this.id,a=this.namespace;if(arguments.length<1)return this.node()[a][r].ease;if(typeof t!=="function")t=P.ease.apply(P,arguments);return fe(this,function(e){e[a][r].ease=t})};El.delay=function(a){var n=this.id,i=this.namespace;if(arguments.length<1)return this.node()[i][n].delay;return fe(this,typeof a==="function"?function(e,t,r){e[i][n].delay=+a.call(e,e.__data__,t,r)}:(a=+a,function(e){e[i][n].delay=a}))};El.duration=function(a){var n=this.id,i=this.namespace;if(arguments.length<1)return this.node()[i][n].duration;return fe(this,typeof a==="function"?function(e,t,r){e[i][n].duration=Math.max(1,a.call(e,e.__data__,t,r))}:(a=Math.max(1,a),function(e){e[i][n].duration=a}))};El.each=function(a,r){var n=this.id,i=this.namespace;if(arguments.length<2){var e=Dl,t=Cl;try{Cl=n;fe(this,function(e,t,r){Dl=e[i][n];a.call(e,e.__data__,t,r)})}finally{Dl=e;Cl=t}}else{fe(this,function(e){var t=e[i][n];(t.event||(t.event=P.dispatch("start","end","interrupt"))).on(a,r)})}return this};El.transition=function(){var e=this.id,t=++Ll,r=this.namespace,a=[],n,i,o,s;for(var l=0,u=this.length;l<u;l++){a.push(n=[]);for(var i=this[l],c=0,f=i.length;c<f;c++){if(o=i[c]){s=o[r][e];Rl(o,c,r,t,{time:s.time,ease:s.ease,delay:s.delay+s.duration,duration:s.duration})}n.push(o)}}return Sl(a,r,t)};function Pl(e){return e==null?"__transition__":"__transition_"+e+"__"}function Rl(i,o,n,s,e){var l=i[n]||(i[n]={active:0,count:0}),u=l[s],c,f,d,v,p;function t(e){var t=u.delay;f.t=t+c;if(t<=e)return r(e-t);f.c=r}function r(e){var t=l.active,r=l[t];if(r){r.timer.c=null;r.timer.t=NaN;--l.count;delete l[t];r.event&&r.event.interrupt.call(i,i.__data__,r.index)}for(var a in l){if(+a<s){var n=l[a];n.timer.c=null;n.timer.t=NaN;--l.count;delete l[a]}}f.c=h;Ot(function(){if(f.c&&h(e||1)){f.c=null;f.t=NaN}return 1},0,c);l.active=s;u.event&&u.event.start.call(i,i.__data__,o);p=[];u.tween.forEach(function(e,t){if(t=t.call(i,i.__data__,o)){p.push(t)}});v=u.ease;d=u.duration}function h(e){var t=e/d,r=v(t),a=p.length;while(a>0){p[--a].call(i,r)}if(t>=1){u.event&&u.event.end.call(i,i.__data__,o);if(--l.count)delete l[s];else delete i[n];return 1}}if(!u){c=e.time;f=Ot(t,0,c);u=l[s]={tween:new y,time:c,timer:f,delay:e.delay,duration:e.duration,ease:e.ease,index:o};e=null;++l.count}}P.svg.axis=function(){var A=P.scale.linear(),S=Nl,E=6,L=6,C=3,D=[10],O=null,I;function r(e){e.each(function(){var e=P.select(this);var t=this.__chart__||A,r=this.__chart__=A.copy();var a=O==null?r.ticks?r.ticks.apply(r,D):r.domain():O,n=I==null?r.tickFormat?r.tickFormat.apply(r,D):z:I,i=e.selectAll(".tick").data(a,r),o=i.enter().insert("g",".domain").attr("class","tick").style("opacity",Me),s=P.transition(i.exit()).style("opacity",Me).remove(),l=P.transition(i.order()).style("opacity",1),u=Math.max(E,0)+C,c;var f=is(r),d=e.selectAll(".domain").data([0]),v=(d.enter().append("path").attr("class","domain"),P.transition(d));o.append("line");o.append("text");var p=o.select("line"),h=l.select("line"),m=i.select("text").text(n),g=o.select("text"),y=l.select("text"),x=S==="top"||S==="left"?-1:1,b,_,w,T;if(S==="bottom"||S==="top"){c=Fl,b="x",w="y",_="x2",T="y2";m.attr("dy",x<0?"0em":".71em").style("text-anchor","middle");v.attr("d","M"+f[0]+","+x*L+"V0H"+f[1]+"V"+x*L)}else{c=jl,b="y",w="x",_="y2",T="x2";m.attr("dy",".32em").style("text-anchor",x<0?"end":"start");v.attr("d","M"+x*L+","+f[0]+"H0V"+f[1]+"H"+x*L)}p.attr(T,x*E);g.attr(w,x*u);h.attr(_,0).attr(T,x*E);y.attr(b,0).attr(w,x*u);if(r.rangeBand){var k=r,M=k.rangeBand()/2;t=r=function(e){return k(e)+M}}else if(t.rangeBand){t=r}else{s.call(c,r,t)}o.call(c,t,r);l.call(c,r,r)})}r.scale=function(e){if(!arguments.length)return A;A=e;return r};r.orient=function(e){if(!arguments.length)return S;S=e in zl?e+"":Nl;return r};r.ticks=function(){if(!arguments.length)return D;D=f(arguments);return r};r.tickValues=function(e){if(!arguments.length)return O;O=e;return r};r.tickFormat=function(e){if(!arguments.length)return I;I=e;return r};r.tickSize=function(e){var t=arguments.length;if(!t)return E;E=+e;L=+arguments[t-1];return r};r.innerTickSize=function(e){if(!arguments.length)return E;E=+e;return r};r.outerTickSize=function(e){if(!arguments.length)return L;L=+e;return r};r.tickPadding=function(e){if(!arguments.length)return C;C=+e;return r};r.tickSubdivide=function(){return arguments.length&&r};return r};var Nl="bottom",zl={top:1,right:1,bottom:1,left:1};function Fl(e,r,a){e.attr("transform",function(e){var t=r(e);return"translate("+(isFinite(t)?t:a(e))+",0)"})}function jl(e,r,a){e.attr("transform",function(e){var t=r(e);return"translate(0,"+(isFinite(t)?t:a(e))+")"})}P.svg.brush=function(){var b=H(L,"brushstart","brush","brushend"),_=null,w=null,T=[0,0],k=[0,0],M,A,S=true,E=true,o=Bl[0];function L(e){e.each(function(){var e=P.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",s).on("touchstart.brush",s);var t=e.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var r=e.selectAll(".resize").data(o,z);r.exit().remove();r.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Hl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");r.style("display",L.empty()?"none":null);var a=P.transition(e),n=P.transition(t),i;if(_){i=is(_);n.attr("x",i[0]).attr("width",i[1]-i[0]);D(a)}if(w){i=is(w);n.attr("y",i[0]).attr("height",i[1]-i[0]);O(a)}C(a)})}L.event=function(e){e.each(function(){var a=b.of(this,arguments),n={x:T,y:k,i:M,j:A},e=this.__chart__||n;this.__chart__=n;if(Cl){P.select(this).transition().each("start.brush",function(){M=e.i;A=e.j;T=e.x;k=e.y;a({type:"brushstart"})}).tween("brush:brush",function(){var t=ki(T,n.x),r=ki(k,n.y);M=A=null;return function(e){T=n.x=t(e);k=n.y=r(e);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){M=n.i;A=n.j;a({type:"brush",mode:"resize"});a({type:"brushend"})})}else{a({type:"brushstart"});a({type:"brush",mode:"resize"});a({type:"brushend"})}})};function C(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+T[+/e$/.test(e)]+","+k[+/^s/.test(e)]+")"})}function D(e){e.select(".extent").attr("x",T[0]);e.selectAll(".extent,.n>rect,.s>rect").attr("width",T[1]-T[0])}function O(e){e.select(".extent").attr("y",k[0]);e.selectAll(".extent,.e>rect,.w>rect").attr("height",k[1]-k[0])}function s(){var r=this,e=P.select(P.event.target),a=b.of(r,arguments),n=P.select(r),t=e.datum(),i=!/^(n|s)$/.test(t)&&_,o=!/^(e|w)$/.test(t)&&w,f=e.classed("extent"),s=_e(r),d,v=P.mouse(r),l;var u=P.select(N(r)).on("keydown.brush",h).on("keyup.brush",m);if(P.event.changedTouches){u.on("touchmove.brush",g).on("touchend.brush",x)}else{u.on("mousemove.brush",g).on("mouseup.brush",x)}n.interrupt().selectAll("*").interrupt();if(f){v[0]=T[0]-v[0];v[1]=k[0]-v[1]}else if(t){var c=+/w$/.test(t),p=+/^n/.test(t);l=[T[1-c]-v[0],k[1-p]-v[1]];v[0]=T[c];v[1]=k[p]}else if(P.event.altKey)d=v.slice();n.style("pointer-events","none").selectAll(".resize").style("display",null);P.select("body").style("cursor",e.style("cursor"));a({type:"brushstart"});g();function h(){if(P.event.keyCode==32){if(!f){d=null;v[0]-=T[1];v[1]-=k[1];f=2}F()}}function m(){if(P.event.keyCode==32&&f==2){v[0]+=T[1];v[1]+=k[1];f=0;F()}}function g(){var e=P.mouse(r),t=false;if(l){e[0]+=l[0];e[1]+=l[1]}if(!f){if(P.event.altKey){if(!d)d=[(T[0]+T[1])/2,(k[0]+k[1])/2];v[0]=T[+(e[0]<d[0])];v[1]=k[+(e[1]<d[1])]}else d=null}if(i&&y(e,_,0)){D(n);t=true}if(o&&y(e,w,1)){O(n);t=true}if(t){C(n);a({type:"brush",mode:f?"move":"resize"})}}function y(e,t,r){var a=is(t),n=a[0],i=a[1],o=v[r],s=r?k:T,l=s[1]-s[0],u,c;if(f){n-=o;i-=l+o}u=(r?E:S)?Math.max(n,Math.min(i,e[r])):e[r];if(f){c=(u+=o)+l}else{if(d)o=Math.max(n,Math.min(i,2*d[r]-u));if(o<u){c=u;u=o}else{c=o}}if(s[0]!=u||s[1]!=c){if(r)A=null;else M=null;s[0]=u;s[1]=c;return true}}function x(){g();n.style("pointer-events","all").selectAll(".resize").style("display",L.empty()?"none":null);P.select("body").style("cursor",null);u.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);s();a({type:"brushend"})}}L.x=function(e){if(!arguments.length)return _;_=e;o=Bl[!_<<1|!w];return L};L.y=function(e){if(!arguments.length)return w;w=e;o=Bl[!_<<1|!w];return L};L.clamp=function(e){if(!arguments.length)return _&&w?[S,E]:_?S:w?E:null;if(_&&w)S=!!e[0],E=!!e[1];else if(_)S=!!e;else if(w)E=!!e;return L};L.extent=function(e){var t,r,a,n,i;if(!arguments.length){if(_){if(M){t=M[0],r=M[1]}else{t=T[0],r=T[1];if(_.invert)t=_.invert(t),r=_.invert(r);if(r<t)i=t,t=r,r=i}}if(w){if(A){a=A[0],n=A[1]}else{a=k[0],n=k[1];if(w.invert)a=w.invert(a),n=w.invert(n);if(n<a)i=a,a=n,n=i}}return _&&w?[[t,a],[r,n]]:_?[t,r]:w&&[a,n]}if(_){t=e[0],r=e[1];if(w)t=t[0],r=r[0];M=[t,r];if(_.invert)t=_(t),r=_(r);if(r<t)i=t,t=r,r=i;if(t!=T[0]||r!=T[1])T=[t,r]}if(w){a=e[0],n=e[1];if(_)a=a[1],n=n[1];A=[a,n];if(w.invert)a=w(a),n=w(n);if(n<a)i=a,a=n,n=i;if(a!=k[0]||n!=k[1])k=[a,n]}return L};L.clear=function(){if(!L.empty()){T=[0,0],k=[0,0];M=A=null}return L};L.empty=function(){return!!_&&T[0]==T[1]||!!w&&k[0]==k[1]};return P.rebind(L,b,"on")};var Hl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var Bl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];var ql=Ut.format=xr.timeFormat;var Ul=ql.utc;var Yl=Ul("%Y-%m-%dT%H:%M:%S.%LZ");ql.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Vl:Yl;function Vl(e){return e.toISOString()}Vl.parse=function(e){var t=new Date(e);return isNaN(t)?null:t};Vl.toString=Yl.toString;Ut.second=Wt(function(e){return new Yt(Math.floor(e/1e3)*1e3)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*1e3)},function(e){return e.getSeconds()});Ut.seconds=Ut.second.range;Ut.seconds.utc=Ut.second.utc.range;Ut.minute=Wt(function(e){return new Yt(Math.floor(e/6e4)*6e4)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*6e4)},function(e){return e.getMinutes()});Ut.minutes=Ut.minute.range;Ut.minutes.utc=Ut.minute.utc.range;Ut.hour=Wt(function(e){var t=e.getTimezoneOffset()/60;return new Yt((Math.floor(e/36e5-t)+t)*36e5)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*36e5)},function(e){return e.getHours()});Ut.hours=Ut.hour.range;Ut.hours.utc=Ut.hour.utc.range;Ut.month=Wt(function(e){e=Ut.day(e);e.setDate(1);return e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()});Ut.months=Ut.month.range;Ut.months.utc=Ut.month.utc.range;function Gl(t,i,e){function o(e){return t(e)}o.invert=function(e){return Wl(t.invert(e))};o.domain=function(e){if(!arguments.length)return t.domain().map(Wl);t.domain(e);return o};function s(e,t){var r=e[1]-e[0],a=r/t,n=P.bisect($l,a);return n==$l.length?[i.year,ps(e.map(function(e){return e/31536e6}),t)[2]]:!n?[Jl,ps(e,t)[2]]:i[a/$l[n-1]<$l[n]/a?n-1:n]}o.nice=function(t,r){var e=o.domain(),a=ns(e),n=t==null?s(a,10):typeof t==="number"&&s(a,t);if(n)t=n[0],r=n[1];function i(e){return!isNaN(e)&&!t.range(e,Wl(+e+1),r).length}return o.domain(ss(e,r>1?{floor:function(e){while(i(e=t.floor(e)))e=Wl(e-1);return e},ceil:function(e){while(i(e=t.ceil(e)))e=Wl(+e+1);return e}}:t))};o.ticks=function(e,t){var r=ns(o.domain()),a=e==null?s(r,10):typeof e==="number"?s(r,e):!e.range&&[{range:e},t];if(a)e=a[0],t=a[1];return e.range(r[0],Wl(+r[1]+1),t<1?1:t)};o.tickFormat=function(){return e};o.copy=function(){return Gl(t.copy(),i,e)};return ds(o,t)}function Wl(e){return new Date(e)}var $l=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6];var Zl=[[Ut.second,1],[Ut.second,5],[Ut.second,15],[Ut.second,30],[Ut.minute,1],[Ut.minute,5],[Ut.minute,15],[Ut.minute,30],[Ut.hour,1],[Ut.hour,3],[Ut.hour,6],[Ut.hour,12],[Ut.day,1],[Ut.day,2],[Ut.week,1],[Ut.month,1],[Ut.month,3],[Ut.year,1]];var Xl=ql.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&e.getDate()!=1}],["%b %d",function(e){return e.getDate()!=1}],["%B",function(e){return e.getMonth()}],["%Y",na]]);var Jl={range:function(e,t,r){return P.range(Math.ceil(e/r)*r,+t,r).map(Wl)},floor:z,ceil:z};Zl.year=Ut.year;Ut.scale=function(){return Gl(P.scale.linear(),Zl,Xl)};var Kl=Zl.map(function(e){return[e[0].utc,e[1]]});var Ql=Ul.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],["%b %d",function(e){return e.getUTCDate()!=1}],["%B",function(e){return e.getUTCMonth()}],["%Y",na]]);Kl.year=Ut.year.utc;Ut.scale.utc=function(){return Gl(P.scale.linear(),Kl,Ql)};P.text=Tt(function(e){return e.responseText});P.json=function(e,t){return kt(e,"application/json",eu,t)};function eu(e){return JSON.parse(e.responseText)}P.html=function(e,t){return kt(e,"text/html",tu,t)};function tu(e){var t=R.createRange();t.selectNode(R.body);return t.createContextualFragment(e.responseText)}P.xml=Tt(function(e){return e.responseXML});if(typeof au==="function"&&au.amd)this.d3=P,au(P);else if(typeof ru==="object"&&ru.exports)ru.exports=P;else this.d3=P}.apply(self)},{}],12:[function(e,t,r){"use strict";var a=typeof Reflect==="object"?Reflect:null;var f=a&&typeof a.apply==="function"?a.apply:function e(t,r,a){return Function.prototype.apply.call(t,r,a)};var n;if(a&&typeof a.ownKeys==="function"){n=a.ownKeys}else if(Object.getOwnPropertySymbols){n=function e(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}}else{n=function e(t){return Object.getOwnPropertyNames(t)}}function l(e){if(console&&console.warn)console.warn(e)}var i=Number.isNaN||function e(t){return t!==t};function o(){o.init.call(this)}t.exports=o;t.exports.once=b;o.EventEmitter=o;o.prototype._events=undefined;o.prototype._eventsCount=0;o.prototype._maxListeners=undefined;var s=10;function u(e){if(typeof e!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:true,get:function(){return s},set:function(e){if(typeof e!=="number"||e<0||i(e)){throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".")}s=e}});o.init=function(){if(this._events===undefined||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};o.prototype.setMaxListeners=function e(t){if(typeof t!=="number"||t<0||i(t)){throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".")}this._maxListeners=t;return this};function c(e){if(e._maxListeners===undefined)return o.defaultMaxListeners;return e._maxListeners}o.prototype.getMaxListeners=function e(){return c(this)};o.prototype.emit=function e(t){var r=[];for(var a=1;a<arguments.length;a++)r.push(arguments[a]);var n=t==="error";var i=this._events;if(i!==undefined)n=n&&i.error===undefined;else if(!n)return false;if(n){var o;if(r.length>0)o=r[0];if(o instanceof Error){throw o}var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));s.context=o;throw s}var l=i[t];if(l===undefined)return false;if(typeof l==="function"){f(l,this,r)}else{var u=l.length;var c=g(l,u);for(var a=0;a<u;++a)f(c[a],this,r)}return true};function d(e,t,r,a){var n;var i;var o;u(r);i=e._events;if(i===undefined){i=e._events=Object.create(null);e._eventsCount=0}else{if(i.newListener!==undefined){e.emit("newListener",t,r.listener?r.listener:r);i=e._events}o=i[t]}if(o===undefined){o=i[t]=r;++e._eventsCount}else{if(typeof o==="function"){o=i[t]=a?[r,o]:[o,r]}else if(a){o.unshift(r)}else{o.push(r)}n=c(e);if(n>0&&o.length>n&&!o.warned){o.warned=true;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners "+"added. Use emitter.setMaxListeners() to "+"increase limit");s.name="MaxListenersExceededWarning";s.emitter=e;s.type=t;s.count=o.length;l(s)}}return e}o.prototype.addListener=function e(t,r){return d(this,t,r,false)};o.prototype.on=o.prototype.addListener;o.prototype.prependListener=function e(t,r){return d(this,t,r,true)};function v(){if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;if(arguments.length===0)return this.listener.call(this.target);return this.listener.apply(this.target,arguments)}}function p(e,t,r){var a={fired:false,wrapFn:undefined,target:e,type:t,listener:r};var n=v.bind(a);n.listener=r;a.wrapFn=n;return n}o.prototype.once=function e(t,r){u(r);this.on(t,p(this,t,r));return this};o.prototype.prependOnceListener=function e(t,r){u(r);this.prependListener(t,p(this,t,r));return this};o.prototype.removeListener=function e(t,r){var a,n,i,o,s;u(r);n=this._events;if(n===undefined)return this;a=n[t];if(a===undefined)return this;if(a===r||a.listener===r){if(--this._eventsCount===0)this._events=Object.create(null);else{delete n[t];if(n.removeListener)this.emit("removeListener",t,a.listener||r)}}else if(typeof a!=="function"){i=-1;for(o=a.length-1;o>=0;o--){if(a[o]===r||a[o].listener===r){s=a[o].listener;i=o;break}}if(i<0)return this;if(i===0)a.shift();else{y(a,i)}if(a.length===1)n[t]=a[0];if(n.removeListener!==undefined)this.emit("removeListener",t,s||r)}return this};o.prototype.off=o.prototype.removeListener;o.prototype.removeAllListeners=function e(t){var r,a,n;a=this._events;if(a===undefined)return this;if(a.removeListener===undefined){if(arguments.length===0){this._events=Object.create(null);this._eventsCount=0}else if(a[t]!==undefined){if(--this._eventsCount===0)this._events=Object.create(null);else delete a[t]}return this}if(arguments.length===0){var i=Object.keys(a);var o;for(n=0;n<i.length;++n){o=i[n];if(o==="removeListener")continue;this.removeAllListeners(o)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}r=a[t];if(typeof r==="function"){this.removeListener(t,r)}else if(r!==undefined){for(n=r.length-1;n>=0;n--){this.removeListener(t,r[n])}}return this};function h(e,t,r){var a=e._events;if(a===undefined)return[];var n=a[t];if(n===undefined)return[];if(typeof n==="function")return r?[n.listener||n]:[n];return r?x(n):g(n,n.length)}o.prototype.listeners=function e(t){return h(this,t,true)};o.prototype.rawListeners=function e(t){return h(this,t,false)};o.listenerCount=function(e,t){if(typeof e.listenerCount==="function"){return e.listenerCount(t)}else{return m.call(e,t)}};o.prototype.listenerCount=m;function m(e){var t=this._events;if(t!==undefined){var r=t[e];if(typeof r==="function"){return 1}else if(r!==undefined){return r.length}}return 0}o.prototype.eventNames=function e(){return this._eventsCount>0?n(this._events):[]};function g(e,t){var r=new Array(t);for(var a=0;a<t;++a)r[a]=e[a];return r}function y(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function x(e){var t=new Array(e.length);for(var r=0;r<t.length;++r){t[r]=e[r].listener||e[r]}return t}function b(n,i){return new Promise(function(e,r){function a(){if(t!==undefined){n.removeListener("error",t)}e([].slice.call(arguments))}var t;if(i!=="error"){t=function e(t){n.removeListener(i,a);r(t)};n.once("error",t)}n.once(i,a)})}},{}],13:[function(r,a,n){(function(e,t){typeof n==="object"&&typeof a!=="undefined"?t(n,r("d3-time")):typeof au==="function"&&au.amd?au(["exports","d3-time"],t):(e=e||self,t(e.d3=e.d3||{},e.d3))})(this,function(t,V){"use strict";function G(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);t.setFullYear(e.y);return t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function W(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));t.setUTCFullYear(e.y);return t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function $(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function r(e){var a=e.dateTime,n=e.date,i=e.time,t=e.periods,r=e.days,o=e.shortDays,s=e.months,l=e.shortMonths;var u=X(t),c=J(t),f=X(r),d=J(r),v=X(o),p=J(o),h=X(s),m=J(s),g=X(l),y=J(l);var x={a:I,A:P,b:R,B:N,c:null,d:ye,e:ye,f:Te,H:xe,I:be,j:_e,L:we,m:ke,M:Me,p:z,q:F,Q:Qe,s:et,S:Ae,u:Se,U:Ee,V:Le,w:Ce,W:De,x:null,X:null,y:Oe,Y:Ie,Z:Pe,"%":Ke};var b={a:j,A:H,b:B,B:q,c:null,d:Re,e:Re,f:He,H:Ne,I:ze,j:Fe,L:je,m:Be,M:qe,p:U,q:Y,Q:Qe,s:et,S:Ue,u:Ye,U:Ve,V:Ge,w:We,W:$e,x:null,X:null,y:Ze,Y:Xe,Z:Je,"%":Ke};var _={a:A,A:S,b:E,B:L,c:C,d:le,e:le,f:pe,H:ce,I:ce,j:ue,L:ve,m:se,M:fe,p:M,q:oe,Q:me,s:ge,S:de,u:Q,U:ee,V:te,w:K,W:re,x:D,X:O,y:ne,Y:ae,Z:ie,"%":he};x.x=w(n,x);x.X=w(i,x);x.c=w(a,x);b.x=w(n,b);b.X=w(i,b);b.c=w(a,b);function w(l,u){return function(e){var t=[],r=-1,a=0,n=l.length,i,o,s;if(!(e instanceof Date))e=new Date(+e);while(++r<n){if(l.charCodeAt(r)===37){t.push(l.slice(a,r));if((o=Z[i=l.charAt(++r)])!=null)i=l.charAt(++r);else o=i==="e"?" ":"0";if(s=u[i])i=s(e,o);t.push(i);a=r+1}}t.push(l.slice(a,r));return t.join("")}}function T(i,o){return function(e){var t=$(1900,undefined,1),r=k(t,i,e+="",0),a,n;if(r!=e.length)return null;if("Q"in t)return new Date(t.Q);if("s"in t)return new Date(t.s*1e3+("L"in t?t.L:0));if(o&&!("Z"in t))t.Z=0;if("p"in t)t.H=t.H%12+t.p*12;if(t.m===undefined)t.m="q"in t?t.q:0;if("V"in t){if(t.V<1||t.V>53)return null;if(!("w"in t))t.w=1;if("Z"in t){a=W($(t.y,0,1)),n=a.getUTCDay();a=n>4||n===0?V.utcMonday.ceil(a):V.utcMonday(a);a=V.utcDay.offset(a,(t.V-1)*7);t.y=a.getUTCFullYear();t.m=a.getUTCMonth();t.d=a.getUTCDate()+(t.w+6)%7}else{a=G($(t.y,0,1)),n=a.getDay();a=n>4||n===0?V.timeMonday.ceil(a):V.timeMonday(a);a=V.timeDay.offset(a,(t.V-1)*7);t.y=a.getFullYear();t.m=a.getMonth();t.d=a.getDate()+(t.w+6)%7}}else if("W"in t||"U"in t){if(!("w"in t))t.w="u"in t?t.u%7:"W"in t?1:0;n="Z"in t?W($(t.y,0,1)).getUTCDay():G($(t.y,0,1)).getDay();t.m=0;t.d="W"in t?(t.w+6)%7+t.W*7-(n+5)%7:t.w+t.U*7-(n+6)%7}if("Z"in t){t.H+=t.Z/100|0;t.M+=t.Z%100;return W(t)}return G(t)}}function k(e,t,r,a){var n=0,i=t.length,o=r.length,s,l;while(n<i){if(a>=o)return-1;s=t.charCodeAt(n++);if(s===37){s=t.charAt(n++);l=_[s in Z?t.charAt(n++):s];if(!l||(a=l(e,r,a))<0)return-1}else if(s!=r.charCodeAt(a++)){return-1}}return a}function M(e,t,r){var a=u.exec(t.slice(r));return a?(e.p=c[a[0].toLowerCase()],r+a[0].length):-1}function A(e,t,r){var a=v.exec(t.slice(r));return a?(e.w=p[a[0].toLowerCase()],r+a[0].length):-1}function S(e,t,r){var a=f.exec(t.slice(r));return a?(e.w=d[a[0].toLowerCase()],r+a[0].length):-1}function E(e,t,r){var a=g.exec(t.slice(r));return a?(e.m=y[a[0].toLowerCase()],r+a[0].length):-1}function L(e,t,r){var a=h.exec(t.slice(r));return a?(e.m=m[a[0].toLowerCase()],r+a[0].length):-1}function C(e,t,r){return k(e,a,t,r)}function D(e,t,r){return k(e,n,t,r)}function O(e,t,r){return k(e,i,t,r)}function I(e){return o[e.getDay()]}function P(e){return r[e.getDay()]}function R(e){return l[e.getMonth()]}function N(e){return s[e.getMonth()]}function z(e){return t[+(e.getHours()>=12)]}function F(e){return 1+~~(e.getMonth()/3)}function j(e){return o[e.getUTCDay()]}function H(e){return r[e.getUTCDay()]}function B(e){return l[e.getUTCMonth()]}function q(e){return s[e.getUTCMonth()]}function U(e){return t[+(e.getUTCHours()>=12)]}function Y(e){return 1+~~(e.getUTCMonth()/3)}return{format:function(e){var t=w(e+="",x);t.toString=function(){return e};return t},parse:function(e){var t=T(e+="",false);t.toString=function(){return e};return t},utcFormat:function(e){var t=w(e+="",b);t.toString=function(){return e};return t},utcParse:function(e){var t=T(e+="",true);t.toString=function(){return e};return t}}}var Z={"-":"",_:" ",0:"0"},n=/^\s*\d+/,i=/^%/,a=/[\\^$*+?|[\]().{}]/g;function o(e,t,r){var a=e<0?"-":"",n=(a?-e:e)+"",i=n.length;return a+(i<r?new Array(r-i+1).join(t)+n:n)}function s(e){return e.replace(a,"\\$&")}function X(e){return new RegExp("^(?:"+e.map(s).join("|")+")","i")}function J(e){var t={},r=-1,a=e.length;while(++r<a)t[e[r].toLowerCase()]=r;return t}function K(e,t,r){var a=n.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function Q(e,t,r){var a=n.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function ee(e,t,r){var a=n.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function te(e,t,r){var a=n.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function re(e,t,r){var a=n.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function ae(e,t,r){var a=n.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function ne(e,t,r){var a=n.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function ie(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function oe(e,t,r){var a=n.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function se(e,t,r){var a=n.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function le(e,t,r){var a=n.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function ue(e,t,r){var a=n.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function ce(e,t,r){var a=n.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function fe(e,t,r){var a=n.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function de(e,t,r){var a=n.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function ve(e,t,r){var a=n.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function pe(e,t,r){var a=n.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function he(e,t,r){var a=i.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function me(e,t,r){var a=n.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function ge(e,t,r){var a=n.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function ye(e,t){return o(e.getDate(),t,2)}function xe(e,t){return o(e.getHours(),t,2)}function be(e,t){return o(e.getHours()%12||12,t,2)}function _e(e,t){return o(1+V.timeDay.count(V.timeYear(e),e),t,3)}function we(e,t){return o(e.getMilliseconds(),t,3)}function Te(e,t){return we(e,t)+"000"}function ke(e,t){return o(e.getMonth()+1,t,2)}function Me(e,t){return o(e.getMinutes(),t,2)}function Ae(e,t){return o(e.getSeconds(),t,2)}function Se(e){var t=e.getDay();return t===0?7:t}function Ee(e,t){return o(V.timeSunday.count(V.timeYear(e)-1,e),t,2)}function Le(e,t){var r=e.getDay();e=r>=4||r===0?V.timeThursday(e):V.timeThursday.ceil(e);return o(V.timeThursday.count(V.timeYear(e),e)+(V.timeYear(e).getDay()===4),t,2)}function Ce(e){return e.getDay()}function De(e,t){return o(V.timeMonday.count(V.timeYear(e)-1,e),t,2)}function Oe(e,t){return o(e.getFullYear()%100,t,2)}function Ie(e,t){return o(e.getFullYear()%1e4,t,4)}function Pe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+o(t/60|0,"0",2)+o(t%60,"0",2)}function Re(e,t){return o(e.getUTCDate(),t,2)}function Ne(e,t){return o(e.getUTCHours(),t,2)}function ze(e,t){return o(e.getUTCHours()%12||12,t,2)}function Fe(e,t){return o(1+V.utcDay.count(V.utcYear(e),e),t,3)}function je(e,t){return o(e.getUTCMilliseconds(),t,3)}function He(e,t){return je(e,t)+"000"}function Be(e,t){return o(e.getUTCMonth()+1,t,2)}function qe(e,t){return o(e.getUTCMinutes(),t,2)}function Ue(e,t){return o(e.getUTCSeconds(),t,2)}function Ye(e){var t=e.getUTCDay();return t===0?7:t}function Ve(e,t){return o(V.utcSunday.count(V.utcYear(e)-1,e),t,2)}function Ge(e,t){var r=e.getUTCDay();e=r>=4||r===0?V.utcThursday(e):V.utcThursday.ceil(e);return o(V.utcThursday.count(V.utcYear(e),e)+(V.utcYear(e).getUTCDay()===4),t,2)}function We(e){return e.getUTCDay()}function $e(e,t){return o(V.utcMonday.count(V.utcYear(e)-1,e),t,2)}function Ze(e,t){return o(e.getUTCFullYear()%100,t,2)}function Xe(e,t){return o(e.getUTCFullYear()%1e4,t,4)}function Je(){return"+0000"}function Ke(){return"%"}function Qe(e){return+e}function et(e){return Math.floor(+e/1e3)}var l;e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function e(e){l=r(e);t.timeFormat=l.format;t.timeParse=l.parse;t.utcFormat=l.utcFormat;t.utcParse=l.utcParse;return l}var u="%Y-%m-%dT%H:%M:%S.%LZ";function c(e){return e.toISOString()}var f=Date.prototype.toISOString?c:t.utcFormat(u);function d(e){var t=new Date(e);return isNaN(t)?null:t}var v=+new Date("2000-01-01T00:00:00.000Z")?d:t.utcParse(u);t.isoFormat=f;t.isoParse=v;t.timeFormatDefaultLocale=e;t.timeFormatLocale=r;Object.defineProperty(t,"__esModule",{value:true})})},{"d3-time":14}],14:[function(e,r,a){(function(e,t){typeof a==="object"&&typeof r!=="undefined"?t(a):typeof au==="function"&&au.amd?au(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(this,function(e){"use strict";var n=new Date,l=new Date;function u(i,o,r,a){function s(e){return i(e=arguments.length===0?new Date:new Date(+e)),e}s.floor=function(e){return i(e=new Date(+e)),e};s.ceil=function(e){return i(e=new Date(e-1)),o(e,1),i(e),e};s.round=function(e){var t=s(e),r=s.ceil(e);return e-t<r-e?t:r};s.offset=function(e,t){return o(e=new Date(+e),t==null?1:Math.floor(t)),e};s.range=function(e,t,r){var a=[],n;e=s.ceil(e);r=r==null?1:Math.floor(r);if(!(e<t)||!(r>0))return a;do{a.push(n=new Date(+e)),o(e,r),i(e)}while(n<e&&e<t);return a};s.filter=function(r){return u(function(e){if(e>=e)while(i(e),!r(e))e.setTime(e-1)},function(e,t){if(e>=e){if(t<0)while(++t<=0){while(o(e,-1),!r(e)){}}else while(--t>=0){while(o(e,+1),!r(e)){}}}})};if(r){s.count=function(e,t){n.setTime(+e),l.setTime(+t);i(n),i(l);return Math.floor(r(n,l))};s.every=function(t){t=Math.floor(t);return!isFinite(t)||!(t>0)?null:!(t>1)?s:s.filter(a?function(e){return a(e)%t===0}:function(e){return s.count(0,e)%t===0})}}return s}var t=u(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});t.every=function(r){r=Math.floor(r);if(!isFinite(r)||!(r>0))return null;if(!(r>1))return t;return u(function(e){e.setTime(Math.floor(e/r)*r)},function(e,t){e.setTime(+e+t*r)},function(e,t){return(t-e)/r})};var r=t.range;var a=1e3;var i=6e4;var o=36e5;var s=864e5;var c=6048e5;var f=u(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*a)},function(e,t){return(t-e)/a},function(e){return e.getUTCSeconds()});var d=f.range;var v=u(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*a)},function(e,t){e.setTime(+e+t*i)},function(e,t){return(t-e)/i},function(e){return e.getMinutes()});var p=v.range;var h=u(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*a-e.getMinutes()*i)},function(e,t){e.setTime(+e+t*o)},function(e,t){return(t-e)/o},function(e){return e.getHours()});var m=h.range;var g=u(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i)/s},function(e){return e.getDate()-1});var y=g.range;function x(t){return u(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7);e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i)/c})}var b=x(0);var _=x(1);var w=x(2);var T=x(3);var k=x(4);var M=x(5);var A=x(6);var S=b.range;var E=_.range;var L=w.range;var C=T.range;var D=k.range;var O=M.range;var I=A.range;var P=u(function(e){e.setDate(1);e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});var R=P.range;var N=u(function(e){e.setMonth(0,1);e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});N.every=function(r){return!isFinite(r=Math.floor(r))||!(r>0)?null:u(function(e){e.setFullYear(Math.floor(e.getFullYear()/r)*r);e.setMonth(0,1);e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*r)})};var z=N.range;var F=u(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*i)},function(e,t){return(t-e)/i},function(e){return e.getUTCMinutes()});var j=F.range;var H=u(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*o)},function(e,t){return(t-e)/o},function(e){return e.getUTCHours()});var B=H.range;var q=u(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/s},function(e){return e.getUTCDate()-1});var U=q.range;function Y(t){return u(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/c})}var V=Y(0);var G=Y(1);var W=Y(2);var $=Y(3);var Z=Y(4);var X=Y(5);var J=Y(6);var K=V.range;var Q=G.range;var ee=W.range;var te=$.range;var re=Z.range;var ae=X.range;var ne=J.range;var ie=u(function(e){e.setUTCDate(1);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()});var oe=ie.range;var se=u(function(e){e.setUTCMonth(0,1);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});se.every=function(r){return!isFinite(r=Math.floor(r))||!(r>0)?null:u(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/r)*r);e.setUTCMonth(0,1);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*r)})};var le=se.range;e.timeDay=g;e.timeDays=y;e.timeFriday=M;e.timeFridays=O;e.timeHour=h;e.timeHours=m;e.timeInterval=u;e.timeMillisecond=t;e.timeMilliseconds=r;e.timeMinute=v;e.timeMinutes=p;e.timeMonday=_;e.timeMondays=E;e.timeMonth=P;e.timeMonths=R;e.timeSaturday=A;e.timeSaturdays=I;e.timeSecond=f;e.timeSeconds=d;e.timeSunday=b;e.timeSundays=S;e.timeThursday=k;e.timeThursdays=D;e.timeTuesday=w;e.timeTuesdays=L;e.timeWednesday=T;e.timeWednesdays=C;e.timeWeek=b;e.timeWeeks=S;e.timeYear=N;e.timeYears=z;e.utcDay=q;e.utcDays=U;e.utcFriday=X;e.utcFridays=ae;e.utcHour=H;e.utcHours=B;e.utcMillisecond=t;e.utcMilliseconds=r;e.utcMinute=F;e.utcMinutes=j;e.utcMonday=G;e.utcMondays=Q;e.utcMonth=ie;e.utcMonths=oe;e.utcSaturday=J;e.utcSaturdays=ne;e.utcSecond=f;e.utcSeconds=d;e.utcSunday=V;e.utcSundays=K;e.utcThursday=Z;e.utcThursdays=re;e.utcTuesday=W;e.utcTuesdays=ee;e.utcWednesday=$;e.utcWednesdays=te;e.utcWeek=V;e.utcWeeks=K;e.utcYear=se;e.utcYears=le;Object.defineProperty(e,"__esModule",{value:true})})},{}],15:[function(e,t,r){"use strict";var a=e("is-string-blank");t.exports=function(e){var t=typeof e;if(t==="string"){var r=e;e=+e;if(e===0&&a(r))return false}else if(t!=="number")return false;return e-e<1}},{"is-string-blank":50}],16:[function(e,t,r){t.exports=a;function a(e,t){var r=t[0],a=t[1],n=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],v=t[11],p=t[12],h=t[13],m=t[14],g=t[15];e[0]=s*(d*g-v*m)-f*(l*g-u*m)+h*(l*v-u*d);e[1]=-(a*(d*g-v*m)-f*(n*g-i*m)+h*(n*v-i*d));e[2]=a*(l*g-u*m)-s*(n*g-i*m)+h*(n*u-i*l);e[3]=-(a*(l*v-u*d)-s*(n*v-i*d)+f*(n*u-i*l));e[4]=-(o*(d*g-v*m)-c*(l*g-u*m)+p*(l*v-u*d));e[5]=r*(d*g-v*m)-c*(n*g-i*m)+p*(n*v-i*d);e[6]=-(r*(l*g-u*m)-o*(n*g-i*m)+p*(n*u-i*l));e[7]=r*(l*v-u*d)-o*(n*v-i*d)+c*(n*u-i*l);e[8]=o*(f*g-v*h)-c*(s*g-u*h)+p*(s*v-u*f);e[9]=-(r*(f*g-v*h)-c*(a*g-i*h)+p*(a*v-i*f));e[10]=r*(s*g-u*h)-o*(a*g-i*h)+p*(a*u-i*s);e[11]=-(r*(s*v-u*f)-o*(a*v-i*f)+c*(a*u-i*s));e[12]=-(o*(f*m-d*h)-c*(s*m-l*h)+p*(s*d-l*f));e[13]=r*(f*m-d*h)-c*(a*m-n*h)+p*(a*d-n*f);e[14]=-(r*(s*m-l*h)-o*(a*m-n*h)+p*(a*l-n*s));e[15]=r*(s*d-l*f)-o*(a*d-n*f)+c*(a*l-n*s);return e}},{}],17:[function(e,t,r){t.exports=a;function a(e){var t=new Float32Array(16);t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];return t}},{}],18:[function(e,t,r){t.exports=a;function a(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[4]=t[4];e[5]=t[5];e[6]=t[6];e[7]=t[7];e[8]=t[8];e[9]=t[9];e[10]=t[10];e[11]=t[11];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15];return e}},{}],19:[function(e,t,r){t.exports=a;function a(){var e=new Float32Array(16);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],20:[function(e,t,r){t.exports=a;function a(e){var t=e[0],r=e[1],a=e[2],n=e[3],i=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11],v=e[12],p=e[13],h=e[14],m=e[15],g=t*o-r*i,y=t*s-a*i,x=t*l-n*i,b=r*s-a*o,_=r*l-n*o,w=a*l-n*s,T=u*p-c*v,k=u*h-f*v,M=u*m-d*v,A=c*h-f*p,S=c*m-d*p,E=f*m-d*h;return g*E-y*S+x*A+b*M-_*k+w*T}},{}],21:[function(e,t,r){t.exports=a;function a(e,t){var r=t[0],a=t[1],n=t[2],i=t[3],o=r+r,s=a+a,l=n+n,u=r*o,c=a*o,f=a*s,d=n*o,v=n*s,p=n*l,h=i*o,m=i*s,g=i*l;e[0]=1-f-p;e[1]=c+g;e[2]=d-m;e[3]=0;e[4]=c-g;e[5]=1-u-p;e[6]=v+h;e[7]=0;e[8]=d+m;e[9]=v-h;e[10]=1-u-f;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],22:[function(e,t,r){t.exports=a;function a(e,t,r){var a,n,i;var o=r[0];var s=r[1];var l=r[2];var u=Math.sqrt(o*o+s*s+l*l);if(Math.abs(u)<1e-6){return null}u=1/u;o*=u;s*=u;l*=u;a=Math.sin(t);n=Math.cos(t);i=1-n;e[0]=o*o*i+n;e[1]=s*o*i+l*a;e[2]=l*o*i-s*a;e[3]=0;e[4]=o*s*i-l*a;e[5]=s*s*i+n;e[6]=l*s*i+o*a;e[7]=0;e[8]=o*l*i+s*a;e[9]=s*l*i-o*a;e[10]=l*l*i+n;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],23:[function(e,t,r){t.exports=a;function a(e,t,r){var a=t[0],n=t[1],i=t[2],o=t[3],s=a+a,l=n+n,u=i+i,c=a*s,f=a*l,d=a*u,v=n*l,p=n*u,h=i*u,m=o*s,g=o*l,y=o*u;e[0]=1-(v+h);e[1]=f+y;e[2]=d-g;e[3]=0;e[4]=f-y;e[5]=1-(c+h);e[6]=p+m;e[7]=0;e[8]=d+g;e[9]=p-m;e[10]=1-(c+v);e[11]=0;e[12]=r[0];e[13]=r[1];e[14]=r[2];e[15]=1;return e}},{}],24:[function(e,t,r){t.exports=a;function a(e,t){e[0]=t[0];e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=t[1];e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=t[2];e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],25:[function(e,t,r){t.exports=a;function a(e,t){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=t[0];e[13]=t[1];e[14]=t[2];e[15]=1;return e}},{}],26:[function(e,t,r){t.exports=a;function a(e,t){var r=Math.sin(t),a=Math.cos(t);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=a;e[6]=r;e[7]=0;e[8]=0;e[9]=-r;e[10]=a;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],27:[function(e,t,r){t.exports=a;function a(e,t){var r=Math.sin(t),a=Math.cos(t);e[0]=a;e[1]=0;e[2]=-r;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=r;e[9]=0;e[10]=a;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],28:[function(e,t,r){t.exports=a;function a(e,t){var r=Math.sin(t),a=Math.cos(t);e[0]=a;e[1]=r;e[2]=0;e[3]=0;e[4]=-r;e[5]=a;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],29:[function(e,t,r){t.exports=a;function a(e,t,r,a,n,i,o){var s=1/(r-t),l=1/(n-a),u=1/(i-o);e[0]=i*2*s;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=i*2*l;e[6]=0;e[7]=0;e[8]=(r+t)*s;e[9]=(n+a)*l;e[10]=(o+i)*u;e[11]=-1;e[12]=0;e[13]=0;e[14]=o*i*2*u;e[15]=0;return e}},{}],30:[function(e,t,r){t.exports=a;function a(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],31:[function(e,t,r){t.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":16,"./clone":17,"./copy":18,"./create":19,"./determinant":20,"./fromQuat":21,"./fromRotation":22,"./fromRotationTranslation":23,"./fromScaling":24,"./fromTranslation":25,"./fromXRotation":26,"./fromYRotation":27,"./fromZRotation":28,"./frustum":29,"./identity":30,"./invert":32,"./lookAt":33,"./multiply":34,"./ortho":35,"./perspective":36,"./perspectiveFromFieldOfView":37,"./rotate":38,"./rotateX":39,"./rotateY":40,"./rotateZ":41,"./scale":42,"./str":43,"./translate":44,"./transpose":45}],32:[function(e,t,r){t.exports=a;function a(e,t){var r=t[0],a=t[1],n=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],v=t[11],p=t[12],h=t[13],m=t[14],g=t[15],y=r*s-a*o,x=r*l-n*o,b=r*u-i*o,_=a*l-n*s,w=a*u-i*s,T=n*u-i*l,k=c*h-f*p,M=c*m-d*p,A=c*g-v*p,S=f*m-d*h,E=f*g-v*h,L=d*g-v*m,C=y*L-x*E+b*S+_*A-w*M+T*k;if(!C){return null}C=1/C;e[0]=(s*L-l*E+u*S)*C;e[1]=(n*E-a*L-i*S)*C;e[2]=(h*T-m*w+g*_)*C;e[3]=(d*w-f*T-v*_)*C;e[4]=(l*A-o*L-u*M)*C;e[5]=(r*L-n*A+i*M)*C;e[6]=(m*b-p*T-g*x)*C;e[7]=(c*T-d*b+v*x)*C;e[8]=(o*E-s*A+u*k)*C;e[9]=(a*A-r*E-i*k)*C;e[10]=(p*w-h*b+g*y)*C;e[11]=(f*b-c*w-v*y)*C;e[12]=(s*M-o*S-l*k)*C;e[13]=(r*S-a*M+n*k)*C;e[14]=(h*x-p*_-m*y)*C;e[15]=(c*_-f*x+d*y)*C;return e}},{}],33:[function(e,t,r){var T=e("./identity");t.exports=a;function a(e,t,r,a){var n,i,o,s,l,u,c,f,d,v,p=t[0],h=t[1],m=t[2],g=a[0],y=a[1],x=a[2],b=r[0],_=r[1],w=r[2];if(Math.abs(p-b)<1e-6&&Math.abs(h-_)<1e-6&&Math.abs(m-w)<1e-6){return T(e)}c=p-b;f=h-_;d=m-w;v=1/Math.sqrt(c*c+f*f+d*d);c*=v;f*=v;d*=v;n=y*d-x*f;i=x*c-g*d;o=g*f-y*c;v=Math.sqrt(n*n+i*i+o*o);if(!v){n=0;i=0;o=0}else{v=1/v;n*=v;i*=v;o*=v}s=f*o-d*i;l=d*n-c*o;u=c*i-f*n;v=Math.sqrt(s*s+l*l+u*u);if(!v){s=0;l=0;u=0}else{v=1/v;s*=v;l*=v;u*=v}e[0]=n;e[1]=s;e[2]=c;e[3]=0;e[4]=i;e[5]=l;e[6]=f;e[7]=0;e[8]=o;e[9]=u;e[10]=d;e[11]=0;e[12]=-(n*p+i*h+o*m);e[13]=-(s*p+l*h+u*m);e[14]=-(c*p+f*h+d*m);e[15]=1;return e}},{"./identity":30}],34:[function(e,t,r){t.exports=a;function a(e,t,r){var a=t[0],n=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],v=t[10],p=t[11],h=t[12],m=t[13],g=t[14],y=t[15];var x=r[0],b=r[1],_=r[2],w=r[3];e[0]=x*a+b*s+_*f+w*h;e[1]=x*n+b*l+_*d+w*m;e[2]=x*i+b*u+_*v+w*g;e[3]=x*o+b*c+_*p+w*y;x=r[4];b=r[5];_=r[6];w=r[7];e[4]=x*a+b*s+_*f+w*h;e[5]=x*n+b*l+_*d+w*m;e[6]=x*i+b*u+_*v+w*g;e[7]=x*o+b*c+_*p+w*y;x=r[8];b=r[9];_=r[10];w=r[11];e[8]=x*a+b*s+_*f+w*h;e[9]=x*n+b*l+_*d+w*m;e[10]=x*i+b*u+_*v+w*g;e[11]=x*o+b*c+_*p+w*y;x=r[12];b=r[13];_=r[14];w=r[15];e[12]=x*a+b*s+_*f+w*h;e[13]=x*n+b*l+_*d+w*m;e[14]=x*i+b*u+_*v+w*g;e[15]=x*o+b*c+_*p+w*y;return e}},{}],35:[function(e,t,r){t.exports=a;function a(e,t,r,a,n,i,o){var s=1/(t-r),l=1/(a-n),u=1/(i-o);e[0]=-2*s;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=-2*l;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=2*u;e[11]=0;e[12]=(t+r)*s;e[13]=(n+a)*l;e[14]=(o+i)*u;e[15]=1;return e}},{}],36:[function(e,t,r){t.exports=a;function a(e,t,r,a,n){var i=1/Math.tan(t/2),o=1/(a-n);e[0]=i/r;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=i;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=(n+a)*o;e[11]=-1;e[12]=0;e[13]=0;e[14]=2*n*a*o;e[15]=0;return e}},{}],37:[function(e,t,r){t.exports=a;function a(e,t,r,a){var n=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),u=2/(n+i);e[0]=l;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=u;e[6]=0;e[7]=0;e[8]=-((o-s)*l*.5);e[9]=(n-i)*u*.5;e[10]=a/(r-a);e[11]=-1;e[12]=0;e[13]=0;e[14]=a*r/(r-a);e[15]=0;return e}},{}],38:[function(e,t,r){t.exports=a;function a(e,t,r,a){var n=a[0],i=a[1],o=a[2],s=Math.sqrt(n*n+i*i+o*o),l,u,c,f,d,v,p,h,m,g,y,x,b,_,w,T,k,M,A,S,E,L,C,D;if(Math.abs(s)<1e-6){return null}s=1/s;n*=s;i*=s;o*=s;l=Math.sin(r);u=Math.cos(r);c=1-u;f=t[0];d=t[1];v=t[2];p=t[3];h=t[4];m=t[5];g=t[6];y=t[7];x=t[8];b=t[9];_=t[10];w=t[11];T=n*n*c+u;k=i*n*c+o*l;M=o*n*c-i*l;A=n*i*c-o*l;S=i*i*c+u;E=o*i*c+n*l;L=n*o*c+i*l;C=i*o*c-n*l;D=o*o*c+u;e[0]=f*T+h*k+x*M;e[1]=d*T+m*k+b*M;e[2]=v*T+g*k+_*M;e[3]=p*T+y*k+w*M;e[4]=f*A+h*S+x*E;e[5]=d*A+m*S+b*E;e[6]=v*A+g*S+_*E;e[7]=p*A+y*S+w*E;e[8]=f*L+h*C+x*D;e[9]=d*L+m*C+b*D;e[10]=v*L+g*C+_*D;e[11]=p*L+y*C+w*D;if(t!==e){e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}return e}},{}],39:[function(e,t,r){t.exports=a;function a(e,t,r){var a=Math.sin(r),n=Math.cos(r),i=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11];if(t!==e){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[4]=i*n+u*a;e[5]=o*n+c*a;e[6]=s*n+f*a;e[7]=l*n+d*a;e[8]=u*n-i*a;e[9]=c*n-o*a;e[10]=f*n-s*a;e[11]=d*n-l*a;return e}},{}],40:[function(e,t,r){t.exports=a;function a(e,t,r){var a=Math.sin(r),n=Math.cos(r),i=t[0],o=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],d=t[11];if(t!==e){e[4]=t[4];e[5]=t[5];e[6]=t[6];e[7]=t[7];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[0]=i*n-u*a;e[1]=o*n-c*a;e[2]=s*n-f*a;e[3]=l*n-d*a;e[8]=i*a+u*n;e[9]=o*a+c*n;e[10]=s*a+f*n;e[11]=l*a+d*n;return e}},{}],41:[function(e,t,r){t.exports=a;function a(e,t,r){var a=Math.sin(r),n=Math.cos(r),i=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],d=t[7];if(t!==e){e[8]=t[8];e[9]=t[9];e[10]=t[10];e[11]=t[11];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[0]=i*n+u*a;e[1]=o*n+c*a;e[2]=s*n+f*a;e[3]=l*n+d*a;e[4]=u*n-i*a;e[5]=c*n-o*a;e[6]=f*n-s*a;e[7]=d*n-l*a;return e}},{}],42:[function(e,t,r){t.exports=a;function a(e,t,r){var a=r[0],n=r[1],i=r[2];e[0]=t[0]*a;e[1]=t[1]*a;e[2]=t[2]*a;e[3]=t[3]*a;e[4]=t[4]*n;e[5]=t[5]*n;e[6]=t[6]*n;e[7]=t[7]*n;e[8]=t[8]*i;e[9]=t[9]*i;e[10]=t[10]*i;e[11]=t[11]*i;e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15];return e}},{}],43:[function(e,t,r){t.exports=a;function a(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},{}],44:[function(e,t,r){t.exports=a;function a(e,t,r){var a=r[0],n=r[1],i=r[2],o,s,l,u,c,f,d,v,p,h,m,g;if(t===e){e[12]=t[0]*a+t[4]*n+t[8]*i+t[12];e[13]=t[1]*a+t[5]*n+t[9]*i+t[13];e[14]=t[2]*a+t[6]*n+t[10]*i+t[14];e[15]=t[3]*a+t[7]*n+t[11]*i+t[15]}else{o=t[0];s=t[1];l=t[2];u=t[3];c=t[4];f=t[5];d=t[6];v=t[7];p=t[8];h=t[9];m=t[10];g=t[11];e[0]=o;e[1]=s;e[2]=l;e[3]=u;e[4]=c;e[5]=f;e[6]=d;e[7]=v;e[8]=p;e[9]=h;e[10]=m;e[11]=g;e[12]=o*a+c*n+p*i+t[12];e[13]=s*a+f*n+h*i+t[13];e[14]=l*a+d*n+m*i+t[14];e[15]=u*a+v*n+g*i+t[15]}return e}},{}],45:[function(e,t,r){t.exports=a;function a(e,t){if(e===t){var r=t[1],a=t[2],n=t[3],i=t[6],o=t[7],s=t[11];e[1]=t[4];e[2]=t[8];e[3]=t[12];e[4]=r;e[6]=t[9];e[7]=t[13];e[8]=a;e[9]=i;e[11]=t[14];e[12]=n;e[13]=o;e[14]=s}else{e[0]=t[0];e[1]=t[4];e[2]=t[8];e[3]=t[12];e[4]=t[1];e[5]=t[5];e[6]=t[9];e[7]=t[13];e[8]=t[2];e[9]=t[6];e[10]=t[10];e[11]=t[14];e[12]=t[3];e[13]=t[7];e[14]=t[11];e[15]=t[15]}return e}},{}],46:[function(a,n,e){(function(r){(function(){"use strict";var e=a("is-browser");var t;if(typeof r.matchMedia==="function"){t=!r.matchMedia("(hover: none)").matches}else{t=e}n.exports=t}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"is-browser":48}],47:[function(e,t,r){"use strict";var a=e("is-browser");function n(){var t=false;try{var e=Object.defineProperty({},"passive",{get:function(){t=true}});window.addEventListener("test",null,e);window.removeEventListener("test",null,e)}catch(e){t=false}return t}t.exports=a&&n()},{"is-browser":48}],48:[function(e,t,r){t.exports=true},{}],49:[function(e,t,r){"use strict";t.exports=i;t.exports.isMobile=i;t.exports.default=i;var a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i;var n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function i(e){if(!e)e={};var t=e.ua;if(!t&&typeof navigator!=="undefined")t=navigator.userAgent;if(t&&t.headers&&typeof t.headers["user-agent"]==="string"){t=t.headers["user-agent"]}if(typeof t!=="string")return false;var r=e.tablet?n.test(t):a.test(t);if(!r&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1){r=true}return r}},{}],50:[function(e,t,r){"use strict";t.exports=function(e){var t=e.length,r;for(var a=0;a<t;a++){r=e.charCodeAt(a);if((r<9||r>13)&&r!==32&&r!==133&&r!==160&&r!==5760&&r!==6158&&(r<8192||r>8205)&&r!==8232&&r!==8233&&r!==8239&&r!==8287&&r!==8288&&r!==12288&&r!==65279){return false}}return true}},{}],51:[function(e,t,r){var a={left:0,top:0};t.exports=n;function n(e,t,r){t=t||e.currentTarget||e.srcElement;if(!Array.isArray(r)){r=[0,0]}var a=e.clientX||0;var n=e.clientY||0;var i=o(t);r[0]=a-i.left;r[1]=n-i.top;return r}function o(e){if(e===window||e===document||e===document.body){return a}else{return e.getBoundingClientRect()}}},{}],52:[function(e,n,t){(function(e,g){(function(){(function e(t,r,a){r[t]=r[t]||a();if(typeof n!="undefined"&&n.exports){n.exports=r[t]}else if(typeof au=="function"&&au.amd){au(function e(){return r[t]})}})("Promise",typeof e!="undefined"?e:this,function e(){"use strict";var t,r,a,i=Object.prototype.toString,n=typeof g!="undefined"?function e(t){return g(t)}:setTimeout;try{Object.defineProperty({},"x",{});t=function e(t,r,a,n){return Object.defineProperty(t,r,{value:a,writable:true,configurable:n!==false})}}catch(e){t=function e(t,r,a){t[r]=a;return t}}a=function e(){var a,n,i;function o(e,t){this.fn=e;this.self=t;this.next=void 0}return{add:function e(t,r){i=new o(t,r);if(n){n.next=i}else{a=i}n=i;i=void 0},drain:function e(){var t=a;a=n=r=void 0;while(t){t.fn.call(t.self);t=t.next}}}}();function o(e,t){a.add(e,t);if(!r){r=n(a.drain)}}function s(e){var t,r=typeof e;if(e!=null&&(r=="object"||r=="function")){t=e.then}return typeof t=="function"?t:false}function l(){for(var e=0;e<this.chain.length;e++){u(this,this.state===1?this.chain[e].success:this.chain[e].failure,this.chain[e])}this.chain.length=0}function u(e,t,r){var a,n;try{if(t===false){r.reject(e.msg)}else{if(t===true){a=e.msg}else{a=t.call(void 0,e.msg)}if(a===r.promise){r.reject(TypeError("Promise-chain cycle"))}else if(n=s(a)){n.call(a,r.resolve,r.reject)}else{r.resolve(a)}}}catch(e){r.reject(e)}}function c(e){var r,a=this;if(a.triggered){return}a.triggered=true;if(a.def){a=a.def}try{if(r=s(e)){o(function(){var t=new v(a);try{r.call(e,function e(){c.apply(t,arguments)},function e(){f.apply(t,arguments)})}catch(e){f.call(t,e)}})}else{a.msg=e;a.state=1;if(a.chain.length>0){o(l,a)}}}catch(e){f.call(new v(a),e)}}function f(e){var t=this;if(t.triggered){return}t.triggered=true;if(t.def){t=t.def}t.msg=e;t.state=2;if(t.chain.length>0){o(l,t)}}function d(t,a,n,i){for(var e=0;e<a.length;e++){(function e(r){t.resolve(a[r]).then(function e(t){n(r,t)},i)})(e)}}function v(e){this.def=e;this.triggered=false}function p(e){this.promise=e;this.state=0;this.triggered=false;this.chain=[];this.msg=void 0}function h(e){if(typeof e!="function"){throw TypeError("Not a function")}if(this.__NPO__!==0){throw TypeError("Not a promise")}this.__NPO__=1;var n=new p(this);this["then"]=function e(t,r){var a={success:typeof t=="function"?t:true,failure:typeof r=="function"?r:false};a.promise=new this.constructor(function e(t,r){if(typeof t!="function"||typeof r!="function"){throw TypeError("Not a function")}a.resolve=t;a.reject=r});n.chain.push(a);if(n.state!==0){o(l,n)}return a.promise};this["catch"]=function e(t){return this.then(void 0,t)};try{e.call(void 0,function e(t){c.call(n,t)},function e(t){f.call(n,t)})}catch(e){f.call(n,e)}}var m=t({},"constructor",h,false);h.prototype=m;t(m,"__NPO__",0,false);t(h,"resolve",function e(a){var t=this;if(a&&typeof a=="object"&&a.__NPO__===1){return a}return new t(function e(t,r){if(typeof t!="function"||typeof r!="function"){throw TypeError("Not a function")}t(a)})});t(h,"reject",function e(a){return new this(function e(t,r){if(typeof t!="function"||typeof r!="function"){throw TypeError("Not a function")}r(a)})});t(h,"all",function e(r){var s=this;if(i.call(r)!="[object Array]"){return s.reject(TypeError("Not an array"))}if(r.length===0){return s.resolve([])}return new s(function e(a,t){if(typeof a!="function"||typeof t!="function"){throw TypeError("Not a function")}var n=r.length,i=Array(n),o=0;d(s,r,function e(t,r){i[t]=r;if(++o===n){a(i)}},t)})});t(h,"race",function e(r){var n=this;if(i.call(r)!="[object Array]"){return n.reject(TypeError("Not an array"))}return new n(function e(a,t){if(typeof a!="function"||typeof t!="function"){throw TypeError("Not a function")}d(n,r,function e(t,r){a(r)},t)})});return h})}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},e("timers").setImmediate)},{timers:64}],53:[function(e,t,r){"use strict";var l=Object.getOwnPropertySymbols;var u=Object.prototype.hasOwnProperty;var c=Object.prototype.propertyIsEnumerable;function f(e){if(e===null||e===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(e)}function a(){try{if(!Object.assign){return false}var e=new String("abc");e[5]="de";if(Object.getOwnPropertyNames(e)[0]==="5"){return false}var t={};for(var r=0;r<10;r++){t["_"+String.fromCharCode(r)]=r}var a=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if(a.join("")!=="0123456789"){return false}var n={};"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e});if(Object.keys(Object.assign({},n)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(e){return false}}t.exports=a()?Object.assign:function(e,t){var r;var a=f(e);var n;for(var i=1;i<arguments.length;i++){r=Object(arguments[i]);for(var o in r){if(u.call(r,o)){a[o]=r[o]}}if(l){n=l(r);for(var s=0;s<n.length;s++){if(c.call(r,n[s])){a[n[s]]=r[n[s]]}}}}return a}},{}],54:[function(e,t,r){t.exports=n;var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0};var a=/([astvzqmhlc])([^astvzqmhlc]*)/gi;function n(e){var n=[];e.replace(a,function(e,t,r){var a=t.toLowerCase();r=s(r);if(a=="m"&&r.length>2){n.push([t].concat(r.splice(0,2)));a="l";t=t=="m"?"l":"L"}while(true){if(r.length==i[a]){r.unshift(t);return n.push(r)}if(r.length<i[a])throw new Error("malformed path data");n.push([t].concat(r.splice(0,i[a])))}});return n}var o=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function s(e){var t=e.match(o);return t?t.map(Number):[]}},{}],55:[function(e,t,r){var a=e("./lib/build-log");var n=e("./lib/epsilon");var i=e("./lib/intersecter");var o=e("./lib/segment-chainer");var s=e("./lib/segment-selector");var l=e("./lib/geojson");var u=false;var c=n();var f;f={buildLog:function(e){if(e===true)u=a();else if(e===false)u=false;return u===false?false:u.list},epsilon:function(e){return c.epsilon(e)},segments:function(e){var t=i(true,c,u);e.regions.forEach(t.addRegion);return{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){var r=i(false,c,u);return{combined:r.calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:s.union(e.combined,u),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:s.intersect(e.combined,u),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:s.difference(e.combined,u),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:s.differenceRev(e.combined,u),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:s.xor(e.combined,u),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:o(e.segments,c,u),inverted:e.inverted}},polygonFromGeoJSON:function(e){return l.toPolygon(f,e)},polygonToGeoJSON:function(e){return l.fromPolygon(f,c,e)},union:function(e,t){return d(e,t,f.selectUnion)},intersect:function(e,t){return d(e,t,f.selectIntersect)},difference:function(e,t){return d(e,t,f.selectDifference)},differenceRev:function(e,t){return d(e,t,f.selectDifferenceRev)},xor:function(e,t){return d(e,t,f.selectXor)}};function d(e,t,r){var a=f.segments(e);var n=f.segments(t);var i=f.combine(a,n);var o=r(i);return f.polygon(o)}if(typeof window==="object")window.PolyBool=f;t.exports=f},{"./lib/build-log":56,"./lib/epsilon":57,"./lib/geojson":58,"./lib/intersecter":59,"./lib/segment-chainer":61,"./lib/segment-selector":62}],56:[function(e,t,r){function a(){var r;var e=0;var t=false;function a(e,t){r.list.push({type:e,data:t?JSON.parse(JSON.stringify(t)):void 0});return r}r={list:[],segmentId:function(){return e++},checkIntersection:function(e,t){return a("check",{seg1:e,seg2:t})},segmentChop:function(e,t){a("div_seg",{seg:e,pt:t});return a("chop",{seg:e,pt:t})},statusRemove:function(e){return a("pop_seg",{seg:e})},segmentUpdate:function(e){return a("seg_update",{seg:e})},segmentNew:function(e,t){return a("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return a("rem_seg",{seg:e})},tempStatus:function(e,t,r){return a("temp_status",{seg:e,above:t,below:r})},rewind:function(e){return a("rewind",{seg:e})},status:function(e,t,r){return a("status",{seg:e,above:t,below:r})},vert:function(e){if(e===t)return r;t=e;return a("vert",{x:e})},log:function(e){if(typeof e!=="string")e=JSON.stringify(e,false,"  ");return a("log",{txt:e})},reset:function(){return a("reset")},selected:function(e){return a("selected",{segs:e})},chainStart:function(e){return a("chain_start",{seg:e})},chainRemoveHead:function(e,t){return a("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return a("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return a("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return a("chain_match",{index:e})},chainClose:function(e){return a("chain_close",{index:e})},chainAddHead:function(e,t){return a("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return a("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return a("chain_con",{index1:e,index2:t})},chainReverse:function(e){return a("chain_rev",{index:e})},chainJoin:function(e,t){return a("chain_join",{index1:e,index2:t})},done:function(){return a("done")}};return r}t.exports=a},{}],57:[function(e,t,r){function a(p){if(typeof p!=="number")p=1e-10;var r={epsilon:function(e){if(typeof e==="number")p=e;return p},pointAboveOrOnLine:function(e,t,r){var a=t[0];var n=t[1];var i=r[0];var o=r[1];var s=e[0];var l=e[1];return(i-a)*(l-n)-(o-n)*(s-a)>=-p},pointBetween:function(e,t,r){var a=e[1]-t[1];var n=r[0]-t[0];var i=e[0]-t[0];var o=r[1]-t[1];var s=i*n+a*o;if(s<p)return false;var l=n*n+o*o;if(s-l>-p)return false;return true},pointsSameX:function(e,t){return Math.abs(e[0]-t[0])<p},pointsSameY:function(e,t){return Math.abs(e[1]-t[1])<p},pointsSame:function(e,t){return r.pointsSameX(e,t)&&r.pointsSameY(e,t)},pointsCompare:function(e,t){if(r.pointsSameX(e,t))return r.pointsSameY(e,t)?0:e[1]<t[1]?-1:1;return e[0]<t[0]?-1:1},pointsCollinear:function(e,t,r){var a=e[0]-t[0];var n=e[1]-t[1];var i=t[0]-r[0];var o=t[1]-r[1];return Math.abs(a*o-i*n)<p},linesIntersect:function(e,t,r,a){var n=t[0]-e[0];var i=t[1]-e[1];var o=a[0]-r[0];var s=a[1]-r[1];var l=n*s-i*o;if(Math.abs(l)<p)return false;var u=e[0]-r[0];var c=e[1]-r[1];var f=(o*c-s*u)/l;var d=(n*c-i*u)/l;var v={alongA:0,alongB:0,pt:[e[0]+f*n,e[1]+f*i]};if(f<=-p)v.alongA=-2;else if(f<p)v.alongA=-1;else if(f-1<=-p)v.alongA=0;else if(f-1<p)v.alongA=1;else v.alongA=2;if(d<=-p)v.alongB=-2;else if(d<p)v.alongB=-1;else if(d-1<=-p)v.alongB=0;else if(d-1<p)v.alongB=1;else v.alongB=2;return v},pointInsideRegion:function(e,t){var r=e[0];var a=e[1];var n=t[t.length-1][0];var i=t[t.length-1][1];var o=false;for(var s=0;s<t.length;s++){var l=t[s][0];var u=t[s][1];if(u-a>p!=i-a>p&&(n-l)*(a-u)/(i-u)+l-r>p)o=!o;n=l;i=u}return o}};return r}t.exports=a},{}],58:[function(e,t,r){var a={toPolygon:function(n,e){function t(e){if(e.length<=0)return n.segments({inverted:false,regions:[]});function t(e){var t=e.slice(0,e.length-1);return n.segments({inverted:false,regions:[t]})}var r=t(e[0]);for(var a=1;a<e.length;a++)r=n.selectDifference(n.combine(r,t(e[a])));return r}if(e.type==="Polygon"){return n.polygon(t(e.coordinates))}else if(e.type==="MultiPolygon"){var r=n.segments({inverted:false,regions:[]});for(var a=0;a<e.coordinates.length;a++)r=n.selectUnion(n.combine(r,t(e.coordinates[a])));return n.polygon(r)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,r,t){t=e.polygon(e.segments(t));function i(e,t){return r.pointInsideRegion([(e[0][0]+e[1][0])*.5,(e[0][1]+e[1][1])*.5],t)}function o(e){return{region:e,children:[]}}var a=o(null);function s(e,t){for(var r=0;r<e.children.length;r++){var a=e.children[r];if(i(t,a.region)){s(a,t);return}}var n=o(t);for(var r=0;r<e.children.length;r++){var a=e.children[r];if(i(a.region,t)){n.children.push(a);e.children.splice(r,1);r--}}e.children.push(n)}for(var n=0;n<t.regions.length;n++){var l=t.regions[n];if(l.length<3)continue;s(a,l)}function u(e,t){var r=0;var a=e[e.length-1][0];var n=e[e.length-1][1];var i=[];for(var o=0;o<e.length;o++){var s=e[o][0];var l=e[o][1];i.push([s,l]);r+=l*a-s*n;a=s;n=l}var u=r<0;if(u!==t)i.reverse();i.push([i[0][0],i[0][1]]);return i}var c=[];function f(e){var t=[u(e.region,false)];c.push(t);for(var r=0;r<e.children.length;r++)t.push(d(e.children[r]))}function d(e){for(var t=0;t<e.children.length;t++)f(e.children[t]);return u(e.region,true)}for(var n=0;n<a.children.length;n++)f(a.children[n]);if(c.length<=0)return{type:"Polygon",coordinates:[]};if(c.length==1)return{type:"Polygon",coordinates:c[0]};return{type:"MultiPolygon",coordinates:c}}};t.exports=a},{}],59:[function(e,t,r){var w=e("./linked-list");function a(g,y,x){function i(e,t){return{id:x?x.segmentId():-1,start:e,end:t,myFill:{above:null,below:null},otherFill:null}}function n(e,t,r){return{id:x?x.segmentId():-1,start:e,end:t,myFill:{above:r.myFill.above,below:r.myFill.below},otherFill:null}}var b=w.create();function o(e,t,r,a,n,i){var o=y.pointsCompare(t,n);if(o!==0)return o;if(y.pointsSame(r,i))return 0;if(e!==a)return e?1:-1;return y.pointAboveOrOnLine(r,a?n:i,a?i:n)?1:-1}function s(r,a){b.insertBefore(r,function(e){var t=o(r.isStart,r.pt,a,e.isStart,e.pt,e.other.pt);return t<0})}function a(e,t){var r=w.node({isStart:true,pt:e.start,seg:e,primary:t,other:null,status:null});s(r,e.end);return r}function l(e,t,r){var a=w.node({isStart:false,pt:t.end,seg:t,primary:r,other:e,status:null});e.other=a;s(a,e.pt)}function u(e,t){var r=a(e,t);l(r,e,t);return r}function c(e,t){if(x)x.segmentChop(e.seg,t);e.other.remove();e.seg.end=t;e.other.pt=t;s(e.other,e.pt)}function _(e,t){var r=n(t,e.seg.end,e.seg);c(e,t);return u(r,e.primary)}function f(e,t){var a=w.create();function n(e,t){var r=e.seg.start;var a=e.seg.end;var n=t.seg.start;var i=t.seg.end;if(y.pointsCollinear(r,n,i)){if(y.pointsCollinear(a,n,i))return 1;return y.pointAboveOrOnLine(a,n,i)?1:-1}return y.pointAboveOrOnLine(r,n,i)?1:-1}function r(r){return a.findTransition(function(e){var t=n(r,e.ev);return t>0})}function i(e,t){var r=e.seg;var a=t.seg;var n=r.start;var i=r.end;var o=a.start;var s=a.end;if(x)x.checkIntersection(r,a);var l=y.linesIntersect(n,i,o,s);if(l===false){if(!y.pointsCollinear(n,i,o))return false;if(y.pointsSame(n,s)||y.pointsSame(i,o))return false;var u=y.pointsSame(n,o);var c=y.pointsSame(i,s);if(u&&c)return t;var f=!u&&y.pointBetween(n,o,s);var d=!c&&y.pointBetween(i,o,s);if(u){if(d){_(t,i)}else{_(e,s)}return t}else if(f){if(!c){if(d){_(t,i)}else{_(e,s)}}_(t,n)}}else{if(l.alongA===0){if(l.alongB===-1)_(e,o);else if(l.alongB===0)_(e,l.pt);else if(l.alongB===1)_(e,s)}if(l.alongB===0){if(l.alongA===-1)_(t,n);else if(l.alongA===0)_(t,l.pt);else if(l.alongA===1)_(t,i)}}return false}var o=[];while(!b.isEmpty()){var s=b.getHead();if(x)x.vert(s.pt[0]);if(s.isStart){if(x)x.segmentNew(s.seg,s.primary);var l=r(s);var u=l.before?l.before.ev:null;var c=l.after?l.after.ev:null;if(x){x.tempStatus(s.seg,u?u.seg:false,c?c.seg:false)}function f(){if(u){var e=i(s,u);if(e)return e}if(c)return i(s,c);return false}var d=f();if(d){if(g){var v;if(s.seg.myFill.below===null)v=true;else v=s.seg.myFill.above!==s.seg.myFill.below;if(v)d.seg.myFill.above=!d.seg.myFill.above}else{d.seg.otherFill=s.seg.myFill}if(x)x.segmentUpdate(d.seg);s.other.remove();s.remove()}if(b.getHead()!==s){if(x)x.rewind(s.seg);continue}if(g){var v;if(s.seg.myFill.below===null)v=true;else v=s.seg.myFill.above!==s.seg.myFill.below;if(!c){s.seg.myFill.below=e}else{s.seg.myFill.below=c.seg.myFill.above}if(v)s.seg.myFill.above=!s.seg.myFill.below;else s.seg.myFill.above=s.seg.myFill.below}else{if(s.seg.otherFill===null){var p;if(!c){p=s.primary?t:e}else{if(s.primary===c.primary)p=c.seg.otherFill.above;else p=c.seg.myFill.above}s.seg.otherFill={above:p,below:p}}}if(x){x.status(s.seg,u?u.seg:false,c?c.seg:false)}s.other.status=l.insert(w.node({ev:s}))}else{var h=s.status;if(h===null){throw new Error("PolyBool: Zero-length segment detected; your epsilon is "+"probably too small or too large")}if(a.exists(h.prev)&&a.exists(h.next))i(h.prev.ev,h.next.ev);if(x)x.statusRemove(h.ev.seg);h.remove();if(!s.primary){var m=s.seg.myFill;s.seg.myFill=s.seg.otherFill;s.seg.otherFill=m}o.push(s.seg)}b.getHead().remove()}if(x)x.done();return o}if(!g){return{calculate:function(e,t,r,a){e.forEach(function(e){u(n(e.start,e.end,e),true)});r.forEach(function(e){u(n(e.start,e.end,e),false)});return f(t,a)}}}return{addRegion:function(e){var t;var r=e[e.length-1];for(var a=0;a<e.length;a++){t=r;r=e[a];var n=y.pointsCompare(t,r);if(n===0)continue;u(i(n<0?t:r,n<0?r:t),true)}},calculate:function(e){return f(e,false)}}}t.exports=a},{"./linked-list":60}],60:[function(e,t,r){var a={create:function(){var n={root:{root:true,next:null},exists:function(e){if(e===null||e===n.root)return false;return true},isEmpty:function(){return n.root.next===null},getHead:function(){return n.root.next},insertBefore:function(e,t){var r=n.root;var a=n.root.next;while(a!==null){if(t(a)){e.prev=a.prev;e.next=a;a.prev.next=e;a.prev=e;return}r=a;a=a.next}r.next=e;e.prev=r;e.next=null},findTransition:function(e){var t=n.root;var r=n.root.next;while(r!==null){if(e(r))break;t=r;r=r.next}return{before:t===n.root?null:t,after:r,insert:function(e){e.prev=t;e.next=r;t.next=e;if(r!==null)r.prev=e;return e}}}};return n},node:function(e){e.prev=null;e.next=null;e.remove=function(){e.prev.next=e.next;if(e.next)e.next.prev=e.prev;e.prev=null;e.next=null};return e}};t.exports=a},{}],61:[function(e,t,r){function a(e,M,A){var S=[];var E=[];e.forEach(function(e){var t=e.start;var r=e.end;if(M.pointsSame(t,r)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is "+"probably too small or too large");return}if(A)A.chainStart(e);var a={index:0,matches_head:false,matches_pt1:false};var n={index:0,matches_head:false,matches_pt1:false};var i=a;function o(e,t,r){i.index=e;i.matches_head=t;i.matches_pt1=r;if(i===a){i=n;return false}i=null;return true}for(var s=0;s<S.length;s++){var l=S[s];var u=l[0];var c=l[1];var f=l[l.length-1];var d=l[l.length-2];if(M.pointsSame(u,t)){if(o(s,true,true))break}else if(M.pointsSame(u,r)){if(o(s,true,false))break}else if(M.pointsSame(f,t)){if(o(s,false,true))break}else if(M.pointsSame(f,r)){if(o(s,false,false))break}}if(i===a){S.push([t,r]);if(A)A.chainNew(t,r);return}if(i===n){if(A)A.chainMatch(a.index);var v=a.index;var p=a.matches_pt1?r:t;var h=a.matches_head;var l=S[v];var m=h?l[0]:l[l.length-1];var g=h?l[1]:l[l.length-2];var y=h?l[l.length-1]:l[0];var x=h?l[l.length-2]:l[1];if(M.pointsCollinear(g,m,p)){if(h){if(A)A.chainRemoveHead(a.index,p);l.shift()}else{if(A)A.chainRemoveTail(a.index,p);l.pop()}m=g}if(M.pointsSame(y,p)){S.splice(v,1);if(M.pointsCollinear(x,y,m)){if(h){if(A)A.chainRemoveTail(a.index,m);l.pop()}else{if(A)A.chainRemoveHead(a.index,m);l.shift()}}if(A)A.chainClose(a.index);E.push(l);return}if(h){if(A)A.chainAddHead(a.index,p);l.unshift(p)}else{if(A)A.chainAddTail(a.index,p);l.push(p)}return}function b(e){if(A)A.chainReverse(e);S[e].reverse()}function _(e,t){var r=S[e];var a=S[t];var n=r[r.length-1];var i=r[r.length-2];var o=a[0];var s=a[1];if(M.pointsCollinear(i,n,o)){if(A)A.chainRemoveTail(e,n);r.pop();n=i}if(M.pointsCollinear(n,o,s)){if(A)A.chainRemoveHead(t,o);a.shift()}if(A)A.chainJoin(e,t);S[e]=r.concat(a);S.splice(t,1)}var w=a.index;var T=n.index;if(A)A.chainConnect(w,T);var k=S[w].length<S[T].length;if(a.matches_head){if(n.matches_head){if(k){b(w);_(w,T)}else{b(T);_(T,w)}}else{_(T,w)}}else{if(n.matches_head){_(w,T)}else{if(k){b(w);_(T,w)}else{b(T);_(w,T)}}}});return E}t.exports=a},{}],62:[function(e,t,r){function a(e,r,a){var n=[];e.forEach(function(e){var t=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);if(r[t]!==0){n.push({id:a?a.segmentId():-1,start:e.start,end:e.end,myFill:{above:r[t]===1,below:r[t]===2},otherFill:null})}});if(a)a.selected(n);return n}var n={union:function(e,t){return a(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return a(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return a(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return a(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return a(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}};t.exports=n},{}],63:[function(e,t,r){var a=t.exports={};var n;var i;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){n=setTimeout}else{n=o}}catch(e){n=o}try{if(typeof clearTimeout==="function"){i=clearTimeout}else{i=s}}catch(e){i=s}})();function l(t){if(n===setTimeout){return setTimeout(t,0)}if((n===o||!n)&&setTimeout){n=setTimeout;return setTimeout(t,0)}try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}function u(t){if(i===clearTimeout){return clearTimeout(t)}if((i===s||!i)&&clearTimeout){i=clearTimeout;return clearTimeout(t)}try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}var c=[];var f=false;var d;var v=-1;function p(){if(!f||!d){return}f=false;if(d.length){c=d.concat(c)}else{v=-1}if(c.length){h()}}function h(){if(f){return}var e=l(p);f=true;var t=c.length;while(t){d=c;c=[];while(++v<t){if(d){d[v].run()}}v=-1;t=c.length}d=null;f=false;u(e)}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}c.push(new m(e,t));if(c.length===1&&!f){l(h)}};function m(e,t){this.fun=e;this.array=t}m.prototype.run=function(){this.fun.apply(null,this.array)};a.title="browser";a.browser=true;a.env={};a.argv=[];a.version="";a.versions={};function g(){}a.on=g;a.addListener=g;a.once=g;a.off=g;a.removeListener=g;a.removeAllListeners=g;a.emit=g;a.prependListener=g;a.prependOnceListener=g;a.listeners=function(e){return[]};a.binding=function(e){throw new Error("process.binding is not supported")};a.cwd=function(){return"/"};a.chdir=function(e){throw new Error("process.chdir is not supported")};a.umask=function(){return 0}},{}],64:[function(l,e,u){(function(a,s){(function(){var e=l("process/browser.js").nextTick;var t=Function.prototype.apply;var n=Array.prototype.slice;var i={};var o=0;u.setTimeout=function(){return new r(t.call(setTimeout,window,arguments),clearTimeout)};u.setInterval=function(){return new r(t.call(setInterval,window,arguments),clearInterval)};u.clearTimeout=u.clearInterval=function(e){e.close()};function r(e,t){this._id=e;this._clearFn=t}r.prototype.unref=r.prototype.ref=function(){};r.prototype.close=function(){this._clearFn.call(window,this._id)};u.enroll=function(e,t){clearTimeout(e._idleTimeoutId);e._idleTimeout=t};u.unenroll=function(e){clearTimeout(e._idleTimeoutId);e._idleTimeout=-1};u._unrefActive=u.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;if(e>=0){t._idleTimeoutId=setTimeout(function e(){if(t._onTimeout)t._onTimeout()},e)}};u.setImmediate=typeof a==="function"?a:function(t){var r=o++;var a=arguments.length<2?false:n.call(arguments,1);i[r]=true;e(function e(){if(i[r]){if(a){t.apply(null,a)}else{t.call(null)}u.clearImmediate(r)}});return r};u.clearImmediate=typeof s==="function"?s:function(e){delete i[e]}}).call(this)}).call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":63,timers:64}],65:[function(e,$,t){(function(d){var a=/^\s+/,n=/\s+$/,i=0,o=d.round,u=d.min,c=d.max,e=d.random;function f(e,t){e=e?e:"";t=t||{};if(e instanceof f){return e}if(!(this instanceof f)){return new f(e,t)}var r=s(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=o(100*this._a)/100,this._format=t.format||r.format;this._gradientType=t.gradientType;if(this._r<1){this._r=o(this._r)}if(this._g<1){this._g=o(this._g)}if(this._b<1){this._b=o(this._b)}this._ok=r.ok;this._tc_id=i++}f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb();var t,r,a,n,i,o;t=e.r/255;r=e.g/255;a=e.b/255;if(t<=.03928){n=t/12.92}else{n=d.pow((t+.055)/1.055,2.4)}if(r<=.03928){i=r/12.92}else{i=d.pow((r+.055)/1.055,2.4)}if(a<=.03928){o=a/12.92}else{o=d.pow((a+.055)/1.055,2.4)}return.2126*n+.7152*i+.0722*o},setAlpha:function(e){this._a=P(e);this._roundA=o(100*this._a)/100;return this},toHsv:function(){var e=h(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=h(this._r,this._g,this._b);var t=o(e.h*360),r=o(e.s*100),a=o(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+a+"%)":"hsva("+t+", "+r+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var e=v(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=v(this._r,this._g,this._b);var t=o(e.h*360),r=o(e.s*100),a=o(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+a+"%)":"hsla("+t+", "+r+"%, "+a+"%, "+this._roundA+")"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return r(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(R(this._r,255)*100)+"%",g:o(R(this._g,255)*100)+"%",b:o(R(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+o(R(this._r,255)*100)+"%, "+o(R(this._g,255)*100)+"%, "+o(R(this._b,255)*100)+"%)":"rgba("+o(R(this._r,255)*100)+"%, "+o(R(this._g,255)*100)+"%, "+o(R(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){if(this._a===0){return"transparent"}if(this._a<1){return false}return O[t(this._r,this._g,this._b,true)]||false},toFilter:function(e){var t="#"+g(this._r,this._g,this._b,this._a);var r=t;var a=this._gradientType?"GradientType = 1, ":"";if(e){var n=f(e);r="#"+g(n._r,n._g,n._b,n._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=false;var a=this._a<1&&this._a>=0;var n=!t&&a&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");if(n){if(e==="name"&&this._a===0){return this.toName()}return this.toRgbString()}if(e==="rgb"){r=this.toRgbString()}if(e==="prgb"){r=this.toPercentageRgbString()}if(e==="hex"||e==="hex6"){r=this.toHexString()}if(e==="hex3"){r=this.toHexString(true)}if(e==="hex4"){r=this.toHex8String(true)}if(e==="hex8"){r=this.toHex8String()}if(e==="name"){r=this.toName()}if(e==="hsl"){r=this.toHslString()}if(e==="hsv"){r=this.toHsvString()}return r||this.toHexString()},clone:function(){return f(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));this._r=r._r;this._g=r._g;this._b=r._b;this.setAlpha(r._a);return this},lighten:function(){return this._applyModification(_,arguments)},brighten:function(){return this._applyModification(w,arguments)},darken:function(){return this._applyModification(T,arguments)},desaturate:function(){return this._applyModification(y,arguments)},saturate:function(){return this._applyModification(x,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(k,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(L,arguments)},complement:function(){return this._applyCombination(M,arguments)},monochromatic:function(){return this._applyCombination(C,arguments)},splitcomplement:function(){return this._applyCombination(E,arguments)},triad:function(){return this._applyCombination(A,arguments)},tetrad:function(){return this._applyCombination(S,arguments)}};f.fromRatio=function(e,t){if(typeof e=="object"){var r={};for(var a in e){if(e.hasOwnProperty(a)){if(a==="a"){r[a]=e[a]}else{r[a]=B(e[a])}}}e=r}return f(e,t)};function s(e){var t={r:0,g:0,b:0};var r=1;var a=null;var n=null;var i=null;var o=false;var s=false;if(typeof e=="string"){e=G(e)}if(typeof e=="object"){if(V(e.r)&&V(e.g)&&V(e.b)){t=l(e.r,e.g,e.b);o=true;s=String(e.r).substr(-1)==="%"?"prgb":"rgb"}else if(V(e.h)&&V(e.s)&&V(e.v)){a=B(e.s);n=B(e.v);t=m(e.h,a,n);o=true;s="hsv"}else if(V(e.h)&&V(e.s)&&V(e.l)){a=B(e.s);i=B(e.l);t=p(e.h,a,i);o=true;s="hsl"}if(e.hasOwnProperty("a")){r=e.a}}r=P(r);return{ok:o,format:e.format||s,r:u(255,c(t.r,0)),g:u(255,c(t.g,0)),b:u(255,c(t.b,0)),a:r}}function l(e,t,r){return{r:R(e,255)*255,g:R(t,255)*255,b:R(r,255)*255}}function v(e,t,r){e=R(e,255);t=R(t,255);r=R(r,255);var a=c(e,t,r),n=u(e,t,r);var i,o,s=(a+n)/2;if(a==n){i=o=0}else{var l=a-n;o=s>.5?l/(2-a-n):l/(a+n);switch(a){case e:i=(t-r)/l+(t<r?6:0);break;case t:i=(r-e)/l+2;break;case r:i=(e-t)/l+4;break}i/=6}return{h:i,s:o,l:s}}function p(e,t,r){var a,n,i;e=R(e,360);t=R(t,100);r=R(r,100);function o(e,t,r){if(r<0)r+=1;if(r>1)r-=1;if(r<1/6)return e+(t-e)*6*r;if(r<1/2)return t;if(r<2/3)return e+(t-e)*(2/3-r)*6;return e}if(t===0){a=n=i=r}else{var s=r<.5?r*(1+t):r+t-r*t;var l=2*r-s;a=o(l,s,e+1/3);n=o(l,s,e);i=o(l,s,e-1/3)}return{r:a*255,g:n*255,b:i*255}}function h(e,t,r){e=R(e,255);t=R(t,255);r=R(r,255);var a=c(e,t,r),n=u(e,t,r);var i,o,s=a;var l=a-n;o=a===0?0:l/a;if(a==n){i=0}else{switch(a){case e:i=(t-r)/l+(t<r?6:0);break;case t:i=(r-e)/l+2;break;case r:i=(e-t)/l+4;break}i/=6}return{h:i,s:o,v:s}}function m(e,t,r){e=R(e,360)*6;t=R(t,100);r=R(r,100);var a=d.floor(e),n=e-a,i=r*(1-t),o=r*(1-n*t),s=r*(1-(1-n)*t),l=a%6,u=[r,o,i,i,s,r][l],c=[s,r,r,o,i,i][l],f=[i,i,s,r,r,o][l];return{r:u*255,g:c*255,b:f*255}}function t(e,t,r,a){var n=[H(o(e).toString(16)),H(o(t).toString(16)),H(o(r).toString(16))];if(a&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)){return n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0)}return n.join("")}function r(e,t,r,a,n){var i=[H(o(e).toString(16)),H(o(t).toString(16)),H(o(r).toString(16)),H(q(a))];if(n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)){return i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0)}return i.join("")}function g(e,t,r,a){var n=[H(q(a)),H(o(e).toString(16)),H(o(t).toString(16)),H(o(r).toString(16))];return n.join("")}f.equals=function(e,t){if(!e||!t){return false}return f(e).toRgbString()==f(t).toRgbString()};f.random=function(){return f.fromRatio({r:e(),g:e(),b:e()})};function y(e,t){t=t===0?0:t||10;var r=f(e).toHsl();r.s-=t/100;r.s=N(r.s);return f(r)}function x(e,t){t=t===0?0:t||10;var r=f(e).toHsl();r.s+=t/100;r.s=N(r.s);return f(r)}function b(e){return f(e).desaturate(100)}function _(e,t){t=t===0?0:t||10;var r=f(e).toHsl();r.l+=t/100;r.l=N(r.l);return f(r)}function w(e,t){t=t===0?0:t||10;var r=f(e).toRgb();r.r=c(0,u(255,r.r-o(255*-(t/100))));r.g=c(0,u(255,r.g-o(255*-(t/100))));r.b=c(0,u(255,r.b-o(255*-(t/100))));return f(r)}function T(e,t){t=t===0?0:t||10;var r=f(e).toHsl();r.l-=t/100;r.l=N(r.l);return f(r)}function k(e,t){var r=f(e).toHsl();var a=(r.h+t)%360;r.h=a<0?360+a:a;return f(r)}function M(e){var t=f(e).toHsl();t.h=(t.h+180)%360;return f(t)}function A(e){var t=f(e).toHsl();var r=t.h;return[f(e),f({h:(r+120)%360,s:t.s,l:t.l}),f({h:(r+240)%360,s:t.s,l:t.l})]}function S(e){var t=f(e).toHsl();var r=t.h;return[f(e),f({h:(r+90)%360,s:t.s,l:t.l}),f({h:(r+180)%360,s:t.s,l:t.l}),f({h:(r+270)%360,s:t.s,l:t.l})]}function E(e){var t=f(e).toHsl();var r=t.h;return[f(e),f({h:(r+72)%360,s:t.s,l:t.l}),f({h:(r+216)%360,s:t.s,l:t.l})]}function L(e,t,r){t=t||6;r=r||30;var a=f(e).toHsl();var n=360/r;var i=[f(e)];for(a.h=(a.h-(n*t>>1)+720)%360;--t;){a.h=(a.h+n)%360;i.push(f(a))}return i}function C(e,t){t=t||6;var r=f(e).toHsv();var a=r.h,n=r.s,i=r.v;var o=[];var s=1/t;while(t--){o.push(f({h:a,s:n,v:i}));i=(i+s)%1}return o}f.mix=function(e,t,r){r=r===0?0:r||50;var a=f(e).toRgb();var n=f(t).toRgb();var i=r/100;var o={r:(n.r-a.r)*i+a.r,g:(n.g-a.g)*i+a.g,b:(n.b-a.b)*i+a.b,a:(n.a-a.a)*i+a.a};return f(o)};f.readability=function(e,t){var r=f(e);var a=f(t);return(d.max(r.getLuminance(),a.getLuminance())+.05)/(d.min(r.getLuminance(),a.getLuminance())+.05)};f.isReadable=function(e,t,r){var a=f.readability(e,t);var n,i;i=false;n=W(r);switch(n.level+n.size){case"AAsmall":case"AAAlarge":i=a>=4.5;break;case"AAlarge":i=a>=3;break;case"AAAsmall":i=a>=7;break}return i};f.mostReadable=function(e,t,r){var a=null;var n=0;var i;var o,s,l;r=r||{};o=r.includeFallbackColors;s=r.level;l=r.size;for(var u=0;u<t.length;u++){i=f.readability(e,t[u]);if(i>n){n=i;a=f(t[u])}}if(f.isReadable(e,a,{level:s,size:l})||!o){return a}else{r.includeFallbackColors=false;return f.mostReadable(e,["#fff","#000"],r)}};var D=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var O=f.hexNames=I(D);function I(e){var t={};for(var r in e){if(e.hasOwnProperty(r)){t[e[r]]=r}}return t}function P(e){e=parseFloat(e);if(isNaN(e)||e<0||e>1){e=1}return e}function R(e,t){if(F(e)){e="100%"}var r=j(e);e=u(t,c(0,parseFloat(e)));if(r){e=parseInt(e*t,10)/100}if(d.abs(e-t)<1e-6){return 1}return e%t/parseFloat(t)}function N(e){return u(1,c(0,e))}function z(e){return parseInt(e,16)}function F(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function j(e){return typeof e==="string"&&e.indexOf("%")!=-1}function H(e){return e.length==1?"0"+e:""+e}function B(e){if(e<=1){e=e*100+"%"}return e}function q(e){return d.round(parseFloat(e)*255).toString(16)}function U(e){return z(e)/255}var Y=function(){var e="[-\\+]?\\d+%?";var t="[-\\+]?\\d*\\.\\d+%?";var r="(?:"+t+")|(?:"+e+")";var a="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";var n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+a),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+a),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+a),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function V(e){return!!Y.CSS_UNIT.exec(e)}function G(e){e=e.replace(a,"").replace(n,"").toLowerCase();var t=false;if(D[e]){e=D[e];t=true}else if(e=="transparent"){return{r:0,g:0,b:0,a:0,format:"name"}}var r;if(r=Y.rgb.exec(e)){return{r:r[1],g:r[2],b:r[3]}}if(r=Y.rgba.exec(e)){return{r:r[1],g:r[2],b:r[3],a:r[4]}}if(r=Y.hsl.exec(e)){return{h:r[1],s:r[2],l:r[3]}}if(r=Y.hsla.exec(e)){return{h:r[1],s:r[2],l:r[3],a:r[4]}}if(r=Y.hsv.exec(e)){return{h:r[1],s:r[2],v:r[3]}}if(r=Y.hsva.exec(e)){return{h:r[1],s:r[2],v:r[3],a:r[4]}}if(r=Y.hex8.exec(e)){return{r:z(r[1]),g:z(r[2]),b:z(r[3]),a:U(r[4]),format:t?"name":"hex8"}}if(r=Y.hex6.exec(e)){return{r:z(r[1]),g:z(r[2]),b:z(r[3]),format:t?"name":"hex"}}if(r=Y.hex4.exec(e)){return{r:z(r[1]+""+r[1]),g:z(r[2]+""+r[2]),b:z(r[3]+""+r[3]),a:U(r[4]+""+r[4]),format:t?"name":"hex8"}}if(r=Y.hex3.exec(e)){return{r:z(r[1]+""+r[1]),g:z(r[2]+""+r[2]),b:z(r[3]+""+r[3]),format:t?"name":"hex"}}return false}function W(e){var t,r;e=e||{level:"AA",size:"small"};t=(e.level||"AA").toUpperCase();r=(e.size||"small").toLowerCase();if(t!=="AA"&&t!=="AAA"){t="AA"}if(r!=="small"&&r!=="large"){r="small"}return{level:t,size:r}}if(typeof $!=="undefined"&&$.exports){$.exports=f}else if(typeof au==="function"&&au.amd){au(function(){return f})}else{window.tinycolor=f}})(Math)},{}],66:[function(e,t,r){var c=e("../main");var a=e("object-assign");var f=c.instance();function d(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}d.prototype=new c.baseCalendar;a(d.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:false,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if(typeof e==="string"){var r=e.match(o);return r?r[0]:""}var a=this._validateYear(e);var n=e.month();var i=""+this.toChineseMonth(a,n);if(t&&i.length<2){i="0"+i}if(this.isIntercalaryMonth(a,n)){i+="i"}return i},monthNames:function(e){if(typeof e==="string"){var t=e.match(l);return t?t[0]:""}var r=this._validateYear(e);var a=e.month();var n=this.toChineseMonth(r,a);var i=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][n-1];if(this.isIntercalaryMonth(r,a)){i="闰"+i}return i},monthNamesShort:function(e){if(typeof e==="string"){var t=e.match(u);return t?t[0]:""}var r=this._validateYear(e);var a=e.month();var n=this.toChineseMonth(r,a);var i=["一","二","三","四","五","六","七","八","九","十","十一","十二"][n-1];if(this.isIntercalaryMonth(r,a)){i="闰"+i}return i},parseMonth:function(e,t){e=this._validateYear(e);var r=parseInt(t);var a;if(!isNaN(r)){var n=t[t.length-1];a=n==="i"||n==="I"}else{if(t[0]==="闰"){a=true;t=t.substring(1)}if(t[t.length-1]==="月"){t=t.substring(0,t.length-1)}r=1+["一","二","三","四","五","六","七","八","九","十","十一","十二"].indexOf(t)}var i=this.toMonthIndex(e,r,a);return i},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:false}},_validateYear:function(e,t){if(e.year){e=e.year()}if(typeof e!=="number"||e<1888||e>2111){throw t.replace(/\{0\}/,this.local.name)}return e},toMonthIndex:function(e,t,r){var a=this.intercalaryMonth(e);var n=r&&t!==a;if(n||t<1||t>12){throw c.local.invalidMonth.replace(/\{0\}/,this.local.name)}var i;if(!a){i=t-1}else if(!r&&t<=a){i=t-1}else{i=t}return i},toChineseMonth:function(e,t){if(e.year){e=e.year();t=e.month()}var r=this.intercalaryMonth(e);var a=r?12:11;if(t<0||t>a){throw c.local.invalidMonth.replace(/\{0\}/,this.local.name)}var n;if(!r){n=t+1}else if(t<r){n=t+1}else{n=t}return n},intercalaryMonth:function(e){e=this._validateYear(e);var t=w[e-w[0]];var r=t>>13;return r},isIntercalaryMonth:function(e,t){if(e.year){e=e.year();t=e.month()}var r=this.intercalaryMonth(e);return!!r&&r===t},leapYear:function(e){return this.intercalaryMonth(e)!==0},weekOfYear:function(e,t,r){var a=this._validateYear(e,c.local.invalidyear);var n=T[a-T[0]];var i=n>>9&4095;var o=n>>5&15;var s=n&31;var l;l=f.newDate(i,o,s);l.add(4-(l.dayOfWeek()||7),"d");var u=this.toJD(e,t,r)-l.toJD();return 1+Math.floor(u/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){if(e.year){t=e.month();e=e.year()}e=this._validateYear(e);var r=w[e-w[0]];var a=r>>13;var n=a?12:11;if(t>n){throw c.local.invalidMonth.replace(/\{0\}/,this.local.name)}var i=r&1<<12-t?30:29;return i},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,i,r,c.local.invalidDate);e=this._validateYear(a.year());t=a.month();r=a.day();var n=this.isIntercalaryMonth(e,t);var i=this.toChineseMonth(e,t);var o=v(e,i,r,n);return f.toJD(o.year,o.month,o.day)},fromJD:function(e){var t=f.fromJD(e);var r=n(t.year(),t.month(),t.day());var a=this.toMonthIndex(r.year,r.month,r.isIntercalary);return this.newDate(r.year,a,r.day)},fromString:function(e){var t=e.match(s);var r=this._validateYear(+t[1]);var a=+t[2];var n=!!t[3];var i=this.toMonthIndex(r,a,n);var o=+t[4];return this.newDate(r,i,o)},add:function(e,t,r){var a=e.year();var n=e.month();var i=this.isIntercalaryMonth(a,n);var o=this.toChineseMonth(a,n);var s=Object.getPrototypeOf(d.prototype).add.call(this,e,t,r);if(r==="y"){var l=s.year();var u=s.month();var c=this.isIntercalaryMonth(l,o);var f=i&&c?this.toMonthIndex(l,o,true):this.toMonthIndex(l,o,false);if(f!==u){s.month(f)}}return s}});var s=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m;var o=/^\d?\d[iI]?/m;var l=/^闰?十?[一二三四五六七八九]?月/m;var u=/^闰?十?[一二三四五六七八九]?/m;c.calendars.chinese=d;var w=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548];var T=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function n(e,t,r,a){var n;var i;if(typeof e==="object"){n=e;i=t||{}}else{var o=typeof e==="number"&&e>=1888&&e<=2111;if(!o)throw new Error("Solar year outside range 1888-2111");var s=typeof t==="number"&&t>=1&&t<=12;if(!s)throw new Error("Solar month outside range 1 - 12");var l=typeof r==="number"&&r>=1&&r<=31;if(!l)throw new Error("Solar day outside range 1 - 31");n={year:e,month:t,day:r};i=a||{}}var u=T[n.year-T[0]];var c=n.year<<9|n.month<<5|n.day;i.year=c>=u?n.year:n.year-1;u=T[i.year-T[0]];var f=u>>9&4095;var d=u>>5&15;var v=u&31;var p;var h=new Date(f,d-1,v);var m=new Date(n.year,n.month-1,n.day);p=Math.round((m-h)/(24*3600*1e3));var g=w[i.year-w[0]];var y;for(y=0;y<13;y++){var x=g&1<<12-y?30:29;if(p<x){break}p-=x}var b=g>>13;if(!b||y<b){i.isIntercalary=false;i.month=1+y}else if(y===b){i.isIntercalary=true;i.month=y}else{i.isIntercalary=false;i.month=y}i.day=1+p;return i}function v(e,t,r,a,n){var i;var o;if(typeof e==="object"){o=e;i=t||{}}else{var s=typeof e==="number"&&e>=1888&&e<=2111;if(!s)throw new Error("Lunar year outside range 1888-2111");var l=typeof t==="number"&&t>=1&&t<=12;if(!l)throw new Error("Lunar month outside range 1 - 12");var u=typeof r==="number"&&r>=1&&r<=30;if(!u)throw new Error("Lunar day outside range 1 - 30");var c;if(typeof a==="object"){c=false;i=a}else{c=!!a;i=n||{}}o={year:e,month:t,day:r,isIntercalary:c}}var f;f=o.day-1;var d=w[o.year-w[0]];var v=d>>13;var p;if(!v){p=o.month-1}else if(o.month>v){p=o.month}else if(o.isIntercalary){p=o.month}else{p=o.month-1}for(var h=0;h<p;h++){var m=d&1<<12-h?30:29;f+=m}var g=T[o.year-T[0]];var y=g>>9&4095;var x=g>>5&15;var b=g&31;var _=new Date(y,x-1,b+f);i.year=_.getFullYear();i.month=1+_.getMonth();i.day=_.getDate();return i}},{"../main":80,"object-assign":53}],67:[function(e,t,r){var n=e("../main");var a=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new n.baseCalendar;a(i.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);var e=t.year()+(t.year()<0?1:0);return e%4===3||e%4===-1},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return 13},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);e=a.year();if(e<0){e++}return a.day()+(a.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch;var r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;if(r<=0){r--}t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var a=Math.floor(t/30)+1;var n=t-(a-1)*30+1;return this.newDate(r,a,n)}});n.calendars.coptic=i},{"../main":80,"object-assign":53}],68:[function(e,t,r){var n=e("../main");var a=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new n.baseCalendar;a(i.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:false}},leapYear:function(e){this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);return false},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);return 13},daysInYear:function(e){this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);return 400},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);return(a.day()+1)%8},weekDay:function(e,t,r){var a=this.dayOfWeek(e,t,r);return a>=2&&a<=6},extraInfo:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);return{century:o[Math.floor((a.year()-1)/100)+1]||""}},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);e=a.year()+(a.year()<0?1:0);t=a.month();r=a.day();return r+(t>1?16:0)+(t>2?(t-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1;e-=(t-1)*400;e+=e>15?16:0;var r=Math.floor(e/32)+1;var a=e-(r-1)*32+1;return this.newDate(t<=0?t-1:t,r,a)}});var o={20:"Fruitbat",21:"Anchovy"};n.calendars.discworld=i},{"../main":80,"object-assign":53}],69:[function(e,t,r){var n=e("../main");var a=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new n.baseCalendar;a(i.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);var e=t.year()+(t.year()<0?1:0);return e%4===3||e%4===-1},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return 13},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);e=a.year();if(e<0){e++}return a.day()+(a.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch;var r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;if(r<=0){r--}t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var a=Math.floor(t/30)+1;var n=t-(a-1)*30+1;return this.newDate(r,a,n)}});n.calendars.ethiopian=i},{"../main":80,"object-assign":53}],70:[function(e,t,r){var s=e("../main");var a=e("object-assign");function n(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}n.prototype=new s.baseCalendar;a(n.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:false,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return this._leapYear(t.year())},_leapYear:function(e){e=e<0?e+1:e;return i(e*7+1,19)<7},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);e=t.year();return this.toJD(e===-1?+1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){if(e.year){t=e.month();e=e.year()}this._validate(e,t,this.minDay,s.local.invalidMonth);return t===12&&this.leapYear(e)?30:t===8&&i(this.daysInYear(e),10)===5?30:t===9&&i(this.daysInYear(e),10)===3?29:this.daysPerMonth[t-1]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},extraInfo:function(e,t,r){var a=this._validate(e,t,r,s.local.invalidDate);return{yearType:(this.leapYear(a)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(a)%10-3]}},toJD:function(e,t,r){var a=this._validate(e,t,r,s.local.invalidDate);e=a.year();t=a.month();r=a.day();var n=e<=0?e+1:e;var i=this.jdEpoch+this._delay1(n)+this._delay2(n)+r+1;if(t<7){for(var o=7;o<=this.monthsInYear(e);o++){i+=this.daysInMonth(e,o)}for(var o=1;o<t;o++){i+=this.daysInMonth(e,o)}}else{for(var o=7;o<t;o++){i+=this.daysInMonth(e,o)}}return i},_delay1:function(e){var t=Math.floor((235*e-234)/19);var r=12084+13753*t;var a=t*29+Math.floor(r/25920);if(i(3*(a+1),7)<3){a++}return a},_delay2:function(e){var t=this._delay1(e-1);var r=this._delay1(e);var a=this._delay1(e+1);return a-r===356?2:r-t===382?1:0},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((e-this.jdEpoch)*98496/35975351)-1;while(e>=this.toJD(t===-1?+1:t+1,7,1)){t++}var r=e<this.toJD(t,1,1)?7:1;while(e>this.toJD(t,r,this.daysInMonth(t,r))){r++}var a=e-this.toJD(t,r,1)+1;return this.newDate(t,r,a)}});function i(e,t){return e-t*Math.floor(e/t)}s.calendars.hebrew=n},{"../main":80,"object-assign":53}],71:[function(e,t,r){var n=e("../main");var a=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new n.baseCalendar;a(i.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khamīs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);return(t.year()*11+14)%30<11},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);e=a.year();t=a.month();r=a.day();e=e<=0?e+1:e;return r+Math.ceil(29.5*(t-1))+(e-1)*354+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((30*(e-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var r=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1);var a=e-this.toJD(t,r,1)+1;return this.newDate(t,r,a)}});n.calendars.islamic=i},{"../main":80,"object-assign":53}],72:[function(e,t,r){var n=e("../main");var a=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new n.baseCalendar;a(i.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);var e=t.year()<0?t.year()+1:t.year();return e%4===0},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(4-(a.dayOfWeek()||7),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);e=a.year();t=a.month();r=a.day();if(e<0){e++}if(t<=2){e--;t+=12}return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r-1524.5},fromJD:function(e){var t=Math.floor(e+.5);var r=t+1524;var a=Math.floor((r-122.1)/365.25);var n=Math.floor(365.25*a);var i=Math.floor((r-n)/30.6001);var o=i-Math.floor(i<14?1:13);var s=a-Math.floor(o>2?4716:4715);var l=r-n-Math.floor(30.6001*i);if(s<=0){s--}return this.newDate(s,o,l)}});n.calendars.julian=i},{"../main":80,"object-assign":53}],73:[function(e,t,r){var s=e("../main");var a=e("object-assign");function n(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}n.prototype=new s.baseCalendar;a(n.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:true,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:false,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return false},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);e=t.year();var r=Math.floor(e/400);e=e%400;e+=e<0?400:0;var a=Math.floor(e/20);return r+"."+a+"."+e%20},forYear:function(e){e=e.split(".");if(e.length<3){throw"Invalid Mayan year"}var t=0;for(var r=0;r<e.length;r++){var a=parseInt(e[r],10);if(Math.abs(a)>19||r>0&&a<0){throw"Invalid Mayan year"}t=t*20+a}return t},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return 18},weekOfYear:function(e,t,r){this._validate(e,t,r,s.local.invalidDate);return 0},daysInYear:function(e){this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return 360},daysInMonth:function(e,t){this._validate(e,t,this.minDay,s.local.invalidMonth);return 20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,r){var a=this._validate(e,t,r,s.local.invalidDate);return a.day()},weekDay:function(e,t,r){this._validate(e,t,r,s.local.invalidDate);return true},extraInfo:function(e,t,r){var a=this._validate(e,t,r,s.local.invalidDate);var n=a.toJD();var i=this._toHaab(n);var o=this._toTzolkin(n);return{haabMonthName:this.local.haabMonths[i[0]-1],haabMonth:i[0],haabDay:i[1],tzolkinDayName:this.local.tzolkinMonths[o[0]-1],tzolkinDay:o[0],tzolkinTrecena:o[1]}},_toHaab:function(e){e-=this.jdEpoch;var t=i(e+8+(18-1)*20,365);return[Math.floor(t/20)+1,i(t,20)]},_toTzolkin:function(e){e-=this.jdEpoch;return[o(e+20,20),o(e+4,13)]},toJD:function(e,t,r){var a=this._validate(e,t,r,s.local.invalidDate);return a.day()+a.month()*20+a.year()*360+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var t=Math.floor(e/360);e=e%360;e+=e<0?360:0;var r=Math.floor(e/20);var a=e%20;return this.newDate(t,r,a)}});function i(e,t){return e-t*Math.floor(e/t)}function o(e,t){return i(e-1,t)+1}s.calendars.mayan=n},{"../main":80,"object-assign":53}],74:[function(e,t,r){var o=e("../main");var a=e("object-assign");function n(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}n.prototype=new o.baseCalendar;var s=o.instance("gregorian");a(n.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return s.leapYear(t.year()+(t.year()<1?1:0)+1469)},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(1-(a.dayOfWeek()||7),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,o.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,o.local.invalidMonth);var e=a.year();if(e<0){e++}var n=a.day();for(var i=1;i<a.month();i++){n+=this.daysPerMonth[i-1]}return n+s.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);var t=Math.floor((e-(this.jdEpoch-1))/366);while(e>=this.toJD(t+1,1,1)){t++}var r=e-Math.floor(this.toJD(t,1,1)+.5)+1;var a=1;while(r>this.daysInMonth(t,a)){r-=this.daysInMonth(t,a);a++}return this.newDate(t,a,r)}});o.calendars.nanakshahi=n},{"../main":80,"object-assign":53}],75:[function(e,t,r){var c=e("../main");var a=e("object-assign");function n(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}n.prototype=new c.baseCalendar;a(n.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:false}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,c.local.invalidYear);e=t.year();if(typeof this.NEPALI_CALENDAR_DATA[e]==="undefined"){return this.daysPerYear}var r=0;for(var a=this.minMonth;a<=12;a++){r+=this.NEPALI_CALENDAR_DATA[e][a]}return r},daysInMonth:function(e,t){if(e.year){t=e.month();e=e.year()}this._validate(e,t,this.minDay,c.local.invalidMonth);return typeof this.NEPALI_CALENDAR_DATA[e]==="undefined"?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},toJD:function(e,t,r){var a=this._validate(e,t,r,c.local.invalidDate);e=a.year();t=a.month();r=a.day();var n=c.instance();var i=0;var o=t;var s=e;this._createMissingCalendarData(e);var l=e-(o>9||o===9&&r>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);if(t!==9){i=r;o--}while(o!==9){if(o<=0){o=12;s--}i+=this.NEPALI_CALENDAR_DATA[s][o];o--}if(t===9){i+=r-this.NEPALI_CALENDAR_DATA[s][0];if(i<0){i+=n.daysInYear(l)}}else{i+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0]}return n.newDate(l,1,1).add(i,"d").toJD()},fromJD:function(e){var t=c.instance();var r=t.fromJD(e);var a=r.year();var n=r.dayOfYear();var i=a+56;this._createMissingCalendarData(i);var o=9;var s=this.NEPALI_CALENDAR_DATA[i][0];var l=this.NEPALI_CALENDAR_DATA[i][o]-s+1;while(n>l){o++;if(o>12){o=1;i++}l+=this.NEPALI_CALENDAR_DATA[i][o]}var u=this.NEPALI_CALENDAR_DATA[i][o]-(l-n);return this.newDate(i,o,u)},_createMissingCalendarData:function(e){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var r=e-1;r<e+2;r++){if(typeof this.NEPALI_CALENDAR_DATA[r]==="undefined"){this.NEPALI_CALENDAR_DATA[r]=t}}},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}});c.calendars.nepali=n},{"../main":80,"object-assign":53}],76:[function(e,t,r){var o=e("../main");var a=e("object-assign");function n(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}n.prototype=new o.baseCalendar;a(n.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chæharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Chæ","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);return((t.year()-(t.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(-((a.dayOfWeek()+1)%7),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,o.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var a=this._validate(e,t,r,o.local.invalidDate);e=a.year();t=a.month();r=a.day();var n=e-(e>=0?474:473);var i=474+f(n,2820);return r+(t<=7?(t-1)*31:(t-1)*30+6)+Math.floor((i*682-110)/2816)+(i-1)*365+Math.floor(n/2820)*1029983+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=e-this.toJD(475,1,1);var r=Math.floor(t/1029983);var a=f(t,1029983);var n=2820;if(a!==1029982){var i=Math.floor(a/366);var o=f(a,366);n=Math.floor((2134*i+2816*o+2815)/1028522)+i+1}var s=n+2820*r+474;s=s<=0?s-1:s;var l=e-this.toJD(s,1,1)+1;var u=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30);var c=e-this.toJD(s,u,1)+1;return this.newDate(s,u,c)}});function f(e,t){return e-t*Math.floor(e/t)}o.calendars.persian=n;o.calendars.jalali=n},{"../main":80,"object-assign":53}],77:[function(e,t,r){var n=e("../main");var a=e("object-assign");var i=n.instance();function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new n.baseCalendar;a(o.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);var e=this._t2gYear(t.year());return i.leapYear(e)},weekOfYear:function(e,t,r){var a=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);var e=this._t2gYear(a.year());return i.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);var e=this._t2gYear(a.year());return i.toJD(e,a.month(),a.day())},fromJD:function(e){var t=i.fromJD(e);var r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}});n.calendars.taiwan=o},{"../main":80,"object-assign":53}],78:[function(e,t,r){var n=e("../main");var a=e("object-assign");var i=n.instance();function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new n.baseCalendar;a(o.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);var e=this._t2gYear(t.year());return i.leapYear(e)},weekOfYear:function(e,t,r){var a=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);var e=this._t2gYear(a.year());return i.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);var e=this._t2gYear(a.year());return i.toJD(e,a.month(),a.day())},fromJD:function(e){var t=i.fromJD(e);var r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}});n.calendars.thai=o},{"../main":80,"object-assign":53}],79:[function(e,t,r){var o=e("../main");var a=e("object-assign");function n(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}n.prototype=new o.baseCalendar;a(n.prototype,{name:"UmmAlQura",hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalāthā’","Yawm al-Arba‘ā’","Yawm al-Khamīs","Yawm al-Jum‘a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:true}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);return this.daysInYear(t.year())===355},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=0;for(var r=1;r<=12;r++){t+=this.daysInMonth(e,r)}return t},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,o.local.invalidMonth);var a=r.toJD()-24e5+.5;var n=0;for(var i=0;i<u.length;i++){if(u[i]>a){return u[n]-u[n-1]}n++}return 30},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var a=this._validate(e,t,r,o.local.invalidDate);var n=12*(a.year()-1)+a.month()-15292;var i=a.day()+u[n-1]-1;return i+24e5-.5},fromJD:function(e){var t=e-24e5+.5;var r=0;for(var a=0;a<u.length;a++){if(u[a]>t)break;r++}var n=r+15292;var i=Math.floor((n-1)/12);var o=i+1;var s=n-12*i;var l=t-u[r-1]+1;return this.newDate(o,s,l)},isValid:function(e,t,r){var a=o.baseCalendar.prototype.isValid.apply(this,arguments);if(a){e=e.year!=null?e.year:e;a=e>=1276&&e<=1500}return a},_validate:function(e,t,r,a){var n=o.baseCalendar.prototype._validate.apply(this,arguments);if(n.year<1276||n.year>1500){throw a.replace(/\{0\}/,this.local.name)}return n}});o.calendars.ummalqura=n;var u=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":80,"object-assign":53}],80:[function(e,t,r){var a=e("object-assign");function n(){this.regionalOptions=[];this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"};this.local=this.regionalOptions[""];this.calendars={};this._localCals={}}a(n.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase();t=t||"";var r=this._localCals[e+"-"+t];if(!r&&this.calendars[e]){r=new this.calendars[e](t);this._localCals[e+"-"+t]=r}if(!r){throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e)}return r},newDate:function(e,t,r,a,n){a=(e!=null&&e.year?e.calendar():typeof a==="string"?this.instance(a,n):a)||this.instance();return a.newDate(e,t,r)},substituteDigits:function(t){return function(e){return(e+"").replace(/[0-9]/g,function(e){return t[e]})}},substituteChineseDigits:function(n,i){return function(e){var t="";var r=0;while(e>0){var a=e%10;t=(a===0?"":n[a]+i[r])+t;r++;e=Math.floor(e/10)}if(t.indexOf(n[1]+i[1])===0){t=t.substr(1)}return t||n[0]}}});function i(e,t,r,a){this._calendar=e;this._year=t;this._month=r;this._day=a;if(this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day)){throw(u.local.invalidDate||u.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}}function o(e,t){e=""+e;return"000000".substring(0,t-e.length)+e}a(i.prototype,{newDate:function(e,t,r){return this._calendar.newDate(e==null?this:e,t,r)},year:function(e){return arguments.length===0?this._year:this.set(e,"y")},month:function(e){return arguments.length===0?this._month:this.set(e,"m")},day:function(e){return arguments.length===0?this._day:this.set(e,"d")},date:function(e,t,r){if(!this._calendar.isValid(e,t,r)){throw(u.local.invalidDate||u.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}this._year=e;this._month=t;this._day=r;return this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name){throw(u.local.differentCalendars||u.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name)}var t=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return t===0?0:t<0?-1:+1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+o(Math.abs(this.year()),4)+"-"+o(this.month(),2)+"-"+o(this.day(),2)}});function s(){this.shortYearCutoff="+10"}a(s.prototype,{_validateLevel:0,newDate:function(e,t,r){if(e==null){return this.today()}if(e.year){this._validate(e,t,r,u.local.invalidDate||u.regionalOptions[""].invalidDate);r=e.day();t=e.month();e=e.year()}return new i(this,e,t,r)},today:function(){return this.fromJSDate(new Date)},epoch:function(e){var t=this._validate(e,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);return t.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+o(Math.abs(t.year()),4)},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);return 12},monthOfYear:function(e,t){var r=this._validate(e,t,this.minDay,u.local.invalidMonth||u.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(e,t){var r=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;this._validate(e,r,this.minDay,u.local.invalidMonth||u.regionalOptions[""].invalidMonth);return r},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(e,t,r){var a=this._validate(e,t,r,u.local.invalidDate||u.regionalOptions[""].invalidDate);return a.toJD()-this.newDate(a.year(),this.fromMonthOfYear(a.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,r){var a=this._validate(e,t,r,u.local.invalidDate||u.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(a))+2)%this.daysInWeek()},extraInfo:function(e,t,r){this._validate(e,t,r,u.local.invalidDate||u.regionalOptions[""].invalidDate);return{}},add:function(e,t,r){this._validate(e,this.minMonth,this.minDay,u.local.invalidDate||u.regionalOptions[""].invalidDate);return this._correctAdd(e,this._add(e,t,r),t,r)},_add:function(e,t,r){this._validateLevel++;if(r==="d"||r==="w"){var a=e.toJD()+t*(r==="w"?this.daysInWeek():1);var n=e.calendar().fromJD(a);this._validateLevel--;return[n.year(),n.month(),n.day()]}try{var i=e.year()+(r==="y"?t:0);var o=e.monthOfYear()+(r==="m"?t:0);var n=e.day();var s=function(e){while(o<e.minMonth){i--;o+=e.monthsInYear(i)}var t=e.monthsInYear(i);while(o>t-1+e.minMonth){i++;o-=t;t=e.monthsInYear(i)}};if(r==="y"){if(e.month()!==this.fromMonthOfYear(i,o)){o=this.newDate(i,e.month(),this.minDay).monthOfYear()}o=Math.min(o,this.monthsInYear(i));n=Math.min(n,this.daysInMonth(i,this.fromMonthOfYear(i,o)))}else if(r==="m"){s(this);n=Math.min(n,this.daysInMonth(i,this.fromMonthOfYear(i,o)))}var l=[i,this.fromMonthOfYear(i,o),n];this._validateLevel--;return l}catch(e){this._validateLevel--;throw e}},_correctAdd:function(e,t,r,a){if(!this.hasYearZero&&(a==="y"||a==="m")){if(t[0]===0||e.year()>0!==t[0]>0){var n={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[a];var i=r<0?-1:+1;t=this._add(e,r*n[0]+i*n[1],n[2])}}return e.date(t[0],t[1],t[2])},set:function(e,t,r){this._validate(e,this.minMonth,this.minDay,u.local.invalidDate||u.regionalOptions[""].invalidDate);var a=r==="y"?t:e.year();var n=r==="m"?t:e.month();var i=r==="d"?t:e.day();if(r==="y"||r==="m"){i=Math.min(i,this.daysInMonth(a,n))}return e.date(a,n,i)},isValid:function(e,t,r){this._validateLevel++;var a=this.hasYearZero||e!==0;if(a){var n=this.newDate(e,t,this.minDay);a=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(n)&&(r>=this.minDay&&r-this.minDay<this.daysInMonth(n))}this._validateLevel--;return a},toJSDate:function(e,t,r){var a=this._validate(e,t,r,u.local.invalidDate||u.regionalOptions[""].invalidDate);return u.instance().fromJD(this.toJD(a)).toJSDate()},fromJSDate:function(e){return this.fromJD(u.instance().fromJSDate(e).toJD())},_validate:function(e,t,r,a){if(e.year){if(this._validateLevel===0&&this.name!==e.calendar().name){throw(u.local.differentCalendars||u.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name)}return e}try{this._validateLevel++;if(this._validateLevel===1&&!this.isValid(e,t,r)){throw a.replace(/\{0\}/,this.local.name)}var n=this.newDate(e,t,r);this._validateLevel--;return n}catch(e){this._validateLevel--;throw e}}});function l(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}l.prototype=new s;a(l.prototype,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);var e=t.year()+(t.year()<0?1:0);return e%4===0&&(e%100!==0||e%400===0)},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(4-(a.dayOfWeek()||7),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,u.local.invalidMonth||u.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,u.local.invalidDate||u.regionalOptions[""].invalidDate);e=a.year();t=a.month();r=a.day();if(e<0){e++}if(t<3){t+=12;e--}var n=Math.floor(e/100);var i=2-n+Math.floor(n/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r+i-1524.5},fromJD:function(e){var t=Math.floor(e+.5);var r=Math.floor((t-1867216.25)/36524.25);r=t+1+r-Math.floor(r/4);var a=r+1524;var n=Math.floor((a-122.1)/365.25);var i=Math.floor(365.25*n);var o=Math.floor((a-i)/30.6001);var s=a-i-Math.floor(o*30.6001);var l=o-(o>13.5?13:1);var u=n-(l>2.5?4716:4715);if(u<=0){u--}return this.newDate(u,l,s)},toJSDate:function(e,t,r){var a=this._validate(e,t,r,u.local.invalidDate||u.regionalOptions[""].invalidDate);var n=new Date(a.year(),a.month()-1,a.day());n.setHours(0);n.setMinutes(0);n.setSeconds(0);n.setMilliseconds(0);n.setHours(n.getHours()>12?n.getHours()+2:0);return n},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var u=t.exports=new n;u.cdate=i;u.baseCalendar=s;u.calendars.gregorian=l},{"object-assign":53}],81:[function(e,t,r){var a=e("object-assign");var E=e("./main");a(E.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});E.local=E.regionalOptions[""];a(E.cdate.prototype,{formatDate:function(e,t){if(typeof e!=="string"){t=e;e=""}return this._calendar.formatDate(e||"",this,t)}});a(E.baseCalendar.prototype,{UNIX_EPOCH:E.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:E.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(a,e,t){if(typeof a!=="string"){t=e;e=a;a=""}if(!e){return""}if(e.calendar()!==this){throw E.local.invalidFormat||E.regionalOptions[""].invalidFormat}a=a||this.local.dateFormat;t=t||{};var r=t.dayNamesShort||this.local.dayNamesShort;var n=t.dayNames||this.local.dayNames;var i=t.monthNumbers||this.local.monthNumbers;var o=t.monthNamesShort||this.local.monthNamesShort;var s=t.monthNames||this.local.monthNames;var l=t.calculateWeek||this.local.calculateWeek;var u=function(e,t){var r=1;while(x+r<a.length&&a.charAt(x+r)===e){r++}x+=r-1;return Math.floor(r/(t||1))>1};var c=function(e,t,r,a){var n=""+t;if(u(e,a)){while(n.length<r){n="0"+n}}return n};var f=function(e,t,r,a){return u(e)?a[t]:r[t]};var d=this;var v=function(e){return typeof i==="function"?i.call(d,e,u("m")):m(c("m",e.month(),2))};var p=function(e,t){if(t){return typeof s==="function"?s.call(d,e):s[e.month()-d.minMonth]}else{return typeof o==="function"?o.call(d,e):o[e.month()-d.minMonth]}};var h=this.local.digits;var m=function(e){return t.localNumbers&&h?h(e):e};var g="";var y=false;for(var x=0;x<a.length;x++){if(y){if(a.charAt(x)==="'"&&!u("'")){y=false}else{g+=a.charAt(x)}}else{switch(a.charAt(x)){case"d":g+=m(c("d",e.day(),2));break;case"D":g+=f("D",e.dayOfWeek(),r,n);break;case"o":g+=c("o",e.dayOfYear(),3);break;case"w":g+=c("w",e.weekOfYear(),2);break;case"m":g+=v(e);break;case"M":g+=p(e,u("M"));break;case"y":g+=u("y",2)?e.year():(e.year()%100<10?"0":"")+e.year()%100;break;case"Y":u("Y",2);g+=e.formatYear();break;case"J":g+=e.toJD();break;case"@":g+=(e.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":g+=(e.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":if(u("'")){g+="'"}else{y=true}break;default:g+=a.charAt(x)}}}return g},parseDate:function(a,o,e){if(o==null){throw E.local.invalidArguments||E.regionalOptions[""].invalidArguments}o=typeof o==="object"?o.toString():o+"";if(o===""){return null}a=a||this.local.dateFormat;e=e||{};var t=e.shortYearCutoff||this.shortYearCutoff;t=typeof t!=="string"?t:this.today().year()%100+parseInt(t,10);var r=e.dayNamesShort||this.local.dayNamesShort;var n=e.dayNames||this.local.dayNames;var i=e.parseMonth||this.local.parseMonth;var s=e.monthNumbers||this.local.monthNumbers;var l=e.monthNamesShort||this.local.monthNamesShort;var u=e.monthNames||this.local.monthNames;var c=-1;var f=-1;var d=-1;var v=-1;var p=-1;var h=false;var m=false;var g=function(e,t){var r=1;while(M+r<a.length&&a.charAt(M+r)===e){r++}M+=r-1;return Math.floor(r/(t||1))>1};var y=function(e,t){var r=g(e,t);var a=[2,3,r?4:2,r?4:2,10,11,20]["oyYJ@!".indexOf(e)+1];var n=new RegExp("^-?\\d{1,"+a+"}");var i=o.substring(k).match(n);if(!i){throw(E.local.missingNumberAt||E.regionalOptions[""].missingNumberAt).replace(/\{0\}/,k)}k+=i[0].length;return parseInt(i[0],10)};var x=this;var b=function(){if(typeof s==="function"){g("m");var e=s.call(x,o.substring(k));k+=e.length;return e}return y("m")};var _=function(e,t,r,a){var n=g(e,a)?r:t;for(var i=0;i<n.length;i++){if(o.substr(k,n[i].length).toLowerCase()===n[i].toLowerCase()){k+=n[i].length;return i+x.minMonth}}throw(E.local.unknownNameAt||E.regionalOptions[""].unknownNameAt).replace(/\{0\}/,k)};var w=function(){if(typeof u==="function"){var e=g("M")?u.call(x,o.substring(k)):l.call(x,o.substring(k));k+=e.length;return e}return _("M",l,u)};var T=function(){if(o.charAt(k)!==a.charAt(M)){throw(E.local.unexpectedLiteralAt||E.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,k)}k++};var k=0;for(var M=0;M<a.length;M++){if(m){if(a.charAt(M)==="'"&&!g("'")){m=false}else{T()}}else{switch(a.charAt(M)){case"d":v=y("d");break;case"D":_("D",r,n);break;case"o":p=y("o");break;case"w":y("w");break;case"m":d=b();break;case"M":d=w();break;case"y":var A=M;h=!g("y",2);M=A;f=y("y",2);break;case"Y":f=y("Y",2);break;case"J":c=y("J")+.5;if(o.charAt(k)==="."){k++;y("J")}break;case"@":c=y("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":c=y("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":k=o.length;break;case"'":if(g("'")){T()}else{m=true}break;default:T()}}}if(k<o.length){throw E.local.unexpectedText||E.regionalOptions[""].unexpectedText}if(f===-1){f=this.today().year()}else if(f<100&&h){f+=t===-1?1900:this.today().year()-this.today().year()%100-(f<=t?0:100)}if(typeof d==="string"){d=i.call(this,f,d)}if(p>-1){d=1;v=p;for(var S=this.daysInMonth(f,d);v>S;S=this.daysInMonth(f,d)){d++;v-=S}}return c>-1?this.fromJD(c):this.newDate(f,d,v)},determineDate:function(e,t,n,i,o){if(n&&typeof n!=="object"){o=i;i=n;n=null}if(typeof i!=="string"){o=i;i=""}var s=this;var r=function(e){try{return s.parseDate(i,e,o)}catch(e){}e=e.toLowerCase();var t=(e.match(/^c/)&&n?n.newDate():null)||s.today();var r=/([+-]?[0-9]+)\s*(d|w|m|y)?/g;var a=r.exec(e);while(a){t.add(parseInt(a[1],10),a[2]||"d");a=r.exec(e)}return t};t=t?t.newDate():null;e=e==null?t:typeof e==="string"?r(e):typeof e==="number"?isNaN(e)||e===Infinity||e===-Infinity?t:s.today().add(e,"d"):s.newDate(e);return e}})},{"./main":80,"object-assign":53}],82:[function(e,t,r){"use strict";t.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:true},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:true}]},{}],83:[function(e,t,r){"use strict";var a=e("./arrow_paths");var n=e("../../plots/font_attributes");var i=e("../../plots/cartesian/constants");var o=e("../../plot_api/plot_template").templatedArray;var s=e("../../constants/axis_placeable_objects");function l(e){return["In order for absolute positioning of the arrow to work, *a"+e+"ref* must be exactly the same as *"+e+"ref*, otherwise *a"+e+"ref* will revert to *pixel* (explained next).","For relative positioning, *a"+e+"ref* can be set to *pixel*,","in which case the *a"+e+"* value is specified in pixels","relative to *"+e+"*.","Absolute positioning is useful","for trendline annotations which should continue to indicate","the correct trend when zoomed. Relative positioning is useful","for specifying the text offset for an annotated point."].join(" ")}function u(e,t,r){return["Sets the",e,"component of the arrow tail about the arrow head.","If `a"+e+"ref` is `pixel`, a positive (negative)","component corresponds to an arrow pointing","from",r,"to",t,"("+t,"to",r+").","If `a"+e+"ref` is not `pixel` and is exactly the same as `"+e+"ref`,","this is an absolute value on that axis,","like `"+e+"`, specified in the same coordinates as `"+e+"ref`."].join(" ")}t.exports=o("annotation",{visible:{valType:"boolean",dflt:true,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:n({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:true,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:a.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:a.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",i.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",i.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[false,"onoff","onout"],dflt:false,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:n({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":206,"../../plot_api/plot_template":265,"../../plots/cartesian/constants":283,"../../plots/font_attributes":305,"./arrow_paths":82}],84:[function(e,t,r){"use strict";var n=e("../../lib");var b=e("../../plots/cartesian/axes");var i=e("./draw").draw;t.exports=function e(t){var r=t._fullLayout;var a=n.filterVisible(r.annotations);if(a.length&&t._fullData.length){return n.syncOrAsync([i,o],t)}};function o(i){var e=i._fullLayout;n.filterVisible(e.annotations).forEach(function(e){var t=b.getFromId(i,e.xref);var r=b.getFromId(i,e.yref);var a=b.getRefType(e.xref);var n=b.getRefType(e.yref);e._extremes={};if(a==="range")s(e,t);if(n==="range")s(e,r)})}function s(e,t){var r=t._id;var a=r.charAt(0);var n=e[a];var i=e["a"+a];var o=e[a+"ref"];var s=e["a"+a+"ref"];var l=e["_"+a+"padplus"];var u=e["_"+a+"padminus"];var c={x:1,y:-1}[a]*e[a+"shift"];var f=3*e.arrowsize*e.arrowwidth||0;var d=f+c;var v=f-c;var p=3*e.startarrowsize*e.arrowwidth||0;var h=p+c;var m=p-c;var g;if(s===o){var y=b.findExtremes(t,[t.r2c(n)],{ppadplus:d,ppadminus:v});var x=b.findExtremes(t,[t.r2c(i)],{ppadplus:Math.max(l,h),ppadminus:Math.max(u,m)});g={min:[y.min[0],x.min[0]],max:[y.max[0],x.max[0]]}}else{h=i?h+i:h;m=i?m-i:m;g=b.findExtremes(t,[t.r2c(n)],{ppadplus:Math.max(l,d,h),ppadminus:Math.max(u,v,m)})}e._extremes[r]=g}},{"../../lib":230,"../../plots/cartesian/axes":276,"./draw":89}],85:[function(e,t,r){"use strict";var u=e("../../lib");var c=e("../../registry");var f=e("../../plot_api/plot_template").arrayEditor;t.exports={hasClickToShow:a,onClick:n};function a(e,t){var r=d(e,t);return r.on.length>0||r.explicitOff.length>0}function n(e,t){var r=d(e,t);var a=r.on;var n=r.off.concat(r.explicitOff);var i={};var o=e._fullLayout.annotations;var s,l;if(!(a.length||n.length))return;for(s=0;s<a.length;s++){l=f(e.layout,"annotations",o[a[s]]);l.modifyItem("visible",true);u.extendFlat(i,l.getUpdateObj())}for(s=0;s<n.length;s++){l=f(e.layout,"annotations",o[n[s]]);l.modifyItem("visible",false);u.extendFlat(i,l.getUpdateObj())}return c.call("update",e,{},i)}function d(e,t){var r=e._fullLayout.annotations;var a=[];var n=[];var i=[];var o=(t||[]).length;var s,l,u,c,f,d,v,p;for(s=0;s<r.length;s++){u=r[s];c=u.clicktoshow;if(c){for(l=0;l<o;l++){f=t[l];d=f.xaxis;v=f.yaxis;if(d._id===u.xref&&v._id===u.yref&&d.d2r(f.x)===h(u._xclick,d)&&v.d2r(f.y)===h(u._yclick,v)){if(u.visible){if(c==="onout")p=n;else p=i}else{p=a}p.push(s);break}}if(l===o){if(u.visible&&c==="onout")n.push(s)}}}return{on:a,off:n,explicitOff:i}}function h(e,t){return t.type==="log"?t.l2r(e):t.d2r(e)}},{"../../lib":230,"../../plot_api/plot_template":265,"../../registry":313}],86:[function(e,t,r){"use strict";var y=e("../../lib");var x=e("../color");t.exports=function e(t,r,a,n){n("opacity");var i=n("bgcolor");var o=n("bordercolor");var s=x.opacity(o);n("borderpad");var l=n("borderwidth");var u=n("showarrow");n("text",u?" ":a._dfltTitle.annotation);n("textangle");y.coerceFont(n,"font",a.font);n("width");n("align");var c=n("height");if(c)n("valign");if(u){var f=n("arrowside");var d;var v;if(f.indexOf("end")!==-1){d=n("arrowhead");v=n("arrowsize")}if(f.indexOf("start")!==-1){n("startarrowhead",d);n("startarrowsize",v)}n("arrowcolor",s?r.bordercolor:x.defaultLine);n("arrowwidth",(s&&l||1)*2);n("standoff");n("startstandoff")}var p=n("hovertext");var h=a.hoverlabel||{};if(p){var m=n("hoverlabel.bgcolor",h.bgcolor||(x.opacity(i)?x.rgb(i):x.defaultLine));var g=n("hoverlabel.bordercolor",h.bordercolor||x.contrast(m));y.coerceFont(n,"hoverlabel.font",{family:h.font.family,size:h.font.size,color:h.font.color||g})}n("captureevents",!!p)}},{"../../lib":230,"../color":100}],87:[function(e,t,r){"use strict";var v=e("fast-isnumeric");var p=e("../../lib/to_log_range");t.exports=function e(t,a,r,n){a=a||{};var i=r==="log"&&a.type==="linear";var o=r==="linear"&&a.type==="log";if(!(i||o))return;var s=t._fullLayout.annotations;var l=a._id.charAt(0);var u;var c;function f(e){var t=u[e];var r=null;if(i)r=p(t,a.range);else r=Math.pow(10,t);if(!v(r))r=null;n(c+e,r)}for(var d=0;d<s.length;d++){u=s[d];c="annotations["+d+"].";if(u[l+"ref"]===a._id)f(l);if(u["a"+l+"ref"]===a._id)f("a"+l)}}},{"../../lib/to_log_range":254,"fast-isnumeric":15}],88:[function(e,t,r){"use strict";var x=e("../../lib");var b=e("../../plots/cartesian/axes");var a=e("../../plots/array_container_defaults");var _=e("./common_defaults");var w=e("./attributes");t.exports=function e(t,r){a(t,r,{name:"annotations",handleItemDefaults:n})};function n(r,a,e){function t(e,t){return x.coerce(r,a,w,e,t)}var n=t("visible");var i=t("clicktoshow");if(!(n||i))return;_(r,a,e,t);var o=a.showarrow;var s=["x","y"];var l=[-10,-30];var u={_fullLayout:e};for(var c=0;c<2;c++){var f=s[c];var d=b.coerceRef(r,a,u,f,"","paper");if(d!=="paper"){var v=b.getFromId(u,d);v._annIndices.push(a._index)}b.coercePosition(a,u,t,d,f,.5);if(o){var p="a"+f;var h=b.coerceRef(r,a,u,p,"pixel",["pixel","paper"]);if(h!=="pixel"&&h!==d){h=a[p]="pixel"}var m=h==="pixel"?l[c]:.4;b.coercePosition(a,u,t,h,p,m)}t(f+"anchor");t(f+"shift")}x.noneOrAll(r,a,["x","y"]);if(o){x.noneOrAll(r,a,["ax","ay"])}if(i){var g=t("xclick");var y=t("yclick");a._xclick=g===undefined?a.x:b.cleanPosition(g,u,a.xref);a._yclick=y===undefined?a.y:b.cleanPosition(y,u,a.yref)}}},{"../../lib":230,"../../plots/array_container_defaults":271,"../../plots/cartesian/axes":276,"./attributes":83,"./common_defaults":86}],89:[function(e,t,r){"use strict";var c=e("@plotly/d3");var me=e("../../registry");var a=e("../../plots/plots");var ge=e("../../lib");var ye=ge.strTranslate;var xe=e("../../plots/cartesian/axes");var be=e("../color");var _e=e("../drawing");var f=e("../fx");var we=e("../../lib/svg_text_utils");var Te=e("../../lib/setcursor");var ke=e("../dragelement");var d=e("../../plot_api/plot_template").arrayEditor;var Me=e("./draw_arrow_head");t.exports={draw:n,drawOne:i,drawRaw:o};function n(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var r=0;r<t.annotations.length;r++){if(t.annotations[r].visible){i(e,r)}}return a.previousPromises(e)}function i(e,t){var r=e._fullLayout;var a=r.annotations[t]||{};var n=xe.getFromId(e,a.xref);var i=xe.getFromId(e,a.yref);if(n)n.setScale();if(i)i.setScale();o(e,a,t,false,n,i)}function Ae(e,t,r,a,n){var i=n[r];var o=n[r+"ref"];var s=r.indexOf("y")!==-1;var l=xe.getRefType(o)==="domain";var u=s?a.h:a.w;if(e){if(l){return i+(s?-t:t)/e._length}else{return e.p2r(e.r2p(i)+t)}}else{return i+(s?-t:t)/u}}function o(V,G,r,W,$,Z){var X=V._fullLayout;var J=V._fullLayout._size;var K=V._context.edits;var e,t;if(W){e="annotation-"+W;t=W+".annotations"}else{e="annotation";t="annotations"}var a=d(V.layout,t,G);var Q=a.modifyBase;var ee=a.modifyItem;var te=a.getUpdateObj;X._infolayer.selectAll("."+e+'[data-index="'+r+'"]').remove();var re="clip"+X._uid+"_ann"+r;if(!G._input||G.visible===false){c.selectAll("#"+re).remove();return}var ae={x:{},y:{}};var ne=+G.textangle||0;var ie=X._infolayer.append("g").classed(e,true).attr("data-index",String(r)).style("opacity",G.opacity);var oe=ie.append("g").classed("annotation-text-g",true);var se=K[G.showarrow?"annotationTail":"annotationPosition"];var n=G.captureevents||K.annotationText||se;function le(e){var t={index:r,annotation:G._input,fullAnnotation:G,event:e};if(W){t.subplotId=W}return t}var ue=oe.append("g").style("pointer-events",n?"all":null).call(Te,"pointer").on("click",function(){V._dragging=false;V.emit("plotly_clickannotation",le(c.event))});if(G.hovertext){ue.on("mouseover",function(){var e=G.hoverlabel;var t=e.font;var r=this.getBoundingClientRect();var a=V.getBoundingClientRect();f.loneHover({x0:r.left-a.left,x1:r.right-a.left,y:(r.top+r.bottom)/2-a.top,text:G.hovertext,color:e.bgcolor,borderColor:e.bordercolor,fontFamily:t.family,fontSize:t.size,fontColor:t.color},{container:X._hoverlayer.node(),outerContainer:X._paper.node(),gd:V})}).on("mouseout",function(){f.loneUnhover(X._hoverlayer.node())})}var ce=G.borderwidth;var i=G.borderpad;var fe=ce+i;var de=ue.append("rect").attr("class","bg").style("stroke-width",ce+"px").call(be.stroke,G.bordercolor).call(be.fill,G.bgcolor);var ve=G.width||G.height;var pe=X._topclips.selectAll("#"+re).data(ve?[0]:[]);pe.enter().append("clipPath").classed("annclip",true).attr("id",re).append("rect");pe.exit().remove();var o=G.font;var s=X._meta?ge.templateString(G.text,X._meta):G.text;var he=ue.append("text").classed("annotation-text",true).text(s);function l(e){e.call(_e.font,o).attr({"text-anchor":{left:"start",right:"end"}[G.align]||"middle"});we.convertToTspans(e,V,u);return e}function u(){var e=he.selectAll("a");if(e.size()===1&&e.text()===he.text()){var t=ue.insert("a",":first-child").attr({"xlink:xlink:href":e.attr("xlink:href"),"xlink:xlink:show":e.attr("xlink:show")}).style({cursor:"pointer"});t.node().appendChild(de.node())}var r=ue.select(".annotation-text-math-group");var a=!r.empty();var n=_e.bBox((a?r:he).node());var i=n.width;var o=n.height;var s=G.width||i;var l=G.height||o;var u=Math.round(s+2*fe);var c=Math.round(l+2*fe);function f(e,t){if(t==="auto"){if(e<1/3)t="left";else if(e>2/3)t="right";else t="center"}return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t]}var d=false;var v=["x","y"];for(var p=0;p<v.length;p++){var h=v[p];var m=G[h+"ref"]||h;var g=G["a"+h+"ref"];var y={x:$,y:Z}[h];var x=(ne+(h==="x"?0:-90))*Math.PI/180;var b=u*Math.cos(x);var _=c*Math.sin(x);var w=Math.abs(b)+Math.abs(_);var T=G[h+"anchor"];var k=G[h+"shift"]*(h==="x"?1:-1);var M=ae[h];var A;var S;var E;var L;var C;var D=xe.getRefType(m);if(y&&D!=="domain"){var O=y.r2fraction(G[h]);if(O<0||O>1){if(g===m){O=y.r2fraction(G["a"+h]);if(O<0||O>1){d=true}}else{d=true}}A=y._offset+y.r2p(G[h]);L=.5}else{var I=D==="domain";if(h==="x"){E=G[h];A=I?y._offset+y._length*E:A=J.l+J.w*E}else{E=1-G[h];A=I?y._offset+y._length*E:A=J.t+J.h*E}L=G.showarrow?.5:E}if(G.showarrow){M.head=A;var P=G["a"+h];C=b*f(.5,G.xanchor)-_*f(.5,G.yanchor);if(g===m){var R=xe.getRefType(g);if(R==="domain"){if(h==="y"){P=1-P}M.tail=y._offset+y._length*P}else if(R==="paper"){if(h==="y"){P=1-P;M.tail=J.t+J.h*P}else{M.tail=J.l+J.w*P}}else{M.tail=y._offset+y.r2p(P)}S=C}else{M.tail=A+P;S=C+P}M.text=M.tail+C;var N=X[h==="x"?"width":"height"];if(m==="paper"){M.head=ge.constrain(M.head,1,N-1)}if(g==="pixel"){var z=-Math.max(M.tail-3,M.text);var F=Math.min(M.tail+3,M.text)-N;if(z>0){M.tail+=z;M.text+=z}else if(F>0){M.tail-=F;M.text-=F}}M.tail+=k;M.head+=k}else{C=w*f(L,T);S=C;M.text=A+C}M.text+=k;C+=k;S+=k;G["_"+h+"padplus"]=w/2+S;G["_"+h+"padminus"]=w/2-S;G["_"+h+"size"]=w;G["_"+h+"shift"]=C}if(d){ue.remove();return}var j=0;var H=0;if(G.align!=="left"){j=(s-i)*(G.align==="center"?.5:1)}if(G.valign!=="top"){H=(l-o)*(G.valign==="middle"?.5:1)}if(a){r.select("svg").attr({x:fe+j-1,y:fe+H}).call(_e.setClipUrl,ve?re:null,V)}else{var B=fe+H-n.top;var q=fe+j-n.left;he.call(we.positionText,q,B).call(_e.setClipUrl,ve?re:null,V)}pe.select("rect").call(_e.setRect,fe,fe,s,l);de.call(_e.setRect,ce/2,ce/2,u-ce,c-ce);ue.call(_e.setTranslate,Math.round(ae.x.text-u/2),Math.round(ae.y.text-c/2));oe.attr({transform:"rotate("+ne+","+ae.x.text+","+ae.y.text+")"});var U=function(e,t){ie.selectAll(".annotation-arrow-g").remove();var r=ae.x.head;var a=ae.y.head;var n=ae.x.tail+e;var i=ae.y.tail+t;var o=ae.x.text+e;var s=ae.y.text+t;var l=ge.rotationXYMatrix(ne,o,s);var u=ge.apply2DTransform(l);var c=ge.apply2DTransform2(l);var f=+de.attr("width");var d=+de.attr("height");var v=o-.5*f;var p=v+f;var h=s-.5*d;var m=h+d;var g=[[v,h,v,m],[v,m,p,m],[p,m,p,h],[p,h,v,h]].map(c);if(g.reduce(function(e,t){return e^!!ge.segmentsIntersect(r,a,r+1e6,a+1e6,t[0],t[1],t[2],t[3])},false)){return}g.forEach(function(e){var t=ge.segmentsIntersect(n,i,r,a,e[0],e[1],e[2],e[3]);if(t){n=t.x;i=t.y}});var y=G.arrowwidth;var x=G.arrowcolor;var b=G.arrowside;var _=ie.append("g").style({opacity:be.opacity(x)}).classed("annotation-arrow-g",true);var w=_.append("path").attr("d","M"+n+","+i+"L"+r+","+a).style("stroke-width",y+"px").call(be.stroke,be.rgb(x));Me(w,b,G);if(K.annotationPosition&&w.node().parentNode&&!W){var T=r;var k=a;if(G.standoff){var M=Math.sqrt(Math.pow(r-n,2)+Math.pow(a-i,2));T+=G.standoff*(n-r)/M;k+=G.standoff*(i-a)/M}var A=_.append("path").classed("annotation-arrow",true).classed("anndrag",true).classed("cursor-move",true).attr({d:"M3,3H-3V-3H3ZM0,0L"+(n-T)+","+(i-k),transform:ye(T,k)}).style("stroke-width",y+6+"px").call(be.stroke,"rgba(0,0,0,0)").call(be.fill,"rgba(0,0,0,0)");var S,E;ke.init({element:A.node(),gd:V,prepFn:function(){var e=_e.getTranslate(ue);S=e.x;E=e.y;if($&&$.autorange){Q($._name+".autorange",true)}if(Z&&Z.autorange){Q(Z._name+".autorange",true)}},moveFn:function(e,t){var r=u(S,E);var a=r[0]+e;var n=r[1]+t;ue.call(_e.setTranslate,a,n);ee("x",Ae($,e,"x",J,G));ee("y",Ae(Z,t,"y",J,G));if(G.axref===G.xref){ee("ax",Ae($,e,"ax",J,G))}if(G.ayref===G.yref){ee("ay",Ae(Z,t,"ay",J,G))}_.attr("transform",ye(e,t));oe.attr({transform:"rotate("+ne+","+a+","+n+")"})},doneFn:function(){me.call("_guiRelayout",V,te());var e=document.querySelector(".js-notes-box-panel");if(e)e.redraw(e.selectedObj)}})}};if(G.showarrow)U(0,0);if(se){var Y;ke.init({element:ue.node(),gd:V,prepFn:function(){Y=oe.attr("transform")},moveFn:function(e,t){var r="pointer";if(G.showarrow){if(G.axref===G.xref){ee("ax",Ae($,e,"ax",J,G))}else{ee("ax",G.ax+e)}if(G.ayref===G.yref){ee("ay",Ae(Z,t,"ay",J.w,G))}else{ee("ay",G.ay+t)}U(e,t)}else if(!W){var a,n;if($){a=Ae($,e,"x",J,G)}else{var i=G._xsize/J.w;var o=G.x+(G._xshift-G.xshift)/J.w-i/2;a=ke.align(o+e/J.w,i,0,1,G.xanchor)}if(Z){n=Ae(Z,t,"y",J,G)}else{var s=G._ysize/J.h;var l=G.y-(G._yshift+G.yshift)/J.h-s/2;n=ke.align(l-t/J.h,s,0,1,G.yanchor)}ee("x",a);ee("y",n);if(!$||!Z){r=ke.getCursor($?.5:a,Z?.5:n,G.xanchor,G.yanchor)}}else return;oe.attr({transform:ye(e,t)+Y});Te(ue,r)},clickFn:function(e,t){if(G.captureevents){V.emit("plotly_clickannotation",le(t))}},doneFn:function(){Te(ue);me.call("_guiRelayout",V,te());var e=document.querySelector(".js-notes-box-panel");if(e)e.redraw(e.selectedObj)}})}}if(K.annotationText){he.call(we.makeEditable,{delegate:ue,gd:V}).call(l).on("edit",function(e){G.text=e;this.call(l);ee("text",e);if($&&$.autorange){Q($._name+".autorange",true)}if(Z&&Z.autorange){Q(Z._name+".autorange",true)}me.call("_guiRelayout",V,te())})}else he.call(l)}},{"../../lib":230,"../../lib/setcursor":250,"../../lib/svg_text_utils":252,"../../plot_api/plot_template":265,"../../plots/cartesian/axes":276,"../../plots/plots":311,"../../registry":313,"../color":100,"../dragelement":119,"../drawing":122,"../fx":140,"./draw_arrow_head":90,"@plotly/d3":11}],90:[function(e,t,r){"use strict";var O=e("@plotly/d3");var I=e("../color");var P=e("./arrow_paths");var a=e("../../lib");var R=a.strScale;var N=a.strRotate;var z=a.strTranslate;t.exports=function e(n,t,i){var o=n.node();var r=P[i.arrowhead||0];var a=P[i.startarrowhead||0];var s=(i.arrowwidth||1)*(i.arrowsize||1);var l=(i.arrowwidth||1)*(i.startarrowsize||1);var u=t.indexOf("start")>=0;var c=t.indexOf("end")>=0;var f=r.backoff*s+i.standoff;var d=a.backoff*l+i.startstandoff;var v,p,h,m;if(o.nodeName==="line"){v={x:+n.attr("x1"),y:+n.attr("y1")};p={x:+n.attr("x2"),y:+n.attr("y2")};var g=v.x-p.x;var y=v.y-p.y;h=Math.atan2(y,g);m=h+Math.PI;if(f&&d){if(f+d>Math.sqrt(g*g+y*y)){C();return}}if(f){if(f*f>g*g+y*y){C();return}var x=f*Math.cos(h);var b=f*Math.sin(h);p.x+=x;p.y+=b;n.attr({x2:p.x,y2:p.y})}if(d){if(d*d>g*g+y*y){C();return}var _=d*Math.cos(h);var w=d*Math.sin(h);v.x-=_;v.y-=w;n.attr({x1:v.x,y1:v.y})}}else if(o.nodeName==="path"){var T=o.getTotalLength();var k="";if(T<f+d){C();return}var M=o.getPointAtLength(0);var A=o.getPointAtLength(.1);h=Math.atan2(M.y-A.y,M.x-A.x);v=o.getPointAtLength(Math.min(d,T));k="0px,"+d+"px,";var S=o.getPointAtLength(T);var E=o.getPointAtLength(T-.1);m=Math.atan2(S.y-E.y,S.x-E.x);p=o.getPointAtLength(Math.max(0,T-f));var L=k?d+f:f;k+=T-L+"px,"+T+"px";n.style("stroke-dasharray",k)}function C(){n.style("stroke-dasharray","0px,100px")}function D(e,t,r,a){if(!e.path)return;if(e.noRotate)r=0;O.select(o.parentNode).append("path").attr({class:n.attr("class"),d:e.path,transform:z(t.x,t.y)+N(r*180/Math.PI)+R(a)}).style({fill:I.rgb(i.arrowcolor),"stroke-width":0})}if(u)D(a,v,h,l);if(c)D(r,p,m,s)}},{"../../lib":230,"../color":100,"./arrow_paths":82,"@plotly/d3":11}],91:[function(e,t,r){"use strict";var a=e("./draw");var n=e("./click");t.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:a.draw,drawOne:a.drawOne,drawRaw:a.drawRaw,hasClickToShow:n.hasClickToShow,onClick:n.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":289,"./attributes":83,"./calc_autorange":84,"./click":85,"./convert_coords":87,"./defaults":88,"./draw":89}],92:[function(e,t,r){"use strict";var a=e("../annotations/attributes");var n=e("../../plot_api/edit_types").overrideAll;var i=e("../../plot_api/plot_template").templatedArray;t.exports=n(i("annotation",{visible:a.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:a.xanchor,xshift:a.xshift,yanchor:a.yanchor,yshift:a.yshift,text:a.text,textangle:a.textangle,font:a.font,width:a.width,height:a.height,opacity:a.opacity,align:a.align,valign:a.valign,bgcolor:a.bgcolor,bordercolor:a.bordercolor,borderpad:a.borderpad,borderwidth:a.borderwidth,showarrow:a.showarrow,arrowcolor:a.arrowcolor,arrowhead:a.arrowhead,startarrowhead:a.startarrowhead,arrowside:a.arrowside,arrowsize:a.arrowsize,startarrowsize:a.startarrowsize,arrowwidth:a.arrowwidth,standoff:a.standoff,startstandoff:a.startstandoff,hovertext:a.hovertext,hoverlabel:a.hoverlabel,captureevents:a.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":258,"../../plot_api/plot_template":265,"../annotations/attributes":83}],93:[function(e,t,r){"use strict";var o=e("../../lib");var s=e("../../plots/cartesian/axes");t.exports=function e(t){var r=t.fullSceneLayout;var a=r.annotations;for(var n=0;n<a.length;n++){i(a[n],t)}t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function i(e,t){var r=t.fullSceneLayout;var a=r.domain;var n=t.fullLayout._size;var i={pdata:null,type:"linear",autorange:false,range:[-Infinity,Infinity]};e._xa={};o.extendFlat(e._xa,i);s.setConvert(e._xa);e._xa._offset=n.l+a.x[0]*n.w;e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*n.w*(a.x[1]-a.x[0])};e._ya={};o.extendFlat(e._ya,i);s.setConvert(e._ya);e._ya._offset=n.t+(1-a.y[1])*n.h;e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*n.h*(a.y[1]-a.y[0])}}},{"../../lib":230,"../../plots/cartesian/axes":276}],94:[function(e,t,r){"use strict";var s=e("../../lib");var l=e("../../plots/cartesian/axes");var n=e("../../plots/array_container_defaults");var u=e("../annotations/common_defaults");var c=e("./attributes");t.exports=function e(t,r,a){n(t,r,{name:"annotations",handleItemDefaults:i,fullLayout:a.fullLayout})};function i(r,a,n,e){function i(e,t){return s.coerce(r,a,c,e,t)}function t(e){var t=e+"axis";var r={_fullLayout:{}};r._fullLayout[t]=n[t];return l.coercePosition(a,r,i,e,e,.5)}var o=i("visible");if(!o)return;u(r,a,e.fullLayout,i);t("x");t("y");t("z");s.noneOrAll(r,a,["x","y","z"]);a.xref="x";a.yref="y";a.zref="z";i("xanchor");i("yanchor");i("xshift");i("yshift");if(a.showarrow){a.axref="pixel";a.ayref="pixel";i("ax",-10);i("ay",-30);s.noneOrAll(r,a,["ax","ay"])}}},{"../../lib":230,"../../plots/array_container_defaults":271,"../../plots/cartesian/axes":276,"../annotations/common_defaults":86,"./attributes":92}],95:[function(e,t,r){"use strict";var v=e("../annotations/draw").drawRaw;var p=e("../../plots/gl3d/project");var h=["x","y","z"];t.exports=function e(t){var r=t.fullSceneLayout;var a=t.dataScale;var n=r.annotations;for(var i=0;i<n.length;i++){var o=n[i];var s=false;for(var l=0;l<3;l++){var u=h[l];var c=o[u];var f=r[u+"axis"];var d=f.r2fraction(c);if(d<0||d>1){s=true;break}}if(s){t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+i+'"]').remove()}else{o._pdata=p(t.glplot.cameraParams,[r.xaxis.r2l(o.x)*a[0],r.yaxis.r2l(o.y)*a[1],r.zaxis.r2l(o.z)*a[2]]);v(t.graphDiv,o,i,t.id,o._xa,o._ya)}}}},{"../../plots/gl3d/project":308,"../annotations/draw":89}],96:[function(e,t,r){"use strict";var s=e("../../registry");var l=e("../../lib");t.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:a,convert:e("./convert"),draw:e("./draw")};function a(e,t){var r=s.subplotsRegistry.gl3d;if(!r)return;var a=r.attrRegex;var n=Object.keys(e);for(var i=0;i<n.length;i++){var o=n[i];if(a.test(o)&&(e[o].annotations||[]).length){l.pushUnique(t._basePlotModules,r);l.pushUnique(t._subplots.gl3d,o)}}}},{"../../lib":230,"../../registry":313,"./attributes":92,"./convert":93,"./defaults":94,"./draw":95}],97:[function(e,t,r){"use strict";t.exports=e("world-calendars/dist/main");e("world-calendars/dist/plus");e("world-calendars/dist/calendars/chinese");e("world-calendars/dist/calendars/coptic");e("world-calendars/dist/calendars/discworld");e("world-calendars/dist/calendars/ethiopian");e("world-calendars/dist/calendars/hebrew");e("world-calendars/dist/calendars/islamic");e("world-calendars/dist/calendars/julian");e("world-calendars/dist/calendars/mayan");e("world-calendars/dist/calendars/nanakshahi");e("world-calendars/dist/calendars/nepali");e("world-calendars/dist/calendars/persian");e("world-calendars/dist/calendars/taiwan");e("world-calendars/dist/calendars/thai");e("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":66,"world-calendars/dist/calendars/coptic":67,"world-calendars/dist/calendars/discworld":68,"world-calendars/dist/calendars/ethiopian":69,"world-calendars/dist/calendars/hebrew":70,"world-calendars/dist/calendars/islamic":71,"world-calendars/dist/calendars/julian":72,"world-calendars/dist/calendars/mayan":73,"world-calendars/dist/calendars/nanakshahi":74,"world-calendars/dist/calendars/nepali":75,"world-calendars/dist/calendars/persian":76,"world-calendars/dist/calendars/taiwan":77,"world-calendars/dist/calendars/thai":78,"world-calendars/dist/calendars/ummalqura":79,"world-calendars/dist/main":80,"world-calendars/dist/plus":81}],98:[function(e,t,r){"use strict";var a=e("./calendars");var i=e("../../lib");var n=e("../../constants/numerical");var f=n.EPOCHJD;var d=n.ONEDAY;var o={valType:"enumerated",values:Object.keys(a.calendars),editType:"calc",dflt:"gregorian"};var s=function(e,t,r,a){var n={};n[r]=o;return i.coerce(e,t,n,r,a)};var l=function(e,t,r,a){for(var n=0;n<r.length;n++){s(e,t,r[n]+"calendar",a.calendar)}};var u={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"};var c={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"};var v={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]};var p="##";var h={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:p,w:p,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function m(e,t,r){var a=Math.floor((t+.05)/d)+f;var n=y(r).fromJD(a);var i=0;var o,s,l,u,c;while((i=e.indexOf("%",i))!==-1){o=e.charAt(i+1);if(o==="0"||o==="-"||o==="_"){l=3;s=e.charAt(i+2);if(o==="_")o="-"}else{s=o;o="0";l=2}u=h[s];if(!u){i+=l}else{if(u===p)c=p;else c=n.formatDate(u[o]);e=e.substr(0,i)+c+e.substr(i+l);i+=c.length}}return e}var g={};function y(e){var t=g[e];if(t)return t;t=g[e]=a.instance(e);return t}function x(e){return i.extendFlat({},o,{description:e})}function b(e){return"Sets the calendar system to use with `"+e+"` date data."}var _={xcalendar:x(b("x"))};var w=i.extendFlat({},_,{ycalendar:x(b("y"))});var T=i.extendFlat({},w,{zcalendar:x(b("z"))});var k=x(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));t.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:w,bar:w,box:w,heatmap:w,contour:w,histogram:w,histogram2d:w,histogram2dcontour:w,scatter3d:T,surface:T,mesh3d:T,scattergl:w,ohlc:_,candlestick:_},layout:{calendar:x(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:k},yaxis:{calendar:k},scene:{xaxis:{calendar:k},yaxis:{calendar:k},zaxis:{calendar:k}},polar:{radialaxis:{calendar:k}}},transforms:{filter:{valuecalendar:x(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:x(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:o,handleDefaults:s,handleTraceDefaults:l,CANONICAL_SUNDAY:c,CANONICAL_TICK:u,DFLTRANGE:v,getCal:y,worldCalFmt:m}},{"../../constants/numerical":210,"../../lib":230,"./calendars":97}],99:[function(e,t,r){"use strict";r.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];r.defaultLine="#444";r.lightLine="#eee";r.background="#fff";r.borderLine="#BEC8D9";r.lightFraction=100*(14-4)/(15-4)},{}],100:[function(e,t,r){"use strict";var o=e("tinycolor2");var s=e("fast-isnumeric");var l=e("../../lib/array").isTypedArray;var u=t.exports={};var a=e("./attributes");u.defaults=a.defaults;var i=u.defaultLine=a.defaultLine;u.lightLine=a.lightLine;var c=u.background=a.background;u.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"};u.rgb=function(e){return u.tinyRGB(o(e))};u.opacity=function(e){return e?o(e).getAlpha():0};u.addOpacity=function(e,t){var r=o(e).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+t+")"};u.combine=function(e,t){var r=o(e).toRgb();if(r.a===1)return o(e).toRgbString();var a=o(t||c).toRgb();var n=a.a===1?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a};var i={r:n.r*(1-r.a)+r.r*r.a,g:n.g*(1-r.a)+r.g*r.a,b:n.b*(1-r.a)+r.b*r.a};return o(i).toRgbString()};u.contrast=function(e,t,r){var a=o(e);if(a.getAlpha()!==1)a=o(u.combine(e,c));var n=a.isDark()?t?a.lighten(t):c:r?a.darken(r):i;return n.toString()};u.stroke=function(e,t){var r=o(t);e.style({stroke:u.tinyRGB(r),"stroke-opacity":r.getAlpha()})};u.fill=function(e,t){var r=o(t);e.style({fill:u.tinyRGB(r),"fill-opacity":r.getAlpha()})};u.clean=function(e){if(!e||typeof e!=="object")return;var t=Object.keys(e);var r,a,n,i;for(r=0;r<t.length;r++){n=t[r];i=e[n];if(n.substr(n.length-5)==="color"){if(Array.isArray(i)){for(a=0;a<i.length;a++)i[a]=f(i[a])}else e[n]=f(i)}else if(n.substr(n.length-10)==="colorscale"&&Array.isArray(i)){for(a=0;a<i.length;a++){if(Array.isArray(i[a]))i[a][1]=f(i[a][1])}}else if(Array.isArray(i)){var o=i[0];if(!Array.isArray(o)&&o&&typeof o==="object"){for(a=0;a<i.length;a++)u.clean(i[a])}}else if(i&&typeof i==="object"&&!l(i))u.clean(i)}};function f(e){if(s(e)||typeof e!=="string")return e;var t=e.trim();if(t.substr(0,3)!=="rgb")return e;var r=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return e;var a=r[1].trim().split(/\s*[\s,]\s*/);var n=t.charAt(3)==="a"&&a.length===4;if(!n&&a.length!==3)return e;for(var i=0;i<a.length;i++){if(!a[i].length)return e;a[i]=Number(a[i]);if(!(a[i]>=0)){return e}if(i===3){if(a[i]>1)a[i]=1}else if(a[i]>=1){return e}}var o=Math.round(a[0]*255)+", "+Math.round(a[1]*255)+", "+Math.round(a[2]*255);if(n)return"rgba("+o+", "+a[3]+")";return"rgb("+o+")"}},{"../../lib/array":216,"./attributes":99,"fast-isnumeric":15,tinycolor2:65}],101:[function(e,t,r){"use strict";var a=e("../../plots/cartesian/layout_attributes");var n=e("../../plots/font_attributes");var i=e("../../lib/extend").extendFlat;var o=e("../../plot_api/edit_types").overrideAll;t.exports=o({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:a.linecolor,outlinewidth:a.linewidth,bordercolor:a.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:a.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:i({},a.ticks,{dflt:""}),ticklabeloverflow:i({},a.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside bottom","inside bottom"],dflt:"outside"},ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,showticklabels:a.showticklabels,tickfont:n({}),tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,tickprefix:a.tickprefix,showtickprefix:a.showtickprefix,ticksuffix:a.ticksuffix,showticksuffix:a.showticksuffix,separatethousands:a.separatethousands,exponentformat:a.exponentformat,minexponent:a.minexponent,showexponent:a.showexponent,title:{text:{valType:"string"},font:n({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:n({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":224,"../../plot_api/edit_types":258,"../../plots/cartesian/layout_attributes":291,"../../plots/font_attributes":305}],102:[function(e,t,r){"use strict";t.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],103:[function(e,t,r){"use strict";var p=e("../../lib");var h=e("../../plot_api/plot_template");var m=e("../../plots/cartesian/tick_value_defaults");var g=e("../../plots/cartesian/tick_mark_defaults");var y=e("../../plots/cartesian/tick_label_defaults");var x=e("./attributes");t.exports=function e(t,r,a){var n=h.newContainer(r,"colorbar");var i=t.colorbar||{};function o(e,t){return p.coerce(i,n,x,e,t)}var s=o("thicknessmode");o("thickness",s==="fraction"?30/(a.width-a.margin.l-a.margin.r):30);var l=o("lenmode");o("len",l==="fraction"?1:a.height-a.margin.t-a.margin.b);o("x");o("xanchor");o("xpad");o("y");o("yanchor");o("ypad");p.noneOrAll(i,n,["x","y"]);o("outlinecolor");o("outlinewidth");o("bordercolor");o("borderwidth");o("bgcolor");var u=o("ticklabelposition");o("ticklabeloverflow",u.indexOf("inside")!==-1?"hide past domain":"hide past div");m(i,n,o,"linear");var c=a.font;var f={outerTicks:false,font:c};if(u.indexOf("inside")!==-1){f.bgColor="black"}y(i,n,o,"linear",f);g(i,n,o,"linear",f);o("title.text",a._dfltTitle.colorbar);var d=n.tickfont;var v=p.extendFlat({},d,{color:c.color,size:p.bigFont(d.size)});p.coerceFont(o,"title.font",v);o("title.side")}},{"../../lib":230,"../../plot_api/plot_template":265,"../../plots/cartesian/tick_label_defaults":298,"../../plots/cartesian/tick_mark_defaults":299,"../../plots/cartesian/tick_value_defaults":300,"./attributes":101}],104:[function(e,t,r){"use strict";var q=e("@plotly/d3");var U=e("tinycolor2");var Y=e("../../plots/plots");var u=e("../../registry");var V=e("../../plots/cartesian/axes");var c=e("../dragelement");var G=e("../../lib");var W=G.strTranslate;var $=e("../../lib/extend").extendFlat;var f=e("../../lib/setcursor");var Z=e("../drawing");var X=e("../color");var J=e("../titles");var K=e("../../lib/svg_text_utils");var x=e("../colorscale/helpers").flipScale;var l=e("../../plots/cartesian/axis_defaults");var d=e("../../plots/cartesian/position_defaults");var v=e("../../plots/cartesian/layout_attributes");var a=e("../../constants/alignment");var Q=a.LINE_SPACING;var ee=a.FROM_TL;var te=a.FROM_BR;var re=e("./constants").cn;function n(a){var e=a._fullLayout;var t=e._infolayer.selectAll("g."+re.colorbar).data(i(a),function(e){return e._id});t.enter().append("g").attr("class",function(e){return e._id}).classed(re.colorbar,true);t.each(function(e){var t=q.select(this);G.ensureSingle(t,"rect",re.cbbg);G.ensureSingle(t,"g",re.cbfills);G.ensureSingle(t,"g",re.cblines);G.ensureSingle(t,"g",re.cbaxis,function(e){e.classed(re.crisp,true)});G.ensureSingle(t,"g",re.cbtitleunshift,function(e){e.append("g").classed(re.cbtitle,true)});G.ensureSingle(t,"rect",re.cboutline);var r=o(t,e,a);if(r&&r.then)(a._promises||[]).push(r);if(a._context.edits.colorbarPosition){s(t,e,a)}});t.exit().each(function(e){Y.autoMargin(a,e._id)}).remove();t.order()}function i(e){var t=e._fullLayout;var r=e.calcdata;var a=[];var n;var i;var o;var s;function l(e){return $(e,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function u(){if(typeof s.calc==="function"){s.calc(e,o,n)}else{n._fillgradient=i.reversescale?x(i.colorscale):i.colorscale;n._zrange=[i[s.min],i[s.max]]}}for(var c=0;c<r.length;c++){var f=r[c];o=f[0].trace;var d=o._module.colorbar;if(o.visible===true&&d){var v=Array.isArray(d);var p=v?d:[d];for(var h=0;h<p.length;h++){s=p[h];var m=s.container;i=m?o[m]:o;if(i&&i.showscale){n=l(i.colorbar);n._id="cb"+o.uid+(v&&m?"-"+m:"");n._traceIndex=o.index;n._propPrefix=(m?m+".":"")+"colorbar.";n._meta=o._meta;u();a.push(n)}}}}for(var g in t._colorAxes){i=t[g];if(i.showscale){var y=t._colorAxes[g];n=l(i.colorbar);n._id="cb"+g;n._propPrefix=g+".colorbar.";n._meta=t._meta;s={min:"cmin",max:"cmax"};if(y[0]!=="heatmap"){o=y[1];s.calc=o._module.colorbar.calc}u();a.push(n)}}return a}function o(d,v,p){var n=p._fullLayout;var h=n._size;var e=v._fillcolor;var m=v._line;var t=v.title;var g=t.side;var y=v._zrange||q.extent((typeof e==="function"?e:m.color).domain());var x=typeof m.color==="function"?m.color:function(){return m.color};var b=typeof e==="function"?e:function(){return e};var r=v._levels;var a=ae(p,v,y);var _=a.fill;var w=a.line;var T=Math.round(v.thickness*(v.thicknessmode==="fraction"?h.w:1));var i=T/h.w;var o=Math.round(v.len*(v.lenmode==="fraction"?h.h:1));var s=o/h.h;var l=v.xpad/h.w;var k=(v.borderwidth+v.outlinewidth)/2;var u=v.ypad/h.h;var M=Math.round(v.x*h.w+v.xpad);var c=v.x-i*({middle:.5,right:1}[v.xanchor]||0);var f=v.y+s*(({top:-.5,bottom:.5}[v.yanchor]||0)-.5);var A=Math.round(h.h*(1-f));var S=A-o;v._lenFrac=s;v._thickFrac=i;v._xLeftFrac=c;v._yBottomFrac=f;var E=v._axis=ne(p,v,y);E.position=v.x+l+i;if(["top","bottom"].indexOf(g)!==-1){E.title.side=g;E.titlex=v.x+l;E.titley=f+(t.side==="top"?s-u:u)}if(m.color&&v.tickmode==="auto"){E.tickmode="linear";E.tick0=r.start;var L=r.size;var C=G.constrain((A-S)/50,4,15)+1;var D=(y[1]-y[0])/((v.nticks||C)*L);if(D>1){var O=Math.pow(10,Math.floor(Math.log(D)/Math.LN10));L*=O*G.roundUp(D/O,[2,5,10]);if((Math.abs(r.start)/r.size+1e-6)%1<2e-6){E.tick0=0}}E.dtick=L}E.domain=[f+u,f+s-u];E.setScale();d.attr("transform",W(Math.round(h.l),Math.round(h.t)));var I=d.select("."+re.cbtitleunshift).attr("transform",W(-Math.round(h.l),-Math.round(h.t)));var P=d.select("."+re.cbaxis);var R;var N=0;function z(e,t){var r={propContainer:E,propName:v._propPrefix+"title",traceIndex:v._traceIndex,_meta:v._meta,placeholder:n._dfltTitle.colorbar,containerGroup:d.select("."+re.cbtitle)};var a=e.charAt(0)==="h"?e.substr(1):"h"+e;d.selectAll("."+a+",."+a+"-math-group").remove();J.draw(p,e,$(r,t||{}))}function F(){if(["top","bottom"].indexOf(g)!==-1){var e=h.l+(v.x+l)*h.w;var t=E.title.font.size;var r;if(g==="top"){r=(1-(f+s-u))*h.h+h.t+3+t*.75}else{r=(1-(f+u))*h.h+h.t-3-t*.25}z(E._id+"title",{attributes:{x:e,y:r,"text-anchor":"start"}})}}function j(){if(["top","bottom"].indexOf(g)===-1){var e=E.title.font.size;var t=E._offset+E._length/2;var r=h.l+(E.position||0)*h.w+(E.side==="right"?10+e*(E.showticklabels?1:.5):-10-e*(E.showticklabels?.5:0));z("h"+E._id+"title",{avoid:{selection:q.select(p).selectAll("g."+E._id+"tick"),side:g,offsetLeft:h.l,offsetTop:0,maxShift:n.width},attributes:{x:r,y:t,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}function H(){if(["top","bottom"].indexOf(g)!==-1){var e=d.select("."+re.cbtitle);var t=e.select("text");var r=[-v.outlinewidth/2,v.outlinewidth/2];var a=e.select(".h"+E._id+"title-math-group").node();var n=15.6;if(t.node()){n=parseInt(t.node().style.fontSize,10)*Q}if(a){N=Z.bBox(a).height;if(N>n){r[1]-=(N-n)/2}}else if(t.node()&&!t.classed(re.jsPlaceholder)){N=Z.bBox(t.node()).height}if(N){N+=5;if(g==="top"){E.domain[1]-=N/h.h;r[1]*=-1}else{E.domain[0]+=N/h.h;var i=K.lineCount(t);r[1]+=(1-i)*n}e.attr("transform",W(r[0],r[1]));E.setScale()}}d.selectAll("."+re.cbfills+",."+re.cblines).attr("transform",W(0,Math.round(h.h*(1-E.domain[1]))));P.attr("transform",W(0,Math.round(-h.t)));var o=d.select("."+re.cbfills).selectAll("rect."+re.cbfill).attr("style","").data(_);o.enter().append("rect").classed(re.cbfill,true).style("stroke","none");o.exit().remove();var s=y.map(E.c2p).map(Math.round).sort(function(e,t){return e-t});o.each(function(e,t){var r=[t===0?y[0]:(_[t]+_[t-1])/2,t===_.length-1?y[1]:(_[t]+_[t+1])/2].map(E.c2p).map(Math.round);r[1]=G.constrain(r[1]+(r[1]>r[0])?1:-1,s[0],s[1]);var a=q.select(this).attr({x:M,width:Math.max(T,2),y:q.min(r),height:Math.max(q.max(r)-q.min(r),2)});if(v._fillgradient){Z.gradient(a,p,v._id,"vertical",v._fillgradient,"fill")}else{var n=b(e).replace("e-","");a.attr("fill",U(n).toHexString())}});var l=d.select("."+re.cblines).selectAll("path."+re.cbline).data(m.color&&m.width?w:[]);l.enter().append("path").classed(re.cbline,true);l.exit().remove();l.each(function(e){q.select(this).attr("d","M"+M+","+(Math.round(E.c2p(e))+m.width/2%1)+"h"+T).call(Z.lineGroupStyle,m.width,x(e),m.dash)});P.selectAll("g."+E._id+"tick,path").remove();var u=M+T+(v.outlinewidth||0)/2-(v.ticks==="outside"?1:0);var c=V.calcTicks(E);var f=V.getTickSigns(E)[2];V.drawTicks(p,E,{vals:E.ticks==="inside"?V.clipEnds(E,c):c,layer:P,path:V.makeTickPath(E,u,f),transFn:V.makeTransTickFn(E)});return V.drawLabels(p,E,{vals:c,layer:P,transFn:V.makeTransTickLabelFn(E),labelFns:V.makeLabelFns(E,u)})}function B(){var e=T+v.outlinewidth/2;if(E.ticklabelposition.indexOf("inside")===-1){e+=Z.bBox(P.node()).width}R=I.select("text");if(R.node()&&!R.classed(re.jsPlaceholder)){var t=I.select(".h"+E._id+"title-math-group").node();var r;if(t&&["top","bottom"].indexOf(g)!==-1){r=Z.bBox(t).width}else{r=Z.bBox(I.node()).right-M-h.l}e=Math.max(e,r)}var a=2*v.xpad+e+v.borderwidth+v.outlinewidth/2;var n=A-S;d.select("."+re.cbbg).attr({x:M-v.xpad-(v.borderwidth+v.outlinewidth)/2,y:S-k,width:Math.max(a,2),height:Math.max(n+2*k,2)}).call(X.fill,v.bgcolor).call(X.stroke,v.bordercolor).style("stroke-width",v.borderwidth);d.selectAll("."+re.cboutline).attr({x:M,y:S+v.ypad+(g==="top"?N:0),width:Math.max(T,2),height:Math.max(n-2*v.ypad-N,2)}).call(X.stroke,v.outlinecolor).style({fill:"none","stroke-width":v.outlinewidth});var i=({center:.5,right:1}[v.xanchor]||0)*a;d.attr("transform",W(h.l-i,h.t));var o={};var s=ee[v.yanchor];var l=te[v.yanchor];if(v.lenmode==="pixels"){o.y=v.y;o.t=n*s;o.b=n*l}else{o.t=o.b=0;o.yt=v.y+v.len*s;o.yb=v.y-v.len*l}var u=ee[v.xanchor];var c=te[v.xanchor];if(v.thicknessmode==="pixels"){o.x=v.x;o.l=a*u;o.r=a*c}else{var f=a-T;o.l=f*u;o.r=f*c;o.xl=v.x-v.thickness*u;o.xr=v.x+v.thickness*c}Y.autoMargin(p,v._id,o)}return G.syncOrAsync([Y.previousPromises,F,H,j,Y.previousPromises,B],p)}function s(a,n,t){var e=t._fullLayout;var i=e._size;var o,s,l;c.init({element:a.node(),gd:t,prepFn:function(){o=a.attr("transform");f(a)},moveFn:function(e,t){a.attr("transform",o+W(e,t));s=c.align(n._xLeftFrac+e/i.w,n._thickFrac,0,1,n.xanchor);l=c.align(n._yBottomFrac-t/i.h,n._lenFrac,0,1,n.yanchor);var r=c.getCursor(s,l,n.xanchor,n.yanchor);f(a,r)},doneFn:function(){f(a);if(s!==undefined&&l!==undefined){var e={};e[n._propPrefix+"x"]=s;e[n._propPrefix+"y"]=l;if(n._traceIndex!==undefined){u.call("_guiRestyle",t,e,n._traceIndex)}else{u.call("_guiRelayout",t,e)}}}})}function ae(e,t,r){var a=t._levels;var n=[];var i=[];var o;var s;var l=a.end+a.size/100;var u=a.size;var c=1.001*r[0]-.001*r[1];var f=1.001*r[1]-.001*r[0];for(s=0;s<1e5;s++){o=a.start+s*u;if(u>0?o>=l:o<=l)break;if(o>c&&o<f)n.push(o)}if(t._fillgradient){i=[0]}else if(typeof t._fillcolor==="function"){var d=t._filllevels;if(d){l=d.end+d.size/100;u=d.size;for(s=0;s<1e5;s++){o=d.start+s*u;if(u>0?o>=l:o<=l)break;if(o>r[0]&&o<r[1])i.push(o)}}else{i=n.map(function(e){return e-a.size/2});i.push(i[i.length-1]+a.size)}}else if(t._fillcolor&&typeof t._fillcolor==="string"){i=[0]}if(a.size<0){n.reverse();i.reverse()}return{line:n,fill:i}}function ne(e,t,r){var a=e._fullLayout;var n={type:"linear",range:r,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:true,anchor:"free",side:"right",position:1};var i={type:"linear",_id:"y"+t._id};var o={letter:"y",font:a.font,noHover:true,noTickson:true,noTicklabelmode:true,calendar:a.calendar};function s(e,t){return G.coerce(n,i,v,e,t)}l(n,i,s,o,a);d(n,i,s,o);return i}t.exports={draw:n}},{"../../constants/alignment":205,"../../lib":230,"../../lib/extend":224,"../../lib/setcursor":250,"../../lib/svg_text_utils":252,"../../plots/cartesian/axes":276,"../../plots/cartesian/axis_defaults":278,"../../plots/cartesian/layout_attributes":291,"../../plots/cartesian/position_defaults":294,"../../plots/plots":311,"../../registry":313,"../color":100,"../colorscale/helpers":111,"../dragelement":119,"../drawing":122,"../titles":198,"./constants":102,"@plotly/d3":11,tinycolor2:65}],105:[function(e,t,r){"use strict";var a=e("../../lib");t.exports=function e(t){return a.isPlainObject(t.colorbar)}},{"../../lib":230}],106:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"colorbar",attributes:e("./attributes"),supplyDefaults:e("./defaults"),draw:e("./draw").draw,hasColorbar:e("./has_colorbar")}},{"./attributes":101,"./defaults":103,"./draw":104,"./has_colorbar":105}],107:[function(e,t,r){"use strict";var k=e("../colorbar/attributes");var M=e("../../lib/regex").counter;var A=e("./scales.js").scales;var a=Object.keys(A);function S(e){return"`"+e+"`"}t.exports=function e(t,r){t=t||"";r=r||{};var a=r.cLetter||"c";var n="onlyIfNumerical"in r?r.onlyIfNumerical:Boolean(t);var i="noScale"in r?r.noScale:t==="marker.line";var o="showScaleDflt"in r?r.showScaleDflt:a==="z";var s=typeof r.colorscaleDflt==="string"?A[r.colorscaleDflt]:null;var l=r.editTypeOverride||"";var u=t?t+".":"";var c,f;if("colorAttr"in r){c=r.colorAttr;f=r.colorAttr}else{c={z:"z",c:"color"}[a];f="in "+S(u+c)}var d=n?" Has an effect only if "+f+"is set to a numerical array.":"";var v=a+"auto";var p=a+"min";var h=a+"max";var m=a+"mid";var g=S(u+v);var y=S(u+p);var x=S(u+h);var b=y+" and "+x;var _={};_[p]=_[h]=undefined;var w={};w[v]=false;var T={};if(c==="color"){T.color={valType:"color",arrayOk:true,editType:l||"style"};if(r.anim){T.color.anim=true}}T[v]={valType:"boolean",dflt:true,editType:"calc",impliedEdits:_};T[p]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:w};T[h]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:w};T[m]={valType:"number",dflt:null,editType:"calc",impliedEdits:_};T.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:false}};T.autocolorscale={valType:"boolean",dflt:r.autoColorDflt===false?false:true,editType:"calc",impliedEdits:{colorscale:undefined}};T.reversescale={valType:"boolean",dflt:false,editType:"plot"};if(!i){T.showscale={valType:"boolean",dflt:o,editType:"calc"};T.colorbar=k}if(!r.noColorAxis){T.coloraxis={valType:"subplotid",regex:M("coloraxis"),dflt:null,editType:"calc"}}return T}},{"../../lib/regex":246,"../colorbar/attributes":101,"./scales.js":115}],108:[function(e,t,r){"use strict";var m=e("fast-isnumeric");var g=e("../../lib");var y=e("./helpers").extractOpts;t.exports=function e(t,r,a){var n=t._fullLayout;var i=a.vals;var o=a.containerStr;var s=o?g.nestedProperty(r,o).get():r;var l=y(s);var u=l.auto!==false;var c=l.min;var f=l.max;var d=l.mid;var v=function(){return g.aggNums(Math.min,null,i)};var p=function(){return g.aggNums(Math.max,null,i)};if(c===undefined){c=v()}else if(u){if(s._colorAx&&m(c)){c=Math.min(c,v())}else{c=v()}}if(f===undefined){f=p()}else if(u){if(s._colorAx&&m(f)){f=Math.max(f,p())}else{f=p()}}if(u&&d!==undefined){if(f-d>d-c){c=d-(f-d)}else if(f-d<d-c){f=d+(d-c)}}if(c===f){c-=.5;f+=.5}l._sync("min",c);l._sync("max",f);if(l.autocolorscale){var h;if(c*f<0)h=n.colorscale.diverging;else if(c>=0)h=n.colorscale.sequential;else h=n.colorscale.sequentialminus;l._sync("colorscale",h)}}},{"../../lib":230,"./helpers":111,"fast-isnumeric":15}],109:[function(e,t,r){"use strict";var c=e("../../lib");var f=e("./helpers").hasColorscale;var d=e("./helpers").extractOpts;t.exports=function e(t,i){function o(e,t){var r=e["_"+t];if(r!==undefined){e[t]=r}}function r(e,t){var r=t.container?c.nestedProperty(e,t.container).get():e;if(r){if(r.coloraxis){r._colorAx=i[r.coloraxis]}else{var a=d(r);var n=a.auto;if(n||a.min===undefined){o(r,t.min)}if(n||a.max===undefined){o(r,t.max)}if(a.autocolorscale){o(r,"colorscale")}}}}for(var a=0;a<t.length;a++){var n=t[a];var s=n._module.colorbar;if(s){if(Array.isArray(s)){for(var l=0;l<s.length;l++){r(n,s[l])}}else{r(n,s)}}if(f(n,"marker.line")){r(n,{container:"marker.line",min:"cmin",max:"cmax"})}}for(var u in i._colorAxes){r(i[u],{min:"cmin",max:"cmax"})}}},{"../../lib":230,"./helpers":111}],110:[function(e,t,r){"use strict";var A=e("fast-isnumeric");var S=e("../../lib");var E=e("../colorbar/has_colorbar");var L=e("../colorbar/defaults");var C=e("./scales").isValid;var D=e("../../registry").traceIs;function O(e,t){var r=t.slice(0,t.length-1);return t?S.nestedProperty(e,r).get()||{}:e}t.exports=function e(t,r,a,n,i){var o=i.prefix;var s=i.cLetter;var l="_module"in r;var u=O(t,o);var c=O(r,o);var f=O(r._template||{},o)||{};var d=function(){delete t.coloraxis;delete r.coloraxis;return e(t,r,a,n,i)};if(l){var v=a._colorAxes||{};var p=n(o+"coloraxis");if(p){var h=D(r,"contour")&&S.nestedProperty(r,"contours.coloring").get()||"heatmap";var m=v[p];if(m){m[2].push(d);if(m[0]!==h){m[0]=false;S.warn(["Ignoring coloraxis:",p,"setting","as it is linked to incompatible colorscales."].join(" "))}}else{v[p]=[h,r,[d]]}return}}var g=u[s+"min"];var y=u[s+"max"];var x=A(g)&&A(y)&&g<y;var b=n(o+s+"auto",!x);if(b){n(o+s+"mid")}else{n(o+s+"min");n(o+s+"max")}var _=u.colorscale;var w=f.colorscale;var T;if(_!==undefined)T=!C(_);if(w!==undefined)T=!C(w);n(o+"autocolorscale",T);n(o+"colorscale");n(o+"reversescale");if(o!=="marker.line."){var k;if(o&&l)k=E(u);var M=n(o+"showscale",k);if(M){if(o&&f)c._template=f;L(u,c,a)}}}},{"../../lib":230,"../../registry":313,"../colorbar/defaults":103,"../colorbar/has_colorbar":105,"./scales":115,"fast-isnumeric":15}],111:[function(e,t,r){"use strict";var d=e("@plotly/d3");var v=e("tinycolor2");var p=e("fast-isnumeric");var s=e("../../lib");var h=e("../color");var l=e("./scales").isValid;function a(e,t,r){var a=t?s.nestedProperty(e,t).get()||{}:e;var n=a[r||"color"];var i=false;if(s.isArrayOrTypedArray(n)){for(var o=0;o<n.length;o++){if(p(n[o])){i=true;break}}}return s.isPlainObject(a)&&(i||a.showscale===true||p(a.cmin)&&p(a.cmax)||l(a.colorscale)||s.isPlainObject(a.colorbar))}var u=["showscale","autocolorscale","colorscale","reversescale","colorbar"];var c=["min","max","mid","auto"];function f(e){var t=e._colorAx;var a=t?t:e;var r={};var n;var i,o;for(i=0;i<u.length;i++){o=u[i];r[o]=a[o]}if(t){n="c";for(i=0;i<c.length;i++){o=c[i];r[o]=a["c"+o]}}else{var s;for(i=0;i<c.length;i++){o=c[i];s="c"+o;if(s in a){r[o]=a[s];continue}s="z"+o;if(s in a){r[o]=a[s]}}n=s.charAt(0)}r._sync=function(e,t){var r=c.indexOf(e)!==-1?n+e:e;a[r]=a["_"+r]=t};return r}function n(e){var t=f(e);var r=t.min;var a=t.max;var n=t.reversescale?m(t.colorscale):t.colorscale;var i=n.length;var o=new Array(i);var s=new Array(i);for(var l=0;l<i;l++){var u=n[l];o[l]=r+u[0]*(a-r);s[l]=u[1]}return{domain:o,range:s}}function m(e){var t=e.length;var r=new Array(t);for(var a=t-1,n=0;a>=0;a--,n++){var i=e[a];r[n]=[1-i[0],i[1]]}return r}function i(e,t){t=t||{};var r=e.domain;var a=e.range;var n=a.length;var i=new Array(n);for(var o=0;o<n;o++){var s=v(a[o]).toRgb();i[o]=[s.r,s.g,s.b,s.a]}var l=d.scale.linear().domain(r).range(i).clamp(true);var u=t.noNumericCheck;var c=t.returnArray;var f;if(u&&c){f=l}else if(u){f=function(e){return g(l(e))}}else if(c){f=function(e){if(p(e))return l(e);else if(v(e).isValid())return e;else return h.defaultLine}}else{f=function(e){if(p(e))return g(l(e));else if(v(e).isValid())return e;else return h.defaultLine}}f.domain=l.domain;f.range=function(){return a};return f}function o(e,t){return i(n(e),t)}function g(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return v(t).toRgbString()}t.exports={hasColorscale:a,extractOpts:f,extractScale:n,flipScale:m,makeColorScaleFunc:i,makeColorScaleFuncFromTrace:o}},{"../../lib":230,"../color":100,"./scales":115,"@plotly/d3":11,"fast-isnumeric":15,tinycolor2:65}],112:[function(e,t,r){"use strict";var a=e("./scales");var n=e("./helpers");t.exports={moduleType:"component",name:"colorscale",attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),handleDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc"),scales:a.scales,defaultScale:a.defaultScale,getScale:a.get,isValidScale:a.isValid,hasColorscale:n.hasColorscale,extractOpts:n.extractOpts,extractScale:n.extractScale,flipScale:n.flipScale,makeColorScaleFunc:n.makeColorScaleFunc,makeColorScaleFuncFromTrace:n.makeColorScaleFuncFromTrace}},{"./attributes":107,"./calc":108,"./cross_trace_defaults":109,"./defaults":110,"./helpers":111,"./layout_attributes":113,"./layout_defaults":114,"./scales":115}],113:[function(e,t,r){"use strict";var a=e("../../lib/extend").extendFlat;var n=e("./attributes");var i=e("./scales").scales;var o="Note that `autocolorscale` must be true for this attribute to work.";t.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:i.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:i.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:i.RdBu,editType:"calc"}},coloraxis:a({_isSubplotObj:true,editType:"calc"},n("",{colorAttr:"corresponding trace color array(s)",noColorAxis:true,showScaleDflt:true}))}},{"../../lib/extend":224,"./attributes":107,"./scales":115}],114:[function(e,t,r){"use strict";var f=e("../../lib");var d=e("../../plot_api/plot_template");var v=e("./layout_attributes");var p=e("./defaults");t.exports=function e(r,a){function t(e,t){return f.coerce(r,a,v,e,t)}t("colorscale.sequential");t("colorscale.sequentialminus");t("colorscale.diverging");var n=a._colorAxes;var i,o;function s(e,t){return f.coerce(i,o,v.coloraxis,e,t)}for(var l in n){var u=n[l];if(u[0]){i=r[l]||{};o=d.newContainer(a,l,"coloraxis");o._name=l;p(i,o,a,s,{prefix:"",cLetter:"c"})}else{for(var c=0;c<u[2].length;c++){u[2][c]()}delete a._colorAxes[l]}}}},{"../../lib":230,"../../plot_api/plot_template":265,"./defaults":110,"./layout_attributes":113}],115:[function(e,t,r){"use strict";var n=e("tinycolor2");var a={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]};var i=a.RdBu;function o(t,r){if(!r)r=i;if(!t)return r;function e(){try{t=a[t]||JSON.parse(t)}catch(e){t=r}}if(typeof t==="string"){e();if(typeof t==="string")e()}if(!s(t))return r;return t}function s(e){var t=0;if(!Array.isArray(e)||e.length<2)return false;if(!e[0]||!e[e.length-1])return false;if(+e[0][0]!==0||+e[e.length-1][0]!==1)return false;for(var r=0;r<e.length;r++){var a=e[r];if(a.length!==2||+a[0]<t||!n(a[1]).isValid()){return false}t=+a[0]}return true}function l(e){if(a[e]!==undefined)return true;else return s(e)}t.exports={scales:a,defaultScale:i,get:o,isValid:l}},{tinycolor2:65}],116:[function(e,t,r){"use strict";t.exports=function e(t,r,a,n,i){var o=(t-a)/(n-a);var s=o+r/(n-a);var l=(o+s)/2;if(i==="left"||i==="bottom")return o;if(i==="center"||i==="middle")return l;if(i==="right"||i==="top")return s;if(o<2/3-l)return o;if(s>4/3-l)return s;return l}},{}],117:[function(e,t,r){"use strict";var i=e("../../lib");var o=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];t.exports=function e(t,r,a,n){if(a==="left")t=0;else if(a==="center")t=1;else if(a==="right")t=2;else t=i.constrain(Math.floor(t*3),0,2);if(n==="bottom")r=0;else if(n==="middle")r=1;else if(n==="top")r=2;else r=i.constrain(Math.floor(r*3),0,2);return o[r][t]}},{"../../lib":230}],118:[function(e,t,r){"use strict";r.selectMode=function(e){return e==="lasso"||e==="select"};r.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"};r.openMode=function(e){return e==="drawline"||e==="drawopenpath"};r.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"};r.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"};r.selectingOrDrawing=function(e){return r.freeMode(e)||r.rectMode(e)}},{}],119:[function(e,t,r){"use strict";var a=e("mouse-event-offset");var x=e("has-hover");var b=e("has-passive-events");var _=e("../../lib").removeElement;var w=e("../../plots/cartesian/constants");var T=t.exports={};T.align=e("./align");T.getCursor=e("./cursor");var n=e("./unhover");T.unhover=n.wrapped;T.unhoverRaw=n.raw;T.init=function e(o){var s=o.gd;var n=1;var i=s._context.doubleClickDelay;var l=o.element;var u,c,r,f,d,v,p,h;if(!s._mouseDownTime)s._mouseDownTime=0;l.style.pointerEvents="all";l.onmousedown=a;if(!b){l.ontouchstart=a}else{if(l._ontouchstart){l.removeEventListener("touchstart",l._ontouchstart)}l._ontouchstart=a;l.addEventListener("touchstart",a,{passive:false})}function t(e,t,r){if(Math.abs(e)<r)e=0;if(Math.abs(t)<r)t=0;return[e,t]}var m=o.clampFn||t;function a(e){s._dragged=false;s._dragging=true;var t=M(e);u=t[0];c=t[1];p=e.target;v=e;h=e.buttons===2||e.ctrlKey;if(typeof e.clientX==="undefined"&&typeof e.clientY==="undefined"){e.clientX=u;e.clientY=c}r=(new Date).getTime();if(r-s._mouseDownTime<i){n+=1}else{n=1;s._mouseDownTime=r}if(o.prepFn)o.prepFn(e,u,c);if(x&&!h){d=k();d.style.cursor=window.getComputedStyle(l).cursor}else if(!x){d=document;f=window.getComputedStyle(document.documentElement).cursor;document.documentElement.style.cursor=window.getComputedStyle(l).cursor}document.addEventListener("mouseup",y);document.addEventListener("touchend",y);if(o.dragmode!==false){e.preventDefault();document.addEventListener("mousemove",g);document.addEventListener("touchmove",g,{passive:false})}return}function g(e){e.preventDefault();var t=M(e);var r=o.minDrag||w.MINDRAG;var a=m(t[0]-u,t[1]-c,r);var n=a[0];var i=a[1];if(n||i){s._dragged=true;T.unhover(s,e)}if(s._dragged&&o.moveFn&&!h){s._dragdata={element:l,dx:n,dy:i};o.moveFn(n,i)}return}function y(t){delete s._dragdata;if(o.dragmode!==false){t.preventDefault();document.removeEventListener("mousemove",g);document.removeEventListener("touchmove",g)}document.removeEventListener("mouseup",y);document.removeEventListener("touchend",y);if(x){_(d)}else if(f){d.documentElement.style.cursor=f;f=null}if(!s._dragging){s._dragged=false;return}s._dragging=false;if((new Date).getTime()-s._mouseDownTime>i){n=Math.max(n-1,1)}if(s._dragged){if(o.doneFn)o.doneFn()}else{if(o.clickFn)o.clickFn(n,v);if(!h){var r;try{r=new MouseEvent("click",t)}catch(e){var a=M(t);r=document.createEvent("MouseEvents");r.initMouseEvent("click",t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,a[0],a[1],t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}p.dispatchEvent(r)}}s._dragging=false;s._dragged=false;return}};function k(){var e=document.createElement("div");e.className="dragcover";var t=e.style;t.position="fixed";t.left=0;t.right=0;t.top=0;t.bottom=0;t.zIndex=999999999;t.background="none";document.body.appendChild(e);return e}T.coverSlip=k;function M(e){return a(e.changedTouches?e.changedTouches[0]:e,document.body)}},{"../../lib":230,"../../plots/cartesian/constants":283,"./align":116,"./cursor":117,"./unhover":120,"has-hover":46,"has-passive-events":47,"mouse-event-offset":51}],120:[function(e,t,r){"use strict";var i=e("../../lib/events");var a=e("../../lib/throttle");var n=e("../../lib/dom").getGraphDiv;var o=e("../fx/constants");var s=t.exports={};s.wrapped=function(e,t,r){e=n(e);if(e._fullLayout){a.clear(e._fullLayout._uid+o.HOVERID)}s.raw(e,t,r)};s.raw=function e(t,r){var a=t._fullLayout;var n=t._hoverdata;if(!r)r={};if(r.target&&!t._dragged&&i.triggerHandler(t,"plotly_beforehover",r)===false){return}a._hoverlayer.selectAll("g").remove();a._hoverlayer.selectAll("line").remove();a._hoverlayer.selectAll("circle").remove();t._hoverdata=undefined;if(r.target&&n){t.emit("plotly_unhover",{event:r,points:n})}}},{"../../lib/dom":222,"../../lib/events":223,"../../lib/throttle":253,"../fx/constants":134}],121:[function(e,t,r){"use strict";r.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"};r.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:true,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:true,editType:"style"},fgcolor:{valType:"color",arrayOk:true,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:true,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:true,editType:"style"},editType:"style"}},{}],122:[function(e,t,r){"use strict";var S=e("@plotly/d3");var o=e("fast-isnumeric");var h=e("tinycolor2");var b=e("../../registry");var E=e("../color");var n=e("../colorscale");var L=e("../../lib");var f=L.strTranslate;var m=e("../../lib/svg_text_utils");var a=e("../../constants/xmlns_namespaces");var i=e("../../constants/alignment");var d=i.LINE_SPACING;var _=e("../../constants/interactions").DESELECTDIM;var s=e("../../traces/scatter/subtypes");var l=e("../../traces/scatter/make_bubble_size_func");var g=e("../../components/fx/helpers").appendArrayPointValue;var C=t.exports={};C.font=function(e,t,r,a){if(L.isPlainObject(t)){a=t.color;r=t.size;t=t.family}if(t)e.style("font-family",t);if(r+1)e.style("font-size",r+"px");if(a)e.call(E.fill,a)};C.setPosition=function(e,t,r){e.attr("x",t).attr("y",r)};C.setSize=function(e,t,r){e.attr("width",t).attr("height",r)};C.setRect=function(e,t,r,a,n){e.call(C.setPosition,t,r).call(C.setSize,a,n)};C.translatePoint=function(e,t,r,a){var n=r.c2p(e.x);var i=a.c2p(e.y);if(o(n)&&o(i)&&t.node()){if(t.node().nodeName==="text"){t.attr("x",n).attr("y",i)}else{t.attr("transform",f(n,i))}}else{return false}return true};C.translatePoints=function(e,r,a){e.each(function(e){var t=S.select(this);C.translatePoint(e,t,r,a)})};C.hideOutsideRangePoint=function(e,t,r,a,n,i){t.attr("display",r.isPtWithinRange(e,n)&&a.isPtWithinRange(e,i)?null:"none")};C.hideOutsideRangePoints=function(i,e){if(!e._hasClipOnAxisFalse)return;var o=e.xaxis;var s=e.yaxis;i.each(function(e){var t=e[0].trace;var r=t.xcalendar;var a=t.ycalendar;var n=b.traceIs(t,"bar-like")?".bartext":".point,.textpoint";i.selectAll(n).each(function(e){C.hideOutsideRangePoint(e,S.select(this),o,s,r,a)})})};C.crispRound=function(e,t,r){if(!t||!o(t))return r||0;if(e._context.staticPlot)return t;if(t<1)return 1;return Math.round(t)};C.singleLineStyle=function(e,t,r,a,n){t.style("fill","none");var i=(((e||[])[0]||{}).trace||{}).line||{};var o=r||i.width||0;var s=n||i.dash||"";E.stroke(t,a||i.color);C.dashLine(t,s,o)};C.lineGroupStyle=function(e,n,i,o){e.style("fill","none").each(function(e){var t=(((e||[])[0]||{}).trace||{}).line||{};var r=n||t.width||0;var a=o||t.dash||"";S.select(this).call(E.stroke,i||t.color).call(C.dashLine,a,r)})};C.dashLine=function(e,t,r){r=+r||0;t=C.dashStyle(t,r);e.style({"stroke-dasharray":t,"stroke-width":r+"px"})};C.dashStyle=function(e,t){t=+t||1;var r=Math.max(t,3);if(e==="solid")e="";else if(e==="dot")e=r+"px,"+r+"px";else if(e==="dash")e=3*r+"px,"+3*r+"px";else if(e==="longdash")e=5*r+"px,"+5*r+"px";else if(e==="dashdot"){e=3*r+"px,"+r+"px,"+r+"px,"+r+"px"}else if(e==="longdashdot"){e=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"}return e};C.singleFillStyle=function(e){var t=S.select(e.node());var r=t.data();var a=(((r[0]||[])[0]||{}).trace||{}).fillcolor;if(a){e.call(E.fill,a)}};C.fillGroupStyle=function(e){e.style("stroke-width",0).each(function(e){var t=S.select(this);if(e[0].trace){t.call(E.fill,e[0].trace.fillcolor)}})};var u=e("./symbol_defs");C.symbolNames=[];C.symbolFuncs=[];C.symbolNeedLines={};C.symbolNoDot={};C.symbolNoFill={};C.symbolList=[];Object.keys(u).forEach(function(e){var t=u[e];var r=t.n;C.symbolList.push(r,String(r),e,r+100,String(r+100),e+"-open");C.symbolNames[r]=e;C.symbolFuncs[r]=t.f;if(t.needLine){C.symbolNeedLines[r]=true}if(t.noDot){C.symbolNoDot[r]=true}else{C.symbolList.push(r+200,String(r+200),e+"-dot",r+300,String(r+300),e+"-open-dot")}if(t.noFill){C.symbolNoFill[r]=true}});var c=C.symbolNames.length;var v="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";C.symbolNumber=function(e){if(o(e)){e=+e}else if(typeof e==="string"){var t=0;if(e.indexOf("-open")>0){t=100;e=e.replace("-open","")}if(e.indexOf("-dot")>0){t+=200;e=e.replace("-dot","")}e=C.symbolNames.indexOf(e);if(e>=0){e+=t}}return e%100>=c||e>=400?0:Math.floor(Math.max(e,0))};function D(e,t){var r=e%100;return C.symbolFuncs[r](t)+(e>=200?v:"")}var p={x1:1,x2:0,y1:0,y2:0};var y={x1:0,x2:0,y1:1,y2:0};var x=S.format("~.1f");var O={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:true},horizontal:{node:"linearGradient",attrs:p},horizontalreversed:{node:"linearGradient",attrs:p,reversed:true},vertical:{node:"linearGradient",attrs:y},verticalreversed:{node:"linearGradient",attrs:y,reversed:true}};C.gradient=function(e,t,r,a,n,i){var o=n.length;var s=O[a];var l=new Array(o);for(var u=0;u<o;u++){if(s.reversed){l[o-1-u]=[x((1-n[u][0])*100),n[u][1]]}else{l[u]=[x(n[u][0]*100),n[u][1]]}}var c=t._fullLayout;var f="g"+c._uid+"-"+r;var d=c._defs.select(".gradients").selectAll("#"+f).data([a+l.join(";")],L.identity);d.exit().remove();d.enter().append(s.node).each(function(){var e=S.select(this);if(s.attrs)e.attr(s.attrs);e.attr("id",f);var t=e.selectAll("stop").data(l);t.exit().remove();t.enter().append("stop");t.each(function(e){var t=h(e[1]);S.select(this).attr({offset:e[0]+"%","stop-color":E.tinyRGB(t),"stop-opacity":t.getAlpha()})})});e.style(i,F(f,t)).style(i+"-opacity",null);var v=function(e){return"."+e.attr("class").replace(/\s/g,".")};var p=v(S.select(e.node().parentNode))+">"+v(e);c._gradientUrlQueryParts[p]=1};C.pattern=function(e,t,r,a,n,i,o,s,l,u,c,f){var d=t==="legend";if(s){if(l==="overlay"){u=s;c=E.contrast(u)}else{u=undefined;c=s}}var v=r._fullLayout;var p="p"+v._uid+"-"+a;var h,m;var g=function(e,t,r,a,n){return a+(n-a)*(e-t)/(r-t)};var y,x,b;var _;var w={};switch(n){case"/":h=i*Math.sqrt(2);m=i*Math.sqrt(2);y="M-"+h/4+","+m/4+"l"+h/2+",-"+m/2+"M0,"+m+"L"+h+",0"+"M"+h/4*3+","+m/4*5+"l"+h/2+",-"+m/2;x=o*i;_="path";w={d:y,opacity:f,stroke:c,"stroke-width":x+"px"};break;case"\\":h=i*Math.sqrt(2);m=i*Math.sqrt(2);y="M"+h/4*3+",-"+m/4+"l"+h/2+","+m/2+"M0,0L"+h+","+m+"M-"+h/4+","+m/4*3+"l"+h/2+","+m/2;x=o*i;_="path";w={d:y,opacity:f,stroke:c,"stroke-width":x+"px"};break;case"x":h=i*Math.sqrt(2);m=i*Math.sqrt(2);y="M-"+h/4+","+m/4+"l"+h/2+",-"+m/2+"M0,"+m+"L"+h+",0"+"M"+h/4*3+","+m/4*5+"l"+h/2+",-"+m/2+"M"+h/4*3+",-"+m/4+"l"+h/2+","+m/2+"M0,0L"+h+","+m+"M-"+h/4+","+m/4*3+"l"+h/2+","+m/2;x=i-i*Math.sqrt(1-o);_="path";w={d:y,opacity:f,stroke:c,"stroke-width":x+"px"};break;case"|":h=i;m=i;_="path";y="M"+h/2+",0L"+h/2+","+m;x=o*i;_="path";w={d:y,opacity:f,stroke:c,"stroke-width":x+"px"};break;case"-":h=i;m=i;_="path";y="M0,"+m/2+"L"+h+","+m/2;x=o*i;_="path";w={d:y,opacity:f,stroke:c,"stroke-width":x+"px"};break;case"+":h=i;m=i;_="path";y="M"+h/2+",0L"+h/2+","+m+"M0,"+m/2+"L"+h+","+m/2;x=i-i*Math.sqrt(1-o);_="path";w={d:y,opacity:f,stroke:c,"stroke-width":x+"px"};break;case".":h=i;m=i;if(o<Math.PI/4){b=Math.sqrt(o*i*i/Math.PI)}else{b=g(o,Math.PI/4,1,i/2,i/Math.sqrt(2))}_="circle";w={cx:h/2,cy:m/2,r:b,opacity:f,fill:c};break}var T=[n||"noSh",u||"noBg",c||"noFg",i,o].join(";");var k=v._defs.select(".patterns").selectAll("#"+p).data([T],L.identity);k.exit().remove();k.enter().append("pattern").each(function(){var e=S.select(this);e.attr({id:p,width:h+"px",height:m+"px",patternUnits:"userSpaceOnUse",patternTransform:d?"scale(0.8)":""});if(u){var t=e.selectAll("rect").data([0]);t.exit().remove();t.enter().append("rect").attr({width:h+"px",height:m+"px",fill:u})}var r=e.selectAll(_).data([0]);r.exit().remove();r.enter().append(_).attr(w)});e.style("fill",F(p,r)).style("fill-opacity",null);e.classed("pattern_filled",true);var M=function(e){return"."+e.attr("class").replace(/\s/g,".")};var A=M(S.select(e.node().parentNode))+">.pattern_filled";v._patternUrlQueryParts[A]=1};C.initGradients=function(e){var t=e._fullLayout;var r=L.ensureSingle(t._defs,"g","gradients");r.selectAll("linearGradient,radialGradient").remove();t._gradientUrlQueryParts={}};C.initPatterns=function(e){var t=e._fullLayout;var r=L.ensureSingle(t._defs,"g","patterns");r.selectAll("pattern").remove();t._patternUrlQueryParts={}};C.getPatternAttr=function(e,t,r){if(e&&L.isArrayOrTypedArray(e)){return t<e.length?e[t]:r}return e};C.pointStyle=function(e,t,r){if(!e.size())return;var a=C.makePointStyleFns(t);e.each(function(e){C.singlePointStyle(e,S.select(this),t,a,r)})};C.singlePointStyle=function(e,t,r,a,n){var i=r.marker;var o=i.line;t.style("opacity",a.selectedOpacityFn?a.selectedOpacityFn(e):e.mo===undefined?i.opacity:e.mo);if(a.ms2mrc){var s;if(e.ms==="various"||i.size==="various"){s=3}else{s=a.ms2mrc(e.ms)}e.mrc=s;if(a.selectedSizeFn){s=e.mrc=a.selectedSizeFn(e)}var l=C.symbolNumber(e.mx||i.symbol)||0;e.om=l%200>=100;t.attr("d",D(l,s))}var u=false;var c,f,d;if(e.so){d=o.outlierwidth;f=o.outliercolor;c=i.outliercolor}else{var v=(o||{}).width;d=(e.mlw+1||v+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0;if("mlc"in e)f=e.mlcc=a.lineScale(e.mlc);else if(L.isArrayOrTypedArray(o.color))f=E.defaultLine;else f=o.color;if(L.isArrayOrTypedArray(i.color)){c=E.defaultLine;u=true}if("mc"in e){c=e.mcc=a.markerScale(e.mc)}else{c=i.color||"rgba(0,0,0,0)"}if(a.selectedColorFn){c=a.selectedColorFn(e)}}if(e.om){t.call(E.stroke,c).style({"stroke-width":(d||1)+"px",fill:"none"})}else{t.style("stroke-width",(e.isBlank?0:d)+"px");var p=i.gradient;var h=e.mgt;if(h)u=true;else h=p&&p.type;if(L.isArrayOrTypedArray(h)){h=h[0];if(!O[h])h=0}var m=i.pattern;var g=m&&C.getPatternAttr(m.shape,e.i,"");if(h&&h!=="none"){var y=e.mgc;if(y)u=true;else y=p.color;var x=r.uid;if(u)x+="-"+e.i;C.gradient(t,n,x,h,[[0,y],[1,c]],"fill")}else if(g){var b=C.getPatternAttr(m.bgcolor,e.i,null);var _=C.getPatternAttr(m.fgcolor,e.i,null);var w=m.fgopacity;var T=C.getPatternAttr(m.size,e.i,8);var k=C.getPatternAttr(m.solidity,e.i,.3);var M=e.mcc||L.isArrayOrTypedArray(m.shape)||L.isArrayOrTypedArray(m.bgcolor)||L.isArrayOrTypedArray(m.size)||L.isArrayOrTypedArray(m.solidity);var A=r.uid;if(M)A+="-"+e.i;C.pattern(t,"point",n,A,g,T,k,e.mcc,m.fillmode,b,_,w)}else{E.fill(t,c)}if(d){E.stroke(t,f)}}};C.makePointStyleFns=function(e){var t={};var r=e.marker;t.markerScale=C.tryColorscale(r,"");t.lineScale=C.tryColorscale(r,"line");if(b.traceIs(e,"symbols")){t.ms2mrc=s.isBubble(e)?l(e):function(){return(r.size||6)/2}}if(e.selectedpoints){L.extendFlat(t,C.makeSelectedPointStyleFns(e))}return t};C.makeSelectedPointStyleFns=function(e){var t={};var r=e.selected||{};var a=e.unselected||{};var n=e.marker||{};var i=r.marker||{};var o=a.marker||{};var s=n.opacity;var l=i.opacity;var u=o.opacity;var c=l!==undefined;var f=u!==undefined;if(L.isArrayOrTypedArray(s)||c||f){t.selectedOpacityFn=function(e){var t=e.mo===undefined?n.opacity:e.mo;if(e.selected){return c?l:t}else{return f?u:_*t}}}var d=n.color;var v=i.color;var p=o.color;if(v||p){t.selectedColorFn=function(e){var t=e.mcc||d;if(e.selected){return v||t}else{return p||t}}}var h=n.size;var m=i.size;var g=o.size;var y=m!==undefined;var x=g!==undefined;if(b.traceIs(e,"symbols")&&(y||x)){t.selectedSizeFn=function(e){var t=e.mrc||h/2;if(e.selected){return y?m/2:t}else{return x?g/2:t}}}return t};C.makeSelectedTextStyleFns=function(e){var t={};var r=e.selected||{};var a=e.unselected||{};var n=e.textfont||{};var i=r.textfont||{};var o=a.textfont||{};var s=n.color;var l=i.color;var u=o.color;t.selectedTextColorFn=function(e){var t=e.tc||s;if(e.selected){return l||t}else{if(u)return u;else return l?t:E.addOpacity(t,_)}};return t};C.selectedPointStyle=function(e,t){if(!e.size()||!t.selectedpoints)return;var n=C.makeSelectedPointStyleFns(t);var i=t.marker||{};var a=[];if(n.selectedOpacityFn){a.push(function(e,t){e.style("opacity",n.selectedOpacityFn(t))})}if(n.selectedColorFn){a.push(function(e,t){E.fill(e,n.selectedColorFn(t))})}if(n.selectedSizeFn){a.push(function(e,t){var r=t.mx||i.symbol||0;var a=n.selectedSizeFn(t);e.attr("d",D(C.symbolNumber(r),a));t.mrc2=a})}if(a.length){e.each(function(e){var t=S.select(this);for(var r=0;r<a.length;r++){a[r](t,e)}})}};C.tryColorscale=function(e,t){var r=t?L.nestedProperty(e,t).get():e;if(r){var a=r.color;if((r.colorscale||r._colorAx)&&L.isArrayOrTypedArray(a)){return n.makeColorScaleFuncFromTrace(r)}}return L.identity};var w={start:1,end:-1,middle:0,bottom:1,top:-1};function T(e,t,r,a){var n=S.select(e.node().parentNode);var i=t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle";var o=t.indexOf("left")!==-1?"end":t.indexOf("right")!==-1?"start":"middle";var s=a?a/.8+1:0;var l=(m.lineCount(e)-1)*d+1;var u=w[o]*s;var c=r*.75+w[i]*s+(w[i]-1)*l*r/2;e.attr("text-anchor",o);n.attr("transform",f(u,c))}function k(e,t){var r=e.ts||t.textfont.size;return o(r)&&r>0?r:0}C.textPointStyle=function(e,c,f){if(!e.size())return;var d;if(c.selectedpoints){var t=C.makeSelectedTextStyleFns(c);d=t.selectedTextColorFn}var v=c.texttemplate;var p=f._fullLayout;e.each(function(e){var t=S.select(this);var r=v?L.extractOption(e,c,"txt","texttemplate"):L.extractOption(e,c,"tx","text");if(!r&&r!==0){t.remove();return}if(v){var a=c._module.formatLabels;var n=a?a(e,c,p):{};var i={};g(i,c,e.i);var o=c._meta||{};r=L.texttemplateString(r,n,p._d3locale,i,e,o)}var s=e.tp||c.textposition;var l=k(e,c);var u=d?d(e):e.tc||c.textfont.color;t.call(C.font,e.tf||c.textfont.family,l,u).text(r).call(m.convertToTspans,f).call(T,s,l,e.mrc)})};C.selectedTextStyle=function(e,i){if(!e.size()||!i.selectedpoints)return;var o=C.makeSelectedTextStyleFns(i);e.each(function(e){var t=S.select(this);var r=o.selectedTextColorFn(e);var a=e.tp||i.textposition;var n=k(e,i);E.fill(t,r);T(t,a,n,e.mrc2||e.mrc)})};var M=.5;C.smoothopen=function(e,t){if(e.length<3){return"M"+e.join("L")}var r="M"+e[0];var a=[];var n;for(n=1;n<e.length-1;n++){a.push(A(e[n-1],e[n],e[n+1],t))}r+="Q"+a[0][0]+" "+e[1];for(n=2;n<e.length-1;n++){r+="C"+a[n-2][1]+" "+a[n-1][0]+" "+e[n]}r+="Q"+a[e.length-3][1]+" "+e[e.length-1];return r};C.smoothclosed=function(e,t){if(e.length<3){return"M"+e.join("L")+"Z"}var r="M"+e[0];var a=e.length-1;var n=[A(e[a],e[0],e[1],t)];var i;for(i=1;i<a;i++){n.push(A(e[i-1],e[i],e[i+1],t))}n.push(A(e[a-1],e[a],e[0],t));for(i=1;i<=a;i++){r+="C"+n[i-1][1]+" "+n[i][0]+" "+e[i]}r+="C"+n[a][1]+" "+n[0][0]+" "+e[0]+"Z";return r};function A(e,t,r,a){var n=e[0]-t[0];var i=e[1]-t[1];var o=r[0]-t[0];var s=r[1]-t[1];var l=Math.pow(n*n+i*i,M/2);var u=Math.pow(o*o+s*s,M/2);var c=(u*u*n-l*l*o)*a;var f=(u*u*i-l*l*s)*a;var d=3*u*(l+u);var v=3*l*(l+u);return[[S.round(t[0]+(d&&c/d),2),S.round(t[1]+(d&&f/d),2)],[S.round(t[0]-(v&&c/v),2),S.round(t[1]-(v&&f/v),2)]]}var I={hv:function(e,t){return"H"+S.round(t[0],2)+"V"+S.round(t[1],2)},vh:function(e,t){return"V"+S.round(t[1],2)+"H"+S.round(t[0],2)},hvh:function(e,t){return"H"+S.round((e[0]+t[0])/2,2)+"V"+S.round(t[1],2)+"H"+S.round(t[0],2)},vhv:function(e,t){return"V"+S.round((e[1]+t[1])/2,2)+"H"+S.round(t[0],2)+"V"+S.round(t[1],2)}};var P=function(e,t){return"L"+S.round(t[0],2)+","+S.round(t[1],2)};C.steps=function(e){var a=I[e]||P;return function(e){var t="M"+S.round(e[0][0],2)+","+S.round(e[0][1],2);for(var r=1;r<e.length;r++){t+=a(e[r-1],e[r])}return t}};C.makeTester=function(){var e=L.ensureSingleById(S.select("body"),"svg","js-plotly-tester",function(e){e.attr(a.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})});var t=L.ensureSingle(e,"path","js-reference-point",function(e){e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});C.tester=e;C.testref=t};C.savedBBoxes={};var R=0;var N=1e4;C.bBox=function(e,t,r){if(!r)r=z(e);var a;if(r){a=C.savedBBoxes[r];if(a)return L.extendFlat({},a)}else if(e.childNodes.length===1){var n=e.childNodes[0];r=z(n);if(r){var i=+n.getAttribute("x")||0;var o=+n.getAttribute("y")||0;var s=n.getAttribute("transform");if(!s){var l=C.bBox(n,false,r);if(i){l.left+=i;l.right+=i}if(o){l.top+=o;l.bottom+=o}return l}r+="~"+i+"~"+o+"~"+s;a=C.savedBBoxes[r];if(a)return L.extendFlat({},a)}}var u,c;if(t){u=e}else{c=C.tester.node();u=e.cloneNode(true);c.appendChild(u)}S.select(u).attr("transform",null).call(m.positionText,0,0);var f=u.getBoundingClientRect();var d=C.testref.node().getBoundingClientRect();if(!t)c.removeChild(u);var v={height:f.height,width:f.width,left:f.left-d.left,top:f.top-d.top,right:f.right-d.left,bottom:f.bottom-d.top};if(R>=N){C.savedBBoxes={};R=0}if(r)C.savedBBoxes[r]=v;R++;return L.extendFlat({},v)};function z(e){var t=e.getAttribute("data-unformatted");if(t===null)return;return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}C.setClipUrl=function(e,t,r){e.attr("clip-path",F(t,r))};function F(e,t){if(!e)return null;var r=t._context;var a=r._exportedPlot?"":r._baseUrl||"";return a?"url('"+a+"#"+e+"')":"url(#"+e+")"}C.getTranslate=function(e){var t=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/;var r=e.attr?"attr":"getAttribute";var a=e[r]("transform")||"";var n=a.replace(t,function(e,t,r){return[t,r].join(" ")}).split(" ");return{x:+n[0]||0,y:+n[1]||0}};C.setTranslate=function(e,t,r){var a=/(\btranslate\(.*?\);?)/;var n=e.attr?"attr":"getAttribute";var i=e.attr?"attr":"setAttribute";var o=e[n]("transform")||"";t=t||0;r=r||0;o=o.replace(a,"").trim();o+=f(t,r);o=o.trim();e[i]("transform",o);return o};C.getScale=function(e){var t=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/;var r=e.attr?"attr":"getAttribute";var a=e[r]("transform")||"";var n=a.replace(t,function(e,t,r){return[t,r].join(" ")}).split(" ");return{x:+n[0]||1,y:+n[1]||1}};C.setScale=function(e,t,r){var a=/(\bscale\(.*?\);?)/;var n=e.attr?"attr":"getAttribute";var i=e.attr?"attr":"setAttribute";var o=e[n]("transform")||"";t=t||1;r=r||1;o=o.replace(a,"").trim();o+="scale("+t+","+r+")";o=o.trim();e[i]("transform",o);return o};var j=/\s*sc.*/;C.setPointGroupScale=function(e,t,r){t=t||1;r=r||1;if(!e)return;var a=t===1&&r===1?"":"scale("+t+","+r+")";e.each(function(){var e=(this.getAttribute("transform")||"").replace(j,"");e+=a;e=e.trim();this.setAttribute("transform",e)})};var H=/translate\([^)]*\)\s*$/;C.setTextPointsScale=function(e,o,s){if(!e)return;e.each(function(){var e;var t=S.select(this);var r=t.select("text");if(!r.node())return;var a=parseFloat(r.attr("x")||0);var n=parseFloat(r.attr("y")||0);var i=(t.attr("transform")||"").match(H);if(o===1&&s===1){e=[]}else{e=[f(a,n),"scale("+o+","+s+")",f(-a,-n)]}if(i){e.push(i)}t.attr("transform",e.join(""))})}},{"../../components/fx/helpers":136,"../../constants/alignment":205,"../../constants/interactions":209,"../../constants/xmlns_namespaces":211,"../../lib":230,"../../lib/svg_text_utils":252,"../../registry":313,"../../traces/scatter/make_bubble_size_func":370,"../../traces/scatter/subtypes":378,"../color":100,"../colorscale":112,"./symbol_defs":123,"@plotly/d3":11,"fast-isnumeric":15,tinycolor2:65}],123:[function(e,t,r){"use strict";var f=e("@plotly/d3");t.exports={circle:{n:0,f:function(e){var t=f.round(e,2);return"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"}},square:{n:1,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"}},diamond:{n:2,f:function(e){var t=f.round(e*1.3,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"}},cross:{n:3,f:function(e){var t=f.round(e*.4,2);var r=f.round(e*1.2,2);return"M"+r+","+t+"H"+t+"V"+r+"H-"+t+"V"+t+"H-"+r+"V-"+t+"H-"+t+"V-"+r+"H"+t+"V-"+t+"H"+r+"Z"}},x:{n:4,f:function(e){var t=f.round(e*.8/Math.sqrt(2),2);var r="l"+t+","+t;var a="l"+t+",-"+t;var n="l-"+t+",-"+t;var i="l-"+t+","+t;return"M0,"+t+r+a+n+a+n+i+n+i+r+i+r+"Z"}},"triangle-up":{n:5,f:function(e){var t=f.round(e*2/Math.sqrt(3),2);var r=f.round(e/2,2);var a=f.round(e,2);return"M-"+t+","+r+"H"+t+"L0,-"+a+"Z"}},"triangle-down":{n:6,f:function(e){var t=f.round(e*2/Math.sqrt(3),2);var r=f.round(e/2,2);var a=f.round(e,2);return"M-"+t+",-"+r+"H"+t+"L0,"+a+"Z"}},"triangle-left":{n:7,f:function(e){var t=f.round(e*2/Math.sqrt(3),2);var r=f.round(e/2,2);var a=f.round(e,2);return"M"+r+",-"+t+"V"+t+"L-"+a+",0Z"}},"triangle-right":{n:8,f:function(e){var t=f.round(e*2/Math.sqrt(3),2);var r=f.round(e/2,2);var a=f.round(e,2);return"M-"+r+",-"+t+"V"+t+"L"+a+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=f.round(e*.6,2);var r=f.round(e*1.2,2);return"M-"+r+",-"+t+"H"+t+"V"+r+"Z"}},"triangle-se":{n:10,f:function(e){var t=f.round(e*.6,2);var r=f.round(e*1.2,2);return"M"+t+",-"+r+"V"+t+"H-"+r+"Z"}},"triangle-sw":{n:11,f:function(e){var t=f.round(e*.6,2);var r=f.round(e*1.2,2);return"M"+r+","+t+"H-"+t+"V-"+r+"Z"}},"triangle-nw":{n:12,f:function(e){var t=f.round(e*.6,2);var r=f.round(e*1.2,2);return"M-"+t+","+r+"V-"+t+"H"+r+"Z"}},pentagon:{n:13,f:function(e){var t=f.round(e*.951,2);var r=f.round(e*.588,2);var a=f.round(-e,2);var n=f.round(e*-.309,2);var i=f.round(e*.809,2);return"M"+t+","+n+"L"+r+","+i+"H-"+r+"L-"+t+","+n+"L0,"+a+"Z"}},hexagon:{n:14,f:function(e){var t=f.round(e,2);var r=f.round(e/2,2);var a=f.round(e*Math.sqrt(3)/2,2);return"M"+a+",-"+r+"V"+r+"L0,"+t+"L-"+a+","+r+"V-"+r+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=f.round(e,2);var r=f.round(e/2,2);var a=f.round(e*Math.sqrt(3)/2,2);return"M-"+r+","+a+"H"+r+"L"+t+",0L"+r+",-"+a+"H-"+r+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=f.round(e*.924,2);var r=f.round(e*.383,2);return"M-"+r+",-"+t+"H"+r+"L"+t+",-"+r+"V"+r+"L"+r+","+t+"H-"+r+"L-"+t+","+r+"V-"+r+"Z"}},star:{n:17,f:function(e){var t=e*1.4;var r=f.round(t*.225,2);var a=f.round(t*.951,2);var n=f.round(t*.363,2);var i=f.round(t*.588,2);var o=f.round(-t,2);var s=f.round(t*-.309,2);var l=f.round(t*.118,2);var u=f.round(t*.809,2);var c=f.round(t*.382,2);return"M"+r+","+s+"H"+a+"L"+n+","+l+"L"+i+","+u+"L0,"+c+"L-"+i+","+u+"L-"+n+","+l+"L-"+a+","+s+"H-"+r+"L0,"+o+"Z"}},hexagram:{n:18,f:function(e){var t=f.round(e*.66,2);var r=f.round(e*.38,2);var a=f.round(e*.76,2);return"M-"+a+",0l-"+r+",-"+t+"h"+a+"l"+r+",-"+t+"l"+r+","+t+"h"+a+"l-"+r+","+t+"l"+r+","+t+"h-"+a+"l-"+r+","+t+"l-"+r+",-"+t+"h-"+a+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=f.round(e*Math.sqrt(3)*.8,2);var r=f.round(e*.8,2);var a=f.round(e*1.6,2);var n=f.round(e*4,2);var i="A "+n+","+n+" 0 0 1 ";return"M-"+t+","+r+i+t+","+r+i+"0,-"+a+i+"-"+t+","+r+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=f.round(e*Math.sqrt(3)*.8,2);var r=f.round(e*.8,2);var a=f.round(e*1.6,2);var n=f.round(e*4,2);var i="A "+n+","+n+" 0 0 1 ";return"M"+t+",-"+r+i+"-"+t+",-"+r+i+"0,"+a+i+t+",-"+r+"Z"}},"star-square":{n:21,f:function(e){var t=f.round(e*1.1,2);var r=f.round(e*2,2);var a="A "+r+","+r+" 0 0 1 ";return"M-"+t+",-"+t+a+"-"+t+","+t+a+t+","+t+a+t+",-"+t+a+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=f.round(e*1.4,2);var r=f.round(e*1.9,2);var a="A "+r+","+r+" 0 0 1 ";return"M-"+t+",0"+a+"0,"+t+a+t+",0"+a+"0,-"+t+a+"-"+t+",0"+"Z"}},"diamond-tall":{n:23,f:function(e){var t=f.round(e*.7,2);var r=f.round(e*1.4,2);return"M0,"+r+"L"+t+",0L0,-"+r+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=f.round(e*1.4,2);var r=f.round(e*.7,2);return"M0,"+r+"L"+t+",0L0,-"+r+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"H-"+t+"L"+t+",-"+t+"H-"+t+"Z"},noDot:true},bowtie:{n:26,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"V-"+t+"L-"+t+","+t+"V-"+t+"Z"},noDot:true},"circle-cross":{n:27,f:function(e){var t=f.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:true,noDot:true},"circle-x":{n:28,f:function(e){var t=f.round(e,2);var r=f.round(e/Math.sqrt(2),2);return"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:true,noDot:true},"square-cross":{n:29,f:function(e){var t=f.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:true,noDot:true},"square-x":{n:30,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:true,noDot:true},"diamond-cross":{n:31,f:function(e){var t=f.round(e*1.3,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"+"M0,-"+t+"V"+t+"M-"+t+",0H"+t},needLine:true,noDot:true},"diamond-x":{n:32,f:function(e){var t=f.round(e*1.3,2);var r=f.round(e*.65,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"+"M-"+r+",-"+r+"L"+r+","+r+"M-"+r+","+r+"L"+r+",-"+r},needLine:true,noDot:true},"cross-thin":{n:33,f:function(e){var t=f.round(e*1.4,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t},needLine:true,noDot:true,noFill:true},"x-thin":{n:34,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t},needLine:true,noDot:true,noFill:true},asterisk:{n:35,f:function(e){var t=f.round(e*1.2,2);var r=f.round(e*.85,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r},needLine:true,noDot:true,noFill:true},hash:{n:36,f:function(e){var t=f.round(e/2,2);var r=f.round(e,2);return"M"+t+","+r+"V-"+r+"m-"+r+",0V"+r+"M"+r+","+t+"H-"+r+"m0,-"+r+"H"+r},needLine:true,noFill:true},"y-up":{n:37,f:function(e){var t=f.round(e*1.2,2);var r=f.round(e*1.6,2);var a=f.round(e*.8,2);return"M-"+t+","+a+"L0,0M"+t+","+a+"L0,0M0,-"+r+"L0,0"},needLine:true,noDot:true,noFill:true},"y-down":{n:38,f:function(e){var t=f.round(e*1.2,2);var r=f.round(e*1.6,2);var a=f.round(e*.8,2);return"M-"+t+",-"+a+"L0,0M"+t+",-"+a+"L0,0M0,"+r+"L0,0"},needLine:true,noDot:true,noFill:true},"y-left":{n:39,f:function(e){var t=f.round(e*1.2,2);var r=f.round(e*1.6,2);var a=f.round(e*.8,2);return"M"+a+","+t+"L0,0M"+a+",-"+t+"L0,0M-"+r+",0L0,0"},needLine:true,noDot:true,noFill:true},"y-right":{n:40,f:function(e){var t=f.round(e*1.2,2);var r=f.round(e*1.6,2);var a=f.round(e*.8,2);return"M-"+a+","+t+"L0,0M-"+a+",-"+t+"L0,0M"+r+",0L0,0"},needLine:true,noDot:true,noFill:true},"line-ew":{n:41,f:function(e){var t=f.round(e*1.4,2);return"M"+t+",0H-"+t},needLine:true,noDot:true,noFill:true},"line-ns":{n:42,f:function(e){var t=f.round(e*1.4,2);return"M0,"+t+"V-"+t},needLine:true,noDot:true,noFill:true},"line-ne":{n:43,f:function(e){var t=f.round(e,2);return"M"+t+",-"+t+"L-"+t+","+t},needLine:true,noDot:true,noFill:true},"line-nw":{n:44,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t},needLine:true,noDot:true,noFill:true},"arrow-up":{n:45,f:function(e){var t=f.round(e,2);var r=f.round(e*2,2);return"M0,0L-"+t+","+r+"H"+t+"Z"},noDot:true},"arrow-down":{n:46,f:function(e){var t=f.round(e,2);var r=f.round(e*2,2);return"M0,0L-"+t+",-"+r+"H"+t+"Z"},noDot:true},"arrow-left":{n:47,f:function(e){var t=f.round(e*2,2);var r=f.round(e,2);return"M0,0L"+t+",-"+r+"V"+r+"Z"},noDot:true},"arrow-right":{n:48,f:function(e){var t=f.round(e*2,2);var r=f.round(e,2);return"M0,0L-"+t+",-"+r+"V"+r+"Z"},noDot:true},"arrow-bar-up":{n:49,f:function(e){var t=f.round(e,2);var r=f.round(e*2,2);return"M-"+t+",0H"+t+"M0,0L-"+t+","+r+"H"+t+"Z"},needLine:true,noDot:true},"arrow-bar-down":{n:50,f:function(e){var t=f.round(e,2);var r=f.round(e*2,2);return"M-"+t+",0H"+t+"M0,0L-"+t+",-"+r+"H"+t+"Z"},needLine:true,noDot:true},"arrow-bar-left":{n:51,f:function(e){var t=f.round(e*2,2);var r=f.round(e,2);return"M0,-"+r+"V"+r+"M0,0L"+t+",-"+r+"V"+r+"Z"},needLine:true,noDot:true},"arrow-bar-right":{n:52,f:function(e){var t=f.round(e*2,2);var r=f.round(e,2);return"M0,-"+r+"V"+r+"M0,0L-"+t+",-"+r+"V"+r+"Z"},needLine:true,noDot:true}}},{"@plotly/d3":11}],124:[function(e,t,r){"use strict";t.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],125:[function(e,t,r){"use strict";var y=e("fast-isnumeric");var l=e("../../registry");var x=e("../../plots/cartesian/axes");var b=e("../../lib");var _=e("./compute_error");t.exports=function e(t){var r=t.calcdata;for(var a=0;a<r.length;a++){var n=r[a];var i=n[0].trace;if(i.visible===true&&l.traceIs(i,"errorBarsOK")){var o=x.getFromId(t,i.xaxis);var s=x.getFromId(t,i.yaxis);u(n,i,o,"x");u(n,i,s,"y")}}};function u(e,t,r,a){var n=t["error_"+a]||{};var i=n.visible&&["linear","log"].indexOf(r.type)!==-1;var o=[];if(!i)return;var s=_(n);for(var l=0;l<e.length;l++){var u=e[l];var c=u.i;if(c===undefined)c=l;else if(c===null)continue;var f=u[a];if(!y(r.c2l(f)))continue;var d=s(f,c);if(y(d[0])&&y(d[1])){var v=u[a+"s"]=f-d[0];var p=u[a+"h"]=f+d[1];o.push(v,p)}}var h=r._id;var m=t._extremes[h];var g=x.findExtremes(r,o,b.extendFlat({tozero:m.opts.tozero},{padded:true}));m.min=m.min.concat(g.min);m.max=m.max.concat(g.max)}},{"../../lib":230,"../../plots/cartesian/axes":276,"../../registry":313,"./compute_error":126,"fast-isnumeric":15}],126:[function(e,t,r){"use strict";t.exports=function e(t){var r=t.type;var a=t.symmetric;if(r==="data"){var i=t.array||[];if(a){return function e(t,r){var a=+i[r];return[a,a]}}else{var o=t.arrayminus||[];return function e(t,r){var a=+i[r];var n=+o[r];if(!isNaN(a)||!isNaN(n)){return[n||0,a||0]}return[NaN,NaN]}}}else{var n=l(r,t.value);var s=l(r,t.valueminus);if(a||t.valueminus===undefined){return function e(t){var r=n(t);return[r,r]}}else{return function e(t){return[s(t),n(t)]}}}};function l(e,t){if(e==="percent"){return function(e){return Math.abs(e*t/100)}}if(e==="constant"){return function(){return Math.abs(t)}}if(e==="sqrt"){return function(e){return Math.sqrt(Math.abs(e))}}}},{}],127:[function(e,t,r){"use strict";var p=e("fast-isnumeric");var h=e("../../registry");var m=e("../../lib");var g=e("../../plot_api/plot_template");var y=e("./attributes");t.exports=function(e,t,r,a){var n="error_"+a.axis;var i=g.newContainer(t,n);var o=e[n]||{};function s(e,t){return m.coerce(o,i,y,e,t)}var l=o.array!==undefined||o.value!==undefined||o.type==="sqrt";var u=s("visible",l);if(u===false)return;var c=s("type","array"in o?"data":"percent");var f=true;if(c!=="sqrt"){f=s("symmetric",!((c==="data"?"arrayminus":"valueminus")in o))}if(c==="data"){s("array");s("traceref");if(!f){s("arrayminus");s("tracerefminus")}}else if(c==="percent"||c==="constant"){s("value");if(!f)s("valueminus")}var d="copy_"+a.inherit+"style";if(a.inherit){var v=t["error_"+a.inherit];if((v||{}).visible){s(d,!(o.color||p(o.thickness)||p(o.width)))}}if(!a.inherit||!i[d]){s("color",r);s("thickness");s("width",h.traceIs(t,"gl3d")?0:4)}}},{"../../lib":230,"../../plot_api/plot_template":265,"../../registry":313,"./attributes":124,"fast-isnumeric":15}],128:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../plot_api/edit_types").overrideAll;var i=e("./attributes");var o={error_x:a.extendFlat({},i),error_y:a.extendFlat({},i)};delete o.error_x.copy_zstyle;delete o.error_y.copy_zstyle;delete o.error_y.copy_ystyle;var s={error_x:a.extendFlat({},i),error_y:a.extendFlat({},i),error_z:a.extendFlat({},i)};delete s.error_x.copy_ystyle;delete s.error_y.copy_ystyle;delete s.error_z.copy_ystyle;delete s.error_z.copy_zstyle;t.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:o,bar:o,histogram:o,scatter3d:n(s,"calc","nested"),scattergl:n(o,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:l};function l(e,t,r){if((t.error_y||{}).visible){r.yerr=e.yh-e.y;if(!t.error_y.symmetric)r.yerrneg=e.y-e.ys}if((t.error_x||{}).visible){r.xerr=e.xh-e.x;if(!t.error_x.symmetric)r.xerrneg=e.x-e.xs}}},{"../../lib":230,"../../plot_api/edit_types":258,"./attributes":124,"./calc":125,"./compute_error":126,"./defaults":127,"./plot":129,"./style":130}],129:[function(e,t,r){"use strict";var m=e("@plotly/d3");var g=e("fast-isnumeric");var s=e("../drawing");var y=e("../../traces/scatter/subtypes");t.exports=function e(i,t,o,f){var d;var v=o.xaxis;var p=o.yaxis;var h=f&&f.duration>0;t.each(function(e){var t=e[0].trace;var l=t.error_x||{};var u=t.error_y||{};var r;if(t.ids){r=function(e){return e.id}}var c=y.hasMarkers(t)&&t.marker.maxdisplayed>0;if(!u.visible&&!l.visible)e=[];var a=m.select(this).selectAll("g.errorbar").data(e,r);a.exit().remove();if(!e.length)return;if(!l.visible)a.selectAll("path.xerror").remove();if(!u.visible)a.selectAll("path.yerror").remove();a.style("opacity",1);var n=a.enter().append("g").classed("errorbar",true);if(h){n.style("opacity",0).transition().duration(f.duration).style("opacity",1)}s.setClipUrl(a,o.layerClipId,i);a.each(function(e){var t=m.select(this);var r=x(e,v,p);if(c&&!e.vis)return;var a;var n=t.select("path.yerror");if(u.visible&&g(r.x)&&g(r.yh)&&g(r.ys)){var i=u.width;a="M"+(r.x-i)+","+r.yh+"h"+2*i+"m-"+i+",0V"+r.ys;if(!r.noYS)a+="m-"+i+",0h"+2*i;d=!n.size();if(d){n=t.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",true)}else if(h){n=n.transition().duration(f.duration).ease(f.easing)}n.attr("d",a)}else n.remove();var o=t.select("path.xerror");if(l.visible&&g(r.y)&&g(r.xh)&&g(r.xs)){var s=(l.copy_ystyle?u:l).width;a="M"+r.xh+","+(r.y-s)+"v"+2*s+"m0,-"+s+"H"+r.xs;if(!r.noXS)a+="m0,-"+s+"v"+2*s;d=!o.size();if(d){o=t.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",true)}else if(h){o=o.transition().duration(f.duration).ease(f.easing)}o.attr("d",a)}else o.remove()})})};function x(e,t,r){var a={x:t.c2p(e.x),y:r.c2p(e.y)};if(e.yh!==undefined){a.yh=r.c2p(e.yh);a.ys=r.c2p(e.ys);if(!g(a.ys)){a.noYS=true;a.ys=r.c2p(e.ys,true)}}if(e.xh!==undefined){a.xh=t.c2p(e.xh);a.xs=t.c2p(e.xs);if(!g(a.xs)){a.noXS=true;a.xs=t.c2p(e.xs,true)}}return a}},{"../../traces/scatter/subtypes":378,"../drawing":122,"@plotly/d3":11,"fast-isnumeric":15}],130:[function(e,t,r){"use strict";var i=e("@plotly/d3");var o=e("../color");t.exports=function e(t){t.each(function(e){var t=e[0].trace;var r=t.error_y||{};var a=t.error_x||{};var n=i.select(this);n.selectAll("path.yerror").style("stroke-width",r.thickness+"px").call(o.stroke,r.color);if(a.copy_ystyle)a=r;n.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(o.stroke,a.color)})}},{"../color":100,"@plotly/d3":11}],131:[function(e,t,r){"use strict";var a=e("../../plots/font_attributes");var n=e("./layout_attributes").hoverlabel;var i=e("../../lib/extend").extendFlat;t.exports={hoverlabel:{bgcolor:i({},n.bgcolor,{arrayOk:true}),bordercolor:i({},n.bordercolor,{arrayOk:true}),font:a({arrayOk:true,editType:"none"}),align:i({},n.align,{arrayOk:true}),namelength:i({},n.namelength,{arrayOk:true}),editType:"none"}}},{"../../lib/extend":224,"../../plots/font_attributes":305,"./layout_attributes":141}],132:[function(e,t,r){"use strict";var u=e("../../lib");var c=e("../../registry");t.exports=function e(t){var r=t.calcdata;var a=t._fullLayout;function n(t){return function(e){return u.coerceHoverinfo({hoverinfo:e},{_module:t._module},a)}}for(var i=0;i<r.length;i++){var o=r[i];var s=o[0].trace;if(c.traceIs(s,"pie-like"))continue;var l=c.traceIs(s,"2dMap")?f:u.fillArray;l(s.hoverinfo,o,"hi",n(s));if(s.hovertemplate)l(s.hovertemplate,o,"ht");if(!s.hoverlabel)continue;l(s.hoverlabel.bgcolor,o,"hbg");l(s.hoverlabel.bordercolor,o,"hbc");l(s.hoverlabel.font.size,o,"hts");l(s.hoverlabel.font.color,o,"htc");l(s.hoverlabel.font.family,o,"htf");l(s.hoverlabel.namelength,o,"hnl");l(s.hoverlabel.align,o,"hta")}};function f(e,t,r,a){a=a||u.identity;if(Array.isArray(e)){t[0][r]=a(e)}}},{"../../lib":230,"../../registry":313}],133:[function(e,t,r){"use strict";var o=e("../../registry");var s=e("./hover").hover;t.exports=function e(t,r,a){var n=o.getComponentMethod("annotations","onClick")(t,t._hoverdata);if(a!==undefined){s(t,r,a,true)}function i(){t.emit("plotly_click",{points:t._hoverdata,event:r})}if(t._hoverdata&&r&&r.target){if(n&&n.then){n.then(i)}else i();if(r.stopImmediatePropagation)r.stopImmediatePropagation()}}},{"../../registry":313,"./hover":137}],134:[function(e,t,r){"use strict";t.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],135:[function(e,t,r){"use strict";var s=e("../../lib");var l=e("./attributes");var u=e("./hoverlabel_defaults");t.exports=function e(r,a,t,n){function i(e,t){return s.coerce(r,a,l,e,t)}var o=s.extendFlat({},n.hoverlabel);if(a.hovertemplate)o.namelength=-1;u(r,a,i,o)}},{"../../lib":230,"./attributes":131,"./hoverlabel_defaults":138}],136:[function(e,t,o){"use strict";var c=e("../../lib");o.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo};o.isTraceInSubplots=function(e,t){if(e.type==="splom"){var r=e.xaxes||[];var a=e.yaxes||[];for(var n=0;n<r.length;n++){for(var i=0;i<a.length;i++){if(t.indexOf(r[n]+a[i])!==-1){return true}}}return false}return t.indexOf(o.getSubplot(e))!==-1};o.flat=function(e,t){var r=new Array(e.length);for(var a=0;a<e.length;a++){r[a]=t}return r};o.p2c=function(e,t){var r=new Array(e.length);for(var a=0;a<e.length;a++){r[a]=e[a].p2c(t)}return r};o.getDistanceFunction=function(e,t,r,a){if(e==="closest")return a||o.quadrature(t,r);return e.charAt(0)==="x"?t:r};o.getClosest=function(e,t,r){if(r.index!==false){if(r.index>=0&&r.index<e.length){r.distance=0}else r.index=false}else{for(var a=0;a<e.length;a++){var n=t(e[a]);if(n<=r.distance){r.index=a;r.distance=n}}}return r};o.inbox=function(e,t,r){return e*t<0||e===0?r:Infinity};o.quadrature=function(a,n){return function(e){var t=a(e);var r=n(e);return Math.sqrt(t*t+r*r)}};o.makeEventData=function(e,t,r){var a="index"in e?e.index:e.pointNumber;var n={data:t._input,fullData:t,curveNumber:t.index,pointNumber:a};if(t._indexToPoints){var i=t._indexToPoints[a];if(i.length===1){n.pointIndex=i[0]}else{n.pointIndices=i}}else{n.pointIndex=a}if(t._module.eventData){n=t._module.eventData(n,e,t,r,a)}else{if("xVal"in e)n.x=e.xVal;else if("x"in e)n.x=e.x;if("yVal"in e)n.y=e.yVal;else if("y"in e)n.y=e.y;if(e.xa)n.xaxis=e.xa;if(e.ya)n.yaxis=e.ya;if(e.zLabelVal!==undefined)n.z=e.zLabelVal}o.appendArrayPointValue(n,t,a);return n};o.appendArrayPointValue=function(e,t,r){var a=t._arrayAttrs;if(!a){return}for(var n=0;n<a.length;n++){var i=a[n];var o=f(i);if(e[o]===undefined){var s=c.nestedProperty(t,i).get();var l=d(s,r);if(l!==undefined)e[o]=l}}};o.appendArrayMultiPointValues=function(e,t,r){var a=t._arrayAttrs;if(!a){return}for(var n=0;n<a.length;n++){var i=a[n];var o=f(i);if(e[o]===undefined){var s=c.nestedProperty(t,i).get();var l=new Array(r.length);for(var u=0;u<r.length;u++){l[u]=d(s,r[u])}e[o]=l}}};var r={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function f(e){return r[e]||e}function d(e,t){if(Array.isArray(t)){if(Array.isArray(e)&&Array.isArray(e[t[0]])){return e[t[0]][t[1]]}}else{return e[t]}}var a={x:true,y:true};var n={"x unified":true,"y unified":true};o.isUnifiedHover=function(e){if(typeof e!=="string")return false;return!!n[e]};o.isXYhover=function(e){if(typeof e!=="string")return false;return!!a[e]}},{"../../lib":230}],137:[function(e,t,r){"use strict";var _e=e("@plotly/d3");var we=e("fast-isnumeric");var F=e("tinycolor2");var Te=e("../../lib");var Z=Te.strTranslate;var X=Te.strRotate;var ke=e("../../lib/events");var J=e("../../lib/svg_text_utils");var Me=e("../../lib/override_cursor");var K=e("../drawing");var Ae=e("../color");var Se=e("../dragelement");var j=e("../../plots/cartesian/axes");var Ee=e("../../registry");var Le=e("./helpers");var Q=e("./constants");var ee=e("../legend/defaults");var te=e("../legend/draw");var re=Q.YANGLE;var a=Math.PI*re/180;var T=1/Math.sin(a);var g=Math.cos(a);var y=Math.sin(a);var ae=Q.HOVERARROWSIZE;var ne=Q.HOVERTEXTPAD;var Ce={box:true,ohlc:true,violin:true,candlestick:true};r.hover=function e(t,r,a,n){t=Te.getGraphDiv(t);Te.throttle(t._fullLayout._uid+Q.HOVERID,Q.HOVERMINTIME,function(){i(t,r,a,n)})};r.loneHover=function e(t,a){var r=true;if(!Array.isArray(t)){r=false;t=[t]}var n=t.map(function(e){return{color:e.color||Ae.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,nameLength:e.nameLength,textAlign:e.textAlign,trace:e.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:e.hovertemplate||false,eventData:e.eventData||false,hovertemplateLabels:e.hovertemplateLabels||false}});var i=_e.select(a.container);var o=a.outerContainer?_e.select(a.outerContainer):i;var s={hovermode:"closest",rotateLabels:false,bgColor:a.bgColor||Ae.background,container:i,outerContainer:o};var l=Oe(n,s,a.gd);var u=5;var c=0;var f=0;l.sort(function(e,t){return e.y0-t.y0}).each(function(e,t){var r=e.y0-e.by/2;if(r-u<c){e.offset=c-r+u}else{e.offset=0}c=r+e.by+e.offset;if(t===a.anchorIndex||0)f=e.offset}).each(function(e){e.offset-=f});var d=a.gd._fullLayout._invScaleX;var v=a.gd._fullLayout._invScaleY;Pe(l,s.rotateLabels,d,v);return r?l:l.node()};function i(e,d,t,r){if(!t)t="xy";var v=Array.isArray(t)?t:[t];var p=e._fullLayout;var a=p._plots||[];var n=a[t];var h=p._has("cartesian");if(n){var i=n.overlays.map(function(e){return e.id});v=v.concat(i)}var o=v.length;var m=new Array(o);var g=new Array(o);var s=false;for(var l=0;l<o;l++){var u=v[l];if(a[u]){s=true;m[l]=a[u].xaxis;g[l]=a[u].yaxis}else if(p[u]&&p[u]._subplot){var c=p[u]._subplot;m[l]=c.xaxis;g[l]=c.yaxis}else{Te.warn("Unrecognized subplot: "+u);return}}var y=d.hovermode||p.hovermode;if(y&&!s)y="closest";if(["x","y","closest","x unified","y unified"].indexOf(y)===-1||!e.calcdata||e.querySelector(".zoombox")||e._dragging){return Se.unhoverRaw(e,d)}var x=p.hoverdistance;if(x===-1)x=Infinity;var b=p.spikedistance;if(b===-1)b=Infinity;var _=[];var w=[];var T,k;var f,M,A,S,E,L,C,D,O,I,P;var R={hLinePoint:null,vLinePoint:null};var N=false;if(Array.isArray(d)){y="array";for(f=0;f<d.length;f++){A=e.calcdata[d[f].curveNumber||0];if(A){S=A[0].trace;if(A[0].trace.hoverinfo!=="skip"){w.push(A);if(S.orientation==="h"){N=true}}}}}else{for(M=0;M<e.calcdata.length;M++){A=e.calcdata[M];S=A[0].trace;if(S.hoverinfo!=="skip"&&Le.isTraceInSubplots(S,v)){w.push(A);if(S.orientation==="h"){N=true}}}var z=!d.target;var F,j;if(z){if("xpx"in d)F=d.xpx;else F=m[0]._length/2;if("ypx"in d)j=d.ypx;else j=g[0]._length/2}else{if(ke.triggerHandler(e,"plotly_beforehover",d)===false){return}var H=d.composedPath&&d.composedPath()[0];if(!H){H=d.target}var B=H.getBoundingClientRect();F=d.clientX-B.left;j=d.clientY-B.top;p._calcInverseTransform(e);var q=Te.apply3DTransform(p._invTransform)(F,j);F=q[0];j=q[1];if(F<0||F>m[0]._length||j<0||j>g[0]._length){return Se.unhoverRaw(e,d)}}d.pointerX=F+m[0]._offset;d.pointerY=j+g[0]._offset;if("xval"in d)T=Le.flat(v,d.xval);else T=Le.p2c(m,F);if("yval"in d)k=Le.flat(v,d.yval);else k=Le.p2c(g,j);if(!we(T[0])||!we(k[0])){Te.warn("Fx.hover failed",d,e);return Se.unhoverRaw(e,d)}}var U=Infinity;function Y(e,t){for(M=0;M<w.length;M++){A=w[M];if(!A||!A[0]||!A[0].trace)continue;S=A[0].trace;if(S.visible!==true||S._length===0)continue;if(["carpet","contourcarpet"].indexOf(S._module.name)!==-1)continue;if(S.type==="splom"){L=0;E=v[L]}else{E=Le.getSubplot(S);L=v.indexOf(E)}C=y;if(Le.isUnifiedHover(C)){C=C.charAt(0)}I={cd:A,trace:S,xa:m[L],ya:g[L],maxHoverDistance:x,maxSpikeDistance:b,index:false,distance:Math.min(U,x),spikeDistance:Infinity,xSpike:undefined,ySpike:undefined,color:Ae.defaultLine,name:S.name,x0:undefined,x1:undefined,y0:undefined,y1:undefined,xLabelVal:undefined,yLabelVal:undefined,zLabelVal:undefined,text:undefined};if(p[E]){I.subplot=p[E]._subplot}if(p._splomScenes&&p._splomScenes[S.uid]){I.scene=p._splomScenes[S.uid]}P=_.length;if(C==="array"){var r=d[M];if("pointNumber"in r){I.index=r.pointNumber;C="closest"}else{C="";if("xval"in r){D=r.xval;C="x"}if("yval"in r){O=r.yval;C=C?"closest":"y"}}}else if(e!==undefined&&t!==undefined){D=e;O=t}else{D=T[L];O=k[L]}if(x!==0){if(S._module&&S._module.hoverPoints){var a=S._module.hoverPoints(I,D,O,C,{finiteRange:true,hoverLayer:p._hoverlayer});if(a){var n;for(var i=0;i<a.length;i++){n=a[i];if(we(n.x0)&&we(n.y0)){_.push(Re(n,y))}}}}else{Te.log("Unrecognized trace type in hover:",S)}}if(y==="closest"&&_.length>P){_.splice(0,P);U=_[0].distance}if(h&&b!==0){if(_.length===0){I.distance=b;I.index=false;var o=S._module.hoverPoints(I,D,O,"closest",{hoverLayer:p._hoverlayer});if(o){o=o.filter(function(e){return e.spikeDistance<=b})}if(o&&o.length){var s;var l=o.filter(function(e){return e.xa.showspikes&&e.xa.spikesnap!=="hovered data"});if(l.length){var u=l[0];if(we(u.x0)&&we(u.y0)){s=G(u);if(!R.vLinePoint||R.vLinePoint.spikeDistance>s.spikeDistance){R.vLinePoint=s}}}var c=o.filter(function(e){return e.ya.showspikes&&e.ya.spikesnap!=="hovered data"});if(c.length){var f=c[0];if(we(f.x0)&&we(f.y0)){s=G(f);if(!R.hLinePoint||R.hLinePoint.spikeDistance>s.spikeDistance){R.hLinePoint=s}}}}}}}}Y();function V(e,t){var r=null;var a=Infinity;var n;for(var i=0;i<e.length;i++){n=e[i].spikeDistance;if(n<=a&&n<=t){r=e[i];a=n}}return r}function G(e){if(!e)return null;return{xa:e.xa,ya:e.ya,x:e.xSpike!==undefined?e.xSpike:(e.x0+e.x1)/2,y:e.ySpike!==undefined?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}}var W={fullLayout:p,container:p._hoverlayer,outerContainer:p._paperdiv,event:d};var $=e._spikepoints;var Z={vLinePoint:R.vLinePoint,hLinePoint:R.hLinePoint};e._spikepoints=Z;if(h&&b!==0){if(_.length!==0){var X=_.filter(function(e){return e.ya.showspikes});var J=V(X,b);R.hLinePoint=G(J);var K=_.filter(function(e){return e.xa.showspikes});var Q=V(K,b);R.vLinePoint=G(Q)}}if(_.length===0){var ee=Se.unhoverRaw(e,d);if(h&&(R.hLinePoint!==null||R.vLinePoint!==null)){if(Fe($)){Ne(e,R,W)}}return ee}if(h){if(Fe($)){Ne(e,R,W)}}var te=function(){_.sort(function(e,t){return e.distance-t.distance});_=je(_,y)};te();if(Le.isXYhover(C)&&_[0].length!==0&&_[0].trace.type!=="splom"){var re=_[0];if(Ce[re.trace.type]){_=_.filter(function(e){return e.trace.index===re.trace.index})}else{_=[re]}var ae=_.length;var ne=He("x",re,p);var ie=He("y",re,p);Y(ne,ie);var oe=[];var se={};var le=0;var ue=function(e){var t=Ce[e.trace.type]?De(e):e.trace.index;if(!se[t]){le++;se[t]=le;oe.push(e)}else{var r=se[t]-1;var a=oe[r];if(r>0&&Math.abs(e.distance)<Math.abs(a.distance)){oe[r]=e}}};var ce;for(ce=0;ce<ae;ce++){ue(_[ce])}for(ce=_.length-1;ce>ae-1;ce--){ue(_[ce])}_=oe;te()}var fe=e._hoverdata;var de=[];for(f=0;f<_.length;f++){var ve=_[f];var pe=Le.makeEventData(ve,ve.trace,ve.cd);if(ve.hovertemplate!==false){var he=false;if(ve.cd[ve.index]&&ve.cd[ve.index].ht){he=ve.cd[ve.index].ht}ve.hovertemplate=he||ve.trace.hovertemplate||false}ve.eventData=[pe];de.push(pe)}e._hoverdata=de;var me=y==="y"&&(w.length>1||_.length>1)||y==="closest"&&N&&_.length>1;var ge=Ae.combine(p.plot_bgcolor||Ae.background,p.paper_bgcolor);var ye={hovermode:y,rotateLabels:me,bgColor:ge,container:p._hoverlayer,outerContainer:p._paperdiv,commonLabelOpts:p.hoverlabel,hoverdistance:p.hoverdistance};var xe=Oe(_,ye,e);if(!Le.isUnifiedHover(y)){Ie(xe,me?"xa":"ya",p);Pe(xe,me,p._invScaleX,p._invScaleY)}if(d.target&&d.target.tagName){var be=Ee.getComponentMethod("annotations","hasClickToShow")(e,de);Me(_e.select(d.target),be?"pointer":"")}if(!d.target||r||!ze(e,d,fe))return;if(fe){e.emit("plotly_unhover",{event:d,points:fe})}e.emit("plotly_hover",{event:d,points:e._hoverdata,xaxes:m,yaxes:g,xvals:T,yvals:k})}function De(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa,e.ya||""].join(",")}var d=/<extra>([\s\S]*)<\/extra>/;function Oe(e,t,A){var S=A._fullLayout;var E=t.hovermode;var L=t.rotateLabels;var C=t.bgColor;var r=t.container;var a=t.outerContainer;var _=t.commonLabelOpts||{};var D=t.fontFamily||Q.HOVERFONT;var O=t.fontSize||Q.HOVERFONTSIZE;var w=e[0];var T=w.xa;var k=w.ya;var n=E.charAt(0);var I=w[n+"Label"];var i=a.node().getBoundingClientRect();var P=i.top;var R=i.width;var N=i.height;var z=I!==undefined&&w.distance<=t.hoverdistance&&(E==="x"||E==="y");if(z){var o=true;var s,l;for(s=0;s<e.length;s++){if(o&&e[s].zLabel===undefined)o=false;l=e[s].hoverinfo||e[s].trace.hoverinfo;if(l){var u=Array.isArray(l)?l:l.split("+");if(u.indexOf("all")===-1&&u.indexOf(E)===-1){z=false;break}}}if(o)z=false}var c=r.selectAll("g.axistext").data(z?[0]:[]);c.enter().append("g").classed("axistext",true);c.exit().remove();c.each(function(){var e=_e.select(this);var t=Te.ensureSingle(e,"path","",function(e){e.style({"stroke-width":"1px"})});var r=Te.ensureSingle(e,"text","",function(e){e.attr("data-notex",1)});var a=_.bgcolor||Ae.defaultLine;var n=_.bordercolor||Ae.contrast(a);var i=Ae.contrast(a);var o={family:_.font.family||D,size:_.font.size||O,color:_.font.color||i};t.style({fill:a,stroke:n});r.text(I).call(K.font,o).call(J.positionText,0,0).call(J.convertToTspans,A);e.attr("transform","");var s=r.node().getBoundingClientRect();var l,u;if(E==="x"){var c=T.side==="top"?"-":"";r.attr("text-anchor","middle").call(J.positionText,0,T.side==="top"?P-s.bottom-ae-ne:P-s.top+ae+ne);l=T._offset+(w.x0+w.x1)/2;u=k._offset+(T.side==="top"?0:k._length);var f=s.width/2+ne;if(l<f){l=f;t.attr("d","M-"+(f-ae)+",0"+"L-"+(f-ae*2)+","+c+ae+"H"+(ne+s.width/2)+"v"+c+(ne*2+s.height)+"H-"+f+"V"+c+ae+"Z")}else if(l>S.width-f){l=S.width-f;t.attr("d","M"+(f-ae)+",0"+"L"+f+","+c+ae+"v"+c+(ne*2+s.height)+"H-"+f+"V"+c+ae+"H"+(f-ae*2)+"Z")}else{t.attr("d","M0,0"+"L"+ae+","+c+ae+"H"+(ne+s.width/2)+"v"+c+(ne*2+s.height)+"H-"+(ne+s.width/2)+"V"+c+ae+"H-"+ae+"Z")}}else{var d;var v;var p;if(k.side==="right"){d="start";v=1;p="";l=T._offset+T._length}else{d="end";v=-1;p="-";l=T._offset}u=k._offset+(w.y0+w.y1)/2;r.attr("text-anchor",d);t.attr("d","M0,0"+"L"+p+ae+","+ae+"V"+(ne+s.height/2)+"h"+p+(ne*2+s.width)+"V-"+(ne+s.height/2)+"H"+p+ae+"V-"+ae+"Z");var h=s.height/2;var m=P-s.top-h;var g="clip"+S._uid+"commonlabel"+k._id;var y;if(l<s.width+2*ne+ae){y="M-"+(ae+ne)+"-"+h+"h-"+(s.width-ne)+"V"+h+"h"+(s.width-ne)+"Z";var x=s.width-l+ne;J.positionText(r,x,m);if(d==="end"){r.selectAll("tspan").each(function(){var e=_e.select(this);var t=K.tester.append("text").text(e.text()).call(K.font,o);var r=t.node().getBoundingClientRect();if(Math.round(r.width)<Math.round(s.width)){e.attr("x",x-r.width)}t.remove()})}}else{J.positionText(r,v*(ne+ae),m);y=null}var b=S._topclips.selectAll("#"+g).data(y?[0]:[]);b.enter().append("clipPath").attr("id",g).append("path");b.exit().remove();b.select("path").attr("d",y);K.setClipUrl(r,y?g:null,A)}e.attr("transform",Z(l,u))});if(Le.isUnifiedHover(E)){r.selectAll("g.hovertext").remove();if(e.length===0)return;var f={showlegend:true,legend:{title:{text:I,font:S.hoverlabel.font},font:S.hoverlabel.font,bgcolor:S.hoverlabel.bgcolor,bordercolor:S.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:S.legend?S.legend.traceorder:undefined,orientation:"v"}};var d={};ee(f,d,A._fullData);var v=d.legend;v.entries=[];for(var p=0;p<e.length;p++){var h=ie(e[p],true,E,S,I);var m=h[0];var g=h[1];var y=e[p];y.name=g;if(g!==""){y.text=g+" : "+m}else{y.text=m}var x=y.cd[y.index];if(x){if(x.mc)y.mc=x.mc;if(x.mcc)y.mc=x.mcc;if(x.mlc)y.mlc=x.mlc;if(x.mlcc)y.mlc=x.mlcc;if(x.mlw)y.mlw=x.mlw;if(x.mrc)y.mrc=x.mrc;if(x.dir)y.dir=x.dir}y._distinct=true;v.entries.push([y])}v.entries.sort(function(e,t){return e[0].trace.index-t[0].trace.index});v.layer=r;v._inHover=true;te(A,v);var b=e[0];var M=(b.y0+b.y1)/2;var F=(b.x0+b.x1)/2;var j=r.select("g.legend");var H=j.node().getBoundingClientRect();F+=T._offset;M+=k._offset-H.height/2;var B=H.width+2*ne;var q=F+B<=R;var U=F-B>=0;if(!q&&U){F-=B}else{F+=2*ne}var Y=H.height+2*ne;var V=M<=P;var G=M+Y>=N;var W=Y<=N;if(W){if(V){M=k._offset+2*ne}else if(G){M=N-Y}}j.attr("transform",Z(F,M));return j}var $=r.selectAll("g.hovertext").data(e,function(e){return De(e)});$.enter().append("g").classed("hovertext",true).each(function(){var e=_e.select(this);e.append("rect").call(Ae.fill,Ae.addOpacity(C,.8));e.append("text").classed("name",true);e.append("path").style("stroke-width","1px");e.append("text").classed("nums",true).call(K.font,D,O)});$.exit().remove();$.each(function(e){var t=_e.select(this).attr("transform","");var r=e.color;if(Array.isArray(r)){r=r[e.eventData[0].pointNumber]}var a=e.bgcolor||r;var n=Ae.combine(Ae.opacity(a)?a:Ae.defaultLine,C);var i=Ae.combine(Ae.opacity(r)?r:Ae.defaultLine,C);var o=e.borderColor||Ae.contrast(n);var s=ie(e,z,E,S,I,t);var l=s[0];var u=s[1];var c=t.select("text.nums").call(K.font,e.fontFamily||D,e.fontSize||O,e.fontColor||o).text(l).attr("data-notex",1).call(J.positionText,0,0).call(J.convertToTspans,A);var f=t.select("text.name");var d=0;var v=0;if(u&&u!==l){f.call(K.font,e.fontFamily||D,e.fontSize||O,i).text(u).attr("data-notex",1).call(J.positionText,0,0).call(J.convertToTspans,A);var p=f.node().getBoundingClientRect();d=p.width+2*ne;v=p.height+2*ne}else{f.remove();t.select("rect").remove()}t.select("path").style({fill:n,stroke:o});var h=c.node().getBoundingClientRect();var m=e.xa._offset+(e.x0+e.x1)/2;var g=e.ya._offset+(e.y0+e.y1)/2;var y=Math.abs(e.x1-e.x0);var x=Math.abs(e.y1-e.y0);var b=h.width+ae+ne+d;var _,w;e.ty0=P-h.top;e.bx=h.width+2*ne;e.by=Math.max(h.height+2*ne,v);e.anchor="start";e.txwidth=h.width;e.tx2width=d;e.offset=0;if(L){e.pos=m;_=g+x/2+b<=N;w=g-x/2-b>=0;if((e.idealAlign==="top"||!_)&&w){g-=x/2;e.anchor="end"}else if(_){g+=x/2;e.anchor="start"}else e.anchor="middle"}else{e.pos=g;_=m+y/2+b<=R;w=m-y/2-b>=0;if((e.idealAlign==="left"||!_)&&w){m-=y/2;e.anchor="end"}else if(_){m+=y/2;e.anchor="start"}else{e.anchor="middle";var T=b/2;var k=m+T-R;var M=m-T;if(k>0)m-=k;if(M<0)m+=-M}}c.attr("text-anchor",e.anchor);if(d)f.attr("text-anchor",e.anchor);t.attr("transform",Z(m,g)+(L?X(re):""))});return $}function ie(r,e,t,a,n,i){var o="";var s="";if(r.nameOverride!==undefined)r.name=r.nameOverride;if(r.name){if(r.trace._meta){r.name=Te.templateString(r.name,r.trace._meta)}o=v(r.name,r.nameLength)}var l=t.charAt(0);var u=l==="x"?"y":"x";if(r.zLabel!==undefined){if(r.xLabel!==undefined)s+="x: "+r.xLabel+"<br>";if(r.yLabel!==undefined)s+="y: "+r.yLabel+"<br>";if(r.trace.type!=="choropleth"&&r.trace.type!=="choroplethmapbox"){s+=(s?"z: ":"")+r.zLabel}}else if(e&&r[l+"Label"]===n){s=r[u+"Label"]||""}else if(r.xLabel===undefined){if(r.yLabel!==undefined&&r.trace.type!=="scattercarpet"){s=r.yLabel}}else if(r.yLabel===undefined)s=r.xLabel;else s="("+r.xLabel+", "+r.yLabel+")";if((r.text||r.text===0)&&!Array.isArray(r.text)){s+=(s?"<br>":"")+r.text}if(r.extraText!==undefined)s+=(s?"<br>":"")+r.extraText;if(i&&s===""&&!r.hovertemplate){if(o==="")i.remove();s=o}var c=r.hovertemplate||false;if(c){var f=r.hovertemplateLabels||r;if(r[l+"Label"]!==n){f[l+"other"]=f[l+"Val"];f[l+"otherLabel"]=f[l+"Label"]}s=Te.hovertemplateString(c,f,a._d3locale,r.eventData[0]||{},r.trace._meta);s=s.replace(d,function(e,t){o=v(t,r.nameLength);return""})}return[s,o]}function Ie(e,n,i){var t=0;var o=1;var r=e.size();var s=new Array(r);var l=0;e.each(function(e){var t=e[n];var r=t._id.charAt(0)==="x";var a=t.range;if(l===0&&a&&a[0]>a[1]!==r){o=-1}s[l++]=[{datum:e,traceIndex:e.trace.index,dp:0,pos:e.pos,posref:e.posref,size:e.by*(r?T:1)/2,pmin:0,pmax:r?i.width:i.height}]});s.sort(function(e,t){return e[0].posref-t[0].posref||o*(t[0].traceIndex-e[0].traceIndex)});var u,c,f,d,v,p,a;function h(e){var t=e[0];var r=e[e.length-1];c=t.pmin-t.pos-t.dp+t.size;f=r.pos+r.dp+r.size-t.pmax;if(c>.01){for(v=e.length-1;v>=0;v--)e[v].dp+=c;u=false}if(f<.01)return;if(c<-.01){for(v=e.length-1;v>=0;v--)e[v].dp-=f;u=false}if(!u)return;var a=0;for(d=0;d<e.length;d++){p=e[d];if(p.pos+p.dp+p.size>t.pmax)a++}for(d=e.length-1;d>=0;d--){if(a<=0)break;p=e[d];if(p.pos>t.pmax-1){p.del=true;a--}}for(d=0;d<e.length;d++){if(a<=0)break;p=e[d];if(p.pos<t.pmin+1){p.del=true;a--;f=p.size*2;for(v=e.length-1;v>=0;v--)e[v].dp-=f}}for(d=e.length-1;d>=0;d--){if(a<=0)break;p=e[d];if(p.pos+p.dp+p.size>t.pmax){p.del=true;a--}}}while(!u&&t<=r){t++;u=true;d=0;while(d<s.length-1){var m=s[d];var g=s[d+1];var y=m[m.length-1];var x=g[0];c=y.pos+y.dp+y.size-x.pos-x.dp+x.size;if(c>.01&&y.pmin===x.pmin&&y.pmax===x.pmax){for(v=g.length-1;v>=0;v--)g[v].dp+=c;m.push.apply(m,g);s.splice(d+1,1);a=0;for(v=m.length-1;v>=0;v--)a+=m[v].dp;f=a/m.length;for(v=m.length-1;v>=0;v--)m[v].dp-=f;u=false}else d++}s.forEach(h)}for(d=s.length-1;d>=0;d--){var b=s[d];for(v=b.length-1;v>=0;v--){var _=b[v];var w=_.datum;w.offset=_.dp;w.del=_.del}}}function Pe(e,p,t,r){var h=function(e){return e*t};var m=function(e){return e*r};e.each(function(e){var t=_e.select(this);if(e.del)return t.remove();var r=t.select("text.nums");var a=e.anchor;var n=a==="end"?-1:1;var i={start:1,end:-1,middle:0}[a];var o=i*(ae+ne);var s=o+i*(e.txwidth+ne);var l=0;var u=e.offset;var c=a==="middle";if(c){o-=e.tx2width/2;s+=e.txwidth/2+ne}if(p){u*=-y;l=e.offset*g}t.select("path").attr("d",c?"M-"+h(e.bx/2+e.tx2width/2)+","+m(u-e.by/2)+"h"+h(e.bx)+"v"+m(e.by)+"h-"+h(e.bx)+"Z":"M0,0L"+h(n*ae+l)+","+m(ae+u)+"v"+m(e.by/2-ae)+"h"+h(n*e.bx)+"v-"+m(e.by)+"H"+h(n*ae+l)+"V"+m(u-ae)+"Z");var f=l+o;var d=u+e.ty0-e.by/2+ne;var v=e.textAlign||"auto";if(v!=="auto"){if(v==="left"&&a!=="start"){r.attr("text-anchor","start");f=c?-e.bx/2-e.tx2width/2+ne:-e.bx-ne}else if(v==="right"&&a!=="end"){r.attr("text-anchor","end");f=c?e.bx/2-e.tx2width/2-ne:e.bx+ne}}r.call(J.positionText,h(f),m(d));if(e.tx2width){t.select("text.name").call(J.positionText,h(s+i*ne+l),m(u+e.ty0-e.by/2+ne));t.select("rect").call(K.setRect,h(s+(i-1)*e.tx2width/2+l),m(u-e.by/2-1),h(e.tx2width),m(e.by+2))}})}function Re(n,e){var a=n.index;var i=n.trace||{};var o=n.cd[0];var r=n.cd[a]||{};function s(e){return e||we(e)&&e===0}var l=Array.isArray(a)?function(e,t){var r=Te.castOption(o,a,e);return s(r)?r:Te.extractOption({},i,"",t)}:function(e,t){return Te.extractOption(r,i,e,t)};function t(e,t,r){var a=l(t,r);if(s(a))n[e]=a}t("hoverinfo","hi","hoverinfo");t("bgcolor","hbg","hoverlabel.bgcolor");t("borderColor","hbc","hoverlabel.bordercolor");t("fontFamily","htf","hoverlabel.font.family");t("fontSize","hts","hoverlabel.font.size");t("fontColor","htc","hoverlabel.font.color");t("nameLength","hnl","hoverlabel.namelength");t("textAlign","hta","hoverlabel.align");n.posref=e==="y"||e==="closest"&&i.orientation==="h"?n.xa._offset+(n.x0+n.x1)/2:n.ya._offset+(n.y0+n.y1)/2;n.x0=Te.constrain(n.x0,0,n.xa._length);n.x1=Te.constrain(n.x1,0,n.xa._length);n.y0=Te.constrain(n.y0,0,n.ya._length);n.y1=Te.constrain(n.y1,0,n.ya._length);if(n.xLabelVal!==undefined){n.xLabel="xLabel"in n?n.xLabel:j.hoverLabelText(n.xa,n.xLabelVal,i.xhoverformat);n.xVal=n.xa.c2d(n.xLabelVal)}if(n.yLabelVal!==undefined){n.yLabel="yLabel"in n?n.yLabel:j.hoverLabelText(n.ya,n.yLabelVal,i.yhoverformat);n.yVal=n.ya.c2d(n.yLabelVal)}if(n.zLabelVal!==undefined&&n.zLabel===undefined){n.zLabel=String(n.zLabelVal)}if(!isNaN(n.xerr)&&!(n.xa.type==="log"&&n.xerr<=0)){var u=j.tickText(n.xa,n.xa.c2l(n.xerr),"hover").text;if(n.xerrneg!==undefined){n.xLabel+=" +"+u+" / -"+j.tickText(n.xa,n.xa.c2l(n.xerrneg),"hover").text}else n.xLabel+=" ± "+u;if(e==="x")n.distance+=1}if(!isNaN(n.yerr)&&!(n.ya.type==="log"&&n.yerr<=0)){var c=j.tickText(n.ya,n.ya.c2l(n.yerr),"hover").text;if(n.yerrneg!==undefined){n.yLabel+=" +"+c+" / -"+j.tickText(n.ya,n.ya.c2l(n.yerrneg),"hover").text}else n.yLabel+=" ± "+c;if(e==="y")n.distance+=1}var f=n.hoverinfo||n.trace.hoverinfo;if(f&&f!=="all"){f=Array.isArray(f)?f:f.split("+");if(f.indexOf("x")===-1)n.xLabel=undefined;if(f.indexOf("y")===-1)n.yLabel=undefined;if(f.indexOf("z")===-1)n.zLabel=undefined;if(f.indexOf("text")===-1)n.text=undefined;if(f.indexOf("name")===-1)n.name=undefined}return n}function Ne(e,t,r){var a=r.container;var n=r.fullLayout;var i=n._size;var o=r.event;var s=!!t.hLinePoint;var l=!!t.vLinePoint;var u,c;a.selectAll(".spikeline").remove();if(!(l||s))return;var f=Ae.combine(n.plot_bgcolor,n.paper_bgcolor);if(s){var d=t.hLinePoint;var v,p;u=d&&d.xa;c=d&&d.ya;var h=c.spikesnap;if(h==="cursor"){v=o.pointerX;p=o.pointerY}else{v=u._offset+d.x;p=c._offset+d.y}var m=F.readability(d.color,f)<1.5?Ae.contrast(f):d.color;var g=c.spikemode;var y=c.spikethickness;var x=c.spikecolor||m;var b=j.getPxPosition(e,c);var _,w;if(g.indexOf("toaxis")!==-1||g.indexOf("across")!==-1){if(g.indexOf("toaxis")!==-1){_=b;w=v}if(g.indexOf("across")!==-1){var T=c._counterDomainMin;var k=c._counterDomainMax;if(c.anchor==="free"){T=Math.min(T,c.position);k=Math.max(k,c.position)}_=i.l+T*i.w;w=i.l+k*i.w}a.insert("line",":first-child").attr({x1:_,x2:w,y1:p,y2:p,"stroke-width":y,stroke:x,"stroke-dasharray":K.dashStyle(c.spikedash,y)}).classed("spikeline",true).classed("crisp",true);a.insert("line",":first-child").attr({x1:_,x2:w,y1:p,y2:p,"stroke-width":y+2,stroke:f}).classed("spikeline",true).classed("crisp",true)}if(g.indexOf("marker")!==-1){a.insert("circle",":first-child").attr({cx:b+(c.side!=="right"?y:-y),cy:p,r:y,fill:x}).classed("spikeline",true)}}if(l){var M=t.vLinePoint;var A,S;u=M&&M.xa;c=M&&M.ya;var E=u.spikesnap;if(E==="cursor"){A=o.pointerX;S=o.pointerY}else{A=u._offset+M.x;S=c._offset+M.y}var L=F.readability(M.color,f)<1.5?Ae.contrast(f):M.color;var C=u.spikemode;var D=u.spikethickness;var O=u.spikecolor||L;var I=j.getPxPosition(e,u);var P,R;if(C.indexOf("toaxis")!==-1||C.indexOf("across")!==-1){if(C.indexOf("toaxis")!==-1){P=I;R=S}if(C.indexOf("across")!==-1){var N=u._counterDomainMin;var z=u._counterDomainMax;if(u.anchor==="free"){N=Math.min(N,u.position);z=Math.max(z,u.position)}P=i.t+(1-z)*i.h;R=i.t+(1-N)*i.h}a.insert("line",":first-child").attr({x1:A,x2:A,y1:P,y2:R,"stroke-width":D,stroke:O,"stroke-dasharray":K.dashStyle(u.spikedash,D)}).classed("spikeline",true).classed("crisp",true);a.insert("line",":first-child").attr({x1:A,x2:A,y1:P,y2:R,"stroke-width":D+2,stroke:f}).classed("spikeline",true).classed("crisp",true)}if(C.indexOf("marker")!==-1){a.insert("circle",":first-child").attr({cx:A,cy:I-(u.side!=="top"?D:-D),r:D,fill:O}).classed("spikeline",true)}}}function ze(e,t,r){if(!r||r.length!==e._hoverdata.length)return true;for(var a=r.length-1;a>=0;a--){var n=r[a];var i=e._hoverdata[a];if(n.curveNumber!==i.curveNumber||String(n.pointNumber)!==String(i.pointNumber)||String(n.pointNumbers)!==String(i.pointNumbers)){return true}}return false}function Fe(e,t){if(!t)return true;if(t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint)return true;return false}function v(e,t){return J.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em"]})}function je(e,t){var r=t.charAt(0);var a=[];var n=[];var i=[];for(var o=0;o<e.length;o++){var s=e[o];if(Ee.traceIs(s.trace,"bar-like")||Ee.traceIs(s.trace,"box-violin")){i.push(s)}else if(s.trace[r+"period"]){n.push(s)}else{a.push(s)}}return a.concat(n).concat(i)}function He(e,t,r){var a=t[e+"a"];var n=t[e+"Val"];if(a.type==="category")n=a._categoriesMap[n];else if(a.type==="date")n=a.d2c(n);var i=t.cd[t.index];if(i&&i.t&&i.t.posLetter===a._id){if(r.boxmode==="group"||r.violinmode==="group"){n+=i.t.dPos}}return n}},{"../../lib":230,"../../lib/events":223,"../../lib/override_cursor":241,"../../lib/svg_text_utils":252,"../../plots/cartesian/axes":276,"../../registry":313,"../color":100,"../dragelement":119,"../drawing":122,"../legend/defaults":152,"../legend/draw":153,"./constants":134,"./helpers":136,"@plotly/d3":11,"fast-isnumeric":15,tinycolor2:65}],138:[function(e,t,r){"use strict";var o=e("../../lib");var s=e("../color");var l=e("./helpers").isUnifiedHover;t.exports=function e(t,r,a,n){n=n||{};function i(e){if(!n.font[e]){n.font[e]=r.legend?r.legend.font[e]:r.font[e]}}if(r&&l(r.hovermode)){if(!n.font)n.font={};i("size");i("family");i("color");if(r.legend){if(!n.bgcolor)n.bgcolor=s.combine(r.legend.bgcolor,r.paper_bgcolor);if(!n.bordercolor)n.bordercolor=r.legend.bordercolor}else{if(!n.bgcolor)n.bgcolor=r.paper_bgcolor}}a("hoverlabel.bgcolor",n.bgcolor);a("hoverlabel.bordercolor",n.bordercolor);a("hoverlabel.namelength",n.namelength);o.coerceFont(a,"hoverlabel.font",n.font);a("hoverlabel.align",n.align)}},{"../../lib":230,"../color":100,"./helpers":136}],139:[function(e,t,r){"use strict";var n=e("../../lib");var i=e("./layout_attributes");t.exports=function e(r,a){function t(e,t){if(a[e]!==undefined)return a[e];return n.coerce(r,a,i,e,t)}t("clickmode");return t("hovermode")}},{"../../lib":230,"./layout_attributes":141}],140:[function(e,t,r){"use strict";var a=e("@plotly/d3");var n=e("../../lib");var i=e("../dragelement");var o=e("./helpers");var s=e("./layout_attributes");var l=e("./hover");t.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:s},attributes:e("./attributes"),layoutAttributes:s,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:o.getDistanceFunction,getClosest:o.getClosest,inbox:o.inbox,quadrature:o.quadrature,appendArrayPointValue:o.appendArrayPointValue,castHoverOption:c,castHoverinfo:f,hover:l.hover,unhover:i.unhover,loneHover:l.loneHover,loneUnhover:u,click:e("./click")};function u(e){var t=n.isD3Selection(e)?e:a.select(e);t.selectAll("g.hovertext").remove();t.selectAll(".spikeline").remove()}function c(e,t,r){return n.castOption(e,t,"hoverlabel."+r)}function f(t,r,e){function a(e){return n.coerceHoverinfo({hoverinfo:e},{_module:t._module},r)}return n.castOption(t,e,"hoverinfo",a)}},{"../../lib":230,"../dragelement":119,"./attributes":131,"./calc":132,"./click":133,"./constants":134,"./defaults":135,"./helpers":136,"./hover":137,"./layout_attributes":141,"./layout_defaults":142,"./layout_global_defaults":143,"@plotly/d3":11}],141:[function(e,t,r){"use strict";var a=e("./constants");var n=e("../../plots/font_attributes")({editType:"none"});n.family.dflt=a.HOVERFONT;n.size.dflt=a.HOVERFONTSIZE;t.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",false],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",false,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:n,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":305,"./constants":134}],142:[function(e,t,r){"use strict";var u=e("../../lib");var c=e("./layout_attributes");var f=e("./hovermode_defaults");var d=e("./hoverlabel_defaults");t.exports=function e(r,a){function t(e,t){return u.coerce(r,a,c,e,t)}var n=f(r,a);if(n){t("hoverdistance");t("spikedistance")}var i=t("dragmode");if(i==="select")t("selectdirection");var o=a._has("mapbox");var s=a._has("geo");var l=a._basePlotModules.length;if(a.dragmode==="zoom"&&((o||s)&&l===1||o&&s&&l===2)){a.dragmode="pan"}d(r,a,t)}},{"../../lib":230,"./hoverlabel_defaults":138,"./hovermode_defaults":139,"./layout_attributes":141}],143:[function(e,t,r){"use strict";var n=e("../../lib");var i=e("./hoverlabel_defaults");var o=e("./layout_attributes");t.exports=function e(r,a){function t(e,t){return n.coerce(r,a,o,e,t)}i(r,a,t)}},{"../../lib":230,"./hoverlabel_defaults":138,"./layout_attributes":141}],144:[function(e,t,r){"use strict";var w=e("../../lib");var a=e("../../lib/regex").counter;var n=e("../../plots/domain").attributes;var i=e("../../plots/cartesian/constants").idRegex;var T=e("../../plot_api/plot_template");var k={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:true,dimensions:2,items:{valType:"enumerated",values:[a("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:true,items:{valType:"enumerated",values:[i.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:true,items:{valType:"enumerated",values:[i.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:n({name:"grid",editType:"plot",noGridCell:true},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function I(e,t,r){var a=t[r+"axes"];var n=Object.keys((e._splomAxes||{})[r]||{});if(Array.isArray(a))return a;if(n.length)return n}function o(e,t){var r=e.grid||{};var a=I(t,r,"x");var n=I(t,r,"y");if(!e.grid&&!a&&!n)return;var i=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]);var o=Array.isArray(a);var s=Array.isArray(n);var l=o&&a!==r.xaxes&&s&&n!==r.yaxes;var u,c;if(i){u=r.subplots.length;c=r.subplots[0].length}else{if(s)u=n.length;if(o)c=a.length}var f=T.newContainer(t,"grid");function d(e,t){return w.coerce(r,f,k,e,t)}var v=d("rows",u);var p=d("columns",c);if(!(v*p>1)){delete t.grid;return}if(!i&&!o&&!s){var h=d("pattern")==="independent";if(h)i=true}f._hasSubplotGrid=i;var m=d("roworder");var g=m==="top to bottom";var y=i?.2:.1;var x=i?.3:.1;var b,_;if(l&&t._splomGridDflt){b=t._splomGridDflt.xside;_=t._splomGridDflt.yside}f._domains={x:M("x",d,y,b,p),y:M("y",d,x,_,v,g)}}function M(e,t,r,a,n,i){var o=t(e+"gap",r);var s=t("domain."+e);t(e+"side",a);var l=new Array(n);var u=s[0];var c=(s[1]-u)/(n-o);var f=c*(1-o);for(var d=0;d<n;d++){var v=u+c*d;l[i?n-1-d:d]=[v,v+f]}return l}function s(e,t){var r=t.grid;if(!r||!r._domains)return;var a=e.grid||{};var n=t._subplots;var i=r._hasSubplotGrid;var o=r.rows;var s=r.columns;var l=r.pattern==="independent";var u,c,f,d,v,p,h;var m=r._axisMap={};if(i){var g=a.subplots||[];p=r.subplots=new Array(o);var y=1;for(u=0;u<o;u++){var x=p[u]=new Array(s);var b=g[u]||[];for(c=0;c<s;c++){if(l){v=y===1?"xy":"x"+y+"y"+y;y++}else v=b[c];x[c]="";if(n.cartesian.indexOf(v)!==-1){h=v.indexOf("y");f=v.slice(0,h);d=v.slice(h);if(m[f]!==undefined&&m[f]!==c||m[d]!==undefined&&m[d]!==u){continue}x[c]=v;m[f]=c;m[d]=u}}}}else{var _=I(t,a,"x");var w=I(t,a,"y");r.xaxes=P(_,n.xaxis,s,m,"x");r.yaxes=P(w,n.yaxis,o,m,"y")}var T=r._anchors={};var k=r.roworder==="top to bottom";for(var M in m){var A=M.charAt(0);var S=r[A+"side"];var E,L,C;if(S.length<8){T[M]="free"}else if(A==="x"){if(S.charAt(0)==="t"===k){E=0;L=1;C=o}else{E=o-1;L=-1;C=-1}if(i){var D=m[M];for(u=E;u!==C;u+=L){v=p[u][D];if(!v)continue;h=v.indexOf("y");if(v.slice(0,h)===M){T[M]=v.slice(h);break}}}else{for(u=E;u!==C;u+=L){d=r.yaxes[u];if(n.cartesian.indexOf(M+d)!==-1){T[M]=d;break}}}}else{if(S.charAt(0)==="l"){E=0;L=1;C=s}else{E=s-1;L=-1;C=-1}if(i){var O=m[M];for(u=E;u!==C;u+=L){v=p[O][u];if(!v)continue;h=v.indexOf("y");if(v.slice(h)===M){T[M]=v.slice(0,h);break}}}else{for(u=E;u!==C;u+=L){f=r.xaxes[u];if(n.cartesian.indexOf(f+M)!==-1){T[M]=f;break}}}}}}function P(e,r,t,a,n){var i=new Array(t);var o;function s(e,t){if(r.indexOf(t)!==-1&&a[t]===undefined){i[e]=t;a[t]=e}else i[e]=""}if(Array.isArray(e)){for(o=0;o<t;o++){s(o,e[o])}}else{s(0,n);for(o=1;o<t;o++){s(o,n+(o+1))}}return i}t.exports={moduleType:"component",name:"grid",schema:{layout:{grid:k}},layoutAttributes:k,sizeDefaults:o,contentDefaults:s}},{"../../lib":230,"../../lib/regex":246,"../../plot_api/plot_template":265,"../../plots/cartesian/constants":283,"../../plots/domain":304}],145:[function(e,t,r){"use strict";var a=e("../../plots/cartesian/constants");var n=e("../../plot_api/plot_template").templatedArray;var i=e("../../constants/axis_placeable_objects");t.exports=n("image",{visible:{valType:"boolean",dflt:true,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",a.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",a.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":206,"../../plot_api/plot_template":265,"../../plots/cartesian/constants":283}],146:[function(e,t,r){"use strict";var g=e("fast-isnumeric");var y=e("../../lib/to_log_range");t.exports=function e(t,r,a,n){r=r||{};var i=a==="log"&&r.type==="linear";var o=a==="linear"&&r.type==="log";if(!(i||o))return;var s=t._fullLayout.images;var l=r._id.charAt(0);var u;var c;for(var f=0;f<s.length;f++){u=s[f];c="images["+f+"].";if(u[l+"ref"]===r._id){var d=u[l];var v=u["size"+l];var p=null;var h=null;if(i){p=y(d,r.range);var m=v/Math.pow(10,p)/2;h=2*Math.log(m+Math.sqrt(1+m*m))/Math.LN10}else{p=Math.pow(10,d);h=p*(Math.pow(10,v/2)-Math.pow(10,-v/2))}if(!g(p)){p=null;h=null}else if(!g(h))h=null;n(c+l,p);n(c+"size"+l,h)}}}},{"../../lib/to_log_range":254,"fast-isnumeric":15}],147:[function(e,t,r){"use strict";var d=e("../../lib");var v=e("../../plots/cartesian/axes");var n=e("../../plots/array_container_defaults");var p=e("./attributes");var i="images";t.exports=function e(t,r){var a={name:i,handleItemDefaults:o};n(t,r,a)};function o(r,a,e){function t(e,t){return d.coerce(r,a,p,e,t)}var n=t("source");var i=t("visible",!!n);if(!i)return a;t("layer");t("xanchor");t("yanchor");t("sizex");t("sizey");t("sizing");t("opacity");var o={_fullLayout:e};var s=["x","y"];for(var l=0;l<2;l++){var u=s[l];var c=v.coerceRef(r,a,o,u,"paper",undefined);if(c!=="paper"){var f=v.getFromId(o,c);f._imgIndices.push(a._index)}v.coercePosition(a,o,t,c,u,0)}return a}},{"../../lib":230,"../../plots/array_container_defaults":271,"../../plots/cartesian/axes":276,"./attributes":145}],148:[function(e,t,r){"use strict";var b=e("@plotly/d3");var _=e("../drawing");var w=e("../../plots/cartesian/axes");var h=e("../../plots/cartesian/axis_ids");var m=e("../../constants/xmlns_namespaces");t.exports=function e(g){var y=g._fullLayout;var t=[];var r={};var a=[];var n;var i;for(i=0;i<y.images.length;i++){var o=y.images[i];if(o.visible){if(o.layer==="below"&&o.xref!=="paper"&&o.yref!=="paper"){n=h.ref2id(o.xref)+h.ref2id(o.yref);var s=y._plots[n];if(!s){a.push(o);continue}if(s.mainplot){n=s.mainplot.id}if(!r[n]){r[n]=[]}r[n].push(o)}else if(o.layer==="above"){t.push(o)}else{a.push(o)}}}var x={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function l(r){var n=b.select(this);if(this._imgSrc===r.source){return}n.attr("xmlns",m.svg);if(r.source&&r.source.slice(0,5)==="data:"){n.attr("xlink:href",r.source);this._imgSrc=r.source}else{var e=new Promise(function(a){var e=new Image;this.img=e;e.setAttribute("crossOrigin","anonymous");e.onerror=t;e.onload=function(){var e=document.createElement("canvas");e.width=this.width;e.height=this.height;var t=e.getContext("2d");t.drawImage(this,0,0);var r=e.toDataURL("image/png");n.attr("xlink:href",r);a()};n.on("error",t);e.src=r.source;this._imgSrc=r.source;function t(){n.remove();a()}}.bind(this));g._promises.push(e)}}function u(e){var t=b.select(this);var r=w.getFromId(g,e.xref);var a=w.getFromId(g,e.yref);var n=w.getRefType(e.xref)==="domain";var i=w.getRefType(e.yref)==="domain";var o=y._size;var s,l;if(r!==undefined){s=typeof e.xref==="string"&&n?r._length*e.sizex:Math.abs(r.l2p(e.sizex)-r.l2p(0))}else{s=e.sizex*o.w}if(a!==undefined){l=typeof e.yref==="string"&&i?a._length*e.sizey:Math.abs(a.l2p(e.sizey)-a.l2p(0))}else{l=e.sizey*o.h}var u=s*x.x[e.xanchor].offset;var c=l*x.y[e.yanchor].offset;var f=x.x[e.xanchor].sizing+x.y[e.yanchor].sizing;var d,v;if(r!==undefined){d=typeof e.xref==="string"&&n?r._length*e.x+r._offset:r.r2p(e.x)+r._offset}else{d=e.x*o.w+o.l}d+=u;if(a!==undefined){v=typeof e.yref==="string"&&i?a._length*(1-e.y)+a._offset:a.r2p(e.y)+a._offset}else{v=o.h-e.y*o.h+o.t}v+=c;switch(e.sizing){case"fill":f+=" slice";break;case"stretch":f="none";break}t.attr({x:d,y:v,width:s,height:l,preserveAspectRatio:f,opacity:e.opacity});var p=r&&w.getRefType(e.xref)!=="domain"?r._id:"";var h=a&&w.getRefType(e.yref)!=="domain"?a._id:"";var m=p+h;_.setClipUrl(t,m?"clip"+y._uid+m:null,g)}var c=y._imageLowerLayer.selectAll("image").data(a);var f=y._imageUpperLayer.selectAll("image").data(t);c.enter().append("image");f.enter().append("image");c.exit().remove();f.exit().remove();c.each(function(e){l.bind(this)(e);u.bind(this)(e)});f.each(function(e){l.bind(this)(e);u.bind(this)(e)});var d=Object.keys(y._plots);for(i=0;i<d.length;i++){n=d[i];var v=y._plots[n];if(!v.imagelayer)continue;var p=v.imagelayer.selectAll("image").data(r[n]||[]);p.enter().append("image");p.exit().remove();p.each(function(e){l.bind(this)(e);u.bind(this)(e)})}}},{"../../constants/xmlns_namespaces":211,"../../plots/cartesian/axes":276,"../../plots/cartesian/axis_ids":280,"../drawing":122,"@plotly/d3":11}],149:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":289,"./attributes":145,"./convert_coords":146,"./defaults":147,"./draw":148}],150:[function(e,t,r){"use strict";var a=e("../../plots/font_attributes");var n=e("../color/attributes");t.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:n.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:a({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",false],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",false],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:a({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":305,"../color/attributes":99}],151:[function(e,t,r){"use strict";t.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],152:[function(e,t,r){"use strict";var _=e("../../registry");var w=e("../../lib");var T=e("../../plot_api/plot_template");var k=e("./attributes");var M=e("../../plots/layout_attributes");var A=e("./helpers");t.exports=function e(t,r,a){var n=t.legend||{};var i=0;var o=false;var s="normal";for(var l=0;l<a.length;l++){var u=a[l];if(!u.visible)continue;if(u.showlegend||u._dfltShowLegend&&!(u._module&&u._module.attributes&&u._module.attributes.showlegend&&u._module.attributes.showlegend.dflt===false)){i++;if(u.showlegend){o=true;if(_.traceIs(u,"pie-like")||u._input.showlegend===true){i++}}}if(_.traceIs(u,"bar")&&r.barmode==="stack"||["tonextx","tonexty"].indexOf(u.fill)!==-1){s=A.isGrouped({traceorder:s})?"grouped+reversed":"reversed"}if(u.legendgroup!==undefined&&u.legendgroup!==""){s=A.isReversed({traceorder:s})?"reversed+grouped":"grouped"}}var c=w.coerce(t,r,M,"showlegend",o&&i>1);if(c===false&&!n.uirevision)return;var f=T.newContainer(r,"legend");function d(e,t){return w.coerce(n,f,k,e,t)}d("uirevision",r.uirevision);if(c===false)return;d("bgcolor",r.paper_bgcolor);d("bordercolor");d("borderwidth");var v=w.coerceFont(d,"font",r.font);var p=d("orientation");var h=p==="h";var m,g,y;if(h){m=0;if(_.getComponentMethod("rangeslider","isVisible")(t.xaxis)){g=1.1;y="bottom"}else{g=-.1;y="top"}}else{m=1.02;g=1;y="auto"}d("traceorder",s);if(A.isGrouped(r.legend))d("tracegroupgap");d("itemsizing");d("itemwidth");d("itemclick");d("itemdoubleclick");d("x",m);d("xanchor");d("y",g);d("yanchor",y);d("valign");w.noneOrAll(n,f,["x","y"]);var x=d("title.text");if(x){d("title.side",h?"left":"top");var b=w.extendFlat({},v,{size:w.bigFont(v.size)});w.coerceFont(d,"title.font",b)}}},{"../../lib":230,"../../plot_api/plot_template":265,"../../plots/layout_attributes":309,"../../registry":313,"./attributes":150,"./helpers":156}],153:[function(e,t,r){"use strict";var F=e("@plotly/d3");var R=e("../../lib");var o=e("../../plots/plots");var N=e("../../registry");var u=e("../../lib/events");var z=e("../dragelement");var j=e("../drawing");var s=e("../color");var g=e("../../lib/svg_text_utils");var c=e("./handle_click");var H=e("./constants");var a=e("../../constants/alignment");var y=a.LINE_SPACING;var B=a.FROM_TL;var i=a.FROM_BR;var l=e("./get_legend_data");var f=e("./style");var q=e("./helpers");var x=1;t.exports=function e(t,r){if(!r)r=t._fullLayout.legend||{};return n(t,r)};function n(k,M){var A=k._fullLayout;var S="legend"+A._uid;var E;var L=M._inHover;if(L){E=M.layer;S+="-hover"}else{E=A._infolayer}if(!E)return;if(!k._legendMouseDownTime)k._legendMouseDownTime=0;var e;if(!L){if(!k.calcdata)return;e=A.showlegend&&l(k.calcdata,M)}else{if(!M.entries)return;e=l(M.entries,M)}var r=A.hiddenlabels||[];if(!L&&(!A.showlegend||!e.length)){E.selectAll(".legend").remove();A._topdefs.select("#"+S).remove();return o.autoMargin(k,"legend")}var C=R.ensureSingle(E,"g","legend",function(e){if(!L)e.attr("pointer-events","all")});var D=R.ensureSingleById(A._topdefs,"clipPath",S,function(e){e.append("rect")});var O=R.ensureSingle(C,"rect","bg",function(e){e.attr("shape-rendering","crispEdges")});O.call(s.stroke,M.bordercolor).call(s.fill,M.bgcolor).style("stroke-width",M.borderwidth+"px");var I=R.ensureSingle(C,"g","scrollbox");var t=M.title;M._titleWidth=0;M._titleHeight=0;if(t.text){var a=R.ensureSingle(I,"text","legendtitletext");a.attr("text-anchor","start").call(j.font,t.font).text(t.text);h(a,I,k,M,x)}else{I.selectAll(".legendtitletext").remove()}var P=R.ensureSingle(C,"rect","scrollbar",function(e){e.attr(H.scrollBarEnterAttrs).call(s.fill,H.scrollBarColor)});var n=I.selectAll("g.groups").data(e);n.enter().append("g").attr("class","groups");n.exit().remove();var i=n.selectAll("g.traces").data(R.identity);i.enter().append("g").attr("class","traces");i.exit().remove();i.style("opacity",function(e){var t=e[0].trace;if(N.traceIs(t,"pie-like")){return r.indexOf(e[0].label)!==-1?.5:1}else{return t.visible==="legendonly"?.5:1}}).each(function(){F.select(this).call(d,k,M)}).call(f,k,M).each(function(){if(!L)F.select(this).call(p,k)});R.syncOrAsync([o.previousPromises,function(){return b(k,n,i,M)},function(){if(!L&&V(k))return;var n=A._size;var a=M.borderwidth;var e=n.l+n.w*M.x-B[G(M)]*M._width;var t=n.t+n.h*(1-M.y)-B[W(M)]*M._effHeight;if(!L&&A.margin.autoexpand){var r=e;var i=t;e=R.constrain(e,0,A.width-M._width);t=R.constrain(t,0,A.height-M._effHeight);if(e!==r){R.log("Constrain legend.x to make legend fit inside graph")}if(t!==i){R.log("Constrain legend.y to make legend fit inside graph")}}if(!L)j.setTranslate(C,e,t);P.on(".drag",null);C.on("wheel",null);if(L||M._height<=M._maxHeight||k._context.staticPlot){var o=M._effHeight;if(L)o=M._height;O.attr({width:M._width-a,height:o-a,x:a/2,y:a/2});j.setTranslate(I,0,0);D.select("rect").attr({width:M._width-2*a,height:o-2*a,x:a,y:a});j.setClipUrl(I,S,k);j.setRect(P,0,0,0,0);delete M._scrollY}else{var s=Math.max(H.scrollBarMinHeight,M._effHeight*M._effHeight/M._height);var l=M._effHeight-s-2*H.scrollBarMargin;var u=M._height-M._effHeight;var c=l/u;var f=Math.min(M._scrollY||0,u);O.attr({width:M._width-2*a+H.scrollBarWidth+H.scrollBarMargin,height:M._effHeight-a,x:a/2,y:a/2});D.select("rect").attr({width:M._width-2*a+H.scrollBarWidth+H.scrollBarMargin,height:M._effHeight-2*a,x:a,y:a+f});j.setClipUrl(I,S,k);x(f,s,c);C.on("wheel",function(){f=R.constrain(M._scrollY+F.event.deltaY/l*u,0,u);x(f,s,c);if(f!==0&&f!==u){F.event.preventDefault()}});var d,v,p;var h=function(e,t,r){var a=(r-t)/c+e;return R.constrain(a,0,u)};var m=function(e,t,r){var a=(t-r)/c+e;return R.constrain(a,0,u)};var g=F.behavior.drag().on("dragstart",function(){var e=F.event.sourceEvent;if(e.type==="touchstart"){d=e.changedTouches[0].clientY}else{d=e.clientY}p=f}).on("drag",function(){var e=F.event.sourceEvent;if(e.buttons===2||e.ctrlKey)return;if(e.type==="touchmove"){v=e.changedTouches[0].clientY}else{v=e.clientY}f=h(p,d,v);x(f,s,c)});P.call(g);var y=F.behavior.drag().on("dragstart",function(){var e=F.event.sourceEvent;if(e.type==="touchstart"){d=e.changedTouches[0].clientY;p=f}}).on("drag",function(){var e=F.event.sourceEvent;if(e.type==="touchmove"){v=e.changedTouches[0].clientY;f=m(p,d,v);x(f,s,c)}});I.call(y)}function x(e,t,r){M._scrollY=k._fullLayout.legend._scrollY=e;j.setTranslate(I,0,-e);j.setRect(P,M._width,H.scrollBarMargin+e*r,H.scrollBarWidth,t);D.select("rect").attr("y",a+e)}if(k._context.edits.legendPosition){var b,_,w,T;C.classed("cursor-move",true);z.init({element:C.node(),gd:k,prepFn:function(){var e=j.getTranslate(C);w=e.x;T=e.y},moveFn:function(e,t){var r=w+e;var a=T+t;j.setTranslate(C,r,a);b=z.align(r,0,n.l,n.l+n.w,M.xanchor);_=z.align(a,0,n.t+n.h,n.t,M.yanchor)},doneFn:function(){if(b!==undefined&&_!==undefined){N.call("_guiRelayout",k,{"legend.x":b,"legend.y":_})}},clickFn:function(e,t){var r=E.selectAll("g.traces").filter(function(){var e=this.getBoundingClientRect();return t.clientX>=e.left&&t.clientX<=e.right&&t.clientY>=e.top&&t.clientY<=e.bottom});if(r.size()>0){U(k,C,r,e,t)}}})}}],k)}function U(e,t,r,a,n){var i=r.data()[0][0].trace;var o={event:n,node:r.node(),curveNumber:i.index,expandedIndex:i._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};if(i._group){o.group=i._group}if(N.traceIs(i,"pie-like")){o.label=r.datum()[0].label}var s=u.triggerHandler(e,"plotly_legendclick",o);if(s===false)return;if(a===1){t._clickTimeout=setTimeout(function(){if(!e._fullLayout)return;c(r,e,a)},e._context.doubleClickDelay)}else if(a===2){if(t._clickTimeout)clearTimeout(t._clickTimeout);e._legendMouseDownTime=0;var l=u.triggerHandler(e,"plotly_legenddoubleclick",o);if(l!==false)c(r,e,a)}}function d(o,s,l){var u=o.data()[0][0];var c=u.trace;var e=N.traceIs(c,"pie-like");var t=!l._inHover&&s._context.edits.legendText&&!e;var f=l._maxNameLength;var r,a;if(u.groupTitle){r=u.groupTitle.text;a=u.groupTitle.font}else{a=l.font;if(!l.entries){r=e?u.label:c.name;if(c._meta){r=R.templateString(r,c._meta)}}else{r=u.text}}var n=R.ensureSingle(o,"text","legendtext");n.attr("text-anchor","start").call(j.font,a).text(t?v(r,f):r);var i=l.itemwidth+H.itemGap*2;g.positionText(n,i,0);if(t){n.call(g.makeEditable,{gd:s,text:r}).call(h,o,s,l).on("edit",function(e){this.text(v(e,f)).call(h,o,s,l);var t=u.trace._fullInput||{};var r={};if(N.hasTransform(t,"groupby")){var a=N.getTransformIndices(t,"groupby");var n=a[a.length-1];var i=R.keyedContainer(t,"transforms["+n+"].styles","target","value.name");i.set(u.trace._group,e);r=i.constructUpdate()}else{r.name=e}return N.call("_guiRestyle",s,r,c.index)})}else{h(n,o,s,l)}}function v(e,t){var r=Math.max(4,t);if(e&&e.trim().length>=r/2)return e;e=e||"";for(var a=r-e.length;a>0;a--)e+=" ";return e}function p(t,r){var a=r._context.doubleClickDelay;var e;var n=1;var i=R.ensureSingle(t,"rect","legendtoggle",function(e){if(!r._context.staticPlot){e.style("cursor","pointer").attr("pointer-events","all")}e.call(s.fill,"rgba(0,0,0,0)")});if(r._context.staticPlot)return;i.on("mousedown",function(){e=(new Date).getTime();if(e-r._legendMouseDownTime<a){n+=1}else{n=1;r._legendMouseDownTime=e}});i.on("mouseup",function(){if(r._dragged||r._editing)return;var e=r._fullLayout.legend;if((new Date).getTime()-r._legendMouseDownTime>a){n=Math.max(n-1,1)}U(r,e,t,n,F.event)})}function h(e,t,r,a,n){if(a._inHover)e.attr("data-notex",true);g.convertToTspans(e,r,function(){m(t,r,a,n)})}function m(e,t,r,a){var n=e.data()[0][0];if(!r._inHover&&n&&!n.trace.showlegend){e.remove();return}var i=e.select("g[class*=math-group]");var o=i.node();if(!r)r=t._fullLayout.legend;var s=r.borderwidth;var l;if(a===x){l=r.title.font}else if(n.groupTitle){l=n.groupTitle.font}else{l=r.font}var u=l.size*y;var c,f;if(o){var d=j.bBox(o);c=d.height;f=d.width;if(a===x){j.setTranslate(i,s,s+c*.75)}else{j.setTranslate(i,0,c*.25)}}else{var v=e.select(a===x?".legendtitletext":".legendtext");var p=g.lineCount(v);var h=v.node();c=u*p;f=h?j.bBox(h).width:0;if(a===x){if(r.title.side==="left"){f+=H.itemGap*2}g.positionText(v,s+H.titlePad,s+u)}else{var m=H.itemGap*2+r.itemwidth;if(n.groupTitle){m=H.itemGap;f-=r.itemwidth}g.positionText(v,m,-u*((p-1)/2-.3))}}if(a===x){r._titleWidth=f;r._titleHeight=c}else{n.lineHeight=u;n.height=Math.max(c,16)+3;n.width=f}}function Y(e){var t=0;var r=0;var a=e.title.side;if(a){if(a.indexOf("left")!==-1){t=e._titleWidth}if(a.indexOf("top")!==-1){r=e._titleHeight}}return[t,r]}function b(e,t,r,n){var a=e._fullLayout;if(!n)n=a.legend;var i=a._size;var o=q.isVertical(n);var s=q.isGrouped(n);var l=n.borderwidth;var u=2*l;var c=H.itemGap;var f=n.itemwidth+c*2;var d=2*(l+c);var v=W(n);var p=n.y<0||n.y===0&&v==="top";var h=n.y>1||n.y===1&&v==="bottom";var m=n.tracegroupgap;n._maxHeight=Math.max(p||h?a.height/2:i.h,30);var g=0;n._width=0;n._height=0;var y=Y(n);if(o){r.each(function(e){var t=e[0].height;j.setTranslate(this,l+y[0],l+y[1]+n._height+t/2+c);n._height+=t;n._width=Math.max(n._width,e[0].width)});g=f+n._width;n._width+=c+f+u;n._height+=d;if(s){t.each(function(e,t){j.setTranslate(this,0,t*n.tracegroupgap)});n._height+=(n._lgroupsLength-1)*n.tracegroupgap}}else{var x=G(n);var b=n.x<0||n.x===0&&x==="right";var _=n.x>1||n.x===1&&x==="left";var w=h||p;var T=a.width/2;n._maxWidth=Math.max(b?w&&x==="left"?i.l+i.w:T:_?w&&x==="right"?i.r+i.w:T:i.w,2*f);var k=0;var M=0;r.each(function(e){var t=e[0].width+f;k=Math.max(k,t);M+=t});g=null;var A=0;if(s){var S=0;var E=0;var L=0;t.each(function(){var r=0;var a=0;F.select(this).selectAll("g.traces").each(function(e){var t=e[0].height;j.setTranslate(this,y[0],y[1]+l+c+t/2+a);a+=t;r=Math.max(r,f+e[0].width)});S=Math.max(S,a);var e=r+c;if(e+l+E>n._maxWidth){A=Math.max(A,E);E=0;L+=S+m;S=a}j.setTranslate(this,E,L);E+=e});n._width=Math.max(A,E)+l;n._height=L+S+d}else{var C=r.size();var D=M+u+(C-1)*c<n._maxWidth;var O=0;var I=0;var P=0;var R=0;r.each(function(e){var t=e[0].height;var r=f+e[0].width;var a=(D?r:k)+c;if(a+l+I-c>=n._maxWidth){A=Math.max(A,R);I=0;P+=O;n._height+=O;O=0}j.setTranslate(this,y[0]+l+I,y[1]+l+P+t/2+c);R=I+r+c;I+=a;O=Math.max(O,t)});if(D){n._width=I+u;n._height=O+d}else{n._width=Math.max(A,R)+u;n._height+=O+d}}}n._width=Math.ceil(Math.max(n._width+y[0],n._titleWidth+2*(l+H.titlePad)));n._height=Math.ceil(Math.max(n._height+y[1],n._titleHeight+2*(l+H.itemGap)));n._effHeight=Math.min(n._height,n._maxHeight);var N=e._context.edits;var z=N.legendText||N.legendPosition;r.each(function(e){var t=F.select(this).select(".legendtoggle");var r=e[0].height;var a=z?f:g||f+e[0].width;if(!o)a+=c/2;j.setRect(t,0,-r/2,a,r)})}function V(e){var t=e._fullLayout;var r=t.legend;var a=G(r);var n=W(r);return o.autoMargin(e,"legend",{x:r.x,y:r.y,l:r._width*B[a],r:r._width*i[a],b:r._effHeight*i[n],t:r._effHeight*B[n]})}function G(e){return R.isRightAnchor(e)?"right":R.isCenterAnchor(e)?"center":"left"}function W(e){return R.isBottomAnchor(e)?"bottom":R.isMiddleAnchor(e)?"middle":"top"}},{"../../constants/alignment":205,"../../lib":230,"../../lib/events":223,"../../lib/svg_text_utils":252,"../../plots/plots":311,"../../registry":313,"../color":100,"../dragelement":119,"../drawing":122,"./constants":151,"./get_legend_data":154,"./handle_click":155,"./helpers":156,"./style":158,"@plotly/d3":11}],154:[function(e,t,r){"use strict";var L=e("../../registry");var C=e("./helpers");t.exports=function e(t,a){var r=C.isGrouped(a);var n=C.isReversed(a);var i={};var o=[];var s=false;var l={};var u=0;var c=0;var f,d;function v(e,t){if(e===""||!C.isGrouped(a)){var r="~~i"+u;o.push(r);i[r]=[t];u++}else if(o.indexOf(e)===-1){o.push(e);s=true;i[e]=[t]}else{i[e].push(t)}}for(f=0;f<t.length;f++){var p=t[f];var h=p[0];var m=h.trace;var g=m.legendgroup;if(!a._inHover&&(!m.visible||!m.showlegend))continue;if(L.traceIs(m,"pie-like")){if(!l[g])l[g]={};for(d=0;d<p.length;d++){var y=p[d].label;if(!l[g][y]){v(g,{label:y,color:p[d].color,i:p[d].i,trace:m,pts:p[d].pts});l[g][y]=true;c=Math.max(c,(y||"").length)}}}else{v(g,h);c=Math.max(c,(m.name||"").length)}}if(!o.length)return[];var x=!s||!r;var b=[];for(f=0;f<o.length;f++){var _=i[o[f]];if(x){b.push(_[0])}else{b.push(_)}}if(x)b=[b];for(f=0;f<b.length;f++){var w=Infinity;for(d=0;d<b[f].length;d++){var T=b[f][d].trace.legendrank;if(w>T)w=T}b[f][0]._groupMinRank=w;b[f][0]._preGroupSort=f}var k=function(e,t){return e[0]._groupMinRank-t[0]._groupMinRank||e[0]._preGroupSort-t[0]._preGroupSort};var M=function(e,t){return e.trace.legendrank-t.trace.legendrank||e._preSort-t._preSort};b.forEach(function(e,t){e[0]._preGroupSort=t});b.sort(k);for(f=0;f<b.length;f++){b[f].forEach(function(e,t){e._preSort=t});b[f].sort(M);var A=b[f][0];var S=null;for(d=0;d<b[f].length;d++){var E=b[f][d].trace.legendgrouptitle;if(E&&E.text){S=E;break}}if(n)b[f].reverse();if(S){b[f].unshift({i:-1,groupTitle:S,trace:{showlegend:A.trace.showlegend}})}for(d=0;d<b[f].length;d++){b[f][d]=[b[f][d]]}}a._lgroupsLength=b.length;a._maxNameLength=c;return b}},{"../../registry":313,"./helpers":156}],155:[function(e,t,r){"use strict";var F=e("../../lib");var j=e("../../registry");var H=true;t.exports=function e(t,r,a){var n=r._fullLayout;if(r._dragged||r._editing)return;var i=n.legend.itemclick;var o=n.legend.itemdoubleclick;if(a===1&&i==="toggle"&&o==="toggleothers"&&H&&r.data&&r._context.showTips){F.notifier(F._(r,"Double-click on legend to isolate one trace"),"long");H=false}else{H=false}var s;if(a===1)s=i;else if(a===2)s=o;if(!s)return;var l=n.hiddenlabels?n.hiddenlabels.slice():[];var u=t.data()[0][0];if(u.groupTitle)return;var c=r._fullData;var f=u.trace;var d=f.legendgroup;var v,p,h,m,g,y;var x={};var b=[];var _=[];var w=[];function T(e,t,r){var a=b.indexOf(e);var n=x[t];if(!n){n=x[t]=[]}if(b.indexOf(e)===-1){b.push(e);a=b.length-1}n[a]=r;return a}function k(e,t){var r=e._fullInput;if(j.hasTransform(r,"groupby")){var a=_[r.index];if(!a){var n=j.getTransformIndices(r,"groupby");var i=n[n.length-1];a=F.keyedContainer(r,"transforms["+i+"].styles","target","value.visible");_[r.index]=a}var o=a.get(e._group);if(o===undefined){o=true}if(o!==false){a.set(e._group,t)}w[r.index]=T(r.index,"visible",r.visible===false?false:true)}else{var s=r.visible===false?false:t;T(r.index,"visible",s)}}if(j.traceIs(f,"pie-like")){var M=u.label;var A=l.indexOf(M);if(s==="toggle"){if(A===-1)l.push(M);else l.splice(A,1)}else if(s==="toggleothers"){l=[];r.calcdata[0].forEach(function(e){if(M!==e.label){l.push(e.label)}});if(r._fullLayout.hiddenlabels&&r._fullLayout.hiddenlabels.length===l.length&&A===-1){l=[]}}j.call("_guiRelayout",r,"hiddenlabels",l)}else{var S=d&&d.length;var E=[];var L;if(S){for(v=0;v<c.length;v++){L=c[v];if(!L.visible)continue;if(L.legendgroup===d){E.push(v)}}}if(s==="toggle"){var C;switch(f.visible){case true:C="legendonly";break;case false:C=false;break;case"legendonly":C=true;break}if(S){for(v=0;v<c.length;v++){if(c[v].visible!==false&&c[v].legendgroup===d){k(c[v],C)}}}else{k(f,C)}}else if(s==="toggleothers"){var D,O,I,P;var R=true;for(v=0;v<c.length;v++){D=c[v]===f;I=c[v].showlegend!==true;if(D||I)continue;O=S&&c[v].legendgroup===d;if(!O&&c[v].visible===true&&!j.traceIs(c[v],"notLegendIsolatable")){R=false;break}}for(v=0;v<c.length;v++){if(c[v].visible===false)continue;if(j.traceIs(c[v],"notLegendIsolatable")){continue}switch(f.visible){case"legendonly":k(c[v],true);break;case true:P=R?true:"legendonly";D=c[v]===f;I=c[v].showlegend!==true&&!c[v].legendgroup;O=D||S&&c[v].legendgroup===d;k(c[v],O||I?true:P);break}}}for(v=0;v<_.length;v++){h=_[v];if(!h)continue;var N=h.constructUpdate();var z=Object.keys(N);for(p=0;p<z.length;p++){m=z[p];y=x[m]=x[m]||[];y[w[v]]=N[m]}}g=Object.keys(x);for(v=0;v<g.length;v++){m=g[v];for(p=0;p<b.length;p++){if(!x[m].hasOwnProperty(p)){x[m][p]=undefined}}}j.call("_guiRestyle",r,x,b)}}},{"../../lib":230,"../../registry":313}],156:[function(e,t,r){"use strict";r.isGrouped=function e(t){return(t.traceorder||"").indexOf("grouped")!==-1};r.isVertical=function e(t){return t.orientation!=="h"};r.isReversed=function e(t){return(t.traceorder||"").indexOf("reversed")!==-1}},{}],157:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":150,"./defaults":152,"./draw":153,"./style":158}],158:[function(e,t,r){"use strict";var M=e("@plotly/d3");var A=e("../../registry");var S=e("../../lib");var g=S.strTranslate;var E=e("../drawing");var L=e("../color");var C=e("../colorscale/helpers").extractOpts;var D=e("../../traces/scatter/subtypes");var y=e("../../traces/pie/style_one");var O=e("../../traces/pie/helpers").castOption;var I=e("./constants");var P=12;var R=5;var N=2;var z=10;var F=5;t.exports=function e(t,w,x){var r=w._fullLayout;if(!x)x=r.legend;var b=x.itemsizing==="constant";var T=x.itemwidth;var a=(T+I.itemGap*2)/2;var _=g(a,0);var k=function(e,t,r,a){var n;if(e+1){n=e}else if(t&&t.width>0){n=t.width}else{return 0}return b?a:Math.min(n,r)};t.each(function(e){var t=M.select(this);var r=S.ensureSingle(t,"g","layers");r.style("opacity",e[0].trace.opacity);var a=x.valign;var n=e[0].lineHeight;var i=e[0].height;if(a==="middle"||!n||!i){r.attr("transform",null)}else{var o={top:1,bottom:-1}[a];var s=o*(.5*(n-i+3));r.attr("transform",g(0,s))}var l=r.selectAll("g.legendfill").data([e]);l.enter().append("g").classed("legendfill",true);var u=r.selectAll("g.legendlines").data([e]);u.enter().append("g").classed("legendlines",true);var c=r.selectAll("g.legendsymbols").data([e]);c.enter().append("g").classed("legendsymbols",true);c.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",true)}).each(m).each(o).each(l).each(s).each(c).each(p).each(v).each(n).each(i).each(f).each(d);function n(e){var t=H(e);var r=t.showFill;var a=t.showLine;var n=t.showGradientLine;var i=t.showGradientFill;var o=t.anyFill;var s=t.anyLine;var l=e[0];var u=l.trace;var c,f;var d=C(u);var v=d.colorscale;var p=d.reversescale;var h=function(e){if(e.size()){var t="legendfill-"+u.uid;E.gradient(e,w,t,j(p),v,"fill")}};var m=function(e){if(e.size()){var t="legendline-"+u.uid;E.lineGroupStyle(e);E.gradient(e,w,t,j(p),v,"stroke")}};var g=D.hasMarkers(u)||!o?"M5,0":s?"M5,-2":"M5,-3";var y=M.select(this);var x=y.select(".legendfill").selectAll("path").data(r||i?[e]:[]);x.enter().append("path").classed("js-fill",true);x.exit().remove();x.attr("d",g+"h"+T+"v6h-"+T+"z").call(r?E.fillGroupStyle:h);if(a||n){var b=k(undefined,u.line,z,R);f=S.minExtend(u,{line:{width:b}});c=[S.minExtend(l,{trace:f})]}var _=y.select(".legendlines").selectAll("path").data(a||n?[c]:[]);_.enter().append("path").classed("js-line",true);_.exit().remove();_.attr("d",g+(n?"l"+T+",0.0001":"h"+T)).call(a?E.lineGroupStyle:m)}function i(e){var t=H(e);var r=t.anyFill;var a=t.anyLine;var n=t.showLine;var i=t.showMarker;var o=e[0];var s=o.trace;var l=!i&&!a&&!r&&D.hasText(s);var u,c;function f(e,t,r,a){var n=S.nestedProperty(s,e).get();var i=S.isArrayOrTypedArray(n)&&t?t(n):n;if(b&&i&&a!==undefined){i=a}if(r){if(i<r[0])return r[0];else if(i>r[1])return r[1]}return i}function d(e){if(o._distinct&&o.index&&e[o.index])return e[o.index];return e[0]}if(i||l||n){var v={};var p={};if(i){v.mc=f("marker.color",d);v.mx=f("marker.symbol",d);v.mo=f("marker.opacity",S.mean,[.2,1]);v.mlc=f("marker.line.color",d);v.mlw=f("marker.line.width",S.mean,[0,5],N);p.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var h=f("marker.size",S.mean,[2,16],P);v.ms=h;p.marker.size=h}if(n){p.line={width:f("line.width",d,[0,10],R)}}if(l){v.tx="Aa";v.tp=f("textposition",d);v.ts=10;v.tc=f("textfont.color",d);v.tf=f("textfont.family",d)}u=[S.minExtend(o,v)];c=S.minExtend(s,p);c.selectedpoints=null;c.texttemplate=null}var m=M.select(this).select("g.legendpoints");var g=m.selectAll("path.scatterpts").data(i?u:[]);g.enter().insert("path",":first-child").classed("scatterpts",true).attr("transform",_);g.exit().remove();g.call(E.pointStyle,c,w);if(i)u[0].mrc=3;var y=m.selectAll("g.pointtext").data(l?u:[]);y.enter().append("g").classed("pointtext",true).append("text").attr("transform",_);y.exit().remove();y.selectAll("text").call(E.textPointStyle,c,w)}function o(e){var n=e[0].trace;var t=n.type==="waterfall";if(e[0]._distinct&&t){var r=e[0].trace[e[0].dir].marker;e[0].mc=r.color;e[0].mlw=r.line.width;e[0].mlc=r.line.color;return u(e,this,"waterfall")}var a=[];if(n.visible&&t){a=e[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]}var i=M.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(a);i.enter().append("path").classed("legendwaterfall",true).attr("transform",_).style("stroke-miterlimit",1);i.exit().remove();i.each(function(e){var t=M.select(this);var r=n[e[0]].marker;var a=k(undefined,r.line,F,N);t.attr("d",e[1]).style("stroke-width",a+"px").call(L.fill,r.color);if(a){t.call(L.stroke,r.line.color)}})}function s(e){u(e,this)}function l(e){u(e,this,"funnel")}function u(e,t,r){var m=e[0].trace;var g=m.marker||{};var y=g.line||{};var a=!r?A.traceIs(m,"bar"):m.visible&&m.type===r;var n=M.select(t).select("g.legendpoints").selectAll("path.legend"+r).data(a?[e]:[]);n.enter().append("path").classed("legend"+r,true).attr("d","M6,6H-6V-6H6Z").attr("transform",_);n.exit().remove();n.each(function(e){var t=M.select(this);var r=e[0];var a=k(r.mlw,g.line,F,N);t.style("stroke-width",a+"px");var n=r.mcc;if(!x._inHover&&"mc"in r){var i=C(g);var o=i.mid;if(o===undefined)o=(i.max+i.min)/2;n=E.tryColorscale(g,"")(o)}var s=n||r.mc||g.color;var l=g.pattern;var u=l&&E.getPatternAttr(l.shape,0,"");if(u){var c=E.getPatternAttr(l.bgcolor,0,null);var f=E.getPatternAttr(l.fgcolor,0,null);var d=l.fgopacity;var v=B(l.size,8,10);var p=B(l.solidity,.5,1);var h="legend-"+m.uid;t.call(E.pattern,"legend",w,h,u,v,p,n,l.fillmode,c,f,d)}else{t.call(L.fill,s)}if(a)L.stroke(t,r.mlc||y.color)})}function c(e){var a=e[0].trace;var n=M.select(this).select("g.legendpoints").selectAll("path.legendbox").data(a.visible&&A.traceIs(a,"box-violin")?[e]:[]);n.enter().append("path").classed("legendbox",true).attr("d","M6,6H-6V-6H6Z").attr("transform",_);n.exit().remove();n.each(function(){var e=M.select(this);if((a.boxpoints==="all"||a.points==="all")&&L.opacity(a.fillcolor)===0&&L.opacity((a.line||{}).color)===0){var t=S.minExtend(a,{marker:{size:b?P:S.constrain(a.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});n.call(E.pointStyle,t,w)}else{var r=k(undefined,a.line,F,N);e.style("stroke-width",r+"px").call(L.fill,a.fillcolor);if(r)L.stroke(e,a.line.color)}})}function f(e){var i=e[0].trace;var t=M.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(i.visible&&i.type==="candlestick"?[e,e]:[]);t.enter().append("path").classed("legendcandle",true).attr("d",function(e,t){if(t)return"M-15,0H-8M-8,6V-6H8Z";return"M15,0H8M8,-6V6H-8Z"}).attr("transform",_).style("stroke-miterlimit",1);t.exit().remove();t.each(function(e,t){var r=M.select(this);var a=i[t?"increasing":"decreasing"];var n=k(undefined,a.line,F,N);r.style("stroke-width",n+"px").call(L.fill,a.fillcolor);if(n)L.stroke(r,a.line.color)})}function d(e){var i=e[0].trace;var t=M.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(i.visible&&i.type==="ohlc"?[e,e]:[]);t.enter().append("path").classed("legendohlc",true).attr("d",function(e,t){if(t)return"M-15,0H0M-8,-6V0";return"M15,0H0M8,6V0"}).attr("transform",_).style("stroke-miterlimit",1);t.exit().remove();t.each(function(e,t){var r=M.select(this);var a=i[t?"increasing":"decreasing"];var n=k(undefined,a.line,F,N);r.style("fill","none").call(E.dashLine,a.line.dash,n);if(n)L.stroke(r,a.line.color)})}function v(e){h(e,this,"pie")}function p(e){h(e,this,"funnelarea")}function h(e,t,r){var a=e[0];var n=a.trace;var i=!r?A.traceIs(n,r):n.visible&&n.type===r;var o=M.select(t).select("g.legendpoints").selectAll("path.legend"+r).data(i?[e]:[]);o.enter().append("path").classed("legend"+r,true).attr("d","M6,6H-6V-6H6Z").attr("transform",_);o.exit().remove();if(o.size()){var s=(n.marker||{}).line;var l=k(O(s.width,a.pts),s,F,N);var u=S.minExtend(n,{marker:{line:{width:l}}});u.marker.line.color=s.color;var c=S.minExtend(a,{trace:u});y(o,c,u)}}function m(e){var c=e[0].trace;var f;var t=[];if(c.visible){switch(c.type){case"histogram2d":case"heatmap":t=[["M-15,-2V4H15V-2Z"]];f=true;break;case"choropleth":case"choroplethmapbox":t=[["M-6,-6V6H6V-6Z"]];f=true;break;case"densitymapbox":t=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]];f="radial";break;case"cone":t=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]];f=false;break;case"streamtube":t=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]];f=false;break;case"surface":t=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]];f=true;break;case"mesh3d":t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];f=false;break;case"volume":t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];f=true;break;case"isosurface":t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]];f=false;break}}var r=M.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(t);r.enter().append("path").classed("legend3dandfriends",true).attr("transform",_).style("stroke-miterlimit",1);r.exit().remove();r.each(function(e,t){var r=M.select(this);var a=C(c);var n=a.colorscale;var i=a.reversescale;var o=function(e){if(e.size()){var t="legendfill-"+c.uid;E.gradient(e,w,t,j(i,f==="radial"),n,"fill")}};var s;if(!n){var l=c.vertexcolor||c.facecolor||c.color;s=S.isArrayOrTypedArray(l)?l[t]||l[0]:l}else{if(!f){var u=n.length;s=t===0?n[i?u-1:0][1]:t===1?n[i?0:u-1][1]:n[Math.floor((u-1)/2)][1]}}r.attr("d",e[0]);if(s){r.call(L.fill,s)}else{r.call(o)}})}};function j(e,t){var r=t?"radial":"horizontal";return r+(e?"":"reversed")}function H(e){var t=e[0].trace;var r=t.contours;var a=D.hasLines(t);var n=D.hasMarkers(t);var i=t.visible&&t.fill&&t.fill!=="none";var o=false;var s=false;if(r){var l=r.coloring;if(l==="lines"){o=true}else{a=l==="none"||l==="heatmap"||r.showlines}if(r.type==="constraint"){i=r._operation!=="="}else if(l==="fill"||l==="heatmap"){s=true}}return{showMarker:n,showLine:a,showFill:i,showGradientLine:o,showGradientFill:s,anyLine:a||o,anyFill:i||s}}function B(e,t,r){if(e&&S.isArrayOrTypedArray(e))return t;if(e>r)return r;return e}},{"../../lib":230,"../../registry":313,"../../traces/pie/helpers":345,"../../traces/pie/style_one":351,"../../traces/scatter/subtypes":378,"../color":100,"../colorscale/helpers":111,"../drawing":122,"./constants":151,"@plotly/d3":11}],159:[function(e,t,r){"use strict";var a=e("./constants");t.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:true,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:true,dflt:"",editType:"modebar"}}},{"./constants":161}],160:[function(e,t,r){"use strict";var y=e("../../registry");var a=e("../../plots/plots");var x=e("../../plots/cartesian/axis_ids");var n=e("../../fonts/ploticon");var i=e("../shapes/draw").eraseActiveShape;var o=e("../../lib");var s=o._;var l=t.exports={};l.toImage={name:"toImage",title:function(e){var t=e._context.toImageButtonOptions||{};var r=t.format||"png";return r==="png"?s(e,"Download plot as a png"):s(e,"Download plot")},icon:n.camera,click:function(t){var r=t._context.toImageButtonOptions;var a={format:r.format||"png"};o.notifier(s(t,"Taking snapshot - this may take a few seconds"),"long");if(a.format!=="svg"&&o.isIE()){o.notifier(s(t,"IE only supports svg.  Changing format to svg."),"long");a.format="svg"}["filename","width","height","scale"].forEach(function(e){if(e in r){a[e]=r[e]}});y.call("downloadImage",t,a).then(function(e){o.notifier(s(t,"Snapshot succeeded")+" - "+e,"long")}).catch(function(){o.notifier(s(t,"Sorry, there was a problem downloading your snapshot!"),"long")})}};l.sendDataToCloud={name:"sendDataToCloud",title:function(e){return s(e,"Edit in Chart Studio")},icon:n.disk,click:function(e){a.sendDataToCloud(e)}};l.editInChartStudio={name:"editInChartStudio",title:function(e){return s(e,"Edit in Chart Studio")},icon:n.pencil,click:function(e){a.sendDataToCloud(e)}};l.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"dragmode",val:"zoom",icon:n.zoombox,click:u};l.pan2d={name:"pan2d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"dragmode",val:"pan",icon:n.pan,click:u};l.select2d={name:"select2d",_cat:"select",title:function(e){return s(e,"Box Select")},attr:"dragmode",val:"select",icon:n.selectbox,click:u};l.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return s(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:n.lasso,click:u};l.drawclosedpath={name:"drawclosedpath",title:function(e){return s(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:n.drawclosedpath,click:u};l.drawopenpath={name:"drawopenpath",title:function(e){return s(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:n.drawopenpath,click:u};l.drawline={name:"drawline",title:function(e){return s(e,"Draw line")},attr:"dragmode",val:"drawline",icon:n.drawline,click:u};l.drawrect={name:"drawrect",title:function(e){return s(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:n.drawrect,click:u};l.drawcircle={name:"drawcircle",title:function(e){return s(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:n.drawcircle,click:u};l.eraseshape={name:"eraseshape",title:function(e){return s(e,"Erase active shape")},icon:n.eraseshape,click:i};l.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:n.zoom_plus,click:u};l.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:n.zoom_minus,click:u};l.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return s(e,"Autoscale")},attr:"zoom",val:"auto",icon:n.autoscale,click:u};l.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return s(e,"Reset axes")},attr:"zoom",val:"reset",icon:n.home,click:u};l.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return s(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:n.tooltip_basic,gravity:"ne",click:u};l.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return s(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:n.tooltip_compare,gravity:"ne",click:u};function u(e,t){var r=t.currentTarget;var a=r.getAttribute("data-attr");var n=r.getAttribute("data-val")||true;var i=e._fullLayout;var o={};var s=x.list(e,null,true);var l=i._cartesianSpikesEnabled;var u,c;if(a==="zoom"){var f=n==="in"?.5:2;var d=(1+f)/2;var v=(1-f)/2;var p;for(c=0;c<s.length;c++){u=s[c];if(!u.fixedrange){p=u._name;if(n==="auto"){o[p+".autorange"]=true}else if(n==="reset"){if(u._rangeInitial===undefined){o[p+".autorange"]=true}else{var h=u._rangeInitial.slice();o[p+".range[0]"]=h[0];o[p+".range[1]"]=h[1]}if(u._showSpikeInitial!==undefined){o[p+".showspikes"]=u._showSpikeInitial;if(l==="on"&&!u._showSpikeInitial){l="off"}}}else{var m=[u.r2l(u.range[0]),u.r2l(u.range[1])];var g=[d*m[0]+v*m[1],d*m[1]+v*m[0]];o[p+".range[0]"]=u.l2r(g[0]);o[p+".range[1]"]=u.l2r(g[1])}}}}else{if(a==="hovermode"&&(n==="x"||n==="y")){n=i._isHoriz?"y":"x";r.setAttribute("data-val",n)}o[a]=n}i._cartesianSpikesEnabled=l;y.call("_guiRelayout",e,o)}l.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:n.zoombox,click:c};l.pan3d={name:"pan3d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:n.pan,click:c};l.orbitRotation={name:"orbitRotation",title:function(e){return s(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:n["3d_rotate"],click:c};l.tableRotation={name:"tableRotation",title:function(e){return s(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:n["z-axis"],click:c};function c(e,t){var r=t.currentTarget;var a=r.getAttribute("data-attr");var n=r.getAttribute("data-val")||true;var i=e._fullLayout._subplots.gl3d||[];var o={};var s=a.split(".");for(var l=0;l<i.length;l++){o[i[l]+"."+s[1]]=n}var u=n==="pan"?n:"zoom";o.dragmode=u;y.call("_guiRelayout",e,o)}l.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return s(e,"Reset camera to default")},attr:"resetDefault",icon:n.home,click:f};l.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return s(e,"Reset camera to last save")},attr:"resetLastSave",icon:n.movie,click:f};function f(e,t){var r=t.currentTarget;var a=r.getAttribute("data-attr");var n=a==="resetLastSave";var i=a==="resetDefault";var o=e._fullLayout;var s=o._subplots.gl3d||[];var l={};for(var u=0;u<s.length;u++){var c=s[u];var f=c+".camera";var d=c+".aspectratio";var v=c+".aspectmode";var p=o[c]._scene;var h;if(n){l[f+".up"]=p.viewInitial.up;l[f+".eye"]=p.viewInitial.eye;l[f+".center"]=p.viewInitial.center;h=true}else if(i){l[f+".up"]=null;l[f+".eye"]=null;l[f+".center"]=null;h=true}if(h){l[d+".x"]=p.viewInitial.aspectratio.x;l[d+".y"]=p.viewInitial.aspectratio.y;l[d+".z"]=p.viewInitial.aspectratio.z;l[v]=p.viewInitial.aspectmode}}y.call("_guiRelayout",e,l)}l.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:n.tooltip_basic,gravity:"ne",click:v};function d(e,t){var r=t.currentTarget;var a=r._previousVal;var n=e._fullLayout;var i=n._subplots.gl3d||[];var o=["xaxis","yaxis","zaxis"];var s={};var l={};if(a){l=a;r._previousVal=null}else{for(var u=0;u<i.length;u++){var c=i[u];var f=n[c];var d=c+".hovermode";s[d]=f.hovermode;l[d]=false;for(var v=0;v<3;v++){var p=o[v];var h=c+"."+p+".showspikes";l[h]=false;s[h]=f[p].showspikes}}r._previousVal=s}return l}function v(e,t){var r=d(e,t);y.call("_guiRelayout",e,r)}l.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:n.zoom_plus,click:p};l.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:n.zoom_minus,click:p};l.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return s(e,"Reset")},attr:"reset",val:null,icon:n.autoscale,click:p};l.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:n.tooltip_basic,gravity:"ne",click:m};function p(e,t){var r=t.currentTarget;var a=r.getAttribute("data-attr");var n=r.getAttribute("data-val")||true;var i=e._fullLayout;var o=i._subplots.geo||[];for(var s=0;s<o.length;s++){var l=o[s];var u=i[l];if(a==="zoom"){var c=u.projection.scale;var f=n==="in"?2*c:.5*c;y.call("_guiRelayout",e,l+".projection.scale",f)}}if(a==="reset"){_(e,"geo")}}l.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:n.tooltip_basic,gravity:"ne",click:m};l.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:n.tooltip_basic,gravity:"ne",click:m};function h(e){var t=e._fullLayout;if(t.hovermode)return false;if(t._has("cartesian")){return t._isHoriz?"y":"x"}return"closest"}function m(e){var t=h(e);y.call("_guiRelayout",e,"hovermode",t)}l.resetViewSankey={name:"resetSankeyGroup",title:function(e){return s(e,"Reset view")},icon:n.home,click:function(e){var t={"node.groups":[],"node.x":[],"node.y":[]};for(var r=0;r<e._fullData.length;r++){var a=e._fullData[r]._viewInitial;t["node.groups"].push(a.node.groups.slice());t["node.x"].push(a.node.x.slice());t["node.y"].push(a.node.y.slice())}y.call("restyle",e,t)}};l.toggleHover={name:"toggleHover",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:n.tooltip_basic,gravity:"ne",click:function(e,t){var r=d(e,t);r.hovermode=h(e);y.call("_guiRelayout",e,r)}};l.resetViews={name:"resetViews",title:function(e){return s(e,"Reset views")},icon:n.home,click:function(e,t){var r=t.currentTarget;r.setAttribute("data-attr","zoom");r.setAttribute("data-val","reset");u(e,t);r.setAttribute("data-attr","resetLastSave");f(e,t);_(e,"geo");_(e,"mapbox")}};l.toggleSpikelines={name:"toggleSpikelines",title:function(e){return s(e,"Toggle Spike Lines")},icon:n.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout;var r=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled=r==="on"?"off":"on";y.call("_guiRelayout",e,g(e))}};function g(e){var t=e._fullLayout;var r=t._cartesianSpikesEnabled==="on";var a=x.list(e,null,true);var n={};for(var i=0;i<a.length;i++){var o=a[i];n[o._name+".showspikes"]=r?true:o._showSpikeInitial}return n}l.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return s(e,"Reset view")},attr:"reset",icon:n.home,click:function(e){_(e,"mapbox")}};l.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:n.zoom_plus,click:b};l.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:n.zoom_minus,click:b};function b(e,t){var r=t.currentTarget;var a=r.getAttribute("data-val");var n=e._fullLayout;var i=n._subplots.mapbox||[];var o=1.05;var s={};for(var l=0;l<i.length;l++){var u=i[l];var c=n[u].zoom;var f=a==="in"?o*c:c/o;s[u+".zoom"]=f}y.call("_guiRelayout",e,s)}function _(e,t){var r=e._fullLayout;var a=r._subplots[t]||[];var n={};for(var i=0;i<a.length;i++){var o=a[i];var s=r[o]._subplot;var l=s.viewInitial;var u=Object.keys(l);for(var c=0;c<u.length;c++){var f=u[c];n[o+"."+f]=l[f]}}y.call("_guiRelayout",e,n)}},{"../../fonts/ploticon":213,"../../lib":230,"../../plots/cartesian/axis_ids":280,"../../plots/plots":311,"../../registry":313,"../shapes/draw":184}],161:[function(e,t,r){"use strict";var a=e("./buttons");var n=Object.keys(a);var i=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"];var o=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(i);var s=[];var l=function(e){if(o.indexOf(e._cat||e.name)!==-1)return;var t=e.name;var r=(e._cat||e.name).toLowerCase();if(s.indexOf(t)===-1)s.push(t);if(s.indexOf(r)===-1)s.push(r)};n.forEach(function(e){l(a[e])});s.sort();t.exports={DRAW_MODES:i,backButtons:o,foreButtons:s}},{"./buttons":160}],162:[function(e,t,r){"use strict";var s=e("../../lib");var l=e("../color");var u=e("../../plot_api/plot_template");var c=e("./attributes");t.exports=function e(t,r){var a=t.modebar||{};var n=u.newContainer(r,"modebar");function i(e,t){return s.coerce(a,n,c,e,t)}i("orientation");i("bgcolor",l.addOpacity(r.paper_bgcolor,.5));var o=l.contrast(l.rgb(r.modebar.bgcolor));i("color",l.addOpacity(o,.3));i("activecolor",l.addOpacity(o,.7));i("uirevision",r.uirevision);i("add");i("remove")}},{"../../lib":230,"../../plot_api/plot_template":265,"../color":100,"./attributes":159}],163:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"modebar",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),manage:e("./manage")}},{"./attributes":159,"./defaults":162,"./manage":164}],164:[function(e,t,r){"use strict";var a=e("../../plots/cartesian/axis_ids");var n=e("../../traces/scatter/subtypes");var i=e("../../registry");var I=e("../fx/helpers").isUnifiedHover;var s=e("./modebar");var P=e("./buttons");var R=e("./constants").DRAW_MODES;t.exports=function e(t){var r=t._fullLayout;var a=t._context;var n=r._modeBar;if(!a.displayModeBar&&!a.watermark){if(n){n.destroy();delete r._modeBar}return}if(!Array.isArray(a.modeBarButtonsToRemove)){throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "))}if(!Array.isArray(a.modeBarButtonsToAdd)){throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "))}var i=a.modeBarButtons;var o;if(Array.isArray(i)&&i.length){o=u(i)}else if(!a.displayModeBar&&a.watermark){o=[]}else{o=l(t)}if(n)n.update(t,o);else r._modeBar=s(t,o)};function l(e){var t=e._fullLayout;var r=e._fullData;var a=e._context;function n(e,t){if(typeof t==="string"){if(t.toLowerCase()===e.toLowerCase())return true}else{var r=t.name;var a=t._cat||t.name;if(r===e||a===e.toLowerCase())return true}return false}var i=t.modebar.add;if(typeof i==="string")i=[i];var o=t.modebar.remove;if(typeof o==="string")o=[o];var s=a.modeBarButtonsToAdd.concat(i.filter(function(e){for(var t=0;t<a.modeBarButtonsToRemove.length;t++){if(n(e,a.modeBarButtonsToRemove[t]))return false}return true}));var c=a.modeBarButtonsToRemove.concat(o.filter(function(e){for(var t=0;t<a.modeBarButtonsToAdd.length;t++){if(n(e,a.modeBarButtonsToAdd[t]))return false}return true}));var l=t._has("cartesian");var u=t._has("gl3d");var f=t._has("geo");var d=t._has("pie");var v=t._has("funnelarea");var p=t._has("gl2d");var h=t._has("ternary");var m=t._has("mapbox");var g=t._has("polar");var y=t._has("sankey");var x=N(t);var b=I(t.hovermode);var _=[];function w(e){if(!e.length)return;var t=[];for(var r=0;r<e.length;r++){var a=e[r];var n=P[a];var i=n.name.toLowerCase();var o=(n._cat||n.name).toLowerCase();var s=false;for(var l=0;l<c.length;l++){var u=c[l].toLowerCase();if(u===i||u===o){s=true;break}}if(s)continue;t.push(P[a])}_.push(t)}var T=["toImage"];if(a.showEditInChartStudio)T.push("editInChartStudio");else if(a.showSendToCloud)T.push("sendDataToCloud");w(T);var k=[];var M=[];var A=[];var S=[];if((l||p||d||v||h)+f+u+m+g>1){M=["toggleHover"];A=["resetViews"]}else if(f){k=["zoomInGeo","zoomOutGeo"];M=["hoverClosestGeo"];A=["resetGeo"]}else if(u){M=["hoverClosest3d"];A=["resetCameraDefault3d","resetCameraLastSave3d"]}else if(m){k=["zoomInMapbox","zoomOutMapbox"];M=["toggleHover"];A=["resetViewMapbox"]}else if(p){M=["hoverClosestGl2d"]}else if(d){M=["hoverClosestPie"]}else if(y){M=["hoverClosestCartesian","hoverCompareCartesian"];A=["resetViewSankey"]}else{M=["toggleHover"]}if(l){M=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]}if(F(r)||b){M=[]}if((l||p)&&!x){k=["zoomIn2d","zoomOut2d","autoScale2d"];if(A[0]!=="resetViews")A=["resetScale2d"]}if(u){S=["zoom3d","pan3d","orbitRotation","tableRotation"]}else if((l||p)&&!x||h){S=["zoom2d","pan2d"]}else if(m||f){S=["pan2d"]}else if(g){S=["zoom2d"]}if(z(r)){S.push("select2d","lasso2d")}var E=[];var L=function(e){if(E.indexOf(e)!==-1)return;if(M.indexOf(e)!==-1){E.push(e)}};if(Array.isArray(s)){var C=[];for(var D=0;D<s.length;D++){var O=s[D];if(typeof O==="string"){O=O.toLowerCase();if(R.indexOf(O)!==-1){if(t._has("mapbox")||t._has("cartesian")){S.push(O)}}else if(O==="togglespikelines"){L("toggleSpikelines")}else if(O==="togglehover"){L("toggleHover")}else if(O==="hovercompare"){L("hoverCompareCartesian")}else if(O==="hoverclosest"){L("hoverClosestCartesian");L("hoverClosestGeo");L("hoverClosest3d");L("hoverClosestGl2d");L("hoverClosestPie")}else if(O==="v1hovermode"){L("toggleHover");L("hoverClosestCartesian");L("hoverCompareCartesian");L("hoverClosestGeo");L("hoverClosest3d");L("hoverClosestGl2d");L("hoverClosestPie")}}else C.push(O)}s=C}w(S);w(k.concat(A));w(E);return j(_,s)}function N(e){var t=a.list({_fullLayout:e},null,true);for(var r=0;r<t.length;r++){if(!t[r].fixedrange){return false}}return true}function z(e){var t=false;for(var r=0;r<e.length;r++){if(t)break;var a=e[r];if(!a._module||!a._module.selectPoints)continue;if(i.traceIs(a,"scatter-like")){if(n.hasMarkers(a)||n.hasText(a)){t=true}}else if(i.traceIs(a,"box-violin")){if(a.boxpoints==="all"||a.points==="all"){t=true}}else{t=true}}return t}function F(e){for(var t=0;t<e.length;t++){if(!i.traceIs(e[t],"noHover"))return false}return true}function j(e,t){if(t.length){if(Array.isArray(t[0])){for(var r=0;r<t.length;r++){e.push(t[r])}}else e.push(t)}return e}function u(e){for(var t=0;t<e.length;t++){var r=e[t];for(var a=0;a<r.length;a++){var n=r[a];if(typeof n==="string"){if(P[n]!==undefined){e[t][a]=P[n]}else{throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}}}}return e}},{"../../plots/cartesian/axis_ids":280,"../../registry":313,"../../traces/scatter/subtypes":378,"../fx/helpers":136,"./buttons":160,"./constants":161,"./modebar":165}],165:[function(e,t,r){"use strict";var l=e("@plotly/d3");var o=e("fast-isnumeric");var f=e("../../lib");var s=e("../../fonts/ploticon");var u=new DOMParser;function n(e){this.container=e.container;this.element=document.createElement("div");this.update(e.graphInfo,e.buttons);this.container.appendChild(this.element)}var a=n.prototype;a.update=function(e,t){this.graphInfo=e;var r=this.graphInfo._context;var a=this.graphInfo._fullLayout;var n="modebar-"+a._uid;this.element.setAttribute("id",n);this._uid=n;this.element.className="modebar";if(r.displayModeBar==="hover")this.element.className+=" modebar--hover ease-bg";if(a.modebar.orientation==="v"){this.element.className+=" vertical";t=t.reverse()}var i=a.modebar;var o=r.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";f.deleteRelatedStyleRule(n);f.addRelatedStyleRule(n,o+"#"+n+" .modebar-group","background-color: "+i.bgcolor);f.addRelatedStyleRule(n,"#"+n+" .modebar-btn .icon path","fill: "+i.color);f.addRelatedStyleRule(n,"#"+n+" .modebar-btn:hover .icon path","fill: "+i.activecolor);f.addRelatedStyleRule(n,"#"+n+" .modebar-btn.active .icon path","fill: "+i.activecolor);var s=!this.hasButtons(t);var l=this.hasLogo!==r.displaylogo;var u=this.locale!==r.locale;this.locale=r.locale;if(s||l||u){this.removeAllButtons();this.updateButtons(t);if(r.watermark||r.displaylogo){var c=this.getLogo();if(r.watermark){c.className=c.className+" watermark"}if(a.modebar.orientation==="v"){this.element.insertBefore(c,this.element.childNodes[0])}else{this.element.appendChild(c)}this.hasLogo=true}}this.updateActiveButton()};a.updateButtons=function(e){var n=this;this.buttons=e;this.buttonElements=[];this.buttonsNames=[];this.buttons.forEach(function(e){var a=n.createGroup();e.forEach(function(e){var t=e.name;if(!t){throw new Error("must provide button 'name' in button config")}if(n.buttonsNames.indexOf(t)!==-1){throw new Error("button name '"+t+"' is taken")}n.buttonsNames.push(t);var r=n.createButton(e);n.buttonElements.push(r);a.appendChild(r)});n.element.appendChild(a)})};a.createGroup=function(){var e=document.createElement("div");e.className="modebar-group";return e};a.createButton=function(t){var r=this;var e=document.createElement("a");e.setAttribute("rel","tooltip");e.className="modebar-btn";var a=t.title;if(a===undefined)a=t.name;else if(typeof a==="function")a=a(this.graphInfo);if(a||a===0)e.setAttribute("data-title",a);if(t.attr!==undefined)e.setAttribute("data-attr",t.attr);var n=t.val;if(n!==undefined){if(typeof n==="function")n=n(this.graphInfo);e.setAttribute("data-val",n)}var i=t.click;if(typeof i!=="function"){throw new Error("must provide button 'click' function in button config")}else{e.addEventListener("click",function(e){t.click(r.graphInfo,e);r.updateActiveButton(e.currentTarget)})}e.setAttribute("data-toggle",t.toggle||false);if(t.toggle)l.select(e).classed("active",true);var o=t.icon;if(typeof o==="function"){e.appendChild(o())}else{e.appendChild(this.createIcon(o||s.question))}e.setAttribute("data-gravity",t.gravity||"n");return e};a.createIcon=function(e){var t=o(e.height)?Number(e.height):e.ascent-e.descent;var r="http://www.w3.org/2000/svg";var a;if(e.path){a=document.createElementNS(r,"svg");a.setAttribute("viewBox",[0,0,e.width,t].join(" "));a.setAttribute("class","icon");var n=document.createElementNS(r,"path");n.setAttribute("d",e.path);if(e.transform){n.setAttribute("transform",e.transform)}else if(e.ascent!==undefined){n.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")")}a.appendChild(n)}if(e.svg){var i=u.parseFromString(e.svg,"application/xml");a=i.childNodes[0]}a.setAttribute("height","1em");a.setAttribute("width","1em");return a};a.updateActiveButton=function(e){var o=this.graphInfo._fullLayout;var s=e!==undefined?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var t=e.getAttribute("data-val")||true;var r=e.getAttribute("data-attr");var a=e.getAttribute("data-toggle")==="true";var n=l.select(e);if(a){if(r===s){n.classed("active",!n.classed("active"))}}else{var i=r===null?r:f.nestedProperty(o,r).get();n.classed("active",i===t)}})};a.hasButtons=function(e){var t=this.buttons;if(!t)return false;if(e.length!==t.length)return false;for(var r=0;r<e.length;++r){if(e[r].length!==t[r].length)return false;for(var a=0;a<e[r].length;a++){if(e[r][a].name!==t[r][a].name)return false}}return true};a.getLogo=function(){var e=this.createGroup();var t=document.createElement("a");t.href="https://plotly.com/";t.target="_blank";t.setAttribute("data-title",f._(this.graphInfo,"Produced with Plotly"));t.className="modebar-btn plotlyjsicon modebar-btn--logo";t.appendChild(this.createIcon(s.newplotlylogo));e.appendChild(t);return e};a.removeAllButtons=function(){while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}this.hasLogo=false};a.destroy=function(){f.removeElement(this.container.querySelector(".modebar"));f.deleteRelatedStyleRule(this._uid)};function i(e,t){var r=e._fullLayout;var a=new n({graphInfo:e,container:r._modebardiv.node(),buttons:t});if(r._privateplot){l.select(a.element).append("span").classed("badge-private float--left",true).text("PRIVATE")}return a}t.exports=i},{"../../fonts/ploticon":213,"../../lib":230,"@plotly/d3":11,"fast-isnumeric":15}],166:[function(e,t,r){"use strict";var a=e("../../plots/font_attributes");var n=e("../color/attributes");var i=e("../../plot_api/plot_template").templatedArray;var o=i("button",{visible:{valType:"boolean",dflt:true,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});t.exports={visible:{valType:"boolean",editType:"plot"},buttons:o,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:a({editType:"plot"}),bgcolor:{valType:"color",dflt:n.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:n.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":265,"../../plots/font_attributes":305,"../color/attributes":99}],167:[function(e,t,r){"use strict";t.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],168:[function(e,t,r){"use strict";var v=e("../../lib");var p=e("../color");var h=e("../../plot_api/plot_template");var m=e("../../plots/array_container_defaults");var g=e("./attributes");var y=e("./constants");t.exports=function e(t,r,a,n,i){var o=t.rangeselector||{};var s=h.newContainer(r,"rangeselector");function l(e,t){return v.coerce(o,s,g,e,t)}var u=m(o,s,{name:"buttons",handleItemDefaults:x,calendar:i});var c=l("visible",u.length>0);if(c){var f=b(r,a,n);l("x",f[0]);l("y",f[1]);v.noneOrAll(t,r,["x","y"]);l("xanchor");l("yanchor");v.coerceFont(l,"font",a.font);var d=l("bgcolor");l("activecolor",p.contrast(d,y.lightAmount,y.darkAmount));l("bordercolor");l("borderwidth")}};function x(r,a,e,t){var n=t.calendar;function i(e,t){return v.coerce(r,a,g.buttons,e,t)}var o=i("visible");if(o){var s=i("step");if(s!=="all"){if(n&&n!=="gregorian"&&(s==="month"||s==="year")){a.stepmode="backward"}else{i("stepmode")}i("count")}i("label")}}function b(t,r,e){var a=e.filter(function(e){return r[e].anchor===t._id});var n=0;for(var i=0;i<a.length;i++){var o=r[a[i]].domain;if(o)n=Math.max(o[1],n)}return[t.domain[0],n+y.yPad]}},{"../../lib":230,"../../plot_api/plot_template":265,"../../plots/array_container_defaults":271,"../color":100,"./attributes":166,"./constants":167}],169:[function(e,t,r){"use strict";var v=e("@plotly/d3");var o=e("../../registry");var p=e("../../plots/plots");var n=e("../color");var h=e("../drawing");var m=e("../../lib");var g=m.strTranslate;var y=e("../../lib/svg_text_utils");var i=e("../../plots/cartesian/axis_ids");var a=e("../../constants/alignment");var x=a.LINE_SPACING;var b=a.FROM_TL;var _=a.FROM_BR;var w=e("./constants");var s=e("./get_update_object");t.exports=function e(i){var t=i._fullLayout;var r=t._infolayer.selectAll(".rangeselector").data(l(i),u);r.enter().append("g").classed("rangeselector",true);r.exit().remove();r.style({cursor:"pointer","pointer-events":"all"});r.each(function(e){var t=v.select(this);var a=e;var n=a.rangeselector;var r=t.selectAll("g.button").data(m.filterVisible(n.buttons));r.enter().append("g").classed("button",true);r.exit().remove();r.each(function(e){var t=v.select(this);var r=s(a,e);e._isActive=c(a,e,r);t.call(f,n,e);t.call(T,n,e,i);t.on("click",function(){if(i._dragged)return;o.call("_guiRelayout",i,r)});t.on("mouseover",function(){e._isHovered=true;t.call(f,n,e)});t.on("mouseout",function(){e._isHovered=false;t.call(f,n,e)})});M(i,r,n,a._name,t)})};function l(e){var t=i.list(e,"x",true);var r=[];for(var a=0;a<t.length;a++){var n=t[a];if(n.rangeselector&&n.rangeselector.visible){r.push(n)}}return r}function u(e){return e._id}function c(e,t,r){if(t.step==="all"){return e.autorange===true}else{var a=Object.keys(r);return e.range[0]===r[a[0]]&&e.range[1]===r[a[1]]}}function f(e,t,r){var a=m.ensureSingle(e,"rect","selector-rect",function(e){e.attr("shape-rendering","crispEdges")});a.attr({rx:w.rx,ry:w.ry});a.call(n.stroke,t.bordercolor).call(n.fill,d(t,r)).style("stroke-width",t.borderwidth+"px")}function d(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}function T(e,t,r,a){function n(e){y.convertToTspans(e,a)}var i=m.ensureSingle(e,"text","selector-text",function(e){e.attr("text-anchor","middle")});i.call(h.font,t.font).text(k(r,a._fullLayout._meta)).call(n)}function k(e,t){if(e.label){return t?m.templateString(e.label,t):e.label}if(e.step==="all")return"all";return e.count+e.step.charAt(0)}function M(e,t,s,r,a){var l=0;var u=0;var c=s.borderwidth;t.each(function(){var e=v.select(this);var t=e.select(".selector-text");var r=s.font.size*x;var a=Math.max(r*y.lineCount(t),16)+3;u=Math.max(u,a)});t.each(function(){var e=v.select(this);var t=e.select(".selector-rect");var r=e.select(".selector-text");var a=r.node()&&h.bBox(r.node()).width;var n=s.font.size*x;var i=y.lineCount(r);var o=Math.max(a+10,w.minButtonWidth);e.attr("transform",g(c+l,c));t.attr({x:0,y:0,width:o,height:u});y.positionText(r,o/2,u/2-(i-1)*n/2+3);l+=o+5});var n=e._fullLayout._size;var i=n.l+n.w*s.x;var o=n.t+n.h*(1-s.y);var f="left";if(m.isRightAnchor(s)){i-=l;f="right"}if(m.isCenterAnchor(s)){i-=l/2;f="center"}var d="top";if(m.isBottomAnchor(s)){o-=u;d="bottom"}if(m.isMiddleAnchor(s)){o-=u/2;d="middle"}l=Math.ceil(l);u=Math.ceil(u);i=Math.round(i);o=Math.round(o);p.autoMargin(e,r+"-range-selector",{x:s.x,y:s.y,l:l*b[f],r:l*_[f],b:u*_[d],t:u*b[d]});a.attr("transform",g(i,o))}},{"../../constants/alignment":205,"../../lib":230,"../../lib/svg_text_utils":252,"../../plots/cartesian/axis_ids":280,"../../plots/plots":311,"../../registry":313,"../color":100,"../drawing":122,"./constants":167,"./get_update_object":170,"@plotly/d3":11}],170:[function(e,t,r){"use strict";var u=e("@plotly/d3");t.exports=function e(t,r){var a=t._name;var n={};if(r.step==="all"){n[a+".autorange"]=true}else{var i=o(t,r);n[a+".range[0]"]=i[0];n[a+".range[1]"]=i[1]}return n};function o(e,t){var r=e.range;var a=new Date(e.r2l(r[1]));var n=t.step;var i=t.count;var o;switch(t.stepmode){case"backward":o=e.l2r(+u.time[n].utc.offset(a,-i));break;case"todate":var s=u.time[n].utc.offset(a,-i);o=e.l2r(+u.time[n].utc.ceil(s));break}var l=r[1];return[o,l]}},{"@plotly/d3":11}],171:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":166,"./defaults":168,"./draw":169}],172:[function(e,t,r){"use strict";var a=e("../color/attributes");t.exports={bgcolor:{valType:"color",dflt:a.background,editType:"plot"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:true,editType:"calc",impliedEdits:{"range[0]":undefined,"range[1]":undefined}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":false}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":false}}],editType:"calc",impliedEdits:{autorange:false}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:true,editType:"calc"},editType:"calc"}},{"../color/attributes":99}],173:[function(e,t,r){"use strict";var o=e("../../plots/cartesian/axis_ids").list;var s=e("../../plots/cartesian/autorange").getAutoRange;var l=e("./constants");t.exports=function e(t){var r=o(t,"x",true);for(var a=0;a<r.length;a++){var n=r[a];var i=n[l.name];if(i&&i.visible&&i.autorange){i._input.autorange=true;i._input.range=i.range=s(t,n)}}}},{"../../plots/cartesian/autorange":275,"../../plots/cartesian/axis_ids":280,"./constants":174}],174:[function(e,t,r){"use strict";t.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],175:[function(e,t,r){"use strict";var _=e("../../lib");var w=e("../../plot_api/plot_template");var T=e("../../plots/cartesian/axis_ids");var k=e("./attributes");var M=e("./oppaxis_attributes");t.exports=function e(t,r,a){var n=t[a];var i=r[a];if(!(n.rangeslider||r._requestRangeslider[i._id]))return;if(!_.isPlainObject(n.rangeslider)){n.rangeslider={}}var o=n.rangeslider;var s=w.newContainer(i,"rangeslider");function l(e,t){return _.coerce(o,s,k,e,t)}var u,c;function f(e,t){return _.coerce(u,c,M,e,t)}var d=l("visible");if(!d)return;l("bgcolor",r.plot_bgcolor);l("bordercolor");l("borderwidth");l("thickness");l("autorange",!i.isValidRange(o.range));l("range");var v=r._subplots;if(v){var p=v.cartesian.filter(function(e){return e.substr(0,e.indexOf("y"))===T.name2id(a)}).map(function(e){return e.substr(e.indexOf("y"),e.length)});var h=_.simpleMap(p,T.id2name);for(var m=0;m<h.length;m++){var g=h[m];u=o[g]||{};c=w.newContainer(s,g,"yaxis");var y=r[g];var x;if(u.range&&y.isValidRange(u.range)){x="fixed"}var b=f("rangemode",x);if(b!=="match"){f("range",y.range.slice())}}}s._input=o}},{"../../lib":230,"../../plot_api/plot_template":265,"../../plots/cartesian/axis_ids":280,"./attributes":172,"./oppaxis_attributes":179}],176:[function(e,t,r){"use strict";var A=e("@plotly/d3");var s=e("../../registry");var m=e("../../plots/plots");var S=e("../../lib");var E=S.strTranslate;var l=e("../drawing");var v=e("../color");var L=e("../titles");var g=e("../../plots/cartesian");var C=e("../../plots/cartesian/axis_ids");var a=e("../dragelement");var b=e("../../lib/setcursor");var D=e("./constants");t.exports=function(k){var M=k._fullLayout;var e=M._rangeSliderData;for(var t=0;t<e.length;t++){var r=e[t][D.name];r._clipId=r._id+"-"+M._uid}function a(e){return e._name}var n=M._infolayer.selectAll("g."+D.containerClassName).data(e,a);n.exit().each(function(e){var t=e[D.name];M._topdefs.select("#"+t._clipId).remove()}).remove();if(e.length===0)return;n.enter().append("g").classed(D.containerClassName,true).attr("pointer-events","all");n.each(function(e){var t=A.select(this);var r=e[D.name];var a=M[C.id2name(e.anchor)];var n=r[C.id2name(e.anchor)];if(r.range){var i=S.simpleMap(r.range,e.r2l);var o=S.simpleMap(e.range,e.r2l);var s;if(o[0]<o[1]){s=[Math.min(i[0],o[0]),Math.max(i[1],o[1])]}else{s=[Math.max(i[0],o[0]),Math.min(i[1],o[1])]}r.range=r._input.range=S.simpleMap(s,e.l2r)}e.cleanRange("rangeslider.range");var l=M._size;var u=e.domain;r._width=l.w*(u[1]-u[0]);var c=Math.round(l.l+l.w*u[0]);var f=Math.round(l.t+l.h*(1-e._counterDomainMin)+(e.side==="bottom"?e._depth:0)+r._offsetShift+D.extraPad);t.attr("transform",E(c,f));r._rl=S.simpleMap(r.range,e.r2l);var d=r._rl[0];var v=r._rl[1];var p=v-d;r.p2d=function(e){return e/r._width*p+d};r.d2p=function(e){return(e-d)/p*r._width};if(e.rangebreaks){var h=e.locateBreaks(d,v);if(h.length){var m,g;var y=0;for(m=0;m<h.length;m++){g=h[m];y+=g.max-g.min}var x=r._width/(v-d-y);var b=[-x*d];for(m=0;m<h.length;m++){g=h[m];b.push(b[b.length-1]-x*(g.max-g.min))}r.d2p=function(e){var t=b[0];for(var r=0;r<h.length;r++){var a=h[r];if(e>=a.max)t=b[r+1];else if(e<a.min)break}return t+x*e};for(m=0;m<h.length;m++){g=h[m];g.pmin=r.d2p(g.min);g.pmax=r.d2p(g.max)}r.p2d=function(e){var t=b[0];for(var r=0;r<h.length;r++){var a=h[r];if(e>=a.pmax)t=b[r+1];else if(e<a.pmin)break}return(e-t)/x}}}if(n.rangemode!=="match"){var _=a.r2l(n.range[0]);var w=a.r2l(n.range[1]);var T=w-_;r.d2pOppAxis=function(e){return(e-_)/T*r._height}}t.call(P,k,e,r).call(R,k,e,r).call(N,k,e,r).call(z,k,e,r,n).call(F,k,e,r).call(j,k,e,r);O(t,k,e,r);I(t,k,e,r,a,n);if(e.side==="bottom"){L.draw(k,e._id+"title",{propContainer:e,propName:e._name+".title",placeholder:M._dfltTitle.x,attributes:{x:e._offset+e._length/2,y:f+r._height+r._offsetShift+10+1.5*e.title.font.size,"text-anchor":"middle"}})}})};function O(v,p,h,m){if(p._context.staticPlot)return;var g=v.select("rect."+D.slideBoxClassName).node();var y=v.select("rect."+D.grabAreaMinClassName).node();var x=v.select("rect."+D.grabAreaMaxClassName).node();function e(){var e=A.event;var s=e.target;var l=e.clientX||e.touches[0].clientX;var u=l-v.node().getBoundingClientRect().left;var c=m.d2p(h._rl[0]);var f=m.d2p(h._rl[1]);var d=a.coverSlip();this.addEventListener("touchmove",t);this.addEventListener("touchend",r);d.addEventListener("mousemove",t);d.addEventListener("mouseup",r);function t(e){var t=e.clientX||e.touches[0].clientX;var r=+t-l;var a,n,i;switch(s){case g:i="ew-resize";a=c+r;n=f+r;break;case y:i="col-resize";a=c+r;n=f;break;case x:i="col-resize";a=c;n=f+r;break;default:i="ew-resize";a=u;n=u+r;break}if(n<a){var o=n;n=a;a=o}m._pixelMin=a;m._pixelMax=n;b(A.select(d),i);_(v,p,h,m)}function r(){d.removeEventListener("mousemove",t);d.removeEventListener("mouseup",r);this.removeEventListener("touchmove",t);this.removeEventListener("touchend",r);S.removeElement(d)}}v.on("mousedown",e);v.on("touchstart",e)}function _(e,t,r,a){function n(e){return r.l2r(S.constrain(e,a._rl[0],a._rl[1]))}var i=n(a.p2d(a._pixelMin));var o=n(a.p2d(a._pixelMax));window.requestAnimationFrame(function(){s.call("_guiRelayout",t,r._name+".range",[i,o])})}function I(e,t,r,a,n,i){var o=D.handleWidth/2;function s(e){return S.constrain(e,0,a._width)}function l(e){return S.constrain(e,0,a._height)}function u(e){return S.constrain(e,-o,a._width+o)}var c=s(a.d2p(r._rl[0]));var f=s(a.d2p(r._rl[1]));e.select("rect."+D.slideBoxClassName).attr("x",c).attr("width",f-c);e.select("rect."+D.maskMinClassName).attr("width",c);e.select("rect."+D.maskMaxClassName).attr("x",f).attr("width",a._width-f);if(i.rangemode!=="match"){var d=a._height-l(a.d2pOppAxis(n._rl[1]));var v=a._height-l(a.d2pOppAxis(n._rl[0]));e.select("rect."+D.maskMinOppAxisClassName).attr("x",c).attr("height",d).attr("width",f-c);e.select("rect."+D.maskMaxOppAxisClassName).attr("x",c).attr("y",v).attr("height",a._height-v).attr("width",f-c);e.select("rect."+D.slideBoxClassName).attr("y",d).attr("height",v-d)}var p=.5;var h=Math.round(u(c-o))-p;var m=Math.round(u(f-o))+p;e.select("g."+D.grabberMinClassName).attr("transform",E(h,p));e.select("g."+D.grabberMaxClassName).attr("transform",E(m,p))}function P(e,t,r,a){var n=S.ensureSingle(e,"rect",D.bgClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})});var i=a.borderwidth%2===0?a.borderwidth:a.borderwidth-1;var o=-a._offsetShift;var s=l.crispRound(t,a.borderwidth);n.attr({width:a._width+i,height:a._height+i,transform:E(o,o),fill:a.bgcolor,stroke:a.bordercolor,"stroke-width":s})}function R(e,t,r,a){var n=t._fullLayout;var i=S.ensureSingleById(n._topdefs,"clipPath",a._clipId,function(e){e.append("rect").attr({x:0,y:0})});i.select("rect").attr({width:a._width,height:a._height})}function N(e,f,d,v){var p=f.calcdata;var t=e.selectAll("g."+D.rangePlotClassName).data(d._subplotsWith,S.identity);t.enter().append("g").attr("class",function(e){return D.rangePlotClassName+" "+e}).call(l.setClipUrl,v._clipId,f);t.order();t.exit().remove();var h;t.each(function(e,t){var r=A.select(this);var a=t===0;var n=C.getFromId(f,e,"y");var i=n._name;var o=v[i];var s={data:[],layout:{xaxis:{type:d.type,domain:[0,1],range:v.range.slice(),calendar:d.calendar},width:v._width,height:v._height,margin:{t:0,b:0,l:0,r:0}},_context:f._context};if(d.rangebreaks){s.layout.xaxis.rangebreaks=d.rangebreaks}s.layout[i]={type:n.type,domain:[0,1],range:o.rangemode!=="match"?o.range.slice():n.range.slice(),calendar:n.calendar};if(n.rangebreaks){s.layout[i].rangebreaks=n.rangebreaks}m.supplyDefaults(s);var l=s._fullLayout.xaxis;var u=s._fullLayout[i];l.clearCalc();l.setScale();u.clearCalc();u.setScale();var c={id:e,plotgroup:r,xaxis:l,yaxis:u,isRangePlot:true};if(a)h=c;else{c.mainplot="xy";c.mainplotinfo=h}g.rangePlot(f,c,y(p,e))})}function y(e,t){var r=[];for(var a=0;a<e.length;a++){var n=e[a];var i=n[0].trace;if(i.xaxis+i.yaxis===t){r.push(n)}}return r}function z(e,t,r,a,n){var i=S.ensureSingle(e,"rect",D.maskMinClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})});i.attr("height",a._height).call(v.fill,D.maskColor);var o=S.ensureSingle(e,"rect",D.maskMaxClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});o.attr("height",a._height).call(v.fill,D.maskColor);if(n.rangemode!=="match"){var s=S.ensureSingle(e,"rect",D.maskMinOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});s.attr("width",a._width).call(v.fill,D.maskOppAxisColor);var l=S.ensureSingle(e,"rect",D.maskMaxOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});l.attr("width",a._width).style("border-top",D.maskOppBorder).call(v.fill,D.maskOppAxisColor)}}function F(e,t,r,a){if(t._context.staticPlot)return;var n=S.ensureSingle(e,"rect",D.slideBoxClassName,function(e){e.attr({y:0,cursor:D.slideBoxCursor,"shape-rendering":"crispEdges"})});n.attr({height:a._height,fill:D.slideBoxFill})}function j(e,t,r,a){var n=S.ensureSingle(e,"g",D.grabberMinClassName);var i=S.ensureSingle(e,"g",D.grabberMaxClassName);var o={x:0,width:D.handleWidth,rx:D.handleRadius,fill:v.background,stroke:v.defaultLine,"stroke-width":D.handleStrokeWidth,"shape-rendering":"crispEdges"};var s={y:Math.round(a._height/4),height:Math.round(a._height/2)};var l=S.ensureSingle(n,"rect",D.handleMinClassName,function(e){e.attr(o)});l.attr(s);var u=S.ensureSingle(i,"rect",D.handleMaxClassName,function(e){e.attr(o)});u.attr(s);var c={width:D.grabAreaWidth,x:0,y:0,fill:D.grabAreaFill,cursor:!t._context.staticPlot?D.grabAreaCursor:undefined};var f=S.ensureSingle(n,"rect",D.grabAreaMinClassName,function(e){e.attr(c)});f.attr("height",a._height);var d=S.ensureSingle(i,"rect",D.grabAreaMaxClassName,function(e){e.attr(c)});d.attr("height",a._height)}},{"../../lib":230,"../../lib/setcursor":250,"../../plots/cartesian":290,"../../plots/cartesian/axis_ids":280,"../../plots/plots":311,"../../registry":313,"../color":100,"../dragelement":119,"../drawing":122,"../titles":198,"./constants":174,"@plotly/d3":11}],177:[function(e,t,r){"use strict";var s=e("../../plots/cartesian/axis_ids");var l=e("../../lib/svg_text_utils");var u=e("./constants");var c=e("../../constants/alignment").LINE_SPACING;var f=u.name;function d(e){var t=e&&e[f];return t&&t.visible}r.isVisible=d;r.makeData=function(e){var t=s.list({_fullLayout:e},"x",true);var r=e.margin;var a=[];if(!e._has("gl2d")){for(var n=0;n<t.length;n++){var i=t[n];if(d(i)){a.push(i);var o=i[f];o._id=f+i._id;o._height=(e.height-r.b-r.t)*o.thickness;o._offsetShift=Math.floor(o.borderwidth/2)}}}e._rangeSliderData=a};r.autoMarginOpts=function(e,t){var r=e._fullLayout;var a=t[f];var n=t._id.charAt(0);var i=0;var o=0;if(t.side==="bottom"){i=t._depth;if(t.title.text!==r._dfltTitle[n]){o=1.5*t.title.font.size+10+a._offsetShift;var s=(t.title.text.match(l.BR_TAG_ALL)||[]).length;o+=s*t.title.font.size*c}}return{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:a._height+i+Math.max(r.margin.b,o),pad:u.extraPad+a._offsetShift*2}}},{"../../constants/alignment":205,"../../lib/svg_text_utils":252,"../../plots/cartesian/axis_ids":280,"./constants":174}],178:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("./attributes");var i=e("./oppaxis_attributes");var o=e("./helpers");t.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:a.extendFlat({},n,{yaxis:i})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw"),isVisible:o.isVisible,makeData:o.makeData,autoMarginOpts:o.autoMarginOpts}},{"../../lib":230,"./attributes":172,"./calc_autorange":173,"./defaults":175,"./draw":176,"./helpers":177,"./oppaxis_attributes":179}],179:[function(e,t,r){"use strict";t.exports={_isSubplotObj:true,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],180:[function(e,t,r){"use strict";var a=e("../annotations/attributes");var n=e("../../traces/scatter/attributes").line;var i=e("../drawing/attributes").dash;var o=e("../../lib/extend").extendFlat;var s=e("../../plot_api/plot_template").templatedArray;var l=e("../../constants/axis_placeable_objects");t.exports=s("shape",{visible:{valType:"boolean",dflt:true,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:o({},a.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:o({},a.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:o({},n.color,{editType:"arraydraw"}),width:o({},n.width,{editType:"calc+arraydraw"}),dash:o({},i,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:false,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":206,"../../lib/extend":224,"../../plot_api/plot_template":265,"../../traces/scatter/attributes":353,"../annotations/attributes":83,"../drawing/attributes":121}],181:[function(e,t,r){"use strict";var p=e("../../lib");var h=e("../../plots/cartesian/axes");var m=e("./constants");var g=e("./helpers");t.exports=function e(t){var r=t._fullLayout;var a=p.filterVisible(r.shapes);if(!a.length||!t._fullData.length)return;for(var n=0;n<a.length;n++){var i=a[n];i._extremes={};var o;var s;var l=h.getRefType(i.xref);var u=h.getRefType(i.yref);if(i.xref!=="paper"&&l!=="domain"){var c=i.xsizemode==="pixel"?i.xanchor:i.x0;var f=i.xsizemode==="pixel"?i.xanchor:i.x1;o=h.getFromId(t,i.xref);s=b(o,c,f,i.path,m.paramIsX);if(s){i._extremes[o._id]=h.findExtremes(o,s,y(i))}}if(i.yref!=="paper"&&u!=="domain"){var d=i.ysizemode==="pixel"?i.yanchor:i.y0;var v=i.ysizemode==="pixel"?i.yanchor:i.y1;o=h.getFromId(t,i.yref);s=b(o,d,v,i.path,m.paramIsY);if(s){i._extremes[o._id]=h.findExtremes(o,s,x(i))}}}};function y(e){return a(e.line.width,e.xsizemode,e.x0,e.x1,e.path,false)}function x(e){return a(e.line.width,e.ysizemode,e.y0,e.y1,e.path,true)}function a(e,t,r,a,n,i){var o=e/2;var s=i;if(t==="pixel"){var l=n?g.extractPathCoords(n,i?m.paramIsY:m.paramIsX):[r,a];var u=p.aggNums(Math.max,null,l);var c=p.aggNums(Math.min,null,l);var f=c<0?Math.abs(c)+o:o;var d=u>0?u+o:o;return{ppad:o,ppadplus:s?f:d,ppadminus:s?d:f}}else{return{ppad:o}}}function b(e,t,r,a,n){var i=e.type==="category"||e.type==="multicategory"?e.r2c:e.d2c;if(t!==undefined)return[i(t),i(r)];if(!a)return;var o=Infinity;var s=-Infinity;var l=a.match(m.segmentRE);var u;var c;var f;var d;var v;if(e.type==="date")i=g.decodeDate(i);for(u=0;u<l.length;u++){c=l[u];f=n[c.charAt(0)].drawn;if(f===undefined)continue;d=l[u].substr(1).match(m.paramRE);if(!d||d.length<f)continue;v=i(d[f]);if(v<o)o=v;if(v>s)s=v}if(s>=o)return[o,s]}},{"../../lib":230,"../../plots/cartesian/axes":276,"./constants":182,"./helpers":191}],182:[function(e,t,r){"use strict";t.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:true,drawn:0},L:{0:true,drawn:0},H:{0:true,drawn:0},V:{},Q:{0:true,2:true,drawn:2},C:{0:true,2:true,4:true,drawn:4},T:{0:true,drawn:0},S:{0:true,2:true,drawn:2},Z:{}},paramIsY:{M:{1:true,drawn:1},L:{1:true,drawn:1},H:{},V:{0:true,drawn:0},Q:{1:true,3:true,drawn:3},C:{1:true,3:true,5:true,drawn:5},T:{1:true,drawn:1},S:{1:true,3:true,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],183:[function(e,t,r){"use strict";var L=e("../../lib");var C=e("../../plots/cartesian/axes");var a=e("../../plots/array_container_defaults");var D=e("./attributes");var O=e("./helpers");t.exports=function e(t,r){a(t,r,{name:"shapes",handleItemDefaults:n})};function n(r,a,e){function t(e,t){return L.coerce(r,a,D,e,t)}var n=t("visible");if(!n)return;var i=t("path");var o=i?"path":"rect";var s=t("type",o);if(a.type!=="path")delete a.path;t("editable");t("layer");t("opacity");t("fillcolor");t("fillrule");var l=t("line.width");if(l){t("line.color");t("line.dash")}var u=t("xsizemode");var c=t("ysizemode");var f=["x","y"];for(var d=0;d<2;d++){var v=f[d];var p=v+"anchor";var h=v==="x"?u:c;var m={_fullLayout:e};var g;var y;var x;var b=C.coerceRef(r,a,m,v,undefined,"paper");var _=C.getRefType(b);if(_==="range"){g=C.getFromId(m,b);g._shapeIndices.push(a._index);x=O.rangeToShapePosition(g);y=O.shapePositionToRange(g)}else{y=x=L.identity}if(s!=="path"){var w=.25;var T=.75;var k=v+"0";var M=v+"1";var A=r[k];var S=r[M];r[k]=y(r[k],true);r[M]=y(r[M],true);if(h==="pixel"){t(k,0);t(M,10)}else{C.coercePosition(a,m,t,b,k,w);C.coercePosition(a,m,t,b,M,T)}a[k]=x(a[k]);a[M]=x(a[M]);r[k]=A;r[M]=S}if(h==="pixel"){var E=r[p];r[p]=y(r[p],true);C.coercePosition(a,m,t,b,p,.25);a[p]=x(a[p]);r[p]=E}}if(s==="path"){t("path")}else{L.noneOrAll(r,a,["x0","x1","y0","y1"])}}},{"../../lib":230,"../../plots/array_container_defaults":271,"../../plots/cartesian/axes":276,"./attributes":180,"./helpers":191}],184:[function(e,t,r){"use strict";var m=e("../../registry");var g=e("../../lib");var K=e("../../plots/cartesian/axes");var y=e("./draw_newshape/helpers").readPaths;var x=e("./draw_newshape/display_outlines");var i=e("../../plots/cartesian/handle_outline").clearOutlineControllers;var b=e("../color");var Q=e("../drawing");var _=e("../../plot_api/plot_template").arrayEditor;var ee=e("../dragelement");var te=e("../../lib/setcursor");var re=e("./constants");var ae=e("./helpers");t.exports={draw:n,drawOne:o,eraseActiveShape:a};function n(e){var t=e._fullLayout;t._shapeUpperLayer.selectAll("path").remove();t._shapeLowerLayer.selectAll("path").remove();for(var r in t._plots){var a=t._plots[r].shapelayer;if(a)a.selectAll("path").remove()}for(var n=0;n<t.shapes.length;n++){if(t.shapes[n].visible){o(e,n)}}}function ne(e){return!!e._fullLayout._drawing}function w(e){return!e._context.edits.shapePosition}function o(p,h){p._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+h+'"]').remove();var e=ae.makeOptionsAndPlotinfo(p,h);var m=e.options;var g=e.plotinfo;if(!m._input||m.visible===false)return;if(m.layer!=="below"){r(p._fullLayout._shapeUpperLayer)}else if(m.xref==="paper"||m.yref==="paper"){r(p._fullLayout._shapeLowerLayer)}else{if(g._hadPlotinfo){var t=g.mainplotinfo||g;r(t.shapelayer)}else{r(p._fullLayout._shapeLowerLayer)}}function r(e){var t=oe(p,m);var r={"data-index":h,"fill-rule":m.fillrule,d:t};var a=m.opacity;var n=m.fillcolor;var i=m.line.width?m.line.color:"rgba(0,0,0,0)";var o=m.line.width;var s=m.line.dash;if(!o&&m.editable===true){o=5;s="solid"}var l=t[t.length-1]!=="Z";var u=w(p)&&m.editable&&p._fullLayout._activeShapeIndex===h;if(u){n=l?"rgba(0,0,0,0)":p._fullLayout.activeshape.fillcolor;a=p._fullLayout.activeshape.opacity}var c=e.append("path").attr(r).style("opacity",a).call(b.stroke,i).call(b.fill,n).call(Q.dashLine,s,o);ie(c,p,m);var f;if(u||p._context.edits.shapePosition)f=_(p.layout,"shapes",m);if(u){c.style({cursor:"move"});var d={element:c.node(),plotinfo:g,gd:p,editHelpers:f,isActiveShape:true};var v=y(t,p);x(v,c,d)}else{if(p._context.edits.shapePosition){T(p,c,m,h,e,f)}else if(m.editable===true){c.style("pointer-events",l||b.opacity(n)*a<=.5?"stroke":"all")}}c.node().addEventListener("click",function(){return k(p,c)})}}function ie(e,t,r){var a=(r.xref+r.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");Q.setClipUrl(e,a?"clip"+t._fullLayout._uid+a:null,t)}function T(y,x,b,i,_,e){var w=10;var T=10;var k=b.xsizemode==="pixel";var M=b.ysizemode==="pixel";var A=b.type==="line";var S=b.type==="path";var E=e.modifyItem;var L,C,D,O,I,P;var R,N,z,F,j,H,B,q;var U;var Y=K.getFromId(y,b.xref);var t=K.getRefType(b.xref);var V=K.getFromId(y,b.yref);var r=K.getRefType(b.yref);var G=ae.getDataToPixel(y,Y,false,t);var W=ae.getDataToPixel(y,V,true,r);var $=ae.getPixelToData(y,Y,false,t);var Z=ae.getPixelToData(y,V,true,r);var a=n();var s={element:a.node(),gd:y,prepFn:u,doneFn:c,clickFn:f};var X;ee.init(s);a.node().onmousemove=l;function n(){return A?o():x}function o(){var e=10;var t=Math.max(b.line.width,e);var r=_.append("g").attr("data-index",i);r.append("path").attr("d",x.attr("d")).style({cursor:"move","stroke-width":t,"stroke-opacity":"0"});var a={"fill-opacity":"0"};var n=Math.max(t/2,e);r.append("circle").attr({"data-line-point":"start-point",cx:k?G(b.xanchor)+b.x0:G(b.x0),cy:M?W(b.yanchor)-b.y0:W(b.y0),r:n}).style(a).classed("cursor-grab",true);r.append("circle").attr({"data-line-point":"end-point",cx:k?G(b.xanchor)+b.x1:G(b.x1),cy:M?W(b.yanchor)-b.y1:W(b.y1),r:n}).style(a).classed("cursor-grab",true);return r}function l(e){if(ne(y)){X=null;return}if(A){if(e.target.tagName==="path"){X="move"}else{X=e.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point"}}else{var t=s.element.getBoundingClientRect();var r=t.right-t.left;var a=t.bottom-t.top;var n=e.clientX-t.left;var i=e.clientY-t.top;var o=!S&&r>w&&a>T&&!e.shiftKey?ee.getCursor(n/r,1-i/a):"move";te(x,o);X=o.split("-")[0]}}function u(e){if(ne(y))return;if(k){I=G(b.xanchor)}if(M){P=W(b.yanchor)}if(b.type==="path"){U=b.path}else{L=k?b.x0:G(b.x0);C=M?b.y0:W(b.y0);D=k?b.x1:G(b.x1);O=M?b.y1:W(b.y1)}if(L<D){z=L;B="x0";F=D;q="x1"}else{z=D;B="x1";F=L;q="x0"}if(!M&&C<O||M&&C>O){R=C;j="y0";N=O;H="y1"}else{R=O;j="y1";N=C;H="y0"}l(e);J(_,b);h(x,b,y);s.moveFn=X==="move"?d:v;s.altKey=e.altKey}function c(){if(ne(y))return;te(x);p(_);ie(x,y,b);m.call("_guiRelayout",y,e.getUpdateObj())}function f(){if(ne(y))return;p(_)}function d(r,a){if(b.type==="path"){var e=function(e){return e};var t=e;var n=e;if(k){E("xanchor",b.xanchor=$(I+r))}else{t=function e(t){return $(G(t)+r)};if(Y&&Y.type==="date")t=ae.encodeDate(t)}if(M){E("yanchor",b.yanchor=Z(P+a))}else{n=function e(t){return Z(W(t)+a)};if(V&&V.type==="date")n=ae.encodeDate(n)}E("path",b.path=se(U,t,n))}else{if(k){E("xanchor",b.xanchor=$(I+r))}else{E("x0",b.x0=$(L+r));E("x1",b.x1=$(D+r))}if(M){E("yanchor",b.yanchor=Z(P+a))}else{E("y0",b.y0=Z(C+a));E("y1",b.y1=Z(O+a))}}x.attr("d",oe(y,b));J(_,b)}function v(r,a){if(S){var e=function(e){return e};var t=e;var n=e;if(k){E("xanchor",b.xanchor=$(I+r))}else{t=function e(t){return $(G(t)+r)};if(Y&&Y.type==="date")t=ae.encodeDate(t)}if(M){E("yanchor",b.yanchor=Z(P+a))}else{n=function e(t){return Z(W(t)+a)};if(V&&V.type==="date")n=ae.encodeDate(n)}E("path",b.path=se(U,t,n))}else if(A){if(X==="resize-over-start-point"){var i=L+r;var o=M?C-a:C+a;E("x0",b.x0=k?i:$(i));E("y0",b.y0=M?o:Z(o))}else if(X==="resize-over-end-point"){var s=D+r;var l=M?O-a:O+a;E("x1",b.x1=k?s:$(s));E("y1",b.y1=M?l:Z(l))}}else{var u=function(e){return X.indexOf(e)!==-1};var c=u("n");var f=u("s");var d=u("w");var v=u("e");var p=c?R+a:R;var h=f?N+a:N;var m=d?z+r:z;var g=v?F+r:F;if(M){if(c)p=R-a;if(f)h=N-a}if(!M&&h-p>T||M&&p-h>T){E(j,b[j]=M?p:Z(p));E(H,b[H]=M?h:Z(h))}if(g-m>w){E(B,b[B]=k?m:$(m));E(q,b[q]=k?g:$(g))}}x.attr("d",oe(y,b));J(_,b)}function J(l,u){if(k||M){e()}function e(){var e=u.type!=="path";var t=l.selectAll(".visual-cue").data([0]);var r=1;t.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":r}).classed("visual-cue",true);var a=G(k?u.xanchor:g.midRange(e?[u.x0,u.x1]:ae.extractPathCoords(u.path,re.paramIsX)));var n=W(M?u.yanchor:g.midRange(e?[u.y0,u.y1]:ae.extractPathCoords(u.path,re.paramIsY)));a=ae.roundPositionForSharpStrokeRendering(a,r);n=ae.roundPositionForSharpStrokeRendering(n,r);if(k&&M){var i="M"+(a-1-r)+","+(n-1-r)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";t.attr("d",i)}else if(k){var o="M"+(a-1-r)+","+(n-9-r)+"v18 h2 v-18 Z";t.attr("d",o)}else{var s="M"+(a-9-r)+","+(n-1-r)+"h18 v2 h-18 Z";t.attr("d",s)}}}function p(e){e.selectAll(".visual-cue").remove()}function h(e,t,r){var a=t.xref;var n=t.yref;var i=K.getFromId(r,a);var o=K.getFromId(r,n);var s="";if(a!=="paper"&&!i.autorange)s+=a;if(n!=="paper"&&!o.autorange)s+=n;Q.setClipUrl(e,s?"clip"+r._fullLayout._uid+s:null,r)}}function oe(e,t){var r=t.type;var a=K.getRefType(t.xref);var n=K.getRefType(t.yref);var i=K.getFromId(e,t.xref);var o=K.getFromId(e,t.yref);var s=e._fullLayout._size;var l,u,c,f;var d,v,p,h;if(i){if(a==="domain"){u=function(e){return i._offset+i._length*e}}else{l=ae.shapePositionToRange(i);u=function(e){return i._offset+i.r2p(l(e,true))}}}else{u=function(e){return s.l+s.w*e}}if(o){if(n==="domain"){f=function(e){return o._offset+o._length*(1-e)}}else{c=ae.shapePositionToRange(o);f=function(e){return o._offset+o.r2p(c(e,true))}}}else{f=function(e){return s.t+s.h*(1-e)}}if(r==="path"){if(i&&i.type==="date")u=ae.decodeDate(u);if(o&&o.type==="date")f=ae.decodeDate(f);return M(t,u,f)}if(t.xsizemode==="pixel"){var m=u(t.xanchor);d=m+t.x0;v=m+t.x1}else{d=u(t.x0);v=u(t.x1)}if(t.ysizemode==="pixel"){var g=f(t.yanchor);p=g-t.y0;h=g-t.y1}else{p=f(t.y0);h=f(t.y1)}if(r==="line")return"M"+d+","+p+"L"+v+","+h;if(r==="rect")return"M"+d+","+p+"H"+v+"V"+h+"H"+d+"Z";var y=(d+v)/2;var x=(p+h)/2;var b=Math.abs(y-d);var _=Math.abs(x-p);var w="A"+b+","+_;var T=y+b+","+x;var k=y+","+(x-_);return"M"+T+w+" 0 1,1 "+k+w+" 0 0,1 "+T+"Z"}function M(e,s,l){var t=e.path;var u=e.xsizemode;var c=e.ysizemode;var f=e.xanchor;var d=e.yanchor;return t.replace(re.segmentRE,function(e){var t=0;var r=e.charAt(0);var a=re.paramIsX[r];var n=re.paramIsY[r];var i=re.numParams[r];var o=e.substr(1).replace(re.paramRE,function(e){if(a[t]){if(u==="pixel")e=s(f)+Number(e);else e=s(e)}else if(n[t]){if(c==="pixel")e=l(d)-Number(e);else e=l(e)}t++;if(t>i)e="X";return e});if(t>i){o=o.replace(/[\s,]*X.*/,"");g.log("Ignoring extra params in segment "+e)}return r+o})}function se(e,s,l){return e.replace(re.segmentRE,function(e){var t=0;var r=e.charAt(0);var a=re.paramIsX[r];var n=re.paramIsY[r];var i=re.numParams[r];var o=e.substr(1).replace(re.paramRE,function(e){if(t>=i)return e;if(a[t])e=s(e);else if(n[t])e=l(e);t++;return e});return r+o})}function k(e,t){if(!w(e))return;var r=t.node();var a=+r.getAttribute("data-index");if(a>=0){if(a===e._fullLayout._activeShapeIndex){s(e);return}e._fullLayout._activeShapeIndex=a;e._fullLayout._deactivateShape=s;n(e)}}function s(e){if(!w(e))return;var t=e._fullLayout._activeShapeIndex;if(t>=0){i(e);delete e._fullLayout._activeShapeIndex;n(e)}}function a(e){if(!w(e))return;i(e);var t=e._fullLayout._activeShapeIndex;var r=(e.layout||{}).shapes||[];if(t<r.length){var a=[];for(var n=0;n<r.length;n++){if(n!==t){a.push(r[n])}}delete e._fullLayout._activeShapeIndex;m.call("_guiRelayout",e,{shapes:a})}}},{"../../lib":230,"../../lib/setcursor":250,"../../plot_api/plot_template":265,"../../plots/cartesian/axes":276,"../../plots/cartesian/handle_outline":287,"../../registry":313,"../color":100,"../dragelement":119,"../drawing":122,"./constants":182,"./draw_newshape/display_outlines":188,"./draw_newshape/helpers":189,"./helpers":191}],185:[function(e,t,r){"use strict";var a=e("../../drawing/attributes").dash;var n=e("../../../lib/extend").extendFlat;t.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:n({},a,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":224,"../../drawing/attributes":121}],186:[function(e,t,r){"use strict";var a=32;t.exports={CIRCLE_SIDES:a,i000:0,i090:a/4,i180:a/2,i270:a/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],187:[function(e,t,r){"use strict";var o=e("../../color");t.exports=function e(t,r,a){a("newshape.drawdirection");a("newshape.layer");a("newshape.fillcolor");a("newshape.fillrule");a("newshape.opacity");var n=a("newshape.line.width");if(n){var i=(t||{}).plot_bgcolor||"#FFF";a("newshape.line.color",o.contrast(i));a("newshape.line.dash")}a("activeshape.fillcolor");a("activeshape.opacity")}},{"../../color":100}],188:[function(e,t,r){"use strict";var C=e("../../dragelement");var a=e("../../dragelement/helpers");var D=a.drawMode;var O=e("../../../registry");var n=e("./constants");var I=n.i000;var P=n.i090;var R=n.i180;var N=n.i270;var i=e("../../../plots/cartesian/handle_outline");var z=i.clearOutlineControllers;var o=e("./helpers");var F=o.pointsShapeRectangle;var j=o.pointsShapeEllipse;var H=o.writePaths;var B=e("./newshapes");t.exports=function e(c,r,a,t){if(!t)t=0;var u=a.gd;function f(){e(c,r,a,t++);if(j(c[0])){n({redrawing:true})}}function n(e){a.isActiveShape=false;var t=B(r,a);if(Object.keys(t).length){O.call((e||{}).redrawing?"relayout":"_guiRelayout",u,t)}}var i=a.isActiveShape;var o=u._fullLayout;var s=o._zoomlayer;var l=a.dragmode;var d=D(l);if(d)u._fullLayout._drawing=true;else if(u._fullLayout._activeShapeIndex>=0)z(u);r.attr("d",H(c));var v;var p;var h;var m;var g;if(i&&!t){g=q([],c);var y=s.append("g").attr("class","outline-controllers");k(y);L()}function x(e){h=+e.srcElement.getAttribute("data-i");m=+e.srcElement.getAttribute("data-j");v[h][m].moveFn=b}function b(e,t){if(!c.length)return;var r=g[h][m][1];var a=g[h][m][2];var n=c[h];var i=n.length;if(F(n)){for(var o=0;o<i;o++){if(o===m)continue;var s=n[o];if(s[1]===n[m][1]){s[1]=r+e}if(s[2]===n[m][2]){s[2]=a+t}}n[m][1]=r+e;n[m][2]=a+t;if(!F(n)){for(var l=0;l<i;l++){for(var u=0;u<n[l].length;u++){n[l][u]=g[h][l][u]}}}}else{n[m][1]=r+e;n[m][2]=a+t}f()}function _(){n()}function w(){if(!c.length)return;if(!c[h])return;if(!c[h].length)return;var e=[];for(var t=0;t<c[h].length;t++){if(t!==m){e.push(c[h][t])}}if(e.length>1&&!(e.length===2&&e[1][0]==="Z")){if(m===0){e[0][0]="M"}c[h]=e;f();n()}}function T(e,t){if(e===2){h=+t.srcElement.getAttribute("data-i");m=+t.srcElement.getAttribute("data-j");var r=c[h];if(!F(r)&&!j(r)){w()}}}function k(e){v=[];for(var t=0;t<c.length;t++){var r=c[t];var a=F(r);var n=!a&&j(r);v[t]=[];for(var i=0;i<r.length;i++){if(r[i][0]==="Z")continue;if(n&&i!==I&&i!==P&&i!==R&&i!==N){continue}var o=r[i][1];var s=r[i][2];var l=e.append("circle").classed("cursor-grab",true).attr("data-i",t).attr("data-j",i).attr("cx",o).attr("cy",s).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});v[t][i]={element:l.node(),gd:u,prepFn:x,doneFn:_,clickFn:T};C.init(v[t][i])}}}function M(e,t){if(!c.length)return;for(var r=0;r<c.length;r++){for(var a=0;a<c[r].length;a++){for(var n=0;n+2<c[r][a].length;n+=2){c[r][a][n+1]=g[r][a][n+1]+e;c[r][a][n+2]=g[r][a][n+2]+t}}}}function A(e,t){M(e,t);f()}function S(e){h=+e.srcElement.getAttribute("data-i");if(!h)h=0;p[h].moveFn=A}function E(){n()}function L(){p=[];if(!c.length)return;var e=0;p[e]={element:r[0][0],gd:u,prepFn:S,doneFn:E};C.init(p[e])}};function q(e,t){for(var r=0;r<t.length;r++){var a=t[r];e[r]=[];for(var n=0;n<a.length;n++){e[r][n]=[];for(var i=0;i<a[n].length;i++){e[r][n][i]=a[n][i]}}}return e}},{"../../../plots/cartesian/handle_outline":287,"../../../registry":313,"../../dragelement":119,"../../dragelement/helpers":118,"./constants":186,"./helpers":189,"./newshapes":190}],189:[function(e,t,f){"use strict";var R=e("parse-svg-path");var r=e("./constants");var N=r.CIRCLE_SIDES;var d=r.SQRT2;var a=e("../../../plots/cartesian/helpers");var z=a.p2r;var F=a.r2p;var c=[0,3,4,5,6,1,2];var v=[0,3,4,1,2];f.writePaths=function(e){var t=e.length;if(!t)return"M0,0Z";var r="";for(var a=0;a<t;a++){var n=e[a].length;for(var i=0;i<n;i++){var o=e[a][i][0];if(o==="Z"){r+="Z"}else{var s=e[a][i].length;for(var l=0;l<s;l++){var u=l;if(o==="Q"||o==="S"){u=v[l]}else if(o==="C"){u=c[l]}r+=e[a][i][u];if(l>0&&l<s-1){r+=","}}}}}return r};f.readPaths=function(e,t,r,a){var n=R(e);var i=[];var o=-1;var s=function(){o++;i[o]=[]};var l;var u=0;var c=0;var f;var d;var v=function(){f=u;d=c};v();for(var p=0;p<n.length;p++){var h=[];var m,g,y,x;var b=n[p][0];var _=b;switch(b){case"M":s();u=+n[p][1];c=+n[p][2];h.push([_,u,c]);v();break;case"Q":case"S":m=+n[p][1];y=+n[p][2];u=+n[p][3];c=+n[p][4];h.push([_,u,c,m,y]);break;case"C":m=+n[p][1];y=+n[p][2];g=+n[p][3];x=+n[p][4];u=+n[p][5];c=+n[p][6];h.push([_,u,c,m,y,g,x]);break;case"T":case"L":u=+n[p][1];c=+n[p][2];h.push([_,u,c]);break;case"H":_="L";u=+n[p][1];h.push([_,u,c]);break;case"V":_="L";c=+n[p][1];h.push([_,u,c]);break;case"A":_="L";var w=+n[p][1];var T=+n[p][2];if(!+n[p][4]){w=-w;T=-T}var k=u-w;var M=c;for(l=1;l<=N/2;l++){var A=2*Math.PI*l/N;h.push([_,k+w*Math.cos(A),M+T*Math.sin(A)])}break;case"Z":if(u!==f||c!==d){u=f;c=d;h.push([_,u,c])}break}var S=(r||{}).domain;var E=t._fullLayout._size;var L=r&&r.xsizemode==="pixel";var C=r&&r.ysizemode==="pixel";var D=a===false;for(var O=0;O<h.length;O++){for(l=0;l+2<7;l+=2){var I=h[O][l+1];var P=h[O][l+2];if(I===undefined||P===undefined)continue;u=I;c=P;if(r){if(r.xaxis&&r.xaxis.p2r){if(D)I-=r.xaxis._offset;if(L){I=F(r.xaxis,r.xanchor)+I}else{I=z(r.xaxis,I)}}else{if(D)I-=E.l;if(S)I=S.x[0]+I/E.w;else I=I/E.w}if(r.yaxis&&r.yaxis.p2r){if(D)P-=r.yaxis._offset;if(C){P=F(r.yaxis,r.yanchor)-P}else{P=z(r.yaxis,P)}}else{if(D)P-=E.t;if(S)P=S.y[1]-P/E.h;else P=1-P/E.h}}h[O][l+1]=I;h[O][l+2]=P}i[o].push(h[O].slice())}}return i};function s(e,t){return Math.abs(e-t)<=1e-6}function l(e,t){var r=t[1]-e[1];var a=t[2]-e[2];return Math.sqrt(r*r+a*a)}f.pointsShapeRectangle=function(e){var t=e.length;if(t!==5)return false;for(var r=1;r<3;r++){var a=e[0][r]-e[1][r];var n=e[3][r]-e[2][r];if(!s(a,n))return false;var i=e[0][r]-e[3][r];var o=e[1][r]-e[2][r];if(!s(i,o))return false}if(!s(e[0][1],e[1][1])&&!s(e[0][1],e[3][1]))return false;return!!(l(e[0],e[1])*l(e[0],e[3]))};f.pointsShapeEllipse=function(e){var t=e.length;if(t!==N+1)return false;t=N;for(var r=0;r<t;r++){var a=(t*2-r)%t;var n=(t/2+a)%t;var i=(t/2+r)%t;if(!s(l(e[r],e[i]),l(e[a],e[n])))return false}return true};f.handleEllipse=function(e,t,r){if(!e)return[t,r];var a=f.ellipseOver({x0:t[0],y0:t[1],x1:r[0],y1:r[1]});var n=(a.x1+a.x0)/2;var i=(a.y1+a.y0)/2;var o=(a.x1-a.x0)/2;var s=(a.y1-a.y0)/2;if(!o)o=s=s/d;if(!s)s=o=o/d;var l=[];for(var u=0;u<N;u++){var c=u*2*Math.PI/N;l.push([n+o*Math.cos(c),i+s*Math.sin(c)])}return l};f.ellipseOver=function(e){var t=e.x0;var r=e.y0;var a=e.x1;var n=e.y1;var i=a-t;var o=n-r;t-=i;r-=o;var s=(t+a)/2;var l=(r+n)/2;var u=d;i*=u;o*=u;return{x0:s-i,y0:l-o,x1:s+i,y1:l+o}}},{"../../../plots/cartesian/helpers":288,"./constants":186,"parse-svg-path":54}],190:[function(e,t,r){"use strict";var a=e("../../dragelement/helpers");var q=a.drawMode;var U=a.openMode;var n=e("./constants");var Y=n.i000;var V=n.i090;var G=n.i180;var W=n.i270;var $=n.cos45;var Z=n.sin45;var i=e("../../../plots/cartesian/helpers");var X=i.p2r;var J=i.r2p;var o=e("../../../plots/cartesian/handle_outline");var K=o.clearSelect;var s=e("./helpers");var Q=s.readPaths;var ee=s.writePaths;var te=s.ellipseOver;t.exports=function e(t,r){if(!t.length)return;var a=t[0][0];if(!a)return;var n=a.getAttribute("d");var i=r.gd;var o=i._fullLayout.newshape;var s=r.plotinfo;var l=s.xaxis;var u=s.yaxis;var c=!!s.domain||!s.xaxis;var f=!!s.domain||!s.yaxis;var d=r.isActiveShape;var v=r.dragmode;var p=(i.layout||{}).shapes||[];if(!q(v)&&d!==undefined){var h=i._fullLayout._activeShapeIndex;if(h<p.length){switch(i._fullLayout.shapes[h].type){case"rect":v="drawrect";break;case"circle":v="drawcircle";break;case"line":v="drawline";break;case"path":var m=p[h].path||"";if(m[m.length-1]==="Z"){v="drawclosedpath"}else{v="drawopenpath"}break}}}var g=U(v);var y=Q(n,i,s,d);var x={editable:true,xref:c?"paper":l._id,yref:f?"paper":u._id,layer:o.layer,opacity:o.opacity,line:{color:o.line.color,width:o.line.width,dash:o.line.dash}};if(!g){x.fillcolor=o.fillcolor;x.fillrule=o.fillrule}var b;if(y.length===1)b=y[0];if(b&&v==="drawrect"){x.type="rect";x.x0=b[0][1];x.y0=b[0][2];x.x1=b[2][1];x.y1=b[2][2]}else if(b&&v==="drawline"){x.type="line";x.x0=b[0][1];x.y0=b[0][2];x.x1=b[1][1];x.y1=b[1][2]}else if(b&&v==="drawcircle"){x.type="circle";var _=b[Y][1];var w=b[V][1];var T=b[G][1];var k=b[W][1];var M=b[Y][2];var A=b[V][2];var S=b[G][2];var E=b[W][2];var L=s.xaxis&&(s.xaxis.type==="date"||s.xaxis.type==="log");var C=s.yaxis&&(s.yaxis.type==="date"||s.yaxis.type==="log");if(L){_=J(s.xaxis,_);w=J(s.xaxis,w);T=J(s.xaxis,T);k=J(s.xaxis,k)}if(C){M=J(s.yaxis,M);A=J(s.yaxis,A);S=J(s.yaxis,S);E=J(s.yaxis,E)}var D=(w+k)/2;var O=(M+S)/2;var I=(k-w+T-_)/2;var P=(E-A+S-M)/2;var R=te({x0:D,y0:O,x1:D+I*$,y1:O+P*Z});if(L){R.x0=X(s.xaxis,R.x0);R.x1=X(s.xaxis,R.x1)}if(C){R.y0=X(s.yaxis,R.y0);R.y1=X(s.yaxis,R.y1)}x.x0=R.x0;x.y0=R.y0;x.x1=R.x1;x.y1=R.y1}else{x.type="path";if(l&&u)re(y,l,u);x.path=ee(y);b=null}K(i);var N=r.editHelpers;var z=(N||{}).modifyItem;var F=[];for(var j=0;j<p.length;j++){var H=i._fullLayout.shapes[j];F[j]=H._input;if(d!==undefined&&j===i._fullLayout._activeShapeIndex){var B=x;switch(H.type){case"line":case"rect":case"circle":z("x0",B.x0);z("x1",B.x1);z("y0",B.y0);z("y1",B.y1);break;case"path":z("path",B.path);break}}}if(d===undefined){F.push(x);return F}return N?N.getUpdateObj():{}};function re(e,t,r){var a=t.type==="date";var n=r.type==="date";if(!a&&!n)return e;for(var i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++){for(var s=0;s+2<e[i][o].length;s+=2){if(a)e[i][o][s+1]=e[i][o][s+1].replace(" ","_");if(n)e[i][o][s+2]=e[i][o][s+2].replace(" ","_")}}}return e}},{"../../../plots/cartesian/handle_outline":287,"../../../plots/cartesian/helpers":288,"../../dragelement/helpers":118,"./constants":186,"./helpers":189}],191:[function(e,t,s){"use strict";var i=e("./constants");var o=e("../../lib");s.rangeToShapePosition=function(e){return e.type==="log"?e.r2d:function(e){return e}};s.shapePositionToRange=function(e){return e.type==="log"?e.d2r:function(e){return e}};s.decodeDate=function(t){return function(e){if(e.replace)e=e.replace("_"," ");return t(e)}};s.encodeDate=function(t){return function(e){return t(e).replace(" ","_")}};s.extractPathCoords=function(e,a){var n=[];var t=e.match(i.segmentRE);t.forEach(function(e){var t=a[e.charAt(0)].drawn;if(t===undefined)return;var r=e.substr(1).match(i.paramRE);if(!r||r.length<t)return;n.push(o.cleanNumber(r[t]))});return n};s.getDataToPixel=function(e,t,r,a){var n=e._fullLayout._size;var i;if(t){if(a==="domain"){i=function(e){return t._length*(r?1-e:e)+t._offset}}else{var o=s.shapePositionToRange(t);i=function(e){return t._offset+t.r2p(o(e,true))};if(t.type==="date")i=s.decodeDate(i)}}else if(r){i=function(e){return n.t+n.h*(1-e)}}else{i=function(e){return n.l+n.w*e}}return i};s.getPixelToData=function(e,r,a,t){var n=e._fullLayout._size;var i;if(r){if(t==="domain"){i=function(e){var t=(e-r._offset)/r._length;return a?1-t:t}}else{var o=s.rangeToShapePosition(r);i=function(e){return o(r.p2r(e-r._offset))}}}else if(a){i=function(e){return 1-(e-n.t)/n.h}}else{i=function(e){return(e-n.l)/n.w}}return i};s.roundPositionForSharpStrokeRendering=function(e,t){var r=Math.round(t%2)===1;var a=Math.round(e);return r?a+.5:a};s.makeOptionsAndPlotinfo=function(e,t){var r=e._fullLayout.shapes[t]||{};var a=e._fullLayout._plots[r.xref+r.yref];var n=!!a;if(n){a._hadPlotinfo=true}else{a={};if(r.xref&&r.xref!=="paper")a.xaxis=e._fullLayout[r.xref+"axis"];if(r.yref&&r.yref!=="paper")a.yaxis=e._fullLayout[r.yref+"axis"]}a.xsizemode=r.xsizemode;a.ysizemode=r.ysizemode;a.xanchor=r.xanchor;a.yanchor=r.yanchor;return{options:r,plotinfo:a}}},{"../../lib":230,"./constants":182}],192:[function(e,t,r){"use strict";var a=e("./draw");t.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),supplyDrawNewShapeDefaults:e("./draw_newshape/defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:a.draw,drawOne:a.drawOne}},{"../../plots/cartesian/include_components":289,"./attributes":180,"./calc_autorange":181,"./defaults":183,"./draw":184,"./draw_newshape/defaults":187}],193:[function(e,t,r){"use strict";var a=e("../../plots/font_attributes");var n=e("../../plots/pad_attributes");var i=e("../../lib/extend").extendDeepAll;var o=e("../../plot_api/edit_types").overrideAll;var s=e("../../plots/animation_attributes");var l=e("../../plot_api/plot_template").templatedArray;var u=e("./constants");var c=l("step",{visible:{valType:"boolean",dflt:true},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:true,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:true}});t.exports=o(l("slider",{visible:{valType:"boolean",dflt:true},active:{valType:"number",min:0,dflt:0},steps:c,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:i(n({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:true},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:a({})},font:a({}),activebgcolor:{valType:"color",dflt:u.gripBgActiveColor},bgcolor:{valType:"color",dflt:u.railBgColor},bordercolor:{valType:"color",dflt:u.railBorderColor},borderwidth:{valType:"number",min:0,dflt:u.railBorderWidth},ticklen:{valType:"number",min:0,dflt:u.tickLength},tickcolor:{valType:"color",dflt:u.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:u.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":224,"../../plot_api/edit_types":258,"../../plot_api/plot_template":265,"../../plots/animation_attributes":270,"../../plots/font_attributes":305,"../../plots/pad_attributes":310,"./constants":194}],194:[function(e,t,r){"use strict";t.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],195:[function(e,t,r){"use strict";var f=e("../../lib");var d=e("../../plots/array_container_defaults");var v=e("./attributes");var a=e("./constants");var n=a.name;var i=v.steps;t.exports=function e(t,r){d(t,r,{name:n,handleItemDefaults:o})};function o(r,a,e){function t(e,t){return f.coerce(r,a,v,e,t)}var n=d(r,a,{name:"steps",handleItemDefaults:p});var i=0;for(var o=0;o<n.length;o++){if(n[o].visible)i++}var s;if(i<2)s=a.visible=false;else s=t("visible");if(!s)return;a._stepCount=i;var l=a._visibleSteps=f.filterVisible(n);var u=t("active");if(!(n[u]||{}).visible)a.active=l[0]._index;t("x");t("y");f.noneOrAll(r,a,["x","y"]);t("xanchor");t("yanchor");t("len");t("lenmode");t("pad.t");t("pad.r");t("pad.b");t("pad.l");f.coerceFont(t,"font",e.font);var c=t("currentvalue.visible");if(c){t("currentvalue.xanchor");t("currentvalue.prefix");t("currentvalue.suffix");t("currentvalue.offset");f.coerceFont(t,"currentvalue.font",a.font)}t("transition.duration");t("transition.easing");t("bgcolor");t("activebgcolor");t("bordercolor");t("borderwidth");t("ticklen");t("tickwidth");t("tickcolor");t("minorticklen")}function p(r,a){function e(e,t){return f.coerce(r,a,i,e,t)}var t;if(r.method!=="skip"&&!Array.isArray(r.args)){t=a.visible=false}else t=e("visible");if(t){e("method");e("args");var n=e("label","step-"+a._index);e("value",n);e("execute")}}},{"../../lib":230,"../../plots/array_container_defaults":271,"./attributes":193,"./constants":194}],196:[function(e,t,r){"use strict";var p=e("@plotly/d3");var h=e("../../plots/plots");var l=e("../color");var m=e("../drawing");var g=e("../../lib");var u=g.strTranslate;var y=e("../../lib/svg_text_utils");var c=e("../../plot_api/plot_template").arrayEditor;var x=e("./constants");var a=e("../../constants/alignment");var d=a.LINE_SPACING;var b=a.FROM_TL;var _=a.FROM_BR;t.exports=function e(a){var t=a._fullLayout;var r=f(t,a);var n=t._infolayer.selectAll("g."+x.containerClassName).data(r.length>0?[0]:[]);n.enter().append("g").classed(x.containerClassName,true).style("cursor","ew-resize");function i(e){if(e._commandObserver){e._commandObserver.remove();delete e._commandObserver}h.autoMargin(a,w(e))}n.exit().each(function(){p.select(this).selectAll("g."+x.groupClassName).each(i)}).remove();if(r.length===0)return;var o=n.selectAll("g."+x.groupClassName).data(r,v);o.enter().append("g").classed(x.groupClassName,true);o.exit().each(i).remove();for(var s=0;s<r.length;s++){var l=r[s];T(a,l)}o.each(function(e){var r=p.select(this);L(e);h.manageCommandObserver(a,e,e._visibleSteps,function(e){var t=r.data()[0];if(t.active===e.index)return;if(t._dragging)return;E(a,r,t,e.index,false,true)});k(a,p.select(this),e)})};function w(e){return x.autoMarginIdRoot+e._index}function f(e,t){var r=e[x.name];var a=[];for(var n=0;n<r.length;n++){var i=r[n];if(!i.visible)continue;i._gd=t;a.push(i)}return a}function v(e){return e._index}function T(e,i){var t=m.tester.selectAll("g."+x.labelGroupClass).data(i._visibleSteps);t.enter().append("g").classed(x.labelGroupClass,true);var o=0;var s=0;t.each(function(e){var t=p.select(this);var r=A(t,{step:e},i);var a=r.node();if(a){var n=m.bBox(a);s=Math.max(s,n.height);o=Math.max(o,n.width)}});t.remove();var n=i._dims={};n.inputAreaWidth=Math.max(x.railWidth,x.gripHeight);var r=e._fullLayout._size;n.lx=r.l+r.w*i.x;n.ly=r.t+r.h*(1-i.y);if(i.lenmode==="fraction"){n.outerLength=Math.round(r.w*i.len)}else{n.outerLength=i.len}n.inputAreaStart=0;n.inputAreaLength=Math.round(n.outerLength-i.pad.l-i.pad.r);var a=n.inputAreaLength-2*x.stepInset;var l=a/(i._stepCount-1);var u=o+x.labelPadding;n.labelStride=Math.max(1,Math.ceil(u/l));n.labelHeight=s;n.currentValueMaxWidth=0;n.currentValueHeight=0;n.currentValueTotalHeight=0;n.currentValueMaxLines=1;if(i.currentvalue.visible){var c=m.tester.append("g");t.each(function(e){var t=M(c,i,e.label);var r=t.node()&&m.bBox(t.node())||{width:0,height:0};var a=y.lineCount(t);n.currentValueMaxWidth=Math.max(n.currentValueMaxWidth,Math.ceil(r.width));n.currentValueHeight=Math.max(n.currentValueHeight,Math.ceil(r.height));n.currentValueMaxLines=Math.max(n.currentValueMaxLines,a)});n.currentValueTotalHeight=n.currentValueHeight+i.currentvalue.offset;c.remove()}n.height=n.currentValueTotalHeight+x.tickOffset+i.ticklen+x.labelOffset+n.labelHeight+i.pad.t+i.pad.b;var f="left";if(g.isRightAnchor(i)){n.lx-=n.outerLength;f="right"}if(g.isCenterAnchor(i)){n.lx-=n.outerLength/2;f="center"}var d="top";if(g.isBottomAnchor(i)){n.ly-=n.height;d="bottom"}if(g.isMiddleAnchor(i)){n.ly-=n.height/2;d="middle"}n.outerLength=Math.ceil(n.outerLength);n.height=Math.ceil(n.height);n.lx=Math.round(n.lx);n.ly=Math.round(n.ly);var v={y:i.y,b:n.height*_[d],t:n.height*b[d]};if(i.lenmode==="fraction"){v.l=0;v.xl=i.x-i.len*b[f];v.r=0;v.xr=i.x+i.len*_[f]}else{v.x=i.x;v.l=n.outerLength*b[f];v.r=n.outerLength*_[f]}h.autoMargin(e,w(i),v)}function k(e,t,r){if(!(r.steps[r.active]||{}).visible){r.active=r._visibleSteps[0]._index}t.call(M,r).call(P,r).call(i,r).call(s,r).call(I,e,r).call(n,e,r);var a=r._dims;m.setTranslate(t,a.lx+r.pad.l,a.ly+r.pad.t);t.call(C,r,false);t.call(M,r)}function M(e,t,r){if(!t.currentvalue.visible)return;var a=t._dims;var n,i;switch(t.currentvalue.xanchor){case"right":n=a.inputAreaLength-x.currentValueInset-a.currentValueMaxWidth;i="left";break;case"center":n=a.inputAreaLength*.5;i="middle";break;default:n=x.currentValueInset;i="left"}var o=g.ensureSingle(e,"text",x.labelClass,function(e){e.attr({"text-anchor":i,"data-notex":1})});var s=t.currentvalue.prefix?t.currentvalue.prefix:"";if(typeof r==="string"){s+=r}else{var l=t.steps[t.active].label;var u=t._gd._fullLayout._meta;if(u)l=g.templateString(l,u);s+=l}if(t.currentvalue.suffix){s+=t.currentvalue.suffix}o.call(m.font,t.currentvalue.font).text(s).call(y.convertToTspans,t._gd);var c=y.lineCount(o);var f=(a.currentValueMaxLines+1-c)*t.currentvalue.font.size*d;y.positionText(o,n,f);return o}function n(t,r,a){var e=g.ensureSingle(t,"rect",x.gripRectClass,function(e){e.call(o,r,t,a).style("pointer-events","all")});e.attr({width:x.gripWidth,height:x.gripHeight,rx:x.gripRadius,ry:x.gripRadius}).call(l.stroke,a.bordercolor).call(l.fill,a.bgcolor).style("stroke-width",a.borderwidth+"px")}function A(e,t,r){var a=g.ensureSingle(e,"text",x.labelClass,function(e){e.attr({"text-anchor":"middle","data-notex":1})});var n=t.step.label;var i=r._gd._fullLayout._meta;if(i)n=g.templateString(n,i);a.call(m.font,r.font).text(n).call(y.convertToTspans,r._gd);return a}function i(e,r){var t=g.ensureSingle(e,"g",x.labelsClass);var a=r._dims;var n=t.selectAll("g."+x.labelGroupClass).data(a.labelSteps);n.enter().append("g").classed(x.labelGroupClass,true);n.exit().remove();n.each(function(e){var t=p.select(this);t.call(A,e,r);m.setTranslate(t,D(r,e.fraction),x.tickOffset+r.ticklen+r.font.size*d+x.labelOffset+a.currentValueTotalHeight)})}function S(e,t,r,a,n){var i=Math.round(a*(r._stepCount-1));var o=r._visibleSteps[i]._index;if(o!==r.active){E(e,t,r,o,true,n)}}function E(t,r,e,a,n,i){var o=e.active;e.active=a;c(t.layout,x.name,e).applyUpdate("active",a);var s=e.steps[e.active];r.call(C,e,i);r.call(M,e);t.emit("plotly_sliderchange",{slider:e,step:e.steps[e.active],interaction:n,previousActive:o});if(s&&s.method&&n){if(r._nextMethod){r._nextMethod.step=s;r._nextMethod.doCallback=n;r._nextMethod.doTransition=i}else{r._nextMethod={step:s,doCallback:n,doTransition:i};r._nextMethodRaf=window.requestAnimationFrame(function(){var e=r._nextMethod.step;if(!e.method)return;if(e.execute){h.executeAPICommand(t,e.method,e.args)}r._nextMethod=null;r._nextMethodRaf=null})}}}function o(e,a,n){var i=n.node();var o=p.select(a);function s(){return n.data()[0]}e.on("mousedown",function(){var e=s();a.emit("plotly_sliderstart",{slider:e});var t=n.select("."+x.gripRectClass);p.event.stopPropagation();p.event.preventDefault();t.call(l.fill,e.activebgcolor);var r=O(e,p.mouse(i)[0]);S(a,n,e,r,true);e._dragging=true;o.on("mousemove",function(){var e=s();var t=O(e,p.mouse(i)[0]);S(a,n,e,t,false)});o.on("mouseup",function(){var e=s();e._dragging=false;t.call(l.fill,e.bgcolor);o.on("mouseup",null);o.on("mousemove",null);a.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})})})}function s(e,n){var t=e.selectAll("rect."+x.tickRectClass).data(n._visibleSteps);var i=n._dims;t.enter().append("rect").classed(x.tickRectClass,true);t.exit().remove();t.attr({width:n.tickwidth+"px","shape-rendering":"crispEdges"});t.each(function(e,t){var r=t%i.labelStride===0;var a=p.select(this);a.attr({height:r?n.ticklen:n.minorticklen}).call(l.fill,r?n.tickcolor:n.tickcolor);m.setTranslate(a,D(n,t/(n._stepCount-1))-.5*n.tickwidth,(r?x.tickOffset:x.minorTickOffset)+i.currentValueTotalHeight)})}function L(e){var t=e._dims;t.labelSteps=[];var r=e._stepCount;for(var a=0;a<r;a+=t.labelStride){t.labelSteps.push({fraction:a/(r-1),step:e._visibleSteps[a]})}}function C(e,t,r){var a=e.select("rect."+x.gripRectClass);var n=0;for(var i=0;i<t._stepCount;i++){if(t._visibleSteps[i]._index===t.active){n=i;break}}var o=D(t,n/(t._stepCount-1));if(t._invokingCommand)return;var s=a;if(r&&t.transition.duration>0){s=s.transition().duration(t.transition.duration).ease(t.transition.easing)}s.attr("transform",u(o-x.gripWidth*.5,t._dims.currentValueTotalHeight))}function D(e,t){var r=e._dims;return r.inputAreaStart+x.stepInset+(r.inputAreaLength-2*x.stepInset)*Math.min(1,Math.max(0,t))}function O(e,t){var r=e._dims;return Math.min(1,Math.max(0,(t-x.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*x.stepInset-2*r.inputAreaStart)))}function I(t,r,a){var e=a._dims;var n=g.ensureSingle(t,"rect",x.railTouchRectClass,function(e){e.call(o,r,t,a).style("pointer-events","all")});n.attr({width:e.inputAreaLength,height:Math.max(e.inputAreaWidth,x.tickOffset+a.ticklen+e.labelHeight)}).call(l.fill,a.bgcolor).attr("opacity",0);m.setTranslate(n,0,e.currentValueTotalHeight)}function P(e,t){var r=t._dims;var a=r.inputAreaLength-x.railInset*2;var n=g.ensureSingle(e,"rect",x.railRectClass);n.attr({width:a,height:x.railWidth,rx:x.railRadius,ry:x.railRadius,"shape-rendering":"crispEdges"}).call(l.stroke,t.bordercolor).call(l.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px");m.setTranslate(n,x.railInset,(r.inputAreaWidth-x.railWidth)*.5+r.currentValueTotalHeight)}},{"../../constants/alignment":205,"../../lib":230,"../../lib/svg_text_utils":252,"../../plot_api/plot_template":265,"../../plots/plots":311,"../color":100,"../drawing":122,"./constants":194,"@plotly/d3":11}],197:[function(e,t,r){"use strict";var a=e("./constants");t.exports={moduleType:"component",name:a.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":193,"./constants":194,"./defaults":195,"./draw":196}],198:[function(e,t,r){"use strict";var E=e("@plotly/d3");var L=e("fast-isnumeric");var C=e("../../plots/plots");var D=e("../../registry");var O=e("../../lib");var I=O.strTranslate;var P=e("../drawing");var R=e("../color");var N=e("../../lib/svg_text_utils");var z=e("../../constants/interactions");var F=e("../../constants/alignment").OPPOSITE_SIDE;var j=/ [XY][0-9]* /;function a(r,e,t){var a=t.propContainer;var n=t.propName;var i=t.placeholder;var o=t.traceIndex;var d=t.avoid||{};var s=t.attributes;var l=t.transform;var u=t.containerGroup;var v=r._fullLayout;var c=1;var f=false;var p=a.title;var h=(p&&p.text?p.text:"").trim();var m=p&&p.font?p.font:{};var g=m.family;var y=m.size;var x=m.color;var b;if(n==="title.text")b="titleText";else if(n.indexOf("axis")!==-1)b="axisTitleText";else if(n.indexOf("colorbar"!==-1))b="colorbarTitleText";var _=r._context.edits[b];if(h==="")c=0;else if(h.replace(j," % ")===i.replace(j," % ")){c=.2;f=true;if(!_)h=""}if(t._meta){h=O.templateString(h,t._meta)}else if(v._meta){h=O.templateString(h,v._meta)}var w=h||_;if(!u){u=O.ensureSingle(v._infolayer,"g","g-"+e)}var T=u.selectAll("text").data(w?[0]:[]);T.enter().append("text");T.text(h).attr("class",e);T.exit().remove();if(!w)return u;function k(e){O.syncOrAsync([M,A],e)}function M(e){var t;if(l){t="";if(l.rotate){t+="rotate("+[l.rotate,s.x,s.y]+")"}if(l.offset){t+=I(0,l.offset)}}else{t=null}e.attr("transform",t);e.style({"font-family":g,"font-size":E.round(y,2)+"px",fill:R.rgb(x),opacity:c*R.opacity(x),"font-weight":C.fontWeight}).attr(s).call(N.convertToTspans,r);return C.previousPromises(r)}function A(e){var t=E.select(e.node().parentNode);if(d&&d.selection&&d.side&&h){t.attr("transform",null);var r=F[d.side];var a=d.side==="left"||d.side==="top"?-1:1;var n=L(d.pad)?d.pad:2;var i=P.bBox(t.node());var o={left:0,top:0,right:v.width,bottom:v.height};var s=d.maxShift||a*(o[d.side]-i[d.side]);var l=0;if(s<0){l=s}else{var u=d.offsetLeft||0;var c=d.offsetTop||0;i.left-=u;i.right-=u;i.top-=c;i.bottom-=c;d.selection.each(function(){var e=P.bBox(this);if(O.bBoxIntersect(i,e,n)){l=Math.max(l,a*(e[d.side]-i[r])+n)}});l=Math.min(s,l)}if(l>0||s<0){var f={left:[-l,0],right:[l,0],top:[0,-l],bottom:[0,l]}[d.side];t.attr("transform",I(f[0],f[1]))}}}T.call(k);function S(){c=0;f=true;T.text(i).on("mouseover.opacity",function(){E.select(this).transition().duration(z.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){E.select(this).transition().duration(z.HIDE_PLACEHOLDER).style("opacity",0)})}if(_){if(!h)S();else T.on(".opacity",null);T.call(N.makeEditable,{gd:r}).on("edit",function(e){if(o!==undefined){D.call("_guiRestyle",r,n,e,o)}else{D.call("_guiRelayout",r,n,e)}}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(k)}).on("input",function(e){this.text(e||" ").call(N.positionText,s.x,s.y)})}T.classed("js-placeholder",f);return u}t.exports={draw:a}},{"../../constants/alignment":205,"../../constants/interactions":209,"../../lib":230,"../../lib/svg_text_utils":252,"../../plots/plots":311,"../../registry":313,"../color":100,"../drawing":122,"@plotly/d3":11,"fast-isnumeric":15}],199:[function(e,t,r){"use strict";var a=e("../../plots/font_attributes");var n=e("../color/attributes");var i=e("../../lib/extend").extendFlat;var o=e("../../plot_api/edit_types").overrideAll;var s=e("../../plots/pad_attributes");var l=e("../../plot_api/plot_template").templatedArray;var u=l("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:true,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:true,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:true}});t.exports=o(l("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:true},buttons:u,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:i(s({editType:"arraydraw"}),{}),font:a({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:n.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":224,"../../plot_api/edit_types":258,"../../plot_api/plot_template":265,"../../plots/font_attributes":305,"../../plots/pad_attributes":310,"../color/attributes":99}],200:[function(e,t,r){"use strict";t.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},{}],201:[function(e,t,r){"use strict";var o=e("../../lib");var s=e("../../plots/array_container_defaults");var l=e("./attributes");var a=e("./constants");var n=a.name;var i=l.buttons;t.exports=function e(t,r){var a={name:n,handleItemDefaults:u};s(t,r,a)};function u(r,a,e){function t(e,t){return o.coerce(r,a,l,e,t)}var n=s(r,a,{name:"buttons",handleItemDefaults:c});var i=t("visible",n.length>0);if(!i)return;t("active");t("direction");t("type");t("showactive");t("x");t("y");o.noneOrAll(r,a,["x","y"]);t("xanchor");t("yanchor");t("pad.t");t("pad.r");t("pad.b");t("pad.l");o.coerceFont(t,"font",e.font);t("bgcolor",e.paper_bgcolor);t("bordercolor");t("borderwidth")}function c(r,a){function e(e,t){return o.coerce(r,a,i,e,t)}var t=e("visible",r.method==="skip"||Array.isArray(r.args));if(t){e("method");e("args");e("args2");e("label");e("execute")}}},{"../../lib":230,"../../plots/array_container_defaults":271,"./attributes":199,"./constants":200}],202:[function(e,t,r){"use strict";var m=e("@plotly/d3");var g=e("../../plots/plots");var i=e("../color");var p=e("../drawing");var y=e("../../lib");var h=e("../../lib/svg_text_utils");var l=e("../../plot_api/plot_template").arrayEditor;var x=e("../../constants/alignment").LINE_SPACING;var b=e("./constants");var d=e("./scrollbox");t.exports=function e(n){var t=n._fullLayout;var r=y.filterVisible(t[b.name]);function a(e){g.autoMargin(n,I(e))}var i=t._menulayer.selectAll("g."+b.containerClassName).data(r.length>0?[0]:[]);i.enter().append("g").classed(b.containerClassName,true).style("cursor","pointer");i.exit().each(function(){m.select(this).selectAll("g."+b.headerGroupClassName).each(a)}).remove();if(r.length===0)return;var o=i.selectAll("g."+b.headerGroupClassName).data(r,v);o.enter().append("g").classed(b.headerGroupClassName,true);var s=y.ensureSingle(i,"g",b.dropdownButtonGroupClassName,function(e){e.style("pointer-events","all")});for(var l=0;l<r.length;l++){var u=r[l];O(n,u)}var c="updatemenus"+t._uid;var f=new d(n,s,c);if(o.enter().size()){s.node().parentNode.appendChild(s.node());s.call(R)}o.exit().each(function(e){s.call(R);a(e)}).remove();o.each(function(t){var r=m.select(this);var a=t.type==="dropdown"?s:null;g.manageCommandObserver(n,t,t.buttons,function(e){T(n,t,t.buttons[e.index],r,a,f,e.index,true)});if(t.type==="dropdown"){k(n,r,s,f,t);if(w(s,t)){M(n,r,s,f,t)}}else{M(n,r,null,null,t)}})};function v(e){return e._index}function _(e){return+e.attr(b.menuIndexAttrName)===-1}function w(e,t){return+e.attr(b.menuIndexAttrName)===t._index}function T(e,t,r,a,n,i,o,s){t.active=o;l(e.layout,b.name,t).applyUpdate("active",o);if(t.type==="buttons"){M(e,a,null,null,t)}else if(t.type==="dropdown"){n.attr(b.menuIndexAttrName,"-1");k(e,a,n,i,t);if(!s){M(e,a,n,i,t)}}}function k(e,t,r,a,n){var i=y.ensureSingle(t,"g",b.headerClassName,function(e){e.style("pointer-events","all")});var o=n._dims;var s=n.active;var l=n.buttons[s]||b.blankHeaderOpts;var u={y:n.pad.t,yPad:0,x:n.pad.l,xPad:0,index:0};var c={width:o.headerWidth,height:o.headerHeight};i.call(E,n,l,e).call(P,n,u,c);var f=y.ensureSingle(t,"text",b.headerArrowClassName,function(e){e.attr("text-anchor","end").call(p.font,n.font).text(b.arrowSymbol[n.direction])});f.attr({x:o.headerWidth-b.arrowOffsetX+n.pad.l,y:o.headerHeight/2+b.textOffsetY+n.pad.t});i.on("click",function(){r.call(R,String(w(r,n)?-1:n._index));M(e,t,r,a,n)});i.on("mouseover",function(){i.call(C)});i.on("mouseout",function(){i.call(D,n)});p.setTranslate(t,o.lx,o.ly)}function M(a,n,i,o,s){if(!i){i=n;i.attr("pointer-events","all")}var e=!_(i)||s.type==="buttons"?s.buttons:[];var t=s.type==="dropdown"?b.dropdownButtonClassName:b.buttonClassName;var l=i.selectAll("g."+t).data(y.filterVisible(e));var r=l.enter().append("g").classed(t,true);var u=l.exit();if(s.type==="dropdown"){r.attr("opacity","0").transition().attr("opacity","1");u.transition().attr("opacity","0").remove()}else{u.remove()}var c=0;var f=0;var d=s._dims;var v=["up","down"].indexOf(s.direction)!==-1;if(s.type==="dropdown"){if(v){f=d.headerHeight+b.gapButtonHeader}else{c=d.headerWidth+b.gapButtonHeader}}if(s.type==="dropdown"&&s.direction==="up"){f=-b.gapButtonHeader+b.gapButton-d.openHeight}if(s.type==="dropdown"&&s.direction==="left"){c=-b.gapButtonHeader+b.gapButton-d.openWidth}var p={x:d.lx+c+s.pad.l,y:d.ly+f+s.pad.t,yPad:b.gapButton,xPad:b.gapButton,index:0};var h={l:p.x+s.borderwidth,t:p.y+s.borderwidth};l.each(function(e,t){var r=m.select(this);r.call(E,s,e,a).call(P,s,p);r.on("click",function(){if(m.event.defaultPrevented)return;if(e.execute){if(e.args2&&s.active===t){T(a,s,e,n,i,o,-1);g.executeAPICommand(a,e.method,e.args2)}else{T(a,s,e,n,i,o,t);g.executeAPICommand(a,e.method,e.args)}}a.emit("plotly_buttonclicked",{menu:s,button:e,active:s.active})});r.on("mouseover",function(){r.call(C)});r.on("mouseout",function(){r.call(D,s);l.call(L,s)})});l.call(L,s);if(v){h.w=Math.max(d.openWidth,d.headerWidth);h.h=p.y-h.t}else{h.w=p.x-h.l;h.h=Math.max(d.openHeight,d.headerHeight)}h.direction=s.direction;if(o){if(l.size()){A(a,n,i,o,s,h)}else{S(o)}}}function A(e,t,r,a,n,i){var o=n.direction;var s=o==="up"||o==="down";var l=n._dims;var u=n.active;var c,f;var d;if(s){f=0;for(d=0;d<u;d++){f+=l.heights[d]+b.gapButton}}else{c=0;for(d=0;d<u;d++){c+=l.widths[d]+b.gapButton}}a.enable(i,c,f);if(a.hbar){a.hbar.attr("opacity","0").transition().attr("opacity","1")}if(a.vbar){a.vbar.attr("opacity","0").transition().attr("opacity","1")}}function S(e){var t=!!e.hbar;var r=!!e.vbar;if(t){e.hbar.transition().attr("opacity","0").each("end",function(){t=false;if(!r)e.disable()})}if(r){e.vbar.transition().attr("opacity","0").each("end",function(){r=false;if(!t)e.disable()})}}function E(e,t,r,a){e.call(n,t).call(o,t,r,a)}function n(e,t){var r=y.ensureSingle(e,"rect",b.itemRectClassName,function(e){e.attr({rx:b.rx,ry:b.ry,"shape-rendering":"crispEdges"})});r.call(i.stroke,t.bordercolor).call(i.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function o(e,t,r,a){var n=y.ensureSingle(e,"text",b.itemTextClassName,function(e){e.attr({"text-anchor":"start","data-notex":1})});var i=r.label;var o=a._fullLayout._meta;if(o)i=y.templateString(i,o);n.call(p.font,t.font).text(i).call(h.convertToTspans,a)}function L(e,a){var n=a.active;e.each(function(e,t){var r=m.select(this);if(t===n&&a.showactive){r.select("rect."+b.itemRectClassName).call(i.fill,b.activeColor)}})}function C(e){e.select("rect."+b.itemRectClassName).call(i.fill,b.hoverColor)}function D(e,t){e.select("rect."+b.itemRectClassName).call(i.fill,t.bgcolor)}function O(u,c){var f=c._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0};var e=p.tester.selectAll("g."+b.dropdownButtonClassName).data(y.filterVisible(c.buttons));e.enter().append("g").classed(b.dropdownButtonClassName,true);var d=["up","down"].indexOf(c.direction)!==-1;e.each(function(e,t){var r=m.select(this);r.call(E,c,e,u);var a=r.select("."+b.itemTextClassName);var n=a.node()&&p.bBox(a.node()).width;var i=Math.max(n+b.textPadX,b.minWidth);var o=c.font.size*x;var s=h.lineCount(a);var l=Math.max(o*s,b.minHeight)+b.textOffsetY;l=Math.ceil(l);i=Math.ceil(i);f.widths[t]=i;f.heights[t]=l;f.height1=Math.max(f.height1,l);f.width1=Math.max(f.width1,i);if(d){f.totalWidth=Math.max(f.totalWidth,i);f.openWidth=f.totalWidth;f.totalHeight+=l+b.gapButton;f.openHeight+=l+b.gapButton}else{f.totalWidth+=i+b.gapButton;f.openWidth+=i+b.gapButton;f.totalHeight=Math.max(f.totalHeight,l);f.openHeight=f.totalHeight}});if(d){f.totalHeight-=b.gapButton}else{f.totalWidth-=b.gapButton}f.headerWidth=f.width1+b.arrowPadX;f.headerHeight=f.height1;if(c.type==="dropdown"){if(d){f.width1+=b.arrowPadX;f.totalHeight=f.height1}else{f.totalWidth=f.width1}f.totalWidth+=b.arrowPadX}e.remove();var t=f.totalWidth+c.pad.l+c.pad.r;var r=f.totalHeight+c.pad.t+c.pad.b;var a=u._fullLayout._size;f.lx=a.l+a.w*c.x;f.ly=a.t+a.h*(1-c.y);var n="left";if(y.isRightAnchor(c)){f.lx-=t;n="right"}if(y.isCenterAnchor(c)){f.lx-=t/2;n="center"}var i="top";if(y.isBottomAnchor(c)){f.ly-=r;i="bottom"}if(y.isMiddleAnchor(c)){f.ly-=r/2;i="middle"}f.totalWidth=Math.ceil(f.totalWidth);f.totalHeight=Math.ceil(f.totalHeight);f.lx=Math.round(f.lx);f.ly=Math.round(f.ly);g.autoMargin(u,I(c),{x:c.x,y:c.y,l:t*({right:1,center:.5}[n]||0),r:t*({left:1,center:.5}[n]||0),b:r*({top:1,middle:.5}[i]||0),t:r*({bottom:1,middle:.5}[i]||0)})}function I(e){return b.autoMarginIdRoot+e._index}function P(e,t,r,a){a=a||{};var n=e.select("."+b.itemRectClassName);var i=e.select("."+b.itemTextClassName);var o=t.borderwidth;var s=r.index;var l=t._dims;p.setTranslate(e,o+r.x,o+r.y);var u=["up","down"].indexOf(t.direction)!==-1;var c=a.height||(u?l.heights[s]:l.height1);n.attr({x:0,y:0,width:a.width||(u?l.width1:l.widths[s]),height:c});var f=t.font.size*x;var d=h.lineCount(i);var v=(d-1)*f/2;h.positionText(i,b.textOffsetX,c/2-v+b.textOffsetY);if(u){r.y+=l.heights[s]+r.yPad}else{r.x+=l.widths[s]+r.xPad}r.index++}function R(e,t){e.attr(b.menuIndexAttrName,t||"-1").selectAll("g."+b.dropdownButtonClassName).remove()}},{"../../constants/alignment":205,"../../lib":230,"../../lib/svg_text_utils":252,"../../plot_api/plot_template":265,"../../plots/plots":311,"../color":100,"../drawing":122,"./constants":200,"./scrollbox":204,"@plotly/d3":11}],203:[function(e,t,r){arguments[4][197][0].apply(r,arguments)},{"./attributes":199,"./constants":200,"./defaults":201,"./draw":202,dup:197}],204:[function(e,t,r){"use strict";t.exports=G;var U=e("@plotly/d3");var Y=e("../color");var V=e("../drawing");var v=e("../../lib");function G(e,t,r){this.gd=e;this.container=t;this.id=r;this.position=null;this.translateX=null;this.translateY=null;this.hbar=null;this.vbar=null;this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]);this.bg.exit().on(".drag",null).on("wheel",null).remove();this.bg.enter().append("rect").classed("scrollbox-bg",true).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}G.barWidth=2;G.barLength=20;G.barRadius=2;G.barPad=1;G.barColor="#808BA4";G.prototype.enable=function e(t,r,a){var n=this.gd._fullLayout;var i=n.width;var o=n.height;this.position=t;var s=this.position.l;var l=this.position.w;var u=this.position.t;var c=this.position.h;var f=this.position.direction;var d=f==="down";var v=f==="left";var p=f==="right";var h=f==="up";var m=l;var g=c;var y,x;var b,_;if(!d&&!v&&!p&&!h){this.position.direction="down";d=true}var w=d||h;if(w){y=s;x=y+m;if(d){b=u;_=Math.min(b+g,o);g=_-b}else{_=u+g;b=Math.max(_-g,0);g=_-b}}else{b=u;_=b+g;if(v){x=s+m;y=Math.max(x-m,0);m=x-y}else{y=s;x=Math.min(y+m,i);m=x-y}}this._box={l:y,t:b,w:m,h:g};var T=l>m;var k=G.barLength+2*G.barPad;var M=G.barWidth+2*G.barPad;var A=s;var S=u+c;if(S+M>o)S=o-M;var E=this.container.selectAll("rect.scrollbar-horizontal").data(T?[0]:[]);E.exit().on(".drag",null).remove();E.enter().append("rect").classed("scrollbar-horizontal",true).call(Y.fill,G.barColor);if(T){this.hbar=E.attr({rx:G.barRadius,ry:G.barRadius,x:A,y:S,width:k,height:M});this._hbarXMin=A+k/2;this._hbarTranslateMax=m-k}else{delete this.hbar;delete this._hbarXMin;delete this._hbarTranslateMax}var L=c>g;var C=G.barWidth+2*G.barPad;var D=G.barLength+2*G.barPad;var O=s+l;var I=u;if(O+C>i)O=i-C;var P=this.container.selectAll("rect.scrollbar-vertical").data(L?[0]:[]);P.exit().on(".drag",null).remove();P.enter().append("rect").classed("scrollbar-vertical",true).call(Y.fill,G.barColor);if(L){this.vbar=P.attr({rx:G.barRadius,ry:G.barRadius,x:O,y:I,width:C,height:D});this._vbarYMin=I+D/2;this._vbarTranslateMax=g-D}else{delete this.vbar;delete this._vbarYMin;delete this._vbarTranslateMax}var R=this.id;var N=y-.5;var z=L?x+C+.5:x+.5;var F=b-.5;var j=T?_+M+.5:_+.5;var H=n._topdefs.selectAll("#"+R).data(T||L?[0]:[]);H.exit().remove();H.enter().append("clipPath").attr("id",R).append("rect");if(T||L){this._clipRect=H.select("rect").attr({x:Math.floor(N),y:Math.floor(F),width:Math.ceil(z)-Math.floor(N),height:Math.ceil(j)-Math.floor(F)});this.container.call(V.setClipUrl,R,this.gd);this.bg.attr({x:s,y:u,width:l,height:c})}else{this.bg.attr({width:0,height:0});this.container.on("wheel",null).on(".drag",null).call(V.setClipUrl,null);delete this._clipRect}if(T||L){var B=U.behavior.drag().on("dragstart",function(){U.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(B);var q=U.behavior.drag().on("dragstart",function(){U.event.sourceEvent.preventDefault();U.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));if(T){this.hbar.on(".drag",null).call(q)}if(L){this.vbar.on(".drag",null).call(q)}}this.setTranslate(r,a)};G.prototype.disable=function e(){if(this.hbar||this.vbar){this.bg.attr({width:0,height:0});this.container.on("wheel",null).on(".drag",null).call(V.setClipUrl,null);delete this._clipRect}if(this.hbar){this.hbar.on(".drag",null);this.hbar.remove();delete this.hbar;delete this._hbarXMin;delete this._hbarTranslateMax}if(this.vbar){this.vbar.on(".drag",null);this.vbar.remove();delete this.vbar;delete this._vbarYMin;delete this._vbarTranslateMax}};G.prototype._onBoxDrag=function e(){var t=this.translateX;var r=this.translateY;if(this.hbar){t-=U.event.dx}if(this.vbar){r-=U.event.dy}this.setTranslate(t,r)};G.prototype._onBoxWheel=function e(){var t=this.translateX;var r=this.translateY;if(this.hbar){t+=U.event.deltaY}if(this.vbar){r+=U.event.deltaY}this.setTranslate(t,r)};G.prototype._onBarDrag=function e(){var t=this.translateX;var r=this.translateY;if(this.hbar){var a=t+this._hbarXMin;var n=a+this._hbarTranslateMax;var i=v.constrain(U.event.x,a,n);var o=(i-a)/(n-a);var s=this.position.w-this._box.w;t=o*s}if(this.vbar){var l=r+this._vbarYMin;var u=l+this._vbarTranslateMax;var c=v.constrain(U.event.y,l,u);var f=(c-l)/(u-l);var d=this.position.h-this._box.h;r=f*d}this.setTranslate(t,r)};G.prototype.setTranslate=function e(t,r){var a=this.position.w-this._box.w;var n=this.position.h-this._box.h;t=v.constrain(t||0,0,a);r=v.constrain(r||0,0,n);this.translateX=t;this.translateY=r;this.container.call(V.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-r);if(this._clipRect){this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+r-.5)})}if(this.hbar){var i=t/a;this.hbar.call(V.setTranslate,t+i*this._hbarTranslateMax,r)}if(this.vbar){var o=r/n;this.vbar.call(V.setTranslate,t,r+o*this._vbarTranslateMax)}}},{"../../lib":230,"../color":100,"../drawing":122,"@plotly/d3":11}],205:[function(e,t,r){"use strict";t.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],206:[function(e,t,r){"use strict";t.exports={axisRefDescription:function(e,t,r){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+r+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",r,"of the domain of the","second",e,"axis."].join(" ")}}},{}],207:[function(e,t,r){"use strict";t.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format#locale_format"}},{}],208:[function(e,t,r){"use strict";t.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],209:[function(e,t,r){"use strict";t.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],210:[function(e,t,r){"use strict";t.exports={BADNUM:undefined,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"−"}},{}],211:[function(e,t,r){"use strict";r.xmlns="http://www.w3.org/2000/xmlns/";r.svg="http://www.w3.org/2000/svg";r.xlink="http://www.w3.org/1999/xlink";r.svgAttrs={xmlns:r.svg,"xmlns:xlink":r.xlink}},{}],212:[function(e,t,r){"use strict";r.version=e("./version").version;e("native-promise-only");e("../build/plotcss");var a=e("./registry");var n=r.register=a.register;var i=e("./plot_api");var o=Object.keys(i);for(var s=0;s<o.length;s++){var l=o[s];if(l.charAt(0)!=="_")r[l]=i[l];n({moduleType:"apiMethod",name:l,fn:i[l]})}n(e("./traces/scatter"));n([e("./components/legend"),e("./components/fx"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars"),e("./components/colorscale"),e("./components/colorbar"),e("./components/modebar")]);n([e("./locale-en"),e("./locale-en-us")]);if(window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)){n(window.PlotlyLocales);delete window.PlotlyLocales}r.Icons=e("./fonts/ploticon");var u=e("./components/fx");var c=e("./plots/plots");r.Plots={resize:c.resize,graphJson:c.graphJson,sendDataToCloud:c.sendDataToCloud};r.Fx={hover:u.hover,unhover:u.unhover,loneHover:u.loneHover,loneUnhover:u.loneUnhover};r.Snapshot=e("./snapshot");r.PlotSchema=e("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":91,"./components/annotations3d":96,"./components/colorbar":106,"./components/colorscale":112,"./components/errorbars":128,"./components/fx":140,"./components/grid":144,"./components/images":149,"./components/legend":157,"./components/modebar":163,"./components/rangeselector":171,"./components/rangeslider":178,"./components/shapes":192,"./components/sliders":197,"./components/updatemenus":203,"./fonts/ploticon":213,"./locale-en":256,"./locale-en-us":255,"./plot_api":260,"./plot_api/plot_schema":264,"./plots/plots":311,"./registry":313,"./snapshot":318,"./traces/scatter":365,"./version":386,"native-promise-only":52}],213:[function(e,t,r){"use strict";t.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],214:[function(e,t,r){"use strict";r.isLeftAnchor=function e(t){return t.xanchor==="left"||t.xanchor==="auto"&&t.x<=1/3};r.isCenterAnchor=function e(t){return t.xanchor==="center"||t.xanchor==="auto"&&t.x>1/3&&t.x<2/3};r.isRightAnchor=function e(t){return t.xanchor==="right"||t.xanchor==="auto"&&t.x>=2/3};r.isTopAnchor=function e(t){return t.yanchor==="top"||t.yanchor==="auto"&&t.y>=2/3};r.isMiddleAnchor=function e(t){return t.yanchor==="middle"||t.yanchor==="auto"&&t.y>1/3&&t.y<2/3};r.isBottomAnchor=function e(t){return t.yanchor==="bottom"||t.yanchor==="auto"&&t.y<=1/3}},{}],215:[function(e,t,r){"use strict";var a=e("./mod");var o=a.mod;var n=a.modHalf;var g=Math.PI;var y=2*g;function i(e){return e/180*g}function s(e){return e/g*180}function x(e){return Math.abs(e[1]-e[0])>y-1e-14}function l(e,t){return n(t-e,y)}function u(e,t){return Math.abs(l(e,t))}function c(e,t){if(x(t))return true;var r,a;if(t[0]<t[1]){r=t[0];a=t[1]}else{r=t[1];a=t[0]}r=o(r,y);a=o(a,y);if(r>a)a+=y;var n=o(e,y);var i=n+y;return n>=r&&n<=a||i>=r&&i<=a}function f(e,t,r,a){if(!c(t,a))return false;var n,i;if(r[0]<r[1]){n=r[0];i=r[1]}else{n=r[1];i=r[0]}return e>=n&&e<=i}function d(e,t,r,a,n,i,o){n=n||0;i=i||0;var s=x([r,a]);var l,u,c;var f,d;if(s){l=0;u=g;c=y}else{if(r<a){l=r;c=a}else{l=a;c=r}}if(e<t){f=e;d=t}else{f=t;d=e}function v(e,t){return[e*Math.cos(t)+n,i-e*Math.sin(t)]}var p=Math.abs(c-l)<=g?0:1;function h(e,t,r){return"A"+[e,e]+" "+[0,p,r]+" "+v(e,t)}var m;if(s){if(f===null){m="M"+v(d,l)+h(d,u,0)+h(d,c,0)+"Z"}else{m="M"+v(f,l)+h(f,u,0)+h(f,c,0)+"Z"+"M"+v(d,l)+h(d,u,1)+h(d,c,1)+"Z"}}else{if(f===null){m="M"+v(d,l)+h(d,c,0);if(o)m+="L0,0Z"}else{m="M"+v(f,l)+"L"+v(d,l)+h(d,c,0)+"L"+v(f,c)+h(f,l,1)+"Z"}}return m}function v(e,t,r,a,n){return d(null,e,t,r,a,n,0)}function p(e,t,r,a,n){return d(null,e,t,r,a,n,1)}function h(e,t,r,a,n,i){return d(e,t,r,a,n,i,1)}t.exports={deg2rad:i,rad2deg:s,angleDelta:l,angleDist:u,isFullCircle:x,isAngleInsideSector:c,isPtInsideSector:f,pathArc:v,pathSector:p,pathAnnulus:h}},{"./mod":237}],216:[function(e,t,r){"use strict";var f=Array.isArray;var a=ArrayBuffer;var n=DataView;function i(e){return a.isView(e)&&!(e instanceof n)}r.isTypedArray=i;function o(e){return f(e)||i(e)}r.isArrayOrTypedArray=o;function s(e){return!o(e[0])}r.isArray1D=s;r.ensureArray=function(e,t){if(!f(e))e=[];e.length=t;return e};r.concat=function(){var e=[];var t=true;var r=0;var a,n,i,o,s,l,u,c;for(i=0;i<arguments.length;i++){o=arguments[i];l=o.length;if(l){if(n)e.push(o);else{n=o;s=l}if(f(o)){a=false}else{t=false;if(!r){a=o.constructor}else if(a!==o.constructor){a=false}}r+=l}}if(!r)return[];if(!e.length)return n;if(t)return n.concat.apply(n,e);if(a){u=new a(r);u.set(n);for(i=0;i<e.length;i++){o=e[i];u.set(o,s);s+=o.length}return u}u=new Array(r);for(c=0;c<n.length;c++)u[c]=n[c];for(i=0;i<e.length;i++){o=e[i];for(c=0;c<o.length;c++)u[s+c]=o[c];s+=c}return u};r.maxRowLength=function(e){return l(e,Math.max,0)};r.minRowLength=function(e){return l(e,Math.min,Infinity)};function l(e,t,r){if(o(e)){if(o(e[0])){var a=r;for(var n=0;n<e.length;n++){a=t(a,e[n].length)}return a}else{return e.length}}return 0}},{}],217:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../constants/numerical").BADNUM;var i=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;t.exports=function e(t){if(typeof t==="string"){t=t.replace(i,"")}if(a(t))return Number(t);return n}},{"../constants/numerical":210,"fast-isnumeric":15}],218:[function(e,t,r){"use strict";t.exports=function e(t){var r=t._fullLayout;if(r._glcanvas&&r._glcanvas.size()){r._glcanvas.each(function(e){if(e.regl)e.regl.clear({color:true,depth:true})})}}},{}],219:[function(e,t,r){"use strict";t.exports=function e(t){if(t._responsiveChartHandler){window.removeEventListener("resize",t._responsiveChartHandler);delete t._responsiveChartHandler}}},{}],220:[function(e,t,y){"use strict";var n=e("fast-isnumeric");var i=e("tinycolor2");var l=e("../plots/attributes");var a=e("../components/colorscale/scales");var u=e("../components/color");var o=e("../constants/interactions").DESELECTDIM;var d=e("./nested_property");var s=e("./regex").counter;var c=e("./mod").modHalf;var v=e("./array").isArrayOrTypedArray;y.valObjectMeta={data_array:{coerceFunction:function(e,t,r){if(v(e))t.set(e);else if(r!==undefined)t.set(r)}},enumerated:{coerceFunction:function(e,t,r,a){if(a.coerceNumber)e=+e;if(a.values.indexOf(e)===-1)t.set(r);else t.set(e)},validateFunction:function(e,t){if(t.coerceNumber)e=+e;var r=t.values;for(var a=0;a<r.length;a++){var n=String(r[a]);if(n.charAt(0)==="/"&&n.charAt(n.length-1)==="/"){var i=new RegExp(n.substr(1,n.length-2));if(i.test(e))return true}else if(e===r[a])return true}return false}},boolean:{coerceFunction:function(e,t,r){if(e===true||e===false)t.set(e);else t.set(r)}},number:{coerceFunction:function(e,t,r,a){if(!n(e)||a.min!==undefined&&e<a.min||a.max!==undefined&&e>a.max){t.set(r)}else t.set(+e)}},integer:{coerceFunction:function(e,t,r,a){if(e%1||!n(e)||a.min!==undefined&&e<a.min||a.max!==undefined&&e>a.max){t.set(r)}else t.set(+e)}},string:{coerceFunction:function(e,t,r,a){if(typeof e!=="string"){var n=typeof e==="number";if(a.strict===true||!n)t.set(r);else t.set(String(e))}else if(a.noBlank&&!e)t.set(r);else t.set(e)}},color:{coerceFunction:function(e,t,r){if(i(e).isValid())t.set(e);else t.set(r)}},colorlist:{coerceFunction:function(e,t,r){function a(e){return i(e).isValid()}if(!Array.isArray(e)||!e.length)t.set(r);else if(e.every(a))t.set(e);else t.set(r)}},colorscale:{coerceFunction:function(e,t,r){t.set(a.get(e,r))}},angle:{coerceFunction:function(e,t,r){if(e==="auto")t.set("auto");else if(!n(e))t.set(r);else t.set(c(+e,360))}},subplotid:{coerceFunction:function(e,t,r,a){var n=a.regex||s(r);if(typeof e==="string"&&n.test(e)){t.set(e);return}t.set(r)},validateFunction:function(e,t){var r=t.dflt;if(e===r)return true;if(typeof e!=="string")return false;if(s(r).test(e))return true;return false}},flaglist:{coerceFunction:function(e,t,r,a){if(typeof e!=="string"){t.set(r);return}if((a.extras||[]).indexOf(e)!==-1){t.set(e);return}var n=e.split("+");var i=0;while(i<n.length){var o=n[i];if(a.flags.indexOf(o)===-1||n.indexOf(o)<i){n.splice(i,1)}else i++}if(!n.length)t.set(r);else t.set(n.join("+"))}},any:{coerceFunction:function(e,t,r){if(e===undefined)t.set(r);else t.set(e)}},info_array:{coerceFunction:function(e,t,r,a){function n(e,t,r){var a;var n={set:function(e){a=e}};if(r===undefined)r=t.dflt;y.valObjectMeta[t.valType].coerceFunction(e,n,r,t);return a}var i=a.dimensions===2||a.dimensions==="1-2"&&Array.isArray(e)&&Array.isArray(e[0]);if(!Array.isArray(e)){t.set(r);return}var o=a.items;var s=[];var l=Array.isArray(o);var u=l&&i&&Array.isArray(o[0]);var c=i&&l&&!u;var f=l&&!c?o.length:e.length;var d,v,p,h,m,g;r=Array.isArray(r)?r:[];if(i){for(d=0;d<f;d++){s[d]=[];p=Array.isArray(e[d])?e[d]:[];if(c)m=o.length;else if(l)m=o[d].length;else m=p.length;for(v=0;v<m;v++){if(c)h=o[v];else if(l)h=o[d][v];else h=o;g=n(p[v],h,(r[d]||[])[v]);if(g!==undefined)s[d][v]=g}}}else{for(d=0;d<f;d++){g=n(e[d],l?o[d]:o,r[d]);if(g!==undefined)s[d]=g}}t.set(s)},validateFunction:function(e,t){if(!Array.isArray(e))return false;var r=t.items;var a=Array.isArray(r);var n=t.dimensions===2;if(!t.freeLength&&e.length!==r.length)return false;for(var i=0;i<e.length;i++){if(n){if(!Array.isArray(e[i])||!t.freeLength&&e[i].length!==r[i].length){return false}for(var o=0;o<e[i].length;o++){if(!p(e[i][o],a?r[i][o]:r)){return false}}}else if(!p(e[i],a?r[i]:r))return false}return true}}};y.coerce=function(e,t,r,a,n){var i=d(r,a).get();var o=d(e,a);var s=d(t,a);var l=o.get();var u=t._template;if(l===undefined&&u){l=d(u,a).get();u=0}if(n===undefined)n=i.dflt;if(i.arrayOk&&v(l)){s.set(l);return l}var c=y.valObjectMeta[i.valType].coerceFunction;c(l,s,n,i);var f=s.get();if(u&&f===n&&!p(l,i)){l=d(u,a).get();c(l,s,n,i);f=s.get()}return f};y.coerce2=function(e,t,r,a,n){var i=d(e,a);var o=y.coerce(e,t,r,a,n);var s=i.get();return s!==undefined&&s!==null?o:false};y.coerceFont=function(e,t,r){var a={};r=r||{};a.family=e(t+".family",r.family);a.size=e(t+".size",r.size);a.color=e(t+".color",r.color);return a};y.coercePattern=function(e,t,r,a){var n=e(t+".shape");if(n){e(t+".solidity");e(t+".size");var i=e(t+".fillmode");var o=i==="overlay";if(!a){var s=e(t+".bgcolor",o?r:undefined);e(t+".fgcolor",o?u.contrast(s):r)}e(t+".fgopacity",o?.5:1)}};y.coerceHoverinfo=function(e,t,r){var a=t._module.attributes;var n=a.hoverinfo?a:l;var i=n.hoverinfo;var o;if(r._dataLength===1){var s=i.dflt==="all"?i.flags.slice():i.dflt.split("+");s.splice(s.indexOf("name"),1);o=s.join("+")}return y.coerce(e,t,n,"hoverinfo",o)};y.coerceSelectionMarkerOpacity=function(e,t){if(!e.marker)return;var r=e.marker.opacity;if(r===undefined)return;var a;var n;if(!v(r)&&!e.selected&&!e.unselected){a=r;n=o*r}t("selected.marker.opacity",a);t("unselected.marker.opacity",n)};function p(e,t){var r=y.valObjectMeta[t.valType];if(t.arrayOk&&v(e))return true;if(r.validateFunction){return r.validateFunction(e,t)}var a={};var n=a;var i={set:function(e){n=e}};r.coerceFunction(e,i,a,t);return n!==a}y.validate=p},{"../components/color":100,"../components/colorscale/scales":115,"../constants/interactions":209,"../plots/attributes":272,"./array":216,"./mod":237,"./nested_property":238,"./regex":246,"fast-isnumeric":15,tinycolor2:65}],221:[function(e,t,x){"use strict";var l=e("d3-time-format").timeFormat;var f=e("fast-isnumeric");var u=e("./loggers");var b=e("./mod").mod;var r=e("../constants/numerical");var _=r.BADNUM;var w=r.ONEDAY;var T=r.ONEHOUR;var k=r.ONEMIN;var M=r.ONESEC;var A=r.EPOCHJD;var S=e("../registry");var v=e("d3-time-format").utcFormat;var E=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m;var L=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m;var C=(new Date).getFullYear()-70;function D(e){return e&&S.componentsRegistry.calendars&&typeof e==="string"&&e!=="gregorian"}x.dateTick0=function(e,t){var r=n(e,!!t);if(t<2)return r;var a=x.dateTime2ms(r,e);a+=w*(t-1);return x.ms2DateTime(a,0,e)};function n(e,t){if(D(e)){return t?S.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:S.getComponentMethod("calendars","CANONICAL_TICK")[e]}else{return t?"2000-01-02":"2000-01-01"}}x.dfltRange=function(e){if(D(e)){return S.getComponentMethod("calendars","DFLTRANGE")[e]}else{return["2000-01-01","2001-01-01"]}};x.isJSDate=function(e){return typeof e==="object"&&e!==null&&typeof e.getTime==="function"};var O,I;x.dateTime2ms=function(e,t){if(x.isJSDate(e)){var r=e.getTimezoneOffset()*k;var a=(e.getUTCMinutes()-e.getMinutes())*k+(e.getUTCSeconds()-e.getSeconds())*M+(e.getUTCMilliseconds()-e.getMilliseconds());if(a){var n=3*k;r=r-n/2+b(a-r+n/2,n)}e=Number(e)-r;if(e>=O&&e<=I)return e;return _}if(typeof e!=="string"&&typeof e!=="number")return _;e=String(e);var i=D(t);var o=e.charAt(0);if(i&&(o==="G"||o==="g")){e=e.substr(1);t=""}var s=i&&t.substr(0,7)==="chinese";var l=e.match(s?L:E);if(!l)return _;var u=l[1];var c=l[3]||"1";var f=Number(l[5]||1);var d=Number(l[7]||0);var v=Number(l[9]||0);var p=Number(l[11]||0);if(i){if(u.length===2)return _;u=Number(u);var h;try{var m=S.getComponentMethod("calendars","getCal")(t);if(s){var g=c.charAt(c.length-1)==="i";c=parseInt(c,10);h=m.newDate(u,m.toMonthIndex(u,c,g),f)}else{h=m.newDate(u,Number(c),f)}}catch(e){return _}if(!h)return _;return(h.toJD()-A)*w+d*T+v*k+p*M}if(u.length===2){u=(Number(u)+2e3-C)%100+C}else u=Number(u);c-=1;var y=new Date(Date.UTC(2e3,c,f,d,v));y.setUTCFullYear(u);if(y.getUTCMonth()!==c)return _;if(y.getUTCDate()!==f)return _;return y.getTime()+p*M};O=x.MIN_MS=x.dateTime2ms("-9999");I=x.MAX_MS=x.dateTime2ms("9999-12-31 23:59:59.9999");x.isDateTime=function(e,t){return x.dateTime2ms(e,t)!==_};function o(e,t){return String(e+Math.pow(10,t)).substr(1)}var p=90*w;var h=3*T;var m=5*k;x.ms2DateTime=function(e,t,r){if(typeof e!=="number"||!(e>=O&&e<=I))return _;if(!t)t=0;var a=Math.floor(b(e+.05,1)*10);var n=Math.round(e-a/10);var i,o,s,l,u,c;if(D(r)){var f=Math.floor(n/w)+A;var d=Math.floor(b(e,w));try{i=S.getComponentMethod("calendars","getCal")(r).fromJD(f).formatDate("yyyy-mm-dd")}catch(e){i=v("G%Y-%m-%d")(new Date(n))}if(i.charAt(0)==="-"){while(i.length<11)i="-0"+i.substr(1)}else{while(i.length<10)i="0"+i}o=t<p?Math.floor(d/T):0;s=t<p?Math.floor(d%T/k):0;l=t<h?Math.floor(d%k/M):0;u=t<m?d%M*10+a:0}else{c=new Date(n);i=v("%Y-%m-%d")(c);o=t<p?c.getUTCHours():0;s=t<p?c.getUTCMinutes():0;l=t<h?c.getUTCSeconds():0;u=t<m?c.getUTCMilliseconds()*10+a:0}return g(i,o,s,l,u)};x.ms2DateTimeLocal=function(e){if(!(e>=O+w&&e<=I-w))return _;var t=Math.floor(b(e+.05,1)*10);var r=new Date(Math.round(e-t/10));var a=l("%Y-%m-%d")(r);var n=r.getHours();var i=r.getMinutes();var o=r.getSeconds();var s=r.getUTCMilliseconds()*10+t;return g(a,n,i,o,s)};function g(e,t,r,a,n){if(t||r||a||n){e+=" "+o(t,2)+":"+o(r,2);if(a||n){e+=":"+o(a,2);if(n){var i=4;while(n%10===0){i-=1;n/=10}e+="."+o(n,i)}}}return e}x.cleanDate=function(e,t,r){if(e===_)return t;if(x.isJSDate(e)||typeof e==="number"&&isFinite(e)){if(D(r)){u.error("JS Dates and milliseconds are incompatible with world calendars",e);return t}e=x.ms2DateTimeLocal(+e);if(!e&&t!==undefined)return t}else if(!x.isDateTime(e,r)){u.error("unrecognized date",e);return t}return e};var i=/%\d?f/g;var s=/%h/g;var c={1:"1",2:"1",3:"2",4:"2"};function d(e,a,t,r){e=e.replace(i,function(e){var t=Math.min(+e.charAt(1)||6,6);var r=(a/1e3%1+2).toFixed(t).substr(2).replace(/0+$/,"")||"0";return r});var n=new Date(Math.floor(a+.05));e=e.replace(s,function(){return c[t("%q")(n)]});if(D(r)){try{e=S.getComponentMethod("calendars","worldCalFmt")(e,a,r)}catch(e){return"Invalid"}}return t(e)(n)}var y=[59,59.9,59.99,59.999,59.9999];function P(e,t){var r=b(e+.05,w);var a=o(Math.floor(r/T),2)+":"+o(b(Math.floor(r/k),60),2);if(t!=="M"){if(!f(t))t=0;var n=Math.min(b(e/M,60),y[t]);var i=(100+n).toFixed(t).substr(1);if(t>0){i=i.replace(/0+$/,"").replace(/[\.]$/,"")}a+=":"+i}return a}x.formatDate=function(e,t,r,a,n,i){n=D(n)&&n;if(!t){if(r==="y")t=i.year;else if(r==="m")t=i.month;else if(r==="d"){t=i.dayMonth+"\n"+i.year}else{return P(e,r)+"\n"+d(i.dayMonthYear,e,a,n)}}return d(t,e,a,n)};var R=3*w;x.incrementMonth=function(t,e,r){r=D(r)&&r;var a=b(t,w);t=Math.round(t-a);if(r){try{var n=Math.round(t/w)+A;var i=S.getComponentMethod("calendars","getCal")(r);var o=i.fromJD(n);if(e%12)i.add(o,e,"m");else i.add(o,e/12,"y");return(o.toJD()-A)*w+a}catch(e){u.error("invalid ms "+t+" in calendar "+r)}}var s=new Date(t+R);return s.setUTCMonth(s.getUTCMonth()+e)+a-R};x.findExactDates=function(e,t){var r=0;var a=0;var n=0;var i=0;var o;var s;var l=D(t)&&S.getComponentMethod("calendars","getCal")(t);for(var u=0;u<e.length;u++){s=e[u];if(!f(s)){i++;continue}if(s%w)continue;if(l){try{o=l.fromJD(s/w+A);if(o.day()===1){if(o.month()===1)r++;else a++}else n++}catch(e){}}else{o=new Date(s);if(o.getUTCDate()===1){if(o.getUTCMonth()===0)r++;else a++}else n++}}a+=r;n+=a;var c=e.length-i;return{exactYears:r/c,exactMonths:a/c,exactDays:n/c}}},{"../constants/numerical":210,"../registry":313,"./loggers":234,"./mod":237,"d3-time-format":13,"fast-isnumeric":15}],222:[function(e,t,r){"use strict";var a=e("@plotly/d3");var o=e("./loggers");var n=e("./matrix");var i=e("gl-mat4");function s(e){var t;if(typeof e==="string"){t=document.getElementById(e);if(t===null){throw new Error("No DOM element with id '"+e+"' exists on the page.")}return t}else if(e===null||e===undefined){throw new Error("DOM element provided is null or undefined")}return e}function l(e){var t=a.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")}function u(e){var t=e&&e.parentNode;if(t)t.removeChild(e)}function c(e,t){f("global",e,t)}function f(e,t,r){var a="plotly.js-style-"+e;var n=document.getElementById(a);if(!n){n=document.createElement("style");n.setAttribute("id",a);n.appendChild(document.createTextNode(""));document.head.appendChild(n)}var i=n.sheet;if(i.insertRule){i.insertRule(t+"{"+r+"}",0)}else if(i.addRule){i.addRule(t,r,0)}else o.warn("addStyleRule failed")}function d(e){var t="plotly.js-style-"+e;var r=document.getElementById(t);if(r)u(r)}function v(e){var t=h(e);var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];t.forEach(function(e){var t=p(e);if(t){var r=n.convertCssMatrix(t);a=i.multiply(a,a,r)}});return a}function p(e){var t=window.getComputedStyle(e,null);var r=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");if(r==="none")return null;return r.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(e){return+e})}function h(e){var t=[];while(m(e)){t.push(e);e=e.parentNode}return t}function m(e){return e&&(e instanceof Element||e instanceof HTMLElement)}function g(e,t){return e&&t&&e.x===t.x&&e.y===t.y&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}t.exports={getGraphDiv:s,isPlotDiv:l,removeElement:u,addStyleRule:c,addRelatedStyleRule:f,deleteRelatedStyleRule:d,getFullTransformMatrix:v,getElementTransformMatrix:p,getElementAndAncestors:h,equalDomRects:g}},{"./loggers":234,"./matrix":236,"@plotly/d3":11,"gl-mat4":31}],223:[function(e,t,r){"use strict";var i=e("events").EventEmitter;var a={init:function(r){if(r._ev instanceof i)return r;var a=new i;var n=new i;r._ev=a;r._internalEv=n;r.on=a.on.bind(a);r.once=a.once.bind(a);r.removeListener=a.removeListener.bind(a);r.removeAllListeners=a.removeAllListeners.bind(a);r._internalOn=n.on.bind(n);r._internalOnce=n.once.bind(n);r._removeInternalListener=n.removeListener.bind(n);r._removeAllInternalListeners=n.removeAllListeners.bind(n);r.emit=function(e,t){if(typeof jQuery!=="undefined"){jQuery(r).trigger(e,t)}a.emit(e,t);n.emit(e,t)};return r},triggerHandler:function(e,t,r){var a;var n;if(typeof jQuery!=="undefined"){a=jQuery(e).triggerHandler(t,r)}var i=e._ev;if(!i)return a;var o=i._events[t];if(!o)return a;function s(e){if(e.listener){i.removeListener(t,e.listener);if(!e.fired){e.fired=true;return e.listener.apply(i,[r])}}else{return e.apply(i,[r])}}o=Array.isArray(o)?o:[o];var l;for(l=0;l<o.length-1;l++){s(o[l])}n=s(o[l]);return a!==undefined?a:n},purge:function(e){delete e._ev;delete e.on;delete e.once;delete e.removeListener;delete e.removeAllListeners;delete e.emit;delete e._ev;delete e._internalEv;delete e._internalOn;delete e._internalOnce;delete e._removeInternalListener;delete e._removeAllInternalListeners;return e}};t.exports=a},{events:12}],224:[function(e,t,r){"use strict";var p=e("./is_plain_object.js");var h=Array.isArray;function m(e,t){var r,a;for(r=0;r<e.length;r++){a=e[r];if(a!==null&&typeof a==="object"){return false}if(a!==void 0){t[r]=a}}return true}r.extendFlat=function(){return g(arguments,false,false,false)};r.extendDeep=function(){return g(arguments,true,false,false)};r.extendDeepAll=function(){return g(arguments,true,true,false)};r.extendDeepNoArrays=function(){return g(arguments,true,false,true)};function g(e,t,r,a){var n=e[0];var i=e.length;var o,s,l,u,c,f,d;if(i===2&&h(n)&&h(e[1])&&n.length===0){d=m(e[1],n);if(d){return n}else{n.splice(0,n.length)}}for(var v=1;v<i;v++){o=e[v];for(s in o){l=n[s];u=o[s];if(a&&h(u)){n[s]=u}else if(t&&u&&(p(u)||(c=h(u)))){if(c){c=false;f=l&&h(l)?l:[]}else{f=l&&p(l)?l:{}}n[s]=g([f,u],t,r,a)}else if(typeof u!=="undefined"||r){n[s]=u}}}return n}},{"./is_plain_object.js":231}],225:[function(e,t,r){"use strict";t.exports=function e(t){var r={};var a=[];var n=0;for(var i=0;i<t.length;i++){var o=t[i];if(r[o]!==1){r[o]=1;a[n++]=o}}return a}},{}],226:[function(e,t,r){"use strict";t.exports=function e(t){var r=l(t)?s:o;var a=[];for(var n=0;n<t.length;n++){var i=t[n];if(r(i))a.push(i)}return a};function o(e){return e.visible===true}function s(e){var t=e[0].trace;return t.visible===true&&t._length!==0}function l(e){return Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace}},{}],227:[function(e,t,r){"use strict";var d=e("./mod").mod;r.segmentsIntersect=m;function m(e,t,r,a,n,i,o,s){var l=r-e;var u=n-e;var c=o-n;var f=a-t;var d=i-t;var v=s-i;var p=l*v-c*f;if(p===0)return null;var h=(u*v-c*d)/p;var m=(u*f-l*d)/p;if(m<0||m>1||h<0||h>1)return null;return{x:e+l*h,y:t+f*h}}r.segmentDistance=function e(t,r,a,n,i,o,s,l){if(m(t,r,a,n,i,o,s,l))return 0;var u=a-t;var c=n-r;var f=s-i;var d=l-o;var v=u*u+c*c;var p=f*f+d*d;var h=Math.min(g(u,c,v,i-t,o-r),g(u,c,v,s-t,l-r),g(f,d,p,t-i,r-o),g(f,d,p,a-i,n-o));return Math.sqrt(h)};function g(e,t,r,a,n){var i=a*e+n*t;if(i<0){return a*a+n*n}else if(i>r){var o=a-e;var s=n-t;return o*o+s*s}else{var l=a*t-n*e;return l*l/r}}var v,p,h;r.getTextLocation=function e(t,r,a,n){if(t!==p||n!==h){v={};p=t;h=n}if(v[a]){return v[a]}var i=t.getPointAtLength(d(a-n/2,r));var o=t.getPointAtLength(d(a+n/2,r));var s=Math.atan((o.y-i.y)/(o.x-i.x));var l=t.getPointAtLength(d(a,r));var u=(l.x*4+i.x+o.x)/6;var c=(l.y*4+i.y+o.y)/6;var f={x:u,y:c,theta:s};v[a]=f;return f};r.clearLocationCache=function(){p=null};r.getVisibleSegment=function e(n,t,r){var i=t.left;var o=t.right;var s=t.top;var l=t.bottom;var a=0;var u=n.getTotalLength();var c=u;var f,d;function v(e){var t=n.getPointAtLength(e);if(e===0)f=t;else if(e===u)d=t;var r=t.x<i?i-t.x:t.x>o?t.x-o:0;var a=t.y<s?s-t.y:t.y>l?t.y-l:0;return Math.sqrt(r*r+a*a)}var p=v(a);while(p){a+=p+r;if(a>c)return;p=v(a)}p=v(c);while(p){c-=p+r;if(a>c)return;p=v(c)}return{min:a,max:c,len:c-a,total:u,isClosed:a===0&&c===u&&Math.abs(f.x-d.x)<.1&&Math.abs(f.y-d.y)<.1}};r.findPointOnPath=function e(t,r,a,n){n=n||{};var i=n.pathLength||t.getTotalLength();var o=n.tolerance||.001;var s=n.iterationLimit||30;var l=t.getPointAtLength(0)[a]>t.getPointAtLength(i)[a]?-1:1;var u=0;var c=0;var f=i;var d;var v;var p;while(u<s){d=(c+f)/2;v=t.getPointAtLength(d);p=v[a]-r;if(Math.abs(p)<o){return v}else{if(l*p>0){f=d}else{c=d}u++}}return v}},{"./mod":237}],228:[function(e,t,r){"use strict";t.exports=function e(t){return t}},{}],229:[function(e,t,r){"use strict";t.exports=function e(t,r){if(!r)return t;var a=1/Math.abs(r);var n=a>1?(a*t+a*r)/a:t+r;var i=String(n).length;if(i>16){var o=String(r).length;var s=String(t).length;if(i>=s+o){var l=parseFloat(n).toPrecision(12);if(l.indexOf("e+")===-1)n=+l}}return n}},{}],230:[function(e,t,r){"use strict";var b=e("@plotly/d3");var _=e("d3-time-format").utcFormat;var a=e("fast-isnumeric");var n=e("../constants/numerical");var i=n.FP_SAFE;var o=-i;var s=n.BADNUM;var w=t.exports={};w.nestedProperty=e("./nested_property");w.keyedContainer=e("./keyed_container");w.relativeAttr=e("./relative_attr");w.isPlainObject=e("./is_plain_object");w.toLogRange=e("./to_log_range");w.relinkPrivateKeys=e("./relink_private");var l=e("./array");w.isTypedArray=l.isTypedArray;w.isArrayOrTypedArray=l.isArrayOrTypedArray;w.isArray1D=l.isArray1D;w.ensureArray=l.ensureArray;w.concat=l.concat;w.maxRowLength=l.maxRowLength;w.minRowLength=l.minRowLength;var u=e("./mod");w.mod=u.mod;w.modHalf=u.modHalf;var c=e("./coerce");w.valObjectMeta=c.valObjectMeta;w.coerce=c.coerce;w.coerce2=c.coerce2;w.coerceFont=c.coerceFont;w.coercePattern=c.coercePattern;w.coerceHoverinfo=c.coerceHoverinfo;w.coerceSelectionMarkerOpacity=c.coerceSelectionMarkerOpacity;w.validate=c.validate;var f=e("./dates");w.dateTime2ms=f.dateTime2ms;w.isDateTime=f.isDateTime;w.ms2DateTime=f.ms2DateTime;w.ms2DateTimeLocal=f.ms2DateTimeLocal;w.cleanDate=f.cleanDate;w.isJSDate=f.isJSDate;w.formatDate=f.formatDate;w.incrementMonth=f.incrementMonth;w.dateTick0=f.dateTick0;w.dfltRange=f.dfltRange;w.findExactDates=f.findExactDates;w.MIN_MS=f.MIN_MS;w.MAX_MS=f.MAX_MS;var d=e("./search");w.findBin=d.findBin;w.sorterAsc=d.sorterAsc;w.sorterDes=d.sorterDes;w.distinctVals=d.distinctVals;w.roundUp=d.roundUp;w.sort=d.sort;w.findIndexOfMin=d.findIndexOfMin;var v=e("./stats");w.aggNums=v.aggNums;w.len=v.len;w.mean=v.mean;w.median=v.median;w.midRange=v.midRange;w.variance=v.variance;w.stdev=v.stdev;w.interp=v.interp;var p=e("./matrix");w.init2dArray=p.init2dArray;w.transposeRagged=p.transposeRagged;w.dot=p.dot;w.translationMatrix=p.translationMatrix;w.rotationMatrix=p.rotationMatrix;w.rotationXYMatrix=p.rotationXYMatrix;w.apply3DTransform=p.apply3DTransform;w.apply2DTransform=p.apply2DTransform;w.apply2DTransform2=p.apply2DTransform2;w.convertCssMatrix=p.convertCssMatrix;w.inverseTransformMatrix=p.inverseTransformMatrix;var h=e("./angles");w.deg2rad=h.deg2rad;w.rad2deg=h.rad2deg;w.angleDelta=h.angleDelta;w.angleDist=h.angleDist;w.isFullCircle=h.isFullCircle;w.isAngleInsideSector=h.isAngleInsideSector;w.isPtInsideSector=h.isPtInsideSector;w.pathArc=h.pathArc;w.pathSector=h.pathSector;w.pathAnnulus=h.pathAnnulus;var m=e("./anchor_utils");w.isLeftAnchor=m.isLeftAnchor;w.isCenterAnchor=m.isCenterAnchor;w.isRightAnchor=m.isRightAnchor;w.isTopAnchor=m.isTopAnchor;w.isMiddleAnchor=m.isMiddleAnchor;w.isBottomAnchor=m.isBottomAnchor;var g=e("./geometry2d");w.segmentsIntersect=g.segmentsIntersect;w.segmentDistance=g.segmentDistance;w.getTextLocation=g.getTextLocation;w.clearLocationCache=g.clearLocationCache;w.getVisibleSegment=g.getVisibleSegment;w.findPointOnPath=g.findPointOnPath;var y=e("./extend");w.extendFlat=y.extendFlat;w.extendDeep=y.extendDeep;w.extendDeepAll=y.extendDeepAll;w.extendDeepNoArrays=y.extendDeepNoArrays;var x=e("./loggers");w.log=x.log;w.warn=x.warn;w.error=x.error;var T=e("./regex");w.counterRegex=T.counter;var k=e("./throttle");w.throttle=k.throttle;w.throttleDone=k.done;w.clearThrottle=k.clear;var M=e("./dom");w.getGraphDiv=M.getGraphDiv;w.isPlotDiv=M.isPlotDiv;w.removeElement=M.removeElement;w.addStyleRule=M.addStyleRule;w.addRelatedStyleRule=M.addRelatedStyleRule;w.deleteRelatedStyleRule=M.deleteRelatedStyleRule;w.getFullTransformMatrix=M.getFullTransformMatrix;w.getElementTransformMatrix=M.getElementTransformMatrix;w.getElementAndAncestors=M.getElementAndAncestors;w.equalDomRects=M.equalDomRects;w.clearResponsive=e("./clear_responsive");w.preserveDrawingBuffer=e("./preserve_drawing_buffer");w.makeTraceGroups=e("./make_trace_groups");w._=e("./localize");w.notifier=e("./notifier");w.filterUnique=e("./filter_unique");w.filterVisible=e("./filter_visible");w.pushUnique=e("./push_unique");w.increment=e("./increment");w.cleanNumber=e("./clean_number");w.ensureNumber=function e(t){if(!a(t))return s;t=Number(t);return t>i||t<o?s:t};w.isIndex=function(e,t){if(t!==undefined&&e>=t)return false;return a(e)&&e>=0&&e%1===0};w.noop=e("./noop");w.identity=e("./identity");w.repeat=function(e,t){var r=new Array(t);for(var a=0;a<t;a++){r[a]=e}return r};w.swapAttrs=function(e,t,r,a){if(!r)r="x";if(!a)a="y";for(var n=0;n<t.length;n++){var i=t[n];var o=w.nestedProperty(e,i.replace("?",r));var s=w.nestedProperty(e,i.replace("?",a));var l=o.get();o.set(s.get());s.set(l)}};w.raiseToTop=function e(t){t.parentNode.appendChild(t)};w.cancelTransition=function(e){return e.transition().duration(0)};w.constrain=function(e,t,r){if(t>r)return Math.max(r,Math.min(t,e));return Math.max(t,Math.min(r,e))};w.bBoxIntersect=function(e,t,r){r=r||0;return e.left<=t.right+r&&t.left<=e.right+r&&e.top<=t.bottom+r&&t.top<=e.bottom+r};w.simpleMap=function(e,t,r,a,n){var i=e.length;var o=new Array(i);for(var s=0;s<i;s++)o[s]=t(e[s],r,a,n);return o};w.randstr=function e(t,r,a,n){if(!a)a=16;if(r===undefined)r=24;if(r<=0)return"0";var i=Math.log(Math.pow(2,r))/Math.log(a);var o="";var s,l,u;for(s=2;i===Infinity;s*=2){i=Math.log(Math.pow(2,r/s))/Math.log(a)*s}var c=i-Math.floor(i);for(s=0;s<Math.floor(i);s++){u=Math.floor(Math.random()*a).toString(a);o=u+o}if(c){l=Math.pow(a,c);u=Math.floor(Math.random()*l).toString(a);o=u+o}var f=parseInt(o,a);if(t&&t[o]||f!==Infinity&&f>=Math.pow(2,r)){if(n>10){w.warn("randstr failed uniqueness");return o}return e(t,r,a,(n||0)+1)}else return o};w.OptionControl=function(t,r){if(!t)t={};if(!r)r="opt";var a={};a.optionList=[];a._newoption=function(e){e[r]=t;a[e.name]=e;a.optionList.push(e)};a["_"+r]=t;return a};w.smooth=function(e,t){t=Math.round(t)||0;if(t<2)return e;var r=e.length;var a=2*r;var n=2*t-1;var i=new Array(n);var o=new Array(r);var s;var l;var u;var c;for(s=0;s<n;s++){i[s]=(1-Math.cos(Math.PI*(s+1)/t))/(2*t)}for(s=0;s<r;s++){c=0;for(l=0;l<n;l++){u=s+l+1-t;if(u<-r)u-=a*Math.round(u/a);else if(u>=a)u-=a*Math.floor(u/a);if(u<0)u=-1-u;else if(u>=r)u=a-1-u;c+=e[u]*i[l]}o[s]=c}return o};w.syncOrAsync=function(e,t,r){var a,n;function i(){return w.syncOrAsync(e,t,r)}while(e.length){n=e.splice(0,1)[0];a=n(t);if(a&&a.then){return a.then(i).then(undefined,w.promiseError)}}return r&&r(t)};w.stripTrailingSlash=function(e){if(e.substr(-1)==="/")return e.substr(0,e.length-1);return e};w.noneOrAll=function(e,t,r){if(!e)return;var a=false;var n=true;var i;var o;for(i=0;i<r.length;i++){o=e[r[i]];if(o!==undefined&&o!==null)a=true;else n=false}if(a&&!n){for(i=0;i<r.length;i++){e[r[i]]=t[r[i]]}}};w.mergeArray=function(e,t,r,a){var n=typeof a==="function";if(w.isArrayOrTypedArray(e)){var i=Math.min(e.length,t.length);for(var o=0;o<i;o++){var s=e[o];t[o][r]=n?a(s):s}}};w.mergeArrayCastPositive=function(e,t,r){return w.mergeArray(e,t,r,function(e){var t=+e;return!isFinite(t)?0:t>0?t:0})};w.fillArray=function(e,t,r,a){a=a||w.identity;if(w.isArrayOrTypedArray(e)){for(var n=0;n<t.length;n++){t[n][r]=a(e[n])}}};w.castOption=function(e,t,r,a){a=a||w.identity;var n=w.nestedProperty(e,r).get();if(w.isArrayOrTypedArray(n)){if(Array.isArray(t)&&w.isArrayOrTypedArray(n[t[0]])){return a(n[t[0]][t[1]])}else{return a(n[t])}}else{return n}};w.extractOption=function(e,t,r,a){if(r in e)return e[r];var n=w.nestedProperty(t,a).get();if(!Array.isArray(n))return n};function A(e){var t={};for(var r in e){var a=e[r];for(var n=0;n<a.length;n++){t[a[n]]=+r}}return t}w.tagSelected=function(t,e,r){var a=e.selectedpoints;var n=e._indexToPoints;var i;if(n){i=A(n)}function o(e){return e!==undefined&&e<t.length}for(var s=0;s<a.length;s++){var l=a[s];if(w.isIndex(l)||w.isArrayOrTypedArray(l)&&w.isIndex(l[0])&&w.isIndex(l[1])){var u=i?i[l]:l;var c=r?r[u]:u;if(o(c)){t[c].selected=1}}}};w.selIndices2selPoints=function(e){var t=e.selectedpoints;var r=e._indexToPoints;if(r){var a=A(r);var n=[];for(var i=0;i<t.length;i++){var o=t[i];if(w.isIndex(o)){var s=a[o];if(w.isIndex(s)){n.push(s)}}}return n}else{return t}};w.getTargetArray=function(e,t){var r=t.target;if(typeof r==="string"&&r){var a=w.nestedProperty(e,r).get();return Array.isArray(a)?a:false}else if(Array.isArray(r)){return r}return false};w.minExtend=function(e,t){var r={};if(typeof t!=="object")t={};var a=3;var n=Object.keys(e);var i,o,s;for(i=0;i<n.length;i++){o=n[i];s=e[o];if(o.charAt(0)==="_"||typeof s==="function")continue;else if(o==="module")r[o]=s;else if(Array.isArray(s)){if(o==="colorscale"){r[o]=s.slice()}else{r[o]=s.slice(0,a)}}else if(w.isTypedArray(s)){r[o]=s.subarray(0,a)}else if(s&&typeof s==="object")r[o]=w.minExtend(e[o],t[o]);else r[o]=s}n=Object.keys(t);for(i=0;i<n.length;i++){o=n[i];s=t[o];if(typeof s!=="object"||!(o in r)||typeof r[o]!=="object"){r[o]=s}}return r};w.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)};w.containsAny=function(e,t){for(var r=0;r<t.length;r++){if(e.indexOf(t[r])!==-1)return true}return false};w.isIE=function(){return typeof window.navigator.msSaveBlob!=="undefined"};var S=/Version\/[\d\.]+.*Safari/;w.isSafari=function(){return S.test(window.navigator.userAgent)};var E=/iPad|iPhone|iPod/;w.isIOS=function(){return E.test(window.navigator.userAgent)};var L=/Firefox\/(\d+)\.\d+/;w.getFirefoxVersion=function(){var e=L.exec(window.navigator.userAgent);if(e&&e.length===2){var t=parseInt(e[1]);if(!isNaN(t)){return t}}return null};w.isD3Selection=function(e){return e instanceof b.selection};w.ensureSingle=function(e,t,r,a){var n=e.select(t+(r?"."+r:""));if(n.size())return n;var i=e.append(t);if(r)i.classed(r,true);if(a)i.call(a);return i};w.ensureSingleById=function(e,t,r,a){var n=e.select(t+"#"+r);if(n.size())return n;var i=e.append(t).attr("id",r);if(a)i.call(a);return i};w.objectFromPath=function(e,t){var r=e.split(".");var a;var n=a={};for(var i=0;i<r.length;i++){var o=r[i];var s=null;var l=r[i].match(/(.*)\[([0-9]+)\]/);if(l){o=l[1];s=l[2];a=a[o]=[];if(i===r.length-1){a[s]=t}else{a[s]={}}a=a[s]}else{if(i===r.length-1){a[o]=t}else{a[o]={}}a=a[o]}}return n};var C=/^([^\[\.]+)\.(.+)?/;var D=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;w.expandObjectPaths=function(e){var t,r,a,n,i,o,s;if(typeof e==="object"&&!Array.isArray(e)){for(r in e){if(e.hasOwnProperty(r)){if(t=r.match(C)){n=e[r];a=t[1];delete e[r];e[a]=w.extendDeepNoArrays(e[a]||{},w.objectFromPath(r,w.expandObjectPaths(n))[a])}else if(t=r.match(D)){n=e[r];a=t[1];i=parseInt(t[2]);delete e[r];e[a]=e[a]||[];if(t[3]==="."){s=t[4];o=e[a][i]=e[a][i]||{};w.extendDeepNoArrays(o,w.objectFromPath(s,w.expandObjectPaths(n)))}else{e[a][i]=w.expandObjectPaths(n)}}else{e[r]=w.expandObjectPaths(e[r])}}}}return e};w.numSeparate=function(e,t,r){if(!r)r=false;if(typeof t!=="string"||t.length===0){throw new Error("Separator string required for formatting!")}if(typeof e==="number"){e=String(e)}var a=/(\d+)(\d{3})/;var n=t.charAt(0);var i=t.charAt(1);var o=e.split(".");var s=o[0];var l=o.length>1?n+o[1]:"";if(i&&(o.length>1||s.length>4||r)){while(a.test(s)){s=s.replace(a,"$1"+i+"$2")}}return s+l};w.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var O=/^\w*$/;w.templateString=function(e,a){var n={};return e.replace(w.TEMPLATE_STRING_REGEX,function(e,t){var r;if(O.test(t)){r=a[t]}else{n[t]=n[t]||w.nestedProperty(a,t).get;r=n[t]()}return w.isValidTextValue(r)?r:""})};var I={max:10,count:0,name:"hovertemplate"};w.hovertemplateString=function(){return N.apply(I,arguments)};var P={max:10,count:0,name:"texttemplate"};w.texttemplateString=function(){return N.apply(P,arguments)};var R=/^[:|\|]/;function N(e,h,m){var g=this;var y=arguments;if(!h)h={};var x={};return e.replace(w.TEMPLATE_STRING_REGEX,function(e,t,r){var a=t==="xother"||t==="yother";var n=t==="_xother"||t==="_yother";var i=t==="_xother_"||t==="_yother_";var o=t==="xother_"||t==="yother_";var s=a||n||o||i;var l=t;if(n||i)l=l.substring(1);if(o||i)l=l.substring(0,l.length-1);var u;if(s){u=h[l];if(u===undefined)return""}else{var c,f;for(f=3;f<y.length;f++){c=y[f];if(!c)continue;if(c.hasOwnProperty(l)){u=c[l];break}if(!O.test(l)){u=w.nestedProperty(c,l).get();u=x[l]||w.nestedProperty(c,l).get();if(u)x[l]=u}if(u!==undefined)break}}if(u===undefined&&g){if(g.count<g.max){w.warn("Variable '"+l+"' in "+g.name+" could not be found!");u=e}if(g.count===g.max){w.warn("Too many "+g.name+" warnings - additional warnings will be suppressed")}g.count++;return e}if(r){var d;if(r[0]===":"){d=m?m.numberFormat:b.format;u=d(r.replace(R,""))(u)}if(r[0]==="|"){d=m?m.timeFormat:_;var v=w.dateTime2ms(u);u=w.formatDate(v,r.replace(R,""),false,d)}}else{var p=l+"Label";if(h.hasOwnProperty(p))u=h[p]}if(s){u="("+u+")";if(n||i)u=" "+u;if(o||i)u=u+" "}return u})}var z=48;var F=57;w.subplotSort=function(e,t){var r=Math.min(e.length,t.length)+1;var a=0;var n=0;for(var i=0;i<r;i++){var o=e.charCodeAt(i)||0;var s=t.charCodeAt(i)||0;var l=o>=z&&o<=F;var u=s>=z&&s<=F;if(l)a=10*a+o-z;if(u)n=10*n+s-z;if(!l||!u){if(a!==n)return a-n;if(o!==s)return o-s}}return n-a};var j=2e9;w.seedPseudoRandom=function(){j=2e9};w.pseudoRandom=function(){var e=j;j=(69069*j+1)%4294967296;if(Math.abs(j-e)<429496729)return w.pseudoRandom();return j/4294967296};w.fillText=function(e,t,r){var a=Array.isArray(r)?function(e){r.push(e)}:function(e){r.text=e};var n=w.extractOption(e,t,"htx","hovertext");if(w.isValidTextValue(n))return a(n);var i=w.extractOption(e,t,"tx","text");if(w.isValidTextValue(i))return a(i)};w.isValidTextValue=function(e){return e||e===0};w.formatPercent=function(e,t){t=t||0;var r=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%";for(var a=0;a<t;a++){if(r.indexOf(".")!==-1){r=r.replace("0%","%");r=r.replace(".%","%")}}return r};w.isHidden=function(e){var t=window.getComputedStyle(e).display;return!t||t==="none"};w.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""};w.strRotate=function(e){return e?"rotate("+e+")":""};w.strScale=function(e){return e!==1?"scale("+e+")":""};w.getTextTransform=function(e){var t=e.noCenter;var r=e.textX;var a=e.textY;var n=e.targetX;var i=e.targetY;var o=e.anchorX||0;var s=e.anchorY||0;var l=e.rotate;var u=e.scale;if(!u)u=0;else if(u>1)u=1;return w.strTranslate(n-u*(r+o),i-u*(a+s))+w.strScale(u)+(l?"rotate("+l+(t?"":" "+r+" "+a)+")":"")};w.ensureUniformFontSize=function(e,t){var r=w.extendFlat({},t);r.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0);return r};w.join2=function(e,t,r){var a=e.length;if(a>1){return e.slice(0,-1).join(t)+r+e[a-1]}return e.join(t)};w.bigFont=function(e){return Math.round(1.2*e)};var H=w.getFirefoxVersion();var B=H!==null&&H<86;w.getPositionFromD3Event=function(){if(B){return[b.event.layerX,b.event.layerY]}else{return[b.event.offsetX,b.event.offsetY]}}},{"../constants/numerical":210,"./anchor_utils":214,"./angles":215,"./array":216,"./clean_number":217,"./clear_responsive":219,"./coerce":220,"./dates":221,"./dom":222,"./extend":224,"./filter_unique":225,"./filter_visible":226,"./geometry2d":227,"./identity":228,"./increment":229,"./is_plain_object":231,"./keyed_container":232,"./localize":233,"./loggers":234,"./make_trace_groups":235,"./matrix":236,"./mod":237,"./nested_property":238,"./noop":239,"./notifier":240,"./preserve_drawing_buffer":243,"./push_unique":244,"./regex":246,"./relative_attr":247,"./relink_private":248,"./search":249,"./stats":251,"./throttle":253,"./to_log_range":254,"@plotly/d3":11,"d3-time-format":13,"fast-isnumeric":15}],231:[function(e,t,r){"use strict";t.exports=function e(t){if(window&&window.process&&window.process.versions){return Object.prototype.toString.call(t)==="[object Object]"}return Object.prototype.toString.call(t)==="[object Object]"&&Object.getPrototypeOf(t).hasOwnProperty("hasOwnProperty")}},{}],232:[function(e,t,r){"use strict";var p=e("./nested_property");var n=/^\w*$/;var h=0;var m=1;var g=2;var y=3;var x=4;t.exports=function e(t,i,o,s){o=o||"name";s=s||"value";var a,l,u;var c={};if(i&&i.length){u=p(t,i);l=u.get()}else{l=t}i=i||"";var f={};if(l){for(a=0;a<l.length;a++){f[l[a][o]]=a}}var d=n.test(s);var v={set:function(e,t){var r=t===null?x:h;if(!l){if(!u||r===x)return;l=[];u.set(l)}var a=f[e];if(a===undefined){if(r===x)return;r=r|y;a=l.length;f[e]=a}else if(t!==(d?l[a][s]:p(l[a],s).get())){r=r|g}var n=l[a]=l[a]||{};n[o]=e;if(d){n[s]=t}else{p(n,s).set(t)}if(t!==null){r=r&~x}c[a]=c[a]|r;return v},get:function(e){if(!l)return;var t=f[e];if(t===undefined){return undefined}else if(d){return l[t][s]}else{return p(l[t],s).get()}},rename:function(e,t){var r=f[e];if(r===undefined)return v;c[r]=c[r]|m;f[t]=r;delete f[e];l[r][o]=t;return v},remove:function(e){var t=f[e];if(t===undefined)return v;var r=l[t];if(Object.keys(r).length>2){c[t]=c[t]|g;return v.set(e,null)}if(d){for(a=t;a<l.length;a++){c[a]=c[a]|y}for(a=t;a<l.length;a++){f[l[a][o]]--}l.splice(t,1);delete f[e]}else{p(r,s).set(null);c[t]=c[t]|g|x}return v},constructUpdate:function(){var e,t;var r={};var a=Object.keys(c);for(var n=0;n<a.length;n++){t=a[n];e=i+"["+t+"]";if(l[t]){if(c[t]&m){r[e+"."+o]=l[t][o]}if(c[t]&g){if(d){r[e+"."+s]=c[t]&x?null:l[t][s]}else{r[e+"."+s]=c[t]&x?null:p(l[t],s).get()}}}else{r[e]=null}}return r}};return v}},{"./nested_property":238}],233:[function(e,t,r){"use strict";var c=e("../registry");t.exports=function e(t,r){var a=t._context.locale;for(var n=0;n<2;n++){var i=t._context.locales;for(var o=0;o<2;o++){var s=(i[a]||{}).dictionary;if(s){var l=s[r];if(l)return l}i=c.localeRegistry}var u=a.split("-")[0];if(u===a)break;a=u}return r}},{"../registry":313}],234:[function(e,t,r){"use strict";var a=e("../plot_api/plot_config").dfltConfig;var n=e("./notifier");var i=t.exports={};i.log=function(){var e;if(a.logging>1){var t=["LOG:"];for(e=0;e<arguments.length;e++){t.push(arguments[e])}console.trace.apply(console,t)}if(a.notifyOnLogging>1){var r=[];for(e=0;e<arguments.length;e++){r.push(arguments[e])}n(r.join("<br>"),"long")}};i.warn=function(){var e;if(a.logging>0){var t=["WARN:"];for(e=0;e<arguments.length;e++){t.push(arguments[e])}console.trace.apply(console,t)}if(a.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++){r.push(arguments[e])}n(r.join("<br>"),"stick")}};i.error=function(){var e;if(a.logging>0){var t=["ERROR:"];for(e=0;e<arguments.length;e++){t.push(arguments[e])}console.error.apply(console,t)}if(a.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++){r.push(arguments[e])}n(r.join("<br>"),"stick")}}},{"../plot_api/plot_config":263,"./notifier":240}],235:[function(e,t,r){"use strict";var o=e("@plotly/d3");t.exports=function e(t,r,a){var n=t.selectAll("g."+a.replace(/\s/g,".")).data(r,function(e){return e[0].trace.uid});n.exit().remove();n.enter().append("g").attr("class",a);n.order();var i=t.classed("rangeplot")?"nodeRangePlot3":"node3";n.each(function(e){e[0][i]=o.select(this)});return n}},{"@plotly/d3":11}],236:[function(e,t,o){"use strict";var r=e("gl-mat4");o.init2dArray=function(e,t){var r=new Array(e);for(var a=0;a<e;a++)r[a]=new Array(t);return r};o.transposeRagged=function(e){var t=0;var r=e.length;var a,n;for(a=0;a<r;a++)t=Math.max(t,e[a].length);var i=new Array(t);for(a=0;a<t;a++){i[a]=new Array(r);for(n=0;n<r;n++)i[a][n]=e[n][a]}return i};o.dot=function(e,t){if(!(e.length&&t.length)||e.length!==t.length)return null;var r=e.length;var a;var n;if(e[0].length){a=new Array(r);for(n=0;n<r;n++)a[n]=o.dot(e[n],t)}else if(t[0].length){var i=o.transposeRagged(t);a=new Array(i.length);for(n=0;n<i.length;n++)a[n]=o.dot(e,i[n])}else{a=0;for(n=0;n<r;n++)a+=e[n]*t[n]}return a};o.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]};o.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]};o.rotationXYMatrix=function(e,t,r){return o.dot(o.dot(o.translationMatrix(t,r),o.rotationMatrix(e)),o.translationMatrix(-t,-r))};o.apply3DTransform=function(r){return function(){var e=arguments;var t=arguments.length===1?e[0]:[e[0],e[1],e[2]||0];return o.dot(r,[t[0],t[1],t[2],1]).slice(0,3)}};o.apply2DTransform=function(r){return function(){var e=arguments;if(e.length===3){e=e[0]}var t=arguments.length===1?e[0]:[e[0],e[1]];return o.dot(r,[t[0],t[1],1]).slice(0,2)}};o.apply2DTransform2=function(e){var t=o.apply2DTransform(e);return function(e){return t(e.slice(0,2)).concat(t(e.slice(2,4)))}};o.convertCssMatrix=function(e){if(e){var t=e.length;if(t===16)return e;if(t===6){return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};o.inverseTransformMatrix=function(e){var t=[];r.invert(t,e);return[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}},{"gl-mat4":31}],237:[function(e,t,r){"use strict";function a(e,t){var r=e%t;return r<0?r+t:r}function n(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}t.exports={mod:a,modHalf:n}},{}],238:[function(e,t,r){"use strict";var l=e("fast-isnumeric");var f=e("./array").isArrayOrTypedArray;t.exports=function e(t,r){if(l(r))r=String(r);else if(typeof r!=="string"||r.substr(r.length-4)==="[-1]"){throw"bad property string"}var a=0;var n=r.split(".");var i;var o;var s;while(a<n.length){i=String(n[a]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/);if(i){if(i[1])n[a]=i[1];else if(a===0)n.splice(0,1);else throw"bad property string";o=i[2].substr(1,i[2].length-2).split("][");for(s=0;s<o.length;s++){a++;n.splice(a,0,Number(o[s]))}}a++}if(typeof t!=="object"){return m(t,r,n)}return{set:v(t,n,r),get:u(t,n),astr:r,parts:n,obj:t}};function u(o,s){return function(){var e=o;var t;var r;var a;var n;var i;for(n=0;n<s.length-1;n++){t=s[n];if(t===-1){r=true;a=[];for(i=0;i<e.length;i++){a[i]=u(e[i],s.slice(n+1))();if(a[i]!==a[0])r=false}return r?a[0]:a}if(typeof t==="number"&&!f(e)){return undefined}e=e[t];if(typeof e!=="object"||e===null){return undefined}}if(typeof e!=="object"||e===null)return undefined;a=e[s[n]];if(a===null)return undefined;return a}}var a=/(^|\.)args\[/;function d(e,t){return e===undefined||e===null&&!t.match(a)}function v(s,l,u){return function(e){var t=s;var r="";var a=[[s,r]];var n=d(e,u);var i;var o;for(o=0;o<l.length-1;o++){i=l[o];if(typeof i==="number"&&!f(t)){throw"array index but container is not an array"}if(i===-1){n=!p(t,l.slice(o+1),e,u);if(n)break;else return}if(!h(t,i,l[o+1],n)){break}t=t[i];if(typeof t!=="object"||t===null){throw"container is not an object"}r=c(r,i);a.push([t,r])}if(n){if(o===l.length-1){delete t[l[o]];if(Array.isArray(t)&&+l[o]===t.length-1){while(t.length&&t[t.length-1]===undefined){t.pop()}}}}else t[l[o]]=e}}function c(e,t){var r=t;if(l(t))r="["+t+"]";else if(e)r="."+t;return e+r}function p(e,t,r,a){var n=f(r);var i=true;var o=r;var s=a.replace("-1",0);var l=n?false:d(r,s);var u=t[0];var c;for(c=0;c<e.length;c++){s=a.replace("-1",c);if(n){o=r[c%r.length];l=d(o,s)}if(l)i=false;if(!h(e,c,u,l)){continue}v(e[c],t,a.replace("-1",c))(o)}return i}function h(e,t,r,a){if(e[t]===undefined){if(a)return false;if(typeof r==="number")e[t]=[];else e[t]={}}return true}function m(e,t,r){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:r,obj:e}}},{"./array":216,"fast-isnumeric":15}],239:[function(e,t,r){"use strict";t.exports=function e(){}},{}],240:[function(e,t,r){"use strict";var l=e("@plotly/d3");var a=e("fast-isnumeric");var n=[];t.exports=function(e,i){if(n.indexOf(e)!==-1)return;n.push(e);var o=1e3;if(a(i))o=i;else if(i==="long")o=3e3;var t=l.select("body").selectAll(".plotly-notifier").data([0]);t.enter().append("div").classed("plotly-notifier",true);var r=t.selectAll(".notifier-note").data(n);function s(e){e.duration(700).style("opacity",0).each("end",function(e){var t=n.indexOf(e);if(t!==-1)n.splice(t,1);l.select(this).remove()})}r.enter().append("div").classed("notifier-note",true).style("opacity",0).each(function(e){var t=l.select(this);t.append("button").classed("notifier-close",true).html("&times;").on("click",function(){t.transition().call(s)});var r=t.append("p");var a=e.split(/<br\s*\/?>/g);for(var n=0;n<a.length;n++){if(n)r.append("br");r.append("span").text(a[n])}if(i==="stick"){t.transition().duration(350).style("opacity",1)}else{t.transition().duration(700).style("opacity",1).transition().delay(o).call(s)}})}},{"@plotly/d3":11,"fast-isnumeric":15}],241:[function(e,t,r){"use strict";var s=e("./setcursor");var l="data-savedcursor";var u="!!";t.exports=function e(t,r){var a=t.attr(l);if(r){if(!a){var n=(t.attr("class")||"").split(" ");for(var i=0;i<n.length;i++){var o=n[i];if(o.indexOf("cursor-")===0){t.attr(l,o.substr(7)).classed(o,false)}}if(!t.attr(l)){t.attr(l,u)}}s(t,r)}else if(a){t.attr(l,null);if(a===u)s(t);else s(t,a)}}},{"./setcursor":250}],242:[function(e,t,r){"use strict";var v=e("./matrix").dot;var y=e("../constants/numerical").BADNUM;var u=t.exports={};u.tester=function e(t){var v=t.slice();var p=v[0][0];var h=p;var m=v[0][1];var g=m;var r;v.push(v[0]);for(r=1;r<v.length;r++){p=Math.min(p,v[r][0]);h=Math.max(h,v[r][0]);m=Math.min(m,v[r][1]);g=Math.max(g,v[r][1])}var a=false;var n;if(v.length===5){if(v[0][0]===v[1][0]){if(v[2][0]===v[3][0]&&v[0][1]===v[3][1]&&v[1][1]===v[2][1]){a=true;n=function(e){return e[0]===v[0][0]}}}else if(v[0][1]===v[1][1]){if(v[2][1]===v[3][1]&&v[0][0]===v[3][0]&&v[1][0]===v[2][0]){a=true;n=function(e){return e[1]===v[0][1]}}}}function i(e,t){var r=e[0];var a=e[1];if(r===y||r<p||r>h||a===y||a<m||a>g){return false}if(t&&n(e))return false;return true}function o(e,t){var r=e[0];var a=e[1];if(r===y||r<p||r>h||a===y||a<m||a>g){return false}var n=v.length;var i=v[0][0];var o=v[0][1];var s=0;var l;var u;var c;var f;var d;for(l=1;l<n;l++){u=i;c=o;i=v[l][0];o=v[l][1];f=Math.min(u,i);if(r<f||r>Math.max(u,i)||a>Math.max(c,o)){continue}else if(a<Math.min(c,o)){if(r!==f)s++}else{if(i===u)d=a;else d=c+(r-u)*(o-c)/(i-u);if(a===d){if(l===1&&t)return false;return true}if(a<=d&&r!==f)s++}}return s%2===1}var s=true;var l=v[0];for(r=1;r<v.length;r++){if(l[0]!==v[r][0]||l[1]!==v[r][1]){s=false;break}}return{xmin:p,xmax:h,ymin:m,ymax:g,pts:v,contains:a?i:o,isRect:a,degenerate:s}};u.isSegmentBent=function e(t,r,a,n){var i=t[r];var o=[t[a][0]-i[0],t[a][1]-i[1]];var s=v(o,o);var l=Math.sqrt(s);var u=[-o[1]/l,o[0]/l];var c;var f;var d;for(c=r+1;c<a;c++){f=[t[c][0]-i[0],t[c][1]-i[1]];d=v(f,o);if(d<0||d>s||Math.abs(v(f,u))>n)return true}return false};u.filter=function e(n,i){var o=[n[0]];var s=0;var l=0;function t(e){n.push(e);var t=o.length;var r=s;o.splice(l+1);for(var a=r+1;a<n.length;a++){if(a===n.length-1||u.isSegmentBent(n,r,a+1,i)){o.push(n[a]);if(o.length<t-2){s=a;l=o.length-1}r=a}}}if(n.length>1){var r=n.pop();t(r)}return{addPt:t,raw:n,filtered:o}}},{"../constants/numerical":210,"./matrix":236}],243:[function(e,t,r){"use strict";var c=e("fast-isnumeric");var f=e("is-mobile");t.exports=function e(t){var r;if(t&&t.hasOwnProperty("userAgent")){r=t.userAgent}else{r=d()}if(typeof r!=="string")return true;var a=f({ua:{headers:{"user-agent":r}},tablet:true,featureDetect:false});if(!a){var n=r.split(" ");for(var i=1;i<n.length;i++){var o=n[i];if(o.indexOf("Safari")!==-1){for(var s=i-1;s>-1;s--){var l=n[s];if(l.substr(0,8)==="Version/"){var u=l.substr(8).split(".")[0];if(c(u))u=+u;if(u>=13)return true}}}}}return a};function d(){var e;if(typeof navigator!=="undefined"){e=navigator.userAgent}if(e&&e.headers&&typeof e.headers["user-agent"]==="string"){e=e.headers["user-agent"]}return e}},{"fast-isnumeric":15,"is-mobile":49}],244:[function(e,t,r){"use strict";t.exports=function e(t,r){if(r instanceof RegExp){var a=r.toString();for(var n=0;n<t.length;n++){if(t[n]instanceof RegExp&&t[n].toString()===a){return t}}t.push(r)}else if((r||r===0)&&t.indexOf(r)===-1)t.push(r);return t}},{}],245:[function(e,t,r){"use strict";var i=e("../lib");var s=e("../plot_api/plot_config").dfltConfig;function a(e,t){var r=[];var a;for(var n=0;n<t.length;n++){a=t[n];if(a===e)r[n]=a;else if(typeof a==="object"){r[n]=Array.isArray(a)?i.extendDeep([],a):i.extendDeepAll({},a)}else r[n]=a}return r}var n={};n.add=function(e,t,r,a,n){var i,o;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};o=e.undoQueue.index;if(e.autoplay){if(!e.undoQueue.inSequence)e.autoplay=false;return}if(!e.undoQueue.sequence||e.undoQueue.beginSequence){i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}};e.undoQueue.queue.splice(o,e.undoQueue.queue.length-o,i);e.undoQueue.index+=1}else{i=e.undoQueue.queue[o-1]}e.undoQueue.beginSequence=false;if(i){i.undo.calls.unshift(t);i.undo.args.unshift(r);i.redo.calls.push(a);i.redo.args.push(n)}if(e.undoQueue.queue.length>s.queueLength){e.undoQueue.queue.shift();e.undoQueue.index--}};n.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};e.undoQueue.sequence=true;e.undoQueue.beginSequence=true};n.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};e.undoQueue.sequence=false;e.undoQueue.beginSequence=false};n.undo=function e(t){var r,a;if(t.undoQueue===undefined||isNaN(t.undoQueue.index)||t.undoQueue.index<=0){return}t.undoQueue.index--;r=t.undoQueue.queue[t.undoQueue.index];t.undoQueue.inSequence=true;for(a=0;a<r.undo.calls.length;a++){n.plotDo(t,r.undo.calls[a],r.undo.args[a])}t.undoQueue.inSequence=false;t.autoplay=false};n.redo=function e(t){var r,a;if(t.undoQueue===undefined||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length){return}r=t.undoQueue.queue[t.undoQueue.index];t.undoQueue.inSequence=true;for(a=0;a<r.redo.calls.length;a++){n.plotDo(t,r.redo.calls[a],r.redo.args[a])}t.undoQueue.inSequence=false;t.autoplay=false;t.undoQueue.index++};n.plotDo=function(e,t,r){e.autoplay=true;r=a(e,r);t.apply(null,r)};t.exports=n},{"../lib":230,"../plot_api/plot_config":263}],246:[function(e,t,r){"use strict";r.counter=function(e,t,r,a){var n=(t||"")+(r?"":"$");var i=a===false?"":"^";if(e==="xy"){return new RegExp(i+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n)}return new RegExp(i+e+"([2-9]|[1-9][0-9]+)?"+n)}},{}],247:[function(e,t,r){"use strict";var a=/^(.*)(\.[^\.\[\]]+|\[\d\])$/;var n=/^[^\.\[\]]+$/;t.exports=function(e,t){while(t){var r=e.match(a);if(r)e=r[1];else if(e.match(n))e="";else throw new Error("bad relativeAttr call:"+[e,t]);if(t.charAt(0)==="^")t=t.slice(1);else break}if(e&&t.charAt(0)!=="["){return e+"."+t}return e+t}},{}],248:[function(e,t,r){"use strict";var l=e("./array").isArrayOrTypedArray;var u=e("./is_plain_object");t.exports=function e(t,r){for(var a in r){var n=r[a];var i=t[a];if(i===n)continue;if(a.charAt(0)==="_"||typeof n==="function"){if(a in t)continue;t[a]=n}else if(l(n)&&l(i)&&u(n[0])){if(a==="customdata"||a==="ids")continue;var o=Math.min(n.length,i.length);for(var s=0;s<o;s++){if(i[s]!==n[s]&&u(n[s])&&u(i[s])){e(i[s],n[s])}}}else if(u(n)&&u(i)){e(i,n);if(!Object.keys(i).length)delete t[a]}}}},{"./array":216,"./is_plain_object":231}],249:[function(e,t,c){"use strict";var u=e("fast-isnumeric");var f=e("./loggers");var o=e("./identity");var d=e("../constants/numerical").BADNUM;var v=1e-9;c.findBin=function(e,t,r){if(u(t.start)){return r?Math.ceil((e-t.start)/t.size-v)-1:Math.floor((e-t.start)/t.size+v)}else{var a=0;var n=t.length;var i=0;var o=n>1?(t[n-1]-t[0])/(n-1):1;var s,l;if(o>=0){l=r?p:h}else{l=r?g:m}e+=o*v*(r?-1:1)*(o>=0?1:-1);while(a<n&&i++<100){s=Math.floor((a+n)/2);if(l(t[s],e))a=s+1;else n=s}if(i>90)f.log("Long binary search...");return a-1}};function p(e,t){return e<t}function h(e,t){return e<=t}function m(e,t){return e>t}function g(e,t){return e>=t}c.sorterAsc=function(e,t){return e-t};c.sorterDes=function(e,t){return t-e};c.distinctVals=function(e){var t=e.slice();t.sort(c.sorterAsc);var r;for(r=t.length-1;r>-1;r--){if(t[r]!==d)break}var a=t[r]-t[0]||1;var n=a/(r||1)/1e4;var i=[];var o;for(var s=0;s<=r;s++){var l=t[s];var u=l-o;if(o===undefined){i.push(l);o=l}else if(u>n){a=Math.min(a,u);i.push(l);o=l}}return{vals:i,minDiff:a}};c.roundUp=function(e,t,r){var a=0;var n=t.length-1;var i;var o=0;var s=r?0:1;var l=r?1:0;var u=r?Math.ceil:Math.floor;while(a<n&&o++<100){i=u((a+n)/2);if(t[i]<=e)a=i+s;else n=i-l}return t[a]};c.sort=function(e,t){var r=0;var a=0;for(var n=1;n<e.length;n++){var i=t(e[n],e[n-1]);if(i<0)r=1;else if(i>0)a=1;if(r&&a)return e.sort(t)}return a?e:e.reverse()};c.findIndexOfMin=function(e,t){t=t||o;var r=Infinity;var a;for(var n=0;n<e.length;n++){var i=t(e[n]);if(i<r){r=i;a=n}}return a}},{"../constants/numerical":210,"./identity":228,"./loggers":234,"fast-isnumeric":15}],250:[function(e,t,r){"use strict";t.exports=function e(t,r){(t.attr("class")||"").split(" ").forEach(function(e){if(e.indexOf("cursor-")===0)t.classed(e,false)});if(r)t.classed("cursor-"+r,true)}},{}],251:[function(e,t,o){"use strict";var s=e("fast-isnumeric");var l=e("./array").isArrayOrTypedArray;o.aggNums=function(e,t,r,a){var n,i;if(!a||a>r.length)a=r.length;if(!s(t))t=false;if(l(r[0])){i=new Array(a);for(n=0;n<a;n++)i[n]=o.aggNums(e,t,r[n]);r=i}for(n=0;n<a;n++){if(!s(t))t=r[n];else if(s(r[n]))t=e(+t,+r[n])}return t};o.len=function(e){return o.aggNums(function(e){return e+1},0,e)};o.mean=function(e,t){if(!t)t=o.len(e);return o.aggNums(function(e,t){return e+t},0,e)/t};o.midRange=function(e){if(e===undefined||e.length===0)return undefined;return(o.aggNums(Math.max,null,e)+o.aggNums(Math.min,null,e))/2};o.variance=function(e,t,r){if(!t)t=o.len(e);if(!s(r))r=o.mean(e,t);return o.aggNums(function(e,t){return e+Math.pow(t-r,2)},0,e)/t};o.stdev=function(e,t,r){return Math.sqrt(o.variance(e,t,r))};o.median=function(e){var t=e.slice().sort();return o.interp(t,.5)};o.interp=function(e,t){if(!s(t))throw"n should be a finite number";t=t*e.length-.5;if(t<0)return e[0];if(t>e.length-1)return e[e.length-1];var r=t%1;return r*e[Math.ceil(t)]+(1-r)*e[Math.floor(t)]}},{"./array":216,"fast-isnumeric":15}],252:[function(e,t,r){"use strict";var w=e("@plotly/d3");var T=e("../lib");var b=T.strTranslate;var k=e("../constants/xmlns_namespaces");var M=e("../constants/alignment").LINE_SPACING;function _(e,t){return e.node().getBoundingClientRect()[t]}var a=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;r.convertToTspans=function(p,e,h){var m=p.text();var t=!p.attr("data-notex")&&typeof MathJax!=="undefined"&&m.match(a);var g=w.select(p.node().parentNode);if(g.empty())return;var y=p.attr("class")?p.attr("class").split(" ")[0]:"text";y+="-math";g.selectAll("svg."+y).remove();g.selectAll("g."+y+"-group").remove();p.style("display",null).attr({"data-unformatted":m,"data-math":"N"});function x(){if(!g.empty()){y=p.attr("class")+"-math";g.select("svg."+y).remove()}p.text("").style("white-space","pre");var e=f(p.node(),m);if(e){p.style("pointer-events","all")}r.positionText(p);if(h)h.call(p)}if(t){(e&&e._promises||[]).push(new Promise(function(d){p.style("display","none");var v=parseInt(p.node().style.fontSize,10);var e={fontSize:v};o(t[2],e,function(e,t,r){g.selectAll("svg."+y).remove();g.selectAll("g."+y+"-group").remove();var a=e&&e.select("svg");if(!a||!a.node()){x();d();return}var n=g.append("g").classed(y+"-group",true).attr({"pointer-events":"none","data-unformatted":m,"data-math":"Y"});n.node().appendChild(a.node());if(t&&t.node()){a.node().insertBefore(t.node().cloneNode(true),a.node().firstChild)}a.attr({class:y,height:r.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var i=p.node().style.fill||"black";var o=a.select("g");o.attr({fill:i,stroke:i});var s=_(o,"width");var l=_(o,"height");var u=+p.attr("x")-s*{start:0,middle:.5,end:1}[p.attr("text-anchor")||"start"];var c=v||_(p,"height");var f=-c/4;if(y[0]==="y"){n.attr({transform:"rotate("+[-90,+p.attr("x"),+p.attr("y")]+")"+b(-s/2,f-l/2)});a.attr({x:+p.attr("x"),y:+p.attr("y")})}else if(y[0]==="l"){a.attr({x:p.attr("x"),y:f-l/2})}else if(y[0]==="a"&&y.indexOf("atitle")!==0){a.attr({x:0,y:f})}else{a.attr({x:u,y:+p.attr("y")+f-l/2})}if(h)h.call(p,n);d(n)})}))}else x();return p};var n=/(<|&lt;|&#60;)/g;var i=/(>|&gt;|&#62;)/g;function s(e){return e.replace(n,"\\lt ").replace(i,"\\gt ")}function o(r,t,a){var n,e,i,o;MathJax.Hub.Queue(function(){e=T.extendDeepAll({},MathJax.Hub.config);i=MathJax.Hub.processSectionDelay;if(MathJax.Hub.processSectionDelay!==undefined){MathJax.Hub.processSectionDelay=0}return MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){n=MathJax.Hub.config.menuSettings.renderer;if(n!=="SVG"){return MathJax.Hub.setRenderer("SVG")}},function(){var e="math-output-"+T.randstr({},64);o=w.select("body").append("div").attr({id:e}).style({visibility:"hidden",position:"absolute"}).style({"font-size":t.fontSize+"px"}).text(s(r));return MathJax.Hub.Typeset(o.node())},function(){var e=w.select("body").select("#MathJax_SVG_glyphs");if(o.select(".MathJax_SVG").empty()||!o.select("svg").node()){T.log("There was an error in the tex syntax.",r);a()}else{var t=o.select("svg").node().getBoundingClientRect();a(o.select(".MathJax_SVG"),e,t)}o.remove();if(n!=="SVG"){return MathJax.Hub.setRenderer(n)}},function(){if(i!==undefined){MathJax.Hub.processSectionDelay=i}return MathJax.Hub.Config(e)})}var A={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"};var S={sub:"0.3em",sup:"-0.6em"};var E={sub:"-0.21em",sup:"0.42em"};var L="​";var C=["http:","https:","mailto:","",undefined,":"];var D=r.NEWLINES=/(\r\n?|\n)/g;var O=/(<[^<>]*>)/;var I=/<(\/?)([^ >]*)(\s+(.*))?>/i;var P=/<br(\s+.*)?>/i;r.BR_TAG_ALL=/<br(\s+.*)?>/gi;var R=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i;var N=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i;var z=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i;var F=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function j(e,t){if(!e)return null;var r=e.match(t);var a=r&&(r[3]||r[4]);return a&&B(a)}var H=/(^|;)\s*color:/;r.plainText=function(e,t){t=t||{};var r=t.len!==undefined&&t.len!==-1?t.len:Infinity;var a=t.allowedTags!==undefined?t.allowedTags:["br"];var n="...";var i=n.length;var o=e.split(O);var s=[];var l="";var u=0;for(var c=0;c<o.length;c++){var f=o[c];var d=f.match(I);var v=d&&d[2].toLowerCase();if(v){if(a.indexOf(v)!==-1){s.push(f);l=v}}else{var p=f.length;if(u+p<r){s.push(f);u+=p}else if(u<r){var h=r-u;if(l&&(l!=="br"||h<=i||p<=i)){s.pop()}if(r>i){s.push(f.substr(0,h-i)+n)}else{s.push(f.substr(0,h))}break}l=""}}return s.join("")};var l={mu:"μ",amp:"&",lt:"<",gt:">",nbsp:" ",times:"×",plusmn:"±",deg:"°"};var u=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function B(e){return e.replace(u,function(e,t){var r;if(t.charAt(0)==="#"){r=c(t.charAt(1)==="x"?parseInt(t.substr(2),16):parseInt(t.substr(1),10))}else r=l[t];return r||e})}r.convertEntities=B;function c(e){if(e>1114111)return;var t=String.fromCodePoint;if(t)return t(e);var r=String.fromCharCode;if(e<=65535)return r(e);return r((e>>10)+55232,e%1024+56320)}function f(a,r){r=r.replace(D," ");var e=false;var u=[];var c;var n=-1;function t(){n++;var e=document.createElementNS(k.svg,"tspan");w.select(e).attr({class:"line",dy:n*M+"em"});a.appendChild(e);c=e;var t=u;u=[{node:e}];if(t.length>1){for(var r=1;r<t.length;r++){i(t[r])}}}function i(e){var t=e.type;var r={};var a;if(t==="a"){a="a";var n=e.target;var i=e.href;var o=e.popup;if(i){r={"xlink:xlink:show":n==="_blank"||n.charAt(0)!=="_"?"new":"replace",target:n,"xlink:xlink:href":i};if(o){r.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+o+'");return false;'}}}else a="tspan";if(e.style)r.style=e.style;var s=document.createElementNS(k.svg,a);if(t==="sup"||t==="sub"){f(c,L);c.appendChild(s);var l=document.createElementNS(k.svg,"tspan");f(l,L);w.select(l).attr("dy",E[t]);r.dy=S[t];c.appendChild(s);c.appendChild(l)}else{c.appendChild(s)}w.select(s).attr(r);c=e.node=s;u.push(e)}function f(e,t){e.appendChild(document.createTextNode(t))}function o(e){if(u.length===1){T.log("Ignoring unexpected end tag </"+e+">.",r);return}var t=u.pop();if(e!==t.type){T.log("Start tag <"+t.type+"> doesnt match end tag <"+e+">. Pretending it did match.",r)}c=u[u.length-1].node}var s=P.test(r);if(s)t();else{c=a;u=[{node:a}]}var l=r.split(O);for(var d=0;d<l.length;d++){var v=l[d];var p=v.match(I);var h=p&&p[2].toLowerCase();var m=A[h];if(h==="br"){t()}else if(m===undefined){f(c,B(v))}else{if(p[1]){o(h)}else{var g=p[4];var y={type:h};var x=j(g,R);if(x){x=x.replace(H,"$1 fill:");if(m)x+=";"+m}else if(m)x=m;if(x)y.style=x;if(h==="a"){e=true;var b=j(g,N);if(b){var _=document.createElement("a");_.href=b;if(C.indexOf(_.protocol)!==-1){y.href=encodeURI(decodeURI(b));y.target=j(g,z)||"_blank";y.popup=j(g,F)}}}i(y)}}}return e}r.sanitizeHTML=function e(t){t=t.replace(D," ");var r=document.createElement("p");var a=r;var n=[];var i=t.split(O);for(var o=0;o<i.length;o++){var s=i[o];var l=s.match(I);var u=l&&l[2].toLowerCase();if(u in A){if(l[1]){if(n.length){a=n.pop()}}else{var c=l[4];var f=j(c,R);var d=f?{style:f}:{};if(u==="a"){var v=j(c,N);if(v){var p=document.createElement("a");p.href=v;if(C.indexOf(p.protocol)!==-1){d.href=encodeURI(decodeURI(v));var h=j(c,z);if(h){d.target=h}}}}var m=document.createElement(u);a.appendChild(m);w.select(m).attr(d);a=m;n.push(m)}}else{a.appendChild(document.createTextNode(B(s)))}}var g="innerHTML";return r[g]};r.lineCount=function e(t){return t.selectAll("tspan.line").size()||1};r.positionText=function e(t,n,i){return t.each(function(){var r=w.select(this);function e(e,t){if(t===undefined){t=r.attr(e);if(t===null){r.attr(e,0);t=0}}else r.attr(e,t);return t}var t=e("x",n);var a=e("y",i);if(this.nodeName==="text"){r.selectAll("tspan.line").attr({x:t,y:a})}})};function d(e,t,n){var r=n.horizontalAlign;var a=n.verticalAlign||"top";var i=e.node().getBoundingClientRect();var o=t.node().getBoundingClientRect();var s;var l;var u;if(a==="bottom"){l=function(){return i.bottom-s.height}}else if(a==="middle"){l=function(){return i.top+(i.height-s.height)/2}}else{l=function(){return i.top}}if(r==="right"){u=function(){return i.right-s.width}}else if(r==="center"){u=function(){return i.left+(i.width-s.width)/2}}else{u=function(){return i.left}}return function(){s=this.node().getBoundingClientRect();var e=u()-o.left;var t=l()-o.top;var r=n.gd||{};if(n.gd){r._fullLayout._calcInverseTransform(r);var a=T.apply3DTransform(r._fullLayout._invTransform)(e,t);e=a[0];t=a[1]}this.style({top:t+"px",left:e+"px","z-index":1e3});return this}}var v="1px ";r.makeTextShadow=function(e){var t=v;var r=v;var a=v;return t+r+a+e+", "+"-"+t+"-"+r+a+e+", "+t+"-"+r+a+e+", "+"-"+t+r+a+e};r.makeEditable=function(o,s){var l=s.gd;var e=s.delegate;var u=w.dispatch("edit","input","cancel");var r=e||o;o.style({"pointer-events":e?"none":"all"});if(o.size()!==1)throw new Error("boo");function t(){a();o.style({opacity:0});var e=r.attr("class");var t;if(e)t="."+e.split(" ")[0]+"-math-group";else t="[class*=-math-group]";if(t){w.select(o.node().parentNode).select(t).style({opacity:0})}}function c(e){var t=e.node();var r=document.createRange();r.selectNodeContents(t);var a=window.getSelection();a.removeAllRanges();a.addRange(r);t.focus()}function a(){var e=w.select(l);var t=e.select(".svg-container");var r=t.append("div");var a=o.node().style;var n=parseFloat(a.fontSize||12);var i=s.text;if(i===undefined)i=o.attr("data-unformatted");r.classed("plugin-editable editable",true).style({position:"absolute","font-family":a.fontFamily||"Arial","font-size":n,color:s.fill||a.fill||"black",opacity:1,"background-color":s.background||"transparent",outline:"#ffffff33 1px solid",margin:[-n/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:true}).text(i).call(d(o,t,s)).on("blur",function(){l._editing=false;o.text(this.textContent).style({opacity:1});var e=w.select(this).attr("class");var t;if(e)t="."+e.split(" ")[0]+"-math-group";else t="[class*=-math-group]";if(t){w.select(o.node().parentNode).select(t).style({opacity:0})}var r=this.textContent;w.select(this).transition().duration(0).remove();w.select(document).on("mouseup",null);u.edit.call(o,r)}).on("focus",function(){var e=this;l._editing=true;w.select(document).on("mouseup",function(){if(w.event.target===e)return false;if(document.activeElement===r.node())r.node().blur()})}).on("keyup",function(){if(w.event.which===27){l._editing=false;o.style({opacity:1});w.select(this).style({opacity:0}).on("blur",function(){return false}).transition().remove();u.cancel.call(o,this.textContent)}else{u.input.call(o,this.textContent);w.select(this).call(d(o,t,s))}}).on("keydown",function(){if(w.event.which===13)this.blur()}).call(c)}if(s.immediate)t();else r.on("click",t);return w.rebind(o,u,"on")}},{"../constants/alignment":205,"../constants/xmlns_namespaces":211,"../lib":230,"@plotly/d3":11}],253:[function(e,t,r){"use strict";var l={};r.throttle=function e(t,r,a){var n=l[t];var i=Date.now();if(!n){for(var o in l){if(l[o].ts<i-6e4){delete l[o]}}n=l[t]={ts:0,timer:null}}u(n);function s(){a();n.ts=Date.now();if(n.onDone){n.onDone();n.onDone=null}}if(i>n.ts+r){s();return}n.timer=setTimeout(function(){s();n.timer=null},r)};r.done=function(e){var a=l[e];if(!a||!a.timer)return Promise.resolve();return new Promise(function(t){var r=a.onDone;a.onDone=function e(){if(r)r();t();a.onDone=null}})};r.clear=function(e){if(e){u(l[e]);delete l[e]}else{for(var t in l)r.clear(t)}};function u(e){if(e&&e.timer!==null){clearTimeout(e.timer);e.timer=null}}},{}],254:[function(e,t,r){"use strict";var n=e("fast-isnumeric");t.exports=function e(t,r){if(t>0)return Math.log(t)/Math.LN10;var a=Math.log(Math.min(r[0],r[1]))/Math.LN10;if(!n(a))a=Math.log(Math.max(r[0],r[1]))/Math.LN10-6;return a}},{"fast-isnumeric":15}],255:[function(e,t,r){"use strict";t.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],256:[function(e,t,r){"use strict";t.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],257:[function(e,t,r){"use strict";var u=e("../registry");t.exports=function e(t){var r=u.layoutArrayContainers;var a=u.layoutArrayRegexes;var n=t.split("[")[0];var i;var o;for(var s=0;s<a.length;s++){o=t.match(a[s]);if(o&&o.index===0){i=o[0];break}}if(!i)i=r[r.indexOf(n)];if(!i)return false;var l=t.substr(i.length);if(!l)return{array:i,index:"",property:""};o=l.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/);if(!o)return false;return{array:i,index:Number(o[1]),property:o[3]||""}}},{"../registry":313}],258:[function(e,t,r){"use strict";var a=e("../lib");var o=a.extendFlat;var s=a.isPlainObject;var n={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]};var i={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]};var l=n.flags.slice().concat(["fullReplot"]);var u=i.flags.slice().concat("layoutReplot");t.exports={traces:n,layout:i,traceFlags:function(){return c(l)},layoutFlags:function(){return c(u)},update:function(e,t){var r=t.editType;if(r&&r!=="none"){var a=r.split("+");for(var n=0;n<a.length;n++){e[a[n]]=true}}},overrideAll:f};function c(e){var t={};for(var r=0;r<e.length;r++)t[e[r]]=false;return t}function f(e,t,r){var a=o({},e);for(var n in a){var i=a[n];if(s(i)){a[n]=d(i,t,r,n)}}if(r==="from-root")a.editType=t;return a}function d(e,t,r,a){if(e.valType){var n=o({},e);n.editType=t;if(Array.isArray(e.items)){n.items=new Array(e.items.length);for(var i=0;i<e.items.length;i++){n.items[i]=d(e.items[i],t,"from-root")}}return n}else{return f(e,t,a.charAt(0)==="_"?"nested":"from-root")}}},{"../lib":230}],259:[function(e,t,A){"use strict";var c=e("fast-isnumeric");var S=e("gl-mat4/fromQuat");var _=e("../registry");var E=e("../lib");var L=e("../plots/plots");var r=e("../plots/cartesian/axis_ids");var C=e("../components/color");var D=r.cleanId;var f=r.getFromTrace;var w=_.traceIs;A.clearPromiseQueue=function(e){if(Array.isArray(e._promises)&&e._promises.length>0){E.log("Clearing previous rejected promises from queue.")}e._promises=[]};A.cleanLayout=function(e){var t,r;if(!e)e={};if(e.xaxis1){if(!e.xaxis)e.xaxis=e.xaxis1;delete e.xaxis1}if(e.yaxis1){if(!e.yaxis)e.yaxis=e.yaxis1;delete e.yaxis1}if(e.scene1){if(!e.scene)e.scene=e.scene1;delete e.scene1}var a=(L.subplotsRegistry.cartesian||{}).attrRegex;var n=(L.subplotsRegistry.polar||{}).attrRegex;var i=(L.subplotsRegistry.ternary||{}).attrRegex;var o=(L.subplotsRegistry.gl3d||{}).attrRegex;var s=Object.keys(e);for(t=0;t<s.length;t++){var l=s[t];if(a&&a.test(l)){var u=e[l];if(u.anchor&&u.anchor!=="free"){u.anchor=D(u.anchor)}if(u.overlaying)u.overlaying=D(u.overlaying);if(!u.type){if(u.isdate)u.type="date";else if(u.islog)u.type="log";else if(u.isdate===false&&u.islog===false)u.type="linear"}if(u.autorange==="withzero"||u.autorange==="tozero"){u.autorange=true;u.rangemode="tozero"}delete u.islog;delete u.isdate;delete u.categories;if(P(u,"domain"))delete u.domain;if(u.autotick!==undefined){if(u.tickmode===undefined){u.tickmode=u.autotick?"auto":"linear"}delete u.autotick}I(u)}else if(n&&n.test(l)){var c=e[l];I(c.radialaxis)}else if(i&&i.test(l)){var f=e[l];I(f.aaxis);I(f.baxis);I(f.caxis)}else if(o&&o.test(l)){var d=e[l];var v=d.cameraposition;if(Array.isArray(v)&&v[0].length===4){var p=v[0];var h=v[1];var m=v[2];var g=S([],p);var y=[];for(r=0;r<3;++r){y[r]=h[r]+m*g[2+4*r]}d.camera={eye:{x:y[0],y:y[1],z:y[2]},center:{x:h[0],y:h[1],z:h[2]},up:{x:0,y:0,z:1}};delete d.cameraposition}I(d.xaxis);I(d.yaxis);I(d.zaxis)}}var x=Array.isArray(e.annotations)?e.annotations.length:0;for(t=0;t<x;t++){var b=e.annotations[t];if(!E.isPlainObject(b))continue;if(b.ref){if(b.ref==="paper"){b.xref="paper";b.yref="paper"}else if(b.ref==="data"){b.xref="x";b.yref="y"}delete b.ref}O(b,"xref");O(b,"yref")}var _=Array.isArray(e.shapes)?e.shapes.length:0;for(t=0;t<_;t++){var w=e.shapes[t];if(!E.isPlainObject(w))continue;O(w,"xref");O(w,"yref")}var T=Array.isArray(e.images)?e.images.length:0;for(t=0;t<T;t++){var k=e.images[t];if(!E.isPlainObject(k))continue;O(k,"xref");O(k,"yref")}var M=e.legend;if(M){if(M.x>3){M.x=1.02;M.xanchor="left"}else if(M.x<-2){M.x=-.02;M.xanchor="right"}if(M.y>3){M.y=1.02;M.yanchor="bottom"}else if(M.y<-2){M.y=-.02;M.yanchor="top"}}I(e);if(e.dragmode==="rotate")e.dragmode="orbit";C.clean(e);if(e.template&&e.template.layout){A.cleanLayout(e.template.layout)}return e};function O(e,t){var r=e[t];var a=t.charAt(0);if(r&&r!=="paper"){e[t]=D(r,a,true)}}function I(n){if(n){if(typeof n.title==="string"||typeof n.title==="number"){n.title={text:n.title}}e("titlefont","font");e("titleposition","position");e("titleside","side");e("titleoffset","offset")}function e(e,t){var r=n[e];var a=n.title&&n.title[t];if(r&&!a){if(!n.title){n.title={}}n.title[t]=n[e];delete n[e]}}}A.cleanData=function(e){for(var t=0;t<e.length;t++){var r=e[t];var a;if(r.type==="histogramy"&&"xbins"in r&&!("ybins"in r)){r.ybins=r.xbins;delete r.xbins}if(r.error_y&&"opacity"in r.error_y){var n=C.defaults;var i=r.error_y.color||(w(r,"bar")?C.defaultLine:n[t%n.length]);r.error_y.color=C.addOpacity(C.rgb(i),C.opacity(i)*r.error_y.opacity);delete r.error_y.opacity}if("bardir"in r){if(r.bardir==="h"&&(w(r,"bar")||r.type.substr(0,9)==="histogram")){r.orientation="h";A.swapXYData(r)}delete r.bardir}if(r.type==="histogramy")A.swapXYData(r);if(r.type==="histogramx"||r.type==="histogramy"){r.type="histogram"}if("scl"in r&&!("colorscale"in r)){r.colorscale=r.scl;delete r.scl}if("reversescl"in r&&!("reversescale"in r)){r.reversescale=r.reversescl;delete r.reversescl}if(r.xaxis)r.xaxis=D(r.xaxis,"x");if(r.yaxis)r.yaxis=D(r.yaxis,"y");if(w(r,"gl3d")&&r.scene){r.scene=L.subplotsRegistry.gl3d.cleanId(r.scene)}if(!w(r,"pie-like")&&!w(r,"bar-like")){if(Array.isArray(r.textposition)){for(a=0;a<r.textposition.length;a++){r.textposition[a]=M(r.textposition[a])}}else if(r.textposition){r.textposition=M(r.textposition)}}var o=_.getModule(r);if(o&&o.colorbar){var s=o.colorbar.container;var l=s?r[s]:r;if(l&&l.colorscale){if(l.colorscale==="YIGnBu")l.colorscale="YlGnBu";if(l.colorscale==="YIOrRd")l.colorscale="YlOrRd"}}if(r.type==="surface"&&E.isPlainObject(r.contours)){var u=["x","y","z"];for(a=0;a<u.length;a++){var c=r.contours[u[a]];if(!E.isPlainObject(c))continue;if(c.highlightColor){c.highlightcolor=c.highlightColor;delete c.highlightColor}if(c.highlightWidth){c.highlightwidth=c.highlightWidth;delete c.highlightWidth}}}if(r.type==="candlestick"||r.type==="ohlc"){var f=(r.increasing||{}).showlegend!==false;var d=(r.decreasing||{}).showlegend!==false;var v=T(r.increasing);var p=T(r.decreasing);if(v!==false&&p!==false){var h=k(v,p,f,d);if(h)r.name=h}else if((v||p)&&!r.name){r.name=v||p}}if(Array.isArray(r.transforms)){var m=r.transforms;for(a=0;a<m.length;a++){var g=m[a];if(!E.isPlainObject(g))continue;switch(g.type){case"filter":if(g.filtersrc){g.target=g.filtersrc;delete g.filtersrc}if(g.calendar){if(!g.valuecalendar){g.valuecalendar=g.calendar}delete g.calendar}break;case"groupby":g.styles=g.styles||g.style;if(g.styles&&!Array.isArray(g.styles)){var y=g.styles;var x=Object.keys(y);g.styles=[];for(var b=0;b<x.length;b++){g.styles.push({target:x[b],value:y[x[b]]})}}break}}}if(P(r,"line"))delete r.line;if("marker"in r){if(P(r.marker,"line"))delete r.marker.line;if(P(r,"marker"))delete r.marker}C.clean(r);if(r.autobinx){delete r.autobinx;delete r.xbins}if(r.autobiny){delete r.autobiny;delete r.ybins}I(r);if(r.colorbar)I(r.colorbar);if(r.marker&&r.marker.colorbar)I(r.marker.colorbar);if(r.line&&r.line.colorbar)I(r.line.colorbar);if(r.aaxis)I(r.aaxis);if(r.baxis)I(r.baxis)}};function T(e){if(!E.isPlainObject(e))return false;var t=e.name;delete e.name;delete e.showlegend;return(typeof t==="string"||typeof t==="number")&&String(t)}function k(e,t,r,a){if(r&&!a)return e;if(a&&!r)return t;if(!e.trim())return t;if(!t.trim())return e;var n=Math.min(e.length,t.length);var i;for(i=0;i<n;i++){if(e.charAt(i)!==t.charAt(i))break}var o=e.substr(0,i);return o.trim()}function M(e){var t="middle";var r="center";if(typeof e==="string"){if(e.indexOf("top")!==-1)t="top";else if(e.indexOf("bottom")!==-1)t="bottom";if(e.indexOf("left")!==-1)r="left";else if(e.indexOf("right")!==-1)r="right"}return t+" "+r}function P(e,t){return t in e&&typeof e[t]==="object"&&Object.keys(e[t]).length===0}A.swapXYData=function(e){var t;E.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]);if(Array.isArray(e.z)&&Array.isArray(e.z[0])){if(e.transpose)delete e.transpose;else e.transpose=true}if(e.error_x&&e.error_y){var r=e.error_y;var a="copy_ystyle"in r?r.copy_ystyle:!(r.color||r.thickness||r.width);E.swapAttrs(e,["error_?.copy_ystyle"]);if(a){E.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}}if(typeof e.hoverinfo==="string"){var n=e.hoverinfo.split("+");for(t=0;t<n.length;t++){if(n[t]==="x")n[t]="y";else if(n[t]==="y")n[t]="x"}e.hoverinfo=n.join("+")}};A.coerceTraceIndices=function(e,t){if(c(t)){return[t]}else if(!Array.isArray(t)||!t.length){return e.data.map(function(e,t){return t})}else if(Array.isArray(t)){var r=[];for(var a=0;a<t.length;a++){if(E.isIndex(t[a],e.data.length)){r.push(t[a])}else{E.warn("trace index (",t[a],") is not a number or is out of bounds")}}return r}return t};A.manageArrayContainers=function(e,t,r){var a=e.obj;var n=e.parts;var i=n.length;var o=n[i-1];var s=c(o);if(s&&t===null){var l=n.slice(0,i-1).join(".");var u=E.nestedProperty(a,l).get();u.splice(o,1)}else if(s&&e.get()===undefined){if(e.get()===undefined)r[e.astr]=null;e.set(t)}else{e.set(t)}};var a=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function n(e){var t=e.search(a);if(t>0)return e.substr(0,t)}A.hasParent=function(e,t){var r=n(t);while(r){if(r in e)return true;r=n(r)}return false};var d=["x","y","z"];A.clearAxisTypes=function(e,t,r){for(var a=0;a<t.length;a++){var n=e._fullData[a];for(var i=0;i<3;i++){var o=f(e,n,d[i]);if(o&&o.type!=="log"){var s=o._name;var l=o._id.substr(1);if(l.substr(0,5)==="scene"){if(r[l]!==undefined)continue;s=l+"."+s}var u=s+".type";if(r[s]===undefined&&r[u]===undefined){E.nestedProperty(e.layout,u).set(null)}}}}}},{"../components/color":100,"../lib":230,"../plots/cartesian/axis_ids":280,"../plots/plots":311,"../registry":313,"fast-isnumeric":15,"gl-mat4/fromQuat":21}],260:[function(e,t,r){"use strict";var a=e("./plot_api");r._doPlot=a._doPlot;r.newPlot=a.newPlot;r.restyle=a.restyle;r.relayout=a.relayout;r.redraw=a.redraw;r.update=a.update;r._guiRestyle=a._guiRestyle;r._guiRelayout=a._guiRelayout;r._guiUpdate=a._guiUpdate;r._storeDirectGUIEdit=a._storeDirectGUIEdit;r.react=a.react;r.extendTraces=a.extendTraces;r.prependTraces=a.prependTraces;r.addTraces=a.addTraces;r.deleteTraces=a.deleteTraces;r.moveTraces=a.moveTraces;r.purge=a.purge;r.addFrames=a.addFrames;r.deleteFrames=a.deleteFrames;r.animate=a.animate;r.setPlotConfig=a.setPlotConfig;r.toImage=e("./to_image");r.validate=e("./validate");r.downloadImage=e("../snapshot/download");var n=e("./template_api");r.makeTemplate=n.makeTemplate;r.validateTemplate=n.validateTemplate},{"../snapshot/download":315,"./plot_api":262,"./template_api":267,"./to_image":268,"./validate":269}],261:[function(e,t,r){"use strict";var a=e("../lib/is_plain_object");var C=e("../lib/noop");var D=e("../lib/loggers");var O=e("../lib/search").sorterAsc;var I=e("../registry");r.containerArrayMatch=e("./container_array_match");var P=r.isAddVal=function e(t){return t==="add"||a(t)};var R=r.isRemoveVal=function e(t){return t===null||t==="remove"};r.applyContainerArrayChanges=function e(t,r,a,n,i){var o=r.astr;var s=I.getComponentMethod(o,"supplyLayoutDefaults");var l=I.getComponentMethod(o,"draw");var u=I.getComponentMethod(o,"drawOne");var c=n.replot||n.recalc||s===C||l===C;var f=t.layout;var d=t._fullLayout;if(a[""]){if(Object.keys(a).length>1){D.warn("Full array edits are incompatible with other edits",o)}var v=a[""][""];if(R(v))r.set(null);else if(Array.isArray(v))r.set(v);else{D.warn("Unrecognized full array edit value",o,v);return true}if(c)return false;s(f,d);l(t);return true}var p=Object.keys(a).map(Number).sort(O);var h=r.get();var m=h||[];var g=i(d,o).get();var y=[];var x=-1;var b=m.length;var _;var w;var T;var k;var M;var A;var S,E;for(_=0;_<p.length;_++){T=p[_];k=a[T];M=Object.keys(k);A=k[""],S=P(A);if(T<0||T>m.length-(S?0:1)){D.warn("index out of range",o,T);continue}if(A!==undefined){if(M.length>1){D.warn("Insertion & removal are incompatible with edits to the same index.",o,T)}if(R(A)){y.push(T)}else if(S){if(A==="add")A={};m.splice(T,0,A);if(g)g.splice(T,0,{})}else{D.warn("Unrecognized full object edit value",o,T,A)}if(x===-1)x=T}else{for(w=0;w<M.length;w++){E=o+"["+T+"].";i(m[T],M[w],E).set(k[M[w]])}}}for(_=y.length-1;_>=0;_--){m.splice(y[_],1);if(g)g.splice(y[_],1)}if(!m.length)r.set(null);else if(!h)r.set(m);if(c)return false;s(f,d);if(u!==C){var L;if(x===-1){L=p}else{b=Math.max(m.length,b);L=[];for(_=0;_<p.length;_++){T=p[_];if(T>=x)break;L.push(T)}for(_=x;_<b;_++){L.push(_)}}for(_=0;_<L.length;_++){u(t,L[_])}}else l(t);return true}},{"../lib/is_plain_object":231,"../lib/loggers":234,"../lib/noop":239,"../lib/search":249,"../registry":313,"./container_array_match":257}],262:[function(e,t,C){"use strict";var k=e("@plotly/d3");var v=e("fast-isnumeric");var f=e("has-hover");var K=e("../lib");var Q=K.nestedProperty;var M=e("../lib/events");var T=e("../lib/queue");var ee=e("../registry");var te=e("./plot_schema");var $=e("../plots/plots");var re=e("../plots/cartesian/axes");var A=e("../components/drawing");var a=e("../components/color");var S=e("../plots/cartesian/graph_interact").initInteractions;var o=e("../constants/xmlns_namespaces");var r=e("../plots/cartesian/select").clearSelect;var d=e("./plot_config").dfltConfig;var ae=e("./manage_arrays");var ne=e("./helpers");var D=e("./subroutines");var ie=e("./edit_types");var oe=e("../plots/cartesian/constants").AX_NAME_PATTERN;var E=0;var L=5;function n(n,e,t,r){var a;n=K.getGraphDiv(n);M.init(n);if(K.isPlainObject(e)){var i=e;e=i.data;t=i.layout;r=i.config;a=i.frames}var o=M.triggerHandler(n,"plotly_beforeplot",[e,t,r]);if(o===false)return Promise.reject();if(!e&&!t&&!K.isPlotDiv(n)){K.warn("Calling _doPlot as if redrawing "+"but this container doesn't yet have a plot.",n)}function s(){if(a){return C.addFrames(n,a)}}I(n,r);if(!t)t={};k.select(n).classed("js-plotly-plot",true);A.makeTester();if(!Array.isArray(n._promises))n._promises=[];var l=(n.data||[]).length===0&&Array.isArray(e);if(Array.isArray(e)){ne.cleanData(e);if(l)n.data=e;else n.data.push.apply(n.data,e);n.empty=false}if(!n.layout||l){n.layout=ne.cleanLayout(t)}$.supplyDefaults(n);var u=n._fullLayout;var c=u._has("cartesian");u._replotting=true;if(l||u._shouldCreateBgLayer){Le(n);if(u._shouldCreateBgLayer){delete u._shouldCreateBgLayer}}A.initGradients(n);A.initPatterns(n);if(l)re.saveShowSpikeInitial(n);var f=!n.calcdata||n.calcdata.length!==(n._fullData||[]).length;if(f)$.doCalcdata(n);for(var d=0;d<n.calcdata.length;d++){n.calcdata[d][0].trace=n._fullData[d]}if(n._context.responsive){if(!n._responsiveChartHandler){n._responsiveChartHandler=function(){if(!K.isHidden(n))$.resize(n)};window.addEventListener("resize",n._responsiveChartHandler)}}else{K.clearResponsive(n)}var v=K.extendFlat({},u._size);var p=0;function h(){var e=u._basePlotModules;for(var t=0;t<e.length;t++){if(e[t].drawFramework){e[t].drawFramework(n)}}if(!u._glcanvas&&u._has("gl")){u._glcanvas=u._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:true,pick:false},{key:"focusLayer",context:false,pick:false},{key:"pickLayer",context:false,pick:true}],function(e){return e.key});u._glcanvas.enter().append("canvas").attr("class",function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"})}if(u._glcanvas){u._glcanvas.attr("width",u.width).attr("height",u.height);var r=u._glcanvas.data()[0].regl;if(r){if(Math.floor(u.width)!==r._gl.drawingBufferWidth||Math.floor(u.height)!==r._gl.drawingBufferHeight){var a="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(p){K.error(a)}else{K.log(a+" Clearing graph and plotting again.");$.cleanPlot([],{},n._fullData,u);$.supplyDefaults(n);u=n._fullLayout;$.doCalcdata(n);p++;return h()}}}}if(u.modebar.orientation==="h"){u._modebardiv.style("height",null).style("width","100%")}else{u._modebardiv.style("width",null).style("height",u.height+"px")}return $.previousPromises(n)}function m(){$.clearAutoMarginIds(n);D.drawMarginPushers(n);re.allowAutoMargin(n);if(u._has("pie")){var e=n._fullData;for(var t=0;t<e.length;t++){var r=e[t];if(r.type==="pie"&&r.automargin){$.allowAutoMargin(n,"pie."+r.uid+".automargin")}}}$.doAutoMargin(n);return $.previousPromises(n)}function g(){if(!$.didMarginChange(v,u._size))return;return K.syncOrAsync([m,D.layoutStyles],n)}function y(){if(!f){x();return}return K.syncOrAsync([ee.getComponentMethod("shapes","calcAutorange"),ee.getComponentMethod("annotations","calcAutorange"),x],n)}function x(){if(n._transitioning)return;D.doAutoRangeAndConstraints(n);if(l)re.saveRangeInitial(n);ee.getComponentMethod("rangeslider","calcAutorange")(n)}function b(){return re.draw(n,l?"":"redraw")}var _=[$.previousPromises,s,h,m,g];if(c)_.push(y);_.push(D.layoutStyles);if(c){_.push(b,function e(t){if(t._fullLayout._insideTickLabelsAutorange){q(t,t._fullLayout._insideTickLabelsAutorange).then(function(){t._fullLayout._insideTickLabelsAutorange=undefined})}})}_.push(D.drawData,D.finalDraw,S,$.addLinks,$.rehover,$.redrag,$.doAutoMargin,w,$.previousPromises);function w(e){if(e._fullLayout._insideTickLabelsAutorange){if(l)re.saveRangeInitial(e,true)}}var T=K.syncOrAsync(_,n);if(!T||!T.then)T=Promise.resolve();return T.then(function(){O(n);return n})}function O(e){var t=e._fullLayout;if(t._redrawFromAutoMarginCount){t._redrawFromAutoMarginCount--}else{e.emit("plotly_afterplot")}}function i(e){return K.extendFlat(d,e)}function p(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){K.error(e)}}function h(e,t){var r=a.combine(t,"white");p(e,r)}function I(e,t){if(!e._context){e._context=K.extendDeep({},d);var r=k.select("base");e._context._baseUrl=r.size()&&r.attr("href")?window.location.href.split("#")[0]:""}var a=e._context;var n,i,o;if(t){i=Object.keys(t);for(n=0;n<i.length;n++){o=i[n];if(o==="editable"||o==="edits")continue;if(o in a){if(o==="setBackground"&&t[o]==="opaque"){a[o]=h}else{a[o]=t[o]}}}if(t.plot3dPixelRatio&&!a.plotGlPixelRatio){a.plotGlPixelRatio=a.plot3dPixelRatio}var s=t.editable;if(s!==undefined){a.editable=s;i=Object.keys(a.edits);for(n=0;n<i.length;n++){a.edits[i[n]]=s}}if(t.edits){i=Object.keys(t.edits);for(n=0;n<i.length;n++){o=i[n];if(o in a.edits){a.edits[o]=t.edits[o]}}}a._exportedPlot=t._exportedPlot}if(a.staticPlot){a.editable=false;a.edits={};a.autosizable=false;a.scrollZoom=false;a.doubleClick=false;a.showTips=false;a.showLink=false;a.displayModeBar=false}if(a.displayModeBar==="hover"&&!f){a.displayModeBar=true}if(a.setBackground==="transparent"||typeof a.setBackground!=="function"){a.setBackground=p}a._hasZeroHeight=a._hasZeroHeight||e.clientHeight===0;a._hasZeroWidth=a._hasZeroWidth||e.clientWidth===0;var l=a.scrollZoom;var u=a._scrollZoom={};if(l===true){u.cartesian=1;u.gl3d=1;u.geo=1;u.mapbox=1}else if(typeof l==="string"){var c=l.split("+");for(n=0;n<c.length;n++){u[c[n]]=1}}else if(l!==false){u.gl3d=1;u.geo=1;u.mapbox=1}}function s(e){e=K.getGraphDiv(e);if(!K.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e)}ne.cleanData(e.data);ne.cleanLayout(e.layout);e.calcdata=undefined;return C._doPlot(e).then(function(){e.emit("plotly_redraw");return e})}function l(e,t,r,a){e=K.getGraphDiv(e);$.cleanPlot([],{},e._fullData||[],e._fullLayout||{});$.purge(e);return C._doPlot(e,t,r,a)}function m(e,t){var r=t+1;var a=[];var n;var i;for(n=0;n<e.length;n++){i=e[n];if(i<0){a.push(r+i)}else{a.push(i)}}return a}function c(e,t,r){var a,n;for(a=0;a<t.length;a++){n=t[a];if(n!==parseInt(n,10)){throw new Error("all values in "+r+" must be integers")}if(n>=e.data.length||n<-e.data.length){throw new Error(r+" must be valid indices for gd.data.")}if(t.indexOf(n,a+1)>-1||n>=0&&t.indexOf(-e.data.length+n)>-1||n<0&&t.indexOf(e.data.length+n)>-1){throw new Error("each index in "+r+" must be unique.")}}}function g(e,t,r){if(!Array.isArray(e.data)){throw new Error("gd.data must be an array.")}if(typeof t==="undefined"){throw new Error("currentIndices is a required argument.")}else if(!Array.isArray(t)){t=[t]}c(e,t,"currentIndices");if(typeof r!=="undefined"&&!Array.isArray(r)){r=[r]}if(typeof r!=="undefined"){c(e,r,"newIndices")}if(typeof r!=="undefined"&&t.length!==r.length){throw new Error("current and new indices must be of equal length.")}}function y(e,t,r){var a,n;if(!Array.isArray(e.data)){throw new Error("gd.data must be an array.")}if(typeof t==="undefined"){throw new Error("traces must be defined.")}if(!Array.isArray(t)){t=[t]}for(a=0;a<t.length;a++){n=t[a];if(typeof n!=="object"||(Array.isArray(n)||n===null)){throw new Error("all values in traces array must be non-array objects")}}if(typeof r!=="undefined"&&!Array.isArray(r)){r=[r]}if(typeof r!=="undefined"&&r.length!==t.length){throw new Error("if indices is specified, traces.length must equal indices.length")}}function x(e,t,r,a){var n=K.isPlainObject(a);if(!Array.isArray(e.data)){throw new Error("gd.data must be an array")}if(!K.isPlainObject(t)){throw new Error("update must be a key:value object")}if(typeof r==="undefined"){throw new Error("indices must be an integer or array of integers")}c(e,r,"indices");for(var i in t){if(!Array.isArray(t[i])||t[i].length!==r.length){throw new Error("attribute "+i+" must be an array of length equal to indices array length")}if(n&&(!(i in a)||!Array.isArray(a[i])||a[i].length!==t[i].length)){throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 "+"corrispondence with the keys and number of traces in the update object")}}}function b(e,t,r,a){var n=K.isPlainObject(a);var i=[];var o,s,l,u,c;if(!Array.isArray(r))r=[r];r=m(r,e.data.length-1);for(var f in t){for(var d=0;d<r.length;d++){o=e.data[r[d]];l=Q(o,f);s=l.get();u=t[f][d];if(!K.isArrayOrTypedArray(u)){throw new Error("attribute: "+f+" index: "+d+" must be an array")}if(!K.isArrayOrTypedArray(s)){throw new Error("cannot extend missing or non-array attribute: "+f)}if(s.constructor!==u.constructor){throw new Error("cannot extend array with an array of a different type: "+f)}c=n?a[f][d]:a;if(!v(c))c=-1;i.push({prop:l,target:s,insert:u,maxp:Math.floor(c)})}}return i}function u(e,t,r,a,n){x(e,t,r,a);var i=b(e,t,r,a);var o={};var s={};for(var l=0;l<i.length;l++){var u=i[l].prop;var c=i[l].maxp;var f=n(i[l].target,i[l].insert,c);u.set(f[0]);if(!Array.isArray(o[u.astr]))o[u.astr]=[];o[u.astr].push(f[1]);if(!Array.isArray(s[u.astr]))s[u.astr]=[];s[u.astr].push(i[l].target.length)}return{update:o,maxPoints:s}}function _(e,t){var r=new e.constructor(e.length+t.length);r.set(e);r.set(t,e.length);return r}function w(e,t,r,a){e=K.getGraphDiv(e);function n(e,t,r){var a,n;if(K.isTypedArray(e)){if(r<0){var i=new e.constructor(0);var o=_(e,t);if(r<0){a=o;n=i}else{a=i;n=o}}else{a=new e.constructor(r);n=new e.constructor(e.length+t.length-r);if(r===t.length){a.set(t);n.set(e)}else if(r<t.length){var s=t.length-r;a.set(t.subarray(s));n.set(e);n.set(t.subarray(0,s),e.length)}else{var l=r-t.length;var u=e.length-l;a.set(e.subarray(u));a.set(t,l);n.set(e.subarray(0,u))}}}else{a=e.concat(t);n=r>=0&&r<a.length?a.splice(0,a.length-r):[]}return[a,n]}var i=u(e,t,r,a,n);var o=C.redraw(e);var s=[e,i.update,r,i.maxPoints];T.add(e,C.prependTraces,s,w,arguments);return o}function P(e,t,r,a){e=K.getGraphDiv(e);function n(e,t,r){var a,n;if(K.isTypedArray(e)){if(r<=0){var i=new e.constructor(0);var o=_(t,e);if(r<0){a=o;n=i}else{a=i;n=o}}else{a=new e.constructor(r);n=new e.constructor(e.length+t.length-r);if(r===t.length){a.set(t);n.set(e)}else if(r<t.length){var s=t.length-r;a.set(t.subarray(0,s));n.set(t.subarray(s));n.set(e,s)}else{var l=r-t.length;a.set(t);a.set(e.subarray(0,l),t.length);n.set(e.subarray(l))}}}else{a=t.concat(e);n=r>=0&&r<a.length?a.splice(r,a.length):[]}return[a,n]}var i=u(e,t,r,a,n);var o=C.redraw(e);var s=[e,i.update,r,i.maxPoints];T.add(e,C.extendTraces,s,P,arguments);return o}function R(t,r,e){t=K.getGraphDiv(t);var a=[];var n=C.deleteTraces;var i=R;var o=[t,a];var s=[t,r];var l;var u;y(t,r,e);if(!Array.isArray(r)){r=[r]}r=r.map(function(e){return K.extendFlat({},e)});ne.cleanData(r);for(l=0;l<r.length;l++){t.data.push(r[l])}for(l=0;l<r.length;l++){a.push(-r.length+l)}if(typeof e==="undefined"){u=C.redraw(t);T.add(t,n,o,i,s);return u}if(!Array.isArray(e)){e=[e]}try{g(t,a,e)}catch(e){t.data.splice(t.data.length-r.length,r.length);throw e}T.startSequence(t);T.add(t,n,o,i,s);u=C.moveTraces(t,a,e);T.stopSequence(t);return u}function N(e,t){e=K.getGraphDiv(e);var r=[];var a=C.addTraces;var n=N;var i=[e,r,t];var o=[e,t];var s;var l;if(typeof t==="undefined"){throw new Error("indices must be an integer or array of integers.")}else if(!Array.isArray(t)){t=[t]}c(e,t,"indices");t=m(t,e.data.length-1);t.sort(K.sorterDes);for(s=0;s<t.length;s+=1){l=e.data.splice(t[s],1)[0];r.push(l)}var u=C.redraw(e);T.add(e,a,i,n,o);return u}function z(e,t,r){e=K.getGraphDiv(e);var a=[];var n=[];var i=z;var o=z;var s=[e,r,t];var l=[e,t,r];var u;g(e,t,r);t=Array.isArray(t)?t:[t];if(typeof r==="undefined"){r=[];for(u=0;u<t.length;u++){r.push(-t.length+u)}}r=Array.isArray(r)?r:[r];t=m(t,e.data.length-1);r=m(r,e.data.length-1);for(u=0;u<e.data.length;u++){if(t.indexOf(u)===-1){a.push(e.data[u])}}for(u=0;u<t.length;u++){n.push({newIndex:r[u],trace:e.data[t[u]]})}n.sort(function(e,t){return e.newIndex-t.newIndex});for(u=0;u<n.length;u+=1){a.splice(n[u].newIndex,0,n[u].trace)}e.data=a;var c=C.redraw(e);T.add(e,i,s,o,l);return c}function F(e,t,r,a){e=K.getGraphDiv(e);ne.clearPromiseQueue(e);var n={};if(typeof t==="string")n[t]=r;else if(K.isPlainObject(t)){n=K.extendFlat({},t);if(a===undefined)a=r}else{K.warn("Restyle fail.",t,r,a);return Promise.reject()}if(Object.keys(n).length)e.changed=true;var i=ne.coerceTraceIndices(e,a);var o=B(e,n,i);var s=o.flags;if(s.calc)e.calcdata=undefined;if(s.clearAxisTypes)ne.clearAxisTypes(e,i,{});var l=[];if(s.fullReplot){l.push(C._doPlot)}else{l.push($.previousPromises);$.supplyDefaults(e);if(s.markerSize){$.doCalcdata(e);Y(l)}if(s.style)l.push(D.doTraceStyle);if(s.colorbars)l.push(D.doColorBars);l.push(O)}l.push($.rehover,$.redrag);T.add(e,F,[e,o.undoit,o.traces],F,[e,o.redoit,o.traces]);var u=K.syncOrAsync(l,e);if(!u||!u.then)u=Promise.resolve();return u.then(function(){e.emit("plotly_restyle",o.eventData);return e})}function se(e){if(e===undefined)return null;return e}function le(o,e){if(!e)return Q;return function(e,r,a){var n=Q(e,r);var i=n.set;n.set=function(e){var t=(a||"")+r;j(t,n.get(),e,o);i(e)};return n}}function j(e,t,r,a){if(Array.isArray(t)||Array.isArray(r)){var n=Array.isArray(t)?t:[];var i=Array.isArray(r)?r:[];var o=Math.max(n.length,i.length);for(var s=0;s<o;s++){j(e+"["+s+"]",n[s],i[s],a)}}else if(K.isPlainObject(t)||K.isPlainObject(r)){var l=K.isPlainObject(t)?t:{};var u=K.isPlainObject(r)?r:{};var c=K.extendFlat({},l,u);for(var f in c){j(e+"."+f,l[f],u[f],a)}}else if(a[e]===undefined){a[e]=se(t)}}function H(e,t,r){for(var a in r){var n=Q(e,a);j(a,n.get(),r[a],t)}}function B(o,s,l){var u=o._fullLayout;var a=o._fullData;var c=o.data;var f=u._guiEditing;var d=le(u._preGUI,f);var e=K.extendDeepAll({},s);var t;ue(s);var r=ie.traceFlags();var n={};var v={};var i;function p(){return l.map(function(){return undefined})}function h(e){var t=re.id2name(e);if(i.indexOf(t)===-1)i.push(t)}function m(e){return"LAYOUT"+e+".autorange"}function g(e){return"LAYOUT"+e+".range"}function y(e){for(var t=e;t<a.length;t++){if(a[t]._input===c[e])return a[t]}}function x(e,t,r){if(Array.isArray(e)){e.forEach(function(e){x(e,t,r)});return}if(e in s||ne.hasParent(s,e))return;var a;if(e.substr(0,6)==="LAYOUT"){a=d(o.layout,e.replace("LAYOUT",""))}else{var n=l[r];var i=u._tracePreGUI[y(n)._fullInput.uid];a=le(i,f)(c[n],e)}if(!(e in v)){v[e]=p()}if(v[e][r]===undefined){v[e][r]=se(a.get())}if(t!==undefined){a.set(t)}}function b(t){return function(e){return a[e][t]}}function _(r){return function(e,t){return e===false?a[l[t]][r]:null}}for(var w in s){if(ne.hasParent(s,w)){throw new Error("cannot set "+w+" and a parent attribute simultaneously")}var T=s[w];var k;var M;var A;var S;var E;var L;if(w==="autobinx"||w==="autobiny"){w=w.charAt(w.length-1)+"bins";if(Array.isArray(T))T=T.map(_(w));else if(T===false)T=l.map(b(w));else T=null}n[w]=T;if(w.substr(0,6)==="LAYOUT"){A=d(o.layout,w.replace("LAYOUT",""));v[w]=[se(A.get())];A.set(Array.isArray(T)?T[0]:T);r.calc=true;continue}v[w]=p();for(t=0;t<l.length;t++){k=c[l[t]];M=y(l[t]);var C=u._tracePreGUI[M._fullInput.uid];A=le(C,f)(k,w);S=A.get();E=Array.isArray(T)?T[t%T.length]:T;if(E===undefined)continue;var D=A.parts[A.parts.length-1];var O=w.substr(0,w.length-D.length-1);var I=O?O+".":"";var P=O?Q(M,O).get():M;L=te.getTraceValObject(M,A.parts);if(L&&L.impliedEdits&&E!==null){for(var R in L.impliedEdits){x(K.relativeAttr(w,R),L.impliedEdits[R],t)}}else if((D==="thicknessmode"||D==="lenmode")&&S!==E&&(E==="fraction"||E==="pixels")&&P){var N=u._size;var z=P.orient;var F=z==="top"||z==="bottom";if(D==="thicknessmode"){var j=F?N.h:N.w;x(I+"thickness",P.thickness*(E==="fraction"?1/j:j),t)}else{var H=F?N.w:N.h;x(I+"len",P.len*(E==="fraction"?1/H:H),t)}}else if(w==="type"&&(E==="pie"!==(S==="pie")||E==="funnelarea"!==(S==="funnelarea"))){var B="x";var q="y";if((E==="bar"||S==="bar")&&k.orientation==="h"){B="y";q="x"}K.swapAttrs(k,["?","?src"],"labels",B);K.swapAttrs(k,["d?","?0"],"label",B);K.swapAttrs(k,["?","?src"],"values",q);if(S==="pie"||S==="funnelarea"){Q(k,"marker.color").set(Q(k,"marker.colors").get());u._pielayer.selectAll("g.trace").remove()}else if(ee.traceIs(k,"cartesian")){Q(k,"marker.colors").set(Q(k,"marker.color").get())}}v[w][t]=se(S);var U=["swapxy","swapxyaxes","orientation","orientationaxes"];if(U.indexOf(w)!==-1){if(w==="orientation"){A.set(E);var Y=k.x&&!k.y?"h":"v";if((A.get()||Y)===M.orientation){continue}}else if(w==="orientationaxes"){k.orientation={v:"h",h:"v"}[M.orientation]}ne.swapXYData(k);r.calc=r.clearAxisTypes=true}else if($.dataArrayContainers.indexOf(A.parts[0])!==-1){ne.manageArrayContainers(A,E,v);r.calc=true}else{if(L){if(L.arrayOk&&!ee.traceIs(M,"regl")&&(K.isArrayOrTypedArray(E)||K.isArrayOrTypedArray(S))){r.calc=true}else ie.update(r,L)}else{r.calc=true}A.set(E)}}if(["swapxyaxes","orientationaxes"].indexOf(w)!==-1){re.swap(o,l)}if(w==="orientationaxes"){var V=Q(o.layout,"hovermode");var G=V.get();if(G==="x"){V.set("y")}else if(G==="y"){V.set("x")}else if(G==="x unified"){V.set("y unified")}else if(G==="y unified"){V.set("x unified")}}if(["orientation","type"].indexOf(w)!==-1){i=[];for(t=0;t<l.length;t++){var W=c[l[t]];if(ee.traceIs(W,"cartesian")){h(W.xaxis||"x");h(W.yaxis||"y")}}x(i.map(m),true,0);x(i.map(g),[0,1],0)}}if(r.calc||r.plot){r.fullReplot=true}return{flags:r,undoit:v,redoit:n,traces:l,eventData:K.extendDeepNoArrays([],[e,l])}}function ue(r){var e=K.counterRegex("axis",".title",false,false);var t=/colorbar\.title$/;var a=Object.keys(r);var n,i,o;for(n=0;n<a.length;n++){i=a[n];o=r[i];if((i==="title"||e.test(i)||t.test(i))&&(typeof o==="string"||typeof o==="number")){s(i,i.replace("title","title.text"))}else if(i.indexOf("titlefont")>-1){s(i,i.replace("titlefont","title.font"))}else if(i.indexOf("titleposition")>-1){s(i,i.replace("titleposition","title.position"))}else if(i.indexOf("titleside")>-1){s(i,i.replace("titleside","title.side"))}else if(i.indexOf("titleoffset")>-1){s(i,i.replace("titleoffset","title.offset"))}}function s(e,t){r[t]=r[e];delete r[e]}}function q(e,t,r){e=K.getGraphDiv(e);ne.clearPromiseQueue(e);var a={};if(typeof t==="string"){a[t]=r}else if(K.isPlainObject(t)){a=K.extendFlat({},t)}else{K.warn("Relayout fail.",t,r);return Promise.reject()}if(Object.keys(a).length)e.changed=true;var n=V(e,a);var i=n.flags;if(i.calc)e.calcdata=undefined;var o=[$.previousPromises];if(i.layoutReplot){o.push(D.layoutReplot)}else if(Object.keys(a).length){U(e,i,n)||$.supplyDefaults(e);if(i.legend)o.push(D.doLegend);if(i.layoutstyle)o.push(D.layoutStyles);if(i.axrange)Y(o,n.rangesAltered);if(i.ticks)o.push(D.doTicksRelayout);if(i.modebar)o.push(D.doModeBar);if(i.camera)o.push(D.doCamera);if(i.colorbars)o.push(D.doColorBars);o.push(O)}o.push($.rehover,$.redrag);T.add(e,q,[e,n.undoit],q,[e,n.redoit]);var s=K.syncOrAsync(o,e);if(!s||!s.then)s=Promise.resolve(e);return s.then(function(){e.emit("plotly_relayout",n.eventData);return e})}function U(e,t,r){var a=e._fullLayout;if(!t.axrange)return false;for(var n in t){if(n!=="axrange"&&t[n])return false}for(var i in r.rangesAltered){var o=re.id2name(i);var s=e.layout[o];var l=a[o];l.autorange=s.autorange;if(s.range){l.range=s.range.slice()}l.cleanRange();if(l._matchGroup){for(var u in l._matchGroup){if(u!==i){var c=a[re.id2name(u)];c.autorange=l.autorange;c.range=l.range.slice();c._input.range=l.range.slice()}}}}return true}function Y(e,o){var t=o?function(e){var t=[];var r=true;for(var a in o){var n=re.getFromId(e,a);t.push(a);if((n.ticklabelposition||"").indexOf("inside")!==-1){if(n._anchorAxis){t.push(n._anchorAxis._id)}}if(n._matchGroup){for(var i in n._matchGroup){if(!o[i]){t.push(i)}}}if(n.automargin)r=false}return re.draw(e,t,{skipTitle:r})}:function(e){return re.draw(e,"redraw")};e.push(r,D.doAutoRangeAndConstraints,t,D.drawData,D.finalDraw)}var ce=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/;var fe=/^[xyz]axis[0-9]*\.autorange$/;var de=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function V(e,a){var n=e.layout;var t=e._fullLayout;var r=t._guiEditing;var i=le(t._preGUI,r);var o=Object.keys(a);var s=re.list(e);var l=K.extendDeepAll({},a);var u={};var c,f,d;ue(a);o=Object.keys(a);for(f=0;f<o.length;f++){if(o[f].indexOf("allaxes")===0){for(d=0;d<s.length;d++){var v=s[d]._id.substr(1);var p=v.indexOf("scene")!==-1?v+".":"";var h=o[f].replace("allaxes",p+s[d]._name);if(!a[h])a[h]=a[o[f]]}delete a[o[f]]}}var m=ie.layoutFlags();var g={};var y={};function x(e,t){if(Array.isArray(e)){e.forEach(function(e){x(e,t)});return}if(e in a||ne.hasParent(a,e))return;var r=i(n,e);if(!(e in y)){y[e]=se(r.get())}if(t!==undefined)r.set(t)}var b={};var _;function w(e){var t=re.name2id(e.split(".")[0]);b[t]=1;return t}for(var T in a){if(ne.hasParent(a,T)){throw new Error("cannot set "+T+" and a parent attribute simultaneously")}var k=i(n,T);var M=a[T];var A=k.parts.length;var S=A-1;while(S>0&&typeof k.parts[S]!=="string")S--;var E=k.parts[S];var L=k.parts[S-1]+"."+E;var C=k.parts.slice(0,S).join(".");var D=Q(e.layout,C).get();var O=Q(t,C).get();var I=k.get();if(M===undefined)continue;g[T]=M;y[T]=E==="reverse"?M:se(I);var P=te.getLayoutValObject(t,k.parts);if(P&&P.impliedEdits&&M!==null){for(var R in P.impliedEdits){x(K.relativeAttr(T,R),P.impliedEdits[R])}}if(["width","height"].indexOf(T)!==-1){if(M){x("autosize",null);var N=T==="height"?"width":"height";x(N,t[N])}else{t[T]=e._initialAutoSize[T]}}else if(T==="autosize"){x("width",M?null:t.width);x("height",M?null:t.height)}else if(L.match(ce)){w(L);Q(t,C+"._inputRange").set(null)}else if(L.match(fe)){w(L);Q(t,C+"._inputRange").set(null);var z=Q(t,C).get();if(z._inputDomain){z._input.domain=z._inputDomain.slice()}}else if(L.match(de)){Q(t,C+"._inputDomain").set(null)}if(E==="type"){_=D;var F=O.type==="linear"&&M==="log";var j=O.type==="log"&&M==="linear";if(F||j){if(!_||!_.range){x(C+".autorange",true)}else if(!O.autorange){var H=_.range[0];var B=_.range[1];if(F){if(H<=0&&B<=0){x(C+".autorange",true)}if(H<=0)H=B/1e6;else if(B<=0)B=H/1e6;x(C+".range[0]",Math.log(H)/Math.LN10);x(C+".range[1]",Math.log(B)/Math.LN10)}else{x(C+".range[0]",Math.pow(10,H));x(C+".range[1]",Math.pow(10,B))}}else if(F){_.range=_.range[1]>_.range[0]?[1,2]:[2,1]}if(Array.isArray(t._subplots.polar)&&t._subplots.polar.length&&t[k.parts[0]]&&k.parts[1]==="radialaxis"){delete t[k.parts[0]]._subplot.viewInitial["radialaxis.range"]}ee.getComponentMethod("annotations","convertCoords")(e,O,M,x);ee.getComponentMethod("images","convertCoords")(e,O,M,x)}else{x(C+".autorange",true);x(C+".range",null)}Q(t,C+"._inputRange").set(null)}else if(E.match(oe)){var q=Q(t,T).get();var U=(M||{}).type;if(!U||U==="-")U="linear";ee.getComponentMethod("annotations","convertCoords")(e,q,U,x);ee.getComponentMethod("images","convertCoords")(e,q,U,x)}var Y=ae.containerArrayMatch(T);if(Y){c=Y.array;f=Y.index;var V=Y.property;var G=P||{editType:"calc"};if(f!==""&&V===""){if(ae.isAddVal(M)){y[T]=null}else if(ae.isRemoveVal(M)){y[T]=(Q(n,c).get()||[])[f]}else{K.warn("unrecognized full object value",a)}}ie.update(m,G);if(!u[c])u[c]={};var W=u[c][f];if(!W)W=u[c][f]={};W[V]=M;delete a[T]}else if(E==="reverse"){if(D.range)D.range.reverse();else{x(C+".autorange",true);D.range=[1,0]}if(O.autorange)m.calc=true;else m.plot=true}else{if(t._has("scatter-like")&&t._has("regl")&&(T==="dragmode"&&(M==="lasso"||M==="select")&&!(I==="lasso"||I==="select"))){m.plot=true}else if(t._has("gl2d")){m.plot=true}else if(P)ie.update(m,P);else m.calc=true;k.set(M)}}for(c in u){var $=ae.applyContainerArrayChanges(e,i(n,c),u[c],m,i);if(!$)m.plot=true}for(var Z in b){_=re.getFromId(e,Z);var X=_&&_._constraintGroup;if(X){m.calc=true;for(var J in X){if(!b[J]){re.getFromId(e,J)._constraintShrinkable=true}}}}if(ve(e)||a.height||a.width)m.plot=true;if(m.plot||m.calc){m.layoutReplot=true}return{flags:m,rangesAltered:b,undoit:y,redoit:g,eventData:l}}function ve(e){var t=e._fullLayout;var r=t.width;var a=t.height;if(e.layout.autosize)$.plotAutoSize(e,e.layout,t);return t.width!==r||t.height!==a}function G(e,t,r,a){e=K.getGraphDiv(e);ne.clearPromiseQueue(e);if(!K.isPlainObject(t))t={};if(!K.isPlainObject(r))r={};if(Object.keys(t).length)e.changed=true;if(Object.keys(r).length)e.changed=true;var n=ne.coerceTraceIndices(e,a);var i=B(e,K.extendFlat({},t),n);var o=i.flags;var s=V(e,K.extendFlat({},r));var l=s.flags;if(o.calc||l.calc)e.calcdata=undefined;if(o.clearAxisTypes)ne.clearAxisTypes(e,n,r);var u=[];if(l.layoutReplot){u.push(D.layoutReplot)}else if(o.fullReplot){u.push(C._doPlot)}else{u.push($.previousPromises);U(e,l,s)||$.supplyDefaults(e);if(o.style)u.push(D.doTraceStyle);if(o.colorbars||l.colorbars)u.push(D.doColorBars);if(l.legend)u.push(D.doLegend);if(l.layoutstyle)u.push(D.layoutStyles);if(l.axrange)Y(u,s.rangesAltered);if(l.ticks)u.push(D.doTicksRelayout);if(l.modebar)u.push(D.doModeBar);if(l.camera)u.push(D.doCamera);u.push(O)}u.push($.rehover,$.redrag);T.add(e,G,[e,i.undoit,s.undoit,i.traces],G,[e,i.redoit,s.redoit,i.traces]);var c=K.syncOrAsync(u,e);if(!c||!c.then)c=Promise.resolve(e);return c.then(function(){e.emit("plotly_update",{data:i.eventData,layout:s.eventData});return e})}function W(a){return function e(t){t._fullLayout._guiEditing=true;var r=a.apply(null,arguments);t._fullLayout._guiEditing=false;return r}}var Z=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}];var X=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function J(e,t){for(var r=0;r<t.length;r++){var a=t[r];var n=e.match(a.pattern);if(n){return{head:n[1],attr:a.attr}}}}function pe(e,t){var r=Q(t,e).get();if(r!==undefined)return r;var a=e.split(".");a.pop();while(a.length>1){a.pop();r=Q(t,a.join(".")+".uirevision").get();if(r!==undefined)return r}return t.uirevision}function he(e,t){for(var r=0;r<t.length;r++){if(t[r]._fullInput.uid===e)return r}return-1}function me(e,t,r){for(var a=0;a<t.length;a++){if(t[a].uid===e)return a}return!t[r]||t[r].uid?-1:r}function ge(e,t){var r=K.isPlainObject(e);var a=Array.isArray(e);if(r||a){return(r&&K.isPlainObject(t)||a&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t)}return e===t}function ye(e,t,r,a){var n=a._preGUI;var i,o,s,l,u,c,f,d;var v=[];var p={};for(i in n){u=J(i,Z);if(u){o=u.attr||u.head+".uirevision";s=Q(a,o).get();l=s&&pe(o,t);if(l&&l===s){c=n[i];if(c===null)c=undefined;f=Q(t,i);d=f.get();if(ge(d,c)){if(d===undefined&&i.substr(i.length-9)==="autorange"){v.push(i.substr(0,i.length-10))}f.set(se(Q(a,i).get()));continue}}}else{K.warn("unrecognized GUI edit: "+i)}delete n[i];if(i.substr(i.length-8,6)==="range["){p[i.substr(0,i.length-9)]=1}}for(var h=0;h<v.length;h++){var m=v[h];if(p[m]){var g=Q(t,m).get();if(g)delete g.autorange}}var y=a._tracePreGUI;for(var x in y){var b=y[x];var _=null;var w;for(i in b){if(!_){var T=he(x,r);if(T<0){delete y[x];break}var k=r[T];w=k._fullInput;var M=me(x,e,w.index);if(M<0){delete y[x];break}_=e[M]}u=J(i,X);if(u){if(u.attr){s=Q(a,u.attr).get();l=s&&pe(u.attr,t)}else{s=w.uirevision;l=_.uirevision;if(l===undefined)l=t.uirevision}if(l&&l===s){c=b[i];if(c===null)c=undefined;f=Q(_,i);d=f.get();if(ge(d,c)){f.set(se(Q(w,i).get()));continue}}}else{K.warn("unrecognized GUI edit: "+i+" in trace uid "+x)}delete b[i]}}}function xe(e,t,r,a){var n,i;function o(){return C.addFrames(e,n)}e=K.getGraphDiv(e);ne.clearPromiseQueue(e);var s=e._fullData;var l=e._fullLayout;if(!K.isPlotDiv(e)||!s||!l){i=C.newPlot(e,t,r,a)}else{if(K.isPlainObject(t)){var u=t;t=u.data;r=u.layout;a=u.config;n=u.frames}var c=false;if(a){var f=K.extendDeep({},e._context);e._context=undefined;I(e,a);c=Te(f,e._context)}e.data=t||[];ne.cleanData(e.data);e.layout=r||{};ne.cleanLayout(e.layout);ye(e.data,e.layout,s,l);$.supplyDefaults(e,{skipUpdateCalc:true});var d=e._fullData;var v=e._fullLayout;var p=v.datarevision===undefined;var h=v.transition;var m=_e(e,l,v,p,h);var g=m.newDataRevision;var y=be(e,s,d,p,h,g);if(ve(e))m.layoutReplot=true;if(y.calc||m.calc){e.calcdata=undefined;var x=Object.getOwnPropertyNames(v);for(var b=0;b<x.length;b++){var _=x[b];var w=_.substring(0,5);if(w==="xaxis"||w==="yaxis"){var T=v[_]._emptyCategories;if(T)T()}}}else{$.supplyDefaultsUpdateCalc(e.calcdata,d)}var k=[];if(n){e._transitionData={};$.createTransitionData(e);k.push(o)}if(v.transition&&!c&&(y.anim||m.anim)){if(m.ticks)k.push(D.doTicksRelayout);$.doCalcdata(e);D.doAutoRangeAndConstraints(e);k.push(function(){return $.transitionFromReact(e,y,m,l)})}else if(y.fullReplot||m.layoutReplot||c){e._fullLayout._skipDefaults=true;k.push(C._doPlot)}else{for(var M in m.arrays){var A=m.arrays[M];if(A.length){var S=ee.getComponentMethod(M,"drawOne");if(S!==K.noop){for(var E=0;E<A.length;E++){S(e,A[E])}}else{var L=ee.getComponentMethod(M,"draw");if(L===K.noop){throw new Error("cannot draw components: "+M)}L(e)}}}k.push($.previousPromises);if(y.style)k.push(D.doTraceStyle);if(y.colorbars||m.colorbars)k.push(D.doColorBars);if(m.legend)k.push(D.doLegend);if(m.layoutstyle)k.push(D.layoutStyles);if(m.axrange)Y(k);if(m.ticks)k.push(D.doTicksRelayout);if(m.modebar)k.push(D.doModeBar);if(m.camera)k.push(D.doCamera);k.push(O)}k.push($.rehover,$.redrag);i=K.syncOrAsync(k,e);if(!i||!i.then)i=Promise.resolve(e)}return i.then(function(){e.emit("plotly_react",{data:t,layout:r});return e})}function be(e,t,r,a,n,i){var o=t.length===r.length;if(!n&&!o){return{fullReplot:true,calc:true}}var s=ie.traceFlags();s.arrays={};s.nChanges=0;s.nChangesAnim=0;var l,u;function c(e){var t=te.getTraceValObject(u,e);if(!u._module.animatable&&t.anim){t.anim=false}return t}var f={getValObject:c,flags:s,immutable:a,transition:n,newDataRevision:i,gd:e};var d={};for(l=0;l<t.length;l++){if(r[l]){u=r[l]._fullInput;if($.hasMakesDataTransform(u))u=r[l];if(d[u.uid])continue;d[u.uid]=1;we(t[l]._fullInput,u,[],f)}}if(s.calc||s.plot){s.fullReplot=true}if(n&&s.nChanges&&s.nChangesAnim){s.anim=s.nChanges===s.nChangesAnim&&o?"all":"some"}return s}function _e(e,t,r,a,n){var i=ie.layoutFlags();i.arrays={};i.rangesAltered={};i.nChanges=0;i.nChangesAnim=0;function o(e){return te.getLayoutValObject(r,e)}var s={getValObject:o,flags:i,immutable:a,transition:n,gd:e};we(t,r,[],s);if(i.plot||i.calc){i.layoutReplot=true}if(n&&i.nChanges&&i.nChangesAnim){i.anim=i.nChanges===i.nChangesAnim?"all":"some"}return i}function we(e,t,r,a){var n,i,o;var s=a.getValObject;var l=a.flags;var u=a.immutable;var c=a.inArray;var f=a.arrayIndex;function d(){var e=n.editType;if(c&&e.indexOf("arraydraw")!==-1){K.pushUnique(l.arrays[c],f);return}ie.update(l,n);if(e!=="none"){l.nChanges++}if(a.transition&&n.anim){l.nChangesAnim++}if(ce.test(o)||fe.test(o)){l.rangesAltered[r[0]]=1}if(de.test(o)){Q(t,"_inputDomain").set(null)}if(i==="datarevision"){l.newDataRevision=1}}function v(e){return e.valType==="data_array"||e.arrayOk}for(i in e){if(l.calc&&!a.transition)return;var p=e[i];var h=t[i];var m=r.concat(i);o=m.join(".");if(i.charAt(0)==="_"||typeof p==="function"||p===h)continue;if((i==="tick0"||i==="dtick")&&r[0]!=="geo"){var g=t.tickmode;if(g==="auto"||g==="array"||!g)continue}if(i==="range"&&t.autorange)continue;if((i==="zmin"||i==="zmax")&&t.type==="contourcarpet")continue;n=s(m);if(!n)continue;if(n._compareAsJSON&&JSON.stringify(p)===JSON.stringify(h))continue;var y=n.valType;var x;var b=v(n);var _=Array.isArray(p);var w=Array.isArray(h);if(_&&w){var T="_input_"+i;var k=e[T];var M=t[T];if(Array.isArray(k)&&k===M)continue}if(h===undefined){if(b&&_)l.calc=true;else d()}else if(n._isLinkedToArray){var A=[];var S=false;if(!c)l.arrays[i]=A;var E=Math.min(p.length,h.length);var L=Math.max(p.length,h.length);if(E!==L){if(n.editType==="arraydraw"){S=true}else{d();continue}}for(x=0;x<E;x++){we(p[x],h[x],m.concat(x),K.extendFlat({inArray:i,arrayIndex:x},a))}if(S){for(x=E;x<L;x++){A.push(x)}}}else if(!y&&K.isPlainObject(p)){we(p,h,m,a)}else if(b){if(_&&w){if(u){l.calc=true}if(u||a.newDataRevision){d()}}else if(_!==w){l.calc=true}else d()}else if(_&&w){if(p.length!==h.length||String(p)!==String(h)){d()}}else{d()}}for(i in t){if(!(i in e||i.charAt(0)==="_"||typeof t[i]==="function")){n=s(r.concat(i));if(v(n)&&Array.isArray(t[i])){l.calc=true;return}else d()}}}function Te(e,t){var r;for(r in e){if(r.charAt(0)==="_")continue;var a=e[r];var n=t[r];if(a!==n){if(K.isPlainObject(a)&&K.isPlainObject(n)){if(Te(a,n)){return true}}else if(Array.isArray(a)&&Array.isArray(n)){if(a.length!==n.length){return true}for(var i=0;i<a.length;i++){if(a[i]!==n[i]){if(K.isPlainObject(a[i])&&K.isPlainObject(n[i])){if(Te(a[i],n[i])){return true}}else{return true}}}}else{return true}}}}function ke(x,b,_){x=K.getGraphDiv(x);if(!K.isPlotDiv(x)){throw new Error("This element is not a Plotly plot: "+x+". It's likely that you've failed "+"to create a plot before animating it. For more details, see "+"https://plotly.com/javascript/animations/")}var w=x._transitionData;if(!w._frameQueue){w._frameQueue=[]}_=$.supplyAnimationDefaults(_);var T=_.transition;var t=_.frame;if(w._frameWaitingCnt===undefined){w._frameWaitingCnt=0}function k(e){if(Array.isArray(T)){if(e>=T.length){return T[0]}else{return T[e]}}else{return T}}function M(e){if(Array.isArray(t)){if(e>=t.length){return t[0]}else{return t[e]}}else{return t}}function A(e,t){var r=0;return function(){if(e&&++r===t){return e()}}}return new Promise(function(o,s){function e(){if(w._frameQueue.length===0){return}while(w._frameQueue.length){var e=w._frameQueue.pop();if(e.onInterrupt){e.onInterrupt()}}x.emit("plotly_animationinterrupted",[])}function t(e){if(e.length===0)return;for(var t=0;t<e.length;t++){var r;if(e[t].type==="byname"){r=$.computeFrame(x,e[t].name)}else{r=e[t].data}var a=M(t);var n=k(t);n.duration=Math.min(n.duration,a.duration);var i={frame:r,name:e[t].name,frameOpts:a,transitionOpts:n};if(t===e.length-1){i.onComplete=A(o,2);i.onInterrupt=s}w._frameQueue.push(i)}if(_.mode==="immediate"){w._lastFrameAt=-Infinity}if(!w._animationRaf){l()}}function r(){x.emit("plotly_animated");window.cancelAnimationFrame(w._animationRaf);w._animationRaf=null}function a(){if(w._currentFrame&&w._currentFrame.onComplete){w._currentFrame.onComplete()}var e=w._currentFrame=w._frameQueue.shift();if(e){var t=e.name?e.name.toString():null;x._fullLayout._currentFrame=t;w._lastFrameAt=Date.now();w._timeToNext=e.frameOpts.duration;$.transition(x,e.frame.data,e.frame.layout,ne.coerceTraceIndices(x,e.frame.traces),e.frameOpts,e.transitionOpts).then(function(){if(e.onComplete){e.onComplete()}});x.emit("plotly_animatingframe",{name:t,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})}else{r()}}function l(){x.emit("plotly_animating");w._lastFrameAt=-Infinity;w._timeToNext=0;w._runningTransitions=0;w._currentFrame=null;var e=function(){w._animationRaf=window.requestAnimationFrame(e);if(Date.now()-w._lastFrameAt>w._timeToNext){a()}};e()}var n=0;function i(e){if(Array.isArray(T)){if(n>=T.length){e.transitionOpts=T[n]}else{e.transitionOpts=T[0]}}else{e.transitionOpts=T}n++;return e}var u,c;var f=[];var d=b===undefined||b===null;var v=Array.isArray(b);var p=!d&&!v&&K.isPlainObject(b);if(p){f.push({type:"object",data:i(K.extendFlat({},b))})}else if(d||["string","number"].indexOf(typeof b)!==-1){for(u=0;u<w._frames.length;u++){c=w._frames[u];if(!c)continue;if(d||String(c.group)===String(b)){f.push({type:"byname",name:String(c.name),data:i({name:c.name})})}}}else if(v){for(u=0;u<b.length;u++){var h=b[u];if(["number","string"].indexOf(typeof h)!==-1){h=String(h);f.push({type:"byname",name:h,data:i({name:h})})}else if(K.isPlainObject(h)){f.push({type:"object",data:i(K.extendFlat({},h))})}}}for(u=0;u<f.length;u++){c=f[u];if(c.type==="byname"&&!w._frameHash[c.data.name]){K.warn('animate failure: frame not found: "'+c.data.name+'"');s();return}}if(["next","immediate"].indexOf(_.mode)!==-1){e()}if(_.direction==="reverse"){f.reverse()}var m=x._fullLayout._currentFrame;if(m&&_.fromcurrent){var g=-1;for(u=0;u<f.length;u++){c=f[u];if(c.type==="byname"&&c.name===m){g=u;break}}if(g>0&&g<f.length-1){var y=[];for(u=0;u<f.length;u++){c=f[u];if(f[u].type!=="byname"||u>g){y.push(c)}}f=y}}if(f.length>0){t(f)}else{x.emit("plotly_animated");o()}})}function Me(e,t,r){e=K.getGraphDiv(e);if(t===null||t===undefined){return Promise.resolve()}if(!K.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed "+"to create a plot before adding frames. For more details, see "+"https://plotly.com/javascript/animations/")}var a,n,i,o;var s=e._transitionData._frames;var l=e._transitionData._frameHash;if(!Array.isArray(t)){throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t)}var u=s.length+t.length*2;var c=[];var f={};for(a=t.length-1;a>=0;a--){if(!K.isPlainObject(t[a]))continue;var d=t[a].name;var v=(l[d]||f[d]||{}).name;var p=t[a].name;var h=l[v]||f[v];if(v&&p&&typeof p==="number"&&h&&E<L){E++;K.warn('addFrames: overwriting frame "'+(l[v]||f[v]).name+'" with a frame whose name of type "number" also equates to "'+v+'". This is valid but may potentially lead to unexpected '+"behavior since all plotly.js frame names are stored internally "+"as strings.");if(E===L){K.warn("addFrames: This API call has yielded too many of these warnings. "+"For the rest of this call, further warnings about numeric frame "+"names will be suppressed.")}}f[d]={name:d};c.push({frame:$.supplyFrameDefaults(t[a]),index:r&&r[a]!==undefined&&r[a]!==null?r[a]:u+a})}c.sort(function(e,t){if(e.index>t.index)return-1;if(e.index<t.index)return 1;return 0});var m=[];var g=[];var y=s.length;for(a=c.length-1;a>=0;a--){n=c[a].frame;if(typeof n.name==="number"){K.warn("Warning: addFrames accepts frames with numeric names, but the numbers are"+"implicitly cast to strings")}if(!n.name){while(l[n.name="frame "+e._transitionData._counter++]);}if(l[n.name]){for(i=0;i<s.length;i++){if((s[i]||{}).name===n.name)break}m.push({type:"replace",index:i,value:n});g.unshift({type:"replace",index:i,value:s[i]})}else{o=Math.max(0,Math.min(c[a].index,y));m.push({type:"insert",index:o,value:n});g.unshift({type:"delete",index:o});y++}}var x=$.modifyFrames;var b=$.modifyFrames;var _=[e,g];var w=[e,m];if(T)T.add(e,x,_,b,w);return $.modifyFrames(e,m)}function Ae(e,t){e=K.getGraphDiv(e);if(!K.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e)}var r,a;var n=e._transitionData._frames;var i=[];var o=[];if(!t){t=[];for(r=0;r<n.length;r++){t.push(r)}}t=t.slice();t.sort();for(r=t.length-1;r>=0;r--){a=t[r];i.push({type:"delete",index:a});o.unshift({type:"insert",index:a,value:n[a]})}var s=$.modifyFrames;var l=$.modifyFrames;var u=[e,o];var c=[e,i];if(T)T.add(e,s,u,l,c);return $.modifyFrames(e,i)}function Se(e){e=K.getGraphDiv(e);var t=e._fullLayout||{};var r=e._fullData||[];$.cleanPlot([],{},r,t);$.purge(e);M.purge(e);if(t._container)t._container.remove();delete e._context;return e}function Ee(e){var t=e._fullLayout;var r=e.getBoundingClientRect();if(K.equalDomRects(r,t._lastBBox))return;var a=t._invTransform=K.inverseTransformMatrix(K.getFullTransformMatrix(e));t._invScaleX=Math.sqrt(a[0][0]*a[0][0]+a[0][1]*a[0][1]+a[0][2]*a[0][2]);t._invScaleY=Math.sqrt(a[1][0]*a[1][0]+a[1][1]*a[1][1]+a[1][2]*a[1][2]);t._lastBBox=r}function Le(e){var t=k.select(e);var r=e._fullLayout;r._calcInverseTransform=Ee;r._calcInverseTransform(e);r._container=t.selectAll(".plot-container").data([0]);r._container.enter().insert("div",":first-child").classed("plot-container",true).classed("plotly",true);r._paperdiv=r._container.selectAll(".svg-container").data([0]);r._paperdiv.enter().append("div").classed("user-select-none",true).classed("svg-container",true).style("position","relative");r._glcontainer=r._paperdiv.selectAll(".gl-container").data([{}]);r._glcontainer.enter().append("div").classed("gl-container",true);r._paperdiv.selectAll(".main-svg").remove();r._paperdiv.select(".modebar-container").remove();r._paper=r._paperdiv.insert("svg",":first-child").classed("main-svg",true);r._toppaper=r._paperdiv.append("svg").classed("main-svg",true);r._modebardiv=r._paperdiv.append("div");delete r._modeBar;r._hoverpaper=r._paperdiv.append("svg").classed("main-svg",true);if(!r._uid){var a={};k.selectAll("defs").each(function(){if(this.id)a[this.id.split("-")[1]]=1});r._uid=K.randstr(a)}r._paperdiv.selectAll(".main-svg").attr(o.svgAttrs);r._defs=r._paper.append("defs").attr("id","defs-"+r._uid);r._clips=r._defs.append("g").classed("clips",true);r._topdefs=r._toppaper.append("defs").attr("id","topdefs-"+r._uid);r._topclips=r._topdefs.append("g").classed("clips",true);r._bgLayer=r._paper.append("g").classed("bglayer",true);r._draggers=r._paper.append("g").classed("draglayer",true);var n=r._paper.append("g").classed("layer-below",true);r._imageLowerLayer=n.append("g").classed("imagelayer",true);r._shapeLowerLayer=n.append("g").classed("shapelayer",true);r._cartesianlayer=r._paper.append("g").classed("cartesianlayer",true);r._polarlayer=r._paper.append("g").classed("polarlayer",true);r._ternarylayer=r._paper.append("g").classed("ternarylayer",true);r._geolayer=r._paper.append("g").classed("geolayer",true);r._funnelarealayer=r._paper.append("g").classed("funnelarealayer",true);r._pielayer=r._paper.append("g").classed("pielayer",true);r._iciclelayer=r._paper.append("g").classed("iciclelayer",true);r._treemaplayer=r._paper.append("g").classed("treemaplayer",true);r._sunburstlayer=r._paper.append("g").classed("sunburstlayer",true);r._indicatorlayer=r._toppaper.append("g").classed("indicatorlayer",true);r._glimages=r._paper.append("g").classed("glimages",true);var i=r._toppaper.append("g").classed("layer-above",true);r._imageUpperLayer=i.append("g").classed("imagelayer",true);r._shapeUpperLayer=i.append("g").classed("shapelayer",true);r._infolayer=r._toppaper.append("g").classed("infolayer",true);r._menulayer=r._toppaper.append("g").classed("menulayer",true);r._zoomlayer=r._toppaper.append("g").classed("zoomlayer",true);r._hoverlayer=r._hoverpaper.append("g").classed("hoverlayer",true);r._modebardiv.classed("modebar-container",true).style("position","absolute").style("top","0px").style("right","0px");e.emit("plotly_framework")}C.animate=ke;C.addFrames=Me;C.deleteFrames=Ae;C.addTraces=R;C.deleteTraces=N;C.extendTraces=w;C.moveTraces=z;C.prependTraces=P;C.newPlot=l;C._doPlot=n;C.purge=Se;C.react=xe;C.redraw=s;C.relayout=q;C.restyle=F;C.setPlotConfig=i;C.update=G;C._guiRelayout=W(q);C._guiRestyle=W(F);C._guiUpdate=W(G);C._storeDirectGUIEdit=H},{"../components/color":100,"../components/drawing":122,"../constants/xmlns_namespaces":211,"../lib":230,"../lib/events":223,"../lib/queue":245,"../plots/cartesian/axes":276,"../plots/cartesian/constants":283,"../plots/cartesian/graph_interact":286,"../plots/cartesian/select":296,"../plots/plots":311,"../registry":313,"./edit_types":258,"./helpers":259,"./manage_arrays":261,"./plot_config":263,"./plot_schema":264,"./subroutines":266,"@plotly/d3":11,"fast-isnumeric":15,"has-hover":46}],263:[function(e,t,r){"use strict";var a={staticPlot:{valType:"boolean",dflt:false},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:false},edits:{annotationPosition:{valType:"boolean",dflt:false},annotationTail:{valType:"boolean",dflt:false},annotationText:{valType:"boolean",dflt:false},axisTitleText:{valType:"boolean",dflt:false},colorbarPosition:{valType:"boolean",dflt:false},colorbarTitleText:{valType:"boolean",dflt:false},legendPosition:{valType:"boolean",dflt:false},legendText:{valType:"boolean",dflt:false},shapePosition:{valType:"boolean",dflt:false},titleText:{valType:"boolean",dflt:false}},autosizable:{valType:"boolean",dflt:false},responsive:{valType:"boolean",dflt:false},fillFrame:{valType:"boolean",dflt:false},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[true,false],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[false,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:true},showAxisRangeEntryBoxes:{valType:"boolean",dflt:true},showTips:{valType:"boolean",dflt:true},showLink:{valType:"boolean",dflt:false},linkText:{valType:"string",dflt:"Edit chart",noBlank:true},sendData:{valType:"boolean",dflt:true},showSources:{valType:"any",dflt:false},displayModeBar:{valType:"enumerated",values:["hover",true,false],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:false},showEditInChartStudio:{valType:"boolean",dflt:false},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:false},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:true},watermark:{valType:"boolean",dflt:false},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:true,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}};var n={};function i(e,t){for(var r in e){var a=e[r];if(a.valType){t[r]=a.dflt}else{if(!t[r]){t[r]={}}i(a,t[r])}}}i(a,n);t.exports={configAttributes:a,dfltConfig:n}},{}],264:[function(e,t,d){"use strict";var c=e("../registry");var r=e("../lib");var v=e("../plots/attributes");var f=e("../plots/layout_attributes");var a=e("../plots/frame_attributes");var n=e("../plots/animation_attributes");var i=e("./plot_config").configAttributes;var o=e("./edit_types");var l=r.extendDeepAll;var p=r.isPlainObject;var h=r.isArrayOrTypedArray;var u=r.nestedProperty;var s=r.valObjectMeta;var m="_isSubplotObj";var g="_isLinkedToArray";var y="_arrayAttrRegexps";var x="_deprecated";var b=[m,g,y,x];d.IS_SUBPLOT_OBJ=m;d.IS_LINKED_TO_ARRAY=g;d.DEPRECATED=x;d.UNDERSCORE_ATTRS=b;d.get=function(){var t={};c.allTypes.forEach(function(e){t[e]=k(e)});var r={};Object.keys(c.transformsRegistry).forEach(function(e){r[e]=A(e)});return{defs:{valObjects:s,metaKeys:b.concat(["description","role","editType","impliedEdits"]),editType:{traces:o.traces,layout:o.layout},impliedEdits:{}},traces:t,layout:M(),transforms:r,frames:S(),animation:E(n),config:E(i)}};d.crawl=function(a,n,e,i){var o=e||0;i=i||"";Object.keys(a).forEach(function(e){var t=a[e];if(b.indexOf(e)!==-1)return;var r=(i?i+".":"")+e;n(t,e,a,o,r);if(d.isValObject(t))return;if(p(t)&&e!=="impliedEdits"){d.crawl(t,n,o+1,r)}})};d.isValObject=function(e){return e&&e.valType!==undefined};d.findArrayAttributes=function(e){var o=[];var s=[];var l=[];var i,u;function t(e,t,r,a){s=s.slice(0,a).concat([t]);l=l.slice(0,a).concat([e&&e._isLinkedToArray]);var n=e&&(e.valType==="data_array"||e.arrayOk===true)&&!(s[a-1]==="colorbar"&&(t==="ticktext"||t==="tickvals"));if(!n)return;c(i,0,"")}function c(e,t,r){var a=e[s[t]];var n=r+s[t];if(t===s.length-1){if(h(a)){o.push(u+n)}}else{if(l[t]){if(Array.isArray(a)){for(var i=0;i<a.length;i++){if(p(a[i])){c(a[i],t+1,n+"["+i+"].")}}}}else if(p(a)){c(a,t+1,n+".")}}}i=e;u="";d.crawl(v,t);if(e._module&&e._module.attributes){d.crawl(e._module.attributes,t)}var r=e.transforms;if(r){for(var a=0;a<r.length;a++){var n=r[a];var f=n._module;if(f){u="transforms["+a+"].";i=n;d.crawl(f.attributes,t)}}}return o};d.getTraceValObject=function(e,t){var r=t[0];var a=1;var n,i;if(r==="transforms"){if(t.length===1){return v.transforms}var o=e.transforms;if(!Array.isArray(o)||!o.length)return false;var s=t[1];if(!T(s)||s>=o.length){return false}n=(c.transformsRegistry[o[s].type]||{}).attributes;i=n&&n[t[2]];a=3}else{var l=e._module;if(!l)l=(c.modules[e.type||v.type.dflt]||{})._module;if(!l)return false;n=l.attributes;i=n&&n[r];if(!i){var u=l.basePlotModule;if(u&&u.attributes){i=u.attributes[r]}}if(!i)i=v[r]}return w(i,t,a)};d.getLayoutValObject=function(e,t){var r=_(e,t[0]);return w(r,t,1)};function _(e,t){var r,a,n,i;var o=e._basePlotModules;if(o){var s;for(r=0;r<o.length;r++){n=o[r];if(n.attrRegex&&n.attrRegex.test(t)){if(n.layoutAttrOverrides)return n.layoutAttrOverrides;if(!s&&n.layoutAttributes)s=n.layoutAttributes}var l=n.baseLayoutAttrOverrides;if(l&&t in l)return l[t]}if(s)return s}var u=e._modules;if(u){for(r=0;r<u.length;r++){i=u[r].layoutAttributes;if(i&&t in i){return i[t]}}}for(a in c.componentsRegistry){n=c.componentsRegistry[a];if(n.name==="colorscale"&&t.indexOf("coloraxis")===0){return n.layoutAttributes[t]}else if(!n.schema&&t===n.name){return n.layoutAttributes}}if(t in f)return f[t];return false}function w(e,t,r){if(!e)return false;if(e._isLinkedToArray){if(T(t[r]))r++;else if(r<t.length)return false}for(;r<t.length;r++){var a=e[t[r]];if(p(a))e=a;else break;if(r===t.length-1)break;if(e._isLinkedToArray){r++;if(!T(t[r]))return false}else if(e.valType==="info_array"){r++;var n=t[r];if(!T(n))return false;var i=e.items;if(Array.isArray(i)){if(n>=i.length)return false;if(e.dimensions===2){r++;if(t.length===r)return e;var o=t[r];if(!T(o))return false;e=i[n][o]}else e=i[n]}else{e=i}}}return e}function T(e){return e===Math.round(e)&&e>=0}function k(e){var t,r;t=c.modules[e]._module,r=t.basePlotModule;var a={};a.type=null;var i=l({},v);var o=l({},t.attributes);d.crawl(o,function(e,t,r,a,n){u(i,n).set(undefined);if(e===undefined)u(o,n).set(undefined)});l(a,i);if(c.traceIs(e,"noOpacity")){delete a.opacity}if(!c.traceIs(e,"showLegend")){delete a.showlegend;delete a.legendgroup}if(c.traceIs(e,"noHover")){delete a.hoverinfo;delete a.hoverlabel}if(!t.selectPoints){delete a.selectedpoints}l(a,o);if(r.attributes){l(a,r.attributes)}a.type=e;var n={meta:t.meta||{},categories:t.categories||{},animatable:Boolean(t.animatable),type:e,attributes:E(a)};if(t.layoutAttributes){var s={};l(s,t.layoutAttributes);n.layoutAttributes=E(s)}if(!t.animatable){d.crawl(n,function(e){if(d.isValObject(e)&&"anim"in e){delete e.anim}})}return n}function M(){var e={};var t,r;l(e,f);for(t in c.subplotsRegistry){r=c.subplotsRegistry[t];if(!r.layoutAttributes)continue;if(Array.isArray(r.attr)){for(var a=0;a<r.attr.length;a++){O(e,r,r.attr[a])}}else{var n=r.attr==="subplot"?r.name:r.attr;O(e,r,n)}}for(t in c.componentsRegistry){r=c.componentsRegistry[t];var i=r.schema;if(i&&(i.subplots||i.layout)){var o=i.subplots;if(o&&o.xaxis&&!o.yaxis){for(var s in o.xaxis){delete e.yaxis[s]}}}else if(r.name==="colorscale"){l(e,r.layoutAttributes)}else if(r.layoutAttributes){I(e,r.layoutAttributes,r.name)}}return{layoutAttributes:E(e)}}function A(r){var e=c.transformsRegistry[r];var a=l({},e.attributes);Object.keys(c.componentsRegistry).forEach(function(e){var t=c.componentsRegistry[e];if(t.schema&&t.schema.transforms&&t.schema.transforms[r]){Object.keys(t.schema.transforms[r]).forEach(function(e){I(a,t.schema.transforms[r][e],e)})}});return{attributes:E(a)}}function S(){var e={frames:l({},a)};E(e);return e.frames}function E(e){L(e);C(e);D(e);return e}function L(e){function a(e){return{valType:"string",editType:"none"}}function t(e,t,r){if(d.isValObject(e)){if(e.arrayOk===true||e.valType==="data_array"){r[t+"src"]=a(t)}}else if(p(e)){e.role="object"}}d.crawl(e,t)}function C(e){function t(e,t,r){if(!e)return;var a=e[g];if(!a)return;delete e[g];r[t]={items:{}};r[t].items[a]=e;r[t].role="object"}d.crawl(e,t)}function D(e){function a(e){for(var t in e){if(p(e[t])){a(e[t])}else if(Array.isArray(e[t])){for(var r=0;r<e[t].length;r++){a(e[t][r])}}else{if(e[t]instanceof RegExp){e[t]=e[t].toString()}}}}a(e)}function O(e,t,r){var a=u(e,r);var n=l({},t.layoutAttributes);n[m]=true;a.set(n)}function I(e,t,r){var a=u(e,r);a.set(l(a.get()||{},t))}},{"../lib":230,"../plots/animation_attributes":270,"../plots/attributes":272,"../plots/frame_attributes":306,"../plots/layout_attributes":309,"../registry":313,"./edit_types":258,"./plot_config":263}],265:[function(e,t,r){"use strict";var v=e("../lib");var s=e("../plots/attributes");var p="templateitemname";var a={name:{valType:"string",editType:"none"}};a[p]={valType:"string",editType:"calc"};r.templatedArray=function(e,t){t._isLinkedToArray=e;t.name=a.name;t[p]=a[p];return t};r.traceTemplater=function(a){var n={};var i,o;for(i in a){o=a[i];if(Array.isArray(o)&&o.length){n[i]=0}}function e(e){i=v.coerce(e,{},s,"type");var t={type:i,_template:null};if(i in n){o=a[i];var r=n[i]%o.length;n[i]++;t._template=o[r]}else{}return t}return{newTrace:e}};r.newContainer=function(e,t,r){var a=e._template;var n=a&&(a[t]||r&&a[r]);if(!v.isPlainObject(n))n=null;var i=e[t]={_template:n};return i};r.arrayTemplater=function(e,t,i){var r=e._template;var o=r&&r[c(t)];var s=r&&r[t];if(!Array.isArray(s)||!s.length){s=[]}var l={};function a(e){var t={name:e.name,_input:e};var r=t[p]=e[p];if(!u(r)){t._template=o;return t}for(var a=0;a<s.length;a++){var n=s[a];if(n.name===r){l[r]=1;t._template=n;return t}}t[i]=e[i]||false;t._template=false;return t}function n(){var e=[];for(var t=0;t<s.length;t++){var r=s[t];var a=r.name;if(u(a)&&!l[a]){var n={_template:r,name:a,_input:{_templateitemname:a}};n[p]=r[p];e.push(n);l[a]=1}}return e}return{newItem:a,defaultItems:n}};function u(e){return e&&typeof e==="string"}function c(e){var t=e.length-1;if(e.charAt(t)!=="s"){v.warn("bad argument to arrayDefaultKey: "+e)}return e.substr(0,e.length-1)+"defaults"}r.arrayDefaultKey=c;r.arrayEditor=function(n,e,t){var r=(v.nestedProperty(n,e).get()||[]).length;var a=t._index;var i=a>=r&&(t._input||{})._templateitemname;if(i)a=r;var o=e+"["+a+"]";var s;function l(){s={};if(i){s[o]={};s[o][p]=i}}l();function u(e,t){s[e]=t}function c(e,t){if(i){v.nestedProperty(s[o],e).set(t)}else{s[o+"."+e]=t}}function f(){var e=s;l();return e}function d(e,t){if(e)c(e,t);var r=f();for(var a in r){v.nestedProperty(n,a).set(r[a])}}return{modifyBase:u,modifyItem:c,getUpdateObj:f,applyUpdate:d}}},{"../lib":230,"../plots/attributes":272}],266:[function(e,t,W){"use strict";var $=e("@plotly/d3");var f=e("../registry");var Z=e("../plots/plots");var X=e("../lib");var d=e("../lib/clear_gl_canvases");var J=e("../components/color");var K=e("../components/drawing");var n=e("../components/titles");var Q=e("../components/modebar");var ee=e("../plots/cartesian/axes");var te=e("../constants/alignment");var r=e("../plots/cartesian/constraints");var l=r.enforce;var u=r.clean;var c=e("../plots/cartesian/autorange").doAutoRange;var i="start";var a="middle";var o="end";W.layoutStyles=function(e){return X.syncOrAsync([Z.doAutoMargin,s],e)};function re(e,t,r){for(var a=0;a<r.length;a++){var n=r[a][0];var i=r[a][1];if(n[0]>=e[1]||n[1]<=e[0]){continue}if(i[0]<t[1]&&i[1]>t[0]){return true}}return false}function s(e){var t=e._fullLayout;var n=t._size;var i=n.p;var r=ee.list(e,"",true);var a,o,s,l,u,c;t._paperdiv.style({width:e._context.responsive&&t.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":t.width+"px",height:e._context.responsive&&t.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":t.height+"px"}).selectAll(".main-svg").call(K.setSize,t.width,t.height);e._context.setBackground(e,t.paper_bgcolor);W.drawMainTitle(e);Q.manage(e);if(!t._has("cartesian")){return Z.previousPromises(e)}function f(e,t,r){var a=e._lw/2;if(e._id.charAt(0)==="x"){if(!t)return n.t+n.h*(1-(e.position||0))+a%1;else if(r==="top")return t._offset-i-a;return t._offset+t._length+i+a}if(!t)return n.l+n.w*(e.position||0)+a%1;else if(r==="right")return t._offset+t._length+i+a;return t._offset-i-a}for(a=0;a<r.length;a++){l=r[a];var d=l._anchorAxis;l._linepositions={};l._lw=K.crispRound(e,l.linewidth,1);l._mainLinePosition=f(l,d,l.side);l._mainMirrorPosition=l.mirror&&d?f(l,d,te.OPPOSITE_SIDE[l.side]):null}var v=[];var p=[];var h=[];var m=J.opacity(t.paper_bgcolor)===1&&J.opacity(t.plot_bgcolor)===1&&t.paper_bgcolor===t.plot_bgcolor;for(o in t._plots){s=t._plots[o];if(s.mainplot){if(s.bg){s.bg.remove()}s.bg=undefined}else{var g=s.xaxis.domain;var y=s.yaxis.domain;var x=s.plotgroup;if(re(g,y,h)){var b=x.node();var _=s.bg=X.ensureSingle(x,"rect","bg");b.insertBefore(_.node(),b.childNodes[0]);p.push(o)}else{x.select("rect.bg").remove();h.push([g,y]);if(!m){v.push(o);p.push(o)}}}}var w=t._bgLayer.selectAll(".bg").data(v);w.enter().append("rect").classed("bg",true);w.exit().remove();w.each(function(e){t._plots[e].bg=$.select(this)});for(a=0;a<p.length;a++){s=t._plots[p[a]];u=s.xaxis;c=s.yaxis;if(s.bg&&u._offset!==undefined&&c._offset!==undefined){s.bg.call(K.setRect,u._offset-i,c._offset-i,u._length+2*i,c._length+2*i).call(J.fill,t.plot_bgcolor).style("stroke-width",0)}}if(!t._hasOnlyLargeSploms){for(o in t._plots){s=t._plots[o];u=s.xaxis;c=s.yaxis;var T=s.clipId="clip"+t._uid+o+"plot";var k=X.ensureSingleById(t._clips,"clipPath",T,function(e){e.classed("plotclip",true).append("rect")});s.clipRect=k.select("rect").attr({width:u._length,height:c._length});K.setTranslate(s.plot,u._offset,c._offset);var M;var A;if(s._hasClipOnAxisFalse){M=null;A=T}else{M=T;A=null}K.setClipUrl(s.plot,M,e);s.layerClipId=A}}var S,E,L,C,D,O;var I,P,R,N,z,F;var j;function H(e){return"M"+S+","+e+"H"+E}function B(e){return"M"+u._offset+","+e+"h"+u._length}function q(e){return"M"+e+","+P+"V"+I}function U(e){return"M"+e+","+c._offset+"v"+c._length}function Y(e,t,r){if(!e.showline||o!==e._mainSubplot)return"";if(!e._anchorAxis)return r(e._mainLinePosition);var a=t(e._mainLinePosition);if(e.mirror)a+=t(e._mainMirrorPosition);return a}for(o in t._plots){s=t._plots[o];u=s.xaxis;c=s.yaxis;var V="M0,0";if(ae(u,o)){D=ne(u,"left",c,r);S=u._offset-(D?i+D:0);O=ne(u,"right",c,r);E=u._offset+u._length+(O?i+O:0);L=f(u,c,"bottom");C=f(u,c,"top");j=!u._anchorAxis||o!==u._mainSubplot;if(j&&(u.mirror==="allticks"||u.mirror==="all")){u._linepositions[o]=[L,C]}V=Y(u,H,B);if(j&&u.showline&&(u.mirror==="all"||u.mirror==="allticks")){V+=H(L)+H(C)}s.xlines.style("stroke-width",u._lw+"px").call(J.stroke,u.showline?u.linecolor:"rgba(0,0,0,0)")}s.xlines.attr("d",V);var G="M0,0";if(ae(c,o)){z=ne(c,"bottom",u,r);I=c._offset+c._length+(z?i:0);F=ne(c,"top",u,r);P=c._offset-(F?i:0);R=f(c,u,"left");N=f(c,u,"right");j=!c._anchorAxis||o!==c._mainSubplot;if(j&&(c.mirror==="allticks"||c.mirror==="all")){c._linepositions[o]=[R,N]}G=Y(c,q,U);if(j&&c.showline&&(c.mirror==="all"||c.mirror==="allticks")){G+=q(R)+q(N)}s.ylines.style("stroke-width",c._lw+"px").call(J.stroke,c.showline?c.linecolor:"rgba(0,0,0,0)")}s.ylines.attr("d",G)}ee.makeClipPaths(e);return Z.previousPromises(e)}function ae(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||e.mirror==="all"||e.mirror==="allticks")}function v(e,t,r){if(!r.showline||!r._lw)return false;if(r.mirror==="all"||r.mirror==="allticks")return true;var a=r._anchorAxis;if(!a)return false;var n=te.FROM_BL[t];if(r.side===t){return a.domain[n]===e.domain[n]}return r.mirror&&a.domain[1-n]===e.domain[1-n]}function ne(e,t,r,a){if(v(e,t,r)){return r._lw}for(var n=0;n<a.length;n++){var i=a[n];if(i._mainAxis===r._mainAxis&&v(e,t,i)){return i._lw}}return 0}W.drawMainTitle=function(e){var t=e._fullLayout;var r=m(t);var a=g(t);n.draw(e,"gtitle",{propContainer:t,propName:"title.text",placeholder:t._dfltTitle.plot,attributes:{x:p(t,r),y:h(t,a),"text-anchor":r,dy:a}})};function p(e,t){var r=e.title;var a=e._size;var n=0;if(t===i){n=r.pad.l}else if(t===o){n=-r.pad.r}switch(r.xref){case"paper":return a.l+a.w*r.x+n;case"container":default:return e.width*r.x+n}}function h(e,t){var r=e.title;var a=e._size;var n=0;if(t==="0em"||!t){n=-r.pad.b}else if(t===te.CAP_SHIFT+"em"){n=r.pad.t}if(r.y==="auto"){return a.t/2}else{switch(r.yref){case"paper":return a.t+a.h-a.h*r.y+n;case"container":default:return e.height-e.height*r.y+n}}}function m(e){var t=e.title;var r=a;if(X.isRightAnchor(t)){r=o}else if(X.isLeftAnchor(t)){r=i}return r}function g(e){var t=e.title;var r="0em";if(X.isTopAnchor(t)){r=te.CAP_SHIFT+"em"}else if(X.isMiddleAnchor(t)){r=te.MID_SHIFT+"em"}return r}W.doTraceStyle=function(e){var t=e.calcdata;var r=[];var a;for(a=0;a<t.length;a++){var n=t[a];var i=n[0]||{};var o=i.trace||{};var s=o._module||{};var l=s.arraysToCalcdata;if(l)l(n,o);var u=s.editStyle;if(u)r.push({fn:u,cd0:i})}if(r.length){for(a=0;a<r.length;a++){var c=r[a];c.fn(e,c.cd0)}d(e);W.redrawReglTraces(e)}Z.style(e);f.getComponentMethod("legend","draw")(e);return Z.previousPromises(e)};W.doColorBars=function(e){f.getComponentMethod("colorbar","draw")(e);return Z.previousPromises(e)};W.layoutReplot=function(e){var t=e.layout;e.layout=undefined;return f.call("_doPlot",e,"",t)};W.doLegend=function(e){f.getComponentMethod("legend","draw")(e);return Z.previousPromises(e)};W.doTicksRelayout=function(e){ee.draw(e,"redraw");if(e._fullLayout._hasOnlyLargeSploms){f.subplotsRegistry.splom.updateGrid(e);d(e);W.redrawReglTraces(e)}W.drawMainTitle(e);return Z.previousPromises(e)};W.doModeBar=function(e){var t=e._fullLayout;Q.manage(e);for(var r=0;r<t._basePlotModules.length;r++){var a=t._basePlotModules[r].updateFx;if(a)a(e)}return Z.previousPromises(e)};W.doCamera=function(e){var t=e._fullLayout;var r=t._subplots.gl3d;for(var a=0;a<r.length;a++){var n=t[r[a]];var i=n._scene;i.setViewport(n)}};W.drawData=function(e){var t=e._fullLayout;d(e);var r=t._basePlotModules;for(var a=0;a<r.length;a++){r[a].plot(e)}W.redrawReglTraces(e);Z.style(e);f.getComponentMethod("shapes","draw")(e);f.getComponentMethod("annotations","draw")(e);f.getComponentMethod("images","draw")(e);t._replotting=false;return Z.previousPromises(e)};W.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var r=e._fullData;var a=[];var n=[];var i,o;if(t._hasOnlyLargeSploms){t._splomGrid.draw()}for(i=0;i<r.length;i++){var s=r[i];if(s.visible===true&&s._length!==0){if(s.type==="splom"){t._splomScenes[s.uid].draw()}else if(s.type==="scattergl"){X.pushUnique(a,s.xaxis+s.yaxis)}else if(s.type==="scatterpolargl"){X.pushUnique(n,s.subplot)}}}for(i=0;i<a.length;i++){o=t._plots[a[i]];if(o._scene)o._scene.draw()}for(i=0;i<n.length;i++){o=t[n[i]]._subplot;if(o._scene)o._scene.draw()}}};W.doAutoRangeAndConstraints=function(e){var t=ee.list(e,"",true);var r;var a={};for(var n=0;n<t.length;n++){r=t[n];if(!a[r._id]){a[r._id]=1;u(e,r);c(e,r);var i=r._matchGroup;if(i){for(var o in i){var s=ee.getFromId(e,o);c(e,s,r.range);a[o]=1}}}}l(e)};W.finalDraw=function(e){f.getComponentMethod("rangeslider","draw")(e);f.getComponentMethod("rangeselector","draw")(e)};W.drawMarginPushers=function(e){f.getComponentMethod("legend","draw")(e);f.getComponentMethod("rangeselector","draw")(e);f.getComponentMethod("sliders","draw")(e);f.getComponentMethod("updatemenus","draw")(e);f.getComponentMethod("colorbar","draw")(e)}},{"../components/color":100,"../components/drawing":122,"../components/modebar":163,"../components/titles":198,"../constants/alignment":205,"../lib":230,"../lib/clear_gl_canvases":218,"../plots/cartesian/autorange":275,"../plots/cartesian/axes":276,"../plots/cartesian/constraints":284,"../plots/plots":311,"../registry":313,"@plotly/d3":11}],267:[function(e,t,r){"use strict";var k=e("../lib");var M=k.isPlainObject;var a=e("./plot_schema");var x=e("../plots/plots");var v=e("../plots/attributes");var A=e("./plot_template");var b=e("./plot_config").dfltConfig;r.makeTemplate=function(e){e=k.isPlainObject(e)?e:k.getGraphDiv(e);e=k.extendDeep({_context:b},{data:e.data,layout:e.layout});x.supplyDefaults(e);var t=e.data||[];var r=e.layout||{};r._basePlotModules=e._fullLayout._basePlotModules;r._modules=e._fullLayout._modules;var n={data:{},layout:{}};t.forEach(function(e){var t={};E(e,t,m.bind(null,e));var r=k.coerce(e,{},v,"type");var a=n.data[r];if(!a)a=n.data[r]=[];a.push(t)});E(r,n.layout,h.bind(null,r));delete n.layout.template;var a=r.template;if(M(a)){var i=a.layout;var o,s,l,u,c,f;if(M(i)){p(i,n.layout)}var d=a.data;if(M(d)){for(s in n.data){l=d[s];if(Array.isArray(l)){c=n.data[s];f=c.length;u=l.length;for(o=0;o<f;o++){p(l[o%u],c[o])}for(o=f;o<u;o++){c.push(k.extendDeep({},l[o]))}}}for(s in d){if(!(s in n.data)){n.data[s]=k.extendDeep([],d[s])}}}}return n};function p(s,e){s=k.extendDeep({},s);var t=Object.keys(s).sort();var r,l;function a(e,t,r){if(M(t)&&M(e)){p(e,t)}else if(Array.isArray(t)&&Array.isArray(e)){var a=A.arrayTemplater({_template:s},r);for(l=0;l<t.length;l++){var n=t[l];var i=a.newItem(n)._template;if(i)p(i,n)}var o=a.defaultItems();for(l=0;l<o.length;l++)t.push(o[l]._template);for(l=0;l<t.length;l++)delete t[l].templateitemname}}for(r=0;r<t.length;r++){var n=t[r];var i=s[n];if(n in e){a(i,e[n],n)}else e[n]=i;if(S(n)===n){for(var o in e){var u=S(o);if(o!==u&&u===n&&!(o in s)){a(i,e[o],n)}}}}}function S(e){return e.replace(/[0-9]+$/,"")}function E(e,t,r,a,n){var i=n&&r(n);for(var o in e){var s=e[o];var l=L(e,o,a);var u=L(e,o,n);var c=r(u);if(!c){var f=S(o);if(f!==o){u=L(e,f,n);c=r(u)}}if(i&&i===c)continue;if(!c||c._noTemplating||c.valType==="data_array"||c.arrayOk&&Array.isArray(s)){continue}if(!c.valType&&M(s)){E(s,t,r,l,u)}else if(c._isLinkedToArray&&Array.isArray(s)){var d=false;var v=0;var p={};for(var h=0;h<s.length;h++){var m=s[h];if(M(m)){var g=m.name;if(g){if(!p[g]){E(m,t,r,L(s,v,l),L(s,v,u));v++;p[g]=1}}else if(!d){var y=A.arrayDefaultKey(o);var x=L(e,y,a);var b=L(s,v,l);E(m,t,r,b,L(s,v,u));var _=k.nestedProperty(t,b);var w=k.nestedProperty(t,x);w.set(_.get());_.set(null);d=true}}}}else{var T=k.nestedProperty(t,l);T.set(s)}}}function h(e,t){return a.getLayoutValObject(e,k.nestedProperty({},t).parts)}function m(e,t){return a.getTraceValObject(e,k.nestedProperty({},t).parts)}function L(e,t,r){var a;if(!r)a=t;else if(Array.isArray(e))a=r+"["+t+"]";else a=r+"."+t;return a}r.validateTemplate=function(e,t){var r=k.extendDeep({},{_context:b,data:e.data,layout:e.layout});var a=r.layout||{};if(!M(t))t=a.template||{};var n=t.layout;var i=t.data;var o=[];r.layout=a;r.layout.template=t;x.supplyDefaults(r);var s=r._fullLayout;var l=r._fullData;var u={};function c(e,t){for(var r in e){if(r.charAt(0)!=="_"&&M(e[r])){var a=S(r);var n=[];var i;for(i=0;i<t.length;i++){n.push(L(e,r,t[i]));if(a!==r)n.push(L(e,a,t[i]))}for(i=0;i<n.length;i++){u[n[i]]=1}c(e[r],n)}}}function f(e,t){for(var r in e){if(r.indexOf("defaults")===-1&&M(e[r])){var a=L(e,r,t);if(u[a]){f(e[r],a)}else{o.push({code:"unused",path:a})}}}}if(!M(n)){o.push({code:"layout"})}else{c(s,["layout"]);f(n,"layout")}if(!M(i)){o.push({code:"data"})}else{var d={};var v;for(var p=0;p<l.length;p++){var h=l[p];v=h.type;d[v]=(d[v]||0)+1;if(!h._fullInput._template){o.push({code:"missing",index:h._fullInput.index,traceType:v})}}for(v in i){var m=i[v].length;var g=d[v]||0;if(m>g){o.push({code:"unused",traceType:v,templateCount:m,dataCount:g})}else if(g>m){o.push({code:"reused",traceType:v,templateCount:m,dataCount:g})}}}function y(e,t){for(var r in e){if(r.charAt(0)==="_")continue;var a=e[r];var n=L(e,r,t);if(M(a)){if(Array.isArray(e)&&a._template===false&&a.templateitemname){o.push({code:"missing",path:n,templateitemname:a.templateitemname})}y(a,n)}else if(Array.isArray(a)&&_(a)){y(a,n)}}}y({data:l,layout:s},"");if(o.length)return o.map(w)};function _(e){for(var t=0;t<e.length;t++){if(M(e[t]))return true}}function w(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":if(e.path){t="There are no templates for item "+e.path+" with name "+e.templateitemname}else{t="There are no templates for trace "+e.index+", of type "+e.traceType+"."}break;case"unused":if(e.path){t="The template item at "+e.path+" was not used in constructing the plot."}else if(e.dataCount){t="Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type."}else{t="The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data."}break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type.";break}e.msg=t;return e}},{"../lib":230,"../plots/attributes":272,"../plots/plots":311,"./plot_config":263,"./plot_schema":264,"./plot_template":265}],268:[function(e,t,r){"use strict";var w=e("fast-isnumeric");var T=e("./plot_api");var k=e("../plots/plots");var M=e("../lib");var A=e("../snapshot/helpers");var S=e("../snapshot/tosvg");var E=e("../snapshot/svgtoimg");var L=e("../version").version;var C={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:false},imageDataOnly:{valType:"boolean",dflt:false}};function a(e,r){r=r||{};var a;var t;var n;var i;if(M.isPlainObject(e)){a=e.data||[];t=e.layout||{};n=e.config||{};i={}}else{e=M.getGraphDiv(e);a=M.extendDeep([],e.data);t=M.extendDeep({},e.layout);n=e._context;i=e._fullLayout||{}}function o(e){return!(e in r)||M.validate(r[e],C[e])}if(!o("width")&&r.width!==null||!o("height")&&r.height!==null){throw new Error("Height and width should be pixel values.")}if(!o("format")){throw new Error("Export format is not "+M.join2(C.format.values,", "," or ")+".")}var s={};function l(e,t){return M.coerce(r,s,C,e,t)}var u=l("format");var c=l("width");var f=l("height");var d=l("scale");var v=l("setBackground");var p=l("imageDataOnly");var h=document.createElement("div");h.style.position="absolute";h.style.left="-5000px";document.body.appendChild(h);var m=M.extendFlat({},t);if(c){m.width=c}else if(r.width===null&&w(i.width)){m.width=i.width}if(f){m.height=f}else if(r.height===null&&w(i.height)){m.height=i.height}var g=M.extendFlat({},n,{_exportedPlot:true,staticPlot:true,setBackground:v});var y=A.getRedrawFunc(h);function x(){return new Promise(function(e){setTimeout(e,A.getDelay(h._fullLayout))})}function b(){return new Promise(function(e,t){var r=S(h,u,d);var a=h._fullLayout.width;var n=h._fullLayout.height;function i(){T.purge(h);document.body.removeChild(h)}if(u==="full-json"){var o=k.graphJson(h,false,"keepdata","object",true,true);o.version=L;o=JSON.stringify(o);i();if(p){return e(o)}else{return e(A.encodeJSON(o))}}i();if(u==="svg"){if(p){return e(r)}else{return e(A.encodeSVG(r))}}var s=document.createElement("canvas");s.id=M.randstr();E({format:u,width:a,height:n,scale:d,canvas:s,svg:r,promise:true}).then(e).catch(t)})}function _(e){if(p){return e.replace(A.IMAGE_URL_PREFIX,"")}else{return e}}return new Promise(function(t,r){T.newPlot(h,a,m,g).then(y).then(x).then(b).then(function(e){t(_(e))}).catch(function(e){r(e)})})}t.exports=a},{"../lib":230,"../plots/plots":311,"../snapshot/helpers":317,"../snapshot/svgtoimg":319,"../snapshot/tosvg":321,"../version":386,"./plot_api":262,"fast-isnumeric":15}],269:[function(e,t,r){"use strict";var O=e("../lib");var k=e("../plots/plots");var M=e("./plot_schema");var A=e("./plot_config").dfltConfig;var I=O.isPlainObject;var P=Array.isArray;var R=O.isArrayOrTypedArray;t.exports=function e(t,r){if(t===undefined)t=[];if(r===undefined)r={};var a=M.get();var n=[];var i={_context:O.extendFlat({},A)};var o,s;if(P(t)){i.data=O.extendDeep([],t);o=t}else{i.data=[];o=[];n.push(z("array","data"))}if(I(r)){i.layout=O.extendDeep({},r);s=r}else{i.layout={};s={};if(arguments.length>1){n.push(z("object","layout"))}}k.supplyDefaults(i);var l=i._fullData;var u=o.length;for(var c=0;c<u;c++){var f=o[c];var d=["data",c];if(!I(f)){n.push(z("object",d));continue}var v=l[c];var p=v.type;var h=a.traces[p].attributes;h.type={valType:"enumerated",values:[p]};if(v.visible===false&&f.visible!==false){n.push(z("invisible",d))}N(f,v,h,n,d);var m=f.transforms;var g=v.transforms;if(m){if(!P(m)){n.push(z("array",d,["transforms"]))}d.push("transforms");for(var y=0;y<m.length;y++){var x=["transforms",y];var b=m[y].type;if(!I(m[y])){n.push(z("object",d,x));continue}var _=a.transforms[b]?a.transforms[b].attributes:{};_.type={valType:"enumerated",values:Object.keys(a.transforms)};N(m[y],g[y],_,n,d,x)}}}var w=i._fullLayout;var T=S(a,l);N(s,w,T,n,"layout");return n.length===0?void 0:n};function N(e,t,r,a,n,i){i=i||[];var o=Object.keys(e);for(var s=0;s<o.length;s++){var l=o[s];if(l==="transforms")continue;var u=i.slice();u.push(l);var c=e[l];var f=t[l];var d=j(r,l);var v=(d||{}).valType;var p=v==="info_array";var h=v==="colorscale";var m=(d||{}).items;if(!F(r,l)){a.push(z("schema",n,u))}else if(I(c)&&I(f)&&v!=="any"){N(c,f,d,a,n,u)}else if(p&&P(c)){if(c.length>f.length){a.push(z("unused",n,u.concat(f.length)))}var g=f.length;var y=Array.isArray(m);if(y)g=Math.min(g,m.length);var x,b,_,w,T;if(d.dimensions===2){for(b=0;b<g;b++){if(P(c[b])){if(c[b].length>f[b].length){a.push(z("unused",n,u.concat(b,f[b].length)))}var k=f[b].length;for(x=0;x<(y?Math.min(k,m[b].length):k);x++){_=y?m[b][x]:m;w=c[b][x];T=f[b][x];if(!O.validate(w,_)){a.push(z("value",n,u.concat(b,x),w))}else if(T!==w&&T!==+w){a.push(z("dynamic",n,u.concat(b,x),w,T))}}}else{a.push(z("array",n,u.concat(b),c[b]))}}}else{for(b=0;b<g;b++){_=y?m[b]:m;w=c[b];T=f[b];if(!O.validate(w,_)){a.push(z("value",n,u.concat(b),w))}else if(T!==w&&T!==+w){a.push(z("dynamic",n,u.concat(b),w,T))}}}}else if(d.items&&!p&&P(c)){var M=m[Object.keys(m)[0]];var A=[];var S,E;for(S=0;S<f.length;S++){var L=f[S]._index||S;E=u.slice();E.push(L);if(I(c[L])&&I(f[S])){A.push(L);var C=c[L];var D=f[S];if(I(C)&&C.visible!==false&&D.visible===false){a.push(z("invisible",n,E))}else N(C,D,M,a,n,E)}}for(S=0;S<c.length;S++){E=u.slice();E.push(S);if(!I(c[S])){a.push(z("object",n,E,c[S]))}else if(A.indexOf(S)===-1){a.push(z("unused",n,E))}}}else if(!I(c)&&I(f)){a.push(z("object",n,u,c))}else if(!R(c)&&R(f)&&!p&&!h){a.push(z("array",n,u,c))}else if(!(l in t)){a.push(z("unused",n,u,c))}else if(!O.validate(c,d)){a.push(z("value",n,u,c))}else if(d.valType==="enumerated"&&(d.coerceNumber&&c!==+f||c!==f)){a.push(z("dynamic",n,u,c,f))}}return a}function S(e,t){var r=e.layout.layoutAttributes;for(var a=0;a<t.length;a++){var n=t[a];var i=e.traces[n.type];var o=i.layoutAttributes;if(o){if(n.subplot){O.extendFlat(r[i.attributes.subplot.dflt],o)}else{O.extendFlat(r,o)}}}return r}var u={object:function(e,t){var r;if(e==="layout"&&t==="")r="The layout argument";else if(e[0]==="data"&&t===""){r="Trace "+e[1]+" in the data argument"}else r=n(e)+"key "+t;return r+" must be linked to an object container"},array:function(e,t){var r;if(e==="data")r="The data argument";else r=n(e)+"key "+t;return r+" must be linked to an array container"},schema:function(e,t){return n(e)+"key "+t+" is not part of the schema"},unused:function(e,t,r){var a=I(r)?"container":"key";return n(e)+a+" "+t+" did not get coerced"},dynamic:function(e,t,r,a){return[n(e)+"key",t,"(set to '"+r+"')","got reset to","'"+a+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?n(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,r){return[n(e)+"key "+t,"is set to an invalid value ("+r+")"].join(" ")}};function n(e){if(P(e))return"In data trace "+e[1]+", ";return"In "+e+", "}function z(e,t,r,a,n){r=r||"";var i,o;if(P(t)){i=t[0];o=t[1]}else{i=t;o=null}var s=c(r);var l=u[e](t,s,a,n);O.log(l);return{code:e,container:i,trace:o,path:r,astr:s,msg:l}}function F(e,t){var r=i(t);var a=r.keyMinusId;var n=r.id;if(a in e&&e[a]._isSubplotObj&&n){return true}return t in e}function j(e,t){if(t in e)return e[t];var r=i(t);return e[r.keyMinusId]}var a=O.counterRegex("([a-z]+)");function i(e){var t=e.match(a);return{keyMinusId:t&&t[1],id:t&&t[2]}}function c(e){if(!P(e))return String(e);var t="";for(var r=0;r<e.length;r++){var a=e[r];if(typeof a==="number"){t=t.substr(0,t.length-1)+"["+a+"]"}else{t+=a}if(r<e.length-1)t+="."}return t}},{"../lib":230,"../plots/plots":311,"./plot_config":263,"./plot_schema":264}],270:[function(e,t,r){"use strict";t.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:false},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:true}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],271:[function(e,t,r){"use strict";var h=e("../lib");var m=e("../plot_api/plot_template");t.exports=function e(t,r,a){var n=a.name;var i=a.inclusionAttr||"visible";var o=r[n];var s=h.isArrayOrTypedArray(t[n])?t[n]:[];var l=r[n]=[];var u=m.arrayTemplater(r,n,i);var c,f;for(c=0;c<s.length;c++){var d=s[c];if(!h.isPlainObject(d)){f=u.newItem({});f[i]=false}else{f=u.newItem(d)}f._index=c;if(f[i]!==false){a.handleItemDefaults(d,f,r,a)}l.push(f)}var v=u.defaultItems();for(c=0;c<v.length;c++){f=v[c];f._index=l.length;a.handleItemDefaults({},f,r,a,{});l.push(f)}if(h.isArrayOrTypedArray(o)){var p=Math.min(o.length,l.length);for(c=0;c<p;c++){h.relinkPrivateKeys(l[c],o[c])}}return l}},{"../lib":230,"../plot_api/plot_template":265}],272:[function(e,t,r){"use strict";var a=e("./font_attributes");var n=e("../components/fx/attributes");t.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:true},visible:{valType:"enumerated",values:[true,false,"legendonly"],dflt:true,editType:"calc"},showlegend:{valType:"boolean",dflt:true,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:a({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:true},ids:{valType:"data_array",editType:"calc",anim:true},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:true,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:true,dflt:"all",editType:"none"},hoverlabel:n.hoverlabel,stream:{token:{valType:"string",noBlank:true,strict:true,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":131,"./font_attributes":305}],273:[function(e,t,r){"use strict";var _=e("fast-isnumeric");var a=e("../../lib");var w=a.dateTime2ms;var T=a.incrementMonth;var n=e("../../constants/numerical");var k=n.ONEAVGMONTH;t.exports=function e(t,r,a,n){if(r.type!=="date")return n;var i=t[a+"periodalignment"];if(!i)return n;var o=t[a+"period"];var s;if(_(o)){o=+o;if(o<=0)return n}else if(typeof o==="string"&&o.charAt(0)==="M"){var l=+o.substring(1);if(l>0&&Math.round(l)===l){s=l}else return n}var u=r.calendar;var c="start"===i;var f="end"===i;var d=t[a+"period0"];var v=w(d,u)||0;var p=[];var h=n.length;for(var m=0;m<h;m++){var g=n[m];var y,x,b;if(s){y=Math.round((g-v)/(s*k));b=T(v,s*y,u);while(b>g){b=T(b,-s,u)}while(b<=g){b=T(b,s,u)}x=T(b,-s,u)}else{y=Math.round((g-v)/o);b=v+y*o;while(b>g){b-=o}while(b<=g){b+=o}x=b-o}p[m]=c?x:f?b:(x+b)/2}return p}},{"../../constants/numerical":210,"../../lib":230,"fast-isnumeric":15}],274:[function(e,t,r){"use strict";t.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],275:[function(e,t,r){"use strict";var y=e("@plotly/d3");var E=e("fast-isnumeric");var O=e("../../lib");var L=e("../../constants/numerical").FP_SAFE;var s=e("../../registry");var x=e("../../components/drawing");var a=e("./axis_ids");var m=a.getFromId;var l=a.isLinked;t.exports={getAutoRange:u,makePadFn:P,doAutoRange:n,findExtremes:i,concatExtremes:R};function u(e,t){var r,a;var n=[];var i=e._fullLayout;var o=P(i,t,0);var s=P(i,t,1);var l=R(e,t);var u=l.min;var c=l.max;if(u.length===0||c.length===0){return O.simpleMap(t.range,t.r2l)}var f=u[0].val;var d=c[0].val;for(r=1;r<u.length;r++){if(f!==d)break;f=Math.min(f,u[r].val)}for(r=1;r<c.length;r++){if(f!==d)break;d=Math.max(d,c[r].val)}var v=false;if(t.range){var p=O.simpleMap(t.range,t.r2l);v=p[1]<p[0]}if(t.autorange==="reversed"){v=true;t.autorange=true}var h=t.rangemode;var m=h==="tozero";var g=h==="nonnegative";var y=t._length;var x=y/10;var b=0;var _,w,T,k,M,A;for(r=0;r<u.length;r++){_=u[r];for(a=0;a<c.length;a++){w=c[a];A=w.val-_.val-I(t,_.val,w.val);if(A>0){M=y-o(_)-s(w);if(M>x){if(A/M>b){T=_;k=w;b=A/M}}else if(A/y>b){T={val:_.val,nopad:1};k={val:w.val,nopad:1};b=A/y}}}}function S(e,t){return Math.max(e,s(t))}if(f===d){var E=f-1;var L=f+1;if(m){if(f===0){n=[0,1]}else{var C=(f>0?c:u).reduce(S,0);var D=f/(1-Math.min(.5,C/y));n=f>0?[0,D]:[D,0]}}else if(g){n=[Math.max(0,E),Math.max(1,L)]}else{n=[E,L]}}else{if(m){if(T.val>=0){T={val:0,nopad:1}}if(k.val<=0){k={val:0,nopad:1}}}else if(g){if(T.val-b*o(T)<0){T={val:0,nopad:1}}if(k.val<=0){k={val:1,nopad:1}}}b=(k.val-T.val-I(t,_.val,w.val))/(y-o(T)-s(k));n=[T.val-b*o(T),k.val+b*s(k)]}if(v)n.reverse();return O.simpleMap(n,t.l2r||Number)}function I(e,t,r){var a=0;if(e.rangebreaks){var n=e.locateBreaks(t,r);for(var i=0;i<n.length;i++){var o=n[i];a+=o.max-o.min}}return a}function P(e,t,r){var a=.05*t._length;var n=t._anchorAxis||{};if((t.ticklabelposition||"").indexOf("inside")!==-1||(n.ticklabelposition||"").indexOf("inside")!==-1){var i=t.autorange==="reversed";if(!i){var o=O.simpleMap(t.range,t.r2l);i=o[1]<o[0]}if(i)r=!r}var s=0;if(!l(e,t._id)){s=c(e,t,r)}a=Math.max(s,a);if(t.constrain==="domain"&&t._inputDomain){a*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])}return function e(t){if(t.nopad)return 0;return t.pad+(t.extrapad?a:s)}}var b=3;function c(e,t,r){var a=0;var n=t._id.charAt(0)==="x";for(var i in e._plots){var o=e._plots[i];if(t._id!==o.xaxis._id&&t._id!==o.yaxis._id)continue;var s=(n?o.yaxis:o.xaxis)||{};if((s.ticklabelposition||"").indexOf("inside")!==-1){if(!r&&(s.side==="left"||s.side==="bottom")||r&&(s.side==="top"||s.side==="right")){if(s._vals){var l=O.deg2rad(s._tickAngles[s._id+"tick"]||0);var u=Math.abs(Math.cos(l));var c=Math.abs(Math.sin(l));if(!s._vals[0].bb){var f=s._id+"tick";var d=s._selections[f];d.each(function(e){var t=y.select(this);var r=t.select(".text-math-group");if(r.empty()){e.bb=x.bBox(t.node())}})}for(var v=0;v<s._vals.length;v++){var p=s._vals[v];var h=p.bb;if(h){var m=2*b+h.width;var g=2*b+h.height;a=Math.max(a,n?Math.max(m*u,g*c):Math.max(g*u,m*c))}}}if(s.ticks==="inside"&&s.ticklabelposition==="inside"){a+=s.ticklen||0}}}}return a}function R(e,t,r){var n=t._id;var a=e._fullData;var i=e._fullLayout;var o=[];var s=[];var l,u,c;function f(e,t){for(l=0;l<t.length;l++){var r=e[t[l]];var a=(r._extremes||{})[n];if(r.visible===true&&a){for(u=0;u<a.min.length;u++){c=a.min[u];C(o,c.val,c.pad,{extrapad:c.extrapad})}for(u=0;u<a.max.length;u++){c=a.max[u];D(s,c.val,c.pad,{extrapad:c.extrapad})}}}}f(a,t._traceIndices);f(i.annotations||[],t._annIndices||[]);f(i.shapes||[],t._shapeIndices||[]);if(t._matchGroup&&!r){for(var d in t._matchGroup){if(d!==t._id){var v=m(e,d);var p=R(e,v,true);var h=t._length/v._length;for(u=0;u<p.min.length;u++){c=p.min[u];C(o,c.val,c.pad*h,{extrapad:c.extrapad})}for(u=0;u<p.max.length;u++){c=p.max[u];D(s,c.val,c.pad*h,{extrapad:c.extrapad})}}}}return{min:o,max:s}}function n(e,t,r){t.setScale();if(t.autorange){t.range=r?r.slice():u(e,t);t._r=t.range.slice();t._rl=O.simpleMap(t._r,t.r2l);var a=t._input;var n={};n[t._attr+".range"]=t.range;n[t._attr+".autorange"]=t.autorange;s.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,n);a.range=t.range.slice();a.autorange=t.autorange}var i=t._anchorAxis;if(i&&i.rangeslider){var o=i.rangeslider[t._name];if(o){if(o.rangemode==="auto"){o.range=u(e,t)}}i._input.rangeslider[t._name]=O.extendFlat({},o)}}function i(t,r,e){if(!e)e={};if(!t._m)t.setScale();var a=[];var n=[];var i=r.length;var o=e.padded||false;var s=e.tozero&&(t.type==="linear"||t.type==="-");var l=t.type==="log";var u=false;var c=e.vpadLinearized||false;var f,d,v,p,h,m,g,y,x;function b(t){if(Array.isArray(t)){u=true;return function(e){return Math.max(Number(t[e]||0),0)}}else{var e=Math.max(Number(t||0),0);return function(){return e}}}var _=b((t._m>0?e.ppadplus:e.ppadminus)||e.ppad||0);var w=b((t._m>0?e.ppadminus:e.ppadplus)||e.ppad||0);var T=b(e.vpadplus||e.vpad);var k=b(e.vpadminus||e.vpad);if(!u){y=Infinity;x=-Infinity;if(l){for(f=0;f<i;f++){d=r[f];if(d<y&&d>0)y=d;if(d>x&&d<L)x=d}}else{for(f=0;f<i;f++){d=r[f];if(d<y&&d>-L)y=d;if(d>x&&d<L)x=d}}r=[y,x];i=2}var M={tozero:s,extrapad:o};function A(e){v=r[e];if(!E(v))return;m=_(e);g=w(e);if(c){p=t.c2l(v)-k(e);h=t.c2l(v)+T(e)}else{y=v-k(e);x=v+T(e);if(l&&y<x/10)y=x/10;p=t.c2l(y);h=t.c2l(x)}if(s){p=Math.min(0,p);h=Math.max(0,h)}if(N(p)){C(a,p,g,M)}if(N(h)){D(n,h,m,M)}}var S=Math.min(6,i);for(f=0;f<S;f++)A(f);for(f=i-1;f>=S;f--)A(f);return{min:a,max:n,opts:e}}function C(e,t,r,a){o(e,t,r,a,f)}function D(e,t,r,a){o(e,t,r,a,d)}function o(e,t,r,a,n){var i=a.tozero;var o=a.extrapad;var s=true;for(var l=0;l<e.length&&s;l++){var u=e[l];if(n(u.val,t)&&u.pad>=r&&(u.extrapad||!o)){s=false;break}else if(n(t,u.val)&&u.pad<=r&&(o||!u.extrapad)){e.splice(l,1);l--}}if(s){var c=i&&t===0;e.push({val:t,pad:c?0:r,extrapad:c?false:o})}}function N(e){return E(e)&&Math.abs(e)<L}function f(e,t){return e<=t}function d(e,t){return e>=t}},{"../../components/drawing":122,"../../constants/numerical":210,"../../lib":230,"../../registry":313,"./axis_ids":280,"@plotly/d3":11,"fast-isnumeric":15}],276:[function(e,t,r){"use strict";var M=e("@plotly/d3");var E=e("fast-isnumeric");var Y=e("../../plots/plots");var V=e("../../registry");var G=e("../../lib");var v=G.strTranslate;var m=e("../../lib/svg_text_utils");var g=e("../../components/titles");var c=e("../../components/color");var A=e("../../components/drawing");var b=e("./layout_attributes");var y=e("./clean_ticks");var a=e("../../constants/numerical");var x=a.ONEMAXYEAR;var _=a.ONEAVGYEAR;var w=a.ONEMINYEAR;var T=a.ONEMAXQUARTER;var k=a.ONEAVGQUARTER;var S=a.ONEMINQUARTER;var L=a.ONEMAXMONTH;var C=a.ONEAVGMONTH;var D=a.ONEMINMONTH;var O=a.ONEWEEK;var I=a.ONEDAY;var P=I/2;var R=a.ONEHOUR;var f=a.ONEMIN;var d=a.ONESEC;var h=a.MINUS_SIGN;var N=a.BADNUM;var u={K:"zeroline"};var z={K:"gridline",L:"path"};var F={K:"tick",L:"path"};var j={K:"tick",L:"text"};var n=e("../../constants/alignment");var H=n.MID_SHIFT;var B=n.CAP_SHIFT;var W=n.LINE_SPACING;var $=n.OPPOSITE_SIDE;var q=3;var Z=t.exports={};Z.setConvert=e("./set_convert");var s=e("./axis_autotype");var i=e("./axis_ids");var o=i.idSort;var U=i.isLinked;Z.id2name=i.id2name;Z.name2id=i.name2id;Z.cleanId=i.cleanId;Z.list=i.list;Z.listIds=i.listIds;Z.getFromId=i.getFromId;Z.getFromTrace=i.getFromTrace;var l=e("./autorange");Z.getAutoRange=l.getAutoRange;Z.findExtremes=l.findExtremes;var p=1e-4;function X(e){var t=(e[1]-e[0])*p;return[e[0]-t,e[1]+t]}Z.coerceRef=function(e,t,r,a,n,i){var o=a.charAt(a.length-1);var s=r._fullLayout._subplots[o+"axis"];var l=a+"ref";var u={};if(!n)n=s[0]||(typeof i==="string"?i:i[0]);if(!i)i=n;s=s.concat(s.map(function(e){return e+" domain"}));u[l]={valType:"enumerated",values:s.concat(i?typeof i==="string"?[i]:i:[]),dflt:n};return G.coerce(e,t,u,l)};Z.getRefType=function(e){if(e===undefined){return e}if(e==="paper"){return"paper"}if(e==="pixel"){return"pixel"}if(/( domain)$/.test(e)){return"domain"}else{return"range"}};Z.coercePosition=function(e,t,r,a,n,i){var o,s;var l=Z.getRefType(a);if(l!=="range"){o=G.ensureNumber;s=r(n,i)}else{var u=Z.getFromId(t,a);i=u.fraction2r(i);s=r(n,i);o=u.cleanPos}e[n]=o(s)};Z.cleanPosition=function(e,t,r){var a=r==="paper"||r==="pixel"?G.ensureNumber:Z.getFromId(t,r).cleanPos;return a(e)};Z.redrawComponents=function(f,d){d=d?d:Z.listIds(f);var v=f._fullLayout;function e(e,t,r,a){var n=V.getComponentMethod(e,t);var i={};for(var o=0;o<d.length;o++){var s=v[Z.id2name(d[o])];var l=s[r];for(var u=0;u<l.length;u++){var c=l[u];if(!i[c]){n(f,c);i[c]=1;if(a)return}}}}e("annotations","drawOne","_annIndices");e("shapes","drawOne","_shapeIndices");e("images","draw","_imgIndices",true)};var J=Z.getDataConversions=function(e,t,r,a){var n;var i=r==="x"||r==="y"||r==="z"?r:a;if(Array.isArray(i)){n={type:s(a,undefined,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]};Z.setConvert(n);if(n.type==="category"){for(var o=0;o<a.length;o++){n.d2c(a[o])}}}else{n=Z.getFromTrace(e,t,i)}if(n)return{d2c:n.d2c,c2d:n.c2d};if(i==="ids")return{d2c:Q,c2d:Q};return{d2c:K,c2d:K}};function K(e){return+e}function Q(e){return String(e)}Z.getDataToCoordFunc=function(e,t,r,a){return J(e,t,r,a).d2c};Z.counterLetter=function(e){var t=e.charAt(0);if(t==="x")return"y";if(t==="y")return"x"};Z.minDtick=function(e,t,r,a){if(["log","category","multicategory"].indexOf(e.type)!==-1||!a){e._minDtick=0}else if(e._minDtick===undefined){e._minDtick=t;e._forceTick0=r}else if(e._minDtick){if((e._minDtick/t+1e-6)%1<2e-6&&((r-e._forceTick0)/t%1+1.000001)%1<2e-6){e._minDtick=t;e._forceTick0=r}else if((t/e._minDtick+1e-6)%1>2e-6||((r-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6){e._minDtick=0}}};Z.saveRangeInitial=function(e,t){var r=Z.list(e,"",true);var a=false;for(var n=0;n<r.length;n++){var i=r[n];var o=i._rangeInitial===undefined;var s=o||!(i.range[0]===i._rangeInitial[0]&&i.range[1]===i._rangeInitial[1]);if(o&&i.autorange===false||t&&s){i._rangeInitial=i.range.slice();a=true}}return a};Z.saveShowSpikeInitial=function(e,t){var r=Z.list(e,"",true);var a=false;var n="on";for(var i=0;i<r.length;i++){var o=r[i];var s=o._showSpikeInitial===undefined;var l=s||!(o.showspikes===o._showspikes);if(s||t&&l){o._showSpikeInitial=o.showspikes;a=true}if(n==="on"&&!o.showspikes){n="off"}}e._fullLayout._cartesianSpikesEnabled=n;return a};Z.autoBin=function(e,t,r,a,n,i){var o=G.aggNums(Math.min,null,e);var s=G.aggNums(Math.max,null,e);if(t.type==="category"||t.type==="multicategory"){return{start:o-.5,end:s+.5,size:Math.max(1,Math.round(i)||1),_dataSpan:s-o}}if(!n)n=t.calendar;var l;if(t.type==="log"){l={type:"linear",range:[o,s]}}else{l={type:t.type,range:G.simpleMap([o,s],t.c2r,0,n),calendar:n}}Z.setConvert(l);i=i&&y.dtick(i,l.type);if(i){l.dtick=i;l.tick0=y.tick0(undefined,l.type,n)}else{var u;if(r)u=(s-o)/r;else{var c=G.distinctVals(e);var f=Math.pow(10,Math.floor(Math.log(c.minDiff)/Math.LN10));var d=f*G.roundUp(c.minDiff/f,[.9,1.9,4.9,9.9],true);u=Math.max(d,2*G.stdev(e)/Math.pow(e.length,a?.25:.4));if(!E(u))u=1}Z.autoTicks(l,u)}var v=l.dtick;var p=Z.tickIncrement(Z.tickFirst(l),v,"reverse",n);var h,m;if(typeof v==="number"){p=ee(p,e,l,o,s);m=1+Math.floor((s-p)/v);h=p+m*v}else{if(l.dtick.charAt(0)==="M"){p=te(p,e,v,o,n)}h=p;m=0;while(h<=s){h=Z.tickIncrement(h,v,false,n);m++}}return{start:t.c2r(p,0,n),end:t.c2r(h,0,n),size:v,_dataSpan:s-o}};function ee(t,e,r,a,n){var i=0;var o=0;var s=0;var l=0;function u(e){return(1+(e-t)*100/r.dtick)%100<2}for(var c=0;c<e.length;c++){if(e[c]%1===0)s++;else if(!E(e[c]))l++;if(u(e[c]))i++;if(u(e[c]+r.dtick/2))o++}var f=e.length-l;if(s===f&&r.type!=="date"){if(r.dtick<1){t=a-.5*r.dtick}else{t-=.5;if(t+r.dtick<a)t+=r.dtick}}else if(o<f*.1){if(i>f*.3||u(a)||u(n)){var d=r.dtick/2;t+=t+d<a?d:-d}}return t}function te(e,t,r,a,n){var i=G.findExactDates(t,n);var o=.8;if(i.exactDays>o){var s=Number(r.substr(1));if(i.exactYears>o&&s%12===0){e=Z.tickIncrement(e,"M6","reverse")+I*1.5}else if(i.exactMonths>o){e=Z.tickIncrement(e,"M1","reverse")+I*15.5}else{e-=P}var l=Z.tickIncrement(e,r);if(l<=a)return l}return e}Z.prepTicks=function(e,t){var r=G.simpleMap(e.range,e.r2l,undefined,undefined,t);e._dtickInit=e.dtick;e._tick0Init=e.tick0;if(e.tickmode==="auto"||!e.dtick){var a=e.nticks;var n;if(!a){if(e.type==="category"||e.type==="multicategory"){n=e.tickfont?G.bigFont(e.tickfont.size||12):15;a=e._length/n}else{n=e._id.charAt(0)==="y"?40:80;a=G.constrain(e._length/n,4,9)+1}if(e._name==="radialaxis")a*=2}if(e.tickmode==="array")a*=100;e._roughDTick=Math.abs(r[1]-r[0])/a;Z.autoTicks(e,e._roughDTick);if(e._minDtick>0&&e.dtick<e._minDtick*2){e.dtick=e._minDtick;e.tick0=e.l2r(e._forceTick0)}}if(e.ticklabelmode==="period"){ae(e)}if(!e.tick0){e.tick0=e.type==="date"?"2000-01-01":0}if(e.type==="date"&&e.dtick<.1)e.dtick=.1;pe(e)};function re(e){return+e.substring(1)}function ae(e){var t;function r(){return!(E(e.dtick)||e.dtick.charAt(0)!=="M")}var a=r();var n=Z.getTickFormat(e);if(n){var i=e._dtickInit!==e.dtick;if(!/%[fLQsSMX]/.test(n)){if(/%[HI]/.test(n)){t=R;if(i&&!a&&e.dtick<R)e.dtick=R}else if(/%p/.test(n)){t=P;if(i&&!a&&e.dtick<P)e.dtick=P}else if(/%[Aadejuwx]/.test(n)){t=I;if(i&&!a&&e.dtick<I)e.dtick=I}else if(/%[UVW]/.test(n)){t=O;if(i&&!a&&e.dtick<O)e.dtick=O}else if(/%[Bbm]/.test(n)){t=C;if(i&&(a?re(e.dtick)<1:e.dtick<D))e.dtick="M1"}else if(/%[q]/.test(n)){t=k;if(i&&(a?re(e.dtick)<3:e.dtick<S))e.dtick="M3"}else if(/%[Yy]/.test(n)){t=_;if(i&&(a?re(e.dtick)<12:e.dtick<w))e.dtick="M12"}}}a=r();if(a&&e.tick0===e._dowTick0){e.tick0=e._rawTick0}e._definedDelta=t}function ne(e,t,r){for(var a=0;a<e.length;a++){var n=e[a].value;var i=a;var o=a+1;if(a<e.length-1){i=a;o=a+1}else if(a>0){i=a-1;o=a}else{i=a;o=a}var s=e[i].value;var l=e[o].value;var u=Math.abs(l-s);var c=r||u;var f=0;if(c>=w){if(u>=w&&u<=x){f=u}else{f=_}}else if(r===k&&c>=S){if(u>=S&&u<=T){f=u}else{f=k}}else if(c>=D){if(u>=D&&u<=L){f=u}else{f=C}}else if(r===O&&c>=O){f=O}else if(c>=I){f=I}else if(r===P&&c>=P){f=P}else if(r===R&&c>=R){f=R}var d;if(f>=u){f=u;d=true}var v=n+f;if(t.rangebreaks&&f>0){var p=84;var h=0;for(var m=0;m<p;m++){var g=(m+.5)/p;if(t.maskBreaks(n*(1-g)+g*v)!==N)h++}f*=h/p;if(!f){e[a].drop=true}if(d&&u>O)f=u}if(f>0||a===0){e[a].periodX=n+f/2}}}Z.calcTicks=function e(t,r){Z.prepTicks(t,r);var a=G.simpleMap(t.range,t.r2l,undefined,undefined,r);if(t.tickmode==="array")return ie(t);var n=X(a);var i=n[0];var o=n[1];var s=a[1]<a[0];var l=Math.min(a[0],a[1]);var u=Math.max(a[0],a[1]);var c=t.type==="log"&&!(E(t.dtick)||t.dtick.charAt(0)==="L");var f=t.ticklabelmode==="period";t._tmin=Z.tickFirst(t,r);if(t._tmin<i!==s)return[];if(t.type==="category"||t.type==="multicategory"){o=s?Math.max(-.5,o):Math.min(t._categories.length-.5,o)}var d=t._tmin;if(t.rangebreaks&&t._tick0Init!==t.tick0){d=Ze(d,t);if(!s){d=Z.tickIncrement(d,t.dtick,!s,t.calendar)}}if(f){d=Z.tickIncrement(d,t.dtick,!s,t.calendar)}var v=Math.max(1e3,t._length||0);var p=[];var h=null;for(;s?d>=o:d<=o;d=Z.tickIncrement(d,t.dtick,s,t.calendar)){if(t.rangebreaks){if(!s){if(d<i)continue;if(t.maskBreaks(d)===N&&Ze(d,t)>=u)break}}if(p.length>v||d===h)break;h=d;var m=false;if(c&&d!==(d|0)){m=true}p.push({minor:m,value:d})}if(f)ne(p,t,t._definedDelta);var g;if(t.rangebreaks){var y=t._id.charAt(0)==="y";var x=1;if(t.tickmode==="auto"){x=t.tickfont?t.tickfont.size:12}var b=NaN;for(g=p.length-1;g>-1;g--){if(p[g].drop){p.splice(g,1);continue}p[g].value=Ze(p[g].value,t);var _=t.c2p(p[g].value);if(y?b>_-x:b<_+x){p.splice(s?g+1:g,1)}else{b=_}}}if($e(t)&&Math.abs(a[1]-a[0])===360){p.pop()}t._tmax=(p[p.length-1]||{}).value;t._prevDateHead="";t._inCalcTicks=true;var w=[];var T,k;for(g=0;g<p.length;g++){var M=p[g].minor;var A=p[g].value;T=Z.tickText(t,A,false,M);k=p[g].periodX;if(k!==undefined){T.periodX=k;if(k>u||k<l){if(k>u)T.periodX=u;if(k<l)T.periodX=l;T.text=" ";t._prevDateHead=""}}w.push(T)}t._inCalcTicks=false;return w};function ie(t){var e=t.tickvals;var r=t.ticktext;var a=new Array(e.length);var n=G.simpleMap(t.range,t.r2l);var i=X(n);var o=Math.min(i[0],i[1]);var s=Math.max(i[0],i[1]);var l=0;if(!Array.isArray(r))r=[];var u=t.type==="category"?t.d2l_noadd:t.d2l;if(t.type==="log"&&String(t.dtick).charAt(0)!=="L"){t.dtick="L"+Math.pow(10,Math.floor(Math.min(t.range[0],t.range[1]))-1)}for(var c=0;c<e.length;c++){var f=u(e[c]);if(f>o&&f<s){if(r[c]===undefined)a[l]=Z.tickText(t,f);else a[l]=he(t,f,String(r[c]));l++}}if(l<e.length)a.splice(l,e.length-l);if(t.rangebreaks){a=a.filter(function(e){return t.maskBreaks(e.x)!==N})}return a}var oe=[2,5,10];var se=[1,2,3,6,12];var le=[1,2,5,10,15,30];var ue=[1,2,3,7,14];var ce=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1];var fe=[-.301,0,.301,.699,1];var de=[15,30,45,90,180];function ve(e,t,r){return t*G.roundUp(e/t,r)}Z.autoTicks=function(e,t){var r;function a(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if(e.type==="date"){e.tick0=G.dateTick0(e.calendar,0);var n=2*t;if(n>_){t/=_;r=a(10);e.dtick="M"+12*ve(t,r,oe)}else if(n>C){t/=C;e.dtick="M"+ve(t,1,se)}else if(n>I){e.dtick=ve(t,I,e._hasDayOfWeekBreaks?[1,2,7,14]:ue);var i=Z.getTickFormat(e);var o=e.ticklabelmode==="period";if(o)e._rawTick0=e.tick0;if(/%[uVW]/.test(i)){e.tick0=G.dateTick0(e.calendar,2)}else{e.tick0=G.dateTick0(e.calendar,1)}if(o)e._dowTick0=e.tick0}else if(n>R){e.dtick=ve(t,R,se)}else if(n>f){e.dtick=ve(t,f,le)}else if(n>d){e.dtick=ve(t,d,le)}else{r=a(10);e.dtick=ve(t,r,oe)}}else if(e.type==="log"){e.tick0=0;var s=G.simpleMap(e.range,e.r2l);if(t>.7){e.dtick=Math.ceil(t)}else if(Math.abs(s[1]-s[0])<1){var l=1.5*Math.abs((s[1]-s[0])/t);t=Math.abs(Math.pow(10,s[1])-Math.pow(10,s[0]))/l;r=a(10);e.dtick="L"+ve(t,r,oe)}else{e.dtick=t>.3?"D2":"D1"}}else if(e.type==="category"||e.type==="multicategory"){e.tick0=0;e.dtick=Math.ceil(Math.max(t,1))}else if($e(e)){e.tick0=0;r=1;e.dtick=ve(t,r,de)}else{e.tick0=0;r=a(10);e.dtick=ve(t,r,oe)}if(e.dtick===0)e.dtick=1;if(!E(e.dtick)&&typeof e.dtick!=="string"){var u=e.dtick;e.dtick=1;throw"ax.dtick error: "+String(u)}};function pe(e){var t=e.dtick;e._tickexponent=0;if(!E(t)&&typeof t!=="string"){t=1}if(e.type==="category"||e.type==="multicategory"){e._tickround=null}if(e.type==="date"){var r=e.r2l(e.tick0);var a=e.l2r(r).replace(/(^-|i)/g,"");var n=a.length;if(String(t).charAt(0)==="M"){if(n>10||a.substr(5)!=="01-01")e._tickround="d";else e._tickround=+t.substr(1)%12===0?"y":"m"}else if(t>=I&&n<=10||t>=I*15)e._tickround="d";else if(t>=f&&n<=16||t>=R)e._tickround="M";else if(t>=d&&n<=19||t>=f)e._tickround="S";else{var i=e.l2r(r+t).replace(/^-/,"").length;e._tickround=Math.max(n,i)-20;if(e._tickround<0)e._tickround=4}}else if(E(t)||t.charAt(0)==="L"){var o=e.range.map(e.r2d||Number);if(!E(t))t=Number(t.substr(1));e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var s=Math.max(Math.abs(o[0]),Math.abs(o[1]));var l=Math.floor(Math.log(s)/Math.LN10+.01);var u=e.minexponent===undefined?3:e.minexponent;if(Math.abs(l)>u){if(ke(e.exponentformat)&&!Me(l)){e._tickexponent=3*Math.round((l-1)/3)}else e._tickexponent=l}}else{e._tickround=null}}Z.tickIncrement=function(e,t,r,a){var n=r?-1:1;if(E(t))return G.increment(e,n*t);var i=t.charAt(0);var o=n*Number(t.substr(1));if(i==="M")return G.incrementMonth(e,o,a);if(i==="L")return Math.log(Math.pow(10,e)+o)/Math.LN10;if(i==="D"){var s=t==="D2"?fe:ce;var l=e+n*.01;var u=G.roundUp(G.mod(l,1),s,r);return Math.floor(l)+Math.log(M.round(Math.pow(10,u),1))/Math.LN10}throw"unrecognized dtick "+String(t)};Z.tickFirst=function(e,t){var r=e.r2l||Number;var a=G.simpleMap(e.range,r,undefined,undefined,t);var n=a[1]<a[0];var i=n?Math.floor:Math.ceil;var o=X(a)[0];var s=e.dtick;var l=r(e.tick0);if(E(s)){var u=i((o-l)/s)*s+l;if(e.type==="category"||e.type==="multicategory"){u=G.constrain(u,0,e._categories.length-1)}return u}var c=s.charAt(0);var f=Number(s.substr(1));if(c==="M"){var d=0;var v=l;var p,h,m;while(d<10){p=Z.tickIncrement(v,s,n,e.calendar);if((p-o)*(v-o)<=0){if(n)return Math.min(v,p);return Math.max(v,p)}h=(o-(v+p)/2)/(p-v);m=c+(Math.abs(Math.round(h))||1)*f;v=Z.tickIncrement(v,m,h<0?!n:n,e.calendar);d++}G.error("tickFirst did not converge",e);return v}else if(c==="L"){return Math.log(i((Math.pow(10,o)-l)/f)*f+l)/Math.LN10}else if(c==="D"){var g=s==="D2"?fe:ce;var y=G.roundUp(G.mod(o,1),g,n);return Math.floor(o)+Math.log(M.round(Math.pow(10,y),1))/Math.LN10}else throw"unrecognized dtick "+String(s)};Z.tickText=function(r,a,n,e){var t=he(r,a);var i=r.tickmode==="array";var o=n||i;var s=r.type;var l=s==="category"?r.d2l_noadd:r.d2l;var u;if(i&&Array.isArray(r.ticktext)){var c=G.simpleMap(r.range,r.r2l);var f=(Math.abs(c[1]-c[0])-(r._lBreaks||0))/1e4;for(u=0;u<r.ticktext.length;u++){if(Math.abs(a-l(r.tickvals[u]))<f)break}if(u<r.ticktext.length){t.text=String(r.ticktext[u]);return t}}function d(e){if(e===undefined)return true;if(n)return e==="none";var t={first:r._tmin,last:r._tmax}[e];return e!=="all"&&a!==t}var v=n?"never":r.exponentformat!=="none"&&d(r.showexponent)?"hide":"";if(s==="date")me(r,t,n,o);else if(s==="log")ge(r,t,n,o,v);else if(s==="category")ye(r,t);else if(s==="multicategory")xe(r,t,n);else if($e(r))_e(r,t,n,o,v);else be(r,t,n,o,v);if(!e){if(r.tickprefix&&!d(r.showtickprefix))t.text=r.tickprefix+t.text;if(r.ticksuffix&&!d(r.showticksuffix))t.text+=r.ticksuffix}if(r.tickson==="boundaries"||r.showdividers){var p=function(e){var t=r.l2p(e);return t>=0&&t<=r._length?e:null};t.xbnd=[p(t.x-.5),p(t.x+r.dtick-.5)]}return t};Z.hoverLabelText=function(e,t,r){if(r)e=G.extendFlat({},e,{hoverformat:r});var a=Array.isArray(t)?t[0]:t;var n=Array.isArray(t)?t[1]:undefined;if(n!==undefined&&n!==a){return Z.hoverLabelText(e,a,r)+" - "+Z.hoverLabelText(e,n,r)}var i=e.type==="log"&&a<=0;var o=Z.tickText(e,e.c2l(i?-a:a),"hover").text;if(i){return a===0?"0":h+o}return o};function he(e,t,r){var a=e.tickfont||{};return{x:t,dx:0,dy:0,text:r||"",fontSize:a.size,font:a.family,fontColor:a.color}}function me(e,t,r,a){var n=e._tickround;var i=r&&e.hoverformat||Z.getTickFormat(e);if(a){if(E(n))n=4;else n={y:"m",m:"d",d:"M",M:"S",S:4}[n]}var o=G.formatDate(t.x,i,n,e._dateFormat,e.calendar,e._extraFormat);var s;var l=o.indexOf("\n");if(l!==-1){s=o.substr(l+1);o=o.substr(0,l)}if(a){if(o==="00:00:00"||o==="00:00"){o=s;s=""}else if(o.length===8){o=o.replace(/:00$/,"")}}if(s){if(r){if(n==="d")o+=", "+s;else o=s+(o?", "+o:"")}else{if(!e._inCalcTicks||e._prevDateHead!==s){e._prevDateHead=s;o+="<br>"+s}else{var u=Xe(e);var c=e._realSide||e.side;if(!u&&c==="top"||u&&c==="bottom"){o+="<br> "}}}}t.text=o}function ge(e,t,r,a,n){var i=e.dtick;var o=t.x;var s=e.tickformat;var l=typeof i==="string"&&i.charAt(0);if(n==="never"){n=""}if(a&&l!=="L"){i="L3";l="L"}if(s||l==="L"){t.text=Ae(Math.pow(10,o),e,n,a)}else if(E(i)||l==="D"&&G.mod(o+.01,1)<.1){var u=Math.round(o);var c=Math.abs(u);var f=e.exponentformat;if(f==="power"||ke(f)&&Me(u)){if(u===0)t.text=1;else if(u===1)t.text="10";else t.text="10<sup>"+(u>1?"":h)+c+"</sup>";t.fontSize*=1.25}else if((f==="e"||f==="E")&&c>2){t.text="1"+f+(u>0?"+":h)+c}else{t.text=Ae(Math.pow(10,o),e,"","fakehover");if(i==="D1"&&e._id.charAt(0)==="y"){t.dy-=t.fontSize/6}}}else if(l==="D"){t.text=String(Math.round(Math.pow(10,G.mod(o,1))));t.fontSize*=.75}else throw"unrecognized dtick "+String(i);if(e.dtick==="D1"){var d=String(t.text).charAt(0);if(d==="0"||d==="1"){if(e._id.charAt(0)==="y"){t.dx-=t.fontSize/4}else{t.dy+=t.fontSize/2;t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(o<0?.5:.25)}}}}function ye(e,t){var r=e._categories[Math.round(t.x)];if(r===undefined)r="";t.text=String(r)}function xe(e,t,r){var a=Math.round(t.x);var n=e._categories[a]||[];var i=n[1]===undefined?"":String(n[1]);var o=n[0]===undefined?"":String(n[0]);if(r){t.text=o+" - "+i}else{t.text=i;t.text2=o}}function be(e,t,r,a,n){if(n==="never"){n=""}else if(e.showexponent==="all"&&Math.abs(t.x/e.dtick)<1e-6){n="hide"}t.text=Ae(t.x,e,n,a)}function _e(e,t,r,a,n){if(e.thetaunit==="radians"&&!r){var i=t.x/180;if(i===0){t.text="0"}else{var o=we(i);if(o[1]>=100){t.text=Ae(G.deg2rad(t.x),e,n,a)}else{var s=t.x<0;if(o[1]===1){if(o[0]===1)t.text="π";else t.text=o[0]+"π"}else{t.text=["<sup>",o[0],"</sup>","⁄","<sub>",o[1],"</sub>","π"].join("")}if(s)t.text=h+t.text}}}else{t.text=Ae(t.x,e,n,a)}}function we(e){function r(e,t){return Math.abs(e-t)<=1e-6}function a(e,t){return r(t,0)?e:a(t,e%t)}function t(e){var t=1;while(!r(Math.round(e*t)/t,e)){t*=10}return t}var n=t(e);var i=e*n;var o=Math.abs(a(i,n));return[Math.round(i/o),Math.round(n/o)]}var Te=["f","p","n","μ","m","","k","M","G","T"];function ke(e){return e==="SI"||e==="B"}function Me(e){return e>14||e<-15}function Ae(e,t,r,a){var n=e<0;var i=t._tickround;var o=r||t.exponentformat||"B";var s=t._tickexponent;var l=Z.getTickFormat(t);var u=t.separatethousands;if(a){var c={exponentformat:o,minexponent:t.minexponent,dtick:t.showexponent==="none"?t.dtick:E(e)?Math.abs(e)||1:1,range:t.showexponent==="none"?t.range.map(t.r2d):[0,e||1]};pe(c);i=(Number(c._tickround)||0)+4;s=c._tickexponent;if(t.hoverformat)l=t.hoverformat}if(l)return t._numFormat(l)(e).replace(/-/g,h);var f=Math.pow(10,-i)/2;if(o==="none")s=0;e=Math.abs(e);if(e<f){e="0";n=false}else{e+=f;if(s){e*=Math.pow(10,-s);i+=s}if(i===0)e=String(Math.floor(e));else if(i<0){e=String(Math.round(e));e=e.substr(0,e.length+i);for(var d=i;d<0;d++)e+="0"}else{e=String(e);var v=e.indexOf(".")+1;if(v)e=e.substr(0,v+i).replace(/\.?0+$/,"")}e=G.numSeparate(e,t._separators,u)}if(s&&o!=="hide"){if(ke(o)&&Me(s))o="power";var p;if(s<0)p=h+-s;else if(o!=="power")p="+"+s;else p=String(s);if(o==="e"||o==="E"){e+=o+p}else if(o==="power"){e+="×10<sup>"+p+"</sup>"}else if(o==="B"&&s===9){e+="B"}else if(ke(o)){e+=Te[s/3+5]}}if(n)return h+e;return e}Z.getTickFormat=function(e){var t;function r(e){return typeof e!=="string"?e:Number(e.replace("M",""))*C}function o(e,t){var r=["L","D"];if(typeof e===typeof t){if(typeof e==="number"){return e-t}else{var a=r.indexOf(e.charAt(0));var n=r.indexOf(t.charAt(0));if(a===n){return Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,""))}else{return a-n}}}else{return typeof e==="number"?1:-1}}function a(e,t,r){var a=r||function(e){return e};var n=t[0];var i=t[1];return(!n&&typeof n!=="number"||a(n)<=a(e))&&(!i&&typeof i!=="number"||a(i)>=a(e))}function n(e,t){var r=t[0]===null;var a=t[1]===null;var n=o(e,t[0])>=0;var i=o(e,t[1])<=0;return(r||n)&&(a||i)}var i,s;if(e.tickformatstops&&e.tickformatstops.length>0){switch(e.type){case"date":case"linear":{for(t=0;t<e.tickformatstops.length;t++){s=e.tickformatstops[t];if(s.enabled&&a(e.dtick,s.dtickrange,r)){i=s;break}}break}case"log":{for(t=0;t<e.tickformatstops.length;t++){s=e.tickformatstops[t];if(s.enabled&&n(e.dtick,s.dtickrange)){i=s;break}}break}default:}}return i?i.value:e.tickformat};Z.getSubplots=function(e,t){var r=e._fullLayout._subplots;var a=r.cartesian.concat(r.gl2d||[]);var n=t?Z.findSubplotsWithAxis(a,t):a;n.sort(function(e,t){var r=e.substr(1).split("y");var a=t.substr(1).split("y");if(r[0]===a[0])return+r[1]-+a[1];return+r[0]-+a[0]});return n};Z.findSubplotsWithAxis=function(e,t){var r=new RegExp(t._id.charAt(0)==="x"?"^"+t._id+"y":t._id+"$");var a=[];for(var n=0;n<e.length;n++){var i=e[n];if(r.test(i))a.push(i)}return a};Z.makeClipPaths=function(e){var t=e._fullLayout;if(t._hasOnlyLargeSploms)return;var r={_offset:0,_length:t.width,_id:""};var a={_offset:0,_length:t.height,_id:""};var n=Z.list(e,"x",true);var i=Z.list(e,"y",true);var o=[];var s,l;for(s=0;s<n.length;s++){o.push({x:n[s],y:a});for(l=0;l<i.length;l++){if(s===0)o.push({x:r,y:i[l]});o.push({x:n[s],y:i[l]})}}var u=t._clips.selectAll(".axesclip").data(o,function(e){return e.x._id+e.y._id});u.enter().append("clipPath").classed("axesclip",true).attr("id",function(e){return"clip"+t._uid+e.x._id+e.y._id}).append("rect");u.exit().remove();u.each(function(e){M.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})};Z.draw=function(a,e,n){var i=a._fullLayout;if(e==="redraw"){i._paper.selectAll("g.subplot").each(function(e){var t=e[0];var r=i._plots[t];if(r){var a=r.xaxis;var n=r.yaxis;r.xaxislayer.selectAll("."+a._id+"tick").remove();r.yaxislayer.selectAll("."+n._id+"tick").remove();r.xaxislayer.selectAll("."+a._id+"tick2").remove();r.yaxislayer.selectAll("."+n._id+"tick2").remove();r.xaxislayer.selectAll("."+a._id+"divider").remove();r.yaxislayer.selectAll("."+n._id+"divider").remove();if(r.gridlayer)r.gridlayer.selectAll("path").remove();if(r.zerolinelayer)r.zerolinelayer.selectAll("path").remove();i._infolayer.select(".g-"+a._id+"title").remove();i._infolayer.select(".g-"+n._id+"title").remove()}})}var t=!e||e==="redraw"?Z.listIds(a):e;return G.syncOrAsync(t.map(function(r){return function(){if(!r)return;var e=Z.getFromId(a,r);var t=Z.drawOne(a,e,n);e._r=e.range.slice();e._rl=G.simpleMap(e._r,e.r2l);return t}}))};Z.drawOne=function(v,p,e){e=e||{};var t,r,a;p.setScale();var h=v._fullLayout;var n=p._id;var m=n.charAt(0);var g=Z.counterLetter(n);var i=h._plots[p._mainSubplot];if(!i)return;var o=i[m+"axislayer"];var s=p._mainLinePosition;var l=p._mainMirrorPosition;var u=p._vals=Z.calcTicks(p);var c=[p.mirror,s,l].join("_");for(t=0;t<u.length;t++){u[t].axInfo=c}p._selections={};if(p._tickAngles)p._prevTickAngles=p._tickAngles;p._tickAngles={};p._depth=null;var f={};function y(e){var t=n+(e||"tick");if(!f[t])f[t]=Ce(p,t);return f[t]}if(!p.visible)return;var d=Z.makeTransTickFn(p);var x=Z.makeTransTickLabelFn(p);var b;var _;var w=p.ticks==="inside";var T=p.ticks==="outside";if(p.tickson==="boundaries"){var k=Se(p,u);_=Z.clipEnds(p,k);b=w?_:k}else{_=Z.clipEnds(p,u);b=w&&p.ticklabelmode!=="period"?_:u}var M=p._gridVals=_;var A=Le(p,u);if(!h._hasOnlyLargeSploms){var S=p._subplotsWith;var E={};for(t=0;t<S.length;t++){r=S[t];a=h._plots[r];var L=a[g+"axis"];var C=L._mainAxis._id;if(E[C])continue;E[C]=1;var D=m==="x"?"M0,"+L._offset+"v"+L._length:"M"+L._offset+",0h"+L._length;Z.drawGrid(v,p,{vals:M,counterAxis:L,layer:a.gridlayer.select("."+n),path:D,transFn:d});Z.drawZeroLine(v,p,{counterAxis:L,layer:a.zerolinelayer,path:D,transFn:d})}}var O=Z.getTickSigns(p);var I=[];if(p.ticks){var P=Z.makeTickPath(p,s,O[2]);var R;var N;if(p._anchorAxis&&p.mirror&&p.mirror!==true){R=Z.makeTickPath(p,l,O[3]);N=P+R}else{R="";N=P}var z;if(p.showdividers&&T&&p.tickson==="boundaries"){var F={};for(t=0;t<A.length;t++){F[A[t].x]=1}z=function(e){return F[e.x]?R:N}}else{z=N}Z.drawTicks(v,p,{vals:b,layer:o,path:z,transFn:d});if(p.mirror==="allticks"){I=Object.keys(p._linepositions||{})}}for(t=0;t<I.length;t++){r=I[t];a=h._plots[r];var j=p._linepositions[r]||[];var H=Z.makeTickPath(p,j[0],O[0])+Z.makeTickPath(p,j[1],O[1]);Z.drawTicks(v,p,{vals:b,layer:a[m+"axislayer"],path:H,transFn:d})}var B=[];B.push(function(){return Z.drawLabels(v,p,{vals:u,layer:o,plotinfo:a,transFn:x,labelFns:Z.makeLabelFns(p,s)})});if(p.type==="multicategory"){var q={x:2,y:10}[m];B.push(function(){var e={x:"height",y:"width"}[m];var t=y()[e]+q+(p._tickAngles[n+"tick"]?p.tickfont.size*W:0);return Z.drawLabels(v,p,{vals:Ee(p,u),layer:o,cls:n+"tick2",repositionOnUpdate:true,secondary:true,transFn:d,labelFns:Z.makeLabelFns(p,s+t*O[4])})});B.push(function(){p._depth=O[4]*(y("tick2")[p.side]-s);return Pe(v,p,{vals:A,layer:o,path:Z.makeTickPath(p,s,O[4],p._depth),transFn:d})})}else if(p.title.hasOwnProperty("standoff")){B.push(function(){p._depth=O[4]*(y()[p.side]-s)})}var U=V.getComponentMethod("rangeslider","isVisible")(p);B.push(function(){var e=p.side.charAt(0);var t=$[p.side].charAt(0);var r=Z.getPxPosition(v,p);var a=T?p.ticklen:0;var n;var i;var o;var s;if(p.automargin||U){if(p.type==="multicategory"){n=y("tick2")}else{n=y();if(m==="x"&&e==="b"){p._depth=Math.max(n.width>0?n.bottom-r:0,a)}}}if(p.automargin){i={x:0,y:0,r:0,l:0,t:0,b:0};var l=[0,1];if(m==="x"){if(e==="b"){i[e]=p._depth}else{i[e]=p._depth=Math.max(n.width>0?r-n.top:0,a);l.reverse()}if(n.width>0){var u=n.right-(p._offset+p._length);if(u>0){i.xr=1;i.r=u}var c=p._offset-n.left;if(c>0){i.xl=0;i.l=c}}}else{if(e==="l"){i[e]=p._depth=Math.max(n.height>0?r-n.left:0,a)}else{i[e]=p._depth=Math.max(n.height>0?n.right-r:0,a);l.reverse()}if(n.height>0){var f=n.bottom-(p._offset+p._length);if(f>0){i.yb=0;i.b=f}var d=p._offset-n.top;if(d>0){i.yt=1;i.t=d}}}i[g]=p.anchor==="free"?p.position:p._anchorAxis.domain[l[0]];if(p.title.text!==h._dfltTitle[m]){i[e]+=Re(p)+(p.title.standoff||0)}if(p.mirror&&p.anchor!=="free"){o={x:0,y:0,r:0,l:0,t:0,b:0};o[t]=p.linewidth;if(p.mirror&&p.mirror!==true)o[t]+=a;if(p.mirror===true||p.mirror==="ticks"){o[g]=p._anchorAxis.domain[l[1]]}else if(p.mirror==="all"||p.mirror==="allticks"){o[g]=[p._counterDomainMin,p._counterDomainMax][l[1]]}}}if(U){s=V.getComponentMethod("rangeslider","autoMarginOpts")(v,p)}Y.autoMargin(v,Be(p),i);Y.autoMargin(v,qe(p),o);Y.autoMargin(v,Ue(p),s)});if(!e.skipTitle&&!(U&&p.side==="bottom")){B.push(function(){return Ne(v,p)})}return G.syncOrAsync(B)};function Se(e,t){var a=[];var r;var n=function(e,t){var r=e.xbnd[t];if(r!==null){a.push(G.extendFlat({},e,{x:r}))}};if(t.length){for(r=0;r<t.length;r++){n(t[r],0)}n(t[r-1],1)}return a}function Ee(e,t){var r=[];var a={};for(var n=0;n<t.length;n++){var i=t[n];if(a[i.text2]){a[i.text2].push(i.x)}else{a[i.text2]=[i.x]}}for(var o in a){r.push(he(e,G.interp(a[o],.5),o))}return r}function Le(e,t){var a=[];var r,n;var i=t.length&&t[t.length-1].x<t[0].x;var o=function(e,t){var r=e.xbnd[t];if(r!==null){a.push(G.extendFlat({},e,{x:r}))}};if(e.showdividers&&t.length){for(r=0;r<t.length;r++){var s=t[r];if(s.text2!==n){o(s,i?1:0)}n=s.text2}o(t[r-1],i?0:1)}return a}function Ce(e,t){var r,a;var n,i;if(e._selections[t].size()){r=Infinity;a=-Infinity;n=Infinity;i=-Infinity;e._selections[t].each(function(){var e=He(this);var t=A.bBox(e.node().parentNode);r=Math.min(r,t.top);a=Math.max(a,t.bottom);n=Math.min(n,t.left);i=Math.max(i,t.right)})}else{r=0;a=0;n=0;i=0}return{top:r,bottom:a,left:n,right:i,height:a-r,width:i-n}}Z.getTickSigns=function(e){var t=e._id.charAt(0);var r={x:"top",y:"right"}[t];var a=e.side===r?1:-1;var n=[-1,1,a,-a];if(e.ticks!=="inside"===(t==="x")){n=n.map(function(e){return-e})}if(e.side){n.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)])}return n};Z.makeTransTickFn=function(t){return t._id.charAt(0)==="x"?function(e){return v(t._offset+t.l2p(e.x),0)}:function(e){return v(0,t._offset+t.l2p(e.x))}};Z.makeTransTickLabelFn=function(t){var e=Oe(t);var r=e[0];var a=e[1];return t._id.charAt(0)==="x"?function(e){return v(r+t._offset+t.l2p(De(e)),a)}:function(e){return v(a,r+t._offset+t.l2p(De(e)))}};function De(e){return e.periodX!==undefined?e.periodX:e.x}function Oe(e){var t=e.ticklabelposition||"";var r=function(e){return t.indexOf(e)!==-1};var a=r("top");var n=r("left");var i=r("right");var o=r("bottom");var s=r("inside");var l=o||n||a||i;if(!l&&!s)return[0,0];var u=e.side;var c=l?(e.tickwidth||0)/2:0;var f=q;var d=e.tickfont?e.tickfont.size:12;if(o||a){c+=d*B;f+=(e.linewidth||0)/2}if(n||i){c+=(e.linewidth||0)/2;f+=q}if(s&&u==="top"){f-=d*(1-B)}if(n||a)c=-c;if(u==="bottom"||u==="right")f=-f;return[l?c:0,s?f:0]}Z.makeTickPath=function(e,t,r,a){a=a!==undefined?a:e.ticklen;var n=e._id.charAt(0);var i=(e.linewidth||1)/2;return n==="x"?"M0,"+(t+i*r)+"v"+a*r:"M"+(t+i*r)+",0h"+a*r};Z.makeLabelFns=function(a,t,e){var r=a.ticklabelposition||"";var n=function(e){return r.indexOf(e)!==-1};var i=n("top");var o=n("left");var s=n("right");var l=n("bottom");var u=l||o||i||s;var c=n("inside");var f=r==="inside"&&a.ticks==="inside"||!c&&a.ticks==="outside"&&a.tickson!=="boundaries";var d=0;var v=0;var p=f?a.ticklen:0;if(c){p*=-1}else if(u){p=0}if(f){d+=p;if(e){var h=G.deg2rad(e);d=p*Math.cos(h)+1;v=p*Math.sin(h)}}if(a.showticklabels&&(f||a.showline)){d+=.2*a.tickfont.size}d+=(a.linewidth||1)/2*(c?-1:1);var m={labelStandoff:d,labelShift:v};var g,y,x,b;var _=0;var w=a.side;var T=a._id.charAt(0);var k=a.tickangle;var M;if(T==="x"){M=!c&&w==="bottom"||c&&w==="top";b=M?1:-1;if(c)b*=-1;g=v*b;y=t+d*b;x=M?1:-.2;if(Math.abs(k)===90){if(c){x+=H}else{if(k===-90&&w==="bottom"){x=B}else if(k===90&&w==="top"){x=H}else{x=.5}}_=H/2*(k/90)}m.xFn=function(e){return e.dx+g+_*e.fontSize};m.yFn=function(e){return e.dy+y+e.fontSize*x};m.anchorFn=function(e,t){if(u){if(o)return"end";if(s)return"start"}if(!E(t)||t===0||t===180){return"middle"}return t*b<0!==c?"end":"start"};m.heightFn=function(e,t,r){return t<-60||t>60?-.5*r:a.side==="top"!==c?-r:0}}else if(T==="y"){M=!c&&w==="left"||c&&w==="right";b=M?1:-1;if(c)b*=-1;g=d;y=v*b;x=0;if(!c&&Math.abs(k)===90){if(k===-90&&w==="left"||k===90&&w==="right"){x=B}else{x=.5}}if(c){var A=E(k)?+k:0;if(A!==0){var S=G.deg2rad(A);_=Math.abs(Math.sin(S))*B*b;x=0}}m.xFn=function(e){return e.dx+t-(g+e.fontSize*x)*b+_*e.fontSize};m.yFn=function(e){return e.dy+y+e.fontSize*H};m.anchorFn=function(e,t){if(E(t)&&Math.abs(t)===90){return"middle"}return M?"end":"start"};m.heightFn=function(e,t,r){if(a.side==="right")t*=-1;return t<-30?-r:t<30?-.5*r:0}}return m};function Ie(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}Z.drawTicks=function(e,t,r){r=r||{};var a=t._id+"tick";var n=r.vals;if(t.ticklabelmode==="period"){n=n.slice();n.shift()}var i=r.layer.selectAll("path."+a).data(t.ticks?n:[],Ie);i.exit().remove();i.enter().append("path").classed(a,1).classed("ticks",1).classed("crisp",r.crisp!==false).call(c.stroke,t.tickcolor).style("stroke-width",A.crispRound(e,t.tickwidth,1)+"px").attr("d",r.path).style("display",null);Je(t,[F]);i.attr("transform",r.transFn)};Z.drawGrid=function(e,t,r){r=r||{};var a=t._id+"grid";var n=r.vals;var i=r.counterAxis;if(t.showgrid===false){n=[]}else if(i&&Z.shouldShowZeroLine(e,t,i)){var o=t.tickmode==="array";for(var s=0;s<n.length;s++){var l=n[s].x;if(o?!l:Math.abs(l)<t.dtick/100){n=n.slice(0,s).concat(n.slice(s+1));if(o)s--;else break}}}var u=r.layer.selectAll("path."+a).data(n,Ie);u.exit().remove();u.enter().append("path").classed(a,1).classed("crisp",r.crisp!==false);t._gw=A.crispRound(e,t.gridwidth,1);u.attr("transform",r.transFn).attr("d",r.path).call(c.stroke,t.gridcolor||"#ddd").style("stroke-width",t._gw+"px").style("display",null);Je(t,[z]);if(typeof r.path==="function")u.attr("d",r.path)};Z.drawZeroLine=function(e,t,r){r=r||r;var a=t._id+"zl";var n=Z.shouldShowZeroLine(e,t,r.counterAxis);var i=r.layer.selectAll("path."+a).data(n?[{x:0,id:t._id}]:[]);i.exit().remove();i.enter().append("path").classed(a,1).classed("zl",1).classed("crisp",r.crisp!==false).each(function(){r.layer.selectAll("path").sort(function(e,t){return o(e.id,t.id)})});i.attr("transform",r.transFn).attr("d",r.path).call(c.stroke,t.zerolinecolor||c.defaultLine).style("stroke-width",A.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null);Je(t,[u])};Z.drawLabels=function(p,g,y){y=y||{};var h=p._fullLayout;var e=g._id;var x=e.charAt(0);var t=y.cls||e+"tick";var b=y.vals;var d=y.labelFns;var _=y.secondary?0:g.tickangle;var r=(g._prevTickAngles||{})[t];var w=y.layer.selectAll("g."+t).data(g.showticklabels?b:[],Ie);var a=[];w.enter().append("g").classed(t,1).append("text").attr("text-anchor","middle").each(function(e){var t=M.select(this);var r=p._promises.length;t.call(m.positionText,d.xFn(e),d.yFn(e)).call(A.font,e.font,e.fontSize,e.fontColor).text(e.text).call(m.convertToTspans,p);if(p._promises[r]){a.push(p._promises.pop().then(function(){T(t,_)}))}else{T(t,_)}});Je(g,[j]);w.exit().remove();if(y.repositionOnUpdate){w.each(function(e){M.select(this).select("text").call(m.positionText,d.xFn(e),d.yFn(e))})}function T(e,f){e.each(function(e){var t=M.select(this);var r=t.select(".text-math-group");var a=d.anchorFn(e,f);var n=y.transFn.call(t.node(),e)+(E(f)&&+f!==0?" rotate("+f+","+d.xFn(e)+","+(d.yFn(e)-e.fontSize/2)+")":"");var i=m.lineCount(t);var o=W*e.fontSize;var s=d.heightFn(e,E(f)?+f:0,(i-1)*o);if(s){n+=v(0,s)}if(r.empty()){var l=t.select("text");l.attr({transform:n,"text-anchor":a});l.style("opacity",1);if(g._adjustTickLabelsOverflow){g._adjustTickLabelsOverflow()}}else{var u=A.bBox(r.node()).width;var c=u*{end:-.5,start:.5}[a];r.attr("transform",n+v(c,0))}})}g._adjustTickLabelsOverflow=function(){var e=g.ticklabeloverflow;if(!e||e==="allow")return;var o=e.indexOf("hide")!==-1;var s=g._id.charAt(0)==="x";var t=0;var r=s?p._fullLayout.width:p._fullLayout.height;if(e.indexOf("domain")!==-1){var a=G.simpleMap(g.range,g.r2l);t=g.l2p(a[0])+g._offset;r=g.l2p(a[1])+g._offset}var l=Math.min(t,r);var u=Math.max(t,r);var c=g.side;var f=Infinity;var d=-Infinity;w.each(function(e){var t=M.select(this);var r=t.select(".text-math-group");if(r.empty()){var a=A.bBox(t.node());var n=0;if(s){if(a.right>u)n=1;else if(a.left<l)n=1}else{if(a.bottom>u)n=1;else if(a.top+(g.tickangle?0:e.fontSize/4)<l)n=1}var i=t.select("text");if(n){if(o)i.style("opacity",0)}else{i.style("opacity",1);if(c==="bottom"||c==="right"){f=Math.min(f,s?a.top:a.left)}else{f=-Infinity}if(c==="top"||c==="left"){d=Math.max(d,s?a.bottom:a.right)}else{d=Infinity}}}});for(var n in h._plots){var i=h._plots[n];if(g._id!==i.xaxis._id&&g._id!==i.yaxis._id)continue;var v=s?i.yaxis:i.xaxis;if(v){v["_visibleLabelMin_"+g._id]=f;v["_visibleLabelMax_"+g._id]=d}}};g._hideCounterAxisInsideTickLabels=function(e){var t=g._id.charAt(0)==="x";var r=[];for(var a in h._plots){var n=h._plots[a];if(g._id!==n.xaxis._id&&g._id!==n.yaxis._id)continue;r.push(t?n.yaxis:n.xaxis)}r.forEach(function(i,o){if(i&&Xe(i)){(e||[u,z,F,j]).forEach(function(a){var n=a.K==="tick"&&a.L==="text"&&g.ticklabelmode==="period";var e=h._plots[g._mainSubplot];var t;if(a.K===u.K)t=e.zerolinelayer.selectAll("."+g._id+"zl");else if(a.K===z.K)t=e.gridlayer.selectAll("."+g._id);else t=e[g._id.charAt(0)+"axislayer"];t.each(function(){var e=M.select(this);if(a.L)e=e.selectAll(a.L);e.each(function(e){var t=g.l2p(n?De(e):e.x)+g._offset;var r=M.select(this);if(t<g["_visibleLabelMax_"+i._id]&&t>g["_visibleLabelMin_"+i._id]){r.style("display","none")}else if(a.K==="tick"&&!o){r.style("display",null)}})})})}})};T(w,r+1?r:_);function n(){return a.length&&Promise.all(a)}var k=null;function i(){T(w,_);if(b.length&&x==="x"&&!E(_)&&(g.type!=="log"||String(g.dtick).charAt(0)!=="D")){k=0;var n=0;var i=[];var e;w.each(function(e){n=Math.max(n,e.fontSize);var t=g.l2p(e.x);var r=He(this);var a=A.bBox(r.node());i.push({top:0,bottom:10,height:10,left:t-a.width/2,right:t+a.width/2+2,width:a.width+2})});if((g.tickson==="boundaries"||g.showdividers)&&!y.secondary){var t=2;if(g.ticks)t+=g.tickwidth/2;for(e=0;e<i.length;e++){var r=b[e].xbnd;var a=i[e];if(r[0]!==null&&a.left-g.l2p(r[0])<t||r[1]!==null&&g.l2p(r[1])-a.right<t){k=90;break}}}else{var o=b.length;var s=Math.abs((b[o-1].x-b[0].x)*g._m)/(o-1);var l=g.ticklabelposition||"";var u=function(e){return l.indexOf(e)!==-1};var c=u("top");var f=u("left");var d=u("right");var v=u("bottom");var p=v||f||c||d;var h=!p?0:(g.tickwidth||0)+2*q;var m=s<n*2.5||g.type==="multicategory";for(e=0;e<i.length-1;e++){if(G.bBoxIntersect(i[e],i[e+1],h)){k=m?90:30;break}}}if(k){T(w,k)}}}if(g._selections){g._selections[t]=w}var o=[n];if(g.automargin&&h._redrawFromAutoMarginCount&&r===90){k=90;o.push(function(){T(w,r)})}else{o.push(i)}if(g._tickAngles){o.push(function(){g._tickAngles[t]=k===null?E(_)?_:0:k})}var s=g._anchorAxis;if(s&&s.autorange&&Xe(g)&&!U(h,g._id)){if(!h._insideTickLabelsAutorange){h._insideTickLabelsAutorange={}}h._insideTickLabelsAutorange[s._name+".autorange"]=s.autorange;o.push(function e(){w.each(function(e,t){var r=He(this);var a=r.select(".text-math-group");if(a.empty()){g._vals[t].bb=A.bBox(r.node())}})})}var l=G.syncOrAsync(o);if(l&&l.then)p._promises.push(l);return l};function Pe(e,t,r){var a=t._id+"divider";var n=r.vals;var i=r.layer.selectAll("path."+a).data(n,Ie);i.exit().remove();i.enter().insert("path",":first-child").classed(a,1).classed("crisp",1).call(c.stroke,t.dividercolor).style("stroke-width",A.crispRound(e,t.dividerwidth,1)+"px");i.attr("transform",r.transFn).attr("d",r.path)}Z.getPxPosition=function(e,t){var r=e._fullLayout._size;var a=t._id.charAt(0);var n=t.side;var i;if(t.anchor!=="free"){i=t._anchorAxis}else if(a==="x"){i={_offset:r.t+(1-(t.position||0))*r.h,_length:0}}else if(a==="y"){i={_offset:r.l+(t.position||0)*r.w,_length:0}}if(n==="top"||n==="left"){return i._offset}else if(n==="bottom"||n==="right"){return i._offset+i._length}};function Re(e){var t=e.title.font.size;var r=(e.title.text.match(m.BR_TAG_ALL)||[]).length;if(e.title.hasOwnProperty("standoff")){return r?t*(B+r*W):t*B}else{return r?t*(r+1)*W:t}}function Ne(e,t){var r=e._fullLayout;var a=t._id;var n=a.charAt(0);var i=t.title.font.size;var o;if(t.title.hasOwnProperty("standoff")){o=t._depth+t.title.standoff+Re(t)}else{var s=Xe(t);if(t.type==="multicategory"){o=t._depth}else{var l=1.5*i;if(s){l=.5*i;if(t.ticks==="outside"){l+=t.ticklen}}o=10+l+(t.linewidth?t.linewidth-1:0)}if(!s){if(n==="x"){o+=t.side==="top"?i*(t.showticklabels?1:0):i*(t.showticklabels?1.5:.5)}else{o+=t.side==="right"?i*(t.showticklabels?1:.5):i*(t.showticklabels?.5:0)}}}var u=Z.getPxPosition(e,t);var c,f,d;if(n==="x"){f=t._offset+t._length/2;d=t.side==="top"?u-o:u+o}else{d=t._offset+t._length/2;f=t.side==="right"?u+o:u-o;c={rotate:"-90",offset:0}}var v;if(t.type!=="multicategory"){var p=t._selections[t._id+"tick"];v={selection:p,side:t.side};if(p&&p.node()&&p.node().parentNode){var h=A.getTranslate(p.node().parentNode);v.offsetLeft=h.x;v.offsetTop=h.y}if(t.title.hasOwnProperty("standoff")){v.pad=0}}return g.draw(e,a+"title",{propContainer:t,propName:t._name+".title.text",placeholder:r._dfltTitle[n],avoid:v,transform:c,attributes:{x:f,y:d,"text-anchor":"middle"}})}Z.shouldShowZeroLine=function(e,t,r){var a=G.simpleMap(t.range,t.r2l);return a[0]*a[1]<=0&&t.zeroline&&(t.type==="linear"||t.type==="-")&&!(t.rangebreaks&&t.maskBreaks(0)===N)&&(ze(t,0)||!Fe(e,t,r,a)||je(e,t))};Z.clipEnds=function(t,e){return e.filter(function(e){return ze(t,e.x)})};function ze(e,t){var r=e.l2p(t);return r>1&&r<e._length-1}function Fe(e,i,t,r){var a=t._mainAxis;if(!a)return;var n=e._fullLayout;var o=i._id.charAt(0);var s=Z.counterLetter(i._id);var l=i._offset+(Math.abs(r[0])<Math.abs(r[1])===(o==="x")?0:i._length);function u(e){if(!e.showline||!e.linewidth)return false;var t=Math.max((e.linewidth+i.zerolinewidth)/2,1);function r(e){return typeof e==="number"&&Math.abs(e-l)<t}if(r(e._mainLinePosition)||r(e._mainMirrorPosition)){return true}var a=e._linepositions||{};for(var n in a){if(r(a[n][0])||r(a[n][1])){return true}}}var c=n._plots[t._mainSubplot];if(!(c.mainplotinfo||c).overlays.length){return u(t,l)}var f=Z.list(e,s);for(var d=0;d<f.length;d++){var v=f[d];if(v._mainAxis===a&&u(v,l)){return true}}}function je(e,t){var r=e._fullData;var a=t._mainSubplot;var n=t._id.charAt(0);for(var i=0;i<r.length;i++){var o=r[i];if(o.visible===true&&o.xaxis+o.yaxis===a){if(V.traceIs(o,"bar-like")&&o.orientation==={x:"h",y:"v"}[n])return true;if(o.fill&&o.fill.charAt(o.fill.length-1)===n)return true}}return false}function He(e){var t=M.select(e);var r=t.select(".text-math-group");return r.empty()?t.select("text"):r}Z.allowAutoMargin=function(e){var t=Z.list(e,"",true);for(var r=0;r<t.length;r++){var a=t[r];if(a.automargin){Y.allowAutoMargin(e,Be(a));if(a.mirror){Y.allowAutoMargin(e,qe(a))}}if(V.getComponentMethod("rangeslider","isVisible")(a)){Y.allowAutoMargin(e,Ue(a))}}};function Be(e){return e._id+".automargin"}function qe(e){return Be(e)+".mirror"}function Ue(e){return e._id+".rangeslider"}Z.swap=function(e,t){var r=Ye(e,t);for(var a=0;a<r.length;a++){Ge(e,r[a].x,r[a].y)}};function Ye(e,t){var r=[];var a,n;for(a=0;a<t.length;a++){var i=[];var o=e._fullData[t[a]].xaxis;var s=e._fullData[t[a]].yaxis;if(!o||!s)continue;for(n=0;n<r.length;n++){if(r[n].x.indexOf(o)!==-1||r[n].y.indexOf(s)!==-1){i.push(n)}}if(!i.length){r.push({x:[o],y:[s]});continue}var l=r[i[0]];var u;if(i.length>1){for(n=1;n<i.length;n++){u=r[i[n]];Ve(l.x,u.x);Ve(l.y,u.y)}}Ve(l.x,[o]);Ve(l.y,[s])}return r}function Ve(e,t){for(var r=0;r<t.length;r++){if(e.indexOf(t[r])===-1)e.push(t[r])}}function Ge(e,t,r){var a=[];var n=[];var i=e.layout;var o,s;for(o=0;o<t.length;o++)a.push(Z.getFromId(e,t[o]));for(o=0;o<r.length;o++)n.push(Z.getFromId(e,r[o]));var l=Object.keys(b);var u=["anchor","domain","overlaying","position","side","tickangle","editType"];var c=["linear","log"];for(o=0;o<l.length;o++){var f=l[o];var d=a[0][f];var v=n[0][f];var p=true;var h=false;var m=false;if(f.charAt(0)==="_"||typeof d==="function"||u.indexOf(f)!==-1){continue}for(s=1;s<a.length&&p;s++){var g=a[s][f];if(f==="type"&&c.indexOf(d)!==-1&&c.indexOf(g)!==-1&&d!==g){h=true}else if(g!==d)p=false}for(s=1;s<n.length&&p;s++){var y=n[s][f];if(f==="type"&&c.indexOf(v)!==-1&&c.indexOf(y)!==-1&&v!==y){m=true}else if(n[s][f]!==v)p=false}if(p){if(h)i[a[0]._name].type="linear";if(m)i[n[0]._name].type="linear";We(i,f,a,n,e._fullLayout._dfltTitle)}}for(o=0;o<e._fullLayout.annotations.length;o++){var x=e._fullLayout.annotations[o];if(t.indexOf(x.xref)!==-1&&r.indexOf(x.yref)!==-1){G.swapAttrs(i.annotations[o],["?"])}}}function We(e,t,r,a,n){var i=G.nestedProperty;var o=i(e[r[0]._name],t).get();var s=i(e[a[0]._name],t).get();var l;if(t==="title"){if(o&&o.text===n.x){o.text=n.y}if(s&&s.text===n.y){s.text=n.x}}for(l=0;l<r.length;l++){i(e,r[l]._name+"."+t).set(s)}for(l=0;l<a.length;l++){i(e,a[l]._name+"."+t).set(o)}}function $e(e){return e._id==="angularaxis"}function Ze(e,t){var r=t._rangebreaks.length;for(var a=0;a<r;a++){var n=t._rangebreaks[a];if(e>=n.min&&e<n.max){return n.max}}return e}function Xe(e){return(e.ticklabelposition||"").indexOf("inside")!==-1}function Je(e,t){if(Xe(e._anchorAxis||{})){if(e._hideCounterAxisInsideTickLabels){e._hideCounterAxisInsideTickLabels(t)}}}},{"../../components/color":100,"../../components/drawing":122,"../../components/titles":198,"../../constants/alignment":205,"../../constants/numerical":210,"../../lib":230,"../../lib/svg_text_utils":252,"../../plots/plots":311,"../../registry":313,"./autorange":275,"./axis_autotype":277,"./axis_ids":280,"./clean_ticks":282,"./layout_attributes":291,"./set_convert":297,"@plotly/d3":11,"fast-isnumeric":15}],277:[function(e,t,r){"use strict";var f=e("fast-isnumeric");var a=e("../../lib");var d=e("../../constants/numerical").BADNUM;var c=a.isArrayOrTypedArray;var v=a.isDateTime;var p=a.cleanNumber;var h=Math.round;t.exports=function e(t,r,a){var n=t;var i=a.noMultiCategory;if(c(n)&&!n.length)return"-";if(!i&&b(n))return"multicategory";if(i&&Array.isArray(n[0])){var o=[];for(var s=0;s<n.length;s++){if(c(n[s])){for(var l=0;l<n[s].length;l++){o.push(n[s][l])}}}n=o}if(g(n,r))return"date";var u=a.autotypenumbers!=="strict";if(x(n,u))return"category";if(m(n,u))return"linear";return"-"};function n(e,t){return t?f(e):typeof e==="number"}function m(e,t){var r=e.length;for(var a=0;a<r;a++){if(n(e[a],t))return true}return false}function g(e,t){var r=e.length;var a=y(r);var n=0;var i=0;var o={};for(var s=0;s<r;s+=a){var l=h(s);var u=e[l];var c=String(u);if(o[c])continue;o[c]=1;if(v(u,t))n++;if(f(u))i++}return n>i*2}function y(e){return Math.max(1,(e-1)/1e3)}function x(e,t){var r=e.length;var a=y(r);var n=0;var i=0;var o={};for(var s=0;s<r;s+=a){var l=h(s);var u=e[l];var c=String(u);if(o[c])continue;o[c]=1;var f=typeof u;if(f==="boolean")i++;else if(t?p(u)!==d:f==="number")n++;else if(f==="string")i++}return i>n*2}function b(e){return c(e[0])&&c(e[1])}},{"../../constants/numerical":210,"../../lib":230,"fast-isnumeric":15}],278:[function(e,t,r){"use strict";var d=e("fast-isnumeric");var S=e("../../registry");var E=e("../../lib");var L=e("../array_container_defaults");var C=e("./layout_attributes");var D=e("./tick_value_defaults");var O=e("./tick_mark_defaults");var I=e("./tick_label_defaults");var P=e("./category_order_defaults");var R=e("./line_grid_defaults");var N=e("./set_convert");var z=e("./constants").WEEKDAY_PATTERN;var v=e("./constants").HOUR_PATTERN;t.exports=function e(t,r,a,n,i){var o=n.letter;var s=n.font||{};var l=n.splomStash||{};var u=a("visible",!n.visibleDflt);var c=r._template||{};var f=r.type||c.type||"-";var d;if(f==="date"){var v=S.getComponentMethod("calendars","handleDefaults");v(t,r,"calendar",n.calendar);if(!n.noTicklabelmode){d=a("ticklabelmode")}}var p="";if(!n.noTicklabelposition||f==="multicategory"){p=E.coerce(t,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:d==="period"?["outside","inside"]:o==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")}if(!n.noTicklabeloverflow){a("ticklabeloverflow",p.indexOf("inside")!==-1?"hide past domain":f==="category"||f==="multicategory"?"allow":"hide past div")}N(r,i);var h=!r.isValidRange(t.range);if(h&&n.reverseDflt)h="reversed";var m=a("autorange",h);if(m&&(f==="linear"||f==="-"))a("rangemode");a("range");r.cleanRange();P(t,r,a,n);if(f!=="category"&&!n.noHover)a("hoverformat");var g=a("color");var y=g!==C.color.dflt?g:s.color;var x=l.label||i._dfltTitle[o];I(t,r,a,f,n,{pass:1});if(!u)return r;a("title.text",x);E.coerceFont(a,"title.font",{family:s.family,size:E.bigFont(s.size),color:y});D(t,r,a,f);I(t,r,a,f,n,{pass:2});O(t,r,a,n);R(t,r,a,{dfltColor:g,bgColor:n.bgColor,showGrid:n.showGrid,attributes:C});if(r.showline||r.ticks)a("mirror");if(n.automargin)a("automargin");var b=f==="multicategory";if(!n.noTickson&&(f==="category"||b)&&(r.ticks||r.showgrid)){var _;if(b)_="boundaries";var w=a("tickson",_);if(w==="boundaries"){delete r.ticklabelposition}}if(b){var T=a("showdividers");if(T){a("dividercolor");a("dividerwidth")}}if(f==="date"){L(t,r,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:F});if(!r.rangebreaks.length){delete r.rangebreaks}else{for(var k=0;k<r.rangebreaks.length;k++){if(r.rangebreaks[k].pattern===z){r._hasDayOfWeekBreaks=true;break}}N(r,i);if(i._has("scattergl")||i._has("splom")){for(var M=0;M<n.data.length;M++){var A=n.data[M];if(A.type==="scattergl"||A.type==="splom"){A.visible=false;E.warn(A.type+" traces do not work on axes with rangebreaks."+" Setting trace "+A.index+" to `visible: false`.")}}}}}return r};function F(r,a,e){function t(e,t){return E.coerce(r,a,C.rangebreaks,e,t)}var n=t("enabled");if(n){var i=t("bounds");if(i&&i.length>=2){var o="";var s,l;if(i.length===2){for(s=0;s<2;s++){l=p(i[s]);if(l){o=z;break}}}var u=t("pattern",o);if(u===z){for(s=0;s<2;s++){l=p(i[s]);if(l){a.bounds[s]=i[s]=l-1}}}if(u){for(s=0;s<2;s++){l=i[s];switch(u){case z:if(!d(l)){a.enabled=false;return}l=+l;if(l!==Math.floor(l)||l<0||l>=7){a.enabled=false;return}a.bounds[s]=i[s]=l;break;case v:if(!d(l)){a.enabled=false;return}l=+l;if(l<0||l>24){a.enabled=false;return}a.bounds[s]=i[s]=l;break}}}if(e.autorange===false){var c=e.range;if(c[0]<c[1]){if(i[0]<c[0]&&i[1]>c[1]){a.enabled=false;return}}else if(i[0]>c[0]&&i[1]<c[1]){a.enabled=false;return}}}else{var f=t("values");if(f&&f.length){t("dvalue")}else{a.enabled=false;return}}}}var a={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function p(e){if(typeof e!=="string")return;return a[e.substr(0,3).toLowerCase()]}},{"../../lib":230,"../../registry":313,"../array_container_defaults":271,"./category_order_defaults":281,"./constants":283,"./layout_attributes":291,"./line_grid_defaults":293,"./set_convert":297,"./tick_label_defaults":298,"./tick_mark_defaults":299,"./tick_value_defaults":300,"fast-isnumeric":15}],279:[function(e,t,r){"use strict";var a=e("../../constants/docs");var n=a.FORMAT_LINK;var i=a.DATE_FORMAT_LINK;function o(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?s:l)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}}function s(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+n+"."].join(" ")}function l(e,t){return s(e,t)+[" And for dates see: "+i+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}t.exports={axisHoverFormat:o,descriptionOnlyNumbers:s,descriptionWithDates:l}},{"../../constants/docs":207}],280:[function(e,t,c){"use strict";var o=e("../../registry");var s=e("./constants");c.id2name=function e(t){if(typeof t!=="string"||!t.match(s.AX_ID_PATTERN))return;var r=t.split(" ")[0].substr(1);if(r==="1")r="";return t.charAt(0)+"axis"+r};c.name2id=function e(t){if(!t.match(s.AX_NAME_PATTERN))return;var r=t.substr(5);if(r==="1")r="";return t.charAt(0)+r};c.cleanId=function e(t,r,a){var n=/( domain)$/.test(t);if(typeof t!=="string"||!t.match(s.AX_ID_PATTERN))return;if(r&&t.charAt(0)!==r)return;if(n&&!a)return;var i=t.split(" ")[0].substr(1).replace(/^0+/,"");if(i==="1")i="";return t.charAt(0)+i+(n&&a?" domain":"")};c.list=function(e,t,r){var a=e._fullLayout;if(!a)return[];var n=c.listIds(e,t);var i=new Array(n.length);var o;for(o=0;o<n.length;o++){var s=n[o];i[o]=a[s.charAt(0)+"axis"+s.substr(1)]}if(!r){var l=a._subplots.gl3d||[];for(o=0;o<l.length;o++){var u=a[l[o]];if(t)i.push(u[t+"axis"]);else i.push(u.xaxis,u.yaxis,u.zaxis)}}return i};c.listIds=function(e,t){var r=e._fullLayout;if(!r)return[];var a=r._subplots;if(t)return a[t+"axis"];return a.xaxis.concat(a.yaxis)};c.getFromId=function(e,t,r){var a=e._fullLayout;t=t===undefined||typeof t!=="string"?t:t.replace(" domain","");if(r==="x")t=t.replace(/y[0-9]*/,"");else if(r==="y")t=t.replace(/x[0-9]*/,"");return a[c.id2name(t)]};c.getFromTrace=function(e,t,r){var a=e._fullLayout;var n=null;if(o.traceIs(t,"gl3d")){var i=t.scene;if(i.substr(0,5)==="scene"){n=a[i][r+"axis"]}}else{n=c.getFromId(e,t[r+"axis"]||r)}return n};c.idSort=function(e,t){var r=e.charAt(0);var a=t.charAt(0);if(r!==a)return r>a?1:-1;return+(e.substr(1)||1)-+(t.substr(1)||1)};c.ref2id=function(e){return/^[xyz]/.test(e)?e.split(" ")[0]:false};function r(e,t){if(t&&t.length){for(var r=0;r<t.length;r++){if(t[r][e])return true}}return false}c.isLinked=function(e,t){return r(t,e._axisMatchGroups)||r(t,e._axisConstraintGroups)}},{"../../registry":313,"./constants":283}],281:[function(e,t,r){"use strict";function c(e,t){var r=t.dataAttr||e._id.charAt(0);var a={};var n;var i,o;if(t.axData){n=t.axData}else{n=[];for(i=0;i<t.data.length;i++){var s=t.data[i];if(s[r+"axis"]===e._id){n.push(s)}}}for(i=0;i<n.length;i++){var l=n[i][r];for(o=0;o<l.length;o++){var u=l[o];if(u!==null&&u!==undefined){a[u]=1}}}return Object.keys(a)}t.exports=function e(t,r,a,n){if(r.type!=="category")return;var i=t.categoryarray;var o=Array.isArray(i)&&i.length>0;var s;if(o)s="array";var l=a("categoryorder",s);var u;if(l==="array"){u=a("categoryarray")}if(!o&&l==="array"){l=r.categoryorder="trace"}if(l==="trace"){r._initialCategories=[]}else if(l==="array"){r._initialCategories=u.slice()}else{u=c(r,n).sort();if(l==="category ascending"){r._initialCategories=u}else if(l==="category descending"){r._initialCategories=u.reverse()}}}},{}],282:[function(e,t,r){"use strict";var l=e("fast-isnumeric");var n=e("../../lib");var a=e("../../constants/numerical");var u=a.ONEDAY;var i=a.ONEWEEK;r.dtick=function(e,t){var r=t==="log";var a=t==="date";var n=t==="category";var i=a?u:1;if(!e)return i;if(l(e)){e=Number(e);if(e<=0)return i;if(n){return Math.max(1,Math.round(e))}if(a){return Math.max(.1,e)}return e}if(typeof e!=="string"||!(a||r)){return i}var o=e.charAt(0);var s=e.substr(1);s=l(s)?Number(s):0;if(s<=0||!(a&&o==="M"&&s===Math.round(s)||r&&o==="L"||r&&o==="D"&&(s===1||s===2))){return i}return e};r.tick0=function(e,t,r,a){if(t==="date"){return n.cleanDate(e,n.dateTick0(r,a%i===0?1:0))}if(a==="D1"||a==="D2"){return undefined}return l(e)?Number(e):0}},{"../../constants/numerical":210,"../../lib":230,"fast-isnumeric":15}],283:[function(e,t,r){"use strict";var a=e("../../lib/regex").counter;t.exports={idRegex:{x:a("x","( domain)?"),y:a("y","( domain)?")},attrRegex:a("[xy]axis"),xAxisMatch:a("xaxis"),yAxisMatch:a("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":246}],284:[function(e,t,r){"use strict";var E=e("../../lib");var j=e("./autorange");var H=e("./axis_ids").id2name;var L=e("./layout_attributes");var B=e("./scale_zoom");var k=e("./set_convert");var q=e("../../constants/numerical").ALMOST_EQUAL;var i=e("../../constants/alignment").FROM_BL;r.handleDefaults=function(e,r,t){var a=t.axIds;var n=t.axHasImage;var i=r._axisConstraintGroups=[];var o=r._axisMatchGroups=[];var s,l,u,c,f,d,v,p;for(s=0;s<a.length;s++){c=H(a[s]);f=e[c];d=r[c];M(f,d,{axIds:a,layoutOut:r,hasImage:n[c]})}function h(e,t){for(s=0;s<e.length;s++){l=e[s];for(u in l){r[H(u)][t]=l}}}h(o,"_matchGroup");for(s=0;s<i.length;s++){l=i[s];for(u in l){d=r[H(u)];if(d.fixedrange){for(var m in l){var g=H(m);if((e[g]||{}).fixedrange===false){E.warn("fixedrange was specified as false for axis "+g+" but was overridden because another "+"axis in its constraint group has fixedrange true")}r[g].fixedrange=true}break}}}s=0;while(s<i.length){l=i[s];for(u in l){d=r[H(u)];if(d._matchGroup&&Object.keys(d._matchGroup).length===Object.keys(l).length){i.splice(s,1);s--}break}s++}h(i,"_constraintGroup");var y=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"];var x=false;var b=false;function _(){p=d[v];if(v==="rangebreaks"){b=d._hasDayOfWeekBreaks}}for(s=0;s<o.length;s++){l=o[s];for(var w=0;w<y.length;w++){v=y[w];p=null;var T;for(u in l){c=H(u);f=e[c];d=r[c];if(!(v in d)){continue}if(!d.matches){T=d;if(v in f){_();break}}if(p===null&&v in f){_()}}if(v==="range"&&p){x=true}if(v==="autorange"&&p===null&&x){p=false}if(p===null&&v in T){p=T[v]}if(p!==null){for(u in l){d=r[H(u)];d[v]=v==="range"?p.slice():p;if(v==="rangebreaks"){d._hasDayOfWeekBreaks=b;k(d,r)}}}}}};function M(r,a,e){var t=e.axIds;var n=e.layoutOut;var i=e.hasImage;var o=n._axisConstraintGroups;var s=n._axisMatchGroups;var l=a._id;var u=l.charAt(0);var c=((n._splomAxes||{})[u]||{})[l]||{};var f=a._id;var d=f.charAt(0)==="x";a._matchGroup=null;a._constraintGroup=null;function v(e,t){return E.coerce(r,a,L,e,t)}v("constrain",i?"domain":"range");E.coerce(r,a,{constraintoward:{valType:"enumerated",values:d?["left","center","right"]:["bottom","middle","top"],dflt:d?"center":"middle"}},"constraintoward");var p=a.type;var h,m;var g=[];for(h=0;h<t.length;h++){m=t[h];if(m===f)continue;var y=n[H(m)];if(y.type===p){g.push(m)}}var x=D(o,f);if(x){var b=[];for(h=0;h<g.length;h++){m=g[h];if(!x[m])b.push(m)}g=b}var _=g.length;var w,T;if(_&&(r.matches||c.matches)){w=E.coerce(r,a,{matches:{valType:"enumerated",values:g,dflt:g.indexOf(c.matches)!==-1?c.matches:undefined}},"matches")}var k=i&&!d?a.anchor:undefined;if(_&&!w&&(r.scaleanchor||k)){T=E.coerce(r,a,{scaleanchor:{valType:"enumerated",values:g}},"scaleanchor",k)}if(w){a._matchGroup=O(s,f,w,1);var M=n[H(w)];var A=C(n,a)/C(n,M);if(d!==(w.charAt(0)==="x")){A=(d?"x":"y")+A}O(o,f,w,A)}else if(r.matches&&t.indexOf(r.matches)!==-1){E.warn("ignored "+a._name+'.matches: "'+r.matches+'" to avoid an infinite loop')}if(T){var S=v("scaleratio");if(!S)S=a.scaleratio=1;O(o,f,T,S)}else if(r.scaleanchor&&t.indexOf(r.scaleanchor)!==-1){E.warn("ignored "+a._name+'.scaleanchor: "'+r.scaleanchor+'" to avoid either an infinite loop '+"and possibly inconsistent scaleratios, or because this axis "+"declares a *matches* constraint.")}}function C(e,t){var r=t.domain;if(!r){r=e[H(t.overlaying)].domain}return r[1]-r[0]}function D(e,t){for(var r=0;r<e.length;r++){if(e[r][t]){return e[r]}}return null}function O(e,t,r,a){var n,i,o,s,l;var u=D(e,t);if(u===null){u={};u[t]=1;l=e.length;e.push(u)}else{l=e.indexOf(u)}var c=Object.keys(u);for(n=0;n<e.length;n++){o=e[n];if(n!==l&&o[r]){var f=o[r];for(i=0;i<c.length;i++){s=c[i];o[s]=v(f,v(a,u[s]))}e.splice(l,1);return}}if(a!==1){for(i=0;i<c.length;i++){var d=c[i];u[d]=v(a,u[d])}}u[r]=1}function v(e,t){var r="";var a="";var n,i;if(typeof e==="string"){r=e.match(/^[xy]*/)[0];n=r.length;e=+e.substr(n)}if(typeof t==="string"){a=t.match(/^[xy]*/)[0];i=a.length;t=+t.substr(i)}var o=e*t;if(!n&&!i){return o}if(!n||!i||r.charAt(0)===a.charAt(0)){return r+a+e*t}if(n===i){return o}return(n>i?r.substr(i):a.substr(n))+o}function U(e,t){var r=t._size;var a=r.h/r.w;var n={};var i=Object.keys(e);for(var o=0;o<i.length;o++){var s=i[o];var l=e[s];if(typeof l==="string"){var u=l.match(/^[xy]*/)[0];var c=u.length;l=+l.substr(c);var f=u.charAt(0)==="y"?a:1/a;for(var d=0;d<c;d++){l*=f}}n[s]=l}return n}r.enforce=function e(t){var r=t._fullLayout;var a=r._axisConstraintGroups||[];var n,i,o,s,l,u,c,f;for(n=0;n<a.length;n++){o=U(a[n],r);var d=Object.keys(o);var v=Infinity;var p=0;var h=Infinity;var m={};var g={};var y=false;for(i=0;i<d.length;i++){s=d[i];g[s]=l=r[H(s)];if(l._inputDomain)l.domain=l._inputDomain.slice();else l._inputDomain=l.domain.slice();if(!l._inputRange)l._inputRange=l.range.slice();l.setScale();m[s]=u=Math.abs(l._m)/o[s];v=Math.min(v,u);if(l.constrain==="domain"||!l._constraintShrinkable){h=Math.min(h,u)}delete l._constraintShrinkable;p=Math.max(p,u);if(l.constrain==="domain")y=true}if(v>q*p&&!y)continue;for(i=0;i<d.length;i++){s=d[i];u=m[s];l=g[s];c=l.constrain;if(u!==h||c==="domain"){f=u/h;if(c==="range"){B(l,f)}else{var x=l._inputDomain;var b=(l.domain[1]-l.domain[0])/(x[1]-x[0]);var _=(l.r2l(l.range[1])-l.r2l(l.range[0]))/(l.r2l(l._inputRange[1])-l.r2l(l._inputRange[0]));f/=b;if(f*_<1){l.domain=l._input.domain=x.slice();B(l,f);continue}if(_<1){l.range=l._input.range=l._inputRange.slice();f*=_}if(l.autorange){var w=l.r2l(l.range[0]);var T=l.r2l(l.range[1]);var k=(w+T)/2;var M=k;var A=k;var S=Math.abs(T-k);var E=k-S*f*1.0001;var L=k+S*f*1.0001;var C=j.makePadFn(r,l,0);var D=j.makePadFn(r,l,1);Y(l,f);var O=Math.abs(l._m);var I=j.concatExtremes(t,l);var P=I.min;var R=I.max;var N;var z;for(z=0;z<P.length;z++){N=P[z].val-C(P[z])/O;if(N>E&&N<M){M=N}}for(z=0;z<R.length;z++){N=R[z].val+D(R[z])/O;if(N<L&&N>A){A=N}}var F=(A-M)/(2*S);f/=F;M=l.l2r(M);A=l.l2r(A);l.range=l._input.range=w<T?[M,A]:[A,M]}Y(l,f)}}}}};r.getAxisGroup=function e(t,r){var a=t._axisMatchGroups;for(var n=0;n<a.length;n++){var i=a[n];if(i[r])return"g"+n}return r};r.clean=function e(t,r){if(r._inputDomain){var a=false;var n=r._id;var i=t._fullLayout._axisConstraintGroups;for(var o=0;o<i.length;o++){if(i[o][n]){a=true;break}}if(!a||r.constrain!=="domain"){r._input.domain=r.domain=r._inputDomain;delete r._inputDomain}}};function Y(e,t){var r=e._inputDomain;var a=i[e.constraintoward];var n=r[0]+(r[1]-r[0])*a;e.domain=e._input.domain=[n+(r[0]-n)/t,n+(r[1]-n)/t];e.setScale()}},{"../../constants/alignment":205,"../../constants/numerical":210,"../../lib":230,"./autorange":275,"./axis_ids":280,"./layout_attributes":291,"./scale_zoom":295,"./set_convert":297}],285:[function(e,t,r){"use strict";var pe=e("@plotly/d3");var he=e("tinycolor2");var a=e("has-passive-events");var me=e("../../registry");var ge=e("../../lib");var i=ge.strTranslate;var ye=e("../../lib/svg_text_utils");var n=e("../../components/color");var xe=e("../../components/drawing");var be=e("../../components/fx");var _e=e("./axes");var o=e("../../lib/setcursor");var we=e("../../components/dragelement");var s=e("../../components/dragelement/helpers");var Te=s.selectingOrDrawing;var ke=s.freeMode;var Me=e("../../constants/alignment").FROM_TL;var Ae=e("../../lib/clear_gl_canvases");var Se=e("../../plot_api/subroutines").redrawReglTraces;var Ee=e("../plots");var Le=e("./axis_ids").getFromId;var Ce=e("./select").prepSelect;var De=e("./select").clearSelect;var Oe=e("./select").selectOnClick;var Ie=e("./scale_zoom");var Pe=e("./constants");var Re=Pe.MINDRAG;var Ne=Pe.MINZOOM;var l=true;function u(b,c,e,t,r,a,_,w){var i=b._fullLayout._zoomlayer;var f=_+w==="nsew";var d=(_+w).length===1;var T,k;var M,A;var v,p;var o,s;var h,m;var g;var S;var E,L;var l;var C,D;var O,I,P;var y;var x;var R;function u(){T=c.xaxis;k=c.yaxis;h=T._length;m=k._length;o=T._offset;s=k._offset;M={};M[T._id]=T;A={};A[k._id]=k;if(_&&w){var e=c.overlays;for(var t=0;t<e.length;t++){var r=e[t].xaxis;M[r._id]=r;var a=e[t].yaxis;A[a._id]=a}}v=et(M);p=et(A);E=Fe(v,w);L=Fe(p,_);l=!L&&!E;S=Ke(b,b._fullLayout._axisMatchGroups,M,A);g=Ke(b,b._fullLayout._axisConstraintGroups,M,A,S);var n=g.isSubplotConstrained||S.isSubplotConstrained;C=w||n;D=_||n;var i=b._fullLayout;O=i._has("scattergl");I=i._has("splom");P=i._has("svg")}u();var n=Ue(L+E,b._fullLayout.dragmode,f);var N=ze(c,_+w+"drag",n,e,t,r,a);if(l&&!f){N.onmousedown=null;N.style.pointerEvents="none";return N}var z={element:N,gd:b,plotinfo:c};z.prepFn=function(e,t,r){var a=z.dragmode;var n=b._fullLayout.dragmode;if(n!==a){z.dragmode=n}u();x=b._fullLayout._invScaleX;R=b._fullLayout._invScaleY;if(!l){if(f){if(e.shiftKey){if(n==="pan")n="zoom";else if(!Te(n))n="pan"}else if(e.ctrlKey){n="pan"}}else{n="pan"}}if(ke(n))z.minDrag=1;else z.minDrag=undefined;if(Te(n)){z.xaxes=v;z.yaxes=p;Ce(e,t,r,z,n)}else{z.clickFn=j;if(Te(a)){F()}if(!l){if(n==="zoom"){z.moveFn=J;z.doneFn=Q;z.minDrag=1;X(e,t,r)}else if(n==="pan"){z.moveFn=ie;z.doneFn=ue}}}b._fullLayout._redrag=function(){var e=b._dragdata;if(e&&e.element===N){var t=b._fullLayout.dragmode;if(!Te(t)){u();ce([0,0,h,m]);z.moveFn(e.dx,e.dy)}}}};function F(){z.plotinfo.selection=false;De(b)}function j(e,t){var r=z.gd;if(r._fullLayout._activeShapeIndex>=0){r._fullLayout._deactivateShape(r);return}var a=r._fullLayout.clickmode;We(r);if(e===2&&!d)le();if(f){if(a.indexOf("select")>-1){Oe(t,r,v,p,c.id,z)}if(a.indexOf("event")>-1){be.click(r,t,c.id)}}else if(e===1&&d){var n=_?k:T;var i=_==="s"||w==="w"?0:1;var o=n._name+".range["+i+"]";var s=je(n,i);var l="left";var u="middle";if(n.fixedrange)return;if(_){u=_==="n"?"top":"bottom";if(n.side==="right")l="right"}else if(w==="e")l="right";if(r._context.showAxisRangeEntryBoxes){pe.select(N).call(ye.makeEditable,{gd:r,immediate:true,background:r._fullLayout.paper_bgcolor,text:String(s),fill:n.tickfont?n.tickfont.color:"#444",horizontalAlign:l,verticalAlign:u}).on("edit",function(e){var t=n.d2r(e);if(t!==undefined){me.call("_guiRelayout",r,o,t)}})}}}we.init(z);var H,B;var q;var U;var Y;var V;var G;var W;var $;var Z;function X(e,t,r){var a=N.getBoundingClientRect();H=t-a.left;B=r-a.top;b._fullLayout._calcInverseTransform(b);var n=ge.apply3DTransform(b._fullLayout._invTransform)(H,B);H=n[0];B=n[1];q={l:H,r:H,w:0,t:B,b:B,h:0};U=b._hmpixcount?b._hmlumcount/b._hmpixcount:he(b._fullLayout.plot_bgcolor).getLuminance();Y="M0,0H"+h+"V"+m+"H0V0";V=false;G="xy";Z=false;W=Ye(i,U,o,s,Y);$=Ve(i,o,s)}function J(e,t){if(b._transitioningWithDuration){return false}var r=Math.max(0,Math.min(h,x*e+H));var a=Math.max(0,Math.min(m,R*t+B));var n=Math.abs(r-H);var i=Math.abs(a-B);q.l=Math.min(H,r);q.r=Math.max(H,r);q.t=Math.min(B,a);q.b=Math.max(B,a);function o(){G="";q.r=q.l;q.t=q.b;$.attr("d","M0,0Z")}if(g.isSubplotConstrained){if(n>Ne||i>Ne){G="xy";if(n/h>i/m){i=n*m/h;if(B>a)q.t=B-i;else q.b=B+i}else{n=i*h/m;if(H>r)q.l=H-n;else q.r=H+n}$.attr("d",Je(q))}else{o()}}else if(S.isSubplotConstrained){if(n>Ne||i>Ne){G="xy";var s=Math.min(q.l/h,(m-q.b)/m);var l=Math.max(q.r/h,(m-q.t)/m);q.l=s*h;q.r=l*h;q.b=(1-s)*m;q.t=(1-l)*m;$.attr("d",Je(q))}else{o()}}else if(!L||i<Math.min(Math.max(n*.6,Re),Ne)){if(n<Re||!E){o()}else{q.t=0;q.b=m;G="x";$.attr("d",Ze(q,B))}}else if(!E||n<Math.min(i*.6,Ne)){q.l=0;q.r=h;G="y";$.attr("d",Xe(q,H))}else{G="xy";$.attr("d",Je(q))}q.w=q.r-q.l;q.h=q.b-q.t;if(G)Z=true;b._dragged=Z;Ge(W,$,q,Y,V,U);K();b.emit("plotly_relayouting",y);V=true}function K(){y={};if(G==="xy"||G==="x"){He(v,q.l/h,q.r/h,y,g.xaxes);oe("x",y)}if(G==="xy"||G==="y"){He(p,(m-q.b)/m,(m-q.t)/m,y,g.yaxes);oe("y",y)}}function Q(){K();We(b);ue();$e(b)}var ee=[0,0,h,m];var te=null;var re=Pe.REDRAWDELAY;var ae=c.mainplot?b._fullLayout._plots[c.mainplot]:c;function ne(e){if(!b._context._scrollZoom.cartesian&&!b._fullLayout._enablescrollzoom){return}F();if(b._transitioningWithDuration){e.preventDefault();e.stopPropagation();return}u();clearTimeout(te);var t=-e.deltaY;if(!isFinite(t))t=e.wheelDelta/10;if(!isFinite(t)){ge.log("Did not find wheel motion attributes: ",e);return}var r=Math.exp(-Math.min(Math.max(t,-20),20)/200);var a=ae.draglayer.select(".nsewdrag").node().getBoundingClientRect();var n=(e.clientX-a.left)/a.width;var i=(a.bottom-e.clientY)/a.height;var o;function s(t,e,r){if(t.fixedrange)return;var a=ge.simpleMap(t.range,t.r2l);var n=a[0]+(a[1]-a[0])*e;function i(e){return t.l2r(n+(e-n)*r)}t.range=a.map(i)}if(C){if(!w)n=.5;for(o=0;o<v.length;o++){s(v[o],n,r)}oe("x");ee[2]*=r;ee[0]+=ee[2]*n*(1/r-1)}if(D){if(!_)i=.5;for(o=0;o<p.length;o++){s(p[o],i,r)}oe("y");ee[3]*=r;ee[1]+=ee[3]*(1-i)*(1/r-1)}ce(ee);se();b.emit("plotly_relayouting",y);te=setTimeout(function(){if(!b._fullLayout)return;ee=[0,0,h,m];ue()},re);e.preventDefault();return}if(_.length*w.length!==1){Qe(N,ne)}function ie(e,t){e=e*x;t=t*R;if(b._transitioningWithDuration){return}b._fullLayout._replotting=true;if(E==="ew"||L==="ns"){var r=E?-e:0;var a=L?-t:0;if(S.isSubplotConstrained){if(E&&L){var n=(e/h-t/m)/2;e=n*h;t=-n*m;r=-e;a=-t}if(L){r=-a*h/m}else{a=-r*m/h}}if(E){Be(v,e);oe("x")}if(L){Be(p,t);oe("y")}ce([r,a,h,m]);se();b.emit("plotly_relayouting",y);return}function i(e,t,r){var a=1-t;var n;var i;for(var o=0;o<e.length;o++){var s=e[o];if(s.fixedrange)continue;n=s;i=s._rl[a]+(s._rl[t]-s._rl[a])/qe(r/s._length);var l=s.l2r(i);if(l!==false&&l!==undefined)s.range[t]=l}return n._length*(n._rl[t]-i)/(n._rl[t]-n._rl[a])}var o=E==="w"===(L==="n")?1:-1;if(E&&L&&(g.isSubplotConstrained||S.isSubplotConstrained)){var s=(e/h+o*t/m)/2;e=s*h;t=o*s*m}var l,u;if(E==="w")e=i(v,0,e);else if(E==="e")e=i(v,1,-e);else if(!E)e=0;if(L==="n")t=i(p,1,t);else if(L==="s")t=i(p,0,-t);else if(!L)t=0;l=E==="w"?e:0;u=L==="n"?t:0;if(g.isSubplotConstrained&&!S.isSubplotConstrained||S.isSubplotConstrained&&E&&L&&o>0){var c;if(S.isSubplotConstrained||!E&&L.length===1){for(c=0;c<v.length;c++){v[c].range=v[c]._r.slice();Ie(v[c],1-t/m)}e=t*h/m;l=e/2}if(S.isSubplotConstrained||!L&&E.length===1){for(c=0;c<p.length;c++){p[c].range=p[c]._r.slice();Ie(p[c],1-e/h)}t=e*m/h;u=t/2}}if(!S.isSubplotConstrained||!L){oe("x")}if(!S.isSubplotConstrained||!E){oe("y")}var f=h-e;var d=m-t;if(S.isSubplotConstrained&&!(E&&L)){if(E){u=l?0:e*m/h;d=f*m/h}else{l=u?0:t*h/m;f=d*h/m}}ce([l,u,f,d]);se();b.emit("plotly_relayouting",y)}function oe(e,t){var r=S.isSubplotConstrained?{x:p,y:v}[e]:S[e+"axes"];var a=S.isSubplotConstrained?{x:v,y:p}[e]:[];for(var n=0;n<r.length;n++){var i=r[n];var o=i._id;var s=S.xLinks[o]||S.yLinks[o];var l=a[0]||M[s]||A[s];if(l){if(t){t[i._name+".range[0]"]=t[l._name+".range[0]"];t[i._name+".range[1]"]=t[l._name+".range[1]"]}else{i.range=l.range.slice()}}}}function se(){var t=[];var r;function e(e){for(r=0;r<e.length;r++){if(!e[r].fixedrange)t.push(e[r]._id)}}if(C){e(v);e(g.xaxes);e(S.xaxes)}if(D){e(p);e(g.yaxes);e(S.yaxes)}y={};for(r=0;r<t.length;r++){var a=t[r];var n=Le(b,a);_e.drawOne(b,n,{skipTitle:true});y[n._name+".range[0]"]=n.range[0];y[n._name+".range[1]"]=n.range[1]}_e.redrawComponents(b,t)}function le(){if(b._transitioningWithDuration)return;var e=b._context.doubleClick;var t=[];if(E)t=t.concat(v);if(L)t=t.concat(p);if(S.xaxes)t=t.concat(S.xaxes);if(S.yaxes)t=t.concat(S.yaxes);var r={};var a,n,i;if(e==="reset+autosize"){e="autosize";for(n=0;n<t.length;n++){a=t[n];if(a._rangeInitial&&(a.range[0]!==a._rangeInitial[0]||a.range[1]!==a._rangeInitial[1])||!a._rangeInitial&&!a.autorange){e="reset";break}}}if(e==="autosize"){for(n=0;n<t.length;n++){a=t[n];if(!a.fixedrange)r[a._name+".autorange"]=true}}else if(e==="reset"){if(E||g.isSubplotConstrained)t=t.concat(g.xaxes);if(L&&!g.isSubplotConstrained)t=t.concat(g.yaxes);if(g.isSubplotConstrained){if(!E)t=t.concat(v);else if(!L)t=t.concat(p)}for(n=0;n<t.length;n++){a=t[n];if(!a.fixedrange){if(!a._rangeInitial){r[a._name+".autorange"]=true}else{i=a._rangeInitial;r[a._name+".range[0]"]=i[0];r[a._name+".range[1]"]=i[1]}}}}b.emit("plotly_doubleclick",null);me.call("_guiRelayout",b,r)}function ue(){ce([0,0,h,m]);ge.syncOrAsync([Ee.previousPromises,function(){b._fullLayout._replotting=false;me.call("_guiRelayout",b,y)}],b)}function ce(e){var t=b._fullLayout;var r=t._plots;var a=t._subplots.cartesian;var n,i,o,s;if(I){me.subplotsRegistry.splom.drag(b)}if(O){for(n=0;n<a.length;n++){i=r[a[n]];o=i.xaxis;s=i.yaxis;if(i._scene){var l=ge.simpleMap(o.range,o.r2l);var u=ge.simpleMap(s.range,s.r2l);i._scene.update({range:[l[0],u[0],l[1],u[1]]})}}}if(I||O){Ae(b);Se(b)}if(P){var c=e[2]/T._length;var f=e[3]/k._length;for(n=0;n<a.length;n++){i=r[a[n]];o=i.xaxis;s=i.yaxis;var d=(C||S.isSubplotConstrained)&&!o.fixedrange&&M[o._id];var v=(D||S.isSubplotConstrained)&&!s.fixedrange&&A[s._id];var p,h;var m,g;if(d){p=c;m=w||S.isSubplotConstrained?e[0]:ve(o,p)}else if(S.xaHash[o._id]){p=c;m=e[0]*o._length/T._length}else if(S.yaHash[o._id]){p=f;m=L==="ns"?-e[1]*o._length/k._length:ve(o,p,{n:"top",s:"bottom"}[L])}else{p=fe(o,c,f);m=de(o,p)}if(v){h=f;g=_||S.isSubplotConstrained?e[1]:ve(s,h)}else if(S.yaHash[s._id]){h=f;g=e[1]*s._length/k._length}else if(S.xaHash[s._id]){h=c;g=E==="ew"?-e[0]*s._length/T._length:ve(s,h,{e:"right",w:"left"}[E])}else{h=fe(s,c,f);g=de(s,h)}if(!p&&!h){continue}if(!p)p=1;if(!h)h=1;var y=o._offset-m/p;var x=s._offset-g/h;i.clipRect.call(xe.setTranslate,m,g).call(xe.setScale,p,h);i.plot.call(xe.setTranslate,y,x).call(xe.setScale,1/p,1/h);if(p!==i.xScaleFactor||h!==i.yScaleFactor){xe.setPointGroupScale(i.zoomScalePts,p,h);xe.setTextPointsScale(i.zoomScaleTxt,p,h)}xe.hideOutsideRangePoints(i.clipOnAxisFalseTraces,i);i.xScaleFactor=p;i.yScaleFactor=h}}}function fe(e,t,r){if(e.fixedrange)return 0;if(C&&g.xaHash[e._id]){return t}if(D&&(g.isSubplotConstrained?g.xaHash:g.yaHash)[e._id]){return r}return 0}function de(e,t){if(t){e.range=e._r.slice();Ie(e,t);return ve(e,t)}return 0}function ve(e,t,r){return e._length*(1-t)*Me[r||e.constraintoward||"middle"]}return N}function c(t,e,r,a){var n=ge.ensureSingle(t.draglayer,e,r,function(e){e.classed("drag",true).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id)});n.call(o,a);return n.node()}function ze(e,t,r,a,n,i,o){var s=c(e,"rect",t,r);pe.select(s).call(xe.setRect,a,n,i,o);return s}function Fe(e,t){for(var r=0;r<e.length;r++){if(!e[r].fixedrange)return t}return""}function je(e,t){var r=e.range[t];var a=Math.abs(r-e.range[1-t]);var n;if(e.type==="date"){return r}else if(e.type==="log"){n=Math.ceil(Math.max(0,-Math.log(a)/Math.LN10))+3;return pe.format("."+n+"g")(Math.pow(10,r))}else{n=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(a)/Math.LN10)+4;return pe.format("."+String(n)+"g")(r)}}function He(e,t,r,a,n){for(var i=0;i<e.length;i++){var o=e[i];if(o.fixedrange)continue;if(o.rangebreaks){var s=o._id.charAt(0)==="y";var l=s?1-t:t;var u=s?1-r:r;a[o._name+".range[0]"]=o.l2r(o.p2l(l*o._length));a[o._name+".range[1]"]=o.l2r(o.p2l(u*o._length))}else{var c=o._rl[0];var f=o._rl[1]-c;a[o._name+".range[0]"]=o.l2r(c+f*t);a[o._name+".range[1]"]=o.l2r(c+f*r)}}if(n&&n.length){var d=(t+(1-r))/2;He(n,d,1-d,a,[])}}function Be(e,t){for(var r=0;r<e.length;r++){var a=e[r];if(!a.fixedrange){if(a.rangebreaks){var n=0;var i=a._length;var o=a.p2l(n+t)-a.p2l(n);var s=a.p2l(i+t)-a.p2l(i);var l=(o+s)/2;a.range=[a.l2r(a._rl[0]-l),a.l2r(a._rl[1]-l)]}else{a.range=[a.l2r(a._rl[0]-t/a._m),a.l2r(a._rl[1]-t/a._m)]}}}}function qe(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function Ue(e,t,r){if(!e)return"pointer";if(e==="nsew"){if(r)return"";if(t==="pan")return"move";return"crosshair"}return e.toLowerCase()+"-resize"}function Ye(e,t,r,a,n){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",i(r,a)).attr("d",n+"Z")}function Ve(e,t,r){return e.append("path").attr("class","zoombox-corners").style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,opacity:0}).attr("transform",i(t,r)).attr("d","M0,0Z")}function Ge(e,t,r,a,n,i){e.attr("d",a+"M"+r.l+","+r.t+"v"+r.h+"h"+r.w+"v-"+r.h+"h-"+r.w+"Z");f(e,t,n,i)}function f(e,t,r,a){if(!r){e.transition().style("fill",a>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200);t.transition().style("opacity",1).duration(200)}}function We(e){pe.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function $e(e){if(l&&e.data&&e._context.showTips){ge.notifier(ge._(e,"Double-click to zoom back out"),"long");l=false}}function Ze(e,t){return"M"+(e.l-.5)+","+(t-Ne-.5)+"h-3v"+(2*Ne+1)+"h3ZM"+(e.r+.5)+","+(t-Ne-.5)+"h3v"+(2*Ne+1)+"h-3Z"}function Xe(e,t){return"M"+(t-Ne-.5)+","+(e.t-.5)+"v-3h"+(2*Ne+1)+"v3ZM"+(t-Ne-.5)+","+(e.b+.5)+"v3h"+(2*Ne+1)+"v-3Z"}function Je(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,Ne)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function Ke(e,t,r,a,n){var i=false;var o={};var s={};var l,u,c,f;var d=(n||{}).xaHash;var v=(n||{}).yaHash;for(var p=0;p<t.length;p++){var h=t[p];for(l in r){if(h[l]){for(c in h){if(!(n&&(d[c]||v[c]))&&!(c.charAt(0)==="x"?r:a)[c]){o[c]=l}}for(u in a){if(!(n&&(d[u]||v[u]))&&h[u]){i=true}}}}for(u in a){if(h[u]){for(f in h){if(!(n&&(d[f]||v[f]))&&!(f.charAt(0)==="x"?r:a)[f]){s[f]=u}}}}}if(i){ge.extendFlat(o,s);s={}}var m={};var g=[];for(c in o){var y=Le(e,c);g.push(y);m[y._id]=y}var x={};var b=[];for(f in s){var _=Le(e,f);b.push(_);x[_._id]=_}return{xaHash:m,yaHash:x,xaxes:g,yaxes:b,xLinks:o,yLinks:s,isSubplotConstrained:i}}function Qe(e,t){if(!a){if(e.onwheel!==undefined)e.onwheel=t;else if(e.onmousewheel!==undefined)e.onmousewheel=t;else if(!e.isAddedWheelEvent){e.isAddedWheelEvent=true;e.addEventListener("wheel",t,{passive:false})}}else{var r=e.onwheel!==undefined?"wheel":"mousewheel";if(e._onwheel){e.removeEventListener(r,e._onwheel)}e._onwheel=t;e.addEventListener(r,t,{passive:false})}}function et(e){var t=[];for(var r in e)t.push(e[r]);return t}t.exports={makeDragBox:u,makeDragger:c,makeRectDragger:ze,makeZoombox:Ye,makeCorners:Ve,updateZoombox:Ge,xyCorners:Je,transitionZoombox:f,removeZoombox:We,showDoubleClickNotifier:$e,attachWheelEventHandler:Qe}},{"../../components/color":100,"../../components/dragelement":119,"../../components/dragelement/helpers":118,"../../components/drawing":122,"../../components/fx":140,"../../constants/alignment":205,"../../lib":230,"../../lib/clear_gl_canvases":218,"../../lib/setcursor":250,"../../lib/svg_text_utils":252,"../../plot_api/subroutines":266,"../../registry":313,"../plots":311,"./axes":276,"./axis_ids":280,"./constants":283,"./scale_zoom":295,"./select":296,"@plotly/d3":11,"has-passive-events":47,tinycolor2:65}],286:[function(e,t,a){"use strict";var n=e("@plotly/d3");var u=e("../../components/fx");var c=e("../../components/dragelement");var i=e("../../lib/setcursor");var f=e("./dragbox").makeDragBox;var d=e("./constants").DRAGGERSIZE;a.initInteractions=function e(s){var l=s._fullLayout;if(s._context.staticPlot){n.select(s).selectAll(".drag").remove();return}if(!l._has("cartesian")&&!l._has("splom"))return;var t=Object.keys(l._plots||{}).sort(function(e,t){if((l._plots[e].mainplot&&true)===(l._plots[t].mainplot&&true)){var r=e.split("y");var a=t.split("y");return r[0]===a[0]?Number(r[1]||1)-Number(a[1]||1):Number(r[0]||1)-Number(a[0]||1)}return l._plots[e].mainplot?1:-1});t.forEach(function(t){var e=l._plots[t];var r=e.xaxis;var a=e.yaxis;if(!e.mainplot){var n=f(s,e,r._offset,a._offset,r._length,a._length,"ns","ew");n.onmousemove=function(e){s._fullLayout._rehover=function(){if(s._fullLayout._hoversubplot===t&&s._fullLayout._plots[t]){u.hover(s,e,t)}};u.hover(s,e,t);s._fullLayout._lasthover=n;s._fullLayout._hoversubplot=t};n.onmouseout=function(e){if(s._dragging)return;s._fullLayout._hoversubplot=null;c.unhover(s,e)};if(s._context.showAxisDragHandles){f(s,e,r._offset-d,a._offset-d,d,d,"n","w");f(s,e,r._offset+r._length,a._offset-d,d,d,"n","e");f(s,e,r._offset-d,a._offset+a._length,d,d,"s","w");f(s,e,r._offset+r._length,a._offset+a._length,d,d,"s","e")}}if(s._context.showAxisDragHandles){if(t===r._mainSubplot){var i=r._mainLinePosition;if(r.side==="top")i-=d;f(s,e,r._offset+r._length*.1,i,r._length*.8,d,"","ew");f(s,e,r._offset,i,r._length*.1,d,"","w");f(s,e,r._offset+r._length*.9,i,r._length*.1,d,"","e")}if(t===a._mainSubplot){var o=a._mainLinePosition;if(a.side!=="right")o-=d;f(s,e,o,a._offset+a._length*.1,d,a._length*.8,"ns","");f(s,e,o,a._offset+a._length*.9,d,a._length*.1,"s","");f(s,e,o,a._offset,d,a._length*.1,"n","")}}});var r=l._hoverlayer.node();r.onmousemove=function(e){e.target=s._fullLayout._lasthover;u.hover(s,e,l._hoversubplot)};r.onclick=function(e){e.target=s._fullLayout._lasthover;u.click(s,e)};r.onmousedown=function(e){s._fullLayout._lasthover.onmousedown(e)};a.updateFx(s)};a.updateFx=function(e){var t=e._fullLayout;var r=t.dragmode==="pan"?"move":"crosshair";i(t._draggers,r)}},{"../../components/dragelement":119,"../../components/fx":140,"../../lib/setcursor":250,"./constants":283,"./dragbox":285,"@plotly/d3":11}],287:[function(e,t,r){"use strict";function a(e){var t=e._fullLayout._zoomlayer;if(t){t.selectAll(".outline-controllers").remove()}}function n(e){var t=e._fullLayout._zoomlayer;if(t){t.selectAll(".select-outline").remove()}e._fullLayout._drawing=false}t.exports={clearOutlineControllers:a,clearSelect:n}},{}],288:[function(e,t,r){"use strict";var a=e("../../lib").strTranslate;function n(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}function i(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}}function o(t){var r=t._id.charAt(0)==="y"?1:0;return function(e){return n(t,e[r])}}function s(e){return a(e.xaxis._offset,e.yaxis._offset)}t.exports={p2r:n,r2p:i,axValue:o,getTransform:s}},{"../../lib":230}],289:[function(e,t,r){"use strict";var x=e("../../registry");var b=e("../../lib");var _=e("./axis_ids");t.exports=function e(y){return function e(t,r){var a=t[y];if(!Array.isArray(a))return;var n=x.subplotsRegistry.cartesian;var i=n.idRegex;var o=r._subplots;var s=o.xaxis;var l=o.yaxis;var u=o.cartesian;var c=r._has("cartesian")||r._has("gl2d");for(var f=0;f<a.length;f++){var d=a[f];if(!b.isPlainObject(d))continue;var v=_.cleanId(d.xref,"x",false);var p=_.cleanId(d.yref,"y",false);var h=i.x.test(v);var m=i.y.test(p);if(h||m){if(!c)b.pushUnique(r._basePlotModules,n);var g=false;if(h&&s.indexOf(v)===-1){s.push(v);g=true}if(m&&l.indexOf(p)===-1){l.push(p);g=true}if(g&&h&&m){u.push(v+p)}}}}}},{"../../lib":230,"../../registry":313,"./axis_ids":280}],290:[function(e,t,r){"use strict";var b=e("@plotly/d3");var _=e("../../registry");var h=e("../../lib");var a=e("../plots");var w=e("../../components/drawing");var T=e("../get_data").getModuleCalcData;var y=e("./axis_ids");var k=e("./constants");var i=e("../../constants/xmlns_namespaces");var d=h.ensureSingle;function v(e,t,r){return h.ensureSingle(e,t,r,function(e){e.datum(r)})}r.name="cartesian";r.attr=["xaxis","yaxis"];r.idRoot=["x","y"];r.idRegex=k.idRegex;r.attrRegex=k.attrRegex;r.attributes=e("./attributes");r.layoutAttributes=e("./layout_attributes");r.supplyLayoutDefaults=e("./layout_defaults");r.transitionAxes=e("./transition_axes");r.finalizeSubplots=function(e,t){var r=t._subplots;var a=r.xaxis;var n=r.yaxis;var i=r.cartesian;var o=i.concat(r.gl2d||[]);var s={};var l={};var u,c,f;for(u=0;u<o.length;u++){var d=o[u].split("y");s[d[0]]=1;l["y"+d[1]]=1}for(u=0;u<a.length;u++){c=a[u];if(!s[c]){f=(e[y.id2name(c)]||{}).anchor;if(!k.idRegex.y.test(f))f="y";i.push(c+f);o.push(c+f);if(!l[f]){l[f]=1;h.pushUnique(n,f)}}}for(u=0;u<n.length;u++){f=n[u];if(!l[f]){c=(e[y.id2name(f)]||{}).anchor;if(!k.idRegex.x.test(c))c="x";i.push(c+f);o.push(c+f);if(!s[c]){s[c]=1;h.pushUnique(a,c)}}}if(!o.length){c="";f="";for(var v in e){if(k.attrRegex.test(v)){var p=v.charAt(0);if(p==="x"){if(!c||+v.substr(5)<+c.substr(5)){c=v}}else if(!f||+v.substr(5)<+f.substr(5)){f=v}}}c=c?y.name2id(c):"x";f=f?y.name2id(f):"y";a.push(c);n.push(f);i.push(c+f)}};r.plot=function(e,t,r,a){var n=e._fullLayout;var i=n._subplots.cartesian;var o=e.calcdata;var s;if(!Array.isArray(t)){t=[];for(s=0;s<o.length;s++)t.push(s)}for(s=0;s<i.length;s++){var l=i[s];var u=n._plots[l];var c=[];var f;for(var d=0;d<o.length;d++){var v=o[d];var p=v[0].trace;if(p.xaxis+p.yaxis===l){if(t.indexOf(p.index)!==-1||p.carpet){if(f&&f[0].trace.xaxis+f[0].trace.yaxis===l&&["tonextx","tonexty","tonext"].indexOf(p.fill)!==-1&&c.indexOf(f)===-1){c.push(f)}c.push(v)}f=v}}m(e,u,c,r,a)}};function m(a,n,e,i,o){var t=k.traceLayerClasses;var r=a._fullLayout;var s=r._modules;var l,u,c;var f=[];var d=[];for(var v=0;v<s.length;v++){l=s[v];var p=l.name;var h=_.modules[p].categories;if(h.svg){var m=l.layerName||p+"layer";var g=l.plot;u=T(e,g);c=u[0];e=u[1];if(c.length){f.push({i:t.indexOf(m),className:m,plotMethod:g,cdModule:c})}if(h.zoomScale){d.push("."+m)}}}f.sort(function(e,t){return e.i-t.i});var y=n.plot.selectAll("g.mlayer").data(f,function(e){return e.className});y.enter().append("g").attr("class",function(e){return e.className}).classed("mlayer",true).classed("rangeplot",n.isRangePlot);y.exit().remove();y.order();y.each(function(e){var t=b.select(this);var r=e.className;e.plotMethod(a,n,e.cdModule,t,i,o);if(k.clipOnAxisFalseQuery.indexOf("."+r)===-1){w.setClipUrl(t,n.layerClipId,a)}});if(r._has("scattergl")){l=_.getModule("scattergl");c=T(e,l)[0];l.plot(a,n,c)}if(!a._context.staticPlot){if(n._hasClipOnAxisFalse){n.clipOnAxisFalseTraces=n.plot.selectAll(k.clipOnAxisFalseQuery.join(",")).selectAll(".trace")}if(d.length){var x=n.plot.selectAll(d.join(",")).selectAll(".trace");n.zoomScalePts=x.selectAll("path.point");n.zoomScaleTxt=x.selectAll(".textpoint")}}}r.clean=function(e,t,r,a){var n=a._plots||{};var i=t._plots||{};var o=a._subplots||{};var s;var l,u;if(a._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms){for(u in n){s=n[u];if(s.plotgroup)s.plotgroup.remove()}}var c=a._has&&a._has("gl");var f=t._has&&t._has("gl");if(c&&!f){for(u in n){s=n[u];if(s._scene)s._scene.destroy()}}if(o.xaxis&&o.yaxis){var d=y.listIds({_fullLayout:a});for(l=0;l<d.length;l++){var v=d[l];if(!t[y.id2name(v)]){a._infolayer.selectAll(".g-"+v+"title").remove()}}}var p=a._has&&a._has("cartesian");var h=t._has&&t._has("cartesian");if(p&&!h){x(a._cartesianlayer.selectAll(".subplot"),a);a._defs.selectAll(".axesclip").remove();delete a._axisConstraintGroups;delete a._axisMatchGroups}else if(o.cartesian){for(l=0;l<o.cartesian.length;l++){var m=o.cartesian[l];if(!i[m]){var g="."+m+",."+m+"-x,."+m+"-y";a._cartesianlayer.selectAll(g).remove();M(m,a)}}}};r.drawFramework=function(a){var n=a._fullLayout;var e=o(a);var t=n._cartesianlayer.selectAll(".subplot").data(e,String);t.enter().append("g").attr("class",function(e){return"subplot "+e[0]});t.order();t.exit().call(x,n);t.each(function(e){var t=e[0];var r=n._plots[t];r.plotgroup=b.select(this);s(a,r);r.draglayer=d(n._draggers,"g",t)})};r.rangePlot=function(e,t,r){s(e,t);m(e,t,r);a.style(e)};function o(e){var t=e._fullLayout;var r=t._subplots.cartesian;var a=r.length;var n,i,o,s,l,u;var c=[];var f=[];for(n=0;n<a;n++){o=r[n];s=t._plots[o];l=s.xaxis;u=s.yaxis;var d=l._mainAxis;var v=u._mainAxis;var p=d._id+v._id;var h=t._plots[p];s.overlays=[];if(p!==o&&h){s.mainplot=p;s.mainplotinfo=h;f.push(o)}else{s.mainplot=undefined;s.mainplotinfo=undefined;c.push(o)}}for(n=0;n<f.length;n++){o=f[n];s=t._plots[o];s.mainplotinfo.overlays.push(s)}var m=c.concat(f);var g=new Array(a);for(n=0;n<a;n++){o=m[n];s=t._plots[o];l=s.xaxis;u=s.yaxis;var y=[o,l.layer,u.layer,l.overlaying||"",u.overlaying||""];for(i=0;i<s.overlays.length;i++){y.push(s.overlays[i].id)}g[n]=y}return g}function s(e,t){var r=t.plotgroup;var a=t.id;var n=k.layerValue2layerClass[t.xaxis.layer];var i=k.layerValue2layerClass[t.yaxis.layer];var o=e._fullLayout._hasOnlyLargeSploms;if(!t.mainplot){if(o){t.xlines=d(r,"path","xlines-above");t.ylines=d(r,"path","ylines-above");t.xaxislayer=d(r,"g","xaxislayer-above");t.yaxislayer=d(r,"g","yaxislayer-above")}else{var s=d(r,"g","layer-subplot");t.shapelayer=d(s,"g","shapelayer");t.imagelayer=d(s,"g","imagelayer");t.gridlayer=d(r,"g","gridlayer");t.zerolinelayer=d(r,"g","zerolinelayer");d(r,"path","xlines-below");d(r,"path","ylines-below");t.overlinesBelow=d(r,"g","overlines-below");d(r,"g","xaxislayer-below");d(r,"g","yaxislayer-below");t.overaxesBelow=d(r,"g","overaxes-below");t.plot=d(r,"g","plot");t.overplot=d(r,"g","overplot");t.xlines=d(r,"path","xlines-above");t.ylines=d(r,"path","ylines-above");t.overlinesAbove=d(r,"g","overlines-above");d(r,"g","xaxislayer-above");d(r,"g","yaxislayer-above");t.overaxesAbove=d(r,"g","overaxes-above");t.xlines=r.select(".xlines-"+n);t.ylines=r.select(".ylines-"+i);t.xaxislayer=r.select(".xaxislayer-"+n);t.yaxislayer=r.select(".yaxislayer-"+i)}}else{var l=t.mainplotinfo;var u=l.plotgroup;var c=a+"-x";var f=a+"-y";t.gridlayer=l.gridlayer;t.zerolinelayer=l.zerolinelayer;d(l.overlinesBelow,"path",c);d(l.overlinesBelow,"path",f);d(l.overaxesBelow,"g",c);d(l.overaxesBelow,"g",f);t.plot=d(l.overplot,"g",a);d(l.overlinesAbove,"path",c);d(l.overlinesAbove,"path",f);d(l.overaxesAbove,"g",c);d(l.overaxesAbove,"g",f);t.xlines=u.select(".overlines-"+n).select("."+c);t.ylines=u.select(".overlines-"+i).select("."+f);t.xaxislayer=u.select(".overaxes-"+n).select("."+c);t.yaxislayer=u.select(".overaxes-"+i).select("."+f)}if(!o){v(t.gridlayer,"g",t.xaxis._id);v(t.gridlayer,"g",t.yaxis._id);t.gridlayer.selectAll("g").map(function(e){return e[0]}).sort(y.idSort)}t.xlines.style("fill","none").classed("crisp",true);t.ylines.style("fill","none").classed("crisp",true)}function x(e,a){if(!e)return;var n={};e.each(function(e){var t=e[0];var r=b.select(this);r.remove();M(t,a);n[t]=true});for(var t in a._plots){var r=a._plots[t];var i=r.overlays||[];for(var o=0;o<i.length;o++){var s=i[o];if(n[s.id]){s.plot.selectAll(".trace").remove()}}}}function M(e,t){t._draggers.selectAll("g."+e).remove();t._defs.select("#clip"+t._uid+e+"plot").remove()}r.toSVG=function(e){var a=e._fullLayout._glimages;var r=b.select(e).selectAll(".svg-container");var t=r.filter(function(e,t){return t===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function n(){var e=this;var t=e.toDataURL("image/png");var r=a.append("svg:image");r.attr({xmlns:i.svg,"xlink:href":t,preserveAspectRatio:"none",x:0,y:0,width:e.width,height:e.height})}t.each(n)};r.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":122,"../../constants/xmlns_namespaces":211,"../../lib":230,"../../registry":313,"../get_data":307,"../plots":311,"./attributes":274,"./axis_ids":280,"./constants":283,"./graph_interact":286,"./layout_attributes":291,"./layout_defaults":292,"./transition_axes":301,"@plotly/d3":11}],291:[function(e,t,r){"use strict";var a=e("../font_attributes");var n=e("../../components/color/attributes");var i=e("../../components/drawing/attributes").dash;var o=e("../../lib/extend").extendFlat;var s=e("../../plot_api/plot_template").templatedArray;var l=e("../../plots/cartesian/axis_format_attributes").descriptionWithDates;var u=e("../../constants/numerical").ONEDAY;var c=e("./constants");var f=c.HOUR_PATTERN;var d=c.WEEKDAY_PATTERN;t.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:n.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:a({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:true},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[true,false,"reversed"],dflt:true,editType:"axrange",impliedEdits:{"range[0]":undefined,"range[1]":undefined}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":false},anim:true},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":false},anim:true}],editType:"axrange",impliedEdits:{autorange:false},anim:true},fixedrange:{valType:"boolean",dflt:false,editType:"calc"},scaleanchor:{valType:"enumerated",values:[c.idRegex.x.toString(),c.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[c.idRegex.x.toString(),c.idRegex.y.toString()],editType:"calc"},rangebreaks:s("rangebreak",{enabled:{valType:"boolean",dflt:true,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[d,f,""],editType:"calc"},values:{valType:"info_array",freeLength:true,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:u},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:undefined,dtick:undefined}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[true,"ticks",false,"all","allticks"],dflt:false,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:n.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:true,editType:"ticks"},automargin:{valType:"boolean",dflt:false,editType:"ticks"},showspikes:{valType:"boolean",dflt:false,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:o({},i,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:a({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:false,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:l("tick label")},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:true,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:l("hover text")},showline:{valType:"boolean",dflt:false,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:n.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:n.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:n.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:true,editType:"ticks"},dividercolor:{valType:"color",dflt:n.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",c.idRegex.x.toString(),c.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",c.idRegex.x.toString(),c.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:a({editType:"ticks"})}}},{"../../components/color/attributes":99,"../../components/drawing/attributes":121,"../../constants/numerical":210,"../../lib/extend":224,"../../plot_api/plot_template":265,"../../plots/cartesian/axis_format_attributes":279,"../font_attributes":305,"./constants":283}],292:[function(e,t,r){"use strict";var se=e("../../lib");var le=e("../../components/color");var ue=e("../../components/fx/helpers").isUnifiedHover;var ce=e("../../components/fx/hovermode_defaults");var fe=e("../../plot_api/plot_template");var de=e("../layout_attributes");var ve=e("./layout_attributes");var pe=e("./type_defaults");var he=e("./axis_defaults");var me=e("./constraints");var ge=e("./position_defaults");var ye=e("./axis_ids");var xe=ye.id2name;var be=ye.name2id;var _e=e("./constants").AX_ID_PATTERN;var a=e("../../registry");var we=a.traceIs;var Te=a.getComponentMethod;function ke(e,t,r){if(Array.isArray(e[t]))e[t].push(r);else e[t]=[r]}t.exports=function e(o,t,r){var a=t.autotypenumbers;var n={};var i={};var s={};var l={};var u={};var c={};var f={};var d={};var v={};var p={};var h,m;for(h=0;h<r.length;h++){var g=r[h];if(!we(g,"cartesian")&&!we(g,"gl2d"))continue;var y;if(g.xaxis){y=xe(g.xaxis);ke(n,y,g)}else if(g.xaxes){for(m=0;m<g.xaxes.length;m++){ke(n,xe(g.xaxes[m]),g)}}var x;if(g.yaxis){x=xe(g.yaxis);ke(n,x,g)}else if(g.yaxes){for(m=0;m<g.yaxes.length;m++){ke(n,xe(g.yaxes[m]),g)}}if(g.type==="funnel"){if(g.orientation==="h"){if(y)i[y]=true;if(x)f[x]=true}else{if(x)s[x]=true}}else if(g.type==="image"){if(x)d[x]=true;if(y)d[y]=true}else{if(x){u[x]=true;c[x]=true}if(!we(g,"carpet")||g.type==="carpet"&&!g._cheater){if(y)l[y]=true}}if(g.type==="carpet"&&g._cheater){if(y)i[y]=true}if(we(g,"2dMap")){v[y]=true;v[x]=true}if(we(g,"oriented")){var b=g.orientation==="h"?x:y;p[b]=true}}var _=t._subplots;var w=_.xaxis;var T=_.yaxis;var k=se.simpleMap(w,xe);var M=se.simpleMap(T,xe);var A=k.concat(M);var S=le.background;if(w.length&&T.length){S=se.coerce(o,t,de,"plot_bgcolor")}var E=le.combine(S,t.paper_bgcolor);var L;var C;var D;var O;var I;function P(){var e=n[L]||[];I._traceIndices=e.map(function(e){return e._expandedIndex});I._annIndices=[];I._shapeIndices=[];I._imgIndices=[];I._subplotsWith=[];I._counterAxes=[];I._name=I._attr=L;I._id=C}function R(e,t){return se.coerce(O,I,ve,e,t)}function N(e,t){return se.coerce2(O,I,ve,e,t)}function z(e){return e==="x"?T:w}function F(e,t){var r=e==="x"?k:M;var a=[];for(var n=0;n<r.length;n++){var i=r[n];if(i!==t&&!(o[i]||{}).overlaying){a.push(be(i))}}return a}var j={x:z("x"),y:z("y")};var H=j.x.concat(j.y);var B={};var q=[];function U(){var e=O.matches;if(_e.test(e)&&H.indexOf(e)===-1){B[e]=O.type;q=Object.keys(B)}}var Y=ce(o,t);var V=ue(Y);for(h=0;h<A.length;h++){L=A[h];C=be(L);D=L.charAt(0);if(!se.isPlainObject(o[L])){o[L]={}}O=o[L];I=fe.newContainer(t,L,D+"axis");P();var G=D==="x"&&!l[L]&&i[L]||D==="y"&&!u[L]&&s[L];var W=D==="y"&&(!c[L]&&f[L]||d[L]);var $={letter:D,font:t.font,outerTicks:v[L],showGrid:!p[L],data:n[L]||[],bgColor:E,calendar:t.calendar,automargin:true,visibleDflt:G,reverseDflt:W,autotypenumbersDflt:a,splomStash:((t._splomAxes||{})[D]||{})[C]};R("uirevision",t.uirevision);pe(O,I,R,$);he(O,I,R,$,t);var Z=V&&D===Y.charAt(0);var X=N("spikecolor",V?I.color:undefined);var J=N("spikethickness",V?1.5:undefined);var K=N("spikedash",V?"dot":undefined);var Q=N("spikemode",V?"across":undefined);var ee=N("spikesnap");var te=R("showspikes",!!Z||!!X||!!J||!!K||!!Q||!!ee);if(!te){delete I.spikecolor;delete I.spikethickness;delete I.spikedash;delete I.spikemode;delete I.spikesnap}ge(O,I,R,{letter:D,counterAxes:j[D],overlayableAxes:F(D,L),grid:t.grid});R("title.standoff");U();I._input=O}h=0;while(h<q.length){C=q[h++];L=xe(C);D=L.charAt(0);if(!se.isPlainObject(o[L])){o[L]={}}O=o[L];I=fe.newContainer(t,L,D+"axis");P();var re={letter:D,font:t.font,outerTicks:v[L],showGrid:!p[L],data:[],bgColor:E,calendar:t.calendar,automargin:true,visibleDflt:false,reverseDflt:false,autotypenumbersDflt:a,splomStash:((t._splomAxes||{})[D]||{})[C]};R("uirevision",t.uirevision);I.type=B[C]||"linear";he(O,I,R,re,t);ge(O,I,R,{letter:D,counterAxes:j[D],overlayableAxes:F(D,L),grid:t.grid});R("fixedrange");U();I._input=O}var ae=Te("rangeslider","handleDefaults");var ne=Te("rangeselector","handleDefaults");for(h=0;h<k.length;h++){L=k[h];O=o[L];I=t[L];ae(o,t,L);if(I.type==="date"){ne(O,I,t,M,I.calendar)}R("fixedrange")}for(h=0;h<M.length;h++){L=M[h];O=o[L];I=t[L];var ie=t[xe(I.anchor)];var oe=Te("rangeslider","isVisible")(ie);R("fixedrange",oe)}me.handleDefaults(o,t,{axIds:H.concat(q).sort(ye.idSort),axHasImage:d})}},{"../../components/color":100,"../../components/fx/helpers":136,"../../components/fx/hovermode_defaults":139,"../../lib":230,"../../plot_api/plot_template":265,"../../registry":313,"../layout_attributes":309,"./axis_defaults":278,"./axis_ids":280,"./constants":283,"./constraints":284,"./layout_attributes":291,"./position_defaults":294,"./type_defaults":302}],293:[function(e,t,r){"use strict";var g=e("tinycolor2").mix;var y=e("../../components/color/attributes").lightFraction;var x=e("../../lib");t.exports=function e(r,a,t,n){n=n||{};var i=n.dfltColor;function o(e,t){return x.coerce2(r,a,n.attributes,e,t)}var s=o("linecolor",i);var l=o("linewidth");var u=t("showline",n.showLine||!!s||!!l);if(!u){delete a.linecolor;delete a.linewidth}var c=g(i,n.bgColor,n.blend||y).toRgbString();var f=o("gridcolor",c);var d=o("gridwidth");var v=t("showgrid",n.showGrid||!!f||!!d);if(!v){delete a.gridcolor;delete a.gridwidth}if(!n.noZeroLine){var p=o("zerolinecolor",i);var h=o("zerolinewidth");var m=t("zeroline",n.showGrid||!!p||!!h);if(!m){delete a.zerolinecolor;delete a.zerolinewidth}}}},{"../../components/color/attributes":99,"../../lib":230,tinycolor2:65}],294:[function(e,t,r){"use strict";var m=e("fast-isnumeric");var g=e("../../lib");t.exports=function e(t,r,a,n){var i=n.counterAxes||[];var o=n.overlayableAxes||[];var s=n.letter;var l=n.grid;var u,c,f,d;if(l){c=l._domains[s][l._axisMap[r._id]];u=l._anchors[r._id];if(c){f=l[s+"side"].split(" ")[0];d=l.domain[s][f==="right"||f==="top"?1:0]}}c=c||[0,1];u=u||(m(t.position)?"free":i[0]||"free");f=f||(s==="x"?"bottom":"left");d=d||0;var v=g.coerce(t,r,{anchor:{valType:"enumerated",values:["free"].concat(i),dflt:u}},"anchor");if(v==="free")a("position",d);g.coerce(t,r,{side:{valType:"enumerated",values:s==="x"?["bottom","top"]:["left","right"],dflt:f}},"side");var p=false;if(o.length){p=g.coerce(t,r,{overlaying:{valType:"enumerated",values:[false].concat(o),dflt:false}},"overlaying")}if(!p){var h=a("domain",c);if(h[0]>h[1]-1/4096)r.domain=c;g.noneOrAll(t.domain,r.domain,c)}a("layer");return r}},{"../../lib":230,"fast-isnumeric":15}],295:[function(e,t,r){"use strict";var o=e("../../constants/alignment").FROM_BL;t.exports=function e(t,r,a){if(a===undefined){a=o[t.constraintoward||"center"]}var n=[t.r2l(t.range[0]),t.r2l(t.range[1])];var i=n[0]+(n[1]-n[0])*a;t.range=t._input.range=[t.l2r(i+(n[0]-i)*r),t.l2r(i+(n[1]-i)*r)];t.setScale()}},{"../../constants/alignment":205}],296:[function(e,t,r){"use strict";var n=e("polybooljs");var m=e("../../registry");var G=e("../../components/drawing").dashStyle;var W=e("../../components/color");var $=e("../../components/fx");var i=e("../../components/fx/helpers").makeEventData;var a=e("../../components/dragelement/helpers");var Z=a.freeMode;var X=a.rectMode;var J=a.drawMode;var K=a.openMode;var Q=a.selectMode;var ee=e("../../components/shapes/draw_newshape/display_outlines");var te=e("../../components/shapes/draw_newshape/helpers").handleEllipse;var l=e("../../components/shapes/draw_newshape/newshapes");var re=e("../../lib");var u=e("../../lib/polygon");var ae=e("../../lib/throttle");var v=e("./axis_ids").getFromId;var g=e("../../lib/clear_gl_canvases");var y=e("../../plot_api/subroutines").redrawReglTraces;var ne=e("./constants");var ie=ne.MINSELECT;var oe=u.filter;var se=u.tester;var c=e("./handle_outline").clearSelect;var o=e("./helpers");var le=o.p2r;var ue=o.axValue;var ce=o.getTransform;function s(e,t,r,l,a){var u=Z(a);var c=X(a);var f=K(a);var d=J(a);var v=Q(a);var n=a==="drawline";var p=a==="drawcircle";var h=n||p;var m=l.gd;var g=m._fullLayout;var i=g._zoomlayer;var o=l.element.getBoundingClientRect();var s=l.plotinfo;var y=ce(s);var x=t-o.left;var b=r-o.top;g._calcInverseTransform(m);var _=re.apply3DTransform(g._invTransform)(x,b);x=_[0];b=_[1];var w=g._invScaleX;var T=g._invScaleY;var k=x;var M=b;var A="M"+x+","+b;var S=l.xaxes[0]._length;var E=l.yaxes[0]._length;var L=l.xaxes.concat(l.yaxes);var C=e.altKey&&!(J(a)&&f);var D,O,I,P;var R,N,z;ve(e,m,l);if(u){D=oe([[x,b]],ne.BENDPX)}var F=i.selectAll("path.select-outline-"+s.id).data(d?[0]:[1,2]);var j=g.newshape;F.enter().append("path").attr("class",function(e){return"select-outline select-outline-"+e+" select-outline-"+s.id}).style(d?{opacity:j.opacity/2,fill:f?undefined:j.fillcolor,stroke:j.line.color,"stroke-dasharray":G(j.line.dash,j.line.width),"stroke-width":j.line.width+"px"}:{}).attr("fill-rule",j.fillrule).classed("cursor-move",d?true:false).attr("transform",y).attr("d",A+"Z");var H=i.append("path").attr("class","zoombox-corners").style({fill:W.background,stroke:W.defaultLine,"stroke-width":1}).attr("transform",y).attr("d","M0,0Z");var B=g._uid+ne.SELECTID;var q=[];var U=he(m,l.xaxes,l.yaxes,l.subplot);function Y(e,t){return e-t}var V;if(s.fillRangeItems){V=s.fillRangeItems}else{if(c){V=function(e,t){var r=e.range={};for(R=0;R<L.length;R++){var a=L[R];var n=a._id.charAt(0);r[a._id]=[le(a,t[n+"min"]),le(a,t[n+"max"])].sort(Y)}}}else{V=function(e,t,r){var a=e.lassoPoints={};for(R=0;R<L.length;R++){var n=L[R];a[n._id]=r.filtered.map(ue(n))}}}}l.moveFn=function(e,t){k=Math.max(0,Math.min(S,w*e+x));M=Math.max(0,Math.min(E,T*t+b));var r=Math.abs(k-x);var a=Math.abs(M-b);if(c){var n;var i,o;if(v){var s=g.selectdirection;if(s==="any"){if(a<Math.min(r*.6,ie)){n="h"}else if(r<Math.min(a*.6,ie)){n="v"}else{n="d"}}else{n=s}switch(n){case"h":i=p?E/2:0;o=E;break;case"v":i=p?S/2:0;o=S;break}}if(d){switch(g.newshape.drawdirection){case"vertical":n="h";i=p?E/2:0;o=E;break;case"horizontal":n="v";i=p?S/2:0;o=S;break;case"ortho":if(r<a){n="h";i=b;o=M}else{n="v";i=x;o=k}break;default:n="d"}}if(n==="h"){P=h?te(p,[k,i],[k,o]):[[x,i],[x,o],[k,o],[k,i]];P.xmin=h?k:Math.min(x,k);P.xmax=h?k:Math.max(x,k);P.ymin=Math.min(i,o);P.ymax=Math.max(i,o);H.attr("d","M"+P.xmin+","+(b-ie)+"h-4v"+2*ie+"h4Z"+"M"+(P.xmax-1)+","+(b-ie)+"h4v"+2*ie+"h-4Z")}else if(n==="v"){P=h?te(p,[i,M],[o,M]):[[i,b],[i,M],[o,M],[o,b]];P.xmin=Math.min(i,o);P.xmax=Math.max(i,o);P.ymin=h?M:Math.min(b,M);P.ymax=h?M:Math.max(b,M);H.attr("d","M"+(x-ie)+","+P.ymin+"v-4h"+2*ie+"v4Z"+"M"+(x-ie)+","+(P.ymax-1)+"v4h"+2*ie+"v-4Z")}else if(n==="d"){P=h?te(p,[x,b],[k,M]):[[x,b],[x,M],[k,M],[k,b]];P.xmin=Math.min(x,k);P.xmax=Math.max(x,k);P.ymin=Math.min(b,M);P.ymax=Math.max(b,M);H.attr("d","M0,0Z")}}else if(u){D.addPt([k,M]);P=D.filtered}if(l.selectionDefs&&l.selectionDefs.length){I=ge(l.mergedPolygons,P,C);P.subtract=C;O=de(l.selectionDefs.concat([P]))}else{I=[P];O=se(P)}ee(xe(I,f),F,l);if(v){ae.throttle(B,ne.SELECTDELAY,function(){q=[];var e;var t=[];var r;for(R=0;R<U.length;R++){N=U[R];r=N._module.selectPoints(N,O);t.push(r);e=ye(r,N);if(q.length){for(var a=0;a<e.length;a++){q.push(e[a])}}else q=e}z={points:q};me(m,U,z);V(z,P,D);l.gd.emit("plotly_selecting",z)})}};l.clickFn=function(e,t){H.remove();if(m._fullLayout._activeShapeIndex>=0){m._fullLayout._deactivateShape(m);return}if(d)return;var r=g.clickmode;ae.done(B).then(function(){ae.clear(B);if(e===2){F.remove();for(R=0;R<U.length;R++){N=U[R];N._module.selectPoints(N,false)}me(m,U);pe(l);m.emit("plotly_deselect",null)}else{if(r.indexOf("select")>-1){fe(t,m,l.xaxes,l.yaxes,l.subplot,l,F)}if(r==="event"){m.emit("plotly_selected",undefined)}}$.click(m,t)}).catch(re.error)};l.doneFn=function(){H.remove();ae.done(B).then(function(){ae.clear(B);l.gd.emit("plotly_selected",z);if(P&&l.selectionDefs){P.subtract=C;l.selectionDefs.push(P);l.mergedPolygons.length=0;[].push.apply(l.mergedPolygons,I)}if(l.doneFnCompleted){l.doneFnCompleted(q)}}).catch(re.error);if(d){pe(l)}}}function fe(e,t,r,a,n,i,o){var s=t._hoverdata;var l=t._fullLayout;var u=l.clickmode;var c=u.indexOf("event")>-1;var f=[];var d,v,p,h,m;var g,y,x,b,_;if(L(s)){ve(e,t,i);d=he(t,r,a,n);var w=C(s,d);var T=w.pointNumbers.length>0;if(T?O(d,w):I(d)&&(y=D(w))){if(o)o.remove();for(_=0;_<d.length;_++){v=d[_];v._module.selectPoints(v,false)}me(t,d);pe(i);if(c){t.emit("plotly_deselect",null)}}else{x=e.shiftKey&&(y!==undefined?y:D(w));p=E(w.pointNumber,w.searchInfo,x);var k=i.selectionDefs.concat([p]);h=de(k);for(_=0;_<d.length;_++){m=d[_]._module.selectPoints(d[_],h);g=ye(m,d[_]);if(f.length){for(var M=0;M<g.length;M++){f.push(g[M])}}else f=g}b={points:f};me(t,d,b);if(p&&i){i.selectionDefs.push(p)}if(o){var A=i.mergedPolygons;var S=K(i.dragmode);ee(xe(A,S),o,i)}if(c){t.emit("plotly_selected",b)}}}}function E(e,t,r){return{pointNumber:e,searchInfo:t,subtract:r}}function f(e){return"pointNumber"in e&&"searchInfo"in e}function d(o){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(e,t,r,a){var n=o.searchInfo.cd[0].trace._expandedIndex;var i=a.cd[0].trace._expandedIndex;return i===n&&r===o.pointNumber},isRect:false,degenerate:false,subtract:o.subtract}}function de(e){var o=[];var t=f(e[0])?0:e[0][0][0];var r=t;var a=f(e[0])?0:e[0][0][1];var n=a;for(var i=0;i<e.length;i++){if(f(e[i])){o.push(d(e[i]))}else{var s=u.tester(e[i]);s.subtract=e[i].subtract;o.push(s);t=Math.min(t,s.xmin);r=Math.max(r,s.xmax);a=Math.min(a,s.ymin);n=Math.max(n,s.ymax)}}function l(e,t,r,a){var n=false;for(var i=0;i<o.length;i++){if(o[i].contains(e,t,r,a)){n=o[i].subtract===false}}return n}return{xmin:t,xmax:r,ymin:a,ymax:n,pts:[],contains:l,isRect:false,degenerate:false}}function ve(e,t,r){t._fullLayout._drawing=false;var a=t._fullLayout;var n=r.plotinfo;var i=r.dragmode;var o=a._lastSelectedSubplot&&a._lastSelectedSubplot===n.id;var s=(e.shiftKey||e.altKey)&&!(J(i)&&K(i));if(o&&s&&(n.selection&&n.selection.selectionDefs)&&!r.selectionDefs){r.selectionDefs=n.selection.selectionDefs;r.mergedPolygons=n.selection.mergedPolygons}else if(!s||!n.selection){pe(r)}if(!o){c(t);a._lastSelectedSubplot=n.id}}function pe(e){var t=e.dragmode;var r=e.plotinfo;var a=e.gd;if(a._fullLayout._activeShapeIndex>=0){a._fullLayout._deactivateShape(a)}if(J(t)){var n=a._fullLayout;var i=n._zoomlayer;var o=i.selectAll(".select-outline-"+r.id);if(o&&a._fullLayout._drawing){var s=l(o,e);if(s){m.call("_guiRelayout",a,{shapes:s})}a._fullLayout._drawing=false}}r.selection={};r.selection.selectionDefs=e.selectionDefs=[];r.selection.mergedPolygons=e.mergedPolygons=[]}function he(e,t,r,a){var n=[];var i=t.map(function(e){return e._id});var o=r.map(function(e){return e._id});var s,l,u;for(u=0;u<e.calcdata.length;u++){s=e.calcdata[u];l=s[0].trace;if(l.visible!==true||!l._module||!l._module.selectPoints)continue;if(a&&(l.subplot===a||l.geo===a)){n.push(d(l._module,s,t[0],r[0]))}else if(l.type==="splom"&&l._xaxes[i[0]]&&l._yaxes[o[0]]){var c=d(l._module,s,t[0],r[0]);c.scene=e._fullLayout._splomScenes[l.uid];n.push(c)}else if(l.type==="sankey"){var f=d(l._module,s,t[0],r[0]);n.push(f)}else{if(i.indexOf(l.xaxis)===-1)continue;if(o.indexOf(l.yaxis)===-1)continue;n.push(d(l._module,s,v(e,l.xaxis),v(e,l.yaxis)))}}return n;function d(e,t,r,a){return{_module:e,cd:t,xaxis:r,yaxis:a}}}function L(e){return e&&Array.isArray(e)&&e[0].hoverOnBox!==true}function C(e,t){var r=e[0];var a=-1;var n=[];var i,o;for(o=0;o<t.length;o++){i=t[o];if(r.fullData._expandedIndex===i.cd[0].trace._expandedIndex){if(r.hoverOnBox===true){break}if(r.pointNumber!==undefined){a=r.pointNumber}else if(r.binNumber!==undefined){a=r.binNumber;n=r.pointNumbers}break}}return{pointNumber:a,pointNumbers:n,searchInfo:i}}function D(e){var t=e.searchInfo.cd[0].trace;var r=e.pointNumber;var a=e.pointNumbers;var n=a.length>0;var i=n?a[0]:r;return t.selectedpoints?t.selectedpoints.indexOf(i)>-1:false}function O(e,t){var r=[];var a,n,i,o;for(o=0;o<e.length;o++){a=e[o];if(a.cd[0].trace.selectedpoints&&a.cd[0].trace.selectedpoints.length>0){r.push(a)}}if(r.length===1){i=r[0]===t.searchInfo;if(i){n=t.searchInfo.cd[0].trace;if(n.selectedpoints.length===t.pointNumbers.length){for(o=0;o<t.pointNumbers.length;o++){if(n.selectedpoints.indexOf(t.pointNumbers[o])<0){return false}}return true}}}return false}function I(e){var t=0;var r,a,n;for(n=0;n<e.length;n++){r=e[n];a=r.cd[0].trace;if(a.selectedpoints){if(a.selectedpoints.length>1)return false;t+=a.selectedpoints.length;if(t>1)return false}}return t===1}function me(e,t,r){var a,n,i,o;for(a=0;a<t.length;a++){var s=t[a].cd[0].trace._fullInput;var l=e._fullLayout._tracePreGUI[s.uid]||{};if(l.selectedpoints===undefined){l.selectedpoints=s._input.selectedpoints||null}}if(r){var u=r.points||[];for(a=0;a<t.length;a++){o=t[a].cd[0].trace;o._input.selectedpoints=o._fullInput.selectedpoints=[];if(o._fullInput!==o)o.selectedpoints=[]}for(a=0;a<u.length;a++){var c=u[a];var f=c.data;var d=c.fullData;if(c.pointIndices){[].push.apply(f.selectedpoints,c.pointIndices);if(o._fullInput!==o){[].push.apply(d.selectedpoints,c.pointIndices)}}else{f.selectedpoints.push(c.pointIndex);if(o._fullInput!==o){d.selectedpoints.push(c.pointIndex)}}}}else{for(a=0;a<t.length;a++){o=t[a].cd[0].trace;delete o.selectedpoints;delete o._input.selectedpoints;if(o._fullInput!==o){delete o._fullInput.selectedpoints}}}var v=false;for(a=0;a<t.length;a++){n=t[a];i=n.cd;o=i[0].trace;if(m.traceIs(o,"regl")){v=true}var p=n._module;var h=p.styleOnSelect||p.style;if(h){h(e,i,i[0].node3);if(i[0].nodeRangePlot3)h(e,i,i[0].nodeRangePlot3)}}if(v){g(e);y(e)}}function ge(e,t,r){var a;if(r){a=n.difference({regions:e,inverted:false},{regions:[t],inverted:false});return a.regions}a=n.union({regions:e,inverted:false},{regions:[t],inverted:false});return a.regions}function ye(e,t){if(Array.isArray(e)){var r=t.cd;var a=t.cd[0].trace;for(var n=0;n<e.length;n++){e[n]=i(e[n],a,r)}}return e}function xe(e,t){var r=[];for(var a=0;a<e.length;a++){r[a]=[];for(var n=0;n<e[a].length;n++){r[a][n]=[];r[a][n][0]=n?"L":"M";for(var i=0;i<e[a][n].length;i++){r[a][n].push(e[a][n][i])}}if(!t){r[a].push(["Z",r[a][0][1],r[a][0][2]])}}return r}t.exports={prepSelect:s,clearSelect:c,clearSelectionsCache:pe,selectOnClick:fe}},{"../../components/color":100,"../../components/dragelement/helpers":118,"../../components/drawing":122,"../../components/fx":140,"../../components/fx/helpers":136,"../../components/shapes/draw_newshape/display_outlines":188,"../../components/shapes/draw_newshape/helpers":189,"../../components/shapes/draw_newshape/newshapes":190,"../../lib":230,"../../lib/clear_gl_canvases":218,"../../lib/polygon":242,"../../lib/throttle":253,"../../plot_api/subroutines":266,"../../registry":313,"./axis_ids":280,"./constants":283,"./handle_outline":287,"./helpers":288,polybooljs:55}],297:[function(e,t,r){"use strict";var b=e("@plotly/d3");var _=e("d3-time-format").utcFormat;var w=e("fast-isnumeric");var T=e("../../lib");var k=T.cleanNumber;var M=T.ms2DateTime;var A=T.dateTime2ms;var S=T.ensureNumber;var E=T.isArrayOrTypedArray;var a=e("../../constants/numerical");var L=a.FP_SAFE;var C=a.BADNUM;var D=a.LOG_CLIP;var O=a.ONEWEEK;var I=a.ONEDAY;var P=a.ONEHOUR;var R=a.ONEMIN;var N=a.ONESEC;var z=e("./axis_ids");var F=e("./constants");var j=F.HOUR_PATTERN;var H=F.WEEKDAY_PATTERN;function B(e){return Math.pow(10,e)}function q(e){return e!==null&&e!==undefined}t.exports=function e(y,p){p=p||{};var h=y._id||"x";var m=h.charAt(0);function r(e,t){if(e>0)return Math.log(e)/Math.LN10;else if(e<=0&&t&&y.range&&y.range.length===2){var r=y.range[0];var a=y.range[1];return.5*(r+a-2*D*Math.abs(r-a))}else return C}function a(e,t,r,a){if((a||{}).msUTC&&w(e)){return+e}var n=A(e,r||y.calendar);if(n===C){if(w(e)){e=+e;var i=Math.floor(T.mod(e+.05,1)*10);var o=Math.round(e-i/10);n=A(new Date(o))+i/10}else return C}return n}function n(e,t,r){return M(e,t,r||y.calendar)}function t(e){return y._categories[Math.round(e)]}function g(e){if(q(e)){if(y._categoriesMap===undefined){y._categoriesMap={}}if(y._categoriesMap[e]!==undefined){return y._categoriesMap[e]}else{y._categories.push(typeof e==="number"?String(e):e);var t=y._categories.length-1;y._categoriesMap[e]=t;return t}}return C}function f(e,t){var r=new Array(t);for(var a=0;a<t;a++){var n=(e[0]||[])[a];var i=(e[1]||[])[a];r[a]=o([n,i])}return r}function o(e){if(y._categoriesMap){return y._categoriesMap[e]}}function i(e){var t=o(e);if(t!==undefined)return t;if(w(e))return+e}function s(e){return w(e)?+e:o(e)}function c(e,t,r){return b.round(r+t*e,2)}function l(e,t,r){return(e-r)/t}var d=function e(t){if(!w(t))return C;return c(t,y._m,y._b)};var u=function(e){return l(e,y._m,y._b)};if(y.rangebreaks){var v=m==="y";d=function(e){if(!w(e))return C;var t=y._rangebreaks.length;if(!t)return c(e,y._m,y._b);var r=v;if(y.range[0]>y.range[1])r=!r;var a=r?-1:1;var n=a*e;var i=0;for(var o=0;o<t;o++){var s=a*y._rangebreaks[o].min;var l=a*y._rangebreaks[o].max;if(n<s)break;if(n>l)i=o+1;else{i=n<(s+l)/2?o:o+1;break}}var u=y._B[i]||0;if(!isFinite(u))return 0;return c(e,y._m2,u)};u=function(e){var t=y._rangebreaks.length;if(!t)return l(e,y._m,y._b);var r=0;for(var a=0;a<t;a++){if(e<y._rangebreaks[a].pmin)break;if(e>y._rangebreaks[a].pmax)r=a+1}return l(e,y._m2,y._B[r])}}y.c2l=y.type==="log"?r:S;y.l2c=y.type==="log"?B:S;y.l2p=d;y.p2l=u;y.c2p=y.type==="log"?function(e,t){return d(r(e,t))}:d;y.p2c=y.type==="log"?function(e){return B(u(e))}:u;if(["linear","-"].indexOf(y.type)!==-1){y.d2r=y.r2d=y.d2c=y.r2c=y.d2l=y.r2l=k;y.c2d=y.c2r=y.l2d=y.l2r=S;y.d2p=y.r2p=function(e){return y.l2p(k(e))};y.p2d=y.p2r=u;y.cleanPos=S}else if(y.type==="log"){y.d2r=y.d2l=function(e,t){return r(k(e),t)};y.r2d=y.r2c=function(e){return B(k(e))};y.d2c=y.r2l=k;y.c2d=y.l2r=S;y.c2r=r;y.l2d=B;y.d2p=function(e,t){return y.l2p(y.d2r(e,t))};y.p2d=function(e){return B(u(e))};y.r2p=function(e){return y.l2p(k(e))};y.p2r=u;y.cleanPos=S}else if(y.type==="date"){y.d2r=y.r2d=T.identity;y.d2c=y.r2c=y.d2l=y.r2l=a;y.c2d=y.c2r=y.l2d=y.l2r=n;y.d2p=y.r2p=function(e,t,r){return y.l2p(a(e,0,r))};y.p2d=y.p2r=function(e,t,r){return n(u(e),t,r)};y.cleanPos=function(e){return T.cleanDate(e,C,y.calendar)}}else if(y.type==="category"){y.d2c=y.d2l=g;y.r2d=y.c2d=y.l2d=t;y.d2r=y.d2l_noadd=i;y.r2c=function(e){var t=s(e);return t!==undefined?t:y.fraction2r(.5)};y.l2r=y.c2r=S;y.r2l=s;y.d2p=function(e){return y.l2p(y.r2c(e))};y.p2d=function(e){return t(u(e))};y.r2p=y.d2p;y.p2r=u;y.cleanPos=function(e){if(typeof e==="string"&&e!=="")return e;return S(e)}}else if(y.type==="multicategory"){y.r2d=y.c2d=y.l2d=t;y.d2r=y.d2l_noadd=i;y.r2c=function(e){var t=i(e);return t!==undefined?t:y.fraction2r(.5)};y.r2c_just_indices=o;y.l2r=y.c2r=S;y.r2l=i;y.d2p=function(e){return y.l2p(y.r2c(e))};y.p2d=function(e){return t(u(e))};y.r2p=y.d2p;y.p2r=u;y.cleanPos=function(e){if(Array.isArray(e)||typeof e==="string"&&e!=="")return e;return S(e)};y.setupMultiCategory=function(e){var t=y._traceIndices;var r,a;var n=y._matchGroup;if(n&&y._categories.length===0){for(var i in n){if(i!==h){var o=p[z.id2name(i)];t=t.concat(o._traceIndices)}}}var s=[[0,{}],[0,{}]];var l=[];for(r=0;r<t.length;r++){var u=e[t[r]];if(m in u){var c=u[m];var f=u._length||T.minRowLength(c);if(E(c[0])&&E(c[1])){for(a=0;a<f;a++){var d=c[0][a];var v=c[1][a];if(q(d)&&q(v)){l.push([d,v]);if(!(d in s[0][1])){s[0][1][d]=s[0][0]++}if(!(v in s[1][1])){s[1][1][v]=s[1][0]++}}}}}}l.sort(function(e,t){var r=s[0][1];var a=r[e[0]]-r[t[0]];if(a)return a;var n=s[1][1];return n[e[1]]-n[t[1]]});for(r=0;r<l.length;r++){g(l[r])}}}y.fraction2r=function(e){var t=y.r2l(y.range[0]);var r=y.r2l(y.range[1]);return y.l2r(t+e*(r-t))};y.r2fraction=function(e){var t=y.r2l(y.range[0]);var r=y.r2l(y.range[1]);return(y.r2l(e)-t)/(r-t)};y.cleanRange=function(e,t){if(!t)t={};if(!e)e="range";var r=T.nestedProperty(y,e).get();var a,n;if(y.type==="date")n=T.dfltRange(y.calendar);else if(m==="y")n=F.DFLTRANGEY;else n=t.dfltRange||F.DFLTRANGEX;n=n.slice();if(y.rangemode==="tozero"||y.rangemode==="nonnegative"){n[0]=0}if(!r||r.length!==2){T.nestedProperty(y,e).set(n);return}if(y.type==="date"&&!y.autorange){r[0]=T.cleanDate(r[0],C,y.calendar);r[1]=T.cleanDate(r[1],C,y.calendar)}for(a=0;a<2;a++){if(y.type==="date"){if(!T.isDateTime(r[a],y.calendar)){y[e]=n;break}if(y.r2l(r[0])===y.r2l(r[1])){var i=T.constrain(y.r2l(r[0]),T.MIN_MS+1e3,T.MAX_MS-1e3);r[0]=y.l2r(i-1e3);r[1]=y.l2r(i+1e3);break}}else{if(!w(r[a])){if(w(r[1-a])){r[a]=r[1-a]*(a?10:.1)}else{y[e]=n;break}}if(r[a]<-L)r[a]=-L;else if(r[a]>L)r[a]=L;if(r[0]===r[1]){var o=Math.max(1,Math.abs(r[0]*1e-6));r[0]-=o;r[1]+=o}}}};y.setScale=function(e){var t=p._size;if(y.overlaying){var r=z.getFromId({_fullLayout:p},y.overlaying);y.domain=r.domain}var a=e&&y._r?"_r":"range";var n=y.calendar;y.cleanRange(a);var i=y.r2l(y[a][0],n);var o=y.r2l(y[a][1],n);var s=m==="y";if(s){y._offset=t.t+(1-y.domain[1])*t.h;y._length=t.h*(y.domain[1]-y.domain[0]);y._m=y._length/(i-o);y._b=-y._m*o}else{y._offset=t.l+y.domain[0]*t.w;y._length=t.w*(y.domain[1]-y.domain[0]);y._m=y._length/(o-i);y._b=-y._m*i}y._rangebreaks=[];y._lBreaks=0;y._m2=0;y._B=[];if(y.rangebreaks){var l,u;y._rangebreaks=y.locateBreaks(Math.min(i,o),Math.max(i,o));if(y._rangebreaks.length){for(l=0;l<y._rangebreaks.length;l++){u=y._rangebreaks[l];y._lBreaks+=Math.abs(u.max-u.min)}var c=s;if(i>o)c=!c;if(c)y._rangebreaks.reverse();var f=c?-1:1;y._m2=f*y._length/(Math.abs(o-i)-y._lBreaks);y._B.push(-y._m2*(s?o:i));for(l=0;l<y._rangebreaks.length;l++){u=y._rangebreaks[l];y._B.push(y._B[y._B.length-1]-f*y._m2*(u.max-u.min))}for(l=0;l<y._rangebreaks.length;l++){u=y._rangebreaks[l];u.pmin=d(u.min);u.pmax=d(u.max)}}}if(!isFinite(y._m)||!isFinite(y._b)||y._length<0){p._replotting=false;throw new Error("Something went wrong with axis scaling")}};y.maskBreaks=function(e){var t=y.rangebreaks||[];var r,a,n,i,o;if(!t._cachedPatterns){t._cachedPatterns=t.map(function(e){return e.enabled&&e.bounds?T.simpleMap(e.bounds,e.pattern?k:y.d2c):null})}if(!t._cachedValues){t._cachedValues=t.map(function(e){return e.enabled&&e.values?T.simpleMap(e.values,y.d2c).sort(T.sorterAsc):null})}for(var s=0;s<t.length;s++){var l=t[s];if(l.enabled){if(l.bounds){var u=l.pattern;r=t._cachedPatterns[s];a=r[0];n=r[1];switch(u){case H:o=new Date(e);i=o.getUTCDay();if(a>n){n+=7;if(i<a)i+=7}break;case j:o=new Date(e);var c=o.getUTCHours();var f=o.getUTCMinutes();var d=o.getUTCSeconds();var v=o.getUTCMilliseconds();i=c+(f/60+d/3600+v/36e5);if(a>n){n+=24;if(i<a)i+=24}break;case"":i=e;break}if(i>=a&&i<n)return C}else{var p=t._cachedValues[s];for(var h=0;h<p.length;h++){a=p[h];n=a+l.dvalue;if(e>=a&&e<n)return C}}}}return e};y.locateBreaks=function(i,o){var e,t,r,a;var s=[];if(!y.rangebreaks)return s;var n=y.rangebreaks.slice().sort(function(e,t){if(e.pattern===H&&t.pattern===j)return-1;if(t.pattern===H&&e.pattern===j)return 1;return 0});var l=function(e,t){e=T.constrain(e,i,o);t=T.constrain(t,i,o);if(e===t)return;var r=true;for(var a=0;a<s.length;a++){var n=s[a];if(e<n.max&&t>=n.min){if(e<n.min){n.min=e}if(t>n.max){n.max=t}r=false}}if(r){s.push({min:e,max:t})}};for(e=0;e<n.length;e++){var u=n[e];if(u.enabled){if(u.bounds){var c=i;var f=o;if(u.pattern){c=Math.floor(c)}t=T.simpleMap(u.bounds,u.pattern?k:y.r2l);r=t[0];a=t[1];var d=new Date(c);var v;var p;switch(u.pattern){case H:p=O;v=((a<r?7:0)+(a-r))*I;c+=r*I-(d.getUTCDay()*I+d.getUTCHours()*P+d.getUTCMinutes()*R+d.getUTCSeconds()*N+d.getUTCMilliseconds());break;case j:p=I;v=((a<r?24:0)+(a-r))*P;c+=r*P-(d.getUTCHours()*P+d.getUTCMinutes()*R+d.getUTCSeconds()*N+d.getUTCMilliseconds());break;default:c=Math.min(t[0],t[1]);f=Math.max(t[0],t[1]);p=f-c;v=p}for(var h=c;h<f;h+=p){l(h,h+v)}}else{var m=T.simpleMap(u.values,y.d2c);for(var g=0;g<m.length;g++){r=m[g];a=r+u.dvalue;l(r,a)}}}}s.sort(function(e,t){return e.min-t.min});return s};y.makeCalcdata=function(e,t,r){var a,n,i,o;var s=y.type;var l=s==="date"&&e[t+"calendar"];if(t in e){a=e[t];o=e._length||T.minRowLength(a);if(T.isTypedArray(a)&&(s==="linear"||s==="log")){if(o===a.length){return a}else if(a.subarray){return a.subarray(0,o)}}if(s==="multicategory"){return f(a,o)}n=new Array(o);for(i=0;i<o;i++){n[i]=y.d2c(a[i],0,l,r)}}else{var u=t+"0"in e?y.d2c(e[t+"0"],0,l):0;var c=e["d"+t]?Number(e["d"+t]):1;a=e[{x:"y",y:"x"}[t]];o=e._length||a.length;n=new Array(o);for(i=0;i<o;i++){n[i]=u+i*c}}if(y.rangebreaks){for(i=0;i<o;i++){n[i]=y.maskBreaks(n[i])}}return n};y.isValidRange=function(e){return Array.isArray(e)&&e.length===2&&w(y.r2l(e[0]))&&w(y.r2l(e[1]))};y.isPtWithinRange=function(e,t){var r=y.c2l(e[m],null,t);var a=y.r2l(y.range[0]);var n=y.r2l(y.range[1]);if(a<n){return a<=r&&r<=n}else{return n<=r&&r<=a}};y._emptyCategories=function(){y._categories=[];y._categoriesMap={}};y.clearCalc=function(){var e=y._matchGroup;if(e){var t=null;var r=null;for(var a in e){var n=p[z.id2name(a)];if(n._categories){t=n._categories;r=n._categoriesMap;break}}if(t&&r){y._categories=t;y._categoriesMap=r}else{y._emptyCategories()}}else{y._emptyCategories()}if(y._initialCategories){for(var i=0;i<y._initialCategories.length;i++){g(y._initialCategories[i])}}};y.sortByInitialCategories=function(){var e=[];y._emptyCategories();if(y._initialCategories){for(var t=0;t<y._initialCategories.length;t++){g(y._initialCategories[t])}}e=e.concat(y._traceIndices);var r=y._matchGroup;for(var a in r){if(h===a)continue;var n=p[z.id2name(a)];n._categories=y._categories;n._categoriesMap=y._categoriesMap;e=e.concat(n._traceIndices)}return e};var x=p._d3locale;if(y.type==="date"){y._dateFormat=x?x.timeFormat:_;y._extraFormat=p._extraFormat}y._separators=p.separators;y._numFormat=x?x.numberFormat:b.format;delete y._minDtick;delete y._forceTick0}},{"../../constants/numerical":210,"../../lib":230,"./axis_ids":280,"./constants":283,"@plotly/d3":11,"d3-time-format":13,"fast-isnumeric":15}],298:[function(e,t,r){"use strict";var p=e("../../lib");var h=e("../../components/color").contrast;var m=e("./layout_attributes");var g=e("../array_container_defaults");t.exports=function e(t,r,a,n,i,o){if(!o||o.pass===1){s(t,r,a,n,i)}if(!o||o.pass===2){l(t,r,a,n,i)}};function s(e,t,r,a,n){var i=y(e);var o=r("tickprefix");if(o)r("showtickprefix",i);var s=r("ticksuffix",n.tickSuffixDflt);if(s)r("showticksuffix",i)}function l(e,t,r,a,n){var i=y(e);var o=r("tickprefix");if(o)r("showtickprefix",i);var s=r("ticksuffix",n.tickSuffixDflt);if(s)r("showticksuffix",i);var l=r("showticklabels");if(l){var u=n.font||{};var c=t.color;var f=t.ticklabelposition||"";var d=f.indexOf("inside")!==-1?h(n.bgColor):c&&c!==m.color.dflt?c:u.color;p.coerceFont(r,"tickfont",{family:u.family,size:u.size,color:d});r("tickangle");if(a!=="category"){var v=r("tickformat");g(e,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:x});if(!t.tickformatstops.length){delete t.tickformatstops}if(!v&&a!=="date"){r("showexponent",i);r("exponentformat");r("minexponent");r("separatethousands")}}}}function y(t){var e=["showexponent","showtickprefix","showticksuffix"];var r=e.filter(function(e){return t[e]!==undefined});var a=function(e){return t[e]===t[r[0]]};if(r.every(a)||r.length===1){return t[r[0]]}}function x(r,a){function e(e,t){return p.coerce(r,a,m.tickformatstops,e,t)}var t=e("enabled");if(t){e("dtickrange");e("value")}}},{"../../components/color":100,"../../lib":230,"../array_container_defaults":271,"./layout_attributes":291}],299:[function(e,t,r){"use strict";var u=e("../../lib");var c=e("./layout_attributes");t.exports=function e(t,r,a,n){var i=u.coerce2(t,r,c,"ticklen");var o=u.coerce2(t,r,c,"tickwidth");var s=u.coerce2(t,r,c,"tickcolor",r.color);var l=a("ticks",n.outerTicks||i||o||s?"outside":"");if(!l){delete r.ticklen;delete r.tickwidth;delete r.tickcolor}}},{"../../lib":230,"./layout_attributes":291}],300:[function(e,t,r){"use strict";var v=e("./clean_ticks");var p=e("../../lib").isArrayOrTypedArray;t.exports=function e(r,a,t,n){function i(e){var t=r[e];return t!==undefined?t:(a._template||{})[e]}var o=i("tick0");var s=i("dtick");var l=i("tickvals");var u=p(l)?"array":s?"linear":"auto";var c=t("tickmode",u);if(c==="auto")t("nticks");else if(c==="linear"){var f=a.dtick=v.dtick(s,n);a.tick0=v.tick0(o,n,a.calendar,f)}else if(n!=="multicategory"){var d=t("tickvals");if(d===undefined)a.tickmode="auto";else t("ticktext")}}},{"../../lib":230,"./clean_ticks":282}],301:[function(e,t,r){"use strict";var h=e("@plotly/d3");var m=e("../../registry");var S=e("../../lib");var E=e("../../components/drawing");var L=e("./axes");t.exports=function e(A,i,a,t){var n=A._fullLayout;if(i.length===0){L.redrawComponents(A);return}function o(e){var t=e.xaxis;var r=e.yaxis;n._defs.select("#"+e.clipId+"> rect").call(E.setTranslate,0,0).call(E.setScale,1,1);e.plot.call(E.setTranslate,t._offset,r._offset).call(E.setScale,1,1);var a=e.plot.selectAll(".scatterlayer .trace");a.selectAll(".point").call(E.setPointGroupScale,1,1);a.selectAll(".textpoint").call(E.setTextPointsScale,1,1);a.call(E.hideOutsideRangePoints,e)}function s(e,t){var r=e.plotinfo;var a=r.xaxis;var n=r.yaxis;var i=a._length;var o=n._length;var s=!!e.xr1;var l=!!e.yr1;var u=[];if(s){var c=S.simpleMap(e.xr0,a.r2l);var f=S.simpleMap(e.xr1,a.r2l);var d=c[1]-c[0];var v=f[1]-f[0];u[0]=(c[0]*(1-t)+t*f[0]-c[0])/(c[1]-c[0])*i;u[2]=i*(1-t+t*v/d);a.range[0]=a.l2r(c[0]*(1-t)+t*f[0]);a.range[1]=a.l2r(c[1]*(1-t)+t*f[1])}else{u[0]=0;u[2]=i}if(l){var p=S.simpleMap(e.yr0,n.r2l);var h=S.simpleMap(e.yr1,n.r2l);var m=p[1]-p[0];var g=h[1]-h[0];u[1]=(p[1]*(1-t)+t*h[1]-p[1])/(p[0]-p[1])*o;u[3]=o*(1-t+t*g/m);n.range[0]=a.l2r(p[0]*(1-t)+t*h[0]);n.range[1]=n.l2r(p[1]*(1-t)+t*h[1])}else{u[1]=0;u[3]=o}L.drawOne(A,a,{skipTitle:true});L.drawOne(A,n,{skipTitle:true});L.redrawComponents(A,[a._id,n._id]);var y=s?i/u[2]:1;var x=l?o/u[3]:1;var b=s?u[0]:0;var _=l?u[1]:0;var w=s?u[0]/u[2]*i:0;var T=l?u[1]/u[3]*o:0;var k=a._offset-w;var M=n._offset-T;r.clipRect.call(E.setTranslate,b,_).call(E.setScale,1/y,1/x);r.plot.call(E.setTranslate,k,M).call(E.setScale,y,x);E.setPointGroupScale(r.zoomScalePts,1/y,1/x);E.setTextPointsScale(r.zoomScaleTxt,1/y,1/x)}var l;if(t){l=t()}function u(){var e={};for(var t=0;t<i.length;t++){var r=i[t];var a=r.plotinfo.xaxis;var n=r.plotinfo.yaxis;if(r.xr1)e[a._name+".range"]=r.xr1.slice();if(r.yr1)e[n._name+".range"]=r.yr1.slice()}l&&l();return m.call("relayout",A,e).then(function(){for(var e=0;e<i.length;e++){o(i[e].plotinfo)}})}function r(){var e={};for(var t=0;t<i.length;t++){var r=i[t];var a=r.plotinfo.xaxis;var n=r.plotinfo.yaxis;if(r.xr0)e[a._name+".range"]=r.xr0.slice();if(r.yr0)e[n._name+".range"]=r.yr0.slice()}return m.call("relayout",A,e).then(function(){for(var e=0;e<i.length;e++){o(i[e].plotinfo)}})}var c,f,d;var v=h.ease(a.easing);A._transitionData._interruptCallbacks.push(function(){window.cancelAnimationFrame(d);d=null;return r()});function p(){f=Date.now();var e=Math.min(1,(f-c)/a.duration);var t=v(e);for(var r=0;r<i.length;r++){s(i[r],t)}if(f-c>a.duration){u();d=window.cancelAnimationFrame(p)}else{d=window.requestAnimationFrame(p)}}c=Date.now();d=window.requestAnimationFrame(p);return Promise.resolve()}},{"../../components/drawing":122,"../../lib":230,"../../registry":313,"./axes":276,"@plotly/d3":11}],302:[function(e,t,r){"use strict";var p=e("../../registry").traceIs;var h=e("./axis_autotype");t.exports=function e(t,r,a,n){a("autotypenumbers",n.autotypenumbersDflt);var i=a("type",(n.splomStash||{}).type);if(i==="-"){o(r,n.data);if(r.type==="-"){r.type="linear"}else{t.type=r.type}}};function o(e,t){if(e.type!=="-")return;var r=e._id;var a=r.charAt(0);var n;if(r.indexOf("scene")!==-1)r=a;var i=m(t,r,a);if(!i)return;if(i.type==="histogram"&&a==={v:"y",h:"x"}[i.orientation||"v"]){e.type="linear";return}var o=a+"calendar";var s=i[o];var l={noMultiCategory:!p(i,"cartesian")||p(i,"noMultiCategory")};if(i.type==="box"&&i._hasPreCompStats&&a==={h:"x",v:"y"}[i.orientation||"v"]){l.noMultiCategory=true}l.autotypenumbers=e.autotypenumbers;if(y(i,a)){var u=g(i);var c=[];for(n=0;n<t.length;n++){var f=t[n];if(!p(f,"box-violin")||(f[a+"axis"]||a)!==r)continue;if(f[u]!==undefined)c.push(f[u][0]);else if(f.name!==undefined)c.push(f.name);else c.push("text");if(f[o]!==s)s=undefined}e.type=h(c,s,l)}else if(i.type==="splom"){var d=i.dimensions;var v=d[i._axesDim[r]];if(v.visible)e.type=h(v.values,s,l)}else{e.type=h(i[a]||[i[a+"0"]],s,l)}}function m(e,t,r){for(var a=0;a<e.length;a++){var n=e[a];if(n.type==="splom"&&n._length>0&&(n["_"+r+"axes"]||{})[t]){return n}if((n[r+"axis"]||r)===t){if(y(n,r)){return n}else if((n[r]||[]).length||n[r+"0"]){return n}}}}function g(e){return{v:"x",h:"y"}[e.orientation||"v"]}function y(e,t){var r=g(e);var a=p(e,"box-violin");var n=p(e._fullInput||{},"candlestick");return a&&!n&&t===r&&e[r]===undefined&&e[r+"0"]===undefined}},{"../../registry":313,"./axis_autotype":277}],303:[function(e,t,v){"use strict";var o=e("../registry");var d=e("../lib");v.manageCommandObserver=function(r,e,t,a){var n={};var i=true;if(e&&e._commandObserver){n=e._commandObserver}if(!n.cache){n.cache={}}n.lookupTable={};var o=v.hasSimpleAPICommandBindings(r,t,n.lookupTable);if(e&&e._commandObserver){if(!o){if(e._commandObserver.remove){e._commandObserver.remove();e._commandObserver=null;return n}}else{return n}}if(o){u(r,o,n.cache);n.check=function e(){if(!i)return;var t=u(r,o,n.cache);if(t.changed&&a){if(n.lookupTable[t.value]!==undefined){n.disable();Promise.resolve(a({value:t.value,type:o.type,prop:o.prop,traces:o.traces,index:n.lookupTable[t.value]})).then(n.enable,n.enable)}}return t.changed};var s=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"];for(var l=0;l<s.length;l++){r._internalOn(s[l],n.check)}n.remove=function(){for(var e=0;e<s.length;e++){r._removeInternalListener(s[e],n.check)}}}else{d.log("Unable to automatically bind plot updates to API command");n.lookupTable={};n.remove=function(){}}n.disable=function e(){i=false};n.enable=function e(){i=true};if(e){e._commandObserver=n}return n};v.hasSimpleAPICommandBindings=function(e,t,r){var a;var n=t.length;var i;for(a=0;a<n;a++){var o;var s=t[a];var l=s.method;var u=s.args;if(!Array.isArray(u))u=[];if(!l){return false}var c=v.computeAPICommandBindings(e,l,u);if(c.length!==1){return false}if(!i){i=c[0];if(Array.isArray(i.traces)){i.traces.sort()}}else{o=c[0];if(o.type!==i.type){return false}if(o.prop!==i.prop){return false}if(Array.isArray(i.traces)){if(Array.isArray(o.traces)){o.traces.sort();for(var f=0;f<i.traces.length;f++){if(i.traces[f]!==o.traces[f]){return false}}}else{return false}}else{if(o.prop!==i.prop){return false}}}o=c[0];var d=o.value;if(Array.isArray(d)){if(d.length===1){d=d[0]}else{return false}}if(r){r[d]=a}}return i};function u(e,t,r){var a,n,i;var o=false;if(t.type==="data"){a=e._fullData[t.traces!==null?t.traces[0]:0]}else if(t.type==="layout"){a=e._fullLayout}else{return false}n=d.nestedProperty(a,t.prop).get();i=r[t.type]=r[t.type]||{};if(i.hasOwnProperty(t.prop)){if(i[t.prop]!==n){o=true}}i[t.prop]=n;return{changed:o,value:n}}v.executeAPICommand=function(e,t,r){if(t==="skip")return Promise.resolve();var a=o.apiMethodRegistry[t];var n=[e];if(!Array.isArray(r))r=[];for(var i=0;i<r.length;i++){n.push(r[i])}return a.apply(null,n).catch(function(e){d.warn("API call to Plotly."+t+" rejected.",e);return Promise.reject(e)})};v.computeAPICommandBindings=function(e,t,r){var a;if(!Array.isArray(r))r=[];switch(t){case"restyle":a=s(e,r);break;case"relayout":a=i(e,r);break;case"update":a=s(e,[r[0],r[2]]).concat(i(e,[r[1]]));break;case"animate":a=n(e,r);break;default:a=[]}return a};function n(e,t){if(Array.isArray(t[0])&&t[0].length===1&&["string","number"].indexOf(typeof t[0][0])!==-1){return[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]}else{return[]}}function i(e,t){var a=[];var r=t[0];var n={};if(typeof r==="string"){n[r]=t[1]}else if(d.isPlainObject(r)){n=r}else{return a}l(n,function(e,t,r){a.push({type:"layout",prop:e,value:r})},"",0);return a}function s(u,e){var c,t,r,a;var f=[];t=e[0];r=e[1];c=e[2];a={};if(typeof t==="string"){a[t]=r}else if(d.isPlainObject(t)){a=t;if(c===undefined){c=r}}else{return f}if(c===undefined){c=null}l(a,function(e,t,r){var a;var n;if(Array.isArray(r)){n=r.slice();var i=Math.min(n.length,u.data.length);if(c){i=Math.min(i,c.length)}a=[];for(var o=0;o<i;o++){a[o]=c?c[o]:o}}else{n=r;a=c?c.slice():null}if(a===null){if(Array.isArray(n)){n=n[0]}}else if(Array.isArray(a)){if(!Array.isArray(n)){var s=n;n=[];for(var l=0;l<a.length;l++){n[l]=s}}n.length=Math.min(a.length,n.length)}f.push({type:"data",prop:e,traces:a,value:n})},"",0);return f}function l(a,n,i,o){Object.keys(a).forEach(function(e){var t=a[e];if(e[0]==="_")return;var r=i+(o>0?".":"")+e;if(d.isPlainObject(t)){l(t,n,r,o+1)}else{n(r,e,t)}})}},{"../lib":230,"../registry":313}],304:[function(e,t,r){"use strict";var s=e("../lib/extend").extendFlat;r.attributes=function(e,t){e=e||{};t=t||{};var r={valType:"info_array",editType:e.editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]};var a=e.name?e.name+" ":"";var n=e.trace?"trace ":"subplot ";var i=t.description?" "+t.description:"";var o={x:s({},r,{}),y:s({},r,{}),editType:e.editType};if(!e.noGridCell){o.row={valType:"integer",min:0,dflt:0,editType:e.editType};o.column={valType:"integer",min:0,dflt:0,editType:e.editType}}return o};r.defaults=function(e,t,r,a){var n=a&&a.x||[0,1];var i=a&&a.y||[0,1];var o=t.grid;if(o){var s=r("domain.column");if(s!==undefined){if(s<o.columns)n=o._domains.x[s];else delete e.domain.column}var l=r("domain.row");if(l!==undefined){if(l<o.rows)i=o._domains.y[l];else delete e.domain.row}}var u=r("domain.x",n);var c=r("domain.y",i);if(!(u[0]<u[1]))e.domain.x=n.slice();if(!(c[0]<c[1]))e.domain.y=i.slice()}},{"../lib/extend":224}],305:[function(e,t,r){"use strict";t.exports=function(e){var t=e.editType;var r=e.colorEditType;if(r===undefined)r=t;var a={family:{valType:"string",noBlank:true,strict:true,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:r},editType:t};if(e.arrayOk){a.family.arrayOk=true;a.size.arrayOk=true;a.color.arrayOk=true}return a}},{}],306:[function(e,t,r){"use strict";t.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],307:[function(e,t,r){"use strict";var f=e("../registry");var d=e("./cartesian/constants").SUBPLOT_PATTERN;r.getSubplotCalcData=function(e,t,r){var a=f.subplotsRegistry[t];if(!a)return[];var n=a.attr;var i=[];for(var o=0;o<e.length;o++){var s=e[o];var l=s[0].trace;if(l[n]===r)i.push(s)}return i};r.getModuleCalcData=function(e,t){var r=[];var a=[];var n;if(typeof t==="string"){n=f.getModule(t).plot}else if(typeof t==="function"){n=t}else{n=t.plot}if(!n){return[r,e]}for(var i=0;i<e.length;i++){var o=e[i];var s=o[0].trace;if(s.visible!==true||s._length===0)continue;if(s._module.plot===n){r.push(o)}else{a.push(o)}}return[r,a]};r.getSubplotData=function e(t,r,a){if(!f.subplotsRegistry[r])return[];var n=f.subplotsRegistry[r].attr;var i=[];var o,s,l;if(r==="gl2d"){var u=a.match(d);s="x"+u[1];l="y"+u[2]}for(var c=0;c<t.length;c++){o=t[c];if(r==="gl2d"&&f.traceIs(o,"gl2d")){if(o[n[0]]===s&&o[n[1]]===l){i.push(o)}}else{if(o[n]===a)i.push(o)}}return i}},{"../registry":313,"./cartesian/constants":283}],308:[function(e,t,r){"use strict";function a(e,t){var r=[0,0,0,0];var a,n;for(a=0;a<4;++a){for(n=0;n<4;++n){r[n]+=e[4*a+n]*t[a]}}return r}function n(e,t){var r=a(e.projection,a(e.view,a(e.model,[t[0],t[1],t[2],1])));return r}t.exports=n},{}],309:[function(e,t,r){"use strict";var a=e("./font_attributes");var n=e("./animation_attributes");var i=e("../components/color/attributes");var o=e("../components/shapes/draw_newshape/attributes");var s=e("./pad_attributes");var l=e("../lib/extend").extendFlat;var u=a({editType:"calc"});u.family.dflt='"Open Sans", verdana, arial, sans-serif';u.size.dflt=12;u.color.dflt=i.defaultLine;t.exports={font:u,title:{text:{valType:"string",editType:"layoutstyle"},font:a({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:l(s({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[false,"hide","show"],dflt:false,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:false,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:true,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:i.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:i.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:false,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:i.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:o.newshape,activeshape:o.activeshape,meta:{valType:"any",arrayOk:true,editType:"plot"},transition:l({},n.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:a({editType:"layoutstyle"})}}},{"../components/color/attributes":99,"../components/shapes/draw_newshape/attributes":185,"../lib/extend":224,"./animation_attributes":270,"./font_attributes":305,"./pad_attributes":310}],310:[function(e,t,r){"use strict";t.exports=function(e){var t=e.editType;return{t:{valType:"number",dflt:0,editType:t},r:{valType:"number",dflt:0,editType:t},b:{valType:"number",dflt:0,editType:t},l:{valType:"number",dflt:0,editType:t},editType:t}}},{}],311:[function(e,t,r){"use strict";var l=e("@plotly/d3");var a=e("d3-time-format").timeFormatLocale;var z=e("fast-isnumeric");var F=e("../registry");var y=e("../plot_api/plot_schema");var T=e("../plot_api/plot_template");var j=e("../lib");var x=e("../components/color");var b=e("../constants/numerical").BADNUM;var O=e("./cartesian/axis_ids");var H=e("./cartesian/handle_outline").clearSelect;var n=e("./animation_attributes");var i=e("./frame_attributes");var s=e("../plots/get_data").getModuleCalcData;var B=j.relinkPrivateKeys;var q=j._;var U=t.exports={};j.extendFlat(U,F);U.attributes=e("./attributes");U.attributes.type.values=U.allTypes;U.fontAttrs=e("./font_attributes");U.layoutAttributes=e("./layout_attributes");U.fontWeight="normal";var _=U.transformsRegistry;var o=e("./command");U.executeAPICommand=o.executeAPICommand;U.computeAPICommandBindings=o.computeAPICommandBindings;U.manageCommandObserver=o.manageCommandObserver;U.hasSimpleAPICommandBindings=o.hasSimpleAPICommandBindings;U.redrawText=function(t){t=j.getGraphDiv(t);return new Promise(function(e){setTimeout(function(){if(!t._fullLayout)return;F.getComponentMethod("annotations","draw")(t);F.getComponentMethod("legend","draw")(t);F.getComponentMethod("colorbar","draw")(t);e(U.previousPromises(t))},300)})};U.resize=function(r){r=j.getGraphDiv(r);var a;var e=new Promise(function(t,e){if(!r||j.isHidden(r)){e(new Error("Resize must be passed a displayed plot div element."))}if(r._redrawTimer)clearTimeout(r._redrawTimer);if(r._resolveResize)a=r._resolveResize;r._resolveResize=t;r._redrawTimer=setTimeout(function(){if(!r.layout||r.layout.width&&r.layout.height||j.isHidden(r)){t(r);return}delete r.layout.width;delete r.layout.height;var e=r.changed;r.autoplay=true;F.call("relayout",r,{autosize:true}).then(function(){r.changed=e;if(r._resolveResize===t){delete r._resolveResize;t(r)}})},100)});if(a)a(e);return e};U.previousPromises=function(e){if((e._promises||[]).length){return Promise.all(e._promises).then(function(){e._promises=[]})}};U.addLinks=function(e){if(!e._context.showLink&&!e._context.showSources)return;var t=e._fullLayout;var r=j.ensureSingle(t._paper,"text","js-plot-link-container",function(e){e.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:x.defaultLine,"pointer-events":"all"}).each(function(){var e=l.select(this);e.append("tspan").classed("js-link-to-tool",true);e.append("tspan").classed("js-link-spacer",true);e.append("tspan").classed("js-sourcelinks",true)})});var a=r.node();var n={y:t._paper.attr("height")-9};if(document.body.contains(a)&&a.getComputedTextLength()>=t.width-20){n["text-anchor"]="start";n.x=5}else{n["text-anchor"]="end";n.x=t._paper.attr("width")-7}r.attr(n);var i=r.select(".js-link-to-tool");var o=r.select(".js-link-spacer");var s=r.select(".js-sourcelinks");if(e._context.showSources)e._context.showSources(e);if(e._context.showLink)u(e,i);o.text(i.text()&&s.text()?" - ":"")};function u(e,t){t.text("");var r=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));if(e._context.sendData){r.on("click",function(){U.sendDataToCloud(e)})}else{var a=window.location.pathname.split("/");var n=window.location.search;r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+a[2].split(".")[0]+"/"+a[1]+n})}}U.sendDataToCloud=function(e){var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(!t)return;e.emit("plotly_beforeexport");var r=l.select(e).append("div").attr("id","hiddenform").style("display","none");var a=r.append("form").attr({action:t+"/external",method:"post",target:"_blank"});var n=a.append("input").attr({type:"text",name:"data"});n.node().value=U.graphJson(e,false,"keepdata");a.node().submit();r.remove();e.emit("plotly_afterexport");return false};var Y=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"];var V=["year","month","dayMonth","dayMonthYear"];U.supplyDefaults=function(e,t){var r=t&&t.skipUpdateCalc;var a=e._fullLayout||{};if(a._skipDefaults){delete a._skipDefaults;return}var n=e._fullLayout={};var i=e.layout||{};var o=e._fullData||[];var s=e._fullData=[];var l=e.data||[];var u=e.calcdata||[];var c=e._context||{};var f;if(!e._transitionData)U.createTransitionData(e);n._dfltTitle={plot:q(e,"Click to enter Plot title"),x:q(e,"Click to enter X axis title"),y:q(e,"Click to enter Y axis title"),colorbar:q(e,"Click to enter Colorscale title"),annotation:q(e,"new text")};n._traceWord=q(e,"trace");var d=$(e,Y);n._mapboxAccessToken=c.mapboxAccessToken;if(a._initialAutoSizeIsDone){var v=a.width;var p=a.height;U.supplyLayoutGlobalDefaults(i,n,d);if(!i.width)n.width=v;if(!i.height)n.height=p;U.sanitizeMargins(n)}else{U.supplyLayoutGlobalDefaults(i,n,d);var h=!i.width||!i.height;var m=n.autosize;var g=c.autosizable;var y=h&&(m||g);if(y)U.plotAutoSize(e,i,n);else if(h)U.sanitizeMargins(n);if(!m&&h){i.width=n.width;i.height=n.height}}n._d3locale=Z(d,n.separators);n._extraFormat=$(e,V);n._initialAutoSizeIsDone=true;n._dataLength=l.length;n._modules=[];n._visibleModules=[];n._basePlotModules=[];var x=n._subplots=W();var b=n._splomAxes={x:{},y:{}};var _=n._splomSubplots={};n._splomGridDflt={};n._scatterStackOpts={};n._firstScatter={};n._alignmentOpts={};n._colorAxes={};n._requestRangeslider={};n._traceUids=G(o,l);n._globalTransforms=(e._context||{}).globalTransforms;U.supplyDataDefaults(l,s,i,n);var w=Object.keys(b.x);var T=Object.keys(b.y);if(w.length>1&&T.length>1){F.getComponentMethod("grid","sizeDefaults")(i,n);for(f=0;f<w.length;f++){j.pushUnique(x.xaxis,w[f])}for(f=0;f<T.length;f++){j.pushUnique(x.yaxis,T[f])}for(var k in _){j.pushUnique(x.cartesian,k)}}n._has=U._hasPlotType.bind(n);if(o.length===s.length){for(f=0;f<s.length;f++){B(s[f],o[f])}}U.supplyLayoutModuleDefaults(i,n,s,e._transitionData);var M=n._visibleModules;var A=[];for(f=0;f<M.length;f++){var S=M[f].crossTraceDefaults;if(S)j.pushUnique(A,S)}for(f=0;f<A.length;f++){A[f](s,n)}n._hasOnlyLargeSploms=n._basePlotModules.length===1&&n._basePlotModules[0].name==="splom"&&w.length>15&&T.length>15&&n.shapes.length===0&&n.images.length===0;U.linkSubplots(s,n,o,a);U.cleanPlot(s,n,o,a);var E=!!(a._has&&a._has("gl2d"));var L=!!(n._has&&n._has("gl2d"));var C=!!(a._has&&a._has("cartesian"));var D=!!(n._has&&n._has("cartesian"));var O=C||E;var I=D||L;if(O&&!I){a._bgLayer.remove()}else if(I&&!O){n._shouldCreateBgLayer=true}if(a._zoomlayer&&!e._dragging){H({_fullLayout:a})}X(s,n);B(n,a);F.getComponentMethod("colorscale","crossTraceDefaults")(s,n);if(!n._preGUI)n._preGUI={};if(!n._tracePreGUI)n._tracePreGUI={};var P=n._tracePreGUI;var R={};var N;for(N in P)R[N]="old";for(f=0;f<s.length;f++){N=s[f]._fullInput.uid;if(!R[N])P[N]={};R[N]="new"}for(N in R){if(R[N]==="old")delete P[N]}J(n);F.getComponentMethod("rangeslider","makeData")(n);if(!r&&u.length===s.length){U.supplyDefaultsUpdateCalc(u,s)}};U.supplyDefaultsUpdateCalc=function(e,t){for(var r=0;r<t.length;r++){var a=t[r];var n=(e[r]||[])[0];if(n&&n.trace){var i=n.trace;if(i._hasCalcTransform){var o=i._arrayAttrs;var s,l,u;for(s=0;s<o.length;s++){l=o[s];u=j.nestedProperty(i,l).get().slice();j.nestedProperty(a,l).set(u)}}n.trace=a}}};function G(e,t){var r=t.length;var a=[];var n,i;for(n=0;n<e.length;n++){var o=e[n]._fullInput;if(o!==i)a.push(o);i=o}var s=a.length;var l=new Array(r);var u={};function c(e,t){l[t]=e;u[e]=1}function f(e,t){if(e&&typeof e==="string"&&!u[e]){c(e,t);return true}}for(n=0;n<r;n++){var d=t[n].uid;if(typeof d==="number")d=String(d);if(f(d,n))continue;if(n<s&&f(a[n].uid,n))continue;c(j.randstr(u),n)}return l}function W(){var e=F.collectableSubplotTypes;var t={};var r,a;if(!e){e=[];var n=F.subplotsRegistry;for(var i in n){var o=n[i];var s=o.attr;if(s){e.push(i);if(Array.isArray(s)){for(a=0;a<s.length;a++){j.pushUnique(e,s[a])}}}}}for(r=0;r<e.length;r++){t[e[r]]=[]}return t}function $(e,n){var t=e._context.locale;if(!t)t="en-US";var i=false;var o={};function r(e){var t=true;for(var r=0;r<n.length;r++){var a=n[r];if(!o[a]){if(e[a]){o[a]=e[a]}else t=false}}if(t)i=true}for(var a=0;a<2;a++){var s=e._context.locales;for(var l=0;l<2;l++){var u=(s[t]||{}).format;if(u){r(u);if(i)break}s=F.localeRegistry}var c=t.split("-")[0];if(i||c===t)break;t=c}if(!i)r(F.localeRegistry.en.format);return o}function Z(e,t){e.decimal=t.charAt(0);e.thousands=t.charAt(1);return{numberFormat:l.locale(e).numberFormat,timeFormat:a(e).utcFormat}}function X(e,t){var r;var a=[];if(t.meta){r=t._meta={meta:t.meta,layout:{meta:t.meta}}}for(var n=0;n<e.length;n++){var i=e[n];if(i.meta){a[i.index]=i._meta={meta:i.meta}}else if(t.meta){i._meta={meta:t.meta}}if(t.meta){i._meta.layout={meta:t.meta}}}if(a.length){if(!r){r=t._meta={}}r.data=a}}U.createTransitionData=function(e){if(!e._transitionData){e._transitionData={}}if(!e._transitionData._frames){e._transitionData._frames=[]}if(!e._transitionData._frameHash){e._transitionData._frameHash={}}if(!e._transitionData._counter){e._transitionData._counter=0}if(!e._transitionData._interruptCallbacks){e._transitionData._interruptCallbacks=[]}};U._hasPlotType=function(e){var t;var r=this._basePlotModules||[];for(t=0;t<r.length;t++){if(r[t].name===e)return true}var a=this._modules||[];for(t=0;t<a.length;t++){var n=a[t].name;if(n===e)return true;var i=F.modules[n];if(i&&i.categories[e])return true}return false};U.cleanPlot=function(e,t,r,a){var n,i;var o=a._basePlotModules||[];for(n=0;n<o.length;n++){var s=o[n];if(s.clean){s.clean(e,t,r,a)}}var l=a._has&&a._has("gl");var u=t._has&&t._has("gl");if(l&&!u){if(a._glcontainer!==undefined){a._glcontainer.selectAll(".gl-canvas").remove();a._glcontainer.selectAll(".no-webgl").remove();a._glcanvas=null}}var c=!!a._infolayer;e:for(n=0;n<r.length;n++){var f=r[n];var d=f.uid;for(i=0;i<e.length;i++){var v=e[i];if(d===v.uid)continue e}if(c){a._infolayer.select(".cb"+d).remove()}}};U.linkSubplots=function(e,t,r,a){var n,i;var o=a._plots||{};var s=t._plots={};var l=t._subplots;var u={_fullData:e,_fullLayout:t};var c=l.cartesian.concat(l.gl2d||[]);for(n=0;n<c.length;n++){var f=c[n];var d=o[f];var v=O.getFromId(u,f,"x");var p=O.getFromId(u,f,"y");var h;if(d){h=s[f]=d}else{h=s[f]={};h.id=f}v._counterAxes.push(p._id);p._counterAxes.push(v._id);v._subplotsWith.push(f);p._subplotsWith.push(f);h.xaxis=v;h.yaxis=p;h._hasClipOnAxisFalse=false;for(i=0;i<e.length;i++){var m=e[i];if(m.xaxis===h.xaxis._id&&m.yaxis===h.yaxis._id&&m.cliponaxis===false){h._hasClipOnAxisFalse=true;break}}}var g=O.list(u,null,true);var y;for(n=0;n<g.length;n++){y=g[n];var x=null;if(y.overlaying){x=O.getFromId(u,y.overlaying);if(x&&x.overlaying){y.overlaying=false;x=null}}y._mainAxis=x||y;if(x)y.domain=x.domain.slice();y._anchorAxis=y.anchor==="free"?null:O.getFromId(u,y.anchor)}for(n=0;n<g.length;n++){y=g[n];y._counterAxes.sort(O.idSort);y._subplotsWith.sort(j.subplotSort);y._mainSubplot=k(y,t);if(y._counterAxes.length&&(y.spikemode&&y.spikemode.indexOf("across")!==-1||y.automargin&&y.mirror&&y.anchor!=="free"||F.getComponentMethod("rangeslider","isVisible")(y))){var b=1;var _=0;for(i=0;i<y._counterAxes.length;i++){var w=O.getFromId(u,y._counterAxes[i]);b=Math.min(b,w.domain[0]);_=Math.max(_,w.domain[1])}if(b<_){y._counterDomainMin=b;y._counterDomainMax=_}}}};function k(e,t){var r={_fullLayout:t};var a=e._id.charAt(0)==="x";var n=e._mainAxis._anchorAxis;var i="";var o="";var s="";if(n){s=n._mainAxis._id;i=a?e._id+s:s+e._id}if(!i||!t._plots[i]){i="";var l=e._counterAxes;for(var u=0;u<l.length;u++){var c=l[u];var f=a?e._id+c:c+e._id;if(!o)o=f;var d=O.getFromId(r,c);if(s&&d.overlaying===s){i=f;break}}}return i||o}U.clearExpandedTraceDefaultColors=function(e){var n,i,t;function r(e,t,r,a){i[a]=t;i.length=a+1;if(e.valType==="color"&&e.dflt===undefined){n.push(i.join("."))}}i=[];n=e._module._colorAttrs;if(!n){e._module._colorAttrs=n=[];y.crawl(e._module.attributes,r)}for(t=0;t<n.length;t++){var a=j.nestedProperty(e,"_input."+n[t]);if(!a.get()){j.nestedProperty(e,n[t]).set(null)}}};U.supplyDataDefaults=function(e,r,t,a){var n=a._modules;var i=a._visibleModules;var o=a._basePlotModules;var s=0;var l=0;var u,c,f;a._transformModules=[];function d(e){r.push(e);var t=e._module;if(!t)return;j.pushUnique(n,t);if(e.visible===true)j.pushUnique(i,t);j.pushUnique(o,e._module.basePlotModule);s++;if(e._input.visible!==false)l++}var v={};var p=[];var h=(t.template||{}).data||{};var m=T.traceTemplater(h);for(u=0;u<e.length;u++){f=e[u];c=m.newTrace(f);c.uid=a._traceUids[u];U.supplyTraceDefaults(f,c,l,a,u);c.index=u;c._input=f;c._expandedIndex=s;if(c.transforms&&c.transforms.length){var g=f.visible!==false&&c.visible===false;var y=M(c,r,t,a);for(var x=0;x<y.length;x++){var b=y[x];var _={_template:c._template,type:c.type,uid:c.uid+x};if(g&&b.visible===false){delete b.visible}U.supplyTraceDefaults(b,_,s,a,u);B(_,b);_.index=u;_._input=f;_._fullInput=c;_._expandedIndex=s;_._expandedInput=b;d(_)}}else{c._fullInput=c;c._expandedInput=c;d(c)}if(F.traceIs(c,"carpetAxis")){v[c.carpet]=c}if(F.traceIs(c,"carpetDependent")){p.push(u)}}for(u=0;u<p.length;u++){c=r[p[u]];if(!c.visible)continue;var w=v[c.carpet];c._carpet=w;if(!w||!w.visible){c.visible=false;continue}c.xaxis=w.xaxis;c.yaxis=w.yaxis}};U.supplyAnimationDefaults=function(r){r=r||{};var e;var a={};function t(e,t){return j.coerce(r||{},a,n,e,t)}t("mode");t("direction");t("fromcurrent");if(Array.isArray(r.frame)){a.frame=[];for(e=0;e<r.frame.length;e++){a.frame[e]=U.supplyAnimationFrameDefaults(r.frame[e]||{})}}else{a.frame=U.supplyAnimationFrameDefaults(r.frame||{})}if(Array.isArray(r.transition)){a.transition=[];for(e=0;e<r.transition.length;e++){a.transition[e]=U.supplyAnimationTransitionDefaults(r.transition[e]||{})}}else{a.transition=U.supplyAnimationTransitionDefaults(r.transition||{})}return a};U.supplyAnimationFrameDefaults=function(r){var a={};function e(e,t){return j.coerce(r||{},a,n.frame,e,t)}e("duration");e("redraw");return a};U.supplyAnimationTransitionDefaults=function(r){var a={};function e(e,t){return j.coerce(r||{},a,n.transition,e,t)}e("duration");e("easing");return a};U.supplyFrameDefaults=function(r){var a={};function e(e,t){return j.coerce(r,a,i,e,t)}e("group");e("name");e("traces");e("baseframe");e("data");e("layout");return a};U.supplyTraceDefaults=function(r,a,e,t,n){var i=t.colorway||x.defaults;var o=i[e%i.length];var s;function l(e,t){return j.coerce(r,a,U.attributes,e,t)}var u=l("visible");l("type");l("name",t._traceWord+" "+n);l("uirevision",t.uirevision);var c=U.getModule(a);a._module=c;if(c){var f=c.basePlotModule;var d=f.attr;var v=f.attributes;if(d&&v){var p=t._subplots;var h="";if(u||f.name!=="gl2d"){if(Array.isArray(d)){for(s=0;s<d.length;s++){var m=d[s];var g=j.coerce(r,a,v,m);if(p[m])j.pushUnique(p[m],g);h+=g}}else{h=j.coerce(r,a,v,d)}if(p[f.name]){j.pushUnique(p[f.name],h)}}}}if(u){l("customdata");l("ids");l("meta");if(F.traceIs(a,"showLegend")){j.coerce(r,a,c.attributes.showlegend?c.attributes:U.attributes,"showlegend");l("legendgroup");var y=l("legendgrouptitle.text");if(y){j.coerceFont(l,"legendgrouptitle.font",j.extendFlat({},t.font,{size:Math.round(t.font.size*1.1)}))}l("legendrank");a._dfltShowLegend=true}else{a._dfltShowLegend=false}if(c){c.supplyDefaults(r,a,o,t)}if(!F.traceIs(a,"noOpacity")){l("opacity")}if(F.traceIs(a,"notLegendIsolatable")){a.visible=!!a.visible}if(!F.traceIs(a,"noHover")){if(!a.hovertemplate)j.coerceHoverinfo(r,a,t);if(a.type!=="parcats"){F.getComponentMethod("fx","supplyDefaults")(r,a,o,t)}}if(c&&c.selectPoints){l("selectedpoints")}U.supplyTransformDefaults(r,a,t)}return a};function h(e){var t=e.transforms;if(Array.isArray(t)&&t.length){for(var r=0;r<t.length;r++){var a=t[r];var n=a._module||_[a.type];if(n&&n.makesData)return true}}return false}U.hasMakesDataTransform=h;U.supplyTransformDefaults=function(e,t,r){if(!(t._length||h(e)))return;var a=r._globalTransforms||[];var n=r._transformModules||[];if(!Array.isArray(e.transforms)&&a.length===0)return;var i=e.transforms||[];var o=a.concat(i);var s=t.transforms=[];for(var l=0;l<o.length;l++){var u=o[l];var c=u.type;var f=_[c];var d;var v=!(u._module&&u._module===f);var p=f&&typeof f.transform==="function";if(!f)j.warn("Unrecognized transform type "+c+".");if(f&&f.supplyDefaults&&(v||p)){d=f.supplyDefaults(u,t,r,e);d.type=c;d._module=f;j.pushUnique(n,f)}else{d=j.extendFlat({},u)}s.push(d)}};function M(e,t,r,a){var n=e.transforms;var i=[e];for(var o=0;o<n.length;o++){var s=n[o];var l=_[s.type];if(l&&l.transform){i=l.transform(i,{transform:s,fullTrace:e,fullData:t,layout:r,fullLayout:a,transformIndex:o})}}return i}U.supplyLayoutGlobalDefaults=function(r,a,e){function t(e,t){return j.coerce(r,a,U.layoutAttributes,e,t)}var n=r.template;if(j.isPlainObject(n)){a.template=n;a._template=n.layout;a._dataTemplate=n.data}t("autotypenumbers");var i=j.coerceFont(t,"font");t("title.text",a._dfltTitle.plot);j.coerceFont(t,"title.font",{family:i.family,size:Math.round(i.size*1.4),color:i.color});t("title.xref");t("title.yref");t("title.x");t("title.y");t("title.xanchor");t("title.yanchor");t("title.pad.t");t("title.pad.r");t("title.pad.b");t("title.pad.l");var o=t("uniformtext.mode");if(o){t("uniformtext.minsize")}t("autosize",!(r.width&&r.height));t("width");t("height");t("margin.l");t("margin.r");t("margin.t");t("margin.b");t("margin.pad");t("margin.autoexpand");if(r.width&&r.height)U.sanitizeMargins(a);F.getComponentMethod("grid","sizeDefaults")(r,a);t("paper_bgcolor");t("separators",e.decimal+e.thousands);t("hidesources");t("colorway");t("datarevision");var s=t("uirevision");t("editrevision",s);t("selectionrevision",s);F.getComponentMethod("modebar","supplyLayoutDefaults")(r,a);F.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(r,a,t);t("meta");if(j.isPlainObject(r.transition)){t("transition.duration");t("transition.easing");t("transition.ordering")}F.getComponentMethod("calendars","handleDefaults")(r,a,"calendar");F.getComponentMethod("fx","supplyLayoutGlobalDefaults")(r,a,t)};function m(e){return typeof e==="string"&&e.substr(e.length-2)==="px"&&parseFloat(e)}U.plotAutoSize=function e(t,r,a){var n=t._context||{};var i=n.frameMargins;var o;var s;var l=j.isPlotDiv(t);if(l)t.emit("plotly_autosize");if(n.fillFrame){o=window.innerWidth;s=window.innerHeight;document.body.style.overflow="hidden"}else{var u=l?window.getComputedStyle(t):{};o=m(u.width)||m(u.maxWidth)||a.width;s=m(u.height)||m(u.maxHeight)||a.height;if(z(i)&&i>0){var c=1-2*i;o=Math.round(c*o);s=Math.round(c*s)}}var f=U.layoutAttributes.width.min;var d=U.layoutAttributes.height.min;if(o<f)o=f;if(s<d)s=d;var v=!r.width&&Math.abs(a.width-o)>1;var p=!r.height&&Math.abs(a.height-s)>1;if(p||v){if(v)a.width=o;if(p)a.height=s}if(!t._initialAutoSize){t._initialAutoSize={width:o,height:s}}U.sanitizeMargins(a)};U.supplyLayoutModuleDefaults=function(e,t,r,a){var n=F.componentsRegistry;var i=t._basePlotModules;var o,s,l;var u=F.subplotsRegistry.cartesian;for(o in n){l=n[o];if(l.includeBasePlot){l.includeBasePlot(e,t)}}if(!i.length){i.push(u)}if(t._has("cartesian")){F.getComponentMethod("grid","contentDefaults")(e,t);u.finalizeSubplots(e,t)}for(var c in t._subplots){t._subplots[c].sort(j.subplotSort)}for(s=0;s<i.length;s++){l=i[s];if(l.supplyLayoutDefaults){l.supplyLayoutDefaults(e,t,r)}}var f=t._modules;for(s=0;s<f.length;s++){l=f[s];if(l.supplyLayoutDefaults){l.supplyLayoutDefaults(e,t,r)}}var d=t._transformModules;for(s=0;s<d.length;s++){l=d[s];if(l.supplyLayoutDefaults){l.supplyLayoutDefaults(e,t,r,a)}}for(o in n){l=n[o];if(l.supplyLayoutDefaults){l.supplyLayoutDefaults(e,t,r)}}};U.purge=function(e){var t=e._fullLayout||{};if(t._glcontainer!==undefined){t._glcontainer.selectAll(".gl-canvas").remove();t._glcontainer.remove();t._glcanvas=null}if(t._modeBar)t._modeBar.destroy();if(e._transitionData){if(e._transitionData._interruptCallbacks){e._transitionData._interruptCallbacks.length=0}if(e._transitionData._animationRaf){window.cancelAnimationFrame(e._transitionData._animationRaf)}}j.clearThrottle();j.clearResponsive(e);delete e.data;delete e.layout;delete e._fullData;delete e._fullLayout;delete e.calcdata;delete e.empty;delete e.fid;delete e.undoqueue;delete e.undonum;delete e.autoplay;delete e.changed;delete e._promises;delete e._redrawTimer;delete e._hmlumcount;delete e._hmpixcount;delete e._transitionData;delete e._transitioning;delete e._initialAutoSize;delete e._transitioningWithDuration;delete e._dragging;delete e._dragged;delete e._dragdata;delete e._hoverdata;delete e._snapshotInProgress;delete e._editing;delete e._mouseDownTime;delete e._legendMouseDownTime;if(e.removeAllListeners)e.removeAllListeners()};U.style=function(e){var t=e._fullLayout._visibleModules;var r=[];var a;for(a=0;a<t.length;a++){var n=t[a];if(n.style){j.pushUnique(r,n.style)}}for(a=0;a<r.length;a++){r[a](e)}};U.sanitizeMargins=function(e){if(!e||!e.margin)return;var t=e.width;var r=e.height;var a=e.margin;var n=t-(a.l+a.r);var i=r-(a.t+a.b);var o;if(n<0){o=(t-1)/(a.l+a.r);a.l=Math.floor(o*a.l);a.r=Math.floor(o*a.r)}if(i<0){o=(r-1)/(a.t+a.b);a.t=Math.floor(o*a.t);a.b=Math.floor(o*a.b)}};U.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}};U.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};function J(e){var t=e.margin;if(!e._size){var r=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)};r.w=Math.round(e.width)-r.l-r.r;r.h=Math.round(e.height)-r.t-r.b}if(!e._pushmargin)e._pushmargin={};if(!e._pushmarginIds)e._pushmarginIds={}}var K=2;var Q=2;var ee=64;var te=64;U.autoMargin=function(e,t,r){var a=e._fullLayout;var n=a.width;var i=a.height;var o=a.margin;var s=j.constrain(n-o.l-o.r,K,ee);var l=j.constrain(i-o.t-o.b,Q,te);var u=Math.max(0,n-s);var c=Math.max(0,i-l);var f=a._pushmargin;var d=a._pushmarginIds;if(o.autoexpand!==false){if(!r){delete f[t];delete d[t]}else{var v=r.pad;if(v===undefined){v=Math.min(12,o.l,o.r,o.t,o.b)}if(u){var p=(r.l+r.r)/u;if(p>1){r.l/=p;r.r/=p}}if(c){var h=(r.t+r.b)/c;if(h>1){r.t/=h;r.b/=h}}var m=r.xl!==undefined?r.xl:r.x;var g=r.xr!==undefined?r.xr:r.x;var y=r.yt!==undefined?r.yt:r.y;var x=r.yb!==undefined?r.yb:r.y;f[t]={l:{val:m,size:r.l+v},r:{val:g,size:r.r+v},b:{val:x,size:r.b+v},t:{val:y,size:r.t+v}};d[t]=1}if(!a._replotting){return U.doAutoMargin(e)}}};U.doAutoMargin=function(e){var t=e._fullLayout;var r=t.width;var a=t.height;if(!t._size)t._size={};J(t);var n=t._size;var i=t.margin;var o=j.extendFlat({},n);var s=i.l;var l=i.r;var u=i.t;var c=i.b;var f=t._pushmargin;var d=t._pushmarginIds;if(t.margin.autoexpand!==false){for(var v in f){if(!d[v])delete f[v]}f.base={l:{val:0,size:s},r:{val:1,size:l},t:{val:1,size:u},b:{val:0,size:c}};for(var p in f){var h=f[p].l||{};var m=f[p].b||{};var g=h.val;var y=h.size;var x=m.val;var b=m.size;for(var _ in f){if(z(y)&&f[_].r){var w=f[_].r.val;var T=f[_].r.size;if(w>g){var k=(y*w+(T-r)*g)/(w-g);var M=(T*(1-g)+(y-r)*(1-w))/(w-g);if(k+M>s+l){s=k;l=M}}}if(z(b)&&f[_].t){var A=f[_].t.val;var S=f[_].t.size;if(A>x){var E=(b*A+(S-a)*x)/(A-x);var L=(S*(1-x)+(b-a)*(1-A))/(A-x);if(E+L>c+u){c=E;u=L}}}}}}var C=j.constrain(r-i.l-i.r,K,ee);var D=j.constrain(a-i.t-i.b,Q,te);var O=Math.max(0,r-C);var I=Math.max(0,a-D);if(O){var P=(s+l)/O;if(P>1){s/=P;l/=P}}if(I){var R=(c+u)/I;if(R>1){c/=R;u/=R}}n.l=Math.round(s);n.r=Math.round(l);n.t=Math.round(u);n.b=Math.round(c);n.p=Math.round(i.pad);n.w=Math.round(r)-n.l-n.r;n.h=Math.round(a)-n.t-n.b;if(!t._replotting&&U.didMarginChange(o,n)){if("_redrawFromAutoMarginCount"in t){t._redrawFromAutoMarginCount++}else{t._redrawFromAutoMarginCount=1}var N=3*(1+Object.keys(d).length);if(t._redrawFromAutoMarginCount<N){return F.call("_doPlot",e)}else{t._size=o;j.warn("Too many auto-margin redraws.")}}re(e)};function re(e){var a=O.list(e,"",true);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(e){for(var t=0;t<a.length;t++){var r=a[t][e];if(r)r()}})}var c=["l","r","t","b","p","w","h"];U.didMarginChange=function(e,t){for(var r=0;r<c.length;r++){var a=c[r];var n=e[a];var i=t[a];if(!z(n)||Math.abs(i-n)>1){return true}}return false};U.graphJson=function(e,r,i,t,a,n){if(a&&r&&!e._fullData||a&&!r&&!e._fullLayout){U.supplyDefaults(e)}var o=a?e._fullData:e.data;var s=a?e._fullLayout:e.layout;var l=(e._transitionData||{})._frames;function u(t,r){if(typeof t==="function"){return r?"_function_":null}if(j.isPlainObject(t)){var a={};var n;Object.keys(t).sort().forEach(function(e){if(["_","["].indexOf(e.charAt(0))!==-1)return;if(typeof t[e]==="function"){if(r)a[e]="_function";return}if(i==="keepdata"){if(e.substr(e.length-3)==="src"){return}}else if(i==="keepstream"){n=t[e+"src"];if(typeof n==="string"&&n.indexOf(":")>0){if(!j.isPlainObject(t.stream)){return}}}else if(i!=="keepall"){n=t[e+"src"];if(typeof n==="string"&&n.indexOf(":")>0){return}}a[e]=u(t[e],r)});return a}if(Array.isArray(t)){return t.map(function(e){return u(e,r)})}if(j.isTypedArray(t)){return j.simpleMap(t,j.identity)}if(j.isJSDate(t))return j.ms2DateTimeLocal(+t);return t}var c={data:(o||[]).map(function(e){var t=u(e);if(r){delete t.fit}return t})};if(!r){c.layout=u(s);if(a){var f=s._size;c.layout.computed={margin:{b:f.b,l:f.l,r:f.r,t:f.t}}}}if(l)c.frames=u(l);if(n)c.config=u(e._context,true);return t==="object"?c:JSON.stringify(c)};U.modifyFrames=function(e,t){var r,a,n;var i=e._transitionData._frames;var o=e._transitionData._frameHash;for(r=0;r<t.length;r++){a=t[r];switch(a.type){case"replace":n=a.value;var s=(i[a.index]||{}).name;var l=n.name;i[a.index]=o[l]=n;if(l!==s){delete o[s];o[l]=n}break;case"insert":n=a.value;o[n.name]=n;i.splice(a.index,0,n);break;case"delete":n=i[a.index];delete o[n.name];i.splice(a.index,1);break}}return Promise.resolve()};U.computeFrame=function(e,t){var r=e._transitionData._frameHash;var a,n,i,o;if(!t){throw new Error("computeFrame must be given a string frame name")}var s=r[t.toString()];if(!s){return false}var l=[s];var u=[s.name];while(s.baseframe&&(s=r[s.baseframe.toString()])){if(u.indexOf(s.name)!==-1)break;l.push(s);u.push(s.name)}var c={};while(s=l.pop()){if(s.layout){c.layout=U.extendLayout(c.layout,s.layout)}if(s.data){if(!c.data){c.data=[]}n=s.traces;if(!n){n=[];for(a=0;a<s.data.length;a++){n[a]=a}}if(!c.traces){c.traces=[]}for(a=0;a<s.data.length;a++){i=n[a];if(i===undefined||i===null){continue}o=c.traces.indexOf(i);if(o===-1){o=c.data.length;c.traces[o]=i}c.data[o]=U.extendTrace(c.data[o],s.data[a])}}}return c};U.recomputeFrameHash=function(e){var t=e._transitionData._frameHash={};var r=e._transitionData._frames;for(var a=0;a<r.length;a++){var n=r[a];if(n&&n.name){t[n.name]=n}}};U.extendObjectWithContainers=function(e,t,r){var a,n,i,o,s,l,u,c;var f=j.extendDeepNoArrays({},t||{});var d=j.expandObjectPaths(f);var v={};if(r&&r.length){for(i=0;i<r.length;i++){a=j.nestedProperty(d,r[i]);n=a.get();if(n===undefined){j.nestedProperty(v,r[i]).set(null)}else{a.set(null);j.nestedProperty(v,r[i]).set(n)}}}e=j.extendDeepNoArrays(e||{},d);if(r&&r.length){for(i=0;i<r.length;i++){s=j.nestedProperty(v,r[i]);u=s.get();if(!u)continue;l=j.nestedProperty(e,r[i]);c=l.get();if(!Array.isArray(c)){c=[];l.set(c)}for(o=0;o<u.length;o++){var p=u[o];if(p===null)c[o]=null;else{c[o]=U.extendObjectWithContainers(c[o],p)}}l.set(c)}}return e};U.dataArrayContainers=["transforms","dimensions"];U.layoutArrayContainers=F.layoutArrayContainers;U.extendTrace=function(e,t){return U.extendObjectWithContainers(e,t,U.dataArrayContainers)};U.extendLayout=function(e,t){return U.extendObjectWithContainers(e,t,U.layoutArrayContainers)};U.transition=function(w,T,k,M,e,l){var t={redraw:e.redraw};var A={};var S=[];t.prepareFn=function(){var e=Array.isArray(T)?T.length:0;var t=M.slice(0,e);for(var r=0;r<t.length;r++){var a=t[r];var n=w._fullData[a];var i=n._module;if(!i)continue;if(i.animatable){var o=i.basePlotModule.name;if(!A[o])A[o]=[];A[o].push(a)}w.data[t[r]]=U.extendTrace(w.data[t[r]],T[r])}var s=j.expandObjectPaths(j.extendDeepNoArrays({},k));var l=/^[xy]axis[0-9]*$/;for(var u in s){if(!l.test(u))continue;delete s[u].range}U.extendLayout(w.layout,s);delete w.calcdata;U.supplyDefaults(w);U.doCalcdata(w);var c=j.expandObjectPaths(k);if(c){var f=w._fullLayout._plots;for(var d in f){var v=f[d];var p=v.xaxis;var h=v.yaxis;var m=p.range.slice();var g=h.range.slice();var y=null;var x=null;var b=null;var _=null;if(Array.isArray(c[p._name+".range"])){y=c[p._name+".range"].slice()}else if(Array.isArray((c[p._name]||{}).range)){y=c[p._name].range.slice()}if(Array.isArray(c[h._name+".range"])){x=c[h._name+".range"].slice()}else if(Array.isArray((c[h._name]||{}).range)){x=c[h._name].range.slice()}if(m&&y&&(p.r2l(m[0])!==p.r2l(y[0])||p.r2l(m[1])!==p.r2l(y[1]))){b={xr0:m,xr1:y}}if(g&&x&&(h.r2l(g[0])!==h.r2l(x[0])||h.r2l(g[1])!==h.r2l(x[1]))){_={yr0:g,yr1:x}}if(b||_){S.push(j.extendFlat({plotinfo:v},b,_))}}}return Promise.resolve()};t.runFn=function(e){var t;var r=w._fullLayout._basePlotModules;var a=S.length;var n;if(k){for(n=0;n<r.length;n++){if(r[n].transitionAxes){r[n].transitionAxes(w,S,l,e)}}}if(a){t=j.extendFlat({},l);t.duration=0;delete A.cartesian}else{t=l}for(var i in A){var o=A[i];var s=w._fullData[o[0]]._module;s.basePlotModule.plot(w,o,t,e)}};return E(w,l,t)};U.transitionFromReact=function(f,d,v,p){var h=f._fullLayout;var m=h.transition;var g={};var y=[];g.prepareFn=function(){var e=h._plots;g.redraw=false;if(d.anim==="some")g.redraw=true;if(v.anim==="some")g.redraw=true;for(var t in e){var r=e[t];var a=r.xaxis;var n=r.yaxis;var i=p[a._name].range.slice();var o=p[n._name].range.slice();var s=a.range.slice();var l=n.range.slice();a.setScale();n.setScale();var u=null;var c=null;if(a.r2l(i[0])!==a.r2l(s[0])||a.r2l(i[1])!==a.r2l(s[1])){u={xr0:i,xr1:s}}if(n.r2l(o[0])!==n.r2l(l[0])||n.r2l(o[1])!==n.r2l(l[1])){c={yr0:o,yr1:l}}if(u||c){y.push(j.extendFlat({plotinfo:r},u,c))}}return Promise.resolve()};g.runFn=function(t){var e=f._fullData;var r=f._fullLayout;var a=r._basePlotModules;var n;var i;var o;var s=[];for(var l=0;l<e.length;l++){s.push(l)}function u(){if(!f._fullLayout)return;for(var e=0;e<a.length;e++){if(a[e].transitionAxes){a[e].transitionAxes(f,y,n,t)}}}function c(){if(!f._fullLayout)return;for(var e=0;e<a.length;e++){a[e].plot(f,o,i,t)}}if(y.length&&d.anim){if(m.ordering==="traces first"){n=j.extendFlat({},m,{duration:0});o=s;i=m;setTimeout(u,m.duration);c()}else{n=m;o=null;i=j.extendFlat({},m,{duration:0});setTimeout(c,n.duration);u()}}else if(y.length){n=m;u()}else if(d.anim){o=s;i=m;c()}};return E(f,m,g)};function E(n,i,o){var s=false;function e(e){var t=Promise.resolve();if(!e)return t;while(e.length){t=t.then(e.shift())}return t}function t(e){if(!e)return;while(e.length){e.shift()}}function r(){n.emit("plotly_transitioning",[]);return new Promise(function(e){n._transitioning=true;if(i.duration>0){n._transitioningWithDuration=true}n._transitionData._interruptCallbacks.push(function(){s=true});if(o.redraw){n._transitionData._interruptCallbacks.push(function(){return F.call("redraw",n)})}n._transitionData._interruptCallbacks.push(function(){n.emit("plotly_transitioninterrupted",[])});var t=0;var r=0;function a(){t++;return function(){r++;if(!s&&r===t){l(e)}}}o.runFn(a);setTimeout(a())})}function l(e){if(!n._transitionData)return;t(n._transitionData._interruptCallbacks);return Promise.resolve().then(function(){if(o.redraw){return F.call("redraw",n)}}).then(function(){n._transitioning=false;n._transitioningWithDuration=false;n.emit("plotly_transitioned",[])}).then(e)}function a(){if(!n._transitionData)return;n._transitioning=false;return e(n._transitionData._interruptCallbacks)}var u=[U.previousPromises,a,o.prepareFn,U.rehover,r];var c=j.syncOrAsync(u,n);if(!c||!c.then){c=Promise.resolve()}return c.then(function(){return n})}U.doCalcdata=function(n,e){var t=O.list(n);var i=n._fullData;var r=n._fullLayout;var o,s,a,l;var u=new Array(i.length);var c=(n.calcdata||[]).slice();n.calcdata=u;r._numBoxes=0;r._numViolins=0;r._violinScaleGroupStats={};n._hmpixcount=0;n._hmlumcount=0;r._piecolormap={};r._sunburstcolormap={};r._treemapcolormap={};r._iciclecolormap={};r._funnelareacolormap={};for(a=0;a<i.length;a++){if(Array.isArray(e)&&e.indexOf(a)===-1){u[a]=c[a];continue}}for(a=0;a<i.length;a++){o=i[a];o._arrayAttrs=y.findArrayAttributes(o);o._extremes={}}var f=r._subplots.polar||[];for(a=0;a<f.length;a++){t.push(r[f[a]].radialaxis,r[f[a]].angularaxis)}for(var d in r._colorAxes){var v=r[d];if(v.cauto!==false){delete v.cmin;delete v.cmax}}var p=false;function h(e){o=i[e];s=o._module;if(o.visible===true&&o.transforms){if(s&&s.calc){var t=s.calc(n,o);if(t[0]&&t[0].t&&t[0].t._scene){delete t[0].t._scene.dirty}}for(l=0;l<o.transforms.length;l++){var r=o.transforms[l];s=_[r.type];if(s&&s.calcTransform){o._hasCalcTransform=true;p=true;s.calcTransform(n,o,r)}}}}function m(e,t){o=i[e];s=o._module;if(!!s.isContainer!==t)return;var r=[];if(o.visible===true&&o._length!==0){delete o._indexToPoints;var a=o.transforms||[];for(l=a.length-1;l>=0;l--){if(a[l].enabled){o._indexToPoints=a[l]._indexToPoints;break}}if(s&&s.calc){r=s.calc(n,o)}}if(!Array.isArray(r)||!r[0]){r=[{x:b,y:b}]}if(!r[0].t)r[0].t={};r[0].trace=o;u[e]=r}A(t,i,r);for(a=0;a<i.length;a++)m(a,true);for(a=0;a<i.length;a++)h(a);if(p)A(t,i,r);for(a=0;a<i.length;a++)m(a,true);for(a=0;a<i.length;a++)m(a,false);S(n);var g=w(t,n);if(g.length){r._numBoxes=0;r._numViolins=0;for(a=0;a<g.length;a++)m(g[a],true);for(a=0;a<g.length;a++)m(g[a],false);S(n)}F.getComponentMethod("fx","calc")(n);F.getComponentMethod("errorbars","calc")(n)};var I=/(total|sum|min|max|mean|median) (ascending|descending)/;function w(e,l){var t=[];var r,a,n,i,o;function s(e,t,r){var a=t._id.charAt(0);if(e==="histogram2dcontour"){var n=t._counterAxes[0];var i=O.getFromId(l,n);var o=a==="x"||n==="x"&&i.type==="category";var s=a==="y"||n==="y"&&i.type==="category";return function(e,t){if(e===0||t===0)return-1;if(o&&e===r[t].length-1)return-1;if(s&&t===r.length-1)return-1;return(a==="y"?t:e)-1}}else{return function(e,t){return a==="y"?t:e}}}var u={min:function(e){return j.aggNums(Math.min,null,e)},max:function(e){return j.aggNums(Math.max,null,e)},sum:function(e){return j.aggNums(function(e,t){return e+t},null,e)},total:function(e){return j.aggNums(function(e,t){return e+t},null,e)},mean:function(e){return j.mean(e)},median:function(e){return j.median(e)}};for(r=0;r<e.length;r++){var c=e[r];if(c.type!=="category")continue;var f=c.categoryorder.match(I);if(f){var d=f[1];var v=f[2];var p=c._id.charAt(0);var h=p==="x";var m=[];for(a=0;a<c._categories.length;a++){m.push([c._categories[a],[]])}for(a=0;a<c._traceIndices.length;a++){var g=c._traceIndices[a];var y=l._fullData[g];if(y.visible!==true)continue;var x=y.type;if(F.traceIs(y,"histogram")){delete y._xautoBinFinished;delete y._yautoBinFinished}var b=x==="splom";var _=x==="scattergl";var w=l.calcdata[g];for(n=0;n<w.length;n++){var T=w[n];var k,M;if(b){var A=y._axesDim[c._id];if(!h){var S=y._diag[A][0];if(S)c=l._fullLayout[O.id2name(S)]}var E=T.trace.dimensions[A].values;for(i=0;i<E.length;i++){k=c._categoriesMap[E[i]];for(o=0;o<T.trace.dimensions.length;o++){if(o===A)continue;var L=T.trace.dimensions[o];m[k][1].push(L.values[i])}}}else if(_){for(i=0;i<T.t.x.length;i++){if(h){k=T.t.x[i];M=T.t.y[i]}else{k=T.t.y[i];M=T.t.x[i]}m[k][1].push(M)}if(T.t&&T.t._scene){delete T.t._scene.dirty}}else if(T.hasOwnProperty("z")){M=T.z;var C=s(y.type,c,M);for(i=0;i<M.length;i++){for(o=0;o<M[i].length;o++){k=C(o,i);if(k+1)m[k][1].push(M[i][o])}}}else{k=T.p;if(k===undefined)k=T[p];M=T.s;if(M===undefined)M=T.v;if(M===undefined)M=h?T.y:T.x;if(!Array.isArray(M)){if(M===undefined)M=[];else M=[M]}for(i=0;i<M.length;i++){m[k][1].push(M[i])}}}}c._categoriesValue=m;var D=[];for(a=0;a<m.length;a++){D.push([m[a][0],u[d](m[a][1])])}D.sort(function(e,t){return e[1]-t[1]});c._categoriesAggregatedValue=D;c._initialCategories=D.map(function(e){return e[0]});if(v==="descending"){c._initialCategories.reverse()}t=t.concat(c.sortByInitialCategories())}}return t}function A(e,t,r){var a={};function n(e){e.clearCalc();if(e.type==="multicategory"){e.setupMultiCategory(t)}a[e._id]=1}j.simpleMap(e,n);var i=r._axisMatchGroups||[];for(var o=0;o<i.length;o++){for(var s in i[o]){if(!a[s]){n(r[O.id2name(s)])}}}}function S(e){var t=e._fullLayout;var r=t._visibleModules;var a={};var n,i,o;for(i=0;i<r.length;i++){var s=r[i];var l=s.crossTraceCalc;if(l){var u=s.basePlotModule.name;if(a[u]){j.pushUnique(a[u],l)}else{a[u]=[l]}}}for(o in a){var c=a[o];var f=t._subplots[o];if(Array.isArray(f)){for(n=0;n<f.length;n++){var d=f[n];var v=o==="cartesian"?t._plots[d]:t[d];for(i=0;i<c.length;i++){c[i](e,v,d)}}}else{for(i=0;i<c.length;i++){c[i](e)}}}}U.rehover=function(e){if(e._fullLayout._rehover){e._fullLayout._rehover()}};U.redrag=function(e){if(e._fullLayout._redrag){e._fullLayout._redrag()}};U.generalUpdatePerTraceModule=function(e,t,r,a){var n=t.traceHash;var i={};var o;for(o=0;o<r.length;o++){var s=r[o];var l=s[0].trace;if(l.visible){i[l.type]=i[l.type]||[];i[l.type].push(s)}}for(var u in n){if(!i[u]){var c=n[u][0];var f=c[0].trace;f.visible=false;i[u]=[c]}}for(var d in i){var v=i[d];var p=v[0][0].trace._module;p.plot(e,t,j.filterVisible(v),a)}t.traceHash=i};U.plotBasePlot=function(e,t,r,a,n){var i=F.getModule(e);var o=s(t.calcdata,i)[0];i.plot(t,o,a,n)};U.cleanBasePlot=function(e,t,r,a,n){var i=n._has&&n._has(e);var o=r._has&&r._has(e);if(i&&!o){n["_"+e+"layer"].selectAll("g.trace").remove()}}},{"../components/color":100,"../constants/numerical":210,"../lib":230,"../plot_api/plot_schema":264,"../plot_api/plot_template":265,"../plots/get_data":307,"../registry":313,"./animation_attributes":270,"./attributes":272,"./cartesian/axis_ids":280,"./cartesian/handle_outline":287,"./command":303,"./font_attributes":305,"./frame_attributes":306,"./layout_attributes":309,"@plotly/d3":11,"d3-time-format":13,"fast-isnumeric":15}],312:[function(e,t,r){"use strict";var a=e("../constants/docs");var n=a.FORMAT_LINK;var i=a.DATE_FORMAT_LINK;function o(e){var t=e&&e.supportOther;return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(t?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),'Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',n,"for details on the formatting syntax.",'Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',i,"for details on the date formatting syntax."].join(" ")}function s(e){var t=e.description?" "+e.description:"";var r=e.keys||[];if(r.length>0){var a=[];for(var n=0;n<r.length;n++){a[n]="`"+r[n]+"`"}t=t+"Finally, the template string has access to ";if(r.length===1){t="variable "+a[0]}else{t="variables "+a.slice(0,-1).join(", ")+" and "+a.slice(-1)+"."}}return t}r.hovertemplateAttrs=function(e,t){e=e||{};t=t||{};var r=s(t);var a={valType:"string",dflt:"",editType:e.editType||"none"};if(e.arrayOk!==false){a.arrayOk=true}return a};r.texttemplateAttrs=function(e,t){e=e||{};t=t||{};var r=s(t);var a={valType:"string",dflt:"",editType:e.editType||"calc"};if(e.arrayOk!==false){a.arrayOk=true}return a}},{"../constants/docs":207}],313:[function(e,t,f){"use strict";var d=e("./lib/loggers");var a=e("./lib/noop");var i=e("./lib/push_unique");var o=e("./lib/is_plain_object");var v=e("./lib/dom").addStyleRule;var r=e("./lib/extend");var n=e("./plots/attributes");var s=e("./plots/layout_attributes");var p=r.extendFlat;var l=r.extendDeepAll;f.modules={};f.allCategories={};f.allTypes=[];f.subplotsRegistry={};f.transformsRegistry={};f.componentsRegistry={};f.layoutArrayContainers=[];f.layoutArrayRegexes=[];f.traceLayoutAttributes={};f.localeRegistry={};f.apiMethodRegistry={};f.collectableSubplotTypes=null;f.register=function e(t){f.collectableSubplotTypes=null;if(!t){throw new Error("No argument passed to Plotly.register.")}else if(t&&!Array.isArray(t)){t=[t]}for(var r=0;r<t.length;r++){var a=t[r];if(!a){throw new Error("Invalid module was attempted to be registered!")}switch(a.moduleType){case"trace":u(a);break;case"transform":m(a);break;case"component":c(a);break;case"locale":g(a);break;case"apiMethod":var n=a.name;f.apiMethodRegistry[n]=a.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}};f.getModule=function(e){var t=f.modules[w(e)];if(!t)return false;return t._module};f.traceIs=function(e,t){e=w(e);if(e==="various")return false;var r=f.modules[e];if(!r){if(e){d.log("Unrecognized trace type "+e+".")}r=f.modules[n.type.dflt]}return!!r.categories[t]};f.getTransformIndices=function(e,t){var r=[];var a=e.transforms||[];for(var n=0;n<a.length;n++){if(a[n].type===t){r.push(n)}}return r};f.hasTransform=function(e,t){var r=e.transforms||[];for(var a=0;a<r.length;a++){if(r[a].type===t){return true}}return false};f.getComponentMethod=function(e,t){var r=f.componentsRegistry[e];if(!r)return a;return r[t]||a};f.call=function(){var e=arguments[0];var t=[].slice.call(arguments,1);return f.apiMethodRegistry[e].apply(null,t)};function u(e){var t=e.name;var r=e.categories;var a=e.meta;if(f.modules[t]){d.log("Type "+t+" already registered");return}if(!f.subplotsRegistry[e.basePlotModule.name]){h(e.basePlotModule)}var n={};for(var i=0;i<r.length;i++){n[r[i]]=true;f.allCategories[r[i]]=true}f.modules[t]={_module:e,categories:n};if(a&&Object.keys(a).length){f.modules[t].meta=a}f.allTypes.push(t);for(var o in f.componentsRegistry){x(o,t)}if(e.layoutAttributes){p(f.traceLayoutAttributes,e.layoutAttributes)}var s=e.basePlotModule;var l=s.name;if(l==="mapbox"){var u=s.constants.styleRules;for(var c in u){v(".js-plotly-plot .plotly .mapboxgl-"+c,u[c])}}if((l==="geo"||l==="mapbox")&&(typeof window!==undefined&&window.PlotlyGeoAssets===undefined)){window.PlotlyGeoAssets={topojson:{}}}}function h(e){var t=e.name;if(f.subplotsRegistry[t]){d.log("Plot type "+t+" already registered.");return}y(e);f.subplotsRegistry[t]=e;for(var r in f.componentsRegistry){_(r,e.name)}}function c(e){if(typeof e.name!=="string"){throw new Error("Component module *name* must be a string.")}var t=e.name;f.componentsRegistry[t]=e;if(e.layoutAttributes){if(e.layoutAttributes._isLinkedToArray){i(f.layoutArrayContainers,t)}y(e)}for(var r in f.modules){x(t,r)}for(var a in f.subplotsRegistry){_(t,a)}for(var n in f.transformsRegistry){b(t,n)}if(e.schema&&e.schema.layout){l(s,e.schema.layout)}}function m(e){if(typeof e.name!=="string"){throw new Error("Transform module *name* must be a string.")}var t="Transform module "+e.name;var r=typeof e.transform==="function";var a=typeof e.calcTransform==="function";if(!r&&!a){throw new Error(t+" is missing a *transform* or *calcTransform* method.")}if(r&&a){d.log([t+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" "))}if(!o(e.attributes)){d.log(t+" registered without an *attributes* object.")}if(typeof e.supplyDefaults!=="function"){d.log(t+" registered without a *supplyDefaults* method.")}f.transformsRegistry[e.name]=e;for(var n in f.componentsRegistry){b(n,e.name)}}function g(e){var t=e.name;var r=t.split("-")[0];var a=e.dictionary;var n=e.format;var i=a&&Object.keys(a).length;var o=n&&Object.keys(n).length;var s=f.localeRegistry;var l=s[t];if(!l)s[t]=l={};if(r!==t){var u=s[r];if(!u)s[r]=u={};if(i&&u.dictionary===l.dictionary){u.dictionary=a}if(o&&u.format===l.format){u.format=n}}if(i)l.dictionary=a;if(o)l.format=n}function y(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t){for(var r=0;r<t.length;r++){i(f.layoutArrayRegexes,t[r])}}}}function x(e,t){var r=f.componentsRegistry[e].schema;if(!r||!r.traces)return;var a=r.traces[t];if(a){l(f.modules[t]._module.attributes,a)}}function b(e,t){var r=f.componentsRegistry[e].schema;if(!r||!r.transforms)return;var a=r.transforms[t];if(a){l(f.transformsRegistry[t].attributes,a)}}function _(e,t){var r=f.componentsRegistry[e].schema;if(!r||!r.subplots)return;var a=f.subplotsRegistry[t];var n=a.layoutAttributes;var i=a.attr==="subplot"?a.name:a.attr;if(Array.isArray(i))i=i[0];var o=r.subplots[i];if(n&&o){l(n,o)}}function w(e){if(typeof e==="object")e=e.type;return e}},{"./lib/dom":222,"./lib/extend":224,"./lib/is_plain_object":231,"./lib/loggers":234,"./lib/noop":239,"./lib/push_unique":244,"./plots/attributes":272,"./plots/layout_attributes":309}],314:[function(e,t,r){"use strict";var m=e("../registry");var a=e("../lib");var g=a.extendFlat;var y=a.extendDeep;function x(e){var t;switch(e){case"themes__thumb":t={autosize:true,width:150,height:150,title:{text:""},showlegend:false,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:true,showlegend:false,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function b(e){var t=["xaxis","yaxis","zaxis"];return t.indexOf(e.slice(0,5))>-1}t.exports=function e(t,r){var a;var n=t.data;var i=t.layout;var o=y([],n);var s=y({},i,x(r.tileClass));var l=t._context||{};if(r.width)s.width=r.width;if(r.height)s.height=r.height;if(r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){s.annotations=[];var u=Object.keys(s);for(a=0;a<u.length;a++){if(b(u[a])){s[u[a]].title={text:""}}}for(a=0;a<o.length;a++){var c=o[a];c.showscale=false;if(c.marker)c.marker.showscale=false;if(m.traceIs(c,"pie-like"))c.textposition="none"}}if(Array.isArray(r.annotations)){for(a=0;a<r.annotations.length;a++){s.annotations.push(r.annotations[a])}}var f=Object.keys(s).filter(function(e){return e.match(/^scene\d*$/)});if(f.length){var d={};if(r.tileClass==="thumbnail"){d={title:{text:""},showaxeslabels:false,showticklabels:false,linetickenable:false}}for(a=0;a<f.length;a++){var v=s[f[a]];if(!v.xaxis){v.xaxis={}}if(!v.yaxis){v.yaxis={}}if(!v.zaxis){v.zaxis={}}g(v.xaxis,d);g(v.yaxis,d);g(v.zaxis,d);v._scene=null}}var p=document.createElement("div");if(r.tileClass)p.className=r.tileClass;var h={gd:p,td:p,layout:s,data:o,config:{staticPlot:r.staticPlot===undefined?true:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===undefined?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||false,showLink:r.showLink||false,showTips:r.showTips||false,mapboxAccessToken:l.mapboxAccessToken}};if(r.setBackground!=="transparent"){h.config.setBackground=r.setBackground||"opaque"}h.gd.defaultLayout=x(r.tileClass);return h}},{"../lib":230,"../registry":313}],315:[function(e,t,r){"use strict";var s=e("../lib");var l=e("../plot_api/to_image");var u=e("./filesaver");var c=e("./helpers");function a(n,i){var o;if(!s.isPlainObject(n))o=s.getGraphDiv(n);i=i||{};i.format=i.format||"png";i.width=i.width||null;i.height=i.height||null;i.imageDataOnly=true;return new Promise(function(t,r){if(o&&o._snapshotInProgress){r(new Error("Snapshotting already in progress."))}if(s.isIE()&&i.format!=="svg"){r(new Error(c.MSG_IE_BAD_FORMAT))}if(o)o._snapshotInProgress=true;var e=l(n,i);var a=i.filename||n.fn||"newplot";a+="."+i.format.replace("-",".");e.then(function(e){if(o)o._snapshotInProgress=false;return u(e,a,i.format)}).then(function(e){t(e)}).catch(function(e){if(o)o._snapshotInProgress=false;r(e)})})}t.exports=a},{"../lib":230,"../plot_api/to_image":268,"./filesaver":316,"./helpers":317}],316:[function(e,t,r){"use strict";var c=e("../lib");var f=e("./helpers");function a(i,o,s){var l=document.createElement("a");var u="download"in l;var e=new Promise(function(e,t){var r;var a;if(c.isSafari()){var n=s==="svg"?",":";base64,";f.octetStream(n+encodeURIComponent(i));return e(o)}if(c.isIE()){r=f.createBlob(i,"svg");window.navigator.msSaveBlob(r,o);r=null;return e(o)}if(u){r=f.createBlob(i,s);a=f.createObjectURL(r);l.href=a;l.download=o;document.body.appendChild(l);l.click();document.body.removeChild(l);f.revokeObjectURL(a);r=null;return e(o)}t(new Error("download error"))});return e}t.exports=a},{"../lib":230,"./helpers":317}],317:[function(e,t,r){"use strict";var a=e("../registry");r.getDelay=function(e){if(!e._has)return 0;return e._has("gl3d")||e._has("gl2d")||e._has("mapbox")?500:0};r.getRedrawFunc=function(e){return function(){a.getComponentMethod("colorbar","draw")(e)}};r.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)};r.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var n=window.URL||window.webkitURL;r.createObjectURL=function(e){return n.createObjectURL(e)};r.revokeObjectURL=function(e){return n.revokeObjectURL(e)};r.createBlob=function(e,t){if(t==="svg"){return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"})}else if(t==="full-json"){return new window.Blob([e],{type:"application/json;charset=utf-8"})}else{var r=i(window.atob(e));return new window.Blob([r],{type:"image/"+t})}};r.octetStream=function(e){document.location.href="data:application/octet-stream"+e};function i(e){var t=e.length;var r=new ArrayBuffer(t);var a=new Uint8Array(r);for(var n=0;n<t;n++){a[n]=e.charCodeAt(n)}return r}r.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;r.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":313}],318:[function(e,t,r){"use strict";var a=e("./helpers");var n={getDelay:a.getDelay,getRedrawFunc:a.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};t.exports=n},{"./cloneplot":314,"./download":315,"./helpers":317,"./svgtoimg":319,"./toimage":320,"./tosvg":321}],319:[function(e,t,r){"use strict";var x=e("../lib");var a=e("events").EventEmitter;var b=e("./helpers");function n(m){var g=m.emitter||new a;var y=new Promise(function(r,a){var e=window.Image;var t=m.svg;var n=m.format||"png";if(x.isIE()&&n!=="svg"){var i=new Error(b.MSG_IE_BAD_FORMAT);a(i);if(!m.promise){return g.emit("error",i)}else{return y}}var o=m.canvas;var s=m.scale||1;var l=m.width||300;var u=m.height||150;var c=s*l;var f=s*u;var d=o.getContext("2d");var v=new e;var p,h;if(n==="svg"||x.isSafari()){h=b.encodeSVG(t)}else{p=b.createBlob(t,"svg");h=b.createObjectURL(p)}o.width=c;o.height=f;v.onload=function(){var e;p=null;b.revokeObjectURL(h);if(n!=="svg"){d.drawImage(v,0,0,c,f)}switch(n){case"jpeg":e=o.toDataURL("image/jpeg");break;case"png":e=o.toDataURL("image/png");break;case"webp":e=o.toDataURL("image/webp");break;case"svg":e=h;break;default:var t="Image format is not jpeg, png, svg or webp.";a(new Error(t));if(!m.promise){return g.emit("error",t)}}r(e);if(!m.promise){g.emit("success",e)}};v.onerror=function(e){p=null;b.revokeObjectURL(h);a(e);if(!m.promise){return g.emit("error",e)}};v.src=h});if(m.promise){return y}return g}t.exports=n},{"../lib":230,"./helpers":317,events:12}],320:[function(e,t,r){"use strict";var s=e("events").EventEmitter;var l=e("../registry");var u=e("../lib");var c=e("./helpers");var f=e("./cloneplot");var d=e("./tosvg");var v=e("./svgtoimg");function a(e,r){var a=new s;var t=f(e,{format:"png"});var n=t.gd;n.style.position="absolute";n.style.left="-5000px";document.body.appendChild(n);function i(){var e=c.getDelay(n._fullLayout);setTimeout(function(){var e=d(n);var t=document.createElement("canvas");t.id=u.randstr();a=v({format:r.format,width:n._fullLayout.width,height:n._fullLayout.height,canvas:t,emitter:a,svg:e});a.clean=function(){if(n)document.body.removeChild(n)}},e)}var o=c.getRedrawFunc(n);l.call("_doPlot",n,t.data,t.layout,t.config).then(o).then(i).catch(function(e){a.emit("error",e)});return a}t.exports=a},{"../lib":230,"../registry":313,"./cloneplot":314,"./helpers":317,"./svgtoimg":319,"./tosvg":321,events:12}],321:[function(e,t,r){"use strict";var y=e("@plotly/d3");var x=e("../lib");var b=e("../components/drawing");var _=e("../components/color");var w=e("../constants/xmlns_namespaces");var T=/"/g;var k="TOBESTRIPPED";var M=new RegExp('("'+k+")|("+k+'")',"g");function A(e){var t=y.select("body").append("div").style({display:"none"}).html("");var r=e.replace(/(&[^;]*;)/gi,function(e){if(e==="&lt;"){return"&#60;"}if(e==="&rt;"){return"&#62;"}if(e.indexOf("<")!==-1||e.indexOf(">")!==-1){return""}return t.html(e).text()});t.remove();return r}function S(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}t.exports=function e(t,r,a){var n=t._fullLayout;var i=n._paper;var o=n._toppaper;var s=n.width;var l=n.height;var u,c;i.insert("rect",":first-child").call(b.setRect,0,0,s,l).call(_.fill,n.paper_bgcolor);var f=n._basePlotModules||[];for(u=0;u<f.length;u++){var d=f[u];if(d.toSVG)d.toSVG(t)}if(o){var v=o.node().childNodes;var p=Array.prototype.slice.call(v);for(u=0;u<p.length;u++){var h=p[u];if(h.childNodes.length)i.node().appendChild(h)}}if(n._draggers){n._draggers.remove()}i.node().style.background="";i.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var e=y.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){e.remove();return}else{e.style({visibility:null,display:null})}var t=this.style.fontFamily;if(t&&t.indexOf('"')!==-1){e.style("font-family",t.replace(T,k))}});var m=[];if(n._gradientUrlQueryParts){for(c in n._gradientUrlQueryParts)m.push(c)}if(n._patternUrlQueryParts){for(c in n._patternUrlQueryParts)m.push(c)}if(m.length){i.selectAll(m.join(",")).each(function(){var e=y.select(this);var t=this.style.fill;if(t&&t.indexOf("url(")!==-1){e.style("fill",t.replace(T,k))}var r=this.style.stroke;if(r&&r.indexOf("url(")!==-1){e.style("stroke",r.replace(T,k))}})}if(r==="pdf"||r==="eps"){i.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0)}i.node().setAttributeNS(w.xmlns,"xmlns",w.svg);i.node().setAttributeNS(w.xmlns,"xmlns:xlink",w.xlink);if(r==="svg"&&a){i.attr("width",a*s);i.attr("height",a*l);i.attr("viewBox","0 0 "+s+" "+l)}var g=(new window.XMLSerializer).serializeToString(i.node());g=A(g);g=S(g);g=g.replace(M,"'");if(x.isIE()){g=g.replace(/"/gi,"'");g=g.replace(/(\('#)([^']*)('\))/gi,'("#$2")');g=g.replace(/(\\')/gi,'"')}return g}},{"../components/color":100,"../components/drawing":122,"../constants/xmlns_namespaces":211,"../lib":230,"@plotly/d3":11}],322:[function(e,t,r){"use strict";var o=e("../../lib");t.exports=function e(t,r){for(var a=0;a<t.length;a++)t[a].i=a;o.mergeArray(r.text,t,"tx");o.mergeArray(r.hovertext,t,"htx");var n=r.marker;if(n){o.mergeArray(n.opacity,t,"mo",true);o.mergeArray(n.color,t,"mc");var i=n.line;if(i){o.mergeArray(i.color,t,"mlc");o.mergeArrayCastPositive(i.width,t,"mlw")}}}},{"../../lib":230}],323:[function(e,t,r){"use strict";var a=e("../scatter/attributes");var n=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var i=e("../../plots/template_attributes").hovertemplateAttrs;var o=e("../../plots/template_attributes").texttemplateAttrs;var s=e("../../components/colorscale/attributes");var l=e("../../plots/font_attributes");var u=e("./constants");var c=e("../../components/drawing/attributes").pattern;var f=e("../../lib/extend").extendFlat;var d=l({editType:"calc",arrayOk:true,colorEditType:"style"});var v=a.marker;var p=v.line;var h=f({},p.width,{dflt:0});var m=f({width:h,editType:"calc"},s("marker.line"));var g=f({line:m,editType:"calc"},s("marker"),{opacity:{valType:"number",arrayOk:true,dflt:1,min:0,max:1,editType:"style"},pattern:c});t.exports={x:a.x,x0:a.x0,dx:a.dx,y:a.y,y0:a.y0,dy:a.dy,xperiod:a.xperiod,yperiod:a.yperiod,xperiod0:a.xperiod0,yperiod0:a.yperiod0,xperiodalignment:a.xperiodalignment,yperiodalignment:a.yperiodalignment,xhoverformat:n("x"),yhoverformat:n("y"),text:a.text,texttemplate:o({editType:"plot"},{keys:u.eventDataKeys}),hovertext:a.hovertext,hovertemplate:i({},{keys:u.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:true,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:f({},d,{}),insidetextfont:f({},d,{}),outsidetextfont:f({},d,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:f({},a.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:true,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:true,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:true,editType:"calc"},marker:g,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:a.selected.marker.opacity,color:a.selected.marker.color,editType:"style"},textfont:a.selected.textfont,editType:"style"},unselected:{marker:{opacity:a.unselected.marker.opacity,color:a.unselected.marker.color,editType:"style"},textfont:a.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":107,"../../components/drawing/attributes":121,"../../lib/extend":224,"../../plots/cartesian/axis_format_attributes":279,"../../plots/font_attributes":305,"../../plots/template_attributes":312,"../scatter/attributes":353,"./constants":325}],324:[function(e,t,r){"use strict";var v=e("../../plots/cartesian/axes");var p=e("../../plots/cartesian/align_period");var h=e("../../components/colorscale/helpers").hasColorscale;var m=e("../../components/colorscale/calc");var g=e("./arrays_to_calcdata");var y=e("../scatter/calc_selection");t.exports=function e(t,r){var a=v.getFromId(t,r.xaxis||"x");var n=v.getFromId(t,r.yaxis||"y");var i,o,s;var l={msUTC:!!(r.base||r.base===0)};var u;if(r.orientation==="h"){i=a.makeCalcdata(r,"x",l);s=n.makeCalcdata(r,"y");o=p(r,n,"y",s);u=!!r.yperiodalignment}else{i=n.makeCalcdata(r,"y",l);s=a.makeCalcdata(r,"x");o=p(r,a,"x",s);u=!!r.xperiodalignment}var c=Math.min(o.length,i.length);var f=new Array(c);for(var d=0;d<c;d++){f[d]={p:o[d],s:i[d]};if(u){f[d].orig_p=s[d]}if(r.ids){f[d].id=String(r.ids[d])}}if(h(r,"marker")){m(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"})}if(h(r,"marker.line")){m(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"})}g(f,r);y(f,r);return f}},{"../../components/colorscale/calc":108,"../../components/colorscale/helpers":111,"../../plots/cartesian/align_period":273,"../../plots/cartesian/axes":276,"../scatter/calc_selection":355,"./arrays_to_calcdata":322}],325:[function(e,t,r){"use strict";t.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],326:[function(e,t,r){"use strict";var _=e("fast-isnumeric");var p=e("../../lib").isArrayOrTypedArray;var w=e("../../constants/numerical").BADNUM;var h=e("../../registry");var T=e("../../plots/cartesian/axes");var k=e("../../plots/cartesian/constraints").getAxisGroup;var f=e("./sieve.js");function a(e,t){var r=t.xaxis;var a=t.yaxis;var n=e._fullLayout;var i=e._fullData;var o=e.calcdata;var s=[];var l=[];for(var u=0;u<i.length;u++){var c=i[u];if(c.visible===true&&h.traceIs(c,"bar")&&c.xaxis===r._id&&c.yaxis===a._id){if(c.orientation==="h"){s.push(o[u])}else{l.push(o[u])}if(c._computePh){var f=e.calcdata[u];for(var d=0;d<f.length;d++){if(typeof f[d].ph0==="function")f[d].ph0=f[d].ph0();if(typeof f[d].ph1==="function")f[d].ph1=f[d].ph1()}}}}var v={xCat:r.type==="category"||r.type==="multicategory",yCat:a.type==="category"||a.type==="multicategory",mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap};m(e,r,a,l,v);m(e,a,r,s,v)}function m(e,t,r,a,n){if(!a.length)return;var i;var o;var s,l,u;c(r,a);switch(n.mode){case"overlay":d(t,r,a,n);break;case"group":i=[];o=[];for(s=0;s<a.length;s++){l=a[s];u=l[0].trace;if(u.offset===undefined)o.push(l);else i.push(l)}if(o.length){v(e,t,r,o,n)}if(i.length){d(t,r,i,n)}break;case"stack":case"relative":i=[];o=[];for(s=0;s<a.length;s++){l=a[s];u=l[0].trace;if(u.base===undefined)o.push(l);else i.push(l)}if(o.length){g(e,t,r,o,n)}if(i.length){d(t,r,i,n)}break}E(a,t)}function c(e,t){var r,a;for(r=0;r<t.length;r++){var n=t[r];var i=n[0].trace;var o=i.type==="funnel"?i._base:i.base;var s;var l=i.orientation==="h"?i.xcalendar:i.ycalendar;var u=e.type==="category"||e.type==="multicategory"?function(){return null}:e.d2c;if(p(o)){for(a=0;a<Math.min(o.length,n.length);a++){s=u(o[a],0,l);if(_(s)){n[a].b=+s;n[a].hasB=1}else n[a].b=0}for(;a<n.length;a++){n[a].b=0}}else{s=u(o,0,l);var c=_(s);s=c?s:0;for(a=0;a<n.length;a++){n[a].b=s;if(c)n[a].hasB=1}}}}function d(e,t,r,a){for(var n=0;n<r.length;n++){var i=r[n];var o=new f([i],{posAxis:e,sepNegVal:false,overlapNoMerge:!a.norm});y(e,o,a);if(a.norm){l(o);b(t,o,a)}else{s(t,o)}}}function v(e,t,r,a,n){var i=new f(a,{posAxis:t,sepNegVal:false,overlapNoMerge:!n.norm});o(e,t,i,n);u(i,t);if(n.norm){l(i);b(r,i,n)}else{s(r,i)}}function g(e,t,r,a,n){var i=new f(a,{posAxis:t,sepNegVal:n.mode==="relative",overlapNoMerge:!(n.norm||n.mode==="stack"||n.mode==="relative")});y(t,i,n);x(r,i,n);for(var o=0;o<a.length;o++){var s=a[o];for(var l=0;l<s.length;l++){var u=s[l];if(u.s!==w){var c=u.b+u.s===i.get(u.p,u.s);if(c)u._outmost=true}}}if(n.norm)b(r,i,n)}function y(e,t,r){var a=t.minDiff;var n=t.traces;var i=a*(1-r.gap);var o=i;var s=o*(1-(r.groupgap||0));var l=-s/2;for(var u=0;u<n.length;u++){var c=n[u];var f=c[0].t;f.barwidth=s;f.poffset=l;f.bargroupwidth=i;f.bardelta=a}t.binWidth=n[0][0].t.barwidth/100;M(t);A(e,t);S(e,t)}function o(e,t,r,a){var n=e._fullLayout;var i=r.positions;var o=r.distinctPositions;var s=r.minDiff;var l=r.traces;var u=l.length;var c=i.length!==o.length;var f=s*(1-a.gap);var d=k(n,t._id)+l[0][0].trace.orientation;var v=n._alignmentOpts[d]||{};for(var p=0;p<u;p++){var h=l[p];var m=h[0].trace;var g=v[m.alignmentgroup]||{};var y=Object.keys(g.offsetGroups||{}).length;var x;if(y){x=f/y}else{x=c?f/u:f}var b=x*(1-(a.groupgap||0));var _;if(y){_=((2*m._offsetIndex+1-y)*x-b)/2}else{_=c?((2*p+1-u)*x-b)/2:-b/2}var w=h[0].t;w.barwidth=b;w.poffset=_;w.bargroupwidth=f;w.bardelta=s}r.binWidth=l[0][0].t.barwidth/100;M(r);A(t,r);S(t,r,c)}function M(e){var t=e.traces;var r,a;for(r=0;r<t.length;r++){var n=t[r];var i=n[0];var o=i.trace;var s=i.t;var l=o._offset||o.offset;var u=s.poffset;var c;if(p(l)){c=Array.prototype.slice.call(l,0,n.length);for(a=0;a<c.length;a++){if(!_(c[a])){c[a]=u}}for(a=c.length;a<n.length;a++){c.push(u)}s.poffset=c}else if(l!==undefined){s.poffset=l}var f=o._width||o.width;var d=s.barwidth;if(p(f)){var v=Array.prototype.slice.call(f,0,n.length);for(a=0;a<v.length;a++){if(!_(v[a]))v[a]=d}for(a=v.length;a<n.length;a++){v.push(d)}s.barwidth=v;if(l===undefined){c=[];for(a=0;a<n.length;a++){c.push(u+(d-v[a])/2)}s.poffset=c}}else if(f!==undefined){s.barwidth=f;if(l===undefined){s.poffset=u+(d-f)/2}}}}function A(e,t){var r=t.traces;var a=L(e);for(var n=0;n<r.length;n++){var i=r[n];var o=i[0].t;var s=o.poffset;var l=Array.isArray(s);var u=o.barwidth;var c=Array.isArray(u);for(var f=0;f<i.length;f++){var d=i[f];var v=d.w=c?u[f]:u;d[a]=d.p+(l?s[f]:s)+v/2}}}function S(e,t,r){var a=t.traces;var n=t.minDiff;var i=n/2;T.minDtick(e,t.minDiff,t.distinctPositions[0],r);for(var o=0;o<a.length;o++){var s=a[o];var l=s[0];var u=l.trace;var c=[];var f,d,v,p;for(p=0;p<s.length;p++){f=s[p];d=f.p-i;v=f.p+i;c.push(d,v)}if(u.width||u.offset){var h=l.t;var m=h.poffset;var g=h.barwidth;var y=Array.isArray(m);var x=Array.isArray(g);for(p=0;p<s.length;p++){f=s[p];var b=y?m[p]:m;var _=x?g[p]:g;d=f.p+b;v=d+_;c.push(d,v)}}u._extremes[e._id]=T.findExtremes(e,c,{padded:false})}}function s(e,t){var r=t.traces;var a=L(e);for(var n=0;n<r.length;n++){var i=r[n];var o=i[0].trace;var s=[];var l=false;for(var u=0;u<i.length;u++){var c=i[u];var f=c.b;var d=f+c.s;c[a]=d;s.push(d);if(c.hasB)s.push(f);if(!c.hasB||!c.b){l=true}}o._extremes[e._id]=T.findExtremes(e,s,{tozero:l,padded:true})}}function x(e,t,r){var a=L(e);var n=t.traces;var i;var o;var s;var l,u;var c;for(l=0;l<n.length;l++){i=n[l];o=i[0].trace;if(o.type==="funnel"){for(u=0;u<i.length;u++){c=i[u];if(c.s!==w){t.put(c.p,-.5*c.s)}}}}for(l=0;l<n.length;l++){i=n[l];o=i[0].trace;s=o.type==="funnel";var f=[];for(u=0;u<i.length;u++){c=i[u];if(c.s!==w){var d;if(s){d=c.s}else{d=c.s+c.b}var v=t.put(c.p,d);var p=v+d;c.b=v;c[a]=p;if(!r.norm){f.push(p);if(c.hasB){f.push(v)}}}}if(!r.norm){o._extremes[e._id]=T.findExtremes(e,f,{tozero:true,padded:true})}}}function l(e){var t=e.traces;for(var r=0;r<t.length;r++){var a=t[r];for(var n=0;n<a.length;n++){var i=a[n];if(i.s!==w){e.put(i.p,i.b+i.s)}}}}function u(e,t){var r=e.traces;for(var a=0;a<r.length;a++){var n=r[a];var i=n[0].trace;if(i.base===undefined){var o=new f([n],{posAxis:t,sepNegVal:true,overlapNoMerge:true});for(var s=0;s<n.length;s++){var l=n[s];if(l.p!==w){var u=o.put(l.p,l.b+l.s);if(u)l.b=u}}}}}function b(t,e,r){var a=e.traces;var n=L(t);var i=r.norm==="fraction"?1:100;var o=i/1e9;var s=t.l2c(t.c2l(0));var l=r.mode==="stack"?i:s;function u(e){return _(t.c2l(e))&&(e<s-o||e>l+o||!_(s))}for(var c=0;c<a.length;c++){var f=a[c];var d=f[0].trace;var v=[];var p=false;var h=false;for(var m=0;m<f.length;m++){var g=f[m];if(g.s!==w){var y=Math.abs(i/e.get(g.p,g.s));g.b*=y;g.s*=y;var x=g.b;var b=x+g.s;g[n]=b;v.push(b);h=h||u(b);if(g.hasB){v.push(x);h=h||u(x)}if(!g.hasB||!g.b){p=true}}}d._extremes[t._id]=T.findExtremes(t,v,{tozero:p,padded:h})}}function E(e,t){var r=L(t);var a={};var n,i,o;var s=Infinity;var l=-Infinity;for(n=0;n<e.length;n++){o=e[n];for(i=0;i<o.length;i++){var u=o[i].p;if(_(u)){s=Math.min(s,u);l=Math.max(l,u)}}}var c=1e4/(l-s);var f=a.round=function(e){return String(Math.round(c*(e-s)))};for(n=0;n<e.length;n++){o=e[n];o[0].t.extents=a;var d=o[0].t.poffset;var v=Array.isArray(d);for(i=0;i<o.length;i++){var p=o[i];var h=p[r]-p.w/2;if(_(h)){var m=p[r]+p.w/2;var g=f(p.p);if(a[g]){a[g]=[Math.min(h,a[g][0]),Math.max(m,a[g][1])]}else{a[g]=[h,m]}}p.p0=p.p+(v?d[i]:d);p.p1=p.p0+p.w;p.s0=p.b;p.s1=p.s0+p.s}}}function L(e){return e._id.charAt(0)}t.exports={crossTraceCalc:a,setGroupPositions:m}},{"../../constants/numerical":210,"../../lib":230,"../../plots/cartesian/axes":276,"../../plots/cartesian/constraints":284,"../../registry":313,"./sieve.js":336,"fast-isnumeric":15}],327:[function(e,t,r){"use strict";var _=e("../../lib");var u=e("../../components/color");var c=e("../../registry");var f=e("../scatter/xy_defaults");var d=e("../scatter/period_defaults");var v=e("./style_defaults");var p=e("../../plots/cartesian/constraints").getAxisGroup;var h=e("./attributes");var w=_.coerceFont;function a(r,a,e,t){function n(e,t){return _.coerce(r,a,h,e,t)}var i=f(r,a,t,n);if(!i){a.visible=false;return}d(r,a,t,n);n("xhoverformat");n("yhoverformat");n("orientation",a.x&&!a.y?"h":"v");n("base");n("offset");n("width");n("text");n("hovertext");n("hovertemplate");var o=n("textposition");m(r,a,t,n,o,{moduleHasSelected:true,moduleHasUnselected:true,moduleHasConstrain:true,moduleHasCliponaxis:true,moduleHasTextangle:true,moduleHasInsideanchor:true});v(r,a,n,e,t);var s=(a.marker.line||{}).color;var l=c.getComponentMethod("errorbars","supplyDefaults");l(r,a,s||u.defaultLine,{axis:"y"});l(r,a,s||u.defaultLine,{axis:"x",inherit:"y"});_.coerceSelectionMarkerOpacity(a,n)}function o(e,t,r,a){var n=t.orientation;var i=t[{v:"x",h:"y"}[n]+"axis"];var o=p(r,i)+n;var s=r._alignmentOpts||{};var l=a("alignmentgroup");var u=s[o];if(!u)u=s[o]={};var c=u[l];if(c){c.traces.push(t)}else{c=u[l]={traces:[t],alignmentIndex:Object.keys(u).length,offsetGroups:{}}}var f=a("offsetgroup");var d=c.offsetGroups;var v=d[f];if(f){if(!v){v=d[f]={offsetIndex:Object.keys(d).length}}t._offsetIndex=v.offsetIndex}}function n(e,t){var r,a;function n(e){return _.coerce(a._input,a,h,e)}if(t.barmode==="group"){for(var i=0;i<e.length;i++){a=e[i];if(a.type==="bar"){r=a._input;o(r,a,t,n)}}}}function m(e,t,r,a,n,i){i=i||{};var o=!(i.moduleHasSelected===false);var s=!(i.moduleHasUnselected===false);var l=!(i.moduleHasConstrain===false);var u=!(i.moduleHasCliponaxis===false);var c=!(i.moduleHasTextangle===false);var f=!(i.moduleHasInsideanchor===false);var d=!!i.hasPathbar;var v=Array.isArray(n)||n==="auto";var p=v||n==="inside";var h=v||n==="outside";if(p||h){var m=w(a,"textfont",r.font);var g=_.extendFlat({},m);var y=e.textfont&&e.textfont.color;var x=!y;if(x){delete g.color}w(a,"insidetextfont",g);if(d){var b=_.extendFlat({},m);if(x){delete b.color}w(a,"pathbar.textfont",b)}if(h)w(a,"outsidetextfont",m);if(o)a("selected.textfont.color");if(s)a("unselected.textfont.color");if(l)a("constraintext");if(u)a("cliponaxis");if(c)a("textangle");a("texttemplate")}if(p){if(f)a("insidetextanchor")}}t.exports={supplyDefaults:a,crossTraceDefaults:n,handleGroupingDefaults:o,handleText:m}},{"../../components/color":100,"../../lib":230,"../../plots/cartesian/constraints":284,"../../registry":313,"../scatter/period_defaults":373,"../scatter/xy_defaults":380,"./attributes":323,"./style_defaults":338}],328:[function(e,t,r){"use strict";t.exports=function e(t,r,a){t.x="xVal"in r?r.xVal:r.x;t.y="yVal"in r?r.yVal:r.y;if(r.xa)t.xaxis=r.xa;if(r.ya)t.yaxis=r.ya;if(a.orientation==="h"){t.label=t.y;t.value=t.x}else{t.label=t.x;t.value=t.y}return t}},{}],329:[function(e,t,r){"use strict";var o=e("fast-isnumeric");var a=e("tinycolor2");var n=e("../../lib").isArrayOrTypedArray;r.coerceString=function(e,t,r){if(typeof t==="string"){if(t||!e.noBlank)return t}else if(typeof t==="number"||t===true){if(!e.strict)return String(t)}return r!==undefined?r:e.dflt};r.coerceNumber=function(e,t,r){if(o(t)){t=+t;var a=e.min;var n=e.max;var i=a!==undefined&&t<a||n!==undefined&&t>n;if(!i)return t}return r!==undefined?r:e.dflt};r.coerceColor=function(e,t,r){if(a(t).isValid())return t;return r!==undefined?r:e.dflt};r.coerceEnumerated=function(e,t,r){if(e.coerceNumber)t=+t;if(e.values.indexOf(t)!==-1)return t;return r!==undefined?r:e.dflt};r.getValue=function(e,t){var r;if(!Array.isArray(e))r=e;else if(t<e.length)r=e[t];return r};r.getLineWidth=function(e,t){var r=0<t.mlw?t.mlw:!n(e.marker.line.width)?e.marker.line.width:0;return r}},{"../../lib":230,"fast-isnumeric":15,tinycolor2:65}],330:[function(e,t,r){"use strict";var H=e("../../components/fx");var u=e("../../registry");var i=e("../../components/color");var B=e("../../lib").fillText;var o=e("./helpers").getLineWidth;var q=e("../../plots/cartesian/axes").hoverLabelText;var U=e("../../constants/numerical").BADNUM;function a(e,t,r,a,n){var i=c(e,t,r,a,n);if(i){var o=i.cd;var s=o[0].trace;var l=o[i.index];i.color=f(s,l);u.getComponentMethod("errorbars","hoverInfo")(l,s,i);return[i]}}function c(e,t,r,a,n){var i=e.cd;var o=i[0].trace;var s=i[0].t;var l=a==="closest";var u=o.type==="waterfall";var c=e.maxHoverDistance;var f=e.maxSpikeDistance;var d,v,p,h,m,g,y;if(o.orientation==="h"){d=r;v=t;p="y";h="x";m=L;g=A}else{d=t;v=r;p="x";h="y";g=L;m=A}var x=o[p+"period"];function b(e){return w(e,-1)}function _(e){return w(e,1)}function w(e,t){if(x){return e.p+t*Math.abs(e.p-e.orig_p)}return e[p]+t*e.w/2}var T=l||x?b:function(e){return Math.min(b(e),e.p-s.bardelta/2)};var k=l||x?_:function(e){return Math.max(_(e),e.p+s.bardelta/2)};function M(e,t,r){if(n.finiteRange)r=0;return H.inbox(e-d,t-d,r+Math.min(1,Math.abs(t-e)/y)-1)}function A(e){return M(T(e),k(e),c)}function S(e){return M(b(e),_(e),f)}function E(e){var t=e[h];if(u){var r=Math.abs(e.rawS)||0;if(v>0){t+=r}else if(v<0){t-=r}}return t}function L(e){var t=v;var r=e.b;var a=E(e);return H.inbox(r-t,a-t,c+(a-t)/(a-r)-1)}function C(e){var t=v;var r=e.b;var a=E(e);return H.inbox(r-t,a-t,f+(a-t)/(a-r)-1)}var D=e[p+"a"];var O=e[h+"a"];y=Math.abs(D.r2c(D.range[1])-D.r2c(D.range[0]));function I(e){return(m(e)+g(e))/2}var P=H.getDistanceFunction(a,m,g,I);H.getClosest(i,P,e);if(e.index===false)return;if(i[e.index].p===U)return;if(!l){T=function(e){return Math.min(b(e),e.p-s.bargroupwidth/2)};k=function(e){return Math.max(_(e),e.p+s.bargroupwidth/2)}}var R=e.index;var N=i[R];var z=o.base?N.b+N.s:N.s;e[h+"0"]=e[h+"1"]=O.c2p(N[h],true);e[h+"LabelVal"]=z;var F=s.extents[s.extents.round(N.p)];e[p+"0"]=D.c2p(l?T(N):F[0],true);e[p+"1"]=D.c2p(l?k(N):F[1],true);var j=N.orig_p!==undefined;e[p+"LabelVal"]=j?N.orig_p:N.p;e.labelLabel=q(D,e[p+"LabelVal"],o[p+"hoverformat"]);e.valueLabel=q(O,e[h+"LabelVal"],o[h+"hoverformat"]);e.baseLabel=q(O,N.b,o[h+"hoverformat"]);e.spikeDistance=(C(N)+S(N))/2;e[p+"Spike"]=D.c2p(N.p,true);B(N,o,e);e.hovertemplate=o.hovertemplate;return e}function f(e,t){var r=t.mcc||e.marker.color;var a=t.mlcc||e.marker.line.color;var n=o(e,t);if(i.opacity(r))return r;else if(i.opacity(a)&&n)return a}t.exports={hoverPoints:a,hoverOnBars:c,getTraceColor:f}},{"../../components/color":100,"../../components/fx":140,"../../constants/numerical":210,"../../lib":230,"../../plots/cartesian/axes":276,"../../registry":313,"./helpers":329}],331:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,colorbar:e("../scatter/marker_colorbar"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"bar",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:true,meta:{}}},{"../../plots/cartesian":290,"../scatter/marker_colorbar":371,"./arrays_to_calcdata":322,"./attributes":323,"./calc":324,"./cross_trace_calc":326,"./defaults":327,"./event_data":328,"./hover":330,"./layout_attributes":332,"./layout_defaults":333,"./plot":334,"./select":335,"./style":337}],332:[function(e,t,r){"use strict";t.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],333:[function(e,t,r){"use strict";var v=e("../../registry");var p=e("../../plots/cartesian/axes");var h=e("../../lib");var m=e("./layout_attributes");t.exports=function(r,a,e){function t(e,t){return h.coerce(r,a,m,e,t)}var n=false;var i=false;var o=false;var s={};var l=t("barmode");for(var u=0;u<e.length;u++){var c=e[u];if(v.traceIs(c,"bar")&&c.visible)n=true;else continue;if(l==="group"){var f=c.xaxis+c.yaxis;if(s[f])o=true;s[f]=true}if(c.visible&&c.type==="histogram"){var d=p.getFromId({_fullLayout:a},c[c.orientation==="v"?"xaxis":"yaxis"]);if(d.type!=="category")i=true}}if(!n){delete a.barmode;return}if(l!=="overlay")t("barnorm");t("bargap",i&&!o?0:.2);t("bargroupgap")}},{"../../lib":230,"../../plots/cartesian/axes":276,"../../registry":313,"./layout_attributes":332}],334:[function(e,t,r){"use strict";var D=e("@plotly/d3");var O=e("fast-isnumeric");var q=e("../../lib");var U=e("../../lib/svg_text_utils");var I=e("../../components/color");var Y=e("../../components/drawing");var a=e("../../registry");var _=e("../../plots/cartesian/axes").tickText;var n=e("./uniform_text");var V=n.recordMinTextSize;var i=n.clearMinTextSize;var G=e("./style");var P=e("./helpers");var o=e("./constants");var s=e("./attributes");var l=s.text;var u=s.textposition;var b=e("../../components/fx/helpers").appendArrayPointValue;var W=o.TEXTPAD;function c(e){return e.id}function f(e){if(e.ids){return c}}function R(e,t){return e<t?1:-1}function N(e,t,r,a){var n=[];var i=[];var o=a?t:r;var s=a?r:t;n[0]=o.c2p(e.s0,true);i[0]=s.c2p(e.p0,true);n[1]=o.c2p(e.s1,true);i[1]=s.c2p(e.p1,true);return a?[n,i]:[i,n]}function $(e,t,r,a){if(!t.uniformtext.mode&&d(r)){var n;if(a){n=a()}return e.transition().duration(r.duration).ease(r.easing).each("end",function(){n&&n()}).each("interrupt",function(){n&&n()})}else{return e}}function d(e){return e&&e.duration>0}function v(k,M,e,t,A,S){var E=M.xaxis;var L=M.yaxis;var C=k._fullLayout;if(!A){A={mode:C.barmode,norm:C.barmode,gap:C.bargap,groupgap:C.bargroupgap};i("bar",C)}var r=q.makeTraceGroups(t,e,"trace bars").each(function(y){var e=D.select(this);var x=y[0].trace;var t=x.type==="waterfall";var r=x.type==="funnel";var a=x.type==="bar";var b=a||r;var _=0;if(t&&x.connector.visible&&x.connector.mode==="between"){_=x.connector.line.width/2}var w=x.orientation==="h";var T=d(A);var n=q.ensureSingle(e,"g","points");var i=f(x);var o=n.selectAll("g.point").data(q.identity,i);o.enter().append("g").classed("point",true);o.exit().remove();o.each(function(e,t){var r=D.select(this);var a=N(e,E,L,w);var n=a[0][0];var i=a[0][1];var o=a[1][0];var s=a[1][1];var l=(w?i-n:s-o)===0;if(l&&b&&P.getLineWidth(x,e)){l=false}if(!l){l=!O(n)||!O(i)||!O(o)||!O(s)}e.isBlank=l;if(l){if(w){i=n}else{s=o}}if(_&&!l){if(w){n-=R(n,i)*_;i+=R(n,i)*_}else{o-=R(o,s)*_;s+=R(o,s)*_}}var u;var c;if(x.type==="waterfall"){if(!l){var f=x[e.dir].marker;u=f.line.width;c=f.color}}else{u=P.getLineWidth(x,e);c=e.mc||x.marker.color}function d(e){var t=D.round(u/2%1,2);return A.gap===0&&A.groupgap===0?D.round(Math.round(e)-t,2):e}function v(e,t,r){if(r&&e===t){return e}return Math.abs(e-t)>=2?d(e):e>t?Math.ceil(e):Math.floor(e)}if(!k._context.staticPlot){var p=I.opacity(c);var h=p<1||u>.01?d:v;n=h(n,i,w);i=h(i,n,w);o=h(o,s,!w);s=h(s,o,!w)}var m=$(q.ensureSingle(r,"path"),C,A,S);m.style("vector-effect","non-scaling-stroke").attr("d",isNaN((i-n)*(s-o))||l&&k._context.staticPlot?"M0,0Z":"M"+n+","+o+"V"+s+"H"+i+"V"+o+"Z").call(Y.setClipUrl,M.layerClipId,k);if(!C.uniformtext.mode&&T){var g=Y.makePointStyleFns(x);Y.singlePointStyle(e,m,x,g,k)}z(k,M,r,y,t,n,i,o,s,A,S);if(M.layerClipId){Y.hideOutsideRangePoint(e,r.select("text"),E,L,x.xcalendar,x.ycalendar)}});var s=x.cliponaxis===false;Y.setClipUrl(e,s?null:M.layerClipId,k)});a.getComponentMethod("errorbars","plot")(k,r,M,A)}function z(n,e,t,r,a,i,o,s,l,u,c){var f=e.xaxis;var d=e.yaxis;var v=n._fullLayout;var p;function h(e,t,r){var a=q.ensureSingle(e,"text").text(t).attr({class:"bartext bartext-"+p,"text-anchor":"middle","data-notex":1}).call(Y.font,r).call(U.convertToTspans,n);return a}var m=r[0].trace;var g=m.orientation==="h";var y=J(v,r,a,f,d);p=K(m,a);var x=u.mode==="stack"||u.mode==="relative";var b=r[a];var _=!x||b._outmost;if(!y||p==="none"||(b.isBlank||i===o||s===l)&&(p==="auto"||p==="inside")){t.select("text").remove();return}var w=v.font;var T=G.getBarColor(r[a],m);var k=G.getInsideTextFont(m,a,w,T);var M=G.getOutsideTextFont(m,a,w);var A=t.datum();if(g){if(f.type==="log"&&A.s0<=0){if(f.range[0]<f.range[1]){i=0}else{i=f._length}}}else{if(d.type==="log"&&A.s0<=0){if(d.range[0]<d.range[1]){s=d._length}else{s=0}}}var S=Math.abs(o-i)-2*W;var E=Math.abs(l-s)-2*W;var L;var C;var D;var O;var I;if(p==="outside"){if(!_&&!b.hasB)p="inside"}if(p==="auto"){if(_){p="inside";I=q.ensureUniformFontSize(n,k);L=h(t,y,I);C=Y.bBox(L.node()),D=C.width,O=C.height;var P=D>0&&O>0;var R=D<=S&&O<=E;var N=D<=E&&O<=S;var z=g?S>=D*(E/O):E>=O*(S/D);if(P&&(R||N||z)){p="inside"}else{p="outside";L.remove();L=null}}else{p="inside"}}if(!L){I=q.ensureUniformFontSize(n,p==="outside"?M:k);L=h(t,y,I);var F=L.attr("transform");L.attr("transform","");C=Y.bBox(L.node()),D=C.width,O=C.height;L.attr("transform",F);if(D<=0||O<=0){L.remove();return}}var j=m.textangle;var H,B;if(p==="outside"){B=m.constraintext==="both"||m.constraintext==="outside";H=X(i,o,s,l,C,{isHorizontal:g,constrained:B,angle:j})}else{B=m.constraintext==="both"||m.constraintext==="inside";H=Z(i,o,s,l,C,{isHorizontal:g,constrained:B,angle:j,anchor:m.insidetextanchor})}H.fontSize=I.size;V(m.type,H,v);b.transform=H;$(L,v,u,c).attr("transform",q.getTextTransform(H))}function F(e){return e==="auto"?0:e}function j(e,t){var r=Math.PI/180*t;var a=Math.abs(Math.sin(r));var n=Math.abs(Math.cos(r));return{x:e.width*n+e.height*a,y:e.width*a+e.height*n}}function Z(e,t,r,a,n,i){var o=!!i.isHorizontal;var s=!!i.constrained;var l=i.angle||0;var u=i.anchor||"end";var c=u==="end";var f=u==="start";var d=i.leftToRight||0;var v=(d+1)/2;var p=1-v;var h=n.width;var m=n.height;var g=Math.abs(t-e);var y=Math.abs(a-r);var x=g>2*W&&y>2*W?W:0;g-=2*x;y-=2*x;var b=F(l);if(l==="auto"&&!(h<=g&&m<=y)&&(h>g||m>y)&&(!(h>y||m>g)||h<m!==g<y)){b+=90}var _=j(n,b);var w=1;if(s){w=Math.min(1,g/_.x,y/_.y)}var T=n.left*p+n.right*v;var k=(n.top+n.bottom)/2;var M=(e+W)*p+(t-W)*v;var A=(r+a)/2;var S=0;var E=0;if(f||c){var L=(o?_.x:_.y)/2;var C=o?R(e,t):R(r,a);if(o){if(f){M=e+C*x;S=-C*L}else{M=t-C*x;S=C*L}}else{if(f){A=r+C*x;E=-C*L}else{A=a-C*x;E=C*L}}}return{textX:T,textY:k,targetX:M,targetY:A,anchorX:S,anchorY:E,scale:w,rotate:b}}function X(e,t,r,a,n,i){var o=!!i.isHorizontal;var s=!!i.constrained;var l=i.angle||0;var u=n.width;var c=n.height;var f=Math.abs(t-e);var d=Math.abs(a-r);var v;if(o){v=d>2*W?W:0}else{v=f>2*W?W:0}var p=1;if(s){p=o?Math.min(1,d/c):Math.min(1,f/u)}var h=F(l);var m=j(n,h);var g=(o?m.x:m.y)/2;var y=(n.left+n.right)/2;var x=(n.top+n.bottom)/2;var b=(e+t)/2;var _=(r+a)/2;var w=0;var T=0;var k=o?R(t,e):R(r,a);if(o){b=t-k*v;w=k*g}else{_=a+k*v;T=-k*g}return{textX:y,textY:x,targetX:b,targetY:_,anchorX:w,anchorY:T,scale:p,rotate:h}}function J(e,t,r,a,n){var i=t[0].trace;var o=i.texttemplate;var s;if(o){s=p(e,t,r,a,n)}else if(i.textinfo){s=h(t,r,a,n)}else{s=P.getValue(i.text,r)}return P.coerceString(l,s)}function K(e,t){var r=P.getValue(e.textposition,t);return P.coerceEnumerated(u,r)}function p(e,t,r,a,n){var i=t[0].trace;var o=q.castOption(i,r,"texttemplate");if(!o)return"";var s=i.type==="waterfall";var l=i.type==="funnel";var u,c;var f,d;if(i.orientation==="h"){u="y";c=n;f="x";d=a}else{u="x";c=a;f="y";d=n}function v(e){return _(c,c.c2l(e),true).text}function p(e){return _(d,d.c2l(e),true).text}var h=t[r];var m={};m.label=h.p;m.labelLabel=m[u+"Label"]=v(h.p);var g=q.castOption(i,h.i,"text");if(g===0||g)m.text=g;m.value=h.s;m.valueLabel=m[f+"Label"]=p(h.s);var y={};b(y,i,h.i);if(s){m.delta=+h.rawS||h.s;m.deltaLabel=p(m.delta);m.final=h.v;m.finalLabel=p(m.final);m.initial=m.final-m.delta;m.initialLabel=p(m.initial)}if(l){m.value=h.s;m.valueLabel=p(m.value);m.percentInitial=h.begR;m.percentInitialLabel=q.formatPercent(h.begR);m.percentPrevious=h.difR;m.percentPreviousLabel=q.formatPercent(h.difR);m.percentTotal=h.sumR;m.percenTotalLabel=q.formatPercent(h.sumR)}var x=q.castOption(i,h.i,"customdata");if(x)m.customdata=x;return q.texttemplateString(o,m,e._d3locale,y,m,i._meta||{})}function h(e,t,r,a){var n=e[0].trace;var i=n.orientation==="h";var o=n.type==="waterfall";var s=n.type==="funnel";function l(e){var t=i?a:r;return _(t,e,true).text}function u(e){var t=i?r:a;return _(t,+e,true).text}var c=n.textinfo;var f=e[t];var d=c.split("+");var v=[];var p;var h=function(e){return d.indexOf(e)!==-1};if(h("label")){v.push(l(e[t].p))}if(h("text")){p=q.castOption(n,f.i,"text");if(p===0||p)v.push(p)}if(o){var m=+f.rawS||f.s;var g=f.v;var y=g-m;if(h("initial"))v.push(u(y));if(h("delta"))v.push(u(m));if(h("final"))v.push(u(g))}if(s){if(h("value"))v.push(u(f.s));var x=0;if(h("percent initial"))x++;if(h("percent previous"))x++;if(h("percent total"))x++;var b=x>1;if(h("percent initial")){p=q.formatPercent(f.begR);if(b)p+=" of initial";v.push(p)}if(h("percent previous")){p=q.formatPercent(f.difR);if(b)p+=" of previous";v.push(p)}if(h("percent total")){p=q.formatPercent(f.sumR);if(b)p+=" of total";v.push(p)}}return v.join("<br>")}t.exports={plot:v,toMoveInsideBar:Z}},{"../../components/color":100,"../../components/drawing":122,"../../components/fx/helpers":136,"../../lib":230,"../../lib/svg_text_utils":252,"../../plots/cartesian/axes":276,"../../registry":313,"./attributes":323,"./constants":325,"./helpers":329,"./style":337,"./uniform_text":339,"@plotly/d3":11,"fast-isnumeric":15}],335:[function(e,t,r){"use strict";t.exports=function e(t,r){var a=t.cd;var n=t.xaxis;var i=t.yaxis;var o=a[0].trace;var s=o.type==="funnel";var l=o.orientation==="h";var u=[];var c;if(r===false){for(c=0;c<a.length;c++){a[c].selected=0}}else{for(c=0;c<a.length;c++){var f=a[c];var d="ct"in f?f.ct:v(f,n,i,l,s);if(r.contains(d,false,c,t)){u.push({pointNumber:c,x:n.c2d(f.x),y:i.c2d(f.y)});f.selected=1}else{f.selected=0}}}return u};function v(e,t,r,a,n){var i=t.c2p(a?e.s0:e.p0,true);var o=t.c2p(a?e.s1:e.p1,true);var s=r.c2p(a?e.p0:e.s0,true);var l=r.c2p(a?e.p1:e.s1,true);if(n){return[(i+o)/2,(s+l)/2]}else{if(a){return[o,(s+l)/2]}else{return[(i+o)/2,l]}}}},{}],336:[function(e,t,r){"use strict";t.exports=a;var c=e("../../lib").distinctVals;var f=e("../../constants/numerical").BADNUM;function a(e,t){this.traces=e;this.sepNegVal=t.sepNegVal;this.overlapNoMerge=t.overlapNoMerge;var r=Infinity;var a=[];for(var n=0;n<e.length;n++){var i=e[n];for(var o=0;o<i.length;o++){var s=i[o];if(s.p!==f)a.push(s.p)}if(i[0]&&i[0].width1){r=Math.min(i[0].width1,r)}}this.positions=a;var l=c(a);this.distinctPositions=l.vals;if(l.vals.length===1&&r!==Infinity)this.minDiff=r;else this.minDiff=Math.min(l.minDiff,r);var u=(t.posAxis||{}).type;if(u==="category"||u==="multicategory"){this.minDiff=1}this.binWidth=this.minDiff;this.bins={}}a.prototype.put=function e(t,r){var a=this.getLabel(t,r);var n=this.bins[a]||0;this.bins[a]=n+r;return n};a.prototype.get=function e(t,r){var a=this.getLabel(t,r);return this.bins[a]||0};a.prototype.getLabel=function e(t,r){var a=r<0&&this.sepNegVal?"v":"^";var n=this.overlapNoMerge?t:Math.round(t/this.binWidth);return a+n}},{"../../constants/numerical":210,"../../lib":230}],337:[function(e,t,r){"use strict";var o=e("@plotly/d3");var s=e("../../components/color");var l=e("../../components/drawing");var u=e("../../lib");var n=e("../../registry");var i=e("./uniform_text").resizeText;var a=e("./attributes");var c=a.textfont;var f=a.insidetextfont;var d=a.outsidetextfont;var v=e("./helpers");function p(a){var e=o.select(a).selectAll("g.barlayer").selectAll("g.trace");i(a,e,"bar");var t=e.size();var r=a._fullLayout;e.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){if(r.barmode==="stack"&&t>1||r.bargap===0&&r.bargroupgap===0&&!e[0].trace.marker.line.width){o.select(this).attr("shape-rendering","crispEdges")}});e.selectAll("g.points").each(function(e){var t=o.select(this);var r=e[0].trace;h(t,r,a)});n.getComponentMethod("errorbars","style")(e)}function h(e,t,r){l.pointStyle(e.selectAll("path"),t,r);m(e,t,r)}function m(e,a,n){e.selectAll("text").each(function(e){var t=o.select(this);var r=u.ensureUniformFontSize(n,b(t,e,a,n));l.font(t,r)})}function g(e,t,r){var a=t[0].trace;if(a.selectedpoints){y(r,a,e)}else{h(r,a,e);n.getComponentMethod("errorbars","style")(r)}}function y(e,t,r){l.selectedPointStyle(e.selectAll("path"),t);x(e.selectAll("text"),t,r)}function x(e,n,i){e.each(function(e){var t=o.select(this);var r;if(e.selected){r=u.ensureUniformFontSize(i,b(t,e,n,i));var a=n.selected.textfont&&n.selected.textfont.color;if(a){r.color=a}l.font(t,r)}else{l.selectedTextStyle(t,n)}})}function b(e,t,r,a){var n=a._fullLayout.font;var i=r.textfont;if(e.classed("bartext-inside")){var o=M(t,r);i=w(r,t.i,n,o)}else if(e.classed("bartext-outside")){i=T(r,t.i,n)}return i}function _(e,t,r){return k(c,e.textfont,t,r)}function w(e,t,r,a){var n=_(e,t,r);var i=e._input.textfont===undefined||e._input.textfont.color===undefined||Array.isArray(e.textfont.color)&&e.textfont.color[t]===undefined;if(i){n={color:s.contrast(a),family:n.family,size:n.size}}return k(f,e.insidetextfont,t,n)}function T(e,t,r){var a=_(e,t,r);return k(d,e.outsidetextfont,t,a)}function k(e,t,r,a){t=t||{};var n=v.getValue(t.family,r);var i=v.getValue(t.size,r);var o=v.getValue(t.color,r);return{family:v.coerceString(e.family,n,a.family),size:v.coerceNumber(e.size,i,a.size),color:v.coerceColor(e.color,o,a.color)}}function M(e,t){if(t.type==="waterfall"){return t[e.dir].marker.color}return e.mcc||e.mc||t.marker.color}t.exports={style:p,styleTextPoints:m,styleOnSelect:g,getInsideTextFont:w,getOutsideTextFont:T,getBarColor:M,resizeText:i}},{"../../components/color":100,"../../components/drawing":122,"../../lib":230,"../../registry":313,"./attributes":323,"./helpers":329,"./uniform_text":339,"@plotly/d3":11}],338:[function(e,t,r){"use strict";var l=e("../../components/color");var u=e("../../components/colorscale/helpers").hasColorscale;var c=e("../../components/colorscale/defaults");var f=e("../../lib").coercePattern;t.exports=function e(t,r,a,n,i){var o=a("marker.color",n);var s=u(t,"marker");if(s){c(t,r,i,a,{prefix:"marker.",cLetter:"c"})}a("marker.line.color",l.defaultLine);if(u(t,"marker.line")){c(t,r,i,a,{prefix:"marker.line.",cLetter:"c"})}a("marker.line.width");a("marker.opacity");f(a,"marker.pattern",o,s);a("selected.marker.color");a("unselected.marker.color")}},{"../../components/color":100,"../../components/colorscale/defaults":110,"../../components/colorscale/helpers":111,"../../lib":230}],339:[function(e,t,r){"use strict";var s=e("@plotly/d3");var l=e("../../lib");function a(e,t,r){var a=e._fullLayout;var n=a["_"+r+"Text_minsize"];if(n){var i=a.uniformtext.mode==="hide";var o;switch(r){case"funnelarea":case"pie":case"sunburst":o="g.slice";break;case"treemap":case"icicle":o="g.slice, g.pathbar";break;default:o="g.points > g.point"}t.selectAll(o).each(function(e){var t=e.transform;if(t){t.scale=i&&t.hide?0:n/t.fontSize;var r=s.select(this).select("text");r.attr("transform",l.getTextTransform(t))}})}}function n(e,t,r){if(r.uniformtext.mode){var a=o(e);var n=r.uniformtext.minsize;var i=t.scale*t.fontSize;t.hide=i<n;r[a]=r[a]||Infinity;if(!t.hide){r[a]=Math.min(r[a],Math.max(i,n))}}}function i(e,t){var r=o(e);t[r]=undefined}function o(e){return"_"+e+"Text_minsize"}t.exports={recordMinTextSize:n,clearMinTextSize:i,resizeText:a}},{"../../lib":230,"@plotly/d3":11}],340:[function(e,t,r){"use strict";var a=e("../../plots/attributes");var n=e("../../plots/domain").attributes;var i=e("../../plots/font_attributes");var o=e("../../components/color/attributes");var s=e("../../plots/template_attributes").hovertemplateAttrs;var l=e("../../plots/template_attributes").texttemplateAttrs;var u=e("../../lib/extend").extendFlat;var c=i({editType:"plot",arrayOk:true,colorEditType:"plot"});t.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:true,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:true,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:true,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:u({},a.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:s({},{keys:["label","color","value","percent","text"]}),texttemplate:l({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:true,editType:"plot"},textfont:u({},c,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:u({},c,{}),outsidetextfont:u({},c,{}),automargin:{valType:"boolean",dflt:false,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:u({},c,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:n({name:"pie",trace:true,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:true,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:true,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:u({},c,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":99,"../../lib/extend":224,"../../plots/attributes":272,"../../plots/domain":304,"../../plots/font_attributes":305,"../../plots/template_attributes":312}],341:[function(e,t,n){"use strict";var i=e("../../plots/plots");n.name="pie";n.plot=function(e,t,r,a){i.plotBasePlot(n.name,e,t,r,a)};n.clean=function(e,t,r,a){i.cleanBasePlot(n.name,e,t,r,a)}},{"../../plots/plots":311}],342:[function(e,t,r){"use strict";var _=e("fast-isnumeric");var i=e("tinycolor2");var n=e("../../components/color");var v={};function a(e,t){var r=[];var a=e._fullLayout;var n=a.hiddenlabels||[];var i=t.labels;var o=t.marker.colors||[];var s=t.values;var l=t._length;var u=t._hasValues&&l;var c,f;if(t.dlabel){i=new Array(l);for(c=0;c<l;c++){i[c]=String(t.label0+c*t.dlabel)}}var d={};var v=w(a["_"+t.type+"colormap"]);var p=0;var h=false;for(c=0;c<l;c++){var m,g,y;if(u){m=s[c];if(!_(m))continue;m=+m;if(m<0)continue}else m=1;g=i[c];if(g===undefined||g==="")g=c;g=String(g);var x=d[g];if(x===undefined){d[g]=r.length;y=n.indexOf(g)!==-1;if(!y)p+=m;r.push({v:m,label:g,color:v(o[c],g),i:c,pts:[c],hidden:y})}else{h=true;f=r[x];f.v+=m;f.pts.push(c);if(!f.hidden)p+=m;if(f.color===false&&o[c]){f.color=v(o[c],g)}}}var b=t.type==="funnelarea"?h:t.sort;if(b)r.sort(function(e,t){return t.v-e.v});if(r[0])r[0].vTotal=p;return r}function w(a){return function e(t,r){if(!t)return false;t=i(t);if(!t.isValid())return false;t=n.addOpacity(t,t.getAlpha());if(!a[r])a[r]=t;return t}}function o(e,t){var r=(t||{}).type;if(!r)r="pie";var a=e._fullLayout;var n=e.calcdata;var i=a[r+"colorway"];var o=a["_"+r+"colormap"];if(a["extend"+r+"colors"]){i=p(i,v)}var s=0;for(var l=0;l<n.length;l++){var u=n[l];var c=u[0].trace.type;if(c!==r)continue;for(var f=0;f<u.length;f++){var d=u[f];if(d.color===false){if(o[d.label]){d.color=o[d.label]}else{o[d.label]=d.color=i[s%i.length];s++}}}}}function p(e,t){var r;var a=JSON.stringify(e);var n=t[a];if(!n){n=e.slice();for(r=0;r<e.length;r++){n.push(i(e[r]).lighten(20).toHexString())}for(r=0;r<e.length;r++){n.push(i(e[r]).darken(20).toHexString())}t[a]=n}return n}t.exports={calc:a,crossTraceCalc:o,makePullColorFn:w,generateExtendedColors:p}},{"../../components/color":100,"fast-isnumeric":15,tinycolor2:65}],343:[function(e,t,r){"use strict";var l=e("fast-isnumeric");var x=e("../../lib");var b=e("./attributes");var _=e("../../plots/domain").defaults;var w=e("../bar/defaults").handleText;function T(e,t){var r=Array.isArray(e);var a=x.isArrayOrTypedArray(t);var n=Math.min(r?e.length:Infinity,a?t.length:Infinity);if(!isFinite(n))n=0;if(n&&a){var i;for(var o=0;o<n;o++){var s=t[o];if(l(s)&&s>0){i=true;break}}if(!i)n=0}return{hasLabels:r,hasValues:a,len:n}}function a(r,a,e,t){function n(e,t){return x.coerce(r,a,b,e,t)}var i=n("labels");var o=n("values");var s=T(i,o);var l=s.len;a._hasLabels=s.hasLabels;a._hasValues=s.hasValues;if(!a._hasLabels&&a._hasValues){n("label0");n("dlabel")}if(!l){a.visible=false;return}a._length=l;var u=n("marker.line.width");if(u)n("marker.line.color");n("marker.colors");n("scalegroup");var c=n("text");var f=n("texttemplate");var d;if(!f)d=n("textinfo",Array.isArray(c)?"text+percent":"percent");n("hovertext");n("hovertemplate");if(f||d&&d!=="none"){var v=n("textposition");w(r,a,t,n,v,{moduleHasSelected:false,moduleHasUnselected:false,moduleHasConstrain:false,moduleHasCliponaxis:false,moduleHasTextangle:false,moduleHasInsideanchor:false});var p=Array.isArray(v)||v==="auto";var h=p||v==="outside";if(h){n("automargin")}if(v==="inside"||v==="auto"||Array.isArray(v)){n("insidetextorientation")}}_(a,t,n);var m=n("hole");var g=n("title.text");if(g){var y=n("title.position",m?"middle center":"top center");if(!m&&y==="middle center")a.title.position="top center";x.coerceFont(n,"title.font",t.font)}n("sort");n("direction");n("rotation");n("pull")}t.exports={handleLabelsAndValues:T,supplyDefaults:a}},{"../../lib":230,"../../plots/domain":304,"../bar/defaults":327,"./attributes":340,"fast-isnumeric":15}],344:[function(e,t,r){"use strict";var n=e("../../components/fx/helpers").appendArrayMultiPointValues;t.exports=function e(t,r){var a={curveNumber:r.index,pointNumbers:t.pts,data:r._input,fullData:r,label:t.label,color:t.color,value:t.v,percent:t.percent,text:t.text,v:t.v};if(t.pts.length===1)a.pointNumber=a.i=t.pts[0];n(a,r,t.pts);if(r.type==="funnelarea"){delete a.v;delete a.i}return a}},{"../../components/fx/helpers":136}],345:[function(e,t,a){"use strict";var n=e("../../lib");function i(e){return e.indexOf("e")!==-1?e.replace(/[.]?0+e/,"e"):e.indexOf(".")!==-1?e.replace(/[.]?0+$/,""):e}a.formatPiePercent=function e(t,r){var a=i((t*100).toPrecision(3));return n.numSeparate(a,r)+"%"};a.formatPieValue=function e(t,r){var a=i(t.toPrecision(10));return n.numSeparate(a,r)};a.getFirstFilled=function e(t,r){if(!Array.isArray(t))return;for(var a=0;a<r.length;a++){var n=t[r[a]];if(n||n===0||n==="")return n}};a.castOption=function e(t,r){if(Array.isArray(t))return a.getFirstFilled(t,r);else if(t)return t};a.getRotationAngle=function(e){return(e==="auto"?0:e)*Math.PI/180}},{"../../lib":230}],346:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,supplyLayoutDefaults:e("./layout_defaults"),layoutAttributes:e("./layout_attributes"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style"),styleOne:e("./style_one"),moduleType:"trace",name:"pie",basePlotModule:e("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":340,"./base_plot":341,"./calc":342,"./defaults":343,"./layout_attributes":347,"./layout_defaults":348,"./plot":349,"./style":350,"./style_one":351}],347:[function(e,t,r){"use strict";t.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:true,editType:"calc"}}},{}],348:[function(e,t,r){"use strict";var n=e("../../lib");var i=e("./layout_attributes");t.exports=function e(r,a){function t(e,t){return n.coerce(r,a,i,e,t)}t("hiddenlabels");t("piecolorway",a.colorway);t("extendpiecolors")}},{"../../lib":230,"./layout_attributes":347}],349:[function(e,t,r){"use strict";var _=e("@plotly/d3");var c=e("../../plots/plots");var g=e("../../components/fx");var f=e("../../components/color");var w=e("../../components/drawing");var T=e("../../lib");var d=T.strScale;var v=T.strTranslate;var k=e("../../lib/svg_text_utils");var a=e("../bar/uniform_text");var M=a.recordMinTextSize;var n=a.clearMinTextSize;var s=e("../bar/constants").TEXTPAD;var A=e("./helpers");var y=e("./event_data");var b=e("../../lib").isValidTextValue;function i(x,e){var b=x._fullLayout;var u=b._size;n("pie",b);o(e,x);H(e,u);var t=T.makeTraceGroups(b._pielayer,e,"trace").each(function(m){var l=_.select(this);var g=m[0];var y=g.trace;q(m);l.attr("stroke-linejoin","round");l.each(function(){var e=_.select(this).selectAll("g.slice").data(m);e.enter().append("g").classed("slice",true);e.exit().remove();var p=[[[],[]],[[],[]]];var h=false;e.each(function(l,u){if(l.hidden){_.select(this).selectAll("path,g").remove();return}l.pointNumber=l.i;l.curveNumber=y.index;p[l.pxmid[1]<0?0:1][l.pxmid[0]<0?0:1].push(l);var c=g.cx;var f=g.cy;var e=_.select(this);var t=e.selectAll("path.surface").data([l]);t.enter().append("path").classed("surface",true).style({"pointer-events":"all"});e.call(E,x,m);if(y.pull){var r=+A.castOption(y.pull,l.pts)||0;if(r>0){c+=r*l.pxmid[0];f+=r*l.pxmid[1]}}l.cxFinal=c;l.cyFinal=f;function a(e,t,r,a){var n=a*(t[0]-e[0]);var i=a*(t[1]-e[1]);return"a"+a*g.r+","+a*g.r+" 0 "+l.largeArc+(r?" 1 ":" 0 ")+n+","+i}var n=y.hole;if(l.v===g.vTotal){var i="M"+(c+l.px0[0])+","+(f+l.px0[1])+a(l.px0,l.pxmid,true,1)+a(l.pxmid,l.px0,true,1)+"Z";if(n){t.attr("d","M"+(c+n*l.px0[0])+","+(f+n*l.px0[1])+a(l.px0,l.pxmid,false,n)+a(l.pxmid,l.px0,false,n)+"Z"+i)}else t.attr("d",i)}else{var o=a(l.px0,l.px1,true,1);if(n){var s=1-n;t.attr("d","M"+(c+n*l.px1[0])+","+(f+n*l.px1[1])+a(l.px1,l.px0,false,n)+"l"+s*l.px0[0]+","+s*l.px0[1]+o+"Z")}else{t.attr("d","M"+c+","+f+"l"+l.px0[0]+","+l.px0[1]+o+"Z")}}Y(x,l,g);var d=A.castOption(y.textposition,l.pts);var v=e.selectAll("g.slicetext").data(l.text&&d!=="none"?[0]:[]);v.enter().append("g").classed("slicetext",true);v.exit().remove();v.each(function(){var e=T.ensureSingle(_.select(this),"text","",function(e){e.attr("data-notex",1)});var t=T.ensureUniformFontSize(x,d==="outside"?L(y,l,b.font):C(y,l,b.font));e.text(l.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(w.font,t).call(k.convertToTspans,x);var r=w.bBox(e.node());var a;if(d==="outside"){a=R(r,l)}else{a=D(r,l,g);if(d==="auto"&&a.scale<1){var n=T.ensureUniformFontSize(x,y.outsidetextfont);e.call(w.font,n);r=w.bBox(e.node());a=R(r,l)}}var i=a.textPosAngle;var o=i===undefined?l.pxmid:U(g.r,i);a.targetX=c+o[0]*a.rCenter+(a.x||0);a.targetY=f+o[1]*a.rCenter+(a.y||0);V(a,r);if(a.outside){var s=a.targetY;l.yLabelMin=s-r.height/2;l.yLabelMid=s;l.yLabelMax=s+r.height/2;l.labelExtraX=0;l.labelExtraY=0;h=true}a.fontSize=t.size;M(y.type,a,b);m[u].transform=a;e.attr("transform",T.getTextTransform(a))})});var t=_.select(this).selectAll("g.titletext").data(y.title.text?[0]:[]);t.enter().append("g").classed("titletext",true);t.exit().remove();t.each(function(){var e=T.ensureSingle(_.select(this),"text","",function(e){e.attr("data-notex",1)});var t=y.title.text;if(y._meta){t=T.templateString(t,y._meta)}e.text(t).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(w.font,y.title.font).call(k.convertToTspans,x);var r;if(y.title.position==="middle center"){r=N(g)}else{r=z(g,u)}e.attr("transform",v(r.x,r.y)+d(Math.min(1,r.scale))+v(r.tx,r.ty))});if(h)j(p,y);S(e,y);if(h&&y.automargin){var r=w.bBox(l.node());var a=y.domain;var n=u.w*(a.x[1]-a.x[0]);var i=u.h*(a.y[1]-a.y[0]);var o=(.5*n-g.r)/u.w;var s=(.5*i-g.r)/u.h;c.autoMargin(x,"pie."+y.uid+".automargin",{xl:a.x[0]-o,xr:a.x[1]+o,yb:a.y[0]-s,yt:a.y[1]+s,l:Math.max(g.cx-g.r-r.left,0),r:Math.max(r.right-(g.cx+g.r),0),b:Math.max(r.bottom-(g.cy+g.r),0),t:Math.max(g.cy-g.r-r.top,0),pad:5})}})});setTimeout(function(){t.selectAll("tspan").each(function(){var e=_.select(this);if(e.attr("dy"))e.attr("dy",e.attr("dy"))})},0)}function S(e,u){e.each(function(e){var t=_.select(this);if(!e.labelExtraX&&!e.labelExtraY){t.select("path.textline").remove();return}var r=t.select("g.slicetext text");e.transform.targetX+=e.labelExtraX;e.transform.targetY+=e.labelExtraY;r.attr("transform",T.getTextTransform(e.transform));var a=e.cxFinal+e.pxmid[0];var n=e.cyFinal+e.pxmid[1];var i="M"+a+","+n;var o=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4;if(e.labelExtraX){var s=e.labelExtraX*e.pxmid[1]/e.pxmid[0];var l=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]);if(Math.abs(s)>Math.abs(l)){i+="l"+l*e.pxmid[0]/e.pxmid[1]+","+l+"H"+(a+e.labelExtraX+o)}else{i+="l"+e.labelExtraX+","+s+"v"+(l-s)+"h"+o}}else{i+="V"+(e.yLabelMid+e.labelExtraY)+"h"+o}T.ensureSingle(t,"path","textline").call(f.stroke,u.outsidetextfont.color).attr({"stroke-width":Math.min(2,u.outsidetextfont.size/8),d:i,fill:"none"})})}function E(e,d,t){var v=t[0];var p=v.trace;var h=v.cx;var m=v.cy;if(!("_hasHoverLabel"in p))p._hasHoverLabel=false;if(!("_hasHoverEvent"in p))p._hasHoverEvent=false;e.on("mouseover",function(e){var t=d._fullLayout;var r=d._fullData[p.index];if(d._dragging||t.hovermode===false)return;var a=r.hoverinfo;if(Array.isArray(a)){a=g.castHoverinfo({hoverinfo:[A.castOption(a,e.pts)],_module:p._module},t,0)}if(a==="all")a="label+text+value+percent+name";if(r.hovertemplate||a!=="none"&&a!=="skip"&&a){var n=e.rInscribed||0;var i=h+e.pxmid[0]*(1-n);var o=m+e.pxmid[1]*(1-n);var s=t.separators;var l=[];if(a&&a.indexOf("label")!==-1)l.push(e.label);e.text=A.castOption(r.hovertext||r.text,e.pts);if(a&&a.indexOf("text")!==-1){var u=e.text;if(T.isValidTextValue(u))l.push(u)}e.value=e.v;e.valueLabel=A.formatPieValue(e.v,s);if(a&&a.indexOf("value")!==-1)l.push(e.valueLabel);e.percent=e.v/v.vTotal;e.percentLabel=A.formatPiePercent(e.percent,s);if(a&&a.indexOf("percent")!==-1)l.push(e.percentLabel);var c=r.hoverlabel;var f=c.font;g.loneHover({trace:p,x0:i-n*v.r,x1:i+n*v.r,y:o,text:l.join("<br>"),name:r.hovertemplate||a.indexOf("name")!==-1?r.name:undefined,idealAlign:e.pxmid[0]<0?"left":"right",color:A.castOption(c.bgcolor,e.pts)||e.color,borderColor:A.castOption(c.bordercolor,e.pts),fontFamily:A.castOption(f.family,e.pts),fontSize:A.castOption(f.size,e.pts),fontColor:A.castOption(f.color,e.pts),nameLength:A.castOption(c.namelength,e.pts),textAlign:A.castOption(c.align,e.pts),hovertemplate:A.castOption(r.hovertemplate,e.pts),hovertemplateLabels:e,eventData:[y(e,r)]},{container:t._hoverlayer.node(),outerContainer:t._paper.node(),gd:d});p._hasHoverLabel=true}p._hasHoverEvent=true;d.emit("plotly_hover",{points:[y(e,r)],event:_.event})});e.on("mouseout",function(e){var t=d._fullLayout;var r=d._fullData[p.index];var a=_.select(this).datum();if(p._hasHoverEvent){e.originalEvent=_.event;d.emit("plotly_unhover",{points:[y(a,r)],event:_.event});p._hasHoverEvent=false}if(p._hasHoverLabel){g.loneUnhover(t._hoverlayer.node());p._hasHoverLabel=false}});e.on("click",function(e){var t=d._fullLayout;var r=d._fullData[p.index];if(d._dragging||t.hovermode===false)return;d._hoverdata=[y(e,r)];g.click(d,_.event)})}function L(e,t,r){var a=A.castOption(e.outsidetextfont.color,t.pts)||A.castOption(e.textfont.color,t.pts)||r.color;var n=A.castOption(e.outsidetextfont.family,t.pts)||A.castOption(e.textfont.family,t.pts)||r.family;var i=A.castOption(e.outsidetextfont.size,t.pts)||A.castOption(e.textfont.size,t.pts)||r.size;return{color:a,family:n,size:i}}function C(e,t,r){var a=A.castOption(e.insidetextfont.color,t.pts);if(!a&&e._input.textfont){a=A.castOption(e._input.textfont.color,t.pts)}var n=A.castOption(e.insidetextfont.family,t.pts)||A.castOption(e.textfont.family,t.pts)||r.family;var i=A.castOption(e.insidetextfont.size,t.pts)||A.castOption(e.textfont.size,t.pts)||r.size;return{color:a||f.contrast(t.color),family:n,size:i}}function o(e,t){var r,a;for(var n=0;n<e.length;n++){r=e[n][0];a=r.trace;if(a.title.text){var i=a.title.text;if(a._meta){i=T.templateString(i,a._meta)}var o=w.tester.append("text").attr("data-notex",1).text(i).call(w.font,a.title.font).call(k.convertToTspans,t);var s=w.bBox(o.node(),true);r.titleBox={width:s.width,height:s.height};o.remove()}}}function D(i,o,e){var s=e.r||o.rpx1;var t=o.rInscribed;var r=o.startangle===o.stopangle;if(r){return{rCenter:1-t,scale:0,rotate:0,textPosAngle:0}}var l=o.ring;var a=l===1&&Math.abs(o.startangle-o.stopangle)===Math.PI*2;var n=o.halfangle;var u=o.midangle;var c=e.trace.insidetextorientation;var f=c==="horizontal";var d=c==="tangential";var v=c==="radial";var p=c==="auto";var h=[];var m;if(!p){var g=function(e,t){if(O(o,e)){var r=Math.abs(e-o.startangle);var a=Math.abs(e-o.stopangle);var n=r<a?r:a;if(t==="tan"){m=P(i,s,l,n,0)}else{m=I(i,s,l,n,Math.PI/2)}m.textPosAngle=e;h.push(m)}};var y;if(f||d){for(y=4;y>=-4;y-=2)g(Math.PI*y,"tan");for(y=4;y>=-4;y-=2)g(Math.PI*(y+1),"tan")}if(f||v){for(y=4;y>=-4;y-=2)g(Math.PI*(y+1.5),"rad");for(y=4;y>=-4;y-=2)g(Math.PI*(y+.5),"rad")}}if(a||p||f){var x=Math.sqrt(i.width*i.width+i.height*i.height);m={scale:t*s*2/x,rCenter:1-t,rotate:0};m.textPosAngle=(o.startangle+o.stopangle)/2;if(m.scale>=1)return m;h.push(m)}if(p||v){m=I(i,s,l,n,u);m.textPosAngle=(o.startangle+o.stopangle)/2;h.push(m)}if(p||d){m=P(i,s,l,n,u);m.textPosAngle=(o.startangle+o.stopangle)/2;h.push(m)}var b=0;var _=0;for(var w=0;w<h.length;w++){var T=h[w].scale;if(_<T){_=T;b=w}if(!p&&_>=1){break}}return h[b]}function O(e,t){var r=e.startangle;var a=e.stopangle;return r>t&&t>a||r<t&&t<a}function I(e,t,r,a,n){t=Math.max(0,t-2*s);var i=e.width/e.height;var o=p(i,a,t,r);return{scale:o*2/e.height,rCenter:l(i,o/t),rotate:u(n)}}function P(e,t,r,a,n){t=Math.max(0,t-2*s);var i=e.height/e.width;var o=p(i,a,t,r);return{scale:o*2/e.width,rCenter:l(i,o/t),rotate:u(n+Math.PI/2)}}function l(e,t){return Math.cos(t)-e*t}function u(e){return(180/Math.PI*e+720)%180-90}function p(e,t,r,a){var n=e+1/(2*Math.tan(t));return r*Math.min(1/(Math.sqrt(n*n+.5)+n),a/(Math.sqrt(e*e+a/2)+e))}function h(e,t){if(e.v===t.vTotal&&!t.trace.hole)return 1;return Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2)}function R(e,t){var r=t.pxmid[0];var a=t.pxmid[1];var n=e.width/2;var i=e.height/2;if(r<0)n*=-1;if(a<0)i*=-1;return{scale:1,rCenter:1,rotate:0,x:n+Math.abs(i)*(n>0?1:-1)/2,y:i/(1+r*r/(a*a)),outside:true}}function N(e){var t=Math.sqrt(e.titleBox.width*e.titleBox.width+e.titleBox.height*e.titleBox.height);return{x:e.cx,y:e.cy,scale:e.trace.hole*e.r*2/t,tx:0,ty:-e.titleBox.height/2+e.trace.title.font.size}}function z(e,t){var r=1;var a=1;var n;var i=e.trace;var o={x:e.cx,y:e.cy};var s={tx:0,ty:0};s.ty+=i.title.font.size;n=F(i);if(i.title.position.indexOf("top")!==-1){o.y-=(1+n)*e.r;s.ty-=e.titleBox.height}else if(i.title.position.indexOf("bottom")!==-1){o.y+=(1+n)*e.r}var l=m(e.r,e.trace.aspectratio);var u=t.w*(i.domain.x[1]-i.domain.x[0])/2;if(i.title.position.indexOf("left")!==-1){u=u+l;o.x-=(1+n)*l;s.tx+=e.titleBox.width/2}else if(i.title.position.indexOf("center")!==-1){u*=2}else if(i.title.position.indexOf("right")!==-1){u=u+l;o.x+=(1+n)*l;s.tx-=e.titleBox.width/2}r=u/e.titleBox.width;a=x(e,t)/e.titleBox.height;return{x:o.x,y:o.y,scale:Math.min(r,a),tx:s.tx,ty:s.ty}}function m(e,t){return e/(t===undefined?1:t)}function x(e,t){var r=e.trace;var a=t.h*(r.domain.y[1]-r.domain.y[0]);return Math.min(e.titleBox.height,a/2)}function F(e){var t=e.pull;if(!t)return 0;var r;if(Array.isArray(t)){t=0;for(r=0;r<e.pull.length;r++){if(e.pull[r]>t)t=e.pull[r]}}return t}function j(e,v){var t,p,r,h,m,g,y,a,n,x,i,o,s;function l(e,t){return e.pxmid[1]-t.pxmid[1]}function u(e,t){return t.pxmid[1]-e.pxmid[1]}function c(e,t){if(!t)t={};var r=t.labelExtraY+(p?t.yLabelMax:t.yLabelMin);var a=p?e.yLabelMin:e.yLabelMax;var n=p?e.yLabelMax:e.yLabelMin;var i=e.cyFinal+m(e.px0[1],e.px1[1]);var o=r-a;var s,l,u,c,f,d;if(o*y>0)e.labelExtraY=o;if(!Array.isArray(v.pull))return;for(l=0;l<x.length;l++){u=x[l];if(u===e||(A.castOption(v.pull,e.pts)||0)>=(A.castOption(v.pull,u.pts)||0)){continue}if((e.pxmid[1]-u.pxmid[1])*y>0){c=u.cyFinal+m(u.px0[1],u.px1[1]);o=c-a-e.labelExtraY;if(o*y>0)e.labelExtraY+=o}else if((n+e.labelExtraY-i)*y>0){s=3*g*Math.abs(l-x.indexOf(e));f=u.cxFinal+h(u.px0[0],u.px1[0]);d=f+s-(e.cxFinal+e.pxmid[0])-e.labelExtraX;if(d*g>0)e.labelExtraX+=d}}}for(p=0;p<2;p++){r=p?l:u;m=p?Math.max:Math.min;y=p?1:-1;for(t=0;t<2;t++){h=t?Math.max:Math.min;g=t?1:-1;a=e[p][t];a.sort(r);n=e[1-p][t];x=n.concat(a);o=[];for(i=0;i<a.length;i++){if(a[i].yLabelMid!==undefined)o.push(a[i])}s=false;for(i=0;p&&i<n.length;i++){if(n[i].yLabelMid!==undefined){s=n[i];break}}for(i=0;i<o.length;i++){var f=i&&o[i-1];if(s&&!i)f=s;c(o[i],f)}}}}function H(e,t){var r=[];for(var a=0;a<e.length;a++){var n=e[a][0];var i=n.trace;var o=i.domain;var s=t.w*(o.x[1]-o.x[0]);var l=t.h*(o.y[1]-o.y[0]);if(i.title.text&&i.title.position!=="middle center"){l-=x(n,t)}var u=s/2;var c=l/2;if(i.type==="funnelarea"&&!i.scalegroup){c/=i.aspectratio}n.r=Math.min(u,c)/(1+F(i));n.cx=t.l+t.w*(i.domain.x[1]+i.domain.x[0])/2;n.cy=t.t+t.h*(1-i.domain.y[0])-l/2;if(i.title.text&&i.title.position.indexOf("bottom")!==-1){n.cy-=x(n,t)}if(i.scalegroup&&r.indexOf(i.scalegroup)===-1){r.push(i.scalegroup)}}B(e,r)}function B(e,t){var r,a,n;for(var i=0;i<t.length;i++){var o=Infinity;var s=t[i];for(a=0;a<e.length;a++){r=e[a][0];n=r.trace;if(n.scalegroup===s){var l;if(n.type==="pie"){l=r.r*r.r}else if(n.type==="funnelarea"){var u,c;if(n.aspectratio>1){u=r.r;c=u/n.aspectratio}else{c=r.r;u=c*n.aspectratio}u*=(1+n.baseratio)/2;l=u*c}o=Math.min(o,l/r.vTotal)}}for(a=0;a<e.length;a++){r=e[a][0];n=r.trace;if(n.scalegroup===s){var f=o*r.vTotal;if(n.type==="funnelarea"){f/=(1+n.baseratio)/2;f/=n.aspectratio}r.r=Math.sqrt(f)}}}}function q(e){var t=e[0];var r=t.r;var a=t.trace;var n=A.getRotationAngle(a.rotation);var i=2*Math.PI/t.vTotal;var o="px0";var s="px1";var l,u,c;if(a.direction==="counterclockwise"){for(l=0;l<e.length;l++){if(!e[l].hidden)break}if(l===e.length)return;n+=i*e[l].v;i*=-1;o="px1";s="px0"}c=U(r,n);for(l=0;l<e.length;l++){u=e[l];if(u.hidden)continue;u[o]=c;u.startangle=n;n+=i*u.v/2;u.pxmid=U(r,n);u.midangle=n;n+=i*u.v/2;c=U(r,n);u.stopangle=n;u[s]=c;u.largeArc=u.v>t.vTotal/2?1:0;u.halfangle=Math.PI*Math.min(u.v/t.vTotal,.5);u.ring=1-a.hole;u.rInscribed=h(u,t)}}function U(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}function Y(e,t,r){var a=e._fullLayout;var n=r.trace;var i=n.texttemplate;var o=n.textinfo;if(!i&&o&&o!=="none"){var s=o.split("+");var l=function(e){return s.indexOf(e)!==-1};var u=l("label");var c=l("text");var f=l("value");var d=l("percent");var v=a.separators;var p;p=u?[t.label]:[];if(c){var h=A.getFirstFilled(n.text,t.pts);if(b(h))p.push(h)}if(f)p.push(A.formatPieValue(t.v,v));if(d)p.push(A.formatPiePercent(t.v/r.vTotal,v));t.text=p.join("<br>")}function m(e){return{label:e.label,value:e.v,valueLabel:A.formatPieValue(e.v,a.separators),percent:e.v/r.vTotal,percentLabel:A.formatPiePercent(e.v/r.vTotal,a.separators),color:e.color,text:e.text,customdata:T.castOption(n,e.i,"customdata")}}if(i){var g=T.castOption(n,t.i,"texttemplate");if(!g){t.text=""}else{var y=m(t);var x=A.getFirstFilled(n.text,t.pts);if(b(x)||x==="")y.text=x;t.text=T.texttemplateString(g,y,e._fullLayout._d3locale,y,n._meta||{})}}}function V(e,t){var r=e.rotate*Math.PI/180;var a=Math.cos(r);var n=Math.sin(r);var i=(t.left+t.right)/2;var o=(t.top+t.bottom)/2;e.textX=i*a-o*n;e.textY=i*n+o*a;e.noCenter=true}t.exports={plot:i,formatSliceLabel:Y,transformInsideText:D,determineInsideTextFont:C,positionTitleOutside:z,prerenderTitles:o,layoutAreas:H,attachFxHandlers:E,computeTransform:V}},{"../../components/color":100,"../../components/drawing":122,"../../components/fx":140,"../../lib":230,"../../lib/svg_text_utils":252,"../../plots/plots":311,"../bar/constants":325,"../bar/uniform_text":339,"./event_data":344,"./helpers":345,"@plotly/d3":11}],350:[function(e,t,r){"use strict";var n=e("@plotly/d3");var i=e("./style_one");var a=e("../bar/uniform_text").resizeText;t.exports=function e(t){var r=t._fullLayout._pielayer.selectAll(".trace");a(t,r,"pie");r.each(function(e){var t=e[0];var r=t.trace;var a=n.select(this);a.style({opacity:r.opacity});a.selectAll("path.surface").each(function(e){n.select(this).call(i,e,r)})})}},{"../bar/uniform_text":339,"./style_one":351,"@plotly/d3":11}],351:[function(e,t,r){"use strict";var s=e("../../components/color");var l=e("./helpers").castOption;t.exports=function e(t,r,a){var n=a.marker.line;var i=l(n.color,r.pts)||s.defaultLine;var o=l(n.width,r.pts)||0;t.style("stroke-width",o).call(s.fill,r.color).call(s.stroke,i)}},{"../../components/color":100,"./helpers":345}],352:[function(e,t,r){"use strict";var s=e("../../lib");t.exports=function e(t,r){for(var a=0;a<t.length;a++)t[a].i=a;s.mergeArray(r.text,t,"tx");s.mergeArray(r.texttemplate,t,"txt");s.mergeArray(r.hovertext,t,"htx");s.mergeArray(r.customdata,t,"data");s.mergeArray(r.textposition,t,"tp");if(r.textfont){s.mergeArrayCastPositive(r.textfont.size,t,"ts");s.mergeArray(r.textfont.color,t,"tc");s.mergeArray(r.textfont.family,t,"tf")}var n=r.marker;if(n){s.mergeArrayCastPositive(n.size,t,"ms");s.mergeArrayCastPositive(n.opacity,t,"mo");s.mergeArray(n.symbol,t,"mx");s.mergeArray(n.color,t,"mc");var i=n.line;if(n.line){s.mergeArray(i.color,t,"mlc");s.mergeArrayCastPositive(i.width,t,"mlw")}var o=n.gradient;if(o&&o.type!=="none"){s.mergeArray(o.type,t,"mgt");s.mergeArray(o.color,t,"mgc")}}}},{"../../lib":230}],353:[function(e,t,r){"use strict";var a=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var n=e("../../plots/template_attributes").texttemplateAttrs;var i=e("../../plots/template_attributes").hovertemplateAttrs;var o=e("../../components/colorscale/attributes");var s=e("../../plots/font_attributes");var l=e("../../components/drawing/attributes").dash;var u=e("../../components/drawing");var c=e("./constants");var f=e("../../lib/extend").extendFlat;function d(e){return{valType:"any",dflt:0,editType:"calc"}}function v(e){return{valType:"any",editType:"calc"}}function p(e){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:true},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:true},dx:{valType:"number",dflt:1,editType:"calc",anim:true},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:true},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:true},dy:{valType:"number",dflt:1,editType:"calc",anim:true},xperiod:d("x"),yperiod:d("y"),xperiod0:v("x0"),yperiod0:v("y0"),xperiodalignment:p("x"),yperiodalignment:p("y"),xhoverformat:a("x"),yhoverformat:a("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:true,editType:"calc"},texttemplate:n({},{}),hovertext:{valType:"string",dflt:"",arrayOk:true,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:i({},{keys:c.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:true},width:{valType:"number",min:0,dflt:2,editType:"style",anim:true},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:f({},l,{editType:"style"}),simplify:{valType:"boolean",dflt:true,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:false,editType:"calc"},cliponaxis:{valType:"boolean",dflt:true,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:true},marker:f({symbol:{valType:"enumerated",values:u.symbolList,dflt:"circle",arrayOk:true,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:true,editType:"style",anim:true},size:{valType:"number",min:0,dflt:6,arrayOk:true,editType:"calc",anim:true},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:f({width:{valType:"number",min:0,arrayOk:true,editType:"style",anim:true},editType:"calc"},o("marker.line",{anim:true})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:true,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:true,editType:"calc"},editType:"calc"},editType:"calc"},o("marker",{anim:true})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:true,editType:"calc"},textfont:s({editType:"calc",colorEditType:"style",arrayOk:true})}},{"../../components/colorscale/attributes":107,"../../components/drawing":122,"../../components/drawing/attributes":121,"../../lib/extend":224,"../../plots/cartesian/axis_format_attributes":279,"../../plots/font_attributes":305,"../../plots/template_attributes":312,"./constants":357}],354:[function(e,t,r){"use strict";var O=e("fast-isnumeric");var I=e("../../lib");var P=e("../../plots/cartesian/axes");var R=e("../../plots/cartesian/align_period");var N=e("../../constants/numerical").BADNUM;var g=e("./subtypes");var z=e("./colorscale_calc");var F=e("./arrays_to_calcdata");var j=e("./calc_selection");function a(e,t){var r=e._fullLayout;var a=P.getFromId(e,t.xaxis||"x");var n=P.getFromId(e,t.yaxis||"y");var i=a.makeCalcdata(t,"x");var o=n.makeCalcdata(t,"y");var s=R(t,a,"x",i);var l=R(t,n,"y",o);var u=t._length;var c=new Array(u);var f=t.ids;var d=U(t,r,a,n);var v=false;var p,h,m,g,y,x;q(r,t);var b="x";var _="y";var w;if(d){I.pushUnique(d.traceIndices,t._expandedIndex);p=d.orientation==="v";if(p){_="s";w="x"}else{b="s";w="y"}y=d.stackgaps==="interpolate"}else{var T=B(t,u);H(e,t,a,n,s,l,T)}var k=!!t.xperiodalignment;var M=!!t.yperiodalignment;for(h=0;h<u;h++){var A=c[h]={};var S=O(s[h]);var E=O(l[h]);if(S&&E){A[b]=s[h];A[_]=l[h];if(k){A.orig_x=i[h]}if(M){A.orig_y=o[h]}}else if(d&&(p?S:E)){A[w]=p?s[h]:l[h];A.gap=true;if(y){A.s=N;v=true}else{A.s=0}}else{A[b]=A[_]=N}if(f){A.id=String(f[h])}}F(c,t);z(e,t);j(c,t);if(d){h=0;while(h<c.length){if(c[h][w]===N){c.splice(h,1)}else h++}I.sort(c,function(e,t){return e[w]-t[w]||e.i-t.i});if(v){h=0;while(h<c.length-1&&c[h].gap){h++}x=c[h].s;if(!x)x=c[h].s=0;for(m=0;m<h;m++){c[m].s=x}g=c.length-1;while(g>h&&c[g].gap){g--}x=c[g].s;for(m=c.length-1;m>g;m--){c[m].s=x}while(h<g){h++;if(c[h].gap){m=h+1;while(c[m].gap){m++}var L=c[h-1][w];var C=c[h-1].s;var D=(c[m].s-C)/(c[m][w]-L);while(h<m){c[h].s=C+(c[h][w]-L)*D;h++}}}}}return c}function H(e,t,r,a,n,i,o){var s=t._length;var l=e._fullLayout;var u=r._id;var c=a._id;var f=l._firstScatter[y(t)]===t.uid;var d=(U(t,l,r,a)||{}).orientation;var v=t.fill;r._minDtick=0;a._minDtick=0;var p={padded:true};var h={padded:true};if(o){p.ppad=h.ppad=o}var m=s<2||n[0]!==n[s-1]||i[0]!==i[s-1];if(m&&(v==="tozerox"||v==="tonextx"&&(f||d==="h"))){p.tozero=true}else if(!(t.error_y||{}).visible&&(v==="tonexty"||v==="tozeroy"||!g.hasMarkers(t)&&!g.hasText(t))){p.padded=false;p.ppad=0}if(m&&(v==="tozeroy"||v==="tonexty"&&(f||d==="v"))){h.tozero=true}else if(v==="tonextx"||v==="tozerox"){h.padded=false}if(u)t._extremes[u]=P.findExtremes(r,n,p);if(c)t._extremes[c]=P.findExtremes(a,i,h)}function B(e,t){if(!g.hasMarkers(e))return;var r=e.marker;var a=1.6*(e.marker.sizeref||1);var n;if(e.marker.sizemode==="area"){n=function(e){return Math.max(Math.sqrt((e||0)/a),3)}}else{n=function(e){return Math.max((e||0)/a,3)}}if(I.isArrayOrTypedArray(r.size)){var i={type:"linear"};P.setConvert(i);var o=i.makeCalcdata(e.marker,"size");var s=new Array(t);for(var l=0;l<t;l++){s[l]=n(o[l])}return s}else{return n(r.size)}}function q(e,t){var r=y(t);var a=e._firstScatter;if(!a[r])a[r]=t.uid}function y(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function U(e,t,r,a){var n=e.stackgroup;if(!n)return;var i=t._scatterStackOpts[r._id+a._id][n];var o=i.orientation==="v"?a:r;if(o.type==="linear"||o.type==="log")return i}t.exports={calc:a,calcMarkerSize:B,calcAxisExpansion:H,setFirstScatter:q,getStackOpts:U}},{"../../constants/numerical":210,"../../lib":230,"../../plots/cartesian/align_period":273,"../../plots/cartesian/axes":276,"./arrays_to_calcdata":352,"./calc_selection":355,"./colorscale_calc":356,"./subtypes":378,"fast-isnumeric":15}],355:[function(e,t,r){"use strict";var a=e("../../lib");t.exports=function e(t,r){if(a.isArrayOrTypedArray(r.selectedpoints)){a.tagSelected(t,r)}}},{"../../lib":230}],356:[function(e,t,r){"use strict";var a=e("../../components/colorscale/helpers").hasColorscale;var n=e("../../components/colorscale/calc");var i=e("./subtypes");t.exports=function e(t,r){if(i.hasLines(r)&&a(r,"line")){n(t,r,{vals:r.line.color,containerStr:"line",cLetter:"c"})}if(i.hasMarkers(r)){if(a(r,"marker")){n(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"})}if(a(r,"marker.line")){n(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"})}}}},{"../../components/colorscale/calc":108,"../../components/colorscale/helpers":111,"./subtypes":378}],357:[function(e,t,r){"use strict";t.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],358:[function(e,t,r){"use strict";var P=e("./calc");t.exports=function e(t,r){var a=r.xaxis;var n=r.yaxis;var i=a._id+n._id;var o=t._fullLayout._scatterStackOpts[i];if(!o)return;var s=t.calcdata;var l,u,c,f,d,v,p,h,m;var g,y,x,b,_;var w;for(var T in o){g=o[T];var k=g.traceIndices;if(!k.length)continue;y=g.stackgaps==="interpolate";x=g.groupnorm;if(g.orientation==="v"){b="x";_="y"}else{b="y";_="x"}w=new Array(k.length);for(l=0;l<w.length;l++){w[l]=false}v=s[k[0]];var M=new Array(v.length);for(l=0;l<v.length;l++){M[l]=v[l][b]}for(l=1;l<k.length;l++){d=s[k[l]];for(u=c=0;u<d.length;u++){p=d[u][b];for(;p>M[c]&&c<M.length;c++){R(d,u,M[c],l,w,y,b);u++}if(p!==M[c]){for(f=0;f<l;f++){R(s[k[f]],c,p,f,w,y,b)}M.splice(c,0,p)}c++}for(;c<M.length;c++){R(d,u,M[c],l,w,y,b);u++}}var A=M.length;for(u=0;u<v.length;u++){h=v[u][_]=v[u].s;for(l=1;l<k.length;l++){d=s[k[l]];d[0].trace._rawLength=d[0].trace._length;d[0].trace._length=A;h+=d[u].s;d[u][_]=h}if(x){m=(x==="fraction"?h:h/100)||1;for(l=0;l<k.length;l++){var S=s[k[l]][u];S[_]/=m;S.sNorm=S.s/m}}}for(l=0;l<k.length;l++){d=s[k[l]];var E=d[0].trace;var L=P.calcMarkerSize(E,E._rawLength);var C=Array.isArray(L);if(L&&w[l]||C){var D=L;L=new Array(A);for(u=0;u<A;u++){L[u]=d[u].gap?0:C?D[d[u].i]:D}}var O=new Array(A);var I=new Array(A);for(u=0;u<A;u++){O[u]=d[u].x;I[u]=d[u].y}P.calcAxisExpansion(t,E,a,n,O,I,L);d[0].t.orientation=g.orientation}}};function R(e,t,r,a,n,i,o){n[a]=true;var s={i:null,gap:true,s:0};s[o]=r;e.splice(t,0,s);if(t&&r===e[t-1][o]){var l=e[t-1];s.s=l.s;s.i=l.i;s.gap=l.gap}else if(i){s.s=u(e,t,r,o)}if(!t){e[0].t=e[1].t;e[0].trace=e[1].trace;delete e[1].t;delete e[1].trace}}function u(e,t,r,a){var n=e[t-1];var i=e[t+1];if(!i)return n.s;if(!n)return i.s;return n.s+(i.s-n.s)*(r-n[a])/(i[a]-n[a])}},{"./calc":354}],359:[function(e,t,r){"use strict";t.exports=function e(t){for(var r=0;r<t.length;r++){var a=t[r];if(a.type!=="scatter")continue;var n=a.fill;if(n==="none"||n==="toself")continue;a.opacity=undefined;if(n==="tonexty"||n==="tonextx"){for(var i=r-1;i>=0;i--){var o=t[i];if(o.type==="scatter"&&o.xaxis===a.xaxis&&o.yaxis===a.yaxis){o.opacity=undefined;break}}}}}},{}],360:[function(e,t,r){"use strict";var v=e("../../lib");var p=e("../../registry");var h=e("./attributes");var m=e("./constants");var g=e("./subtypes");var y=e("./xy_defaults");var x=e("./period_defaults");var b=e("./stack_defaults");var _=e("./marker_defaults");var w=e("./line_defaults");var T=e("./line_shape_defaults");var k=e("./text_defaults");var M=e("./fillcolor_defaults");t.exports=function e(r,a,t,n){function i(e,t){return v.coerce(r,a,h,e,t)}var o=y(r,a,n,i);if(!o)a.visible=false;if(!a.visible)return;x(r,a,n,i);i("xhoverformat");i("yhoverformat");var s=b(r,a,n,i);var l=!s&&o<m.PTS_LINESONLY?"lines+markers":"lines";i("text");i("hovertext");i("mode",l);if(g.hasLines(a)){w(r,a,t,n,i);T(r,a,i);i("connectgaps");i("line.simplify")}if(g.hasMarkers(a)){_(r,a,t,n,i,{gradient:true})}if(g.hasText(a)){i("texttemplate");k(r,a,n,i)}var u=[];if(g.hasMarkers(a)||g.hasText(a)){i("cliponaxis");i("marker.maxdisplayed");u.push("points")}i("fill",s?s.fillDflt:"none");if(a.fill!=="none"){M(r,a,t,i);if(!g.hasLines(a))T(r,a,i)}var c=(a.line||{}).color;var f=(a.marker||{}).color;if(a.fill==="tonext"||a.fill==="toself"){u.push("fills")}i("hoveron",u.join("+")||"points");if(a.hoveron!=="fills")i("hovertemplate");var d=p.getComponentMethod("errorbars","supplyDefaults");d(r,a,c||f||t,{axis:"y"});d(r,a,c||f||t,{axis:"x",inherit:"y"});v.coerceSelectionMarkerOpacity(a,i)}},{"../../lib":230,"../../registry":313,"./attributes":353,"./constants":357,"./fillcolor_defaults":361,"./line_defaults":366,"./line_shape_defaults":368,"./marker_defaults":372,"./period_defaults":373,"./stack_defaults":376,"./subtypes":378,"./text_defaults":379,"./xy_defaults":380}],361:[function(e,t,r){"use strict";var l=e("../../components/color");var u=e("../../lib").isArrayOrTypedArray;t.exports=function e(t,r,a,n){var i=false;if(r.marker){var o=r.marker.color;var s=(r.marker.line||{}).color;if(o&&!u(o)){i=o}else if(s&&!u(s)){i=s}}n("fillcolor",l.addOpacity((r.line||{}).color||i||a,.5))}},{"../../components/color":100,"../../lib":230}],362:[function(e,t,r){"use strict";var l=e("../../plots/cartesian/axes");t.exports=function e(t,r,a){var n={};var i={_fullLayout:a};var o=l.getFromTrace(i,r,"x");var s=l.getFromTrace(i,r,"y");n.xLabel=l.tickText(o,o.c2l(t.x),true).text;n.yLabel=l.tickText(s,s.c2l(t.y),true).text;return n}},{"../../plots/cartesian/axes":276}],363:[function(e,t,r){"use strict";var s=e("../../components/color");var l=e("./subtypes");t.exports=function e(t,r){var a,n;if(t.mode==="lines"){a=t.line.color;return a&&s.opacity(a)?a:t.fillcolor}else if(t.mode==="none"){return t.fill?t.fillcolor:""}else{var i=r.mcc||(t.marker||{}).color;var o=r.mlcc||((t.marker||{}).line||{}).color;n=i&&s.opacity(i)?i:o&&s.opacity(o)&&(r.mlw||((t.marker||{}).line||{}).width)?o:"";if(n){if(s.opacity(n)<.3){return s.addOpacity(n,.3)}else return n}else{a=(t.line||{}).color;return a&&s.opacity(a)&&l.hasLines(t)&&t.line.width?a:t.fillcolor}}}},{"../../components/color":100,"./subtypes":378}],364:[function(e,t,r){"use strict";var Y=e("../../lib");var V=e("../../components/fx");var G=e("../../registry");var W=e("./get_trace_color");var $=e("../../components/color");var Z=Y.fillText;t.exports=function e(t,r,a,n){var i=t.cd;var o=i[0].trace;var s=t.xa;var l=t.ya;var u=s.c2p(r);var c=l.c2p(a);var f=[u,c];var d=o.hoveron||"";var v=o.mode.indexOf("markers")!==-1?3:.5;if(d.indexOf("points")!==-1){var p=function(e){var t=Math.max(3,e.mrc||0);var r=1-1/t;var a=Math.abs(s.c2p(e.x)-u);if(e.orig_x!==undefined)a+=s.c2p(e.orig_x)-s.c2p(e.x);return a<t?r*a/t:a-t+r};var h=function(e){var t=Math.max(3,e.mrc||0);var r=1-1/t;var a=Math.abs(l.c2p(e.y)-c);if(e.orig_y!==undefined)a+=l.c2p(e.orig_y)-l.c2p(e.y);return a<t?r*a/t:a-t+r};var m=function(e){var t=Math.max(v,e.mrc||0);var r=s.c2p(e.x)-u;var a=l.c2p(e.y)-c;return Math.max(Math.sqrt(r*r+a*a)-t,1-v/t)};var g=V.getDistanceFunction(n,p,h,m);V.getClosest(i,g,t);if(t.index!==false){var y=i[t.index];var x=s.c2p(y.x,true);var b=l.c2p(y.y,true);var _=y.mrc||1;t.index=y.i;var w=i[0].t.orientation;var T=w&&(y.sNorm||y.s);var k=w==="h"?T:y.orig_x!==undefined?y.orig_x:y.x;var M=w==="v"?T:y.orig_y!==undefined?y.orig_y:y.y;Y.extendFlat(t,{color:W(o,y),x0:x-_,x1:x+_,xLabelVal:k,y0:b-_,y1:b+_,yLabelVal:M,spikeDistance:m(y),hovertemplate:o.hovertemplate});Z(y,o,t);G.getComponentMethod("errorbars","hoverInfo")(y,o,t);return[t]}}if(d.indexOf("fills")!==-1&&o._polygons){var A=o._polygons;var S=[];var E=false;var L=Infinity;var C=-Infinity;var D=Infinity;var O=-Infinity;var I,P,R,N,z,F,j,H,B;for(I=0;I<A.length;I++){R=A[I];if(R.contains(f)){E=!E;S.push(R);D=Math.min(D,R.ymin);O=Math.max(O,R.ymax)}}if(E){D=Math.max(D,0);O=Math.min(O,l._length);var q=(D+O)/2;for(I=0;I<S.length;I++){N=S[I].pts;for(P=1;P<N.length;P++){H=N[P-1][1];B=N[P][1];if(H>q!==B>=q){F=N[P-1][0];j=N[P][0];if(B-H){z=F+(j-F)*(q-H)/(B-H);L=Math.min(L,z);C=Math.max(C,z)}}}}L=Math.max(L,0);C=Math.min(C,s._length);var U=$.defaultLine;if($.opacity(o.fillcolor))U=o.fillcolor;else if($.opacity((o.line||{}).color)){U=o.line.color}Y.extendFlat(t,{distance:t.maxHoverDistance,x0:L,x1:C,y0:q,y1:q,color:U,hovertemplate:false});delete t.index;if(o.text&&!Array.isArray(o.text)){t.text=String(o.text)}else t.text=o.name;return[t]}}}},{"../../components/color":100,"../../components/fx":140,"../../lib":230,"../../registry":313,"./get_trace_color":363}],365:[function(e,t,r){"use strict";var a=e("./subtypes");t.exports={hasLines:a.hasLines,hasMarkers:a.hasMarkers,hasText:a.hasText,isBubble:a.isBubble,attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./cross_trace_calc"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot"),colorbar:e("./marker_colorbar"),formatLabels:e("./format_labels"),style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("./select"),animatable:true,moduleType:"trace",name:"scatter",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":290,"./arrays_to_calcdata":352,"./attributes":353,"./calc":354,"./cross_trace_calc":358,"./cross_trace_defaults":359,"./defaults":360,"./format_labels":362,"./hover":364,"./marker_colorbar":371,"./plot":374,"./select":375,"./style":377,"./subtypes":378}],366:[function(e,t,r){"use strict";var u=e("../../lib").isArrayOrTypedArray;var c=e("../../components/colorscale/helpers").hasColorscale;var f=e("../../components/colorscale/defaults");t.exports=function e(t,r,a,n,i,o){var s=(t.marker||{}).color;i("line.color",a);if(c(t,"line")){f(t,r,n,i,{prefix:"line.",cLetter:"c"})}else{var l=(u(s)?false:s)||a;i("line.color",l)}i("line.width");if(!(o||{}).noDash)i("line.dash")}},{"../../components/colorscale/defaults":110,"../../components/colorscale/helpers":111,"../../lib":230}],367:[function(e,t,r){"use strict";var a=e("../../constants/numerical");var ce=a.BADNUM;var n=a.LOG_CLIP;var fe=n+.5;var de=n-.5;var ve=e("../../lib");var pe=ve.segmentsIntersect;var he=ve.constrain;var me=e("./constants");t.exports=function e(n,i){var o=i.xaxis;var s=i.yaxis;var l=o.type==="log";var u=s.type==="log";var c=o._length;var f=s._length;var t=i.connectGaps;var d=i.baseTolerance;var r=i.shape;var a=r==="linear";var v=i.fill&&i.fill!=="none";var p=[];var h=me.minTolerance;var m=n.length;var g=new Array(m);var y=0;var x;var b,_,w,T;var k;var M;var A;var S;var E,L,C,D;var O,I,P;function R(e){var t=n[e];if(!t)return false;var r=i.linearized?o.l2p(t.x):o.c2p(t.x);var a=i.linearized?s.l2p(t.y):s.c2p(t.y);if(r===ce){if(l)r=o.c2p(t.x,true);if(r===ce)return false;if(u&&a===ce){r*=Math.abs(o._m*f*(o._m>0?fe:de)/(s._m*c*(s._m>0?fe:de)))}r*=1e3}if(a===ce){if(u)a=s.c2p(t.y,true);if(a===ce)return false;a*=1e3}return[r,a]}function N(e,t,r,a){var n=r-e;var i=a-t;var o=.5-e;var s=.5-t;var l=n*n+i*i;var u=n*o+i*s;if(u>0&&u<l){var c=o*i-s*n;if(c*c<l)return true}}var z,F;function j(e,t){var r=e[0]/c;var a=e[1]/f;var n=Math.max(0,-r,r-1,-a,a-1);if(n&&z!==undefined&&N(r,a,z,F)){n=0}if(n&&t&&N(r,a,t[0]/c,t[1]/f)){n=0}return(1+me.toleranceGrowth*n)*d}function H(e,t){var r=e[0]-t[0];var a=e[1]-t[1];return Math.sqrt(r*r+a*a)}var B=me.maxScreensAway;var q=-c*B;var U=c*(1+B);var Y=-f*B;var V=f*(1+B);var G=[[q,Y,U,Y],[U,Y,U,V],[U,V,q,V],[q,V,q,Y]];var W,$,Z,X,J,K;function Q(e,t){var r=[];var a=0;for(var n=0;n<4;n++){var i=G[n];var o=pe(e[0],e[1],t[0],t[1],i[0],i[1],i[2],i[3]);if(o&&(!a||Math.abs(o.x-r[0][0])>1||Math.abs(o.y-r[0][1])>1)){o=[o.x,o.y];if(a&&H(o,e)<H(r[0],e))r.unshift(o);else r.push(o);a++}}return r}function ee(e){if(e[0]<q||e[0]>U||e[1]<Y||e[1]>V){return[he(e[0],q,U),he(e[1],Y,V)]}}function te(e,t){if(e[0]===t[0]&&(e[0]===q||e[0]===U))return true;if(e[1]===t[1]&&(e[1]===Y||e[1]===V))return true}function re(e,t){var r=[];var a=ee(e);var n=ee(t);if(a&&n&&te(a,n))return r;if(a)r.push(a);if(n)r.push(n);return r}function ae(s,l,u){return function(e,t){var r=ee(e);var a=ee(t);var n=[];if(r&&a&&te(r,a))return n;if(r)n.push(r);if(a)n.push(a);var i=2*ve.constrain((e[s]+t[s])/2,l,u)-((r||e)[s]+(a||t)[s]);if(i){var o;if(r&&a){o=i>0===r[s]>a[s]?r:a}else o=r||a;o[s]+=i}return n}}var ne;if(r==="linear"||r==="spline"){ne=Q}else if(r==="hv"||r==="vh"){ne=re}else if(r==="hvh")ne=ae(0,q,U);else if(r==="vhv")ne=ae(1,Y,V);function ie(e,t){var r=t[0]-e[0];var a=(t[1]-e[1])/r;var n=(e[1]*t[0]-t[1]*e[0])/r;if(n>0)return[a>0?q:U,V];else return[a>0?U:q,Y]}function oe(e){var t=e[0];var r=e[1];var a=t===g[y-1][0];var n=r===g[y-1][1];if(a&&n)return;if(y>1){var i=t===g[y-2][0];var o=r===g[y-2][1];if(a&&(t===q||t===U)&&i){if(o)y--;else g[y-1]=e}else if(n&&(r===Y||r===V)&&o){if(i)y--;else g[y-1]=e}else g[y++]=e}else g[y++]=e}function se(e){if(g[y-1][0]!==e[0]&&g[y-1][1]!==e[1]){oe([Z,X])}oe(e);J=null;Z=X=0}function le(e){z=e[0]/c;F=e[1]/f;W=e[0]<q?q:e[0]>U?U:0;$=e[1]<Y?Y:e[1]>V?V:0;if(W||$){if(!y){g[y++]=[W||e[0],$||e[1]]}else if(J){var t=ne(J,e);if(t.length>1){se(t[0]);g[y++]=t[1]}}else{K=ne(g[y-1],e)[0];g[y++]=K}var r=g[y-1];if(W&&$&&(r[0]!==W||r[1]!==$)){if(J){if(Z!==W&&X!==$){if(Z&&X){oe(ie(J,e))}else{oe([Z||W,X||$])}}else if(Z&&X){oe([Z,X])}}oe([W,$])}else if(Z-W&&X-$){oe([W||Z,$||X])}J=e;Z=W;X=$}else{if(J){se(ne(J,e)[0])}g[y++]=e}}for(x=0;x<m;x++){b=R(x);if(!b)continue;y=0;J=null;le(b);for(x++;x<m;x++){w=R(x);if(!w){if(t)continue;else break}if(!a||!i.simplify){le(w);continue}var ue=R(x+1);E=H(w,b);if(!(v&&(y===0||y===m-1))&&E<j(w,ue)*h)continue;A=[(w[0]-b[0])/E,(w[1]-b[1])/E];T=b;L=E;C=O=I=0;M=false;_=w;for(x++;x<n.length;x++){k=ue;ue=R(x+1);if(!k){if(t)continue;else break}S=[k[0]-b[0],k[1]-b[1]];P=S[0]*A[1]-S[1]*A[0];O=Math.min(O,P);I=Math.max(I,P);if(I-O>j(k,ue))break;_=k;D=S[0]*A[0]+S[1]*A[1];if(D>L){L=D;w=k;M=false}else if(D<C){C=D;T=k;M=true}}if(M){le(w);if(_!==T)le(T)}else{if(T!==b)le(T);if(_!==w)le(w)}le(_);if(x>=n.length||!k)break;le(k);b=k}if(J)oe([Z||J[0],X||J[1]]);p.push(g.slice(0,y))}return p}},{"../../constants/numerical":210,"../../lib":230,"./constants":357}],368:[function(e,t,r){"use strict";t.exports=function e(t,r,a){var n=a("line.shape");if(n==="spline")a("line.smoothing")}},{}],369:[function(e,t,r){"use strict";var m={tonextx:1,tonexty:1,tonext:1};t.exports=function e(t,r,a){var n,i,o,s,l;var u={};var c=false;var f=-1;var d=0;var v=-1;for(i=0;i<a.length;i++){n=a[i][0].trace;o=n.stackgroup||"";if(o){if(o in u){l=u[o]}else{l=u[o]=d;d++}}else if(n.fill in m&&v>=0){l=v}else{l=v=d;d++}if(l<f)c=true;n._groupIndex=f=l}var p=a.slice();if(c){p.sort(function(e,t){var r=e[0].trace;var a=t[0].trace;return r._groupIndex-a._groupIndex||r.index-a.index})}var h={};for(i=0;i<p.length;i++){n=p[i][0].trace;o=n.stackgroup||"";if(n.visible===true){n._nexttrace=null;if(n.fill in m){s=h[o];n._prevtrace=s||null;if(s){s._nexttrace=n}}n._ownfill=n.fill&&(n.fill.substr(0,6)==="tozero"||n.fill==="toself"||n.fill.substr(0,2)==="to"&&!n._prevtrace);h[o]=n}else{n._prevtrace=n._nexttrace=n._ownfill=null}}return p}},{}],370:[function(e,t,r){"use strict";var o=e("fast-isnumeric");t.exports=function e(t){var r=t.marker;var a=r.sizeref||1;var n=r.sizemin||0;var i=r.sizemode==="area"?function(e){return Math.sqrt(e/a)}:function(e){return e/a};return function(e){var t=i(e/2);return o(t)&&t>0?Math.max(t,n):0}}},{"fast-isnumeric":15}],371:[function(e,t,r){"use strict";t.exports={container:"marker",min:"cmin",max:"cmax"}},{}],372:[function(e,t,r){"use strict";var f=e("../../components/color");var d=e("../../components/colorscale/helpers").hasColorscale;var v=e("../../components/colorscale/defaults");var p=e("./subtypes");t.exports=function e(t,r,a,n,i,o){var s=p.isBubble(t);var l=(t.line||{}).color;var u;o=o||{};if(l)a=l;i("marker.symbol");i("marker.opacity",s?.7:1);i("marker.size");i("marker.color",a);if(d(t,"marker")){v(t,r,n,i,{prefix:"marker.",cLetter:"c"})}if(!o.noSelect){i("selected.marker.color");i("unselected.marker.color");i("selected.marker.size");i("unselected.marker.size")}if(!o.noLine){if(l&&!Array.isArray(l)&&r.marker.color!==l){u=l}else if(s)u=f.background;else u=f.defaultLine;i("marker.line.color",u);if(d(t,"marker.line")){v(t,r,n,i,{prefix:"marker.line.",cLetter:"c"})}i("marker.line.width",s?1:0)}if(s){i("marker.sizeref");i("marker.sizemin");i("marker.sizemode")}if(o.gradient){var c=i("marker.gradient.type");if(c!=="none"){i("marker.gradient.color")}}}},{"../../components/color":100,"../../components/colorscale/defaults":110,"../../components/colorscale/helpers":111,"./subtypes":378}],373:[function(e,t,r){"use strict";var a=e("../../lib").dateTick0;var n=e("../../constants/numerical");var i=n.ONEWEEK;function l(e,t){if(e%i===0){return a(t,1)}return a(t,0)}t.exports=function e(t,r,a,n,i){if(!i){i={x:true,y:true}}if(i.x){var o=n("xperiod");if(o){n("xperiod0",l(o,r.xcalendar));n("xperiodalignment")}}if(i.y){var s=n("yperiod");if(s){n("yperiod0",l(s,r.ycalendar));n("yperiodalignment")}}}},{"../../constants/numerical":210,"../../lib":230}],374:[function(e,t,r){"use strict";var Z=e("@plotly/d3");var X=e("../../registry");var J=e("../../lib");var K=J.ensureSingle;var Q=J.identity;var ee=e("../../components/drawing");var te=e("./subtypes");var re=e("./line_points");var v=e("./link_traces");var ae=e("../../lib/polygon").tester;t.exports=function e(r,a,t,n,i,o){var s,l;var u=!i;var c=!!i&&i.duration>0;var f=v(r,a,t);s=n.selectAll("g.trace").data(f,function(e){return e[0].trace.uid});s.enter().append("g").attr("class",function(e){return"trace scatter trace"+e[0].trace.uid}).style("stroke-miterlimit",2);s.order();p(r,s,a);if(c){if(o){l=o()}var d=Z.transition().duration(i.duration).ease(i.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()});d.each(function(){n.selectAll("g.trace").each(function(e,t){h(r,t,a,e,f,this,i)})})}else{s.each(function(e,t){h(r,t,a,e,f,this,i)})}if(u){s.exit().remove()}n.selectAll("path:not([d])").remove()};function p(i,e,o){e.each(function(e){var t=K(Z.select(this),"g","fills");ee.setClipUrl(t,o.layerClipId,i);var r=e[0].trace;var a=[];if(r._ownfill)a.push("_ownFill");if(r._nexttrace)a.push("_nextFill");var n=t.selectAll("g").data(a,Q);n.enter().append("g");n.exit().each(function(e){r[e]=null}).remove();n.order().each(function(e){r[e]=K(Z.select(this),"path","js-fill")})})}function h(g,e,y,n,t,r,a){var i;ne(g,e,y,n,t);var x=!!a&&a.duration>0;function b(e){return x?e.transition():e}var _=y.xaxis;var w=y.yaxis;var o=n[0].trace;var s=o.line;var l=Z.select(r);var u=K(l,"g","errorbars");var c=K(l,"g","lines");var f=K(l,"g","points");var d=K(l,"g","text");X.getComponentMethod("errorbars","plot")(g,u,y,a);if(o.visible!==true)return;b(l).style("opacity",o.opacity);var v,p;var h=o.fill.charAt(o.fill.length-1);if(h!=="x"&&h!=="y")h="";n[0][y.isRangePlot?"nodeRangePlot3":"node3"]=l;var m="";var T=[];var k=o._prevtrace;if(k){m=k._prevRevpath||"";p=k._nextFill;T=k._polygons}var M;var A;var S="";var E="";var L,C,D;var O,I,P,R;var N=[];var z=J.noop;v=o._ownFill;if(te.hasLines(o)||o.fill!=="none"){if(p){p.datum(n)}if(["hv","vh","hvh","vhv"].indexOf(s.shape)!==-1){L=ee.steps(s.shape);C=ee.steps(s.shape.split("").reverse().join(""))}else if(s.shape==="spline"){L=C=function(e){var t=e[e.length-1];if(e.length>1&&e[0][0]===t[0]&&e[0][1]===t[1]){return ee.smoothclosed(e.slice(1),s.smoothing)}else{return ee.smoothopen(e,s.smoothing)}}}else{L=C=function(e){return"M"+e.join("L")}}D=function(e){return C(e.reverse())};N=re(n,{xaxis:_,yaxis:w,connectGaps:o.connectgaps,baseTolerance:Math.max(s.width||1,3)/4,shape:s.shape,simplify:s.simplify,fill:o.fill});R=o._polygons=new Array(N.length);for(i=0;i<N.length;i++){o._polygons[i]=ae(N[i])}if(N.length){O=N[0][0];I=N[N.length-1];P=I[I.length-1]}z=function(a){return function(e){M=L(e);A=D(e);if(!S){S=M;E=A}else if(h){S+="L"+M.substr(1);E=A+("L"+E.substr(1))}else{S+="Z"+M;E=A+"Z"+E}if(te.hasLines(o)&&e.length>1){var t=Z.select(this);t.datum(n);if(a){b(t.style("opacity",0).attr("d",M).call(ee.lineGroupStyle)).style("opacity",1)}else{var r=b(t);r.attr("d",M);ee.singleLineStyle(n,r)}}}}}var F=c.selectAll(".js-line").data(N);b(F.exit()).style("opacity",0).remove();F.each(z(false));F.enter().append("path").classed("js-line",true).style("vector-effect","non-scaling-stroke").call(ee.lineGroupStyle).each(z(true));ee.setClipUrl(F,y.layerClipId,g);function j(e){b(e).attr("d","M0,0Z")}if(N.length){if(v){v.datum(n);if(O&&P){if(h){if(h==="y"){O[1]=P[1]=w.c2p(0,true)}else if(h==="x"){O[0]=P[0]=_.c2p(0,true)}b(v).attr("d","M"+P+"L"+O+"L"+S.substr(1)).call(ee.singleFillStyle)}else{b(v).attr("d",S+"Z").call(ee.singleFillStyle)}}}else if(p){if(o.fill.substr(0,6)==="tonext"&&S&&m){if(o.fill==="tonext"){b(p).attr("d",S+"Z"+m+"Z").call(ee.singleFillStyle)}else{b(p).attr("d",S+"L"+m.substr(1)+"Z").call(ee.singleFillStyle)}o._polygons=o._polygons.concat(T)}else{j(p);o._polygons=null}}o._prevRevpath=E;o._prevPolygons=R}else{if(v)j(v);else if(p)j(p);o._polygons=o._prevRevpath=o._prevPolygons=null}function H(e){return e.filter(function(e){return!e.gap&&e.vis})}function B(e){return e.filter(function(e){return e.vis})}function q(e){return e.filter(function(e){return!e.gap})}function U(e){return e.id}function Y(e){if(e.ids){return U}}function V(){return false}function G(e,t,r){var a,n,i;var o=r[0].trace;var s=te.hasMarkers(o);var l=te.hasText(o);var u=Y(o);var c=V;var f=V;if(s||l){var d=Q;var v=o.stackgroup;var p=v&&g._fullLayout._scatterStackOpts[_._id+w._id][v].stackgaps==="infer zero";if(o.marker.maxdisplayed||o._needsCull){d=p?B:H}else if(v&&!p){d=q}if(s)c=d;if(l)f=d}n=e.selectAll("path.point");a=n.data(c,u);var h=a.enter().append("path").classed("point",true);if(x){h.call(ee.pointStyle,o,g).call(ee.translatePoints,_,w).style("opacity",0).transition().style("opacity",1)}a.order();var m;if(s){m=ee.makePointStyleFns(o)}a.each(function(e){var t=Z.select(this);var r=b(t);i=ee.translatePoint(e,r,_,w);if(i){ee.singlePointStyle(e,r,o,m,g);if(y.layerClipId){ee.hideOutsideRangePoint(e,r,_,w,o.xcalendar,o.ycalendar)}if(o.customdata){t.classed("plotly-customdata",e.data!==null&&e.data!==undefined)}}else{r.remove()}});if(x){a.exit().transition().style("opacity",0).remove()}else{a.exit().remove()}n=t.selectAll("g");a=n.data(f,u);a.enter().append("g").classed("textpoint",true).append("text");a.order();a.each(function(e){var t=Z.select(this);var r=b(t.select("text"));i=ee.translatePoint(e,r,_,w);if(i){if(y.layerClipId){ee.hideOutsideRangePoint(e,t,_,w,o.xcalendar,o.ycalendar)}}else{t.remove()}});a.selectAll("text").call(ee.textPointStyle,o,g).each(function(e){var t=_.c2p(e.x);var r=w.c2p(e.y);Z.select(this).selectAll("tspan.line").each(function(){b(Z.select(this)).attr({x:t,y:r})})});a.exit().remove()}f.datum(n);d.datum(n);G(f,d,n);var W=o.cliponaxis===false;var $=W?null:y.layerClipId;ee.setClipUrl(f,$,g);ee.setClipUrl(d,$,g)}function ne(e,a,t,r,n){var i=t.xaxis;var o=t.yaxis;var s=Z.extent(J.simpleMap(i.range,i.r2c));var l=Z.extent(J.simpleMap(o.range,o.r2c));var u=r[0].trace;if(!te.hasMarkers(u))return;var c=u.marker.maxdisplayed;if(c===0)return;var f=r.filter(function(e){return e.x>=s[0]&&e.x<=s[1]&&e.y>=l[0]&&e.y<=l[1]});var d=Math.ceil(f.length/c);var v=0;n.forEach(function(e,t){var r=e[0].trace;if(te.hasMarkers(r)&&r.marker.maxdisplayed>0&&t<a){v++}});var p=Math.round(v*d/3+Math.floor(v/3)*d/7.1);r.forEach(function(e){delete e.vis});f.forEach(function(e,t){if(Math.round((t+p)%d)===0)e.vis=true})}},{"../../components/drawing":122,"../../lib":230,"../../lib/polygon":242,"../../registry":313,"./line_points":367,"./link_traces":369,"./subtypes":378,"@plotly/d3":11}],375:[function(e,t,r){"use strict";var v=e("./subtypes");t.exports=function e(t,r){var a=t.cd;var n=t.xaxis;var i=t.yaxis;var o=[];var s=a[0].trace;var l;var u;var c;var f;var d=!v.hasMarkers(s)&&!v.hasText(s);if(d)return[];if(r===false){for(l=0;l<a.length;l++){a[l].selected=0}}else{for(l=0;l<a.length;l++){u=a[l];c=n.c2p(u.x);f=i.c2p(u.y);if(u.i!==null&&r.contains([c,f],false,l,t)){o.push({pointNumber:u.i,x:n.c2d(u.x),y:i.c2d(u.y)});u.selected=1}else{u.selected=0}}}return o}},{"./subtypes":378}],376:[function(e,t,r){"use strict";var x=["orientation","groupnorm","stackgaps"];t.exports=function e(t,r,a,n){var i=a._scatterStackOpts;var o=n("stackgroup");if(o){var s=r.xaxis+r.yaxis;var l=i[s];if(!l)l=i[s]={};var u=l[o];var c=false;if(u){u.traces.push(r)}else{u=l[o]={traceIndices:[],traces:[r]};c=true}var f={orientation:r.x&&!r.y?"h":"v"};for(var d=0;d<x.length;d++){var v=x[d];var p=v+"Found";if(!u[p]){var h=t[v]!==undefined;var m=v==="orientation";if(h||c){u[v]=n(v,f[v]);if(m){u.fillDflt=u[v]==="h"?"tonextx":"tonexty"}if(h){u[p]=true;if(!c){delete u.traces[0][v];if(m){for(var g=0;g<u.traces.length-1;g++){var y=u.traces[g];if(y._input.fill!==y.fill){y.fill=u.fillDflt}}}}}}}}return u}}},{}],377:[function(e,t,r){"use strict";var n=e("@plotly/d3");var i=e("../../components/drawing");var o=e("../../registry");function a(a){var e=n.select(a).selectAll("g.trace.scatter");e.style("opacity",function(e){return e[0].trace.opacity});e.selectAll("g.points").each(function(e){var t=n.select(this);var r=e.trace||e[0].trace;s(t,r,a)});e.selectAll("g.text").each(function(e){var t=n.select(this);var r=e.trace||e[0].trace;l(t,r,a)});e.selectAll("g.trace path.js-line").call(i.lineGroupStyle);e.selectAll("g.trace path.js-fill").call(i.fillGroupStyle);o.getComponentMethod("errorbars","style")(e)}function s(e,t,r){i.pointStyle(e.selectAll("path.point"),t,r)}function l(e,t,r){i.textPointStyle(e.selectAll("text"),t,r)}function u(e,t,r){var a=t[0].trace;if(a.selectedpoints){i.selectedPointStyle(r.selectAll("path.point"),a);i.selectedTextStyle(r.selectAll("text"),a)}else{s(r,a,e);l(r,a,e)}}t.exports={style:a,stylePoints:s,styleText:l,styleOnSelect:u}},{"../../components/drawing":122,"../../registry":313,"@plotly/d3":11}],378:[function(e,t,r){"use strict";var a=e("../../lib");t.exports={hasLines:function(e){return e.visible&&e.mode&&e.mode.indexOf("lines")!==-1},hasMarkers:function(e){return e.visible&&(e.mode&&e.mode.indexOf("markers")!==-1||e.type==="splom")},hasText:function(e){return e.visible&&e.mode&&e.mode.indexOf("text")!==-1},isBubble:function(e){return a.isPlainObject(e.marker)&&a.isArrayOrTypedArray(e.marker.size)}}},{"../../lib":230}],379:[function(e,t,r){"use strict";var i=e("../../lib");t.exports=function(e,t,r,a,n){n=n||{};a("textposition");i.coerceFont(a,"textfont",r.font);if(!n.noSelect){a("selected.textfont.color");a("unselected.textfont.color")}}},{"../../lib":230}],380:[function(e,t,r){"use strict";var c=e("../../lib");var f=e("../../registry");t.exports=function e(t,r,a,n){var i=n("x");var o=n("y");var s;var l=f.getComponentMethod("calendars","handleTraceDefaults");l(t,r,["x","y"],a);if(i){var u=c.minRowLength(i);if(o){s=Math.min(u,c.minRowLength(o))}else{s=u;n("y0");n("dy")}}else{if(!o)return 0;s=c.minRowLength(o);n("x0");n("dx")}r._length=s;return s}},{"../../lib":230,"../../registry":313}],381:[function(e,t,r){"use strict";var f=e("../plots/cartesian/axes");var m=e("../lib");var g=e("../plot_api/plot_schema");var h=e("./helpers").pointsAccessorFunction;var d=e("../constants/numerical").BADNUM;r.moduleType="transform";r.name="aggregate";var y=r.attributes={enabled:{valType:"boolean",dflt:true,editType:"calc"},groups:{valType:"string",strict:true,noBlank:true,arrayOk:true,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:true,editType:"calc"},editType:"calc"},editType:"calc"};var x=y.aggregations;r.supplyDefaults=function(r,e){var a={};var n;function t(e,t){return m.coerce(r,a,y,e,t)}var i=t("enabled");if(!i)return a;var o=g.findArrayAttributes(e);var s={};for(n=0;n<o.length;n++)s[o[n]]=1;var l=t("groups");if(!Array.isArray(l)){if(!s[l]){a.enabled=false;return a}s[l]=0}var u=r.aggregations||[];var c=a.aggregations=new Array(u.length);var f;function d(e,t){return m.coerce(u[n],f,x,e,t)}for(n=0;n<u.length;n++){f={_index:n};var v=d("target");var p=d("func");var h=d("enabled");if(h&&v&&(s[v]||p==="count"&&s[v]===undefined)){if(p==="stddev")d("funcmode");s[v]=0;c[n]=f}else c[n]={enabled:false,_index:n}}for(n=0;n<o.length;n++){if(s[o[n]]){c.push({target:o[n],func:x.func.dflt,enabled:true,_index:-1})}}return a};r.calcTransform=function(e,t,r){if(!r.enabled)return;var a=r.groups;var n=m.getTargetArray(t,{target:a});if(!n)return;var i,o,s,l;var u={};var c={};var f=[];var d=h(t.transforms,r);var v=n.length;if(t._length)v=Math.min(v,t._length);for(i=0;i<v;i++){o=n[i];s=u[o];if(s===undefined){u[o]=f.length;l=[i];f.push(l);c[u[o]]=d(i)}else{f[s].push(i);c[u[o]]=(c[u[o]]||[]).concat(d(i))}}r._indexToPoints=c;var p=r.aggregations;for(i=0;i<p.length;i++){b(e,t,f,p[i])}if(typeof a==="string"){b(e,t,f,{target:a,func:"first",enabled:true})}t._length=f.length};function b(e,t,r,a){if(!a.enabled)return;var n=a.target;var i=m.nestedProperty(t,n);var o=i.get();var s=f.getDataConversions(e,t,n,o);var l=v(a,s);var u=new Array(r.length);for(var c=0;c<r.length;c++){u[c]=l(o,r[c])}i.set(u);if(a.func==="count"){m.pushUnique(t._arrayAttrs,n)}}function v(c,e){var t=c.func;var f=e.d2c;var l=e.c2d;switch(t){case"count":return a;case"first":return n;case"last":return i;case"sum":return function(e,t){var r=0;for(var a=0;a<t.length;a++){var n=f(e[t[a]]);if(n!==d)r+=n}return l(r)};case"avg":return function(e,t){var r=0;var a=0;for(var n=0;n<t.length;n++){var i=f(e[t[n]]);if(i!==d){r+=i;a++}}return a?l(r/a):d};case"min":return function(e,t){var r=Infinity;for(var a=0;a<t.length;a++){var n=f(e[t[a]]);if(n!==d)r=Math.min(r,n)}return r===Infinity?d:l(r)};case"max":return function(e,t){var r=-Infinity;for(var a=0;a<t.length;a++){var n=f(e[t[a]]);if(n!==d)r=Math.max(r,n)}return r===-Infinity?d:l(r)};case"range":return function(e,t){var r=Infinity;var a=-Infinity;for(var n=0;n<t.length;n++){var i=f(e[t[n]]);if(i!==d){r=Math.min(r,i);a=Math.max(a,i)}}return a===-Infinity||r===Infinity?d:l(a-r)};case"change":return function(e,t){var r=f(e[t[0]]);var a=f(e[t[t.length-1]]);return r===d||a===d?d:l(a-r)};case"median":return function(e,t){var r=[];for(var a=0;a<t.length;a++){var n=f(e[t[a]]);if(n!==d)r.push(n)}if(!r.length)return d;r.sort(m.sorterAsc);var i=(r.length-1)/2;return l((r[Math.floor(i)]+r[Math.ceil(i)])/2)};case"mode":return function(e,t){var r={};var a=0;var n=d;for(var i=0;i<t.length;i++){var o=f(e[t[i]]);if(o!==d){var s=r[o]=(r[o]||0)+1;if(s>a){a=s;n=o}}}return a?l(n):d};case"rms":return function(e,t){var r=0;var a=0;for(var n=0;n<t.length;n++){var i=f(e[t[n]]);if(i!==d){r+=i*i;a++}}return a?l(Math.sqrt(r/a)):d};case"stddev":return function(e,t){var r=0;var a=0;var n=1;var i=d;var o;for(o=0;o<t.length&&i===d;o++){i=f(e[t[o]])}if(i===d)return d;for(;o<t.length;o++){var s=f(e[t[o]]);if(s!==d){var l=s-i;r+=l;a+=l*l;n++}}var u=c.funcmode==="sample"?n-1:n;if(!u)return 0;return Math.sqrt((a-r*r/n)/u)}}}function a(e,t){return t.length}function n(e,t){return e[t[0]]}function i(e,t){return e[t[t.length-1]]}},{"../constants/numerical":210,"../lib":230,"../plot_api/plot_schema":264,"../plots/cartesian/axes":276,"./helpers":384}],382:[function(e,t,o){"use strict";var _=e("../lib");var s=e("../registry");var w=e("../plots/cartesian/axes");var T=e("./helpers").pointsAccessorFunction;var r=e("../constants/filter_ops");var c=r.COMPARISON_OPS;var f=r.INTERVAL_OPS;var d=r.SET_OPS;o.moduleType="transform";o.name="filter";o.attributes={enabled:{valType:"boolean",dflt:true,editType:"calc"},target:{valType:"string",strict:true,noBlank:true,arrayOk:true,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(c).concat(f).concat(d),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:false,editType:"calc"},editType:"calc"};o.supplyDefaults=function(r){var a={};function e(e,t){return _.coerce(r,a,o.attributes,e,t)}var t=e("enabled");if(t){var n=e("target");if(_.isArrayOrTypedArray(n)&&n.length===0){a.enabled=false;return a}e("preservegaps");e("operation");e("value");var i=s.getComponentMethod("calendars","handleDefaults");i(r,a,"valuecalendar",null);i(r,a,"targetcalendar",null)}return a};o.calcTransform=function(e,n,t){if(!t.enabled)return;var r=_.getTargetArray(n,t);if(!r)return;var a=t.target;var i=r.length;if(n._length)i=Math.min(i,n._length);var o=t.targetcalendar;var s=n._arrayAttrs;var l=t.preservegaps;if(typeof a==="string"){var u=_.nestedProperty(n,a+"calendar").get();if(u)o=u}var c=w.getDataToCoordFunc(e,n,a,r);var f=k(t,c,o);var d={};var v={};var p=0;function h(e,t){for(var r=0;r<s.length;r++){var a=_.nestedProperty(n,s[r]);e(a,t)}}var m;var g;if(l){m=function(e){d[e.astr]=_.extendDeep([],e.get());e.set(new Array(i))};g=function(e,t){var r=d[e.astr][t];e.get()[t]=r}}else{m=function(e){d[e.astr]=_.extendDeep([],e.get());e.set([])};g=function(e,t){var r=d[e.astr][t];e.get().push(r)}}h(m);var y=T(n.transforms,t);for(var x=0;x<i;x++){var b=f(r[x]);if(b){h(g,x);v[p++]=y(x)}else if(l)p++}t._indexToPoints=v;n._length=p};function k(t,r,a){var n=t.operation;var e=t.value;var i=Array.isArray(e);function o(e){return e.indexOf(n)!==-1}var s=function(e){return r(e,0,t.valuecalendar)};var l=function(e){return r(e,0,a)};var u;if(o(c)){u=i?s(e[0]):s(e)}else if(o(f)){u=i?[s(e[0]),s(e[1])]:[s(e),s(e)]}else if(o(d)){u=i?e.map(s):[s(e)]}switch(n){case"=":return function(e){return l(e)===u};case"!=":return function(e){return l(e)!==u};case"<":return function(e){return l(e)<u};case"<=":return function(e){return l(e)<=u};case">":return function(e){return l(e)>u};case">=":return function(e){return l(e)>=u};case"[]":return function(e){var t=l(e);return t>=u[0]&&t<=u[1]};case"()":return function(e){var t=l(e);return t>u[0]&&t<u[1]};case"[)":return function(e){var t=l(e);return t>=u[0]&&t<u[1]};case"(]":return function(e){var t=l(e);return t>u[0]&&t<=u[1]};case"][":return function(e){var t=l(e);return t<=u[0]||t>=u[1]};case")(":return function(e){var t=l(e);return t<u[0]||t>u[1]};case"](":return function(e){var t=l(e);return t<=u[0]||t>u[1]};case")[":return function(e){var t=l(e);return t<u[0]||t>=u[1]};case"{}":return function(e){return u.indexOf(l(e))!==-1};case"}{":return function(e){return u.indexOf(l(e))===-1}}}},{"../constants/filter_ops":208,"../lib":230,"../plots/cartesian/axes":276,"../registry":313,"./helpers":384}],383:[function(e,t,f){"use strict";var A=e("../lib");var S=e("../plot_api/plot_schema");var E=e("../plots/plots");var L=e("./helpers").pointsAccessorFunction;f.moduleType="transform";f.name="groupby";f.attributes={enabled:{valType:"boolean",dflt:true,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:true},editType:"calc"},editType:"calc"};f.supplyDefaults=function(r,e,t){var a;var n={};function i(e,t){return A.coerce(r,n,f.attributes,e,t)}var o=i("enabled");if(!o)return n;i("groups");i("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var s=r.styles;var l=n.styles=[];if(s){for(a=0;a<s.length;a++){var u=l[a]={};A.coerce(s[a],l[a],f.attributes.styles,"target");var c=A.coerce(s[a],l[a],f.attributes.styles,"value");if(A.isPlainObject(c))u.value=A.extendDeep({},c);else if(c)delete u.value}}return n};f.transform=function(e,t){var r,a,n;var i=[];for(a=0;a<e.length;a++){r=o(e[a],t);for(n=0;n<r.length;n++){i.push(r[n])}}return i};function o(e,t){var r,a,n,i,o,s,l,u,c;var f;var d=t.transform;var v=t.transformIndex;var p=e.transforms[v].groups;var h=L(e.transforms,d);if(!A.isArrayOrTypedArray(p)||p.length===0){return[e]}var m=A.filterUnique(p);var g=new Array(m.length);var y=p.length;var x=S.findArrayAttributes(e);var b=d.styles||[];var _={};for(r=0;r<b.length;r++){_[b[r].target]=b[r].value}if(d.styles){f=A.keyedContainer(d,"styles","target","value.name")}var w={};var T={};for(r=0;r<m.length;r++){s=m[r];w[s]=r;T[s]=0;l=g[r]=A.extendDeepNoArrays({},e);l._group=s;l.transforms[v]._indexToPoints={};var k=null;if(f){k=f.get(s)}if(k||k===""){l.name=k}else{l.name=A.templateString(d.nameformat,{trace:e.name,group:s})}u=l.transforms;l.transforms=[];for(a=0;a<u.length;a++){l.transforms[a]=A.extendDeepNoArrays({},u[a])}for(a=0;a<x.length;a++){A.nestedProperty(l,x[a]).set([])}}for(n=0;n<x.length;n++){i=x[n];for(a=0,c=[];a<m.length;a++){c[a]=A.nestedProperty(g[a],i).get()}o=A.nestedProperty(e,i).get();for(a=0;a<y;a++){c[w[p[a]]].push(o[a])}}for(a=0;a<y;a++){l=g[w[p[a]]];var M=l.transforms[v]._indexToPoints;M[T[p[a]]]=h(a);T[p[a]]++}for(r=0;r<m.length;r++){s=m[r];l=g[r];E.clearExpandedTraceDefaultColors(l);l=A.extendDeepNoArrays(l,_[s]||{})}return g}},{"../lib":230,"../plot_api/plot_schema":264,"../plots/plots":311,"./helpers":384}],384:[function(e,t,r){"use strict";r.pointsAccessorFunction=function(e,t){var r;var a;for(var n=0;n<e.length;n++){r=e[n];if(r===t)break;if(!r._indexToPoints||r.enabled===false)continue;a=r._indexToPoints}var i=a?function(e){return a[e]}:function(e){return[e]};return i}},{}],385:[function(e,t,n){"use strict";var m=e("../lib");var g=e("../plots/cartesian/axes");var y=e("./helpers").pointsAccessorFunction;var i=e("../constants/numerical").BADNUM;n.moduleType="transform";n.name="sort";n.attributes={enabled:{valType:"boolean",dflt:true,editType:"calc"},target:{valType:"string",strict:true,noBlank:true,arrayOk:true,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"};n.supplyDefaults=function(r){var a={};function e(e,t){return m.coerce(r,a,n.attributes,e,t)}var t=e("enabled");if(t){e("target");e("order")}return a};n.calcTransform=function(e,t,r){if(!r.enabled)return;var a=m.getTargetArray(t,r);if(!a)return;var n=r.target;var i=a.length;if(t._length)i=Math.min(i,t._length);var o=t._arrayAttrs;var s=g.getDataToCoordFunc(e,t,n,a);var l=x(r,a,s,i);var u=y(t.transforms,r);var c={};var f,d;for(f=0;f<o.length;f++){var v=m.nestedProperty(t,o[f]);var p=v.get();var h=new Array(i);for(d=0;d<i;d++){h[d]=p[l[d]]}v.set(h)}for(d=0;d<i;d++){c[d]=u(l[d])}r._indexToPoints=c;t._length=i};function x(e,t,r,a){var n=new Array(a);var i=new Array(a);var o;for(o=0;o<a;o++){n[o]={v:t[o],i:o}}n.sort(s(e,r));for(o=0;o<a;o++){i[o]=n[o].i}return i}function s(e,n){switch(e.order){case"ascending":return function(e,t){var r=n(e.v);var a=n(t.v);if(r===i){return 1}if(a===i){return-1}return r-a};case"descending":return function(e,t){var r=n(e.v);var a=n(t.v);if(r===i){return 1}if(a===i){return-1}return a-r}}}},{"../constants/numerical":210,"../lib":230,"../plots/cartesian/axes":276,"./helpers":384}],386:[function(e,t,r){"use strict";r.version="2.2.0"},{}]},{},[8])(8)});(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.Plotly=e()}})(function(){var au,e,t;return function(){function c(i,o,s){function l(r,e){if(!o[r]){if(!i[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(u)return u(r,!0);var a=new Error("Cannot find module '"+r+"'");throw a.code="MODULE_NOT_FOUND",a}var n=o[r]={exports:{}};i[r][0].call(n.exports,function(e){var t=i[r][1][e];return l(t||e)},n,n.exports,c,i,o,s)}return o[r].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}return c}()({1:[function(e,t,r){"use strict";var a=e("../src/lib");var n={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var i in n){var o=i.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");a.addStyleRule(o,n[i])}},{"../src/lib":285}],2:[function(e,t,r){"use strict";t.exports=e("../src/transforms/aggregate")},{"../src/transforms/aggregate":541}],3:[function(e,t,r){"use strict";t.exports=e("../src/traces/bar")},{"../src/traces/bar":391}],4:[function(e,t,r){"use strict";t.exports=e("../src/traces/box")},{"../src/traces/box":406}],5:[function(e,t,r){"use strict";t.exports=e("../src/components/calendars")},{"../src/components/calendars":153}],6:[function(e,t,r){"use strict";t.exports=e("../src/traces/contour")},{"../src/traces/contour":426}],7:[function(e,t,r){"use strict";t.exports=e("../src/core")},{"../src/core":267}],8:[function(e,t,r){"use strict";t.exports=e("../src/transforms/filter")},{"../src/transforms/filter":542}],9:[function(e,t,r){"use strict";t.exports=e("../src/transforms/groupby")},{"../src/transforms/groupby":543}],10:[function(e,t,r){"use strict";t.exports=e("../src/traces/heatmap")},{"../src/traces/heatmap":442}],11:[function(e,t,r){"use strict";t.exports=e("../src/traces/histogram")},{"../src/traces/histogram":460}],12:[function(e,t,r){"use strict";t.exports=e("../src/traces/histogram2d")},{"../src/traces/histogram2d":466}],13:[function(e,t,r){"use strict";t.exports=e("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":470}],14:[function(e,t,r){"use strict";t.exports=e("../src/traces/image")},{"../src/traces/image":478}],15:[function(e,t,r){"use strict";var a=e("./core");a.register([e("./bar"),e("./box"),e("./heatmap"),e("./histogram"),e("./histogram2d"),e("./histogram2dcontour"),e("./contour"),e("./scatterternary"),e("./violin"),e("./image"),e("./pie"),e("./aggregate"),e("./filter"),e("./groupby"),e("./sort"),e("./calendars")]);t.exports=a},{"./aggregate":2,"./bar":3,"./box":4,"./calendars":5,"./contour":6,"./core":7,"./filter":8,"./groupby":9,"./heatmap":10,"./histogram":11,"./histogram2d":12,"./histogram2dcontour":13,"./image":14,"./pie":16,"./scatterternary":17,"./sort":18,"./violin":19}],16:[function(e,t,r){"use strict";t.exports=e("../src/traces/pie")},{"../src/traces/pie":487}],17:[function(e,t,r){"use strict";t.exports=e("../src/traces/scatterternary")},{"../src/traces/scatterternary":528}],18:[function(e,t,r){"use strict";t.exports=e("../src/transforms/sort")},{"../src/transforms/sort":545}],19:[function(e,t,r){"use strict";t.exports=e("../src/traces/violin")},{"../src/traces/violin":536}],20:[function(e,ru,t){!function(){var P={version:"3.6.1"};var n=[].slice,f=function(e){return n.call(e)};var R=this.document;function s(e){return e&&(e.ownerDocument||e.document||e).documentElement}function N(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(R){try{f(R.documentElement.childNodes)[0].nodeType}catch(e){f=function(e){var t=e.length,r=new Array(t);while(t--)r[t]=e[t];return r}}}if(!Date.now)Date.now=function(){return+new Date};if(R){try{R.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var t=this.Element.prototype,r=t.setAttribute,a=t.setAttributeNS,i=this.CSSStyleDeclaration.prototype,o=i.setProperty;t.setAttribute=function(e,t){r.call(this,e,t+"")};t.setAttributeNS=function(e,t,r){a.call(this,e,t,r+"")};i.setProperty=function(e,t,r){o.call(this,e,t+"",r)}}}P.ascending=l;function l(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}P.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};P.min=function(e,t){var r=-1,a=e.length,n,i;if(arguments.length===1){while(++r<a)if((i=e[r])!=null&&i>=i){n=i;break}while(++r<a)if((i=e[r])!=null&&n>i)n=i}else{while(++r<a)if((i=t.call(e,e[r],r))!=null&&i>=i){n=i;break}while(++r<a)if((i=t.call(e,e[r],r))!=null&&n>i)n=i}return n};P.max=function(e,t){var r=-1,a=e.length,n,i;if(arguments.length===1){while(++r<a)if((i=e[r])!=null&&i>=i){n=i;break}while(++r<a)if((i=e[r])!=null&&i>n)n=i}else{while(++r<a)if((i=t.call(e,e[r],r))!=null&&i>=i){n=i;break}while(++r<a)if((i=t.call(e,e[r],r))!=null&&i>n)n=i}return n};P.extent=function(e,t){var r=-1,a=e.length,n,i,o;if(arguments.length===1){while(++r<a)if((i=e[r])!=null&&i>=i){n=o=i;break}while(++r<a)if((i=e[r])!=null){if(n>i)n=i;if(o<i)o=i}}else{while(++r<a)if((i=t.call(e,e[r],r))!=null&&i>=i){n=o=i;break}while(++r<a)if((i=t.call(e,e[r],r))!=null){if(n>i)n=i;if(o<i)o=i}}return[n,o]};function u(e){return e===null?NaN:+e}function c(e){return!isNaN(e)}P.sum=function(e,t){var r=0,a=e.length,n,i=-1;if(arguments.length===1){while(++i<a)if(c(n=+e[i]))r+=n}else{while(++i<a)if(c(n=+t.call(e,e[i],i)))r+=n}return r};P.mean=function(e,t){var r=0,a=e.length,n,i=-1,o=a;if(arguments.length===1){while(++i<a)if(c(n=u(e[i])))r+=n;else--o}else{while(++i<a)if(c(n=u(t.call(e,e[i],i))))r+=n;else--o}if(o)return r/o};P.quantile=function(e,t){var r=(e.length-1)*t+1,a=Math.floor(r),n=+e[a-1],i=r-a;return i?n+i*(e[a]-n):n};P.median=function(e,t){var r=[],a=e.length,n,i=-1;if(arguments.length===1){while(++i<a)if(c(n=u(e[i])))r.push(n)}else{while(++i<a)if(c(n=u(t.call(e,e[i],i))))r.push(n)}if(r.length)return P.quantile(r.sort(l),.5)};P.variance=function(e,t){var r=e.length,a=0,n,i,o=0,s=-1,l=0;if(arguments.length===1){while(++s<r){if(c(n=u(e[s]))){i=n-a;a+=i/++l;o+=i*(n-a)}}}else{while(++s<r){if(c(n=u(t.call(e,e[s],s)))){i=n-a;a+=i/++l;o+=i*(n-a)}}}if(l>1)return o/(l-1)};P.deviation=function(){var e=P.variance.apply(this,arguments);return e?Math.sqrt(e):e};function e(i){return{left:function(e,t,r,a){if(arguments.length<3)r=0;if(arguments.length<4)a=e.length;while(r<a){var n=r+a>>>1;if(i(e[n],t)<0)r=n+1;else a=n}return r},right:function(e,t,r,a){if(arguments.length<3)r=0;if(arguments.length<4)a=e.length;while(r<a){var n=r+a>>>1;if(i(e[n],t)>0)a=n;else r=n+1}return r}}}var d=e(l);P.bisectLeft=d.left;P.bisect=P.bisectRight=d.right;P.bisector=function(r){return e(r.length===1?function(e,t){return l(r(e),t)}:r)};P.shuffle=function(e,t,r){if((a=arguments.length)<3){r=e.length;if(a<2)t=0}var a=r-t,n,i;while(a){i=Math.random()*a--|0;n=e[a+t],e[a+t]=e[i+t],e[i+t]=n}return e};P.permute=function(e,t){var r=t.length,a=new Array(r);while(r--)a[r]=e[t[r]];return a};P.pairs=function(e){var t=0,r=e.length-1,a,n=e[0],i=new Array(r<0?0:r);while(t<r)i[t]=[a=n,n=e[++t]];return i};P.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,r=P.min(e,v),a=new Array(r);++t<r;){for(var n=-1,i,o=a[t]=new Array(i);++n<i;){o[n]=e[n][t]}}return a};function v(e){return e.length}P.zip=function(){return P.transpose(arguments)};P.keys=function(e){var t=[];for(var r in e)t.push(r);return t};P.values=function(e){var t=[];for(var r in e)t.push(e[r]);return t};P.entries=function(e){var t=[];for(var r in e)t.push({key:r,value:e[r]});return t};P.merge=function(e){var t=e.length,r,a=-1,n=0,i,o;while(++a<t)n+=e[a].length;i=new Array(n);while(--t>=0){o=e[t];r=o.length;while(--r>=0){i[--n]=o[r]}}return i};var I=Math.abs;P.range=function(e,t,r){if(arguments.length<3){r=1;if(arguments.length<2){t=e;e=0}}if((t-e)/r===Infinity)throw new Error("infinite range");var a=[],n=p(I(r)),i=-1,o;e*=n,t*=n,r*=n;if(r<0)while((o=e+r*++i)>t)a.push(o/n);else while((o=e+r*++i)<t)a.push(o/n);return a};function p(e){var t=1;while(e*t%1)t*=10;return t}function h(e,t){for(var r in t){Object.defineProperty(e.prototype,r,{value:t[r],enumerable:false})}}P.map=function(e,t){var r=new y;if(e instanceof y){e.forEach(function(e,t){r.set(e,t)})}else if(Array.isArray(e)){var a=-1,n=e.length,i;if(arguments.length===1)while(++a<n)r.set(a,e[a]);else while(++a<n)r.set(t.call(e,i=e[a],a),i)}else{for(var o in e)r.set(o,e[o])}return r};function y(){this._=Object.create(null)}var m="__proto__",g="\0";h(y,{has:_,get:function(e){return this._[x(e)]},set:function(e,t){return this._[x(e)]=t},remove:w,keys:T,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:b(t),value:this._[t]});return e},size:k,empty:M,forEach:function(e){for(var t in this._)e.call(this,b(t),this._[t])}});function x(e){return(e+="")===m||e[0]===g?g+e:e}function b(e){return(e+="")[0]===g?e.slice(1):e}function _(e){return x(e)in this._}function w(e){return(e=x(e))in this._&&delete this._[e]}function T(){var e=[];for(var t in this._)e.push(b(t));return e}function k(){var e=0;for(var t in this._)++e;return e}function M(){for(var e in this._)return false;return true}P.nest=function(){var f={},d=[],t=[],v,p;function h(r,e,a){if(a>=d.length)return p?p.call(f,e):v?e.sort(v):e;var t=-1,n=e.length,i=d[a++],o,s,l,u=new y,c;while(++t<n){if(c=u.get(o=i(s=e[t]))){c.push(s)}else{u.set(o,[s])}}if(r){s=r();l=function(e,t){s.set(e,h(r,t,a))}}else{s={};l=function(e,t){s[e]=h(r,t,a)}}u.forEach(l);return s}function i(e,r){if(r>=d.length)return e;var a=[],n=t[r++];e.forEach(function(e,t){a.push({key:e,values:i(t,r)})});return n?a.sort(function(e,t){return n(e.key,t.key)}):a}f.map=function(e,t){return h(t,e,0)};f.entries=function(e){return i(h(P.map,e,0),0)};f.key=function(e){d.push(e);return f};f.sortKeys=function(e){t[d.length-1]=e;return f};f.sortValues=function(e){v=e;return f};f.rollup=function(e){p=e;return f};return f};P.set=function(e){var t=new A;if(e)for(var r=0,a=e.length;r<a;++r)t.add(e[r]);return t};function A(){this._=Object.create(null)}h(A,{has:_,add:function(e){this._[x(e+="")]=true;return e},remove:w,values:T,size:k,empty:M,forEach:function(e){for(var t in this._)e.call(this,b(t))}});P.behavior={};function z(e){return e}P.rebind=function(e,t){var r=1,a=arguments.length,n;while(++r<a)e[n=arguments[r]]=S(e,t,t[n]);return e};function S(t,r,a){return function(){var e=a.apply(r,arguments);return e===r?t:e}}function E(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var r=0,a=L.length;r<a;++r){var n=L[r]+t;if(n in e)return n}}var L=["webkit","ms","moz","Moz","o","O"];function C(){}P.dispatch=function(){var e=new D,t=-1,r=arguments.length;while(++t<r)e[arguments[t]]=O(e);return e};function D(){}D.prototype.on=function(e,t){var r=e.indexOf("."),a="";if(r>=0){a=e.slice(r+1);e=e.slice(0,r)}if(e)return arguments.length<2?this[e].on(a):this[e].on(a,t);if(arguments.length===2){if(t==null)for(e in this){if(this.hasOwnProperty(e))this[e].on(a,null)}return this}};function O(n){var i=[],o=new y;function e(){var e=i,t=-1,r=e.length,a;while(++t<r)if(a=e[t].on)a.apply(this,arguments);return n}e.on=function(e,t){var r=o.get(e),a;if(arguments.length<2)return r&&r.on;if(r){r.on=null;i=i.slice(0,a=i.indexOf(r)).concat(i.slice(a+1));o.remove(e)}if(t)i.push(o.set(e,{on:t}));return n};return e}P.event=null;function F(){P.event.preventDefault()}function j(){var e=P.event,t;while(t=e.sourceEvent)e=t;return e}function H(n){var i=new D,e=0,t=arguments.length;while(++e<t)i[arguments[e]]=O(i);i.of=function(r,a){return function(e){try{var t=e.sourceEvent=P.event;e.target=n;P.event=e;i[e.type].apply(r,a)}finally{P.event=t}}};return i}P.requote=function(e){return e.replace(B,"\\$&")};var B=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var q={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)e[r]=t[r]};function U(e){q(e,W);return e}var Y=function(e,t){return t.querySelector(e)},V=function(e,t){return t.querySelectorAll(e)},G=function(e,t){var r=e.matches||e[E(e,"matchesSelector")];G=function(e,t){return r.call(e,t)};return G(e,t)};if(typeof Sizzle==="function"){Y=function(e,t){return Sizzle(e,t)[0]||null};V=Sizzle;G=Sizzle.matchesSelector}P.selection=function(){return P.select(R.documentElement)};var W=P.selection.prototype=[];W.select=function(e){var t=[],r,a,n,i;e=$(e);for(var o=-1,s=this.length;++o<s;){t.push(r=[]);r.parentNode=(n=this[o]).parentNode;for(var l=-1,u=n.length;++l<u;){if(i=n[l]){r.push(a=e.call(i,i.__data__,l,o));if(a&&"__data__"in i)a.__data__=i.__data__}else{r.push(null)}}}return U(t)};function $(e){return typeof e==="function"?e:function(){return Y(e,this)}}W.selectAll=function(e){var t=[],r,a;e=Z(e);for(var n=-1,i=this.length;++n<i;){for(var o=this[n],s=-1,l=o.length;++s<l;){if(a=o[s]){t.push(r=f(e.call(a,a.__data__,s,n)));r.parentNode=a}}}return U(t)};function Z(e){return typeof e==="function"?e:function(){return V(e,this)}}var X="http://www.w3.org/1999/xhtml";var J={svg:"http://www.w3.org/2000/svg",xhtml:X,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};P.ns={prefix:J,qualify:function(e){var t=e.indexOf(":"),r=e;if(t>=0&&(r=e.slice(0,t))!=="xmlns")e=e.slice(t+1);return J.hasOwnProperty(r)?{space:J[r],local:e}:e}};W.attr=function(e,t){if(arguments.length<2){if(typeof e==="string"){var r=this.node();e=P.ns.qualify(e);return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}for(t in e)this.each(K(t,e[t]));return this}return this.each(K(e,t))};function K(t,r){t=P.ns.qualify(t);function e(){this.removeAttribute(t)}function a(){this.removeAttributeNS(t.space,t.local)}function n(){this.setAttribute(t,r)}function i(){this.setAttributeNS(t.space,t.local,r)}function o(){var e=r.apply(this,arguments);if(e==null)this.removeAttribute(t);else this.setAttribute(t,e)}function s(){var e=r.apply(this,arguments);if(e==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,e)}return r==null?t.local?a:e:typeof r==="function"?t.local?s:o:t.local?i:n}function Q(e){return e.trim().replace(/\s+/g," ")}W.classed=function(e,t){if(arguments.length<2){if(typeof e==="string"){var r=this.node(),a=(e=te(e)).length,n=-1;if(t=r.classList){while(++n<a)if(!t.contains(e[n]))return false}else{t=r.getAttribute("class");while(++n<a)if(!ee(e[n]).test(t))return false}return true}for(t in e)this.each(re(t,e[t]));return this}return this.each(re(e,t))};function ee(e){return new RegExp("(?:^|\\s+)"+P.requote(e)+"(?:\\s+|$)","g")}function te(e){return(e+"").trim().split(/^|\s+/)}function re(r,a){r=te(r).map(ae);var n=r.length;function e(){var e=-1;while(++e<n)r[e](this,a)}function t(){var e=-1,t=a.apply(this,arguments);while(++e<n)r[e](this,t)}return typeof a==="function"?t:e}function ae(a){var n=ee(a);return function(e,t){if(r=e.classList)return t?r.add(a):r.remove(a);var r=e.getAttribute("class")||"";if(t){n.lastIndex=0;if(!n.test(r))e.setAttribute("class",Q(r+" "+a))}else{e.setAttribute("class",Q(r.replace(n," ")))}}}W.style=function(e,t,r){var a=arguments.length;if(a<3){if(typeof e!=="string"){if(a<2)t="";for(r in e)this.each(ne(r,e[r],t));return this}if(a<2){var n=this.node();return N(n).getComputedStyle(n,null).getPropertyValue(e)}r=""}return this.each(ne(e,t,r))};function ne(t,r,a){function e(){this.style.removeProperty(t)}function n(){this.style.setProperty(t,r,a)}function i(){var e=r.apply(this,arguments);if(e==null)this.style.removeProperty(t);else this.style.setProperty(t,e,a)}return r==null?e:typeof r==="function"?i:n}W.property=function(e,t){if(arguments.length<2){if(typeof e==="string")return this.node()[e];for(t in e)this.each(ie(t,e[t]));return this}return this.each(ie(e,t))};function ie(t,r){function e(){delete this[t]}function a(){this[t]=r}function n(){var e=r.apply(this,arguments);if(e==null)delete this[t];else this[t]=e}return r==null?e:typeof r==="function"?n:a}W.text=function(t){return arguments.length?this.each(typeof t==="function"?function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}:t==null?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent};W.html=function(t){return arguments.length?this.each(typeof t==="function"?function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}:t==null?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML};W.append=function(e){e=oe(e);return this.select(function(){return this.appendChild(e.apply(this,arguments))})};function oe(r){function e(){var e=this.ownerDocument,t=this.namespaceURI;return t===X&&e.documentElement.namespaceURI===X?e.createElement(r):e.createElementNS(t,r)}function t(){return this.ownerDocument.createElementNS(r.space,r.local)}return typeof r==="function"?r:(r=P.ns.qualify(r)).local?t:e}W.insert=function(e,t){e=oe(e);t=$(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})};W.remove=function(){return this.each(se)};function se(){var e=this.parentNode;if(e)e.removeChild(this)}W.data=function(e,p){var t=-1,r=this.length,a,n;if(!arguments.length){e=new Array(r=(a=this[0]).length);while(++t<r){if(n=a[t]){e[t]=n.__data__}}return e}function i(e,t){var r,a=e.length,n=t.length,i=Math.min(a,n),o=new Array(n),s=new Array(n),l=new Array(a),u,c;if(p){var f=new y,d=new Array(a),v;for(r=-1;++r<a;){if(u=e[r]){if(f.has(v=p.call(u,u.__data__,r))){l[r]=u}else{f.set(v,u)}d[r]=v}}for(r=-1;++r<n;){if(!(u=f.get(v=p.call(t,c=t[r],r)))){s[r]=le(c)}else if(u!==true){o[r]=u;u.__data__=c}f.set(v,true)}for(r=-1;++r<a;){if(r in d&&f.get(d[r])!==true){l[r]=e[r]}}}else{for(r=-1;++r<i;){u=e[r];c=t[r];if(u){u.__data__=c;o[r]=u}else{s[r]=le(c)}}for(;r<n;++r){s[r]=le(t[r])}for(;r<a;++r){l[r]=e[r]}}s.update=o;s.parentNode=o.parentNode=l.parentNode=e.parentNode;h.push(s);m.push(o);g.push(l)}var h=de([]),m=U([]),g=U([]);if(typeof e==="function"){while(++t<r){i(a=this[t],e.call(a,a.parentNode.__data__,t))}}else{while(++t<r){i(a=this[t],e)}}m.enter=function(){return h};m.exit=function(){return g};return m};function le(e){return{__data__:e}}W.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")};W.filter=function(e){var t=[],r,a,n;if(typeof e!=="function")e=ue(e);for(var i=0,o=this.length;i<o;i++){t.push(r=[]);r.parentNode=(a=this[i]).parentNode;for(var s=0,l=a.length;s<l;s++){if((n=a[s])&&e.call(n,n.__data__,s,i)){r.push(n)}}}return U(t)};function ue(e){return function(){return G(this,e)}}W.order=function(){for(var e=-1,t=this.length;++e<t;){for(var r=this[e],a=r.length-1,n=r[a],i;--a>=0;){if(i=r[a]){if(n&&n!==i.nextSibling)n.parentNode.insertBefore(i,n);n=i}}}return this};W.sort=function(e){e=ce.apply(this,arguments);for(var t=-1,r=this.length;++t<r;)this[t].sort(e);return this.order()};function ce(r){if(!arguments.length)r=l;return function(e,t){return e&&t?r(e.__data__,t.__data__):!e-!t}}W.each=function(a){return fe(this,function(e,t,r){a.call(e,e.__data__,t,r)})};function fe(e,t){for(var r=0,a=e.length;r<a;r++){for(var n=e[r],i=0,o=n.length,s;i<o;i++){if(s=n[i])t(s,i,r)}}return e}W.call=function(e){var t=f(arguments);e.apply(t[0]=this,t);return this};W.empty=function(){return!this.node()};W.node=function(){for(var e=0,t=this.length;e<t;e++){for(var r=this[e],a=0,n=r.length;a<n;a++){var i=r[a];if(i)return i}}return null};W.size=function(){var e=0;fe(this,function(){++e});return e};function de(e){q(e,ve);return e}var ve=[];P.selection.enter=de;P.selection.enter.prototype=ve;ve.append=W.append;ve.empty=W.empty;ve.node=W.node;ve.call=W.call;ve.size=W.size;ve.select=function(e){var t=[],r,a,n,i,o;for(var s=-1,l=this.length;++s<l;){n=(i=this[s]).update;t.push(r=[]);r.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;){if(o=i[u]){r.push(n[u]=a=e.call(i.parentNode,o.__data__,u,s));a.__data__=o.__data__}else{r.push(null)}}}return U(t)};ve.insert=function(e,t){if(arguments.length<2)t=pe(this);return W.insert.call(this,e,t)};function pe(o){var s,l;return function(e,t,r){var a=o[r].update,n=a.length,i;if(r!=l)l=r,s=0;if(t>=s)s=t+1;while(!(i=a[s])&&++s<n);return i}}P.select=function(e){var t;if(typeof e==="string"){t=[Y(e,R)];t.parentNode=R.documentElement}else{t=[e];t.parentNode=s(e)}return U([t])};P.selectAll=function(e){var t;if(typeof e==="string"){t=f(V(e,R));t.parentNode=R.documentElement}else{t=f(e);t.parentNode=null}return U([t])};W.on=function(e,t,r){var a=arguments.length;if(a<3){if(typeof e!=="string"){if(a<2)t=false;for(r in e)this.each(he(r,e[r],t));return this}if(a<2)return(a=this.node()["__on"+e])&&a._;r=false}return this.each(he(e,t,r))};function he(n,t,r){var a="__on"+n,e=n.indexOf("."),i=ge;if(e>0)n=n.slice(0,e);var o=me.get(n);if(o)n=o,i=ye;function s(){var e=this[a];if(e){this.removeEventListener(n,e,e.$);delete this[a]}}function l(){var e=i(t,f(arguments));s.call(this);this.addEventListener(n,this[a]=e,e.$=r);e._=t}function u(){var e=new RegExp("^__on([^.]+)"+P.requote(n)+"$"),t;for(var r in this){if(t=r.match(e)){var a=this[r];this.removeEventListener(t[1],a,a.$);delete this[r]}}}return e?t?l:s:t?C:u}var me=P.map({mouseenter:"mouseover",mouseleave:"mouseout"});if(R){me.forEach(function(e){if("on"+e in R)me.remove(e)})}function ge(r,a){return function(e){var t=P.event;P.event=e;a[0]=this.__data__;try{r.apply(this,a)}finally{P.event=t}}}function ye(e,t){var a=ge(e,t);return function(e){var t=this,r=e.relatedTarget;if(!r||r!==t&&!(r.compareDocumentPosition(t)&8)){a.call(t,e)}}}var xe,be=0;function _e(e){var r=".dragsuppress-"+ ++be,a="click"+r,n=P.select(N(e)).on("touchmove"+r,F).on("dragstart"+r,F).on("selectstart"+r,F);if(xe==null){xe="onselectstart"in e?false:E(e.style,"userSelect")}if(xe){var i=s(e).style,o=i[xe];i[xe]="none"}return function(e){n.on(r,null);if(xe)i[xe]=o;if(e){var t=function(){n.on(a,null)};n.on(a,function(){F();t()},true);setTimeout(t,0)}}}P.mouse=function(e){return Te(e,j())};var we=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Te(e,t){if(t.changedTouches)t=t.changedTouches[0];var r=e.ownerSVGElement||e;if(r.createSVGPoint){var a=r.createSVGPoint();if(we<0){var n=N(e);if(n.scrollX||n.scrollY){r=P.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=r[0][0].getScreenCTM();we=!(i.f||i.e);r.remove()}}if(we)a.x=t.pageX,a.y=t.pageY;else a.x=t.clientX,a.y=t.clientY;a=a.matrixTransform(e.getScreenCTM().inverse());return[a.x,a.y]}var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}P.touch=function(e,t,r){if(arguments.length<3)r=t,t=j().changedTouches;if(t)for(var a=0,n=t.length,i;a<n;++a){if((i=t[a]).identifier===r){return Te(e,i)}}};P.behavior.drag=function(){var y=H(r,"drag","dragstart","dragend"),x=null,e=a(C,P.mouse,N,"mousemove","mouseup"),t=a(ke,P.touch,z,"touchmove","touchend");function r(){this.on("mousedown.drag",e).on("touchstart.drag",t)}function a(v,p,h,m,g){return function(){var e=this,t=P.event.target.correspondingElement||P.event.target,a=e.parentNode,n=y.of(e,arguments),i=0,o=v(),r=".drag"+(o==null?"":"-"+o),s,l=P.select(h(t)).on(m+r,f).on(g+r,d),u=_e(t),c=p(a,o);if(x){s=x.apply(e,arguments);s=[s.x-c[0],s.y-c[1]]}else{s=[0,0]}n({type:"dragstart"});function f(){var e=p(a,o),t,r;if(!e)return;t=e[0]-c[0];r=e[1]-c[1];i|=t|r;c=e;n({type:"drag",x:e[0]+s[0],y:e[1]+s[1],dx:t,dy:r})}function d(){if(!p(a,o))return;l.on(m+r,null).on(g+r,null);u(i);n({type:"dragend"})}}}r.origin=function(e){if(!arguments.length)return x;x=e;return r};return P.rebind(r,y,"on")};function ke(){return P.event.changedTouches[0].identifier}P.touches=function(r,e){if(arguments.length<2)e=j().touches;return e?f(e).map(function(e){var t=Te(r,e);t.identifier=e.identifier;return t}):[]};var Me=1e-6,Ae=Me*Me,Se=Math.PI,Ee=2*Se,Le=Ee-Me,Ce=Se/2,De=Se/180,Oe=180/Se;function Ie(e){return e>0?1:e<0?-1:0}function Pe(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0])}function Re(e){return e>1?0:e<-1?Se:Math.acos(e)}function Ne(e){return e>1?Ce:e<-1?-Ce:Math.asin(e)}function ze(e){return((e=Math.exp(e))-1/e)/2}function Fe(e){return((e=Math.exp(e))+1/e)/2}function je(e){return((e=Math.exp(2*e))-1)/(e+1)}function He(e){return(e=Math.sin(e/2))*e}var Be=Math.SQRT2,qe=2,Ue=4;P.interpolateZoom=function(e,t){var n=e[0],i=e[1],o=e[2],r=t[0],a=t[1],s=t[2],l=r-n,u=a-i,c=l*l+u*u,f,d;if(c<Ae){d=Math.log(s/o)/Be;f=function(e){return[n+e*l,i+e*u,o*Math.exp(Be*e*d)]}}else{var v=Math.sqrt(c),p=(s*s-o*o+Ue*c)/(2*o*qe*v),h=(s*s-o*o-Ue*c)/(2*s*qe*v),m=Math.log(Math.sqrt(p*p+1)-p),g=Math.log(Math.sqrt(h*h+1)-h);d=(g-m)/Be;f=function(e){var t=e*d,r=Fe(m),a=o/(qe*v)*(r*je(Be*t+m)-ze(m));return[n+a*l,i+a*u,o*r/Fe(Be*t+m)]}}f.duration=d*1e3;return f};P.behavior.zoom=function(){var b={x:0,y:0,k:1},t,l,r,u=[960,500],a=Ye,n=250,i=0,s="mousedown.zoom",c="mousemove.zoom",f="mouseup.zoom",o,_="touchstart.zoom",w,T=H(m,"zoomstart","zoom","zoomend"),d,v,p,h;if(!Ge){Ge="onwheel"in R?(Ve=function(){return-P.event.deltaY*(P.event.deltaMode?120:1)},"wheel"):"onmousewheel"in R?(Ve=function(){return P.event.wheelDelta},"mousewheel"):(Ve=function(){return-P.event.detail},"MozMousePixelScroll")}function m(e){e.on(s,D).on(Ge+".zoom",x).on("dblclick.zoom",I).on(_,O)}m.event=function(e){e.each(function(){var s=T.of(this,arguments),t=b;if(Cl){P.select(this).transition().each("start.zoom",function(){b=this.__chart__||{x:0,y:0,k:1};E(s)}).tween("zoom:zoom",function(){var a=u[0],e=u[1],n=l?l[0]:a/2,i=l?l[1]:e/2,o=P.interpolateZoom([(n-b.x)/b.k,(i-b.y)/b.k,a/b.k],[(n-t.x)/t.k,(i-t.y)/t.k,a/t.k]);return function(e){var t=o(e),r=a/t[2];this.__chart__=b={x:n-t[0]*r,y:i-t[1]*r,k:r};L(s)}}).each("interrupt.zoom",function(){C(s)}).each("end.zoom",function(){C(s)})}else{this.__chart__=b;E(s);L(s);C(s)}})};m.translate=function(e){if(!arguments.length)return[b.x,b.y];b={x:+e[0],y:+e[1],k:b.k};y();return m};m.scale=function(e){if(!arguments.length)return b.k;b={x:b.x,y:b.y,k:null};M(+e);y();return m};m.scaleExtent=function(e){if(!arguments.length)return a;a=e==null?Ye:[+e[0],+e[1]];return m};m.center=function(e){if(!arguments.length)return r;r=e&&[+e[0],+e[1]];return m};m.size=function(e){if(!arguments.length)return u;u=e&&[+e[0],+e[1]];return m};m.duration=function(e){if(!arguments.length)return n;n=+e;return m};m.x=function(e){if(!arguments.length)return v;v=e;d=e.copy();b={x:0,y:0,k:1};return m};m.y=function(e){if(!arguments.length)return h;h=e;p=e.copy();b={x:0,y:0,k:1};return m};function k(e){return[(e[0]-b.x)/b.k,(e[1]-b.y)/b.k]}function g(e){return[e[0]*b.k+b.x,e[1]*b.k+b.y]}function M(e){b.k=Math.max(a[0],Math.min(a[1],e))}function A(e,t){t=g(t);b.x+=e[0]-t[0];b.y+=e[1]-t[1]}function S(e,t,r,a){e.__chart__={x:b.x,y:b.y,k:b.k};M(Math.pow(2,a));A(l=t,r);e=P.select(e);if(n>0)e=e.transition().duration(n);e.call(m.event)}function y(){if(v)v.domain(d.range().map(function(e){return(e-b.x)/b.k}).map(d.invert));if(h)h.domain(p.range().map(function(e){return(e-b.y)/b.k}).map(p.invert))}function E(e){if(!i++)e({type:"zoomstart"})}function L(e){y();e({type:"zoom",scale:b.k,translate:[b.x,b.y]})}function C(e){if(!--i)e({type:"zoomend"}),l=null}function D(){var e=this,t=T.of(e,arguments),r=0,a=P.select(N(e)).on(c,o).on(f,s),n=k(P.mouse(e)),i=_e(e);Ml.call(e);E(t);function o(){r=1;A(P.mouse(e),n);L(t)}function s(){a.on(c,null).on(f,null);i(r);C(t)}}function O(){var c=this,u=T.of(c,arguments),f={},d=0,v,n=".zoom-"+P.event.changedTouches[0].identifier,p="touchmove"+n,h="touchend"+n,m=[],i=P.select(c),o=_e(c);e();E(u);i.on(s,null).on(_,e);function g(){var e=P.touches(c);v=b.k;e.forEach(function(e){if(e.identifier in f)f[e.identifier]=k(e)});return e}function e(){var e=P.event.target;P.select(e).on(p,y).on(h,x);m.push(e);var t=P.event.changedTouches;for(var r=0,a=t.length;r<a;++r){f[t[r].identifier]=null}var n=g(),i=Date.now();if(n.length===1){if(i-w<500){var o=n[0];S(c,o,f[o.identifier],Math.floor(Math.log(b.k)/Math.LN2)+1);F()}w=i}else if(n.length>1){var o=n[0],s=n[1],l=o[0]-s[0],u=o[1]-s[1];d=l*l+u*u}}function y(){var e=P.touches(c),t,r,a,n;Ml.call(c);for(var i=0,o=e.length;i<o;++i,n=null){a=e[i];if(n=f[a.identifier]){if(r)break;t=a,r=n}}if(n){var s=(s=a[0]-t[0])*s+(s=a[1]-t[1])*s,l=d&&Math.sqrt(s/d);t=[(t[0]+a[0])/2,(t[1]+a[1])/2];r=[(r[0]+n[0])/2,(r[1]+n[1])/2];M(l*v)}w=null;A(t,r);L(u)}function x(){if(P.event.touches.length){var e=P.event.changedTouches;for(var t=0,r=e.length;t<r;++t){delete f[e[t].identifier]}for(var a in f){return void g()}}P.selectAll(m).on(n,null);i.on(s,D).on(_,O);o();C(u)}}function x(){var e=T.of(this,arguments);if(o)clearTimeout(o);else Ml.call(this),t=k(l=r||P.mouse(this)),E(e);o=setTimeout(function(){o=null;C(e)},50);F();M(Math.pow(2,Ve()*.002)*b.k);A(l,t);L(e)}function I(){var e=P.mouse(this),t=Math.log(b.k)/Math.LN2;S(this,e,k(e),P.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return P.rebind(m,T,"on")};var Ye=[0,Infinity],Ve,Ge;P.color=We;function We(){}We.prototype.toString=function(){return this.rgb()+""};P.hsl=$e;function $e(e,t,r){return this instanceof $e?void(this.h=+e,this.s=+t,this.l=+r):arguments.length<2?e instanceof $e?new $e(e.h,e.s,e.l):mt(""+e,gt,$e):new $e(e,t,r)}var Ze=$e.prototype=new We;Ze.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);return new $e(this.h,this.s,this.l/e)};Ze.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new $e(this.h,this.s,e*this.l)};Ze.rgb=function(){return Xe(this.h,this.s,this.l)};function Xe(e,t,r){var a,n;e=isNaN(e)?0:(e%=360)<0?e+360:e;t=isNaN(t)?0:t<0?0:t>1?1:t;r=r<0?0:r>1?1:r;n=r<=.5?r*(1+t):r+t-r*t;a=2*r-n;function i(e){if(e>360)e-=360;else if(e<0)e+=360;if(e<60)return a+(n-a)*e/60;if(e<180)return n;if(e<240)return a+(n-a)*(240-e)/60;return a}function o(e){return Math.round(i(e)*255)}return new ft(o(e+120),o(e),o(e-120))}P.hcl=Je;function Je(e,t,r){return this instanceof Je?void(this.h=+e,this.c=+t,this.l=+r):arguments.length<2?e instanceof Je?new Je(e.h,e.c,e.l):e instanceof et?st(e.l,e.a,e.b):st((e=yt((e=P.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Je(e,t,r)}var Ke=Je.prototype=new We;Ke.brighter=function(e){return new Je(this.h,this.c,Math.min(100,this.l+tt*(arguments.length?e:1)))};Ke.darker=function(e){return new Je(this.h,this.c,Math.max(0,this.l-tt*(arguments.length?e:1)))};Ke.rgb=function(){return Qe(this.h,this.c,this.l).rgb()};function Qe(e,t,r){if(isNaN(e))e=0;if(isNaN(t))t=0;return new et(r,Math.cos(e*=De)*t,Math.sin(e)*t)}P.lab=et;function et(e,t,r){return this instanceof et?void(this.l=+e,this.a=+t,this.b=+r):arguments.length<2?e instanceof et?new et(e.l,e.a,e.b):e instanceof Je?Qe(e.h,e.c,e.l):yt((e=ft(e)).r,e.g,e.b):new et(e,t,r)}var tt=18;var rt=.95047,at=1,nt=1.08883;var it=et.prototype=new We;it.brighter=function(e){return new et(Math.min(100,this.l+tt*(arguments.length?e:1)),this.a,this.b)};it.darker=function(e){return new et(Math.max(0,this.l-tt*(arguments.length?e:1)),this.a,this.b)};it.rgb=function(){return ot(this.l,this.a,this.b)};function ot(e,t,r){var a=(e+16)/116,n=a+t/500,i=a-r/200;n=lt(n)*rt;a=lt(a)*at;i=lt(i)*nt;return new ft(ct(3.2404542*n-1.5371385*a-.4985314*i),ct(-.969266*n+1.8760108*a+.041556*i),ct(.0556434*n-.2040259*a+1.0572252*i))}function st(e,t,r){return e>0?new Je(Math.atan2(r,t)*Oe,Math.sqrt(t*t+r*r),e):new Je(NaN,NaN,e)}function lt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ut(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ct(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}P.rgb=ft;function ft(e,t,r){return this instanceof ft?void(this.r=~~e,this.g=~~t,this.b=~~r):arguments.length<2?e instanceof ft?new ft(e.r,e.g,e.b):mt(""+e,ft,Xe):new ft(e,t,r)}function dt(e){return new ft(e>>16,e>>8&255,e&255)}function vt(e){return dt(e)+""}var pt=ft.prototype=new We;pt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,r=this.g,a=this.b,n=30;if(!t&&!r&&!a)return new ft(n,n,n);if(t&&t<n)t=n;if(r&&r<n)r=n;if(a&&a<n)a=n;return new ft(Math.min(255,t/e),Math.min(255,r/e),Math.min(255,a/e))};pt.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new ft(e*this.r,e*this.g,e*this.b)};pt.hsl=function(){return gt(this.r,this.g,this.b)};pt.toString=function(){return"#"+ht(this.r)+ht(this.g)+ht(this.b)};function ht(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function mt(e,t,r){var a=0,n=0,i=0,o,s,l;o=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase());if(o){s=o[2].split(",");switch(o[1]){case"hsl":{return r(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100)}case"rgb":{return t(bt(s[0]),bt(s[1]),bt(s[2]))}}}if(l=_t.get(e)){return t(l.r,l.g,l.b)}if(e!=null&&e.charAt(0)==="#"&&!isNaN(l=parseInt(e.slice(1),16))){if(e.length===4){a=(l&3840)>>4;a=a>>4|a;n=l&240;n=n>>4|n;i=l&15;i=i<<4|i}else if(e.length===7){a=(l&16711680)>>16;n=(l&65280)>>8;i=l&255}}return t(a,n,i)}function gt(e,t,r){var a=Math.min(e/=255,t/=255,r/=255),n=Math.max(e,t,r),i=n-a,o,s,l=(n+a)/2;if(i){s=l<.5?i/(n+a):i/(2-n-a);if(e==n)o=(t-r)/i+(t<r?6:0);else if(t==n)o=(r-e)/i+2;else o=(e-t)/i+4;o*=60}else{o=NaN;s=l>0&&l<1?0:o}return new $e(o,s,l)}function yt(e,t,r){e=xt(e);t=xt(t);r=xt(r);var a=ut((.4124564*e+.3575761*t+.1804375*r)/rt),n=ut((.2126729*e+.7151522*t+.072175*r)/at),i=ut((.0193339*e+.119192*t+.9503041*r)/nt);return et(116*n-16,500*(a-n),200*(n-i))}function xt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function bt(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}var _t=P.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});_t.forEach(function(e,t){_t.set(e,dt(t))});function wt(e){return typeof e==="function"?e:function(){return e}}P.functor=wt;P.xhr=Tt(z);function Tt(a){return function(e,t,r){if(arguments.length===2&&typeof t==="function")r=t,t=null;return kt(e,t,a,r)}}function kt(n,i,r,e){var o={},s=P.dispatch("beforesend","progress","load","error"),l={},u=new XMLHttpRequest,c=null;if(self.XDomainRequest&&!("withCredentials"in u)&&/^(http(s)?:)?\/\//.test(n))u=new XDomainRequest;"onload"in u?u.onload=u.onerror=t:u.onreadystatechange=function(){u.readyState>3&&t()};function t(){var e=u.status,t;if(!e&&At(u)||e>=200&&e<300||e===304){try{t=r.call(o,u)}catch(e){s.error.call(o,e);return}s.load.call(o,t)}else{s.error.call(o,u)}}u.onprogress=function(e){var t=P.event;P.event=e;try{s.progress.call(o,u)}finally{P.event=t}};o.header=function(e,t){e=(e+"").toLowerCase();if(arguments.length<2)return l[e];if(t==null)delete l[e];else l[e]=t+"";return o};o.mimeType=function(e){if(!arguments.length)return i;i=e==null?null:e+"";return o};o.responseType=function(e){if(!arguments.length)return c;c=e;return o};o.response=function(e){r=e;return o};["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(f(arguments)))}});o.send=function(e,t,r){if(arguments.length===2&&typeof t==="function")r=t,t=null;u.open(e,n,true);if(i!=null&&!("accept"in l))l["accept"]=i+",*/*";if(u.setRequestHeader)for(var a in l)u.setRequestHeader(a,l[a]);if(i!=null&&u.overrideMimeType)u.overrideMimeType(i);if(c!=null)u.responseType=c;if(r!=null)o.on("error",r).on("load",function(e){r(null,e)});s.beforesend.call(o,u);u.send(t==null?null:t);return o};o.abort=function(){u.abort();return o};P.rebind(o,s,"on");return e==null?o:o.get(Mt(e))}function Mt(r){return r.length===1?function(e,t){r(e==null?t:null)}:r}function At(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}P.dsv=function(n,i){var t=new RegExp('["'+n+"\n]"),d=n.charCodeAt(0);function o(e,t,r){if(arguments.length<3)r=t,t=null;var a=kt(e,i,t==null?s:l(t),r);a.row=function(e){return arguments.length?a.response((t=e)==null?s:l(e)):t};return a}function s(e){return o.parse(e.responseText)}function l(t){return function(e){return o.parse(e.responseText,t)}}o.parse=function(e,a){var t;return o.parseRows(e,function(n,e){if(t)return t(n,e-1);var r=function(e){var t={};var r=n.length;for(var a=0;a<r;++a){t[n[a]]=e[a]}return t};t=a?function(e,t){return a(r(e),t)}:r})};o.parseRows=function(n,e){var i={},o={},t=[],s=n.length,l=0,r=0,a,u;function c(){if(l>=s)return o;if(u)return u=false,i;var e=l;if(n.charCodeAt(e)===34){var t=e;while(t++<s){if(n.charCodeAt(t)===34){if(n.charCodeAt(t+1)!==34)break;++t}}l=t+2;var r=n.charCodeAt(t+1);if(r===13){u=true;if(n.charCodeAt(t+2)===10)++l}else if(r===10){u=true}return n.slice(e+1,t).replace(/""/g,'"')}while(l<s){var r=n.charCodeAt(l++),a=1;if(r===10)u=true;else if(r===13){u=true;if(n.charCodeAt(l)===10)++l,++a}else if(r!==d)continue;return n.slice(e,l-a)}return n.slice(e)}while((a=c())!==o){var f=[];while(a!==i&&a!==o){f.push(a);a=c()}if(e&&(f=e(f,r++))==null)continue;t.push(f)}return t};o.format=function(e){if(Array.isArray(e[0]))return o.formatRows(e);var r=new A,a=[];e.forEach(function(e){for(var t in e){if(!r.has(t)){a.push(r.add(t))}}});return[a.map(u).join(n)].concat(e.map(function(t){return a.map(function(e){return u(t[e])}).join(n)})).join("\n")};o.formatRows=function(e){return e.map(r).join("\n")};function r(e){return e.map(u).join(n)}function u(e){return t.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return o};P.csv=P.dsv(",","text/csv");P.tsv=P.dsv("\t","text/tab-separated-values");var St,Et,Lt,Ct,Dt=this[E(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};P.timer=function(){Ot.apply(this,arguments)};function Ot(e,t,r){var a=arguments.length;if(a<2)t=0;if(a<3)r=Date.now();var n=r+t,i={c:e,t:n,n:null};if(Et)Et.n=i;else St=i;Et=i;if(!Lt){Ct=clearTimeout(Ct);Lt=1;Dt(It)}return i}function It(){var e=Pt(),t=Rt()-e;if(t>24){if(isFinite(t)){clearTimeout(Ct);Ct=setTimeout(It,t)}Lt=0}else{Lt=1;Dt(It)}}P.timer.flush=function(){Pt();Rt()};function Pt(){var e=Date.now(),t=St;while(t){if(e>=t.t&&t.c(e-t.t))t.c=null;t=t.n}return e}function Rt(){var e,t=St,r=Infinity;while(t){if(t.c){if(t.t<r)r=t.t;t=(e=t).n}else{t=e?e.n=t.n:St=t.n}}Et=e;return r}function Nt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}P.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var zt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Ft);P.formatPrefix=function(e,t){var r=0;if(e=+e){if(e<0)e*=-1;if(t)e=P.round(e,Nt(e,t));r=1+Math.floor(1e-12+Math.log(e)/Math.LN10);r=Math.max(-24,Math.min(24,Math.floor((r-1)/3)*3))}return zt[8+r/3]};function Ft(e,t){var r=Math.pow(10,I(8-t)*3);return{scale:t>8?function(e){return e/r}:function(e){return e*r},symbol:e}}function jt(e){var k=e.decimal,s=e.thousands,l=e.grouping,a=e.currency,M=l&&s?function(e,t){var r=e.length,a=[],n=0,i=l[0],o=0;while(r>0&&i>0){if(o+i+1>t)i=Math.max(1,t-o);a.push(e.substring(r-=i,r+i));if((o+=i+1)>t)break;i=l[n=(n+1)%l.length]}return a.reverse().join(s)}:z;return function(e){var t=Ht.exec(e),c=t[1]||" ",f=t[2]||">",d=t[3]||"-",r=t[4]||"",v=t[5],p=+t[6],h=t[7],m=t[8],g=t[9],y=1,x="",b="",_=false,w=true;if(m)m=+m.substring(1);if(v||c==="0"&&f==="="){v=c="0";f="="}switch(g){case"n":h=true;g="g";break;case"%":y=100;b="%";g="f";break;case"p":y=100;b="%";g="r";break;case"b":case"o":case"x":case"X":if(r==="#")x="0"+g.toLowerCase();case"c":w=false;case"d":_=true;m=0;break;case"s":y=-1;g="r";break}if(r==="$")x=a[0],b=a[1];if(g=="r"&&!m)g="g";if(m!=null){if(g=="g")m=Math.max(1,Math.min(21,m));else if(g=="e"||g=="f")m=Math.max(0,Math.min(20,m))}g=Bt.get(g)||qt;var T=v&&h;return function(e){var t=b;if(_&&e%1)return"";var r=e<0||e===0&&1/e<0?(e=-e,"-"):d==="-"?"":d;if(y<0){var a=P.formatPrefix(e,m);e=a.scale(e);t=a.symbol+b}else{e*=y}e=g(e,m);var n=e.lastIndexOf("."),i,o;if(n<0){var s=w?e.lastIndexOf("e"):-1;if(s<0)i=e,o="";else i=e.substring(0,s),o=e.substring(s)}else{i=e.substring(0,n);o=k+e.substring(n+1)}if(!v&&h)i=M(i,Infinity);var l=x.length+i.length+o.length+(T?0:r.length),u=l<p?new Array(l=p-l+1).join(c):"";if(T)i=M(u+i,u.length?p-o.length:Infinity);r+=x;e=i+o;return(f==="<"?r+e+u:f===">"?u+r+e:f==="^"?u.substring(0,l>>=1)+r+e+u.substring(l):r+(T?e:u+e))+t}}}var Ht=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var Bt=P.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=P.round(e,Nt(e,t))).toFixed(Math.max(0,Math.min(20,Nt(e*(1+1e-15),t))))}});function qt(e){return e+""}var Ut=P.time={},Yt=Date;function Vt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Vt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Gt.setUTCDate.apply(this._,arguments)},setDay:function(){Gt.setUTCDay.apply(this._,arguments)},setFullYear:function(){Gt.setUTCFullYear.apply(this._,arguments)},setHours:function(){Gt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Gt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Gt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Gt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Gt.setUTCSeconds.apply(this._,arguments)},setTime:function(){Gt.setTime.apply(this._,arguments)}};var Gt=Date.prototype;function Wt(a,i,o){function e(e){var t=a(e),r=n(t,1);return e-t<r-e?t:r}function s(e){i(e=a(new Yt(e-1)),1);return e}function n(e,t){i(e=new Yt(+e),t);return e}function l(e,t,r){var a=s(e),n=[];if(r>1){while(a<t){if(!(o(a)%r))n.push(new Date(+a));i(a,1)}}else{while(a<t)n.push(new Date(+a)),i(a,1)}return n}function t(e,t,r){try{Yt=Vt;var a=new Vt;a._=e;return l(a,t,r)}finally{Yt=Date}}a.floor=a;a.round=e;a.ceil=s;a.offset=n;a.range=l;var r=a.utc=$t(a);r.floor=r;r.round=$t(e);r.ceil=$t(s);r.offset=$t(n);r.range=t;return a}function $t(a){return function(e,t){try{Yt=Vt;var r=new Vt;r._=e;return a(r,t)._}finally{Yt=Date}}}Ut.year=Wt(function(e){e=Ut.day(e);e.setMonth(0,1);return e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()});Ut.years=Ut.year.range;Ut.years.utc=Ut.year.utc.range;Ut.day=Wt(function(e){var t=new Yt(2e3,0);t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate());return t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1});Ut.days=Ut.day.range;Ut.days.utc=Ut.day.utc.range;Ut.dayOfYear=function(e){var t=Ut.year(e);return Math.floor((e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,r){r=7-r;var t=Ut[e]=Wt(function(e){(e=Ut.day(e)).setDate(e.getDate()-(e.getDay()+r)%7);return e},function(e,t){e.setDate(e.getDate()+Math.floor(t)*7)},function(e){var t=Ut.year(e).getDay();return Math.floor((Ut.dayOfYear(e)+(t+r)%7)/7)-(t!==r)});Ut[e+"s"]=t.range;Ut[e+"s"].utc=t.utc.range;Ut[e+"OfYear"]=function(e){var t=Ut.year(e).getDay();return Math.floor((Ut.dayOfYear(e)+(t+r)%7)/7)}});Ut.week=Ut.sunday;Ut.weeks=Ut.sunday.range;Ut.weeks.utc=Ut.sunday.utc.range;Ut.weekOfYear=Ut.sundayOfYear;function Zt(e){var t=e.dateTime,r=e.date,a=e.time,n=e.periods,i=e.days,o=e.shortDays,s=e.months,l=e.shortMonths;function u(s){var l=s.length;function e(e){var t=[],r=-1,a=0,n,i,o;while(++r<l){if(s.charCodeAt(r)===37){t.push(s.slice(a,r));if((i=Xt[n=s.charAt(++r)])!=null)n=s.charAt(++r);if(o=b[n])n=o(e,i==null?n==="e"?" ":"0":i);t.push(n);a=r+1}}t.push(s.slice(a,r));return t.join("")}e.parse=function(e){var t={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=c(t,s,e,0);if(r!=e.length)return null;if("p"in t)t.H=t.H%12+t.p*12;var a=t.Z!=null&&Yt!==Vt,n=new(a?Vt:Yt);if("j"in t)n.setFullYear(t.y,0,t.j);else if("W"in t||"U"in t){if(!("w"in t))t.w="W"in t?1:0;n.setFullYear(t.y,0,1);n.setFullYear(t.y,0,"W"in t?(t.w+6)%7+t.W*7-(n.getDay()+5)%7:t.w+t.U*7-(n.getDay()+6)%7)}else n.setFullYear(t.y,t.m,t.d);n.setHours(t.H+(t.Z/100|0),t.M+t.Z%100,t.S,t.L);return a?n._:n};e.toString=function(){return s};return e}function c(e,t,r,a){var n,i,o,s=0,l=t.length,u=r.length;while(s<l){if(a>=u)return-1;n=t.charCodeAt(s++);if(n===37){o=t.charAt(s++);i=_[o in Xt?t.charAt(s++):o];if(!i||(a=i(e,r,a))<0)return-1}else if(n!=r.charCodeAt(a++)){return-1}}return a}u.utc=function(e){var r=u(e);function t(e){try{Yt=Vt;var t=new Yt;t._=e;return r(t)}finally{Yt=Date}}t.parse=function(e){try{Yt=Vt;var t=r.parse(e);return t&&t._}finally{Yt=Date}};t.toString=r.toString;return t};u.multi=u.utc.multi=yr;var f=P.map(),d=er(i),v=tr(i),p=er(o),h=tr(o),m=er(s),g=tr(s),y=er(l),x=tr(l);n.forEach(function(e,t){f.set(e.toLowerCase(),t)});var b={a:function(e){return o[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:u(t),d:function(e,t){return Qt(e.getDate(),t,2)},e:function(e,t){return Qt(e.getDate(),t,2)},H:function(e,t){return Qt(e.getHours(),t,2)},I:function(e,t){return Qt(e.getHours()%12||12,t,2)},j:function(e,t){return Qt(1+Ut.dayOfYear(e),t,3)},L:function(e,t){return Qt(e.getMilliseconds(),t,3)},m:function(e,t){return Qt(e.getMonth()+1,t,2)},M:function(e,t){return Qt(e.getMinutes(),t,2)},p:function(e){return n[+(e.getHours()>=12)]},S:function(e,t){return Qt(e.getSeconds(),t,2)},U:function(e,t){return Qt(Ut.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Qt(Ut.mondayOfYear(e),t,2)},x:u(r),X:u(a),y:function(e,t){return Qt(e.getFullYear()%100,t,2)},Y:function(e,t){return Qt(e.getFullYear()%1e4,t,4)},Z:mr,"%":function(){return"%"}};var _={a:w,A:T,b:k,B:M,c:A,d:cr,e:cr,H:dr,I:dr,j:fr,L:hr,m:ur,M:vr,p:L,S:pr,U:ar,w:rr,W:nr,x:S,X:E,y:or,Y:ir,Z:sr,"%":gr};function w(e,t,r){p.lastIndex=0;var a=p.exec(t.slice(r));return a?(e.w=h.get(a[0].toLowerCase()),r+a[0].length):-1}function T(e,t,r){d.lastIndex=0;var a=d.exec(t.slice(r));return a?(e.w=v.get(a[0].toLowerCase()),r+a[0].length):-1}function k(e,t,r){y.lastIndex=0;var a=y.exec(t.slice(r));return a?(e.m=x.get(a[0].toLowerCase()),r+a[0].length):-1}function M(e,t,r){m.lastIndex=0;var a=m.exec(t.slice(r));return a?(e.m=g.get(a[0].toLowerCase()),r+a[0].length):-1}function A(e,t,r){return c(e,b.c.toString(),t,r)}function S(e,t,r){return c(e,b.x.toString(),t,r)}function E(e,t,r){return c(e,b.X.toString(),t,r)}function L(e,t,r){var a=f.get(t.slice(r,r+=2).toLowerCase());return a==null?-1:(e.p=a,r)}return u}var Xt={"-":"",_:" ",0:"0"},Jt=/^\s*\d+/,Kt=/^%/;function Qt(e,t,r){var a=e<0?"-":"",n=(a?-e:e)+"",i=n.length;return a+(i<r?new Array(r-i+1).join(t)+n:n)}function er(e){return new RegExp("^(?:"+e.map(P.requote).join("|")+")","i")}function tr(e){var t=new y,r=-1,a=e.length;while(++r<a)t.set(e[r].toLowerCase(),r);return t}function rr(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function ar(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r));return a?(e.U=+a[0],r+a[0].length):-1}function nr(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r));return a?(e.W=+a[0],r+a[0].length):-1}function ir(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function or(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r,r+2));return a?(e.y=lr(+a[0]),r+a[0].length):-1}function sr(e,t,r){return/^[+-]\d{4}$/.test(t=t.slice(r,r+5))?(e.Z=-t,r+5):-1}function lr(e){return e+(e>68?1900:2e3)}function ur(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function cr(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function fr(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r,r+3));return a?(e.j=+a[0],r+a[0].length):-1}function dr(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function vr(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function pr(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function hr(e,t,r){Jt.lastIndex=0;var a=Jt.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function mr(e){var t=e.getTimezoneOffset(),r=t>0?"-":"+",a=I(t)/60|0,n=I(t)%60;return r+Qt(a,"0",2)+Qt(n,"0",2)}function gr(e,t,r){Kt.lastIndex=0;var a=Kt.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function yr(a){var e=a.length,t=-1;while(++t<e)a[t][0]=this(a[t][0]);return function(e){var t=0,r=a[t];while(!r[1](e))r=a[++t];return r[0](e)}}P.locale=function(e){return{numberFormat:jt(e),timeFormat:Zt(e)}};var xr=P.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});P.format=xr.numberFormat;P.geo={};function br(){}br.prototype={s:0,t:0,add:function(e){wr(e,this.t,_r);wr(_r.s,this.s,this);if(this.s)this.t+=_r.t;else this.s=_r.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var _r=new br;function wr(e,t,r){var a=r.s=e+t,n=a-e,i=a-n;r.t=e-i+(t-n)}P.geo.stream=function(e,t){if(e&&kr.hasOwnProperty(e.type)){kr[e.type](e,t)}else{Tr(e,t)}};function Tr(e,t){if(e&&Mr.hasOwnProperty(e.type)){Mr[e.type](e,t)}}var kr={Feature:function(e,t){Tr(e.geometry,t)},FeatureCollection:function(e,t){var r=e.features,a=-1,n=r.length;while(++a<n)Tr(r[a].geometry,t)}};var Mr={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates;t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){var r=e.coordinates,a=-1,n=r.length;while(++a<n)e=r[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){Ar(e.coordinates,t,0)},MultiLineString:function(e,t){var r=e.coordinates,a=-1,n=r.length;while(++a<n)Ar(r[a],t,0)},Polygon:function(e,t){Sr(e.coordinates,t)},MultiPolygon:function(e,t){var r=e.coordinates,a=-1,n=r.length;while(++a<n)Sr(r[a],t)},GeometryCollection:function(e,t){var r=e.geometries,a=-1,n=r.length;while(++a<n)Tr(r[a],t)}};function Ar(e,t,r){var a=-1,n=e.length-r,i;t.lineStart();while(++a<n)i=e[a],t.point(i[0],i[1],i[2]);t.lineEnd()}function Sr(e,t){var r=-1,a=e.length;t.polygonStart();while(++r<a)Ar(e[r],t,1);t.polygonEnd()}P.geo.area=function(e){Er=0;P.geo.stream(e,Cr);return Er};var Er,Lr=new br;var Cr={sphere:function(){Er+=4*Se},point:C,lineStart:C,lineEnd:C,polygonStart:function(){Lr.reset();Cr.lineStart=Dr},polygonEnd:function(){var e=2*Lr;Er+=e<0?4*Se+e:e;Cr.lineStart=Cr.lineEnd=Cr.point=C}};function Dr(){var r,a,c,f,d;Cr.point=function(e,t){Cr.point=n;c=(r=e)*De,f=Math.cos(t=(a=t)*De/2+Se/4),d=Math.sin(t)};function n(e,t){e*=De;t=t*De/2+Se/4;var r=e-c,a=r>=0?1:-1,n=a*r,i=Math.cos(t),o=Math.sin(t),s=d*o,l=f*i+s*Math.cos(n),u=s*a*Math.sin(n);Lr.add(Math.atan2(u,l));c=e,f=i,d=o}Cr.lineEnd=function(){n(r,a)}}function Or(e){var t=e[0],r=e[1],a=Math.cos(r);return[a*Math.cos(t),a*Math.sin(t),Math.sin(r)]}function Ir(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Pr(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Rr(e,t){e[0]+=t[0];e[1]+=t[1];e[2]+=t[2]}function Nr(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function zr(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t;e[1]/=t;e[2]/=t}function Fr(e){return[Math.atan2(e[1],e[0]),Ne(e[2])]}function jr(e,t){return I(e[0]-t[0])<Me&&I(e[1]-t[1])<Me}P.geo.bounds=function(){var f,d,v,p,h,a,n,m,i,l,u;var c={point:g,lineStart:e,lineEnd:t,polygonStart:function(){c.point=r;c.lineStart=s;c.lineEnd=y;i=0;Cr.polygonStart()},polygonEnd:function(){Cr.polygonEnd();c.point=g;c.lineStart=e;c.lineEnd=t;if(Lr<0)f=-(v=180),d=-(p=90);else if(i>Me)p=90;else if(i<-Me)d=-90;u[0]=f,u[1]=v}};function g(e,t){l.push(u=[f=e,v=e]);if(t<d)d=t;if(t>p)p=t}function o(e,t){var r=Or([e*De,t*De]);if(m){var a=Pr(m,r),n=[a[1],-a[0],0],i=Pr(n,a);zr(i);i=Fr(i);var o=e-h,s=o>0?1:-1,l=i[0]*Oe*s,u=I(o)>180;if(u^(s*h<l&&l<s*e)){var c=i[1]*Oe;if(c>p)p=c}else if(l=(l+360)%360-180,u^(s*h<l&&l<s*e)){var c=-i[1]*Oe;if(c<d)d=c}else{if(t<d)d=t;if(t>p)p=t}if(u){if(e<h){if(x(f,e)>x(f,v))v=e}else{if(x(e,v)>x(f,v))f=e}}else{if(v>=f){if(e<f)f=e;if(e>v)v=e}else{if(e>h){if(x(f,e)>x(f,v))v=e}else{if(x(e,v)>x(f,v))f=e}}}}else{g(e,t)}m=r,h=e}function e(){c.point=o}function t(){u[0]=f,u[1]=v;c.point=g;m=null}function r(e,t){if(m){var r=e-h;i+=I(r)>180?r+(r>0?360:-360):r}else a=e,n=t;Cr.point(e,t);o(e,t)}function s(){Cr.lineStart()}function y(){r(a,n);Cr.lineEnd();if(I(i)>Me)f=-(v=180);u[0]=f,u[1]=v;m=null}function x(e,t){return(t-=e)<0?t+360:t}function b(e,t){return e[0]-t[0]}function _(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(e){p=v=-(f=d=Infinity);l=[];P.geo.stream(e,c);var t=l.length;if(t){l.sort(b);for(var r=1,a=l[0],n,i=[a];r<t;++r){n=l[r];if(_(n[0],a)||_(n[1],a)){if(x(a[0],n[1])>x(a[0],a[1]))a[1]=n[1];if(x(n[0],a[1])>x(a[0],a[1]))a[0]=n[0]}else{i.push(a=n)}}var o=-Infinity,s;for(var t=i.length-1,r=0,a=i[t],n;r<=t;a=n,++r){n=i[r];if((s=x(a[1],n[0]))>o)o=s,f=n[0],v=a[1]}}l=u=null;return f===Infinity||d===Infinity?[[NaN,NaN],[NaN,NaN]]:[[f,d],[v,p]]}}();P.geo.centroid=function(e){Hr=Br=qr=Ur=Yr=Vr=Gr=Wr=$r=Zr=Xr=0;P.geo.stream(e,Jr);var t=$r,r=Zr,a=Xr,n=t*t+r*r+a*a;if(n<Ae){t=Vr,r=Gr,a=Wr;if(Br<Me)t=qr,r=Ur,a=Yr;n=t*t+r*r+a*a;if(n<Ae)return[NaN,NaN]}return[Math.atan2(r,t)*Oe,Ne(a/Math.sqrt(n))*Oe]};var Hr,Br,qr,Ur,Yr,Vr,Gr,Wr,$r,Zr,Xr;var Jr={sphere:C,point:Kr,lineStart:ea,lineEnd:ta,polygonStart:function(){Jr.lineStart=ra},polygonEnd:function(){Jr.lineStart=ea}};function Kr(e,t){e*=De;var r=Math.cos(t*=De);Qr(r*Math.cos(e),r*Math.sin(e),Math.sin(t))}function Qr(e,t,r){++Hr;qr+=(e-qr)/Hr;Ur+=(t-Ur)/Hr;Yr+=(r-Yr)/Hr}function ea(){var s,l,u;Jr.point=function(e,t){e*=De;var r=Math.cos(t*=De);s=r*Math.cos(e);l=r*Math.sin(e);u=Math.sin(t);Jr.point=a;Qr(s,l,u)};function a(e,t){e*=De;var r=Math.cos(t*=De),a=r*Math.cos(e),n=r*Math.sin(e),i=Math.sin(t),o=Math.atan2(Math.sqrt((o=l*i-u*n)*o+(o=u*a-s*i)*o+(o=s*n-l*a)*o),s*a+l*n+u*i);Br+=o;Vr+=o*(s+(s=a));Gr+=o*(l+(l=n));Wr+=o*(u+(u=i));Qr(s,l,u)}}function ta(){Jr.point=Kr}function ra(){var a,n,v,p,h;Jr.point=function(e,t){a=e,n=t;Jr.point=i;e*=De;var r=Math.cos(t*=De);v=r*Math.cos(e);p=r*Math.sin(e);h=Math.sin(t);Qr(v,p,h)};Jr.lineEnd=function(){i(a,n);Jr.lineEnd=ta;Jr.point=Kr};function i(e,t){e*=De;var r=Math.cos(t*=De),a=r*Math.cos(e),n=r*Math.sin(e),i=Math.sin(t),o=p*i-h*n,s=h*a-v*i,l=v*n-p*a,u=Math.sqrt(o*o+s*s+l*l),c=v*a+p*n+h*i,f=u&&-Re(c)/u,d=Math.atan2(u,c);$r+=f*o;Zr+=f*s;Xr+=f*l;Br+=d;Vr+=d*(v+(v=a));Gr+=d*(p+(p=n));Wr+=d*(h+(h=i));Qr(v,p,h)}}function aa(r,a){function e(e,t){return e=r(e,t),a(e[0],e[1])}if(r.invert&&a.invert)e.invert=function(e,t){return e=a.invert(e,t),e&&r.invert(e[0],e[1])};return e}function na(){return true}function ia(e,t,r,a,s){var l=[],u=[];e.forEach(function(e){if((t=e.length-1)<=0)return;var t,r=e[0],a=e[t];if(jr(r,a)){s.lineStart();for(var n=0;n<t;++n)s.point((r=e[n])[0],r[1]);s.lineEnd();return}var i=new sa(r,e,null,true),o=new sa(r,null,i,false);i.o=o;l.push(i);u.push(o);i=new sa(a,e,null,false);o=new sa(a,null,i,true);i.o=o;l.push(i);u.push(o)});u.sort(t);oa(l);oa(u);if(!l.length)return;for(var n=0,i=r,o=u.length;n<o;++n){u[n].e=i=!i}var c=l[0],f,d;while(1){var v=c,p=true;while(v.v)if((v=v.n)===c)return;f=v.z;s.lineStart();do{v.v=v.o.v=true;if(v.e){if(p){for(var n=0,o=f.length;n<o;++n)s.point((d=f[n])[0],d[1])}else{a(v.x,v.n.x,1,s)}v=v.n}else{if(p){f=v.p.z;for(var n=f.length-1;n>=0;--n)s.point((d=f[n])[0],d[1])}else{a(v.x,v.p.x,-1,s)}v=v.p}v=v.o;f=v.z;p=!p}while(!v.v);s.lineEnd()}}function oa(e){if(!(t=e.length))return;var t,r=0,a=e[0],n;while(++r<t){a.n=n=e[r];n.p=a;a=n}a.n=n=e[0];n.p=a}function sa(e,t,r,a){this.x=e;this.z=t;this.o=r;this.e=a;this.v=false;this.n=this.p=null}function la(y,x,b,_){return function(a,o){var n=x(o),t=a.invert(_[0],_[1]);var r={point:i,lineStart:s,lineEnd:l,polygonStart:function(){r.point=h;r.lineStart=m;r.lineEnd=g;u=[];v=[]},polygonEnd:function(){r.point=i;r.lineStart=s;r.lineEnd=l;u=P.merge(u);var e=ma(t,v);if(u.length){if(!d)o.polygonStart(),d=true;ia(u,fa,e,b,o)}else if(e){if(!d)o.polygonStart(),d=true;o.lineStart();b(null,null,1,o);o.lineEnd()}if(d)o.polygonEnd(),d=false;u=v=null},sphere:function(){o.polygonStart();o.lineStart();b(null,null,1,o);o.lineEnd();o.polygonEnd()}};function i(e,t){var r=a(e,t);if(y(e=r[0],t=r[1]))o.point(e,t)}function e(e,t){var r=a(e,t);n.point(r[0],r[1])}function s(){r.point=e;n.lineStart()}function l(){r.point=i;n.lineEnd()}var u;var c=ca(),f=x(c),d=false,v,p;function h(e,t){p.push([e,t]);var r=a(e,t);f.point(r[0],r[1])}function m(){f.lineStart();p=[]}function g(){h(p[0][0],p[0][1]);f.lineEnd();var e=f.clean(),t=c.buffer(),r,a=t.length;p.pop();v.push(p);p=null;if(!a)return;if(e&1){r=t[0];var a=r.length-1,n=-1,i;if(a>0){if(!d)o.polygonStart(),d=true;o.lineStart();while(++n<a)o.point((i=r[n])[0],i[1]);o.lineEnd()}return}if(a>1&&e&2)t.push(t.pop().concat(t.shift()));u.push(t.filter(ua))}return r}}function ua(e){return e.length>1}function ca(){var t=[],r;return{lineStart:function(){t.push(r=[])},point:function(e,t){r.push([e,t])},lineEnd:C,buffer:function(){var e=t;t=[];r=null;return e},rejoin:function(){if(t.length>1)t.push(t.pop().concat(t.shift()))}}}function fa(e,t){return((e=e.x)[0]<0?e[1]-Ce-Me:Ce-e[1])-((t=t.x)[0]<0?t[1]-Ce-Me:Ce-t[1])}var da=la(na,va,ha,[-Se,-Se/2]);function va(n){var i=NaN,o=NaN,s=NaN,l;return{lineStart:function(){n.lineStart();l=1},point:function(e,t){var r=e>0?Se:-Se,a=I(e-i);if(I(a-Se)<Me){n.point(i,o=(o+t)/2>0?Ce:-Ce);n.point(s,o);n.lineEnd();n.lineStart();n.point(r,o);n.point(e,o);l=0}else if(s!==r&&a>=Se){if(I(i-s)<Me)i-=s*Me;if(I(e-r)<Me)e-=r*Me;o=pa(i,o,e,t);n.point(s,o);n.lineEnd();n.lineStart();n.point(r,o);l=0}n.point(i=e,o=t);s=r},lineEnd:function(){n.lineEnd();i=o=NaN},clean:function(){return 2-l}}}function pa(e,t,r,a){var n,i,o=Math.sin(e-r);return I(o)>Me?Math.atan((Math.sin(t)*(i=Math.cos(a))*Math.sin(r)-Math.sin(a)*(n=Math.cos(t))*Math.sin(e))/(n*i*o)):(t+a)/2}function ha(e,t,r,a){var n;if(e==null){n=r*Ce;a.point(-Se,n);a.point(0,n);a.point(Se,n);a.point(Se,0);a.point(Se,-n);a.point(0,-n);a.point(-Se,-n);a.point(-Se,0);a.point(-Se,n)}else if(I(e[0]-t[0])>Me){var i=e[0]<t[0]?Se:-Se;n=r*i/2;a.point(-i,n);a.point(0,n);a.point(i,n)}else{a.point(t[0],t[1])}}function ma(e,t){var r=e[0],a=e[1],n=[Math.sin(r),-Math.cos(r),0],i=0,o=0;Lr.reset();for(var s=0,l=t.length;s<l;++s){var u=t[s],c=u.length;if(!c)continue;var f=u[0],d=f[0],v=f[1]/2+Se/4,p=Math.sin(v),h=Math.cos(v),m=1;while(true){if(m===c)m=0;e=u[m];var g=e[0],y=e[1]/2+Se/4,x=Math.sin(y),b=Math.cos(y),_=g-d,w=_>=0?1:-1,T=w*_,k=T>Se,M=p*x;Lr.add(Math.atan2(M*w*Math.sin(T),h*b+M*Math.cos(T)));i+=k?_+w*Ee:_;if(k^d>=r^g>=r){var A=Pr(Or(f),Or(e));zr(A);var S=Pr(n,A);zr(S);var E=(k^_>=0?-1:1)*Ne(S[2]);if(a>E||a===E&&(A[0]||A[1])){o+=k^_>=0?1:-1}}if(!m++)break;d=g,p=x,h=b,f=e}}return(i<-Me||i<Me&&Lr<-Me)^o&1}function ga(n){var C=Math.cos(n),v=C>0,p=I(C)>Me,e=en(n,6*De);return la(h,t,e,v?[0,-n]:[-Se,n-Se]);function h(e,t){return Math.cos(e)*Math.cos(t)>C}function t(s){var l,u,c,f,d;return{lineStart:function(){f=c=false;d=1},point:function(e,t){var r=[e,t],a,n=h(e,t),i=v?n?0:g(e,t):n?g(e+(e<0?Se:-Se),t):0;if(!l&&(f=c=n))s.lineStart();if(n!==c){a=m(l,r);if(jr(l,a)||jr(r,a)){r[0]+=Me;r[1]+=Me;n=h(r[0],r[1])}}if(n!==c){d=0;if(n){s.lineStart();a=m(r,l);s.point(a[0],a[1])}else{a=m(l,r);s.point(a[0],a[1]);s.lineEnd()}l=a}else if(p&&l&&v^n){var o;if(!(i&u)&&(o=m(r,l,true))){d=0;if(v){s.lineStart();s.point(o[0][0],o[0][1]);s.point(o[1][0],o[1][1]);s.lineEnd()}else{s.point(o[1][0],o[1][1]);s.lineEnd();s.lineStart();s.point(o[0][0],o[0][1])}}}if(n&&(!l||!jr(l,r))){s.point(r[0],r[1])}l=r,c=n,u=i},lineEnd:function(){if(c)s.lineEnd();l=null},clean:function(){return d|(f&&c)<<1}}}function m(e,t,r){var a=Or(e),n=Or(t);var i=[1,0,0],o=Pr(a,n),s=Ir(o,o),l=o[0],u=s-l*l;if(!u)return!r&&e;var c=C*s/u,f=-C*l/u,d=Pr(i,o),v=Nr(i,c),p=Nr(o,f);Rr(v,p);var h=d,m=Ir(v,h),g=Ir(h,h),y=m*m-g*(Ir(v,v)-1);if(y<0)return;var x=Math.sqrt(y),b=Nr(h,(-m-x)/g);Rr(b,v);b=Fr(b);if(!r)return b;var _=e[0],w=t[0],T=e[1],k=t[1],M;if(w<_)M=_,_=w,w=M;var A=w-_,S=I(A-Se)<Me,E=S||A<Me;if(!S&&k<T)M=T,T=k,k=M;if(E?S?T+k>0^b[1]<(I(b[0]-_)<Me?T:k):T<=b[1]&&b[1]<=k:A>Se^(_<=b[0]&&b[0]<=w)){var L=Nr(h,(-m+x)/g);Rr(L,v);return[b,Fr(L)]}}function g(e,t){var r=v?n:Se-n,a=0;if(e<-r)a|=1;else if(e>r)a|=2;if(t<-r)a|=4;else if(t>r)a|=8;return a}}function ya(d,v,p,h){return function(e){var t=e.a,r=e.b,a=t.x,n=t.y,i=r.x,o=r.y,s=0,l=1,u=i-a,c=o-n,f;f=d-a;if(!u&&f>0)return;f/=u;if(u<0){if(f<s)return;if(f<l)l=f}else if(u>0){if(f>l)return;if(f>s)s=f}f=p-a;if(!u&&f<0)return;f/=u;if(u<0){if(f>l)return;if(f>s)s=f}else if(u>0){if(f<s)return;if(f<l)l=f}f=v-n;if(!c&&f>0)return;f/=c;if(c<0){if(f<s)return;if(f<l)l=f}else if(c>0){if(f>l)return;if(f>s)s=f}f=h-n;if(!c&&f<0)return;f/=c;if(c<0){if(f>l)return;if(f>s)s=f}else if(c>0){if(f<s)return;if(f<l)l=f}if(s>0)e.a={x:a+s*u,y:n+s*c};if(l<1)e.b={x:a+l*u,y:n+l*c};return e}}var xa=1e9;P.geo.clipExtent=function(){var t,r,a,n,i,o,s={stream:function(e){if(i)i.valid=false;i=o(e);i.valid=true;return i},extent:function(e){if(!arguments.length)return[[t,r],[a,n]];o=ba(t=+e[0][0],r=+e[0][1],a=+e[1][0],n=+e[1][1]);if(i)i.valid=false,i=null;return s}};return s.extent([[0,0],[960,500]])};function ba(T,k,M,A){return function(n){var a=n,e=ca(),i=ya(T,k,M,A),o,c,s;var t={point:r,lineStart:b,lineEnd:_,polygonStart:function(){n=e;o=[];c=[];x=true},polygonEnd:function(){n=a;o=P.merge(o);var e=l([T,A]),t=x&&e,r=o.length;if(t||r){n.polygonStart();if(t){n.lineStart();u(null,null,1,n);n.lineEnd()}if(r){ia(o,E,e,u,n)}n.polygonEnd()}o=c=s=null}};function l(e){var t=0,r=c.length,a=e[1];for(var n=0;n<r;++n){for(var i=1,o=c[n],s=o.length,l=o[0],u;i<s;++i){u=o[i];if(l[1]<=a){if(u[1]>a&&Pe(l,u,e)>0)++t}else{if(u[1]<=a&&Pe(l,u,e)<0)--t}l=u}}return t!==0}function u(e,t,r,a){var n=0,i=0;if(e==null||(n=S(e,r))!==(i=S(t,r))||L(e,t)<0^r>0){do{a.point(n===0||n===3?T:M,n>1?A:k)}while((n=(n+r+4)%4)!==i)}else{a.point(t[0],t[1])}}function f(e,t){return T<=e&&e<=M&&k<=t&&t<=A}function r(e,t){if(f(e,t))n.point(e,t)}var d,v,p,h,m,g,y,x;function b(){t.point=w;if(c)c.push(s=[]);y=true;g=false;h=m=NaN}function _(){if(o){w(d,v);if(p&&g)e.rejoin();o.push(e.buffer())}t.point=r;if(g)n.lineEnd()}function w(e,t){e=Math.max(-xa,Math.min(xa,e));t=Math.max(-xa,Math.min(xa,t));var r=f(e,t);if(c)s.push([e,t]);if(y){d=e,v=t,p=r;y=false;if(r){n.lineStart();n.point(e,t)}}else{if(r&&g)n.point(e,t);else{var a={a:{x:h,y:m},b:{x:e,y:t}};if(i(a)){if(!g){n.lineStart();n.point(a.a.x,a.a.y)}n.point(a.b.x,a.b.y);if(!r)n.lineEnd();x=false}else if(r){n.lineStart();n.point(e,t);x=false}}}h=e,m=t,g=r}return t};function S(e,t){return I(e[0]-T)<Me?t>0?0:3:I(e[0]-M)<Me?t>0?2:1:I(e[1]-k)<Me?t>0?1:0:t>0?3:2}function E(e,t){return L(e.x,t.x)}function L(e,t){var r=S(e,1),a=S(t,1);return r!==a?r-a:r===0?t[1]-e[1]:r===1?e[0]-t[0]:r===2?e[1]-t[1]:t[0]-e[0]}}function _a(e){var t=0,r=Se/3,a=Ga(e),n=a(t,r);n.parallels=function(e){if(!arguments.length)return[t/Se*180,r/Se*180];return a(t=e[0]*Se/180,r=e[1]*Se/180)};return n}function wa(e,t){var r=Math.sin(e),a=(r+Math.sin(t))/2,n=1+r*(2*a-r),i=Math.sqrt(n)/a;function o(e,t){var r=Math.sqrt(n-2*a*Math.sin(t))/a;return[r*Math.sin(e*=a),i-r*Math.cos(e)]}o.invert=function(e,t){var r=i-t;return[Math.atan2(e,r)/a,Ne((n-(e*e+r*r)*a*a)/(2*a))]};return o}(P.geo.conicEqualArea=function(){return _a(wa)}).raw=wa;P.geo.albers=function(){return P.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};P.geo.albersUsa=function(){var i=P.geo.albers();var o=P.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);var s=P.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);var a,n={point:function(e,t){a=[e,t]}},l,u,c;function f(e){var t=e[0],r=e[1];a=null;(l(t,r),a)||(u(t,r),a)||c(t,r);return a}f.invert=function(e){var t=i.scale(),r=i.translate(),a=(e[0]-r[0])/t,n=(e[1]-r[1])/t;return(n>=.12&&n<.234&&a>=-.425&&a<-.214?o:n>=.166&&n<.234&&a>=-.214&&a<-.115?s:i).invert(e)};f.stream=function(e){var r=i.stream(e),a=o.stream(e),n=s.stream(e);return{point:function(e,t){r.point(e,t);a.point(e,t);n.point(e,t)},sphere:function(){r.sphere();a.sphere();n.sphere()},lineStart:function(){r.lineStart();a.lineStart();n.lineStart()},lineEnd:function(){r.lineEnd();a.lineEnd();n.lineEnd()},polygonStart:function(){r.polygonStart();a.polygonStart();n.polygonStart()},polygonEnd:function(){r.polygonEnd();a.polygonEnd();n.polygonEnd()}}};f.precision=function(e){if(!arguments.length)return i.precision();i.precision(e);o.precision(e);s.precision(e);return f};f.scale=function(e){if(!arguments.length)return i.scale();i.scale(e);o.scale(e*.35);s.scale(e);return f.translate(i.translate())};f.translate=function(e){if(!arguments.length)return i.translate();var t=i.scale(),r=+e[0],a=+e[1];l=i.translate(e).clipExtent([[r-.455*t,a-.238*t],[r+.455*t,a+.238*t]]).stream(n).point;u=o.translate([r-.307*t,a+.201*t]).clipExtent([[r-.425*t+Me,a+.12*t+Me],[r-.214*t-Me,a+.234*t-Me]]).stream(n).point;c=s.translate([r-.205*t,a+.212*t]).clipExtent([[r-.214*t+Me,a+.166*t+Me],[r-.115*t-Me,a+.234*t-Me]]).stream(n).point;return f};return f.scale(1070)};var Ta,ka,Ma={point:C,lineStart:C,lineEnd:C,polygonStart:function(){ka=0;Ma.lineStart=Aa},polygonEnd:function(){Ma.lineStart=Ma.lineEnd=Ma.point=C;Ta+=I(ka/2)}};function Aa(){var r,a,n,i;Ma.point=function(e,t){Ma.point=o;r=n=e,a=i=t};function o(e,t){ka+=i*e-n*t;n=e,i=t}Ma.lineEnd=function(){o(r,a)}}var Sa,Ea,La,Ca;var Da={point:Oa,lineStart:C,lineEnd:C,polygonStart:C,polygonEnd:C};function Oa(e,t){if(e<Sa)Sa=e;if(e>La)La=e;if(t<Ea)Ea=t;if(t>Ca)Ca=t}function Ia(){var r=Pa(4.5),a=[];var n={point:e,lineStart:function(){n.point=t},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o;n.point=e},pointRadius:function(e){r=Pa(e);return n},result:function(){if(a.length){var e=a.join("");a=[];return e}}};function e(e,t){a.push("M",e,",",t,r)}function t(e,t){a.push("M",e,",",t);n.point=i}function i(e,t){a.push("L",e,",",t)}function o(){n.point=e}function s(){a.push("Z")}return n}function Pa(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var Ra={point:Na,lineStart:za,lineEnd:Fa,polygonStart:function(){Ra.lineStart=ja},polygonEnd:function(){Ra.point=Na;Ra.lineStart=za;Ra.lineEnd=Fa}};function Na(e,t){qr+=e;Ur+=t;++Yr}function za(){var i,o;Ra.point=function(e,t){Ra.point=r;Na(i=e,o=t)};function r(e,t){var r=e-i,a=t-o,n=Math.sqrt(r*r+a*a);Vr+=n*(i+e)/2;Gr+=n*(o+t)/2;Wr+=n;Na(i=e,o=t)}}function Fa(){Ra.point=Na}function ja(){var r,a,i,o;Ra.point=function(e,t){Ra.point=n;Na(r=i=e,a=o=t)};function n(e,t){var r=e-i,a=t-o,n=Math.sqrt(r*r+a*a);Vr+=n*(i+e)/2;Gr+=n*(o+t)/2;Wr+=n;n=o*e-i*t;$r+=n*(i+e);Zr+=n*(o+t);Xr+=n*3;Na(i=e,o=t)}Ra.lineEnd=function(){n(r,a)}}function Ha(r){var a=4.5;var n={point:e,lineStart:function(){n.point=t},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o;n.point=e},pointRadius:function(e){a=e;return n},result:C};function e(e,t){r.moveTo(e+a,t);r.arc(e,t,a,0,Ee)}function t(e,t){r.moveTo(e,t);n.point=i}function i(e,t){r.lineTo(e,t)}function o(){n.point=e}function s(){r.closePath()}return n}function Ba(L){var C=.5,D=Math.cos(30*De),w=16;function t(e){return(w?a:r)(e)}function r(r){return Ya(r,function(e,t){e=L(e,t);r.point(e[0],e[1])})}function a(n){var r,a,i,o,s,l,u,c,f,d,v,p,h;var m={point:e,lineStart:t,lineEnd:y,polygonStart:function(){n.polygonStart();m.lineStart=x},polygonEnd:function(){n.polygonEnd();m.lineStart=t}};function e(e,t){e=L(e,t);n.point(e[0],e[1])}function t(){f=NaN;m.point=g;n.lineStart()}function g(e,t){var r=Or([e,t]),a=L(e,t);O(f,d,c,v,p,h,f=a[0],d=a[1],c=e,v=r[0],p=r[1],h=r[2],w,n);n.point(f,d)}function y(){m.point=e;n.lineEnd()}function x(){t();m.point=b;m.lineEnd=_}function b(e,t){g(r=e,a=t),i=f,o=d,s=v,l=p,u=h;m.point=g}function _(){O(f,d,c,v,p,h,i,o,r,s,l,u,w,n);m.lineEnd=y;y()}return m}function O(e,t,r,a,n,i,o,s,l,u,c,f,d,v){var p=o-e,h=s-t,m=p*p+h*h;if(m>4*C&&d--){var g=a+u,y=n+c,x=i+f,b=Math.sqrt(g*g+y*y+x*x),_=Math.asin(x/=b),w=I(I(x)-1)<Me||I(r-l)<Me?(r+l)/2:Math.atan2(y,g),T=L(w,_),k=T[0],M=T[1],A=k-e,S=M-t,E=h*A-p*S;if(E*E/m>C||I((p*A+h*S)/m-.5)>.3||a*u+n*c+i*f<D){O(e,t,r,a,n,i,k,M,w,g/=b,y/=b,x,d,v);v.point(k,M);O(k,M,w,g,y,x,o,s,l,u,c,f,d,v)}}}t.precision=function(e){if(!arguments.length)return Math.sqrt(C);w=(C=e*e)>0&&16;return t};return t}P.geo.path=function(){var t=4.5,r,a,n,i,o;function s(e){if(e){if(typeof t==="function")i.pointRadius(+t.apply(this,arguments));if(!o||!o.valid)o=n(i);P.geo.stream(e,o)}return i.result()}s.area=function(e){Ta=0;P.geo.stream(e,n(Ma));return Ta};s.centroid=function(e){qr=Ur=Yr=Vr=Gr=Wr=$r=Zr=Xr=0;P.geo.stream(e,n(Ra));return Xr?[$r/Xr,Zr/Xr]:Wr?[Vr/Wr,Gr/Wr]:Yr?[qr/Yr,Ur/Yr]:[NaN,NaN]};s.bounds=function(e){La=Ca=-(Sa=Ea=Infinity);P.geo.stream(e,n(Da));return[[Sa,Ea],[La,Ca]]};s.projection=function(e){if(!arguments.length)return r;n=(r=e)?e.stream||qa(e):z;return l()};s.context=function(e){if(!arguments.length)return a;i=(a=e)==null?new Ia:new Ha(e);if(typeof t!=="function")i.pointRadius(t);return l()};s.pointRadius=function(e){if(!arguments.length)return t;t=typeof e==="function"?e:(i.pointRadius(+e),+e);return s};function l(){o=null;return s}return s.projection(P.geo.albersUsa()).context(null)};function qa(r){var t=Ba(function(e,t){return r([e*Oe,t*Oe])});return function(e){return Wa(t(e))}}P.geo.transform=function(a){return{stream:function(e){var t=new Ua(e);for(var r in a)t[r]=a[r];return t}}};function Ua(e){this.stream=e}Ua.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ya(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}P.geo.projection=Va;P.geo.projectionMutator=Ga;function Va(e){return Ga(function(){return e})()}function Ga(e){var r,t,a,n=Ba(function(e,t){e=r(e,t);return[e[0]*i+v,p-e[1]*i]}),i=150,o=480,s=250,l=0,u=0,c=0,f=0,d=0,v,p,h=da,m=z,g=null,y=null,x;function b(e){e=a(e[0]*De,e[1]*De);return[e[0]*i+v,p-e[1]*i]}function _(e){e=a.invert((e[0]-v)/i,(p-e[1])/i);return e&&[e[0]*Oe,e[1]*Oe]}b.stream=function(e){if(x)x.valid=false;x=Wa(h(t,n(m(e))));x.valid=true;return x};b.clipAngle=function(e){if(!arguments.length)return g;h=e==null?(g=e,da):ga((g=+e)*De);return T()};b.clipExtent=function(e){if(!arguments.length)return y;y=e;m=e?ba(e[0][0],e[0][1],e[1][0],e[1][1]):z;return T()};b.scale=function(e){if(!arguments.length)return i;i=+e;return w()};b.translate=function(e){if(!arguments.length)return[o,s];o=+e[0];s=+e[1];return w()};b.center=function(e){if(!arguments.length)return[l*Oe,u*Oe];l=e[0]%360*De;u=e[1]%360*De;return w()};b.rotate=function(e){if(!arguments.length)return[c*Oe,f*Oe,d*Oe];c=e[0]%360*De;f=e[1]%360*De;d=e.length>2?e[2]%360*De:0;return w()};P.rebind(b,n,"precision");function w(){a=aa(t=Xa(c,f,d),r);var e=r(l,u);v=o-e[0]*i;p=s+e[1]*i;return T()}function T(){if(x)x.valid=false,x=null;return b}return function(){r=e.apply(this,arguments);b.invert=r.invert&&_;return w()}}function Wa(r){return Ya(r,function(e,t){r.point(e*De,t*De)})}function $a(e,t){return[e,t]}(P.geo.equirectangular=function(){return Va($a)}).raw=$a.invert=$a;P.geo.rotation=function(t){t=Xa(t[0]%360*De,t[1]*De,t.length>2?t[2]*De:0);function e(e){e=t(e[0]*De,e[1]*De);return e[0]*=Oe,e[1]*=Oe,e}e.invert=function(e){e=t.invert(e[0]*De,e[1]*De);return e[0]*=Oe,e[1]*=Oe,e};return e};function Za(e,t){return[e>Se?e-Ee:e<-Se?e+Ee:e,t]}Za.invert=$a;function Xa(e,t,r){return e?t||r?aa(Ka(e),Qa(t,r)):Ka(e):t||r?Qa(t,r):Za}function Ja(r){return function(e,t){return e+=r,[e>Se?e-Ee:e<-Se?e+Ee:e,t]}}function Ka(e){var t=Ja(e);t.invert=Ja(-e);return t}function Qa(e,t){var s=Math.cos(e),l=Math.sin(e),u=Math.cos(t),c=Math.sin(t);function r(e,t){var r=Math.cos(t),a=Math.cos(e)*r,n=Math.sin(e)*r,i=Math.sin(t),o=i*s+a*l;return[Math.atan2(n*u-o*c,a*s-i*l),Ne(o*u+n*c)]}r.invert=function(e,t){var r=Math.cos(t),a=Math.cos(e)*r,n=Math.sin(e)*r,i=Math.sin(t),o=i*u-n*c;return[Math.atan2(n*u+i*c,a*s+o*l),Ne(o*s-a*l)]};return r}P.geo.circle=function(){var t=[0,0],r,a=6,n;function i(){var e=typeof t==="function"?t.apply(this,arguments):t,r=Xa(-e[0]*De,-e[1]*De,0).invert,a=[];n(null,null,1,{point:function(e,t){a.push(e=r(e,t));e[0]*=Oe,e[1]*=Oe}});return{type:"Polygon",coordinates:[a]}}i.origin=function(e){if(!arguments.length)return t;t=e;return i};i.angle=function(e){if(!arguments.length)return r;n=en((r=+e)*De,a*De);return i};i.precision=function(e){if(!arguments.length)return a;n=en(r*De,(a=+e)*De);return i};return i.angle(90)};function en(s,l){var u=Math.cos(s),c=Math.sin(s);return function(e,t,r,a){var n=r*l;if(e!=null){e=tn(u,e);t=tn(u,t);if(r>0?e<t:e>t)e+=r*Ee}else{e=s+r*Ee;t=s-.5*n}for(var i,o=e;r>0?o>t:o<t;o-=n){a.point((i=Fr([u,-c*Math.cos(o),-c*Math.sin(o)]))[0],i[1])}}}function tn(e,t){var r=Or(t);r[0]-=e;zr(r);var a=Re(-r[1]);return((-r[2]<0?-a:a)+2*Math.PI-Me)%(2*Math.PI)}P.geo.distance=function(e,t){var r=(t[0]-e[0])*De,a=e[1]*De,n=t[1]*De,i=Math.sin(r),o=Math.cos(r),s=Math.sin(a),l=Math.cos(a),u=Math.sin(n),c=Math.cos(n),f;return Math.atan2(Math.sqrt((f=c*i)*f+(f=l*u-s*c*o)*f),s*u+l*c*o)};P.geo.graticule=function(){var t,r,a,n,i,o,s,l,u=10,c=u,f=90,d=360,v,p,h,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:e()}}function e(){return P.range(Math.ceil(n/f)*f,a,f).map(h).concat(P.range(Math.ceil(l/d)*d,s,d).map(m)).concat(P.range(Math.ceil(r/u)*u,t,u).filter(function(e){return I(e%f)>Me}).map(v)).concat(P.range(Math.ceil(o/c)*c,i,c).filter(function(e){return I(e%d)>Me}).map(p))}y.lines=function(){return e().map(function(e){return{type:"LineString",coordinates:e}})};y.outline=function(){return{type:"Polygon",coordinates:[h(n).concat(m(s).slice(1),h(a).reverse().slice(1),m(l).reverse().slice(1))]}};y.extent=function(e){if(!arguments.length)return y.minorExtent();return y.majorExtent(e).minorExtent(e)};y.majorExtent=function(e){if(!arguments.length)return[[n,l],[a,s]];n=+e[0][0],a=+e[1][0];l=+e[0][1],s=+e[1][1];if(n>a)e=n,n=a,a=e;if(l>s)e=l,l=s,s=e;return y.precision(g)};y.minorExtent=function(e){if(!arguments.length)return[[r,o],[t,i]];r=+e[0][0],t=+e[1][0];o=+e[0][1],i=+e[1][1];if(r>t)e=r,r=t,t=e;if(o>i)e=o,o=i,i=e;return y.precision(g)};y.step=function(e){if(!arguments.length)return y.minorStep();return y.majorStep(e).minorStep(e)};y.majorStep=function(e){if(!arguments.length)return[f,d];f=+e[0],d=+e[1];return y};y.minorStep=function(e){if(!arguments.length)return[u,c];u=+e[0],c=+e[1];return y};y.precision=function(e){if(!arguments.length)return g;g=+e;v=rn(o,i,90);p=an(r,t,g);h=rn(l,s,90);m=an(n,a,g);return y};return y.majorExtent([[-180,-90+Me],[180,90-Me]]).minorExtent([[-180,-80-Me],[180,80+Me]])};function rn(e,t,r){var a=P.range(e,t-Me,r).concat(t);return function(t){return a.map(function(e){return[t,e]})}}function an(e,t,r){var a=P.range(e,t-Me,r).concat(t);return function(t){return a.map(function(e){return[e,t]})}}function nn(e){return e.source}function on(e){return e.target}P.geo.greatArc=function(){var t=nn,r,a=on,n;function i(){return{type:"LineString",coordinates:[r||t.apply(this,arguments),n||a.apply(this,arguments)]}}i.distance=function(){return P.geo.distance(r||t.apply(this,arguments),n||a.apply(this,arguments))};i.source=function(e){if(!arguments.length)return t;t=e,r=typeof e==="function"?null:e;return i};i.target=function(e){if(!arguments.length)return a;a=e,n=typeof e==="function"?null:e;return i};i.precision=function(){return arguments.length?i:0};return i};P.geo.interpolate=function(e,t){return sn(e[0]*De,e[1]*De,t[0]*De,t[1]*De)};function sn(e,t,r,a){var n=Math.cos(t),o=Math.sin(t),i=Math.cos(a),s=Math.sin(a),l=n*Math.cos(e),u=n*Math.sin(e),c=i*Math.cos(r),f=i*Math.sin(r),d=2*Math.asin(Math.sqrt(He(a-t)+n*i*He(r-e))),v=1/Math.sin(d);var p=d?function(e){var t=Math.sin(e*=d)*v,r=Math.sin(d-e)*v,a=r*l+t*c,n=r*u+t*f,i=r*o+t*s;return[Math.atan2(n,a)*Oe,Math.atan2(i,Math.sqrt(a*a+n*n))*Oe]}:function(){return[e*Oe,t*Oe]};p.distance=d;return p}P.geo.length=function(e){ln=0;P.geo.stream(e,un);return ln};var ln;var un={sphere:C,point:C,lineStart:cn,lineEnd:C,polygonStart:C,polygonEnd:C};function cn(){var o,s,l;un.point=function(e,t){o=e*De,s=Math.sin(t*=De),l=Math.cos(t);un.point=r};un.lineEnd=function(){un.point=un.lineEnd=C};function r(e,t){var r=Math.sin(t*=De),a=Math.cos(t),n=I((e*=De)-o),i=Math.cos(n);ln+=Math.atan2(Math.sqrt((n=a*Math.sin(n))*n+(n=l*r-s*a*i)*n),s*r+l*a*i);o=e,s=r,l=a}}function fn(i,o){function e(e,t){var r=Math.cos(e),a=Math.cos(t),n=i(r*a);return[n*a*Math.sin(e),n*Math.sin(t)]}e.invert=function(e,t){var r=Math.sqrt(e*e+t*t),a=o(r),n=Math.sin(a),i=Math.cos(a);return[Math.atan2(e*n,r*i),Math.asin(r&&t*n/r)]};return e}var dn=fn(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(P.geo.azimuthalEqualArea=function(){return Va(dn)}).raw=dn;var vn=fn(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},z);(P.geo.azimuthalEquidistant=function(){return Va(vn)}).raw=vn;function pn(e,t){var r=Math.cos(e),a=function(e){return Math.tan(Se/4+e/2)},n=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(a(t)/a(e)),i=r*Math.pow(a(e),n)/n;if(!n)return gn;function o(e,t){if(i>0){if(t<-Ce+Me)t=-Ce+Me}else{if(t>Ce-Me)t=Ce-Me}var r=i/Math.pow(a(t),n);return[r*Math.sin(n*e),i-r*Math.cos(n*e)]}o.invert=function(e,t){var r=i-t,a=Ie(n)*Math.sqrt(e*e+r*r);return[Math.atan2(e,r)/n,2*Math.atan(Math.pow(i/a,1/n))-Ce]};return o}(P.geo.conicConformal=function(){return _a(pn)}).raw=pn;function hn(e,t){var r=Math.cos(e),a=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),n=r/a+e;if(I(a)<Me)return $a;function i(e,t){var r=n-t;return[r*Math.sin(a*e),n-r*Math.cos(a*e)]}i.invert=function(e,t){var r=n-t;return[Math.atan2(e,r)/a,n-Ie(a)*Math.sqrt(e*e+r*r)]};return i}(P.geo.conicEquidistant=function(){return _a(hn)}).raw=hn;var mn=fn(function(e){return 1/e},Math.atan);(P.geo.gnomonic=function(){return Va(mn)}).raw=mn;function gn(e,t){return[e,Math.log(Math.tan(Se/4+t/2))]}gn.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Ce]};function yn(e){var n=Va(e),i=n.scale,o=n.translate,s=n.clipExtent,l;n.scale=function(){var e=i.apply(n,arguments);return e===n?l?n.clipExtent(null):n:e};n.translate=function(){var e=o.apply(n,arguments);return e===n?l?n.clipExtent(null):n:e};n.clipExtent=function(e){var t=s.apply(n,arguments);if(t===n){if(l=e==null){var r=Se*i(),a=o();s([[a[0]-r,a[1]-r],[a[0]+r,a[1]+r]])}}else if(l){t=null}return t};return n.clipExtent(null)}(P.geo.mercator=function(){return yn(gn)}).raw=gn;var xn=fn(function(){return 1},Math.asin);(P.geo.orthographic=function(){return Va(xn)}).raw=xn;var bn=fn(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(P.geo.stereographic=function(){return Va(bn)}).raw=bn;function _n(e,t){return[Math.log(Math.tan(Se/4+t/2)),-e]}_n.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Ce]};(P.geo.transverseMercator=function(){var e=yn(_n),t=e.center,r=e.rotate;e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])};e.rotate=function(e){return e?r([e[0],e[1],e.length>2?e[2]+90:90]):(e=r(),[e[0],e[1],e[2]-90])};return r([0,0,90])}).raw=_n;P.geom={};function wn(e){return e[0]}function Tn(e){return e[1]}P.geom.hull=function(e){var d=wn,v=Tn;if(arguments.length)return t(e);function t(e){if(e.length<3)return[];var t=wt(d),r=wt(v),a,n=e.length,i=[],o=[];for(a=0;a<n;a++){i.push([+t.call(this,e[a],a),+r.call(this,e[a],a),a])}i.sort(Mn);for(a=0;a<n;a++)o.push([i[a][0],-i[a][1]]);var s=kn(i),l=kn(o);var u=l[0]===s[0],c=l[l.length-1]===s[s.length-1],f=[];for(a=s.length-1;a>=0;--a)f.push(e[i[s[a]][2]]);for(a=+u;a<l.length-c;++a)f.push(e[i[l[a]][2]]);return f}t.x=function(e){return arguments.length?(d=e,t):d};t.y=function(e){return arguments.length?(v=e,t):v};return t};function kn(e){var t=e.length,r=[0,1],a=2;for(var n=2;n<t;n++){while(a>1&&Pe(e[r[a-2]],e[r[a-1]],e[n])<=0)--a;r[a++]=n}return r.slice(0,a)}function Mn(e,t){return e[0]-t[0]||e[1]-t[1]}P.geom.polygon=function(e){q(e,An);return e};var An=P.geom.polygon.prototype=[];An.area=function(){var e=-1,t=this.length,r,a=this[t-1],n=0;while(++e<t){r=a;a=this[e];n+=r[1]*a[0]-r[0]*a[1]}return n*.5};An.centroid=function(e){var t=-1,r=this.length,a=0,n=0,i,o=this[r-1],s;if(!arguments.length)e=-1/(6*this.area());while(++t<r){i=o;o=this[t];s=i[0]*o[1]-o[0]*i[1];a+=(i[0]+o[0])*s;n+=(i[1]+o[1])*s}return[a*e,n*e]};An.clip=function(e){var t,r=Ln(e),a=-1,n=this.length-Ln(this),i,o,s=this[n-1],l,u,c;while(++a<n){t=e.slice();e.length=0;l=this[a];u=t[(o=t.length-r)-1];i=-1;while(++i<o){c=t[i];if(Sn(c,s,l)){if(!Sn(u,s,l)){e.push(En(u,c,s,l))}e.push(c)}else if(Sn(u,s,l)){e.push(En(u,c,s,l))}u=c}if(r)e.push(e[0]);s=l}return e};function Sn(e,t,r){return(r[0]-t[0])*(e[1]-t[1])<(r[1]-t[1])*(e[0]-t[0])}function En(e,t,r,a){var n=e[0],i=r[0],o=t[0]-n,s=a[0]-i,l=e[1],u=r[1],c=t[1]-l,f=a[1]-u,d=(s*(l-u)-f*(n-i))/(f*o-s*c);return[n+d*o,l+d*c]}function Ln(e){var t=e[0],r=e[e.length-1];return!(t[0]-r[0]||t[1]-r[1])}var Cn,Dn,On,In=[],Pn,Rn,Nn=[];function zn(){ni(this);this.edge=this.site=this.circle=null}function Fn(e){var t=In.pop()||new zn;t.site=e;return t}function jn(e){Zn(e);On.remove(e);In.push(e);ni(e)}function Hn(e){var t=e.circle,r=t.x,a=t.cy,n={x:r,y:a},i=e.P,o=e.N,s=[e];jn(e);var l=i;while(l.circle&&I(r-l.circle.x)<Me&&I(a-l.circle.cy)<Me){i=l.P;s.unshift(l);jn(l);l=i}s.unshift(l);Zn(l);var u=o;while(u.circle&&I(r-u.circle.x)<Me&&I(a-u.circle.cy)<Me){o=u.N;s.push(u);jn(u);u=o}s.push(u);Zn(u);var c=s.length,f;for(f=1;f<c;++f){u=s[f];l=s[f-1];ti(u.edge,l.site,u.site,n)}l=s[0];u=s[c-1];u.edge=Qn(l.site,u.site,null,n);$n(l);$n(u)}function Bn(e){var t=e.x,r=e.y,a,n,i,o,s=On._;while(s){i=qn(s,r)-t;if(i>Me)s=s.L;else{o=t-Un(s,r);if(o>Me){if(!s.R){a=s;break}s=s.R}else{if(i>-Me){a=s.P;n=s}else if(o>-Me){a=s;n=s.N}else{a=n=s}break}}}var l=Fn(e);On.insert(a,l);if(!a&&!n)return;if(a===n){Zn(a);n=Fn(a.site);On.insert(l,n);l.edge=n.edge=Qn(a.site,l.site);$n(a);$n(n);return}if(!n){l.edge=Qn(a.site,l.site);return}Zn(a);Zn(n);var u=a.site,c=u.x,f=u.y,d=e.x-c,v=e.y-f,p=n.site,h=p.x-c,m=p.y-f,g=2*(d*m-v*h),y=d*d+v*v,x=h*h+m*m,b={x:(m*y-v*x)/g+c,y:(d*x-h*y)/g+f};ti(n.edge,u,p,b);l.edge=Qn(u,e,null,b);n.edge=Qn(e,p,null,b);$n(a);$n(n)}function qn(e,t){var r=e.site,a=r.x,n=r.y,i=n-t;if(!i)return a;var o=e.P;if(!o)return-Infinity;r=o.site;var s=r.x,l=r.y,u=l-t;if(!u)return s;var c=s-a,f=1/i-1/u,d=c/u;if(f)return(-d+Math.sqrt(d*d-2*f*(c*c/(-2*u)-l+u/2+n-i/2)))/f+a;return(a+s)/2}function Un(e,t){var r=e.N;if(r)return qn(r,t);var a=e.site;return a.y===t?a.x:Infinity}function Yn(e){this.site=e;this.edges=[]}Yn.prototype.prepare=function(){var e=this.edges,t=e.length,r;while(t--){r=e[t].edge;if(!r.b||!r.a)e.splice(t,1)}e.sort(Gn);return e.length};function Vn(e){var t=e[0][0],r=e[1][0],a=e[0][1],n=e[1][1],i,o,s,l,u=Dn,c=u.length,f,d,v,p,h,m;while(c--){f=u[c];if(!f||!f.prepare())continue;v=f.edges;p=v.length;d=0;while(d<p){m=v[d].end(),s=m.x,l=m.y;h=v[++d%p].start(),i=h.x,o=h.y;if(I(s-i)>Me||I(l-o)>Me){v.splice(d,0,new ri(ei(f.site,m,I(s-t)<Me&&n-l>Me?{x:t,y:I(i-t)<Me?o:n}:I(l-n)<Me&&r-s>Me?{x:I(o-n)<Me?i:r,y:n}:I(s-r)<Me&&l-a>Me?{x:r,y:I(i-r)<Me?o:a}:I(l-a)<Me&&s-t>Me?{x:I(o-a)<Me?i:t,y:a}:null),f.site,null));++p}}}}function Gn(e,t){return t.angle-e.angle}function Wn(){ni(this);this.x=this.y=this.arc=this.site=this.cy=null}function $n(e){var t=e.P,r=e.N;if(!t||!r)return;var a=t.site,n=e.site,i=r.site;if(a===i)return;var o=n.x,s=n.y,l=a.x-o,u=a.y-s,c=i.x-o,f=i.y-s;var d=2*(l*f-u*c);if(d>=-Ae)return;var v=l*l+u*u,p=c*c+f*f,h=(f*v-u*p)/d,m=(l*p-c*v)/d,f=m+s;var g=Nn.pop()||new Wn;g.arc=e;g.site=n;g.x=h+o;g.y=f+Math.sqrt(h*h+m*m);g.cy=f;e.circle=g;var y=null,x=Rn._;while(x){if(g.y<x.y||g.y===x.y&&g.x<=x.x){if(x.L)x=x.L;else{y=x.P;break}}else{if(x.R)x=x.R;else{y=x;break}}}Rn.insert(y,g);if(!y)Pn=g}function Zn(e){var t=e.circle;if(t){if(!t.P)Pn=t.N;Rn.remove(t);Nn.push(t);ni(t);e.circle=null}}function Xn(e){var t=Cn,r=ya(e[0][0],e[0][1],e[1][0],e[1][1]),a=t.length,n;while(a--){n=t[a];if(!Jn(n,e)||!r(n)||I(n.a.x-n.b.x)<Me&&I(n.a.y-n.b.y)<Me){n.a=n.b=null;t.splice(a,1)}}}function Jn(e,t){var r=e.b;if(r)return true;var a=e.a,n=t[0][0],i=t[1][0],o=t[0][1],s=t[1][1],l=e.l,u=e.r,c=l.x,f=l.y,d=u.x,v=u.y,p=(c+d)/2,h=(f+v)/2,m,g;if(v===f){if(p<n||p>=i)return;if(c>d){if(!a)a={x:p,y:o};else if(a.y>=s)return;r={x:p,y:s}}else{if(!a)a={x:p,y:s};else if(a.y<o)return;r={x:p,y:o}}}else{m=(c-d)/(v-f);g=h-m*p;if(m<-1||m>1){if(c>d){if(!a)a={x:(o-g)/m,y:o};else if(a.y>=s)return;r={x:(s-g)/m,y:s}}else{if(!a)a={x:(s-g)/m,y:s};else if(a.y<o)return;r={x:(o-g)/m,y:o}}}else{if(f<v){if(!a)a={x:n,y:m*n+g};else if(a.x>=i)return;r={x:i,y:m*i+g}}else{if(!a)a={x:i,y:m*i+g};else if(a.x<n)return;r={x:n,y:m*n+g}}}}e.a=a;e.b=r;return true}function Kn(e,t){this.l=e;this.r=t;this.a=this.b=null}function Qn(e,t,r,a){var n=new Kn(e,t);Cn.push(n);if(r)ti(n,e,t,r);if(a)ti(n,t,e,a);Dn[e.i].edges.push(new ri(n,e,t));Dn[t.i].edges.push(new ri(n,t,e));return n}function ei(e,t,r){var a=new Kn(e,null);a.a=t;a.b=r;Cn.push(a);return a}function ti(e,t,r,a){if(!e.a&&!e.b){e.a=a;e.l=t;e.r=r}else if(e.l===r){e.b=a}else{e.a=a}}function ri(e,t,r){var a=e.a,n=e.b;this.edge=e;this.site=t;this.angle=r?Math.atan2(r.y-t.y,r.x-t.x):e.l===t?Math.atan2(n.x-a.x,a.y-n.y):Math.atan2(a.x-n.x,n.y-a.y)}ri.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ai(){this._=null}function ni(e){e.U=e.C=e.L=e.R=e.P=e.N=null}ai.prototype={insert:function(e,t){var r,a,n;if(e){t.P=e;t.N=e.N;if(e.N)e.N.P=t;e.N=t;if(e.R){e=e.R;while(e.L)e=e.L;e.L=t}else{e.R=t}r=e}else if(this._){e=si(this._);t.P=null;t.N=e;e.P=e.L=t;r=e}else{t.P=t.N=null;this._=t;r=null}t.L=t.R=null;t.U=r;t.C=true;e=t;while(r&&r.C){a=r.U;if(r===a.L){n=a.R;if(n&&n.C){r.C=n.C=false;a.C=true;e=a}else{if(e===r.R){ii(this,r);e=r;r=e.U}r.C=false;a.C=true;oi(this,a)}}else{n=a.L;if(n&&n.C){r.C=n.C=false;a.C=true;e=a}else{if(e===r.L){oi(this,r);e=r;r=e.U}r.C=false;a.C=true;ii(this,a)}}r=e.U}this._.C=false},remove:function(e){if(e.N)e.N.P=e.P;if(e.P)e.P.N=e.N;e.N=e.P=null;var t=e.U,r,a=e.L,n=e.R,i,o;if(!a)i=n;else if(!n)i=a;else i=si(n);if(t){if(t.L===e)t.L=i;else t.R=i}else{this._=i}if(a&&n){o=i.C;i.C=e.C;i.L=a;a.U=i;if(i!==n){t=i.U;i.U=e.U;e=i.R;t.L=e;i.R=n;n.U=i}else{i.U=t;t=i;e=i.R}}else{o=e.C;e=i}if(e)e.U=t;if(o)return;if(e&&e.C){e.C=false;return}do{if(e===this._)break;if(e===t.L){r=t.R;if(r.C){r.C=false;t.C=true;ii(this,t);r=t.R}if(r.L&&r.L.C||r.R&&r.R.C){if(!r.R||!r.R.C){r.L.C=false;r.C=true;oi(this,r);r=t.R}r.C=t.C;t.C=r.R.C=false;ii(this,t);e=this._;break}}else{r=t.L;if(r.C){r.C=false;t.C=true;oi(this,t);r=t.L}if(r.L&&r.L.C||r.R&&r.R.C){if(!r.L||!r.L.C){r.R.C=false;r.C=true;ii(this,r);r=t.L}r.C=t.C;t.C=r.L.C=false;oi(this,t);e=this._;break}}r.C=true;e=t;t=t.U}while(!e.C);if(e)e.C=false}};function ii(e,t){var r=t,a=t.R,n=r.U;if(n){if(n.L===r)n.L=a;else n.R=a}else{e._=a}a.U=n;r.U=a;r.R=a.L;if(r.R)r.R.U=r;a.L=r}function oi(e,t){var r=t,a=t.L,n=r.U;if(n){if(n.L===r)n.L=a;else n.R=a}else{e._=a}a.U=n;r.U=a;r.L=a.R;if(r.L)r.L.U=r;a.R=r}function si(e){while(e.L)e=e.L;return e}function li(e,t){var r=e.sort(ui).pop(),a,n,i;Cn=[];Dn=new Array(e.length);On=new ai;Rn=new ai;while(true){i=Pn;if(r&&(!i||r.y<i.y||r.y===i.y&&r.x<i.x)){if(r.x!==a||r.y!==n){Dn[r.i]=new Yn(r);Bn(r);a=r.x,n=r.y}r=e.pop()}else if(i){Hn(i.arc)}else{break}}if(t)Xn(t),Vn(t);var o={cells:Dn,edges:Cn};On=Rn=Cn=Dn=null;return o}function ui(e,t){return t.y-e.y||t.x-e.x}P.geom.voronoi=function(e){var t=wn,r=Tn,a=t,n=r,f=ci;if(e)return i(e);function i(i){var o=new Array(i.length),s=f[0][0],l=f[0][1],u=f[1][0],c=f[1][1];li(d(i),f).cells.forEach(function(e,t){var r=e.edges,a=e.site,n=o[t]=r.length?r.map(function(e){var t=e.start();return[t.x,t.y]}):a.x>=s&&a.x<=u&&a.y>=l&&a.y<=c?[[s,c],[u,c],[u,l],[s,l]]:[];n.point=i[t]});return o}function d(e){return e.map(function(e,t){return{x:Math.round(a(e,t)/Me)*Me,y:Math.round(n(e,t)/Me)*Me,i:t}})}i.links=function(t){return li(d(t)).edges.filter(function(e){return e.l&&e.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})};i.triangles=function(c){var f=[];li(d(c)).cells.forEach(function(e,t){var r=e.site,a=e.edges.sort(Gn),n=-1,i=a.length,o,s,l=a[i-1].edge,u=l.l===r?l.r:l.l;while(++n<i){o=l;s=u;l=a[n].edge;u=l.l===r?l.r:l.l;if(t<s.i&&t<u.i&&fi(r,s,u)<0){f.push([c[t],c[s.i],c[u.i]])}}});return f};i.x=function(e){return arguments.length?(a=wt(t=e),i):t};i.y=function(e){return arguments.length?(n=wt(r=e),i):r};i.clipExtent=function(e){if(!arguments.length)return f===ci?null:f;f=e==null?ci:e;return i};i.size=function(e){if(!arguments.length)return f===ci?null:f&&f[1];return i.clipExtent(e&&[[0,0],e])};return i};var ci=[[-1e6,-1e6],[1e6,1e6]];function fi(e,t,r){return(e.x-r.x)*(t.y-e.y)-(e.x-t.x)*(r.y-e.y)}P.geom.delaunay=function(e){return P.geom.voronoi().triangles(e)};P.geom.quadtree=function(e,x,b,_,w){var T=wn,k=Tn,M;if(M=arguments.length){T=di;k=vi;if(M===3){w=b;_=x;b=x=0}return t(e)}function t(e){var t,r=wt(T),a=wt(k),n,i,o,s,l,u,c,f;if(x!=null){l=x,u=b,c=_,f=w}else{c=f=-(l=u=Infinity);n=[],i=[];s=e.length;if(M)for(o=0;o<s;++o){t=e[o];if(t.x<l)l=t.x;if(t.y<u)u=t.y;if(t.x>c)c=t.x;if(t.y>f)f=t.y;n.push(t.x);i.push(t.y)}else for(o=0;o<s;++o){var d=+r(t=e[o],o),v=+a(t,o);if(d<l)l=d;if(v<u)u=v;if(d>c)c=d;if(v>f)f=v;n.push(d);i.push(v)}}var p=c-l,h=f-u;if(p>h)f=u+p;else c=l+h;function m(e,t,r,a,n,i,o,s){if(isNaN(r)||isNaN(a))return;if(e.leaf){var l=e.x,u=e.y;if(l!=null){if(I(l-r)+I(u-a)<.01){g(e,t,r,a,n,i,o,s)}else{var c=e.point;e.x=e.y=e.point=null;g(e,c,l,u,n,i,o,s);g(e,t,r,a,n,i,o,s)}}else{e.x=r,e.y=a,e.point=t}}else{g(e,t,r,a,n,i,o,s)}}function g(e,t,r,a,n,i,o,s){var l=(n+o)*.5,u=(i+s)*.5,c=r>=l,f=a>=u,d=f<<1|c;e.leaf=false;e=e.nodes[d]||(e.nodes[d]=pi());if(c)n=l;else o=l;if(f)i=u;else s=u;m(e,t,r,a,n,i,o,s)}var y=pi();y.add=function(e){m(y,e,+r(e,++o),+a(e,o),l,u,c,f)};y.visit=function(e){hi(e,y,l,u,c,f)};y.find=function(e){return mi(y,e[0],e[1],l,u,c,f)};o=-1;if(x==null){while(++o<s){m(y,e[o],n[o],i[o],l,u,c,f)}--o}else e.forEach(y.add);n=i=e=t=null;return y}t.x=function(e){return arguments.length?(T=e,t):T};t.y=function(e){return arguments.length?(k=e,t):k};t.extent=function(e){if(!arguments.length)return x==null?null:[[x,b],[_,w]];if(e==null)x=b=_=w=null;else x=+e[0][0],b=+e[0][1],_=+e[1][0],w=+e[1][1];return t};t.size=function(e){if(!arguments.length)return x==null?null:[_-x,w-b];if(e==null)x=b=_=w=null;else x=b=0,_=+e[0],w=+e[1];return t};return t};function di(e){return e.x}function vi(e){return e.y}function pi(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function hi(e,t,r,a,n,i){if(!e(t,r,a,n,i)){var o=(r+n)*.5,s=(a+i)*.5,l=t.nodes;if(l[0])hi(e,l[0],r,a,o,s);if(l[1])hi(e,l[1],o,a,n,s);if(l[2])hi(e,l[2],r,s,o,i);if(l[3])hi(e,l[3],o,s,n,i)}}function mi(e,y,x,b,_,w,T){var k=Infinity,M;(function e(t,r,a,n,i){if(r>w||a>T||n<b||i<_)return;if(o=t.point){var o,s=y-t.x,l=x-t.y,u=s*s+l*l;if(u<k){var c=Math.sqrt(k=u);b=y-c,_=x-c;w=y+c,T=x+c;M=o}}var f=t.nodes,d=(r+n)*.5,v=(a+i)*.5,p=y>=d,h=x>=v;for(var m=h<<1|p,g=m+4;m<g;++m){if(t=f[m&3])switch(m&3){case 0:e(t,r,a,d,v);break;case 1:e(t,d,a,n,v);break;case 2:e(t,r,v,d,i);break;case 3:e(t,d,v,n,i);break}}})(e,b,_,w,T);return M}P.interpolateRgb=gi;function gi(e,t){e=P.rgb(e);t=P.rgb(t);var r=e.r,a=e.g,n=e.b,i=t.r-r,o=t.g-a,s=t.b-n;return function(e){return"#"+ht(Math.round(r+i*e))+ht(Math.round(a+o*e))+ht(Math.round(n+s*e))}}P.interpolateObject=yi;function yi(e,t){var r={},a={},n;for(n in e){if(n in t){r[n]=Ti(e[n],t[n])}else{a[n]=e[n]}}for(n in t){if(!(n in e)){a[n]=t[n]}}return function(e){for(n in r)a[n]=r[n](e);return a}}P.interpolateNumber=xi;function xi(t,r){t=+t,r=+r;return function(e){return t*(1-e)+r*e}}P.interpolateString=bi;function bi(e,a){var t=_i.lastIndex=wi.lastIndex=0,r,n,i,o=-1,s=[],l=[];e=e+"",a=a+"";while((r=_i.exec(e))&&(n=wi.exec(a))){if((i=n.index)>t){i=a.slice(t,i);if(s[o])s[o]+=i;else s[++o]=i}if((r=r[0])===(n=n[0])){if(s[o])s[o]+=n;else s[++o]=n}else{s[++o]=null;l.push({i:o,x:xi(r,n)})}t=wi.lastIndex}if(t<a.length){i=a.slice(t);if(s[o])s[o]+=i;else s[++o]=i}return s.length<2?l[0]?(a=l[0].x,function(e){return a(e)+""}):function(){return a}:(a=l.length,function(e){for(var t=0,r;t<a;++t)s[(r=l[t]).i]=r.x(e);return s.join("")})}var _i=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wi=new RegExp(_i.source,"g");P.interpolate=Ti;function Ti(e,t){var r=P.interpolators.length,a;while(--r>=0&&!(a=P.interpolators[r](e,t)));return a}P.interpolators=[function(e,t){var r=typeof t;return(r==="string"?_t.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?gi:bi:t instanceof We?gi:Array.isArray(t)?ki:r==="object"&&isNaN(t)?yi:xi)(e,t)}];P.interpolateArray=ki;function ki(e,t){var r=[],a=[],n=e.length,i=t.length,o=Math.min(e.length,t.length),s;for(s=0;s<o;++s)r.push(Ti(e[s],t[s]));for(;s<n;++s)a[s]=e[s];for(;s<i;++s)a[s]=t[s];return function(e){for(s=0;s<o;++s)a[s]=r[s](e);return a}}var Mi=function(){return z};var Ai=P.map({linear:Mi,poly:Pi,quad:function(){return Di},cubic:function(){return Oi},sin:function(){return Ri},exp:function(){return Ni},circle:function(){return zi},elastic:Fi,back:ji,bounce:function(){return Hi}});var Si=P.map({in:z,out:Li,"in-out":Ci,"out-in":function(e){return Ci(Li(e))}});P.ease=function(e){var t=e.indexOf("-"),r=t>=0?e.slice(0,t):e,a=t>=0?e.slice(t+1):"in";r=Ai.get(r)||Mi;a=Si.get(a)||z;return Ei(a(r.apply(null,n.call(arguments,1))))};function Ei(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function Li(t){return function(e){return 1-t(1-e)}}function Ci(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function Di(e){return e*e}function Oi(e){return e*e*e}function Ii(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)}function Pi(t){return function(e){return Math.pow(e,t)}}function Ri(e){return 1-Math.cos(e*Ce)}function Ni(e){return Math.pow(2,10*(e-1))}function zi(e){return 1-Math.sqrt(1-e*e)}function Fi(t,r){var a;if(arguments.length<2)r=.45;if(arguments.length)a=r/Ee*Math.asin(1/t);else t=1,a=r/4;return function(e){return 1+t*Math.pow(2,-10*e)*Math.sin((e-a)*Ee/r)}}function ji(t){if(!t)t=1.70158;return function(e){return e*e*((t+1)*e-t)}}function Hi(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}P.interpolateHcl=Bi;function Bi(e,t){e=P.hcl(e);t=P.hcl(t);var r=e.h,a=e.c,n=e.l,i=t.h-r,o=t.c-a,s=t.l-n;if(isNaN(o))o=0,a=isNaN(a)?t.c:a;if(isNaN(i))i=0,r=isNaN(r)?t.h:r;else if(i>180)i-=360;else if(i<-180)i+=360;return function(e){return Qe(r+i*e,a+o*e,n+s*e)+""}}P.interpolateHsl=qi;function qi(e,t){e=P.hsl(e);t=P.hsl(t);var r=e.h,a=e.s,n=e.l,i=t.h-r,o=t.s-a,s=t.l-n;if(isNaN(o))o=0,a=isNaN(a)?t.s:a;if(isNaN(i))i=0,r=isNaN(r)?t.h:r;else if(i>180)i-=360;else if(i<-180)i+=360;return function(e){return Xe(r+i*e,a+o*e,n+s*e)+""}}P.interpolateLab=Ui;function Ui(e,t){e=P.lab(e);t=P.lab(t);var r=e.l,a=e.a,n=e.b,i=t.l-r,o=t.a-a,s=t.b-n;return function(e){return ot(r+i*e,a+o*e,n+s*e)+""}}P.interpolateRound=Yi;function Yi(t,r){r-=t;return function(e){return Math.round(t+r*e)}}P.transform=function(e){var r=R.createElementNS(P.ns.prefix.svg,"g");return(P.transform=function(e){if(e!=null){r.setAttribute("transform",e);var t=r.transform.baseVal.consolidate()}return new Vi(t?t.matrix:Zi)})(e)};function Vi(e){var t=[e.a,e.b],r=[e.c,e.d],a=Wi(t),n=Gi(t,r),i=Wi($i(r,t,-n))||0;if(t[0]*r[1]<r[0]*t[1]){t[0]*=-1;t[1]*=-1;a*=-1;n*=-1}this.rotate=(a?Math.atan2(t[1],t[0]):Math.atan2(-r[0],r[1]))*Oe;this.translate=[e.e,e.f];this.scale=[a,i];this.skew=i?Math.atan2(n,i)*Oe:0}Vi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Gi(e,t){return e[0]*t[0]+e[1]*t[1]}function Wi(e){var t=Math.sqrt(Gi(e,e));if(t){e[0]/=t;e[1]/=t}return t}function $i(e,t,r){e[0]+=r*t[0];e[1]+=r*t[1];return e}var Zi={a:1,b:0,c:0,d:1,e:0,f:0};P.interpolateTransform=to;function Xi(e){return e.length?e.pop()+",":""}function Ji(e,t,r,a){if(e[0]!==t[0]||e[1]!==t[1]){var n=r.push("translate(",null,",",null,")");a.push({i:n-4,x:xi(e[0],t[0])},{i:n-2,x:xi(e[1],t[1])})}else if(t[0]||t[1]){r.push("translate("+t+")")}}function Ki(e,t,r,a){if(e!==t){if(e-t>180)t+=360;else if(t-e>180)e+=360;a.push({i:r.push(Xi(r)+"rotate(",null,")")-2,x:xi(e,t)})}else if(t){r.push(Xi(r)+"rotate("+t+")")}}function Qi(e,t,r,a){if(e!==t){a.push({i:r.push(Xi(r)+"skewX(",null,")")-2,x:xi(e,t)})}else if(t){r.push(Xi(r)+"skewX("+t+")")}}function eo(e,t,r,a){if(e[0]!==t[0]||e[1]!==t[1]){var n=r.push(Xi(r)+"scale(",null,",",null,")");a.push({i:n-4,x:xi(e[0],t[0])},{i:n-2,x:xi(e[1],t[1])})}else if(t[0]!==1||t[1]!==1){r.push(Xi(r)+"scale("+t+")")}}function to(e,t){var n=[],i=[];e=P.transform(e),t=P.transform(t);Ji(e.translate,t.translate,n,i);Ki(e.rotate,t.rotate,n,i);Qi(e.skew,t.skew,n,i);eo(e.scale,t.scale,n,i);e=t=null;return function(e){var t=-1,r=i.length,a;while(++t<r)n[(a=i[t]).i]=a.x(e);return n.join("")}}function ro(t,r){r=(r-=t=+t)||1/r;return function(e){return(e-t)/r}}function ao(t,r){r=(r-=t=+t)||1/r;return function(e){return Math.max(0,Math.min(1,(e-t)/r))}}P.layout={};P.layout.bundle=function(){return function(e){var t=[],r=-1,a=e.length;while(++r<a)t.push(no(e[r]));return t}};function no(e){var t=e.source,r=e.target,a=oo(t,r),n=[t];while(t!==a){t=t.parent;n.push(t)}var i=n.length;while(r!==a){n.splice(i,0,r);r=r.parent}return n}function io(e){var t=[],r=e.parent;while(r!=null){t.push(e);e=r;r=r.parent}t.push(e);return t}function oo(e,t){if(e===t)return e;var r=io(e),a=io(t),n=r.pop(),i=a.pop(),o=null;while(n===i){o=n;n=r.pop();i=a.pop()}return o}P.layout.chord=function(){var t={},m,g,y,x,b=0,_,w,T;function e(){var e={},r=[],t=P.range(x),a=[],n,i,o,s,l;m=[];g=[];n=0,s=-1;while(++s<x){i=0,l=-1;while(++l<x){i+=y[s][l]}r.push(i);a.push(P.range(x));n+=i}if(_){t.sort(function(e,t){return _(r[e],r[t])})}if(w){a.forEach(function(e,r){e.sort(function(e,t){return w(y[r][e],y[r][t])})})}n=(Ee-b*x)/n;i=0,s=-1;while(++s<x){o=i,l=-1;while(++l<x){var u=t[s],c=a[u][l],f=y[u][c],d=i,v=i+=f*n;e[u+"-"+c]={index:u,subindex:c,startAngle:d,endAngle:v,value:f}}g[u]={index:u,startAngle:o,endAngle:i,value:r[u]};i+=b}s=-1;while(++s<x){l=s-1;while(++l<x){var p=e[s+"-"+l],h=e[l+"-"+s];if(p.value||h.value){m.push(p.value<h.value?{source:h,target:p}:{source:p,target:h})}}}if(T)k()}function k(){m.sort(function(e,t){return T((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}t.matrix=function(e){if(!arguments.length)return y;x=(y=e)&&y.length;m=g=null;return t};t.padding=function(e){if(!arguments.length)return b;b=e;m=g=null;return t};t.sortGroups=function(e){if(!arguments.length)return _;_=e;m=g=null;return t};t.sortSubgroups=function(e){if(!arguments.length)return w;w=e;m=null;return t};t.sortChords=function(e){if(!arguments.length)return T;T=e;if(m)k();return t};t.chords=function(){if(!m)e();return m};t.groups=function(){if(!g)e();return g};return t};P.layout.force=function(){var n={},f=P.dispatch("start","tick","end"),d,v=[1,1],e,p,h=.9,i=vo,o=po,m=-30,c=ho,g=.1,y=.64,x=[],b=[],_,w,T;function k(u){return function(e,t,r,a){if(e.point!==u){var n=e.cx-u.x,i=e.cy-u.y,o=a-t,s=n*n+i*i;if(o*o/y<s){if(s<c){var l=e.charge/s;u.px-=n*l;u.py-=i*l}return true}if(e.point&&s&&s<c){var l=e.pointCharge/s;u.px-=n*l;u.py-=i*l}}return!e.charge}}n.tick=function(){if((p*=.99)<.005){d=null;f.end({type:"end",alpha:p=0});return true}var e=x.length,t=b.length,r,a,n,i,o,s,l,u,c;for(a=0;a<t;++a){n=b[a];i=n.source;o=n.target;u=o.x-i.x;c=o.y-i.y;if(s=u*u+c*c){s=p*w[a]*((s=Math.sqrt(s))-_[a])/s;u*=s;c*=s;o.x-=u*(l=i.weight+o.weight?i.weight/(i.weight+o.weight):.5);o.y-=c*l;i.x+=u*(l=1-l);i.y+=c*l}}if(l=p*g){u=v[0]/2;c=v[1]/2;a=-1;if(l)while(++a<e){n=x[a];n.x+=(u-n.x)*l;n.y+=(c-n.y)*l}}if(m){fo(r=P.geom.quadtree(x),p,T);a=-1;while(++a<e){if(!(n=x[a]).fixed){r.visit(k(n))}}}a=-1;while(++a<e){n=x[a];if(n.fixed){n.x=n.px;n.y=n.py}else{n.x-=(n.px-(n.px=n.x))*h;n.y-=(n.py-(n.py=n.y))*h}}f.tick({type:"tick",alpha:p})};n.nodes=function(e){if(!arguments.length)return x;x=e;return n};n.links=function(e){if(!arguments.length)return b;b=e;return n};n.size=function(e){if(!arguments.length)return v;v=e;return n};n.linkDistance=function(e){if(!arguments.length)return i;i=typeof e==="function"?e:+e;return n};n.distance=n.linkDistance;n.linkStrength=function(e){if(!arguments.length)return o;o=typeof e==="function"?e:+e;return n};n.friction=function(e){if(!arguments.length)return h;h=+e;return n};n.charge=function(e){if(!arguments.length)return m;m=typeof e==="function"?e:+e;return n};n.chargeDistance=function(e){if(!arguments.length)return Math.sqrt(c);c=e*e;return n};n.gravity=function(e){if(!arguments.length)return g;g=+e;return n};n.theta=function(e){if(!arguments.length)return Math.sqrt(y);y=e*e;return n};n.alpha=function(e){if(!arguments.length)return p;e=+e;if(p){if(e>0){p=e}else{d.c=null,d.t=NaN,d=null;f.end({type:"end",alpha:p=0})}}else if(e>0){f.start({type:"start",alpha:p=e});d=Ot(n.tick)}return n};n.start=function(){var s,l=x.length,u=b.length,e=v[0],t=v[1],c,r;for(s=0;s<l;++s){(r=x[s]).index=s;r.weight=0}for(s=0;s<u;++s){r=b[s];if(typeof r.source=="number")r.source=x[r.source];if(typeof r.target=="number")r.target=x[r.target];++r.source.weight;++r.target.weight}for(s=0;s<l;++s){r=x[s];if(isNaN(r.x))r.x=a("x",e);if(isNaN(r.y))r.y=a("y",t);if(isNaN(r.px))r.px=r.x;if(isNaN(r.py))r.py=r.y}_=[];if(typeof i==="function")for(s=0;s<u;++s)_[s]=+i.call(this,b[s],s);else for(s=0;s<u;++s)_[s]=i;w=[];if(typeof o==="function")for(s=0;s<u;++s)w[s]=+o.call(this,b[s],s);else for(s=0;s<u;++s)w[s]=o;T=[];if(typeof m==="function")for(s=0;s<l;++s)T[s]=+m.call(this,x[s],s);else for(s=0;s<l;++s)T[s]=m;function a(e,t){if(!c){c=new Array(l);for(n=0;n<l;++n){c[n]=[]}for(n=0;n<u;++n){var r=b[n];c[r.source.index].push(r.target);c[r.target.index].push(r.source)}}var a=c[s],n=-1,i=a.length,o;while(++n<i)if(!isNaN(o=a[n][e]))return o;return Math.random()*t}return n.resume()};n.resume=function(){return n.alpha(.1)};n.stop=function(){return n.alpha(0)};n.drag=function(){if(!e)e=P.behavior.drag().origin(z).on("dragstart.force",so).on("drag.force",t).on("dragend.force",lo);if(!arguments.length)return e;this.on("mouseover.force",uo).on("mouseout.force",co).call(e)};function t(e){e.px=P.event.x,e.py=P.event.y;n.resume()}return P.rebind(n,f,"on")};function so(e){e.fixed|=2}function lo(e){e.fixed&=~6}function uo(e){e.fixed|=4;e.px=e.x,e.py=e.y}function co(e){e.fixed&=~4}function fo(e,t,r){var a=0,n=0;e.charge=0;if(!e.leaf){var i=e.nodes,o=i.length,s=-1,l;while(++s<o){l=i[s];if(l==null)continue;fo(l,t,r);e.charge+=l.charge;a+=l.charge*l.cx;n+=l.charge*l.cy}}if(e.point){if(!e.leaf){e.point.x+=Math.random()-.5;e.point.y+=Math.random()-.5}var u=t*r[e.point.index];e.charge+=e.pointCharge=u;a+=u*e.point.x;n+=u*e.point.y}e.cx=a/e.charge;e.cy=n/e.charge}var vo=20,po=1,ho=Infinity;P.layout.hierarchy=function(){var s=_o,l=xo,u=bo;function c(e){var t=[e],r=[],a;e.depth=0;while((a=t.pop())!=null){r.push(a);if((i=l.call(c,a,a.depth))&&(n=i.length)){var n,i,o;while(--n>=0){t.push(o=i[n]);o.parent=a;o.depth=a.depth+1}if(u)a.value=0;a.children=i}else{if(u)a.value=+u.call(c,a,a.depth)||0;delete a.children}}yo(e,function(e){var t,r;if(s&&(t=e.children))t.sort(s);if(u&&(r=e.parent))r.value+=e.value});return r}c.sort=function(e){if(!arguments.length)return s;s=e;return c};c.children=function(e){if(!arguments.length)return l;l=e;return c};c.value=function(e){if(!arguments.length)return u;u=e;return c};c.revalue=function(e){if(u){go(e,function(e){if(e.children)e.value=0});yo(e,function(e){var t;if(!e.children)e.value=+u.call(c,e,e.depth)||0;if(t=e.parent)t.value+=e.value})}return e};return c};function mo(e,t){P.rebind(e,t,"sort","children","value");e.nodes=e;e.links=wo;return e}function go(e,t){var r=[e];while((e=r.pop())!=null){t(e);if((n=e.children)&&(a=n.length)){var a,n;while(--a>=0)r.push(n[a])}}}function yo(e,t){var r=[e],a=[];while((e=r.pop())!=null){a.push(e);if((o=e.children)&&(i=o.length)){var n=-1,i,o;while(++n<i)r.push(o[n])}}while((e=a.pop())!=null){t(e)}}function xo(e){return e.children}function bo(e){return e.value}function _o(e,t){return t.value-e.value}function wo(e){return P.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}P.layout.partition=function(){var a=P.layout.hierarchy(),n=[1,1];function u(e,t,r,a){var n=e.children;e.x=t;e.y=e.depth*a;e.dx=r;e.dy=a;if(n&&(o=n.length)){var i=-1,o,s,l;r=e.value?r/e.value:0;while(++i<o){u(s=n[i],t,l=s.value*r,a);t+=l}}}function i(e){var t=e.children,r=0;if(t&&(n=t.length)){var a=-1,n;while(++a<n)r=Math.max(r,i(t[a]))}return 1+r}function t(e,t){var r=a.call(this,e,t);u(r[0],0,n[0],n[1]/i(r[0]));return r}t.size=function(e){if(!arguments.length)return n;n=e;return t};return mo(t,a)};P.layout.pie=function(){var d=Number,v=To,p=0,h=Ee,m=0;function g(r){var e=r.length,a=r.map(function(e,t){return+d.call(g,e,t)}),t=+(typeof p==="function"?p.apply(this,arguments):p),n=(typeof h==="function"?h.apply(this,arguments):h)-t,i=Math.min(Math.abs(n)/e,+(typeof m==="function"?m.apply(this,arguments):m)),o=i*(n<0?-1:1),s=P.sum(a),l=s?(n-e*o)/s:0,u=P.range(e),c=[],f;if(v!=null)u.sort(v===To?function(e,t){return a[t]-a[e]}:function(e,t){return v(r[e],r[t])});u.forEach(function(e){c[e]={data:r[e],value:f=a[e],startAngle:t,endAngle:t+=f*l+o,padAngle:i}});return c}g.value=function(e){if(!arguments.length)return d;d=e;return g};g.sort=function(e){if(!arguments.length)return v;v=e;return g};g.startAngle=function(e){if(!arguments.length)return p;p=e;return g};g.endAngle=function(e){if(!arguments.length)return h;h=e;return g};g.padAngle=function(e){if(!arguments.length)return m;m=e;return g};return g};var To={};P.layout.stack=function(){var f=z,d=Lo,v=Co,p=Ao,h=ko,m=Mo;function g(e,t){if(!(s=e.length))return e;var r=e.map(function(e,t){return f.call(g,e,t)});var a=r.map(function(e){return e.map(function(e,t){return[h.call(g,e,t),m.call(g,e,t)]})});var n=d.call(g,a,t);r=P.permute(r,n);a=P.permute(a,n);var i=v.call(g,a,t);var o=r[0].length,s,l,u,c;for(u=0;u<o;++u){p.call(g,r[0][u],c=i[u],a[0][u][1]);for(l=1;l<s;++l){p.call(g,r[l][u],c+=a[l-1][u][1],a[l][u][1])}}return e}g.values=function(e){if(!arguments.length)return f;f=e;return g};g.order=function(e){if(!arguments.length)return d;d=typeof e==="function"?e:So.get(e)||Lo;return g};g.offset=function(e){if(!arguments.length)return v;v=typeof e==="function"?e:Eo.get(e)||Co;return g};g.x=function(e){if(!arguments.length)return h;h=e;return g};g.y=function(e){if(!arguments.length)return m;m=e;return g};g.out=function(e){if(!arguments.length)return p;p=e;return g};return g};function ko(e){return e.x}function Mo(e){return e.y}function Ao(e,t,r){e.y0=t;e.y=r}var So=P.map({"inside-out":function(e){var t=e.length,r,a,n=e.map(Do),i=e.map(Oo),o=P.range(t).sort(function(e,t){return n[e]-n[t]}),s=0,l=0,u=[],c=[];for(r=0;r<t;++r){a=o[r];if(s<l){s+=i[a];u.push(a)}else{l+=i[a];c.push(a)}}return c.reverse().concat(u)},reverse:function(e){return P.range(e.length).reverse()},default:Lo});var Eo=P.map({silhouette:function(e){var t=e.length,r=e[0].length,a=[],n=0,i,o,s,l=[];for(o=0;o<r;++o){for(i=0,s=0;i<t;i++)s+=e[i][o][1];if(s>n)n=s;a.push(s)}for(o=0;o<r;++o){l[o]=(n-a[o])/2}return l},wiggle:function(e){var t=e.length,r=e[0],a=r.length,n,i,o,s,l,u,c,f,d,v=[];v[0]=f=d=0;for(i=1;i<a;++i){for(n=0,s=0;n<t;++n)s+=e[n][i][1];for(n=0,l=0,c=r[i][0]-r[i-1][0];n<t;++n){for(o=0,u=(e[n][i][1]-e[n][i-1][1])/(2*c);o<n;++o){u+=(e[o][i][1]-e[o][i-1][1])/c}l+=u*e[n][i][1]}v[i]=f-=s?l/s*c:0;if(f<d)d=f}for(i=0;i<a;++i)v[i]-=d;return v},expand:function(e){var t=e.length,r=e[0].length,a=1/t,n,i,o,s=[];for(i=0;i<r;++i){for(n=0,o=0;n<t;n++)o+=e[n][i][1];if(o)for(n=0;n<t;n++)e[n][i][1]/=o;else for(n=0;n<t;n++)e[n][i][1]=a}for(i=0;i<r;++i)s[i]=0;return s},zero:Co});function Lo(e){return P.range(e.length)}function Co(e){var t=-1,r=e[0].length,a=[];while(++t<r)a[t]=0;return a}function Do(e){var t=1,r=0,a=e[0][1],n,i=e.length;for(;t<i;++t){if((n=e[t][1])>a){r=t;a=n}}return r}function Oo(e){return e.reduce(Io,0)}function Io(e,t){return e+t[1]}P.layout.histogram=function(){var f=true,d=Number,v=No,p=Po;function r(e,t){var r=[],a=e.map(d,this),n=v.call(this,a,t),i=p.call(this,n,a,t),o,t=-1,s=a.length,l=i.length-1,u=f?1:1/s,c;while(++t<l){o=r[t]=[];o.dx=i[t+1]-(o.x=i[t]);o.y=0}if(l>0){t=-1;while(++t<s){c=a[t];if(c>=n[0]&&c<=n[1]){o=r[P.bisect(i,c,1,l)-1];o.y+=u;o.push(e[t])}}}return r}r.value=function(e){if(!arguments.length)return d;d=e;return r};r.range=function(e){if(!arguments.length)return v;v=wt(e);return r};r.bins=function(t){if(!arguments.length)return p;p=typeof t==="number"?function(e){return Ro(e,t)}:wt(t);return r};r.frequency=function(e){if(!arguments.length)return f;f=!!e;return r};return r};function Po(e,t){return Ro(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Ro(e,t){var r=-1,a=+e[0],n=(e[1]-a)/t,i=[];while(++r<=t)i[r]=n*r+a;return i}function No(e){return[P.min(e),P.max(e)]}P.layout.pack=function(){var l=P.layout.hierarchy().sort(zo),u=0,c=[1,1],f;function t(e,t){var r=l.call(this,e,t),a=r[0],n=c[0],i=c[1],o=f==null?Math.sqrt:typeof f==="function"?f:function(){return f};a.x=a.y=0;yo(a,function(e){e.r=+o(e.value)});yo(a,Bo);if(u){var s=u*(f?1:Math.max(2*a.r/n,2*a.r/i))/2;yo(a,function(e){e.r+=s});yo(a,Bo);yo(a,function(e){e.r-=s})}Yo(a,n/2,i/2,f?1:1/Math.max(2*a.r/n,2*a.r/i));return r}t.size=function(e){if(!arguments.length)return c;c=e;return t};t.radius=function(e){if(!arguments.length)return f;f=e==null||typeof e==="function"?e:+e;return t};t.padding=function(e){if(!arguments.length)return u;u=+e;return t};return mo(t,l)};function zo(e,t){return e.value-t.value}function Fo(e,t){var r=e._pack_next;e._pack_next=t;t._pack_prev=e;t._pack_next=r;r._pack_prev=t}function jo(e,t){e._pack_next=t;t._pack_prev=e}function Ho(e,t){var r=t.x-e.x,a=t.y-e.y,n=e.r+t.r;return.999*n*n>r*r+a*a}function Bo(e){if(!(t=e.children)||!(d=t.length))return;var t,r=Infinity,a=-Infinity,n=Infinity,i=-Infinity,o,s,l,u,c,f,d;function v(e){r=Math.min(e.x-e.r,r);a=Math.max(e.x+e.r,a);n=Math.min(e.y-e.r,n);i=Math.max(e.y+e.r,i)}t.forEach(qo);o=t[0];o.x=-o.r;o.y=0;v(o);if(d>1){s=t[1];s.x=s.r;s.y=0;v(s);if(d>2){l=t[2];Vo(o,s,l);v(l);Fo(o,l);o._pack_prev=l;Fo(l,s);s=o._pack_next;for(u=3;u<d;u++){Vo(o,s,l=t[u]);var p=0,h=1,m=1;for(c=s._pack_next;c!==s;c=c._pack_next,h++){if(Ho(c,l)){p=1;break}}if(p==1){for(f=o._pack_prev;f!==c._pack_prev;f=f._pack_prev,m++){if(Ho(f,l)){break}}}if(p){if(h<m||h==m&&s.r<o.r)jo(o,s=c);else jo(o=f,s);u--}else{Fo(o,l);s=l;v(l)}}}}var g=(r+a)/2,y=(n+i)/2,x=0;for(u=0;u<d;u++){l=t[u];l.x-=g;l.y-=y;x=Math.max(x,l.r+Math.sqrt(l.x*l.x+l.y*l.y))}e.r=x;t.forEach(Uo)}function qo(e){e._pack_next=e._pack_prev=e}function Uo(e){delete e._pack_next;delete e._pack_prev}function Yo(e,t,r,a){var n=e.children;e.x=t+=a*e.x;e.y=r+=a*e.y;e.r*=a;if(n){var i=-1,o=n.length;while(++i<o)Yo(n[i],t,r,a)}}function Vo(e,t,r){var a=e.r+r.r,n=t.x-e.x,i=t.y-e.y;if(a&&(n||i)){var o=t.r+r.r,s=n*n+i*i;o*=o;a*=a;var l=.5+(a-o)/(2*s),u=Math.sqrt(Math.max(0,2*o*(a+s)-(a-=s)*a-o*o))/(2*s);r.x=e.x+l*n+u*i;r.y=e.y+l*i-u*n}else{r.x=e.x+a;r.y=e.y}}P.layout.tree=function(){var f=P.layout.hierarchy().sort(null).value(null),d=Go,v=[1,1],p=null;function t(e,t){var r=f.call(this,e,t),a=r[0],n=h(a);yo(n,m),n.parent.m=-n.z;go(n,g);if(p)go(a,y);else{var i=a,o=a,s=a;go(a,function(e){if(e.x<i.x)i=e;if(e.x>o.x)o=e;if(e.depth>s.depth)s=e});var l=d(i,o)/2-i.x,u=v[0]/(o.x+d(o,i)/2+l),c=v[1]/(s.depth||1);go(a,function(e){e.x=(e.x+l)*u;e.y=e.depth*c})}return r}function h(e){var t={A:null,children:[e]},r=[t],a;while((a=r.pop())!=null){for(var n=a.children,i,o=0,s=n.length;o<s;++o){r.push((n[o]=i={_:n[o],parent:a,children:(i=n[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i)}}return t.children[0]}function m(e){var t=e.children,r=e.parent.children,a=e.i?r[e.i-1]:null;if(t.length){Xo(e);var n=(t[0].z+t[t.length-1].z)/2;if(a){e.z=a.z+d(e._,a._);e.m=e.z-n}else{e.z=n}}else if(a){e.z=a.z+d(e._,a._)}e.parent.A=i(e,a,e.parent.A||r[0])}function g(e){e._.x=e.z+e.parent.m;e.m+=e.parent.m}function i(e,t,r){if(t){var a=e,n=e,i=t,o=a.parent.children[0],s=a.m,l=n.m,u=i.m,c=o.m,f;while(i=$o(i),a=Wo(a),i&&a){o=Wo(o);n=$o(n);n.a=e;f=i.z+u-a.z-s+d(i._,a._);if(f>0){Zo(Jo(i,e,r),e,f);s+=f;l+=f}u+=i.m;s+=a.m;c+=o.m;l+=n.m}if(i&&!$o(n)){n.t=i;n.m+=u-l}if(a&&!Wo(o)){o.t=a;o.m+=s-c;r=e}}return r}function y(e){e.x*=v[0];e.y=e.depth*v[1]}t.separation=function(e){if(!arguments.length)return d;d=e;return t};t.size=function(e){if(!arguments.length)return p?null:v;p=(v=e)==null?y:null;return t};t.nodeSize=function(e){if(!arguments.length)return p?v:null;p=(v=e)==null?null:y;return t};return mo(t,f)};function Go(e,t){return e.parent==t.parent?1:2}function Wo(e){var t=e.children;return t.length?t[0]:e.t}function $o(e){var t=e.children,r;return(r=t.length)?t[r-1]:e.t}function Zo(e,t,r){var a=r/(t.i-e.i);t.c-=a;t.s+=r;e.c+=a;t.z+=r;t.m+=r}function Xo(e){var t=0,r=0,a=e.children,n=a.length,i;while(--n>=0){i=a[n];i.z+=t;i.m+=t;t+=i.s+(r+=i.c)}}function Jo(e,t,r){return e.a.parent===t.parent?e.a:r}P.layout.cluster=function(){var c=P.layout.hierarchy().sort(null).value(null),f=Go,d=[1,1],v=false;function t(e,t){var r=c.call(this,e,t),a=r[0],n,i=0;yo(a,function(e){var t=e.children;if(t&&t.length){e.x=Qo(t);e.y=Ko(t)}else{e.x=n?i+=f(e,n):0;e.y=0;n=e}});var o=es(a),s=ts(a),l=o.x-f(o,s)/2,u=s.x+f(s,o)/2;yo(a,v?function(e){e.x=(e.x-a.x)*d[0];e.y=(a.y-e.y)*d[1]}:function(e){e.x=(e.x-l)/(u-l)*d[0];e.y=(1-(a.y?e.y/a.y:1))*d[1]});return r}t.separation=function(e){if(!arguments.length)return f;f=e;return t};t.size=function(e){if(!arguments.length)return v?null:d;v=(d=e)==null;return t};t.nodeSize=function(e){if(!arguments.length)return v?d:null;v=(d=e)!=null;return t};return mo(t,c)};function Ko(e){return 1+P.max(e,function(e){return e.y})}function Qo(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function es(e){var t=e.children;return t&&t.length?es(t[0]):e}function ts(e){var t=e.children,r;return t&&(r=t.length)?ts(t[r-1]):e}P.layout.treemap=function(){var a=P.layout.hierarchy(),c=Math.round,n=[1,1],i=null,f=rs,o=false,s,d="squarify",l=.5*(1+Math.sqrt(5));function v(e,t){var r=-1,a=e.length,n,i;while(++r<a){i=(n=e[r]).value*(t<0?0:t);n.area=isNaN(i)||i<=0?0:i}}function p(e){var t=e.children;if(t&&t.length){var r=f(e),a=[],n=t.slice(),i,o=Infinity,s,l=d==="slice"?r.dx:d==="dice"?r.dy:d==="slice-dice"?e.depth&1?r.dy:r.dx:Math.min(r.dx,r.dy),u;v(n,r.dx*r.dy/e.value);a.area=0;while((u=n.length)>0){a.push(i=n[u-1]);a.area+=i.area;if(d!=="squarify"||(s=h(a,l))<=o){n.pop();o=s}else{a.area-=a.pop().area;m(a,l,r,false);l=Math.min(r.dx,r.dy);a.length=a.area=0;o=Infinity}}if(a.length){m(a,l,r,true);a.length=a.area=0}t.forEach(p)}}function u(e){var t=e.children;if(t&&t.length){var r=f(e),a=t.slice(),n,i=[];v(a,r.dx*r.dy/e.value);i.area=0;while(n=a.pop()){i.push(n);i.area+=n.area;if(n.z!=null){m(i,n.z?r.dx:r.dy,r,!a.length);i.length=i.area=0}}t.forEach(u)}}function h(e,t){var r=e.area,a,n=0,i=Infinity,o=-1,s=e.length;while(++o<s){if(!(a=e[o].area))continue;if(a<i)i=a;if(a>n)n=a}r*=r;t*=t;return r?Math.max(t*n*l/r,r/(t*i*l)):Infinity}function m(e,t,r,a){var n=-1,i=e.length,o=r.x,s=r.y,l=t?c(e.area/t):0,u;if(t==r.dx){if(a||l>r.dy)l=r.dy;while(++n<i){u=e[n];u.x=o;u.y=s;u.dy=l;o+=u.dx=Math.min(r.x+r.dx-o,l?c(u.area/l):0)}u.z=true;u.dx+=r.x+r.dx-o;r.y+=l;r.dy-=l}else{if(a||l>r.dx)l=r.dx;while(++n<i){u=e[n];u.x=o;u.y=s;u.dx=l;s+=u.dy=Math.min(r.y+r.dy-s,l?c(u.area/l):0)}u.z=false;u.dy+=r.y+r.dy-s;r.x+=l;r.dx-=l}}function g(e){var t=s||a(e),r=t[0];r.x=r.y=0;if(r.value)r.dx=n[0],r.dy=n[1];else r.dx=r.dy=0;if(s)a.revalue(r);v([r],r.dx*r.dy/r.value);(s?u:p)(r);if(o)s=t;return t}g.size=function(e){if(!arguments.length)return n;n=e;return g};g.padding=function(r){if(!arguments.length)return i;function e(e){var t=r.call(g,e,e.depth);return t==null?rs(e):as(e,typeof t==="number"?[t,t,t,t]:t)}function t(e){return as(e,r)}var a;f=(i=r)==null?rs:(a=typeof r)==="function"?e:a==="number"?(r=[r,r,r,r],t):t;return g};g.round=function(e){if(!arguments.length)return c!=Number;c=e?Math.round:Number;return g};g.sticky=function(e){if(!arguments.length)return o;o=e;s=null;return g};g.ratio=function(e){if(!arguments.length)return l;l=e;return g};g.mode=function(e){if(!arguments.length)return d;d=e+"";return g};return mo(g,a)};function rs(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function as(e,t){var r=e.x+t[3],a=e.y+t[0],n=e.dx-t[1]-t[3],i=e.dy-t[0]-t[2];if(n<0){r+=n/2;n=0}if(i<0){a+=i/2;i=0}return{x:r,y:a,dx:n,dy:i}}P.random={normal:function(a,n){var e=arguments.length;if(e<2)n=1;if(e<1)a=0;return function(){var e,t,r;do{e=Math.random()*2-1;t=Math.random()*2-1;r=e*e+t*t}while(!r||r>1);return a+n*e*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var e=P.random.normal.apply(P,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=P.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(r){return function(){for(var e=0,t=0;t<r;t++)e+=Math.random();return e}}};P.scale={};function ns(e){var t=e[0],r=e[e.length-1];return t<r?[t,r]:[r,t]}function is(e){return e.rangeExtent?e.rangeExtent():ns(e.range())}function os(e,t,r,a){var n=r(e[0],e[1]),i=a(t[0],t[1]);return function(e){return i(n(e))}}function ss(e,t){var r=0,a=e.length-1,n=e[r],i=e[a],o;if(i<n){o=r,r=a,a=o;o=n,n=i,i=o}e[r]=t.floor(n);e[a]=t.ceil(i);return e}function ls(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:us}var us={floor:z,ceil:z};function cs(r,e,t,a){var n=[],i=[],o=0,s=Math.min(r.length,e.length)-1;if(r[s]<r[0]){r=r.slice().reverse();e=e.slice().reverse()}while(++o<=s){n.push(t(r[o-1],r[o]));i.push(a(e[o-1],e[o]))}return function(e){var t=P.bisect(r,e,1,s)-1;return i[t](n[t](e))}}P.scale.linear=function(){return fs([0,1],[0,1],Ti,false)};function fs(r,a,n,i){var o,s;function t(){var e=Math.min(r.length,a.length)>2?cs:os,t=i?ao:ro;o=e(r,a,t,n);s=e(a,r,t,Ti);return l}function l(e){return o(e)}l.invert=function(e){return s(e)};l.domain=function(e){if(!arguments.length)return r;r=e.map(Number);return t()};l.range=function(e){if(!arguments.length)return a;a=e;return t()};l.rangeRound=function(e){return l.range(e).interpolate(Yi)};l.clamp=function(e){if(!arguments.length)return i;i=e;return t()};l.interpolate=function(e){if(!arguments.length)return n;n=e;return t()};l.ticks=function(e){return hs(r,e)};l.tickFormat=function(e,t){return ms(r,e,t)};l.nice=function(e){vs(r,e);return t()};l.copy=function(){return fs(r,a,n,i)};return t()}function ds(e,t){return P.rebind(e,t,"range","rangeRound","interpolate","clamp")}function vs(e,t){ss(e,ls(ps(e,t)[2]));ss(e,ls(ps(e,t)[2]));return e}function ps(e,t){if(t==null)t=10;var r=ns(e),a=r[1]-r[0],n=Math.pow(10,Math.floor(Math.log(a/t)/Math.LN10)),i=t/a*n;if(i<=.15)n*=10;else if(i<=.35)n*=5;else if(i<=.75)n*=2;r[0]=Math.ceil(r[0]/n)*n;r[1]=Math.floor(r[1]/n)*n+n*.5;r[2]=n;return r}function hs(e,t){return P.range.apply(P,ps(e,t))}function ms(e,t,r){var a=ps(e,t);if(r){var n=Ht.exec(r);n.shift();if(n[8]==="s"){var i=P.formatPrefix(Math.max(I(a[0]),I(a[1])));if(!n[7])n[7]="."+ys(i.scale(a[2]));n[8]="f";r=P.format(n.join(""));return function(e){return r(i.scale(e))+i.symbol}}if(!n[7])n[7]="."+xs(n[8],a);r=n.join("")}else{r=",."+ys(a[2])+"f"}return P.format(r)}var gs={s:1,g:1,p:1,r:1,e:1};function ys(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function xs(e,t){var r=ys(t[2]);return e in gs?Math.abs(r-ys(Math.max(I(t[0]),I(t[1]))))+ +(e!=="e"):r-(e==="%")*2}P.scale.log=function(){return bs(P.scale.linear().domain([0,1]),10,true,[1,10])};function bs(t,l,u,c){function f(e){return(u?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(l)}function d(e){return u?Math.pow(l,e):-Math.pow(l,-e)}function n(e){return t(f(e))}n.invert=function(e){return d(t.invert(e))};n.domain=function(e){if(!arguments.length)return c;u=e[0]>=0;t.domain((c=e.map(Number)).map(f));return n};n.base=function(e){if(!arguments.length)return l;l=+e;t.domain(c.map(f));return n};n.nice=function(){var e=ss(c.map(f),u?Math:ws);t.domain(e);c=e.map(d);return n};n.ticks=function(){var e=ns(c),t=[],r=e[0],a=e[1],n=Math.floor(f(r)),i=Math.ceil(f(a)),o=l%1?2:l;if(isFinite(i-n)){if(u){for(;n<i;n++)for(var s=1;s<o;s++)t.push(d(n)*s);t.push(d(n))}else{t.push(d(n));for(;n++<i;)for(var s=o-1;s>0;s--)t.push(d(n)*s)}for(n=0;t[n]<r;n++){}for(i=t.length;t[i-1]>a;i--){}t=t.slice(n,i)}return t};n.tickFormat=function(e,r){if(!arguments.length)return _s;if(arguments.length<2)r=_s;else if(typeof r!=="function")r=P.format(r);var a=Math.max(1,l*e/n.ticks().length);return function(e){var t=e/d(Math.round(f(e)));if(t*l<l-.5)t*=l;return t<=a?r(e):""}};n.copy=function(){return bs(t.copy(),l,u,c)};return ds(n,t)}var _s=P.format(".0e"),ws={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};P.scale.pow=function(){return Ts(P.scale.linear(),1,[0,1])};function Ts(t,r,a){var n=ks(r),i=ks(1/r);function o(e){return t(n(e))}o.invert=function(e){return i(t.invert(e))};o.domain=function(e){if(!arguments.length)return a;t.domain((a=e.map(Number)).map(n));return o};o.ticks=function(e){return hs(a,e)};o.tickFormat=function(e,t){return ms(a,e,t)};o.nice=function(e){return o.domain(vs(a,e))};o.exponent=function(e){if(!arguments.length)return r;n=ks(r=e);i=ks(1/r);t.domain(a.map(n));return o};o.copy=function(){return Ts(t.copy(),r,a)};return ds(o,t)}function ks(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}P.scale.sqrt=function(){return P.scale.pow().exponent(.5)};P.scale.ordinal=function(){return Ms([],{t:"range",a:[[]]})};function Ms(s,l){var n,u,c;function f(e){return u[((n.get(e)||(l.t==="range"?n.set(e,s.push(e)):NaN))-1)%u.length]}function d(t,r){return P.range(s.length).map(function(e){return t+r*e})}f.domain=function(e){if(!arguments.length)return s;s=[];n=new y;var t=-1,r=e.length,a;while(++t<r)if(!n.has(a=e[t]))n.set(a,s.push(a));return f[l.t].apply(f,l.a)};f.range=function(e){if(!arguments.length)return u;u=e;c=0;l={t:"range",a:arguments};return f};f.rangePoints=function(e,t){if(arguments.length<2)t=0;var r=e[0],a=e[1],n=s.length<2?(r=(r+a)/2,0):(a-r)/(s.length-1+t);u=d(r+n*t/2,n);c=0;l={t:"rangePoints",a:arguments};return f};f.rangeRoundPoints=function(e,t){if(arguments.length<2)t=0;var r=e[0],a=e[1],n=s.length<2?(r=a=Math.round((r+a)/2),0):(a-r)/(s.length-1+t)|0;u=d(r+Math.round(n*t/2+(a-r-(s.length-1+t)*n)/2),n);c=0;l={t:"rangeRoundPoints",a:arguments};return f};f.rangeBands=function(e,t,r){if(arguments.length<2)t=0;if(arguments.length<3)r=t;var a=e[1]<e[0],n=e[a-0],i=e[1-a],o=(i-n)/(s.length-t+2*r);u=d(n+o*r,o);if(a)u.reverse();c=o*(1-t);l={t:"rangeBands",a:arguments};return f};f.rangeRoundBands=function(e,t,r){if(arguments.length<2)t=0;if(arguments.length<3)r=t;var a=e[1]<e[0],n=e[a-0],i=e[1-a],o=Math.floor((i-n)/(s.length-t+2*r));u=d(n+Math.round((i-n-(s.length-t)*o)/2),o);if(a)u.reverse();c=Math.round(o*(1-t));l={t:"rangeRoundBands",a:arguments};return f};f.rangeBand=function(){return c};f.rangeExtent=function(){return ns(l.a[0])};f.copy=function(){return Ms(s,l)};return f.domain(s)}P.scale.category10=function(){return P.scale.ordinal().range(As)};P.scale.category20=function(){return P.scale.ordinal().range(Ss)};P.scale.category20b=function(){return P.scale.ordinal().range(Es)};P.scale.category20c=function(){return P.scale.ordinal().range(Ls)};var As=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(vt);var Ss=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(vt);var Es=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(vt);var Ls=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(vt);P.scale.quantile=function(){return Cs([],[])};function Cs(r,a){var n;function t(){var e=0,t=a.length;n=[];while(++e<t)n[e-1]=P.quantile(r,e/t);return i}function i(e){if(!isNaN(e=+e))return a[P.bisect(n,e)]}i.domain=function(e){if(!arguments.length)return r;r=e.map(u).filter(c).sort(l);return t()};i.range=function(e){if(!arguments.length)return a;a=e;return t()};i.quantiles=function(){return n};i.invertExtent=function(e){e=a.indexOf(e);return e<0?[NaN,NaN]:[e>0?n[e-1]:r[0],e<n.length?n[e]:r[r.length-1]]};i.copy=function(){return Cs(r,a)};return t()}P.scale.quantize=function(){return Ds(0,1,[0,1])};function Ds(t,r,a){var n,i;function e(e){return a[Math.max(0,Math.min(i,Math.floor(n*(e-t))))]}function o(){n=a.length/(r-t);i=a.length-1;return e}e.domain=function(e){if(!arguments.length)return[t,r];t=+e[0];r=+e[e.length-1];return o()};e.range=function(e){if(!arguments.length)return a;a=e;return o()};e.invertExtent=function(e){e=a.indexOf(e);e=e<0?NaN:e/n+t;return[e,e+1/n]};e.copy=function(){return Ds(t,r,a)};return o()}P.scale.threshold=function(){return Os([.5],[0,1])};function Os(t,r){function a(e){if(e<=e)return r[P.bisect(t,e)]}a.domain=function(e){if(!arguments.length)return t;t=e;return a};a.range=function(e){if(!arguments.length)return r;r=e;return a};a.invertExtent=function(e){e=r.indexOf(e);return[t[e-1],t[e]]};a.copy=function(){return Os(t,r)};return a}P.scale.identity=function(){return Is([0,1])};function Is(r){function t(e){return+e}t.invert=t;t.domain=t.range=function(e){if(!arguments.length)return r;r=e.map(t);return t};t.ticks=function(e){return hs(r,e)};t.tickFormat=function(e,t){return ms(r,e,t)};t.copy=function(){return Is(r)};return t}P.svg={};function Ps(){return 0}P.svg.arc=function(){var F=Ns,j=zs,H=Ps,B=Rs,q=Fs,U=js,Y=Hs;function t(){var e=Math.max(0,+F.apply(this,arguments)),t=Math.max(0,+j.apply(this,arguments)),r=q.apply(this,arguments)-Ce,a=U.apply(this,arguments)-Ce,n=Math.abs(a-r),i=r>a?0:1;if(t<e)o=t,t=e,e=o;if(n>=Le)return V(t,i)+(e?V(e,1-i):"")+"Z";var o,s,l,u,c=0,f=0,d,v,p,h,m,g,y,x,b=[];if(u=(+Y.apply(this,arguments)||0)/2){l=B===Rs?Math.sqrt(e*e+t*t):+B.apply(this,arguments);if(!i)f*=-1;if(t)f=Ne(l/t*Math.sin(u));if(e)c=Ne(l/e*Math.sin(u))}if(t){d=t*Math.cos(r+f);v=t*Math.sin(r+f);p=t*Math.cos(a-f);h=t*Math.sin(a-f);var _=Math.abs(a-r-2*f)<=Se?0:1;if(f&&Bs(d,v,p,h)===i^_){var w=(r+a)/2;d=t*Math.cos(w);v=t*Math.sin(w);p=h=null}}else{d=v=0}if(e){m=e*Math.cos(a-c);g=e*Math.sin(a-c);y=e*Math.cos(r+c);x=e*Math.sin(r+c);var T=Math.abs(r-a+2*c)<=Se?0:1;if(c&&Bs(m,g,y,x)===1-i^T){var k=(r+a)/2;m=e*Math.cos(k);g=e*Math.sin(k);y=x=null}}else{m=g=0}if(n>Me&&(o=Math.min(Math.abs(t-e)/2,+H.apply(this,arguments)))>.001){s=e<t^i?0:1;var M=o,A=o;if(n<Se){var S=y==null?[m,g]:p==null?[d,v]:En([d,v],[y,x],[p,h],[m,g]),E=d-S[0],L=v-S[1],C=p-S[0],D=h-S[1],O=1/Math.sin(Math.acos((E*C+L*D)/(Math.sqrt(E*E+L*L)*Math.sqrt(C*C+D*D)))/2),I=Math.sqrt(S[0]*S[0]+S[1]*S[1]);A=Math.min(o,(e-I)/(O-1));M=Math.min(o,(t-I)/(O+1))}if(p!=null){var P=qs(y==null?[m,g]:[y,x],[d,v],t,M,i),R=qs([p,h],[m,g],t,M,i);if(o===M){b.push("M",P[0],"A",M,",",M," 0 0,",s," ",P[1],"A",t,",",t," 0 ",1-i^Bs(P[1][0],P[1][1],R[1][0],R[1][1]),",",i," ",R[1],"A",M,",",M," 0 0,",s," ",R[0])}else{b.push("M",P[0],"A",M,",",M," 0 1,",s," ",R[0])}}else{b.push("M",d,",",v)}if(y!=null){var N=qs([d,v],[y,x],e,-A,i),z=qs([m,g],p==null?[d,v]:[p,h],e,-A,i);if(o===A){b.push("L",z[0],"A",A,",",A," 0 0,",s," ",z[1],"A",e,",",e," 0 ",i^Bs(z[1][0],z[1][1],N[1][0],N[1][1]),",",1-i," ",N[1],"A",A,",",A," 0 0,",s," ",N[0])}else{b.push("L",z[0],"A",A,",",A," 0 0,",s," ",N[0])}}else{b.push("L",m,",",g)}}else{b.push("M",d,",",v);if(p!=null)b.push("A",t,",",t," 0 ",_,",",i," ",p,",",h);b.push("L",m,",",g);if(y!=null)b.push("A",e,",",e," 0 ",T,",",1-i," ",y,",",x)}b.push("Z");return b.join("")}function V(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}t.innerRadius=function(e){if(!arguments.length)return F;F=wt(e);return t};t.outerRadius=function(e){if(!arguments.length)return j;j=wt(e);return t};t.cornerRadius=function(e){if(!arguments.length)return H;H=wt(e);return t};t.padRadius=function(e){if(!arguments.length)return B;B=e==Rs?Rs:wt(e);return t};t.startAngle=function(e){if(!arguments.length)return q;q=wt(e);return t};t.endAngle=function(e){if(!arguments.length)return U;U=wt(e);return t};t.padAngle=function(e){if(!arguments.length)return Y;Y=wt(e);return t};t.centroid=function(){var e=(+F.apply(this,arguments)+ +j.apply(this,arguments))/2,t=(+q.apply(this,arguments)+ +U.apply(this,arguments))/2-Ce;return[Math.cos(t)*e,Math.sin(t)*e]};return t};var Rs="auto";function Ns(e){return e.innerRadius}function zs(e){return e.outerRadius}function Fs(e){return e.startAngle}function js(e){return e.endAngle}function Hs(e){return e&&e.padAngle}function Bs(e,t,r,a){return(e-r)*t-(t-a)*e>0?0:1}function qs(e,t,r,a,n){var i=e[0]-t[0],o=e[1]-t[1],s=(n?a:-a)/Math.sqrt(i*i+o*o),l=s*o,u=-s*i,c=e[0]+l,f=e[1]+u,d=t[0]+l,v=t[1]+u,p=(c+d)/2,h=(f+v)/2,m=d-c,g=v-f,y=m*m+g*g,x=r-a,b=c*v-d*f,_=(g<0?-1:1)*Math.sqrt(Math.max(0,x*x*y-b*b)),w=(b*g-m*_)/y,T=(-b*m-g*_)/y,k=(b*g+m*_)/y,M=(-b*m+g*_)/y,A=w-p,S=T-h,E=k-p,L=M-h;if(A*A+S*S>E*E+L*L)w=k,T=M;return[[w-l,T-u],[w*r/x,T*r/x]]}function Us(u){var c=wn,f=Tn,d=na,v=Vs,t=v.key,p=.7;function r(e){var t=[],r=[],a=-1,n=e.length,i,o=wt(c),s=wt(f);function l(){t.push("M",v(u(r),p))}while(++a<n){if(d.call(this,i=e[a],a)){r.push([+o.call(this,i,a),+s.call(this,i,a)])}else if(r.length){l();r=[]}}if(r.length)l();return t.length?t.join(""):null}r.x=function(e){if(!arguments.length)return c;c=e;return r};r.y=function(e){if(!arguments.length)return f;f=e;return r};r.defined=function(e){if(!arguments.length)return d;d=e;return r};r.interpolate=function(e){if(!arguments.length)return t;if(typeof e==="function")t=v=e;else t=(v=Ys.get(e)||Vs).key;return r};r.tension=function(e){if(!arguments.length)return p;p=e;return r};return r}P.svg.line=function(){return Us(z)};var Ys=P.map({linear:Vs,"linear-closed":Gs,step:Ws,"step-before":$s,"step-after":Zs,basis:tl,"basis-open":rl,"basis-closed":al,bundle:nl,cardinal:Ks,"cardinal-open":Xs,"cardinal-closed":Js,monotone:vl});Ys.forEach(function(e,t){t.key=e;t.closed=/-closed$/.test(e)});function Vs(e){return e.length>1?e.join("L"):e+"Z"}function Gs(e){return e.join("L")+"Z"}function Ws(e){var t=0,r=e.length,a=e[0],n=[a[0],",",a[1]];while(++t<r)n.push("H",(a[0]+(a=e[t])[0])/2,"V",a[1]);if(r>1)n.push("H",a[0]);return n.join("")}function $s(e){var t=0,r=e.length,a=e[0],n=[a[0],",",a[1]];while(++t<r)n.push("V",(a=e[t])[1],"H",a[0]);return n.join("")}function Zs(e){var t=0,r=e.length,a=e[0],n=[a[0],",",a[1]];while(++t<r)n.push("H",(a=e[t])[0],"V",a[1]);return n.join("")}function Xs(e,t){return e.length<4?Vs(e):e[1]+Qs(e.slice(1,-1),el(e,t))}function Js(e,t){return e.length<3?Gs(e):e[0]+Qs((e.push(e[0]),e),el([e[e.length-2]].concat(e,[e[1]]),t))}function Ks(e,t){return e.length<3?Vs(e):e[0]+Qs(e,el(e,t))}function Qs(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2){return Vs(e)}var r=e.length!=t.length,a="",n=e[0],i=e[1],o=t[0],s=o,l=1;if(r){a+="Q"+(i[0]-o[0]*2/3)+","+(i[1]-o[1]*2/3)+","+i[0]+","+i[1];n=e[1];l=2}if(t.length>1){s=t[1];i=e[l];l++;a+="C"+(n[0]+o[0])+","+(n[1]+o[1])+","+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1];for(var u=2;u<t.length;u++,l++){i=e[l];s=t[u];a+="S"+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1]}}if(r){var c=e[l];a+="Q"+(i[0]+s[0]*2/3)+","+(i[1]+s[1]*2/3)+","+c[0]+","+c[1]}return a}function el(e,t){var r=[],a=(1-t)/2,n,i=e[0],o=e[1],s=1,l=e.length;while(++s<l){n=i;i=o;o=e[s];r.push([a*(o[0]-n[0]),a*(o[1]-n[1])])}return r}function tl(e){if(e.length<3)return Vs(e);var t=1,r=e.length,a=e[0],n=a[0],i=a[1],o=[n,n,n,(a=e[1])[0]],s=[i,i,i,a[1]],l=[n,",",i,"L",il(ll,o),",",il(ll,s)];e.push(e[r-1]);while(++t<=r){a=e[t];o.shift();o.push(a[0]);s.shift();s.push(a[1]);ul(l,o,s)}e.pop();l.push("L",a);return l.join("")}function rl(e){if(e.length<4)return Vs(e);var t=[],r=-1,a=e.length,n,i=[0],o=[0];while(++r<3){n=e[r];i.push(n[0]);o.push(n[1])}t.push(il(ll,i)+","+il(ll,o));--r;while(++r<a){n=e[r];i.shift();i.push(n[0]);o.shift();o.push(n[1]);ul(t,i,o)}return t.join("")}function al(e){var t,r=-1,a=e.length,n=a+4,i,o=[],s=[];while(++r<4){i=e[r%a];o.push(i[0]);s.push(i[1])}t=[il(ll,o),",",il(ll,s)];--r;while(++r<n){i=e[r%a];o.shift();o.push(i[0]);s.shift();s.push(i[1]);ul(t,o,s)}return t.join("")}function nl(e,t){var r=e.length-1;if(r){var a=e[0][0],n=e[0][1],i=e[r][0]-a,o=e[r][1]-n,s=-1,l,u;while(++s<=r){l=e[s];u=s/r;l[0]=t*l[0]+(1-t)*(a+u*i);l[1]=t*l[1]+(1-t)*(n+u*o)}}return tl(e)}function il(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}var ol=[0,2/3,1/3,0],sl=[0,1/3,2/3,0],ll=[0,1/6,2/3,1/6];function ul(e,t,r){e.push("C",il(ol,t),",",il(ol,r),",",il(sl,t),",",il(sl,r),",",il(ll,t),",",il(ll,r))}function cl(e,t){return(t[1]-e[1])/(t[0]-e[0])}function fl(e){var t=0,r=e.length-1,a=[],n=e[0],i=e[1],o=a[0]=cl(n,i);while(++t<r){a[t]=(o+(o=cl(n=i,i=e[t+1])))/2}a[t]=o;return a}function dl(e){var t=[],r,a,n,i,o=fl(e),s=-1,l=e.length-1;while(++s<l){r=cl(e[s],e[s+1]);if(I(r)<Me){o[s]=o[s+1]=0}else{a=o[s]/r;n=o[s+1]/r;i=a*a+n*n;if(i>9){i=r*3/Math.sqrt(i);o[s]=i*a;o[s+1]=i*n}}}s=-1;while(++s<=l){i=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s]));t.push([i||0,o[s]*i||0])}return t}function vl(e){return e.length<3?Vs(e):e[0]+Qs(e,dl(e))}P.svg.line.radial=function(){var e=Us(pl);e.radius=e.x,delete e.x;e.angle=e.y,delete e.y;return e};function pl(e){var t,r=-1,a=e.length,n,i;while(++r<a){t=e[r];n=t[0];i=t[1]-Ce;t[0]=n*Math.cos(i);t[1]=n*Math.sin(i)}return e}function hl(p){var h=wn,m=wn,g=0,y=Tn,x=na,b=Vs,t=b.key,_=b,w="L",T=.7;function r(e){var t=[],r=[],a=[],n=-1,i=e.length,o,s=wt(h),l=wt(g),u=h===m?function(){return f}:wt(m),c=g===y?function(){return d}:wt(y),f,d;function v(){t.push("M",b(p(a),T),w,_(p(r.reverse()),T),"Z")}while(++n<i){if(x.call(this,o=e[n],n)){r.push([f=+s.call(this,o,n),d=+l.call(this,o,n)]);a.push([+u.call(this,o,n),+c.call(this,o,n)])}else if(r.length){v();r=[];a=[]}}if(r.length)v();return t.length?t.join(""):null}r.x=function(e){if(!arguments.length)return m;h=m=e;return r};r.x0=function(e){if(!arguments.length)return h;h=e;return r};r.x1=function(e){if(!arguments.length)return m;m=e;return r};r.y=function(e){if(!arguments.length)return y;g=y=e;return r};r.y0=function(e){if(!arguments.length)return g;g=e;return r};r.y1=function(e){if(!arguments.length)return y;y=e;return r};r.defined=function(e){if(!arguments.length)return x;x=e;return r};r.interpolate=function(e){if(!arguments.length)return t;if(typeof e==="function")t=b=e;else t=(b=Ys.get(e)||Vs).key;_=b.reverse||b;w=b.closed?"M":"L";return r};r.tension=function(e){if(!arguments.length)return T;T=e;return r};return r}$s.reverse=Zs;Zs.reverse=$s;P.svg.area=function(){return hl(z)};P.svg.area.radial=function(){var e=hl(pl);e.radius=e.x,delete e.x;e.innerRadius=e.x0,delete e.x0;e.outerRadius=e.x1,delete e.x1;e.angle=e.y,delete e.y;e.startAngle=e.y0,delete e.y0;e.endAngle=e.y1,delete e.y1;return e};P.svg.chord=function(){var n=nn,i=on,l=ml,u=Fs,c=js;function t(e,t){var r=o(this,n,e,t),a=o(this,i,e,t);return"M"+r.p0+f(r.r,r.p1,r.a1-r.a0)+(s(r,a)?d(r.r,r.p1,r.r,r.p0):d(r.r,r.p1,a.r,a.p0)+f(a.r,a.p1,a.a1-a.a0)+d(a.r,a.p1,r.r,r.p0))+"Z"}function o(e,t,r,a){var n=t.call(e,r,a),i=l.call(e,n,a),o=u.call(e,n,a)-Ce,s=c.call(e,n,a)-Ce;return{r:i,a0:o,a1:s,p0:[i*Math.cos(o),i*Math.sin(o)],p1:[i*Math.cos(s),i*Math.sin(s)]}}function s(e,t){return e.a0==t.a0&&e.a1==t.a1}function f(e,t,r){return"A"+e+","+e+" 0 "+ +(r>Se)+",1 "+t}function d(e,t,r,a){return"Q 0,0 "+a}t.radius=function(e){if(!arguments.length)return l;l=wt(e);return t};t.source=function(e){if(!arguments.length)return n;n=wt(e);return t};t.target=function(e){if(!arguments.length)return i;i=wt(e);return t};t.startAngle=function(e){if(!arguments.length)return u;u=wt(e);return t};t.endAngle=function(e){if(!arguments.length)return c;c=wt(e);return t};return t};function ml(e){return e.radius}P.svg.diagonal=function(){var o=nn,s=on,l=gl;function t(e,t){var r=o.call(this,e,t),a=s.call(this,e,t),n=(r.y+a.y)/2,i=[r,{x:r.x,y:n},{x:a.x,y:n},a];i=i.map(l);return"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}t.source=function(e){if(!arguments.length)return o;o=wt(e);return t};t.target=function(e){if(!arguments.length)return s;s=wt(e);return t};t.projection=function(e){if(!arguments.length)return l;l=e;return t};return t};function gl(e){return[e.x,e.y]}P.svg.diagonal.radial=function(){var e=P.svg.diagonal(),t=gl,r=e.projection;e.projection=function(e){return arguments.length?r(yl(t=e)):t};return e};function yl(a){return function(){var e=a.apply(this,arguments),t=e[0],r=e[1]-Ce;return[t*Math.cos(r),t*Math.sin(r)]}}P.svg.symbol=function(){var r=bl,a=xl;function t(e,t){return(wl.get(r.call(this,e,t))||_l)(a.call(this,e,t))}t.type=function(e){if(!arguments.length)return r;r=wt(e);return t};t.size=function(e){if(!arguments.length)return a;a=wt(e);return t};return t};function xl(){return 64}function bl(){return"circle"}function _l(e){var t=Math.sqrt(e/Se);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}var wl=P.map({circle:_l,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*kl)),r=t*kl;return"M0,"+-t+"L"+r+",0"+" 0,"+t+" "+-r+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Tl),r=t*Tl/2;return"M0,"+r+"L"+t+","+-r+" "+-t+","+-r+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Tl),r=t*Tl/2;return"M0,"+-r+"L"+t+","+r+" "+-t+","+r+"Z"}});P.svg.symbolTypes=wl.keys();var Tl=Math.sqrt(3),kl=Math.tan(30*De);W.transition=function(e){var t=Cl||++Ll,r=Pl(e),a=[],n,i,o=Dl||{time:Date.now(),ease:Ii,delay:0,duration:250};for(var s=-1,l=this.length;++s<l;){a.push(n=[]);for(var u=this[s],c=-1,f=u.length;++c<f;){if(i=u[c])Rl(i,c,r,t,o);n.push(i)}}return Sl(a,r,t)};W.interrupt=function(e){return this.each(e==null?Ml:Al(Pl(e)))};var Ml=Al(Pl());function Al(a){return function(){var e,t,r;if((e=this[a])&&(r=e[t=e.active])){r.timer.c=null;r.timer.t=NaN;if(--e.count)delete e[t];else delete this[a];e.active+=.5;r.event&&r.event.interrupt.call(this,this.__data__,r.index)}}}function Sl(e,t,r){q(e,El);e.namespace=t;e.id=r;return e}var El=[],Ll=0,Cl,Dl;El.call=W.call;El.empty=W.empty;El.node=W.node;El.size=W.size;P.transition=function(e,t){return e&&e.transition?Cl?e.transition(t):e:P.selection().transition(e)};P.transition.prototype=El;El.select=function(e){var t=this.id,r=this.namespace,a=[],n,i,o;e=$(e);for(var s=-1,l=this.length;++s<l;){a.push(n=[]);for(var u=this[s],c=-1,f=u.length;++c<f;){if((o=u[c])&&(i=e.call(o,o.__data__,c,s))){if("__data__"in o)i.__data__=o.__data__;Rl(i,c,r,t,o[r][t]);n.push(i)}else{n.push(null)}}}return Sl(a,r,t)};El.selectAll=function(e){var t=this.id,r=this.namespace,a=[],n,i,o,s,l;e=Z(e);for(var u=-1,c=this.length;++u<c;){for(var f=this[u],d=-1,v=f.length;++d<v;){if(o=f[d]){l=o[r][t];i=e.call(o,o.__data__,d,u);a.push(n=[]);for(var p=-1,h=i.length;++p<h;){if(s=i[p])Rl(s,p,r,t,l);n.push(s)}}}}return Sl(a,r,t)};El.filter=function(e){var t=[],r,a,n;if(typeof e!=="function")e=ue(e);for(var i=0,o=this.length;i<o;i++){t.push(r=[]);for(var a=this[i],s=0,l=a.length;s<l;s++){if((n=a[s])&&e.call(n,n.__data__,s,i)){r.push(n)}}}return Sl(t,this.namespace,this.id)};El.tween=function(t,r){var a=this.id,n=this.namespace;if(arguments.length<2)return this.node()[n][a].tween.get(t);return fe(this,r==null?function(e){e[n][a].tween.remove(t)}:function(e){e[n][a].tween.set(t,r)})};function Ol(e,a,n,i){var o=e.id,s=e.namespace;return fe(e,typeof n==="function"?function(e,t,r){e[s][o].tween.set(a,i(n.call(e,e.__data__,t,r)))}:(n=i(n),function(e){e[s][o].tween.set(a,n)}))}El.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var a=e=="transform"?to:Ti,n=P.ns.qualify(e);function i(){this.removeAttribute(n)}function o(){this.removeAttributeNS(n.space,n.local)}function r(r){return r==null?i:(r+="",function(){var e=this.getAttribute(n),t;return e!==r&&(t=a(e,r),function(e){this.setAttribute(n,t(e))})})}function s(r){return r==null?o:(r+="",function(){var e=this.getAttributeNS(n.space,n.local),t;return e!==r&&(t=a(e,r),function(e){this.setAttributeNS(n.space,n.local,t(e))})})}return Ol(this,"attr."+e,t,n.local?s:r)};El.attrTween=function(e,a){var n=P.ns.qualify(e);function t(e,t){var r=a.call(this,e,t,this.getAttribute(n));return r&&function(e){this.setAttribute(n,r(e))}}function r(e,t){var r=a.call(this,e,t,this.getAttributeNS(n.space,n.local));return r&&function(e){this.setAttributeNS(n.space,n.local,r(e))}}return this.tween("attr."+e,n.local?r:t)};El.style=function(a,e,n){var t=arguments.length;if(t<3){if(typeof a!=="string"){if(t<2)e="";for(n in a)this.style(n,a[n],e);return this}n=""}function i(){this.style.removeProperty(a)}function r(r){return r==null?i:(r+="",function(){var e=N(this).getComputedStyle(this,null).getPropertyValue(a),t;return e!==r&&(t=Ti(e,r),function(e){this.style.setProperty(a,t(e),n)})})}return Ol(this,"style."+a,e,r)};El.styleTween=function(a,n,i){if(arguments.length<3)i="";function e(e,t){var r=n.call(this,e,t,N(this).getComputedStyle(this,null).getPropertyValue(a));return r&&function(e){this.style.setProperty(a,r(e),i)}}return this.tween("style."+a,e)};El.text=function(e){return Ol(this,"text",e,Il)};function Il(e){if(e==null)e="";return function(){this.textContent=e}}El.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;if(this[t].count<2&&(e=this.parentNode))e.removeChild(this)})};El.ease=function(t){var r=this.id,a=this.namespace;if(arguments.length<1)return this.node()[a][r].ease;if(typeof t!=="function")t=P.ease.apply(P,arguments);return fe(this,function(e){e[a][r].ease=t})};El.delay=function(a){var n=this.id,i=this.namespace;if(arguments.length<1)return this.node()[i][n].delay;return fe(this,typeof a==="function"?function(e,t,r){e[i][n].delay=+a.call(e,e.__data__,t,r)}:(a=+a,function(e){e[i][n].delay=a}))};El.duration=function(a){var n=this.id,i=this.namespace;if(arguments.length<1)return this.node()[i][n].duration;return fe(this,typeof a==="function"?function(e,t,r){e[i][n].duration=Math.max(1,a.call(e,e.__data__,t,r))}:(a=Math.max(1,a),function(e){e[i][n].duration=a}))};El.each=function(a,r){var n=this.id,i=this.namespace;if(arguments.length<2){var e=Dl,t=Cl;try{Cl=n;fe(this,function(e,t,r){Dl=e[i][n];a.call(e,e.__data__,t,r)})}finally{Dl=e;Cl=t}}else{fe(this,function(e){var t=e[i][n];(t.event||(t.event=P.dispatch("start","end","interrupt"))).on(a,r)})}return this};El.transition=function(){var e=this.id,t=++Ll,r=this.namespace,a=[],n,i,o,s;for(var l=0,u=this.length;l<u;l++){a.push(n=[]);for(var i=this[l],c=0,f=i.length;c<f;c++){if(o=i[c]){s=o[r][e];Rl(o,c,r,t,{time:s.time,ease:s.ease,delay:s.delay+s.duration,duration:s.duration})}n.push(o)}}return Sl(a,r,t)};function Pl(e){return e==null?"__transition__":"__transition_"+e+"__"}function Rl(i,o,n,s,e){var l=i[n]||(i[n]={active:0,count:0}),u=l[s],c,f,d,v,p;function t(e){var t=u.delay;f.t=t+c;if(t<=e)return r(e-t);f.c=r}function r(e){var t=l.active,r=l[t];if(r){r.timer.c=null;r.timer.t=NaN;--l.count;delete l[t];r.event&&r.event.interrupt.call(i,i.__data__,r.index)}for(var a in l){if(+a<s){var n=l[a];n.timer.c=null;n.timer.t=NaN;--l.count;delete l[a]}}f.c=h;Ot(function(){if(f.c&&h(e||1)){f.c=null;f.t=NaN}return 1},0,c);l.active=s;u.event&&u.event.start.call(i,i.__data__,o);p=[];u.tween.forEach(function(e,t){if(t=t.call(i,i.__data__,o)){p.push(t)}});v=u.ease;d=u.duration}function h(e){var t=e/d,r=v(t),a=p.length;while(a>0){p[--a].call(i,r)}if(t>=1){u.event&&u.event.end.call(i,i.__data__,o);if(--l.count)delete l[s];else delete i[n];return 1}}if(!u){c=e.time;f=Ot(t,0,c);u=l[s]={tween:new y,time:c,timer:f,delay:e.delay,duration:e.duration,ease:e.ease,index:o};e=null;++l.count}}P.svg.axis=function(){var A=P.scale.linear(),S=Nl,E=6,L=6,C=3,D=[10],O=null,I;function r(e){e.each(function(){var e=P.select(this);var t=this.__chart__||A,r=this.__chart__=A.copy();var a=O==null?r.ticks?r.ticks.apply(r,D):r.domain():O,n=I==null?r.tickFormat?r.tickFormat.apply(r,D):z:I,i=e.selectAll(".tick").data(a,r),o=i.enter().insert("g",".domain").attr("class","tick").style("opacity",Me),s=P.transition(i.exit()).style("opacity",Me).remove(),l=P.transition(i.order()).style("opacity",1),u=Math.max(E,0)+C,c;var f=is(r),d=e.selectAll(".domain").data([0]),v=(d.enter().append("path").attr("class","domain"),P.transition(d));o.append("line");o.append("text");var p=o.select("line"),h=l.select("line"),m=i.select("text").text(n),g=o.select("text"),y=l.select("text"),x=S==="top"||S==="left"?-1:1,b,_,w,T;if(S==="bottom"||S==="top"){c=Fl,b="x",w="y",_="x2",T="y2";m.attr("dy",x<0?"0em":".71em").style("text-anchor","middle");v.attr("d","M"+f[0]+","+x*L+"V0H"+f[1]+"V"+x*L)}else{c=jl,b="y",w="x",_="y2",T="x2";m.attr("dy",".32em").style("text-anchor",x<0?"end":"start");v.attr("d","M"+x*L+","+f[0]+"H0V"+f[1]+"H"+x*L)}p.attr(T,x*E);g.attr(w,x*u);h.attr(_,0).attr(T,x*E);y.attr(b,0).attr(w,x*u);if(r.rangeBand){var k=r,M=k.rangeBand()/2;t=r=function(e){return k(e)+M}}else if(t.rangeBand){t=r}else{s.call(c,r,t)}o.call(c,t,r);l.call(c,r,r)})}r.scale=function(e){if(!arguments.length)return A;A=e;return r};r.orient=function(e){if(!arguments.length)return S;S=e in zl?e+"":Nl;return r};r.ticks=function(){if(!arguments.length)return D;D=f(arguments);return r};r.tickValues=function(e){if(!arguments.length)return O;O=e;return r};r.tickFormat=function(e){if(!arguments.length)return I;I=e;return r};r.tickSize=function(e){var t=arguments.length;if(!t)return E;E=+e;L=+arguments[t-1];return r};r.innerTickSize=function(e){if(!arguments.length)return E;E=+e;return r};r.outerTickSize=function(e){if(!arguments.length)return L;L=+e;return r};r.tickPadding=function(e){if(!arguments.length)return C;C=+e;return r};r.tickSubdivide=function(){return arguments.length&&r};return r};var Nl="bottom",zl={top:1,right:1,bottom:1,left:1};function Fl(e,r,a){e.attr("transform",function(e){var t=r(e);return"translate("+(isFinite(t)?t:a(e))+",0)"})}function jl(e,r,a){e.attr("transform",function(e){var t=r(e);return"translate(0,"+(isFinite(t)?t:a(e))+")"})}P.svg.brush=function(){var b=H(L,"brushstart","brush","brushend"),_=null,w=null,T=[0,0],k=[0,0],M,A,S=true,E=true,o=Bl[0];function L(e){e.each(function(){var e=P.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",s).on("touchstart.brush",s);var t=e.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var r=e.selectAll(".resize").data(o,z);r.exit().remove();r.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Hl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");r.style("display",L.empty()?"none":null);var a=P.transition(e),n=P.transition(t),i;if(_){i=is(_);n.attr("x",i[0]).attr("width",i[1]-i[0]);D(a)}if(w){i=is(w);n.attr("y",i[0]).attr("height",i[1]-i[0]);O(a)}C(a)})}L.event=function(e){e.each(function(){var a=b.of(this,arguments),n={x:T,y:k,i:M,j:A},e=this.__chart__||n;this.__chart__=n;if(Cl){P.select(this).transition().each("start.brush",function(){M=e.i;A=e.j;T=e.x;k=e.y;a({type:"brushstart"})}).tween("brush:brush",function(){var t=ki(T,n.x),r=ki(k,n.y);M=A=null;return function(e){T=n.x=t(e);k=n.y=r(e);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){M=n.i;A=n.j;a({type:"brush",mode:"resize"});a({type:"brushend"})})}else{a({type:"brushstart"});a({type:"brush",mode:"resize"});a({type:"brushend"})}})};function C(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+T[+/e$/.test(e)]+","+k[+/^s/.test(e)]+")"})}function D(e){e.select(".extent").attr("x",T[0]);e.selectAll(".extent,.n>rect,.s>rect").attr("width",T[1]-T[0])}function O(e){e.select(".extent").attr("y",k[0]);e.selectAll(".extent,.e>rect,.w>rect").attr("height",k[1]-k[0])}function s(){var r=this,e=P.select(P.event.target),a=b.of(r,arguments),n=P.select(r),t=e.datum(),i=!/^(n|s)$/.test(t)&&_,o=!/^(e|w)$/.test(t)&&w,f=e.classed("extent"),s=_e(r),d,v=P.mouse(r),l;var u=P.select(N(r)).on("keydown.brush",h).on("keyup.brush",m);if(P.event.changedTouches){u.on("touchmove.brush",g).on("touchend.brush",x)}else{u.on("mousemove.brush",g).on("mouseup.brush",x)}n.interrupt().selectAll("*").interrupt();if(f){v[0]=T[0]-v[0];v[1]=k[0]-v[1]}else if(t){var c=+/w$/.test(t),p=+/^n/.test(t);l=[T[1-c]-v[0],k[1-p]-v[1]];v[0]=T[c];v[1]=k[p]}else if(P.event.altKey)d=v.slice();n.style("pointer-events","none").selectAll(".resize").style("display",null);P.select("body").style("cursor",e.style("cursor"));a({type:"brushstart"});g();function h(){if(P.event.keyCode==32){if(!f){d=null;v[0]-=T[1];v[1]-=k[1];f=2}F()}}function m(){if(P.event.keyCode==32&&f==2){v[0]+=T[1];v[1]+=k[1];f=0;F()}}function g(){var e=P.mouse(r),t=false;if(l){e[0]+=l[0];e[1]+=l[1]}if(!f){if(P.event.altKey){if(!d)d=[(T[0]+T[1])/2,(k[0]+k[1])/2];v[0]=T[+(e[0]<d[0])];v[1]=k[+(e[1]<d[1])]}else d=null}if(i&&y(e,_,0)){D(n);t=true}if(o&&y(e,w,1)){O(n);t=true}if(t){C(n);a({type:"brush",mode:f?"move":"resize"})}}function y(e,t,r){var a=is(t),n=a[0],i=a[1],o=v[r],s=r?k:T,l=s[1]-s[0],u,c;if(f){n-=o;i-=l+o}u=(r?E:S)?Math.max(n,Math.min(i,e[r])):e[r];if(f){c=(u+=o)+l}else{if(d)o=Math.max(n,Math.min(i,2*d[r]-u));if(o<u){c=u;u=o}else{c=o}}if(s[0]!=u||s[1]!=c){if(r)A=null;else M=null;s[0]=u;s[1]=c;return true}}function x(){g();n.style("pointer-events","all").selectAll(".resize").style("display",L.empty()?"none":null);P.select("body").style("cursor",null);u.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);s();a({type:"brushend"})}}L.x=function(e){if(!arguments.length)return _;_=e;o=Bl[!_<<1|!w];return L};L.y=function(e){if(!arguments.length)return w;w=e;o=Bl[!_<<1|!w];return L};L.clamp=function(e){if(!arguments.length)return _&&w?[S,E]:_?S:w?E:null;if(_&&w)S=!!e[0],E=!!e[1];else if(_)S=!!e;else if(w)E=!!e;return L};L.extent=function(e){var t,r,a,n,i;if(!arguments.length){if(_){if(M){t=M[0],r=M[1]}else{t=T[0],r=T[1];if(_.invert)t=_.invert(t),r=_.invert(r);if(r<t)i=t,t=r,r=i}}if(w){if(A){a=A[0],n=A[1]}else{a=k[0],n=k[1];if(w.invert)a=w.invert(a),n=w.invert(n);if(n<a)i=a,a=n,n=i}}return _&&w?[[t,a],[r,n]]:_?[t,r]:w&&[a,n]}if(_){t=e[0],r=e[1];if(w)t=t[0],r=r[0];M=[t,r];if(_.invert)t=_(t),r=_(r);if(r<t)i=t,t=r,r=i;if(t!=T[0]||r!=T[1])T=[t,r]}if(w){a=e[0],n=e[1];if(_)a=a[1],n=n[1];A=[a,n];if(w.invert)a=w(a),n=w(n);if(n<a)i=a,a=n,n=i;if(a!=k[0]||n!=k[1])k=[a,n]}return L};L.clear=function(){if(!L.empty()){T=[0,0],k=[0,0];M=A=null}return L};L.empty=function(){return!!_&&T[0]==T[1]||!!w&&k[0]==k[1]};return P.rebind(L,b,"on")};var Hl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var Bl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];var ql=Ut.format=xr.timeFormat;var Ul=ql.utc;var Yl=Ul("%Y-%m-%dT%H:%M:%S.%LZ");ql.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Vl:Yl;function Vl(e){return e.toISOString()}Vl.parse=function(e){var t=new Date(e);return isNaN(t)?null:t};Vl.toString=Yl.toString;Ut.second=Wt(function(e){return new Yt(Math.floor(e/1e3)*1e3)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*1e3)},function(e){return e.getSeconds()});Ut.seconds=Ut.second.range;Ut.seconds.utc=Ut.second.utc.range;Ut.minute=Wt(function(e){return new Yt(Math.floor(e/6e4)*6e4)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*6e4)},function(e){return e.getMinutes()});Ut.minutes=Ut.minute.range;Ut.minutes.utc=Ut.minute.utc.range;Ut.hour=Wt(function(e){var t=e.getTimezoneOffset()/60;return new Yt((Math.floor(e/36e5-t)+t)*36e5)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*36e5)},function(e){return e.getHours()});Ut.hours=Ut.hour.range;Ut.hours.utc=Ut.hour.utc.range;Ut.month=Wt(function(e){e=Ut.day(e);e.setDate(1);return e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()});Ut.months=Ut.month.range;Ut.months.utc=Ut.month.utc.range;function Gl(t,i,e){function o(e){return t(e)}o.invert=function(e){return Wl(t.invert(e))};o.domain=function(e){if(!arguments.length)return t.domain().map(Wl);t.domain(e);return o};function s(e,t){var r=e[1]-e[0],a=r/t,n=P.bisect($l,a);return n==$l.length?[i.year,ps(e.map(function(e){return e/31536e6}),t)[2]]:!n?[Jl,ps(e,t)[2]]:i[a/$l[n-1]<$l[n]/a?n-1:n]}o.nice=function(t,r){var e=o.domain(),a=ns(e),n=t==null?s(a,10):typeof t==="number"&&s(a,t);if(n)t=n[0],r=n[1];function i(e){return!isNaN(e)&&!t.range(e,Wl(+e+1),r).length}return o.domain(ss(e,r>1?{floor:function(e){while(i(e=t.floor(e)))e=Wl(e-1);return e},ceil:function(e){while(i(e=t.ceil(e)))e=Wl(+e+1);return e}}:t))};o.ticks=function(e,t){var r=ns(o.domain()),a=e==null?s(r,10):typeof e==="number"?s(r,e):!e.range&&[{range:e},t];if(a)e=a[0],t=a[1];return e.range(r[0],Wl(+r[1]+1),t<1?1:t)};o.tickFormat=function(){return e};o.copy=function(){return Gl(t.copy(),i,e)};return ds(o,t)}function Wl(e){return new Date(e)}var $l=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6];var Zl=[[Ut.second,1],[Ut.second,5],[Ut.second,15],[Ut.second,30],[Ut.minute,1],[Ut.minute,5],[Ut.minute,15],[Ut.minute,30],[Ut.hour,1],[Ut.hour,3],[Ut.hour,6],[Ut.hour,12],[Ut.day,1],[Ut.day,2],[Ut.week,1],[Ut.month,1],[Ut.month,3],[Ut.year,1]];var Xl=ql.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&e.getDate()!=1}],["%b %d",function(e){return e.getDate()!=1}],["%B",function(e){return e.getMonth()}],["%Y",na]]);var Jl={range:function(e,t,r){return P.range(Math.ceil(e/r)*r,+t,r).map(Wl)},floor:z,ceil:z};Zl.year=Ut.year;Ut.scale=function(){return Gl(P.scale.linear(),Zl,Xl)};var Kl=Zl.map(function(e){return[e[0].utc,e[1]]});var Ql=Ul.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],["%b %d",function(e){return e.getUTCDate()!=1}],["%B",function(e){return e.getUTCMonth()}],["%Y",na]]);Kl.year=Ut.year.utc;Ut.scale.utc=function(){return Gl(P.scale.linear(),Kl,Ql)};P.text=Tt(function(e){return e.responseText});P.json=function(e,t){return kt(e,"application/json",eu,t)};function eu(e){return JSON.parse(e.responseText)}P.html=function(e,t){return kt(e,"text/html",tu,t)};function tu(e){var t=R.createRange();t.selectNode(R.body);return t.createContextualFragment(e.responseText)}P.xml=Tt(function(e){return e.responseXML});if(typeof au==="function"&&au.amd)this.d3=P,au(P);else if(typeof ru==="object"&&ru.exports)ru.exports=P;else this.d3=P}.apply(self)},{}],21:[function(S,E,e){(function(A){(function(){"use strict";var e=S("object-assign");function i(e,t){if(e===t){return 0}var r=e.length;var a=t.length;for(var n=0,i=Math.min(r,a);n<i;++n){if(e[n]!==t[n]){r=e[n];a=t[n];break}}if(r<a){return-1}if(a<r){return 1}return 0}function o(e){if(A.Buffer&&typeof A.Buffer.isBuffer==="function"){return A.Buffer.isBuffer(e)}return!!(e!=null&&e._isBuffer)}var c=S("util/");var a=Object.prototype.hasOwnProperty;var f=Array.prototype.slice;var n=function(){return function e(){}.name==="foo"}();function s(e){return Object.prototype.toString.call(e)}function l(e){if(o(e)){return false}if(typeof A.ArrayBuffer!=="function"){return false}if(typeof ArrayBuffer.isView==="function"){return ArrayBuffer.isView(e)}if(!e){return false}if(e instanceof DataView){return true}if(e.buffer&&e.buffer instanceof ArrayBuffer){return true}return false}var u=E.exports=m;var d=/\s*function\s+([^\(\s]*)\s*/;function v(e){if(!c.isFunction(e)){return}if(n){return e.name}var t=e.toString();var r=t.match(d);return r&&r[1]}u.AssertionError=function e(t){this.name="AssertionError";this.actual=t.actual;this.expected=t.expected;this.operator=t.operator;if(t.message){this.message=t.message;this.generatedMessage=false}else{this.message=p(this);this.generatedMessage=true}var r=t.stackStartFunction||h;if(Error.captureStackTrace){Error.captureStackTrace(this,r)}else{var a=new Error;if(a.stack){var n=a.stack;var i=v(r);var o=n.indexOf("\n"+i);if(o>=0){var s=n.indexOf("\n",o+1);n=n.substring(s+1)}this.stack=n}}};c.inherits(u.AssertionError,Error);function t(e,t){if(typeof e==="string"){return e.length<t?e:e.slice(0,t)}else{return e}}function r(e){if(n||!c.isFunction(e)){return c.inspect(e)}var t=v(e);var r=t?": "+t:"";return"[Function"+r+"]"}function p(e){return t(r(e.actual),128)+" "+e.operator+" "+t(r(e.expected),128)}function h(e,t,r,a,n){throw new u.AssertionError({message:r,actual:e,expected:t,operator:a,stackStartFunction:n})}u.fail=h;function m(e,t){if(!e)h(e,true,t,"==",u.ok)}u.ok=m;u.equal=function e(t,r,a){if(t!=r)h(t,r,a,"==",u.equal)};u.notEqual=function e(t,r,a){if(t==r){h(t,r,a,"!=",u.notEqual)}};u.deepEqual=function e(t,r,a){if(!g(t,r,false)){h(t,r,a,"deepEqual",u.deepEqual)}};u.deepStrictEqual=function e(t,r,a){if(!g(t,r,true)){h(t,r,a,"deepStrictEqual",u.deepStrictEqual)}};function g(e,t,r,a){if(e===t){return true}else if(o(e)&&o(t)){return i(e,t)===0}else if(c.isDate(e)&&c.isDate(t)){return e.getTime()===t.getTime()}else if(c.isRegExp(e)&&c.isRegExp(t)){return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase}else if((e===null||typeof e!=="object")&&(t===null||typeof t!=="object")){return r?e===t:e==t}else if(l(e)&&l(t)&&s(e)===s(t)&&!(e instanceof Float32Array||e instanceof Float64Array)){return i(new Uint8Array(e.buffer),new Uint8Array(t.buffer))===0}else if(o(e)!==o(t)){return false}else{a=a||{actual:[],expected:[]};var n=a.actual.indexOf(e);if(n!==-1){if(n===a.expected.indexOf(t)){return true}}a.actual.push(e);a.expected.push(t);return x(e,t,r,a)}}function y(e){return Object.prototype.toString.call(e)=="[object Arguments]"}function x(e,t,r,a){if(e===null||e===undefined||t===null||t===undefined)return false;if(c.isPrimitive(e)||c.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return false;var n=y(e);var i=y(t);if(n&&!i||!n&&i)return false;if(n){e=f.call(e);t=f.call(t);return g(e,t,r)}var o=M(e);var s=M(t);var l,u;if(o.length!==s.length)return false;o.sort();s.sort();for(u=o.length-1;u>=0;u--){if(o[u]!==s[u])return false}for(u=o.length-1;u>=0;u--){l=o[u];if(!g(e[l],t[l],r,a))return false}return true}u.notDeepEqual=function e(t,r,a){if(g(t,r,false)){h(t,r,a,"notDeepEqual",u.notDeepEqual)}};u.notDeepStrictEqual=b;function b(e,t,r){if(g(e,t,true)){h(e,t,r,"notDeepStrictEqual",b)}}u.strictEqual=function e(t,r,a){if(t!==r){h(t,r,a,"===",u.strictEqual)}};u.notStrictEqual=function e(t,r,a){if(t===r){h(t,r,a,"!==",u.notStrictEqual)}};function _(e,t){if(!e||!t){return false}if(Object.prototype.toString.call(t)=="[object RegExp]"){return t.test(e)}try{if(e instanceof t){return true}}catch(e){}if(Error.isPrototypeOf(t)){return false}return t.call({},e)===true}function w(e){var t;try{e()}catch(e){t=e}return t}function T(e,t,r,a){var n;if(typeof t!=="function"){throw new TypeError('"block" argument must be a function')}if(typeof r==="string"){a=r;r=null}n=w(t);a=(r&&r.name?" ("+r.name+").":".")+(a?" "+a:".");if(e&&!n){h(n,r,"Missing expected exception"+a)}var i=typeof a==="string";var o=!e&&c.isError(n);var s=!e&&n&&!r;if(o&&i&&_(n,r)||s){h(n,r,"Got unwanted exception"+a)}if(e&&n&&r&&!_(n,r)||!e&&n){throw n}}u.throws=function(e,t,r){T(true,e,t,r)};u.doesNotThrow=function(e,t,r){T(false,e,t,r)};u.ifError=function(e){if(e)throw e};function k(e,t){if(!e)h(e,true,t,"==",k)}u.strict=e(k,u,{equal:u.strictEqual,deepEqual:u.deepStrictEqual,notEqual:u.notStrictEqual,notDeepEqual:u.notDeepStrictEqual});u.strict.strict=u.strict;var M=Object.keys||function(e){var t=[];for(var r in e){if(a.call(e,r))t.push(r)}return t}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"object-assign":71,"util/":24}],22:[function(e,t,r){if(typeof Object.create==="function"){t.exports=function e(t,r){t.super_=r;t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}else{t.exports=function e(t,r){t.super_=r;var a=function(){};a.prototype=r.prototype;t.prototype=new a;t.prototype.constructor=t}}},{}],23:[function(e,t,r){t.exports=function e(t){return t&&typeof t==="object"&&typeof t.copy==="function"&&typeof t.fill==="function"&&typeof t.readUInt8==="function"}},{}],24:[function(P,e,R){(function(O,I){(function(){var s=/%[sdj%]/g;R.format=function(e){if(!_(e)){var t=[];for(var r=0;r<arguments.length;r++){t.push(l(arguments[r]))}return t.join(" ")}var r=1;var a=arguments;var n=a.length;var i=String(e).replace(s,function(e){if(e==="%%")return"%";if(r>=n)return e;switch(e){case"%s":return String(a[r++]);case"%d":return Number(a[r++]);case"%j":try{return JSON.stringify(a[r++])}catch(e){return"[Circular]"}default:return e}});for(var o=a[r];r<n;o=a[++r]){if(u(o)||!d(o)){i+=" "+o}else{i+=" "+l(o)}}return i};R.deprecate=function(e,t){if(f(I.process)){return function(){return R.deprecate(e,t).apply(this,arguments)}}if(O.noDeprecation===true){return e}var r=false;function a(){if(!r){if(O.throwDeprecation){throw new Error(t)}else if(O.traceDeprecation){console.trace(t)}else{console.error(t)}r=true}return e.apply(this,arguments)}return a};var e={};var a;R.debuglog=function(t){if(f(a))a=O.env.NODE_DEBUG||"";t=t.toUpperCase();if(!e[t]){if(new RegExp("\\b"+t+"\\b","i").test(a)){var r=O.pid;e[t]=function(){var e=R.format.apply(R,arguments);console.error("%s %d: %s",t,r,e)}}else{e[t]=function(){}}}return e[t]};function l(e,t){var r={seen:[],stylize:i};if(arguments.length>=3)r.depth=arguments[2];if(arguments.length>=4)r.colors=arguments[3];if(o(t)){r.showHidden=t}else if(t){R._extend(r,t)}if(f(r.showHidden))r.showHidden=false;if(f(r.depth))r.depth=2;if(f(r.colors))r.colors=false;if(f(r.customInspect))r.customInspect=true;if(r.colors)r.stylize=n;return p(r,e,r.depth)}R.inspect=l;l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function n(e,t){var r=l.styles[t];if(r){return"["+l.colors[r][0]+"m"+e+"["+l.colors[r][1]+"m"}else{return e}}function i(e,t){return e}function v(e){var r={};e.forEach(function(e,t){r[e]=true});return r}function p(t,r,a){if(t.customInspect&&r&&M(r.inspect)&&r.inspect!==R.inspect&&!(r.constructor&&r.constructor.prototype===r)){var e=r.inspect(a,t);if(!_(e)){e=p(t,e,a)}return e}var n=h(t,r);if(n){return n}var i=Object.keys(r);var o=v(i);if(t.showHidden){i=Object.getOwnPropertyNames(r)}if(k(r)&&(i.indexOf("message")>=0||i.indexOf("description")>=0)){return m(r)}if(i.length===0){if(M(r)){var s=r.name?": "+r.name:"";return t.stylize("[Function"+s+"]","special")}if(w(r)){return t.stylize(RegExp.prototype.toString.call(r),"regexp")}if(T(r)){return t.stylize(Date.prototype.toString.call(r),"date")}if(k(r)){return m(r)}}var l="",u=false,c=["{","}"];if(b(r)){u=true;c=["[","]"]}if(M(r)){var f=r.name?": "+r.name:"";l=" [Function"+f+"]"}if(w(r)){l=" "+RegExp.prototype.toString.call(r)}if(T(r)){l=" "+Date.prototype.toUTCString.call(r)}if(k(r)){l=" "+m(r)}if(i.length===0&&(!u||r.length==0)){return c[0]+l+c[1]}if(a<0){if(w(r)){return t.stylize(RegExp.prototype.toString.call(r),"regexp")}else{return t.stylize("[Object]","special")}}t.seen.push(r);var d;if(u){d=g(t,r,a,o,i)}else{d=i.map(function(e){return y(t,r,a,o,e,u)})}t.seen.pop();return x(d,l,c)}function h(e,t){if(f(t))return e.stylize("undefined","undefined");if(_(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(c(t))return e.stylize(""+t,"number");if(o(t))return e.stylize(""+t,"boolean");if(u(t))return e.stylize("null","null")}function m(e){return"["+Error.prototype.toString.call(e)+"]"}function g(t,r,a,n,e){var i=[];for(var o=0,s=r.length;o<s;++o){if(D(r,String(o))){i.push(y(t,r,a,n,String(o),true))}else{i.push("")}}e.forEach(function(e){if(!e.match(/^\d+$/)){i.push(y(t,r,a,n,e,true))}});return i}function y(e,t,r,a,n,i){var o,s,l;l=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]};if(l.get){if(l.set){s=e.stylize("[Getter/Setter]","special")}else{s=e.stylize("[Getter]","special")}}else{if(l.set){s=e.stylize("[Setter]","special")}}if(!D(a,n)){o="["+n+"]"}if(!s){if(e.seen.indexOf(l.value)<0){if(u(r)){s=p(e,l.value,null)}else{s=p(e,l.value,r-1)}if(s.indexOf("\n")>-1){if(i){s=s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2)}else{s="\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")}}}else{s=e.stylize("[Circular]","special")}}if(f(o)){if(i&&n.match(/^\d+$/)){return s}o=JSON.stringify(""+n);if(o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){o=o.substr(1,o.length-2);o=e.stylize(o,"name")}else{o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");o=e.stylize(o,"string")}}return o+": "+s}function x(e,t,r){var a=0;var n=e.reduce(function(e,t){a++;if(t.indexOf("\n")>=0)a++;return e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(n>60){return r[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]}return r[0]+t+" "+e.join(", ")+" "+r[1]}function b(e){return Array.isArray(e)}R.isArray=b;function o(e){return typeof e==="boolean"}R.isBoolean=o;function u(e){return e===null}R.isNull=u;function t(e){return e==null}R.isNullOrUndefined=t;function c(e){return typeof e==="number"}R.isNumber=c;function _(e){return typeof e==="string"}R.isString=_;function r(e){return typeof e==="symbol"}R.isSymbol=r;function f(e){return e===void 0}R.isUndefined=f;function w(e){return d(e)&&S(e)==="[object RegExp]"}R.isRegExp=w;function d(e){return typeof e==="object"&&e!==null}R.isObject=d;function T(e){return d(e)&&S(e)==="[object Date]"}R.isDate=T;function k(e){return d(e)&&(S(e)==="[object Error]"||e instanceof Error)}R.isError=k;function M(e){return typeof e==="function"}R.isFunction=M;function A(e){return e===null||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||typeof e==="symbol"||typeof e==="undefined"}R.isPrimitive=A;R.isBuffer=P("./support/isBuffer");function S(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var e=new Date;var t=[E(e.getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}R.log=function(){console.log("%s - %s",C(),R.format.apply(R,arguments))};R.inherits=P("inherits");R._extend=function(e,t){if(!t||!d(t))return e;var r=Object.keys(t);var a=r.length;while(a--){e[r[a]]=t[r[a]]}return e};function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}).call(this)}).call(this,P("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":23,_process:96,inherits:22}],25:[function(e,t,r){"use strict";r.byteLength=o;r.toByteArray=s;r.fromByteArray=h;var l=[];var u=[];var c=typeof Uint8Array!=="undefined"?Uint8Array:Array;var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var n=0,i=a.length;n<i;++n){l[n]=a[n];u[a.charCodeAt(n)]=n}u["-".charCodeAt(0)]=62;u["_".charCodeAt(0)]=63;function f(e){var t=e.length;if(t%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var r=e.indexOf("=");if(r===-1)r=t;var a=r===t?0:4-r%4;return[r,a]}function o(e){var t=f(e);var r=t[0];var a=t[1];return(r+a)*3/4-a}function d(e,t,r){return(t+r)*3/4-r}function s(e){var t;var r=f(e);var a=r[0];var n=r[1];var i=new c(d(e,a,n));var o=0;var s=n>0?a-4:a;var l;for(l=0;l<s;l+=4){t=u[e.charCodeAt(l)]<<18|u[e.charCodeAt(l+1)]<<12|u[e.charCodeAt(l+2)]<<6|u[e.charCodeAt(l+3)];i[o++]=t>>16&255;i[o++]=t>>8&255;i[o++]=t&255}if(n===2){t=u[e.charCodeAt(l)]<<2|u[e.charCodeAt(l+1)]>>4;i[o++]=t&255}if(n===1){t=u[e.charCodeAt(l)]<<10|u[e.charCodeAt(l+1)]<<4|u[e.charCodeAt(l+2)]>>2;i[o++]=t>>8&255;i[o++]=t&255}return i}function v(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[e&63]}function p(e,t,r){var a;var n=[];for(var i=t;i<r;i+=3){a=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255);n.push(v(a))}return n.join("")}function h(e){var t;var r=e.length;var a=r%3;var n=[];var i=16383;for(var o=0,s=r-a;o<s;o+=i){n.push(p(e,o,o+i>s?s:o+i))}if(a===1){t=e[r-1];n.push(l[t>>2]+l[t<<4&63]+"==")}else if(a===2){t=(e[r-2]<<8)+e[r-1];n.push(l[t>>10]+l[t>>4&63]+l[t<<2&63]+"=")}return n.join("")}},{}],26:[function(e,t,r){},{}],27:[function(e,t,r){"use strict";var a=typeof Reflect==="object"?Reflect:null;var f=a&&typeof a.apply==="function"?a.apply:function e(t,r,a){return Function.prototype.apply.call(t,r,a)};var n;if(a&&typeof a.ownKeys==="function"){n=a.ownKeys}else if(Object.getOwnPropertySymbols){n=function e(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}}else{n=function e(t){return Object.getOwnPropertyNames(t)}}function l(e){if(console&&console.warn)console.warn(e)}var i=Number.isNaN||function e(t){return t!==t};function o(){o.init.call(this)}t.exports=o;t.exports.once=b;o.EventEmitter=o;o.prototype._events=undefined;o.prototype._eventsCount=0;o.prototype._maxListeners=undefined;var s=10;function u(e){if(typeof e!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:true,get:function(){return s},set:function(e){if(typeof e!=="number"||e<0||i(e)){throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".")}s=e}});o.init=function(){if(this._events===undefined||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};o.prototype.setMaxListeners=function e(t){if(typeof t!=="number"||t<0||i(t)){throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".")}this._maxListeners=t;return this};function c(e){if(e._maxListeners===undefined)return o.defaultMaxListeners;return e._maxListeners}o.prototype.getMaxListeners=function e(){return c(this)};o.prototype.emit=function e(t){var r=[];for(var a=1;a<arguments.length;a++)r.push(arguments[a]);var n=t==="error";var i=this._events;if(i!==undefined)n=n&&i.error===undefined;else if(!n)return false;if(n){var o;if(r.length>0)o=r[0];if(o instanceof Error){throw o}var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));s.context=o;throw s}var l=i[t];if(l===undefined)return false;if(typeof l==="function"){f(l,this,r)}else{var u=l.length;var c=g(l,u);for(var a=0;a<u;++a)f(c[a],this,r)}return true};function d(e,t,r,a){var n;var i;var o;u(r);i=e._events;if(i===undefined){i=e._events=Object.create(null);e._eventsCount=0}else{if(i.newListener!==undefined){e.emit("newListener",t,r.listener?r.listener:r);i=e._events}o=i[t]}if(o===undefined){o=i[t]=r;++e._eventsCount}else{if(typeof o==="function"){o=i[t]=a?[r,o]:[o,r]}else if(a){o.unshift(r)}else{o.push(r)}n=c(e);if(n>0&&o.length>n&&!o.warned){o.warned=true;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners "+"added. Use emitter.setMaxListeners() to "+"increase limit");s.name="MaxListenersExceededWarning";s.emitter=e;s.type=t;s.count=o.length;l(s)}}return e}o.prototype.addListener=function e(t,r){return d(this,t,r,false)};o.prototype.on=o.prototype.addListener;o.prototype.prependListener=function e(t,r){return d(this,t,r,true)};function v(){if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;if(arguments.length===0)return this.listener.call(this.target);return this.listener.apply(this.target,arguments)}}function p(e,t,r){var a={fired:false,wrapFn:undefined,target:e,type:t,listener:r};var n=v.bind(a);n.listener=r;a.wrapFn=n;return n}o.prototype.once=function e(t,r){u(r);this.on(t,p(this,t,r));return this};o.prototype.prependOnceListener=function e(t,r){u(r);this.prependListener(t,p(this,t,r));return this};o.prototype.removeListener=function e(t,r){var a,n,i,o,s;u(r);n=this._events;if(n===undefined)return this;a=n[t];if(a===undefined)return this;if(a===r||a.listener===r){if(--this._eventsCount===0)this._events=Object.create(null);else{delete n[t];if(n.removeListener)this.emit("removeListener",t,a.listener||r)}}else if(typeof a!=="function"){i=-1;for(o=a.length-1;o>=0;o--){if(a[o]===r||a[o].listener===r){s=a[o].listener;i=o;break}}if(i<0)return this;if(i===0)a.shift();else{y(a,i)}if(a.length===1)n[t]=a[0];if(n.removeListener!==undefined)this.emit("removeListener",t,s||r)}return this};o.prototype.off=o.prototype.removeListener;o.prototype.removeAllListeners=function e(t){var r,a,n;a=this._events;if(a===undefined)return this;if(a.removeListener===undefined){if(arguments.length===0){this._events=Object.create(null);this._eventsCount=0}else if(a[t]!==undefined){if(--this._eventsCount===0)this._events=Object.create(null);else delete a[t]}return this}if(arguments.length===0){var i=Object.keys(a);var o;for(n=0;n<i.length;++n){o=i[n];if(o==="removeListener")continue;this.removeAllListeners(o)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}r=a[t];if(typeof r==="function"){this.removeListener(t,r)}else if(r!==undefined){for(n=r.length-1;n>=0;n--){this.removeListener(t,r[n])}}return this};function h(e,t,r){var a=e._events;if(a===undefined)return[];var n=a[t];if(n===undefined)return[];if(typeof n==="function")return r?[n.listener||n]:[n];return r?x(n):g(n,n.length)}o.prototype.listeners=function e(t){return h(this,t,true)};o.prototype.rawListeners=function e(t){return h(this,t,false)};o.listenerCount=function(e,t){if(typeof e.listenerCount==="function"){return e.listenerCount(t)}else{return m.call(e,t)}};o.prototype.listenerCount=m;function m(e){var t=this._events;if(t!==undefined){var r=t[e];if(typeof r==="function"){return 1}else if(r!==undefined){return r.length}}return 0}o.prototype.eventNames=function e(){return this._eventsCount>0?n(this._events):[]};function g(e,t){var r=new Array(t);for(var a=0;a<t;++a)r[a]=e[a];return r}function y(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function x(e){var t=new Array(e.length);for(var r=0;r<t.length;++r){t[r]=e[r].listener||e[r]}return t}function b(n,i){return new Promise(function(e,r){function a(){if(t!==undefined){n.removeListener("error",t)}e([].slice.call(arguments))}var t;if(i!=="error"){t=function e(t){n.removeListener(i,a);r(t)};n.once("error",t)}n.once(i,a)})}},{}],28:[function(X,e,J){(function(e){(function(){"use strict";var a=X("base64-js");var i=X("ieee754");J.Buffer=d;J.SlowBuffer=t;J.INSPECT_MAX_BYTES=50;var r=2147483647;J.kMaxLength=r;d.TYPED_ARRAY_SUPPORT=e();if(!d.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function e(){try{var e=new Uint8Array(1);e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return e.foo()===42}catch(e){return false}}Object.defineProperty(d.prototype,"parent",{enumerable:true,get:function(){if(!d.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(d.prototype,"offset",{enumerable:true,get:function(){if(!d.isBuffer(this))return undefined;return this.byteOffset}});function o(e){if(e>r){throw new RangeError('The value "'+e+'" is invalid for option "size"')}var t=new Uint8Array(e);t.__proto__=d.prototype;return t}function d(e,t,r){if(typeof e==="number"){if(typeof t==="string"){throw new TypeError('The "string" argument must be of type string. Received type number')}return u(e)}return n(e,t,r)}if(typeof Symbol!=="undefined"&&Symbol.species!=null&&d[Symbol.species]===d){Object.defineProperty(d,Symbol.species,{value:null,configurable:true,enumerable:false,writable:false})}d.poolSize=8192;function n(e,t,r){if(typeof e==="string"){return c(e,t)}if(ArrayBuffer.isView(e)){return f(e)}if(e==null){throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof e)}if($(e,ArrayBuffer)||e&&$(e.buffer,ArrayBuffer)){return v(e,t,r)}if(typeof e==="number"){throw new TypeError('The "value" argument must not be of type number. Received type number')}var a=e.valueOf&&e.valueOf();if(a!=null&&a!==e){return d.from(a,t,r)}var n=p(e);if(n)return n;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]==="function"){return d.from(e[Symbol.toPrimitive]("string"),t,r)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof e)}d.from=function(e,t,r){return n(e,t,r)};d.prototype.__proto__=Uint8Array.prototype;d.__proto__=Uint8Array;function s(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be of type number')}else if(e<0){throw new RangeError('The value "'+e+'" is invalid for option "size"')}}function l(e,t,r){s(e);if(e<=0){return o(e)}if(t!==undefined){return typeof r==="string"?o(e).fill(t,r):o(e).fill(t)}return o(e)}d.alloc=function(e,t,r){return l(e,t,r)};function u(e){s(e);return o(e<0?0:h(e)|0)}d.allocUnsafe=function(e){return u(e)};d.allocUnsafeSlow=function(e){return u(e)};function c(e,t){if(typeof t!=="string"||t===""){t="utf8"}if(!d.isEncoding(t)){throw new TypeError("Unknown encoding: "+t)}var r=m(e,t)|0;var a=o(r);var n=a.write(e,t);if(n!==r){a=a.slice(0,n)}return a}function f(e){var t=e.length<0?0:h(e.length)|0;var r=o(t);for(var a=0;a<t;a+=1){r[a]=e[a]&255}return r}function v(e,t,r){if(t<0||e.byteLength<t){throw new RangeError('"offset" is outside of buffer bounds')}if(e.byteLength<t+(r||0)){throw new RangeError('"length" is outside of buffer bounds')}var a;if(t===undefined&&r===undefined){a=new Uint8Array(e)}else if(r===undefined){a=new Uint8Array(e,t)}else{a=new Uint8Array(e,t,r)}a.__proto__=d.prototype;return a}function p(e){if(d.isBuffer(e)){var t=h(e.length)|0;var r=o(t);if(r.length===0){return r}e.copy(r,0,0,t);return r}if(e.length!==undefined){if(typeof e.length!=="number"||Z(e.length)){return o(0)}return f(e)}if(e.type==="Buffer"&&Array.isArray(e.data)){return f(e.data)}}function h(e){if(e>=r){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+r.toString(16)+" bytes")}return e|0}function t(e){if(+e!=e){e=0}return d.alloc(+e)}d.isBuffer=function e(t){return t!=null&&t._isBuffer===true&&t!==d.prototype};d.compare=function e(t,r){if($(t,Uint8Array))t=d.from(t,t.offset,t.byteLength);if($(r,Uint8Array))r=d.from(r,r.offset,r.byteLength);if(!d.isBuffer(t)||!d.isBuffer(r)){throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array')}if(t===r)return 0;var a=t.length;var n=r.length;for(var i=0,o=Math.min(a,n);i<o;++i){if(t[i]!==r[i]){a=t[i];n=r[i];break}}if(a<n)return-1;if(n<a)return 1;return 0};d.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};d.concat=function e(t,r){if(!Array.isArray(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return d.alloc(0)}var a;if(r===undefined){r=0;for(a=0;a<t.length;++a){r+=t[a].length}}var n=d.allocUnsafe(r);var i=0;for(a=0;a<t.length;++a){var o=t[a];if($(o,Uint8Array)){o=d.from(o)}if(!d.isBuffer(o)){throw new TypeError('"list" argument must be an Array of Buffers')}o.copy(n,i);i+=o.length}return n};function m(e,t){if(d.isBuffer(e)){return e.length}if(ArrayBuffer.isView(e)||$(e,ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. '+"Received type "+typeof e)}var r=e.length;var a=arguments.length>2&&arguments[2]===true;if(!a&&r===0)return 0;var n=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return G(e).length;default:if(n){return a?-1:U(e).length}t=(""+t).toLowerCase();n=true}}}d.byteLength=m;function g(e,t,r){var a=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;t>>>=0;if(r<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return I(this,t,r);case"utf8":case"utf-8":return E(this,t,r);case"ascii":return D(this,t,r);case"latin1":case"binary":return O(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,r);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();a=true}}}d.prototype._isBuffer=true;function y(e,t,r){var a=e[t];e[t]=e[r];e[r]=a}d.prototype.swap16=function e(){var t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var r=0;r<t;r+=2){y(this,r,r+1)}return this};d.prototype.swap32=function e(){var t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var r=0;r<t;r+=4){y(this,r,r+3);y(this,r+1,r+2)}return this};d.prototype.swap64=function e(){var t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var r=0;r<t;r+=8){y(this,r,r+7);y(this,r+1,r+6);y(this,r+2,r+5);y(this,r+3,r+4)}return this};d.prototype.toString=function e(){var t=this.length;if(t===0)return"";if(arguments.length===0)return E(this,0,t);return g.apply(this,arguments)};d.prototype.toLocaleString=d.prototype.toString;d.prototype.equals=function e(t){if(!d.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return d.compare(this,t)===0};d.prototype.inspect=function e(){var t="";var r=J.INSPECT_MAX_BYTES;t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim();if(this.length>r)t+=" ... ";return"<Buffer "+t+">"};d.prototype.compare=function e(t,r,a,n,i){if($(t,Uint8Array)){t=d.from(t,t.offset,t.byteLength)}if(!d.isBuffer(t)){throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. '+"Received type "+typeof t)}if(r===undefined){r=0}if(a===undefined){a=t?t.length:0}if(n===undefined){n=0}if(i===undefined){i=this.length}if(r<0||a>t.length||n<0||i>this.length){throw new RangeError("out of range index")}if(n>=i&&r>=a){return 0}if(n>=i){return-1}if(r>=a){return 1}r>>>=0;a>>>=0;n>>>=0;i>>>=0;if(this===t)return 0;var o=i-n;var s=a-r;var l=Math.min(o,s);var u=this.slice(n,i);var c=t.slice(r,a);for(var f=0;f<l;++f){if(u[f]!==c[f]){o=u[f];s=c[f];break}}if(o<s)return-1;if(s<o)return 1;return 0};function x(e,t,r,a,n){if(e.length===0)return-1;if(typeof r==="string"){a=r;r=0}else if(r>2147483647){r=2147483647}else if(r<-2147483648){r=-2147483648}r=+r;if(Z(r)){r=n?0:e.length-1}if(r<0)r=e.length+r;if(r>=e.length){if(n)return-1;else r=e.length-1}else if(r<0){if(n)r=0;else return-1}if(typeof t==="string"){t=d.from(t,a)}if(d.isBuffer(t)){if(t.length===0){return-1}return b(e,t,r,a,n)}else if(typeof t==="number"){t=t&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(n){return Uint8Array.prototype.indexOf.call(e,t,r)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,r)}}return b(e,[t],r,a,n)}throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,a,n){var i=1;var o=e.length;var s=t.length;if(a!==undefined){a=String(a).toLowerCase();if(a==="ucs2"||a==="ucs-2"||a==="utf16le"||a==="utf-16le"){if(e.length<2||t.length<2){return-1}i=2;o/=2;s/=2;r/=2}}function l(e,t){if(i===1){return e[t]}else{return e.readUInt16BE(t*i)}}var u;if(n){var c=-1;for(u=r;u<o;u++){if(l(e,u)===l(t,c===-1?0:u-c)){if(c===-1)c=u;if(u-c+1===s)return c*i}else{if(c!==-1)u-=u-c;c=-1}}}else{if(r+s>o)r=o-s;for(u=r;u>=0;u--){var f=true;for(var d=0;d<s;d++){if(l(e,u+d)!==l(t,d)){f=false;break}}if(f)return u}}return-1}d.prototype.includes=function e(t,r,a){return this.indexOf(t,r,a)!==-1};d.prototype.indexOf=function e(t,r,a){return x(this,t,r,a,true)};d.prototype.lastIndexOf=function e(t,r,a){return x(this,t,r,a,false)};function _(e,t,r,a){r=Number(r)||0;var n=e.length-r;if(!a){a=n}else{a=Number(a);if(a>n){a=n}}var i=t.length;if(a>i/2){a=i/2}for(var o=0;o<a;++o){var s=parseInt(t.substr(o*2,2),16);if(Z(s))return o;e[r+o]=s}return o}function w(e,t,r,a){return W(U(t,e.length-r),e,r,a)}function T(e,t,r,a){return W(Y(t),e,r,a)}function k(e,t,r,a){return T(e,t,r,a)}function M(e,t,r,a){return W(G(t),e,r,a)}function A(e,t,r,a){return W(V(t,e.length-r),e,r,a)}d.prototype.write=function e(t,r,a,n){if(r===undefined){n="utf8";a=this.length;r=0}else if(a===undefined&&typeof r==="string"){n=r;a=this.length;r=0}else if(isFinite(r)){r=r>>>0;if(isFinite(a)){a=a>>>0;if(n===undefined)n="utf8"}else{n=a;a=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var i=this.length-r;if(a===undefined||a>i)a=i;if(t.length>0&&(a<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!n)n="utf8";var o=false;for(;;){switch(n){case"hex":return _(this,t,r,a);case"utf8":case"utf-8":return w(this,t,r,a);case"ascii":return T(this,t,r,a);case"latin1":case"binary":return k(this,t,r,a);case"base64":return M(this,t,r,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,r,a);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase();o=true}}};d.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function S(e,t,r){if(t===0&&r===e.length){return a.fromByteArray(e)}else{return a.fromByteArray(e.slice(t,r))}}function E(e,t,r){r=Math.min(e.length,r);var a=[];var n=t;while(n<r){var i=e[n];var o=null;var s=i>239?4:i>223?3:i>191?2:1;if(n+s<=r){var l,u,c,f;switch(s){case 1:if(i<128){o=i}break;case 2:l=e[n+1];if((l&192)===128){f=(i&31)<<6|l&63;if(f>127){o=f}}break;case 3:l=e[n+1];u=e[n+2];if((l&192)===128&&(u&192)===128){f=(i&15)<<12|(l&63)<<6|u&63;if(f>2047&&(f<55296||f>57343)){o=f}}break;case 4:l=e[n+1];u=e[n+2];c=e[n+3];if((l&192)===128&&(u&192)===128&&(c&192)===128){f=(i&15)<<18|(l&63)<<12|(u&63)<<6|c&63;if(f>65535&&f<1114112){o=f}}}}if(o===null){o=65533;s=1}else if(o>65535){o-=65536;a.push(o>>>10&1023|55296);o=56320|o&1023}a.push(o);n+=s}return C(a)}var L=4096;function C(e){var t=e.length;if(t<=L){return String.fromCharCode.apply(String,e)}var r="";var a=0;while(a<t){r+=String.fromCharCode.apply(String,e.slice(a,a+=L))}return r}function D(e,t,r){var a="";r=Math.min(e.length,r);for(var n=t;n<r;++n){a+=String.fromCharCode(e[n]&127)}return a}function O(e,t,r){var a="";r=Math.min(e.length,r);for(var n=t;n<r;++n){a+=String.fromCharCode(e[n])}return a}function I(e,t,r){var a=e.length;if(!t||t<0)t=0;if(!r||r<0||r>a)r=a;var n="";for(var i=t;i<r;++i){n+=q(e[i])}return n}function P(e,t,r){var a=e.slice(t,r);var n="";for(var i=0;i<a.length;i+=2){n+=String.fromCharCode(a[i]+a[i+1]*256)}return n}d.prototype.slice=function e(t,r){var a=this.length;t=~~t;r=r===undefined?a:~~r;if(t<0){t+=a;if(t<0)t=0}else if(t>a){t=a}if(r<0){r+=a;if(r<0)r=0}else if(r>a){r=a}if(r<t)r=t;var n=this.subarray(t,r);n.__proto__=d.prototype;return n};function R(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUIntLE=function e(t,r,a){t=t>>>0;r=r>>>0;if(!a)R(t,r,this.length);var n=this[t];var i=1;var o=0;while(++o<r&&(i*=256)){n+=this[t+o]*i}return n};d.prototype.readUIntBE=function e(t,r,a){t=t>>>0;r=r>>>0;if(!a){R(t,r,this.length)}var n=this[t+--r];var i=1;while(r>0&&(i*=256)){n+=this[t+--r]*i}return n};d.prototype.readUInt8=function e(t,r){t=t>>>0;if(!r)R(t,1,this.length);return this[t]};d.prototype.readUInt16LE=function e(t,r){t=t>>>0;if(!r)R(t,2,this.length);return this[t]|this[t+1]<<8};d.prototype.readUInt16BE=function e(t,r){t=t>>>0;if(!r)R(t,2,this.length);return this[t]<<8|this[t+1]};d.prototype.readUInt32LE=function e(t,r){t=t>>>0;if(!r)R(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};d.prototype.readUInt32BE=function e(t,r){t=t>>>0;if(!r)R(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};d.prototype.readIntLE=function e(t,r,a){t=t>>>0;r=r>>>0;if(!a)R(t,r,this.length);var n=this[t];var i=1;var o=0;while(++o<r&&(i*=256)){n+=this[t+o]*i}i*=128;if(n>=i)n-=Math.pow(2,8*r);return n};d.prototype.readIntBE=function e(t,r,a){t=t>>>0;r=r>>>0;if(!a)R(t,r,this.length);var n=r;var i=1;var o=this[t+--n];while(n>0&&(i*=256)){o+=this[t+--n]*i}i*=128;if(o>=i)o-=Math.pow(2,8*r);return o};d.prototype.readInt8=function e(t,r){t=t>>>0;if(!r)R(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};d.prototype.readInt16LE=function e(t,r){t=t>>>0;if(!r)R(t,2,this.length);var a=this[t]|this[t+1]<<8;return a&32768?a|4294901760:a};d.prototype.readInt16BE=function e(t,r){t=t>>>0;if(!r)R(t,2,this.length);var a=this[t+1]|this[t]<<8;return a&32768?a|4294901760:a};d.prototype.readInt32LE=function e(t,r){t=t>>>0;if(!r)R(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};d.prototype.readInt32BE=function e(t,r){t=t>>>0;if(!r)R(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};d.prototype.readFloatLE=function e(t,r){t=t>>>0;if(!r)R(t,4,this.length);return i.read(this,t,true,23,4)};d.prototype.readFloatBE=function e(t,r){t=t>>>0;if(!r)R(t,4,this.length);return i.read(this,t,false,23,4)};d.prototype.readDoubleLE=function e(t,r){t=t>>>0;if(!r)R(t,8,this.length);return i.read(this,t,true,52,8)};d.prototype.readDoubleBE=function e(t,r){t=t>>>0;if(!r)R(t,8,this.length);return i.read(this,t,false,52,8)};function N(e,t,r,a,n,i){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<i)throw new RangeError('"value" argument is out of bounds');if(r+a>e.length)throw new RangeError("Index out of range")}d.prototype.writeUIntLE=function e(t,r,a,n){t=+t;r=r>>>0;a=a>>>0;if(!n){var i=Math.pow(2,8*a)-1;N(this,t,r,a,i,0)}var o=1;var s=0;this[r]=t&255;while(++s<a&&(o*=256)){this[r+s]=t/o&255}return r+a};d.prototype.writeUIntBE=function e(t,r,a,n){t=+t;r=r>>>0;a=a>>>0;if(!n){var i=Math.pow(2,8*a)-1;N(this,t,r,a,i,0)}var o=a-1;var s=1;this[r+o]=t&255;while(--o>=0&&(s*=256)){this[r+o]=t/s&255}return r+a};d.prototype.writeUInt8=function e(t,r,a){t=+t;r=r>>>0;if(!a)N(this,t,r,1,255,0);this[r]=t&255;return r+1};d.prototype.writeUInt16LE=function e(t,r,a){t=+t;r=r>>>0;if(!a)N(this,t,r,2,65535,0);this[r]=t&255;this[r+1]=t>>>8;return r+2};d.prototype.writeUInt16BE=function e(t,r,a){t=+t;r=r>>>0;if(!a)N(this,t,r,2,65535,0);this[r]=t>>>8;this[r+1]=t&255;return r+2};d.prototype.writeUInt32LE=function e(t,r,a){t=+t;r=r>>>0;if(!a)N(this,t,r,4,4294967295,0);this[r+3]=t>>>24;this[r+2]=t>>>16;this[r+1]=t>>>8;this[r]=t&255;return r+4};d.prototype.writeUInt32BE=function e(t,r,a){t=+t;r=r>>>0;if(!a)N(this,t,r,4,4294967295,0);this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};d.prototype.writeIntLE=function e(t,r,a,n){t=+t;r=r>>>0;if(!n){var i=Math.pow(2,8*a-1);N(this,t,r,a,i-1,-i)}var o=0;var s=1;var l=0;this[r]=t&255;while(++o<a&&(s*=256)){if(t<0&&l===0&&this[r+o-1]!==0){l=1}this[r+o]=(t/s>>0)-l&255}return r+a};d.prototype.writeIntBE=function e(t,r,a,n){t=+t;r=r>>>0;if(!n){var i=Math.pow(2,8*a-1);N(this,t,r,a,i-1,-i)}var o=a-1;var s=1;var l=0;this[r+o]=t&255;while(--o>=0&&(s*=256)){if(t<0&&l===0&&this[r+o+1]!==0){l=1}this[r+o]=(t/s>>0)-l&255}return r+a};d.prototype.writeInt8=function e(t,r,a){t=+t;r=r>>>0;if(!a)N(this,t,r,1,127,-128);if(t<0)t=255+t+1;this[r]=t&255;return r+1};d.prototype.writeInt16LE=function e(t,r,a){t=+t;r=r>>>0;if(!a)N(this,t,r,2,32767,-32768);this[r]=t&255;this[r+1]=t>>>8;return r+2};d.prototype.writeInt16BE=function e(t,r,a){t=+t;r=r>>>0;if(!a)N(this,t,r,2,32767,-32768);this[r]=t>>>8;this[r+1]=t&255;return r+2};d.prototype.writeInt32LE=function e(t,r,a){t=+t;r=r>>>0;if(!a)N(this,t,r,4,2147483647,-2147483648);this[r]=t&255;this[r+1]=t>>>8;this[r+2]=t>>>16;this[r+3]=t>>>24;return r+4};d.prototype.writeInt32BE=function e(t,r,a){t=+t;r=r>>>0;if(!a)N(this,t,r,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};function z(e,t,r,a,n,i){if(r+a>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(e,t,r,a,n){t=+t;r=r>>>0;if(!n){z(e,t,r,4,34028234663852886e22,-34028234663852886e22)}i.write(e,t,r,a,23,4);return r+4}d.prototype.writeFloatLE=function e(t,r,a){return F(this,t,r,true,a)};d.prototype.writeFloatBE=function e(t,r,a){return F(this,t,r,false,a)};function j(e,t,r,a,n){t=+t;r=r>>>0;if(!n){z(e,t,r,8,17976931348623157e292,-17976931348623157e292)}i.write(e,t,r,a,52,8);return r+8}d.prototype.writeDoubleLE=function e(t,r,a){return j(this,t,r,true,a)};d.prototype.writeDoubleBE=function e(t,r,a){return j(this,t,r,false,a)};d.prototype.copy=function e(t,r,a,n){if(!d.isBuffer(t))throw new TypeError("argument should be a Buffer");if(!a)a=0;if(!n&&n!==0)n=this.length;if(r>=t.length)r=t.length;if(!r)r=0;if(n>0&&n<a)n=a;if(n===a)return 0;if(t.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds")}if(a<0||a>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");if(n>this.length)n=this.length;if(t.length-r<n-a){n=t.length-r+a}var i=n-a;if(this===t&&typeof Uint8Array.prototype.copyWithin==="function"){this.copyWithin(r,a,n)}else if(this===t&&a<r&&r<n){for(var o=i-1;o>=0;--o){t[o+r]=this[o+a]}}else{Uint8Array.prototype.set.call(t,this.subarray(a,n),r)}return i};d.prototype.fill=function e(t,r,a,n){if(typeof t==="string"){if(typeof r==="string"){n=r;r=0;a=this.length}else if(typeof a==="string"){n=a;a=this.length}if(n!==undefined&&typeof n!=="string"){throw new TypeError("encoding must be a string")}if(typeof n==="string"&&!d.isEncoding(n)){throw new TypeError("Unknown encoding: "+n)}if(t.length===1){var i=t.charCodeAt(0);if(n==="utf8"&&i<128||n==="latin1"){t=i}}}else if(typeof t==="number"){t=t&255}if(r<0||this.length<r||this.length<a){throw new RangeError("Out of range index")}if(a<=r){return this}r=r>>>0;a=a===undefined?this.length:a>>>0;if(!t)t=0;var o;if(typeof t==="number"){for(o=r;o<a;++o){this[o]=t}}else{var s=d.isBuffer(t)?t:d.from(t,n);var l=s.length;if(l===0){throw new TypeError('The value "'+t+'" is invalid for argument "value"')}for(o=0;o<a-r;++o){this[o+r]=s[o%l]}}return this};var H=/[^+/0-9A-Za-z-_]/g;function B(e){e=e.split("=")[0];e=e.trim().replace(H,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function q(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function U(e,t){t=t||Infinity;var r;var a=e.length;var n=null;var i=[];for(var o=0;o<a;++o){r=e.charCodeAt(o);if(r>55295&&r<57344){if(!n){if(r>56319){if((t-=3)>-1)i.push(239,191,189);continue}else if(o+1===a){if((t-=3)>-1)i.push(239,191,189);continue}n=r;continue}if(r<56320){if((t-=3)>-1)i.push(239,191,189);n=r;continue}r=(n-55296<<10|r-56320)+65536}else if(n){if((t-=3)>-1)i.push(239,191,189)}n=null;if(r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return i}function Y(e){var t=[];for(var r=0;r<e.length;++r){t.push(e.charCodeAt(r)&255)}return t}function V(e,t){var r,a,n;var i=[];for(var o=0;o<e.length;++o){if((t-=2)<0)break;r=e.charCodeAt(o);a=r>>8;n=r%256;i.push(n);i.push(a)}return i}function G(e){return a.toByteArray(B(e))}function W(e,t,r,a){for(var n=0;n<a;++n){if(n+r>=t.length||n>=e.length)break;t[n+r]=e[n]}return n}function $(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function Z(e){return e!==e}}).call(this)}).call(this,X("buffer").Buffer)},{"base64-js":25,buffer:28,ieee754:64}],29:[function(r,a,n){(function(e,t){typeof n==="object"&&typeof a!=="undefined"?t(n,r("d3-time")):typeof au==="function"&&au.amd?au(["exports","d3-time"],t):(e=e||self,t(e.d3=e.d3||{},e.d3))})(this,function(t,V){"use strict";function G(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);t.setFullYear(e.y);return t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function W(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));t.setUTCFullYear(e.y);return t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function $(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function r(e){var a=e.dateTime,n=e.date,i=e.time,t=e.periods,r=e.days,o=e.shortDays,s=e.months,l=e.shortMonths;var u=X(t),c=J(t),f=X(r),d=J(r),v=X(o),p=J(o),h=X(s),m=J(s),g=X(l),y=J(l);var x={a:I,A:P,b:R,B:N,c:null,d:ye,e:ye,f:Te,H:xe,I:be,j:_e,L:we,m:ke,M:Me,p:z,q:F,Q:Qe,s:et,S:Ae,u:Se,U:Ee,V:Le,w:Ce,W:De,x:null,X:null,y:Oe,Y:Ie,Z:Pe,"%":Ke};var b={a:j,A:H,b:B,B:q,c:null,d:Re,e:Re,f:He,H:Ne,I:ze,j:Fe,L:je,m:Be,M:qe,p:U,q:Y,Q:Qe,s:et,S:Ue,u:Ye,U:Ve,V:Ge,w:We,W:$e,x:null,X:null,y:Ze,Y:Xe,Z:Je,"%":Ke};var _={a:A,A:S,b:E,B:L,c:C,d:le,e:le,f:pe,H:ce,I:ce,j:ue,L:ve,m:se,M:fe,p:M,q:oe,Q:me,s:ge,S:de,u:Q,U:ee,V:te,w:K,W:re,x:D,X:O,y:ne,Y:ae,Z:ie,"%":he};x.x=w(n,x);x.X=w(i,x);x.c=w(a,x);b.x=w(n,b);b.X=w(i,b);b.c=w(a,b);function w(l,u){return function(e){var t=[],r=-1,a=0,n=l.length,i,o,s;if(!(e instanceof Date))e=new Date(+e);while(++r<n){if(l.charCodeAt(r)===37){t.push(l.slice(a,r));if((o=Z[i=l.charAt(++r)])!=null)i=l.charAt(++r);else o=i==="e"?" ":"0";if(s=u[i])i=s(e,o);t.push(i);a=r+1}}t.push(l.slice(a,r));return t.join("")}}function T(i,o){return function(e){var t=$(1900,undefined,1),r=k(t,i,e+="",0),a,n;if(r!=e.length)return null;if("Q"in t)return new Date(t.Q);if("s"in t)return new Date(t.s*1e3+("L"in t?t.L:0));if(o&&!("Z"in t))t.Z=0;if("p"in t)t.H=t.H%12+t.p*12;if(t.m===undefined)t.m="q"in t?t.q:0;if("V"in t){if(t.V<1||t.V>53)return null;if(!("w"in t))t.w=1;if("Z"in t){a=W($(t.y,0,1)),n=a.getUTCDay();a=n>4||n===0?V.utcMonday.ceil(a):V.utcMonday(a);a=V.utcDay.offset(a,(t.V-1)*7);t.y=a.getUTCFullYear();t.m=a.getUTCMonth();t.d=a.getUTCDate()+(t.w+6)%7}else{a=G($(t.y,0,1)),n=a.getDay();a=n>4||n===0?V.timeMonday.ceil(a):V.timeMonday(a);a=V.timeDay.offset(a,(t.V-1)*7);t.y=a.getFullYear();t.m=a.getMonth();t.d=a.getDate()+(t.w+6)%7}}else if("W"in t||"U"in t){if(!("w"in t))t.w="u"in t?t.u%7:"W"in t?1:0;n="Z"in t?W($(t.y,0,1)).getUTCDay():G($(t.y,0,1)).getDay();t.m=0;t.d="W"in t?(t.w+6)%7+t.W*7-(n+5)%7:t.w+t.U*7-(n+6)%7}if("Z"in t){t.H+=t.Z/100|0;t.M+=t.Z%100;return W(t)}return G(t)}}function k(e,t,r,a){var n=0,i=t.length,o=r.length,s,l;while(n<i){if(a>=o)return-1;s=t.charCodeAt(n++);if(s===37){s=t.charAt(n++);l=_[s in Z?t.charAt(n++):s];if(!l||(a=l(e,r,a))<0)return-1}else if(s!=r.charCodeAt(a++)){return-1}}return a}function M(e,t,r){var a=u.exec(t.slice(r));return a?(e.p=c[a[0].toLowerCase()],r+a[0].length):-1}function A(e,t,r){var a=v.exec(t.slice(r));return a?(e.w=p[a[0].toLowerCase()],r+a[0].length):-1}function S(e,t,r){var a=f.exec(t.slice(r));return a?(e.w=d[a[0].toLowerCase()],r+a[0].length):-1}function E(e,t,r){var a=g.exec(t.slice(r));return a?(e.m=y[a[0].toLowerCase()],r+a[0].length):-1}function L(e,t,r){var a=h.exec(t.slice(r));return a?(e.m=m[a[0].toLowerCase()],r+a[0].length):-1}function C(e,t,r){return k(e,a,t,r)}function D(e,t,r){return k(e,n,t,r)}function O(e,t,r){return k(e,i,t,r)}function I(e){return o[e.getDay()]}function P(e){return r[e.getDay()]}function R(e){return l[e.getMonth()]}function N(e){return s[e.getMonth()]}function z(e){return t[+(e.getHours()>=12)]}function F(e){return 1+~~(e.getMonth()/3)}function j(e){return o[e.getUTCDay()]}function H(e){return r[e.getUTCDay()]}function B(e){return l[e.getUTCMonth()]}function q(e){return s[e.getUTCMonth()]}function U(e){return t[+(e.getUTCHours()>=12)]}function Y(e){return 1+~~(e.getUTCMonth()/3)}return{format:function(e){var t=w(e+="",x);t.toString=function(){return e};return t},parse:function(e){var t=T(e+="",false);t.toString=function(){return e};return t},utcFormat:function(e){var t=w(e+="",b);t.toString=function(){return e};return t},utcParse:function(e){var t=T(e+="",true);t.toString=function(){return e};return t}}}var Z={"-":"",_:" ",0:"0"},n=/^\s*\d+/,i=/^%/,a=/[\\^$*+?|[\]().{}]/g;function o(e,t,r){var a=e<0?"-":"",n=(a?-e:e)+"",i=n.length;return a+(i<r?new Array(r-i+1).join(t)+n:n)}function s(e){return e.replace(a,"\\$&")}function X(e){return new RegExp("^(?:"+e.map(s).join("|")+")","i")}function J(e){var t={},r=-1,a=e.length;while(++r<a)t[e[r].toLowerCase()]=r;return t}function K(e,t,r){var a=n.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function Q(e,t,r){var a=n.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function ee(e,t,r){var a=n.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function te(e,t,r){var a=n.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function re(e,t,r){var a=n.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function ae(e,t,r){var a=n.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function ne(e,t,r){var a=n.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function ie(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function oe(e,t,r){var a=n.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function se(e,t,r){var a=n.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function le(e,t,r){var a=n.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function ue(e,t,r){var a=n.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function ce(e,t,r){var a=n.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function fe(e,t,r){var a=n.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function de(e,t,r){var a=n.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function ve(e,t,r){var a=n.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function pe(e,t,r){var a=n.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function he(e,t,r){var a=i.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function me(e,t,r){var a=n.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function ge(e,t,r){var a=n.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function ye(e,t){return o(e.getDate(),t,2)}function xe(e,t){return o(e.getHours(),t,2)}function be(e,t){return o(e.getHours()%12||12,t,2)}function _e(e,t){return o(1+V.timeDay.count(V.timeYear(e),e),t,3)}function we(e,t){return o(e.getMilliseconds(),t,3)}function Te(e,t){return we(e,t)+"000"}function ke(e,t){return o(e.getMonth()+1,t,2)}function Me(e,t){return o(e.getMinutes(),t,2)}function Ae(e,t){return o(e.getSeconds(),t,2)}function Se(e){var t=e.getDay();return t===0?7:t}function Ee(e,t){return o(V.timeSunday.count(V.timeYear(e)-1,e),t,2)}function Le(e,t){var r=e.getDay();e=r>=4||r===0?V.timeThursday(e):V.timeThursday.ceil(e);return o(V.timeThursday.count(V.timeYear(e),e)+(V.timeYear(e).getDay()===4),t,2)}function Ce(e){return e.getDay()}function De(e,t){return o(V.timeMonday.count(V.timeYear(e)-1,e),t,2)}function Oe(e,t){return o(e.getFullYear()%100,t,2)}function Ie(e,t){return o(e.getFullYear()%1e4,t,4)}function Pe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+o(t/60|0,"0",2)+o(t%60,"0",2)}function Re(e,t){return o(e.getUTCDate(),t,2)}function Ne(e,t){return o(e.getUTCHours(),t,2)}function ze(e,t){return o(e.getUTCHours()%12||12,t,2)}function Fe(e,t){return o(1+V.utcDay.count(V.utcYear(e),e),t,3)}function je(e,t){return o(e.getUTCMilliseconds(),t,3)}function He(e,t){return je(e,t)+"000"}function Be(e,t){return o(e.getUTCMonth()+1,t,2)}function qe(e,t){return o(e.getUTCMinutes(),t,2)}function Ue(e,t){return o(e.getUTCSeconds(),t,2)}function Ye(e){var t=e.getUTCDay();return t===0?7:t}function Ve(e,t){return o(V.utcSunday.count(V.utcYear(e)-1,e),t,2)}function Ge(e,t){var r=e.getUTCDay();e=r>=4||r===0?V.utcThursday(e):V.utcThursday.ceil(e);return o(V.utcThursday.count(V.utcYear(e),e)+(V.utcYear(e).getUTCDay()===4),t,2)}function We(e){return e.getUTCDay()}function $e(e,t){return o(V.utcMonday.count(V.utcYear(e)-1,e),t,2)}function Ze(e,t){return o(e.getUTCFullYear()%100,t,2)}function Xe(e,t){return o(e.getUTCFullYear()%1e4,t,4)}function Je(){return"+0000"}function Ke(){return"%"}function Qe(e){return+e}function et(e){return Math.floor(+e/1e3)}var l;e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function e(e){l=r(e);t.timeFormat=l.format;t.timeParse=l.parse;t.utcFormat=l.utcFormat;t.utcParse=l.utcParse;return l}var u="%Y-%m-%dT%H:%M:%S.%LZ";function c(e){return e.toISOString()}var f=Date.prototype.toISOString?c:t.utcFormat(u);function d(e){var t=new Date(e);return isNaN(t)?null:t}var v=+new Date("2000-01-01T00:00:00.000Z")?d:t.utcParse(u);t.isoFormat=f;t.isoParse=v;t.timeFormatDefaultLocale=e;t.timeFormatLocale=r;Object.defineProperty(t,"__esModule",{value:true})})},{"d3-time":30}],30:[function(e,r,a){(function(e,t){typeof a==="object"&&typeof r!=="undefined"?t(a):typeof au==="function"&&au.amd?au(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(this,function(e){"use strict";var n=new Date,l=new Date;function u(i,o,r,a){function s(e){return i(e=arguments.length===0?new Date:new Date(+e)),e}s.floor=function(e){return i(e=new Date(+e)),e};s.ceil=function(e){return i(e=new Date(e-1)),o(e,1),i(e),e};s.round=function(e){var t=s(e),r=s.ceil(e);return e-t<r-e?t:r};s.offset=function(e,t){return o(e=new Date(+e),t==null?1:Math.floor(t)),e};s.range=function(e,t,r){var a=[],n;e=s.ceil(e);r=r==null?1:Math.floor(r);if(!(e<t)||!(r>0))return a;do{a.push(n=new Date(+e)),o(e,r),i(e)}while(n<e&&e<t);return a};s.filter=function(r){return u(function(e){if(e>=e)while(i(e),!r(e))e.setTime(e-1)},function(e,t){if(e>=e){if(t<0)while(++t<=0){while(o(e,-1),!r(e)){}}else while(--t>=0){while(o(e,+1),!r(e)){}}}})};if(r){s.count=function(e,t){n.setTime(+e),l.setTime(+t);i(n),i(l);return Math.floor(r(n,l))};s.every=function(t){t=Math.floor(t);return!isFinite(t)||!(t>0)?null:!(t>1)?s:s.filter(a?function(e){return a(e)%t===0}:function(e){return s.count(0,e)%t===0})}}return s}var t=u(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});t.every=function(r){r=Math.floor(r);if(!isFinite(r)||!(r>0))return null;if(!(r>1))return t;return u(function(e){e.setTime(Math.floor(e/r)*r)},function(e,t){e.setTime(+e+t*r)},function(e,t){return(t-e)/r})};var r=t.range;var a=1e3;var i=6e4;var o=36e5;var s=864e5;var c=6048e5;var f=u(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*a)},function(e,t){return(t-e)/a},function(e){return e.getUTCSeconds()});var d=f.range;var v=u(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*a)},function(e,t){e.setTime(+e+t*i)},function(e,t){return(t-e)/i},function(e){return e.getMinutes()});var p=v.range;var h=u(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*a-e.getMinutes()*i)},function(e,t){e.setTime(+e+t*o)},function(e,t){return(t-e)/o},function(e){return e.getHours()});var m=h.range;var g=u(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i)/s},function(e){return e.getDate()-1});var y=g.range;function x(t){return u(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7);e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*i)/c})}var b=x(0);var _=x(1);var w=x(2);var T=x(3);var k=x(4);var M=x(5);var A=x(6);var S=b.range;var E=_.range;var L=w.range;var C=T.range;var D=k.range;var O=M.range;var I=A.range;var P=u(function(e){e.setDate(1);e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});var R=P.range;var N=u(function(e){e.setMonth(0,1);e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});N.every=function(r){return!isFinite(r=Math.floor(r))||!(r>0)?null:u(function(e){e.setFullYear(Math.floor(e.getFullYear()/r)*r);e.setMonth(0,1);e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*r)})};var z=N.range;var F=u(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*i)},function(e,t){return(t-e)/i},function(e){return e.getUTCMinutes()});var j=F.range;var H=u(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*o)},function(e,t){return(t-e)/o},function(e){return e.getUTCHours()});var B=H.range;var q=u(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/s},function(e){return e.getUTCDate()-1});var U=q.range;function Y(t){return u(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/c})}var V=Y(0);var G=Y(1);var W=Y(2);var $=Y(3);var Z=Y(4);var X=Y(5);var J=Y(6);var K=V.range;var Q=G.range;var ee=W.range;var te=$.range;var re=Z.range;var ae=X.range;var ne=J.range;var ie=u(function(e){e.setUTCDate(1);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()});var oe=ie.range;var se=u(function(e){e.setUTCMonth(0,1);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});se.every=function(r){return!isFinite(r=Math.floor(r))||!(r>0)?null:u(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/r)*r);e.setUTCMonth(0,1);e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*r)})};var le=se.range;e.timeDay=g;e.timeDays=y;e.timeFriday=M;e.timeFridays=O;e.timeHour=h;e.timeHours=m;e.timeInterval=u;e.timeMillisecond=t;e.timeMilliseconds=r;e.timeMinute=v;e.timeMinutes=p;e.timeMonday=_;e.timeMondays=E;e.timeMonth=P;e.timeMonths=R;e.timeSaturday=A;e.timeSaturdays=I;e.timeSecond=f;e.timeSeconds=d;e.timeSunday=b;e.timeSundays=S;e.timeThursday=k;e.timeThursdays=D;e.timeTuesday=w;e.timeTuesdays=L;e.timeWednesday=T;e.timeWednesdays=C;e.timeWeek=b;e.timeWeeks=S;e.timeYear=N;e.timeYears=z;e.utcDay=q;e.utcDays=U;e.utcFriday=X;e.utcFridays=ae;e.utcHour=H;e.utcHours=B;e.utcMillisecond=t;e.utcMilliseconds=r;e.utcMinute=F;e.utcMinutes=j;e.utcMonday=G;e.utcMondays=Q;e.utcMonth=ie;e.utcMonths=oe;e.utcSaturday=J;e.utcSaturdays=ne;e.utcSecond=f;e.utcSeconds=d;e.utcSunday=V;e.utcSundays=K;e.utcThursday=Z;e.utcThursdays=re;e.utcTuesday=W;e.utcTuesdays=ee;e.utcWednesday=$;e.utcWednesdays=te;e.utcWeek=V;e.utcWeeks=K;e.utcYear=se;e.utcYears=le;Object.defineProperty(e,"__esModule",{value:true})})},{}],31:[function(e,t,r){"use strict";var a=e("is-string-blank");t.exports=function(e){var t=typeof e;if(t==="string"){var r=e;e=+e;if(e===0&&a(r))return false}else if(t!=="number")return false;return e-e<1}},{"is-string-blank":68}],32:[function(e,t,r){t.exports=a;function a(e,t){var r=t[0],a=t[1],n=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],v=t[11],p=t[12],h=t[13],m=t[14],g=t[15];e[0]=s*(d*g-v*m)-f*(l*g-u*m)+h*(l*v-u*d);e[1]=-(a*(d*g-v*m)-f*(n*g-i*m)+h*(n*v-i*d));e[2]=a*(l*g-u*m)-s*(n*g-i*m)+h*(n*u-i*l);e[3]=-(a*(l*v-u*d)-s*(n*v-i*d)+f*(n*u-i*l));e[4]=-(o*(d*g-v*m)-c*(l*g-u*m)+p*(l*v-u*d));e[5]=r*(d*g-v*m)-c*(n*g-i*m)+p*(n*v-i*d);e[6]=-(r*(l*g-u*m)-o*(n*g-i*m)+p*(n*u-i*l));e[7]=r*(l*v-u*d)-o*(n*v-i*d)+c*(n*u-i*l);e[8]=o*(f*g-v*h)-c*(s*g-u*h)+p*(s*v-u*f);e[9]=-(r*(f*g-v*h)-c*(a*g-i*h)+p*(a*v-i*f));e[10]=r*(s*g-u*h)-o*(a*g-i*h)+p*(a*u-i*s);e[11]=-(r*(s*v-u*f)-o*(a*v-i*f)+c*(a*u-i*s));e[12]=-(o*(f*m-d*h)-c*(s*m-l*h)+p*(s*d-l*f));e[13]=r*(f*m-d*h)-c*(a*m-n*h)+p*(a*d-n*f);e[14]=-(r*(s*m-l*h)-o*(a*m-n*h)+p*(a*l-n*s));e[15]=r*(s*d-l*f)-o*(a*d-n*f)+c*(a*l-n*s);return e}},{}],33:[function(e,t,r){t.exports=a;function a(e){var t=new Float32Array(16);t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];return t}},{}],34:[function(e,t,r){t.exports=a;function a(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[4]=t[4];e[5]=t[5];e[6]=t[6];e[7]=t[7];e[8]=t[8];e[9]=t[9];e[10]=t[10];e[11]=t[11];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15];return e}},{}],35:[function(e,t,r){t.exports=a;function a(){var e=new Float32Array(16);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],36:[function(e,t,r){t.exports=a;function a(e){var t=e[0],r=e[1],a=e[2],n=e[3],i=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11],v=e[12],p=e[13],h=e[14],m=e[15],g=t*o-r*i,y=t*s-a*i,x=t*l-n*i,b=r*s-a*o,_=r*l-n*o,w=a*l-n*s,T=u*p-c*v,k=u*h-f*v,M=u*m-d*v,A=c*h-f*p,S=c*m-d*p,E=f*m-d*h;return g*E-y*S+x*A+b*M-_*k+w*T}},{}],37:[function(e,t,r){t.exports=a;function a(e,t){var r=t[0],a=t[1],n=t[2],i=t[3],o=r+r,s=a+a,l=n+n,u=r*o,c=a*o,f=a*s,d=n*o,v=n*s,p=n*l,h=i*o,m=i*s,g=i*l;e[0]=1-f-p;e[1]=c+g;e[2]=d-m;e[3]=0;e[4]=c-g;e[5]=1-u-p;e[6]=v+h;e[7]=0;e[8]=d+m;e[9]=v-h;e[10]=1-u-f;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],38:[function(e,t,r){t.exports=a;function a(e,t,r){var a,n,i;var o=r[0];var s=r[1];var l=r[2];var u=Math.sqrt(o*o+s*s+l*l);if(Math.abs(u)<1e-6){return null}u=1/u;o*=u;s*=u;l*=u;a=Math.sin(t);n=Math.cos(t);i=1-n;e[0]=o*o*i+n;e[1]=s*o*i+l*a;e[2]=l*o*i-s*a;e[3]=0;e[4]=o*s*i-l*a;e[5]=s*s*i+n;e[6]=l*s*i+o*a;e[7]=0;e[8]=o*l*i+s*a;e[9]=s*l*i-o*a;e[10]=l*l*i+n;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],39:[function(e,t,r){t.exports=a;function a(e,t,r){var a=t[0],n=t[1],i=t[2],o=t[3],s=a+a,l=n+n,u=i+i,c=a*s,f=a*l,d=a*u,v=n*l,p=n*u,h=i*u,m=o*s,g=o*l,y=o*u;e[0]=1-(v+h);e[1]=f+y;e[2]=d-g;e[3]=0;e[4]=f-y;e[5]=1-(c+h);e[6]=p+m;e[7]=0;e[8]=d+g;e[9]=p-m;e[10]=1-(c+v);e[11]=0;e[12]=r[0];e[13]=r[1];e[14]=r[2];e[15]=1;return e}},{}],40:[function(e,t,r){t.exports=a;function a(e,t){e[0]=t[0];e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=t[1];e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=t[2];e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],41:[function(e,t,r){t.exports=a;function a(e,t){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=t[0];e[13]=t[1];e[14]=t[2];e[15]=1;return e}},{}],42:[function(e,t,r){t.exports=a;function a(e,t){var r=Math.sin(t),a=Math.cos(t);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=a;e[6]=r;e[7]=0;e[8]=0;e[9]=-r;e[10]=a;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],43:[function(e,t,r){t.exports=a;function a(e,t){var r=Math.sin(t),a=Math.cos(t);e[0]=a;e[1]=0;e[2]=-r;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=r;e[9]=0;e[10]=a;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],44:[function(e,t,r){t.exports=a;function a(e,t){var r=Math.sin(t),a=Math.cos(t);e[0]=a;e[1]=r;e[2]=0;e[3]=0;e[4]=-r;e[5]=a;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],45:[function(e,t,r){t.exports=a;function a(e,t,r,a,n,i,o){var s=1/(r-t),l=1/(n-a),u=1/(i-o);e[0]=i*2*s;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=i*2*l;e[6]=0;e[7]=0;e[8]=(r+t)*s;e[9]=(n+a)*l;e[10]=(o+i)*u;e[11]=-1;e[12]=0;e[13]=0;e[14]=o*i*2*u;e[15]=0;return e}},{}],46:[function(e,t,r){t.exports=a;function a(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],47:[function(e,t,r){t.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":32,"./clone":33,"./copy":34,"./create":35,"./determinant":36,"./fromQuat":37,"./fromRotation":38,"./fromRotationTranslation":39,"./fromScaling":40,"./fromTranslation":41,"./fromXRotation":42,"./fromYRotation":43,"./fromZRotation":44,"./frustum":45,"./identity":46,"./invert":48,"./lookAt":49,"./multiply":50,"./ortho":51,"./perspective":52,"./perspectiveFromFieldOfView":53,"./rotate":54,"./rotateX":55,"./rotateY":56,"./rotateZ":57,"./scale":58,"./str":59,"./translate":60,"./transpose":61}],48:[function(e,t,r){t.exports=a;function a(e,t){var r=t[0],a=t[1],n=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],v=t[11],p=t[12],h=t[13],m=t[14],g=t[15],y=r*s-a*o,x=r*l-n*o,b=r*u-i*o,_=a*l-n*s,w=a*u-i*s,T=n*u-i*l,k=c*h-f*p,M=c*m-d*p,A=c*g-v*p,S=f*m-d*h,E=f*g-v*h,L=d*g-v*m,C=y*L-x*E+b*S+_*A-w*M+T*k;if(!C){return null}C=1/C;e[0]=(s*L-l*E+u*S)*C;e[1]=(n*E-a*L-i*S)*C;e[2]=(h*T-m*w+g*_)*C;e[3]=(d*w-f*T-v*_)*C;e[4]=(l*A-o*L-u*M)*C;e[5]=(r*L-n*A+i*M)*C;e[6]=(m*b-p*T-g*x)*C;e[7]=(c*T-d*b+v*x)*C;e[8]=(o*E-s*A+u*k)*C;e[9]=(a*A-r*E-i*k)*C;e[10]=(p*w-h*b+g*y)*C;e[11]=(f*b-c*w-v*y)*C;e[12]=(s*M-o*S-l*k)*C;e[13]=(r*S-a*M+n*k)*C;e[14]=(h*x-p*_-m*y)*C;e[15]=(c*_-f*x+d*y)*C;return e}},{}],49:[function(e,t,r){var T=e("./identity");t.exports=a;function a(e,t,r,a){var n,i,o,s,l,u,c,f,d,v,p=t[0],h=t[1],m=t[2],g=a[0],y=a[1],x=a[2],b=r[0],_=r[1],w=r[2];if(Math.abs(p-b)<1e-6&&Math.abs(h-_)<1e-6&&Math.abs(m-w)<1e-6){return T(e)}c=p-b;f=h-_;d=m-w;v=1/Math.sqrt(c*c+f*f+d*d);c*=v;f*=v;d*=v;n=y*d-x*f;i=x*c-g*d;o=g*f-y*c;v=Math.sqrt(n*n+i*i+o*o);if(!v){n=0;i=0;o=0}else{v=1/v;n*=v;i*=v;o*=v}s=f*o-d*i;l=d*n-c*o;u=c*i-f*n;v=Math.sqrt(s*s+l*l+u*u);if(!v){s=0;l=0;u=0}else{v=1/v;s*=v;l*=v;u*=v}e[0]=n;e[1]=s;e[2]=c;e[3]=0;e[4]=i;e[5]=l;e[6]=f;e[7]=0;e[8]=o;e[9]=u;e[10]=d;e[11]=0;e[12]=-(n*p+i*h+o*m);e[13]=-(s*p+l*h+u*m);e[14]=-(c*p+f*h+d*m);e[15]=1;return e}},{"./identity":46}],50:[function(e,t,r){t.exports=a;function a(e,t,r){var a=t[0],n=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],v=t[10],p=t[11],h=t[12],m=t[13],g=t[14],y=t[15];var x=r[0],b=r[1],_=r[2],w=r[3];e[0]=x*a+b*s+_*f+w*h;e[1]=x*n+b*l+_*d+w*m;e[2]=x*i+b*u+_*v+w*g;e[3]=x*o+b*c+_*p+w*y;x=r[4];b=r[5];_=r[6];w=r[7];e[4]=x*a+b*s+_*f+w*h;e[5]=x*n+b*l+_*d+w*m;e[6]=x*i+b*u+_*v+w*g;e[7]=x*o+b*c+_*p+w*y;x=r[8];b=r[9];_=r[10];w=r[11];e[8]=x*a+b*s+_*f+w*h;e[9]=x*n+b*l+_*d+w*m;e[10]=x*i+b*u+_*v+w*g;e[11]=x*o+b*c+_*p+w*y;x=r[12];b=r[13];_=r[14];w=r[15];e[12]=x*a+b*s+_*f+w*h;e[13]=x*n+b*l+_*d+w*m;e[14]=x*i+b*u+_*v+w*g;e[15]=x*o+b*c+_*p+w*y;return e}},{}],51:[function(e,t,r){t.exports=a;function a(e,t,r,a,n,i,o){var s=1/(t-r),l=1/(a-n),u=1/(i-o);e[0]=-2*s;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=-2*l;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=2*u;e[11]=0;e[12]=(t+r)*s;e[13]=(n+a)*l;e[14]=(o+i)*u;e[15]=1;return e}},{}],52:[function(e,t,r){t.exports=a;function a(e,t,r,a,n){var i=1/Math.tan(t/2),o=1/(a-n);e[0]=i/r;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=i;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=(n+a)*o;e[11]=-1;e[12]=0;e[13]=0;e[14]=2*n*a*o;e[15]=0;return e}},{}],53:[function(e,t,r){t.exports=a;function a(e,t,r,a){var n=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),u=2/(n+i);e[0]=l;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=u;e[6]=0;e[7]=0;e[8]=-((o-s)*l*.5);e[9]=(n-i)*u*.5;e[10]=a/(r-a);e[11]=-1;e[12]=0;e[13]=0;e[14]=a*r/(r-a);e[15]=0;return e}},{}],54:[function(e,t,r){t.exports=a;function a(e,t,r,a){var n=a[0],i=a[1],o=a[2],s=Math.sqrt(n*n+i*i+o*o),l,u,c,f,d,v,p,h,m,g,y,x,b,_,w,T,k,M,A,S,E,L,C,D;if(Math.abs(s)<1e-6){return null}s=1/s;n*=s;i*=s;o*=s;l=Math.sin(r);u=Math.cos(r);c=1-u;f=t[0];d=t[1];v=t[2];p=t[3];h=t[4];m=t[5];g=t[6];y=t[7];x=t[8];b=t[9];_=t[10];w=t[11];T=n*n*c+u;k=i*n*c+o*l;M=o*n*c-i*l;A=n*i*c-o*l;S=i*i*c+u;E=o*i*c+n*l;L=n*o*c+i*l;C=i*o*c-n*l;D=o*o*c+u;e[0]=f*T+h*k+x*M;e[1]=d*T+m*k+b*M;e[2]=v*T+g*k+_*M;e[3]=p*T+y*k+w*M;e[4]=f*A+h*S+x*E;e[5]=d*A+m*S+b*E;e[6]=v*A+g*S+_*E;e[7]=p*A+y*S+w*E;e[8]=f*L+h*C+x*D;e[9]=d*L+m*C+b*D;e[10]=v*L+g*C+_*D;e[11]=p*L+y*C+w*D;if(t!==e){e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}return e}},{}],55:[function(e,t,r){t.exports=a;function a(e,t,r){var a=Math.sin(r),n=Math.cos(r),i=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11];if(t!==e){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[4]=i*n+u*a;e[5]=o*n+c*a;e[6]=s*n+f*a;e[7]=l*n+d*a;e[8]=u*n-i*a;e[9]=c*n-o*a;e[10]=f*n-s*a;e[11]=d*n-l*a;return e}},{}],56:[function(e,t,r){t.exports=a;function a(e,t,r){var a=Math.sin(r),n=Math.cos(r),i=t[0],o=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],d=t[11];if(t!==e){e[4]=t[4];e[5]=t[5];e[6]=t[6];e[7]=t[7];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[0]=i*n-u*a;e[1]=o*n-c*a;e[2]=s*n-f*a;e[3]=l*n-d*a;e[8]=i*a+u*n;e[9]=o*a+c*n;e[10]=s*a+f*n;e[11]=l*a+d*n;return e}},{}],57:[function(e,t,r){t.exports=a;function a(e,t,r){var a=Math.sin(r),n=Math.cos(r),i=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],d=t[7];if(t!==e){e[8]=t[8];e[9]=t[9];e[10]=t[10];e[11]=t[11];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[0]=i*n+u*a;e[1]=o*n+c*a;e[2]=s*n+f*a;e[3]=l*n+d*a;e[4]=u*n-i*a;e[5]=c*n-o*a;e[6]=f*n-s*a;e[7]=d*n-l*a;return e}},{}],58:[function(e,t,r){t.exports=a;function a(e,t,r){var a=r[0],n=r[1],i=r[2];e[0]=t[0]*a;e[1]=t[1]*a;e[2]=t[2]*a;e[3]=t[3]*a;e[4]=t[4]*n;e[5]=t[5]*n;e[6]=t[6]*n;e[7]=t[7]*n;e[8]=t[8]*i;e[9]=t[9]*i;e[10]=t[10]*i;e[11]=t[11]*i;e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15];return e}},{}],59:[function(e,t,r){t.exports=a;function a(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},{}],60:[function(e,t,r){t.exports=a;function a(e,t,r){var a=r[0],n=r[1],i=r[2],o,s,l,u,c,f,d,v,p,h,m,g;if(t===e){e[12]=t[0]*a+t[4]*n+t[8]*i+t[12];e[13]=t[1]*a+t[5]*n+t[9]*i+t[13];e[14]=t[2]*a+t[6]*n+t[10]*i+t[14];e[15]=t[3]*a+t[7]*n+t[11]*i+t[15]}else{o=t[0];s=t[1];l=t[2];u=t[3];c=t[4];f=t[5];d=t[6];v=t[7];p=t[8];h=t[9];m=t[10];g=t[11];e[0]=o;e[1]=s;e[2]=l;e[3]=u;e[4]=c;e[5]=f;e[6]=d;e[7]=v;e[8]=p;e[9]=h;e[10]=m;e[11]=g;e[12]=o*a+c*n+p*i+t[12];e[13]=s*a+f*n+h*i+t[13];e[14]=l*a+d*n+m*i+t[14];e[15]=u*a+v*n+g*i+t[15]}return e}},{}],61:[function(e,t,r){t.exports=a;function a(e,t){if(e===t){var r=t[1],a=t[2],n=t[3],i=t[6],o=t[7],s=t[11];e[1]=t[4];e[2]=t[8];e[3]=t[12];e[4]=r;e[6]=t[9];e[7]=t[13];e[8]=a;e[9]=i;e[11]=t[14];e[12]=n;e[13]=o;e[14]=s}else{e[0]=t[0];e[1]=t[4];e[2]=t[8];e[3]=t[12];e[4]=t[1];e[5]=t[5];e[6]=t[9];e[7]=t[13];e[8]=t[2];e[9]=t[6];e[10]=t[10];e[11]=t[14];e[12]=t[3];e[13]=t[7];e[14]=t[11];e[15]=t[15]}return e}},{}],62:[function(a,n,e){(function(r){(function(){"use strict";var e=a("is-browser");var t;if(typeof r.matchMedia==="function"){t=!r.matchMedia("(hover: none)").matches}else{t=e}n.exports=t}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"is-browser":66}],63:[function(e,t,r){"use strict";var a=e("is-browser");function n(){var t=false;try{var e=Object.defineProperty({},"passive",{get:function(){t=true}});window.addEventListener("test",null,e);window.removeEventListener("test",null,e)}catch(e){t=false}return t}t.exports=a&&n()},{"is-browser":66}],64:[function(e,t,r){r.read=function(e,t,r,a,n){var i,o;var s=n*8-a-1;var l=(1<<s)-1;var u=l>>1;var c=-7;var f=r?n-1:0;var d=r?-1:1;var v=e[t+f];f+=d;i=v&(1<<-c)-1;v>>=-c;c+=s;for(;c>0;i=i*256+e[t+f],f+=d,c-=8){}o=i&(1<<-c)-1;i>>=-c;c+=a;for(;c>0;o=o*256+e[t+f],f+=d,c-=8){}if(i===0){i=1-u}else if(i===l){return o?NaN:(v?-1:1)*Infinity}else{o=o+Math.pow(2,a);i=i-u}return(v?-1:1)*o*Math.pow(2,i-a)};r.write=function(e,t,r,a,n,i){var o,s,l;var u=i*8-n-1;var c=(1<<u)-1;var f=c>>1;var d=n===23?Math.pow(2,-24)-Math.pow(2,-77):0;var v=a?0:i-1;var p=a?1:-1;var h=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){s=isNaN(t)?1:0;o=c}else{o=Math.floor(Math.log(t)/Math.LN2);if(t*(l=Math.pow(2,-o))<1){o--;l*=2}if(o+f>=1){t+=d/l}else{t+=d*Math.pow(2,1-f)}if(t*l>=2){o++;l/=2}if(o+f>=c){s=0;o=c}else if(o+f>=1){s=(t*l-1)*Math.pow(2,n);o=o+f}else{s=t*Math.pow(2,f-1)*Math.pow(2,n);o=0}}for(;n>=8;e[r+v]=s&255,v+=p,s/=256,n-=8){}o=o<<n|s;u+=n;for(;u>0;e[r+v]=o&255,v+=p,o/=256,u-=8){}e[r+v-p]|=h*128}},{}],65:[function(e,t,r){if(typeof Object.create==="function"){t.exports=function e(t,r){if(r){t.super_=r;t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}}else{t.exports=function e(t,r){if(r){t.super_=r;var a=function(){};a.prototype=r.prototype;t.prototype=new a;t.prototype.constructor=t}}}},{}],66:[function(e,t,r){t.exports=true},{}],67:[function(e,t,r){"use strict";t.exports=i;t.exports.isMobile=i;t.exports.default=i;var a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i;var n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function i(e){if(!e)e={};var t=e.ua;if(!t&&typeof navigator!=="undefined")t=navigator.userAgent;if(t&&t.headers&&typeof t.headers["user-agent"]==="string"){t=t.headers["user-agent"]}if(typeof t!=="string")return false;var r=e.tablet?n.test(t):a.test(t);if(!r&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1){r=true}return r}},{}],68:[function(e,t,r){"use strict";t.exports=function(e){var t=e.length,r;for(var a=0;a<t;a++){r=e.charCodeAt(a);if((r<9||r>13)&&r!==32&&r!==133&&r!==160&&r!==5760&&r!==6158&&(r<8192||r>8205)&&r!==8232&&r!==8233&&r!==8239&&r!==8287&&r!==8288&&r!==12288&&r!==65279){return false}}return true}},{}],69:[function(e,t,r){var a={left:0,top:0};t.exports=n;function n(e,t,r){t=t||e.currentTarget||e.srcElement;if(!Array.isArray(r)){r=[0,0]}var a=e.clientX||0;var n=e.clientY||0;var i=o(t);r[0]=a-i.left;r[1]=n-i.top;return r}function o(e){if(e===window||e===document||e===document.body){return a}else{return e.getBoundingClientRect()}}},{}],70:[function(e,n,t){(function(e,g){(function(){(function e(t,r,a){r[t]=r[t]||a();if(typeof n!="undefined"&&n.exports){n.exports=r[t]}else if(typeof au=="function"&&au.amd){au(function e(){return r[t]})}})("Promise",typeof e!="undefined"?e:this,function e(){"use strict";var t,r,a,i=Object.prototype.toString,n=typeof g!="undefined"?function e(t){return g(t)}:setTimeout;try{Object.defineProperty({},"x",{});t=function e(t,r,a,n){return Object.defineProperty(t,r,{value:a,writable:true,configurable:n!==false})}}catch(e){t=function e(t,r,a){t[r]=a;return t}}a=function e(){var a,n,i;function o(e,t){this.fn=e;this.self=t;this.next=void 0}return{add:function e(t,r){i=new o(t,r);if(n){n.next=i}else{a=i}n=i;i=void 0},drain:function e(){var t=a;a=n=r=void 0;while(t){t.fn.call(t.self);t=t.next}}}}();function o(e,t){a.add(e,t);if(!r){r=n(a.drain)}}function s(e){var t,r=typeof e;if(e!=null&&(r=="object"||r=="function")){t=e.then}return typeof t=="function"?t:false}function l(){for(var e=0;e<this.chain.length;e++){u(this,this.state===1?this.chain[e].success:this.chain[e].failure,this.chain[e])}this.chain.length=0}function u(e,t,r){var a,n;try{if(t===false){r.reject(e.msg)}else{if(t===true){a=e.msg}else{a=t.call(void 0,e.msg)}if(a===r.promise){r.reject(TypeError("Promise-chain cycle"))}else if(n=s(a)){n.call(a,r.resolve,r.reject)}else{r.resolve(a)}}}catch(e){r.reject(e)}}function c(e){var r,a=this;if(a.triggered){return}a.triggered=true;if(a.def){a=a.def}try{if(r=s(e)){o(function(){var t=new v(a);try{r.call(e,function e(){c.apply(t,arguments)},function e(){f.apply(t,arguments)})}catch(e){f.call(t,e)}})}else{a.msg=e;a.state=1;if(a.chain.length>0){o(l,a)}}}catch(e){f.call(new v(a),e)}}function f(e){var t=this;if(t.triggered){return}t.triggered=true;if(t.def){t=t.def}t.msg=e;t.state=2;if(t.chain.length>0){o(l,t)}}function d(t,a,n,i){for(var e=0;e<a.length;e++){(function e(r){t.resolve(a[r]).then(function e(t){n(r,t)},i)})(e)}}function v(e){this.def=e;this.triggered=false}function p(e){this.promise=e;this.state=0;this.triggered=false;this.chain=[];this.msg=void 0}function h(e){if(typeof e!="function"){throw TypeError("Not a function")}if(this.__NPO__!==0){throw TypeError("Not a promise")}this.__NPO__=1;var n=new p(this);this["then"]=function e(t,r){var a={success:typeof t=="function"?t:true,failure:typeof r=="function"?r:false};a.promise=new this.constructor(function e(t,r){if(typeof t!="function"||typeof r!="function"){throw TypeError("Not a function")}a.resolve=t;a.reject=r});n.chain.push(a);if(n.state!==0){o(l,n)}return a.promise};this["catch"]=function e(t){return this.then(void 0,t)};try{e.call(void 0,function e(t){c.call(n,t)},function e(t){f.call(n,t)})}catch(e){f.call(n,e)}}var m=t({},"constructor",h,false);h.prototype=m;t(m,"__NPO__",0,false);t(h,"resolve",function e(a){var t=this;if(a&&typeof a=="object"&&a.__NPO__===1){return a}return new t(function e(t,r){if(typeof t!="function"||typeof r!="function"){throw TypeError("Not a function")}t(a)})});t(h,"reject",function e(a){return new this(function e(t,r){if(typeof t!="function"||typeof r!="function"){throw TypeError("Not a function")}r(a)})});t(h,"all",function e(r){var s=this;if(i.call(r)!="[object Array]"){return s.reject(TypeError("Not an array"))}if(r.length===0){return s.resolve([])}return new s(function e(a,t){if(typeof a!="function"||typeof t!="function"){throw TypeError("Not a function")}var n=r.length,i=Array(n),o=0;d(s,r,function e(t,r){i[t]=r;if(++o===n){a(i)}},t)})});t(h,"race",function e(r){var n=this;if(i.call(r)!="[object Array]"){return n.reject(TypeError("Not an array"))}return new n(function e(a,t){if(typeof a!="function"||typeof t!="function"){throw TypeError("Not a function")}d(n,r,function e(t,r){a(r)},t)})});return h})}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},e("timers").setImmediate)},{timers:118}],71:[function(e,t,r){"use strict";var l=Object.getOwnPropertySymbols;var u=Object.prototype.hasOwnProperty;var c=Object.prototype.propertyIsEnumerable;function f(e){if(e===null||e===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(e)}function a(){try{if(!Object.assign){return false}var e=new String("abc");e[5]="de";if(Object.getOwnPropertyNames(e)[0]==="5"){return false}var t={};for(var r=0;r<10;r++){t["_"+String.fromCharCode(r)]=r}var a=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if(a.join("")!=="0123456789"){return false}var n={};"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e});if(Object.keys(Object.assign({},n)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(e){return false}}t.exports=a()?Object.assign:function(e,t){var r;var a=f(e);var n;for(var i=1;i<arguments.length;i++){r=Object(arguments[i]);for(var o in r){if(u.call(r,o)){a[o]=r[o]}}if(l){n=l(r);for(var s=0;s<n.length;s++){if(c.call(r,n[s])){a[n[s]]=r[n[s]]}}}}return a}},{}],72:[function(e,t,r){t.exports=n;var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0};var a=/([astvzqmhlc])([^astvzqmhlc]*)/gi;function n(e){var n=[];e.replace(a,function(e,t,r){var a=t.toLowerCase();r=s(r);if(a=="m"&&r.length>2){n.push([t].concat(r.splice(0,2)));a="l";t=t=="m"?"l":"L"}while(true){if(r.length==i[a]){r.unshift(t);return n.push(r)}if(r.length<i[a])throw new Error("malformed path data");n.push([t].concat(r.splice(0,i[a])))}});return n}var o=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function s(e){var t=e.match(o);return t?t.map(Number):[]}},{}],73:[function(e,t,r){var a=e("./lib/build-log");var n=e("./lib/epsilon");var i=e("./lib/intersecter");var o=e("./lib/segment-chainer");var s=e("./lib/segment-selector");var l=e("./lib/geojson");var u=false;var c=n();var f;f={buildLog:function(e){if(e===true)u=a();else if(e===false)u=false;return u===false?false:u.list},epsilon:function(e){return c.epsilon(e)},segments:function(e){var t=i(true,c,u);e.regions.forEach(t.addRegion);return{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){var r=i(false,c,u);return{combined:r.calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:s.union(e.combined,u),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:s.intersect(e.combined,u),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:s.difference(e.combined,u),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:s.differenceRev(e.combined,u),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:s.xor(e.combined,u),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:o(e.segments,c,u),inverted:e.inverted}},polygonFromGeoJSON:function(e){return l.toPolygon(f,e)},polygonToGeoJSON:function(e){return l.fromPolygon(f,c,e)},union:function(e,t){return d(e,t,f.selectUnion)},intersect:function(e,t){return d(e,t,f.selectIntersect)},difference:function(e,t){return d(e,t,f.selectDifference)},differenceRev:function(e,t){return d(e,t,f.selectDifferenceRev)},xor:function(e,t){return d(e,t,f.selectXor)}};function d(e,t,r){var a=f.segments(e);var n=f.segments(t);var i=f.combine(a,n);var o=r(i);return f.polygon(o)}if(typeof window==="object")window.PolyBool=f;t.exports=f},{"./lib/build-log":74,"./lib/epsilon":75,"./lib/geojson":76,"./lib/intersecter":77,"./lib/segment-chainer":79,"./lib/segment-selector":80}],74:[function(e,t,r){function a(){var r;var e=0;var t=false;function a(e,t){r.list.push({type:e,data:t?JSON.parse(JSON.stringify(t)):void 0});return r}r={list:[],segmentId:function(){return e++},checkIntersection:function(e,t){return a("check",{seg1:e,seg2:t})},segmentChop:function(e,t){a("div_seg",{seg:e,pt:t});return a("chop",{seg:e,pt:t})},statusRemove:function(e){return a("pop_seg",{seg:e})},segmentUpdate:function(e){return a("seg_update",{seg:e})},segmentNew:function(e,t){return a("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return a("rem_seg",{seg:e})},tempStatus:function(e,t,r){return a("temp_status",{seg:e,above:t,below:r})},rewind:function(e){return a("rewind",{seg:e})},status:function(e,t,r){return a("status",{seg:e,above:t,below:r})},vert:function(e){if(e===t)return r;t=e;return a("vert",{x:e})},log:function(e){if(typeof e!=="string")e=JSON.stringify(e,false,"  ");return a("log",{txt:e})},reset:function(){return a("reset")},selected:function(e){return a("selected",{segs:e})},chainStart:function(e){return a("chain_start",{seg:e})},chainRemoveHead:function(e,t){return a("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return a("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return a("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return a("chain_match",{index:e})},chainClose:function(e){return a("chain_close",{index:e})},chainAddHead:function(e,t){return a("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return a("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return a("chain_con",{index1:e,index2:t})},chainReverse:function(e){return a("chain_rev",{index:e})},chainJoin:function(e,t){return a("chain_join",{index1:e,index2:t})},done:function(){return a("done")}};return r}t.exports=a},{}],75:[function(e,t,r){function a(p){if(typeof p!=="number")p=1e-10;var r={epsilon:function(e){if(typeof e==="number")p=e;return p},pointAboveOrOnLine:function(e,t,r){var a=t[0];var n=t[1];var i=r[0];var o=r[1];var s=e[0];var l=e[1];return(i-a)*(l-n)-(o-n)*(s-a)>=-p},pointBetween:function(e,t,r){var a=e[1]-t[1];var n=r[0]-t[0];var i=e[0]-t[0];var o=r[1]-t[1];var s=i*n+a*o;if(s<p)return false;var l=n*n+o*o;if(s-l>-p)return false;return true},pointsSameX:function(e,t){return Math.abs(e[0]-t[0])<p},pointsSameY:function(e,t){return Math.abs(e[1]-t[1])<p},pointsSame:function(e,t){return r.pointsSameX(e,t)&&r.pointsSameY(e,t)},pointsCompare:function(e,t){if(r.pointsSameX(e,t))return r.pointsSameY(e,t)?0:e[1]<t[1]?-1:1;return e[0]<t[0]?-1:1},pointsCollinear:function(e,t,r){var a=e[0]-t[0];var n=e[1]-t[1];var i=t[0]-r[0];var o=t[1]-r[1];return Math.abs(a*o-i*n)<p},linesIntersect:function(e,t,r,a){var n=t[0]-e[0];var i=t[1]-e[1];var o=a[0]-r[0];var s=a[1]-r[1];var l=n*s-i*o;if(Math.abs(l)<p)return false;var u=e[0]-r[0];var c=e[1]-r[1];var f=(o*c-s*u)/l;var d=(n*c-i*u)/l;var v={alongA:0,alongB:0,pt:[e[0]+f*n,e[1]+f*i]};if(f<=-p)v.alongA=-2;else if(f<p)v.alongA=-1;else if(f-1<=-p)v.alongA=0;else if(f-1<p)v.alongA=1;else v.alongA=2;if(d<=-p)v.alongB=-2;else if(d<p)v.alongB=-1;else if(d-1<=-p)v.alongB=0;else if(d-1<p)v.alongB=1;else v.alongB=2;return v},pointInsideRegion:function(e,t){var r=e[0];var a=e[1];var n=t[t.length-1][0];var i=t[t.length-1][1];var o=false;for(var s=0;s<t.length;s++){var l=t[s][0];var u=t[s][1];if(u-a>p!=i-a>p&&(n-l)*(a-u)/(i-u)+l-r>p)o=!o;n=l;i=u}return o}};return r}t.exports=a},{}],76:[function(e,t,r){var a={toPolygon:function(n,e){function t(e){if(e.length<=0)return n.segments({inverted:false,regions:[]});function t(e){var t=e.slice(0,e.length-1);return n.segments({inverted:false,regions:[t]})}var r=t(e[0]);for(var a=1;a<e.length;a++)r=n.selectDifference(n.combine(r,t(e[a])));return r}if(e.type==="Polygon"){return n.polygon(t(e.coordinates))}else if(e.type==="MultiPolygon"){var r=n.segments({inverted:false,regions:[]});for(var a=0;a<e.coordinates.length;a++)r=n.selectUnion(n.combine(r,t(e.coordinates[a])));return n.polygon(r)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,r,t){t=e.polygon(e.segments(t));function i(e,t){return r.pointInsideRegion([(e[0][0]+e[1][0])*.5,(e[0][1]+e[1][1])*.5],t)}function o(e){return{region:e,children:[]}}var a=o(null);function s(e,t){for(var r=0;r<e.children.length;r++){var a=e.children[r];if(i(t,a.region)){s(a,t);return}}var n=o(t);for(var r=0;r<e.children.length;r++){var a=e.children[r];if(i(a.region,t)){n.children.push(a);e.children.splice(r,1);r--}}e.children.push(n)}for(var n=0;n<t.regions.length;n++){var l=t.regions[n];if(l.length<3)continue;s(a,l)}function u(e,t){var r=0;var a=e[e.length-1][0];var n=e[e.length-1][1];var i=[];for(var o=0;o<e.length;o++){var s=e[o][0];var l=e[o][1];i.push([s,l]);r+=l*a-s*n;a=s;n=l}var u=r<0;if(u!==t)i.reverse();i.push([i[0][0],i[0][1]]);return i}var c=[];function f(e){var t=[u(e.region,false)];c.push(t);for(var r=0;r<e.children.length;r++)t.push(d(e.children[r]))}function d(e){for(var t=0;t<e.children.length;t++)f(e.children[t]);return u(e.region,true)}for(var n=0;n<a.children.length;n++)f(a.children[n]);if(c.length<=0)return{type:"Polygon",coordinates:[]};if(c.length==1)return{type:"Polygon",coordinates:c[0]};return{type:"MultiPolygon",coordinates:c}}};t.exports=a},{}],77:[function(e,t,r){var w=e("./linked-list");function a(g,y,x){function i(e,t){return{id:x?x.segmentId():-1,start:e,end:t,myFill:{above:null,below:null},otherFill:null}}function n(e,t,r){return{id:x?x.segmentId():-1,start:e,end:t,myFill:{above:r.myFill.above,below:r.myFill.below},otherFill:null}}var b=w.create();function o(e,t,r,a,n,i){var o=y.pointsCompare(t,n);if(o!==0)return o;if(y.pointsSame(r,i))return 0;if(e!==a)return e?1:-1;return y.pointAboveOrOnLine(r,a?n:i,a?i:n)?1:-1}function s(r,a){b.insertBefore(r,function(e){var t=o(r.isStart,r.pt,a,e.isStart,e.pt,e.other.pt);return t<0})}function a(e,t){var r=w.node({isStart:true,pt:e.start,seg:e,primary:t,other:null,status:null});s(r,e.end);return r}function l(e,t,r){var a=w.node({isStart:false,pt:t.end,seg:t,primary:r,other:e,status:null});e.other=a;s(a,e.pt)}function u(e,t){var r=a(e,t);l(r,e,t);return r}function c(e,t){if(x)x.segmentChop(e.seg,t);e.other.remove();e.seg.end=t;e.other.pt=t;s(e.other,e.pt)}function _(e,t){var r=n(t,e.seg.end,e.seg);c(e,t);return u(r,e.primary)}function f(e,t){var a=w.create();function n(e,t){var r=e.seg.start;var a=e.seg.end;var n=t.seg.start;var i=t.seg.end;if(y.pointsCollinear(r,n,i)){if(y.pointsCollinear(a,n,i))return 1;return y.pointAboveOrOnLine(a,n,i)?1:-1}return y.pointAboveOrOnLine(r,n,i)?1:-1}function r(r){return a.findTransition(function(e){var t=n(r,e.ev);return t>0})}function i(e,t){var r=e.seg;var a=t.seg;var n=r.start;var i=r.end;var o=a.start;var s=a.end;if(x)x.checkIntersection(r,a);var l=y.linesIntersect(n,i,o,s);if(l===false){if(!y.pointsCollinear(n,i,o))return false;if(y.pointsSame(n,s)||y.pointsSame(i,o))return false;var u=y.pointsSame(n,o);var c=y.pointsSame(i,s);if(u&&c)return t;var f=!u&&y.pointBetween(n,o,s);var d=!c&&y.pointBetween(i,o,s);if(u){if(d){_(t,i)}else{_(e,s)}return t}else if(f){if(!c){if(d){_(t,i)}else{_(e,s)}}_(t,n)}}else{if(l.alongA===0){if(l.alongB===-1)_(e,o);else if(l.alongB===0)_(e,l.pt);else if(l.alongB===1)_(e,s)}if(l.alongB===0){if(l.alongA===-1)_(t,n);else if(l.alongA===0)_(t,l.pt);else if(l.alongA===1)_(t,i)}}return false}var o=[];while(!b.isEmpty()){var s=b.getHead();if(x)x.vert(s.pt[0]);if(s.isStart){if(x)x.segmentNew(s.seg,s.primary);var l=r(s);var u=l.before?l.before.ev:null;var c=l.after?l.after.ev:null;if(x){x.tempStatus(s.seg,u?u.seg:false,c?c.seg:false)}function f(){if(u){var e=i(s,u);if(e)return e}if(c)return i(s,c);return false}var d=f();if(d){if(g){var v;if(s.seg.myFill.below===null)v=true;else v=s.seg.myFill.above!==s.seg.myFill.below;if(v)d.seg.myFill.above=!d.seg.myFill.above}else{d.seg.otherFill=s.seg.myFill}if(x)x.segmentUpdate(d.seg);s.other.remove();s.remove()}if(b.getHead()!==s){if(x)x.rewind(s.seg);continue}if(g){var v;if(s.seg.myFill.below===null)v=true;else v=s.seg.myFill.above!==s.seg.myFill.below;if(!c){s.seg.myFill.below=e}else{s.seg.myFill.below=c.seg.myFill.above}if(v)s.seg.myFill.above=!s.seg.myFill.below;else s.seg.myFill.above=s.seg.myFill.below}else{if(s.seg.otherFill===null){var p;if(!c){p=s.primary?t:e}else{if(s.primary===c.primary)p=c.seg.otherFill.above;else p=c.seg.myFill.above}s.seg.otherFill={above:p,below:p}}}if(x){x.status(s.seg,u?u.seg:false,c?c.seg:false)}s.other.status=l.insert(w.node({ev:s}))}else{var h=s.status;if(h===null){throw new Error("PolyBool: Zero-length segment detected; your epsilon is "+"probably too small or too large")}if(a.exists(h.prev)&&a.exists(h.next))i(h.prev.ev,h.next.ev);if(x)x.statusRemove(h.ev.seg);h.remove();if(!s.primary){var m=s.seg.myFill;s.seg.myFill=s.seg.otherFill;s.seg.otherFill=m}o.push(s.seg)}b.getHead().remove()}if(x)x.done();return o}if(!g){return{calculate:function(e,t,r,a){e.forEach(function(e){u(n(e.start,e.end,e),true)});r.forEach(function(e){u(n(e.start,e.end,e),false)});return f(t,a)}}}return{addRegion:function(e){var t;var r=e[e.length-1];for(var a=0;a<e.length;a++){t=r;r=e[a];var n=y.pointsCompare(t,r);if(n===0)continue;u(i(n<0?t:r,n<0?r:t),true)}},calculate:function(e){return f(e,false)}}}t.exports=a},{"./linked-list":78}],78:[function(e,t,r){var a={create:function(){var n={root:{root:true,next:null},exists:function(e){if(e===null||e===n.root)return false;return true},isEmpty:function(){return n.root.next===null},getHead:function(){return n.root.next},insertBefore:function(e,t){var r=n.root;var a=n.root.next;while(a!==null){if(t(a)){e.prev=a.prev;e.next=a;a.prev.next=e;a.prev=e;return}r=a;a=a.next}r.next=e;e.prev=r;e.next=null},findTransition:function(e){var t=n.root;var r=n.root.next;while(r!==null){if(e(r))break;t=r;r=r.next}return{before:t===n.root?null:t,after:r,insert:function(e){e.prev=t;e.next=r;t.next=e;if(r!==null)r.prev=e;return e}}}};return n},node:function(e){e.prev=null;e.next=null;e.remove=function(){e.prev.next=e.next;if(e.next)e.next.prev=e.prev;e.prev=null;e.next=null};return e}};t.exports=a},{}],79:[function(e,t,r){function a(e,M,A){var S=[];var E=[];e.forEach(function(e){var t=e.start;var r=e.end;if(M.pointsSame(t,r)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is "+"probably too small or too large");return}if(A)A.chainStart(e);var a={index:0,matches_head:false,matches_pt1:false};var n={index:0,matches_head:false,matches_pt1:false};var i=a;function o(e,t,r){i.index=e;i.matches_head=t;i.matches_pt1=r;if(i===a){i=n;return false}i=null;return true}for(var s=0;s<S.length;s++){var l=S[s];var u=l[0];var c=l[1];var f=l[l.length-1];var d=l[l.length-2];if(M.pointsSame(u,t)){if(o(s,true,true))break}else if(M.pointsSame(u,r)){if(o(s,true,false))break}else if(M.pointsSame(f,t)){if(o(s,false,true))break}else if(M.pointsSame(f,r)){if(o(s,false,false))break}}if(i===a){S.push([t,r]);if(A)A.chainNew(t,r);return}if(i===n){if(A)A.chainMatch(a.index);var v=a.index;var p=a.matches_pt1?r:t;var h=a.matches_head;var l=S[v];var m=h?l[0]:l[l.length-1];var g=h?l[1]:l[l.length-2];var y=h?l[l.length-1]:l[0];var x=h?l[l.length-2]:l[1];if(M.pointsCollinear(g,m,p)){if(h){if(A)A.chainRemoveHead(a.index,p);l.shift()}else{if(A)A.chainRemoveTail(a.index,p);l.pop()}m=g}if(M.pointsSame(y,p)){S.splice(v,1);if(M.pointsCollinear(x,y,m)){if(h){if(A)A.chainRemoveTail(a.index,m);l.pop()}else{if(A)A.chainRemoveHead(a.index,m);l.shift()}}if(A)A.chainClose(a.index);E.push(l);return}if(h){if(A)A.chainAddHead(a.index,p);l.unshift(p)}else{if(A)A.chainAddTail(a.index,p);l.push(p)}return}function b(e){if(A)A.chainReverse(e);S[e].reverse()}function _(e,t){var r=S[e];var a=S[t];var n=r[r.length-1];var i=r[r.length-2];var o=a[0];var s=a[1];if(M.pointsCollinear(i,n,o)){if(A)A.chainRemoveTail(e,n);r.pop();n=i}if(M.pointsCollinear(n,o,s)){if(A)A.chainRemoveHead(t,o);a.shift()}if(A)A.chainJoin(e,t);S[e]=r.concat(a);S.splice(t,1)}var w=a.index;var T=n.index;if(A)A.chainConnect(w,T);var k=S[w].length<S[T].length;if(a.matches_head){if(n.matches_head){if(k){b(w);_(w,T)}else{b(T);_(T,w)}}else{_(T,w)}}else{if(n.matches_head){_(w,T)}else{if(k){b(w);_(T,w)}else{b(T);_(w,T)}}}});return E}t.exports=a},{}],80:[function(e,t,r){function a(e,r,a){var n=[];e.forEach(function(e){var t=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);if(r[t]!==0){n.push({id:a?a.segmentId():-1,start:e.start,end:e.end,myFill:{above:r[t]===1,below:r[t]===2},otherFill:null})}});if(a)a.selected(n);return n}var n={union:function(e,t){return a(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return a(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return a(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return a(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return a(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}};t.exports=n},{}],81:[function(e,t,r){"use strict";var a=e("stream").Transform;var n=e("stream-parser");function i(){a.call(this,{readableObjectMode:true})}i.prototype=Object.create(a.prototype);i.prototype.constructor=i;n(i.prototype);r.ParserStream=i;r.sliceEq=function(e,t,r){for(var a=t,n=0;n<r.length;){if(e[a++]!==r[n++])return false}return true};r.str2arr=function(e,t){var r=[],a=0;if(t&&t==="hex"){while(a<e.length){r.push(parseInt(e.slice(a,a+2),16));a+=2}}else{for(;a<e.length;a++){r.push(e.charCodeAt(a)&255)}}return r};r.readUInt16LE=function(e,t){return e[t]|e[t+1]<<8};r.readUInt16BE=function(e,t){return e[t+1]|e[t]<<8};r.readUInt32LE=function(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]*16777216};r.readUInt32BE=function(e,t){return e[t+3]|e[t+2]<<8|e[t+1]<<16|e[t]*16777216};function o(e,t,r){Error.call(this);Error.captureStackTrace(this,this.constructor);this.name=this.constructor.name;this.message=e;if(t)this.code=t;if(r)this.statusCode=r}o.prototype=Object.create(Error.prototype);o.prototype.constructor=o;r.ProbeError=o},{stream:98,"stream-parser":114}],82:[function(e,t,r){"use strict";function g(e,t){var r=new Error(e);r.code=t;return r}function y(t){try{return decodeURIComponent(escape(t))}catch(e){return t}}function a(e,t,r){this.input=e.subarray(t,r);this.start=t;var a=String.fromCharCode.apply(null,this.input.subarray(0,4));if(a!=="II*\0"&&a!=="MM\0*"){throw g("invalid TIFF signature","EBADDATA")}this.big_endian=a[0]==="M"}a.prototype.each=function(e){this.aborted=false;var t=this.read_uint32(4);this.ifds_to_read=[{id:0,offset:t}];while(this.ifds_to_read.length>0&&!this.aborted){var r=this.ifds_to_read.shift();if(!r.offset)continue;this.scan_ifd(r.id,r.offset,e)}};a.prototype.read_uint16=function(e){var t=this.input;if(e+2>t.length)throw g("unexpected EOF","EBADDATA");return this.big_endian?t[e]*256+t[e+1]:t[e]+t[e+1]*256};a.prototype.read_uint32=function(e){var t=this.input;if(e+4>t.length)throw g("unexpected EOF","EBADDATA");return this.big_endian?t[e]*16777216+t[e+1]*65536+t[e+2]*256+t[e+3]:t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216};a.prototype.is_subifd_link=function(e,t){return e===0&&t===34665||e===0&&t===34853||e===34665&&t===40965};a.prototype.exif_format_length=function(e){switch(e){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}};a.prototype.exif_format_read=function(e,t){var r;switch(e){case 1:case 2:r=this.input[t];return r;case 6:r=this.input[t];return r|(r&128)*33554430;case 3:r=this.read_uint16(t);return r;case 8:r=this.read_uint16(t);return r|(r&32768)*131070;case 4:r=this.read_uint32(t);return r;case 9:r=this.read_uint32(t);return r|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}};a.prototype.scan_ifd=function(e,t,r){var a=this.read_uint16(t);t+=2;for(var n=0;n<a;n++){var i=this.read_uint16(t);var o=this.read_uint16(t+2);var s=this.read_uint32(t+4);var l=this.exif_format_length(o);var u=s*l;var c=u<=4?t+8:this.read_uint32(t+8);var f=false;if(c+u>this.input.length){throw g("unexpected EOF","EBADDATA")}var d=[];var v=c;for(var p=0;p<s;p++,v+=l){var h=this.exif_format_read(o,v);if(h===null){d=null;break}d.push(h)}if(Array.isArray(d)&&o===2){d=y(String.fromCharCode.apply(null,d));if(d&&d[d.length-1]==="\0")d=d.slice(0,-1)}if(this.is_subifd_link(e,i)){if(Array.isArray(d)&&Number.isInteger(d[0])&&d[0]>0){this.ifds_to_read.push({id:i,offset:d[0]});f=true}}var m={is_big_endian:this.big_endian,ifd:e,tag:i,format:o,count:s,entry_offset:t+this.start,data_length:u,data_offset:c+this.start,value:d,is_subifd_link:f};if(r(m)===false){this.aborted=true;return}t+=12}if(e===0){this.ifds_to_read.push({id:1,offset:this.read_uint32(t)})}};t.exports.ExifParser=a;t.exports.get_orientation=function(e){var t=0;try{new a(e,0,e.length).each(function(e){if(e.ifd===0&&e.tag===274&&Array.isArray(e.value)){t=e.value[0];return false}});return t}catch(e){return-1}}},{}],83:[function(e,t,r){"use strict";var p=e("./common").readUInt16BE;var n=e("./common").readUInt32BE;function u(e,t){if(e.length<4+t)return null;var r=n(e,t);if(e.length<r+t||r<8)return null;return{boxtype:String.fromCharCode.apply(null,e.slice(t+4,t+8)),data:e.slice(t+8,t+r),end:t+r}}t.exports.unbox=u;function i(e,t){var r=0;for(;;){var a=u(e,r);if(!a)break;switch(a.boxtype){case"ispe":t.sizes.push({width:n(a.data,4),height:n(a.data,8)});break;case"irot":t.transforms.push({type:"irot",value:a.data[0]&3});break;case"imir":t.transforms.push({type:"imir",value:a.data[0]&1});break}r=a.end}}function h(e,t,r){var a=0;for(var n=0;n<r;n++){a=a*256+(e[t+n]||0)}return a}function o(e,t){var r=e[4]>>4&15;var a=e[4]&15;var n=e[5]>>4&15;var i=p(e,6);var o=8;for(var s=0;s<i;s++){var l=p(e,o);o+=2;var u=p(e,o);o+=2;var c=h(e,o,n);o+=n;var f=p(e,o);o+=2;if(u===0&&f===1){var d=h(e,o,r);var v=h(e,o+r,a);t.item_loc[l]={length:v,offset:d+c}}o+=f*(r+a)}}function s(e,t){var r=p(e,4);var a=6;for(var n=0;n<r;n++){var i=u(e,a);if(!i)break;if(i.boxtype==="infe"){var o=p(i.data,4);var s="";for(var l=8;l<i.data.length&&i.data[l];l++){s+=String.fromCharCode(i.data[l])}t.item_inf[s]=o}a=i.end}}function l(e,t){var r=0;for(;;){var a=u(e,r);if(!a)break;if(a.boxtype==="ipco")i(a.data,t);r=a.end}}function c(e,t){var r=4;for(;;){var a=u(e,r);if(!a)break;if(a.boxtype==="iprp")l(a.data,t);if(a.boxtype==="iloc")o(a.data,t);if(a.boxtype==="iinf")s(a.data,t);r=a.end}}function f(e){var t=e.reduce(function(e,t){return e.width>t.width||e.width===t.width&&e.height>t.height?e:t});var r=e.reduce(function(e,t){return e.height>t.height||e.height===t.height&&e.width>t.width?e:t});var a;if(t.width>r.height||t.width===r.height&&t.height>r.width){a=t}else{a=r}return a}t.exports.readSizeFromMeta=function(e){var t={sizes:[],transforms:[],item_inf:{},item_loc:{}};c(e,t);if(!t.sizes.length)return;var r=f(t.sizes);var n=1;t.transforms.forEach(function(e){var t={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1};var r={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(e.type==="imir"){if(e.value===0){n=r[n]}else{n=r[n];n=t[n];n=t[n]}}if(e.type==="irot"){for(var a=0;a<e.value;a++){n=t[n]}}});var a=null;if(t.item_inf.Exif){a=t.item_loc[t.item_inf.Exif]}return{width:r.width,height:r.height,orientation:t.transforms.length?n:null,variants:t.sizes,exif_location:a}};t.exports.getMimeType=function(e){var t=String.fromCharCode.apply(null,e.slice(0,4));var r={};r[t]=true;for(var a=8;a<e.length;a+=4){r[String.fromCharCode.apply(null,e.slice(a,a+4))]=true}if(!r.mif1&&!r.msf1&&!r.miaf)return;if(t==="avif"||t==="avis"||t==="avio"){return{type:"avif",mime:"image/avif"}}if(t==="heic"||t==="heix"){return{type:"heic",mime:"image/heic"}}if(t==="hevc"||t==="hevx"){return{type:"heic",mime:"image/heic-sequence"}}if(r.avif||r.avis){return{type:"avif",mime:"image/avif"}}if(r.heic||r.heix||r.hevc||r.hevx||r.heis){if(r.msf1){return{type:"heif",mime:"image/heif-sequence"}}return{type:"heif",mime:"image/heif"}}return{type:"avif",mime:"image/avif"}}},{"./common":81}],84:[function(e,t,r){"use strict";var a=e("../common").str2arr;var f=e("../common").sliceEq;var d=e("../common").readUInt32BE;var v=e("../miaf_utils");var p=e("../exif_utils");var h=a("ftyp");t.exports=function(e){if(!f(e,4,h))return;var t=v.unbox(e,0);if(!t)return;var r=v.getMimeType(t.data);if(!r)return;var a,n=t.end;for(;;){var i=v.unbox(e,n);if(!i)break;n=i.end;if(i.boxtype==="mdat")return;if(i.boxtype==="meta"){a=i.data;break}}if(!a)return;var o=v.readSizeFromMeta(a);if(!o)return;var s={width:o.width,height:o.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(o.variants.length>1){s.variants=o.variants}if(o.orientation){s.orientation=o.orientation}if(o.exif_location&&o.exif_location.offset+o.exif_location.length<=e.length){var l=d(e,o.exif_location.offset);var u=e.slice(o.exif_location.offset+l+4,o.exif_location.offset+o.exif_location.length);var c=p.get_orientation(u);if(c>0)s.orientation=c}return s}},{"../common":81,"../exif_utils":82,"../miaf_utils":83}],85:[function(e,t,r){"use strict";var a=e("../common").str2arr;var n=e("../common").sliceEq;var i=e("../common").readUInt16LE;var o=a("BM");t.exports=function(e){if(e.length<26)return;if(!n(e,0,o))return;return{width:i(e,18),height:i(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":81}],86:[function(e,t,r){"use strict";var a=e("../common").str2arr;var n=e("../common").sliceEq;var i=e("../common").readUInt16LE;var o=a("GIF87a");var s=a("GIF89a");t.exports=function(e){if(e.length<10)return;if(!n(e,0,o)&&!n(e,0,s))return;return{width:i(e,6),height:i(e,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":81}],87:[function(e,t,r){"use strict";var c=e("../common").readUInt16LE;var f=0;var d=1;var v=16;t.exports=function(e){var t=c(e,0);var r=c(e,2);var a=c(e,4);if(t!==f||r!==d||!a){return}var n=[];var i={width:0,height:0};for(var o=0;o<a;o++){var s=e[6+v*o]||256;var l=e[6+v*o+1]||256;var u={width:s,height:l};n.push(u);if(s>i.width||l>i.height){i=u}}return{width:i.width,height:i.height,variants:n,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}},{"../common":81}],88:[function(e,t,r){"use strict";var o=e("../common").readUInt16BE;var a=e("../common").str2arr;var s=e("../common").sliceEq;var l=e("../exif_utils");var u=a("Exif\0\0");t.exports=function(e){if(e.length<2)return;if(e[0]!==255||e[1]!==216)return;var t=2;for(;;){if(e.length-t<2)return;if(e[t++]!==255)return;var r=e[t++];var a;while(r===255)r=e[t++];if(208<=r&&r<=217||r===1){a=0}else if(192<=r&&r<=254){if(e.length-t<2)return;a=o(e,t)-2;t+=2}else{return}if(r===217||r===218){return}var n;if(r===225&&a>=10&&s(e,t,u)){n=l.get_orientation(e.slice(t+6,t+a))}if(a>=5&&(192<=r&&r<=207)&&r!==196&&r!==200&&r!==204){if(e.length-t<a)return;var i={width:o(e,t+3),height:o(e,t+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};if(n>0){i.orientation=n}return i}t+=a}}},{"../common":81,"../exif_utils":82}],89:[function(e,t,r){"use strict";var a=e("../common").str2arr;var n=e("../common").sliceEq;var i=e("../common").readUInt32BE;var o=a("PNG\r\n\n");var s=a("IHDR");t.exports=function(e){if(e.length<24)return;if(!n(e,0,o))return;if(!n(e,12,s))return;return{width:i(e,16),height:i(e,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":81}],90:[function(e,t,r){"use strict";var a=e("../common").str2arr;var n=e("../common").sliceEq;var i=e("../common").readUInt32BE;var o=a("8BPS\0");t.exports=function(e){if(e.length<6+16)return;if(!n(e,0,o))return;return{width:i(e,6+12),height:i(e,6+8),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":81}],91:[function(e,t,r){"use strict";function a(e){return e===32||e===9||e===13||e===10}function d(e){return typeof e==="number"&&isFinite(e)&&e>0}function v(e){var t=0,r=e.length;if(e[0]===239&&e[1]===187&&e[2]===191)t=3;while(t<r&&a(e[t]))t++;if(t===r)return false;return e[t]===60}var p=/<[-_.:a-zA-Z0-9][^>]*>/;var h=/^<([-_.:a-zA-Z0-9]+:)?svg\s/;var n=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/;var i=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/;var o=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/;var s=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function m(e){var t=e.match(n);var r=e.match(i);var a=e.match(o);return{width:t&&(t[1]||t[2]),height:r&&(r[1]||r[2]),viewbox:a&&(a[1]||a[2])}}function g(e){if(!s.test(e))return"px";return e.match(s)[0]}t.exports=function(e){if(!v(e))return;var t="";for(var r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}var a=(t.match(p)||[""])[0];if(!h.test(a))return;var n=m(a);var i=parseFloat(n.width);var o=parseFloat(n.height);if(n.width&&n.height){if(!d(i)||!d(o))return;return{width:i,height:o,type:"svg",mime:"image/svg+xml",wUnits:g(n.width),hUnits:g(n.height)}}var s=(n.viewbox||"").split(" ");var l={width:s[2],height:s[3]};var u=parseFloat(l.width);var c=parseFloat(l.height);if(!d(u)||!d(c))return;if(g(l.width)!==g(l.height))return;var f=u/c;if(n.width){if(!d(i))return;return{width:i,height:i/f,type:"svg",mime:"image/svg+xml",wUnits:g(n.width),hUnits:g(n.width)}}if(n.height){if(!d(o))return;return{width:o*f,height:o,type:"svg",mime:"image/svg+xml",wUnits:g(n.height),hUnits:g(n.height)}}return{width:u,height:c,type:"svg",mime:"image/svg+xml",wUnits:g(l.width),hUnits:g(l.height)}}},{}],92:[function(e,t,r){"use strict";var a=e("../common").str2arr;var u=e("../common").sliceEq;var n=e("../common").readUInt16LE;var i=e("../common").readUInt16BE;var o=e("../common").readUInt32LE;var s=e("../common").readUInt32BE;var c=a("II*\0");var f=a("MM\0*");function d(e,t,r){return r?i(e,t):n(e,t)}function v(e,t,r){return r?s(e,t):o(e,t)}function p(e,t,r){var a=d(e,t+2,r);var n=v(e,t+4,r);if(n!==1||a!==3&&a!==4)return null;if(a===3){return d(e,t+8,r)}return v(e,t+8,r)}t.exports=function(e){if(e.length<8)return;if(!u(e,0,c)&&!u(e,0,f))return;var t=e[0]===77;var r=v(e,4,t)-8;if(r<0)return;var a=r+8;if(e.length-a<2)return;var n=d(e,a+0,t)*12;if(n<=0)return;a+=2;if(e.length-a<n)return;var i,o,s,l;for(i=0;i<n;i+=12){l=d(e,a+i,t);if(l===256){o=p(e,a+i,t)}else if(l===257){s=p(e,a+i,t)}}if(o&&s){return{width:o,height:s,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}},{"../common":81}],93:[function(e,t,r){"use strict";var a=e("../common").str2arr;var s=e("../common").sliceEq;var n=e("../common").readUInt16LE;var l=e("../common").readUInt32LE;var u=e("../exif_utils");var c=a("RIFF");var f=a("WEBP");function d(e,t){if(e[t+3]!==157||e[t+4]!==1||e[t+5]!==42){return}return{width:n(e,t+6)&16383,height:n(e,t+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function v(e,t){if(e[t]!==47)return;var r=l(e,t+1);return{width:(r&16383)+1,height:(r>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function p(e,t){return{width:(e[t+6]<<16|e[t+5]<<8|e[t+4])+1,height:(e[t+9]<<t|e[t+8]<<8|e[t+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}t.exports=function(e){if(e.length<16)return;if(!s(e,0,c)&&!s(e,8,f))return;var t=12;var r=null;var a=0;var n=l(e,4)+8;if(n>e.length)return;while(t+8<n){if(e[t]===0){t++;continue}var i=String.fromCharCode.apply(null,e.slice(t,t+4));var o=l(e,t+4);if(i==="VP8 "&&o>=10){r=r||d(e,t+8)}else if(i==="VP8L"&&o>=9){r=r||v(e,t+8)}else if(i==="VP8X"&&o>=10){r=r||p(e,t+8)}else if(i==="EXIF"){a=u.get_orientation(e.slice(t+8,t+8+o));t=Infinity}t+=8+o}if(!r)return;if(a>0){r.orientation=a}return r}},{"../common":81,"../exif_utils":82}],94:[function(e,t,r){"use strict";t.exports={avif:e("./parse_sync/avif"),bmp:e("./parse_sync/bmp"),gif:e("./parse_sync/gif"),ico:e("./parse_sync/ico"),jpeg:e("./parse_sync/jpeg"),png:e("./parse_sync/png"),psd:e("./parse_sync/psd"),svg:e("./parse_sync/svg"),tiff:e("./parse_sync/tiff"),webp:e("./parse_sync/webp")}},{"./parse_sync/avif":84,"./parse_sync/bmp":85,"./parse_sync/gif":86,"./parse_sync/ico":87,"./parse_sync/jpeg":88,"./parse_sync/png":89,"./parse_sync/psd":90,"./parse_sync/svg":91,"./parse_sync/tiff":92,"./parse_sync/webp":93}],95:[function(e,t,r){"use strict";var n=e("./lib/parsers_sync");function a(e){var t=Object.keys(n);for(var r=0;r<t.length;r++){var a=n[t[r]](e);if(a)return a}return null}t.exports=function e(t){return a(t)};t.exports.parsers=n},{"./lib/parsers_sync":94}],96:[function(e,t,r){var a=t.exports={};var n;var i;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){n=setTimeout}else{n=o}}catch(e){n=o}try{if(typeof clearTimeout==="function"){i=clearTimeout}else{i=s}}catch(e){i=s}})();function l(t){if(n===setTimeout){return setTimeout(t,0)}if((n===o||!n)&&setTimeout){n=setTimeout;return setTimeout(t,0)}try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}function u(t){if(i===clearTimeout){return clearTimeout(t)}if((i===s||!i)&&clearTimeout){i=clearTimeout;return clearTimeout(t)}try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}var c=[];var f=false;var d;var v=-1;function p(){if(!f||!d){return}f=false;if(d.length){c=d.concat(c)}else{v=-1}if(c.length){h()}}function h(){if(f){return}var e=l(p);f=true;var t=c.length;while(t){d=c;c=[];while(++v<t){if(d){d[v].run()}}v=-1;t=c.length}d=null;f=false;u(e)}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}c.push(new m(e,t));if(c.length===1&&!f){l(h)}};function m(e,t){this.fun=e;this.array=t}m.prototype.run=function(){this.fun.apply(null,this.array)};a.title="browser";a.browser=true;a.env={};a.argv=[];a.version="";a.versions={};function g(){}a.on=g;a.addListener=g;a.once=g;a.off=g;a.removeListener=g;a.removeAllListeners=g;a.emit=g;a.prependListener=g;a.prependOnceListener=g;a.listeners=function(e){return[]};a.binding=function(e){throw new Error("process.binding is not supported")};a.cwd=function(){return"/"};a.chdir=function(e){throw new Error("process.chdir is not supported")};a.umask=function(){return 0}},{}],97:[function(e,t,r){var a=e("buffer");var n=a.Buffer;function i(e,t){for(var r in e){t[r]=e[r]}}if(n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow){t.exports=a}else{i(a,r);r.Buffer=o}function o(e,t,r){return n(e,t,r)}o.prototype=Object.create(n.prototype);i(n,o);o.from=function(e,t,r){if(typeof e==="number"){throw new TypeError("Argument must not be a number")}return n(e,t,r)};o.alloc=function(e,t,r){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}var a=n(e);if(t!==undefined){if(typeof r==="string"){a.fill(t,r)}else{a.fill(t)}}else{a.fill(0)}return a};o.allocUnsafe=function(e){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}return n(e)};o.allocUnsafeSlow=function(e){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}return a.SlowBuffer(e)}},{buffer:28}],98:[function(e,t,r){t.exports=n;var c=e("events").EventEmitter;var a=e("inherits");a(n,c);n.Readable=e("readable-stream/lib/_stream_readable.js");n.Writable=e("readable-stream/lib/_stream_writable.js");n.Duplex=e("readable-stream/lib/_stream_duplex.js");n.Transform=e("readable-stream/lib/_stream_transform.js");n.PassThrough=e("readable-stream/lib/_stream_passthrough.js");n.finished=e("readable-stream/lib/internal/streams/end-of-stream.js");n.pipeline=e("readable-stream/lib/internal/streams/pipeline.js");n.Stream=n;function n(){c.call(this)}n.prototype.pipe=function(t,e){var r=this;function a(e){if(t.writable){if(false===t.write(e)&&r.pause){r.pause()}}}r.on("data",a);function n(){if(r.readable&&r.resume){r.resume()}}t.on("drain",n);if(!t._isStdio&&(!e||e.end!==false)){r.on("end",o);r.on("close",s)}var i=false;function o(){if(i)return;i=true;t.end()}function s(){if(i)return;i=true;if(typeof t.destroy==="function")t.destroy()}function l(e){u();if(c.listenerCount(this,"error")===0){throw e}}r.on("error",l);t.on("error",l);function u(){r.removeListener("data",a);t.removeListener("drain",n);r.removeListener("end",o);r.removeListener("close",s);r.removeListener("error",l);t.removeListener("error",l);r.removeListener("end",u);r.removeListener("close",u);t.removeListener("close",u)}r.on("end",u);r.on("close",u);t.on("close",u);t.emit("pipe",r);return t}},{events:27,inherits:65,"readable-stream/lib/_stream_duplex.js":100,"readable-stream/lib/_stream_passthrough.js":101,"readable-stream/lib/_stream_readable.js":102,"readable-stream/lib/_stream_transform.js":103,"readable-stream/lib/_stream_writable.js":104,"readable-stream/lib/internal/streams/end-of-stream.js":108,"readable-stream/lib/internal/streams/pipeline.js":110}],99:[function(e,t,r){"use strict";function i(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var o={};function a(e,a,t){if(!t){t=Error}function n(e,t,r){if(typeof a==="string"){return a}else{return a(e,t,r)}}var r=function(a){i(e,a);function e(e,t,r){return a.call(this,n(e,t,r))||this}return e}(t);r.prototype.name=t.name;r.prototype.code=e;o[e]=r}function s(e,t){if(Array.isArray(e)){var r=e.length;e=e.map(function(e){return String(e)});if(r>2){return"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]}else if(r===2){return"one of ".concat(t," ").concat(e[0]," or ").concat(e[1])}else{return"of ".concat(t," ").concat(e[0])}}else{return"of ".concat(t," ").concat(String(e))}}function l(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function u(e,t,r){if(r===undefined||r>e.length){r=e.length}return e.substring(r-t.length,r)===t}function c(e,t,r){if(typeof r!=="number"){r=0}if(r+t.length>e.length){return false}else{return e.indexOf(t,r)!==-1}}a("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);a("ERR_INVALID_ARG_TYPE",function(e,t,r){var a;if(typeof t==="string"&&l(t,"not ")){a="must not be";t=t.replace(/^not /,"")}else{a="must be"}var n;if(u(e," argument")){n="The ".concat(e," ").concat(a," ").concat(s(t,"type"))}else{var i=c(e,".")?"property":"argument";n='The "'.concat(e,'" ').concat(i," ").concat(a," ").concat(s(t,"type"))}n+=". Received type ".concat(typeof r);return n},TypeError);a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");a("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});a("ERR_STREAM_PREMATURE_CLOSE","Premature close");a("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});a("ERR_MULTIPLE_CALLBACK","Callback called multiple times");a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");a("ERR_STREAM_WRITE_AFTER_END","write after end");a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);a("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");t.exports.codes=o},{}],100:[function(c,f,e){(function(u){(function(){"use strict";var e=Object.keys||function(e){var t=[];for(var r in e){t.push(r)}return t};f.exports=o;var t=c("./_stream_readable");var r=c("./_stream_writable");c("inherits")(o,t);{var a=e(r.prototype);for(var n=0;n<a.length;n++){var i=a[n];if(!o.prototype[i])o.prototype[i]=r.prototype[i]}}function o(e){if(!(this instanceof o))return new o(e);t.call(this,e);r.call(this,e);this.allowHalfOpen=true;if(e){if(e.readable===false)this.readable=false;if(e.writable===false)this.writable=false;if(e.allowHalfOpen===false){this.allowHalfOpen=false;this.once("end",s)}}}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:false,get:function e(){return this._writableState.highWaterMark}});Object.defineProperty(o.prototype,"writableBuffer",{enumerable:false,get:function e(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(o.prototype,"writableLength",{enumerable:false,get:function e(){return this._writableState.length}});function s(){if(this._writableState.ended)return;u.nextTick(l,this)}function l(e){e.end()}Object.defineProperty(o.prototype,"destroyed",{enumerable:false,get:function e(){if(this._readableState===undefined||this._writableState===undefined){return false}return this._readableState.destroyed&&this._writableState.destroyed},set:function e(t){if(this._readableState===undefined||this._writableState===undefined){return}this._readableState.destroyed=t;this._writableState.destroyed=t}})}).call(this)}).call(this,c("_process"))},{"./_stream_readable":102,"./_stream_writable":104,_process:96,inherits:65}],101:[function(e,t,r){"use strict";t.exports=n;var a=e("./_stream_transform");e("inherits")(n,a);function n(e){if(!(this instanceof n))return new n(e);a.call(this,e)}n.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":103,inherits:65}],102:[function(X,J,e){(function($,Z){(function(){"use strict";J.exports=A;var a;A.ReadableState=M;var e=X("events").EventEmitter;var m=function e(t,r){return t.listeners(r).length};var n=X("./internal/streams/stream");var s=X("buffer").Buffer;var t=Z.Uint8Array||function(){};function l(e){return s.from(e)}function i(e){return s.isBuffer(e)||e instanceof t}var r=X("util");var g;if(r&&r.debuglog){g=r.debuglog("stream")}else{g=function e(){}}var o=X("./internal/streams/buffer_list");var u=X("./internal/streams/destroy");var c=X("./internal/streams/state"),f=c.getHighWaterMark;var d=X("../errors").codes,v=d.ERR_INVALID_ARG_TYPE,p=d.ERR_STREAM_PUSH_AFTER_EOF,h=d.ERR_METHOD_NOT_IMPLEMENTED,y=d.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;var x;var b;var _;X("inherits")(A,n);var w=u.errorOrDestroy;var T=["error","close","destroy","pause","resume"];function k(e,t,r){if(typeof e.prependListener==="function")return e.prependListener(t,r);if(!e._events||!e._events[t])e.on(t,r);else if(Array.isArray(e._events[t]))e._events[t].unshift(r);else e._events[t]=[r,e._events[t]]}function M(e,t,r){a=a||X("./_stream_duplex");e=e||{};if(typeof r!=="boolean")r=t instanceof a;this.objectMode=!!e.objectMode;if(r)this.objectMode=this.objectMode||!!e.readableObjectMode;this.highWaterMark=f(this,e,"readableHighWaterMark",r);this.buffer=new o;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.paused=true;this.emitClose=e.emitClose!==false;this.autoDestroy=!!e.autoDestroy;this.destroyed=false;this.defaultEncoding=e.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(e.encoding){if(!x)x=X("string_decoder/").StringDecoder;this.decoder=new x(e.encoding);this.encoding=e.encoding}}function A(e){a=a||X("./_stream_duplex");if(!(this instanceof A))return new A(e);var t=this instanceof a;this._readableState=new M(e,this,t);this.readable=true;if(e){if(typeof e.read==="function")this._read=e.read;if(typeof e.destroy==="function")this._destroy=e.destroy}n.call(this)}Object.defineProperty(A.prototype,"destroyed",{enumerable:false,get:function e(){if(this._readableState===undefined){return false}return this._readableState.destroyed},set:function e(t){if(!this._readableState){return}this._readableState.destroyed=t}});A.prototype.destroy=u.destroy;A.prototype._undestroy=u.undestroy;A.prototype._destroy=function(e,t){t(e)};A.prototype.push=function(e,t){var r=this._readableState;var a;if(!r.objectMode){if(typeof e==="string"){t=t||r.defaultEncoding;if(t!==r.encoding){e=s.from(e,t);t=""}a=true}}else{a=true}return S(this,e,t,false,a)};A.prototype.unshift=function(e){return S(this,e,null,true,false)};function S(e,t,r,a,n){g("readableAddChunk",t);var i=e._readableState;if(t===null){i.reading=false;I(e,i)}else{var o;if(!n)o=L(i,t);if(o){w(e,o)}else if(i.objectMode||t&&t.length>0){if(typeof t!=="string"&&!i.objectMode&&Object.getPrototypeOf(t)!==s.prototype){t=l(t)}if(a){if(i.endEmitted)w(e,new y);else E(e,i,t,true)}else if(i.ended){w(e,new p)}else if(i.destroyed){return false}else{i.reading=false;if(i.decoder&&!r){t=i.decoder.write(t);if(i.objectMode||t.length!==0)E(e,i,t,false);else N(e,i)}else{E(e,i,t,false)}}}else if(!a){i.reading=false;N(e,i)}}return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function E(e,t,r,a){if(t.flowing&&t.length===0&&!t.sync){t.awaitDrain=0;e.emit("data",r)}else{t.length+=t.objectMode?1:r.length;if(a)t.buffer.unshift(r);else t.buffer.push(r);if(t.needReadable)P(e)}N(e,t)}function L(e,t){var r;if(!i(t)&&typeof t!=="string"&&t!==undefined&&!e.objectMode){r=new v("chunk",["string","Buffer","Uint8Array"],t)}return r}A.prototype.isPaused=function(){return this._readableState.flowing===false};A.prototype.setEncoding=function(e){if(!x)x=X("string_decoder/").StringDecoder;var t=new x(e);this._readableState.decoder=t;this._readableState.encoding=this._readableState.decoder.encoding;var r=this._readableState.buffer.head;var a="";while(r!==null){a+=t.write(r.data);r=r.next}this._readableState.buffer.clear();if(a!=="")this._readableState.buffer.push(a);this._readableState.length=a.length;return this};var C=1073741824;function D(e){if(e>=C){e=C}else{e--;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;e++}return e}function O(e,t){if(e<=0||t.length===0&&t.ended)return 0;if(t.objectMode)return 1;if(e!==e){if(t.flowing&&t.length)return t.buffer.head.data.length;else return t.length}if(e>t.highWaterMark)t.highWaterMark=D(e);if(e<=t.length)return e;if(!t.ended){t.needReadable=true;return 0}return t.length}A.prototype.read=function(e){g("read",e);e=parseInt(e,10);var t=this._readableState;var r=e;if(e!==0)t.emittedReadable=false;if(e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended)){g("read: emitReadable",t.length,t.ended);if(t.length===0&&t.ended)V(this);else P(this);return null}e=O(e,t);if(e===0&&t.ended){if(t.length===0)V(this);return null}var a=t.needReadable;g("need readable",a);if(t.length===0||t.length-e<t.highWaterMark){a=true;g("length less than watermark",a)}if(t.ended||t.reading){a=false;g("reading or ended",a)}else if(a){g("do read");t.reading=true;t.sync=true;if(t.length===0)t.needReadable=true;this._read(t.highWaterMark);t.sync=false;if(!t.reading)e=O(r,t)}var n;if(e>0)n=Y(e,t);else n=null;if(n===null){t.needReadable=t.length<=t.highWaterMark;e=0}else{t.length-=e;t.awaitDrain=0}if(t.length===0){if(!t.ended)t.needReadable=true;if(r!==e&&t.ended)V(this)}if(n!==null)this.emit("data",n);return n};function I(e,t){g("onEofChunk");if(t.ended)return;if(t.decoder){var r=t.decoder.end();if(r&&r.length){t.buffer.push(r);t.length+=t.objectMode?1:r.length}}t.ended=true;if(t.sync){P(e)}else{t.needReadable=false;if(!t.emittedReadable){t.emittedReadable=true;R(e)}}}function P(e){var t=e._readableState;g("emitReadable",t.needReadable,t.emittedReadable);t.needReadable=false;if(!t.emittedReadable){g("emitReadable",t.flowing);t.emittedReadable=true;$.nextTick(R,e)}}function R(e){var t=e._readableState;g("emitReadable_",t.destroyed,t.length,t.ended);if(!t.destroyed&&(t.length||t.ended)){e.emit("readable");t.emittedReadable=false}t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark;U(e)}function N(e,t){if(!t.readingMore){t.readingMore=true;$.nextTick(z,e,t)}}function z(e,t){while(!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0)){var r=t.length;g("maybeReadMore read 0");e.read(0);if(r===t.length)break}t.readingMore=false}A.prototype._read=function(e){w(this,new h("_read()"))};A.prototype.pipe=function(r,e){var a=this;var n=this._readableState;switch(n.pipesCount){case 0:n.pipes=r;break;case 1:n.pipes=[n.pipes,r];break;default:n.pipes.push(r);break}n.pipesCount+=1;g("pipe count=%d opts=%j",n.pipesCount,e);var t=(!e||e.end!==false)&&r!==$.stdout&&r!==$.stderr;var i=t?s:h;if(n.endEmitted)$.nextTick(i);else a.once("end",i);r.on("unpipe",o);function o(e,t){g("onunpipe");if(e===a){if(t&&t.hasUnpiped===false){t.hasUnpiped=true;c()}}}function s(){g("onend");r.end()}var l=F(a);r.on("drain",l);var u=false;function c(){g("cleanup");r.removeListener("close",v);r.removeListener("finish",p);r.removeListener("drain",l);r.removeListener("error",d);r.removeListener("unpipe",o);a.removeListener("end",s);a.removeListener("end",h);a.removeListener("data",f);u=true;if(n.awaitDrain&&(!r._writableState||r._writableState.needDrain))l()}a.on("data",f);function f(e){g("ondata");var t=r.write(e);g("dest.write",t);if(t===false){if((n.pipesCount===1&&n.pipes===r||n.pipesCount>1&&W(n.pipes,r)!==-1)&&!u){g("false write response, pause",n.awaitDrain);n.awaitDrain++}a.pause()}}function d(e){g("onerror",e);h();r.removeListener("error",d);if(m(r,"error")===0)w(r,e)}k(r,"error",d);function v(){r.removeListener("finish",p);h()}r.once("close",v);function p(){g("onfinish");r.removeListener("close",v);h()}r.once("finish",p);function h(){g("unpipe");a.unpipe(r)}r.emit("pipe",a);if(!n.flowing){g("pipe resume");a.resume()}return r};function F(r){return function e(){var t=r._readableState;g("pipeOnDrain",t.awaitDrain);if(t.awaitDrain)t.awaitDrain--;if(t.awaitDrain===0&&m(r,"data")){t.flowing=true;U(r)}}}A.prototype.unpipe=function(e){var t=this._readableState;var r={hasUnpiped:false};if(t.pipesCount===0)return this;if(t.pipesCount===1){if(e&&e!==t.pipes)return this;if(!e)e=t.pipes;t.pipes=null;t.pipesCount=0;t.flowing=false;if(e)e.emit("unpipe",this,r);return this}if(!e){var a=t.pipes;var n=t.pipesCount;t.pipes=null;t.pipesCount=0;t.flowing=false;for(var i=0;i<n;i++){a[i].emit("unpipe",this,{hasUnpiped:false})}return this}var o=W(t.pipes,e);if(o===-1)return this;t.pipes.splice(o,1);t.pipesCount-=1;if(t.pipesCount===1)t.pipes=t.pipes[0];e.emit("unpipe",this,r);return this};A.prototype.on=function(e,t){var r=n.prototype.on.call(this,e,t);var a=this._readableState;if(e==="data"){a.readableListening=this.listenerCount("readable")>0;if(a.flowing!==false)this.resume()}else if(e==="readable"){if(!a.endEmitted&&!a.readableListening){a.readableListening=a.needReadable=true;a.flowing=false;a.emittedReadable=false;g("on readable",a.length,a.reading);if(a.length){P(this)}else if(!a.reading){$.nextTick(H,this)}}}return r};A.prototype.addListener=A.prototype.on;A.prototype.removeListener=function(e,t){var r=n.prototype.removeListener.call(this,e,t);if(e==="readable"){$.nextTick(j,this)}return r};A.prototype.removeAllListeners=function(e){var t=n.prototype.removeAllListeners.apply(this,arguments);if(e==="readable"||e===undefined){$.nextTick(j,this)}return t};function j(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0;if(t.resumeScheduled&&!t.paused){t.flowing=true}else if(e.listenerCount("data")>0){e.resume()}}function H(e){g("readable nexttick read 0");e.read(0)}A.prototype.resume=function(){var e=this._readableState;if(!e.flowing){g("resume");e.flowing=!e.readableListening;B(this,e)}e.paused=false;return this};function B(e,t){if(!t.resumeScheduled){t.resumeScheduled=true;$.nextTick(q,e,t)}}function q(e,t){g("resume",t.reading);if(!t.reading){e.read(0)}t.resumeScheduled=false;e.emit("resume");U(e);if(t.flowing&&!t.reading)e.read(0)}A.prototype.pause=function(){g("call pause flowing=%j",this._readableState.flowing);if(this._readableState.flowing!==false){g("pause");this._readableState.flowing=false;this.emit("pause")}this._readableState.paused=true;return this};function U(e){var t=e._readableState;g("flow",t.flowing);while(t.flowing&&e.read()!==null){}}A.prototype.wrap=function(r){var a=this;var n=this._readableState;var i=false;r.on("end",function(){g("wrapped end");if(n.decoder&&!n.ended){var e=n.decoder.end();if(e&&e.length)a.push(e)}a.push(null)});r.on("data",function(e){g("wrapped data");if(n.decoder)e=n.decoder.write(e);if(n.objectMode&&(e===null||e===undefined))return;else if(!n.objectMode&&(!e||!e.length))return;var t=a.push(e);if(!t){i=true;r.pause()}});for(var e in r){if(this[e]===undefined&&typeof r[e]==="function"){this[e]=function e(t){return function e(){return r[t].apply(r,arguments)}}(e)}}for(var t=0;t<T.length;t++){r.on(T[t],this.emit.bind(this,T[t]))}this._read=function(e){g("wrapped _read",e);if(i){i=false;r.resume()}};return this};if(typeof Symbol==="function"){A.prototype[Symbol.asyncIterator]=function(){if(b===undefined){b=X("./internal/streams/async_iterator")}return b(this)}}Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:false,get:function e(){return this._readableState.highWaterMark}});Object.defineProperty(A.prototype,"readableBuffer",{enumerable:false,get:function e(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(A.prototype,"readableFlowing",{enumerable:false,get:function e(){return this._readableState.flowing},set:function e(t){if(this._readableState){this._readableState.flowing=t}}});A._fromList=Y;Object.defineProperty(A.prototype,"readableLength",{enumerable:false,get:function e(){return this._readableState.length}});function Y(e,t){if(t.length===0)return null;var r;if(t.objectMode)r=t.buffer.shift();else if(!e||e>=t.length){if(t.decoder)r=t.buffer.join("");else if(t.buffer.length===1)r=t.buffer.first();else r=t.buffer.concat(t.length);t.buffer.clear()}else{r=t.buffer.consume(e,t.decoder)}return r}function V(e){var t=e._readableState;g("endReadable",t.endEmitted);if(!t.endEmitted){t.ended=true;$.nextTick(G,t,e)}}function G(e,t){g("endReadableNT",e.endEmitted,e.length);if(!e.endEmitted&&e.length===0){e.endEmitted=true;t.readable=false;t.emit("end");if(e.autoDestroy){var r=t._writableState;if(!r||r.autoDestroy&&r.finished){t.destroy()}}}}if(typeof Symbol==="function"){A.from=function(e,t){if(_===undefined){_=X("./internal/streams/from")}return _(A,e,t)}}function W(e,t){for(var r=0,a=e.length;r<a;r++){if(e[r]===t)return r}return-1}}).call(this)}).call(this,X("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../errors":99,"./_stream_duplex":100,"./internal/streams/async_iterator":105,"./internal/streams/buffer_list":106,"./internal/streams/destroy":107,"./internal/streams/from":109,"./internal/streams/state":111,"./internal/streams/stream":112,_process:96,buffer:28,events:27,inherits:65,"string_decoder/":113,util:26}],103:[function(e,t,r){"use strict";t.exports=c;var a=e("../errors").codes,n=a.ERR_METHOD_NOT_IMPLEMENTED,i=a.ERR_MULTIPLE_CALLBACK,o=a.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=a.ERR_TRANSFORM_WITH_LENGTH_0;var l=e("./_stream_duplex");e("inherits")(c,l);function u(e,t){var r=this._transformState;r.transforming=false;var a=r.writecb;if(a===null){return this.emit("error",new i)}r.writechunk=null;r.writecb=null;if(t!=null)this.push(t);a(e);var n=this._readableState;n.reading=false;if(n.needReadable||n.length<n.highWaterMark){this._read(n.highWaterMark)}}function c(e){if(!(this instanceof c))return new c(e);l.call(this,e);this._transformState={afterTransform:u.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(e){if(typeof e.transform==="function")this._transform=e.transform;if(typeof e.flush==="function")this._flush=e.flush}this.on("prefinish",f)}function f(){var r=this;if(typeof this._flush==="function"&&!this._readableState.destroyed){this._flush(function(e,t){d(r,e,t)})}else{d(this,null,null)}}c.prototype.push=function(e,t){this._transformState.needTransform=false;return l.prototype.push.call(this,e,t)};c.prototype._transform=function(e,t,r){r(new n("_transform()"))};c.prototype._write=function(e,t,r){var a=this._transformState;a.writecb=r;a.writechunk=e;a.writeencoding=t;if(!a.transforming){var n=this._readableState;if(a.needTransform||n.needReadable||n.length<n.highWaterMark)this._read(n.highWaterMark)}};c.prototype._read=function(e){var t=this._transformState;if(t.writechunk!==null&&!t.transforming){t.transforming=true;this._transform(t.writechunk,t.writeencoding,t.afterTransform)}else{t.needTransform=true}};c.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,function(e){t(e)})};function d(e,t,r){if(t)return e.emit("error",t);if(r!=null)e.push(r);if(e._writableState.length)throw new s;if(e._transformState.transforming)throw new o;return e.push(null)}},{"../errors":99,"./_stream_duplex":100,inherits:65}],104:[function(V,G,e){(function(U,Y){(function(){"use strict";G.exports=M;function e(e,t,r){this.chunk=e;this.encoding=t;this.callback=r;this.next=null}function d(e){var t=this;this.next=null;this.entry=null;this.finish=function(){q(t,e)}}var n;M.WritableState=T;var t={deprecate:V("util-deprecate")};var r=V("./internal/streams/stream");var o=V("buffer").Buffer;var a=Y.Uint8Array||function(){};function s(e){return o.from(e)}function l(e){return o.isBuffer(e)||e instanceof a}var i=V("./internal/streams/destroy");var u=V("./internal/streams/state"),c=u.getHighWaterMark;var f=V("../errors").codes,v=f.ERR_INVALID_ARG_TYPE,p=f.ERR_METHOD_NOT_IMPLEMENTED,h=f.ERR_MULTIPLE_CALLBACK,m=f.ERR_STREAM_CANNOT_PIPE,g=f.ERR_STREAM_DESTROYED,y=f.ERR_STREAM_NULL_VALUES,x=f.ERR_STREAM_WRITE_AFTER_END,b=f.ERR_UNKNOWN_ENCODING;var _=i.errorOrDestroy;V("inherits")(M,r);function w(){}function T(e,t,r){n=n||V("./_stream_duplex");e=e||{};if(typeof r!=="boolean")r=t instanceof n;this.objectMode=!!e.objectMode;if(r)this.objectMode=this.objectMode||!!e.writableObjectMode;this.highWaterMark=c(this,e,"writableHighWaterMark",r);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var a=e.decodeStrings===false;this.decodeStrings=!a;this.defaultEncoding=e.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(e){I(t,e)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.emitClose=e.emitClose!==false;this.autoDestroy=!!e.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new d(this)}T.prototype.getBuffer=function e(){var t=this.bufferedRequest;var r=[];while(t){r.push(t);t=t.next}return r};(function(){try{Object.defineProperty(T.prototype,"buffer",{get:t.deprecate(function e(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}})();var k;if(typeof Symbol==="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==="function"){k=Function.prototype[Symbol.hasInstance];Object.defineProperty(M,Symbol.hasInstance,{value:function e(t){if(k.call(this,t))return true;if(this!==M)return false;return t&&t._writableState instanceof T}})}else{k=function e(t){return t instanceof this}}function M(e){n=n||V("./_stream_duplex");var t=this instanceof n;if(!t&&!k.call(M,this))return new M(e);this._writableState=new T(e,this,t);this.writable=true;if(e){if(typeof e.write==="function")this._write=e.write;if(typeof e.writev==="function")this._writev=e.writev;if(typeof e.destroy==="function")this._destroy=e.destroy;if(typeof e.final==="function")this._final=e.final}r.call(this)}M.prototype.pipe=function(){_(this,new m)};function A(e,t){var r=new x;_(e,r);U.nextTick(t,r)}function S(e,t,r,a){var n;if(r===null){n=new y}else if(typeof r!=="string"&&!t.objectMode){n=new v("chunk",["string","Buffer"],r)}if(n){_(e,n);U.nextTick(a,n);return false}return true}M.prototype.write=function(e,t,r){var a=this._writableState;var n=false;var i=!a.objectMode&&l(e);if(i&&!o.isBuffer(e)){e=s(e)}if(typeof t==="function"){r=t;t=null}if(i)t="buffer";else if(!t)t=a.defaultEncoding;if(typeof r!=="function")r=w;if(a.ending)A(this,r);else if(i||S(this,a,e,r)){a.pendingcb++;n=L(this,a,i,e,t,r)}return n};M.prototype.cork=function(){this._writableState.corked++};M.prototype.uncork=function(){var e=this._writableState;if(e.corked){e.corked--;if(!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest)N(this,e)}};M.prototype.setDefaultEncoding=function e(t){if(typeof t==="string")t=t.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new b(t);this._writableState.defaultEncoding=t;return this};Object.defineProperty(M.prototype,"writableBuffer",{enumerable:false,get:function e(){return this._writableState&&this._writableState.getBuffer()}});function E(e,t,r){if(!e.objectMode&&e.decodeStrings!==false&&typeof t==="string"){t=o.from(t,r)}return t}Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:false,get:function e(){return this._writableState.highWaterMark}});function L(e,t,r,a,n,i){if(!r){var o=E(t,a,n);if(a!==o){r=true;n="buffer";a=o}}var s=t.objectMode?1:a.length;t.length+=s;var l=t.length<t.highWaterMark;if(!l)t.needDrain=true;if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:a,encoding:n,isBuf:r,callback:i,next:null};if(u){u.next=t.lastBufferedRequest}else{t.bufferedRequest=t.lastBufferedRequest}t.bufferedRequestCount+=1}else{C(e,t,false,s,a,n,i)}return l}function C(e,t,r,a,n,i,o){t.writelen=a;t.writecb=o;t.writing=true;t.sync=true;if(t.destroyed)t.onwrite(new g("write"));else if(r)e._writev(n,t.onwrite);else e._write(n,i,t.onwrite);t.sync=false}function D(e,t,r,a,n){--t.pendingcb;if(r){U.nextTick(n,a);U.nextTick(H,e,t);e._writableState.errorEmitted=true;_(e,a)}else{n(a);e._writableState.errorEmitted=true;_(e,a);H(e,t)}}function O(e){e.writing=false;e.writecb=null;e.length-=e.writelen;e.writelen=0}function I(e,t){var r=e._writableState;var a=r.sync;var n=r.writecb;if(typeof n!=="function")throw new h;O(r);if(t)D(e,r,a,t,n);else{var i=z(r)||e.destroyed;if(!i&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest){N(e,r)}if(a){U.nextTick(P,e,r,i,n)}else{P(e,r,i,n)}}}function P(e,t,r,a){if(!r)R(e,t);t.pendingcb--;a();H(e,t)}function R(e,t){if(t.length===0&&t.needDrain){t.needDrain=false;e.emit("drain")}}function N(e,t){t.bufferProcessing=true;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var a=t.bufferedRequestCount;var n=new Array(a);var i=t.corkedRequestsFree;i.entry=r;var o=0;var s=true;while(r){n[o]=r;if(!r.isBuf)s=false;r=r.next;o+=1}n.allBuffers=s;C(e,t,true,t.length,n,"",i.finish);t.pendingcb++;t.lastBufferedRequest=null;if(i.next){t.corkedRequestsFree=i.next;i.next=null}else{t.corkedRequestsFree=new d(t)}t.bufferedRequestCount=0}else{while(r){var l=r.chunk;var u=r.encoding;var c=r.callback;var f=t.objectMode?1:l.length;C(e,t,false,f,l,u,c);r=r.next;t.bufferedRequestCount--;if(t.writing){break}}if(r===null)t.lastBufferedRequest=null}t.bufferedRequest=r;t.bufferProcessing=false}M.prototype._write=function(e,t,r){r(new p("_write()"))};M.prototype._writev=null;M.prototype.end=function(e,t,r){var a=this._writableState;if(typeof e==="function"){r=e;e=null;t=null}else if(typeof t==="function"){r=t;t=null}if(e!==null&&e!==undefined)this.write(e,t);if(a.corked){a.corked=1;this.uncork()}if(!a.ending)B(this,a,r);return this};Object.defineProperty(M.prototype,"writableLength",{enumerable:false,get:function e(){return this._writableState.length}});function z(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function F(t,r){t._final(function(e){r.pendingcb--;if(e){_(t,e)}r.prefinished=true;t.emit("prefinish");H(t,r)})}function j(e,t){if(!t.prefinished&&!t.finalCalled){if(typeof e._final==="function"&&!t.destroyed){t.pendingcb++;t.finalCalled=true;U.nextTick(F,e,t)}else{t.prefinished=true;e.emit("prefinish")}}}function H(e,t){var r=z(t);if(r){j(e,t);if(t.pendingcb===0){t.finished=true;e.emit("finish");if(t.autoDestroy){var a=e._readableState;if(!a||a.autoDestroy&&a.endEmitted){e.destroy()}}}}return r}function B(e,t,r){t.ending=true;H(e,t);if(r){if(t.finished)U.nextTick(r);else e.once("finish",r)}t.ended=true;e.writable=false}function q(e,t,r){var a=e.entry;e.entry=null;while(a){var n=a.callback;t.pendingcb--;n(r);a=a.next}t.corkedRequestsFree.next=e}Object.defineProperty(M.prototype,"destroyed",{enumerable:false,get:function e(){if(this._writableState===undefined){return false}return this._writableState.destroyed},set:function e(t){if(!this._writableState){return}this._writableState.destroyed=t}});M.prototype.destroy=i.destroy;M.prototype._undestroy=i.undestroy;M.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,V("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../errors":99,"./_stream_duplex":100,"./internal/streams/destroy":107,"./internal/streams/state":111,"./internal/streams/stream":112,_process:96,buffer:28,inherits:65,"util-deprecate":120}],105:[function(y,x,e){(function(g){(function(){"use strict";var e;function a(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var i=y("./end-of-stream");var o=Symbol("lastResolve");var s=Symbol("lastReject");var l=Symbol("error");var u=Symbol("ended");var c=Symbol("lastPromise");var f=Symbol("handlePromise");var d=Symbol("stream");function v(e,t){return{value:e,done:t}}function t(e){var t=e[o];if(t!==null){var r=e[d].read();if(r!==null){e[c]=null;e[o]=null;e[s]=null;t(v(r,false))}}}function p(e){g.nextTick(t,e)}function h(r,a){return function(e,t){r.then(function(){if(a[u]){e(v(undefined,true));return}a[f](e,t)},t)}}var r=Object.getPrototypeOf(function(){});var m=Object.setPrototypeOf((e={get stream(){return this[d]},next:function e(){var r=this;var t=this[l];if(t!==null){return Promise.reject(t)}if(this[u]){return Promise.resolve(v(undefined,true))}if(this[d].destroyed){return new Promise(function(e,t){g.nextTick(function(){if(r[l]){t(r[l])}else{e(v(undefined,true))}})})}var a=this[c];var n;if(a){n=new Promise(h(a,this))}else{var i=this[d].read();if(i!==null){return Promise.resolve(v(i,false))}n=new Promise(this[f])}this[c]=n;return n}},a(e,Symbol.asyncIterator,function(){return this}),a(e,"return",function e(){var a=this;return new Promise(function(t,r){a[d].destroy(null,function(e){if(e){r(e);return}t(v(undefined,true))})})}),e),r);var n=function e(t){var r;var n=Object.create(m,(r={},a(r,d,{value:t,writable:true}),a(r,o,{value:null,writable:true}),a(r,s,{value:null,writable:true}),a(r,l,{value:null,writable:true}),a(r,u,{value:t._readableState.endEmitted,writable:true}),a(r,f,{value:function e(t,r){var a=n[d].read();if(a){n[c]=null;n[o]=null;n[s]=null;t(v(a,false))}else{n[o]=t;n[s]=r}},writable:true}),r));n[c]=null;i(t,function(e){if(e&&e.code!=="ERR_STREAM_PREMATURE_CLOSE"){var t=n[s];if(t!==null){n[c]=null;n[o]=null;n[s]=null;t(e)}n[l]=e;return}var r=n[o];if(r!==null){n[c]=null;n[o]=null;n[s]=null;r(v(undefined,true))}n[u]=true});t.on("readable",p.bind(null,n));return n};x.exports=n}).call(this)}).call(this,y("_process"))},{"./end-of-stream":108,_process:96}],106:[function(e,t,r){"use strict";function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);if(e)a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable});r.push.apply(r,a)}return r}function n(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};if(e%2){a(Object(r),true).forEach(function(e){i(t,e,r[e])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))}else{a(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}}return t}function i(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}function l(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}var u=e("buffer"),c=u.Buffer;var f=e("util"),d=f.inspect;var v=d&&d.custom||"inspect";function p(e,t,r){c.prototype.copy.call(e,t,r)}t.exports=function(){function e(){o(this,e);this.head=null;this.tail=null;this.length=0}l(e,[{key:"push",value:function e(t){var r={data:t,next:null};if(this.length>0)this.tail.next=r;else this.head=r;this.tail=r;++this.length}},{key:"unshift",value:function e(t){var r={data:t,next:this.head};if(this.length===0)this.tail=r;this.head=r;++this.length}},{key:"shift",value:function e(){if(this.length===0)return;var t=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return t}},{key:"clear",value:function e(){this.head=this.tail=null;this.length=0}},{key:"join",value:function e(t){if(this.length===0)return"";var r=this.head;var a=""+r.data;while(r=r.next){a+=t+r.data}return a}},{key:"concat",value:function e(t){if(this.length===0)return c.alloc(0);var r=c.allocUnsafe(t>>>0);var a=this.head;var n=0;while(a){p(a.data,r,n);n+=a.data.length;a=a.next}return r}},{key:"consume",value:function e(t,r){var a;if(t<this.head.data.length){a=this.head.data.slice(0,t);this.head.data=this.head.data.slice(t)}else if(t===this.head.data.length){a=this.shift()}else{a=r?this._getString(t):this._getBuffer(t)}return a}},{key:"first",value:function e(){return this.head.data}},{key:"_getString",value:function e(t){var r=this.head;var a=1;var n=r.data;t-=n.length;while(r=r.next){var i=r.data;var o=t>i.length?i.length:t;if(o===i.length)n+=i;else n+=i.slice(0,t);t-=o;if(t===0){if(o===i.length){++a;if(r.next)this.head=r.next;else this.head=this.tail=null}else{this.head=r;r.data=i.slice(o)}break}++a}this.length-=a;return n}},{key:"_getBuffer",value:function e(t){var r=c.allocUnsafe(t);var a=this.head;var n=1;a.data.copy(r);t-=a.data.length;while(a=a.next){var i=a.data;var o=t>i.length?i.length:t;i.copy(r,r.length-t,0,o);t-=o;if(t===0){if(o===i.length){++n;if(a.next)this.head=a.next;else this.head=this.tail=null}else{this.head=a;a.data=i.slice(o)}break}++n}this.length-=n;return r}},{key:v,value:function e(t,r){return d(this,n({},r,{depth:0,customInspect:false}))}}]);return e}()},{buffer:28,util:26}],107:[function(e,a,t){(function(l){(function(){"use strict";function e(e,t){var r=this;var a=this._readableState&&this._readableState.destroyed;var n=this._writableState&&this._writableState.destroyed;if(a||n){if(t){t(e)}else if(e){if(!this._writableState){l.nextTick(s,this,e)}else if(!this._writableState.errorEmitted){this._writableState.errorEmitted=true;l.nextTick(s,this,e)}}return this}if(this._readableState){this._readableState.destroyed=true}if(this._writableState){this._writableState.destroyed=true}this._destroy(e||null,function(e){if(!t&&e){if(!r._writableState){l.nextTick(i,r,e)}else if(!r._writableState.errorEmitted){r._writableState.errorEmitted=true;l.nextTick(i,r,e)}else{l.nextTick(o,r)}}else if(t){l.nextTick(o,r);t(e)}else{l.nextTick(o,r)}});return this}function i(e,t){s(e,t);o(e)}function o(e){if(e._writableState&&!e._writableState.emitClose)return;if(e._readableState&&!e._readableState.emitClose)return;e.emit("close")}function t(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finalCalled=false;this._writableState.prefinished=false;this._writableState.finished=false;this._writableState.errorEmitted=false}}function s(e,t){e.emit("error",t)}function r(e,t){var r=e._readableState;var a=e._writableState;if(r&&r.autoDestroy||a&&a.autoDestroy)e.destroy(t);else e.emit("error",t)}a.exports={destroy:e,undestroy:t,errorOrDestroy:r}}).call(this)}).call(this,e("_process"))},{_process:96}],108:[function(e,t,r){"use strict";var v=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function p(a){var n=false;return function(){if(n)return;n=true;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}a.apply(this,t)}}function h(){}function m(e){return e.setHeader&&typeof e.abort==="function"}function g(r,e,a){if(typeof e==="function")return g(r,null,e);if(!e)e={};a=p(a||h);var n=e.readable||e.readable!==false&&r.readable;var i=e.writable||e.writable!==false&&r.writable;var t=function e(){if(!r.writable)s()};var o=r._writableState&&r._writableState.finished;var s=function e(){i=false;o=true;if(!n)a.call(r)};var l=r._readableState&&r._readableState.endEmitted;var u=function e(){n=false;l=true;if(!i)a.call(r)};var c=function e(t){a.call(r,t)};var f=function e(){var t;if(n&&!l){if(!r._readableState||!r._readableState.ended)t=new v;return a.call(r,t)}if(i&&!o){if(!r._writableState||!r._writableState.ended)t=new v;return a.call(r,t)}};var d=function e(){r.req.on("finish",s)};if(m(r)){r.on("complete",s);r.on("abort",f);if(r.req)d();else r.on("request",d)}else if(i&&!r._writableState){r.on("end",t);r.on("close",t)}r.on("end",u);r.on("finish",s);if(e.error!==false)r.on("error",c);r.on("close",f);return function(){r.removeListener("complete",s);r.removeListener("abort",f);r.removeListener("request",d);if(r.req)r.req.removeListener("finish",s);r.removeListener("end",t);r.removeListener("close",t);r.removeListener("finish",s);r.removeListener("end",u);r.removeListener("error",c);r.removeListener("close",f)}}t.exports=g},{"../../../errors":99}],109:[function(e,t,r){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],110:[function(o,e,t){"use strict";var s;function l(e){var t=false;return function(){if(t)return;t=true;e.apply(void 0,arguments)}}var r=o("../../../errors").codes,a=r.ERR_MISSING_ARGS,u=r.ERR_STREAM_DESTROYED;function n(e){if(e)throw e}function c(e){return e.setHeader&&typeof e.abort==="function"}function f(t,e,r,a){a=l(a);var n=false;t.on("close",function(){n=true});if(s===undefined)s=o("./end-of-stream");s(t,{readable:e,writable:r},function(e){if(e)return a(e);n=true;a()});var i=false;return function(e){if(n)return;if(i)return;i=true;if(c(t))return t.abort();if(typeof t.destroy==="function")return t.destroy();a(e||new u("pipe"))}}function d(e){e()}function v(e,t){return e.pipe(t)}function p(e){if(!e.length)return n;if(typeof e[e.length-1]!=="function")return n;return e.pop()}function i(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++){n[t]=arguments[t]}var i=p(n);if(Array.isArray(n[0]))n=n[0];if(n.length<2){throw new a("streams")}var o;var s=n.map(function(e,t){var r=t<n.length-1;var a=t>0;return f(e,r,a,function(e){if(!o)o=e;if(e)s.forEach(d);if(r)return;s.forEach(d);i(o)})});return n.reduce(v)}e.exports=i},{"../../../errors":99,"./end-of-stream":108}],111:[function(e,t,r){"use strict";var o=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;function s(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function a(e,t,r,a){var n=s(t,a,r);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var i=a?r:"highWaterMark";throw new o(i,n)}return Math.floor(n)}return e.objectMode?16:16*1024}t.exports={getHighWaterMark:a}},{"../../../errors":99}],112:[function(e,t,r){t.exports=e("events").EventEmitter},{events:27}],113:[function(e,t,r){"use strict";var a=e("safe-buffer").Buffer;var n=a.isEncoding||function(e){e=""+e;switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function i(e){if(!e)return"utf8";var t;while(true){switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase();t=true}}}function o(e){var t=i(e);if(typeof t!=="string"&&(a.isEncoding===n||!n(e)))throw new Error("Unknown encoding: "+e);return t||e}r.StringDecoder=s;function s(e){this.encoding=o(e);var t;switch(this.encoding){case"utf16le":this.text=p;this.end=h;t=4;break;case"utf8":this.fillLast=f;t=4;break;case"base64":this.text=m;this.end=g;t=3;break;default:this.write=y;this.end=x;return}this.lastNeed=0;this.lastTotal=0;this.lastChar=a.allocUnsafe(t)}s.prototype.write=function(e){if(e.length===0)return"";var t;var r;if(this.lastNeed){t=this.fillLast(e);if(t===undefined)return"";r=this.lastNeed;this.lastNeed=0}else{r=0}if(r<e.length)return t?t+this.text(e,r):this.text(e,r);return t||""};s.prototype.end=v;s.prototype.text=d;s.prototype.fillLast=function(e){if(this.lastNeed<=e.length){e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length);this.lastNeed-=e.length};function l(e){if(e<=127)return 0;else if(e>>5===6)return 2;else if(e>>4===14)return 3;else if(e>>3===30)return 4;return e>>6===2?-1:-2}function u(e,t,r){var a=t.length-1;if(a<r)return 0;var n=l(t[a]);if(n>=0){if(n>0)e.lastNeed=n-1;return n}if(--a<r||n===-2)return 0;n=l(t[a]);if(n>=0){if(n>0)e.lastNeed=n-2;return n}if(--a<r||n===-2)return 0;n=l(t[a]);if(n>=0){if(n>0){if(n===2)n=0;else e.lastNeed=n-3}return n}return 0}function c(e,t,r){if((t[0]&192)!==128){e.lastNeed=0;return"�"}if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128){e.lastNeed=1;return"�"}if(e.lastNeed>2&&t.length>2){if((t[2]&192)!==128){e.lastNeed=2;return"�"}}}}function f(e){var t=this.lastTotal-this.lastNeed;var r=c(this,e,t);if(r!==undefined)return r;if(this.lastNeed<=e.length){e.copy(this.lastChar,t,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}e.copy(this.lastChar,t,0,e.length);this.lastNeed-=e.length}function d(e,t){var r=u(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var a=e.length-(r-this.lastNeed);e.copy(this.lastChar,0,a);return e.toString("utf8",t,a)}function v(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed)return t+"�";return t}function p(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var a=r.charCodeAt(r.length-1);if(a>=55296&&a<=56319){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=e[e.length-2];this.lastChar[1]=e[e.length-1];return r.slice(0,-1)}}return r}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=e[e.length-1];return e.toString("utf16le",t,e.length-1)}function h(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function m(e,t){var r=(e.length-t)%3;if(r===0)return e.toString("base64",t);this.lastNeed=3-r;this.lastTotal=3;if(r===1){this.lastChar[0]=e[e.length-1]}else{this.lastChar[0]=e[e.length-2];this.lastChar[1]=e[e.length-1]}return e.toString("base64",t,e.length-r)}function g(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed)return t+this.lastChar.toString("base64",0,3-this.lastNeed);return t}function y(e){return e.toString(this.encoding)}function x(e){return e&&e.length?this.write(e):""}},{"safe-buffer":97}],114:[function(t,x,e){(function(e,y){(function(){var r=t("assert");var l=t("debug")("stream-parser");x.exports=e;var u=-1;var c=0;var a=1;var f=2;function e(e){var t=e&&"function"==typeof e._transform;var r=e&&"function"==typeof e._write;if(!t&&!r)throw new Error("must pass a Writable or Transform stream in");l("extending Parser into stream");e._bytes=i;e._skipBytes=o;if(t)e._passthrough=s;if(t){e._transform=v}else{e._write=d}}function n(e){l("initializing parser stream");e._parserBytesLeft=0;e._parserBuffers=[];e._parserBuffered=0;e._parserState=u;e._parserCallback=null;if("function"==typeof e.push){e._parserOutput=e.push.bind(e)}e._parserInit=true}function i(e,t){r(!this._parserCallback,'there is already a "callback" set!');r(isFinite(e)&&e>0,'can only buffer a finite number of bytes > 0, got "'+e+'"');if(!this._parserInit)n(this);l("buffering %o bytes",e);this._parserBytesLeft=e;this._parserCallback=t;this._parserState=c}function o(e,t){r(!this._parserCallback,'there is already a "callback" set!');r(e>0,'can only skip > 0 bytes, got "'+e+'"');if(!this._parserInit)n(this);l("skipping %o bytes",e);this._parserBytesLeft=e;this._parserCallback=t;this._parserState=a}function s(e,t){r(!this._parserCallback,'There is already a "callback" set!');r(e>0,'can only pass through > 0 bytes, got "'+e+'"');if(!this._parserInit)n(this);l("passing through %o bytes",e);this._parserBytesLeft=e;this._parserCallback=t;this._parserState=f}function d(e,t,r){if(!this._parserInit)n(this);l("write(%o bytes)",e.length);if("function"==typeof t)r=t;m(this,e,null,r)}function v(e,t,r){if(!this._parserInit)n(this);l("transform(%o bytes)",e.length);if("function"!=typeof t){t=this._parserOutput}m(this,e,t,r)}function p(r,a,n,i){if(r._parserBytesLeft<=0){return i(new Error("got data but not currently parsing anything"))}if(a.length<=r._parserBytesLeft){return function(){return h(r,a,n,i)}}else{return function(){var t=a.slice(0,r._parserBytesLeft);return h(r,t,n,function(e){if(e)return i(e);if(a.length>t.length){return function(){return p(r,a.slice(t.length),n,i)}}})}}}function h(e,t,r,a){e._parserBytesLeft-=t.length;l("%o bytes left for stream piece",e._parserBytesLeft);if(e._parserState===c){e._parserBuffers.push(t);e._parserBuffered+=t.length}else if(e._parserState===f){r(t)}if(0===e._parserBytesLeft){var n=e._parserCallback;if(n&&e._parserState===c&&e._parserBuffers.length>1){t=y.concat(e._parserBuffers,e._parserBuffered)}if(e._parserState!==c){t=null}e._parserCallback=null;e._parserBuffered=0;e._parserState=u;e._parserBuffers.splice(0);if(n){var i=[];if(t){i.push(t)}else{}if(r){i.push(r)}var o=n.length>i.length;if(o){i.push(g(a))}var s=n.apply(e,i);if(!o||a===s)return a}}else{return a}}var m=g(p);function g(t){return function(){var e=t.apply(this,arguments);while("function"==typeof e){e=e()}return e}}}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{_process:96,assert:21,buffer:28,debug:115}],115:[function(s,l,u){(function(o){(function(){u=l.exports=s("./debug");u.log=r;u.formatArgs=t;u.save=a;u.load=n;u.useColors=e;u.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:i();u.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function e(){if(typeof window!=="undefined"&&window.process&&window.process.type==="renderer"){return true}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}u.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}};function t(e){var t=this.useColors;e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+u.humanize(this.diff);if(!t)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var a=0;var n=0;e[0].replace(/%[a-zA-Z%]/g,function(e){if("%%"===e)return;a++;if("%c"===e){n=a}});e.splice(n,0,r)}function r(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{if(null==e){u.storage.removeItem("debug")}else{u.storage.debug=e}}catch(e){}}function n(){var e;try{e=u.storage.debug}catch(e){}if(!e&&typeof o!=="undefined"&&"env"in o){e=o.env.DEBUG}return e}u.enable(n());function i(){try{return window.localStorage}catch(e){}}}).call(this)}).call(this,s("_process"))},{"./debug":116,_process:96}],116:[function(e,t,l){l=t.exports=a.debug=a["default"]=a;l.coerce=s;l.disable=i;l.enable=n;l.enabled=o;l.humanize=e("ms");l.names=[];l.skips=[];l.formatters={};var u;function r(e){var t=0,r;for(r in e){t=(t<<5)-t+e.charCodeAt(r);t|=0}return l.colors[Math.abs(t)%l.colors.length]}function a(e){function s(){if(!s.enabled)return;var n=s;var e=+new Date;var t=e-(u||e);n.diff=t;n.prev=u;n.curr=e;u=e;var i=new Array(arguments.length);for(var r=0;r<i.length;r++){i[r]=arguments[r]}i[0]=l.coerce(i[0]);if("string"!==typeof i[0]){i.unshift("%O")}var o=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(e,t){if(e==="%%")return e;o++;var r=l.formatters[t];if("function"===typeof r){var a=i[o];e=r.call(n,a);i.splice(o,1);o--}return e});l.formatArgs.call(n,i);var a=s.log||l.log||console.log.bind(console);a.apply(n,i)}s.namespace=e;s.enabled=l.enabled(e);s.useColors=l.useColors();s.color=r(e);if("function"===typeof l.init){l.init(s)}return s}function n(e){l.save(e);l.names=[];l.skips=[];var t=(typeof e==="string"?e:"").split(/[\s,]+/);var r=t.length;for(var a=0;a<r;a++){if(!t[a])continue;e=t[a].replace(/\*/g,".*?");if(e[0]==="-"){l.skips.push(new RegExp("^"+e.substr(1)+"$"))}else{l.names.push(new RegExp("^"+e+"$"))}}}function i(){l.enable("")}function o(e){var t,r;for(t=0,r=l.skips.length;t<r;t++){if(l.skips[t].test(e)){return false}}for(t=0,r=l.names.length;t<r;t++){if(l.names[t].test(e)){return true}}return false}function s(e){if(e instanceof Error)return e.stack||e.message;return e}},{ms:117}],117:[function(e,t,r){var n=1e3;var i=n*60;var o=i*60;var s=o*24;var l=s*365.25;t.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0){return a(e)}else if(r==="number"&&isNaN(e)===false){return t.long?c(e):u(e)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function a(e){e=String(e);if(e.length>100){return}var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t){return}var r=parseFloat(t[1]);var a=(t[2]||"ms").toLowerCase();switch(a){case"years":case"year":case"yrs":case"yr":case"y":return r*l;case"days":case"day":case"d":return r*s;case"hours":case"hour":case"hrs":case"hr":case"h":return r*o;case"minutes":case"minute":case"mins":case"min":case"m":return r*i;case"seconds":case"second":case"secs":case"sec":case"s":return r*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return undefined}}function u(e){if(e>=s){return Math.round(e/s)+"d"}if(e>=o){return Math.round(e/o)+"h"}if(e>=i){return Math.round(e/i)+"m"}if(e>=n){return Math.round(e/n)+"s"}return e+"ms"}function c(e){return f(e,s,"day")||f(e,o,"hour")||f(e,i,"minute")||f(e,n,"second")||e+" ms"}function f(e,t,r){if(e<t){return}if(e<t*1.5){return Math.floor(e/t)+" "+r}return Math.ceil(e/t)+" "+r+"s"}},{}],118:[function(l,e,u){(function(a,s){(function(){var e=l("process/browser.js").nextTick;var t=Function.prototype.apply;var n=Array.prototype.slice;var i={};var o=0;u.setTimeout=function(){return new r(t.call(setTimeout,window,arguments),clearTimeout)};u.setInterval=function(){return new r(t.call(setInterval,window,arguments),clearInterval)};u.clearTimeout=u.clearInterval=function(e){e.close()};function r(e,t){this._id=e;this._clearFn=t}r.prototype.unref=r.prototype.ref=function(){};r.prototype.close=function(){this._clearFn.call(window,this._id)};u.enroll=function(e,t){clearTimeout(e._idleTimeoutId);e._idleTimeout=t};u.unenroll=function(e){clearTimeout(e._idleTimeoutId);e._idleTimeout=-1};u._unrefActive=u.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;if(e>=0){t._idleTimeoutId=setTimeout(function e(){if(t._onTimeout)t._onTimeout()},e)}};u.setImmediate=typeof a==="function"?a:function(t){var r=o++;var a=arguments.length<2?false:n.call(arguments,1);i[r]=true;e(function e(){if(i[r]){if(a){t.apply(null,a)}else{t.call(null)}u.clearImmediate(r)}});return r};u.clearImmediate=typeof s==="function"?s:function(e){delete i[e]}}).call(this)}).call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":96,timers:118}],119:[function(e,$,t){(function(d){var a=/^\s+/,n=/\s+$/,i=0,o=d.round,u=d.min,c=d.max,e=d.random;function f(e,t){e=e?e:"";t=t||{};if(e instanceof f){return e}if(!(this instanceof f)){return new f(e,t)}var r=s(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=o(100*this._a)/100,this._format=t.format||r.format;this._gradientType=t.gradientType;if(this._r<1){this._r=o(this._r)}if(this._g<1){this._g=o(this._g)}if(this._b<1){this._b=o(this._b)}this._ok=r.ok;this._tc_id=i++}f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb();var t,r,a,n,i,o;t=e.r/255;r=e.g/255;a=e.b/255;if(t<=.03928){n=t/12.92}else{n=d.pow((t+.055)/1.055,2.4)}if(r<=.03928){i=r/12.92}else{i=d.pow((r+.055)/1.055,2.4)}if(a<=.03928){o=a/12.92}else{o=d.pow((a+.055)/1.055,2.4)}return.2126*n+.7152*i+.0722*o},setAlpha:function(e){this._a=P(e);this._roundA=o(100*this._a)/100;return this},toHsv:function(){var e=h(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=h(this._r,this._g,this._b);var t=o(e.h*360),r=o(e.s*100),a=o(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+a+"%)":"hsva("+t+", "+r+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var e=v(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=v(this._r,this._g,this._b);var t=o(e.h*360),r=o(e.s*100),a=o(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+a+"%)":"hsla("+t+", "+r+"%, "+a+"%, "+this._roundA+")"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return r(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(R(this._r,255)*100)+"%",g:o(R(this._g,255)*100)+"%",b:o(R(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+o(R(this._r,255)*100)+"%, "+o(R(this._g,255)*100)+"%, "+o(R(this._b,255)*100)+"%)":"rgba("+o(R(this._r,255)*100)+"%, "+o(R(this._g,255)*100)+"%, "+o(R(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){if(this._a===0){return"transparent"}if(this._a<1){return false}return O[t(this._r,this._g,this._b,true)]||false},toFilter:function(e){var t="#"+g(this._r,this._g,this._b,this._a);var r=t;var a=this._gradientType?"GradientType = 1, ":"";if(e){var n=f(e);r="#"+g(n._r,n._g,n._b,n._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=false;var a=this._a<1&&this._a>=0;var n=!t&&a&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");if(n){if(e==="name"&&this._a===0){return this.toName()}return this.toRgbString()}if(e==="rgb"){r=this.toRgbString()}if(e==="prgb"){r=this.toPercentageRgbString()}if(e==="hex"||e==="hex6"){r=this.toHexString()}if(e==="hex3"){r=this.toHexString(true)}if(e==="hex4"){r=this.toHex8String(true)}if(e==="hex8"){r=this.toHex8String()}if(e==="name"){r=this.toName()}if(e==="hsl"){r=this.toHslString()}if(e==="hsv"){r=this.toHsvString()}return r||this.toHexString()},clone:function(){return f(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));this._r=r._r;this._g=r._g;this._b=r._b;this.setAlpha(r._a);return this},lighten:function(){return this._applyModification(_,arguments)},brighten:function(){return this._applyModification(w,arguments)},darken:function(){return this._applyModification(T,arguments)},desaturate:function(){return this._applyModification(y,arguments)},saturate:function(){return this._applyModification(x,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(k,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(L,arguments)},complement:function(){return this._applyCombination(M,arguments)},monochromatic:function(){return this._applyCombination(C,arguments)},splitcomplement:function(){return this._applyCombination(E,arguments)},triad:function(){return this._applyCombination(A,arguments)},tetrad:function(){return this._applyCombination(S,arguments)}};f.fromRatio=function(e,t){if(typeof e=="object"){var r={};for(var a in e){if(e.hasOwnProperty(a)){if(a==="a"){r[a]=e[a]}else{r[a]=B(e[a])}}}e=r}return f(e,t)};function s(e){var t={r:0,g:0,b:0};var r=1;var a=null;var n=null;var i=null;var o=false;var s=false;if(typeof e=="string"){e=G(e)}if(typeof e=="object"){if(V(e.r)&&V(e.g)&&V(e.b)){t=l(e.r,e.g,e.b);o=true;s=String(e.r).substr(-1)==="%"?"prgb":"rgb"}else if(V(e.h)&&V(e.s)&&V(e.v)){a=B(e.s);n=B(e.v);t=m(e.h,a,n);o=true;s="hsv"}else if(V(e.h)&&V(e.s)&&V(e.l)){a=B(e.s);i=B(e.l);t=p(e.h,a,i);o=true;s="hsl"}if(e.hasOwnProperty("a")){r=e.a}}r=P(r);return{ok:o,format:e.format||s,r:u(255,c(t.r,0)),g:u(255,c(t.g,0)),b:u(255,c(t.b,0)),a:r}}function l(e,t,r){return{r:R(e,255)*255,g:R(t,255)*255,b:R(r,255)*255}}function v(e,t,r){e=R(e,255);t=R(t,255);r=R(r,255);var a=c(e,t,r),n=u(e,t,r);var i,o,s=(a+n)/2;if(a==n){i=o=0}else{var l=a-n;o=s>.5?l/(2-a-n):l/(a+n);switch(a){case e:i=(t-r)/l+(t<r?6:0);break;case t:i=(r-e)/l+2;break;case r:i=(e-t)/l+4;break}i/=6}return{h:i,s:o,l:s}}function p(e,t,r){var a,n,i;e=R(e,360);t=R(t,100);r=R(r,100);function o(e,t,r){if(r<0)r+=1;if(r>1)r-=1;if(r<1/6)return e+(t-e)*6*r;if(r<1/2)return t;if(r<2/3)return e+(t-e)*(2/3-r)*6;return e}if(t===0){a=n=i=r}else{var s=r<.5?r*(1+t):r+t-r*t;var l=2*r-s;a=o(l,s,e+1/3);n=o(l,s,e);i=o(l,s,e-1/3)}return{r:a*255,g:n*255,b:i*255}}function h(e,t,r){e=R(e,255);t=R(t,255);r=R(r,255);var a=c(e,t,r),n=u(e,t,r);var i,o,s=a;var l=a-n;o=a===0?0:l/a;if(a==n){i=0}else{switch(a){case e:i=(t-r)/l+(t<r?6:0);break;case t:i=(r-e)/l+2;break;case r:i=(e-t)/l+4;break}i/=6}return{h:i,s:o,v:s}}function m(e,t,r){e=R(e,360)*6;t=R(t,100);r=R(r,100);var a=d.floor(e),n=e-a,i=r*(1-t),o=r*(1-n*t),s=r*(1-(1-n)*t),l=a%6,u=[r,o,i,i,s,r][l],c=[s,r,r,o,i,i][l],f=[i,i,s,r,r,o][l];return{r:u*255,g:c*255,b:f*255}}function t(e,t,r,a){var n=[H(o(e).toString(16)),H(o(t).toString(16)),H(o(r).toString(16))];if(a&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)){return n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0)}return n.join("")}function r(e,t,r,a,n){var i=[H(o(e).toString(16)),H(o(t).toString(16)),H(o(r).toString(16)),H(q(a))];if(n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)){return i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0)}return i.join("")}function g(e,t,r,a){var n=[H(q(a)),H(o(e).toString(16)),H(o(t).toString(16)),H(o(r).toString(16))];return n.join("")}f.equals=function(e,t){if(!e||!t){return false}return f(e).toRgbString()==f(t).toRgbString()};f.random=function(){return f.fromRatio({r:e(),g:e(),b:e()})};function y(e,t){t=t===0?0:t||10;var r=f(e).toHsl();r.s-=t/100;r.s=N(r.s);return f(r)}function x(e,t){t=t===0?0:t||10;var r=f(e).toHsl();r.s+=t/100;r.s=N(r.s);return f(r)}function b(e){return f(e).desaturate(100)}function _(e,t){t=t===0?0:t||10;var r=f(e).toHsl();r.l+=t/100;r.l=N(r.l);return f(r)}function w(e,t){t=t===0?0:t||10;var r=f(e).toRgb();r.r=c(0,u(255,r.r-o(255*-(t/100))));r.g=c(0,u(255,r.g-o(255*-(t/100))));r.b=c(0,u(255,r.b-o(255*-(t/100))));return f(r)}function T(e,t){t=t===0?0:t||10;var r=f(e).toHsl();r.l-=t/100;r.l=N(r.l);return f(r)}function k(e,t){var r=f(e).toHsl();var a=(r.h+t)%360;r.h=a<0?360+a:a;return f(r)}function M(e){var t=f(e).toHsl();t.h=(t.h+180)%360;return f(t)}function A(e){var t=f(e).toHsl();var r=t.h;return[f(e),f({h:(r+120)%360,s:t.s,l:t.l}),f({h:(r+240)%360,s:t.s,l:t.l})]}function S(e){var t=f(e).toHsl();var r=t.h;return[f(e),f({h:(r+90)%360,s:t.s,l:t.l}),f({h:(r+180)%360,s:t.s,l:t.l}),f({h:(r+270)%360,s:t.s,l:t.l})]}function E(e){var t=f(e).toHsl();var r=t.h;return[f(e),f({h:(r+72)%360,s:t.s,l:t.l}),f({h:(r+216)%360,s:t.s,l:t.l})]}function L(e,t,r){t=t||6;r=r||30;var a=f(e).toHsl();var n=360/r;var i=[f(e)];for(a.h=(a.h-(n*t>>1)+720)%360;--t;){a.h=(a.h+n)%360;i.push(f(a))}return i}function C(e,t){t=t||6;var r=f(e).toHsv();var a=r.h,n=r.s,i=r.v;var o=[];var s=1/t;while(t--){o.push(f({h:a,s:n,v:i}));i=(i+s)%1}return o}f.mix=function(e,t,r){r=r===0?0:r||50;var a=f(e).toRgb();var n=f(t).toRgb();var i=r/100;var o={r:(n.r-a.r)*i+a.r,g:(n.g-a.g)*i+a.g,b:(n.b-a.b)*i+a.b,a:(n.a-a.a)*i+a.a};return f(o)};f.readability=function(e,t){var r=f(e);var a=f(t);return(d.max(r.getLuminance(),a.getLuminance())+.05)/(d.min(r.getLuminance(),a.getLuminance())+.05)};f.isReadable=function(e,t,r){var a=f.readability(e,t);var n,i;i=false;n=W(r);switch(n.level+n.size){case"AAsmall":case"AAAlarge":i=a>=4.5;break;case"AAlarge":i=a>=3;break;case"AAAsmall":i=a>=7;break}return i};f.mostReadable=function(e,t,r){var a=null;var n=0;var i;var o,s,l;r=r||{};o=r.includeFallbackColors;s=r.level;l=r.size;for(var u=0;u<t.length;u++){i=f.readability(e,t[u]);if(i>n){n=i;a=f(t[u])}}if(f.isReadable(e,a,{level:s,size:l})||!o){return a}else{r.includeFallbackColors=false;return f.mostReadable(e,["#fff","#000"],r)}};var D=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var O=f.hexNames=I(D);function I(e){var t={};for(var r in e){if(e.hasOwnProperty(r)){t[e[r]]=r}}return t}function P(e){e=parseFloat(e);if(isNaN(e)||e<0||e>1){e=1}return e}function R(e,t){if(F(e)){e="100%"}var r=j(e);e=u(t,c(0,parseFloat(e)));if(r){e=parseInt(e*t,10)/100}if(d.abs(e-t)<1e-6){return 1}return e%t/parseFloat(t)}function N(e){return u(1,c(0,e))}function z(e){return parseInt(e,16)}function F(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function j(e){return typeof e==="string"&&e.indexOf("%")!=-1}function H(e){return e.length==1?"0"+e:""+e}function B(e){if(e<=1){e=e*100+"%"}return e}function q(e){return d.round(parseFloat(e)*255).toString(16)}function U(e){return z(e)/255}var Y=function(){var e="[-\\+]?\\d+%?";var t="[-\\+]?\\d*\\.\\d+%?";var r="(?:"+t+")|(?:"+e+")";var a="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";var n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+a),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+a),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+a),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function V(e){return!!Y.CSS_UNIT.exec(e)}function G(e){e=e.replace(a,"").replace(n,"").toLowerCase();var t=false;if(D[e]){e=D[e];t=true}else if(e=="transparent"){return{r:0,g:0,b:0,a:0,format:"name"}}var r;if(r=Y.rgb.exec(e)){return{r:r[1],g:r[2],b:r[3]}}if(r=Y.rgba.exec(e)){return{r:r[1],g:r[2],b:r[3],a:r[4]}}if(r=Y.hsl.exec(e)){return{h:r[1],s:r[2],l:r[3]}}if(r=Y.hsla.exec(e)){return{h:r[1],s:r[2],l:r[3],a:r[4]}}if(r=Y.hsv.exec(e)){return{h:r[1],s:r[2],v:r[3]}}if(r=Y.hsva.exec(e)){return{h:r[1],s:r[2],v:r[3],a:r[4]}}if(r=Y.hex8.exec(e)){return{r:z(r[1]),g:z(r[2]),b:z(r[3]),a:U(r[4]),format:t?"name":"hex8"}}if(r=Y.hex6.exec(e)){return{r:z(r[1]),g:z(r[2]),b:z(r[3]),format:t?"name":"hex"}}if(r=Y.hex4.exec(e)){return{r:z(r[1]+""+r[1]),g:z(r[2]+""+r[2]),b:z(r[3]+""+r[3]),a:U(r[4]+""+r[4]),format:t?"name":"hex8"}}if(r=Y.hex3.exec(e)){return{r:z(r[1]+""+r[1]),g:z(r[2]+""+r[2]),b:z(r[3]+""+r[3]),format:t?"name":"hex"}}return false}function W(e){var t,r;e=e||{level:"AA",size:"small"};t=(e.level||"AA").toUpperCase();r=(e.size||"small").toLowerCase();if(t!=="AA"&&t!=="AAA"){t="AA"}if(r!=="small"&&r!=="large"){r="small"}return{level:t,size:r}}if(typeof $!=="undefined"&&$.exports){$.exports=f}else if(typeof au==="function"&&au.amd){au(function(){return f})}else{window.tinycolor=f}})(Math)},{}],120:[function(e,t,r){(function(r){(function(){t.exports=e;function e(e,t){if(n("noDeprecation")){return e}var r=false;function a(){if(!r){if(n("throwDeprecation")){throw new Error(t)}else if(n("traceDeprecation")){console.trace(t)}else{console.warn(t)}r=true}return e.apply(this,arguments)}return a}function n(e){try{if(!r.localStorage)return false}catch(e){return false}var t=r.localStorage[e];if(null==t)return false;return String(t).toLowerCase()==="true"}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],121:[function(e,t,r){var c=e("../main");var a=e("object-assign");var f=c.instance();function d(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}d.prototype=new c.baseCalendar;a(d.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:false,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if(typeof e==="string"){var r=e.match(o);return r?r[0]:""}var a=this._validateYear(e);var n=e.month();var i=""+this.toChineseMonth(a,n);if(t&&i.length<2){i="0"+i}if(this.isIntercalaryMonth(a,n)){i+="i"}return i},monthNames:function(e){if(typeof e==="string"){var t=e.match(l);return t?t[0]:""}var r=this._validateYear(e);var a=e.month();var n=this.toChineseMonth(r,a);var i=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][n-1];if(this.isIntercalaryMonth(r,a)){i="闰"+i}return i},monthNamesShort:function(e){if(typeof e==="string"){var t=e.match(u);return t?t[0]:""}var r=this._validateYear(e);var a=e.month();var n=this.toChineseMonth(r,a);var i=["一","二","三","四","五","六","七","八","九","十","十一","十二"][n-1];if(this.isIntercalaryMonth(r,a)){i="闰"+i}return i},parseMonth:function(e,t){e=this._validateYear(e);var r=parseInt(t);var a;if(!isNaN(r)){var n=t[t.length-1];a=n==="i"||n==="I"}else{if(t[0]==="闰"){a=true;t=t.substring(1)}if(t[t.length-1]==="月"){t=t.substring(0,t.length-1)}r=1+["一","二","三","四","五","六","七","八","九","十","十一","十二"].indexOf(t)}var i=this.toMonthIndex(e,r,a);return i},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:false}},_validateYear:function(e,t){if(e.year){e=e.year()}if(typeof e!=="number"||e<1888||e>2111){throw t.replace(/\{0\}/,this.local.name)}return e},toMonthIndex:function(e,t,r){var a=this.intercalaryMonth(e);var n=r&&t!==a;if(n||t<1||t>12){throw c.local.invalidMonth.replace(/\{0\}/,this.local.name)}var i;if(!a){i=t-1}else if(!r&&t<=a){i=t-1}else{i=t}return i},toChineseMonth:function(e,t){if(e.year){e=e.year();t=e.month()}var r=this.intercalaryMonth(e);var a=r?12:11;if(t<0||t>a){throw c.local.invalidMonth.replace(/\{0\}/,this.local.name)}var n;if(!r){n=t+1}else if(t<r){n=t+1}else{n=t}return n},intercalaryMonth:function(e){e=this._validateYear(e);var t=w[e-w[0]];var r=t>>13;return r},isIntercalaryMonth:function(e,t){if(e.year){e=e.year();t=e.month()}var r=this.intercalaryMonth(e);return!!r&&r===t},leapYear:function(e){return this.intercalaryMonth(e)!==0},weekOfYear:function(e,t,r){var a=this._validateYear(e,c.local.invalidyear);var n=T[a-T[0]];var i=n>>9&4095;var o=n>>5&15;var s=n&31;var l;l=f.newDate(i,o,s);l.add(4-(l.dayOfWeek()||7),"d");var u=this.toJD(e,t,r)-l.toJD();return 1+Math.floor(u/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){if(e.year){t=e.month();e=e.year()}e=this._validateYear(e);var r=w[e-w[0]];var a=r>>13;var n=a?12:11;if(t>n){throw c.local.invalidMonth.replace(/\{0\}/,this.local.name)}var i=r&1<<12-t?30:29;return i},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,i,r,c.local.invalidDate);e=this._validateYear(a.year());t=a.month();r=a.day();var n=this.isIntercalaryMonth(e,t);var i=this.toChineseMonth(e,t);var o=v(e,i,r,n);return f.toJD(o.year,o.month,o.day)},fromJD:function(e){var t=f.fromJD(e);var r=n(t.year(),t.month(),t.day());var a=this.toMonthIndex(r.year,r.month,r.isIntercalary);return this.newDate(r.year,a,r.day)},fromString:function(e){var t=e.match(s);var r=this._validateYear(+t[1]);var a=+t[2];var n=!!t[3];var i=this.toMonthIndex(r,a,n);var o=+t[4];return this.newDate(r,i,o)},add:function(e,t,r){var a=e.year();var n=e.month();var i=this.isIntercalaryMonth(a,n);var o=this.toChineseMonth(a,n);var s=Object.getPrototypeOf(d.prototype).add.call(this,e,t,r);if(r==="y"){var l=s.year();var u=s.month();var c=this.isIntercalaryMonth(l,o);var f=i&&c?this.toMonthIndex(l,o,true):this.toMonthIndex(l,o,false);if(f!==u){s.month(f)}}return s}});var s=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m;var o=/^\d?\d[iI]?/m;var l=/^闰?十?[一二三四五六七八九]?月/m;var u=/^闰?十?[一二三四五六七八九]?/m;c.calendars.chinese=d;var w=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548];var T=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function n(e,t,r,a){var n;var i;if(typeof e==="object"){n=e;i=t||{}}else{var o=typeof e==="number"&&e>=1888&&e<=2111;if(!o)throw new Error("Solar year outside range 1888-2111");var s=typeof t==="number"&&t>=1&&t<=12;if(!s)throw new Error("Solar month outside range 1 - 12");var l=typeof r==="number"&&r>=1&&r<=31;if(!l)throw new Error("Solar day outside range 1 - 31");n={year:e,month:t,day:r};i=a||{}}var u=T[n.year-T[0]];var c=n.year<<9|n.month<<5|n.day;i.year=c>=u?n.year:n.year-1;u=T[i.year-T[0]];var f=u>>9&4095;var d=u>>5&15;var v=u&31;var p;var h=new Date(f,d-1,v);var m=new Date(n.year,n.month-1,n.day);p=Math.round((m-h)/(24*3600*1e3));var g=w[i.year-w[0]];var y;for(y=0;y<13;y++){var x=g&1<<12-y?30:29;if(p<x){break}p-=x}var b=g>>13;if(!b||y<b){i.isIntercalary=false;i.month=1+y}else if(y===b){i.isIntercalary=true;i.month=y}else{i.isIntercalary=false;i.month=y}i.day=1+p;return i}function v(e,t,r,a,n){var i;var o;if(typeof e==="object"){o=e;i=t||{}}else{var s=typeof e==="number"&&e>=1888&&e<=2111;if(!s)throw new Error("Lunar year outside range 1888-2111");var l=typeof t==="number"&&t>=1&&t<=12;if(!l)throw new Error("Lunar month outside range 1 - 12");var u=typeof r==="number"&&r>=1&&r<=30;if(!u)throw new Error("Lunar day outside range 1 - 30");var c;if(typeof a==="object"){c=false;i=a}else{c=!!a;i=n||{}}o={year:e,month:t,day:r,isIntercalary:c}}var f;f=o.day-1;var d=w[o.year-w[0]];var v=d>>13;var p;if(!v){p=o.month-1}else if(o.month>v){p=o.month}else if(o.isIntercalary){p=o.month}else{p=o.month-1}for(var h=0;h<p;h++){var m=d&1<<12-h?30:29;f+=m}var g=T[o.year-T[0]];var y=g>>9&4095;var x=g>>5&15;var b=g&31;var _=new Date(y,x-1,b+f);i.year=_.getFullYear();i.month=1+_.getMonth();i.day=_.getDate();return i}},{"../main":135,"object-assign":71}],122:[function(e,t,r){var n=e("../main");var a=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new n.baseCalendar;a(i.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);var e=t.year()+(t.year()<0?1:0);return e%4===3||e%4===-1},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return 13},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);e=a.year();if(e<0){e++}return a.day()+(a.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch;var r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;if(r<=0){r--}t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var a=Math.floor(t/30)+1;var n=t-(a-1)*30+1;return this.newDate(r,a,n)}});n.calendars.coptic=i},{"../main":135,"object-assign":71}],123:[function(e,t,r){var n=e("../main");var a=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new n.baseCalendar;a(i.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:false}},leapYear:function(e){this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);return false},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);return 13},daysInYear:function(e){this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);return 400},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);return(a.day()+1)%8},weekDay:function(e,t,r){var a=this.dayOfWeek(e,t,r);return a>=2&&a<=6},extraInfo:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);return{century:o[Math.floor((a.year()-1)/100)+1]||""}},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);e=a.year()+(a.year()<0?1:0);t=a.month();r=a.day();return r+(t>1?16:0)+(t>2?(t-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1;e-=(t-1)*400;e+=e>15?16:0;var r=Math.floor(e/32)+1;var a=e-(r-1)*32+1;return this.newDate(t<=0?t-1:t,r,a)}});var o={20:"Fruitbat",21:"Anchovy"};n.calendars.discworld=i},{"../main":135,"object-assign":71}],124:[function(e,t,r){var n=e("../main");var a=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new n.baseCalendar;a(i.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);var e=t.year()+(t.year()<0?1:0);return e%4===3||e%4===-1},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return 13},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);e=a.year();if(e<0){e++}return a.day()+(a.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch;var r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;if(r<=0){r--}t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var a=Math.floor(t/30)+1;var n=t-(a-1)*30+1;return this.newDate(r,a,n)}});n.calendars.ethiopian=i},{"../main":135,"object-assign":71}],125:[function(e,t,r){var s=e("../main");var a=e("object-assign");function n(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}n.prototype=new s.baseCalendar;a(n.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:false,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return this._leapYear(t.year())},_leapYear:function(e){e=e<0?e+1:e;return i(e*7+1,19)<7},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);e=t.year();return this.toJD(e===-1?+1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){if(e.year){t=e.month();e=e.year()}this._validate(e,t,this.minDay,s.local.invalidMonth);return t===12&&this.leapYear(e)?30:t===8&&i(this.daysInYear(e),10)===5?30:t===9&&i(this.daysInYear(e),10)===3?29:this.daysPerMonth[t-1]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},extraInfo:function(e,t,r){var a=this._validate(e,t,r,s.local.invalidDate);return{yearType:(this.leapYear(a)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(a)%10-3]}},toJD:function(e,t,r){var a=this._validate(e,t,r,s.local.invalidDate);e=a.year();t=a.month();r=a.day();var n=e<=0?e+1:e;var i=this.jdEpoch+this._delay1(n)+this._delay2(n)+r+1;if(t<7){for(var o=7;o<=this.monthsInYear(e);o++){i+=this.daysInMonth(e,o)}for(var o=1;o<t;o++){i+=this.daysInMonth(e,o)}}else{for(var o=7;o<t;o++){i+=this.daysInMonth(e,o)}}return i},_delay1:function(e){var t=Math.floor((235*e-234)/19);var r=12084+13753*t;var a=t*29+Math.floor(r/25920);if(i(3*(a+1),7)<3){a++}return a},_delay2:function(e){var t=this._delay1(e-1);var r=this._delay1(e);var a=this._delay1(e+1);return a-r===356?2:r-t===382?1:0},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((e-this.jdEpoch)*98496/35975351)-1;while(e>=this.toJD(t===-1?+1:t+1,7,1)){t++}var r=e<this.toJD(t,1,1)?7:1;while(e>this.toJD(t,r,this.daysInMonth(t,r))){r++}var a=e-this.toJD(t,r,1)+1;return this.newDate(t,r,a)}});function i(e,t){return e-t*Math.floor(e/t)}s.calendars.hebrew=n},{"../main":135,"object-assign":71}],126:[function(e,t,r){var n=e("../main");var a=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new n.baseCalendar;a(i.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khamīs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);return(t.year()*11+14)%30<11},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);e=a.year();t=a.month();r=a.day();e=e<=0?e+1:e;return r+Math.ceil(29.5*(t-1))+(e-1)*354+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((30*(e-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var r=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1);var a=e-this.toJD(t,r,1)+1;return this.newDate(t,r,a)}});n.calendars.islamic=i},{"../main":135,"object-assign":71}],127:[function(e,t,r){var n=e("../main");var a=e("object-assign");function i(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}i.prototype=new n.baseCalendar;a(i.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);var e=t.year()<0?t.year()+1:t.year();return e%4===0},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(4-(a.dayOfWeek()||7),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);e=a.year();t=a.month();r=a.day();if(e<0){e++}if(t<=2){e--;t+=12}return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r-1524.5},fromJD:function(e){var t=Math.floor(e+.5);var r=t+1524;var a=Math.floor((r-122.1)/365.25);var n=Math.floor(365.25*a);var i=Math.floor((r-n)/30.6001);var o=i-Math.floor(i<14?1:13);var s=a-Math.floor(o>2?4716:4715);var l=r-n-Math.floor(30.6001*i);if(s<=0){s--}return this.newDate(s,o,l)}});n.calendars.julian=i},{"../main":135,"object-assign":71}],128:[function(e,t,r){var s=e("../main");var a=e("object-assign");function n(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}n.prototype=new s.baseCalendar;a(n.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:true,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:false,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return false},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);e=t.year();var r=Math.floor(e/400);e=e%400;e+=e<0?400:0;var a=Math.floor(e/20);return r+"."+a+"."+e%20},forYear:function(e){e=e.split(".");if(e.length<3){throw"Invalid Mayan year"}var t=0;for(var r=0;r<e.length;r++){var a=parseInt(e[r],10);if(Math.abs(a)>19||r>0&&a<0){throw"Invalid Mayan year"}t=t*20+a}return t},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return 18},weekOfYear:function(e,t,r){this._validate(e,t,r,s.local.invalidDate);return 0},daysInYear:function(e){this._validate(e,this.minMonth,this.minDay,s.local.invalidYear);return 360},daysInMonth:function(e,t){this._validate(e,t,this.minDay,s.local.invalidMonth);return 20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,r){var a=this._validate(e,t,r,s.local.invalidDate);return a.day()},weekDay:function(e,t,r){this._validate(e,t,r,s.local.invalidDate);return true},extraInfo:function(e,t,r){var a=this._validate(e,t,r,s.local.invalidDate);var n=a.toJD();var i=this._toHaab(n);var o=this._toTzolkin(n);return{haabMonthName:this.local.haabMonths[i[0]-1],haabMonth:i[0],haabDay:i[1],tzolkinDayName:this.local.tzolkinMonths[o[0]-1],tzolkinDay:o[0],tzolkinTrecena:o[1]}},_toHaab:function(e){e-=this.jdEpoch;var t=i(e+8+(18-1)*20,365);return[Math.floor(t/20)+1,i(t,20)]},_toTzolkin:function(e){e-=this.jdEpoch;return[o(e+20,20),o(e+4,13)]},toJD:function(e,t,r){var a=this._validate(e,t,r,s.local.invalidDate);return a.day()+a.month()*20+a.year()*360+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var t=Math.floor(e/360);e=e%360;e+=e<0?360:0;var r=Math.floor(e/20);var a=e%20;return this.newDate(t,r,a)}});function i(e,t){return e-t*Math.floor(e/t)}function o(e,t){return i(e-1,t)+1}s.calendars.mayan=n},{"../main":135,"object-assign":71}],129:[function(e,t,r){var o=e("../main");var a=e("object-assign");function n(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}n.prototype=new o.baseCalendar;var s=o.instance("gregorian");a(n.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return s.leapYear(t.year()+(t.year()<1?1:0)+1469)},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(1-(a.dayOfWeek()||7),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,o.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,o.local.invalidMonth);var e=a.year();if(e<0){e++}var n=a.day();for(var i=1;i<a.month();i++){n+=this.daysPerMonth[i-1]}return n+s.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);var t=Math.floor((e-(this.jdEpoch-1))/366);while(e>=this.toJD(t+1,1,1)){t++}var r=e-Math.floor(this.toJD(t,1,1)+.5)+1;var a=1;while(r>this.daysInMonth(t,a)){r-=this.daysInMonth(t,a);a++}return this.newDate(t,a,r)}});o.calendars.nanakshahi=n},{"../main":135,"object-assign":71}],130:[function(e,t,r){var c=e("../main");var a=e("object-assign");function n(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}n.prototype=new c.baseCalendar;a(n.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:false}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,c.local.invalidYear);e=t.year();if(typeof this.NEPALI_CALENDAR_DATA[e]==="undefined"){return this.daysPerYear}var r=0;for(var a=this.minMonth;a<=12;a++){r+=this.NEPALI_CALENDAR_DATA[e][a]}return r},daysInMonth:function(e,t){if(e.year){t=e.month();e=e.year()}this._validate(e,t,this.minDay,c.local.invalidMonth);return typeof this.NEPALI_CALENDAR_DATA[e]==="undefined"?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},toJD:function(e,t,r){var a=this._validate(e,t,r,c.local.invalidDate);e=a.year();t=a.month();r=a.day();var n=c.instance();var i=0;var o=t;var s=e;this._createMissingCalendarData(e);var l=e-(o>9||o===9&&r>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);if(t!==9){i=r;o--}while(o!==9){if(o<=0){o=12;s--}i+=this.NEPALI_CALENDAR_DATA[s][o];o--}if(t===9){i+=r-this.NEPALI_CALENDAR_DATA[s][0];if(i<0){i+=n.daysInYear(l)}}else{i+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0]}return n.newDate(l,1,1).add(i,"d").toJD()},fromJD:function(e){var t=c.instance();var r=t.fromJD(e);var a=r.year();var n=r.dayOfYear();var i=a+56;this._createMissingCalendarData(i);var o=9;var s=this.NEPALI_CALENDAR_DATA[i][0];var l=this.NEPALI_CALENDAR_DATA[i][o]-s+1;while(n>l){o++;if(o>12){o=1;i++}l+=this.NEPALI_CALENDAR_DATA[i][o]}var u=this.NEPALI_CALENDAR_DATA[i][o]-(l-n);return this.newDate(i,o,u)},_createMissingCalendarData:function(e){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var r=e-1;r<e+2;r++){if(typeof this.NEPALI_CALENDAR_DATA[r]==="undefined"){this.NEPALI_CALENDAR_DATA[r]=t}}},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}});c.calendars.nepali=n},{"../main":135,"object-assign":71}],131:[function(e,t,r){var o=e("../main");var a=e("object-assign");function n(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}n.prototype=new o.baseCalendar;a(n.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chæharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Chæ","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);return((t.year()-(t.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(-((a.dayOfWeek()+1)%7),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,o.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var a=this._validate(e,t,r,o.local.invalidDate);e=a.year();t=a.month();r=a.day();var n=e-(e>=0?474:473);var i=474+f(n,2820);return r+(t<=7?(t-1)*31:(t-1)*30+6)+Math.floor((i*682-110)/2816)+(i-1)*365+Math.floor(n/2820)*1029983+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=e-this.toJD(475,1,1);var r=Math.floor(t/1029983);var a=f(t,1029983);var n=2820;if(a!==1029982){var i=Math.floor(a/366);var o=f(a,366);n=Math.floor((2134*i+2816*o+2815)/1028522)+i+1}var s=n+2820*r+474;s=s<=0?s-1:s;var l=e-this.toJD(s,1,1)+1;var u=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30);var c=e-this.toJD(s,u,1)+1;return this.newDate(s,u,c)}});function f(e,t){return e-t*Math.floor(e/t)}o.calendars.persian=n;o.calendars.jalali=n},{"../main":135,"object-assign":71}],132:[function(e,t,r){var n=e("../main");var a=e("object-assign");var i=n.instance();function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new n.baseCalendar;a(o.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);var e=this._t2gYear(t.year());return i.leapYear(e)},weekOfYear:function(e,t,r){var a=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);var e=this._t2gYear(a.year());return i.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);var e=this._t2gYear(a.year());return i.toJD(e,a.month(),a.day())},fromJD:function(e){var t=i.fromJD(e);var r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}});n.calendars.taiwan=o},{"../main":135,"object-assign":71}],133:[function(e,t,r){var n=e("../main");var a=e("object-assign");var i=n.instance();function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}o.prototype=new n.baseCalendar;a(o.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);var e=this._t2gYear(t.year());return i.leapYear(e)},weekOfYear:function(e,t,r){var a=this._validate(e,this.minMonth,this.minDay,n.local.invalidYear);var e=this._t2gYear(a.year());return i.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,n.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,n.local.invalidDate);var e=this._t2gYear(a.year());return i.toJD(e,a.month(),a.day())},fromJD:function(e){var t=i.fromJD(e);var r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}});n.calendars.thai=o},{"../main":135,"object-assign":71}],134:[function(e,t,r){var o=e("../main");var a=e("object-assign");function n(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}n.prototype=new o.baseCalendar;a(n.prototype,{name:"UmmAlQura",hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalāthā’","Yawm al-Arba‘ā’","Yawm al-Khamīs","Yawm al-Jum‘a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:true}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);return this.daysInYear(t.year())===355},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=0;for(var r=1;r<=12;r++){t+=this.daysInMonth(e,r)}return t},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,o.local.invalidMonth);var a=r.toJD()-24e5+.5;var n=0;for(var i=0;i<u.length;i++){if(u[i]>a){return u[n]-u[n-1]}n++}return 30},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var a=this._validate(e,t,r,o.local.invalidDate);var n=12*(a.year()-1)+a.month()-15292;var i=a.day()+u[n-1]-1;return i+24e5-.5},fromJD:function(e){var t=e-24e5+.5;var r=0;for(var a=0;a<u.length;a++){if(u[a]>t)break;r++}var n=r+15292;var i=Math.floor((n-1)/12);var o=i+1;var s=n-12*i;var l=t-u[r-1]+1;return this.newDate(o,s,l)},isValid:function(e,t,r){var a=o.baseCalendar.prototype.isValid.apply(this,arguments);if(a){e=e.year!=null?e.year:e;a=e>=1276&&e<=1500}return a},_validate:function(e,t,r,a){var n=o.baseCalendar.prototype._validate.apply(this,arguments);if(n.year<1276||n.year>1500){throw a.replace(/\{0\}/,this.local.name)}return n}});o.calendars.ummalqura=n;var u=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":135,"object-assign":71}],135:[function(e,t,r){var a=e("object-assign");function n(){this.regionalOptions=[];this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"};this.local=this.regionalOptions[""];this.calendars={};this._localCals={}}a(n.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase();t=t||"";var r=this._localCals[e+"-"+t];if(!r&&this.calendars[e]){r=new this.calendars[e](t);this._localCals[e+"-"+t]=r}if(!r){throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e)}return r},newDate:function(e,t,r,a,n){a=(e!=null&&e.year?e.calendar():typeof a==="string"?this.instance(a,n):a)||this.instance();return a.newDate(e,t,r)},substituteDigits:function(t){return function(e){return(e+"").replace(/[0-9]/g,function(e){return t[e]})}},substituteChineseDigits:function(n,i){return function(e){var t="";var r=0;while(e>0){var a=e%10;t=(a===0?"":n[a]+i[r])+t;r++;e=Math.floor(e/10)}if(t.indexOf(n[1]+i[1])===0){t=t.substr(1)}return t||n[0]}}});function i(e,t,r,a){this._calendar=e;this._year=t;this._month=r;this._day=a;if(this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day)){throw(u.local.invalidDate||u.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}}function o(e,t){e=""+e;return"000000".substring(0,t-e.length)+e}a(i.prototype,{newDate:function(e,t,r){return this._calendar.newDate(e==null?this:e,t,r)},year:function(e){return arguments.length===0?this._year:this.set(e,"y")},month:function(e){return arguments.length===0?this._month:this.set(e,"m")},day:function(e){return arguments.length===0?this._day:this.set(e,"d")},date:function(e,t,r){if(!this._calendar.isValid(e,t,r)){throw(u.local.invalidDate||u.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}this._year=e;this._month=t;this._day=r;return this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name){throw(u.local.differentCalendars||u.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name)}var t=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return t===0?0:t<0?-1:+1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+o(Math.abs(this.year()),4)+"-"+o(this.month(),2)+"-"+o(this.day(),2)}});function s(){this.shortYearCutoff="+10"}a(s.prototype,{_validateLevel:0,newDate:function(e,t,r){if(e==null){return this.today()}if(e.year){this._validate(e,t,r,u.local.invalidDate||u.regionalOptions[""].invalidDate);r=e.day();t=e.month();e=e.year()}return new i(this,e,t,r)},today:function(){return this.fromJSDate(new Date)},epoch:function(e){var t=this._validate(e,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);return t.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+o(Math.abs(t.year()),4)},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);return 12},monthOfYear:function(e,t){var r=this._validate(e,t,this.minDay,u.local.invalidMonth||u.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(e,t){var r=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;this._validate(e,r,this.minDay,u.local.invalidMonth||u.regionalOptions[""].invalidMonth);return r},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(e,t,r){var a=this._validate(e,t,r,u.local.invalidDate||u.regionalOptions[""].invalidDate);return a.toJD()-this.newDate(a.year(),this.fromMonthOfYear(a.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,r){var a=this._validate(e,t,r,u.local.invalidDate||u.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(a))+2)%this.daysInWeek()},extraInfo:function(e,t,r){this._validate(e,t,r,u.local.invalidDate||u.regionalOptions[""].invalidDate);return{}},add:function(e,t,r){this._validate(e,this.minMonth,this.minDay,u.local.invalidDate||u.regionalOptions[""].invalidDate);return this._correctAdd(e,this._add(e,t,r),t,r)},_add:function(e,t,r){this._validateLevel++;if(r==="d"||r==="w"){var a=e.toJD()+t*(r==="w"?this.daysInWeek():1);var n=e.calendar().fromJD(a);this._validateLevel--;return[n.year(),n.month(),n.day()]}try{var i=e.year()+(r==="y"?t:0);var o=e.monthOfYear()+(r==="m"?t:0);var n=e.day();var s=function(e){while(o<e.minMonth){i--;o+=e.monthsInYear(i)}var t=e.monthsInYear(i);while(o>t-1+e.minMonth){i++;o-=t;t=e.monthsInYear(i)}};if(r==="y"){if(e.month()!==this.fromMonthOfYear(i,o)){o=this.newDate(i,e.month(),this.minDay).monthOfYear()}o=Math.min(o,this.monthsInYear(i));n=Math.min(n,this.daysInMonth(i,this.fromMonthOfYear(i,o)))}else if(r==="m"){s(this);n=Math.min(n,this.daysInMonth(i,this.fromMonthOfYear(i,o)))}var l=[i,this.fromMonthOfYear(i,o),n];this._validateLevel--;return l}catch(e){this._validateLevel--;throw e}},_correctAdd:function(e,t,r,a){if(!this.hasYearZero&&(a==="y"||a==="m")){if(t[0]===0||e.year()>0!==t[0]>0){var n={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[a];var i=r<0?-1:+1;t=this._add(e,r*n[0]+i*n[1],n[2])}}return e.date(t[0],t[1],t[2])},set:function(e,t,r){this._validate(e,this.minMonth,this.minDay,u.local.invalidDate||u.regionalOptions[""].invalidDate);var a=r==="y"?t:e.year();var n=r==="m"?t:e.month();var i=r==="d"?t:e.day();if(r==="y"||r==="m"){i=Math.min(i,this.daysInMonth(a,n))}return e.date(a,n,i)},isValid:function(e,t,r){this._validateLevel++;var a=this.hasYearZero||e!==0;if(a){var n=this.newDate(e,t,this.minDay);a=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(n)&&(r>=this.minDay&&r-this.minDay<this.daysInMonth(n))}this._validateLevel--;return a},toJSDate:function(e,t,r){var a=this._validate(e,t,r,u.local.invalidDate||u.regionalOptions[""].invalidDate);return u.instance().fromJD(this.toJD(a)).toJSDate()},fromJSDate:function(e){return this.fromJD(u.instance().fromJSDate(e).toJD())},_validate:function(e,t,r,a){if(e.year){if(this._validateLevel===0&&this.name!==e.calendar().name){throw(u.local.differentCalendars||u.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name)}return e}try{this._validateLevel++;if(this._validateLevel===1&&!this.isValid(e,t,r)){throw a.replace(/\{0\}/,this.local.name)}var n=this.newDate(e,t,r);this._validateLevel--;return n}catch(e){this._validateLevel--;throw e}}});function l(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}l.prototype=new s;a(l.prototype,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:false,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:false}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);var e=t.year()+(t.year()<0?1:0);return e%4===0&&(e%100!==0||e%400===0)},weekOfYear:function(e,t,r){var a=this.newDate(e,t,r);a.add(4-(a.dayOfWeek()||7),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,u.local.invalidMonth||u.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var a=this._validate(e,t,r,u.local.invalidDate||u.regionalOptions[""].invalidDate);e=a.year();t=a.month();r=a.day();if(e<0){e++}if(t<3){t+=12;e--}var n=Math.floor(e/100);var i=2-n+Math.floor(n/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r+i-1524.5},fromJD:function(e){var t=Math.floor(e+.5);var r=Math.floor((t-1867216.25)/36524.25);r=t+1+r-Math.floor(r/4);var a=r+1524;var n=Math.floor((a-122.1)/365.25);var i=Math.floor(365.25*n);var o=Math.floor((a-i)/30.6001);var s=a-i-Math.floor(o*30.6001);var l=o-(o>13.5?13:1);var u=n-(l>2.5?4716:4715);if(u<=0){u--}return this.newDate(u,l,s)},toJSDate:function(e,t,r){var a=this._validate(e,t,r,u.local.invalidDate||u.regionalOptions[""].invalidDate);var n=new Date(a.year(),a.month()-1,a.day());n.setHours(0);n.setMinutes(0);n.setSeconds(0);n.setMilliseconds(0);n.setHours(n.getHours()>12?n.getHours()+2:0);return n},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var u=t.exports=new n;u.cdate=i;u.baseCalendar=s;u.calendars.gregorian=l},{"object-assign":71}],136:[function(e,t,r){var a=e("object-assign");var E=e("./main");a(E.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});E.local=E.regionalOptions[""];a(E.cdate.prototype,{formatDate:function(e,t){if(typeof e!=="string"){t=e;e=""}return this._calendar.formatDate(e||"",this,t)}});a(E.baseCalendar.prototype,{UNIX_EPOCH:E.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:E.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(a,e,t){if(typeof a!=="string"){t=e;e=a;a=""}if(!e){return""}if(e.calendar()!==this){throw E.local.invalidFormat||E.regionalOptions[""].invalidFormat}a=a||this.local.dateFormat;t=t||{};var r=t.dayNamesShort||this.local.dayNamesShort;var n=t.dayNames||this.local.dayNames;var i=t.monthNumbers||this.local.monthNumbers;var o=t.monthNamesShort||this.local.monthNamesShort;var s=t.monthNames||this.local.monthNames;var l=t.calculateWeek||this.local.calculateWeek;var u=function(e,t){var r=1;while(x+r<a.length&&a.charAt(x+r)===e){r++}x+=r-1;return Math.floor(r/(t||1))>1};var c=function(e,t,r,a){var n=""+t;if(u(e,a)){while(n.length<r){n="0"+n}}return n};var f=function(e,t,r,a){return u(e)?a[t]:r[t]};var d=this;var v=function(e){return typeof i==="function"?i.call(d,e,u("m")):m(c("m",e.month(),2))};var p=function(e,t){if(t){return typeof s==="function"?s.call(d,e):s[e.month()-d.minMonth]}else{return typeof o==="function"?o.call(d,e):o[e.month()-d.minMonth]}};var h=this.local.digits;var m=function(e){return t.localNumbers&&h?h(e):e};var g="";var y=false;for(var x=0;x<a.length;x++){if(y){if(a.charAt(x)==="'"&&!u("'")){y=false}else{g+=a.charAt(x)}}else{switch(a.charAt(x)){case"d":g+=m(c("d",e.day(),2));break;case"D":g+=f("D",e.dayOfWeek(),r,n);break;case"o":g+=c("o",e.dayOfYear(),3);break;case"w":g+=c("w",e.weekOfYear(),2);break;case"m":g+=v(e);break;case"M":g+=p(e,u("M"));break;case"y":g+=u("y",2)?e.year():(e.year()%100<10?"0":"")+e.year()%100;break;case"Y":u("Y",2);g+=e.formatYear();break;case"J":g+=e.toJD();break;case"@":g+=(e.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":g+=(e.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":if(u("'")){g+="'"}else{y=true}break;default:g+=a.charAt(x)}}}return g},parseDate:function(a,o,e){if(o==null){throw E.local.invalidArguments||E.regionalOptions[""].invalidArguments}o=typeof o==="object"?o.toString():o+"";if(o===""){return null}a=a||this.local.dateFormat;e=e||{};var t=e.shortYearCutoff||this.shortYearCutoff;t=typeof t!=="string"?t:this.today().year()%100+parseInt(t,10);var r=e.dayNamesShort||this.local.dayNamesShort;var n=e.dayNames||this.local.dayNames;var i=e.parseMonth||this.local.parseMonth;var s=e.monthNumbers||this.local.monthNumbers;var l=e.monthNamesShort||this.local.monthNamesShort;var u=e.monthNames||this.local.monthNames;var c=-1;var f=-1;var d=-1;var v=-1;var p=-1;var h=false;var m=false;var g=function(e,t){var r=1;while(M+r<a.length&&a.charAt(M+r)===e){r++}M+=r-1;return Math.floor(r/(t||1))>1};var y=function(e,t){var r=g(e,t);var a=[2,3,r?4:2,r?4:2,10,11,20]["oyYJ@!".indexOf(e)+1];var n=new RegExp("^-?\\d{1,"+a+"}");var i=o.substring(k).match(n);if(!i){throw(E.local.missingNumberAt||E.regionalOptions[""].missingNumberAt).replace(/\{0\}/,k)}k+=i[0].length;return parseInt(i[0],10)};var x=this;var b=function(){if(typeof s==="function"){g("m");var e=s.call(x,o.substring(k));k+=e.length;return e}return y("m")};var _=function(e,t,r,a){var n=g(e,a)?r:t;for(var i=0;i<n.length;i++){if(o.substr(k,n[i].length).toLowerCase()===n[i].toLowerCase()){k+=n[i].length;return i+x.minMonth}}throw(E.local.unknownNameAt||E.regionalOptions[""].unknownNameAt).replace(/\{0\}/,k)};var w=function(){if(typeof u==="function"){var e=g("M")?u.call(x,o.substring(k)):l.call(x,o.substring(k));k+=e.length;return e}return _("M",l,u)};var T=function(){if(o.charAt(k)!==a.charAt(M)){throw(E.local.unexpectedLiteralAt||E.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,k)}k++};var k=0;for(var M=0;M<a.length;M++){if(m){if(a.charAt(M)==="'"&&!g("'")){m=false}else{T()}}else{switch(a.charAt(M)){case"d":v=y("d");break;case"D":_("D",r,n);break;case"o":p=y("o");break;case"w":y("w");break;case"m":d=b();break;case"M":d=w();break;case"y":var A=M;h=!g("y",2);M=A;f=y("y",2);break;case"Y":f=y("Y",2);break;case"J":c=y("J")+.5;if(o.charAt(k)==="."){k++;y("J")}break;case"@":c=y("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":c=y("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":k=o.length;break;case"'":if(g("'")){T()}else{m=true}break;default:T()}}}if(k<o.length){throw E.local.unexpectedText||E.regionalOptions[""].unexpectedText}if(f===-1){f=this.today().year()}else if(f<100&&h){f+=t===-1?1900:this.today().year()-this.today().year()%100-(f<=t?0:100)}if(typeof d==="string"){d=i.call(this,f,d)}if(p>-1){d=1;v=p;for(var S=this.daysInMonth(f,d);v>S;S=this.daysInMonth(f,d)){d++;v-=S}}return c>-1?this.fromJD(c):this.newDate(f,d,v)},determineDate:function(e,t,n,i,o){if(n&&typeof n!=="object"){o=i;i=n;n=null}if(typeof i!=="string"){o=i;i=""}var s=this;var r=function(e){try{return s.parseDate(i,e,o)}catch(e){}e=e.toLowerCase();var t=(e.match(/^c/)&&n?n.newDate():null)||s.today();var r=/([+-]?[0-9]+)\s*(d|w|m|y)?/g;var a=r.exec(e);while(a){t.add(parseInt(a[1],10),a[2]||"d");a=r.exec(e)}return t};t=t?t.newDate():null;e=e==null?t:typeof e==="string"?r(e):typeof e==="number"?isNaN(e)||e===Infinity||e===-Infinity?t:s.today().add(e,"d"):s.newDate(e);return e}})},{"./main":135,"object-assign":71}],137:[function(e,t,r){"use strict";t.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:true},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:true}]},{}],138:[function(e,t,r){"use strict";var a=e("./arrow_paths");var n=e("../../plots/font_attributes");var i=e("../../plots/cartesian/constants");var o=e("../../plot_api/plot_template").templatedArray;var s=e("../../constants/axis_placeable_objects");function l(e){return["In order for absolute positioning of the arrow to work, *a"+e+"ref* must be exactly the same as *"+e+"ref*, otherwise *a"+e+"ref* will revert to *pixel* (explained next).","For relative positioning, *a"+e+"ref* can be set to *pixel*,","in which case the *a"+e+"* value is specified in pixels","relative to *"+e+"*.","Absolute positioning is useful","for trendline annotations which should continue to indicate","the correct trend when zoomed. Relative positioning is useful","for specifying the text offset for an annotated point."].join(" ")}function u(e,t,r){return["Sets the",e,"component of the arrow tail about the arrow head.","If `a"+e+"ref` is `pixel`, a positive (negative)","component corresponds to an arrow pointing","from",r,"to",t,"("+t,"to",r+").","If `a"+e+"ref` is not `pixel` and is exactly the same as `"+e+"ref`,","this is an absolute value on that axis,","like `"+e+"`, specified in the same coordinates as `"+e+"ref`."].join(" ")}t.exports=o("annotation",{visible:{valType:"boolean",dflt:true,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:n({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:true,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:a.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:a.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",i.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",i.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[false,"onoff","onout"],dflt:false,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:n({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":261,"../../plot_api/plot_template":320,"../../plots/cartesian/constants":338,"../../plots/font_attributes":360,"./arrow_paths":137}],139:[function(e,t,r){"use strict";var n=e("../../lib");var b=e("../../plots/cartesian/axes");var i=e("./draw").draw;t.exports=function e(t){var r=t._fullLayout;var a=n.filterVisible(r.annotations);if(a.length&&t._fullData.length){return n.syncOrAsync([i,o],t)}};function o(i){var e=i._fullLayout;n.filterVisible(e.annotations).forEach(function(e){var t=b.getFromId(i,e.xref);var r=b.getFromId(i,e.yref);var a=b.getRefType(e.xref);var n=b.getRefType(e.yref);e._extremes={};if(a==="range")s(e,t);if(n==="range")s(e,r)})}function s(e,t){var r=t._id;var a=r.charAt(0);var n=e[a];var i=e["a"+a];var o=e[a+"ref"];var s=e["a"+a+"ref"];var l=e["_"+a+"padplus"];var u=e["_"+a+"padminus"];var c={x:1,y:-1}[a]*e[a+"shift"];var f=3*e.arrowsize*e.arrowwidth||0;var d=f+c;var v=f-c;var p=3*e.startarrowsize*e.arrowwidth||0;var h=p+c;var m=p-c;var g;if(s===o){var y=b.findExtremes(t,[t.r2c(n)],{ppadplus:d,ppadminus:v});var x=b.findExtremes(t,[t.r2c(i)],{ppadplus:Math.max(l,h),ppadminus:Math.max(u,m)});g={min:[y.min[0],x.min[0]],max:[y.max[0],x.max[0]]}}else{h=i?h+i:h;m=i?m-i:m;g=b.findExtremes(t,[t.r2c(n)],{ppadplus:Math.max(l,d,h),ppadminus:Math.max(u,v,m)})}e._extremes[r]=g}},{"../../lib":285,"../../plots/cartesian/axes":331,"./draw":144}],140:[function(e,t,r){"use strict";var u=e("../../lib");var c=e("../../registry");var f=e("../../plot_api/plot_template").arrayEditor;t.exports={hasClickToShow:a,onClick:n};function a(e,t){var r=d(e,t);return r.on.length>0||r.explicitOff.length>0}function n(e,t){var r=d(e,t);var a=r.on;var n=r.off.concat(r.explicitOff);var i={};var o=e._fullLayout.annotations;var s,l;if(!(a.length||n.length))return;for(s=0;s<a.length;s++){l=f(e.layout,"annotations",o[a[s]]);l.modifyItem("visible",true);u.extendFlat(i,l.getUpdateObj())}for(s=0;s<n.length;s++){l=f(e.layout,"annotations",o[n[s]]);l.modifyItem("visible",false);u.extendFlat(i,l.getUpdateObj())}return c.call("update",e,{},i)}function d(e,t){var r=e._fullLayout.annotations;var a=[];var n=[];var i=[];var o=(t||[]).length;var s,l,u,c,f,d,v,p;for(s=0;s<r.length;s++){u=r[s];c=u.clicktoshow;if(c){for(l=0;l<o;l++){f=t[l];d=f.xaxis;v=f.yaxis;if(d._id===u.xref&&v._id===u.yref&&d.d2r(f.x)===h(u._xclick,d)&&v.d2r(f.y)===h(u._yclick,v)){if(u.visible){if(c==="onout")p=n;else p=i}else{p=a}p.push(s);break}}if(l===o){if(u.visible&&c==="onout")n.push(s)}}}return{on:a,off:n,explicitOff:i}}function h(e,t){return t.type==="log"?t.l2r(e):t.d2r(e)}},{"../../lib":285,"../../plot_api/plot_template":320,"../../registry":373}],141:[function(e,t,r){"use strict";var y=e("../../lib");var x=e("../color");t.exports=function e(t,r,a,n){n("opacity");var i=n("bgcolor");var o=n("bordercolor");var s=x.opacity(o);n("borderpad");var l=n("borderwidth");var u=n("showarrow");n("text",u?" ":a._dfltTitle.annotation);n("textangle");y.coerceFont(n,"font",a.font);n("width");n("align");var c=n("height");if(c)n("valign");if(u){var f=n("arrowside");var d;var v;if(f.indexOf("end")!==-1){d=n("arrowhead");v=n("arrowsize")}if(f.indexOf("start")!==-1){n("startarrowhead",d);n("startarrowsize",v)}n("arrowcolor",s?r.bordercolor:x.defaultLine);n("arrowwidth",(s&&l||1)*2);n("standoff");n("startstandoff")}var p=n("hovertext");var h=a.hoverlabel||{};if(p){var m=n("hoverlabel.bgcolor",h.bgcolor||(x.opacity(i)?x.rgb(i):x.defaultLine));var g=n("hoverlabel.bordercolor",h.bordercolor||x.contrast(m));y.coerceFont(n,"hoverlabel.font",{family:h.font.family,size:h.font.size,color:h.font.color||g})}n("captureevents",!!p)}},{"../../lib":285,"../color":155}],142:[function(e,t,r){"use strict";var v=e("fast-isnumeric");var p=e("../../lib/to_log_range");t.exports=function e(t,a,r,n){a=a||{};var i=r==="log"&&a.type==="linear";var o=r==="linear"&&a.type==="log";if(!(i||o))return;var s=t._fullLayout.annotations;var l=a._id.charAt(0);var u;var c;function f(e){var t=u[e];var r=null;if(i)r=p(t,a.range);else r=Math.pow(10,t);if(!v(r))r=null;n(c+e,r)}for(var d=0;d<s.length;d++){u=s[d];c="annotations["+d+"].";if(u[l+"ref"]===a._id)f(l);if(u["a"+l+"ref"]===a._id)f("a"+l)}}},{"../../lib/to_log_range":309,"fast-isnumeric":31}],143:[function(e,t,r){"use strict";var x=e("../../lib");var b=e("../../plots/cartesian/axes");var a=e("../../plots/array_container_defaults");var _=e("./common_defaults");var w=e("./attributes");t.exports=function e(t,r){a(t,r,{name:"annotations",handleItemDefaults:n})};function n(r,a,e){function t(e,t){return x.coerce(r,a,w,e,t)}var n=t("visible");var i=t("clicktoshow");if(!(n||i))return;_(r,a,e,t);var o=a.showarrow;var s=["x","y"];var l=[-10,-30];var u={_fullLayout:e};for(var c=0;c<2;c++){var f=s[c];var d=b.coerceRef(r,a,u,f,"","paper");if(d!=="paper"){var v=b.getFromId(u,d);v._annIndices.push(a._index)}b.coercePosition(a,u,t,d,f,.5);if(o){var p="a"+f;var h=b.coerceRef(r,a,u,p,"pixel",["pixel","paper"]);if(h!=="pixel"&&h!==d){h=a[p]="pixel"}var m=h==="pixel"?l[c]:.4;b.coercePosition(a,u,t,h,p,m)}t(f+"anchor");t(f+"shift")}x.noneOrAll(r,a,["x","y"]);if(o){x.noneOrAll(r,a,["ax","ay"])}if(i){var g=t("xclick");var y=t("yclick");a._xclick=g===undefined?a.x:b.cleanPosition(g,u,a.xref);a._yclick=y===undefined?a.y:b.cleanPosition(y,u,a.yref)}}},{"../../lib":285,"../../plots/array_container_defaults":326,"../../plots/cartesian/axes":331,"./attributes":138,"./common_defaults":141}],144:[function(e,t,r){"use strict";var c=e("@plotly/d3");var me=e("../../registry");var a=e("../../plots/plots");var ge=e("../../lib");var ye=ge.strTranslate;var xe=e("../../plots/cartesian/axes");var be=e("../color");var _e=e("../drawing");var f=e("../fx");var we=e("../../lib/svg_text_utils");var Te=e("../../lib/setcursor");var ke=e("../dragelement");var d=e("../../plot_api/plot_template").arrayEditor;var Me=e("./draw_arrow_head");t.exports={draw:n,drawOne:i,drawRaw:o};function n(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var r=0;r<t.annotations.length;r++){if(t.annotations[r].visible){i(e,r)}}return a.previousPromises(e)}function i(e,t){var r=e._fullLayout;var a=r.annotations[t]||{};var n=xe.getFromId(e,a.xref);var i=xe.getFromId(e,a.yref);if(n)n.setScale();if(i)i.setScale();o(e,a,t,false,n,i)}function Ae(e,t,r,a,n){var i=n[r];var o=n[r+"ref"];var s=r.indexOf("y")!==-1;var l=xe.getRefType(o)==="domain";var u=s?a.h:a.w;if(e){if(l){return i+(s?-t:t)/e._length}else{return e.p2r(e.r2p(i)+t)}}else{return i+(s?-t:t)/u}}function o(V,G,r,W,$,Z){var X=V._fullLayout;var J=V._fullLayout._size;var K=V._context.edits;var e,t;if(W){e="annotation-"+W;t=W+".annotations"}else{e="annotation";t="annotations"}var a=d(V.layout,t,G);var Q=a.modifyBase;var ee=a.modifyItem;var te=a.getUpdateObj;X._infolayer.selectAll("."+e+'[data-index="'+r+'"]').remove();var re="clip"+X._uid+"_ann"+r;if(!G._input||G.visible===false){c.selectAll("#"+re).remove();return}var ae={x:{},y:{}};var ne=+G.textangle||0;var ie=X._infolayer.append("g").classed(e,true).attr("data-index",String(r)).style("opacity",G.opacity);var oe=ie.append("g").classed("annotation-text-g",true);var se=K[G.showarrow?"annotationTail":"annotationPosition"];var n=G.captureevents||K.annotationText||se;function le(e){var t={index:r,annotation:G._input,fullAnnotation:G,event:e};if(W){t.subplotId=W}return t}var ue=oe.append("g").style("pointer-events",n?"all":null).call(Te,"pointer").on("click",function(){V._dragging=false;V.emit("plotly_clickannotation",le(c.event))});if(G.hovertext){ue.on("mouseover",function(){var e=G.hoverlabel;var t=e.font;var r=this.getBoundingClientRect();var a=V.getBoundingClientRect();f.loneHover({x0:r.left-a.left,x1:r.right-a.left,y:(r.top+r.bottom)/2-a.top,text:G.hovertext,color:e.bgcolor,borderColor:e.bordercolor,fontFamily:t.family,fontSize:t.size,fontColor:t.color},{container:X._hoverlayer.node(),outerContainer:X._paper.node(),gd:V})}).on("mouseout",function(){f.loneUnhover(X._hoverlayer.node())})}var ce=G.borderwidth;var i=G.borderpad;var fe=ce+i;var de=ue.append("rect").attr("class","bg").style("stroke-width",ce+"px").call(be.stroke,G.bordercolor).call(be.fill,G.bgcolor);var ve=G.width||G.height;var pe=X._topclips.selectAll("#"+re).data(ve?[0]:[]);pe.enter().append("clipPath").classed("annclip",true).attr("id",re).append("rect");pe.exit().remove();var o=G.font;var s=X._meta?ge.templateString(G.text,X._meta):G.text;var he=ue.append("text").classed("annotation-text",true).text(s);function l(e){e.call(_e.font,o).attr({"text-anchor":{left:"start",right:"end"}[G.align]||"middle"});we.convertToTspans(e,V,u);return e}function u(){var e=he.selectAll("a");if(e.size()===1&&e.text()===he.text()){var t=ue.insert("a",":first-child").attr({"xlink:xlink:href":e.attr("xlink:href"),"xlink:xlink:show":e.attr("xlink:show")}).style({cursor:"pointer"});t.node().appendChild(de.node())}var r=ue.select(".annotation-text-math-group");var a=!r.empty();var n=_e.bBox((a?r:he).node());var i=n.width;var o=n.height;var s=G.width||i;var l=G.height||o;var u=Math.round(s+2*fe);var c=Math.round(l+2*fe);function f(e,t){if(t==="auto"){if(e<1/3)t="left";else if(e>2/3)t="right";else t="center"}return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t]}var d=false;var v=["x","y"];for(var p=0;p<v.length;p++){var h=v[p];var m=G[h+"ref"]||h;var g=G["a"+h+"ref"];var y={x:$,y:Z}[h];var x=(ne+(h==="x"?0:-90))*Math.PI/180;var b=u*Math.cos(x);var _=c*Math.sin(x);var w=Math.abs(b)+Math.abs(_);var T=G[h+"anchor"];var k=G[h+"shift"]*(h==="x"?1:-1);var M=ae[h];var A;var S;var E;var L;var C;var D=xe.getRefType(m);if(y&&D!=="domain"){var O=y.r2fraction(G[h]);if(O<0||O>1){if(g===m){O=y.r2fraction(G["a"+h]);if(O<0||O>1){d=true}}else{d=true}}A=y._offset+y.r2p(G[h]);L=.5}else{var I=D==="domain";if(h==="x"){E=G[h];A=I?y._offset+y._length*E:A=J.l+J.w*E}else{E=1-G[h];A=I?y._offset+y._length*E:A=J.t+J.h*E}L=G.showarrow?.5:E}if(G.showarrow){M.head=A;var P=G["a"+h];C=b*f(.5,G.xanchor)-_*f(.5,G.yanchor);if(g===m){var R=xe.getRefType(g);if(R==="domain"){if(h==="y"){P=1-P}M.tail=y._offset+y._length*P}else if(R==="paper"){if(h==="y"){P=1-P;M.tail=J.t+J.h*P}else{M.tail=J.l+J.w*P}}else{M.tail=y._offset+y.r2p(P)}S=C}else{M.tail=A+P;S=C+P}M.text=M.tail+C;var N=X[h==="x"?"width":"height"];if(m==="paper"){M.head=ge.constrain(M.head,1,N-1)}if(g==="pixel"){var z=-Math.max(M.tail-3,M.text);var F=Math.min(M.tail+3,M.text)-N;if(z>0){M.tail+=z;M.text+=z}else if(F>0){M.tail-=F;M.text-=F}}M.tail+=k;M.head+=k}else{C=w*f(L,T);S=C;M.text=A+C}M.text+=k;C+=k;S+=k;G["_"+h+"padplus"]=w/2+S;G["_"+h+"padminus"]=w/2-S;G["_"+h+"size"]=w;G["_"+h+"shift"]=C}if(d){ue.remove();return}var j=0;var H=0;if(G.align!=="left"){j=(s-i)*(G.align==="center"?.5:1)}if(G.valign!=="top"){H=(l-o)*(G.valign==="middle"?.5:1)}if(a){r.select("svg").attr({x:fe+j-1,y:fe+H}).call(_e.setClipUrl,ve?re:null,V)}else{var B=fe+H-n.top;var q=fe+j-n.left;he.call(we.positionText,q,B).call(_e.setClipUrl,ve?re:null,V)}pe.select("rect").call(_e.setRect,fe,fe,s,l);de.call(_e.setRect,ce/2,ce/2,u-ce,c-ce);ue.call(_e.setTranslate,Math.round(ae.x.text-u/2),Math.round(ae.y.text-c/2));oe.attr({transform:"rotate("+ne+","+ae.x.text+","+ae.y.text+")"});var U=function(e,t){ie.selectAll(".annotation-arrow-g").remove();var r=ae.x.head;var a=ae.y.head;var n=ae.x.tail+e;var i=ae.y.tail+t;var o=ae.x.text+e;var s=ae.y.text+t;var l=ge.rotationXYMatrix(ne,o,s);var u=ge.apply2DTransform(l);var c=ge.apply2DTransform2(l);var f=+de.attr("width");var d=+de.attr("height");var v=o-.5*f;var p=v+f;var h=s-.5*d;var m=h+d;var g=[[v,h,v,m],[v,m,p,m],[p,m,p,h],[p,h,v,h]].map(c);if(g.reduce(function(e,t){return e^!!ge.segmentsIntersect(r,a,r+1e6,a+1e6,t[0],t[1],t[2],t[3])},false)){return}g.forEach(function(e){var t=ge.segmentsIntersect(n,i,r,a,e[0],e[1],e[2],e[3]);if(t){n=t.x;i=t.y}});var y=G.arrowwidth;var x=G.arrowcolor;var b=G.arrowside;var _=ie.append("g").style({opacity:be.opacity(x)}).classed("annotation-arrow-g",true);var w=_.append("path").attr("d","M"+n+","+i+"L"+r+","+a).style("stroke-width",y+"px").call(be.stroke,be.rgb(x));Me(w,b,G);if(K.annotationPosition&&w.node().parentNode&&!W){var T=r;var k=a;if(G.standoff){var M=Math.sqrt(Math.pow(r-n,2)+Math.pow(a-i,2));T+=G.standoff*(n-r)/M;k+=G.standoff*(i-a)/M}var A=_.append("path").classed("annotation-arrow",true).classed("anndrag",true).classed("cursor-move",true).attr({d:"M3,3H-3V-3H3ZM0,0L"+(n-T)+","+(i-k),transform:ye(T,k)}).style("stroke-width",y+6+"px").call(be.stroke,"rgba(0,0,0,0)").call(be.fill,"rgba(0,0,0,0)");var S,E;ke.init({element:A.node(),gd:V,prepFn:function(){var e=_e.getTranslate(ue);S=e.x;E=e.y;if($&&$.autorange){Q($._name+".autorange",true)}if(Z&&Z.autorange){Q(Z._name+".autorange",true)}},moveFn:function(e,t){var r=u(S,E);var a=r[0]+e;var n=r[1]+t;ue.call(_e.setTranslate,a,n);ee("x",Ae($,e,"x",J,G));ee("y",Ae(Z,t,"y",J,G));if(G.axref===G.xref){ee("ax",Ae($,e,"ax",J,G))}if(G.ayref===G.yref){ee("ay",Ae(Z,t,"ay",J,G))}_.attr("transform",ye(e,t));oe.attr({transform:"rotate("+ne+","+a+","+n+")"})},doneFn:function(){me.call("_guiRelayout",V,te());var e=document.querySelector(".js-notes-box-panel");if(e)e.redraw(e.selectedObj)}})}};if(G.showarrow)U(0,0);if(se){var Y;ke.init({element:ue.node(),gd:V,prepFn:function(){Y=oe.attr("transform")},moveFn:function(e,t){var r="pointer";if(G.showarrow){if(G.axref===G.xref){ee("ax",Ae($,e,"ax",J,G))}else{ee("ax",G.ax+e)}if(G.ayref===G.yref){ee("ay",Ae(Z,t,"ay",J.w,G))}else{ee("ay",G.ay+t)}U(e,t)}else if(!W){var a,n;if($){a=Ae($,e,"x",J,G)}else{var i=G._xsize/J.w;var o=G.x+(G._xshift-G.xshift)/J.w-i/2;a=ke.align(o+e/J.w,i,0,1,G.xanchor)}if(Z){n=Ae(Z,t,"y",J,G)}else{var s=G._ysize/J.h;var l=G.y-(G._yshift+G.yshift)/J.h-s/2;n=ke.align(l-t/J.h,s,0,1,G.yanchor)}ee("x",a);ee("y",n);if(!$||!Z){r=ke.getCursor($?.5:a,Z?.5:n,G.xanchor,G.yanchor)}}else return;oe.attr({transform:ye(e,t)+Y});Te(ue,r)},clickFn:function(e,t){if(G.captureevents){V.emit("plotly_clickannotation",le(t))}},doneFn:function(){Te(ue);me.call("_guiRelayout",V,te());var e=document.querySelector(".js-notes-box-panel");if(e)e.redraw(e.selectedObj)}})}}if(K.annotationText){he.call(we.makeEditable,{delegate:ue,gd:V}).call(l).on("edit",function(e){G.text=e;this.call(l);ee("text",e);if($&&$.autorange){Q($._name+".autorange",true)}if(Z&&Z.autorange){Q(Z._name+".autorange",true)}me.call("_guiRelayout",V,te())})}else he.call(l)}},{"../../lib":285,"../../lib/setcursor":305,"../../lib/svg_text_utils":307,"../../plot_api/plot_template":320,"../../plots/cartesian/axes":331,"../../plots/plots":366,"../../registry":373,"../color":155,"../dragelement":174,"../drawing":177,"../fx":195,"./draw_arrow_head":145,"@plotly/d3":20}],145:[function(e,t,r){"use strict";var O=e("@plotly/d3");var I=e("../color");var P=e("./arrow_paths");var a=e("../../lib");var R=a.strScale;var N=a.strRotate;var z=a.strTranslate;t.exports=function e(n,t,i){var o=n.node();var r=P[i.arrowhead||0];var a=P[i.startarrowhead||0];var s=(i.arrowwidth||1)*(i.arrowsize||1);var l=(i.arrowwidth||1)*(i.startarrowsize||1);var u=t.indexOf("start")>=0;var c=t.indexOf("end")>=0;var f=r.backoff*s+i.standoff;var d=a.backoff*l+i.startstandoff;var v,p,h,m;if(o.nodeName==="line"){v={x:+n.attr("x1"),y:+n.attr("y1")};p={x:+n.attr("x2"),y:+n.attr("y2")};var g=v.x-p.x;var y=v.y-p.y;h=Math.atan2(y,g);m=h+Math.PI;if(f&&d){if(f+d>Math.sqrt(g*g+y*y)){C();return}}if(f){if(f*f>g*g+y*y){C();return}var x=f*Math.cos(h);var b=f*Math.sin(h);p.x+=x;p.y+=b;n.attr({x2:p.x,y2:p.y})}if(d){if(d*d>g*g+y*y){C();return}var _=d*Math.cos(h);var w=d*Math.sin(h);v.x-=_;v.y-=w;n.attr({x1:v.x,y1:v.y})}}else if(o.nodeName==="path"){var T=o.getTotalLength();var k="";if(T<f+d){C();return}var M=o.getPointAtLength(0);var A=o.getPointAtLength(.1);h=Math.atan2(M.y-A.y,M.x-A.x);v=o.getPointAtLength(Math.min(d,T));k="0px,"+d+"px,";var S=o.getPointAtLength(T);var E=o.getPointAtLength(T-.1);m=Math.atan2(S.y-E.y,S.x-E.x);p=o.getPointAtLength(Math.max(0,T-f));var L=k?d+f:f;k+=T-L+"px,"+T+"px";n.style("stroke-dasharray",k)}function C(){n.style("stroke-dasharray","0px,100px")}function D(e,t,r,a){if(!e.path)return;if(e.noRotate)r=0;O.select(o.parentNode).append("path").attr({class:n.attr("class"),d:e.path,transform:z(t.x,t.y)+N(r*180/Math.PI)+R(a)}).style({fill:I.rgb(i.arrowcolor),"stroke-width":0})}if(u)D(a,v,h,l);if(c)D(r,p,m,s)}},{"../../lib":285,"../color":155,"./arrow_paths":137,"@plotly/d3":20}],146:[function(e,t,r){"use strict";var a=e("./draw");var n=e("./click");t.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:a.draw,drawOne:a.drawOne,drawRaw:a.drawRaw,hasClickToShow:n.hasClickToShow,onClick:n.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":344,"./attributes":138,"./calc_autorange":139,"./click":140,"./convert_coords":142,"./defaults":143,"./draw":144}],147:[function(e,t,r){"use strict";var a=e("../annotations/attributes");var n=e("../../plot_api/edit_types").overrideAll;var i=e("../../plot_api/plot_template").templatedArray;t.exports=n(i("annotation",{visible:a.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:a.xanchor,xshift:a.xshift,yanchor:a.yanchor,yshift:a.yshift,text:a.text,textangle:a.textangle,font:a.font,width:a.width,height:a.height,opacity:a.opacity,align:a.align,valign:a.valign,bgcolor:a.bgcolor,bordercolor:a.bordercolor,borderpad:a.borderpad,borderwidth:a.borderwidth,showarrow:a.showarrow,arrowcolor:a.arrowcolor,arrowhead:a.arrowhead,startarrowhead:a.startarrowhead,arrowside:a.arrowside,arrowsize:a.arrowsize,startarrowsize:a.startarrowsize,arrowwidth:a.arrowwidth,standoff:a.standoff,startstandoff:a.startstandoff,hovertext:a.hovertext,hoverlabel:a.hoverlabel,captureevents:a.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":313,"../../plot_api/plot_template":320,"../annotations/attributes":138}],148:[function(e,t,r){"use strict";var o=e("../../lib");var s=e("../../plots/cartesian/axes");t.exports=function e(t){var r=t.fullSceneLayout;var a=r.annotations;for(var n=0;n<a.length;n++){i(a[n],t)}t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function i(e,t){var r=t.fullSceneLayout;var a=r.domain;var n=t.fullLayout._size;var i={pdata:null,type:"linear",autorange:false,range:[-Infinity,Infinity]};e._xa={};o.extendFlat(e._xa,i);s.setConvert(e._xa);e._xa._offset=n.l+a.x[0]*n.w;e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*n.w*(a.x[1]-a.x[0])};e._ya={};o.extendFlat(e._ya,i);s.setConvert(e._ya);e._ya._offset=n.t+(1-a.y[1])*n.h;e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*n.h*(a.y[1]-a.y[0])}}},{"../../lib":285,"../../plots/cartesian/axes":331}],149:[function(e,t,r){"use strict";var s=e("../../lib");var l=e("../../plots/cartesian/axes");var n=e("../../plots/array_container_defaults");var u=e("../annotations/common_defaults");var c=e("./attributes");t.exports=function e(t,r,a){n(t,r,{name:"annotations",handleItemDefaults:i,fullLayout:a.fullLayout})};function i(r,a,n,e){function i(e,t){return s.coerce(r,a,c,e,t)}function t(e){var t=e+"axis";var r={_fullLayout:{}};r._fullLayout[t]=n[t];return l.coercePosition(a,r,i,e,e,.5)}var o=i("visible");if(!o)return;u(r,a,e.fullLayout,i);t("x");t("y");t("z");s.noneOrAll(r,a,["x","y","z"]);a.xref="x";a.yref="y";a.zref="z";i("xanchor");i("yanchor");i("xshift");i("yshift");if(a.showarrow){a.axref="pixel";a.ayref="pixel";i("ax",-10);i("ay",-30);s.noneOrAll(r,a,["ax","ay"])}}},{"../../lib":285,"../../plots/array_container_defaults":326,"../../plots/cartesian/axes":331,"../annotations/common_defaults":141,"./attributes":147}],150:[function(e,t,r){"use strict";var v=e("../annotations/draw").drawRaw;var p=e("../../plots/gl3d/project");var h=["x","y","z"];t.exports=function e(t){var r=t.fullSceneLayout;var a=t.dataScale;var n=r.annotations;for(var i=0;i<n.length;i++){var o=n[i];var s=false;for(var l=0;l<3;l++){var u=h[l];var c=o[u];var f=r[u+"axis"];var d=f.r2fraction(c);if(d<0||d>1){s=true;break}}if(s){t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+i+'"]').remove()}else{o._pdata=p(t.glplot.cameraParams,[r.xaxis.r2l(o.x)*a[0],r.yaxis.r2l(o.y)*a[1],r.zaxis.r2l(o.z)*a[2]]);v(t.graphDiv,o,i,t.id,o._xa,o._ya)}}}},{"../../plots/gl3d/project":363,"../annotations/draw":144}],151:[function(e,t,r){"use strict";var s=e("../../registry");var l=e("../../lib");t.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:a,convert:e("./convert"),draw:e("./draw")};function a(e,t){var r=s.subplotsRegistry.gl3d;if(!r)return;var a=r.attrRegex;var n=Object.keys(e);for(var i=0;i<n.length;i++){var o=n[i];if(a.test(o)&&(e[o].annotations||[]).length){l.pushUnique(t._basePlotModules,r);l.pushUnique(t._subplots.gl3d,o)}}}},{"../../lib":285,"../../registry":373,"./attributes":147,"./convert":148,"./defaults":149,"./draw":150}],152:[function(e,t,r){"use strict";t.exports=e("world-calendars/dist/main");e("world-calendars/dist/plus");e("world-calendars/dist/calendars/chinese");e("world-calendars/dist/calendars/coptic");e("world-calendars/dist/calendars/discworld");e("world-calendars/dist/calendars/ethiopian");e("world-calendars/dist/calendars/hebrew");e("world-calendars/dist/calendars/islamic");e("world-calendars/dist/calendars/julian");e("world-calendars/dist/calendars/mayan");e("world-calendars/dist/calendars/nanakshahi");e("world-calendars/dist/calendars/nepali");e("world-calendars/dist/calendars/persian");e("world-calendars/dist/calendars/taiwan");e("world-calendars/dist/calendars/thai");e("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":121,"world-calendars/dist/calendars/coptic":122,"world-calendars/dist/calendars/discworld":123,"world-calendars/dist/calendars/ethiopian":124,"world-calendars/dist/calendars/hebrew":125,"world-calendars/dist/calendars/islamic":126,"world-calendars/dist/calendars/julian":127,"world-calendars/dist/calendars/mayan":128,"world-calendars/dist/calendars/nanakshahi":129,"world-calendars/dist/calendars/nepali":130,"world-calendars/dist/calendars/persian":131,"world-calendars/dist/calendars/taiwan":132,"world-calendars/dist/calendars/thai":133,"world-calendars/dist/calendars/ummalqura":134,"world-calendars/dist/main":135,"world-calendars/dist/plus":136}],153:[function(e,t,r){"use strict";var a=e("./calendars");var i=e("../../lib");var n=e("../../constants/numerical");var f=n.EPOCHJD;var d=n.ONEDAY;var o={valType:"enumerated",values:Object.keys(a.calendars),editType:"calc",dflt:"gregorian"};var s=function(e,t,r,a){var n={};n[r]=o;return i.coerce(e,t,n,r,a)};var l=function(e,t,r,a){for(var n=0;n<r.length;n++){s(e,t,r[n]+"calendar",a.calendar)}};var u={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"};var c={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"};var v={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]};var p="##";var h={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:p,w:p,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function m(e,t,r){var a=Math.floor((t+.05)/d)+f;var n=y(r).fromJD(a);var i=0;var o,s,l,u,c;while((i=e.indexOf("%",i))!==-1){o=e.charAt(i+1);if(o==="0"||o==="-"||o==="_"){l=3;s=e.charAt(i+2);if(o==="_")o="-"}else{s=o;o="0";l=2}u=h[s];if(!u){i+=l}else{if(u===p)c=p;else c=n.formatDate(u[o]);e=e.substr(0,i)+c+e.substr(i+l);i+=c.length}}return e}var g={};function y(e){var t=g[e];if(t)return t;t=g[e]=a.instance(e);return t}function x(e){return i.extendFlat({},o,{description:e})}function b(e){return"Sets the calendar system to use with `"+e+"` date data."}var _={xcalendar:x(b("x"))};var w=i.extendFlat({},_,{ycalendar:x(b("y"))});var T=i.extendFlat({},w,{zcalendar:x(b("z"))});var k=x(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));t.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:w,bar:w,box:w,heatmap:w,contour:w,histogram:w,histogram2d:w,histogram2dcontour:w,scatter3d:T,surface:T,mesh3d:T,scattergl:w,ohlc:_,candlestick:_},layout:{calendar:x(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:k},yaxis:{calendar:k},scene:{xaxis:{calendar:k},yaxis:{calendar:k},zaxis:{calendar:k}},polar:{radialaxis:{calendar:k}}},transforms:{filter:{valuecalendar:x(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:x(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:o,handleDefaults:s,handleTraceDefaults:l,CANONICAL_SUNDAY:c,CANONICAL_TICK:u,DFLTRANGE:v,getCal:y,worldCalFmt:m}},{"../../constants/numerical":265,"../../lib":285,"./calendars":152}],154:[function(e,t,r){"use strict";r.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];r.defaultLine="#444";r.lightLine="#eee";r.background="#fff";r.borderLine="#BEC8D9";r.lightFraction=100*(14-4)/(15-4)},{}],155:[function(e,t,r){"use strict";var o=e("tinycolor2");var s=e("fast-isnumeric");var l=e("../../lib/array").isTypedArray;var u=t.exports={};var a=e("./attributes");u.defaults=a.defaults;var i=u.defaultLine=a.defaultLine;u.lightLine=a.lightLine;var c=u.background=a.background;u.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"};u.rgb=function(e){return u.tinyRGB(o(e))};u.opacity=function(e){return e?o(e).getAlpha():0};u.addOpacity=function(e,t){var r=o(e).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+t+")"};u.combine=function(e,t){var r=o(e).toRgb();if(r.a===1)return o(e).toRgbString();var a=o(t||c).toRgb();var n=a.a===1?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a};var i={r:n.r*(1-r.a)+r.r*r.a,g:n.g*(1-r.a)+r.g*r.a,b:n.b*(1-r.a)+r.b*r.a};return o(i).toRgbString()};u.contrast=function(e,t,r){var a=o(e);if(a.getAlpha()!==1)a=o(u.combine(e,c));var n=a.isDark()?t?a.lighten(t):c:r?a.darken(r):i;return n.toString()};u.stroke=function(e,t){var r=o(t);e.style({stroke:u.tinyRGB(r),"stroke-opacity":r.getAlpha()})};u.fill=function(e,t){var r=o(t);e.style({fill:u.tinyRGB(r),"fill-opacity":r.getAlpha()})};u.clean=function(e){if(!e||typeof e!=="object")return;var t=Object.keys(e);var r,a,n,i;for(r=0;r<t.length;r++){n=t[r];i=e[n];if(n.substr(n.length-5)==="color"){if(Array.isArray(i)){for(a=0;a<i.length;a++)i[a]=f(i[a])}else e[n]=f(i)}else if(n.substr(n.length-10)==="colorscale"&&Array.isArray(i)){for(a=0;a<i.length;a++){if(Array.isArray(i[a]))i[a][1]=f(i[a][1])}}else if(Array.isArray(i)){var o=i[0];if(!Array.isArray(o)&&o&&typeof o==="object"){for(a=0;a<i.length;a++)u.clean(i[a])}}else if(i&&typeof i==="object"&&!l(i))u.clean(i)}};function f(e){if(s(e)||typeof e!=="string")return e;var t=e.trim();if(t.substr(0,3)!=="rgb")return e;var r=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return e;var a=r[1].trim().split(/\s*[\s,]\s*/);var n=t.charAt(3)==="a"&&a.length===4;if(!n&&a.length!==3)return e;for(var i=0;i<a.length;i++){if(!a[i].length)return e;a[i]=Number(a[i]);if(!(a[i]>=0)){return e}if(i===3){if(a[i]>1)a[i]=1}else if(a[i]>=1){return e}}var o=Math.round(a[0]*255)+", "+Math.round(a[1]*255)+", "+Math.round(a[2]*255);if(n)return"rgba("+o+", "+a[3]+")";return"rgb("+o+")"}},{"../../lib/array":271,"./attributes":154,"fast-isnumeric":31,tinycolor2:119}],156:[function(e,t,r){"use strict";var a=e("../../plots/cartesian/layout_attributes");var n=e("../../plots/font_attributes");var i=e("../../lib/extend").extendFlat;var o=e("../../plot_api/edit_types").overrideAll;t.exports=o({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:a.linecolor,outlinewidth:a.linewidth,bordercolor:a.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:a.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:i({},a.ticks,{dflt:""}),ticklabeloverflow:i({},a.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside bottom","inside bottom"],dflt:"outside"},ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,showticklabels:a.showticklabels,tickfont:n({}),tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,tickprefix:a.tickprefix,showtickprefix:a.showtickprefix,ticksuffix:a.ticksuffix,showticksuffix:a.showticksuffix,separatethousands:a.separatethousands,exponentformat:a.exponentformat,minexponent:a.minexponent,showexponent:a.showexponent,title:{text:{valType:"string"},font:n({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:n({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":279,"../../plot_api/edit_types":313,"../../plots/cartesian/layout_attributes":346,"../../plots/font_attributes":360}],157:[function(e,t,r){"use strict";t.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],158:[function(e,t,r){"use strict";var p=e("../../lib");var h=e("../../plot_api/plot_template");var m=e("../../plots/cartesian/tick_value_defaults");var g=e("../../plots/cartesian/tick_mark_defaults");var y=e("../../plots/cartesian/tick_label_defaults");var x=e("./attributes");t.exports=function e(t,r,a){var n=h.newContainer(r,"colorbar");var i=t.colorbar||{};function o(e,t){return p.coerce(i,n,x,e,t)}var s=o("thicknessmode");o("thickness",s==="fraction"?30/(a.width-a.margin.l-a.margin.r):30);var l=o("lenmode");o("len",l==="fraction"?1:a.height-a.margin.t-a.margin.b);o("x");o("xanchor");o("xpad");o("y");o("yanchor");o("ypad");p.noneOrAll(i,n,["x","y"]);o("outlinecolor");o("outlinewidth");o("bordercolor");o("borderwidth");o("bgcolor");var u=o("ticklabelposition");o("ticklabeloverflow",u.indexOf("inside")!==-1?"hide past domain":"hide past div");m(i,n,o,"linear");var c=a.font;var f={outerTicks:false,font:c};if(u.indexOf("inside")!==-1){f.bgColor="black"}y(i,n,o,"linear",f);g(i,n,o,"linear",f);o("title.text",a._dfltTitle.colorbar);var d=n.tickfont;var v=p.extendFlat({},d,{color:c.color,size:p.bigFont(d.size)});p.coerceFont(o,"title.font",v);o("title.side")}},{"../../lib":285,"../../plot_api/plot_template":320,"../../plots/cartesian/tick_label_defaults":353,"../../plots/cartesian/tick_mark_defaults":354,"../../plots/cartesian/tick_value_defaults":355,"./attributes":156}],159:[function(e,t,r){"use strict";var q=e("@plotly/d3");var U=e("tinycolor2");var Y=e("../../plots/plots");var u=e("../../registry");var V=e("../../plots/cartesian/axes");var c=e("../dragelement");var G=e("../../lib");var W=G.strTranslate;var $=e("../../lib/extend").extendFlat;var f=e("../../lib/setcursor");var Z=e("../drawing");var X=e("../color");var J=e("../titles");var K=e("../../lib/svg_text_utils");var x=e("../colorscale/helpers").flipScale;var l=e("../../plots/cartesian/axis_defaults");var d=e("../../plots/cartesian/position_defaults");var v=e("../../plots/cartesian/layout_attributes");var a=e("../../constants/alignment");var Q=a.LINE_SPACING;var ee=a.FROM_TL;var te=a.FROM_BR;var re=e("./constants").cn;function n(a){var e=a._fullLayout;var t=e._infolayer.selectAll("g."+re.colorbar).data(i(a),function(e){return e._id});t.enter().append("g").attr("class",function(e){return e._id}).classed(re.colorbar,true);t.each(function(e){var t=q.select(this);G.ensureSingle(t,"rect",re.cbbg);G.ensureSingle(t,"g",re.cbfills);G.ensureSingle(t,"g",re.cblines);G.ensureSingle(t,"g",re.cbaxis,function(e){e.classed(re.crisp,true)});G.ensureSingle(t,"g",re.cbtitleunshift,function(e){e.append("g").classed(re.cbtitle,true)});G.ensureSingle(t,"rect",re.cboutline);var r=o(t,e,a);if(r&&r.then)(a._promises||[]).push(r);if(a._context.edits.colorbarPosition){s(t,e,a)}});t.exit().each(function(e){Y.autoMargin(a,e._id)}).remove();t.order()}function i(e){var t=e._fullLayout;var r=e.calcdata;var a=[];var n;var i;var o;var s;function l(e){return $(e,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function u(){if(typeof s.calc==="function"){s.calc(e,o,n)}else{n._fillgradient=i.reversescale?x(i.colorscale):i.colorscale;n._zrange=[i[s.min],i[s.max]]}}for(var c=0;c<r.length;c++){var f=r[c];o=f[0].trace;var d=o._module.colorbar;if(o.visible===true&&d){var v=Array.isArray(d);var p=v?d:[d];for(var h=0;h<p.length;h++){s=p[h];var m=s.container;i=m?o[m]:o;if(i&&i.showscale){n=l(i.colorbar);n._id="cb"+o.uid+(v&&m?"-"+m:"");n._traceIndex=o.index;n._propPrefix=(m?m+".":"")+"colorbar.";n._meta=o._meta;u();a.push(n)}}}}for(var g in t._colorAxes){i=t[g];if(i.showscale){var y=t._colorAxes[g];n=l(i.colorbar);n._id="cb"+g;n._propPrefix=g+".colorbar.";n._meta=t._meta;s={min:"cmin",max:"cmax"};if(y[0]!=="heatmap"){o=y[1];s.calc=o._module.colorbar.calc}u();a.push(n)}}return a}function o(d,v,p){var n=p._fullLayout;var h=n._size;var e=v._fillcolor;var m=v._line;var t=v.title;var g=t.side;var y=v._zrange||q.extent((typeof e==="function"?e:m.color).domain());var x=typeof m.color==="function"?m.color:function(){return m.color};var b=typeof e==="function"?e:function(){return e};var r=v._levels;var a=ae(p,v,y);var _=a.fill;var w=a.line;var T=Math.round(v.thickness*(v.thicknessmode==="fraction"?h.w:1));var i=T/h.w;var o=Math.round(v.len*(v.lenmode==="fraction"?h.h:1));var s=o/h.h;var l=v.xpad/h.w;var k=(v.borderwidth+v.outlinewidth)/2;var u=v.ypad/h.h;var M=Math.round(v.x*h.w+v.xpad);var c=v.x-i*({middle:.5,right:1}[v.xanchor]||0);var f=v.y+s*(({top:-.5,bottom:.5}[v.yanchor]||0)-.5);var A=Math.round(h.h*(1-f));var S=A-o;v._lenFrac=s;v._thickFrac=i;v._xLeftFrac=c;v._yBottomFrac=f;var E=v._axis=ne(p,v,y);E.position=v.x+l+i;if(["top","bottom"].indexOf(g)!==-1){E.title.side=g;E.titlex=v.x+l;E.titley=f+(t.side==="top"?s-u:u)}if(m.color&&v.tickmode==="auto"){E.tickmode="linear";E.tick0=r.start;var L=r.size;var C=G.constrain((A-S)/50,4,15)+1;var D=(y[1]-y[0])/((v.nticks||C)*L);if(D>1){var O=Math.pow(10,Math.floor(Math.log(D)/Math.LN10));L*=O*G.roundUp(D/O,[2,5,10]);if((Math.abs(r.start)/r.size+1e-6)%1<2e-6){E.tick0=0}}E.dtick=L}E.domain=[f+u,f+s-u];E.setScale();d.attr("transform",W(Math.round(h.l),Math.round(h.t)));var I=d.select("."+re.cbtitleunshift).attr("transform",W(-Math.round(h.l),-Math.round(h.t)));var P=d.select("."+re.cbaxis);var R;var N=0;function z(e,t){var r={propContainer:E,propName:v._propPrefix+"title",traceIndex:v._traceIndex,_meta:v._meta,placeholder:n._dfltTitle.colorbar,containerGroup:d.select("."+re.cbtitle)};var a=e.charAt(0)==="h"?e.substr(1):"h"+e;d.selectAll("."+a+",."+a+"-math-group").remove();J.draw(p,e,$(r,t||{}))}function F(){if(["top","bottom"].indexOf(g)!==-1){var e=h.l+(v.x+l)*h.w;var t=E.title.font.size;var r;if(g==="top"){r=(1-(f+s-u))*h.h+h.t+3+t*.75}else{r=(1-(f+u))*h.h+h.t-3-t*.25}z(E._id+"title",{attributes:{x:e,y:r,"text-anchor":"start"}})}}function j(){if(["top","bottom"].indexOf(g)===-1){var e=E.title.font.size;var t=E._offset+E._length/2;var r=h.l+(E.position||0)*h.w+(E.side==="right"?10+e*(E.showticklabels?1:.5):-10-e*(E.showticklabels?.5:0));z("h"+E._id+"title",{avoid:{selection:q.select(p).selectAll("g."+E._id+"tick"),side:g,offsetLeft:h.l,offsetTop:0,maxShift:n.width},attributes:{x:r,y:t,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}function H(){if(["top","bottom"].indexOf(g)!==-1){var e=d.select("."+re.cbtitle);var t=e.select("text");var r=[-v.outlinewidth/2,v.outlinewidth/2];var a=e.select(".h"+E._id+"title-math-group").node();var n=15.6;if(t.node()){n=parseInt(t.node().style.fontSize,10)*Q}if(a){N=Z.bBox(a).height;if(N>n){r[1]-=(N-n)/2}}else if(t.node()&&!t.classed(re.jsPlaceholder)){N=Z.bBox(t.node()).height}if(N){N+=5;if(g==="top"){E.domain[1]-=N/h.h;r[1]*=-1}else{E.domain[0]+=N/h.h;var i=K.lineCount(t);r[1]+=(1-i)*n}e.attr("transform",W(r[0],r[1]));E.setScale()}}d.selectAll("."+re.cbfills+",."+re.cblines).attr("transform",W(0,Math.round(h.h*(1-E.domain[1]))));P.attr("transform",W(0,Math.round(-h.t)));var o=d.select("."+re.cbfills).selectAll("rect."+re.cbfill).attr("style","").data(_);o.enter().append("rect").classed(re.cbfill,true).style("stroke","none");o.exit().remove();var s=y.map(E.c2p).map(Math.round).sort(function(e,t){return e-t});o.each(function(e,t){var r=[t===0?y[0]:(_[t]+_[t-1])/2,t===_.length-1?y[1]:(_[t]+_[t+1])/2].map(E.c2p).map(Math.round);r[1]=G.constrain(r[1]+(r[1]>r[0])?1:-1,s[0],s[1]);var a=q.select(this).attr({x:M,width:Math.max(T,2),y:q.min(r),height:Math.max(q.max(r)-q.min(r),2)});if(v._fillgradient){Z.gradient(a,p,v._id,"vertical",v._fillgradient,"fill")}else{var n=b(e).replace("e-","");a.attr("fill",U(n).toHexString())}});var l=d.select("."+re.cblines).selectAll("path."+re.cbline).data(m.color&&m.width?w:[]);l.enter().append("path").classed(re.cbline,true);l.exit().remove();l.each(function(e){q.select(this).attr("d","M"+M+","+(Math.round(E.c2p(e))+m.width/2%1)+"h"+T).call(Z.lineGroupStyle,m.width,x(e),m.dash)});P.selectAll("g."+E._id+"tick,path").remove();var u=M+T+(v.outlinewidth||0)/2-(v.ticks==="outside"?1:0);var c=V.calcTicks(E);var f=V.getTickSigns(E)[2];V.drawTicks(p,E,{vals:E.ticks==="inside"?V.clipEnds(E,c):c,layer:P,path:V.makeTickPath(E,u,f),transFn:V.makeTransTickFn(E)});return V.drawLabels(p,E,{vals:c,layer:P,transFn:V.makeTransTickLabelFn(E),labelFns:V.makeLabelFns(E,u)})}function B(){var e=T+v.outlinewidth/2;if(E.ticklabelposition.indexOf("inside")===-1){e+=Z.bBox(P.node()).width}R=I.select("text");if(R.node()&&!R.classed(re.jsPlaceholder)){var t=I.select(".h"+E._id+"title-math-group").node();var r;if(t&&["top","bottom"].indexOf(g)!==-1){r=Z.bBox(t).width}else{r=Z.bBox(I.node()).right-M-h.l}e=Math.max(e,r)}var a=2*v.xpad+e+v.borderwidth+v.outlinewidth/2;var n=A-S;d.select("."+re.cbbg).attr({x:M-v.xpad-(v.borderwidth+v.outlinewidth)/2,y:S-k,width:Math.max(a,2),height:Math.max(n+2*k,2)}).call(X.fill,v.bgcolor).call(X.stroke,v.bordercolor).style("stroke-width",v.borderwidth);d.selectAll("."+re.cboutline).attr({x:M,y:S+v.ypad+(g==="top"?N:0),width:Math.max(T,2),height:Math.max(n-2*v.ypad-N,2)}).call(X.stroke,v.outlinecolor).style({fill:"none","stroke-width":v.outlinewidth});var i=({center:.5,right:1}[v.xanchor]||0)*a;d.attr("transform",W(h.l-i,h.t));var o={};var s=ee[v.yanchor];var l=te[v.yanchor];if(v.lenmode==="pixels"){o.y=v.y;o.t=n*s;o.b=n*l}else{o.t=o.b=0;o.yt=v.y+v.len*s;o.yb=v.y-v.len*l}var u=ee[v.xanchor];var c=te[v.xanchor];if(v.thicknessmode==="pixels"){o.x=v.x;o.l=a*u;o.r=a*c}else{var f=a-T;o.l=f*u;o.r=f*c;o.xl=v.x-v.thickness*u;o.xr=v.x+v.thickness*c}Y.autoMargin(p,v._id,o)}return G.syncOrAsync([Y.previousPromises,F,H,j,Y.previousPromises,B],p)}function s(a,n,t){var e=t._fullLayout;var i=e._size;var o,s,l;c.init({element:a.node(),gd:t,prepFn:function(){o=a.attr("transform");f(a)},moveFn:function(e,t){a.attr("transform",o+W(e,t));s=c.align(n._xLeftFrac+e/i.w,n._thickFrac,0,1,n.xanchor);l=c.align(n._yBottomFrac-t/i.h,n._lenFrac,0,1,n.yanchor);var r=c.getCursor(s,l,n.xanchor,n.yanchor);f(a,r)},doneFn:function(){f(a);if(s!==undefined&&l!==undefined){var e={};e[n._propPrefix+"x"]=s;e[n._propPrefix+"y"]=l;if(n._traceIndex!==undefined){u.call("_guiRestyle",t,e,n._traceIndex)}else{u.call("_guiRelayout",t,e)}}}})}function ae(e,t,r){var a=t._levels;var n=[];var i=[];var o;var s;var l=a.end+a.size/100;var u=a.size;var c=1.001*r[0]-.001*r[1];var f=1.001*r[1]-.001*r[0];for(s=0;s<1e5;s++){o=a.start+s*u;if(u>0?o>=l:o<=l)break;if(o>c&&o<f)n.push(o)}if(t._fillgradient){i=[0]}else if(typeof t._fillcolor==="function"){var d=t._filllevels;if(d){l=d.end+d.size/100;u=d.size;for(s=0;s<1e5;s++){o=d.start+s*u;if(u>0?o>=l:o<=l)break;if(o>r[0]&&o<r[1])i.push(o)}}else{i=n.map(function(e){return e-a.size/2});i.push(i[i.length-1]+a.size)}}else if(t._fillcolor&&typeof t._fillcolor==="string"){i=[0]}if(a.size<0){n.reverse();i.reverse()}return{line:n,fill:i}}function ne(e,t,r){var a=e._fullLayout;var n={type:"linear",range:r,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:true,anchor:"free",side:"right",position:1};var i={type:"linear",_id:"y"+t._id};var o={letter:"y",font:a.font,noHover:true,noTickson:true,noTicklabelmode:true,calendar:a.calendar};function s(e,t){return G.coerce(n,i,v,e,t)}l(n,i,s,o,a);d(n,i,s,o);return i}t.exports={draw:n}},{"../../constants/alignment":260,"../../lib":285,"../../lib/extend":279,"../../lib/setcursor":305,"../../lib/svg_text_utils":307,"../../plots/cartesian/axes":331,"../../plots/cartesian/axis_defaults":333,"../../plots/cartesian/layout_attributes":346,"../../plots/cartesian/position_defaults":349,"../../plots/plots":366,"../../registry":373,"../color":155,"../colorscale/helpers":166,"../dragelement":174,"../drawing":177,"../titles":253,"./constants":157,"@plotly/d3":20,tinycolor2:119}],160:[function(e,t,r){"use strict";var a=e("../../lib");t.exports=function e(t){return a.isPlainObject(t.colorbar)}},{"../../lib":285}],161:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"colorbar",attributes:e("./attributes"),supplyDefaults:e("./defaults"),draw:e("./draw").draw,hasColorbar:e("./has_colorbar")}},{"./attributes":156,"./defaults":158,"./draw":159,"./has_colorbar":160}],162:[function(e,t,r){"use strict";var k=e("../colorbar/attributes");var M=e("../../lib/regex").counter;var A=e("./scales.js").scales;var a=Object.keys(A);function S(e){return"`"+e+"`"}t.exports=function e(t,r){t=t||"";r=r||{};var a=r.cLetter||"c";var n="onlyIfNumerical"in r?r.onlyIfNumerical:Boolean(t);var i="noScale"in r?r.noScale:t==="marker.line";var o="showScaleDflt"in r?r.showScaleDflt:a==="z";var s=typeof r.colorscaleDflt==="string"?A[r.colorscaleDflt]:null;var l=r.editTypeOverride||"";var u=t?t+".":"";var c,f;if("colorAttr"in r){c=r.colorAttr;f=r.colorAttr}else{c={z:"z",c:"color"}[a];f="in "+S(u+c)}var d=n?" Has an effect only if "+f+"is set to a numerical array.":"";var v=a+"auto";var p=a+"min";var h=a+"max";var m=a+"mid";var g=S(u+v);var y=S(u+p);var x=S(u+h);var b=y+" and "+x;var _={};_[p]=_[h]=undefined;var w={};w[v]=false;var T={};if(c==="color"){T.color={valType:"color",arrayOk:true,editType:l||"style"};if(r.anim){T.color.anim=true}}T[v]={valType:"boolean",dflt:true,editType:"calc",impliedEdits:_};T[p]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:w};T[h]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:w};T[m]={valType:"number",dflt:null,editType:"calc",impliedEdits:_};T.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:false}};T.autocolorscale={valType:"boolean",dflt:r.autoColorDflt===false?false:true,editType:"calc",impliedEdits:{colorscale:undefined}};T.reversescale={valType:"boolean",dflt:false,editType:"plot"};if(!i){T.showscale={valType:"boolean",dflt:o,editType:"calc"};T.colorbar=k}if(!r.noColorAxis){T.coloraxis={valType:"subplotid",regex:M("coloraxis"),dflt:null,editType:"calc"}}return T}},{"../../lib/regex":301,"../colorbar/attributes":156,"./scales.js":170}],163:[function(e,t,r){"use strict";var m=e("fast-isnumeric");var g=e("../../lib");var y=e("./helpers").extractOpts;t.exports=function e(t,r,a){var n=t._fullLayout;var i=a.vals;var o=a.containerStr;var s=o?g.nestedProperty(r,o).get():r;var l=y(s);var u=l.auto!==false;var c=l.min;var f=l.max;var d=l.mid;var v=function(){return g.aggNums(Math.min,null,i)};var p=function(){return g.aggNums(Math.max,null,i)};if(c===undefined){c=v()}else if(u){if(s._colorAx&&m(c)){c=Math.min(c,v())}else{c=v()}}if(f===undefined){f=p()}else if(u){if(s._colorAx&&m(f)){f=Math.max(f,p())}else{f=p()}}if(u&&d!==undefined){if(f-d>d-c){c=d-(f-d)}else if(f-d<d-c){f=d+(d-c)}}if(c===f){c-=.5;f+=.5}l._sync("min",c);l._sync("max",f);if(l.autocolorscale){var h;if(c*f<0)h=n.colorscale.diverging;else if(c>=0)h=n.colorscale.sequential;else h=n.colorscale.sequentialminus;l._sync("colorscale",h)}}},{"../../lib":285,"./helpers":166,"fast-isnumeric":31}],164:[function(e,t,r){"use strict";var c=e("../../lib");var f=e("./helpers").hasColorscale;var d=e("./helpers").extractOpts;t.exports=function e(t,i){function o(e,t){var r=e["_"+t];if(r!==undefined){e[t]=r}}function r(e,t){var r=t.container?c.nestedProperty(e,t.container).get():e;if(r){if(r.coloraxis){r._colorAx=i[r.coloraxis]}else{var a=d(r);var n=a.auto;if(n||a.min===undefined){o(r,t.min)}if(n||a.max===undefined){o(r,t.max)}if(a.autocolorscale){o(r,"colorscale")}}}}for(var a=0;a<t.length;a++){var n=t[a];var s=n._module.colorbar;if(s){if(Array.isArray(s)){for(var l=0;l<s.length;l++){r(n,s[l])}}else{r(n,s)}}if(f(n,"marker.line")){r(n,{container:"marker.line",min:"cmin",max:"cmax"})}}for(var u in i._colorAxes){r(i[u],{min:"cmin",max:"cmax"})}}},{"../../lib":285,"./helpers":166}],165:[function(e,t,r){"use strict";var A=e("fast-isnumeric");var S=e("../../lib");var E=e("../colorbar/has_colorbar");var L=e("../colorbar/defaults");var C=e("./scales").isValid;var D=e("../../registry").traceIs;function O(e,t){var r=t.slice(0,t.length-1);return t?S.nestedProperty(e,r).get()||{}:e}t.exports=function e(t,r,a,n,i){var o=i.prefix;var s=i.cLetter;var l="_module"in r;var u=O(t,o);var c=O(r,o);var f=O(r._template||{},o)||{};var d=function(){delete t.coloraxis;delete r.coloraxis;return e(t,r,a,n,i)};if(l){var v=a._colorAxes||{};var p=n(o+"coloraxis");if(p){var h=D(r,"contour")&&S.nestedProperty(r,"contours.coloring").get()||"heatmap";var m=v[p];if(m){m[2].push(d);if(m[0]!==h){m[0]=false;S.warn(["Ignoring coloraxis:",p,"setting","as it is linked to incompatible colorscales."].join(" "))}}else{v[p]=[h,r,[d]]}return}}var g=u[s+"min"];var y=u[s+"max"];var x=A(g)&&A(y)&&g<y;var b=n(o+s+"auto",!x);if(b){n(o+s+"mid")}else{n(o+s+"min");n(o+s+"max")}var _=u.colorscale;var w=f.colorscale;var T;if(_!==undefined)T=!C(_);if(w!==undefined)T=!C(w);n(o+"autocolorscale",T);n(o+"colorscale");n(o+"reversescale");if(o!=="marker.line."){var k;if(o&&l)k=E(u);var M=n(o+"showscale",k);if(M){if(o&&f)c._template=f;L(u,c,a)}}}},{"../../lib":285,"../../registry":373,"../colorbar/defaults":158,"../colorbar/has_colorbar":160,"./scales":170,"fast-isnumeric":31}],166:[function(e,t,r){"use strict";var d=e("@plotly/d3");var v=e("tinycolor2");var p=e("fast-isnumeric");var s=e("../../lib");var h=e("../color");var l=e("./scales").isValid;function a(e,t,r){var a=t?s.nestedProperty(e,t).get()||{}:e;var n=a[r||"color"];var i=false;if(s.isArrayOrTypedArray(n)){for(var o=0;o<n.length;o++){if(p(n[o])){i=true;break}}}return s.isPlainObject(a)&&(i||a.showscale===true||p(a.cmin)&&p(a.cmax)||l(a.colorscale)||s.isPlainObject(a.colorbar))}var u=["showscale","autocolorscale","colorscale","reversescale","colorbar"];var c=["min","max","mid","auto"];function f(e){var t=e._colorAx;var a=t?t:e;var r={};var n;var i,o;for(i=0;i<u.length;i++){o=u[i];r[o]=a[o]}if(t){n="c";for(i=0;i<c.length;i++){o=c[i];r[o]=a["c"+o]}}else{var s;for(i=0;i<c.length;i++){o=c[i];s="c"+o;if(s in a){r[o]=a[s];continue}s="z"+o;if(s in a){r[o]=a[s]}}n=s.charAt(0)}r._sync=function(e,t){var r=c.indexOf(e)!==-1?n+e:e;a[r]=a["_"+r]=t};return r}function n(e){var t=f(e);var r=t.min;var a=t.max;var n=t.reversescale?m(t.colorscale):t.colorscale;var i=n.length;var o=new Array(i);var s=new Array(i);for(var l=0;l<i;l++){var u=n[l];o[l]=r+u[0]*(a-r);s[l]=u[1]}return{domain:o,range:s}}function m(e){var t=e.length;var r=new Array(t);for(var a=t-1,n=0;a>=0;a--,n++){var i=e[a];r[n]=[1-i[0],i[1]]}return r}function i(e,t){t=t||{};var r=e.domain;var a=e.range;var n=a.length;var i=new Array(n);for(var o=0;o<n;o++){var s=v(a[o]).toRgb();i[o]=[s.r,s.g,s.b,s.a]}var l=d.scale.linear().domain(r).range(i).clamp(true);var u=t.noNumericCheck;var c=t.returnArray;var f;if(u&&c){f=l}else if(u){f=function(e){return g(l(e))}}else if(c){f=function(e){if(p(e))return l(e);else if(v(e).isValid())return e;else return h.defaultLine}}else{f=function(e){if(p(e))return g(l(e));else if(v(e).isValid())return e;else return h.defaultLine}}f.domain=l.domain;f.range=function(){return a};return f}function o(e,t){return i(n(e),t)}function g(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return v(t).toRgbString()}t.exports={hasColorscale:a,extractOpts:f,extractScale:n,flipScale:m,makeColorScaleFunc:i,makeColorScaleFuncFromTrace:o}},{"../../lib":285,"../color":155,"./scales":170,"@plotly/d3":20,"fast-isnumeric":31,tinycolor2:119}],167:[function(e,t,r){"use strict";var a=e("./scales");var n=e("./helpers");t.exports={moduleType:"component",name:"colorscale",attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),handleDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc"),scales:a.scales,defaultScale:a.defaultScale,getScale:a.get,isValidScale:a.isValid,hasColorscale:n.hasColorscale,extractOpts:n.extractOpts,extractScale:n.extractScale,flipScale:n.flipScale,makeColorScaleFunc:n.makeColorScaleFunc,makeColorScaleFuncFromTrace:n.makeColorScaleFuncFromTrace}},{"./attributes":162,"./calc":163,"./cross_trace_defaults":164,"./defaults":165,"./helpers":166,"./layout_attributes":168,"./layout_defaults":169,"./scales":170}],168:[function(e,t,r){"use strict";var a=e("../../lib/extend").extendFlat;var n=e("./attributes");var i=e("./scales").scales;var o="Note that `autocolorscale` must be true for this attribute to work.";t.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:i.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:i.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:i.RdBu,editType:"calc"}},coloraxis:a({_isSubplotObj:true,editType:"calc"},n("",{colorAttr:"corresponding trace color array(s)",noColorAxis:true,showScaleDflt:true}))}},{"../../lib/extend":279,"./attributes":162,"./scales":170}],169:[function(e,t,r){"use strict";var f=e("../../lib");var d=e("../../plot_api/plot_template");var v=e("./layout_attributes");var p=e("./defaults");t.exports=function e(r,a){function t(e,t){return f.coerce(r,a,v,e,t)}t("colorscale.sequential");t("colorscale.sequentialminus");t("colorscale.diverging");var n=a._colorAxes;var i,o;function s(e,t){return f.coerce(i,o,v.coloraxis,e,t)}for(var l in n){var u=n[l];if(u[0]){i=r[l]||{};o=d.newContainer(a,l,"coloraxis");o._name=l;p(i,o,a,s,{prefix:"",cLetter:"c"})}else{for(var c=0;c<u[2].length;c++){u[2][c]()}delete a._colorAxes[l]}}}},{"../../lib":285,"../../plot_api/plot_template":320,"./defaults":165,"./layout_attributes":168}],170:[function(e,t,r){"use strict";var n=e("tinycolor2");var a={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]};var i=a.RdBu;function o(t,r){if(!r)r=i;if(!t)return r;function e(){try{t=a[t]||JSON.parse(t)}catch(e){t=r}}if(typeof t==="string"){e();if(typeof t==="string")e()}if(!s(t))return r;return t}function s(e){var t=0;if(!Array.isArray(e)||e.length<2)return false;if(!e[0]||!e[e.length-1])return false;if(+e[0][0]!==0||+e[e.length-1][0]!==1)return false;for(var r=0;r<e.length;r++){var a=e[r];if(a.length!==2||+a[0]<t||!n(a[1]).isValid()){return false}t=+a[0]}return true}function l(e){if(a[e]!==undefined)return true;else return s(e)}t.exports={scales:a,defaultScale:i,get:o,isValid:l}},{tinycolor2:119}],171:[function(e,t,r){"use strict";t.exports=function e(t,r,a,n,i){var o=(t-a)/(n-a);var s=o+r/(n-a);var l=(o+s)/2;if(i==="left"||i==="bottom")return o;if(i==="center"||i==="middle")return l;if(i==="right"||i==="top")return s;if(o<2/3-l)return o;if(s>4/3-l)return s;return l}},{}],172:[function(e,t,r){"use strict";var i=e("../../lib");var o=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];t.exports=function e(t,r,a,n){if(a==="left")t=0;else if(a==="center")t=1;else if(a==="right")t=2;else t=i.constrain(Math.floor(t*3),0,2);if(n==="bottom")r=0;else if(n==="middle")r=1;else if(n==="top")r=2;else r=i.constrain(Math.floor(r*3),0,2);return o[r][t]}},{"../../lib":285}],173:[function(e,t,r){"use strict";r.selectMode=function(e){return e==="lasso"||e==="select"};r.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"};r.openMode=function(e){return e==="drawline"||e==="drawopenpath"};r.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"};r.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"};r.selectingOrDrawing=function(e){return r.freeMode(e)||r.rectMode(e)}},{}],174:[function(e,t,r){"use strict";var a=e("mouse-event-offset");var x=e("has-hover");var b=e("has-passive-events");var _=e("../../lib").removeElement;var w=e("../../plots/cartesian/constants");var T=t.exports={};T.align=e("./align");T.getCursor=e("./cursor");var n=e("./unhover");T.unhover=n.wrapped;T.unhoverRaw=n.raw;T.init=function e(o){var s=o.gd;var n=1;var i=s._context.doubleClickDelay;var l=o.element;var u,c,r,f,d,v,p,h;if(!s._mouseDownTime)s._mouseDownTime=0;l.style.pointerEvents="all";l.onmousedown=a;if(!b){l.ontouchstart=a}else{if(l._ontouchstart){l.removeEventListener("touchstart",l._ontouchstart)}l._ontouchstart=a;l.addEventListener("touchstart",a,{passive:false})}function t(e,t,r){if(Math.abs(e)<r)e=0;if(Math.abs(t)<r)t=0;return[e,t]}var m=o.clampFn||t;function a(e){s._dragged=false;s._dragging=true;var t=M(e);u=t[0];c=t[1];p=e.target;v=e;h=e.buttons===2||e.ctrlKey;if(typeof e.clientX==="undefined"&&typeof e.clientY==="undefined"){e.clientX=u;e.clientY=c}r=(new Date).getTime();if(r-s._mouseDownTime<i){n+=1}else{n=1;s._mouseDownTime=r}if(o.prepFn)o.prepFn(e,u,c);if(x&&!h){d=k();d.style.cursor=window.getComputedStyle(l).cursor}else if(!x){d=document;f=window.getComputedStyle(document.documentElement).cursor;document.documentElement.style.cursor=window.getComputedStyle(l).cursor}document.addEventListener("mouseup",y);document.addEventListener("touchend",y);if(o.dragmode!==false){e.preventDefault();document.addEventListener("mousemove",g);document.addEventListener("touchmove",g,{passive:false})}return}function g(e){e.preventDefault();var t=M(e);var r=o.minDrag||w.MINDRAG;var a=m(t[0]-u,t[1]-c,r);var n=a[0];var i=a[1];if(n||i){s._dragged=true;T.unhover(s,e)}if(s._dragged&&o.moveFn&&!h){s._dragdata={element:l,dx:n,dy:i};o.moveFn(n,i)}return}function y(t){delete s._dragdata;if(o.dragmode!==false){t.preventDefault();document.removeEventListener("mousemove",g);document.removeEventListener("touchmove",g)}document.removeEventListener("mouseup",y);document.removeEventListener("touchend",y);if(x){_(d)}else if(f){d.documentElement.style.cursor=f;f=null}if(!s._dragging){s._dragged=false;return}s._dragging=false;if((new Date).getTime()-s._mouseDownTime>i){n=Math.max(n-1,1)}if(s._dragged){if(o.doneFn)o.doneFn()}else{if(o.clickFn)o.clickFn(n,v);if(!h){var r;try{r=new MouseEvent("click",t)}catch(e){var a=M(t);r=document.createEvent("MouseEvents");r.initMouseEvent("click",t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,a[0],a[1],t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}p.dispatchEvent(r)}}s._dragging=false;s._dragged=false;return}};function k(){var e=document.createElement("div");e.className="dragcover";var t=e.style;t.position="fixed";t.left=0;t.right=0;t.top=0;t.bottom=0;t.zIndex=999999999;t.background="none";document.body.appendChild(e);return e}T.coverSlip=k;function M(e){return a(e.changedTouches?e.changedTouches[0]:e,document.body)}},{"../../lib":285,"../../plots/cartesian/constants":338,"./align":171,"./cursor":172,"./unhover":175,"has-hover":62,"has-passive-events":63,"mouse-event-offset":69}],175:[function(e,t,r){"use strict";var i=e("../../lib/events");var a=e("../../lib/throttle");var n=e("../../lib/dom").getGraphDiv;var o=e("../fx/constants");var s=t.exports={};s.wrapped=function(e,t,r){e=n(e);if(e._fullLayout){a.clear(e._fullLayout._uid+o.HOVERID)}s.raw(e,t,r)};s.raw=function e(t,r){var a=t._fullLayout;var n=t._hoverdata;if(!r)r={};if(r.target&&!t._dragged&&i.triggerHandler(t,"plotly_beforehover",r)===false){return}a._hoverlayer.selectAll("g").remove();a._hoverlayer.selectAll("line").remove();a._hoverlayer.selectAll("circle").remove();t._hoverdata=undefined;if(r.target&&n){t.emit("plotly_unhover",{event:r,points:n})}}},{"../../lib/dom":277,"../../lib/events":278,"../../lib/throttle":308,"../fx/constants":189}],176:[function(e,t,r){"use strict";r.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"};r.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:true,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:true,editType:"style"},fgcolor:{valType:"color",arrayOk:true,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:true,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:true,editType:"style"},editType:"style"}},{}],177:[function(e,t,r){"use strict";var S=e("@plotly/d3");var o=e("fast-isnumeric");var h=e("tinycolor2");var b=e("../../registry");var E=e("../color");var n=e("../colorscale");var L=e("../../lib");var f=L.strTranslate;var m=e("../../lib/svg_text_utils");var a=e("../../constants/xmlns_namespaces");var i=e("../../constants/alignment");var d=i.LINE_SPACING;var _=e("../../constants/interactions").DESELECTDIM;var s=e("../../traces/scatter/subtypes");var l=e("../../traces/scatter/make_bubble_size_func");var g=e("../../components/fx/helpers").appendArrayPointValue;var C=t.exports={};C.font=function(e,t,r,a){if(L.isPlainObject(t)){a=t.color;r=t.size;t=t.family}if(t)e.style("font-family",t);if(r+1)e.style("font-size",r+"px");if(a)e.call(E.fill,a)};C.setPosition=function(e,t,r){e.attr("x",t).attr("y",r)};C.setSize=function(e,t,r){e.attr("width",t).attr("height",r)};C.setRect=function(e,t,r,a,n){e.call(C.setPosition,t,r).call(C.setSize,a,n)};C.translatePoint=function(e,t,r,a){var n=r.c2p(e.x);var i=a.c2p(e.y);if(o(n)&&o(i)&&t.node()){if(t.node().nodeName==="text"){t.attr("x",n).attr("y",i)}else{t.attr("transform",f(n,i))}}else{return false}return true};C.translatePoints=function(e,r,a){e.each(function(e){var t=S.select(this);C.translatePoint(e,t,r,a)})};C.hideOutsideRangePoint=function(e,t,r,a,n,i){t.attr("display",r.isPtWithinRange(e,n)&&a.isPtWithinRange(e,i)?null:"none")};C.hideOutsideRangePoints=function(i,e){if(!e._hasClipOnAxisFalse)return;var o=e.xaxis;var s=e.yaxis;i.each(function(e){var t=e[0].trace;var r=t.xcalendar;var a=t.ycalendar;var n=b.traceIs(t,"bar-like")?".bartext":".point,.textpoint";i.selectAll(n).each(function(e){C.hideOutsideRangePoint(e,S.select(this),o,s,r,a)})})};C.crispRound=function(e,t,r){if(!t||!o(t))return r||0;if(e._context.staticPlot)return t;if(t<1)return 1;return Math.round(t)};C.singleLineStyle=function(e,t,r,a,n){t.style("fill","none");var i=(((e||[])[0]||{}).trace||{}).line||{};var o=r||i.width||0;var s=n||i.dash||"";E.stroke(t,a||i.color);C.dashLine(t,s,o)};C.lineGroupStyle=function(e,n,i,o){e.style("fill","none").each(function(e){var t=(((e||[])[0]||{}).trace||{}).line||{};var r=n||t.width||0;var a=o||t.dash||"";S.select(this).call(E.stroke,i||t.color).call(C.dashLine,a,r)})};C.dashLine=function(e,t,r){r=+r||0;t=C.dashStyle(t,r);e.style({"stroke-dasharray":t,"stroke-width":r+"px"})};C.dashStyle=function(e,t){t=+t||1;var r=Math.max(t,3);if(e==="solid")e="";else if(e==="dot")e=r+"px,"+r+"px";else if(e==="dash")e=3*r+"px,"+3*r+"px";else if(e==="longdash")e=5*r+"px,"+5*r+"px";else if(e==="dashdot"){e=3*r+"px,"+r+"px,"+r+"px,"+r+"px"}else if(e==="longdashdot"){e=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"}return e};C.singleFillStyle=function(e){var t=S.select(e.node());var r=t.data();var a=(((r[0]||[])[0]||{}).trace||{}).fillcolor;if(a){e.call(E.fill,a)}};C.fillGroupStyle=function(e){e.style("stroke-width",0).each(function(e){var t=S.select(this);if(e[0].trace){t.call(E.fill,e[0].trace.fillcolor)}})};var u=e("./symbol_defs");C.symbolNames=[];C.symbolFuncs=[];C.symbolNeedLines={};C.symbolNoDot={};C.symbolNoFill={};C.symbolList=[];Object.keys(u).forEach(function(e){var t=u[e];var r=t.n;C.symbolList.push(r,String(r),e,r+100,String(r+100),e+"-open");C.symbolNames[r]=e;C.symbolFuncs[r]=t.f;if(t.needLine){C.symbolNeedLines[r]=true}if(t.noDot){C.symbolNoDot[r]=true}else{C.symbolList.push(r+200,String(r+200),e+"-dot",r+300,String(r+300),e+"-open-dot")}if(t.noFill){C.symbolNoFill[r]=true}});var c=C.symbolNames.length;var v="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";C.symbolNumber=function(e){if(o(e)){e=+e}else if(typeof e==="string"){var t=0;if(e.indexOf("-open")>0){t=100;e=e.replace("-open","")}if(e.indexOf("-dot")>0){t+=200;e=e.replace("-dot","")}e=C.symbolNames.indexOf(e);if(e>=0){e+=t}}return e%100>=c||e>=400?0:Math.floor(Math.max(e,0))};function D(e,t){var r=e%100;return C.symbolFuncs[r](t)+(e>=200?v:"")}var p={x1:1,x2:0,y1:0,y2:0};var y={x1:0,x2:0,y1:1,y2:0};var x=S.format("~.1f");var O={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:true},horizontal:{node:"linearGradient",attrs:p},horizontalreversed:{node:"linearGradient",attrs:p,reversed:true},vertical:{node:"linearGradient",attrs:y},verticalreversed:{node:"linearGradient",attrs:y,reversed:true}};C.gradient=function(e,t,r,a,n,i){var o=n.length;var s=O[a];var l=new Array(o);for(var u=0;u<o;u++){if(s.reversed){l[o-1-u]=[x((1-n[u][0])*100),n[u][1]]}else{l[u]=[x(n[u][0]*100),n[u][1]]}}var c=t._fullLayout;var f="g"+c._uid+"-"+r;var d=c._defs.select(".gradients").selectAll("#"+f).data([a+l.join(";")],L.identity);d.exit().remove();d.enter().append(s.node).each(function(){var e=S.select(this);if(s.attrs)e.attr(s.attrs);e.attr("id",f);var t=e.selectAll("stop").data(l);t.exit().remove();t.enter().append("stop");t.each(function(e){var t=h(e[1]);S.select(this).attr({offset:e[0]+"%","stop-color":E.tinyRGB(t),"stop-opacity":t.getAlpha()})})});e.style(i,F(f,t)).style(i+"-opacity",null);var v=function(e){return"."+e.attr("class").replace(/\s/g,".")};var p=v(S.select(e.node().parentNode))+">"+v(e);c._gradientUrlQueryParts[p]=1};C.pattern=function(e,t,r,a,n,i,o,s,l,u,c,f){var d=t==="legend";if(s){if(l==="overlay"){u=s;c=E.contrast(u)}else{u=undefined;c=s}}var v=r._fullLayout;var p="p"+v._uid+"-"+a;var h,m;var g=function(e,t,r,a,n){return a+(n-a)*(e-t)/(r-t)};var y,x,b;var _;var w={};switch(n){case"/":h=i*Math.sqrt(2);m=i*Math.sqrt(2);y="M-"+h/4+","+m/4+"l"+h/2+",-"+m/2+"M0,"+m+"L"+h+",0"+"M"+h/4*3+","+m/4*5+"l"+h/2+",-"+m/2;x=o*i;_="path";w={d:y,opacity:f,stroke:c,"stroke-width":x+"px"};break;case"\\":h=i*Math.sqrt(2);m=i*Math.sqrt(2);y="M"+h/4*3+",-"+m/4+"l"+h/2+","+m/2+"M0,0L"+h+","+m+"M-"+h/4+","+m/4*3+"l"+h/2+","+m/2;x=o*i;_="path";w={d:y,opacity:f,stroke:c,"stroke-width":x+"px"};break;case"x":h=i*Math.sqrt(2);m=i*Math.sqrt(2);y="M-"+h/4+","+m/4+"l"+h/2+",-"+m/2+"M0,"+m+"L"+h+",0"+"M"+h/4*3+","+m/4*5+"l"+h/2+",-"+m/2+"M"+h/4*3+",-"+m/4+"l"+h/2+","+m/2+"M0,0L"+h+","+m+"M-"+h/4+","+m/4*3+"l"+h/2+","+m/2;x=i-i*Math.sqrt(1-o);_="path";w={d:y,opacity:f,stroke:c,"stroke-width":x+"px"};break;case"|":h=i;m=i;_="path";y="M"+h/2+",0L"+h/2+","+m;x=o*i;_="path";w={d:y,opacity:f,stroke:c,"stroke-width":x+"px"};break;case"-":h=i;m=i;_="path";y="M0,"+m/2+"L"+h+","+m/2;x=o*i;_="path";w={d:y,opacity:f,stroke:c,"stroke-width":x+"px"};break;case"+":h=i;m=i;_="path";y="M"+h/2+",0L"+h/2+","+m+"M0,"+m/2+"L"+h+","+m/2;x=i-i*Math.sqrt(1-o);_="path";w={d:y,opacity:f,stroke:c,"stroke-width":x+"px"};break;case".":h=i;m=i;if(o<Math.PI/4){b=Math.sqrt(o*i*i/Math.PI)}else{b=g(o,Math.PI/4,1,i/2,i/Math.sqrt(2))}_="circle";w={cx:h/2,cy:m/2,r:b,opacity:f,fill:c};break}var T=[n||"noSh",u||"noBg",c||"noFg",i,o].join(";");var k=v._defs.select(".patterns").selectAll("#"+p).data([T],L.identity);k.exit().remove();k.enter().append("pattern").each(function(){var e=S.select(this);e.attr({id:p,width:h+"px",height:m+"px",patternUnits:"userSpaceOnUse",patternTransform:d?"scale(0.8)":""});if(u){var t=e.selectAll("rect").data([0]);t.exit().remove();t.enter().append("rect").attr({width:h+"px",height:m+"px",fill:u})}var r=e.selectAll(_).data([0]);r.exit().remove();r.enter().append(_).attr(w)});e.style("fill",F(p,r)).style("fill-opacity",null);e.classed("pattern_filled",true);var M=function(e){return"."+e.attr("class").replace(/\s/g,".")};var A=M(S.select(e.node().parentNode))+">.pattern_filled";v._patternUrlQueryParts[A]=1};C.initGradients=function(e){var t=e._fullLayout;var r=L.ensureSingle(t._defs,"g","gradients");r.selectAll("linearGradient,radialGradient").remove();t._gradientUrlQueryParts={}};C.initPatterns=function(e){var t=e._fullLayout;var r=L.ensureSingle(t._defs,"g","patterns");r.selectAll("pattern").remove();t._patternUrlQueryParts={}};C.getPatternAttr=function(e,t,r){if(e&&L.isArrayOrTypedArray(e)){return t<e.length?e[t]:r}return e};C.pointStyle=function(e,t,r){if(!e.size())return;var a=C.makePointStyleFns(t);e.each(function(e){C.singlePointStyle(e,S.select(this),t,a,r)})};C.singlePointStyle=function(e,t,r,a,n){var i=r.marker;var o=i.line;t.style("opacity",a.selectedOpacityFn?a.selectedOpacityFn(e):e.mo===undefined?i.opacity:e.mo);if(a.ms2mrc){var s;if(e.ms==="various"||i.size==="various"){s=3}else{s=a.ms2mrc(e.ms)}e.mrc=s;if(a.selectedSizeFn){s=e.mrc=a.selectedSizeFn(e)}var l=C.symbolNumber(e.mx||i.symbol)||0;e.om=l%200>=100;t.attr("d",D(l,s))}var u=false;var c,f,d;if(e.so){d=o.outlierwidth;f=o.outliercolor;c=i.outliercolor}else{var v=(o||{}).width;d=(e.mlw+1||v+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0;if("mlc"in e)f=e.mlcc=a.lineScale(e.mlc);else if(L.isArrayOrTypedArray(o.color))f=E.defaultLine;else f=o.color;if(L.isArrayOrTypedArray(i.color)){c=E.defaultLine;u=true}if("mc"in e){c=e.mcc=a.markerScale(e.mc)}else{c=i.color||"rgba(0,0,0,0)"}if(a.selectedColorFn){c=a.selectedColorFn(e)}}if(e.om){t.call(E.stroke,c).style({"stroke-width":(d||1)+"px",fill:"none"})}else{t.style("stroke-width",(e.isBlank?0:d)+"px");var p=i.gradient;var h=e.mgt;if(h)u=true;else h=p&&p.type;if(L.isArrayOrTypedArray(h)){h=h[0];if(!O[h])h=0}var m=i.pattern;var g=m&&C.getPatternAttr(m.shape,e.i,"");if(h&&h!=="none"){var y=e.mgc;if(y)u=true;else y=p.color;var x=r.uid;if(u)x+="-"+e.i;C.gradient(t,n,x,h,[[0,y],[1,c]],"fill")}else if(g){var b=C.getPatternAttr(m.bgcolor,e.i,null);var _=C.getPatternAttr(m.fgcolor,e.i,null);var w=m.fgopacity;var T=C.getPatternAttr(m.size,e.i,8);var k=C.getPatternAttr(m.solidity,e.i,.3);var M=e.mcc||L.isArrayOrTypedArray(m.shape)||L.isArrayOrTypedArray(m.bgcolor)||L.isArrayOrTypedArray(m.size)||L.isArrayOrTypedArray(m.solidity);var A=r.uid;if(M)A+="-"+e.i;C.pattern(t,"point",n,A,g,T,k,e.mcc,m.fillmode,b,_,w)}else{E.fill(t,c)}if(d){E.stroke(t,f)}}};C.makePointStyleFns=function(e){var t={};var r=e.marker;t.markerScale=C.tryColorscale(r,"");t.lineScale=C.tryColorscale(r,"line");if(b.traceIs(e,"symbols")){t.ms2mrc=s.isBubble(e)?l(e):function(){return(r.size||6)/2}}if(e.selectedpoints){L.extendFlat(t,C.makeSelectedPointStyleFns(e))}return t};C.makeSelectedPointStyleFns=function(e){var t={};var r=e.selected||{};var a=e.unselected||{};var n=e.marker||{};var i=r.marker||{};var o=a.marker||{};var s=n.opacity;var l=i.opacity;var u=o.opacity;var c=l!==undefined;var f=u!==undefined;if(L.isArrayOrTypedArray(s)||c||f){t.selectedOpacityFn=function(e){var t=e.mo===undefined?n.opacity:e.mo;if(e.selected){return c?l:t}else{return f?u:_*t}}}var d=n.color;var v=i.color;var p=o.color;if(v||p){t.selectedColorFn=function(e){var t=e.mcc||d;if(e.selected){return v||t}else{return p||t}}}var h=n.size;var m=i.size;var g=o.size;var y=m!==undefined;var x=g!==undefined;if(b.traceIs(e,"symbols")&&(y||x)){t.selectedSizeFn=function(e){var t=e.mrc||h/2;if(e.selected){return y?m/2:t}else{return x?g/2:t}}}return t};C.makeSelectedTextStyleFns=function(e){var t={};var r=e.selected||{};var a=e.unselected||{};var n=e.textfont||{};var i=r.textfont||{};var o=a.textfont||{};var s=n.color;var l=i.color;var u=o.color;t.selectedTextColorFn=function(e){var t=e.tc||s;if(e.selected){return l||t}else{if(u)return u;else return l?t:E.addOpacity(t,_)}};return t};C.selectedPointStyle=function(e,t){if(!e.size()||!t.selectedpoints)return;var n=C.makeSelectedPointStyleFns(t);var i=t.marker||{};var a=[];if(n.selectedOpacityFn){a.push(function(e,t){e.style("opacity",n.selectedOpacityFn(t))})}if(n.selectedColorFn){a.push(function(e,t){E.fill(e,n.selectedColorFn(t))})}if(n.selectedSizeFn){a.push(function(e,t){var r=t.mx||i.symbol||0;var a=n.selectedSizeFn(t);e.attr("d",D(C.symbolNumber(r),a));t.mrc2=a})}if(a.length){e.each(function(e){var t=S.select(this);for(var r=0;r<a.length;r++){a[r](t,e)}})}};C.tryColorscale=function(e,t){var r=t?L.nestedProperty(e,t).get():e;if(r){var a=r.color;if((r.colorscale||r._colorAx)&&L.isArrayOrTypedArray(a)){return n.makeColorScaleFuncFromTrace(r)}}return L.identity};var w={start:1,end:-1,middle:0,bottom:1,top:-1};function T(e,t,r,a){var n=S.select(e.node().parentNode);var i=t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle";var o=t.indexOf("left")!==-1?"end":t.indexOf("right")!==-1?"start":"middle";var s=a?a/.8+1:0;var l=(m.lineCount(e)-1)*d+1;var u=w[o]*s;var c=r*.75+w[i]*s+(w[i]-1)*l*r/2;e.attr("text-anchor",o);n.attr("transform",f(u,c))}function k(e,t){var r=e.ts||t.textfont.size;return o(r)&&r>0?r:0}C.textPointStyle=function(e,c,f){if(!e.size())return;var d;if(c.selectedpoints){var t=C.makeSelectedTextStyleFns(c);d=t.selectedTextColorFn}var v=c.texttemplate;var p=f._fullLayout;e.each(function(e){var t=S.select(this);var r=v?L.extractOption(e,c,"txt","texttemplate"):L.extractOption(e,c,"tx","text");if(!r&&r!==0){t.remove();return}if(v){var a=c._module.formatLabels;var n=a?a(e,c,p):{};var i={};g(i,c,e.i);var o=c._meta||{};r=L.texttemplateString(r,n,p._d3locale,i,e,o)}var s=e.tp||c.textposition;var l=k(e,c);var u=d?d(e):e.tc||c.textfont.color;t.call(C.font,e.tf||c.textfont.family,l,u).text(r).call(m.convertToTspans,f).call(T,s,l,e.mrc)})};C.selectedTextStyle=function(e,i){if(!e.size()||!i.selectedpoints)return;var o=C.makeSelectedTextStyleFns(i);e.each(function(e){var t=S.select(this);var r=o.selectedTextColorFn(e);var a=e.tp||i.textposition;var n=k(e,i);E.fill(t,r);T(t,a,n,e.mrc2||e.mrc)})};var M=.5;C.smoothopen=function(e,t){if(e.length<3){return"M"+e.join("L")}var r="M"+e[0];var a=[];var n;for(n=1;n<e.length-1;n++){a.push(A(e[n-1],e[n],e[n+1],t))}r+="Q"+a[0][0]+" "+e[1];for(n=2;n<e.length-1;n++){r+="C"+a[n-2][1]+" "+a[n-1][0]+" "+e[n]}r+="Q"+a[e.length-3][1]+" "+e[e.length-1];return r};C.smoothclosed=function(e,t){if(e.length<3){return"M"+e.join("L")+"Z"}var r="M"+e[0];var a=e.length-1;var n=[A(e[a],e[0],e[1],t)];var i;for(i=1;i<a;i++){n.push(A(e[i-1],e[i],e[i+1],t))}n.push(A(e[a-1],e[a],e[0],t));for(i=1;i<=a;i++){r+="C"+n[i-1][1]+" "+n[i][0]+" "+e[i]}r+="C"+n[a][1]+" "+n[0][0]+" "+e[0]+"Z";return r};function A(e,t,r,a){var n=e[0]-t[0];var i=e[1]-t[1];var o=r[0]-t[0];var s=r[1]-t[1];var l=Math.pow(n*n+i*i,M/2);var u=Math.pow(o*o+s*s,M/2);var c=(u*u*n-l*l*o)*a;var f=(u*u*i-l*l*s)*a;var d=3*u*(l+u);var v=3*l*(l+u);return[[S.round(t[0]+(d&&c/d),2),S.round(t[1]+(d&&f/d),2)],[S.round(t[0]-(v&&c/v),2),S.round(t[1]-(v&&f/v),2)]]}var I={hv:function(e,t){return"H"+S.round(t[0],2)+"V"+S.round(t[1],2)},vh:function(e,t){return"V"+S.round(t[1],2)+"H"+S.round(t[0],2)},hvh:function(e,t){return"H"+S.round((e[0]+t[0])/2,2)+"V"+S.round(t[1],2)+"H"+S.round(t[0],2)},vhv:function(e,t){return"V"+S.round((e[1]+t[1])/2,2)+"H"+S.round(t[0],2)+"V"+S.round(t[1],2)}};var P=function(e,t){return"L"+S.round(t[0],2)+","+S.round(t[1],2)};C.steps=function(e){var a=I[e]||P;return function(e){var t="M"+S.round(e[0][0],2)+","+S.round(e[0][1],2);for(var r=1;r<e.length;r++){t+=a(e[r-1],e[r])}return t}};C.makeTester=function(){var e=L.ensureSingleById(S.select("body"),"svg","js-plotly-tester",function(e){e.attr(a.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})});var t=L.ensureSingle(e,"path","js-reference-point",function(e){e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});C.tester=e;C.testref=t};C.savedBBoxes={};var R=0;var N=1e4;C.bBox=function(e,t,r){if(!r)r=z(e);var a;if(r){a=C.savedBBoxes[r];if(a)return L.extendFlat({},a)}else if(e.childNodes.length===1){var n=e.childNodes[0];r=z(n);if(r){var i=+n.getAttribute("x")||0;var o=+n.getAttribute("y")||0;var s=n.getAttribute("transform");if(!s){var l=C.bBox(n,false,r);if(i){l.left+=i;l.right+=i}if(o){l.top+=o;l.bottom+=o}return l}r+="~"+i+"~"+o+"~"+s;a=C.savedBBoxes[r];if(a)return L.extendFlat({},a)}}var u,c;if(t){u=e}else{c=C.tester.node();u=e.cloneNode(true);c.appendChild(u)}S.select(u).attr("transform",null).call(m.positionText,0,0);var f=u.getBoundingClientRect();var d=C.testref.node().getBoundingClientRect();if(!t)c.removeChild(u);var v={height:f.height,width:f.width,left:f.left-d.left,top:f.top-d.top,right:f.right-d.left,bottom:f.bottom-d.top};if(R>=N){C.savedBBoxes={};R=0}if(r)C.savedBBoxes[r]=v;R++;return L.extendFlat({},v)};function z(e){var t=e.getAttribute("data-unformatted");if(t===null)return;return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}C.setClipUrl=function(e,t,r){e.attr("clip-path",F(t,r))};function F(e,t){if(!e)return null;var r=t._context;var a=r._exportedPlot?"":r._baseUrl||"";return a?"url('"+a+"#"+e+"')":"url(#"+e+")"}C.getTranslate=function(e){var t=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/;var r=e.attr?"attr":"getAttribute";var a=e[r]("transform")||"";var n=a.replace(t,function(e,t,r){return[t,r].join(" ")}).split(" ");return{x:+n[0]||0,y:+n[1]||0}};C.setTranslate=function(e,t,r){var a=/(\btranslate\(.*?\);?)/;var n=e.attr?"attr":"getAttribute";var i=e.attr?"attr":"setAttribute";var o=e[n]("transform")||"";t=t||0;r=r||0;o=o.replace(a,"").trim();o+=f(t,r);o=o.trim();e[i]("transform",o);return o};C.getScale=function(e){var t=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/;var r=e.attr?"attr":"getAttribute";var a=e[r]("transform")||"";var n=a.replace(t,function(e,t,r){return[t,r].join(" ")}).split(" ");return{x:+n[0]||1,y:+n[1]||1}};C.setScale=function(e,t,r){var a=/(\bscale\(.*?\);?)/;var n=e.attr?"attr":"getAttribute";var i=e.attr?"attr":"setAttribute";var o=e[n]("transform")||"";t=t||1;r=r||1;o=o.replace(a,"").trim();o+="scale("+t+","+r+")";o=o.trim();e[i]("transform",o);return o};var j=/\s*sc.*/;C.setPointGroupScale=function(e,t,r){t=t||1;r=r||1;if(!e)return;var a=t===1&&r===1?"":"scale("+t+","+r+")";e.each(function(){var e=(this.getAttribute("transform")||"").replace(j,"");e+=a;e=e.trim();this.setAttribute("transform",e)})};var H=/translate\([^)]*\)\s*$/;C.setTextPointsScale=function(e,o,s){if(!e)return;e.each(function(){var e;var t=S.select(this);var r=t.select("text");if(!r.node())return;var a=parseFloat(r.attr("x")||0);var n=parseFloat(r.attr("y")||0);var i=(t.attr("transform")||"").match(H);if(o===1&&s===1){e=[]}else{e=[f(a,n),"scale("+o+","+s+")",f(-a,-n)]}if(i){e.push(i)}t.attr("transform",e.join(""))})}},{"../../components/fx/helpers":191,"../../constants/alignment":260,"../../constants/interactions":264,"../../constants/xmlns_namespaces":266,"../../lib":285,"../../lib/svg_text_utils":307,"../../registry":373,"../../traces/scatter/make_bubble_size_func":511,"../../traces/scatter/subtypes":519,"../color":155,"../colorscale":167,"./symbol_defs":178,"@plotly/d3":20,"fast-isnumeric":31,tinycolor2:119}],178:[function(e,t,r){"use strict";var f=e("@plotly/d3");t.exports={circle:{n:0,f:function(e){var t=f.round(e,2);return"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"}},square:{n:1,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"}},diamond:{n:2,f:function(e){var t=f.round(e*1.3,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"}},cross:{n:3,f:function(e){var t=f.round(e*.4,2);var r=f.round(e*1.2,2);return"M"+r+","+t+"H"+t+"V"+r+"H-"+t+"V"+t+"H-"+r+"V-"+t+"H-"+t+"V-"+r+"H"+t+"V-"+t+"H"+r+"Z"}},x:{n:4,f:function(e){var t=f.round(e*.8/Math.sqrt(2),2);var r="l"+t+","+t;var a="l"+t+",-"+t;var n="l-"+t+",-"+t;var i="l-"+t+","+t;return"M0,"+t+r+a+n+a+n+i+n+i+r+i+r+"Z"}},"triangle-up":{n:5,f:function(e){var t=f.round(e*2/Math.sqrt(3),2);var r=f.round(e/2,2);var a=f.round(e,2);return"M-"+t+","+r+"H"+t+"L0,-"+a+"Z"}},"triangle-down":{n:6,f:function(e){var t=f.round(e*2/Math.sqrt(3),2);var r=f.round(e/2,2);var a=f.round(e,2);return"M-"+t+",-"+r+"H"+t+"L0,"+a+"Z"}},"triangle-left":{n:7,f:function(e){var t=f.round(e*2/Math.sqrt(3),2);var r=f.round(e/2,2);var a=f.round(e,2);return"M"+r+",-"+t+"V"+t+"L-"+a+",0Z"}},"triangle-right":{n:8,f:function(e){var t=f.round(e*2/Math.sqrt(3),2);var r=f.round(e/2,2);var a=f.round(e,2);return"M-"+r+",-"+t+"V"+t+"L"+a+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=f.round(e*.6,2);var r=f.round(e*1.2,2);return"M-"+r+",-"+t+"H"+t+"V"+r+"Z"}},"triangle-se":{n:10,f:function(e){var t=f.round(e*.6,2);var r=f.round(e*1.2,2);return"M"+t+",-"+r+"V"+t+"H-"+r+"Z"}},"triangle-sw":{n:11,f:function(e){var t=f.round(e*.6,2);var r=f.round(e*1.2,2);return"M"+r+","+t+"H-"+t+"V-"+r+"Z"}},"triangle-nw":{n:12,f:function(e){var t=f.round(e*.6,2);var r=f.round(e*1.2,2);return"M-"+t+","+r+"V-"+t+"H"+r+"Z"}},pentagon:{n:13,f:function(e){var t=f.round(e*.951,2);var r=f.round(e*.588,2);var a=f.round(-e,2);var n=f.round(e*-.309,2);var i=f.round(e*.809,2);return"M"+t+","+n+"L"+r+","+i+"H-"+r+"L-"+t+","+n+"L0,"+a+"Z"}},hexagon:{n:14,f:function(e){var t=f.round(e,2);var r=f.round(e/2,2);var a=f.round(e*Math.sqrt(3)/2,2);return"M"+a+",-"+r+"V"+r+"L0,"+t+"L-"+a+","+r+"V-"+r+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=f.round(e,2);var r=f.round(e/2,2);var a=f.round(e*Math.sqrt(3)/2,2);return"M-"+r+","+a+"H"+r+"L"+t+",0L"+r+",-"+a+"H-"+r+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=f.round(e*.924,2);var r=f.round(e*.383,2);return"M-"+r+",-"+t+"H"+r+"L"+t+",-"+r+"V"+r+"L"+r+","+t+"H-"+r+"L-"+t+","+r+"V-"+r+"Z"}},star:{n:17,f:function(e){var t=e*1.4;var r=f.round(t*.225,2);var a=f.round(t*.951,2);var n=f.round(t*.363,2);var i=f.round(t*.588,2);var o=f.round(-t,2);var s=f.round(t*-.309,2);var l=f.round(t*.118,2);var u=f.round(t*.809,2);var c=f.round(t*.382,2);return"M"+r+","+s+"H"+a+"L"+n+","+l+"L"+i+","+u+"L0,"+c+"L-"+i+","+u+"L-"+n+","+l+"L-"+a+","+s+"H-"+r+"L0,"+o+"Z"}},hexagram:{n:18,f:function(e){var t=f.round(e*.66,2);var r=f.round(e*.38,2);var a=f.round(e*.76,2);return"M-"+a+",0l-"+r+",-"+t+"h"+a+"l"+r+",-"+t+"l"+r+","+t+"h"+a+"l-"+r+","+t+"l"+r+","+t+"h-"+a+"l-"+r+","+t+"l-"+r+",-"+t+"h-"+a+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=f.round(e*Math.sqrt(3)*.8,2);var r=f.round(e*.8,2);var a=f.round(e*1.6,2);var n=f.round(e*4,2);var i="A "+n+","+n+" 0 0 1 ";return"M-"+t+","+r+i+t+","+r+i+"0,-"+a+i+"-"+t+","+r+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=f.round(e*Math.sqrt(3)*.8,2);var r=f.round(e*.8,2);var a=f.round(e*1.6,2);var n=f.round(e*4,2);var i="A "+n+","+n+" 0 0 1 ";return"M"+t+",-"+r+i+"-"+t+",-"+r+i+"0,"+a+i+t+",-"+r+"Z"}},"star-square":{n:21,f:function(e){var t=f.round(e*1.1,2);var r=f.round(e*2,2);var a="A "+r+","+r+" 0 0 1 ";return"M-"+t+",-"+t+a+"-"+t+","+t+a+t+","+t+a+t+",-"+t+a+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=f.round(e*1.4,2);var r=f.round(e*1.9,2);var a="A "+r+","+r+" 0 0 1 ";return"M-"+t+",0"+a+"0,"+t+a+t+",0"+a+"0,-"+t+a+"-"+t+",0"+"Z"}},"diamond-tall":{n:23,f:function(e){var t=f.round(e*.7,2);var r=f.round(e*1.4,2);return"M0,"+r+"L"+t+",0L0,-"+r+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=f.round(e*1.4,2);var r=f.round(e*.7,2);return"M0,"+r+"L"+t+",0L0,-"+r+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"H-"+t+"L"+t+",-"+t+"H-"+t+"Z"},noDot:true},bowtie:{n:26,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"V-"+t+"L-"+t+","+t+"V-"+t+"Z"},noDot:true},"circle-cross":{n:27,f:function(e){var t=f.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:true,noDot:true},"circle-x":{n:28,f:function(e){var t=f.round(e,2);var r=f.round(e/Math.sqrt(2),2);return"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:true,noDot:true},"square-cross":{n:29,f:function(e){var t=f.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:true,noDot:true},"square-x":{n:30,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:true,noDot:true},"diamond-cross":{n:31,f:function(e){var t=f.round(e*1.3,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"+"M0,-"+t+"V"+t+"M-"+t+",0H"+t},needLine:true,noDot:true},"diamond-x":{n:32,f:function(e){var t=f.round(e*1.3,2);var r=f.round(e*.65,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"+"M-"+r+",-"+r+"L"+r+","+r+"M-"+r+","+r+"L"+r+",-"+r},needLine:true,noDot:true},"cross-thin":{n:33,f:function(e){var t=f.round(e*1.4,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t},needLine:true,noDot:true,noFill:true},"x-thin":{n:34,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t},needLine:true,noDot:true,noFill:true},asterisk:{n:35,f:function(e){var t=f.round(e*1.2,2);var r=f.round(e*.85,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r},needLine:true,noDot:true,noFill:true},hash:{n:36,f:function(e){var t=f.round(e/2,2);var r=f.round(e,2);return"M"+t+","+r+"V-"+r+"m-"+r+",0V"+r+"M"+r+","+t+"H-"+r+"m0,-"+r+"H"+r},needLine:true,noFill:true},"y-up":{n:37,f:function(e){var t=f.round(e*1.2,2);var r=f.round(e*1.6,2);var a=f.round(e*.8,2);return"M-"+t+","+a+"L0,0M"+t+","+a+"L0,0M0,-"+r+"L0,0"},needLine:true,noDot:true,noFill:true},"y-down":{n:38,f:function(e){var t=f.round(e*1.2,2);var r=f.round(e*1.6,2);var a=f.round(e*.8,2);return"M-"+t+",-"+a+"L0,0M"+t+",-"+a+"L0,0M0,"+r+"L0,0"},needLine:true,noDot:true,noFill:true},"y-left":{n:39,f:function(e){var t=f.round(e*1.2,2);var r=f.round(e*1.6,2);var a=f.round(e*.8,2);return"M"+a+","+t+"L0,0M"+a+",-"+t+"L0,0M-"+r+",0L0,0"},needLine:true,noDot:true,noFill:true},"y-right":{n:40,f:function(e){var t=f.round(e*1.2,2);var r=f.round(e*1.6,2);var a=f.round(e*.8,2);return"M-"+a+","+t+"L0,0M-"+a+",-"+t+"L0,0M"+r+",0L0,0"},needLine:true,noDot:true,noFill:true},"line-ew":{n:41,f:function(e){var t=f.round(e*1.4,2);return"M"+t+",0H-"+t},needLine:true,noDot:true,noFill:true},"line-ns":{n:42,f:function(e){var t=f.round(e*1.4,2);return"M0,"+t+"V-"+t},needLine:true,noDot:true,noFill:true},"line-ne":{n:43,f:function(e){var t=f.round(e,2);return"M"+t+",-"+t+"L-"+t+","+t},needLine:true,noDot:true,noFill:true},"line-nw":{n:44,f:function(e){var t=f.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t},needLine:true,noDot:true,noFill:true},"arrow-up":{n:45,f:function(e){var t=f.round(e,2);var r=f.round(e*2,2);return"M0,0L-"+t+","+r+"H"+t+"Z"},noDot:true},"arrow-down":{n:46,f:function(e){var t=f.round(e,2);var r=f.round(e*2,2);return"M0,0L-"+t+",-"+r+"H"+t+"Z"},noDot:true},"arrow-left":{n:47,f:function(e){var t=f.round(e*2,2);var r=f.round(e,2);return"M0,0L"+t+",-"+r+"V"+r+"Z"},noDot:true},"arrow-right":{n:48,f:function(e){var t=f.round(e*2,2);var r=f.round(e,2);return"M0,0L-"+t+",-"+r+"V"+r+"Z"},noDot:true},"arrow-bar-up":{n:49,f:function(e){var t=f.round(e,2);var r=f.round(e*2,2);return"M-"+t+",0H"+t+"M0,0L-"+t+","+r+"H"+t+"Z"},needLine:true,noDot:true},"arrow-bar-down":{n:50,f:function(e){var t=f.round(e,2);var r=f.round(e*2,2);return"M-"+t+",0H"+t+"M0,0L-"+t+",-"+r+"H"+t+"Z"},needLine:true,noDot:true},"arrow-bar-left":{n:51,f:function(e){var t=f.round(e*2,2);var r=f.round(e,2);return"M0,-"+r+"V"+r+"M0,0L"+t+",-"+r+"V"+r+"Z"},needLine:true,noDot:true},"arrow-bar-right":{n:52,f:function(e){var t=f.round(e*2,2);var r=f.round(e,2);return"M0,-"+r+"V"+r+"M0,0L-"+t+",-"+r+"V"+r+"Z"},needLine:true,noDot:true}}},{"@plotly/d3":20}],179:[function(e,t,r){"use strict";t.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],180:[function(e,t,r){"use strict";var y=e("fast-isnumeric");var l=e("../../registry");var x=e("../../plots/cartesian/axes");var b=e("../../lib");var _=e("./compute_error");t.exports=function e(t){var r=t.calcdata;for(var a=0;a<r.length;a++){var n=r[a];var i=n[0].trace;if(i.visible===true&&l.traceIs(i,"errorBarsOK")){var o=x.getFromId(t,i.xaxis);var s=x.getFromId(t,i.yaxis);u(n,i,o,"x");u(n,i,s,"y")}}};function u(e,t,r,a){var n=t["error_"+a]||{};var i=n.visible&&["linear","log"].indexOf(r.type)!==-1;var o=[];if(!i)return;var s=_(n);for(var l=0;l<e.length;l++){var u=e[l];var c=u.i;if(c===undefined)c=l;else if(c===null)continue;var f=u[a];if(!y(r.c2l(f)))continue;var d=s(f,c);if(y(d[0])&&y(d[1])){var v=u[a+"s"]=f-d[0];var p=u[a+"h"]=f+d[1];o.push(v,p)}}var h=r._id;var m=t._extremes[h];var g=x.findExtremes(r,o,b.extendFlat({tozero:m.opts.tozero},{padded:true}));m.min=m.min.concat(g.min);m.max=m.max.concat(g.max)}},{"../../lib":285,"../../plots/cartesian/axes":331,"../../registry":373,"./compute_error":181,"fast-isnumeric":31}],181:[function(e,t,r){"use strict";t.exports=function e(t){var r=t.type;var a=t.symmetric;if(r==="data"){var i=t.array||[];if(a){return function e(t,r){var a=+i[r];return[a,a]}}else{var o=t.arrayminus||[];return function e(t,r){var a=+i[r];var n=+o[r];if(!isNaN(a)||!isNaN(n)){return[n||0,a||0]}return[NaN,NaN]}}}else{var n=l(r,t.value);var s=l(r,t.valueminus);if(a||t.valueminus===undefined){return function e(t){var r=n(t);return[r,r]}}else{return function e(t){return[s(t),n(t)]}}}};function l(e,t){if(e==="percent"){return function(e){return Math.abs(e*t/100)}}if(e==="constant"){return function(){return Math.abs(t)}}if(e==="sqrt"){return function(e){return Math.sqrt(Math.abs(e))}}}},{}],182:[function(e,t,r){"use strict";var p=e("fast-isnumeric");var h=e("../../registry");var m=e("../../lib");var g=e("../../plot_api/plot_template");var y=e("./attributes");t.exports=function(e,t,r,a){var n="error_"+a.axis;var i=g.newContainer(t,n);var o=e[n]||{};function s(e,t){return m.coerce(o,i,y,e,t)}var l=o.array!==undefined||o.value!==undefined||o.type==="sqrt";var u=s("visible",l);if(u===false)return;var c=s("type","array"in o?"data":"percent");var f=true;if(c!=="sqrt"){f=s("symmetric",!((c==="data"?"arrayminus":"valueminus")in o))}if(c==="data"){s("array");s("traceref");if(!f){s("arrayminus");s("tracerefminus")}}else if(c==="percent"||c==="constant"){s("value");if(!f)s("valueminus")}var d="copy_"+a.inherit+"style";if(a.inherit){var v=t["error_"+a.inherit];if((v||{}).visible){s(d,!(o.color||p(o.thickness)||p(o.width)))}}if(!a.inherit||!i[d]){s("color",r);s("thickness");s("width",h.traceIs(t,"gl3d")?0:4)}}},{"../../lib":285,"../../plot_api/plot_template":320,"../../registry":373,"./attributes":179,"fast-isnumeric":31}],183:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../plot_api/edit_types").overrideAll;var i=e("./attributes");var o={error_x:a.extendFlat({},i),error_y:a.extendFlat({},i)};delete o.error_x.copy_zstyle;delete o.error_y.copy_zstyle;delete o.error_y.copy_ystyle;var s={error_x:a.extendFlat({},i),error_y:a.extendFlat({},i),error_z:a.extendFlat({},i)};delete s.error_x.copy_ystyle;delete s.error_y.copy_ystyle;delete s.error_z.copy_ystyle;delete s.error_z.copy_zstyle;t.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:o,bar:o,histogram:o,scatter3d:n(s,"calc","nested"),scattergl:n(o,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:l};function l(e,t,r){if((t.error_y||{}).visible){r.yerr=e.yh-e.y;if(!t.error_y.symmetric)r.yerrneg=e.y-e.ys}if((t.error_x||{}).visible){r.xerr=e.xh-e.x;if(!t.error_x.symmetric)r.xerrneg=e.x-e.xs}}},{"../../lib":285,"../../plot_api/edit_types":313,"./attributes":179,"./calc":180,"./compute_error":181,"./defaults":182,"./plot":184,"./style":185}],184:[function(e,t,r){"use strict";var m=e("@plotly/d3");var g=e("fast-isnumeric");var s=e("../drawing");var y=e("../../traces/scatter/subtypes");t.exports=function e(i,t,o,f){var d;var v=o.xaxis;var p=o.yaxis;var h=f&&f.duration>0;t.each(function(e){var t=e[0].trace;var l=t.error_x||{};var u=t.error_y||{};var r;if(t.ids){r=function(e){return e.id}}var c=y.hasMarkers(t)&&t.marker.maxdisplayed>0;if(!u.visible&&!l.visible)e=[];var a=m.select(this).selectAll("g.errorbar").data(e,r);a.exit().remove();if(!e.length)return;if(!l.visible)a.selectAll("path.xerror").remove();if(!u.visible)a.selectAll("path.yerror").remove();a.style("opacity",1);var n=a.enter().append("g").classed("errorbar",true);if(h){n.style("opacity",0).transition().duration(f.duration).style("opacity",1)}s.setClipUrl(a,o.layerClipId,i);a.each(function(e){var t=m.select(this);var r=x(e,v,p);if(c&&!e.vis)return;var a;var n=t.select("path.yerror");if(u.visible&&g(r.x)&&g(r.yh)&&g(r.ys)){var i=u.width;a="M"+(r.x-i)+","+r.yh+"h"+2*i+"m-"+i+",0V"+r.ys;if(!r.noYS)a+="m-"+i+",0h"+2*i;d=!n.size();if(d){n=t.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",true)}else if(h){n=n.transition().duration(f.duration).ease(f.easing)}n.attr("d",a)}else n.remove();var o=t.select("path.xerror");if(l.visible&&g(r.y)&&g(r.xh)&&g(r.xs)){var s=(l.copy_ystyle?u:l).width;a="M"+r.xh+","+(r.y-s)+"v"+2*s+"m0,-"+s+"H"+r.xs;if(!r.noXS)a+="m0,-"+s+"v"+2*s;d=!o.size();if(d){o=t.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",true)}else if(h){o=o.transition().duration(f.duration).ease(f.easing)}o.attr("d",a)}else o.remove()})})};function x(e,t,r){var a={x:t.c2p(e.x),y:r.c2p(e.y)};if(e.yh!==undefined){a.yh=r.c2p(e.yh);a.ys=r.c2p(e.ys);if(!g(a.ys)){a.noYS=true;a.ys=r.c2p(e.ys,true)}}if(e.xh!==undefined){a.xh=t.c2p(e.xh);a.xs=t.c2p(e.xs);if(!g(a.xs)){a.noXS=true;a.xs=t.c2p(e.xs,true)}}return a}},{"../../traces/scatter/subtypes":519,"../drawing":177,"@plotly/d3":20,"fast-isnumeric":31}],185:[function(e,t,r){"use strict";var i=e("@plotly/d3");var o=e("../color");t.exports=function e(t){t.each(function(e){var t=e[0].trace;var r=t.error_y||{};var a=t.error_x||{};var n=i.select(this);n.selectAll("path.yerror").style("stroke-width",r.thickness+"px").call(o.stroke,r.color);if(a.copy_ystyle)a=r;n.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(o.stroke,a.color)})}},{"../color":155,"@plotly/d3":20}],186:[function(e,t,r){"use strict";var a=e("../../plots/font_attributes");var n=e("./layout_attributes").hoverlabel;var i=e("../../lib/extend").extendFlat;t.exports={hoverlabel:{bgcolor:i({},n.bgcolor,{arrayOk:true}),bordercolor:i({},n.bordercolor,{arrayOk:true}),font:a({arrayOk:true,editType:"none"}),align:i({},n.align,{arrayOk:true}),namelength:i({},n.namelength,{arrayOk:true}),editType:"none"}}},{"../../lib/extend":279,"../../plots/font_attributes":360,"./layout_attributes":196}],187:[function(e,t,r){"use strict";var u=e("../../lib");var c=e("../../registry");t.exports=function e(t){var r=t.calcdata;var a=t._fullLayout;function n(t){return function(e){return u.coerceHoverinfo({hoverinfo:e},{_module:t._module},a)}}for(var i=0;i<r.length;i++){var o=r[i];var s=o[0].trace;if(c.traceIs(s,"pie-like"))continue;var l=c.traceIs(s,"2dMap")?f:u.fillArray;l(s.hoverinfo,o,"hi",n(s));if(s.hovertemplate)l(s.hovertemplate,o,"ht");if(!s.hoverlabel)continue;l(s.hoverlabel.bgcolor,o,"hbg");l(s.hoverlabel.bordercolor,o,"hbc");l(s.hoverlabel.font.size,o,"hts");l(s.hoverlabel.font.color,o,"htc");l(s.hoverlabel.font.family,o,"htf");l(s.hoverlabel.namelength,o,"hnl");l(s.hoverlabel.align,o,"hta")}};function f(e,t,r,a){a=a||u.identity;if(Array.isArray(e)){t[0][r]=a(e)}}},{"../../lib":285,"../../registry":373}],188:[function(e,t,r){"use strict";var o=e("../../registry");var s=e("./hover").hover;t.exports=function e(t,r,a){var n=o.getComponentMethod("annotations","onClick")(t,t._hoverdata);if(a!==undefined){s(t,r,a,true)}function i(){t.emit("plotly_click",{points:t._hoverdata,event:r})}if(t._hoverdata&&r&&r.target){if(n&&n.then){n.then(i)}else i();if(r.stopImmediatePropagation)r.stopImmediatePropagation()}}},{"../../registry":373,"./hover":192}],189:[function(e,t,r){"use strict";t.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],190:[function(e,t,r){"use strict";var s=e("../../lib");var l=e("./attributes");var u=e("./hoverlabel_defaults");t.exports=function e(r,a,t,n){function i(e,t){return s.coerce(r,a,l,e,t)}var o=s.extendFlat({},n.hoverlabel);if(a.hovertemplate)o.namelength=-1;u(r,a,i,o)}},{"../../lib":285,"./attributes":186,"./hoverlabel_defaults":193}],191:[function(e,t,o){"use strict";var c=e("../../lib");o.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo};o.isTraceInSubplots=function(e,t){if(e.type==="splom"){var r=e.xaxes||[];var a=e.yaxes||[];for(var n=0;n<r.length;n++){for(var i=0;i<a.length;i++){if(t.indexOf(r[n]+a[i])!==-1){return true}}}return false}return t.indexOf(o.getSubplot(e))!==-1};o.flat=function(e,t){var r=new Array(e.length);for(var a=0;a<e.length;a++){r[a]=t}return r};o.p2c=function(e,t){var r=new Array(e.length);for(var a=0;a<e.length;a++){r[a]=e[a].p2c(t)}return r};o.getDistanceFunction=function(e,t,r,a){if(e==="closest")return a||o.quadrature(t,r);return e.charAt(0)==="x"?t:r};o.getClosest=function(e,t,r){if(r.index!==false){if(r.index>=0&&r.index<e.length){r.distance=0}else r.index=false}else{for(var a=0;a<e.length;a++){var n=t(e[a]);if(n<=r.distance){r.index=a;r.distance=n}}}return r};o.inbox=function(e,t,r){return e*t<0||e===0?r:Infinity};o.quadrature=function(a,n){return function(e){var t=a(e);var r=n(e);return Math.sqrt(t*t+r*r)}};o.makeEventData=function(e,t,r){var a="index"in e?e.index:e.pointNumber;var n={data:t._input,fullData:t,curveNumber:t.index,pointNumber:a};if(t._indexToPoints){var i=t._indexToPoints[a];if(i.length===1){n.pointIndex=i[0]}else{n.pointIndices=i}}else{n.pointIndex=a}if(t._module.eventData){n=t._module.eventData(n,e,t,r,a)}else{if("xVal"in e)n.x=e.xVal;else if("x"in e)n.x=e.x;if("yVal"in e)n.y=e.yVal;else if("y"in e)n.y=e.y;if(e.xa)n.xaxis=e.xa;if(e.ya)n.yaxis=e.ya;if(e.zLabelVal!==undefined)n.z=e.zLabelVal}o.appendArrayPointValue(n,t,a);return n};o.appendArrayPointValue=function(e,t,r){var a=t._arrayAttrs;if(!a){return}for(var n=0;n<a.length;n++){var i=a[n];var o=f(i);if(e[o]===undefined){var s=c.nestedProperty(t,i).get();var l=d(s,r);if(l!==undefined)e[o]=l}}};o.appendArrayMultiPointValues=function(e,t,r){var a=t._arrayAttrs;if(!a){return}for(var n=0;n<a.length;n++){var i=a[n];var o=f(i);if(e[o]===undefined){var s=c.nestedProperty(t,i).get();var l=new Array(r.length);for(var u=0;u<r.length;u++){l[u]=d(s,r[u])}e[o]=l}}};var r={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function f(e){return r[e]||e}function d(e,t){if(Array.isArray(t)){if(Array.isArray(e)&&Array.isArray(e[t[0]])){return e[t[0]][t[1]]}}else{return e[t]}}var a={x:true,y:true};var n={"x unified":true,"y unified":true};o.isUnifiedHover=function(e){if(typeof e!=="string")return false;return!!n[e]};o.isXYhover=function(e){if(typeof e!=="string")return false;return!!a[e]}},{"../../lib":285}],192:[function(e,t,r){"use strict";var _e=e("@plotly/d3");var we=e("fast-isnumeric");var F=e("tinycolor2");var Te=e("../../lib");var Z=Te.strTranslate;var X=Te.strRotate;var ke=e("../../lib/events");var J=e("../../lib/svg_text_utils");var Me=e("../../lib/override_cursor");var K=e("../drawing");var Ae=e("../color");var Se=e("../dragelement");var j=e("../../plots/cartesian/axes");var Ee=e("../../registry");var Le=e("./helpers");var Q=e("./constants");var ee=e("../legend/defaults");var te=e("../legend/draw");var re=Q.YANGLE;var a=Math.PI*re/180;var T=1/Math.sin(a);var g=Math.cos(a);var y=Math.sin(a);var ae=Q.HOVERARROWSIZE;var ne=Q.HOVERTEXTPAD;var Ce={box:true,ohlc:true,violin:true,candlestick:true};r.hover=function e(t,r,a,n){t=Te.getGraphDiv(t);Te.throttle(t._fullLayout._uid+Q.HOVERID,Q.HOVERMINTIME,function(){i(t,r,a,n)})};r.loneHover=function e(t,a){var r=true;if(!Array.isArray(t)){r=false;t=[t]}var n=t.map(function(e){return{color:e.color||Ae.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,nameLength:e.nameLength,textAlign:e.textAlign,trace:e.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:e.hovertemplate||false,eventData:e.eventData||false,hovertemplateLabels:e.hovertemplateLabels||false}});var i=_e.select(a.container);var o=a.outerContainer?_e.select(a.outerContainer):i;var s={hovermode:"closest",rotateLabels:false,bgColor:a.bgColor||Ae.background,container:i,outerContainer:o};var l=Oe(n,s,a.gd);var u=5;var c=0;var f=0;l.sort(function(e,t){return e.y0-t.y0}).each(function(e,t){var r=e.y0-e.by/2;if(r-u<c){e.offset=c-r+u}else{e.offset=0}c=r+e.by+e.offset;if(t===a.anchorIndex||0)f=e.offset}).each(function(e){e.offset-=f});var d=a.gd._fullLayout._invScaleX;var v=a.gd._fullLayout._invScaleY;Pe(l,s.rotateLabels,d,v);return r?l:l.node()};function i(e,d,t,r){if(!t)t="xy";var v=Array.isArray(t)?t:[t];var p=e._fullLayout;var a=p._plots||[];var n=a[t];var h=p._has("cartesian");if(n){var i=n.overlays.map(function(e){return e.id});v=v.concat(i)}var o=v.length;var m=new Array(o);var g=new Array(o);var s=false;for(var l=0;l<o;l++){var u=v[l];if(a[u]){s=true;m[l]=a[u].xaxis;g[l]=a[u].yaxis}else if(p[u]&&p[u]._subplot){var c=p[u]._subplot;m[l]=c.xaxis;g[l]=c.yaxis}else{Te.warn("Unrecognized subplot: "+u);return}}var y=d.hovermode||p.hovermode;if(y&&!s)y="closest";if(["x","y","closest","x unified","y unified"].indexOf(y)===-1||!e.calcdata||e.querySelector(".zoombox")||e._dragging){return Se.unhoverRaw(e,d)}var x=p.hoverdistance;if(x===-1)x=Infinity;var b=p.spikedistance;if(b===-1)b=Infinity;var _=[];var w=[];var T,k;var f,M,A,S,E,L,C,D,O,I,P;var R={hLinePoint:null,vLinePoint:null};var N=false;if(Array.isArray(d)){y="array";for(f=0;f<d.length;f++){A=e.calcdata[d[f].curveNumber||0];if(A){S=A[0].trace;if(A[0].trace.hoverinfo!=="skip"){w.push(A);if(S.orientation==="h"){N=true}}}}}else{for(M=0;M<e.calcdata.length;M++){A=e.calcdata[M];S=A[0].trace;if(S.hoverinfo!=="skip"&&Le.isTraceInSubplots(S,v)){w.push(A);if(S.orientation==="h"){N=true}}}var z=!d.target;var F,j;if(z){if("xpx"in d)F=d.xpx;else F=m[0]._length/2;if("ypx"in d)j=d.ypx;else j=g[0]._length/2}else{if(ke.triggerHandler(e,"plotly_beforehover",d)===false){return}var H=d.composedPath&&d.composedPath()[0];if(!H){H=d.target}var B=H.getBoundingClientRect();F=d.clientX-B.left;j=d.clientY-B.top;p._calcInverseTransform(e);var q=Te.apply3DTransform(p._invTransform)(F,j);F=q[0];j=q[1];if(F<0||F>m[0]._length||j<0||j>g[0]._length){return Se.unhoverRaw(e,d)}}d.pointerX=F+m[0]._offset;d.pointerY=j+g[0]._offset;if("xval"in d)T=Le.flat(v,d.xval);else T=Le.p2c(m,F);if("yval"in d)k=Le.flat(v,d.yval);else k=Le.p2c(g,j);if(!we(T[0])||!we(k[0])){Te.warn("Fx.hover failed",d,e);return Se.unhoverRaw(e,d)}}var U=Infinity;function Y(e,t){for(M=0;M<w.length;M++){A=w[M];if(!A||!A[0]||!A[0].trace)continue;S=A[0].trace;if(S.visible!==true||S._length===0)continue;if(["carpet","contourcarpet"].indexOf(S._module.name)!==-1)continue;if(S.type==="splom"){L=0;E=v[L]}else{E=Le.getSubplot(S);L=v.indexOf(E)}C=y;if(Le.isUnifiedHover(C)){C=C.charAt(0)}I={cd:A,trace:S,xa:m[L],ya:g[L],maxHoverDistance:x,maxSpikeDistance:b,index:false,distance:Math.min(U,x),spikeDistance:Infinity,xSpike:undefined,ySpike:undefined,color:Ae.defaultLine,name:S.name,x0:undefined,x1:undefined,y0:undefined,y1:undefined,xLabelVal:undefined,yLabelVal:undefined,zLabelVal:undefined,text:undefined};if(p[E]){I.subplot=p[E]._subplot}if(p._splomScenes&&p._splomScenes[S.uid]){I.scene=p._splomScenes[S.uid]}P=_.length;if(C==="array"){var r=d[M];if("pointNumber"in r){I.index=r.pointNumber;C="closest"}else{C="";if("xval"in r){D=r.xval;C="x"}if("yval"in r){O=r.yval;C=C?"closest":"y"}}}else if(e!==undefined&&t!==undefined){D=e;O=t}else{D=T[L];O=k[L]}if(x!==0){if(S._module&&S._module.hoverPoints){var a=S._module.hoverPoints(I,D,O,C,{finiteRange:true,hoverLayer:p._hoverlayer});if(a){var n;for(var i=0;i<a.length;i++){n=a[i];if(we(n.x0)&&we(n.y0)){_.push(Re(n,y))}}}}else{Te.log("Unrecognized trace type in hover:",S)}}if(y==="closest"&&_.length>P){_.splice(0,P);U=_[0].distance}if(h&&b!==0){if(_.length===0){I.distance=b;I.index=false;var o=S._module.hoverPoints(I,D,O,"closest",{hoverLayer:p._hoverlayer});if(o){o=o.filter(function(e){return e.spikeDistance<=b})}if(o&&o.length){var s;var l=o.filter(function(e){return e.xa.showspikes&&e.xa.spikesnap!=="hovered data"});if(l.length){var u=l[0];if(we(u.x0)&&we(u.y0)){s=G(u);if(!R.vLinePoint||R.vLinePoint.spikeDistance>s.spikeDistance){R.vLinePoint=s}}}var c=o.filter(function(e){return e.ya.showspikes&&e.ya.spikesnap!=="hovered data"});if(c.length){var f=c[0];if(we(f.x0)&&we(f.y0)){s=G(f);if(!R.hLinePoint||R.hLinePoint.spikeDistance>s.spikeDistance){R.hLinePoint=s}}}}}}}}Y();function V(e,t){var r=null;var a=Infinity;var n;for(var i=0;i<e.length;i++){n=e[i].spikeDistance;if(n<=a&&n<=t){r=e[i];a=n}}return r}function G(e){if(!e)return null;return{xa:e.xa,ya:e.ya,x:e.xSpike!==undefined?e.xSpike:(e.x0+e.x1)/2,y:e.ySpike!==undefined?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}}var W={fullLayout:p,container:p._hoverlayer,outerContainer:p._paperdiv,event:d};var $=e._spikepoints;var Z={vLinePoint:R.vLinePoint,hLinePoint:R.hLinePoint};e._spikepoints=Z;if(h&&b!==0){if(_.length!==0){var X=_.filter(function(e){return e.ya.showspikes});var J=V(X,b);R.hLinePoint=G(J);var K=_.filter(function(e){return e.xa.showspikes});var Q=V(K,b);R.vLinePoint=G(Q)}}if(_.length===0){var ee=Se.unhoverRaw(e,d);if(h&&(R.hLinePoint!==null||R.vLinePoint!==null)){if(Fe($)){Ne(e,R,W)}}return ee}if(h){if(Fe($)){Ne(e,R,W)}}var te=function(){_.sort(function(e,t){return e.distance-t.distance});_=je(_,y)};te();if(Le.isXYhover(C)&&_[0].length!==0&&_[0].trace.type!=="splom"){var re=_[0];if(Ce[re.trace.type]){_=_.filter(function(e){return e.trace.index===re.trace.index})}else{_=[re]}var ae=_.length;var ne=He("x",re,p);var ie=He("y",re,p);Y(ne,ie);var oe=[];var se={};var le=0;var ue=function(e){var t=Ce[e.trace.type]?De(e):e.trace.index;if(!se[t]){le++;se[t]=le;oe.push(e)}else{var r=se[t]-1;var a=oe[r];if(r>0&&Math.abs(e.distance)<Math.abs(a.distance)){oe[r]=e}}};var ce;for(ce=0;ce<ae;ce++){ue(_[ce])}for(ce=_.length-1;ce>ae-1;ce--){ue(_[ce])}_=oe;te()}var fe=e._hoverdata;var de=[];for(f=0;f<_.length;f++){var ve=_[f];var pe=Le.makeEventData(ve,ve.trace,ve.cd);if(ve.hovertemplate!==false){var he=false;if(ve.cd[ve.index]&&ve.cd[ve.index].ht){he=ve.cd[ve.index].ht}ve.hovertemplate=he||ve.trace.hovertemplate||false}ve.eventData=[pe];de.push(pe)}e._hoverdata=de;var me=y==="y"&&(w.length>1||_.length>1)||y==="closest"&&N&&_.length>1;var ge=Ae.combine(p.plot_bgcolor||Ae.background,p.paper_bgcolor);var ye={hovermode:y,rotateLabels:me,bgColor:ge,container:p._hoverlayer,outerContainer:p._paperdiv,commonLabelOpts:p.hoverlabel,hoverdistance:p.hoverdistance};var xe=Oe(_,ye,e);if(!Le.isUnifiedHover(y)){Ie(xe,me?"xa":"ya",p);Pe(xe,me,p._invScaleX,p._invScaleY)}if(d.target&&d.target.tagName){var be=Ee.getComponentMethod("annotations","hasClickToShow")(e,de);Me(_e.select(d.target),be?"pointer":"")}if(!d.target||r||!ze(e,d,fe))return;if(fe){e.emit("plotly_unhover",{event:d,points:fe})}e.emit("plotly_hover",{event:d,points:e._hoverdata,xaxes:m,yaxes:g,xvals:T,yvals:k})}function De(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa,e.ya||""].join(",")}var d=/<extra>([\s\S]*)<\/extra>/;function Oe(e,t,A){var S=A._fullLayout;var E=t.hovermode;var L=t.rotateLabels;var C=t.bgColor;var r=t.container;var a=t.outerContainer;var _=t.commonLabelOpts||{};var D=t.fontFamily||Q.HOVERFONT;var O=t.fontSize||Q.HOVERFONTSIZE;var w=e[0];var T=w.xa;var k=w.ya;var n=E.charAt(0);var I=w[n+"Label"];var i=a.node().getBoundingClientRect();var P=i.top;var R=i.width;var N=i.height;var z=I!==undefined&&w.distance<=t.hoverdistance&&(E==="x"||E==="y");if(z){var o=true;var s,l;for(s=0;s<e.length;s++){if(o&&e[s].zLabel===undefined)o=false;l=e[s].hoverinfo||e[s].trace.hoverinfo;if(l){var u=Array.isArray(l)?l:l.split("+");if(u.indexOf("all")===-1&&u.indexOf(E)===-1){z=false;break}}}if(o)z=false}var c=r.selectAll("g.axistext").data(z?[0]:[]);c.enter().append("g").classed("axistext",true);c.exit().remove();c.each(function(){var e=_e.select(this);var t=Te.ensureSingle(e,"path","",function(e){e.style({"stroke-width":"1px"})});var r=Te.ensureSingle(e,"text","",function(e){e.attr("data-notex",1)});var a=_.bgcolor||Ae.defaultLine;var n=_.bordercolor||Ae.contrast(a);var i=Ae.contrast(a);var o={family:_.font.family||D,size:_.font.size||O,color:_.font.color||i};t.style({fill:a,stroke:n});r.text(I).call(K.font,o).call(J.positionText,0,0).call(J.convertToTspans,A);e.attr("transform","");var s=r.node().getBoundingClientRect();var l,u;if(E==="x"){var c=T.side==="top"?"-":"";r.attr("text-anchor","middle").call(J.positionText,0,T.side==="top"?P-s.bottom-ae-ne:P-s.top+ae+ne);l=T._offset+(w.x0+w.x1)/2;u=k._offset+(T.side==="top"?0:k._length);var f=s.width/2+ne;if(l<f){l=f;t.attr("d","M-"+(f-ae)+",0"+"L-"+(f-ae*2)+","+c+ae+"H"+(ne+s.width/2)+"v"+c+(ne*2+s.height)+"H-"+f+"V"+c+ae+"Z")}else if(l>S.width-f){l=S.width-f;t.attr("d","M"+(f-ae)+",0"+"L"+f+","+c+ae+"v"+c+(ne*2+s.height)+"H-"+f+"V"+c+ae+"H"+(f-ae*2)+"Z")}else{t.attr("d","M0,0"+"L"+ae+","+c+ae+"H"+(ne+s.width/2)+"v"+c+(ne*2+s.height)+"H-"+(ne+s.width/2)+"V"+c+ae+"H-"+ae+"Z")}}else{var d;var v;var p;if(k.side==="right"){d="start";v=1;p="";l=T._offset+T._length}else{d="end";v=-1;p="-";l=T._offset}u=k._offset+(w.y0+w.y1)/2;r.attr("text-anchor",d);t.attr("d","M0,0"+"L"+p+ae+","+ae+"V"+(ne+s.height/2)+"h"+p+(ne*2+s.width)+"V-"+(ne+s.height/2)+"H"+p+ae+"V-"+ae+"Z");var h=s.height/2;var m=P-s.top-h;var g="clip"+S._uid+"commonlabel"+k._id;var y;if(l<s.width+2*ne+ae){y="M-"+(ae+ne)+"-"+h+"h-"+(s.width-ne)+"V"+h+"h"+(s.width-ne)+"Z";var x=s.width-l+ne;J.positionText(r,x,m);if(d==="end"){r.selectAll("tspan").each(function(){var e=_e.select(this);var t=K.tester.append("text").text(e.text()).call(K.font,o);var r=t.node().getBoundingClientRect();if(Math.round(r.width)<Math.round(s.width)){e.attr("x",x-r.width)}t.remove()})}}else{J.positionText(r,v*(ne+ae),m);y=null}var b=S._topclips.selectAll("#"+g).data(y?[0]:[]);b.enter().append("clipPath").attr("id",g).append("path");b.exit().remove();b.select("path").attr("d",y);K.setClipUrl(r,y?g:null,A)}e.attr("transform",Z(l,u))});if(Le.isUnifiedHover(E)){r.selectAll("g.hovertext").remove();if(e.length===0)return;var f={showlegend:true,legend:{title:{text:I,font:S.hoverlabel.font},font:S.hoverlabel.font,bgcolor:S.hoverlabel.bgcolor,bordercolor:S.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:S.legend?S.legend.traceorder:undefined,orientation:"v"}};var d={};ee(f,d,A._fullData);var v=d.legend;v.entries=[];for(var p=0;p<e.length;p++){var h=ie(e[p],true,E,S,I);var m=h[0];var g=h[1];var y=e[p];y.name=g;if(g!==""){y.text=g+" : "+m}else{y.text=m}var x=y.cd[y.index];if(x){if(x.mc)y.mc=x.mc;if(x.mcc)y.mc=x.mcc;if(x.mlc)y.mlc=x.mlc;if(x.mlcc)y.mlc=x.mlcc;if(x.mlw)y.mlw=x.mlw;if(x.mrc)y.mrc=x.mrc;if(x.dir)y.dir=x.dir}y._distinct=true;v.entries.push([y])}v.entries.sort(function(e,t){return e[0].trace.index-t[0].trace.index});v.layer=r;v._inHover=true;te(A,v);var b=e[0];var M=(b.y0+b.y1)/2;var F=(b.x0+b.x1)/2;var j=r.select("g.legend");var H=j.node().getBoundingClientRect();F+=T._offset;M+=k._offset-H.height/2;var B=H.width+2*ne;var q=F+B<=R;var U=F-B>=0;if(!q&&U){F-=B}else{F+=2*ne}var Y=H.height+2*ne;var V=M<=P;var G=M+Y>=N;var W=Y<=N;if(W){if(V){M=k._offset+2*ne}else if(G){M=N-Y}}j.attr("transform",Z(F,M));return j}var $=r.selectAll("g.hovertext").data(e,function(e){return De(e)});$.enter().append("g").classed("hovertext",true).each(function(){var e=_e.select(this);e.append("rect").call(Ae.fill,Ae.addOpacity(C,.8));e.append("text").classed("name",true);e.append("path").style("stroke-width","1px");e.append("text").classed("nums",true).call(K.font,D,O)});$.exit().remove();$.each(function(e){var t=_e.select(this).attr("transform","");var r=e.color;if(Array.isArray(r)){r=r[e.eventData[0].pointNumber]}var a=e.bgcolor||r;var n=Ae.combine(Ae.opacity(a)?a:Ae.defaultLine,C);var i=Ae.combine(Ae.opacity(r)?r:Ae.defaultLine,C);var o=e.borderColor||Ae.contrast(n);var s=ie(e,z,E,S,I,t);var l=s[0];var u=s[1];var c=t.select("text.nums").call(K.font,e.fontFamily||D,e.fontSize||O,e.fontColor||o).text(l).attr("data-notex",1).call(J.positionText,0,0).call(J.convertToTspans,A);var f=t.select("text.name");var d=0;var v=0;if(u&&u!==l){f.call(K.font,e.fontFamily||D,e.fontSize||O,i).text(u).attr("data-notex",1).call(J.positionText,0,0).call(J.convertToTspans,A);var p=f.node().getBoundingClientRect();d=p.width+2*ne;v=p.height+2*ne}else{f.remove();t.select("rect").remove()}t.select("path").style({fill:n,stroke:o});var h=c.node().getBoundingClientRect();var m=e.xa._offset+(e.x0+e.x1)/2;var g=e.ya._offset+(e.y0+e.y1)/2;var y=Math.abs(e.x1-e.x0);var x=Math.abs(e.y1-e.y0);var b=h.width+ae+ne+d;var _,w;e.ty0=P-h.top;e.bx=h.width+2*ne;e.by=Math.max(h.height+2*ne,v);e.anchor="start";e.txwidth=h.width;e.tx2width=d;e.offset=0;if(L){e.pos=m;_=g+x/2+b<=N;w=g-x/2-b>=0;if((e.idealAlign==="top"||!_)&&w){g-=x/2;e.anchor="end"}else if(_){g+=x/2;e.anchor="start"}else e.anchor="middle"}else{e.pos=g;_=m+y/2+b<=R;w=m-y/2-b>=0;if((e.idealAlign==="left"||!_)&&w){m-=y/2;e.anchor="end"}else if(_){m+=y/2;e.anchor="start"}else{e.anchor="middle";var T=b/2;var k=m+T-R;var M=m-T;if(k>0)m-=k;if(M<0)m+=-M}}c.attr("text-anchor",e.anchor);if(d)f.attr("text-anchor",e.anchor);t.attr("transform",Z(m,g)+(L?X(re):""))});return $}function ie(r,e,t,a,n,i){var o="";var s="";if(r.nameOverride!==undefined)r.name=r.nameOverride;if(r.name){if(r.trace._meta){r.name=Te.templateString(r.name,r.trace._meta)}o=v(r.name,r.nameLength)}var l=t.charAt(0);var u=l==="x"?"y":"x";if(r.zLabel!==undefined){if(r.xLabel!==undefined)s+="x: "+r.xLabel+"<br>";if(r.yLabel!==undefined)s+="y: "+r.yLabel+"<br>";if(r.trace.type!=="choropleth"&&r.trace.type!=="choroplethmapbox"){s+=(s?"z: ":"")+r.zLabel}}else if(e&&r[l+"Label"]===n){s=r[u+"Label"]||""}else if(r.xLabel===undefined){if(r.yLabel!==undefined&&r.trace.type!=="scattercarpet"){s=r.yLabel}}else if(r.yLabel===undefined)s=r.xLabel;else s="("+r.xLabel+", "+r.yLabel+")";if((r.text||r.text===0)&&!Array.isArray(r.text)){s+=(s?"<br>":"")+r.text}if(r.extraText!==undefined)s+=(s?"<br>":"")+r.extraText;if(i&&s===""&&!r.hovertemplate){if(o==="")i.remove();s=o}var c=r.hovertemplate||false;if(c){var f=r.hovertemplateLabels||r;if(r[l+"Label"]!==n){f[l+"other"]=f[l+"Val"];f[l+"otherLabel"]=f[l+"Label"]}s=Te.hovertemplateString(c,f,a._d3locale,r.eventData[0]||{},r.trace._meta);s=s.replace(d,function(e,t){o=v(t,r.nameLength);return""})}return[s,o]}function Ie(e,n,i){var t=0;var o=1;var r=e.size();var s=new Array(r);var l=0;e.each(function(e){var t=e[n];var r=t._id.charAt(0)==="x";var a=t.range;if(l===0&&a&&a[0]>a[1]!==r){o=-1}s[l++]=[{datum:e,traceIndex:e.trace.index,dp:0,pos:e.pos,posref:e.posref,size:e.by*(r?T:1)/2,pmin:0,pmax:r?i.width:i.height}]});s.sort(function(e,t){return e[0].posref-t[0].posref||o*(t[0].traceIndex-e[0].traceIndex)});var u,c,f,d,v,p,a;function h(e){var t=e[0];var r=e[e.length-1];c=t.pmin-t.pos-t.dp+t.size;f=r.pos+r.dp+r.size-t.pmax;if(c>.01){for(v=e.length-1;v>=0;v--)e[v].dp+=c;u=false}if(f<.01)return;if(c<-.01){for(v=e.length-1;v>=0;v--)e[v].dp-=f;u=false}if(!u)return;var a=0;for(d=0;d<e.length;d++){p=e[d];if(p.pos+p.dp+p.size>t.pmax)a++}for(d=e.length-1;d>=0;d--){if(a<=0)break;p=e[d];if(p.pos>t.pmax-1){p.del=true;a--}}for(d=0;d<e.length;d++){if(a<=0)break;p=e[d];if(p.pos<t.pmin+1){p.del=true;a--;f=p.size*2;for(v=e.length-1;v>=0;v--)e[v].dp-=f}}for(d=e.length-1;d>=0;d--){if(a<=0)break;p=e[d];if(p.pos+p.dp+p.size>t.pmax){p.del=true;a--}}}while(!u&&t<=r){t++;u=true;d=0;while(d<s.length-1){var m=s[d];var g=s[d+1];var y=m[m.length-1];var x=g[0];c=y.pos+y.dp+y.size-x.pos-x.dp+x.size;if(c>.01&&y.pmin===x.pmin&&y.pmax===x.pmax){for(v=g.length-1;v>=0;v--)g[v].dp+=c;m.push.apply(m,g);s.splice(d+1,1);a=0;for(v=m.length-1;v>=0;v--)a+=m[v].dp;f=a/m.length;for(v=m.length-1;v>=0;v--)m[v].dp-=f;u=false}else d++}s.forEach(h)}for(d=s.length-1;d>=0;d--){var b=s[d];for(v=b.length-1;v>=0;v--){var _=b[v];var w=_.datum;w.offset=_.dp;w.del=_.del}}}function Pe(e,p,t,r){var h=function(e){return e*t};var m=function(e){return e*r};e.each(function(e){var t=_e.select(this);if(e.del)return t.remove();var r=t.select("text.nums");var a=e.anchor;var n=a==="end"?-1:1;var i={start:1,end:-1,middle:0}[a];var o=i*(ae+ne);var s=o+i*(e.txwidth+ne);var l=0;var u=e.offset;var c=a==="middle";if(c){o-=e.tx2width/2;s+=e.txwidth/2+ne}if(p){u*=-y;l=e.offset*g}t.select("path").attr("d",c?"M-"+h(e.bx/2+e.tx2width/2)+","+m(u-e.by/2)+"h"+h(e.bx)+"v"+m(e.by)+"h-"+h(e.bx)+"Z":"M0,0L"+h(n*ae+l)+","+m(ae+u)+"v"+m(e.by/2-ae)+"h"+h(n*e.bx)+"v-"+m(e.by)+"H"+h(n*ae+l)+"V"+m(u-ae)+"Z");var f=l+o;var d=u+e.ty0-e.by/2+ne;var v=e.textAlign||"auto";if(v!=="auto"){if(v==="left"&&a!=="start"){r.attr("text-anchor","start");f=c?-e.bx/2-e.tx2width/2+ne:-e.bx-ne}else if(v==="right"&&a!=="end"){r.attr("text-anchor","end");f=c?e.bx/2-e.tx2width/2-ne:e.bx+ne}}r.call(J.positionText,h(f),m(d));if(e.tx2width){t.select("text.name").call(J.positionText,h(s+i*ne+l),m(u+e.ty0-e.by/2+ne));t.select("rect").call(K.setRect,h(s+(i-1)*e.tx2width/2+l),m(u-e.by/2-1),h(e.tx2width),m(e.by+2))}})}function Re(n,e){var a=n.index;var i=n.trace||{};var o=n.cd[0];var r=n.cd[a]||{};function s(e){return e||we(e)&&e===0}var l=Array.isArray(a)?function(e,t){var r=Te.castOption(o,a,e);return s(r)?r:Te.extractOption({},i,"",t)}:function(e,t){return Te.extractOption(r,i,e,t)};function t(e,t,r){var a=l(t,r);if(s(a))n[e]=a}t("hoverinfo","hi","hoverinfo");t("bgcolor","hbg","hoverlabel.bgcolor");t("borderColor","hbc","hoverlabel.bordercolor");t("fontFamily","htf","hoverlabel.font.family");t("fontSize","hts","hoverlabel.font.size");t("fontColor","htc","hoverlabel.font.color");t("nameLength","hnl","hoverlabel.namelength");t("textAlign","hta","hoverlabel.align");n.posref=e==="y"||e==="closest"&&i.orientation==="h"?n.xa._offset+(n.x0+n.x1)/2:n.ya._offset+(n.y0+n.y1)/2;n.x0=Te.constrain(n.x0,0,n.xa._length);n.x1=Te.constrain(n.x1,0,n.xa._length);n.y0=Te.constrain(n.y0,0,n.ya._length);n.y1=Te.constrain(n.y1,0,n.ya._length);if(n.xLabelVal!==undefined){n.xLabel="xLabel"in n?n.xLabel:j.hoverLabelText(n.xa,n.xLabelVal,i.xhoverformat);n.xVal=n.xa.c2d(n.xLabelVal)}if(n.yLabelVal!==undefined){n.yLabel="yLabel"in n?n.yLabel:j.hoverLabelText(n.ya,n.yLabelVal,i.yhoverformat);n.yVal=n.ya.c2d(n.yLabelVal)}if(n.zLabelVal!==undefined&&n.zLabel===undefined){n.zLabel=String(n.zLabelVal)}if(!isNaN(n.xerr)&&!(n.xa.type==="log"&&n.xerr<=0)){var u=j.tickText(n.xa,n.xa.c2l(n.xerr),"hover").text;if(n.xerrneg!==undefined){n.xLabel+=" +"+u+" / -"+j.tickText(n.xa,n.xa.c2l(n.xerrneg),"hover").text}else n.xLabel+=" ± "+u;if(e==="x")n.distance+=1}if(!isNaN(n.yerr)&&!(n.ya.type==="log"&&n.yerr<=0)){var c=j.tickText(n.ya,n.ya.c2l(n.yerr),"hover").text;if(n.yerrneg!==undefined){n.yLabel+=" +"+c+" / -"+j.tickText(n.ya,n.ya.c2l(n.yerrneg),"hover").text}else n.yLabel+=" ± "+c;if(e==="y")n.distance+=1}var f=n.hoverinfo||n.trace.hoverinfo;if(f&&f!=="all"){f=Array.isArray(f)?f:f.split("+");if(f.indexOf("x")===-1)n.xLabel=undefined;if(f.indexOf("y")===-1)n.yLabel=undefined;if(f.indexOf("z")===-1)n.zLabel=undefined;if(f.indexOf("text")===-1)n.text=undefined;if(f.indexOf("name")===-1)n.name=undefined}return n}function Ne(e,t,r){var a=r.container;var n=r.fullLayout;var i=n._size;var o=r.event;var s=!!t.hLinePoint;var l=!!t.vLinePoint;var u,c;a.selectAll(".spikeline").remove();if(!(l||s))return;var f=Ae.combine(n.plot_bgcolor,n.paper_bgcolor);if(s){var d=t.hLinePoint;var v,p;u=d&&d.xa;c=d&&d.ya;var h=c.spikesnap;if(h==="cursor"){v=o.pointerX;p=o.pointerY}else{v=u._offset+d.x;p=c._offset+d.y}var m=F.readability(d.color,f)<1.5?Ae.contrast(f):d.color;var g=c.spikemode;var y=c.spikethickness;var x=c.spikecolor||m;var b=j.getPxPosition(e,c);var _,w;if(g.indexOf("toaxis")!==-1||g.indexOf("across")!==-1){if(g.indexOf("toaxis")!==-1){_=b;w=v}if(g.indexOf("across")!==-1){var T=c._counterDomainMin;var k=c._counterDomainMax;if(c.anchor==="free"){T=Math.min(T,c.position);k=Math.max(k,c.position)}_=i.l+T*i.w;w=i.l+k*i.w}a.insert("line",":first-child").attr({x1:_,x2:w,y1:p,y2:p,"stroke-width":y,stroke:x,"stroke-dasharray":K.dashStyle(c.spikedash,y)}).classed("spikeline",true).classed("crisp",true);a.insert("line",":first-child").attr({x1:_,x2:w,y1:p,y2:p,"stroke-width":y+2,stroke:f}).classed("spikeline",true).classed("crisp",true)}if(g.indexOf("marker")!==-1){a.insert("circle",":first-child").attr({cx:b+(c.side!=="right"?y:-y),cy:p,r:y,fill:x}).classed("spikeline",true)}}if(l){var M=t.vLinePoint;var A,S;u=M&&M.xa;c=M&&M.ya;var E=u.spikesnap;if(E==="cursor"){A=o.pointerX;S=o.pointerY}else{A=u._offset+M.x;S=c._offset+M.y}var L=F.readability(M.color,f)<1.5?Ae.contrast(f):M.color;var C=u.spikemode;var D=u.spikethickness;var O=u.spikecolor||L;var I=j.getPxPosition(e,u);var P,R;if(C.indexOf("toaxis")!==-1||C.indexOf("across")!==-1){if(C.indexOf("toaxis")!==-1){P=I;R=S}if(C.indexOf("across")!==-1){var N=u._counterDomainMin;var z=u._counterDomainMax;if(u.anchor==="free"){N=Math.min(N,u.position);z=Math.max(z,u.position)}P=i.t+(1-z)*i.h;R=i.t+(1-N)*i.h}a.insert("line",":first-child").attr({x1:A,x2:A,y1:P,y2:R,"stroke-width":D,stroke:O,"stroke-dasharray":K.dashStyle(u.spikedash,D)}).classed("spikeline",true).classed("crisp",true);a.insert("line",":first-child").attr({x1:A,x2:A,y1:P,y2:R,"stroke-width":D+2,stroke:f}).classed("spikeline",true).classed("crisp",true)}if(C.indexOf("marker")!==-1){a.insert("circle",":first-child").attr({cx:A,cy:I-(u.side!=="top"?D:-D),r:D,fill:O}).classed("spikeline",true)}}}function ze(e,t,r){if(!r||r.length!==e._hoverdata.length)return true;for(var a=r.length-1;a>=0;a--){var n=r[a];var i=e._hoverdata[a];if(n.curveNumber!==i.curveNumber||String(n.pointNumber)!==String(i.pointNumber)||String(n.pointNumbers)!==String(i.pointNumbers)){return true}}return false}function Fe(e,t){if(!t)return true;if(t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint)return true;return false}function v(e,t){return J.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em"]})}function je(e,t){var r=t.charAt(0);var a=[];var n=[];var i=[];for(var o=0;o<e.length;o++){var s=e[o];if(Ee.traceIs(s.trace,"bar-like")||Ee.traceIs(s.trace,"box-violin")){i.push(s)}else if(s.trace[r+"period"]){n.push(s)}else{a.push(s)}}return a.concat(n).concat(i)}function He(e,t,r){var a=t[e+"a"];var n=t[e+"Val"];if(a.type==="category")n=a._categoriesMap[n];else if(a.type==="date")n=a.d2c(n);var i=t.cd[t.index];if(i&&i.t&&i.t.posLetter===a._id){if(r.boxmode==="group"||r.violinmode==="group"){n+=i.t.dPos}}return n}},{"../../lib":285,"../../lib/events":278,"../../lib/override_cursor":296,"../../lib/svg_text_utils":307,"../../plots/cartesian/axes":331,"../../registry":373,"../color":155,"../dragelement":174,"../drawing":177,"../legend/defaults":207,"../legend/draw":208,"./constants":189,"./helpers":191,"@plotly/d3":20,"fast-isnumeric":31,tinycolor2:119}],193:[function(e,t,r){"use strict";var o=e("../../lib");var s=e("../color");var l=e("./helpers").isUnifiedHover;t.exports=function e(t,r,a,n){n=n||{};function i(e){if(!n.font[e]){n.font[e]=r.legend?r.legend.font[e]:r.font[e]}}if(r&&l(r.hovermode)){if(!n.font)n.font={};i("size");i("family");i("color");if(r.legend){if(!n.bgcolor)n.bgcolor=s.combine(r.legend.bgcolor,r.paper_bgcolor);if(!n.bordercolor)n.bordercolor=r.legend.bordercolor}else{if(!n.bgcolor)n.bgcolor=r.paper_bgcolor}}a("hoverlabel.bgcolor",n.bgcolor);a("hoverlabel.bordercolor",n.bordercolor);a("hoverlabel.namelength",n.namelength);o.coerceFont(a,"hoverlabel.font",n.font);a("hoverlabel.align",n.align)}},{"../../lib":285,"../color":155,"./helpers":191}],194:[function(e,t,r){"use strict";var n=e("../../lib");var i=e("./layout_attributes");t.exports=function e(r,a){function t(e,t){if(a[e]!==undefined)return a[e];return n.coerce(r,a,i,e,t)}t("clickmode");return t("hovermode")}},{"../../lib":285,"./layout_attributes":196}],195:[function(e,t,r){"use strict";var a=e("@plotly/d3");var n=e("../../lib");var i=e("../dragelement");var o=e("./helpers");var s=e("./layout_attributes");var l=e("./hover");t.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:s},attributes:e("./attributes"),layoutAttributes:s,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:o.getDistanceFunction,getClosest:o.getClosest,inbox:o.inbox,quadrature:o.quadrature,appendArrayPointValue:o.appendArrayPointValue,castHoverOption:c,castHoverinfo:f,hover:l.hover,unhover:i.unhover,loneHover:l.loneHover,loneUnhover:u,click:e("./click")};function u(e){var t=n.isD3Selection(e)?e:a.select(e);t.selectAll("g.hovertext").remove();t.selectAll(".spikeline").remove()}function c(e,t,r){return n.castOption(e,t,"hoverlabel."+r)}function f(t,r,e){function a(e){return n.coerceHoverinfo({hoverinfo:e},{_module:t._module},r)}return n.castOption(t,e,"hoverinfo",a)}},{"../../lib":285,"../dragelement":174,"./attributes":186,"./calc":187,"./click":188,"./constants":189,"./defaults":190,"./helpers":191,"./hover":192,"./layout_attributes":196,"./layout_defaults":197,"./layout_global_defaults":198,"@plotly/d3":20}],196:[function(e,t,r){"use strict";var a=e("./constants");var n=e("../../plots/font_attributes")({editType:"none"});n.family.dflt=a.HOVERFONT;n.size.dflt=a.HOVERFONTSIZE;t.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",false],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",false,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:n,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":360,"./constants":189}],197:[function(e,t,r){"use strict";var u=e("../../lib");var c=e("./layout_attributes");var f=e("./hovermode_defaults");var d=e("./hoverlabel_defaults");t.exports=function e(r,a){function t(e,t){return u.coerce(r,a,c,e,t)}var n=f(r,a);if(n){t("hoverdistance");t("spikedistance")}var i=t("dragmode");if(i==="select")t("selectdirection");var o=a._has("mapbox");var s=a._has("geo");var l=a._basePlotModules.length;if(a.dragmode==="zoom"&&((o||s)&&l===1||o&&s&&l===2)){a.dragmode="pan"}d(r,a,t)}},{"../../lib":285,"./hoverlabel_defaults":193,"./hovermode_defaults":194,"./layout_attributes":196}],198:[function(e,t,r){"use strict";var n=e("../../lib");var i=e("./hoverlabel_defaults");var o=e("./layout_attributes");t.exports=function e(r,a){function t(e,t){return n.coerce(r,a,o,e,t)}i(r,a,t)}},{"../../lib":285,"./hoverlabel_defaults":193,"./layout_attributes":196}],199:[function(e,t,r){"use strict";var w=e("../../lib");var a=e("../../lib/regex").counter;var n=e("../../plots/domain").attributes;var i=e("../../plots/cartesian/constants").idRegex;var T=e("../../plot_api/plot_template");var k={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:true,dimensions:2,items:{valType:"enumerated",values:[a("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:true,items:{valType:"enumerated",values:[i.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:true,items:{valType:"enumerated",values:[i.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:n({name:"grid",editType:"plot",noGridCell:true},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function I(e,t,r){var a=t[r+"axes"];var n=Object.keys((e._splomAxes||{})[r]||{});if(Array.isArray(a))return a;if(n.length)return n}function o(e,t){var r=e.grid||{};var a=I(t,r,"x");var n=I(t,r,"y");if(!e.grid&&!a&&!n)return;var i=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]);var o=Array.isArray(a);var s=Array.isArray(n);var l=o&&a!==r.xaxes&&s&&n!==r.yaxes;var u,c;if(i){u=r.subplots.length;c=r.subplots[0].length}else{if(s)u=n.length;if(o)c=a.length}var f=T.newContainer(t,"grid");function d(e,t){return w.coerce(r,f,k,e,t)}var v=d("rows",u);var p=d("columns",c);if(!(v*p>1)){delete t.grid;return}if(!i&&!o&&!s){var h=d("pattern")==="independent";if(h)i=true}f._hasSubplotGrid=i;var m=d("roworder");var g=m==="top to bottom";var y=i?.2:.1;var x=i?.3:.1;var b,_;if(l&&t._splomGridDflt){b=t._splomGridDflt.xside;_=t._splomGridDflt.yside}f._domains={x:M("x",d,y,b,p),y:M("y",d,x,_,v,g)}}function M(e,t,r,a,n,i){var o=t(e+"gap",r);var s=t("domain."+e);t(e+"side",a);var l=new Array(n);var u=s[0];var c=(s[1]-u)/(n-o);var f=c*(1-o);for(var d=0;d<n;d++){var v=u+c*d;l[i?n-1-d:d]=[v,v+f]}return l}function s(e,t){var r=t.grid;if(!r||!r._domains)return;var a=e.grid||{};var n=t._subplots;var i=r._hasSubplotGrid;var o=r.rows;var s=r.columns;var l=r.pattern==="independent";var u,c,f,d,v,p,h;var m=r._axisMap={};if(i){var g=a.subplots||[];p=r.subplots=new Array(o);var y=1;for(u=0;u<o;u++){var x=p[u]=new Array(s);var b=g[u]||[];for(c=0;c<s;c++){if(l){v=y===1?"xy":"x"+y+"y"+y;y++}else v=b[c];x[c]="";if(n.cartesian.indexOf(v)!==-1){h=v.indexOf("y");f=v.slice(0,h);d=v.slice(h);if(m[f]!==undefined&&m[f]!==c||m[d]!==undefined&&m[d]!==u){continue}x[c]=v;m[f]=c;m[d]=u}}}}else{var _=I(t,a,"x");var w=I(t,a,"y");r.xaxes=P(_,n.xaxis,s,m,"x");r.yaxes=P(w,n.yaxis,o,m,"y")}var T=r._anchors={};var k=r.roworder==="top to bottom";for(var M in m){var A=M.charAt(0);var S=r[A+"side"];var E,L,C;if(S.length<8){T[M]="free"}else if(A==="x"){if(S.charAt(0)==="t"===k){E=0;L=1;C=o}else{E=o-1;L=-1;C=-1}if(i){var D=m[M];for(u=E;u!==C;u+=L){v=p[u][D];if(!v)continue;h=v.indexOf("y");if(v.slice(0,h)===M){T[M]=v.slice(h);break}}}else{for(u=E;u!==C;u+=L){d=r.yaxes[u];if(n.cartesian.indexOf(M+d)!==-1){T[M]=d;break}}}}else{if(S.charAt(0)==="l"){E=0;L=1;C=s}else{E=s-1;L=-1;C=-1}if(i){var O=m[M];for(u=E;u!==C;u+=L){v=p[O][u];if(!v)continue;h=v.indexOf("y");if(v.slice(h)===M){T[M]=v.slice(0,h);break}}}else{for(u=E;u!==C;u+=L){f=r.xaxes[u];if(n.cartesian.indexOf(f+M)!==-1){T[M]=f;break}}}}}}function P(e,r,t,a,n){var i=new Array(t);var o;function s(e,t){if(r.indexOf(t)!==-1&&a[t]===undefined){i[e]=t;a[t]=e}else i[e]=""}if(Array.isArray(e)){for(o=0;o<t;o++){s(o,e[o])}}else{s(0,n);for(o=1;o<t;o++){s(o,n+(o+1))}}return i}t.exports={moduleType:"component",name:"grid",schema:{layout:{grid:k}},layoutAttributes:k,sizeDefaults:o,contentDefaults:s}},{"../../lib":285,"../../lib/regex":301,"../../plot_api/plot_template":320,"../../plots/cartesian/constants":338,"../../plots/domain":359}],200:[function(e,t,r){"use strict";var a=e("../../plots/cartesian/constants");var n=e("../../plot_api/plot_template").templatedArray;var i=e("../../constants/axis_placeable_objects");t.exports=n("image",{visible:{valType:"boolean",dflt:true,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",a.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",a.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":261,"../../plot_api/plot_template":320,"../../plots/cartesian/constants":338}],201:[function(e,t,r){"use strict";var g=e("fast-isnumeric");var y=e("../../lib/to_log_range");t.exports=function e(t,r,a,n){r=r||{};var i=a==="log"&&r.type==="linear";var o=a==="linear"&&r.type==="log";if(!(i||o))return;var s=t._fullLayout.images;var l=r._id.charAt(0);var u;var c;for(var f=0;f<s.length;f++){u=s[f];c="images["+f+"].";if(u[l+"ref"]===r._id){var d=u[l];var v=u["size"+l];var p=null;var h=null;if(i){p=y(d,r.range);var m=v/Math.pow(10,p)/2;h=2*Math.log(m+Math.sqrt(1+m*m))/Math.LN10}else{p=Math.pow(10,d);h=p*(Math.pow(10,v/2)-Math.pow(10,-v/2))}if(!g(p)){p=null;h=null}else if(!g(h))h=null;n(c+l,p);n(c+"size"+l,h)}}}},{"../../lib/to_log_range":309,"fast-isnumeric":31}],202:[function(e,t,r){"use strict";var d=e("../../lib");var v=e("../../plots/cartesian/axes");var n=e("../../plots/array_container_defaults");var p=e("./attributes");var i="images";t.exports=function e(t,r){var a={name:i,handleItemDefaults:o};n(t,r,a)};function o(r,a,e){function t(e,t){return d.coerce(r,a,p,e,t)}var n=t("source");var i=t("visible",!!n);if(!i)return a;t("layer");t("xanchor");t("yanchor");t("sizex");t("sizey");t("sizing");t("opacity");var o={_fullLayout:e};var s=["x","y"];for(var l=0;l<2;l++){var u=s[l];var c=v.coerceRef(r,a,o,u,"paper",undefined);if(c!=="paper"){var f=v.getFromId(o,c);f._imgIndices.push(a._index)}v.coercePosition(a,o,t,c,u,0)}return a}},{"../../lib":285,"../../plots/array_container_defaults":326,"../../plots/cartesian/axes":331,"./attributes":200}],203:[function(e,t,r){"use strict";var b=e("@plotly/d3");var _=e("../drawing");var w=e("../../plots/cartesian/axes");var h=e("../../plots/cartesian/axis_ids");var m=e("../../constants/xmlns_namespaces");t.exports=function e(g){var y=g._fullLayout;var t=[];var r={};var a=[];var n;var i;for(i=0;i<y.images.length;i++){var o=y.images[i];if(o.visible){if(o.layer==="below"&&o.xref!=="paper"&&o.yref!=="paper"){n=h.ref2id(o.xref)+h.ref2id(o.yref);var s=y._plots[n];if(!s){a.push(o);continue}if(s.mainplot){n=s.mainplot.id}if(!r[n]){r[n]=[]}r[n].push(o)}else if(o.layer==="above"){t.push(o)}else{a.push(o)}}}var x={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function l(r){var n=b.select(this);if(this._imgSrc===r.source){return}n.attr("xmlns",m.svg);if(r.source&&r.source.slice(0,5)==="data:"){n.attr("xlink:href",r.source);this._imgSrc=r.source}else{var e=new Promise(function(a){var e=new Image;this.img=e;e.setAttribute("crossOrigin","anonymous");e.onerror=t;e.onload=function(){var e=document.createElement("canvas");e.width=this.width;e.height=this.height;var t=e.getContext("2d");t.drawImage(this,0,0);var r=e.toDataURL("image/png");n.attr("xlink:href",r);a()};n.on("error",t);e.src=r.source;this._imgSrc=r.source;function t(){n.remove();a()}}.bind(this));g._promises.push(e)}}function u(e){var t=b.select(this);var r=w.getFromId(g,e.xref);var a=w.getFromId(g,e.yref);var n=w.getRefType(e.xref)==="domain";var i=w.getRefType(e.yref)==="domain";var o=y._size;var s,l;if(r!==undefined){s=typeof e.xref==="string"&&n?r._length*e.sizex:Math.abs(r.l2p(e.sizex)-r.l2p(0))}else{s=e.sizex*o.w}if(a!==undefined){l=typeof e.yref==="string"&&i?a._length*e.sizey:Math.abs(a.l2p(e.sizey)-a.l2p(0))}else{l=e.sizey*o.h}var u=s*x.x[e.xanchor].offset;var c=l*x.y[e.yanchor].offset;var f=x.x[e.xanchor].sizing+x.y[e.yanchor].sizing;var d,v;if(r!==undefined){d=typeof e.xref==="string"&&n?r._length*e.x+r._offset:r.r2p(e.x)+r._offset}else{d=e.x*o.w+o.l}d+=u;if(a!==undefined){v=typeof e.yref==="string"&&i?a._length*(1-e.y)+a._offset:a.r2p(e.y)+a._offset}else{v=o.h-e.y*o.h+o.t}v+=c;switch(e.sizing){case"fill":f+=" slice";break;case"stretch":f="none";break}t.attr({x:d,y:v,width:s,height:l,preserveAspectRatio:f,opacity:e.opacity});var p=r&&w.getRefType(e.xref)!=="domain"?r._id:"";var h=a&&w.getRefType(e.yref)!=="domain"?a._id:"";var m=p+h;_.setClipUrl(t,m?"clip"+y._uid+m:null,g)}var c=y._imageLowerLayer.selectAll("image").data(a);var f=y._imageUpperLayer.selectAll("image").data(t);c.enter().append("image");f.enter().append("image");c.exit().remove();f.exit().remove();c.each(function(e){l.bind(this)(e);u.bind(this)(e)});f.each(function(e){l.bind(this)(e);u.bind(this)(e)});var d=Object.keys(y._plots);for(i=0;i<d.length;i++){n=d[i];var v=y._plots[n];if(!v.imagelayer)continue;var p=v.imagelayer.selectAll("image").data(r[n]||[]);p.enter().append("image");p.exit().remove();p.each(function(e){l.bind(this)(e);u.bind(this)(e)})}}},{"../../constants/xmlns_namespaces":266,"../../plots/cartesian/axes":331,"../../plots/cartesian/axis_ids":335,"../drawing":177,"@plotly/d3":20}],204:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":344,"./attributes":200,"./convert_coords":201,"./defaults":202,"./draw":203}],205:[function(e,t,r){"use strict";var a=e("../../plots/font_attributes");var n=e("../color/attributes");t.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:n.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:a({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",false],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",false],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:a({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":360,"../color/attributes":154}],206:[function(e,t,r){"use strict";t.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],207:[function(e,t,r){"use strict";var _=e("../../registry");var w=e("../../lib");var T=e("../../plot_api/plot_template");var k=e("./attributes");var M=e("../../plots/layout_attributes");var A=e("./helpers");t.exports=function e(t,r,a){var n=t.legend||{};var i=0;var o=false;var s="normal";for(var l=0;l<a.length;l++){var u=a[l];if(!u.visible)continue;if(u.showlegend||u._dfltShowLegend&&!(u._module&&u._module.attributes&&u._module.attributes.showlegend&&u._module.attributes.showlegend.dflt===false)){i++;if(u.showlegend){o=true;if(_.traceIs(u,"pie-like")||u._input.showlegend===true){i++}}}if(_.traceIs(u,"bar")&&r.barmode==="stack"||["tonextx","tonexty"].indexOf(u.fill)!==-1){s=A.isGrouped({traceorder:s})?"grouped+reversed":"reversed"}if(u.legendgroup!==undefined&&u.legendgroup!==""){s=A.isReversed({traceorder:s})?"reversed+grouped":"grouped"}}var c=w.coerce(t,r,M,"showlegend",o&&i>1);if(c===false&&!n.uirevision)return;var f=T.newContainer(r,"legend");function d(e,t){return w.coerce(n,f,k,e,t)}d("uirevision",r.uirevision);if(c===false)return;d("bgcolor",r.paper_bgcolor);d("bordercolor");d("borderwidth");var v=w.coerceFont(d,"font",r.font);var p=d("orientation");var h=p==="h";var m,g,y;if(h){m=0;if(_.getComponentMethod("rangeslider","isVisible")(t.xaxis)){g=1.1;y="bottom"}else{g=-.1;y="top"}}else{m=1.02;g=1;y="auto"}d("traceorder",s);if(A.isGrouped(r.legend))d("tracegroupgap");d("itemsizing");d("itemwidth");d("itemclick");d("itemdoubleclick");d("x",m);d("xanchor");d("y",g);d("yanchor",y);d("valign");w.noneOrAll(n,f,["x","y"]);var x=d("title.text");if(x){d("title.side",h?"left":"top");var b=w.extendFlat({},v,{size:w.bigFont(v.size)});w.coerceFont(d,"title.font",b)}}},{"../../lib":285,"../../plot_api/plot_template":320,"../../plots/layout_attributes":364,"../../registry":373,"./attributes":205,"./helpers":211}],208:[function(e,t,r){"use strict";var F=e("@plotly/d3");var R=e("../../lib");var o=e("../../plots/plots");var N=e("../../registry");var u=e("../../lib/events");var z=e("../dragelement");var j=e("../drawing");var s=e("../color");var g=e("../../lib/svg_text_utils");var c=e("./handle_click");var H=e("./constants");var a=e("../../constants/alignment");var y=a.LINE_SPACING;var B=a.FROM_TL;var i=a.FROM_BR;var l=e("./get_legend_data");var f=e("./style");var q=e("./helpers");var x=1;t.exports=function e(t,r){if(!r)r=t._fullLayout.legend||{};return n(t,r)};function n(k,M){var A=k._fullLayout;var S="legend"+A._uid;var E;var L=M._inHover;if(L){E=M.layer;S+="-hover"}else{E=A._infolayer}if(!E)return;if(!k._legendMouseDownTime)k._legendMouseDownTime=0;var e;if(!L){if(!k.calcdata)return;e=A.showlegend&&l(k.calcdata,M)}else{if(!M.entries)return;e=l(M.entries,M)}var r=A.hiddenlabels||[];if(!L&&(!A.showlegend||!e.length)){E.selectAll(".legend").remove();A._topdefs.select("#"+S).remove();return o.autoMargin(k,"legend")}var C=R.ensureSingle(E,"g","legend",function(e){if(!L)e.attr("pointer-events","all")});var D=R.ensureSingleById(A._topdefs,"clipPath",S,function(e){e.append("rect")});var O=R.ensureSingle(C,"rect","bg",function(e){e.attr("shape-rendering","crispEdges")});O.call(s.stroke,M.bordercolor).call(s.fill,M.bgcolor).style("stroke-width",M.borderwidth+"px");var I=R.ensureSingle(C,"g","scrollbox");var t=M.title;M._titleWidth=0;M._titleHeight=0;if(t.text){var a=R.ensureSingle(I,"text","legendtitletext");a.attr("text-anchor","start").call(j.font,t.font).text(t.text);h(a,I,k,M,x)}else{I.selectAll(".legendtitletext").remove()}var P=R.ensureSingle(C,"rect","scrollbar",function(e){e.attr(H.scrollBarEnterAttrs).call(s.fill,H.scrollBarColor)});var n=I.selectAll("g.groups").data(e);n.enter().append("g").attr("class","groups");n.exit().remove();var i=n.selectAll("g.traces").data(R.identity);i.enter().append("g").attr("class","traces");i.exit().remove();i.style("opacity",function(e){var t=e[0].trace;if(N.traceIs(t,"pie-like")){return r.indexOf(e[0].label)!==-1?.5:1}else{return t.visible==="legendonly"?.5:1}}).each(function(){F.select(this).call(d,k,M)}).call(f,k,M).each(function(){if(!L)F.select(this).call(p,k)});R.syncOrAsync([o.previousPromises,function(){return b(k,n,i,M)},function(){if(!L&&V(k))return;var n=A._size;var a=M.borderwidth;var e=n.l+n.w*M.x-B[G(M)]*M._width;var t=n.t+n.h*(1-M.y)-B[W(M)]*M._effHeight;if(!L&&A.margin.autoexpand){var r=e;var i=t;e=R.constrain(e,0,A.width-M._width);t=R.constrain(t,0,A.height-M._effHeight);if(e!==r){R.log("Constrain legend.x to make legend fit inside graph")}if(t!==i){R.log("Constrain legend.y to make legend fit inside graph")}}if(!L)j.setTranslate(C,e,t);P.on(".drag",null);C.on("wheel",null);if(L||M._height<=M._maxHeight||k._context.staticPlot){var o=M._effHeight;if(L)o=M._height;O.attr({width:M._width-a,height:o-a,x:a/2,y:a/2});j.setTranslate(I,0,0);D.select("rect").attr({width:M._width-2*a,height:o-2*a,x:a,y:a});j.setClipUrl(I,S,k);j.setRect(P,0,0,0,0);delete M._scrollY}else{var s=Math.max(H.scrollBarMinHeight,M._effHeight*M._effHeight/M._height);var l=M._effHeight-s-2*H.scrollBarMargin;var u=M._height-M._effHeight;var c=l/u;var f=Math.min(M._scrollY||0,u);O.attr({width:M._width-2*a+H.scrollBarWidth+H.scrollBarMargin,height:M._effHeight-a,x:a/2,y:a/2});D.select("rect").attr({width:M._width-2*a+H.scrollBarWidth+H.scrollBarMargin,height:M._effHeight-2*a,x:a,y:a+f});j.setClipUrl(I,S,k);x(f,s,c);C.on("wheel",function(){f=R.constrain(M._scrollY+F.event.deltaY/l*u,0,u);x(f,s,c);if(f!==0&&f!==u){F.event.preventDefault()}});var d,v,p;var h=function(e,t,r){var a=(r-t)/c+e;return R.constrain(a,0,u)};var m=function(e,t,r){var a=(t-r)/c+e;return R.constrain(a,0,u)};var g=F.behavior.drag().on("dragstart",function(){var e=F.event.sourceEvent;if(e.type==="touchstart"){d=e.changedTouches[0].clientY}else{d=e.clientY}p=f}).on("drag",function(){var e=F.event.sourceEvent;if(e.buttons===2||e.ctrlKey)return;if(e.type==="touchmove"){v=e.changedTouches[0].clientY}else{v=e.clientY}f=h(p,d,v);x(f,s,c)});P.call(g);var y=F.behavior.drag().on("dragstart",function(){var e=F.event.sourceEvent;if(e.type==="touchstart"){d=e.changedTouches[0].clientY;p=f}}).on("drag",function(){var e=F.event.sourceEvent;if(e.type==="touchmove"){v=e.changedTouches[0].clientY;f=m(p,d,v);x(f,s,c)}});I.call(y)}function x(e,t,r){M._scrollY=k._fullLayout.legend._scrollY=e;j.setTranslate(I,0,-e);j.setRect(P,M._width,H.scrollBarMargin+e*r,H.scrollBarWidth,t);D.select("rect").attr("y",a+e)}if(k._context.edits.legendPosition){var b,_,w,T;C.classed("cursor-move",true);z.init({element:C.node(),gd:k,prepFn:function(){var e=j.getTranslate(C);w=e.x;T=e.y},moveFn:function(e,t){var r=w+e;var a=T+t;j.setTranslate(C,r,a);b=z.align(r,0,n.l,n.l+n.w,M.xanchor);_=z.align(a,0,n.t+n.h,n.t,M.yanchor)},doneFn:function(){if(b!==undefined&&_!==undefined){N.call("_guiRelayout",k,{"legend.x":b,"legend.y":_})}},clickFn:function(e,t){var r=E.selectAll("g.traces").filter(function(){var e=this.getBoundingClientRect();return t.clientX>=e.left&&t.clientX<=e.right&&t.clientY>=e.top&&t.clientY<=e.bottom});if(r.size()>0){U(k,C,r,e,t)}}})}}],k)}function U(e,t,r,a,n){var i=r.data()[0][0].trace;var o={event:n,node:r.node(),curveNumber:i.index,expandedIndex:i._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};if(i._group){o.group=i._group}if(N.traceIs(i,"pie-like")){o.label=r.datum()[0].label}var s=u.triggerHandler(e,"plotly_legendclick",o);if(s===false)return;if(a===1){t._clickTimeout=setTimeout(function(){if(!e._fullLayout)return;c(r,e,a)},e._context.doubleClickDelay)}else if(a===2){if(t._clickTimeout)clearTimeout(t._clickTimeout);e._legendMouseDownTime=0;var l=u.triggerHandler(e,"plotly_legenddoubleclick",o);if(l!==false)c(r,e,a)}}function d(o,s,l){var u=o.data()[0][0];var c=u.trace;var e=N.traceIs(c,"pie-like");var t=!l._inHover&&s._context.edits.legendText&&!e;var f=l._maxNameLength;var r,a;if(u.groupTitle){r=u.groupTitle.text;a=u.groupTitle.font}else{a=l.font;if(!l.entries){r=e?u.label:c.name;if(c._meta){r=R.templateString(r,c._meta)}}else{r=u.text}}var n=R.ensureSingle(o,"text","legendtext");n.attr("text-anchor","start").call(j.font,a).text(t?v(r,f):r);var i=l.itemwidth+H.itemGap*2;g.positionText(n,i,0);if(t){n.call(g.makeEditable,{gd:s,text:r}).call(h,o,s,l).on("edit",function(e){this.text(v(e,f)).call(h,o,s,l);var t=u.trace._fullInput||{};var r={};if(N.hasTransform(t,"groupby")){var a=N.getTransformIndices(t,"groupby");var n=a[a.length-1];var i=R.keyedContainer(t,"transforms["+n+"].styles","target","value.name");i.set(u.trace._group,e);r=i.constructUpdate()}else{r.name=e}return N.call("_guiRestyle",s,r,c.index)})}else{h(n,o,s,l)}}function v(e,t){var r=Math.max(4,t);if(e&&e.trim().length>=r/2)return e;e=e||"";for(var a=r-e.length;a>0;a--)e+=" ";return e}function p(t,r){var a=r._context.doubleClickDelay;var e;var n=1;var i=R.ensureSingle(t,"rect","legendtoggle",function(e){if(!r._context.staticPlot){e.style("cursor","pointer").attr("pointer-events","all")}e.call(s.fill,"rgba(0,0,0,0)")});if(r._context.staticPlot)return;i.on("mousedown",function(){e=(new Date).getTime();if(e-r._legendMouseDownTime<a){n+=1}else{n=1;r._legendMouseDownTime=e}});i.on("mouseup",function(){if(r._dragged||r._editing)return;var e=r._fullLayout.legend;if((new Date).getTime()-r._legendMouseDownTime>a){n=Math.max(n-1,1)}U(r,e,t,n,F.event)})}function h(e,t,r,a,n){if(a._inHover)e.attr("data-notex",true);g.convertToTspans(e,r,function(){m(t,r,a,n)})}function m(e,t,r,a){var n=e.data()[0][0];if(!r._inHover&&n&&!n.trace.showlegend){e.remove();return}var i=e.select("g[class*=math-group]");var o=i.node();if(!r)r=t._fullLayout.legend;var s=r.borderwidth;var l;if(a===x){l=r.title.font}else if(n.groupTitle){l=n.groupTitle.font}else{l=r.font}var u=l.size*y;var c,f;if(o){var d=j.bBox(o);c=d.height;f=d.width;if(a===x){j.setTranslate(i,s,s+c*.75)}else{j.setTranslate(i,0,c*.25)}}else{var v=e.select(a===x?".legendtitletext":".legendtext");var p=g.lineCount(v);var h=v.node();c=u*p;f=h?j.bBox(h).width:0;if(a===x){if(r.title.side==="left"){f+=H.itemGap*2}g.positionText(v,s+H.titlePad,s+u)}else{var m=H.itemGap*2+r.itemwidth;if(n.groupTitle){m=H.itemGap;f-=r.itemwidth}g.positionText(v,m,-u*((p-1)/2-.3))}}if(a===x){r._titleWidth=f;r._titleHeight=c}else{n.lineHeight=u;n.height=Math.max(c,16)+3;n.width=f}}function Y(e){var t=0;var r=0;var a=e.title.side;if(a){if(a.indexOf("left")!==-1){t=e._titleWidth}if(a.indexOf("top")!==-1){r=e._titleHeight}}return[t,r]}function b(e,t,r,n){var a=e._fullLayout;if(!n)n=a.legend;var i=a._size;var o=q.isVertical(n);var s=q.isGrouped(n);var l=n.borderwidth;var u=2*l;var c=H.itemGap;var f=n.itemwidth+c*2;var d=2*(l+c);var v=W(n);var p=n.y<0||n.y===0&&v==="top";var h=n.y>1||n.y===1&&v==="bottom";var m=n.tracegroupgap;n._maxHeight=Math.max(p||h?a.height/2:i.h,30);var g=0;n._width=0;n._height=0;var y=Y(n);if(o){r.each(function(e){var t=e[0].height;j.setTranslate(this,l+y[0],l+y[1]+n._height+t/2+c);n._height+=t;n._width=Math.max(n._width,e[0].width)});g=f+n._width;n._width+=c+f+u;n._height+=d;if(s){t.each(function(e,t){j.setTranslate(this,0,t*n.tracegroupgap)});n._height+=(n._lgroupsLength-1)*n.tracegroupgap}}else{var x=G(n);var b=n.x<0||n.x===0&&x==="right";var _=n.x>1||n.x===1&&x==="left";var w=h||p;var T=a.width/2;n._maxWidth=Math.max(b?w&&x==="left"?i.l+i.w:T:_?w&&x==="right"?i.r+i.w:T:i.w,2*f);var k=0;var M=0;r.each(function(e){var t=e[0].width+f;k=Math.max(k,t);M+=t});g=null;var A=0;if(s){var S=0;var E=0;var L=0;t.each(function(){var r=0;var a=0;F.select(this).selectAll("g.traces").each(function(e){var t=e[0].height;j.setTranslate(this,y[0],y[1]+l+c+t/2+a);a+=t;r=Math.max(r,f+e[0].width)});S=Math.max(S,a);var e=r+c;if(e+l+E>n._maxWidth){A=Math.max(A,E);E=0;L+=S+m;S=a}j.setTranslate(this,E,L);E+=e});n._width=Math.max(A,E)+l;n._height=L+S+d}else{var C=r.size();var D=M+u+(C-1)*c<n._maxWidth;var O=0;var I=0;var P=0;var R=0;r.each(function(e){var t=e[0].height;var r=f+e[0].width;var a=(D?r:k)+c;if(a+l+I-c>=n._maxWidth){A=Math.max(A,R);I=0;P+=O;n._height+=O;O=0}j.setTranslate(this,y[0]+l+I,y[1]+l+P+t/2+c);R=I+r+c;I+=a;O=Math.max(O,t)});if(D){n._width=I+u;n._height=O+d}else{n._width=Math.max(A,R)+u;n._height+=O+d}}}n._width=Math.ceil(Math.max(n._width+y[0],n._titleWidth+2*(l+H.titlePad)));n._height=Math.ceil(Math.max(n._height+y[1],n._titleHeight+2*(l+H.itemGap)));n._effHeight=Math.min(n._height,n._maxHeight);var N=e._context.edits;var z=N.legendText||N.legendPosition;r.each(function(e){var t=F.select(this).select(".legendtoggle");var r=e[0].height;var a=z?f:g||f+e[0].width;if(!o)a+=c/2;j.setRect(t,0,-r/2,a,r)})}function V(e){var t=e._fullLayout;var r=t.legend;var a=G(r);var n=W(r);return o.autoMargin(e,"legend",{x:r.x,y:r.y,l:r._width*B[a],r:r._width*i[a],b:r._effHeight*i[n],t:r._effHeight*B[n]})}function G(e){return R.isRightAnchor(e)?"right":R.isCenterAnchor(e)?"center":"left"}function W(e){return R.isBottomAnchor(e)?"bottom":R.isMiddleAnchor(e)?"middle":"top"}},{"../../constants/alignment":260,"../../lib":285,"../../lib/events":278,"../../lib/svg_text_utils":307,"../../plots/plots":366,"../../registry":373,"../color":155,"../dragelement":174,"../drawing":177,"./constants":206,"./get_legend_data":209,"./handle_click":210,"./helpers":211,"./style":213,"@plotly/d3":20}],209:[function(e,t,r){"use strict";var L=e("../../registry");var C=e("./helpers");t.exports=function e(t,a){var r=C.isGrouped(a);var n=C.isReversed(a);var i={};var o=[];var s=false;var l={};var u=0;var c=0;var f,d;function v(e,t){if(e===""||!C.isGrouped(a)){var r="~~i"+u;o.push(r);i[r]=[t];u++}else if(o.indexOf(e)===-1){o.push(e);s=true;i[e]=[t]}else{i[e].push(t)}}for(f=0;f<t.length;f++){var p=t[f];var h=p[0];var m=h.trace;var g=m.legendgroup;if(!a._inHover&&(!m.visible||!m.showlegend))continue;if(L.traceIs(m,"pie-like")){if(!l[g])l[g]={};for(d=0;d<p.length;d++){var y=p[d].label;if(!l[g][y]){v(g,{label:y,color:p[d].color,i:p[d].i,trace:m,pts:p[d].pts});l[g][y]=true;c=Math.max(c,(y||"").length)}}}else{v(g,h);c=Math.max(c,(m.name||"").length)}}if(!o.length)return[];var x=!s||!r;var b=[];for(f=0;f<o.length;f++){var _=i[o[f]];if(x){b.push(_[0])}else{b.push(_)}}if(x)b=[b];for(f=0;f<b.length;f++){var w=Infinity;for(d=0;d<b[f].length;d++){var T=b[f][d].trace.legendrank;if(w>T)w=T}b[f][0]._groupMinRank=w;b[f][0]._preGroupSort=f}var k=function(e,t){return e[0]._groupMinRank-t[0]._groupMinRank||e[0]._preGroupSort-t[0]._preGroupSort};var M=function(e,t){return e.trace.legendrank-t.trace.legendrank||e._preSort-t._preSort};b.forEach(function(e,t){e[0]._preGroupSort=t});b.sort(k);for(f=0;f<b.length;f++){b[f].forEach(function(e,t){e._preSort=t});b[f].sort(M);var A=b[f][0];var S=null;for(d=0;d<b[f].length;d++){var E=b[f][d].trace.legendgrouptitle;if(E&&E.text){S=E;break}}if(n)b[f].reverse();if(S){b[f].unshift({i:-1,groupTitle:S,trace:{showlegend:A.trace.showlegend}})}for(d=0;d<b[f].length;d++){b[f][d]=[b[f][d]]}}a._lgroupsLength=b.length;a._maxNameLength=c;return b}},{"../../registry":373,"./helpers":211}],210:[function(e,t,r){"use strict";var F=e("../../lib");var j=e("../../registry");var H=true;t.exports=function e(t,r,a){var n=r._fullLayout;if(r._dragged||r._editing)return;var i=n.legend.itemclick;var o=n.legend.itemdoubleclick;if(a===1&&i==="toggle"&&o==="toggleothers"&&H&&r.data&&r._context.showTips){F.notifier(F._(r,"Double-click on legend to isolate one trace"),"long");H=false}else{H=false}var s;if(a===1)s=i;else if(a===2)s=o;if(!s)return;var l=n.hiddenlabels?n.hiddenlabels.slice():[];var u=t.data()[0][0];if(u.groupTitle)return;var c=r._fullData;var f=u.trace;var d=f.legendgroup;var v,p,h,m,g,y;var x={};var b=[];var _=[];var w=[];function T(e,t,r){var a=b.indexOf(e);var n=x[t];if(!n){n=x[t]=[]}if(b.indexOf(e)===-1){b.push(e);a=b.length-1}n[a]=r;return a}function k(e,t){var r=e._fullInput;if(j.hasTransform(r,"groupby")){var a=_[r.index];if(!a){var n=j.getTransformIndices(r,"groupby");var i=n[n.length-1];a=F.keyedContainer(r,"transforms["+i+"].styles","target","value.visible");_[r.index]=a}var o=a.get(e._group);if(o===undefined){o=true}if(o!==false){a.set(e._group,t)}w[r.index]=T(r.index,"visible",r.visible===false?false:true)}else{var s=r.visible===false?false:t;T(r.index,"visible",s)}}if(j.traceIs(f,"pie-like")){var M=u.label;var A=l.indexOf(M);if(s==="toggle"){if(A===-1)l.push(M);else l.splice(A,1)}else if(s==="toggleothers"){l=[];r.calcdata[0].forEach(function(e){if(M!==e.label){l.push(e.label)}});if(r._fullLayout.hiddenlabels&&r._fullLayout.hiddenlabels.length===l.length&&A===-1){l=[]}}j.call("_guiRelayout",r,"hiddenlabels",l)}else{var S=d&&d.length;var E=[];var L;if(S){for(v=0;v<c.length;v++){L=c[v];if(!L.visible)continue;if(L.legendgroup===d){E.push(v)}}}if(s==="toggle"){var C;switch(f.visible){case true:C="legendonly";break;case false:C=false;break;case"legendonly":C=true;break}if(S){for(v=0;v<c.length;v++){if(c[v].visible!==false&&c[v].legendgroup===d){k(c[v],C)}}}else{k(f,C)}}else if(s==="toggleothers"){var D,O,I,P;var R=true;for(v=0;v<c.length;v++){D=c[v]===f;I=c[v].showlegend!==true;if(D||I)continue;O=S&&c[v].legendgroup===d;if(!O&&c[v].visible===true&&!j.traceIs(c[v],"notLegendIsolatable")){R=false;break}}for(v=0;v<c.length;v++){if(c[v].visible===false)continue;if(j.traceIs(c[v],"notLegendIsolatable")){continue}switch(f.visible){case"legendonly":k(c[v],true);break;case true:P=R?true:"legendonly";D=c[v]===f;I=c[v].showlegend!==true&&!c[v].legendgroup;O=D||S&&c[v].legendgroup===d;k(c[v],O||I?true:P);break}}}for(v=0;v<_.length;v++){h=_[v];if(!h)continue;var N=h.constructUpdate();var z=Object.keys(N);for(p=0;p<z.length;p++){m=z[p];y=x[m]=x[m]||[];y[w[v]]=N[m]}}g=Object.keys(x);for(v=0;v<g.length;v++){m=g[v];for(p=0;p<b.length;p++){if(!x[m].hasOwnProperty(p)){x[m][p]=undefined}}}j.call("_guiRestyle",r,x,b)}}},{"../../lib":285,"../../registry":373}],211:[function(e,t,r){"use strict";r.isGrouped=function e(t){return(t.traceorder||"").indexOf("grouped")!==-1};r.isVertical=function e(t){return t.orientation!=="h"};r.isReversed=function e(t){return(t.traceorder||"").indexOf("reversed")!==-1}},{}],212:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":205,"./defaults":207,"./draw":208,"./style":213}],213:[function(e,t,r){"use strict";var M=e("@plotly/d3");var A=e("../../registry");var S=e("../../lib");var g=S.strTranslate;var E=e("../drawing");var L=e("../color");var C=e("../colorscale/helpers").extractOpts;var D=e("../../traces/scatter/subtypes");var y=e("../../traces/pie/style_one");var O=e("../../traces/pie/helpers").castOption;var I=e("./constants");var P=12;var R=5;var N=2;var z=10;var F=5;t.exports=function e(t,w,x){var r=w._fullLayout;if(!x)x=r.legend;var b=x.itemsizing==="constant";var T=x.itemwidth;var a=(T+I.itemGap*2)/2;var _=g(a,0);var k=function(e,t,r,a){var n;if(e+1){n=e}else if(t&&t.width>0){n=t.width}else{return 0}return b?a:Math.min(n,r)};t.each(function(e){var t=M.select(this);var r=S.ensureSingle(t,"g","layers");r.style("opacity",e[0].trace.opacity);var a=x.valign;var n=e[0].lineHeight;var i=e[0].height;if(a==="middle"||!n||!i){r.attr("transform",null)}else{var o={top:1,bottom:-1}[a];var s=o*(.5*(n-i+3));r.attr("transform",g(0,s))}var l=r.selectAll("g.legendfill").data([e]);l.enter().append("g").classed("legendfill",true);var u=r.selectAll("g.legendlines").data([e]);u.enter().append("g").classed("legendlines",true);var c=r.selectAll("g.legendsymbols").data([e]);c.enter().append("g").classed("legendsymbols",true);c.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",true)}).each(m).each(o).each(l).each(s).each(c).each(p).each(v).each(n).each(i).each(f).each(d);function n(e){var t=H(e);var r=t.showFill;var a=t.showLine;var n=t.showGradientLine;var i=t.showGradientFill;var o=t.anyFill;var s=t.anyLine;var l=e[0];var u=l.trace;var c,f;var d=C(u);var v=d.colorscale;var p=d.reversescale;var h=function(e){if(e.size()){var t="legendfill-"+u.uid;E.gradient(e,w,t,j(p),v,"fill")}};var m=function(e){if(e.size()){var t="legendline-"+u.uid;E.lineGroupStyle(e);E.gradient(e,w,t,j(p),v,"stroke")}};var g=D.hasMarkers(u)||!o?"M5,0":s?"M5,-2":"M5,-3";var y=M.select(this);var x=y.select(".legendfill").selectAll("path").data(r||i?[e]:[]);x.enter().append("path").classed("js-fill",true);x.exit().remove();x.attr("d",g+"h"+T+"v6h-"+T+"z").call(r?E.fillGroupStyle:h);if(a||n){var b=k(undefined,u.line,z,R);f=S.minExtend(u,{line:{width:b}});c=[S.minExtend(l,{trace:f})]}var _=y.select(".legendlines").selectAll("path").data(a||n?[c]:[]);_.enter().append("path").classed("js-line",true);_.exit().remove();_.attr("d",g+(n?"l"+T+",0.0001":"h"+T)).call(a?E.lineGroupStyle:m)}function i(e){var t=H(e);var r=t.anyFill;var a=t.anyLine;var n=t.showLine;var i=t.showMarker;var o=e[0];var s=o.trace;var l=!i&&!a&&!r&&D.hasText(s);var u,c;function f(e,t,r,a){var n=S.nestedProperty(s,e).get();var i=S.isArrayOrTypedArray(n)&&t?t(n):n;if(b&&i&&a!==undefined){i=a}if(r){if(i<r[0])return r[0];else if(i>r[1])return r[1]}return i}function d(e){if(o._distinct&&o.index&&e[o.index])return e[o.index];return e[0]}if(i||l||n){var v={};var p={};if(i){v.mc=f("marker.color",d);v.mx=f("marker.symbol",d);v.mo=f("marker.opacity",S.mean,[.2,1]);v.mlc=f("marker.line.color",d);v.mlw=f("marker.line.width",S.mean,[0,5],N);p.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var h=f("marker.size",S.mean,[2,16],P);v.ms=h;p.marker.size=h}if(n){p.line={width:f("line.width",d,[0,10],R)}}if(l){v.tx="Aa";v.tp=f("textposition",d);v.ts=10;v.tc=f("textfont.color",d);v.tf=f("textfont.family",d)}u=[S.minExtend(o,v)];c=S.minExtend(s,p);c.selectedpoints=null;c.texttemplate=null}var m=M.select(this).select("g.legendpoints");var g=m.selectAll("path.scatterpts").data(i?u:[]);g.enter().insert("path",":first-child").classed("scatterpts",true).attr("transform",_);g.exit().remove();g.call(E.pointStyle,c,w);if(i)u[0].mrc=3;var y=m.selectAll("g.pointtext").data(l?u:[]);y.enter().append("g").classed("pointtext",true).append("text").attr("transform",_);y.exit().remove();y.selectAll("text").call(E.textPointStyle,c,w)}function o(e){var n=e[0].trace;var t=n.type==="waterfall";if(e[0]._distinct&&t){var r=e[0].trace[e[0].dir].marker;e[0].mc=r.color;e[0].mlw=r.line.width;e[0].mlc=r.line.color;return u(e,this,"waterfall")}var a=[];if(n.visible&&t){a=e[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]}var i=M.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(a);i.enter().append("path").classed("legendwaterfall",true).attr("transform",_).style("stroke-miterlimit",1);i.exit().remove();i.each(function(e){var t=M.select(this);var r=n[e[0]].marker;var a=k(undefined,r.line,F,N);t.attr("d",e[1]).style("stroke-width",a+"px").call(L.fill,r.color);if(a){t.call(L.stroke,r.line.color)}})}function s(e){u(e,this)}function l(e){u(e,this,"funnel")}function u(e,t,r){var m=e[0].trace;var g=m.marker||{};var y=g.line||{};var a=!r?A.traceIs(m,"bar"):m.visible&&m.type===r;var n=M.select(t).select("g.legendpoints").selectAll("path.legend"+r).data(a?[e]:[]);n.enter().append("path").classed("legend"+r,true).attr("d","M6,6H-6V-6H6Z").attr("transform",_);n.exit().remove();n.each(function(e){var t=M.select(this);var r=e[0];var a=k(r.mlw,g.line,F,N);t.style("stroke-width",a+"px");var n=r.mcc;if(!x._inHover&&"mc"in r){var i=C(g);var o=i.mid;if(o===undefined)o=(i.max+i.min)/2;n=E.tryColorscale(g,"")(o)}var s=n||r.mc||g.color;var l=g.pattern;var u=l&&E.getPatternAttr(l.shape,0,"");if(u){var c=E.getPatternAttr(l.bgcolor,0,null);var f=E.getPatternAttr(l.fgcolor,0,null);var d=l.fgopacity;var v=B(l.size,8,10);var p=B(l.solidity,.5,1);var h="legend-"+m.uid;t.call(E.pattern,"legend",w,h,u,v,p,n,l.fillmode,c,f,d)}else{t.call(L.fill,s)}if(a)L.stroke(t,r.mlc||y.color)})}function c(e){var a=e[0].trace;var n=M.select(this).select("g.legendpoints").selectAll("path.legendbox").data(a.visible&&A.traceIs(a,"box-violin")?[e]:[]);n.enter().append("path").classed("legendbox",true).attr("d","M6,6H-6V-6H6Z").attr("transform",_);n.exit().remove();n.each(function(){var e=M.select(this);if((a.boxpoints==="all"||a.points==="all")&&L.opacity(a.fillcolor)===0&&L.opacity((a.line||{}).color)===0){var t=S.minExtend(a,{marker:{size:b?P:S.constrain(a.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});n.call(E.pointStyle,t,w)}else{var r=k(undefined,a.line,F,N);e.style("stroke-width",r+"px").call(L.fill,a.fillcolor);if(r)L.stroke(e,a.line.color)}})}function f(e){var i=e[0].trace;var t=M.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(i.visible&&i.type==="candlestick"?[e,e]:[]);t.enter().append("path").classed("legendcandle",true).attr("d",function(e,t){if(t)return"M-15,0H-8M-8,6V-6H8Z";return"M15,0H8M8,-6V6H-8Z"}).attr("transform",_).style("stroke-miterlimit",1);t.exit().remove();t.each(function(e,t){var r=M.select(this);var a=i[t?"increasing":"decreasing"];var n=k(undefined,a.line,F,N);r.style("stroke-width",n+"px").call(L.fill,a.fillcolor);if(n)L.stroke(r,a.line.color)})}function d(e){var i=e[0].trace;var t=M.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(i.visible&&i.type==="ohlc"?[e,e]:[]);t.enter().append("path").classed("legendohlc",true).attr("d",function(e,t){if(t)return"M-15,0H0M-8,-6V0";return"M15,0H0M8,6V0"}).attr("transform",_).style("stroke-miterlimit",1);t.exit().remove();t.each(function(e,t){var r=M.select(this);var a=i[t?"increasing":"decreasing"];var n=k(undefined,a.line,F,N);r.style("fill","none").call(E.dashLine,a.line.dash,n);if(n)L.stroke(r,a.line.color)})}function v(e){h(e,this,"pie")}function p(e){h(e,this,"funnelarea")}function h(e,t,r){var a=e[0];var n=a.trace;var i=!r?A.traceIs(n,r):n.visible&&n.type===r;var o=M.select(t).select("g.legendpoints").selectAll("path.legend"+r).data(i?[e]:[]);o.enter().append("path").classed("legend"+r,true).attr("d","M6,6H-6V-6H6Z").attr("transform",_);o.exit().remove();if(o.size()){var s=(n.marker||{}).line;var l=k(O(s.width,a.pts),s,F,N);var u=S.minExtend(n,{marker:{line:{width:l}}});u.marker.line.color=s.color;var c=S.minExtend(a,{trace:u});y(o,c,u)}}function m(e){var c=e[0].trace;var f;var t=[];if(c.visible){switch(c.type){case"histogram2d":case"heatmap":t=[["M-15,-2V4H15V-2Z"]];f=true;break;case"choropleth":case"choroplethmapbox":t=[["M-6,-6V6H6V-6Z"]];f=true;break;case"densitymapbox":t=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]];f="radial";break;case"cone":t=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]];f=false;break;case"streamtube":t=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]];f=false;break;case"surface":t=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]];f=true;break;case"mesh3d":t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];f=false;break;case"volume":t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];f=true;break;case"isosurface":t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]];f=false;break}}var r=M.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(t);r.enter().append("path").classed("legend3dandfriends",true).attr("transform",_).style("stroke-miterlimit",1);r.exit().remove();r.each(function(e,t){var r=M.select(this);var a=C(c);var n=a.colorscale;var i=a.reversescale;var o=function(e){if(e.size()){var t="legendfill-"+c.uid;E.gradient(e,w,t,j(i,f==="radial"),n,"fill")}};var s;if(!n){var l=c.vertexcolor||c.facecolor||c.color;s=S.isArrayOrTypedArray(l)?l[t]||l[0]:l}else{if(!f){var u=n.length;s=t===0?n[i?u-1:0][1]:t===1?n[i?0:u-1][1]:n[Math.floor((u-1)/2)][1]}}r.attr("d",e[0]);if(s){r.call(L.fill,s)}else{r.call(o)}})}};function j(e,t){var r=t?"radial":"horizontal";return r+(e?"":"reversed")}function H(e){var t=e[0].trace;var r=t.contours;var a=D.hasLines(t);var n=D.hasMarkers(t);var i=t.visible&&t.fill&&t.fill!=="none";var o=false;var s=false;if(r){var l=r.coloring;if(l==="lines"){o=true}else{a=l==="none"||l==="heatmap"||r.showlines}if(r.type==="constraint"){i=r._operation!=="="}else if(l==="fill"||l==="heatmap"){s=true}}return{showMarker:n,showLine:a,showFill:i,showGradientLine:o,showGradientFill:s,anyLine:a||o,anyFill:i||s}}function B(e,t,r){if(e&&S.isArrayOrTypedArray(e))return t;if(e>r)return r;return e}},{"../../lib":285,"../../registry":373,"../../traces/pie/helpers":486,"../../traces/pie/style_one":492,"../../traces/scatter/subtypes":519,"../color":155,"../colorscale/helpers":166,"../drawing":177,"./constants":206,"@plotly/d3":20}],214:[function(e,t,r){"use strict";var a=e("./constants");t.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:true,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:true,dflt:"",editType:"modebar"}}},{"./constants":216}],215:[function(e,t,r){"use strict";var y=e("../../registry");var a=e("../../plots/plots");var x=e("../../plots/cartesian/axis_ids");var n=e("../../fonts/ploticon");var i=e("../shapes/draw").eraseActiveShape;var o=e("../../lib");var s=o._;var l=t.exports={};l.toImage={name:"toImage",title:function(e){var t=e._context.toImageButtonOptions||{};var r=t.format||"png";return r==="png"?s(e,"Download plot as a png"):s(e,"Download plot")},icon:n.camera,click:function(t){var r=t._context.toImageButtonOptions;var a={format:r.format||"png"};o.notifier(s(t,"Taking snapshot - this may take a few seconds"),"long");if(a.format!=="svg"&&o.isIE()){o.notifier(s(t,"IE only supports svg.  Changing format to svg."),"long");a.format="svg"}["filename","width","height","scale"].forEach(function(e){if(e in r){a[e]=r[e]}});y.call("downloadImage",t,a).then(function(e){o.notifier(s(t,"Snapshot succeeded")+" - "+e,"long")}).catch(function(){o.notifier(s(t,"Sorry, there was a problem downloading your snapshot!"),"long")})}};l.sendDataToCloud={name:"sendDataToCloud",title:function(e){return s(e,"Edit in Chart Studio")},icon:n.disk,click:function(e){a.sendDataToCloud(e)}};l.editInChartStudio={name:"editInChartStudio",title:function(e){return s(e,"Edit in Chart Studio")},icon:n.pencil,click:function(e){a.sendDataToCloud(e)}};l.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"dragmode",val:"zoom",icon:n.zoombox,click:u};l.pan2d={name:"pan2d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"dragmode",val:"pan",icon:n.pan,click:u};l.select2d={name:"select2d",_cat:"select",title:function(e){return s(e,"Box Select")},attr:"dragmode",val:"select",icon:n.selectbox,click:u};l.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return s(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:n.lasso,click:u};l.drawclosedpath={name:"drawclosedpath",title:function(e){return s(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:n.drawclosedpath,click:u};l.drawopenpath={name:"drawopenpath",title:function(e){return s(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:n.drawopenpath,click:u};l.drawline={name:"drawline",title:function(e){return s(e,"Draw line")},attr:"dragmode",val:"drawline",icon:n.drawline,click:u};l.drawrect={name:"drawrect",title:function(e){return s(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:n.drawrect,click:u};l.drawcircle={name:"drawcircle",title:function(e){return s(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:n.drawcircle,click:u};l.eraseshape={name:"eraseshape",title:function(e){return s(e,"Erase active shape")},icon:n.eraseshape,click:i};l.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:n.zoom_plus,click:u};l.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:n.zoom_minus,click:u};l.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return s(e,"Autoscale")},attr:"zoom",val:"auto",icon:n.autoscale,click:u};l.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return s(e,"Reset axes")},attr:"zoom",val:"reset",icon:n.home,click:u};l.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return s(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:n.tooltip_basic,gravity:"ne",click:u};l.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return s(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:n.tooltip_compare,gravity:"ne",click:u};function u(e,t){var r=t.currentTarget;var a=r.getAttribute("data-attr");var n=r.getAttribute("data-val")||true;var i=e._fullLayout;var o={};var s=x.list(e,null,true);var l=i._cartesianSpikesEnabled;var u,c;if(a==="zoom"){var f=n==="in"?.5:2;var d=(1+f)/2;var v=(1-f)/2;var p;for(c=0;c<s.length;c++){u=s[c];if(!u.fixedrange){p=u._name;if(n==="auto"){o[p+".autorange"]=true}else if(n==="reset"){if(u._rangeInitial===undefined){o[p+".autorange"]=true}else{var h=u._rangeInitial.slice();o[p+".range[0]"]=h[0];o[p+".range[1]"]=h[1]}if(u._showSpikeInitial!==undefined){o[p+".showspikes"]=u._showSpikeInitial;if(l==="on"&&!u._showSpikeInitial){l="off"}}}else{var m=[u.r2l(u.range[0]),u.r2l(u.range[1])];var g=[d*m[0]+v*m[1],d*m[1]+v*m[0]];o[p+".range[0]"]=u.l2r(g[0]);o[p+".range[1]"]=u.l2r(g[1])}}}}else{if(a==="hovermode"&&(n==="x"||n==="y")){n=i._isHoriz?"y":"x";r.setAttribute("data-val",n)}o[a]=n}i._cartesianSpikesEnabled=l;y.call("_guiRelayout",e,o)}l.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:n.zoombox,click:c};l.pan3d={name:"pan3d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:n.pan,click:c};l.orbitRotation={name:"orbitRotation",title:function(e){return s(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:n["3d_rotate"],click:c};l.tableRotation={name:"tableRotation",title:function(e){return s(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:n["z-axis"],click:c};function c(e,t){var r=t.currentTarget;var a=r.getAttribute("data-attr");var n=r.getAttribute("data-val")||true;var i=e._fullLayout._subplots.gl3d||[];var o={};var s=a.split(".");for(var l=0;l<i.length;l++){o[i[l]+"."+s[1]]=n}var u=n==="pan"?n:"zoom";o.dragmode=u;y.call("_guiRelayout",e,o)}l.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return s(e,"Reset camera to default")},attr:"resetDefault",icon:n.home,click:f};l.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return s(e,"Reset camera to last save")},attr:"resetLastSave",icon:n.movie,click:f};function f(e,t){var r=t.currentTarget;var a=r.getAttribute("data-attr");var n=a==="resetLastSave";var i=a==="resetDefault";var o=e._fullLayout;var s=o._subplots.gl3d||[];var l={};for(var u=0;u<s.length;u++){var c=s[u];var f=c+".camera";var d=c+".aspectratio";var v=c+".aspectmode";var p=o[c]._scene;var h;if(n){l[f+".up"]=p.viewInitial.up;l[f+".eye"]=p.viewInitial.eye;l[f+".center"]=p.viewInitial.center;h=true}else if(i){l[f+".up"]=null;l[f+".eye"]=null;l[f+".center"]=null;h=true}if(h){l[d+".x"]=p.viewInitial.aspectratio.x;l[d+".y"]=p.viewInitial.aspectratio.y;l[d+".z"]=p.viewInitial.aspectratio.z;l[v]=p.viewInitial.aspectmode}}y.call("_guiRelayout",e,l)}l.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:n.tooltip_basic,gravity:"ne",click:v};function d(e,t){var r=t.currentTarget;var a=r._previousVal;var n=e._fullLayout;var i=n._subplots.gl3d||[];var o=["xaxis","yaxis","zaxis"];var s={};var l={};if(a){l=a;r._previousVal=null}else{for(var u=0;u<i.length;u++){var c=i[u];var f=n[c];var d=c+".hovermode";s[d]=f.hovermode;l[d]=false;for(var v=0;v<3;v++){var p=o[v];var h=c+"."+p+".showspikes";l[h]=false;s[h]=f[p].showspikes}}r._previousVal=s}return l}function v(e,t){var r=d(e,t);y.call("_guiRelayout",e,r)}l.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:n.zoom_plus,click:p};l.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:n.zoom_minus,click:p};l.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return s(e,"Reset")},attr:"reset",val:null,icon:n.autoscale,click:p};l.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:n.tooltip_basic,gravity:"ne",click:m};function p(e,t){var r=t.currentTarget;var a=r.getAttribute("data-attr");var n=r.getAttribute("data-val")||true;var i=e._fullLayout;var o=i._subplots.geo||[];for(var s=0;s<o.length;s++){var l=o[s];var u=i[l];if(a==="zoom"){var c=u.projection.scale;var f=n==="in"?2*c:.5*c;y.call("_guiRelayout",e,l+".projection.scale",f)}}if(a==="reset"){_(e,"geo")}}l.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:n.tooltip_basic,gravity:"ne",click:m};l.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:n.tooltip_basic,gravity:"ne",click:m};function h(e){var t=e._fullLayout;if(t.hovermode)return false;if(t._has("cartesian")){return t._isHoriz?"y":"x"}return"closest"}function m(e){var t=h(e);y.call("_guiRelayout",e,"hovermode",t)}l.resetViewSankey={name:"resetSankeyGroup",title:function(e){return s(e,"Reset view")},icon:n.home,click:function(e){var t={"node.groups":[],"node.x":[],"node.y":[]};for(var r=0;r<e._fullData.length;r++){var a=e._fullData[r]._viewInitial;t["node.groups"].push(a.node.groups.slice());t["node.x"].push(a.node.x.slice());t["node.y"].push(a.node.y.slice())}y.call("restyle",e,t)}};l.toggleHover={name:"toggleHover",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:n.tooltip_basic,gravity:"ne",click:function(e,t){var r=d(e,t);r.hovermode=h(e);y.call("_guiRelayout",e,r)}};l.resetViews={name:"resetViews",title:function(e){return s(e,"Reset views")},icon:n.home,click:function(e,t){var r=t.currentTarget;r.setAttribute("data-attr","zoom");r.setAttribute("data-val","reset");u(e,t);r.setAttribute("data-attr","resetLastSave");f(e,t);_(e,"geo");_(e,"mapbox")}};l.toggleSpikelines={name:"toggleSpikelines",title:function(e){return s(e,"Toggle Spike Lines")},icon:n.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout;var r=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled=r==="on"?"off":"on";y.call("_guiRelayout",e,g(e))}};function g(e){var t=e._fullLayout;var r=t._cartesianSpikesEnabled==="on";var a=x.list(e,null,true);var n={};for(var i=0;i<a.length;i++){var o=a[i];n[o._name+".showspikes"]=r?true:o._showSpikeInitial}return n}l.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return s(e,"Reset view")},attr:"reset",icon:n.home,click:function(e){_(e,"mapbox")}};l.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:n.zoom_plus,click:b};l.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:n.zoom_minus,click:b};function b(e,t){var r=t.currentTarget;var a=r.getAttribute("data-val");var n=e._fullLayout;var i=n._subplots.mapbox||[];var o=1.05;var s={};for(var l=0;l<i.length;l++){var u=i[l];var c=n[u].zoom;var f=a==="in"?o*c:c/o;s[u+".zoom"]=f}y.call("_guiRelayout",e,s)}function _(e,t){var r=e._fullLayout;var a=r._subplots[t]||[];var n={};for(var i=0;i<a.length;i++){var o=a[i];var s=r[o]._subplot;var l=s.viewInitial;var u=Object.keys(l);for(var c=0;c<u.length;c++){var f=u[c];n[o+"."+f]=l[f]}}y.call("_guiRelayout",e,n)}},{"../../fonts/ploticon":268,"../../lib":285,"../../plots/cartesian/axis_ids":335,"../../plots/plots":366,"../../registry":373,"../shapes/draw":239}],216:[function(e,t,r){"use strict";var a=e("./buttons");var n=Object.keys(a);var i=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"];var o=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(i);var s=[];var l=function(e){if(o.indexOf(e._cat||e.name)!==-1)return;var t=e.name;var r=(e._cat||e.name).toLowerCase();if(s.indexOf(t)===-1)s.push(t);if(s.indexOf(r)===-1)s.push(r)};n.forEach(function(e){l(a[e])});s.sort();t.exports={DRAW_MODES:i,backButtons:o,foreButtons:s}},{"./buttons":215}],217:[function(e,t,r){"use strict";var s=e("../../lib");var l=e("../color");var u=e("../../plot_api/plot_template");var c=e("./attributes");t.exports=function e(t,r){var a=t.modebar||{};var n=u.newContainer(r,"modebar");function i(e,t){return s.coerce(a,n,c,e,t)}i("orientation");i("bgcolor",l.addOpacity(r.paper_bgcolor,.5));var o=l.contrast(l.rgb(r.modebar.bgcolor));i("color",l.addOpacity(o,.3));i("activecolor",l.addOpacity(o,.7));i("uirevision",r.uirevision);i("add");i("remove")}},{"../../lib":285,"../../plot_api/plot_template":320,"../color":155,"./attributes":214}],218:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"modebar",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),manage:e("./manage")}},{"./attributes":214,"./defaults":217,"./manage":219}],219:[function(e,t,r){"use strict";var a=e("../../plots/cartesian/axis_ids");var n=e("../../traces/scatter/subtypes");var i=e("../../registry");var I=e("../fx/helpers").isUnifiedHover;var s=e("./modebar");var P=e("./buttons");var R=e("./constants").DRAW_MODES;t.exports=function e(t){var r=t._fullLayout;var a=t._context;var n=r._modeBar;if(!a.displayModeBar&&!a.watermark){if(n){n.destroy();delete r._modeBar}return}if(!Array.isArray(a.modeBarButtonsToRemove)){throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "))}if(!Array.isArray(a.modeBarButtonsToAdd)){throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "))}var i=a.modeBarButtons;var o;if(Array.isArray(i)&&i.length){o=u(i)}else if(!a.displayModeBar&&a.watermark){o=[]}else{o=l(t)}if(n)n.update(t,o);else r._modeBar=s(t,o)};function l(e){var t=e._fullLayout;var r=e._fullData;var a=e._context;function n(e,t){if(typeof t==="string"){if(t.toLowerCase()===e.toLowerCase())return true}else{var r=t.name;var a=t._cat||t.name;if(r===e||a===e.toLowerCase())return true}return false}var i=t.modebar.add;if(typeof i==="string")i=[i];var o=t.modebar.remove;if(typeof o==="string")o=[o];var s=a.modeBarButtonsToAdd.concat(i.filter(function(e){for(var t=0;t<a.modeBarButtonsToRemove.length;t++){if(n(e,a.modeBarButtonsToRemove[t]))return false}return true}));var c=a.modeBarButtonsToRemove.concat(o.filter(function(e){for(var t=0;t<a.modeBarButtonsToAdd.length;t++){if(n(e,a.modeBarButtonsToAdd[t]))return false}return true}));var l=t._has("cartesian");var u=t._has("gl3d");var f=t._has("geo");var d=t._has("pie");var v=t._has("funnelarea");var p=t._has("gl2d");var h=t._has("ternary");var m=t._has("mapbox");var g=t._has("polar");var y=t._has("sankey");var x=N(t);var b=I(t.hovermode);var _=[];function w(e){if(!e.length)return;var t=[];for(var r=0;r<e.length;r++){var a=e[r];var n=P[a];var i=n.name.toLowerCase();var o=(n._cat||n.name).toLowerCase();var s=false;for(var l=0;l<c.length;l++){var u=c[l].toLowerCase();if(u===i||u===o){s=true;break}}if(s)continue;t.push(P[a])}_.push(t)}var T=["toImage"];if(a.showEditInChartStudio)T.push("editInChartStudio");else if(a.showSendToCloud)T.push("sendDataToCloud");w(T);var k=[];var M=[];var A=[];var S=[];if((l||p||d||v||h)+f+u+m+g>1){M=["toggleHover"];A=["resetViews"]}else if(f){k=["zoomInGeo","zoomOutGeo"];M=["hoverClosestGeo"];A=["resetGeo"]}else if(u){M=["hoverClosest3d"];A=["resetCameraDefault3d","resetCameraLastSave3d"]}else if(m){k=["zoomInMapbox","zoomOutMapbox"];M=["toggleHover"];A=["resetViewMapbox"]}else if(p){M=["hoverClosestGl2d"]}else if(d){M=["hoverClosestPie"]}else if(y){M=["hoverClosestCartesian","hoverCompareCartesian"];A=["resetViewSankey"]}else{M=["toggleHover"]}if(l){M=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]}if(F(r)||b){M=[]}if((l||p)&&!x){k=["zoomIn2d","zoomOut2d","autoScale2d"];if(A[0]!=="resetViews")A=["resetScale2d"]}if(u){S=["zoom3d","pan3d","orbitRotation","tableRotation"]}else if((l||p)&&!x||h){S=["zoom2d","pan2d"]}else if(m||f){S=["pan2d"]}else if(g){S=["zoom2d"]}if(z(r)){S.push("select2d","lasso2d")}var E=[];var L=function(e){if(E.indexOf(e)!==-1)return;if(M.indexOf(e)!==-1){E.push(e)}};if(Array.isArray(s)){var C=[];for(var D=0;D<s.length;D++){var O=s[D];if(typeof O==="string"){O=O.toLowerCase();if(R.indexOf(O)!==-1){if(t._has("mapbox")||t._has("cartesian")){S.push(O)}}else if(O==="togglespikelines"){L("toggleSpikelines")}else if(O==="togglehover"){L("toggleHover")}else if(O==="hovercompare"){L("hoverCompareCartesian")}else if(O==="hoverclosest"){L("hoverClosestCartesian");L("hoverClosestGeo");L("hoverClosest3d");L("hoverClosestGl2d");L("hoverClosestPie")}else if(O==="v1hovermode"){L("toggleHover");L("hoverClosestCartesian");L("hoverCompareCartesian");L("hoverClosestGeo");L("hoverClosest3d");L("hoverClosestGl2d");L("hoverClosestPie")}}else C.push(O)}s=C}w(S);w(k.concat(A));w(E);return j(_,s)}function N(e){var t=a.list({_fullLayout:e},null,true);for(var r=0;r<t.length;r++){if(!t[r].fixedrange){return false}}return true}function z(e){var t=false;for(var r=0;r<e.length;r++){if(t)break;var a=e[r];if(!a._module||!a._module.selectPoints)continue;if(i.traceIs(a,"scatter-like")){if(n.hasMarkers(a)||n.hasText(a)){t=true}}else if(i.traceIs(a,"box-violin")){if(a.boxpoints==="all"||a.points==="all"){t=true}}else{t=true}}return t}function F(e){for(var t=0;t<e.length;t++){if(!i.traceIs(e[t],"noHover"))return false}return true}function j(e,t){if(t.length){if(Array.isArray(t[0])){for(var r=0;r<t.length;r++){e.push(t[r])}}else e.push(t)}return e}function u(e){for(var t=0;t<e.length;t++){var r=e[t];for(var a=0;a<r.length;a++){var n=r[a];if(typeof n==="string"){if(P[n]!==undefined){e[t][a]=P[n]}else{throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}}}}return e}},{"../../plots/cartesian/axis_ids":335,"../../registry":373,"../../traces/scatter/subtypes":519,"../fx/helpers":191,"./buttons":215,"./constants":216,"./modebar":220}],220:[function(e,t,r){"use strict";var l=e("@plotly/d3");var o=e("fast-isnumeric");var f=e("../../lib");var s=e("../../fonts/ploticon");var u=new DOMParser;function n(e){this.container=e.container;this.element=document.createElement("div");this.update(e.graphInfo,e.buttons);this.container.appendChild(this.element)}var a=n.prototype;a.update=function(e,t){this.graphInfo=e;var r=this.graphInfo._context;var a=this.graphInfo._fullLayout;var n="modebar-"+a._uid;this.element.setAttribute("id",n);this._uid=n;this.element.className="modebar";if(r.displayModeBar==="hover")this.element.className+=" modebar--hover ease-bg";if(a.modebar.orientation==="v"){this.element.className+=" vertical";t=t.reverse()}var i=a.modebar;var o=r.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";f.deleteRelatedStyleRule(n);f.addRelatedStyleRule(n,o+"#"+n+" .modebar-group","background-color: "+i.bgcolor);f.addRelatedStyleRule(n,"#"+n+" .modebar-btn .icon path","fill: "+i.color);f.addRelatedStyleRule(n,"#"+n+" .modebar-btn:hover .icon path","fill: "+i.activecolor);f.addRelatedStyleRule(n,"#"+n+" .modebar-btn.active .icon path","fill: "+i.activecolor);var s=!this.hasButtons(t);var l=this.hasLogo!==r.displaylogo;var u=this.locale!==r.locale;this.locale=r.locale;if(s||l||u){this.removeAllButtons();this.updateButtons(t);if(r.watermark||r.displaylogo){var c=this.getLogo();if(r.watermark){c.className=c.className+" watermark"}if(a.modebar.orientation==="v"){this.element.insertBefore(c,this.element.childNodes[0])}else{this.element.appendChild(c)}this.hasLogo=true}}this.updateActiveButton()};a.updateButtons=function(e){var n=this;this.buttons=e;this.buttonElements=[];this.buttonsNames=[];this.buttons.forEach(function(e){var a=n.createGroup();e.forEach(function(e){var t=e.name;if(!t){throw new Error("must provide button 'name' in button config")}if(n.buttonsNames.indexOf(t)!==-1){throw new Error("button name '"+t+"' is taken")}n.buttonsNames.push(t);var r=n.createButton(e);n.buttonElements.push(r);a.appendChild(r)});n.element.appendChild(a)})};a.createGroup=function(){var e=document.createElement("div");e.className="modebar-group";return e};a.createButton=function(t){var r=this;var e=document.createElement("a");e.setAttribute("rel","tooltip");e.className="modebar-btn";var a=t.title;if(a===undefined)a=t.name;else if(typeof a==="function")a=a(this.graphInfo);if(a||a===0)e.setAttribute("data-title",a);if(t.attr!==undefined)e.setAttribute("data-attr",t.attr);var n=t.val;if(n!==undefined){if(typeof n==="function")n=n(this.graphInfo);e.setAttribute("data-val",n)}var i=t.click;if(typeof i!=="function"){throw new Error("must provide button 'click' function in button config")}else{e.addEventListener("click",function(e){t.click(r.graphInfo,e);r.updateActiveButton(e.currentTarget)})}e.setAttribute("data-toggle",t.toggle||false);if(t.toggle)l.select(e).classed("active",true);var o=t.icon;if(typeof o==="function"){e.appendChild(o())}else{e.appendChild(this.createIcon(o||s.question))}e.setAttribute("data-gravity",t.gravity||"n");return e};a.createIcon=function(e){var t=o(e.height)?Number(e.height):e.ascent-e.descent;var r="http://www.w3.org/2000/svg";var a;if(e.path){a=document.createElementNS(r,"svg");a.setAttribute("viewBox",[0,0,e.width,t].join(" "));a.setAttribute("class","icon");var n=document.createElementNS(r,"path");n.setAttribute("d",e.path);if(e.transform){n.setAttribute("transform",e.transform)}else if(e.ascent!==undefined){n.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")")}a.appendChild(n)}if(e.svg){var i=u.parseFromString(e.svg,"application/xml");a=i.childNodes[0]}a.setAttribute("height","1em");a.setAttribute("width","1em");return a};a.updateActiveButton=function(e){var o=this.graphInfo._fullLayout;var s=e!==undefined?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var t=e.getAttribute("data-val")||true;var r=e.getAttribute("data-attr");var a=e.getAttribute("data-toggle")==="true";var n=l.select(e);if(a){if(r===s){n.classed("active",!n.classed("active"))}}else{var i=r===null?r:f.nestedProperty(o,r).get();n.classed("active",i===t)}})};a.hasButtons=function(e){var t=this.buttons;if(!t)return false;if(e.length!==t.length)return false;for(var r=0;r<e.length;++r){if(e[r].length!==t[r].length)return false;for(var a=0;a<e[r].length;a++){if(e[r][a].name!==t[r][a].name)return false}}return true};a.getLogo=function(){var e=this.createGroup();var t=document.createElement("a");t.href="https://plotly.com/";t.target="_blank";t.setAttribute("data-title",f._(this.graphInfo,"Produced with Plotly"));t.className="modebar-btn plotlyjsicon modebar-btn--logo";t.appendChild(this.createIcon(s.newplotlylogo));e.appendChild(t);return e};a.removeAllButtons=function(){while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}this.hasLogo=false};a.destroy=function(){f.removeElement(this.container.querySelector(".modebar"));f.deleteRelatedStyleRule(this._uid)};function i(e,t){var r=e._fullLayout;var a=new n({graphInfo:e,container:r._modebardiv.node(),buttons:t});if(r._privateplot){l.select(a.element).append("span").classed("badge-private float--left",true).text("PRIVATE")}return a}t.exports=i},{"../../fonts/ploticon":268,"../../lib":285,"@plotly/d3":20,"fast-isnumeric":31}],221:[function(e,t,r){"use strict";var a=e("../../plots/font_attributes");var n=e("../color/attributes");var i=e("../../plot_api/plot_template").templatedArray;var o=i("button",{visible:{valType:"boolean",dflt:true,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});t.exports={visible:{valType:"boolean",editType:"plot"},buttons:o,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:a({editType:"plot"}),bgcolor:{valType:"color",dflt:n.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:n.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":320,"../../plots/font_attributes":360,"../color/attributes":154}],222:[function(e,t,r){"use strict";t.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],223:[function(e,t,r){"use strict";var v=e("../../lib");var p=e("../color");var h=e("../../plot_api/plot_template");var m=e("../../plots/array_container_defaults");var g=e("./attributes");var y=e("./constants");t.exports=function e(t,r,a,n,i){var o=t.rangeselector||{};var s=h.newContainer(r,"rangeselector");function l(e,t){return v.coerce(o,s,g,e,t)}var u=m(o,s,{name:"buttons",handleItemDefaults:x,calendar:i});var c=l("visible",u.length>0);if(c){var f=b(r,a,n);l("x",f[0]);l("y",f[1]);v.noneOrAll(t,r,["x","y"]);l("xanchor");l("yanchor");v.coerceFont(l,"font",a.font);var d=l("bgcolor");l("activecolor",p.contrast(d,y.lightAmount,y.darkAmount));l("bordercolor");l("borderwidth")}};function x(r,a,e,t){var n=t.calendar;function i(e,t){return v.coerce(r,a,g.buttons,e,t)}var o=i("visible");if(o){var s=i("step");if(s!=="all"){if(n&&n!=="gregorian"&&(s==="month"||s==="year")){a.stepmode="backward"}else{i("stepmode")}i("count")}i("label")}}function b(t,r,e){var a=e.filter(function(e){return r[e].anchor===t._id});var n=0;for(var i=0;i<a.length;i++){var o=r[a[i]].domain;if(o)n=Math.max(o[1],n)}return[t.domain[0],n+y.yPad]}},{"../../lib":285,"../../plot_api/plot_template":320,"../../plots/array_container_defaults":326,"../color":155,"./attributes":221,"./constants":222}],224:[function(e,t,r){"use strict";var v=e("@plotly/d3");var o=e("../../registry");var p=e("../../plots/plots");var n=e("../color");var h=e("../drawing");var m=e("../../lib");var g=m.strTranslate;var y=e("../../lib/svg_text_utils");var i=e("../../plots/cartesian/axis_ids");var a=e("../../constants/alignment");var x=a.LINE_SPACING;var b=a.FROM_TL;var _=a.FROM_BR;var w=e("./constants");var s=e("./get_update_object");t.exports=function e(i){var t=i._fullLayout;var r=t._infolayer.selectAll(".rangeselector").data(l(i),u);r.enter().append("g").classed("rangeselector",true);r.exit().remove();r.style({cursor:"pointer","pointer-events":"all"});r.each(function(e){var t=v.select(this);var a=e;var n=a.rangeselector;var r=t.selectAll("g.button").data(m.filterVisible(n.buttons));r.enter().append("g").classed("button",true);r.exit().remove();r.each(function(e){var t=v.select(this);var r=s(a,e);e._isActive=c(a,e,r);t.call(f,n,e);t.call(T,n,e,i);t.on("click",function(){if(i._dragged)return;o.call("_guiRelayout",i,r)});t.on("mouseover",function(){e._isHovered=true;t.call(f,n,e)});t.on("mouseout",function(){e._isHovered=false;t.call(f,n,e)})});M(i,r,n,a._name,t)})};function l(e){var t=i.list(e,"x",true);var r=[];for(var a=0;a<t.length;a++){var n=t[a];if(n.rangeselector&&n.rangeselector.visible){r.push(n)}}return r}function u(e){return e._id}function c(e,t,r){if(t.step==="all"){return e.autorange===true}else{var a=Object.keys(r);return e.range[0]===r[a[0]]&&e.range[1]===r[a[1]]}}function f(e,t,r){var a=m.ensureSingle(e,"rect","selector-rect",function(e){e.attr("shape-rendering","crispEdges")});a.attr({rx:w.rx,ry:w.ry});a.call(n.stroke,t.bordercolor).call(n.fill,d(t,r)).style("stroke-width",t.borderwidth+"px")}function d(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}function T(e,t,r,a){function n(e){y.convertToTspans(e,a)}var i=m.ensureSingle(e,"text","selector-text",function(e){e.attr("text-anchor","middle")});i.call(h.font,t.font).text(k(r,a._fullLayout._meta)).call(n)}function k(e,t){if(e.label){return t?m.templateString(e.label,t):e.label}if(e.step==="all")return"all";return e.count+e.step.charAt(0)}function M(e,t,s,r,a){var l=0;var u=0;var c=s.borderwidth;t.each(function(){var e=v.select(this);var t=e.select(".selector-text");var r=s.font.size*x;var a=Math.max(r*y.lineCount(t),16)+3;u=Math.max(u,a)});t.each(function(){var e=v.select(this);var t=e.select(".selector-rect");var r=e.select(".selector-text");var a=r.node()&&h.bBox(r.node()).width;var n=s.font.size*x;var i=y.lineCount(r);var o=Math.max(a+10,w.minButtonWidth);e.attr("transform",g(c+l,c));t.attr({x:0,y:0,width:o,height:u});y.positionText(r,o/2,u/2-(i-1)*n/2+3);l+=o+5});var n=e._fullLayout._size;var i=n.l+n.w*s.x;var o=n.t+n.h*(1-s.y);var f="left";if(m.isRightAnchor(s)){i-=l;f="right"}if(m.isCenterAnchor(s)){i-=l/2;f="center"}var d="top";if(m.isBottomAnchor(s)){o-=u;d="bottom"}if(m.isMiddleAnchor(s)){o-=u/2;d="middle"}l=Math.ceil(l);u=Math.ceil(u);i=Math.round(i);o=Math.round(o);p.autoMargin(e,r+"-range-selector",{x:s.x,y:s.y,l:l*b[f],r:l*_[f],b:u*_[d],t:u*b[d]});a.attr("transform",g(i,o))}},{"../../constants/alignment":260,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/cartesian/axis_ids":335,"../../plots/plots":366,"../../registry":373,"../color":155,"../drawing":177,"./constants":222,"./get_update_object":225,"@plotly/d3":20}],225:[function(e,t,r){"use strict";var u=e("@plotly/d3");t.exports=function e(t,r){var a=t._name;var n={};if(r.step==="all"){n[a+".autorange"]=true}else{var i=o(t,r);n[a+".range[0]"]=i[0];n[a+".range[1]"]=i[1]}return n};function o(e,t){var r=e.range;var a=new Date(e.r2l(r[1]));var n=t.step;var i=t.count;var o;switch(t.stepmode){case"backward":o=e.l2r(+u.time[n].utc.offset(a,-i));break;case"todate":var s=u.time[n].utc.offset(a,-i);o=e.l2r(+u.time[n].utc.ceil(s));break}var l=r[1];return[o,l]}},{"@plotly/d3":20}],226:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":221,"./defaults":223,"./draw":224}],227:[function(e,t,r){"use strict";var a=e("../color/attributes");t.exports={bgcolor:{valType:"color",dflt:a.background,editType:"plot"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:true,editType:"calc",impliedEdits:{"range[0]":undefined,"range[1]":undefined}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":false}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":false}}],editType:"calc",impliedEdits:{autorange:false}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:true,editType:"calc"},editType:"calc"}},{"../color/attributes":154}],228:[function(e,t,r){"use strict";var o=e("../../plots/cartesian/axis_ids").list;var s=e("../../plots/cartesian/autorange").getAutoRange;var l=e("./constants");t.exports=function e(t){var r=o(t,"x",true);for(var a=0;a<r.length;a++){var n=r[a];var i=n[l.name];if(i&&i.visible&&i.autorange){i._input.autorange=true;i._input.range=i.range=s(t,n)}}}},{"../../plots/cartesian/autorange":330,"../../plots/cartesian/axis_ids":335,"./constants":229}],229:[function(e,t,r){"use strict";t.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],230:[function(e,t,r){"use strict";var _=e("../../lib");var w=e("../../plot_api/plot_template");var T=e("../../plots/cartesian/axis_ids");var k=e("./attributes");var M=e("./oppaxis_attributes");t.exports=function e(t,r,a){var n=t[a];var i=r[a];if(!(n.rangeslider||r._requestRangeslider[i._id]))return;if(!_.isPlainObject(n.rangeslider)){n.rangeslider={}}var o=n.rangeslider;var s=w.newContainer(i,"rangeslider");function l(e,t){return _.coerce(o,s,k,e,t)}var u,c;function f(e,t){return _.coerce(u,c,M,e,t)}var d=l("visible");if(!d)return;l("bgcolor",r.plot_bgcolor);l("bordercolor");l("borderwidth");l("thickness");l("autorange",!i.isValidRange(o.range));l("range");var v=r._subplots;if(v){var p=v.cartesian.filter(function(e){return e.substr(0,e.indexOf("y"))===T.name2id(a)}).map(function(e){return e.substr(e.indexOf("y"),e.length)});var h=_.simpleMap(p,T.id2name);for(var m=0;m<h.length;m++){var g=h[m];u=o[g]||{};c=w.newContainer(s,g,"yaxis");var y=r[g];var x;if(u.range&&y.isValidRange(u.range)){x="fixed"}var b=f("rangemode",x);if(b!=="match"){f("range",y.range.slice())}}}s._input=o}},{"../../lib":285,"../../plot_api/plot_template":320,"../../plots/cartesian/axis_ids":335,"./attributes":227,"./oppaxis_attributes":234}],231:[function(e,t,r){"use strict";var A=e("@plotly/d3");var s=e("../../registry");var m=e("../../plots/plots");var S=e("../../lib");var E=S.strTranslate;var l=e("../drawing");var v=e("../color");var L=e("../titles");var g=e("../../plots/cartesian");var C=e("../../plots/cartesian/axis_ids");var a=e("../dragelement");var b=e("../../lib/setcursor");var D=e("./constants");t.exports=function(k){var M=k._fullLayout;var e=M._rangeSliderData;for(var t=0;t<e.length;t++){var r=e[t][D.name];r._clipId=r._id+"-"+M._uid}function a(e){return e._name}var n=M._infolayer.selectAll("g."+D.containerClassName).data(e,a);n.exit().each(function(e){var t=e[D.name];M._topdefs.select("#"+t._clipId).remove()}).remove();if(e.length===0)return;n.enter().append("g").classed(D.containerClassName,true).attr("pointer-events","all");n.each(function(e){var t=A.select(this);var r=e[D.name];var a=M[C.id2name(e.anchor)];var n=r[C.id2name(e.anchor)];if(r.range){var i=S.simpleMap(r.range,e.r2l);var o=S.simpleMap(e.range,e.r2l);var s;if(o[0]<o[1]){s=[Math.min(i[0],o[0]),Math.max(i[1],o[1])]}else{s=[Math.max(i[0],o[0]),Math.min(i[1],o[1])]}r.range=r._input.range=S.simpleMap(s,e.l2r)}e.cleanRange("rangeslider.range");var l=M._size;var u=e.domain;r._width=l.w*(u[1]-u[0]);var c=Math.round(l.l+l.w*u[0]);var f=Math.round(l.t+l.h*(1-e._counterDomainMin)+(e.side==="bottom"?e._depth:0)+r._offsetShift+D.extraPad);t.attr("transform",E(c,f));r._rl=S.simpleMap(r.range,e.r2l);var d=r._rl[0];var v=r._rl[1];var p=v-d;r.p2d=function(e){return e/r._width*p+d};r.d2p=function(e){return(e-d)/p*r._width};if(e.rangebreaks){var h=e.locateBreaks(d,v);if(h.length){var m,g;var y=0;for(m=0;m<h.length;m++){g=h[m];y+=g.max-g.min}var x=r._width/(v-d-y);var b=[-x*d];for(m=0;m<h.length;m++){g=h[m];b.push(b[b.length-1]-x*(g.max-g.min))}r.d2p=function(e){var t=b[0];for(var r=0;r<h.length;r++){var a=h[r];if(e>=a.max)t=b[r+1];else if(e<a.min)break}return t+x*e};for(m=0;m<h.length;m++){g=h[m];g.pmin=r.d2p(g.min);g.pmax=r.d2p(g.max)}r.p2d=function(e){var t=b[0];for(var r=0;r<h.length;r++){var a=h[r];if(e>=a.pmax)t=b[r+1];else if(e<a.pmin)break}return(e-t)/x}}}if(n.rangemode!=="match"){var _=a.r2l(n.range[0]);var w=a.r2l(n.range[1]);var T=w-_;r.d2pOppAxis=function(e){return(e-_)/T*r._height}}t.call(P,k,e,r).call(R,k,e,r).call(N,k,e,r).call(z,k,e,r,n).call(F,k,e,r).call(j,k,e,r);O(t,k,e,r);I(t,k,e,r,a,n);if(e.side==="bottom"){L.draw(k,e._id+"title",{propContainer:e,propName:e._name+".title",placeholder:M._dfltTitle.x,attributes:{x:e._offset+e._length/2,y:f+r._height+r._offsetShift+10+1.5*e.title.font.size,"text-anchor":"middle"}})}})};function O(v,p,h,m){if(p._context.staticPlot)return;var g=v.select("rect."+D.slideBoxClassName).node();var y=v.select("rect."+D.grabAreaMinClassName).node();var x=v.select("rect."+D.grabAreaMaxClassName).node();function e(){var e=A.event;var s=e.target;var l=e.clientX||e.touches[0].clientX;var u=l-v.node().getBoundingClientRect().left;var c=m.d2p(h._rl[0]);var f=m.d2p(h._rl[1]);var d=a.coverSlip();this.addEventListener("touchmove",t);this.addEventListener("touchend",r);d.addEventListener("mousemove",t);d.addEventListener("mouseup",r);function t(e){var t=e.clientX||e.touches[0].clientX;var r=+t-l;var a,n,i;switch(s){case g:i="ew-resize";a=c+r;n=f+r;break;case y:i="col-resize";a=c+r;n=f;break;case x:i="col-resize";a=c;n=f+r;break;default:i="ew-resize";a=u;n=u+r;break}if(n<a){var o=n;n=a;a=o}m._pixelMin=a;m._pixelMax=n;b(A.select(d),i);_(v,p,h,m)}function r(){d.removeEventListener("mousemove",t);d.removeEventListener("mouseup",r);this.removeEventListener("touchmove",t);this.removeEventListener("touchend",r);S.removeElement(d)}}v.on("mousedown",e);v.on("touchstart",e)}function _(e,t,r,a){function n(e){return r.l2r(S.constrain(e,a._rl[0],a._rl[1]))}var i=n(a.p2d(a._pixelMin));var o=n(a.p2d(a._pixelMax));window.requestAnimationFrame(function(){s.call("_guiRelayout",t,r._name+".range",[i,o])})}function I(e,t,r,a,n,i){var o=D.handleWidth/2;function s(e){return S.constrain(e,0,a._width)}function l(e){return S.constrain(e,0,a._height)}function u(e){return S.constrain(e,-o,a._width+o)}var c=s(a.d2p(r._rl[0]));var f=s(a.d2p(r._rl[1]));e.select("rect."+D.slideBoxClassName).attr("x",c).attr("width",f-c);e.select("rect."+D.maskMinClassName).attr("width",c);e.select("rect."+D.maskMaxClassName).attr("x",f).attr("width",a._width-f);if(i.rangemode!=="match"){var d=a._height-l(a.d2pOppAxis(n._rl[1]));var v=a._height-l(a.d2pOppAxis(n._rl[0]));e.select("rect."+D.maskMinOppAxisClassName).attr("x",c).attr("height",d).attr("width",f-c);e.select("rect."+D.maskMaxOppAxisClassName).attr("x",c).attr("y",v).attr("height",a._height-v).attr("width",f-c);e.select("rect."+D.slideBoxClassName).attr("y",d).attr("height",v-d)}var p=.5;var h=Math.round(u(c-o))-p;var m=Math.round(u(f-o))+p;e.select("g."+D.grabberMinClassName).attr("transform",E(h,p));e.select("g."+D.grabberMaxClassName).attr("transform",E(m,p))}function P(e,t,r,a){var n=S.ensureSingle(e,"rect",D.bgClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})});var i=a.borderwidth%2===0?a.borderwidth:a.borderwidth-1;var o=-a._offsetShift;var s=l.crispRound(t,a.borderwidth);n.attr({width:a._width+i,height:a._height+i,transform:E(o,o),fill:a.bgcolor,stroke:a.bordercolor,"stroke-width":s})}function R(e,t,r,a){var n=t._fullLayout;var i=S.ensureSingleById(n._topdefs,"clipPath",a._clipId,function(e){e.append("rect").attr({x:0,y:0})});i.select("rect").attr({width:a._width,height:a._height})}function N(e,f,d,v){var p=f.calcdata;var t=e.selectAll("g."+D.rangePlotClassName).data(d._subplotsWith,S.identity);t.enter().append("g").attr("class",function(e){return D.rangePlotClassName+" "+e}).call(l.setClipUrl,v._clipId,f);t.order();t.exit().remove();var h;t.each(function(e,t){var r=A.select(this);var a=t===0;var n=C.getFromId(f,e,"y");var i=n._name;var o=v[i];var s={data:[],layout:{xaxis:{type:d.type,domain:[0,1],range:v.range.slice(),calendar:d.calendar},width:v._width,height:v._height,margin:{t:0,b:0,l:0,r:0}},_context:f._context};if(d.rangebreaks){s.layout.xaxis.rangebreaks=d.rangebreaks}s.layout[i]={type:n.type,domain:[0,1],range:o.rangemode!=="match"?o.range.slice():n.range.slice(),calendar:n.calendar};if(n.rangebreaks){s.layout[i].rangebreaks=n.rangebreaks}m.supplyDefaults(s);var l=s._fullLayout.xaxis;var u=s._fullLayout[i];l.clearCalc();l.setScale();u.clearCalc();u.setScale();var c={id:e,plotgroup:r,xaxis:l,yaxis:u,isRangePlot:true};if(a)h=c;else{c.mainplot="xy";c.mainplotinfo=h}g.rangePlot(f,c,y(p,e))})}function y(e,t){var r=[];for(var a=0;a<e.length;a++){var n=e[a];var i=n[0].trace;if(i.xaxis+i.yaxis===t){r.push(n)}}return r}function z(e,t,r,a,n){var i=S.ensureSingle(e,"rect",D.maskMinClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})});i.attr("height",a._height).call(v.fill,D.maskColor);var o=S.ensureSingle(e,"rect",D.maskMaxClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});o.attr("height",a._height).call(v.fill,D.maskColor);if(n.rangemode!=="match"){var s=S.ensureSingle(e,"rect",D.maskMinOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});s.attr("width",a._width).call(v.fill,D.maskOppAxisColor);var l=S.ensureSingle(e,"rect",D.maskMaxOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});l.attr("width",a._width).style("border-top",D.maskOppBorder).call(v.fill,D.maskOppAxisColor)}}function F(e,t,r,a){if(t._context.staticPlot)return;var n=S.ensureSingle(e,"rect",D.slideBoxClassName,function(e){e.attr({y:0,cursor:D.slideBoxCursor,"shape-rendering":"crispEdges"})});n.attr({height:a._height,fill:D.slideBoxFill})}function j(e,t,r,a){var n=S.ensureSingle(e,"g",D.grabberMinClassName);var i=S.ensureSingle(e,"g",D.grabberMaxClassName);var o={x:0,width:D.handleWidth,rx:D.handleRadius,fill:v.background,stroke:v.defaultLine,"stroke-width":D.handleStrokeWidth,"shape-rendering":"crispEdges"};var s={y:Math.round(a._height/4),height:Math.round(a._height/2)};var l=S.ensureSingle(n,"rect",D.handleMinClassName,function(e){e.attr(o)});l.attr(s);var u=S.ensureSingle(i,"rect",D.handleMaxClassName,function(e){e.attr(o)});u.attr(s);var c={width:D.grabAreaWidth,x:0,y:0,fill:D.grabAreaFill,cursor:!t._context.staticPlot?D.grabAreaCursor:undefined};var f=S.ensureSingle(n,"rect",D.grabAreaMinClassName,function(e){e.attr(c)});f.attr("height",a._height);var d=S.ensureSingle(i,"rect",D.grabAreaMaxClassName,function(e){e.attr(c)});d.attr("height",a._height)}},{"../../lib":285,"../../lib/setcursor":305,"../../plots/cartesian":345,"../../plots/cartesian/axis_ids":335,"../../plots/plots":366,"../../registry":373,"../color":155,"../dragelement":174,"../drawing":177,"../titles":253,"./constants":229,"@plotly/d3":20}],232:[function(e,t,r){"use strict";var s=e("../../plots/cartesian/axis_ids");var l=e("../../lib/svg_text_utils");var u=e("./constants");var c=e("../../constants/alignment").LINE_SPACING;var f=u.name;function d(e){var t=e&&e[f];return t&&t.visible}r.isVisible=d;r.makeData=function(e){var t=s.list({_fullLayout:e},"x",true);var r=e.margin;var a=[];if(!e._has("gl2d")){for(var n=0;n<t.length;n++){var i=t[n];if(d(i)){a.push(i);var o=i[f];o._id=f+i._id;o._height=(e.height-r.b-r.t)*o.thickness;o._offsetShift=Math.floor(o.borderwidth/2)}}}e._rangeSliderData=a};r.autoMarginOpts=function(e,t){var r=e._fullLayout;var a=t[f];var n=t._id.charAt(0);var i=0;var o=0;if(t.side==="bottom"){i=t._depth;if(t.title.text!==r._dfltTitle[n]){o=1.5*t.title.font.size+10+a._offsetShift;var s=(t.title.text.match(l.BR_TAG_ALL)||[]).length;o+=s*t.title.font.size*c}}return{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:a._height+i+Math.max(r.margin.b,o),pad:u.extraPad+a._offsetShift*2}}},{"../../constants/alignment":260,"../../lib/svg_text_utils":307,"../../plots/cartesian/axis_ids":335,"./constants":229}],233:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("./attributes");var i=e("./oppaxis_attributes");var o=e("./helpers");t.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:a.extendFlat({},n,{yaxis:i})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw"),isVisible:o.isVisible,makeData:o.makeData,autoMarginOpts:o.autoMarginOpts}},{"../../lib":285,"./attributes":227,"./calc_autorange":228,"./defaults":230,"./draw":231,"./helpers":232,"./oppaxis_attributes":234}],234:[function(e,t,r){"use strict";t.exports={_isSubplotObj:true,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],235:[function(e,t,r){"use strict";var a=e("../annotations/attributes");var n=e("../../traces/scatter/attributes").line;var i=e("../drawing/attributes").dash;var o=e("../../lib/extend").extendFlat;var s=e("../../plot_api/plot_template").templatedArray;var l=e("../../constants/axis_placeable_objects");t.exports=s("shape",{visible:{valType:"boolean",dflt:true,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:o({},a.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:o({},a.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:o({},n.color,{editType:"arraydraw"}),width:o({},n.width,{editType:"calc+arraydraw"}),dash:o({},i,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:false,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":261,"../../lib/extend":279,"../../plot_api/plot_template":320,"../../traces/scatter/attributes":494,"../annotations/attributes":138,"../drawing/attributes":176}],236:[function(e,t,r){"use strict";var p=e("../../lib");var h=e("../../plots/cartesian/axes");var m=e("./constants");var g=e("./helpers");t.exports=function e(t){var r=t._fullLayout;var a=p.filterVisible(r.shapes);if(!a.length||!t._fullData.length)return;for(var n=0;n<a.length;n++){var i=a[n];i._extremes={};var o;var s;var l=h.getRefType(i.xref);var u=h.getRefType(i.yref);if(i.xref!=="paper"&&l!=="domain"){var c=i.xsizemode==="pixel"?i.xanchor:i.x0;var f=i.xsizemode==="pixel"?i.xanchor:i.x1;o=h.getFromId(t,i.xref);s=b(o,c,f,i.path,m.paramIsX);if(s){i._extremes[o._id]=h.findExtremes(o,s,y(i))}}if(i.yref!=="paper"&&u!=="domain"){var d=i.ysizemode==="pixel"?i.yanchor:i.y0;var v=i.ysizemode==="pixel"?i.yanchor:i.y1;o=h.getFromId(t,i.yref);s=b(o,d,v,i.path,m.paramIsY);if(s){i._extremes[o._id]=h.findExtremes(o,s,x(i))}}}};function y(e){return a(e.line.width,e.xsizemode,e.x0,e.x1,e.path,false)}function x(e){return a(e.line.width,e.ysizemode,e.y0,e.y1,e.path,true)}function a(e,t,r,a,n,i){var o=e/2;var s=i;if(t==="pixel"){var l=n?g.extractPathCoords(n,i?m.paramIsY:m.paramIsX):[r,a];var u=p.aggNums(Math.max,null,l);var c=p.aggNums(Math.min,null,l);var f=c<0?Math.abs(c)+o:o;var d=u>0?u+o:o;return{ppad:o,ppadplus:s?f:d,ppadminus:s?d:f}}else{return{ppad:o}}}function b(e,t,r,a,n){var i=e.type==="category"||e.type==="multicategory"?e.r2c:e.d2c;if(t!==undefined)return[i(t),i(r)];if(!a)return;var o=Infinity;var s=-Infinity;var l=a.match(m.segmentRE);var u;var c;var f;var d;var v;if(e.type==="date")i=g.decodeDate(i);for(u=0;u<l.length;u++){c=l[u];f=n[c.charAt(0)].drawn;if(f===undefined)continue;d=l[u].substr(1).match(m.paramRE);if(!d||d.length<f)continue;v=i(d[f]);if(v<o)o=v;if(v>s)s=v}if(s>=o)return[o,s]}},{"../../lib":285,"../../plots/cartesian/axes":331,"./constants":237,"./helpers":246}],237:[function(e,t,r){"use strict";t.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:true,drawn:0},L:{0:true,drawn:0},H:{0:true,drawn:0},V:{},Q:{0:true,2:true,drawn:2},C:{0:true,2:true,4:true,drawn:4},T:{0:true,drawn:0},S:{0:true,2:true,drawn:2},Z:{}},paramIsY:{M:{1:true,drawn:1},L:{1:true,drawn:1},H:{},V:{0:true,drawn:0},Q:{1:true,3:true,drawn:3},C:{1:true,3:true,5:true,drawn:5},T:{1:true,drawn:1},S:{1:true,3:true,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],238:[function(e,t,r){"use strict";var L=e("../../lib");var C=e("../../plots/cartesian/axes");var a=e("../../plots/array_container_defaults");var D=e("./attributes");var O=e("./helpers");t.exports=function e(t,r){a(t,r,{name:"shapes",handleItemDefaults:n})};function n(r,a,e){function t(e,t){return L.coerce(r,a,D,e,t)}var n=t("visible");if(!n)return;var i=t("path");var o=i?"path":"rect";var s=t("type",o);if(a.type!=="path")delete a.path;t("editable");t("layer");t("opacity");t("fillcolor");t("fillrule");var l=t("line.width");if(l){t("line.color");t("line.dash")}var u=t("xsizemode");var c=t("ysizemode");var f=["x","y"];for(var d=0;d<2;d++){var v=f[d];var p=v+"anchor";var h=v==="x"?u:c;var m={_fullLayout:e};var g;var y;var x;var b=C.coerceRef(r,a,m,v,undefined,"paper");var _=C.getRefType(b);if(_==="range"){g=C.getFromId(m,b);g._shapeIndices.push(a._index);x=O.rangeToShapePosition(g);y=O.shapePositionToRange(g)}else{y=x=L.identity}if(s!=="path"){var w=.25;var T=.75;var k=v+"0";var M=v+"1";var A=r[k];var S=r[M];r[k]=y(r[k],true);r[M]=y(r[M],true);if(h==="pixel"){t(k,0);t(M,10)}else{C.coercePosition(a,m,t,b,k,w);C.coercePosition(a,m,t,b,M,T)}a[k]=x(a[k]);a[M]=x(a[M]);r[k]=A;r[M]=S}if(h==="pixel"){var E=r[p];r[p]=y(r[p],true);C.coercePosition(a,m,t,b,p,.25);a[p]=x(a[p]);r[p]=E}}if(s==="path"){t("path")}else{L.noneOrAll(r,a,["x0","x1","y0","y1"])}}},{"../../lib":285,"../../plots/array_container_defaults":326,"../../plots/cartesian/axes":331,"./attributes":235,"./helpers":246}],239:[function(e,t,r){"use strict";var m=e("../../registry");var g=e("../../lib");var K=e("../../plots/cartesian/axes");var y=e("./draw_newshape/helpers").readPaths;var x=e("./draw_newshape/display_outlines");var i=e("../../plots/cartesian/handle_outline").clearOutlineControllers;var b=e("../color");var Q=e("../drawing");var _=e("../../plot_api/plot_template").arrayEditor;var ee=e("../dragelement");var te=e("../../lib/setcursor");var re=e("./constants");var ae=e("./helpers");t.exports={draw:n,drawOne:o,eraseActiveShape:a};function n(e){var t=e._fullLayout;t._shapeUpperLayer.selectAll("path").remove();t._shapeLowerLayer.selectAll("path").remove();for(var r in t._plots){var a=t._plots[r].shapelayer;if(a)a.selectAll("path").remove()}for(var n=0;n<t.shapes.length;n++){if(t.shapes[n].visible){o(e,n)}}}function ne(e){return!!e._fullLayout._drawing}function w(e){return!e._context.edits.shapePosition}function o(p,h){p._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+h+'"]').remove();var e=ae.makeOptionsAndPlotinfo(p,h);var m=e.options;var g=e.plotinfo;if(!m._input||m.visible===false)return;if(m.layer!=="below"){r(p._fullLayout._shapeUpperLayer)}else if(m.xref==="paper"||m.yref==="paper"){r(p._fullLayout._shapeLowerLayer)}else{if(g._hadPlotinfo){var t=g.mainplotinfo||g;r(t.shapelayer)}else{r(p._fullLayout._shapeLowerLayer)}}function r(e){var t=oe(p,m);var r={"data-index":h,"fill-rule":m.fillrule,d:t};var a=m.opacity;var n=m.fillcolor;var i=m.line.width?m.line.color:"rgba(0,0,0,0)";var o=m.line.width;var s=m.line.dash;if(!o&&m.editable===true){o=5;s="solid"}var l=t[t.length-1]!=="Z";var u=w(p)&&m.editable&&p._fullLayout._activeShapeIndex===h;if(u){n=l?"rgba(0,0,0,0)":p._fullLayout.activeshape.fillcolor;a=p._fullLayout.activeshape.opacity}var c=e.append("path").attr(r).style("opacity",a).call(b.stroke,i).call(b.fill,n).call(Q.dashLine,s,o);ie(c,p,m);var f;if(u||p._context.edits.shapePosition)f=_(p.layout,"shapes",m);if(u){c.style({cursor:"move"});var d={element:c.node(),plotinfo:g,gd:p,editHelpers:f,isActiveShape:true};var v=y(t,p);x(v,c,d)}else{if(p._context.edits.shapePosition){T(p,c,m,h,e,f)}else if(m.editable===true){c.style("pointer-events",l||b.opacity(n)*a<=.5?"stroke":"all")}}c.node().addEventListener("click",function(){return k(p,c)})}}function ie(e,t,r){var a=(r.xref+r.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");Q.setClipUrl(e,a?"clip"+t._fullLayout._uid+a:null,t)}function T(y,x,b,i,_,e){var w=10;var T=10;var k=b.xsizemode==="pixel";var M=b.ysizemode==="pixel";var A=b.type==="line";var S=b.type==="path";var E=e.modifyItem;var L,C,D,O,I,P;var R,N,z,F,j,H,B,q;var U;var Y=K.getFromId(y,b.xref);var t=K.getRefType(b.xref);var V=K.getFromId(y,b.yref);var r=K.getRefType(b.yref);var G=ae.getDataToPixel(y,Y,false,t);var W=ae.getDataToPixel(y,V,true,r);var $=ae.getPixelToData(y,Y,false,t);var Z=ae.getPixelToData(y,V,true,r);var a=n();var s={element:a.node(),gd:y,prepFn:u,doneFn:c,clickFn:f};var X;ee.init(s);a.node().onmousemove=l;function n(){return A?o():x}function o(){var e=10;var t=Math.max(b.line.width,e);var r=_.append("g").attr("data-index",i);r.append("path").attr("d",x.attr("d")).style({cursor:"move","stroke-width":t,"stroke-opacity":"0"});var a={"fill-opacity":"0"};var n=Math.max(t/2,e);r.append("circle").attr({"data-line-point":"start-point",cx:k?G(b.xanchor)+b.x0:G(b.x0),cy:M?W(b.yanchor)-b.y0:W(b.y0),r:n}).style(a).classed("cursor-grab",true);r.append("circle").attr({"data-line-point":"end-point",cx:k?G(b.xanchor)+b.x1:G(b.x1),cy:M?W(b.yanchor)-b.y1:W(b.y1),r:n}).style(a).classed("cursor-grab",true);return r}function l(e){if(ne(y)){X=null;return}if(A){if(e.target.tagName==="path"){X="move"}else{X=e.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point"}}else{var t=s.element.getBoundingClientRect();var r=t.right-t.left;var a=t.bottom-t.top;var n=e.clientX-t.left;var i=e.clientY-t.top;var o=!S&&r>w&&a>T&&!e.shiftKey?ee.getCursor(n/r,1-i/a):"move";te(x,o);X=o.split("-")[0]}}function u(e){if(ne(y))return;if(k){I=G(b.xanchor)}if(M){P=W(b.yanchor)}if(b.type==="path"){U=b.path}else{L=k?b.x0:G(b.x0);C=M?b.y0:W(b.y0);D=k?b.x1:G(b.x1);O=M?b.y1:W(b.y1)}if(L<D){z=L;B="x0";F=D;q="x1"}else{z=D;B="x1";F=L;q="x0"}if(!M&&C<O||M&&C>O){R=C;j="y0";N=O;H="y1"}else{R=O;j="y1";N=C;H="y0"}l(e);J(_,b);h(x,b,y);s.moveFn=X==="move"?d:v;s.altKey=e.altKey}function c(){if(ne(y))return;te(x);p(_);ie(x,y,b);m.call("_guiRelayout",y,e.getUpdateObj())}function f(){if(ne(y))return;p(_)}function d(r,a){if(b.type==="path"){var e=function(e){return e};var t=e;var n=e;if(k){E("xanchor",b.xanchor=$(I+r))}else{t=function e(t){return $(G(t)+r)};if(Y&&Y.type==="date")t=ae.encodeDate(t)}if(M){E("yanchor",b.yanchor=Z(P+a))}else{n=function e(t){return Z(W(t)+a)};if(V&&V.type==="date")n=ae.encodeDate(n)}E("path",b.path=se(U,t,n))}else{if(k){E("xanchor",b.xanchor=$(I+r))}else{E("x0",b.x0=$(L+r));E("x1",b.x1=$(D+r))}if(M){E("yanchor",b.yanchor=Z(P+a))}else{E("y0",b.y0=Z(C+a));E("y1",b.y1=Z(O+a))}}x.attr("d",oe(y,b));J(_,b)}function v(r,a){if(S){var e=function(e){return e};var t=e;var n=e;if(k){E("xanchor",b.xanchor=$(I+r))}else{t=function e(t){return $(G(t)+r)};if(Y&&Y.type==="date")t=ae.encodeDate(t)}if(M){E("yanchor",b.yanchor=Z(P+a))}else{n=function e(t){return Z(W(t)+a)};if(V&&V.type==="date")n=ae.encodeDate(n)}E("path",b.path=se(U,t,n))}else if(A){if(X==="resize-over-start-point"){var i=L+r;var o=M?C-a:C+a;E("x0",b.x0=k?i:$(i));E("y0",b.y0=M?o:Z(o))}else if(X==="resize-over-end-point"){var s=D+r;var l=M?O-a:O+a;E("x1",b.x1=k?s:$(s));E("y1",b.y1=M?l:Z(l))}}else{var u=function(e){return X.indexOf(e)!==-1};var c=u("n");var f=u("s");var d=u("w");var v=u("e");var p=c?R+a:R;var h=f?N+a:N;var m=d?z+r:z;var g=v?F+r:F;if(M){if(c)p=R-a;if(f)h=N-a}if(!M&&h-p>T||M&&p-h>T){E(j,b[j]=M?p:Z(p));E(H,b[H]=M?h:Z(h))}if(g-m>w){E(B,b[B]=k?m:$(m));E(q,b[q]=k?g:$(g))}}x.attr("d",oe(y,b));J(_,b)}function J(l,u){if(k||M){e()}function e(){var e=u.type!=="path";var t=l.selectAll(".visual-cue").data([0]);var r=1;t.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":r}).classed("visual-cue",true);var a=G(k?u.xanchor:g.midRange(e?[u.x0,u.x1]:ae.extractPathCoords(u.path,re.paramIsX)));var n=W(M?u.yanchor:g.midRange(e?[u.y0,u.y1]:ae.extractPathCoords(u.path,re.paramIsY)));a=ae.roundPositionForSharpStrokeRendering(a,r);n=ae.roundPositionForSharpStrokeRendering(n,r);if(k&&M){var i="M"+(a-1-r)+","+(n-1-r)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";t.attr("d",i)}else if(k){var o="M"+(a-1-r)+","+(n-9-r)+"v18 h2 v-18 Z";t.attr("d",o)}else{var s="M"+(a-9-r)+","+(n-1-r)+"h18 v2 h-18 Z";t.attr("d",s)}}}function p(e){e.selectAll(".visual-cue").remove()}function h(e,t,r){var a=t.xref;var n=t.yref;var i=K.getFromId(r,a);var o=K.getFromId(r,n);var s="";if(a!=="paper"&&!i.autorange)s+=a;if(n!=="paper"&&!o.autorange)s+=n;Q.setClipUrl(e,s?"clip"+r._fullLayout._uid+s:null,r)}}function oe(e,t){var r=t.type;var a=K.getRefType(t.xref);var n=K.getRefType(t.yref);var i=K.getFromId(e,t.xref);var o=K.getFromId(e,t.yref);var s=e._fullLayout._size;var l,u,c,f;var d,v,p,h;if(i){if(a==="domain"){u=function(e){return i._offset+i._length*e}}else{l=ae.shapePositionToRange(i);u=function(e){return i._offset+i.r2p(l(e,true))}}}else{u=function(e){return s.l+s.w*e}}if(o){if(n==="domain"){f=function(e){return o._offset+o._length*(1-e)}}else{c=ae.shapePositionToRange(o);f=function(e){return o._offset+o.r2p(c(e,true))}}}else{f=function(e){return s.t+s.h*(1-e)}}if(r==="path"){if(i&&i.type==="date")u=ae.decodeDate(u);if(o&&o.type==="date")f=ae.decodeDate(f);return M(t,u,f)}if(t.xsizemode==="pixel"){var m=u(t.xanchor);d=m+t.x0;v=m+t.x1}else{d=u(t.x0);v=u(t.x1)}if(t.ysizemode==="pixel"){var g=f(t.yanchor);p=g-t.y0;h=g-t.y1}else{p=f(t.y0);h=f(t.y1)}if(r==="line")return"M"+d+","+p+"L"+v+","+h;if(r==="rect")return"M"+d+","+p+"H"+v+"V"+h+"H"+d+"Z";var y=(d+v)/2;var x=(p+h)/2;var b=Math.abs(y-d);var _=Math.abs(x-p);var w="A"+b+","+_;var T=y+b+","+x;var k=y+","+(x-_);return"M"+T+w+" 0 1,1 "+k+w+" 0 0,1 "+T+"Z"}function M(e,s,l){var t=e.path;var u=e.xsizemode;var c=e.ysizemode;var f=e.xanchor;var d=e.yanchor;return t.replace(re.segmentRE,function(e){var t=0;var r=e.charAt(0);var a=re.paramIsX[r];var n=re.paramIsY[r];var i=re.numParams[r];var o=e.substr(1).replace(re.paramRE,function(e){if(a[t]){if(u==="pixel")e=s(f)+Number(e);else e=s(e)}else if(n[t]){if(c==="pixel")e=l(d)-Number(e);else e=l(e)}t++;if(t>i)e="X";return e});if(t>i){o=o.replace(/[\s,]*X.*/,"");g.log("Ignoring extra params in segment "+e)}return r+o})}function se(e,s,l){return e.replace(re.segmentRE,function(e){var t=0;var r=e.charAt(0);var a=re.paramIsX[r];var n=re.paramIsY[r];var i=re.numParams[r];var o=e.substr(1).replace(re.paramRE,function(e){if(t>=i)return e;if(a[t])e=s(e);else if(n[t])e=l(e);t++;return e});return r+o})}function k(e,t){if(!w(e))return;var r=t.node();var a=+r.getAttribute("data-index");if(a>=0){if(a===e._fullLayout._activeShapeIndex){s(e);return}e._fullLayout._activeShapeIndex=a;e._fullLayout._deactivateShape=s;n(e)}}function s(e){if(!w(e))return;var t=e._fullLayout._activeShapeIndex;if(t>=0){i(e);delete e._fullLayout._activeShapeIndex;n(e)}}function a(e){if(!w(e))return;i(e);var t=e._fullLayout._activeShapeIndex;var r=(e.layout||{}).shapes||[];if(t<r.length){var a=[];for(var n=0;n<r.length;n++){if(n!==t){a.push(r[n])}}delete e._fullLayout._activeShapeIndex;m.call("_guiRelayout",e,{shapes:a})}}},{"../../lib":285,"../../lib/setcursor":305,"../../plot_api/plot_template":320,"../../plots/cartesian/axes":331,"../../plots/cartesian/handle_outline":342,"../../registry":373,"../color":155,"../dragelement":174,"../drawing":177,"./constants":237,"./draw_newshape/display_outlines":243,"./draw_newshape/helpers":244,"./helpers":246}],240:[function(e,t,r){"use strict";var a=e("../../drawing/attributes").dash;var n=e("../../../lib/extend").extendFlat;t.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:n({},a,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":279,"../../drawing/attributes":176}],241:[function(e,t,r){"use strict";var a=32;t.exports={CIRCLE_SIDES:a,i000:0,i090:a/4,i180:a/2,i270:a/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],242:[function(e,t,r){"use strict";var o=e("../../color");t.exports=function e(t,r,a){a("newshape.drawdirection");a("newshape.layer");a("newshape.fillcolor");a("newshape.fillrule");a("newshape.opacity");var n=a("newshape.line.width");if(n){var i=(t||{}).plot_bgcolor||"#FFF";a("newshape.line.color",o.contrast(i));a("newshape.line.dash")}a("activeshape.fillcolor");a("activeshape.opacity")}},{"../../color":155}],243:[function(e,t,r){"use strict";var C=e("../../dragelement");var a=e("../../dragelement/helpers");var D=a.drawMode;var O=e("../../../registry");var n=e("./constants");var I=n.i000;var P=n.i090;var R=n.i180;var N=n.i270;var i=e("../../../plots/cartesian/handle_outline");var z=i.clearOutlineControllers;var o=e("./helpers");var F=o.pointsShapeRectangle;var j=o.pointsShapeEllipse;var H=o.writePaths;var B=e("./newshapes");t.exports=function e(c,r,a,t){if(!t)t=0;var u=a.gd;function f(){e(c,r,a,t++);if(j(c[0])){n({redrawing:true})}}function n(e){a.isActiveShape=false;var t=B(r,a);if(Object.keys(t).length){O.call((e||{}).redrawing?"relayout":"_guiRelayout",u,t)}}var i=a.isActiveShape;var o=u._fullLayout;var s=o._zoomlayer;var l=a.dragmode;var d=D(l);if(d)u._fullLayout._drawing=true;else if(u._fullLayout._activeShapeIndex>=0)z(u);r.attr("d",H(c));var v;var p;var h;var m;var g;if(i&&!t){g=q([],c);var y=s.append("g").attr("class","outline-controllers");k(y);L()}function x(e){h=+e.srcElement.getAttribute("data-i");m=+e.srcElement.getAttribute("data-j");v[h][m].moveFn=b}function b(e,t){if(!c.length)return;var r=g[h][m][1];var a=g[h][m][2];var n=c[h];var i=n.length;if(F(n)){for(var o=0;o<i;o++){if(o===m)continue;var s=n[o];if(s[1]===n[m][1]){s[1]=r+e}if(s[2]===n[m][2]){s[2]=a+t}}n[m][1]=r+e;n[m][2]=a+t;if(!F(n)){for(var l=0;l<i;l++){for(var u=0;u<n[l].length;u++){n[l][u]=g[h][l][u]}}}}else{n[m][1]=r+e;n[m][2]=a+t}f()}function _(){n()}function w(){if(!c.length)return;if(!c[h])return;if(!c[h].length)return;var e=[];for(var t=0;t<c[h].length;t++){if(t!==m){e.push(c[h][t])}}if(e.length>1&&!(e.length===2&&e[1][0]==="Z")){if(m===0){e[0][0]="M"}c[h]=e;f();n()}}function T(e,t){if(e===2){h=+t.srcElement.getAttribute("data-i");m=+t.srcElement.getAttribute("data-j");var r=c[h];if(!F(r)&&!j(r)){w()}}}function k(e){v=[];for(var t=0;t<c.length;t++){var r=c[t];var a=F(r);var n=!a&&j(r);v[t]=[];for(var i=0;i<r.length;i++){if(r[i][0]==="Z")continue;if(n&&i!==I&&i!==P&&i!==R&&i!==N){continue}var o=r[i][1];var s=r[i][2];var l=e.append("circle").classed("cursor-grab",true).attr("data-i",t).attr("data-j",i).attr("cx",o).attr("cy",s).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});v[t][i]={element:l.node(),gd:u,prepFn:x,doneFn:_,clickFn:T};C.init(v[t][i])}}}function M(e,t){if(!c.length)return;for(var r=0;r<c.length;r++){for(var a=0;a<c[r].length;a++){for(var n=0;n+2<c[r][a].length;n+=2){c[r][a][n+1]=g[r][a][n+1]+e;c[r][a][n+2]=g[r][a][n+2]+t}}}}function A(e,t){M(e,t);f()}function S(e){h=+e.srcElement.getAttribute("data-i");if(!h)h=0;p[h].moveFn=A}function E(){n()}function L(){p=[];if(!c.length)return;var e=0;p[e]={element:r[0][0],gd:u,prepFn:S,doneFn:E};C.init(p[e])}};function q(e,t){for(var r=0;r<t.length;r++){var a=t[r];e[r]=[];for(var n=0;n<a.length;n++){e[r][n]=[];for(var i=0;i<a[n].length;i++){e[r][n][i]=a[n][i]}}}return e}},{"../../../plots/cartesian/handle_outline":342,"../../../registry":373,"../../dragelement":174,"../../dragelement/helpers":173,"./constants":241,"./helpers":244,"./newshapes":245}],244:[function(e,t,f){"use strict";var R=e("parse-svg-path");var r=e("./constants");var N=r.CIRCLE_SIDES;var d=r.SQRT2;var a=e("../../../plots/cartesian/helpers");var z=a.p2r;var F=a.r2p;var c=[0,3,4,5,6,1,2];var v=[0,3,4,1,2];f.writePaths=function(e){var t=e.length;if(!t)return"M0,0Z";var r="";for(var a=0;a<t;a++){var n=e[a].length;for(var i=0;i<n;i++){var o=e[a][i][0];if(o==="Z"){r+="Z"}else{var s=e[a][i].length;for(var l=0;l<s;l++){var u=l;if(o==="Q"||o==="S"){u=v[l]}else if(o==="C"){u=c[l]}r+=e[a][i][u];if(l>0&&l<s-1){r+=","}}}}}return r};f.readPaths=function(e,t,r,a){var n=R(e);var i=[];var o=-1;var s=function(){o++;i[o]=[]};var l;var u=0;var c=0;var f;var d;var v=function(){f=u;d=c};v();for(var p=0;p<n.length;p++){var h=[];var m,g,y,x;var b=n[p][0];var _=b;switch(b){case"M":s();u=+n[p][1];c=+n[p][2];h.push([_,u,c]);v();break;case"Q":case"S":m=+n[p][1];y=+n[p][2];u=+n[p][3];c=+n[p][4];h.push([_,u,c,m,y]);break;case"C":m=+n[p][1];y=+n[p][2];g=+n[p][3];x=+n[p][4];u=+n[p][5];c=+n[p][6];h.push([_,u,c,m,y,g,x]);break;case"T":case"L":u=+n[p][1];c=+n[p][2];h.push([_,u,c]);break;case"H":_="L";u=+n[p][1];h.push([_,u,c]);break;case"V":_="L";c=+n[p][1];h.push([_,u,c]);break;case"A":_="L";var w=+n[p][1];var T=+n[p][2];if(!+n[p][4]){w=-w;T=-T}var k=u-w;var M=c;for(l=1;l<=N/2;l++){var A=2*Math.PI*l/N;h.push([_,k+w*Math.cos(A),M+T*Math.sin(A)])}break;case"Z":if(u!==f||c!==d){u=f;c=d;h.push([_,u,c])}break}var S=(r||{}).domain;var E=t._fullLayout._size;var L=r&&r.xsizemode==="pixel";var C=r&&r.ysizemode==="pixel";var D=a===false;for(var O=0;O<h.length;O++){for(l=0;l+2<7;l+=2){var I=h[O][l+1];var P=h[O][l+2];if(I===undefined||P===undefined)continue;u=I;c=P;if(r){if(r.xaxis&&r.xaxis.p2r){if(D)I-=r.xaxis._offset;if(L){I=F(r.xaxis,r.xanchor)+I}else{I=z(r.xaxis,I)}}else{if(D)I-=E.l;if(S)I=S.x[0]+I/E.w;else I=I/E.w}if(r.yaxis&&r.yaxis.p2r){if(D)P-=r.yaxis._offset;if(C){P=F(r.yaxis,r.yanchor)-P}else{P=z(r.yaxis,P)}}else{if(D)P-=E.t;if(S)P=S.y[1]-P/E.h;else P=1-P/E.h}}h[O][l+1]=I;h[O][l+2]=P}i[o].push(h[O].slice())}}return i};function s(e,t){return Math.abs(e-t)<=1e-6}function l(e,t){var r=t[1]-e[1];var a=t[2]-e[2];return Math.sqrt(r*r+a*a)}f.pointsShapeRectangle=function(e){var t=e.length;if(t!==5)return false;for(var r=1;r<3;r++){var a=e[0][r]-e[1][r];var n=e[3][r]-e[2][r];if(!s(a,n))return false;var i=e[0][r]-e[3][r];var o=e[1][r]-e[2][r];if(!s(i,o))return false}if(!s(e[0][1],e[1][1])&&!s(e[0][1],e[3][1]))return false;return!!(l(e[0],e[1])*l(e[0],e[3]))};f.pointsShapeEllipse=function(e){var t=e.length;if(t!==N+1)return false;t=N;for(var r=0;r<t;r++){var a=(t*2-r)%t;var n=(t/2+a)%t;var i=(t/2+r)%t;if(!s(l(e[r],e[i]),l(e[a],e[n])))return false}return true};f.handleEllipse=function(e,t,r){if(!e)return[t,r];var a=f.ellipseOver({x0:t[0],y0:t[1],x1:r[0],y1:r[1]});var n=(a.x1+a.x0)/2;var i=(a.y1+a.y0)/2;var o=(a.x1-a.x0)/2;var s=(a.y1-a.y0)/2;if(!o)o=s=s/d;if(!s)s=o=o/d;var l=[];for(var u=0;u<N;u++){var c=u*2*Math.PI/N;l.push([n+o*Math.cos(c),i+s*Math.sin(c)])}return l};f.ellipseOver=function(e){var t=e.x0;var r=e.y0;var a=e.x1;var n=e.y1;var i=a-t;var o=n-r;t-=i;r-=o;var s=(t+a)/2;var l=(r+n)/2;var u=d;i*=u;o*=u;return{x0:s-i,y0:l-o,x1:s+i,y1:l+o}}},{"../../../plots/cartesian/helpers":343,"./constants":241,"parse-svg-path":72}],245:[function(e,t,r){"use strict";var a=e("../../dragelement/helpers");var q=a.drawMode;var U=a.openMode;var n=e("./constants");var Y=n.i000;var V=n.i090;var G=n.i180;var W=n.i270;var $=n.cos45;var Z=n.sin45;var i=e("../../../plots/cartesian/helpers");var X=i.p2r;var J=i.r2p;var o=e("../../../plots/cartesian/handle_outline");var K=o.clearSelect;var s=e("./helpers");var Q=s.readPaths;var ee=s.writePaths;var te=s.ellipseOver;t.exports=function e(t,r){if(!t.length)return;var a=t[0][0];if(!a)return;var n=a.getAttribute("d");var i=r.gd;var o=i._fullLayout.newshape;var s=r.plotinfo;var l=s.xaxis;var u=s.yaxis;var c=!!s.domain||!s.xaxis;var f=!!s.domain||!s.yaxis;var d=r.isActiveShape;var v=r.dragmode;var p=(i.layout||{}).shapes||[];if(!q(v)&&d!==undefined){var h=i._fullLayout._activeShapeIndex;if(h<p.length){switch(i._fullLayout.shapes[h].type){case"rect":v="drawrect";break;case"circle":v="drawcircle";break;case"line":v="drawline";break;case"path":var m=p[h].path||"";if(m[m.length-1]==="Z"){v="drawclosedpath"}else{v="drawopenpath"}break}}}var g=U(v);var y=Q(n,i,s,d);var x={editable:true,xref:c?"paper":l._id,yref:f?"paper":u._id,layer:o.layer,opacity:o.opacity,line:{color:o.line.color,width:o.line.width,dash:o.line.dash}};if(!g){x.fillcolor=o.fillcolor;x.fillrule=o.fillrule}var b;if(y.length===1)b=y[0];if(b&&v==="drawrect"){x.type="rect";x.x0=b[0][1];x.y0=b[0][2];x.x1=b[2][1];x.y1=b[2][2]}else if(b&&v==="drawline"){x.type="line";x.x0=b[0][1];x.y0=b[0][2];x.x1=b[1][1];x.y1=b[1][2]}else if(b&&v==="drawcircle"){x.type="circle";var _=b[Y][1];var w=b[V][1];var T=b[G][1];var k=b[W][1];var M=b[Y][2];var A=b[V][2];var S=b[G][2];var E=b[W][2];var L=s.xaxis&&(s.xaxis.type==="date"||s.xaxis.type==="log");var C=s.yaxis&&(s.yaxis.type==="date"||s.yaxis.type==="log");if(L){_=J(s.xaxis,_);w=J(s.xaxis,w);T=J(s.xaxis,T);k=J(s.xaxis,k)}if(C){M=J(s.yaxis,M);A=J(s.yaxis,A);S=J(s.yaxis,S);E=J(s.yaxis,E)}var D=(w+k)/2;var O=(M+S)/2;var I=(k-w+T-_)/2;var P=(E-A+S-M)/2;var R=te({x0:D,y0:O,x1:D+I*$,y1:O+P*Z});if(L){R.x0=X(s.xaxis,R.x0);R.x1=X(s.xaxis,R.x1)}if(C){R.y0=X(s.yaxis,R.y0);R.y1=X(s.yaxis,R.y1)}x.x0=R.x0;x.y0=R.y0;x.x1=R.x1;x.y1=R.y1}else{x.type="path";if(l&&u)re(y,l,u);x.path=ee(y);b=null}K(i);var N=r.editHelpers;var z=(N||{}).modifyItem;var F=[];for(var j=0;j<p.length;j++){var H=i._fullLayout.shapes[j];F[j]=H._input;if(d!==undefined&&j===i._fullLayout._activeShapeIndex){var B=x;switch(H.type){case"line":case"rect":case"circle":z("x0",B.x0);z("x1",B.x1);z("y0",B.y0);z("y1",B.y1);break;case"path":z("path",B.path);break}}}if(d===undefined){F.push(x);return F}return N?N.getUpdateObj():{}};function re(e,t,r){var a=t.type==="date";var n=r.type==="date";if(!a&&!n)return e;for(var i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++){for(var s=0;s+2<e[i][o].length;s+=2){if(a)e[i][o][s+1]=e[i][o][s+1].replace(" ","_");if(n)e[i][o][s+2]=e[i][o][s+2].replace(" ","_")}}}return e}},{"../../../plots/cartesian/handle_outline":342,"../../../plots/cartesian/helpers":343,"../../dragelement/helpers":173,"./constants":241,"./helpers":244}],246:[function(e,t,s){"use strict";var i=e("./constants");var o=e("../../lib");s.rangeToShapePosition=function(e){return e.type==="log"?e.r2d:function(e){return e}};s.shapePositionToRange=function(e){return e.type==="log"?e.d2r:function(e){return e}};s.decodeDate=function(t){return function(e){if(e.replace)e=e.replace("_"," ");return t(e)}};s.encodeDate=function(t){return function(e){return t(e).replace(" ","_")}};s.extractPathCoords=function(e,a){var n=[];var t=e.match(i.segmentRE);t.forEach(function(e){var t=a[e.charAt(0)].drawn;if(t===undefined)return;var r=e.substr(1).match(i.paramRE);if(!r||r.length<t)return;n.push(o.cleanNumber(r[t]))});return n};s.getDataToPixel=function(e,t,r,a){var n=e._fullLayout._size;var i;if(t){if(a==="domain"){i=function(e){return t._length*(r?1-e:e)+t._offset}}else{var o=s.shapePositionToRange(t);i=function(e){return t._offset+t.r2p(o(e,true))};if(t.type==="date")i=s.decodeDate(i)}}else if(r){i=function(e){return n.t+n.h*(1-e)}}else{i=function(e){return n.l+n.w*e}}return i};s.getPixelToData=function(e,r,a,t){var n=e._fullLayout._size;var i;if(r){if(t==="domain"){i=function(e){var t=(e-r._offset)/r._length;return a?1-t:t}}else{var o=s.rangeToShapePosition(r);i=function(e){return o(r.p2r(e-r._offset))}}}else if(a){i=function(e){return 1-(e-n.t)/n.h}}else{i=function(e){return(e-n.l)/n.w}}return i};s.roundPositionForSharpStrokeRendering=function(e,t){var r=Math.round(t%2)===1;var a=Math.round(e);return r?a+.5:a};s.makeOptionsAndPlotinfo=function(e,t){var r=e._fullLayout.shapes[t]||{};var a=e._fullLayout._plots[r.xref+r.yref];var n=!!a;if(n){a._hadPlotinfo=true}else{a={};if(r.xref&&r.xref!=="paper")a.xaxis=e._fullLayout[r.xref+"axis"];if(r.yref&&r.yref!=="paper")a.yaxis=e._fullLayout[r.yref+"axis"]}a.xsizemode=r.xsizemode;a.ysizemode=r.ysizemode;a.xanchor=r.xanchor;a.yanchor=r.yanchor;return{options:r,plotinfo:a}}},{"../../lib":285,"./constants":237}],247:[function(e,t,r){"use strict";var a=e("./draw");t.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),supplyDrawNewShapeDefaults:e("./draw_newshape/defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:a.draw,drawOne:a.drawOne}},{"../../plots/cartesian/include_components":344,"./attributes":235,"./calc_autorange":236,"./defaults":238,"./draw":239,"./draw_newshape/defaults":242}],248:[function(e,t,r){"use strict";var a=e("../../plots/font_attributes");var n=e("../../plots/pad_attributes");var i=e("../../lib/extend").extendDeepAll;var o=e("../../plot_api/edit_types").overrideAll;var s=e("../../plots/animation_attributes");var l=e("../../plot_api/plot_template").templatedArray;var u=e("./constants");var c=l("step",{visible:{valType:"boolean",dflt:true},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:true,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:true}});t.exports=o(l("slider",{visible:{valType:"boolean",dflt:true},active:{valType:"number",min:0,dflt:0},steps:c,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:i(n({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:true},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:a({})},font:a({}),activebgcolor:{valType:"color",dflt:u.gripBgActiveColor},bgcolor:{valType:"color",dflt:u.railBgColor},bordercolor:{valType:"color",dflt:u.railBorderColor},borderwidth:{valType:"number",min:0,dflt:u.railBorderWidth},ticklen:{valType:"number",min:0,dflt:u.tickLength},tickcolor:{valType:"color",dflt:u.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:u.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":279,"../../plot_api/edit_types":313,"../../plot_api/plot_template":320,"../../plots/animation_attributes":325,"../../plots/font_attributes":360,"../../plots/pad_attributes":365,"./constants":249}],249:[function(e,t,r){"use strict";t.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],250:[function(e,t,r){"use strict";var f=e("../../lib");var d=e("../../plots/array_container_defaults");var v=e("./attributes");var a=e("./constants");var n=a.name;var i=v.steps;t.exports=function e(t,r){d(t,r,{name:n,handleItemDefaults:o})};function o(r,a,e){function t(e,t){return f.coerce(r,a,v,e,t)}var n=d(r,a,{name:"steps",handleItemDefaults:p});var i=0;for(var o=0;o<n.length;o++){if(n[o].visible)i++}var s;if(i<2)s=a.visible=false;else s=t("visible");if(!s)return;a._stepCount=i;var l=a._visibleSteps=f.filterVisible(n);var u=t("active");if(!(n[u]||{}).visible)a.active=l[0]._index;t("x");t("y");f.noneOrAll(r,a,["x","y"]);t("xanchor");t("yanchor");t("len");t("lenmode");t("pad.t");t("pad.r");t("pad.b");t("pad.l");f.coerceFont(t,"font",e.font);var c=t("currentvalue.visible");if(c){t("currentvalue.xanchor");t("currentvalue.prefix");t("currentvalue.suffix");t("currentvalue.offset");f.coerceFont(t,"currentvalue.font",a.font)}t("transition.duration");t("transition.easing");t("bgcolor");t("activebgcolor");t("bordercolor");t("borderwidth");t("ticklen");t("tickwidth");t("tickcolor");t("minorticklen")}function p(r,a){function e(e,t){return f.coerce(r,a,i,e,t)}var t;if(r.method!=="skip"&&!Array.isArray(r.args)){t=a.visible=false}else t=e("visible");if(t){e("method");e("args");var n=e("label","step-"+a._index);e("value",n);e("execute")}}},{"../../lib":285,"../../plots/array_container_defaults":326,"./attributes":248,"./constants":249}],251:[function(e,t,r){"use strict";var p=e("@plotly/d3");var h=e("../../plots/plots");var l=e("../color");var m=e("../drawing");var g=e("../../lib");var u=g.strTranslate;var y=e("../../lib/svg_text_utils");var c=e("../../plot_api/plot_template").arrayEditor;var x=e("./constants");var a=e("../../constants/alignment");var d=a.LINE_SPACING;var b=a.FROM_TL;var _=a.FROM_BR;t.exports=function e(a){var t=a._fullLayout;var r=f(t,a);var n=t._infolayer.selectAll("g."+x.containerClassName).data(r.length>0?[0]:[]);n.enter().append("g").classed(x.containerClassName,true).style("cursor","ew-resize");function i(e){if(e._commandObserver){e._commandObserver.remove();delete e._commandObserver}h.autoMargin(a,w(e))}n.exit().each(function(){p.select(this).selectAll("g."+x.groupClassName).each(i)}).remove();if(r.length===0)return;var o=n.selectAll("g."+x.groupClassName).data(r,v);o.enter().append("g").classed(x.groupClassName,true);o.exit().each(i).remove();for(var s=0;s<r.length;s++){var l=r[s];T(a,l)}o.each(function(e){var r=p.select(this);L(e);h.manageCommandObserver(a,e,e._visibleSteps,function(e){var t=r.data()[0];if(t.active===e.index)return;if(t._dragging)return;E(a,r,t,e.index,false,true)});k(a,p.select(this),e)})};function w(e){return x.autoMarginIdRoot+e._index}function f(e,t){var r=e[x.name];var a=[];for(var n=0;n<r.length;n++){var i=r[n];if(!i.visible)continue;i._gd=t;a.push(i)}return a}function v(e){return e._index}function T(e,i){var t=m.tester.selectAll("g."+x.labelGroupClass).data(i._visibleSteps);t.enter().append("g").classed(x.labelGroupClass,true);var o=0;var s=0;t.each(function(e){var t=p.select(this);var r=A(t,{step:e},i);var a=r.node();if(a){var n=m.bBox(a);s=Math.max(s,n.height);o=Math.max(o,n.width)}});t.remove();var n=i._dims={};n.inputAreaWidth=Math.max(x.railWidth,x.gripHeight);var r=e._fullLayout._size;n.lx=r.l+r.w*i.x;n.ly=r.t+r.h*(1-i.y);if(i.lenmode==="fraction"){n.outerLength=Math.round(r.w*i.len)}else{n.outerLength=i.len}n.inputAreaStart=0;n.inputAreaLength=Math.round(n.outerLength-i.pad.l-i.pad.r);var a=n.inputAreaLength-2*x.stepInset;var l=a/(i._stepCount-1);var u=o+x.labelPadding;n.labelStride=Math.max(1,Math.ceil(u/l));n.labelHeight=s;n.currentValueMaxWidth=0;n.currentValueHeight=0;n.currentValueTotalHeight=0;n.currentValueMaxLines=1;if(i.currentvalue.visible){var c=m.tester.append("g");t.each(function(e){var t=M(c,i,e.label);var r=t.node()&&m.bBox(t.node())||{width:0,height:0};var a=y.lineCount(t);n.currentValueMaxWidth=Math.max(n.currentValueMaxWidth,Math.ceil(r.width));n.currentValueHeight=Math.max(n.currentValueHeight,Math.ceil(r.height));n.currentValueMaxLines=Math.max(n.currentValueMaxLines,a)});n.currentValueTotalHeight=n.currentValueHeight+i.currentvalue.offset;c.remove()}n.height=n.currentValueTotalHeight+x.tickOffset+i.ticklen+x.labelOffset+n.labelHeight+i.pad.t+i.pad.b;var f="left";if(g.isRightAnchor(i)){n.lx-=n.outerLength;f="right"}if(g.isCenterAnchor(i)){n.lx-=n.outerLength/2;f="center"}var d="top";if(g.isBottomAnchor(i)){n.ly-=n.height;d="bottom"}if(g.isMiddleAnchor(i)){n.ly-=n.height/2;d="middle"}n.outerLength=Math.ceil(n.outerLength);n.height=Math.ceil(n.height);n.lx=Math.round(n.lx);n.ly=Math.round(n.ly);var v={y:i.y,b:n.height*_[d],t:n.height*b[d]};if(i.lenmode==="fraction"){v.l=0;v.xl=i.x-i.len*b[f];v.r=0;v.xr=i.x+i.len*_[f]}else{v.x=i.x;v.l=n.outerLength*b[f];v.r=n.outerLength*_[f]}h.autoMargin(e,w(i),v)}function k(e,t,r){if(!(r.steps[r.active]||{}).visible){r.active=r._visibleSteps[0]._index}t.call(M,r).call(P,r).call(i,r).call(s,r).call(I,e,r).call(n,e,r);var a=r._dims;m.setTranslate(t,a.lx+r.pad.l,a.ly+r.pad.t);t.call(C,r,false);t.call(M,r)}function M(e,t,r){if(!t.currentvalue.visible)return;var a=t._dims;var n,i;switch(t.currentvalue.xanchor){case"right":n=a.inputAreaLength-x.currentValueInset-a.currentValueMaxWidth;i="left";break;case"center":n=a.inputAreaLength*.5;i="middle";break;default:n=x.currentValueInset;i="left"}var o=g.ensureSingle(e,"text",x.labelClass,function(e){e.attr({"text-anchor":i,"data-notex":1})});var s=t.currentvalue.prefix?t.currentvalue.prefix:"";if(typeof r==="string"){s+=r}else{var l=t.steps[t.active].label;var u=t._gd._fullLayout._meta;if(u)l=g.templateString(l,u);s+=l}if(t.currentvalue.suffix){s+=t.currentvalue.suffix}o.call(m.font,t.currentvalue.font).text(s).call(y.convertToTspans,t._gd);var c=y.lineCount(o);var f=(a.currentValueMaxLines+1-c)*t.currentvalue.font.size*d;y.positionText(o,n,f);return o}function n(t,r,a){var e=g.ensureSingle(t,"rect",x.gripRectClass,function(e){e.call(o,r,t,a).style("pointer-events","all")});e.attr({width:x.gripWidth,height:x.gripHeight,rx:x.gripRadius,ry:x.gripRadius}).call(l.stroke,a.bordercolor).call(l.fill,a.bgcolor).style("stroke-width",a.borderwidth+"px")}function A(e,t,r){var a=g.ensureSingle(e,"text",x.labelClass,function(e){e.attr({"text-anchor":"middle","data-notex":1})});var n=t.step.label;var i=r._gd._fullLayout._meta;if(i)n=g.templateString(n,i);a.call(m.font,r.font).text(n).call(y.convertToTspans,r._gd);return a}function i(e,r){var t=g.ensureSingle(e,"g",x.labelsClass);var a=r._dims;var n=t.selectAll("g."+x.labelGroupClass).data(a.labelSteps);n.enter().append("g").classed(x.labelGroupClass,true);n.exit().remove();n.each(function(e){var t=p.select(this);t.call(A,e,r);m.setTranslate(t,D(r,e.fraction),x.tickOffset+r.ticklen+r.font.size*d+x.labelOffset+a.currentValueTotalHeight)})}function S(e,t,r,a,n){var i=Math.round(a*(r._stepCount-1));var o=r._visibleSteps[i]._index;if(o!==r.active){E(e,t,r,o,true,n)}}function E(t,r,e,a,n,i){var o=e.active;e.active=a;c(t.layout,x.name,e).applyUpdate("active",a);var s=e.steps[e.active];r.call(C,e,i);r.call(M,e);t.emit("plotly_sliderchange",{slider:e,step:e.steps[e.active],interaction:n,previousActive:o});if(s&&s.method&&n){if(r._nextMethod){r._nextMethod.step=s;r._nextMethod.doCallback=n;r._nextMethod.doTransition=i}else{r._nextMethod={step:s,doCallback:n,doTransition:i};r._nextMethodRaf=window.requestAnimationFrame(function(){var e=r._nextMethod.step;if(!e.method)return;if(e.execute){h.executeAPICommand(t,e.method,e.args)}r._nextMethod=null;r._nextMethodRaf=null})}}}function o(e,a,n){var i=n.node();var o=p.select(a);function s(){return n.data()[0]}e.on("mousedown",function(){var e=s();a.emit("plotly_sliderstart",{slider:e});var t=n.select("."+x.gripRectClass);p.event.stopPropagation();p.event.preventDefault();t.call(l.fill,e.activebgcolor);var r=O(e,p.mouse(i)[0]);S(a,n,e,r,true);e._dragging=true;o.on("mousemove",function(){var e=s();var t=O(e,p.mouse(i)[0]);S(a,n,e,t,false)});o.on("mouseup",function(){var e=s();e._dragging=false;t.call(l.fill,e.bgcolor);o.on("mouseup",null);o.on("mousemove",null);a.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})})})}function s(e,n){var t=e.selectAll("rect."+x.tickRectClass).data(n._visibleSteps);var i=n._dims;t.enter().append("rect").classed(x.tickRectClass,true);t.exit().remove();t.attr({width:n.tickwidth+"px","shape-rendering":"crispEdges"});t.each(function(e,t){var r=t%i.labelStride===0;var a=p.select(this);a.attr({height:r?n.ticklen:n.minorticklen}).call(l.fill,r?n.tickcolor:n.tickcolor);m.setTranslate(a,D(n,t/(n._stepCount-1))-.5*n.tickwidth,(r?x.tickOffset:x.minorTickOffset)+i.currentValueTotalHeight)})}function L(e){var t=e._dims;t.labelSteps=[];var r=e._stepCount;for(var a=0;a<r;a+=t.labelStride){t.labelSteps.push({fraction:a/(r-1),step:e._visibleSteps[a]})}}function C(e,t,r){var a=e.select("rect."+x.gripRectClass);var n=0;for(var i=0;i<t._stepCount;i++){if(t._visibleSteps[i]._index===t.active){n=i;break}}var o=D(t,n/(t._stepCount-1));if(t._invokingCommand)return;var s=a;if(r&&t.transition.duration>0){s=s.transition().duration(t.transition.duration).ease(t.transition.easing)}s.attr("transform",u(o-x.gripWidth*.5,t._dims.currentValueTotalHeight))}function D(e,t){var r=e._dims;return r.inputAreaStart+x.stepInset+(r.inputAreaLength-2*x.stepInset)*Math.min(1,Math.max(0,t))}function O(e,t){var r=e._dims;return Math.min(1,Math.max(0,(t-x.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*x.stepInset-2*r.inputAreaStart)))}function I(t,r,a){var e=a._dims;var n=g.ensureSingle(t,"rect",x.railTouchRectClass,function(e){e.call(o,r,t,a).style("pointer-events","all")});n.attr({width:e.inputAreaLength,height:Math.max(e.inputAreaWidth,x.tickOffset+a.ticklen+e.labelHeight)}).call(l.fill,a.bgcolor).attr("opacity",0);m.setTranslate(n,0,e.currentValueTotalHeight)}function P(e,t){var r=t._dims;var a=r.inputAreaLength-x.railInset*2;var n=g.ensureSingle(e,"rect",x.railRectClass);n.attr({width:a,height:x.railWidth,rx:x.railRadius,ry:x.railRadius,"shape-rendering":"crispEdges"}).call(l.stroke,t.bordercolor).call(l.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px");m.setTranslate(n,x.railInset,(r.inputAreaWidth-x.railWidth)*.5+r.currentValueTotalHeight)}},{"../../constants/alignment":260,"../../lib":285,"../../lib/svg_text_utils":307,"../../plot_api/plot_template":320,"../../plots/plots":366,"../color":155,"../drawing":177,"./constants":249,"@plotly/d3":20}],252:[function(e,t,r){"use strict";var a=e("./constants");t.exports={moduleType:"component",name:a.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":248,"./constants":249,"./defaults":250,"./draw":251}],253:[function(e,t,r){"use strict";var E=e("@plotly/d3");var L=e("fast-isnumeric");var C=e("../../plots/plots");var D=e("../../registry");var O=e("../../lib");var I=O.strTranslate;var P=e("../drawing");var R=e("../color");var N=e("../../lib/svg_text_utils");var z=e("../../constants/interactions");var F=e("../../constants/alignment").OPPOSITE_SIDE;var j=/ [XY][0-9]* /;function a(r,e,t){var a=t.propContainer;var n=t.propName;var i=t.placeholder;var o=t.traceIndex;var d=t.avoid||{};var s=t.attributes;var l=t.transform;var u=t.containerGroup;var v=r._fullLayout;var c=1;var f=false;var p=a.title;var h=(p&&p.text?p.text:"").trim();var m=p&&p.font?p.font:{};var g=m.family;var y=m.size;var x=m.color;var b;if(n==="title.text")b="titleText";else if(n.indexOf("axis")!==-1)b="axisTitleText";else if(n.indexOf("colorbar"!==-1))b="colorbarTitleText";var _=r._context.edits[b];if(h==="")c=0;else if(h.replace(j," % ")===i.replace(j," % ")){c=.2;f=true;if(!_)h=""}if(t._meta){h=O.templateString(h,t._meta)}else if(v._meta){h=O.templateString(h,v._meta)}var w=h||_;if(!u){u=O.ensureSingle(v._infolayer,"g","g-"+e)}var T=u.selectAll("text").data(w?[0]:[]);T.enter().append("text");T.text(h).attr("class",e);T.exit().remove();if(!w)return u;function k(e){O.syncOrAsync([M,A],e)}function M(e){var t;if(l){t="";if(l.rotate){t+="rotate("+[l.rotate,s.x,s.y]+")"}if(l.offset){t+=I(0,l.offset)}}else{t=null}e.attr("transform",t);e.style({"font-family":g,"font-size":E.round(y,2)+"px",fill:R.rgb(x),opacity:c*R.opacity(x),"font-weight":C.fontWeight}).attr(s).call(N.convertToTspans,r);return C.previousPromises(r)}function A(e){var t=E.select(e.node().parentNode);if(d&&d.selection&&d.side&&h){t.attr("transform",null);var r=F[d.side];var a=d.side==="left"||d.side==="top"?-1:1;var n=L(d.pad)?d.pad:2;var i=P.bBox(t.node());var o={left:0,top:0,right:v.width,bottom:v.height};var s=d.maxShift||a*(o[d.side]-i[d.side]);var l=0;if(s<0){l=s}else{var u=d.offsetLeft||0;var c=d.offsetTop||0;i.left-=u;i.right-=u;i.top-=c;i.bottom-=c;d.selection.each(function(){var e=P.bBox(this);if(O.bBoxIntersect(i,e,n)){l=Math.max(l,a*(e[d.side]-i[r])+n)}});l=Math.min(s,l)}if(l>0||s<0){var f={left:[-l,0],right:[l,0],top:[0,-l],bottom:[0,l]}[d.side];t.attr("transform",I(f[0],f[1]))}}}T.call(k);function S(){c=0;f=true;T.text(i).on("mouseover.opacity",function(){E.select(this).transition().duration(z.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){E.select(this).transition().duration(z.HIDE_PLACEHOLDER).style("opacity",0)})}if(_){if(!h)S();else T.on(".opacity",null);T.call(N.makeEditable,{gd:r}).on("edit",function(e){if(o!==undefined){D.call("_guiRestyle",r,n,e,o)}else{D.call("_guiRelayout",r,n,e)}}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(k)}).on("input",function(e){this.text(e||" ").call(N.positionText,s.x,s.y)})}T.classed("js-placeholder",f);return u}t.exports={draw:a}},{"../../constants/alignment":260,"../../constants/interactions":264,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/plots":366,"../../registry":373,"../color":155,"../drawing":177,"@plotly/d3":20,"fast-isnumeric":31}],254:[function(e,t,r){"use strict";var a=e("../../plots/font_attributes");var n=e("../color/attributes");var i=e("../../lib/extend").extendFlat;var o=e("../../plot_api/edit_types").overrideAll;var s=e("../../plots/pad_attributes");var l=e("../../plot_api/plot_template").templatedArray;var u=l("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:true,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:true,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:true}});t.exports=o(l("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:true},buttons:u,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:i(s({editType:"arraydraw"}),{}),font:a({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:n.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":279,"../../plot_api/edit_types":313,"../../plot_api/plot_template":320,"../../plots/font_attributes":360,"../../plots/pad_attributes":365,"../color/attributes":154}],255:[function(e,t,r){"use strict";t.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},{}],256:[function(e,t,r){"use strict";var o=e("../../lib");var s=e("../../plots/array_container_defaults");var l=e("./attributes");var a=e("./constants");var n=a.name;var i=l.buttons;t.exports=function e(t,r){var a={name:n,handleItemDefaults:u};s(t,r,a)};function u(r,a,e){function t(e,t){return o.coerce(r,a,l,e,t)}var n=s(r,a,{name:"buttons",handleItemDefaults:c});var i=t("visible",n.length>0);if(!i)return;t("active");t("direction");t("type");t("showactive");t("x");t("y");o.noneOrAll(r,a,["x","y"]);t("xanchor");t("yanchor");t("pad.t");t("pad.r");t("pad.b");t("pad.l");o.coerceFont(t,"font",e.font);t("bgcolor",e.paper_bgcolor);t("bordercolor");t("borderwidth")}function c(r,a){function e(e,t){return o.coerce(r,a,i,e,t)}var t=e("visible",r.method==="skip"||Array.isArray(r.args));if(t){e("method");e("args");e("args2");e("label");e("execute")}}},{"../../lib":285,"../../plots/array_container_defaults":326,"./attributes":254,"./constants":255}],257:[function(e,t,r){"use strict";var m=e("@plotly/d3");var g=e("../../plots/plots");var i=e("../color");var p=e("../drawing");var y=e("../../lib");var h=e("../../lib/svg_text_utils");var l=e("../../plot_api/plot_template").arrayEditor;var x=e("../../constants/alignment").LINE_SPACING;var b=e("./constants");var d=e("./scrollbox");t.exports=function e(n){var t=n._fullLayout;var r=y.filterVisible(t[b.name]);function a(e){g.autoMargin(n,I(e))}var i=t._menulayer.selectAll("g."+b.containerClassName).data(r.length>0?[0]:[]);i.enter().append("g").classed(b.containerClassName,true).style("cursor","pointer");i.exit().each(function(){m.select(this).selectAll("g."+b.headerGroupClassName).each(a)}).remove();if(r.length===0)return;var o=i.selectAll("g."+b.headerGroupClassName).data(r,v);o.enter().append("g").classed(b.headerGroupClassName,true);var s=y.ensureSingle(i,"g",b.dropdownButtonGroupClassName,function(e){e.style("pointer-events","all")});for(var l=0;l<r.length;l++){var u=r[l];O(n,u)}var c="updatemenus"+t._uid;var f=new d(n,s,c);if(o.enter().size()){s.node().parentNode.appendChild(s.node());s.call(R)}o.exit().each(function(e){s.call(R);a(e)}).remove();o.each(function(t){var r=m.select(this);var a=t.type==="dropdown"?s:null;g.manageCommandObserver(n,t,t.buttons,function(e){T(n,t,t.buttons[e.index],r,a,f,e.index,true)});if(t.type==="dropdown"){k(n,r,s,f,t);if(w(s,t)){M(n,r,s,f,t)}}else{M(n,r,null,null,t)}})};function v(e){return e._index}function _(e){return+e.attr(b.menuIndexAttrName)===-1}function w(e,t){return+e.attr(b.menuIndexAttrName)===t._index}function T(e,t,r,a,n,i,o,s){t.active=o;l(e.layout,b.name,t).applyUpdate("active",o);if(t.type==="buttons"){M(e,a,null,null,t)}else if(t.type==="dropdown"){n.attr(b.menuIndexAttrName,"-1");k(e,a,n,i,t);if(!s){M(e,a,n,i,t)}}}function k(e,t,r,a,n){var i=y.ensureSingle(t,"g",b.headerClassName,function(e){e.style("pointer-events","all")});var o=n._dims;var s=n.active;var l=n.buttons[s]||b.blankHeaderOpts;var u={y:n.pad.t,yPad:0,x:n.pad.l,xPad:0,index:0};var c={width:o.headerWidth,height:o.headerHeight};i.call(E,n,l,e).call(P,n,u,c);var f=y.ensureSingle(t,"text",b.headerArrowClassName,function(e){e.attr("text-anchor","end").call(p.font,n.font).text(b.arrowSymbol[n.direction])});f.attr({x:o.headerWidth-b.arrowOffsetX+n.pad.l,y:o.headerHeight/2+b.textOffsetY+n.pad.t});i.on("click",function(){r.call(R,String(w(r,n)?-1:n._index));M(e,t,r,a,n)});i.on("mouseover",function(){i.call(C)});i.on("mouseout",function(){i.call(D,n)});p.setTranslate(t,o.lx,o.ly)}function M(a,n,i,o,s){if(!i){i=n;i.attr("pointer-events","all")}var e=!_(i)||s.type==="buttons"?s.buttons:[];var t=s.type==="dropdown"?b.dropdownButtonClassName:b.buttonClassName;var l=i.selectAll("g."+t).data(y.filterVisible(e));var r=l.enter().append("g").classed(t,true);var u=l.exit();if(s.type==="dropdown"){r.attr("opacity","0").transition().attr("opacity","1");u.transition().attr("opacity","0").remove()}else{u.remove()}var c=0;var f=0;var d=s._dims;var v=["up","down"].indexOf(s.direction)!==-1;if(s.type==="dropdown"){if(v){f=d.headerHeight+b.gapButtonHeader}else{c=d.headerWidth+b.gapButtonHeader}}if(s.type==="dropdown"&&s.direction==="up"){f=-b.gapButtonHeader+b.gapButton-d.openHeight}if(s.type==="dropdown"&&s.direction==="left"){c=-b.gapButtonHeader+b.gapButton-d.openWidth}var p={x:d.lx+c+s.pad.l,y:d.ly+f+s.pad.t,yPad:b.gapButton,xPad:b.gapButton,index:0};var h={l:p.x+s.borderwidth,t:p.y+s.borderwidth};l.each(function(e,t){var r=m.select(this);r.call(E,s,e,a).call(P,s,p);r.on("click",function(){if(m.event.defaultPrevented)return;if(e.execute){if(e.args2&&s.active===t){T(a,s,e,n,i,o,-1);g.executeAPICommand(a,e.method,e.args2)}else{T(a,s,e,n,i,o,t);g.executeAPICommand(a,e.method,e.args)}}a.emit("plotly_buttonclicked",{menu:s,button:e,active:s.active})});r.on("mouseover",function(){r.call(C)});r.on("mouseout",function(){r.call(D,s);l.call(L,s)})});l.call(L,s);if(v){h.w=Math.max(d.openWidth,d.headerWidth);h.h=p.y-h.t}else{h.w=p.x-h.l;h.h=Math.max(d.openHeight,d.headerHeight)}h.direction=s.direction;if(o){if(l.size()){A(a,n,i,o,s,h)}else{S(o)}}}function A(e,t,r,a,n,i){var o=n.direction;var s=o==="up"||o==="down";var l=n._dims;var u=n.active;var c,f;var d;if(s){f=0;for(d=0;d<u;d++){f+=l.heights[d]+b.gapButton}}else{c=0;for(d=0;d<u;d++){c+=l.widths[d]+b.gapButton}}a.enable(i,c,f);if(a.hbar){a.hbar.attr("opacity","0").transition().attr("opacity","1")}if(a.vbar){a.vbar.attr("opacity","0").transition().attr("opacity","1")}}function S(e){var t=!!e.hbar;var r=!!e.vbar;if(t){e.hbar.transition().attr("opacity","0").each("end",function(){t=false;if(!r)e.disable()})}if(r){e.vbar.transition().attr("opacity","0").each("end",function(){r=false;if(!t)e.disable()})}}function E(e,t,r,a){e.call(n,t).call(o,t,r,a)}function n(e,t){var r=y.ensureSingle(e,"rect",b.itemRectClassName,function(e){e.attr({rx:b.rx,ry:b.ry,"shape-rendering":"crispEdges"})});r.call(i.stroke,t.bordercolor).call(i.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function o(e,t,r,a){var n=y.ensureSingle(e,"text",b.itemTextClassName,function(e){e.attr({"text-anchor":"start","data-notex":1})});var i=r.label;var o=a._fullLayout._meta;if(o)i=y.templateString(i,o);n.call(p.font,t.font).text(i).call(h.convertToTspans,a)}function L(e,a){var n=a.active;e.each(function(e,t){var r=m.select(this);if(t===n&&a.showactive){r.select("rect."+b.itemRectClassName).call(i.fill,b.activeColor)}})}function C(e){e.select("rect."+b.itemRectClassName).call(i.fill,b.hoverColor)}function D(e,t){e.select("rect."+b.itemRectClassName).call(i.fill,t.bgcolor)}function O(u,c){var f=c._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0};var e=p.tester.selectAll("g."+b.dropdownButtonClassName).data(y.filterVisible(c.buttons));e.enter().append("g").classed(b.dropdownButtonClassName,true);var d=["up","down"].indexOf(c.direction)!==-1;e.each(function(e,t){var r=m.select(this);r.call(E,c,e,u);var a=r.select("."+b.itemTextClassName);var n=a.node()&&p.bBox(a.node()).width;var i=Math.max(n+b.textPadX,b.minWidth);var o=c.font.size*x;var s=h.lineCount(a);var l=Math.max(o*s,b.minHeight)+b.textOffsetY;l=Math.ceil(l);i=Math.ceil(i);f.widths[t]=i;f.heights[t]=l;f.height1=Math.max(f.height1,l);f.width1=Math.max(f.width1,i);if(d){f.totalWidth=Math.max(f.totalWidth,i);f.openWidth=f.totalWidth;f.totalHeight+=l+b.gapButton;f.openHeight+=l+b.gapButton}else{f.totalWidth+=i+b.gapButton;f.openWidth+=i+b.gapButton;f.totalHeight=Math.max(f.totalHeight,l);f.openHeight=f.totalHeight}});if(d){f.totalHeight-=b.gapButton}else{f.totalWidth-=b.gapButton}f.headerWidth=f.width1+b.arrowPadX;f.headerHeight=f.height1;if(c.type==="dropdown"){if(d){f.width1+=b.arrowPadX;f.totalHeight=f.height1}else{f.totalWidth=f.width1}f.totalWidth+=b.arrowPadX}e.remove();var t=f.totalWidth+c.pad.l+c.pad.r;var r=f.totalHeight+c.pad.t+c.pad.b;var a=u._fullLayout._size;f.lx=a.l+a.w*c.x;f.ly=a.t+a.h*(1-c.y);var n="left";if(y.isRightAnchor(c)){f.lx-=t;n="right"}if(y.isCenterAnchor(c)){f.lx-=t/2;n="center"}var i="top";if(y.isBottomAnchor(c)){f.ly-=r;i="bottom"}if(y.isMiddleAnchor(c)){f.ly-=r/2;i="middle"}f.totalWidth=Math.ceil(f.totalWidth);f.totalHeight=Math.ceil(f.totalHeight);f.lx=Math.round(f.lx);f.ly=Math.round(f.ly);g.autoMargin(u,I(c),{x:c.x,y:c.y,l:t*({right:1,center:.5}[n]||0),r:t*({left:1,center:.5}[n]||0),b:r*({top:1,middle:.5}[i]||0),t:r*({bottom:1,middle:.5}[i]||0)})}function I(e){return b.autoMarginIdRoot+e._index}function P(e,t,r,a){a=a||{};var n=e.select("."+b.itemRectClassName);var i=e.select("."+b.itemTextClassName);var o=t.borderwidth;var s=r.index;var l=t._dims;p.setTranslate(e,o+r.x,o+r.y);var u=["up","down"].indexOf(t.direction)!==-1;var c=a.height||(u?l.heights[s]:l.height1);n.attr({x:0,y:0,width:a.width||(u?l.width1:l.widths[s]),height:c});var f=t.font.size*x;var d=h.lineCount(i);var v=(d-1)*f/2;h.positionText(i,b.textOffsetX,c/2-v+b.textOffsetY);if(u){r.y+=l.heights[s]+r.yPad}else{r.x+=l.widths[s]+r.xPad}r.index++}function R(e,t){e.attr(b.menuIndexAttrName,t||"-1").selectAll("g."+b.dropdownButtonClassName).remove()}},{"../../constants/alignment":260,"../../lib":285,"../../lib/svg_text_utils":307,"../../plot_api/plot_template":320,"../../plots/plots":366,"../color":155,"../drawing":177,"./constants":255,"./scrollbox":259,"@plotly/d3":20}],258:[function(e,t,r){arguments[4][252][0].apply(r,arguments)},{"./attributes":254,"./constants":255,"./defaults":256,"./draw":257,dup:252}],259:[function(e,t,r){"use strict";t.exports=G;var U=e("@plotly/d3");var Y=e("../color");var V=e("../drawing");var v=e("../../lib");function G(e,t,r){this.gd=e;this.container=t;this.id=r;this.position=null;this.translateX=null;this.translateY=null;this.hbar=null;this.vbar=null;this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]);this.bg.exit().on(".drag",null).on("wheel",null).remove();this.bg.enter().append("rect").classed("scrollbox-bg",true).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}G.barWidth=2;G.barLength=20;G.barRadius=2;G.barPad=1;G.barColor="#808BA4";G.prototype.enable=function e(t,r,a){var n=this.gd._fullLayout;var i=n.width;var o=n.height;this.position=t;var s=this.position.l;var l=this.position.w;var u=this.position.t;var c=this.position.h;var f=this.position.direction;var d=f==="down";var v=f==="left";var p=f==="right";var h=f==="up";var m=l;var g=c;var y,x;var b,_;if(!d&&!v&&!p&&!h){this.position.direction="down";d=true}var w=d||h;if(w){y=s;x=y+m;if(d){b=u;_=Math.min(b+g,o);g=_-b}else{_=u+g;b=Math.max(_-g,0);g=_-b}}else{b=u;_=b+g;if(v){x=s+m;y=Math.max(x-m,0);m=x-y}else{y=s;x=Math.min(y+m,i);m=x-y}}this._box={l:y,t:b,w:m,h:g};var T=l>m;var k=G.barLength+2*G.barPad;var M=G.barWidth+2*G.barPad;var A=s;var S=u+c;if(S+M>o)S=o-M;var E=this.container.selectAll("rect.scrollbar-horizontal").data(T?[0]:[]);E.exit().on(".drag",null).remove();E.enter().append("rect").classed("scrollbar-horizontal",true).call(Y.fill,G.barColor);if(T){this.hbar=E.attr({rx:G.barRadius,ry:G.barRadius,x:A,y:S,width:k,height:M});this._hbarXMin=A+k/2;this._hbarTranslateMax=m-k}else{delete this.hbar;delete this._hbarXMin;delete this._hbarTranslateMax}var L=c>g;var C=G.barWidth+2*G.barPad;var D=G.barLength+2*G.barPad;var O=s+l;var I=u;if(O+C>i)O=i-C;var P=this.container.selectAll("rect.scrollbar-vertical").data(L?[0]:[]);P.exit().on(".drag",null).remove();P.enter().append("rect").classed("scrollbar-vertical",true).call(Y.fill,G.barColor);if(L){this.vbar=P.attr({rx:G.barRadius,ry:G.barRadius,x:O,y:I,width:C,height:D});this._vbarYMin=I+D/2;this._vbarTranslateMax=g-D}else{delete this.vbar;delete this._vbarYMin;delete this._vbarTranslateMax}var R=this.id;var N=y-.5;var z=L?x+C+.5:x+.5;var F=b-.5;var j=T?_+M+.5:_+.5;var H=n._topdefs.selectAll("#"+R).data(T||L?[0]:[]);H.exit().remove();H.enter().append("clipPath").attr("id",R).append("rect");if(T||L){this._clipRect=H.select("rect").attr({x:Math.floor(N),y:Math.floor(F),width:Math.ceil(z)-Math.floor(N),height:Math.ceil(j)-Math.floor(F)});this.container.call(V.setClipUrl,R,this.gd);this.bg.attr({x:s,y:u,width:l,height:c})}else{this.bg.attr({width:0,height:0});this.container.on("wheel",null).on(".drag",null).call(V.setClipUrl,null);delete this._clipRect}if(T||L){var B=U.behavior.drag().on("dragstart",function(){U.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(B);var q=U.behavior.drag().on("dragstart",function(){U.event.sourceEvent.preventDefault();U.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));if(T){this.hbar.on(".drag",null).call(q)}if(L){this.vbar.on(".drag",null).call(q)}}this.setTranslate(r,a)};G.prototype.disable=function e(){if(this.hbar||this.vbar){this.bg.attr({width:0,height:0});this.container.on("wheel",null).on(".drag",null).call(V.setClipUrl,null);delete this._clipRect}if(this.hbar){this.hbar.on(".drag",null);this.hbar.remove();delete this.hbar;delete this._hbarXMin;delete this._hbarTranslateMax}if(this.vbar){this.vbar.on(".drag",null);this.vbar.remove();delete this.vbar;delete this._vbarYMin;delete this._vbarTranslateMax}};G.prototype._onBoxDrag=function e(){var t=this.translateX;var r=this.translateY;if(this.hbar){t-=U.event.dx}if(this.vbar){r-=U.event.dy}this.setTranslate(t,r)};G.prototype._onBoxWheel=function e(){var t=this.translateX;var r=this.translateY;if(this.hbar){t+=U.event.deltaY}if(this.vbar){r+=U.event.deltaY}this.setTranslate(t,r)};G.prototype._onBarDrag=function e(){var t=this.translateX;var r=this.translateY;if(this.hbar){var a=t+this._hbarXMin;var n=a+this._hbarTranslateMax;var i=v.constrain(U.event.x,a,n);var o=(i-a)/(n-a);var s=this.position.w-this._box.w;t=o*s}if(this.vbar){var l=r+this._vbarYMin;var u=l+this._vbarTranslateMax;var c=v.constrain(U.event.y,l,u);var f=(c-l)/(u-l);var d=this.position.h-this._box.h;r=f*d}this.setTranslate(t,r)};G.prototype.setTranslate=function e(t,r){var a=this.position.w-this._box.w;var n=this.position.h-this._box.h;t=v.constrain(t||0,0,a);r=v.constrain(r||0,0,n);this.translateX=t;this.translateY=r;this.container.call(V.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-r);if(this._clipRect){this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+r-.5)})}if(this.hbar){var i=t/a;this.hbar.call(V.setTranslate,t+i*this._hbarTranslateMax,r)}if(this.vbar){var o=r/n;this.vbar.call(V.setTranslate,t,r+o*this._vbarTranslateMax)}}},{"../../lib":285,"../color":155,"../drawing":177,"@plotly/d3":20}],260:[function(e,t,r){"use strict";t.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],261:[function(e,t,r){"use strict";t.exports={axisRefDescription:function(e,t,r){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+r+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",r,"of the domain of the","second",e,"axis."].join(" ")}}},{}],262:[function(e,t,r){"use strict";t.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format#locale_format"}},{}],263:[function(e,t,r){"use strict";t.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],264:[function(e,t,r){"use strict";t.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],265:[function(e,t,r){"use strict";t.exports={BADNUM:undefined,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"−"}},{}],266:[function(e,t,r){"use strict";r.xmlns="http://www.w3.org/2000/xmlns/";r.svg="http://www.w3.org/2000/svg";r.xlink="http://www.w3.org/1999/xlink";r.svgAttrs={xmlns:r.svg,"xmlns:xlink":r.xlink}},{}],267:[function(e,t,r){"use strict";r.version=e("./version").version;e("native-promise-only");e("../build/plotcss");var a=e("./registry");var n=r.register=a.register;var i=e("./plot_api");var o=Object.keys(i);for(var s=0;s<o.length;s++){var l=o[s];if(l.charAt(0)!=="_")r[l]=i[l];n({moduleType:"apiMethod",name:l,fn:i[l]})}n(e("./traces/scatter"));n([e("./components/legend"),e("./components/fx"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars"),e("./components/colorscale"),e("./components/colorbar"),e("./components/modebar")]);n([e("./locale-en"),e("./locale-en-us")]);if(window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)){n(window.PlotlyLocales);delete window.PlotlyLocales}r.Icons=e("./fonts/ploticon");var u=e("./components/fx");var c=e("./plots/plots");r.Plots={resize:c.resize,graphJson:c.graphJson,sendDataToCloud:c.sendDataToCloud};r.Fx={hover:u.hover,unhover:u.unhover,loneHover:u.loneHover,loneUnhover:u.loneUnhover};r.Snapshot=e("./snapshot");r.PlotSchema=e("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":146,"./components/annotations3d":151,"./components/colorbar":161,"./components/colorscale":167,"./components/errorbars":183,"./components/fx":195,"./components/grid":199,"./components/images":204,"./components/legend":212,"./components/modebar":218,"./components/rangeselector":226,"./components/rangeslider":233,"./components/shapes":247,"./components/sliders":252,"./components/updatemenus":258,"./fonts/ploticon":268,"./locale-en":311,"./locale-en-us":310,"./plot_api":315,"./plot_api/plot_schema":319,"./plots/plots":366,"./registry":373,"./snapshot":378,"./traces/scatter":506,"./version":546,"native-promise-only":70}],268:[function(e,t,r){"use strict";t.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],269:[function(e,t,r){"use strict";r.isLeftAnchor=function e(t){return t.xanchor==="left"||t.xanchor==="auto"&&t.x<=1/3};r.isCenterAnchor=function e(t){return t.xanchor==="center"||t.xanchor==="auto"&&t.x>1/3&&t.x<2/3};r.isRightAnchor=function e(t){return t.xanchor==="right"||t.xanchor==="auto"&&t.x>=2/3};r.isTopAnchor=function e(t){return t.yanchor==="top"||t.yanchor==="auto"&&t.y>=2/3};r.isMiddleAnchor=function e(t){return t.yanchor==="middle"||t.yanchor==="auto"&&t.y>1/3&&t.y<2/3};r.isBottomAnchor=function e(t){return t.yanchor==="bottom"||t.yanchor==="auto"&&t.y<=1/3}},{}],270:[function(e,t,r){"use strict";var a=e("./mod");var o=a.mod;var n=a.modHalf;var g=Math.PI;var y=2*g;function i(e){return e/180*g}function s(e){return e/g*180}function x(e){return Math.abs(e[1]-e[0])>y-1e-14}function l(e,t){return n(t-e,y)}function u(e,t){return Math.abs(l(e,t))}function c(e,t){if(x(t))return true;var r,a;if(t[0]<t[1]){r=t[0];a=t[1]}else{r=t[1];a=t[0]}r=o(r,y);a=o(a,y);if(r>a)a+=y;var n=o(e,y);var i=n+y;return n>=r&&n<=a||i>=r&&i<=a}function f(e,t,r,a){if(!c(t,a))return false;var n,i;if(r[0]<r[1]){n=r[0];i=r[1]}else{n=r[1];i=r[0]}return e>=n&&e<=i}function d(e,t,r,a,n,i,o){n=n||0;i=i||0;var s=x([r,a]);var l,u,c;var f,d;if(s){l=0;u=g;c=y}else{if(r<a){l=r;c=a}else{l=a;c=r}}if(e<t){f=e;d=t}else{f=t;d=e}function v(e,t){return[e*Math.cos(t)+n,i-e*Math.sin(t)]}var p=Math.abs(c-l)<=g?0:1;function h(e,t,r){return"A"+[e,e]+" "+[0,p,r]+" "+v(e,t)}var m;if(s){if(f===null){m="M"+v(d,l)+h(d,u,0)+h(d,c,0)+"Z"}else{m="M"+v(f,l)+h(f,u,0)+h(f,c,0)+"Z"+"M"+v(d,l)+h(d,u,1)+h(d,c,1)+"Z"}}else{if(f===null){m="M"+v(d,l)+h(d,c,0);if(o)m+="L0,0Z"}else{m="M"+v(f,l)+"L"+v(d,l)+h(d,c,0)+"L"+v(f,c)+h(f,l,1)+"Z"}}return m}function v(e,t,r,a,n){return d(null,e,t,r,a,n,0)}function p(e,t,r,a,n){return d(null,e,t,r,a,n,1)}function h(e,t,r,a,n,i){return d(e,t,r,a,n,i,1)}t.exports={deg2rad:i,rad2deg:s,angleDelta:l,angleDist:u,isFullCircle:x,isAngleInsideSector:c,isPtInsideSector:f,pathArc:v,pathSector:p,pathAnnulus:h}},{"./mod":292}],271:[function(e,t,r){"use strict";var f=Array.isArray;var a=ArrayBuffer;var n=DataView;function i(e){return a.isView(e)&&!(e instanceof n)}r.isTypedArray=i;function o(e){return f(e)||i(e)}r.isArrayOrTypedArray=o;function s(e){return!o(e[0])}r.isArray1D=s;r.ensureArray=function(e,t){if(!f(e))e=[];e.length=t;return e};r.concat=function(){var e=[];var t=true;var r=0;var a,n,i,o,s,l,u,c;for(i=0;i<arguments.length;i++){o=arguments[i];l=o.length;if(l){if(n)e.push(o);else{n=o;s=l}if(f(o)){a=false}else{t=false;if(!r){a=o.constructor}else if(a!==o.constructor){a=false}}r+=l}}if(!r)return[];if(!e.length)return n;if(t)return n.concat.apply(n,e);if(a){u=new a(r);u.set(n);for(i=0;i<e.length;i++){o=e[i];u.set(o,s);s+=o.length}return u}u=new Array(r);for(c=0;c<n.length;c++)u[c]=n[c];for(i=0;i<e.length;i++){o=e[i];for(c=0;c<o.length;c++)u[s+c]=o[c];s+=c}return u};r.maxRowLength=function(e){return l(e,Math.max,0)};r.minRowLength=function(e){return l(e,Math.min,Infinity)};function l(e,t,r){if(o(e)){if(o(e[0])){var a=r;for(var n=0;n<e.length;n++){a=t(a,e[n].length)}return a}else{return e.length}}return 0}},{}],272:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../constants/numerical").BADNUM;var i=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;t.exports=function e(t){if(typeof t==="string"){t=t.replace(i,"")}if(a(t))return Number(t);return n}},{"../constants/numerical":265,"fast-isnumeric":31}],273:[function(e,t,r){"use strict";t.exports=function e(t){var r=t._fullLayout;if(r._glcanvas&&r._glcanvas.size()){r._glcanvas.each(function(e){if(e.regl)e.regl.clear({color:true,depth:true})})}}},{}],274:[function(e,t,r){"use strict";t.exports=function e(t){if(t._responsiveChartHandler){window.removeEventListener("resize",t._responsiveChartHandler);delete t._responsiveChartHandler}}},{}],275:[function(e,t,y){"use strict";var n=e("fast-isnumeric");var i=e("tinycolor2");var l=e("../plots/attributes");var a=e("../components/colorscale/scales");var u=e("../components/color");var o=e("../constants/interactions").DESELECTDIM;var d=e("./nested_property");var s=e("./regex").counter;var c=e("./mod").modHalf;var v=e("./array").isArrayOrTypedArray;y.valObjectMeta={data_array:{coerceFunction:function(e,t,r){if(v(e))t.set(e);else if(r!==undefined)t.set(r)}},enumerated:{coerceFunction:function(e,t,r,a){if(a.coerceNumber)e=+e;if(a.values.indexOf(e)===-1)t.set(r);else t.set(e)},validateFunction:function(e,t){if(t.coerceNumber)e=+e;var r=t.values;for(var a=0;a<r.length;a++){var n=String(r[a]);if(n.charAt(0)==="/"&&n.charAt(n.length-1)==="/"){var i=new RegExp(n.substr(1,n.length-2));if(i.test(e))return true}else if(e===r[a])return true}return false}},boolean:{coerceFunction:function(e,t,r){if(e===true||e===false)t.set(e);else t.set(r)}},number:{coerceFunction:function(e,t,r,a){if(!n(e)||a.min!==undefined&&e<a.min||a.max!==undefined&&e>a.max){t.set(r)}else t.set(+e)}},integer:{coerceFunction:function(e,t,r,a){if(e%1||!n(e)||a.min!==undefined&&e<a.min||a.max!==undefined&&e>a.max){t.set(r)}else t.set(+e)}},string:{coerceFunction:function(e,t,r,a){if(typeof e!=="string"){var n=typeof e==="number";if(a.strict===true||!n)t.set(r);else t.set(String(e))}else if(a.noBlank&&!e)t.set(r);else t.set(e)}},color:{coerceFunction:function(e,t,r){if(i(e).isValid())t.set(e);else t.set(r)}},colorlist:{coerceFunction:function(e,t,r){function a(e){return i(e).isValid()}if(!Array.isArray(e)||!e.length)t.set(r);else if(e.every(a))t.set(e);else t.set(r)}},colorscale:{coerceFunction:function(e,t,r){t.set(a.get(e,r))}},angle:{coerceFunction:function(e,t,r){if(e==="auto")t.set("auto");else if(!n(e))t.set(r);else t.set(c(+e,360))}},subplotid:{coerceFunction:function(e,t,r,a){var n=a.regex||s(r);if(typeof e==="string"&&n.test(e)){t.set(e);return}t.set(r)},validateFunction:function(e,t){var r=t.dflt;if(e===r)return true;if(typeof e!=="string")return false;if(s(r).test(e))return true;return false}},flaglist:{coerceFunction:function(e,t,r,a){if(typeof e!=="string"){t.set(r);return}if((a.extras||[]).indexOf(e)!==-1){t.set(e);return}var n=e.split("+");var i=0;while(i<n.length){var o=n[i];if(a.flags.indexOf(o)===-1||n.indexOf(o)<i){n.splice(i,1)}else i++}if(!n.length)t.set(r);else t.set(n.join("+"))}},any:{coerceFunction:function(e,t,r){if(e===undefined)t.set(r);else t.set(e)}},info_array:{coerceFunction:function(e,t,r,a){function n(e,t,r){var a;var n={set:function(e){a=e}};if(r===undefined)r=t.dflt;y.valObjectMeta[t.valType].coerceFunction(e,n,r,t);return a}var i=a.dimensions===2||a.dimensions==="1-2"&&Array.isArray(e)&&Array.isArray(e[0]);if(!Array.isArray(e)){t.set(r);return}var o=a.items;var s=[];var l=Array.isArray(o);var u=l&&i&&Array.isArray(o[0]);var c=i&&l&&!u;var f=l&&!c?o.length:e.length;var d,v,p,h,m,g;r=Array.isArray(r)?r:[];if(i){for(d=0;d<f;d++){s[d]=[];p=Array.isArray(e[d])?e[d]:[];if(c)m=o.length;else if(l)m=o[d].length;else m=p.length;for(v=0;v<m;v++){if(c)h=o[v];else if(l)h=o[d][v];else h=o;g=n(p[v],h,(r[d]||[])[v]);if(g!==undefined)s[d][v]=g}}}else{for(d=0;d<f;d++){g=n(e[d],l?o[d]:o,r[d]);if(g!==undefined)s[d]=g}}t.set(s)},validateFunction:function(e,t){if(!Array.isArray(e))return false;var r=t.items;var a=Array.isArray(r);var n=t.dimensions===2;if(!t.freeLength&&e.length!==r.length)return false;for(var i=0;i<e.length;i++){if(n){if(!Array.isArray(e[i])||!t.freeLength&&e[i].length!==r[i].length){return false}for(var o=0;o<e[i].length;o++){if(!p(e[i][o],a?r[i][o]:r)){return false}}}else if(!p(e[i],a?r[i]:r))return false}return true}}};y.coerce=function(e,t,r,a,n){var i=d(r,a).get();var o=d(e,a);var s=d(t,a);var l=o.get();var u=t._template;if(l===undefined&&u){l=d(u,a).get();u=0}if(n===undefined)n=i.dflt;if(i.arrayOk&&v(l)){s.set(l);return l}var c=y.valObjectMeta[i.valType].coerceFunction;c(l,s,n,i);var f=s.get();if(u&&f===n&&!p(l,i)){l=d(u,a).get();c(l,s,n,i);f=s.get()}return f};y.coerce2=function(e,t,r,a,n){var i=d(e,a);var o=y.coerce(e,t,r,a,n);var s=i.get();return s!==undefined&&s!==null?o:false};y.coerceFont=function(e,t,r){var a={};r=r||{};a.family=e(t+".family",r.family);a.size=e(t+".size",r.size);a.color=e(t+".color",r.color);return a};y.coercePattern=function(e,t,r,a){var n=e(t+".shape");if(n){e(t+".solidity");e(t+".size");var i=e(t+".fillmode");var o=i==="overlay";if(!a){var s=e(t+".bgcolor",o?r:undefined);e(t+".fgcolor",o?u.contrast(s):r)}e(t+".fgopacity",o?.5:1)}};y.coerceHoverinfo=function(e,t,r){var a=t._module.attributes;var n=a.hoverinfo?a:l;var i=n.hoverinfo;var o;if(r._dataLength===1){var s=i.dflt==="all"?i.flags.slice():i.dflt.split("+");s.splice(s.indexOf("name"),1);o=s.join("+")}return y.coerce(e,t,n,"hoverinfo",o)};y.coerceSelectionMarkerOpacity=function(e,t){if(!e.marker)return;var r=e.marker.opacity;if(r===undefined)return;var a;var n;if(!v(r)&&!e.selected&&!e.unselected){a=r;n=o*r}t("selected.marker.opacity",a);t("unselected.marker.opacity",n)};function p(e,t){var r=y.valObjectMeta[t.valType];if(t.arrayOk&&v(e))return true;if(r.validateFunction){return r.validateFunction(e,t)}var a={};var n=a;var i={set:function(e){n=e}};r.coerceFunction(e,i,a,t);return n!==a}y.validate=p},{"../components/color":155,"../components/colorscale/scales":170,"../constants/interactions":264,"../plots/attributes":327,"./array":271,"./mod":292,"./nested_property":293,"./regex":301,"fast-isnumeric":31,tinycolor2:119}],276:[function(e,t,x){"use strict";var l=e("d3-time-format").timeFormat;var f=e("fast-isnumeric");var u=e("./loggers");var b=e("./mod").mod;var r=e("../constants/numerical");var _=r.BADNUM;var w=r.ONEDAY;var T=r.ONEHOUR;var k=r.ONEMIN;var M=r.ONESEC;var A=r.EPOCHJD;var S=e("../registry");var v=e("d3-time-format").utcFormat;var E=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m;var L=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m;var C=(new Date).getFullYear()-70;function D(e){return e&&S.componentsRegistry.calendars&&typeof e==="string"&&e!=="gregorian"}x.dateTick0=function(e,t){var r=n(e,!!t);if(t<2)return r;var a=x.dateTime2ms(r,e);a+=w*(t-1);return x.ms2DateTime(a,0,e)};function n(e,t){if(D(e)){return t?S.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:S.getComponentMethod("calendars","CANONICAL_TICK")[e]}else{return t?"2000-01-02":"2000-01-01"}}x.dfltRange=function(e){if(D(e)){return S.getComponentMethod("calendars","DFLTRANGE")[e]}else{return["2000-01-01","2001-01-01"]}};x.isJSDate=function(e){return typeof e==="object"&&e!==null&&typeof e.getTime==="function"};var O,I;x.dateTime2ms=function(e,t){if(x.isJSDate(e)){var r=e.getTimezoneOffset()*k;var a=(e.getUTCMinutes()-e.getMinutes())*k+(e.getUTCSeconds()-e.getSeconds())*M+(e.getUTCMilliseconds()-e.getMilliseconds());if(a){var n=3*k;r=r-n/2+b(a-r+n/2,n)}e=Number(e)-r;if(e>=O&&e<=I)return e;return _}if(typeof e!=="string"&&typeof e!=="number")return _;e=String(e);var i=D(t);var o=e.charAt(0);if(i&&(o==="G"||o==="g")){e=e.substr(1);t=""}var s=i&&t.substr(0,7)==="chinese";var l=e.match(s?L:E);if(!l)return _;var u=l[1];var c=l[3]||"1";var f=Number(l[5]||1);var d=Number(l[7]||0);var v=Number(l[9]||0);var p=Number(l[11]||0);if(i){if(u.length===2)return _;u=Number(u);var h;try{var m=S.getComponentMethod("calendars","getCal")(t);if(s){var g=c.charAt(c.length-1)==="i";c=parseInt(c,10);h=m.newDate(u,m.toMonthIndex(u,c,g),f)}else{h=m.newDate(u,Number(c),f)}}catch(e){return _}if(!h)return _;return(h.toJD()-A)*w+d*T+v*k+p*M}if(u.length===2){u=(Number(u)+2e3-C)%100+C}else u=Number(u);c-=1;var y=new Date(Date.UTC(2e3,c,f,d,v));y.setUTCFullYear(u);if(y.getUTCMonth()!==c)return _;if(y.getUTCDate()!==f)return _;return y.getTime()+p*M};O=x.MIN_MS=x.dateTime2ms("-9999");I=x.MAX_MS=x.dateTime2ms("9999-12-31 23:59:59.9999");x.isDateTime=function(e,t){return x.dateTime2ms(e,t)!==_};function o(e,t){return String(e+Math.pow(10,t)).substr(1)}var p=90*w;var h=3*T;var m=5*k;x.ms2DateTime=function(e,t,r){if(typeof e!=="number"||!(e>=O&&e<=I))return _;if(!t)t=0;var a=Math.floor(b(e+.05,1)*10);var n=Math.round(e-a/10);var i,o,s,l,u,c;if(D(r)){var f=Math.floor(n/w)+A;var d=Math.floor(b(e,w));try{i=S.getComponentMethod("calendars","getCal")(r).fromJD(f).formatDate("yyyy-mm-dd")}catch(e){i=v("G%Y-%m-%d")(new Date(n))}if(i.charAt(0)==="-"){while(i.length<11)i="-0"+i.substr(1)}else{while(i.length<10)i="0"+i}o=t<p?Math.floor(d/T):0;s=t<p?Math.floor(d%T/k):0;l=t<h?Math.floor(d%k/M):0;u=t<m?d%M*10+a:0}else{c=new Date(n);i=v("%Y-%m-%d")(c);o=t<p?c.getUTCHours():0;s=t<p?c.getUTCMinutes():0;l=t<h?c.getUTCSeconds():0;u=t<m?c.getUTCMilliseconds()*10+a:0}return g(i,o,s,l,u)};x.ms2DateTimeLocal=function(e){if(!(e>=O+w&&e<=I-w))return _;var t=Math.floor(b(e+.05,1)*10);var r=new Date(Math.round(e-t/10));var a=l("%Y-%m-%d")(r);var n=r.getHours();var i=r.getMinutes();var o=r.getSeconds();var s=r.getUTCMilliseconds()*10+t;return g(a,n,i,o,s)};function g(e,t,r,a,n){if(t||r||a||n){e+=" "+o(t,2)+":"+o(r,2);if(a||n){e+=":"+o(a,2);if(n){var i=4;while(n%10===0){i-=1;n/=10}e+="."+o(n,i)}}}return e}x.cleanDate=function(e,t,r){if(e===_)return t;if(x.isJSDate(e)||typeof e==="number"&&isFinite(e)){if(D(r)){u.error("JS Dates and milliseconds are incompatible with world calendars",e);return t}e=x.ms2DateTimeLocal(+e);if(!e&&t!==undefined)return t}else if(!x.isDateTime(e,r)){u.error("unrecognized date",e);return t}return e};var i=/%\d?f/g;var s=/%h/g;var c={1:"1",2:"1",3:"2",4:"2"};function d(e,a,t,r){e=e.replace(i,function(e){var t=Math.min(+e.charAt(1)||6,6);var r=(a/1e3%1+2).toFixed(t).substr(2).replace(/0+$/,"")||"0";return r});var n=new Date(Math.floor(a+.05));e=e.replace(s,function(){return c[t("%q")(n)]});if(D(r)){try{e=S.getComponentMethod("calendars","worldCalFmt")(e,a,r)}catch(e){return"Invalid"}}return t(e)(n)}var y=[59,59.9,59.99,59.999,59.9999];function P(e,t){var r=b(e+.05,w);var a=o(Math.floor(r/T),2)+":"+o(b(Math.floor(r/k),60),2);if(t!=="M"){if(!f(t))t=0;var n=Math.min(b(e/M,60),y[t]);var i=(100+n).toFixed(t).substr(1);if(t>0){i=i.replace(/0+$/,"").replace(/[\.]$/,"")}a+=":"+i}return a}x.formatDate=function(e,t,r,a,n,i){n=D(n)&&n;if(!t){if(r==="y")t=i.year;else if(r==="m")t=i.month;else if(r==="d"){t=i.dayMonth+"\n"+i.year}else{return P(e,r)+"\n"+d(i.dayMonthYear,e,a,n)}}return d(t,e,a,n)};var R=3*w;x.incrementMonth=function(t,e,r){r=D(r)&&r;var a=b(t,w);t=Math.round(t-a);if(r){try{var n=Math.round(t/w)+A;var i=S.getComponentMethod("calendars","getCal")(r);var o=i.fromJD(n);if(e%12)i.add(o,e,"m");else i.add(o,e/12,"y");return(o.toJD()-A)*w+a}catch(e){u.error("invalid ms "+t+" in calendar "+r)}}var s=new Date(t+R);return s.setUTCMonth(s.getUTCMonth()+e)+a-R};x.findExactDates=function(e,t){var r=0;var a=0;var n=0;var i=0;var o;var s;var l=D(t)&&S.getComponentMethod("calendars","getCal")(t);for(var u=0;u<e.length;u++){s=e[u];if(!f(s)){i++;continue}if(s%w)continue;if(l){try{o=l.fromJD(s/w+A);if(o.day()===1){if(o.month()===1)r++;else a++}else n++}catch(e){}}else{o=new Date(s);if(o.getUTCDate()===1){if(o.getUTCMonth()===0)r++;else a++}else n++}}a+=r;n+=a;var c=e.length-i;return{exactYears:r/c,exactMonths:a/c,exactDays:n/c}}},{"../constants/numerical":265,"../registry":373,"./loggers":289,"./mod":292,"d3-time-format":29,"fast-isnumeric":31}],277:[function(e,t,r){"use strict";var a=e("@plotly/d3");var o=e("./loggers");var n=e("./matrix");var i=e("gl-mat4");function s(e){var t;if(typeof e==="string"){t=document.getElementById(e);if(t===null){throw new Error("No DOM element with id '"+e+"' exists on the page.")}return t}else if(e===null||e===undefined){throw new Error("DOM element provided is null or undefined")}return e}function l(e){var t=a.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")}function u(e){var t=e&&e.parentNode;if(t)t.removeChild(e)}function c(e,t){f("global",e,t)}function f(e,t,r){var a="plotly.js-style-"+e;var n=document.getElementById(a);if(!n){n=document.createElement("style");n.setAttribute("id",a);n.appendChild(document.createTextNode(""));document.head.appendChild(n)}var i=n.sheet;if(i.insertRule){i.insertRule(t+"{"+r+"}",0)}else if(i.addRule){i.addRule(t,r,0)}else o.warn("addStyleRule failed")}function d(e){var t="plotly.js-style-"+e;var r=document.getElementById(t);if(r)u(r)}function v(e){var t=h(e);var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];t.forEach(function(e){var t=p(e);if(t){var r=n.convertCssMatrix(t);a=i.multiply(a,a,r)}});return a}function p(e){var t=window.getComputedStyle(e,null);var r=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");if(r==="none")return null;return r.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(e){return+e})}function h(e){var t=[];while(m(e)){t.push(e);e=e.parentNode}return t}function m(e){return e&&(e instanceof Element||e instanceof HTMLElement)}function g(e,t){return e&&t&&e.x===t.x&&e.y===t.y&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}t.exports={getGraphDiv:s,isPlotDiv:l,removeElement:u,addStyleRule:c,addRelatedStyleRule:f,deleteRelatedStyleRule:d,getFullTransformMatrix:v,getElementTransformMatrix:p,getElementAndAncestors:h,equalDomRects:g}},{"./loggers":289,"./matrix":291,"@plotly/d3":20,"gl-mat4":47}],278:[function(e,t,r){"use strict";var i=e("events").EventEmitter;var a={init:function(r){if(r._ev instanceof i)return r;var a=new i;var n=new i;r._ev=a;r._internalEv=n;r.on=a.on.bind(a);r.once=a.once.bind(a);r.removeListener=a.removeListener.bind(a);r.removeAllListeners=a.removeAllListeners.bind(a);r._internalOn=n.on.bind(n);r._internalOnce=n.once.bind(n);r._removeInternalListener=n.removeListener.bind(n);r._removeAllInternalListeners=n.removeAllListeners.bind(n);r.emit=function(e,t){if(typeof jQuery!=="undefined"){jQuery(r).trigger(e,t)}a.emit(e,t);n.emit(e,t)};return r},triggerHandler:function(e,t,r){var a;var n;if(typeof jQuery!=="undefined"){a=jQuery(e).triggerHandler(t,r)}var i=e._ev;if(!i)return a;var o=i._events[t];if(!o)return a;function s(e){if(e.listener){i.removeListener(t,e.listener);if(!e.fired){e.fired=true;return e.listener.apply(i,[r])}}else{return e.apply(i,[r])}}o=Array.isArray(o)?o:[o];var l;for(l=0;l<o.length-1;l++){s(o[l])}n=s(o[l]);return a!==undefined?a:n},purge:function(e){delete e._ev;delete e.on;delete e.once;delete e.removeListener;delete e.removeAllListeners;delete e.emit;delete e._ev;delete e._internalEv;delete e._internalOn;delete e._internalOnce;delete e._removeInternalListener;delete e._removeAllInternalListeners;return e}};t.exports=a},{events:27}],279:[function(e,t,r){"use strict";var p=e("./is_plain_object.js");var h=Array.isArray;function m(e,t){var r,a;for(r=0;r<e.length;r++){a=e[r];if(a!==null&&typeof a==="object"){return false}if(a!==void 0){t[r]=a}}return true}r.extendFlat=function(){return g(arguments,false,false,false)};r.extendDeep=function(){return g(arguments,true,false,false)};r.extendDeepAll=function(){return g(arguments,true,true,false)};r.extendDeepNoArrays=function(){return g(arguments,true,false,true)};function g(e,t,r,a){var n=e[0];var i=e.length;var o,s,l,u,c,f,d;if(i===2&&h(n)&&h(e[1])&&n.length===0){d=m(e[1],n);if(d){return n}else{n.splice(0,n.length)}}for(var v=1;v<i;v++){o=e[v];for(s in o){l=n[s];u=o[s];if(a&&h(u)){n[s]=u}else if(t&&u&&(p(u)||(c=h(u)))){if(c){c=false;f=l&&h(l)?l:[]}else{f=l&&p(l)?l:{}}n[s]=g([f,u],t,r,a)}else if(typeof u!=="undefined"||r){n[s]=u}}}return n}},{"./is_plain_object.js":286}],280:[function(e,t,r){"use strict";t.exports=function e(t){var r={};var a=[];var n=0;for(var i=0;i<t.length;i++){var o=t[i];if(r[o]!==1){r[o]=1;a[n++]=o}}return a}},{}],281:[function(e,t,r){"use strict";t.exports=function e(t){var r=l(t)?s:o;var a=[];for(var n=0;n<t.length;n++){var i=t[n];if(r(i))a.push(i)}return a};function o(e){return e.visible===true}function s(e){var t=e[0].trace;return t.visible===true&&t._length!==0}function l(e){return Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace}},{}],282:[function(e,t,r){"use strict";var d=e("./mod").mod;r.segmentsIntersect=m;function m(e,t,r,a,n,i,o,s){var l=r-e;var u=n-e;var c=o-n;var f=a-t;var d=i-t;var v=s-i;var p=l*v-c*f;if(p===0)return null;var h=(u*v-c*d)/p;var m=(u*f-l*d)/p;if(m<0||m>1||h<0||h>1)return null;return{x:e+l*h,y:t+f*h}}r.segmentDistance=function e(t,r,a,n,i,o,s,l){if(m(t,r,a,n,i,o,s,l))return 0;var u=a-t;var c=n-r;var f=s-i;var d=l-o;var v=u*u+c*c;var p=f*f+d*d;var h=Math.min(g(u,c,v,i-t,o-r),g(u,c,v,s-t,l-r),g(f,d,p,t-i,r-o),g(f,d,p,a-i,n-o));return Math.sqrt(h)};function g(e,t,r,a,n){var i=a*e+n*t;if(i<0){return a*a+n*n}else if(i>r){var o=a-e;var s=n-t;return o*o+s*s}else{var l=a*t-n*e;return l*l/r}}var v,p,h;r.getTextLocation=function e(t,r,a,n){if(t!==p||n!==h){v={};p=t;h=n}if(v[a]){return v[a]}var i=t.getPointAtLength(d(a-n/2,r));var o=t.getPointAtLength(d(a+n/2,r));var s=Math.atan((o.y-i.y)/(o.x-i.x));var l=t.getPointAtLength(d(a,r));var u=(l.x*4+i.x+o.x)/6;var c=(l.y*4+i.y+o.y)/6;var f={x:u,y:c,theta:s};v[a]=f;return f};r.clearLocationCache=function(){p=null};r.getVisibleSegment=function e(n,t,r){var i=t.left;var o=t.right;var s=t.top;var l=t.bottom;var a=0;var u=n.getTotalLength();var c=u;var f,d;function v(e){var t=n.getPointAtLength(e);if(e===0)f=t;else if(e===u)d=t;var r=t.x<i?i-t.x:t.x>o?t.x-o:0;var a=t.y<s?s-t.y:t.y>l?t.y-l:0;return Math.sqrt(r*r+a*a)}var p=v(a);while(p){a+=p+r;if(a>c)return;p=v(a)}p=v(c);while(p){c-=p+r;if(a>c)return;p=v(c)}return{min:a,max:c,len:c-a,total:u,isClosed:a===0&&c===u&&Math.abs(f.x-d.x)<.1&&Math.abs(f.y-d.y)<.1}};r.findPointOnPath=function e(t,r,a,n){n=n||{};var i=n.pathLength||t.getTotalLength();var o=n.tolerance||.001;var s=n.iterationLimit||30;var l=t.getPointAtLength(0)[a]>t.getPointAtLength(i)[a]?-1:1;var u=0;var c=0;var f=i;var d;var v;var p;while(u<s){d=(c+f)/2;v=t.getPointAtLength(d);p=v[a]-r;if(Math.abs(p)<o){return v}else{if(l*p>0){f=d}else{c=d}u++}}return v}},{"./mod":292}],283:[function(e,t,r){"use strict";t.exports=function e(t){return t}},{}],284:[function(e,t,r){"use strict";t.exports=function e(t,r){if(!r)return t;var a=1/Math.abs(r);var n=a>1?(a*t+a*r)/a:t+r;var i=String(n).length;if(i>16){var o=String(r).length;var s=String(t).length;if(i>=s+o){var l=parseFloat(n).toPrecision(12);if(l.indexOf("e+")===-1)n=+l}}return n}},{}],285:[function(e,t,r){"use strict";var b=e("@plotly/d3");var _=e("d3-time-format").utcFormat;var a=e("fast-isnumeric");var n=e("../constants/numerical");var i=n.FP_SAFE;var o=-i;var s=n.BADNUM;var w=t.exports={};w.nestedProperty=e("./nested_property");w.keyedContainer=e("./keyed_container");w.relativeAttr=e("./relative_attr");w.isPlainObject=e("./is_plain_object");w.toLogRange=e("./to_log_range");w.relinkPrivateKeys=e("./relink_private");var l=e("./array");w.isTypedArray=l.isTypedArray;w.isArrayOrTypedArray=l.isArrayOrTypedArray;w.isArray1D=l.isArray1D;w.ensureArray=l.ensureArray;w.concat=l.concat;w.maxRowLength=l.maxRowLength;w.minRowLength=l.minRowLength;var u=e("./mod");w.mod=u.mod;w.modHalf=u.modHalf;var c=e("./coerce");w.valObjectMeta=c.valObjectMeta;w.coerce=c.coerce;w.coerce2=c.coerce2;w.coerceFont=c.coerceFont;w.coercePattern=c.coercePattern;w.coerceHoverinfo=c.coerceHoverinfo;w.coerceSelectionMarkerOpacity=c.coerceSelectionMarkerOpacity;w.validate=c.validate;var f=e("./dates");w.dateTime2ms=f.dateTime2ms;w.isDateTime=f.isDateTime;w.ms2DateTime=f.ms2DateTime;w.ms2DateTimeLocal=f.ms2DateTimeLocal;w.cleanDate=f.cleanDate;w.isJSDate=f.isJSDate;w.formatDate=f.formatDate;w.incrementMonth=f.incrementMonth;w.dateTick0=f.dateTick0;w.dfltRange=f.dfltRange;w.findExactDates=f.findExactDates;w.MIN_MS=f.MIN_MS;w.MAX_MS=f.MAX_MS;var d=e("./search");w.findBin=d.findBin;w.sorterAsc=d.sorterAsc;w.sorterDes=d.sorterDes;w.distinctVals=d.distinctVals;w.roundUp=d.roundUp;w.sort=d.sort;w.findIndexOfMin=d.findIndexOfMin;var v=e("./stats");w.aggNums=v.aggNums;w.len=v.len;w.mean=v.mean;w.median=v.median;w.midRange=v.midRange;w.variance=v.variance;w.stdev=v.stdev;w.interp=v.interp;var p=e("./matrix");w.init2dArray=p.init2dArray;w.transposeRagged=p.transposeRagged;w.dot=p.dot;w.translationMatrix=p.translationMatrix;w.rotationMatrix=p.rotationMatrix;w.rotationXYMatrix=p.rotationXYMatrix;w.apply3DTransform=p.apply3DTransform;w.apply2DTransform=p.apply2DTransform;w.apply2DTransform2=p.apply2DTransform2;w.convertCssMatrix=p.convertCssMatrix;w.inverseTransformMatrix=p.inverseTransformMatrix;var h=e("./angles");w.deg2rad=h.deg2rad;w.rad2deg=h.rad2deg;w.angleDelta=h.angleDelta;w.angleDist=h.angleDist;w.isFullCircle=h.isFullCircle;w.isAngleInsideSector=h.isAngleInsideSector;w.isPtInsideSector=h.isPtInsideSector;w.pathArc=h.pathArc;w.pathSector=h.pathSector;w.pathAnnulus=h.pathAnnulus;var m=e("./anchor_utils");w.isLeftAnchor=m.isLeftAnchor;w.isCenterAnchor=m.isCenterAnchor;w.isRightAnchor=m.isRightAnchor;w.isTopAnchor=m.isTopAnchor;w.isMiddleAnchor=m.isMiddleAnchor;w.isBottomAnchor=m.isBottomAnchor;var g=e("./geometry2d");w.segmentsIntersect=g.segmentsIntersect;w.segmentDistance=g.segmentDistance;w.getTextLocation=g.getTextLocation;w.clearLocationCache=g.clearLocationCache;w.getVisibleSegment=g.getVisibleSegment;w.findPointOnPath=g.findPointOnPath;var y=e("./extend");w.extendFlat=y.extendFlat;w.extendDeep=y.extendDeep;w.extendDeepAll=y.extendDeepAll;w.extendDeepNoArrays=y.extendDeepNoArrays;var x=e("./loggers");w.log=x.log;w.warn=x.warn;w.error=x.error;var T=e("./regex");w.counterRegex=T.counter;var k=e("./throttle");w.throttle=k.throttle;w.throttleDone=k.done;w.clearThrottle=k.clear;var M=e("./dom");w.getGraphDiv=M.getGraphDiv;w.isPlotDiv=M.isPlotDiv;w.removeElement=M.removeElement;w.addStyleRule=M.addStyleRule;w.addRelatedStyleRule=M.addRelatedStyleRule;w.deleteRelatedStyleRule=M.deleteRelatedStyleRule;w.getFullTransformMatrix=M.getFullTransformMatrix;w.getElementTransformMatrix=M.getElementTransformMatrix;w.getElementAndAncestors=M.getElementAndAncestors;w.equalDomRects=M.equalDomRects;w.clearResponsive=e("./clear_responsive");w.preserveDrawingBuffer=e("./preserve_drawing_buffer");w.makeTraceGroups=e("./make_trace_groups");w._=e("./localize");w.notifier=e("./notifier");w.filterUnique=e("./filter_unique");w.filterVisible=e("./filter_visible");w.pushUnique=e("./push_unique");w.increment=e("./increment");w.cleanNumber=e("./clean_number");w.ensureNumber=function e(t){if(!a(t))return s;t=Number(t);return t>i||t<o?s:t};w.isIndex=function(e,t){if(t!==undefined&&e>=t)return false;return a(e)&&e>=0&&e%1===0};w.noop=e("./noop");w.identity=e("./identity");w.repeat=function(e,t){var r=new Array(t);for(var a=0;a<t;a++){r[a]=e}return r};w.swapAttrs=function(e,t,r,a){if(!r)r="x";if(!a)a="y";for(var n=0;n<t.length;n++){var i=t[n];var o=w.nestedProperty(e,i.replace("?",r));var s=w.nestedProperty(e,i.replace("?",a));var l=o.get();o.set(s.get());s.set(l)}};w.raiseToTop=function e(t){t.parentNode.appendChild(t)};w.cancelTransition=function(e){return e.transition().duration(0)};w.constrain=function(e,t,r){if(t>r)return Math.max(r,Math.min(t,e));return Math.max(t,Math.min(r,e))};w.bBoxIntersect=function(e,t,r){r=r||0;return e.left<=t.right+r&&t.left<=e.right+r&&e.top<=t.bottom+r&&t.top<=e.bottom+r};w.simpleMap=function(e,t,r,a,n){var i=e.length;var o=new Array(i);for(var s=0;s<i;s++)o[s]=t(e[s],r,a,n);return o};w.randstr=function e(t,r,a,n){if(!a)a=16;if(r===undefined)r=24;if(r<=0)return"0";var i=Math.log(Math.pow(2,r))/Math.log(a);var o="";var s,l,u;for(s=2;i===Infinity;s*=2){i=Math.log(Math.pow(2,r/s))/Math.log(a)*s}var c=i-Math.floor(i);for(s=0;s<Math.floor(i);s++){u=Math.floor(Math.random()*a).toString(a);o=u+o}if(c){l=Math.pow(a,c);u=Math.floor(Math.random()*l).toString(a);o=u+o}var f=parseInt(o,a);if(t&&t[o]||f!==Infinity&&f>=Math.pow(2,r)){if(n>10){w.warn("randstr failed uniqueness");return o}return e(t,r,a,(n||0)+1)}else return o};w.OptionControl=function(t,r){if(!t)t={};if(!r)r="opt";var a={};a.optionList=[];a._newoption=function(e){e[r]=t;a[e.name]=e;a.optionList.push(e)};a["_"+r]=t;return a};w.smooth=function(e,t){t=Math.round(t)||0;if(t<2)return e;var r=e.length;var a=2*r;var n=2*t-1;var i=new Array(n);var o=new Array(r);var s;var l;var u;var c;for(s=0;s<n;s++){i[s]=(1-Math.cos(Math.PI*(s+1)/t))/(2*t)}for(s=0;s<r;s++){c=0;for(l=0;l<n;l++){u=s+l+1-t;if(u<-r)u-=a*Math.round(u/a);else if(u>=a)u-=a*Math.floor(u/a);if(u<0)u=-1-u;else if(u>=r)u=a-1-u;c+=e[u]*i[l]}o[s]=c}return o};w.syncOrAsync=function(e,t,r){var a,n;function i(){return w.syncOrAsync(e,t,r)}while(e.length){n=e.splice(0,1)[0];a=n(t);if(a&&a.then){return a.then(i).then(undefined,w.promiseError)}}return r&&r(t)};w.stripTrailingSlash=function(e){if(e.substr(-1)==="/")return e.substr(0,e.length-1);return e};w.noneOrAll=function(e,t,r){if(!e)return;var a=false;var n=true;var i;var o;for(i=0;i<r.length;i++){o=e[r[i]];if(o!==undefined&&o!==null)a=true;else n=false}if(a&&!n){for(i=0;i<r.length;i++){e[r[i]]=t[r[i]]}}};w.mergeArray=function(e,t,r,a){var n=typeof a==="function";if(w.isArrayOrTypedArray(e)){var i=Math.min(e.length,t.length);for(var o=0;o<i;o++){var s=e[o];t[o][r]=n?a(s):s}}};w.mergeArrayCastPositive=function(e,t,r){return w.mergeArray(e,t,r,function(e){var t=+e;return!isFinite(t)?0:t>0?t:0})};w.fillArray=function(e,t,r,a){a=a||w.identity;if(w.isArrayOrTypedArray(e)){for(var n=0;n<t.length;n++){t[n][r]=a(e[n])}}};w.castOption=function(e,t,r,a){a=a||w.identity;var n=w.nestedProperty(e,r).get();if(w.isArrayOrTypedArray(n)){if(Array.isArray(t)&&w.isArrayOrTypedArray(n[t[0]])){return a(n[t[0]][t[1]])}else{return a(n[t])}}else{return n}};w.extractOption=function(e,t,r,a){if(r in e)return e[r];var n=w.nestedProperty(t,a).get();if(!Array.isArray(n))return n};function A(e){var t={};for(var r in e){var a=e[r];for(var n=0;n<a.length;n++){t[a[n]]=+r}}return t}w.tagSelected=function(t,e,r){var a=e.selectedpoints;var n=e._indexToPoints;var i;if(n){i=A(n)}function o(e){return e!==undefined&&e<t.length}for(var s=0;s<a.length;s++){var l=a[s];if(w.isIndex(l)||w.isArrayOrTypedArray(l)&&w.isIndex(l[0])&&w.isIndex(l[1])){var u=i?i[l]:l;var c=r?r[u]:u;if(o(c)){t[c].selected=1}}}};w.selIndices2selPoints=function(e){var t=e.selectedpoints;var r=e._indexToPoints;if(r){var a=A(r);var n=[];for(var i=0;i<t.length;i++){var o=t[i];if(w.isIndex(o)){var s=a[o];if(w.isIndex(s)){n.push(s)}}}return n}else{return t}};w.getTargetArray=function(e,t){var r=t.target;if(typeof r==="string"&&r){var a=w.nestedProperty(e,r).get();return Array.isArray(a)?a:false}else if(Array.isArray(r)){return r}return false};w.minExtend=function(e,t){var r={};if(typeof t!=="object")t={};var a=3;var n=Object.keys(e);var i,o,s;for(i=0;i<n.length;i++){o=n[i];s=e[o];if(o.charAt(0)==="_"||typeof s==="function")continue;else if(o==="module")r[o]=s;else if(Array.isArray(s)){if(o==="colorscale"){r[o]=s.slice()}else{r[o]=s.slice(0,a)}}else if(w.isTypedArray(s)){r[o]=s.subarray(0,a)}else if(s&&typeof s==="object")r[o]=w.minExtend(e[o],t[o]);else r[o]=s}n=Object.keys(t);for(i=0;i<n.length;i++){o=n[i];s=t[o];if(typeof s!=="object"||!(o in r)||typeof r[o]!=="object"){r[o]=s}}return r};w.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)};w.containsAny=function(e,t){for(var r=0;r<t.length;r++){if(e.indexOf(t[r])!==-1)return true}return false};w.isIE=function(){return typeof window.navigator.msSaveBlob!=="undefined"};var S=/Version\/[\d\.]+.*Safari/;w.isSafari=function(){return S.test(window.navigator.userAgent)};var E=/iPad|iPhone|iPod/;w.isIOS=function(){return E.test(window.navigator.userAgent)};var L=/Firefox\/(\d+)\.\d+/;w.getFirefoxVersion=function(){var e=L.exec(window.navigator.userAgent);if(e&&e.length===2){var t=parseInt(e[1]);if(!isNaN(t)){return t}}return null};w.isD3Selection=function(e){return e instanceof b.selection};w.ensureSingle=function(e,t,r,a){var n=e.select(t+(r?"."+r:""));if(n.size())return n;var i=e.append(t);if(r)i.classed(r,true);if(a)i.call(a);return i};w.ensureSingleById=function(e,t,r,a){var n=e.select(t+"#"+r);if(n.size())return n;var i=e.append(t).attr("id",r);if(a)i.call(a);return i};w.objectFromPath=function(e,t){var r=e.split(".");var a;var n=a={};for(var i=0;i<r.length;i++){var o=r[i];var s=null;var l=r[i].match(/(.*)\[([0-9]+)\]/);if(l){o=l[1];s=l[2];a=a[o]=[];if(i===r.length-1){a[s]=t}else{a[s]={}}a=a[s]}else{if(i===r.length-1){a[o]=t}else{a[o]={}}a=a[o]}}return n};var C=/^([^\[\.]+)\.(.+)?/;var D=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;w.expandObjectPaths=function(e){var t,r,a,n,i,o,s;if(typeof e==="object"&&!Array.isArray(e)){for(r in e){if(e.hasOwnProperty(r)){if(t=r.match(C)){n=e[r];a=t[1];delete e[r];e[a]=w.extendDeepNoArrays(e[a]||{},w.objectFromPath(r,w.expandObjectPaths(n))[a])}else if(t=r.match(D)){n=e[r];a=t[1];i=parseInt(t[2]);delete e[r];e[a]=e[a]||[];if(t[3]==="."){s=t[4];o=e[a][i]=e[a][i]||{};w.extendDeepNoArrays(o,w.objectFromPath(s,w.expandObjectPaths(n)))}else{e[a][i]=w.expandObjectPaths(n)}}else{e[r]=w.expandObjectPaths(e[r])}}}}return e};w.numSeparate=function(e,t,r){if(!r)r=false;if(typeof t!=="string"||t.length===0){throw new Error("Separator string required for formatting!")}if(typeof e==="number"){e=String(e)}var a=/(\d+)(\d{3})/;var n=t.charAt(0);var i=t.charAt(1);var o=e.split(".");var s=o[0];var l=o.length>1?n+o[1]:"";if(i&&(o.length>1||s.length>4||r)){while(a.test(s)){s=s.replace(a,"$1"+i+"$2")}}return s+l};w.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var O=/^\w*$/;w.templateString=function(e,a){var n={};return e.replace(w.TEMPLATE_STRING_REGEX,function(e,t){var r;if(O.test(t)){r=a[t]}else{n[t]=n[t]||w.nestedProperty(a,t).get;r=n[t]()}return w.isValidTextValue(r)?r:""})};var I={max:10,count:0,name:"hovertemplate"};w.hovertemplateString=function(){return N.apply(I,arguments)};var P={max:10,count:0,name:"texttemplate"};w.texttemplateString=function(){return N.apply(P,arguments)};var R=/^[:|\|]/;function N(e,h,m){var g=this;var y=arguments;if(!h)h={};var x={};return e.replace(w.TEMPLATE_STRING_REGEX,function(e,t,r){var a=t==="xother"||t==="yother";var n=t==="_xother"||t==="_yother";var i=t==="_xother_"||t==="_yother_";var o=t==="xother_"||t==="yother_";var s=a||n||o||i;var l=t;if(n||i)l=l.substring(1);if(o||i)l=l.substring(0,l.length-1);var u;if(s){u=h[l];if(u===undefined)return""}else{var c,f;for(f=3;f<y.length;f++){c=y[f];if(!c)continue;if(c.hasOwnProperty(l)){u=c[l];break}if(!O.test(l)){u=w.nestedProperty(c,l).get();u=x[l]||w.nestedProperty(c,l).get();if(u)x[l]=u}if(u!==undefined)break}}if(u===undefined&&g){if(g.count<g.max){w.warn("Variable '"+l+"' in "+g.name+" could not be found!");u=e}if(g.count===g.max){w.warn("Too many "+g.name+" warnings - additional warnings will be suppressed")}g.count++;return e}if(r){var d;if(r[0]===":"){d=m?m.numberFormat:b.format;u=d(r.replace(R,""))(u)}if(r[0]==="|"){d=m?m.timeFormat:_;var v=w.dateTime2ms(u);u=w.formatDate(v,r.replace(R,""),false,d)}}else{var p=l+"Label";if(h.hasOwnProperty(p))u=h[p]}if(s){u="("+u+")";if(n||i)u=" "+u;if(o||i)u=u+" "}return u})}var z=48;var F=57;w.subplotSort=function(e,t){var r=Math.min(e.length,t.length)+1;var a=0;var n=0;for(var i=0;i<r;i++){var o=e.charCodeAt(i)||0;var s=t.charCodeAt(i)||0;var l=o>=z&&o<=F;var u=s>=z&&s<=F;if(l)a=10*a+o-z;if(u)n=10*n+s-z;if(!l||!u){if(a!==n)return a-n;if(o!==s)return o-s}}return n-a};var j=2e9;w.seedPseudoRandom=function(){j=2e9};w.pseudoRandom=function(){var e=j;j=(69069*j+1)%4294967296;if(Math.abs(j-e)<429496729)return w.pseudoRandom();return j/4294967296};w.fillText=function(e,t,r){var a=Array.isArray(r)?function(e){r.push(e)}:function(e){r.text=e};var n=w.extractOption(e,t,"htx","hovertext");if(w.isValidTextValue(n))return a(n);var i=w.extractOption(e,t,"tx","text");if(w.isValidTextValue(i))return a(i)};w.isValidTextValue=function(e){return e||e===0};w.formatPercent=function(e,t){t=t||0;var r=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%";for(var a=0;a<t;a++){if(r.indexOf(".")!==-1){r=r.replace("0%","%");r=r.replace(".%","%")}}return r};w.isHidden=function(e){var t=window.getComputedStyle(e).display;return!t||t==="none"};w.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""};w.strRotate=function(e){return e?"rotate("+e+")":""};w.strScale=function(e){return e!==1?"scale("+e+")":""};w.getTextTransform=function(e){var t=e.noCenter;var r=e.textX;var a=e.textY;var n=e.targetX;var i=e.targetY;var o=e.anchorX||0;var s=e.anchorY||0;var l=e.rotate;var u=e.scale;if(!u)u=0;else if(u>1)u=1;return w.strTranslate(n-u*(r+o),i-u*(a+s))+w.strScale(u)+(l?"rotate("+l+(t?"":" "+r+" "+a)+")":"")};w.ensureUniformFontSize=function(e,t){var r=w.extendFlat({},t);r.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0);return r};w.join2=function(e,t,r){var a=e.length;if(a>1){return e.slice(0,-1).join(t)+r+e[a-1]}return e.join(t)};w.bigFont=function(e){return Math.round(1.2*e)};var H=w.getFirefoxVersion();var B=H!==null&&H<86;w.getPositionFromD3Event=function(){if(B){return[b.event.layerX,b.event.layerY]}else{return[b.event.offsetX,b.event.offsetY]}}},{"../constants/numerical":265,"./anchor_utils":269,"./angles":270,"./array":271,"./clean_number":272,"./clear_responsive":274,"./coerce":275,"./dates":276,"./dom":277,"./extend":279,"./filter_unique":280,"./filter_visible":281,"./geometry2d":282,"./identity":283,"./increment":284,"./is_plain_object":286,"./keyed_container":287,"./localize":288,"./loggers":289,"./make_trace_groups":290,"./matrix":291,"./mod":292,"./nested_property":293,"./noop":294,"./notifier":295,"./preserve_drawing_buffer":298,"./push_unique":299,"./regex":301,"./relative_attr":302,"./relink_private":303,"./search":304,"./stats":306,"./throttle":308,"./to_log_range":309,"@plotly/d3":20,"d3-time-format":29,"fast-isnumeric":31}],286:[function(e,t,r){"use strict";t.exports=function e(t){if(window&&window.process&&window.process.versions){return Object.prototype.toString.call(t)==="[object Object]"}return Object.prototype.toString.call(t)==="[object Object]"&&Object.getPrototypeOf(t).hasOwnProperty("hasOwnProperty")}},{}],287:[function(e,t,r){"use strict";var p=e("./nested_property");var n=/^\w*$/;var h=0;var m=1;var g=2;var y=3;var x=4;t.exports=function e(t,i,o,s){o=o||"name";s=s||"value";var a,l,u;var c={};if(i&&i.length){u=p(t,i);l=u.get()}else{l=t}i=i||"";var f={};if(l){for(a=0;a<l.length;a++){f[l[a][o]]=a}}var d=n.test(s);var v={set:function(e,t){var r=t===null?x:h;if(!l){if(!u||r===x)return;l=[];u.set(l)}var a=f[e];if(a===undefined){if(r===x)return;r=r|y;a=l.length;f[e]=a}else if(t!==(d?l[a][s]:p(l[a],s).get())){r=r|g}var n=l[a]=l[a]||{};n[o]=e;if(d){n[s]=t}else{p(n,s).set(t)}if(t!==null){r=r&~x}c[a]=c[a]|r;return v},get:function(e){if(!l)return;var t=f[e];if(t===undefined){return undefined}else if(d){return l[t][s]}else{return p(l[t],s).get()}},rename:function(e,t){var r=f[e];if(r===undefined)return v;c[r]=c[r]|m;f[t]=r;delete f[e];l[r][o]=t;return v},remove:function(e){var t=f[e];if(t===undefined)return v;var r=l[t];if(Object.keys(r).length>2){c[t]=c[t]|g;return v.set(e,null)}if(d){for(a=t;a<l.length;a++){c[a]=c[a]|y}for(a=t;a<l.length;a++){f[l[a][o]]--}l.splice(t,1);delete f[e]}else{p(r,s).set(null);c[t]=c[t]|g|x}return v},constructUpdate:function(){var e,t;var r={};var a=Object.keys(c);for(var n=0;n<a.length;n++){t=a[n];e=i+"["+t+"]";if(l[t]){if(c[t]&m){r[e+"."+o]=l[t][o]}if(c[t]&g){if(d){r[e+"."+s]=c[t]&x?null:l[t][s]}else{r[e+"."+s]=c[t]&x?null:p(l[t],s).get()}}}else{r[e]=null}}return r}};return v}},{"./nested_property":293}],288:[function(e,t,r){"use strict";var c=e("../registry");t.exports=function e(t,r){var a=t._context.locale;for(var n=0;n<2;n++){var i=t._context.locales;for(var o=0;o<2;o++){var s=(i[a]||{}).dictionary;if(s){var l=s[r];if(l)return l}i=c.localeRegistry}var u=a.split("-")[0];if(u===a)break;a=u}return r}},{"../registry":373}],289:[function(e,t,r){"use strict";var a=e("../plot_api/plot_config").dfltConfig;var n=e("./notifier");var i=t.exports={};i.log=function(){var e;if(a.logging>1){var t=["LOG:"];for(e=0;e<arguments.length;e++){t.push(arguments[e])}console.trace.apply(console,t)}if(a.notifyOnLogging>1){var r=[];for(e=0;e<arguments.length;e++){r.push(arguments[e])}n(r.join("<br>"),"long")}};i.warn=function(){var e;if(a.logging>0){var t=["WARN:"];for(e=0;e<arguments.length;e++){t.push(arguments[e])}console.trace.apply(console,t)}if(a.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++){r.push(arguments[e])}n(r.join("<br>"),"stick")}};i.error=function(){var e;if(a.logging>0){var t=["ERROR:"];for(e=0;e<arguments.length;e++){t.push(arguments[e])}console.error.apply(console,t)}if(a.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++){r.push(arguments[e])}n(r.join("<br>"),"stick")}}},{"../plot_api/plot_config":318,"./notifier":295}],290:[function(e,t,r){"use strict";var o=e("@plotly/d3");t.exports=function e(t,r,a){var n=t.selectAll("g."+a.replace(/\s/g,".")).data(r,function(e){return e[0].trace.uid});n.exit().remove();n.enter().append("g").attr("class",a);n.order();var i=t.classed("rangeplot")?"nodeRangePlot3":"node3";n.each(function(e){e[0][i]=o.select(this)});return n}},{"@plotly/d3":20}],291:[function(e,t,o){"use strict";var r=e("gl-mat4");o.init2dArray=function(e,t){var r=new Array(e);for(var a=0;a<e;a++)r[a]=new Array(t);return r};o.transposeRagged=function(e){var t=0;var r=e.length;var a,n;for(a=0;a<r;a++)t=Math.max(t,e[a].length);var i=new Array(t);for(a=0;a<t;a++){i[a]=new Array(r);for(n=0;n<r;n++)i[a][n]=e[n][a]}return i};o.dot=function(e,t){if(!(e.length&&t.length)||e.length!==t.length)return null;var r=e.length;var a;var n;if(e[0].length){a=new Array(r);for(n=0;n<r;n++)a[n]=o.dot(e[n],t)}else if(t[0].length){var i=o.transposeRagged(t);a=new Array(i.length);for(n=0;n<i.length;n++)a[n]=o.dot(e,i[n])}else{a=0;for(n=0;n<r;n++)a+=e[n]*t[n]}return a};o.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]};o.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]};o.rotationXYMatrix=function(e,t,r){return o.dot(o.dot(o.translationMatrix(t,r),o.rotationMatrix(e)),o.translationMatrix(-t,-r))};o.apply3DTransform=function(r){return function(){var e=arguments;var t=arguments.length===1?e[0]:[e[0],e[1],e[2]||0];return o.dot(r,[t[0],t[1],t[2],1]).slice(0,3)}};o.apply2DTransform=function(r){return function(){var e=arguments;if(e.length===3){e=e[0]}var t=arguments.length===1?e[0]:[e[0],e[1]];return o.dot(r,[t[0],t[1],1]).slice(0,2)}};o.apply2DTransform2=function(e){var t=o.apply2DTransform(e);return function(e){return t(e.slice(0,2)).concat(t(e.slice(2,4)))}};o.convertCssMatrix=function(e){if(e){var t=e.length;if(t===16)return e;if(t===6){return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};o.inverseTransformMatrix=function(e){var t=[];r.invert(t,e);return[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}},{"gl-mat4":47}],292:[function(e,t,r){"use strict";function a(e,t){var r=e%t;return r<0?r+t:r}function n(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}t.exports={mod:a,modHalf:n}},{}],293:[function(e,t,r){"use strict";var l=e("fast-isnumeric");var f=e("./array").isArrayOrTypedArray;t.exports=function e(t,r){if(l(r))r=String(r);else if(typeof r!=="string"||r.substr(r.length-4)==="[-1]"){throw"bad property string"}var a=0;var n=r.split(".");var i;var o;var s;while(a<n.length){i=String(n[a]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/);if(i){if(i[1])n[a]=i[1];else if(a===0)n.splice(0,1);else throw"bad property string";o=i[2].substr(1,i[2].length-2).split("][");for(s=0;s<o.length;s++){a++;n.splice(a,0,Number(o[s]))}}a++}if(typeof t!=="object"){return m(t,r,n)}return{set:v(t,n,r),get:u(t,n),astr:r,parts:n,obj:t}};function u(o,s){return function(){var e=o;var t;var r;var a;var n;var i;for(n=0;n<s.length-1;n++){t=s[n];if(t===-1){r=true;a=[];for(i=0;i<e.length;i++){a[i]=u(e[i],s.slice(n+1))();if(a[i]!==a[0])r=false}return r?a[0]:a}if(typeof t==="number"&&!f(e)){return undefined}e=e[t];if(typeof e!=="object"||e===null){return undefined}}if(typeof e!=="object"||e===null)return undefined;a=e[s[n]];if(a===null)return undefined;return a}}var a=/(^|\.)args\[/;function d(e,t){return e===undefined||e===null&&!t.match(a)}function v(s,l,u){return function(e){var t=s;var r="";var a=[[s,r]];var n=d(e,u);var i;var o;for(o=0;o<l.length-1;o++){i=l[o];if(typeof i==="number"&&!f(t)){throw"array index but container is not an array"}if(i===-1){n=!p(t,l.slice(o+1),e,u);if(n)break;else return}if(!h(t,i,l[o+1],n)){break}t=t[i];if(typeof t!=="object"||t===null){throw"container is not an object"}r=c(r,i);a.push([t,r])}if(n){if(o===l.length-1){delete t[l[o]];if(Array.isArray(t)&&+l[o]===t.length-1){while(t.length&&t[t.length-1]===undefined){t.pop()}}}}else t[l[o]]=e}}function c(e,t){var r=t;if(l(t))r="["+t+"]";else if(e)r="."+t;return e+r}function p(e,t,r,a){var n=f(r);var i=true;var o=r;var s=a.replace("-1",0);var l=n?false:d(r,s);var u=t[0];var c;for(c=0;c<e.length;c++){s=a.replace("-1",c);if(n){o=r[c%r.length];l=d(o,s)}if(l)i=false;if(!h(e,c,u,l)){continue}v(e[c],t,a.replace("-1",c))(o)}return i}function h(e,t,r,a){if(e[t]===undefined){if(a)return false;if(typeof r==="number")e[t]=[];else e[t]={}}return true}function m(e,t,r){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:r,obj:e}}},{"./array":271,"fast-isnumeric":31}],294:[function(e,t,r){"use strict";t.exports=function e(){}},{}],295:[function(e,t,r){"use strict";var l=e("@plotly/d3");var a=e("fast-isnumeric");var n=[];t.exports=function(e,i){if(n.indexOf(e)!==-1)return;n.push(e);var o=1e3;if(a(i))o=i;else if(i==="long")o=3e3;var t=l.select("body").selectAll(".plotly-notifier").data([0]);t.enter().append("div").classed("plotly-notifier",true);var r=t.selectAll(".notifier-note").data(n);function s(e){e.duration(700).style("opacity",0).each("end",function(e){var t=n.indexOf(e);if(t!==-1)n.splice(t,1);l.select(this).remove()})}r.enter().append("div").classed("notifier-note",true).style("opacity",0).each(function(e){var t=l.select(this);t.append("button").classed("notifier-close",true).html("&times;").on("click",function(){t.transition().call(s)});var r=t.append("p");var a=e.split(/<br\s*\/?>/g);for(var n=0;n<a.length;n++){if(n)r.append("br");r.append("span").text(a[n])}if(i==="stick"){t.transition().duration(350).style("opacity",1)}else{t.transition().duration(700).style("opacity",1).transition().delay(o).call(s)}})}},{"@plotly/d3":20,"fast-isnumeric":31}],296:[function(e,t,r){"use strict";var s=e("./setcursor");var l="data-savedcursor";var u="!!";t.exports=function e(t,r){var a=t.attr(l);if(r){if(!a){var n=(t.attr("class")||"").split(" ");for(var i=0;i<n.length;i++){var o=n[i];if(o.indexOf("cursor-")===0){t.attr(l,o.substr(7)).classed(o,false)}}if(!t.attr(l)){t.attr(l,u)}}s(t,r)}else if(a){t.attr(l,null);if(a===u)s(t);else s(t,a)}}},{"./setcursor":305}],297:[function(e,t,r){"use strict";var v=e("./matrix").dot;var y=e("../constants/numerical").BADNUM;var u=t.exports={};u.tester=function e(t){var v=t.slice();var p=v[0][0];var h=p;var m=v[0][1];var g=m;var r;v.push(v[0]);for(r=1;r<v.length;r++){p=Math.min(p,v[r][0]);h=Math.max(h,v[r][0]);m=Math.min(m,v[r][1]);g=Math.max(g,v[r][1])}var a=false;var n;if(v.length===5){if(v[0][0]===v[1][0]){if(v[2][0]===v[3][0]&&v[0][1]===v[3][1]&&v[1][1]===v[2][1]){a=true;n=function(e){return e[0]===v[0][0]}}}else if(v[0][1]===v[1][1]){if(v[2][1]===v[3][1]&&v[0][0]===v[3][0]&&v[1][0]===v[2][0]){a=true;n=function(e){return e[1]===v[0][1]}}}}function i(e,t){var r=e[0];var a=e[1];if(r===y||r<p||r>h||a===y||a<m||a>g){return false}if(t&&n(e))return false;return true}function o(e,t){var r=e[0];var a=e[1];if(r===y||r<p||r>h||a===y||a<m||a>g){return false}var n=v.length;var i=v[0][0];var o=v[0][1];var s=0;var l;var u;var c;var f;var d;for(l=1;l<n;l++){u=i;c=o;i=v[l][0];o=v[l][1];f=Math.min(u,i);if(r<f||r>Math.max(u,i)||a>Math.max(c,o)){continue}else if(a<Math.min(c,o)){if(r!==f)s++}else{if(i===u)d=a;else d=c+(r-u)*(o-c)/(i-u);if(a===d){if(l===1&&t)return false;return true}if(a<=d&&r!==f)s++}}return s%2===1}var s=true;var l=v[0];for(r=1;r<v.length;r++){if(l[0]!==v[r][0]||l[1]!==v[r][1]){s=false;break}}return{xmin:p,xmax:h,ymin:m,ymax:g,pts:v,contains:a?i:o,isRect:a,degenerate:s}};u.isSegmentBent=function e(t,r,a,n){var i=t[r];var o=[t[a][0]-i[0],t[a][1]-i[1]];var s=v(o,o);var l=Math.sqrt(s);var u=[-o[1]/l,o[0]/l];var c;var f;var d;for(c=r+1;c<a;c++){f=[t[c][0]-i[0],t[c][1]-i[1]];d=v(f,o);if(d<0||d>s||Math.abs(v(f,u))>n)return true}return false};u.filter=function e(n,i){var o=[n[0]];var s=0;var l=0;function t(e){n.push(e);var t=o.length;var r=s;o.splice(l+1);for(var a=r+1;a<n.length;a++){if(a===n.length-1||u.isSegmentBent(n,r,a+1,i)){o.push(n[a]);if(o.length<t-2){s=a;l=o.length-1}r=a}}}if(n.length>1){var r=n.pop();t(r)}return{addPt:t,raw:n,filtered:o}}},{"../constants/numerical":265,"./matrix":291}],298:[function(e,t,r){"use strict";var c=e("fast-isnumeric");var f=e("is-mobile");t.exports=function e(t){var r;if(t&&t.hasOwnProperty("userAgent")){r=t.userAgent}else{r=d()}if(typeof r!=="string")return true;var a=f({ua:{headers:{"user-agent":r}},tablet:true,featureDetect:false});if(!a){var n=r.split(" ");for(var i=1;i<n.length;i++){var o=n[i];if(o.indexOf("Safari")!==-1){for(var s=i-1;s>-1;s--){var l=n[s];if(l.substr(0,8)==="Version/"){var u=l.substr(8).split(".")[0];if(c(u))u=+u;if(u>=13)return true}}}}}return a};function d(){var e;if(typeof navigator!=="undefined"){e=navigator.userAgent}if(e&&e.headers&&typeof e.headers["user-agent"]==="string"){e=e.headers["user-agent"]}return e}},{"fast-isnumeric":31,"is-mobile":67}],299:[function(e,t,r){"use strict";t.exports=function e(t,r){if(r instanceof RegExp){var a=r.toString();for(var n=0;n<t.length;n++){if(t[n]instanceof RegExp&&t[n].toString()===a){return t}}t.push(r)}else if((r||r===0)&&t.indexOf(r)===-1)t.push(r);return t}},{}],300:[function(e,t,r){"use strict";var i=e("../lib");var s=e("../plot_api/plot_config").dfltConfig;function a(e,t){var r=[];var a;for(var n=0;n<t.length;n++){a=t[n];if(a===e)r[n]=a;else if(typeof a==="object"){r[n]=Array.isArray(a)?i.extendDeep([],a):i.extendDeepAll({},a)}else r[n]=a}return r}var n={};n.add=function(e,t,r,a,n){var i,o;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};o=e.undoQueue.index;if(e.autoplay){if(!e.undoQueue.inSequence)e.autoplay=false;return}if(!e.undoQueue.sequence||e.undoQueue.beginSequence){i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}};e.undoQueue.queue.splice(o,e.undoQueue.queue.length-o,i);e.undoQueue.index+=1}else{i=e.undoQueue.queue[o-1]}e.undoQueue.beginSequence=false;if(i){i.undo.calls.unshift(t);i.undo.args.unshift(r);i.redo.calls.push(a);i.redo.args.push(n)}if(e.undoQueue.queue.length>s.queueLength){e.undoQueue.queue.shift();e.undoQueue.index--}};n.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};e.undoQueue.sequence=true;e.undoQueue.beginSequence=true};n.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};e.undoQueue.sequence=false;e.undoQueue.beginSequence=false};n.undo=function e(t){var r,a;if(t.undoQueue===undefined||isNaN(t.undoQueue.index)||t.undoQueue.index<=0){return}t.undoQueue.index--;r=t.undoQueue.queue[t.undoQueue.index];t.undoQueue.inSequence=true;for(a=0;a<r.undo.calls.length;a++){n.plotDo(t,r.undo.calls[a],r.undo.args[a])}t.undoQueue.inSequence=false;t.autoplay=false};n.redo=function e(t){var r,a;if(t.undoQueue===undefined||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length){return}r=t.undoQueue.queue[t.undoQueue.index];t.undoQueue.inSequence=true;for(a=0;a<r.redo.calls.length;a++){n.plotDo(t,r.redo.calls[a],r.redo.args[a])}t.undoQueue.inSequence=false;t.autoplay=false;t.undoQueue.index++};n.plotDo=function(e,t,r){e.autoplay=true;r=a(e,r);t.apply(null,r)};t.exports=n},{"../lib":285,"../plot_api/plot_config":318}],301:[function(e,t,r){"use strict";r.counter=function(e,t,r,a){var n=(t||"")+(r?"":"$");var i=a===false?"":"^";if(e==="xy"){return new RegExp(i+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n)}return new RegExp(i+e+"([2-9]|[1-9][0-9]+)?"+n)}},{}],302:[function(e,t,r){"use strict";var a=/^(.*)(\.[^\.\[\]]+|\[\d\])$/;var n=/^[^\.\[\]]+$/;t.exports=function(e,t){while(t){var r=e.match(a);if(r)e=r[1];else if(e.match(n))e="";else throw new Error("bad relativeAttr call:"+[e,t]);if(t.charAt(0)==="^")t=t.slice(1);else break}if(e&&t.charAt(0)!=="["){return e+"."+t}return e+t}},{}],303:[function(e,t,r){"use strict";var l=e("./array").isArrayOrTypedArray;var u=e("./is_plain_object");t.exports=function e(t,r){for(var a in r){var n=r[a];var i=t[a];if(i===n)continue;if(a.charAt(0)==="_"||typeof n==="function"){if(a in t)continue;t[a]=n}else if(l(n)&&l(i)&&u(n[0])){if(a==="customdata"||a==="ids")continue;var o=Math.min(n.length,i.length);for(var s=0;s<o;s++){if(i[s]!==n[s]&&u(n[s])&&u(i[s])){e(i[s],n[s])}}}else if(u(n)&&u(i)){e(i,n);if(!Object.keys(i).length)delete t[a]}}}},{"./array":271,"./is_plain_object":286}],304:[function(e,t,c){"use strict";var u=e("fast-isnumeric");var f=e("./loggers");var o=e("./identity");var d=e("../constants/numerical").BADNUM;var v=1e-9;c.findBin=function(e,t,r){if(u(t.start)){return r?Math.ceil((e-t.start)/t.size-v)-1:Math.floor((e-t.start)/t.size+v)}else{var a=0;var n=t.length;var i=0;var o=n>1?(t[n-1]-t[0])/(n-1):1;var s,l;if(o>=0){l=r?p:h}else{l=r?g:m}e+=o*v*(r?-1:1)*(o>=0?1:-1);while(a<n&&i++<100){s=Math.floor((a+n)/2);if(l(t[s],e))a=s+1;else n=s}if(i>90)f.log("Long binary search...");return a-1}};function p(e,t){return e<t}function h(e,t){return e<=t}function m(e,t){return e>t}function g(e,t){return e>=t}c.sorterAsc=function(e,t){return e-t};c.sorterDes=function(e,t){return t-e};c.distinctVals=function(e){var t=e.slice();t.sort(c.sorterAsc);var r;for(r=t.length-1;r>-1;r--){if(t[r]!==d)break}var a=t[r]-t[0]||1;var n=a/(r||1)/1e4;var i=[];var o;for(var s=0;s<=r;s++){var l=t[s];var u=l-o;if(o===undefined){i.push(l);o=l}else if(u>n){a=Math.min(a,u);i.push(l);o=l}}return{vals:i,minDiff:a}};c.roundUp=function(e,t,r){var a=0;var n=t.length-1;var i;var o=0;var s=r?0:1;var l=r?1:0;var u=r?Math.ceil:Math.floor;while(a<n&&o++<100){i=u((a+n)/2);if(t[i]<=e)a=i+s;else n=i-l}return t[a]};c.sort=function(e,t){var r=0;var a=0;for(var n=1;n<e.length;n++){var i=t(e[n],e[n-1]);if(i<0)r=1;else if(i>0)a=1;if(r&&a)return e.sort(t)}return a?e:e.reverse()};c.findIndexOfMin=function(e,t){t=t||o;var r=Infinity;var a;for(var n=0;n<e.length;n++){var i=t(e[n]);if(i<r){r=i;a=n}}return a}},{"../constants/numerical":265,"./identity":283,"./loggers":289,"fast-isnumeric":31}],305:[function(e,t,r){"use strict";t.exports=function e(t,r){(t.attr("class")||"").split(" ").forEach(function(e){if(e.indexOf("cursor-")===0)t.classed(e,false)});if(r)t.classed("cursor-"+r,true)}},{}],306:[function(e,t,o){"use strict";var s=e("fast-isnumeric");var l=e("./array").isArrayOrTypedArray;o.aggNums=function(e,t,r,a){var n,i;if(!a||a>r.length)a=r.length;if(!s(t))t=false;if(l(r[0])){i=new Array(a);for(n=0;n<a;n++)i[n]=o.aggNums(e,t,r[n]);r=i}for(n=0;n<a;n++){if(!s(t))t=r[n];else if(s(r[n]))t=e(+t,+r[n])}return t};o.len=function(e){return o.aggNums(function(e){return e+1},0,e)};o.mean=function(e,t){if(!t)t=o.len(e);return o.aggNums(function(e,t){return e+t},0,e)/t};o.midRange=function(e){if(e===undefined||e.length===0)return undefined;return(o.aggNums(Math.max,null,e)+o.aggNums(Math.min,null,e))/2};o.variance=function(e,t,r){if(!t)t=o.len(e);if(!s(r))r=o.mean(e,t);return o.aggNums(function(e,t){return e+Math.pow(t-r,2)},0,e)/t};o.stdev=function(e,t,r){return Math.sqrt(o.variance(e,t,r))};o.median=function(e){var t=e.slice().sort();return o.interp(t,.5)};o.interp=function(e,t){if(!s(t))throw"n should be a finite number";t=t*e.length-.5;if(t<0)return e[0];if(t>e.length-1)return e[e.length-1];var r=t%1;return r*e[Math.ceil(t)]+(1-r)*e[Math.floor(t)]}},{"./array":271,"fast-isnumeric":31}],307:[function(e,t,r){"use strict";var w=e("@plotly/d3");var T=e("../lib");var b=T.strTranslate;var k=e("../constants/xmlns_namespaces");var M=e("../constants/alignment").LINE_SPACING;function _(e,t){return e.node().getBoundingClientRect()[t]}var a=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;r.convertToTspans=function(p,e,h){var m=p.text();var t=!p.attr("data-notex")&&typeof MathJax!=="undefined"&&m.match(a);var g=w.select(p.node().parentNode);if(g.empty())return;var y=p.attr("class")?p.attr("class").split(" ")[0]:"text";y+="-math";g.selectAll("svg."+y).remove();g.selectAll("g."+y+"-group").remove();p.style("display",null).attr({"data-unformatted":m,"data-math":"N"});function x(){if(!g.empty()){y=p.attr("class")+"-math";g.select("svg."+y).remove()}p.text("").style("white-space","pre");var e=f(p.node(),m);if(e){p.style("pointer-events","all")}r.positionText(p);if(h)h.call(p)}if(t){(e&&e._promises||[]).push(new Promise(function(d){p.style("display","none");var v=parseInt(p.node().style.fontSize,10);var e={fontSize:v};o(t[2],e,function(e,t,r){g.selectAll("svg."+y).remove();g.selectAll("g."+y+"-group").remove();var a=e&&e.select("svg");if(!a||!a.node()){x();d();return}var n=g.append("g").classed(y+"-group",true).attr({"pointer-events":"none","data-unformatted":m,"data-math":"Y"});n.node().appendChild(a.node());if(t&&t.node()){a.node().insertBefore(t.node().cloneNode(true),a.node().firstChild)}a.attr({class:y,height:r.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var i=p.node().style.fill||"black";var o=a.select("g");o.attr({fill:i,stroke:i});var s=_(o,"width");var l=_(o,"height");var u=+p.attr("x")-s*{start:0,middle:.5,end:1}[p.attr("text-anchor")||"start"];var c=v||_(p,"height");var f=-c/4;if(y[0]==="y"){n.attr({transform:"rotate("+[-90,+p.attr("x"),+p.attr("y")]+")"+b(-s/2,f-l/2)});a.attr({x:+p.attr("x"),y:+p.attr("y")})}else if(y[0]==="l"){a.attr({x:p.attr("x"),y:f-l/2})}else if(y[0]==="a"&&y.indexOf("atitle")!==0){a.attr({x:0,y:f})}else{a.attr({x:u,y:+p.attr("y")+f-l/2})}if(h)h.call(p,n);d(n)})}))}else x();return p};var n=/(<|&lt;|&#60;)/g;var i=/(>|&gt;|&#62;)/g;function s(e){return e.replace(n,"\\lt ").replace(i,"\\gt ")}function o(r,t,a){var n,e,i,o;MathJax.Hub.Queue(function(){e=T.extendDeepAll({},MathJax.Hub.config);i=MathJax.Hub.processSectionDelay;if(MathJax.Hub.processSectionDelay!==undefined){MathJax.Hub.processSectionDelay=0}return MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){n=MathJax.Hub.config.menuSettings.renderer;if(n!=="SVG"){return MathJax.Hub.setRenderer("SVG")}},function(){var e="math-output-"+T.randstr({},64);o=w.select("body").append("div").attr({id:e}).style({visibility:"hidden",position:"absolute"}).style({"font-size":t.fontSize+"px"}).text(s(r));return MathJax.Hub.Typeset(o.node())},function(){var e=w.select("body").select("#MathJax_SVG_glyphs");if(o.select(".MathJax_SVG").empty()||!o.select("svg").node()){T.log("There was an error in the tex syntax.",r);a()}else{var t=o.select("svg").node().getBoundingClientRect();a(o.select(".MathJax_SVG"),e,t)}o.remove();if(n!=="SVG"){return MathJax.Hub.setRenderer(n)}},function(){if(i!==undefined){MathJax.Hub.processSectionDelay=i}return MathJax.Hub.Config(e)})}var A={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"};var S={sub:"0.3em",sup:"-0.6em"};var E={sub:"-0.21em",sup:"0.42em"};var L="​";var C=["http:","https:","mailto:","",undefined,":"];var D=r.NEWLINES=/(\r\n?|\n)/g;var O=/(<[^<>]*>)/;var I=/<(\/?)([^ >]*)(\s+(.*))?>/i;var P=/<br(\s+.*)?>/i;r.BR_TAG_ALL=/<br(\s+.*)?>/gi;var R=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i;var N=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i;var z=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i;var F=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function j(e,t){if(!e)return null;var r=e.match(t);var a=r&&(r[3]||r[4]);return a&&B(a)}var H=/(^|;)\s*color:/;r.plainText=function(e,t){t=t||{};var r=t.len!==undefined&&t.len!==-1?t.len:Infinity;var a=t.allowedTags!==undefined?t.allowedTags:["br"];var n="...";var i=n.length;var o=e.split(O);var s=[];var l="";var u=0;for(var c=0;c<o.length;c++){var f=o[c];var d=f.match(I);var v=d&&d[2].toLowerCase();if(v){if(a.indexOf(v)!==-1){s.push(f);l=v}}else{var p=f.length;if(u+p<r){s.push(f);u+=p}else if(u<r){var h=r-u;if(l&&(l!=="br"||h<=i||p<=i)){s.pop()}if(r>i){s.push(f.substr(0,h-i)+n)}else{s.push(f.substr(0,h))}break}l=""}}return s.join("")};var l={mu:"μ",amp:"&",lt:"<",gt:">",nbsp:" ",times:"×",plusmn:"±",deg:"°"};var u=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function B(e){return e.replace(u,function(e,t){var r;if(t.charAt(0)==="#"){r=c(t.charAt(1)==="x"?parseInt(t.substr(2),16):parseInt(t.substr(1),10))}else r=l[t];return r||e})}r.convertEntities=B;function c(e){if(e>1114111)return;var t=String.fromCodePoint;if(t)return t(e);var r=String.fromCharCode;if(e<=65535)return r(e);return r((e>>10)+55232,e%1024+56320)}function f(a,r){r=r.replace(D," ");var e=false;var u=[];var c;var n=-1;function t(){n++;var e=document.createElementNS(k.svg,"tspan");w.select(e).attr({class:"line",dy:n*M+"em"});a.appendChild(e);c=e;var t=u;u=[{node:e}];if(t.length>1){for(var r=1;r<t.length;r++){i(t[r])}}}function i(e){var t=e.type;var r={};var a;if(t==="a"){a="a";var n=e.target;var i=e.href;var o=e.popup;if(i){r={"xlink:xlink:show":n==="_blank"||n.charAt(0)!=="_"?"new":"replace",target:n,"xlink:xlink:href":i};if(o){r.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+o+'");return false;'}}}else a="tspan";if(e.style)r.style=e.style;var s=document.createElementNS(k.svg,a);if(t==="sup"||t==="sub"){f(c,L);c.appendChild(s);var l=document.createElementNS(k.svg,"tspan");f(l,L);w.select(l).attr("dy",E[t]);r.dy=S[t];c.appendChild(s);c.appendChild(l)}else{c.appendChild(s)}w.select(s).attr(r);c=e.node=s;u.push(e)}function f(e,t){e.appendChild(document.createTextNode(t))}function o(e){if(u.length===1){T.log("Ignoring unexpected end tag </"+e+">.",r);return}var t=u.pop();if(e!==t.type){T.log("Start tag <"+t.type+"> doesnt match end tag <"+e+">. Pretending it did match.",r)}c=u[u.length-1].node}var s=P.test(r);if(s)t();else{c=a;u=[{node:a}]}var l=r.split(O);for(var d=0;d<l.length;d++){var v=l[d];var p=v.match(I);var h=p&&p[2].toLowerCase();var m=A[h];if(h==="br"){t()}else if(m===undefined){f(c,B(v))}else{if(p[1]){o(h)}else{var g=p[4];var y={type:h};var x=j(g,R);if(x){x=x.replace(H,"$1 fill:");if(m)x+=";"+m}else if(m)x=m;if(x)y.style=x;if(h==="a"){e=true;var b=j(g,N);if(b){var _=document.createElement("a");_.href=b;if(C.indexOf(_.protocol)!==-1){y.href=encodeURI(decodeURI(b));y.target=j(g,z)||"_blank";y.popup=j(g,F)}}}i(y)}}}return e}r.sanitizeHTML=function e(t){t=t.replace(D," ");var r=document.createElement("p");var a=r;var n=[];var i=t.split(O);for(var o=0;o<i.length;o++){var s=i[o];var l=s.match(I);var u=l&&l[2].toLowerCase();if(u in A){if(l[1]){if(n.length){a=n.pop()}}else{var c=l[4];var f=j(c,R);var d=f?{style:f}:{};if(u==="a"){var v=j(c,N);if(v){var p=document.createElement("a");p.href=v;if(C.indexOf(p.protocol)!==-1){d.href=encodeURI(decodeURI(v));var h=j(c,z);if(h){d.target=h}}}}var m=document.createElement(u);a.appendChild(m);w.select(m).attr(d);a=m;n.push(m)}}else{a.appendChild(document.createTextNode(B(s)))}}var g="innerHTML";return r[g]};r.lineCount=function e(t){return t.selectAll("tspan.line").size()||1};r.positionText=function e(t,n,i){return t.each(function(){var r=w.select(this);function e(e,t){if(t===undefined){t=r.attr(e);if(t===null){r.attr(e,0);t=0}}else r.attr(e,t);return t}var t=e("x",n);var a=e("y",i);if(this.nodeName==="text"){r.selectAll("tspan.line").attr({x:t,y:a})}})};function d(e,t,n){var r=n.horizontalAlign;var a=n.verticalAlign||"top";var i=e.node().getBoundingClientRect();var o=t.node().getBoundingClientRect();var s;var l;var u;if(a==="bottom"){l=function(){return i.bottom-s.height}}else if(a==="middle"){l=function(){return i.top+(i.height-s.height)/2}}else{l=function(){return i.top}}if(r==="right"){u=function(){return i.right-s.width}}else if(r==="center"){u=function(){return i.left+(i.width-s.width)/2}}else{u=function(){return i.left}}return function(){s=this.node().getBoundingClientRect();var e=u()-o.left;var t=l()-o.top;var r=n.gd||{};if(n.gd){r._fullLayout._calcInverseTransform(r);var a=T.apply3DTransform(r._fullLayout._invTransform)(e,t);e=a[0];t=a[1]}this.style({top:t+"px",left:e+"px","z-index":1e3});return this}}var v="1px ";r.makeTextShadow=function(e){var t=v;var r=v;var a=v;return t+r+a+e+", "+"-"+t+"-"+r+a+e+", "+t+"-"+r+a+e+", "+"-"+t+r+a+e};r.makeEditable=function(o,s){var l=s.gd;var e=s.delegate;var u=w.dispatch("edit","input","cancel");var r=e||o;o.style({"pointer-events":e?"none":"all"});if(o.size()!==1)throw new Error("boo");function t(){a();o.style({opacity:0});var e=r.attr("class");var t;if(e)t="."+e.split(" ")[0]+"-math-group";else t="[class*=-math-group]";if(t){w.select(o.node().parentNode).select(t).style({opacity:0})}}function c(e){var t=e.node();var r=document.createRange();r.selectNodeContents(t);var a=window.getSelection();a.removeAllRanges();a.addRange(r);t.focus()}function a(){var e=w.select(l);var t=e.select(".svg-container");var r=t.append("div");var a=o.node().style;var n=parseFloat(a.fontSize||12);var i=s.text;if(i===undefined)i=o.attr("data-unformatted");r.classed("plugin-editable editable",true).style({position:"absolute","font-family":a.fontFamily||"Arial","font-size":n,color:s.fill||a.fill||"black",opacity:1,"background-color":s.background||"transparent",outline:"#ffffff33 1px solid",margin:[-n/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:true}).text(i).call(d(o,t,s)).on("blur",function(){l._editing=false;o.text(this.textContent).style({opacity:1});var e=w.select(this).attr("class");var t;if(e)t="."+e.split(" ")[0]+"-math-group";else t="[class*=-math-group]";if(t){w.select(o.node().parentNode).select(t).style({opacity:0})}var r=this.textContent;w.select(this).transition().duration(0).remove();w.select(document).on("mouseup",null);u.edit.call(o,r)}).on("focus",function(){var e=this;l._editing=true;w.select(document).on("mouseup",function(){if(w.event.target===e)return false;if(document.activeElement===r.node())r.node().blur()})}).on("keyup",function(){if(w.event.which===27){l._editing=false;o.style({opacity:1});w.select(this).style({opacity:0}).on("blur",function(){return false}).transition().remove();u.cancel.call(o,this.textContent)}else{u.input.call(o,this.textContent);w.select(this).call(d(o,t,s))}}).on("keydown",function(){if(w.event.which===13)this.blur()}).call(c)}if(s.immediate)t();else r.on("click",t);return w.rebind(o,u,"on")}},{"../constants/alignment":260,"../constants/xmlns_namespaces":266,"../lib":285,"@plotly/d3":20}],308:[function(e,t,r){"use strict";var l={};r.throttle=function e(t,r,a){var n=l[t];var i=Date.now();if(!n){for(var o in l){if(l[o].ts<i-6e4){delete l[o]}}n=l[t]={ts:0,timer:null}}u(n);function s(){a();n.ts=Date.now();if(n.onDone){n.onDone();n.onDone=null}}if(i>n.ts+r){s();return}n.timer=setTimeout(function(){s();n.timer=null},r)};r.done=function(e){var a=l[e];if(!a||!a.timer)return Promise.resolve();return new Promise(function(t){var r=a.onDone;a.onDone=function e(){if(r)r();t();a.onDone=null}})};r.clear=function(e){if(e){u(l[e]);delete l[e]}else{for(var t in l)r.clear(t)}};function u(e){if(e&&e.timer!==null){clearTimeout(e.timer);e.timer=null}}},{}],309:[function(e,t,r){"use strict";var n=e("fast-isnumeric");t.exports=function e(t,r){if(t>0)return Math.log(t)/Math.LN10;var a=Math.log(Math.min(r[0],r[1]))/Math.LN10;if(!n(a))a=Math.log(Math.max(r[0],r[1]))/Math.LN10-6;return a}},{"fast-isnumeric":31}],310:[function(e,t,r){"use strict";t.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],311:[function(e,t,r){"use strict";t.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],312:[function(e,t,r){"use strict";var u=e("../registry");t.exports=function e(t){var r=u.layoutArrayContainers;var a=u.layoutArrayRegexes;var n=t.split("[")[0];var i;var o;for(var s=0;s<a.length;s++){o=t.match(a[s]);if(o&&o.index===0){i=o[0];break}}if(!i)i=r[r.indexOf(n)];if(!i)return false;var l=t.substr(i.length);if(!l)return{array:i,index:"",property:""};o=l.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/);if(!o)return false;return{array:i,index:Number(o[1]),property:o[3]||""}}},{"../registry":373}],313:[function(e,t,r){"use strict";var a=e("../lib");var o=a.extendFlat;var s=a.isPlainObject;var n={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]};var i={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]};var l=n.flags.slice().concat(["fullReplot"]);var u=i.flags.slice().concat("layoutReplot");t.exports={traces:n,layout:i,traceFlags:function(){return c(l)},layoutFlags:function(){return c(u)},update:function(e,t){var r=t.editType;if(r&&r!=="none"){var a=r.split("+");for(var n=0;n<a.length;n++){e[a[n]]=true}}},overrideAll:f};function c(e){var t={};for(var r=0;r<e.length;r++)t[e[r]]=false;return t}function f(e,t,r){var a=o({},e);for(var n in a){var i=a[n];if(s(i)){a[n]=d(i,t,r,n)}}if(r==="from-root")a.editType=t;return a}function d(e,t,r,a){if(e.valType){var n=o({},e);n.editType=t;if(Array.isArray(e.items)){n.items=new Array(e.items.length);for(var i=0;i<e.items.length;i++){n.items[i]=d(e.items[i],t,"from-root")}}return n}else{return f(e,t,a.charAt(0)==="_"?"nested":"from-root")}}},{"../lib":285}],314:[function(e,t,A){"use strict";var c=e("fast-isnumeric");var S=e("gl-mat4/fromQuat");var _=e("../registry");var E=e("../lib");var L=e("../plots/plots");var r=e("../plots/cartesian/axis_ids");var C=e("../components/color");var D=r.cleanId;var f=r.getFromTrace;var w=_.traceIs;A.clearPromiseQueue=function(e){if(Array.isArray(e._promises)&&e._promises.length>0){E.log("Clearing previous rejected promises from queue.")}e._promises=[]};A.cleanLayout=function(e){var t,r;if(!e)e={};if(e.xaxis1){if(!e.xaxis)e.xaxis=e.xaxis1;delete e.xaxis1}if(e.yaxis1){if(!e.yaxis)e.yaxis=e.yaxis1;delete e.yaxis1}if(e.scene1){if(!e.scene)e.scene=e.scene1;delete e.scene1}var a=(L.subplotsRegistry.cartesian||{}).attrRegex;var n=(L.subplotsRegistry.polar||{}).attrRegex;var i=(L.subplotsRegistry.ternary||{}).attrRegex;var o=(L.subplotsRegistry.gl3d||{}).attrRegex;var s=Object.keys(e);for(t=0;t<s.length;t++){var l=s[t];if(a&&a.test(l)){var u=e[l];if(u.anchor&&u.anchor!=="free"){u.anchor=D(u.anchor)}if(u.overlaying)u.overlaying=D(u.overlaying);if(!u.type){if(u.isdate)u.type="date";else if(u.islog)u.type="log";else if(u.isdate===false&&u.islog===false)u.type="linear"}if(u.autorange==="withzero"||u.autorange==="tozero"){u.autorange=true;u.rangemode="tozero"}delete u.islog;delete u.isdate;delete u.categories;if(P(u,"domain"))delete u.domain;if(u.autotick!==undefined){if(u.tickmode===undefined){u.tickmode=u.autotick?"auto":"linear"}delete u.autotick}I(u)}else if(n&&n.test(l)){var c=e[l];I(c.radialaxis)}else if(i&&i.test(l)){var f=e[l];I(f.aaxis);I(f.baxis);I(f.caxis)}else if(o&&o.test(l)){var d=e[l];var v=d.cameraposition;if(Array.isArray(v)&&v[0].length===4){var p=v[0];var h=v[1];var m=v[2];var g=S([],p);var y=[];for(r=0;r<3;++r){y[r]=h[r]+m*g[2+4*r]}d.camera={eye:{x:y[0],y:y[1],z:y[2]},center:{x:h[0],y:h[1],z:h[2]},up:{x:0,y:0,z:1}};delete d.cameraposition}I(d.xaxis);I(d.yaxis);I(d.zaxis)}}var x=Array.isArray(e.annotations)?e.annotations.length:0;for(t=0;t<x;t++){var b=e.annotations[t];if(!E.isPlainObject(b))continue;if(b.ref){if(b.ref==="paper"){b.xref="paper";b.yref="paper"}else if(b.ref==="data"){b.xref="x";b.yref="y"}delete b.ref}O(b,"xref");O(b,"yref")}var _=Array.isArray(e.shapes)?e.shapes.length:0;for(t=0;t<_;t++){var w=e.shapes[t];if(!E.isPlainObject(w))continue;O(w,"xref");O(w,"yref")}var T=Array.isArray(e.images)?e.images.length:0;for(t=0;t<T;t++){var k=e.images[t];if(!E.isPlainObject(k))continue;O(k,"xref");O(k,"yref")}var M=e.legend;if(M){if(M.x>3){M.x=1.02;M.xanchor="left"}else if(M.x<-2){M.x=-.02;M.xanchor="right"}if(M.y>3){M.y=1.02;M.yanchor="bottom"}else if(M.y<-2){M.y=-.02;M.yanchor="top"}}I(e);if(e.dragmode==="rotate")e.dragmode="orbit";C.clean(e);if(e.template&&e.template.layout){A.cleanLayout(e.template.layout)}return e};function O(e,t){var r=e[t];var a=t.charAt(0);if(r&&r!=="paper"){e[t]=D(r,a,true)}}function I(n){if(n){if(typeof n.title==="string"||typeof n.title==="number"){n.title={text:n.title}}e("titlefont","font");e("titleposition","position");e("titleside","side");e("titleoffset","offset")}function e(e,t){var r=n[e];var a=n.title&&n.title[t];if(r&&!a){if(!n.title){n.title={}}n.title[t]=n[e];delete n[e]}}}A.cleanData=function(e){for(var t=0;t<e.length;t++){var r=e[t];var a;if(r.type==="histogramy"&&"xbins"in r&&!("ybins"in r)){r.ybins=r.xbins;delete r.xbins}if(r.error_y&&"opacity"in r.error_y){var n=C.defaults;var i=r.error_y.color||(w(r,"bar")?C.defaultLine:n[t%n.length]);r.error_y.color=C.addOpacity(C.rgb(i),C.opacity(i)*r.error_y.opacity);delete r.error_y.opacity}if("bardir"in r){if(r.bardir==="h"&&(w(r,"bar")||r.type.substr(0,9)==="histogram")){r.orientation="h";A.swapXYData(r)}delete r.bardir}if(r.type==="histogramy")A.swapXYData(r);if(r.type==="histogramx"||r.type==="histogramy"){r.type="histogram"}if("scl"in r&&!("colorscale"in r)){r.colorscale=r.scl;delete r.scl}if("reversescl"in r&&!("reversescale"in r)){r.reversescale=r.reversescl;delete r.reversescl}if(r.xaxis)r.xaxis=D(r.xaxis,"x");if(r.yaxis)r.yaxis=D(r.yaxis,"y");if(w(r,"gl3d")&&r.scene){r.scene=L.subplotsRegistry.gl3d.cleanId(r.scene)}if(!w(r,"pie-like")&&!w(r,"bar-like")){if(Array.isArray(r.textposition)){for(a=0;a<r.textposition.length;a++){r.textposition[a]=M(r.textposition[a])}}else if(r.textposition){r.textposition=M(r.textposition)}}var o=_.getModule(r);if(o&&o.colorbar){var s=o.colorbar.container;var l=s?r[s]:r;if(l&&l.colorscale){if(l.colorscale==="YIGnBu")l.colorscale="YlGnBu";if(l.colorscale==="YIOrRd")l.colorscale="YlOrRd"}}if(r.type==="surface"&&E.isPlainObject(r.contours)){var u=["x","y","z"];for(a=0;a<u.length;a++){var c=r.contours[u[a]];if(!E.isPlainObject(c))continue;if(c.highlightColor){c.highlightcolor=c.highlightColor;delete c.highlightColor}if(c.highlightWidth){c.highlightwidth=c.highlightWidth;delete c.highlightWidth}}}if(r.type==="candlestick"||r.type==="ohlc"){var f=(r.increasing||{}).showlegend!==false;var d=(r.decreasing||{}).showlegend!==false;var v=T(r.increasing);var p=T(r.decreasing);if(v!==false&&p!==false){var h=k(v,p,f,d);if(h)r.name=h}else if((v||p)&&!r.name){r.name=v||p}}if(Array.isArray(r.transforms)){var m=r.transforms;for(a=0;a<m.length;a++){var g=m[a];if(!E.isPlainObject(g))continue;switch(g.type){case"filter":if(g.filtersrc){g.target=g.filtersrc;delete g.filtersrc}if(g.calendar){if(!g.valuecalendar){g.valuecalendar=g.calendar}delete g.calendar}break;case"groupby":g.styles=g.styles||g.style;if(g.styles&&!Array.isArray(g.styles)){var y=g.styles;var x=Object.keys(y);g.styles=[];for(var b=0;b<x.length;b++){g.styles.push({target:x[b],value:y[x[b]]})}}break}}}if(P(r,"line"))delete r.line;if("marker"in r){if(P(r.marker,"line"))delete r.marker.line;if(P(r,"marker"))delete r.marker}C.clean(r);if(r.autobinx){delete r.autobinx;delete r.xbins}if(r.autobiny){delete r.autobiny;delete r.ybins}I(r);if(r.colorbar)I(r.colorbar);if(r.marker&&r.marker.colorbar)I(r.marker.colorbar);if(r.line&&r.line.colorbar)I(r.line.colorbar);if(r.aaxis)I(r.aaxis);if(r.baxis)I(r.baxis)}};function T(e){if(!E.isPlainObject(e))return false;var t=e.name;delete e.name;delete e.showlegend;return(typeof t==="string"||typeof t==="number")&&String(t)}function k(e,t,r,a){if(r&&!a)return e;if(a&&!r)return t;if(!e.trim())return t;if(!t.trim())return e;var n=Math.min(e.length,t.length);var i;for(i=0;i<n;i++){if(e.charAt(i)!==t.charAt(i))break}var o=e.substr(0,i);return o.trim()}function M(e){var t="middle";var r="center";if(typeof e==="string"){if(e.indexOf("top")!==-1)t="top";else if(e.indexOf("bottom")!==-1)t="bottom";if(e.indexOf("left")!==-1)r="left";else if(e.indexOf("right")!==-1)r="right"}return t+" "+r}function P(e,t){return t in e&&typeof e[t]==="object"&&Object.keys(e[t]).length===0}A.swapXYData=function(e){var t;E.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]);if(Array.isArray(e.z)&&Array.isArray(e.z[0])){if(e.transpose)delete e.transpose;else e.transpose=true}if(e.error_x&&e.error_y){var r=e.error_y;var a="copy_ystyle"in r?r.copy_ystyle:!(r.color||r.thickness||r.width);E.swapAttrs(e,["error_?.copy_ystyle"]);if(a){E.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}}if(typeof e.hoverinfo==="string"){var n=e.hoverinfo.split("+");for(t=0;t<n.length;t++){if(n[t]==="x")n[t]="y";else if(n[t]==="y")n[t]="x"}e.hoverinfo=n.join("+")}};A.coerceTraceIndices=function(e,t){if(c(t)){return[t]}else if(!Array.isArray(t)||!t.length){return e.data.map(function(e,t){return t})}else if(Array.isArray(t)){var r=[];for(var a=0;a<t.length;a++){if(E.isIndex(t[a],e.data.length)){r.push(t[a])}else{E.warn("trace index (",t[a],") is not a number or is out of bounds")}}return r}return t};A.manageArrayContainers=function(e,t,r){var a=e.obj;var n=e.parts;var i=n.length;var o=n[i-1];var s=c(o);if(s&&t===null){var l=n.slice(0,i-1).join(".");var u=E.nestedProperty(a,l).get();u.splice(o,1)}else if(s&&e.get()===undefined){if(e.get()===undefined)r[e.astr]=null;e.set(t)}else{e.set(t)}};var a=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function n(e){var t=e.search(a);if(t>0)return e.substr(0,t)}A.hasParent=function(e,t){var r=n(t);while(r){if(r in e)return true;r=n(r)}return false};var d=["x","y","z"];A.clearAxisTypes=function(e,t,r){for(var a=0;a<t.length;a++){var n=e._fullData[a];for(var i=0;i<3;i++){var o=f(e,n,d[i]);if(o&&o.type!=="log"){var s=o._name;var l=o._id.substr(1);if(l.substr(0,5)==="scene"){if(r[l]!==undefined)continue;s=l+"."+s}var u=s+".type";if(r[s]===undefined&&r[u]===undefined){E.nestedProperty(e.layout,u).set(null)}}}}}},{"../components/color":155,"../lib":285,"../plots/cartesian/axis_ids":335,"../plots/plots":366,"../registry":373,"fast-isnumeric":31,"gl-mat4/fromQuat":37}],315:[function(e,t,r){"use strict";var a=e("./plot_api");r._doPlot=a._doPlot;r.newPlot=a.newPlot;r.restyle=a.restyle;r.relayout=a.relayout;r.redraw=a.redraw;r.update=a.update;r._guiRestyle=a._guiRestyle;r._guiRelayout=a._guiRelayout;r._guiUpdate=a._guiUpdate;r._storeDirectGUIEdit=a._storeDirectGUIEdit;r.react=a.react;r.extendTraces=a.extendTraces;r.prependTraces=a.prependTraces;r.addTraces=a.addTraces;r.deleteTraces=a.deleteTraces;r.moveTraces=a.moveTraces;r.purge=a.purge;r.addFrames=a.addFrames;r.deleteFrames=a.deleteFrames;r.animate=a.animate;r.setPlotConfig=a.setPlotConfig;r.toImage=e("./to_image");r.validate=e("./validate");r.downloadImage=e("../snapshot/download");var n=e("./template_api");r.makeTemplate=n.makeTemplate;r.validateTemplate=n.validateTemplate},{"../snapshot/download":375,"./plot_api":317,"./template_api":322,"./to_image":323,"./validate":324}],316:[function(e,t,r){"use strict";var a=e("../lib/is_plain_object");var C=e("../lib/noop");var D=e("../lib/loggers");var O=e("../lib/search").sorterAsc;var I=e("../registry");r.containerArrayMatch=e("./container_array_match");var P=r.isAddVal=function e(t){return t==="add"||a(t)};var R=r.isRemoveVal=function e(t){return t===null||t==="remove"};r.applyContainerArrayChanges=function e(t,r,a,n,i){var o=r.astr;var s=I.getComponentMethod(o,"supplyLayoutDefaults");var l=I.getComponentMethod(o,"draw");var u=I.getComponentMethod(o,"drawOne");var c=n.replot||n.recalc||s===C||l===C;var f=t.layout;var d=t._fullLayout;if(a[""]){if(Object.keys(a).length>1){D.warn("Full array edits are incompatible with other edits",o)}var v=a[""][""];if(R(v))r.set(null);else if(Array.isArray(v))r.set(v);else{D.warn("Unrecognized full array edit value",o,v);return true}if(c)return false;s(f,d);l(t);return true}var p=Object.keys(a).map(Number).sort(O);var h=r.get();var m=h||[];var g=i(d,o).get();var y=[];var x=-1;var b=m.length;var _;var w;var T;var k;var M;var A;var S,E;for(_=0;_<p.length;_++){T=p[_];k=a[T];M=Object.keys(k);A=k[""],S=P(A);if(T<0||T>m.length-(S?0:1)){D.warn("index out of range",o,T);continue}if(A!==undefined){if(M.length>1){D.warn("Insertion & removal are incompatible with edits to the same index.",o,T)}if(R(A)){y.push(T)}else if(S){if(A==="add")A={};m.splice(T,0,A);if(g)g.splice(T,0,{})}else{D.warn("Unrecognized full object edit value",o,T,A)}if(x===-1)x=T}else{for(w=0;w<M.length;w++){E=o+"["+T+"].";i(m[T],M[w],E).set(k[M[w]])}}}for(_=y.length-1;_>=0;_--){m.splice(y[_],1);if(g)g.splice(y[_],1)}if(!m.length)r.set(null);else if(!h)r.set(m);if(c)return false;s(f,d);if(u!==C){var L;if(x===-1){L=p}else{b=Math.max(m.length,b);L=[];for(_=0;_<p.length;_++){T=p[_];if(T>=x)break;L.push(T)}for(_=x;_<b;_++){L.push(_)}}for(_=0;_<L.length;_++){u(t,L[_])}}else l(t);return true}},{"../lib/is_plain_object":286,"../lib/loggers":289,"../lib/noop":294,"../lib/search":304,"../registry":373,"./container_array_match":312}],317:[function(e,t,C){"use strict";var k=e("@plotly/d3");var v=e("fast-isnumeric");var f=e("has-hover");var K=e("../lib");var Q=K.nestedProperty;var M=e("../lib/events");var T=e("../lib/queue");var ee=e("../registry");var te=e("./plot_schema");var $=e("../plots/plots");var re=e("../plots/cartesian/axes");var A=e("../components/drawing");var a=e("../components/color");var S=e("../plots/cartesian/graph_interact").initInteractions;var o=e("../constants/xmlns_namespaces");var r=e("../plots/cartesian/select").clearSelect;var d=e("./plot_config").dfltConfig;var ae=e("./manage_arrays");var ne=e("./helpers");var D=e("./subroutines");var ie=e("./edit_types");var oe=e("../plots/cartesian/constants").AX_NAME_PATTERN;var E=0;var L=5;function n(n,e,t,r){var a;n=K.getGraphDiv(n);M.init(n);if(K.isPlainObject(e)){var i=e;e=i.data;t=i.layout;r=i.config;a=i.frames}var o=M.triggerHandler(n,"plotly_beforeplot",[e,t,r]);if(o===false)return Promise.reject();if(!e&&!t&&!K.isPlotDiv(n)){K.warn("Calling _doPlot as if redrawing "+"but this container doesn't yet have a plot.",n)}function s(){if(a){return C.addFrames(n,a)}}I(n,r);if(!t)t={};k.select(n).classed("js-plotly-plot",true);A.makeTester();if(!Array.isArray(n._promises))n._promises=[];var l=(n.data||[]).length===0&&Array.isArray(e);if(Array.isArray(e)){ne.cleanData(e);if(l)n.data=e;else n.data.push.apply(n.data,e);n.empty=false}if(!n.layout||l){n.layout=ne.cleanLayout(t)}$.supplyDefaults(n);var u=n._fullLayout;var c=u._has("cartesian");u._replotting=true;if(l||u._shouldCreateBgLayer){Le(n);if(u._shouldCreateBgLayer){delete u._shouldCreateBgLayer}}A.initGradients(n);A.initPatterns(n);if(l)re.saveShowSpikeInitial(n);var f=!n.calcdata||n.calcdata.length!==(n._fullData||[]).length;if(f)$.doCalcdata(n);for(var d=0;d<n.calcdata.length;d++){n.calcdata[d][0].trace=n._fullData[d]}if(n._context.responsive){if(!n._responsiveChartHandler){n._responsiveChartHandler=function(){if(!K.isHidden(n))$.resize(n)};window.addEventListener("resize",n._responsiveChartHandler)}}else{K.clearResponsive(n)}var v=K.extendFlat({},u._size);var p=0;function h(){var e=u._basePlotModules;for(var t=0;t<e.length;t++){if(e[t].drawFramework){e[t].drawFramework(n)}}if(!u._glcanvas&&u._has("gl")){u._glcanvas=u._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:true,pick:false},{key:"focusLayer",context:false,pick:false},{key:"pickLayer",context:false,pick:true}],function(e){return e.key});u._glcanvas.enter().append("canvas").attr("class",function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"})}if(u._glcanvas){u._glcanvas.attr("width",u.width).attr("height",u.height);var r=u._glcanvas.data()[0].regl;if(r){if(Math.floor(u.width)!==r._gl.drawingBufferWidth||Math.floor(u.height)!==r._gl.drawingBufferHeight){var a="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(p){K.error(a)}else{K.log(a+" Clearing graph and plotting again.");$.cleanPlot([],{},n._fullData,u);$.supplyDefaults(n);u=n._fullLayout;$.doCalcdata(n);p++;return h()}}}}if(u.modebar.orientation==="h"){u._modebardiv.style("height",null).style("width","100%")}else{u._modebardiv.style("width",null).style("height",u.height+"px")}return $.previousPromises(n)}function m(){$.clearAutoMarginIds(n);D.drawMarginPushers(n);re.allowAutoMargin(n);if(u._has("pie")){var e=n._fullData;for(var t=0;t<e.length;t++){var r=e[t];if(r.type==="pie"&&r.automargin){$.allowAutoMargin(n,"pie."+r.uid+".automargin")}}}$.doAutoMargin(n);return $.previousPromises(n)}function g(){if(!$.didMarginChange(v,u._size))return;return K.syncOrAsync([m,D.layoutStyles],n)}function y(){if(!f){x();return}return K.syncOrAsync([ee.getComponentMethod("shapes","calcAutorange"),ee.getComponentMethod("annotations","calcAutorange"),x],n)}function x(){if(n._transitioning)return;D.doAutoRangeAndConstraints(n);if(l)re.saveRangeInitial(n);ee.getComponentMethod("rangeslider","calcAutorange")(n)}function b(){return re.draw(n,l?"":"redraw")}var _=[$.previousPromises,s,h,m,g];if(c)_.push(y);_.push(D.layoutStyles);if(c){_.push(b,function e(t){if(t._fullLayout._insideTickLabelsAutorange){q(t,t._fullLayout._insideTickLabelsAutorange).then(function(){t._fullLayout._insideTickLabelsAutorange=undefined})}})}_.push(D.drawData,D.finalDraw,S,$.addLinks,$.rehover,$.redrag,$.doAutoMargin,w,$.previousPromises);function w(e){if(e._fullLayout._insideTickLabelsAutorange){if(l)re.saveRangeInitial(e,true)}}var T=K.syncOrAsync(_,n);if(!T||!T.then)T=Promise.resolve();return T.then(function(){O(n);return n})}function O(e){var t=e._fullLayout;if(t._redrawFromAutoMarginCount){t._redrawFromAutoMarginCount--}else{e.emit("plotly_afterplot")}}function i(e){return K.extendFlat(d,e)}function p(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){K.error(e)}}function h(e,t){var r=a.combine(t,"white");p(e,r)}function I(e,t){if(!e._context){e._context=K.extendDeep({},d);var r=k.select("base");e._context._baseUrl=r.size()&&r.attr("href")?window.location.href.split("#")[0]:""}var a=e._context;var n,i,o;if(t){i=Object.keys(t);for(n=0;n<i.length;n++){o=i[n];if(o==="editable"||o==="edits")continue;if(o in a){if(o==="setBackground"&&t[o]==="opaque"){a[o]=h}else{a[o]=t[o]}}}if(t.plot3dPixelRatio&&!a.plotGlPixelRatio){a.plotGlPixelRatio=a.plot3dPixelRatio}var s=t.editable;if(s!==undefined){a.editable=s;i=Object.keys(a.edits);for(n=0;n<i.length;n++){a.edits[i[n]]=s}}if(t.edits){i=Object.keys(t.edits);for(n=0;n<i.length;n++){o=i[n];if(o in a.edits){a.edits[o]=t.edits[o]}}}a._exportedPlot=t._exportedPlot}if(a.staticPlot){a.editable=false;a.edits={};a.autosizable=false;a.scrollZoom=false;a.doubleClick=false;a.showTips=false;a.showLink=false;a.displayModeBar=false}if(a.displayModeBar==="hover"&&!f){a.displayModeBar=true}if(a.setBackground==="transparent"||typeof a.setBackground!=="function"){a.setBackground=p}a._hasZeroHeight=a._hasZeroHeight||e.clientHeight===0;a._hasZeroWidth=a._hasZeroWidth||e.clientWidth===0;var l=a.scrollZoom;var u=a._scrollZoom={};if(l===true){u.cartesian=1;u.gl3d=1;u.geo=1;u.mapbox=1}else if(typeof l==="string"){var c=l.split("+");for(n=0;n<c.length;n++){u[c[n]]=1}}else if(l!==false){u.gl3d=1;u.geo=1;u.mapbox=1}}function s(e){e=K.getGraphDiv(e);if(!K.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e)}ne.cleanData(e.data);ne.cleanLayout(e.layout);e.calcdata=undefined;return C._doPlot(e).then(function(){e.emit("plotly_redraw");return e})}function l(e,t,r,a){e=K.getGraphDiv(e);$.cleanPlot([],{},e._fullData||[],e._fullLayout||{});$.purge(e);return C._doPlot(e,t,r,a)}function m(e,t){var r=t+1;var a=[];var n;var i;for(n=0;n<e.length;n++){i=e[n];if(i<0){a.push(r+i)}else{a.push(i)}}return a}function c(e,t,r){var a,n;for(a=0;a<t.length;a++){n=t[a];if(n!==parseInt(n,10)){throw new Error("all values in "+r+" must be integers")}if(n>=e.data.length||n<-e.data.length){throw new Error(r+" must be valid indices for gd.data.")}if(t.indexOf(n,a+1)>-1||n>=0&&t.indexOf(-e.data.length+n)>-1||n<0&&t.indexOf(e.data.length+n)>-1){throw new Error("each index in "+r+" must be unique.")}}}function g(e,t,r){if(!Array.isArray(e.data)){throw new Error("gd.data must be an array.")}if(typeof t==="undefined"){throw new Error("currentIndices is a required argument.")}else if(!Array.isArray(t)){t=[t]}c(e,t,"currentIndices");if(typeof r!=="undefined"&&!Array.isArray(r)){r=[r]}if(typeof r!=="undefined"){c(e,r,"newIndices")}if(typeof r!=="undefined"&&t.length!==r.length){throw new Error("current and new indices must be of equal length.")}}function y(e,t,r){var a,n;if(!Array.isArray(e.data)){throw new Error("gd.data must be an array.")}if(typeof t==="undefined"){throw new Error("traces must be defined.")}if(!Array.isArray(t)){t=[t]}for(a=0;a<t.length;a++){n=t[a];if(typeof n!=="object"||(Array.isArray(n)||n===null)){throw new Error("all values in traces array must be non-array objects")}}if(typeof r!=="undefined"&&!Array.isArray(r)){r=[r]}if(typeof r!=="undefined"&&r.length!==t.length){throw new Error("if indices is specified, traces.length must equal indices.length")}}function x(e,t,r,a){var n=K.isPlainObject(a);if(!Array.isArray(e.data)){throw new Error("gd.data must be an array")}if(!K.isPlainObject(t)){throw new Error("update must be a key:value object")}if(typeof r==="undefined"){throw new Error("indices must be an integer or array of integers")}c(e,r,"indices");for(var i in t){if(!Array.isArray(t[i])||t[i].length!==r.length){throw new Error("attribute "+i+" must be an array of length equal to indices array length")}if(n&&(!(i in a)||!Array.isArray(a[i])||a[i].length!==t[i].length)){throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 "+"corrispondence with the keys and number of traces in the update object")}}}function b(e,t,r,a){var n=K.isPlainObject(a);var i=[];var o,s,l,u,c;if(!Array.isArray(r))r=[r];r=m(r,e.data.length-1);for(var f in t){for(var d=0;d<r.length;d++){o=e.data[r[d]];l=Q(o,f);s=l.get();u=t[f][d];if(!K.isArrayOrTypedArray(u)){throw new Error("attribute: "+f+" index: "+d+" must be an array")}if(!K.isArrayOrTypedArray(s)){throw new Error("cannot extend missing or non-array attribute: "+f)}if(s.constructor!==u.constructor){throw new Error("cannot extend array with an array of a different type: "+f)}c=n?a[f][d]:a;if(!v(c))c=-1;i.push({prop:l,target:s,insert:u,maxp:Math.floor(c)})}}return i}function u(e,t,r,a,n){x(e,t,r,a);var i=b(e,t,r,a);var o={};var s={};for(var l=0;l<i.length;l++){var u=i[l].prop;var c=i[l].maxp;var f=n(i[l].target,i[l].insert,c);u.set(f[0]);if(!Array.isArray(o[u.astr]))o[u.astr]=[];o[u.astr].push(f[1]);if(!Array.isArray(s[u.astr]))s[u.astr]=[];s[u.astr].push(i[l].target.length)}return{update:o,maxPoints:s}}function _(e,t){var r=new e.constructor(e.length+t.length);r.set(e);r.set(t,e.length);return r}function w(e,t,r,a){e=K.getGraphDiv(e);function n(e,t,r){var a,n;if(K.isTypedArray(e)){if(r<0){var i=new e.constructor(0);var o=_(e,t);if(r<0){a=o;n=i}else{a=i;n=o}}else{a=new e.constructor(r);n=new e.constructor(e.length+t.length-r);if(r===t.length){a.set(t);n.set(e)}else if(r<t.length){var s=t.length-r;a.set(t.subarray(s));n.set(e);n.set(t.subarray(0,s),e.length)}else{var l=r-t.length;var u=e.length-l;a.set(e.subarray(u));a.set(t,l);n.set(e.subarray(0,u))}}}else{a=e.concat(t);n=r>=0&&r<a.length?a.splice(0,a.length-r):[]}return[a,n]}var i=u(e,t,r,a,n);var o=C.redraw(e);var s=[e,i.update,r,i.maxPoints];T.add(e,C.prependTraces,s,w,arguments);return o}function P(e,t,r,a){e=K.getGraphDiv(e);function n(e,t,r){var a,n;if(K.isTypedArray(e)){if(r<=0){var i=new e.constructor(0);var o=_(t,e);if(r<0){a=o;n=i}else{a=i;n=o}}else{a=new e.constructor(r);n=new e.constructor(e.length+t.length-r);if(r===t.length){a.set(t);n.set(e)}else if(r<t.length){var s=t.length-r;a.set(t.subarray(0,s));n.set(t.subarray(s));n.set(e,s)}else{var l=r-t.length;a.set(t);a.set(e.subarray(0,l),t.length);n.set(e.subarray(l))}}}else{a=t.concat(e);n=r>=0&&r<a.length?a.splice(r,a.length):[]}return[a,n]}var i=u(e,t,r,a,n);var o=C.redraw(e);var s=[e,i.update,r,i.maxPoints];T.add(e,C.extendTraces,s,P,arguments);return o}function R(t,r,e){t=K.getGraphDiv(t);var a=[];var n=C.deleteTraces;var i=R;var o=[t,a];var s=[t,r];var l;var u;y(t,r,e);if(!Array.isArray(r)){r=[r]}r=r.map(function(e){return K.extendFlat({},e)});ne.cleanData(r);for(l=0;l<r.length;l++){t.data.push(r[l])}for(l=0;l<r.length;l++){a.push(-r.length+l)}if(typeof e==="undefined"){u=C.redraw(t);T.add(t,n,o,i,s);return u}if(!Array.isArray(e)){e=[e]}try{g(t,a,e)}catch(e){t.data.splice(t.data.length-r.length,r.length);throw e}T.startSequence(t);T.add(t,n,o,i,s);u=C.moveTraces(t,a,e);T.stopSequence(t);return u}function N(e,t){e=K.getGraphDiv(e);var r=[];var a=C.addTraces;var n=N;var i=[e,r,t];var o=[e,t];var s;var l;if(typeof t==="undefined"){throw new Error("indices must be an integer or array of integers.")}else if(!Array.isArray(t)){t=[t]}c(e,t,"indices");t=m(t,e.data.length-1);t.sort(K.sorterDes);for(s=0;s<t.length;s+=1){l=e.data.splice(t[s],1)[0];r.push(l)}var u=C.redraw(e);T.add(e,a,i,n,o);return u}function z(e,t,r){e=K.getGraphDiv(e);var a=[];var n=[];var i=z;var o=z;var s=[e,r,t];var l=[e,t,r];var u;g(e,t,r);t=Array.isArray(t)?t:[t];if(typeof r==="undefined"){r=[];for(u=0;u<t.length;u++){r.push(-t.length+u)}}r=Array.isArray(r)?r:[r];t=m(t,e.data.length-1);r=m(r,e.data.length-1);for(u=0;u<e.data.length;u++){if(t.indexOf(u)===-1){a.push(e.data[u])}}for(u=0;u<t.length;u++){n.push({newIndex:r[u],trace:e.data[t[u]]})}n.sort(function(e,t){return e.newIndex-t.newIndex});for(u=0;u<n.length;u+=1){a.splice(n[u].newIndex,0,n[u].trace)}e.data=a;var c=C.redraw(e);T.add(e,i,s,o,l);return c}function F(e,t,r,a){e=K.getGraphDiv(e);ne.clearPromiseQueue(e);var n={};if(typeof t==="string")n[t]=r;else if(K.isPlainObject(t)){n=K.extendFlat({},t);if(a===undefined)a=r}else{K.warn("Restyle fail.",t,r,a);return Promise.reject()}if(Object.keys(n).length)e.changed=true;var i=ne.coerceTraceIndices(e,a);var o=B(e,n,i);var s=o.flags;if(s.calc)e.calcdata=undefined;if(s.clearAxisTypes)ne.clearAxisTypes(e,i,{});var l=[];if(s.fullReplot){l.push(C._doPlot)}else{l.push($.previousPromises);$.supplyDefaults(e);if(s.markerSize){$.doCalcdata(e);Y(l)}if(s.style)l.push(D.doTraceStyle);if(s.colorbars)l.push(D.doColorBars);l.push(O)}l.push($.rehover,$.redrag);T.add(e,F,[e,o.undoit,o.traces],F,[e,o.redoit,o.traces]);var u=K.syncOrAsync(l,e);if(!u||!u.then)u=Promise.resolve();return u.then(function(){e.emit("plotly_restyle",o.eventData);return e})}function se(e){if(e===undefined)return null;return e}function le(o,e){if(!e)return Q;return function(e,r,a){var n=Q(e,r);var i=n.set;n.set=function(e){var t=(a||"")+r;j(t,n.get(),e,o);i(e)};return n}}function j(e,t,r,a){if(Array.isArray(t)||Array.isArray(r)){var n=Array.isArray(t)?t:[];var i=Array.isArray(r)?r:[];var o=Math.max(n.length,i.length);for(var s=0;s<o;s++){j(e+"["+s+"]",n[s],i[s],a)}}else if(K.isPlainObject(t)||K.isPlainObject(r)){var l=K.isPlainObject(t)?t:{};var u=K.isPlainObject(r)?r:{};var c=K.extendFlat({},l,u);for(var f in c){j(e+"."+f,l[f],u[f],a)}}else if(a[e]===undefined){a[e]=se(t)}}function H(e,t,r){for(var a in r){var n=Q(e,a);j(a,n.get(),r[a],t)}}function B(o,s,l){var u=o._fullLayout;var a=o._fullData;var c=o.data;var f=u._guiEditing;var d=le(u._preGUI,f);var e=K.extendDeepAll({},s);var t;ue(s);var r=ie.traceFlags();var n={};var v={};var i;function p(){return l.map(function(){return undefined})}function h(e){var t=re.id2name(e);if(i.indexOf(t)===-1)i.push(t)}function m(e){return"LAYOUT"+e+".autorange"}function g(e){return"LAYOUT"+e+".range"}function y(e){for(var t=e;t<a.length;t++){if(a[t]._input===c[e])return a[t]}}function x(e,t,r){if(Array.isArray(e)){e.forEach(function(e){x(e,t,r)});return}if(e in s||ne.hasParent(s,e))return;var a;if(e.substr(0,6)==="LAYOUT"){a=d(o.layout,e.replace("LAYOUT",""))}else{var n=l[r];var i=u._tracePreGUI[y(n)._fullInput.uid];a=le(i,f)(c[n],e)}if(!(e in v)){v[e]=p()}if(v[e][r]===undefined){v[e][r]=se(a.get())}if(t!==undefined){a.set(t)}}function b(t){return function(e){return a[e][t]}}function _(r){return function(e,t){return e===false?a[l[t]][r]:null}}for(var w in s){if(ne.hasParent(s,w)){throw new Error("cannot set "+w+" and a parent attribute simultaneously")}var T=s[w];var k;var M;var A;var S;var E;var L;if(w==="autobinx"||w==="autobiny"){w=w.charAt(w.length-1)+"bins";if(Array.isArray(T))T=T.map(_(w));else if(T===false)T=l.map(b(w));else T=null}n[w]=T;if(w.substr(0,6)==="LAYOUT"){A=d(o.layout,w.replace("LAYOUT",""));v[w]=[se(A.get())];A.set(Array.isArray(T)?T[0]:T);r.calc=true;continue}v[w]=p();for(t=0;t<l.length;t++){k=c[l[t]];M=y(l[t]);var C=u._tracePreGUI[M._fullInput.uid];A=le(C,f)(k,w);S=A.get();E=Array.isArray(T)?T[t%T.length]:T;if(E===undefined)continue;var D=A.parts[A.parts.length-1];var O=w.substr(0,w.length-D.length-1);var I=O?O+".":"";var P=O?Q(M,O).get():M;L=te.getTraceValObject(M,A.parts);if(L&&L.impliedEdits&&E!==null){for(var R in L.impliedEdits){x(K.relativeAttr(w,R),L.impliedEdits[R],t)}}else if((D==="thicknessmode"||D==="lenmode")&&S!==E&&(E==="fraction"||E==="pixels")&&P){var N=u._size;var z=P.orient;var F=z==="top"||z==="bottom";if(D==="thicknessmode"){var j=F?N.h:N.w;x(I+"thickness",P.thickness*(E==="fraction"?1/j:j),t)}else{var H=F?N.w:N.h;x(I+"len",P.len*(E==="fraction"?1/H:H),t)}}else if(w==="type"&&(E==="pie"!==(S==="pie")||E==="funnelarea"!==(S==="funnelarea"))){var B="x";var q="y";if((E==="bar"||S==="bar")&&k.orientation==="h"){B="y";q="x"}K.swapAttrs(k,["?","?src"],"labels",B);K.swapAttrs(k,["d?","?0"],"label",B);K.swapAttrs(k,["?","?src"],"values",q);if(S==="pie"||S==="funnelarea"){Q(k,"marker.color").set(Q(k,"marker.colors").get());u._pielayer.selectAll("g.trace").remove()}else if(ee.traceIs(k,"cartesian")){Q(k,"marker.colors").set(Q(k,"marker.color").get())}}v[w][t]=se(S);var U=["swapxy","swapxyaxes","orientation","orientationaxes"];if(U.indexOf(w)!==-1){if(w==="orientation"){A.set(E);var Y=k.x&&!k.y?"h":"v";if((A.get()||Y)===M.orientation){continue}}else if(w==="orientationaxes"){k.orientation={v:"h",h:"v"}[M.orientation]}ne.swapXYData(k);r.calc=r.clearAxisTypes=true}else if($.dataArrayContainers.indexOf(A.parts[0])!==-1){ne.manageArrayContainers(A,E,v);r.calc=true}else{if(L){if(L.arrayOk&&!ee.traceIs(M,"regl")&&(K.isArrayOrTypedArray(E)||K.isArrayOrTypedArray(S))){r.calc=true}else ie.update(r,L)}else{r.calc=true}A.set(E)}}if(["swapxyaxes","orientationaxes"].indexOf(w)!==-1){re.swap(o,l)}if(w==="orientationaxes"){var V=Q(o.layout,"hovermode");var G=V.get();if(G==="x"){V.set("y")}else if(G==="y"){V.set("x")}else if(G==="x unified"){V.set("y unified")}else if(G==="y unified"){V.set("x unified")}}if(["orientation","type"].indexOf(w)!==-1){i=[];for(t=0;t<l.length;t++){var W=c[l[t]];if(ee.traceIs(W,"cartesian")){h(W.xaxis||"x");h(W.yaxis||"y")}}x(i.map(m),true,0);x(i.map(g),[0,1],0)}}if(r.calc||r.plot){r.fullReplot=true}return{flags:r,undoit:v,redoit:n,traces:l,eventData:K.extendDeepNoArrays([],[e,l])}}function ue(r){var e=K.counterRegex("axis",".title",false,false);var t=/colorbar\.title$/;var a=Object.keys(r);var n,i,o;for(n=0;n<a.length;n++){i=a[n];o=r[i];if((i==="title"||e.test(i)||t.test(i))&&(typeof o==="string"||typeof o==="number")){s(i,i.replace("title","title.text"))}else if(i.indexOf("titlefont")>-1){s(i,i.replace("titlefont","title.font"))}else if(i.indexOf("titleposition")>-1){s(i,i.replace("titleposition","title.position"))}else if(i.indexOf("titleside")>-1){s(i,i.replace("titleside","title.side"))}else if(i.indexOf("titleoffset")>-1){s(i,i.replace("titleoffset","title.offset"))}}function s(e,t){r[t]=r[e];delete r[e]}}function q(e,t,r){e=K.getGraphDiv(e);ne.clearPromiseQueue(e);var a={};if(typeof t==="string"){a[t]=r}else if(K.isPlainObject(t)){a=K.extendFlat({},t)}else{K.warn("Relayout fail.",t,r);return Promise.reject()}if(Object.keys(a).length)e.changed=true;var n=V(e,a);var i=n.flags;if(i.calc)e.calcdata=undefined;var o=[$.previousPromises];if(i.layoutReplot){o.push(D.layoutReplot)}else if(Object.keys(a).length){U(e,i,n)||$.supplyDefaults(e);if(i.legend)o.push(D.doLegend);if(i.layoutstyle)o.push(D.layoutStyles);if(i.axrange)Y(o,n.rangesAltered);if(i.ticks)o.push(D.doTicksRelayout);if(i.modebar)o.push(D.doModeBar);if(i.camera)o.push(D.doCamera);if(i.colorbars)o.push(D.doColorBars);o.push(O)}o.push($.rehover,$.redrag);T.add(e,q,[e,n.undoit],q,[e,n.redoit]);var s=K.syncOrAsync(o,e);if(!s||!s.then)s=Promise.resolve(e);return s.then(function(){e.emit("plotly_relayout",n.eventData);return e})}function U(e,t,r){var a=e._fullLayout;if(!t.axrange)return false;for(var n in t){if(n!=="axrange"&&t[n])return false}for(var i in r.rangesAltered){var o=re.id2name(i);var s=e.layout[o];var l=a[o];l.autorange=s.autorange;if(s.range){l.range=s.range.slice()}l.cleanRange();if(l._matchGroup){for(var u in l._matchGroup){if(u!==i){var c=a[re.id2name(u)];c.autorange=l.autorange;c.range=l.range.slice();c._input.range=l.range.slice()}}}}return true}function Y(e,o){var t=o?function(e){var t=[];var r=true;for(var a in o){var n=re.getFromId(e,a);t.push(a);if((n.ticklabelposition||"").indexOf("inside")!==-1){if(n._anchorAxis){t.push(n._anchorAxis._id)}}if(n._matchGroup){for(var i in n._matchGroup){if(!o[i]){t.push(i)}}}if(n.automargin)r=false}return re.draw(e,t,{skipTitle:r})}:function(e){return re.draw(e,"redraw")};e.push(r,D.doAutoRangeAndConstraints,t,D.drawData,D.finalDraw)}var ce=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/;var fe=/^[xyz]axis[0-9]*\.autorange$/;var de=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function V(e,a){var n=e.layout;var t=e._fullLayout;var r=t._guiEditing;var i=le(t._preGUI,r);var o=Object.keys(a);var s=re.list(e);var l=K.extendDeepAll({},a);var u={};var c,f,d;ue(a);o=Object.keys(a);for(f=0;f<o.length;f++){if(o[f].indexOf("allaxes")===0){for(d=0;d<s.length;d++){var v=s[d]._id.substr(1);var p=v.indexOf("scene")!==-1?v+".":"";var h=o[f].replace("allaxes",p+s[d]._name);if(!a[h])a[h]=a[o[f]]}delete a[o[f]]}}var m=ie.layoutFlags();var g={};var y={};function x(e,t){if(Array.isArray(e)){e.forEach(function(e){x(e,t)});return}if(e in a||ne.hasParent(a,e))return;var r=i(n,e);if(!(e in y)){y[e]=se(r.get())}if(t!==undefined)r.set(t)}var b={};var _;function w(e){var t=re.name2id(e.split(".")[0]);b[t]=1;return t}for(var T in a){if(ne.hasParent(a,T)){throw new Error("cannot set "+T+" and a parent attribute simultaneously")}var k=i(n,T);var M=a[T];var A=k.parts.length;var S=A-1;while(S>0&&typeof k.parts[S]!=="string")S--;var E=k.parts[S];var L=k.parts[S-1]+"."+E;var C=k.parts.slice(0,S).join(".");var D=Q(e.layout,C).get();var O=Q(t,C).get();var I=k.get();if(M===undefined)continue;g[T]=M;y[T]=E==="reverse"?M:se(I);var P=te.getLayoutValObject(t,k.parts);if(P&&P.impliedEdits&&M!==null){for(var R in P.impliedEdits){x(K.relativeAttr(T,R),P.impliedEdits[R])}}if(["width","height"].indexOf(T)!==-1){if(M){x("autosize",null);var N=T==="height"?"width":"height";x(N,t[N])}else{t[T]=e._initialAutoSize[T]}}else if(T==="autosize"){x("width",M?null:t.width);x("height",M?null:t.height)}else if(L.match(ce)){w(L);Q(t,C+"._inputRange").set(null)}else if(L.match(fe)){w(L);Q(t,C+"._inputRange").set(null);var z=Q(t,C).get();if(z._inputDomain){z._input.domain=z._inputDomain.slice()}}else if(L.match(de)){Q(t,C+"._inputDomain").set(null)}if(E==="type"){_=D;var F=O.type==="linear"&&M==="log";var j=O.type==="log"&&M==="linear";if(F||j){if(!_||!_.range){x(C+".autorange",true)}else if(!O.autorange){var H=_.range[0];var B=_.range[1];if(F){if(H<=0&&B<=0){x(C+".autorange",true)}if(H<=0)H=B/1e6;else if(B<=0)B=H/1e6;x(C+".range[0]",Math.log(H)/Math.LN10);x(C+".range[1]",Math.log(B)/Math.LN10)}else{x(C+".range[0]",Math.pow(10,H));x(C+".range[1]",Math.pow(10,B))}}else if(F){_.range=_.range[1]>_.range[0]?[1,2]:[2,1]}if(Array.isArray(t._subplots.polar)&&t._subplots.polar.length&&t[k.parts[0]]&&k.parts[1]==="radialaxis"){delete t[k.parts[0]]._subplot.viewInitial["radialaxis.range"]}ee.getComponentMethod("annotations","convertCoords")(e,O,M,x);ee.getComponentMethod("images","convertCoords")(e,O,M,x)}else{x(C+".autorange",true);x(C+".range",null)}Q(t,C+"._inputRange").set(null)}else if(E.match(oe)){var q=Q(t,T).get();var U=(M||{}).type;if(!U||U==="-")U="linear";ee.getComponentMethod("annotations","convertCoords")(e,q,U,x);ee.getComponentMethod("images","convertCoords")(e,q,U,x)}var Y=ae.containerArrayMatch(T);if(Y){c=Y.array;f=Y.index;var V=Y.property;var G=P||{editType:"calc"};if(f!==""&&V===""){if(ae.isAddVal(M)){y[T]=null}else if(ae.isRemoveVal(M)){y[T]=(Q(n,c).get()||[])[f]}else{K.warn("unrecognized full object value",a)}}ie.update(m,G);if(!u[c])u[c]={};var W=u[c][f];if(!W)W=u[c][f]={};W[V]=M;delete a[T]}else if(E==="reverse"){if(D.range)D.range.reverse();else{x(C+".autorange",true);D.range=[1,0]}if(O.autorange)m.calc=true;else m.plot=true}else{if(t._has("scatter-like")&&t._has("regl")&&(T==="dragmode"&&(M==="lasso"||M==="select")&&!(I==="lasso"||I==="select"))){m.plot=true}else if(t._has("gl2d")){m.plot=true}else if(P)ie.update(m,P);else m.calc=true;k.set(M)}}for(c in u){var $=ae.applyContainerArrayChanges(e,i(n,c),u[c],m,i);if(!$)m.plot=true}for(var Z in b){_=re.getFromId(e,Z);var X=_&&_._constraintGroup;if(X){m.calc=true;for(var J in X){if(!b[J]){re.getFromId(e,J)._constraintShrinkable=true}}}}if(ve(e)||a.height||a.width)m.plot=true;if(m.plot||m.calc){m.layoutReplot=true}return{flags:m,rangesAltered:b,undoit:y,redoit:g,eventData:l}}function ve(e){var t=e._fullLayout;var r=t.width;var a=t.height;if(e.layout.autosize)$.plotAutoSize(e,e.layout,t);return t.width!==r||t.height!==a}function G(e,t,r,a){e=K.getGraphDiv(e);ne.clearPromiseQueue(e);if(!K.isPlainObject(t))t={};if(!K.isPlainObject(r))r={};if(Object.keys(t).length)e.changed=true;if(Object.keys(r).length)e.changed=true;var n=ne.coerceTraceIndices(e,a);var i=B(e,K.extendFlat({},t),n);var o=i.flags;var s=V(e,K.extendFlat({},r));var l=s.flags;if(o.calc||l.calc)e.calcdata=undefined;if(o.clearAxisTypes)ne.clearAxisTypes(e,n,r);var u=[];if(l.layoutReplot){u.push(D.layoutReplot)}else if(o.fullReplot){u.push(C._doPlot)}else{u.push($.previousPromises);U(e,l,s)||$.supplyDefaults(e);if(o.style)u.push(D.doTraceStyle);if(o.colorbars||l.colorbars)u.push(D.doColorBars);if(l.legend)u.push(D.doLegend);if(l.layoutstyle)u.push(D.layoutStyles);if(l.axrange)Y(u,s.rangesAltered);if(l.ticks)u.push(D.doTicksRelayout);if(l.modebar)u.push(D.doModeBar);if(l.camera)u.push(D.doCamera);u.push(O)}u.push($.rehover,$.redrag);T.add(e,G,[e,i.undoit,s.undoit,i.traces],G,[e,i.redoit,s.redoit,i.traces]);var c=K.syncOrAsync(u,e);if(!c||!c.then)c=Promise.resolve(e);return c.then(function(){e.emit("plotly_update",{data:i.eventData,layout:s.eventData});return e})}function W(a){return function e(t){t._fullLayout._guiEditing=true;var r=a.apply(null,arguments);t._fullLayout._guiEditing=false;return r}}var Z=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}];var X=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function J(e,t){for(var r=0;r<t.length;r++){var a=t[r];var n=e.match(a.pattern);if(n){return{head:n[1],attr:a.attr}}}}function pe(e,t){var r=Q(t,e).get();if(r!==undefined)return r;var a=e.split(".");a.pop();while(a.length>1){a.pop();r=Q(t,a.join(".")+".uirevision").get();if(r!==undefined)return r}return t.uirevision}function he(e,t){for(var r=0;r<t.length;r++){if(t[r]._fullInput.uid===e)return r}return-1}function me(e,t,r){for(var a=0;a<t.length;a++){if(t[a].uid===e)return a}return!t[r]||t[r].uid?-1:r}function ge(e,t){var r=K.isPlainObject(e);var a=Array.isArray(e);if(r||a){return(r&&K.isPlainObject(t)||a&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t)}return e===t}function ye(e,t,r,a){var n=a._preGUI;var i,o,s,l,u,c,f,d;var v=[];var p={};for(i in n){u=J(i,Z);if(u){o=u.attr||u.head+".uirevision";s=Q(a,o).get();l=s&&pe(o,t);if(l&&l===s){c=n[i];if(c===null)c=undefined;f=Q(t,i);d=f.get();if(ge(d,c)){if(d===undefined&&i.substr(i.length-9)==="autorange"){v.push(i.substr(0,i.length-10))}f.set(se(Q(a,i).get()));continue}}}else{K.warn("unrecognized GUI edit: "+i)}delete n[i];if(i.substr(i.length-8,6)==="range["){p[i.substr(0,i.length-9)]=1}}for(var h=0;h<v.length;h++){var m=v[h];if(p[m]){var g=Q(t,m).get();if(g)delete g.autorange}}var y=a._tracePreGUI;for(var x in y){var b=y[x];var _=null;var w;for(i in b){if(!_){var T=he(x,r);if(T<0){delete y[x];break}var k=r[T];w=k._fullInput;var M=me(x,e,w.index);if(M<0){delete y[x];break}_=e[M]}u=J(i,X);if(u){if(u.attr){s=Q(a,u.attr).get();l=s&&pe(u.attr,t)}else{s=w.uirevision;l=_.uirevision;if(l===undefined)l=t.uirevision}if(l&&l===s){c=b[i];if(c===null)c=undefined;f=Q(_,i);d=f.get();if(ge(d,c)){f.set(se(Q(w,i).get()));continue}}}else{K.warn("unrecognized GUI edit: "+i+" in trace uid "+x)}delete b[i]}}}function xe(e,t,r,a){var n,i;function o(){return C.addFrames(e,n)}e=K.getGraphDiv(e);ne.clearPromiseQueue(e);var s=e._fullData;var l=e._fullLayout;if(!K.isPlotDiv(e)||!s||!l){i=C.newPlot(e,t,r,a)}else{if(K.isPlainObject(t)){var u=t;t=u.data;r=u.layout;a=u.config;n=u.frames}var c=false;if(a){var f=K.extendDeep({},e._context);e._context=undefined;I(e,a);c=Te(f,e._context)}e.data=t||[];ne.cleanData(e.data);e.layout=r||{};ne.cleanLayout(e.layout);ye(e.data,e.layout,s,l);$.supplyDefaults(e,{skipUpdateCalc:true});var d=e._fullData;var v=e._fullLayout;var p=v.datarevision===undefined;var h=v.transition;var m=_e(e,l,v,p,h);var g=m.newDataRevision;var y=be(e,s,d,p,h,g);if(ve(e))m.layoutReplot=true;if(y.calc||m.calc){e.calcdata=undefined;var x=Object.getOwnPropertyNames(v);for(var b=0;b<x.length;b++){var _=x[b];var w=_.substring(0,5);if(w==="xaxis"||w==="yaxis"){var T=v[_]._emptyCategories;if(T)T()}}}else{$.supplyDefaultsUpdateCalc(e.calcdata,d)}var k=[];if(n){e._transitionData={};$.createTransitionData(e);k.push(o)}if(v.transition&&!c&&(y.anim||m.anim)){if(m.ticks)k.push(D.doTicksRelayout);$.doCalcdata(e);D.doAutoRangeAndConstraints(e);k.push(function(){return $.transitionFromReact(e,y,m,l)})}else if(y.fullReplot||m.layoutReplot||c){e._fullLayout._skipDefaults=true;k.push(C._doPlot)}else{for(var M in m.arrays){var A=m.arrays[M];if(A.length){var S=ee.getComponentMethod(M,"drawOne");if(S!==K.noop){for(var E=0;E<A.length;E++){S(e,A[E])}}else{var L=ee.getComponentMethod(M,"draw");if(L===K.noop){throw new Error("cannot draw components: "+M)}L(e)}}}k.push($.previousPromises);if(y.style)k.push(D.doTraceStyle);if(y.colorbars||m.colorbars)k.push(D.doColorBars);if(m.legend)k.push(D.doLegend);if(m.layoutstyle)k.push(D.layoutStyles);if(m.axrange)Y(k);if(m.ticks)k.push(D.doTicksRelayout);if(m.modebar)k.push(D.doModeBar);if(m.camera)k.push(D.doCamera);k.push(O)}k.push($.rehover,$.redrag);i=K.syncOrAsync(k,e);if(!i||!i.then)i=Promise.resolve(e)}return i.then(function(){e.emit("plotly_react",{data:t,layout:r});return e})}function be(e,t,r,a,n,i){var o=t.length===r.length;if(!n&&!o){return{fullReplot:true,calc:true}}var s=ie.traceFlags();s.arrays={};s.nChanges=0;s.nChangesAnim=0;var l,u;function c(e){var t=te.getTraceValObject(u,e);if(!u._module.animatable&&t.anim){t.anim=false}return t}var f={getValObject:c,flags:s,immutable:a,transition:n,newDataRevision:i,gd:e};var d={};for(l=0;l<t.length;l++){if(r[l]){u=r[l]._fullInput;if($.hasMakesDataTransform(u))u=r[l];if(d[u.uid])continue;d[u.uid]=1;we(t[l]._fullInput,u,[],f)}}if(s.calc||s.plot){s.fullReplot=true}if(n&&s.nChanges&&s.nChangesAnim){s.anim=s.nChanges===s.nChangesAnim&&o?"all":"some"}return s}function _e(e,t,r,a,n){var i=ie.layoutFlags();i.arrays={};i.rangesAltered={};i.nChanges=0;i.nChangesAnim=0;function o(e){return te.getLayoutValObject(r,e)}var s={getValObject:o,flags:i,immutable:a,transition:n,gd:e};we(t,r,[],s);if(i.plot||i.calc){i.layoutReplot=true}if(n&&i.nChanges&&i.nChangesAnim){i.anim=i.nChanges===i.nChangesAnim?"all":"some"}return i}function we(e,t,r,a){var n,i,o;var s=a.getValObject;var l=a.flags;var u=a.immutable;var c=a.inArray;var f=a.arrayIndex;function d(){var e=n.editType;if(c&&e.indexOf("arraydraw")!==-1){K.pushUnique(l.arrays[c],f);return}ie.update(l,n);if(e!=="none"){l.nChanges++}if(a.transition&&n.anim){l.nChangesAnim++}if(ce.test(o)||fe.test(o)){l.rangesAltered[r[0]]=1}if(de.test(o)){Q(t,"_inputDomain").set(null)}if(i==="datarevision"){l.newDataRevision=1}}function v(e){return e.valType==="data_array"||e.arrayOk}for(i in e){if(l.calc&&!a.transition)return;var p=e[i];var h=t[i];var m=r.concat(i);o=m.join(".");if(i.charAt(0)==="_"||typeof p==="function"||p===h)continue;if((i==="tick0"||i==="dtick")&&r[0]!=="geo"){var g=t.tickmode;if(g==="auto"||g==="array"||!g)continue}if(i==="range"&&t.autorange)continue;if((i==="zmin"||i==="zmax")&&t.type==="contourcarpet")continue;n=s(m);if(!n)continue;if(n._compareAsJSON&&JSON.stringify(p)===JSON.stringify(h))continue;var y=n.valType;var x;var b=v(n);var _=Array.isArray(p);var w=Array.isArray(h);if(_&&w){var T="_input_"+i;var k=e[T];var M=t[T];if(Array.isArray(k)&&k===M)continue}if(h===undefined){if(b&&_)l.calc=true;else d()}else if(n._isLinkedToArray){var A=[];var S=false;if(!c)l.arrays[i]=A;var E=Math.min(p.length,h.length);var L=Math.max(p.length,h.length);if(E!==L){if(n.editType==="arraydraw"){S=true}else{d();continue}}for(x=0;x<E;x++){we(p[x],h[x],m.concat(x),K.extendFlat({inArray:i,arrayIndex:x},a))}if(S){for(x=E;x<L;x++){A.push(x)}}}else if(!y&&K.isPlainObject(p)){we(p,h,m,a)}else if(b){if(_&&w){if(u){l.calc=true}if(u||a.newDataRevision){d()}}else if(_!==w){l.calc=true}else d()}else if(_&&w){if(p.length!==h.length||String(p)!==String(h)){d()}}else{d()}}for(i in t){if(!(i in e||i.charAt(0)==="_"||typeof t[i]==="function")){n=s(r.concat(i));if(v(n)&&Array.isArray(t[i])){l.calc=true;return}else d()}}}function Te(e,t){var r;for(r in e){if(r.charAt(0)==="_")continue;var a=e[r];var n=t[r];if(a!==n){if(K.isPlainObject(a)&&K.isPlainObject(n)){if(Te(a,n)){return true}}else if(Array.isArray(a)&&Array.isArray(n)){if(a.length!==n.length){return true}for(var i=0;i<a.length;i++){if(a[i]!==n[i]){if(K.isPlainObject(a[i])&&K.isPlainObject(n[i])){if(Te(a[i],n[i])){return true}}else{return true}}}}else{return true}}}}function ke(x,b,_){x=K.getGraphDiv(x);if(!K.isPlotDiv(x)){throw new Error("This element is not a Plotly plot: "+x+". It's likely that you've failed "+"to create a plot before animating it. For more details, see "+"https://plotly.com/javascript/animations/")}var w=x._transitionData;if(!w._frameQueue){w._frameQueue=[]}_=$.supplyAnimationDefaults(_);var T=_.transition;var t=_.frame;if(w._frameWaitingCnt===undefined){w._frameWaitingCnt=0}function k(e){if(Array.isArray(T)){if(e>=T.length){return T[0]}else{return T[e]}}else{return T}}function M(e){if(Array.isArray(t)){if(e>=t.length){return t[0]}else{return t[e]}}else{return t}}function A(e,t){var r=0;return function(){if(e&&++r===t){return e()}}}return new Promise(function(o,s){function e(){if(w._frameQueue.length===0){return}while(w._frameQueue.length){var e=w._frameQueue.pop();if(e.onInterrupt){e.onInterrupt()}}x.emit("plotly_animationinterrupted",[])}function t(e){if(e.length===0)return;for(var t=0;t<e.length;t++){var r;if(e[t].type==="byname"){r=$.computeFrame(x,e[t].name)}else{r=e[t].data}var a=M(t);var n=k(t);n.duration=Math.min(n.duration,a.duration);var i={frame:r,name:e[t].name,frameOpts:a,transitionOpts:n};if(t===e.length-1){i.onComplete=A(o,2);i.onInterrupt=s}w._frameQueue.push(i)}if(_.mode==="immediate"){w._lastFrameAt=-Infinity}if(!w._animationRaf){l()}}function r(){x.emit("plotly_animated");window.cancelAnimationFrame(w._animationRaf);w._animationRaf=null}function a(){if(w._currentFrame&&w._currentFrame.onComplete){w._currentFrame.onComplete()}var e=w._currentFrame=w._frameQueue.shift();if(e){var t=e.name?e.name.toString():null;x._fullLayout._currentFrame=t;w._lastFrameAt=Date.now();w._timeToNext=e.frameOpts.duration;$.transition(x,e.frame.data,e.frame.layout,ne.coerceTraceIndices(x,e.frame.traces),e.frameOpts,e.transitionOpts).then(function(){if(e.onComplete){e.onComplete()}});x.emit("plotly_animatingframe",{name:t,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})}else{r()}}function l(){x.emit("plotly_animating");w._lastFrameAt=-Infinity;w._timeToNext=0;w._runningTransitions=0;w._currentFrame=null;var e=function(){w._animationRaf=window.requestAnimationFrame(e);if(Date.now()-w._lastFrameAt>w._timeToNext){a()}};e()}var n=0;function i(e){if(Array.isArray(T)){if(n>=T.length){e.transitionOpts=T[n]}else{e.transitionOpts=T[0]}}else{e.transitionOpts=T}n++;return e}var u,c;var f=[];var d=b===undefined||b===null;var v=Array.isArray(b);var p=!d&&!v&&K.isPlainObject(b);if(p){f.push({type:"object",data:i(K.extendFlat({},b))})}else if(d||["string","number"].indexOf(typeof b)!==-1){for(u=0;u<w._frames.length;u++){c=w._frames[u];if(!c)continue;if(d||String(c.group)===String(b)){f.push({type:"byname",name:String(c.name),data:i({name:c.name})})}}}else if(v){for(u=0;u<b.length;u++){var h=b[u];if(["number","string"].indexOf(typeof h)!==-1){h=String(h);f.push({type:"byname",name:h,data:i({name:h})})}else if(K.isPlainObject(h)){f.push({type:"object",data:i(K.extendFlat({},h))})}}}for(u=0;u<f.length;u++){c=f[u];if(c.type==="byname"&&!w._frameHash[c.data.name]){K.warn('animate failure: frame not found: "'+c.data.name+'"');s();return}}if(["next","immediate"].indexOf(_.mode)!==-1){e()}if(_.direction==="reverse"){f.reverse()}var m=x._fullLayout._currentFrame;if(m&&_.fromcurrent){var g=-1;for(u=0;u<f.length;u++){c=f[u];if(c.type==="byname"&&c.name===m){g=u;break}}if(g>0&&g<f.length-1){var y=[];for(u=0;u<f.length;u++){c=f[u];if(f[u].type!=="byname"||u>g){y.push(c)}}f=y}}if(f.length>0){t(f)}else{x.emit("plotly_animated");o()}})}function Me(e,t,r){e=K.getGraphDiv(e);if(t===null||t===undefined){return Promise.resolve()}if(!K.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed "+"to create a plot before adding frames. For more details, see "+"https://plotly.com/javascript/animations/")}var a,n,i,o;var s=e._transitionData._frames;var l=e._transitionData._frameHash;if(!Array.isArray(t)){throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t)}var u=s.length+t.length*2;var c=[];var f={};for(a=t.length-1;a>=0;a--){if(!K.isPlainObject(t[a]))continue;var d=t[a].name;var v=(l[d]||f[d]||{}).name;var p=t[a].name;var h=l[v]||f[v];if(v&&p&&typeof p==="number"&&h&&E<L){E++;K.warn('addFrames: overwriting frame "'+(l[v]||f[v]).name+'" with a frame whose name of type "number" also equates to "'+v+'". This is valid but may potentially lead to unexpected '+"behavior since all plotly.js frame names are stored internally "+"as strings.");if(E===L){K.warn("addFrames: This API call has yielded too many of these warnings. "+"For the rest of this call, further warnings about numeric frame "+"names will be suppressed.")}}f[d]={name:d};c.push({frame:$.supplyFrameDefaults(t[a]),index:r&&r[a]!==undefined&&r[a]!==null?r[a]:u+a})}c.sort(function(e,t){if(e.index>t.index)return-1;if(e.index<t.index)return 1;return 0});var m=[];var g=[];var y=s.length;for(a=c.length-1;a>=0;a--){n=c[a].frame;if(typeof n.name==="number"){K.warn("Warning: addFrames accepts frames with numeric names, but the numbers are"+"implicitly cast to strings")}if(!n.name){while(l[n.name="frame "+e._transitionData._counter++]);}if(l[n.name]){for(i=0;i<s.length;i++){if((s[i]||{}).name===n.name)break}m.push({type:"replace",index:i,value:n});g.unshift({type:"replace",index:i,value:s[i]})}else{o=Math.max(0,Math.min(c[a].index,y));m.push({type:"insert",index:o,value:n});g.unshift({type:"delete",index:o});y++}}var x=$.modifyFrames;var b=$.modifyFrames;var _=[e,g];var w=[e,m];if(T)T.add(e,x,_,b,w);return $.modifyFrames(e,m)}function Ae(e,t){e=K.getGraphDiv(e);if(!K.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e)}var r,a;var n=e._transitionData._frames;var i=[];var o=[];if(!t){t=[];for(r=0;r<n.length;r++){t.push(r)}}t=t.slice();t.sort();for(r=t.length-1;r>=0;r--){a=t[r];i.push({type:"delete",index:a});o.unshift({type:"insert",index:a,value:n[a]})}var s=$.modifyFrames;var l=$.modifyFrames;var u=[e,o];var c=[e,i];if(T)T.add(e,s,u,l,c);return $.modifyFrames(e,i)}function Se(e){e=K.getGraphDiv(e);var t=e._fullLayout||{};var r=e._fullData||[];$.cleanPlot([],{},r,t);$.purge(e);M.purge(e);if(t._container)t._container.remove();delete e._context;return e}function Ee(e){var t=e._fullLayout;var r=e.getBoundingClientRect();if(K.equalDomRects(r,t._lastBBox))return;var a=t._invTransform=K.inverseTransformMatrix(K.getFullTransformMatrix(e));t._invScaleX=Math.sqrt(a[0][0]*a[0][0]+a[0][1]*a[0][1]+a[0][2]*a[0][2]);t._invScaleY=Math.sqrt(a[1][0]*a[1][0]+a[1][1]*a[1][1]+a[1][2]*a[1][2]);t._lastBBox=r}function Le(e){var t=k.select(e);var r=e._fullLayout;r._calcInverseTransform=Ee;r._calcInverseTransform(e);r._container=t.selectAll(".plot-container").data([0]);r._container.enter().insert("div",":first-child").classed("plot-container",true).classed("plotly",true);r._paperdiv=r._container.selectAll(".svg-container").data([0]);r._paperdiv.enter().append("div").classed("user-select-none",true).classed("svg-container",true).style("position","relative");r._glcontainer=r._paperdiv.selectAll(".gl-container").data([{}]);r._glcontainer.enter().append("div").classed("gl-container",true);r._paperdiv.selectAll(".main-svg").remove();r._paperdiv.select(".modebar-container").remove();r._paper=r._paperdiv.insert("svg",":first-child").classed("main-svg",true);r._toppaper=r._paperdiv.append("svg").classed("main-svg",true);r._modebardiv=r._paperdiv.append("div");delete r._modeBar;r._hoverpaper=r._paperdiv.append("svg").classed("main-svg",true);if(!r._uid){var a={};k.selectAll("defs").each(function(){if(this.id)a[this.id.split("-")[1]]=1});r._uid=K.randstr(a)}r._paperdiv.selectAll(".main-svg").attr(o.svgAttrs);r._defs=r._paper.append("defs").attr("id","defs-"+r._uid);r._clips=r._defs.append("g").classed("clips",true);r._topdefs=r._toppaper.append("defs").attr("id","topdefs-"+r._uid);r._topclips=r._topdefs.append("g").classed("clips",true);r._bgLayer=r._paper.append("g").classed("bglayer",true);r._draggers=r._paper.append("g").classed("draglayer",true);var n=r._paper.append("g").classed("layer-below",true);r._imageLowerLayer=n.append("g").classed("imagelayer",true);r._shapeLowerLayer=n.append("g").classed("shapelayer",true);r._cartesianlayer=r._paper.append("g").classed("cartesianlayer",true);r._polarlayer=r._paper.append("g").classed("polarlayer",true);r._ternarylayer=r._paper.append("g").classed("ternarylayer",true);r._geolayer=r._paper.append("g").classed("geolayer",true);r._funnelarealayer=r._paper.append("g").classed("funnelarealayer",true);r._pielayer=r._paper.append("g").classed("pielayer",true);r._iciclelayer=r._paper.append("g").classed("iciclelayer",true);r._treemaplayer=r._paper.append("g").classed("treemaplayer",true);r._sunburstlayer=r._paper.append("g").classed("sunburstlayer",true);r._indicatorlayer=r._toppaper.append("g").classed("indicatorlayer",true);r._glimages=r._paper.append("g").classed("glimages",true);var i=r._toppaper.append("g").classed("layer-above",true);r._imageUpperLayer=i.append("g").classed("imagelayer",true);r._shapeUpperLayer=i.append("g").classed("shapelayer",true);r._infolayer=r._toppaper.append("g").classed("infolayer",true);r._menulayer=r._toppaper.append("g").classed("menulayer",true);r._zoomlayer=r._toppaper.append("g").classed("zoomlayer",true);r._hoverlayer=r._hoverpaper.append("g").classed("hoverlayer",true);r._modebardiv.classed("modebar-container",true).style("position","absolute").style("top","0px").style("right","0px");e.emit("plotly_framework")}C.animate=ke;C.addFrames=Me;C.deleteFrames=Ae;C.addTraces=R;C.deleteTraces=N;C.extendTraces=w;C.moveTraces=z;C.prependTraces=P;C.newPlot=l;C._doPlot=n;C.purge=Se;C.react=xe;C.redraw=s;C.relayout=q;C.restyle=F;C.setPlotConfig=i;C.update=G;C._guiRelayout=W(q);C._guiRestyle=W(F);C._guiUpdate=W(G);C._storeDirectGUIEdit=H},{"../components/color":155,"../components/drawing":177,"../constants/xmlns_namespaces":266,"../lib":285,"../lib/events":278,"../lib/queue":300,"../plots/cartesian/axes":331,"../plots/cartesian/constants":338,"../plots/cartesian/graph_interact":341,"../plots/cartesian/select":351,"../plots/plots":366,"../registry":373,"./edit_types":313,"./helpers":314,"./manage_arrays":316,"./plot_config":318,"./plot_schema":319,"./subroutines":321,"@plotly/d3":20,"fast-isnumeric":31,"has-hover":62}],318:[function(e,t,r){"use strict";var a={staticPlot:{valType:"boolean",dflt:false},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:false},edits:{annotationPosition:{valType:"boolean",dflt:false},annotationTail:{valType:"boolean",dflt:false},annotationText:{valType:"boolean",dflt:false},axisTitleText:{valType:"boolean",dflt:false},colorbarPosition:{valType:"boolean",dflt:false},colorbarTitleText:{valType:"boolean",dflt:false},legendPosition:{valType:"boolean",dflt:false},legendText:{valType:"boolean",dflt:false},shapePosition:{valType:"boolean",dflt:false},titleText:{valType:"boolean",dflt:false}},autosizable:{valType:"boolean",dflt:false},responsive:{valType:"boolean",dflt:false},fillFrame:{valType:"boolean",dflt:false},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[true,false],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[false,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:true},showAxisRangeEntryBoxes:{valType:"boolean",dflt:true},showTips:{valType:"boolean",dflt:true},showLink:{valType:"boolean",dflt:false},linkText:{valType:"string",dflt:"Edit chart",noBlank:true},sendData:{valType:"boolean",dflt:true},showSources:{valType:"any",dflt:false},displayModeBar:{valType:"enumerated",values:["hover",true,false],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:false},showEditInChartStudio:{valType:"boolean",dflt:false},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:false},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:true},watermark:{valType:"boolean",dflt:false},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:true,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}};var n={};function i(e,t){for(var r in e){var a=e[r];if(a.valType){t[r]=a.dflt}else{if(!t[r]){t[r]={}}i(a,t[r])}}}i(a,n);t.exports={configAttributes:a,dfltConfig:n}},{}],319:[function(e,t,d){"use strict";var c=e("../registry");var r=e("../lib");var v=e("../plots/attributes");var f=e("../plots/layout_attributes");var a=e("../plots/frame_attributes");var n=e("../plots/animation_attributes");var i=e("./plot_config").configAttributes;var o=e("./edit_types");var l=r.extendDeepAll;var p=r.isPlainObject;var h=r.isArrayOrTypedArray;var u=r.nestedProperty;var s=r.valObjectMeta;var m="_isSubplotObj";var g="_isLinkedToArray";var y="_arrayAttrRegexps";var x="_deprecated";var b=[m,g,y,x];d.IS_SUBPLOT_OBJ=m;d.IS_LINKED_TO_ARRAY=g;d.DEPRECATED=x;d.UNDERSCORE_ATTRS=b;d.get=function(){var t={};c.allTypes.forEach(function(e){t[e]=k(e)});var r={};Object.keys(c.transformsRegistry).forEach(function(e){r[e]=A(e)});return{defs:{valObjects:s,metaKeys:b.concat(["description","role","editType","impliedEdits"]),editType:{traces:o.traces,layout:o.layout},impliedEdits:{}},traces:t,layout:M(),transforms:r,frames:S(),animation:E(n),config:E(i)}};d.crawl=function(a,n,e,i){var o=e||0;i=i||"";Object.keys(a).forEach(function(e){var t=a[e];if(b.indexOf(e)!==-1)return;var r=(i?i+".":"")+e;n(t,e,a,o,r);if(d.isValObject(t))return;if(p(t)&&e!=="impliedEdits"){d.crawl(t,n,o+1,r)}})};d.isValObject=function(e){return e&&e.valType!==undefined};d.findArrayAttributes=function(e){var o=[];var s=[];var l=[];var i,u;function t(e,t,r,a){s=s.slice(0,a).concat([t]);l=l.slice(0,a).concat([e&&e._isLinkedToArray]);var n=e&&(e.valType==="data_array"||e.arrayOk===true)&&!(s[a-1]==="colorbar"&&(t==="ticktext"||t==="tickvals"));if(!n)return;c(i,0,"")}function c(e,t,r){var a=e[s[t]];var n=r+s[t];if(t===s.length-1){if(h(a)){o.push(u+n)}}else{if(l[t]){if(Array.isArray(a)){for(var i=0;i<a.length;i++){if(p(a[i])){c(a[i],t+1,n+"["+i+"].")}}}}else if(p(a)){c(a,t+1,n+".")}}}i=e;u="";d.crawl(v,t);if(e._module&&e._module.attributes){d.crawl(e._module.attributes,t)}var r=e.transforms;if(r){for(var a=0;a<r.length;a++){var n=r[a];var f=n._module;if(f){u="transforms["+a+"].";i=n;d.crawl(f.attributes,t)}}}return o};d.getTraceValObject=function(e,t){var r=t[0];var a=1;var n,i;if(r==="transforms"){if(t.length===1){return v.transforms}var o=e.transforms;if(!Array.isArray(o)||!o.length)return false;var s=t[1];if(!T(s)||s>=o.length){return false}n=(c.transformsRegistry[o[s].type]||{}).attributes;i=n&&n[t[2]];a=3}else{var l=e._module;if(!l)l=(c.modules[e.type||v.type.dflt]||{})._module;if(!l)return false;n=l.attributes;i=n&&n[r];if(!i){var u=l.basePlotModule;if(u&&u.attributes){i=u.attributes[r]}}if(!i)i=v[r]}return w(i,t,a)};d.getLayoutValObject=function(e,t){var r=_(e,t[0]);return w(r,t,1)};function _(e,t){var r,a,n,i;var o=e._basePlotModules;if(o){var s;for(r=0;r<o.length;r++){n=o[r];if(n.attrRegex&&n.attrRegex.test(t)){if(n.layoutAttrOverrides)return n.layoutAttrOverrides;if(!s&&n.layoutAttributes)s=n.layoutAttributes}var l=n.baseLayoutAttrOverrides;if(l&&t in l)return l[t]}if(s)return s}var u=e._modules;if(u){for(r=0;r<u.length;r++){i=u[r].layoutAttributes;if(i&&t in i){return i[t]}}}for(a in c.componentsRegistry){n=c.componentsRegistry[a];if(n.name==="colorscale"&&t.indexOf("coloraxis")===0){return n.layoutAttributes[t]}else if(!n.schema&&t===n.name){return n.layoutAttributes}}if(t in f)return f[t];return false}function w(e,t,r){if(!e)return false;if(e._isLinkedToArray){if(T(t[r]))r++;else if(r<t.length)return false}for(;r<t.length;r++){var a=e[t[r]];if(p(a))e=a;else break;if(r===t.length-1)break;if(e._isLinkedToArray){r++;if(!T(t[r]))return false}else if(e.valType==="info_array"){r++;var n=t[r];if(!T(n))return false;var i=e.items;if(Array.isArray(i)){if(n>=i.length)return false;if(e.dimensions===2){r++;if(t.length===r)return e;var o=t[r];if(!T(o))return false;e=i[n][o]}else e=i[n]}else{e=i}}}return e}function T(e){return e===Math.round(e)&&e>=0}function k(e){var t,r;t=c.modules[e]._module,r=t.basePlotModule;var a={};a.type=null;var i=l({},v);var o=l({},t.attributes);d.crawl(o,function(e,t,r,a,n){u(i,n).set(undefined);if(e===undefined)u(o,n).set(undefined)});l(a,i);if(c.traceIs(e,"noOpacity")){delete a.opacity}if(!c.traceIs(e,"showLegend")){delete a.showlegend;delete a.legendgroup}if(c.traceIs(e,"noHover")){delete a.hoverinfo;delete a.hoverlabel}if(!t.selectPoints){delete a.selectedpoints}l(a,o);if(r.attributes){l(a,r.attributes)}a.type=e;var n={meta:t.meta||{},categories:t.categories||{},animatable:Boolean(t.animatable),type:e,attributes:E(a)};if(t.layoutAttributes){var s={};l(s,t.layoutAttributes);n.layoutAttributes=E(s)}if(!t.animatable){d.crawl(n,function(e){if(d.isValObject(e)&&"anim"in e){delete e.anim}})}return n}function M(){var e={};var t,r;l(e,f);for(t in c.subplotsRegistry){r=c.subplotsRegistry[t];if(!r.layoutAttributes)continue;if(Array.isArray(r.attr)){for(var a=0;a<r.attr.length;a++){O(e,r,r.attr[a])}}else{var n=r.attr==="subplot"?r.name:r.attr;O(e,r,n)}}for(t in c.componentsRegistry){r=c.componentsRegistry[t];var i=r.schema;if(i&&(i.subplots||i.layout)){var o=i.subplots;if(o&&o.xaxis&&!o.yaxis){for(var s in o.xaxis){delete e.yaxis[s]}}}else if(r.name==="colorscale"){l(e,r.layoutAttributes)}else if(r.layoutAttributes){I(e,r.layoutAttributes,r.name)}}return{layoutAttributes:E(e)}}function A(r){var e=c.transformsRegistry[r];var a=l({},e.attributes);Object.keys(c.componentsRegistry).forEach(function(e){var t=c.componentsRegistry[e];if(t.schema&&t.schema.transforms&&t.schema.transforms[r]){Object.keys(t.schema.transforms[r]).forEach(function(e){I(a,t.schema.transforms[r][e],e)})}});return{attributes:E(a)}}function S(){var e={frames:l({},a)};E(e);return e.frames}function E(e){L(e);C(e);D(e);return e}function L(e){function a(e){return{valType:"string",editType:"none"}}function t(e,t,r){if(d.isValObject(e)){if(e.arrayOk===true||e.valType==="data_array"){r[t+"src"]=a(t)}}else if(p(e)){e.role="object"}}d.crawl(e,t)}function C(e){function t(e,t,r){if(!e)return;var a=e[g];if(!a)return;delete e[g];r[t]={items:{}};r[t].items[a]=e;r[t].role="object"}d.crawl(e,t)}function D(e){function a(e){for(var t in e){if(p(e[t])){a(e[t])}else if(Array.isArray(e[t])){for(var r=0;r<e[t].length;r++){a(e[t][r])}}else{if(e[t]instanceof RegExp){e[t]=e[t].toString()}}}}a(e)}function O(e,t,r){var a=u(e,r);var n=l({},t.layoutAttributes);n[m]=true;a.set(n)}function I(e,t,r){var a=u(e,r);a.set(l(a.get()||{},t))}},{"../lib":285,"../plots/animation_attributes":325,"../plots/attributes":327,"../plots/frame_attributes":361,"../plots/layout_attributes":364,"../registry":373,"./edit_types":313,"./plot_config":318}],320:[function(e,t,r){"use strict";var v=e("../lib");var s=e("../plots/attributes");var p="templateitemname";var a={name:{valType:"string",editType:"none"}};a[p]={valType:"string",editType:"calc"};r.templatedArray=function(e,t){t._isLinkedToArray=e;t.name=a.name;t[p]=a[p];return t};r.traceTemplater=function(a){var n={};var i,o;for(i in a){o=a[i];if(Array.isArray(o)&&o.length){n[i]=0}}function e(e){i=v.coerce(e,{},s,"type");var t={type:i,_template:null};if(i in n){o=a[i];var r=n[i]%o.length;n[i]++;t._template=o[r]}else{}return t}return{newTrace:e}};r.newContainer=function(e,t,r){var a=e._template;var n=a&&(a[t]||r&&a[r]);if(!v.isPlainObject(n))n=null;var i=e[t]={_template:n};return i};r.arrayTemplater=function(e,t,i){var r=e._template;var o=r&&r[c(t)];var s=r&&r[t];if(!Array.isArray(s)||!s.length){s=[]}var l={};function a(e){var t={name:e.name,_input:e};var r=t[p]=e[p];if(!u(r)){t._template=o;return t}for(var a=0;a<s.length;a++){var n=s[a];if(n.name===r){l[r]=1;t._template=n;return t}}t[i]=e[i]||false;t._template=false;return t}function n(){var e=[];for(var t=0;t<s.length;t++){var r=s[t];var a=r.name;if(u(a)&&!l[a]){var n={_template:r,name:a,_input:{_templateitemname:a}};n[p]=r[p];e.push(n);l[a]=1}}return e}return{newItem:a,defaultItems:n}};function u(e){return e&&typeof e==="string"}function c(e){var t=e.length-1;if(e.charAt(t)!=="s"){v.warn("bad argument to arrayDefaultKey: "+e)}return e.substr(0,e.length-1)+"defaults"}r.arrayDefaultKey=c;r.arrayEditor=function(n,e,t){var r=(v.nestedProperty(n,e).get()||[]).length;var a=t._index;var i=a>=r&&(t._input||{})._templateitemname;if(i)a=r;var o=e+"["+a+"]";var s;function l(){s={};if(i){s[o]={};s[o][p]=i}}l();function u(e,t){s[e]=t}function c(e,t){if(i){v.nestedProperty(s[o],e).set(t)}else{s[o+"."+e]=t}}function f(){var e=s;l();return e}function d(e,t){if(e)c(e,t);var r=f();for(var a in r){v.nestedProperty(n,a).set(r[a])}}return{modifyBase:u,modifyItem:c,getUpdateObj:f,applyUpdate:d}}},{"../lib":285,"../plots/attributes":327}],321:[function(e,t,W){"use strict";var $=e("@plotly/d3");var f=e("../registry");var Z=e("../plots/plots");var X=e("../lib");var d=e("../lib/clear_gl_canvases");var J=e("../components/color");var K=e("../components/drawing");var n=e("../components/titles");var Q=e("../components/modebar");var ee=e("../plots/cartesian/axes");var te=e("../constants/alignment");var r=e("../plots/cartesian/constraints");var l=r.enforce;var u=r.clean;var c=e("../plots/cartesian/autorange").doAutoRange;var i="start";var a="middle";var o="end";W.layoutStyles=function(e){return X.syncOrAsync([Z.doAutoMargin,s],e)};function re(e,t,r){for(var a=0;a<r.length;a++){var n=r[a][0];var i=r[a][1];if(n[0]>=e[1]||n[1]<=e[0]){continue}if(i[0]<t[1]&&i[1]>t[0]){return true}}return false}function s(e){var t=e._fullLayout;var n=t._size;var i=n.p;var r=ee.list(e,"",true);var a,o,s,l,u,c;t._paperdiv.style({width:e._context.responsive&&t.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":t.width+"px",height:e._context.responsive&&t.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":t.height+"px"}).selectAll(".main-svg").call(K.setSize,t.width,t.height);e._context.setBackground(e,t.paper_bgcolor);W.drawMainTitle(e);Q.manage(e);if(!t._has("cartesian")){return Z.previousPromises(e)}function f(e,t,r){var a=e._lw/2;if(e._id.charAt(0)==="x"){if(!t)return n.t+n.h*(1-(e.position||0))+a%1;else if(r==="top")return t._offset-i-a;return t._offset+t._length+i+a}if(!t)return n.l+n.w*(e.position||0)+a%1;else if(r==="right")return t._offset+t._length+i+a;return t._offset-i-a}for(a=0;a<r.length;a++){l=r[a];var d=l._anchorAxis;l._linepositions={};l._lw=K.crispRound(e,l.linewidth,1);l._mainLinePosition=f(l,d,l.side);l._mainMirrorPosition=l.mirror&&d?f(l,d,te.OPPOSITE_SIDE[l.side]):null}var v=[];var p=[];var h=[];var m=J.opacity(t.paper_bgcolor)===1&&J.opacity(t.plot_bgcolor)===1&&t.paper_bgcolor===t.plot_bgcolor;for(o in t._plots){s=t._plots[o];if(s.mainplot){if(s.bg){s.bg.remove()}s.bg=undefined}else{var g=s.xaxis.domain;var y=s.yaxis.domain;var x=s.plotgroup;if(re(g,y,h)){var b=x.node();var _=s.bg=X.ensureSingle(x,"rect","bg");b.insertBefore(_.node(),b.childNodes[0]);p.push(o)}else{x.select("rect.bg").remove();h.push([g,y]);if(!m){v.push(o);p.push(o)}}}}var w=t._bgLayer.selectAll(".bg").data(v);w.enter().append("rect").classed("bg",true);w.exit().remove();w.each(function(e){t._plots[e].bg=$.select(this)});for(a=0;a<p.length;a++){s=t._plots[p[a]];u=s.xaxis;c=s.yaxis;if(s.bg&&u._offset!==undefined&&c._offset!==undefined){s.bg.call(K.setRect,u._offset-i,c._offset-i,u._length+2*i,c._length+2*i).call(J.fill,t.plot_bgcolor).style("stroke-width",0)}}if(!t._hasOnlyLargeSploms){for(o in t._plots){s=t._plots[o];u=s.xaxis;c=s.yaxis;var T=s.clipId="clip"+t._uid+o+"plot";var k=X.ensureSingleById(t._clips,"clipPath",T,function(e){e.classed("plotclip",true).append("rect")});s.clipRect=k.select("rect").attr({width:u._length,height:c._length});K.setTranslate(s.plot,u._offset,c._offset);var M;var A;if(s._hasClipOnAxisFalse){M=null;A=T}else{M=T;A=null}K.setClipUrl(s.plot,M,e);s.layerClipId=A}}var S,E,L,C,D,O;var I,P,R,N,z,F;var j;function H(e){return"M"+S+","+e+"H"+E}function B(e){return"M"+u._offset+","+e+"h"+u._length}function q(e){return"M"+e+","+P+"V"+I}function U(e){return"M"+e+","+c._offset+"v"+c._length}function Y(e,t,r){if(!e.showline||o!==e._mainSubplot)return"";if(!e._anchorAxis)return r(e._mainLinePosition);var a=t(e._mainLinePosition);if(e.mirror)a+=t(e._mainMirrorPosition);return a}for(o in t._plots){s=t._plots[o];u=s.xaxis;c=s.yaxis;var V="M0,0";if(ae(u,o)){D=ne(u,"left",c,r);S=u._offset-(D?i+D:0);O=ne(u,"right",c,r);E=u._offset+u._length+(O?i+O:0);L=f(u,c,"bottom");C=f(u,c,"top");j=!u._anchorAxis||o!==u._mainSubplot;if(j&&(u.mirror==="allticks"||u.mirror==="all")){u._linepositions[o]=[L,C]}V=Y(u,H,B);if(j&&u.showline&&(u.mirror==="all"||u.mirror==="allticks")){V+=H(L)+H(C)}s.xlines.style("stroke-width",u._lw+"px").call(J.stroke,u.showline?u.linecolor:"rgba(0,0,0,0)")}s.xlines.attr("d",V);var G="M0,0";if(ae(c,o)){z=ne(c,"bottom",u,r);I=c._offset+c._length+(z?i:0);F=ne(c,"top",u,r);P=c._offset-(F?i:0);R=f(c,u,"left");N=f(c,u,"right");j=!c._anchorAxis||o!==c._mainSubplot;if(j&&(c.mirror==="allticks"||c.mirror==="all")){c._linepositions[o]=[R,N]}G=Y(c,q,U);if(j&&c.showline&&(c.mirror==="all"||c.mirror==="allticks")){G+=q(R)+q(N)}s.ylines.style("stroke-width",c._lw+"px").call(J.stroke,c.showline?c.linecolor:"rgba(0,0,0,0)")}s.ylines.attr("d",G)}ee.makeClipPaths(e);return Z.previousPromises(e)}function ae(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||e.mirror==="all"||e.mirror==="allticks")}function v(e,t,r){if(!r.showline||!r._lw)return false;if(r.mirror==="all"||r.mirror==="allticks")return true;var a=r._anchorAxis;if(!a)return false;var n=te.FROM_BL[t];if(r.side===t){return a.domain[n]===e.domain[n]}return r.mirror&&a.domain[1-n]===e.domain[1-n]}function ne(e,t,r,a){if(v(e,t,r)){return r._lw}for(var n=0;n<a.length;n++){var i=a[n];if(i._mainAxis===r._mainAxis&&v(e,t,i)){return i._lw}}return 0}W.drawMainTitle=function(e){var t=e._fullLayout;var r=m(t);var a=g(t);n.draw(e,"gtitle",{propContainer:t,propName:"title.text",placeholder:t._dfltTitle.plot,attributes:{x:p(t,r),y:h(t,a),"text-anchor":r,dy:a}})};function p(e,t){var r=e.title;var a=e._size;var n=0;if(t===i){n=r.pad.l}else if(t===o){n=-r.pad.r}switch(r.xref){case"paper":return a.l+a.w*r.x+n;case"container":default:return e.width*r.x+n}}function h(e,t){var r=e.title;var a=e._size;var n=0;if(t==="0em"||!t){n=-r.pad.b}else if(t===te.CAP_SHIFT+"em"){n=r.pad.t}if(r.y==="auto"){return a.t/2}else{switch(r.yref){case"paper":return a.t+a.h-a.h*r.y+n;case"container":default:return e.height-e.height*r.y+n}}}function m(e){var t=e.title;var r=a;if(X.isRightAnchor(t)){r=o}else if(X.isLeftAnchor(t)){r=i}return r}function g(e){var t=e.title;var r="0em";if(X.isTopAnchor(t)){r=te.CAP_SHIFT+"em"}else if(X.isMiddleAnchor(t)){r=te.MID_SHIFT+"em"}return r}W.doTraceStyle=function(e){var t=e.calcdata;var r=[];var a;for(a=0;a<t.length;a++){var n=t[a];var i=n[0]||{};var o=i.trace||{};var s=o._module||{};var l=s.arraysToCalcdata;if(l)l(n,o);var u=s.editStyle;if(u)r.push({fn:u,cd0:i})}if(r.length){for(a=0;a<r.length;a++){var c=r[a];c.fn(e,c.cd0)}d(e);W.redrawReglTraces(e)}Z.style(e);f.getComponentMethod("legend","draw")(e);return Z.previousPromises(e)};W.doColorBars=function(e){f.getComponentMethod("colorbar","draw")(e);return Z.previousPromises(e)};W.layoutReplot=function(e){var t=e.layout;e.layout=undefined;return f.call("_doPlot",e,"",t)};W.doLegend=function(e){f.getComponentMethod("legend","draw")(e);return Z.previousPromises(e)};W.doTicksRelayout=function(e){ee.draw(e,"redraw");if(e._fullLayout._hasOnlyLargeSploms){f.subplotsRegistry.splom.updateGrid(e);d(e);W.redrawReglTraces(e)}W.drawMainTitle(e);return Z.previousPromises(e)};W.doModeBar=function(e){var t=e._fullLayout;Q.manage(e);for(var r=0;r<t._basePlotModules.length;r++){var a=t._basePlotModules[r].updateFx;if(a)a(e)}return Z.previousPromises(e)};W.doCamera=function(e){var t=e._fullLayout;var r=t._subplots.gl3d;for(var a=0;a<r.length;a++){var n=t[r[a]];var i=n._scene;i.setViewport(n)}};W.drawData=function(e){var t=e._fullLayout;d(e);var r=t._basePlotModules;for(var a=0;a<r.length;a++){r[a].plot(e)}W.redrawReglTraces(e);Z.style(e);f.getComponentMethod("shapes","draw")(e);f.getComponentMethod("annotations","draw")(e);f.getComponentMethod("images","draw")(e);t._replotting=false;return Z.previousPromises(e)};W.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var r=e._fullData;var a=[];var n=[];var i,o;if(t._hasOnlyLargeSploms){t._splomGrid.draw()}for(i=0;i<r.length;i++){var s=r[i];if(s.visible===true&&s._length!==0){if(s.type==="splom"){t._splomScenes[s.uid].draw()}else if(s.type==="scattergl"){X.pushUnique(a,s.xaxis+s.yaxis)}else if(s.type==="scatterpolargl"){X.pushUnique(n,s.subplot)}}}for(i=0;i<a.length;i++){o=t._plots[a[i]];if(o._scene)o._scene.draw()}for(i=0;i<n.length;i++){o=t[n[i]]._subplot;if(o._scene)o._scene.draw()}}};W.doAutoRangeAndConstraints=function(e){var t=ee.list(e,"",true);var r;var a={};for(var n=0;n<t.length;n++){r=t[n];if(!a[r._id]){a[r._id]=1;u(e,r);c(e,r);var i=r._matchGroup;if(i){for(var o in i){var s=ee.getFromId(e,o);c(e,s,r.range);a[o]=1}}}}l(e)};W.finalDraw=function(e){f.getComponentMethod("rangeslider","draw")(e);f.getComponentMethod("rangeselector","draw")(e)};W.drawMarginPushers=function(e){f.getComponentMethod("legend","draw")(e);f.getComponentMethod("rangeselector","draw")(e);f.getComponentMethod("sliders","draw")(e);f.getComponentMethod("updatemenus","draw")(e);f.getComponentMethod("colorbar","draw")(e)}},{"../components/color":155,"../components/drawing":177,"../components/modebar":218,"../components/titles":253,"../constants/alignment":260,"../lib":285,"../lib/clear_gl_canvases":273,"../plots/cartesian/autorange":330,"../plots/cartesian/axes":331,"../plots/cartesian/constraints":339,"../plots/plots":366,"../registry":373,"@plotly/d3":20}],322:[function(e,t,r){"use strict";var k=e("../lib");var M=k.isPlainObject;var a=e("./plot_schema");var x=e("../plots/plots");var v=e("../plots/attributes");var A=e("./plot_template");var b=e("./plot_config").dfltConfig;r.makeTemplate=function(e){e=k.isPlainObject(e)?e:k.getGraphDiv(e);e=k.extendDeep({_context:b},{data:e.data,layout:e.layout});x.supplyDefaults(e);var t=e.data||[];var r=e.layout||{};r._basePlotModules=e._fullLayout._basePlotModules;r._modules=e._fullLayout._modules;var n={data:{},layout:{}};t.forEach(function(e){var t={};E(e,t,m.bind(null,e));var r=k.coerce(e,{},v,"type");var a=n.data[r];if(!a)a=n.data[r]=[];a.push(t)});E(r,n.layout,h.bind(null,r));delete n.layout.template;var a=r.template;if(M(a)){var i=a.layout;var o,s,l,u,c,f;if(M(i)){p(i,n.layout)}var d=a.data;if(M(d)){for(s in n.data){l=d[s];if(Array.isArray(l)){c=n.data[s];f=c.length;u=l.length;for(o=0;o<f;o++){p(l[o%u],c[o])}for(o=f;o<u;o++){c.push(k.extendDeep({},l[o]))}}}for(s in d){if(!(s in n.data)){n.data[s]=k.extendDeep([],d[s])}}}}return n};function p(s,e){s=k.extendDeep({},s);var t=Object.keys(s).sort();var r,l;function a(e,t,r){if(M(t)&&M(e)){p(e,t)}else if(Array.isArray(t)&&Array.isArray(e)){var a=A.arrayTemplater({_template:s},r);for(l=0;l<t.length;l++){var n=t[l];var i=a.newItem(n)._template;if(i)p(i,n)}var o=a.defaultItems();for(l=0;l<o.length;l++)t.push(o[l]._template);for(l=0;l<t.length;l++)delete t[l].templateitemname}}for(r=0;r<t.length;r++){var n=t[r];var i=s[n];if(n in e){a(i,e[n],n)}else e[n]=i;if(S(n)===n){for(var o in e){var u=S(o);if(o!==u&&u===n&&!(o in s)){a(i,e[o],n)}}}}}function S(e){return e.replace(/[0-9]+$/,"")}function E(e,t,r,a,n){var i=n&&r(n);for(var o in e){var s=e[o];var l=L(e,o,a);var u=L(e,o,n);var c=r(u);if(!c){var f=S(o);if(f!==o){u=L(e,f,n);c=r(u)}}if(i&&i===c)continue;if(!c||c._noTemplating||c.valType==="data_array"||c.arrayOk&&Array.isArray(s)){continue}if(!c.valType&&M(s)){E(s,t,r,l,u)}else if(c._isLinkedToArray&&Array.isArray(s)){var d=false;var v=0;var p={};for(var h=0;h<s.length;h++){var m=s[h];if(M(m)){var g=m.name;if(g){if(!p[g]){E(m,t,r,L(s,v,l),L(s,v,u));v++;p[g]=1}}else if(!d){var y=A.arrayDefaultKey(o);var x=L(e,y,a);var b=L(s,v,l);E(m,t,r,b,L(s,v,u));var _=k.nestedProperty(t,b);var w=k.nestedProperty(t,x);w.set(_.get());_.set(null);d=true}}}}else{var T=k.nestedProperty(t,l);T.set(s)}}}function h(e,t){return a.getLayoutValObject(e,k.nestedProperty({},t).parts)}function m(e,t){return a.getTraceValObject(e,k.nestedProperty({},t).parts)}function L(e,t,r){var a;if(!r)a=t;else if(Array.isArray(e))a=r+"["+t+"]";else a=r+"."+t;return a}r.validateTemplate=function(e,t){var r=k.extendDeep({},{_context:b,data:e.data,layout:e.layout});var a=r.layout||{};if(!M(t))t=a.template||{};var n=t.layout;var i=t.data;var o=[];r.layout=a;r.layout.template=t;x.supplyDefaults(r);var s=r._fullLayout;var l=r._fullData;var u={};function c(e,t){for(var r in e){if(r.charAt(0)!=="_"&&M(e[r])){var a=S(r);var n=[];var i;for(i=0;i<t.length;i++){n.push(L(e,r,t[i]));if(a!==r)n.push(L(e,a,t[i]))}for(i=0;i<n.length;i++){u[n[i]]=1}c(e[r],n)}}}function f(e,t){for(var r in e){if(r.indexOf("defaults")===-1&&M(e[r])){var a=L(e,r,t);if(u[a]){f(e[r],a)}else{o.push({code:"unused",path:a})}}}}if(!M(n)){o.push({code:"layout"})}else{c(s,["layout"]);f(n,"layout")}if(!M(i)){o.push({code:"data"})}else{var d={};var v;for(var p=0;p<l.length;p++){var h=l[p];v=h.type;d[v]=(d[v]||0)+1;if(!h._fullInput._template){o.push({code:"missing",index:h._fullInput.index,traceType:v})}}for(v in i){var m=i[v].length;var g=d[v]||0;if(m>g){o.push({code:"unused",traceType:v,templateCount:m,dataCount:g})}else if(g>m){o.push({code:"reused",traceType:v,templateCount:m,dataCount:g})}}}function y(e,t){for(var r in e){if(r.charAt(0)==="_")continue;var a=e[r];var n=L(e,r,t);if(M(a)){if(Array.isArray(e)&&a._template===false&&a.templateitemname){o.push({code:"missing",path:n,templateitemname:a.templateitemname})}y(a,n)}else if(Array.isArray(a)&&_(a)){y(a,n)}}}y({data:l,layout:s},"");if(o.length)return o.map(w)};function _(e){for(var t=0;t<e.length;t++){if(M(e[t]))return true}}function w(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":if(e.path){t="There are no templates for item "+e.path+" with name "+e.templateitemname}else{t="There are no templates for trace "+e.index+", of type "+e.traceType+"."}break;case"unused":if(e.path){t="The template item at "+e.path+" was not used in constructing the plot."}else if(e.dataCount){t="Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type."}else{t="The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data."}break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type.";break}e.msg=t;return e}},{"../lib":285,"../plots/attributes":327,"../plots/plots":366,"./plot_config":318,"./plot_schema":319,"./plot_template":320}],323:[function(e,t,r){"use strict";var w=e("fast-isnumeric");var T=e("./plot_api");var k=e("../plots/plots");var M=e("../lib");var A=e("../snapshot/helpers");var S=e("../snapshot/tosvg");var E=e("../snapshot/svgtoimg");var L=e("../version").version;var C={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:false},imageDataOnly:{valType:"boolean",dflt:false}};function a(e,r){r=r||{};var a;var t;var n;var i;if(M.isPlainObject(e)){a=e.data||[];t=e.layout||{};n=e.config||{};i={}}else{e=M.getGraphDiv(e);a=M.extendDeep([],e.data);t=M.extendDeep({},e.layout);n=e._context;i=e._fullLayout||{}}function o(e){return!(e in r)||M.validate(r[e],C[e])}if(!o("width")&&r.width!==null||!o("height")&&r.height!==null){throw new Error("Height and width should be pixel values.")}if(!o("format")){throw new Error("Export format is not "+M.join2(C.format.values,", "," or ")+".")}var s={};function l(e,t){return M.coerce(r,s,C,e,t)}var u=l("format");var c=l("width");var f=l("height");var d=l("scale");var v=l("setBackground");var p=l("imageDataOnly");var h=document.createElement("div");h.style.position="absolute";h.style.left="-5000px";document.body.appendChild(h);var m=M.extendFlat({},t);if(c){m.width=c}else if(r.width===null&&w(i.width)){m.width=i.width}if(f){m.height=f}else if(r.height===null&&w(i.height)){m.height=i.height}var g=M.extendFlat({},n,{_exportedPlot:true,staticPlot:true,setBackground:v});var y=A.getRedrawFunc(h);function x(){return new Promise(function(e){setTimeout(e,A.getDelay(h._fullLayout))})}function b(){return new Promise(function(e,t){var r=S(h,u,d);var a=h._fullLayout.width;var n=h._fullLayout.height;function i(){T.purge(h);document.body.removeChild(h)}if(u==="full-json"){var o=k.graphJson(h,false,"keepdata","object",true,true);o.version=L;o=JSON.stringify(o);i();if(p){return e(o)}else{return e(A.encodeJSON(o))}}i();if(u==="svg"){if(p){return e(r)}else{return e(A.encodeSVG(r))}}var s=document.createElement("canvas");s.id=M.randstr();E({format:u,width:a,height:n,scale:d,canvas:s,svg:r,promise:true}).then(e).catch(t)})}function _(e){if(p){return e.replace(A.IMAGE_URL_PREFIX,"")}else{return e}}return new Promise(function(t,r){T.newPlot(h,a,m,g).then(y).then(x).then(b).then(function(e){t(_(e))}).catch(function(e){r(e)})})}t.exports=a},{"../lib":285,"../plots/plots":366,"../snapshot/helpers":377,"../snapshot/svgtoimg":379,"../snapshot/tosvg":381,"../version":546,"./plot_api":317,"fast-isnumeric":31}],324:[function(e,t,r){"use strict";var O=e("../lib");var k=e("../plots/plots");var M=e("./plot_schema");var A=e("./plot_config").dfltConfig;var I=O.isPlainObject;var P=Array.isArray;var R=O.isArrayOrTypedArray;t.exports=function e(t,r){if(t===undefined)t=[];if(r===undefined)r={};var a=M.get();var n=[];var i={_context:O.extendFlat({},A)};var o,s;if(P(t)){i.data=O.extendDeep([],t);o=t}else{i.data=[];o=[];n.push(z("array","data"))}if(I(r)){i.layout=O.extendDeep({},r);s=r}else{i.layout={};s={};if(arguments.length>1){n.push(z("object","layout"))}}k.supplyDefaults(i);var l=i._fullData;var u=o.length;for(var c=0;c<u;c++){var f=o[c];var d=["data",c];if(!I(f)){n.push(z("object",d));continue}var v=l[c];var p=v.type;var h=a.traces[p].attributes;h.type={valType:"enumerated",values:[p]};if(v.visible===false&&f.visible!==false){n.push(z("invisible",d))}N(f,v,h,n,d);var m=f.transforms;var g=v.transforms;if(m){if(!P(m)){n.push(z("array",d,["transforms"]))}d.push("transforms");for(var y=0;y<m.length;y++){var x=["transforms",y];var b=m[y].type;if(!I(m[y])){n.push(z("object",d,x));continue}var _=a.transforms[b]?a.transforms[b].attributes:{};_.type={valType:"enumerated",values:Object.keys(a.transforms)};N(m[y],g[y],_,n,d,x)}}}var w=i._fullLayout;var T=S(a,l);N(s,w,T,n,"layout");return n.length===0?void 0:n};function N(e,t,r,a,n,i){i=i||[];var o=Object.keys(e);for(var s=0;s<o.length;s++){var l=o[s];if(l==="transforms")continue;var u=i.slice();u.push(l);var c=e[l];var f=t[l];var d=j(r,l);var v=(d||{}).valType;var p=v==="info_array";var h=v==="colorscale";var m=(d||{}).items;if(!F(r,l)){a.push(z("schema",n,u))}else if(I(c)&&I(f)&&v!=="any"){N(c,f,d,a,n,u)}else if(p&&P(c)){if(c.length>f.length){a.push(z("unused",n,u.concat(f.length)))}var g=f.length;var y=Array.isArray(m);if(y)g=Math.min(g,m.length);var x,b,_,w,T;if(d.dimensions===2){for(b=0;b<g;b++){if(P(c[b])){if(c[b].length>f[b].length){a.push(z("unused",n,u.concat(b,f[b].length)))}var k=f[b].length;for(x=0;x<(y?Math.min(k,m[b].length):k);x++){_=y?m[b][x]:m;w=c[b][x];T=f[b][x];if(!O.validate(w,_)){a.push(z("value",n,u.concat(b,x),w))}else if(T!==w&&T!==+w){a.push(z("dynamic",n,u.concat(b,x),w,T))}}}else{a.push(z("array",n,u.concat(b),c[b]))}}}else{for(b=0;b<g;b++){_=y?m[b]:m;w=c[b];T=f[b];if(!O.validate(w,_)){a.push(z("value",n,u.concat(b),w))}else if(T!==w&&T!==+w){a.push(z("dynamic",n,u.concat(b),w,T))}}}}else if(d.items&&!p&&P(c)){var M=m[Object.keys(m)[0]];var A=[];var S,E;for(S=0;S<f.length;S++){var L=f[S]._index||S;E=u.slice();E.push(L);if(I(c[L])&&I(f[S])){A.push(L);var C=c[L];var D=f[S];if(I(C)&&C.visible!==false&&D.visible===false){a.push(z("invisible",n,E))}else N(C,D,M,a,n,E)}}for(S=0;S<c.length;S++){E=u.slice();E.push(S);if(!I(c[S])){a.push(z("object",n,E,c[S]))}else if(A.indexOf(S)===-1){a.push(z("unused",n,E))}}}else if(!I(c)&&I(f)){a.push(z("object",n,u,c))}else if(!R(c)&&R(f)&&!p&&!h){a.push(z("array",n,u,c))}else if(!(l in t)){a.push(z("unused",n,u,c))}else if(!O.validate(c,d)){a.push(z("value",n,u,c))}else if(d.valType==="enumerated"&&(d.coerceNumber&&c!==+f||c!==f)){a.push(z("dynamic",n,u,c,f))}}return a}function S(e,t){var r=e.layout.layoutAttributes;for(var a=0;a<t.length;a++){var n=t[a];var i=e.traces[n.type];var o=i.layoutAttributes;if(o){if(n.subplot){O.extendFlat(r[i.attributes.subplot.dflt],o)}else{O.extendFlat(r,o)}}}return r}var u={object:function(e,t){var r;if(e==="layout"&&t==="")r="The layout argument";else if(e[0]==="data"&&t===""){r="Trace "+e[1]+" in the data argument"}else r=n(e)+"key "+t;return r+" must be linked to an object container"},array:function(e,t){var r;if(e==="data")r="The data argument";else r=n(e)+"key "+t;return r+" must be linked to an array container"},schema:function(e,t){return n(e)+"key "+t+" is not part of the schema"},unused:function(e,t,r){var a=I(r)?"container":"key";return n(e)+a+" "+t+" did not get coerced"},dynamic:function(e,t,r,a){return[n(e)+"key",t,"(set to '"+r+"')","got reset to","'"+a+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?n(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,r){return[n(e)+"key "+t,"is set to an invalid value ("+r+")"].join(" ")}};function n(e){if(P(e))return"In data trace "+e[1]+", ";return"In "+e+", "}function z(e,t,r,a,n){r=r||"";var i,o;if(P(t)){i=t[0];o=t[1]}else{i=t;o=null}var s=c(r);var l=u[e](t,s,a,n);O.log(l);return{code:e,container:i,trace:o,path:r,astr:s,msg:l}}function F(e,t){var r=i(t);var a=r.keyMinusId;var n=r.id;if(a in e&&e[a]._isSubplotObj&&n){return true}return t in e}function j(e,t){if(t in e)return e[t];var r=i(t);return e[r.keyMinusId]}var a=O.counterRegex("([a-z]+)");function i(e){var t=e.match(a);return{keyMinusId:t&&t[1],id:t&&t[2]}}function c(e){if(!P(e))return String(e);var t="";for(var r=0;r<e.length;r++){var a=e[r];if(typeof a==="number"){t=t.substr(0,t.length-1)+"["+a+"]"}else{t+=a}if(r<e.length-1)t+="."}return t}},{"../lib":285,"../plots/plots":366,"./plot_config":318,"./plot_schema":319}],325:[function(e,t,r){"use strict";t.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:false},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:true}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],326:[function(e,t,r){"use strict";var h=e("../lib");var m=e("../plot_api/plot_template");t.exports=function e(t,r,a){var n=a.name;var i=a.inclusionAttr||"visible";var o=r[n];var s=h.isArrayOrTypedArray(t[n])?t[n]:[];var l=r[n]=[];var u=m.arrayTemplater(r,n,i);var c,f;for(c=0;c<s.length;c++){var d=s[c];if(!h.isPlainObject(d)){f=u.newItem({});f[i]=false}else{f=u.newItem(d)}f._index=c;if(f[i]!==false){a.handleItemDefaults(d,f,r,a)}l.push(f)}var v=u.defaultItems();for(c=0;c<v.length;c++){f=v[c];f._index=l.length;a.handleItemDefaults({},f,r,a,{});l.push(f)}if(h.isArrayOrTypedArray(o)){var p=Math.min(o.length,l.length);for(c=0;c<p;c++){h.relinkPrivateKeys(l[c],o[c])}}return l}},{"../lib":285,"../plot_api/plot_template":320}],327:[function(e,t,r){"use strict";var a=e("./font_attributes");var n=e("../components/fx/attributes");t.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:true},visible:{valType:"enumerated",values:[true,false,"legendonly"],dflt:true,editType:"calc"},showlegend:{valType:"boolean",dflt:true,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:a({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:true},ids:{valType:"data_array",editType:"calc",anim:true},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:true,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:true,dflt:"all",editType:"none"},hoverlabel:n.hoverlabel,stream:{token:{valType:"string",noBlank:true,strict:true,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":186,"./font_attributes":360}],328:[function(e,t,r){"use strict";var _=e("fast-isnumeric");var a=e("../../lib");var w=a.dateTime2ms;var T=a.incrementMonth;var n=e("../../constants/numerical");var k=n.ONEAVGMONTH;t.exports=function e(t,r,a,n){if(r.type!=="date")return n;var i=t[a+"periodalignment"];if(!i)return n;var o=t[a+"period"];var s;if(_(o)){o=+o;if(o<=0)return n}else if(typeof o==="string"&&o.charAt(0)==="M"){var l=+o.substring(1);if(l>0&&Math.round(l)===l){s=l}else return n}var u=r.calendar;var c="start"===i;var f="end"===i;var d=t[a+"period0"];var v=w(d,u)||0;var p=[];var h=n.length;for(var m=0;m<h;m++){var g=n[m];var y,x,b;if(s){y=Math.round((g-v)/(s*k));b=T(v,s*y,u);while(b>g){b=T(b,-s,u)}while(b<=g){b=T(b,s,u)}x=T(b,-s,u)}else{y=Math.round((g-v)/o);b=v+y*o;while(b>g){b-=o}while(b<=g){b+=o}x=b-o}p[m]=c?x:f?b:(x+b)/2}return p}},{"../../constants/numerical":265,"../../lib":285,"fast-isnumeric":31}],329:[function(e,t,r){"use strict";t.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],330:[function(e,t,r){"use strict";var y=e("@plotly/d3");var E=e("fast-isnumeric");var O=e("../../lib");var L=e("../../constants/numerical").FP_SAFE;var s=e("../../registry");var x=e("../../components/drawing");var a=e("./axis_ids");var m=a.getFromId;var l=a.isLinked;t.exports={getAutoRange:u,makePadFn:P,doAutoRange:n,findExtremes:i,concatExtremes:R};function u(e,t){var r,a;var n=[];var i=e._fullLayout;var o=P(i,t,0);var s=P(i,t,1);var l=R(e,t);var u=l.min;var c=l.max;if(u.length===0||c.length===0){return O.simpleMap(t.range,t.r2l)}var f=u[0].val;var d=c[0].val;for(r=1;r<u.length;r++){if(f!==d)break;f=Math.min(f,u[r].val)}for(r=1;r<c.length;r++){if(f!==d)break;d=Math.max(d,c[r].val)}var v=false;if(t.range){var p=O.simpleMap(t.range,t.r2l);v=p[1]<p[0]}if(t.autorange==="reversed"){v=true;t.autorange=true}var h=t.rangemode;var m=h==="tozero";var g=h==="nonnegative";var y=t._length;var x=y/10;var b=0;var _,w,T,k,M,A;for(r=0;r<u.length;r++){_=u[r];for(a=0;a<c.length;a++){w=c[a];A=w.val-_.val-I(t,_.val,w.val);if(A>0){M=y-o(_)-s(w);if(M>x){if(A/M>b){T=_;k=w;b=A/M}}else if(A/y>b){T={val:_.val,nopad:1};k={val:w.val,nopad:1};b=A/y}}}}function S(e,t){return Math.max(e,s(t))}if(f===d){var E=f-1;var L=f+1;if(m){if(f===0){n=[0,1]}else{var C=(f>0?c:u).reduce(S,0);var D=f/(1-Math.min(.5,C/y));n=f>0?[0,D]:[D,0]}}else if(g){n=[Math.max(0,E),Math.max(1,L)]}else{n=[E,L]}}else{if(m){if(T.val>=0){T={val:0,nopad:1}}if(k.val<=0){k={val:0,nopad:1}}}else if(g){if(T.val-b*o(T)<0){T={val:0,nopad:1}}if(k.val<=0){k={val:1,nopad:1}}}b=(k.val-T.val-I(t,_.val,w.val))/(y-o(T)-s(k));n=[T.val-b*o(T),k.val+b*s(k)]}if(v)n.reverse();return O.simpleMap(n,t.l2r||Number)}function I(e,t,r){var a=0;if(e.rangebreaks){var n=e.locateBreaks(t,r);for(var i=0;i<n.length;i++){var o=n[i];a+=o.max-o.min}}return a}function P(e,t,r){var a=.05*t._length;var n=t._anchorAxis||{};if((t.ticklabelposition||"").indexOf("inside")!==-1||(n.ticklabelposition||"").indexOf("inside")!==-1){var i=t.autorange==="reversed";if(!i){var o=O.simpleMap(t.range,t.r2l);i=o[1]<o[0]}if(i)r=!r}var s=0;if(!l(e,t._id)){s=c(e,t,r)}a=Math.max(s,a);if(t.constrain==="domain"&&t._inputDomain){a*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])}return function e(t){if(t.nopad)return 0;return t.pad+(t.extrapad?a:s)}}var b=3;function c(e,t,r){var a=0;var n=t._id.charAt(0)==="x";for(var i in e._plots){var o=e._plots[i];if(t._id!==o.xaxis._id&&t._id!==o.yaxis._id)continue;var s=(n?o.yaxis:o.xaxis)||{};if((s.ticklabelposition||"").indexOf("inside")!==-1){if(!r&&(s.side==="left"||s.side==="bottom")||r&&(s.side==="top"||s.side==="right")){if(s._vals){var l=O.deg2rad(s._tickAngles[s._id+"tick"]||0);var u=Math.abs(Math.cos(l));var c=Math.abs(Math.sin(l));if(!s._vals[0].bb){var f=s._id+"tick";var d=s._selections[f];d.each(function(e){var t=y.select(this);var r=t.select(".text-math-group");if(r.empty()){e.bb=x.bBox(t.node())}})}for(var v=0;v<s._vals.length;v++){var p=s._vals[v];var h=p.bb;if(h){var m=2*b+h.width;var g=2*b+h.height;a=Math.max(a,n?Math.max(m*u,g*c):Math.max(g*u,m*c))}}}if(s.ticks==="inside"&&s.ticklabelposition==="inside"){a+=s.ticklen||0}}}}return a}function R(e,t,r){var n=t._id;var a=e._fullData;var i=e._fullLayout;var o=[];var s=[];var l,u,c;function f(e,t){for(l=0;l<t.length;l++){var r=e[t[l]];var a=(r._extremes||{})[n];if(r.visible===true&&a){for(u=0;u<a.min.length;u++){c=a.min[u];C(o,c.val,c.pad,{extrapad:c.extrapad})}for(u=0;u<a.max.length;u++){c=a.max[u];D(s,c.val,c.pad,{extrapad:c.extrapad})}}}}f(a,t._traceIndices);f(i.annotations||[],t._annIndices||[]);f(i.shapes||[],t._shapeIndices||[]);if(t._matchGroup&&!r){for(var d in t._matchGroup){if(d!==t._id){var v=m(e,d);var p=R(e,v,true);var h=t._length/v._length;for(u=0;u<p.min.length;u++){c=p.min[u];C(o,c.val,c.pad*h,{extrapad:c.extrapad})}for(u=0;u<p.max.length;u++){c=p.max[u];D(s,c.val,c.pad*h,{extrapad:c.extrapad})}}}}return{min:o,max:s}}function n(e,t,r){t.setScale();if(t.autorange){t.range=r?r.slice():u(e,t);t._r=t.range.slice();t._rl=O.simpleMap(t._r,t.r2l);var a=t._input;var n={};n[t._attr+".range"]=t.range;n[t._attr+".autorange"]=t.autorange;s.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,n);a.range=t.range.slice();a.autorange=t.autorange}var i=t._anchorAxis;if(i&&i.rangeslider){var o=i.rangeslider[t._name];if(o){if(o.rangemode==="auto"){o.range=u(e,t)}}i._input.rangeslider[t._name]=O.extendFlat({},o)}}function i(t,r,e){if(!e)e={};if(!t._m)t.setScale();var a=[];var n=[];var i=r.length;var o=e.padded||false;var s=e.tozero&&(t.type==="linear"||t.type==="-");var l=t.type==="log";var u=false;var c=e.vpadLinearized||false;var f,d,v,p,h,m,g,y,x;function b(t){if(Array.isArray(t)){u=true;return function(e){return Math.max(Number(t[e]||0),0)}}else{var e=Math.max(Number(t||0),0);return function(){return e}}}var _=b((t._m>0?e.ppadplus:e.ppadminus)||e.ppad||0);var w=b((t._m>0?e.ppadminus:e.ppadplus)||e.ppad||0);var T=b(e.vpadplus||e.vpad);var k=b(e.vpadminus||e.vpad);if(!u){y=Infinity;x=-Infinity;if(l){for(f=0;f<i;f++){d=r[f];if(d<y&&d>0)y=d;if(d>x&&d<L)x=d}}else{for(f=0;f<i;f++){d=r[f];if(d<y&&d>-L)y=d;if(d>x&&d<L)x=d}}r=[y,x];i=2}var M={tozero:s,extrapad:o};function A(e){v=r[e];if(!E(v))return;m=_(e);g=w(e);if(c){p=t.c2l(v)-k(e);h=t.c2l(v)+T(e)}else{y=v-k(e);x=v+T(e);if(l&&y<x/10)y=x/10;p=t.c2l(y);h=t.c2l(x)}if(s){p=Math.min(0,p);h=Math.max(0,h)}if(N(p)){C(a,p,g,M)}if(N(h)){D(n,h,m,M)}}var S=Math.min(6,i);for(f=0;f<S;f++)A(f);for(f=i-1;f>=S;f--)A(f);return{min:a,max:n,opts:e}}function C(e,t,r,a){o(e,t,r,a,f)}function D(e,t,r,a){o(e,t,r,a,d)}function o(e,t,r,a,n){var i=a.tozero;var o=a.extrapad;var s=true;for(var l=0;l<e.length&&s;l++){var u=e[l];if(n(u.val,t)&&u.pad>=r&&(u.extrapad||!o)){s=false;break}else if(n(t,u.val)&&u.pad<=r&&(o||!u.extrapad)){e.splice(l,1);l--}}if(s){var c=i&&t===0;e.push({val:t,pad:c?0:r,extrapad:c?false:o})}}function N(e){return E(e)&&Math.abs(e)<L}function f(e,t){return e<=t}function d(e,t){return e>=t}},{"../../components/drawing":177,"../../constants/numerical":265,"../../lib":285,"../../registry":373,"./axis_ids":335,"@plotly/d3":20,"fast-isnumeric":31}],331:[function(e,t,r){"use strict";var M=e("@plotly/d3");var E=e("fast-isnumeric");var Y=e("../../plots/plots");var V=e("../../registry");var G=e("../../lib");var v=G.strTranslate;var m=e("../../lib/svg_text_utils");var g=e("../../components/titles");var c=e("../../components/color");var A=e("../../components/drawing");var b=e("./layout_attributes");var y=e("./clean_ticks");var a=e("../../constants/numerical");var x=a.ONEMAXYEAR;var _=a.ONEAVGYEAR;var w=a.ONEMINYEAR;var T=a.ONEMAXQUARTER;var k=a.ONEAVGQUARTER;var S=a.ONEMINQUARTER;var L=a.ONEMAXMONTH;var C=a.ONEAVGMONTH;var D=a.ONEMINMONTH;var O=a.ONEWEEK;var I=a.ONEDAY;var P=I/2;var R=a.ONEHOUR;var f=a.ONEMIN;var d=a.ONESEC;var h=a.MINUS_SIGN;var N=a.BADNUM;var u={K:"zeroline"};var z={K:"gridline",L:"path"};var F={K:"tick",L:"path"};var j={K:"tick",L:"text"};var n=e("../../constants/alignment");var H=n.MID_SHIFT;var B=n.CAP_SHIFT;var W=n.LINE_SPACING;var $=n.OPPOSITE_SIDE;var q=3;var Z=t.exports={};Z.setConvert=e("./set_convert");var s=e("./axis_autotype");var i=e("./axis_ids");var o=i.idSort;var U=i.isLinked;Z.id2name=i.id2name;Z.name2id=i.name2id;Z.cleanId=i.cleanId;Z.list=i.list;Z.listIds=i.listIds;Z.getFromId=i.getFromId;Z.getFromTrace=i.getFromTrace;var l=e("./autorange");Z.getAutoRange=l.getAutoRange;Z.findExtremes=l.findExtremes;var p=1e-4;function X(e){var t=(e[1]-e[0])*p;return[e[0]-t,e[1]+t]}Z.coerceRef=function(e,t,r,a,n,i){var o=a.charAt(a.length-1);var s=r._fullLayout._subplots[o+"axis"];var l=a+"ref";var u={};if(!n)n=s[0]||(typeof i==="string"?i:i[0]);if(!i)i=n;s=s.concat(s.map(function(e){return e+" domain"}));u[l]={valType:"enumerated",values:s.concat(i?typeof i==="string"?[i]:i:[]),dflt:n};return G.coerce(e,t,u,l)};Z.getRefType=function(e){if(e===undefined){return e}if(e==="paper"){return"paper"}if(e==="pixel"){return"pixel"}if(/( domain)$/.test(e)){return"domain"}else{return"range"}};Z.coercePosition=function(e,t,r,a,n,i){var o,s;var l=Z.getRefType(a);if(l!=="range"){o=G.ensureNumber;s=r(n,i)}else{var u=Z.getFromId(t,a);i=u.fraction2r(i);s=r(n,i);o=u.cleanPos}e[n]=o(s)};Z.cleanPosition=function(e,t,r){var a=r==="paper"||r==="pixel"?G.ensureNumber:Z.getFromId(t,r).cleanPos;return a(e)};Z.redrawComponents=function(f,d){d=d?d:Z.listIds(f);var v=f._fullLayout;function e(e,t,r,a){var n=V.getComponentMethod(e,t);var i={};for(var o=0;o<d.length;o++){var s=v[Z.id2name(d[o])];var l=s[r];for(var u=0;u<l.length;u++){var c=l[u];if(!i[c]){n(f,c);i[c]=1;if(a)return}}}}e("annotations","drawOne","_annIndices");e("shapes","drawOne","_shapeIndices");e("images","draw","_imgIndices",true)};var J=Z.getDataConversions=function(e,t,r,a){var n;var i=r==="x"||r==="y"||r==="z"?r:a;if(Array.isArray(i)){n={type:s(a,undefined,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]};Z.setConvert(n);if(n.type==="category"){for(var o=0;o<a.length;o++){n.d2c(a[o])}}}else{n=Z.getFromTrace(e,t,i)}if(n)return{d2c:n.d2c,c2d:n.c2d};if(i==="ids")return{d2c:Q,c2d:Q};return{d2c:K,c2d:K}};function K(e){return+e}function Q(e){return String(e)}Z.getDataToCoordFunc=function(e,t,r,a){return J(e,t,r,a).d2c};Z.counterLetter=function(e){var t=e.charAt(0);if(t==="x")return"y";if(t==="y")return"x"};Z.minDtick=function(e,t,r,a){if(["log","category","multicategory"].indexOf(e.type)!==-1||!a){e._minDtick=0}else if(e._minDtick===undefined){e._minDtick=t;e._forceTick0=r}else if(e._minDtick){if((e._minDtick/t+1e-6)%1<2e-6&&((r-e._forceTick0)/t%1+1.000001)%1<2e-6){e._minDtick=t;e._forceTick0=r}else if((t/e._minDtick+1e-6)%1>2e-6||((r-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6){e._minDtick=0}}};Z.saveRangeInitial=function(e,t){var r=Z.list(e,"",true);var a=false;for(var n=0;n<r.length;n++){var i=r[n];var o=i._rangeInitial===undefined;var s=o||!(i.range[0]===i._rangeInitial[0]&&i.range[1]===i._rangeInitial[1]);if(o&&i.autorange===false||t&&s){i._rangeInitial=i.range.slice();a=true}}return a};Z.saveShowSpikeInitial=function(e,t){var r=Z.list(e,"",true);var a=false;var n="on";for(var i=0;i<r.length;i++){var o=r[i];var s=o._showSpikeInitial===undefined;var l=s||!(o.showspikes===o._showspikes);if(s||t&&l){o._showSpikeInitial=o.showspikes;a=true}if(n==="on"&&!o.showspikes){n="off"}}e._fullLayout._cartesianSpikesEnabled=n;return a};Z.autoBin=function(e,t,r,a,n,i){var o=G.aggNums(Math.min,null,e);var s=G.aggNums(Math.max,null,e);if(t.type==="category"||t.type==="multicategory"){return{start:o-.5,end:s+.5,size:Math.max(1,Math.round(i)||1),_dataSpan:s-o}}if(!n)n=t.calendar;var l;if(t.type==="log"){l={type:"linear",range:[o,s]}}else{l={type:t.type,range:G.simpleMap([o,s],t.c2r,0,n),calendar:n}}Z.setConvert(l);i=i&&y.dtick(i,l.type);if(i){l.dtick=i;l.tick0=y.tick0(undefined,l.type,n)}else{var u;if(r)u=(s-o)/r;else{var c=G.distinctVals(e);var f=Math.pow(10,Math.floor(Math.log(c.minDiff)/Math.LN10));var d=f*G.roundUp(c.minDiff/f,[.9,1.9,4.9,9.9],true);u=Math.max(d,2*G.stdev(e)/Math.pow(e.length,a?.25:.4));if(!E(u))u=1}Z.autoTicks(l,u)}var v=l.dtick;var p=Z.tickIncrement(Z.tickFirst(l),v,"reverse",n);var h,m;if(typeof v==="number"){p=ee(p,e,l,o,s);m=1+Math.floor((s-p)/v);h=p+m*v}else{if(l.dtick.charAt(0)==="M"){p=te(p,e,v,o,n)}h=p;m=0;while(h<=s){h=Z.tickIncrement(h,v,false,n);m++}}return{start:t.c2r(p,0,n),end:t.c2r(h,0,n),size:v,_dataSpan:s-o}};function ee(t,e,r,a,n){var i=0;var o=0;var s=0;var l=0;function u(e){return(1+(e-t)*100/r.dtick)%100<2}for(var c=0;c<e.length;c++){if(e[c]%1===0)s++;else if(!E(e[c]))l++;if(u(e[c]))i++;if(u(e[c]+r.dtick/2))o++}var f=e.length-l;if(s===f&&r.type!=="date"){if(r.dtick<1){t=a-.5*r.dtick}else{t-=.5;if(t+r.dtick<a)t+=r.dtick}}else if(o<f*.1){if(i>f*.3||u(a)||u(n)){var d=r.dtick/2;t+=t+d<a?d:-d}}return t}function te(e,t,r,a,n){var i=G.findExactDates(t,n);var o=.8;if(i.exactDays>o){var s=Number(r.substr(1));if(i.exactYears>o&&s%12===0){e=Z.tickIncrement(e,"M6","reverse")+I*1.5}else if(i.exactMonths>o){e=Z.tickIncrement(e,"M1","reverse")+I*15.5}else{e-=P}var l=Z.tickIncrement(e,r);if(l<=a)return l}return e}Z.prepTicks=function(e,t){var r=G.simpleMap(e.range,e.r2l,undefined,undefined,t);e._dtickInit=e.dtick;e._tick0Init=e.tick0;if(e.tickmode==="auto"||!e.dtick){var a=e.nticks;var n;if(!a){if(e.type==="category"||e.type==="multicategory"){n=e.tickfont?G.bigFont(e.tickfont.size||12):15;a=e._length/n}else{n=e._id.charAt(0)==="y"?40:80;a=G.constrain(e._length/n,4,9)+1}if(e._name==="radialaxis")a*=2}if(e.tickmode==="array")a*=100;e._roughDTick=Math.abs(r[1]-r[0])/a;Z.autoTicks(e,e._roughDTick);if(e._minDtick>0&&e.dtick<e._minDtick*2){e.dtick=e._minDtick;e.tick0=e.l2r(e._forceTick0)}}if(e.ticklabelmode==="period"){ae(e)}if(!e.tick0){e.tick0=e.type==="date"?"2000-01-01":0}if(e.type==="date"&&e.dtick<.1)e.dtick=.1;pe(e)};function re(e){return+e.substring(1)}function ae(e){var t;function r(){return!(E(e.dtick)||e.dtick.charAt(0)!=="M")}var a=r();var n=Z.getTickFormat(e);if(n){var i=e._dtickInit!==e.dtick;if(!/%[fLQsSMX]/.test(n)){if(/%[HI]/.test(n)){t=R;if(i&&!a&&e.dtick<R)e.dtick=R}else if(/%p/.test(n)){t=P;if(i&&!a&&e.dtick<P)e.dtick=P}else if(/%[Aadejuwx]/.test(n)){t=I;if(i&&!a&&e.dtick<I)e.dtick=I}else if(/%[UVW]/.test(n)){t=O;if(i&&!a&&e.dtick<O)e.dtick=O}else if(/%[Bbm]/.test(n)){t=C;if(i&&(a?re(e.dtick)<1:e.dtick<D))e.dtick="M1"}else if(/%[q]/.test(n)){t=k;if(i&&(a?re(e.dtick)<3:e.dtick<S))e.dtick="M3"}else if(/%[Yy]/.test(n)){t=_;if(i&&(a?re(e.dtick)<12:e.dtick<w))e.dtick="M12"}}}a=r();if(a&&e.tick0===e._dowTick0){e.tick0=e._rawTick0}e._definedDelta=t}function ne(e,t,r){for(var a=0;a<e.length;a++){var n=e[a].value;var i=a;var o=a+1;if(a<e.length-1){i=a;o=a+1}else if(a>0){i=a-1;o=a}else{i=a;o=a}var s=e[i].value;var l=e[o].value;var u=Math.abs(l-s);var c=r||u;var f=0;if(c>=w){if(u>=w&&u<=x){f=u}else{f=_}}else if(r===k&&c>=S){if(u>=S&&u<=T){f=u}else{f=k}}else if(c>=D){if(u>=D&&u<=L){f=u}else{f=C}}else if(r===O&&c>=O){f=O}else if(c>=I){f=I}else if(r===P&&c>=P){f=P}else if(r===R&&c>=R){f=R}var d;if(f>=u){f=u;d=true}var v=n+f;if(t.rangebreaks&&f>0){var p=84;var h=0;for(var m=0;m<p;m++){var g=(m+.5)/p;if(t.maskBreaks(n*(1-g)+g*v)!==N)h++}f*=h/p;if(!f){e[a].drop=true}if(d&&u>O)f=u}if(f>0||a===0){e[a].periodX=n+f/2}}}Z.calcTicks=function e(t,r){Z.prepTicks(t,r);var a=G.simpleMap(t.range,t.r2l,undefined,undefined,r);if(t.tickmode==="array")return ie(t);var n=X(a);var i=n[0];var o=n[1];var s=a[1]<a[0];var l=Math.min(a[0],a[1]);var u=Math.max(a[0],a[1]);var c=t.type==="log"&&!(E(t.dtick)||t.dtick.charAt(0)==="L");var f=t.ticklabelmode==="period";t._tmin=Z.tickFirst(t,r);if(t._tmin<i!==s)return[];if(t.type==="category"||t.type==="multicategory"){o=s?Math.max(-.5,o):Math.min(t._categories.length-.5,o)}var d=t._tmin;if(t.rangebreaks&&t._tick0Init!==t.tick0){d=Ze(d,t);if(!s){d=Z.tickIncrement(d,t.dtick,!s,t.calendar)}}if(f){d=Z.tickIncrement(d,t.dtick,!s,t.calendar)}var v=Math.max(1e3,t._length||0);var p=[];var h=null;for(;s?d>=o:d<=o;d=Z.tickIncrement(d,t.dtick,s,t.calendar)){if(t.rangebreaks){if(!s){if(d<i)continue;if(t.maskBreaks(d)===N&&Ze(d,t)>=u)break}}if(p.length>v||d===h)break;h=d;var m=false;if(c&&d!==(d|0)){m=true}p.push({minor:m,value:d})}if(f)ne(p,t,t._definedDelta);var g;if(t.rangebreaks){var y=t._id.charAt(0)==="y";var x=1;if(t.tickmode==="auto"){x=t.tickfont?t.tickfont.size:12}var b=NaN;for(g=p.length-1;g>-1;g--){if(p[g].drop){p.splice(g,1);continue}p[g].value=Ze(p[g].value,t);var _=t.c2p(p[g].value);if(y?b>_-x:b<_+x){p.splice(s?g+1:g,1)}else{b=_}}}if($e(t)&&Math.abs(a[1]-a[0])===360){p.pop()}t._tmax=(p[p.length-1]||{}).value;t._prevDateHead="";t._inCalcTicks=true;var w=[];var T,k;for(g=0;g<p.length;g++){var M=p[g].minor;var A=p[g].value;T=Z.tickText(t,A,false,M);k=p[g].periodX;if(k!==undefined){T.periodX=k;if(k>u||k<l){if(k>u)T.periodX=u;if(k<l)T.periodX=l;T.text=" ";t._prevDateHead=""}}w.push(T)}t._inCalcTicks=false;return w};function ie(t){var e=t.tickvals;var r=t.ticktext;var a=new Array(e.length);var n=G.simpleMap(t.range,t.r2l);var i=X(n);var o=Math.min(i[0],i[1]);var s=Math.max(i[0],i[1]);var l=0;if(!Array.isArray(r))r=[];var u=t.type==="category"?t.d2l_noadd:t.d2l;if(t.type==="log"&&String(t.dtick).charAt(0)!=="L"){t.dtick="L"+Math.pow(10,Math.floor(Math.min(t.range[0],t.range[1]))-1)}for(var c=0;c<e.length;c++){var f=u(e[c]);if(f>o&&f<s){if(r[c]===undefined)a[l]=Z.tickText(t,f);else a[l]=he(t,f,String(r[c]));l++}}if(l<e.length)a.splice(l,e.length-l);if(t.rangebreaks){a=a.filter(function(e){return t.maskBreaks(e.x)!==N})}return a}var oe=[2,5,10];var se=[1,2,3,6,12];var le=[1,2,5,10,15,30];var ue=[1,2,3,7,14];var ce=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1];var fe=[-.301,0,.301,.699,1];var de=[15,30,45,90,180];function ve(e,t,r){return t*G.roundUp(e/t,r)}Z.autoTicks=function(e,t){var r;function a(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if(e.type==="date"){e.tick0=G.dateTick0(e.calendar,0);var n=2*t;if(n>_){t/=_;r=a(10);e.dtick="M"+12*ve(t,r,oe)}else if(n>C){t/=C;e.dtick="M"+ve(t,1,se)}else if(n>I){e.dtick=ve(t,I,e._hasDayOfWeekBreaks?[1,2,7,14]:ue);var i=Z.getTickFormat(e);var o=e.ticklabelmode==="period";if(o)e._rawTick0=e.tick0;if(/%[uVW]/.test(i)){e.tick0=G.dateTick0(e.calendar,2)}else{e.tick0=G.dateTick0(e.calendar,1)}if(o)e._dowTick0=e.tick0}else if(n>R){e.dtick=ve(t,R,se)}else if(n>f){e.dtick=ve(t,f,le)}else if(n>d){e.dtick=ve(t,d,le)}else{r=a(10);e.dtick=ve(t,r,oe)}}else if(e.type==="log"){e.tick0=0;var s=G.simpleMap(e.range,e.r2l);if(t>.7){e.dtick=Math.ceil(t)}else if(Math.abs(s[1]-s[0])<1){var l=1.5*Math.abs((s[1]-s[0])/t);t=Math.abs(Math.pow(10,s[1])-Math.pow(10,s[0]))/l;r=a(10);e.dtick="L"+ve(t,r,oe)}else{e.dtick=t>.3?"D2":"D1"}}else if(e.type==="category"||e.type==="multicategory"){e.tick0=0;e.dtick=Math.ceil(Math.max(t,1))}else if($e(e)){e.tick0=0;r=1;e.dtick=ve(t,r,de)}else{e.tick0=0;r=a(10);e.dtick=ve(t,r,oe)}if(e.dtick===0)e.dtick=1;if(!E(e.dtick)&&typeof e.dtick!=="string"){var u=e.dtick;e.dtick=1;throw"ax.dtick error: "+String(u)}};function pe(e){var t=e.dtick;e._tickexponent=0;if(!E(t)&&typeof t!=="string"){t=1}if(e.type==="category"||e.type==="multicategory"){e._tickround=null}if(e.type==="date"){var r=e.r2l(e.tick0);var a=e.l2r(r).replace(/(^-|i)/g,"");var n=a.length;if(String(t).charAt(0)==="M"){if(n>10||a.substr(5)!=="01-01")e._tickround="d";else e._tickround=+t.substr(1)%12===0?"y":"m"}else if(t>=I&&n<=10||t>=I*15)e._tickround="d";else if(t>=f&&n<=16||t>=R)e._tickround="M";else if(t>=d&&n<=19||t>=f)e._tickround="S";else{var i=e.l2r(r+t).replace(/^-/,"").length;e._tickround=Math.max(n,i)-20;if(e._tickround<0)e._tickround=4}}else if(E(t)||t.charAt(0)==="L"){var o=e.range.map(e.r2d||Number);if(!E(t))t=Number(t.substr(1));e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var s=Math.max(Math.abs(o[0]),Math.abs(o[1]));var l=Math.floor(Math.log(s)/Math.LN10+.01);var u=e.minexponent===undefined?3:e.minexponent;if(Math.abs(l)>u){if(ke(e.exponentformat)&&!Me(l)){e._tickexponent=3*Math.round((l-1)/3)}else e._tickexponent=l}}else{e._tickround=null}}Z.tickIncrement=function(e,t,r,a){var n=r?-1:1;if(E(t))return G.increment(e,n*t);var i=t.charAt(0);var o=n*Number(t.substr(1));if(i==="M")return G.incrementMonth(e,o,a);if(i==="L")return Math.log(Math.pow(10,e)+o)/Math.LN10;if(i==="D"){var s=t==="D2"?fe:ce;var l=e+n*.01;var u=G.roundUp(G.mod(l,1),s,r);return Math.floor(l)+Math.log(M.round(Math.pow(10,u),1))/Math.LN10}throw"unrecognized dtick "+String(t)};Z.tickFirst=function(e,t){var r=e.r2l||Number;var a=G.simpleMap(e.range,r,undefined,undefined,t);var n=a[1]<a[0];var i=n?Math.floor:Math.ceil;var o=X(a)[0];var s=e.dtick;var l=r(e.tick0);if(E(s)){var u=i((o-l)/s)*s+l;if(e.type==="category"||e.type==="multicategory"){u=G.constrain(u,0,e._categories.length-1)}return u}var c=s.charAt(0);var f=Number(s.substr(1));if(c==="M"){var d=0;var v=l;var p,h,m;while(d<10){p=Z.tickIncrement(v,s,n,e.calendar);if((p-o)*(v-o)<=0){if(n)return Math.min(v,p);return Math.max(v,p)}h=(o-(v+p)/2)/(p-v);m=c+(Math.abs(Math.round(h))||1)*f;v=Z.tickIncrement(v,m,h<0?!n:n,e.calendar);d++}G.error("tickFirst did not converge",e);return v}else if(c==="L"){return Math.log(i((Math.pow(10,o)-l)/f)*f+l)/Math.LN10}else if(c==="D"){var g=s==="D2"?fe:ce;var y=G.roundUp(G.mod(o,1),g,n);return Math.floor(o)+Math.log(M.round(Math.pow(10,y),1))/Math.LN10}else throw"unrecognized dtick "+String(s)};Z.tickText=function(r,a,n,e){var t=he(r,a);var i=r.tickmode==="array";var o=n||i;var s=r.type;var l=s==="category"?r.d2l_noadd:r.d2l;var u;if(i&&Array.isArray(r.ticktext)){var c=G.simpleMap(r.range,r.r2l);var f=(Math.abs(c[1]-c[0])-(r._lBreaks||0))/1e4;for(u=0;u<r.ticktext.length;u++){if(Math.abs(a-l(r.tickvals[u]))<f)break}if(u<r.ticktext.length){t.text=String(r.ticktext[u]);return t}}function d(e){if(e===undefined)return true;if(n)return e==="none";var t={first:r._tmin,last:r._tmax}[e];return e!=="all"&&a!==t}var v=n?"never":r.exponentformat!=="none"&&d(r.showexponent)?"hide":"";if(s==="date")me(r,t,n,o);else if(s==="log")ge(r,t,n,o,v);else if(s==="category")ye(r,t);else if(s==="multicategory")xe(r,t,n);else if($e(r))_e(r,t,n,o,v);else be(r,t,n,o,v);if(!e){if(r.tickprefix&&!d(r.showtickprefix))t.text=r.tickprefix+t.text;if(r.ticksuffix&&!d(r.showticksuffix))t.text+=r.ticksuffix}if(r.tickson==="boundaries"||r.showdividers){var p=function(e){var t=r.l2p(e);return t>=0&&t<=r._length?e:null};t.xbnd=[p(t.x-.5),p(t.x+r.dtick-.5)]}return t};Z.hoverLabelText=function(e,t,r){if(r)e=G.extendFlat({},e,{hoverformat:r});var a=Array.isArray(t)?t[0]:t;var n=Array.isArray(t)?t[1]:undefined;if(n!==undefined&&n!==a){return Z.hoverLabelText(e,a,r)+" - "+Z.hoverLabelText(e,n,r)}var i=e.type==="log"&&a<=0;var o=Z.tickText(e,e.c2l(i?-a:a),"hover").text;if(i){return a===0?"0":h+o}return o};function he(e,t,r){var a=e.tickfont||{};return{x:t,dx:0,dy:0,text:r||"",fontSize:a.size,font:a.family,fontColor:a.color}}function me(e,t,r,a){var n=e._tickround;var i=r&&e.hoverformat||Z.getTickFormat(e);if(a){if(E(n))n=4;else n={y:"m",m:"d",d:"M",M:"S",S:4}[n]}var o=G.formatDate(t.x,i,n,e._dateFormat,e.calendar,e._extraFormat);var s;var l=o.indexOf("\n");if(l!==-1){s=o.substr(l+1);o=o.substr(0,l)}if(a){if(o==="00:00:00"||o==="00:00"){o=s;s=""}else if(o.length===8){o=o.replace(/:00$/,"")}}if(s){if(r){if(n==="d")o+=", "+s;else o=s+(o?", "+o:"")}else{if(!e._inCalcTicks||e._prevDateHead!==s){e._prevDateHead=s;o+="<br>"+s}else{var u=Xe(e);var c=e._realSide||e.side;if(!u&&c==="top"||u&&c==="bottom"){o+="<br> "}}}}t.text=o}function ge(e,t,r,a,n){var i=e.dtick;var o=t.x;var s=e.tickformat;var l=typeof i==="string"&&i.charAt(0);if(n==="never"){n=""}if(a&&l!=="L"){i="L3";l="L"}if(s||l==="L"){t.text=Ae(Math.pow(10,o),e,n,a)}else if(E(i)||l==="D"&&G.mod(o+.01,1)<.1){var u=Math.round(o);var c=Math.abs(u);var f=e.exponentformat;if(f==="power"||ke(f)&&Me(u)){if(u===0)t.text=1;else if(u===1)t.text="10";else t.text="10<sup>"+(u>1?"":h)+c+"</sup>";t.fontSize*=1.25}else if((f==="e"||f==="E")&&c>2){t.text="1"+f+(u>0?"+":h)+c}else{t.text=Ae(Math.pow(10,o),e,"","fakehover");if(i==="D1"&&e._id.charAt(0)==="y"){t.dy-=t.fontSize/6}}}else if(l==="D"){t.text=String(Math.round(Math.pow(10,G.mod(o,1))));t.fontSize*=.75}else throw"unrecognized dtick "+String(i);if(e.dtick==="D1"){var d=String(t.text).charAt(0);if(d==="0"||d==="1"){if(e._id.charAt(0)==="y"){t.dx-=t.fontSize/4}else{t.dy+=t.fontSize/2;t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(o<0?.5:.25)}}}}function ye(e,t){var r=e._categories[Math.round(t.x)];if(r===undefined)r="";t.text=String(r)}function xe(e,t,r){var a=Math.round(t.x);var n=e._categories[a]||[];var i=n[1]===undefined?"":String(n[1]);var o=n[0]===undefined?"":String(n[0]);if(r){t.text=o+" - "+i}else{t.text=i;t.text2=o}}function be(e,t,r,a,n){if(n==="never"){n=""}else if(e.showexponent==="all"&&Math.abs(t.x/e.dtick)<1e-6){n="hide"}t.text=Ae(t.x,e,n,a)}function _e(e,t,r,a,n){if(e.thetaunit==="radians"&&!r){var i=t.x/180;if(i===0){t.text="0"}else{var o=we(i);if(o[1]>=100){t.text=Ae(G.deg2rad(t.x),e,n,a)}else{var s=t.x<0;if(o[1]===1){if(o[0]===1)t.text="π";else t.text=o[0]+"π"}else{t.text=["<sup>",o[0],"</sup>","⁄","<sub>",o[1],"</sub>","π"].join("")}if(s)t.text=h+t.text}}}else{t.text=Ae(t.x,e,n,a)}}function we(e){function r(e,t){return Math.abs(e-t)<=1e-6}function a(e,t){return r(t,0)?e:a(t,e%t)}function t(e){var t=1;while(!r(Math.round(e*t)/t,e)){t*=10}return t}var n=t(e);var i=e*n;var o=Math.abs(a(i,n));return[Math.round(i/o),Math.round(n/o)]}var Te=["f","p","n","μ","m","","k","M","G","T"];function ke(e){return e==="SI"||e==="B"}function Me(e){return e>14||e<-15}function Ae(e,t,r,a){var n=e<0;var i=t._tickround;var o=r||t.exponentformat||"B";var s=t._tickexponent;var l=Z.getTickFormat(t);var u=t.separatethousands;if(a){var c={exponentformat:o,minexponent:t.minexponent,dtick:t.showexponent==="none"?t.dtick:E(e)?Math.abs(e)||1:1,range:t.showexponent==="none"?t.range.map(t.r2d):[0,e||1]};pe(c);i=(Number(c._tickround)||0)+4;s=c._tickexponent;if(t.hoverformat)l=t.hoverformat}if(l)return t._numFormat(l)(e).replace(/-/g,h);var f=Math.pow(10,-i)/2;if(o==="none")s=0;e=Math.abs(e);if(e<f){e="0";n=false}else{e+=f;if(s){e*=Math.pow(10,-s);i+=s}if(i===0)e=String(Math.floor(e));else if(i<0){e=String(Math.round(e));e=e.substr(0,e.length+i);for(var d=i;d<0;d++)e+="0"}else{e=String(e);var v=e.indexOf(".")+1;if(v)e=e.substr(0,v+i).replace(/\.?0+$/,"")}e=G.numSeparate(e,t._separators,u)}if(s&&o!=="hide"){if(ke(o)&&Me(s))o="power";var p;if(s<0)p=h+-s;else if(o!=="power")p="+"+s;else p=String(s);if(o==="e"||o==="E"){e+=o+p}else if(o==="power"){e+="×10<sup>"+p+"</sup>"}else if(o==="B"&&s===9){e+="B"}else if(ke(o)){e+=Te[s/3+5]}}if(n)return h+e;return e}Z.getTickFormat=function(e){var t;function r(e){return typeof e!=="string"?e:Number(e.replace("M",""))*C}function o(e,t){var r=["L","D"];if(typeof e===typeof t){if(typeof e==="number"){return e-t}else{var a=r.indexOf(e.charAt(0));var n=r.indexOf(t.charAt(0));if(a===n){return Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,""))}else{return a-n}}}else{return typeof e==="number"?1:-1}}function a(e,t,r){var a=r||function(e){return e};var n=t[0];var i=t[1];return(!n&&typeof n!=="number"||a(n)<=a(e))&&(!i&&typeof i!=="number"||a(i)>=a(e))}function n(e,t){var r=t[0]===null;var a=t[1]===null;var n=o(e,t[0])>=0;var i=o(e,t[1])<=0;return(r||n)&&(a||i)}var i,s;if(e.tickformatstops&&e.tickformatstops.length>0){switch(e.type){case"date":case"linear":{for(t=0;t<e.tickformatstops.length;t++){s=e.tickformatstops[t];if(s.enabled&&a(e.dtick,s.dtickrange,r)){i=s;break}}break}case"log":{for(t=0;t<e.tickformatstops.length;t++){s=e.tickformatstops[t];if(s.enabled&&n(e.dtick,s.dtickrange)){i=s;break}}break}default:}}return i?i.value:e.tickformat};Z.getSubplots=function(e,t){var r=e._fullLayout._subplots;var a=r.cartesian.concat(r.gl2d||[]);var n=t?Z.findSubplotsWithAxis(a,t):a;n.sort(function(e,t){var r=e.substr(1).split("y");var a=t.substr(1).split("y");if(r[0]===a[0])return+r[1]-+a[1];return+r[0]-+a[0]});return n};Z.findSubplotsWithAxis=function(e,t){var r=new RegExp(t._id.charAt(0)==="x"?"^"+t._id+"y":t._id+"$");var a=[];for(var n=0;n<e.length;n++){var i=e[n];if(r.test(i))a.push(i)}return a};Z.makeClipPaths=function(e){var t=e._fullLayout;if(t._hasOnlyLargeSploms)return;var r={_offset:0,_length:t.width,_id:""};var a={_offset:0,_length:t.height,_id:""};var n=Z.list(e,"x",true);var i=Z.list(e,"y",true);var o=[];var s,l;for(s=0;s<n.length;s++){o.push({x:n[s],y:a});for(l=0;l<i.length;l++){if(s===0)o.push({x:r,y:i[l]});o.push({x:n[s],y:i[l]})}}var u=t._clips.selectAll(".axesclip").data(o,function(e){return e.x._id+e.y._id});u.enter().append("clipPath").classed("axesclip",true).attr("id",function(e){return"clip"+t._uid+e.x._id+e.y._id}).append("rect");u.exit().remove();u.each(function(e){M.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})};Z.draw=function(a,e,n){var i=a._fullLayout;if(e==="redraw"){i._paper.selectAll("g.subplot").each(function(e){var t=e[0];var r=i._plots[t];if(r){var a=r.xaxis;var n=r.yaxis;r.xaxislayer.selectAll("."+a._id+"tick").remove();r.yaxislayer.selectAll("."+n._id+"tick").remove();r.xaxislayer.selectAll("."+a._id+"tick2").remove();r.yaxislayer.selectAll("."+n._id+"tick2").remove();r.xaxislayer.selectAll("."+a._id+"divider").remove();r.yaxislayer.selectAll("."+n._id+"divider").remove();if(r.gridlayer)r.gridlayer.selectAll("path").remove();if(r.zerolinelayer)r.zerolinelayer.selectAll("path").remove();i._infolayer.select(".g-"+a._id+"title").remove();i._infolayer.select(".g-"+n._id+"title").remove()}})}var t=!e||e==="redraw"?Z.listIds(a):e;return G.syncOrAsync(t.map(function(r){return function(){if(!r)return;var e=Z.getFromId(a,r);var t=Z.drawOne(a,e,n);e._r=e.range.slice();e._rl=G.simpleMap(e._r,e.r2l);return t}}))};Z.drawOne=function(v,p,e){e=e||{};var t,r,a;p.setScale();var h=v._fullLayout;var n=p._id;var m=n.charAt(0);var g=Z.counterLetter(n);var i=h._plots[p._mainSubplot];if(!i)return;var o=i[m+"axislayer"];var s=p._mainLinePosition;var l=p._mainMirrorPosition;var u=p._vals=Z.calcTicks(p);var c=[p.mirror,s,l].join("_");for(t=0;t<u.length;t++){u[t].axInfo=c}p._selections={};if(p._tickAngles)p._prevTickAngles=p._tickAngles;p._tickAngles={};p._depth=null;var f={};function y(e){var t=n+(e||"tick");if(!f[t])f[t]=Ce(p,t);return f[t]}if(!p.visible)return;var d=Z.makeTransTickFn(p);var x=Z.makeTransTickLabelFn(p);var b;var _;var w=p.ticks==="inside";var T=p.ticks==="outside";if(p.tickson==="boundaries"){var k=Se(p,u);_=Z.clipEnds(p,k);b=w?_:k}else{_=Z.clipEnds(p,u);b=w&&p.ticklabelmode!=="period"?_:u}var M=p._gridVals=_;var A=Le(p,u);if(!h._hasOnlyLargeSploms){var S=p._subplotsWith;var E={};for(t=0;t<S.length;t++){r=S[t];a=h._plots[r];var L=a[g+"axis"];var C=L._mainAxis._id;if(E[C])continue;E[C]=1;var D=m==="x"?"M0,"+L._offset+"v"+L._length:"M"+L._offset+",0h"+L._length;Z.drawGrid(v,p,{vals:M,counterAxis:L,layer:a.gridlayer.select("."+n),path:D,transFn:d});Z.drawZeroLine(v,p,{counterAxis:L,layer:a.zerolinelayer,path:D,transFn:d})}}var O=Z.getTickSigns(p);var I=[];if(p.ticks){var P=Z.makeTickPath(p,s,O[2]);var R;var N;if(p._anchorAxis&&p.mirror&&p.mirror!==true){R=Z.makeTickPath(p,l,O[3]);N=P+R}else{R="";N=P}var z;if(p.showdividers&&T&&p.tickson==="boundaries"){var F={};for(t=0;t<A.length;t++){F[A[t].x]=1}z=function(e){return F[e.x]?R:N}}else{z=N}Z.drawTicks(v,p,{vals:b,layer:o,path:z,transFn:d});if(p.mirror==="allticks"){I=Object.keys(p._linepositions||{})}}for(t=0;t<I.length;t++){r=I[t];a=h._plots[r];var j=p._linepositions[r]||[];var H=Z.makeTickPath(p,j[0],O[0])+Z.makeTickPath(p,j[1],O[1]);Z.drawTicks(v,p,{vals:b,layer:a[m+"axislayer"],path:H,transFn:d})}var B=[];B.push(function(){return Z.drawLabels(v,p,{vals:u,layer:o,plotinfo:a,transFn:x,labelFns:Z.makeLabelFns(p,s)})});if(p.type==="multicategory"){var q={x:2,y:10}[m];B.push(function(){var e={x:"height",y:"width"}[m];var t=y()[e]+q+(p._tickAngles[n+"tick"]?p.tickfont.size*W:0);return Z.drawLabels(v,p,{vals:Ee(p,u),layer:o,cls:n+"tick2",repositionOnUpdate:true,secondary:true,transFn:d,labelFns:Z.makeLabelFns(p,s+t*O[4])})});B.push(function(){p._depth=O[4]*(y("tick2")[p.side]-s);return Pe(v,p,{vals:A,layer:o,path:Z.makeTickPath(p,s,O[4],p._depth),transFn:d})})}else if(p.title.hasOwnProperty("standoff")){B.push(function(){p._depth=O[4]*(y()[p.side]-s)})}var U=V.getComponentMethod("rangeslider","isVisible")(p);B.push(function(){var e=p.side.charAt(0);var t=$[p.side].charAt(0);var r=Z.getPxPosition(v,p);var a=T?p.ticklen:0;var n;var i;var o;var s;if(p.automargin||U){if(p.type==="multicategory"){n=y("tick2")}else{n=y();if(m==="x"&&e==="b"){p._depth=Math.max(n.width>0?n.bottom-r:0,a)}}}if(p.automargin){i={x:0,y:0,r:0,l:0,t:0,b:0};var l=[0,1];if(m==="x"){if(e==="b"){i[e]=p._depth}else{i[e]=p._depth=Math.max(n.width>0?r-n.top:0,a);l.reverse()}if(n.width>0){var u=n.right-(p._offset+p._length);if(u>0){i.xr=1;i.r=u}var c=p._offset-n.left;if(c>0){i.xl=0;i.l=c}}}else{if(e==="l"){i[e]=p._depth=Math.max(n.height>0?r-n.left:0,a)}else{i[e]=p._depth=Math.max(n.height>0?n.right-r:0,a);l.reverse()}if(n.height>0){var f=n.bottom-(p._offset+p._length);if(f>0){i.yb=0;i.b=f}var d=p._offset-n.top;if(d>0){i.yt=1;i.t=d}}}i[g]=p.anchor==="free"?p.position:p._anchorAxis.domain[l[0]];if(p.title.text!==h._dfltTitle[m]){i[e]+=Re(p)+(p.title.standoff||0)}if(p.mirror&&p.anchor!=="free"){o={x:0,y:0,r:0,l:0,t:0,b:0};o[t]=p.linewidth;if(p.mirror&&p.mirror!==true)o[t]+=a;if(p.mirror===true||p.mirror==="ticks"){o[g]=p._anchorAxis.domain[l[1]]}else if(p.mirror==="all"||p.mirror==="allticks"){o[g]=[p._counterDomainMin,p._counterDomainMax][l[1]]}}}if(U){s=V.getComponentMethod("rangeslider","autoMarginOpts")(v,p)}Y.autoMargin(v,Be(p),i);Y.autoMargin(v,qe(p),o);Y.autoMargin(v,Ue(p),s)});if(!e.skipTitle&&!(U&&p.side==="bottom")){B.push(function(){return Ne(v,p)})}return G.syncOrAsync(B)};function Se(e,t){var a=[];var r;var n=function(e,t){var r=e.xbnd[t];if(r!==null){a.push(G.extendFlat({},e,{x:r}))}};if(t.length){for(r=0;r<t.length;r++){n(t[r],0)}n(t[r-1],1)}return a}function Ee(e,t){var r=[];var a={};for(var n=0;n<t.length;n++){var i=t[n];if(a[i.text2]){a[i.text2].push(i.x)}else{a[i.text2]=[i.x]}}for(var o in a){r.push(he(e,G.interp(a[o],.5),o))}return r}function Le(e,t){var a=[];var r,n;var i=t.length&&t[t.length-1].x<t[0].x;var o=function(e,t){var r=e.xbnd[t];if(r!==null){a.push(G.extendFlat({},e,{x:r}))}};if(e.showdividers&&t.length){for(r=0;r<t.length;r++){var s=t[r];if(s.text2!==n){o(s,i?1:0)}n=s.text2}o(t[r-1],i?0:1)}return a}function Ce(e,t){var r,a;var n,i;if(e._selections[t].size()){r=Infinity;a=-Infinity;n=Infinity;i=-Infinity;e._selections[t].each(function(){var e=He(this);var t=A.bBox(e.node().parentNode);r=Math.min(r,t.top);a=Math.max(a,t.bottom);n=Math.min(n,t.left);i=Math.max(i,t.right)})}else{r=0;a=0;n=0;i=0}return{top:r,bottom:a,left:n,right:i,height:a-r,width:i-n}}Z.getTickSigns=function(e){var t=e._id.charAt(0);var r={x:"top",y:"right"}[t];var a=e.side===r?1:-1;var n=[-1,1,a,-a];if(e.ticks!=="inside"===(t==="x")){n=n.map(function(e){return-e})}if(e.side){n.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)])}return n};Z.makeTransTickFn=function(t){return t._id.charAt(0)==="x"?function(e){return v(t._offset+t.l2p(e.x),0)}:function(e){return v(0,t._offset+t.l2p(e.x))}};Z.makeTransTickLabelFn=function(t){var e=Oe(t);var r=e[0];var a=e[1];return t._id.charAt(0)==="x"?function(e){return v(r+t._offset+t.l2p(De(e)),a)}:function(e){return v(a,r+t._offset+t.l2p(De(e)))}};function De(e){return e.periodX!==undefined?e.periodX:e.x}function Oe(e){var t=e.ticklabelposition||"";var r=function(e){return t.indexOf(e)!==-1};var a=r("top");var n=r("left");var i=r("right");var o=r("bottom");var s=r("inside");var l=o||n||a||i;if(!l&&!s)return[0,0];var u=e.side;var c=l?(e.tickwidth||0)/2:0;var f=q;var d=e.tickfont?e.tickfont.size:12;if(o||a){c+=d*B;f+=(e.linewidth||0)/2}if(n||i){c+=(e.linewidth||0)/2;f+=q}if(s&&u==="top"){f-=d*(1-B)}if(n||a)c=-c;if(u==="bottom"||u==="right")f=-f;return[l?c:0,s?f:0]}Z.makeTickPath=function(e,t,r,a){a=a!==undefined?a:e.ticklen;var n=e._id.charAt(0);var i=(e.linewidth||1)/2;return n==="x"?"M0,"+(t+i*r)+"v"+a*r:"M"+(t+i*r)+",0h"+a*r};Z.makeLabelFns=function(a,t,e){var r=a.ticklabelposition||"";var n=function(e){return r.indexOf(e)!==-1};var i=n("top");var o=n("left");var s=n("right");var l=n("bottom");var u=l||o||i||s;var c=n("inside");var f=r==="inside"&&a.ticks==="inside"||!c&&a.ticks==="outside"&&a.tickson!=="boundaries";var d=0;var v=0;var p=f?a.ticklen:0;if(c){p*=-1}else if(u){p=0}if(f){d+=p;if(e){var h=G.deg2rad(e);d=p*Math.cos(h)+1;v=p*Math.sin(h)}}if(a.showticklabels&&(f||a.showline)){d+=.2*a.tickfont.size}d+=(a.linewidth||1)/2*(c?-1:1);var m={labelStandoff:d,labelShift:v};var g,y,x,b;var _=0;var w=a.side;var T=a._id.charAt(0);var k=a.tickangle;var M;if(T==="x"){M=!c&&w==="bottom"||c&&w==="top";b=M?1:-1;if(c)b*=-1;g=v*b;y=t+d*b;x=M?1:-.2;if(Math.abs(k)===90){if(c){x+=H}else{if(k===-90&&w==="bottom"){x=B}else if(k===90&&w==="top"){x=H}else{x=.5}}_=H/2*(k/90)}m.xFn=function(e){return e.dx+g+_*e.fontSize};m.yFn=function(e){return e.dy+y+e.fontSize*x};m.anchorFn=function(e,t){if(u){if(o)return"end";if(s)return"start"}if(!E(t)||t===0||t===180){return"middle"}return t*b<0!==c?"end":"start"};m.heightFn=function(e,t,r){return t<-60||t>60?-.5*r:a.side==="top"!==c?-r:0}}else if(T==="y"){M=!c&&w==="left"||c&&w==="right";b=M?1:-1;if(c)b*=-1;g=d;y=v*b;x=0;if(!c&&Math.abs(k)===90){if(k===-90&&w==="left"||k===90&&w==="right"){x=B}else{x=.5}}if(c){var A=E(k)?+k:0;if(A!==0){var S=G.deg2rad(A);_=Math.abs(Math.sin(S))*B*b;x=0}}m.xFn=function(e){return e.dx+t-(g+e.fontSize*x)*b+_*e.fontSize};m.yFn=function(e){return e.dy+y+e.fontSize*H};m.anchorFn=function(e,t){if(E(t)&&Math.abs(t)===90){return"middle"}return M?"end":"start"};m.heightFn=function(e,t,r){if(a.side==="right")t*=-1;return t<-30?-r:t<30?-.5*r:0}}return m};function Ie(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}Z.drawTicks=function(e,t,r){r=r||{};var a=t._id+"tick";var n=r.vals;if(t.ticklabelmode==="period"){n=n.slice();n.shift()}var i=r.layer.selectAll("path."+a).data(t.ticks?n:[],Ie);i.exit().remove();i.enter().append("path").classed(a,1).classed("ticks",1).classed("crisp",r.crisp!==false).call(c.stroke,t.tickcolor).style("stroke-width",A.crispRound(e,t.tickwidth,1)+"px").attr("d",r.path).style("display",null);Je(t,[F]);i.attr("transform",r.transFn)};Z.drawGrid=function(e,t,r){r=r||{};var a=t._id+"grid";var n=r.vals;var i=r.counterAxis;if(t.showgrid===false){n=[]}else if(i&&Z.shouldShowZeroLine(e,t,i)){var o=t.tickmode==="array";for(var s=0;s<n.length;s++){var l=n[s].x;if(o?!l:Math.abs(l)<t.dtick/100){n=n.slice(0,s).concat(n.slice(s+1));if(o)s--;else break}}}var u=r.layer.selectAll("path."+a).data(n,Ie);u.exit().remove();u.enter().append("path").classed(a,1).classed("crisp",r.crisp!==false);t._gw=A.crispRound(e,t.gridwidth,1);u.attr("transform",r.transFn).attr("d",r.path).call(c.stroke,t.gridcolor||"#ddd").style("stroke-width",t._gw+"px").style("display",null);Je(t,[z]);if(typeof r.path==="function")u.attr("d",r.path)};Z.drawZeroLine=function(e,t,r){r=r||r;var a=t._id+"zl";var n=Z.shouldShowZeroLine(e,t,r.counterAxis);var i=r.layer.selectAll("path."+a).data(n?[{x:0,id:t._id}]:[]);i.exit().remove();i.enter().append("path").classed(a,1).classed("zl",1).classed("crisp",r.crisp!==false).each(function(){r.layer.selectAll("path").sort(function(e,t){return o(e.id,t.id)})});i.attr("transform",r.transFn).attr("d",r.path).call(c.stroke,t.zerolinecolor||c.defaultLine).style("stroke-width",A.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null);Je(t,[u])};Z.drawLabels=function(p,g,y){y=y||{};var h=p._fullLayout;var e=g._id;var x=e.charAt(0);var t=y.cls||e+"tick";var b=y.vals;var d=y.labelFns;var _=y.secondary?0:g.tickangle;var r=(g._prevTickAngles||{})[t];var w=y.layer.selectAll("g."+t).data(g.showticklabels?b:[],Ie);var a=[];w.enter().append("g").classed(t,1).append("text").attr("text-anchor","middle").each(function(e){var t=M.select(this);var r=p._promises.length;t.call(m.positionText,d.xFn(e),d.yFn(e)).call(A.font,e.font,e.fontSize,e.fontColor).text(e.text).call(m.convertToTspans,p);if(p._promises[r]){a.push(p._promises.pop().then(function(){T(t,_)}))}else{T(t,_)}});Je(g,[j]);w.exit().remove();if(y.repositionOnUpdate){w.each(function(e){M.select(this).select("text").call(m.positionText,d.xFn(e),d.yFn(e))})}function T(e,f){e.each(function(e){var t=M.select(this);var r=t.select(".text-math-group");var a=d.anchorFn(e,f);var n=y.transFn.call(t.node(),e)+(E(f)&&+f!==0?" rotate("+f+","+d.xFn(e)+","+(d.yFn(e)-e.fontSize/2)+")":"");var i=m.lineCount(t);var o=W*e.fontSize;var s=d.heightFn(e,E(f)?+f:0,(i-1)*o);if(s){n+=v(0,s)}if(r.empty()){var l=t.select("text");l.attr({transform:n,"text-anchor":a});l.style("opacity",1);if(g._adjustTickLabelsOverflow){g._adjustTickLabelsOverflow()}}else{var u=A.bBox(r.node()).width;var c=u*{end:-.5,start:.5}[a];r.attr("transform",n+v(c,0))}})}g._adjustTickLabelsOverflow=function(){var e=g.ticklabeloverflow;if(!e||e==="allow")return;var o=e.indexOf("hide")!==-1;var s=g._id.charAt(0)==="x";var t=0;var r=s?p._fullLayout.width:p._fullLayout.height;if(e.indexOf("domain")!==-1){var a=G.simpleMap(g.range,g.r2l);t=g.l2p(a[0])+g._offset;r=g.l2p(a[1])+g._offset}var l=Math.min(t,r);var u=Math.max(t,r);var c=g.side;var f=Infinity;var d=-Infinity;w.each(function(e){var t=M.select(this);var r=t.select(".text-math-group");if(r.empty()){var a=A.bBox(t.node());var n=0;if(s){if(a.right>u)n=1;else if(a.left<l)n=1}else{if(a.bottom>u)n=1;else if(a.top+(g.tickangle?0:e.fontSize/4)<l)n=1}var i=t.select("text");if(n){if(o)i.style("opacity",0)}else{i.style("opacity",1);if(c==="bottom"||c==="right"){f=Math.min(f,s?a.top:a.left)}else{f=-Infinity}if(c==="top"||c==="left"){d=Math.max(d,s?a.bottom:a.right)}else{d=Infinity}}}});for(var n in h._plots){var i=h._plots[n];if(g._id!==i.xaxis._id&&g._id!==i.yaxis._id)continue;var v=s?i.yaxis:i.xaxis;if(v){v["_visibleLabelMin_"+g._id]=f;v["_visibleLabelMax_"+g._id]=d}}};g._hideCounterAxisInsideTickLabels=function(e){var t=g._id.charAt(0)==="x";var r=[];for(var a in h._plots){var n=h._plots[a];if(g._id!==n.xaxis._id&&g._id!==n.yaxis._id)continue;r.push(t?n.yaxis:n.xaxis)}r.forEach(function(i,o){if(i&&Xe(i)){(e||[u,z,F,j]).forEach(function(a){var n=a.K==="tick"&&a.L==="text"&&g.ticklabelmode==="period";var e=h._plots[g._mainSubplot];var t;if(a.K===u.K)t=e.zerolinelayer.selectAll("."+g._id+"zl");else if(a.K===z.K)t=e.gridlayer.selectAll("."+g._id);else t=e[g._id.charAt(0)+"axislayer"];t.each(function(){var e=M.select(this);if(a.L)e=e.selectAll(a.L);e.each(function(e){var t=g.l2p(n?De(e):e.x)+g._offset;var r=M.select(this);if(t<g["_visibleLabelMax_"+i._id]&&t>g["_visibleLabelMin_"+i._id]){r.style("display","none")}else if(a.K==="tick"&&!o){r.style("display",null)}})})})}})};T(w,r+1?r:_);function n(){return a.length&&Promise.all(a)}var k=null;function i(){T(w,_);if(b.length&&x==="x"&&!E(_)&&(g.type!=="log"||String(g.dtick).charAt(0)!=="D")){k=0;var n=0;var i=[];var e;w.each(function(e){n=Math.max(n,e.fontSize);var t=g.l2p(e.x);var r=He(this);var a=A.bBox(r.node());i.push({top:0,bottom:10,height:10,left:t-a.width/2,right:t+a.width/2+2,width:a.width+2})});if((g.tickson==="boundaries"||g.showdividers)&&!y.secondary){var t=2;if(g.ticks)t+=g.tickwidth/2;for(e=0;e<i.length;e++){var r=b[e].xbnd;var a=i[e];if(r[0]!==null&&a.left-g.l2p(r[0])<t||r[1]!==null&&g.l2p(r[1])-a.right<t){k=90;break}}}else{var o=b.length;var s=Math.abs((b[o-1].x-b[0].x)*g._m)/(o-1);var l=g.ticklabelposition||"";var u=function(e){return l.indexOf(e)!==-1};var c=u("top");var f=u("left");var d=u("right");var v=u("bottom");var p=v||f||c||d;var h=!p?0:(g.tickwidth||0)+2*q;var m=s<n*2.5||g.type==="multicategory";for(e=0;e<i.length-1;e++){if(G.bBoxIntersect(i[e],i[e+1],h)){k=m?90:30;break}}}if(k){T(w,k)}}}if(g._selections){g._selections[t]=w}var o=[n];if(g.automargin&&h._redrawFromAutoMarginCount&&r===90){k=90;o.push(function(){T(w,r)})}else{o.push(i)}if(g._tickAngles){o.push(function(){g._tickAngles[t]=k===null?E(_)?_:0:k})}var s=g._anchorAxis;if(s&&s.autorange&&Xe(g)&&!U(h,g._id)){if(!h._insideTickLabelsAutorange){h._insideTickLabelsAutorange={}}h._insideTickLabelsAutorange[s._name+".autorange"]=s.autorange;o.push(function e(){w.each(function(e,t){var r=He(this);var a=r.select(".text-math-group");if(a.empty()){g._vals[t].bb=A.bBox(r.node())}})})}var l=G.syncOrAsync(o);if(l&&l.then)p._promises.push(l);return l};function Pe(e,t,r){var a=t._id+"divider";var n=r.vals;var i=r.layer.selectAll("path."+a).data(n,Ie);i.exit().remove();i.enter().insert("path",":first-child").classed(a,1).classed("crisp",1).call(c.stroke,t.dividercolor).style("stroke-width",A.crispRound(e,t.dividerwidth,1)+"px");i.attr("transform",r.transFn).attr("d",r.path)}Z.getPxPosition=function(e,t){var r=e._fullLayout._size;var a=t._id.charAt(0);var n=t.side;var i;if(t.anchor!=="free"){i=t._anchorAxis}else if(a==="x"){i={_offset:r.t+(1-(t.position||0))*r.h,_length:0}}else if(a==="y"){i={_offset:r.l+(t.position||0)*r.w,_length:0}}if(n==="top"||n==="left"){return i._offset}else if(n==="bottom"||n==="right"){return i._offset+i._length}};function Re(e){var t=e.title.font.size;var r=(e.title.text.match(m.BR_TAG_ALL)||[]).length;if(e.title.hasOwnProperty("standoff")){return r?t*(B+r*W):t*B}else{return r?t*(r+1)*W:t}}function Ne(e,t){var r=e._fullLayout;var a=t._id;var n=a.charAt(0);var i=t.title.font.size;var o;if(t.title.hasOwnProperty("standoff")){o=t._depth+t.title.standoff+Re(t)}else{var s=Xe(t);if(t.type==="multicategory"){o=t._depth}else{var l=1.5*i;if(s){l=.5*i;if(t.ticks==="outside"){l+=t.ticklen}}o=10+l+(t.linewidth?t.linewidth-1:0)}if(!s){if(n==="x"){o+=t.side==="top"?i*(t.showticklabels?1:0):i*(t.showticklabels?1.5:.5)}else{o+=t.side==="right"?i*(t.showticklabels?1:.5):i*(t.showticklabels?.5:0)}}}var u=Z.getPxPosition(e,t);var c,f,d;if(n==="x"){f=t._offset+t._length/2;d=t.side==="top"?u-o:u+o}else{d=t._offset+t._length/2;f=t.side==="right"?u+o:u-o;c={rotate:"-90",offset:0}}var v;if(t.type!=="multicategory"){var p=t._selections[t._id+"tick"];v={selection:p,side:t.side};if(p&&p.node()&&p.node().parentNode){var h=A.getTranslate(p.node().parentNode);v.offsetLeft=h.x;v.offsetTop=h.y}if(t.title.hasOwnProperty("standoff")){v.pad=0}}return g.draw(e,a+"title",{propContainer:t,propName:t._name+".title.text",placeholder:r._dfltTitle[n],avoid:v,transform:c,attributes:{x:f,y:d,"text-anchor":"middle"}})}Z.shouldShowZeroLine=function(e,t,r){var a=G.simpleMap(t.range,t.r2l);return a[0]*a[1]<=0&&t.zeroline&&(t.type==="linear"||t.type==="-")&&!(t.rangebreaks&&t.maskBreaks(0)===N)&&(ze(t,0)||!Fe(e,t,r,a)||je(e,t))};Z.clipEnds=function(t,e){return e.filter(function(e){return ze(t,e.x)})};function ze(e,t){var r=e.l2p(t);return r>1&&r<e._length-1}function Fe(e,i,t,r){var a=t._mainAxis;if(!a)return;var n=e._fullLayout;var o=i._id.charAt(0);var s=Z.counterLetter(i._id);var l=i._offset+(Math.abs(r[0])<Math.abs(r[1])===(o==="x")?0:i._length);function u(e){if(!e.showline||!e.linewidth)return false;var t=Math.max((e.linewidth+i.zerolinewidth)/2,1);function r(e){return typeof e==="number"&&Math.abs(e-l)<t}if(r(e._mainLinePosition)||r(e._mainMirrorPosition)){return true}var a=e._linepositions||{};for(var n in a){if(r(a[n][0])||r(a[n][1])){return true}}}var c=n._plots[t._mainSubplot];if(!(c.mainplotinfo||c).overlays.length){return u(t,l)}var f=Z.list(e,s);for(var d=0;d<f.length;d++){var v=f[d];if(v._mainAxis===a&&u(v,l)){return true}}}function je(e,t){var r=e._fullData;var a=t._mainSubplot;var n=t._id.charAt(0);for(var i=0;i<r.length;i++){var o=r[i];if(o.visible===true&&o.xaxis+o.yaxis===a){if(V.traceIs(o,"bar-like")&&o.orientation==={x:"h",y:"v"}[n])return true;if(o.fill&&o.fill.charAt(o.fill.length-1)===n)return true}}return false}function He(e){var t=M.select(e);var r=t.select(".text-math-group");return r.empty()?t.select("text"):r}Z.allowAutoMargin=function(e){var t=Z.list(e,"",true);for(var r=0;r<t.length;r++){var a=t[r];if(a.automargin){Y.allowAutoMargin(e,Be(a));if(a.mirror){Y.allowAutoMargin(e,qe(a))}}if(V.getComponentMethod("rangeslider","isVisible")(a)){Y.allowAutoMargin(e,Ue(a))}}};function Be(e){return e._id+".automargin"}function qe(e){return Be(e)+".mirror"}function Ue(e){return e._id+".rangeslider"}Z.swap=function(e,t){var r=Ye(e,t);for(var a=0;a<r.length;a++){Ge(e,r[a].x,r[a].y)}};function Ye(e,t){var r=[];var a,n;for(a=0;a<t.length;a++){var i=[];var o=e._fullData[t[a]].xaxis;var s=e._fullData[t[a]].yaxis;if(!o||!s)continue;for(n=0;n<r.length;n++){if(r[n].x.indexOf(o)!==-1||r[n].y.indexOf(s)!==-1){i.push(n)}}if(!i.length){r.push({x:[o],y:[s]});continue}var l=r[i[0]];var u;if(i.length>1){for(n=1;n<i.length;n++){u=r[i[n]];Ve(l.x,u.x);Ve(l.y,u.y)}}Ve(l.x,[o]);Ve(l.y,[s])}return r}function Ve(e,t){for(var r=0;r<t.length;r++){if(e.indexOf(t[r])===-1)e.push(t[r])}}function Ge(e,t,r){var a=[];var n=[];var i=e.layout;var o,s;for(o=0;o<t.length;o++)a.push(Z.getFromId(e,t[o]));for(o=0;o<r.length;o++)n.push(Z.getFromId(e,r[o]));var l=Object.keys(b);var u=["anchor","domain","overlaying","position","side","tickangle","editType"];var c=["linear","log"];for(o=0;o<l.length;o++){var f=l[o];var d=a[0][f];var v=n[0][f];var p=true;var h=false;var m=false;if(f.charAt(0)==="_"||typeof d==="function"||u.indexOf(f)!==-1){continue}for(s=1;s<a.length&&p;s++){var g=a[s][f];if(f==="type"&&c.indexOf(d)!==-1&&c.indexOf(g)!==-1&&d!==g){h=true}else if(g!==d)p=false}for(s=1;s<n.length&&p;s++){var y=n[s][f];if(f==="type"&&c.indexOf(v)!==-1&&c.indexOf(y)!==-1&&v!==y){m=true}else if(n[s][f]!==v)p=false}if(p){if(h)i[a[0]._name].type="linear";if(m)i[n[0]._name].type="linear";We(i,f,a,n,e._fullLayout._dfltTitle)}}for(o=0;o<e._fullLayout.annotations.length;o++){var x=e._fullLayout.annotations[o];if(t.indexOf(x.xref)!==-1&&r.indexOf(x.yref)!==-1){G.swapAttrs(i.annotations[o],["?"])}}}function We(e,t,r,a,n){var i=G.nestedProperty;var o=i(e[r[0]._name],t).get();var s=i(e[a[0]._name],t).get();var l;if(t==="title"){if(o&&o.text===n.x){o.text=n.y}if(s&&s.text===n.y){s.text=n.x}}for(l=0;l<r.length;l++){i(e,r[l]._name+"."+t).set(s)}for(l=0;l<a.length;l++){i(e,a[l]._name+"."+t).set(o)}}function $e(e){return e._id==="angularaxis"}function Ze(e,t){var r=t._rangebreaks.length;for(var a=0;a<r;a++){var n=t._rangebreaks[a];if(e>=n.min&&e<n.max){return n.max}}return e}function Xe(e){return(e.ticklabelposition||"").indexOf("inside")!==-1}function Je(e,t){if(Xe(e._anchorAxis||{})){if(e._hideCounterAxisInsideTickLabels){e._hideCounterAxisInsideTickLabels(t)}}}},{"../../components/color":155,"../../components/drawing":177,"../../components/titles":253,"../../constants/alignment":260,"../../constants/numerical":265,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/plots":366,"../../registry":373,"./autorange":330,"./axis_autotype":332,"./axis_ids":335,"./clean_ticks":337,"./layout_attributes":346,"./set_convert":352,"@plotly/d3":20,"fast-isnumeric":31}],332:[function(e,t,r){"use strict";var f=e("fast-isnumeric");var a=e("../../lib");var d=e("../../constants/numerical").BADNUM;var c=a.isArrayOrTypedArray;var v=a.isDateTime;var p=a.cleanNumber;var h=Math.round;t.exports=function e(t,r,a){var n=t;var i=a.noMultiCategory;if(c(n)&&!n.length)return"-";if(!i&&b(n))return"multicategory";if(i&&Array.isArray(n[0])){var o=[];for(var s=0;s<n.length;s++){if(c(n[s])){for(var l=0;l<n[s].length;l++){o.push(n[s][l])}}}n=o}if(g(n,r))return"date";var u=a.autotypenumbers!=="strict";if(x(n,u))return"category";if(m(n,u))return"linear";return"-"};function n(e,t){return t?f(e):typeof e==="number"}function m(e,t){var r=e.length;for(var a=0;a<r;a++){if(n(e[a],t))return true}return false}function g(e,t){var r=e.length;var a=y(r);var n=0;var i=0;var o={};for(var s=0;s<r;s+=a){var l=h(s);var u=e[l];var c=String(u);if(o[c])continue;o[c]=1;if(v(u,t))n++;if(f(u))i++}return n>i*2}function y(e){return Math.max(1,(e-1)/1e3)}function x(e,t){var r=e.length;var a=y(r);var n=0;var i=0;var o={};for(var s=0;s<r;s+=a){var l=h(s);var u=e[l];var c=String(u);if(o[c])continue;o[c]=1;var f=typeof u;if(f==="boolean")i++;else if(t?p(u)!==d:f==="number")n++;else if(f==="string")i++}return i>n*2}function b(e){return c(e[0])&&c(e[1])}},{"../../constants/numerical":265,"../../lib":285,"fast-isnumeric":31}],333:[function(e,t,r){"use strict";var d=e("fast-isnumeric");var S=e("../../registry");var E=e("../../lib");var L=e("../array_container_defaults");var C=e("./layout_attributes");var D=e("./tick_value_defaults");var O=e("./tick_mark_defaults");var I=e("./tick_label_defaults");var P=e("./category_order_defaults");var R=e("./line_grid_defaults");var N=e("./set_convert");var z=e("./constants").WEEKDAY_PATTERN;var v=e("./constants").HOUR_PATTERN;t.exports=function e(t,r,a,n,i){var o=n.letter;var s=n.font||{};var l=n.splomStash||{};var u=a("visible",!n.visibleDflt);var c=r._template||{};var f=r.type||c.type||"-";var d;if(f==="date"){var v=S.getComponentMethod("calendars","handleDefaults");v(t,r,"calendar",n.calendar);if(!n.noTicklabelmode){d=a("ticklabelmode")}}var p="";if(!n.noTicklabelposition||f==="multicategory"){p=E.coerce(t,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:d==="period"?["outside","inside"]:o==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")}if(!n.noTicklabeloverflow){a("ticklabeloverflow",p.indexOf("inside")!==-1?"hide past domain":f==="category"||f==="multicategory"?"allow":"hide past div")}N(r,i);var h=!r.isValidRange(t.range);if(h&&n.reverseDflt)h="reversed";var m=a("autorange",h);if(m&&(f==="linear"||f==="-"))a("rangemode");a("range");r.cleanRange();P(t,r,a,n);if(f!=="category"&&!n.noHover)a("hoverformat");var g=a("color");var y=g!==C.color.dflt?g:s.color;var x=l.label||i._dfltTitle[o];I(t,r,a,f,n,{pass:1});if(!u)return r;a("title.text",x);E.coerceFont(a,"title.font",{family:s.family,size:E.bigFont(s.size),color:y});D(t,r,a,f);I(t,r,a,f,n,{pass:2});O(t,r,a,n);R(t,r,a,{dfltColor:g,bgColor:n.bgColor,showGrid:n.showGrid,attributes:C});if(r.showline||r.ticks)a("mirror");if(n.automargin)a("automargin");var b=f==="multicategory";if(!n.noTickson&&(f==="category"||b)&&(r.ticks||r.showgrid)){var _;if(b)_="boundaries";var w=a("tickson",_);if(w==="boundaries"){delete r.ticklabelposition}}if(b){var T=a("showdividers");if(T){a("dividercolor");a("dividerwidth")}}if(f==="date"){L(t,r,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:F});if(!r.rangebreaks.length){delete r.rangebreaks}else{for(var k=0;k<r.rangebreaks.length;k++){if(r.rangebreaks[k].pattern===z){r._hasDayOfWeekBreaks=true;break}}N(r,i);if(i._has("scattergl")||i._has("splom")){for(var M=0;M<n.data.length;M++){var A=n.data[M];if(A.type==="scattergl"||A.type==="splom"){A.visible=false;E.warn(A.type+" traces do not work on axes with rangebreaks."+" Setting trace "+A.index+" to `visible: false`.")}}}}}return r};function F(r,a,e){function t(e,t){return E.coerce(r,a,C.rangebreaks,e,t)}var n=t("enabled");if(n){var i=t("bounds");if(i&&i.length>=2){var o="";var s,l;if(i.length===2){for(s=0;s<2;s++){l=p(i[s]);if(l){o=z;break}}}var u=t("pattern",o);if(u===z){for(s=0;s<2;s++){l=p(i[s]);if(l){a.bounds[s]=i[s]=l-1}}}if(u){for(s=0;s<2;s++){l=i[s];switch(u){case z:if(!d(l)){a.enabled=false;return}l=+l;if(l!==Math.floor(l)||l<0||l>=7){a.enabled=false;return}a.bounds[s]=i[s]=l;break;case v:if(!d(l)){a.enabled=false;return}l=+l;if(l<0||l>24){a.enabled=false;return}a.bounds[s]=i[s]=l;break}}}if(e.autorange===false){var c=e.range;if(c[0]<c[1]){if(i[0]<c[0]&&i[1]>c[1]){a.enabled=false;return}}else if(i[0]>c[0]&&i[1]<c[1]){a.enabled=false;return}}}else{var f=t("values");if(f&&f.length){t("dvalue")}else{a.enabled=false;return}}}}var a={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function p(e){if(typeof e!=="string")return;return a[e.substr(0,3).toLowerCase()]}},{"../../lib":285,"../../registry":373,"../array_container_defaults":326,"./category_order_defaults":336,"./constants":338,"./layout_attributes":346,"./line_grid_defaults":348,"./set_convert":352,"./tick_label_defaults":353,"./tick_mark_defaults":354,"./tick_value_defaults":355,"fast-isnumeric":31}],334:[function(e,t,r){"use strict";var a=e("../../constants/docs");var n=a.FORMAT_LINK;var i=a.DATE_FORMAT_LINK;function o(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?s:l)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}}function s(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+n+"."].join(" ")}function l(e,t){return s(e,t)+[" And for dates see: "+i+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}t.exports={axisHoverFormat:o,descriptionOnlyNumbers:s,descriptionWithDates:l}},{"../../constants/docs":262}],335:[function(e,t,c){"use strict";var o=e("../../registry");var s=e("./constants");c.id2name=function e(t){if(typeof t!=="string"||!t.match(s.AX_ID_PATTERN))return;var r=t.split(" ")[0].substr(1);if(r==="1")r="";return t.charAt(0)+"axis"+r};c.name2id=function e(t){if(!t.match(s.AX_NAME_PATTERN))return;var r=t.substr(5);if(r==="1")r="";return t.charAt(0)+r};c.cleanId=function e(t,r,a){var n=/( domain)$/.test(t);if(typeof t!=="string"||!t.match(s.AX_ID_PATTERN))return;if(r&&t.charAt(0)!==r)return;if(n&&!a)return;var i=t.split(" ")[0].substr(1).replace(/^0+/,"");if(i==="1")i="";return t.charAt(0)+i+(n&&a?" domain":"")};c.list=function(e,t,r){var a=e._fullLayout;if(!a)return[];var n=c.listIds(e,t);var i=new Array(n.length);var o;for(o=0;o<n.length;o++){var s=n[o];i[o]=a[s.charAt(0)+"axis"+s.substr(1)]}if(!r){var l=a._subplots.gl3d||[];for(o=0;o<l.length;o++){var u=a[l[o]];if(t)i.push(u[t+"axis"]);else i.push(u.xaxis,u.yaxis,u.zaxis)}}return i};c.listIds=function(e,t){var r=e._fullLayout;if(!r)return[];var a=r._subplots;if(t)return a[t+"axis"];return a.xaxis.concat(a.yaxis)};c.getFromId=function(e,t,r){var a=e._fullLayout;t=t===undefined||typeof t!=="string"?t:t.replace(" domain","");if(r==="x")t=t.replace(/y[0-9]*/,"");else if(r==="y")t=t.replace(/x[0-9]*/,"");return a[c.id2name(t)]};c.getFromTrace=function(e,t,r){var a=e._fullLayout;var n=null;if(o.traceIs(t,"gl3d")){var i=t.scene;if(i.substr(0,5)==="scene"){n=a[i][r+"axis"]}}else{n=c.getFromId(e,t[r+"axis"]||r)}return n};c.idSort=function(e,t){var r=e.charAt(0);var a=t.charAt(0);if(r!==a)return r>a?1:-1;return+(e.substr(1)||1)-+(t.substr(1)||1)};c.ref2id=function(e){return/^[xyz]/.test(e)?e.split(" ")[0]:false};function r(e,t){if(t&&t.length){for(var r=0;r<t.length;r++){if(t[r][e])return true}}return false}c.isLinked=function(e,t){return r(t,e._axisMatchGroups)||r(t,e._axisConstraintGroups)}},{"../../registry":373,"./constants":338}],336:[function(e,t,r){"use strict";function c(e,t){var r=t.dataAttr||e._id.charAt(0);var a={};var n;var i,o;if(t.axData){n=t.axData}else{n=[];for(i=0;i<t.data.length;i++){var s=t.data[i];if(s[r+"axis"]===e._id){n.push(s)}}}for(i=0;i<n.length;i++){var l=n[i][r];for(o=0;o<l.length;o++){var u=l[o];if(u!==null&&u!==undefined){a[u]=1}}}return Object.keys(a)}t.exports=function e(t,r,a,n){if(r.type!=="category")return;var i=t.categoryarray;var o=Array.isArray(i)&&i.length>0;var s;if(o)s="array";var l=a("categoryorder",s);var u;if(l==="array"){u=a("categoryarray")}if(!o&&l==="array"){l=r.categoryorder="trace"}if(l==="trace"){r._initialCategories=[]}else if(l==="array"){r._initialCategories=u.slice()}else{u=c(r,n).sort();if(l==="category ascending"){r._initialCategories=u}else if(l==="category descending"){r._initialCategories=u.reverse()}}}},{}],337:[function(e,t,r){"use strict";var l=e("fast-isnumeric");var n=e("../../lib");var a=e("../../constants/numerical");var u=a.ONEDAY;var i=a.ONEWEEK;r.dtick=function(e,t){var r=t==="log";var a=t==="date";var n=t==="category";var i=a?u:1;if(!e)return i;if(l(e)){e=Number(e);if(e<=0)return i;if(n){return Math.max(1,Math.round(e))}if(a){return Math.max(.1,e)}return e}if(typeof e!=="string"||!(a||r)){return i}var o=e.charAt(0);var s=e.substr(1);s=l(s)?Number(s):0;if(s<=0||!(a&&o==="M"&&s===Math.round(s)||r&&o==="L"||r&&o==="D"&&(s===1||s===2))){return i}return e};r.tick0=function(e,t,r,a){if(t==="date"){return n.cleanDate(e,n.dateTick0(r,a%i===0?1:0))}if(a==="D1"||a==="D2"){return undefined}return l(e)?Number(e):0}},{"../../constants/numerical":265,"../../lib":285,"fast-isnumeric":31}],338:[function(e,t,r){"use strict";var a=e("../../lib/regex").counter;t.exports={idRegex:{x:a("x","( domain)?"),y:a("y","( domain)?")},attrRegex:a("[xy]axis"),xAxisMatch:a("xaxis"),yAxisMatch:a("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":301}],339:[function(e,t,r){"use strict";var E=e("../../lib");var j=e("./autorange");var H=e("./axis_ids").id2name;var L=e("./layout_attributes");var B=e("./scale_zoom");var k=e("./set_convert");var q=e("../../constants/numerical").ALMOST_EQUAL;var i=e("../../constants/alignment").FROM_BL;r.handleDefaults=function(e,r,t){var a=t.axIds;var n=t.axHasImage;var i=r._axisConstraintGroups=[];var o=r._axisMatchGroups=[];var s,l,u,c,f,d,v,p;for(s=0;s<a.length;s++){c=H(a[s]);f=e[c];d=r[c];M(f,d,{axIds:a,layoutOut:r,hasImage:n[c]})}function h(e,t){for(s=0;s<e.length;s++){l=e[s];for(u in l){r[H(u)][t]=l}}}h(o,"_matchGroup");for(s=0;s<i.length;s++){l=i[s];for(u in l){d=r[H(u)];if(d.fixedrange){for(var m in l){var g=H(m);if((e[g]||{}).fixedrange===false){E.warn("fixedrange was specified as false for axis "+g+" but was overridden because another "+"axis in its constraint group has fixedrange true")}r[g].fixedrange=true}break}}}s=0;while(s<i.length){l=i[s];for(u in l){d=r[H(u)];if(d._matchGroup&&Object.keys(d._matchGroup).length===Object.keys(l).length){i.splice(s,1);s--}break}s++}h(i,"_constraintGroup");var y=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"];var x=false;var b=false;function _(){p=d[v];if(v==="rangebreaks"){b=d._hasDayOfWeekBreaks}}for(s=0;s<o.length;s++){l=o[s];for(var w=0;w<y.length;w++){v=y[w];p=null;var T;for(u in l){c=H(u);f=e[c];d=r[c];if(!(v in d)){continue}if(!d.matches){T=d;if(v in f){_();break}}if(p===null&&v in f){_()}}if(v==="range"&&p){x=true}if(v==="autorange"&&p===null&&x){p=false}if(p===null&&v in T){p=T[v]}if(p!==null){for(u in l){d=r[H(u)];d[v]=v==="range"?p.slice():p;if(v==="rangebreaks"){d._hasDayOfWeekBreaks=b;k(d,r)}}}}}};function M(r,a,e){var t=e.axIds;var n=e.layoutOut;var i=e.hasImage;var o=n._axisConstraintGroups;var s=n._axisMatchGroups;var l=a._id;var u=l.charAt(0);var c=((n._splomAxes||{})[u]||{})[l]||{};var f=a._id;var d=f.charAt(0)==="x";a._matchGroup=null;a._constraintGroup=null;function v(e,t){return E.coerce(r,a,L,e,t)}v("constrain",i?"domain":"range");E.coerce(r,a,{constraintoward:{valType:"enumerated",values:d?["left","center","right"]:["bottom","middle","top"],dflt:d?"center":"middle"}},"constraintoward");var p=a.type;var h,m;var g=[];for(h=0;h<t.length;h++){m=t[h];if(m===f)continue;var y=n[H(m)];if(y.type===p){g.push(m)}}var x=D(o,f);if(x){var b=[];for(h=0;h<g.length;h++){m=g[h];if(!x[m])b.push(m)}g=b}var _=g.length;var w,T;if(_&&(r.matches||c.matches)){w=E.coerce(r,a,{matches:{valType:"enumerated",values:g,dflt:g.indexOf(c.matches)!==-1?c.matches:undefined}},"matches")}var k=i&&!d?a.anchor:undefined;if(_&&!w&&(r.scaleanchor||k)){T=E.coerce(r,a,{scaleanchor:{valType:"enumerated",values:g}},"scaleanchor",k)}if(w){a._matchGroup=O(s,f,w,1);var M=n[H(w)];var A=C(n,a)/C(n,M);if(d!==(w.charAt(0)==="x")){A=(d?"x":"y")+A}O(o,f,w,A)}else if(r.matches&&t.indexOf(r.matches)!==-1){E.warn("ignored "+a._name+'.matches: "'+r.matches+'" to avoid an infinite loop')}if(T){var S=v("scaleratio");if(!S)S=a.scaleratio=1;O(o,f,T,S)}else if(r.scaleanchor&&t.indexOf(r.scaleanchor)!==-1){E.warn("ignored "+a._name+'.scaleanchor: "'+r.scaleanchor+'" to avoid either an infinite loop '+"and possibly inconsistent scaleratios, or because this axis "+"declares a *matches* constraint.")}}function C(e,t){var r=t.domain;if(!r){r=e[H(t.overlaying)].domain}return r[1]-r[0]}function D(e,t){for(var r=0;r<e.length;r++){if(e[r][t]){return e[r]}}return null}function O(e,t,r,a){var n,i,o,s,l;var u=D(e,t);if(u===null){u={};u[t]=1;l=e.length;e.push(u)}else{l=e.indexOf(u)}var c=Object.keys(u);for(n=0;n<e.length;n++){o=e[n];if(n!==l&&o[r]){var f=o[r];for(i=0;i<c.length;i++){s=c[i];o[s]=v(f,v(a,u[s]))}e.splice(l,1);return}}if(a!==1){for(i=0;i<c.length;i++){var d=c[i];u[d]=v(a,u[d])}}u[r]=1}function v(e,t){var r="";var a="";var n,i;if(typeof e==="string"){r=e.match(/^[xy]*/)[0];n=r.length;e=+e.substr(n)}if(typeof t==="string"){a=t.match(/^[xy]*/)[0];i=a.length;t=+t.substr(i)}var o=e*t;if(!n&&!i){return o}if(!n||!i||r.charAt(0)===a.charAt(0)){return r+a+e*t}if(n===i){return o}return(n>i?r.substr(i):a.substr(n))+o}function U(e,t){var r=t._size;var a=r.h/r.w;var n={};var i=Object.keys(e);for(var o=0;o<i.length;o++){var s=i[o];var l=e[s];if(typeof l==="string"){var u=l.match(/^[xy]*/)[0];var c=u.length;l=+l.substr(c);var f=u.charAt(0)==="y"?a:1/a;for(var d=0;d<c;d++){l*=f}}n[s]=l}return n}r.enforce=function e(t){var r=t._fullLayout;var a=r._axisConstraintGroups||[];var n,i,o,s,l,u,c,f;for(n=0;n<a.length;n++){o=U(a[n],r);var d=Object.keys(o);var v=Infinity;var p=0;var h=Infinity;var m={};var g={};var y=false;for(i=0;i<d.length;i++){s=d[i];g[s]=l=r[H(s)];if(l._inputDomain)l.domain=l._inputDomain.slice();else l._inputDomain=l.domain.slice();if(!l._inputRange)l._inputRange=l.range.slice();l.setScale();m[s]=u=Math.abs(l._m)/o[s];v=Math.min(v,u);if(l.constrain==="domain"||!l._constraintShrinkable){h=Math.min(h,u)}delete l._constraintShrinkable;p=Math.max(p,u);if(l.constrain==="domain")y=true}if(v>q*p&&!y)continue;for(i=0;i<d.length;i++){s=d[i];u=m[s];l=g[s];c=l.constrain;if(u!==h||c==="domain"){f=u/h;if(c==="range"){B(l,f)}else{var x=l._inputDomain;var b=(l.domain[1]-l.domain[0])/(x[1]-x[0]);var _=(l.r2l(l.range[1])-l.r2l(l.range[0]))/(l.r2l(l._inputRange[1])-l.r2l(l._inputRange[0]));f/=b;if(f*_<1){l.domain=l._input.domain=x.slice();B(l,f);continue}if(_<1){l.range=l._input.range=l._inputRange.slice();f*=_}if(l.autorange){var w=l.r2l(l.range[0]);var T=l.r2l(l.range[1]);var k=(w+T)/2;var M=k;var A=k;var S=Math.abs(T-k);var E=k-S*f*1.0001;var L=k+S*f*1.0001;var C=j.makePadFn(r,l,0);var D=j.makePadFn(r,l,1);Y(l,f);var O=Math.abs(l._m);var I=j.concatExtremes(t,l);var P=I.min;var R=I.max;var N;var z;for(z=0;z<P.length;z++){N=P[z].val-C(P[z])/O;if(N>E&&N<M){M=N}}for(z=0;z<R.length;z++){N=R[z].val+D(R[z])/O;if(N<L&&N>A){A=N}}var F=(A-M)/(2*S);f/=F;M=l.l2r(M);A=l.l2r(A);l.range=l._input.range=w<T?[M,A]:[A,M]}Y(l,f)}}}}};r.getAxisGroup=function e(t,r){var a=t._axisMatchGroups;for(var n=0;n<a.length;n++){var i=a[n];if(i[r])return"g"+n}return r};r.clean=function e(t,r){if(r._inputDomain){var a=false;var n=r._id;var i=t._fullLayout._axisConstraintGroups;for(var o=0;o<i.length;o++){if(i[o][n]){a=true;break}}if(!a||r.constrain!=="domain"){r._input.domain=r.domain=r._inputDomain;delete r._inputDomain}}};function Y(e,t){var r=e._inputDomain;var a=i[e.constraintoward];var n=r[0]+(r[1]-r[0])*a;e.domain=e._input.domain=[n+(r[0]-n)/t,n+(r[1]-n)/t];e.setScale()}},{"../../constants/alignment":260,"../../constants/numerical":265,"../../lib":285,"./autorange":330,"./axis_ids":335,"./layout_attributes":346,"./scale_zoom":350,"./set_convert":352}],340:[function(e,t,r){"use strict";var pe=e("@plotly/d3");var he=e("tinycolor2");var a=e("has-passive-events");var me=e("../../registry");var ge=e("../../lib");var i=ge.strTranslate;var ye=e("../../lib/svg_text_utils");var n=e("../../components/color");var xe=e("../../components/drawing");var be=e("../../components/fx");var _e=e("./axes");var o=e("../../lib/setcursor");var we=e("../../components/dragelement");var s=e("../../components/dragelement/helpers");var Te=s.selectingOrDrawing;var ke=s.freeMode;var Me=e("../../constants/alignment").FROM_TL;var Ae=e("../../lib/clear_gl_canvases");var Se=e("../../plot_api/subroutines").redrawReglTraces;var Ee=e("../plots");var Le=e("./axis_ids").getFromId;var Ce=e("./select").prepSelect;var De=e("./select").clearSelect;var Oe=e("./select").selectOnClick;var Ie=e("./scale_zoom");var Pe=e("./constants");var Re=Pe.MINDRAG;var Ne=Pe.MINZOOM;var l=true;function u(b,c,e,t,r,a,_,w){var i=b._fullLayout._zoomlayer;var f=_+w==="nsew";var d=(_+w).length===1;var T,k;var M,A;var v,p;var o,s;var h,m;var g;var S;var E,L;var l;var C,D;var O,I,P;var y;var x;var R;function u(){T=c.xaxis;k=c.yaxis;h=T._length;m=k._length;o=T._offset;s=k._offset;M={};M[T._id]=T;A={};A[k._id]=k;if(_&&w){var e=c.overlays;for(var t=0;t<e.length;t++){var r=e[t].xaxis;M[r._id]=r;var a=e[t].yaxis;A[a._id]=a}}v=et(M);p=et(A);E=Fe(v,w);L=Fe(p,_);l=!L&&!E;S=Ke(b,b._fullLayout._axisMatchGroups,M,A);g=Ke(b,b._fullLayout._axisConstraintGroups,M,A,S);var n=g.isSubplotConstrained||S.isSubplotConstrained;C=w||n;D=_||n;var i=b._fullLayout;O=i._has("scattergl");I=i._has("splom");P=i._has("svg")}u();var n=Ue(L+E,b._fullLayout.dragmode,f);var N=ze(c,_+w+"drag",n,e,t,r,a);if(l&&!f){N.onmousedown=null;N.style.pointerEvents="none";return N}var z={element:N,gd:b,plotinfo:c};z.prepFn=function(e,t,r){var a=z.dragmode;var n=b._fullLayout.dragmode;if(n!==a){z.dragmode=n}u();x=b._fullLayout._invScaleX;R=b._fullLayout._invScaleY;if(!l){if(f){if(e.shiftKey){if(n==="pan")n="zoom";else if(!Te(n))n="pan"}else if(e.ctrlKey){n="pan"}}else{n="pan"}}if(ke(n))z.minDrag=1;else z.minDrag=undefined;if(Te(n)){z.xaxes=v;z.yaxes=p;Ce(e,t,r,z,n)}else{z.clickFn=j;if(Te(a)){F()}if(!l){if(n==="zoom"){z.moveFn=J;z.doneFn=Q;z.minDrag=1;X(e,t,r)}else if(n==="pan"){z.moveFn=ie;z.doneFn=ue}}}b._fullLayout._redrag=function(){var e=b._dragdata;if(e&&e.element===N){var t=b._fullLayout.dragmode;if(!Te(t)){u();ce([0,0,h,m]);z.moveFn(e.dx,e.dy)}}}};function F(){z.plotinfo.selection=false;De(b)}function j(e,t){var r=z.gd;if(r._fullLayout._activeShapeIndex>=0){r._fullLayout._deactivateShape(r);return}var a=r._fullLayout.clickmode;We(r);if(e===2&&!d)le();if(f){if(a.indexOf("select")>-1){Oe(t,r,v,p,c.id,z)}if(a.indexOf("event")>-1){be.click(r,t,c.id)}}else if(e===1&&d){var n=_?k:T;var i=_==="s"||w==="w"?0:1;var o=n._name+".range["+i+"]";var s=je(n,i);var l="left";var u="middle";if(n.fixedrange)return;if(_){u=_==="n"?"top":"bottom";if(n.side==="right")l="right"}else if(w==="e")l="right";if(r._context.showAxisRangeEntryBoxes){pe.select(N).call(ye.makeEditable,{gd:r,immediate:true,background:r._fullLayout.paper_bgcolor,text:String(s),fill:n.tickfont?n.tickfont.color:"#444",horizontalAlign:l,verticalAlign:u}).on("edit",function(e){var t=n.d2r(e);if(t!==undefined){me.call("_guiRelayout",r,o,t)}})}}}we.init(z);var H,B;var q;var U;var Y;var V;var G;var W;var $;var Z;function X(e,t,r){var a=N.getBoundingClientRect();H=t-a.left;B=r-a.top;b._fullLayout._calcInverseTransform(b);var n=ge.apply3DTransform(b._fullLayout._invTransform)(H,B);H=n[0];B=n[1];q={l:H,r:H,w:0,t:B,b:B,h:0};U=b._hmpixcount?b._hmlumcount/b._hmpixcount:he(b._fullLayout.plot_bgcolor).getLuminance();Y="M0,0H"+h+"V"+m+"H0V0";V=false;G="xy";Z=false;W=Ye(i,U,o,s,Y);$=Ve(i,o,s)}function J(e,t){if(b._transitioningWithDuration){return false}var r=Math.max(0,Math.min(h,x*e+H));var a=Math.max(0,Math.min(m,R*t+B));var n=Math.abs(r-H);var i=Math.abs(a-B);q.l=Math.min(H,r);q.r=Math.max(H,r);q.t=Math.min(B,a);q.b=Math.max(B,a);function o(){G="";q.r=q.l;q.t=q.b;$.attr("d","M0,0Z")}if(g.isSubplotConstrained){if(n>Ne||i>Ne){G="xy";if(n/h>i/m){i=n*m/h;if(B>a)q.t=B-i;else q.b=B+i}else{n=i*h/m;if(H>r)q.l=H-n;else q.r=H+n}$.attr("d",Je(q))}else{o()}}else if(S.isSubplotConstrained){if(n>Ne||i>Ne){G="xy";var s=Math.min(q.l/h,(m-q.b)/m);var l=Math.max(q.r/h,(m-q.t)/m);q.l=s*h;q.r=l*h;q.b=(1-s)*m;q.t=(1-l)*m;$.attr("d",Je(q))}else{o()}}else if(!L||i<Math.min(Math.max(n*.6,Re),Ne)){if(n<Re||!E){o()}else{q.t=0;q.b=m;G="x";$.attr("d",Ze(q,B))}}else if(!E||n<Math.min(i*.6,Ne)){q.l=0;q.r=h;G="y";$.attr("d",Xe(q,H))}else{G="xy";$.attr("d",Je(q))}q.w=q.r-q.l;q.h=q.b-q.t;if(G)Z=true;b._dragged=Z;Ge(W,$,q,Y,V,U);K();b.emit("plotly_relayouting",y);V=true}function K(){y={};if(G==="xy"||G==="x"){He(v,q.l/h,q.r/h,y,g.xaxes);oe("x",y)}if(G==="xy"||G==="y"){He(p,(m-q.b)/m,(m-q.t)/m,y,g.yaxes);oe("y",y)}}function Q(){K();We(b);ue();$e(b)}var ee=[0,0,h,m];var te=null;var re=Pe.REDRAWDELAY;var ae=c.mainplot?b._fullLayout._plots[c.mainplot]:c;function ne(e){if(!b._context._scrollZoom.cartesian&&!b._fullLayout._enablescrollzoom){return}F();if(b._transitioningWithDuration){e.preventDefault();e.stopPropagation();return}u();clearTimeout(te);var t=-e.deltaY;if(!isFinite(t))t=e.wheelDelta/10;if(!isFinite(t)){ge.log("Did not find wheel motion attributes: ",e);return}var r=Math.exp(-Math.min(Math.max(t,-20),20)/200);var a=ae.draglayer.select(".nsewdrag").node().getBoundingClientRect();var n=(e.clientX-a.left)/a.width;var i=(a.bottom-e.clientY)/a.height;var o;function s(t,e,r){if(t.fixedrange)return;var a=ge.simpleMap(t.range,t.r2l);var n=a[0]+(a[1]-a[0])*e;function i(e){return t.l2r(n+(e-n)*r)}t.range=a.map(i)}if(C){if(!w)n=.5;for(o=0;o<v.length;o++){s(v[o],n,r)}oe("x");ee[2]*=r;ee[0]+=ee[2]*n*(1/r-1)}if(D){if(!_)i=.5;for(o=0;o<p.length;o++){s(p[o],i,r)}oe("y");ee[3]*=r;ee[1]+=ee[3]*(1-i)*(1/r-1)}ce(ee);se();b.emit("plotly_relayouting",y);te=setTimeout(function(){if(!b._fullLayout)return;ee=[0,0,h,m];ue()},re);e.preventDefault();return}if(_.length*w.length!==1){Qe(N,ne)}function ie(e,t){e=e*x;t=t*R;if(b._transitioningWithDuration){return}b._fullLayout._replotting=true;if(E==="ew"||L==="ns"){var r=E?-e:0;var a=L?-t:0;if(S.isSubplotConstrained){if(E&&L){var n=(e/h-t/m)/2;e=n*h;t=-n*m;r=-e;a=-t}if(L){r=-a*h/m}else{a=-r*m/h}}if(E){Be(v,e);oe("x")}if(L){Be(p,t);oe("y")}ce([r,a,h,m]);se();b.emit("plotly_relayouting",y);return}function i(e,t,r){var a=1-t;var n;var i;for(var o=0;o<e.length;o++){var s=e[o];if(s.fixedrange)continue;n=s;i=s._rl[a]+(s._rl[t]-s._rl[a])/qe(r/s._length);var l=s.l2r(i);if(l!==false&&l!==undefined)s.range[t]=l}return n._length*(n._rl[t]-i)/(n._rl[t]-n._rl[a])}var o=E==="w"===(L==="n")?1:-1;if(E&&L&&(g.isSubplotConstrained||S.isSubplotConstrained)){var s=(e/h+o*t/m)/2;e=s*h;t=o*s*m}var l,u;if(E==="w")e=i(v,0,e);else if(E==="e")e=i(v,1,-e);else if(!E)e=0;if(L==="n")t=i(p,1,t);else if(L==="s")t=i(p,0,-t);else if(!L)t=0;l=E==="w"?e:0;u=L==="n"?t:0;if(g.isSubplotConstrained&&!S.isSubplotConstrained||S.isSubplotConstrained&&E&&L&&o>0){var c;if(S.isSubplotConstrained||!E&&L.length===1){for(c=0;c<v.length;c++){v[c].range=v[c]._r.slice();Ie(v[c],1-t/m)}e=t*h/m;l=e/2}if(S.isSubplotConstrained||!L&&E.length===1){for(c=0;c<p.length;c++){p[c].range=p[c]._r.slice();Ie(p[c],1-e/h)}t=e*m/h;u=t/2}}if(!S.isSubplotConstrained||!L){oe("x")}if(!S.isSubplotConstrained||!E){oe("y")}var f=h-e;var d=m-t;if(S.isSubplotConstrained&&!(E&&L)){if(E){u=l?0:e*m/h;d=f*m/h}else{l=u?0:t*h/m;f=d*h/m}}ce([l,u,f,d]);se();b.emit("plotly_relayouting",y)}function oe(e,t){var r=S.isSubplotConstrained?{x:p,y:v}[e]:S[e+"axes"];var a=S.isSubplotConstrained?{x:v,y:p}[e]:[];for(var n=0;n<r.length;n++){var i=r[n];var o=i._id;var s=S.xLinks[o]||S.yLinks[o];var l=a[0]||M[s]||A[s];if(l){if(t){t[i._name+".range[0]"]=t[l._name+".range[0]"];t[i._name+".range[1]"]=t[l._name+".range[1]"]}else{i.range=l.range.slice()}}}}function se(){var t=[];var r;function e(e){for(r=0;r<e.length;r++){if(!e[r].fixedrange)t.push(e[r]._id)}}if(C){e(v);e(g.xaxes);e(S.xaxes)}if(D){e(p);e(g.yaxes);e(S.yaxes)}y={};for(r=0;r<t.length;r++){var a=t[r];var n=Le(b,a);_e.drawOne(b,n,{skipTitle:true});y[n._name+".range[0]"]=n.range[0];y[n._name+".range[1]"]=n.range[1]}_e.redrawComponents(b,t)}function le(){if(b._transitioningWithDuration)return;var e=b._context.doubleClick;var t=[];if(E)t=t.concat(v);if(L)t=t.concat(p);if(S.xaxes)t=t.concat(S.xaxes);if(S.yaxes)t=t.concat(S.yaxes);var r={};var a,n,i;if(e==="reset+autosize"){e="autosize";for(n=0;n<t.length;n++){a=t[n];if(a._rangeInitial&&(a.range[0]!==a._rangeInitial[0]||a.range[1]!==a._rangeInitial[1])||!a._rangeInitial&&!a.autorange){e="reset";break}}}if(e==="autosize"){for(n=0;n<t.length;n++){a=t[n];if(!a.fixedrange)r[a._name+".autorange"]=true}}else if(e==="reset"){if(E||g.isSubplotConstrained)t=t.concat(g.xaxes);if(L&&!g.isSubplotConstrained)t=t.concat(g.yaxes);if(g.isSubplotConstrained){if(!E)t=t.concat(v);else if(!L)t=t.concat(p)}for(n=0;n<t.length;n++){a=t[n];if(!a.fixedrange){if(!a._rangeInitial){r[a._name+".autorange"]=true}else{i=a._rangeInitial;r[a._name+".range[0]"]=i[0];r[a._name+".range[1]"]=i[1]}}}}b.emit("plotly_doubleclick",null);me.call("_guiRelayout",b,r)}function ue(){ce([0,0,h,m]);ge.syncOrAsync([Ee.previousPromises,function(){b._fullLayout._replotting=false;me.call("_guiRelayout",b,y)}],b)}function ce(e){var t=b._fullLayout;var r=t._plots;var a=t._subplots.cartesian;var n,i,o,s;if(I){me.subplotsRegistry.splom.drag(b)}if(O){for(n=0;n<a.length;n++){i=r[a[n]];o=i.xaxis;s=i.yaxis;if(i._scene){var l=ge.simpleMap(o.range,o.r2l);var u=ge.simpleMap(s.range,s.r2l);i._scene.update({range:[l[0],u[0],l[1],u[1]]})}}}if(I||O){Ae(b);Se(b)}if(P){var c=e[2]/T._length;var f=e[3]/k._length;for(n=0;n<a.length;n++){i=r[a[n]];o=i.xaxis;s=i.yaxis;var d=(C||S.isSubplotConstrained)&&!o.fixedrange&&M[o._id];var v=(D||S.isSubplotConstrained)&&!s.fixedrange&&A[s._id];var p,h;var m,g;if(d){p=c;m=w||S.isSubplotConstrained?e[0]:ve(o,p)}else if(S.xaHash[o._id]){p=c;m=e[0]*o._length/T._length}else if(S.yaHash[o._id]){p=f;m=L==="ns"?-e[1]*o._length/k._length:ve(o,p,{n:"top",s:"bottom"}[L])}else{p=fe(o,c,f);m=de(o,p)}if(v){h=f;g=_||S.isSubplotConstrained?e[1]:ve(s,h)}else if(S.yaHash[s._id]){h=f;g=e[1]*s._length/k._length}else if(S.xaHash[s._id]){h=c;g=E==="ew"?-e[0]*s._length/T._length:ve(s,h,{e:"right",w:"left"}[E])}else{h=fe(s,c,f);g=de(s,h)}if(!p&&!h){continue}if(!p)p=1;if(!h)h=1;var y=o._offset-m/p;var x=s._offset-g/h;i.clipRect.call(xe.setTranslate,m,g).call(xe.setScale,p,h);i.plot.call(xe.setTranslate,y,x).call(xe.setScale,1/p,1/h);if(p!==i.xScaleFactor||h!==i.yScaleFactor){xe.setPointGroupScale(i.zoomScalePts,p,h);xe.setTextPointsScale(i.zoomScaleTxt,p,h)}xe.hideOutsideRangePoints(i.clipOnAxisFalseTraces,i);i.xScaleFactor=p;i.yScaleFactor=h}}}function fe(e,t,r){if(e.fixedrange)return 0;if(C&&g.xaHash[e._id]){return t}if(D&&(g.isSubplotConstrained?g.xaHash:g.yaHash)[e._id]){return r}return 0}function de(e,t){if(t){e.range=e._r.slice();Ie(e,t);return ve(e,t)}return 0}function ve(e,t,r){return e._length*(1-t)*Me[r||e.constraintoward||"middle"]}return N}function c(t,e,r,a){var n=ge.ensureSingle(t.draglayer,e,r,function(e){e.classed("drag",true).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id)});n.call(o,a);return n.node()}function ze(e,t,r,a,n,i,o){var s=c(e,"rect",t,r);pe.select(s).call(xe.setRect,a,n,i,o);return s}function Fe(e,t){for(var r=0;r<e.length;r++){if(!e[r].fixedrange)return t}return""}function je(e,t){var r=e.range[t];var a=Math.abs(r-e.range[1-t]);var n;if(e.type==="date"){return r}else if(e.type==="log"){n=Math.ceil(Math.max(0,-Math.log(a)/Math.LN10))+3;return pe.format("."+n+"g")(Math.pow(10,r))}else{n=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(a)/Math.LN10)+4;return pe.format("."+String(n)+"g")(r)}}function He(e,t,r,a,n){for(var i=0;i<e.length;i++){var o=e[i];if(o.fixedrange)continue;if(o.rangebreaks){var s=o._id.charAt(0)==="y";var l=s?1-t:t;var u=s?1-r:r;a[o._name+".range[0]"]=o.l2r(o.p2l(l*o._length));a[o._name+".range[1]"]=o.l2r(o.p2l(u*o._length))}else{var c=o._rl[0];var f=o._rl[1]-c;a[o._name+".range[0]"]=o.l2r(c+f*t);a[o._name+".range[1]"]=o.l2r(c+f*r)}}if(n&&n.length){var d=(t+(1-r))/2;He(n,d,1-d,a,[])}}function Be(e,t){for(var r=0;r<e.length;r++){var a=e[r];if(!a.fixedrange){if(a.rangebreaks){var n=0;var i=a._length;var o=a.p2l(n+t)-a.p2l(n);var s=a.p2l(i+t)-a.p2l(i);var l=(o+s)/2;a.range=[a.l2r(a._rl[0]-l),a.l2r(a._rl[1]-l)]}else{a.range=[a.l2r(a._rl[0]-t/a._m),a.l2r(a._rl[1]-t/a._m)]}}}}function qe(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function Ue(e,t,r){if(!e)return"pointer";if(e==="nsew"){if(r)return"";if(t==="pan")return"move";return"crosshair"}return e.toLowerCase()+"-resize"}function Ye(e,t,r,a,n){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",i(r,a)).attr("d",n+"Z")}function Ve(e,t,r){return e.append("path").attr("class","zoombox-corners").style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,opacity:0}).attr("transform",i(t,r)).attr("d","M0,0Z")}function Ge(e,t,r,a,n,i){e.attr("d",a+"M"+r.l+","+r.t+"v"+r.h+"h"+r.w+"v-"+r.h+"h-"+r.w+"Z");f(e,t,n,i)}function f(e,t,r,a){if(!r){e.transition().style("fill",a>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200);t.transition().style("opacity",1).duration(200)}}function We(e){pe.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function $e(e){if(l&&e.data&&e._context.showTips){ge.notifier(ge._(e,"Double-click to zoom back out"),"long");l=false}}function Ze(e,t){return"M"+(e.l-.5)+","+(t-Ne-.5)+"h-3v"+(2*Ne+1)+"h3ZM"+(e.r+.5)+","+(t-Ne-.5)+"h3v"+(2*Ne+1)+"h-3Z"}function Xe(e,t){return"M"+(t-Ne-.5)+","+(e.t-.5)+"v-3h"+(2*Ne+1)+"v3ZM"+(t-Ne-.5)+","+(e.b+.5)+"v3h"+(2*Ne+1)+"v-3Z"}function Je(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,Ne)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function Ke(e,t,r,a,n){var i=false;var o={};var s={};var l,u,c,f;var d=(n||{}).xaHash;var v=(n||{}).yaHash;for(var p=0;p<t.length;p++){var h=t[p];for(l in r){if(h[l]){for(c in h){if(!(n&&(d[c]||v[c]))&&!(c.charAt(0)==="x"?r:a)[c]){o[c]=l}}for(u in a){if(!(n&&(d[u]||v[u]))&&h[u]){i=true}}}}for(u in a){if(h[u]){for(f in h){if(!(n&&(d[f]||v[f]))&&!(f.charAt(0)==="x"?r:a)[f]){s[f]=u}}}}}if(i){ge.extendFlat(o,s);s={}}var m={};var g=[];for(c in o){var y=Le(e,c);g.push(y);m[y._id]=y}var x={};var b=[];for(f in s){var _=Le(e,f);b.push(_);x[_._id]=_}return{xaHash:m,yaHash:x,xaxes:g,yaxes:b,xLinks:o,yLinks:s,isSubplotConstrained:i}}function Qe(e,t){if(!a){if(e.onwheel!==undefined)e.onwheel=t;else if(e.onmousewheel!==undefined)e.onmousewheel=t;else if(!e.isAddedWheelEvent){e.isAddedWheelEvent=true;e.addEventListener("wheel",t,{passive:false})}}else{var r=e.onwheel!==undefined?"wheel":"mousewheel";if(e._onwheel){e.removeEventListener(r,e._onwheel)}e._onwheel=t;e.addEventListener(r,t,{passive:false})}}function et(e){var t=[];for(var r in e)t.push(e[r]);return t}t.exports={makeDragBox:u,makeDragger:c,makeRectDragger:ze,makeZoombox:Ye,makeCorners:Ve,updateZoombox:Ge,xyCorners:Je,transitionZoombox:f,removeZoombox:We,showDoubleClickNotifier:$e,attachWheelEventHandler:Qe}},{"../../components/color":155,"../../components/dragelement":174,"../../components/dragelement/helpers":173,"../../components/drawing":177,"../../components/fx":195,"../../constants/alignment":260,"../../lib":285,"../../lib/clear_gl_canvases":273,"../../lib/setcursor":305,"../../lib/svg_text_utils":307,"../../plot_api/subroutines":321,"../../registry":373,"../plots":366,"./axes":331,"./axis_ids":335,"./constants":338,"./scale_zoom":350,"./select":351,"@plotly/d3":20,"has-passive-events":63,tinycolor2:119}],341:[function(e,t,a){"use strict";var n=e("@plotly/d3");var u=e("../../components/fx");var c=e("../../components/dragelement");var i=e("../../lib/setcursor");var f=e("./dragbox").makeDragBox;var d=e("./constants").DRAGGERSIZE;a.initInteractions=function e(s){var l=s._fullLayout;if(s._context.staticPlot){n.select(s).selectAll(".drag").remove();return}if(!l._has("cartesian")&&!l._has("splom"))return;var t=Object.keys(l._plots||{}).sort(function(e,t){if((l._plots[e].mainplot&&true)===(l._plots[t].mainplot&&true)){var r=e.split("y");var a=t.split("y");return r[0]===a[0]?Number(r[1]||1)-Number(a[1]||1):Number(r[0]||1)-Number(a[0]||1)}return l._plots[e].mainplot?1:-1});t.forEach(function(t){var e=l._plots[t];var r=e.xaxis;var a=e.yaxis;if(!e.mainplot){var n=f(s,e,r._offset,a._offset,r._length,a._length,"ns","ew");n.onmousemove=function(e){s._fullLayout._rehover=function(){if(s._fullLayout._hoversubplot===t&&s._fullLayout._plots[t]){u.hover(s,e,t)}};u.hover(s,e,t);s._fullLayout._lasthover=n;s._fullLayout._hoversubplot=t};n.onmouseout=function(e){if(s._dragging)return;s._fullLayout._hoversubplot=null;c.unhover(s,e)};if(s._context.showAxisDragHandles){f(s,e,r._offset-d,a._offset-d,d,d,"n","w");f(s,e,r._offset+r._length,a._offset-d,d,d,"n","e");f(s,e,r._offset-d,a._offset+a._length,d,d,"s","w");f(s,e,r._offset+r._length,a._offset+a._length,d,d,"s","e")}}if(s._context.showAxisDragHandles){if(t===r._mainSubplot){var i=r._mainLinePosition;if(r.side==="top")i-=d;f(s,e,r._offset+r._length*.1,i,r._length*.8,d,"","ew");f(s,e,r._offset,i,r._length*.1,d,"","w");f(s,e,r._offset+r._length*.9,i,r._length*.1,d,"","e")}if(t===a._mainSubplot){var o=a._mainLinePosition;if(a.side!=="right")o-=d;f(s,e,o,a._offset+a._length*.1,d,a._length*.8,"ns","");f(s,e,o,a._offset+a._length*.9,d,a._length*.1,"s","");f(s,e,o,a._offset,d,a._length*.1,"n","")}}});var r=l._hoverlayer.node();r.onmousemove=function(e){e.target=s._fullLayout._lasthover;u.hover(s,e,l._hoversubplot)};r.onclick=function(e){e.target=s._fullLayout._lasthover;u.click(s,e)};r.onmousedown=function(e){s._fullLayout._lasthover.onmousedown(e)};a.updateFx(s)};a.updateFx=function(e){var t=e._fullLayout;var r=t.dragmode==="pan"?"move":"crosshair";i(t._draggers,r)}},{"../../components/dragelement":174,"../../components/fx":195,"../../lib/setcursor":305,"./constants":338,"./dragbox":340,"@plotly/d3":20}],342:[function(e,t,r){"use strict";function a(e){var t=e._fullLayout._zoomlayer;if(t){t.selectAll(".outline-controllers").remove()}}function n(e){var t=e._fullLayout._zoomlayer;if(t){t.selectAll(".select-outline").remove()}e._fullLayout._drawing=false}t.exports={clearOutlineControllers:a,clearSelect:n}},{}],343:[function(e,t,r){"use strict";var a=e("../../lib").strTranslate;function n(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}function i(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}}function o(t){var r=t._id.charAt(0)==="y"?1:0;return function(e){return n(t,e[r])}}function s(e){return a(e.xaxis._offset,e.yaxis._offset)}t.exports={p2r:n,r2p:i,axValue:o,getTransform:s}},{"../../lib":285}],344:[function(e,t,r){"use strict";var x=e("../../registry");var b=e("../../lib");var _=e("./axis_ids");t.exports=function e(y){return function e(t,r){var a=t[y];if(!Array.isArray(a))return;var n=x.subplotsRegistry.cartesian;var i=n.idRegex;var o=r._subplots;var s=o.xaxis;var l=o.yaxis;var u=o.cartesian;var c=r._has("cartesian")||r._has("gl2d");for(var f=0;f<a.length;f++){var d=a[f];if(!b.isPlainObject(d))continue;var v=_.cleanId(d.xref,"x",false);var p=_.cleanId(d.yref,"y",false);var h=i.x.test(v);var m=i.y.test(p);if(h||m){if(!c)b.pushUnique(r._basePlotModules,n);var g=false;if(h&&s.indexOf(v)===-1){s.push(v);g=true}if(m&&l.indexOf(p)===-1){l.push(p);g=true}if(g&&h&&m){u.push(v+p)}}}}}},{"../../lib":285,"../../registry":373,"./axis_ids":335}],345:[function(e,t,r){"use strict";var b=e("@plotly/d3");var _=e("../../registry");var h=e("../../lib");var a=e("../plots");var w=e("../../components/drawing");var T=e("../get_data").getModuleCalcData;var y=e("./axis_ids");var k=e("./constants");var i=e("../../constants/xmlns_namespaces");var d=h.ensureSingle;function v(e,t,r){return h.ensureSingle(e,t,r,function(e){e.datum(r)})}r.name="cartesian";r.attr=["xaxis","yaxis"];r.idRoot=["x","y"];r.idRegex=k.idRegex;r.attrRegex=k.attrRegex;r.attributes=e("./attributes");r.layoutAttributes=e("./layout_attributes");r.supplyLayoutDefaults=e("./layout_defaults");r.transitionAxes=e("./transition_axes");r.finalizeSubplots=function(e,t){var r=t._subplots;var a=r.xaxis;var n=r.yaxis;var i=r.cartesian;var o=i.concat(r.gl2d||[]);var s={};var l={};var u,c,f;for(u=0;u<o.length;u++){var d=o[u].split("y");s[d[0]]=1;l["y"+d[1]]=1}for(u=0;u<a.length;u++){c=a[u];if(!s[c]){f=(e[y.id2name(c)]||{}).anchor;if(!k.idRegex.y.test(f))f="y";i.push(c+f);o.push(c+f);if(!l[f]){l[f]=1;h.pushUnique(n,f)}}}for(u=0;u<n.length;u++){f=n[u];if(!l[f]){c=(e[y.id2name(f)]||{}).anchor;if(!k.idRegex.x.test(c))c="x";i.push(c+f);o.push(c+f);if(!s[c]){s[c]=1;h.pushUnique(a,c)}}}if(!o.length){c="";f="";for(var v in e){if(k.attrRegex.test(v)){var p=v.charAt(0);if(p==="x"){if(!c||+v.substr(5)<+c.substr(5)){c=v}}else if(!f||+v.substr(5)<+f.substr(5)){f=v}}}c=c?y.name2id(c):"x";f=f?y.name2id(f):"y";a.push(c);n.push(f);i.push(c+f)}};r.plot=function(e,t,r,a){var n=e._fullLayout;var i=n._subplots.cartesian;var o=e.calcdata;var s;if(!Array.isArray(t)){t=[];for(s=0;s<o.length;s++)t.push(s)}for(s=0;s<i.length;s++){var l=i[s];var u=n._plots[l];var c=[];var f;for(var d=0;d<o.length;d++){var v=o[d];var p=v[0].trace;if(p.xaxis+p.yaxis===l){if(t.indexOf(p.index)!==-1||p.carpet){if(f&&f[0].trace.xaxis+f[0].trace.yaxis===l&&["tonextx","tonexty","tonext"].indexOf(p.fill)!==-1&&c.indexOf(f)===-1){c.push(f)}c.push(v)}f=v}}m(e,u,c,r,a)}};function m(a,n,e,i,o){var t=k.traceLayerClasses;var r=a._fullLayout;var s=r._modules;var l,u,c;var f=[];var d=[];for(var v=0;v<s.length;v++){l=s[v];var p=l.name;var h=_.modules[p].categories;if(h.svg){var m=l.layerName||p+"layer";var g=l.plot;u=T(e,g);c=u[0];e=u[1];if(c.length){f.push({i:t.indexOf(m),className:m,plotMethod:g,cdModule:c})}if(h.zoomScale){d.push("."+m)}}}f.sort(function(e,t){return e.i-t.i});var y=n.plot.selectAll("g.mlayer").data(f,function(e){return e.className});y.enter().append("g").attr("class",function(e){return e.className}).classed("mlayer",true).classed("rangeplot",n.isRangePlot);y.exit().remove();y.order();y.each(function(e){var t=b.select(this);var r=e.className;e.plotMethod(a,n,e.cdModule,t,i,o);if(k.clipOnAxisFalseQuery.indexOf("."+r)===-1){w.setClipUrl(t,n.layerClipId,a)}});if(r._has("scattergl")){l=_.getModule("scattergl");c=T(e,l)[0];l.plot(a,n,c)}if(!a._context.staticPlot){if(n._hasClipOnAxisFalse){n.clipOnAxisFalseTraces=n.plot.selectAll(k.clipOnAxisFalseQuery.join(",")).selectAll(".trace")}if(d.length){var x=n.plot.selectAll(d.join(",")).selectAll(".trace");n.zoomScalePts=x.selectAll("path.point");n.zoomScaleTxt=x.selectAll(".textpoint")}}}r.clean=function(e,t,r,a){var n=a._plots||{};var i=t._plots||{};var o=a._subplots||{};var s;var l,u;if(a._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms){for(u in n){s=n[u];if(s.plotgroup)s.plotgroup.remove()}}var c=a._has&&a._has("gl");var f=t._has&&t._has("gl");if(c&&!f){for(u in n){s=n[u];if(s._scene)s._scene.destroy()}}if(o.xaxis&&o.yaxis){var d=y.listIds({_fullLayout:a});for(l=0;l<d.length;l++){var v=d[l];if(!t[y.id2name(v)]){a._infolayer.selectAll(".g-"+v+"title").remove()}}}var p=a._has&&a._has("cartesian");var h=t._has&&t._has("cartesian");if(p&&!h){x(a._cartesianlayer.selectAll(".subplot"),a);a._defs.selectAll(".axesclip").remove();delete a._axisConstraintGroups;delete a._axisMatchGroups}else if(o.cartesian){for(l=0;l<o.cartesian.length;l++){var m=o.cartesian[l];if(!i[m]){var g="."+m+",."+m+"-x,."+m+"-y";a._cartesianlayer.selectAll(g).remove();M(m,a)}}}};r.drawFramework=function(a){var n=a._fullLayout;var e=o(a);var t=n._cartesianlayer.selectAll(".subplot").data(e,String);t.enter().append("g").attr("class",function(e){return"subplot "+e[0]});t.order();t.exit().call(x,n);t.each(function(e){var t=e[0];var r=n._plots[t];r.plotgroup=b.select(this);s(a,r);r.draglayer=d(n._draggers,"g",t)})};r.rangePlot=function(e,t,r){s(e,t);m(e,t,r);a.style(e)};function o(e){var t=e._fullLayout;var r=t._subplots.cartesian;var a=r.length;var n,i,o,s,l,u;var c=[];var f=[];for(n=0;n<a;n++){o=r[n];s=t._plots[o];l=s.xaxis;u=s.yaxis;var d=l._mainAxis;var v=u._mainAxis;var p=d._id+v._id;var h=t._plots[p];s.overlays=[];if(p!==o&&h){s.mainplot=p;s.mainplotinfo=h;f.push(o)}else{s.mainplot=undefined;s.mainplotinfo=undefined;c.push(o)}}for(n=0;n<f.length;n++){o=f[n];s=t._plots[o];s.mainplotinfo.overlays.push(s)}var m=c.concat(f);var g=new Array(a);for(n=0;n<a;n++){o=m[n];s=t._plots[o];l=s.xaxis;u=s.yaxis;var y=[o,l.layer,u.layer,l.overlaying||"",u.overlaying||""];for(i=0;i<s.overlays.length;i++){y.push(s.overlays[i].id)}g[n]=y}return g}function s(e,t){var r=t.plotgroup;var a=t.id;var n=k.layerValue2layerClass[t.xaxis.layer];var i=k.layerValue2layerClass[t.yaxis.layer];var o=e._fullLayout._hasOnlyLargeSploms;if(!t.mainplot){if(o){t.xlines=d(r,"path","xlines-above");t.ylines=d(r,"path","ylines-above");t.xaxislayer=d(r,"g","xaxislayer-above");t.yaxislayer=d(r,"g","yaxislayer-above")}else{var s=d(r,"g","layer-subplot");t.shapelayer=d(s,"g","shapelayer");t.imagelayer=d(s,"g","imagelayer");t.gridlayer=d(r,"g","gridlayer");t.zerolinelayer=d(r,"g","zerolinelayer");d(r,"path","xlines-below");d(r,"path","ylines-below");t.overlinesBelow=d(r,"g","overlines-below");d(r,"g","xaxislayer-below");d(r,"g","yaxislayer-below");t.overaxesBelow=d(r,"g","overaxes-below");t.plot=d(r,"g","plot");t.overplot=d(r,"g","overplot");t.xlines=d(r,"path","xlines-above");t.ylines=d(r,"path","ylines-above");t.overlinesAbove=d(r,"g","overlines-above");d(r,"g","xaxislayer-above");d(r,"g","yaxislayer-above");t.overaxesAbove=d(r,"g","overaxes-above");t.xlines=r.select(".xlines-"+n);t.ylines=r.select(".ylines-"+i);t.xaxislayer=r.select(".xaxislayer-"+n);t.yaxislayer=r.select(".yaxislayer-"+i)}}else{var l=t.mainplotinfo;var u=l.plotgroup;var c=a+"-x";var f=a+"-y";t.gridlayer=l.gridlayer;t.zerolinelayer=l.zerolinelayer;d(l.overlinesBelow,"path",c);d(l.overlinesBelow,"path",f);d(l.overaxesBelow,"g",c);d(l.overaxesBelow,"g",f);t.plot=d(l.overplot,"g",a);d(l.overlinesAbove,"path",c);d(l.overlinesAbove,"path",f);d(l.overaxesAbove,"g",c);d(l.overaxesAbove,"g",f);t.xlines=u.select(".overlines-"+n).select("."+c);t.ylines=u.select(".overlines-"+i).select("."+f);t.xaxislayer=u.select(".overaxes-"+n).select("."+c);t.yaxislayer=u.select(".overaxes-"+i).select("."+f)}if(!o){v(t.gridlayer,"g",t.xaxis._id);v(t.gridlayer,"g",t.yaxis._id);t.gridlayer.selectAll("g").map(function(e){return e[0]}).sort(y.idSort)}t.xlines.style("fill","none").classed("crisp",true);t.ylines.style("fill","none").classed("crisp",true)}function x(e,a){if(!e)return;var n={};e.each(function(e){var t=e[0];var r=b.select(this);r.remove();M(t,a);n[t]=true});for(var t in a._plots){var r=a._plots[t];var i=r.overlays||[];for(var o=0;o<i.length;o++){var s=i[o];if(n[s.id]){s.plot.selectAll(".trace").remove()}}}}function M(e,t){t._draggers.selectAll("g."+e).remove();t._defs.select("#clip"+t._uid+e+"plot").remove()}r.toSVG=function(e){var a=e._fullLayout._glimages;var r=b.select(e).selectAll(".svg-container");var t=r.filter(function(e,t){return t===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function n(){var e=this;var t=e.toDataURL("image/png");var r=a.append("svg:image");r.attr({xmlns:i.svg,"xlink:href":t,preserveAspectRatio:"none",x:0,y:0,width:e.width,height:e.height})}t.each(n)};r.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":177,"../../constants/xmlns_namespaces":266,"../../lib":285,"../../registry":373,"../get_data":362,"../plots":366,"./attributes":329,"./axis_ids":335,"./constants":338,"./graph_interact":341,"./layout_attributes":346,"./layout_defaults":347,"./transition_axes":356,"@plotly/d3":20}],346:[function(e,t,r){"use strict";var a=e("../font_attributes");var n=e("../../components/color/attributes");var i=e("../../components/drawing/attributes").dash;var o=e("../../lib/extend").extendFlat;var s=e("../../plot_api/plot_template").templatedArray;var l=e("../../plots/cartesian/axis_format_attributes").descriptionWithDates;var u=e("../../constants/numerical").ONEDAY;var c=e("./constants");var f=c.HOUR_PATTERN;var d=c.WEEKDAY_PATTERN;t.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:n.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:a({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:true},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[true,false,"reversed"],dflt:true,editType:"axrange",impliedEdits:{"range[0]":undefined,"range[1]":undefined}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":false},anim:true},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":false},anim:true}],editType:"axrange",impliedEdits:{autorange:false},anim:true},fixedrange:{valType:"boolean",dflt:false,editType:"calc"},scaleanchor:{valType:"enumerated",values:[c.idRegex.x.toString(),c.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[c.idRegex.x.toString(),c.idRegex.y.toString()],editType:"calc"},rangebreaks:s("rangebreak",{enabled:{valType:"boolean",dflt:true,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[d,f,""],editType:"calc"},values:{valType:"info_array",freeLength:true,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:u},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:undefined,dtick:undefined}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[true,"ticks",false,"all","allticks"],dflt:false,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:n.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:true,editType:"ticks"},automargin:{valType:"boolean",dflt:false,editType:"ticks"},showspikes:{valType:"boolean",dflt:false,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:o({},i,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:a({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:false,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:l("tick label")},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:true,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:l("hover text")},showline:{valType:"boolean",dflt:false,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:n.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:n.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:n.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:true,editType:"ticks"},dividercolor:{valType:"color",dflt:n.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",c.idRegex.x.toString(),c.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",c.idRegex.x.toString(),c.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:a({editType:"ticks"})}}},{"../../components/color/attributes":154,"../../components/drawing/attributes":176,"../../constants/numerical":265,"../../lib/extend":279,"../../plot_api/plot_template":320,"../../plots/cartesian/axis_format_attributes":334,"../font_attributes":360,"./constants":338}],347:[function(e,t,r){"use strict";var se=e("../../lib");var le=e("../../components/color");var ue=e("../../components/fx/helpers").isUnifiedHover;var ce=e("../../components/fx/hovermode_defaults");var fe=e("../../plot_api/plot_template");var de=e("../layout_attributes");var ve=e("./layout_attributes");var pe=e("./type_defaults");var he=e("./axis_defaults");var me=e("./constraints");var ge=e("./position_defaults");var ye=e("./axis_ids");var xe=ye.id2name;var be=ye.name2id;var _e=e("./constants").AX_ID_PATTERN;var a=e("../../registry");var we=a.traceIs;var Te=a.getComponentMethod;function ke(e,t,r){if(Array.isArray(e[t]))e[t].push(r);else e[t]=[r]}t.exports=function e(o,t,r){var a=t.autotypenumbers;var n={};var i={};var s={};var l={};var u={};var c={};var f={};var d={};var v={};var p={};var h,m;for(h=0;h<r.length;h++){var g=r[h];if(!we(g,"cartesian")&&!we(g,"gl2d"))continue;var y;if(g.xaxis){y=xe(g.xaxis);ke(n,y,g)}else if(g.xaxes){for(m=0;m<g.xaxes.length;m++){ke(n,xe(g.xaxes[m]),g)}}var x;if(g.yaxis){x=xe(g.yaxis);ke(n,x,g)}else if(g.yaxes){for(m=0;m<g.yaxes.length;m++){ke(n,xe(g.yaxes[m]),g)}}if(g.type==="funnel"){if(g.orientation==="h"){if(y)i[y]=true;if(x)f[x]=true}else{if(x)s[x]=true}}else if(g.type==="image"){if(x)d[x]=true;if(y)d[y]=true}else{if(x){u[x]=true;c[x]=true}if(!we(g,"carpet")||g.type==="carpet"&&!g._cheater){if(y)l[y]=true}}if(g.type==="carpet"&&g._cheater){if(y)i[y]=true}if(we(g,"2dMap")){v[y]=true;v[x]=true}if(we(g,"oriented")){var b=g.orientation==="h"?x:y;p[b]=true}}var _=t._subplots;var w=_.xaxis;var T=_.yaxis;var k=se.simpleMap(w,xe);var M=se.simpleMap(T,xe);var A=k.concat(M);var S=le.background;if(w.length&&T.length){S=se.coerce(o,t,de,"plot_bgcolor")}var E=le.combine(S,t.paper_bgcolor);var L;var C;var D;var O;var I;function P(){var e=n[L]||[];I._traceIndices=e.map(function(e){return e._expandedIndex});I._annIndices=[];I._shapeIndices=[];I._imgIndices=[];I._subplotsWith=[];I._counterAxes=[];I._name=I._attr=L;I._id=C}function R(e,t){return se.coerce(O,I,ve,e,t)}function N(e,t){return se.coerce2(O,I,ve,e,t)}function z(e){return e==="x"?T:w}function F(e,t){var r=e==="x"?k:M;var a=[];for(var n=0;n<r.length;n++){var i=r[n];if(i!==t&&!(o[i]||{}).overlaying){a.push(be(i))}}return a}var j={x:z("x"),y:z("y")};var H=j.x.concat(j.y);var B={};var q=[];function U(){var e=O.matches;if(_e.test(e)&&H.indexOf(e)===-1){B[e]=O.type;q=Object.keys(B)}}var Y=ce(o,t);var V=ue(Y);for(h=0;h<A.length;h++){L=A[h];C=be(L);D=L.charAt(0);if(!se.isPlainObject(o[L])){o[L]={}}O=o[L];I=fe.newContainer(t,L,D+"axis");P();var G=D==="x"&&!l[L]&&i[L]||D==="y"&&!u[L]&&s[L];var W=D==="y"&&(!c[L]&&f[L]||d[L]);var $={letter:D,font:t.font,outerTicks:v[L],showGrid:!p[L],data:n[L]||[],bgColor:E,calendar:t.calendar,automargin:true,visibleDflt:G,reverseDflt:W,autotypenumbersDflt:a,splomStash:((t._splomAxes||{})[D]||{})[C]};R("uirevision",t.uirevision);pe(O,I,R,$);he(O,I,R,$,t);var Z=V&&D===Y.charAt(0);var X=N("spikecolor",V?I.color:undefined);var J=N("spikethickness",V?1.5:undefined);var K=N("spikedash",V?"dot":undefined);var Q=N("spikemode",V?"across":undefined);var ee=N("spikesnap");var te=R("showspikes",!!Z||!!X||!!J||!!K||!!Q||!!ee);if(!te){delete I.spikecolor;delete I.spikethickness;delete I.spikedash;delete I.spikemode;delete I.spikesnap}ge(O,I,R,{letter:D,counterAxes:j[D],overlayableAxes:F(D,L),grid:t.grid});R("title.standoff");U();I._input=O}h=0;while(h<q.length){C=q[h++];L=xe(C);D=L.charAt(0);if(!se.isPlainObject(o[L])){o[L]={}}O=o[L];I=fe.newContainer(t,L,D+"axis");P();var re={letter:D,font:t.font,outerTicks:v[L],showGrid:!p[L],data:[],bgColor:E,calendar:t.calendar,automargin:true,visibleDflt:false,reverseDflt:false,autotypenumbersDflt:a,splomStash:((t._splomAxes||{})[D]||{})[C]};R("uirevision",t.uirevision);I.type=B[C]||"linear";he(O,I,R,re,t);ge(O,I,R,{letter:D,counterAxes:j[D],overlayableAxes:F(D,L),grid:t.grid});R("fixedrange");U();I._input=O}var ae=Te("rangeslider","handleDefaults");var ne=Te("rangeselector","handleDefaults");for(h=0;h<k.length;h++){L=k[h];O=o[L];I=t[L];ae(o,t,L);if(I.type==="date"){ne(O,I,t,M,I.calendar)}R("fixedrange")}for(h=0;h<M.length;h++){L=M[h];O=o[L];I=t[L];var ie=t[xe(I.anchor)];var oe=Te("rangeslider","isVisible")(ie);R("fixedrange",oe)}me.handleDefaults(o,t,{axIds:H.concat(q).sort(ye.idSort),axHasImage:d})}},{"../../components/color":155,"../../components/fx/helpers":191,"../../components/fx/hovermode_defaults":194,"../../lib":285,"../../plot_api/plot_template":320,"../../registry":373,"../layout_attributes":364,"./axis_defaults":333,"./axis_ids":335,"./constants":338,"./constraints":339,"./layout_attributes":346,"./position_defaults":349,"./type_defaults":357}],348:[function(e,t,r){"use strict";var g=e("tinycolor2").mix;var y=e("../../components/color/attributes").lightFraction;var x=e("../../lib");t.exports=function e(r,a,t,n){n=n||{};var i=n.dfltColor;function o(e,t){return x.coerce2(r,a,n.attributes,e,t)}var s=o("linecolor",i);var l=o("linewidth");var u=t("showline",n.showLine||!!s||!!l);if(!u){delete a.linecolor;delete a.linewidth}var c=g(i,n.bgColor,n.blend||y).toRgbString();var f=o("gridcolor",c);var d=o("gridwidth");var v=t("showgrid",n.showGrid||!!f||!!d);if(!v){delete a.gridcolor;delete a.gridwidth}if(!n.noZeroLine){var p=o("zerolinecolor",i);var h=o("zerolinewidth");var m=t("zeroline",n.showGrid||!!p||!!h);if(!m){delete a.zerolinecolor;delete a.zerolinewidth}}}},{"../../components/color/attributes":154,"../../lib":285,tinycolor2:119}],349:[function(e,t,r){"use strict";var m=e("fast-isnumeric");var g=e("../../lib");t.exports=function e(t,r,a,n){var i=n.counterAxes||[];var o=n.overlayableAxes||[];var s=n.letter;var l=n.grid;var u,c,f,d;if(l){c=l._domains[s][l._axisMap[r._id]];u=l._anchors[r._id];if(c){f=l[s+"side"].split(" ")[0];d=l.domain[s][f==="right"||f==="top"?1:0]}}c=c||[0,1];u=u||(m(t.position)?"free":i[0]||"free");f=f||(s==="x"?"bottom":"left");d=d||0;var v=g.coerce(t,r,{anchor:{valType:"enumerated",values:["free"].concat(i),dflt:u}},"anchor");if(v==="free")a("position",d);g.coerce(t,r,{side:{valType:"enumerated",values:s==="x"?["bottom","top"]:["left","right"],dflt:f}},"side");var p=false;if(o.length){p=g.coerce(t,r,{overlaying:{valType:"enumerated",values:[false].concat(o),dflt:false}},"overlaying")}if(!p){var h=a("domain",c);if(h[0]>h[1]-1/4096)r.domain=c;g.noneOrAll(t.domain,r.domain,c)}a("layer");return r}},{"../../lib":285,"fast-isnumeric":31}],350:[function(e,t,r){"use strict";var o=e("../../constants/alignment").FROM_BL;t.exports=function e(t,r,a){if(a===undefined){a=o[t.constraintoward||"center"]}var n=[t.r2l(t.range[0]),t.r2l(t.range[1])];var i=n[0]+(n[1]-n[0])*a;t.range=t._input.range=[t.l2r(i+(n[0]-i)*r),t.l2r(i+(n[1]-i)*r)];t.setScale()}},{"../../constants/alignment":260}],351:[function(e,t,r){"use strict";var n=e("polybooljs");var m=e("../../registry");var G=e("../../components/drawing").dashStyle;var W=e("../../components/color");var $=e("../../components/fx");var i=e("../../components/fx/helpers").makeEventData;var a=e("../../components/dragelement/helpers");var Z=a.freeMode;var X=a.rectMode;var J=a.drawMode;var K=a.openMode;var Q=a.selectMode;var ee=e("../../components/shapes/draw_newshape/display_outlines");var te=e("../../components/shapes/draw_newshape/helpers").handleEllipse;var l=e("../../components/shapes/draw_newshape/newshapes");var re=e("../../lib");var u=e("../../lib/polygon");var ae=e("../../lib/throttle");var v=e("./axis_ids").getFromId;var g=e("../../lib/clear_gl_canvases");var y=e("../../plot_api/subroutines").redrawReglTraces;var ne=e("./constants");var ie=ne.MINSELECT;var oe=u.filter;var se=u.tester;var c=e("./handle_outline").clearSelect;var o=e("./helpers");var le=o.p2r;var ue=o.axValue;var ce=o.getTransform;function s(e,t,r,l,a){var u=Z(a);var c=X(a);var f=K(a);var d=J(a);var v=Q(a);var n=a==="drawline";var p=a==="drawcircle";var h=n||p;var m=l.gd;var g=m._fullLayout;var i=g._zoomlayer;var o=l.element.getBoundingClientRect();var s=l.plotinfo;var y=ce(s);var x=t-o.left;var b=r-o.top;g._calcInverseTransform(m);var _=re.apply3DTransform(g._invTransform)(x,b);x=_[0];b=_[1];var w=g._invScaleX;var T=g._invScaleY;var k=x;var M=b;var A="M"+x+","+b;var S=l.xaxes[0]._length;var E=l.yaxes[0]._length;var L=l.xaxes.concat(l.yaxes);var C=e.altKey&&!(J(a)&&f);var D,O,I,P;var R,N,z;ve(e,m,l);if(u){D=oe([[x,b]],ne.BENDPX)}var F=i.selectAll("path.select-outline-"+s.id).data(d?[0]:[1,2]);var j=g.newshape;F.enter().append("path").attr("class",function(e){return"select-outline select-outline-"+e+" select-outline-"+s.id}).style(d?{opacity:j.opacity/2,fill:f?undefined:j.fillcolor,stroke:j.line.color,"stroke-dasharray":G(j.line.dash,j.line.width),"stroke-width":j.line.width+"px"}:{}).attr("fill-rule",j.fillrule).classed("cursor-move",d?true:false).attr("transform",y).attr("d",A+"Z");var H=i.append("path").attr("class","zoombox-corners").style({fill:W.background,stroke:W.defaultLine,"stroke-width":1}).attr("transform",y).attr("d","M0,0Z");var B=g._uid+ne.SELECTID;var q=[];var U=he(m,l.xaxes,l.yaxes,l.subplot);function Y(e,t){return e-t}var V;if(s.fillRangeItems){V=s.fillRangeItems}else{if(c){V=function(e,t){var r=e.range={};for(R=0;R<L.length;R++){var a=L[R];var n=a._id.charAt(0);r[a._id]=[le(a,t[n+"min"]),le(a,t[n+"max"])].sort(Y)}}}else{V=function(e,t,r){var a=e.lassoPoints={};for(R=0;R<L.length;R++){var n=L[R];a[n._id]=r.filtered.map(ue(n))}}}}l.moveFn=function(e,t){k=Math.max(0,Math.min(S,w*e+x));M=Math.max(0,Math.min(E,T*t+b));var r=Math.abs(k-x);var a=Math.abs(M-b);if(c){var n;var i,o;if(v){var s=g.selectdirection;if(s==="any"){if(a<Math.min(r*.6,ie)){n="h"}else if(r<Math.min(a*.6,ie)){n="v"}else{n="d"}}else{n=s}switch(n){case"h":i=p?E/2:0;o=E;break;case"v":i=p?S/2:0;o=S;break}}if(d){switch(g.newshape.drawdirection){case"vertical":n="h";i=p?E/2:0;o=E;break;case"horizontal":n="v";i=p?S/2:0;o=S;break;case"ortho":if(r<a){n="h";i=b;o=M}else{n="v";i=x;o=k}break;default:n="d"}}if(n==="h"){P=h?te(p,[k,i],[k,o]):[[x,i],[x,o],[k,o],[k,i]];P.xmin=h?k:Math.min(x,k);P.xmax=h?k:Math.max(x,k);P.ymin=Math.min(i,o);P.ymax=Math.max(i,o);H.attr("d","M"+P.xmin+","+(b-ie)+"h-4v"+2*ie+"h4Z"+"M"+(P.xmax-1)+","+(b-ie)+"h4v"+2*ie+"h-4Z")}else if(n==="v"){P=h?te(p,[i,M],[o,M]):[[i,b],[i,M],[o,M],[o,b]];P.xmin=Math.min(i,o);P.xmax=Math.max(i,o);P.ymin=h?M:Math.min(b,M);P.ymax=h?M:Math.max(b,M);H.attr("d","M"+(x-ie)+","+P.ymin+"v-4h"+2*ie+"v4Z"+"M"+(x-ie)+","+(P.ymax-1)+"v4h"+2*ie+"v-4Z")}else if(n==="d"){P=h?te(p,[x,b],[k,M]):[[x,b],[x,M],[k,M],[k,b]];P.xmin=Math.min(x,k);P.xmax=Math.max(x,k);P.ymin=Math.min(b,M);P.ymax=Math.max(b,M);H.attr("d","M0,0Z")}}else if(u){D.addPt([k,M]);P=D.filtered}if(l.selectionDefs&&l.selectionDefs.length){I=ge(l.mergedPolygons,P,C);P.subtract=C;O=de(l.selectionDefs.concat([P]))}else{I=[P];O=se(P)}ee(xe(I,f),F,l);if(v){ae.throttle(B,ne.SELECTDELAY,function(){q=[];var e;var t=[];var r;for(R=0;R<U.length;R++){N=U[R];r=N._module.selectPoints(N,O);t.push(r);e=ye(r,N);if(q.length){for(var a=0;a<e.length;a++){q.push(e[a])}}else q=e}z={points:q};me(m,U,z);V(z,P,D);l.gd.emit("plotly_selecting",z)})}};l.clickFn=function(e,t){H.remove();if(m._fullLayout._activeShapeIndex>=0){m._fullLayout._deactivateShape(m);return}if(d)return;var r=g.clickmode;ae.done(B).then(function(){ae.clear(B);if(e===2){F.remove();for(R=0;R<U.length;R++){N=U[R];N._module.selectPoints(N,false)}me(m,U);pe(l);m.emit("plotly_deselect",null)}else{if(r.indexOf("select")>-1){fe(t,m,l.xaxes,l.yaxes,l.subplot,l,F)}if(r==="event"){m.emit("plotly_selected",undefined)}}$.click(m,t)}).catch(re.error)};l.doneFn=function(){H.remove();ae.done(B).then(function(){ae.clear(B);l.gd.emit("plotly_selected",z);if(P&&l.selectionDefs){P.subtract=C;l.selectionDefs.push(P);l.mergedPolygons.length=0;[].push.apply(l.mergedPolygons,I)}if(l.doneFnCompleted){l.doneFnCompleted(q)}}).catch(re.error);if(d){pe(l)}}}function fe(e,t,r,a,n,i,o){var s=t._hoverdata;var l=t._fullLayout;var u=l.clickmode;var c=u.indexOf("event")>-1;var f=[];var d,v,p,h,m;var g,y,x,b,_;if(L(s)){ve(e,t,i);d=he(t,r,a,n);var w=C(s,d);var T=w.pointNumbers.length>0;if(T?O(d,w):I(d)&&(y=D(w))){if(o)o.remove();for(_=0;_<d.length;_++){v=d[_];v._module.selectPoints(v,false)}me(t,d);pe(i);if(c){t.emit("plotly_deselect",null)}}else{x=e.shiftKey&&(y!==undefined?y:D(w));p=E(w.pointNumber,w.searchInfo,x);var k=i.selectionDefs.concat([p]);h=de(k);for(_=0;_<d.length;_++){m=d[_]._module.selectPoints(d[_],h);g=ye(m,d[_]);if(f.length){for(var M=0;M<g.length;M++){f.push(g[M])}}else f=g}b={points:f};me(t,d,b);if(p&&i){i.selectionDefs.push(p)}if(o){var A=i.mergedPolygons;var S=K(i.dragmode);ee(xe(A,S),o,i)}if(c){t.emit("plotly_selected",b)}}}}function E(e,t,r){return{pointNumber:e,searchInfo:t,subtract:r}}function f(e){return"pointNumber"in e&&"searchInfo"in e}function d(o){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(e,t,r,a){var n=o.searchInfo.cd[0].trace._expandedIndex;var i=a.cd[0].trace._expandedIndex;return i===n&&r===o.pointNumber},isRect:false,degenerate:false,subtract:o.subtract}}function de(e){var o=[];var t=f(e[0])?0:e[0][0][0];var r=t;var a=f(e[0])?0:e[0][0][1];var n=a;for(var i=0;i<e.length;i++){if(f(e[i])){o.push(d(e[i]))}else{var s=u.tester(e[i]);s.subtract=e[i].subtract;o.push(s);t=Math.min(t,s.xmin);r=Math.max(r,s.xmax);a=Math.min(a,s.ymin);n=Math.max(n,s.ymax)}}function l(e,t,r,a){var n=false;for(var i=0;i<o.length;i++){if(o[i].contains(e,t,r,a)){n=o[i].subtract===false}}return n}return{xmin:t,xmax:r,ymin:a,ymax:n,pts:[],contains:l,isRect:false,degenerate:false}}function ve(e,t,r){t._fullLayout._drawing=false;var a=t._fullLayout;var n=r.plotinfo;var i=r.dragmode;var o=a._lastSelectedSubplot&&a._lastSelectedSubplot===n.id;var s=(e.shiftKey||e.altKey)&&!(J(i)&&K(i));if(o&&s&&(n.selection&&n.selection.selectionDefs)&&!r.selectionDefs){r.selectionDefs=n.selection.selectionDefs;r.mergedPolygons=n.selection.mergedPolygons}else if(!s||!n.selection){pe(r)}if(!o){c(t);a._lastSelectedSubplot=n.id}}function pe(e){var t=e.dragmode;var r=e.plotinfo;var a=e.gd;if(a._fullLayout._activeShapeIndex>=0){a._fullLayout._deactivateShape(a)}if(J(t)){var n=a._fullLayout;var i=n._zoomlayer;var o=i.selectAll(".select-outline-"+r.id);if(o&&a._fullLayout._drawing){var s=l(o,e);if(s){m.call("_guiRelayout",a,{shapes:s})}a._fullLayout._drawing=false}}r.selection={};r.selection.selectionDefs=e.selectionDefs=[];r.selection.mergedPolygons=e.mergedPolygons=[]}function he(e,t,r,a){var n=[];var i=t.map(function(e){return e._id});var o=r.map(function(e){return e._id});var s,l,u;for(u=0;u<e.calcdata.length;u++){s=e.calcdata[u];l=s[0].trace;if(l.visible!==true||!l._module||!l._module.selectPoints)continue;if(a&&(l.subplot===a||l.geo===a)){n.push(d(l._module,s,t[0],r[0]))}else if(l.type==="splom"&&l._xaxes[i[0]]&&l._yaxes[o[0]]){var c=d(l._module,s,t[0],r[0]);c.scene=e._fullLayout._splomScenes[l.uid];n.push(c)}else if(l.type==="sankey"){var f=d(l._module,s,t[0],r[0]);n.push(f)}else{if(i.indexOf(l.xaxis)===-1)continue;if(o.indexOf(l.yaxis)===-1)continue;n.push(d(l._module,s,v(e,l.xaxis),v(e,l.yaxis)))}}return n;function d(e,t,r,a){return{_module:e,cd:t,xaxis:r,yaxis:a}}}function L(e){return e&&Array.isArray(e)&&e[0].hoverOnBox!==true}function C(e,t){var r=e[0];var a=-1;var n=[];var i,o;for(o=0;o<t.length;o++){i=t[o];if(r.fullData._expandedIndex===i.cd[0].trace._expandedIndex){if(r.hoverOnBox===true){break}if(r.pointNumber!==undefined){a=r.pointNumber}else if(r.binNumber!==undefined){a=r.binNumber;n=r.pointNumbers}break}}return{pointNumber:a,pointNumbers:n,searchInfo:i}}function D(e){var t=e.searchInfo.cd[0].trace;var r=e.pointNumber;var a=e.pointNumbers;var n=a.length>0;var i=n?a[0]:r;return t.selectedpoints?t.selectedpoints.indexOf(i)>-1:false}function O(e,t){var r=[];var a,n,i,o;for(o=0;o<e.length;o++){a=e[o];if(a.cd[0].trace.selectedpoints&&a.cd[0].trace.selectedpoints.length>0){r.push(a)}}if(r.length===1){i=r[0]===t.searchInfo;if(i){n=t.searchInfo.cd[0].trace;if(n.selectedpoints.length===t.pointNumbers.length){for(o=0;o<t.pointNumbers.length;o++){if(n.selectedpoints.indexOf(t.pointNumbers[o])<0){return false}}return true}}}return false}function I(e){var t=0;var r,a,n;for(n=0;n<e.length;n++){r=e[n];a=r.cd[0].trace;if(a.selectedpoints){if(a.selectedpoints.length>1)return false;t+=a.selectedpoints.length;if(t>1)return false}}return t===1}function me(e,t,r){var a,n,i,o;for(a=0;a<t.length;a++){var s=t[a].cd[0].trace._fullInput;var l=e._fullLayout._tracePreGUI[s.uid]||{};if(l.selectedpoints===undefined){l.selectedpoints=s._input.selectedpoints||null}}if(r){var u=r.points||[];for(a=0;a<t.length;a++){o=t[a].cd[0].trace;o._input.selectedpoints=o._fullInput.selectedpoints=[];if(o._fullInput!==o)o.selectedpoints=[]}for(a=0;a<u.length;a++){var c=u[a];var f=c.data;var d=c.fullData;if(c.pointIndices){[].push.apply(f.selectedpoints,c.pointIndices);if(o._fullInput!==o){[].push.apply(d.selectedpoints,c.pointIndices)}}else{f.selectedpoints.push(c.pointIndex);if(o._fullInput!==o){d.selectedpoints.push(c.pointIndex)}}}}else{for(a=0;a<t.length;a++){o=t[a].cd[0].trace;delete o.selectedpoints;delete o._input.selectedpoints;if(o._fullInput!==o){delete o._fullInput.selectedpoints}}}var v=false;for(a=0;a<t.length;a++){n=t[a];i=n.cd;o=i[0].trace;if(m.traceIs(o,"regl")){v=true}var p=n._module;var h=p.styleOnSelect||p.style;if(h){h(e,i,i[0].node3);if(i[0].nodeRangePlot3)h(e,i,i[0].nodeRangePlot3)}}if(v){g(e);y(e)}}function ge(e,t,r){var a;if(r){a=n.difference({regions:e,inverted:false},{regions:[t],inverted:false});return a.regions}a=n.union({regions:e,inverted:false},{regions:[t],inverted:false});return a.regions}function ye(e,t){if(Array.isArray(e)){var r=t.cd;var a=t.cd[0].trace;for(var n=0;n<e.length;n++){e[n]=i(e[n],a,r)}}return e}function xe(e,t){var r=[];for(var a=0;a<e.length;a++){r[a]=[];for(var n=0;n<e[a].length;n++){r[a][n]=[];r[a][n][0]=n?"L":"M";for(var i=0;i<e[a][n].length;i++){r[a][n].push(e[a][n][i])}}if(!t){r[a].push(["Z",r[a][0][1],r[a][0][2]])}}return r}t.exports={prepSelect:s,clearSelect:c,clearSelectionsCache:pe,selectOnClick:fe}},{"../../components/color":155,"../../components/dragelement/helpers":173,"../../components/drawing":177,"../../components/fx":195,"../../components/fx/helpers":191,"../../components/shapes/draw_newshape/display_outlines":243,"../../components/shapes/draw_newshape/helpers":244,"../../components/shapes/draw_newshape/newshapes":245,"../../lib":285,"../../lib/clear_gl_canvases":273,"../../lib/polygon":297,"../../lib/throttle":308,"../../plot_api/subroutines":321,"../../registry":373,"./axis_ids":335,"./constants":338,"./handle_outline":342,"./helpers":343,polybooljs:73}],352:[function(e,t,r){"use strict";var b=e("@plotly/d3");var _=e("d3-time-format").utcFormat;var w=e("fast-isnumeric");var T=e("../../lib");var k=T.cleanNumber;var M=T.ms2DateTime;var A=T.dateTime2ms;var S=T.ensureNumber;var E=T.isArrayOrTypedArray;var a=e("../../constants/numerical");var L=a.FP_SAFE;var C=a.BADNUM;var D=a.LOG_CLIP;var O=a.ONEWEEK;var I=a.ONEDAY;var P=a.ONEHOUR;var R=a.ONEMIN;var N=a.ONESEC;var z=e("./axis_ids");var F=e("./constants");var j=F.HOUR_PATTERN;var H=F.WEEKDAY_PATTERN;function B(e){return Math.pow(10,e)}function q(e){return e!==null&&e!==undefined}t.exports=function e(y,p){p=p||{};var h=y._id||"x";var m=h.charAt(0);function r(e,t){if(e>0)return Math.log(e)/Math.LN10;else if(e<=0&&t&&y.range&&y.range.length===2){var r=y.range[0];var a=y.range[1];return.5*(r+a-2*D*Math.abs(r-a))}else return C}function a(e,t,r,a){if((a||{}).msUTC&&w(e)){return+e}var n=A(e,r||y.calendar);if(n===C){if(w(e)){e=+e;var i=Math.floor(T.mod(e+.05,1)*10);var o=Math.round(e-i/10);n=A(new Date(o))+i/10}else return C}return n}function n(e,t,r){return M(e,t,r||y.calendar)}function t(e){return y._categories[Math.round(e)]}function g(e){if(q(e)){if(y._categoriesMap===undefined){y._categoriesMap={}}if(y._categoriesMap[e]!==undefined){return y._categoriesMap[e]}else{y._categories.push(typeof e==="number"?String(e):e);var t=y._categories.length-1;y._categoriesMap[e]=t;return t}}return C}function f(e,t){var r=new Array(t);for(var a=0;a<t;a++){var n=(e[0]||[])[a];var i=(e[1]||[])[a];r[a]=o([n,i])}return r}function o(e){if(y._categoriesMap){return y._categoriesMap[e]}}function i(e){var t=o(e);if(t!==undefined)return t;if(w(e))return+e}function s(e){return w(e)?+e:o(e)}function c(e,t,r){return b.round(r+t*e,2)}function l(e,t,r){return(e-r)/t}var d=function e(t){if(!w(t))return C;return c(t,y._m,y._b)};var u=function(e){return l(e,y._m,y._b)};if(y.rangebreaks){var v=m==="y";d=function(e){if(!w(e))return C;var t=y._rangebreaks.length;if(!t)return c(e,y._m,y._b);var r=v;if(y.range[0]>y.range[1])r=!r;var a=r?-1:1;var n=a*e;var i=0;for(var o=0;o<t;o++){var s=a*y._rangebreaks[o].min;var l=a*y._rangebreaks[o].max;if(n<s)break;if(n>l)i=o+1;else{i=n<(s+l)/2?o:o+1;break}}var u=y._B[i]||0;if(!isFinite(u))return 0;return c(e,y._m2,u)};u=function(e){var t=y._rangebreaks.length;if(!t)return l(e,y._m,y._b);var r=0;for(var a=0;a<t;a++){if(e<y._rangebreaks[a].pmin)break;if(e>y._rangebreaks[a].pmax)r=a+1}return l(e,y._m2,y._B[r])}}y.c2l=y.type==="log"?r:S;y.l2c=y.type==="log"?B:S;y.l2p=d;y.p2l=u;y.c2p=y.type==="log"?function(e,t){return d(r(e,t))}:d;y.p2c=y.type==="log"?function(e){return B(u(e))}:u;if(["linear","-"].indexOf(y.type)!==-1){y.d2r=y.r2d=y.d2c=y.r2c=y.d2l=y.r2l=k;y.c2d=y.c2r=y.l2d=y.l2r=S;y.d2p=y.r2p=function(e){return y.l2p(k(e))};y.p2d=y.p2r=u;y.cleanPos=S}else if(y.type==="log"){y.d2r=y.d2l=function(e,t){return r(k(e),t)};y.r2d=y.r2c=function(e){return B(k(e))};y.d2c=y.r2l=k;y.c2d=y.l2r=S;y.c2r=r;y.l2d=B;y.d2p=function(e,t){return y.l2p(y.d2r(e,t))};y.p2d=function(e){return B(u(e))};y.r2p=function(e){return y.l2p(k(e))};y.p2r=u;y.cleanPos=S}else if(y.type==="date"){y.d2r=y.r2d=T.identity;y.d2c=y.r2c=y.d2l=y.r2l=a;y.c2d=y.c2r=y.l2d=y.l2r=n;y.d2p=y.r2p=function(e,t,r){return y.l2p(a(e,0,r))};y.p2d=y.p2r=function(e,t,r){return n(u(e),t,r)};y.cleanPos=function(e){return T.cleanDate(e,C,y.calendar)}}else if(y.type==="category"){y.d2c=y.d2l=g;y.r2d=y.c2d=y.l2d=t;y.d2r=y.d2l_noadd=i;y.r2c=function(e){var t=s(e);return t!==undefined?t:y.fraction2r(.5)};y.l2r=y.c2r=S;y.r2l=s;y.d2p=function(e){return y.l2p(y.r2c(e))};y.p2d=function(e){return t(u(e))};y.r2p=y.d2p;y.p2r=u;y.cleanPos=function(e){if(typeof e==="string"&&e!=="")return e;return S(e)}}else if(y.type==="multicategory"){y.r2d=y.c2d=y.l2d=t;y.d2r=y.d2l_noadd=i;y.r2c=function(e){var t=i(e);return t!==undefined?t:y.fraction2r(.5)};y.r2c_just_indices=o;y.l2r=y.c2r=S;y.r2l=i;y.d2p=function(e){return y.l2p(y.r2c(e))};y.p2d=function(e){return t(u(e))};y.r2p=y.d2p;y.p2r=u;y.cleanPos=function(e){if(Array.isArray(e)||typeof e==="string"&&e!=="")return e;return S(e)};y.setupMultiCategory=function(e){var t=y._traceIndices;var r,a;var n=y._matchGroup;if(n&&y._categories.length===0){for(var i in n){if(i!==h){var o=p[z.id2name(i)];t=t.concat(o._traceIndices)}}}var s=[[0,{}],[0,{}]];var l=[];for(r=0;r<t.length;r++){var u=e[t[r]];if(m in u){var c=u[m];var f=u._length||T.minRowLength(c);if(E(c[0])&&E(c[1])){for(a=0;a<f;a++){var d=c[0][a];var v=c[1][a];if(q(d)&&q(v)){l.push([d,v]);if(!(d in s[0][1])){s[0][1][d]=s[0][0]++}if(!(v in s[1][1])){s[1][1][v]=s[1][0]++}}}}}}l.sort(function(e,t){var r=s[0][1];var a=r[e[0]]-r[t[0]];if(a)return a;var n=s[1][1];return n[e[1]]-n[t[1]]});for(r=0;r<l.length;r++){g(l[r])}}}y.fraction2r=function(e){var t=y.r2l(y.range[0]);var r=y.r2l(y.range[1]);return y.l2r(t+e*(r-t))};y.r2fraction=function(e){var t=y.r2l(y.range[0]);var r=y.r2l(y.range[1]);return(y.r2l(e)-t)/(r-t)};y.cleanRange=function(e,t){if(!t)t={};if(!e)e="range";var r=T.nestedProperty(y,e).get();var a,n;if(y.type==="date")n=T.dfltRange(y.calendar);else if(m==="y")n=F.DFLTRANGEY;else n=t.dfltRange||F.DFLTRANGEX;n=n.slice();if(y.rangemode==="tozero"||y.rangemode==="nonnegative"){n[0]=0}if(!r||r.length!==2){T.nestedProperty(y,e).set(n);return}if(y.type==="date"&&!y.autorange){r[0]=T.cleanDate(r[0],C,y.calendar);r[1]=T.cleanDate(r[1],C,y.calendar)}for(a=0;a<2;a++){if(y.type==="date"){if(!T.isDateTime(r[a],y.calendar)){y[e]=n;break}if(y.r2l(r[0])===y.r2l(r[1])){var i=T.constrain(y.r2l(r[0]),T.MIN_MS+1e3,T.MAX_MS-1e3);r[0]=y.l2r(i-1e3);r[1]=y.l2r(i+1e3);break}}else{if(!w(r[a])){if(w(r[1-a])){r[a]=r[1-a]*(a?10:.1)}else{y[e]=n;break}}if(r[a]<-L)r[a]=-L;else if(r[a]>L)r[a]=L;if(r[0]===r[1]){var o=Math.max(1,Math.abs(r[0]*1e-6));r[0]-=o;r[1]+=o}}}};y.setScale=function(e){var t=p._size;if(y.overlaying){var r=z.getFromId({_fullLayout:p},y.overlaying);y.domain=r.domain}var a=e&&y._r?"_r":"range";var n=y.calendar;y.cleanRange(a);var i=y.r2l(y[a][0],n);var o=y.r2l(y[a][1],n);var s=m==="y";if(s){y._offset=t.t+(1-y.domain[1])*t.h;y._length=t.h*(y.domain[1]-y.domain[0]);y._m=y._length/(i-o);y._b=-y._m*o}else{y._offset=t.l+y.domain[0]*t.w;y._length=t.w*(y.domain[1]-y.domain[0]);y._m=y._length/(o-i);y._b=-y._m*i}y._rangebreaks=[];y._lBreaks=0;y._m2=0;y._B=[];if(y.rangebreaks){var l,u;y._rangebreaks=y.locateBreaks(Math.min(i,o),Math.max(i,o));if(y._rangebreaks.length){for(l=0;l<y._rangebreaks.length;l++){u=y._rangebreaks[l];y._lBreaks+=Math.abs(u.max-u.min)}var c=s;if(i>o)c=!c;if(c)y._rangebreaks.reverse();var f=c?-1:1;y._m2=f*y._length/(Math.abs(o-i)-y._lBreaks);y._B.push(-y._m2*(s?o:i));for(l=0;l<y._rangebreaks.length;l++){u=y._rangebreaks[l];y._B.push(y._B[y._B.length-1]-f*y._m2*(u.max-u.min))}for(l=0;l<y._rangebreaks.length;l++){u=y._rangebreaks[l];u.pmin=d(u.min);u.pmax=d(u.max)}}}if(!isFinite(y._m)||!isFinite(y._b)||y._length<0){p._replotting=false;throw new Error("Something went wrong with axis scaling")}};y.maskBreaks=function(e){var t=y.rangebreaks||[];var r,a,n,i,o;if(!t._cachedPatterns){t._cachedPatterns=t.map(function(e){return e.enabled&&e.bounds?T.simpleMap(e.bounds,e.pattern?k:y.d2c):null})}if(!t._cachedValues){t._cachedValues=t.map(function(e){return e.enabled&&e.values?T.simpleMap(e.values,y.d2c).sort(T.sorterAsc):null})}for(var s=0;s<t.length;s++){var l=t[s];if(l.enabled){if(l.bounds){var u=l.pattern;r=t._cachedPatterns[s];a=r[0];n=r[1];switch(u){case H:o=new Date(e);i=o.getUTCDay();if(a>n){n+=7;if(i<a)i+=7}break;case j:o=new Date(e);var c=o.getUTCHours();var f=o.getUTCMinutes();var d=o.getUTCSeconds();var v=o.getUTCMilliseconds();i=c+(f/60+d/3600+v/36e5);if(a>n){n+=24;if(i<a)i+=24}break;case"":i=e;break}if(i>=a&&i<n)return C}else{var p=t._cachedValues[s];for(var h=0;h<p.length;h++){a=p[h];n=a+l.dvalue;if(e>=a&&e<n)return C}}}}return e};y.locateBreaks=function(i,o){var e,t,r,a;var s=[];if(!y.rangebreaks)return s;var n=y.rangebreaks.slice().sort(function(e,t){if(e.pattern===H&&t.pattern===j)return-1;if(t.pattern===H&&e.pattern===j)return 1;return 0});var l=function(e,t){e=T.constrain(e,i,o);t=T.constrain(t,i,o);if(e===t)return;var r=true;for(var a=0;a<s.length;a++){var n=s[a];if(e<n.max&&t>=n.min){if(e<n.min){n.min=e}if(t>n.max){n.max=t}r=false}}if(r){s.push({min:e,max:t})}};for(e=0;e<n.length;e++){var u=n[e];if(u.enabled){if(u.bounds){var c=i;var f=o;if(u.pattern){c=Math.floor(c)}t=T.simpleMap(u.bounds,u.pattern?k:y.r2l);r=t[0];a=t[1];var d=new Date(c);var v;var p;switch(u.pattern){case H:p=O;v=((a<r?7:0)+(a-r))*I;c+=r*I-(d.getUTCDay()*I+d.getUTCHours()*P+d.getUTCMinutes()*R+d.getUTCSeconds()*N+d.getUTCMilliseconds());break;case j:p=I;v=((a<r?24:0)+(a-r))*P;c+=r*P-(d.getUTCHours()*P+d.getUTCMinutes()*R+d.getUTCSeconds()*N+d.getUTCMilliseconds());break;default:c=Math.min(t[0],t[1]);f=Math.max(t[0],t[1]);p=f-c;v=p}for(var h=c;h<f;h+=p){l(h,h+v)}}else{var m=T.simpleMap(u.values,y.d2c);for(var g=0;g<m.length;g++){r=m[g];a=r+u.dvalue;l(r,a)}}}}s.sort(function(e,t){return e.min-t.min});return s};y.makeCalcdata=function(e,t,r){var a,n,i,o;var s=y.type;var l=s==="date"&&e[t+"calendar"];if(t in e){a=e[t];o=e._length||T.minRowLength(a);if(T.isTypedArray(a)&&(s==="linear"||s==="log")){if(o===a.length){return a}else if(a.subarray){return a.subarray(0,o)}}if(s==="multicategory"){return f(a,o)}n=new Array(o);for(i=0;i<o;i++){n[i]=y.d2c(a[i],0,l,r)}}else{var u=t+"0"in e?y.d2c(e[t+"0"],0,l):0;var c=e["d"+t]?Number(e["d"+t]):1;a=e[{x:"y",y:"x"}[t]];o=e._length||a.length;n=new Array(o);for(i=0;i<o;i++){n[i]=u+i*c}}if(y.rangebreaks){for(i=0;i<o;i++){n[i]=y.maskBreaks(n[i])}}return n};y.isValidRange=function(e){return Array.isArray(e)&&e.length===2&&w(y.r2l(e[0]))&&w(y.r2l(e[1]))};y.isPtWithinRange=function(e,t){var r=y.c2l(e[m],null,t);var a=y.r2l(y.range[0]);var n=y.r2l(y.range[1]);if(a<n){return a<=r&&r<=n}else{return n<=r&&r<=a}};y._emptyCategories=function(){y._categories=[];y._categoriesMap={}};y.clearCalc=function(){var e=y._matchGroup;if(e){var t=null;var r=null;for(var a in e){var n=p[z.id2name(a)];if(n._categories){t=n._categories;r=n._categoriesMap;break}}if(t&&r){y._categories=t;y._categoriesMap=r}else{y._emptyCategories()}}else{y._emptyCategories()}if(y._initialCategories){for(var i=0;i<y._initialCategories.length;i++){g(y._initialCategories[i])}}};y.sortByInitialCategories=function(){var e=[];y._emptyCategories();if(y._initialCategories){for(var t=0;t<y._initialCategories.length;t++){g(y._initialCategories[t])}}e=e.concat(y._traceIndices);var r=y._matchGroup;for(var a in r){if(h===a)continue;var n=p[z.id2name(a)];n._categories=y._categories;n._categoriesMap=y._categoriesMap;e=e.concat(n._traceIndices)}return e};var x=p._d3locale;if(y.type==="date"){y._dateFormat=x?x.timeFormat:_;y._extraFormat=p._extraFormat}y._separators=p.separators;y._numFormat=x?x.numberFormat:b.format;delete y._minDtick;delete y._forceTick0}},{"../../constants/numerical":265,"../../lib":285,"./axis_ids":335,"./constants":338,"@plotly/d3":20,"d3-time-format":29,"fast-isnumeric":31}],353:[function(e,t,r){"use strict";var p=e("../../lib");var h=e("../../components/color").contrast;var m=e("./layout_attributes");var g=e("../array_container_defaults");t.exports=function e(t,r,a,n,i,o){if(!o||o.pass===1){s(t,r,a,n,i)}if(!o||o.pass===2){l(t,r,a,n,i)}};function s(e,t,r,a,n){var i=y(e);var o=r("tickprefix");if(o)r("showtickprefix",i);var s=r("ticksuffix",n.tickSuffixDflt);if(s)r("showticksuffix",i)}function l(e,t,r,a,n){var i=y(e);var o=r("tickprefix");if(o)r("showtickprefix",i);var s=r("ticksuffix",n.tickSuffixDflt);if(s)r("showticksuffix",i);var l=r("showticklabels");if(l){var u=n.font||{};var c=t.color;var f=t.ticklabelposition||"";var d=f.indexOf("inside")!==-1?h(n.bgColor):c&&c!==m.color.dflt?c:u.color;p.coerceFont(r,"tickfont",{family:u.family,size:u.size,color:d});r("tickangle");if(a!=="category"){var v=r("tickformat");g(e,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:x});if(!t.tickformatstops.length){delete t.tickformatstops}if(!v&&a!=="date"){r("showexponent",i);r("exponentformat");r("minexponent");r("separatethousands")}}}}function y(t){var e=["showexponent","showtickprefix","showticksuffix"];var r=e.filter(function(e){return t[e]!==undefined});var a=function(e){return t[e]===t[r[0]]};if(r.every(a)||r.length===1){return t[r[0]]}}function x(r,a){function e(e,t){return p.coerce(r,a,m.tickformatstops,e,t)}var t=e("enabled");if(t){e("dtickrange");e("value")}}},{"../../components/color":155,"../../lib":285,"../array_container_defaults":326,"./layout_attributes":346}],354:[function(e,t,r){"use strict";var u=e("../../lib");var c=e("./layout_attributes");t.exports=function e(t,r,a,n){var i=u.coerce2(t,r,c,"ticklen");var o=u.coerce2(t,r,c,"tickwidth");var s=u.coerce2(t,r,c,"tickcolor",r.color);var l=a("ticks",n.outerTicks||i||o||s?"outside":"");if(!l){delete r.ticklen;delete r.tickwidth;delete r.tickcolor}}},{"../../lib":285,"./layout_attributes":346}],355:[function(e,t,r){"use strict";var v=e("./clean_ticks");var p=e("../../lib").isArrayOrTypedArray;t.exports=function e(r,a,t,n){function i(e){var t=r[e];return t!==undefined?t:(a._template||{})[e]}var o=i("tick0");var s=i("dtick");var l=i("tickvals");var u=p(l)?"array":s?"linear":"auto";var c=t("tickmode",u);if(c==="auto")t("nticks");else if(c==="linear"){var f=a.dtick=v.dtick(s,n);a.tick0=v.tick0(o,n,a.calendar,f)}else if(n!=="multicategory"){var d=t("tickvals");if(d===undefined)a.tickmode="auto";else t("ticktext")}}},{"../../lib":285,"./clean_ticks":337}],356:[function(e,t,r){"use strict";var h=e("@plotly/d3");var m=e("../../registry");var S=e("../../lib");var E=e("../../components/drawing");var L=e("./axes");t.exports=function e(A,i,a,t){var n=A._fullLayout;if(i.length===0){L.redrawComponents(A);return}function o(e){var t=e.xaxis;var r=e.yaxis;n._defs.select("#"+e.clipId+"> rect").call(E.setTranslate,0,0).call(E.setScale,1,1);e.plot.call(E.setTranslate,t._offset,r._offset).call(E.setScale,1,1);var a=e.plot.selectAll(".scatterlayer .trace");a.selectAll(".point").call(E.setPointGroupScale,1,1);a.selectAll(".textpoint").call(E.setTextPointsScale,1,1);a.call(E.hideOutsideRangePoints,e)}function s(e,t){var r=e.plotinfo;var a=r.xaxis;var n=r.yaxis;var i=a._length;var o=n._length;var s=!!e.xr1;var l=!!e.yr1;var u=[];if(s){var c=S.simpleMap(e.xr0,a.r2l);var f=S.simpleMap(e.xr1,a.r2l);var d=c[1]-c[0];var v=f[1]-f[0];u[0]=(c[0]*(1-t)+t*f[0]-c[0])/(c[1]-c[0])*i;u[2]=i*(1-t+t*v/d);a.range[0]=a.l2r(c[0]*(1-t)+t*f[0]);a.range[1]=a.l2r(c[1]*(1-t)+t*f[1])}else{u[0]=0;u[2]=i}if(l){var p=S.simpleMap(e.yr0,n.r2l);var h=S.simpleMap(e.yr1,n.r2l);var m=p[1]-p[0];var g=h[1]-h[0];u[1]=(p[1]*(1-t)+t*h[1]-p[1])/(p[0]-p[1])*o;u[3]=o*(1-t+t*g/m);n.range[0]=a.l2r(p[0]*(1-t)+t*h[0]);n.range[1]=n.l2r(p[1]*(1-t)+t*h[1])}else{u[1]=0;u[3]=o}L.drawOne(A,a,{skipTitle:true});L.drawOne(A,n,{skipTitle:true});L.redrawComponents(A,[a._id,n._id]);var y=s?i/u[2]:1;var x=l?o/u[3]:1;var b=s?u[0]:0;var _=l?u[1]:0;var w=s?u[0]/u[2]*i:0;var T=l?u[1]/u[3]*o:0;var k=a._offset-w;var M=n._offset-T;r.clipRect.call(E.setTranslate,b,_).call(E.setScale,1/y,1/x);r.plot.call(E.setTranslate,k,M).call(E.setScale,y,x);E.setPointGroupScale(r.zoomScalePts,1/y,1/x);E.setTextPointsScale(r.zoomScaleTxt,1/y,1/x)}var l;if(t){l=t()}function u(){var e={};for(var t=0;t<i.length;t++){var r=i[t];var a=r.plotinfo.xaxis;var n=r.plotinfo.yaxis;if(r.xr1)e[a._name+".range"]=r.xr1.slice();if(r.yr1)e[n._name+".range"]=r.yr1.slice()}l&&l();return m.call("relayout",A,e).then(function(){for(var e=0;e<i.length;e++){o(i[e].plotinfo)}})}function r(){var e={};for(var t=0;t<i.length;t++){var r=i[t];var a=r.plotinfo.xaxis;var n=r.plotinfo.yaxis;if(r.xr0)e[a._name+".range"]=r.xr0.slice();if(r.yr0)e[n._name+".range"]=r.yr0.slice()}return m.call("relayout",A,e).then(function(){for(var e=0;e<i.length;e++){o(i[e].plotinfo)}})}var c,f,d;var v=h.ease(a.easing);A._transitionData._interruptCallbacks.push(function(){window.cancelAnimationFrame(d);d=null;return r()});function p(){f=Date.now();var e=Math.min(1,(f-c)/a.duration);var t=v(e);for(var r=0;r<i.length;r++){s(i[r],t)}if(f-c>a.duration){u();d=window.cancelAnimationFrame(p)}else{d=window.requestAnimationFrame(p)}}c=Date.now();d=window.requestAnimationFrame(p);return Promise.resolve()}},{"../../components/drawing":177,"../../lib":285,"../../registry":373,"./axes":331,"@plotly/d3":20}],357:[function(e,t,r){"use strict";var p=e("../../registry").traceIs;var h=e("./axis_autotype");t.exports=function e(t,r,a,n){a("autotypenumbers",n.autotypenumbersDflt);var i=a("type",(n.splomStash||{}).type);if(i==="-"){o(r,n.data);if(r.type==="-"){r.type="linear"}else{t.type=r.type}}};function o(e,t){if(e.type!=="-")return;var r=e._id;var a=r.charAt(0);var n;if(r.indexOf("scene")!==-1)r=a;var i=m(t,r,a);if(!i)return;if(i.type==="histogram"&&a==={v:"y",h:"x"}[i.orientation||"v"]){e.type="linear";return}var o=a+"calendar";var s=i[o];var l={noMultiCategory:!p(i,"cartesian")||p(i,"noMultiCategory")};if(i.type==="box"&&i._hasPreCompStats&&a==={h:"x",v:"y"}[i.orientation||"v"]){l.noMultiCategory=true}l.autotypenumbers=e.autotypenumbers;if(y(i,a)){var u=g(i);var c=[];for(n=0;n<t.length;n++){var f=t[n];if(!p(f,"box-violin")||(f[a+"axis"]||a)!==r)continue;if(f[u]!==undefined)c.push(f[u][0]);else if(f.name!==undefined)c.push(f.name);else c.push("text");if(f[o]!==s)s=undefined}e.type=h(c,s,l)}else if(i.type==="splom"){var d=i.dimensions;var v=d[i._axesDim[r]];if(v.visible)e.type=h(v.values,s,l)}else{e.type=h(i[a]||[i[a+"0"]],s,l)}}function m(e,t,r){for(var a=0;a<e.length;a++){var n=e[a];if(n.type==="splom"&&n._length>0&&(n["_"+r+"axes"]||{})[t]){return n}if((n[r+"axis"]||r)===t){if(y(n,r)){return n}else if((n[r]||[]).length||n[r+"0"]){return n}}}}function g(e){return{v:"x",h:"y"}[e.orientation||"v"]}function y(e,t){var r=g(e);var a=p(e,"box-violin");var n=p(e._fullInput||{},"candlestick");return a&&!n&&t===r&&e[r]===undefined&&e[r+"0"]===undefined}},{"../../registry":373,"./axis_autotype":332}],358:[function(e,t,v){"use strict";var o=e("../registry");var d=e("../lib");v.manageCommandObserver=function(r,e,t,a){var n={};var i=true;if(e&&e._commandObserver){n=e._commandObserver}if(!n.cache){n.cache={}}n.lookupTable={};var o=v.hasSimpleAPICommandBindings(r,t,n.lookupTable);if(e&&e._commandObserver){if(!o){if(e._commandObserver.remove){e._commandObserver.remove();e._commandObserver=null;return n}}else{return n}}if(o){u(r,o,n.cache);n.check=function e(){if(!i)return;var t=u(r,o,n.cache);if(t.changed&&a){if(n.lookupTable[t.value]!==undefined){n.disable();Promise.resolve(a({value:t.value,type:o.type,prop:o.prop,traces:o.traces,index:n.lookupTable[t.value]})).then(n.enable,n.enable)}}return t.changed};var s=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"];for(var l=0;l<s.length;l++){r._internalOn(s[l],n.check)}n.remove=function(){for(var e=0;e<s.length;e++){r._removeInternalListener(s[e],n.check)}}}else{d.log("Unable to automatically bind plot updates to API command");n.lookupTable={};n.remove=function(){}}n.disable=function e(){i=false};n.enable=function e(){i=true};if(e){e._commandObserver=n}return n};v.hasSimpleAPICommandBindings=function(e,t,r){var a;var n=t.length;var i;for(a=0;a<n;a++){var o;var s=t[a];var l=s.method;var u=s.args;if(!Array.isArray(u))u=[];if(!l){return false}var c=v.computeAPICommandBindings(e,l,u);if(c.length!==1){return false}if(!i){i=c[0];if(Array.isArray(i.traces)){i.traces.sort()}}else{o=c[0];if(o.type!==i.type){return false}if(o.prop!==i.prop){return false}if(Array.isArray(i.traces)){if(Array.isArray(o.traces)){o.traces.sort();for(var f=0;f<i.traces.length;f++){if(i.traces[f]!==o.traces[f]){return false}}}else{return false}}else{if(o.prop!==i.prop){return false}}}o=c[0];var d=o.value;if(Array.isArray(d)){if(d.length===1){d=d[0]}else{return false}}if(r){r[d]=a}}return i};function u(e,t,r){var a,n,i;var o=false;if(t.type==="data"){a=e._fullData[t.traces!==null?t.traces[0]:0]}else if(t.type==="layout"){a=e._fullLayout}else{return false}n=d.nestedProperty(a,t.prop).get();i=r[t.type]=r[t.type]||{};if(i.hasOwnProperty(t.prop)){if(i[t.prop]!==n){o=true}}i[t.prop]=n;return{changed:o,value:n}}v.executeAPICommand=function(e,t,r){if(t==="skip")return Promise.resolve();var a=o.apiMethodRegistry[t];var n=[e];if(!Array.isArray(r))r=[];for(var i=0;i<r.length;i++){n.push(r[i])}return a.apply(null,n).catch(function(e){d.warn("API call to Plotly."+t+" rejected.",e);return Promise.reject(e)})};v.computeAPICommandBindings=function(e,t,r){var a;if(!Array.isArray(r))r=[];switch(t){case"restyle":a=s(e,r);break;case"relayout":a=i(e,r);break;case"update":a=s(e,[r[0],r[2]]).concat(i(e,[r[1]]));break;case"animate":a=n(e,r);break;default:a=[]}return a};function n(e,t){if(Array.isArray(t[0])&&t[0].length===1&&["string","number"].indexOf(typeof t[0][0])!==-1){return[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]}else{return[]}}function i(e,t){var a=[];var r=t[0];var n={};if(typeof r==="string"){n[r]=t[1]}else if(d.isPlainObject(r)){n=r}else{return a}l(n,function(e,t,r){a.push({type:"layout",prop:e,value:r})},"",0);return a}function s(u,e){var c,t,r,a;var f=[];t=e[0];r=e[1];c=e[2];a={};if(typeof t==="string"){a[t]=r}else if(d.isPlainObject(t)){a=t;if(c===undefined){c=r}}else{return f}if(c===undefined){c=null}l(a,function(e,t,r){var a;var n;if(Array.isArray(r)){n=r.slice();var i=Math.min(n.length,u.data.length);if(c){i=Math.min(i,c.length)}a=[];for(var o=0;o<i;o++){a[o]=c?c[o]:o}}else{n=r;a=c?c.slice():null}if(a===null){if(Array.isArray(n)){n=n[0]}}else if(Array.isArray(a)){if(!Array.isArray(n)){var s=n;n=[];for(var l=0;l<a.length;l++){n[l]=s}}n.length=Math.min(a.length,n.length)}f.push({type:"data",prop:e,traces:a,value:n})},"",0);return f}function l(a,n,i,o){Object.keys(a).forEach(function(e){var t=a[e];if(e[0]==="_")return;var r=i+(o>0?".":"")+e;if(d.isPlainObject(t)){l(t,n,r,o+1)}else{n(r,e,t)}})}},{"../lib":285,"../registry":373}],359:[function(e,t,r){"use strict";var s=e("../lib/extend").extendFlat;r.attributes=function(e,t){e=e||{};t=t||{};var r={valType:"info_array",editType:e.editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]};var a=e.name?e.name+" ":"";var n=e.trace?"trace ":"subplot ";var i=t.description?" "+t.description:"";var o={x:s({},r,{}),y:s({},r,{}),editType:e.editType};if(!e.noGridCell){o.row={valType:"integer",min:0,dflt:0,editType:e.editType};o.column={valType:"integer",min:0,dflt:0,editType:e.editType}}return o};r.defaults=function(e,t,r,a){var n=a&&a.x||[0,1];var i=a&&a.y||[0,1];var o=t.grid;if(o){var s=r("domain.column");if(s!==undefined){if(s<o.columns)n=o._domains.x[s];else delete e.domain.column}var l=r("domain.row");if(l!==undefined){if(l<o.rows)i=o._domains.y[l];else delete e.domain.row}}var u=r("domain.x",n);var c=r("domain.y",i);if(!(u[0]<u[1]))e.domain.x=n.slice();if(!(c[0]<c[1]))e.domain.y=i.slice()}},{"../lib/extend":279}],360:[function(e,t,r){"use strict";t.exports=function(e){var t=e.editType;var r=e.colorEditType;if(r===undefined)r=t;var a={family:{valType:"string",noBlank:true,strict:true,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:r},editType:t};if(e.arrayOk){a.family.arrayOk=true;a.size.arrayOk=true;a.color.arrayOk=true}return a}},{}],361:[function(e,t,r){"use strict";t.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],362:[function(e,t,r){"use strict";var f=e("../registry");var d=e("./cartesian/constants").SUBPLOT_PATTERN;r.getSubplotCalcData=function(e,t,r){var a=f.subplotsRegistry[t];if(!a)return[];var n=a.attr;var i=[];for(var o=0;o<e.length;o++){var s=e[o];var l=s[0].trace;if(l[n]===r)i.push(s)}return i};r.getModuleCalcData=function(e,t){var r=[];var a=[];var n;if(typeof t==="string"){n=f.getModule(t).plot}else if(typeof t==="function"){n=t}else{n=t.plot}if(!n){return[r,e]}for(var i=0;i<e.length;i++){var o=e[i];var s=o[0].trace;if(s.visible!==true||s._length===0)continue;if(s._module.plot===n){r.push(o)}else{a.push(o)}}return[r,a]};r.getSubplotData=function e(t,r,a){if(!f.subplotsRegistry[r])return[];var n=f.subplotsRegistry[r].attr;var i=[];var o,s,l;if(r==="gl2d"){var u=a.match(d);s="x"+u[1];l="y"+u[2]}for(var c=0;c<t.length;c++){o=t[c];if(r==="gl2d"&&f.traceIs(o,"gl2d")){if(o[n[0]]===s&&o[n[1]]===l){i.push(o)}}else{if(o[n]===a)i.push(o)}}return i}},{"../registry":373,"./cartesian/constants":338}],363:[function(e,t,r){"use strict";function a(e,t){var r=[0,0,0,0];var a,n;for(a=0;a<4;++a){for(n=0;n<4;++n){r[n]+=e[4*a+n]*t[a]}}return r}function n(e,t){var r=a(e.projection,a(e.view,a(e.model,[t[0],t[1],t[2],1])));return r}t.exports=n},{}],364:[function(e,t,r){"use strict";var a=e("./font_attributes");var n=e("./animation_attributes");var i=e("../components/color/attributes");var o=e("../components/shapes/draw_newshape/attributes");var s=e("./pad_attributes");var l=e("../lib/extend").extendFlat;var u=a({editType:"calc"});u.family.dflt='"Open Sans", verdana, arial, sans-serif';u.size.dflt=12;u.color.dflt=i.defaultLine;t.exports={font:u,title:{text:{valType:"string",editType:"layoutstyle"},font:a({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:l(s({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[false,"hide","show"],dflt:false,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:false,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:true,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:i.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:i.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:false,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:i.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:o.newshape,activeshape:o.activeshape,meta:{valType:"any",arrayOk:true,editType:"plot"},transition:l({},n.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:a({editType:"layoutstyle"})}}},{"../components/color/attributes":154,"../components/shapes/draw_newshape/attributes":240,"../lib/extend":279,"./animation_attributes":325,"./font_attributes":360,"./pad_attributes":365}],365:[function(e,t,r){"use strict";t.exports=function(e){var t=e.editType;return{t:{valType:"number",dflt:0,editType:t},r:{valType:"number",dflt:0,editType:t},b:{valType:"number",dflt:0,editType:t},l:{valType:"number",dflt:0,editType:t},editType:t}}},{}],366:[function(e,t,r){"use strict";var l=e("@plotly/d3");var a=e("d3-time-format").timeFormatLocale;var z=e("fast-isnumeric");var F=e("../registry");var y=e("../plot_api/plot_schema");var T=e("../plot_api/plot_template");var j=e("../lib");var x=e("../components/color");var b=e("../constants/numerical").BADNUM;var O=e("./cartesian/axis_ids");var H=e("./cartesian/handle_outline").clearSelect;var n=e("./animation_attributes");var i=e("./frame_attributes");var s=e("../plots/get_data").getModuleCalcData;var B=j.relinkPrivateKeys;var q=j._;var U=t.exports={};j.extendFlat(U,F);U.attributes=e("./attributes");U.attributes.type.values=U.allTypes;U.fontAttrs=e("./font_attributes");U.layoutAttributes=e("./layout_attributes");U.fontWeight="normal";var _=U.transformsRegistry;var o=e("./command");U.executeAPICommand=o.executeAPICommand;U.computeAPICommandBindings=o.computeAPICommandBindings;U.manageCommandObserver=o.manageCommandObserver;U.hasSimpleAPICommandBindings=o.hasSimpleAPICommandBindings;U.redrawText=function(t){t=j.getGraphDiv(t);return new Promise(function(e){setTimeout(function(){if(!t._fullLayout)return;F.getComponentMethod("annotations","draw")(t);F.getComponentMethod("legend","draw")(t);F.getComponentMethod("colorbar","draw")(t);e(U.previousPromises(t))},300)})};U.resize=function(r){r=j.getGraphDiv(r);var a;var e=new Promise(function(t,e){if(!r||j.isHidden(r)){e(new Error("Resize must be passed a displayed plot div element."))}if(r._redrawTimer)clearTimeout(r._redrawTimer);if(r._resolveResize)a=r._resolveResize;r._resolveResize=t;r._redrawTimer=setTimeout(function(){if(!r.layout||r.layout.width&&r.layout.height||j.isHidden(r)){t(r);return}delete r.layout.width;delete r.layout.height;var e=r.changed;r.autoplay=true;F.call("relayout",r,{autosize:true}).then(function(){r.changed=e;if(r._resolveResize===t){delete r._resolveResize;t(r)}})},100)});if(a)a(e);return e};U.previousPromises=function(e){if((e._promises||[]).length){return Promise.all(e._promises).then(function(){e._promises=[]})}};U.addLinks=function(e){if(!e._context.showLink&&!e._context.showSources)return;var t=e._fullLayout;var r=j.ensureSingle(t._paper,"text","js-plot-link-container",function(e){e.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:x.defaultLine,"pointer-events":"all"}).each(function(){var e=l.select(this);e.append("tspan").classed("js-link-to-tool",true);e.append("tspan").classed("js-link-spacer",true);e.append("tspan").classed("js-sourcelinks",true)})});var a=r.node();var n={y:t._paper.attr("height")-9};if(document.body.contains(a)&&a.getComputedTextLength()>=t.width-20){n["text-anchor"]="start";n.x=5}else{n["text-anchor"]="end";n.x=t._paper.attr("width")-7}r.attr(n);var i=r.select(".js-link-to-tool");var o=r.select(".js-link-spacer");var s=r.select(".js-sourcelinks");if(e._context.showSources)e._context.showSources(e);if(e._context.showLink)u(e,i);o.text(i.text()&&s.text()?" - ":"")};function u(e,t){t.text("");var r=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));if(e._context.sendData){r.on("click",function(){U.sendDataToCloud(e)})}else{var a=window.location.pathname.split("/");var n=window.location.search;r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+a[2].split(".")[0]+"/"+a[1]+n})}}U.sendDataToCloud=function(e){var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(!t)return;e.emit("plotly_beforeexport");var r=l.select(e).append("div").attr("id","hiddenform").style("display","none");var a=r.append("form").attr({action:t+"/external",method:"post",target:"_blank"});var n=a.append("input").attr({type:"text",name:"data"});n.node().value=U.graphJson(e,false,"keepdata");a.node().submit();r.remove();e.emit("plotly_afterexport");return false};var Y=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"];var V=["year","month","dayMonth","dayMonthYear"];U.supplyDefaults=function(e,t){var r=t&&t.skipUpdateCalc;var a=e._fullLayout||{};if(a._skipDefaults){delete a._skipDefaults;return}var n=e._fullLayout={};var i=e.layout||{};var o=e._fullData||[];var s=e._fullData=[];var l=e.data||[];var u=e.calcdata||[];var c=e._context||{};var f;if(!e._transitionData)U.createTransitionData(e);n._dfltTitle={plot:q(e,"Click to enter Plot title"),x:q(e,"Click to enter X axis title"),y:q(e,"Click to enter Y axis title"),colorbar:q(e,"Click to enter Colorscale title"),annotation:q(e,"new text")};n._traceWord=q(e,"trace");var d=$(e,Y);n._mapboxAccessToken=c.mapboxAccessToken;if(a._initialAutoSizeIsDone){var v=a.width;var p=a.height;U.supplyLayoutGlobalDefaults(i,n,d);if(!i.width)n.width=v;if(!i.height)n.height=p;U.sanitizeMargins(n)}else{U.supplyLayoutGlobalDefaults(i,n,d);var h=!i.width||!i.height;var m=n.autosize;var g=c.autosizable;var y=h&&(m||g);if(y)U.plotAutoSize(e,i,n);else if(h)U.sanitizeMargins(n);if(!m&&h){i.width=n.width;i.height=n.height}}n._d3locale=Z(d,n.separators);n._extraFormat=$(e,V);n._initialAutoSizeIsDone=true;n._dataLength=l.length;n._modules=[];n._visibleModules=[];n._basePlotModules=[];var x=n._subplots=W();var b=n._splomAxes={x:{},y:{}};var _=n._splomSubplots={};n._splomGridDflt={};n._scatterStackOpts={};n._firstScatter={};n._alignmentOpts={};n._colorAxes={};n._requestRangeslider={};n._traceUids=G(o,l);n._globalTransforms=(e._context||{}).globalTransforms;U.supplyDataDefaults(l,s,i,n);var w=Object.keys(b.x);var T=Object.keys(b.y);if(w.length>1&&T.length>1){F.getComponentMethod("grid","sizeDefaults")(i,n);for(f=0;f<w.length;f++){j.pushUnique(x.xaxis,w[f])}for(f=0;f<T.length;f++){j.pushUnique(x.yaxis,T[f])}for(var k in _){j.pushUnique(x.cartesian,k)}}n._has=U._hasPlotType.bind(n);if(o.length===s.length){for(f=0;f<s.length;f++){B(s[f],o[f])}}U.supplyLayoutModuleDefaults(i,n,s,e._transitionData);var M=n._visibleModules;var A=[];for(f=0;f<M.length;f++){var S=M[f].crossTraceDefaults;if(S)j.pushUnique(A,S)}for(f=0;f<A.length;f++){A[f](s,n)}n._hasOnlyLargeSploms=n._basePlotModules.length===1&&n._basePlotModules[0].name==="splom"&&w.length>15&&T.length>15&&n.shapes.length===0&&n.images.length===0;U.linkSubplots(s,n,o,a);U.cleanPlot(s,n,o,a);var E=!!(a._has&&a._has("gl2d"));var L=!!(n._has&&n._has("gl2d"));var C=!!(a._has&&a._has("cartesian"));var D=!!(n._has&&n._has("cartesian"));var O=C||E;var I=D||L;if(O&&!I){a._bgLayer.remove()}else if(I&&!O){n._shouldCreateBgLayer=true}if(a._zoomlayer&&!e._dragging){H({_fullLayout:a})}X(s,n);B(n,a);F.getComponentMethod("colorscale","crossTraceDefaults")(s,n);if(!n._preGUI)n._preGUI={};if(!n._tracePreGUI)n._tracePreGUI={};var P=n._tracePreGUI;var R={};var N;for(N in P)R[N]="old";for(f=0;f<s.length;f++){N=s[f]._fullInput.uid;if(!R[N])P[N]={};R[N]="new"}for(N in R){if(R[N]==="old")delete P[N]}J(n);F.getComponentMethod("rangeslider","makeData")(n);if(!r&&u.length===s.length){U.supplyDefaultsUpdateCalc(u,s)}};U.supplyDefaultsUpdateCalc=function(e,t){for(var r=0;r<t.length;r++){var a=t[r];var n=(e[r]||[])[0];if(n&&n.trace){var i=n.trace;if(i._hasCalcTransform){var o=i._arrayAttrs;var s,l,u;for(s=0;s<o.length;s++){l=o[s];u=j.nestedProperty(i,l).get().slice();j.nestedProperty(a,l).set(u)}}n.trace=a}}};function G(e,t){var r=t.length;var a=[];var n,i;for(n=0;n<e.length;n++){var o=e[n]._fullInput;if(o!==i)a.push(o);i=o}var s=a.length;var l=new Array(r);var u={};function c(e,t){l[t]=e;u[e]=1}function f(e,t){if(e&&typeof e==="string"&&!u[e]){c(e,t);return true}}for(n=0;n<r;n++){var d=t[n].uid;if(typeof d==="number")d=String(d);if(f(d,n))continue;if(n<s&&f(a[n].uid,n))continue;c(j.randstr(u),n)}return l}function W(){var e=F.collectableSubplotTypes;var t={};var r,a;if(!e){e=[];var n=F.subplotsRegistry;for(var i in n){var o=n[i];var s=o.attr;if(s){e.push(i);if(Array.isArray(s)){for(a=0;a<s.length;a++){j.pushUnique(e,s[a])}}}}}for(r=0;r<e.length;r++){t[e[r]]=[]}return t}function $(e,n){var t=e._context.locale;if(!t)t="en-US";var i=false;var o={};function r(e){var t=true;for(var r=0;r<n.length;r++){var a=n[r];if(!o[a]){if(e[a]){o[a]=e[a]}else t=false}}if(t)i=true}for(var a=0;a<2;a++){var s=e._context.locales;for(var l=0;l<2;l++){var u=(s[t]||{}).format;if(u){r(u);if(i)break}s=F.localeRegistry}var c=t.split("-")[0];if(i||c===t)break;t=c}if(!i)r(F.localeRegistry.en.format);return o}function Z(e,t){e.decimal=t.charAt(0);e.thousands=t.charAt(1);return{numberFormat:l.locale(e).numberFormat,timeFormat:a(e).utcFormat}}function X(e,t){var r;var a=[];if(t.meta){r=t._meta={meta:t.meta,layout:{meta:t.meta}}}for(var n=0;n<e.length;n++){var i=e[n];if(i.meta){a[i.index]=i._meta={meta:i.meta}}else if(t.meta){i._meta={meta:t.meta}}if(t.meta){i._meta.layout={meta:t.meta}}}if(a.length){if(!r){r=t._meta={}}r.data=a}}U.createTransitionData=function(e){if(!e._transitionData){e._transitionData={}}if(!e._transitionData._frames){e._transitionData._frames=[]}if(!e._transitionData._frameHash){e._transitionData._frameHash={}}if(!e._transitionData._counter){e._transitionData._counter=0}if(!e._transitionData._interruptCallbacks){e._transitionData._interruptCallbacks=[]}};U._hasPlotType=function(e){var t;var r=this._basePlotModules||[];for(t=0;t<r.length;t++){if(r[t].name===e)return true}var a=this._modules||[];for(t=0;t<a.length;t++){var n=a[t].name;if(n===e)return true;var i=F.modules[n];if(i&&i.categories[e])return true}return false};U.cleanPlot=function(e,t,r,a){var n,i;var o=a._basePlotModules||[];for(n=0;n<o.length;n++){var s=o[n];if(s.clean){s.clean(e,t,r,a)}}var l=a._has&&a._has("gl");var u=t._has&&t._has("gl");if(l&&!u){if(a._glcontainer!==undefined){a._glcontainer.selectAll(".gl-canvas").remove();a._glcontainer.selectAll(".no-webgl").remove();a._glcanvas=null}}var c=!!a._infolayer;e:for(n=0;n<r.length;n++){var f=r[n];var d=f.uid;for(i=0;i<e.length;i++){var v=e[i];if(d===v.uid)continue e}if(c){a._infolayer.select(".cb"+d).remove()}}};U.linkSubplots=function(e,t,r,a){var n,i;var o=a._plots||{};var s=t._plots={};var l=t._subplots;var u={_fullData:e,_fullLayout:t};var c=l.cartesian.concat(l.gl2d||[]);for(n=0;n<c.length;n++){var f=c[n];var d=o[f];var v=O.getFromId(u,f,"x");var p=O.getFromId(u,f,"y");var h;if(d){h=s[f]=d}else{h=s[f]={};h.id=f}v._counterAxes.push(p._id);p._counterAxes.push(v._id);v._subplotsWith.push(f);p._subplotsWith.push(f);h.xaxis=v;h.yaxis=p;h._hasClipOnAxisFalse=false;for(i=0;i<e.length;i++){var m=e[i];if(m.xaxis===h.xaxis._id&&m.yaxis===h.yaxis._id&&m.cliponaxis===false){h._hasClipOnAxisFalse=true;break}}}var g=O.list(u,null,true);var y;for(n=0;n<g.length;n++){y=g[n];var x=null;if(y.overlaying){x=O.getFromId(u,y.overlaying);if(x&&x.overlaying){y.overlaying=false;x=null}}y._mainAxis=x||y;if(x)y.domain=x.domain.slice();y._anchorAxis=y.anchor==="free"?null:O.getFromId(u,y.anchor)}for(n=0;n<g.length;n++){y=g[n];y._counterAxes.sort(O.idSort);y._subplotsWith.sort(j.subplotSort);y._mainSubplot=k(y,t);if(y._counterAxes.length&&(y.spikemode&&y.spikemode.indexOf("across")!==-1||y.automargin&&y.mirror&&y.anchor!=="free"||F.getComponentMethod("rangeslider","isVisible")(y))){var b=1;var _=0;for(i=0;i<y._counterAxes.length;i++){var w=O.getFromId(u,y._counterAxes[i]);b=Math.min(b,w.domain[0]);_=Math.max(_,w.domain[1])}if(b<_){y._counterDomainMin=b;y._counterDomainMax=_}}}};function k(e,t){var r={_fullLayout:t};var a=e._id.charAt(0)==="x";var n=e._mainAxis._anchorAxis;var i="";var o="";var s="";if(n){s=n._mainAxis._id;i=a?e._id+s:s+e._id}if(!i||!t._plots[i]){i="";var l=e._counterAxes;for(var u=0;u<l.length;u++){var c=l[u];var f=a?e._id+c:c+e._id;if(!o)o=f;var d=O.getFromId(r,c);if(s&&d.overlaying===s){i=f;break}}}return i||o}U.clearExpandedTraceDefaultColors=function(e){var n,i,t;function r(e,t,r,a){i[a]=t;i.length=a+1;if(e.valType==="color"&&e.dflt===undefined){n.push(i.join("."))}}i=[];n=e._module._colorAttrs;if(!n){e._module._colorAttrs=n=[];y.crawl(e._module.attributes,r)}for(t=0;t<n.length;t++){var a=j.nestedProperty(e,"_input."+n[t]);if(!a.get()){j.nestedProperty(e,n[t]).set(null)}}};U.supplyDataDefaults=function(e,r,t,a){var n=a._modules;var i=a._visibleModules;var o=a._basePlotModules;var s=0;var l=0;var u,c,f;a._transformModules=[];function d(e){r.push(e);var t=e._module;if(!t)return;j.pushUnique(n,t);if(e.visible===true)j.pushUnique(i,t);j.pushUnique(o,e._module.basePlotModule);s++;if(e._input.visible!==false)l++}var v={};var p=[];var h=(t.template||{}).data||{};var m=T.traceTemplater(h);for(u=0;u<e.length;u++){f=e[u];c=m.newTrace(f);c.uid=a._traceUids[u];U.supplyTraceDefaults(f,c,l,a,u);c.index=u;c._input=f;c._expandedIndex=s;if(c.transforms&&c.transforms.length){var g=f.visible!==false&&c.visible===false;var y=M(c,r,t,a);for(var x=0;x<y.length;x++){var b=y[x];var _={_template:c._template,type:c.type,uid:c.uid+x};if(g&&b.visible===false){delete b.visible}U.supplyTraceDefaults(b,_,s,a,u);B(_,b);_.index=u;_._input=f;_._fullInput=c;_._expandedIndex=s;_._expandedInput=b;d(_)}}else{c._fullInput=c;c._expandedInput=c;d(c)}if(F.traceIs(c,"carpetAxis")){v[c.carpet]=c}if(F.traceIs(c,"carpetDependent")){p.push(u)}}for(u=0;u<p.length;u++){c=r[p[u]];if(!c.visible)continue;var w=v[c.carpet];c._carpet=w;if(!w||!w.visible){c.visible=false;continue}c.xaxis=w.xaxis;c.yaxis=w.yaxis}};U.supplyAnimationDefaults=function(r){r=r||{};var e;var a={};function t(e,t){return j.coerce(r||{},a,n,e,t)}t("mode");t("direction");t("fromcurrent");if(Array.isArray(r.frame)){a.frame=[];for(e=0;e<r.frame.length;e++){a.frame[e]=U.supplyAnimationFrameDefaults(r.frame[e]||{})}}else{a.frame=U.supplyAnimationFrameDefaults(r.frame||{})}if(Array.isArray(r.transition)){a.transition=[];for(e=0;e<r.transition.length;e++){a.transition[e]=U.supplyAnimationTransitionDefaults(r.transition[e]||{})}}else{a.transition=U.supplyAnimationTransitionDefaults(r.transition||{})}return a};U.supplyAnimationFrameDefaults=function(r){var a={};function e(e,t){return j.coerce(r||{},a,n.frame,e,t)}e("duration");e("redraw");return a};U.supplyAnimationTransitionDefaults=function(r){var a={};function e(e,t){return j.coerce(r||{},a,n.transition,e,t)}e("duration");e("easing");return a};U.supplyFrameDefaults=function(r){var a={};function e(e,t){return j.coerce(r,a,i,e,t)}e("group");e("name");e("traces");e("baseframe");e("data");e("layout");return a};U.supplyTraceDefaults=function(r,a,e,t,n){var i=t.colorway||x.defaults;var o=i[e%i.length];var s;function l(e,t){return j.coerce(r,a,U.attributes,e,t)}var u=l("visible");l("type");l("name",t._traceWord+" "+n);l("uirevision",t.uirevision);var c=U.getModule(a);a._module=c;if(c){var f=c.basePlotModule;var d=f.attr;var v=f.attributes;if(d&&v){var p=t._subplots;var h="";if(u||f.name!=="gl2d"){if(Array.isArray(d)){for(s=0;s<d.length;s++){var m=d[s];var g=j.coerce(r,a,v,m);if(p[m])j.pushUnique(p[m],g);h+=g}}else{h=j.coerce(r,a,v,d)}if(p[f.name]){j.pushUnique(p[f.name],h)}}}}if(u){l("customdata");l("ids");l("meta");if(F.traceIs(a,"showLegend")){j.coerce(r,a,c.attributes.showlegend?c.attributes:U.attributes,"showlegend");l("legendgroup");var y=l("legendgrouptitle.text");if(y){j.coerceFont(l,"legendgrouptitle.font",j.extendFlat({},t.font,{size:Math.round(t.font.size*1.1)}))}l("legendrank");a._dfltShowLegend=true}else{a._dfltShowLegend=false}if(c){c.supplyDefaults(r,a,o,t)}if(!F.traceIs(a,"noOpacity")){l("opacity")}if(F.traceIs(a,"notLegendIsolatable")){a.visible=!!a.visible}if(!F.traceIs(a,"noHover")){if(!a.hovertemplate)j.coerceHoverinfo(r,a,t);if(a.type!=="parcats"){F.getComponentMethod("fx","supplyDefaults")(r,a,o,t)}}if(c&&c.selectPoints){l("selectedpoints")}U.supplyTransformDefaults(r,a,t)}return a};function h(e){var t=e.transforms;if(Array.isArray(t)&&t.length){for(var r=0;r<t.length;r++){var a=t[r];var n=a._module||_[a.type];if(n&&n.makesData)return true}}return false}U.hasMakesDataTransform=h;U.supplyTransformDefaults=function(e,t,r){if(!(t._length||h(e)))return;var a=r._globalTransforms||[];var n=r._transformModules||[];if(!Array.isArray(e.transforms)&&a.length===0)return;var i=e.transforms||[];var o=a.concat(i);var s=t.transforms=[];for(var l=0;l<o.length;l++){var u=o[l];var c=u.type;var f=_[c];var d;var v=!(u._module&&u._module===f);var p=f&&typeof f.transform==="function";if(!f)j.warn("Unrecognized transform type "+c+".");if(f&&f.supplyDefaults&&(v||p)){d=f.supplyDefaults(u,t,r,e);d.type=c;d._module=f;j.pushUnique(n,f)}else{d=j.extendFlat({},u)}s.push(d)}};function M(e,t,r,a){var n=e.transforms;var i=[e];for(var o=0;o<n.length;o++){var s=n[o];var l=_[s.type];if(l&&l.transform){i=l.transform(i,{transform:s,fullTrace:e,fullData:t,layout:r,fullLayout:a,transformIndex:o})}}return i}U.supplyLayoutGlobalDefaults=function(r,a,e){function t(e,t){return j.coerce(r,a,U.layoutAttributes,e,t)}var n=r.template;if(j.isPlainObject(n)){a.template=n;a._template=n.layout;a._dataTemplate=n.data}t("autotypenumbers");var i=j.coerceFont(t,"font");t("title.text",a._dfltTitle.plot);j.coerceFont(t,"title.font",{family:i.family,size:Math.round(i.size*1.4),color:i.color});t("title.xref");t("title.yref");t("title.x");t("title.y");t("title.xanchor");t("title.yanchor");t("title.pad.t");t("title.pad.r");t("title.pad.b");t("title.pad.l");var o=t("uniformtext.mode");if(o){t("uniformtext.minsize")}t("autosize",!(r.width&&r.height));t("width");t("height");t("margin.l");t("margin.r");t("margin.t");t("margin.b");t("margin.pad");t("margin.autoexpand");if(r.width&&r.height)U.sanitizeMargins(a);F.getComponentMethod("grid","sizeDefaults")(r,a);t("paper_bgcolor");t("separators",e.decimal+e.thousands);t("hidesources");t("colorway");t("datarevision");var s=t("uirevision");t("editrevision",s);t("selectionrevision",s);F.getComponentMethod("modebar","supplyLayoutDefaults")(r,a);F.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(r,a,t);t("meta");if(j.isPlainObject(r.transition)){t("transition.duration");t("transition.easing");t("transition.ordering")}F.getComponentMethod("calendars","handleDefaults")(r,a,"calendar");F.getComponentMethod("fx","supplyLayoutGlobalDefaults")(r,a,t)};function m(e){return typeof e==="string"&&e.substr(e.length-2)==="px"&&parseFloat(e)}U.plotAutoSize=function e(t,r,a){var n=t._context||{};var i=n.frameMargins;var o;var s;var l=j.isPlotDiv(t);if(l)t.emit("plotly_autosize");if(n.fillFrame){o=window.innerWidth;s=window.innerHeight;document.body.style.overflow="hidden"}else{var u=l?window.getComputedStyle(t):{};o=m(u.width)||m(u.maxWidth)||a.width;s=m(u.height)||m(u.maxHeight)||a.height;if(z(i)&&i>0){var c=1-2*i;o=Math.round(c*o);s=Math.round(c*s)}}var f=U.layoutAttributes.width.min;var d=U.layoutAttributes.height.min;if(o<f)o=f;if(s<d)s=d;var v=!r.width&&Math.abs(a.width-o)>1;var p=!r.height&&Math.abs(a.height-s)>1;if(p||v){if(v)a.width=o;if(p)a.height=s}if(!t._initialAutoSize){t._initialAutoSize={width:o,height:s}}U.sanitizeMargins(a)};U.supplyLayoutModuleDefaults=function(e,t,r,a){var n=F.componentsRegistry;var i=t._basePlotModules;var o,s,l;var u=F.subplotsRegistry.cartesian;for(o in n){l=n[o];if(l.includeBasePlot){l.includeBasePlot(e,t)}}if(!i.length){i.push(u)}if(t._has("cartesian")){F.getComponentMethod("grid","contentDefaults")(e,t);u.finalizeSubplots(e,t)}for(var c in t._subplots){t._subplots[c].sort(j.subplotSort)}for(s=0;s<i.length;s++){l=i[s];if(l.supplyLayoutDefaults){l.supplyLayoutDefaults(e,t,r)}}var f=t._modules;for(s=0;s<f.length;s++){l=f[s];if(l.supplyLayoutDefaults){l.supplyLayoutDefaults(e,t,r)}}var d=t._transformModules;for(s=0;s<d.length;s++){l=d[s];if(l.supplyLayoutDefaults){l.supplyLayoutDefaults(e,t,r,a)}}for(o in n){l=n[o];if(l.supplyLayoutDefaults){l.supplyLayoutDefaults(e,t,r)}}};U.purge=function(e){var t=e._fullLayout||{};if(t._glcontainer!==undefined){t._glcontainer.selectAll(".gl-canvas").remove();t._glcontainer.remove();t._glcanvas=null}if(t._modeBar)t._modeBar.destroy();if(e._transitionData){if(e._transitionData._interruptCallbacks){e._transitionData._interruptCallbacks.length=0}if(e._transitionData._animationRaf){window.cancelAnimationFrame(e._transitionData._animationRaf)}}j.clearThrottle();j.clearResponsive(e);delete e.data;delete e.layout;delete e._fullData;delete e._fullLayout;delete e.calcdata;delete e.empty;delete e.fid;delete e.undoqueue;delete e.undonum;delete e.autoplay;delete e.changed;delete e._promises;delete e._redrawTimer;delete e._hmlumcount;delete e._hmpixcount;delete e._transitionData;delete e._transitioning;delete e._initialAutoSize;delete e._transitioningWithDuration;delete e._dragging;delete e._dragged;delete e._dragdata;delete e._hoverdata;delete e._snapshotInProgress;delete e._editing;delete e._mouseDownTime;delete e._legendMouseDownTime;if(e.removeAllListeners)e.removeAllListeners()};U.style=function(e){var t=e._fullLayout._visibleModules;var r=[];var a;for(a=0;a<t.length;a++){var n=t[a];if(n.style){j.pushUnique(r,n.style)}}for(a=0;a<r.length;a++){r[a](e)}};U.sanitizeMargins=function(e){if(!e||!e.margin)return;var t=e.width;var r=e.height;var a=e.margin;var n=t-(a.l+a.r);var i=r-(a.t+a.b);var o;if(n<0){o=(t-1)/(a.l+a.r);a.l=Math.floor(o*a.l);a.r=Math.floor(o*a.r)}if(i<0){o=(r-1)/(a.t+a.b);a.t=Math.floor(o*a.t);a.b=Math.floor(o*a.b)}};U.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}};U.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};function J(e){var t=e.margin;if(!e._size){var r=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)};r.w=Math.round(e.width)-r.l-r.r;r.h=Math.round(e.height)-r.t-r.b}if(!e._pushmargin)e._pushmargin={};if(!e._pushmarginIds)e._pushmarginIds={}}var K=2;var Q=2;var ee=64;var te=64;U.autoMargin=function(e,t,r){var a=e._fullLayout;var n=a.width;var i=a.height;var o=a.margin;var s=j.constrain(n-o.l-o.r,K,ee);var l=j.constrain(i-o.t-o.b,Q,te);var u=Math.max(0,n-s);var c=Math.max(0,i-l);var f=a._pushmargin;var d=a._pushmarginIds;if(o.autoexpand!==false){if(!r){delete f[t];delete d[t]}else{var v=r.pad;if(v===undefined){v=Math.min(12,o.l,o.r,o.t,o.b)}if(u){var p=(r.l+r.r)/u;if(p>1){r.l/=p;r.r/=p}}if(c){var h=(r.t+r.b)/c;if(h>1){r.t/=h;r.b/=h}}var m=r.xl!==undefined?r.xl:r.x;var g=r.xr!==undefined?r.xr:r.x;var y=r.yt!==undefined?r.yt:r.y;var x=r.yb!==undefined?r.yb:r.y;f[t]={l:{val:m,size:r.l+v},r:{val:g,size:r.r+v},b:{val:x,size:r.b+v},t:{val:y,size:r.t+v}};d[t]=1}if(!a._replotting){return U.doAutoMargin(e)}}};U.doAutoMargin=function(e){var t=e._fullLayout;var r=t.width;var a=t.height;if(!t._size)t._size={};J(t);var n=t._size;var i=t.margin;var o=j.extendFlat({},n);var s=i.l;var l=i.r;var u=i.t;var c=i.b;var f=t._pushmargin;var d=t._pushmarginIds;if(t.margin.autoexpand!==false){for(var v in f){if(!d[v])delete f[v]}f.base={l:{val:0,size:s},r:{val:1,size:l},t:{val:1,size:u},b:{val:0,size:c}};for(var p in f){var h=f[p].l||{};var m=f[p].b||{};var g=h.val;var y=h.size;var x=m.val;var b=m.size;for(var _ in f){if(z(y)&&f[_].r){var w=f[_].r.val;var T=f[_].r.size;if(w>g){var k=(y*w+(T-r)*g)/(w-g);var M=(T*(1-g)+(y-r)*(1-w))/(w-g);if(k+M>s+l){s=k;l=M}}}if(z(b)&&f[_].t){var A=f[_].t.val;var S=f[_].t.size;if(A>x){var E=(b*A+(S-a)*x)/(A-x);var L=(S*(1-x)+(b-a)*(1-A))/(A-x);if(E+L>c+u){c=E;u=L}}}}}}var C=j.constrain(r-i.l-i.r,K,ee);var D=j.constrain(a-i.t-i.b,Q,te);var O=Math.max(0,r-C);var I=Math.max(0,a-D);if(O){var P=(s+l)/O;if(P>1){s/=P;l/=P}}if(I){var R=(c+u)/I;if(R>1){c/=R;u/=R}}n.l=Math.round(s);n.r=Math.round(l);n.t=Math.round(u);n.b=Math.round(c);n.p=Math.round(i.pad);n.w=Math.round(r)-n.l-n.r;n.h=Math.round(a)-n.t-n.b;if(!t._replotting&&U.didMarginChange(o,n)){if("_redrawFromAutoMarginCount"in t){t._redrawFromAutoMarginCount++}else{t._redrawFromAutoMarginCount=1}var N=3*(1+Object.keys(d).length);if(t._redrawFromAutoMarginCount<N){return F.call("_doPlot",e)}else{t._size=o;j.warn("Too many auto-margin redraws.")}}re(e)};function re(e){var a=O.list(e,"",true);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(e){for(var t=0;t<a.length;t++){var r=a[t][e];if(r)r()}})}var c=["l","r","t","b","p","w","h"];U.didMarginChange=function(e,t){for(var r=0;r<c.length;r++){var a=c[r];var n=e[a];var i=t[a];if(!z(n)||Math.abs(i-n)>1){return true}}return false};U.graphJson=function(e,r,i,t,a,n){if(a&&r&&!e._fullData||a&&!r&&!e._fullLayout){U.supplyDefaults(e)}var o=a?e._fullData:e.data;var s=a?e._fullLayout:e.layout;var l=(e._transitionData||{})._frames;function u(t,r){if(typeof t==="function"){return r?"_function_":null}if(j.isPlainObject(t)){var a={};var n;Object.keys(t).sort().forEach(function(e){if(["_","["].indexOf(e.charAt(0))!==-1)return;if(typeof t[e]==="function"){if(r)a[e]="_function";return}if(i==="keepdata"){if(e.substr(e.length-3)==="src"){return}}else if(i==="keepstream"){n=t[e+"src"];if(typeof n==="string"&&n.indexOf(":")>0){if(!j.isPlainObject(t.stream)){return}}}else if(i!=="keepall"){n=t[e+"src"];if(typeof n==="string"&&n.indexOf(":")>0){return}}a[e]=u(t[e],r)});return a}if(Array.isArray(t)){return t.map(function(e){return u(e,r)})}if(j.isTypedArray(t)){return j.simpleMap(t,j.identity)}if(j.isJSDate(t))return j.ms2DateTimeLocal(+t);return t}var c={data:(o||[]).map(function(e){var t=u(e);if(r){delete t.fit}return t})};if(!r){c.layout=u(s);if(a){var f=s._size;c.layout.computed={margin:{b:f.b,l:f.l,r:f.r,t:f.t}}}}if(l)c.frames=u(l);if(n)c.config=u(e._context,true);return t==="object"?c:JSON.stringify(c)};U.modifyFrames=function(e,t){var r,a,n;var i=e._transitionData._frames;var o=e._transitionData._frameHash;for(r=0;r<t.length;r++){a=t[r];switch(a.type){case"replace":n=a.value;var s=(i[a.index]||{}).name;var l=n.name;i[a.index]=o[l]=n;if(l!==s){delete o[s];o[l]=n}break;case"insert":n=a.value;o[n.name]=n;i.splice(a.index,0,n);break;case"delete":n=i[a.index];delete o[n.name];i.splice(a.index,1);break}}return Promise.resolve()};U.computeFrame=function(e,t){var r=e._transitionData._frameHash;var a,n,i,o;if(!t){throw new Error("computeFrame must be given a string frame name")}var s=r[t.toString()];if(!s){return false}var l=[s];var u=[s.name];while(s.baseframe&&(s=r[s.baseframe.toString()])){if(u.indexOf(s.name)!==-1)break;l.push(s);u.push(s.name)}var c={};while(s=l.pop()){if(s.layout){c.layout=U.extendLayout(c.layout,s.layout)}if(s.data){if(!c.data){c.data=[]}n=s.traces;if(!n){n=[];for(a=0;a<s.data.length;a++){n[a]=a}}if(!c.traces){c.traces=[]}for(a=0;a<s.data.length;a++){i=n[a];if(i===undefined||i===null){continue}o=c.traces.indexOf(i);if(o===-1){o=c.data.length;c.traces[o]=i}c.data[o]=U.extendTrace(c.data[o],s.data[a])}}}return c};U.recomputeFrameHash=function(e){var t=e._transitionData._frameHash={};var r=e._transitionData._frames;for(var a=0;a<r.length;a++){var n=r[a];if(n&&n.name){t[n.name]=n}}};U.extendObjectWithContainers=function(e,t,r){var a,n,i,o,s,l,u,c;var f=j.extendDeepNoArrays({},t||{});var d=j.expandObjectPaths(f);var v={};if(r&&r.length){for(i=0;i<r.length;i++){a=j.nestedProperty(d,r[i]);n=a.get();if(n===undefined){j.nestedProperty(v,r[i]).set(null)}else{a.set(null);j.nestedProperty(v,r[i]).set(n)}}}e=j.extendDeepNoArrays(e||{},d);if(r&&r.length){for(i=0;i<r.length;i++){s=j.nestedProperty(v,r[i]);u=s.get();if(!u)continue;l=j.nestedProperty(e,r[i]);c=l.get();if(!Array.isArray(c)){c=[];l.set(c)}for(o=0;o<u.length;o++){var p=u[o];if(p===null)c[o]=null;else{c[o]=U.extendObjectWithContainers(c[o],p)}}l.set(c)}}return e};U.dataArrayContainers=["transforms","dimensions"];U.layoutArrayContainers=F.layoutArrayContainers;U.extendTrace=function(e,t){return U.extendObjectWithContainers(e,t,U.dataArrayContainers)};U.extendLayout=function(e,t){return U.extendObjectWithContainers(e,t,U.layoutArrayContainers)};U.transition=function(w,T,k,M,e,l){var t={redraw:e.redraw};var A={};var S=[];t.prepareFn=function(){var e=Array.isArray(T)?T.length:0;var t=M.slice(0,e);for(var r=0;r<t.length;r++){var a=t[r];var n=w._fullData[a];var i=n._module;if(!i)continue;if(i.animatable){var o=i.basePlotModule.name;if(!A[o])A[o]=[];A[o].push(a)}w.data[t[r]]=U.extendTrace(w.data[t[r]],T[r])}var s=j.expandObjectPaths(j.extendDeepNoArrays({},k));var l=/^[xy]axis[0-9]*$/;for(var u in s){if(!l.test(u))continue;delete s[u].range}U.extendLayout(w.layout,s);delete w.calcdata;U.supplyDefaults(w);U.doCalcdata(w);var c=j.expandObjectPaths(k);if(c){var f=w._fullLayout._plots;for(var d in f){var v=f[d];var p=v.xaxis;var h=v.yaxis;var m=p.range.slice();var g=h.range.slice();var y=null;var x=null;var b=null;var _=null;if(Array.isArray(c[p._name+".range"])){y=c[p._name+".range"].slice()}else if(Array.isArray((c[p._name]||{}).range)){y=c[p._name].range.slice()}if(Array.isArray(c[h._name+".range"])){x=c[h._name+".range"].slice()}else if(Array.isArray((c[h._name]||{}).range)){x=c[h._name].range.slice()}if(m&&y&&(p.r2l(m[0])!==p.r2l(y[0])||p.r2l(m[1])!==p.r2l(y[1]))){b={xr0:m,xr1:y}}if(g&&x&&(h.r2l(g[0])!==h.r2l(x[0])||h.r2l(g[1])!==h.r2l(x[1]))){_={yr0:g,yr1:x}}if(b||_){S.push(j.extendFlat({plotinfo:v},b,_))}}}return Promise.resolve()};t.runFn=function(e){var t;var r=w._fullLayout._basePlotModules;var a=S.length;var n;if(k){for(n=0;n<r.length;n++){if(r[n].transitionAxes){r[n].transitionAxes(w,S,l,e)}}}if(a){t=j.extendFlat({},l);t.duration=0;delete A.cartesian}else{t=l}for(var i in A){var o=A[i];var s=w._fullData[o[0]]._module;s.basePlotModule.plot(w,o,t,e)}};return E(w,l,t)};U.transitionFromReact=function(f,d,v,p){var h=f._fullLayout;var m=h.transition;var g={};var y=[];g.prepareFn=function(){var e=h._plots;g.redraw=false;if(d.anim==="some")g.redraw=true;if(v.anim==="some")g.redraw=true;for(var t in e){var r=e[t];var a=r.xaxis;var n=r.yaxis;var i=p[a._name].range.slice();var o=p[n._name].range.slice();var s=a.range.slice();var l=n.range.slice();a.setScale();n.setScale();var u=null;var c=null;if(a.r2l(i[0])!==a.r2l(s[0])||a.r2l(i[1])!==a.r2l(s[1])){u={xr0:i,xr1:s}}if(n.r2l(o[0])!==n.r2l(l[0])||n.r2l(o[1])!==n.r2l(l[1])){c={yr0:o,yr1:l}}if(u||c){y.push(j.extendFlat({plotinfo:r},u,c))}}return Promise.resolve()};g.runFn=function(t){var e=f._fullData;var r=f._fullLayout;var a=r._basePlotModules;var n;var i;var o;var s=[];for(var l=0;l<e.length;l++){s.push(l)}function u(){if(!f._fullLayout)return;for(var e=0;e<a.length;e++){if(a[e].transitionAxes){a[e].transitionAxes(f,y,n,t)}}}function c(){if(!f._fullLayout)return;for(var e=0;e<a.length;e++){a[e].plot(f,o,i,t)}}if(y.length&&d.anim){if(m.ordering==="traces first"){n=j.extendFlat({},m,{duration:0});o=s;i=m;setTimeout(u,m.duration);c()}else{n=m;o=null;i=j.extendFlat({},m,{duration:0});setTimeout(c,n.duration);u()}}else if(y.length){n=m;u()}else if(d.anim){o=s;i=m;c()}};return E(f,m,g)};function E(n,i,o){var s=false;function e(e){var t=Promise.resolve();if(!e)return t;while(e.length){t=t.then(e.shift())}return t}function t(e){if(!e)return;while(e.length){e.shift()}}function r(){n.emit("plotly_transitioning",[]);return new Promise(function(e){n._transitioning=true;if(i.duration>0){n._transitioningWithDuration=true}n._transitionData._interruptCallbacks.push(function(){s=true});if(o.redraw){n._transitionData._interruptCallbacks.push(function(){return F.call("redraw",n)})}n._transitionData._interruptCallbacks.push(function(){n.emit("plotly_transitioninterrupted",[])});var t=0;var r=0;function a(){t++;return function(){r++;if(!s&&r===t){l(e)}}}o.runFn(a);setTimeout(a())})}function l(e){if(!n._transitionData)return;t(n._transitionData._interruptCallbacks);return Promise.resolve().then(function(){if(o.redraw){return F.call("redraw",n)}}).then(function(){n._transitioning=false;n._transitioningWithDuration=false;n.emit("plotly_transitioned",[])}).then(e)}function a(){if(!n._transitionData)return;n._transitioning=false;return e(n._transitionData._interruptCallbacks)}var u=[U.previousPromises,a,o.prepareFn,U.rehover,r];var c=j.syncOrAsync(u,n);if(!c||!c.then){c=Promise.resolve()}return c.then(function(){return n})}U.doCalcdata=function(n,e){var t=O.list(n);var i=n._fullData;var r=n._fullLayout;var o,s,a,l;var u=new Array(i.length);var c=(n.calcdata||[]).slice();n.calcdata=u;r._numBoxes=0;r._numViolins=0;r._violinScaleGroupStats={};n._hmpixcount=0;n._hmlumcount=0;r._piecolormap={};r._sunburstcolormap={};r._treemapcolormap={};r._iciclecolormap={};r._funnelareacolormap={};for(a=0;a<i.length;a++){if(Array.isArray(e)&&e.indexOf(a)===-1){u[a]=c[a];continue}}for(a=0;a<i.length;a++){o=i[a];o._arrayAttrs=y.findArrayAttributes(o);o._extremes={}}var f=r._subplots.polar||[];for(a=0;a<f.length;a++){t.push(r[f[a]].radialaxis,r[f[a]].angularaxis)}for(var d in r._colorAxes){var v=r[d];if(v.cauto!==false){delete v.cmin;delete v.cmax}}var p=false;function h(e){o=i[e];s=o._module;if(o.visible===true&&o.transforms){if(s&&s.calc){var t=s.calc(n,o);if(t[0]&&t[0].t&&t[0].t._scene){delete t[0].t._scene.dirty}}for(l=0;l<o.transforms.length;l++){var r=o.transforms[l];s=_[r.type];if(s&&s.calcTransform){o._hasCalcTransform=true;p=true;s.calcTransform(n,o,r)}}}}function m(e,t){o=i[e];s=o._module;if(!!s.isContainer!==t)return;var r=[];if(o.visible===true&&o._length!==0){delete o._indexToPoints;var a=o.transforms||[];for(l=a.length-1;l>=0;l--){if(a[l].enabled){o._indexToPoints=a[l]._indexToPoints;break}}if(s&&s.calc){r=s.calc(n,o)}}if(!Array.isArray(r)||!r[0]){r=[{x:b,y:b}]}if(!r[0].t)r[0].t={};r[0].trace=o;u[e]=r}A(t,i,r);for(a=0;a<i.length;a++)m(a,true);for(a=0;a<i.length;a++)h(a);if(p)A(t,i,r);for(a=0;a<i.length;a++)m(a,true);for(a=0;a<i.length;a++)m(a,false);S(n);var g=w(t,n);if(g.length){r._numBoxes=0;r._numViolins=0;for(a=0;a<g.length;a++)m(g[a],true);for(a=0;a<g.length;a++)m(g[a],false);S(n)}F.getComponentMethod("fx","calc")(n);F.getComponentMethod("errorbars","calc")(n)};var I=/(total|sum|min|max|mean|median) (ascending|descending)/;function w(e,l){var t=[];var r,a,n,i,o;function s(e,t,r){var a=t._id.charAt(0);if(e==="histogram2dcontour"){var n=t._counterAxes[0];var i=O.getFromId(l,n);var o=a==="x"||n==="x"&&i.type==="category";var s=a==="y"||n==="y"&&i.type==="category";return function(e,t){if(e===0||t===0)return-1;if(o&&e===r[t].length-1)return-1;if(s&&t===r.length-1)return-1;return(a==="y"?t:e)-1}}else{return function(e,t){return a==="y"?t:e}}}var u={min:function(e){return j.aggNums(Math.min,null,e)},max:function(e){return j.aggNums(Math.max,null,e)},sum:function(e){return j.aggNums(function(e,t){return e+t},null,e)},total:function(e){return j.aggNums(function(e,t){return e+t},null,e)},mean:function(e){return j.mean(e)},median:function(e){return j.median(e)}};for(r=0;r<e.length;r++){var c=e[r];if(c.type!=="category")continue;var f=c.categoryorder.match(I);if(f){var d=f[1];var v=f[2];var p=c._id.charAt(0);var h=p==="x";var m=[];for(a=0;a<c._categories.length;a++){m.push([c._categories[a],[]])}for(a=0;a<c._traceIndices.length;a++){var g=c._traceIndices[a];var y=l._fullData[g];if(y.visible!==true)continue;var x=y.type;if(F.traceIs(y,"histogram")){delete y._xautoBinFinished;delete y._yautoBinFinished}var b=x==="splom";var _=x==="scattergl";var w=l.calcdata[g];for(n=0;n<w.length;n++){var T=w[n];var k,M;if(b){var A=y._axesDim[c._id];if(!h){var S=y._diag[A][0];if(S)c=l._fullLayout[O.id2name(S)]}var E=T.trace.dimensions[A].values;for(i=0;i<E.length;i++){k=c._categoriesMap[E[i]];for(o=0;o<T.trace.dimensions.length;o++){if(o===A)continue;var L=T.trace.dimensions[o];m[k][1].push(L.values[i])}}}else if(_){for(i=0;i<T.t.x.length;i++){if(h){k=T.t.x[i];M=T.t.y[i]}else{k=T.t.y[i];M=T.t.x[i]}m[k][1].push(M)}if(T.t&&T.t._scene){delete T.t._scene.dirty}}else if(T.hasOwnProperty("z")){M=T.z;var C=s(y.type,c,M);for(i=0;i<M.length;i++){for(o=0;o<M[i].length;o++){k=C(o,i);if(k+1)m[k][1].push(M[i][o])}}}else{k=T.p;if(k===undefined)k=T[p];M=T.s;if(M===undefined)M=T.v;if(M===undefined)M=h?T.y:T.x;if(!Array.isArray(M)){if(M===undefined)M=[];else M=[M]}for(i=0;i<M.length;i++){m[k][1].push(M[i])}}}}c._categoriesValue=m;var D=[];for(a=0;a<m.length;a++){D.push([m[a][0],u[d](m[a][1])])}D.sort(function(e,t){return e[1]-t[1]});c._categoriesAggregatedValue=D;c._initialCategories=D.map(function(e){return e[0]});if(v==="descending"){c._initialCategories.reverse()}t=t.concat(c.sortByInitialCategories())}}return t}function A(e,t,r){var a={};function n(e){e.clearCalc();if(e.type==="multicategory"){e.setupMultiCategory(t)}a[e._id]=1}j.simpleMap(e,n);var i=r._axisMatchGroups||[];for(var o=0;o<i.length;o++){for(var s in i[o]){if(!a[s]){n(r[O.id2name(s)])}}}}function S(e){var t=e._fullLayout;var r=t._visibleModules;var a={};var n,i,o;for(i=0;i<r.length;i++){var s=r[i];var l=s.crossTraceCalc;if(l){var u=s.basePlotModule.name;if(a[u]){j.pushUnique(a[u],l)}else{a[u]=[l]}}}for(o in a){var c=a[o];var f=t._subplots[o];if(Array.isArray(f)){for(n=0;n<f.length;n++){var d=f[n];var v=o==="cartesian"?t._plots[d]:t[d];for(i=0;i<c.length;i++){c[i](e,v,d)}}}else{for(i=0;i<c.length;i++){c[i](e)}}}}U.rehover=function(e){if(e._fullLayout._rehover){e._fullLayout._rehover()}};U.redrag=function(e){if(e._fullLayout._redrag){e._fullLayout._redrag()}};U.generalUpdatePerTraceModule=function(e,t,r,a){var n=t.traceHash;var i={};var o;for(o=0;o<r.length;o++){var s=r[o];var l=s[0].trace;if(l.visible){i[l.type]=i[l.type]||[];i[l.type].push(s)}}for(var u in n){if(!i[u]){var c=n[u][0];var f=c[0].trace;f.visible=false;i[u]=[c]}}for(var d in i){var v=i[d];var p=v[0][0].trace._module;p.plot(e,t,j.filterVisible(v),a)}t.traceHash=i};U.plotBasePlot=function(e,t,r,a,n){var i=F.getModule(e);var o=s(t.calcdata,i)[0];i.plot(t,o,a,n)};U.cleanBasePlot=function(e,t,r,a,n){var i=n._has&&n._has(e);var o=r._has&&r._has(e);if(i&&!o){n["_"+e+"layer"].selectAll("g.trace").remove()}}},{"../components/color":155,"../constants/numerical":265,"../lib":285,"../plot_api/plot_schema":319,"../plot_api/plot_template":320,"../plots/get_data":362,"../registry":373,"./animation_attributes":325,"./attributes":327,"./cartesian/axis_ids":335,"./cartesian/handle_outline":342,"./command":358,"./font_attributes":360,"./frame_attributes":361,"./layout_attributes":364,"@plotly/d3":20,"d3-time-format":29,"fast-isnumeric":31}],367:[function(e,t,r){"use strict";var y=e("../lib");var x=e("../plot_api/plot_template");var b=e("./domain").defaults;t.exports=function e(t,r,a,n){var i=n.type;var o=n.attributes;var s=n.handleDefaults;var l=n.partition||"x";var u=r._subplots[i];var c=u.length;var f=c&&u[0].replace(/\d+$/,"");var d,v;function p(e,t){return y.coerce(d,v,o,e,t)}for(var h=0;h<c;h++){var m=u[h];if(t[m])d=t[m];else d=t[m]={};v=x.newContainer(r,m,f);p("uirevision",r.uirevision);var g={};g[l]=[h/c,(h+1)/c];b(v,r,p,g);n.id=m;s(d,v,p,n)}}},{"../lib":285,"../plot_api/plot_template":320,"./domain":359}],368:[function(e,t,r){"use strict";var a=e("../constants/docs");var n=a.FORMAT_LINK;var i=a.DATE_FORMAT_LINK;function o(e){var t=e&&e.supportOther;return["Variables are inserted using %{variable},",'for example "y: %{y}"'+(t?" as well as %{xother}, {%_xother}, {%_xother_}, {%xother_}. When showing info for several points, *xother* will be added to those with different x positions from the first point. An underscore before or after *(x|y)other* will add a space on that side, only when this field is shown.":"."),'Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',n,"for details on the formatting syntax.",'Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',i,"for details on the date formatting syntax."].join(" ")}function s(e){var t=e.description?" "+e.description:"";var r=e.keys||[];if(r.length>0){var a=[];for(var n=0;n<r.length;n++){a[n]="`"+r[n]+"`"}t=t+"Finally, the template string has access to ";if(r.length===1){t="variable "+a[0]}else{t="variables "+a.slice(0,-1).join(", ")+" and "+a.slice(-1)+"."}}return t}r.hovertemplateAttrs=function(e,t){e=e||{};t=t||{};var r=s(t);var a={valType:"string",dflt:"",editType:e.editType||"none"};if(e.arrayOk!==false){a.arrayOk=true}return a};r.texttemplateAttrs=function(e,t){e=e||{};t=t||{};var r=s(t);var a={valType:"string",dflt:"",editType:e.editType||"calc"};if(e.arrayOk!==false){a.arrayOk=true}return a}},{"../constants/docs":262}],369:[function(e,t,r){"use strict";var u=e("./ternary");var c=e("../../plots/get_data").getSubplotCalcData;var a=e("../../lib").counterRegex;var f="ternary";r.name=f;var n=r.attr="subplot";r.idRoot=f;r.idRegex=r.attrRegex=a(f);var i=r.attributes={};i[n]={valType:"subplotid",dflt:"ternary",editType:"calc"};r.layoutAttributes=e("./layout_attributes");r.supplyLayoutDefaults=e("./layout_defaults");r.plot=function e(t){var r=t._fullLayout;var a=t.calcdata;var n=r._subplots[f];for(var i=0;i<n.length;i++){var o=n[i];var s=c(a,f,o);var l=r[o]._subplot;if(!l){l=new u({id:o,graphDiv:t,container:r._ternarylayer.node()},r);r[o]._subplot=l}l.plot(s,r,t._promises)}};r.clean=function(e,t,r,a){var n=a._subplots[f]||[];for(var i=0;i<n.length;i++){var o=n[i];var s=a[o]._subplot;if(!t[o]&&!!s){s.plotContainer.remove();s.clipDef.remove();s.clipDefRelative.remove();s.layers["a-title"].remove();s.layers["b-title"].remove();s.layers["c-title"].remove()}}}},{"../../lib":285,"../../plots/get_data":362,"./layout_attributes":370,"./layout_defaults":371,"./ternary":372}],370:[function(e,t,r){"use strict";var a=e("../../components/color/attributes");var n=e("../domain").attributes;var i=e("../cartesian/layout_attributes");var o=e("../../plot_api/edit_types").overrideAll;var s=e("../../lib/extend").extendFlat;var l={title:{text:i.title.text,font:i.title.font},color:i.color,tickmode:i.tickmode,nticks:s({},i.nticks,{dflt:6,min:1}),tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:i.ticks,ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,showticklabels:i.showticklabels,showtickprefix:i.showtickprefix,tickprefix:i.tickprefix,showticksuffix:i.showticksuffix,ticksuffix:i.ticksuffix,showexponent:i.showexponent,exponentformat:i.exponentformat,minexponent:i.minexponent,separatethousands:i.separatethousands,tickfont:i.tickfont,tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,hoverformat:i.hoverformat,showline:s({},i.showline,{dflt:true}),linecolor:i.linecolor,linewidth:i.linewidth,showgrid:s({},i.showgrid,{dflt:true}),gridcolor:i.gridcolor,gridwidth:i.gridwidth,layer:i.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:i._deprecated.title,titlefont:i._deprecated.titlefont}};var u=t.exports=o({domain:n({name:"ternary"}),bgcolor:{valType:"color",dflt:a.background},sum:{valType:"number",dflt:1,min:0},aaxis:l,baxis:l,caxis:l},"plot","from-root");u.uirevision={valType:"any",editType:"none"};u.aaxis.uirevision=u.baxis.uirevision=u.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":154,"../../lib/extend":279,"../../plot_api/edit_types":313,"../cartesian/layout_attributes":346,"../domain":359}],371:[function(e,t,r){"use strict";var v=e("../../components/color");var p=e("../../plot_api/plot_template");var h=e("../../lib");var n=e("../subplot_defaults");var m=e("../cartesian/tick_label_defaults");var g=e("../cartesian/tick_mark_defaults");var y=e("../cartesian/tick_value_defaults");var x=e("../cartesian/line_grid_defaults");var b=e("./layout_attributes");var _=["aaxis","baxis","caxis"];t.exports=function e(t,r,a){n(t,r,a,{type:"ternary",attributes:b,handleDefaults:i,font:r.font,paper_bgcolor:r.paper_bgcolor})};function i(e,t,r,a){var n=r("bgcolor");var i=r("sum");a.bgColor=v.combine(n,a.paper_bgcolor);var o,s,l;for(var u=0;u<_.length;u++){o=_[u];s=e[o]||{};l=p.newContainer(t,o);l._name=o;w(s,l,a,t)}var c=t.aaxis;var f=t.baxis;var d=t.caxis;if(c.min+f.min+d.min>=i){c.min=0;f.min=0;d.min=0;if(e.aaxis)delete e.aaxis.min;if(e.baxis)delete e.baxis.min;if(e.caxis)delete e.caxis.min}}function w(r,a,e,t){var n=b[a._name];function i(e,t){return h.coerce(r,a,n,e,t)}i("uirevision",t.uirevision);a.type="linear";var o=i("color");var s=o!==n.color.dflt?o:e.font.color;var l=a._name;var u=l.charAt(0).toUpperCase();var c="Component "+u;var f=i("title.text",c);a._hovertitle=f===c?f:u;h.coerceFont(i,"title.font",{family:e.font.family,size:h.bigFont(e.font.size),color:s});i("min");y(r,a,i,"linear");m(r,a,i,"linear",{});g(r,a,i,{outerTicks:true});var d=i("showticklabels");if(d){h.coerceFont(i,"tickfont",{family:e.font.family,size:e.font.size,color:s});i("tickangle");i("tickformat")}x(r,a,i,{dfltColor:o,bgColor:e.bgColor,blend:60,showLine:true,showGrid:true,noZeroLine:true,attributes:n});i("hoverformat");i("layer")}},{"../../components/color":155,"../../lib":285,"../../plot_api/plot_template":320,"../cartesian/line_grid_defaults":348,"../cartesian/tick_label_defaults":353,"../cartesian/tick_mark_defaults":354,"../cartesian/tick_value_defaults":355,"../subplot_defaults":367,"./layout_attributes":370}],372:[function(e,t,r){"use strict";var o=e("@plotly/d3");var D=e("tinycolor2");var a=e("../../registry");var O=e("../../lib");var I=O.strTranslate;var P=O._;var R=e("../../components/color");var N=e("../../components/drawing");var C=e("../cartesian/set_convert");var z=e("../../lib/extend").extendFlat;var s=e("../plots");var _=e("../cartesian/axes");var F=e("../../components/dragelement");var j=e("../../components/fx");var n=e("../../components/dragelement/helpers");var H=n.freeMode;var B=n.rectMode;var c=e("../../components/titles");var q=e("../cartesian/select").prepSelect;var U=e("../cartesian/select").selectOnClick;var i=e("../cartesian/select").clearSelect;var l=e("../cartesian/select").clearSelectionsCache;var Y=e("../cartesian/constants");function u(e,t){this.id=e.id;this.graphDiv=e.graphDiv;this.init(t);this.makeFramework(t);this.aTickLayout=null;this.bTickLayout=null;this.cTickLayout=null}t.exports=u;var f=u.prototype;f.init=function(e){this.container=e._ternarylayer;this.defs=e._defs;this.layoutId=e._uid;this.traceHash={};this.layers={}};f.plot=function(e,t){var r=this;var a=t[r.id];var n=t._size;r._hasClipOnAxisFalse=false;for(var i=0;i<e.length;i++){var o=e[i][0].trace;if(o.cliponaxis===false){r._hasClipOnAxisFalse=true;break}}r.updateLayers(a);r.adjustLayout(a,n);s.generalUpdatePerTraceModule(r.graphDiv,r,e,a);r.layers.plotbg.select("path").call(R.fill,a.bgcolor)};f.makeFramework=function(e){var t=this;var r=t.graphDiv;var a=e[t.id];var n=t.clipId="clip"+t.layoutId+t.id;var i=t.clipIdRelative="clip-relative"+t.layoutId+t.id;t.clipDef=O.ensureSingleById(e._clips,"clipPath",n,function(e){e.append("path").attr("d","M0,0Z")});t.clipDefRelative=O.ensureSingleById(e._clips,"clipPath",i,function(e){e.append("path").attr("d","M0,0Z")});t.plotContainer=O.ensureSingle(t.container,"g",t.id);t.updateLayers(a);N.setClipUrl(t.layers.backplot,n,r);N.setClipUrl(t.layers.grids,n,r)};f.updateLayers=function(e){var t=this;var r=t.layers;var a=["draglayer","plotbg","backplot","grids"];if(e.aaxis.layer==="below traces"){a.push("aaxis","aline")}if(e.baxis.layer==="below traces"){a.push("baxis","bline")}if(e.caxis.layer==="below traces"){a.push("caxis","cline")}a.push("frontplot");if(e.aaxis.layer==="above traces"){a.push("aaxis","aline")}if(e.baxis.layer==="above traces"){a.push("baxis","bline")}if(e.caxis.layer==="above traces"){a.push("caxis","cline")}var n=t.plotContainer.selectAll("g.toplevel").data(a,String);var i=["agrid","bgrid","cgrid"];n.enter().append("g").attr("class",function(e){return"toplevel "+e}).each(function(e){var t=o.select(this);r[e]=t;if(e==="frontplot"){t.append("g").classed("scatterlayer",true)}else if(e==="backplot"){t.append("g").classed("maplayer",true)}else if(e==="plotbg"){t.append("path").attr("d","M0,0Z")}else if(e==="aline"||e==="bline"||e==="cline"){t.append("path")}else if(e==="grids"){i.forEach(function(e){r[e]=t.append("g").classed("grid "+e,true)})}});n.order()};var V=Math.sqrt(4/3);f.adjustLayout=function(e,t){var r=this;var a=e.domain;var n=(a.x[0]+a.x[1])/2;var i=(a.y[0]+a.y[1])/2;var o=a.x[1]-a.x[0];var s=a.y[1]-a.y[0];var l=o*t.w;var u=s*t.h;var c=e.sum;var f=e.aaxis.min;var d=e.baxis.min;var v=e.caxis.min;var p,h,m,g,y,x;if(l>V*u){g=u;m=g*V}else{m=l;g=m/V}y=o*m/l;x=s*g/u;p=t.l+t.w*n-m/2;h=t.t+t.h*(1-i)-g/2;r.x0=p;r.y0=h;r.w=m;r.h=g;r.sum=c;r.xaxis={type:"linear",range:[f+2*v-c,c-f-2*d],domain:[n-y/2,n+y/2],_id:"x"};C(r.xaxis,r.graphDiv._fullLayout);r.xaxis.setScale();r.xaxis.isPtWithinRange=function(e){return e.a>=r.aaxis.range[0]&&e.a<=r.aaxis.range[1]&&e.b>=r.baxis.range[1]&&e.b<=r.baxis.range[0]&&e.c>=r.caxis.range[1]&&e.c<=r.caxis.range[0]};r.yaxis={type:"linear",range:[f,c-d-v],domain:[i-x/2,i+x/2],_id:"y"};C(r.yaxis,r.graphDiv._fullLayout);r.yaxis.setScale();r.yaxis.isPtWithinRange=function(){return true};var b=r.yaxis.domain[0];var _=r.aaxis=z({},e.aaxis,{range:[f,c-d-v],side:"left",tickangle:(+e.aaxis.tickangle||0)-30,domain:[b,b+x*V],anchor:"free",position:0,_id:"y",_length:m});C(_,r.graphDiv._fullLayout);_.setScale();var w=r.baxis=z({},e.baxis,{range:[c-f-v,d],side:"bottom",domain:r.xaxis.domain,anchor:"free",position:0,_id:"x",_length:m});C(w,r.graphDiv._fullLayout);w.setScale();var T=r.caxis=z({},e.caxis,{range:[c-f-d,v],side:"right",tickangle:(+e.caxis.tickangle||0)+30,domain:[b,b+x*V],anchor:"free",position:0,_id:"y",_length:m});C(T,r.graphDiv._fullLayout);T.setScale();var k="M"+p+","+(h+g)+"h"+m+"l-"+m/2+",-"+g+"Z";r.clipDef.select("path").attr("d",k);r.layers.plotbg.select("path").attr("d",k);var M="M0,"+g+"h"+m+"l-"+m/2+",-"+g+"Z";r.clipDefRelative.select("path").attr("d",M);var A=I(p,h);r.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",A);r.clipDefRelative.select("path").attr("transform",null);var S=I(p-w._offset,h+g);r.layers.baxis.attr("transform",S);r.layers.bgrid.attr("transform",S);var E=I(p+m/2,h)+"rotate(30)"+I(0,-_._offset);r.layers.aaxis.attr("transform",E);r.layers.agrid.attr("transform",E);var L=I(p+m/2,h)+"rotate(-30)"+I(0,-T._offset);r.layers.caxis.attr("transform",L);r.layers.cgrid.attr("transform",L);r.drawAxes(true);r.layers.aline.select("path").attr("d",_.showline?"M"+p+","+(h+g)+"l"+m/2+",-"+g:"M0,0").call(R.stroke,_.linecolor||"#000").style("stroke-width",(_.linewidth||0)+"px");r.layers.bline.select("path").attr("d",w.showline?"M"+p+","+(h+g)+"h"+m:"M0,0").call(R.stroke,w.linecolor||"#000").style("stroke-width",(w.linewidth||0)+"px");r.layers.cline.select("path").attr("d",T.showline?"M"+(p+m/2)+","+h+"l"+m/2+","+g:"M0,0").call(R.stroke,T.linecolor||"#000").style("stroke-width",(T.linewidth||0)+"px");if(!r.graphDiv._context.staticPlot){r.initInteractions()}N.setClipUrl(r.layers.frontplot,r._hasClipOnAxisFalse?null:r.clipId,r.graphDiv)};f.drawAxes=function(e){var t=this;var r=t.graphDiv;var a=t.id.substr(7)+"title";var n=t.layers;var i=t.aaxis;var o=t.baxis;var s=t.caxis;t.drawAx(i);t.drawAx(o);t.drawAx(s);if(e){var l=Math.max(i.showticklabels?i.tickfont.size/2:0,(s.showticklabels?s.tickfont.size*.75:0)+(s.ticks==="outside"?s.ticklen*.87:0));var u=(o.showticklabels?o.tickfont.size:0)+(o.ticks==="outside"?o.ticklen:0)+3;n["a-title"]=c.draw(r,"a"+a,{propContainer:i,propName:t.id+".aaxis.title",placeholder:P(r,"Click to enter Component A title"),attributes:{x:t.x0+t.w/2,y:t.y0-i.title.font.size/3-l,"text-anchor":"middle"}});n["b-title"]=c.draw(r,"b"+a,{propContainer:o,propName:t.id+".baxis.title",placeholder:P(r,"Click to enter Component B title"),attributes:{x:t.x0-u,y:t.y0+t.h+o.title.font.size*.83+u,"text-anchor":"middle"}});n["c-title"]=c.draw(r,"c"+a,{propContainer:s,propName:t.id+".caxis.title",placeholder:P(r,"Click to enter Component C title"),attributes:{x:t.x0+t.w+u,y:t.y0+t.h+s.title.font.size*.83+u,"text-anchor":"middle"}})}};f.drawAx=function(e){var t=this;var r=t.graphDiv;var a=e._name;var n=a.charAt(0);var i=e._id;var o=t.layers[a];var s=30;var l=n+"tickLayout";var u=w(e);if(t[l]!==u){o.selectAll("."+i+"tick").remove();t[l]=u}e.setScale();var c=_.calcTicks(e);var f=_.clipEnds(e,c);var d=_.makeTransTickFn(e);var v=_.getTickSigns(e)[2];var p=O.deg2rad(s);var h=v*(e.linewidth||1)/2;var m=v*e.ticklen;var g=t.w;var y=t.h;var x=n==="b"?"M0,"+h+"l"+Math.sin(p)*m+","+Math.cos(p)*m:"M"+h+",0l"+Math.cos(p)*m+","+-Math.sin(p)*m;var b={a:"M0,0l"+y+",-"+g/2,b:"M0,0l-"+g/2+",-"+y,c:"M0,0l-"+y+","+g/2}[n];_.drawTicks(r,e,{vals:e.ticks==="inside"?f:c,layer:o,path:x,transFn:d,crisp:false});_.drawGrid(r,e,{vals:f,layer:t.layers[n+"grid"],path:b,transFn:d,crisp:false});_.drawLabels(r,e,{vals:c,layer:o,transFn:d,labelFns:_.makeLabelFns(e,0,s)})};function w(e){return e.ticks+String(e.ticklen)+String(e.showticklabels)}var d=Y.MINZOOM/2+.87;var G="m-0.87,.5h"+d+"v3h-"+(d+5.2)+"l"+(d/2+2.6)+",-"+(d*.87+4.5)+"l2.6,1.5l-"+d/2+","+d*.87+"Z";var W="m0.87,.5h-"+d+"v3h"+(d+5.2)+"l-"+(d/2+2.6)+",-"+(d*.87+4.5)+"l-2.6,1.5l"+d/2+","+d*.87+"Z";var $="m0,1l"+d/2+","+d*.87+"l2.6,-1.5l-"+(d/2+2.6)+",-"+(d*.87+4.5)+"l-"+(d/2+2.6)+","+(d*.87+4.5)+"l2.6,1.5l"+d/2+",-"+d*.87+"Z";var Z="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z";var X=true;f.clearSelect=function(){l(this.dragOptions);i(this.dragOptions.gd)};f.initInteractions=function(){var v=this;var o=v.layers.plotbg.select("path").node();var p=v.graphDiv;var s=p._fullLayout._zoomlayer;var h;var m;this.dragOptions={element:o,gd:p,plotinfo:{id:v.id,domain:p._fullLayout[v.id].domain,xaxis:v.xaxis,yaxis:v.yaxis},subplot:v.id,prepFn:function(e,t,r){v.dragOptions.xaxes=[v.xaxis];v.dragOptions.yaxes=[v.yaxis];h=p._fullLayout._invScaleX;m=p._fullLayout._invScaleY;var a=v.dragOptions.dragmode=p._fullLayout.dragmode;if(H(a))v.dragOptions.minDrag=1;else v.dragOptions.minDrag=undefined;if(a==="zoom"){v.dragOptions.moveFn=l;v.dragOptions.clickFn=n;v.dragOptions.doneFn=u;i(e,t,r)}else if(a==="pan"){v.dragOptions.moveFn=f;v.dragOptions.clickFn=n;v.dragOptions.doneFn=d;c();v.clearSelect(p)}else if(B(a)||H(a)){q(e,t,r,v.dragOptions,a)}}};var g,y,x,b,_,w,T,k,M,A;function S(e){var t={};t[v.id+".aaxis.min"]=e.a;t[v.id+".baxis.min"]=e.b;t[v.id+".caxis.min"]=e.c;return t}function n(e,t){var r=p._fullLayout.clickmode;J(p);if(e===2){p.emit("plotly_doubleclick",null);a.call("_guiRelayout",p,S({a:0,b:0,c:0}))}if(r.indexOf("select")>-1&&e===1){U(t,p,[v.xaxis],[v.yaxis],v.id,v.dragOptions)}if(r.indexOf("event")>-1){j.click(p,t,v.id)}}function i(e,t,r){var a=o.getBoundingClientRect();g=t-a.left;y=r-a.top;p._fullLayout._calcInverseTransform(p);var n=p._fullLayout._invTransform;var i=O.apply3DTransform(n)(g,y);g=i[0];y=i[1];x={a:v.aaxis.range[0],b:v.baxis.range[1],c:v.caxis.range[1]};_=x;b=v.aaxis.range[1]-x.a;w=D(v.graphDiv._fullLayout[v.id].bgcolor).getLuminance();T="M0,"+v.h+"L"+v.w/2+", 0L"+v.w+","+v.h+"Z";k=false;M=s.append("path").attr("class","zoombox").attr("transform",I(v.x0,v.y0)).style({fill:w>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",T);A=s.append("path").attr("class","zoombox-corners").attr("transform",I(v.x0,v.y0)).style({fill:R.background,stroke:R.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z");v.clearSelect(p)}function E(e,t){return 1-t/v.h}function L(e,t){return 1-(e+(v.h-t)/Math.sqrt(3))/v.w}function C(e,t){return(e-(v.h-t)/Math.sqrt(3))/v.w}function l(e,t){var r=g+e*h;var a=y+t*m;var n=Math.max(0,Math.min(1,E(g,y),E(r,a)));var i=Math.max(0,Math.min(1,L(g,y),L(r,a)));var o=Math.max(0,Math.min(1,C(g,y),C(r,a)));var s=(n/2+o)*v.w;var l=(1-n/2-i)*v.w;var u=(s+l)/2;var c=l-s;var f=(1-n)*v.h;var d=f-c/V;if(c<Y.MINZOOM){_=x;M.attr("d",T);A.attr("d","M0,0Z")}else{_={a:x.a+n*b,b:x.b+i*b,c:x.c+o*b};M.attr("d",T+"M"+s+","+f+"H"+l+"L"+u+","+d+"L"+s+","+f+"Z");A.attr("d","M"+g+","+y+Z+"M"+s+","+f+G+"M"+l+","+f+W+"M"+u+","+d+$)}if(!k){M.transition().style("fill",w>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200);A.transition().style("opacity",1).duration(200);k=true}p.emit("plotly_relayouting",S(_))}function u(){J(p);if(_===x)return;a.call("_guiRelayout",p,S(_));if(X&&p.data&&p._context.showTips){O.notifier(P(p,"Double-click to zoom back out"),"long");X=false}}function c(){x={a:v.aaxis.range[0],b:v.baxis.range[1],c:v.caxis.range[1]};_=x}function f(e,t){var r=e/v.xaxis._m;var a=t/v.yaxis._m;_={a:x.a-a,b:x.b+(r+a)/2,c:x.c-(r-a)/2};var n=[_.a,_.b,_.c].sort(O.sorterAsc);var i={a:n.indexOf(_.a),b:n.indexOf(_.b),c:n.indexOf(_.c)};if(n[0]<0){if(n[1]+n[0]/2<0){n[2]+=n[0]+n[1];n[0]=n[1]=0}else{n[2]+=n[0]/2;n[1]+=n[0]/2;n[0]=0}_={a:n[i.a],b:n[i.b],c:n[i.c]};t=(x.a-_.a)*v.yaxis._m;e=(x.c-_.c-x.b+_.b)*v.xaxis._m}var o=I(v.x0+e,v.y0+t);v.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",o);var s=I(-e,-t);v.clipDefRelative.select("path").attr("transform",s);v.aaxis.range=[_.a,v.sum-_.b-_.c];v.baxis.range=[v.sum-_.a-_.c,_.b];v.caxis.range=[v.sum-_.a-_.b,_.c];v.drawAxes(false);if(v._hasClipOnAxisFalse){v.plotContainer.select(".scatterlayer").selectAll(".trace").call(N.hideOutsideRangePoints,v)}p.emit("plotly_relayouting",S(_))}function d(){a.call("_guiRelayout",p,S(_))}o.onmousemove=function(e){j.hover(p,e,v.id);p._fullLayout._lasthover=o;p._fullLayout._hoversubplot=v.id};o.onmouseout=function(e){if(p._dragging)return;F.unhover(p,e)};F.init(this.dragOptions)};function J(e){o.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},{"../../components/color":155,"../../components/dragelement":174,"../../components/dragelement/helpers":173,"../../components/drawing":177,"../../components/fx":195,"../../components/titles":253,"../../lib":285,"../../lib/extend":279,"../../registry":373,"../cartesian/axes":331,"../cartesian/constants":338,"../cartesian/select":351,"../cartesian/set_convert":352,"../plots":366,"@plotly/d3":20,tinycolor2:119}],373:[function(e,t,f){"use strict";var d=e("./lib/loggers");var a=e("./lib/noop");var i=e("./lib/push_unique");var o=e("./lib/is_plain_object");var v=e("./lib/dom").addStyleRule;var r=e("./lib/extend");var n=e("./plots/attributes");var s=e("./plots/layout_attributes");var p=r.extendFlat;var l=r.extendDeepAll;f.modules={};f.allCategories={};f.allTypes=[];f.subplotsRegistry={};f.transformsRegistry={};f.componentsRegistry={};f.layoutArrayContainers=[];f.layoutArrayRegexes=[];f.traceLayoutAttributes={};f.localeRegistry={};f.apiMethodRegistry={};f.collectableSubplotTypes=null;f.register=function e(t){f.collectableSubplotTypes=null;if(!t){throw new Error("No argument passed to Plotly.register.")}else if(t&&!Array.isArray(t)){t=[t]}for(var r=0;r<t.length;r++){var a=t[r];if(!a){throw new Error("Invalid module was attempted to be registered!")}switch(a.moduleType){case"trace":u(a);break;case"transform":m(a);break;case"component":c(a);break;case"locale":g(a);break;case"apiMethod":var n=a.name;f.apiMethodRegistry[n]=a.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}};f.getModule=function(e){var t=f.modules[w(e)];if(!t)return false;return t._module};f.traceIs=function(e,t){e=w(e);if(e==="various")return false;var r=f.modules[e];if(!r){if(e){d.log("Unrecognized trace type "+e+".")}r=f.modules[n.type.dflt]}return!!r.categories[t]};f.getTransformIndices=function(e,t){var r=[];var a=e.transforms||[];for(var n=0;n<a.length;n++){if(a[n].type===t){r.push(n)}}return r};f.hasTransform=function(e,t){var r=e.transforms||[];for(var a=0;a<r.length;a++){if(r[a].type===t){return true}}return false};f.getComponentMethod=function(e,t){var r=f.componentsRegistry[e];if(!r)return a;return r[t]||a};f.call=function(){var e=arguments[0];var t=[].slice.call(arguments,1);return f.apiMethodRegistry[e].apply(null,t)};function u(e){var t=e.name;var r=e.categories;var a=e.meta;if(f.modules[t]){d.log("Type "+t+" already registered");return}if(!f.subplotsRegistry[e.basePlotModule.name]){h(e.basePlotModule)}var n={};for(var i=0;i<r.length;i++){n[r[i]]=true;f.allCategories[r[i]]=true}f.modules[t]={_module:e,categories:n};if(a&&Object.keys(a).length){f.modules[t].meta=a}f.allTypes.push(t);for(var o in f.componentsRegistry){x(o,t)}if(e.layoutAttributes){p(f.traceLayoutAttributes,e.layoutAttributes)}var s=e.basePlotModule;var l=s.name;if(l==="mapbox"){var u=s.constants.styleRules;for(var c in u){v(".js-plotly-plot .plotly .mapboxgl-"+c,u[c])}}if((l==="geo"||l==="mapbox")&&(typeof window!==undefined&&window.PlotlyGeoAssets===undefined)){window.PlotlyGeoAssets={topojson:{}}}}function h(e){var t=e.name;if(f.subplotsRegistry[t]){d.log("Plot type "+t+" already registered.");return}y(e);f.subplotsRegistry[t]=e;for(var r in f.componentsRegistry){_(r,e.name)}}function c(e){if(typeof e.name!=="string"){throw new Error("Component module *name* must be a string.")}var t=e.name;f.componentsRegistry[t]=e;if(e.layoutAttributes){if(e.layoutAttributes._isLinkedToArray){i(f.layoutArrayContainers,t)}y(e)}for(var r in f.modules){x(t,r)}for(var a in f.subplotsRegistry){_(t,a)}for(var n in f.transformsRegistry){b(t,n)}if(e.schema&&e.schema.layout){l(s,e.schema.layout)}}function m(e){if(typeof e.name!=="string"){throw new Error("Transform module *name* must be a string.")}var t="Transform module "+e.name;var r=typeof e.transform==="function";var a=typeof e.calcTransform==="function";if(!r&&!a){throw new Error(t+" is missing a *transform* or *calcTransform* method.")}if(r&&a){d.log([t+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" "))}if(!o(e.attributes)){d.log(t+" registered without an *attributes* object.")}if(typeof e.supplyDefaults!=="function"){d.log(t+" registered without a *supplyDefaults* method.")}f.transformsRegistry[e.name]=e;for(var n in f.componentsRegistry){b(n,e.name)}}function g(e){var t=e.name;var r=t.split("-")[0];var a=e.dictionary;var n=e.format;var i=a&&Object.keys(a).length;var o=n&&Object.keys(n).length;var s=f.localeRegistry;var l=s[t];if(!l)s[t]=l={};if(r!==t){var u=s[r];if(!u)s[r]=u={};if(i&&u.dictionary===l.dictionary){u.dictionary=a}if(o&&u.format===l.format){u.format=n}}if(i)l.dictionary=a;if(o)l.format=n}function y(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t){for(var r=0;r<t.length;r++){i(f.layoutArrayRegexes,t[r])}}}}function x(e,t){var r=f.componentsRegistry[e].schema;if(!r||!r.traces)return;var a=r.traces[t];if(a){l(f.modules[t]._module.attributes,a)}}function b(e,t){var r=f.componentsRegistry[e].schema;if(!r||!r.transforms)return;var a=r.transforms[t];if(a){l(f.transformsRegistry[t].attributes,a)}}function _(e,t){var r=f.componentsRegistry[e].schema;if(!r||!r.subplots)return;var a=f.subplotsRegistry[t];var n=a.layoutAttributes;var i=a.attr==="subplot"?a.name:a.attr;if(Array.isArray(i))i=i[0];var o=r.subplots[i];if(n&&o){l(n,o)}}function w(e){if(typeof e==="object")e=e.type;return e}},{"./lib/dom":277,"./lib/extend":279,"./lib/is_plain_object":286,"./lib/loggers":289,"./lib/noop":294,"./lib/push_unique":299,"./plots/attributes":327,"./plots/layout_attributes":364}],374:[function(e,t,r){"use strict";var m=e("../registry");var a=e("../lib");var g=a.extendFlat;var y=a.extendDeep;function x(e){var t;switch(e){case"themes__thumb":t={autosize:true,width:150,height:150,title:{text:""},showlegend:false,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:true,showlegend:false,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function b(e){var t=["xaxis","yaxis","zaxis"];return t.indexOf(e.slice(0,5))>-1}t.exports=function e(t,r){var a;var n=t.data;var i=t.layout;var o=y([],n);var s=y({},i,x(r.tileClass));var l=t._context||{};if(r.width)s.width=r.width;if(r.height)s.height=r.height;if(r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){s.annotations=[];var u=Object.keys(s);for(a=0;a<u.length;a++){if(b(u[a])){s[u[a]].title={text:""}}}for(a=0;a<o.length;a++){var c=o[a];c.showscale=false;if(c.marker)c.marker.showscale=false;if(m.traceIs(c,"pie-like"))c.textposition="none"}}if(Array.isArray(r.annotations)){for(a=0;a<r.annotations.length;a++){s.annotations.push(r.annotations[a])}}var f=Object.keys(s).filter(function(e){return e.match(/^scene\d*$/)});if(f.length){var d={};if(r.tileClass==="thumbnail"){d={title:{text:""},showaxeslabels:false,showticklabels:false,linetickenable:false}}for(a=0;a<f.length;a++){var v=s[f[a]];if(!v.xaxis){v.xaxis={}}if(!v.yaxis){v.yaxis={}}if(!v.zaxis){v.zaxis={}}g(v.xaxis,d);g(v.yaxis,d);g(v.zaxis,d);v._scene=null}}var p=document.createElement("div");if(r.tileClass)p.className=r.tileClass;var h={gd:p,td:p,layout:s,data:o,config:{staticPlot:r.staticPlot===undefined?true:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===undefined?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||false,showLink:r.showLink||false,showTips:r.showTips||false,mapboxAccessToken:l.mapboxAccessToken}};if(r.setBackground!=="transparent"){h.config.setBackground=r.setBackground||"opaque"}h.gd.defaultLayout=x(r.tileClass);return h}},{"../lib":285,"../registry":373}],375:[function(e,t,r){"use strict";var s=e("../lib");var l=e("../plot_api/to_image");var u=e("./filesaver");var c=e("./helpers");function a(n,i){var o;if(!s.isPlainObject(n))o=s.getGraphDiv(n);i=i||{};i.format=i.format||"png";i.width=i.width||null;i.height=i.height||null;i.imageDataOnly=true;return new Promise(function(t,r){if(o&&o._snapshotInProgress){r(new Error("Snapshotting already in progress."))}if(s.isIE()&&i.format!=="svg"){r(new Error(c.MSG_IE_BAD_FORMAT))}if(o)o._snapshotInProgress=true;var e=l(n,i);var a=i.filename||n.fn||"newplot";a+="."+i.format.replace("-",".");e.then(function(e){if(o)o._snapshotInProgress=false;return u(e,a,i.format)}).then(function(e){t(e)}).catch(function(e){if(o)o._snapshotInProgress=false;r(e)})})}t.exports=a},{"../lib":285,"../plot_api/to_image":323,"./filesaver":376,"./helpers":377}],376:[function(e,t,r){"use strict";var c=e("../lib");var f=e("./helpers");function a(i,o,s){var l=document.createElement("a");var u="download"in l;var e=new Promise(function(e,t){var r;var a;if(c.isSafari()){var n=s==="svg"?",":";base64,";f.octetStream(n+encodeURIComponent(i));return e(o)}if(c.isIE()){r=f.createBlob(i,"svg");window.navigator.msSaveBlob(r,o);r=null;return e(o)}if(u){r=f.createBlob(i,s);a=f.createObjectURL(r);l.href=a;l.download=o;document.body.appendChild(l);l.click();document.body.removeChild(l);f.revokeObjectURL(a);r=null;return e(o)}t(new Error("download error"))});return e}t.exports=a},{"../lib":285,"./helpers":377}],377:[function(e,t,r){"use strict";var a=e("../registry");r.getDelay=function(e){if(!e._has)return 0;return e._has("gl3d")||e._has("gl2d")||e._has("mapbox")?500:0};r.getRedrawFunc=function(e){return function(){a.getComponentMethod("colorbar","draw")(e)}};r.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)};r.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var n=window.URL||window.webkitURL;r.createObjectURL=function(e){return n.createObjectURL(e)};r.revokeObjectURL=function(e){return n.revokeObjectURL(e)};r.createBlob=function(e,t){if(t==="svg"){return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"})}else if(t==="full-json"){return new window.Blob([e],{type:"application/json;charset=utf-8"})}else{var r=i(window.atob(e));return new window.Blob([r],{type:"image/"+t})}};r.octetStream=function(e){document.location.href="data:application/octet-stream"+e};function i(e){var t=e.length;var r=new ArrayBuffer(t);var a=new Uint8Array(r);for(var n=0;n<t;n++){a[n]=e.charCodeAt(n)}return r}r.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;r.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":373}],378:[function(e,t,r){"use strict";var a=e("./helpers");var n={getDelay:a.getDelay,getRedrawFunc:a.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};t.exports=n},{"./cloneplot":374,"./download":375,"./helpers":377,"./svgtoimg":379,"./toimage":380,"./tosvg":381}],379:[function(e,t,r){"use strict";var x=e("../lib");var a=e("events").EventEmitter;var b=e("./helpers");function n(m){var g=m.emitter||new a;var y=new Promise(function(r,a){var e=window.Image;var t=m.svg;var n=m.format||"png";if(x.isIE()&&n!=="svg"){var i=new Error(b.MSG_IE_BAD_FORMAT);a(i);if(!m.promise){return g.emit("error",i)}else{return y}}var o=m.canvas;var s=m.scale||1;var l=m.width||300;var u=m.height||150;var c=s*l;var f=s*u;var d=o.getContext("2d");var v=new e;var p,h;if(n==="svg"||x.isSafari()){h=b.encodeSVG(t)}else{p=b.createBlob(t,"svg");h=b.createObjectURL(p)}o.width=c;o.height=f;v.onload=function(){var e;p=null;b.revokeObjectURL(h);if(n!=="svg"){d.drawImage(v,0,0,c,f)}switch(n){case"jpeg":e=o.toDataURL("image/jpeg");break;case"png":e=o.toDataURL("image/png");break;case"webp":e=o.toDataURL("image/webp");break;case"svg":e=h;break;default:var t="Image format is not jpeg, png, svg or webp.";a(new Error(t));if(!m.promise){return g.emit("error",t)}}r(e);if(!m.promise){g.emit("success",e)}};v.onerror=function(e){p=null;b.revokeObjectURL(h);a(e);if(!m.promise){return g.emit("error",e)}};v.src=h});if(m.promise){return y}return g}t.exports=n},{"../lib":285,"./helpers":377,events:27}],380:[function(e,t,r){"use strict";var s=e("events").EventEmitter;var l=e("../registry");var u=e("../lib");var c=e("./helpers");var f=e("./cloneplot");var d=e("./tosvg");var v=e("./svgtoimg");function a(e,r){var a=new s;var t=f(e,{format:"png"});var n=t.gd;n.style.position="absolute";n.style.left="-5000px";document.body.appendChild(n);function i(){var e=c.getDelay(n._fullLayout);setTimeout(function(){var e=d(n);var t=document.createElement("canvas");t.id=u.randstr();a=v({format:r.format,width:n._fullLayout.width,height:n._fullLayout.height,canvas:t,emitter:a,svg:e});a.clean=function(){if(n)document.body.removeChild(n)}},e)}var o=c.getRedrawFunc(n);l.call("_doPlot",n,t.data,t.layout,t.config).then(o).then(i).catch(function(e){a.emit("error",e)});return a}t.exports=a},{"../lib":285,"../registry":373,"./cloneplot":374,"./helpers":377,"./svgtoimg":379,"./tosvg":381,events:27}],381:[function(e,t,r){"use strict";var y=e("@plotly/d3");var x=e("../lib");var b=e("../components/drawing");var _=e("../components/color");var w=e("../constants/xmlns_namespaces");var T=/"/g;var k="TOBESTRIPPED";var M=new RegExp('("'+k+")|("+k+'")',"g");function A(e){var t=y.select("body").append("div").style({display:"none"}).html("");var r=e.replace(/(&[^;]*;)/gi,function(e){if(e==="&lt;"){return"&#60;"}if(e==="&rt;"){return"&#62;"}if(e.indexOf("<")!==-1||e.indexOf(">")!==-1){return""}return t.html(e).text()});t.remove();return r}function S(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}t.exports=function e(t,r,a){var n=t._fullLayout;var i=n._paper;var o=n._toppaper;var s=n.width;var l=n.height;var u,c;i.insert("rect",":first-child").call(b.setRect,0,0,s,l).call(_.fill,n.paper_bgcolor);var f=n._basePlotModules||[];for(u=0;u<f.length;u++){var d=f[u];if(d.toSVG)d.toSVG(t)}if(o){var v=o.node().childNodes;var p=Array.prototype.slice.call(v);for(u=0;u<p.length;u++){var h=p[u];if(h.childNodes.length)i.node().appendChild(h)}}if(n._draggers){n._draggers.remove()}i.node().style.background="";i.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var e=y.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){e.remove();return}else{e.style({visibility:null,display:null})}var t=this.style.fontFamily;if(t&&t.indexOf('"')!==-1){e.style("font-family",t.replace(T,k))}});var m=[];if(n._gradientUrlQueryParts){for(c in n._gradientUrlQueryParts)m.push(c)}if(n._patternUrlQueryParts){for(c in n._patternUrlQueryParts)m.push(c)}if(m.length){i.selectAll(m.join(",")).each(function(){var e=y.select(this);var t=this.style.fill;if(t&&t.indexOf("url(")!==-1){e.style("fill",t.replace(T,k))}var r=this.style.stroke;if(r&&r.indexOf("url(")!==-1){e.style("stroke",r.replace(T,k))}})}if(r==="pdf"||r==="eps"){i.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0)}i.node().setAttributeNS(w.xmlns,"xmlns",w.svg);i.node().setAttributeNS(w.xmlns,"xmlns:xlink",w.xlink);if(r==="svg"&&a){i.attr("width",a*s);i.attr("height",a*l);i.attr("viewBox","0 0 "+s+" "+l)}var g=(new window.XMLSerializer).serializeToString(i.node());g=A(g);g=S(g);g=g.replace(M,"'");if(x.isIE()){g=g.replace(/"/gi,"'");g=g.replace(/(\('#)([^']*)('\))/gi,'("#$2")');g=g.replace(/(\\')/gi,'"')}return g}},{"../components/color":155,"../components/drawing":177,"../constants/xmlns_namespaces":266,"../lib":285,"@plotly/d3":20}],382:[function(e,t,r){"use strict";var o=e("../../lib");t.exports=function e(t,r){for(var a=0;a<t.length;a++)t[a].i=a;o.mergeArray(r.text,t,"tx");o.mergeArray(r.hovertext,t,"htx");var n=r.marker;if(n){o.mergeArray(n.opacity,t,"mo",true);o.mergeArray(n.color,t,"mc");var i=n.line;if(i){o.mergeArray(i.color,t,"mlc");o.mergeArrayCastPositive(i.width,t,"mlw")}}}},{"../../lib":285}],383:[function(e,t,r){"use strict";var a=e("../scatter/attributes");var n=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var i=e("../../plots/template_attributes").hovertemplateAttrs;var o=e("../../plots/template_attributes").texttemplateAttrs;var s=e("../../components/colorscale/attributes");var l=e("../../plots/font_attributes");var u=e("./constants");var c=e("../../components/drawing/attributes").pattern;var f=e("../../lib/extend").extendFlat;var d=l({editType:"calc",arrayOk:true,colorEditType:"style"});var v=a.marker;var p=v.line;var h=f({},p.width,{dflt:0});var m=f({width:h,editType:"calc"},s("marker.line"));var g=f({line:m,editType:"calc"},s("marker"),{opacity:{valType:"number",arrayOk:true,dflt:1,min:0,max:1,editType:"style"},pattern:c});t.exports={x:a.x,x0:a.x0,dx:a.dx,y:a.y,y0:a.y0,dy:a.dy,xperiod:a.xperiod,yperiod:a.yperiod,xperiod0:a.xperiod0,yperiod0:a.yperiod0,xperiodalignment:a.xperiodalignment,yperiodalignment:a.yperiodalignment,xhoverformat:n("x"),yhoverformat:n("y"),text:a.text,texttemplate:o({editType:"plot"},{keys:u.eventDataKeys}),hovertext:a.hovertext,hovertemplate:i({},{keys:u.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:true,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:f({},d,{}),insidetextfont:f({},d,{}),outsidetextfont:f({},d,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:f({},a.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:true,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:true,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:true,editType:"calc"},marker:g,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:a.selected.marker.opacity,color:a.selected.marker.color,editType:"style"},textfont:a.selected.textfont,editType:"style"},unselected:{marker:{opacity:a.unselected.marker.opacity,color:a.unselected.marker.color,editType:"style"},textfont:a.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":162,"../../components/drawing/attributes":176,"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../../plots/font_attributes":360,"../../plots/template_attributes":368,"../scatter/attributes":494,"./constants":385}],384:[function(e,t,r){"use strict";var v=e("../../plots/cartesian/axes");var p=e("../../plots/cartesian/align_period");var h=e("../../components/colorscale/helpers").hasColorscale;var m=e("../../components/colorscale/calc");var g=e("./arrays_to_calcdata");var y=e("../scatter/calc_selection");t.exports=function e(t,r){var a=v.getFromId(t,r.xaxis||"x");var n=v.getFromId(t,r.yaxis||"y");var i,o,s;var l={msUTC:!!(r.base||r.base===0)};var u;if(r.orientation==="h"){i=a.makeCalcdata(r,"x",l);s=n.makeCalcdata(r,"y");o=p(r,n,"y",s);u=!!r.yperiodalignment}else{i=n.makeCalcdata(r,"y",l);s=a.makeCalcdata(r,"x");o=p(r,a,"x",s);u=!!r.xperiodalignment}var c=Math.min(o.length,i.length);var f=new Array(c);for(var d=0;d<c;d++){f[d]={p:o[d],s:i[d]};if(u){f[d].orig_p=s[d]}if(r.ids){f[d].id=String(r.ids[d])}}if(h(r,"marker")){m(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"})}if(h(r,"marker.line")){m(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"})}g(f,r);y(f,r);return f}},{"../../components/colorscale/calc":163,"../../components/colorscale/helpers":166,"../../plots/cartesian/align_period":328,"../../plots/cartesian/axes":331,"../scatter/calc_selection":496,"./arrays_to_calcdata":382}],385:[function(e,t,r){"use strict";t.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],386:[function(e,t,r){"use strict";var _=e("fast-isnumeric");var p=e("../../lib").isArrayOrTypedArray;var w=e("../../constants/numerical").BADNUM;var h=e("../../registry");var T=e("../../plots/cartesian/axes");var k=e("../../plots/cartesian/constraints").getAxisGroup;var f=e("./sieve.js");function a(e,t){var r=t.xaxis;var a=t.yaxis;var n=e._fullLayout;var i=e._fullData;var o=e.calcdata;var s=[];var l=[];for(var u=0;u<i.length;u++){var c=i[u];if(c.visible===true&&h.traceIs(c,"bar")&&c.xaxis===r._id&&c.yaxis===a._id){if(c.orientation==="h"){s.push(o[u])}else{l.push(o[u])}if(c._computePh){var f=e.calcdata[u];for(var d=0;d<f.length;d++){if(typeof f[d].ph0==="function")f[d].ph0=f[d].ph0();if(typeof f[d].ph1==="function")f[d].ph1=f[d].ph1()}}}}var v={xCat:r.type==="category"||r.type==="multicategory",yCat:a.type==="category"||a.type==="multicategory",mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap};m(e,r,a,l,v);m(e,a,r,s,v)}function m(e,t,r,a,n){if(!a.length)return;var i;var o;var s,l,u;c(r,a);switch(n.mode){case"overlay":d(t,r,a,n);break;case"group":i=[];o=[];for(s=0;s<a.length;s++){l=a[s];u=l[0].trace;if(u.offset===undefined)o.push(l);else i.push(l)}if(o.length){v(e,t,r,o,n)}if(i.length){d(t,r,i,n)}break;case"stack":case"relative":i=[];o=[];for(s=0;s<a.length;s++){l=a[s];u=l[0].trace;if(u.base===undefined)o.push(l);else i.push(l)}if(o.length){g(e,t,r,o,n)}if(i.length){d(t,r,i,n)}break}E(a,t)}function c(e,t){var r,a;for(r=0;r<t.length;r++){var n=t[r];var i=n[0].trace;var o=i.type==="funnel"?i._base:i.base;var s;var l=i.orientation==="h"?i.xcalendar:i.ycalendar;var u=e.type==="category"||e.type==="multicategory"?function(){return null}:e.d2c;if(p(o)){for(a=0;a<Math.min(o.length,n.length);a++){s=u(o[a],0,l);if(_(s)){n[a].b=+s;n[a].hasB=1}else n[a].b=0}for(;a<n.length;a++){n[a].b=0}}else{s=u(o,0,l);var c=_(s);s=c?s:0;for(a=0;a<n.length;a++){n[a].b=s;if(c)n[a].hasB=1}}}}function d(e,t,r,a){for(var n=0;n<r.length;n++){var i=r[n];var o=new f([i],{posAxis:e,sepNegVal:false,overlapNoMerge:!a.norm});y(e,o,a);if(a.norm){l(o);b(t,o,a)}else{s(t,o)}}}function v(e,t,r,a,n){var i=new f(a,{posAxis:t,sepNegVal:false,overlapNoMerge:!n.norm});o(e,t,i,n);u(i,t);if(n.norm){l(i);b(r,i,n)}else{s(r,i)}}function g(e,t,r,a,n){var i=new f(a,{posAxis:t,sepNegVal:n.mode==="relative",overlapNoMerge:!(n.norm||n.mode==="stack"||n.mode==="relative")});y(t,i,n);x(r,i,n);for(var o=0;o<a.length;o++){var s=a[o];for(var l=0;l<s.length;l++){var u=s[l];if(u.s!==w){var c=u.b+u.s===i.get(u.p,u.s);if(c)u._outmost=true}}}if(n.norm)b(r,i,n)}function y(e,t,r){var a=t.minDiff;var n=t.traces;var i=a*(1-r.gap);var o=i;var s=o*(1-(r.groupgap||0));var l=-s/2;for(var u=0;u<n.length;u++){var c=n[u];var f=c[0].t;f.barwidth=s;f.poffset=l;f.bargroupwidth=i;f.bardelta=a}t.binWidth=n[0][0].t.barwidth/100;M(t);A(e,t);S(e,t)}function o(e,t,r,a){var n=e._fullLayout;var i=r.positions;var o=r.distinctPositions;var s=r.minDiff;var l=r.traces;var u=l.length;var c=i.length!==o.length;var f=s*(1-a.gap);var d=k(n,t._id)+l[0][0].trace.orientation;var v=n._alignmentOpts[d]||{};for(var p=0;p<u;p++){var h=l[p];var m=h[0].trace;var g=v[m.alignmentgroup]||{};var y=Object.keys(g.offsetGroups||{}).length;var x;if(y){x=f/y}else{x=c?f/u:f}var b=x*(1-(a.groupgap||0));var _;if(y){_=((2*m._offsetIndex+1-y)*x-b)/2}else{_=c?((2*p+1-u)*x-b)/2:-b/2}var w=h[0].t;w.barwidth=b;w.poffset=_;w.bargroupwidth=f;w.bardelta=s}r.binWidth=l[0][0].t.barwidth/100;M(r);A(t,r);S(t,r,c)}function M(e){var t=e.traces;var r,a;for(r=0;r<t.length;r++){var n=t[r];var i=n[0];var o=i.trace;var s=i.t;var l=o._offset||o.offset;var u=s.poffset;var c;if(p(l)){c=Array.prototype.slice.call(l,0,n.length);for(a=0;a<c.length;a++){if(!_(c[a])){c[a]=u}}for(a=c.length;a<n.length;a++){c.push(u)}s.poffset=c}else if(l!==undefined){s.poffset=l}var f=o._width||o.width;var d=s.barwidth;if(p(f)){var v=Array.prototype.slice.call(f,0,n.length);for(a=0;a<v.length;a++){if(!_(v[a]))v[a]=d}for(a=v.length;a<n.length;a++){v.push(d)}s.barwidth=v;if(l===undefined){c=[];for(a=0;a<n.length;a++){c.push(u+(d-v[a])/2)}s.poffset=c}}else if(f!==undefined){s.barwidth=f;if(l===undefined){s.poffset=u+(d-f)/2}}}}function A(e,t){var r=t.traces;var a=L(e);for(var n=0;n<r.length;n++){var i=r[n];var o=i[0].t;var s=o.poffset;var l=Array.isArray(s);var u=o.barwidth;var c=Array.isArray(u);for(var f=0;f<i.length;f++){var d=i[f];var v=d.w=c?u[f]:u;d[a]=d.p+(l?s[f]:s)+v/2}}}function S(e,t,r){var a=t.traces;var n=t.minDiff;var i=n/2;T.minDtick(e,t.minDiff,t.distinctPositions[0],r);for(var o=0;o<a.length;o++){var s=a[o];var l=s[0];var u=l.trace;var c=[];var f,d,v,p;for(p=0;p<s.length;p++){f=s[p];d=f.p-i;v=f.p+i;c.push(d,v)}if(u.width||u.offset){var h=l.t;var m=h.poffset;var g=h.barwidth;var y=Array.isArray(m);var x=Array.isArray(g);for(p=0;p<s.length;p++){f=s[p];var b=y?m[p]:m;var _=x?g[p]:g;d=f.p+b;v=d+_;c.push(d,v)}}u._extremes[e._id]=T.findExtremes(e,c,{padded:false})}}function s(e,t){var r=t.traces;var a=L(e);for(var n=0;n<r.length;n++){var i=r[n];var o=i[0].trace;var s=[];var l=false;for(var u=0;u<i.length;u++){var c=i[u];var f=c.b;var d=f+c.s;c[a]=d;s.push(d);if(c.hasB)s.push(f);if(!c.hasB||!c.b){l=true}}o._extremes[e._id]=T.findExtremes(e,s,{tozero:l,padded:true})}}function x(e,t,r){var a=L(e);var n=t.traces;var i;var o;var s;var l,u;var c;for(l=0;l<n.length;l++){i=n[l];o=i[0].trace;if(o.type==="funnel"){for(u=0;u<i.length;u++){c=i[u];if(c.s!==w){t.put(c.p,-.5*c.s)}}}}for(l=0;l<n.length;l++){i=n[l];o=i[0].trace;s=o.type==="funnel";var f=[];for(u=0;u<i.length;u++){c=i[u];if(c.s!==w){var d;if(s){d=c.s}else{d=c.s+c.b}var v=t.put(c.p,d);var p=v+d;c.b=v;c[a]=p;if(!r.norm){f.push(p);if(c.hasB){f.push(v)}}}}if(!r.norm){o._extremes[e._id]=T.findExtremes(e,f,{tozero:true,padded:true})}}}function l(e){var t=e.traces;for(var r=0;r<t.length;r++){var a=t[r];for(var n=0;n<a.length;n++){var i=a[n];if(i.s!==w){e.put(i.p,i.b+i.s)}}}}function u(e,t){var r=e.traces;for(var a=0;a<r.length;a++){var n=r[a];var i=n[0].trace;if(i.base===undefined){var o=new f([n],{posAxis:t,sepNegVal:true,overlapNoMerge:true});for(var s=0;s<n.length;s++){var l=n[s];if(l.p!==w){var u=o.put(l.p,l.b+l.s);if(u)l.b=u}}}}}function b(t,e,r){var a=e.traces;var n=L(t);var i=r.norm==="fraction"?1:100;var o=i/1e9;var s=t.l2c(t.c2l(0));var l=r.mode==="stack"?i:s;function u(e){return _(t.c2l(e))&&(e<s-o||e>l+o||!_(s))}for(var c=0;c<a.length;c++){var f=a[c];var d=f[0].trace;var v=[];var p=false;var h=false;for(var m=0;m<f.length;m++){var g=f[m];if(g.s!==w){var y=Math.abs(i/e.get(g.p,g.s));g.b*=y;g.s*=y;var x=g.b;var b=x+g.s;g[n]=b;v.push(b);h=h||u(b);if(g.hasB){v.push(x);h=h||u(x)}if(!g.hasB||!g.b){p=true}}}d._extremes[t._id]=T.findExtremes(t,v,{tozero:p,padded:h})}}function E(e,t){var r=L(t);var a={};var n,i,o;var s=Infinity;var l=-Infinity;for(n=0;n<e.length;n++){o=e[n];for(i=0;i<o.length;i++){var u=o[i].p;if(_(u)){s=Math.min(s,u);l=Math.max(l,u)}}}var c=1e4/(l-s);var f=a.round=function(e){return String(Math.round(c*(e-s)))};for(n=0;n<e.length;n++){o=e[n];o[0].t.extents=a;var d=o[0].t.poffset;var v=Array.isArray(d);for(i=0;i<o.length;i++){var p=o[i];var h=p[r]-p.w/2;if(_(h)){var m=p[r]+p.w/2;var g=f(p.p);if(a[g]){a[g]=[Math.min(h,a[g][0]),Math.max(m,a[g][1])]}else{a[g]=[h,m]}}p.p0=p.p+(v?d[i]:d);p.p1=p.p0+p.w;p.s0=p.b;p.s1=p.s0+p.s}}}function L(e){return e._id.charAt(0)}t.exports={crossTraceCalc:a,setGroupPositions:m}},{"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/axes":331,"../../plots/cartesian/constraints":339,"../../registry":373,"./sieve.js":396,"fast-isnumeric":31}],387:[function(e,t,r){"use strict";var _=e("../../lib");var u=e("../../components/color");var c=e("../../registry");var f=e("../scatter/xy_defaults");var d=e("../scatter/period_defaults");var v=e("./style_defaults");var p=e("../../plots/cartesian/constraints").getAxisGroup;var h=e("./attributes");var w=_.coerceFont;function a(r,a,e,t){function n(e,t){return _.coerce(r,a,h,e,t)}var i=f(r,a,t,n);if(!i){a.visible=false;return}d(r,a,t,n);n("xhoverformat");n("yhoverformat");n("orientation",a.x&&!a.y?"h":"v");n("base");n("offset");n("width");n("text");n("hovertext");n("hovertemplate");var o=n("textposition");m(r,a,t,n,o,{moduleHasSelected:true,moduleHasUnselected:true,moduleHasConstrain:true,moduleHasCliponaxis:true,moduleHasTextangle:true,moduleHasInsideanchor:true});v(r,a,n,e,t);var s=(a.marker.line||{}).color;var l=c.getComponentMethod("errorbars","supplyDefaults");l(r,a,s||u.defaultLine,{axis:"y"});l(r,a,s||u.defaultLine,{axis:"x",inherit:"y"});_.coerceSelectionMarkerOpacity(a,n)}function o(e,t,r,a){var n=t.orientation;var i=t[{v:"x",h:"y"}[n]+"axis"];var o=p(r,i)+n;var s=r._alignmentOpts||{};var l=a("alignmentgroup");var u=s[o];if(!u)u=s[o]={};var c=u[l];if(c){c.traces.push(t)}else{c=u[l]={traces:[t],alignmentIndex:Object.keys(u).length,offsetGroups:{}}}var f=a("offsetgroup");var d=c.offsetGroups;var v=d[f];if(f){if(!v){v=d[f]={offsetIndex:Object.keys(d).length}}t._offsetIndex=v.offsetIndex}}function n(e,t){var r,a;function n(e){return _.coerce(a._input,a,h,e)}if(t.barmode==="group"){for(var i=0;i<e.length;i++){a=e[i];if(a.type==="bar"){r=a._input;o(r,a,t,n)}}}}function m(e,t,r,a,n,i){i=i||{};var o=!(i.moduleHasSelected===false);var s=!(i.moduleHasUnselected===false);var l=!(i.moduleHasConstrain===false);var u=!(i.moduleHasCliponaxis===false);var c=!(i.moduleHasTextangle===false);var f=!(i.moduleHasInsideanchor===false);var d=!!i.hasPathbar;var v=Array.isArray(n)||n==="auto";var p=v||n==="inside";var h=v||n==="outside";if(p||h){var m=w(a,"textfont",r.font);var g=_.extendFlat({},m);var y=e.textfont&&e.textfont.color;var x=!y;if(x){delete g.color}w(a,"insidetextfont",g);if(d){var b=_.extendFlat({},m);if(x){delete b.color}w(a,"pathbar.textfont",b)}if(h)w(a,"outsidetextfont",m);if(o)a("selected.textfont.color");if(s)a("unselected.textfont.color");if(l)a("constraintext");if(u)a("cliponaxis");if(c)a("textangle");a("texttemplate")}if(p){if(f)a("insidetextanchor")}}t.exports={supplyDefaults:a,crossTraceDefaults:n,handleGroupingDefaults:o,handleText:m}},{"../../components/color":155,"../../lib":285,"../../plots/cartesian/constraints":339,"../../registry":373,"../scatter/period_defaults":514,"../scatter/xy_defaults":521,"./attributes":383,"./style_defaults":398}],388:[function(e,t,r){"use strict";t.exports=function e(t,r,a){t.x="xVal"in r?r.xVal:r.x;t.y="yVal"in r?r.yVal:r.y;if(r.xa)t.xaxis=r.xa;if(r.ya)t.yaxis=r.ya;if(a.orientation==="h"){t.label=t.y;t.value=t.x}else{t.label=t.x;t.value=t.y}return t}},{}],389:[function(e,t,r){"use strict";var o=e("fast-isnumeric");var a=e("tinycolor2");var n=e("../../lib").isArrayOrTypedArray;r.coerceString=function(e,t,r){if(typeof t==="string"){if(t||!e.noBlank)return t}else if(typeof t==="number"||t===true){if(!e.strict)return String(t)}return r!==undefined?r:e.dflt};r.coerceNumber=function(e,t,r){if(o(t)){t=+t;var a=e.min;var n=e.max;var i=a!==undefined&&t<a||n!==undefined&&t>n;if(!i)return t}return r!==undefined?r:e.dflt};r.coerceColor=function(e,t,r){if(a(t).isValid())return t;return r!==undefined?r:e.dflt};r.coerceEnumerated=function(e,t,r){if(e.coerceNumber)t=+t;if(e.values.indexOf(t)!==-1)return t;return r!==undefined?r:e.dflt};r.getValue=function(e,t){var r;if(!Array.isArray(e))r=e;else if(t<e.length)r=e[t];return r};r.getLineWidth=function(e,t){var r=0<t.mlw?t.mlw:!n(e.marker.line.width)?e.marker.line.width:0;return r}},{"../../lib":285,"fast-isnumeric":31,tinycolor2:119}],390:[function(e,t,r){"use strict";var H=e("../../components/fx");var u=e("../../registry");var i=e("../../components/color");var B=e("../../lib").fillText;var o=e("./helpers").getLineWidth;var q=e("../../plots/cartesian/axes").hoverLabelText;var U=e("../../constants/numerical").BADNUM;function a(e,t,r,a,n){var i=c(e,t,r,a,n);if(i){var o=i.cd;var s=o[0].trace;var l=o[i.index];i.color=f(s,l);u.getComponentMethod("errorbars","hoverInfo")(l,s,i);return[i]}}function c(e,t,r,a,n){var i=e.cd;var o=i[0].trace;var s=i[0].t;var l=a==="closest";var u=o.type==="waterfall";var c=e.maxHoverDistance;var f=e.maxSpikeDistance;var d,v,p,h,m,g,y;if(o.orientation==="h"){d=r;v=t;p="y";h="x";m=L;g=A}else{d=t;v=r;p="x";h="y";g=L;m=A}var x=o[p+"period"];function b(e){return w(e,-1)}function _(e){return w(e,1)}function w(e,t){if(x){return e.p+t*Math.abs(e.p-e.orig_p)}return e[p]+t*e.w/2}var T=l||x?b:function(e){return Math.min(b(e),e.p-s.bardelta/2)};var k=l||x?_:function(e){return Math.max(_(e),e.p+s.bardelta/2)};function M(e,t,r){if(n.finiteRange)r=0;return H.inbox(e-d,t-d,r+Math.min(1,Math.abs(t-e)/y)-1)}function A(e){return M(T(e),k(e),c)}function S(e){return M(b(e),_(e),f)}function E(e){var t=e[h];if(u){var r=Math.abs(e.rawS)||0;if(v>0){t+=r}else if(v<0){t-=r}}return t}function L(e){var t=v;var r=e.b;var a=E(e);return H.inbox(r-t,a-t,c+(a-t)/(a-r)-1)}function C(e){var t=v;var r=e.b;var a=E(e);return H.inbox(r-t,a-t,f+(a-t)/(a-r)-1)}var D=e[p+"a"];var O=e[h+"a"];y=Math.abs(D.r2c(D.range[1])-D.r2c(D.range[0]));function I(e){return(m(e)+g(e))/2}var P=H.getDistanceFunction(a,m,g,I);H.getClosest(i,P,e);if(e.index===false)return;if(i[e.index].p===U)return;if(!l){T=function(e){return Math.min(b(e),e.p-s.bargroupwidth/2)};k=function(e){return Math.max(_(e),e.p+s.bargroupwidth/2)}}var R=e.index;var N=i[R];var z=o.base?N.b+N.s:N.s;e[h+"0"]=e[h+"1"]=O.c2p(N[h],true);e[h+"LabelVal"]=z;var F=s.extents[s.extents.round(N.p)];e[p+"0"]=D.c2p(l?T(N):F[0],true);e[p+"1"]=D.c2p(l?k(N):F[1],true);var j=N.orig_p!==undefined;e[p+"LabelVal"]=j?N.orig_p:N.p;e.labelLabel=q(D,e[p+"LabelVal"],o[p+"hoverformat"]);e.valueLabel=q(O,e[h+"LabelVal"],o[h+"hoverformat"]);e.baseLabel=q(O,N.b,o[h+"hoverformat"]);e.spikeDistance=(C(N)+S(N))/2;e[p+"Spike"]=D.c2p(N.p,true);B(N,o,e);e.hovertemplate=o.hovertemplate;return e}function f(e,t){var r=t.mcc||e.marker.color;var a=t.mlcc||e.marker.line.color;var n=o(e,t);if(i.opacity(r))return r;else if(i.opacity(a)&&n)return a}t.exports={hoverPoints:a,hoverOnBars:c,getTraceColor:f}},{"../../components/color":155,"../../components/fx":195,"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/axes":331,"../../registry":373,"./helpers":389}],391:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,colorbar:e("../scatter/marker_colorbar"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"bar",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:true,meta:{}}},{"../../plots/cartesian":345,"../scatter/marker_colorbar":512,"./arrays_to_calcdata":382,"./attributes":383,"./calc":384,"./cross_trace_calc":386,"./defaults":387,"./event_data":388,"./hover":390,"./layout_attributes":392,"./layout_defaults":393,"./plot":394,"./select":395,"./style":397}],392:[function(e,t,r){"use strict";t.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],393:[function(e,t,r){"use strict";var v=e("../../registry");var p=e("../../plots/cartesian/axes");var h=e("../../lib");var m=e("./layout_attributes");t.exports=function(r,a,e){function t(e,t){return h.coerce(r,a,m,e,t)}var n=false;var i=false;var o=false;var s={};var l=t("barmode");for(var u=0;u<e.length;u++){var c=e[u];if(v.traceIs(c,"bar")&&c.visible)n=true;else continue;if(l==="group"){var f=c.xaxis+c.yaxis;if(s[f])o=true;s[f]=true}if(c.visible&&c.type==="histogram"){var d=p.getFromId({_fullLayout:a},c[c.orientation==="v"?"xaxis":"yaxis"]);if(d.type!=="category")i=true}}if(!n){delete a.barmode;return}if(l!=="overlay")t("barnorm");t("bargap",i&&!o?0:.2);t("bargroupgap")}},{"../../lib":285,"../../plots/cartesian/axes":331,"../../registry":373,"./layout_attributes":392}],394:[function(e,t,r){"use strict";var D=e("@plotly/d3");var O=e("fast-isnumeric");var q=e("../../lib");var U=e("../../lib/svg_text_utils");var I=e("../../components/color");var Y=e("../../components/drawing");var a=e("../../registry");var _=e("../../plots/cartesian/axes").tickText;var n=e("./uniform_text");var V=n.recordMinTextSize;var i=n.clearMinTextSize;var G=e("./style");var P=e("./helpers");var o=e("./constants");var s=e("./attributes");var l=s.text;var u=s.textposition;var b=e("../../components/fx/helpers").appendArrayPointValue;var W=o.TEXTPAD;function c(e){return e.id}function f(e){if(e.ids){return c}}function R(e,t){return e<t?1:-1}function N(e,t,r,a){var n=[];var i=[];var o=a?t:r;var s=a?r:t;n[0]=o.c2p(e.s0,true);i[0]=s.c2p(e.p0,true);n[1]=o.c2p(e.s1,true);i[1]=s.c2p(e.p1,true);return a?[n,i]:[i,n]}function $(e,t,r,a){if(!t.uniformtext.mode&&d(r)){var n;if(a){n=a()}return e.transition().duration(r.duration).ease(r.easing).each("end",function(){n&&n()}).each("interrupt",function(){n&&n()})}else{return e}}function d(e){return e&&e.duration>0}function v(k,M,e,t,A,S){var E=M.xaxis;var L=M.yaxis;var C=k._fullLayout;if(!A){A={mode:C.barmode,norm:C.barmode,gap:C.bargap,groupgap:C.bargroupgap};i("bar",C)}var r=q.makeTraceGroups(t,e,"trace bars").each(function(y){var e=D.select(this);var x=y[0].trace;var t=x.type==="waterfall";var r=x.type==="funnel";var a=x.type==="bar";var b=a||r;var _=0;if(t&&x.connector.visible&&x.connector.mode==="between"){_=x.connector.line.width/2}var w=x.orientation==="h";var T=d(A);var n=q.ensureSingle(e,"g","points");var i=f(x);var o=n.selectAll("g.point").data(q.identity,i);o.enter().append("g").classed("point",true);o.exit().remove();o.each(function(e,t){var r=D.select(this);var a=N(e,E,L,w);var n=a[0][0];var i=a[0][1];var o=a[1][0];var s=a[1][1];var l=(w?i-n:s-o)===0;if(l&&b&&P.getLineWidth(x,e)){l=false}if(!l){l=!O(n)||!O(i)||!O(o)||!O(s)}e.isBlank=l;if(l){if(w){i=n}else{s=o}}if(_&&!l){if(w){n-=R(n,i)*_;i+=R(n,i)*_}else{o-=R(o,s)*_;s+=R(o,s)*_}}var u;var c;if(x.type==="waterfall"){if(!l){var f=x[e.dir].marker;u=f.line.width;c=f.color}}else{u=P.getLineWidth(x,e);c=e.mc||x.marker.color}function d(e){var t=D.round(u/2%1,2);return A.gap===0&&A.groupgap===0?D.round(Math.round(e)-t,2):e}function v(e,t,r){if(r&&e===t){return e}return Math.abs(e-t)>=2?d(e):e>t?Math.ceil(e):Math.floor(e)}if(!k._context.staticPlot){var p=I.opacity(c);var h=p<1||u>.01?d:v;n=h(n,i,w);i=h(i,n,w);o=h(o,s,!w);s=h(s,o,!w)}var m=$(q.ensureSingle(r,"path"),C,A,S);m.style("vector-effect","non-scaling-stroke").attr("d",isNaN((i-n)*(s-o))||l&&k._context.staticPlot?"M0,0Z":"M"+n+","+o+"V"+s+"H"+i+"V"+o+"Z").call(Y.setClipUrl,M.layerClipId,k);if(!C.uniformtext.mode&&T){var g=Y.makePointStyleFns(x);Y.singlePointStyle(e,m,x,g,k)}z(k,M,r,y,t,n,i,o,s,A,S);if(M.layerClipId){Y.hideOutsideRangePoint(e,r.select("text"),E,L,x.xcalendar,x.ycalendar)}});var s=x.cliponaxis===false;Y.setClipUrl(e,s?null:M.layerClipId,k)});a.getComponentMethod("errorbars","plot")(k,r,M,A)}function z(n,e,t,r,a,i,o,s,l,u,c){var f=e.xaxis;var d=e.yaxis;var v=n._fullLayout;var p;function h(e,t,r){var a=q.ensureSingle(e,"text").text(t).attr({class:"bartext bartext-"+p,"text-anchor":"middle","data-notex":1}).call(Y.font,r).call(U.convertToTspans,n);return a}var m=r[0].trace;var g=m.orientation==="h";var y=J(v,r,a,f,d);p=K(m,a);var x=u.mode==="stack"||u.mode==="relative";var b=r[a];var _=!x||b._outmost;if(!y||p==="none"||(b.isBlank||i===o||s===l)&&(p==="auto"||p==="inside")){t.select("text").remove();return}var w=v.font;var T=G.getBarColor(r[a],m);var k=G.getInsideTextFont(m,a,w,T);var M=G.getOutsideTextFont(m,a,w);var A=t.datum();if(g){if(f.type==="log"&&A.s0<=0){if(f.range[0]<f.range[1]){i=0}else{i=f._length}}}else{if(d.type==="log"&&A.s0<=0){if(d.range[0]<d.range[1]){s=d._length}else{s=0}}}var S=Math.abs(o-i)-2*W;var E=Math.abs(l-s)-2*W;var L;var C;var D;var O;var I;if(p==="outside"){if(!_&&!b.hasB)p="inside"}if(p==="auto"){if(_){p="inside";I=q.ensureUniformFontSize(n,k);L=h(t,y,I);C=Y.bBox(L.node()),D=C.width,O=C.height;var P=D>0&&O>0;var R=D<=S&&O<=E;var N=D<=E&&O<=S;var z=g?S>=D*(E/O):E>=O*(S/D);if(P&&(R||N||z)){p="inside"}else{p="outside";L.remove();L=null}}else{p="inside"}}if(!L){I=q.ensureUniformFontSize(n,p==="outside"?M:k);L=h(t,y,I);var F=L.attr("transform");L.attr("transform","");C=Y.bBox(L.node()),D=C.width,O=C.height;L.attr("transform",F);if(D<=0||O<=0){L.remove();return}}var j=m.textangle;var H,B;if(p==="outside"){B=m.constraintext==="both"||m.constraintext==="outside";H=X(i,o,s,l,C,{isHorizontal:g,constrained:B,angle:j})}else{B=m.constraintext==="both"||m.constraintext==="inside";H=Z(i,o,s,l,C,{isHorizontal:g,constrained:B,angle:j,anchor:m.insidetextanchor})}H.fontSize=I.size;V(m.type,H,v);b.transform=H;$(L,v,u,c).attr("transform",q.getTextTransform(H))}function F(e){return e==="auto"?0:e}function j(e,t){var r=Math.PI/180*t;var a=Math.abs(Math.sin(r));var n=Math.abs(Math.cos(r));return{x:e.width*n+e.height*a,y:e.width*a+e.height*n}}function Z(e,t,r,a,n,i){var o=!!i.isHorizontal;var s=!!i.constrained;var l=i.angle||0;var u=i.anchor||"end";var c=u==="end";var f=u==="start";var d=i.leftToRight||0;var v=(d+1)/2;var p=1-v;var h=n.width;var m=n.height;var g=Math.abs(t-e);var y=Math.abs(a-r);var x=g>2*W&&y>2*W?W:0;g-=2*x;y-=2*x;var b=F(l);if(l==="auto"&&!(h<=g&&m<=y)&&(h>g||m>y)&&(!(h>y||m>g)||h<m!==g<y)){b+=90}var _=j(n,b);var w=1;if(s){w=Math.min(1,g/_.x,y/_.y)}var T=n.left*p+n.right*v;var k=(n.top+n.bottom)/2;var M=(e+W)*p+(t-W)*v;var A=(r+a)/2;var S=0;var E=0;if(f||c){var L=(o?_.x:_.y)/2;var C=o?R(e,t):R(r,a);if(o){if(f){M=e+C*x;S=-C*L}else{M=t-C*x;S=C*L}}else{if(f){A=r+C*x;E=-C*L}else{A=a-C*x;E=C*L}}}return{textX:T,textY:k,targetX:M,targetY:A,anchorX:S,anchorY:E,scale:w,rotate:b}}function X(e,t,r,a,n,i){var o=!!i.isHorizontal;var s=!!i.constrained;var l=i.angle||0;var u=n.width;var c=n.height;var f=Math.abs(t-e);var d=Math.abs(a-r);var v;if(o){v=d>2*W?W:0}else{v=f>2*W?W:0}var p=1;if(s){p=o?Math.min(1,d/c):Math.min(1,f/u)}var h=F(l);var m=j(n,h);var g=(o?m.x:m.y)/2;var y=(n.left+n.right)/2;var x=(n.top+n.bottom)/2;var b=(e+t)/2;var _=(r+a)/2;var w=0;var T=0;var k=o?R(t,e):R(r,a);if(o){b=t-k*v;w=k*g}else{_=a+k*v;T=-k*g}return{textX:y,textY:x,targetX:b,targetY:_,anchorX:w,anchorY:T,scale:p,rotate:h}}function J(e,t,r,a,n){var i=t[0].trace;var o=i.texttemplate;var s;if(o){s=p(e,t,r,a,n)}else if(i.textinfo){s=h(t,r,a,n)}else{s=P.getValue(i.text,r)}return P.coerceString(l,s)}function K(e,t){var r=P.getValue(e.textposition,t);return P.coerceEnumerated(u,r)}function p(e,t,r,a,n){var i=t[0].trace;var o=q.castOption(i,r,"texttemplate");if(!o)return"";var s=i.type==="waterfall";var l=i.type==="funnel";var u,c;var f,d;if(i.orientation==="h"){u="y";c=n;f="x";d=a}else{u="x";c=a;f="y";d=n}function v(e){return _(c,c.c2l(e),true).text}function p(e){return _(d,d.c2l(e),true).text}var h=t[r];var m={};m.label=h.p;m.labelLabel=m[u+"Label"]=v(h.p);var g=q.castOption(i,h.i,"text");if(g===0||g)m.text=g;m.value=h.s;m.valueLabel=m[f+"Label"]=p(h.s);var y={};b(y,i,h.i);if(s){m.delta=+h.rawS||h.s;m.deltaLabel=p(m.delta);m.final=h.v;m.finalLabel=p(m.final);m.initial=m.final-m.delta;m.initialLabel=p(m.initial)}if(l){m.value=h.s;m.valueLabel=p(m.value);m.percentInitial=h.begR;m.percentInitialLabel=q.formatPercent(h.begR);m.percentPrevious=h.difR;m.percentPreviousLabel=q.formatPercent(h.difR);m.percentTotal=h.sumR;m.percenTotalLabel=q.formatPercent(h.sumR)}var x=q.castOption(i,h.i,"customdata");if(x)m.customdata=x;return q.texttemplateString(o,m,e._d3locale,y,m,i._meta||{})}function h(e,t,r,a){var n=e[0].trace;var i=n.orientation==="h";var o=n.type==="waterfall";var s=n.type==="funnel";function l(e){var t=i?a:r;return _(t,e,true).text}function u(e){var t=i?r:a;return _(t,+e,true).text}var c=n.textinfo;var f=e[t];var d=c.split("+");var v=[];var p;var h=function(e){return d.indexOf(e)!==-1};if(h("label")){v.push(l(e[t].p))}if(h("text")){p=q.castOption(n,f.i,"text");if(p===0||p)v.push(p)}if(o){var m=+f.rawS||f.s;var g=f.v;var y=g-m;if(h("initial"))v.push(u(y));if(h("delta"))v.push(u(m));if(h("final"))v.push(u(g))}if(s){if(h("value"))v.push(u(f.s));var x=0;if(h("percent initial"))x++;if(h("percent previous"))x++;if(h("percent total"))x++;var b=x>1;if(h("percent initial")){p=q.formatPercent(f.begR);if(b)p+=" of initial";v.push(p)}if(h("percent previous")){p=q.formatPercent(f.difR);if(b)p+=" of previous";v.push(p)}if(h("percent total")){p=q.formatPercent(f.sumR);if(b)p+=" of total";v.push(p)}}return v.join("<br>")}t.exports={plot:v,toMoveInsideBar:Z}},{"../../components/color":155,"../../components/drawing":177,"../../components/fx/helpers":191,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/cartesian/axes":331,"../../registry":373,"./attributes":383,"./constants":385,"./helpers":389,"./style":397,"./uniform_text":399,"@plotly/d3":20,"fast-isnumeric":31}],395:[function(e,t,r){"use strict";t.exports=function e(t,r){var a=t.cd;var n=t.xaxis;var i=t.yaxis;var o=a[0].trace;var s=o.type==="funnel";var l=o.orientation==="h";var u=[];var c;if(r===false){for(c=0;c<a.length;c++){a[c].selected=0}}else{for(c=0;c<a.length;c++){var f=a[c];var d="ct"in f?f.ct:v(f,n,i,l,s);if(r.contains(d,false,c,t)){u.push({pointNumber:c,x:n.c2d(f.x),y:i.c2d(f.y)});f.selected=1}else{f.selected=0}}}return u};function v(e,t,r,a,n){var i=t.c2p(a?e.s0:e.p0,true);var o=t.c2p(a?e.s1:e.p1,true);var s=r.c2p(a?e.p0:e.s0,true);var l=r.c2p(a?e.p1:e.s1,true);if(n){return[(i+o)/2,(s+l)/2]}else{if(a){return[o,(s+l)/2]}else{return[(i+o)/2,l]}}}},{}],396:[function(e,t,r){"use strict";t.exports=a;var c=e("../../lib").distinctVals;var f=e("../../constants/numerical").BADNUM;function a(e,t){this.traces=e;this.sepNegVal=t.sepNegVal;this.overlapNoMerge=t.overlapNoMerge;var r=Infinity;var a=[];for(var n=0;n<e.length;n++){var i=e[n];for(var o=0;o<i.length;o++){var s=i[o];if(s.p!==f)a.push(s.p)}if(i[0]&&i[0].width1){r=Math.min(i[0].width1,r)}}this.positions=a;var l=c(a);this.distinctPositions=l.vals;if(l.vals.length===1&&r!==Infinity)this.minDiff=r;else this.minDiff=Math.min(l.minDiff,r);var u=(t.posAxis||{}).type;if(u==="category"||u==="multicategory"){this.minDiff=1}this.binWidth=this.minDiff;this.bins={}}a.prototype.put=function e(t,r){var a=this.getLabel(t,r);var n=this.bins[a]||0;this.bins[a]=n+r;return n};a.prototype.get=function e(t,r){var a=this.getLabel(t,r);return this.bins[a]||0};a.prototype.getLabel=function e(t,r){var a=r<0&&this.sepNegVal?"v":"^";var n=this.overlapNoMerge?t:Math.round(t/this.binWidth);return a+n}},{"../../constants/numerical":265,"../../lib":285}],397:[function(e,t,r){"use strict";var o=e("@plotly/d3");var s=e("../../components/color");var l=e("../../components/drawing");var u=e("../../lib");var n=e("../../registry");var i=e("./uniform_text").resizeText;var a=e("./attributes");var c=a.textfont;var f=a.insidetextfont;var d=a.outsidetextfont;var v=e("./helpers");function p(a){var e=o.select(a).selectAll("g.barlayer").selectAll("g.trace");i(a,e,"bar");var t=e.size();var r=a._fullLayout;e.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){if(r.barmode==="stack"&&t>1||r.bargap===0&&r.bargroupgap===0&&!e[0].trace.marker.line.width){o.select(this).attr("shape-rendering","crispEdges")}});e.selectAll("g.points").each(function(e){var t=o.select(this);var r=e[0].trace;h(t,r,a)});n.getComponentMethod("errorbars","style")(e)}function h(e,t,r){l.pointStyle(e.selectAll("path"),t,r);m(e,t,r)}function m(e,a,n){e.selectAll("text").each(function(e){var t=o.select(this);var r=u.ensureUniformFontSize(n,b(t,e,a,n));l.font(t,r)})}function g(e,t,r){var a=t[0].trace;if(a.selectedpoints){y(r,a,e)}else{h(r,a,e);n.getComponentMethod("errorbars","style")(r)}}function y(e,t,r){l.selectedPointStyle(e.selectAll("path"),t);x(e.selectAll("text"),t,r)}function x(e,n,i){e.each(function(e){var t=o.select(this);var r;if(e.selected){r=u.ensureUniformFontSize(i,b(t,e,n,i));var a=n.selected.textfont&&n.selected.textfont.color;if(a){r.color=a}l.font(t,r)}else{l.selectedTextStyle(t,n)}})}function b(e,t,r,a){var n=a._fullLayout.font;var i=r.textfont;if(e.classed("bartext-inside")){var o=M(t,r);i=w(r,t.i,n,o)}else if(e.classed("bartext-outside")){i=T(r,t.i,n)}return i}function _(e,t,r){return k(c,e.textfont,t,r)}function w(e,t,r,a){var n=_(e,t,r);var i=e._input.textfont===undefined||e._input.textfont.color===undefined||Array.isArray(e.textfont.color)&&e.textfont.color[t]===undefined;if(i){n={color:s.contrast(a),family:n.family,size:n.size}}return k(f,e.insidetextfont,t,n)}function T(e,t,r){var a=_(e,t,r);return k(d,e.outsidetextfont,t,a)}function k(e,t,r,a){t=t||{};var n=v.getValue(t.family,r);var i=v.getValue(t.size,r);var o=v.getValue(t.color,r);return{family:v.coerceString(e.family,n,a.family),size:v.coerceNumber(e.size,i,a.size),color:v.coerceColor(e.color,o,a.color)}}function M(e,t){if(t.type==="waterfall"){return t[e.dir].marker.color}return e.mcc||e.mc||t.marker.color}t.exports={style:p,styleTextPoints:m,styleOnSelect:g,getInsideTextFont:w,getOutsideTextFont:T,getBarColor:M,resizeText:i}},{"../../components/color":155,"../../components/drawing":177,"../../lib":285,"../../registry":373,"./attributes":383,"./helpers":389,"./uniform_text":399,"@plotly/d3":20}],398:[function(e,t,r){"use strict";var l=e("../../components/color");var u=e("../../components/colorscale/helpers").hasColorscale;var c=e("../../components/colorscale/defaults");var f=e("../../lib").coercePattern;t.exports=function e(t,r,a,n,i){var o=a("marker.color",n);var s=u(t,"marker");if(s){c(t,r,i,a,{prefix:"marker.",cLetter:"c"})}a("marker.line.color",l.defaultLine);if(u(t,"marker.line")){c(t,r,i,a,{prefix:"marker.line.",cLetter:"c"})}a("marker.line.width");a("marker.opacity");f(a,"marker.pattern",o,s);a("selected.marker.color");a("unselected.marker.color")}},{"../../components/color":155,"../../components/colorscale/defaults":165,"../../components/colorscale/helpers":166,"../../lib":285}],399:[function(e,t,r){"use strict";var s=e("@plotly/d3");var l=e("../../lib");function a(e,t,r){var a=e._fullLayout;var n=a["_"+r+"Text_minsize"];if(n){var i=a.uniformtext.mode==="hide";var o;switch(r){case"funnelarea":case"pie":case"sunburst":o="g.slice";break;case"treemap":case"icicle":o="g.slice, g.pathbar";break;default:o="g.points > g.point"}t.selectAll(o).each(function(e){var t=e.transform;if(t){t.scale=i&&t.hide?0:n/t.fontSize;var r=s.select(this).select("text");r.attr("transform",l.getTextTransform(t))}})}}function n(e,t,r){if(r.uniformtext.mode){var a=o(e);var n=r.uniformtext.minsize;var i=t.scale*t.fontSize;t.hide=i<n;r[a]=r[a]||Infinity;if(!t.hide){r[a]=Math.min(r[a],Math.max(i,n))}}}function i(e,t){var r=o(e);t[r]=undefined}function o(e){return"_"+e+"Text_minsize"}t.exports={recordMinTextSize:n,clearMinTextSize:i,resizeText:a}},{"../../lib":285,"@plotly/d3":20}],400:[function(e,t,r){"use strict";var a=e("../scatter/attributes");var n=e("../bar/attributes");var i=e("../../components/color/attributes");var o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var s=e("../../plots/template_attributes").hovertemplateAttrs;var l=e("../../lib/extend").extendFlat;var u=a.marker;var c=u.line;t.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:a.xperiod,yperiod:a.yperiod,xperiod0:a.xperiod0,yperiod0:a.yperiod0,xperiodalignment:a.xperiodalignment,yperiodalignment:a.yperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",false],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[true,"sd",false],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:l({},u.symbol,{arrayOk:false,editType:"plot"}),opacity:l({},u.opacity,{arrayOk:false,dflt:1,editType:"style"}),size:l({},u.size,{arrayOk:false,editType:"calc"}),color:l({},u.color,{arrayOk:false,editType:"style"}),line:{color:l({},c.color,{arrayOk:false,dflt:i.defaultLine,editType:"style"}),width:l({},c.width,{arrayOk:false,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:a.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:n.offsetgroup,alignmentgroup:n.alignmentgroup,selected:{marker:a.selected.marker,editType:"style"},unselected:{marker:a.unselected.marker,editType:"style"},text:l({},a.text,{}),hovertext:l({},a.hovertext,{}),hovertemplate:s({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":154,"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../../plots/template_attributes":368,"../bar/attributes":383,"../scatter/attributes":494}],401:[function(e,t,r){"use strict";var ee=e("fast-isnumeric");var te=e("../../plots/cartesian/axes");var p=e("../../plots/cartesian/align_period");var re=e("../../lib");var ae=e("../../constants/numerical").BADNUM;var ne=re._;t.exports=function e(t,r){var a=t._fullLayout;var n=te.getFromId(t,r.xaxis||"x");var i=te.getFromId(t,r.yaxis||"y");var o=[];var s=r.type==="violin"?"_numViolins":"_numBoxes";var l,u;var c,f;var d,v;var p;if(r.orientation==="h"){c=n;f="x";d=i;v="y";p=!!r.yperiodalignment}else{c=i;f="y";d=n;v="x";p=!!r.xperiodalignment}var h=ie(r,v,d,a[s]);var m=h[0];var g=h[1];var y=re.distinctVals(m,d);var x=y.vals;var b=y.minDiff/2;var _;var w;var T;var k;var M;var A;var S=(r.boxpoints||r.points)==="all"?re.identity:function(e){return e.v<_.lf||e.v>_.uf};if(r._hasPreCompStats){var E=r[f];var L=function(e){return c.d2c((r[e]||[])[l])};var C=Infinity;var D=-Infinity;for(l=0;l<r._length;l++){var O=m[l];if(!ee(O))continue;_={};_.pos=_[v]=O;if(p&&g){_.orig_p=g[l]}_.q1=L("q1");_.med=L("median");_.q3=L("q3");w=[];if(E&&re.isArrayOrTypedArray(E[l])){for(u=0;u<E[l].length;u++){A=c.d2c(E[l][u]);if(A!==ae){M={v:A,i:[l,u]};le(M,r,[l,u]);w.push(M)}}}_.pts=w.sort(ce);T=_[f]=w.map(fe);k=T.length;if(_.med!==ae&&_.q1!==ae&&_.q3!==ae&&_.med>=_.q1&&_.q3>=_.med){var I=L("lowerfence");_.lf=I!==ae&&I<=_.q1?I:de(_,T,k);var P=L("upperfence");_.uf=P!==ae&&P>=_.q3?P:ve(_,T,k);var R=L("mean");_.mean=R!==ae?R:k?re.mean(T,k):(_.q1+_.q3)/2;var N=L("sd");_.sd=R!==ae&&N>=0?N:k?re.stdev(T,k,_.mean):_.q3-_.q1;_.lo=pe(_);_.uo=he(_);var z=L("notchspan");z=z!==ae&&z>0?z:me(_,k);_.ln=_.med-z;_.un=_.med+z;var F=_.lf;var j=_.uf;if(r.boxpoints&&T.length){F=Math.min(F,T[0]);j=Math.max(j,T[k-1])}if(r.notched){F=Math.min(F,_.ln);j=Math.max(j,_.un)}_.min=F;_.max=j}else{re.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+_.q1,"median = "+_.med,"q3 = "+_.q3].join("\n"));var H;if(_.med!==ae){H=_.med}else if(_.q1!==ae){if(_.q3!==ae)H=(_.q1+_.q3)/2;else H=_.q1}else if(_.q3!==ae){H=_.q3}else{H=0}_.med=H;_.q1=_.q3=H;_.lf=_.uf=H;_.mean=_.sd=H;_.ln=_.un=H;_.min=_.max=H}C=Math.min(C,_.min);D=Math.max(D,_.max);_.pts2=w.filter(S);o.push(_)}r._extremes[c._id]=te.findExtremes(c,[C,D],{padded:true})}else{var B=c.makeCalcdata(r,f);var q=oe(x,b);var U=x.length;var Y=se(U);for(l=0;l<r._length;l++){A=B[l];if(!ee(A))continue;var V=re.findBin(m[l],q);if(V>=0&&V<U){M={v:A,i:l};le(M,r,l);Y[V].push(M)}}var G=Infinity;var W=-Infinity;var $=r.quartilemethod;var Z=$==="exclusive";var X=$==="inclusive";for(l=0;l<U;l++){if(Y[l].length>0){_={};_.pos=_[v]=x[l];w=_.pts=Y[l].sort(ce);T=_[f]=w.map(fe);k=T.length;_.min=T[0];_.max=T[k-1];_.mean=re.mean(T,k);_.sd=re.stdev(T,k,_.mean);_.med=re.interp(T,.5);if(k%2&&(Z||X)){var J;var K;if(Z){J=T.slice(0,k/2);K=T.slice(k/2+1)}else if(X){J=T.slice(0,k/2+1);K=T.slice(k/2)}_.q1=re.interp(J,.5);_.q3=re.interp(K,.5)}else{_.q1=re.interp(T,.25);_.q3=re.interp(T,.75)}_.lf=de(_,T,k);_.uf=ve(_,T,k);_.lo=pe(_);_.uo=he(_);var Q=me(_,k);_.ln=_.med-Q;_.un=_.med+Q;G=Math.min(G,_.ln);W=Math.max(W,_.un);_.pts2=w.filter(S);o.push(_)}}r._extremes[c._id]=te.findExtremes(c,r.notched?B.concat([G,W]):B,{padded:true})}ue(o,r);if(o.length>0){o[0].t={num:a[s],dPos:b,posLetter:v,valLetter:f,labels:{med:ne(t,"median:"),min:ne(t,"min:"),q1:ne(t,"q1:"),q3:ne(t,"q3:"),max:ne(t,"max:"),mean:r.boxmean==="sd"?ne(t,"mean ± σ:"):ne(t,"mean:"),lf:ne(t,"lower fence:"),uf:ne(t,"upper fence:")}};a[s]++;return o}else{return[{t:{empty:true}}]}};function ie(e,t,r,a){var n=t in e;var i=t+"0"in e;var o="d"+t in e;if(n||i&&o){var s=r.makeCalcdata(e,t);var l=p(e,r,t,s);return[l,s]}var u;if(i){u=e[t+"0"]}else if("name"in e&&(r.type==="category"||ee(e.name)&&["linear","log"].indexOf(r.type)!==-1||re.isDateTime(e.name)&&r.type==="date")){u=e.name}else{u=a}var c=r.type==="multicategory"?r.r2c_just_indices(u):r.d2c(u,0,e[t+"calendar"]);var f=e._length;var d=new Array(f);for(var v=0;v<f;v++)d[v]=c;return[d]}function oe(e,t){var r=e.length;var a=new Array(r+1);for(var n=0;n<r;n++){a[n]=e[n]-t}a[r]=e[r-1]+t;return a}function se(e){var t=new Array(e);for(var r=0;r<e;r++){t[r]=[]}return t}var n={text:"tx",hovertext:"htx"};function le(e,t,r){for(var a in n){if(re.isArrayOrTypedArray(t[a])){if(Array.isArray(r)){if(re.isArrayOrTypedArray(t[a][r[0]])){e[n[a]]=t[a][r[0]][r[1]]}}else{e[n[a]]=t[a][r]}}}}function ue(e,t){if(re.isArrayOrTypedArray(t.selectedpoints)){for(var r=0;r<e.length;r++){var a=e[r].pts||[];var n={};for(var i=0;i<a.length;i++){n[a[i].i]=i}re.tagSelected(a,t,n)}}}function ce(e,t){return e.v-t.v}function fe(e){return e.v}function de(e,t,r){if(r===0)return e.q1;return Math.min(e.q1,t[Math.min(re.findBin(2.5*e.q1-1.5*e.q3,t,true)+1,r-1)])}function ve(e,t,r){if(r===0)return e.q3;return Math.max(e.q3,t[Math.max(re.findBin(2.5*e.q3-1.5*e.q1,t),0)])}function pe(e){return 4*e.q1-3*e.q3}function he(e){return 4*e.q3-3*e.q1}function me(e,t){if(t===0)return 0;return 1.57*(e.q3-e.q1)/Math.sqrt(t)}},{"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/align_period":328,"../../plots/cartesian/axes":331,"fast-isnumeric":31}],402:[function(e,t,r){"use strict";var J=e("../../plots/cartesian/axes");var K=e("../../lib");var Q=e("../../plots/cartesian/constraints").getAxisGroup;var v=["v","h"];function a(e,t){var r=e.calcdata;var a=t.xaxis;var n=t.yaxis;for(var i=0;i<v.length;i++){var o=v[i];var s=o==="h"?n:a;var l=[];for(var u=0;u<r.length;u++){var c=r[u];var f=c[0].t;var d=c[0].trace;if(d.visible===true&&(d.type==="box"||d.type==="candlestick")&&!f.empty&&(d.orientation||"v")===o&&d.xaxis===a._id&&d.yaxis===n._id){l.push(u)}}p("box",e,l,s)}}function p(e,t,r,a){var n=t.calcdata;var i=t._fullLayout;var o=a._id;var s=o.charAt(0);var l,u,c;var f=[];var d=0;for(l=0;l<r.length;l++){c=n[r[l]];for(u=0;u<c.length;u++){f.push(a.c2l(c[u].pos,true));d+=(c[u].pts2||[]).length}}if(!f.length)return;var v=K.distinctVals(f);if(a.type==="category"||a.type==="multicategory"){v.minDiff=1}var p=v.minDiff/2;J.minDtick(a,v.minDiff,v.vals[0],true);var h=e==="violin"?"_numViolins":"_numBoxes";var m=i[h];var g=i[e+"mode"]==="group"&&m>1;var y=1-i[e+"gap"];var x=1-i[e+"groupgap"];for(l=0;l<r.length;l++){c=n[r[l]];var b=c[0].trace;var _=c[0].t;var w=b.width;var T=b.side;var k;var M;var A;var S;if(w){k=M=S=w/2;A=0}else{k=p;if(g){var E=Q(i,a._id)+b.orientation;var L=i._alignmentOpts[E]||{};var C=L[b.alignmentgroup]||{};var D=Object.keys(C.offsetGroups||{}).length;var O=D||m;var I=D?b._offsetIndex:_.num;M=k*y*x/O;A=2*k*(-.5+(I+.5)/O)*y;S=k*y/O}else{M=k*y*x;A=0;S=k}}_.dPos=k;_.bPos=A;_.bdPos=M;_.wHover=S;var P;var R;var N=A+M;var z;var F;var j;var H;var B;var q;var U=Boolean(w);var Y=(b.boxpoints||b.points)&&d>0;if(T==="positive"){P=k*(w?1:.5);z=N;R=z=A}else if(T==="negative"){P=z=A;R=k*(w?1:.5);F=N}else{P=R=k;z=F=N}if(Y){var V=b.pointpos;var G=b.jitter;var W=b.marker.size/2;var $=0;if(V+G>=0){$=N*(V+G);if($>P){U=true;B=W;j=$}else if($>z){B=W;j=P}}if($<=P){j=P}var Z=0;if(V-G<=0){Z=-N*(V-G);if(Z>R){U=true;q=W;H=Z}else if(Z>F){q=W;H=R}}if(Z<=R){H=R}}else{j=P;H=R}var X=new Array(c.length);for(u=0;u<c.length;u++){X[u]=c[u].pos}b._extremes[o]=J.findExtremes(a,X,{padded:U,vpadminus:H,vpadplus:j,vpadLinearized:true,ppadminus:{x:q,y:B}[s],ppadplus:{x:B,y:q}[s]})}}t.exports={crossTraceCalc:a,setPositionOffset:p}},{"../../lib":285,"../../plots/cartesian/axes":331,"../../plots/cartesian/constraints":339}],403:[function(e,t,r){"use strict";var A=e("../../lib");var S=e("../../registry");var d=e("../../components/color");var v=e("../scatter/period_defaults");var s=e("../bar/defaults").handleGroupingDefaults;var E=e("../../plots/cartesian/axis_autotype");var L=e("./attributes");function a(r,a,e,t){function n(e,t){return A.coerce(r,a,L,e,t)}p(r,a,n,t);if(a.visible===false)return;v(r,a,t,n);n("xhoverformat");n("yhoverformat");var i=a._hasPreCompStats;if(i){n("lowerfence");n("upperfence")}n("line.color",(r.marker||{}).color||e);n("line.width");n("fillcolor",d.addOpacity(a.line.color,.5));var o=false;if(i){var s=n("mean");var l=n("sd");if(s&&s.length){o=true;if(l&&l.length)o="sd"}}n("boxmean",o);n("whiskerwidth");n("width");n("quartilemethod");var u=false;if(i){var c=n("notchspan");if(c&&c.length){u=true}}else if(A.validate(r.notchwidth,L.notchwidth)){u=true}var f=n("notched",u);if(f)n("notchwidth");h(r,a,n,{prefix:"box"})}function p(t,e,r,a){function n(e){var t=0;if(e&&e.length){t+=1;if(A.isArrayOrTypedArray(e[0])&&e[0].length){t+=1}}return t}function i(e){return A.validate(t[e],L[e])}var o=r("y");var s=r("x");var l;if(e.type==="box"){var u=r("q1");var c=r("median");var f=r("q3");e._hasPreCompStats=u&&u.length&&c&&c.length&&f&&f.length;l=Math.min(A.minRowLength(u),A.minRowLength(c),A.minRowLength(f))}var d=n(o);var v=n(s);var p=d&&A.minRowLength(o);var h=v&&A.minRowLength(s);var m=a.calendar;var g={autotypenumbers:a.autotypenumbers};var y,x;if(e._hasPreCompStats){switch(String(v)+String(d)){case"00":var b=i("x0")||i("dx");var _=i("y0")||i("dy");if(_&&!b){y="h"}else{y="v"}x=l;break;case"10":y="v";x=Math.min(l,h);break;case"20":y="h";x=Math.min(l,s.length);break;case"01":y="h";x=Math.min(l,p);break;case"02":y="v";x=Math.min(l,o.length);break;case"12":y="v";x=Math.min(l,h,o.length);break;case"21":y="h";x=Math.min(l,s.length,p);break;case"11":x=0;break;case"22":var w=false;var T;for(T=0;T<s.length;T++){if(E(s[T],m,g)==="category"){w=true;break}}if(w){y="v";x=Math.min(l,h,o.length)}else{for(T=0;T<o.length;T++){if(E(o[T],m,g)==="category"){w=true;break}}if(w){y="h";x=Math.min(l,s.length,p)}else{y="v";x=Math.min(l,h,o.length)}}break}}else if(d>0){y="v";if(v>0){x=Math.min(h,p)}else{x=Math.min(p)}}else if(v>0){y="h";x=Math.min(h)}else{x=0}if(!x){e.visible=false;return}e._length=x;var k=r("orientation",y);if(e._hasPreCompStats){if(k==="v"&&v===0){r("x0",0);r("dx",1)}else if(k==="h"&&d===0){r("y0",0);r("dy",1)}}else{if(k==="v"&&v===0){r("x0")}else if(k==="h"&&d===0){r("y0")}}var M=S.getComponentMethod("calendars","handleTraceDefaults");M(t,e,["x","y"],a)}function h(e,t,r,a){var n=a.prefix;var i=A.coerce2(e,t,L,"marker.outliercolor");var o=r("marker.line.outliercolor");var s="outliers";if(t._hasPreCompStats){s="all"}else if(i||o){s="suspectedoutliers"}var l=r(n+"points",s);if(l){r("jitter",l==="all"?.3:0);r("pointpos",l==="all"?-1.5:0);r("marker.symbol");r("marker.opacity");r("marker.size");r("marker.color",t.line.color);r("marker.line.color");r("marker.line.width");if(l==="suspectedoutliers"){r("marker.line.outliercolor",t.marker.color);r("marker.line.outlierwidth")}r("selected.marker.color");r("unselected.marker.color");r("selected.marker.size");r("unselected.marker.size");r("text");r("hovertext")}else{delete t.marker}var u=r("hoveron");if(u==="all"||u.indexOf("points")!==-1){r("hovertemplate")}A.coerceSelectionMarkerOpacity(t,r)}function n(e,t){var r,a;function n(e){return A.coerce(a._input,a,L,e)}for(var i=0;i<e.length;i++){a=e[i];var o=a.type;if(o==="box"||o==="violin"){r=a._input;if(t[o+"mode"]==="group"){s(r,a,t,n)}}}}t.exports={supplyDefaults:a,crossTraceDefaults:n,handleSampleDefaults:p,handlePointsDefaults:h}},{"../../components/color":155,"../../lib":285,"../../plots/cartesian/axis_autotype":332,"../../registry":373,"../bar/defaults":387,"../scatter/period_defaults":514,"./attributes":400}],404:[function(e,t,r){"use strict";t.exports=function e(t,r){if(r.hoverOnBox)t.hoverOnBox=r.hoverOnBox;if("xVal"in r)t.x=r.xVal;if("yVal"in r)t.y=r.yVal;if(r.xa)t.xaxis=r.xa;if(r.ya)t.yaxis=r.ya;return t}},{}],405:[function(e,t,r){"use strict";var q=e("../../plots/cartesian/axes");var U=e("../../lib");var Y=e("../../components/fx");var V=e("../../components/color");var A=U.fillText;function a(e,t,r,a){var n=e.cd;var i=n[0].trace;var o=i.hoveron;var s=[];var l;if(o.indexOf("boxes")!==-1){s=s.concat(u(e,t,r,a))}if(o.indexOf("points")!==-1){l=c(e,t,r)}if(a==="closest"){if(l)return[l];return s}if(l){s.push(l);return s}return s}function u(e,t,r,a){var n=e.cd;var i=e.xa;var o=e.ya;var s=n[0].trace;var l=n[0].t;var u=s.type==="violin";var c=[];var f,d,v,p,h,m,g,y,x,b,_;var w=l.bdPos;var T,k;var M=l.wHover;var A=function(e){return v.c2l(e.pos)+l.bPos-v.c2l(m)};if(u&&s.side!=="both"){if(s.side==="positive"){x=function(e){var t=A(e);return Y.inbox(t,t+M,b)};T=w;k=0}if(s.side==="negative"){x=function(e){var t=A(e);return Y.inbox(t-M,t,b)};T=0;k=w}}else{x=function(e){var t=A(e);return Y.inbox(t-M,t+M,b)};T=k=w}var S;if(u){S=function(e){return Y.inbox(e.span[0]-h,e.span[1]-h,b)}}else{S=function(e){return Y.inbox(e.min-h,e.max-h,b)}}if(s.orientation==="h"){h=t;m=r;g=S;y=x;f="y";v=o;d="x";p=i}else{h=r;m=t;g=x;y=S;f="x";v=i;d="y";p=o}var E=Math.min(1,w/Math.abs(v.r2c(v.range[1])-v.r2c(v.range[0])));b=e.maxHoverDistance-E;_=e.maxSpikeDistance-E;function L(e){return(g(e)+y(e))/2}var C=Y.getDistanceFunction(a,g,y,L);Y.getClosest(n,C,e);if(e.index===false)return[];var D=n[e.index];var O=s.line.color;var I=(s.marker||{}).color;if(V.opacity(O)&&s.line.width)e.color=O;else if(V.opacity(I)&&s.boxpoints)e.color=I;else e.color=s.fillcolor;e[f+"0"]=v.c2p(D.pos+l.bPos-k,true);e[f+"1"]=v.c2p(D.pos+l.bPos+T,true);e[f+"LabelVal"]=D.orig_p!==undefined?D.orig_p:D.pos;var P=f+"Spike";e.spikeDistance=L(D)*_/b;e[P]=v.c2p(D.pos,true);var R={};var N=["med","q1","q3","min","max"];if(s.boxmean||(s.meanline||{}).visible){N.push("mean")}if(s.boxpoints||s.points){N.push("lf","uf")}for(var z=0;z<N.length;z++){var F=N[z];if(!(F in D)||D[F]in R)continue;R[D[F]]=true;var j=D[F];var H=p.c2p(j,true);var B=U.extendFlat({},e);B.attr=F;B[d+"0"]=B[d+"1"]=H;B[d+"LabelVal"]=j;B[d+"Label"]=(l.labels?l.labels[F]+" ":"")+q.hoverLabelText(p,j,s[d+"hoverformat"]);B.hoverOnBox=true;if(F==="mean"&&"sd"in D&&s.boxmean==="sd"){B[d+"err"]=D.sd}e.name="";e.spikeDistance=undefined;e[P]=undefined;B.hovertemplate=false;c.push(B)}return c}function c(e,t,r){var a=e.cd;var n=e.xa;var i=e.ya;var o=a[0].trace;var s=n.c2p(t);var l=i.c2p(r);var u;var c=function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(n.c2p(e.x)-s)-t,1-3/t)};var f=function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(i.c2p(e.y)-l)-t,1-3/t)};var d=Y.quadrature(c,f);var v=false;var p,h;for(var m=0;m<a.length;m++){p=a[m];for(var g=0;g<(p.pts||[]).length;g++){h=p.pts[g];var y=d(h);if(y<=e.distance){e.distance=y;v=[m,g]}}}if(!v)return false;p=a[v[0]];h=p.pts[v[1]];var x=n.c2p(h.x,true);var b=i.c2p(h.y,true);var _=h.mrc||1;u=U.extendFlat({},e,{index:h.i,color:(o.marker||{}).color,name:o.name,x0:x-_,x1:x+_,y0:b-_,y1:b+_,spikeDistance:e.distance,hovertemplate:o.hovertemplate});var w=p.orig_p;var T=w!==undefined?w:p.pos;var k;if(o.orientation==="h"){k=i;u.xLabelVal=h.x;u.yLabelVal=T}else{k=n;u.xLabelVal=T;u.yLabelVal=h.y}var M=k._id.charAt(0);u[M+"Spike"]=k.c2p(p.pos,true);A(h,o,u);return u}t.exports={hoverPoints:a,hoverOnBoxes:u,hoverOnPoints:c}},{"../../components/color":155,"../../components/fx":195,"../../lib":285,"../../plots/cartesian/axes":331}],406:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults").supplyLayoutDefaults,calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"box",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":345,"./attributes":400,"./calc":401,"./cross_trace_calc":402,"./defaults":403,"./event_data":404,"./hover":405,"./layout_attributes":407,"./layout_defaults":408,"./plot":409,"./select":410,"./style":411}],407:[function(e,t,r){"use strict";t.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],408:[function(e,t,r){"use strict";var u=e("../../registry");var n=e("../../lib");var i=e("./layout_attributes");function o(e,t,r,a,n){var i=n+"Layout";var o=false;for(var s=0;s<r.length;s++){var l=r[s];if(u.traceIs(l,i)){o=true;break}}if(!o)return;a(n+"mode");a(n+"gap");a(n+"groupgap")}function a(r,a,e){function t(e,t){return n.coerce(r,a,i,e,t)}o(r,a,e,t,"box")}t.exports={supplyLayoutDefaults:a,_supply:o}},{"../../lib":285,"../../registry":373,"./layout_attributes":407}],409:[function(e,t,r){"use strict";var D=e("@plotly/d3");var O=e("../../lib");var l=e("../../components/drawing");var w=5;var T=.01;function a(e,t,r,a){var s=t.xaxis;var l=t.yaxis;O.makeTraceGroups(a,r,"trace boxes").each(function(e){var t=D.select(this);var r=e[0];var a=r.t;var n=r.trace;a.wdPos=a.bdPos*n.whiskerwidth;if(n.visible!==true||a.empty){t.remove();return}var i,o;if(n.orientation==="h"){i=l;o=s}else{i=s;o=l}u(t,{pos:i,val:o},n,a);c(t,{x:s,y:l},n,a);f(t,{pos:i,val:o},n,a)})}function u(e,t,y,r){var x=y.orientation==="h";var b=t.val;var _=t.pos;var w=!!_.rangebreaks;var T=r.bPos;var k=r.wdPos||0;var M=r.bPosPxOffset||0;var A=y.whiskerwidth||0;var S=y.notched||false;var E=S?1-2*y.notchwidth:1;var L;var C;if(Array.isArray(r.bdPos)){L=r.bdPos[0];C=r.bdPos[1]}else{L=r.bdPos;C=r.bdPos}var a=e.selectAll("path.box").data(y.type!=="violin"||y.box.visible?O.identity:[]);a.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box");a.exit().remove();a.each(function(e){if(e.empty)return"M0,0Z";var t=_.c2l(e.pos+T,true);var r=_.l2p(t-L)+M;var a=_.l2p(t+C)+M;var n=w?(r+a)/2:_.l2p(t)+M;var i=y.whiskerwidth;var o=w?r*i+(1-i)*n:_.l2p(t-k)+M;var s=w?a*i+(1-i)*n:_.l2p(t+k)+M;var l=_.l2p(t-L*E)+M;var u=_.l2p(t+C*E)+M;var c=b.c2p(e.q1,true);var f=b.c2p(e.q3,true);var d=O.constrain(b.c2p(e.med,true),Math.min(c,f)+1,Math.max(c,f)-1);var v=e.lf===undefined||y.boxpoints===false;var p=b.c2p(v?e.min:e.lf,true);var h=b.c2p(v?e.max:e.uf,true);var m=b.c2p(e.ln,true);var g=b.c2p(e.un,true);if(x){D.select(this).attr("d","M"+d+","+l+"V"+u+"M"+c+","+r+"V"+a+(S?"H"+m+"L"+d+","+u+"L"+g+","+a:"")+"H"+f+"V"+r+(S?"H"+g+"L"+d+","+l+"L"+m+","+r:"")+"Z"+"M"+c+","+n+"H"+p+"M"+f+","+n+"H"+h+(A===0?"":"M"+p+","+o+"V"+s+"M"+h+","+o+"V"+s))}else{D.select(this).attr("d","M"+l+","+d+"H"+u+"M"+r+","+c+"H"+a+(S?"V"+m+"L"+u+","+d+"L"+a+","+g:"")+"V"+f+"H"+r+(S?"V"+g+"L"+l+","+d+"L"+r+","+m:"")+"Z"+"M"+n+","+c+"V"+p+"M"+n+","+f+"V"+h+(A===0?"":"M"+o+","+p+"H"+s+"M"+o+","+h+"H"+s))}})}function c(e,t,y,r){var a=t.x;var n=t.y;var x=r.bdPos;var b=r.bPos;var _=y.boxpoints||y.points;O.seedPseudoRandom();var i=function(e){e.forEach(function(e){e.t=r;e.trace=y});return e};var o=e.selectAll("g.points").data(_?i:[]);o.enter().append("g").attr("class","points");o.exit().remove();var s=o.selectAll("path").data(function(e){var t;var r=e.pts2;var a=Math.max((e.max-e.min)/10,e.q3-e.q1);var n=a*1e-9;var i=a*T;var o=[];var s=0;var l;if(y.jitter){if(a===0){s=1;o=new Array(r.length);for(t=0;t<r.length;t++){o[t]=1}}else{for(t=0;t<r.length;t++){var u=Math.max(0,t-w);var c=r[u].v;var f=Math.min(r.length-1,t+w);var d=r[f].v;if(_!=="all"){if(r[t].v<e.lf)d=Math.min(d,e.lf);else c=Math.max(c,e.uf)}var v=Math.sqrt(i*(f-u)/(d-c+n))||0;v=O.constrain(Math.abs(v),0,1);o.push(v);s=Math.max(v,s)}}l=y.jitter*2/(s||1)}for(t=0;t<r.length;t++){var p=r[t];var h=p.v;var m=y.jitter?l*o[t]*(O.pseudoRandom()-.5):0;var g=e.pos+b+x*(y.pointpos+m);if(y.orientation==="h"){p.y=g;p.x=h}else{p.x=g;p.y=h}if(_==="suspectedoutliers"&&h<e.uo&&h>e.lo){p.so=true}}return r});s.enter().append("path").classed("point",true);s.exit().remove();s.call(l.translatePoints,a,n)}function f(e,t,l,r){var u=t.val;var c=t.pos;var f=!!c.rangebreaks;var d=r.bPos;var v=r.bPosPxOffset||0;var p=l.boxmean||(l.meanline||{}).visible;var h;var m;if(Array.isArray(r.bdPos)){h=r.bdPos[0];m=r.bdPos[1]}else{h=r.bdPos;m=r.bdPos}var a=e.selectAll("path.mean").data(l.type==="box"&&l.boxmean||l.type==="violin"&&l.box.visible&&l.meanline.visible?O.identity:[]);a.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"});a.exit().remove();a.each(function(e){var t=c.c2l(e.pos+d,true);var r=c.l2p(t-h)+v;var a=c.l2p(t+m)+v;var n=f?(r+a)/2:c.l2p(t)+v;var i=u.c2p(e.mean,true);var o=u.c2p(e.mean-e.sd,true);var s=u.c2p(e.mean+e.sd,true);if(l.orientation==="h"){D.select(this).attr("d","M"+i+","+r+"V"+a+(p==="sd"?"m0,0L"+o+","+n+"L"+i+","+r+"L"+s+","+n+"Z":""))}else{D.select(this).attr("d","M"+r+","+i+"H"+a+(p==="sd"?"m0,0L"+n+","+o+"L"+r+","+i+"L"+n+","+s+"Z":""))}})}t.exports={plot:a,plotBoxAndWhiskers:u,plotPoints:c,plotBoxMean:f}},{"../../components/drawing":177,"../../lib":285,"@plotly/d3":20}],410:[function(e,t,r){"use strict";t.exports=function e(t,r){var a=t.cd;var n=t.xaxis;var i=t.yaxis;var o=[];var s,l;if(r===false){for(s=0;s<a.length;s++){for(l=0;l<(a[s].pts||[]).length;l++){a[s].pts[l].selected=0}}}else{for(s=0;s<a.length;s++){for(l=0;l<(a[s].pts||[]).length;l++){var u=a[s].pts[l];var c=n.c2p(u.x);var f=i.c2p(u.y);if(r.contains([c,f],null,u.i,t)){o.push({pointNumber:u.i,x:n.c2d(u.x),y:i.c2d(u.y)});u.selected=1}else{u.selected=0}}}}return o}},{}],411:[function(e,t,r){"use strict";var l=e("@plotly/d3");var u=e("../../components/color");var c=e("../../components/drawing");function a(s,e,t){var r=t?t:l.select(s).selectAll("g.trace.boxes");r.style("opacity",function(e){return e[0].trace.opacity});r.each(function(e){var t=l.select(this);var a=e[0].trace;var r=a.line.width;function n(e,t,r,a){e.style("stroke-width",t+"px").call(u.stroke,r).call(u.fill,a)}var i=t.selectAll("path.box");if(a.type==="candlestick"){i.each(function(e){if(e.empty)return;var t=l.select(this);var r=a[e.dir];n(t,r.line.width,r.line.color,r.fillcolor);t.style("opacity",a.selectedpoints&&!e.selected?.3:1)})}else{n(i,r,a.line.color,a.fillcolor);t.selectAll("path.mean").style({"stroke-width":r,"stroke-dasharray":2*r+"px,"+r+"px"}).call(u.stroke,a.line.color);var o=t.selectAll("path.point");c.pointStyle(o,a,s)}})}function n(e,t,r){var a=t[0].trace;var n=r.selectAll("path.point");if(a.selectedpoints){c.selectedPointStyle(n,a)}else{c.pointStyle(n,a,e)}}t.exports={style:a,styleOnSelect:n}},{"../../components/color":155,"../../components/drawing":177,"@plotly/d3":20}],412:[function(e,t,r){"use strict";var a=e("../heatmap/attributes");var n=e("../scatter/attributes");var i=e("../../plots/cartesian/axis_format_attributes");var o=i.axisHoverFormat;var s=i.descriptionOnlyNumbers;var l=e("../../components/colorscale/attributes");var u=e("../../components/drawing/attributes").dash;var c=e("../../plots/font_attributes");var f=e("../../lib/extend").extendFlat;var d=e("../../constants/filter_ops");var v=d.COMPARISON_OPS2;var p=d.INTERVAL_OPS;var h=n.line;t.exports=f({z:a.z,x:a.x,x0:a.x0,dx:a.dx,y:a.y,y0:a.y0,dy:a.dy,xperiod:a.xperiod,yperiod:a.yperiod,xperiod0:n.xperiod0,yperiod0:n.yperiod0,xperiodalignment:a.xperiodalignment,yperiodalignment:a.yperiodalignment,text:a.text,hovertext:a.hovertext,transpose:a.transpose,xtype:a.xtype,ytype:a.ytype,xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z",1),hovertemplate:a.hovertemplate,hoverongaps:a.hoverongaps,connectgaps:f({},a.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:true,editType:"calc",impliedEdits:{"contours.start":undefined,"contours.end":undefined,"contours.size":undefined}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":false}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":false}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":false}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:true,editType:"plot"},showlabels:{valType:"boolean",dflt:false,editType:"plot"},labelfont:c({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:s("contour label")},operation:{valType:"enumerated",values:[].concat(v).concat(p),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:false}},line:{color:f({},h.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:u,smoothing:f({},h.smoothing,{}),editType:"plot"}},l("",{cLetter:"z",autoColorDflt:false,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":162,"../../components/drawing/attributes":176,"../../constants/filter_ops":263,"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../../plots/font_attributes":360,"../heatmap/attributes":434,"../scatter/attributes":494}],413:[function(e,t,r){"use strict";var p=e("../../components/colorscale");var h=e("../heatmap/calc");var m=e("./set_contours");var g=e("./end_plus");t.exports=function e(t,r){var a=h(t,r);var n=a[0].z;m(r,n);var i=r.contours;var o=p.extractOpts(r);var s;if(i.coloring==="heatmap"&&o.auto&&r.autocontour===false){var l=i.start;var u=g(i);var c=i.size||1;var f=Math.floor((u-l)/c)+1;if(!isFinite(c)){c=1;f=1}var d=l-c/2;var v=d+f*c;s=[d,v]}else{s=n}p.calc(t,r,{vals:s,cLetter:"z"});return a}},{"../../components/colorscale":167,"../heatmap/calc":435,"./end_plus":423,"./set_contours":431}],414:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e[0];var a=r.z;var n;switch(t.type){case"levels":var i=Math.min(a[0][0],a[0][1]);for(n=0;n<e.length;n++){var o=e[n];o.prefixBoundary=!o.edgepaths.length&&(i>o.level||o.starts.length&&i===o.level)}break;case"constraint":r.prefixBoundary=false;if(r.edgepaths.length)return;var s=r.x.length;var l=r.y.length;var u=-Infinity;var c=Infinity;for(n=0;n<l;n++){c=Math.min(c,a[n][0]);c=Math.min(c,a[n][s-1]);u=Math.max(u,a[n][0]);u=Math.max(u,a[n][s-1])}for(n=1;n<s-1;n++){c=Math.min(c,a[0][n]);c=Math.min(c,a[l-1][n]);u=Math.max(u,a[0][n]);u=Math.max(u,a[l-1][n])}var f=t.value;var d,v;switch(t._operation){case">":if(f>u){r.prefixBoundary=true}break;case"<":if(f<c||r.starts.length&&f===c){r.prefixBoundary=true}break;case"[]":d=Math.min(f[0],f[1]);v=Math.max(f[0],f[1]);if(v<c||d>u||r.starts.length&&v===c){r.prefixBoundary=true}break;case"][":d=Math.min(f[0],f[1]);v=Math.max(f[0],f[1]);if(d<c&&v>u){r.prefixBoundary=true}break}break}}},{}],415:[function(e,t,r){"use strict";var u=e("../../components/colorscale");var c=e("./make_color_map");var f=e("./end_plus");function a(e,t,r){var a=t.contours;var n=t.line;var i=a.size||1;var o=a.coloring;var s=c(t,{isColorbar:true});if(o==="heatmap"){var l=u.extractOpts(t);r._fillgradient=l.reversescale?u.flipScale(l.colorscale):l.colorscale;r._zrange=[l.min,l.max]}else if(o==="fill"){r._fillcolor=s}r._line={color:o==="lines"?s:n.color,width:a.showlines!==false?n.width:0,dash:n.dash};r._levels={start:a.start,end:f(a),size:i}}t.exports={min:"zmin",max:"zmax",calc:a}},{"../../components/colorscale":167,"./end_plus":423,"./make_color_map":428}],416:[function(e,t,r){"use strict";t.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],417:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var v=e("./label_defaults");var n=e("../../components/color");var p=n.addOpacity;var h=n.opacity;var i=e("../../constants/filter_ops");var m=i.CONSTRAINT_REDUCTION;var o=i.COMPARISON_OPS2;t.exports=function e(t,r,a,n,i,o){var s=r.contours;var l,u,c;var f=a("contours.operation");s._operation=m[f];g(a,s);if(f==="="){l=s.showlines=true}else{l=a("contours.showlines");c=a("fillcolor",p((t.line||{}).color||i,.5))}if(l){var d=c&&h(c)?p(r.fillcolor,1):i;u=a("line.color",d);a("line.width",2);a("line.dash")}a("line.smoothing");v(a,n,u,o)};function g(e,t){var r;if(o.indexOf(t.operation)===-1){e("contours.value",[0,1]);if(!Array.isArray(t.value)){if(a(t.value)){r=parseFloat(t.value);t.value=[r,r+1]}}else if(t.value.length>2){t.value=t.value.slice(2)}else if(t.length===0){t.value=[0,1]}else if(t.length<2){r=parseFloat(t.value[0]);t.value=[r,r+1]}else{t.value=[parseFloat(t.value[0]),parseFloat(t.value[1])]}}else{e("contours.value",0);if(!a(t.value)){if(Array.isArray(t.value)){t.value=parseFloat(t.value[0])}else{t.value=0}}}}},{"../../components/color":155,"../../constants/filter_ops":263,"./label_defaults":427,"fast-isnumeric":31}],418:[function(e,t,r){"use strict";var i=e("../../constants/filter_ops");var o=e("fast-isnumeric");t.exports={"[]":a("[]"),"][":a("]["),">":s(">"),"<":s("<"),"=":s("=")};function n(e,t){var r=Array.isArray(t);var a;function n(e){return o(e)?+e:null}if(i.COMPARISON_OPS2.indexOf(e)!==-1){a=r?n(t[0]):n(t)}else if(i.INTERVAL_OPS.indexOf(e)!==-1){a=r?[n(t[0]),n(t[1])]:[n(t),n(t)]}else if(i.SET_OPS.indexOf(e)!==-1){a=r?t.map(n):[n(t)]}return a}function a(a){return function(e){e=n(a,e);var t=Math.min(e[0],e[1]);var r=Math.max(e[0],e[1]);return{start:t,end:r,size:r-t}}}function s(t){return function(e){e=n(t,e);return{start:e,end:Infinity,size:Infinity}}}},{"../../constants/filter_ops":263,"fast-isnumeric":31}],419:[function(e,t,r){"use strict";t.exports=function e(t,r,a,n){var i=n("contours.start");var o=n("contours.end");var s=i===false||o===false;var l=a("contours.size");var u;if(s)u=r.autocontour=true;else u=a("autocontour",false);if(u||!l)a("ncontours")}},{}],420:[function(e,t,r){"use strict";var l=e("../../lib");t.exports=function(e,t){var r,a,n;var i=function(e){return e.reverse()};var o=function(e){return e};switch(t){case"=":case"<":return e;case">":if(e.length!==1){l.warn("Contour data invalid for the specified inequality operation.")}a=e[0];for(r=0;r<a.edgepaths.length;r++){a.edgepaths[r]=i(a.edgepaths[r])}for(r=0;r<a.paths.length;r++){a.paths[r]=i(a.paths[r])}for(r=0;r<a.starts.length;r++){a.starts[r]=i(a.starts[r])}return e;case"][":var s=i;i=o;o=s;case"[]":if(e.length!==2){l.warn("Contour data invalid for the specified inequality range operation.")}a=u(e[0]);n=u(e[1]);for(r=0;r<a.edgepaths.length;r++){a.edgepaths[r]=i(a.edgepaths[r])}for(r=0;r<a.paths.length;r++){a.paths[r]=i(a.paths[r])}for(r=0;r<a.starts.length;r++){a.starts[r]=i(a.starts[r])}while(n.edgepaths.length){a.edgepaths.push(o(n.edgepaths.shift()))}while(n.paths.length){a.paths.push(o(n.paths.shift()))}while(n.starts.length){a.starts.push(o(n.starts.shift()))}return[a]}};function u(e){return l.extendFlat({},e,{edgepaths:l.extendDeep([],e.edgepaths),paths:l.extendDeep([],e.paths),starts:l.extendDeep([],e.starts)})}},{"../../lib":285}],421:[function(e,t,r){"use strict";var u=e("../../lib");var c=e("../heatmap/xyz_defaults");var f=e("../scatter/period_defaults");var d=e("./constraint_defaults");var v=e("./contours_defaults");var p=e("./style_defaults");var h=e("./attributes");t.exports=function e(r,a,t,n){function i(e,t){return u.coerce(r,a,h,e,t)}function o(e){return u.coerce2(r,a,h,e)}var s=c(r,a,i,n);if(!s){a.visible=false;return}f(r,a,n,i);i("xhoverformat");i("yhoverformat");i("text");i("hovertext");i("hovertemplate");i("hoverongaps");var l=i("contours.type")==="constraint";i("connectgaps",u.isArray1D(a.z));if(l){d(r,a,i,n,t)}else{v(r,a,i,o);p(r,a,i,n)}}},{"../../lib":285,"../heatmap/xyz_defaults":448,"../scatter/period_defaults":514,"./attributes":412,"./constraint_defaults":417,"./contours_defaults":419,"./style_defaults":433}],422:[function(e,t,r){"use strict";var f=e("../../lib");var d=e("./constraint_mapping");var v=e("./end_plus");t.exports=function e(t,r,a){var n=t.type==="constraint"?d[t._operation](t.value):t;var i=n.size;var o=[];var s=v(n);var l=a.trace._carpetTrace;var u=l?{xaxis:l.aaxis,yaxis:l.baxis,x:a.a,y:a.b}:{xaxis:r.xaxis,yaxis:r.yaxis,x:a.x,y:a.y};for(var c=n.start;c<s;c+=i){o.push(f.extendFlat({level:c,crossings:{},starts:[],edgepaths:[],paths:[],z:a.z,smoothing:a.trace.line.smoothing},u));if(o.length>1e3){f.warn("Too many contours, clipping at 1000",t);break}}return o}},{"../../lib":285,"./constraint_mapping":418,"./end_plus":423}],423:[function(e,t,r){"use strict";t.exports=function e(t){return t.end+t.size/1e6}},{}],424:[function(e,t,r){"use strict";var N=e("../../lib");var z=e("./constants");t.exports=function e(t,r,a){var n,i,o,s,l;r=r||.01;a=a||.01;for(o=0;o<t.length;o++){s=t[o];for(l=0;l<s.starts.length;l++){i=s.starts[l];u(s,i,"edge",r,a)}n=0;while(Object.keys(s.crossings).length&&n<1e4){n++;i=Object.keys(s.crossings)[0].split(",").map(Number);u(s,i,undefined,r,a)}if(n===1e4)N.log("Infinite loop in contour?")}};function F(e,t,r,a){return Math.abs(e[0]-t[0])<r&&Math.abs(e[1]-t[1])<a}function j(e,t){var r=e[2]-t[2];var a=e[3]-t[3];return Math.sqrt(r*r+a*a)}function u(e,t,r,a,n){var i=t.join(",");var o=e.crossings[i];var s=H(o,r,t);var l=[B(e,t,[-s[0],-s[1]])];var u=e.z.length;var c=e.z[0].length;var f=t.slice();var d=s.slice();var v;for(v=0;v<1e4;v++){if(o>20){o=z.CHOOSESADDLE[o][(s[0]||s[1])<0?0:1];e.crossings[i]=z.SADDLEREMAINDER[o]}else{delete e.crossings[i]}s=z.NEWDELTA[o];if(!s){N.log("Found bad marching index:",o,t,e.level);break}l.push(B(e,t,s));t[0]+=s[0];t[1]+=s[1];i=t.join(",");if(F(l[l.length-1],l[l.length-2],a,n))l.pop();var p=s[0]&&(t[0]<0||t[0]>c-2)||s[1]&&(t[1]<0||t[1]>u-2);var h=t[0]===f[0]&&t[1]===f[1]&&s[0]===d[0]&&s[1]===d[1];if(h||r&&p)break;o=e.crossings[i]}if(v===1e4){N.log("Infinite loop in contour?")}var m=F(l[0],l[l.length-1],a,n);var g=0;var y=.2*e.smoothing;var x=[];var b=0;var _,w,T,k,M,A,S,E,L,C,D;for(v=1;v<l.length;v++){S=j(l[v],l[v-1]);g+=S;x.push(S)}var O=g/x.length*y;function I(e){return l[e%l.length]}for(v=l.length-2;v>=b;v--){_=x[v];if(_<O){T=0;for(w=v-1;w>=b;w--){if(_+x[w]<O){_+=x[w]}else break}if(m&&v===l.length-2){for(T=0;T<w;T++){if(_+x[T]<O){_+=x[T]}else break}}M=v-w+T+1;A=Math.floor((v+w+T+2)/2);if(!m&&v===l.length-2)k=l[l.length-1];else if(!m&&w===-1)k=l[0];else if(M%2)k=I(A);else{k=[(I(A)[0]+I(A+1)[0])/2,(I(A)[1]+I(A+1)[1])/2]}l.splice(w+1,v-w+1,k);v=w+1;if(T)b=T;if(m){if(v===l.length-2)l[T]=l[l.length-1];else if(v===0)l[l.length-1]=l[0]}}}l.splice(0,b);for(v=0;v<l.length;v++)l[v].length=2;if(l.length<2)return;else if(m){l.pop();e.paths.push(l)}else{if(!r){N.log("Unclosed interior contour?",e.level,f.join(","),l.join("L"))}var P=false;for(E=0;E<e.edgepaths.length;E++){C=e.edgepaths[E];if(!P&&F(C[0],l[l.length-1],a,n)){l.pop();P=true;var R=false;for(L=0;L<e.edgepaths.length;L++){D=e.edgepaths[L];if(F(D[D.length-1],l[0],a,n)){R=true;l.shift();e.edgepaths.splice(E,1);if(L===E){e.paths.push(l.concat(D))}else{if(L>E)L--;e.edgepaths[L]=D.concat(l,C)}break}}if(!R){e.edgepaths[E]=l.concat(C)}}}for(E=0;E<e.edgepaths.length;E++){if(P)break;C=e.edgepaths[E];if(F(C[C.length-1],l[0],a,n)){l.shift();e.edgepaths[E]=C.concat(l);P=true}}if(!P)e.edgepaths.push(l)}}function H(e,t,r){var a=0;var n=0;if(e>20&&t){if(e===208||e===1114){a=r[0]===0?1:-1}else{n=r[1]===0?1:-1}}else if(z.BOTTOMSTART.indexOf(e)!==-1)n=1;else if(z.LEFTSTART.indexOf(e)!==-1)a=1;else if(z.TOPSTART.indexOf(e)!==-1)n=-1;else a=-1;return[a,n]}function B(e,t,r){var a=t[0]+Math.max(r[0],0);var n=t[1]+Math.max(r[1],0);var i=e.z[n][a];var o=e.xaxis;var s=e.yaxis;if(r[1]){var l=(e.level-i)/(e.z[n][a+1]-i);return[o.c2p((1-l)*e.x[a]+l*e.x[a+1],true),s.c2p(e.y[n],true),a+l,n]}else{var u=(e.level-i)/(e.z[n+1][a]-i);return[o.c2p(e.x[a],true),s.c2p((1-u)*e.y[n]+u*e.y[n+1],true),a,n+u]}}},{"../../lib":285,"./constants":416}],425:[function(e,t,r){"use strict";var s=e("../../components/color");var l=e("../heatmap/hover");t.exports=function e(t,r,a,n,i){if(!i)i={};i.isContour=true;var o=l(t,r,a,n,i);if(o){o.forEach(function(e){var t=e.trace;if(t.contours.type==="constraint"){if(t.fillcolor&&s.opacity(t.fillcolor)){e.color=s.addOpacity(t.fillcolor,1)}else if(t.contours.showlines&&s.opacity(t.line.color)){e.color=s.addOpacity(t.line.color,1)}}})}return o}},{"../../components/color":155,"../heatmap/hover":441}],426:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot").plot,style:e("./style"),colorbar:e("./colorbar"),hoverPoints:e("./hover"),moduleType:"trace",name:"contour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":345,"./attributes":412,"./calc":413,"./colorbar":415,"./defaults":421,"./hover":425,"./plot":430,"./style":432}],427:[function(e,t,r){"use strict";var s=e("../../lib");t.exports=function e(t,r,a,n){if(!n)n={};var i=t("contours.showlabels");if(i){var o=r.font;s.coerceFont(t,"contours.labelfont",{family:o.family,size:o.size,color:a});t("contours.labelformat")}if(n.hasHover!==false)t("zhoverformat")}},{"../../lib":285}],428:[function(e,t,r){"use strict";var b=e("@plotly/d3");var _=e("../../components/colorscale");var w=e("./end_plus");t.exports=function e(t){var r=t.contours;var a=r.start;var n=w(r);var i=r.size||1;var o=Math.floor((n-a)/i)+1;var s=r.coloring==="lines"?0:1;var l=_.extractOpts(t);if(!isFinite(i)){i=1;o=1}var u=l.reversescale?_.flipScale(l.colorscale):l.colorscale;var c=u.length;var f=new Array(c);var d=new Array(c);var v,p;if(r.coloring==="heatmap"){var h=l.min;var m=l.max;for(p=0;p<c;p++){v=u[p];f[p]=v[0]*(m-h)+h;d[p]=v[1]}var g=b.extent([h,m,r.start,r.start+i*(o-1)]);var y=g[h<m?0:1];var x=g[h<m?1:0];if(y!==h){f.splice(0,0,y);d.splice(0,0,d[0])}if(x!==m){f.push(x);d.push(d[d.length-1])}}else{for(p=0;p<c;p++){v=u[p];f[p]=(v[0]*(o+s-1)-s/2)*i+a;d[p]=v[1]}}return _.makeColorScaleFunc({domain:f,range:d},{noNumericCheck:true})}},{"../../components/colorscale":167,"./end_plus":423,"@plotly/d3":20}],429:[function(e,t,r){"use strict";var h=e("./constants");t.exports=function e(t){var r=t[0].z;var a=r.length;var n=r[0].length;var i=a===2||n===2;var o;var s;var l;var u;var c;var f;var d;var v;var p;for(s=0;s<a-1;s++){u=[];if(s===0)u=u.concat(h.BOTTOMSTART);if(s===a-2)u=u.concat(h.TOPSTART);for(o=0;o<n-1;o++){l=u.slice();if(o===0)l=l.concat(h.LEFTSTART);if(o===n-2)l=l.concat(h.RIGHTSTART);c=o+","+s;f=[[r[s][o],r[s][o+1]],[r[s+1][o],r[s+1][o+1]]];for(p=0;p<t.length;p++){v=t[p];d=m(v.level,f);if(!d)continue;v.crossings[c]=d;if(l.indexOf(d)!==-1){v.starts.push([o,s]);if(i&&l.indexOf(d,l.indexOf(d)+1)!==-1){v.starts.push([o,s])}}}}}};function m(e,t){var r=(t[0][0]>e?0:1)+(t[0][1]>e?0:2)+(t[1][1]>e?0:4)+(t[1][0]>e?0:8);if(r===5||r===10){var a=(t[0][0]+t[0][1]+t[1][0]+t[1][1])/4;if(e>a)return r===5?713:1114;return r===5?104:208}return r===15?0:r}},{"./constants":416}],430:[function(e,t,I){"use strict";var P=e("@plotly/d3");var R=e("../../lib");var N=e("../../components/drawing");var l=e("../../components/colorscale");var u=e("../../lib/svg_text_utils");var c=e("../../plots/cartesian/axes");var f=e("../../plots/cartesian/set_convert");var b=e("../heatmap/plot");var _=e("./make_crossings");var w=e("./find_all_paths");var T=e("./empty_pathinfo");var k=e("./convert_to_constraints");var d=e("./close_boundaries");var z=e("./constants");var A=z.LABELOPTIMIZER;I.plot=function e(m,g,t,r){var y=g.xaxis;var x=g.yaxis;R.makeTraceGroups(r,t,"contour").each(function(e){var t=P.select(this);var r=e[0];var a=r.trace;var n=r.x;var i=r.y;var o=a.contours;var s=T(o,g,r);var l=R.ensureSingle(t,"g","heatmapcoloring");var u=[];if(o.coloring==="heatmap"){u=[e]}b(m,g,u,l);_(s);w(s);var c=y.c2p(n[0],true);var f=y.c2p(n[n.length-1],true);var d=x.c2p(i[0],true);var v=x.c2p(i[i.length-1],true);var p=[[c,v],[f,v],[f,d],[c,d]];var h=s;if(o.type==="constraint"){h=k(s,o._operation)}M(t,p,o);S(t,h,p,o);E(t,s,m,r,o);L(t,g,m,r,p)})};function M(e,t,r){var a=R.ensureSingle(e,"g","contourbg");var n=a.selectAll("path").data(r.coloring==="fill"?[0]:[]);n.enter().append("path");n.exit().remove();n.attr("d","M"+t.join("L")+"Z").style("stroke","none")}function S(e,t,r,a){var n=a.coloring==="fill"||a.type==="constraint"&&a._operation!=="=";var i="M"+r.join("L")+"Z";if(n){d(t,a)}var o=R.ensureSingle(e,"g","contourfill");var s=o.selectAll("path").data(n?t:[]);s.enter().append("path");s.exit().remove();s.each(function(e){var t=(e.prefixBoundary?i:"")+v(e,r);if(!t){P.select(this).remove()}else{P.select(this).attr("d",t).style("stroke","none")}})}function v(e,t){var r="";var a=0;var n=e.edgepaths.map(function(e,t){return t});var i=true;var o;var s;var l;var u;var c;var f;function d(e){return Math.abs(e[1]-t[0][1])<.01}function v(e){return Math.abs(e[1]-t[2][1])<.01}function p(e){return Math.abs(e[0]-t[0][0])<.01}function h(e){return Math.abs(e[0]-t[2][0])<.01}while(n.length){f=N.smoothopen(e.edgepaths[a],e.smoothing);r+=i?f:f.replace(/^M/,"L");n.splice(n.indexOf(a),1);o=e.edgepaths[a][e.edgepaths[a].length-1];u=-1;for(l=0;l<4;l++){if(!o){R.log("Missing end?",a,e);break}if(d(o)&&!h(o))s=t[1];else if(p(o))s=t[0];else if(v(o))s=t[3];else if(h(o))s=t[2];for(c=0;c<e.edgepaths.length;c++){var m=e.edgepaths[c][0];if(Math.abs(o[0]-s[0])<.01){if(Math.abs(o[0]-m[0])<.01&&(m[1]-o[1])*(s[1]-m[1])>=0){s=m;u=c}}else if(Math.abs(o[1]-s[1])<.01){if(Math.abs(o[1]-m[1])<.01&&(m[0]-o[0])*(s[0]-m[0])>=0){s=m;u=c}}else{R.log("endpt to newendpt is not vert. or horz.",o,s,m)}}o=s;if(u>=0)break;r+="L"+s}if(u===e.edgepaths.length){R.log("unclosed perimeter path");break}a=u;i=n.indexOf(a)===-1;if(i){a=n[0];r+="Z"}}for(a=0;a<e.paths.length;a++){r+=N.smoothclosed(e.paths[a],e.smoothing)}return r}function E(e,t,r,a,n){var i=R.ensureSingle(e,"g","contourlines");var o=n.showlines!==false;var s=n.showlabels;var l=o&&s;var u=I.createLines(i,o||s,t);var c=I.createLineClip(i,l,r,a.trace.uid);var f=e.selectAll("g.contourlabels").data(s?[0]:[]);f.exit().remove();f.enter().append("g").classed("contourlabels",true);if(s){var d=[];var v=[];R.clearLocationCache();var p=I.labelFormatter(r,a);var h=N.tester.append("text").attr("data-notex",1).call(N.font,n.labelfont);var m=t[0].xaxis;var g=t[0].yaxis;var y=m._length;var x=g._length;var b=m.range;var _=g.range;var w=R.aggNums(Math.min,null,a.x);var T=R.aggNums(Math.max,null,a.x);var k=R.aggNums(Math.min,null,a.y);var M=R.aggNums(Math.max,null,a.y);var A=Math.max(m.c2p(w,true),0);var S=Math.min(m.c2p(T,true),y);var E=Math.max(g.c2p(M,true),0);var L=Math.min(g.c2p(k,true),x);var C={};if(b[0]<b[1]){C.left=A;C.right=S}else{C.left=S;C.right=A}if(_[0]<_[1]){C.top=E;C.bottom=L}else{C.top=L;C.bottom=E}C.middle=(C.top+C.bottom)/2;C.center=(C.left+C.right)/2;d.push([[C.left,C.top],[C.right,C.top],[C.right,C.bottom],[C.left,C.bottom]]);var D=Math.sqrt(y*y+x*x);var O=z.LABELDISTANCE*D/Math.max(1,t.length/z.LABELINCREASE);u.each(function(e){var i=I.calcTextOpts(e.level,p,h,r);P.select(this).selectAll("path").each(function(){var e=this;var t=R.getVisibleSegment(e,C,i.height/2);if(!t)return;if(t.len<(i.width+i.height)*z.LABELMIN)return;var r=Math.min(Math.ceil(t.len/O),z.LABELMAX);for(var a=0;a<r;a++){var n=I.findBestTextLocation(e,t,i,v,C);if(!n)break;I.addLabelData(n,i,v,d)}})});h.remove();I.drawLabels(f,v,r,c,l?d:null)}if(s&&!o)u.remove()}I.createLines=function(e,t,r){var a=r[0].smoothing;var n=e.selectAll("g.contourlevel").data(t?r:[]);n.exit().remove();n.enter().append("g").classed("contourlevel",true);if(t){var i=n.selectAll("path.openline").data(function(e){return e.pedgepaths||e.edgepaths});i.exit().remove();i.enter().append("path").classed("openline",true);i.attr("d",function(e){return N.smoothopen(e,a)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var o=n.selectAll("path.closedline").data(function(e){return e.ppaths||e.paths});o.exit().remove();o.enter().append("path").classed("closedline",true);o.attr("d",function(e){return N.smoothclosed(e,a)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return n};I.createLineClip=function(e,t,r,a){var n=r._fullLayout._clips;var i=t?"clipline"+a:null;var o=n.selectAll("#"+i).data(t?[0]:[]);o.exit().remove();o.enter().append("clipPath").classed("contourlineclip",true).attr("id",i);N.setClipUrl(e,i,r);return o};I.labelFormatter=function(e,t){var r=e._fullLayout;var a=t.trace;var n=a.contours;var i={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(n.labelformat){i.tickformat=n.labelformat;f(i,r)}else{var o=l.extractOpts(a);if(o&&o.colorbar&&o.colorbar._axis){i=o.colorbar._axis}else{if(n.type==="constraint"){var s=n.value;if(Array.isArray(s)){i.range=[s[0],s[s.length-1]]}else i.range=[s,s]}else{i.range=[n.start,n.end];i.nticks=(n.end-n.start)/n.size}if(i.range[0]===i.range[1]){i.range[1]+=i.range[0]||1}if(!i.nticks)i.nticks=1e3;f(i,r);c.prepTicks(i);i._tmin=null;i._tmax=null}}return function(e){return c.tickText(i,e).text}};I.calcTextOpts=function(e,t,r,a){var n=t(e);r.text(n).call(u.convertToTspans,a);var i=r.node();var o=N.bBox(i,true);return{text:n,width:o.width,height:o.height,fontSize:+i.style["font-size"].replace("px",""),level:e,dy:(o.top+o.bottom)/2}};I.findBestTextLocation=function(e,t,r,a,n){var i=r.width;var o,s,l,u,c;if(t.isClosed){s=t.len/A.INITIALSEARCHPOINTS;o=t.min+s/2;l=t.max}else{s=(t.len-i)/(A.INITIALSEARCHPOINTS+1);o=t.min+s+i/2;l=t.max-(s+i)/2}var f=Infinity;for(var d=0;d<A.ITERATIONS;d++){for(var v=o;v<l;v+=s){var p=R.getTextLocation(e,t.total,v,i);var h=m(p,r,a,n);if(h<f){f=h;c=p;u=v}}if(f>A.MAXCOST*2)break;if(d)s/=2;o=u-s/2;l=o+s*1.5}if(f<=A.MAXCOST)return c};function m(e,t,r,a){var n=t.width/2;var i=t.height/2;var o=e.x;var s=e.y;var l=e.theta;var u=Math.cos(l)*n;var c=Math.sin(l)*n;var f=(o>a.center?a.right-o:o-a.left)/(u+Math.abs(Math.sin(l)*i));var d=(s>a.middle?a.bottom-s:s-a.top)/(Math.abs(c)+Math.cos(l)*i);if(f<1||d<1)return Infinity;var v=A.EDGECOST*(1/(f-1)+1/(d-1));v+=A.ANGLECOST*l*l;var p=o-u;var h=s-c;var m=o+u;var g=s+c;for(var y=0;y<r.length;y++){var x=r[y];var b=Math.cos(x.theta)*x.width/2;var _=Math.sin(x.theta)*x.width/2;var w=R.segmentDistance(p,h,m,g,x.x-b,x.y-_,x.x+b,x.y+_)*2/(t.height+x.height);var T=x.level===t.level;var k=T?A.SAMELEVELDISTANCE:1;if(w<=k)return Infinity;var M=A.NEIGHBORCOST*(T?A.SAMELEVELFACTOR:1);v+=M/(w-k)}return v}I.addLabelData=function(e,t,r,a){var n=t.fontSize;var i=t.width+n/3;var o=Math.max(0,t.height-n/3);var s=e.x;var l=e.y;var u=e.theta;var c=Math.sin(u);var f=Math.cos(u);var d=function(e,t){return[s+e*f-t*c,l+e*c+t*f]};var v=[d(-i/2,-o/2),d(-i/2,o/2),d(i/2,o/2),d(i/2,-o/2)];r.push({text:t.text,x:s,y:l,dy:t.dy,theta:u,level:t.level,width:i,height:o});a.push(v)};I.drawLabels=function(e,t,a,r,n){var i=e.selectAll("text").data(t,function(e){return e.text+","+e.x+","+e.y+","+e.theta});i.exit().remove();i.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(e){var t=e.x+Math.sin(e.theta)*e.dy;var r=e.y-Math.cos(e.theta)*e.dy;P.select(this).text(e.text).attr({x:t,y:r,transform:"rotate("+180*e.theta/Math.PI+" "+t+" "+r+")"}).call(u.convertToTspans,a)});if(n){var o="";for(var s=0;s<n.length;s++){o+="M"+n[s].join("L")+"Z"}var l=R.ensureSingle(r,"path","");l.attr("d",o)}};function L(e,t,r,a,n){var i=a.trace;var o=r._fullLayout._clips;var s="clip"+i.uid;var l=o.selectAll("#"+s).data(i.connectgaps?[]:[0]);l.enter().append("clipPath").classed("contourclip",true).attr("id",s);l.exit().remove();if(i.connectgaps===false){var u={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:t.xaxis,yaxis:t.yaxis,x:a.x,y:a.y,z:p(a),smoothing:0};_([u]);w([u]);d([u],{type:"levels"});var c=R.ensureSingle(l,"path","");c.attr("d",(u.prefixBoundary?"M"+n.join("L")+"Z":"")+v(u,n))}else s=null;N.setClipUrl(e,s,r)}function p(e){var t=e.trace._emptypoints;var r=[];var a=e.z.length;var n=e.z[0].length;var i;var o=[];var s;for(i=0;i<n;i++)o.push(1);for(i=0;i<a;i++)r.push(o.slice());for(i=0;i<t.length;i++){s=t[i];r[s[0]][s[1]]=0}e.zmask=r;return r}},{"../../components/colorscale":167,"../../components/drawing":177,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/cartesian/axes":331,"../../plots/cartesian/set_convert":352,"../heatmap/plot":445,"./close_boundaries":414,"./constants":416,"./convert_to_constraints":420,"./empty_pathinfo":422,"./find_all_paths":424,"./make_crossings":429,"@plotly/d3":20}],431:[function(e,t,r){"use strict";var f=e("../../plots/cartesian/axes");var d=e("../../lib");t.exports=function e(t,r){var a=t.contours;if(t.autocontour){var n=t.zmin;var i=t.zmax;if(t.zauto||n===undefined){n=d.aggNums(Math.min,null,r)}if(t.zauto||i===undefined){i=d.aggNums(Math.max,null,r)}var o=v(n,i,t.ncontours);a.size=o.dtick;a.start=f.tickFirst(o);o.range.reverse();a.end=f.tickFirst(o);if(a.start===n)a.start+=a.size;if(a.end===i)a.end-=a.size;if(a.start>a.end){a.start=a.end=(a.start+a.end)/2}if(!t._input.contours)t._input.contours={};d.extendFlat(t._input.contours,{start:a.start,end:a.end,size:a.size});t._input.autocontour=true}else if(a.type!=="constraint"){var s=a.start;var l=a.end;var u=t._input.contours;if(s>l){a.start=u.start=l;l=a.end=u.end=s;s=a.start}if(!(a.size>0)){var c;if(s===l)c=1;else c=v(s,l,t.ncontours).dtick;u.size=a.size=c}}};function v(e,t,r){var a={type:"linear",range:[e,t]};f.autoTicks(a,(t-e)/(r||15));return a}},{"../../lib":285,"../../plots/cartesian/axes":331}],432:[function(e,t,r){"use strict";var v=e("@plotly/d3");var p=e("../../components/drawing");var a=e("../heatmap/style");var h=e("./make_color_map");t.exports=function e(t){var r=v.select(t).selectAll("g.contour");r.style("opacity",function(e){return e[0].trace.opacity});r.each(function(e){var t=v.select(this);var r=e[0].trace;var a=r.contours;var n=r.line;var i=a.size||1;var o=a.start;var s=a.type==="constraint";var l=!s&&a.coloring==="lines";var u=!s&&a.coloring==="fill";var c=l||u?h(r):null;t.selectAll("g.contourlevel").each(function(e){v.select(this).selectAll("path").call(p.lineGroupStyle,n.width,l?c(e.level):n.color,n.dash)});var f=a.labelfont;t.selectAll("g.contourlabels text").each(function(e){p.font(v.select(this),{family:f.family,size:f.size,color:f.color||(l?c(e.level):n.color)})});if(s){t.selectAll("g.contourfill path").style("fill",r.fillcolor)}else if(u){var d;t.selectAll("g.contourfill path").style("fill",function(e){if(d===undefined)d=e.level;return c(e.level+.5*i)});if(d===undefined)d=o;t.selectAll("g.contourbg path").style("fill",c(d-.5*i))}});a(t)}},{"../../components/drawing":177,"../heatmap/style":446,"./make_color_map":428,"@plotly/d3":20}],433:[function(e,t,r){"use strict";var u=e("../../components/colorscale/defaults");var c=e("./label_defaults");t.exports=function e(t,r,a,n,i){var o=a("contours.coloring");var s;var l="";if(o==="fill")s=a("contours.showlines");if(s!==false){if(o!=="lines")l=a("line.color","#000");a("line.width",.5);a("line.dash")}if(o!=="none"){if(t.showlegend!==true)r.showlegend=false;r._dfltShowLegend=false;u(t,r,n,a,{prefix:"",cLetter:"z"})}a("line.smoothing");c(a,n,l,i)}},{"../../components/colorscale/defaults":165,"./label_defaults":427}],434:[function(e,t,r){"use strict";var a=e("../scatter/attributes");var n=e("../../plots/attributes");var i=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var o=e("../../plots/template_attributes").hovertemplateAttrs;var s=e("../../components/colorscale/attributes");var l=e("../../lib/extend").extendFlat;t.exports=l({z:{valType:"data_array",editType:"calc"},x:l({},a.x,{impliedEdits:{xtype:"array"}}),x0:l({},a.x0,{impliedEdits:{xtype:"scaled"}}),dx:l({},a.dx,{impliedEdits:{xtype:"scaled"}}),y:l({},a.y,{impliedEdits:{ytype:"array"}}),y0:l({},a.y0,{impliedEdits:{ytype:"scaled"}}),dy:l({},a.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:l({},a.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:l({},a.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:l({},a.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:l({},a.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:l({},a.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:l({},a.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:false,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",false],dflt:false,editType:"calc"},hoverongaps:{valType:"boolean",dflt:true,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z",1),hovertemplate:o(),showlegend:l({},n.showlegend,{dflt:false})},{transforms:undefined},s("",{cLetter:"z",autoColorDflt:false}))},{"../../components/colorscale/attributes":162,"../../lib/extend":279,"../../plots/attributes":327,"../../plots/cartesian/axis_format_attributes":334,"../../plots/template_attributes":368,"../scatter/attributes":494}],435:[function(e,t,r){"use strict";var I=e("../../registry");var P=e("../../lib");var R=e("../../plots/cartesian/axes");var N=e("../../plots/cartesian/align_period");var z=e("../histogram2d/calc");var F=e("../../components/colorscale/calc");var j=e("./convert_column_xyz");var H=e("./clean_2d_array");var B=e("./interp2d");var q=e("./find_empties");var U=e("./make_bound_array");var s=e("../../constants/numerical").BADNUM;t.exports=function e(t,r){var a=R.getFromId(t,r.xaxis||"x");var n=R.getFromId(t,r.yaxis||"y");var i=I.traceIs(r,"contour");var o=I.traceIs(r,"histogram");var s=I.traceIs(r,"gl2d");var l=i?"best":r.zsmooth;var u,c,f,d;var v,p,h,m;var g,y,x;a._minDtick=0;n._minDtick=0;if(o){x=z(t,r);d=x.orig_x;u=x.x;c=x.x0;f=x.dx;m=x.orig_y;v=x.y;p=x.y0;h=x.dy;g=x.z}else{var b=r.z;if(P.isArray1D(b)){j(r,a,n,"x","y",["z"]);u=r._x;v=r._y;b=r._z}else{d=r.x?a.makeCalcdata(r,"x"):[];m=r.y?n.makeCalcdata(r,"y"):[];u=N(r,a,"x",d);v=N(r,n,"y",m);r._x=u;r._y=v}c=r.x0;f=r.dx;p=r.y0;h=r.dy;g=H(b,r,a,n)}if(a.rangebreaks||n.rangebreaks){g=V(u,v,g);if(!o){u=Y(u);v=Y(v);r._x=u;r._y=v}}if(!o&&(i||r.connectgaps)){r._emptypoints=q(g);B(g,r._emptypoints)}function _(e){l=r._input.zsmooth=r.zsmooth=false;P.warn('cannot use zsmooth: "fast": '+e)}if(l==="fast"){if(a.type==="log"||n.type==="log"){_("log axis found")}else if(!o){if(u.length){var w=(u[u.length-1]-u[0])/(u.length-1);var T=Math.abs(w/100);for(y=0;y<u.length-1;y++){if(Math.abs(u[y+1]-u[y]-w)>T){_("x scale is not linear");break}}}if(v.length&&l==="fast"){var k=(v[v.length-1]-v[0])/(v.length-1);var M=Math.abs(k/100);for(y=0;y<v.length-1;y++){if(Math.abs(v[y+1]-v[y]-k)>M){_("y scale is not linear");break}}}}}var A=P.maxRowLength(g);var S=r.xtype==="scaled"?"":u;var E=U(r,S,c,f,A,a);var L=r.ytype==="scaled"?"":v;var C=U(r,L,p,h,g.length,n);if(!s){r._extremes[a._id]=R.findExtremes(a,E);r._extremes[n._id]=R.findExtremes(n,C)}var D={x:E,y:C,z:g,text:r._text||r.text,hovertext:r._hovertext||r.hovertext};if(r.xperiodalignment&&d){D.orig_x=d}if(r.yperiodalignment&&m){D.orig_y=m}if(S&&S.length===E.length-1)D.xCenter=S;if(L&&L.length===C.length-1)D.yCenter=L;if(o){D.xRanges=x.xRanges;D.yRanges=x.yRanges;D.pts=x.pts}if(!i){F(t,r,{vals:g,cLetter:"z"})}if(i&&r.contours&&r.contours.coloring==="heatmap"){var O={type:r.type==="contour"?"heatmap":"histogram2d",xcalendar:r.xcalendar,ycalendar:r.ycalendar};D.xfill=U(O,S,c,f,A,a);D.yfill=U(O,L,p,h,g.length,n)}return[D]};function Y(e){var t=[];var r=e.length;for(var a=0;a<r;a++){var n=e[a];if(n!==s)t.push(n)}return t}function V(e,t,r){var a=[];var n=-1;for(var i=0;i<r.length;i++){if(t[i]===s)continue;n++;a[n]=[];for(var o=0;o<r[i].length;o++){if(e[o]===s)continue;a[n].push(r[i][o])}}return a}},{"../../components/colorscale/calc":163,"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/align_period":328,"../../plots/cartesian/axes":331,"../../registry":373,"../histogram2d/calc":463,"./clean_2d_array":436,"./convert_column_xyz":438,"./find_empties":440,"./interp2d":443,"./make_bound_array":444}],436:[function(e,t,r){"use strict";var g=e("fast-isnumeric");var y=e("../../lib");var x=e("../../constants/numerical").BADNUM;t.exports=function e(t,n,r,a){var i,o,s,l,u,c;function f(e){if(!g(e))return undefined;return+e}if(n&&n.transpose){i=0;for(u=0;u<t.length;u++)i=Math.max(i,t[u].length);if(i===0)return false;s=function(e){return e.length};l=function(e,t,r){return(e[r]||[])[t]}}else{i=t.length;s=function(e,t){return e[t].length};l=function(e,t,r){return(e[t]||[])[r]}}var d=function(e,t,r){if(t===x||r===x)return x;return l(e,t,r)};function v(r){if(n&&n.type!=="carpet"&&n.type!=="contourcarpet"&&r&&r.type==="category"&&n["_"+r._id.charAt(0)].length){var e=r._id.charAt(0);var a={};var t=n["_"+e+"CategoryMap"]||n[e];for(u=0;u<t.length;u++){a[t[u]]=u}return function(e){var t=a[r._categories[e]];return t+1?t:x}}else{return y.identity}}var p=v(r);var h=v(a);if(a&&a.type==="category")i=a._categories.length;var m=new Array(i);for(u=0;u<i;u++){if(r&&r.type==="category"){o=r._categories.length}else{o=s(t,u)}m[u]=new Array(o);for(c=0;c<o;c++)m[u][c]=f(d(t,h(u),p(c)))}return m}},{"../../constants/numerical":265,"../../lib":285,"fast-isnumeric":31}],437:[function(e,t,r){"use strict";t.exports={min:"zmin",max:"zmax"}},{}],438:[function(e,t,r){"use strict";var D=e("../../lib");var O=e("../../constants/numerical").BADNUM;var I=e("../../plots/cartesian/align_period");t.exports=function e(t,r,a,n,i,o){var s=t._length;var l=r.makeCalcdata(t,n);var u=a.makeCalcdata(t,i);l=I(t,r,n,l);u=I(t,a,i,u);var c=t.text;var f=c!==undefined&&D.isArray1D(c);var d=t.hovertext;var v=d!==undefined&&D.isArray1D(d);var p,h;var m=D.distinctVals(l);var g=m.vals;var y=D.distinctVals(u);var x=y.vals;var b=[];var _;var w;var T=x.length;var k=g.length;for(p=0;p<o.length;p++){b[p]=D.init2dArray(T,k)}if(f){_=D.init2dArray(T,k)}if(v){w=D.init2dArray(T,k)}var M=D.init2dArray(T,k);for(p=0;p<s;p++){if(l[p]!==O&&u[p]!==O){var A=D.findBin(l[p]+m.minDiff/2,g);var S=D.findBin(u[p]+y.minDiff/2,x);for(h=0;h<o.length;h++){var E=o[h];var L=t[E];var C=b[h];C[S][A]=L[p];M[S][A]=p}if(f)_[S][A]=c[p];if(v)w[S][A]=d[p]}}t["_"+n]=g;t["_"+i]=x;for(h=0;h<o.length;h++){t["_"+o[h]]=b[h]}if(f)t._text=_;if(v)t._hovertext=w;if(r&&r.type==="category"){t["_"+n+"CategoryMap"]=g.map(function(e){return r._categories[e]})}if(a&&a.type==="category"){t["_"+i+"CategoryMap"]=x.map(function(e){return a._categories[e]})}t._after2before=M}},{"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/align_period":328}],439:[function(e,t,r){"use strict";var s=e("../../lib");var l=e("./xyz_defaults");var u=e("../scatter/period_defaults");var c=e("./style_defaults");var f=e("../../components/colorscale/defaults");var d=e("./attributes");t.exports=function e(r,a,t,n){function i(e,t){return s.coerce(r,a,d,e,t)}var o=l(r,a,i,n);if(!o){a.visible=false;return}u(r,a,n,i);i("xhoverformat");i("yhoverformat");i("text");i("hovertext");i("hovertemplate");c(r,a,i,n);i("hoverongaps");i("connectgaps",s.isArray1D(a.z)&&a.zsmooth!==false);f(r,a,n,i,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":165,"../../lib":285,"../scatter/period_defaults":514,"./attributes":434,"./style_defaults":447,"./xyz_defaults":448}],440:[function(e,t,r){"use strict";var g=e("../../lib").maxRowLength;t.exports=function e(t){var r=[];var a={};var n=[];var i=t[0];var o=[];var s=[0,0,0];var l=g(t);var u;var c;var f;var d;var v;var p;var h;var m;for(c=0;c<t.length;c++){u=o;o=i;i=t[c+1]||[];for(f=0;f<l;f++){if(o[f]===undefined){p=(o[f-1]!==undefined?1:0)+(o[f+1]!==undefined?1:0)+(u[f]!==undefined?1:0)+(i[f]!==undefined?1:0);if(p){if(c===0)p++;if(f===0)p++;if(c===t.length-1)p++;if(f===o.length-1)p++;if(p<4){a[[c,f]]=[c,f,p]}r.push([c,f,p])}else n.push([c,f])}}}while(n.length){h={};m=false;for(v=n.length-1;v>=0;v--){d=n[v];c=d[0];f=d[1];p=((a[[c-1,f]]||s)[2]+(a[[c+1,f]]||s)[2]+(a[[c,f-1]]||s)[2]+(a[[c,f+1]]||s)[2])/20;if(p){h[d]=[c,f,p];n.splice(v,1);m=true}}if(!m){throw"findEmpties iterated with no new neighbors"}for(d in h){a[d]=h[d];r.push(h[d])}}return r.sort(function(e,t){return t[2]-e[2]})}},{"../../lib":285}],441:[function(e,t,r){"use strict";var N=e("../../components/fx");var z=e("../../lib");var F=e("../../plots/cartesian/axes");var j=e("../../components/colorscale").extractOpts;t.exports=function e(t,r,a,n,i){if(!i)i={};var o=i.isContour;var s=t.cd[0];var l=s.trace;var u=t.xa;var c=t.ya;var f=s.x;var d=s.y;var v=s.z;var p=s.xCenter;var h=s.yCenter;var m=s.zmask;var g=l.zhoverformat;var y=f;var x=d;var b,_,w,T;if(t.index!==false){try{w=Math.round(t.index[1]);T=Math.round(t.index[0])}catch(e){z.error("Error hovering on heatmap, "+"pointNumber must be [row,col], found:",t.index);return}if(w<0||w>=v[0].length||T<0||T>v.length){return}}else if(N.inbox(r-f[0],r-f[f.length-1],0)>0||N.inbox(a-d[0],a-d[d.length-1],0)>0){return}else{if(o){var k;y=[2*f[0]-f[1]];for(k=1;k<f.length;k++){y.push((f[k]+f[k-1])/2)}y.push([2*f[f.length-1]-f[f.length-2]]);x=[2*d[0]-d[1]];for(k=1;k<d.length;k++){x.push((d[k]+d[k-1])/2)}x.push([2*d[d.length-1]-d[d.length-2]])}w=Math.max(0,Math.min(y.length-2,z.findBin(r,y)));T=Math.max(0,Math.min(x.length-2,z.findBin(a,x)))}var M=u.c2p(f[w]);var A=u.c2p(f[w+1]);var S=c.c2p(d[T]);var E=c.c2p(d[T+1]);var L,C;if(o){L=s.orig_x||f;C=s.orig_y||d;A=M;b=L[w];E=S;_=C[T]}else{L=s.orig_x||p||f;C=s.orig_y||h||d;b=p?L[w]:(L[w]+L[w+1])/2;_=h?C[T]:(C[T]+C[T+1])/2;if(u&&u.type==="category")b=f[w];if(c&&c.type==="category")_=d[T];if(l.zsmooth){M=A=u.c2p(b);S=E=c.c2p(_)}}var D=v[T][w];if(m&&!m[T][w])D=undefined;if(D===undefined&&!l.hoverongaps)return;var O;if(Array.isArray(s.hovertext)&&Array.isArray(s.hovertext[T])){O=s.hovertext[T][w]}else if(Array.isArray(s.text)&&Array.isArray(s.text[T])){O=s.text[T][w]}var I=j(l);var P={type:"linear",range:[I.min,I.max],hoverformat:g,_separators:u._separators,_numFormat:u._numFormat};var R=F.tickText(P,D,"hover").text;return[z.extendFlat(t,{index:l._after2before?l._after2before[T][w]:[T,w],distance:t.maxHoverDistance,spikeDistance:t.maxSpikeDistance,x0:M,x1:A,y0:S,y1:E,xLabelVal:b,yLabelVal:_,zLabelVal:D,zLabel:R,text:O})]}},{"../../components/colorscale":167,"../../components/fx":195,"../../lib":285,"../../plots/cartesian/axes":331}],442:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:e("./colorbar"),style:e("./style"),hoverPoints:e("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":345,"./attributes":434,"./calc":435,"./colorbar":437,"./defaults":439,"./hover":441,"./plot":445,"./style":446}],443:[function(e,t,r){"use strict";var i=e("../../lib");var o=.01;var g=[[-1,0],[1,0],[0,-1],[0,1]];function s(e){return.5-.25*Math.min(1,e*.5)}t.exports=function e(t,r){var a=1;var n;l(t,r);for(n=0;n<r.length;n++){if(r[n][2]<4)break}r=r.slice(n);for(n=0;n<100&&a>o;n++){a=l(t,r,s(a))}if(a>o){i.log("interp2d didn't converge quickly",a)}return t};function l(e,t,r){var a=0;var n;var i;var o;var s;var l;var u;var c;var f;var d;var v;var p;var h;var m;for(s=0;s<t.length;s++){n=t[s];i=n[0];o=n[1];p=e[i][o];v=0;d=0;for(l=0;l<4;l++){u=g[l];c=e[i+u[0]];if(!c)continue;f=c[o+u[1]];if(f!==undefined){if(v===0){h=m=f}else{h=Math.min(h,f);m=Math.max(m,f)}d++;v+=f}}if(d===0){throw"iterateInterp2d order is wrong: no defined neighbors"}e[i][o]=v/d;if(p===undefined){if(d<4)a=1}else{e[i][o]=(1+r)*e[i][o]-r*p;if(m>h){a=Math.max(a,Math.abs(e[i][o]-p)/(m-h))}}}return a}},{"../../lib":285}],444:[function(e,t,r){"use strict";var b=e("../../registry");var _=e("../../lib").isArrayOrTypedArray;t.exports=function e(t,r,a,n,i,o){var s=[];var l=b.traceIs(t,"contour");var u=b.traceIs(t,"histogram");var c=b.traceIs(t,"gl2d");var f;var d;var v;var p=_(r)&&r.length>1;if(p&&!u&&o.type!=="category"){var h=r.length;if(h<=i){if(l||c)s=r.slice(0,i);else if(i===1){s=[r[0]-.5,r[0]+.5]}else{s=[1.5*r[0]-.5*r[1]];for(v=1;v<h;v++){s.push((r[v-1]+r[v])*.5)}s.push(1.5*r[h-1]-.5*r[h-2])}if(h<i){var m=s[s.length-1];var g=m-s[s.length-2];for(v=h;v<i;v++){m+=g;s.push(m)}}}else{return l?r.slice(0,i):r.slice(0,i+1)}}else{var y=t[o._id.charAt(0)+"calendar"];if(u){f=o.r2c(a,0,y)}else{if(_(r)&&r.length===1){f=r[0]}else if(a===undefined){f=0}else{var x=o.type==="log"?o.d2c:o.r2c;f=x(a,0,y)}}d=n||1;for(v=l||c?0:-.5;v<i;v++){s.push(f+d*v)}}return s}},{"../../lib":285,"../../registry":373}],445:[function(e,t,r){"use strict";var xe=e("@plotly/d3");var be=e("tinycolor2");var _e=e("../../registry");var we=e("../../lib");var Te=e("../../components/colorscale").makeColorScaleFuncFromTrace;var ke=e("../../constants/xmlns_namespaces");t.exports=function(me,e,t,r){var ge=e.xaxis;var ye=e.yaxis;we.makeTraceGroups(r,t,"hm").each(function(e){var t=xe.select(this);var r=e[0];var a=r.trace;var n=r.z;var i=r.x;var o=r.y;var s=r.xCenter;var l=r.yCenter;var u=_e.traceIs(a,"contour");var c=u?"best":a.zsmooth;var f=n.length;var d=we.maxRowLength(n);var v=false;var p=false;var h,m,g,y,x,b;b=0;while(h===undefined&&b<i.length-1){h=ge.c2p(i[b]);b++}b=i.length-1;while(m===undefined&&b>0){m=ge.c2p(i[b]);b--}if(m<h){g=m;m=h;h=g;v=true}b=0;while(y===undefined&&b<o.length-1){y=ye.c2p(o[b]);b++}b=o.length-1;while(x===undefined&&b>0){x=ye.c2p(o[b]);b--}if(x<y){g=y;y=x;x=g;p=true}if(u){s=i;l=o;i=r.xfill;o=r.yfill}if(c!=="fast"){var _=c==="best"?0:.5;h=Math.max(-_*ge._length,h);m=Math.min((1+_)*ge._length,m);y=Math.max(-_*ye._length,y);x=Math.min((1+_)*ye._length,x)}var w=Math.round(m-h);var T=Math.round(x-y);var k=w<=0||T<=0;if(k){var M=t.selectAll("image").data([]);M.exit().remove();return}var A,S;if(c==="fast"){A=d;S=f}else{A=w;S=T}var E=document.createElement("canvas");E.width=A;E.height=S;var L=E.getContext("2d");var C=Te(a,{noNumericCheck:true,returnArray:true});var D,O;if(c==="fast"){D=v?function(e){return d-1-e}:we.identity;O=p?function(e){return f-1-e}:we.identity}else{D=function(e){return we.constrain(Math.round(ge.c2p(i[e])-h),0,w)};O=function(e){return we.constrain(Math.round(ye.c2p(o[e])-y),0,T)}}var I=O(0);var P=[I,I];var R=v?0:1;var N=p?0:1;var z=0;var F=0;var j=0;var H=0;var B,q,U,Y,V,G;function W(e,t){if(e!==undefined){var r=C(e);r[0]=Math.round(r[0]);r[1]=Math.round(r[1]);r[2]=Math.round(r[2]);z+=t;F+=r[0]*t;j+=r[1]*t;H+=r[2]*t;return r}return[0,0,0,0]}function $(e,t,r,a){var n=e[r.bin0];if(n===undefined)return W(undefined,1);var i=e[r.bin1];var o=t[r.bin0];var s=t[r.bin1];var l=i-n||0;var u=o-n||0;var c;if(i===undefined){if(s===undefined)c=0;else if(o===undefined)c=2*(s-n);else c=(2*s-o-n)*2/3}else if(s===undefined){if(o===undefined)c=0;else c=(2*n-i-o)*2/3}else if(o===undefined)c=(2*s-i-n)*2/3;else c=s+n-i-o;return W(n+r.frac*l+a.frac*(u+r.frac*c))}if(c){var Z=0;var X;try{X=new Uint8Array(w*T*4)}catch(e){X=new Array(w*T*4)}if(c==="best"){var J=s||i;var K=l||o;var Q=new Array(J.length);var ee=new Array(K.length);var te=new Array(w);var re=s?Ae:Me;var ae=l?Ae:Me;var ne,ie,oe;for(b=0;b<J.length;b++)Q[b]=Math.round(ge.c2p(J[b])-h);for(b=0;b<K.length;b++)ee[b]=Math.round(ye.c2p(K[b])-y);for(b=0;b<w;b++)te[b]=re(b,Q);for(q=0;q<T;q++){ne=ae(q,ee);ie=n[ne.bin0];oe=n[ne.bin1];for(b=0;b<w;b++,Z+=4){G=$(ie,oe,te[b],ne);Se(X,Z,G)}}}else{for(q=0;q<f;q++){V=n[q];P=O(q);for(b=0;b<w;b++){G=W(V[b],1);Z=(P*w+D(b))*4;Se(X,Z,G)}}}var se=L.createImageData(w,T);try{se.data.set(X)}catch(e){var le=se.data;var ue=le.length;for(q=0;q<ue;q++){le[q]=X[q]}}L.putImageData(se,0,0)}else{var ce=a.xgap;var fe=a.ygap;var de=Math.floor(ce/2);var ve=Math.floor(fe/2);for(q=0;q<f;q++){V=n[q];P.reverse();P[N]=O(q+1);if(P[0]===P[1]||P[0]===undefined||P[1]===undefined){continue}U=D(0);B=[U,U];for(b=0;b<d;b++){B.reverse();B[R]=D(b+1);if(B[0]===B[1]||B[0]===undefined||B[1]===undefined){continue}Y=V[b];G=W(Y,(B[1]-B[0])*(P[1]-P[0]));L.fillStyle="rgba("+G.join(",")+")";L.fillRect(B[0]+de,P[0]+ve,B[1]-B[0]-ce,P[1]-P[0]-fe)}}}F=Math.round(F/z);j=Math.round(j/z);H=Math.round(H/z);var pe=be("rgb("+F+","+j+","+H+")");me._hmpixcount=(me._hmpixcount||0)+z;me._hmlumcount=(me._hmlumcount||0)+z*pe.getLuminance();var he=t.selectAll("image").data(e);he.enter().append("svg:image").attr({xmlns:ke.svg,preserveAspectRatio:"none"});he.attr({height:T,width:w,x:h,y:y,"xlink:href":E.toDataURL("image/png")})})};function Me(e,t){var r=t.length-2;var a=we.constrain(we.findBin(e,t),0,r);var n=t[a];var i=t[a+1];var o=we.constrain(a+(e-n)/(i-n)-.5,0,r);var s=Math.round(o);var l=Math.abs(o-s);if(!o||o===r||!l){return{bin0:s,bin1:s,frac:0}}return{bin0:s,frac:l,bin1:Math.round(s+l/(o-s))}}function Ae(e,t){var r=t.length-1;var a=we.constrain(we.findBin(e,t),0,r);var n=t[a];var i=t[a+1];var o=(e-n)/(i-n)||0;if(o<=0){return{bin0:a,bin1:a,frac:0}}if(o<.5){return{bin0:a,bin1:a+1,frac:o}}return{bin0:a+1,bin1:a,frac:1-o}}function Se(e,t,r){e[t]=r[0];e[t+1]=r[1];e[t+2]=r[2];e[t+3]=Math.round(r[3]*255)}},{"../../components/colorscale":167,"../../constants/xmlns_namespaces":266,"../../lib":285,"../../registry":373,"@plotly/d3":20,tinycolor2:119}],446:[function(e,t,r){"use strict";var a=e("@plotly/d3");t.exports=function e(t){a.select(t).selectAll(".hm image").style("opacity",function(e){return e.trace.opacity})}},{"@plotly/d3":20}],447:[function(e,t,r){"use strict";t.exports=function e(t,r,a){var n=a("zsmooth");if(n===false){a("xgap");a("ygap")}a("zhoverformat")}},{}],448:[function(e,t,r){"use strict";var s=e("fast-isnumeric");var v=e("../../lib");var p=e("../../registry");t.exports=function e(t,r,a,n,i,o){var s=a("z");i=i||"x";o=o||"y";var l,u;if(s===undefined||!s.length)return 0;if(v.isArray1D(t.z)){l=a(i);u=a(o);var c=v.minRowLength(l);var f=v.minRowLength(u);if(c===0||f===0)return 0;r._length=Math.min(c,f,s.length)}else{l=h(i,a);u=h(o,a);if(!m(s))return 0;a("transpose");r._length=null}if(t.type==="heatmapgl")return true;var d=p.getComponentMethod("calendars","handleTraceDefaults");d(t,r,[i,o],n);return true};function h(e,t){var r=t(e);var a=r?t(e+"type","array"):"scaled";if(a==="scaled"){t(e+"0");t("d"+e)}return r}function m(e){var t=true;var r=false;var a=false;var n;for(var i=0;i<e.length;i++){n=e[i];if(!v.isArrayOrTypedArray(n)){t=false;break}if(n.length>0)r=true;for(var o=0;o<n.length;o++){if(s(n[o])){a=true;break}}}return t&&r&&a}},{"../../lib":285,"../../registry":373,"fast-isnumeric":31}],449:[function(e,t,r){"use strict";var a=e("../bar/attributes");var n=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var i=e("../../plots/template_attributes").hovertemplateAttrs;var o=e("./bin_attributes");var s=e("./constants");var l=e("../../lib/extend").extendFlat;t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:n("x"),yhoverformat:n("y"),text:l({},a.text,{}),hovertext:l({},a.hovertext,{}),orientation:a.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:false,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:o("x",true),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:o("y",true),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:i({},{keys:s.eventDataKeys}),marker:a.marker,offsetgroup:a.offsetgroup,alignmentgroup:a.alignmentgroup,selected:a.selected,unselected:a.unselected,_deprecated:{bardir:a._deprecated.bardir}}},{"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../../plots/template_attributes":368,"../bar/attributes":383,"./bin_attributes":451,"./constants":455}],450:[function(e,t,r){"use strict";t.exports=function e(t,r){var a=t.length;var n=0;for(var i=0;i<a;i++){if(r[i]){t[i]/=r[i];n+=t[i]}else t[i]=null}return n}},{}],451:[function(e,t,r){"use strict";t.exports=function e(t,r){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],452:[function(e,t,r){"use strict";var o=e("fast-isnumeric");t.exports={count:function(e,t,r){r[e]++;return 1},sum:function(e,t,r,a){var n=a[t];if(o(n)){n=Number(n);r[e]+=n;return n}return 0},avg:function(e,t,r,a,n){var i=a[t];if(o(i)){i=Number(i);r[e]+=i;n[e]++}return 0},min:function(e,t,r,a){var n=a[t];if(o(n)){n=Number(n);if(!o(r[e])){r[e]=n;return n}else if(r[e]>n){var i=n-r[e];r[e]=n;return i}}return 0},max:function(e,t,r,a){var n=a[t];if(o(n)){n=Number(n);if(!o(r[e])){r[e]=n;return n}else if(r[e]<n){var i=n-r[e];r[e]=n;return i}}return 0}}},{"fast-isnumeric":31}],453:[function(e,t,r){"use strict";var a=e("../../constants/numerical");var g=a.ONEAVGYEAR;var n=a.ONEAVGMONTH;var y=a.ONEDAY;var i=a.ONEHOUR;var o=a.ONEMIN;var s=a.ONESEC;var x=e("../../plots/cartesian/axes").tickIncrement;t.exports=function e(o,t,r,s,l){var a=-1.1*t;var n=-.1*t;var i=o-n;var u=r[0];var c=r[1];var f=Math.min(b(u+n,u+i,s,l),b(c+n,c+i,s,l));var d=Math.min(b(u+a,u+n,s,l),b(c+a,c+n,s,l));var v,p;if(f>d&&d<Math.abs(c-u)/4e3){v=f;p=false}else{v=Math.min(f,d);p=true}if(s.type==="date"&&v>y){var h=v===g?1:6;var m=v===g?"M12":"M1";return function(e,t){var r=s.c2d(e,g,l);var a=r.indexOf("-",h);if(a>0)r=r.substr(0,a);var n=s.d2c(r,0,l);if(n<e){var i=x(n,m,false,l);if((n+i)/2<e+o)n=i}if(t&&p){return x(n,m,true,l)}return n}}return function(e,t){var r=v*Math.round(e/v);if(r+v/10<e&&r+v*.9<e+o){r+=v}if(t&&p){r-=v}return r}};function b(e,t,r,a){if(e*t<=0)return Infinity;var n=Math.abs(t-e);var i=r.type==="date";var o=u(n,i);for(var s=0;s<10;s++){var l=u(o*80,i);if(o===l)break;if(c(l,e,t,i,r,a))o=l;else break}return o}function u(e,t){if(t&&e>s){if(e>y){if(e>g*1.1)return g;if(e>n*1.1)return n;return y}if(e>i)return i;if(e>o)return o;return s}return Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function c(e,t,r,a,n,i){if(a&&e>y){var o=f(t,n,i);var s=f(r,n,i);var l=e===g?0:1;return o[l]!==s[l]}return Math.floor(r/e)-Math.floor(t/e)>.1}function f(e,t,r){var a=t.c2d(e,g,r).split("-");if(a[0]===""){a.unshift();a[0]="-"+a[0]}return a}},{"../../constants/numerical":265,"../../plots/cartesian/axes":331}],454:[function(e,t,r){"use strict";var W=e("fast-isnumeric");var $=e("../../lib");var B=e("../../registry");var Z=e("../../plots/cartesian/axes");var X=e("../bar/arrays_to_calcdata");var J=e("./bin_functions");var K=e("./norm_functions");var Q=e("./average");var ee=e("./bin_label_vals");function a(a,e){var t=[];var r=[];var n=Z.getFromId(a,e.orientation==="h"?e.yaxis:e.xaxis);var i=e.orientation==="h"?"y":"x";var o={x:"y",y:"x"}[i];var s=e[i+"calendar"];var l=e.cumulative;var u;var c=te(a,e,n,i);var f=c[0];var d=c[1];var v=typeof f.size==="string";var p=[];var h=v?p:f;var m=[];var g=[];var y=[];var x=0;var b=e.histnorm;var _=e.histfunc;var w=b.indexOf("density")!==-1;var T,k,M;if(l.enabled&&w){b=b.replace(/ ?density$/,"");w=false}var A=_==="max"||_==="min";var S=A?null:0;var E=J.count;var L=K[b];var C=false;var D=function(e){return n.r2c(e,0,s)};var O;if($.isArrayOrTypedArray(e[o])&&_!=="count"){O=e[o];C=_==="avg";E=J[_]}u=D(f.start);k=D(f.end)+(u-Z.tickIncrement(u,f.size,false,s))/1e6;while(u<k&&t.length<1e6){T=Z.tickIncrement(u,f.size,false,s);t.push((u+T)/2);r.push(S);y.push([]);p.push(u);if(w)m.push(1/(T-u));if(C)g.push(0);if(T<=u)break;u=T}p.push(u);if(!v&&n.type==="date"){h={start:D(h.start),end:D(h.end),size:h.size}}if(!a._fullLayout._roundFnOpts)a._fullLayout._roundFnOpts={};var I=e["_"+i+"bingroup"];var P={leftGap:Infinity,rightGap:Infinity};if(I){if(!a._fullLayout._roundFnOpts[I])a._fullLayout._roundFnOpts[I]=P;P=a._fullLayout._roundFnOpts[I]}var R=r.length;var N=true;var z=P.leftGap;var F=P.rightGap;var j={};for(u=0;u<d.length;u++){var H=d[u];M=$.findBin(H,h);if(M>=0&&M<R){x+=E(M,u,r,O,g);if(N&&y[M].length&&H!==d[y[M][0]]){N=false}y[M].push(u);j[u]=M;z=Math.min(z,H-p[M]);F=Math.min(F,p[M+1]-H)}}P.leftGap=z;P.rightGap=F;var B;if(!N){B=function(t,r){return function(){var e=a._fullLayout._roundFnOpts[I];return ee(e.leftGap,e.rightGap,p,n,s)(t,r)}}}if(C)x=Q(r,g);if(L)L(r,x,m);if(l.enabled)re(r,l.direction,l.currentbin);var q=Math.min(t.length,r.length);var U=[];var Y=0;var V=q-1;for(u=0;u<q;u++){if(r[u]){Y=u;break}}for(u=q-1;u>=Y;u--){if(r[u]){V=u;break}}for(u=Y;u<=V;u++){if(W(t[u])&&W(r[u])){var G={p:t[u],s:r[u],b:0};if(!l.enabled){G.pts=y[u];if(N){G.ph0=G.ph1=y[u].length?d[y[u][0]]:t[u]}else{e._computePh=true;G.ph0=B(p[u]);G.ph1=B(p[u+1],true)}}U.push(G)}}if(U.length===1){U[0].width1=Z.tickIncrement(U[0].p,f.size,false,s)-U[0].p}X(U,e);if($.isArrayOrTypedArray(e.selectedpoints)){$.tagSelected(U,e,j)}return U}function te(e,t,r,a,n){var i=a+"bins";var o=e._fullLayout;var s=t["_"+a+"bingroup"];var l=o._histogramBinOpts[s];var u=o.barmode==="overlay";var c,f,d,v,p,h,m;var g=function(e){return r.r2c(e,0,v)};var y=function(e){return r.c2r(e,0,v)};var x=r.type==="date"?function(e){return e||e===0?$.cleanDate(e,null,v):null}:function(e){return W(e)?Number(e):null};function b(e,t,r){if(t[e+"Found"]){t[e]=x(t[e]);if(t[e]===null)t[e]=r[e]}else{h[e]=t[e]=r[e];$.nestedProperty(f[0],i+"."+e).set(r[e])}}if(t["_"+a+"autoBinFinished"]){delete t["_"+a+"autoBinFinished"]}else{f=l.traces;var _=[];var w=true;var T=false;var k=false;for(c=0;c<f.length;c++){d=f[c];if(d.visible){var M=l.dirs[c];p=d["_"+M+"pos0"]=r.makeCalcdata(d,M);_=$.concat(_,p);delete d["_"+a+"autoBinFinished"];if(t.visible===true){if(w){w=false}else{delete d._autoBin;d["_"+a+"autoBinFinished"]=1}if(B.traceIs(d,"2dMap")){T=true}if(d.type==="histogram2dcontour"){k=true}}}}v=f[0][a+"calendar"];var A=Z.autoBin(_,r,l.nbins,T,v,l.sizeFound&&l.size);var S=f[0]._autoBin={};h=S[l.dirs[0]]={};if(k){if(!l.size){A.start=y(Z.tickIncrement(g(A.start),A.size,true,v))}if(l.end===undefined){A.end=y(Z.tickIncrement(g(A.end),A.size,false,v))}}if(u&&!B.traceIs(t,"2dMap")&&A._dataSpan===0&&r.type!=="category"&&r.type!=="multicategory"){if(n)return[A,p,true];A=q(e,t,r,a,i)}m=d.cumulative||{};if(m.enabled&&m.currentbin!=="include"){if(m.direction==="decreasing"){A.start=y(Z.tickIncrement(g(A.start),A.size,true,v))}else{A.end=y(Z.tickIncrement(g(A.end),A.size,false,v))}}l.size=A.size;if(!l.sizeFound){h.size=A.size;$.nestedProperty(f[0],i+".size").set(A.size)}b("start",l,A);b("end",l,A)}p=t["_"+a+"pos0"];delete t["_"+a+"pos0"];var E=t._input[i]||{};var L=$.extendFlat({},l);var C=l.start;var D=r.r2l(E.start);var O=D!==undefined;if((l.startFound||O)&&D!==r.r2l(C)){var I=O?D:$.aggNums(Math.min,null,p);var P={type:r.type==="category"||r.type==="multicategory"?"linear":r.type,r2l:r.r2l,dtick:l.size,tick0:C,calendar:v,range:[I,Z.tickIncrement(I,l.size,false,v)].map(r.l2r)};var R=Z.tickFirst(P);if(R>r.r2l(I)){R=Z.tickIncrement(R,l.size,true,v)}L.start=r.l2r(R);if(!O)$.nestedProperty(t,i+".start").set(L.start)}var N=l.end;var z=r.r2l(E.end);var F=z!==undefined;if((l.endFound||F)&&z!==r.r2l(N)){var j=F?z:$.aggNums(Math.max,null,p);L.end=r.l2r(j);if(!F)$.nestedProperty(t,i+".start").set(L.end)}var H="autobin"+a;if(t._input[H]===false){t._input[i]=$.extendFlat({},t[i]||{});delete t._input[H];delete t[H]}return[L,p]}function q(e,t,r,a,n){var i=e._fullLayout;var o=_(e,t);var s=false;var l=Infinity;var u=[t];var c,f,d;for(c=0;c<o.length;c++){f=o[c];if(f===t){s=true}else if(!s){d=i._histogramBinOpts[f["_"+a+"bingroup"]];l=Math.min(l,d.size||f[n].size)}else{var v=te(e,f,r,a,true);var p=v[0];var h=v[2];f["_"+a+"autoBinFinished"]=1;f["_"+a+"pos0"]=v[1];if(h){u.push(f)}else{l=Math.min(l,p.size)}}}var m=new Array(u.length);for(c=0;c<u.length;c++){var g=u[c]["_"+a+"pos0"];for(var y=0;y<g.length;y++){if(g[y]!==undefined){m[c]=g[y];break}}}if(!isFinite(l)){l=$.distinctVals(m).minDiff}for(c=0;c<u.length;c++){f=u[c];var x=f[a+"calendar"];var b={start:r.c2r(m[c]-l/2,0,x),end:r.c2r(m[c]+l/2,0,x),size:l};f._input[n]=f[n]=b;d=i._histogramBinOpts[f["_"+a+"bingroup"]];if(d)$.extendFlat(d,b)}return t[n]}function _(e,t){var r=t.xaxis;var a=t.yaxis;var n=t.orientation;var i=[];var o=e._fullData;for(var s=0;s<o.length;s++){var l=o[s];if(l.type==="histogram"&&l.visible===true&&l.orientation===n&&l.xaxis===r&&l.yaxis===a){i.push(l)}}return i}function re(t,e,r){var a,n,i;function o(e){i=t[e];t[e]/=2}function s(e){n=t[e];t[e]=i+n/2;i+=n}if(r==="half"){if(e==="increasing"){o(0);for(a=1;a<t.length;a++){s(a)}}else{o(t.length-1);for(a=t.length-2;a>=0;a--){s(a)}}}else if(e==="increasing"){for(a=1;a<t.length;a++){t[a]+=t[a-1]}if(r==="exclude"){t.unshift(0);t.pop()}}else{for(a=t.length-2;a>=0;a--){t[a]+=t[a+1]}if(r==="exclude"){t.push(0);t.shift()}}}t.exports={calc:a,calcAllAutoBins:te}},{"../../lib":285,"../../plots/cartesian/axes":331,"../../registry":373,"../bar/arrays_to_calcdata":382,"./average":450,"./bin_functions":452,"./bin_label_vals":453,"./norm_functions":461,"fast-isnumeric":31}],455:[function(e,t,r){"use strict";t.exports={eventDataKeys:["binNumber"]}},{}],456:[function(e,t,r){"use strict";var C=e("../../lib");var D=e("../../plots/cartesian/axis_ids");var O=e("../../registry").traceIs;var I=e("../bar/defaults").handleGroupingDefaults;var P=C.nestedProperty;var R=e("../../plots/cartesian/constraints").getAxisGroup;var N=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}];var z=["x","y"];t.exports=function e(t,a){var l=a._histogramBinOpts={};var r=[];var n={};var i=[];var o,s,u,c;var f,d,v;function p(e,t){return C.coerce(o._input,o,o._module.attributes,e,t)}function h(e){return e.orientation==="v"?"x":"y"}function m(e,t){var r=D.getFromTrace({_fullLayout:a},e,t);return r.type}function g(e,t,r){var a=e.uid+"__"+r;if(!t)t=a;var n=m(e,r);var i=e[r+"calendar"]||"";var o=l[t];var s=true;if(o){if(n===o.axType&&i===o.calendar){s=false;o.traces.push(e);o.dirs.push(r)}else{t=a;if(n!==o.axType){C.warn(["Attempted to group the bins of trace",e.index,"set on a","type:"+n,"axis","with bins on","type:"+o.axType,"axis."].join(" "))}if(i!==o.calendar){C.warn(["Attempted to group the bins of trace",e.index,"set with a",i,"calendar","with bins",o.calendar?"on a "+o.calendar+" calendar":"w/o a set calendar"].join(" "))}}}if(s){l[t]={traces:[e],dirs:[r],axType:n,calendar:e[r+"calendar"]||""}}e["_"+r+"bingroup"]=t}for(f=0;f<t.length;f++){o=t[f];if(O(o,"histogram")){r.push(o);delete o._xautoBinFinished;delete o._yautoBinFinished;if(!O(o,"2dMap")){I(o._input,o,a,p)}}}var y=a._alignmentOpts||{};for(f=0;f<r.length;f++){o=r[f];u="";if(!O(o,"2dMap")){c=h(o);if(a.barmode==="group"&&o.alignmentgroup){var x=o[c+"axis"];var b=R(a,x)+o.orientation;if((y[b]||{})[o.alignmentgroup]){u=b}}if(!u&&a.barmode!=="overlay"){u=R(a,o.xaxis)+R(a,o.yaxis)+h(o)}}if(u){if(!n[u]){n[u]=[]}n[u].push(o)}else{i.push(o)}}for(u in n){s=n[u];if(s.length===1){i.push(s[0]);continue}var _=false;if(s.length){o=s[0];_=p("bingroup")}u=_||u;for(f=0;f<s.length;f++){o=s[f];var w=o._input.bingroup;if(w&&w!==u){C.warn(["Trace",o.index,"must match","within bingroup",u+".","Ignoring its bingroup:",w,"setting."].join(" "))}o.bingroup=u;g(o,u,h(o))}}for(f=0;f<i.length;f++){o=i[f];var T=p("bingroup");if(O(o,"2dMap")){for(v=0;v<2;v++){c=z[v];var k=p(c+"bingroup",T?T+"__"+c:null);g(o,k,c)}}else{g(o,T,h(o))}}for(u in l){var M=l[u];s=M.traces;for(d=0;d<N.length;d++){var A=N[d];var S=A.name;var E;var L;if(S==="nbins"&&M.sizeFound)continue;for(f=0;f<s.length;f++){o=s[f];c=M.dirs[f];E=A.aStr[c];if(P(o._input,E).get()!==undefined){M[S]=p(E);M[S+"Found"]=true;break}L=(o._autoBin||{})[c]||{};if(L[S]){P(o,E).set(L[S])}}if(S==="start"||S==="end"){for(;f<s.length;f++){o=s[f];if(o["_"+c+"bingroup"]){L=(o._autoBin||{})[c]||{};p(E,L[S])}}}if(S==="nbins"&&!M.sizeFound&&!M.nbinsFound){o=s[0];M[S]=p(E)}}}}},{"../../lib":285,"../../plots/cartesian/axis_ids":335,"../../plots/cartesian/constraints":339,"../../registry":373,"../bar/defaults":387}],457:[function(e,t,r){"use strict";var g=e("../../registry");var y=e("../../lib");var x=e("../../components/color");var b=e("../bar/style_defaults");var _=e("./attributes");t.exports=function e(r,a,t,n){function i(e,t){return y.coerce(r,a,_,e,t)}var o=i("x");var s=i("y");var l=i("cumulative.enabled");if(l){i("cumulative.direction");i("cumulative.currentbin")}i("text");i("hovertext");i("hovertemplate");i("xhoverformat");i("yhoverformat");var u=i("orientation",s&&!o?"h":"v");var c=u==="v"?"x":"y";var f=u==="v"?"y":"x";var d=o&&s?Math.min(y.minRowLength(o)&&y.minRowLength(s)):y.minRowLength(a[c]||[]);if(!d){a.visible=false;return}a._length=d;var v=g.getComponentMethod("calendars","handleTraceDefaults");v(r,a,["x","y"],n);var p=a[f];if(p)i("histfunc");i("histnorm");i("autobin"+c);b(r,a,i,t,n);y.coerceSelectionMarkerOpacity(a,i);var h=(a.marker.line||{}).color;var m=g.getComponentMethod("errorbars","supplyDefaults");m(r,a,h||x.defaultLine,{axis:"y"});m(r,a,h||x.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":155,"../../lib":285,"../../registry":373,"../bar/style_defaults":398,"./attributes":449}],458:[function(e,t,r){"use strict";t.exports=function e(t,r,a,n,i){t.x="xVal"in r?r.xVal:r.x;t.y="yVal"in r?r.yVal:r.y;if("zLabelVal"in r)t.z=r.zLabelVal;if(r.xa)t.xaxis=r.xa;if(r.ya)t.yaxis=r.ya;if(!(a.cumulative||{}).enabled){var o=Array.isArray(i)?n[0].pts[i[0]][i[1]]:n[i].pts;t.pointNumbers=o;t.binNumber=t.pointNumber;delete t.pointNumber;delete t.pointIndex;var s;if(a._indexToPoints){s=[];for(var l=0;l<o.length;l++){s=s.concat(a._indexToPoints[o[l]])}}else{s=o}t.pointIndices=s}return t}},{}],459:[function(e,t,r){"use strict";var c=e("../bar/hover").hoverPoints;var f=e("../../plots/cartesian/axes").hoverLabelText;t.exports=function e(t,r,a,n,i){var o=c(t,r,a,n,i);if(!o)return;t=o[0];var s=t.cd[t.index];var l=t.cd[0].trace;if(!l.cumulative.enabled){var u=l.orientation==="h"?"y":"x";t[u+"Label"]=f(t[u+"a"],[s.ph0,s.ph1],l[u+"hoverformat"])}return o}},{"../../plots/cartesian/axes":331,"../bar/hover":390}],460:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("../bar/layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),supplyLayoutDefaults:e("../bar/layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("../bar/cross_trace_calc").crossTraceCalc,plot:e("../bar/plot").plot,layerName:"barlayer",style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,colorbar:e("../scatter/marker_colorbar"),hoverPoints:e("./hover"),selectPoints:e("../bar/select"),eventData:e("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":345,"../bar/cross_trace_calc":386,"../bar/layout_attributes":392,"../bar/layout_defaults":393,"../bar/plot":394,"../bar/select":395,"../bar/style":397,"../scatter/marker_colorbar":512,"./attributes":449,"./calc":454,"./cross_trace_defaults":456,"./defaults":457,"./event_data":458,"./hover":459}],461:[function(e,t,r){"use strict";t.exports={percent:function(e,t){var r=e.length;var a=100/t;for(var n=0;n<r;n++)e[n]*=a},probability:function(e,t){var r=e.length;for(var a=0;a<r;a++)e[a]/=t},density:function(e,t,r,a){var n=e.length;a=a||1;for(var i=0;i<n;i++)e[i]*=r[i]*a},"probability density":function(e,t,r,a){var n=e.length;if(a)t/=a;for(var i=0;i<n;i++)e[i]*=r[i]/t}}},{}],462:[function(e,t,r){"use strict";var a=e("../histogram/attributes");var n=e("../histogram/bin_attributes");var i=e("../heatmap/attributes");var o=e("../../plots/attributes");var s=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var l=e("../../plots/template_attributes").hovertemplateAttrs;var u=e("../../components/colorscale/attributes");var c=e("../../lib/extend").extendFlat;t.exports=c({x:a.x,y:a.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:a.histnorm,histfunc:a.histfunc,nbinsx:a.nbinsx,xbins:n("x"),nbinsy:a.nbinsy,ybins:n("y"),autobinx:a.autobinx,autobiny:a.autobiny,bingroup:c({},a.bingroup,{}),xbingroup:c({},a.bingroup,{}),ybingroup:c({},a.bingroup,{}),xgap:i.xgap,ygap:i.ygap,zsmooth:i.zsmooth,xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z",1),hovertemplate:l({},{keys:"z"}),showlegend:c({},o.showlegend,{dflt:false})},u("",{cLetter:"z",autoColorDflt:false}))},{"../../components/colorscale/attributes":162,"../../lib/extend":279,"../../plots/attributes":327,"../../plots/cartesian/axis_format_attributes":334,"../../plots/template_attributes":368,"../heatmap/attributes":434,"../histogram/attributes":449,"../histogram/bin_attributes":451}],463:[function(e,t,r){"use strict";var pe=e("../../lib");var he=e("../../plots/cartesian/axes");var me=e("../histogram/bin_functions");var ge=e("../histogram/norm_functions");var ye=e("../histogram/average");var f=e("../histogram/bin_label_vals");var xe=e("../histogram/calc").calcAllAutoBins;t.exports=function e(t,r){var a=he.getFromId(t,r.xaxis);var n=he.getFromId(t,r.yaxis);var i=r.xcalendar;var o=r.ycalendar;var s=function(e){return a.r2c(e,0,i)};var l=function(e){return n.r2c(e,0,o)};var u=function(e){return a.c2r(e,0,i)};var c=function(e){return n.c2r(e,0,o)};var f,d,v,p;var h=xe(t,r,a,"x");var m=h[0];var g=h[1];var y=xe(t,r,n,"y");var x=y[0];var b=y[1];var _=r._length;if(g.length>_)g.splice(_,g.length-_);if(b.length>_)b.splice(_,b.length-_);var w=[];var T=[];var k=[];var M=typeof m.size==="string";var A=typeof x.size==="string";var S=[];var E=[];var L=M?S:m;var C=A?E:x;var D=0;var O=[];var I=[];var P=r.histnorm;var R=r.histfunc;var N=P.indexOf("density")!==-1;var z=R==="max"||R==="min";var F=z?null:0;var j=me.count;var H=ge[P];var B=false;var q=[];var U=[];var Y="z"in r?r.z:"marker"in r&&Array.isArray(r.marker.color)?r.marker.color:"";if(Y&&R!=="count"){B=R==="avg";j=me[R]}var V=m.size;var G=s(m.start);var W=s(m.end)+(G-he.tickIncrement(G,V,false,i))/1e6;for(f=G;f<W;f=he.tickIncrement(f,V,false,i)){T.push(F);S.push(f);if(B)k.push(0)}S.push(f);var $=T.length;var Z=(f-G)/$;var X=u(G+Z/2);var J=x.size;var K=l(x.start);var Q=l(x.end)+(K-he.tickIncrement(K,J,false,o))/1e6;for(f=K;f<Q;f=he.tickIncrement(f,J,false,o)){w.push(T.slice());E.push(f);var ee=new Array($);for(d=0;d<$;d++)ee[d]=[];I.push(ee);if(B)O.push(k.slice())}E.push(f);var te=w.length;var re=(f-K)/te;var ae=c(K+re/2);if(N){q=be(T.length,L,Z,M);U=be(w.length,C,re,A)}if(!M&&a.type==="date")L=_e(s,L);if(!A&&n.type==="date")C=_e(l,C);var ne=true;var ie=true;var oe=new Array($);var se=new Array(te);var le=Infinity;var ue=Infinity;var ce=Infinity;var fe=Infinity;for(f=0;f<_;f++){var de=g[f];var ve=b[f];v=pe.findBin(de,L);p=pe.findBin(ve,C);if(v>=0&&v<$&&p>=0&&p<te){D+=j(v,f,w[p],Y,O[p]);I[p][v].push(f);if(ne){if(oe[v]===undefined)oe[v]=de;else if(oe[v]!==de)ne=false}if(ie){if(se[p]===undefined)se[p]=ve;else if(se[p]!==ve)ie=false}le=Math.min(le,de-S[v]);ue=Math.min(ue,S[v+1]-de);ce=Math.min(ce,ve-E[p]);fe=Math.min(fe,E[p+1]-ve)}}if(B){for(p=0;p<te;p++)D+=ye(w[p],O[p])}if(H){for(p=0;p<te;p++)H(w[p],D,q,U[p])}return{x:g,xRanges:we(S,ne&&oe,le,ue,a,i),x0:X,dx:Z,y:b,yRanges:we(E,ie&&se,ce,fe,n,o),y0:ae,dy:re,z:w,pts:I}};function be(e,t,r,a){var n=new Array(e);var i;if(a){for(i=0;i<e;i++)n[i]=1/(t[i+1]-t[i])}else{var o=1/r;for(i=0;i<e;i++)n[i]=o}return n}function _e(e,t){return{start:e(t.start),end:e(t.end),size:t.size}}function we(e,t,r,a,n,i){var o;var s=e.length-1;var l=new Array(s);var u=f(r,a,e,n,i);for(o=0;o<s;o++){var c=(t||[])[o];l[o]=c===undefined?[u(e[o]),u(e[o+1],true)]:[c,c]}return l}},{"../../lib":285,"../../plots/cartesian/axes":331,"../histogram/average":450,"../histogram/bin_functions":452,"../histogram/bin_label_vals":453,"../histogram/calc":454,"../histogram/norm_functions":461}],464:[function(e,t,r){"use strict";var o=e("../../lib");var s=e("./sample_defaults");var l=e("../heatmap/style_defaults");var u=e("../../components/colorscale/defaults");var c=e("./attributes");t.exports=function e(r,a,t,n){function i(e,t){return o.coerce(r,a,c,e,t)}s(r,a,i,n);if(a.visible===false)return;l(r,a,i,n);u(r,a,n,i,{prefix:"",cLetter:"z"});i("hovertemplate");i("xhoverformat");i("yhoverformat")}},{"../../components/colorscale/defaults":165,"../../lib":285,"../heatmap/style_defaults":447,"./attributes":462,"./sample_defaults":467}],465:[function(e,t,r){"use strict";var p=e("../heatmap/hover");var h=e("../../plots/cartesian/axes").hoverLabelText;t.exports=function e(t,r,a,n,i){var o=p(t,r,a,n,i);if(!o)return;t=o[0];var s=t.index;var l=s[0];var u=s[1];var c=t.cd[0];var f=c.trace;var d=c.xRanges[u];var v=c.yRanges[l];t.xLabel=h(t.xa,[d[0],d[1]],f.xhoverformat);t.yLabel=h(t.ya,[v[0],v[1]],f.yhoverformat);return o}},{"../../plots/cartesian/axes":331,"../heatmap/hover":441}],466:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../heatmap/calc"),plot:e("../heatmap/plot"),layerName:"heatmaplayer",colorbar:e("../heatmap/colorbar"),style:e("../heatmap/style"),hoverPoints:e("./hover"),eventData:e("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":345,"../heatmap/calc":435,"../heatmap/colorbar":437,"../heatmap/plot":445,"../heatmap/style":446,"../histogram/cross_trace_defaults":456,"../histogram/event_data":458,"./attributes":462,"./defaults":464,"./hover":465}],467:[function(e,t,r){"use strict";var f=e("../../registry");var d=e("../../lib");t.exports=function e(t,r,a,n){var i=a("x");var o=a("y");var s=d.minRowLength(i);var l=d.minRowLength(o);if(!s||!l){r.visible=false;return}r._length=Math.min(s,l);var u=f.getComponentMethod("calendars","handleTraceDefaults");u(t,r,["x","y"],n);var c=a("z")||a("marker.color");if(c)a("histfunc");a("histnorm");a("autobinx");a("autobiny")}},{"../../lib":285,"../../registry":373}],468:[function(e,t,r){"use strict";var a=e("../histogram2d/attributes");var n=e("../contour/attributes");var i=e("../../components/colorscale/attributes");var o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var s=e("../../lib/extend").extendFlat;t.exports=s({x:a.x,y:a.y,z:a.z,marker:a.marker,histnorm:a.histnorm,histfunc:a.histfunc,nbinsx:a.nbinsx,xbins:a.xbins,nbinsy:a.nbinsy,ybins:a.ybins,autobinx:a.autobinx,autobiny:a.autobiny,bingroup:a.bingroup,xbingroup:a.xbingroup,ybingroup:a.ybingroup,autocontour:n.autocontour,ncontours:n.ncontours,contours:n.contours,line:{color:n.line.color,width:s({},n.line.width,{dflt:.5}),dash:n.line.dash,smoothing:n.line.smoothing,editType:"plot"},xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z",1),hovertemplate:a.hovertemplate},i("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":162,"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../contour/attributes":412,"../histogram2d/attributes":462}],469:[function(e,t,r){"use strict";var s=e("../../lib");var l=e("../histogram2d/sample_defaults");var u=e("../contour/contours_defaults");var c=e("../contour/style_defaults");var f=e("./attributes");t.exports=function e(r,a,t,n){function i(e,t){return s.coerce(r,a,f,e,t)}function o(e){return s.coerce2(r,a,f,e)}l(r,a,i,n);if(a.visible===false)return;u(r,a,i,o);c(r,a,i,n);i("hovertemplate");i("xhoverformat");i("yhoverformat")}},{"../../lib":285,"../contour/contours_defaults":419,"../contour/style_defaults":433,"../histogram2d/sample_defaults":467,"./attributes":468}],470:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../contour/calc"),plot:e("../contour/plot").plot,layerName:"contourlayer",style:e("../contour/style"),colorbar:e("../contour/colorbar"),hoverPoints:e("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":345,"../contour/calc":413,"../contour/colorbar":415,"../contour/hover":425,"../contour/plot":430,"../contour/style":432,"../histogram/cross_trace_defaults":456,"./attributes":468,"./defaults":469}],471:[function(e,t,r){"use strict";var a=e("../../plots/attributes");var n=e("../../plots/template_attributes").hovertemplateAttrs;var i=e("../../lib/extend").extendFlat;var o=e("./constants").colormodel;var s=["rgb","rgba","rgba256","hsl","hsla"];var l=[];var u=[];for(var c=0;c<s.length;c++){var f=o[s[c]];l.push("For the `"+s[c]+"` colormodel, it is ["+(f.zminDflt||f.min).join(", ")+"].");u.push("For the `"+s[c]+"` colormodel, it is ["+(f.zmaxDflt||f.max).join(", ")+"].")}t.exports=i({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:s,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",false],dflt:false,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:i({},a.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:n({},{keys:["z","color","colormodel"]}),transforms:undefined})},{"../../lib/extend":279,"../../plots/attributes":327,"../../plots/template_attributes":368,"./constants":473}],472:[function(e,t,r){"use strict";var i=e("../../lib");var a=e("./constants");var o=e("fast-isnumeric");var p=e("../../plots/cartesian/axes");var h=e("../../lib").maxRowLength;var m=e("./helpers").getImageSize;t.exports=function e(t,r){var a;var n;if(r._hasZ){a=r.z.length;n=h(r.z)}else if(r._hasSource){var i=m(r.source);a=i.height;n=i.width}var o=p.getFromId(t,r.xaxis||"x");var s=p.getFromId(t,r.yaxis||"y");var l=o.d2c(r.x0)-r.dx/2;var u=s.d2c(r.y0)-r.dy/2;var c;var f=[l,l+n*r.dx];var d=[u,u+a*r.dy];if(o&&o.type==="log")for(c=0;c<n;c++)f.push(l+c*r.dx);if(s&&s.type==="log")for(c=0;c<a;c++)d.push(u+c*r.dy);r._extremes[o._id]=p.findExtremes(o,f);r._extremes[s._id]=p.findExtremes(s,d);r._scaler=g(r);var v={x0:l,y0:u,z:r.z,w:n,h:a};return[v]};function s(t,r,a,n){return function(e){return i.constrain((e-t)*r,a,n)}}function l(t,r){return function(e){return i.constrain(e,t,r)}}function g(n){var e=a.colormodel[n.colormodel];var t=e.colormodel||n.colormodel;var i=t.length;n._sArray=[];for(var r=0;r<i;r++){if(e.min[r]!==n.zmin[r]||e.max[r]!==n.zmax[r]){n._sArray.push(s(n.zmin[r],(e.max[r]-e.min[r])/(n.zmax[r]-n.zmin[r]),e.min[r],e.max[r]))}else{n._sArray.push(l(e.min[r],e.max[r]))}}return function(e){var t=e.slice(0,i);for(var r=0;r<i;r++){var a=t[r];if(!o(a))return false;t[r]=n._sArray[r](a)}return t}}},{"../../lib":285,"../../plots/cartesian/axes":331,"./constants":473,"./helpers":476,"fast-isnumeric":31}],473:[function(e,t,r){"use strict";t.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(e){return e.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(e){var t=e.slice(0,3);t[1]=t[1]+"%";t[2]=t[2]+"%";return t},suffix:["°","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(e){var t=e.slice(0,4);t[1]=t[1]+"%";t[2]=t[2]+"%";return t},suffix:["°","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],474:[function(e,t,r){"use strict";var o=e("../../lib");var s=e("./attributes");var l=e("./constants");var u=e("../../snapshot/helpers").IMAGE_URL_PREFIX;t.exports=function e(r,a){function t(e,t){return o.coerce(r,a,s,e,t)}t("source");if(a.source&&!a.source.match(u))delete a.source;a._hasSource=!!a.source;var n=t("z");a._hasZ=!(n===undefined||!n.length||!n[0]||!n[0].length);if(!a._hasZ&&!a._hasSource){a.visible=false;return}t("x0");t("y0");t("dx");t("dy");var i;if(a._hasZ){t("colormodel","rgb");i=l.colormodel[a.colormodel];t("zmin",i.zminDflt||i.min);t("zmax",i.zmaxDflt||i.max)}else if(a._hasSource){a.colormodel="rgba256";i=l.colormodel[a.colormodel];a.zmin=i.zminDflt;a.zmax=i.zmaxDflt}t("zsmooth");t("text");t("hovertext");t("hovertemplate");a._length=null}},{"../../lib":285,"../../snapshot/helpers":377,"./attributes":471,"./constants":473}],475:[function(e,t,r){"use strict";t.exports=function e(t,r){if("xVal"in r)t.x=r.xVal;if("yVal"in r)t.y=r.yVal;if(r.xa)t.xaxis=r.xa;if(r.ya)t.yaxis=r.ya;t.color=r.color;t.colormodel=r.trace.colormodel;if(!t.z)t.z=r.color;return t}},{}],476:[function(e,t,r){"use strict";var a=e("probe-image-size/sync");var n=e("../../snapshot/helpers").IMAGE_URL_PREFIX;var i=e("buffer/").Buffer;r.getImageSize=function(e){var t=e.replace(n,"");var r=new i(t,"base64");return a(r)}},{"../../snapshot/helpers":377,"buffer/":28,"probe-image-size/sync":95}],477:[function(e,t,r){"use strict";var M=e("../../components/fx");var A=e("../../lib");var S=e("./constants");t.exports=function e(t,r,a){var n=t.cd[0];var i=n.trace;var o=t.xa;var s=t.ya;if(M.inbox(r-n.x0,r-(n.x0+n.w*i.dx),0)>0||M.inbox(a-n.y0,a-(n.y0+n.h*i.dy),0)>0){return}var l=Math.floor((r-n.x0)/i.dx);var u=Math.floor(Math.abs(a-n.y0)/i.dy);var c;if(i._hasZ){c=n.z[u][l]}else if(i._hasSource){c=i._canvas.el.getContext("2d").getImageData(l,u,1,1).data}if(!c)return;var f=n.hi||i.hoverinfo;var d;if(f){var v=f.split("+");if(v.indexOf("all")!==-1)v=["color"];if(v.indexOf("color")!==-1)d=true}var p=S.colormodel[i.colormodel];var h=p.colormodel||i.colormodel;var m=h.length;var g=i._scaler(c);var y=p.suffix;var x=[];if(i.hovertemplate||d){x.push("["+[g[0]+y[0],g[1]+y[1],g[2]+y[2]].join(", "));if(m===4)x.push(", "+g[3]+y[3]);x.push("]");x=x.join("");t.extraText=h.toUpperCase()+": "+x}var b;if(Array.isArray(i.hovertext)&&Array.isArray(i.hovertext[u])){b=i.hovertext[u][l]}else if(Array.isArray(i.text)&&Array.isArray(i.text[u])){b=i.text[u][l]}var _=s.c2p(n.y0+(u+.5)*i.dy);var w=n.x0+(l+.5)*i.dx;var T=n.y0+(u+.5)*i.dy;var k="["+c.slice(0,i.colormodel.length).join(", ")+"]";return[A.extendFlat(t,{index:[u,l],x0:o.c2p(n.x0+l*i.dx),x1:o.c2p(n.x0+(l+1)*i.dx),y0:_,y1:_,color:g,xVal:w,xLabelVal:w,yVal:T,yLabelVal:T,zLabelVal:k,text:b,hovertemplateLabels:{zLabel:k,colorLabel:x,"color[0]Label":g[0]+y[0],"color[1]Label":g[1]+y[1],"color[2]Label":g[2]+y[2],"color[3]Label":g[3]+y[3]}})]}},{"../../components/fx":195,"../../lib":285,"./constants":473}],478:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover"),eventData:e("./event_data"),moduleType:"trace",name:"image",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:false,meta:{}}},{"../../plots/cartesian":345,"./attributes":471,"./calc":472,"./defaults":474,"./event_data":475,"./hover":477,"./plot":479,"./style":480}],479:[function(e,t,r){"use strict";var z=e("@plotly/d3");var F=e("../../lib");var j=F.strTranslate;var H=e("../../constants/xmlns_namespaces");var B=e("./constants");var n=F.isIOS()||F.isSafari()||F.isIE();t.exports=function e(I,t,r,a){var P=t.xaxis;var R=t.yaxis;var N=!(n||I._context._exportedPlot);F.makeTraceGroups(a,r,"im").each(function(e){var t=z.select(this);var p=e[0];var h=p.trace;var n=(h.zsmooth==="fast"||h.zsmooth===false&&N)&&!h._hasZ&&h._hasSource&&P.type==="linear"&&R.type==="linear";h._realImage=n;var i=p.z;var m=p.x0;var g=p.y0;var o=p.w;var s=p.h;var y=h.dx;var x=h.dy;var b,r,a,_,l,w;w=0;while(b===undefined&&w<o){b=P.c2p(m+w*y);w++}w=o;while(r===undefined&&w>0){r=P.c2p(m+w*y);w--}w=0;while(_===undefined&&w<s){_=R.c2p(g+w*x);w++}w=s;while(l===undefined&&w>0){l=R.c2p(g+w*x);w--}if(r<b){a=r;r=b;b=a}if(l<_){a=_;_=l;l=a}if(!n){var u=.5;b=Math.max(-u*P._length,b);r=Math.min((1+u)*P._length,r);_=Math.max(-u*R._length,_);l=Math.min((1+u)*R._length,l)}var T=Math.round(r-b);var k=Math.round(l-_);var c=T<=0||k<=0;if(c){var f=t.selectAll("image").data([]);f.exit().remove();return}function d(e){var t=document.createElement("canvas");t.width=T;t.height=k;var r=t.getContext("2d");var a=function(e){return F.constrain(Math.round(P.c2p(m+e*y)-b),0,T)};var n=function(e){return F.constrain(Math.round(R.c2p(g+e*x)-_),0,k)};var i=B.colormodel[h.colormodel];var o=i.colormodel||h.colormodel;var s=i.fmt;var l;for(w=0;w<p.w;w++){var u=a(w);var c=a(w+1);if(c===u||isNaN(c)||isNaN(u))continue;for(var f=0;f<p.h;f++){var d=n(f);var v=n(f+1);if(v===d||isNaN(v)||isNaN(d)||!e(w,f))continue;l=h._scaler(e(w,f));if(l){r.fillStyle=o+"("+s(l).join(",")+")"}else{r.fillStyle="rgba(0,0,0,0)"}r.fillRect(u,d,c-u,v-d)}}return t}var v=t.selectAll("image").data([e]);v.enter().append("svg:image").attr({xmlns:H.svg,preserveAspectRatio:"none"});v.exit().remove();var M=h.zsmooth===false?B.pixelatedStyle:"";if(n){var A=F.simpleMap(P.range,P.r2l);var S=F.simpleMap(R.range,R.r2l);var E=A[1]<A[0];var L=S[1]>S[0];if(E||L){var C=b+T/2;var D=_+k/2;M+="transform:"+j(C+"px",D+"px")+"scale("+(E?-1:1)+","+(L?-1:1)+")"+j(-C+"px",-D+"px")+";"}}v.attr("style",M);var O=new Promise(function(e){if(h._hasZ){e()}else if(h._hasSource){if(h._canvas&&h._canvas.el.width===o&&h._canvas.el.height===s&&h._canvas.source===h.source){e()}else{var t=document.createElement("canvas");t.width=o;t.height=s;var r=t.getContext("2d");h._image=h._image||new Image;var a=h._image;a.onload=function(){r.drawImage(a,0,0);h._canvas={el:t,source:h.source};e()};a.setAttribute("src",h.source)}}}).then(function(){var e,t;if(h._hasZ){t=d(function(e,t){return i[t][e]});e=t.toDataURL("image/png")}else if(h._hasSource){if(n){e=h.source}else{var r=h._canvas.el.getContext("2d");var a=r.getImageData(0,0,o,s).data;t=d(function(e,t){var r=4*(t*o+e);return[a[r],a[r+1],a[r+2],a[r+3]]});e=t.toDataURL("image/png")}}v.attr({"xlink:href":e,height:k,width:T,x:b,y:_})});I._promises.push(O)})}},{"../../constants/xmlns_namespaces":266,"../../lib":285,"./constants":473,"@plotly/d3":20}],480:[function(e,t,r){"use strict";var a=e("@plotly/d3");t.exports=function e(t){a.select(t).selectAll(".im image").style("opacity",function(e){return e[0].trace.opacity})}},{"@plotly/d3":20}],481:[function(e,t,r){"use strict";var a=e("../../plots/attributes");var n=e("../../plots/domain").attributes;var i=e("../../plots/font_attributes");var o=e("../../components/color/attributes");var s=e("../../plots/template_attributes").hovertemplateAttrs;var l=e("../../plots/template_attributes").texttemplateAttrs;var u=e("../../lib/extend").extendFlat;var c=i({editType:"plot",arrayOk:true,colorEditType:"plot"});t.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:true,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:true,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:true,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:u({},a.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:s({},{keys:["label","color","value","percent","text"]}),texttemplate:l({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:true,editType:"plot"},textfont:u({},c,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:u({},c,{}),outsidetextfont:u({},c,{}),automargin:{valType:"boolean",dflt:false,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:u({},c,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:n({name:"pie",trace:true,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:true,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:true,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:u({},c,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":154,"../../lib/extend":279,"../../plots/attributes":327,"../../plots/domain":359,"../../plots/font_attributes":360,"../../plots/template_attributes":368}],482:[function(e,t,n){"use strict";var i=e("../../plots/plots");n.name="pie";n.plot=function(e,t,r,a){i.plotBasePlot(n.name,e,t,r,a)};n.clean=function(e,t,r,a){i.cleanBasePlot(n.name,e,t,r,a)}},{"../../plots/plots":366}],483:[function(e,t,r){"use strict";var _=e("fast-isnumeric");var i=e("tinycolor2");var n=e("../../components/color");var v={};function a(e,t){var r=[];var a=e._fullLayout;var n=a.hiddenlabels||[];var i=t.labels;var o=t.marker.colors||[];var s=t.values;var l=t._length;var u=t._hasValues&&l;var c,f;if(t.dlabel){i=new Array(l);for(c=0;c<l;c++){i[c]=String(t.label0+c*t.dlabel)}}var d={};var v=w(a["_"+t.type+"colormap"]);var p=0;var h=false;for(c=0;c<l;c++){var m,g,y;if(u){m=s[c];if(!_(m))continue;m=+m;if(m<0)continue}else m=1;g=i[c];if(g===undefined||g==="")g=c;g=String(g);var x=d[g];if(x===undefined){d[g]=r.length;y=n.indexOf(g)!==-1;if(!y)p+=m;r.push({v:m,label:g,color:v(o[c],g),i:c,pts:[c],hidden:y})}else{h=true;f=r[x];f.v+=m;f.pts.push(c);if(!f.hidden)p+=m;if(f.color===false&&o[c]){f.color=v(o[c],g)}}}var b=t.type==="funnelarea"?h:t.sort;if(b)r.sort(function(e,t){return t.v-e.v});if(r[0])r[0].vTotal=p;return r}function w(a){return function e(t,r){if(!t)return false;t=i(t);if(!t.isValid())return false;t=n.addOpacity(t,t.getAlpha());if(!a[r])a[r]=t;return t}}function o(e,t){var r=(t||{}).type;if(!r)r="pie";var a=e._fullLayout;var n=e.calcdata;var i=a[r+"colorway"];var o=a["_"+r+"colormap"];if(a["extend"+r+"colors"]){i=p(i,v)}var s=0;for(var l=0;l<n.length;l++){var u=n[l];var c=u[0].trace.type;if(c!==r)continue;for(var f=0;f<u.length;f++){var d=u[f];if(d.color===false){if(o[d.label]){d.color=o[d.label]}else{o[d.label]=d.color=i[s%i.length];s++}}}}}function p(e,t){var r;var a=JSON.stringify(e);var n=t[a];if(!n){n=e.slice();for(r=0;r<e.length;r++){n.push(i(e[r]).lighten(20).toHexString())}for(r=0;r<e.length;r++){n.push(i(e[r]).darken(20).toHexString())}t[a]=n}return n}t.exports={calc:a,crossTraceCalc:o,makePullColorFn:w,generateExtendedColors:p}},{"../../components/color":155,"fast-isnumeric":31,tinycolor2:119}],484:[function(e,t,r){"use strict";var l=e("fast-isnumeric");var x=e("../../lib");var b=e("./attributes");var _=e("../../plots/domain").defaults;var w=e("../bar/defaults").handleText;function T(e,t){var r=Array.isArray(e);var a=x.isArrayOrTypedArray(t);var n=Math.min(r?e.length:Infinity,a?t.length:Infinity);if(!isFinite(n))n=0;if(n&&a){var i;for(var o=0;o<n;o++){var s=t[o];if(l(s)&&s>0){i=true;break}}if(!i)n=0}return{hasLabels:r,hasValues:a,len:n}}function a(r,a,e,t){function n(e,t){return x.coerce(r,a,b,e,t)}var i=n("labels");var o=n("values");var s=T(i,o);var l=s.len;a._hasLabels=s.hasLabels;a._hasValues=s.hasValues;if(!a._hasLabels&&a._hasValues){n("label0");n("dlabel")}if(!l){a.visible=false;return}a._length=l;var u=n("marker.line.width");if(u)n("marker.line.color");n("marker.colors");n("scalegroup");var c=n("text");var f=n("texttemplate");var d;if(!f)d=n("textinfo",Array.isArray(c)?"text+percent":"percent");n("hovertext");n("hovertemplate");if(f||d&&d!=="none"){var v=n("textposition");w(r,a,t,n,v,{moduleHasSelected:false,moduleHasUnselected:false,moduleHasConstrain:false,moduleHasCliponaxis:false,moduleHasTextangle:false,moduleHasInsideanchor:false});var p=Array.isArray(v)||v==="auto";var h=p||v==="outside";if(h){n("automargin")}if(v==="inside"||v==="auto"||Array.isArray(v)){n("insidetextorientation")}}_(a,t,n);var m=n("hole");var g=n("title.text");if(g){var y=n("title.position",m?"middle center":"top center");if(!m&&y==="middle center")a.title.position="top center";x.coerceFont(n,"title.font",t.font)}n("sort");n("direction");n("rotation");n("pull")}t.exports={handleLabelsAndValues:T,supplyDefaults:a}},{"../../lib":285,"../../plots/domain":359,"../bar/defaults":387,"./attributes":481,"fast-isnumeric":31}],485:[function(e,t,r){"use strict";var n=e("../../components/fx/helpers").appendArrayMultiPointValues;t.exports=function e(t,r){var a={curveNumber:r.index,pointNumbers:t.pts,data:r._input,fullData:r,label:t.label,color:t.color,value:t.v,percent:t.percent,text:t.text,v:t.v};if(t.pts.length===1)a.pointNumber=a.i=t.pts[0];n(a,r,t.pts);if(r.type==="funnelarea"){delete a.v;delete a.i}return a}},{"../../components/fx/helpers":191}],486:[function(e,t,a){"use strict";var n=e("../../lib");function i(e){return e.indexOf("e")!==-1?e.replace(/[.]?0+e/,"e"):e.indexOf(".")!==-1?e.replace(/[.]?0+$/,""):e}a.formatPiePercent=function e(t,r){var a=i((t*100).toPrecision(3));return n.numSeparate(a,r)+"%"};a.formatPieValue=function e(t,r){var a=i(t.toPrecision(10));return n.numSeparate(a,r)};a.getFirstFilled=function e(t,r){if(!Array.isArray(t))return;for(var a=0;a<r.length;a++){var n=t[r[a]];if(n||n===0||n==="")return n}};a.castOption=function e(t,r){if(Array.isArray(t))return a.getFirstFilled(t,r);else if(t)return t};a.getRotationAngle=function(e){return(e==="auto"?0:e)*Math.PI/180}},{"../../lib":285}],487:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,supplyLayoutDefaults:e("./layout_defaults"),layoutAttributes:e("./layout_attributes"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style"),styleOne:e("./style_one"),moduleType:"trace",name:"pie",basePlotModule:e("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":481,"./base_plot":482,"./calc":483,"./defaults":484,"./layout_attributes":488,"./layout_defaults":489,"./plot":490,"./style":491,"./style_one":492}],488:[function(e,t,r){"use strict";t.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:true,editType:"calc"}}},{}],489:[function(e,t,r){"use strict";var n=e("../../lib");var i=e("./layout_attributes");t.exports=function e(r,a){function t(e,t){return n.coerce(r,a,i,e,t)}t("hiddenlabels");t("piecolorway",a.colorway);t("extendpiecolors")}},{"../../lib":285,"./layout_attributes":488}],490:[function(e,t,r){"use strict";var _=e("@plotly/d3");var c=e("../../plots/plots");var g=e("../../components/fx");var f=e("../../components/color");var w=e("../../components/drawing");var T=e("../../lib");var d=T.strScale;var v=T.strTranslate;var k=e("../../lib/svg_text_utils");var a=e("../bar/uniform_text");var M=a.recordMinTextSize;var n=a.clearMinTextSize;var s=e("../bar/constants").TEXTPAD;var A=e("./helpers");var y=e("./event_data");var b=e("../../lib").isValidTextValue;function i(x,e){var b=x._fullLayout;var u=b._size;n("pie",b);o(e,x);H(e,u);var t=T.makeTraceGroups(b._pielayer,e,"trace").each(function(m){var l=_.select(this);var g=m[0];var y=g.trace;q(m);l.attr("stroke-linejoin","round");l.each(function(){var e=_.select(this).selectAll("g.slice").data(m);e.enter().append("g").classed("slice",true);e.exit().remove();var p=[[[],[]],[[],[]]];var h=false;e.each(function(l,u){if(l.hidden){_.select(this).selectAll("path,g").remove();return}l.pointNumber=l.i;l.curveNumber=y.index;p[l.pxmid[1]<0?0:1][l.pxmid[0]<0?0:1].push(l);var c=g.cx;var f=g.cy;var e=_.select(this);var t=e.selectAll("path.surface").data([l]);t.enter().append("path").classed("surface",true).style({"pointer-events":"all"});e.call(E,x,m);if(y.pull){var r=+A.castOption(y.pull,l.pts)||0;if(r>0){c+=r*l.pxmid[0];f+=r*l.pxmid[1]}}l.cxFinal=c;l.cyFinal=f;function a(e,t,r,a){var n=a*(t[0]-e[0]);var i=a*(t[1]-e[1]);return"a"+a*g.r+","+a*g.r+" 0 "+l.largeArc+(r?" 1 ":" 0 ")+n+","+i}var n=y.hole;if(l.v===g.vTotal){var i="M"+(c+l.px0[0])+","+(f+l.px0[1])+a(l.px0,l.pxmid,true,1)+a(l.pxmid,l.px0,true,1)+"Z";if(n){t.attr("d","M"+(c+n*l.px0[0])+","+(f+n*l.px0[1])+a(l.px0,l.pxmid,false,n)+a(l.pxmid,l.px0,false,n)+"Z"+i)}else t.attr("d",i)}else{var o=a(l.px0,l.px1,true,1);if(n){var s=1-n;t.attr("d","M"+(c+n*l.px1[0])+","+(f+n*l.px1[1])+a(l.px1,l.px0,false,n)+"l"+s*l.px0[0]+","+s*l.px0[1]+o+"Z")}else{t.attr("d","M"+c+","+f+"l"+l.px0[0]+","+l.px0[1]+o+"Z")}}Y(x,l,g);var d=A.castOption(y.textposition,l.pts);var v=e.selectAll("g.slicetext").data(l.text&&d!=="none"?[0]:[]);v.enter().append("g").classed("slicetext",true);v.exit().remove();v.each(function(){var e=T.ensureSingle(_.select(this),"text","",function(e){e.attr("data-notex",1)});var t=T.ensureUniformFontSize(x,d==="outside"?L(y,l,b.font):C(y,l,b.font));e.text(l.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(w.font,t).call(k.convertToTspans,x);var r=w.bBox(e.node());var a;if(d==="outside"){a=R(r,l)}else{a=D(r,l,g);if(d==="auto"&&a.scale<1){var n=T.ensureUniformFontSize(x,y.outsidetextfont);e.call(w.font,n);r=w.bBox(e.node());a=R(r,l)}}var i=a.textPosAngle;var o=i===undefined?l.pxmid:U(g.r,i);a.targetX=c+o[0]*a.rCenter+(a.x||0);a.targetY=f+o[1]*a.rCenter+(a.y||0);V(a,r);if(a.outside){var s=a.targetY;l.yLabelMin=s-r.height/2;l.yLabelMid=s;l.yLabelMax=s+r.height/2;l.labelExtraX=0;l.labelExtraY=0;h=true}a.fontSize=t.size;M(y.type,a,b);m[u].transform=a;e.attr("transform",T.getTextTransform(a))})});var t=_.select(this).selectAll("g.titletext").data(y.title.text?[0]:[]);t.enter().append("g").classed("titletext",true);t.exit().remove();t.each(function(){var e=T.ensureSingle(_.select(this),"text","",function(e){e.attr("data-notex",1)});var t=y.title.text;if(y._meta){t=T.templateString(t,y._meta)}e.text(t).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(w.font,y.title.font).call(k.convertToTspans,x);var r;if(y.title.position==="middle center"){r=N(g)}else{r=z(g,u)}e.attr("transform",v(r.x,r.y)+d(Math.min(1,r.scale))+v(r.tx,r.ty))});if(h)j(p,y);S(e,y);if(h&&y.automargin){var r=w.bBox(l.node());var a=y.domain;var n=u.w*(a.x[1]-a.x[0]);var i=u.h*(a.y[1]-a.y[0]);var o=(.5*n-g.r)/u.w;var s=(.5*i-g.r)/u.h;c.autoMargin(x,"pie."+y.uid+".automargin",{xl:a.x[0]-o,xr:a.x[1]+o,yb:a.y[0]-s,yt:a.y[1]+s,l:Math.max(g.cx-g.r-r.left,0),r:Math.max(r.right-(g.cx+g.r),0),b:Math.max(r.bottom-(g.cy+g.r),0),t:Math.max(g.cy-g.r-r.top,0),pad:5})}})});setTimeout(function(){t.selectAll("tspan").each(function(){var e=_.select(this);if(e.attr("dy"))e.attr("dy",e.attr("dy"))})},0)}function S(e,u){e.each(function(e){var t=_.select(this);if(!e.labelExtraX&&!e.labelExtraY){t.select("path.textline").remove();return}var r=t.select("g.slicetext text");e.transform.targetX+=e.labelExtraX;e.transform.targetY+=e.labelExtraY;r.attr("transform",T.getTextTransform(e.transform));var a=e.cxFinal+e.pxmid[0];var n=e.cyFinal+e.pxmid[1];var i="M"+a+","+n;var o=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4;if(e.labelExtraX){var s=e.labelExtraX*e.pxmid[1]/e.pxmid[0];var l=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]);if(Math.abs(s)>Math.abs(l)){i+="l"+l*e.pxmid[0]/e.pxmid[1]+","+l+"H"+(a+e.labelExtraX+o)}else{i+="l"+e.labelExtraX+","+s+"v"+(l-s)+"h"+o}}else{i+="V"+(e.yLabelMid+e.labelExtraY)+"h"+o}T.ensureSingle(t,"path","textline").call(f.stroke,u.outsidetextfont.color).attr({"stroke-width":Math.min(2,u.outsidetextfont.size/8),d:i,fill:"none"})})}function E(e,d,t){var v=t[0];var p=v.trace;var h=v.cx;var m=v.cy;if(!("_hasHoverLabel"in p))p._hasHoverLabel=false;if(!("_hasHoverEvent"in p))p._hasHoverEvent=false;e.on("mouseover",function(e){var t=d._fullLayout;var r=d._fullData[p.index];if(d._dragging||t.hovermode===false)return;var a=r.hoverinfo;if(Array.isArray(a)){a=g.castHoverinfo({hoverinfo:[A.castOption(a,e.pts)],_module:p._module},t,0)}if(a==="all")a="label+text+value+percent+name";if(r.hovertemplate||a!=="none"&&a!=="skip"&&a){var n=e.rInscribed||0;var i=h+e.pxmid[0]*(1-n);var o=m+e.pxmid[1]*(1-n);var s=t.separators;var l=[];if(a&&a.indexOf("label")!==-1)l.push(e.label);e.text=A.castOption(r.hovertext||r.text,e.pts);if(a&&a.indexOf("text")!==-1){var u=e.text;if(T.isValidTextValue(u))l.push(u)}e.value=e.v;e.valueLabel=A.formatPieValue(e.v,s);if(a&&a.indexOf("value")!==-1)l.push(e.valueLabel);e.percent=e.v/v.vTotal;e.percentLabel=A.formatPiePercent(e.percent,s);if(a&&a.indexOf("percent")!==-1)l.push(e.percentLabel);var c=r.hoverlabel;var f=c.font;g.loneHover({trace:p,x0:i-n*v.r,x1:i+n*v.r,y:o,text:l.join("<br>"),name:r.hovertemplate||a.indexOf("name")!==-1?r.name:undefined,idealAlign:e.pxmid[0]<0?"left":"right",color:A.castOption(c.bgcolor,e.pts)||e.color,borderColor:A.castOption(c.bordercolor,e.pts),fontFamily:A.castOption(f.family,e.pts),fontSize:A.castOption(f.size,e.pts),fontColor:A.castOption(f.color,e.pts),nameLength:A.castOption(c.namelength,e.pts),textAlign:A.castOption(c.align,e.pts),hovertemplate:A.castOption(r.hovertemplate,e.pts),hovertemplateLabels:e,eventData:[y(e,r)]},{container:t._hoverlayer.node(),outerContainer:t._paper.node(),gd:d});p._hasHoverLabel=true}p._hasHoverEvent=true;d.emit("plotly_hover",{points:[y(e,r)],event:_.event})});e.on("mouseout",function(e){var t=d._fullLayout;var r=d._fullData[p.index];var a=_.select(this).datum();if(p._hasHoverEvent){e.originalEvent=_.event;d.emit("plotly_unhover",{points:[y(a,r)],event:_.event});p._hasHoverEvent=false}if(p._hasHoverLabel){g.loneUnhover(t._hoverlayer.node());p._hasHoverLabel=false}});e.on("click",function(e){var t=d._fullLayout;var r=d._fullData[p.index];if(d._dragging||t.hovermode===false)return;d._hoverdata=[y(e,r)];g.click(d,_.event)})}function L(e,t,r){var a=A.castOption(e.outsidetextfont.color,t.pts)||A.castOption(e.textfont.color,t.pts)||r.color;var n=A.castOption(e.outsidetextfont.family,t.pts)||A.castOption(e.textfont.family,t.pts)||r.family;var i=A.castOption(e.outsidetextfont.size,t.pts)||A.castOption(e.textfont.size,t.pts)||r.size;return{color:a,family:n,size:i}}function C(e,t,r){var a=A.castOption(e.insidetextfont.color,t.pts);if(!a&&e._input.textfont){a=A.castOption(e._input.textfont.color,t.pts)}var n=A.castOption(e.insidetextfont.family,t.pts)||A.castOption(e.textfont.family,t.pts)||r.family;var i=A.castOption(e.insidetextfont.size,t.pts)||A.castOption(e.textfont.size,t.pts)||r.size;return{color:a||f.contrast(t.color),family:n,size:i}}function o(e,t){var r,a;for(var n=0;n<e.length;n++){r=e[n][0];a=r.trace;if(a.title.text){var i=a.title.text;if(a._meta){i=T.templateString(i,a._meta)}var o=w.tester.append("text").attr("data-notex",1).text(i).call(w.font,a.title.font).call(k.convertToTspans,t);var s=w.bBox(o.node(),true);r.titleBox={width:s.width,height:s.height};o.remove()}}}function D(i,o,e){var s=e.r||o.rpx1;var t=o.rInscribed;var r=o.startangle===o.stopangle;if(r){return{rCenter:1-t,scale:0,rotate:0,textPosAngle:0}}var l=o.ring;var a=l===1&&Math.abs(o.startangle-o.stopangle)===Math.PI*2;var n=o.halfangle;var u=o.midangle;var c=e.trace.insidetextorientation;var f=c==="horizontal";var d=c==="tangential";var v=c==="radial";var p=c==="auto";var h=[];var m;if(!p){var g=function(e,t){if(O(o,e)){var r=Math.abs(e-o.startangle);var a=Math.abs(e-o.stopangle);var n=r<a?r:a;if(t==="tan"){m=P(i,s,l,n,0)}else{m=I(i,s,l,n,Math.PI/2)}m.textPosAngle=e;h.push(m)}};var y;if(f||d){for(y=4;y>=-4;y-=2)g(Math.PI*y,"tan");for(y=4;y>=-4;y-=2)g(Math.PI*(y+1),"tan")}if(f||v){for(y=4;y>=-4;y-=2)g(Math.PI*(y+1.5),"rad");for(y=4;y>=-4;y-=2)g(Math.PI*(y+.5),"rad")}}if(a||p||f){var x=Math.sqrt(i.width*i.width+i.height*i.height);m={scale:t*s*2/x,rCenter:1-t,rotate:0};m.textPosAngle=(o.startangle+o.stopangle)/2;if(m.scale>=1)return m;h.push(m)}if(p||v){m=I(i,s,l,n,u);m.textPosAngle=(o.startangle+o.stopangle)/2;h.push(m)}if(p||d){m=P(i,s,l,n,u);m.textPosAngle=(o.startangle+o.stopangle)/2;h.push(m)}var b=0;var _=0;for(var w=0;w<h.length;w++){var T=h[w].scale;if(_<T){_=T;b=w}if(!p&&_>=1){break}}return h[b]}function O(e,t){var r=e.startangle;var a=e.stopangle;return r>t&&t>a||r<t&&t<a}function I(e,t,r,a,n){t=Math.max(0,t-2*s);var i=e.width/e.height;var o=p(i,a,t,r);return{scale:o*2/e.height,rCenter:l(i,o/t),rotate:u(n)}}function P(e,t,r,a,n){t=Math.max(0,t-2*s);var i=e.height/e.width;var o=p(i,a,t,r);return{scale:o*2/e.width,rCenter:l(i,o/t),rotate:u(n+Math.PI/2)}}function l(e,t){return Math.cos(t)-e*t}function u(e){return(180/Math.PI*e+720)%180-90}function p(e,t,r,a){var n=e+1/(2*Math.tan(t));return r*Math.min(1/(Math.sqrt(n*n+.5)+n),a/(Math.sqrt(e*e+a/2)+e))}function h(e,t){if(e.v===t.vTotal&&!t.trace.hole)return 1;return Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2)}function R(e,t){var r=t.pxmid[0];var a=t.pxmid[1];var n=e.width/2;var i=e.height/2;if(r<0)n*=-1;if(a<0)i*=-1;return{scale:1,rCenter:1,rotate:0,x:n+Math.abs(i)*(n>0?1:-1)/2,y:i/(1+r*r/(a*a)),outside:true}}function N(e){var t=Math.sqrt(e.titleBox.width*e.titleBox.width+e.titleBox.height*e.titleBox.height);return{x:e.cx,y:e.cy,scale:e.trace.hole*e.r*2/t,tx:0,ty:-e.titleBox.height/2+e.trace.title.font.size}}function z(e,t){var r=1;var a=1;var n;var i=e.trace;var o={x:e.cx,y:e.cy};var s={tx:0,ty:0};s.ty+=i.title.font.size;n=F(i);if(i.title.position.indexOf("top")!==-1){o.y-=(1+n)*e.r;s.ty-=e.titleBox.height}else if(i.title.position.indexOf("bottom")!==-1){o.y+=(1+n)*e.r}var l=m(e.r,e.trace.aspectratio);var u=t.w*(i.domain.x[1]-i.domain.x[0])/2;if(i.title.position.indexOf("left")!==-1){u=u+l;o.x-=(1+n)*l;s.tx+=e.titleBox.width/2}else if(i.title.position.indexOf("center")!==-1){u*=2}else if(i.title.position.indexOf("right")!==-1){u=u+l;o.x+=(1+n)*l;s.tx-=e.titleBox.width/2}r=u/e.titleBox.width;a=x(e,t)/e.titleBox.height;return{x:o.x,y:o.y,scale:Math.min(r,a),tx:s.tx,ty:s.ty}}function m(e,t){return e/(t===undefined?1:t)}function x(e,t){var r=e.trace;var a=t.h*(r.domain.y[1]-r.domain.y[0]);return Math.min(e.titleBox.height,a/2)}function F(e){var t=e.pull;if(!t)return 0;var r;if(Array.isArray(t)){t=0;for(r=0;r<e.pull.length;r++){if(e.pull[r]>t)t=e.pull[r]}}return t}function j(e,v){var t,p,r,h,m,g,y,a,n,x,i,o,s;function l(e,t){return e.pxmid[1]-t.pxmid[1]}function u(e,t){return t.pxmid[1]-e.pxmid[1]}function c(e,t){if(!t)t={};var r=t.labelExtraY+(p?t.yLabelMax:t.yLabelMin);var a=p?e.yLabelMin:e.yLabelMax;var n=p?e.yLabelMax:e.yLabelMin;var i=e.cyFinal+m(e.px0[1],e.px1[1]);var o=r-a;var s,l,u,c,f,d;if(o*y>0)e.labelExtraY=o;if(!Array.isArray(v.pull))return;for(l=0;l<x.length;l++){u=x[l];if(u===e||(A.castOption(v.pull,e.pts)||0)>=(A.castOption(v.pull,u.pts)||0)){continue}if((e.pxmid[1]-u.pxmid[1])*y>0){c=u.cyFinal+m(u.px0[1],u.px1[1]);o=c-a-e.labelExtraY;if(o*y>0)e.labelExtraY+=o}else if((n+e.labelExtraY-i)*y>0){s=3*g*Math.abs(l-x.indexOf(e));f=u.cxFinal+h(u.px0[0],u.px1[0]);d=f+s-(e.cxFinal+e.pxmid[0])-e.labelExtraX;if(d*g>0)e.labelExtraX+=d}}}for(p=0;p<2;p++){r=p?l:u;m=p?Math.max:Math.min;y=p?1:-1;for(t=0;t<2;t++){h=t?Math.max:Math.min;g=t?1:-1;a=e[p][t];a.sort(r);n=e[1-p][t];x=n.concat(a);o=[];for(i=0;i<a.length;i++){if(a[i].yLabelMid!==undefined)o.push(a[i])}s=false;for(i=0;p&&i<n.length;i++){if(n[i].yLabelMid!==undefined){s=n[i];break}}for(i=0;i<o.length;i++){var f=i&&o[i-1];if(s&&!i)f=s;c(o[i],f)}}}}function H(e,t){var r=[];for(var a=0;a<e.length;a++){var n=e[a][0];var i=n.trace;var o=i.domain;var s=t.w*(o.x[1]-o.x[0]);var l=t.h*(o.y[1]-o.y[0]);if(i.title.text&&i.title.position!=="middle center"){l-=x(n,t)}var u=s/2;var c=l/2;if(i.type==="funnelarea"&&!i.scalegroup){c/=i.aspectratio}n.r=Math.min(u,c)/(1+F(i));n.cx=t.l+t.w*(i.domain.x[1]+i.domain.x[0])/2;n.cy=t.t+t.h*(1-i.domain.y[0])-l/2;if(i.title.text&&i.title.position.indexOf("bottom")!==-1){n.cy-=x(n,t)}if(i.scalegroup&&r.indexOf(i.scalegroup)===-1){r.push(i.scalegroup)}}B(e,r)}function B(e,t){var r,a,n;for(var i=0;i<t.length;i++){var o=Infinity;var s=t[i];for(a=0;a<e.length;a++){r=e[a][0];n=r.trace;if(n.scalegroup===s){var l;if(n.type==="pie"){l=r.r*r.r}else if(n.type==="funnelarea"){var u,c;if(n.aspectratio>1){u=r.r;c=u/n.aspectratio}else{c=r.r;u=c*n.aspectratio}u*=(1+n.baseratio)/2;l=u*c}o=Math.min(o,l/r.vTotal)}}for(a=0;a<e.length;a++){r=e[a][0];n=r.trace;if(n.scalegroup===s){var f=o*r.vTotal;if(n.type==="funnelarea"){f/=(1+n.baseratio)/2;f/=n.aspectratio}r.r=Math.sqrt(f)}}}}function q(e){var t=e[0];var r=t.r;var a=t.trace;var n=A.getRotationAngle(a.rotation);var i=2*Math.PI/t.vTotal;var o="px0";var s="px1";var l,u,c;if(a.direction==="counterclockwise"){for(l=0;l<e.length;l++){if(!e[l].hidden)break}if(l===e.length)return;n+=i*e[l].v;i*=-1;o="px1";s="px0"}c=U(r,n);for(l=0;l<e.length;l++){u=e[l];if(u.hidden)continue;u[o]=c;u.startangle=n;n+=i*u.v/2;u.pxmid=U(r,n);u.midangle=n;n+=i*u.v/2;c=U(r,n);u.stopangle=n;u[s]=c;u.largeArc=u.v>t.vTotal/2?1:0;u.halfangle=Math.PI*Math.min(u.v/t.vTotal,.5);u.ring=1-a.hole;u.rInscribed=h(u,t)}}function U(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}function Y(e,t,r){var a=e._fullLayout;var n=r.trace;var i=n.texttemplate;var o=n.textinfo;if(!i&&o&&o!=="none"){var s=o.split("+");var l=function(e){return s.indexOf(e)!==-1};var u=l("label");var c=l("text");var f=l("value");var d=l("percent");var v=a.separators;var p;p=u?[t.label]:[];if(c){var h=A.getFirstFilled(n.text,t.pts);if(b(h))p.push(h)}if(f)p.push(A.formatPieValue(t.v,v));if(d)p.push(A.formatPiePercent(t.v/r.vTotal,v));t.text=p.join("<br>")}function m(e){return{label:e.label,value:e.v,valueLabel:A.formatPieValue(e.v,a.separators),percent:e.v/r.vTotal,percentLabel:A.formatPiePercent(e.v/r.vTotal,a.separators),color:e.color,text:e.text,customdata:T.castOption(n,e.i,"customdata")}}if(i){var g=T.castOption(n,t.i,"texttemplate");if(!g){t.text=""}else{var y=m(t);var x=A.getFirstFilled(n.text,t.pts);if(b(x)||x==="")y.text=x;t.text=T.texttemplateString(g,y,e._fullLayout._d3locale,y,n._meta||{})}}}function V(e,t){var r=e.rotate*Math.PI/180;var a=Math.cos(r);var n=Math.sin(r);var i=(t.left+t.right)/2;var o=(t.top+t.bottom)/2;e.textX=i*a-o*n;e.textY=i*n+o*a;e.noCenter=true}t.exports={plot:i,formatSliceLabel:Y,transformInsideText:D,determineInsideTextFont:C,positionTitleOutside:z,prerenderTitles:o,layoutAreas:H,attachFxHandlers:E,computeTransform:V}},{"../../components/color":155,"../../components/drawing":177,"../../components/fx":195,"../../lib":285,"../../lib/svg_text_utils":307,"../../plots/plots":366,"../bar/constants":385,"../bar/uniform_text":399,"./event_data":485,"./helpers":486,"@plotly/d3":20}],491:[function(e,t,r){"use strict";var n=e("@plotly/d3");var i=e("./style_one");var a=e("../bar/uniform_text").resizeText;t.exports=function e(t){var r=t._fullLayout._pielayer.selectAll(".trace");a(t,r,"pie");r.each(function(e){var t=e[0];var r=t.trace;var a=n.select(this);a.style({opacity:r.opacity});a.selectAll("path.surface").each(function(e){n.select(this).call(i,e,r)})})}},{"../bar/uniform_text":399,"./style_one":492,"@plotly/d3":20}],492:[function(e,t,r){"use strict";var s=e("../../components/color");var l=e("./helpers").castOption;t.exports=function e(t,r,a){var n=a.marker.line;var i=l(n.color,r.pts)||s.defaultLine;var o=l(n.width,r.pts)||0;t.style("stroke-width",o).call(s.fill,r.color).call(s.stroke,i)}},{"../../components/color":155,"./helpers":486}],493:[function(e,t,r){"use strict";var s=e("../../lib");t.exports=function e(t,r){for(var a=0;a<t.length;a++)t[a].i=a;s.mergeArray(r.text,t,"tx");s.mergeArray(r.texttemplate,t,"txt");s.mergeArray(r.hovertext,t,"htx");s.mergeArray(r.customdata,t,"data");s.mergeArray(r.textposition,t,"tp");if(r.textfont){s.mergeArrayCastPositive(r.textfont.size,t,"ts");s.mergeArray(r.textfont.color,t,"tc");s.mergeArray(r.textfont.family,t,"tf")}var n=r.marker;if(n){s.mergeArrayCastPositive(n.size,t,"ms");s.mergeArrayCastPositive(n.opacity,t,"mo");s.mergeArray(n.symbol,t,"mx");s.mergeArray(n.color,t,"mc");var i=n.line;if(n.line){s.mergeArray(i.color,t,"mlc");s.mergeArrayCastPositive(i.width,t,"mlw")}var o=n.gradient;if(o&&o.type!=="none"){s.mergeArray(o.type,t,"mgt");s.mergeArray(o.color,t,"mgc")}}}},{"../../lib":285}],494:[function(e,t,r){"use strict";var a=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var n=e("../../plots/template_attributes").texttemplateAttrs;var i=e("../../plots/template_attributes").hovertemplateAttrs;var o=e("../../components/colorscale/attributes");var s=e("../../plots/font_attributes");var l=e("../../components/drawing/attributes").dash;var u=e("../../components/drawing");var c=e("./constants");var f=e("../../lib/extend").extendFlat;function d(e){return{valType:"any",dflt:0,editType:"calc"}}function v(e){return{valType:"any",editType:"calc"}}function p(e){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:true},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:true},dx:{valType:"number",dflt:1,editType:"calc",anim:true},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:true},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:true},dy:{valType:"number",dflt:1,editType:"calc",anim:true},xperiod:d("x"),yperiod:d("y"),xperiod0:v("x0"),yperiod0:v("y0"),xperiodalignment:p("x"),yperiodalignment:p("y"),xhoverformat:a("x"),yhoverformat:a("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:true,editType:"calc"},texttemplate:n({},{}),hovertext:{valType:"string",dflt:"",arrayOk:true,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:i({},{keys:c.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:true},width:{valType:"number",min:0,dflt:2,editType:"style",anim:true},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:f({},l,{editType:"style"}),simplify:{valType:"boolean",dflt:true,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:false,editType:"calc"},cliponaxis:{valType:"boolean",dflt:true,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:true},marker:f({symbol:{valType:"enumerated",values:u.symbolList,dflt:"circle",arrayOk:true,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:true,editType:"style",anim:true},size:{valType:"number",min:0,dflt:6,arrayOk:true,editType:"calc",anim:true},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:f({width:{valType:"number",min:0,arrayOk:true,editType:"style",anim:true},editType:"calc"},o("marker.line",{anim:true})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:true,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:true,editType:"calc"},editType:"calc"},editType:"calc"},o("marker",{anim:true})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:true,editType:"calc"},textfont:s({editType:"calc",colorEditType:"style",arrayOk:true})}},{"../../components/colorscale/attributes":162,"../../components/drawing":177,"../../components/drawing/attributes":176,"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../../plots/font_attributes":360,"../../plots/template_attributes":368,"./constants":498}],495:[function(e,t,r){"use strict";var O=e("fast-isnumeric");var I=e("../../lib");var P=e("../../plots/cartesian/axes");var R=e("../../plots/cartesian/align_period");var N=e("../../constants/numerical").BADNUM;var g=e("./subtypes");var z=e("./colorscale_calc");var F=e("./arrays_to_calcdata");var j=e("./calc_selection");function a(e,t){var r=e._fullLayout;var a=P.getFromId(e,t.xaxis||"x");var n=P.getFromId(e,t.yaxis||"y");var i=a.makeCalcdata(t,"x");var o=n.makeCalcdata(t,"y");var s=R(t,a,"x",i);var l=R(t,n,"y",o);var u=t._length;var c=new Array(u);var f=t.ids;var d=U(t,r,a,n);var v=false;var p,h,m,g,y,x;q(r,t);var b="x";var _="y";var w;if(d){I.pushUnique(d.traceIndices,t._expandedIndex);p=d.orientation==="v";if(p){_="s";w="x"}else{b="s";w="y"}y=d.stackgaps==="interpolate"}else{var T=B(t,u);H(e,t,a,n,s,l,T)}var k=!!t.xperiodalignment;var M=!!t.yperiodalignment;for(h=0;h<u;h++){var A=c[h]={};var S=O(s[h]);var E=O(l[h]);if(S&&E){A[b]=s[h];A[_]=l[h];if(k){A.orig_x=i[h]}if(M){A.orig_y=o[h]}}else if(d&&(p?S:E)){A[w]=p?s[h]:l[h];A.gap=true;if(y){A.s=N;v=true}else{A.s=0}}else{A[b]=A[_]=N}if(f){A.id=String(f[h])}}F(c,t);z(e,t);j(c,t);if(d){h=0;while(h<c.length){if(c[h][w]===N){c.splice(h,1)}else h++}I.sort(c,function(e,t){return e[w]-t[w]||e.i-t.i});if(v){h=0;while(h<c.length-1&&c[h].gap){h++}x=c[h].s;if(!x)x=c[h].s=0;for(m=0;m<h;m++){c[m].s=x}g=c.length-1;while(g>h&&c[g].gap){g--}x=c[g].s;for(m=c.length-1;m>g;m--){c[m].s=x}while(h<g){h++;if(c[h].gap){m=h+1;while(c[m].gap){m++}var L=c[h-1][w];var C=c[h-1].s;var D=(c[m].s-C)/(c[m][w]-L);while(h<m){c[h].s=C+(c[h][w]-L)*D;h++}}}}}return c}function H(e,t,r,a,n,i,o){var s=t._length;var l=e._fullLayout;var u=r._id;var c=a._id;var f=l._firstScatter[y(t)]===t.uid;var d=(U(t,l,r,a)||{}).orientation;var v=t.fill;r._minDtick=0;a._minDtick=0;var p={padded:true};var h={padded:true};if(o){p.ppad=h.ppad=o}var m=s<2||n[0]!==n[s-1]||i[0]!==i[s-1];if(m&&(v==="tozerox"||v==="tonextx"&&(f||d==="h"))){p.tozero=true}else if(!(t.error_y||{}).visible&&(v==="tonexty"||v==="tozeroy"||!g.hasMarkers(t)&&!g.hasText(t))){p.padded=false;p.ppad=0}if(m&&(v==="tozeroy"||v==="tonexty"&&(f||d==="v"))){h.tozero=true}else if(v==="tonextx"||v==="tozerox"){h.padded=false}if(u)t._extremes[u]=P.findExtremes(r,n,p);if(c)t._extremes[c]=P.findExtremes(a,i,h)}function B(e,t){if(!g.hasMarkers(e))return;var r=e.marker;var a=1.6*(e.marker.sizeref||1);var n;if(e.marker.sizemode==="area"){n=function(e){return Math.max(Math.sqrt((e||0)/a),3)}}else{n=function(e){return Math.max((e||0)/a,3)}}if(I.isArrayOrTypedArray(r.size)){var i={type:"linear"};P.setConvert(i);var o=i.makeCalcdata(e.marker,"size");var s=new Array(t);for(var l=0;l<t;l++){s[l]=n(o[l])}return s}else{return n(r.size)}}function q(e,t){var r=y(t);var a=e._firstScatter;if(!a[r])a[r]=t.uid}function y(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function U(e,t,r,a){var n=e.stackgroup;if(!n)return;var i=t._scatterStackOpts[r._id+a._id][n];var o=i.orientation==="v"?a:r;if(o.type==="linear"||o.type==="log")return i}t.exports={calc:a,calcMarkerSize:B,calcAxisExpansion:H,setFirstScatter:q,getStackOpts:U}},{"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/align_period":328,"../../plots/cartesian/axes":331,"./arrays_to_calcdata":493,"./calc_selection":496,"./colorscale_calc":497,"./subtypes":519,"fast-isnumeric":31}],496:[function(e,t,r){"use strict";var a=e("../../lib");t.exports=function e(t,r){if(a.isArrayOrTypedArray(r.selectedpoints)){a.tagSelected(t,r)}}},{"../../lib":285}],497:[function(e,t,r){"use strict";var a=e("../../components/colorscale/helpers").hasColorscale;var n=e("../../components/colorscale/calc");var i=e("./subtypes");t.exports=function e(t,r){if(i.hasLines(r)&&a(r,"line")){n(t,r,{vals:r.line.color,containerStr:"line",cLetter:"c"})}if(i.hasMarkers(r)){if(a(r,"marker")){n(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"})}if(a(r,"marker.line")){n(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"})}}}},{"../../components/colorscale/calc":163,"../../components/colorscale/helpers":166,"./subtypes":519}],498:[function(e,t,r){"use strict";t.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],499:[function(e,t,r){"use strict";var P=e("./calc");t.exports=function e(t,r){var a=r.xaxis;var n=r.yaxis;var i=a._id+n._id;var o=t._fullLayout._scatterStackOpts[i];if(!o)return;var s=t.calcdata;var l,u,c,f,d,v,p,h,m;var g,y,x,b,_;var w;for(var T in o){g=o[T];var k=g.traceIndices;if(!k.length)continue;y=g.stackgaps==="interpolate";x=g.groupnorm;if(g.orientation==="v"){b="x";_="y"}else{b="y";_="x"}w=new Array(k.length);for(l=0;l<w.length;l++){w[l]=false}v=s[k[0]];var M=new Array(v.length);for(l=0;l<v.length;l++){M[l]=v[l][b]}for(l=1;l<k.length;l++){d=s[k[l]];for(u=c=0;u<d.length;u++){p=d[u][b];for(;p>M[c]&&c<M.length;c++){R(d,u,M[c],l,w,y,b);u++}if(p!==M[c]){for(f=0;f<l;f++){R(s[k[f]],c,p,f,w,y,b)}M.splice(c,0,p)}c++}for(;c<M.length;c++){R(d,u,M[c],l,w,y,b);u++}}var A=M.length;for(u=0;u<v.length;u++){h=v[u][_]=v[u].s;for(l=1;l<k.length;l++){d=s[k[l]];d[0].trace._rawLength=d[0].trace._length;d[0].trace._length=A;h+=d[u].s;d[u][_]=h}if(x){m=(x==="fraction"?h:h/100)||1;for(l=0;l<k.length;l++){var S=s[k[l]][u];S[_]/=m;S.sNorm=S.s/m}}}for(l=0;l<k.length;l++){d=s[k[l]];var E=d[0].trace;var L=P.calcMarkerSize(E,E._rawLength);var C=Array.isArray(L);if(L&&w[l]||C){var D=L;L=new Array(A);for(u=0;u<A;u++){L[u]=d[u].gap?0:C?D[d[u].i]:D}}var O=new Array(A);var I=new Array(A);for(u=0;u<A;u++){O[u]=d[u].x;I[u]=d[u].y}P.calcAxisExpansion(t,E,a,n,O,I,L);d[0].t.orientation=g.orientation}}};function R(e,t,r,a,n,i,o){n[a]=true;var s={i:null,gap:true,s:0};s[o]=r;e.splice(t,0,s);if(t&&r===e[t-1][o]){var l=e[t-1];s.s=l.s;s.i=l.i;s.gap=l.gap}else if(i){s.s=u(e,t,r,o)}if(!t){e[0].t=e[1].t;e[0].trace=e[1].trace;delete e[1].t;delete e[1].trace}}function u(e,t,r,a){var n=e[t-1];var i=e[t+1];if(!i)return n.s;if(!n)return i.s;return n.s+(i.s-n.s)*(r-n[a])/(i[a]-n[a])}},{"./calc":495}],500:[function(e,t,r){"use strict";t.exports=function e(t){for(var r=0;r<t.length;r++){var a=t[r];if(a.type!=="scatter")continue;var n=a.fill;if(n==="none"||n==="toself")continue;a.opacity=undefined;if(n==="tonexty"||n==="tonextx"){for(var i=r-1;i>=0;i--){var o=t[i];if(o.type==="scatter"&&o.xaxis===a.xaxis&&o.yaxis===a.yaxis){o.opacity=undefined;break}}}}}},{}],501:[function(e,t,r){"use strict";var v=e("../../lib");var p=e("../../registry");var h=e("./attributes");var m=e("./constants");var g=e("./subtypes");var y=e("./xy_defaults");var x=e("./period_defaults");var b=e("./stack_defaults");var _=e("./marker_defaults");var w=e("./line_defaults");var T=e("./line_shape_defaults");var k=e("./text_defaults");var M=e("./fillcolor_defaults");t.exports=function e(r,a,t,n){function i(e,t){return v.coerce(r,a,h,e,t)}var o=y(r,a,n,i);if(!o)a.visible=false;if(!a.visible)return;x(r,a,n,i);i("xhoverformat");i("yhoverformat");var s=b(r,a,n,i);var l=!s&&o<m.PTS_LINESONLY?"lines+markers":"lines";i("text");i("hovertext");i("mode",l);if(g.hasLines(a)){w(r,a,t,n,i);T(r,a,i);i("connectgaps");i("line.simplify")}if(g.hasMarkers(a)){_(r,a,t,n,i,{gradient:true})}if(g.hasText(a)){i("texttemplate");k(r,a,n,i)}var u=[];if(g.hasMarkers(a)||g.hasText(a)){i("cliponaxis");i("marker.maxdisplayed");u.push("points")}i("fill",s?s.fillDflt:"none");if(a.fill!=="none"){M(r,a,t,i);if(!g.hasLines(a))T(r,a,i)}var c=(a.line||{}).color;var f=(a.marker||{}).color;if(a.fill==="tonext"||a.fill==="toself"){u.push("fills")}i("hoveron",u.join("+")||"points");if(a.hoveron!=="fills")i("hovertemplate");var d=p.getComponentMethod("errorbars","supplyDefaults");d(r,a,c||f||t,{axis:"y"});d(r,a,c||f||t,{axis:"x",inherit:"y"});v.coerceSelectionMarkerOpacity(a,i)}},{"../../lib":285,"../../registry":373,"./attributes":494,"./constants":498,"./fillcolor_defaults":502,"./line_defaults":507,"./line_shape_defaults":509,"./marker_defaults":513,"./period_defaults":514,"./stack_defaults":517,"./subtypes":519,"./text_defaults":520,"./xy_defaults":521}],502:[function(e,t,r){"use strict";var l=e("../../components/color");var u=e("../../lib").isArrayOrTypedArray;t.exports=function e(t,r,a,n){var i=false;if(r.marker){var o=r.marker.color;var s=(r.marker.line||{}).color;if(o&&!u(o)){i=o}else if(s&&!u(s)){i=s}}n("fillcolor",l.addOpacity((r.line||{}).color||i||a,.5))}},{"../../components/color":155,"../../lib":285}],503:[function(e,t,r){"use strict";var l=e("../../plots/cartesian/axes");t.exports=function e(t,r,a){var n={};var i={_fullLayout:a};var o=l.getFromTrace(i,r,"x");var s=l.getFromTrace(i,r,"y");n.xLabel=l.tickText(o,o.c2l(t.x),true).text;n.yLabel=l.tickText(s,s.c2l(t.y),true).text;return n}},{"../../plots/cartesian/axes":331}],504:[function(e,t,r){"use strict";var s=e("../../components/color");var l=e("./subtypes");t.exports=function e(t,r){var a,n;if(t.mode==="lines"){a=t.line.color;return a&&s.opacity(a)?a:t.fillcolor}else if(t.mode==="none"){return t.fill?t.fillcolor:""}else{var i=r.mcc||(t.marker||{}).color;var o=r.mlcc||((t.marker||{}).line||{}).color;n=i&&s.opacity(i)?i:o&&s.opacity(o)&&(r.mlw||((t.marker||{}).line||{}).width)?o:"";if(n){if(s.opacity(n)<.3){return s.addOpacity(n,.3)}else return n}else{a=(t.line||{}).color;return a&&s.opacity(a)&&l.hasLines(t)&&t.line.width?a:t.fillcolor}}}},{"../../components/color":155,"./subtypes":519}],505:[function(e,t,r){"use strict";var Y=e("../../lib");var V=e("../../components/fx");var G=e("../../registry");var W=e("./get_trace_color");var $=e("../../components/color");var Z=Y.fillText;t.exports=function e(t,r,a,n){var i=t.cd;var o=i[0].trace;var s=t.xa;var l=t.ya;var u=s.c2p(r);var c=l.c2p(a);var f=[u,c];var d=o.hoveron||"";var v=o.mode.indexOf("markers")!==-1?3:.5;if(d.indexOf("points")!==-1){var p=function(e){var t=Math.max(3,e.mrc||0);var r=1-1/t;var a=Math.abs(s.c2p(e.x)-u);if(e.orig_x!==undefined)a+=s.c2p(e.orig_x)-s.c2p(e.x);return a<t?r*a/t:a-t+r};var h=function(e){var t=Math.max(3,e.mrc||0);var r=1-1/t;var a=Math.abs(l.c2p(e.y)-c);if(e.orig_y!==undefined)a+=l.c2p(e.orig_y)-l.c2p(e.y);return a<t?r*a/t:a-t+r};var m=function(e){var t=Math.max(v,e.mrc||0);var r=s.c2p(e.x)-u;var a=l.c2p(e.y)-c;return Math.max(Math.sqrt(r*r+a*a)-t,1-v/t)};var g=V.getDistanceFunction(n,p,h,m);V.getClosest(i,g,t);if(t.index!==false){var y=i[t.index];var x=s.c2p(y.x,true);var b=l.c2p(y.y,true);var _=y.mrc||1;t.index=y.i;var w=i[0].t.orientation;var T=w&&(y.sNorm||y.s);var k=w==="h"?T:y.orig_x!==undefined?y.orig_x:y.x;var M=w==="v"?T:y.orig_y!==undefined?y.orig_y:y.y;Y.extendFlat(t,{color:W(o,y),x0:x-_,x1:x+_,xLabelVal:k,y0:b-_,y1:b+_,yLabelVal:M,spikeDistance:m(y),hovertemplate:o.hovertemplate});Z(y,o,t);G.getComponentMethod("errorbars","hoverInfo")(y,o,t);return[t]}}if(d.indexOf("fills")!==-1&&o._polygons){var A=o._polygons;var S=[];var E=false;var L=Infinity;var C=-Infinity;var D=Infinity;var O=-Infinity;var I,P,R,N,z,F,j,H,B;for(I=0;I<A.length;I++){R=A[I];if(R.contains(f)){E=!E;S.push(R);D=Math.min(D,R.ymin);O=Math.max(O,R.ymax)}}if(E){D=Math.max(D,0);O=Math.min(O,l._length);var q=(D+O)/2;for(I=0;I<S.length;I++){N=S[I].pts;for(P=1;P<N.length;P++){H=N[P-1][1];B=N[P][1];if(H>q!==B>=q){F=N[P-1][0];j=N[P][0];if(B-H){z=F+(j-F)*(q-H)/(B-H);L=Math.min(L,z);C=Math.max(C,z)}}}}L=Math.max(L,0);C=Math.min(C,s._length);var U=$.defaultLine;if($.opacity(o.fillcolor))U=o.fillcolor;else if($.opacity((o.line||{}).color)){U=o.line.color}Y.extendFlat(t,{distance:t.maxHoverDistance,x0:L,x1:C,y0:q,y1:q,color:U,hovertemplate:false});delete t.index;if(o.text&&!Array.isArray(o.text)){t.text=String(o.text)}else t.text=o.name;return[t]}}}},{"../../components/color":155,"../../components/fx":195,"../../lib":285,"../../registry":373,"./get_trace_color":504}],506:[function(e,t,r){"use strict";var a=e("./subtypes");t.exports={hasLines:a.hasLines,hasMarkers:a.hasMarkers,hasText:a.hasText,isBubble:a.isBubble,attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./cross_trace_calc"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot"),colorbar:e("./marker_colorbar"),formatLabels:e("./format_labels"),style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("./select"),animatable:true,moduleType:"trace",name:"scatter",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":345,"./arrays_to_calcdata":493,"./attributes":494,"./calc":495,"./cross_trace_calc":499,"./cross_trace_defaults":500,"./defaults":501,"./format_labels":503,"./hover":505,"./marker_colorbar":512,"./plot":515,"./select":516,"./style":518,"./subtypes":519}],507:[function(e,t,r){"use strict";var u=e("../../lib").isArrayOrTypedArray;var c=e("../../components/colorscale/helpers").hasColorscale;var f=e("../../components/colorscale/defaults");t.exports=function e(t,r,a,n,i,o){var s=(t.marker||{}).color;i("line.color",a);if(c(t,"line")){f(t,r,n,i,{prefix:"line.",cLetter:"c"})}else{var l=(u(s)?false:s)||a;i("line.color",l)}i("line.width");if(!(o||{}).noDash)i("line.dash")}},{"../../components/colorscale/defaults":165,"../../components/colorscale/helpers":166,"../../lib":285}],508:[function(e,t,r){"use strict";var a=e("../../constants/numerical");var ce=a.BADNUM;var n=a.LOG_CLIP;var fe=n+.5;var de=n-.5;var ve=e("../../lib");var pe=ve.segmentsIntersect;var he=ve.constrain;var me=e("./constants");t.exports=function e(n,i){var o=i.xaxis;var s=i.yaxis;var l=o.type==="log";var u=s.type==="log";var c=o._length;var f=s._length;var t=i.connectGaps;var d=i.baseTolerance;var r=i.shape;var a=r==="linear";var v=i.fill&&i.fill!=="none";var p=[];var h=me.minTolerance;var m=n.length;var g=new Array(m);var y=0;var x;var b,_,w,T;var k;var M;var A;var S;var E,L,C,D;var O,I,P;function R(e){var t=n[e];if(!t)return false;var r=i.linearized?o.l2p(t.x):o.c2p(t.x);var a=i.linearized?s.l2p(t.y):s.c2p(t.y);if(r===ce){if(l)r=o.c2p(t.x,true);if(r===ce)return false;if(u&&a===ce){r*=Math.abs(o._m*f*(o._m>0?fe:de)/(s._m*c*(s._m>0?fe:de)))}r*=1e3}if(a===ce){if(u)a=s.c2p(t.y,true);if(a===ce)return false;a*=1e3}return[r,a]}function N(e,t,r,a){var n=r-e;var i=a-t;var o=.5-e;var s=.5-t;var l=n*n+i*i;var u=n*o+i*s;if(u>0&&u<l){var c=o*i-s*n;if(c*c<l)return true}}var z,F;function j(e,t){var r=e[0]/c;var a=e[1]/f;var n=Math.max(0,-r,r-1,-a,a-1);if(n&&z!==undefined&&N(r,a,z,F)){n=0}if(n&&t&&N(r,a,t[0]/c,t[1]/f)){n=0}return(1+me.toleranceGrowth*n)*d}function H(e,t){var r=e[0]-t[0];var a=e[1]-t[1];return Math.sqrt(r*r+a*a)}var B=me.maxScreensAway;var q=-c*B;var U=c*(1+B);var Y=-f*B;var V=f*(1+B);var G=[[q,Y,U,Y],[U,Y,U,V],[U,V,q,V],[q,V,q,Y]];var W,$,Z,X,J,K;function Q(e,t){var r=[];var a=0;for(var n=0;n<4;n++){var i=G[n];var o=pe(e[0],e[1],t[0],t[1],i[0],i[1],i[2],i[3]);if(o&&(!a||Math.abs(o.x-r[0][0])>1||Math.abs(o.y-r[0][1])>1)){o=[o.x,o.y];if(a&&H(o,e)<H(r[0],e))r.unshift(o);else r.push(o);a++}}return r}function ee(e){if(e[0]<q||e[0]>U||e[1]<Y||e[1]>V){return[he(e[0],q,U),he(e[1],Y,V)]}}function te(e,t){if(e[0]===t[0]&&(e[0]===q||e[0]===U))return true;if(e[1]===t[1]&&(e[1]===Y||e[1]===V))return true}function re(e,t){var r=[];var a=ee(e);var n=ee(t);if(a&&n&&te(a,n))return r;if(a)r.push(a);if(n)r.push(n);return r}function ae(s,l,u){return function(e,t){var r=ee(e);var a=ee(t);var n=[];if(r&&a&&te(r,a))return n;if(r)n.push(r);if(a)n.push(a);var i=2*ve.constrain((e[s]+t[s])/2,l,u)-((r||e)[s]+(a||t)[s]);if(i){var o;if(r&&a){o=i>0===r[s]>a[s]?r:a}else o=r||a;o[s]+=i}return n}}var ne;if(r==="linear"||r==="spline"){ne=Q}else if(r==="hv"||r==="vh"){ne=re}else if(r==="hvh")ne=ae(0,q,U);else if(r==="vhv")ne=ae(1,Y,V);function ie(e,t){var r=t[0]-e[0];var a=(t[1]-e[1])/r;var n=(e[1]*t[0]-t[1]*e[0])/r;if(n>0)return[a>0?q:U,V];else return[a>0?U:q,Y]}function oe(e){var t=e[0];var r=e[1];var a=t===g[y-1][0];var n=r===g[y-1][1];if(a&&n)return;if(y>1){var i=t===g[y-2][0];var o=r===g[y-2][1];if(a&&(t===q||t===U)&&i){if(o)y--;else g[y-1]=e}else if(n&&(r===Y||r===V)&&o){if(i)y--;else g[y-1]=e}else g[y++]=e}else g[y++]=e}function se(e){if(g[y-1][0]!==e[0]&&g[y-1][1]!==e[1]){oe([Z,X])}oe(e);J=null;Z=X=0}function le(e){z=e[0]/c;F=e[1]/f;W=e[0]<q?q:e[0]>U?U:0;$=e[1]<Y?Y:e[1]>V?V:0;if(W||$){if(!y){g[y++]=[W||e[0],$||e[1]]}else if(J){var t=ne(J,e);if(t.length>1){se(t[0]);g[y++]=t[1]}}else{K=ne(g[y-1],e)[0];g[y++]=K}var r=g[y-1];if(W&&$&&(r[0]!==W||r[1]!==$)){if(J){if(Z!==W&&X!==$){if(Z&&X){oe(ie(J,e))}else{oe([Z||W,X||$])}}else if(Z&&X){oe([Z,X])}}oe([W,$])}else if(Z-W&&X-$){oe([W||Z,$||X])}J=e;Z=W;X=$}else{if(J){se(ne(J,e)[0])}g[y++]=e}}for(x=0;x<m;x++){b=R(x);if(!b)continue;y=0;J=null;le(b);for(x++;x<m;x++){w=R(x);if(!w){if(t)continue;else break}if(!a||!i.simplify){le(w);continue}var ue=R(x+1);E=H(w,b);if(!(v&&(y===0||y===m-1))&&E<j(w,ue)*h)continue;A=[(w[0]-b[0])/E,(w[1]-b[1])/E];T=b;L=E;C=O=I=0;M=false;_=w;for(x++;x<n.length;x++){k=ue;ue=R(x+1);if(!k){if(t)continue;else break}S=[k[0]-b[0],k[1]-b[1]];P=S[0]*A[1]-S[1]*A[0];O=Math.min(O,P);I=Math.max(I,P);if(I-O>j(k,ue))break;_=k;D=S[0]*A[0]+S[1]*A[1];if(D>L){L=D;w=k;M=false}else if(D<C){C=D;T=k;M=true}}if(M){le(w);if(_!==T)le(T)}else{if(T!==b)le(T);if(_!==w)le(w)}le(_);if(x>=n.length||!k)break;le(k);b=k}if(J)oe([Z||J[0],X||J[1]]);p.push(g.slice(0,y))}return p}},{"../../constants/numerical":265,"../../lib":285,"./constants":498}],509:[function(e,t,r){"use strict";t.exports=function e(t,r,a){var n=a("line.shape");if(n==="spline")a("line.smoothing")}},{}],510:[function(e,t,r){"use strict";var m={tonextx:1,tonexty:1,tonext:1};t.exports=function e(t,r,a){var n,i,o,s,l;var u={};var c=false;var f=-1;var d=0;var v=-1;for(i=0;i<a.length;i++){n=a[i][0].trace;o=n.stackgroup||"";if(o){if(o in u){l=u[o]}else{l=u[o]=d;d++}}else if(n.fill in m&&v>=0){l=v}else{l=v=d;d++}if(l<f)c=true;n._groupIndex=f=l}var p=a.slice();if(c){p.sort(function(e,t){var r=e[0].trace;var a=t[0].trace;return r._groupIndex-a._groupIndex||r.index-a.index})}var h={};for(i=0;i<p.length;i++){n=p[i][0].trace;o=n.stackgroup||"";if(n.visible===true){n._nexttrace=null;if(n.fill in m){s=h[o];n._prevtrace=s||null;if(s){s._nexttrace=n}}n._ownfill=n.fill&&(n.fill.substr(0,6)==="tozero"||n.fill==="toself"||n.fill.substr(0,2)==="to"&&!n._prevtrace);h[o]=n}else{n._prevtrace=n._nexttrace=n._ownfill=null}}return p}},{}],511:[function(e,t,r){"use strict";var o=e("fast-isnumeric");t.exports=function e(t){var r=t.marker;var a=r.sizeref||1;var n=r.sizemin||0;var i=r.sizemode==="area"?function(e){return Math.sqrt(e/a)}:function(e){return e/a};return function(e){var t=i(e/2);return o(t)&&t>0?Math.max(t,n):0}}},{"fast-isnumeric":31}],512:[function(e,t,r){"use strict";t.exports={container:"marker",min:"cmin",max:"cmax"}},{}],513:[function(e,t,r){"use strict";var f=e("../../components/color");var d=e("../../components/colorscale/helpers").hasColorscale;var v=e("../../components/colorscale/defaults");var p=e("./subtypes");t.exports=function e(t,r,a,n,i,o){var s=p.isBubble(t);var l=(t.line||{}).color;var u;o=o||{};if(l)a=l;i("marker.symbol");i("marker.opacity",s?.7:1);i("marker.size");i("marker.color",a);if(d(t,"marker")){v(t,r,n,i,{prefix:"marker.",cLetter:"c"})}if(!o.noSelect){i("selected.marker.color");i("unselected.marker.color");i("selected.marker.size");i("unselected.marker.size")}if(!o.noLine){if(l&&!Array.isArray(l)&&r.marker.color!==l){u=l}else if(s)u=f.background;else u=f.defaultLine;i("marker.line.color",u);if(d(t,"marker.line")){v(t,r,n,i,{prefix:"marker.line.",cLetter:"c"})}i("marker.line.width",s?1:0)}if(s){i("marker.sizeref");i("marker.sizemin");i("marker.sizemode")}if(o.gradient){var c=i("marker.gradient.type");if(c!=="none"){i("marker.gradient.color")}}}},{"../../components/color":155,"../../components/colorscale/defaults":165,"../../components/colorscale/helpers":166,"./subtypes":519}],514:[function(e,t,r){"use strict";var a=e("../../lib").dateTick0;var n=e("../../constants/numerical");var i=n.ONEWEEK;function l(e,t){if(e%i===0){return a(t,1)}return a(t,0)}t.exports=function e(t,r,a,n,i){if(!i){i={x:true,y:true}}if(i.x){var o=n("xperiod");if(o){n("xperiod0",l(o,r.xcalendar));n("xperiodalignment")}}if(i.y){var s=n("yperiod");if(s){n("yperiod0",l(s,r.ycalendar));n("yperiodalignment")}}}},{"../../constants/numerical":265,"../../lib":285}],515:[function(e,t,r){"use strict";var Z=e("@plotly/d3");var X=e("../../registry");var J=e("../../lib");var K=J.ensureSingle;var Q=J.identity;var ee=e("../../components/drawing");var te=e("./subtypes");var re=e("./line_points");var v=e("./link_traces");var ae=e("../../lib/polygon").tester;t.exports=function e(r,a,t,n,i,o){var s,l;var u=!i;var c=!!i&&i.duration>0;var f=v(r,a,t);s=n.selectAll("g.trace").data(f,function(e){return e[0].trace.uid});s.enter().append("g").attr("class",function(e){return"trace scatter trace"+e[0].trace.uid}).style("stroke-miterlimit",2);s.order();p(r,s,a);if(c){if(o){l=o()}var d=Z.transition().duration(i.duration).ease(i.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()});d.each(function(){n.selectAll("g.trace").each(function(e,t){h(r,t,a,e,f,this,i)})})}else{s.each(function(e,t){h(r,t,a,e,f,this,i)})}if(u){s.exit().remove()}n.selectAll("path:not([d])").remove()};function p(i,e,o){e.each(function(e){var t=K(Z.select(this),"g","fills");ee.setClipUrl(t,o.layerClipId,i);var r=e[0].trace;var a=[];if(r._ownfill)a.push("_ownFill");if(r._nexttrace)a.push("_nextFill");var n=t.selectAll("g").data(a,Q);n.enter().append("g");n.exit().each(function(e){r[e]=null}).remove();n.order().each(function(e){r[e]=K(Z.select(this),"path","js-fill")})})}function h(g,e,y,n,t,r,a){var i;ne(g,e,y,n,t);var x=!!a&&a.duration>0;function b(e){return x?e.transition():e}var _=y.xaxis;var w=y.yaxis;var o=n[0].trace;var s=o.line;var l=Z.select(r);var u=K(l,"g","errorbars");var c=K(l,"g","lines");var f=K(l,"g","points");var d=K(l,"g","text");X.getComponentMethod("errorbars","plot")(g,u,y,a);if(o.visible!==true)return;b(l).style("opacity",o.opacity);var v,p;var h=o.fill.charAt(o.fill.length-1);if(h!=="x"&&h!=="y")h="";n[0][y.isRangePlot?"nodeRangePlot3":"node3"]=l;var m="";var T=[];var k=o._prevtrace;if(k){m=k._prevRevpath||"";p=k._nextFill;T=k._polygons}var M;var A;var S="";var E="";var L,C,D;var O,I,P,R;var N=[];var z=J.noop;v=o._ownFill;if(te.hasLines(o)||o.fill!=="none"){if(p){p.datum(n)}if(["hv","vh","hvh","vhv"].indexOf(s.shape)!==-1){L=ee.steps(s.shape);C=ee.steps(s.shape.split("").reverse().join(""))}else if(s.shape==="spline"){L=C=function(e){var t=e[e.length-1];if(e.length>1&&e[0][0]===t[0]&&e[0][1]===t[1]){return ee.smoothclosed(e.slice(1),s.smoothing)}else{return ee.smoothopen(e,s.smoothing)}}}else{L=C=function(e){return"M"+e.join("L")}}D=function(e){return C(e.reverse())};N=re(n,{xaxis:_,yaxis:w,connectGaps:o.connectgaps,baseTolerance:Math.max(s.width||1,3)/4,shape:s.shape,simplify:s.simplify,fill:o.fill});R=o._polygons=new Array(N.length);for(i=0;i<N.length;i++){o._polygons[i]=ae(N[i])}if(N.length){O=N[0][0];I=N[N.length-1];P=I[I.length-1]}z=function(a){return function(e){M=L(e);A=D(e);if(!S){S=M;E=A}else if(h){S+="L"+M.substr(1);E=A+("L"+E.substr(1))}else{S+="Z"+M;E=A+"Z"+E}if(te.hasLines(o)&&e.length>1){var t=Z.select(this);t.datum(n);if(a){b(t.style("opacity",0).attr("d",M).call(ee.lineGroupStyle)).style("opacity",1)}else{var r=b(t);r.attr("d",M);ee.singleLineStyle(n,r)}}}}}var F=c.selectAll(".js-line").data(N);b(F.exit()).style("opacity",0).remove();F.each(z(false));F.enter().append("path").classed("js-line",true).style("vector-effect","non-scaling-stroke").call(ee.lineGroupStyle).each(z(true));ee.setClipUrl(F,y.layerClipId,g);function j(e){b(e).attr("d","M0,0Z")}if(N.length){if(v){v.datum(n);if(O&&P){if(h){if(h==="y"){O[1]=P[1]=w.c2p(0,true)}else if(h==="x"){O[0]=P[0]=_.c2p(0,true)}b(v).attr("d","M"+P+"L"+O+"L"+S.substr(1)).call(ee.singleFillStyle)}else{b(v).attr("d",S+"Z").call(ee.singleFillStyle)}}}else if(p){if(o.fill.substr(0,6)==="tonext"&&S&&m){if(o.fill==="tonext"){b(p).attr("d",S+"Z"+m+"Z").call(ee.singleFillStyle)}else{b(p).attr("d",S+"L"+m.substr(1)+"Z").call(ee.singleFillStyle)}o._polygons=o._polygons.concat(T)}else{j(p);o._polygons=null}}o._prevRevpath=E;o._prevPolygons=R}else{if(v)j(v);else if(p)j(p);o._polygons=o._prevRevpath=o._prevPolygons=null}function H(e){return e.filter(function(e){return!e.gap&&e.vis})}function B(e){return e.filter(function(e){return e.vis})}function q(e){return e.filter(function(e){return!e.gap})}function U(e){return e.id}function Y(e){if(e.ids){return U}}function V(){return false}function G(e,t,r){var a,n,i;var o=r[0].trace;var s=te.hasMarkers(o);var l=te.hasText(o);var u=Y(o);var c=V;var f=V;if(s||l){var d=Q;var v=o.stackgroup;var p=v&&g._fullLayout._scatterStackOpts[_._id+w._id][v].stackgaps==="infer zero";if(o.marker.maxdisplayed||o._needsCull){d=p?B:H}else if(v&&!p){d=q}if(s)c=d;if(l)f=d}n=e.selectAll("path.point");a=n.data(c,u);var h=a.enter().append("path").classed("point",true);if(x){h.call(ee.pointStyle,o,g).call(ee.translatePoints,_,w).style("opacity",0).transition().style("opacity",1)}a.order();var m;if(s){m=ee.makePointStyleFns(o)}a.each(function(e){var t=Z.select(this);var r=b(t);i=ee.translatePoint(e,r,_,w);if(i){ee.singlePointStyle(e,r,o,m,g);if(y.layerClipId){ee.hideOutsideRangePoint(e,r,_,w,o.xcalendar,o.ycalendar)}if(o.customdata){t.classed("plotly-customdata",e.data!==null&&e.data!==undefined)}}else{r.remove()}});if(x){a.exit().transition().style("opacity",0).remove()}else{a.exit().remove()}n=t.selectAll("g");a=n.data(f,u);a.enter().append("g").classed("textpoint",true).append("text");a.order();a.each(function(e){var t=Z.select(this);var r=b(t.select("text"));i=ee.translatePoint(e,r,_,w);if(i){if(y.layerClipId){ee.hideOutsideRangePoint(e,t,_,w,o.xcalendar,o.ycalendar)}}else{t.remove()}});a.selectAll("text").call(ee.textPointStyle,o,g).each(function(e){var t=_.c2p(e.x);var r=w.c2p(e.y);Z.select(this).selectAll("tspan.line").each(function(){b(Z.select(this)).attr({x:t,y:r})})});a.exit().remove()}f.datum(n);d.datum(n);G(f,d,n);var W=o.cliponaxis===false;var $=W?null:y.layerClipId;ee.setClipUrl(f,$,g);ee.setClipUrl(d,$,g)}function ne(e,a,t,r,n){var i=t.xaxis;var o=t.yaxis;var s=Z.extent(J.simpleMap(i.range,i.r2c));var l=Z.extent(J.simpleMap(o.range,o.r2c));var u=r[0].trace;if(!te.hasMarkers(u))return;var c=u.marker.maxdisplayed;if(c===0)return;var f=r.filter(function(e){return e.x>=s[0]&&e.x<=s[1]&&e.y>=l[0]&&e.y<=l[1]});var d=Math.ceil(f.length/c);var v=0;n.forEach(function(e,t){var r=e[0].trace;if(te.hasMarkers(r)&&r.marker.maxdisplayed>0&&t<a){v++}});var p=Math.round(v*d/3+Math.floor(v/3)*d/7.1);r.forEach(function(e){delete e.vis});f.forEach(function(e,t){if(Math.round((t+p)%d)===0)e.vis=true})}},{"../../components/drawing":177,"../../lib":285,"../../lib/polygon":297,"../../registry":373,"./line_points":508,"./link_traces":510,"./subtypes":519,"@plotly/d3":20}],516:[function(e,t,r){"use strict";var v=e("./subtypes");t.exports=function e(t,r){var a=t.cd;var n=t.xaxis;var i=t.yaxis;var o=[];var s=a[0].trace;var l;var u;var c;var f;var d=!v.hasMarkers(s)&&!v.hasText(s);if(d)return[];if(r===false){for(l=0;l<a.length;l++){a[l].selected=0}}else{for(l=0;l<a.length;l++){u=a[l];c=n.c2p(u.x);f=i.c2p(u.y);if(u.i!==null&&r.contains([c,f],false,l,t)){o.push({pointNumber:u.i,x:n.c2d(u.x),y:i.c2d(u.y)});u.selected=1}else{u.selected=0}}}return o}},{"./subtypes":519}],517:[function(e,t,r){"use strict";var x=["orientation","groupnorm","stackgaps"];t.exports=function e(t,r,a,n){var i=a._scatterStackOpts;var o=n("stackgroup");if(o){var s=r.xaxis+r.yaxis;var l=i[s];if(!l)l=i[s]={};var u=l[o];var c=false;if(u){u.traces.push(r)}else{u=l[o]={traceIndices:[],traces:[r]};c=true}var f={orientation:r.x&&!r.y?"h":"v"};for(var d=0;d<x.length;d++){var v=x[d];var p=v+"Found";if(!u[p]){var h=t[v]!==undefined;var m=v==="orientation";if(h||c){u[v]=n(v,f[v]);if(m){u.fillDflt=u[v]==="h"?"tonextx":"tonexty"}if(h){u[p]=true;if(!c){delete u.traces[0][v];if(m){for(var g=0;g<u.traces.length-1;g++){var y=u.traces[g];if(y._input.fill!==y.fill){y.fill=u.fillDflt}}}}}}}}return u}}},{}],518:[function(e,t,r){"use strict";var n=e("@plotly/d3");var i=e("../../components/drawing");var o=e("../../registry");function a(a){var e=n.select(a).selectAll("g.trace.scatter");e.style("opacity",function(e){return e[0].trace.opacity});e.selectAll("g.points").each(function(e){var t=n.select(this);var r=e.trace||e[0].trace;s(t,r,a)});e.selectAll("g.text").each(function(e){var t=n.select(this);var r=e.trace||e[0].trace;l(t,r,a)});e.selectAll("g.trace path.js-line").call(i.lineGroupStyle);e.selectAll("g.trace path.js-fill").call(i.fillGroupStyle);o.getComponentMethod("errorbars","style")(e)}function s(e,t,r){i.pointStyle(e.selectAll("path.point"),t,r)}function l(e,t,r){i.textPointStyle(e.selectAll("text"),t,r)}function u(e,t,r){var a=t[0].trace;if(a.selectedpoints){i.selectedPointStyle(r.selectAll("path.point"),a);i.selectedTextStyle(r.selectAll("text"),a)}else{s(r,a,e);l(r,a,e)}}t.exports={style:a,stylePoints:s,styleText:l,styleOnSelect:u}},{"../../components/drawing":177,"../../registry":373,"@plotly/d3":20}],519:[function(e,t,r){"use strict";var a=e("../../lib");t.exports={hasLines:function(e){return e.visible&&e.mode&&e.mode.indexOf("lines")!==-1},hasMarkers:function(e){return e.visible&&(e.mode&&e.mode.indexOf("markers")!==-1||e.type==="splom")},hasText:function(e){return e.visible&&e.mode&&e.mode.indexOf("text")!==-1},isBubble:function(e){return a.isPlainObject(e.marker)&&a.isArrayOrTypedArray(e.marker.size)}}},{"../../lib":285}],520:[function(e,t,r){"use strict";var i=e("../../lib");t.exports=function(e,t,r,a,n){n=n||{};a("textposition");i.coerceFont(a,"textfont",r.font);if(!n.noSelect){a("selected.textfont.color");a("unselected.textfont.color")}}},{"../../lib":285}],521:[function(e,t,r){"use strict";var c=e("../../lib");var f=e("../../registry");t.exports=function e(t,r,a,n){var i=n("x");var o=n("y");var s;var l=f.getComponentMethod("calendars","handleTraceDefaults");l(t,r,["x","y"],a);if(i){var u=c.minRowLength(i);if(o){s=Math.min(u,c.minRowLength(o))}else{s=u;n("y0");n("dy")}}else{if(!o)return 0;s=c.minRowLength(o);n("x0");n("dx")}r._length=s;return s}},{"../../lib":285,"../../registry":373}],522:[function(e,t,r){"use strict";var a=e("../../plots/template_attributes").hovertemplateAttrs;var n=e("../../plots/template_attributes").texttemplateAttrs;var i=e("../scatter/attributes");var o=e("../../plots/attributes");var s=e("../../components/colorscale/attributes");var l=e("../../components/drawing/attributes").dash;var u=e("../../lib/extend").extendFlat;var c=i.marker;var f=i.line;var d=c.line;t.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:u({},i.mode,{dflt:"markers"}),text:u({},i.text,{}),texttemplate:n({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:u({},i.hovertext,{}),line:{color:f.color,width:f.width,dash:l,shape:u({},f.shape,{values:["linear","spline"]}),smoothing:f.smoothing,editType:"calc"},connectgaps:i.connectgaps,cliponaxis:i.cliponaxis,fill:u({},i.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:i.fillcolor,marker:u({symbol:c.symbol,opacity:c.opacity,maxdisplayed:c.maxdisplayed,size:c.size,sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,line:u({width:d.width,editType:"calc"},s("marker.line")),gradient:c.gradient,editType:"calc"},s("marker")),textfont:i.textfont,textposition:i.textposition,selected:i.selected,unselected:i.unselected,hoverinfo:u({},o.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:i.hoveron,hovertemplate:a()}},{"../../components/colorscale/attributes":162,"../../components/drawing/attributes":176,"../../lib/extend":279,"../../plots/attributes":327,"../../plots/template_attributes":368,"../scatter/attributes":494}],523:[function(e,t,r){"use strict";var _=e("fast-isnumeric");var w=e("../scatter/colorscale_calc");var T=e("../scatter/arrays_to_calcdata");var k=e("../scatter/calc_selection");var M=e("../scatter/calc").calcMarkerSize;var A=["a","b","c"];var S={a:["b","c"],b:["a","c"],c:["a","b"]};t.exports=function e(t,r){var a=t._fullLayout[r.subplot];var n=a.sum;var i=r.sum||n;var o={a:r.a,b:r.b,c:r.c};var s,l,u,c,f,d;for(s=0;s<A.length;s++){u=A[s];if(o[u])continue;f=o[S[u][0]];d=o[S[u][1]];c=new Array(f.length);for(l=0;l<f.length;l++){c[l]=i-f[l]-d[l]}o[u]=c}var v=r._length;var p=new Array(v);var h,m,g,y,x,b;for(s=0;s<v;s++){h=o.a[s];m=o.b[s];g=o.c[s];if(_(h)&&_(m)&&_(g)){h=+h;m=+m;g=+g;y=n/(h+m+g);if(y!==1){h*=y;m*=y;g*=y}b=h;x=g-m;p[s]={x:x,y:b,a:h,b:m,c:g}}else p[s]={x:false,y:false}}M(r,v);w(t,r);T(p,r);k(p,r);return p}},{"../scatter/arrays_to_calcdata":493,"../scatter/calc":495,"../scatter/calc_selection":496,"../scatter/colorscale_calc":497,"fast-isnumeric":31}],524:[function(e,t,r){"use strict";var d=e("../../lib");var v=e("../scatter/constants");var p=e("../scatter/subtypes");var h=e("../scatter/marker_defaults");var m=e("../scatter/line_defaults");var g=e("../scatter/line_shape_defaults");var y=e("../scatter/text_defaults");var x=e("../scatter/fillcolor_defaults");var b=e("./attributes");t.exports=function e(r,a,t,n){function i(e,t){return d.coerce(r,a,b,e,t)}var o=i("a");var s=i("b");var l=i("c");var u;if(o){u=o.length;if(s){u=Math.min(u,s.length);if(l)u=Math.min(u,l.length)}else if(l)u=Math.min(u,l.length);else u=0}else if(s&&l){u=Math.min(s.length,l.length)}if(!u){a.visible=false;return}a._length=u;i("sum");i("text");i("hovertext");if(a.hoveron!=="fills")i("hovertemplate");var c=u<v.PTS_LINESONLY?"lines+markers":"lines";i("mode",c);if(p.hasLines(a)){m(r,a,t,n,i);g(r,a,i);i("connectgaps")}if(p.hasMarkers(a)){h(r,a,t,n,i,{gradient:true})}if(p.hasText(a)){i("texttemplate");y(r,a,n,i)}var f=[];if(p.hasMarkers(a)||p.hasText(a)){i("cliponaxis");i("marker.maxdisplayed");f.push("points")}i("fill");if(a.fill!=="none"){x(r,a,t,i);if(!p.hasLines(a))g(r,a,i)}if(a.fill==="tonext"||a.fill==="toself"){f.push("fills")}i("hoveron",f.join("+")||"points");d.coerceSelectionMarkerOpacity(a,i)}},{"../../lib":285,"../scatter/constants":498,"../scatter/fillcolor_defaults":502,"../scatter/line_defaults":507,"../scatter/line_shape_defaults":509,"../scatter/marker_defaults":513,"../scatter/subtypes":519,"../scatter/text_defaults":520,"./attributes":522}],525:[function(e,t,r){"use strict";t.exports=function e(t,r,a,n,i){if(r.xa)t.xaxis=r.xa;if(r.ya)t.yaxis=r.ya;if(n[i]){var o=n[i];t.a=o.a;t.b=o.b;t.c=o.c}else{t.a=r.a;t.b=r.b;t.c=r.c}return t}},{}],526:[function(e,t,r){"use strict";var o=e("../../plots/cartesian/axes");t.exports=function e(t,r,a){var n={};var i=a[r.subplot]._subplot;n.aLabel=o.tickText(i.aaxis,t.a,true).text;n.bLabel=o.tickText(i.baxis,t.b,true).text;n.cLabel=o.tickText(i.caxis,t.c,true).text;return n}},{"../../plots/cartesian/axes":331}],527:[function(e,t,r){"use strict";var b=e("../scatter/hover");t.exports=function e(t,r,a,n){var i=b(t,r,a,n);if(!i||i[0].index===false)return;var o=i[0];if(o.index===undefined){var s=1-o.y0/t.ya._length;var l=t.xa._length;var u=l*s/2;var c=l-u;o.x0=Math.max(Math.min(o.x0,c),u);o.x1=Math.max(Math.min(o.x1,c),u);return i}var f=o.cd[o.index];var d=o.trace;var v=o.subplot;o.a=f.a;o.b=f.b;o.c=f.c;o.xLabelVal=undefined;o.yLabelVal=undefined;var p={};p[d.subplot]={_subplot:v};var h=d._module.formatLabels(f,d,p);o.aLabel=h.aLabel;o.bLabel=h.bLabel;o.cLabel=h.cLabel;var m=f.hi||d.hoverinfo;var g=[];function y(e,t){g.push(e._hovertitle+": "+t)}if(!d.hovertemplate){var x=m.split("+");if(x.indexOf("all")!==-1)x=["a","b","c"];if(x.indexOf("a")!==-1)y(v.aaxis,o.aLabel);if(x.indexOf("b")!==-1)y(v.baxis,o.bLabel);if(x.indexOf("c")!==-1)y(v.caxis,o.cLabel)}o.extraText=g.join("<br>");o.hovertemplate=d.hovertemplate;return i}},{"../scatter/hover":505}],528:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../scatter/select"),eventData:e("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:e("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":369,"../scatter/marker_colorbar":512,"../scatter/select":516,"../scatter/style":518,"./attributes":522,"./calc":523,"./defaults":524,"./event_data":525,"./format_labels":526,"./hover":527,"./plot":529}],529:[function(e,t,r){"use strict";var s=e("../scatter/plot");t.exports=function e(t,r,a){var n=r.plotContainer;n.select(".scatterlayer").selectAll("*").remove();var i={xaxis:r.xaxis,yaxis:r.yaxis,plot:n,layerClipId:r._hasClipOnAxisFalse?r.clipIdRelative:null};var o=r.layers.frontplot.select("g.scatterlayer");s(t,i,a,o)}},{"../scatter/plot":515}],530:[function(e,t,r){"use strict";var a=e("../box/attributes");var n=e("../../lib/extend").extendFlat;var i=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;t.exports={y:a.y,x:a.x,x0:a.x0,y0:a.y0,xhoverformat:i("x"),yhoverformat:i("y"),name:n({},a.name,{}),orientation:n({},a.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:a.fillcolor,points:n({},a.boxpoints,{}),jitter:n({},a.jitter,{}),pointpos:n({},a.pointpos,{}),width:n({},a.width,{}),marker:a.marker,text:a.text,hovertext:a.hovertext,hovertemplate:a.hovertemplate,box:{visible:{valType:"boolean",dflt:false,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:false,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:a.offsetgroup,alignmentgroup:a.alignmentgroup,selected:a.selected,unselected:a.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":279,"../../plots/cartesian/axis_format_attributes":334,"../box/attributes":400}],531:[function(e,t,r){"use strict";var A=e("../../lib");var S=e("../../plots/cartesian/axes");var E=e("../box/calc");var L=e("./helpers");var f=e("../../constants/numerical").BADNUM;t.exports=function e(t,r){var a=E(t,r);if(a[0].t.empty)return a;var n=t._fullLayout;var i=S.getFromId(t,r[r.orientation==="h"?"xaxis":"yaxis"]);var o=Infinity;var s=-Infinity;var l=0;var u=0;for(var c=0;c<a.length;c++){var f=a[c];var d=f.pts.map(L.extractVal);var v=f.bandwidth=C(r,f,d);var p=f.span=D(r,f,i,v);if(f.min===f.max&&v===0){p=f.span=[f.min,f.max];f.density=[{v:1,t:p[0]}];f.bandwidth=v;l=Math.max(l,1)}else{var h=p[1]-p[0];var m=Math.ceil(h/(v/3));var g=h/m;if(!isFinite(g)||!isFinite(m)){A.error("Something went wrong with computing the violin span");a[0].t.empty=true;return a}var y=L.makeKDE(f,r,d);f.density=new Array(m);for(var x=0,b=p[0];b<p[1]+g/2;x++,b+=g){var _=y(b);f.density[x]={v:_,t:b};l=Math.max(l,_)}}u=Math.max(u,d.length);o=Math.min(o,p[0]);s=Math.max(s,p[1])}var w=S.findExtremes(i,[o,s],{padded:true});r._extremes[i._id]=w;if(r.width){a[0].t.maxKDE=l}else{var T=n._violinScaleGroupStats;var k=r.scalegroup;var M=T[k];if(M){M.maxKDE=Math.max(M.maxKDE,l);M.maxCount=Math.max(M.maxCount,u)}else{T[k]={maxKDE:l,maxCount:u}}}a[0].t.labels.kde=A._(t,"kde:");return a};function o(e,t,r){var a=Math.min(t,r/1.349);return 1.059*a*Math.pow(e,-.2)}function C(e,t,r){var a=t.max-t.min;if(!a){if(e.bandwidth){return e.bandwidth}else{return 0}}if(e.bandwidth){return Math.max(e.bandwidth,a/1e4)}else{var n=r.length;var i=A.stdev(r,n-1,t.mean);return Math.max(o(n,i,t.q3-t.q1),a/100)}}function D(a,n,i,e){var t=a.spanmode;var o=a.span||[];var r=[n.min,n.max];var s=[n.min-2*e,n.max+2*e];var l;function u(e){var t=o[e];var r=i.type==="multicategory"?i.r2c(t):i.d2c(t,0,a[n.valLetter+"calendar"]);return r===f?s[e]:r}if(t==="soft"){l=s}else if(t==="hard"){l=r}else{l=[u(0),u(1)]}var c={type:"linear",range:l};S.setConvert(c);c.cleanRange();return l}},{"../../constants/numerical":265,"../../lib":285,"../../plots/cartesian/axes":331,"../box/calc":401,"./helpers":534}],532:[function(e,t,r){"use strict";var p=e("../box/cross_trace_calc").setPositionOffset;var h=["v","h"];t.exports=function e(t,r){var a=t.calcdata;var n=r.xaxis;var i=r.yaxis;for(var o=0;o<h.length;o++){var s=h[o];var l=s==="h"?i:n;var u=[];for(var c=0;c<a.length;c++){var f=a[c];var d=f[0].t;var v=f[0].trace;if(v.visible===true&&v.type==="violin"&&!d.empty&&v.orientation===s&&v.xaxis===n._id&&v.yaxis===i._id){u.push(c)}}p("violin",t,u,l)}}},{"../box/cross_trace_calc":402}],533:[function(e,t,r){"use strict";var _=e("../../lib");var w=e("../../components/color");var T=e("../box/defaults");var k=e("./attributes");t.exports=function e(r,a,t,n){function i(e,t){return _.coerce(r,a,k,e,t)}function o(e,t){return _.coerce2(r,a,k,e,t)}T.handleSampleDefaults(r,a,i,n);if(a.visible===false)return;i("bandwidth");i("side");var s=i("width");if(!s){i("scalegroup",a.name);i("scalemode")}var l=i("span");var u;if(Array.isArray(l))u="manual";i("spanmode",u);var c=i("line.color",(r.marker||{}).color||t);var f=i("line.width");var d=i("fillcolor",w.addOpacity(a.line.color,.5));T.handlePointsDefaults(r,a,i,{prefix:""});var v=o("box.width");var p=o("box.fillcolor",d);var h=o("box.line.color",c);var m=o("box.line.width",f);var g=i("box.visible",Boolean(v||p||h||m));if(!g)a.box={visible:false};var y=o("meanline.color",c);var x=o("meanline.width",f);var b=i("meanline.visible",Boolean(y||x));if(!b)a.meanline={visible:false}}},{"../../components/color":155,"../../lib":285,"../box/defaults":403,"./attributes":530}],534:[function(e,t,i){"use strict";var u=e("../../lib");var r={gaussian:function(e){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*e*e)}};i.makeKDE=function(e,t,a){var n=a.length;var i=r.gaussian;var o=e.bandwidth;var s=1/(n*o);return function(e){var t=0;for(var r=0;r<n;r++){t+=i((e-a[r])/o)}return s*t}};i.getPositionOnKdePath=function(e,t,r){var a,n;if(t.orientation==="h"){a="y";n="x"}else{a="x";n="y"}var i=u.findPointOnPath(e.path,r,n,{pathLength:e.pathLength});var o=e.posCenterPx;var s=i[a];var l=t.side==="both"?2*o-s:o;return[s,l]};i.getKdeValue=function(e,t,r){var a=e.pts.map(i.extractVal);var n=i.makeKDE(e,t,a);return n(r)/e.posDensityScale};i.extractVal=function(e){return e.v}},{"../../lib":285}],535:[function(e,t,r){"use strict";var O=e("../../lib");var I=e("../../plots/cartesian/axes");var P=e("../box/hover");var R=e("./helpers");t.exports=function e(t,r,a,n,i){if(!i)i={};var o=i.hoverLayer;var s=t.cd;var l=s[0].trace;var u=l.hoveron;var c=u.indexOf("violins")!==-1;var f=u.indexOf("kde")!==-1;var d=[];var v;var p;if(c||f){var h=P.hoverOnBoxes(t,r,a,n);if(f&&h.length>0){var m=t.xa;var g=t.ya;var y,x,b,_,w;if(l.orientation==="h"){w=r;y="y";b=g;x="x";_=m}else{w=a;y="x";b=m;x="y";_=g}var T=s[t.index];if(w>=T.span[0]&&w<=T.span[1]){var k=O.extendFlat({},t);var M=_.c2p(w,true);var A=R.getKdeValue(T,l,w);var S=R.getPositionOnKdePath(T,l,M);var E=b._offset;var L=b._length;k[y+"0"]=S[0];k[y+"1"]=S[1];k[x+"0"]=k[x+"1"]=M;k[x+"Label"]=x+": "+I.hoverLabelText(_,w,l[x+"hoverformat"])+", "+s[0].t.labels.kde+" "+A.toFixed(3);k.spikeDistance=h[0].spikeDistance;var C=y+"Spike";k[C]=h[0][C];h[0].spikeDistance=undefined;h[0][C]=undefined;k.hovertemplate=false;d.push(k);p={stroke:t.color};p[y+"1"]=O.constrain(E+S[0],E,E+L);p[y+"2"]=O.constrain(E+S[1],E,E+L);p[x+"1"]=p[x+"2"]=_._offset+M}}if(c){d=d.concat(h)}}if(u.indexOf("points")!==-1){v=P.hoverOnPoints(t,r,a)}var D=o.selectAll(".violinline-"+l.uid).data(p?[0]:[]);D.enter().append("line").classed("violinline-"+l.uid,true).attr("stroke-width",1.5);D.exit().remove();D.attr(p);if(n==="closest"){if(v)return[v];return d}if(v){d.push(v);return d}return d}},{"../../lib":285,"../../plots/cartesian/axes":331,"../box/hover":405,"./helpers":534}],536:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../box/select"),moduleType:"trace",name:"violin",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":345,"../box/defaults":403,"../box/select":410,"../scatter/style":518,"./attributes":530,"./calc":531,"./cross_trace_calc":532,"./defaults":533,"./hover":535,"./layout_attributes":537,"./layout_defaults":538,"./plot":539,"./style":540}],537:[function(e,t,r){"use strict";var a=e("../box/layout_attributes");var n=e("../../lib").extendFlat;t.exports={violinmode:n({},a.boxmode,{}),violingap:n({},a.boxgap,{}),violingroupgap:n({},a.boxgroupgap,{})}},{"../../lib":285,"../box/layout_attributes":407}],538:[function(e,t,r){"use strict";var i=e("../../lib");var o=e("./layout_attributes");var s=e("../box/layout_defaults");t.exports=function e(r,a,t){function n(e,t){return i.coerce(r,a,o,e,t)}s._supply(r,a,t,n,"violin")}},{"../../lib":285,"../box/layout_defaults":408,"./layout_attributes":537}],539:[function(e,t,r){"use strict";var E=e("@plotly/d3");var p=e("../../lib");var n=e("../../components/drawing");var h=e("../box/plot");var i=e("../scatter/line_points");var m=e("./helpers");t.exports=function e(t,f,r,a){var A=t._fullLayout;var d=f.xaxis;var v=f.yaxis;function S(e){var t=i(e,{xaxis:d,yaxis:v,connectGaps:true,baseTolerance:.75,shape:"spline",simplify:true,linearized:true});return n.smoothopen(t[0],1)}p.makeTraceGroups(a,r,"trace violins").each(function(e){var t=E.select(this);var r=e[0];var g=r.t;var y=r.trace;if(y.visible!==true||g.empty){t.remove();return}var x=g.bPos;var b=g.bdPos;var _=f[g.valLetter+"axis"];var w=f[g.posLetter+"axis"];var T=y.side==="both";var k=T||y.side==="positive";var M=T||y.side==="negative";var a=t.selectAll("path.violin").data(p.identity);a.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin");a.exit().remove();a.each(function(e){var t=E.select(this);var r=e.density;var a=r.length;var n=w.c2l(e.pos+x,true);var i=w.l2p(n);var o;if(y.width){o=g.maxKDE/b}else{var s=A._violinScaleGroupStats[y.scalegroup];o=y.scalemode==="count"?s.maxKDE/b*(s.maxCount/e.pts.length):s.maxKDE/b}var l,u,c;var f,d,v,p;if(k){v=new Array(a);for(f=0;f<a;f++){p=v[f]={};p[g.posLetter]=n+r[f].v/o;p[g.valLetter]=_.c2l(r[f].t,true)}l=S(v)}if(M){v=new Array(a);for(d=0,f=a-1;d<a;d++,f--){p=v[d]={};p[g.posLetter]=n-r[f].v/o;p[g.valLetter]=_.c2l(r[f].t,true)}u=S(v)}if(T){c=l+"L"+u.substr(1)+"Z"}else{var h=[i,_.c2p(r[0].t)];var m=[i,_.c2p(r[a-1].t)];if(y.orientation==="h"){h.reverse();m.reverse()}if(k){c="M"+h+"L"+l.substr(1)+"L"+m}else{c="M"+m+"L"+u.substr(1)+"L"+h}}t.attr("d",c);e.posCenterPx=i;e.posDensityScale=o*b;e.path=t.node();e.pathLength=e.path.getTotalLength()/(T?2:1)});var n=y.box;var i=n.width;var o=(n.line||{}).width;var s;var l;if(T){s=b*i;l=0}else if(k){s=[0,b*i/2];l=o*{x:1,y:-1}[g.posLetter]}else{s=[b*i/2,0];l=o*{x:-1,y:1}[g.posLetter]}h.plotBoxAndWhiskers(t,{pos:w,val:_},y,{bPos:x,bdPos:s,bPosPxOffset:l});h.plotBoxMean(t,{pos:w,val:_},y,{bPos:x,bdPos:s,bPosPxOffset:l});var u;if(!y.box.visible&&y.meanline.visible){u=p.identity}var c=t.selectAll("path.meanline").data(u||[]);c.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke");c.exit().remove();c.each(function(e){var t=_.c2p(e.mean,true);var r=m.getPositionOnKdePath(e,y,t);E.select(this).attr("d",y.orientation==="h"?"M"+t+","+r[0]+"V"+r[1]:"M"+r[0]+","+t+"H"+r[1])});h.plotPoints(t,{x:d,y:v},y,g)})}},{"../../components/drawing":177,"../../lib":285,"../box/plot":409,"../scatter/line_points":508,"./helpers":534,"@plotly/d3":20}],540:[function(e,t,r){"use strict";var u=e("@plotly/d3");var c=e("../../components/color");var f=e("../scatter/style").stylePoints;t.exports=function e(l){var t=u.select(l).selectAll("g.trace.violins");t.style("opacity",function(e){return e[0].trace.opacity});t.each(function(e){var t=e[0].trace;var r=u.select(this);var a=t.box||{};var n=a.line||{};var i=t.meanline||{};var o=i.width;r.selectAll("path.violin").style("stroke-width",t.line.width+"px").call(c.stroke,t.line.color).call(c.fill,t.fillcolor);r.selectAll("path.box").style("stroke-width",n.width+"px").call(c.stroke,n.color).call(c.fill,a.fillcolor);var s={"stroke-width":o+"px","stroke-dasharray":2*o+"px,"+o+"px"};r.selectAll("path.mean").style(s).call(c.stroke,i.color);r.selectAll("path.meanline").style(s).call(c.stroke,i.color);f(r,t,l)})}},{"../../components/color":155,"../scatter/style":518,"@plotly/d3":20}],541:[function(e,t,r){"use strict";var f=e("../plots/cartesian/axes");var m=e("../lib");var g=e("../plot_api/plot_schema");var h=e("./helpers").pointsAccessorFunction;var d=e("../constants/numerical").BADNUM;r.moduleType="transform";r.name="aggregate";var y=r.attributes={enabled:{valType:"boolean",dflt:true,editType:"calc"},groups:{valType:"string",strict:true,noBlank:true,arrayOk:true,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:true,editType:"calc"},editType:"calc"},editType:"calc"};var x=y.aggregations;r.supplyDefaults=function(r,e){var a={};var n;function t(e,t){return m.coerce(r,a,y,e,t)}var i=t("enabled");if(!i)return a;var o=g.findArrayAttributes(e);var s={};for(n=0;n<o.length;n++)s[o[n]]=1;var l=t("groups");if(!Array.isArray(l)){if(!s[l]){a.enabled=false;return a}s[l]=0}var u=r.aggregations||[];var c=a.aggregations=new Array(u.length);var f;function d(e,t){return m.coerce(u[n],f,x,e,t)}for(n=0;n<u.length;n++){f={_index:n};var v=d("target");var p=d("func");var h=d("enabled");if(h&&v&&(s[v]||p==="count"&&s[v]===undefined)){if(p==="stddev")d("funcmode");s[v]=0;c[n]=f}else c[n]={enabled:false,_index:n}}for(n=0;n<o.length;n++){if(s[o[n]]){c.push({target:o[n],func:x.func.dflt,enabled:true,_index:-1})}}return a};r.calcTransform=function(e,t,r){if(!r.enabled)return;var a=r.groups;var n=m.getTargetArray(t,{target:a});if(!n)return;var i,o,s,l;var u={};var c={};var f=[];var d=h(t.transforms,r);var v=n.length;if(t._length)v=Math.min(v,t._length);for(i=0;i<v;i++){o=n[i];s=u[o];if(s===undefined){u[o]=f.length;l=[i];f.push(l);c[u[o]]=d(i)}else{f[s].push(i);c[u[o]]=(c[u[o]]||[]).concat(d(i))}}r._indexToPoints=c;var p=r.aggregations;for(i=0;i<p.length;i++){b(e,t,f,p[i])}if(typeof a==="string"){b(e,t,f,{target:a,func:"first",enabled:true})}t._length=f.length};function b(e,t,r,a){if(!a.enabled)return;var n=a.target;var i=m.nestedProperty(t,n);var o=i.get();var s=f.getDataConversions(e,t,n,o);var l=v(a,s);var u=new Array(r.length);for(var c=0;c<r.length;c++){u[c]=l(o,r[c])}i.set(u);if(a.func==="count"){m.pushUnique(t._arrayAttrs,n)}}function v(c,e){var t=c.func;var f=e.d2c;var l=e.c2d;switch(t){case"count":return a;case"first":return n;case"last":return i;case"sum":return function(e,t){var r=0;for(var a=0;a<t.length;a++){var n=f(e[t[a]]);if(n!==d)r+=n}return l(r)};case"avg":return function(e,t){var r=0;var a=0;for(var n=0;n<t.length;n++){var i=f(e[t[n]]);if(i!==d){r+=i;a++}}return a?l(r/a):d};case"min":return function(e,t){var r=Infinity;for(var a=0;a<t.length;a++){var n=f(e[t[a]]);if(n!==d)r=Math.min(r,n)}return r===Infinity?d:l(r)};case"max":return function(e,t){var r=-Infinity;for(var a=0;a<t.length;a++){var n=f(e[t[a]]);if(n!==d)r=Math.max(r,n)}return r===-Infinity?d:l(r)};case"range":return function(e,t){var r=Infinity;var a=-Infinity;for(var n=0;n<t.length;n++){var i=f(e[t[n]]);if(i!==d){r=Math.min(r,i);a=Math.max(a,i)}}return a===-Infinity||r===Infinity?d:l(a-r)};case"change":return function(e,t){var r=f(e[t[0]]);var a=f(e[t[t.length-1]]);return r===d||a===d?d:l(a-r)};case"median":return function(e,t){var r=[];for(var a=0;a<t.length;a++){var n=f(e[t[a]]);if(n!==d)r.push(n)}if(!r.length)return d;r.sort(m.sorterAsc);var i=(r.length-1)/2;return l((r[Math.floor(i)]+r[Math.ceil(i)])/2)};case"mode":return function(e,t){var r={};var a=0;var n=d;for(var i=0;i<t.length;i++){var o=f(e[t[i]]);if(o!==d){var s=r[o]=(r[o]||0)+1;if(s>a){a=s;n=o}}}return a?l(n):d};case"rms":return function(e,t){var r=0;var a=0;for(var n=0;n<t.length;n++){var i=f(e[t[n]]);if(i!==d){r+=i*i;a++}}return a?l(Math.sqrt(r/a)):d};case"stddev":return function(e,t){var r=0;var a=0;var n=1;var i=d;var o;for(o=0;o<t.length&&i===d;o++){i=f(e[t[o]])}if(i===d)return d;for(;o<t.length;o++){var s=f(e[t[o]]);if(s!==d){var l=s-i;r+=l;a+=l*l;n++}}var u=c.funcmode==="sample"?n-1:n;if(!u)return 0;return Math.sqrt((a-r*r/n)/u)}}}function a(e,t){return t.length}function n(e,t){return e[t[0]]}function i(e,t){return e[t[t.length-1]]}},{"../constants/numerical":265,"../lib":285,"../plot_api/plot_schema":319,"../plots/cartesian/axes":331,"./helpers":544}],542:[function(e,t,o){"use strict";var _=e("../lib");var s=e("../registry");var w=e("../plots/cartesian/axes");var T=e("./helpers").pointsAccessorFunction;var r=e("../constants/filter_ops");var c=r.COMPARISON_OPS;var f=r.INTERVAL_OPS;var d=r.SET_OPS;o.moduleType="transform";o.name="filter";o.attributes={enabled:{valType:"boolean",dflt:true,editType:"calc"},target:{valType:"string",strict:true,noBlank:true,arrayOk:true,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(c).concat(f).concat(d),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:false,editType:"calc"},editType:"calc"};o.supplyDefaults=function(r){var a={};function e(e,t){return _.coerce(r,a,o.attributes,e,t)}var t=e("enabled");if(t){var n=e("target");if(_.isArrayOrTypedArray(n)&&n.length===0){a.enabled=false;return a}e("preservegaps");e("operation");e("value");var i=s.getComponentMethod("calendars","handleDefaults");i(r,a,"valuecalendar",null);i(r,a,"targetcalendar",null)}return a};o.calcTransform=function(e,n,t){if(!t.enabled)return;var r=_.getTargetArray(n,t);if(!r)return;var a=t.target;var i=r.length;if(n._length)i=Math.min(i,n._length);var o=t.targetcalendar;var s=n._arrayAttrs;var l=t.preservegaps;if(typeof a==="string"){var u=_.nestedProperty(n,a+"calendar").get();if(u)o=u}var c=w.getDataToCoordFunc(e,n,a,r);var f=k(t,c,o);var d={};var v={};var p=0;function h(e,t){for(var r=0;r<s.length;r++){var a=_.nestedProperty(n,s[r]);e(a,t)}}var m;var g;if(l){m=function(e){d[e.astr]=_.extendDeep([],e.get());e.set(new Array(i))};g=function(e,t){var r=d[e.astr][t];e.get()[t]=r}}else{m=function(e){d[e.astr]=_.extendDeep([],e.get());e.set([])};g=function(e,t){var r=d[e.astr][t];e.get().push(r)}}h(m);var y=T(n.transforms,t);for(var x=0;x<i;x++){var b=f(r[x]);if(b){h(g,x);v[p++]=y(x)}else if(l)p++}t._indexToPoints=v;n._length=p};function k(t,r,a){var n=t.operation;var e=t.value;var i=Array.isArray(e);function o(e){return e.indexOf(n)!==-1}var s=function(e){return r(e,0,t.valuecalendar)};var l=function(e){return r(e,0,a)};var u;if(o(c)){u=i?s(e[0]):s(e)}else if(o(f)){u=i?[s(e[0]),s(e[1])]:[s(e),s(e)]}else if(o(d)){u=i?e.map(s):[s(e)]}switch(n){case"=":return function(e){return l(e)===u};case"!=":return function(e){return l(e)!==u};case"<":return function(e){return l(e)<u};case"<=":return function(e){return l(e)<=u};case">":return function(e){return l(e)>u};case">=":return function(e){return l(e)>=u};case"[]":return function(e){var t=l(e);return t>=u[0]&&t<=u[1]};case"()":return function(e){var t=l(e);return t>u[0]&&t<u[1]};case"[)":return function(e){var t=l(e);return t>=u[0]&&t<u[1]};case"(]":return function(e){var t=l(e);return t>u[0]&&t<=u[1]};case"][":return function(e){var t=l(e);return t<=u[0]||t>=u[1]};case")(":return function(e){var t=l(e);return t<u[0]||t>u[1]};case"](":return function(e){var t=l(e);return t<=u[0]||t>u[1]};case")[":return function(e){var t=l(e);return t<u[0]||t>=u[1]};case"{}":return function(e){return u.indexOf(l(e))!==-1};case"}{":return function(e){return u.indexOf(l(e))===-1}}}},{"../constants/filter_ops":263,"../lib":285,"../plots/cartesian/axes":331,"../registry":373,"./helpers":544}],543:[function(e,t,f){"use strict";var A=e("../lib");var S=e("../plot_api/plot_schema");var E=e("../plots/plots");var L=e("./helpers").pointsAccessorFunction;f.moduleType="transform";f.name="groupby";f.attributes={enabled:{valType:"boolean",dflt:true,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:true},editType:"calc"},editType:"calc"};f.supplyDefaults=function(r,e,t){var a;var n={};function i(e,t){return A.coerce(r,n,f.attributes,e,t)}var o=i("enabled");if(!o)return n;i("groups");i("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var s=r.styles;var l=n.styles=[];if(s){for(a=0;a<s.length;a++){var u=l[a]={};A.coerce(s[a],l[a],f.attributes.styles,"target");var c=A.coerce(s[a],l[a],f.attributes.styles,"value");if(A.isPlainObject(c))u.value=A.extendDeep({},c);else if(c)delete u.value}}return n};f.transform=function(e,t){var r,a,n;var i=[];for(a=0;a<e.length;a++){r=o(e[a],t);for(n=0;n<r.length;n++){i.push(r[n])}}return i};function o(e,t){var r,a,n,i,o,s,l,u,c;var f;var d=t.transform;var v=t.transformIndex;var p=e.transforms[v].groups;var h=L(e.transforms,d);if(!A.isArrayOrTypedArray(p)||p.length===0){return[e]}var m=A.filterUnique(p);var g=new Array(m.length);var y=p.length;var x=S.findArrayAttributes(e);var b=d.styles||[];var _={};for(r=0;r<b.length;r++){_[b[r].target]=b[r].value}if(d.styles){f=A.keyedContainer(d,"styles","target","value.name")}var w={};var T={};for(r=0;r<m.length;r++){s=m[r];w[s]=r;T[s]=0;l=g[r]=A.extendDeepNoArrays({},e);l._group=s;l.transforms[v]._indexToPoints={};var k=null;if(f){k=f.get(s)}if(k||k===""){l.name=k}else{l.name=A.templateString(d.nameformat,{trace:e.name,group:s})}u=l.transforms;l.transforms=[];for(a=0;a<u.length;a++){l.transforms[a]=A.extendDeepNoArrays({},u[a])}for(a=0;a<x.length;a++){A.nestedProperty(l,x[a]).set([])}}for(n=0;n<x.length;n++){i=x[n];for(a=0,c=[];a<m.length;a++){c[a]=A.nestedProperty(g[a],i).get()}o=A.nestedProperty(e,i).get();for(a=0;a<y;a++){c[w[p[a]]].push(o[a])}}for(a=0;a<y;a++){l=g[w[p[a]]];var M=l.transforms[v]._indexToPoints;M[T[p[a]]]=h(a);T[p[a]]++}for(r=0;r<m.length;r++){s=m[r];l=g[r];E.clearExpandedTraceDefaultColors(l);l=A.extendDeepNoArrays(l,_[s]||{})}return g}},{"../lib":285,"../plot_api/plot_schema":319,"../plots/plots":366,"./helpers":544}],544:[function(e,t,r){"use strict";r.pointsAccessorFunction=function(e,t){var r;var a;for(var n=0;n<e.length;n++){r=e[n];if(r===t)break;if(!r._indexToPoints||r.enabled===false)continue;a=r._indexToPoints}var i=a?function(e){return a[e]}:function(e){return[e]};return i}},{}],545:[function(e,t,n){"use strict";var m=e("../lib");var g=e("../plots/cartesian/axes");var y=e("./helpers").pointsAccessorFunction;var i=e("../constants/numerical").BADNUM;n.moduleType="transform";n.name="sort";n.attributes={enabled:{valType:"boolean",dflt:true,editType:"calc"},target:{valType:"string",strict:true,noBlank:true,arrayOk:true,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"};n.supplyDefaults=function(r){var a={};function e(e,t){return m.coerce(r,a,n.attributes,e,t)}var t=e("enabled");if(t){e("target");e("order")}return a};n.calcTransform=function(e,t,r){if(!r.enabled)return;var a=m.getTargetArray(t,r);if(!a)return;var n=r.target;var i=a.length;if(t._length)i=Math.min(i,t._length);var o=t._arrayAttrs;var s=g.getDataToCoordFunc(e,t,n,a);var l=x(r,a,s,i);var u=y(t.transforms,r);var c={};var f,d;for(f=0;f<o.length;f++){var v=m.nestedProperty(t,o[f]);var p=v.get();var h=new Array(i);for(d=0;d<i;d++){h[d]=p[l[d]]}v.set(h)}for(d=0;d<i;d++){c[d]=u(l[d])}r._indexToPoints=c;t._length=i};function x(e,t,r,a){var n=new Array(a);var i=new Array(a);var o;for(o=0;o<a;o++){n[o]={v:t[o],i:o}}n.sort(s(e,r));for(o=0;o<a;o++){i[o]=n[o].i}return i}function s(e,n){switch(e.order){case"ascending":return function(e,t){var r=n(e.v);var a=n(t.v);if(r===i){return 1}if(a===i){return-1}return r-a};case"descending":return function(e,t){var r=n(e.v);var a=n(t.v);if(r===i){return 1}if(a===i){return-1}return a-r}}}},{"../constants/numerical":265,"../lib":285,"../plots/cartesian/axes":331,"./helpers":544}],546:[function(e,t,r){"use strict";r.version="2.2.0"},{}]},{},[15])(15)});(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?t(exports):typeof define==="function"&&define.amd?define(["exports"],t):(e=typeof globalThis!=="undefined"?globalThis:e||self,t(e.Popper={}))})(this,function(e){"use strict";function E(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function M(e){if(e==null){return window}if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t?t.defaultView||window:window}return e}function u(e){var t=M(e);var r=t.pageXOffset;var a=t.pageYOffset;return{scrollLeft:r,scrollTop:a}}function L(e){var t=M(e).Element;return e instanceof t||e instanceof Element}function l(e){var t=M(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function n(e){if(typeof ShadowRoot==="undefined"){return false}var t=M(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function t(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function c(e){if(e===M(e)||!l(e)){return u(e)}else{return t(e)}}function f(e){return e?(e.nodeName||"").toLowerCase():null}function C(e){return((L(e)?e.ownerDocument:e.document)||window.document).documentElement}function d(e){return E(C(e)).left+u(e).scrollLeft}function A(e){return M(e).getComputedStyle(e)}function v(e){var t=A(e),r=t.overflow,a=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+n+a)}function x(e,t,r){if(r===void 0){r=false}var a=C(t);var n=E(e);var i=l(t);var o={scrollLeft:0,scrollTop:0};var s={x:0,y:0};if(i||!i&&!r){if(f(t)!=="body"||v(a)){o=c(t)}if(l(t)){s=E(t);s.x+=t.clientLeft;s.y+=t.clientTop}else if(a){s.x=d(a)}}return{x:n.left+o.scrollLeft-s.x,y:n.top+o.scrollTop-s.y,width:n.width,height:n.height}}function re(e){var t=E(e);var r=e.offsetWidth;var a=e.offsetHeight;if(Math.abs(t.width-r)<=1){r=t.width}if(Math.abs(t.height-a)<=1){a=t.height}return{x:e.offsetLeft,y:e.offsetTop,width:r,height:a}}function p(e){if(f(e)==="html"){return e}return e.assignedSlot||e.parentNode||(n(e)?e.host:null)||C(e)}function h(e){if(["html","body","#document"].indexOf(f(e))>=0){return e.ownerDocument.body}if(l(e)&&v(e)){return e}return h(p(e))}function b(e,t){var r;if(t===void 0){t=[]}var a=h(e);var n=a===((r=e.ownerDocument)==null?void 0:r.body);var i=M(a);var o=n?[i].concat(i.visualViewport||[],v(a)?a:[]):a;var s=t.concat(o);return n?s:s.concat(b(p(o)))}function a(e){return["table","td","th"].indexOf(f(e))>=0}function i(e){if(!l(e)||A(e).position==="fixed"){return null}return e.offsetParent}function o(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1;var r=navigator.userAgent.indexOf("Trident")!==-1;if(r&&l(e)){var a=A(e);if(a.position==="fixed"){return null}}var n=p(e);while(l(n)&&["html","body"].indexOf(f(n))<0){var i=A(n);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none"){return n}else{n=n.parentNode}}return null}function ae(e){var t=M(e);var r=i(e);while(r&&a(r)&&A(r).position==="static"){r=i(r)}if(r&&(f(r)==="html"||f(r)==="body"&&A(r).position==="static")){return t}return r||o(e)||t}var ne="top";var ie="bottom";var oe="right";var se="left";var H="auto";var D=[ne,ie,oe,se];var le="start";var m="end";var O="clippingParents";var I="viewport";var P="popper";var R="reference";var g=D.reduce(function(e,t){return e.concat([t+"-"+le,t+"-"+m])},[]);var y=[].concat(D,[H]).reduce(function(e,t){return e.concat([t,t+"-"+le,t+"-"+m])},[]);var r="beforeRead";var s="read";var _="afterRead";var w="beforeMain";var T="main";var k="afterMain";var S="beforeWrite";var N="write";var z="afterWrite";var F=[r,s,_,w,T,k,S,N,z];function j(e){var r=new Map;var a=new Set;var n=[];e.forEach(function(e){r.set(e.name,e)});function i(e){a.add(e.name);var t=[].concat(e.requires||[],e.requiresIfExists||[]);t.forEach(function(e){if(!a.has(e)){var t=r.get(e);if(t){i(t)}}});n.push(e)}e.forEach(function(e){if(!a.has(e.name)){i(e)}});return n}function B(e){var r=j(e);return F.reduce(function(e,t){return e.concat(r.filter(function(e){return e.phase===t}))},[])}function q(t){var r;return function(){if(!r){r=new Promise(function(e){Promise.resolve().then(function(){r=undefined;e(t())})})}return r}}function U(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++){r[a-1]=arguments[a]}return[].concat(r).reduce(function(e,t){return e.replace(/%s/,t)},e)}var Y='Popper: modifier "%s" provided an invalid %s property, expected %s but got %s';var V='Popper: modifier "%s" requires "%s", but "%s" modifier is not available';var G=["name","enabled","phase","fn","effect","requires","options"];function W(a){a.forEach(function(r){Object.keys(r).forEach(function(e){switch(e){case"name":if(typeof r.name!=="string"){console.error(U(Y,String(r.name),'"name"','"string"','"'+String(r.name)+'"'))}break;case"enabled":if(typeof r.enabled!=="boolean"){console.error(U(Y,r.name,'"enabled"','"boolean"','"'+String(r.enabled)+'"'))}case"phase":if(F.indexOf(r.phase)<0){console.error(U(Y,r.name,'"phase"',"either "+F.join(", "),'"'+String(r.phase)+'"'))}break;case"fn":if(typeof r.fn!=="function"){console.error(U(Y,r.name,'"fn"','"function"','"'+String(r.fn)+'"'))}break;case"effect":if(typeof r.effect!=="function"){console.error(U(Y,r.name,'"effect"','"function"','"'+String(r.fn)+'"'))}break;case"requires":if(!Array.isArray(r.requires)){console.error(U(Y,r.name,'"requires"','"array"','"'+String(r.requires)+'"'))}break;case"requiresIfExists":if(!Array.isArray(r.requiresIfExists)){console.error(U(Y,r.name,'"requiresIfExists"','"array"','"'+String(r.requiresIfExists)+'"'))}break;case"options":case"data":break;default:console.error('PopperJS: an invalid property has been provided to the "'+r.name+'" modifier, valid properties are '+G.map(function(e){return'"'+e+'"'}).join(", ")+'; but "'+e+'" was provided.')}r.requires&&r.requires.forEach(function(t){if(a.find(function(e){return e.name===t})==null){console.error(U(V,String(r.name),t,t))}})})})}function $(e,r){var a=new Set;return e.filter(function(e){var t=r(e);if(!a.has(t)){a.add(t);return true}})}function ue(e){return e.split("-")[0]}function Z(e){var t=e.reduce(function(e,t){var r=e[t.name];e[t.name]=r?Object.assign({},r,t,{options:Object.assign({},r.options,t.options),data:Object.assign({},r.data,t.data)}):t;return e},{});return Object.keys(t).map(function(e){return t[e]})}function X(e){var t=M(e);var r=C(e);var a=t.visualViewport;var n=r.clientWidth;var i=r.clientHeight;var o=0;var s=0;if(a){n=a.width;i=a.height;if(!/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){o=a.offsetLeft;s=a.offsetTop}}return{width:n,height:i,x:o+d(e),y:s}}var ce=Math.max;var fe=Math.min;var J=Math.round;function K(e){var t;var r=C(e);var a=u(e);var n=(t=e.ownerDocument)==null?void 0:t.body;var i=ce(r.scrollWidth,r.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0);var o=ce(r.scrollHeight,r.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0);var s=-a.scrollLeft+d(e);var l=-a.scrollTop;if(A(n||r).direction==="rtl"){s+=ce(r.clientWidth,n?n.clientWidth:0)-i}return{width:i,height:o,x:s,y:l}}function Q(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t)){return true}else if(r&&n(r)){var a=t;do{if(a&&e.isSameNode(a)){return true}a=a.parentNode||a.host}while(a)}return false}function ee(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function te(e){var t=E(e);t.top=t.top+e.clientTop;t.left=t.left+e.clientLeft;t.bottom=t.top+e.clientHeight;t.right=t.left+e.clientWidth;t.width=e.clientWidth;t.height=e.clientHeight;t.x=t.left;t.y=t.top;return t}function de(e,t){return t===I?ee(X(e)):l(t)?te(t):ee(K(C(e)))}function ve(e){var t=b(p(e));var r=["absolute","fixed"].indexOf(A(e).position)>=0;var a=r&&l(e)?ae(e):e;if(!L(a)){return[]}return t.filter(function(e){return L(e)&&Q(e,a)&&f(e)!=="body"})}function pe(a,e,t){var r=e==="clippingParents"?ve(a):[].concat(e);var n=[].concat(r,[t]);var i=n[0];var o=n.reduce(function(e,t){var r=de(a,t);e.top=ce(r.top,e.top);e.right=fe(r.right,e.right);e.bottom=fe(r.bottom,e.bottom);e.left=ce(r.left,e.left);return e},de(a,i));o.width=o.right-o.left;o.height=o.bottom-o.top;o.x=o.left;o.y=o.top;return o}function he(e){return e.split("-")[1]}function me(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ge(e){var t=e.reference,r=e.element,a=e.placement;var n=a?ue(a):null;var i=a?he(a):null;var o=t.x+t.width/2-r.width/2;var s=t.y+t.height/2-r.height/2;var l;switch(n){case ne:l={x:o,y:t.y-r.height};break;case ie:l={x:o,y:t.y+t.height};break;case oe:l={x:t.x+t.width,y:s};break;case se:l={x:t.x-r.width,y:s};break;default:l={x:t.x,y:t.y}}var u=n?me(n):null;if(u!=null){var c=u==="y"?"height":"width";switch(i){case le:l[u]=l[u]-(t[c]/2-r[c]/2);break;case m:l[u]=l[u]+(t[c]/2-r[c]/2);break}}return l}function ye(){return{top:0,right:0,bottom:0,left:0}}function xe(e){return Object.assign({},ye(),e)}function be(r,e){return e.reduce(function(e,t){e[t]=r;return e},{})}function _e(e,t){if(t===void 0){t={}}var r=t,a=r.placement,n=a===void 0?e.placement:a,i=r.boundary,o=i===void 0?O:i,s=r.rootBoundary,l=s===void 0?I:s,u=r.elementContext,c=u===void 0?P:u,f=r.altBoundary,d=f===void 0?false:f,v=r.padding,p=v===void 0?0:v;var h=xe(typeof p!=="number"?p:be(p,D));var m=c===P?R:P;var g=e.elements.reference;var y=e.rects.popper;var x=e.elements[d?m:c];var b=pe(L(x)?x:x.contextElement||C(e.elements.popper),o,l);var _=E(g);var w=ge({reference:_,element:y,strategy:"absolute",placement:n});var T=ee(Object.assign({},y,w));var k=c===P?T:_;var M={top:b.top-k.top+h.top,bottom:k.bottom-b.bottom+h.bottom,left:b.left-k.left+h.left,right:k.right-b.right+h.right};var A=e.modifiersData.offset;if(c===P&&A){var S=A[n];Object.keys(M).forEach(function(e){var t=[oe,ie].indexOf(e)>=0?1:-1;var r=[ne,ie].indexOf(e)>=0?"y":"x";M[e]+=S[r]*t})}return M}var we="Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.";var Te="Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.";var ke={placement:"bottom",modifiers:[],strategy:"absolute"};function Me(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return!t.some(function(e){return!(e&&typeof e.getBoundingClientRect==="function")})}function Ae(e){if(e===void 0){e={}}var t=e,r=t.defaultModifiers,g=r===void 0?[]:r,a=t.defaultOptions,y=a===void 0?ke:a;return function e(c,f,t){if(t===void 0){t=y}var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},ke,y),modifiersData:{},elements:{reference:c,popper:f},attributes:{},styles:{}};var s=[];var v=false;var p={state:d,setOptions:function e(t){m();d.options=Object.assign({},y,d.options,t);d.scrollParents={reference:L(c)?b(c):c.contextElement?b(c.contextElement):[],popper:b(f)};var r=B(Z([].concat(g,d.options.modifiers)));d.orderedModifiers=r.filter(function(e){return e.enabled});{var a=$([].concat(r,d.options.modifiers),function(e){var t=e.name;return t});W(a);if(ue(d.options.placement)===H){var n=d.orderedModifiers.find(function(e){var t=e.name;return t==="flip"});if(!n){console.error(['Popper: "auto" placements require the "flip" modifier be',"present and enabled to work."].join(" "))}}var i=A(f),o=i.marginTop,s=i.marginRight,l=i.marginBottom,u=i.marginLeft;if([o,s,l,u].some(function(e){return parseFloat(e)})){console.warn(['Popper: CSS "margin" styles cannot be used to apply padding',"between the popper and its reference element or boundary.","To replicate margin, use the `offset` modifier, as well as","the `padding` option in the `preventOverflow` and `flip`","modifiers."].join(" "))}}h();return p.update()},forceUpdate:function e(){if(v){return}var t=d.elements,r=t.reference,a=t.popper;if(!Me(r,a)){{console.error(we)}return}d.rects={reference:x(r,ae(a),d.options.strategy==="fixed"),popper:re(a)};d.reset=false;d.placement=d.options.placement;d.orderedModifiers.forEach(function(e){return d.modifiersData[e.name]=Object.assign({},e.data)});var n=0;for(var i=0;i<d.orderedModifiers.length;i++){{n+=1;if(n>100){console.error(Te);break}}if(d.reset===true){d.reset=false;i=-1;continue}var o=d.orderedModifiers[i],s=o.fn,l=o.options,u=l===void 0?{}:l,c=o.name;if(typeof s==="function"){d=s({state:d,options:u,name:c,instance:p})||d}}},update:q(function(){return new Promise(function(e){p.forceUpdate();e(d)})}),destroy:function e(){m();v=true}};if(!Me(c,f)){{console.error(we)}return p}p.setOptions(t).then(function(e){if(!v&&t.onFirstUpdate){t.onFirstUpdate(e)}});function h(){d.orderedModifiers.forEach(function(e){var t=e.name,r=e.options,a=r===void 0?{}:r,n=e.effect;if(typeof n==="function"){var i=n({state:d,name:t,instance:p,options:a});var o=function e(){};s.push(i||o)}})}function m(){s.forEach(function(e){return e()});s=[]}return p}}var Se={passive:true};function Ee(e){var t=e.state,r=e.instance,a=e.options;var n=a.scroll,i=n===void 0?true:n,o=a.resize,s=o===void 0?true:o;var l=M(t.elements.popper);var u=[].concat(t.scrollParents.reference,t.scrollParents.popper);if(i){u.forEach(function(e){e.addEventListener("scroll",r.update,Se)})}if(s){l.addEventListener("resize",r.update,Se)}return function(){if(i){u.forEach(function(e){e.removeEventListener("scroll",r.update,Se)})}if(s){l.removeEventListener("resize",r.update,Se)}}}var Le={name:"eventListeners",enabled:true,phase:"write",fn:function e(){},effect:Ee,data:{}};function Ce(e){var t=e.state,r=e.name;t.modifiersData[r]=ge({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var De={name:"popperOffsets",enabled:true,phase:"read",fn:Ce,data:{}};var Oe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ie(e){var t=e.x,r=e.y;var a=window;var n=a.devicePixelRatio||1;return{x:J(J(t*n)/n)||0,y:J(J(r*n)/n)||0}}function Pe(e){var t;var r=e.popper,a=e.popperRect,n=e.placement,i=e.offsets,o=e.position,s=e.gpuAcceleration,l=e.adaptive,u=e.roundOffsets;var c=u===true?Ie(i):typeof u==="function"?u(i):i,f=c.x,d=f===void 0?0:f,v=c.y,p=v===void 0?0:v;var h=i.hasOwnProperty("x");var m=i.hasOwnProperty("y");var g=se;var y=ne;var x=window;if(l){var b=ae(r);var _="clientHeight";var w="clientWidth";if(b===M(r)){b=C(r);if(A(b).position!=="static"){_="scrollHeight";w="scrollWidth"}}b=b;if(n===ne){y=ie;p-=b[_]-a.height;p*=s?1:-1}if(n===se){g=oe;d-=b[w]-a.width;d*=s?1:-1}}var T=Object.assign({position:o},l&&Oe);if(s){var k;return Object.assign({},T,(k={},k[y]=m?"0":"",k[g]=h?"0":"",k.transform=(x.devicePixelRatio||1)<2?"translate("+d+"px, "+p+"px)":"translate3d("+d+"px, "+p+"px, 0)",k))}return Object.assign({},T,(t={},t[y]=m?p+"px":"",t[g]=h?d+"px":"",t.transform="",t))}function Re(e){var t=e.state,r=e.options;var a=r.gpuAcceleration,n=a===void 0?true:a,i=r.adaptive,o=i===void 0?true:i,s=r.roundOffsets,l=s===void 0?true:s;{var u=A(t.elements.popper).transitionProperty||"";if(o&&["transform","top","right","bottom","left"].some(function(e){return u.indexOf(e)>=0})){console.warn(["Popper: Detected CSS transitions on at least one of the following",'CSS properties: "transform", "top", "right", "bottom", "left".',"\n\n",'Disable the "computeStyles" modifier\'s `adaptive` option to allow',"for smooth transitions, or remove these properties from the CSS","transition declaration on the popper element if only transitioning","opacity or background-color for example.","\n\n","We recommend using the popper element as a wrapper around an inner","element that can have any CSS property transitioned for animations."].join(" "))}}var c={placement:ue(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n};if(t.modifiersData.popperOffsets!=null){t.styles.popper=Object.assign({},t.styles.popper,Pe(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))}if(t.modifiersData.arrow!=null){t.styles.arrow=Object.assign({},t.styles.arrow,Pe(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:false,roundOffsets:l})))}t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var Ne={name:"computeStyles",enabled:true,phase:"beforeWrite",fn:Re,data:{}};function ze(e){var n=e.state;Object.keys(n.elements).forEach(function(e){var t=n.styles[e]||{};var r=n.attributes[e]||{};var a=n.elements[e];if(!l(a)||!f(a)){return}Object.assign(a.style,t);Object.keys(r).forEach(function(e){var t=r[e];if(t===false){a.removeAttribute(e)}else{a.setAttribute(e,t===true?"":t)}})})}function Fe(e){var i=e.state;var o={popper:{position:i.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(i.elements.popper.style,o.popper);i.styles=o;if(i.elements.arrow){Object.assign(i.elements.arrow.style,o.arrow)}return function(){Object.keys(i.elements).forEach(function(e){var t=i.elements[e];var r=i.attributes[e]||{};var a=Object.keys(i.styles.hasOwnProperty(e)?i.styles[e]:o[e]);var n=a.reduce(function(e,t){e[t]="";return e},{});if(!l(t)||!f(t)){return}Object.assign(t.style,n);Object.keys(r).forEach(function(e){t.removeAttribute(e)})})}}var je={name:"applyStyles",enabled:true,phase:"write",fn:ze,effect:Fe,requires:["computeStyles"]};function He(e,t,r){var a=ue(e);var n=[se,ne].indexOf(a)>=0?-1:1;var i=typeof r==="function"?r(Object.assign({},t,{placement:e})):r,o=i[0],s=i[1];o=o||0;s=(s||0)*n;return[se,oe].indexOf(a)>=0?{x:s,y:o}:{x:o,y:s}}function Be(e){var r=e.state,t=e.options,a=e.name;var n=t.offset,i=n===void 0?[0,0]:n;var o=y.reduce(function(e,t){e[t]=He(t,r.rects,i);return e},{});var s=o[r.placement],l=s.x,u=s.y;if(r.modifiersData.popperOffsets!=null){r.modifiersData.popperOffsets.x+=l;r.modifiersData.popperOffsets.y+=u}r.modifiersData[a]=o}var qe={name:"offset",enabled:true,phase:"main",requires:["popperOffsets"],fn:Be};var Ue={left:"right",right:"left",bottom:"top",top:"bottom"};function Ye(e){return e.replace(/left|right|bottom|top/g,function(e){return Ue[e]})}var Ve={start:"end",end:"start"};function Ge(e){return e.replace(/start|end/g,function(e){return Ve[e]})}function We(r,e){if(e===void 0){e={}}var t=e,a=t.placement,n=t.boundary,i=t.rootBoundary,o=t.padding,s=t.flipVariations,l=t.allowedAutoPlacements,u=l===void 0?y:l;var c=he(a);var f=c?s?g:g.filter(function(e){return he(e)===c}):D;var d=f.filter(function(e){return u.indexOf(e)>=0});if(d.length===0){d=f;{console.error(["Popper: The `allowedAutoPlacements` option did not allow any","placements. Ensure the `placement` option matches the variation","of the allowed placements.",'For example, "auto" cannot be used to allow "bottom-start".','Use "auto-start" instead.'].join(" "))}}var v=d.reduce(function(e,t){e[t]=_e(r,{placement:t,boundary:n,rootBoundary:i,padding:o})[ue(t)];return e},{});return Object.keys(v).sort(function(e,t){return v[e]-v[t]})}function $e(e){if(ue(e)===H){return[]}var t=Ye(e);return[Ge(e),t,Ge(t)]}function Ze(e){var r=e.state,t=e.options,a=e.name;if(r.modifiersData[a]._skip){return}var n=t.mainAxis,i=n===void 0?true:n,o=t.altAxis,s=o===void 0?true:o,l=t.fallbackPlacements,u=t.padding,c=t.boundary,f=t.rootBoundary,d=t.altBoundary,v=t.flipVariations,p=v===void 0?true:v,h=t.allowedAutoPlacements;var m=r.options.placement;var g=ue(m);var y=g===m;var x=l||(y||!p?[Ye(m)]:$e(m));var b=[m].concat(x).reduce(function(e,t){return e.concat(ue(t)===H?We(r,{placement:t,boundary:c,rootBoundary:f,padding:u,flipVariations:p,allowedAutoPlacements:h}):t)},[]);var _=r.rects.reference;var w=r.rects.popper;var T=new Map;var k=true;var M=b[0];for(var A=0;A<b.length;A++){var S=b[A];var E=ue(S);var L=he(S)===le;var C=[ne,ie].indexOf(E)>=0;var D=C?"width":"height";var O=_e(r,{placement:S,boundary:c,rootBoundary:f,altBoundary:d,padding:u});var I=C?L?oe:se:L?ie:ne;if(_[D]>w[D]){I=Ye(I)}var P=Ye(I);var R=[];if(i){R.push(O[E]<=0)}if(s){R.push(O[I]<=0,O[P]<=0)}if(R.every(function(e){return e})){M=S;k=false;break}T.set(S,R)}if(k){var N=p?3:1;var z=function e(r){var t=b.find(function(e){var t=T.get(e);if(t){return t.slice(0,r).every(function(e){return e})}});if(t){M=t;return"break"}};for(var F=N;F>0;F--){var j=z(F);if(j==="break")break}}if(r.placement!==M){r.modifiersData[a]._skip=true;r.placement=M;r.reset=true}}var Xe={name:"flip",enabled:true,phase:"main",fn:Ze,requiresIfExists:["offset"],data:{_skip:false}};function Je(e){return e==="x"?"y":"x"}function Ke(e,t,r){return ce(e,fe(t,r))}function Qe(e){var t=e.state,r=e.options,a=e.name;var n=r.mainAxis,i=n===void 0?true:n,o=r.altAxis,s=o===void 0?false:o,l=r.boundary,u=r.rootBoundary,c=r.altBoundary,f=r.padding,d=r.tether,v=d===void 0?true:d,p=r.tetherOffset,h=p===void 0?0:p;var m=_e(t,{boundary:l,rootBoundary:u,padding:f,altBoundary:c});var g=ue(t.placement);var y=he(t.placement);var x=!y;var b=me(g);var _=Je(b);var w=t.modifiersData.popperOffsets;var T=t.rects.reference;var k=t.rects.popper;var M=typeof h==="function"?h(Object.assign({},t.rects,{placement:t.placement})):h;var A={x:0,y:0};if(!w){return}if(i||s){var S=b==="y"?ne:se;var E=b==="y"?ie:oe;var L=b==="y"?"height":"width";var C=w[b];var D=w[b]+m[S];var O=w[b]-m[E];var I=v?-k[L]/2:0;var P=y===le?T[L]:k[L];var R=y===le?-k[L]:-T[L];var N=t.elements.arrow;var z=v&&N?re(N):{width:0,height:0};var F=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:ye();var j=F[S];var H=F[E];var B=Ke(0,T[L],z[L]);var q=x?T[L]/2-I-B-j-M:P-B-j-M;var U=x?-T[L]/2+I+B+H+M:R+B+H+M;var Y=t.elements.arrow&&ae(t.elements.arrow);var V=Y?b==="y"?Y.clientTop||0:Y.clientLeft||0:0;var G=t.modifiersData.offset?t.modifiersData.offset[t.placement][b]:0;var W=w[b]+q-G-V;var $=w[b]+U-G;if(i){var Z=Ke(v?fe(D,W):D,C,v?ce(O,$):O);w[b]=Z;A[b]=Z-C}if(s){var X=b==="x"?ne:se;var J=b==="x"?ie:oe;var K=w[_];var Q=K+m[X];var ee=K-m[J];var te=Ke(v?fe(Q,W):Q,K,v?ce(ee,$):ee);w[_]=te;A[_]=te-K}}t.modifiersData[a]=A}var et={name:"preventOverflow",enabled:true,phase:"main",fn:Qe,requiresIfExists:["offset"]};var tt=function e(t,r){t=typeof t==="function"?t(Object.assign({},r.rects,{placement:r.placement})):t;return xe(typeof t!=="number"?t:be(t,D))};function rt(e){var t;var r=e.state,a=e.name,n=e.options;var i=r.elements.arrow;var o=r.modifiersData.popperOffsets;var s=ue(r.placement);var l=me(s);var u=[se,oe].indexOf(s)>=0;var c=u?"height":"width";if(!i||!o){return}var f=tt(n.padding,r);var d=re(i);var v=l==="y"?ne:se;var p=l==="y"?ie:oe;var h=r.rects.reference[c]+r.rects.reference[l]-o[l]-r.rects.popper[c];var m=o[l]-r.rects.reference[l];var g=ae(i);var y=g?l==="y"?g.clientHeight||0:g.clientWidth||0:0;var x=h/2-m/2;var b=f[v];var _=y-d[c]-f[p];var w=y/2-d[c]/2+x;var T=Ke(b,w,_);var k=l;r.modifiersData[a]=(t={},t[k]=T,t.centerOffset=T-w,t)}function at(e){var t=e.state,r=e.options;var a=r.element,n=a===void 0?"[data-popper-arrow]":a;if(n==null){return}if(typeof n==="string"){n=t.elements.popper.querySelector(n);if(!n){return}}{if(!l(n)){console.error(['Popper: "arrow" element must be an HTMLElement (not an SVGElement).',"To use an SVG arrow, wrap it in an HTMLElement that will be used as","the arrow."].join(" "))}}if(!Q(t.elements.popper,n)){{console.error(['Popper: "arrow" modifier\'s `element` must be a child of the popper',"element."].join(" "))}return}t.elements.arrow=n}var nt={name:"arrow",enabled:true,phase:"main",fn:rt,effect:at,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function it(e,t,r){if(r===void 0){r={x:0,y:0}}return{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function ot(t){return[ne,oe,ie,se].some(function(e){return t[e]>=0})}function st(e){var t=e.state,r=e.name;var a=t.rects.reference;var n=t.rects.popper;var i=t.modifiersData.preventOverflow;var o=_e(t,{elementContext:"reference"});var s=_e(t,{altBoundary:true});var l=it(o,a);var u=it(s,n,i);var c=ot(l);var f=ot(u);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:f};t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}var lt={name:"hide",enabled:true,phase:"main",requiresIfExists:["preventOverflow"],fn:st};var ut=[Le,De,Ne,je];var ct=Ae({defaultModifiers:ut});var ft=[Le,De,Ne,je,qe,Xe,et,nt,lt];var dt=Ae({defaultModifiers:ft});e.applyStyles=je;e.arrow=nt;e.computeStyles=Ne;e.createPopper=dt;e.createPopperLite=ct;e.defaultModifiers=ft;e.detectOverflow=_e;e.eventListeners=Le;e.flip=Xe;e.hide=lt;e.offset=qe;e.popperGenerator=Ae;e.popperOffsets=De;e.preventOverflow=et;Object.defineProperty(e,"__esModule",{value:true})});(function(r){if(typeof define==="function"&&define.amd){define(["jquery"],r)}else if(typeof module==="object"&&module.exports){module.exports=function(e,t){if(t===undefined){if(typeof window!=="undefined"){t=require("jquery")}else{t=require("jquery")(e)}}r(t);return t}}else{r(jQuery)}})(function(r){var e=function(){if(r&&r.fn&&r.fn.select2&&r.fn.select2.amd){var t=r.fn.select2.amd}var t;(function(){if(!t||!t.requirejs){if(!t){t={}}else{n=t}var e,n,c;(function(v){var i,o,p,h,m={},g={},y={},x={},r=Object.prototype.hasOwnProperty,a=[].slice,b=/\.js$/;function _(e,t){return r.call(e,t)}function s(e,t){var r,a,n,i,o,s,l,u,c,f,d,v,p=t&&t.split("/"),h=y.map,m=h&&h["*"]||{};if(e){e=e.split("/");o=e.length-1;if(y.nodeIdCompat&&b.test(e[o])){e[o]=e[o].replace(b,"")}if(e[0].charAt(0)==="."&&p){v=p.slice(0,p.length-1);e=v.concat(e)}for(c=0;c<e.length;c++){d=e[c];if(d==="."){e.splice(c,1);c-=1}else if(d===".."){if(c===0||c===1&&e[2]===".."||e[c-1]===".."){continue}else if(c>0){e.splice(c-1,2);c-=2}}}e=e.join("/")}if((p||m)&&h){r=e.split("/");for(c=r.length;c>0;c-=1){a=r.slice(0,c).join("/");if(p){for(f=p.length;f>0;f-=1){n=h[p.slice(0,f).join("/")];if(n){n=n[a];if(n){i=n;s=c;break}}}}if(i){break}if(!l&&m&&m[a]){l=m[a];u=c}}if(!i&&l){i=l;s=u}if(i){r.splice(0,s,i);e=r.join("/")}}return e}function w(t,r){return function(){var e=a.call(arguments,0);if(typeof e[0]!=="string"&&e.length===1){e.push(null)}return o.apply(v,e.concat([t,r]))}}function l(t){return function(e){return s(e,t)}}function T(t){return function(e){m[t]=e}}function k(e){if(_(g,e)){var t=g[e];delete g[e];x[e]=true;i.apply(v,t)}if(!_(m,e)&&!_(x,e)){throw new Error("No "+e)}return m[e]}function u(e){var t,r=e?e.indexOf("!"):-1;if(r>-1){t=e.substring(0,r);e=e.substring(r+1,e.length)}return[t,e]}function M(e){return e?u(e):[]}p=function(e,t){var r,a=u(e),n=a[0],i=t[1];e=a[1];if(n){n=s(n,i);r=k(n)}if(n){if(r&&r.normalize){e=r.normalize(e,l(i))}else{e=s(e,i)}}else{e=s(e,i);a=u(e);n=a[0];e=a[1];if(n){r=k(n)}}return{f:n?n+"!"+e:e,n:e,pr:n,p:r}};function t(e){return function(){return y&&y.config&&y.config[e]||{}}}h={require:function(e){return w(e)},exports:function(e){var t=m[e];if(typeof t!=="undefined"){return t}else{return m[e]={}}},module:function(e){return{id:e,uri:"",exports:m[e],config:t(e)}}};i=function(e,t,r,a){var n,i,o,s,l,u,c=[],f=typeof r,d;a=a||e;u=M(a);if(f==="undefined"||f==="function"){t=!t.length&&r.length?["require","exports","module"]:t;for(l=0;l<t.length;l+=1){s=p(t[l],u);i=s.f;if(i==="require"){c[l]=h.require(e)}else if(i==="exports"){c[l]=h.exports(e);d=true}else if(i==="module"){n=c[l]=h.module(e)}else if(_(m,i)||_(g,i)||_(x,i)){c[l]=k(i)}else if(s.p){s.p.load(s.n,w(a,true),T(i),{});c[l]=m[i]}else{throw new Error(e+" missing "+i)}}o=r?r.apply(m[e],c):undefined;if(e){if(n&&n.exports!==v&&n.exports!==m[e]){m[e]=n.exports}else if(o!==v||!d){m[e]=o}}}else if(e){m[e]=r}};e=n=o=function(e,t,r,a,n){if(typeof e==="string"){if(h[e]){return h[e](t)}return k(p(e,M(t)).f)}else if(!e.splice){y=e;if(y.deps){o(y.deps,y.callback)}if(!t){return}if(t.splice){e=t;t=r;r=null}else{e=v}}t=t||function(){};if(typeof r==="function"){r=a;a=n}if(a){i(v,e,t,r)}else{setTimeout(function(){i(v,e,t,r)},4)}return o};o.config=function(e){return o(e)};e._defined=m;c=function(e,t,r){if(typeof e!=="string"){throw new Error("See almond README: incorrect module build, no module name")}if(!t.splice){r=t;t=[]}if(!_(m,e)&&!_(g,e)){g[e]=[e,t,r]}};c.amd={jQuery:true}})();t.requirejs=e;t.require=n;t.define=c}})();t.define("almond",function(){});t.define("jquery",[],function(){var e=r||$;if(e==null&&console&&console.error){console.error("Select2: An instance of jQuery or a jQuery-compatible library was not "+"found. Make sure that you are including jQuery before Select2 on your "+"web page.")}return e});t.define("select2/utils",["jquery"],function(i){var n={};n.Extend=function(e,t){var r={}.hasOwnProperty;function a(){this.constructor=e}for(var n in t){if(r.call(t,n)){e[n]=t[n]}}a.prototype=t.prototype;e.prototype=new a;e.__super__=t.prototype;return e};function f(e){var t=e.prototype;var r=[];for(var a in t){var n=t[a];if(typeof n!=="function"){continue}if(a==="constructor"){continue}r.push(a)}return r}n.Decorate=function(a,n){var e=f(n);var t=f(a);function i(){var e=Array.prototype.unshift;var t=n.prototype.constructor.length;var r=a.prototype.constructor;if(t>0){e.call(arguments,a.prototype.constructor);r=n.prototype.constructor}r.apply(this,arguments)}n.displayName=a.displayName;function r(){this.constructor=i}i.prototype=new r;for(var o=0;o<t.length;o++){var s=t[o];i.prototype[s]=a.prototype[s]}var l=function(e){var t=function(){};if(e in i.prototype){t=i.prototype[e]}var r=n.prototype[e];return function(){var e=Array.prototype.unshift;e.call(arguments,t);return r.apply(this,arguments)}};for(var u=0;u<e.length;u++){var c=e[u];i.prototype[c]=l(c)}return i};var e=function(){this.listeners={}};e.prototype.on=function(e,t){this.listeners=this.listeners||{};if(e in this.listeners){this.listeners[e].push(t)}else{this.listeners[e]=[t]}};e.prototype.trigger=function(e){var t=Array.prototype.slice;var r=t.call(arguments,1);this.listeners=this.listeners||{};if(r==null){r=[]}if(r.length===0){r.push({})}r[0]._type=e;if(e in this.listeners){this.invoke(this.listeners[e],t.call(arguments,1))}if("*"in this.listeners){this.invoke(this.listeners["*"],arguments)}};e.prototype.invoke=function(e,t){for(var r=0,a=e.length;r<a;r++){e[r].apply(this,t)}};n.Observable=e;n.generateChars=function(e){var t="";for(var r=0;r<e;r++){var a=Math.floor(Math.random()*36);t+=a.toString(36)}return t};n.bind=function(e,t){return function(){e.apply(t,arguments)}};n._convertData=function(e){for(var t in e){var r=t.split("-");var a=e;if(r.length===1){continue}for(var n=0;n<r.length;n++){var i=r[n];i=i.substring(0,1).toLowerCase()+i.substring(1);if(!(i in a)){a[i]={}}if(n==r.length-1){a[i]=e[t]}a=a[i]}delete e[t]}return e};n.hasScroll=function(e,t){var r=i(t);var a=t.style.overflowX;var n=t.style.overflowY;if(a===n&&(n==="hidden"||n==="visible")){return false}if(a==="scroll"||n==="scroll"){return true}return r.innerHeight()<t.scrollHeight||r.innerWidth()<t.scrollWidth};n.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};if(typeof e!=="string"){return e}return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})};n.__cache={};var r=0;n.GetUniqueElementId=function(e){var t=e.getAttribute("data-select2-id");if(t!=null){return t}if(e.id){t="select2-data-"+e.id}else{t="select2-data-"+(++r).toString()+"-"+n.generateChars(4)}e.setAttribute("data-select2-id",t);return t};n.StoreData=function(e,t,r){var a=n.GetUniqueElementId(e);if(!n.__cache[a]){n.__cache[a]={}}n.__cache[a][t]=r};n.GetData=function(e,t){var r=n.GetUniqueElementId(e);if(t){if(n.__cache[r]){if(n.__cache[r][t]!=null){return n.__cache[r][t]}return i(e).data(t)}return i(e).data(t)}else{return n.__cache[r]}};n.RemoveData=function(e){var t=n.GetUniqueElementId(e);if(n.__cache[t]!=null){delete n.__cache[t]}e.removeAttribute("data-select2-id")};n.copyNonInternalCssClasses=function(e,t){var r;var a=e.getAttribute("class").trim().split(/\s+/);a=a.filter(function(e){return e.indexOf("select2-")===0});var n=t.getAttribute("class").trim().split(/\s+/);n=n.filter(function(e){return e.indexOf("select2-")!==0});var i=a.concat(n);e.setAttribute("class",i.join(" "))};return n});t.define("select2/results",["jquery","./utils"],function(v,p){function a(e,t,r){this.$element=e;this.data=r;this.options=t;a.__super__.constructor.call(this)}p.Extend(a,p.Observable);a.prototype.render=function(){var e=v('<ul class="select2-results__options" role="listbox"></ul>');if(this.options.get("multiple")){e.attr("aria-multiselectable","true")}this.$results=e;return e};a.prototype.clear=function(){this.$results.empty()};a.prototype.displayMessage=function(e){var t=this.options.get("escapeMarkup");this.clear();this.hideLoading();var r=v('<li role="alert" aria-live="assertive"'+' class="select2-results__option"></li>');var a=this.options.get("translations").get(e.message);r.append(t(a(e.args)));r[0].className+=" select2-results__message";this.$results.append(r)};a.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()};a.prototype.append=function(e){this.hideLoading();var t=[];if(e.results==null||e.results.length===0){if(this.$results.children().length===0){this.trigger("results:message",{message:"noResults"})}return}e.results=this.sort(e.results);for(var r=0;r<e.results.length;r++){var a=e.results[r];var n=this.option(a);t.push(n)}this.$results.append(t)};a.prototype.position=function(e,t){var r=t.find(".select2-results");r.append(e)};a.prototype.sort=function(e){var t=this.options.get("sorter");return t(e)};a.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option--selectable");var t=e.filter(".select2-results__option--selected");if(t.length>0){t.first().trigger("mouseenter")}else{e.first().trigger("mouseenter")}this.ensureHighlightVisible()};a.prototype.setClasses=function(){var r=this;this.data.current(function(e){var a=e.map(function(e){return e.id.toString()});var t=r.$results.find(".select2-results__option--selectable");t.each(function(){var e=v(this);var t=p.GetData(this,"data");var r=""+t.id;if(t.element!=null&&t.element.selected||t.element==null&&a.indexOf(r)>-1){this.classList.add("select2-results__option--selected");e.attr("aria-selected","true")}else{this.classList.remove("select2-results__option--selected");e.attr("aria-selected","false")}})})};a.prototype.showLoading=function(e){this.hideLoading();var t=this.options.get("translations").get("searching");var r={disabled:true,loading:true,text:t(e)};var a=this.option(r);a.className+=" loading-results";this.$results.prepend(a)};a.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()};a.prototype.option=function(e){var t=document.createElement("li");t.classList.add("select2-results__option");t.classList.add("select2-results__option--selectable");var r={role:"option"};var a=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;if(e.element!=null&&a.call(e.element,":disabled")||e.element==null&&e.disabled){r["aria-disabled"]="true";t.classList.remove("select2-results__option--selectable");t.classList.add("select2-results__option--disabled")}if(e.id==null){t.classList.remove("select2-results__option--selectable")}if(e._resultId!=null){t.id=e._resultId}if(e.title){t.title=e.title}if(e.children){r.role="group";r["aria-label"]=e.text;t.classList.remove("select2-results__option--selectable");t.classList.add("select2-results__option--group")}for(var n in r){var i=r[n];t.setAttribute(n,i)}if(e.children){var o=v(t);var s=document.createElement("strong");s.className="select2-results__group";this.template(e,s);var l=[];for(var u=0;u<e.children.length;u++){var c=e.children[u];var f=this.option(c);l.push(f)}var d=v("<ul></ul>",{class:"select2-results__options select2-results__options--nested",role:"none"});d.append(l);o.append(s);o.append(d)}else{this.template(e,t)}p.StoreData(t,"data",e);return t};a.prototype.bind=function(t,e){var l=this;var r=t.id+"-results";this.$results.attr("id",r);t.on("results:all",function(e){l.clear();l.append(e.data);if(t.isOpen()){l.setClasses();l.highlightFirstItem()}});t.on("results:append",function(e){l.append(e.data);if(t.isOpen()){l.setClasses()}});t.on("query",function(e){l.hideMessages();l.showLoading(e)});t.on("select",function(){if(!t.isOpen()){return}l.setClasses();if(l.options.get("scrollAfterSelect")){l.highlightFirstItem()}});t.on("unselect",function(){if(!t.isOpen()){return}l.setClasses();if(l.options.get("scrollAfterSelect")){l.highlightFirstItem()}});t.on("open",function(){l.$results.attr("aria-expanded","true");l.$results.attr("aria-hidden","false");l.setClasses();l.ensureHighlightVisible()});t.on("close",function(){l.$results.attr("aria-expanded","false");l.$results.attr("aria-hidden","true");l.$results.removeAttr("aria-activedescendant")});t.on("results:toggle",function(){var e=l.getHighlightedResults();if(e.length===0){return}e.trigger("mouseup")});t.on("results:select",function(){var e=l.getHighlightedResults();if(e.length===0){return}var t=p.GetData(e[0],"data");if(e.hasClass("select2-results__option--selected")){l.trigger("close",{})}else{l.trigger("select",{data:t})}});t.on("results:previous",function(){var e=l.getHighlightedResults();var t=l.$results.find(".select2-results__option--selectable");var r=t.index(e);if(r<=0){return}var a=r-1;if(e.length===0){a=0}var n=t.eq(a);n.trigger("mouseenter");var i=l.$results.offset().top;var o=n.offset().top;var s=l.$results.scrollTop()+(o-i);if(a===0){l.$results.scrollTop(0)}else if(o-i<0){l.$results.scrollTop(s)}});t.on("results:next",function(){var e=l.getHighlightedResults();var t=l.$results.find(".select2-results__option--selectable");var r=t.index(e);var a=r+1;if(a>=t.length){return}var n=t.eq(a);n.trigger("mouseenter");var i=l.$results.offset().top+l.$results.outerHeight(false);var o=n.offset().top+n.outerHeight(false);var s=l.$results.scrollTop()+o-i;if(a===0){l.$results.scrollTop(0)}else if(o>i){l.$results.scrollTop(s)}});t.on("results:focus",function(e){e.element[0].classList.add("select2-results__option--highlighted");e.element[0].setAttribute("aria-selected","true")});t.on("results:message",function(e){l.displayMessage(e)});if(v.fn.mousewheel){this.$results.on("mousewheel",function(e){var t=l.$results.scrollTop();var r=l.$results.get(0).scrollHeight-t+e.deltaY;var a=e.deltaY>0&&t-e.deltaY<=0;var n=e.deltaY<0&&r<=l.$results.height();if(a){l.$results.scrollTop(0);e.preventDefault();e.stopPropagation()}else if(n){l.$results.scrollTop(l.$results.get(0).scrollHeight-l.$results.height());e.preventDefault();e.stopPropagation()}})}this.$results.on("mouseup",".select2-results__option--selectable",function(e){var t=v(this);var r=p.GetData(this,"data");if(t.hasClass("select2-results__option--selected")){if(l.options.get("multiple")){l.trigger("unselect",{originalEvent:e,data:r})}else{l.trigger("close",{})}return}l.trigger("select",{originalEvent:e,data:r})});this.$results.on("mouseenter",".select2-results__option--selectable",function(e){var t=p.GetData(this,"data");l.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false");l.trigger("results:focus",{data:t,element:v(this)})})};a.prototype.getHighlightedResults=function(){var e=this.$results.find(".select2-results__option--highlighted");return e};a.prototype.destroy=function(){this.$results.remove()};a.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(e.length===0){return}var t=this.$results.find(".select2-results__option--selectable");var r=t.index(e);var a=this.$results.offset().top;var n=e.offset().top;var i=this.$results.scrollTop()+(n-a);var o=n-a;i-=e.outerHeight(false)*2;if(r<=2){this.$results.scrollTop(0)}else if(o>this.$results.outerHeight()||o<0){this.$results.scrollTop(i)}};a.prototype.template=function(e,t){var r=this.options.get("templateResult");var a=this.options.get("escapeMarkup");var n=r(e,t);if(n==null){t.style.display="none"}else if(typeof n==="string"){t.innerHTML=a(n)}else{v(t).append(n)}};return a});t.define("select2/keys",[],function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return e});t.define("select2/selection/base",["jquery","../utils","../keys"],function(n,i,o){function r(e,t){this.$element=e;this.options=t;r.__super__.constructor.call(this)}i.Extend(r,i.Observable);r.prototype.render=function(){var e=n('<span class="select2-selection" role="combobox" '+' aria-haspopup="true" aria-expanded="false">'+"</span>");this._tabindex=0;if(i.GetData(this.$element[0],"old-tabindex")!=null){this._tabindex=i.GetData(this.$element[0],"old-tabindex")}else if(this.$element.attr("tabindex")!=null){this._tabindex=this.$element.attr("tabindex")}e.attr("title",this.$element.attr("title"));e.attr("tabindex",this._tabindex);e.attr("aria-disabled","false");this.$selection=e;return e};r.prototype.bind=function(e,t){var r=this;var a=e.id+"-results";this.container=e;this.$selection.on("focus",function(e){r.trigger("focus",e)});this.$selection.on("blur",function(e){r._handleBlur(e)});this.$selection.on("keydown",function(e){r.trigger("keypress",e);if(e.which===o.SPACE){e.preventDefault()}});e.on("results:focus",function(e){r.$selection.attr("aria-activedescendant",e.data._resultId)});e.on("selection:update",function(e){r.update(e.data)});e.on("open",function(){r.$selection.attr("aria-expanded","true");r.$selection.attr("aria-owns",a);r._attachCloseHandler(e)});e.on("close",function(){r.$selection.attr("aria-expanded","false");r.$selection.removeAttr("aria-activedescendant");r.$selection.removeAttr("aria-owns");r.$selection.trigger("focus");r._detachCloseHandler(e)});e.on("enable",function(){r.$selection.attr("tabindex",r._tabindex);r.$selection.attr("aria-disabled","false")});e.on("disable",function(){r.$selection.attr("tabindex","-1");r.$selection.attr("aria-disabled","true")})};r.prototype._handleBlur=function(e){var t=this;window.setTimeout(function(){if(document.activeElement==t.$selection[0]||n.contains(t.$selection[0],document.activeElement)){return}t.trigger("blur",e)},1)};r.prototype._attachCloseHandler=function(e){n(document.body).on("mousedown.select2."+e.id,function(e){var t=n(e.target);var r=t.closest(".select2");var a=n(".select2.select2-container--open");a.each(function(){if(this==r[0]){return}var e=i.GetData(this,"element");e.select2("close")})})};r.prototype._detachCloseHandler=function(e){n(document.body).off("mousedown.select2."+e.id)};r.prototype.position=function(e,t){var r=t.find(".selection");r.append(e)};r.prototype.destroy=function(){this._detachCloseHandler(this.container)};r.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")};r.prototype.isEnabled=function(){return!this.isDisabled()};r.prototype.isDisabled=function(){return this.options.get("disabled")};return r});t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,r,a){function n(){n.__super__.constructor.apply(this,arguments)}r.Extend(n,t);n.prototype.render=function(){var e=n.__super__.render.call(this);e[0].classList.add("select2-selection--single");e.html('<span class="select2-selection__rendered"></span>'+'<span class="select2-selection__arrow" role="presentation">'+'<b role="presentation"></b>'+"</span>");return e};n.prototype.bind=function(t,e){var r=this;n.__super__.bind.apply(this,arguments);var a=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",a).attr("role","textbox").attr("aria-readonly","true");this.$selection.attr("aria-labelledby",a);this.$selection.attr("aria-controls",a);this.$selection.on("mousedown",function(e){if(e.which!==1){return}r.trigger("toggle",{originalEvent:e})});this.$selection.on("focus",function(e){});this.$selection.on("blur",function(e){});t.on("focus",function(e){if(!t.isOpen()){r.$selection.trigger("focus")}})};n.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty();e.removeAttr("title")};n.prototype.display=function(e,t){var r=this.options.get("templateSelection");var a=this.options.get("escapeMarkup");return a(r(e,t))};n.prototype.selectionContainer=function(){return e("<span></span>")};n.prototype.update=function(e){if(e.length===0){this.clear();return}var t=e[0];var r=this.$selection.find(".select2-selection__rendered");var a=this.display(t,r);r.empty().append(a);var n=t.title||t.text;if(n){r.attr("title",n)}else{r.removeAttr("title")}};return n});t.define("select2/selection/multiple",["jquery","./base","../utils"],function(i,e,d){function a(e,t){a.__super__.constructor.apply(this,arguments)}d.Extend(a,e);a.prototype.render=function(){var e=a.__super__.render.call(this);e[0].classList.add("select2-selection--multiple");e.html('<ul class="select2-selection__rendered"></ul>');return e};a.prototype.bind=function(e,t){var n=this;a.__super__.bind.apply(this,arguments);var r=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",r);this.$selection.on("click",function(e){n.trigger("toggle",{originalEvent:e})});this.$selection.on("click",".select2-selection__choice__remove",function(e){if(n.isDisabled()){return}var t=i(this);var r=t.parent();var a=d.GetData(r[0],"data");n.trigger("unselect",{originalEvent:e,data:a})});this.$selection.on("keydown",".select2-selection__choice__remove",function(e){if(n.isDisabled()){return}e.stopPropagation()})};a.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty();e.removeAttr("title")};a.prototype.display=function(e,t){var r=this.options.get("templateSelection");var a=this.options.get("escapeMarkup");return a(r(e,t))};a.prototype.selectionContainer=function(){var e=i('<li class="select2-selection__choice">'+'<button type="button" class="select2-selection__choice__remove" '+'tabindex="-1">'+'<span aria-hidden="true">&times;</span>'+"</button>"+'<span class="select2-selection__choice__display"></span>'+"</li>");return e};a.prototype.update=function(e){this.clear();if(e.length===0){return}var t=[];var r=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-";for(var a=0;a<e.length;a++){var n=e[a];var i=this.selectionContainer();var o=this.display(n,i);var s=r+d.generateChars(4)+"-";if(n.id){s+=n.id}else{s+=d.generateChars(4)}i.find(".select2-selection__choice__display").append(o).attr("id",s);var l=n.title||n.text;if(l){i.attr("title",l)}var u=this.options.get("translations").get("removeItem");var c=i.find(".select2-selection__choice__remove");c.attr("title",u());c.attr("aria-label",u());c.attr("aria-describedby",s);d.StoreData(i[0],"data",n);t.push(i)}var f=this.$selection.find(".select2-selection__rendered");f.append(t)};return a});t.define("select2/selection/placeholder",[],function(){function e(e,t,r){this.placeholder=this.normalizePlaceholder(r.get("placeholder"));e.call(this,t,r)}e.prototype.normalizePlaceholder=function(e,t){if(typeof t==="string"){t={id:"",text:t}}return t};e.prototype.createPlaceholder=function(e,t){var r=this.selectionContainer();r.html(this.display(t));r[0].classList.add("select2-selection__placeholder");r[0].classList.remove("select2-selection__choice");var a=t.title||t.text||r.text();this.$selection.find(".select2-selection__rendered").attr("title",a);return r};e.prototype.update=function(e,t){var r=t.length==1&&t[0].id!=this.placeholder.id;var a=t.length>1;if(a||r){return e.call(this,t)}this.clear();var n=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(n)};return e});t.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(i,a,s){function e(){}e.prototype.bind=function(e,t,r){var a=this;e.call(this,t,r);if(this.placeholder==null){if(this.options.get("debug")&&window.console&&console.error){console.error("Select2: The `allowClear` option should be used in combination "+"with the `placeholder` option.")}}this.$selection.on("mousedown",".select2-selection__clear",function(e){a._handleClear(e)});t.on("keypress",function(e){a._handleKeyboardClear(e,t)})};e.prototype._handleClear=function(e,t){if(this.isDisabled()){return}var r=this.$selection.find(".select2-selection__clear");if(r.length===0){return}t.stopPropagation();var a=s.GetData(r[0],"data");var n=this.$element.val();this.$element.val(this.placeholder.id);var i={data:a};this.trigger("clear",i);if(i.prevented){this.$element.val(n);return}for(var o=0;o<a.length;o++){i={data:a[o]};this.trigger("unselect",i);if(i.prevented){this.$element.val(n);return}}this.$element.trigger("input").trigger("change");this.trigger("toggle",{})};e.prototype._handleKeyboardClear=function(e,t,r){if(r.isOpen()){return}if(t.which==a.DELETE||t.which==a.BACKSPACE){this._handleClear(t)}};e.prototype.update=function(e,t){e.call(this,t);this.$selection.find(".select2-selection__clear").remove();this.$selection[0].classList.remove("select2-selection--clearable");if(this.$selection.find(".select2-selection__placeholder").length>0||t.length===0){return}var r=this.$selection.find(".select2-selection__rendered").attr("id");var a=this.options.get("translations").get("removeAllItems");var n=i('<button type="button" class="select2-selection__clear" tabindex="-1">'+'<span aria-hidden="true">&times;</span>'+"</button>");n.attr("title",a());n.attr("aria-label",a());n.attr("aria-describedby",r);s.StoreData(n[0],"data",t);this.$selection.prepend(n);this.$selection[0].classList.add("select2-selection--clearable")};return e});t.define("select2/selection/search",["jquery","../utils","../keys"],function(n,l,u){function e(e,t,r){e.call(this,t,r)}e.prototype.render=function(e){var t=this.options.get("translations").get("search");var r=n('<span class="select2-search select2-search--inline">'+'<textarea class="select2-search__field"'+' type="search" tabindex="-1"'+' autocorrect="off" autocapitalize="none"'+' spellcheck="false" role="searchbox" aria-autocomplete="list" >'+"</textarea>"+"</span>");this.$searchContainer=r;this.$search=r.find("textarea");this.$search.prop("autocomplete",this.options.get("autocomplete"));this.$search.attr("aria-label",t());var a=e.call(this);this._transferTabIndex();a.append(this.$searchContainer);return a};e.prototype.bind=function(e,t,r){var n=this;var a=t.id+"-results";var i=t.id+"-container";e.call(this,t,r);n.$search.attr("aria-describedby",i);t.on("open",function(){n.$search.attr("aria-controls",a);n.$search.trigger("focus")});t.on("close",function(){n.$search.val("");n.resizeSearch();n.$search.removeAttr("aria-controls");n.$search.removeAttr("aria-activedescendant");n.$search.trigger("focus")});t.on("enable",function(){n.$search.prop("disabled",false);n._transferTabIndex()});t.on("disable",function(){n.$search.prop("disabled",true)});t.on("focus",function(e){n.$search.trigger("focus")});t.on("results:focus",function(e){if(e.data._resultId){n.$search.attr("aria-activedescendant",e.data._resultId)}else{n.$search.removeAttr("aria-activedescendant")}});this.$selection.on("focusin",".select2-search--inline",function(e){n.trigger("focus",e)});this.$selection.on("focusout",".select2-search--inline",function(e){n._handleBlur(e)});this.$selection.on("keydown",".select2-search--inline",function(e){e.stopPropagation();n.trigger("keypress",e);n._keyUpPrevented=e.isDefaultPrevented();var t=e.which;if(t===u.BACKSPACE&&n.$search.val()===""){var r=n.$selection.find(".select2-selection__choice").last();if(r.length>0){var a=l.GetData(r[0],"data");n.searchRemoveChoice(a);e.preventDefault()}}});this.$selection.on("click",".select2-search--inline",function(e){if(n.$search.val()){e.stopPropagation()}});var o=document.documentMode;var s=o&&o<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){if(s){n.$selection.off("input.search input.searchcheck");return}n.$selection.off("keyup.search")});this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(s&&e.type==="input"){n.$selection.off("input.search input.searchcheck");return}var t=e.which;if(t==u.SHIFT||t==u.CTRL||t==u.ALT){return}if(t==u.TAB){return}n.handleSearch(e)})};e.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex"));this.$selection.attr("tabindex","-1")};e.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)};e.prototype.update=function(e,t){var r=this.$search[0]==document.activeElement;this.$search.attr("placeholder","");e.call(this,t);this.resizeSearch();if(r){this.$search.trigger("focus")}};e.prototype.handleSearch=function(){this.resizeSearch();if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=false};e.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t});this.$search.val(t.text);this.handleSearch()};e.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="100%";if(this.$search.attr("placeholder")===""){var t=this.$search.val().length+1;e=t*.75+"em"}this.$search.css("width",e)};return e});t.define("select2/selection/selectionCss",["../utils"],function(a){function e(){}e.prototype.render=function(e){var t=e.call(this);var r=this.options.get("selectionCssClass")||"";if(r.indexOf(":all:")!==-1){r=r.replace(":all:","");a.copyNonInternalCssClasses(t[0],this.$element[0])}t.addClass(r);return t};return e});t.define("select2/selection/eventRelay",["jquery"],function(o){function e(){}e.prototype.bind=function(e,t,r){var a=this;var n=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"];var i=["opening","closing","selecting","unselecting","clearing"];e.call(this,t,r);t.on("*",function(e,t){if(n.indexOf(e)===-1){return}t=t||{};var r=o.Event("select2:"+e,{params:t});a.$element.trigger(r);if(i.indexOf(e)===-1){return}t.prevented=r.isDefaultPrevented()})};return e});t.define("select2/translation",["jquery","require"],function(t,r){function a(e){this.dict=e||{}}a.prototype.all=function(){return this.dict};a.prototype.get=function(e){return this.dict[e]};a.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)};a._cache={};a.loadPath=function(e){if(!(e in a._cache)){var t=r(e);a._cache[e]=t}return new a(a._cache[e])};return a});t.define("select2/diacritics",[],function(){var e={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Œ":"OE","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","œ":"oe","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ώ":"ω","ς":"σ","’":"'"};return e});t.define("select2/data/base",["../utils"],function(a){function r(e,t){r.__super__.constructor.call(this)}a.Extend(r,a.Observable);r.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")};r.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")};r.prototype.bind=function(e,t){};r.prototype.destroy=function(){};r.prototype.generateResultId=function(e,t){var r=e.id+"-result-";r+=a.generateChars(4);if(t.id!=null){r+="-"+t.id.toString()}else{r+="-"+a.generateChars(4)}return r};return r});t.define("select2/data/select",["./base","../utils","jquery"],function(e,l,u){function r(e,t){this.$element=e;this.options=t;r.__super__.constructor.call(this)}l.Extend(r,e);r.prototype.current=function(e){var t=this;var r=Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),function(e){return t.item(u(e))});e(r)};r.prototype.select=function(n){var i=this;n.selected=true;if(n.element!=null&&n.element.tagName.toLowerCase()==="option"){n.element.selected=true;this.$element.trigger("input").trigger("change");return}if(this.$element.prop("multiple")){this.current(function(e){var t=[];n=[n];n.push.apply(n,e);for(var r=0;r<n.length;r++){var a=n[r].id;if(t.indexOf(a)===-1){t.push(a)}}i.$element.val(t);i.$element.trigger("input").trigger("change")})}else{var e=n.id;this.$element.val(e);this.$element.trigger("input").trigger("change")}};r.prototype.unselect=function(n){var i=this;if(!this.$element.prop("multiple")){return}n.selected=false;if(n.element!=null&&n.element.tagName.toLowerCase()==="option"){n.element.selected=false;this.$element.trigger("input").trigger("change");return}this.current(function(e){var t=[];for(var r=0;r<e.length;r++){var a=e[r].id;if(a!==n.id&&t.indexOf(a)===-1){t.push(a)}}i.$element.val(t);i.$element.trigger("input").trigger("change")})};r.prototype.bind=function(e,t){var r=this;this.container=e;e.on("select",function(e){r.select(e.data)});e.on("unselect",function(e){r.unselect(e.data)})};r.prototype.destroy=function(){this.$element.find("*").each(function(){l.RemoveData(this)})};r.prototype.query=function(a,e){var n=[];var i=this;var t=this.$element.children();t.each(function(){if(this.tagName.toLowerCase()!=="option"&&this.tagName.toLowerCase()!=="optgroup"){return}var e=u(this);var t=i.item(e);var r=i.matches(a,t);if(r!==null){n.push(r)}});e({results:n})};r.prototype.addOptions=function(e){this.$element.append(e)};r.prototype.option=function(e){var t;if(e.children){t=document.createElement("optgroup");t.label=e.text}else{t=document.createElement("option");if(t.textContent!==undefined){t.textContent=e.text}else{t.innerText=e.text}}if(e.id!==undefined){t.value=e.id}if(e.disabled){t.disabled=true}if(e.selected){t.selected=true}if(e.title){t.title=e.title}var r=this._normalizeItem(e);r.element=t;l.StoreData(t,"data",r);return u(t)};r.prototype.item=function(e){var t={};t=l.GetData(e[0],"data");if(t!=null){return t}var r=e[0];if(r.tagName.toLowerCase()==="option"){t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")}}else if(r.tagName.toLowerCase()==="optgroup"){t={text:e.prop("label"),children:[],title:e.prop("title")};var a=e.children("option");var n=[];for(var i=0;i<a.length;i++){var o=u(a[i]);var s=this.item(o);n.push(s)}t.children=n}t=this._normalizeItem(t);t.element=e[0];l.StoreData(e[0],"data",t);return t};r.prototype._normalizeItem=function(e){if(e!==Object(e)){e={id:e,text:e}}e=u.extend({},{text:""},e);var t={selected:false,disabled:false};if(e.id!=null){e.id=e.id.toString()}if(e.text!=null){e.text=e.text.toString()}if(e._resultId==null&&e.id&&this.container!=null){e._resultId=this.generateResultId(this.container,e)}return u.extend({},t,e)};r.prototype.matches=function(e,t){var r=this.options.get("matcher");return r(e,t)};return r});t.define("select2/data/array",["./select","../utils","jquery"],function(e,t,p){function a(e,t){this._dataToConvert=t.get("data")||[];a.__super__.constructor.call(this,e,t)}t.Extend(a,e);a.prototype.bind=function(e,t){a.__super__.bind.call(this,e,t);this.addOptions(this.convertToOptions(this._dataToConvert))};a.prototype.select=function(r){var e=this.$element.find("option").filter(function(e,t){return t.value==r.id.toString()});if(e.length===0){e=this.option(r);this.addOptions(e)}a.__super__.select.call(this,r)};a.prototype.convertToOptions=function(e){var t=this;var r=this.$element.find("option");var a=r.map(function(){return t.item(p(this)).id}).get();var n=[];function i(e){return function(){return p(this).val()==e.id}}for(var o=0;o<e.length;o++){var s=this._normalizeItem(e[o]);if(a.indexOf(s.id)>=0){var l=r.filter(i(s));var u=this.item(l);var c=p.extend(true,{},s,u);var f=this.option(c);l.replaceWith(f);continue}var d=this.option(s);if(s.children){var v=this.convertToOptions(s.children);d.append(v)}n.push(d)}return n};return a});t.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,o){function r(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax"));if(this.ajaxOptions.processResults!=null){this.processResults=this.ajaxOptions.processResults}r.__super__.constructor.call(this,e,t)}t.Extend(r,e);r.prototype._applyDefaults=function(e){var t={data:function(e){return o.extend({},e,{q:e.term})},transport:function(e,t,r){var a=o.ajax(e);a.then(t);a.fail(r);return a}};return o.extend({},t,e,true)};r.prototype.processResults=function(e){return e};r.prototype.query=function(r,a){var e=[];var n=this;if(this._request!=null){if(typeof this._request.abort==="function"){this._request.abort()}this._request=null}var t=o.extend({type:"GET"},this.ajaxOptions);if(typeof t.url==="function"){t.url=t.url.call(this.$element,r)}if(typeof t.data==="function"){t.data=t.data.call(this.$element,r)}function i(){var e=t.transport(t,function(e){var t=n.processResults(e,r);if(n.options.get("debug")&&window.console&&console.error){if(!t||!t.results||!Array.isArray(t.results)){console.error("Select2: The AJAX results did not return an array in the "+"`results` key of the response.")}}a(t)},function(){if("status"in e&&(e.status===0||e.status==="0")){return}n.trigger("results:message",{message:"errorLoading"})});n._request=e}if(this.ajaxOptions.delay&&r.term!=null){if(this._queryTimeout){window.clearTimeout(this._queryTimeout)}this._queryTimeout=window.setTimeout(i,this.ajaxOptions.delay)}else{i()}};return r});t.define("select2/data/tags",["jquery"],function(r){function e(e,t,r){var a=r.get("tags");var n=r.get("createTag");if(n!==undefined){this.createTag=n}var i=r.get("insertTag");if(i!==undefined){this.insertTag=i}e.call(this,t,r);if(Array.isArray(a)){for(var o=0;o<a.length;o++){var s=a[o];var l=this._normalizeItem(s);var u=this.option(l);this.$element.append(u)}}}e.prototype.query=function(e,f,d){var v=this;this._removeOldTags();if(f.term==null||f.page!=null){e.call(this,f,d);return}function p(e,t){var r=e.results;for(var a=0;a<r.length;a++){var n=r[a];var i=n.children!=null&&!p({results:n.children},true);var o=(n.text||"").toUpperCase();var s=(f.term||"").toUpperCase();var l=o===s;if(l||i){if(t){return false}e.data=r;d(e);return}}if(t){return true}var u=v.createTag(f);if(u!=null){var c=v.option(u);c.attr("data-select2-tag","true");v.addOptions([c]);v.insertTag(r,u)}e.results=r;d(e)}e.call(this,f,p)};e.prototype.createTag=function(e,t){if(t.term==null){return null}var r=t.term.trim();if(r===""){return null}return{id:r,text:r}};e.prototype.insertTag=function(e,t,r){t.unshift(r)};e.prototype._removeOldTags=function(e){var t=this.$element.find("option[data-select2-tag]");t.each(function(){if(this.selected){return}r(this).remove()})};return e});t.define("select2/data/tokenizer",["jquery"],function(d){function e(e,t,r){var a=r.get("tokenizer");if(a!==undefined){this.tokenizer=a}e.call(this,t,r)}e.prototype.bind=function(e,t,r){e.call(this,t,r);this.$search=t.dropdown.$search||t.selection.$search||r.find(".select2-search__field")};e.prototype.query=function(e,t,r){var n=this;function a(e){var t=n._normalizeItem(e);var r=n.$element.find("option").filter(function(){return d(this).val()===t.id});if(!r.length){var a=n.option(t);a.attr("data-select2-tag",true);n._removeOldTags();n.addOptions([a])}i(t)}function i(e){n.trigger("select",{data:e})}t.term=t.term||"";var o=this.tokenizer(t,this.options,a);if(o.term!==t.term){if(this.$search.length){this.$search.val(o.term);this.$search.trigger("focus")}t.term=o.term}e.call(this,t,r)};e.prototype.tokenizer=function(e,t,r,a){var n=r.get("tokenSeparators")||[];var i=t.term;var o=0;var s=this.createTag||function(e){return{id:e.term,text:e.term}};while(o<i.length){var l=i[o];if(n.indexOf(l)===-1){o++;continue}var u=i.substr(0,o);var c=d.extend({},t,{term:u});var f=s(c);if(f==null){o++;continue}a(f);i=i.substr(o+1)||"";o=0}return{term:i}};return e});t.define("select2/data/minimumInputLength",[],function(){function e(e,t,r){this.minimumInputLength=r.get("minimumInputLength");e.call(this,t,r)}e.prototype.query=function(e,t,r){t.term=t.term||"";if(t.term.length<this.minimumInputLength){this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}});return}e.call(this,t,r)};return e});t.define("select2/data/maximumInputLength",[],function(){function e(e,t,r){this.maximumInputLength=r.get("maximumInputLength");e.call(this,t,r)}e.prototype.query=function(e,t,r){t.term=t.term||"";if(this.maximumInputLength>0&&t.term.length>this.maximumInputLength){this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}});return}e.call(this,t,r)};return e});t.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,r){this.maximumSelectionLength=r.get("maximumSelectionLength");e.call(this,t,r)}e.prototype.bind=function(e,t,r){var a=this;e.call(this,t,r);t.on("select",function(){a._checkIfMaximumSelected()})};e.prototype.query=function(e,t,r){var a=this;this._checkIfMaximumSelected(function(){e.call(a,t,r)})};e.prototype._checkIfMaximumSelected=function(e,r){var a=this;this.current(function(e){var t=e!=null?e.length:0;if(a.maximumSelectionLength>0&&t>=a.maximumSelectionLength){a.trigger("results:message",{message:"maximumSelected",args:{maximum:a.maximumSelectionLength}});return}if(r){r()}})};return e});t.define("select2/dropdown",["jquery","./utils"],function(t,e){function r(e,t){this.$element=e;this.options=t;r.__super__.constructor.call(this)}e.Extend(r,e.Observable);r.prototype.render=function(){var e=t('<span class="select2-dropdown">'+'<span class="select2-results"></span>'+"</span>");e.attr("dir",this.options.get("dir"));this.$dropdown=e;return e};r.prototype.bind=function(){};r.prototype.position=function(e,t){};r.prototype.destroy=function(){this.$dropdown.remove()};return r});t.define("select2/dropdown/search",["jquery"],function(i){function e(){}e.prototype.render=function(e){var t=e.call(this);var r=this.options.get("translations").get("search");var a=i('<span class="select2-search select2-search--dropdown">'+'<input class="select2-search__field" type="search" tabindex="-1"'+' autocorrect="off" autocapitalize="none"'+' spellcheck="false" role="searchbox" aria-autocomplete="list" />'+"</span>");this.$searchContainer=a;this.$search=a.find("input");this.$search.prop("autocomplete",this.options.get("autocomplete"));this.$search.attr("aria-label",r());t.prepend(a);return t};e.prototype.bind=function(e,t,r){var a=this;var n=t.id+"-results";e.call(this,t,r);this.$search.on("keydown",function(e){a.trigger("keypress",e);a._keyUpPrevented=e.isDefaultPrevented()});this.$search.on("input",function(e){i(this).off("keyup")});this.$search.on("keyup input",function(e){a.handleSearch(e)});t.on("open",function(){a.$search.attr("tabindex",0);a.$search.attr("aria-controls",n);a.$search.trigger("focus");window.setTimeout(function(){a.$search.trigger("focus")},0)});t.on("close",function(){a.$search.attr("tabindex",-1);a.$search.removeAttr("aria-controls");a.$search.removeAttr("aria-activedescendant");a.$search.val("");a.$search.trigger("blur")});t.on("focus",function(){if(!t.isOpen()){a.$search.trigger("focus")}});t.on("results:all",function(e){if(e.query.term==null||e.query.term===""){var t=a.showSearch(e);if(t){a.$searchContainer[0].classList.remove("select2-search--hide")}else{a.$searchContainer[0].classList.add("select2-search--hide")}}});t.on("results:focus",function(e){if(e.data._resultId){a.$search.attr("aria-activedescendant",e.data._resultId)}else{a.$search.removeAttr("aria-activedescendant")}})};e.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=false};e.prototype.showSearch=function(e,t){return true};return e});t.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,r,a){this.placeholder=this.normalizePlaceholder(r.get("placeholder"));e.call(this,t,r,a)}e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results);e.call(this,t)};e.prototype.normalizePlaceholder=function(e,t){if(typeof t==="string"){t={id:"",text:t}}return t};e.prototype.removePlaceholder=function(e,t){var r=t.slice(0);for(var a=t.length-1;a>=0;a--){var n=t[a];if(this.placeholder.id===n.id){r.splice(a,1)}}return r};return e});t.define("select2/dropdown/infiniteScroll",["jquery"],function(a){function e(e,t,r,a){this.lastParams={};e.call(this,t,r,a);this.$loadingMore=this.createLoadingMore();this.loading=false}e.prototype.append=function(e,t){this.$loadingMore.remove();this.loading=false;e.call(this,t);if(this.showLoadingMore(t)){this.$results.append(this.$loadingMore);this.loadMoreIfNeeded()}};e.prototype.bind=function(e,t,r){var a=this;e.call(this,t,r);t.on("query",function(e){a.lastParams=e;a.loading=true});t.on("query:append",function(e){a.lastParams=e;a.loading=true});this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))};e.prototype.loadMoreIfNeeded=function(){var e=a.contains(document.documentElement,this.$loadingMore[0]);if(this.loading||!e){return}var t=this.$results.offset().top+this.$results.outerHeight(false);var r=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(false);if(t+50>=r){this.loadMore()}};e.prototype.loadMore=function(){this.loading=true;var e=a.extend({},{page:1},this.lastParams);e.page++;this.trigger("query:append",e)};e.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more};e.prototype.createLoadingMore=function(){var e=a("<li "+'class="select2-results__option select2-results__option--load-more"'+'role="option" aria-disabled="true"></li>');var t=this.options.get("translations").get("loadingMore");e.html(t(this.lastParams));return e};return e});t.define("select2/dropdown/attachBody",["jquery","../utils"],function(v,s){function e(e,t,r){this.$dropdownParent=v(r.get("dropdownParent")||document.body);e.call(this,t,r)}e.prototype.bind=function(e,t,r){var a=this;e.call(this,t,r);t.on("open",function(){a._showDropdown();a._attachPositioningHandler(t);a._bindContainerResultHandlers(t)});t.on("close",function(){a._hideDropdown();a._detachPositioningHandler(t)});this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})};e.prototype.destroy=function(e){e.call(this);this.$dropdownContainer.remove()};e.prototype.position=function(e,t,r){t.attr("class",r.attr("class"));t[0].classList.remove("select2");t[0].classList.add("select2-container--open");t.css({position:"absolute",top:-999999});this.$container=r};e.prototype.render=function(e){var t=v("<span></span>");var r=e.call(this);t.append(r);this.$dropdownContainer=t;return t};e.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()};e.prototype._bindContainerResultHandlers=function(e,t){if(this._containerResultsHandlersBound){return}var r=this;t.on("results:all",function(){r._positionDropdown();r._resizeDropdown()});t.on("results:append",function(){r._positionDropdown();r._resizeDropdown()});t.on("results:message",function(){r._positionDropdown();r._resizeDropdown()});t.on("select",function(){r._positionDropdown();r._resizeDropdown()});t.on("unselect",function(){r._positionDropdown();r._resizeDropdown()});this._containerResultsHandlersBound=true};e.prototype._attachPositioningHandler=function(e,t){var r=this;var a="scroll.select2."+t.id;var n="resize.select2."+t.id;var i="orientationchange.select2."+t.id;var o=this.$container.parents().filter(s.hasScroll);o.each(function(){s.StoreData(this,"select2-scroll-position",{x:v(this).scrollLeft(),y:v(this).scrollTop()})});o.on(a,function(e){var t=s.GetData(this,"select2-scroll-position");v(this).scrollTop(t.y)});v(window).on(a+" "+n+" "+i,function(e){r._positionDropdown();r._resizeDropdown()})};e.prototype._detachPositioningHandler=function(e,t){var r="scroll.select2."+t.id;var a="resize.select2."+t.id;var n="orientationchange.select2."+t.id;var i=this.$container.parents().filter(s.hasScroll);i.off(r);v(window).off(r+" "+a+" "+n)};e.prototype._positionDropdown=function(){var e=v(window);var t=this.$dropdown[0].classList.contains("select2-dropdown--above");var r=this.$dropdown[0].classList.contains("select2-dropdown--below");var a=null;var n=this.$container.offset();n.bottom=n.top+this.$container.outerHeight(false);var i={height:this.$container.outerHeight(false)};i.top=n.top;i.bottom=n.top+i.height;var o={height:this.$dropdown.outerHeight(false)};var s={top:e.scrollTop(),bottom:e.scrollTop()+e.height()};var l=s.top<n.top-o.height;var u=s.bottom>n.bottom+o.height;var c={left:n.left,top:i.bottom};var f=this.$dropdownParent;if(f.css("position")==="static"){f=f.offsetParent()}var d={top:0,left:0};if(v.contains(document.body,f[0])||f[0].isConnected){d=f.offset()}c.top-=d.top;c.left-=d.left;if(!t&&!r){a="below"}if(!u&&l&&!t){a="above"}else if(!l&&u&&t){a="below"}if(a=="above"||t&&a!=="below"){c.top=i.top-d.top-o.height}if(a!=null){this.$dropdown[0].classList.remove("select2-dropdown--below");this.$dropdown[0].classList.remove("select2-dropdown--above");this.$dropdown[0].classList.add("select2-dropdown--"+a);this.$container[0].classList.remove("select2-container--below");this.$container[0].classList.remove("select2-container--above");this.$container[0].classList.add("select2-container--"+a)}this.$dropdownContainer.css(c)};e.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(false)+"px"};if(this.options.get("dropdownAutoWidth")){e.minWidth=e.width;e.position="relative";e.width="auto"}this.$dropdown.css(e)};e.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown()};return e});t.define("select2/dropdown/minimumResultsForSearch",[],function(){function n(e){var t=0;for(var r=0;r<e.length;r++){var a=e[r];if(a.children){t+=n(a.children)}else{t++}}return t}function e(e,t,r,a){this.minimumResultsForSearch=r.get("minimumResultsForSearch");if(this.minimumResultsForSearch<0){this.minimumResultsForSearch=Infinity}e.call(this,t,r,a)}e.prototype.showSearch=function(e,t){if(n(t.data.results)<this.minimumResultsForSearch){return false}return e.call(this,t)};return e});t.define("select2/dropdown/selectOnClose",["../utils"],function(i){function e(){}e.prototype.bind=function(e,t,r){var a=this;e.call(this,t,r);t.on("close",function(e){a._handleSelectOnClose(e)})};e.prototype._handleSelectOnClose=function(e,t){if(t&&t.originalSelect2Event!=null){var r=t.originalSelect2Event;if(r._type==="select"||r._type==="unselect"){return}}var a=this.getHighlightedResults();if(a.length<1){return}var n=i.GetData(a[0],"data");if(n.element!=null&&n.element.selected||n.element==null&&n.selected){return}this.trigger("select",{data:n})};return e});t.define("select2/dropdown/closeOnSelect",[],function(){function e(){}e.prototype.bind=function(e,t,r){var a=this;e.call(this,t,r);t.on("select",function(e){a._selectTriggered(e)});t.on("unselect",function(e){a._selectTriggered(e)})};e.prototype._selectTriggered=function(e,t){var r=t.originalEvent;if(r&&(r.ctrlKey||r.metaKey)){return}this.trigger("close",{originalEvent:r,originalSelect2Event:t})};return e});t.define("select2/dropdown/dropdownCss",["../utils"],function(a){function e(){}e.prototype.render=function(e){var t=e.call(this);var r=this.options.get("dropdownCssClass")||"";if(r.indexOf(":all:")!==-1){r=r.replace(":all:","");a.copyNonInternalCssClasses(t[0],this.$element[0])}t.addClass(r);return t};return e});t.define("select2/dropdown/tagsSearchHighlight",["../utils"],function(i){function e(){}e.prototype.highlightFirstItem=function(e){var t=this.$results.find(".select2-results__option--selectable"+":not(.select2-results__option--selected)");if(t.length>0){var r=t.first();var a=i.GetData(r[0],"data");var n=a.element;if(n&&n.getAttribute){if(n.getAttribute("data-select2-tag")==="true"){r.trigger("mouseenter");return}}}e.call(this)};return e});t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum;var r="Please delete "+t+" character";if(t!=1){r+="s"}return r},inputTooShort:function(e){var t=e.minimum-e.input.length;var r="Please enter "+t+" or more characters";return r},loadingMore:function(){return"Loading more results…"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";if(e.maximum!=1){t+="s"}return t},noResults:function(){return"No results found"},searching:function(){return"Searching…"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"},search:function(){return"Search"}}});t.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./dropdown/tagsSearchHighlight","./i18n/en"],function(c,i,o,s,l,u,f,d,v,p,h,r,m,g,y,x,b,_,w,T,k,M,A,S,E,L,C,D,O,I,e){function t(){this.reset()}t.prototype.apply=function(e){e=c.extend(true,{},this.defaults,e);if(e.dataAdapter==null){if(e.ajax!=null){e.dataAdapter=y}else if(e.data!=null){e.dataAdapter=g}else{e.dataAdapter=m}if(e.minimumInputLength>0){e.dataAdapter=p.Decorate(e.dataAdapter,_)}if(e.maximumInputLength>0){e.dataAdapter=p.Decorate(e.dataAdapter,w)}if(e.maximumSelectionLength>0){e.dataAdapter=p.Decorate(e.dataAdapter,T)}if(e.tags){e.dataAdapter=p.Decorate(e.dataAdapter,x)}if(e.tokenSeparators!=null||e.tokenizer!=null){e.dataAdapter=p.Decorate(e.dataAdapter,b)}}if(e.resultsAdapter==null){e.resultsAdapter=i;if(e.ajax!=null){e.resultsAdapter=p.Decorate(e.resultsAdapter,S)}if(e.placeholder!=null){e.resultsAdapter=p.Decorate(e.resultsAdapter,A)}if(e.selectOnClose){e.resultsAdapter=p.Decorate(e.resultsAdapter,C)}if(e.tags){e.resultsAdapter=p.Decorate(e.resultsAdapter,I)}}if(e.dropdownAdapter==null){if(e.multiple){e.dropdownAdapter=k}else{var t=p.Decorate(k,M);e.dropdownAdapter=t}if(e.minimumResultsForSearch!==0){e.dropdownAdapter=p.Decorate(e.dropdownAdapter,L)}if(e.closeOnSelect){e.dropdownAdapter=p.Decorate(e.dropdownAdapter,D)}if(e.dropdownCssClass!=null){e.dropdownAdapter=p.Decorate(e.dropdownAdapter,O)}e.dropdownAdapter=p.Decorate(e.dropdownAdapter,E)}if(e.selectionAdapter==null){if(e.multiple){e.selectionAdapter=s}else{e.selectionAdapter=o}if(e.placeholder!=null){e.selectionAdapter=p.Decorate(e.selectionAdapter,l)}if(e.allowClear){e.selectionAdapter=p.Decorate(e.selectionAdapter,u)}if(e.multiple){e.selectionAdapter=p.Decorate(e.selectionAdapter,f)}if(e.selectionCssClass!=null){e.selectionAdapter=p.Decorate(e.selectionAdapter,d)}e.selectionAdapter=p.Decorate(e.selectionAdapter,v)}e.language=this._resolveLanguage(e.language);e.language.push("en");var r=[];for(var a=0;a<e.language.length;a++){var n=e.language[a];if(r.indexOf(n)===-1){r.push(n)}}e.language=r;e.translations=this._processTranslations(e.language,e.debug);return e};t.prototype.reset=function(){function l(e){function t(e){return r[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function u(e,t){if(e.term==null||e.term.trim()===""){return t}if(t.children&&t.children.length>0){var r=c.extend(true,{},t);for(var a=t.children.length-1;a>=0;a--){var n=t.children[a];var i=u(e,n);if(i==null){r.children.splice(a,1)}}if(r.children.length>0){return r}return u(e,r)}var o=l(t.text).toUpperCase();var s=l(e.term).toUpperCase();if(o.indexOf(s)>-1){return t}return null}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:true,debug:false,dropdownAutoWidth:false,escapeMarkup:p.escapeMarkup,language:{},matcher:u,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:false,scrollAfterSelect:false,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}};t.prototype.applyFromElement=function(e,t){var r=e.language;var a=this.defaults.language;var n=t.prop("lang");var i=t.closest("[lang]").prop("lang");var o=Array.prototype.concat.call(this._resolveLanguage(n),this._resolveLanguage(r),this._resolveLanguage(a),this._resolveLanguage(i));e.language=o;return e};t.prototype._resolveLanguage=function(e){if(!e){return[]}if(c.isEmptyObject(e)){return[]}if(c.isPlainObject(e)){return[e]}var t;if(!Array.isArray(e)){t=[e]}else{t=e}var r=[];for(var a=0;a<t.length;a++){r.push(t[a]);if(typeof t[a]==="string"&&t[a].indexOf("-")>0){var n=t[a].split("-");var i=n[0];r.push(i)}}return r};t.prototype._processTranslations=function(e,t){var r=new h;for(var a=0;a<e.length;a++){var n=new h;var i=e[a];if(typeof i==="string"){try{n=h.loadPath(i)}catch(e){try{i=this.defaults.amdLanguageBase+i;n=h.loadPath(i)}catch(e){if(t&&window.console&&console.warn){console.warn('Select2: The language file for "'+i+'" could '+"not be automatically loaded. A fallback will be used instead.")}}}}else if(c.isPlainObject(i)){n=new h(i)}else{n=i}r.extend(n)}return r};t.prototype.set=function(e,t){var r=c.camelCase(e);var a={};a[r]=t;var n=p._convertData(a);c.extend(true,this.defaults,n)};var a=new t;return a});t.define("select2/options",["jquery","./defaults","./utils"],function(d,r,v){function e(e,t){this.options=e;if(t!=null){this.fromElement(t)}if(t!=null){this.options=r.applyFromElement(this.options,t)}this.options=r.apply(this.options)}e.prototype.fromElement=function(e){var t=["select2"];if(this.options.multiple==null){this.options.multiple=e.prop("multiple")}if(this.options.disabled==null){this.options.disabled=e.prop("disabled")}if(this.options.autocomplete==null&&e.prop("autocomplete")){this.options.autocomplete=e.prop("autocomplete")}if(this.options.dir==null){if(e.prop("dir")){this.options.dir=e.prop("dir")}else if(e.closest("[dir]").prop("dir")){this.options.dir=e.closest("[dir]").prop("dir")}else{this.options.dir="ltr"}}e.prop("disabled",this.options.disabled);e.prop("multiple",this.options.multiple);if(v.GetData(e[0],"select2Tags")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-select2-tags` attribute has been changed to "+'use the `data-data` and `data-tags="true"` attributes and will be '+"removed in future versions of Select2.")}v.StoreData(e[0],"data",v.GetData(e[0],"select2Tags"));v.StoreData(e[0],"tags",true)}if(v.GetData(e[0],"ajaxUrl")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-ajax-url` attribute has been changed to "+"`data-ajax--url` and support for the old attribute will be removed"+" in future versions of Select2.")}e.attr("ajax--url",v.GetData(e[0],"ajaxUrl"));v.StoreData(e[0],"ajax-Url",v.GetData(e[0],"ajaxUrl"))}var r={};function a(e,t){return t.toUpperCase()}for(var n=0;n<e[0].attributes.length;n++){var i=e[0].attributes[n].name;var o="data-";if(i.substr(0,o.length)==o){var s=i.substring(o.length);var l=v.GetData(e[0],s);var u=s.replace(/-([a-z])/g,a);r[u]=l}}if(d.fn.jquery&&d.fn.jquery.substr(0,2)=="1."&&e[0].dataset){r=d.extend(true,{},e[0].dataset,r)}var c=d.extend(true,{},v.GetData(e[0]),r);c=v._convertData(c);for(var f in c){if(t.indexOf(f)>-1){continue}if(d.isPlainObject(this.options[f])){d.extend(this.options[f],c[f])}else{this.options[f]=c[f]}}return this};e.prototype.get=function(e){return this.options[e]};e.prototype.set=function(e,t){this.options[e]=t};return e});t.define("select2/core",["jquery","./options","./utils","./keys"],function(t,u,c,a){var f=function(e,t){if(c.GetData(e[0],"select2")!=null){c.GetData(e[0],"select2").destroy()}this.$element=e;this.id=this._generateId(e);t=t||{};this.options=new u(t,e);f.__super__.constructor.call(this);var r=e.attr("tabindex")||0;c.StoreData(e[0],"old-tabindex",r);e.attr("tabindex","-1");var a=this.options.get("dataAdapter");this.dataAdapter=new a(e,this.options);var n=this.render();this._placeContainer(n);var i=this.options.get("selectionAdapter");this.selection=new i(e,this.options);this.$selection=this.selection.render();this.selection.position(this.$selection,n);var o=this.options.get("dropdownAdapter");this.dropdown=new o(e,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,n);var s=this.options.get("resultsAdapter");this.results=new s(e,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);var l=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current(function(e){l.trigger("selection:update",{data:e})});e[0].classList.add("select2-hidden-accessible");e.attr("aria-hidden","true");this._syncAttributes();c.StoreData(e[0],"select2",this);e.data("select2",this)};c.Extend(f,c.Observable);f.prototype._generateId=function(e){var t="";if(e.attr("id")!=null){t=e.attr("id")}else if(e.attr("name")!=null){t=e.attr("name")+"-"+c.generateChars(2)}else{t=c.generateChars(4)}t=t.replace(/(:|\.|\[|\]|,)/g,"");t="select2-"+t;return t};f.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));if(t!=null){e.css("width",t)}};f.prototype._resolveWidth=function(e,t){var r=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if(t=="resolve"){var a=this._resolveWidth(e,"style");if(a!=null){return a}return this._resolveWidth(e,"element")}if(t=="element"){var n=e.outerWidth(false);if(n<=0){return"auto"}return n+"px"}if(t=="style"){var i=e.attr("style");if(typeof i!=="string"){return null}var o=i.split(";");for(var s=0,l=o.length;s<l;s=s+1){var u=o[s].replace(/\s/g,"");var c=u.match(r);if(c!==null&&c.length>=1){return c[1]}}return null}if(t=="computedstyle"){var f=window.getComputedStyle(e[0]);return f.width}return t};f.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container)};f.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})});this.$element.on("focus.select2",function(e){t.trigger("focus",e)});this._syncA=c.bind(this._syncAttributes,this);this._syncS=c.bind(this._syncSubtree,this);this._observer=new window.MutationObserver(function(e){t._syncA();t._syncS(e)});this._observer.observe(this.$element[0],{attributes:true,childList:true,subtree:false})};f.prototype._registerDataEvents=function(){var r=this;this.dataAdapter.on("*",function(e,t){r.trigger(e,t)})};f.prototype._registerSelectionEvents=function(){var r=this;var a=["toggle","focus"];this.selection.on("toggle",function(){r.toggleDropdown()});this.selection.on("focus",function(e){r.focus(e)});this.selection.on("*",function(e,t){if(a.indexOf(e)!==-1){return}r.trigger(e,t)})};f.prototype._registerDropdownEvents=function(){var r=this;this.dropdown.on("*",function(e,t){r.trigger(e,t)})};f.prototype._registerResultsEvents=function(){var r=this;this.results.on("*",function(e,t){r.trigger(e,t)})};f.prototype._registerEvents=function(){var r=this;this.on("open",function(){r.$container[0].classList.add("select2-container--open")});this.on("close",function(){r.$container[0].classList.remove("select2-container--open")});this.on("enable",function(){r.$container[0].classList.remove("select2-container--disabled")});this.on("disable",function(){r.$container[0].classList.add("select2-container--disabled")});this.on("blur",function(){r.$container[0].classList.remove("select2-container--focus")});this.on("query",function(t){if(!r.isOpen()){r.trigger("open",{})}this.dataAdapter.query(t,function(e){r.trigger("results:all",{data:e,query:t})})});this.on("query:append",function(t){this.dataAdapter.query(t,function(e){r.trigger("results:append",{data:e,query:t})})});this.on("keypress",function(e){var t=e.which;if(r.isOpen()){if(t===a.ESC||t===a.UP&&e.altKey){r.close(e);e.preventDefault()}else if(t===a.ENTER||t===a.TAB){r.trigger("results:select",{});e.preventDefault()}else if(t===a.SPACE&&e.ctrlKey){r.trigger("results:toggle",{});e.preventDefault()}else if(t===a.UP){r.trigger("results:previous",{});e.preventDefault()}else if(t===a.DOWN){r.trigger("results:next",{});e.preventDefault()}}else{if(t===a.ENTER||t===a.SPACE||t===a.DOWN&&e.altKey){r.open();e.preventDefault()}}})};f.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled"));if(this.isDisabled()){if(this.isOpen()){this.close()}this.trigger("disable",{})}else{this.trigger("enable",{})}};f.prototype._isChangeMutation=function(e){var t=this;if(e.addedNodes&&e.addedNodes.length>0){for(var r=0;r<e.addedNodes.length;r++){var a=e.addedNodes[r];if(a.selected){return true}}}else if(e.removedNodes&&e.removedNodes.length>0){return true}else if(Array.isArray(e)){return e.some(function(e){return t._isChangeMutation(e)})}return false};f.prototype._syncSubtree=function(e){var t=this._isChangeMutation(e);var r=this;if(t){this.dataAdapter.current(function(e){r.trigger("selection:update",{data:e})})}};f.prototype.trigger=function(e,t){var r=f.__super__.trigger;var a={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(t===undefined){t={}}if(e in a){var n=a[e];var i={prevented:false,name:e,args:t};r.call(this,n,i);if(i.prevented){t.prevented=true;return}}r.call(this,e,t)};f.prototype.toggleDropdown=function(){if(this.isDisabled()){return}if(this.isOpen()){this.close()}else{this.open()}};f.prototype.open=function(){if(this.isOpen()){return}if(this.isDisabled()){return}this.trigger("query",{})};f.prototype.close=function(e){if(!this.isOpen()){return}this.trigger("close",{originalEvent:e})};f.prototype.isEnabled=function(){return!this.isDisabled()};f.prototype.isDisabled=function(){return this.options.get("disabled")};f.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")};f.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")};f.prototype.focus=function(e){if(this.hasFocus()){return}this.$container[0].classList.add("select2-container--focus");this.trigger("focus",{})};f.prototype.enable=function(e){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("enable")` method has been deprecated and will'+' be removed in later Select2 versions. Use $element.prop("disabled")'+" instead.")}if(e==null||e.length===0){e=[true]}var t=!e[0];this.$element.prop("disabled",t)};f.prototype.data=function(){if(this.options.get("debug")&&arguments.length>0&&window.console&&console.warn){console.warn('Select2: Data can no longer be set using `select2("data")`. You '+"should consider setting the value instead using `$element.val()`.")}var t=[];this.dataAdapter.current(function(e){t=e});return t};f.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("val")` method has been deprecated and will be'+" removed in later Select2 versions. Use $element.val() instead.")}if(e==null||e.length===0){return this.$element.val()}var t=e[0];if(Array.isArray(t)){t=t.map(function(e){return e.toString()})}this.$element.val(t).trigger("input").trigger("change")};f.prototype.destroy=function(){c.RemoveData(this.$container[0]);this.$container.remove();this._observer.disconnect();this._observer=null;this._syncA=null;this._syncS=null;this.$element.off(".select2");this.$element.attr("tabindex",c.GetData(this.$element[0],"old-tabindex"));this.$element[0].classList.remove("select2-hidden-accessible");this.$element.attr("aria-hidden","false");c.RemoveData(this.$element[0]);this.$element.removeData("select2");this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null};f.prototype.render=function(){var e=t('<span class="select2 select2-container">'+'<span class="selection"></span>'+'<span class="dropdown-wrapper" aria-hidden="true"></span>'+"</span>");e.attr("dir",this.options.get("dir"));this.$container=e;this.$container[0].classList.add("select2-container--"+this.options.get("theme"));c.StoreData(e[0],"element",this.$element);return e};return f});t.define("jquery-mousewheel",["jquery"],function(e){return e});t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(n,e,i,t,o){if(n.fn.select2==null){var s=["open","close","destroy"];n.fn.select2=function(r){r=r||{};if(typeof r==="object"){this.each(function(){var e=n.extend(true,{},r);var t=new i(n(this),e)});return this}else if(typeof r==="string"){var t;var a=Array.prototype.slice.call(arguments,1);this.each(function(){var e=o.GetData(this,"select2");if(e==null&&window.console&&console.error){console.error("The select2('"+r+"') method was called on an "+"element that is not using Select2.")}t=e[r].apply(e,a)});if(s.indexOf(r)>-1){return this}return t}else{throw new Error("Invalid arguments for Select2: "+r)}}}if(n.fn.select2.defaults==null){n.fn.select2.defaults=t}return i});return{define:t.define,require:t.require}}();var t=e.require("jquery.select2");r.fn.select2.amd=e;return t});