!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e||self)._hyperscript=t()}(this,function(){function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t,n){t&&N(e.prototype,t),n&&N(e,n)}function z(e,t){e.prototype=Object.create(t.prototype),a(e.prototype.constructor=e,t)}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e,t,n){return(q=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch(e){return}}}()?Reflect.construct:function(e,t,n){var r=[null],t=(r.push.apply(r,t),new(Function.bind.apply(e,r)));return n&&a(t,n.prototype),t}).apply(null,arguments)}function H(e){var n="function"==typeof Map?new Map:void 0;return(H=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return q(e,arguments,j(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)})(e)}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e){if(e){if("string"==typeof e)return B(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?B(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function L(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function U(e,t){var n=e[t];if(n)return n;n={};return e[t]=n}function V(e,t){return new(e.bind.apply(e,[e].concat(t)))}function d(e,t,n){if(t.contains)return t.contains(n);if(t.includes)return t.includes(n);throw Error("The value of "+e.sourceFor()+" does not have a contains or includes method on it")}function Y(e,t,n){if(t.match)return!!t.match(n);if(t.matches)return t.matches(n);throw Error("The value of "+e.sourceFor()+" does not have a match or matches method on it")}function $(e,t,a,n){var r=t.requireElement("eventName",n),i=t.parseElement("namedArgumentList",n),o="send"===e&&n.matchToken("to")||"trigger"===e&&n.matchToken("on")?t.requireElement("expression",n):t.requireElement("implicitMeTarget",n),s={eventName:r,details:i,to:o,args:[o,r,i],op:function(t,e,n,r){return a.nullCheck(e,o),a.forEach(e,function(e){a.triggerEvent(e,n,r,t.me)}),a.findNext(s,t)}};return s}function G(e,t){var n,r="text";return e.matchToken("a")||e.matchToken("an"),e.matchToken("json")||e.matchToken("Object")?r="json":e.matchToken("response")?r="response":e.matchToken("html")?r="html":e.matchToken("text")||(n=t.requireElement("dotOrColonPath",e).evaluate()),{type:r,conversion:n}}var o,i,e,n,r,W,Z,X,J,s,l,c,K,u,b,f=globalThis,p=(P=Symbol.iterator,(O=Me.prototype).contains=function(e){for(var t,n=S(this);!(t=n()).done;)if(t.value.contains(e))return!0;return!1},O[P]=function(){return this.selectMatches()[Symbol.iterator]()},O.selectMatches=function(){return C.getRootNode(this.relativeToElement).querySelectorAll(this.css)},F(Me,[{key:"css",get:function(){return this.escape?C.escapeSelector(this._css):this._css}},{key:"className",get:function(){return this._css.substr(1)}},{key:"id",get:function(){return this.className()}},{key:"length",get:function(){return this.selectMatches().length}}]),Me),h=(b={"+":"PLUS","-":"MINUS","*":"MULTIPLY","/":"DIVIDE",".":"PERIOD","..":"ELLIPSIS","\\":"BACKSLASH",":":"COLON","%":"PERCENT","|":"PIPE","!":"EXCLAMATION","?":"QUESTION","#":"POUND","&":"AMPERSAND",$:"DOLLAR",";":"SEMI",",":"COMMA","(":"L_PAREN",")":"R_PAREN","<":"L_ANG",">":"R_ANG","<=":"LTE_ANG",">=":"GTE_ANG","==":"EQ","===":"EQQ","!=":"NEQ","!==":"NEQQ","{":"L_BRACE","}":"R_BRACE","[":"L_BRACKET","]":"R_BRACKET","=":"EQUALS"},{tokenize:function(e,t){var n,r=[],a=e,i=0,o=0,s=1,l="<START>",c=0;function u(){return t&&0===c}for(;i<a.length;)if("-"!==h()||"-"!==m()||!we(g())&&""!==g())if(we(h()))r.push(function(){for(var e=d("WHITESPACE"),t="";h()&&we(h());)Te(h())&&(o=0,s++),t+=y();return e.value=t,e.end=i,e}());else if(v()||"."!==h()||!A(m())&&"{"!==m())if(v()||"#"!==h()||!A(m())&&"{"!==m())if("["===h()&&"@"===m())r.push(function(){for(var e=d("ATTRIBUTE_REF"),t=y();i<a.length&&"]"!==h();)t+=y();return"]"===h()&&(t+=y()),e.value=t,e.end=i,e}());else if("@"===h())r.push(function(){for(var e=d("ATTRIBUTE_REF"),t=y();_e(h());)t+=y();return e.value=t,e.end=i,e}());else if("*"===h()&&A(m()))r.push(function(){for(var e=d("STYLE_REF"),t=y();A(h())||"-"===h();)t+=y();return e.value=t,e.end=i,e}());else if(A(h())||!u()&&ke(h()))r.push(function(){for(var e=d("IDENTIFIER"),t=y();A(h())||k(h())||ke(h());)t+=y();return"!"===h()&&"beep"===t&&(t+=y()),e.value=t,e.end=i,e}());else if(k(h()))r.push(function(){for(var e=d("NUMBER"),t=y();k(h());)t+=y();for("."===h()&&k(m())&&(t+=y());k(h());)t+=y();return e.value=t,e.end=i,e}());else if(u()||'"'!==h()&&"`"!==h())if(u()||"'"!==h()){if(b[h()])"$"===l&&"{"===h()&&c++,"}"===h()&&c--,r.push(f());else if(u()||"`"===(n=h())||"^"===n)r.push(d("RESERVED",y()));else if(i<a.length)throw Error("Unknown token: "+h()+" ")}else!function(e){if(0<e.length){e=e[e.length-1];if("IDENTIFIER"===e.type||"CLASS_REF"===e.type||"ID_REF"===e.type)return;if(e.op&&(">"===e.value||")"===e.value))return}return 1}(r)?r.push(f()):r.push(p());else r.push(p());else r.push(function(){var e=d("ID_REF"),t=y();if("{"===h()){for(e.template=!0,t+=y();h()&&"}"!==h();)t+=y();if("}"!==h())throw Error("Unterminated id reference");y()}else for(;_e(h());)t+=y();return e.value=t,e.end=i,e}());else r.push(function(){var e=d("CLASS_REF"),t=y();if("{"===h()){for(e.template=!0,t+=y();h()&&"}"!==h();)t+=y();if("}"!==h())throw Error("Unterminated class reference");t+=y()}else for(;function(e){return A(e)||k(e)||"-"===e||"_"===e||":"===e}(h());)t+=y();return e.value=t,e.end=i,e}());else{for(;h()&&!Te(h());)y();y()}return Ae(r,[],a);function d(e,t){return{type:e,value:t,start:i,end:i+1,column:o,line:s}}function f(){(e=d(e=void 0,void 0)).op=!0;for(var e,t=y();h()&&b[t+h()];)t+=y();return e.type=b[t],e.value=t,e.end=i,e}function p(){for(var e,t=d("STRING"),n=y(),r="";h()&&h()!==n;)"\\"===h()?(y(),r+="b"===(e=y())?"\b":"f"===e?"\f":"n"===e?"\n":"r"===e?"\r":"t"===e?"\t":"v"===e?"\v":e):r+=y();if(h()!==n)throw Error("Unterminated string at [Line: "+t.line+", Column: "+t.column+"]");return y(),t.value=r,t.end=i,t.template="`"===n,t}function h(){return a.charAt(i)}function m(){return a.charAt(i+1)}function g(){return a.charAt(i+2)}function y(){return l=h(),i++,o++,l}function v(){return A(l)||k(l)||")"===l||'"'===l||"'"===l||"`"===l||"}"===l||"]"===l}},makeTokensObject:Ae}),x=(s={},l={},c={},K=[],u=[],T("feature",function(e,t,n){if(n.matchOpToken("("))return r=e.requireElement("feature",n),n.requireOpToken(")"),r;var r=c[n.currentToken().value];return r?r(e,t,n):void 0}),T("command",function(e,t,n){if(n.matchOpToken("("))return a=e.requireElement("command",n),n.requireOpToken(")"),a;var r,a=l[n.currentToken().value];return a?r=a(e,t,n):"IDENTIFIER"===n.currentToken().type&&(r=e.parseElement("pseudoCommand",n)),r&&e.parseElement("indirectStatement",n,r)}),T("commandList",function(e,t,n){var r=e.parseElement("command",n);if(r)return n.matchToken("then"),(e=e.parseElement("commandList",n))&&(r.next=e),r}),T("leaf",function(e,t,n){var r=ye(K,n);return null==r?w("symbol",n):r}),T("indirectExpression",function(e,t,n,r){for(var a=0;a<u.length;a++){var i=u[a],i=(r.endToken=n.lastMatch(),e.parseElement(i,n,r));if(i)return i}return r}),T("indirectStatement",function(e,t,n,r){return n.matchToken("unless")?(r.endToken=n.lastMatch(),e={type:"unlessStatementModifier",args:[e.requireElement("expression",n)],op:function(e,t){return t?this.next:r},execute:function(e){return t.unifiedExec(this,e)}},r.parent=e):r}),T("primaryExpression",function(e,t,n){var r=e.parseElement("leaf",n);if(r)return e.parseElement("indirectExpression",n,r);e.raiseParseError(n,"Unexpected value: "+n.currentToken().value)}),{setParent:function e(t,n){"object"==typeof t&&("object"==typeof(t.parent=n)&&(n.children=n.children||new Set,n.children.add(t)),e(t.next,n))},requireElement:ge,parseElement:w,featureStart:xe,commandStart:be,commandBoundary:function(e){return!("end"!=e.value&&"then"!=e.value&&"else"!=e.value&&"otherwise"!=e.value&&")"!=e.value&&!be(e)&&!xe(e)&&"EOF"!=e.type)},parseAnyOf:ye,parseHyperScript:function(e){var t=w("hyperscript",e);if(e.hasMore()&&ve(e),t)return t},raiseParseError:ve,addGrammarElement:T,addCommand:function(e,a){function t(e,t,n){var r=a(e,t,n);if(r)return r.type=i,r.execute=function(e){return e.meta.command=r,t.unifiedExec(this,e)},r}var i=e+"Command";s[i]=t,l[e]=t},addFeature:function(r,a){function e(e,t,n){if(e=a(e,t,n))return e.isFeature=!0,e.keyword=r,e.type=i,e}var i=r+"Feature";s[i]=e,c[r]=e},addLeafExpression:function(e,t){K.push(e),T(e,t)},addIndirectExpression:function(e,t){u.push(e),T(e,t)},parseStringTemplate:function(e){var t,n=[""];do{}while(n.push(e.lastWhitespace()),"$"===e.currentToken().value?(e.consumeToken(),t=e.matchOpToken("{"),n.push(ge("expression",e)),t&&e.requireOpToken("}"),n.push("")):"\\"===e.currentToken().value?(e.consumeToken(),e.consumeToken()):(t=e.consumeToken(),n[n.length-1]+=t?t.value:""),e.hasMore());return n.push(e.lastWhitespace()),n},ensureTerminated:function(e){for(var t={type:"implicitReturn",op:function(e){return e.meta.returned=!0,e.meta.resolve&&e.meta.resolve(),C.HALT},execute:function(e){}},n=e;n.next;)n=n.next;n.next=t}}),Q={dynamicResolvers:[function(e,t){return"Fixed"===e?Number(t).toFixed():0===e.indexOf("Fixed:")?(e=e.split(":")[1],Number(t).toFixed(parseInt(e))):void 0}],String:function(e){return e.toString?e.toString():""+e},Int:function(e){return parseInt(e)},Float:function(e){return parseFloat(e)},Number:(J=function(e){return Number(e)},he.toString=function(){return J.toString()},he),Date:(X=function(e){return new Date(e)},pe.toString=function(){return X.toString()},pe),Array:(Z=function(e){return Array.from(e)},fe.toString=function(){return Z.toString()},fe),JSON:(W=function(e){return JSON.stringify(e)},de.toString=function(){return W.toString()},de),Object:function(e){return"string"==typeof(e=e instanceof String?e.toString():e)?JSON.parse(e):L({},e)}},C=(i={},e=null,n=new WeakMap,r=new WeakMap,{typeCheck:function(e,t,n){return!(null!=e||!n)||Object.prototype.toString.call(e).slice(8,-1)===t},forEach:re,implicitLoop:function(e,t){if(m(e))for(var n,r=S(e);!(n=r()).done;)t(n.value);else t(e)},shouldAutoIterate:m,triggerEvent:te,matchesSelector:ee,getScript:se,processNode:function(e){var t=C.getScriptSelector();ee(e,t)&&ue(e,e),e instanceof HTMLScriptElement&&"text/hyperscript"===e.type&&ue(e,document.body),e.querySelectorAll&&re(e.querySelectorAll(t+", [type='text/hyperscript']"),function(e){ue(e,e instanceof HTMLScriptElement&&"text/hyperscript"===e.type?document.body:e)})},evaluate:function(e,t,n){z(i,r=H(EventTarget)),i.prototype.toString=function(){return this.module.id};var r,a=i,a="document"in f?f.document.body:new a(n&&n.module);function i(e){var t;return(t=r.call(this)||this).module=e,t}t=L(le(a,null,a,null),t||{});e=ce(e);return e.execute?(e.execute(t),t.result):e.apply?(e.apply(a,a,n),g(a)):e.evaluate(t)},evaluateNoPromise:function(e,t){t=e.evaluate(t);if(t.next)throw new Error(e.sourceFor()+" returned a Promise in a context that they are not allowed.");return t},parse:ce,getScriptSelector:function(){return oe().map(function(e){return"["+e+"]"}).join(", ")},resolveSymbol:function(e,t,n){if("me"===e||"my"===e||"I"===e)return t.me;if("it"===e||"its"===e)return t.result;if("you"===e||"your"===e||"yourself"===e)return t.beingTold;if("global"===n)return f[e];if("element"===n)return v(t)[e];if("local"===n)return t[e];if(t.meta&&t.meta.context){n=t.meta.context[e];if(void 0!==n)return n}n=t[e];return void 0!==n||void 0!==(n=v(t)[e])?n:f[e]},setSymbol:function(e,t,n,r){var a;"global"===n?f[e]=r:"element"===n?(a=v(t))[e]=r:"local"!==n&&void 0===t[e]&&void 0!==(a=v(t))[e]?a[e]=r:t[e]=r},makeContext:le,findNext:function e(t,n){if(t)return t.resolveNext?t.resolveNext(n):t.next||e(t.parent,n)},unifiedEval:ie,convertValue:function(e,t){for(var n=Q.dynamicResolvers,r=0;r<n.length;r++){var a=(0,n[r])(t,e);if(void 0!==a)return a}if(null==e)return null;var i=Q[t];if(i)return i(e);throw"Unknown conversion : "+t},unifiedExec:function t(e,n){for(;;){try{var r=ie(e,n)}catch(t){if(n.meta.handlingFinally)console.error(" Exception in finally block: ",t),r=i;else{if(C.registerHyperTrace(n,t),n.meta.errorHandler&&!n.meta.handlingError){n.meta.handlingError=!0,n[n.meta.errorSymbol]=t,e=n.meta.errorHandler;continue}n.meta.currentException=t,r=i}}if(null==r)return void console.error(e," did not return a next element to execute! context: ",n);if(r.then)return void r.then(function(e){t(e,n)}).catch(function(e){t({op:function(){throw e}},n)});if(r===i){if(!n.meta.finallyHandler||n.meta.handlingFinally){if(n.meta.onHalt&&n.meta.onHalt(),n.meta.currentException){if(n.meta.reject)return void n.meta.reject(n.meta.currentException);throw n.meta.currentException}return}n.meta.handlingFinally=!0,e=n.meta.finallyHandler}else e=r}},resolveProperty:function(e,t){return _(e,t,function(e,t){return e[t]})},resolveAttribute:function(e,t){return _(e,t,function(e,t){return e.getAttribute&&e.getAttribute(t)})},resolveStyle:function(e,t){return _(e,t,function(e,t){return e.style&&e.style[t]})},resolveComputedStyle:function(e,t){return _(e,t,function(e,t){return getComputedStyle(e).getPropertyValue(t)})},assignToNamespace:function(e,t,n,r){for(var a="undefined"!=typeof document&&e===document.body?f:g(e);0<t.length;){var i=t.shift(),o=a[i];null==o&&(a[i]=o={}),a=o}a[n]=r},registerHyperTrace:function(e,t){for(var a=[],n=null;null!=e;)a.push(e),e=(n=e).meta.caller;null==n.meta.traceMap&&(n.meta.traceMap=new Map),n.meta.traceMap.get(t)||n.meta.traceMap.set(t,{trace:a,print:function(e){(e=e||console.error)("hypertrace /// ");for(var t=0,n=0;n<a.length;n++)t=Math.max(t,a[n].meta.feature.displayName.length);for(n=0;n<a.length;n++){var r=a[n];e("  ->",r.meta.feature.displayName.padEnd(t+2),"-",r.meta.owner)}}})},getHyperTrace:function(e,t){for(var n=e;n.meta.caller;)n=n.meta.caller;if(n.meta.traceMap)return n.meta.traceMap.get(t,[])},getInternalData:y,getHyperscriptFeatures:g,escapeSelector:function(e){return e.replace(/:/g,function(e){return"\\"+e})},nullCheck:function(e,t){if(null==e)throw new Error("'"+t.sourceFor()+"' is null")},isEmpty:function(e){return null==e||0===e.length},doesExist:function(e){if(null!=e&&m(e)){e=S(e);if(!e().done)return!0}return!1},getRootNode:function(e){if(e&&e instanceof Node){e=e.getRootNode();if(e instanceof Document||e instanceof ShadowRoot)return e}return document},getEventQueueFor:function(e,t){var e=y(e),n=e.eventQueues,e=(null==n&&(n=new Map,e.eventQueues=n),n.get(t));return null==e&&n.set(t,e={queue:[],executing:!1}),e},hyperscriptUrl:"document"in f?"undefined"==typeof document&&"undefined"==typeof location?new(require("url").URL)("file:"+__filename).href:"undefined"==typeof document?location.href:document.currentScript&&document.currentScript.src||new URL("_hyperscript_web.min.js",document.baseURI).href:null,HALT:i});function ee(e,t){var n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector;return n&&n.call(e,t)}function te(e,t,n,r){(n=n||{}).sender=r;r=t,t=n,f.Event&&"function"==typeof f.Event?(a=new Event(r,{bubbles:!0,cancelable:!0})).detail=t:(a=document.createEvent("CustomEvent")).initCustomEvent(r,!0,!0,t);var a,n=a;return e.dispatchEvent(n)}function ne(e){return Array.isArray(e)||"undefined"!=typeof NodeList&&(e instanceof NodeList||e instanceof HTMLCollection)}function m(e){return e instanceof p||ne(e)}function re(e,t){if(null!=e)if("object"==typeof(i=e)&&Symbol.iterator in i&&"function"==typeof i[Symbol.iterator])for(var n,r=S(e);!(n=r()).done;)t(n.value);else if(ne(e))for(var a=0;a<e.length;a++)t(e[a]);else t(e);var i}function ae(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.asyncWrapper&&(e[t]=n.value),Array.isArray(n))for(var r=0;r<n.length;r++){var a=n[r];a.asyncWrapper&&(n[r]=a.value)}}}function ie(a,e){var t=[e],n=!1,i=!1;if(a.args)for(var r=0;r<a.args.length;r++){var o,s=a.args[r];if(null==s)t.push(null);else if(Array.isArray(s)){for(var l=[],c=0;c<s.length;c++){var u=s[c];(o=u?u.evaluate(e):null)&&(o.then?n=!0:o.asyncWrapper&&(i=!0)),l.push(o)}t.push(l)}else s.evaluate?((o=s.evaluate(e))&&(o.then?n=!0:o.asyncWrapper&&(i=!0)),t.push(o)):t.push(s)}return n?new Promise(function(n,r){t=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];Array.isArray(r)?t.push(Promise.all(r)):t.push(r)}return t}(t),Promise.all(t).then(function(e){i&&ae(e);try{var t=a.op.apply(a,e);n(t)}catch(e){r(e)}}).catch(function(e){r(e)})}):(i&&ae(t),a.op.apply(a,t))}function oe(){return e=null==e?o.config.attributes.replace(/ /g,"").split(","):e}function se(e){for(var t=0;t<oe().length;t++){var n=oe()[t];if(e.hasAttribute&&e.hasAttribute(n))return e.getAttribute(n)}return e instanceof HTMLScriptElement&&"text/hyperscript"===e.type?e.innerText:null}function g(e){var t=n.get(e);return void 0===t&&n.set(e,t={}),t}function le(e,t,n,r){t={meta:{parser:x,lexer:h,runtime:C,owner:e,feature:t,iterators:{}},me:n,event:r,target:r?r.target:null,detail:r?r.detail:null,sender:r&&r.detail?r.detail.sender:null,body:"document"in f?document.body:null};return function e(t,n){t&&(L(n,g(t)),e(t.parentElement,n))}(e,t.meta.ctx=t),t}function ce(e){e=h.tokenize(e);if(x.commandStart(e.currentToken()))return t=x.requireElement("commandList",e),e.hasMore()&&x.raiseParseError(e),x.ensureTerminated(t),t;if(x.featureStart(e.currentToken()))return t=x.requireElement("hyperscript",e),e.hasMore()&&x.raiseParseError(e),t;var t=x.requireElement("expression",e);return e.hasMore()&&x.raiseParseError(e),t}function ue(t,e){if(!t.closest||!t.closest(o.config.disableSelector)){var n=y(t);if(!n.initialized){var r=se(t);if(r)try{n.initialized=!0,n.script=r;var a=h.tokenize(r),i=x.parseHyperScript(a);i&&(i.apply(e||t,t),setTimeout(function(){te(e||t,"load",{hyperscript:!0})},1))}catch(e){C.triggerEvent(t,"exception",{error:e}),console.error("hyperscript errors were found on the following element:",t,"\n\n",e.message,e.stack)}}}}function y(e){var t=r.get(e);return void 0===t&&r.set(e,t={}),t}function v(e){var t,n=e.meta&&e.meta.owner;return n?(t="elementScope",U(y(n),t=e.meta.feature&&e.meta.feature.behavior?e.meta.feature.behavior+"Scope":t)):{}}function _(e,t,n){if(null!=e){var r=n(e,t);if(void 0!==r)return r;if(m(e)){for(var a=[],i=S(e);!(o=i()).done;){var o=n(o.value,t);o&&a.push(o)}return a}}}function de(e){return W.apply(this,arguments)}function fe(e){return Z.apply(this,arguments)}function pe(e){return X.apply(this,arguments)}function he(e){return J.apply(this,arguments)}function me(e,t,n){e.startToken=t,e.sourceFor=n.sourceFor,e.lineFor=n.lineFor,e.programSource=n.source}function w(e,t,n){var r=n=void 0===n?void 0:n;if(n=s[e]){var a=t.currentToken(),n=n(x,C,t,r);if(n)for(me(n,a,t),n.endToken=n.endToken||t.lastMatch(),r=n.root;null!=r;)me(r,a,t),r=r.root;return n}}function ge(e,t,n,r){r=w(e,t,r);return r||ve(t,n||"Expected "+e),r}function ye(e,t){for(var n=0;n<e.length;n++){var r=w(e[n],t);if(r)return r}}function T(e,t){s[e]=t}function ve(e,t){t=(t||"Unexpected Token : "+e.currentToken().value)+"\n\n"+(r=(n=e).currentToken(),(n=(n=n.source.split("\n"))[r&&r.line?r.line-1:n.length-1])+"\n"+" ".repeat(r&&r.line?r.column:n.length-1)+"^^\n\n");var n,r=new Error(t);throw r.tokens=e,r}function be(e){return l[e.value]}function xe(e){return c[e.value]}function _e(e){return A(e)||k(e)||"-"===e||"_"===e||":"===e}function we(e){return" "===e||"\t"===e||Te(e)}function Te(e){return"\r"===e||"\n"===e}function k(e){return"0"<=e&&e<="9"}function A(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"}function ke(e){return"_"===e||"$"===e}function Ae(i,o,e){s();var t=null;function s(){for(;"WHITESPACE"===f(0,!0).type;)o.push(i.shift())}function a(e,t){x.raiseParseError(e,t)}function l(e){if(p()&&p().op&&p().value===e)return d()}function c(e,t,n,r){if(p()&&p().type&&0<=[e,t,n,r].indexOf(p().type))return d()}function u(e,t){if(-1===r.indexOf(e))return t=t||"IDENTIFIER",p()&&p().value===e&&p().type===t?d():void 0}function d(){var e=i.shift();return o.push(e),t=e,s(),e}function n(e,t){for(var n=[],r=f(0,!0);!(null!=t&&r.type===t||null!=e&&r.value===e||"EOF"===r.type);){var a=i.shift();o.push(a),n.push(r),r=f(0,!0)}return s(),n}function f(e,t){var n,r=0;do{if(!t)for(;i[r]&&"WHITESPACE"===i[r].type;)r++}while(n=i[r],r++,-1<--e);return n||{type:"EOF",value:"<<<EOF>>>"}}function p(){return f(0)}var r=[];return{pushFollow:function(e){r.push(e)},popFollow:function(){r.pop()},clearFollow:function(){var e=r;return r=[],e},restoreFollow:function(e){r=e},matchAnyToken:function(e,t,n){for(var r=0;r<arguments.length;r++){var a=u(arguments[r]);if(a)return a}},matchAnyOpToken:function(e,t,n){for(var r=0;r<arguments.length;r++){var a=l(arguments[r]);if(a)return a}},matchOpToken:l,requireOpToken:function(e){var t=l(e);if(t)return t;a(this,"Expected '"+e+"' but found '"+p().value+"'")},matchTokenType:c,requireTokenType:function(e,t,n,r){r=c(e,t,n,r);if(r)return r;a(this,"Expected one of "+JSON.stringify([e,t,n]))},consumeToken:d,peekToken:function(e,t,n){return i[t]&&i[t].value===e&&i[t].type===n},matchToken:u,requireToken:function(e,t){t=u(e,t);if(t)return t;a(this,"Expected '"+e+"' but found '"+p().value+"'")},list:i,consumed:o,source:e,hasMore:function(){return 0<i.length},currentToken:p,lastMatch:function(){return t},token:f,consumeUntil:n,consumeUntilWhitespace:function(){return n(null,"WHITESPACE")},lastWhitespace:function(){return o[o.length-1]&&"WHITESPACE"===o[o.length-1].type?o[o.length-1].value:""},sourceFor:function(){return e.substring(this.startToken.start,this.endToken.end)},lineFor:function(){return e.split("\n")[this.startToken.line-1]}}}function Me(e,t,n){this._css=e,this.relativeToElement=t,this.escape=n}x.addLeafExpression("parenthesized",function(e,t,n){if(n.matchOpToken("(")){var r=n.clearFollow();try{var a=e.requireElement("expression",n)}finally{n.restoreFollow(r)}return n.requireOpToken(")"),a}}),x.addLeafExpression("string",function(e,t,n){var r,a,n=n.matchTokenType("STRING");if(n)return r=n.value,{type:"string",token:n,args:a=n.template?(n=h.tokenize(r,!0),e.parseStringTemplate(n)):[],op:function(e){for(var t="",n=1;n<arguments.length;n++){var r=arguments[n];void 0!==r&&(t+=r)}return t},evaluate:function(e){return 0===a.length?r:t.unifiedEval(this,e)}}}),x.addGrammarElement("nakedString",function(e,t,n){var r;if(n.hasMore())return r=n.consumeUntilWhitespace(),n.matchTokenType("WHITESPACE"),{type:"nakedString",tokens:r,evaluate:function(e){return r.map(function(e){return e.value}).join("")}}}),x.addLeafExpression("number",function(e,t,n){var r,a,n=n.matchTokenType("NUMBER");if(n)return r=n,{type:"number",value:a=parseFloat(n.value),numberToken:r,evaluate:function(){return a}}}),x.addLeafExpression("idRef",function(e,n,t){var r,t=t.matchTokenType("ID_REF");if(t){if(t.template)return r=t.value.substr(2,t.value.length-2),r=h.tokenize(r),{type:"idRefTemplate",args:[e.requireElement("expression",r)],op:function(e,t){return n.getRootNode(e.me).getElementById(t)},evaluate:function(e){return n.unifiedEval(this,e)}};var a=t.value.substr(1);return{type:"idRef",css:t.value,value:a,evaluate:function(e){return n.getRootNode(e.me).getElementById(a)}}}}),x.addLeafExpression("classRef",function(e,t,n){var r,n=n.matchTokenType("CLASS_REF");if(n){if(n.template)return r=n.value.substr(2,n.value.length-2),r=h.tokenize(r),{type:"classRefTemplate",args:[e.requireElement("expression",r)],op:function(e,t){return new p("."+t,e.me,!0)},evaluate:function(e){return t.unifiedEval(this,e)}};var a=n.value;return{type:"classRef",css:a,evaluate:function(e){return new p(a,e.me,!0)}}}});M=p,P=Symbol.iterator,z(t,M),t.prototype[P]=function(){this.elements.forEach(function(e,t){return e.dataset.hsQueryId=t});var e=M.prototype[Symbol.iterator].call(this);return this.elements.forEach(function(e){return e.removeAttribute("data-hs-query-id")}),e},F(t,[{key:"css",get:function(){for(var e="",t=0,n=S(this.templateParts);!(r=n()).done;){var r=r.value;r instanceof Element?e+="[data-hs-query-id='"+t+++"']":e+=r}return e}}]);var M,Ee=t;function t(e,t,n){return(e=M.call(this,e,t)||this).templateParts=n,e.elements=n.filter(function(e){return e instanceof Element}),e}x.addLeafExpression("queryRef",function(e,t,n){var r,a,i,o;if(n.matchOpToken("<"))return r=n.consumeUntil("/"),n.requireOpToken("/"),n.requireOpToken(">"),0<=(a=r.map(function(e){return"STRING"===e.type?'"'+e.value+'"':e.value}).join("")).indexOf("$")&&(i=!0,n=h.tokenize(a,!0),o=e.parseStringTemplate(n)),{type:"queryRef",css:a,args:o,op:function(e){return i?new Ee(a,e.me,[].slice.call(arguments,1)):new p(a,e.me)},evaluate:function(e){return t.unifiedEval(this,e)}}}),x.addLeafExpression("attributeRef",function(e,t,n){var r,a,n=n.matchTokenType("ATTRIBUTE_REF");if(n)return r="["+(n=0===(n=n.value).indexOf("[")?n.substring(2,n.length-1):n.substring(1))+"]",n=n.split("="),a=n[0],(n=n[1])&&0===n.indexOf('"')&&(n=n.substring(1,n.length-1)),{type:"attributeRef",name:a,css:r,value:n,op:function(e){e=e.beingTold||e.me;if(e)return e.getAttribute(a)},evaluate:function(e){return t.unifiedEval(this,e)}}}),x.addLeafExpression("styleRef",function(e,t,n){var r,n=n.matchTokenType("STYLE_REF");if(n)return(r=n.value.substr(1)).startsWith("computed-")?{type:"computedStyleRef",name:r=r.substr("computed-".length),op:function(e){e=e.beingTold||e.me;if(e)return t.resolveComputedStyle(e,r)},evaluate:function(e){return t.unifiedEval(this,e)}}:{type:"styleRef",name:r,op:function(e){e=e.beingTold||e.me;if(e)return t.resolveStyle(e,r)},evaluate:function(e){return t.unifiedEval(this,e)}}}),x.addGrammarElement("objectKey",function(e,t,n){var r;if(r=n.matchTokenType("STRING"))return{type:"objectKey",key:r.value,evaluate:function(){return r.value}};if(n.matchOpToken("["))return e=e.parseElement("expression",n),n.requireOpToken("]"),{type:"objectKey",expr:e,args:[e],op:function(e,t){return t},evaluate:function(e){return t.unifiedEval(this,e)}};for(var a="";(r=n.matchTokenType("IDENTIFIER")||n.matchOpToken("-"))&&(a+=r.value),r;);return{type:"objectKey",key:a,evaluate:function(){return a}}}),x.addLeafExpression("objectLiteral",function(e,t,n){if(n.matchOpToken("{")){var r=[],a=[];if(!n.matchOpToken("}")){do{var i=e.requireElement("objectKey",n),o=(n.requireOpToken(":"),e.requireElement("expression",n))}while(a.push(o),r.push(i),n.matchOpToken(","));n.requireOpToken("}")}return{type:"objectLiteral",args:[r,a],op:function(e,t,n){for(var r={},a=0;a<t.length;a++)r[t[a]]=n[a];return r},evaluate:function(e){return t.unifiedEval(this,e)}}}}),x.addGrammarElement("nakedNamedArgumentList",function(e,t,n){var a=[],r=[];if("IDENTIFIER"===n.currentToken().type)do{var i=n.requireTokenType("IDENTIFIER"),o=(n.requireOpToken(":"),e.requireElement("expression",n))}while(r.push(o),a.push({name:i,value:o}),n.matchOpToken(","));return{type:"namedArgumentList",fields:a,args:[r],op:function(e,t){for(var n={_namedArgList_:!0},r=0;r<t.length;r++)n[a[r].name.value]=t[r];return n},evaluate:function(e){return t.unifiedEval(this,e)}}}),x.addGrammarElement("namedArgumentList",function(e,t,n){if(n.matchOpToken("("))return e=e.requireElement("nakedNamedArgumentList",n),n.requireOpToken(")"),e}),x.addGrammarElement("symbol",function(e,t,n){var r,a="default",i=(n.matchToken("global")?a="global":n.matchToken("element")||n.matchToken("module")?(a="element",n.matchOpToken("'")&&n.requireToken("s")):n.matchToken("local")&&(a="local"),n.matchOpToken(":")),n=n.matchTokenType("IDENTIFIER");if(n)return r=n.value,i&&(r=":"+r),"default"===a&&(0===r.indexOf("$")&&(a="global"),0===r.indexOf(":")&&(a="element")),{type:"symbol",token:n,scope:a,name:r,evaluate:function(e){return t.resolveSymbol(r,e,a)}}}),x.addGrammarElement("implicitMeTarget",function(e,t,n){return{type:"implicitMeTarget",evaluate:function(e){return e.beingTold||e.me}}}),x.addLeafExpression("boolean",function(e,t,n){var r,n=n.matchToken("true")||n.matchToken("false");if(n)return r="true"===n.value,{type:"boolean",evaluate:function(e){return r}}}),x.addLeafExpression("null",function(e,t,n){if(n.matchToken("null"))return{type:"null",evaluate:function(e){return null}}}),x.addLeafExpression("arrayLiteral",function(e,t,n){if(n.matchOpToken("[")){var r=[];if(!n.matchOpToken("]")){do{var a=e.requireElement("expression",n)}while(r.push(a),n.matchOpToken(","));n.requireOpToken("]")}return{type:"arrayLiteral",values:r,args:[r],op:function(e,t){return t},evaluate:function(e){return t.unifiedEval(this,e)}}}}),x.addLeafExpression("blockLiteral",function(e,t,n){if(n.matchOpToken("\\")){var r=[],a=n.matchTokenType("IDENTIFIER");if(a)for(r.push(a);n.matchOpToken(",");)r.push(n.requireTokenType("IDENTIFIER"));n.requireOpToken("-"),n.requireOpToken(">");var i=e.requireElement("expression",n);return{type:"blockLiteral",args:r,expr:i,evaluate:function(t){return function(){for(var e=0;e<r.length;e++)t[r[e].value]=arguments[e];return i.evaluate(t)}}}}}),x.addIndirectExpression("propertyAccess",function(e,n,t,r){var a;if(t.matchOpToken("."))return a=t.requireTokenType("IDENTIFIER"),e.parseElement("indirectExpression",t,{type:"propertyAccess",root:r,prop:a,args:[r],op:function(e,t){return n.resolveProperty(t,a.value)},evaluate:function(e){return n.unifiedEval(this,e)}})}),x.addIndirectExpression("of",function(e,n,t,r){if(t.matchToken("of")){for(var a=e.requireElement("unaryExpression",t),i=null,o=r;o.root;)o=(i=o).root;"symbol"!==o.type&&"attributeRef"!==o.type&&"styleRef"!==o.type&&"computedStyleRef"!==o.type&&e.raiseParseError(t,"Cannot take a property of a non-symbol: "+o.type);var s="attributeRef"===o.type,l="styleRef"===o.type||"computedStyleRef"===o.type,c=((s||l)&&(u=o),o.name),u={type:"ofExpression",prop:o.token,root:a,attribute:u,expression:r,args:[a],op:function(e,t){return s?n.resolveAttribute(t,c):l?"computedStyleRef"===o.type?n.resolveComputedStyle(t,c):n.resolveStyle(t,c):n.resolveProperty(t,c)},evaluate:function(e){return n.unifiedEval(this,e)}};return"attributeRef"===o.type&&(u.attribute=o),i?(i.root=u,i.args=[u]):r=u,e.parseElement("indirectExpression",t,r)}}),x.addIndirectExpression("possessive",function(e,n,t,r){if(!e.possessivesDisabled){var a,i,o,s=t.matchOpToken("'");if(s||"symbol"===r.type&&("my"===r.name||"its"===r.name||"your"===r.name)&&("IDENTIFIER"===t.currentToken().type||"ATTRIBUTE_REF"===t.currentToken().type||"STYLE_REF"===t.currentToken().type))return s&&t.requireToken("s"),null==(a=e.parseElement("attributeRef",t))&&null==(i=e.parseElement("styleRef",t))&&(o=t.requireTokenType("IDENTIFIER")),e.parseElement("indirectExpression",t,{type:"possessive",root:r,attribute:a||i,prop:o,args:[r],op:function(e,t){t=a?n.resolveAttribute(t,a.name):i?"computedStyleRef"===i.type?n.resolveComputedStyle(t,i.name):n.resolveStyle(t,i.name):n.resolveProperty(t,o.value);return t},evaluate:function(e){return n.unifiedEval(this,e)}})}}),x.addIndirectExpression("inExpression",function(e,i,t,n){if(t.matchToken("in"))return n={type:"inExpression",root:n,args:[n,e.requireElement("unaryExpression",t)],op:function(e,r,n){var a=[];if(r.css)i.implicitLoop(n,function(e){for(var t=e.querySelectorAll(r.css),n=0;n<t.length;n++)a.push(t[n])});else if(r instanceof Element){var t=!1;if(i.implicitLoop(n,function(e){e.contains(r)&&(t=!0)}),t)return r}else i.implicitLoop(r,function(t){i.implicitLoop(n,function(e){t===e&&a.push(t)})});return a},evaluate:function(e){return i.unifiedEval(this,e)}},e.parseElement("indirectExpression",t,n)}),x.addIndirectExpression("asExpression",function(e,n,t,r){var a;if(t.matchToken("as"))return t.matchToken("a")||t.matchToken("an"),a=e.requireElement("dotOrColonPath",t).evaluate(),e.parseElement("indirectExpression",t,{type:"asExpression",root:r,args:[r],op:function(e,t){return n.convertValue(t,a)},evaluate:function(e){return n.unifiedEval(this,e)}})}),x.addIndirectExpression("functionCall",function(e,a,t,i){if(t.matchOpToken("(")){var n,r=[];if(!t.matchOpToken(")")){for(;r.push(e.requireElement("expression",t)),t.matchOpToken(","););t.requireOpToken(")")}return n=i.root?{type:"functionCall",root:i,argExressions:r,args:[i.root,r],op:function(e,t,n){a.nullCheck(t,i.root);var r=t[i.prop.value];return a.nullCheck(r,i),r.hyperfunc&&n.push(e),r.apply(t,n)},evaluate:function(e){return a.unifiedEval(this,e)}}:{type:"functionCall",root:i,argExressions:r,args:[i,r],op:function(e,t,n){return a.nullCheck(t,i),t.hyperfunc&&n.push(e),t.apply(null,n)},evaluate:function(e){return a.unifiedEval(this,e)}},e.parseElement("indirectExpression",t,n)}}),x.addIndirectExpression("attributeRefAccess",function(e,n,t,r){var a=e.parseElement("attributeRef",t);if(a)return{type:"attributeRefAccess",root:r,attribute:a,args:[r],op:function(e,t){return n.resolveAttribute(t,a.name)},evaluate:function(e){return C.unifiedEval(this,e)}}}),x.addIndirectExpression("arrayIndex",function(e,t,n,r){var a,i,o,s;if(n.matchOpToken("["))return i=a=!1,s=o=null,n.matchOpToken("..")?(a=!0,o=e.requireElement("expression",n)):(o=e.requireElement("expression",n),n.matchOpToken("..")&&(i=!0,"R_BRACKET"!==n.currentToken().type&&(s=e.parseElement("expression",n)))),n.requireOpToken("]"),x.parseElement("indirectExpression",n,{type:"arrayIndex",root:r,prop:o,firstIndex:o,secondIndex:s,args:[r,o,s],op:function(e,t,n,r){return null==t?null:a?(n<0&&(n=t.length+n),t.slice(0,n+1)):i?null!=r?(r<0&&(r=t.length+r),t.slice(n,r+1)):t.slice(n):t[n]},evaluate:function(e){return C.unifiedEval(this,e)}})});function Se(t,e,n,r){var a=[];C.forEach(e,function(e){!e.matches(n)&&e!==t||a.push(e)});for(var i=0;i<a.length-1;i++)if(a[i]===t)return a[i+1];if(r){e=a[0];if(e&&e.matches(n))return e}}function Le(e){var t=[];if("("===e.token(0).value&&(")"===e.token(1).value||","===e.token(2).value||")"===e.token(2).value)){for(e.matchOpToken("(");t.push(e.requireTokenType("IDENTIFIER")),e.matchOpToken(","););e.requireOpToken(")")}return t}function Ce(e,r,t,n){var a;return n&&(e.commandBoundary(t.currentToken())?e.raiseParseError(t,"'return' commands must return a value.  If you do not wish to return a value, use 'exit' instead."):a=e.requireElement("expression",t)),{value:a,args:[a],op:function(e,t){var n=e.meta.resolve;return e.meta.returned=!0,e.meta.returnValue=t,n&&(t?n(t):n()),r.HALT}}}function Oe(e,n,t){var r={expr:e=e.requireElement("expression",t),args:[e],op:function(e,t){return e.result=t,n.findNext(r,e)}};return r}function E(e,a,t,i,n){var o,s="symbol"===i.type,r="attributeRef"===i.type,l="styleRef"===i.type,c="arrayIndex"===i.type,u=(r||l||s||null!=i.root||e.raiseParseError(t,"Can only put directly into symbols, not references"),null),d=null;return s||(r||l?(u=e.requireElement("implicitMeTarget",t),o=i):u=(c?d=i.firstIndex:(d=i.prop?i.prop.value:null,o=i.attribute),i.root)),{target:i,symbolWrite:s,value:n,args:[u,d,n],op:function(e,t,n,r){return s?a.setSymbol(i.name,e,i.scope,r):(a.nullCheck(t,u),c?t[n]=r:a.implicitLoop(t,function(e){o?"attributeRef"===o.type?null==r?e.removeAttribute(o.name):e.setAttribute(o.name,r):e.style[o.name]=r:e[n]=r})),a.findNext(this,e)}}}function De(e,t,o,n){var r,s,a,l,i,c,u,d,f,p,h=t.currentToken(),m=(t.matchToken("for")||n?(r=t.requireTokenType("IDENTIFIER"),s=r.value,t.requireToken("in"),a=e.requireElement("expression",t)):t.matchToken("in")?(s="it",a=e.requireElement("expression",t)):t.matchToken("while")?l=e.requireElement("expression",t):t.matchToken("until")?(i=!0,t.matchToken("event")?(c=x.requireElement("dotOrColonPath",t,"Expected event name"),t.matchToken("from")&&(u=e.requireElement("expression",t))):l=e.requireElement("expression",t)):e.commandBoundary(t.currentToken())||"forever"===t.currentToken().value?(t.matchToken("forever"),d=!0):(f=e.requireElement("expression",t),t.requireToken("times")),t.matchToken("index")&&(p=(r=t.requireTokenType("IDENTIFIER")).value),e.parseElement("commandList",t));if(m&&c){for(var g=m;g.next;)g=g.next;var y={type:"waitATick",op:function(){return new Promise(function(e){setTimeout(function(){e(o.findNext(y))},0)})}};g.next=y}t.hasMore()&&t.requireToken("end");var v=null==s?s="_implicit_repeat_"+h.start:s+"_"+h.start,b={identifier:s,indexIdentifier:p,slot:v,expression:a,forever:d,times:f,until:i,event:c,on:u,whileExpr:l,resolveNext:function(){return this},loop:m,args:[l,f],op:function(e,t,n){var r=e.meta.iterators[v],a=!1,i=null;return this.forever?a=!0:this.until?a=c?!1===e.meta.iterators[v].eventFired:!0!==t:l?a=t:n?a=r.index<n:(a=!(t=r.iterator.next()).done,i=t.value),a?(e.result=r.value?e[s]=i:r.index,p&&(e[p]=r.index),r.index++,m):(e.meta.iterators[v]=null,o.findNext(this.parent,e))}},n=(e.setParent(m,b),{name:"repeatInit",args:[a,c,u],op:function(t,e,n,r){var a={index:0,value:e,eventFired:!1};return t.meta.iterators[v]=a,e&&e[Symbol.iterator]&&(a.iterator=e[Symbol.iterator]()),c&&(r||t.me).addEventListener(n,function(e){t.meta.iterators[v].eventFired=!0},{once:!0}),b},execute:function(e){return o.unifiedExec(this,e)}});return e.setParent(b,n),n}var O,D,I,R,Ie=["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","pc","pt","px"],P=(x.addGrammarElement("postfixExpression",function(e,n,t){var e=e.parseElement("primaryExpression",t),r=t.matchAnyToken.apply(t,Ie)||t.matchOpToken("%");if(r)return{type:"stringPostfix",postfix:r.value,args:[e],op:function(e,t){return""+t+r.value},evaluate:function(e){return n.unifiedEval(this,e)}};var a,i,o=null;return t.matchToken("s")||t.matchToken("seconds")?o=1e3:(t.matchToken("ms")||t.matchToken("milliseconds"))&&(o=1),o?{type:"timeExpression",time:e,factor:o,args:[e],op:function(e,t){return t*o},evaluate:function(e){return n.unifiedEval(this,e)}}:t.matchOpToken(":")?(a=t.requireTokenType("IDENTIFIER"),i=!t.matchOpToken("!"),{type:"typeCheck",typeName:a,nullOk:i,args:[e],op:function(e,t){if(n.typeCheck(t,a.value,i))return t;throw new Error("Typecheck failed!  Expected: "+a.value)},evaluate:function(e){return n.unifiedEval(this,e)}}):e}),x.addGrammarElement("logicalNot",function(e,t,n){if(n.matchToken("not"))return{type:"logicalNot",root:e=e.requireElement("unaryExpression",n),args:[e],op:function(e,t){return!t},evaluate:function(e){return t.unifiedEval(this,e)}}}),x.addGrammarElement("noExpression",function(e,n,t){if(t.matchToken("no"))return{type:"noExpression",root:e=e.requireElement("unaryExpression",t),args:[e],op:function(e,t){return n.isEmpty(t)},evaluate:function(e){return n.unifiedEval(this,e)}}}),x.addLeafExpression("some",function(e,n,t){if(t.matchToken("some"))return{type:"noExpression",root:e=e.requireElement("expression",t),args:[e],op:function(e,t){return!n.isEmpty(t)},evaluate:function(e){return n.unifiedEval(this,e)}}}),x.addGrammarElement("negativeNumber",function(e,t,n){if(n.matchOpToken("-"))return{type:"negativeNumber",root:e=e.requireElement("unaryExpression",n),args:[e],op:function(e,t){return-1*t},evaluate:function(e){return t.unifiedEval(this,e)}}}),x.addGrammarElement("unaryExpression",function(e,t,n){return n.matchToken("the"),e.parseAnyOf(["beepExpression","logicalNot","relativePositionalExpression","positionalExpression","noExpression","negativeNumber","postfixExpression"],n)}),x.addGrammarElement("beepExpression",function(e,a,t){if(t.matchToken("beep!")){var i,o=e.parseElement("unaryExpression",t);if(o)return o.booped=!0,i=o.evaluate,o.evaluate=function(e){var t,n=i.apply(o,arguments),r=e.me;return a.triggerEvent(r,"hyperscript:beep",{element:r,expression:o,value:n})&&("String"===(t=(r=n)?n instanceof p?"ElementCollection":n.constructor?n.constructor.name:"unknown":"object (null)")?r='"'+r+'"':n instanceof p&&(r=Array.from(n)),console.log("///_ BEEP! The expression ("+o.sourceFor().substr(6)+") evaluates to:",r,"of type "+t)),n},o}}),x.addGrammarElement("relativePositionalExpression",function(e,t,n){var r=n.matchAnyToken("next","previous");if(r){"next"===r.value&&(s=!0);var s,a=e.parseElement("expression",n);if(n.matchToken("from")){n.pushFollow("in");try{var i=e.requireElement("unaryExpression",n)}finally{n.popFollow()}}else i=e.requireElement("implicitMeTarget",n);var o,l,c=!1,u=(n.matchToken("in")?(c=!0,l=e.requireElement("unaryExpression",n)):o=n.matchToken("within")?e.requireElement("unaryExpression",n):document.body,!1);return n.matchToken("with")&&(n.requireToken("wrapping"),u=!0),{type:"relativePositionalExpression",from:i,forwardSearch:s,inSearch:c,wrapping:u,inElt:l,withinElt:o,operator:r.value,args:[a,i,l,o],op:function(e,t,n,r,i){var a,o=t.css;if(null==o)throw"Expected a CSS value";if(c){if(r)return s?Se(n,r,o,u):(t=o,a=u,Se(n,Array.from(r).reverse(),t,a))}else if(i)return(s?function(e,t){for(var n=i.querySelectorAll(o),r=0;r<n.length;r++){var a=n[r];if(a.compareDocumentPosition(e)===Node.DOCUMENT_POSITION_PRECEDING)return a}if(t)return n[0]}:function(e,t){for(var n=i.querySelectorAll(o),r=n.length-1;0<=r;r--){var a=n[r];if(a.compareDocumentPosition(e)===Node.DOCUMENT_POSITION_FOLLOWING)return a}if(t)return n[n.length-1]})(n,u)},evaluate:function(e){return t.unifiedEval(this,e)}}}}),x.addGrammarElement("positionalExpression",function(e,t,n){var r,a=n.matchAnyToken("first","last","random");if(a)return n.matchAnyToken("in","from","of"),e=e.requireElement("unaryExpression",n),r=a.value,{type:"positionalExpression",rhs:e,operator:a.value,args:[e],op:function(e,t){if(t=t&&!Array.isArray(t)?t.children||Array.from(t):t)return"first"===r?t[0]:"last"===r?t[t.length-1]:"random"===r?t[Math.floor(Math.random()*t.length)]:void 0},evaluate:function(e){return t.unifiedEval(this,e)}}}),x.addGrammarElement("mathOperator",function(e,t,n){var r=e.parseElement("unaryExpression",n),a=null;for(s=n.matchAnyOpToken("+","-","*","/","%");s;)var i=s.value,o=((a=a||s).value!==i&&e.raiseParseError(n,"You must parenthesize math operations with different operators"),e.parseElement("unaryExpression",n)),r={type:"mathOperator",lhs:r,rhs:o,operator:i,args:[r,o],op:function(e,t,n){return"+"===i?t+n:"-"===i?t-n:"*"===i?t*n:"/"===i?t/n:"%"===i?t%n:void 0},evaluate:function(e){return t.unifiedEval(this,e)}},s=n.matchAnyOpToken("+","-","*","/","%");return r}),x.addGrammarElement("mathExpression",function(e,t,n){return e.parseAnyOf(["mathOperator","unaryExpression"],n)}),x.addGrammarElement("comparisonOperator",function(e,r,t){var a,i,o,s,n=e.parseElement("mathExpression",t),l=t.matchAnyOpToken("<",">","<=",">=","==","===","!=","!=="),c=l?l.value:null,l=!0,u=!1;return null==c&&(t.matchToken("is")||t.matchToken("am")?t.matchToken("not")?t.matchToken("in")?c="not in":t.matchToken("a")?(c="not a",u=!0):t.matchToken("empty")?l=!(c="not empty"):c="!=":t.matchToken("in")?c="in":t.matchToken("a")?(c="a",u=!0):t.matchToken("empty")?l=!(c="empty"):c=t.matchToken("less")?(t.requireToken("than"),t.matchToken("or")?(t.requireToken("equal"),t.requireToken("to"),"<="):"<"):t.matchToken("greater")?(t.requireToken("than"),t.matchToken("or")?(t.requireToken("equal"),t.requireToken("to"),">="):">"):"==":t.matchToken("exist")||t.matchToken("exists")?l=!(c="exist"):t.matchToken("matches")||t.matchToken("match")?c="match":t.matchToken("contains")||t.matchToken("contain")?c="contain":t.matchToken("includes")||t.matchToken("include")?c="include":(t.matchToken("do")||t.matchToken("does"))&&(t.requireToken("not"),t.matchToken("matches")||t.matchToken("match")?c="not match":t.matchToken("contains")||t.matchToken("contain")?c="not contain":t.matchToken("exist")||t.matchToken("exist")?l=!(c="not exist"):t.matchToken("include")?c="not include":e.raiseParseError(t,"Expected matches or contains"))),c&&(u?(a=t.requireTokenType("IDENTIFIER"),i=!t.matchOpToken("!")):l&&(o=e.requireElement("mathExpression",t),"match"!==c&&"not match"!==c||(o=o.css||o)),n={type:"comparisonOperator",operator:c,typeName:a,nullOk:i,lhs:s=n,rhs:o,args:[n,o],op:function(e,t,n){if("=="===c)return t==n;if("!="===c)return t!=n;if("match"===c)return null!=t&&Y(s,t,n);if("not match"===c)return null==t||!Y(s,t,n);if("in"===c)return null!=n&&d(o,n,t);if("not in"===c)return null==n||!d(o,n,t);if("contain"===c)return null!=t&&d(s,t,n);if("not contain"===c)return null==t||!d(s,t,n);if("include"===c)return null!=t&&d(s,t,n);if("not include"===c)return null==t||!d(s,t,n);if("==="===c)return t===n;if("!=="===c)return t!==n;if("<"===c)return t<n;if(">"===c)return n<t;if("<="===c)return t<=n;if(">="===c)return n<=t;if("empty"===c)return r.isEmpty(t);if("not empty"===c)return!r.isEmpty(t);if("exist"===c)return r.doesExist(t);if("not exist"===c)return!r.doesExist(t);if("a"===c)return r.typeCheck(t,a.value,i);if("not a"===c)return!r.typeCheck(t,a.value,i);throw"Unknown comparison : "+c},evaluate:function(e){return r.unifiedEval(this,e)}}),n}),x.addGrammarElement("comparisonExpression",function(e,t,n){return e.parseAnyOf(["comparisonOperator","mathExpression"],n)}),x.addGrammarElement("logicalOperator",function(e,t,n){for(var a,i=e.parseElement("comparisonExpression",n),o=null,s=n.matchToken("and")||n.matchToken("or");s;)!function(){(o=o||s).value!==s.value&&e.raiseParseError(n,"You must parenthesize logical operations with different operators"),a=e.requireElement("comparisonExpression",n);var r=s.value;i={type:"logicalOperator",operator:r,lhs:i,rhs:a,args:[i,a],op:function(e,t,n){return"and"===r?t&&n:t||n},evaluate:function(e){return t.unifiedEval(this,e)}},s=n.matchToken("and")||n.matchToken("or")}();return i}),x.addGrammarElement("logicalExpression",function(e,t,n){return e.parseAnyOf(["logicalOperator","mathExpression"],n)}),x.addGrammarElement("asyncExpression",function(e,t,n){return n.matchToken("async")?{type:"asyncExpression",value:e.requireElement("logicalExpression",n),evaluate:function(e){return{asyncWrapper:!0,value:this.value.evaluate(e)}}}:e.parseElement("logicalExpression",n)}),x.addGrammarElement("expression",function(e,t,n){return n.matchToken("the"),e.parseElement("asyncExpression",n)}),x.addGrammarElement("assignableExpression",function(e,t,n){n.matchToken("the");e=e.parseElement("primaryExpression",n);return(!e||"symbol"!==e.type&&"ofExpression"!==e.type&&"propertyAccess"!==e.type&&"attributeRefAccess"!==e.type&&"attributeRef"!==e.type&&"styleRef"!==e.type&&"arrayIndex"!==e.type&&"possessive"!==e.type)&&x.raiseParseError(n,"A target expression must be writable.  The expression type '"+(e&&e.type)+"' is not."),e}),x.addGrammarElement("hyperscript",function(e,t,n){var i=[];if(n.hasMore())for(;e.featureStart(n.currentToken())||"("===n.currentToken().value;){var r=e.requireElement("feature",n);i.push(r),n.matchToken("end")}return{type:"hyperscript",features:i,apply:function(e,t,n){for(var r,a=S(i);!(r=a()).done;)r.value.install(e,t,n)}}}),x.addFeature("on",function(e,f,t){if(t.matchToken("on")){var r=!1,n=(t.matchToken("every")&&(r=!0),[]),a=null;do{var i,o,s,l=e.requireElement("eventName",t,"Expected event name").evaluate(),a=a?a+" or "+l:"on "+l,c=Le(t),u=null;if(t.matchOpToken("[")&&(u=e.requireElement("expression",t),t.requireOpToken("]")),"NUMBER"===t.currentToken().type&&(i=t.consumeToken(),i=parseInt(i.value),t.matchToken("to")?(o=t.consumeToken(),o=parseInt(o.value)):t.matchToken("and")&&(s=!0,t.requireToken("on"))),"intersection"===l){var d={};if(t.matchToken("with")&&(d.with=e.requireElement("expression",t).evaluate()),t.matchToken("having"))for(;t.matchToken("margin")?d.rootMargin=e.requireElement("stringLike",t).evaluate():t.matchToken("threshold")?d.threshold=e.requireElement("expression",t).evaluate():e.raiseParseError(t,"Unknown intersection config specification"),t.matchToken("and"););}else if("mutation"===l){var p,h={};if(t.matchToken("of"))do{}while(t.matchToken("anything")?(h.attributes=!0,h.subtree=!0,h.characterData=!0,h.childList=!0):t.matchToken("childList")?h.childList=!0:t.matchToken("attributes")?(h.attributes=!0,h.attributeOldValue=!0):t.matchToken("subtree")?h.subtree=!0:t.matchToken("characterData")?(h.characterData=!0,h.characterDataOldValue=!0):"ATTRIBUTE_REF"===t.currentToken().type?(p=t.consumeToken(),null==h.attributeFilter&&(h.attributeFilter=[]),0==p.value.indexOf("@")?h.attributeFilter.push(p.value.substring(1)):e.raiseParseError(t,"Only shorthand attribute references are allowed here")):e.raiseParseError(t,"Unknown mutation config specification"),t.matchToken("or"));else h.attributes=!0,h.characterData=!0,h.childList=!0}var m,g,y,v=null,b=!1}while(t.matchToken("from")&&(t.matchToken("elsewhere")?b=!0:(v=e.parseElement("expression",t))||e.raiseParseError(t,'Expected either target value or "elsewhere".')),null===v&&!1===b&&t.matchToken("elsewhere")&&(b=!0),t.matchToken("in")&&(m=e.parseElement("unaryExpression",t)),t.matchToken("debounced")?(t.requireToken("at"),g=e.requireElement("expression",t).evaluate({})):t.matchToken("throttled")&&(t.requireToken("at"),y=e.requireElement("expression",t).evaluate({})),n.push({execCount:0,every:r,on:l,args:c,filter:u,from:v,inExpr:m,elsewhere:b,startCount:i,endCount:o,unbounded:s,debounceTime:g,throttleTime:y,mutationSpec:h,intersectionSpec:d,debounced:void 0,lastExec:void 0}),t.matchToken("or"));var x,_,w,T,k,A=!0,M=(!r&&t.matchToken("queue")&&(t.matchToken("all")?A=!1:t.matchToken("first")?x=!0:t.matchToken("none")?_=!0:t.requireToken("last")),e.requireElement("commandList",t)),E=(e.ensureTerminated(M),t.matchToken("catch")&&(w=t.requireTokenType("IDENTIFIER").value,T=e.requireElement("commandList",t),e.ensureTerminated(T)),t.matchToken("finally")&&(k=e.requireElement("commandList",t),e.ensureTerminated(k)),{displayName:a,events:n,start:M,every:r,execCount:0,errorHandler:T,errorSymbol:w,execute:function(n){var t=f.getEventQueueFor(n.me,E);if(t.executing&&!1===r)return _||x&&0<t.queue.length?void 0:(A&&(t.queue.length=0),void t.queue.push(n));E.execCount++,t.executing=!0,n.meta.onHalt=function(){t.executing=!1;var e=t.queue.shift();e&&setTimeout(function(){E.execute(e)},1)},n.meta.reject=function(e){console.error(e.message||e);var t=f.getHyperTrace(n,e);t&&t.print(),f.triggerEvent(n.me,"exception",{error:e})},M.execute(n)},install:function(d,e){for(var t,n,r=S(E.events);!(t=r()).done;)!function(){var u=t.value;n=u.elsewhere?[document]:u.from?u.from.evaluate(f.makeContext(d,E,d,null)):[d],f.implicitLoop(n,function(l){var a,c=u.on;u.mutationSpec&&(c="hyperscript:mutation",new MutationObserver(function(e,t){E.executing||C.triggerEvent(l,c,{mutationList:e,observer:t})}).observe(l,u.mutationSpec)),u.intersectionSpec&&(c="hyperscript:insersection",(a=new IntersectionObserver(function(e){for(var t=S(e);!(n=t()).done;){var n=n.value,r={observer:a};(r=L(r,n)).intersecting=n.isIntersecting,C.triggerEvent(l,c,r)}},u.intersectionSpec)).observe(l)),(l.addEventListener||l.on).call(l,c,function e(t){if("undefined"!=typeof Node&&d instanceof Node&&l!==d&&!d.isConnected)l.removeEventListener(c,e);else{var n=f.makeContext(d,E,d,t);if(!u.elsewhere||!d.contains(t.target)){u.from&&(n.result=l);for(var r=S(u.args);!(a=r()).done;){var a=a.value,i=n.event[a.value];void 0!==i?n[a.value]=i:"detail"in n.event&&(n[a.value]=n.event.detail[a.value])}if(n.meta.errorHandler=T,n.meta.errorSymbol=w,n.meta.finallyHandler=k,u.filter){var o=n.meta.context;n.meta.context=n.event;try{if(!u.filter.evaluate(n))return}finally{n.meta.context=o}}if(u.inExpr)for(var s=t.target;;){if(s.matches&&s.matches(u.inExpr.css)){n.result=s;break}if(null==(s=s.parentElement))return}if(u.execCount++,u.startCount)if(u.endCount){if(u.execCount<u.startCount||u.execCount>u.endCount)return}else if(u.unbounded){if(u.execCount<u.startCount)return}else if(u.execCount!==u.startCount)return;if(u.debounceTime)return u.debounced&&clearTimeout(u.debounced),void(u.debounced=setTimeout(function(){E.execute(n)},u.debounceTime));if(u.throttleTime){if(u.lastExec&&Date.now()<u.lastExec+u.throttleTime)return;u.lastExec=Date.now()}E.execute(n)}}})})}()}});return e.setParent(M,E),E}}),x.addFeature("def",function(e,l,t){if(t.matchToken("def")){var n=e.requireElement("dotOrColonPath",t).evaluate(),r=n.split("."),a=r.pop(),c=[];if(t.matchOpToken("(")&&!t.matchOpToken(")")){for(;c.push(t.requireTokenType("IDENTIFIER")),t.matchOpToken(","););t.requireOpToken(")")}var u,d,f,p=e.requireElement("commandList",t),h=(t.matchToken("catch")&&(u=t.requireTokenType("IDENTIFIER").value,d=e.parseElement("commandList",t)),t.matchToken("finally")&&(f=e.requireElement("commandList",t),e.ensureTerminated(f)),{displayName:a+"("+c.map(function(e){return e.value}).join(", ")+")",name:a,args:c,start:p,errorHandler:d,errorSymbol:u,finallyHandler:f,install:function(o,s){function e(){var e=l.makeContext(s,h,o,null);e.meta.errorHandler=d,e.meta.errorSymbol=u,e.meta.finallyHandler=f;for(var t=0;t<c.length;t++){var n=c[t];n&&(e[n.value]=arguments[t])}e.meta.caller=arguments[c.length],e.meta.caller&&(e.meta.callingCommand=e.meta.caller.meta.command);var r,a=null,i=new Promise(function(e,t){r=e,a=t});return p.execute(e),e.meta.returned?e.meta.returnValue:(e.meta.resolve=r,e.meta.reject=a,i)}e.hyperfunc=!0,e.hypername=n,l.assignToNamespace(o,r,a,e)}});return e.ensureTerminated(p),d&&e.ensureTerminated(d),e.setParent(p,h),h}}),x.addFeature("set",function(e,n,t){var r,a=e.parseElement("setCommand",t);if(a)return"element"!==a.target.scope&&e.raiseParseError(t,"variables declared at the feature level must be element scoped."),r={start:a,install:function(e,t){a&&a.execute(n.makeContext(e,r,e,null))}},e.ensureTerminated(a),r}),x.addFeature("init",function(e,n,t){var r,a;if(t.matchToken("init"))return r=e.requireElement("commandList",t),a={start:r,install:function(e,t){setTimeout(function(){r&&r.execute(n.makeContext(e,a,e,null))},0)}},e.ensureTerminated(r),e.setParent(r,a),a}),x.addFeature("worker",function(e,t,n){n.matchToken("worker")&&e.raiseParseError(n,"In order to use the 'worker' feature, include the _hyperscript worker plugin. See https://hyperscript.org/features/worker/ for more info.")}),x.addFeature("behavior",function(e,i,t){if(t.matchToken("behavior")){var o=e.requireElement("dotOrColonPath",t).evaluate(),n=o.split("."),r=n.pop(),s=[];if(t.matchOpToken("(")&&!t.matchOpToken(")")){for(;s.push(t.requireTokenType("IDENTIFIER").value),t.matchOpToken(","););t.requireOpToken(")")}for(var l=e.requireElement("hyperscript",t),a=0;a<l.features.length;a++)l.features[a].behavior=o;return{install:function(e,t){i.assignToNamespace(f.document&&f.document.body,n,r,function(e,t,n){for(var r=U(i.getInternalData(e),o+"Scope"),a=0;a<s.length;a++)r[s[a]]=n[s[a]];l.apply(e,t)})}}}}),x.addFeature("install",function(e,t,n){var r,o,s,l;if(n.matchToken("install"))return o=e.requireElement("dotOrColonPath",n).evaluate(),s=o.split("."),l=e.parseElement("namedArgumentList",n),r={install:function(a,i){t.unifiedEval({args:[l],op:function(e,t){for(var n=f,r=0;r<s.length;r++)if("object"!=typeof(n=n[s[r]])&&"function"!=typeof n)throw new Error("No such behavior defined as "+o);if(!(n instanceof Function))throw new Error(o+" is not a behavior");n(a,i,t)}},t.makeContext(a,r,a))}}}),x.addGrammarElement("jsBody",function(e,t,n){for(var r=n.currentToken().start,a=n.currentToken(),i=[],o="",s=!1;n.hasMore();){var a=n.consumeToken(),l=n.token(0,!0);if("IDENTIFIER"===l.type&&"end"===l.value)break;s?"IDENTIFIER"===a.type||"NUMBER"===a.type?o+=a.value:(""!==o&&i.push(o),o="",s=!1):"IDENTIFIER"===a.type&&"function"===a.value&&(s=!0)}return{type:"jsBody",exposedFunctionNames:i,jsSource:n.source.substring(r,a.end+1)}}),x.addFeature("js",function(e,t,n){var r;if(n.matchToken("js"))return{jsSource:n=(e=e.requireElement("jsBody",n)).jsSource+"\nreturn { "+e.exposedFunctionNames.map(function(e){return e+":"+e}).join(",")+" } ",function:r=new Function(n),exposedFunctionNames:e.exposedFunctionNames,install:function(){L(f,r())}}}),x.addCommand("js",function(e,r,t){if(t.matchToken("js")){var a=[];if(t.matchOpToken("(")&&!t.matchOpToken(")")){do{var n=t.requireTokenType("IDENTIFIER")}while(a.push(n.value),t.matchOpToken(","));t.requireOpToken(")")}var e=e.requireElement("jsBody",t),i=(t.matchToken("end"),V(Function,a.concat([e.jsSource])));return{jsSource:e.jsSource,function:i,inputs:a,op:function(n){var t=[],e=(a.forEach(function(e){t.push(r.resolveSymbol(e,n,"default"))}),i.apply(f,t));return e&&"function"==typeof e.then?new Promise(function(t){e.then(function(e){n.result=e,t(r.findNext(this,n))})}):(n.result=e,r.findNext(this,n))}}}}),x.addCommand("async",function(e,t,n){if(n.matchToken("async")){if(n.matchToken("do")){for(var r=a=e.requireElement("commandList",n);r.next;)r=r.next;r.next=t.HALT,n.requireToken("end")}else var a=e.requireElement("command",n);n={body:a,op:function(e){return setTimeout(function(){a.execute(e)}),t.findNext(this,e)}};return e.setParent(a,n),n}}),x.addCommand("tell",function(e,n,t){var r,a,i,o=t.currentToken();if(t.matchToken("tell"))return r=e.requireElement("expression",t),a=e.requireElement("commandList",t),t.hasMore()&&!e.featureStart(t.currentToken())&&t.requireToken("end"),i="tell_"+o.start,e.setParent(a,t={value:r,body:a,args:[r],resolveNext:function(e){var t=e.meta.iterators[i];return t.index<t.value.length?(e.beingTold=t.value[t.index++],a):(e.beingTold=t.originalBeingTold,this.next||n.findNext(this.parent,e))},op:function(e,t){return null==t?t=[]:Array.isArray(t)||t instanceof NodeList||(t=[t]),e.meta.iterators[i]={originalBeingTold:e.beingTold,index:0,value:t},this.resolveNext(e)}}),t}),x.addCommand("wait",function(e,c,t){if(t.matchToken("wait")){if(t.matchToken("for")){t.matchToken("a");var n,r=[];do{var a=t.token(0)}while(r.push("NUMBER"===a.type||"L_PAREN"===a.type?{time:e.requireElement("expression",t).evaluate()}:{name:x.requireElement("dotOrColonPath",t,"Expected event name").evaluate(),args:Le(t)}),t.matchToken("or"));return t.matchToken("from")&&(n=e.requireElement("expression",t)),{event:r,on:n,args:[n],op:function(o,e){var s=this,l=e||o.me;if(l instanceof EventTarget)return new Promise(function(a){for(var e,t,i=!1,n=S(r);!(e=n()).done;)!function(){var r=e.value;t=function(e){if(o.result=e,r.args)for(var t=S(r.args);!(n=t()).done;){var n=n.value;o[n.value]=e[n.value]||(e.detail?e.detail[n.value]:null)}i||(i=!0,a(c.findNext(s,o)))},r.name?l.addEventListener(r.name,t,{once:!0}):null!=r.time&&setTimeout(t,r.time,r.time)}()});throw new Error("Not a valid event target: "+this.on.sourceFor())}}}return{type:"waitCmd",time:n=t.matchToken("a")?(t.requireToken("tick"),0):x.requireElement("expression",t),args:[n],op:function(t,n){var r=this;return new Promise(function(e){setTimeout(function(){e(c.findNext(r,t))},n)})},execute:function(e){return c.unifiedExec(this,e)}}}}),x.addGrammarElement("dotOrColonPath",function(e,t,n){var r=n.matchTokenType("IDENTIFIER");if(r){var a=[r.value],i=n.matchOpToken(".")||n.matchOpToken(":");if(i)for(;a.push(n.requireTokenType("IDENTIFIER","NUMBER").value),n.matchOpToken(i.value););return{type:"dotOrColonPath",path:a,evaluate:function(){return a.join(i?i.value:"")}}}}),x.addGrammarElement("eventName",function(e,t,n){var r;return(r=n.matchTokenType("STRING"))?{evaluate:function(){return r.value}}:e.parseElement("dotOrColonPath",n)}),x.addCommand("trigger",function(e,t,n){if(n.matchToken("trigger"))return $("trigger",e,t,n)}),x.addCommand("send",function(e,t,n){if(n.matchToken("send"))return $("send",e,t,n)}),x.addCommand("return",function(e,t,n){if(n.matchToken("return"))return Ce(e,t,n,!0)}),x.addCommand("exit",function(e,t,n){if(n.matchToken("exit"))return Ce(e,t,n,!1)}),x.addCommand("halt",function(e,t,n){var r,a,i,o;if(n.matchToken("halt"))return n.matchToken("the")&&(n.requireToken("event"),n.matchOpToken("'")&&n.requireToken("s"),r=!0),n.matchToken("bubbling")?a=!0:n.matchToken("default")&&(i=!0),o=Ce(e,t,n,!1),{keepExecuting:!0,bubbling:a,haltDefault:i,exit:o,op:function(e){if(e.event)return a?e.event.stopPropagation():(i||e.event.stopPropagation(),e.event.preventDefault()),r?t.findNext(this,e):o}}}),x.addCommand("log",function(e,r,t){if(t.matchToken("log")){for(var n,a=[e.parseElement("expression",t)];t.matchOpToken(",");)a.push(e.requireElement("expression",t));return{exprs:a,withExpr:n=t.matchToken("with")?e.requireElement("expression",t):n,args:[n,a],op:function(e,t,n){return(t||console.log).apply(null,n),r.findNext(this,e)}}}}),x.addCommand("throw",function(e,n,t){if(t.matchToken("throw"))return{expr:e=e.requireElement("expression",t),args:[e],op:function(e,t){throw n.registerHyperTrace(e,t),t}}}),x.addCommand("call",function(e,t,n){if(n.matchToken("call"))return(t=Oe(e,t,n)).expr&&"functionCall"!==t.expr.type&&e.raiseParseError(n,"Must be a function invocation"),t}),x.addCommand("get",function(e,t,n){if(n.matchToken("get"))return Oe(e,t,n)}),x.addCommand("make",function(e,l,t){if(t.matchToken("make")){t.matchToken("a")||t.matchToken("an");var c,u=e.requireElement("expression",t),n=[];if("queryRef"!==u.type&&t.matchToken("from"))for(;n.push(e.requireElement("expression",t)),t.matchOpToken(","););return t.matchToken("called")&&(c=e.requireElement("symbol",t)),"queryRef"===u.type?{op:function(e){for(var t,n,r="div",a=[],i=/(?:(^|#|\.)([^#\. ]+))/g;t=i.exec(u.css);)""===t[1]?r=t[2].trim():"#"===t[1]?n=t[2].trim():a.push(t[2].trim());var o=document.createElement(r);void 0!==n&&(o.id=n);for(var s=0;s<a.length;s++)o.classList.add(a[s]);return e.result=o,c&&l.setSymbol(c.name,e,c.scope,o),l.findNext(this,e)}}:{args:[u,n],op:function(e,t,n){return e.result=V(t,n),c&&l.setSymbol(c.name,e,c.scope,e.result),l.findNext(this,e)}}}}),x.addGrammarElement("pseudoCommand",function(e,a,t){var n=t.token(1);if(!n||!n.op||"."!==n.value&&"("!==n.value)return null;for(var i,o,n=e.requireElement("primaryExpression",t),r=n.root,s=n;null!=r.root;)s=s.root,r=r.root;return"functionCall"!==n.type&&e.raiseParseError(t,"Pseudo-commands must be function calls"),"functionCall"===s.type&&null==s.root.root&&(t.matchAnyToken("the","to","on","with","into","from","at")?i=e.requireElement("expression",t):t.matchToken("me")&&(i=e.requireElement("implicitMeTarget",t))),o=i?{type:"pseudoCommand",root:i,argExressions:s.argExressions,args:[i,s.argExressions],op:function(e,t,n){a.nullCheck(t,i);var r=t[s.root.name];return a.nullCheck(r,s),r.hyperfunc&&n.push(e),e.result=r.apply(t,n),a.findNext(o,e)},execute:function(e){return a.unifiedExec(this,e)}}:{type:"pseudoCommand",expr:n,args:[n],op:function(e,t){return e.result=t,a.findNext(o,e)},execute:function(e){return a.unifiedExec(this,e)}}}),x.addCommand("default",function(e,n,t){var r,a,i;if(t.matchToken("default"))return r=e.requireElement("assignableExpression",t),t.requireToken("to"),e={target:r,value:a=e.requireElement("expression",t),setter:i=E(e,n,t,r,a),args:[r],op:function(e,t){return t?n.findNext(this,e):i}},i.parent=e}),x.addCommand("set",function(e,r,t){if(t.matchToken("set")){if("L_BRACE"===t.currentToken().type)return a=e.requireElement("objectLiteral",t),t.requireToken("on"),{objectLiteral:a,target:n=e.requireElement("expression",t),args:[a,n],op:function(e,t,n){return L(n,t),r.findNext(this,e)}};try{t.pushFollow("to");var n=e.requireElement("assignableExpression",t)}finally{t.popFollow()}t.requireToken("to");var a=e.requireElement("expression",t);return E(e,r,t,n,a)}}),x.addCommand("if",function(e,n,t){var r,a,i;if(t.matchToken("if"))return r=e.requireElement("expression",t),t.matchToken("then"),a=e.parseElement("commandList",t),(t.matchToken("else")||t.matchToken("otherwise"))&&(i=e.parseElement("commandList",t)),t.hasMore()&&t.requireToken("end"),t={expr:r,trueBranch:a,falseBranch:i,args:[r],op:function(e,t){return t?a:i||n.findNext(this,e)}},e.setParent(a,t),e.setParent(i,t),t}),x.addCommand("repeat",function(e,t,n){if(n.matchToken("repeat"))return De(e,n,t,!1)}),x.addCommand("for",function(e,t,n){if(n.matchToken("for"))return De(e,n,t,!0)}),x.addCommand("continue",function(n,e,r){if(r.matchToken("continue"))return{op:function(e){for(var t=this.parent;;t=t.parent)if(null==t&&n.raiseParseError(r,"Command `continue` cannot be used outside of a `repeat` loop."),null!=t.loop)return t.resolveNext(e)}}}),x.addCommand("break",function(n,r,a){if(a.matchToken("break"))return{op:function(e){for(var t=this.parent;;t=t.parent)if(null==t&&n.raiseParseError(a,"Command `continue` cannot be used outside of a `repeat` loop."),null!=t.loop)return r.findNext(t.parent,e)}}}),x.addGrammarElement("stringLike",function(e,t,n){return x.parseAnyOf(["string","nakedString"],n)}),x.addCommand("append",function(e,r,t){var n,a,i,o;if(t.matchToken("append"))return n={type:"symbol",evaluate:function(e){return r.resolveSymbol("result",e)}},o={value:o=e.requireElement("expression",t),target:a=t.matchToken("to")?e.requireElement("expression",t):n,args:[a,o],op:function(e,t,n){if(Array.isArray(t))return t.push(n),r.findNext(this,e);if(t instanceof Element)return t.innerHTML+=n,r.findNext(this,e);if(i)return e.result=(t||"")+n,i;throw Error("Unable to append a value!")},execute:function(e){return r.unifiedExec(this,e)}},(i=null)!=(i="symbol"!==a.type&&"attributeRef"!==a.type&&null==a.root?i:E(e,r,t,a,n))&&(i.parent=o),o}),x.addCommand("increment",function(e,t,n){var r,a;if(n.matchToken("increment"))return a={type:"implicitIncrementOp",target:r=e.parseElement("assignableExpression",n),args:[r,a=n.matchToken("by")?e.requireElement("expression",n):a],op:function(e,t,n){t=(t=t?parseFloat(t):0)+(n=n?parseFloat(n):1);return e.result=t},evaluate:function(e){return t.unifiedEval(this,e)}},E(e,t,n,r,a)}),x.addCommand("decrement",function(e,t,n){var r,a;if(n.matchToken("decrement"))return a={type:"implicitDecrementOp",target:r=e.parseElement("assignableExpression",n),args:[r,a=n.matchToken("by")?e.requireElement("expression",n):a],op:function(e,t,n){t=(t=t?parseFloat(t):0)-(n=n?parseFloat(n):1);return e.result=t},evaluate:function(e){return t.unifiedEval(this,e)}},E(e,t,n,r,a)}),x.addCommand("fetch",function(e,s,t){var n,r,a,l,c,u;if(t.matchToken("fetch"))return n=e.requireElement("stringLike",t),t.matchToken("as")&&(r=G(t,e)),a=t.matchToken("with")&&"{"!==t.currentToken().value?e.parseElement("nakedNamedArgumentList",t):e.parseElement("objectLiteral",t),l=(r=null==r&&t.matchToken("as")?G(t,e):r)?r.type:"text",c=r?r.conversion:null,u={url:n,argExpressions:a,args:[n,a],op:function(n,e,t){var r=t||{},a=(r.sender=n.me,r.headers=r.headers||{},new AbortController),i=n.me.addEventListener("fetch:abort",function(){a.abort()},{once:!0}),o=(r.signal=a.signal,s.triggerEvent(n.me,"hyperscript:beforeFetch",r),s.triggerEvent(n.me,"fetch:beforeRequest",r),!1);return(t=r).timeout&&setTimeout(function(){o||a.abort()},t.timeout),fetch(e,t).then(function(e){var t={response:e};return s.triggerEvent(n.me,"fetch:afterResponse",t),e=t.response,"response"===l?(n.result=e,s.triggerEvent(n.me,"fetch:afterRequest",{result:e}),o=!0,s.findNext(u,n)):"json"===l?e.json().then(function(e){return n.result=e,s.triggerEvent(n.me,"fetch:afterRequest",{result:e}),o=!0,s.findNext(u,n)}):e.text().then(function(e){return c&&(e=s.convertValue(e,c)),"html"===l&&(e=s.convertValue(e,"Fragment")),n.result=e,s.triggerEvent(n.me,"fetch:afterRequest",{result:e}),o=!0,s.findNext(u,n)})}).catch(function(e){throw s.triggerEvent(n.me,"fetch:error",{reason:e}),e}).finally(function(){n.me.removeEventListener("fetch:abort",i)})}}}),"document"in f&&(O=Array.from(document.querySelectorAll("script[type='text/hyperscript'][src]")),Promise.all(O.map(function(e){return fetch(e.src).then(function(e){return e.text()})})).then(function(e){return e.forEach(C.evaluate)}).then(function(){var e=function(){var e;(e=(e=document.querySelector('meta[name="htmx-config"]'))?function(e){try{return JSON.parse(e)}catch(e){return t=e,console.error?console.error(t):console.log&&console.log("ERROR: ",t),null}var t}(e.content):null)&&(o.config=L(o.config,e)),C.processNode(document.documentElement),document.addEventListener("htmx:load",function(e){C.processNode(e.detail.elt)})};"loading"!==document.readyState?setTimeout(e):document.addEventListener("DOMContentLoaded",e)})),o=L(function(e,t){return C.evaluate(e,t)},{internals:{lexer:h,parser:x,runtime:C},ElementCollection:p,addFeature:function(e,t){x.addFeature(e,t)},addCommand:function(e,t){x.addCommand(e,t)},addLeafExpression:function(e,t){x.addLeafExpression(e,t)},addIndirectExpression:function(e,t){x.addIndirectExpression(e,t)},evaluate:C.evaluate.bind(C),parse:C.parse.bind(C),processNode:C.processNode.bind(C),config:{attributes:"_, script, data-script",defaultTransition:"all 500ms ease-in",disableSelector:"[disable-scripting], [data-disable-scripting]",conversions:Q}}));return(D=P).addCommand("settle",function(e,i,t){var o,s;if(t.matchToken("settle"))return o=e.commandBoundary(t.currentToken())?e.requireElement("implicitMeTarget",t):e.requireElement("expression",t),s={type:"settleCmd",args:[o],op:function(e,t){i.nullCheck(t,o);var n=null,r=!1,a=new Promise(function(e){n=e});return t.addEventListener("transitionstart",function(){r=!0},{once:!0}),setTimeout(function(){r||n(i.findNext(s,e))},500),t.addEventListener("transitionend",function(){n(i.findNext(s,e))},{once:!0}),a},execute:function(e){return i.unifiedExec(this,e)}}}),D.addCommand("add",function(e,r,t){if(t.matchToken("add")){var a,i,n=e.parseElement("classRef",t),o=null,s=null;if(null==n)null==(o=e.parseElement("attributeRef",t))&&null==(s=e.parseElement("styleLiteral",t))&&e.raiseParseError(t,"Expected either a class reference or attribute expression");else for(var l=[n];n=e.parseElement("classRef",t);)l.push(n);return a=t.matchToken("to")?e.requireElement("expression",t):e.requireElement("implicitMeTarget",t),t.matchToken("when")&&(s&&e.raiseParseError(t,"Only class and properties are supported with a when clause"),i=e.requireElement("expression",t)),l?{classRefs:l,to:a,args:[a,l],op:function(n,e,t){return r.nullCheck(e,a),r.forEach(t,function(t){r.implicitLoop(e,function(e){i?(n.result=e,r.evaluateNoPromise(i,n)?e instanceof Element&&e.classList.add(t.className):e instanceof Element&&e.classList.remove(t.className),n.result=null):e instanceof Element&&e.classList.add(t.className)})}),r.findNext(this,n)}}:o?{type:"addCmd",attributeRef:o,to:a,args:[a],op:function(t,e,n){return r.nullCheck(e,a),r.implicitLoop(e,function(e){i?(t.result=e,r.evaluateNoPromise(i,t)?e.setAttribute(o.name,o.value):e.removeAttribute(o.name),t.result=null):e.setAttribute(o.name,o.value)}),r.findNext(this,t)},execute:function(e){return r.unifiedExec(this,e)}}:{type:"addCmd",cssDeclaration:s,to:a,args:[a,s],op:function(e,t,n){return r.nullCheck(t,a),r.implicitLoop(t,function(e){e.style.cssText+=n}),r.findNext(this,e)},execute:function(e){return r.unifiedExec(this,e)}}}}),D.internals.parser.addGrammarElement("styleLiteral",function(e,t,n){if(n.matchOpToken("{")){for(var r,a,i=[""],o=[];n.hasMore();){if(n.matchOpToken("\\"))n.consumeToken();else{if(n.matchOpToken("}"))break;n.matchToken("$")?(a=n.matchOpToken("{"),r=e.parseElement("expression",n),a&&n.requireOpToken("}"),o.push(r),i.push("")):(a=n.consumeToken(),i[i.length-1]+=n.source.substring(a.start,a.end))}i[i.length-1]+=n.lastWhitespace()}return{type:"styleLiteral",args:[o],op:function(e,n){var r="";return i.forEach(function(e,t){r+=e,t in n&&(r+=n[t])}),r},evaluate:function(e){return t.unifiedEval(this,e)}}}}),D.addCommand("remove",function(e,r,t){if(t.matchToken("remove")){var a,n=e.parseElement("classRef",t),i=null,o=null;if(null==n)null==(i=e.parseElement("attributeRef",t))&&null==(o=e.parseElement("expression",t))&&e.raiseParseError(t,"Expected either a class reference, attribute expression or value expression");else for(var s=[n];n=e.parseElement("classRef",t);)s.push(n);return a=t.matchToken("from")?e.requireElement("expression",t):e.requireElement("implicitMeTarget",t),o?{elementExpr:o,from:a,args:[o],op:function(e,t){return r.nullCheck(t,o),r.implicitLoop(t,function(e){e.parentElement&&e.parentElement.removeChild(e)}),r.findNext(this,e)}}:{classRefs:s,attributeRef:i,elementExpr:o,from:a,args:[s,a],op:function(e,t,n){return r.nullCheck(n,a),t?r.forEach(t,function(t){r.implicitLoop(n,function(e){e.classList.remove(t.className)})}):r.implicitLoop(n,function(e){e.removeAttribute(i.name)}),r.findNext(this,e)}}}}),D.addCommand("toggle",function(e,c,t){if(t.matchToken("toggle")){if(t.matchAnyToken("the","my"),"STYLE_REF"===t.currentToken().type){var n=t.consumeToken().value.substr(1),a=!0,i=R(e,t,n);if(t.matchToken("of")){t.pushFollow("with");try{var o=e.requireElement("expression",t)}finally{t.popFollow()}}else o=e.requireElement("implicitMeTarget",t)}else if(t.matchToken("between"))var s=!0,r=e.parseElement("classRef",t),l=(t.requireToken("and"),e.requireElement("classRef",t));else{var r=e.parseElement("classRef",t),u=null;if(null==r)null==(u=e.parseElement("attributeRef",t))&&e.raiseParseError(t,"Expected either a class reference or attribute expression");else for(var d=[r];r=e.parseElement("classRef",t);)d.push(r)}!0!==a&&(o=t.matchToken("on")?e.requireElement("expression",t):e.requireElement("implicitMeTarget",t)),t.matchToken("for")?f=e.requireElement("expression",t):t.matchToken("until")&&(p=e.requireElement("dotOrColonPath",t,"Expected event name"),t.matchToken("from")&&(h=e.requireElement("expression",t)));var f,p,h,m={classRef:r,classRef2:l,classRefs:d,attributeRef:u,on:o,time:f,evt:p,from:h,toggle:function(e,t,n,r){c.nullCheck(e,o),a?c.implicitLoop(e,function(e){i("toggle",e)}):s?c.implicitLoop(e,function(e){e.classList.contains(t.className)?(e.classList.remove(t.className),e.classList.add(n.className)):(e.classList.add(t.className),e.classList.remove(n.className))}):r?c.forEach(r,function(t){c.implicitLoop(e,function(e){e.classList.toggle(t.className)})}):c.forEach(e,function(e){e.hasAttribute(u.name)?e.removeAttribute(u.name):e.setAttribute(u.name,u.value)})},args:[o,f,p,h,r,l,d],op:function(t,n,r,a,i,o,s,l){return r?new Promise(function(e){m.toggle(n,o,s,l),setTimeout(function(){m.toggle(n,o,s,l),e(c.findNext(m,t))},r)}):a?new Promise(function(e){(i||t.me).addEventListener(a,function(){m.toggle(n,o,s,l),e(c.findNext(m,t))},{once:!0}),m.toggle(n,o,s,l)}):(this.toggle(n,o,s,l),c.findNext(m,t))}};return m}}),I={display:function(e,t,n){n?t.style.display=n:"toggle"===e?"none"===getComputedStyle(t).display?I.display("show",t,n):I.display("hide",t,n):"hide"===e?(null==(n=D.internals.runtime.getInternalData(t)).originalDisplay&&(n.originalDisplay=t.style.display),t.style.display="none"):(e=D.internals.runtime.getInternalData(t)).originalDisplay&&"none"!==e.originalDisplay?t.style.display=e.originalDisplay:t.style.removeProperty("display")},visibility:function(e,t,n){n?t.style.visibility=n:"toggle"===e?"hidden"===getComputedStyle(t).visibility?I.visibility("show",t,n):I.visibility("hide",t,n):t.style.visibility="hide"===e?"hidden":"visible"},opacity:function(e,t,n){n?t.style.opacity=n:"toggle"===e?"0"===getComputedStyle(t).opacity?I.opacity("show",t,n):I.opacity("hide",t,n):t.style.opacity="hide"===e?"0":"1"}},R=function(e,t,n){var r=D.config.defaultHideShowStrategy,a=I,a=(a=D.config.hideShowStrategies?L(a,D.config.hideShowStrategies):a)[n=n||r||"display"];return null==a&&e.raiseParseError(t,"Unknown show/hide strategy : "+n),a},D.addCommand("hide",function(e,n,t){var r,a,i;if(t.matchToken("hide"))return r=Re(e,0,t),a=null,t.matchToken("with")&&0===(a=t.requireTokenType("IDENTIFIER","STYLE_REF").value).indexOf("*")&&(a=a.substr(1)),i=R(e,t,a),{target:r,args:[r],op:function(e,t){return n.nullCheck(t,r),n.implicitLoop(t,function(e){i("hide",e)}),n.findNext(this,e)}}}),D.addCommand("show",function(e,n,t){var r,a,i,o,s,l;if(t.matchToken("show"))return r=Re(e,0,t),a=null,t.matchToken("with")&&0===(a=t.requireTokenType("IDENTIFIER","STYLE_REF").value).indexOf("*")&&(a=a.substr(1)),i=null,t.matchOpToken(":")&&(o=t.consumeUntilWhitespace(),t.matchTokenType("WHITESPACE"),i=o.map(function(e){return e.value}).join("")),t.matchToken("when")&&(s=e.requireElement("expression",t)),l=R(e,t,a),{target:r,when:s,args:[r],op:function(t,e){return n.nullCheck(e,r),n.implicitLoop(e,function(e){s?(t.result=e,n.evaluateNoPromise(s,t)?l("show",e,i):l("hide",e),t.result=null):l("show",e,i)}),n.findNext(this,t)}}}),D.addCommand("take",function(e,i,t){var n,o,s;if(t.matchToken("take"))return n=e.requireElement("classRef",t),o=t.matchToken("from")?e.requireElement("expression",t):n,s=t.matchToken("for")?e.requireElement("expression",t):e.requireElement("implicitMeTarget",t),{classRef:n,from:o,forElt:s,args:[n,o,s],op:function(e,t,n,r){i.nullCheck(n,o),i.nullCheck(r,s);var a=t.className;return i.implicitLoop(n,function(e){e.classList.remove(a)}),i.implicitLoop(r,function(e){e.classList.add(a)}),i.findNext(this,e)}}}),D.addCommand("put",function(e,i,t){var n,r,o,s,l,c,a,u,d;if(t.matchToken("put"))return n=e.requireElement("expression",t),null==(a=t.matchAnyToken("into","before","after"))&&t.matchToken("at")&&(t.matchToken("the"),a=t.matchAnyToken("start","end"),t.requireToken("of")),null==a&&e.raiseParseError(t,"Expected one of 'into', 'before', 'at start of', 'at end of', 'after'"),r=e.requireElement("expression",t),o=a.value,l=s=!1,a=u=null,"arrayIndex"===r.type&&"into"===o?(s=!0,a=r.prop,u=r.root):r.prop&&r.root&&"into"===o?(a=r.prop.value,u=r.root):"symbol"===r.type&&"into"===o?(l=!0,a=r.name):u="attributeRef"===r.type&&"into"===o?(c=!0,a=r.name,e.requireElement("implicitMeTarget",t)):"styleRef"===r.type&&"into"===o?(d=!0,a=r.name,e.requireElement("implicitMeTarget",t)):r.attribute&&"into"===o?(c="attributeRef"===r.attribute.type,d="styleRef"===r.attribute.type,a=r.attribute.name,r.root):r,{target:r,operation:o,symbolWrite:l,value:n,args:[u,a,n],op:function(e,t,n,r){var a;return l?Pe(i,e,n,r):(i.nullCheck(t,u),"into"===o?c?i.implicitLoop(t,function(e){e.setAttribute(n,r)}):d?i.implicitLoop(t,function(e){e.style[n]=r}):s?t[n]=r:i.implicitLoop(t,function(e){Pe(i,e,n,r)}):(a="before"===o?Element.prototype.before:"after"===o?Element.prototype.after:"start"===o?Element.prototype.prepend:Element.prototype.append,i.implicitLoop(t,function(e){a.call(e,r instanceof Node?r:i.convertValue(r,"Fragment"))}))),i.findNext(this,e)}}}),D.addCommand("transition",function(e,v,t){if(t.matchToken("transition")){for(var n,r,a=Ne(e,v,t),i=[],o=[],s=[],l=t.currentToken();!e.commandBoundary(l)&&"over"!==l.value&&"using"!==l.value;)"STYLE_REF"===t.currentToken().type?function(){var e=t.consumeToken().value.substr(1);i.push({type:"styleRefValue",evaluate:function(){return e}})}():i.push(e.requireElement("stringLike",t)),t.matchToken("from")?o.push(e.requireElement("expression",t)):o.push(null),t.requireToken("to"),t.matchToken("initial")?s.push({type:"initial_literal",evaluate:function(){return"initial"}}):s.push(e.requireElement("expression",t)),l=t.currentToken();t.matchToken("over")?n=e.requireElement("expression",t):t.matchToken("using")&&(r=e.requireElement("expression",t));var c={to:s,args:[a,i,o,s,r,n],op:function(e,t,p,h,m,g,y){v.nullCheck(t,a);var n=[];return v.implicitLoop(t,function(f){var e=new Promise(function(e,t){var n=f.style.transition;f.style.transition=y?"all "+y+"ms ease-in":g||D.config.defaultTransition;for(var r=v.getInternalData(f),a=getComputedStyle(f),i={},o=0;o<a.length;o++){var s=a[o];i[s]=a[s]}for(r.initalStyles||(r.initalStyles=i),o=0;o<p.length;o++){var l=p[o],c=h[o];f.style[l]="computed"===c||null==c?i[l]:c}var u=!1,d=!1;f.addEventListener("transitionend",function(){d||(f.style.transition=n,d=!0,e())},{once:!0}),f.addEventListener("transitionstart",function(){u=!0},{once:!0}),setTimeout(function(){d||u||(f.style.transition=n,d=!0,e())},100),setTimeout(function(){for(var e=0;e<p.length;e++){var t=p[e],n=m[e];f.style[t]="initial"===n?r.initalStyles[t]:n}},0)});n.push(e)}),Promise.all(n).then(function(){return v.findNext(c,e)})}};return c}}),D.addCommand("measure",function(e,r,t){if(t.matchToken("measure")){var a=Ne(e,r,t),i=[];if(!e.commandBoundary(t.currentToken()))for(;i.push(t.matchTokenType("IDENTIFIER").value),t.matchOpToken(","););return{properties:i,args:[a],op:function(t,e){r.nullCheck(e,a);var n=(e=0 in e?e[0]:e).getBoundingClientRect(),e={top:e.scrollTop,left:e.scrollLeft,topMax:e.scrollTopMax,leftMax:e.scrollLeftMax,height:e.scrollHeight,width:e.scrollWidth};return t.result={x:n.x,y:n.y,left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height,bounds:n,scrollLeft:e.left,scrollTop:e.top,scrollLeftMax:e.leftMax,scrollTopMax:e.topMax,scrollWidth:e.width,scrollHeight:e.height,scroll:e},r.forEach(i,function(e){if(!(e in t.result))throw"No such measurement as "+e;t[e]=t.result[e]}),r.findNext(this,t)}}}}),D.addLeafExpression("closestExpr",function(e,r,t){var a,n,i,o;if(t.matchToken("closest"))return t.matchToken("parent")&&(a=!0),i=null,"ATTRIBUTE_REF"===t.currentToken().type&&(n=e.requireElement("attributeRefAccess",t,null),i="["+n.attribute.name+"]"),null==i&&(null==(o=e.requireElement("expression",t)).css?e.raiseParseError(t,"Expected a CSS expression"):i=o.css),e=t.matchToken("to")?e.parseElement("expression",t):e.parseElement("implicitMeTarget",t),t={type:"closestExpr",parentSearch:a,expr:o,css:i,to:e,args:[e],op:function(e,t){if(null==t)return null;var n=[];return r.implicitLoop(t,function(e){n.push(a?e.parentElement?e.parentElement.closest(i):null:e.closest(i))}),r.shouldAutoIterate(t)?n:n[0]},evaluate:function(e){return r.unifiedEval(this,e)}},n?(n.root=t,n.args=[t],n):t}),D.addCommand("go",function(e,n,t){if(t.matchToken("go")){if(t.matchToken("back"))var r=!0;else if(t.matchToken("to"),t.matchToken("url")){var i,a=e.requireElement("stringLike",t),o=!0;t.matchToken("in")&&(t.requireToken("new"),t.requireToken("window"),i=!0)}else{t.matchToken("the");var s=t.matchAnyToken("top","middle","bottom"),l=t.matchAnyToken("left","center","right"),c=((s||l)&&t.requireToken("of"),a=e.requireElement("unaryExpression",t),t.matchAnyOpToken("+","-"));if(c){t.pushFollow("px");try{var u=e.requireElement("expression",t)}finally{t.popFollow()}}t.matchToken("px");var e=t.matchAnyToken("smoothly","instantly"),d={};s&&("top"===s.value?d.block="start":"bottom"===s.value?d.block="end":"middle"===s.value&&(d.block="center")),l&&("left"===l.value?d.inline="start":"center"===l.value?d.inline="center":"right"===l.value&&(d.inline="end")),e&&("smoothly"===e.value?d.behavior="smooth":"instantly"===e.value&&(d.behavior="instant"))}var f={target:a,args:[a,u],op:function(e,t,a){return r?window.history.back():o?t&&(i?window.open(t):window.location.href=t):n.implicitLoop(t,function(e){var t,n,r;e===window&&(e=document.body),c&&(t=e.getBoundingClientRect(),n=document.createElement("div"),r="-"===c.value?-a:a,n.style.position="absolute",n.style.top=t.x+r+"px",n.style.left=t.y+r+"px",n.style.height=t.height+2*r+"px",n.style.width=t.width+2*r+"px",n.style.zIndex=""+Number.MIN_SAFE_INTEGER,n.style.opacity="0",document.body.appendChild(n),setTimeout(function(){document.body.removeChild(n)},100),e=n),e.scrollIntoView(d)}),n.findNext(f,e)}};return f}}),D.config.conversions.dynamicResolvers.push(function(e,t){if("Values"===e||0===e.indexOf("Values:")){var e=e.split(":")[1],n={};if((0,D.internals.runtime.implicitLoop)(t,function(e){var t=a(e);void 0===t?null!=e.querySelectorAll&&e.querySelectorAll("input,select,textarea").forEach(r):n[t.name]=t.value}),e){if("JSON"===e)return JSON.stringify(n);if("Form"===e)return new URLSearchParams(n).toString();throw"Unknown conversion: "+e}return n}function r(e){e=a(e);null!=e&&(null!=n[e.name]?Array.isArray(n[e.name])&&Array.isArray(e.value)&&(n[e.name]=[].concat(n[e.name],e.value)):n[e.name]=e.value)}function a(e){try{var t={name:e.name,value:e.value};if(null==t.name||null==t.value)return;if("radio"==e.type&&0==e.checked)return;if("checkbox"==e.type&&(0==e.checked?t.value=void 0:"string"==typeof t.value&&(t.value=[t.value])),"select-multiple"==e.type){var n=e.querySelectorAll("option[selected]");t.value=[];for(var r=0;r<n.length;r++)t.value.push(n[r].value)}return t}catch(e){return}}}),D.config.conversions.HTML=function e(t){if(t instanceof Array)return t.map(e).join("");if(t instanceof HTMLElement)return t.outerHTML;if(t instanceof NodeList){for(var n="",r=0;r<t.length;r++){var a=t[r];a instanceof HTMLElement&&(n+=a.outerHTML)}return n}return t.toString?t.toString():""},D.config.conversions.Fragment=function(e){var n=document.createDocumentFragment();return D.internals.runtime.implicitLoop(e,function(e){var t;e instanceof Node?n.append(e):((t=document.createElement("template")).innerHTML=e,n.append(t.content))}),n},P;function Re(e,t,n){var r=n.currentToken();return"when"===r.value||"with"===r.value||e.commandBoundary(r)?e.parseElement("implicitMeTarget",n):e.parseElement("expression",n)}function Pe(e,t,n,r){var a=null!=n?e.resolveSymbol(n,t):t;if(a instanceof Element||a instanceof HTMLDocument){for(;a.firstChild;)a.removeChild(a.firstChild);a.append(D.internals.runtime.convertValue(r,"Fragment"))}else{if(null==n)throw"Don't know how to put a value into "+typeof t;e.setSymbol(n,t,null,r)}}function Ne(e,t,n){var r,a;if(n.matchToken("the")||n.matchToken("element")||n.matchToken("elements")||"CLASS_REF"===n.currentToken().type||"ID_REF"===n.currentToken().type||n.currentToken().op&&"<"===n.currentToken().value){e.possessivesDisabled=!0;try{a=e.parseElement("expression",n)}finally{delete e.possessivesDisabled}n.matchOpToken("'")&&n.requireToken("s")}else a="IDENTIFIER"===n.currentToken().type&&"its"===n.currentToken().value?{type:"pseudopossessiveIts",token:r=n.matchToken("its"),name:r.value,evaluate:function(e){return t.resolveSymbol("it",e)}}:(n.matchToken("my")||n.matchToken("me"),e.parseElement("implicitMeTarget",n));return a}}),!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(e.document)return t(e);throw new Error("jQuery requires a window with a document")}:t(e)}("undefined"!=typeof window?window:this,function(_,N){"use strict";function v(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item}function m(e){return null!=e&&e===e.window}var t=[],F=Object.getPrototypeOf,s=t.slice,z=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},j=t.push,q=t.indexOf,H={},B=H.toString,U=H.hasOwnProperty,V=U.toString,Y=V.call(Object),g={},w=_.document,$={type:!0,src:!0,nonce:!0,noModule:!0};function G(e,t,n){var r,a,i=(n=n||w).createElement("script");if(i.text=e,t)for(r in $)(a=t[r]||t.getAttribute&&t.getAttribute(r))&&i.setAttribute(r,a);n.head.appendChild(i).parentNode.removeChild(i)}function h(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?H[B.call(e)]||"object":typeof e}var T=function(e,t){return new T.fn.init(e,t)};function W(e){var t=!!e&&"length"in e&&e.length,n=h(e);return!v(e)&&!m(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}T.fn=T.prototype={jquery:"3.6.0",constructor:T,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){e=T.merge(this.constructor(),e);return e.prevObject=this,e},each:function(e){return T.each(this,e)},map:function(n){return this.pushStack(T.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(T.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(T.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:j,sort:t.sort,splice:t.splice},T.extend=T.fn.extend=function(){var e,t,n,r,a,i=arguments[0]||{},o=1,s=arguments.length,l=!1;for("boolean"==typeof i&&(l=i,i=arguments[o]||{},o++),"object"==typeof i||v(i)||(i={}),o===s&&(i=this,o--);o<s;o++)if(null!=(e=arguments[o]))for(t in e)n=e[t],"__proto__"!==t&&i!==n&&(l&&n&&(T.isPlainObject(n)||(r=Array.isArray(n)))?(a=i[t],a=r&&!Array.isArray(a)?[]:r||T.isPlainObject(a)?a:{},r=!1,i[t]=T.extend(l,a,n)):void 0!==n&&(i[t]=n));return i},T.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){return!(!e||"[object Object]"!==B.call(e))&&(!(e=F(e))||"function"==typeof(e=U.call(e,"constructor")&&e.constructor)&&V.call(e)===Y)},isEmptyObject:function(e){for(var t in e)return!1;return!0},globalEval:function(e,t,n){G(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(W(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){t=t||[];return null!=e&&(W(Object(e))?T.merge(t,"string"==typeof e?[e]:e):j.call(t,e)),t},inArray:function(e,t,n){return null==t?-1:q.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,a=e.length;r<n;r++)e[a++]=t[r];return e.length=a,e},grep:function(e,t,n){for(var r=[],a=0,i=e.length,o=!n;a<i;a++)!t(e[a],a)!=o&&r.push(e[a]);return r},map:function(e,t,n){var r,a,i=0,o=[];if(W(e))for(r=e.length;i<r;i++)null!=(a=t(e[i],i,n))&&o.push(a);else for(i in e)null!=(a=t(e[i],i,n))&&o.push(a);return z(o)},guid:1,support:g}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=t[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){H["[object "+t+"]"]=t.toLowerCase()});function r(e,t,n){for(var r=[],a=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&T(e).is(n))break;r.push(e)}return r}function Z(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}var e=function(N){function d(e,t){return e="0x"+e.slice(1)-65536,t||(e<0?String.fromCharCode(65536+e):String.fromCharCode(e>>10|55296,1023&e|56320))}function F(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}function z(){w()}var e,f,x,i,j,p,q,H,_,l,c,w,T,n,k,h,r,a,m,A="sizzle"+ +new Date,u=N.document,M=0,B=0,U=O(),V=O(),Y=O(),g=O(),$=function(e,t){return e===t&&(c=!0),0},G={}.hasOwnProperty,t=[],W=t.pop,Z=t.push,E=t.push,X=t.slice,v=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",o="[\\x20\\t\\r\\n\\f]",s="(?:\\\\[\\da-fA-F]{1,6}"+o+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",K="\\["+o+"*("+s+")(?:"+o+"*([*^$|!~]?=)"+o+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+s+"))|)"+o+"*\\]",Q=":("+s+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+K+")*)|.*)\\)|)",ee=new RegExp(o+"+","g"),y=new RegExp("^"+o+"+|((?:^|[^\\\\])(?:\\\\.)*)"+o+"+$","g"),te=new RegExp("^"+o+"*,"+o+"*"),ne=new RegExp("^"+o+"*([>+~]|"+o+")"+o+"*"),re=new RegExp(o+"|>"),ae=new RegExp(Q),ie=new RegExp("^"+s+"$"),b={ID:new RegExp("^#("+s+")"),CLASS:new RegExp("^\\.("+s+")"),TAG:new RegExp("^("+s+"|[*])"),ATTR:new RegExp("^"+K),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+o+"*(even|odd|(([+-]|)(\\d*)n|)"+o+"*(?:([+-]|)"+o+"*(\\d+)|))"+o+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+o+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+o+"*((?:-\\d)?\\d*)"+o+"*\\)|)(?=[^-]|$)","i")},oe=/HTML$/i,se=/^(?:input|select|textarea|button)$/i,le=/^h\d$/i,S=/^[^{]+\{\s*\[native \w/,ce=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ue=/[+~]/,L=new RegExp("\\\\[\\da-fA-F]{1,6}"+o+"?|\\\\([^\\r\\n\\f])","g"),de=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,fe=ve(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{E.apply(t=X.call(u.childNodes),u.childNodes),t[u.childNodes.length].nodeType}catch(e){E={apply:t.length?function(e,t){Z.apply(e,X.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function C(t,e,n,r){var a,i,o,s,l,c,u=e&&e.ownerDocument,d=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==d&&9!==d&&11!==d)return n;if(!r&&(w(e),e=e||T,k)){if(11!==d&&(s=ce.exec(t)))if(a=s[1]){if(9===d){if(!(c=e.getElementById(a)))return n;if(c.id===a)return n.push(c),n}else if(u&&(c=u.getElementById(a))&&m(e,c)&&c.id===a)return n.push(c),n}else{if(s[2])return E.apply(n,e.getElementsByTagName(t)),n;if((a=s[3])&&f.getElementsByClassName&&e.getElementsByClassName)return E.apply(n,e.getElementsByClassName(a)),n}if(f.qsa&&!g[t+" "]&&(!h||!h.test(t))&&(1!==d||"object"!==e.nodeName.toLowerCase())){if(c=t,u=e,1===d&&(re.test(t)||ne.test(t))){for((u=ue.test(t)&&ge(e.parentNode)||e)===e&&f.scope||((o=e.getAttribute("id"))?o=o.replace(de,F):e.setAttribute("id",o=A)),i=(l=p(t)).length;i--;)l[i]=(o?"#"+o:":scope")+" "+P(l[i]);c=l.join(",")}try{return E.apply(n,u.querySelectorAll(c)),n}catch(e){g(t,!0)}finally{o===A&&e.removeAttribute("id")}}}return H(t.replace(y,"$1"),e,n,r)}function O(){var n=[];function r(e,t){return n.push(e+" ")>x.cacheLength&&delete r[n.shift()],r[e+" "]=t}return r}function D(e){return e[A]=!0,e}function I(e){var t=T.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function pe(e,t){for(var n=e.split("|"),r=n.length;r--;)x.attrHandle[n[r]]=t}function he(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function me(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&fe(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function R(o){return D(function(i){return i=+i,D(function(e,t){for(var n,r=o([],e.length,i),a=r.length;a--;)e[n=r[a]]&&(e[n]=!(t[n]=e[n]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in f=C.support={},j=C.isXML=function(e){var t=e&&e.namespaceURI,e=e&&(e.ownerDocument||e).documentElement;return!oe.test(t||e&&e.nodeName||"HTML")},w=C.setDocument=function(e){var e=e?e.ownerDocument||e:u;return e!=T&&9===e.nodeType&&e.documentElement&&(n=(T=e).documentElement,k=!j(T),u!=T&&(e=T.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",z,!1):e.attachEvent&&e.attachEvent("onunload",z)),f.scope=I(function(e){return n.appendChild(e).appendChild(T.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),f.attributes=I(function(e){return e.className="i",!e.getAttribute("className")}),f.getElementsByTagName=I(function(e){return e.appendChild(T.createComment("")),!e.getElementsByTagName("*").length}),f.getElementsByClassName=S.test(T.getElementsByClassName),f.getById=I(function(e){return n.appendChild(e).id=A,!T.getElementsByName||!T.getElementsByName(A).length}),f.getById?(x.filter.ID=function(e){var t=e.replace(L,d);return function(e){return e.getAttribute("id")===t}},x.find.ID=function(e,t){if(void 0!==t.getElementById&&k)return(t=t.getElementById(e))?[t]:[]}):(x.filter.ID=function(e){var t=e.replace(L,d);return function(e){e=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return e&&e.value===t}},x.find.ID=function(e,t){if(void 0!==t.getElementById&&k){var n,r,a,i=t.getElementById(e);if(i){if((n=i.getAttributeNode("id"))&&n.value===e)return[i];for(a=t.getElementsByName(e),r=0;i=a[r++];)if((n=i.getAttributeNode("id"))&&n.value===e)return[i]}return[]}}),x.find.TAG=f.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):f.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],a=0,i=t.getElementsByTagName(e);if("*"!==e)return i;for(;n=i[a++];)1===n.nodeType&&r.push(n);return r},x.find.CLASS=f.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&k)return t.getElementsByClassName(e)},r=[],h=[],(f.qsa=S.test(T.querySelectorAll))&&(I(function(e){var t;n.appendChild(e).innerHTML="<a id='"+A+"'></a><select id='"+A+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&h.push("[*^$]="+o+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||h.push("\\["+o+"*(?:value|"+J+")"),e.querySelectorAll("[id~="+A+"-]").length||h.push("~="),(t=T.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||h.push("\\["+o+"*name"+o+"*="+o+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||h.push(":checked"),e.querySelectorAll("a#"+A+"+*").length||h.push(".#.+[+~]"),e.querySelectorAll("\\\f"),h.push("[\\r\\n\\f]")}),I(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=T.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&h.push("name"+o+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&h.push(":enabled",":disabled"),n.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&h.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),h.push(",.*:")})),(f.matchesSelector=S.test(a=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.oMatchesSelector||n.msMatchesSelector))&&I(function(e){f.disconnectedMatch=a.call(e,"*"),a.call(e,"[s!='']:x"),r.push("!=",Q)}),h=h.length&&new RegExp(h.join("|")),r=r.length&&new RegExp(r.join("|")),e=S.test(n.compareDocumentPosition),m=e||S.test(n.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(n.contains?n.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},$=e?function(e,t){if(e===t)return c=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!f.sortDetached&&t.compareDocumentPosition(e)===n?e==T||e.ownerDocument==u&&m(u,e)?-1:t==T||t.ownerDocument==u&&m(u,t)?1:l?v(l,e)-v(l,t):0:4&n?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,a=e.parentNode,i=t.parentNode,o=[e],s=[t];if(!a||!i)return e==T?-1:t==T?1:a?-1:i?1:l?v(l,e)-v(l,t):0;if(a===i)return he(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;o[r]===s[r];)r++;return r?he(o[r],s[r]):o[r]==u?-1:s[r]==u?1:0}),T},C.matches=function(e,t){return C(e,null,null,t)},C.matchesSelector=function(e,t){if(w(e),f.matchesSelector&&k&&!g[t+" "]&&(!r||!r.test(t))&&(!h||!h.test(t)))try{var n=a.call(e,t);if(n||f.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){g(t,!0)}return 0<C(t,T,null,[e]).length},C.contains=function(e,t){return(e.ownerDocument||e)!=T&&w(e),m(e,t)},C.attr=function(e,t){(e.ownerDocument||e)!=T&&w(e);var n=x.attrHandle[t.toLowerCase()],n=n&&G.call(x.attrHandle,t.toLowerCase())?n(e,t,!k):void 0;return void 0!==n?n:f.attributes||!k?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},C.escape=function(e){return(e+"").replace(de,F)},C.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},C.uniqueSort=function(e){var t,n=[],r=0,a=0;if(c=!f.detectDuplicates,l=!f.sortStable&&e.slice(0),e.sort($),c){for(;t=e[a++];)t===e[a]&&(r=n.push(a));for(;r--;)e.splice(n[r],1)}return l=null,e},i=C.getText=function(e){var t,n="",r=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(x=C.selectors={cacheLength:50,createPseudo:D,match:b,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(L,d),e[3]=(e[3]||e[4]||e[5]||"").replace(L,d),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||C.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&C.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return b.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ae.test(n)&&(t=p(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(L,d).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=U[e+" "];return t||(t=new RegExp("(^|"+o+")"+e+"("+o+"|$)"))&&U(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(e){e=C.attr(e,t);return null==e?"!="===n:!n||(e+="","="===n?e===r:"!="===n?e!==r:"^="===n?r&&0===e.indexOf(r):"*="===n?r&&-1<e.indexOf(r):"$="===n?r&&e.slice(-r.length)===r:"~="===n?-1<(" "+e.replace(ee," ")+" ").indexOf(r):"|="===n&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(h,e,t,m,g){var y="nth"!==h.slice(0,3),v="last"!==h.slice(-4),b="of-type"===e;return 1===m&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var r,a,i,o,s,l,c=y!=v?"nextSibling":"previousSibling",u=e.parentNode,d=b&&e.nodeName.toLowerCase(),f=!n&&!b,p=!1;if(u){if(y){for(;c;){for(o=e;o=o[c];)if(b?o.nodeName.toLowerCase()===d:1===o.nodeType)return!1;l=c="only"===h&&!l&&"nextSibling"}return!0}if(l=[v?u.firstChild:u.lastChild],v&&f){for(p=(s=(r=(a=(i=(o=u)[A]||(o[A]={}))[o.uniqueID]||(i[o.uniqueID]={}))[h]||[])[0]===M&&r[1])&&r[2],o=s&&u.childNodes[s];o=++s&&o&&o[c]||(p=s=0)||l.pop();)if(1===o.nodeType&&++p&&o===e){a[h]=[M,s,p];break}}else if(!1===(p=f?s=(r=(a=(i=(o=e)[A]||(o[A]={}))[o.uniqueID]||(i[o.uniqueID]={}))[h]||[])[0]===M&&r[1]:p))for(;(o=++s&&o&&o[c]||(p=s=0)||l.pop())&&((b?o.nodeName.toLowerCase()!==d:1!==o.nodeType)||!++p||(f&&((a=(i=o[A]||(o[A]={}))[o.uniqueID]||(i[o.uniqueID]={}))[h]=[M,p]),o!==e)););return(p-=g)===m||p%m==0&&0<=p/m}}},PSEUDO:function(e,i){var t,o=x.pseudos[e]||x.setFilters[e.toLowerCase()]||C.error("unsupported pseudo: "+e);return o[A]?o(i):1<o.length?(t=[e,e,"",i],x.setFilters.hasOwnProperty(e.toLowerCase())?D(function(e,t){for(var n,r=o(e,i),a=r.length;a--;)e[n=v(e,r[a])]=!(t[n]=r[a])}):function(e){return o(e,0,t)}):o}},pseudos:{not:D(function(e){var r=[],a=[],s=q(e.replace(y,"$1"));return s[A]?D(function(e,t,n,r){for(var a,i=s(e,null,r,[]),o=e.length;o--;)(a=i[o])&&(e[o]=!(t[o]=a))}):function(e,t,n){return r[0]=e,s(r,null,n,a),r[0]=null,!a.pop()}}),has:D(function(t){return function(e){return 0<C(t,e).length}}),contains:D(function(t){return t=t.replace(L,d),function(e){return-1<(e.textContent||i(e)).indexOf(t)}}),lang:D(function(n){return ie.test(n||"")||C.error("unsupported lang: "+n),n=n.replace(L,d).toLowerCase(),function(e){var t;do{if(t=k?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=N.location&&N.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===n},focus:function(e){return e===T.activeElement&&(!T.hasFocus||T.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return le.test(e.nodeName)},input:function(e){return se.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:R(function(){return[0]}),last:R(function(e,t){return[t-1]}),eq:R(function(e,t,n){return[n<0?n+t:n]}),even:R(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:R(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:R(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:R(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=x.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[e]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(e);for(e in{submit:!0,reset:!0})x.pseudos[e]=function(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}(e);function ye(){}function P(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ve(o,e,t){var s=e.dir,l=e.next,c=l||s,u=t&&"parentNode"===c,d=B++;return e.first?function(e,t,n){for(;e=e[s];)if(1===e.nodeType||u)return o(e,t,n);return!1}:function(e,t,n){var r,a,i=[M,d];if(n){for(;e=e[s];)if((1===e.nodeType||u)&&o(e,t,n))return!0}else for(;e=e[s];)if(1===e.nodeType||u)if(a=(a=e[A]||(e[A]={}))[e.uniqueID]||(a[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[s]||e;else{if((r=a[c])&&r[0]===M&&r[1]===d)return i[2]=r[2];if((a[c]=i)[2]=o(e,t,n))return!0}return!1}}function be(a){return 1<a.length?function(e,t,n){for(var r=a.length;r--;)if(!a[r](e,t,n))return!1;return!0}:a[0]}function xe(e,t,n,r,a){for(var i,o=[],s=0,l=e.length,c=null!=t;s<l;s++)!(i=e[s])||n&&!n(i,r,a)||(o.push(i),c&&t.push(s));return o}function _e(p,h,m,g,y,e){return g&&!g[A]&&(g=_e(g)),y&&!y[A]&&(y=_e(y,e)),D(function(e,t,n,r){var a,i,o,s=[],l=[],c=t.length,u=e||function(e,t,n){for(var r=0,a=t.length;r<a;r++)C(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),d=!p||!e&&h?u:xe(u,s,p,n,r),f=m?y||(e?p:c||g)?[]:t:d;if(m&&m(d,f,n,r),g)for(a=xe(f,l),g(a,[],n,r),i=a.length;i--;)(o=a[i])&&(f[l[i]]=!(d[l[i]]=o));if(e){if(y||p){if(y){for(a=[],i=f.length;i--;)(o=f[i])&&a.push(d[i]=o);y(null,f=[],a,r)}for(i=f.length;i--;)(o=f[i])&&-1<(a=y?v(e,o):s[i])&&(e[a]=!(t[a]=o))}}else f=xe(f===t?f.splice(c,f.length):f),y?y(null,t,f,r):E.apply(t,f)})}function we(g,y){function e(e,t,n,r,a){var i,o,s,l=0,c="0",u=e&&[],d=[],f=_,p=e||b&&x.find.TAG("*",a),h=M+=null==f?1:Math.random()||.1,m=p.length;for(a&&(_=t==T||t||a);c!==m&&null!=(i=p[c]);c++){if(b&&i){for(o=0,t||i.ownerDocument==T||(w(i),n=!k);s=g[o++];)if(s(i,t||T,n)){r.push(i);break}a&&(M=h)}v&&((i=!s&&i)&&l--,e&&u.push(i))}if(l+=c,v&&c!==l){for(o=0;s=y[o++];)s(u,d,t,n);if(e){if(0<l)for(;c--;)u[c]||d[c]||(d[c]=W.call(r));d=xe(d)}E.apply(r,d),a&&!e&&0<d.length&&1<l+y.length&&C.uniqueSort(r)}return a&&(M=h,_=f),u}var v=0<y.length,b=0<g.length;return v?D(e):e}return ye.prototype=x.filters=x.pseudos,x.setFilters=new ye,p=C.tokenize=function(e,t){var n,r,a,i,o,s,l,c=V[e+" "];if(c)return t?0:c.slice(0);for(o=e,s=[],l=x.preFilter;o;){for(i in n&&!(r=te.exec(o))||(r&&(o=o.slice(r[0].length)||o),s.push(a=[])),n=!1,(r=ne.exec(o))&&(n=r.shift(),a.push({value:n,type:r[0].replace(y," ")}),o=o.slice(n.length)),x.filter)!(r=b[i].exec(o))||l[i]&&!(r=l[i](r))||(n=r.shift(),a.push({value:n,type:i,matches:r}),o=o.slice(n.length));if(!n)break}return t?o.length:o?C.error(e):V(e,s).slice(0)},q=C.compile=function(e,t){var n,r=[],a=[],i=Y[e+" "];if(!i){for(n=(t=t||p(e)).length;n--;)((i=function e(t){for(var r,n,a,i=t.length,o=x.relative[t[0].type],s=o||x.relative[" "],l=o?1:0,c=ve(function(e){return e===r},s,!0),u=ve(function(e){return-1<v(r,e)},s,!0),d=[function(e,t,n){return e=!o&&(n||t!==_)||((r=t).nodeType?c:u)(e,t,n),r=null,e}];l<i;l++)if(n=x.relative[t[l].type])d=[ve(be(d),n)];else{if((n=x.filter[t[l].type].apply(null,t[l].matches))[A]){for(a=++l;a<i&&!x.relative[t[a].type];a++);return _e(1<l&&be(d),1<l&&P(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(y,"$1"),n,l<a&&e(t.slice(l,a)),a<i&&e(t=t.slice(a)),a<i&&P(t))}d.push(n)}return be(d)}(t[n]))[A]?r:a).push(i);(i=Y(e,we(a,r))).selector=e}return i},H=C.select=function(e,t,n,r){var a,i,o,s,l,c="function"==typeof e&&e,u=!r&&p(e=c.selector||e);if(n=n||[],1===u.length){if(2<(i=u[0]=u[0].slice(0)).length&&"ID"===(o=i[0]).type&&9===t.nodeType&&k&&x.relative[i[1].type]){if(!(t=(x.find.ID(o.matches[0].replace(L,d),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(a=b.needsContext.test(e)?0:i.length;a--&&(o=i[a],!x.relative[s=o.type]);)if((l=x.find[s])&&(r=l(o.matches[0].replace(L,d),ue.test(i[0].type)&&ge(t.parentNode)||t))){if(i.splice(a,1),e=r.length&&P(i))break;return E.apply(n,r),n}}return(c||q(e,u))(r,t,!k,n,!t||ue.test(e)&&ge(t.parentNode)||t),n},f.sortStable=A.split("").sort($).join("")===A,f.detectDuplicates=!!c,w(),f.sortDetached=I(function(e){return 1&e.compareDocumentPosition(T.createElement("fieldset"))}),I(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||pe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),f.attributes&&I(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||pe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),I(function(e){return null==e.getAttribute("disabled")})||pe(J,function(e,t,n){if(!n)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),C}(_),X=(T.find=e,T.expr=e.selectors,T.expr[":"]=T.expr.pseudos,T.uniqueSort=T.unique=e.uniqueSort,T.text=e.getText,T.isXMLDoc=e.isXML,T.contains=e.contains,T.escapeSelector=e.escape,T.expr.match.needsContext);function l(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var J=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function K(e,n,r){return v(n)?T.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?T.grep(e,function(e){return e===n!==r}):"string"!=typeof n?T.grep(e,function(e){return-1<q.call(n,e)!==r}):T.filter(n,e,r)}T.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?T.find.matchesSelector(r,e)?[r]:[]:T.find.matches(e,T.grep(t,function(e){return 1===e.nodeType}))},T.fn.extend({find:function(e){var t,n,r=this.length,a=this;if("string"!=typeof e)return this.pushStack(T(e).filter(function(){for(t=0;t<r;t++)if(T.contains(a[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)T.find(e,a[t],n);return 1<r?T.uniqueSort(n):n},filter:function(e){return this.pushStack(K(this,e||[],!1))},not:function(e){return this.pushStack(K(this,e||[],!0))},is:function(e){return!!K(this,"string"==typeof e&&X.test(e)?T(e):e||[],!1).length}});var Q,ee=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,te=((T.fn.init=function(e,t,n){if(!e)return this;if(n=n||Q,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(T):T.makeArray(e,this);if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:ee.exec(e))||!r[1]&&t)return(!t||t.jquery?t||n:this.constructor(t)).find(e);if(r[1]){if(t=t instanceof T?t[0]:t,T.merge(this,T.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:w,!0)),J.test(r[1])&&T.isPlainObject(t))for(var r in t)v(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(n=w.getElementById(r[2]))&&(this[0]=n,this.length=1),this}).prototype=T.fn,Q=T(w),/^(?:parents|prev(?:Until|All))/),ne={children:!0,contents:!0,next:!0,prev:!0};function re(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}T.fn.extend({has:function(e){var t=T(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(T.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,a=this.length,i=[],o="string"!=typeof e&&T(e);if(!X.test(e))for(;r<a;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?-1<o.index(n):1===n.nodeType&&T.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(1<i.length?T.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?q.call(T(e),this[0]):q.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),T.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return r(e,"parentNode")},parentsUntil:function(e,t,n){return r(e,"parentNode",n)},next:function(e){return re(e,"nextSibling")},prev:function(e){return re(e,"previousSibling")},nextAll:function(e){return r(e,"nextSibling")},prevAll:function(e){return r(e,"previousSibling")},nextUntil:function(e,t,n){return r(e,"nextSibling",n)},prevUntil:function(e,t,n){return r(e,"previousSibling",n)},siblings:function(e){return Z((e.parentNode||{}).firstChild,e)},children:function(e){return Z(e.firstChild)},contents:function(e){return null!=e.contentDocument&&F(e.contentDocument)?e.contentDocument:(l(e,"template")&&(e=e.content||e),T.merge([],e.childNodes))}},function(r,a){T.fn[r]=function(e,t){var n=T.map(this,a,e);return(t="Until"!==r.slice(-5)?e:t)&&"string"==typeof t&&(n=T.filter(t,n)),1<this.length&&(ne[r]||T.uniqueSort(n),te.test(r)&&n.reverse()),this.pushStack(n)}});var k=/[^\x20\t\r\n\f]+/g;function u(e){return e}function ae(e){throw e}function ie(e,t,n,r){var a;try{e&&v(a=e.promise)?a.call(e).done(t).fail(n):e&&v(a=e.then)?a.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}T.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},T.each(e.match(k)||[],function(e,t){n[t]=!0}),n):T.extend({},r);function a(){for(s=s||r.once,o=i=!0;c.length;u=-1)for(t=c.shift();++u<l.length;)!1===l[u].apply(t[0],t[1])&&r.stopOnFalse&&(u=l.length,t=!1);r.memory||(t=!1),i=!1,s&&(l=t?[]:"")}var i,t,o,s,l=[],c=[],u=-1,d={add:function(){return l&&(t&&!i&&(u=l.length-1,c.push(t)),function n(e){T.each(e,function(e,t){v(t)?r.unique&&d.has(t)||l.push(t):t&&t.length&&"string"!==h(t)&&n(t)})}(arguments),t&&!i&&a()),this},remove:function(){return T.each(arguments,function(e,t){for(var n;-1<(n=T.inArray(t,l,n));)l.splice(n,1),n<=u&&u--}),this},has:function(e){return e?-1<T.inArray(e,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return s=c=[],l=t="",this},disabled:function(){return!l},lock:function(){return s=c=[],t||i||(l=t=""),this},locked:function(){return!!s},fireWith:function(e,t){return s||(t=[e,(t=t||[]).slice?t.slice():t],c.push(t),i||a()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!o}};return d},T.extend({Deferred:function(e){var i=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],a="pending",o={state:function(){return a},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var a=arguments;return T.Deferred(function(r){T.each(i,function(e,t){var n=v(a[t[4]])&&a[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&v(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),a=null}).promise()},then:function(t,n,r){var l=0;function c(a,i,o,s){return function(){function e(){var e,t;if(!(a<l)){if((e=o.apply(n,r))===i.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,v(t)?s?t.call(e,c(l,i,u,s),c(l,i,ae,s)):(l++,t.call(e,c(l,i,u,s),c(l,i,ae,s),c(l,i,u,i.notifyWith))):(o!==u&&(n=void 0,r=[e]),(s||i.resolveWith)(n,r))}}var n=this,r=arguments,t=s?e:function(){try{e()}catch(e){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(e,t.stackTrace),l<=a+1&&(o!==ae&&(n=void 0,r=[e]),i.rejectWith(n,r))}};a?t():(T.Deferred.getStackHook&&(t.stackTrace=T.Deferred.getStackHook()),_.setTimeout(t))}}return T.Deferred(function(e){i[0][3].add(c(0,e,v(r)?r:u,e.notifyWith)),i[1][3].add(c(0,e,v(t)?t:u)),i[2][3].add(c(0,e,v(n)?n:ae))}).promise()},promise:function(e){return null!=e?T.extend(e,o):o}},s={};return T.each(i,function(e,t){var n=t[2],r=t[5];o[t[1]]=n.add,r&&n.add(function(){a=r},i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),o.promise(s),e&&e.call(s,s),s},when:function(e){function t(t){return function(e){a[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(a,i)}}var n=arguments.length,r=n,a=Array(r),i=s.call(arguments),o=T.Deferred();if(n<=1&&(ie(e,o.done(t(r)).resolve,o.reject,!n),"pending"===o.state()||v(i[r]&&i[r].then)))return o.then();for(;r--;)ie(i[r],t(r),o.reject);return o.promise()}});var oe=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/,se=(T.Deferred.exceptionHook=function(e,t){_.console&&_.console.warn&&e&&oe.test(e.name)&&_.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},T.readyException=function(e){_.setTimeout(function(){throw e})},T.Deferred());function le(){w.removeEventListener("DOMContentLoaded",le),_.removeEventListener("load",le),T.ready()}T.fn.ready=function(e){return se.then(e).catch(function(e){T.readyException(e)}),this},T.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--T.readyWait:T.isReady)||(T.isReady=!0)!==e&&0<--T.readyWait||se.resolveWith(w,[T])}}),T.ready.then=se.then,"complete"===w.readyState||"loading"!==w.readyState&&!w.documentElement.doScroll?_.setTimeout(T.ready):(w.addEventListener("DOMContentLoaded",le),_.addEventListener("load",le));function d(e,t,n,r,a,i,o){var s=0,l=e.length,c=null==n;if("object"===h(n))for(s in a=!0,n)d(e,t,s,n[s],!0,i,o);else if(void 0!==r&&(a=!0,v(r)||(o=!0),t=c?o?(t.call(e,r),null):(c=t,function(e,t,n){return c.call(T(e),n)}):t))for(;s<l;s++)t(e[s],n,o?r:r.call(e[s],s,t(e[s],n)));return a?e:c?t.call(e):l?t(e[0],n):i}var ce=/^-ms-/,ue=/-([a-z])/g;function de(e,t){return t.toUpperCase()}function b(e){return e.replace(ce,"ms-").replace(ue,de)}function y(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function fe(){this.expando=T.expando+fe.uid++}fe.uid=1,fe.prototype={cache:function(e){var t=e[this.expando];return t||(t={},y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,a=this.cache(e);if("string"==typeof t)a[b(t)]=n;else for(r in t)a[b(r)]=t[r];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][b(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(b):(t=b(t))in r?[t]:t.match(k)||[]).length;for(;n--;)delete r[t[n]]}void 0!==t&&!T.isEmptyObject(r)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){e=e[this.expando];return void 0!==e&&!T.isEmptyObject(e)}};var x=new fe,c=new fe,pe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,he=/[A-Z]/g;function me(e,t,n){var r,a;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(he,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(a=n)||"false"!==a&&("null"===a?null:a===+a+""?+a:pe.test(a)?JSON.parse(a):a)}catch(e){}c.set(e,t,n)}else n=void 0;return n}T.extend({hasData:function(e){return c.hasData(e)||x.hasData(e)},data:function(e,t,n){return c.access(e,t,n)},removeData:function(e,t){c.remove(e,t)},_data:function(e,t,n){return x.access(e,t,n)},_removeData:function(e,t){x.remove(e,t)}}),T.fn.extend({data:function(n,e){var t,r,a,i=this[0],o=i&&i.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){c.set(this,n)}):d(this,function(e){var t;if(i&&void 0===e)return void 0!==(t=c.get(i,n))||void 0!==(t=me(i,n))?t:void 0;this.each(function(){c.set(this,n,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(a=c.get(i),1===i.nodeType&&!x.get(i,"hasDataAttrs"))){for(t=o.length;t--;)o[t]&&0===(r=o[t].name).indexOf("data-")&&(r=b(r.slice(5)),me(i,r,a[r]));x.set(i,"hasDataAttrs",!0)}return a},removeData:function(e){return this.each(function(){c.remove(this,e)})}}),T.extend({queue:function(e,t,n){var r;if(e)return r=x.get(e,t=(t||"fx")+"queue"),n&&(!r||Array.isArray(n)?r=x.access(e,t,T.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=T.queue(e,t),r=n.length,a=n.shift(),i=T._queueHooks(e,t);"inprogress"===a&&(a=n.shift(),r--),a&&("fx"===t&&n.unshift("inprogress"),delete i.stop,a.call(e,function(){T.dequeue(e,t)},i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return x.get(e,n)||x.access(e,n,{empty:T.Callbacks("once memory").add(function(){x.remove(e,[t+"queue",n])})})}}),T.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?T.queue(this[0],t):void 0===n?this:this.each(function(){var e=T.queue(this,t,n);T._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&T.dequeue(this,t)})},dequeue:function(e){return this.each(function(){T.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function n(){--a||i.resolveWith(o,[o])}var r,a=1,i=T.Deferred(),o=this,s=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(r=x.get(o[s],e+"queueHooks"))&&r.empty&&(a++,r.empty.add(n));return n(),i.promise(t)}});function ge(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&M(e)&&"none"===T.css(e,"display")}var e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ye=new RegExp("^(?:([+-])=|)("+e+")([a-z%]*)$","i"),f=["Top","Right","Bottom","Left"],A=w.documentElement,M=function(e){return T.contains(e.ownerDocument,e)},ve={composed:!0};A.getRootNode&&(M=function(e){return T.contains(e.ownerDocument,e)||e.getRootNode(ve)===e.ownerDocument});function be(e,t,n,r){var a,i,o=20,s=r?function(){return r.cur()}:function(){return T.css(e,t,"")},l=s(),c=n&&n[3]||(T.cssNumber[t]?"":"px"),u=e.nodeType&&(T.cssNumber[t]||"px"!==c&&+l)&&ye.exec(T.css(e,t));if(u&&u[3]!==c){for(c=c||u[3],u=+(l/=2)||1;o--;)T.style(e,t,u+c),(1-i)*(1-(i=s()/l||.5))<=0&&(o=0),u/=i;T.style(e,t,(u*=2)+c),n=n||[]}return n&&(u=+u||+l||0,a=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=u,r.end=a)),a}var xe={};function E(e,t){for(var n,r,a,i,o,s=[],l=0,c=e.length;l<c;l++)(r=e[l]).style&&(n=r.style.display,t?("none"===n&&(s[l]=x.get(r,"display")||null,s[l]||(r.style.display="")),""===r.style.display&&ge(r)&&(s[l]=(o=i=void 0,i=(a=r).ownerDocument,a=a.nodeName,(o=xe[a])||(i=i.body.appendChild(i.createElement(a)),o=T.css(i,"display"),i.parentNode.removeChild(i),xe[a]=o="none"===o?"block":o),o))):"none"!==n&&(s[l]="none",x.set(r,"display",n)));for(l=0;l<c;l++)null!=s[l]&&(e[l].style.display=s[l]);return e}T.fn.extend({show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ge(this)?T(this).show():T(this).hide()})}});var _e=/^(?:checkbox|radio)$/i,we=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Te=/^$|^module$|\/(?:java|ecma)script/i,S=(D=w.createDocumentFragment().appendChild(w.createElement("div")),(o=w.createElement("input")).setAttribute("type","radio"),o.setAttribute("checked","checked"),o.setAttribute("name","t"),D.appendChild(o),g.checkClone=D.cloneNode(!0).cloneNode(!0).lastChild.checked,D.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!D.cloneNode(!0).lastChild.defaultValue,D.innerHTML="<option></option>",g.option=!!D.lastChild,{thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]});function L(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&l(e,t)?T.merge([e],n):n}function ke(e,t){for(var n=0,r=e.length;n<r;n++)x.set(e[n],"globalEval",!t||x.get(t[n],"globalEval"))}S.tbody=S.tfoot=S.colgroup=S.caption=S.thead,S.th=S.td,g.option||(S.optgroup=S.option=[1,"<select multiple='multiple'>","</select>"]);var Ae=/<|&#?\w+;/;function Me(e,t,n,r,a){for(var i,o,s,l,c,u=t.createDocumentFragment(),d=[],f=0,p=e.length;f<p;f++)if((i=e[f])||0===i)if("object"===h(i))T.merge(d,i.nodeType?[i]:i);else if(Ae.test(i)){for(o=o||u.appendChild(t.createElement("div")),s=(we.exec(i)||["",""])[1].toLowerCase(),s=S[s]||S._default,o.innerHTML=s[1]+T.htmlPrefilter(i)+s[2],c=s[0];c--;)o=o.lastChild;T.merge(d,o.childNodes),(o=u.firstChild).textContent=""}else d.push(t.createTextNode(i));for(u.textContent="",f=0;i=d[f++];)if(r&&-1<T.inArray(i,r))a&&a.push(i);else if(l=M(i),o=L(u.appendChild(i),"script"),l&&ke(o),n)for(c=0;i=o[c++];)Te.test(i.type||"")&&n.push(i);return u}var Ee=/^([^.]*)(?:\.(.+)|)/;function n(){return!0}function p(){return!1}function Se(e,t){return e===function(){try{return w.activeElement}catch(e){}}()==("focus"===t)}function Le(e,t,n,r,a,i){var o,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Le(e,s,n,r,t[s],i);return e}if(null==r&&null==a?(a=n,r=n=void 0):null==a&&("string"==typeof n?(a=r,r=void 0):(a=r,r=n,n=void 0)),!1===a)a=p;else if(!a)return e;return 1===i&&(o=a,(a=function(e){return T().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=T.guid++)),e.each(function(){T.event.add(this,t,a,r,n)})}function Ce(e,a,i){i?(x.set(e,a,!1),T.event.add(e,a,{namespace:!1,handler:function(e){var t,n,r=x.get(this,a);if(1&e.isTrigger&&this[a]){if(r.length)(T.event.special[a]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),x.set(this,a,r),t=i(this,a),this[a](),r!==(n=x.get(this,a))||t?x.set(this,a,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(x.set(this,a,{value:T.event.trigger(T.extend(r[0],T.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===x.get(e,a)&&T.event.add(e,a,n)}T.event={global:{},add:function(t,e,n,r,a){var i,o,s,l,c,u,d,f,p,h=x.get(t);if(y(t))for(n.handler&&(n=(i=n).handler,a=i.selector),a&&T.find.matchesSelector(A,a),n.guid||(n.guid=T.guid++),(s=h.events)||(s=h.events=Object.create(null)),(o=h.handle)||(o=h.handle=function(e){return void 0!==T&&T.event.triggered!==e.type?T.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(k)||[""]).length;l--;)d=p=(f=Ee.exec(e[l])||[])[1],f=(f[2]||"").split(".").sort(),d&&(c=T.event.special[d]||{},d=(a?c.delegateType:c.bindType)||d,c=T.event.special[d]||{},p=T.extend({type:d,origType:p,data:r,handler:n,guid:n.guid,selector:a,needsContext:a&&T.expr.match.needsContext.test(a),namespace:f.join(".")},i),(u=s[d])||((u=s[d]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,r,f,o)||t.addEventListener&&t.addEventListener(d,o)),c.add&&(c.add.call(t,p),p.handler.guid||(p.handler.guid=n.guid)),a?u.splice(u.delegateCount++,0,p):u.push(p),T.event.global[d]=!0)},remove:function(e,t,n,r,a){var i,o,s,l,c,u,d,f,p,h,m,g=x.hasData(e)&&x.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(k)||[""]).length;c--;)if(p=m=(s=Ee.exec(t[c])||[])[1],h=(s[2]||"").split(".").sort(),p){for(d=T.event.special[p]||{},f=l[p=(r?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=i=f.length;i--;)u=f[i],!a&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(f.splice(i,1),u.selector&&f.delegateCount--,d.remove&&d.remove.call(e,u));o&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,h,g.handle)||T.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)T.event.remove(e,p+t[c],n,r,!0);T.isEmptyObject(l)&&x.remove(e,"handle events")}},dispatch:function(e){var t,n,r,a,i,o=new Array(arguments.length),s=T.event.fix(e),e=(x.get(this,"events")||Object.create(null))[s.type]||[],l=T.event.special[s.type]||{};for(o[0]=s,t=1;t<arguments.length;t++)o[t]=arguments[t];if(s.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,s)){for(i=T.event.handlers.call(this,s,e),t=0;(r=i[t++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(a=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==a.namespace&&!s.rnamespace.test(a.namespace)||(s.handleObj=a,s.data=a.data,void 0!==(a=((T.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,o))&&!1===(s.result=a)&&(s.preventDefault(),s.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,a,i,o,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&1<=e.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(i=[],o={},n=0;n<l;n++)void 0===o[a=(r=t[n]).selector+" "]&&(o[a]=r.needsContext?-1<T(a,this).index(c):T.find(a,this,null,[c]).length),o[a]&&i.push(r);i.length&&s.push({elem:c,handlers:i})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(t,e){Object.defineProperty(T.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[T.expando]?e:new T.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){e=this||e;return _e.test(e.type)&&e.click&&l(e,"input")&&Ce(e,"click",n),!1},trigger:function(e){e=this||e;return _e.test(e.type)&&e.click&&l(e,"input")&&Ce(e,"click"),!0},_default:function(e){e=e.target;return _e.test(e.type)&&e.click&&l(e,"input")&&x.get(e,"click")||l(e,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},T.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},T.Event=function(e,t){if(!(this instanceof T.Event))return new T.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?n:p,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&T.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=n,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=n,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=n,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},T.event.addProp),T.each({focus:"focusin",blur:"focusout"},function(e,t){T.event.special[e]={setup:function(){return Ce(this,e,Se),!1},trigger:function(){return Ce(this,e),!0},_default:function(){return!0},delegateType:t}}),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,a){T.event.special[e]={delegateType:a,bindType:a,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||T.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=a),t}}}),T.fn.extend({on:function(e,t,n,r){return Le(this,e,t,n,r)},one:function(e,t,n,r){return Le(this,e,t,n,r,1)},off:function(e,t,n){var r,a;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,T(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=p),this.each(function(){T.event.remove(this,e,n,t)});for(a in e)this.off(a,t,e[a]);return this}});var Oe=/<script|<style|<link/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,Ie=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Re(e,t){return l(e,"table")&&l(11!==t.nodeType?t:t.firstChild,"tr")&&T(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ne(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Fe(e,t){var n,r,a,i;if(1===t.nodeType){if(x.hasData(e)&&(i=x.get(e).events))for(a in x.remove(t,"handle events"),i)for(n=0,r=i[a].length;n<r;n++)T.event.add(t,a,i[a][n]);c.hasData(e)&&(e=c.access(e),e=T.extend({},e),c.set(t,e))}}function C(n,r,a,i){r=z(r);var e,t,o,s,l,c,u=0,d=n.length,f=d-1,p=r[0],h=v(p);if(h||1<d&&"string"==typeof p&&!g.checkClone&&De.test(p))return n.each(function(e){var t=n.eq(e);h&&(r[0]=p.call(this,e,t.html())),C(t,r,a,i)});if(d&&(t=(e=Me(r,n[0].ownerDocument,!1,n,i)).firstChild,1===e.childNodes.length&&(e=t),t||i)){for(s=(o=T.map(L(e,"script"),Pe)).length;u<d;u++)l=e,u!==f&&(l=T.clone(l,!0,!0),s&&T.merge(o,L(l,"script"))),a.call(n[u],l,u);if(s)for(c=o[o.length-1].ownerDocument,T.map(o,Ne),u=0;u<s;u++)l=o[u],Te.test(l.type||"")&&!x.access(l,"globalEval")&&T.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?T._evalUrl&&!l.noModule&&T._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):G(l.textContent.replace(Ie,""),l,c))}return n}function ze(e,t,n){for(var r,a=t?T.filter(t,e):e,i=0;null!=(r=a[i]);i++)n||1!==r.nodeType||T.cleanData(L(r)),r.parentNode&&(n&&M(r)&&ke(L(r,"script")),r.parentNode.removeChild(r));return e}T.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,a,i,o,s,l,c,u=e.cloneNode(!0),d=M(e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||T.isXMLDoc(e)))for(o=L(u),r=0,a=(i=L(e)).length;r<a;r++)s=i[r],l=o[r],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&_e.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(t)if(n)for(i=i||L(e),o=o||L(u),r=0,a=i.length;r<a;r++)Fe(i[r],o[r]);else Fe(e,u);return 0<(o=L(u,"script")).length&&ke(o,!d&&L(e,"script")),u},cleanData:function(e){for(var t,n,r,a=T.event.special,i=0;void 0!==(n=e[i]);i++)if(y(n)){if(t=n[x.expando]){if(t.events)for(r in t.events)a[r]?T.event.remove(n,r):T.removeEvent(n,r,t.handle);n[x.expando]=void 0}n[c.expando]&&(n[c.expando]=void 0)}}}),T.fn.extend({detach:function(e){return ze(this,e,!0)},remove:function(e){return ze(this,e)},text:function(e){return d(this,function(e){return void 0===e?T.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return C(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Re(this,e).appendChild(e)})},prepend:function(){return C(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=Re(this,e)).insertBefore(e,t.firstChild)})},before:function(){return C(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return C(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(T.cleanData(L(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return T.clone(this,e,t)})},html:function(e){return d(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!S[(we.exec(e)||["",""])[1].toLowerCase()]){e=T.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(T.cleanData(L(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return C(this,arguments,function(e){var t=this.parentNode;T.inArray(this,n)<0&&(T.cleanData(L(this)),t&&t.replaceChild(e,this))},n)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,o){T.fn[e]=function(e){for(var t,n=[],r=T(e),a=r.length-1,i=0;i<=a;i++)t=i===a?this:this.clone(!0),T(r[i])[o](t),j.apply(n,t.get());return this.pushStack(n)}});function je(e){var t=e.ownerDocument.defaultView;return(t=t&&t.opener?t:_).getComputedStyle(e)}function qe(e,t,n){var r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];for(r in n=n.call(e),t)e.style[r]=a[r];return n}var He,Be,Ue,Ve,Ye,$e,Ge,a,We=new RegExp("^("+e+")(?!px)[a-z%]+$","i"),Ze=new RegExp(f.join("|"),"i");function Xe(){var e;a&&(Ge.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",a.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",A.appendChild(Ge).appendChild(a),e=_.getComputedStyle(a),He="1%"!==e.top,$e=12===Je(e.marginLeft),a.style.right="60%",Ve=36===Je(e.right),Be=36===Je(e.width),a.style.position="absolute",Ue=12===Je(a.offsetWidth/3),A.removeChild(Ge),a=null)}function Je(e){return Math.round(parseFloat(e))}function Ke(e,t,n){var r,a,i=e.style;return(n=n||je(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||M(e)||(a=T.style(e,t)),!g.pixelBoxStyles()&&We.test(a)&&Ze.test(t)&&(e=i.width,t=i.minWidth,r=i.maxWidth,i.minWidth=i.maxWidth=i.width=a,a=n.width,i.width=e,i.minWidth=t,i.maxWidth=r)),void 0!==a?a+"":a}function Qe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}Ge=w.createElement("div"),(a=w.createElement("div")).style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===a.style.backgroundClip,T.extend(g,{boxSizingReliable:function(){return Xe(),Be},pixelBoxStyles:function(){return Xe(),Ve},pixelPosition:function(){return Xe(),He},reliableMarginLeft:function(){return Xe(),$e},scrollboxSize:function(){return Xe(),Ue},reliableTrDimensions:function(){var e,t,n;return null==Ye&&(e=w.createElement("table"),t=w.createElement("tr"),n=w.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",A.appendChild(e).appendChild(t).appendChild(n),n=_.getComputedStyle(t),Ye=parseInt(n.height,10)+parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10)===t.offsetHeight,A.removeChild(e)),Ye}}));var et=["Webkit","Moz","ms"],tt=w.createElement("div").style,nt={};function rt(e){var t=T.cssProps[e]||nt[e];return t||(e in tt?e:nt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=et.length;n--;)if((e=et[n]+t)in tt)return e}(e)||e)}var at=/^(none|table(?!-c[ea]).+)/,it=/^--/,ot={position:"absolute",visibility:"hidden",display:"block"},st={letterSpacing:"0",fontWeight:"400"};function lt(e,t,n){var r=ye.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function ct(e,t,n,r,a,i){var o="width"===t?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=T.css(e,n+f[o],!0,a)),r?("content"===n&&(l-=T.css(e,"padding"+f[o],!0,a)),"margin"!==n&&(l-=T.css(e,"border"+f[o]+"Width",!0,a))):(l+=T.css(e,"padding"+f[o],!0,a),"padding"!==n?l+=T.css(e,"border"+f[o]+"Width",!0,a):s+=T.css(e,"border"+f[o]+"Width",!0,a));return!r&&0<=i&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-l-s-.5))||0),l}function ut(e,t,n){var r=je(e),a=(!g.boxSizingReliable()||n)&&"border-box"===T.css(e,"boxSizing",!1,r),i=a,o=Ke(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(We.test(o)){if(!n)return o;o="auto"}return(!g.boxSizingReliable()&&a||!g.reliableTrDimensions()&&l(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===T.css(e,"display",!1,r))&&e.getClientRects().length&&(a="border-box"===T.css(e,"boxSizing",!1,r),(i=s in e)&&(o=e[s])),(o=parseFloat(o)||0)+ct(e,t,n||(a?"border":"content"),i,r,o)+"px"}function i(e,t,n,r,a){return new i.prototype.init(e,t,n,r,a)}T.extend({cssHooks:{opacity:{get:function(e,t){if(t)return""===(t=Ke(e,"opacity"))?"1":t}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,i,o,s=b(t),l=it.test(t),c=e.style;if(l||(t=rt(s)),o=T.cssHooks[t]||T.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(a=o.get(e,!1,r))?a:c[t];"string"===(i=typeof n)&&(a=ye.exec(n))&&a[1]&&(n=be(e,t,a),i="number"),null!=n&&n==n&&("number"!==i||l||(n+=a&&a[3]||(T.cssNumber[s]?"":"px")),g.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var a,i=b(t);return it.test(t)||(t=rt(i)),"normal"===(a=void 0===(a=(i=T.cssHooks[t]||T.cssHooks[i])&&"get"in i?i.get(e,!0,n):a)?Ke(e,t,r):a)&&t in st&&(a=st[t]),""===n||n?(i=parseFloat(a),!0===n||isFinite(i)?i||0:a):a}}),T.each(["height","width"],function(e,o){T.cssHooks[o]={get:function(e,t,n){if(t)return!at.test(T.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ut(e,o,n):qe(e,ot,function(){return ut(e,o,n)})},set:function(e,t,n){var r=je(e),a=!g.scrollboxSize()&&"absolute"===r.position,i=(a||n)&&"border-box"===T.css(e,"boxSizing",!1,r),n=n?ct(e,o,n,i,r):0;return i&&a&&(n-=Math.ceil(e["offset"+o[0].toUpperCase()+o.slice(1)]-parseFloat(r[o])-ct(e,o,"border",!1,r)-.5)),n&&(i=ye.exec(t))&&"px"!==(i[3]||"px")&&(e.style[o]=t,t=T.css(e,o)),lt(0,t,n)}}}),T.cssHooks.marginLeft=Qe(g.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ke(e,"marginLeft"))||e.getBoundingClientRect().left-qe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),T.each({margin:"",padding:"",border:"Width"},function(a,i){T.cssHooks[a+i]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[a+f[t]+i]=r[t]||r[t-2]||r[0];return n}},"margin"!==a&&(T.cssHooks[a+i].set=lt)}),T.fn.extend({css:function(e,t){return d(this,function(e,t,n){var r,a,i={},o=0;if(Array.isArray(t)){for(r=je(e),a=t.length;o<a;o++)i[t[o]]=T.css(e,t[o],!1,r);return i}return void 0!==n?T.style(e,t,n):T.css(e,t)},e,t,1<arguments.length)}}),((T.Tween=i).prototype={constructor:i,init:function(e,t,n,r,a,i){this.elem=e,this.prop=n,this.easing=a||T.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(T.cssNumber[n]?"":"px")},cur:function(){var e=i.propHooks[this.prop];return(e&&e.get?e:i.propHooks._default).get(this)},run:function(e){var t,n=i.propHooks[this.prop];return this.options.duration?this.pos=t=T.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(n&&n.set?n:i.propHooks._default).set(this),this}}).init.prototype=i.prototype,(i.propHooks={_default:{get:function(e){return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(e=T.css(e.elem,e.prop,""))&&"auto"!==e?e:0},set:function(e){T.fx.step[e.prop]?T.fx.step[e.prop](e):1!==e.elem.nodeType||!T.cssHooks[e.prop]&&null==e.elem.style[rt(e.prop)]?e.elem[e.prop]=e.now:T.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=i.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},T.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},T.fx=i.prototype.init,T.fx.step={};var O,dt,o,D,ft=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;function ht(){dt&&(!1===w.hidden&&_.requestAnimationFrame?_.requestAnimationFrame(ht):_.setTimeout(ht,T.fx.interval),T.fx.tick())}function mt(){return _.setTimeout(function(){O=void 0}),O=Date.now()}function gt(e,t){var n,r=0,a={height:e};for(t=t?1:0;r<4;r+=2-t)a["margin"+(n=f[r])]=a["padding"+n]=e;return t&&(a.opacity=a.width=e),a}function yt(e,t,n){for(var r,a=(I.tweeners[t]||[]).concat(I.tweeners["*"]),i=0,o=a.length;i<o;i++)if(r=a[i].call(n,t,e))return r}function I(a,e,t){var n,i,r,o,s,l,c,u=0,d=I.prefilters.length,f=T.Deferred().always(function(){delete p.elem}),p=function(){if(!i){for(var e=O||mt(),e=Math.max(0,h.startTime+h.duration-e),t=1-(e/h.duration||0),n=0,r=h.tweens.length;n<r;n++)h.tweens[n].run(t);if(f.notifyWith(a,[h,t,e]),t<1&&r)return e;r||f.notifyWith(a,[h,1,0]),f.resolveWith(a,[h])}return!1},h=f.promise({elem:a,props:T.extend({},e),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},t),originalProperties:e,originalOptions:t,startTime:O||mt(),duration:t.duration,tweens:[],createTween:function(e,t){t=T.Tween(a,h.opts,e,t,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(t),t},stop:function(e){var t=0,n=e?h.tweens.length:0;if(!i){for(i=!0;t<n;t++)h.tweens[t].run(1);e?(f.notifyWith(a,[h,1,0]),f.resolveWith(a,[h,e])):f.rejectWith(a,[h,e])}return this}}),m=h.props,g=m,y=h.opts.specialEasing;for(r in g)if(s=y[o=b(r)],l=g[r],Array.isArray(l)&&(s=l[1],l=g[r]=l[0]),r!==o&&(g[o]=l,delete g[r]),(c=T.cssHooks[o])&&"expand"in c)for(r in l=c.expand(l),delete g[o],l)r in g||(g[r]=l[r],y[r]=s);else y[o]=s;for(;u<d;u++)if(n=I.prefilters[u].call(h,a,m,h.opts))return v(n.stop)&&(T._queueHooks(h.elem,h.opts.queue).stop=n.stop.bind(n)),n;return T.map(m,yt,h),v(h.opts.start)&&h.opts.start.call(a,h),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always),T.fx.timer(T.extend(p,{elem:a,anim:h,queue:h.opts.queue})),h}T.Animation=T.extend(I,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return be(n.elem,e,ye.exec(t),n),n}]},tweener:function(e,t){for(var n,r=0,a=(e=v(e)?(t=e,["*"]):e.match(k)).length;r<a;r++)n=e[r],I.tweeners[n]=I.tweeners[n]||[],I.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,a,i,o,s,l,c,u="width"in t||"height"in t,d=this,f={},p=e.style,h=e.nodeType&&ge(e),m=x.get(e,"fxshow");for(r in n.queue||(null==(o=T._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,d.always(function(){d.always(function(){o.unqueued--,T.queue(e,"fx").length||o.empty.fire()})})),t)if(a=t[r],ft.test(a)){if(delete t[r],i=i||"toggle"===a,a===(h?"hide":"show")){if("show"!==a||!m||void 0===m[r])continue;h=!0}f[r]=m&&m[r]||T.style(e,r)}if((l=!T.isEmptyObject(t))||!T.isEmptyObject(f))for(r in u&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=m&&m.display)&&(c=x.get(e,"display")),"none"===(u=T.css(e,"display"))&&(c?u=c:(E([e],!0),c=e.style.display||c,u=T.css(e,"display"),E([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===T.css(e,"float")&&(l||(d.done(function(){p.display=c}),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,f)l||(m?"hidden"in m&&(h=m.hidden):m=x.access(e,"fxshow",{display:c}),i&&(m.hidden=!h),h&&E([e],!0),d.done(function(){for(r in h||E([e]),x.remove(e,"fxshow"),f)T.style(e,r,f[r])})),l=yt(h?m[r]:0,r,d),r in m||(m[r]=l.start,h&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?I.prefilters.unshift(e):I.prefilters.push(e)}}),T.speed=function(e,t,n){var r=e&&"object"==typeof e?T.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};return T.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in T.fx.speeds?r.duration=T.fx.speeds[r.duration]:r.duration=T.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){v(r.old)&&r.old.call(this),r.queue&&T.dequeue(this,r.queue)},r},T.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ge).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){function a(){var e=I(this,T.extend({},t),o);(i||x.get(this,"finish"))&&e.stop(!0)}var i=T.isEmptyObject(t),o=T.speed(e,n,r);return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(a,e,i){function o(e){var t=e.stop;delete e.stop,t(i)}return"string"!=typeof a&&(i=e,e=a,a=void 0),e&&this.queue(a||"fx",[]),this.each(function(){var e=!0,t=null!=a&&a+"queueHooks",n=T.timers,r=x.get(this);if(t)r[t]&&r[t].stop&&o(r[t]);else for(t in r)r[t]&&r[t].stop&&pt.test(t)&&o(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=a&&n[t].queue!==a||(n[t].anim.stop(i),e=!1,n.splice(t,1));!e&&i||T.dequeue(this,a)})},finish:function(o){return!1!==o&&(o=o||"fx"),this.each(function(){var e,t=x.get(this),n=t[o+"queue"],r=t[o+"queueHooks"],a=T.timers,i=n?n.length:0;for(t.finish=!0,T.queue(this,o,[]),r&&r.stop&&r.stop.call(this,!0),e=a.length;e--;)a[e].elem===this&&a[e].queue===o&&(a[e].anim.stop(!0),a.splice(e,1));for(e=0;e<i;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),T.each(["toggle","show","hide"],function(e,r){var a=T.fn[r];T.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?a.apply(this,arguments):this.animate(gt(r,!0),e,t,n)}}),T.each({slideDown:gt("show"),slideUp:gt("hide"),slideToggle:gt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){T.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),T.timers=[],T.fx.tick=function(){var e,t=0,n=T.timers;for(O=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||T.fx.stop(),O=void 0},T.fx.timer=function(e){T.timers.push(e),T.fx.start()},T.fx.interval=13,T.fx.start=function(){dt||(dt=!0,ht())},T.fx.stop=function(){dt=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(r,e){return r=T.fx&&T.fx.speeds[r]||r,this.queue(e=e||"fx",function(e,t){var n=_.setTimeout(e,r);t.stop=function(){_.clearTimeout(n)}})},o=w.createElement("input"),D=w.createElement("select").appendChild(w.createElement("option")),o.type="checkbox",g.checkOn=""!==o.value,g.optSelected=D.selected,(o=w.createElement("input")).value="t",o.type="radio",g.radioValue="t"===o.value;var vt,bt=T.expr.attrHandle,xt=(T.fn.extend({attr:function(e,t){return d(this,T.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){T.removeAttr(this,e)})}}),T.extend({attr:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?T.prop(e,t,n):(1===i&&T.isXMLDoc(e)||(a=T.attrHooks[t.toLowerCase()]||(T.expr.match.bool.test(t)?vt:void 0)),void 0!==n?null===n?void T.removeAttr(e,t):a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:(e.setAttribute(t,n+""),n):!(a&&"get"in a&&null!==(r=a.get(e,t)))&&null==(r=T.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){var n;if(!g.radioValue&&"radio"===t&&l(e,"input"))return n=e.value,e.setAttribute("type",t),n&&(e.value=n),t}}},removeAttr:function(e,t){var n,r=0,a=t&&t.match(k);if(a&&1===e.nodeType)for(;n=a[r++];)e.removeAttribute(n)}}),vt={set:function(e,t,n){return!1===t?T.removeAttr(e,n):e.setAttribute(n,n),n}},T.each(T.expr.match.bool.source.match(/\w+/g),function(e,t){var o=bt[t]||T.find.attr;bt[t]=function(e,t,n){var r,a,i=t.toLowerCase();return n||(a=bt[i],bt[i]=r,r=null!=o(e,t,n)?i:null,bt[i]=a),r}}),/^(?:input|select|textarea|button)$/i),_t=/^(?:a|area)$/i;function R(e){return(e.match(k)||[]).join(" ")}function P(e){return e.getAttribute&&e.getAttribute("class")||""}function wt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(k)||[]}T.fn.extend({prop:function(e,t){return d(this,T.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[T.propFix[e]||e]})}}),T.extend({prop:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&T.isXMLDoc(e)||(t=T.propFix[t]||t,a=T.propHooks[t]),void 0!==n?a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:e[t]=n:a&&"get"in a&&null!==(r=a.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=T.find.attr(e,"tabindex");return t?parseInt(t,10):xt.test(e.nodeName)||_t.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(T.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){e=e.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){T.propFix[this.toLowerCase()]=this}),T.fn.extend({addClass:function(t){var e,n,r,a,i,o,s=0;if(v(t))return this.each(function(e){T(this).addClass(t.call(this,e,P(this)))});if((e=wt(t)).length)for(;n=this[s++];)if(o=P(n),r=1===n.nodeType&&" "+R(o)+" "){for(i=0;a=e[i++];)r.indexOf(" "+a+" ")<0&&(r+=a+" ");o!==(o=R(r))&&n.setAttribute("class",o)}return this},removeClass:function(t){var e,n,r,a,i,o,s=0;if(v(t))return this.each(function(e){T(this).removeClass(t.call(this,e,P(this)))});if(!arguments.length)return this.attr("class","");if((e=wt(t)).length)for(;n=this[s++];)if(o=P(n),r=1===n.nodeType&&" "+R(o)+" "){for(i=0;a=e[i++];)for(;-1<r.indexOf(" "+a+" ");)r=r.replace(" "+a+" "," ");o!==(o=R(r))&&n.setAttribute("class",o)}return this},toggleClass:function(a,t){var i=typeof a,o="string"==i||Array.isArray(a);return"boolean"==typeof t&&o?t?this.addClass(a):this.removeClass(a):v(a)?this.each(function(e){T(this).toggleClass(a.call(this,e,P(this),t),t)}):this.each(function(){var e,t,n,r;if(o)for(t=0,n=T(this),r=wt(a);e=r[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==a&&"boolean"!=i||((e=P(this))&&x.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==a&&x.get(this,"__className__")||""))})},hasClass:function(e){for(var t,n=0,r=" "+e+" ";t=this[n++];)if(1===t.nodeType&&-1<(" "+R(P(t))+" ").indexOf(r))return!0;return!1}});function Tt(e){e.stopPropagation()}var kt=/\r/g,At=(T.fn.extend({val:function(t){var n,e,r,a=this[0];return arguments.length?(r=v(t),this.each(function(e){1===this.nodeType&&(null==(e=r?t.call(this,e,T(this).val()):t)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=T.map(e,function(e){return null==e?"":e+""})),(n=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,e,"value")||(this.value=e))})):a?(n=T.valHooks[a.type]||T.valHooks[a.nodeName.toLowerCase()])&&"get"in n&&void 0!==(e=n.get(a,"value"))?e:"string"==typeof(e=a.value)?e.replace(kt,""):null==e?"":e:void 0}}),T.extend({valHooks:{option:{get:function(e){var t=T.find.attr(e,"value");return null!=t?t:R(T.text(e))}},select:{get:function(e){for(var t,n=e.options,r=e.selectedIndex,a="select-one"===e.type,i=a?null:[],o=a?r+1:n.length,s=r<0?o:a?r:0;s<o;s++)if(((t=n[s]).selected||s===r)&&!t.disabled&&(!t.parentNode.disabled||!l(t.parentNode,"optgroup"))){if(t=T(t).val(),a)return t;i.push(t)}return i},set:function(e,t){for(var n,r,a=e.options,i=T.makeArray(t),o=a.length;o--;)((r=a[o]).selected=-1<T.inArray(T.valHooks.option.get(r),i))&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),T.each(["radio","checkbox"],function(){T.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<T.inArray(T(e).val(),t)}},g.checkOn||(T.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),g.focusin="onfocusin"in _,/^(?:focusinfocus|focusoutblur)$/),Mt=(T.extend(T.event,{trigger:function(e,t,n,r){var a,i,o,s,l,c,u,d=[n||w],f=U.call(e,"type")?e.type:e,p=U.call(e,"namespace")?e.namespace.split("."):[],h=u=i=n=n||w;if(3!==n.nodeType&&8!==n.nodeType&&!At.test(f+T.event.triggered)&&(-1<f.indexOf(".")&&(f=(p=f.split(".")).shift(),p.sort()),s=f.indexOf(":")<0&&"on"+f,(e=e[T.expando]?e:new T.Event(f,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:T.makeArray(t,[e]),c=T.event.special[f]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!m(n)){for(o=c.delegateType||f,At.test(o+f)||(h=h.parentNode);h;h=h.parentNode)d.push(h),i=h;i===(n.ownerDocument||w)&&d.push(i.defaultView||i.parentWindow||_)}for(a=0;(h=d[a++])&&!e.isPropagationStopped();)u=h,e.type=1<a?o:c.bindType||f,(l=(x.get(h,"events")||Object.create(null))[e.type]&&x.get(h,"handle"))&&l.apply(h,t),(l=s&&h[s])&&l.apply&&y(h)&&(e.result=l.apply(h,t),!1===e.result&&e.preventDefault());return e.type=f,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(d.pop(),t)||!y(n)||s&&v(n[f])&&!m(n)&&((i=n[s])&&(n[s]=null),T.event.triggered=f,e.isPropagationStopped()&&u.addEventListener(f,Tt),n[f](),e.isPropagationStopped()&&u.removeEventListener(f,Tt),T.event.triggered=void 0,i&&(n[s]=i)),e.result}},simulate:function(e,t,n){n=T.extend(new T.Event,n,{type:e,isSimulated:!0});T.event.trigger(n,null,t)}}),T.fn.extend({trigger:function(e,t){return this.each(function(){T.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return T.event.trigger(e,t,n,!0)}}),g.focusin||T.each({focus:"focusin",blur:"focusout"},function(n,r){function a(e){T.event.simulate(r,e.target,T.event.fix(e))}T.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=x.access(e,r);t||e.addEventListener(n,a,!0),x.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=x.access(e,r)-1;t?x.access(e,r,t):(e.removeEventListener(n,a,!0),x.remove(e,r))}}}),_.location),Et={guid:Date.now()},St=/\?/,Lt=(T.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new _.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||T.error("Invalid XML: "+(n?T.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t},/\[\]$/),Ct=/\r?\n/g,Ot=/^(?:submit|button|image|reset|file)$/i,Dt=/^(?:input|select|textarea|keygen)/i;T.param=function(e,t){function n(e,t){t=v(t)?t():t,a[a.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==t?"":t)}var r,a=[];if(null==e)return"";if(Array.isArray(e)||e.jquery&&!T.isPlainObject(e))T.each(e,function(){n(this.name,this.value)});else for(r in e)!function n(r,e,a,i){if(Array.isArray(e))T.each(e,function(e,t){a||Lt.test(r)?i(r,t):n(r+"["+("object"==typeof t&&null!=t?e:"")+"]",t,a,i)});else if(a||"object"!==h(e))i(r,e);else for(var t in e)n(r+"["+t+"]",e[t],a,i)}(r,e[r],t,n);return a.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=T.prop(this,"elements");return e?T.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!T(this).is(":disabled")&&Dt.test(this.nodeName)&&!Ot.test(e)&&(this.checked||!_e.test(e))}).map(function(e,t){var n=T(this).val();return null==n?null:Array.isArray(n)?T.map(n,function(e){return{name:t.name,value:e.replace(Ct,"\r\n")}}):{name:t.name,value:n.replace(Ct,"\r\n")}}).get()}});var It=/%20/g,Rt=/#.*$/,Pt=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ft=/^(?:GET|HEAD)$/,zt=/^\/\//,jt={},qt={},Ht="*/".concat("*"),Bt=w.createElement("a");function Ut(i){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,a=e.toLowerCase().match(k)||[];if(v(t))for(;n=a[r++];)"+"===n[0]?(n=n.slice(1)||"*",(i[n]=i[n]||[]).unshift(t)):(i[n]=i[n]||[]).push(t)}}function Vt(t,r,a,i){var o={},s=t===qt;function l(e){var n;return o[e]=!0,T.each(t[e]||[],function(e,t){t=t(r,a,i);return"string"!=typeof t||s||o[t]?s?!(n=t):void 0:(r.dataTypes.unshift(t),l(t),!1)}),n}return l(r.dataTypes[0])||!o["*"]&&l("*")}function Yt(e,t){var n,r,a=T.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((a[n]?e:r=r||{})[n]=t[n]);return r&&T.extend(!0,e,r),e}Bt.href=Mt.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Mt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ht,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Yt(Yt(e,T.ajaxSettings),t):Yt(T.ajaxSettings,e)},ajaxPrefilter:Ut(jt),ajaxTransport:Ut(qt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var l,c,u,n,d,f,p,r,h=T.ajaxSetup({},t=t||{}),m=h.context||h,g=h.context&&(m.nodeType||m.jquery)?T(m):T.event,y=T.Deferred(),v=T.Callbacks("once memory"),b=h.statusCode||{},a={},i={},o="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(f){if(!n)for(n={};t=Nt.exec(u);)n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return f?u:null},setRequestHeader:function(e,t){return null==f&&(e=i[e.toLowerCase()]=i[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==f&&(h.mimeType=e),this},statusCode:function(e){if(e)if(f)x.always(e[x.status]);else for(var t in e)b[t]=[b[t],e[t]];return this},abort:function(e){e=e||o;return l&&l.abort(e),s(0,e),this}};if(y.promise(x),h.url=((e||h.url||Mt.href)+"").replace(zt,Mt.protocol+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(k)||[""],null==h.crossDomain){e=w.createElement("a");try{e.href=h.url,e.href=e.href,h.crossDomain=Bt.protocol+"//"+Bt.host!=e.protocol+"//"+e.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=T.param(h.data,h.traditional)),Vt(jt,h,t,x),!f){for(r in(p=T.event&&h.global)&&0==T.active++&&T.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Ft.test(h.type),c=h.url.replace(Rt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(It,"+")):(e=h.url.slice(c.length),h.data&&(h.processData||"string"==typeof h.data)&&(c+=(St.test(c)?"&":"?")+h.data,delete h.data),!1===h.cache&&(c=c.replace(Pt,"$1"),e=(St.test(c)?"&":"?")+"_="+Et.guid+++e),h.url=c+e),h.ifModified&&(T.lastModified[c]&&x.setRequestHeader("If-Modified-Since",T.lastModified[c]),T.etag[c]&&x.setRequestHeader("If-None-Match",T.etag[c])),(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Ht+"; q=0.01":""):h.accepts["*"]),h.headers)x.setRequestHeader(r,h.headers[r]);if(h.beforeSend&&(!1===h.beforeSend.call(m,x,h)||f))return x.abort();if(o="abort",v.add(h.complete),x.done(h.success),x.fail(h.error),l=Vt(qt,h,t,x)){if(x.readyState=1,p&&g.trigger("ajaxSend",[x,h]),f)return x;h.async&&0<h.timeout&&(d=_.setTimeout(function(){x.abort("timeout")},h.timeout));try{f=!1,l.send(a,s)}catch(e){if(f)throw e;s(-1,e)}}else s(-1,"No Transport")}return x;function s(e,t,n,r){var a,i,o,s=t;f||(f=!0,d&&_.clearTimeout(d),l=void 0,u=r||"",x.readyState=0<e?4:0,r=200<=e&&e<300||304===e,n&&(o=function(e,t,n){for(var r,a,i,o,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){l.unshift(a);break}if(l[0]in n)i=l[0];else{for(a in n){if(!l[0]||e.converters[a+" "+l[0]]){i=a;break}o=o||a}i=i||o}if(i)return i!==l[0]&&l.unshift(i),n[i]}(h,x,n)),!r&&-1<T.inArray("script",h.dataTypes)&&T.inArray("json",h.dataTypes)<0&&(h.converters["text script"]=function(){}),o=function(e,t,n,r){var a,i,o,s,l,c={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(i=u.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=i,i=u.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(!(o=c[l+" "+i]||c["* "+i]))for(a in c)if((s=a.split(" "))[1]===i&&(o=c[l+" "+s[0]]||c["* "+s[0]])){!0===o?o=c[a]:!0!==c[a]&&(i=s[0],u.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+i}}}return{state:"success",data:t}}(h,o,x,r),r?(h.ifModified&&((n=x.getResponseHeader("Last-Modified"))&&(T.lastModified[c]=n),(n=x.getResponseHeader("etag"))&&(T.etag[c]=n)),204===e||"HEAD"===h.type?s="nocontent":304===e?s="notmodified":(s=o.state,a=o.data,r=!(i=o.error))):(i=s,!e&&s||(s="error",e<0&&(e=0))),x.status=e,x.statusText=(t||s)+"",r?y.resolveWith(m,[a,s,x]):y.rejectWith(m,[x,s,i]),x.statusCode(b),b=void 0,p&&g.trigger(r?"ajaxSuccess":"ajaxError",[x,h,r?a:i]),v.fireWith(m,[x,s]),p&&(g.trigger("ajaxComplete",[x,h]),--T.active||T.event.trigger("ajaxStop")))}},getJSON:function(e,t,n){return T.get(e,t,n,"json")},getScript:function(e,t){return T.get(e,void 0,t,"script")}}),T.each(["get","post"],function(e,a){T[a]=function(e,t,n,r){return v(t)&&(r=r||n,n=t,t=void 0),T.ajax(T.extend({url:e,type:a,dataType:r,data:t,success:n},T.isPlainObject(e)&&e))}}),T.ajaxPrefilter(function(e){for(var t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),T._evalUrl=function(e,t,n){return T.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){T.globalEval(e,t,n)}})},T.fn.extend({wrapAll:function(e){return this[0]&&(v(e)&&(e=e.call(this[0])),e=T(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return v(n)?this.each(function(e){T(this).wrapInner(n.call(this,e))}):this.each(function(){var e=T(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=v(t);return this.each(function(e){T(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){T(this).replaceWith(this.childNodes)}),this}}),T.expr.pseudos.hidden=function(e){return!T.expr.pseudos.visible(e)},T.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new _.XMLHttpRequest}catch(e){}};var $t={0:200,1223:204},Gt=T.ajaxSettings.xhr(),Wt=(g.cors=!!Gt&&"withCredentials"in Gt,g.ajax=Gt=!!Gt,T.ajaxTransport(function(a){var i,o;if(g.cors||Gt&&!a.crossDomain)return{send:function(e,t){var n,r=a.xhr();if(r.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(n in a.xhrFields)r[n]=a.xhrFields[n];for(n in a.mimeType&&r.overrideMimeType&&r.overrideMimeType(a.mimeType),a.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);i=function(e){return function(){i&&(i=o=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t($t[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=i(),o=r.onerror=r.ontimeout=i("error"),void 0!==r.onabort?r.onabort=o:r.onreadystatechange=function(){4===r.readyState&&_.setTimeout(function(){i&&o()})},i=i("abort");try{r.send(a.hasContent&&a.data||null)}catch(e){if(i)throw e}},abort:function(){i&&i()}}}),T.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return T.globalEval(e),e}}}),T.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),T.ajaxTransport("script",function(n){var r,a;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=T("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",a=function(e){r.remove(),a=null,e&&t("error"===e.type?404:200,e.type)}),w.head.appendChild(r[0])},abort:function(){a&&a()}}}),[]),Zt=/(=)\?(?=&|$)|\?\?/,Xt=(T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Wt.pop()||T.expando+"_"+Et.guid++;return this[e]=!0,e}}),T.ajaxPrefilter("json jsonp",function(e,t,n){var r,a,i,o=!1!==e.jsonp&&(Zt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Zt.test(e.data)&&"data");if(o||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(Zt,"$1"+r):!1!==e.jsonp&&(e.url+=(St.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return i||T.error(r+" was not called"),i[0]},e.dataTypes[0]="json",a=_[r],_[r]=function(){i=arguments},n.always(function(){void 0===a?T(_).removeProp(r):_[r]=a,e[r]&&(e.jsonpCallback=t.jsonpCallback,Wt.push(r)),i&&v(a)&&a(i[0]),i=a=void 0}),"script"}),g.createHTMLDocument=((e=w.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===e.childNodes.length),T.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(g.createHTMLDocument?((r=(t=w.implementation.createHTMLDocument("")).createElement("base")).href=w.location.href,t.head.appendChild(r)):t=w),r=!n&&[],(n=J.exec(e))?[t.createElement(n[1])]:(n=Me([e],t,r),r&&r.length&&T(r).remove(),T.merge([],n.childNodes)));var r},T.fn.load=function(e,t,n){var r,a,i,o=this,s=e.indexOf(" ");return-1<s&&(r=R(e.slice(s)),e=e.slice(0,s)),v(t)?(n=t,t=void 0):t&&"object"==typeof t&&(a="POST"),0<o.length&&T.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done(function(e){i=arguments,o.html(r?T("<div>").append(T.parseHTML(e)).find(r):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,i||[e.responseText,t,e])})}),this},T.expr.pseudos.animated=function(t){return T.grep(T.timers,function(e){return t===e.elem}).length},T.offset={setOffset:function(e,t,n){var r,a,i,o,s=T.css(e,"position"),l=T(e),c={};"static"===s&&(e.style.position="relative"),i=l.offset(),r=T.css(e,"top"),o=T.css(e,"left"),s=("absolute"===s||"fixed"===s)&&-1<(r+o).indexOf("auto")?(a=(s=l.position()).top,s.left):(a=parseFloat(r)||0,parseFloat(o)||0),null!=(t=v(t)?t.call(e,n,T.extend({},i)):t).top&&(c.top=t.top-i.top+a),null!=t.left&&(c.left=t.left-i.left+s),"using"in t?t.using.call(e,c):l.css(c)}},T.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){T.offset.setOffset(this,t,e)});var e,n=this[0];return n?n.getClientRects().length?(e=n.getBoundingClientRect(),n=n.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],a={top:0,left:0};if("fixed"===T.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===T.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((a=T(e).offset()).top+=T.css(e,"borderTopWidth",!0),a.left+=T.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-T.css(r,"marginTop",!0),left:t.left-a.left-T.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===T.css(e,"position");)e=e.offsetParent;return e||A})}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,a){var i="pageYOffset"===a;T.fn[t]=function(e){return d(this,function(e,t,n){var r;if(m(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[a]:e[t];r?r.scrollTo(i?r.pageXOffset:n,i?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),T.each(["top","left"],function(e,n){T.cssHooks[n]=Qe(g.pixelPosition,function(e,t){if(t)return t=Ke(e,n),We.test(t)?T(e).position()[n]+"px":t})}),T.each({Height:"height",Width:"width"},function(o,s){T.each({padding:"inner"+o,content:s,"":"outer"+o},function(r,i){T.fn[i]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),a=r||(!0===e||!0===t?"margin":"border");return d(this,function(e,t,n){var r;return m(e)?0===i.indexOf("outer")?e["inner"+o]:e.document.documentElement["client"+o]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+o],r["scroll"+o],e.body["offset"+o],r["offset"+o],r["client"+o])):void 0===n?T.css(e,t,a):T.style(e,t,n,a)},s,n?e:void 0,n)}})}),T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){T.fn[t]=function(e){return this.on(t,e)}}),T.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){T.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g),Jt=(T.proxy=function(e,t){var n,r;if("string"==typeof t&&(r=e[t],t=e,e=r),v(e))return n=s.call(arguments,2),(r=function(){return e.apply(t||this,n.concat(s.call(arguments)))}).guid=e.guid=e.guid||T.guid++,r},T.holdReady=function(e){e?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=l,T.isFunction=v,T.isWindow=m,T.camelCase=b,T.type=h,T.now=Date.now,T.isNumeric=function(e){var t=T.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},T.trim=function(e){return null==e?"":(e+"").replace(Xt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return T}),_.jQuery),Kt=_.$;return T.noConflict=function(e){return _.$===T&&(_.$=Kt),e&&_.jQuery===T&&(_.jQuery=Jt),T},void 0===N&&(_.jQuery=_.$=T),T}),!function(e,t){"function"==typeof define&&define.amd?define([],t):e.htmx=t()}("undefined"!=typeof self?self:this,function(){"use strict";var htmx={onLoad:onLoadHelper,process:processNode,on:addEventListenerImpl,off:removeEventListenerImpl,trigger:triggerEvent,ajax:ajaxHelper,find:find,findAll:findAll,closest:closest,values:function(e,t){return getInputValues(e,t||"post").values},remove:removeElement,addClass:addClassToElement,removeClass:removeClassFromElement,toggleClass:toggleClassOnElement,takeClass:takeClassForElement,defineExtension:defineExtension,removeExtension:removeExtension,logAll:logAll,logger:null,useTemplateFragments:!1,config:{historyEnabled:!0,historyCacheSize:10,refreshOnHistoryMiss:!1,defaultSwapStyle:"innerHTML",defaultSwapDelay:0,defaultSettleDelay:20,includeIndicatorStyles:!0,indicatorClass:"htmx-indicator",requestClass:"htmx-request",settlingClass:"htmx-settling",swappingClass:"htmx-swapping",allowEval:!0,attributesToSettle:["class","style","width","height"],withCredentials:!1,wsReconnectDelay:"full-jitter",disableSelector:"[hx-disable], [data-hx-disable]"},parseInterval:parseInterval,_:internalEval,createEventSource:function(e){return new EventSource(e,{withCredentials:!0})},createWebSocket:function(e){return new WebSocket(e,[])}},VERBS=["get","post","put","delete","patch"],VERB_SELECTOR=VERBS.map(function(e){return"[hx-"+e+"], [data-hx-"+e+"]"}).join(", ");function parseInterval(e){if(null!=e)return"ms"==e.slice(-2)?parseFloat(e.slice(0,-2))||void 0:"s"==e.slice(-1)?1e3*parseFloat(e.slice(0,-1))||void 0:parseFloat(e)||void 0}function getRawAttribute(e,t){return e.getAttribute&&e.getAttribute(t)}function hasAttribute(e,t){return e.hasAttribute&&(e.hasAttribute(t)||e.hasAttribute("data-"+t))}function getAttributeValue(e,t){return getRawAttribute(e,t)||getRawAttribute(e,"data-"+t)}function parentElt(e){return e.parentElement}function getDocument(){return document}function getClosestMatch(e,t){return t(e)?e:parentElt(e)?getClosestMatch(parentElt(e),t):null}function getClosestAttributeValue(e,t){var n=null;return getClosestMatch(e,function(e){return n=getAttributeValue(e,t)}),n}function matches(e,t){var n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector;return n&&n.call(e,t)}function getStartTag(e){e=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i.exec(e);return e?e[1].toLowerCase():""}function parseHTML(e,t){for(var n=(new DOMParser).parseFromString(e,"text/html").body;0<t;)t--,n=n.firstChild;return n=null==n?getDocument().createDocumentFragment():n}function makeFragment(e){if(htmx.config.useTemplateFragments)return parseHTML("<body><template>"+e+"</template></body>",0).querySelector("template").content;switch(getStartTag(e)){case"thead":case"tbody":case"tfoot":case"colgroup":case"caption":return parseHTML("<table>"+e+"</table>",1);case"col":return parseHTML("<table><colgroup>"+e+"</colgroup></table>",2);case"tr":return parseHTML("<table><tbody>"+e+"</tbody></table>",2);case"td":case"th":return parseHTML("<table><tbody><tr>"+e+"</tr></tbody></table>",3);case"script":return parseHTML("<div>"+e+"</div>",1);default:return parseHTML(e,0)}}function maybeCall(e){e&&e()}function isType(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function isFunction(e){return isType(e,"Function")}function isRawObject(e){return isType(e,"Object")}function getInternalData(e){var t="htmx-internal-data";return e[t]||(e[t]={})}function toArray(e){var t=[];if(e)for(var n=0;n<e.length;n++)t.push(e[n]);return t}function forEach(e,t){if(e)for(var n=0;n<e.length;n++)t(e[n])}function isScrolledIntoView(e){var e=e.getBoundingClientRect(),t=e.top,e=e.bottom;return t<window.innerHeight&&0<=e}function bodyContains(e){return getDocument().body.contains(e)}function splitOnWhitespace(e){return e.trim().split(/\s+/)}function mergeObjects(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function parseJSON(e){try{return JSON.parse(e)}catch(e){return logError(e),null}}function internalEval(str){return maybeEval(getDocument().body,function(){return eval(str)})}function onLoadHelper(t){return htmx.on("htmx:load",function(e){t(e.detail.elt)})}function logAll(){htmx.logger=function(e,t,n){console&&console.log(t,e,n)}}function find(e,t){return t?e.querySelector(t):find(getDocument(),e)}function findAll(e,t){return t?e.querySelectorAll(t):findAll(getDocument(),e)}function removeElement(e,t){e=resolveTarget(e),t?setTimeout(function(){removeElement(e)},t):e.parentElement.removeChild(e)}function addClassToElement(e,t,n){e=resolveTarget(e),n?setTimeout(function(){addClassToElement(e,t)},n):e.classList.add(t)}function removeClassFromElement(e,t,n){e=resolveTarget(e),n?setTimeout(function(){removeClassFromElement(e,t)},n):e.classList.remove(t)}function toggleClassOnElement(e,t){(e=resolveTarget(e)).classList.toggle(t)}function takeClassForElement(e,t){forEach((e=resolveTarget(e)).parentElement.children,function(e){removeClassFromElement(e,t)}),addClassToElement(e,t)}function closest(e,t){if((e=resolveTarget(e)).closest)return e.closest(t);do{if(null==e||matches(e,t))return e}while(e=e&&parentElt(e))}function querySelectorAllExt(e,t){return 0===t.indexOf("closest ")?[closest(e,t.substr(8))]:0===t.indexOf("find ")?[find(e,t.substr(5))]:getDocument().querySelectorAll(t)}function querySelectorExt(e,t){return querySelectorAllExt(e,t)[0]}function resolveTarget(e){return isType(e,"String")?find(e):e}function processEventArgs(e,t,n){return isFunction(t)?{target:getDocument().body,event:e,listener:t}:{target:resolveTarget(e),event:t,listener:n}}function addEventListenerImpl(t,n,r){return ready(function(){var e=processEventArgs(t,n,r);e.target.addEventListener(e.event,e.listener)}),isFunction(n)?n:r}function removeEventListenerImpl(t,n,r){return ready(function(){var e=processEventArgs(t,n,r);e.target.removeEventListener(e.event,e.listener)}),isFunction(n)?n:r}function getTarget(e){var t,n=getClosestMatch(e,function(e){return null!==getAttributeValue(e,"hx-target")});return n?"this"===(t=getAttributeValue(n,"hx-target"))?n:querySelectorExt(e,t):getInternalData(e).boosted?getDocument().body:e}function shouldSettleAttribute(e){for(var t=htmx.config.attributesToSettle,n=0;n<t.length;n++)if(e===t[n])return 1}function cloneAttributes(t,n){forEach(t.attributes,function(e){!n.hasAttribute(e.name)&&shouldSettleAttribute(e.name)&&t.removeAttribute(e.name)}),forEach(n.attributes,function(e){shouldSettleAttribute(e.name)&&t.setAttribute(e.name,e.value)})}function isInlineSwap(e,t){for(var n=getExtensions(t),r=0;r<n.length;r++){var a=n[r];try{if(a.isInlineSwap(e))return 1}catch(e){logError(e)}}return"outerHTML"===e}function oobSwap(e,t,n){var r="#"+t.id,a="outerHTML",e=("true"!==e&&(0<e.indexOf(":")?(a=e.substr(0,e.indexOf(":")),r=e.substr(e.indexOf(":")+1,e.length)):a=e),getDocument().querySelector(r));e?((r=getDocument().createDocumentFragment()).appendChild(t),swap(a,e,e,r=isInlineSwap(a,e)?r:t,n)):(t.parentNode.removeChild(t),triggerErrorEvent(getDocument().body,"htmx:oobErrorNoTarget",{content:t}))}function handleOutOfBandSwaps(e,n){forEach(findAll(e,"[hx-swap-oob], [data-hx-swap-oob]"),function(e){var t=getAttributeValue(e,"hx-swap-oob");null!=t&&oobSwap(t,e,n)})}function handlePreservedElements(e){forEach(findAll(e,"[hx-preserve], [data-hx-preserve]"),function(e){var t=getAttributeValue(e,"id"),t=getDocument().getElementById(t);null!=t&&e.parentNode.replaceChild(t,e)})}function handleAttributes(r,e,a){forEach(e.querySelectorAll("[id]"),function(e){var t,n;e.id&&0<e.id.length&&((t=r.querySelector(e.tagName+"[id='"+e.id+"']"))&&t!==r&&(n=e.cloneNode(),cloneAttributes(e,t),a.tasks.push(function(){cloneAttributes(e,n)})))})}function makeAjaxLoadTask(e){return function(){processNode(e),processScripts(e),processFocus(e),triggerEvent(e,"htmx:load")}}function processFocus(e){var t="[autofocus]",e=matches(e,t)?e:e.querySelector(t);null!=e&&e.focus()}function insertNodesBefore(e,t,n,r){for(handleAttributes(e,n,r);0<n.childNodes.length;){var a=n.firstChild;e.insertBefore(a,t),a.nodeType!==Node.TEXT_NODE&&a.nodeType!==Node.COMMENT_NODE&&r.tasks.push(makeAjaxLoadTask(a))}}function cleanUpElement(t){var e=getInternalData(t);e.webSocket&&e.webSocket.close(),e.sseEventSource&&e.sseEventSource.close(),e.listenerInfos&&forEach(e.listenerInfos,function(e){t!==e.on&&e.on.removeEventListener(e.trigger,e.listener)}),t.children&&forEach(t.children,function(e){cleanUpElement(e)})}function swapOuterHTML(e,t,n){if("BODY"===e.tagName)swapInnerHTML(e,t,n);else{var r,a=e.previousSibling;for(insertNodesBefore(parentElt(e),e,t,n),r=null==a?parentElt(e).firstChild:a.nextSibling,getInternalData(e).replacedWith=r,n.elts=[];r&&r!==e;)r.nodeType===Node.ELEMENT_NODE&&n.elts.push(r),r=r.nextElementSibling;cleanUpElement(e),parentElt(e).removeChild(e)}}function swapAfterBegin(e,t,n){insertNodesBefore(e,e.firstChild,t,n)}function swapBeforeBegin(e,t,n){insertNodesBefore(parentElt(e),e,t,n)}function swapBeforeEnd(e,t,n){insertNodesBefore(e,null,t,n)}function swapAfterEnd(e,t,n){insertNodesBefore(parentElt(e),e.nextSibling,t,n)}function swapInnerHTML(e,t,n){var r=e.firstChild;if(insertNodesBefore(e,r,t,n),r){for(;r.nextSibling;)cleanUpElement(r.nextSibling),e.removeChild(r.nextSibling);cleanUpElement(r),e.removeChild(r)}}function maybeSelectFromResponse(e,t){var n,e=getClosestAttributeValue(e,"hx-select");return e&&(n=getDocument().createDocumentFragment(),forEach(t.querySelectorAll(e),function(e){n.appendChild(e)}),t=n),t}function swap(e,t,n,r,a){switch(e){case"none":return;case"outerHTML":return void swapOuterHTML(n,r,a);case"afterbegin":return void swapAfterBegin(n,r,a);case"beforebegin":return void swapBeforeBegin(n,r,a);case"beforeend":return void swapBeforeEnd(n,r,a);case"afterend":return void swapAfterEnd(n,r,a);default:for(var i=getExtensions(t),o=0;o<i.length;o++){var s=i[o];try{var l=s.handleSwap(e,n,r,a);if(l){if(void 0!==l.length)for(var c=0;c<l.length;c++){var u=l[c];u.nodeType!==Node.TEXT_NODE&&u.nodeType!==Node.COMMENT_NODE&&a.tasks.push(makeAjaxLoadTask(u))}return}}catch(e){logError(e)}}swapInnerHTML(n,r,a)}}var TITLE_FINDER=/<title>([\s\S]+?)<\/title>/im;function findTitle(e){if(-1<e.indexOf("<title>")&&(-1==e.indexOf("<svg>")||e.indexOf("<title>")<e.indexOf("<svg>"))){e=TITLE_FINDER.exec(e);if(e)return e[1]}}function selectAndSwap(e,t,n,r,a){var i=findTitle(r),o=(i&&((o=find("title"))?o.innerHTML=i:window.document.title=i),makeFragment(r));o&&(handleOutOfBandSwaps(o,a),handlePreservedElements(o=maybeSelectFromResponse(n,o)),swap(e,n,t,o,a))}function handleTrigger(e,t,n){e=e.getResponseHeader(t);if(0===e.indexOf("{")){var r,a,i=parseJSON(e);for(r in i)i.hasOwnProperty(r)&&triggerEvent(n,r,a=isRawObject(a=i[r])?a:{value:a})}else triggerEvent(n,e,[])}var WHITESPACE=/\s/,WHITESPACE_OR_COMMA=/[\s,]/,SYMBOL_START=/[_$a-zA-Z]/,SYMBOL_CONT=/[_$a-zA-Z0-9]/,STRINGISH_START=['"',"'","/"],NOT_WHITESPACE=/[^\s]/;function tokenizeString(e){for(var t=[],n=0;n<e.length;){if(SYMBOL_START.exec(e.charAt(n))){for(var r=n;SYMBOL_CONT.exec(e.charAt(n+1));)n++;t.push(e.substr(r,n-r+1))}else if(-1!==STRINGISH_START.indexOf(e.charAt(n))){var a=e.charAt(n),r=n;for(n++;n<e.length&&e.charAt(n)!==a;)"\\"===e.charAt(n)&&n++,n++;t.push(e.substr(r,n-r+1))}else{var i=e.charAt(n);t.push(i)}n++}return t}function isPossibleRelativeReference(e,t,n){return SYMBOL_START.exec(e.charAt(0))&&"true"!==e&&"false"!==e&&"this"!==e&&e!==n&&"."!==t}function maybeGenerateConditional(e,t,n){if("["===t[0]){t.shift();for(var r=1,a=" return (function("+n+"){ return (",i=null;0<t.length;){var o=t[0];if("]"===o){if(0===--r){null===i&&(a+="true"),t.shift(),a+=")})";try{var s=maybeEval(e,function(){return Function(a)()},function(){return!0});return s.source=a,s}catch(e){return triggerErrorEvent(getDocument().body,"htmx:syntax:error",{error:e,source:a}),null}}}else"["===o&&r++;isPossibleRelativeReference(o,i,n)?a+="(("+n+"."+o+") ? ("+n+"."+o+") : (window."+o+"))":a+=o,i=t.shift()}}}function consumeUntil(e,t){for(var n="";0<e.length&&!e[0].match(t);)n+=e.shift();return n}var INPUT_SELECTOR="input, textarea, select";function getTriggerSpecs(e){var t=getAttributeValue(e,"hx-trigger"),n=[];if(t){var r=tokenizeString(t);do{consumeUntil(r,NOT_WHITESPACE);var a=r.length,i=consumeUntil(r,/[,\[\s]/);if(""!==i)if("every"===i){var o={trigger:"every"};consumeUntil(r,NOT_WHITESPACE),o.pollInterval=parseInterval(consumeUntil(r,WHITESPACE)),n.push(o)}else if(0===i.indexOf("sse:"))n.push({trigger:"sse",sseEvent:i.substr(4)});else{var s={trigger:i},o=maybeGenerateConditional(e,r,"event");for(o&&(s.eventFilter=o);0<r.length&&","!==r[0];){consumeUntil(r,NOT_WHITESPACE);var l=r.shift();"changed"===l?s.changed=!0:"once"===l?s.once=!0:"consume"===l?s.consume=!0:"delay"===l&&":"===r[0]?(r.shift(),s.delay=parseInterval(consumeUntil(r,WHITESPACE_OR_COMMA))):"from"===l&&":"===r[0]?(r.shift(),s.from=consumeUntil(r,WHITESPACE_OR_COMMA)):"target"===l&&":"===r[0]?(r.shift(),s.target=consumeUntil(r,WHITESPACE_OR_COMMA)):"throttle"===l&&":"===r[0]?(r.shift(),s.throttle=parseInterval(consumeUntil(r,WHITESPACE_OR_COMMA))):"queue"===l&&":"===r[0]?(r.shift(),s.queue=consumeUntil(r,WHITESPACE_OR_COMMA)):"root"!==l&&"threshold"!==l||":"!==r[0]?triggerErrorEvent(e,"htmx:syntax:error",{token:r.shift()}):(r.shift(),s[l]=consumeUntil(r,WHITESPACE_OR_COMMA))}n.push(s)}}while(r.length===a&&triggerErrorEvent(e,"htmx:syntax:error",{token:r.shift()}),consumeUntil(r,NOT_WHITESPACE),","===r[0]&&r.shift())}return 0<n.length?n:matches(e,"form")?[{trigger:"submit"}]:matches(e,INPUT_SELECTOR)?[{trigger:"change"}]:[{trigger:"click"}]}function cancelPolling(e){getInternalData(e).cancelled=!0}function processPolling(e,t,n,r){var a=getInternalData(e);a.timeout=setTimeout(function(){bodyContains(e)&&!0!==a.cancelled&&(issueAjaxRequest(t,n,e),processPolling(e,t,getAttributeValue(e,"hx-"+t),r))},r)}function isLocalLink(e){return location.hostname===e.hostname&&getRawAttribute(e,"href")&&0!==getRawAttribute(e,"href").indexOf("#")}function boostElement(t,n,e){var r,a,i;("A"===t.tagName&&isLocalLink(t)||"FORM"===t.tagName)&&(n.boosted=!0,"A"===t.tagName?(i="get",r=getRawAttribute(t,"href"),n.pushURL=!0):(a=getRawAttribute(t,"method"),"get"===(i=a?a.toLowerCase():"get")&&(n.pushURL=!0),r=getRawAttribute(t,"action")),e.forEach(function(e){addEventListener(t,i,r,n,e,!0)}))}function shouldCancel(e){return"FORM"===e.tagName||matches(e,'input[type="submit"], button')&&null!==closest(e,"form")||"A"===e.tagName&&e.href&&("#"===e.getAttribute("href")||0!==e.getAttribute("href").indexOf("#"))}function ignoreBoostedAnchorCtrlClick(e,t){return getInternalData(e).boosted&&"A"===e.tagName&&"click"===t.type&&(t.ctrlKey||t.metaKey)}function maybeFilterEvent(t,e){t=t.eventFilter;if(t)try{return!0!==t(e)}catch(e){return triggerErrorEvent(getDocument().body,"htmx:eventFilter:error",{error:e,source:t.source}),1}}function addEventListener(r,a,i,e,o,s){function l(e){if(bodyContains(r)){if(!ignoreBoostedAnchorCtrlClick(r,e)&&((s||shouldCancel(r))&&e.preventDefault(),!maybeFilterEvent(o,e))){var t=getInternalData(e),n=(t.triggerSpec=o,null==t.handledFor&&(t.handledFor=[]),getInternalData(r));if(t.handledFor.indexOf(r)<0&&(t.handledFor.push(r),o.consume&&e.stopPropagation(),!o.target||!e.target||matches(e.target,o.target))){if(o.once){if(n.triggeredOnce)return;n.triggeredOnce=!0}if(o.changed){if(n.lastValue===r.value)return;n.lastValue=r.value}n.delayed&&clearTimeout(n.delayed),n.throttle||(o.throttle?n.throttle||(issueAjaxRequest(a,i,r,e),n.throttle=setTimeout(function(){n.throttle=null},o.throttle)):o.delay?n.delayed=setTimeout(function(){issueAjaxRequest(a,i,r,e)},o.delay):issueAjaxRequest(a,i,r,e))}}}else c.removeEventListener(o.trigger,l)}var c=r;o.from&&(c=find(o.from));null==e.listenerInfos&&(e.listenerInfos=[]),e.listenerInfos.push({trigger:o.trigger,listener:l,on:c}),c.addEventListener(o.trigger,l)}var windowIsScrolling=!1,scrollHandler=null;function initScrollHandler(){scrollHandler||(scrollHandler=function(){windowIsScrolling=!0},window.addEventListener("scroll",scrollHandler),setInterval(function(){windowIsScrolling&&(windowIsScrolling=!1,forEach(getDocument().querySelectorAll("[hx-trigger='revealed'],[data-hx-trigger='revealed']"),function(e){maybeReveal(e)}))},200))}function maybeReveal(e){var t=getInternalData(e);!t.revealed&&isScrolledIntoView(e)&&(t.revealed=!0,t.initialized?issueAjaxRequest(t.verb,t.path,e):e.addEventListener("htmx:afterProcessNode",function(){issueAjaxRequest(t.verb,t.path,e)},{once:!0}))}function processWebSocketInfo(e,t,n){for(var r=splitOnWhitespace(n),a=0;a<r.length;a++){var i=r[a].split(/:(.+)/);"connect"===i[0]&&ensureWebSocket(e,i[1],0),"send"===i[0]&&processWebSocketSend(e)}}function ensureWebSocket(o,t,n){var e,r;bodyContains(o)&&(0==t.indexOf("/")&&(e=location.hostname+(location.port?":"+location.port:""),"https:"==location.protocol?t="wss://"+e+t:"http:"==location.protocol&&(t="ws://"+e+t)),(r=htmx.createWebSocket(t)).onerror=function(e){triggerErrorEvent(o,"htmx:wsError",{error:e,socket:r}),maybeCloseWebSocketSource(o)},r.onclose=function(e){[1006,1012,1013].includes(e.code)&&(e=getWebSocketReconnectDelay(n),setTimeout(function(){ensureWebSocket(o,t,n+1)},e))},r.onopen=function(e){n=0},(getInternalData(o).webSocket=r).addEventListener("message",function(e){if(!maybeCloseWebSocketSource(o)){for(var t=e.data,n=(withExtensions(o,function(e){t=e.transformResponse(t,null,o)}),makeSettleInfo(o)),r=toArray(makeFragment(t).children),a=0;a<r.length;a++){var i=r[a];oobSwap(getAttributeValue(i,"hx-swap-oob")||"true",i,n)}settleImmediately(n.tasks)}}))}function maybeCloseWebSocketSource(e){return!bodyContains(e)&&(getInternalData(e).webSocket.close(),1)}function processWebSocketSend(i){var o=getClosestMatch(i,function(e){return null!=getInternalData(e).webSocket});o?i.addEventListener(getTriggerSpecs(i)[0].trigger,function(e){var t=getInternalData(o).webSocket,n=getHeaders(i,o),r=getInputValues(i,"post"),a=r.errors,r=filterValues(mergeObjects(r.values,getExpressionVars(i)),i);r.HEADERS=n,a&&0<a.length?triggerEvent(i,"htmx:validation:halted",a):(t.send(JSON.stringify(r)),shouldCancel(i)&&e.preventDefault())}):triggerErrorEvent(i,"htmx:noWebSocketSourceError")}function getWebSocketReconnectDelay(e){var t=htmx.config.wsReconnectDelay;return"function"==typeof t?t(e):"full-jitter"===t?(t=Math.min(e,6),1e3*Math.pow(2,t)*Math.random()):void logError('htmx.config.wsReconnectDelay must either be a function or the string "full-jitter"')}function processSSEInfo(e,t,n){for(var r=splitOnWhitespace(n),a=0;a<r.length;a++){var i=r[a].split(/:(.+)/);"connect"===i[0]&&processSSESource(e,i[1]),"swap"===i[0]&&processSSESwap(e,i[1])}}function processSSESource(t,e){var n=htmx.createEventSource(e);n.onerror=function(e){triggerErrorEvent(t,"htmx:sseError",{error:e,source:n}),maybeCloseSSESource(t)},getInternalData(t).sseEventSource=n}function processSSESwap(i,o){var s,l,c=getClosestMatch(i,hasEventSource);c?(s=getInternalData(c).sseEventSource,l=function(e){var t,n,r,a;maybeCloseSSESource(c)?s.removeEventListener(o,l):(t=e.data,withExtensions(i,function(e){t=e.transformResponse(t,null,i)}),n=getSwapSpecification(i),r=getTarget(i),a=makeSettleInfo(i),selectAndSwap(n.swapStyle,i,r,t,a),settleImmediately(a.tasks),triggerEvent(i,"htmx:sseMessage",e))},getInternalData(i).sseListener=l,s.addEventListener(o,l)):triggerErrorEvent(i,"htmx:noSSESourceError")}function processSSETrigger(e,t,n,r){var a,i,o=getClosestMatch(e,hasEventSource);o?(a=getInternalData(o).sseEventSource,i=function(){maybeCloseSSESource(o)||(bodyContains(e)?issueAjaxRequest(t,n,e):a.removeEventListener(r,i))},getInternalData(e).sseListener=i,a.addEventListener(r,i)):triggerErrorEvent(e,"htmx:noSSESourceError")}function maybeCloseSSESource(e){return!bodyContains(e)&&(getInternalData(e).sseEventSource.close(),1)}function hasEventSource(e){return null!=getInternalData(e).sseEventSource}function loadImmediately(e,t,n,r,a){function i(){r.loaded||(r.loaded=!0,issueAjaxRequest(t,n,e))}a?setTimeout(i,a):i()}function processVerbs(a,i,e){var t=!1;return forEach(VERBS,function(n){var r;hasAttribute(a,"hx-"+n)&&(r=getAttributeValue(a,"hx-"+n),t=!0,i.path=r,i.verb=n,e.forEach(function(e){var t;e.sseEvent?processSSETrigger(a,n,r,e.sseEvent):"revealed"===e.trigger?(initScrollHandler(),maybeReveal(a)):"intersect"===e.trigger?(t={},e.root&&(t.root=querySelectorExt(e.root)),e.threshold&&(t.threshold=parseFloat(e.threshold)),new IntersectionObserver(function(e){for(var t=0;t<e.length;t++)if(e[t].isIntersecting){triggerEvent(a,"intersect");break}},t).observe(a),addEventListener(a,n,r,i,e)):"load"===e.trigger?loadImmediately(a,n,r,i,e.delay):e.pollInterval?(i.polling=!0,processPolling(a,n,r,e.pollInterval)):addEventListener(a,n,r,i,e)}))}),t}function evalScript(e){if("text/javascript"===e.type||""===e.type)try{maybeEval(e,function(){(0,eval)(e.innerText)})}catch(e){logError(e)}}function processScripts(e){matches(e,"script")&&evalScript(e),forEach(findAll(e,"script"),function(e){evalScript(e)})}function isBoosted(){return document.querySelector("[hx-boost], [data-hx-boost]")}function findElementsToProcess(e){var t;return e.querySelectorAll?(t=isBoosted()?", a, form":"",e.querySelectorAll(VERB_SELECTOR+t+", [hx-sse], [data-hx-sse], [hx-ws], [data-hx-ws]")):[]}function initNode(e){var t,n;e.closest&&e.closest(htmx.config.disableSelector)||((t=getInternalData(e)).initialized||(t.initialized=!0,triggerEvent(e,"htmx:beforeProcessNode"),e.value&&(t.lastValue=e.value),processVerbs(e,t,n=getTriggerSpecs(e))||"true"!==getClosestAttributeValue(e,"hx-boost")||boostElement(e,t,n),(n=getAttributeValue(e,"hx-sse"))&&processSSEInfo(e,t,n),(n=getAttributeValue(e,"hx-ws"))&&processWebSocketInfo(e,t,n),triggerEvent(e,"htmx:afterProcessNode")))}function processNode(e){initNode(e=resolveTarget(e)),forEach(findElementsToProcess(e),function(e){initNode(e)})}function kebabEventName(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function makeEvent(e,t){var n;return window.CustomEvent&&"function"==typeof window.CustomEvent?n=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t}):(n=getDocument().createEvent("CustomEvent")).initCustomEvent(e,!0,!0,t),n}function triggerErrorEvent(e,t,n){triggerEvent(e,t,mergeObjects({error:t},n))}function ignoreEventForLogging(e){return"htmx:afterProcessNode"===e}function withExtensions(e,t){forEach(getExtensions(e),function(e){try{t(e)}catch(e){logError(e)}})}function logError(e){console.error?console.error(e):console.log&&console.log("ERROR: ",e)}function triggerEvent(e,t,n){e=resolveTarget(e),(n=null==n?{}:n).elt=e;var r=makeEvent(t,n),a=(htmx.logger&&!ignoreEventForLogging(t)&&htmx.logger(e,t,n),n.error&&(logError(n.error),triggerEvent(e,"htmx:error",{errorInfo:n})),e.dispatchEvent(r)),n=kebabEventName(t);return a&&n!==t&&(n=makeEvent(n,r.detail),a=a&&e.dispatchEvent(n)),withExtensions(e,function(e){a=a&&!1!==e.onEvent(t,r)}),a}var currentPathForHistory=null;function getHistoryElement(){return getDocument().querySelector("[hx-history-elt],[data-hx-history-elt]")||getDocument().body}function saveToHistoryCache(e,t,n,r){for(var a=parseJSON(localStorage.getItem("htmx-history-cache"))||[],i=0;i<a.length;i++)if(a[i].url===e){a.splice(i,1);break}for(a.push({url:e,content:t,title:n,scroll:r});a.length>htmx.config.historyCacheSize;)a.shift();for(;0<a.length;)try{localStorage.setItem("htmx-history-cache",JSON.stringify(a));break}catch(e){triggerErrorEvent(getDocument().body,"htmx:historyCacheError",{cause:e,cache:a}),a.shift()}}function getCachedHistory(e){for(var t=parseJSON(localStorage.getItem("htmx-history-cache"))||[],n=0;n<t.length;n++)if(t[n].url===e)return t[n];return null}function cleanInnerHtmlForHistory(e){var t=htmx.config.requestClass,e=e.cloneNode(!0);return forEach(findAll(e,"."+t),function(e){removeClassFromElement(e,t)}),e.innerHTML}function saveHistory(){var e=getHistoryElement(),t=currentPathForHistory||location.pathname+location.search;triggerEvent(getDocument().body,"htmx:beforeHistorySave",{path:t,historyElt:e}),htmx.config.historyEnabled&&history.replaceState({htmx:!0},getDocument().title,window.location.href),saveToHistoryCache(t,cleanInnerHtmlForHistory(e),getDocument().title,window.scrollY)}function pushUrlIntoHistory(e){htmx.config.historyEnabled&&history.pushState({htmx:!0},"",e),currentPathForHistory=e}function settleImmediately(e){forEach(e,function(e){e.call()})}function loadHistoryFromServer(n){var e=new XMLHttpRequest,r={path:n,xhr:e};triggerEvent(getDocument().body,"htmx:historyCacheMiss",r),e.open("GET",n,!0),e.setRequestHeader("HX-History-Restore-Request","true"),e.onload=function(){var e,t;200<=this.status&&this.status<400?(triggerEvent(getDocument().body,"htmx:historyCacheMissLoad",r),t=(t=makeFragment(this.response)).querySelector("[hx-history-elt],[data-hx-history-elt]")||t,swapInnerHTML(e=getHistoryElement(),t,t=makeSettleInfo(e)),settleImmediately(t.tasks),currentPathForHistory=n,triggerEvent(getDocument().body,"htmx:historyRestore",{path:n})):triggerErrorEvent(getDocument().body,"htmx:historyCacheMissLoadError",r)},e.send()}function restoreHistory(e){saveHistory();var t,n,r=getCachedHistory(e=e||location.pathname+location.search);r?(n=makeFragment(r.content),swapInnerHTML(t=getHistoryElement(),n,n=makeSettleInfo(t)),settleImmediately(n.tasks),document.title=r.title,window.scrollTo(0,r.scroll),currentPathForHistory=e,triggerEvent(getDocument().body,"htmx:historyRestore",{path:e})):htmx.config.refreshOnHistoryMiss?window.location.reload(!0):loadHistoryFromServer(e)}function shouldPush(e){var t=getClosestAttributeValue(e,"hx-push-url");return t&&"false"!==t||getInternalData(e).boosted&&getInternalData(e).pushURL}function getPushUrl(e){e=getClosestAttributeValue(e,"hx-push-url");return"true"===e||"false"===e?null:e}function addRequestIndicatorClasses(e){var t=getClosestAttributeValue(e,"hx-indicator"),t=t?querySelectorAllExt(e,t):[e];return forEach(t,function(e){e.classList.add.call(e.classList,htmx.config.requestClass)}),t}function removeRequestIndicatorClasses(e){forEach(e,function(e){e.classList.remove.call(e.classList,htmx.config.requestClass)})}function haveSeenNode(e,t){for(var n=0;n<e.length;n++)if(e[n].isSameNode(t))return 1}function shouldInclude(e){return""!==e.name&&null!=e.name&&!e.disabled&&("button"!==e.type&&"submit"!==e.type&&"image"!==e.tagName&&"reset"!==e.tagName&&"file"!==e.tagName&&("checkbox"!==e.type&&"radio"!==e.type||e.checked))}function processInputValue(t,n,r,e,a){var i,o,s;null==e||haveSeenNode(t,e)||(t.push(e),shouldInclude(e)&&(i=getRawAttribute(e,"name"),o=e.value,e.multiple&&(o=toArray(e.querySelectorAll("option:checked")).map(function(e){return e.value})),e.files&&(o=toArray(e.files)),null!=i&&null!=o&&((s=n[i])?Array.isArray(s)?Array.isArray(o)?n[i]=s.concat(o):s.push(o):Array.isArray(o)?n[i]=[s].concat(o):n[i]=[s,o]:n[i]=o),a&&validateElement(e,r)),matches(e,"form")&&forEach(e.elements,function(e){processInputValue(t,n,r,e,a)}))}function validateElement(e,t){e.willValidate&&(triggerEvent(e,"htmx:validation:validate"),e.checkValidity()||(t.push({elt:e,message:e.validationMessage,validity:e.validity}),triggerEvent(e,"htmx:validation:failed",{message:e.validationMessage,validity:e.validity})))}function getInputValues(e,t){var n=[],r={},a={},i=[],o=matches(e,"form")&&!0!==e.noValidate,t=("get"!==t&&processInputValue(n,a,i,closest(e,"form"),o),processInputValue(n,r,i,e,o),getClosestAttributeValue(e,"hx-include"));return t&&forEach(querySelectorAllExt(e,t),function(e){processInputValue(n,r,i,e,o),matches(e,"form")||forEach(e.querySelectorAll(INPUT_SELECTOR),function(e){processInputValue(n,r,i,e,o)})}),r=mergeObjects(r,a),{errors:i,values:r}}function appendParam(e,t,n){return""!==e&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n)}function urlEncode(e){var t,n,r="";for(t in e)e.hasOwnProperty(t)&&(n=e[t],Array.isArray(n)?forEach(n,function(e){r=appendParam(r,t,e)}):r=appendParam(r,t,n));return r}function makeFormData(e){var t,n,r=new FormData;for(t in e)e.hasOwnProperty(t)&&(n=e[t],Array.isArray(n)?forEach(n,function(e){r.append(t,e)}):r.append(t,n));return r}function getHeaders(e,t,n){t={"HX-Request":"true","HX-Trigger":getRawAttribute(e,"id"),"HX-Trigger-Name":getRawAttribute(e,"name"),"HX-Target":getAttributeValue(t,"id"),"HX-Current-URL":getDocument().location.href};return getValuesForElement(e,"hx-headers",!1,t),void 0!==n&&(t["HX-Prompt"]=n),t}function filterValues(t,e){var n,e=getClosestAttributeValue(e,"hx-params");return e?"none"===e?{}:"*"===e?t:0===e.indexOf("not ")?(forEach(e.substr(4).split(","),function(e){e=e.trim(),delete t[e]}),t):(n={},forEach(e.split(","),function(e){e=e.trim(),n[e]=t[e]}),n):t}function isAnchorLink(e){return getRawAttribute(e,"href")&&0<=getRawAttribute(e,"href").indexOf("#")}function getSwapSpecification(e){var t=getClosestAttributeValue(e,"hx-swap"),n={swapStyle:getInternalData(e).boosted?"innerHTML":htmx.config.defaultSwapStyle,swapDelay:htmx.config.defaultSwapDelay,settleDelay:htmx.config.defaultSettleDelay};if(getInternalData(e).boosted&&!isAnchorLink(e)&&(n.show="top"),t){var r=splitOnWhitespace(t);if(0<r.length){n.swapStyle=r[0];for(var a=1;a<r.length;a++){var i=r[a];0===i.indexOf("swap:")&&(n.swapDelay=parseInterval(i.substr(5))),0===i.indexOf("settle:")&&(n.settleDelay=parseInterval(i.substr(7))),0===i.indexOf("scroll:")&&(n.scroll=i.substr(7)),0===i.indexOf("show:")&&(n.show=i.substr(5))}}}return n}function encodeParamsForBody(t,n,r){var a=null;return withExtensions(n,function(e){null==a&&(a=e.encodeParameters(t,r,n))}),null!=a?a:("multipart/form-data"===getClosestAttributeValue(n,"hx-encoding")?makeFormData:urlEncode)(r)}function makeSettleInfo(e){return{tasks:[],elts:[e]}}function updateScrollState(e,t){var n=e[0],e=e[e.length-1];t.scroll&&("top"===t.scroll&&n&&(n.scrollTop=0),"bottom"===t.scroll&&e&&(e.scrollTop=e.scrollHeight)),t.show&&("top"===t.show&&n&&n.scrollIntoView(!0),"bottom"===t.show&&e&&e.scrollIntoView(!1))}function getValuesForElement(e,t,n,r){if(null==r&&(r={}),null==e)return r;var a=getAttributeValue(e,t);if(a){var i,o,s=a.trim(),a=n;for(o in 0===s.indexOf("javascript:")&&(s=s.substr(11),a=!0),0!==s.indexOf("{")&&(s="{"+s+"}"),i=a?maybeEval(e,function(){return Function("return ("+s+")")()},{}):parseJSON(s))i.hasOwnProperty(o)&&null==r[o]&&(r[o]=i[o])}return getValuesForElement(parentElt(e),t,n,r)}function maybeEval(e,t,n){return htmx.config.allowEval?t():(triggerErrorEvent(e,"htmx:evalDisallowedError"),n)}function getHXVarsForElement(e,t){return getValuesForElement(e,"hx-vars",!0,t)}function getHXValsForElement(e,t){return getValuesForElement(e,"hx-vals",!1,t)}function getExpressionVars(e){return mergeObjects(getHXVarsForElement(e),getHXValsForElement(e))}function safelySetHeaderValue(t,n,r){if(null!==r)try{t.setRequestHeader(n,r)}catch(e){t.setRequestHeader(n,encodeURIComponent(r)),t.setRequestHeader(n+"-URI-AutoEncoded","true")}}function getResponseURL(t){if(t.responseURL&&"undefined"!=typeof URL)try{var e=new URL(t.responseURL);return e.pathname+e.search}catch(e){triggerErrorEvent(getDocument().body,"htmx:badResponseUrl",{url:t.responseURL})}}function hasHeader(e,t){return e.getAllResponseHeaders().match(t)}function ajaxHelper(e,t,n){return n?n instanceof Element||isType(n,"String")?issueAjaxRequest(e,t,null,null,{targetOverride:resolveTarget(n)}):issueAjaxRequest(e,t,resolveTarget(n.source),n.event,{handler:n.handler,headers:n.headers,values:n.values,targetOverride:resolveTarget(n.target)}):issueAjaxRequest(e,t)}function hierarchyForElt(e){for(var t=[];e;)t.push(e),e=e.parentElement;return t}function issueAjaxRequest(e,t,r,n,a){var i,o=null,s=null,l=(a=null!=a?a:{},"undefined"!=typeof Promise&&(i=new Promise(function(e,t){o=e,s=t})),null==r&&(r=getDocument().body),a.handler||handleAjaxResponse);if(bodyContains(r)){var c=a.targetOverride||getTarget(r);if(null!=c){var u=getInternalData(r);if(u.requestInFlight)return h="last",(f=getInternalData(n))&&f.triggerSpec&&f.triggerSpec.queue&&(h=f.triggerSpec.queue),null==u.queuedRequests&&(u.queuedRequests=[]),void("first"===h&&0===u.queuedRequests.length||"all"===h?u.queuedRequests.push(function(){issueAjaxRequest(e,t,r,n)}):"last"===h&&(u.queuedRequests=[],u.queuedRequests.push(function(){issueAjaxRequest(e,t,r,n)})));u.requestInFlight=!0;var d=function(){u.requestInFlight=!1,null!=u.queuedRequests&&0<u.queuedRequests.length&&u.queuedRequests.shift()()},f=getClosestAttributeValue(r,"hx-prompt");if(f){var p=prompt(f);if(null===p||!triggerEvent(r,"htmx:prompt",{prompt:p,target:c}))return maybeCall(o),d(),i}var h=getClosestAttributeValue(r,"hx-confirm");if(h&&!confirm(h))return maybeCall(o),d(),i;var m=new XMLHttpRequest,g=getHeaders(r,c,p),f=(a.headers&&(g=mergeObjects(g,a.values)),getInputValues(r,e)),h=f.errors,p=f.values,f=(a.values&&(p=mergeObjects(p,a.values)),getExpressionVars(r)),a=mergeObjects(p,f),p=filterValues(a,r),f=("get"!==e&&null==getClosestAttributeValue(r,"hx-encoding")&&(g["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),null!=t&&""!==t||(t=getDocument().location.href),{parameters:p,unfilteredParameters:a,headers:g,target:c,verb:e,errors:h,path:t,triggeringEvent:n});if(!triggerEvent(r,"htmx:configRequest",f))return maybeCall(o),d(),i;if(t=f.path,e=f.verb,g=f.headers,p=f.parameters,(h=f.errors)&&0<h.length)return triggerEvent(r,"htmx:validation:halted",f),maybeCall(o),d(),i;var y,v,b,a=t.split("#"),h=a[0],a=a[1];for(v in"get"===e?(y=h,0!==Object.keys(p).length&&(y.indexOf("?")<0?y+="?":y+="&",y+=urlEncode(p),a&&(y+="#"+a)),m.open("GET",y,!0)):m.open(e.toUpperCase(),t,!0),m.overrideMimeType("text/html"),m.withCredentials=htmx.config.withCredentials,g)g.hasOwnProperty(v)&&(b=g[v],safelySetHeaderValue(m,v,b));var x={xhr:m,target:c,requestConfig:f,pathInfo:{path:t,finalPath:y,anchor:a}};if(m.onload=function(){try{var e=hierarchyForElt(r);if(l(r,x),removeRequestIndicatorClasses(_),triggerEvent(r,"htmx:afterRequest",x),triggerEvent(r,"htmx:afterOnLoad",x),!bodyContains(r)){for(var t=null;0<e.length&&null==t;){var n=e.shift();bodyContains(n)&&(t=n)}t&&(triggerEvent(t,"htmx:afterRequest",x),triggerEvent(t,"htmx:afterOnLoad",x))}maybeCall(o),d()}catch(e){throw triggerErrorEvent(r,"htmx:onLoadError",mergeObjects({error:e},x)),e}},m.onerror=function(){removeRequestIndicatorClasses(_),triggerErrorEvent(r,"htmx:afterRequest",x),triggerErrorEvent(r,"htmx:sendError",x),maybeCall(s),d()},m.onabort=function(){removeRequestIndicatorClasses(_),triggerErrorEvent(r,"htmx:afterRequest",x),triggerErrorEvent(r,"htmx:sendAbort",x),maybeCall(s),d()},!triggerEvent(r,"htmx:beforeRequest",x))return maybeCall(o),d(),i;var _=addRequestIndicatorClasses(r);return forEach(["loadstart","loadend","progress","abort"],function(t){forEach([m,m.upload],function(e){e.addEventListener(t,function(e){triggerEvent(r,"htmx:xhr:"+t,{lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total})})})}),triggerEvent(r,"htmx:beforeSend",x),m.send("get"===e?null:encodeParamsForBody(m,r,p)),i}triggerErrorEvent(r,"htmx:targetError",{target:getAttributeValue(r,"hx-target")})}}function handleAjaxResponse(o,s){var l,c,u,d,e,f=s.xhr,p=s.target;triggerEvent(o,"htmx:beforeOnLoad",s)&&(hasHeader(f,/HX-Trigger:/i)&&handleTrigger(f,"HX-Trigger",o),hasHeader(f,/HX-Push:/i)&&(l=f.getResponseHeader("HX-Push")),hasHeader(f,/HX-Redirect:/i)?window.location.href=f.getResponseHeader("HX-Redirect"):hasHeader(f,/HX-Refresh:/i)&&"true"===f.getResponseHeader("HX-Refresh")?location.reload():(c=shouldPush(o)||l,200<=f.status&&f.status<400?(286===f.status&&cancelPolling(o),204!==f.status&&triggerEvent(p,"htmx:beforeSwap",s)&&(u=f.response,withExtensions(o,function(e){u=e.transformResponse(u,f,o)}),c&&saveHistory(),d=getSwapSpecification(o),p.classList.add(htmx.config.swappingClass),e=function(){try{var e=document.activeElement,t={};try{t={elt:e,start:e?e.selectionStart:null,end:e?e.selectionEnd:null}}catch(e){}var n,r,a=makeSettleInfo(p),i=(selectAndSwap(d.swapStyle,p,o,u,a),!t.elt||bodyContains(t.elt)||!t.elt.id||(n=document.getElementById(t.elt.id))&&(t.start&&n.setSelectionRange&&n.setSelectionRange(t.start,t.end),n.focus()),p.classList.remove(htmx.config.swappingClass),forEach(a.elts,function(e){e.classList&&e.classList.add(htmx.config.settlingClass),triggerEvent(e,"htmx:afterSwap",s)}),s.pathInfo.anchor&&(location.hash=s.pathInfo.anchor),hasHeader(f,/HX-Trigger-After-Swap:/i)&&(bodyContains(r=o)||(r=getDocument().body),handleTrigger(f,"HX-Trigger-After-Swap",r)),function(){var e;forEach(a.tasks,function(e){e.call()}),forEach(a.elts,function(e){e.classList&&e.classList.remove(htmx.config.settlingClass),triggerEvent(e,"htmx:afterSettle",s)}),c&&(pushUrlIntoHistory(e=l||getPushUrl(o)||getResponseURL(f)||s.pathInfo.finalPath||s.pathInfo.path),triggerEvent(getDocument().body,"htmx:pushedIntoHistory",{path:e})),updateScrollState(a.elts,d),hasHeader(f,/HX-Trigger-After-Settle:/i)&&(bodyContains(e=o)||(e=getDocument().body),handleTrigger(f,"HX-Trigger-After-Settle",e))});0<d.settleDelay?setTimeout(i,d.settleDelay):i()}catch(e){throw triggerErrorEvent(o,"htmx:swapError",s),e}},0<d.swapDelay?setTimeout(e,d.swapDelay):e())):triggerErrorEvent(o,"htmx:responseError",mergeObjects({error:"Response Status Error Code "+f.status+" from "+s.pathInfo.path},s))))}var extensions={};function extensionBase(){return{onEvent:function(e,t){return!0},transformResponse:function(e,t,n){return e},isInlineSwap:function(e){return!1},handleSwap:function(e,t,n,r){return!1},encodeParameters:function(e,t,n){return null}}}function defineExtension(e,t){extensions[e]=mergeObjects(extensionBase(),t)}function removeExtension(e){delete extensions[e]}function getExtensions(e,t,n){if(null==e)return t;null==t&&(t=[]),null==n&&(n=[]);var r=getAttributeValue(e,"hx-ext");return r&&forEach(r.split(","),function(e){"ignore:"==(e=e.replace(/ /g,"")).slice(0,7)?n.push(e.slice(7)):n.indexOf(e)<0&&((e=extensions[e])&&t.indexOf(e)<0&&t.push(e))}),getExtensions(parentElt(e),t,n)}function ready(e){"loading"!==getDocument().readyState?e():getDocument().addEventListener("DOMContentLoaded",e)}function insertIndicatorStyles(){!1!==htmx.config.includeIndicatorStyles&&getDocument().head.insertAdjacentHTML("beforeend","<style>                      ."+htmx.config.indicatorClass+"{opacity:0;transition: opacity 200ms ease-in;}                      ."+htmx.config.requestClass+" ."+htmx.config.indicatorClass+"{opacity:1}                      ."+htmx.config.requestClass+"."+htmx.config.indicatorClass+"{opacity:1}                    </style>")}function getMetaConfig(){var e=getDocument().querySelector('meta[name="htmx-config"]');return e?parseJSON(e.content):null}function mergeMetaConfig(){var e=getMetaConfig();e&&(htmx.config=mergeObjects(htmx.config,e))}return ready(function(){mergeMetaConfig(),insertIndicatorStyles();var e=getDocument().body;processNode(e),window.onpopstate=function(e){e.state&&e.state.htmx&&restoreHistory()},setTimeout(function(){triggerEvent(e,"htmx:load",{})},0)}),htmx}),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("@popperjs/core")):"function"==typeof define&&define.amd?define(["@popperjs/core"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).bootstrap=t(e.Popper)}(this,function(e){"use strict";function N(e){if(e&&e.__esModule)return e;const t=Object.create(null);if(e)for(const r in e){var n;"default"!==r&&(n=Object.getOwnPropertyDescriptor(e,r),Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:()=>e[r]}))}return t.default=e,Object.freeze(t)}const F=N(e),z=1e3,j="transitionend",q=t=>{let n=t.getAttribute("data-bs-target");if(!n||"#"===n){let e=t.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e="#"+e.split("#")[1]),n=e&&"#"!==e?e.trim():null}return n},H=e=>{e=q(e);return e&&document.querySelector(e)?e:null},i=e=>{e=q(e);return e?document.querySelector(e):null},B=e=>{e.dispatchEvent(new Event(j))},o=e=>!(!e||"object"!=typeof e)&&void 0!==(e=void 0!==e.jquery?e[0]:e).nodeType,r=e=>o(e)?e.jquery?e[0]:e:"string"==typeof e&&0<e.length?document.querySelector(e):null,n=(r,a,i)=>{Object.keys(i).forEach(e=>{var t=i[e],n=a[e],n=n&&o(n)?"element":null==(n=n)?""+n:{}.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(t).test(n))throw new TypeError(r.toUpperCase()+`: Option "${e}" provided type "${n}" but expected type "${t}".`)})},a=e=>!(!o(e)||0===e.getClientRects().length)&&"visible"===getComputedStyle(e).getPropertyValue("visibility"),s=e=>!e||e.nodeType!==Node.ELEMENT_NODE||(!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled"))),U=e=>{return document.documentElement.attachShadow?"function"==typeof e.getRootNode?(t=e.getRootNode())instanceof ShadowRoot?t:null:e instanceof ShadowRoot?e:e.parentNode?U(e.parentNode):null:null;var t},V=()=>{},d=e=>{e.offsetHeight},Y=()=>{var e=window["jQuery"];return e&&!document.body.hasAttribute("data-bs-no-jquery")?e:null},$=[],l=()=>"rtl"===document.documentElement.dir;e=r=>{var e;e=()=>{const e=Y();if(e){const t=r.NAME,n=e.fn[t];e.fn[t]=r.jQueryInterface,e.fn[t].Constructor=r,e.fn[t].noConflict=()=>(e.fn[t]=n,r.jQueryInterface)}},"loading"===document.readyState?($.length||document.addEventListener("DOMContentLoaded",()=>{$.forEach(e=>e())}),$.push(e)):e()};const c=e=>{"function"==typeof e&&e()},G=(n,r,e=!0)=>{if(e){e=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);var e=Number.parseFloat(t),r=Number.parseFloat(n);return e||r?(t=t.split(",")[0],n=n.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(n))*z):0})(r)+5;let t=!1;const a=({target:e})=>{e===r&&(t=!0,r.removeEventListener(j,a),c(n))};r.addEventListener(j,a),setTimeout(()=>{t||B(r)},e)}else c(n)},W=(e,t,n,r)=>{let a=e.indexOf(t);if(-1===a)return e[!n&&r?e.length-1:0];t=e.length;return a+=n?1:-1,r&&(a=(a+t)%t),e[Math.max(0,Math.min(a,t-1))]},Z=/[^.]*(?=\..*)\.|.*/,X=/\..*/,J=/::\d+$/,K={};let Q=1;const ee={mouseenter:"mouseover",mouseleave:"mouseout"},te=/^(mouseenter|mouseleave)/i,ne=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function re(e,t){return t&&t+"::"+Q++||e.uidEvent||Q++}function ae(e){var t=re(e);return e.uidEvent=t,K[t]=K[t]||{},K[t]}function ie(n,r,a=null){var i=Object.keys(n);for(let e=0,t=i.length;e<t;e++){var o=n[i[e]];if(o.originalHandler===r&&o.delegationSelector===a)return o}return null}function oe(e,t,n){var r="string"==typeof t,n=r?n:t;let a=ce(e);t=ne.has(a);return[r,n,a=t?a:e]}function se(e,t,n,r,a){if("string"==typeof t&&e){n||(n=r,r=null),te.test(t)&&(i=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)},r?r=i(r):n=i(n));var[i,o,s]=oe(t,n,r);const p=ae(e),h=p[s]||(p[s]={}),m=ie(h,o,i?n:null);if(m)m.oneOff=m.oneOff&&a;else{var l,c,u,d,f,t=re(o,t.replace(Z,""));const g=i?(u=e,d=n,f=r,function n(r){var a=u.querySelectorAll(d);for(let t=r["target"];t&&t!==this;t=t.parentNode)for(let e=a.length;e--;)if(a[e]===t)return r.delegateTarget=t,n.oneOff&&y.off(u,r.type,d,f),f.apply(t,[r]);return null}):(l=e,c=n,function e(t){return t.delegateTarget=l,e.oneOff&&y.off(l,t.type,c),c.apply(l,[t])});g.delegationSelector=i?n:null,g.originalHandler=o,g.oneOff=a,g.uidEvent=t,h[t]=g,e.addEventListener(s,g,i)}}}function le(e,t,n,r,a){r=ie(t[n],r,a);r&&(e.removeEventListener(n,r,Boolean(a)),delete t[n][r.uidEvent])}function ce(e){return e=e.replace(X,""),ee[e]||e}const y={on(e,t,n,r){se(e,t,n,r,!1)},one(e,t,n,r){se(e,t,n,r,!0)},off(o,s,e,t){if("string"==typeof s&&o){const[n,r,a]=oe(s,e,t),i=a!==s,l=ae(o);t=s.startsWith(".");if(void 0!==r)l&&l[a]&&le(o,l,a,r,n?e:null);else{t&&Object.keys(l).forEach(e=>{{var t=o,n=l,r=e,a=s.slice(1);const i=n[r]||{};return void Object.keys(i).forEach(e=>{e.includes(a)&&(e=i[e],le(t,n,r,e.originalHandler,e.delegationSelector))})}});const c=l[a]||{};Object.keys(c).forEach(e=>{var t=e.replace(J,"");i&&!s.includes(t)||(t=c[e],le(o,l,a,t.originalHandler,t.delegationSelector))})}}},trigger(e,t,n){if("string"!=typeof t||!e)return null;const r=Y();var a=ce(t),i=t!==a,o=ne.has(a);let s,l=!0,c=!0,u=!1,d=null;return i&&r&&(s=r.Event(t,n),r(e).trigger(s),l=!s.isPropagationStopped(),c=!s.isImmediatePropagationStopped(),u=s.isDefaultPrevented()),o?(d=document.createEvent("HTMLEvents")).initEvent(a,l,!0):d=new CustomEvent(t,{bubbles:l,cancelable:!0}),void 0!==n&&Object.keys(n).forEach(e=>{Object.defineProperty(d,e,{get(){return n[e]}})}),u&&d.preventDefault(),c&&e.dispatchEvent(d),d.defaultPrevented&&void 0!==s&&s.preventDefault(),d}},u=new Map,f={set(e,t,n){u.has(e)||u.set(e,new Map);const r=u.get(e);r.has(t)||0===r.size?r.set(t,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`)},get(e,t){return u.has(e)&&u.get(e).get(t)||null},remove(e,t){if(u.has(e)){const n=u.get(e);n.delete(t),0===n.size&&u.delete(e)}}};class t{constructor(e){(e=r(e))&&(this._element=e,f.set(this._element,this.constructor.DATA_KEY,this))}dispose(){f.remove(this._element,this.constructor.DATA_KEY),y.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach(e=>{this[e]=null})}_queueCallback(e,t,n=!0){G(e,t,n)}static getInstance(e){return f.get(r(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.1.3"}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return"bs."+this.NAME}static get EVENT_KEY(){return"."+this.DATA_KEY}}var ue=(n,r="hide")=>{var e="click.dismiss"+n.EVENT_KEY;const a=n.NAME;y.on(document,e,`[data-bs-dismiss="${a}"]`,function(e){if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),!s(this)){e=i(this)||this.closest("."+a);const t=n.getOrCreateInstance(e);t[r]()}})};class de extends t{static get NAME(){return"alert"}close(){var e;y.trigger(this._element,"close.bs.alert").defaultPrevented||(this._element.classList.remove("show"),e=this._element.classList.contains("fade"),this._queueCallback(()=>this._destroyElement(),this._element,e))}_destroyElement(){this._element.remove(),y.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(t){return this.each(function(){const e=de.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}})}}ue(de,"close"),e(de);const fe='[data-bs-toggle="button"]';class pe extends t{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each(function(){const e=pe.getOrCreateInstance(this);"toggle"===t&&e[t]()})}}function he(e){return"true"===e||"false"!==e&&(e===Number(e).toString()?Number(e):""===e||"null"===e?null:e)}function me(e){return e.replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}y.on(document,"click.bs.button.data-api",fe,e=>{e.preventDefault();e=e.target.closest(fe);const t=pe.getOrCreateInstance(e);t.toggle()}),e(pe);const p={setDataAttribute(e,t,n){e.setAttribute("data-bs-"+me(t),n)},removeDataAttribute(e,t){e.removeAttribute("data-bs-"+me(t))},getDataAttributes(n){if(!n)return{};const r={};return Object.keys(n.dataset).filter(e=>e.startsWith("bs")).forEach(e=>{let t=e.replace(/^bs/,"");t=t.charAt(0).toLowerCase()+t.slice(1,t.length),r[t]=he(n.dataset[e])}),r},getDataAttribute(e,t){return he(e.getAttribute("data-bs-"+me(t)))},offset(e){e=e.getBoundingClientRect();return{top:e.top+window.pageYOffset,left:e.left+window.pageXOffset}},position(e){return{top:e.offsetTop,left:e.offsetLeft}}},h={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(e=>e.matches(t))},parents(e,t){const n=[];let r=e.parentNode;for(;r&&r.nodeType===Node.ELEMENT_NODE&&3!==r.nodeType;)r.matches(t)&&n.push(r),r=r.parentNode;return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){var t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>e+':not([tabindex^="-"])').join(", ");return this.find(t,e).filter(e=>!s(e)&&a(e))}};var m=".bs.carousel";const ge={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},ye={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},g="next",v="prev",b="left",x="right",ve={ArrowLeft:x,ArrowRight:b},be="slid"+m;const _="active",xe=".active.carousel-item";class w extends t{constructor(e,t){super(e),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(t),this._indicatorsElement=h.findOne(".carousel-indicators",this._element),this._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return ge}static get NAME(){return"carousel"}next(){this._slide(g)}nextWhenVisible(){!document.hidden&&a(this._element)&&this.next()}prev(){this._slide(v)}pause(e){e||(this._isPaused=!0),h.findOne(".carousel-item-next, .carousel-item-prev",this._element)&&(B(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(e){this._activeElement=h.findOne(xe,this._element);var t=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||e<0))if(this._isSliding)y.one(this._element,be,()=>this.to(e));else{if(t===e)return this.pause(),void this.cycle();t=t<e?g:v;this._slide(t,this._items[e])}}_getConfig(e){return e={...ge,...p.getDataAttributes(this._element),..."object"==typeof e?e:{}},n("carousel",e,ye),e}_handleSwipe(){var e=Math.abs(this.touchDeltaX);e<=40||(e=e/this.touchDeltaX,this.touchDeltaX=0,e&&this._slide(0<e?x:b))}_addEventListeners(){this._config.keyboard&&y.on(this._element,"keydown.bs.carousel",e=>this._keydown(e)),"hover"===this._config.pause&&(y.on(this._element,"mouseenter.bs.carousel",e=>this.pause(e)),y.on(this._element,"mouseleave.bs.carousel",e=>this.cycle(e))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const t=e=>this._pointerEvent&&("pen"===e.pointerType||"touch"===e.pointerType),n=e=>{t(e)?this.touchStartX=e.clientX:this._pointerEvent||(this.touchStartX=e.touches[0].clientX)},r=e=>{this.touchDeltaX=e.touches&&1<e.touches.length?0:e.touches[0].clientX-this.touchStartX},a=e=>{t(e)&&(this.touchDeltaX=e.clientX-this.touchStartX),this._handleSwipe(),"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(e=>this.cycle(e),500+this._config.interval))};h.find(".carousel-item img",this._element).forEach(e=>{y.on(e,"dragstart.bs.carousel",e=>e.preventDefault())}),this._pointerEvent?(y.on(this._element,"pointerdown.bs.carousel",e=>n(e)),y.on(this._element,"pointerup.bs.carousel",e=>a(e)),this._element.classList.add("pointer-event")):(y.on(this._element,"touchstart.bs.carousel",e=>n(e)),y.on(this._element,"touchmove.bs.carousel",e=>r(e)),y.on(this._element,"touchend.bs.carousel",e=>a(e)))}_keydown(e){var t;/input|textarea/i.test(e.target.tagName)||(t=ve[e.key])&&(e.preventDefault(),this._slide(t))}_getItemIndex(e){return this._items=e&&e.parentNode?h.find(".carousel-item",e.parentNode):[],this._items.indexOf(e)}_getItemByOrder(e,t){e=e===g;return W(this._items,t,e,this._config.wrap)}_triggerSlideEvent(e,t){var n=this._getItemIndex(e),r=this._getItemIndex(h.findOne(xe,this._element));return y.trigger(this._element,"slide.bs.carousel",{relatedTarget:e,direction:t,from:r,to:n})}_setActiveIndicatorElement(t){if(this._indicatorsElement){const e=h.findOne(".active",this._indicatorsElement),n=(e.classList.remove(_),e.removeAttribute("aria-current"),h.find("[data-bs-target]",this._indicatorsElement));for(let e=0;e<n.length;e++)if(Number.parseInt(n[e].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(t)){n[e].classList.add(_),n[e].setAttribute("aria-current","true");break}}}_updateInterval(){const e=this._activeElement||h.findOne(xe,this._element);var t;e&&((t=Number.parseInt(e.getAttribute("data-bs-interval"),10))?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=t):this._config.interval=this._config.defaultInterval||this._config.interval)}_slide(e,t){e=this._directionToOrder(e);const n=h.findOne(xe,this._element),r=this._getItemIndex(n),a=t||this._getItemByOrder(e,n),i=this._getItemIndex(a);var t=Boolean(this._interval),o=e===g;const s=o?"carousel-item-start":"carousel-item-end",l=o?"carousel-item-next":"carousel-item-prev",c=this._orderToDirection(e);if(a&&a.classList.contains(_))this._isSliding=!1;else if(!this._isSliding){o=this._triggerSlideEvent(a,c);if(!o.defaultPrevented&&n&&a){this._isSliding=!0,t&&this.pause(),this._setActiveIndicatorElement(a),this._activeElement=a;const u=()=>{y.trigger(this._element,be,{relatedTarget:a,direction:c,from:r,to:i})};this._element.classList.contains("slide")?(a.classList.add(l),d(a),n.classList.add(s),a.classList.add(s),this._queueCallback(()=>{a.classList.remove(s,l),a.classList.add(_),n.classList.remove(_,l,s),this._isSliding=!1,setTimeout(u,0)},n,!0)):(n.classList.remove(_),a.classList.add(_),this._isSliding=!1,u()),t&&this.cycle()}}}_directionToOrder(e){return[x,b].includes(e)?l()?e===b?v:g:e===b?g:v:e}_orderToDirection(e){return[g,v].includes(e)?l()?e===v?b:x:e===v?x:b:e}static carouselInterface(e,t){const n=w.getOrCreateInstance(e,t);let r=n["_config"];"object"==typeof t&&(r={...r,...t});e="string"==typeof t?t:r.slide;if("number"==typeof t)n.to(t);else if("string"==typeof e){if(void 0===n[e])throw new TypeError(`No method named "${e}"`);n[e]()}else r.interval&&r.ride&&(n.pause(),n.cycle())}static jQueryInterface(e){return this.each(function(){w.carouselInterface(this,e)})}static dataApiClickHandler(e){const t=i(this);if(t&&t.classList.contains("carousel")){const r={...p.getDataAttributes(t),...p.getDataAttributes(this)};var n=this.getAttribute("data-bs-slide-to");n&&(r.interval=!1),w.carouselInterface(t,r),n&&w.getInstance(t).to(n),e.preventDefault()}}}y.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",w.dataApiClickHandler),y.on(window,"load.bs.carousel.data-api",()=>{var n=h.find('[data-bs-ride="carousel"]');for(let e=0,t=n.length;e<t;e++)w.carouselInterface(n[e],w.getInstance(n[e]))}),e(w);const _e="bs.collapse";_e;const we={toggle:!0,parent:null},Te={toggle:"boolean",parent:"(null|element)"};const T="collapse",ke="collapsing",Ae=`:scope .${T} .`+T,Me='[data-bs-toggle="collapse"]';class k extends t{constructor(e,t){super(e),this._isTransitioning=!1,this._config=this._getConfig(t),this._triggerArray=[];var n=h.find(Me);for(let e=0,t=n.length;e<t;e++){var r=n[e],a=H(r),i=h.find(a).filter(e=>e===this._element);null!==a&&i.length&&(this._selector=a,this._triggerArray.push(r))}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return we}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(!this._isTransitioning&&!this._isShown()){let e=[],t;if(this._config.parent){const a=h.find(Ae,this._config.parent);e=h.find(".collapse.show, .collapse.collapsing",this._config.parent).filter(e=>!a.includes(e))}const r=h.findOne(this._selector);if(e.length){var n=e.find(e=>r!==e);if((t=n?k.getInstance(n):null)&&t._isTransitioning)return}n=y.trigger(this._element,"show.bs.collapse");if(!n.defaultPrevented){e.forEach(e=>{r!==e&&k.getOrCreateInstance(e,{toggle:!1}).hide(),t||f.set(e,_e,null)});const i=this._getDimension();this._element.classList.remove(T),this._element.classList.add(ke),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;n="scroll"+(i[0].toUpperCase()+i.slice(1));this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ke),this._element.classList.add(T,"show"),this._element.style[i]="",y.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[i]=this._element[n]+"px"}}}hide(){if(!this._isTransitioning&&this._isShown()){var e=y.trigger(this._element,"hide.bs.collapse");if(!e.defaultPrevented){var e=this._getDimension(),t=(this._element.style[e]=this._element.getBoundingClientRect()[e]+"px",d(this._element),this._element.classList.add(ke),this._element.classList.remove(T,"show"),this._triggerArray.length);for(let e=0;e<t;e++){var n=this._triggerArray[e],r=i(n);r&&!this._isShown(r)&&this._addAriaAndCollapsedClass([n],!1)}this._isTransitioning=!0;this._element.style[e]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ke),this._element.classList.add(T),y.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}}}_isShown(e=this._element){return e.classList.contains("show")}_getConfig(e){return(e={...we,...p.getDataAttributes(this._element),...e}).toggle=Boolean(e.toggle),e.parent=r(e.parent),n("collapse",e,Te),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(this._config.parent){const t=h.find(Ae,this._config.parent);h.find(Me,this._config.parent).filter(e=>!t.includes(e)).forEach(e=>{var t=i(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))})}}_addAriaAndCollapsedClass(e,t){e.length&&e.forEach(e=>{t?e.classList.remove("collapsed"):e.classList.add("collapsed"),e.setAttribute("aria-expanded",t)})}static jQueryInterface(n){return this.each(function(){const e={},t=("string"==typeof n&&/show|hide/.test(n)&&(e.toggle=!1),k.getOrCreateInstance(this,e));if("string"==typeof n){if(void 0===t[n])throw new TypeError(`No method named "${n}"`);t[n]()}})}}y.on(document,"click.bs.collapse.data-api",Me,function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();e=H(this);const t=h.find(e);t.forEach(e=>{k.getOrCreateInstance(e,{toggle:!1}).toggle()})}),e(k);const Ee="dropdown";var m=".bs.dropdown",A=".data-api";const Se="Escape",Le="ArrowUp",Ce="ArrowDown",Oe=new RegExp(Le+`|${Ce}|Escape`);var M="click"+m+A,m="keydown"+m+A;const E="show",S='[data-bs-toggle="dropdown"]',De=".dropdown-menu",Ie=l()?"top-end":"top-start",Re=l()?"top-start":"top-end",Pe=l()?"bottom-end":"bottom-start",Ne=l()?"bottom-start":"bottom-end",Fe=l()?"left-start":"right-start",ze=l()?"right-start":"left-start",je={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},qe={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class L extends t{constructor(e,t){super(e),this._popper=null,this._config=this._getConfig(t),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar()}static get Default(){return je}static get DefaultType(){return qe}static get NAME(){return Ee}toggle(){return this._isShown()?this.hide():this.show()}show(){if(!s(this._element)&&!this._isShown(this._menu)){var e={relatedTarget:this._element},t=y.trigger(this._element,"show.bs.dropdown",e);if(!t.defaultPrevented){const n=L.getParentFromElement(this._element);this._inNavbar?p.setDataAttribute(this._menu,"popper","none"):this._createPopper(n),"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav")&&[].concat(...document.body.children).forEach(e=>y.on(e,"mouseover",V)),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(E),this._element.classList.add(E),y.trigger(this._element,"shown.bs.dropdown",e)}}}hide(){var e;!s(this._element)&&this._isShown(this._menu)&&(e={relatedTarget:this._element},this._completeHide(e))}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){y.trigger(this._element,"hide.bs.dropdown",e).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(e=>y.off(e,"mouseover",V)),this._popper&&this._popper.destroy(),this._menu.classList.remove(E),this._element.classList.remove(E),this._element.setAttribute("aria-expanded","false"),p.removeDataAttribute(this._menu,"popper"),y.trigger(this._element,"hidden.bs.dropdown",e))}_getConfig(e){if(e={...this.constructor.Default,...p.getDataAttributes(this._element),...e},n(Ee,e,this.constructor.DefaultType),"object"!=typeof e.reference||o(e.reference)||"function"==typeof e.reference.getBoundingClientRect)return e;throw new TypeError(Ee.toUpperCase()+': Option "reference" provided type "object" without a required "getBoundingClientRect" method.')}_createPopper(e){if(void 0===F)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=e:o(this._config.reference)?t=r(this._config.reference):"object"==typeof this._config.reference&&(t=this._config.reference);const n=this._getPopperConfig();e=n.modifiers.find(e=>"applyStyles"===e.name&&!1===e.enabled);this._popper=F.createPopper(t,this._menu,n),e&&p.setDataAttribute(this._menu,"popper","static")}_isShown(e=this._element){return e.classList.contains(E)}_getMenuElement(){return h.next(this._element,De)[0]}_getPlacement(){const e=this._element.parentNode;if(e.classList.contains("dropend"))return Fe;if(e.classList.contains("dropstart"))return ze;var t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?Re:Ie:t?Ne:Pe}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const t=this._config["offset"];return"string"==typeof t?t.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return"static"===this._config.display&&(e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,..."function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:t}){const n=h.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(a);n.length&&W(n,t,e===Ce,!n.includes(t)).focus()}static jQueryInterface(t){return this.each(function(){const e=L.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(n){if(!n||2!==n.button&&("keyup"!==n.type||"Tab"===n.key)){var r=h.find(S);for(let e=0,t=r.length;e<t;e++){const i=L.getInstance(r[e]);if(i&&!1!==i._config.autoClose&&i._isShown()){const o={relatedTarget:i._element};if(n){const s=n.composedPath();var a=s.includes(i._menu);if(s.includes(i._element)||"inside"===i._config.autoClose&&!a||"outside"===i._config.autoClose&&a)continue;if(i._menu.contains(n.target)&&("keyup"===n.type&&"Tab"===n.key||/input|select|option|textarea|form/i.test(n.target.tagName)))continue;"click"===n.type&&(o.clickEvent=n)}i._completeHide(o)}}}}static getParentFromElement(e){return i(e)||e.parentNode}static dataApiKeydownHandler(e){if(/input|textarea/i.test(e.target.tagName)?!("Space"===e.key||e.key!==Se&&(e.key!==Ce&&e.key!==Le||e.target.closest(De))):Oe.test(e.key)){var t=this.classList.contains(E);if((t||e.key!==Se)&&(e.preventDefault(),e.stopPropagation(),!s(this))){var n=this.matches(S)?this:h.prev(this,S)[0];const r=L.getOrCreateInstance(n);if(e.key!==Se)return e.key===Le||e.key===Ce?(t||r.show(),void r._selectMenuItem(e)):void(t&&"Space"!==e.key||L.clearMenus());r.hide()}}}}y.on(document,m,S,L.dataApiKeydownHandler),y.on(document,m,De,L.dataApiKeydownHandler),y.on(document,M,L.clearMenus),y.on(document,"keyup.bs.dropdown.data-api",L.clearMenus),y.on(document,M,S,function(e){e.preventDefault(),L.getOrCreateInstance(this).toggle()}),e(L);const He=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Be=".sticky-top";class Ue{constructor(){this._element=document.body}getWidth(){var e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",e=>e+t),this._setElementAttributes(He,"paddingRight",e=>e+t),this._setElementAttributes(Be,"marginRight",e=>e-t)}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,r){const a=this.getWidth();this._applyManipulationCallback(e,e=>{var t;e!==this._element&&window.innerWidth>e.clientWidth+a||(this._saveInitialAttribute(e,n),t=window.getComputedStyle(e)[n],e.style[n]=r(Number.parseFloat(t))+"px")})}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(He,"paddingRight"),this._resetElementAttributes(Be,"marginRight")}_saveInitialAttribute(e,t){var n=e.style[t];n&&p.setDataAttribute(e,t,n)}_resetElementAttributes(e,n){this._applyManipulationCallback(e,e=>{var t=p.getDataAttribute(e,n);void 0===t?e.style.removeProperty(n):(p.removeDataAttribute(e,n),e.style[n]=t)})}_applyManipulationCallback(e,t){o(e)?t(e):h.find(e,this._element).forEach(t)}isOverflowing(){return 0<this.getWidth()}}const Ve={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},Ye={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},$e="mousedown.bs.backdrop";class Ge{constructor(e){this._config=this._getConfig(e),this._isAppended=!1,this._element=null}show(e){this._config.isVisible?(this._append(),this._config.isAnimated&&d(this._getElement()),this._getElement().classList.add("show"),this._emulateAnimation(()=>{c(e)})):c(e)}hide(e){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),c(e)})):c(e)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_getConfig(e){return(e={...Ve,..."object"==typeof e?e:{}}).rootElement=r(e.rootElement),n("backdrop",e,Ye),e}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),y.on(this._getElement(),$e,()=>{c(this._config.clickCallback)}),this._isAppended=!0)}dispose(){this._isAppended&&(y.off(this._element,$e),this._element.remove(),this._isAppended=!1)}_emulateAnimation(e){G(e,this._getElement(),this._config.isAnimated)}}const We={trapElement:null,autofocus:!0},Ze={trapElement:"element",autofocus:"boolean"};const Xe=".bs.focustrap";Xe,Xe;class Je{constructor(e){this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}activate(){const{trapElement:e,autofocus:t}=this._config;this._isActive||(t&&e.focus(),y.off(document,Xe),y.on(document,"focusin.bs.focustrap",e=>this._handleFocusin(e)),y.on(document,"keydown.tab.bs.focustrap",e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,y.off(document,Xe))}_handleFocusin(e){e=e.target;const t=this._config["trapElement"];if(e!==document&&e!==t&&!t.contains(e)){const n=h.focusableChildren(t);(0===n.length?t:"backward"===this._lastTabNavDirection?n[n.length-1]:n[0]).focus()}}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?"backward":"forward")}_getConfig(e){return e={...We,..."object"==typeof e?e:{}},n("focustrap",e,Ze),e}}const C=".bs.modal";const Ke={backdrop:!0,keyboard:!0,focus:!0},Qe={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},et=(C,C,"hidden"+C),tt="show"+C,nt=(C,"resize"+C),rt="click.dismiss"+C,at="keydown.dismiss"+C,it=(C,"mousedown.dismiss"+C);C;const ot="modal-open",st="modal-static";class O extends t{constructor(e,t){super(e),this._config=this._getConfig(t),this._dialog=h.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new Ue}static get Default(){return Ke}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||y.trigger(this._element,tt,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(ot),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),y.on(this._dialog,it,()=>{y.one(this._element,"mouseup.dismiss.bs.modal",e=>{e.target===this._element&&(this._ignoreBackdropClick=!0)})}),this._showBackdrop(()=>this._showElement(e)))}hide(){var e;!this._isShown||this._isTransitioning||y.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,(e=this._isAnimated())&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove("show"),y.off(this._element,rt),y.off(this._dialog,it),this._queueCallback(()=>this._hideModal(),this._element,e))}dispose(){[window,this._dialog].forEach(e=>y.off(e,C)),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ge({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Je({trapElement:this._element})}_getConfig(e){return e={...Ke,...p.getDataAttributes(this._element),..."object"==typeof e?e:{}},n("modal",e,Qe),e}_showElement(e){var t=this._isAnimated();const n=h.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,n&&(n.scrollTop=0),t&&d(this._element),this._element.classList.add("show");this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,y.trigger(this._element,"shown.bs.modal",{relatedTarget:e})},this._dialog,t)}_setEscapeEvent(){this._isShown?y.on(this._element,at,e=>{this._config.keyboard&&"Escape"===e.key?(e.preventDefault(),this.hide()):this._config.keyboard||"Escape"!==e.key||this._triggerBackdropTransition()}):y.off(this._element,at)}_setResizeEvent(){this._isShown?y.on(window,nt,()=>this._adjustDialog()):y.off(window,nt)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(ot),this._resetAdjustments(),this._scrollBar.reset(),y.trigger(this._element,et)})}_showBackdrop(e){y.on(this._element,rt,e=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:e.target===e.currentTarget&&(!0===this._config.backdrop?this.hide():"static"===this._config.backdrop&&this._triggerBackdropTransition())}),this._backdrop.show(e)}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){var e=y.trigger(this._element,"hidePrevented.bs.modal");if(!e.defaultPrevented){const{classList:t,scrollHeight:n,style:r}=this._element,a=n>document.documentElement.clientHeight;!a&&"hidden"===r.overflowY||t.contains(st)||(a||(r.overflowY="hidden"),t.add(st),this._queueCallback(()=>{t.remove(st),a||this._queueCallback(()=>{r.overflowY=""},this._dialog)},this._dialog),this._element.focus())}}_adjustDialog(){var e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),n=0<t;(!n&&e&&!l()||n&&!e&&l())&&(this._element.style.paddingLeft=t+"px"),(n&&!e&&!l()||!n&&e&&l())&&(this._element.style.paddingRight=t+"px")}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,n){return this.each(function(){const e=O.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](n)}})}}y.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(e){const t=i(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),y.one(t,tt,e=>{e.defaultPrevented||y.one(t,et,()=>{a(this)&&this.focus()})});e=h.findOne(".modal.show");e&&O.getInstance(e).hide();const n=O.getOrCreateInstance(t);n.toggle(this)}),ue(O),e(O);A=".bs.offcanvas";const lt={backdrop:!0,keyboard:!0,scroll:!1},ct={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},ut=".offcanvas.show",dt="hidden"+A;class D extends t{constructor(e,t){super(e),this._config=this._getConfig(t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get NAME(){return"offcanvas"}static get Default(){return lt}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||y.trigger(this._element,"show.bs.offcanvas",{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||(new Ue).hide(),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add("show"),this._queueCallback(()=>{this._config.scroll||this._focustrap.activate(),y.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:e})},this._element,!0))}hide(){this._isShown&&!y.trigger(this._element,"hide.bs.offcanvas").defaultPrevented&&(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove("show"),this._backdrop.hide(),this._queueCallback(()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||(new Ue).reset(),y.trigger(this._element,dt)},this._element,!0))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_getConfig(e){return e={...lt,...p.getDataAttributes(this._element),..."object"==typeof e?e:{}},n("offcanvas",e,ct),e}_initializeBackDrop(){return new Ge({className:"offcanvas-backdrop",isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_initializeFocusTrap(){return new Je({trapElement:this._element})}_addEventListeners(){y.on(this._element,"keydown.dismiss.bs.offcanvas",e=>{this._config.keyboard&&"Escape"===e.key&&this.hide()})}static jQueryInterface(t){return this.each(function(){const e=D.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}})}}y.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(e){var t=i(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),!s(this)){y.one(t,dt,()=>{a(this)&&this.focus()});e=h.findOne(ut);e&&e!==t&&D.getInstance(e).hide();const n=D.getOrCreateInstance(t);n.toggle(this)}}),y.on(window,"load.bs.offcanvas.data-api",()=>h.find(ut).forEach(e=>D.getOrCreateInstance(e).show())),ue(D),e(D);const ft=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]);const pt=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,ht=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;m={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function mt(e,n,t){if(!e.length)return e;if(t&&"function"==typeof t)return t(e);const r=new window.DOMParser,a=r.parseFromString(e,"text/html");var i=[].concat(...a.body.querySelectorAll("*"));for(let e=0,t=i.length;e<t;e++){const s=i[e];var o=s.nodeName.toLowerCase();if(Object.keys(n).includes(o)){const l=[].concat(...s.attributes),c=[].concat(n["*"]||[],n[o]||[]);l.forEach(e=>{((e,t)=>{var n=e.nodeName.toLowerCase();if(t.includes(n))return!ft.has(n)||Boolean(pt.test(e.nodeValue)||ht.test(e.nodeValue));const r=t.filter(e=>e instanceof RegExp);for(let e=0,t=r.length;e<t;e++)if(r[e].test(n))return!0;return!1})(e,c)||s.removeAttribute(e.nodeName)})}else s.remove()}return a.body.innerHTML}M=".bs.tooltip";const gt=new Set(["sanitize","allowList","sanitizeFn"]),yt={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},vt={AUTO:"auto",TOP:"top",RIGHT:l()?"left":"right",BOTTOM:"bottom",LEFT:l()?"right":"left"},bt={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:m,popperConfig:null},xt={HIDE:"hide"+M,HIDDEN:"hidden"+M,SHOW:"show"+M,SHOWN:"shown"+M,INSERTED:"inserted"+M,CLICK:"click"+M,FOCUSIN:"focusin"+M,FOCUSOUT:"focusout"+M,MOUSEENTER:"mouseenter"+M,MOUSELEAVE:"mouseleave"+M},_t="fade";const I="show",wt="show",Tt=".tooltip-inner",kt="hide.bs.modal",At="hover";class R extends t{constructor(e,t){if(void 0===F)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(t),this.tip=null,this._setListeners()}static get Default(){return bt}static get NAME(){return"tooltip"}static get Event(){return xt}static get DefaultType(){return yt}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(e){if(this._isEnabled)if(e){const t=this._initializeOnDelegatedTarget(e);t._activeTrigger.click=!t._activeTrigger.click,t._isWithActiveTrigger()?t._enter(null,t):t._leave(null,t)}else this.getTipElement().classList.contains(I)?this._leave(null,this):this._enter(null,this)}dispose(){clearTimeout(this._timeout),y.off(this._element.closest(".modal"),kt,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(this.isWithContent()&&this._isEnabled){var e=y.trigger(this._element,this.constructor.Event.SHOW);const n=U(this._element);var t=(null===n?this._element.ownerDocument.documentElement:n).contains(this._element);if(!e.defaultPrevented&&t){"tooltip"===this.constructor.NAME&&this.tip&&this.getTitle()!==this.tip.querySelector(Tt).innerHTML&&(this._disposePopper(),this.tip.remove(),this.tip=null);const r=this.getTipElement();e=(e=>{for(;e+=Math.floor(1e6*Math.random()),document.getElementById(e););return e})(this.constructor.NAME),t=(r.setAttribute("id",e),this._element.setAttribute("aria-describedby",e),this._config.animation&&r.classList.add(_t),"function"==typeof this._config.placement?this._config.placement.call(this,r,this._element):this._config.placement),e=this._getAttachment(t);this._addAttachmentClass(e);const a=this._config["container"],i=(f.set(r,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(a.append(r),y.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=F.createPopper(this._element,r,this._getPopperConfig(e)),r.classList.add(I),this._resolvePossibleFunction(this._config.customClass));i&&r.classList.add(...i.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(e=>{y.on(e,"mouseover",V)});t=this.tip.classList.contains(_t);this._queueCallback(()=>{var e=this._hoverState;this._hoverState=null,y.trigger(this._element,this.constructor.Event.SHOWN),"out"===e&&this._leave(null,this)},this.tip,t)}}}hide(){if(this._popper){const t=this.getTipElement();var e;y.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented||(t.classList.remove(I),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(e=>y.off(e,"mouseover",V)),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger[At]=!1,e=this.tip.classList.contains(_t),this._queueCallback(()=>{this._isWithActiveTrigger()||(this._hoverState!==wt&&t.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),y.trigger(this._element,this.constructor.Event.HIDDEN),this._disposePopper())},this.tip,e),this._hoverState="")}}update(){null!==this._popper&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(!this.tip){const e=document.createElement("div"),t=(e.innerHTML=this._config.template,e.children[0]);this.setContent(t),t.classList.remove(_t,I),this.tip=t}return this.tip}setContent(e){this._sanitizeAndSetContent(e,this.getTitle(),Tt)}_sanitizeAndSetContent(e,t,n){const r=h.findOne(n,e);!t&&r?r.remove():this.setElementContent(r,t)}setElementContent(e,t){if(null!==e)return o(t)?(t=r(t),void(this._config.html?t.parentNode!==e&&(e.innerHTML="",e.append(t)):e.textContent=t.textContent)):void(this._config.html?(this._config.sanitize&&(t=mt(t,this._config.allowList,this._config.sanitizeFn)),e.innerHTML=t):e.textContent=t)}getTitle(){var e=this._element.getAttribute("data-bs-original-title")||this._config.title;return this._resolvePossibleFunction(e)}updateAttachment(e){return"right"===e?"end":"left"===e?"start":e}_initializeOnDelegatedTarget(e,t){return t||this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_getOffset(){const t=this._config["offset"];return"string"==typeof t?t.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(e){return"function"==typeof e?e.call(this._element):e}_getPopperConfig(e){e={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:e=>this._handlePopperPlacementChange(e)}],onFirstUpdate:e=>{e.options.placement!==e.placement&&this._handlePopperPlacementChange(e)}};return{...e,..."function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_addAttachmentClass(e){this.getTipElement().classList.add(this._getBasicClassPrefix()+"-"+this.updateAttachment(e))}_getAttachment(e){return vt[e.toUpperCase()]}_setListeners(){const e=this._config.trigger.split(" ");e.forEach(e=>{var t;"click"===e?y.on(this._element,this.constructor.Event.CLICK,this._config.selector,e=>this.toggle(e)):"manual"!==e&&(t=e===At?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,e=e===At?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT,y.on(this._element,t,this._config.selector,e=>this._enter(e)),y.on(this._element,e,this._config.selector,e=>this._leave(e)))}),this._hideModalHandler=()=>{this._element&&this.hide()},y.on(this._element.closest(".modal"),kt,this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){var e=this._element.getAttribute("title"),t=typeof this._element.getAttribute("data-bs-original-title");!e&&"string"==t||(this._element.setAttribute("data-bs-original-title",e||""),!e||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",e),this._element.setAttribute("title",""))}_enter(e,t){t=this._initializeOnDelegatedTarget(e,t),e&&(t._activeTrigger["focusin"===e.type?"focus":At]=!0),t.getTipElement().classList.contains(I)||t._hoverState===wt?t._hoverState=wt:(clearTimeout(t._timeout),t._hoverState=wt,t._config.delay&&t._config.delay.show?t._timeout=setTimeout(()=>{t._hoverState===wt&&t.show()},t._config.delay.show):t.show())}_leave(e,t){t=this._initializeOnDelegatedTarget(e,t),e&&(t._activeTrigger["focusout"===e.type?"focus":At]=t._element.contains(e.relatedTarget)),t._isWithActiveTrigger()||(clearTimeout(t._timeout),t._hoverState="out",t._config.delay&&t._config.delay.hide?t._timeout=setTimeout(()=>{"out"===t._hoverState&&t.hide()},t._config.delay.hide):t.hide())}_isWithActiveTrigger(){for(const e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1}_getConfig(e){const t=p.getDataAttributes(this._element);return Object.keys(t).forEach(e=>{gt.has(e)&&delete t[e]}),(e={...this.constructor.Default,...t,..."object"==typeof e&&e?e:{}}).container=!1===e.container?document.body:r(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),n("tooltip",e,this.constructor.DefaultType),e.sanitize&&(e.template=mt(e.template,e.allowList,e.sanitizeFn)),e}_getDelegateConfig(){const e={};for(const t in this._config)this.constructor.Default[t]!==this._config[t]&&(e[t]=this._config[t]);return e}_cleanTipClass(){const t=this.getTipElement();var e=new RegExp(`(^|\\s)${this._getBasicClassPrefix()}\\S+`,"g");const n=t.getAttribute("class").match(e);null!==n&&0<n.length&&n.map(e=>e.trim()).forEach(e=>t.classList.remove(e))}_getBasicClassPrefix(){return"bs-tooltip"}_handlePopperPlacementChange(e){e=e.state;e&&(this.tip=e.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(e.placement)))}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(t){return this.each(function(){const e=R.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}})}}e(R);A=".bs.popover";const Mt={...R.Default,placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'},Et={...R.DefaultType,content:"(string|element|function)"},St={HIDE:"hide"+A,HIDDEN:"hidden"+A,SHOW:"show"+A,SHOWN:"shown"+A,INSERTED:"inserted"+A,CLICK:"click"+A,FOCUSIN:"focusin"+A,FOCUSOUT:"focusout"+A,MOUSEENTER:"mouseenter"+A,MOUSELEAVE:"mouseleave"+A};class Lt extends R{static get Default(){return Mt}static get NAME(){return"popover"}static get Event(){return St}static get DefaultType(){return Et}isWithContent(){return this.getTitle()||this._getContent()}setContent(e){this._sanitizeAndSetContent(e,this.getTitle(),".popover-header"),this._sanitizeAndSetContent(e,this._getContent(),".popover-body")}_getContent(){return this._resolvePossibleFunction(this._config.content)}_getBasicClassPrefix(){return"bs-popover"}static jQueryInterface(t){return this.each(function(){const e=Lt.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}})}}e(Lt);const Ct=".bs.scrollspy";const Ot={offset:10,method:"auto",target:""},Dt={offset:"number",method:"string",target:"(string|element)"};Ct,Ct;Ct;const It="dropdown-item",P="active",Rt=".nav-link",Pt=".list-group-item",Nt=Rt+`, ${Pt}, .`+It;class Ft extends t{constructor(e,t){super(e),this._scrollElement="BODY"===this._element.tagName?window:this._element,this._config=this._getConfig(t),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,y.on(this._scrollElement,"scroll.bs.scrollspy",()=>this._process()),this.refresh(),this._process()}static get Default(){return Ot}static get NAME(){return"scrollspy"}refresh(){var e=this._scrollElement===this._scrollElement.window?"offset":"position";const r="auto"===this._config.method?e:this._config.method,a="position"===r?this._getScrollTop():0,t=(this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),h.find(Nt,this._config.target));t.map(e=>{e=H(e);const t=e?h.findOne(e):null;if(t){var n=t.getBoundingClientRect();if(n.width||n.height)return[p[r](t).top+a,e]}return null}).filter(e=>e).sort((e,t)=>e[0]-t[0]).forEach(e=>{this._offsets.push(e[0]),this._targets.push(e[1])})}dispose(){y.off(this._scrollElement,Ct),super.dispose()}_getConfig(e){return(e={...Ot,...p.getDataAttributes(this._element),..."object"==typeof e&&e?e:{}}).target=r(e.target)||document.documentElement,n("scrollspy",e,Dt),e}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),n<=t)return e=this._targets[this._targets.length-1],void(this._activeTarget!==e&&this._activate(e));if(this._activeTarget&&t<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(let e=this._offsets.length;e--;)this._activeTarget!==this._targets[e]&&t>=this._offsets[e]&&(void 0===this._offsets[e+1]||t<this._offsets[e+1])&&this._activate(this._targets[e])}_activate(t){this._activeTarget=t,this._clear();const e=Nt.split(",").map(e=>e+`[data-bs-target="${t}"],${e}[href="${t}"]`),n=h.findOne(e.join(","),this._config.target);n.classList.add(P),n.classList.contains(It)?h.findOne(".dropdown-toggle",n.closest(".dropdown")).classList.add(P):h.parents(n,".nav, .list-group").forEach(e=>{h.prev(e,Rt+", "+Pt).forEach(e=>e.classList.add(P)),h.prev(e,".nav-item").forEach(e=>{h.children(e,Rt).forEach(e=>e.classList.add(P))})}),y.trigger(this._scrollElement,"activate.bs.scrollspy",{relatedTarget:t})}_clear(){h.find(Nt,this._config.target).filter(e=>e.classList.contains(P)).forEach(e=>e.classList.remove(P))}static jQueryInterface(t){return this.each(function(){const e=Ft.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}})}}y.on(window,"load.bs.scrollspy.data-api",()=>{h.find('[data-bs-spy="scroll"]').forEach(e=>new Ft(e))}),e(Ft);const zt="active",jt=":scope > li > .active";class qt extends t{static get NAME(){return"tab"}show(){if(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE||!this._element.classList.contains(zt)){let e;var t=i(this._element),n=this._element.closest(".nav, .list-group"),r=(n&&(r="UL"===n.nodeName||"OL"===n.nodeName?jt:".active",e=(e=h.find(r,n))[e.length-1]),e?y.trigger(e,"hide.bs.tab",{relatedTarget:this._element}):null);y.trigger(this._element,"show.bs.tab",{relatedTarget:e}).defaultPrevented||null!==r&&r.defaultPrevented||(this._activate(this._element,n),r=()=>{y.trigger(e,"hidden.bs.tab",{relatedTarget:this._element}),y.trigger(this._element,"shown.bs.tab",{relatedTarget:e})},t?this._activate(t,t.parentNode,r):r())}}_activate(e,t,n){const r=(!t||"UL"!==t.nodeName&&"OL"!==t.nodeName?h.children(t,".active"):h.find(jt,t))[0];var t=n&&r&&r.classList.contains("fade"),a=()=>this._transitionComplete(e,r,n);r&&t?(r.classList.remove("show"),this._queueCallback(a,e,!0)):a()}_transitionComplete(e,t,n){if(t){t.classList.remove(zt);const a=h.findOne(":scope > .dropdown-menu .active",t.parentNode);a&&a.classList.remove(zt),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!1)}e.classList.add(zt),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),d(e),e.classList.contains("fade")&&e.classList.add("show");let r=e.parentNode;(r=r&&"LI"===r.nodeName?r.parentNode:r)&&r.classList.contains("dropdown-menu")&&((t=e.closest(".dropdown"))&&h.find(".dropdown-toggle",t).forEach(e=>e.classList.add(zt)),e.setAttribute("aria-expanded",!0)),n&&n()}static jQueryInterface(t){return this.each(function(){const e=qt.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}})}}y.on(document,"click.bs.tab.data-api",'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',function(e){if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),!s(this)){const t=qt.getOrCreateInstance(this);t.show()}}),e(qt);const Ht="show",Bt="showing",Ut={animation:"boolean",autohide:"boolean",delay:"number"},Vt={animation:!0,autohide:!0,delay:5e3};class Yt extends t{constructor(e,t){super(e),this._config=this._getConfig(t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return Ut}static get Default(){return Vt}static get NAME(){return"toast"}show(){y.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),d(this._element),this._element.classList.add(Ht),this._element.classList.add(Bt),this._queueCallback(()=>{this._element.classList.remove(Bt),y.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this._element.classList.contains(Ht)&&!y.trigger(this._element,"hide.bs.toast").defaultPrevented&&(this._element.classList.add(Bt),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(Bt),this._element.classList.remove(Ht),y.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation))}dispose(){this._clearTimeout(),this._element.classList.contains(Ht)&&this._element.classList.remove(Ht),super.dispose()}_getConfig(e){return e={...Vt,...p.getDataAttributes(this._element),..."object"==typeof e&&e?e:{}},n("toast",e,this.constructor.DefaultType),e}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}t?this._clearTimeout():(e=e.relatedTarget,this._element===e||this._element.contains(e)||this._maybeScheduleHide())}_setListeners(){y.on(this._element,"mouseover.bs.toast",e=>this._onInteraction(e,!0)),y.on(this._element,"mouseout.bs.toast",e=>this._onInteraction(e,!1)),y.on(this._element,"focusin.bs.toast",e=>this._onInteraction(e,!0)),y.on(this._element,"focusout.bs.toast",e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=Yt.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}})}}return ue(Yt),e(Yt),{Alert:de,Button:pe,Carousel:w,Collapse:k,Dropdown:L,Modal:O,Offcanvas:D,Popover:Lt,ScrollSpy:Ft,Tab:qt,Toast:Yt,Tooltip:R}}),!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),n(t),t}:n(jQuery)}(function(t){(e=t&&t.fn&&t.fn.select2&&t.fn.select2.amd?t.fn.select2.amd:e)&&e.requirejs||(e?n=e:e={},m={},g={},y={},v={},r=Object.prototype.hasOwnProperty,a=[].slice,b=/\.js$/,p=function(e,t){var n,r,a=c(e),i=a[0],t=t[1];return e=a[1],i&&(n=w(i=l(i,t))),i?e=n&&n.normalize?n.normalize(e,(r=t,function(e){return l(e,r)})):l(e,t):(i=(a=c(e=l(e,t)))[0],e=a[1],i&&(n=w(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},h={require:function(e){return _(e)},exports:function(e){var t=m[e];return void 0!==t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:(t=e,function(){return y&&y.config&&y.config[t]||{}})};var t}},i=function(e,t,n,r){var a,i,o,s,l,c=[],u=typeof n,d=T(r=r||e);if("undefined"==u||"function"==u){for(t=!t.length&&n.length?["require","exports","module"]:t,s=0;s<t.length;s+=1)if("require"===(i=(o=p(t[s],d)).f))c[s]=h.require(e);else if("exports"===i)c[s]=h.exports(e),l=!0;else if("module"===i)a=c[s]=h.module(e);else if(x(m,i)||x(g,i)||x(v,i))c[s]=w(i);else{if(!o.p)throw new Error(e+" missing "+i);o.p.load(o.n,_(r,!0),function(t){return function(e){m[t]=e}}(i),{}),c[s]=m[i]}u=n?n.apply(m[e],c):void 0,e&&(a&&a.exports!==f&&a.exports!==m[e]?m[e]=a.exports:u===f&&l||(m[e]=u))}else e&&(m[e]=n)},s=n=o=function(e,t,n,r,a){if("string"==typeof e)return h[e]?h[e](t):w(p(e,T(t)).f);if(!e.splice){if((y=e).deps&&o(y.deps,y.callback),!t)return;t.splice?(e=t,t=n,n=null):e=f}return t=t||function(){},"function"==typeof n&&(n=r,r=a),r?i(f,e,t,n):setTimeout(function(){i(f,e,t,n)},4),o},o.config=function(e){return o(e)},s._defined=m,(u=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),x(m,e)||x(g,e)||(g[e]=[e,t,n])}).amd={jQuery:!0},e.requirejs=s,e.require=n,e.define=u),e.define("almond",function(){}),e.define("jquery",[],function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e}),e.define("select2/utils",["jquery"],function(i){var r={};function c(e){var t,n=e.prototype,r=[];for(t in n)"function"==typeof n[t]&&"constructor"!==t&&r.push(t);return r}r.Extend=function(e,t){var n,r={}.hasOwnProperty;function a(){this.constructor=e}for(n in t)r.call(t,n)&&(e[n]=t[n]);return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e},r.Decorate=function(r,a){var e=c(a),t=c(r);function i(){var e=Array.prototype.unshift,t=a.prototype.constructor.length,n=r.prototype.constructor;0<t&&(e.call(arguments,r.prototype.constructor),n=a.prototype.constructor),n.apply(this,arguments)}a.displayName=r.displayName,i.prototype=new function(){this.constructor=i};for(var n=0;n<t.length;n++){var o=t[n];i.prototype[o]=r.prototype[o]}for(var s=0;s<e.length;s++){var l=e[s];i.prototype[l]=function(e){var t=function(){},n=(e in i.prototype&&(t=i.prototype[e]),a.prototype[e]);return function(){return Array.prototype.unshift.call(arguments,t),n.apply(this,arguments)}}(l)}return i};function e(){this.listeners={}}e.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},e.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},0===(n=null==n?[]:n).length&&n.push({}),(n[0]._type=e)in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},e.prototype.invoke=function(e,t){for(var n=0,r=e.length;n<r;n++)e[n].apply(this,t)},r.Observable=e,r.generateChars=function(e){for(var t="",n=0;n<e;n++)t+=Math.floor(36*Math.random()).toString(36);return t},r.bind=function(e,t){return function(){e.apply(t,arguments)}},r._convertData=function(e){for(var t in e){var n=t.split("-"),r=e;if(1!==n.length){for(var a=0;a<n.length;a++){var i=n[a];(i=i.substring(0,1).toLowerCase()+i.substring(1))in r||(r[i]={}),a==n.length-1&&(r[i]=e[t]),r=r[i]}delete e[t]}}return e},r.hasScroll=function(e,t){var n=i(t),r=t.style.overflowX,a=t.style.overflowY;return(r!==a||"hidden"!==a&&"visible"!==a)&&("scroll"===r||"scroll"===a||(n.innerHeight()<t.scrollHeight||n.innerWidth()<t.scrollWidth))},r.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},r.__cache={};var n=0;return r.GetUniqueElementId=function(e){var t=e.getAttribute("data-select2-id");return null==t&&(t=e.id?"select2-data-"+e.id:"select2-data-"+(++n).toString()+"-"+r.generateChars(4),e.setAttribute("data-select2-id",t)),t},r.StoreData=function(e,t,n){e=r.GetUniqueElementId(e);r.__cache[e]||(r.__cache[e]={}),r.__cache[e][t]=n},r.GetData=function(e,t){var n=r.GetUniqueElementId(e);return t?r.__cache[n]&&null!=r.__cache[n][t]?r.__cache[n][t]:i(e).data(t):r.__cache[n]},r.RemoveData=function(e){var t=r.GetUniqueElementId(e);null!=r.__cache[t]&&delete r.__cache[t],e.removeAttribute("data-select2-id")},r.copyNonInternalCssClasses=function(e,t){var n=(n=e.getAttribute("class").trim().split(/\s+/)).filter(function(e){return 0===e.indexOf("select2-")}),t=(t=t.getAttribute("class").trim().split(/\s+/)).filter(function(e){return 0!==e.indexOf("select2-")}),n=n.concat(t);e.setAttribute("class",n.join(" "))},r}),e.define("select2/results",["jquery","./utils"],function(d,f){function r(e,t,n){this.$element=e,this.data=n,this.options=t,r.__super__.constructor.call(this)}return f.Extend(r,f.Observable),r.prototype.render=function(){var e=d('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e},r.prototype.clear=function(){this.$results.empty()},r.prototype.displayMessage=function(e){var t=this.options.get("escapeMarkup"),n=(this.clear(),this.hideLoading(),d('<li role="alert" aria-live="assertive" class="select2-results__option"></li>')),r=this.options.get("translations").get(e.message);n.append(t(r(e.args))),n[0].className+=" select2-results__message",this.$results.append(n)},r.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},r.prototype.append=function(e){this.hideLoading();var t=[];if(null==e.results||0===e.results.length)0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"});else{e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var r=e.results[n],r=this.option(r);t.push(r)}this.$results.append(t)}},r.prototype.position=function(e,t){t.find(".select2-results").append(e)},r.prototype.sort=function(e){return this.options.get("sorter")(e)},r.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option--selectable"),t=e.filter(".select2-results__option--selected");(0<t.length?t:e).first().trigger("mouseenter"),this.ensureHighlightVisible()},r.prototype.setClasses=function(){var t=this;this.data.current(function(e){var r=e.map(function(e){return e.id.toString()});t.$results.find(".select2-results__option--selectable").each(function(){var e=d(this),t=f.GetData(this,"data"),n=""+t.id;null!=t.element&&t.element.selected||null==t.element&&-1<r.indexOf(n)?(this.classList.add("select2-results__option--selected"),e.attr("aria-selected","true")):(this.classList.remove("select2-results__option--selected"),e.attr("aria-selected","false"))})})},r.prototype.showLoading=function(e){this.hideLoading();e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},e=this.option(e);e.className+=" loading-results",this.$results.prepend(e)},r.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},r.prototype.option=function(e){var t,n=document.createElement("li"),r=(n.classList.add("select2-results__option"),n.classList.add("select2-results__option--selectable"),{role:"option"}),a=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(t in(null!=e.element&&a.call(e.element,":disabled")||null==e.element&&e.disabled)&&(r["aria-disabled"]="true",n.classList.remove("select2-results__option--selectable"),n.classList.add("select2-results__option--disabled")),null==e.id&&n.classList.remove("select2-results__option--selectable"),null!=e._resultId&&(n.id=e._resultId),e.title&&(n.title=e.title),e.children&&(r.role="group",r["aria-label"]=e.text,n.classList.remove("select2-results__option--selectable"),n.classList.add("select2-results__option--group")),r){var i=r[t];n.setAttribute(t,i)}if(e.children){for(var a=d(n),o=document.createElement("strong"),s=(o.className="select2-results__group",this.template(e,o),[]),l=0;l<e.children.length;l++){var c=e.children[l],c=this.option(c);s.push(c)}var u=d("<ul></ul>",{class:"select2-results__options select2-results__options--nested",role:"none"});u.append(s),a.append(o),a.append(u)}else this.template(e,n);return f.StoreData(n,"data",e),n},r.prototype.bind=function(t,e){var a=this,n=t.id+"-results";this.$results.attr("id",n),t.on("results:all",function(e){a.clear(),a.append(e.data),t.isOpen()&&(a.setClasses(),a.highlightFirstItem())}),t.on("results:append",function(e){a.append(e.data),t.isOpen()&&a.setClasses()}),t.on("query",function(e){a.hideMessages(),a.showLoading(e)}),t.on("select",function(){t.isOpen()&&(a.setClasses(),a.options.get("scrollAfterSelect")&&a.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(a.setClasses(),a.options.get("scrollAfterSelect")&&a.highlightFirstItem())}),t.on("open",function(){a.$results.attr("aria-expanded","true"),a.$results.attr("aria-hidden","false"),a.setClasses(),a.ensureHighlightVisible()}),t.on("close",function(){a.$results.attr("aria-expanded","false"),a.$results.attr("aria-hidden","true"),a.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=a.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e,t=a.getHighlightedResults();0!==t.length&&(e=f.GetData(t[0],"data"),t.hasClass("select2-results__option--selected")?a.trigger("close",{}):a.trigger("select",{data:e}))}),t.on("results:previous",function(){var e,t=a.getHighlightedResults(),n=a.$results.find(".select2-results__option--selectable"),r=n.index(t);r<=0||(r=r-1,0===t.length&&(r=0),(t=n.eq(r)).trigger("mouseenter"),n=a.$results.offset().top,t=t.offset().top,e=a.$results.scrollTop()+(t-n),0===r?a.$results.scrollTop(0):t-n<0&&a.$results.scrollTop(e))}),t.on("results:next",function(){var e,t,n=a.getHighlightedResults(),r=a.$results.find(".select2-results__option--selectable"),n=r.index(n)+1;n>=r.length||((r=r.eq(n)).trigger("mouseenter"),e=a.$results.offset().top+a.$results.outerHeight(!1),r=r.offset().top+r.outerHeight(!1),t=a.$results.scrollTop()+r-e,0===n?a.$results.scrollTop(0):e<r&&a.$results.scrollTop(t))}),t.on("results:focus",function(e){e.element[0].classList.add("select2-results__option--highlighted"),e.element[0].setAttribute("aria-selected","true")}),t.on("results:message",function(e){a.displayMessage(e)}),d.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=a.$results.scrollTop(),n=a.$results.get(0).scrollHeight-t+e.deltaY,t=0<e.deltaY&&t-e.deltaY<=0,n=e.deltaY<0&&n<=a.$results.height();t?(a.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):n&&(a.$results.scrollTop(a.$results.get(0).scrollHeight-a.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option--selectable",function(e){var t=d(this),n=f.GetData(this,"data");t.hasClass("select2-results__option--selected")?a.options.get("multiple")?a.trigger("unselect",{originalEvent:e,data:n}):a.trigger("close",{}):a.trigger("select",{originalEvent:e,data:n})}),this.$results.on("mouseenter",".select2-results__option--selectable",function(e){var t=f.GetData(this,"data");a.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false"),a.trigger("results:focus",{data:t,element:d(this)})})},r.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},r.prototype.destroy=function(){this.$results.remove()},r.prototype.ensureHighlightVisible=function(){var e,t,n,r,a=this.getHighlightedResults();0!==a.length&&(e=this.$results.find(".select2-results__option--selectable").index(a),t=this.$results.offset().top,r=a.offset().top,n=this.$results.scrollTop()+(r-t),r=r-t,n-=2*a.outerHeight(!1),e<=2?this.$results.scrollTop(0):(r>this.$results.outerHeight()||r<0)&&this.$results.scrollTop(n))},r.prototype.template=function(e,t){var n=this.options.get("templateResult"),r=this.options.get("escapeMarkup"),n=n(e,t);null==n?t.style.display="none":"string"==typeof n?t.innerHTML=r(n):d(t).append(n)},r}),e.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),e.define("select2/selection/base",["jquery","../utils","../keys"],function(n,r,a){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return r.Extend(i,r.Observable),i.prototype.render=function(){var e=n('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=r.GetData(this.$element[0],"old-tabindex")?this._tabindex=r.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),e.attr("aria-disabled","false"),this.$selection=e},i.prototype.bind=function(e,t){var n=this,r=e.id+"-results";this.container=e,this.$selection.on("focus",function(e){n.trigger("focus",e)}),this.$selection.on("blur",function(e){n._handleBlur(e)}),this.$selection.on("keydown",function(e){n.trigger("keypress",e),e.which===a.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){n.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){n.update(e.data)}),e.on("open",function(){n.$selection.attr("aria-expanded","true"),n.$selection.attr("aria-owns",r),n._attachCloseHandler(e)}),e.on("close",function(){n.$selection.attr("aria-expanded","false"),n.$selection.removeAttr("aria-activedescendant"),n.$selection.removeAttr("aria-owns"),n.$selection.trigger("focus"),n._detachCloseHandler(e)}),e.on("enable",function(){n.$selection.attr("tabindex",n._tabindex),n.$selection.attr("aria-disabled","false")}),e.on("disable",function(){n.$selection.attr("tabindex","-1"),n.$selection.attr("aria-disabled","true")})},i.prototype._handleBlur=function(e){var t=this;window.setTimeout(function(){document.activeElement==t.$selection[0]||n.contains(t.$selection[0],document.activeElement)||t.trigger("blur",e)},1)},i.prototype._attachCloseHandler=function(e){n(document.body).on("mousedown.select2."+e.id,function(e){var t=n(e.target).closest(".select2");n(".select2.select2-container--open").each(function(){this!=t[0]&&r.GetData(this,"element").select2("close")})})},i.prototype._detachCloseHandler=function(e){n(document.body).off("mousedown.select2."+e.id)},i.prototype.position=function(e,t){t.find(".selection").append(e)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},i.prototype.isEnabled=function(){return!this.isDisabled()},i.prototype.isDisabled=function(){return this.options.get("disabled")},i}),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n,r){function a(){a.__super__.constructor.apply(this,arguments)}return n.Extend(a,t),a.prototype.render=function(){var e=a.__super__.render.call(this);return e[0].classList.add("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},a.prototype.bind=function(t,e){var n=this,r=(a.__super__.bind.apply(this,arguments),t.id+"-container");this.$selection.find(".select2-selection__rendered").attr("id",r).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",r),this.$selection.attr("aria-controls",r),this.$selection.on("mousedown",function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),t.on("focus",function(e){t.isOpen()||n.$selection.trigger("focus")})},a.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},a.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},a.prototype.selectionContainer=function(){return e("<span></span>")},a.prototype.update=function(e){var t,n;0===e.length?this.clear():(e=e[0],t=this.$selection.find(".select2-selection__rendered"),n=this.display(e,t),t.empty().append(n),(n=e.title||e.text)?t.attr("title",n):t.removeAttr("title"))},a}),e.define("select2/selection/multiple",["jquery","./base","../utils"],function(a,e,c){function i(e,t){i.__super__.constructor.apply(this,arguments)}return c.Extend(i,e),i.prototype.render=function(){var e=i.__super__.render.call(this);return e[0].classList.add("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},i.prototype.bind=function(e,t){var n=this,r=(i.__super__.bind.apply(this,arguments),e.id+"-container");this.$selection.find(".select2-selection__rendered").attr("id",r),this.$selection.on("click",function(e){n.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(e){var t;n.isDisabled()||(t=a(this).parent(),t=c.GetData(t[0],"data"),n.trigger("unselect",{originalEvent:e,data:t}))}),this.$selection.on("keydown",".select2-selection__choice__remove",function(e){n.isDisabled()||e.stopPropagation()})},i.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},i.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},i.prototype.selectionContainer=function(){return a('<li class="select2-selection__choice"><button type="button" class="select2-selection__choice__remove" tabindex="-1"><span aria-hidden="true">&times;</span></button><span class="select2-selection__choice__display"></span></li>')},i.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],n=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-",r=0;r<e.length;r++){var a=e[r],i=this.selectionContainer(),o=this.display(a,i),s=n+c.generateChars(4)+"-",o=(a.id?s+=a.id:s+=c.generateChars(4),i.find(".select2-selection__choice__display").append(o).attr("id",s),a.title||a.text),o=(o&&i.attr("title",o),this.options.get("translations").get("removeItem")),l=i.find(".select2-selection__choice__remove");l.attr("title",o()),l.attr("aria-label",o()),l.attr("aria-describedby",s),c.StoreData(i[0],"data",a),t.push(i)}this.$selection.find(".select2-selection__rendered").append(t)}},i}),e.define("select2/selection/placeholder",[],function(){function e(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return e.prototype.normalizePlaceholder=function(e,t){return t="string"==typeof t?{id:"",text:t}:t},e.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer(),t=(n.html(this.display(t)),n[0].classList.add("select2-selection__placeholder"),n[0].classList.remove("select2-selection__choice"),t.title||t.text||n.text());return this.$selection.find(".select2-selection__rendered").attr("title",t),n},e.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(1<t.length||n)return e.call(this,t);this.clear();n=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(n)},e}),e.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(a,r,s){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){r._handleClear(e)}),t.on("keypress",function(e){r._handleKeyboardClear(e,t)})},e.prototype._handleClear=function(e,t){if(!this.isDisabled()){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();var r=s.GetData(n[0],"data"),a=this.$element.val(),i=(this.$element.val(this.placeholder.id),{data:r});if(this.trigger("clear",i),i.prevented)this.$element.val(a);else{for(var o=0;o<r.length;o++)if(i={data:r[o]},this.trigger("unselect",i),i.prevented)return void this.$element.val(a);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},e.prototype._handleKeyboardClear=function(e,t,n){n.isOpen()||t.which!=r.DELETE&&t.which!=r.BACKSPACE||this._handleClear(t)},e.prototype.update=function(e,t){var n,r;e.call(this,t),this.$selection.find(".select2-selection__clear").remove(),this.$selection[0].classList.remove("select2-selection--clearable"),0<this.$selection.find(".select2-selection__placeholder").length||0===t.length||(e=this.$selection.find(".select2-selection__rendered").attr("id"),n=this.options.get("translations").get("removeAllItems"),(r=a('<button type="button" class="select2-selection__clear" tabindex="-1"><span aria-hidden="true">&times;</span></button>')).attr("title",n()),r.attr("aria-label",n()),r.attr("aria-describedby",e),s.StoreData(r[0],"data",t),this.$selection.prepend(r),this.$selection[0].classList.add("select2-selection--clearable"))},e}),e.define("select2/selection/search",["jquery","../utils","../keys"],function(r,s,l){function e(e,t,n){e.call(this,t,n)}return e.prototype.render=function(e){var t=this.options.get("translations").get("search"),n=r('<span class="select2-search select2-search--inline"><textarea class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" ></textarea></span>'),n=(this.$searchContainer=n,this.$search=n.find("textarea"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",t()),e.call(this));return this._transferTabIndex(),n.append(this.$searchContainer),n},e.prototype.bind=function(e,t,n){var r=this,a=t.id+"-results",i=t.id+"-container",e=(e.call(this,t,n),r.$search.attr("aria-describedby",i),t.on("open",function(){r.$search.attr("aria-controls",a),r.$search.trigger("focus")}),t.on("close",function(){r.$search.val(""),r.resizeSearch(),r.$search.removeAttr("aria-controls"),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")}),t.on("enable",function(){r.$search.prop("disabled",!1),r._transferTabIndex()}),t.on("disable",function(){r.$search.prop("disabled",!0)}),t.on("focus",function(e){r.$search.trigger("focus")}),t.on("results:focus",function(e){e.data._resultId?r.$search.attr("aria-activedescendant",e.data._resultId):r.$search.removeAttr("aria-activedescendant")}),this.$selection.on("focusin",".select2-search--inline",function(e){r.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){r._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){var t;e.stopPropagation(),r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented(),e.which===l.BACKSPACE&&""===r.$search.val()&&0<(t=r.$selection.find(".select2-selection__choice").last()).length&&(t=s.GetData(t[0],"data"),r.searchRemoveChoice(t),e.preventDefault())}),this.$selection.on("click",".select2-search--inline",function(e){r.$search.val()&&e.stopPropagation()}),document.documentMode),o=e&&e<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){o?r.$selection.off("input.search input.searchcheck"):r.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){var t;o&&"input"===e.type?r.$selection.off("input.search input.searchcheck"):(t=e.which)!=l.SHIFT&&t!=l.CTRL&&t!=l.ALT&&t!=l.TAB&&r.handleSearch(e)})},e.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},e.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},e.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.resizeSearch(),n&&this.$search.trigger("focus")},e.prototype.handleSearch=function(){var e;this.resizeSearch(),this._keyUpPrevented||(e=this.$search.val(),this.trigger("query",{term:e})),this._keyUpPrevented=!1},e.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},e.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="100%";""===this.$search.attr("placeholder")&&(e=.75*(this.$search.val().length+1)+"em"),this.$search.css("width",e)},e}),e.define("select2/selection/selectionCss",["../utils"],function(n){function e(){}return e.prototype.render=function(e){var e=e.call(this),t=this.options.get("selectionCssClass")||"";return-1!==t.indexOf(":all:")&&(t=t.replace(":all:",""),n.copyNonInternalCssClasses(e[0],this.$element[0])),e.addClass(t),e},e}),e.define("select2/selection/eventRelay",["jquery"],function(o){function e(){}return e.prototype.bind=function(e,t,n){var r=this,a=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],i=["opening","closing","selecting","unselecting","clearing"];e.call(this,t,n),t.on("*",function(e,t){var n;-1!==a.indexOf(e)&&(n=o.Event("select2:"+e,{params:t=t||{}}),r.$element.trigger(n),-1!==i.indexOf(e)&&(t.prevented=n.isDefaultPrevented()))})},e}),e.define("select2/translation",["jquery","require"],function(t,n){function r(e){this.dict=e||{}}return r.prototype.all=function(){return this.dict},r.prototype.get=function(e){return this.dict[e]},r.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},r._cache={},r.loadPath=function(e){var t;return e in r._cache||(t=n(e),r._cache[e]=t),new r(r._cache[e])},r}),e.define("select2/diacritics",[],function(){return{"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OE","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oe","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"'"}}),e.define("select2/data/base",["../utils"],function(n){function r(e,t){r.__super__.constructor.call(this)}return n.Extend(r,n.Observable),r.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},r.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},r.prototype.bind=function(e,t){},r.prototype.destroy=function(){},r.prototype.generateResultId=function(e,t){e=e.id+"-result-";return e+=n.generateChars(4),null!=t.id?e+="-"+t.id.toString():e+="-"+n.generateChars(4),e},r}),e.define("select2/data/select",["./base","../utils","jquery"],function(e,s,l){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return s.Extend(n,e),n.prototype.current=function(e){var t=this;e(Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),function(e){return t.item(l(e))}))},n.prototype.select=function(a){var e,i=this;if(a.selected=!0,null!=a.element&&"option"===a.element.tagName.toLowerCase())return a.element.selected=!0,void this.$element.trigger("input").trigger("change");this.$element.prop("multiple")?this.current(function(e){var t=[];(a=[a]).push.apply(a,e);for(var n=0;n<a.length;n++){var r=a[n].id;-1===t.indexOf(r)&&t.push(r)}i.$element.val(t),i.$element.trigger("input").trigger("change")}):(e=a.id,this.$element.val(e),this.$element.trigger("input").trigger("change"))},n.prototype.unselect=function(a){var i=this;if(this.$element.prop("multiple")){if(a.selected=!1,null!=a.element&&"option"===a.element.tagName.toLowerCase())return a.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current(function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n].id;r!==a.id&&-1===t.indexOf(r)&&t.push(r)}i.$element.val(t),i.$element.trigger("input").trigger("change")})}},n.prototype.bind=function(e,t){var n=this;(this.container=e).on("select",function(e){n.select(e.data)}),e.on("unselect",function(e){n.unselect(e.data)})},n.prototype.destroy=function(){this.$element.find("*").each(function(){s.RemoveData(this)})},n.prototype.query=function(t,e){var n=[],r=this;this.$element.children().each(function(){var e;"option"!==this.tagName.toLowerCase()&&"optgroup"!==this.tagName.toLowerCase()||(e=l(this),e=r.item(e),null!==(e=r.matches(t,e))&&n.push(e))}),e({results:n})},n.prototype.addOptions=function(e){this.$element.append(e)},n.prototype.option=function(e){e.children?(t=document.createElement("optgroup")).label=e.text:void 0!==(t=document.createElement("option")).textContent?t.textContent=e.text:t.innerText=e.text,void 0!==e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var t,e=this._normalizeItem(e);return e.element=t,s.StoreData(t,"data",e),l(t)},n.prototype.item=function(e){var t={};if(null==(t=s.GetData(e[0],"data"))){var n=e[0];if("option"===n.tagName.toLowerCase())t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if("optgroup"===n.tagName.toLowerCase()){for(var t={text:e.prop("label"),children:[],title:e.prop("title")},r=e.children("option"),a=[],i=0;i<r.length;i++){var o=l(r[i]),o=this.item(o);a.push(o)}t.children=a}(t=this._normalizeItem(t)).element=e[0],s.StoreData(e[0],"data",t)}return t},n.prototype._normalizeItem=function(e){e!==Object(e)&&(e={id:e,text:e});return null!=(e=l.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),l.extend({},{selected:!1,disabled:!1},e)},n.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},n}),e.define("select2/data/array",["./select","../utils","jquery"],function(e,t,c){function r(e,t){this._dataToConvert=t.get("data")||[],r.__super__.constructor.call(this,e,t)}return t.Extend(r,e),r.prototype.bind=function(e,t){r.__super__.bind.call(this,e,t),this.addOptions(this.convertToOptions(this._dataToConvert))},r.prototype.select=function(n){var e;0===this.$element.find("option").filter(function(e,t){return t.value==n.id.toString()}).length&&(e=this.option(n),this.addOptions(e)),r.__super__.select.call(this,n)},r.prototype.convertToOptions=function(e){var t=this,n=this.$element.find("option"),r=n.map(function(){return t.item(c(this)).id}).get(),a=[];for(var i=0;i<e.length;i++){var o,s,l=this._normalizeItem(e[i]);0<=r.indexOf(l.id)?(o=n.filter(function(e){return function(){return c(this).val()==e.id}}(l)),s=this.item(o),s=c.extend(!0,{},l,s),s=this.option(s),o.replaceWith(s)):(o=this.option(l),l.children&&(s=this.convertToOptions(l.children),o.append(s)),a.push(o))}return a},r}),e.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,i){function n(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,e,t)}return t.Extend(n,e),n.prototype._applyDefaults=function(e){return i.extend({},{data:function(e){return i.extend({},e,{q:e.term})},transport:function(e,t,n){e=i.ajax(e);return e.then(t),e.fail(n),e}},e,!0)},n.prototype.processResults=function(e){return e},n.prototype.query=function(t,n){var r=this,a=(null!=this._request&&("function"==typeof this._request.abort&&this._request.abort(),this._request=null),i.extend({type:"GET"},this.ajaxOptions));function e(){var e=a.transport(a,function(e){e=r.processResults(e,t);r.options.get("debug")&&window.console&&console.error&&(e&&e.results&&Array.isArray(e.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),n(e)},function(){"status"in e&&(0===e.status||"0"===e.status)||r.trigger("results:message",{message:"errorLoading"})});r._request=e}"function"==typeof a.url&&(a.url=a.url.call(this.$element,t)),"function"==typeof a.data&&(a.data=a.data.call(this.$element,t)),this.ajaxOptions.delay&&null!=t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(e,this.ajaxOptions.delay)):e()},n}),e.define("select2/data/tags",["jquery"],function(t){function e(e,t,n){var r=n.get("tags"),a=n.get("createTag"),a=(void 0!==a&&(this.createTag=a),n.get("insertTag"));if(void 0!==a&&(this.insertTag=a),e.call(this,t,n),Array.isArray(r))for(var i=0;i<r.length;i++){var o=r[i],o=this._normalizeItem(o),o=this.option(o);this.$element.append(o)}}return e.prototype.query=function(e,c,u){var d=this;this._removeOldTags(),null==c.term||null!=c.page?e.call(this,c,u):e.call(this,c,function e(t,n){for(var r=t.results,a=0;a<r.length;a++){var i=r[a],o=null!=i.children&&!e({results:i.children},!0);if((i.text||"").toUpperCase()===(c.term||"").toUpperCase()||o)return!n&&(t.data=r,void u(t))}if(n)return!0;var s,l=d.createTag(c);null!=l&&((s=d.option(l)).attr("data-select2-tag","true"),d.addOptions([s]),d.insertTag(r,l)),t.results=r,u(t)})},e.prototype.createTag=function(e,t){if(null==t.term)return null;t=t.term.trim();return""===t?null:{id:t,text:t}},e.prototype.insertTag=function(e,t,n){t.unshift(n)},e.prototype._removeOldTags=function(e){this.$element.find("option[data-select2-tag]").each(function(){this.selected||t(this).remove()})},e}),e.define("select2/data/tokenizer",["jquery"],function(c){function e(e,t,n){var r=n.get("tokenizer");void 0!==r&&(this.tokenizer=r),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(e,t,n){var r=this;t.term=t.term||"";var a=this.tokenizer(t,this.options,function(e){var t=r._normalizeItem(e);r.$element.find("option").filter(function(){return c(this).val()===t.id}).length||((e=r.option(t)).attr("data-select2-tag",!0),r._removeOldTags(),r.addOptions([e])),r.trigger("select",{data:t})});a.term!==t.term&&(this.$search.length&&(this.$search.val(a.term),this.$search.trigger("focus")),t.term=a.term),e.call(this,t,n)},e.prototype.tokenizer=function(e,t,n,r){for(var a=n.get("tokenSeparators")||[],i=t.term,o=0,s=this.createTag||function(e){return{id:e.term,text:e.term}};o<i.length;){var l=i[o];-1===a.indexOf(l)?o++:(l=i.substr(0,o),null==(l=s(c.extend({},t,{term:l})))?o++:(r(l),i=i.substr(o+1)||"",o=0))}return{term:i}},e}),e.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),e.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",0<this.maximumInputLength&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),e.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("select",function(){r._checkIfMaximumSelected()})},e.prototype.query=function(e,t,n){var r=this;this._checkIfMaximumSelected(function(){e.call(r,t,n)})},e.prototype._checkIfMaximumSelected=function(e,t){var n=this;this.current(function(e){e=null!=e?e.length:0;0<n.maximumSelectionLength&&e>=n.maximumSelectionLength?n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}}):t&&t()})},e}),e.define("select2/dropdown",["jquery","./utils"],function(t,e){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),e.define("select2/dropdown/search",["jquery"],function(i){function e(){}return e.prototype.render=function(e){var e=e.call(this),t=this.options.get("translations").get("search"),n=i('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=n,this.$search=n.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",t()),e.prepend(n),e},e.prototype.bind=function(e,t,n){var r=this,a=t.id+"-results";e.call(this,t,n),this.$search.on("keydown",function(e){r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(e){i(this).off("keyup")}),this.$search.on("keyup input",function(e){r.handleSearch(e)}),t.on("open",function(){r.$search.attr("tabindex",0),r.$search.attr("aria-controls",a),r.$search.trigger("focus"),window.setTimeout(function(){r.$search.trigger("focus")},0)}),t.on("close",function(){r.$search.attr("tabindex",-1),r.$search.removeAttr("aria-controls"),r.$search.removeAttr("aria-activedescendant"),r.$search.val(""),r.$search.trigger("blur")}),t.on("focus",function(){t.isOpen()||r.$search.trigger("focus")}),t.on("results:all",function(e){null!=e.query.term&&""!==e.query.term||(r.showSearch(e)?r.$searchContainer[0].classList.remove("select2-search--hide"):r.$searchContainer[0].classList.add("select2-search--hide"))}),t.on("results:focus",function(e){e.data._resultId?r.$search.attr("aria-activedescendant",e.data._resultId):r.$search.removeAttr("aria-activedescendant")})},e.prototype.handleSearch=function(e){var t;this._keyUpPrevented||(t=this.$search.val(),this.trigger("query",{term:t})),this._keyUpPrevented=!1},e.prototype.showSearch=function(e,t){return!0},e}),e.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,r){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,r)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return t="string"==typeof t?{id:"",text:t}:t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),r=t.length-1;0<=r;r--){var a=t[r];this.placeholder.id===a.id&&n.splice(r,1)}return n},e}),e.define("select2/dropdown/infiniteScroll",["jquery"],function(n){function e(e,t,n,r){this.lastParams={},e.call(this,t,n,r),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("query",function(e){r.lastParams=e,r.loading=!0}),t.on("query:append",function(e){r.lastParams=e,r.loading=!0}),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},e.prototype.loadMoreIfNeeded=function(){var e=n.contains(document.documentElement,this.$loadingMore[0]);!this.loading&&e&&(e=this.$results.offset().top+this.$results.outerHeight(!1),this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)<=e+50&&this.loadMore())},e.prototype.loadMore=function(){this.loading=!0;var e=n.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},e.prototype.createLoadingMore=function(){var e=n('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),t=this.options.get("translations").get("loadingMore");return e.html(t(this.lastParams)),e},e}),e.define("select2/dropdown/attachBody",["jquery","../utils"],function(u,o){function e(e,t,n){this.$dropdownParent=u(n.get("dropdownParent")||document.body),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("open",function(){r._showDropdown(),r._attachPositioningHandler(t),r._bindContainerResultHandlers(t)}),t.on("close",function(){r._hideDropdown(),r._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},e.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},e.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t[0].classList.remove("select2"),t[0].classList.add("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},e.prototype.render=function(e){var t=u("<span></span>"),e=e.call(this);return t.append(e),this.$dropdownContainer=t},e.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},e.prototype._bindContainerResultHandlers=function(e,t){var n;this._containerResultsHandlersBound||(n=this,t.on("results:all",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("results:append",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("results:message",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("select",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("unselect",function(){n._positionDropdown(),n._resizeDropdown()}),this._containerResultsHandlersBound=!0)},e.prototype._attachPositioningHandler=function(e,t){var n=this,r="scroll.select2."+t.id,a="resize.select2."+t.id,t="orientationchange.select2."+t.id,i=this.$container.parents().filter(o.hasScroll);i.each(function(){o.StoreData(this,"select2-scroll-position",{x:u(this).scrollLeft(),y:u(this).scrollTop()})}),i.on(r,function(e){var t=o.GetData(this,"select2-scroll-position");u(this).scrollTop(t.y)}),u(window).on(r+" "+a+" "+t,function(e){n._positionDropdown(),n._resizeDropdown()})},e.prototype._detachPositioningHandler=function(e,t){var n="scroll.select2."+t.id,r="resize.select2."+t.id,t="orientationchange.select2."+t.id;this.$container.parents().filter(o.hasScroll).off(n),u(window).off(n+" "+r+" "+t)},e.prototype._positionDropdown=function(){var e=u(window),t=this.$dropdown[0].classList.contains("select2-dropdown--above"),n=this.$dropdown[0].classList.contains("select2-dropdown--below"),r=null,a=this.$container.offset(),i=(a.bottom=a.top+this.$container.outerHeight(!1),{height:this.$container.outerHeight(!1)});i.top=a.top,i.bottom=a.top+i.height;var o=this.$dropdown.outerHeight(!1),s=e.scrollTop(),e=e.scrollTop()+e.height(),s=s<a.top-o,e=e>a.bottom+o,a={left:a.left,top:i.bottom},l=this.$dropdownParent,c=("static"===l.css("position")&&(l=l.offsetParent()),{top:0,left:0});(u.contains(document.body,l[0])||l[0].isConnected)&&(c=l.offset()),a.top-=c.top,a.left-=c.left,t||n||(r="below"),e||!s||t?!s&&e&&t&&(r="below"):r="above",("above"==r||t&&"below"!==r)&&(a.top=i.top-c.top-o),null!=r&&(this.$dropdown[0].classList.remove("select2-dropdown--below"),this.$dropdown[0].classList.remove("select2-dropdown--above"),this.$dropdown[0].classList.add("select2-dropdown--"+r),this.$container[0].classList.remove("select2-container--below"),this.$container[0].classList.remove("select2-container--above"),this.$container[0].classList.add("select2-container--"+r)),this.$dropdownContainer.css(a)},e.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},e.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},e}),e.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(e,t,n,r){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,r)}return e.prototype.showSearch=function(e,t){return!(function e(t){for(var n=0,r=0;r<t.length;r++){var a=t[r];a.children?n+=e(a.children):n++}return n}(t.data.results)<this.minimumResultsForSearch)&&e.call(this,t)},e}),e.define("select2/dropdown/selectOnClose",["../utils"],function(n){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("close",function(e){r._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){t=t.originalSelect2Event;if("select"===t._type||"unselect"===t._type)return}var t=this.getHighlightedResults();t.length<1||(null!=(t=n.GetData(t[0],"data")).element&&t.element.selected||null==t.element&&t.selected||this.trigger("select",{data:t}))},e}),e.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var r=this;e.call(this,t,n),t.on("select",function(e){r._selectTriggered(e)}),t.on("unselect",function(e){r._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&(n.ctrlKey||n.metaKey)||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e}),e.define("select2/dropdown/dropdownCss",["../utils"],function(n){function e(){}return e.prototype.render=function(e){var e=e.call(this),t=this.options.get("dropdownCssClass")||"";return-1!==t.indexOf(":all:")&&(t=t.replace(":all:",""),n.copyNonInternalCssClasses(e[0],this.$element[0])),e.addClass(t),e},e}),e.define("select2/dropdown/tagsSearchHighlight",["../utils"],function(r){function e(){}return e.prototype.highlightFirstItem=function(e){var t=this.$results.find(".select2-results__option--selectable:not(.select2-results__option--selected)");if(0<t.length){var t=t.first(),n=r.GetData(t[0],"data").element;if(n&&n.getAttribute&&"true"===n.getAttribute("data-select2-tag"))return void t.trigger("mouseenter")}e.call(this)},e}),e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var e=e.input.length-e.maximum,t="Please delete "+e+" character";return 1!=e&&(t+="s"),t},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"},search:function(){return"Search"}}}),e.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./dropdown/tagsSearchHighlight","./i18n/en"],function(l,i,o,s,c,u,d,f,p,h,m,t,g,y,v,b,x,_,w,T,k,A,M,E,S,L,C,O,D,I,e){function n(){this.reset()}return n.prototype.apply=function(e){null==(e=l.extend(!0,{},this.defaults,e)).dataAdapter&&(null!=e.ajax?e.dataAdapter=v:null!=e.data?e.dataAdapter=y:e.dataAdapter=g,0<e.minimumInputLength&&(e.dataAdapter=h.Decorate(e.dataAdapter,_)),0<e.maximumInputLength&&(e.dataAdapter=h.Decorate(e.dataAdapter,w)),0<e.maximumSelectionLength&&(e.dataAdapter=h.Decorate(e.dataAdapter,T)),e.tags&&(e.dataAdapter=h.Decorate(e.dataAdapter,b)),null==e.tokenSeparators&&null==e.tokenizer||(e.dataAdapter=h.Decorate(e.dataAdapter,x))),null==e.resultsAdapter&&(e.resultsAdapter=i,null!=e.ajax&&(e.resultsAdapter=h.Decorate(e.resultsAdapter,E)),null!=e.placeholder&&(e.resultsAdapter=h.Decorate(e.resultsAdapter,M)),e.selectOnClose&&(e.resultsAdapter=h.Decorate(e.resultsAdapter,C)),e.tags&&(e.resultsAdapter=h.Decorate(e.resultsAdapter,I))),null==e.dropdownAdapter&&(e.multiple?e.dropdownAdapter=k:(t=h.Decorate(k,A),e.dropdownAdapter=t),0!==e.minimumResultsForSearch&&(e.dropdownAdapter=h.Decorate(e.dropdownAdapter,L)),e.closeOnSelect&&(e.dropdownAdapter=h.Decorate(e.dropdownAdapter,O)),null!=e.dropdownCssClass&&(e.dropdownAdapter=h.Decorate(e.dropdownAdapter,D)),e.dropdownAdapter=h.Decorate(e.dropdownAdapter,S)),null==e.selectionAdapter&&(e.multiple?e.selectionAdapter=s:e.selectionAdapter=o,null!=e.placeholder&&(e.selectionAdapter=h.Decorate(e.selectionAdapter,c)),e.allowClear&&(e.selectionAdapter=h.Decorate(e.selectionAdapter,u)),e.multiple&&(e.selectionAdapter=h.Decorate(e.selectionAdapter,d)),null!=e.selectionCssClass&&(e.selectionAdapter=h.Decorate(e.selectionAdapter,f)),e.selectionAdapter=h.Decorate(e.selectionAdapter,p)),e.language=this._resolveLanguage(e.language),e.language.push("en");for(var t,n=[],r=0;r<e.language.length;r++){var a=e.language[r];-1===n.indexOf(a)&&n.push(a)}return e.language=n,e.translations=this._processTranslations(e.language,e.debug),e},n.prototype.reset=function(){function s(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return t[e]||e})}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:h.escapeMarkup,language:{},matcher:function e(t,n){if(null==t.term||""===t.term.trim())return n;if(n.children&&0<n.children.length){for(var r=l.extend(!0,{},n),a=n.children.length-1;0<=a;a--)null==e(t,n.children[a])&&r.children.splice(a,1);return 0<r.children.length?r:e(t,r)}var i=s(n.text).toUpperCase(),o=s(t.term).toUpperCase();return-1<i.indexOf(o)?n:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},n.prototype.applyFromElement=function(e,t){var n=e.language,r=this.defaults.language,a=t.prop("lang"),t=t.closest("[lang]").prop("lang"),a=Array.prototype.concat.call(this._resolveLanguage(a),this._resolveLanguage(n),this._resolveLanguage(r),this._resolveLanguage(t));return e.language=a,e},n.prototype._resolveLanguage=function(e){if(!e)return[];if(l.isEmptyObject(e))return[];if(l.isPlainObject(e))return[e];for(var t,n=Array.isArray(e)?e:[e],r=[],a=0;a<n.length;a++)r.push(n[a]),"string"==typeof n[a]&&0<n[a].indexOf("-")&&(t=n[a].split("-")[0],r.push(t));return r},n.prototype._processTranslations=function(e,t){for(var n=new m,r=0;r<e.length;r++){var a=new m,i=e[r];if("string"==typeof i)try{a=m.loadPath(i)}catch(e){try{i=this.defaults.amdLanguageBase+i,a=m.loadPath(i)}catch(e){t&&window.console&&console.warn&&console.warn('Select2: The language file for "'+i+'" could not be automatically loaded. A fallback will be used instead.')}}else a=l.isPlainObject(i)?new m(i):i;n.extend(a)}return n},n.prototype.set=function(e,t){var n={},e=(n[l.camelCase(e)]=t,h._convertData(n));l.extend(!0,this.defaults,e)},new n}),e.define("select2/options",["jquery","./defaults","./utils"],function(c,n,u){function e(e,t){this.options=e,null!=t&&this.fromElement(t),null!=t&&(this.options=n.applyFromElement(this.options,t)),this.options=n.apply(this.options)}return e.prototype.fromElement=function(e){var t=["select2"],n=(null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.autocomplete&&e.prop("autocomplete")&&(this.options.autocomplete=e.prop("autocomplete")),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),u.GetData(e[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),u.StoreData(e[0],"data",u.GetData(e[0],"select2Tags")),u.StoreData(e[0],"tags",!0)),u.GetData(e[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",u.GetData(e[0],"ajaxUrl")),u.StoreData(e[0],"ajax-Url",u.GetData(e[0],"ajaxUrl"))),{});function r(e,t){return t.toUpperCase()}for(var a=0;a<e[0].attributes.length;a++){var i,o=e[0].attributes[a].name;"data-"==o.substr(0,"data-".length)&&(o=o.substring("data-".length),i=u.GetData(e[0],o),n[o.replace(/-([a-z])/g,r)]=i)}c.fn.jquery&&"1."==c.fn.jquery.substr(0,2)&&e[0].dataset&&(n=c.extend(!0,{},e[0].dataset,n));var s,l=c.extend(!0,{},u.GetData(e[0]),n);for(s in l=u._convertData(l))-1<t.indexOf(s)||(c.isPlainObject(this.options[s])?c.extend(this.options[s],l[s]):this.options[s]=l[s]);return this},e.prototype.get=function(e){return this.options[e]},e.prototype.set=function(e,t){this.options[e]=t},e}),e.define("select2/core",["jquery","./options","./utils","./keys"],function(t,a,i,r){function o(e,t){null!=i.GetData(e[0],"select2")&&i.GetData(e[0],"select2").destroy(),this.$element=e,this.id=this._generateId(e),this.options=new a(t=t||{},e),o.__super__.constructor.call(this);var t=e.attr("tabindex")||0,t=(i.StoreData(e[0],"old-tabindex",t),e.attr("tabindex","-1"),this.options.get("dataAdapter")),t=(this.dataAdapter=new t(e,this.options),this.render()),n=(this._placeContainer(t),this.options.get("selectionAdapter")),n=(this.selection=new n(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,t),this.options.get("dropdownAdapter")),n=(this.dropdown=new n(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,t),this.options.get("resultsAdapter")),r=(this.results=new n(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown),this);this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){r.trigger("selection:update",{data:e})}),e[0].classList.add("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),i.StoreData(e[0],"select2",this),e.data("select2",this)}return i.Extend(o,i.Observable),o.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+i.generateChars(2):i.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},o.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},o.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t)return null!=(r=this._resolveWidth(e,"style"))?r:this._resolveWidth(e,"element");if("element"==t)return(r=e.outerWidth(!1))<=0?"auto":r+"px";if("style"!=t)return"computedstyle"==t?window.getComputedStyle(e[0]).width:t;var r=e.attr("style");if("string"==typeof r)for(var a=r.split(";"),i=0,o=a.length;i<o;i+=1){var s=a[i].replace(/\s/g,"").match(n);if(null!==s&&1<=s.length)return s[1]}return null},o.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},o.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=i.bind(this._syncAttributes,this),this._syncS=i.bind(this._syncSubtree,this),this._observer=new window.MutationObserver(function(e){t._syncA(),t._syncS(e)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})},o.prototype._registerDataEvents=function(){var n=this;this.dataAdapter.on("*",function(e,t){n.trigger(e,t)})},o.prototype._registerSelectionEvents=function(){var n=this,r=["toggle","focus"];this.selection.on("toggle",function(){n.toggleDropdown()}),this.selection.on("focus",function(e){n.focus(e)}),this.selection.on("*",function(e,t){-1===r.indexOf(e)&&n.trigger(e,t)})},o.prototype._registerDropdownEvents=function(){var n=this;this.dropdown.on("*",function(e,t){n.trigger(e,t)})},o.prototype._registerResultsEvents=function(){var n=this;this.results.on("*",function(e,t){n.trigger(e,t)})},o.prototype._registerEvents=function(){var n=this;this.on("open",function(){n.$container[0].classList.add("select2-container--open")}),this.on("close",function(){n.$container[0].classList.remove("select2-container--open")}),this.on("enable",function(){n.$container[0].classList.remove("select2-container--disabled")}),this.on("disable",function(){n.$container[0].classList.add("select2-container--disabled")}),this.on("blur",function(){n.$container[0].classList.remove("select2-container--focus")}),this.on("query",function(t){n.isOpen()||n.trigger("open",{}),this.dataAdapter.query(t,function(e){n.trigger("results:all",{data:e,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(e){n.trigger("results:append",{data:e,query:t})})}),this.on("keypress",function(e){var t=e.which;n.isOpen()?t===r.ESC||t===r.UP&&e.altKey?(n.close(e),e.preventDefault()):t===r.ENTER||t===r.TAB?(n.trigger("results:select",{}),e.preventDefault()):t===r.SPACE&&e.ctrlKey?(n.trigger("results:toggle",{}),e.preventDefault()):t===r.UP?(n.trigger("results:previous",{}),e.preventDefault()):t===r.DOWN&&(n.trigger("results:next",{}),e.preventDefault()):(t===r.ENTER||t===r.SPACE||t===r.DOWN&&e.altKey)&&(n.open(),e.preventDefault())})},o.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},o.prototype._isChangeMutation=function(e){var t=this;if(e.addedNodes&&0<e.addedNodes.length){for(var n=0;n<e.addedNodes.length;n++)if(e.addedNodes[n].selected)return!0}else{if(e.removedNodes&&0<e.removedNodes.length)return!0;if(Array.isArray(e))return e.some(function(e){return t._isChangeMutation(e)})}return!1},o.prototype._syncSubtree=function(e){var e=this._isChangeMutation(e),t=this;e&&this.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})},o.prototype.trigger=function(e,t){var n=o.__super__.trigger,r={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===t&&(t={}),e in r){var a={prevented:!1,name:e,args:t};if(n.call(this,r[e],a),a.prevented)return void(t.prevented=!0)}n.call(this,e,t)},o.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},o.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},o.prototype.close=function(e){this.isOpen()&&this.trigger("close",{originalEvent:e})},o.prototype.isEnabled=function(){return!this.isDisabled()},o.prototype.isDisabled=function(){return this.options.get("disabled")},o.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")},o.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")},o.prototype.focus=function(e){this.hasFocus()||(this.$container[0].classList.add("select2-container--focus"),this.trigger("focus",{}))},o.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.');e=!(e=null!=e&&0!==e.length?e:[!0])[0];this.$element.prop("disabled",e)},o.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current(function(e){t=e}),t},o.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();e=e[0];Array.isArray(e)&&(e=e.map(function(e){return e.toString()})),this.$element.val(e).trigger("input").trigger("change")},o.prototype.destroy=function(){i.RemoveData(this.$container[0]),this.$container.remove(),this._observer.disconnect(),this._observer=null,this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",i.GetData(this.$element[0],"old-tabindex")),this.$element[0].classList.remove("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),i.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},o.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container[0].classList.add("select2-container--"+this.options.get("theme")),i.StoreData(e[0],"element",this.$element),e},o}),e.define("jquery-mousewheel",["jquery"],function(e){return e}),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(a,e,i,t,o){var s;return null==a.fn.select2&&(s=["open","close","destroy"],a.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each(function(){var e=a.extend(!0,{},t);new i(a(this),e)}),this;var n,r;if("string"==typeof t)return r=Array.prototype.slice.call(arguments,1),this.each(function(){var e=o.GetData(this,"select2");null==e&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),n=e[t].apply(e,r)}),-1<s.indexOf(t)?this:n;throw new Error("Invalid arguments for Select2: "+t)}),null==a.fn.select2.defaults&&(a.fn.select2.defaults=t),i});var e,n,f,i,o,p,h,m,g,y,v,r,a,b,s={define:e.define,require:e.require};function x(e,t){return r.call(e,t)}function l(e,t){var n,r,a,i,o,s,l,c,u,d,f=t&&t.split("/"),p=y.map,h=p&&p["*"]||{};if(e){for(t=(e=e.split("/")).length-1,y.nodeIdCompat&&b.test(e[t])&&(e[t]=e[t].replace(b,"")),"."===e[0].charAt(0)&&f&&(e=f.slice(0,f.length-1).concat(e)),c=0;c<e.length;c++)"."===(d=e[c])?(e.splice(c,1),--c):".."!==d||0===c||1===c&&".."===e[2]||".."===e[c-1]||0<c&&(e.splice(c-1,2),c-=2);e=e.join("/")}if((f||h)&&p){for(c=(n=e.split("/")).length;0<c;--c){if(r=n.slice(0,c).join("/"),f)for(u=f.length;0<u;--u)if(a=(a=p[f.slice(0,u).join("/")])&&a[r]){i=a,o=c;break}if(i)break;!s&&h&&h[r]&&(s=h[r],l=c)}!i&&s&&(i=s,o=l),i&&(n.splice(0,o,i),e=n.join("/"))}return e}function _(t,n){return function(){var e=a.call(arguments,0);return"string"!=typeof e[0]&&1===e.length&&e.push(null),o.apply(f,e.concat([t,n]))}}function w(e){var t;if(x(g,e)&&(t=g[e],delete g[e],v[e]=!0,i.apply(f,t)),x(m,e)||x(v,e))return m[e];throw new Error("No "+e)}function c(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function T(e){return e?c(e):[]}var u=s.require("jquery.select2");return t.fn.select2.amd=s,u}),!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Plotly=e()}(function(){return function r(a,i,o){function s(t,e){if(!i[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=i[t]={exports:{}},a[t][0].call(n.exports,function(e){return s(a[t][1][e]||e)},n,n.exports,r,a,i,o)}return i[t].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)s(o[e]);return s}({1:[function(e,t,n){"use strict";var r,a=e("../src/lib"),i={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(r in i){var o=r.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");a.addStyleRule(o,i[r])}},{"../src/lib":287}],2:[function(e,t,n){"use strict";t.exports=e("../src/transforms/aggregate")},{"../src/transforms/aggregate":547}],3:[function(e,t,n){"use strict";t.exports=e("../src/traces/bar")},{"../src/traces/bar":396}],4:[function(e,t,n){"use strict";t.exports=e("../src/traces/box")},{"../src/traces/box":411}],5:[function(e,t,n){"use strict";t.exports=e("../src/components/calendars")},{"../src/components/calendars":155}],6:[function(e,t,n){"use strict";t.exports=e("../src/traces/contour")},{"../src/traces/contour":431}],7:[function(e,t,n){"use strict";t.exports=e("../src/core")},{"../src/core":269}],8:[function(e,t,n){"use strict";t.exports=e("../src/transforms/filter")},{"../src/transforms/filter":548}],9:[function(e,t,n){"use strict";t.exports=e("../src/transforms/groupby")},{"../src/transforms/groupby":549}],10:[function(e,t,n){"use strict";t.exports=e("../src/traces/heatmap")},{"../src/traces/heatmap":447}],11:[function(e,t,n){"use strict";t.exports=e("../src/traces/histogram")},{"../src/traces/histogram":466}],12:[function(e,t,n){"use strict";t.exports=e("../src/traces/histogram2d")},{"../src/traces/histogram2d":472}],13:[function(e,t,n){"use strict";t.exports=e("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":476}],14:[function(e,t,n){"use strict";t.exports=e("../src/traces/image")},{"../src/traces/image":484}],15:[function(e,t,n){"use strict";var r=e("./core");r.register([e("./bar"),e("./box"),e("./heatmap"),e("./histogram"),e("./histogram2d"),e("./histogram2dcontour"),e("./contour"),e("./scatterternary"),e("./violin"),e("./image"),e("./pie"),e("./aggregate"),e("./filter"),e("./groupby"),e("./sort"),e("./calendars")]),t.exports=r},{"./aggregate":2,"./bar":3,"./box":4,"./calendars":5,"./contour":6,"./core":7,"./filter":8,"./groupby":9,"./heatmap":10,"./histogram":11,"./histogram2d":12,"./histogram2dcontour":13,"./image":14,"./pie":16,"./scatterternary":17,"./sort":18,"./violin":19}],16:[function(e,t,n){"use strict";t.exports=e("../src/traces/pie")},{"../src/traces/pie":493}],17:[function(e,t,n){"use strict";t.exports=e("../src/traces/scatterternary")},{"../src/traces/scatterternary":534}],18:[function(e,t,n){"use strict";t.exports=e("../src/transforms/sort")},{"../src/transforms/sort":551}],19:[function(e,t,n){"use strict";t.exports=e("../src/traces/violin")},{"../src/traces/violin":542}],20:[function(e,Ba,t){!function(){var I={version:"3.8.0"},E=[].slice,f=function(e){return E.call(e)},R=self.document;function S(e){return e&&(e.ownerDocument||e.document||e).documentElement}function P(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(R)try{f(R.documentElement.childNodes)[0].nodeType}catch(e){f=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),R)try{R.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var t=this.Element.prototype,L=t.setAttribute,q=t.setAttributeNS,n=this.CSSStyleDeclaration.prototype,H=n.setProperty;t.setAttribute=function(e,t){L.call(this,e,t+"")},t.setAttributeNS=function(e,t,n){q.call(this,e,t,n+"")},n.setProperty=function(e,t,n){H.call(this,e,t+"",n)}}function o(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function c(e){return null===e?NaN:+e}function u(e){return!isNaN(e)}function e(i){return{left:function(e,t,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);n<r;){var a=n+r>>>1;i(e[a],t)<0?n=1+a:r=a}return n},right:function(e,t,n,r){for(arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);n<r;){var a=n+r>>>1;0<i(e[a],t)?r=a:n=1+a}return n}}}I.ascending=o,I.descending=function(e,t){return t<e?-1:e<t?1:e<=t?0:NaN},I.min=function(e,t){var n,r,a=-1,i=e.length;if(1===arguments.length){for(;++a<i;)if(null!=(r=e[a])&&r<=r){n=r;break}for(;++a<i;)null!=(r=e[a])&&r<n&&(n=r)}else{for(;++a<i;)if(null!=(r=t.call(e,e[a],a))&&r<=r){n=r;break}for(;++a<i;)null!=(r=t.call(e,e[a],a))&&r<n&&(n=r)}return n},I.max=function(e,t){var n,r,a=-1,i=e.length;if(1===arguments.length){for(;++a<i;)if(null!=(r=e[a])&&r<=r){n=r;break}for(;++a<i;)null!=(r=e[a])&&n<r&&(n=r)}else{for(;++a<i;)if(null!=(r=t.call(e,e[a],a))&&r<=r){n=r;break}for(;++a<i;)null!=(r=t.call(e,e[a],a))&&n<r&&(n=r)}return n},I.extent=function(e,t){var n,r,a,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r<=r){n=a=r;break}for(;++i<o;)null!=(r=e[i])&&(r<n&&(n=r),a<r&&(a=r))}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r<=r){n=a=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&(r<n&&(n=r),a<r&&(a=r))}return[n,a]},I.sum=function(e,t){var n,r=0,a=e.length,i=-1;if(1===arguments.length)for(;++i<a;)u(n=+e[i])&&(r+=n);else for(;++i<a;)u(n=+t.call(e,e[i],i))&&(r+=n);return r},I.mean=function(e,t){var n,r=0,a=e.length,i=-1,o=a;if(1===arguments.length)for(;++i<a;)u(n=c(e[i]))?r+=n:--o;else for(;++i<a;)u(n=c(t.call(e,e[i],i)))?r+=n:--o;if(o)return r/o},I.quantile=function(e,t){var t=(e.length-1)*t+1,n=Math.floor(t),r=+e[n-1],t=t-n;return t?r+t*(e[n]-r):r},I.median=function(e,t){var n,r=[],a=e.length,i=-1;if(1===arguments.length)for(;++i<a;)u(n=c(e[i]))&&r.push(n);else for(;++i<a;)u(n=c(t.call(e,e[i],i)))&&r.push(n);if(r.length)return I.quantile(r.sort(o),.5)},I.variance=function(e,t){var n,r,a=e.length,i=0,o=0,s=-1,l=0;if(1===arguments.length)for(;++s<a;)u(n=c(e[s]))&&(o+=(r=n-i)*(n-(i+=r/++l)));else for(;++s<a;)u(n=c(t.call(e,e[s],s)))&&(o+=(r=n-i)*(n-(i+=r/++l)));if(1<l)return o/(l-1)},I.deviation=function(){var e=I.variance.apply(this,arguments);return e&&Math.sqrt(e)};t=e(o);function B(e){return e.length}I.bisectLeft=t.left,I.bisect=I.bisectRight=t.right,I.bisector=function(n){return e(1===n.length?function(e,t){return o(n(e),t)}:n)},I.shuffle=function(e,t,n){(i=arguments.length)<3&&(n=e.length,i<2&&(t=0));for(var r,a,i=n-t;i;)a=Math.random()*i--|0,r=e[i+t],e[i+t]=e[a+t],e[a+t]=r;return e},I.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},I.pairs=function(e){for(var t=0,n=e.length-1,r=e[0],a=new Array(n<0?0:n);t<n;)a[t]=[r,r=e[++t]];return a},I.transpose=function(e){if(!(a=e.length))return[];for(var t=-1,n=I.min(e,B),r=new Array(n);++t<n;)for(var a,i=-1,o=r[t]=new Array(a);++i<a;)o[i]=e[i][t];return r},I.zip=function(){return I.transpose(arguments)},I.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},I.values=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},I.entries=function(e){var t,n=[];for(t in e)n.push({key:t,value:e[t]});return n},I.merge=function(e){for(var t,n,r,a=e.length,i=-1,o=0;++i<a;)o+=e[i].length;for(n=new Array(o);0<=--a;)for(t=(r=e[a]).length;0<=--t;)n[--o]=r[t];return n};var M=Math.abs;function U(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function v(){this._=Object.create(null)}I.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var r,a=[],i=function(e){var t=1;for(;e*t%1;)t*=10;return t}(M(n)),o=-1;if(e*=i,t*=i,(n*=i)<0)for(;(r=e+n*++o)>t;)a.push(r/i);else for(;(r=e+n*++o)<t;)a.push(r/i);return a},I.map=function(e,t){var n=new v;if(e instanceof v)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,a=-1,i=e.length;if(1===arguments.length)for(;++a<i;)n.set(a,e[a]);else for(;++a<i;)n.set(t.call(e,r=e[a],a),r)}else for(var o in e)n.set(o,e[o]);return n};var V="__proto__",Y="\0";function $(e){return(e+="")===V||e[0]===Y?Y+e:e}function G(e){return(e+="")[0]===Y?e.slice(1):e}function W(e){return $(e)in this._}function Z(e){return(e=$(e))in this._&&delete this._[e]}function X(){var e,t=[];for(e in this._)t.push(G(e));return t}function J(){var e,t=0;for(e in this._)++t;return t}function K(){for(var e in this._)return!1;return!0}function Q(){this._=Object.create(null)}function C(e){return e}function ee(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=te.length;n<r;++n){var a=te[n]+t;if(a in e)return a}}U(v,{has:W,get:function(e){return this._[$(e)]},set:function(e,t){return this._[$(e)]=t},remove:Z,keys:X,values:function(){var e,t=[];for(e in this._)t.push(this._[e]);return t},entries:function(){var e,t=[];for(e in this._)t.push({key:G(e),value:this._[e]});return t},size:J,empty:K,forEach:function(e){for(var t in this._)e.call(this,G(t),this._[t])}}),I.nest=function(){var d,f,p={},h=[],t=[];function m(n,e,r){if(r>=h.length)return f?f.call(p,e):d?e.sort(d):e;for(var t,a,i,o,s=-1,l=e.length,c=h[r++],u=new v;++s<l;)(o=u.get(t=c(a=e[s])))?o.push(a):u.set(t,[a]);return i=n?(a=n(),function(e,t){a.set(e,m(n,t,r))}):(a={},function(e,t){a[e]=m(n,t,r)}),u.forEach(i),a}return p.map=function(e,t){return m(t,e,0)},p.entries=function(e){return function n(e,r){if(r>=h.length)return e;var a=[],i=t[r++];return e.forEach(function(e,t){a.push({key:e,values:n(t,r)})}),i?a.sort(function(e,t){return i(e.key,t.key)}):a}(m(I.map,e,0),0)},p.key=function(e){return h.push(e),p},p.sortKeys=function(e){return t[h.length-1]=e,p},p.sortValues=function(e){return d=e,p},p.rollup=function(e){return f=e,p},p},I.set=function(e){var t=new Q;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},U(Q,{has:W,add:function(e){return this._[$(e+="")]=!0,e},remove:Z,values:X,size:J,empty:K,forEach:function(e){for(var t in this._)e.call(this,G(t))}}),I.behavior={},I.rebind=function(e,t){for(var n,r=1,a=arguments.length;++r<a;)e[n=arguments[r]]=function(t,n,r){return function(){var e=r.apply(n,arguments);return e===n?t:e}}(e,t,t[n]);return e};var te=["webkit","ms","moz","Moz","o","O"];function ne(){}function re(){}function ae(a){var i=[],r=new v;function e(){for(var e,t=i,n=-1,r=t.length;++n<r;)(e=t[n].on)&&e.apply(this,arguments);return a}return e.on=function(e,t){var n=r.get(e);return arguments.length<2?n&&n.on:(n&&(n.on=null,i=i.slice(0,n=i.indexOf(n)).concat(i.slice(n+1)),r.remove(e)),t&&i.push(r.set(e,{on:t})),a)},e}function N(){I.event.preventDefault()}function ie(){for(var e,t=I.event;e=t.sourceEvent;)t=e;return t}function oe(a){for(var i=new re,e=0,t=arguments.length;++e<t;)i[arguments[e]]=ae(i);return i.of=function(n,r){return function(e){try{var t=e.sourceEvent=I.event;e.target=a,I.event=e,i[e.type].apply(n,r)}finally{I.event=t}}},i}I.dispatch=function(){for(var e=new re,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=ae(e);return e},re.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(0<=n&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},I.event=null,I.requote=function(e){return e.replace(se,"\\$&")};var se=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,le={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function d(e){return le(e,r),e}var ce=function(e,t){return t.querySelector(e)},ue=function(e,t){return t.querySelectorAll(e)},de=function(e,t){var n=e.matches||e[ee(e,"matchesSelector")];return(de=function(e,t){return n.call(e,t)})(e,t)},r=("function"==typeof Sizzle&&(ce=function(e,t){return Sizzle(e,t)[0]||null},de=(ue=Sizzle).matchesSelector),I.selection=function(){return I.select(R.documentElement)},I.selection.prototype=[]);function fe(e){return"function"==typeof e?e:function(){return ce(e,this)}}function pe(e){return"function"==typeof e?e:function(){return ue(e,this)}}r.select=function(e){var t,n,r,a,i=[];e=fe(e);for(var o=-1,s=this.length;++o<s;){i.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var l=-1,c=r.length;++l<c;)(a=r[l])?(t.push(n=e.call(a,a.__data__,l,o)),n&&"__data__"in a&&(n.__data__=a.__data__)):t.push(null)}return d(i)},r.selectAll=function(e){var t,n,r=[];e=pe(e);for(var a=-1,i=this.length;++a<i;)for(var o=this[a],s=-1,l=o.length;++s<l;)(n=o[s])&&(r.push(t=f(e.call(n,n.__data__,s,a))),t.parentNode=n);return d(r)};var he="http://www.w3.org/1999/xhtml",me={svg:"http://www.w3.org/2000/svg",xhtml:he,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ge(t,n){return t=I.ns.qualify(t),null==n?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof n?t.local?function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}:function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}:t.local?function(){this.setAttributeNS(t.space,t.local,n)}:function(){this.setAttribute(t,n)}}function ye(e){return e.trim().replace(/\s+/g," ")}function ve(e){return new RegExp("(?:^|\\s+)"+I.requote(e)+"(?:\\s+|$)","g")}function be(e){return(e+"").trim().split(/^|\s+/)}function xe(n,r){var a=(n=be(n).map(_e)).length;return"function"==typeof r?function(){for(var e=-1,t=r.apply(this,arguments);++e<a;)n[e](this,t)}:function(){for(var e=-1;++e<a;)n[e](this,r)}}function _e(r){var a=ve(r);return function(e,t){if(n=e.classList)return t?n.add(r):n.remove(r);var n=e.getAttribute("class")||"";t?(a.lastIndex=0,a.test(n)||e.setAttribute("class",ye(n+" "+r))):e.setAttribute("class",ye(n.replace(a," ")))}}function we(t,n,r){return null==n?function(){this.style.removeProperty(t)}:"function"==typeof n?function(){var e=n.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,r)}:function(){this.style.setProperty(t,n,r)}}function Te(t,n){return null==n?function(){delete this[t]}:"function"==typeof n?function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}:function(){this[t]=n}}function ke(n){return"function"==typeof n?n:(n=I.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){var e=this.ownerDocument,t=this.namespaceURI;return t===he&&e.documentElement.namespaceURI===he?e.createElement(n):e.createElementNS(t,n)}}function Ae(){var e=this.parentNode;e&&e.removeChild(this)}function Me(e){return{__data__:e}}function Ee(e){return function(){return de(this,e)}}function l(e,t){for(var n=0,r=e.length;n<r;n++)for(var a,i=e[n],o=0,s=i.length;o<s;o++)(a=i[o])&&t(a,o,n);return e}function Se(e){return le(e,a),e}I.ns={prefix:me,qualify:function(e){var t=e.indexOf(":"),n=e;return 0<=t&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),me.hasOwnProperty(n)?{space:me[n],local:e}:e}},r.attr=function(e,t){if(arguments.length<2){var n;if("string"==typeof e)return n=this.node(),(e=I.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e);for(t in e)this.each(ge(t,e[t]));return this}return this.each(ge(e,t))},r.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=be(e)).length,a=-1;if(t=n.classList){for(;++a<r;)if(!t.contains(e[a]))return!1}else for(t=n.getAttribute("class");++a<r;)if(!ve(e[a]).test(t))return!1;return!0}for(t in e)this.each(xe(t,e[t]));return this}return this.each(xe(e,t))},r.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.each(we(n,e[n],t));return this}if(r<2)return P(r=this.node()).getComputedStyle(r,null).getPropertyValue(e);n=""}return this.each(we(e,t,n))},r.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(Te(t,e[t]));return this}return this.each(Te(e,t))},r.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},r.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},r.append=function(e){return e=ke(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},r.insert=function(e,t){return e=ke(e),t=fe(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},r.remove=function(){return this.each(Ae)},r.data=function(e,h){var t,n,r=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(t=this[0]).length);++r<a;)(n=t[r])&&(e[r]=n.__data__);return e}function i(e,t){var n,r,a=e.length,i=t.length,o=Math.min(a,i),s=new Array(i),l=new Array(i),c=new Array(a);if(h){for(var u,d=new v,f=new Array(a),p=-1;++p<a;)(n=e[p])&&(d.has(u=h.call(n,n.__data__,p))?c[p]=n:d.set(u,n),f[p]=u);for(p=-1;++p<i;)(n=d.get(u=h.call(t,r=t[p],p)))?!0!==n&&((s[p]=n).__data__=r):l[p]=Me(r),d.set(u,!0);for(p=-1;++p<a;)p in f&&!0!==d.get(f[p])&&(c[p]=e[p])}else{for(p=-1;++p<o;)n=e[p],r=t[p],n?(n.__data__=r,s[p]=n):l[p]=Me(r);for(;p<i;++p)l[p]=Me(t[p]);for(;p<a;++p)c[p]=e[p]}l.update=s,l.parentNode=s.parentNode=c.parentNode=e.parentNode,m.push(l),g.push(s),y.push(c)}var m=Se([]),g=d([]),y=d([]);if("function"==typeof e)for(;++r<a;)i(t=this[r],e.call(t,t.parentNode.__data__,r));else for(;++r<a;)i(t=this[r],e);return g.enter=function(){return m},g.exit=function(){return y},g},r.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},r.filter=function(e){var t,n,r,a=[];"function"!=typeof e&&(e=Ee(e));for(var i=0,o=this.length;i<o;i++){a.push(t=[]),t.parentNode=(n=this[i]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&e.call(r,r.__data__,s,i)&&t.push(r)}return d(a)},r.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],a=r.length-1,i=r[a];0<=--a;)(n=r[a])&&(i&&i!==n.nextSibling&&i.parentNode.insertBefore(n,i),i=n);return this},r.sort=function(e){e=function(n){arguments.length||(n=o);return function(e,t){return e&&t?n(e.__data__,t.__data__):!e-!t}}.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},r.each=function(r){return l(this,function(e,t,n){r.call(e,e.__data__,t,n)})},r.call=function(e){var t=f(arguments);return e.apply(t[0]=this,t),this},r.empty=function(){return!this.node()},r.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,a=n.length;r<a;r++){var i=n[r];if(i)return i}return null},r.size=function(){var e=0;return l(this,function(){++e}),e};var a=[];function Le(a,t,n){var r="__on"+a,e=a.indexOf("."),i=Oe,o=(0<e&&(a=a.slice(0,e)),Ce.get(a));function s(){var e=this[r];e&&(this.removeEventListener(a,e,e.$),delete this[r])}return o&&(a=o,i=De),e?t?function(){var e=i(t,f(arguments));s.call(this),this.addEventListener(a,this[r]=e,e.$=n),e._=t}:s:t?ne:function(){var e,t,n,r=new RegExp("^__on([^.]+)"+I.requote(a)+"$");for(t in this)(e=t.match(r))&&(n=this[t],this.removeEventListener(e[1],n,n.$),delete this[t])}}I.selection.enter=Se,(I.selection.enter.prototype=a).append=r.append,a.empty=r.empty,a.node=r.node,a.call=r.call,a.size=r.size,a.select=function(e){for(var t,n,r,a,i,o=[],s=-1,l=this.length;++s<l;){r=(a=this[s]).update,o.push(t=[]),t.parentNode=a.parentNode;for(var c=-1,u=a.length;++c<u;)(i=a[c])?(t.push(r[c]=n=e.call(a.parentNode,i.__data__,c,s)),n.__data__=i.__data__):t.push(null)}return d(o)},a.insert=function(e,t){var o,s,l;return arguments.length<2&&(o=this,t=function(e,t,n){var r,a=o[n].update,i=a.length;for(n!=l&&(l=n,s=0),s<=t&&(s=t+1);!(r=a[s])&&++s<i;);return r}),r.insert.call(this,e,t)},I.select=function(e){var t;return"string"==typeof e?(t=[ce(e,R)]).parentNode=R.documentElement:(t=[e]).parentNode=S(e),d([t])},I.selectAll=function(e){var t;return"string"==typeof e?(t=f(ue(e,R))).parentNode=R.documentElement:(t=f(e)).parentNode=null,d([t])},r.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=!1),e)this.each(Le(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(Le(e,t,n))};var Ce=I.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Oe(n,r){return function(e){var t=I.event;I.event=e,r[0]=this.__data__;try{n.apply(this,r)}finally{I.event=t}}}function De(e,t){var n=Oe(e,t);return function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||n.call(this,e)}}R&&Ce.forEach(function(e){"on"+e in R&&Ce.remove(e)});var s,Ie=0;function Re(e){var n,r,a=".dragsuppress-"+ ++Ie,i="click"+a,o=I.select(P(e)).on("touchmove"+a,N).on("dragstart"+a,N).on("selectstart"+a,N);return(s=null==s?!("onselectstart"in e)&&ee(e.style,"userSelect"):s)&&(n=S(e).style,r=n[s],n[s]="none"),function(e){var t;o.on(a,null),s&&(n[s]=r),e&&(t=function(){o.on(i,null)},o.on(i,function(){N(),t()},!0),setTimeout(t,0))}}I.mouse=function(e){return Ne(e,ie())};var Pe=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ne(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n,r=e.ownerSVGElement||e;if(r.createSVGPoint)return n=r.createSVGPoint(),Pe<0&&(((a=P(e)).scrollX||a.scrollY)&&(a=(r=I.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM(),Pe=!(a.f||a.e),r.remove())),Pe?(n.x=t.pageX,n.y=t.pageY):(n.x=t.clientX,n.y=t.clientY),[(n=n.matrixTransform(e.getScreenCTM().inverse())).x,n.y];var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}function Fe(){return I.event.changedTouches[0].identifier}I.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=ie().changedTouches),t)for(var r,a=0,i=t.length;a<i;++a)if((r=t[a]).identifier===n)return Ne(e,r)},I.behavior.drag=function(){var m=oe(n,"drag","dragstart","dragend"),g=null,e=r(ne,I.mouse,P,"mousemove","mouseup"),t=r(Fe,I.touch,C,"touchmove","touchend");function n(){this.on("mousedown.drag",e).on("touchstart.drag",t)}function r(u,d,f,p,h){return function(){var r,e=I.event.target.correspondingElement||I.event.target,a=this.parentNode,i=m.of(this,arguments),o=0,s=u(),t=".drag"+(null==s?"":"-"+s),n=I.select(f(e)).on(p+t,function(){var e,t,n=d(a,s);n&&(e=n[0]-c[0],t=n[1]-c[1],o|=e|t,i({type:"drag",x:(c=n)[0]+r[0],y:n[1]+r[1],dx:e,dy:t}))}).on(h+t,function(){d(a,s)&&(n.on(p+t,null).on(h+t,null),l(o),i({type:"dragend"}))}),l=Re(e),c=d(a,s);r=g?[(r=g.apply(this,arguments)).x-c[0],r.y-c[1]]:[0,0],i({type:"dragstart"})}}return n.origin=function(e){return arguments.length?(g=e,n):g},I.rebind(n,m,"on")},I.touches=function(n,e){return(e=arguments.length<2?ie().touches:e)?f(e).map(function(e){var t=Ne(n,e);return t.identifier=e.identifier,t}):[]};var O=1e-6,ze=O*O,D=Math.PI,je=2*D,qe=je-O,F=D/2,He=D/180,Be=180/D;function Ue(e){return 1<e?F:e<-1?-F:Math.asin(e)}function Ve(e){return((e=Math.exp(e))+1/e)/2}var Ye,$e,Ge=Math.SQRT2,We=(I.interpolateZoom=function(e,t){var r,a,i,o=e[0],s=e[1],l=e[2],e=t[0],n=t[1],t=t[2],c=e-o,u=n-s,e=c*c+u*u;return(t=e<ze?(i=Math.log(t/l)/Ge,function(e){return[o+e*c,s+e*u,l*Math.exp(Ge*e*i)]}):(r=Math.sqrt(e),n=(t*t-l*l+4*e)/(2*l*2*r),e=(t*t-l*l-4*e)/(2*t*2*r),a=Math.log(Math.sqrt(n*n+1)-n),i=(Math.log(Math.sqrt(e*e+1)-e)-a)/Ge,function(e){var e=e*i,t=Ve(a),n=l/(2*r)*(t*(n=Ge*e+a,((n=Math.exp(2*n))-1)/(n+1))-(n=a,((n=Math.exp(a))-1/n)/2));return[o+n*c,s+n*u,l*t/Ve(Ge*e+a)]})).duration=1e3*i,t},I.behavior.zoom=function(){var t,s,n,r,v,a,i,o,l,b={x:0,y:0,k:1},c=[960,500],u=We,d=250,f=0,x="mousedown.zoom",p="mousemove.zoom",h="mouseup.zoom",_="touchstart.zoom",w=oe(m,"zoomstart","zoom","zoomend");function m(e){e.on(x,C).on($e+".zoom",y).on("dblclick.zoom",D).on(_,O)}function T(e){return[(e[0]-b.x)/b.k,(e[1]-b.y)/b.k]}function k(e){b.k=Math.max(u[0],Math.min(u[1],e))}function A(e,t){var n;t=[(n=t)[0]*b.k+b.x,n[1]*b.k+b.y],b.x+=e[0]-t[0],b.y+=e[1]-t[1]}function M(e,t,n,r){e.__chart__={x:b.x,y:b.y,k:b.k},k(Math.pow(2,r)),A(s=t,n),e=I.select(e),(e=0<d?e.transition().duration(d):e).call(m.event)}function g(){i&&i.domain(a.range().map(function(e){return(e-b.x)/b.k}).map(a.invert)),l&&l.domain(o.range().map(function(e){return(e-b.y)/b.k}).map(o.invert))}function E(e){f++||e({type:"zoomstart"})}function S(e){g(),e({type:"zoom",scale:b.k,translate:[b.x,b.y]})}function L(e){--f||(e({type:"zoomend"}),s=null)}function C(){var e=this,t=w.of(e,arguments),n=0,r=I.select(P(e)).on(p,function(){n=1,A(I.mouse(e),a),S(t)}).on(h,function(){r.on(p,null).on(h,null),i(n),L(t)}),a=T(I.mouse(e)),i=Re(e);Aa.call(e),E(t)}function O(){var l,c=this,u=w.of(c,arguments),d={},f=0,a=".zoom-"+I.event.changedTouches[0].identifier,o="touchmove"+a,s="touchend"+a,p=[],i=I.select(c),h=Re(c);function m(){var e=I.touches(c);return l=b.k,e.forEach(function(e){e.identifier in d&&(d[e.identifier]=T(e))}),e}function e(){for(var e=I.event.target,t=(I.select(e).on(o,g).on(s,y),p.push(e),I.event.changedTouches),n=0,r=t.length;n<r;++n)d[t[n].identifier]=null;var a,e=m(),i=Date.now();1===e.length?(i-v<500&&(a=e[0],M(c,a,d[a.identifier],Math.floor(Math.log(b.k)/Math.LN2)+1),N()),v=i):1<e.length&&(a=e[0],i=e[1],e=a[0]-i[0],a=a[1]-i[1],f=e*e+a*a)}function g(){var e,t,n=I.touches(c);Aa.call(c);for(var r,a,i,o=0,s=n.length;o<s;++o,t=null)if(e=n[o],t=d[e.identifier]){if(i)break;a=e,i=t}t&&(r=(r=e[0]-a[0])*r+(r=e[1]-a[1])*r,r=f&&Math.sqrt(r/f),a=[(a[0]+e[0])/2,(a[1]+e[1])/2],i=[(i[0]+t[0])/2,(i[1]+t[1])/2],k(r*l)),v=null,A(a,i),S(u)}function y(){if(I.event.touches.length){for(var e,t=I.event.changedTouches,n=0,r=t.length;n<r;++n)delete d[t[n].identifier];for(e in d)return void m()}I.selectAll(p).on(a,null),i.on(x,C).on(_,O),h(),L(u)}e(),E(u),i.on(x,null).on(_,e)}function y(){var e=w.of(this,arguments);r?clearTimeout(r):(Aa.call(this),t=T(s=n||I.mouse(this)),E(e)),r=setTimeout(function(){r=null,L(e)},50),N(),k(Math.pow(2,.002*Ye())*b.k),A(s,t),S(e)}function D(){var e=I.mouse(this),t=Math.log(b.k)/Math.LN2;M(this,e,T(e),I.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return $e=$e||("onwheel"in R?(Ye=function(){return-I.event.deltaY*(I.event.deltaMode?120:1)},"wheel"):"onmousewheel"in R?(Ye=function(){return I.event.wheelDelta},"mousewheel"):(Ye=function(){return-I.event.detail},"MozMousePixelScroll")),m.event=function(e){e.each(function(){var o=w.of(this,arguments),t=b;j?I.select(this).transition().each("start.zoom",function(){b=this.__chart__||{x:0,y:0,k:1},E(o)}).tween("zoom:zoom",function(){var n=c[0],e=c[1],r=s?s[0]:n/2,a=s?s[1]:e/2,i=I.interpolateZoom([(r-b.x)/b.k,(a-b.y)/b.k,n/b.k],[(r-t.x)/t.k,(a-t.y)/t.k,n/t.k]);return function(e){var e=i(e),t=n/e[2];this.__chart__=b={x:r-e[0]*t,y:a-e[1]*t,k:t},S(o)}}).each("interrupt.zoom",function(){L(o)}).each("end.zoom",function(){L(o)}):(this.__chart__=b,E(o),S(o),L(o))})},m.translate=function(e){return arguments.length?(b={x:+e[0],y:+e[1],k:b.k},g(),m):[b.x,b.y]},m.scale=function(e){return arguments.length?(b={x:b.x,y:b.y,k:null},k(+e),g(),m):b.k},m.scaleExtent=function(e){return arguments.length?(u=null==e?We:[+e[0],+e[1]],m):u},m.center=function(e){return arguments.length?(n=e&&[+e[0],+e[1]],m):n},m.size=function(e){return arguments.length?(c=e&&[+e[0],+e[1]],m):c},m.duration=function(e){return arguments.length?(d=+e,m):d},m.x=function(e){return arguments.length?(a=(i=e).copy(),b={x:0,y:0,k:1},m):i},m.y=function(e){return arguments.length?(o=(l=e).copy(),b={x:0,y:0,k:1},m):l},I.rebind(m,w,"on")},[0,1/0]);function i(){}function p(e,t,n){return this instanceof p?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof p?new p(e.h,e.s,e.l):ct(""+e,ut,p):new p(e,t,n)}(I.color=i).prototype.toString=function(){return this.rgb()+""};n=(I.hsl=p).prototype=new i;function Ze(e,t,n){var r,a;function i(e){return Math.round(255*(360<(e=e)?e-=360:e<0&&(e+=360),e<60?r+(a-r)*e/60:e<180?a:e<240?r+(a-r)*(240-e)/60:r))}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)||t<0?0:1<t?1:t,r=2*(n=n<0?0:1<n?1:n)-(a=n<=.5?n*(1+t):n+t-n*t),new g(i(e+120),i(e),i(e-120))}function h(e,t,n){return this instanceof h?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof h?new h(e.h,e.c,e.l):nt((e instanceof m?e:e=dt((e=I.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new h(e,t,n)}n.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new p(this.h,this.s,this.l/e)},n.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new p(this.h,this.s,e*this.l)},n.rgb=function(){return Ze(this.h,this.s,this.l)};t=(I.hcl=h).prototype=new i;function Xe(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new m(n,Math.cos(e*=He)*t,Math.sin(e)*t)}function m(e,t,n){return this instanceof m?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof m?new m(e.l,e.a,e.b):e instanceof h?Xe(e.h,e.c,e.l):dt((e=g(e)).r,e.g,e.b):new m(e,t,n)}t.brighter=function(e){return new h(this.h,this.c,Math.min(100,this.l+Je*(arguments.length?e:1)))},t.darker=function(e){return new h(this.h,this.c,Math.max(0,this.l-Je*(arguments.length?e:1)))},t.rgb=function(){return Xe(this.h,this.c,this.l).rgb()},I.lab=m;var Je=18,Ke=.95047,Qe=1,et=1.08883,n=m.prototype=new i;function tt(e,t,n){e=(e+16)/116,n=e-n/200;return new g(it(3.2404542*(t=rt(e+t/500)*Ke)-1.5371385*(e=rt(e)*Qe)-.4985314*(n=rt(n)*et)),it(-.969266*t+1.8760108*e+.041556*n),it(.0556434*t-.2040259*e+1.0572252*n))}function nt(e,t,n){return 0<e?new h(Math.atan2(n,t)*Be,Math.sqrt(t*t+n*n),e):new h(NaN,NaN,e)}function rt(e){return.206893034<e?e*e*e:(e-4/29)/7.787037}function at(e){return.008856<e?Math.pow(e,1/3):7.787037*e+4/29}function it(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function g(e,t,n){return this instanceof g?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof g?new g(e.r,e.g,e.b):ct(""+e,g,Ze):new g(e,t,n)}function ot(e){return new g(e>>16,e>>8&255,255&e)}function st(e){return ot(e)+""}n.brighter=function(e){return new m(Math.min(100,this.l+Je*(arguments.length?e:1)),this.a,this.b)},n.darker=function(e){return new m(Math.max(0,this.l-Je*(arguments.length?e:1)),this.a,this.b)},n.rgb=function(){return tt(this.l,this.a,this.b)};t=(I.rgb=g).prototype=new i;function lt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function ct(e,t,n){var r,a=0,i=0,o=0,s=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase());if(s)switch(r=s[2].split(","),s[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return t(pt(r[0]),pt(r[1]),pt(r[2]))}return(s=ht.get(e))?t(s.r,s.g,s.b):(null==e||"#"!==e.charAt(0)||isNaN(s=parseInt(e.slice(1),16))||(4===e.length?(a=(3840&s)>>4,a|=a>>4,i=240&s,i|=i>>4,o=15&s,o|=o<<4):7===e.length&&(a=(16711680&s)>>16,i=(65280&s)>>8,o=255&s)),t(a,i,o))}function ut(e,t,n){var r,a,i=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-i,l=(o+i)/2;return s?(a=l<.5?s/(o+i):s/(2-o-i),r=e==o?(t-n)/s+(t<n?6:0):t==o?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,a=0<l&&l<1?0:r),new p(r,a,l)}function dt(e,t,n){var r=at((.4124564*(e=ft(e))+.3575761*(t=ft(t))+.1804375*(n=ft(n)))/Ke),a=at((.2126729*e+.7151522*t+.072175*n)/Qe);return m(116*a-16,500*(r-a),200*(a-at((.0193339*e+.119192*t+.9503041*n)/et)))}function ft(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function pt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}t.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b;return t||n||r?(t&&t<30&&(t=30),n&&n<30&&(n=30),r&&r<30&&(r=30),new g(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new g(30,30,30)},t.darker=function(e){return new g((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},t.hsl=function(){return ut(this.r,this.g,this.b)},t.toString=function(){return"#"+lt(this.r)+lt(this.g)+lt(this.b)};var ht=I.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function z(e){return"function"==typeof e?e:function(){return e}}function mt(r){return function(e,t,n){return 2===arguments.length&&"function"==typeof t&&(n=t,t=null),gt(e,t,r,n)}}function gt(a,i,o,e){var n,s={},l=I.dispatch("beforesend","progress","load","error"),c={},u=new XMLHttpRequest,d=null;function t(){var e,t,n,r=u.status;if(!r&&((n=(t=u).responseType)&&"text"!==n?t.response:t.responseText)||200<=r&&r<300||304===r){try{e=o.call(s,u)}catch(e){return void l.error.call(s,e)}l.load.call(s,e)}else l.error.call(s,u)}return"onload"in(u=!self.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(a)?u:new XDomainRequest)?u.onload=u.onerror=t:u.onreadystatechange=function(){3<u.readyState&&t()},u.onprogress=function(e){var t=I.event;I.event=e;try{l.progress.call(s,u)}finally{I.event=t}},s.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?c[e]:(null==t?delete c[e]:c[e]=t+"",s)},s.mimeType=function(e){return arguments.length?(i=null==e?null:e+"",s):i},s.responseType=function(e){return arguments.length?(d=e,s):d},s.response=function(e){return o=e,s},["get","post"].forEach(function(e){s[e]=function(){return s.send.apply(s,[e].concat(f(arguments)))}}),s.send=function(e,t,n){if(2===arguments.length&&"function"==typeof t&&(n=t,t=null),u.open(e,a,!0),null==i||"accept"in c||(c.accept=i+",*/*"),u.setRequestHeader)for(var r in c)u.setRequestHeader(r,c[r]);return null!=i&&u.overrideMimeType&&u.overrideMimeType(i),null!=d&&(u.responseType=d),null!=n&&s.on("error",n).on("load",function(e){n(null,e)}),l.beforesend.call(s,u),u.send(null==t?null:t),s},s.abort=function(){return u.abort(),s},I.rebind(s,l,"on"),null==e?s:s.get(1===(n=e).length?function(e,t){n(null==e?t:null)}:n)}ht.forEach(function(e,t){ht.set(e,ot(t))}),I.functor=z,I.xhr=mt(C),I.dsv=function(a,i){var t=new RegExp('["'+a+"\n]"),f=a.charCodeAt(0);function o(e,t,n){arguments.length<3&&(n=t,t=null);var r=gt(e,i,null==t?s:l(t),n);return r.row=function(e){return arguments.length?r.response(null==(t=e)?s:l(e)):t},r}function s(e){return o.parse(e.responseText)}function l(t){return function(e){return o.parse(e.responseText,t)}}function n(e){return e.map(c).join(a)}function c(e){return t.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return o.parse=function(e,r){var t;return o.parseRows(e,function(a,e){if(t)return t(a,e-1);function n(e){for(var t={},n=a.length,r=0;r<n;++r)t[a[r]]=e[r];return t}t=r?function(e,t){return r(n(e),t)}:n})},o.parseRows=function(a,e){var t,i,o={},s={},n=[],l=a.length,c=0,r=0;function u(){if(l<=c)return s;if(i)return i=!1,o;var e=c;if(34===a.charCodeAt(e)){for(var t=e;t++<l;)if(34===a.charCodeAt(t)){if(34!==a.charCodeAt(t+1))break;++t}return c=t+2,13===(n=a.charCodeAt(t+1))?(i=!0,10===a.charCodeAt(t+2)&&++c):10===n&&(i=!0),a.slice(e+1,t).replace(/""/g,'"')}for(;c<l;){var n,r=1;if(10===(n=a.charCodeAt(c++)))i=!0;else if(13===n)i=!0,10===a.charCodeAt(c)&&(++c,++r);else if(n!==f)continue;return a.slice(e,c-r)}return a.slice(e)}for(;(t=u())!==s;){for(var d=[];t!==o&&t!==s;)d.push(t),t=u();e&&null==(d=e(d,r++))||n.push(d)}return n},o.format=function(e){if(Array.isArray(e[0]))return o.formatRows(e);var n=new Q,r=[];return e.forEach(function(e){for(var t in e)n.has(t)||r.push(n.add(t))}),[r.map(c).join(a)].concat(e.map(function(t){return r.map(function(e){return c(t[e])}).join(a)})).join("\n")},o.formatRows=function(e){return e.map(n).join("\n")},o},I.csv=I.dsv(",","text/csv"),I.tsv=I.dsv("\t","text/tab-separated-values");var yt,vt,bt,xt,_t=this[ee(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function wt(e,t,n){var r=arguments.length;r<2&&(t=0);r={c:e,t:(n=r<3?Date.now():n)+t,n:null};return vt?vt.n=r:yt=r,vt=r,bt||(xt=clearTimeout(xt),bt=1,_t(Tt)),r}function Tt(){var e=kt(),e=At()-e;24<e?(isFinite(e)&&(clearTimeout(xt),xt=setTimeout(Tt,e)),bt=0):(bt=1,_t(Tt))}function kt(){for(var e=Date.now(),t=yt;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function At(){for(var e,t=yt,n=1/0;t;)t=t.c?(t.t<n&&(n=t.t),(e=t).n):e?e.n=t.n:yt=t.n;return vt=e,n}function Mt(e){return e[0]}function Et(e){return e[1]}function St(e){for(var t,n,r,a=e.length,i=[0,1],o=2,s=2;s<a;s++){for(;1<o&&(t=e[i[o-2]],n=e[i[o-1]],r=e[s],(n[0]-t[0])*(r[1]-t[1])-(n[1]-t[1])*(r[0]-t[0])<=0);)--o;i[o++]=s}return i.slice(0,o)}function Lt(e,t){return e[0]-t[0]||e[1]-t[1]}I.timer=function(){wt.apply(this,arguments)},I.timer.flush=function(){kt(),At()},I.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},I.geom={},I.geom.hull=function(e){var f=Mt,p=Et;return arguments.length?t(e):(t.x=function(e){return arguments.length?(f=e,t):f},t.y=function(e){return arguments.length?(p=e,t):p},t);function t(e){if(e.length<3)return[];for(var t=z(f),n=z(p),r=e.length,a=[],i=[],o=0;o<r;o++)a.push([+t.call(this,e[o],o),+n.call(this,e[o],o),o]);for(a.sort(Lt),o=0;o<r;o++)i.push([a[o][0],-a[o][1]]);var s=St(a),l=St(i),c=l[0]===s[0],u=l[l.length-1]===s[s.length-1],d=[];for(o=s.length-1;0<=o;--o)d.push(e[a[s[o]][2]]);for(o=+c;o<l.length-u;++o)d.push(e[a[l[o]][2]]);return d}},I.geom.polygon=function(e){return le(e,Ct),e};var Ct=I.geom.polygon.prototype=[];function Ot(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Dt(e,t,n,r){var a=e[0],i=n[0],o=t[0]-a,s=r[0]-i,e=e[1],n=n[1],t=t[1]-e,r=r[1]-n,n=(s*(e-n)-r*(a-i))/(r*o-s*t);return[a+n*o,e+n*t]}function It(e){var t=e[0],e=e[e.length-1];return!(t[0]-e[0]||t[1]-e[1])}Ct.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],a=0;++t<n;)e=r,r=this[t],a+=e[1]*r[0]-e[0]*r[1];return.5*a},Ct.centroid=function(e){var t,n,r=-1,a=this.length,i=0,o=0,s=this[a-1];for(arguments.length||(e=-1/(6*this.area()));++r<a;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],i+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[i*e,o*e]},Ct.clip=function(e){for(var t,n,r,a,i,o,s=It(e),l=-1,c=this.length-It(this),u=this[c-1];++l<c;){for(t=e.slice(),e.length=0,a=this[l],i=t[(r=t.length-s)-1],n=-1;++n<r;)Ot(o=t[n],u,a)?(Ot(i,u,a)||e.push(Dt(i,o,u,a)),e.push(o)):Ot(i,u,a)&&e.push(Dt(i,o,u,a)),i=o;s&&e.push(e[0]),u=a}return e};var Rt,b,Pt,Nt,Ft,zt=[],jt=[];function qt(){rn(this),this.edge=this.site=this.circle=null}function Ht(e){var t=zt.pop()||new qt;return t.site=e,t}function Bt(e){Xt(e),Pt.remove(e),zt.push(e),rn(e)}function Ut(e){for(var t,n,r,a,i=e.x,o=e.y,s=Pt._;s;)if(r=Vt(s,o)-i,O<r)s=s.L;else{if(a=i-function(e,t){var n=e.N;if(n)return Vt(n,t);n=e.site;return n.y===t?n.x:1/0}(s,o),!(O<a)){-O<r?(t=s.P,n=s):-O<a?n=(t=s).N:t=n=s;break}if(!s.R){t=s;break}s=s.R}var l,c,u,d,f,p,h,m,g,y,v=Ht(e);if(Pt.insert(t,v),t||n){if(t===n)return Xt(t),n=Ht(t.site),Pt.insert(v,n),v.edge=n.edge=Qt(t.site,v.site),Zt(t),void Zt(n);n?(Xt(t),Xt(n),c=(l=t.site).x,u=l.y,d=e.x-c,y=e.y-u,p=(f=n.site).x-c,h=f.y-u,en(n.edge,l,f,y={x:(h*(m=d*d+y*y)-y*(g=p*p+h*h))/(h=2*(d*h-y*p))+c,y:(d*g-p*m)/h+u}),v.edge=Qt(l,e,null,y),n.edge=Qt(e,f,null,y),Zt(t),Zt(n)):v.edge=Qt(t.site,v.site)}}function Vt(e,t){var n=e.site,r=n.x,a=n.y,i=a-t;if(!i)return r;e=e.P;if(!e)return-1/0;e=(n=e.site).x,n=n.y,t=n-t;if(!t)return e;var o=e-r,s=1/i-1/t,l=o/t;return s?(-l+Math.sqrt(l*l-2*s*(o*o/(-2*t)-n+t/2+a-i/2)))/s+r:(r+e)/2}function Yt(e){this.site=e,this.edges=[]}function $t(e){for(var t,n,r,a,i,o,s,l,c,u=e[0][0],d=e[1][0],f=e[0][1],p=e[1][1],h=b,m=h.length;m--;)if((a=h[m])&&a.prepare())for(s=(o=a.edges).length,i=0;i<s;)n=(c=o[i].end()).x,r=c.y,t=(l=o[++i%s].start()).x,l=l.y,(M(n-t)>O||M(r-l)>O)&&(o.splice(i,0,new tn(function(e,t,n){e=new Kt(e,null);return e.a=t,e.b=n,Rt.push(e),e}(a.site,c,M(n-u)<O&&O<p-r?{x:u,y:M(t-u)<O?l:p}:M(r-p)<O&&O<d-n?{x:M(l-p)<O?t:d,y:p}:M(n-d)<O&&O<r-f?{x:d,y:M(t-d)<O?l:f}:M(r-f)<O&&O<n-u?{x:M(l-f)<O?t:u,y:f}:null),a.site,null)),++s)}function Gt(e,t){return t.angle-e.angle}function Wt(){rn(this),this.x=this.y=this.arc=this.site=this.cy=null}function Zt(e){var t=e.P,n=e.N;if(t&&n){var t=t.site,r=e.site,n=n.site;if(t!==n){var a=r.x,i=r.y,o=t.x-a,t=t.y-i,s=n.x-a,l=2*(o*(n=n.y-i)-t*s);if(!(-ze<=l)){for(var c=o*o+t*t,u=s*s+n*n,t=(n*c-t*u)/l,o=(o*u-s*c)/l,n=o+i,d=jt.pop()||new Wt,f=(d.arc=e,d.site=r,d.x=t+a,d.y=n+Math.sqrt(t*t+o*o),d.cy=n,e.circle=d,null),p=Ft._;p;)if(d.y<p.y||d.y===p.y&&d.x<=p.x){if(!p.L){f=p.P;break}p=p.L}else{if(!p.R){f=p;break}p=p.R}Ft.insert(f,d),f||(Nt=d)}}}}function Xt(e){var t=e.circle;t&&(t.P||(Nt=t.N),Ft.remove(t),jt.push(t),rn(t),e.circle=null)}function Jt(e){for(var t,l,c,u,d,n=Rt,r=(l=e[0][0],c=e[0][1],u=e[1][0],d=e[1][1],function(e){var t=e.a,n=e.b,r=t.x,t=t.y,a=0,i=1,o=n.x-r,n=n.y-t,s=l-r;if(o||!(0<s)){if(s/=o,o<0){if(s<a)return;s<i&&(i=s)}else if(0<o){if(i<s)return;a<s&&(a=s)}if(s=u-r,o||!(s<0)){if(s/=o,o<0){if(i<s)return;a<s&&(a=s)}else if(0<o){if(s<a)return;s<i&&(i=s)}if(s=c-t,n||!(0<s)){if(s/=n,n<0){if(s<a)return;s<i&&(i=s)}else if(0<n){if(i<s)return;a<s&&(a=s)}if(s=d-t,n||!(s<0)){if(s/=n,n<0){if(i<s)return;a<s&&(a=s)}else if(0<n){if(s<a)return;s<i&&(i=s)}return 0<a&&(e.a={x:r+a*o,y:t+a*n}),i<1&&(e.b={x:r+i*o,y:t+i*n}),e}}}}}),a=n.length;a--;)(!function(e,t){var n=e.b;if(!n){var r=e.a,a=t[0][0],i=t[1][0],o=t[0][1],t=t[1][1],s=e.l,l=e.r,c=s.x,s=s.y,u=l.x,l=l.y,d=(c+u)/2,f=(s+l)/2;if(l===s){if(d<a||i<=d)return;if(u<c){if(r){if(r.y>=t)return}else r={x:d,y:o};n={x:d,y:t}}else{if(r){if(r.y<o)return}else r={x:d,y:t};n={x:d,y:o}}}else if(d=f-(f=(c-u)/(l-s))*d,f<-1||1<f)if(u<c){if(r){if(r.y>=t)return}else r={x:(o-d)/f,y:o};n={x:(t-d)/f,y:t}}else{if(r){if(r.y<o)return}else r={x:(t-d)/f,y:t};n={x:(o-d)/f,y:o}}else if(s<l){if(r){if(r.x>=i)return}else r={x:a,y:f*a+d};n={x:i,y:f*i+d}}else{if(r){if(r.x<a)return}else r={x:i,y:f*i+d};n={x:a,y:f*a+d}}e.a=r,e.b=n}return 1}(t=n[a],e)||!r(t)||M(t.a.x-t.b.x)<O&&M(t.a.y-t.b.y)<O)&&(t.a=t.b=null,n.splice(a,1))}function Kt(e,t){this.l=e,this.r=t,this.a=this.b=null}function Qt(e,t,n,r){var a=new Kt(e,t);return Rt.push(a),n&&en(a,e,t,n),r&&en(a,t,e,r),b[e.i].edges.push(new tn(a,e,t)),b[t.i].edges.push(new tn(a,t,e)),a}function en(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function tn(e,t,n){var r=e.a,a=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(a.x-r.x,r.y-a.y):Math.atan2(r.x-a.x,a.y-r.y)}function nn(){this._=null}function rn(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function an(e,t){var n=t,t=t.R,r=n.U;r?r.L===n?r.L=t:r.R=t:e._=t,t.U=r,n.U=t,n.R=t.L,n.R&&(n.R.U=n),t.L=n}function on(e,t){var n=t,t=t.L,r=n.U;r?r.L===n?r.L=t:r.R=t:e._=t,t.U=r,n.U=t,n.L=t.R,n.L&&(n.L.U=n),t.R=n}function sn(e){for(;e.L;)e=e.L;return e}function ln(e,t){var n,r,a,i=e.sort(cn).pop();for(Rt=[],b=new Array(e.length),Pt=new nn,Ft=new nn;;)if(a=Nt,i&&(!a||i.y<a.y||i.y===a.y&&i.x<a.x))i.x===n&&i.y===r||(b[i.i]=new Yt(i),Ut(i),n=i.x,r=i.y),i=e.pop();else{if(!a)break;y=g=m=h=p=f=d=u=c=l=s=o=void 0;for(var o=a.arc,s=o.circle,l=s.x,c=s.cy,u={x:l,y:c},d=o.P,f=o.N,p=[o],h=(Bt(o),d);h.circle&&M(l-h.circle.x)<O&&M(c-h.circle.cy)<O;)d=h.P,p.unshift(h),Bt(h),h=d;p.unshift(h),Xt(h);for(var m=f;m.circle&&M(l-m.circle.x)<O&&M(c-m.circle.cy)<O;)f=m.N,p.push(m),Bt(m),m=f;p.push(m),Xt(m);for(var g=p.length,y=1;y<g;++y)m=p[y],h=p[y-1],en(m.edge,h.site,m.site,u);h=p[0],(m=p[g-1]).edge=Qt(h.site,m.site,null,u),Zt(h),Zt(m)}t&&(Jt(t),$t(t));t={cells:b,edges:Rt};return Pt=Ft=Rt=b=null,t}function cn(e,t){return t.y-e.y||t.x-e.x}Yt.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(Gt),t.length},tn.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nn.prototype={insert:function(e,t){var n,r,a;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else n=this._?(e=sn(this._),t.P=null,(t.N=e).P=e.L=t,e):(t.P=t.N=null,this._=t,null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(a=r.R)&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.R&&(an(this,n),n=(e=n).U),n.C=!1,r.C=!0,on(this,r)):(a=r.L)&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.L&&(on(this,n),n=(e=n).U),n.C=!1,r.C=!0,an(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r=e.U,a=e.L,i=e.R,o=a?i?sn(i):a:i;if(r?r.L===e?r.L=o:r.R=o:this._=o,a&&i?(n=o.C,o.C=e.C,((o.L=a).U=o)!==i?(r=o.U,o.U=e.U,e=o.R,r.L=e,(o.R=i).U=o):(o.U=r,e=(r=o).R)):(n=e.C,e=o),e&&(e.U=r),!n)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===r.L){if((t=r.R).C&&(t.C=!1,r.C=!0,an(this,r),t=r.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,on(this,t),t=r.R),t.C=r.C,r.C=t.R.C=!1,an(this,r),e=this._;break}}else if((t=r.L).C&&(t.C=!1,r.C=!0,on(this,r),t=r.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,an(this,t),t=r.L),t.C=r.C,r.C=t.L.C=!1,on(this,r),e=this._;break}}while(t.C=!0,r=(e=r).U,!e.C);e&&(e.C=!1)}}},I.geom.voronoi=function(e){var t=Mt,n=Et,r=t,a=n,c=un;return e?i(e):(i.links=function(t){return ln(f(t)).edges.filter(function(e){return e.l&&e.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},i.triangles=function(u){var d=[];return ln(f(u)).cells.forEach(function(e,t){for(var n,r,a=e.site,i=e.edges.sort(Gt),o=-1,s=i.length,l=i[s-1].edge,c=l.l===a?l.r:l.l;++o<s;)n=c,c=(l=i[o].edge).l===a?l.r:l.l,t<n.i&&t<c.i&&(r=c,(a.x-r.x)*(n.y-a.y)-(a.x-n.x)*(r.y-a.y)<0)&&d.push([u[t],u[n.i],u[c.i]])}),d},i.x=function(e){return arguments.length?(r=z(t=e),i):t},i.y=function(e){return arguments.length?(a=z(n=e),i):n},i.clipExtent=function(e){return arguments.length?(c=null==e?un:e,i):c===un?null:c},i.size=function(e){return arguments.length?i.clipExtent(e&&[[0,0],e]):c===un?null:c&&c[1]},i);function i(r){var a=new Array(r.length),i=c[0][0],o=c[0][1],s=c[1][0],l=c[1][1];return ln(f(r),c).cells.forEach(function(e,t){var n=e.edges,e=e.site;(a[t]=n.length?n.map(function(e){e=e.start();return[e.x,e.y]}):e.x>=i&&e.x<=s&&e.y>=o&&e.y<=l?[[i,l],[s,l],[s,o],[i,o]]:[]).point=r[t]}),a}function f(e){return e.map(function(e,t){return{x:Math.round(r(e,t)/O)*O,y:Math.round(a(e,t)/O)*O,i:t}})}};var un=[[-1e6,-1e6],[1e6,1e6]];function dn(e){return e.x}function fn(e){return e.y}function pn(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function hn(e,t){e=I.rgb(e),t=I.rgb(t);var n=e.r,r=e.g,a=e.b,i=t.r-n,o=t.g-r,s=t.b-a;return function(e){return"#"+lt(Math.round(n+i*e))+lt(Math.round(r+o*e))+lt(Math.round(a+s*e))}}function mn(e,t){var n,r={},a={};for(n in e)n in t?r[n]=x(e[n],t[n]):a[n]=e[n];for(n in t)n in e||(a[n]=t[n]);return function(e){for(n in r)a[n]=r[n](e);return a}}function y(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function gn(e,r){var t,n,a,i=yn.lastIndex=vn.lastIndex=0,o=-1,s=[],l=[];for(e+="",r+="";(t=yn.exec(e))&&(n=vn.exec(r));)(a=n.index)>i&&(a=r.slice(i,a),s[o]?s[o]+=a:s[++o]=a),(t=t[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,l.push({i:o,x:y(t,n)})),i=vn.lastIndex;return i<r.length&&(a=r.slice(i),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?(r=l[0].x,function(e){return r(e)+""}):function(){return r}:(r=l.length,function(e){for(var t,n=0;n<r;++n)s[(t=l[n]).i]=t.x(e);return s.join("")})}I.geom.delaunay=function(e){return I.geom.voronoi().triangles(e)},I.geom.quadtree=function(e,v,b,x,w){var T,k=Mt,A=Et;return(T=arguments.length)?(k=dn,A=fn,3===T&&(w=b,x=v,b=v=0),t(e)):(t.x=function(e){return arguments.length?(k=e,t):k},t.y=function(e){return arguments.length?(A=e,t):A},t.extent=function(e){return arguments.length?(null==e?v=b=x=w=null:(v=+e[0][0],b=+e[0][1],x=+e[1][0],w=+e[1][1]),t):null==v?null:[[v,b],[x,w]]},t.size=function(e){return arguments.length?(null==e?v=b=x=w=null:(v=b=0,x=+e[0],w=+e[1]),t):null==v?null:[x-v,w-b]},t);function t(e){var t,n,r,a,i,o,s,l,c,u=z(k),d=z(A);if(null!=v)o=v,s=b,l=x,c=w;else if(l=c=-(o=s=1/0),n=[],r=[],i=e.length,T)for(a=0;a<i;++a)(t=e[a]).x<o&&(o=t.x),t.y<s&&(s=t.y),t.x>l&&(l=t.x),t.y>c&&(c=t.y),n.push(t.x),r.push(t.y);else for(a=0;a<i;++a){var f=+u(t=e[a],a),p=+d(t,a);f<o&&(o=f),p<s&&(s=p),l<f&&(l=f),c<p&&(c=p),n.push(f),r.push(p)}var h=l-o,m=c-s;function g(e,t,n,r,a,i,o,s){var l,c,u;isNaN(n)||isNaN(r)||(e.leaf?(l=e.x,c=e.y,null!=l?(M(l-n)+M(c-r)<.01||(u=e.point,e.x=e.y=e.point=null,y(e,u,l,c,a,i,o,s)),y(e,t,n,r,a,i,o,s)):(e.x=n,e.y=r,e.point=t)):y(e,t,n,r,a,i,o,s))}function y(e,t,n,r,a,i,o,s){var l=.5*(a+o),c=.5*(i+s),u=l<=n,d=c<=r,f=d<<1|u;e.leaf=!1,u?a=l:o=l,d?i=c:s=c,g(e=e.nodes[f]||(e.nodes[f]=pn()),t,n,r,a,i,o,s)}m<h?c=s+h:l=o+m;var _=pn();if(_.add=function(e){g(_,e,+u(e,++a),+d(e,a),o,s,l,c)},_.visit=function(e){!function e(t,n,r,a,i,o){{var s,l;t(n,r,a,i,o)||(s=.5*(r+i),l=.5*(a+o),(n=n.nodes)[0]&&e(t,n[0],r,a,s,l),n[1]&&e(t,n[1],s,a,i,l),n[2]&&e(t,n[2],r,l,s,o),n[3]&&e(t,n[3],s,l,i,o))}}(e,_,o,s,l,c)},_.find=function(e){return p=e[0],h=e[1],x=1/0,function e(t,n,r,a,i){if(!(y<n||v<r||a<m||i<g)){(o=t.point)&&(s=(s=p-t.x)*s+(s=h-t.y)*s)<x&&(s=Math.sqrt(x=s),m=p-s,g=h-s,y=p+s,v=h+s,b=o);for(var o,s,l=t.nodes,c=.5*(n+a),u=.5*(r+i),d=(u<=h)<<1|c<=p,f=d+4;d<f;++d)if(t=l[3&d])switch(3&d){case 0:e(t,n,r,c,u);break;case 1:e(t,c,r,a,u);break;case 2:e(t,n,u,c,i);break;case 3:e(t,c,u,a,i)}}}(_,m=o,g=s,y=l,v=c),b;var p,h,m,g,y,v,b,x},a=-1,null==v){for(;++a<i;)g(_,e[a],n[a],r[a],o,s,l,c);--a}else e.forEach(_.add);return n=r=e=t=null,_}},I.interpolateRgb=hn,I.interpolateObject=mn,I.interpolateNumber=y,I.interpolateString=gn;var yn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vn=new RegExp(yn.source,"g");function x(e,t){for(var n,r=I.interpolators.length;0<=--r&&!(n=I.interpolators[r](e,t)););return n}function bn(e,t){for(var n=[],r=[],a=e.length,i=t.length,o=Math.min(e.length,t.length),s=0;s<o;++s)n.push(x(e[s],t[s]));for(;s<a;++s)r[s]=e[s];for(;s<i;++s)r[s]=t[s];return function(e){for(s=0;s<o;++s)r[s]=n[s](e);return r}}I.interpolate=x,I.interpolators=[function(e,t){var n=typeof t;return("string"==n?ht.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?hn:gn:t instanceof i?hn:Array.isArray(t)?bn:"object"==n&&isNaN(t)?mn:y)(e,t)}],I.interpolateArray=bn;function xn(){return C}var _n=I.map({linear:xn,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return An},cubic:function(){return Mn},sin:function(){return Sn},exp:function(){return Ln},circle:function(){return Cn},elastic:function(t,n){var r;arguments.length<2&&(n=.45);r=arguments.length?n/je*Math.asin(1/t):(t=1,n/4);return function(e){return 1+t*Math.pow(2,-10*e)*Math.sin((e-r)*je/n)}},back:function(t){t=t||1.70158;return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return On}}),wn=I.map({in:C,out:Tn,"in-out":kn,"out-in":function(e){return kn(Tn(e))}});function Tn(t){return function(e){return 1-t(1-e)}}function kn(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function An(e){return e*e}function Mn(e){return e*e*e}function En(e){if(e<=0)return 0;if(1<=e)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function Sn(e){return 1-Math.cos(e*F)}function Ln(e){return Math.pow(2,10*(e-1))}function Cn(e){return 1-Math.sqrt(1-e*e)}function On(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Dn(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function In(e){var t,n,r=[e.a,e.b],a=[e.c,e.d],i=Pn(r),o=Rn(r,a),s=Pn(((t=a)[0]+=(s=-o)*(n=r)[0],t[1]+=s*n[1],t))||0;r[0]*a[1]<a[0]*r[1]&&(r[0]*=-1,r[1]*=-1,i*=-1,o*=-1),this.rotate=(i?Math.atan2(r[1],r[0]):Math.atan2(-a[0],a[1]))*Be,this.translate=[e.e,e.f],this.scale=[i,s],this.skew=s?Math.atan2(o,s)*Be:0}function Rn(e,t){return e[0]*t[0]+e[1]*t[1]}function Pn(e){var t=Math.sqrt(Rn(e,e));return t&&(e[0]/=t,e[1]/=t),t}I.ease=function(e){var t,n=e.indexOf("-"),r=0<=n?e.slice(0,n):e,n=0<=n?e.slice(n+1):"in",r=_n.get(r)||xn,n=wn.get(n)||C;return t=n(r.apply(null,E.call(arguments,1))),function(e){return e<=0?0:1<=e?1:t(e)}},I.interpolateHcl=function(e,t){e=I.hcl(e),t=I.hcl(t);var n=e.h,r=e.c,a=e.l,i=t.h-n,o=t.c-r,s=t.l-a;isNaN(o)&&(o=0,r=isNaN(r)?t.c:r);isNaN(i)?(i=0,n=isNaN(n)?t.h:n):180<i?i-=360:i<-180&&(i+=360);return function(e){return Xe(n+i*e,r+o*e,a+s*e)+""}},I.interpolateHsl=function(e,t){e=I.hsl(e),t=I.hsl(t);var n=e.h,r=e.s,a=e.l,i=t.h-n,o=t.s-r,s=t.l-a;isNaN(o)&&(o=0,r=isNaN(r)?t.s:r);isNaN(i)?(i=0,n=isNaN(n)?t.h:n):180<i?i-=360:i<-180&&(i+=360);return function(e){return Ze(n+i*e,r+o*e,a+s*e)+""}},I.interpolateLab=function(e,t){e=I.lab(e),t=I.lab(t);var n=e.l,r=e.a,a=e.b,i=t.l-n,o=t.a-r,s=t.b-a;return function(e){return tt(n+i*e,r+o*e,a+s*e)+""}},I.interpolateRound=Dn,I.transform=function(e){var n=R.createElementNS(I.ns.prefix.svg,"g");return(I.transform=function(e){var t;return null!=e&&(n.setAttribute("transform",e),t=n.transform.baseVal.consolidate()),new In(t?t.matrix:Nn)})(e)},In.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Nn={a:1,b:0,c:0,d:1,e:0,f:0};function Fn(e){return e.length?e.pop()+",":""}function zn(e,t){var n,r,a,i,o,s,l=[],c=[];return e=I.transform(e),t=I.transform(t),r=e.translate,a=t.translate,o=l,i=c,r[0]!==a[0]||r[1]!==a[1]?(n=o.push("translate(",null,",",null,")"),i.push({i:n-4,x:y(r[0],a[0])},{i:n-2,x:y(r[1],a[1])})):(a[0]||a[1])&&o.push("translate("+a+")"),i=e.rotate,n=t.rotate,r=l,o=c,i!==n?(180<i-n?n+=360:180<n-i&&(i+=360),o.push({i:r.push(Fn(r)+"rotate(",null,")")-2,x:y(i,n)})):n&&r.push(Fn(r)+"rotate("+n+")"),a=e.skew,o=t.skew,i=l,r=c,a!==o?r.push({i:i.push(Fn(i)+"skewX(",null,")")-2,x:y(a,o)}):o&&i.push(Fn(i)+"skewX("+o+")"),r=e.scale,a=t.scale,i=l,o=c,r[0]!==a[0]||r[1]!==a[1]?(s=i.push(Fn(i)+"scale(",null,",",null,")"),o.push({i:s-4,x:y(r[0],a[0])},{i:s-2,x:y(r[1],a[1])})):1===a[0]&&1===a[1]||i.push(Fn(i)+"scale("+a+")"),e=t=null,function(e){for(var t,n=-1,r=c.length;++n<r;)l[(t=c[n]).i]=t.x(e);return l.join("")}}function jn(t,n){return n=(n-=t=+t)||1/n,function(e){return(e-t)/n}}function qn(t,n){return n=(n-=t=+t)||1/n,function(e){return Math.max(0,Math.min(1,(e-t)/n))}}function Hn(e){for(var t=[],n=e.parent;null!=n;)t.push(e),n=(e=n).parent;return t.push(e),t}function Bn(e){e.fixed|=2}function Un(e){e.fixed&=-7}function Vn(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Yn(e){e.fixed&=-5}I.interpolateTransform=zn,I.layout={},I.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(function(e){var t=e.source,n=e.target,r=function(e,t){if(e===t)return e;var n=Hn(e),r=Hn(t),a=n.pop(),i=r.pop(),o=null;for(;a===i;)o=a,a=n.pop(),i=r.pop();return o}(t,n),a=[t];for(;t!==r;)t=t.parent,a.push(t);var i=a.length;for(;n!==r;)a.splice(i,0,n),n=n.parent;return a}(e[n]));return t}},I.layout.chord=function(){var g,y,v,b,x,_,w,t={},T=0;function e(){var e,t,n,r,a,i={},o=[],s=I.range(b),l=[];for(g=[],y=[],e=0,r=-1;++r<b;){for(t=0,a=-1;++a<b;)t+=v[r][a];o.push(t),l.push(I.range(b)),e+=t}for(x&&s.sort(function(e,t){return x(o[e],o[t])}),_&&l.forEach(function(e,n){e.sort(function(e,t){return _(v[n][e],v[n][t])})}),e=(je-T*b)/e,t=0,r=-1;++r<b;){for(n=t,a=-1;++a<b;){var c=s[r],u=l[c][a],d=v[c][u],f=t,p=t+=d*e;i[c+"-"+u]={index:c,subindex:u,startAngle:f,endAngle:p,value:d}}y[c]={index:c,startAngle:n,endAngle:t,value:o[c]},t+=T}for(r=-1;++r<b;)for(a=r-1;++a<b;){var h=i[r+"-"+a],m=i[a+"-"+r];(h.value||m.value)&&g.push(h.value<m.value?{source:m,target:h}:{source:h,target:m})}w&&k()}function k(){g.sort(function(e,t){return w((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}return t.matrix=function(e){return arguments.length?(b=(v=e)&&v.length,g=y=null,t):v},t.padding=function(e){return arguments.length?(T=e,g=y=null,t):T},t.sortGroups=function(e){return arguments.length?(x=e,g=y=null,t):x},t.sortSubgroups=function(e){return arguments.length?(_=e,g=null,t):_},t.sortChords=function(e){return arguments.length?(w=e,g&&k(),t):w},t.chords=function(){return g||e(),g},t.groups=function(){return y||e(),y},t},I.layout.force=function(){var d,e,f,p,h,m,a={},g=I.dispatch("start","tick","end"),y=[1,1],v=.9,i=$n,o=Gn,b=-30,x=Wn,_=.1,w=.64,T=[],k=[];function t(e){e.px=I.event.x,e.py=I.event.y,a.resume()}return a.tick=function(){if((f*=.99)<.005)return d=null,g.end({type:"end",alpha:f=0}),!0;for(var e,t,n,r,a,i,o,s,l=T.length,c=k.length,u=0;u<c;++u)n=(t=k[u]).source,(a=(o=(r=t.target).x-n.x)*o+(s=r.y-n.y)*s)&&(o*=a=f*h[u]*((a=Math.sqrt(a))-p[u])/a,s*=a,r.x-=o*(i=n.weight+r.weight?n.weight/(n.weight+r.weight):.5),r.y-=s*i,n.x+=o*(i=1-i),n.y+=s*i);if((i=f*_)&&(o=y[0]/2,s=y[1]/2,u=-1,i))for(;++u<l;)(t=T[u]).x+=(o-t.x)*i,t.y+=(s-t.y)*i;if(b)for(!function e(t,n,r){var a=0,i=0;t.charge=0;if(!t.leaf)for(var o,s=t.nodes,l=s.length,c=-1;++c<l;)null!=(o=s[c])&&(e(o,n,r),t.charge+=o.charge,a+=o.charge*o.cx,i+=o.charge*o.cy);{var u;t.point&&(t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5),u=n*r[t.point.index],t.charge+=t.pointCharge=u,a+=u*t.point.x,i+=u*t.point.y)}t.cx=a/t.charge;t.cy=i/t.charge}(e=I.geom.quadtree(T),f,m),u=-1;++u<l;)(t=T[u]).fixed||e.visit(function(s){return function(e,t,n,r){if(e.point!==s){var a,i=e.cx-s.x,o=e.cy-s.y,r=r-t,t=i*i+o*o;if(r*r/w<t)return t<x&&(a=e.charge/t,s.px-=i*a,s.py-=o*a),!0;e.point&&t&&t<x&&(a=e.pointCharge/t,s.px-=i*a,s.py-=o*a)}return!e.charge}}(t));for(u=-1;++u<l;)(t=T[u]).fixed?(t.x=t.px,t.y=t.py):(t.x-=(t.px-(t.px=t.x))*v,t.y-=(t.py-(t.py=t.y))*v);g.tick({type:"tick",alpha:f})},a.nodes=function(e){return arguments.length?(T=e,a):T},a.links=function(e){return arguments.length?(k=e,a):k},a.size=function(e){return arguments.length?(y=e,a):y},a.linkDistance=function(e){return arguments.length?(i="function"==typeof e?e:+e,a):i},a.distance=a.linkDistance,a.linkStrength=function(e){return arguments.length?(o="function"==typeof e?e:+e,a):o},a.friction=function(e){return arguments.length?(v=+e,a):v},a.charge=function(e){return arguments.length?(b="function"==typeof e?e:+e,a):b},a.chargeDistance=function(e){return arguments.length?(x=e*e,a):Math.sqrt(x)},a.gravity=function(e){return arguments.length?(_=+e,a):_},a.theta=function(e){return arguments.length?(w=e*e,a):Math.sqrt(w)},a.alpha=function(e){return arguments.length?(e=+e,f?0<e?f=e:(d.c=null,d.t=NaN,d=null,g.end({type:"end",alpha:f=0})):0<e&&(g.start({type:"start",alpha:f=e}),d=wt(a.tick)),a):f},a.start=function(){for(var s,e,l=T.length,c=k.length,t=y[0],n=y[1],u=0;u<l;++u)(e=T[u]).index=u,e.weight=0;for(u=0;u<c;++u)"number"==typeof(e=k[u]).source&&(e.source=T[e.source]),"number"==typeof e.target&&(e.target=T[e.target]),++e.source.weight,++e.target.weight;for(u=0;u<l;++u)e=T[u],isNaN(e.x)&&(e.x=r("x",t)),isNaN(e.y)&&(e.y=r("y",n)),isNaN(e.px)&&(e.px=e.x),isNaN(e.py)&&(e.py=e.y);if(p=[],"function"==typeof i)for(u=0;u<c;++u)p[u]=+i.call(this,k[u],u);else for(u=0;u<c;++u)p[u]=i;if(h=[],"function"==typeof o)for(u=0;u<c;++u)h[u]=+o.call(this,k[u],u);else for(u=0;u<c;++u)h[u]=o;if(m=[],"function"==typeof b)for(u=0;u<l;++u)m[u]=+b.call(this,T[u],u);else for(u=0;u<l;++u)m[u]=b;function r(e,t){if(!s){for(s=new Array(l),i=0;i<l;++i)s[i]=[];for(i=0;i<c;++i){var n=k[i];s[n.source.index].push(n.target),s[n.target.index].push(n.source)}}for(var r,a=s[u],i=-1,o=a.length;++i<o;)if(!isNaN(r=a[i][e]))return r;return Math.random()*t}return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){if(e=e||I.behavior.drag().origin(C).on("dragstart.force",Bn).on("drag.force",t).on("dragend.force",Un),!arguments.length)return e;this.on("mouseover.force",Vn).on("mouseout.force",Yn).call(e)},I.rebind(a,g,"on")};var $n=20,Gn=1,Wn=1/0;function Zn(e,t){return I.rebind(e,t,"sort","children","value"),(e.nodes=e).links=er,e}function Xn(e,t){for(var n,r,a=[e];null!=(e=a.pop());)if(t(e),(r=e.children)&&(n=r.length))for(;0<=--n;)a.push(r[n])}function _(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(i=e.children)&&(a=i.length))for(var a,i,o=-1;++o<a;)n.push(i[o]);for(;null!=(e=r.pop());)t(e)}function Jn(e){return e.children}function Kn(e){return e.value}function Qn(e,t){return t.value-e.value}function er(e){return I.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}I.layout.hierarchy=function(){var s=Qn,l=Jn,c=Kn;function u(e){var t,n,r,a,i=[e],o=[];for(e.depth=0;null!=(t=i.pop());)if(o.push(t),(r=l.call(u,t,t.depth))&&(n=r.length)){for(;0<=--n;)i.push(a=r[n]),a.parent=t,a.depth=t.depth+1;c&&(t.value=0),t.children=r}else c&&(t.value=+c.call(u,t,t.depth)||0),delete t.children;return _(e,function(e){var t;s&&(t=e.children)&&t.sort(s),c&&(t=e.parent)&&(t.value+=e.value)}),o}return u.sort=function(e){return arguments.length?(s=e,u):s},u.children=function(e){return arguments.length?(l=e,u):l},u.value=function(e){return arguments.length?(c=e,u):c},u.revalue=function(e){return c&&(Xn(e,function(e){e.children&&(e.value=0)}),_(e,function(e){var t;e.children||(e.value=+c.call(u,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)})),e},u},I.layout.partition=function(){var n=I.layout.hierarchy(),r=[1,1];function t(e,t){e=n.call(this,e,t);return function e(t,n,r,a){var i=t.children;if(t.x=n,t.y=t.depth*a,t.dx=r,t.dy=a,i&&(o=i.length)){var o,s,l=-1;for(r=t.value?r/t.value:0;++l<o;)e(s=i[l],n,s=s.value*r,a),n+=s}}(e[0],0,r[0],r[1]/function e(t){var n=t.children,r=0;if(n&&(a=n.length))for(var a,i=-1;++i<a;)r=Math.max(r,e(n[i]));return 1+r}(e[0])),e}return t.size=function(e){return arguments.length?(r=e,t):r},Zn(t,n)},I.layout.pie=function(){var d=Number,f=tr,p=0,h=je,m=0;function g(n){var t,e=n.length,r=n.map(function(e,t){return+d.call(g,e,t)}),a=+("function"==typeof p?p.apply(this,arguments):p),i=("function"==typeof h?h.apply(this,arguments):h)-a,o=Math.min(Math.abs(i)/e,+("function"==typeof m?m.apply(this,arguments):m)),s=o*(i<0?-1:1),l=I.sum(r),c=l?(i-e*s)/l:0,i=I.range(e),u=[];return null!=f&&i.sort(f===tr?function(e,t){return r[t]-r[e]}:function(e,t){return f(n[e],n[t])}),i.forEach(function(e){u[e]={data:n[e],value:t=r[e],startAngle:a,endAngle:a+=t*c+s,padAngle:o}}),u}return g.value=function(e){return arguments.length?(d=e,g):d},g.sort=function(e){return arguments.length?(f=e,g):f},g.startAngle=function(e){return arguments.length?(p=e,g):p},g.endAngle=function(e){return arguments.length?(h=e,g):h},g.padAngle=function(e){return arguments.length?(m=e,g):m},g};var tr={};function nr(e){return e.x}function rr(e){return e.y}function ar(e,t,n){e.y0=t,e.y=n}I.layout.stack=function(){var d=C,f=sr,p=lr,h=ar,m=nr,g=rr;function y(e,t){if(n=e.length)for(var n,r,a,i=(s=e.map(function(e,t){return d.call(y,e,t)})).map(function(e){return e.map(function(e,t){return[m.call(y,e,t),g.call(y,e,t)]})}),o=f.call(y,i,t),s=I.permute(s,o),i=I.permute(i,o),l=p.call(y,i,t),c=s[0].length,u=0;u<c;++u)for(h.call(y,s[0][u],a=l[u],i[0][u][1]),r=1;r<n;++r)h.call(y,s[r][u],a+=i[r-1][u][1],i[r][u][1]);return e}return y.values=function(e){return arguments.length?(d=e,y):d},y.order=function(e){return arguments.length?(f="function"==typeof e?e:ir.get(e)||sr,y):f},y.offset=function(e){return arguments.length?(p="function"==typeof e?e:or.get(e)||lr,y):p},y.x=function(e){return arguments.length?(m=e,y):m},y.y=function(e){return arguments.length?(g=e,y):g},y.out=function(e){return arguments.length?(h=e,y):h},y};var ir=I.map({"inside-out":function(e){for(var t,n=e.length,r=e.map(cr),a=e.map(ur),i=I.range(n).sort(function(e,t){return r[e]-r[t]}),o=0,s=0,l=[],c=[],u=0;u<n;++u)t=i[u],o<s?(o+=a[t],l.push(t)):(s+=a[t],c.push(t));return c.reverse().concat(l)},reverse:function(e){return I.range(e.length).reverse()},default:sr}),or=I.map({silhouette:function(e){for(var t,n,r=e.length,a=e[0].length,i=[],o=0,s=[],l=0;l<a;++l){for(n=t=0;t<r;t++)n+=e[t][l][1];o<n&&(o=n),i.push(n)}for(l=0;l<a;++l)s[l]=(o-i[l])/2;return s},wiggle:function(e){var t,n,r,a,i,o,s,l,c,u=e.length,d=e[0],f=d.length,p=[];for(p[0]=l=c=0,n=1;n<f;++n){for(a=t=0;t<u;++t)a+=e[t][n][1];for(s=d[n][i=t=0]-d[n-1][0];t<u;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);r<t;++r)o+=(e[r][n][1]-e[r][n-1][1])/s;i+=o*e[t][n][1]}p[n]=l-=a?i/a*s:0,l<c&&(c=l)}for(n=0;n<f;++n)p[n]-=c;return p},expand:function(e){for(var t,n,r=e.length,a=e[0].length,i=1/r,o=[],s=0;s<a;++s){for(n=t=0;t<r;t++)n+=e[t][s][1];if(n)for(t=0;t<r;t++)e[t][s][1]/=n;else for(t=0;t<r;t++)e[t][s][1]=i}for(s=0;s<a;++s)o[s]=0;return o},zero:lr});function sr(e){return I.range(e.length)}function lr(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function cr(e){for(var t,n=1,r=0,a=e[0][1],i=e.length;n<i;++n)(t=e[n][1])>a&&(r=n,a=t);return r}function ur(e){return e.reduce(dr,0)}function dr(e,t){return e+t[1]}function fr(e,t){return pr(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function pr(e,t){for(var n=-1,r=+e[0],a=(e[1]-r)/t,i=[];++n<=t;)i[n]=a*n+r;return i}function hr(e){return[I.min(e),I.max(e)]}function mr(e,t){return e.value-t.value}function gr(e,t){var n=e._pack_next;(e._pack_next=t)._pack_prev=e,(t._pack_next=n)._pack_prev=t}function yr(e,t){(e._pack_next=t)._pack_prev=e}function vr(e,t){var n=t.x-e.x,r=t.y-e.y,e=e.r+t.r;return n*n+r*r<.999*e*e}function br(e){if((t=e.children)&&(o=t.length)){var t,n,r,a,i,o,s=1/0,l=-1/0,c=1/0,u=-1/0;if(t.forEach(xr),(n=t[0]).x=-n.r,n.y=0,b(n),1<o&&((r=t[1]).x=r.r,r.y=0,b(r),2<o))for(wr(n,r,a=t[2]),b(a),gr(n,a),gr(n._pack_prev=a,r),r=n._pack_next,v=3;v<o;v++){wr(n,r,a=t[v]);for(var d=0,f=1,p=1,h=r._pack_next;h!==r;h=h._pack_next,f++)if(vr(h,a)){d=1;break}if(1==d)for(i=n._pack_prev;i!==h._pack_prev&&!vr(i,a);i=i._pack_prev,p++);d?(f<p||f==p&&r.r<n.r?yr(n,r=h):yr(n=i,r),v--):(gr(n,a),b(r=a))}for(var m=(s+l)/2,g=(c+u)/2,y=0,v=0;v<o;v++)(a=t[v]).x-=m,a.y-=g,y=Math.max(y,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=y,t.forEach(_r)}function b(e){s=Math.min(e.x-e.r,s),l=Math.max(e.x+e.r,l),c=Math.min(e.y-e.r,c),u=Math.max(e.y+e.r,u)}}function xr(e){e._pack_next=e._pack_prev=e}function _r(e){delete e._pack_next,delete e._pack_prev}function wr(e,t,n){var r,a,i=e.r+n.r,o=t.x-e.x,s=t.y-e.y;i&&(o||s)?(t=t.r+n.r,a=.5+((i*=i)-(t*=t))/(2*(r=o*o+s*s)),t=Math.sqrt(Math.max(0,2*t*(i+r)-(i-=r)*i-t*t))/(2*r),n.x=e.x+a*o+t*s,n.y=e.y+a*s-t*o):(n.x=e.x+i,n.y=e.y)}function Tr(e,t){return e.parent==t.parent?1:2}function kr(e){var t=e.children;return t.length?t[0]:e.t}function Ar(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Mr(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Er(e,t){var n=e.x+t[3],r=e.y+t[0],a=e.dx-t[1]-t[3],e=e.dy-t[0]-t[2];return a<0&&(n+=a/2,a=0),e<0&&(r+=e/2,e=0),{x:n,y:r,dx:a,dy:e}}function Sr(e){var t=e[0],e=e[e.length-1];return t<e?[t,e]:[e,t]}function Lr(e){return e.rangeExtent?e.rangeExtent():Sr(e.range())}function Cr(e,t,n,r){var a=n(e[0],e[1]),i=r(t[0],t[1]);return function(e){return i(a(e))}}function Or(e,t){var n,r=0,a=e.length-1,i=e[r],o=e[a];return o<i&&(n=r,r=a,a=n,n=i,i=o,o=n),e[r]=t.floor(i),e[a]=t.ceil(o),e}function Dr(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Ir}I.layout.histogram=function(){var d=!0,f=Number,p=hr,h=fr;function n(e,t){for(var n,r,a=[],i=e.map(f,this),o=p.call(this,i,t),s=h.call(this,o,i,t),t=-1,l=i.length,c=s.length-1,u=d?1:1/l;++t<c;)(n=a[t]=[]).dx=s[t+1]-(n.x=s[t]),n.y=0;if(0<c)for(t=-1;++t<l;)(r=i[t])>=o[0]&&r<=o[1]&&((n=a[I.bisect(s,r,1,c)-1]).y+=u,n.push(e[t]));return a}return n.value=function(e){return arguments.length?(f=e,n):f},n.range=function(e){return arguments.length?(p=z(e),n):p},n.bins=function(t){return arguments.length?(h="number"==typeof t?function(e){return pr(e,t)}:z(t),n):h},n.frequency=function(e){return arguments.length?(d=!!e,n):d},n},I.layout.pack=function(){var o,s=I.layout.hierarchy().sort(mr),l=0,c=[1,1];function t(e,t){var n,e=s.call(this,e,t),t=e[0],r=c[0],a=c[1],i=null==o?Math.sqrt:"function"==typeof o?o:function(){return o};return t.x=t.y=0,_(t,function(e){e.r=+i(e.value)}),_(t,br),l&&(n=l*(o?1:Math.max(2*t.r/r,2*t.r/a))/2,_(t,function(e){e.r+=n}),_(t,br),_(t,function(e){e.r-=n})),function e(t,n,r,a){var i=t.children;t.x=n+=a*t.x;t.y=r+=a*t.y;t.r*=a;if(i)for(var o=-1,s=i.length;++o<s;)e(i[o],n,r,a)}(t,r/2,a/2,o?1:1/Math.max(2*t.r/r,2*t.r/a)),e}return t.size=function(e){return arguments.length?(c=e,t):c},t.radius=function(e){return arguments.length?(o=null==e||"function"==typeof e?e:+e,t):o},t.padding=function(e){return arguments.length?(l=+e,t):l},Zn(t,s)},I.layout.tree=function(){var c=I.layout.hierarchy().sort(null).value(null),f=Tr,u=[1,1],d=null;function t(e,t){var n,r,a,i,o,s,e=c.call(this,e,t),t=e[0],l=function(e){var t,e={A:null,children:[e]},n=[e];for(;null!=(t=n.pop());)for(var r,a=t.children,i=0,o=a.length;i<o;++i)n.push((a[i]=r={_:a[i],parent:t,children:(r=a[i].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:i}).a=r);return e.children[0]}(t);return _(l,p),l.parent.m=-l.z,Xn(l,h),d?Xn(t,m):(Xn(a=r=n=t,function(e){e.x<n.x&&(n=e),e.x>r.x&&(r=e),e.depth>a.depth&&(a=e)}),i=f(n,r)/2-n.x,o=u[0]/(r.x+f(r,n)/2+i),s=u[1]/(a.depth||1),Xn(t,function(e){e.x=(e.x+i)*o,e.y=e.depth*s})),e}function p(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){for(var a,i=0,o=0,s=e.children,l=s.length;0<=--l;)(a=s[l]).z+=i,a.m+=i,i+=a.s+(o+=a.c);t=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+f(e._,r._),e.m=e.z-t):e.z=t}else r&&(e.z=r.z+f(e._,r._));e.parent.A=function(e,t,n){if(t){for(var r,a=e,i=e,o=t,s=a.parent.children[0],l=a.m,c=i.m,u=o.m,d=s.m;o=Ar(o),a=kr(a),o&&a;)s=kr(s),(i=Ar(i)).a=e,0<(r=o.z+u-a.z-l+f(o._,a._))&&(function(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}(function(e,t,n){return e.a.parent===t.parent?e.a:n}(o,e,n),e,r),l+=r,c+=r),u+=o.m,l+=a.m,d+=s.m,c+=i.m;o&&!Ar(i)&&(i.t=o,i.m+=u-c),a&&!kr(s)&&(s.t=a,s.m+=l-d,n=e)}return n}(e,r,e.parent.A||n[0])}function h(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function m(e){e.x*=u[0],e.y=e.depth*u[1]}return t.separation=function(e){return arguments.length?(f=e,t):f},t.size=function(e){return arguments.length?(d=null==(u=e)?m:null,t):d?null:u},t.nodeSize=function(e){return arguments.length?(d=null==(u=e)?null:m,t):d?u:null},Zn(t,c)},I.layout.cluster=function(){var l=I.layout.hierarchy().sort(null).value(null),c=Tr,u=[1,1],d=!1;function t(e,t){var r,e=l.call(this,e,t),n=e[0],a=0,t=(_(n,function(e){var t,n=e.children;n&&n.length?(e.x=(t=n).reduce(function(e,t){return e+t.x},0)/t.length,e.y=1+I.max(n,function(e){return e.y})):(e.x=r?a+=c(e,r):0,e.y=0,r=e)}),function e(t){var n=t.children;return n&&n.length?e(n[0]):t}(n)),i=function e(t){var n,r=t.children;return r&&(n=r.length)?e(r[n-1]):t}(n),o=t.x-c(t,i)/2,s=i.x+c(i,t)/2;return _(n,d?function(e){e.x=(e.x-n.x)*u[0],e.y=(n.y-e.y)*u[1]}:function(e){e.x=(e.x-o)/(s-o)*u[0],e.y=(1-(n.y?e.y/n.y:1))*u[1]}),e}return t.separation=function(e){return arguments.length?(c=e,t):c},t.size=function(e){return arguments.length?(d=null==(u=e),t):d?null:u},t.nodeSize=function(e){return arguments.length?(d=null!=(u=e),t):d?u:null},Zn(t,l)},I.layout.treemap=function(){var n,r=I.layout.hierarchy(),u=Math.round,a=[1,1],i=null,c=Mr,o=!1,d="squarify",f=.5*(1+Math.sqrt(5));function p(e,t){for(var n,r,a=-1,i=e.length;++a<i;)r=(n=e[a]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function h(e){var t=e.children;if(t&&t.length){var n,r,a=c(e),i=[],o=t.slice(),s=1/0,l="slice"===d?a.dx:"dice"===d?a.dy:"slice-dice"===d?1&e.depth?a.dy:a.dx:Math.min(a.dx,a.dy);for(p(o,a.dx*a.dy/e.value),i.area=0;0<(r=o.length);)i.push(r=o[r-1]),i.area+=r.area,s="squarify"!==d||(n=function(e,t){var n,r=e.area,a=0,i=1/0,o=-1,s=e.length;for(;++o<s;)(n=e[o].area)&&(n<i&&(i=n),a<n&&(a=n));return t*=t,(r*=r)?Math.max(t*a*f/r,r/(t*i*f)):1/0}(i,l))<=s?(o.pop(),n):(i.area-=i.pop().area,m(i,l,a,!1),l=Math.min(a.dx,a.dy),1/(i.length=i.area=0));i.length&&(m(i,l,a,!0),i.length=i.area=0),t.forEach(h)}}function s(e){var t=e.children;if(t&&t.length){var n,r=c(e),a=t.slice(),i=[];for(p(a,r.dx*r.dy/e.value),i.area=0;n=a.pop();)i.push(n),i.area+=n.area,null!=n.z&&(m(i,n.z?r.dx:r.dy,r,!a.length),i.length=i.area=0);t.forEach(s)}}function m(e,t,n,r){var a,i=-1,o=e.length,s=n.x,l=n.y,c=t?u(e.area/t):0;if(t==n.dx){for((r||c>n.dy)&&(c=n.dy);++i<o;)(a=e[i]).x=s,a.y=l,a.dy=c,s+=a.dx=Math.min(n.x+n.dx-s,c?u(a.area/c):0);a.z=!0,a.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++i<o;)(a=e[i]).x=s,a.y=l,a.dx=c,l+=a.dy=Math.min(n.y+n.dy-l,c?u(a.area/c):0);a.z=!1,a.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function l(e){var e=n||r(e),t=e[0];return t.x=t.y=0,t.value?(t.dx=a[0],t.dy=a[1]):t.dx=t.dy=0,n&&r.revalue(t),p([t],t.dx*t.dy/t.value),(n?s:h)(t),o&&(n=e),e}return l.size=function(e){return arguments.length?(a=e,l):a},l.padding=function(n){return arguments.length?(c=null==(i=n)?Mr:"function"==(t=typeof n)?function(e){var t=n.call(l,e,e.depth);return null==t?Mr(e):Er(e,"number"==typeof t?[t,t,t,t]:t)}:("number"==t&&(n=[n,n,n,n]),e),l):i;function e(e){return Er(e,n)}var t},l.round=function(e){return arguments.length?(u=e?Math.round:Number,l):u!=Number},l.sticky=function(e){return arguments.length?(o=e,n=null,l):o},l.ratio=function(e){return arguments.length?(f=e,l):f},l.mode=function(e){return arguments.length?(d=e+"",l):d},Zn(l,r)},I.random={normal:function(r,a){var e=arguments.length;return e<2&&(a=1),e<1&&(r=0),function(){for(var e,t,n;!(n=(e=2*Math.random()-1)*e+(t=2*Math.random()-1)*t)||1<n;);return r+a*e*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var e=I.random.normal.apply(I,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=I.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(n){return function(){for(var e=0,t=0;t<n;t++)e+=Math.random();return e}}},I.scale={};var Ir={floor:C,ceil:C};function Rr(n,e,t,r){var a=[],i=[],o=0,s=Math.min(n.length,e.length)-1;for(n[s]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++o<=s;)a.push(t(n[o-1],n[o])),i.push(r(e[o-1],e[o]));return function(e){var t=I.bisect(n,e,1,s)-1;return i[t](a[t](e))}}function Pr(e,t){return I.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Nr(e,t){return Or(e,Dr(Fr(e,t)[2])),Or(e,Dr(Fr(e,t)[2])),e}function Fr(e,t){null==t&&(t=10);var e=Sr(e),n=e[1]-e[0],r=Math.pow(10,Math.floor(Math.log(n/t)/Math.LN10)),t=t/n*r;return t<=.15?r*=10:t<=.35?r*=5:t<=.75&&(r*=2),e[0]=Math.ceil(e[0]/r)*r,e[1]=Math.floor(e[1]/r)*r+.5*r,e[2]=r,e}function zr(e,t){return I.range.apply(I,Fr(e,t))}I.scale.linear=function(){return function e(n,r,a,i){var o,s;function t(){var e=2<Math.min(n.length,r.length)?Rr:Cr,t=i?qn:jn;return o=e(n,r,t,a),s=e(r,n,t,x),l}function l(e){return o(e)}l.invert=function(e){return s(e)};l.domain=function(e){return arguments.length?(n=e.map(Number),t()):n};l.range=function(e){return arguments.length?(r=e,t()):r};l.rangeRound=function(e){return l.range(e).interpolate(Dn)};l.clamp=function(e){return arguments.length?(i=e,t()):i};l.interpolate=function(e){return arguments.length?(a=e,t()):a};l.ticks=function(e){return zr(n,e)};l.tickFormat=function(e,t){return d3_scale_linearTickFormat(n,e,t)};l.nice=function(e){return Nr(n,e),t()};l.copy=function(){return e(n,r,a,i)};return t()}([0,1],[0,1],x,!1)};I.scale.log=function(){return function e(t,l,c,u){function d(e){return(c?Math.log(e<0?0:e):-Math.log(0<e?0:-e))/Math.log(l)}function f(e){return c?Math.pow(l,e):-Math.pow(l,-e)}function n(e){return t(d(e))}n.invert=function(e){return f(t.invert(e))};n.domain=function(e){return arguments.length?(c=0<=e[0],t.domain((u=e.map(Number)).map(d)),n):u};n.base=function(e){return arguments.length?(l=+e,t.domain(u.map(d)),n):l};n.nice=function(){var e=Or(u.map(d),c?Math:jr);return t.domain(e),u=e.map(f),n};n.ticks=function(){var e=Sr(u),t=[],n=e[0],r=e[1],a=Math.floor(d(n)),i=Math.ceil(d(r)),o=l%1?2:l;if(isFinite(i-a)){if(c){for(;a<i;a++)for(var s=1;s<o;s++)t.push(f(a)*s);t.push(f(a))}else for(t.push(f(a));a++<i;)for(s=o-1;0<s;s--)t.push(f(a)*s);for(a=0;t[a]<n;a++);for(i=t.length;t[i-1]>r;i--);t=t.slice(a,i)}return t};n.copy=function(){return e(t.copy(),l,c,u)};return Pr(n,t)}(I.scale.linear().domain([0,1]),10,!0,[1,10])};var jr={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function qr(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}I.scale.pow=function(){return function e(t,n,r){var a=qr(n),i=qr(1/n);function o(e){return t(a(e))}o.invert=function(e){return i(t.invert(e))};o.domain=function(e){return arguments.length?(t.domain((r=e.map(Number)).map(a)),o):r};o.ticks=function(e){return zr(r,e)};o.tickFormat=function(e,t){return d3_scale_linearTickFormat(r,e,t)};o.nice=function(e){return o.domain(Nr(r,e))};o.exponent=function(e){return arguments.length?(a=qr(n=e),i=qr(1/n),t.domain(r.map(a)),o):n};o.copy=function(){return e(t.copy(),n,r)};return Pr(o,t)}(I.scale.linear(),1,[0,1])},I.scale.sqrt=function(){return I.scale.pow().exponent(.5)},I.scale.ordinal=function(){return function e(s,l){var a,c,u;function d(e){return c[((a.get(e)||("range"===l.t?a.set(e,s.push(e)):NaN))-1)%c.length]}function f(t,n){return I.range(s.length).map(function(e){return t+n*e})}d.domain=function(e){if(!arguments.length)return s;s=[],a=new v;for(var t,n=-1,r=e.length;++n<r;)a.has(t=e[n])||a.set(t,s.push(t));return d[l.t].apply(d,l.a)};d.range=function(e){return arguments.length?(c=e,u=0,l={t:"range",a:arguments},d):c};d.rangePoints=function(e,t){arguments.length<2&&(t=0);var n=e[0],r=e[1],r=s.length<2?(n=(n+r)/2,0):(r-n)/(s.length-1+t);return c=f(n+r*t/2,r),u=0,l={t:"rangePoints",a:arguments},d};d.rangeRoundPoints=function(e,t){arguments.length<2&&(t=0);var n=e[0],r=e[1],a=s.length<2?(n=r=Math.round((n+r)/2),0):(r-n)/(s.length-1+t)|0;return c=f(n+Math.round(a*t/2+(r-n-(s.length-1+t)*a)/2),a),u=0,l={t:"rangeRoundPoints",a:arguments},d};d.rangeBands=function(e,t,n){arguments.length<2&&(t=0),arguments.length<3&&(n=t);var r=e[1]<e[0],a=e[+r],i=e[1-r],i=(i-a)/(s.length-t+2*n);return c=f(a+i*n,i),r&&c.reverse(),u=i*(1-t),l={t:"rangeBands",a:arguments},d};d.rangeRoundBands=function(e,t,n){arguments.length<2&&(t=0),arguments.length<3&&(n=t);var r=e[1]<e[0],a=e[+r],i=e[1-r],o=Math.floor((i-a)/(s.length-t+2*n));return c=f(a+Math.round((i-a-(s.length-t)*o)/2),o),r&&c.reverse(),u=Math.round(o*(1-t)),l={t:"rangeRoundBands",a:arguments},d};d.rangeBand=function(){return u};d.rangeExtent=function(){return Sr(l.a[0])};d.copy=function(){return e(s,l)};return d.domain(s)}([],{t:"range",a:[[]]})},I.scale.category10=function(){return I.scale.ordinal().range(Hr)},I.scale.category20=function(){return I.scale.ordinal().range(Br)},I.scale.category20b=function(){return I.scale.ordinal().range(Ur)},I.scale.category20c=function(){return I.scale.ordinal().range(Vr)};var Hr=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(st),Br=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(st),Ur=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(st),Vr=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(st);function Yr(){return 0}I.scale.quantile=function(){return function e(n,r){var a;function t(){var e=0,t=r.length;for(a=[];++e<t;)a[e-1]=I.quantile(n,e/t);return i}function i(e){if(!isNaN(e=+e))return r[I.bisect(a,e)]}i.domain=function(e){return arguments.length?(n=e.map(c).filter(u).sort(o),t()):n};i.range=function(e){return arguments.length?(r=e,t()):r};i.quantiles=function(){return a};i.invertExtent=function(e){return(e=r.indexOf(e))<0?[NaN,NaN]:[0<e?a[e-1]:n[0],e<a.length?a[e]:n[n.length-1]]};i.copy=function(){return e(n,r)};return t()}([],[])},I.scale.quantize=function(){return function e(t,n,r){var a,i;function o(e){return r[Math.max(0,Math.min(i,Math.floor(a*(e-t))))]}function s(){return a=r.length/(n-t),i=r.length-1,o}o.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],s()):[t,n]};o.range=function(e){return arguments.length?(r=e,s()):r};o.invertExtent=function(e){return[e=(e=r.indexOf(e))<0?NaN:e/a+t,e+1/a]};o.copy=function(){return e(t,n,r)};return s()}(0,1,[0,1])},I.scale.threshold=function(){return function e(t,n){function r(e){if(e<=e)return n[I.bisect(t,e)]}r.domain=function(e){return arguments.length?(t=e,r):t};r.range=function(e){return arguments.length?(n=e,r):n};r.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]};r.copy=function(){return e(t,n)};return r}([.5],[0,1])},I.scale.identity=function(){return function e(n){function t(e){return+e}t.invert=t;t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n};t.ticks=function(e){return zr(n,e)};t.tickFormat=function(e,t){return d3_scale_linearTickFormat(n,e,t)};t.copy=function(){return e(n)};return t}([0,1])},I.svg={},I.svg.arc=function(){var T=Gr,k=Wr,A=Yr,M=$r,E=Zr,S=Xr,L=Jr;function t(){var e=Math.max(0,+T.apply(this,arguments)),t=Math.max(0,+k.apply(this,arguments)),n=E.apply(this,arguments)-F,r=S.apply(this,arguments)-F,a=Math.abs(r-n),i=r<n?0:1;if(t<e&&(o=t,t=e,e=o),qe<=a)return C(t,i)+(e?C(e,1-i):"")+"Z";var o,s,l,c,u,d,f,p,h,m,g,y,v,b,x=0,_=0,w=[];return(b=(+L.apply(this,arguments)||0)/2)&&(y=M===$r?Math.sqrt(e*e+t*t):+M.apply(this,arguments),i||(_*=-1),t&&(_=Ue(y/t*Math.sin(b))),e&&(x=Ue(y/e*Math.sin(b)))),t?(c=t*Math.cos(n+_),u=t*Math.sin(n+_),d=t*Math.cos(r-_),s=t*Math.sin(r-_),l=Math.abs(r-n-2*_)<=D?0:1,_&&Kr(c,u,d,s)===i^l&&(y=(n+r)/2,c=t*Math.cos(y),u=t*Math.sin(y),d=s=null)):c=u=0,e?(h=e*Math.cos(r-x),m=e*Math.sin(r-x),g=e*Math.cos(n+x),f=e*Math.sin(n+x),p=Math.abs(n-r+2*x)<=D?0:1,x&&Kr(h,m,g,f)===1-i^p&&(b=(n+r)/2,h=e*Math.cos(b),m=e*Math.sin(b),g=f=null)):h=m=0,O<a&&.001<(o=Math.min(Math.abs(t-e)/2,+A.apply(this,arguments)))?(_=e<t^i?0:1,x=y=o,a<D&&(r=c-(n=null==g?[h,m]:null==d?[c,u]:Dt([c,u],[g,f],[d,s],[h,m]))[0],b=u-n[1],a=d-n[0],v=s-n[1],r=1/Math.sin(Math.acos((r*a+b*v)/(Math.sqrt(r*r+b*b)*Math.sqrt(a*a+v*v)))/2),b=Math.sqrt(n[0]*n[0]+n[1]*n[1]),x=Math.min(o,(e-b)/(r-1)),y=Math.min(o,(t-b)/(1+r))),null!=d?(a=Qr(null==g?[h,m]:[g,f],[c,u],t,y,i),v=Qr([d,s],[h,m],t,y,i),o===y?w.push("M",a[0],"A",y,",",y," 0 0,",_," ",a[1],"A",t,",",t," 0 ",1-i^Kr(a[1][0],a[1][1],v[1][0],v[1][1]),",",i," ",v[1],"A",y,",",y," 0 0,",_," ",v[0]):w.push("M",a[0],"A",y,",",y," 0 1,",_," ",v[0])):w.push("M",c,",",u),null!=g?(n=Qr([c,u],[g,f],e,-x,i),b=Qr([h,m],null==d?[c,u]:[d,s],e,-x,i),o===x?w.push("L",b[0],"A",x,",",x," 0 0,",_," ",b[1],"A",e,",",e," 0 ",i^Kr(b[1][0],b[1][1],n[1][0],n[1][1]),",",1-i," ",n[1],"A",x,",",x," 0 0,",_," ",n[0]):w.push("L",b[0],"A",x,",",x," 0 0,",_," ",n[0])):w.push("L",h,",",m)):(w.push("M",c,",",u),null!=d&&w.push("A",t,",",t," 0 ",l,",",i," ",d,",",s),w.push("L",h,",",m),null!=g&&w.push("A",e,",",e," 0 ",p,",",1-i," ",g,",",f)),w.push("Z"),w.join("")}function C(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return t.innerRadius=function(e){return arguments.length?(T=z(e),t):T},t.outerRadius=function(e){return arguments.length?(k=z(e),t):k},t.cornerRadius=function(e){return arguments.length?(A=z(e),t):A},t.padRadius=function(e){return arguments.length?(M=e==$r?$r:z(e),t):M},t.startAngle=function(e){return arguments.length?(E=z(e),t):E},t.endAngle=function(e){return arguments.length?(S=z(e),t):S},t.padAngle=function(e){return arguments.length?(L=z(e),t):L},t.centroid=function(){var e=(+T.apply(this,arguments)+ +k.apply(this,arguments))/2,t=(+E.apply(this,arguments)+ +S.apply(this,arguments))/2-F;return[Math.cos(t)*e,Math.sin(t)*e]},t};var $r="auto";function Gr(e){return e.innerRadius}function Wr(e){return e.outerRadius}function Zr(e){return e.startAngle}function Xr(e){return e.endAngle}function Jr(e){return e&&e.padAngle}function Kr(e,t,n,r){return 0<(e-n)*t-(t-r)*e?0:1}function Qr(e,t,n,r,a){var i=e[0]-t[0],o=e[1]-t[1],a=(a?r:-r)/Math.sqrt(i*i+o*o),o=a*o,a=-a*i,i=e[0]+o,e=e[1]+a,s=t[0]+o,t=t[1]+a,l=(i+s)/2,c=(e+t)/2,u=s-i,d=t-e,f=u*u+d*d,r=n-r,i=i*t-s*e,t=(d<0?-1:1)*Math.sqrt(Math.max(0,r*r*f-i*i)),s=(i*d-u*t)/f,e=(-i*u-d*t)/f,p=(i*d+u*t)/f,i=(-i*u+d*t)/f,u=s-l,d=e-c,t=p-l,f=i-c;return t*t+f*f<u*u+d*d&&(s=p,e=i),[[s-o,e-a],[s*n/r,e*n/r]]}function ea(){return!0}function ta(c){var u=Mt,d=Et,f=ea,p=k,t=p.key,h=.7;function n(e){var t,n=[],r=[],a=-1,i=e.length,o=z(u),s=z(d);function l(){n.push("M",p(c(r),h))}for(;++a<i;)f.call(this,t=e[a],a)?r.push([+o.call(this,t,a),+s.call(this,t,a)]):r.length&&(l(),r=[]);return r.length&&l(),n.length?n.join(""):null}return n.x=function(e){return arguments.length?(u=e,n):u},n.y=function(e){return arguments.length?(d=e,n):d},n.defined=function(e){return arguments.length?(f=e,n):f},n.interpolate=function(e){return arguments.length?(t="function"==typeof e?p=e:(p=na.get(e)||k).key,n):t},n.tension=function(e){return arguments.length?(h=e,n):h},n}I.svg.line=function(){return ta(C)};var na=I.map({linear:k,"linear-closed":ra,step:function(e){var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];for(;++t<n;)a.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);1<n&&a.push("H",r[0]);return a.join("")},"step-before":aa,"step-after":ia,basis:la,"basis-open":function(e){if(e.length<4)return k(e);var t,n=[],r=-1,a=e.length,i=[0],o=[0];for(;++r<3;)t=e[r],i.push(t[0]),o.push(t[1]);n.push(w(T,i)+","+w(T,o)),--r;for(;++r<a;)t=e[r],i.shift(),i.push(t[0]),o.shift(),o.push(t[1]),da(n,i,o);return n.join("")},"basis-closed":function(e){var t,n,r=-1,a=e.length,i=a+4,o=[],s=[];for(;++r<4;)n=e[r%a],o.push(n[0]),s.push(n[1]);t=[w(T,o),",",w(T,s)],--r;for(;++r<i;)n=e[r%a],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),da(t,o,s);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var r,a,i=e[0][0],o=e[0][1],s=e[n][0]-i,l=e[n][1]-o,c=-1;++c<=n;)r=e[c],a=c/n,r[0]=t*r[0]+(1-t)*(i+a*s),r[1]=t*r[1]+(1-t)*(o+a*l);return la(e)},cardinal:function(e,t){return e.length<3?k(e):e[0]+oa(e,sa(e,t))},"cardinal-open":function(e,t){return e.length<4?k(e):e[1]+oa(e.slice(1,-1),sa(e,t))},"cardinal-closed":function(e,t){return e.length<3?ra(e):e[0]+oa((e.push(e[0]),e),sa([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?k(e):e[0]+oa(e,function(e){var t,n,r,a,i=[],o=function(e){var t=0,n=e.length-1,r=[],a=e[0],i=e[1],o=r[0]=fa(a,i);for(;++t<n;)r[t]=(o+(o=fa(a=i,i=e[t+1])))/2;return r[t]=o,r}(e),s=-1,l=e.length-1;for(;++s<l;)t=fa(e[s],e[s+1]),M(t)<O?o[s]=o[s+1]=0:(n=o[s]/t,r=o[s+1]/t,9<(a=n*n+r*r)&&(a=3*t/Math.sqrt(a),o[s]=a*n,o[s+1]=a*r));s=-1;for(;++s<=l;)a=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),i.push([a||0,o[s]*a||0]);return i}(e))}});function k(e){return 1<e.length?e.join("L"):e+"Z"}function ra(e){return e.join("L")+"Z"}function aa(e){for(var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];++t<n;)a.push("V",(r=e[t])[1],"H",r[0]);return a.join("")}function ia(e){for(var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];++t<n;)a.push("H",(r=e[t])[0],"V",r[1]);return a.join("")}function oa(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return k(e);var n=e.length!=t.length,r="",a=e[0],i=e[1],o=t[0],s=o,l=1;if(n&&(r+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],a=e[1],l=2),1<t.length){s=t[1],i=e[l],l++,r+="C"+(a[0]+o[0])+","+(a[1]+o[1])+","+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1];for(var c=2;c<t.length;c++,l++)i=e[l],s=t[c],r+="S"+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1]}return n&&(a=e[l],r+="Q"+(i[0]+2*s[0]/3)+","+(i[1]+2*s[1]/3)+","+a[0]+","+a[1]),r}function sa(e,t){for(var n,r=[],a=(1-t)/2,i=e[0],o=e[1],s=1,l=e.length;++s<l;)n=i,i=o,o=e[s],r.push([a*(o[0]-n[0]),a*(o[1]-n[1])]);return r}function la(e){if(e.length<3)return k(e);var t=1,n=e.length,r=e[0],a=r[0],i=r[1],o=[a,a,a,(r=e[1])[0]],s=[i,i,i,r[1]],l=[a,",",i,"L",w(T,o),",",w(T,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),da(l,o,s);return e.pop(),l.push("L",r),l.join("")}function w(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}na.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var ca=[0,2/3,1/3,0],ua=[0,1/3,2/3,0],T=[0,1/6,2/3,1/6];function da(e,t,n){e.push("C",w(ca,t),",",w(ca,n),",",w(ua,t),",",w(ua,n),",",w(T,t),",",w(T,n))}function fa(e,t){return(t[1]-e[1])/(t[0]-e[0])}function pa(e){for(var t,n,r,a=-1,i=e.length;++a<i;)n=(t=e[a])[0],r=t[1]-F,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function ha(h){var m=Mt,g=Mt,y=0,v=Et,b=ea,x=k,t=x.key,_=x,w="L",T=.7;function n(e){var t,n,r,a=[],i=[],o=[],s=-1,l=e.length,c=z(m),u=z(y),d=m===g?function(){return n}:z(g),f=y===v?function(){return r}:z(v);function p(){a.push("M",x(h(o),T),w,_(h(i.reverse()),T),"Z")}for(;++s<l;)b.call(this,t=e[s],s)?(i.push([n=+c.call(this,t,s),r=+u.call(this,t,s)]),o.push([+d.call(this,t,s),+f.call(this,t,s)])):i.length&&(p(),i=[],o=[]);return i.length&&p(),a.length?a.join(""):null}return n.x=function(e){return arguments.length?(m=g=e,n):g},n.x0=function(e){return arguments.length?(m=e,n):m},n.x1=function(e){return arguments.length?(g=e,n):g},n.y=function(e){return arguments.length?(y=v=e,n):v},n.y0=function(e){return arguments.length?(y=e,n):y},n.y1=function(e){return arguments.length?(v=e,n):v},n.defined=function(e){return arguments.length?(b=e,n):b},n.interpolate=function(e){return arguments.length?(t="function"==typeof e?x=e:(x=na.get(e)||k).key,_=x.reverse||x,w=x.closed?"M":"L",n):t},n.tension=function(e){return arguments.length?(T=e,n):T},n}function ma(e){return e.source}function ga(e){return e.target}function ya(e){return e.radius}function va(e){return[e.x,e.y]}function ba(){return 64}function xa(){return"circle"}function _a(e){e=Math.sqrt(e/D);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}I.svg.line.radial=function(){var e=ta(pa);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},(aa.reverse=ia).reverse=aa,I.svg.area=function(){return ha(C)},I.svg.area.radial=function(){var e=ha(pa);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},I.svg.chord=function(){var a=ma,i=ga,o=ya,s=Zr,l=Xr;function t(e,t){var n,r=c(this,a,e,t),e=c(this,i,e,t);return"M"+r.p0+u(r.r,r.p1,r.a1-r.a0)+(t=e,(n=r).a0==t.a0&&n.a1==t.a1?d(r.r,r.p1,r.r,r.p0):d(r.r,r.p1,e.r,e.p0)+u(e.r,e.p1,e.a1-e.a0)+d(e.r,e.p1,r.r,r.p0))+"Z"}function c(e,t,n,r){var t=t.call(e,n,r),n=o.call(e,t,r),a=s.call(e,t,r)-F,e=l.call(e,t,r)-F;return{r:n,a0:a,a1:e,p0:[n*Math.cos(a),n*Math.sin(a)],p1:[n*Math.cos(e),n*Math.sin(e)]}}function u(e,t,n){return"A"+e+","+e+" 0 "+ +(D<n)+",1 "+t}function d(e,t,n,r){return"Q 0,0 "+r}return t.radius=function(e){return arguments.length?(o=z(e),t):o},t.source=function(e){return arguments.length?(a=z(e),t):a},t.target=function(e){return arguments.length?(i=z(e),t):i},t.startAngle=function(e){return arguments.length?(s=z(e),t):s},t.endAngle=function(e){return arguments.length?(l=z(e),t):l},t},I.svg.diagonal=function(){var r=ma,a=ga,i=va;function t(e,t){var n=r.call(this,e,t),e=a.call(this,e,t),t=(n.y+e.y)/2,n=[n,{x:n.x,y:t},{x:e.x,y:t},e];return"M"+(n=n.map(i))[0]+"C"+n[1]+" "+n[2]+" "+n[3]}return t.source=function(e){return arguments.length?(r=z(e),t):r},t.target=function(e){return arguments.length?(a=z(e),t):a},t.projection=function(e){return arguments.length?(i=e,t):i},t},I.svg.diagonal.radial=function(){var e=I.svg.diagonal(),t=va,r=e.projection;return e.projection=function(e){return arguments.length?r((n=t=e,function(){var e=n.apply(this,arguments),t=e[0],e=e[1]-F;return[t*Math.cos(e),t*Math.sin(e)]})):t;var n},e},I.svg.symbol=function(){var n=xa,r=ba;function t(e,t){return(wa.get(n.call(this,e,t))||_a)(r.call(this,e,t))}return t.type=function(e){return arguments.length?(n=z(e),t):n},t.size=function(e){return arguments.length?(r=z(e),t):r},t};var wa=I.map({circle:_a,cross:function(e){e=Math.sqrt(e/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(e){var e=Math.sqrt(e/(2*ka)),t=e*ka;return"M0,"+-e+"L"+t+",0 0,"+e+" "+-t+",0Z"},square:function(e){e=Math.sqrt(e)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(e){var e=Math.sqrt(e/Ta),t=e*Ta/2;return"M0,"+t+"L"+e+","+-t+" "+-e+","+-t+"Z"},"triangle-up":function(e){var e=Math.sqrt(e/Ta),t=e*Ta/2;return"M0,"+-t+"L"+e+","+t+" "+-e+","+t+"Z"}}),Ta=(I.svg.symbolTypes=wa.keys(),Math.sqrt(3)),ka=Math.tan(30*He),Aa=(r.transition=function(e){for(var t,n,r=j||++La,a=Da(e),i=[],o=Sa||{time:Date.now(),ease:En,delay:0,duration:250},s=-1,l=this.length;++s<l;){i.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(n=c[u])&&Ia(n,u,a,r,o),t.push(n)}return Ea(i,a,r)},r.interrupt=function(e){return this.each(null==e?Aa:Ma(Da(e)))},Ma(Da()));function Ma(r){return function(){var e,t,n;(e=this[r])&&(n=e[t=e.active])&&(n.timer.c=null,n.timer.t=NaN,--e.count?delete e[t]:delete this[r],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Ea(e,t,n){return le(e,A),e.namespace=t,e.id=n,e}var j,Sa,A=[],La=0;function Ca(e,r,a,i){var o=e.id,s=e.namespace;return l(e,"function"==typeof a?function(e,t,n){e[s][o].tween.set(r,i(a.call(e,e.__data__,t,n)))}:(a=i(a),function(e){e[s][o].tween.set(r,a)}))}function Oa(e){return null==e&&(e=""),function(){this.textContent=e}}function Da(e){return null==e?"__transition__":"__transition_"+e+"__"}function Ia(i,o,r,s,e){var l,c,u,d,f,p=i[r]||(i[r]={active:0,count:0}),h=p[s];function n(e){var t,n,r=p.active,a=p[r];for(t in a&&(a.timer.c=null,a.timer.t=NaN,--p.count,delete p[r],a.event&&a.event.interrupt.call(i,i.__data__,a.index)),p)+t<s&&((n=p[t]).timer.c=null,n.timer.t=NaN,--p.count,delete p[t]);c.c=m,wt(function(){return c.c&&m(e||1)&&(c.c=null,c.t=NaN),1},0,l),p.active=s,h.event&&h.event.start.call(i,i.__data__,o),f=[],h.tween.forEach(function(e,t){(t=t.call(i,i.__data__,o))&&f.push(t)}),d=h.ease,u=h.duration}function m(e){for(var e=e/u,t=d(e),n=f.length;0<n;)f[--n].call(i,t);if(1<=e)return h.event&&h.event.end.call(i,i.__data__,o),--p.count?delete p[s]:delete i[r],1}h||(l=e.time,c=wt(function(e){var t=h.delay;if(c.t=t+l,t<=e)return n(e-t);c.c=n},0,l),h=p[s]={tween:new v,time:l,timer:c,delay:e.delay,duration:e.duration,ease:e.ease,index:o},e=null,++p.count)}A.call=r.call,A.empty=r.empty,A.node=r.node,A.size=r.size,I.transition=function(e,t){return e&&e.transition?j?e.transition(t):e:I.selection().transition(e)},(I.transition.prototype=A).select=function(e){var t,n,r,a=this.id,i=this.namespace,o=[];e=fe(e);for(var s=-1,l=this.length;++s<l;){o.push(t=[]);for(var c=this[s],u=-1,d=c.length;++u<d;)(r=c[u])&&(n=e.call(r,r.__data__,u,s))?("__data__"in r&&(n.__data__=r.__data__),Ia(n,u,i,a,r[i][a]),t.push(n)):t.push(null)}return Ea(o,i,a)},A.selectAll=function(e){var t,n,r,a,i,o=this.id,s=this.namespace,l=[];e=pe(e);for(var c=-1,u=this.length;++c<u;)for(var d=this[c],f=-1,p=d.length;++f<p;)if(r=d[f]){i=r[s][o],n=e.call(r,r.__data__,f,c),l.push(t=[]);for(var h=-1,m=n.length;++h<m;)(a=n[h])&&Ia(a,h,s,o,i),t.push(a)}return Ea(l,s,o)},A.filter=function(e){var t,n,r=[];"function"!=typeof e&&(e=Ee(e));for(var a=0,i=this.length;a<i;a++){r.push(t=[]);for(var o,s=0,l=(o=this[a]).length;s<l;s++)(n=o[s])&&e.call(n,n.__data__,s,a)&&t.push(n)}return Ea(r,this.namespace,this.id)},A.tween=function(t,n){var r=this.id,a=this.namespace;return arguments.length<2?this.node()[a][r].tween.get(t):l(this,null==n?function(e){e[a][r].tween.remove(t)}:function(e){e[a][r].tween.set(t,n)})},A.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var r="transform"==e?zn:x,a=I.ns.qualify(e);function i(){this.removeAttribute(a)}function o(){this.removeAttributeNS(a.space,a.local)}return Ca(this,"attr."+e,t,a.local?function(n){return null==n?o:(n+="",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=r(e,n),function(e){this.setAttributeNS(a.space,a.local,t(e))})})}:function(n){return null==n?i:(n+="",function(){var t,e=this.getAttribute(a);return e!==n&&(t=r(e,n),function(e){this.setAttribute(a,t(e))})})})},A.attrTween=function(e,r){var a=I.ns.qualify(e);return this.tween("attr."+e,a.local?function(e,t){var n=r.call(this,e,t,this.getAttributeNS(a.space,a.local));return n&&function(e){this.setAttributeNS(a.space,a.local,n(e))}}:function(e,t){var n=r.call(this,e,t,this.getAttribute(a));return n&&function(e){this.setAttribute(a,n(e))}})},A.style=function(r,e,a){var t=arguments.length;if(t<3){if("string"!=typeof r){for(a in t<2&&(e=""),r)this.style(a,r[a],e);return this}a=""}function i(){this.style.removeProperty(r)}return Ca(this,"style."+r,e,function(n){return null==n?i:(n+="",function(){var t,e=P(this).getComputedStyle(this,null).getPropertyValue(r);return e!==n&&(t=x(e,n),function(e){this.style.setProperty(r,t(e),a)})})})},A.styleTween=function(r,a,i){return arguments.length<3&&(i=""),this.tween("style."+r,function(e,t){var n=a.call(this,e,t,P(this).getComputedStyle(this,null).getPropertyValue(r));return n&&function(e){this.style.setProperty(r,n(e),i)}})},A.text=function(e){return Ca(this,"text",e,Oa)},A.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},A.ease=function(t){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:("function"!=typeof t&&(t=I.ease.apply(I,arguments)),l(this,function(e){e[r][n].ease=t}))},A.delay=function(r){var a=this.id,i=this.namespace;return arguments.length<1?this.node()[i][a].delay:l(this,"function"==typeof r?function(e,t,n){e[i][a].delay=+r.call(e,e.__data__,t,n)}:(r=+r,function(e){e[i][a].delay=r}))},A.duration=function(r){var a=this.id,i=this.namespace;return arguments.length<1?this.node()[i][a].duration:l(this,"function"==typeof r?function(e,t,n){e[i][a].duration=Math.max(1,r.call(e,e.__data__,t,n))}:(r=Math.max(1,r),function(e){e[i][a].duration=r}))},A.each=function(r,t){var a=this.id,i=this.namespace;if(arguments.length<2){var e=Sa,n=j;try{j=a,l(this,function(e,t,n){Sa=e[i][a],r.call(e,e.__data__,t,n)})}finally{Sa=e,j=n}}else l(this,function(e){e=e[i][a];(e.event||(e.event=I.dispatch("start","end","interrupt"))).on(r,t)});return this},A.transition=function(){for(var e,t,n,r=this.id,a=++La,i=this.namespace,o=[],s=0,l=this.length;s<l;s++){o.push(e=[]);for(var c,u=0,d=(c=this[s]).length;u<d;u++)(t=c[u])&&Ia(t,u,i,a,{time:(n=t[i][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),e.push(t)}return Ea(o,i,a)},I.svg.axis=function(){var _,w=I.scale.linear(),T=Ra,k=6,A=6,M=3,E=[10],S=null;function n(e){e.each(function(){var e,t,n,r,a,i,o,s=I.select(this),l=this.__chart__||w,c=this.__chart__=w.copy(),u=null==S?c.ticks?c.ticks.apply(c,E):c.domain():S,d=null==_?c.tickFormat?c.tickFormat.apply(c,E):C:_,u=s.selectAll(".tick").data(u,c),f=u.enter().insert("g",".domain").attr("class","tick").style("opacity",O),p=I.transition(u.exit()).style("opacity",O).remove(),h=I.transition(u.order()).style("opacity",1),m=Math.max(k,0)+M,g=Lr(c),s=s.selectAll(".domain").data([0]),s=(s.enter().append("path").attr("class","domain"),I.transition(s)),y=(f.append("line"),f.append("text"),f.select("line")),v=h.select("line"),u=u.select("text").text(d),d=f.select("text"),b=h.select("text"),x="top"===T||"left"===T?-1:1;"bottom"===T||"top"===T?(e=Na,t="x",r="y",n="x2",a="y2",u.attr("dy",x<0?"0em":".71em").style("text-anchor","middle"),s.attr("d","M"+g[0]+","+x*A+"V0H"+g[1]+"V"+x*A)):(e=Fa,t="y",r="x",n="y2",a="x2",u.attr("dy",".32em").style("text-anchor",x<0?"end":"start"),s.attr("d","M"+x*A+","+g[0]+"H0V"+g[1]+"H"+x*A)),y.attr(a,x*k),d.attr(r,x*m),v.attr(n,0).attr(a,x*k),b.attr(t,0).attr(r,x*m),c.rangeBand?(o=(i=c).rangeBand()/2,l=c=function(e){return i(e)+o}):l.rangeBand?l=c:p.call(e,c,l),f.call(e,l,c),h.call(e,c,c)})}return n.scale=function(e){return arguments.length?(w=e,n):w},n.orient=function(e){return arguments.length?(T=e in Pa?e+"":Ra,n):T},n.ticks=function(){return arguments.length?(E=f(arguments),n):E},n.tickValues=function(e){return arguments.length?(S=e,n):S},n.tickFormat=function(e){return arguments.length?(_=e,n):_},n.tickSize=function(e){var t=arguments.length;return t?(k=+e,A=+arguments[t-1],n):k},n.innerTickSize=function(e){return arguments.length?(k=+e,n):k},n.outerTickSize=function(e){return arguments.length?(A=+e,n):A},n.tickPadding=function(e){return arguments.length?(M=+e,n):M},n.tickSubdivide=function(){return arguments.length&&n},n};var Ra="bottom",Pa={top:1,right:1,bottom:1,left:1};function Na(e,n,r){e.attr("transform",function(e){var t=n(e);return"translate("+(isFinite(t)?t:r(e))+",0)"})}function Fa(e,n,r){e.attr("transform",function(e){var t=n(e);return"translate(0,"+(isFinite(t)?t:r(e))+")"})}I.svg.brush=function(){var y,v,b=oe(M,"brushstart","brush","brushend"),x=null,_=null,w=[0,0],T=[0,0],k=!0,A=!0,a=ja[0];function M(e){e.each(function(){var e,t=I.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),n=t.selectAll(".background").data([0]),r=(n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move"),t.selectAll(".resize").data(a,C)),r=(r.exit().remove(),r.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return za[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),r.style("display",M.empty()?"none":null),I.transition(t)),t=I.transition(n);x&&(e=Lr(x),t.attr("x",e[0]).attr("width",e[1]-e[0]),S(r)),_&&(e=Lr(_),t.attr("y",e[0]).attr("height",e[1]-e[0]),L(r)),E(r)})}function E(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+w[+/e$/.test(e)]+","+T[+/^s/.test(e)]+")"})}function S(e){e.select(".extent").attr("x",w[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",w[1]-w[0])}function L(e){e.select(".extent").attr("y",T[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",T[1]-T[0])}function i(){var l,e,n,r=this,t=I.select(I.event.target),a=b.of(r,arguments),i=I.select(r),o=t.datum(),s=!/^(n|s)$/.test(o)&&x,c=!/^(e|w)$/.test(o)&&_,u=t.classed("extent"),d=Re(r),f=I.mouse(r),p=I.select(P(r)).on("keydown.brush",function(){32==I.event.keyCode&&(u||(l=null,f[0]-=w[1],f[1]-=T[1],u=2),N())}).on("keyup.brush",function(){32==I.event.keyCode&&2==u&&(f[0]+=w[1],f[1]+=T[1],u=0,N())});function h(){var e=I.mouse(r),t=!1;n&&(e[0]+=n[0],e[1]+=n[1]),u||(I.event.altKey?(l=l||[(w[0]+w[1])/2,(T[0]+T[1])/2],f[0]=w[+(e[0]<l[0])],f[1]=T[+(e[1]<l[1])]):l=null),s&&m(e,x,0)&&(S(i),t=!0),c&&m(e,_,1)&&(L(i),t=!0),t&&(E(i),a({type:"brush",mode:u?"move":"resize"}))}function m(e,t,n){var r,t=Lr(t),a=t[0],t=t[1],i=f[n],o=n?T:w,s=o[1]-o[0];return u&&(a-=i,t-=s+i),e=(n?A:k)?Math.max(a,Math.min(t,e[n])):e[n],u?r=(e+=i)+s:(i=l?Math.max(a,Math.min(t,2*l[n]-e)):i)<e?(r=e,e=i):r=i,(o[0]!=e||o[1]!=r)&&(n?v=null:y=null,o[0]=e,o[1]=r,1)}function g(){h(),i.style("pointer-events","all").selectAll(".resize").style("display",M.empty()?"none":null),I.select("body").style("cursor",null),p.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),d(),a({type:"brushend"})}I.event.changedTouches?p.on("touchmove.brush",h).on("touchend.brush",g):p.on("mousemove.brush",h).on("mouseup.brush",g),i.interrupt().selectAll("*").interrupt(),u?(f[0]=w[0]-f[0],f[1]=T[0]-f[1]):o?(e=+/w$/.test(o),o=+/^n/.test(o),n=[w[1-e]-f[0],T[1-o]-f[1]],f[0]=w[e],f[1]=T[o]):I.event.altKey&&(l=f.slice()),i.style("pointer-events","none").selectAll(".resize").style("display",null),I.select("body").style("cursor",t.style("cursor")),a({type:"brushstart"}),h()}return M.event=function(e){e.each(function(){var r=b.of(this,arguments),a={x:w,y:T,i:y,j:v},e=this.__chart__||a;this.__chart__=a,j?I.select(this).transition().each("start.brush",function(){y=e.i,v=e.j,w=e.x,T=e.y,r({type:"brushstart"})}).tween("brush:brush",function(){var t=bn(w,a.x),n=bn(T,a.y);return y=v=null,function(e){w=a.x=t(e),T=a.y=n(e),r({type:"brush",mode:"resize"})}}).each("end.brush",function(){y=a.i,v=a.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})}):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))})},M.x=function(e){return arguments.length?(a=ja[!(x=e)<<1|!_],M):x},M.y=function(e){return arguments.length?(a=ja[!x<<1|!(_=e)],M):_},M.clamp=function(e){return arguments.length?(x&&_?(k=!!e[0],A=!!e[1]):x?k=!!e:_&&(A=!!e),M):x&&_?[k,A]:x?k:_?A:null},M.extent=function(e){var t,n,r,a,i;return arguments.length?(x&&(t=e[0],n=e[1],_&&(t=t[0],n=n[0]),y=[t,n],x.invert&&(t=x(t),n=x(n)),n<t&&(i=t,t=n,n=i),t==w[0]&&n==w[1]||(w=[t,n])),_&&(r=e[0],a=e[1],x&&(r=r[1],a=a[1]),v=[r,a],_.invert&&(r=_(r),a=_(a)),a<r&&(i=r,r=a,a=i),r==T[0]&&a==T[1]||(T=[r,a])),M):(x&&(y?(t=y[0],n=y[1]):(t=w[0],n=w[1],x.invert&&(t=x.invert(t),n=x.invert(n)),n<t&&(i=t,t=n,n=i))),_&&(v?(r=v[0],a=v[1]):(r=T[0],a=T[1],_.invert&&(r=_.invert(r),a=_.invert(a)),a<r&&(i=r,r=a,a=i))),x&&_?[[t,r],[n,a]]:x?[t,n]:_&&[r,a])},M.clear=function(){return M.empty()||(w=[0,0],T=[0,0],y=v=null),M},M.empty=function(){return!!x&&w[0]==w[1]||!!_&&T[0]==T[1]},I.rebind(M,b,"on")};var za={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ja=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function qa(e){return JSON.parse(e.responseText)}function Ha(e){var t=R.createRange();return t.selectNode(R.body),t.createContextualFragment(e.responseText)}I.text=mt(function(e){return e.responseText}),I.json=function(e,t){return gt(e,"application/json",qa,t)},I.html=function(e,t){return gt(e,"text/html",Ha,t)},I.xml=mt(function(e){return e.responseXML}),"object"==typeof Ba&&Ba.exports?Ba.exports=I:this.d3=I}.apply(self)},{}],21:[function(w,T,e){!function(f){!function(){"use strict";var e=w("object-assign");function p(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0}function h(e){return f.Buffer&&"function"==typeof f.Buffer.isBuffer?f.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var m=w("util/"),r=Object.prototype.hasOwnProperty,g=Array.prototype.slice,t="foo"===function(){}.name;function y(e){return Object.prototype.toString.call(e)}function v(e){return!h(e)&&("function"==typeof f.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var i=T.exports=c,n=/\s*function\s+([^\(\s]*)\s*/;function a(e){if(m.isFunction(e)){if(t)return e.name;e=e.toString().match(n);return e&&e[1]}}function o(e,t){return"string"!=typeof e||e.length<t?e:e.slice(0,t)}function s(e){if(t||!m.isFunction(e))return m.inspect(e);e=a(e);return"[Function"+(e?": "+e:"")+"]"}function l(e,t,n,r,a){throw new i.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:a})}function c(e,t){e||l(e,!0,t,"==",i.ok)}function b(e,t,n,r){if(e===t)return!0;if(h(e)&&h(t))return 0===p(e,t);if(m.isDate(e)&&m.isDate(t))return e.getTime()===t.getTime();if(m.isRegExp(e)&&m.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(v(e)&&v(t)&&y(e)===y(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===p(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(h(e)!==h(t))return!1;var a=(r=r||{actual:[],expected:[]}).actual.indexOf(e);if(-1===a||a!==r.expected.indexOf(t)){r.actual.push(e),r.expected.push(t);var i=e,o=t,s=n,l=r;if(null==i||null==o)return!1;if(m.isPrimitive(i)||m.isPrimitive(o))return i===o;if(s&&Object.getPrototypeOf(i)!==Object.getPrototypeOf(o))return!1;a=x(i),r=x(o);if(a&&!r||!a&&r)return!1;if(a)return i=g.call(i),o=g.call(o),b(i,o,s);var c,u,d=_(i),f=_(o);if(d.length!==f.length)return!1;for(d.sort(),f.sort(),u=d.length-1;0<=u;u--)if(d[u]!==f[u])return!1;for(u=d.length-1;0<=u;u--)if(c=d[u],!b(i[c],o[c],s,l))return!1}return!0}return n?e===t:e==t}function x(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function u(e,t){if(e&&t){if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return 1}catch(e){}return Error.isPrototypeOf(t)?void 0:!0===t.call({},e)}}function d(e,t,n,r){if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),t=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!t&&l(t,n,"Missing expected exception"+r);var a="string"==typeof r,i=!e&&t&&!n;if((!e&&m.isError(t)&&a&&u(t,n)||i)&&l(t,n,"Got unwanted exception"+r),e&&t&&n&&!u(t,n)||!e&&t)throw t}i.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=o(s((n=this).actual),128)+" "+n.operator+" "+o(s(n.expected),128),this.generatedMessage=!0);var t,n=e.stackStartFunction||l;Error.captureStackTrace?Error.captureStackTrace(this,n):(e=new Error).stack&&(e=e.stack,t=a(n),0<=(t=e.indexOf("\n"+t))&&(t=e.indexOf("\n",t+1),e=e.substring(t+1)),this.stack=e)},m.inherits(i.AssertionError,Error),i.fail=l,i.ok=c,i.equal=function(e,t,n){e!=t&&l(e,t,n,"==",i.equal)},i.notEqual=function(e,t,n){e==t&&l(e,t,n,"!=",i.notEqual)},i.deepEqual=function(e,t,n){b(e,t,!1)||l(e,t,n,"deepEqual",i.deepEqual)},i.deepStrictEqual=function(e,t,n){b(e,t,!0)||l(e,t,n,"deepStrictEqual",i.deepStrictEqual)},i.notDeepEqual=function(e,t,n){b(e,t,!1)&&l(e,t,n,"notDeepEqual",i.notDeepEqual)},i.notDeepStrictEqual=function e(t,n,r){b(t,n,!0)&&l(t,n,r,"notDeepStrictEqual",e)},i.strictEqual=function(e,t,n){e!==t&&l(e,t,n,"===",i.strictEqual)},i.notStrictEqual=function(e,t,n){e===t&&l(e,t,n,"!==",i.notStrictEqual)},i.throws=function(e,t,n){d(!0,e,t,n)},i.doesNotThrow=function(e,t,n){d(!1,e,t,n)},i.ifError=function(e){if(e)throw e},i.strict=e(function e(t,n){t||l(t,!0,n,"==",e)},i,{equal:i.strictEqual,deepEqual:i.deepStrictEqual,notEqual:i.notStrictEqual,notDeepEqual:i.notDeepStrictEqual}),i.strict.strict=i.strict;var _=Object.keys||function(e){var t,n=[];for(t in e)r.call(e,t)&&n.push(t);return n}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":73,"util/":24}],22:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],23:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],24:[function(M,e,E){!function(k,A){!function(){var e,s=/%[sdj%]/g,r=(E.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,a=r.length,i=String(e).replace(s,function(e){if("%%"===e)return"%";if(a<=n)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),o=r[n];n<a;o=r[++n])m(o)||!c(o)?i+=" "+o:i+=" "+l(o);return i},E.deprecate=function(e,t){if(v(A.process))return function(){return E.deprecate(e,t).apply(this,arguments)};if(!0===k.noDeprecation)return e;var n=!1;return function(){if(!n){if(k.throwDeprecation)throw new Error(t);k.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}},{});function l(e,t){var n={seen:[],stylize:i};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),h(t)?n.showHidden=t:t&&E._extend(n,t),v(n.showHidden)&&(n.showHidden=!1),v(n.depth)&&(n.depth=2),v(n.colors)&&(n.colors=!1),v(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=a),u(n,e,n.depth)}function a(e,t){t=l.styles[t];return t?"["+l.colors[t][0]+"m"+e+"["+l.colors[t][1]+"m":e}function i(e,t){return e}function u(t,n,r){if(t.customInspect&&n&&w(n.inspect)&&n.inspect!==E.inspect&&(!n.constructor||n.constructor.prototype!==n))return y(e=n.inspect(r,t))?e:u(t,e,r);var e=function(e,t){if(v(t))return e.stylize("undefined","undefined");{var n;if(y(t))return n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",e.stylize(n,"string")}return g(t)?e.stylize(""+t,"number"):h(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}(t,n);if(e)return e;var a,e=Object.keys(n),i=(a={},e.forEach(function(e,t){a[e]=!0}),a);if(t.showHidden&&(e=Object.getOwnPropertyNames(n)),_(n)&&(0<=e.indexOf("message")||0<=e.indexOf("description")))return d(n);if(0===e.length){if(w(n))return o=n.name?": "+n.name:"",t.stylize("[Function"+o+"]","special");if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return t.stylize(Date.prototype.toString.call(n),"date");if(_(n))return d(n)}var o="",s=!1,l=["{","}"];if(p(n)&&(s=!0,l=["[","]"]),w(n)&&(o=" [Function"+(n.name?": "+n.name:"")+"]"),b(n)&&(o=" "+RegExp.prototype.toString.call(n)),x(n)&&(o=" "+Date.prototype.toUTCString.call(n)),_(n)&&(o=" "+d(n)),0===e.length&&(!s||0==n.length))return l[0]+o+l[1];if(r<0)return b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n),c=s?function(t,n,r,a,e){for(var i=[],o=0,s=n.length;o<s;++o)T(n,String(o))?i.push(f(t,n,r,a,String(o),!0)):i.push("");return e.forEach(function(e){e.match(/^\d+$/)||i.push(f(t,n,r,a,e,!0))}),i}(t,n,r,i,e):e.map(function(e){return f(t,n,r,i,e,s)}),t.seen.pop();var c;return 60<c.reduce(function(e,t){return 0<=t.indexOf("\n")&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)?l[0]+(""===o?"":o+"\n ")+" "+c.join(",\n  ")+" "+l[1]:l[0]+o+" "+c.join(", ")+" "+l[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,a,i){var o,s,t=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]};if(t.get?s=t.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):t.set&&(s=e.stylize("[Setter]","special")),T(r,a)||(o="["+a+"]"),s||(e.seen.indexOf(t.value)<0?-1<(s=m(n)?u(e,t.value,null):u(e,t.value,n-1)).indexOf("\n")&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),v(o)){if(i&&a.match(/^\d+$/))return s;o=(o=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(o,"string"))}return o+": "+s}function p(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function m(e){return null===e}function g(e){return"number"==typeof e}function y(e){return"string"==typeof e}function v(e){return void 0===e}function b(e){return c(e)&&"[object RegExp]"===t(e)}function c(e){return"object"==typeof e&&null!==e}function x(e){return c(e)&&"[object Date]"===t(e)}function _(e){return c(e)&&("[object Error]"===t(e)||e instanceof Error)}function w(e){return"function"==typeof e}function t(e){return Object.prototype.toString.call(e)}function n(e){return e<10?"0"+e.toString(10):e.toString(10)}E.debuglog=function(t){var n;return v(e)&&(e=k.env.NODE_DEBUG||""),t=t.toUpperCase(),r[t]||(new RegExp("\\b"+t+"\\b","i").test(e)?(n=k.pid,r[t]=function(){var e=E.format.apply(E,arguments);console.error("%s %d: %s",t,n,e)}):r[t]=function(){}),r[t]},(E.inspect=l).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},E.isArray=p,E.isBoolean=h,E.isNull=m,E.isNullOrUndefined=function(e){return null==e},E.isNumber=g,E.isString=y,E.isSymbol=function(e){return"symbol"==typeof e},E.isUndefined=v,E.isRegExp=b,E.isObject=c,E.isDate=x,E.isError=_,E.isFunction=w,E.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},E.isBuffer=M("./support/isBuffer");var o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}E.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[n(e.getHours()),n(e.getMinutes()),n(e.getSeconds())].join(":"),[e.getDate(),o[e.getMonth()],t].join(" ")),E.format.apply(E,arguments))},E.inherits=M("inherits"),E._extend=function(e,t){if(t&&c(t))for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}.call(this)}.call(this,M("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":23,_process:98,inherits:22}],25:[function(e,t,n){"use strict";n.byteLength=function(e){var e=u(e),t=e[0],e=e[1];return 3*(t+e)/4-e},n.toByteArray=function(e){var t,n,r=u(e),a=r[0],r=r[1],i=new c(function(e,t){return 3*(e+t)/4-t}(a,r)),o=0,s=0<r?a-4:a;for(n=0;n<s;n+=4)t=l[e.charCodeAt(n)]<<18|l[e.charCodeAt(n+1)]<<12|l[e.charCodeAt(n+2)]<<6|l[e.charCodeAt(n+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=255&t;2===r&&(t=l[e.charCodeAt(n)]<<2|l[e.charCodeAt(n+1)]>>4,i[o++]=255&t);1===r&&(t=l[e.charCodeAt(n)]<<10|l[e.charCodeAt(n+1)]<<4|l[e.charCodeAt(n+2)]>>2,i[o++]=t>>8&255,i[o++]=255&t);return i},n.fromByteArray=function(e){for(var t,n=e.length,r=n%3,a=[],i=0,o=n-r;i<o;i+=16383)a.push(function(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),a.push(function(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}(r));return a.join("")}(e,i,o<i+16383?o:i+16383));1==r?(t=e[n-1],a.push(s[t>>2]+s[t<<4&63]+"==")):2==r&&(t=(e[n-2]<<8)+e[n-1],a.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return a.join("")};for(var s=[],l=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,i=r.length;a<i;++a)s[a]=r[a],l[r.charCodeAt(a)]=a;function u(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("="),t=(e=-1===e?t:e)===t?0:4-e%4;return[e,t]}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},{}],26:[function(e,t,n){},{}],27:[function(e,t,n){"use strict";var r="object"==typeof Reflect?Reflect:null,l=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};var a=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(a,i){return new Promise(function(e,t){function n(){void 0!==r&&a.removeListener("error",r),e([].slice.call(arguments))}var r;"error"!==i&&(r=function(e){a.removeListener(i,n),t(e)},a.once("error",r)),a.once(i,n)})},(o.EventEmitter=o).prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var a,i;return c(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener||n),a=e._events),i=a[t]),void 0===i?(i=a[t]=n,++e._eventsCount):("function"==typeof i?i=a[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),0<(a=u(e))&&i.length>a&&!i.warned&&(i.warned=!0,(r=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",r.emitter=e,r.type=t,r.count=i.length,n=r,console&&console.warn&&console.warn(n))),e}function f(e,t,n){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e);return t.listener=n,e.wrapFn=t}function p(e,t,n){e=e._events;if(void 0===e)return[];e=e[t];{if(void 0===e)return[];if("function"==typeof e)return n?[e.listener||e]:[e];if(n){for(var r=e,a=new Array(r.length),i=0;i<a.length;++i)a[i]=r[i].listener||r[i];return a}return m(e,e.length)}}function h(e){var t=this._events;if(void 0!==t){t=t[e];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,a=this._events;if(void 0!==a)r=r&&void 0===a.error;else if(!r)return!1;if(r){if((i=0<t.length?t[0]:i)instanceof Error)throw i;r=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw r.context=i,r}var i=a[e];if(void 0===i)return!1;if("function"==typeof i)l(i,this,t);else for(var o=i.length,s=m(i,o),n=0;n<o;++n)l(s[n],this,t);return!0},o.prototype.on=o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return c(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,f(this,e,t)),this},o.prototype.off=o.prototype.removeListener=function(e,t){var n,r,a,i,o;if(c(t),void 0!==(r=this._events)&&void 0!==(n=r[e]))if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,i=n.length-1;0<=i;i--)if(n[i]===t||n[i].listener===t){o=n[i].listener,a=i;break}if(a<0)return this;if(0===a)n.shift();else{for(var s=n,l=a;l+1<s.length;l++)s[l]=s[l+1];s.pop()}1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},o.prototype.removeAllListeners=function(e){var t,n=this._events;if(void 0!==n){if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){for(var r,a=Object.keys(n),i=0;i<a.length;++i)"removeListener"!==(r=a[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;0<=i;i--)this.removeListener(e,t[i])}return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return 0<this._eventsCount?a(this._events):[]}},{}],28:[function(O,e,D){!function(e){!function(){"use strict";var k=O("base64-js"),i=O("ieee754"),t=(D.Buffer=d,D.SlowBuffer=function(e){+e!=e&&(e=0);return d.alloc(+e)},D.INSPECT_MAX_BYTES=50,2147483647);function l(e){if(t<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return e.__proto__=d.prototype,e}function d(e,t,n){if("number"!=typeof e)return r(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return o(e)}function r(e,t,n){if("string"==typeof e){var r=e,a=t;if(!d.isEncoding(a="string"==typeof a&&""!==a?a:"utf8"))throw new TypeError("Unknown encoding: "+a);var i=0|f(r,a),o=l(i);return o=(r=o.write(r,a))!==i?o.slice(0,r):o}if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(L(e,ArrayBuffer)||e&&L(e.buffer,ArrayBuffer)){a=e,i=t,r=n;if(i<0||a.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<i+(r||0))throw new RangeError('"length" is outside of buffer bounds');return(a=void 0===i&&void 0===r?new Uint8Array(a):void 0===r?new Uint8Array(a,i):new Uint8Array(a,i,r)).__proto__=d.prototype,a}if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return d.from(o,t,n);var s=function(e){{var t,n;if(d.isBuffer(e))return t=0|u(e.length),0!==(n=l(t)).length&&e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||C(e.length)?l(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return d.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function o(e){return a(e),l(e<0?0:0|u(e))}function c(e){for(var t=e.length<0?0:0|u(e.length),n=l(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function u(e){if(t<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|e}function f(e,t){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||L(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return E(e).length;default:if(a)return r?-1:M(e).length;t=(""+t).toLowerCase(),a=!0}}function n(e,t,n){var r,a=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var i=this,o=t,s=n,l=i.length;(!s||s<0||l<s)&&(s=l);for(var c="",u=o=!o||o<0?0:o;u<s;++u)c+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(i[u]);return c;case"utf8":case"utf-8":return A(this,t,n);case"ascii":var d=this,l=t,f=n,p="";f=Math.min(d.length,f);for(var h=l;h<f;++h)p+=String.fromCharCode(127&d[h]);return p;case"latin1":case"binary":var m=this,o=t,g=n,y="";g=Math.min(m.length,g);for(var v=o;v<g;++v)y+=String.fromCharCode(m[v]);return y;case"base64":return b=this,r=n,0===(x=t)&&r===b.length?k.fromByteArray(b):k.fromByteArray(b.slice(x,r));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var b=t,x=n,_=this.slice(b,x),w="",T=0;T<_.length;T+=2)w+=String.fromCharCode(_[T]+256*_[T+1]);return w;default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function s(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function p(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),(n=(n=C(n=+n)?a?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=d.from(t,r)),d.isBuffer(t))return 0===t.length?-1:h(e,t,n,r,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(a?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):h(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function h(e,t,n,r,a){var i=1,o=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o/=i=2,s/=2,n/=2}function l(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(a)for(var c=-1,u=n;u<o;u++)if(l(e,u)===l(t,-1===c?0:u-c)){if(u-(c=-1===c?u:c)+1===s)return c*i}else-1!==c&&(u-=u-c),c=-1;else for(u=n=o<n+s?o-s:n;0<=u;u--){for(var d=!0,f=0;f<s;f++)if(l(e,u+f)!==l(t,f)){d=!1;break}if(d)return u}return-1}function g(e,t,n,r){return S(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function y(e,t,n,r){return S(function(e,t){for(var n,r,a=[],i=0;i<e.length&&!((t-=2)<0);++i)r=e.charCodeAt(i),n=r>>8,r=r%256,a.push(r),a.push(n);return a}(t,e.length-n),e,n,r)}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var i,o,s,l,c=e[a],u=null,d=239<c?4:223<c?3:191<c?2:1;if(a+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(i=e[a+1]))&&127<(l=(31&c)<<6|63&i)&&(u=l);break;case 3:i=e[a+1],o=e[a+2],128==(192&i)&&128==(192&o)&&2047<(l=(15&c)<<12|(63&i)<<6|63&o)&&(l<55296||57343<l)&&(u=l);break;case 4:i=e[a+1],o=e[a+2],s=e[a+3],128==(192&i)&&128==(192&o)&&128==(192&s)&&65535<(l=(15&c)<<18|(63&i)<<12|(63&o)<<6|63&s)&&l<1114112&&(u=l)}null===u?(u=65533,d=1):65535<u&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),a+=d}var f=r,p=f.length;if(p<=v)return String.fromCharCode.apply(String,f);for(var h="",m=0;m<p;)h+=String.fromCharCode.apply(String,f.slice(m,m+=v));return h}D.kMaxLength=t,(d.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192,d.from=r,d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,d.alloc=function(e,t,n){return t=t,n=n,a(e=e),!(e<=0)&&void 0!==t?"string"==typeof n?l(e).fill(t,n):l(e).fill(t):l(e)},d.allocUnsafe=o,d.allocUnsafeSlow=o,d.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==d.prototype},d.compare=function(e,t){if(L(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),L(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);if(void 0===t)for(a=t=0;a<e.length;++a)t+=e[a].length;for(var n=d.allocUnsafe(t),r=0,a=0;a<e.length;++a){var i=e[a];if(L(i,Uint8Array)&&(i=d.from(i)),!d.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,r),r+=i.length}return n},d.byteLength=f,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)s(this,t,t+1);return this},d.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)s(this,t,t+3),s(this,t+1,t+2);return this},d.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)s(this,t,t+7),s(this,t+1,t+6),s(this,t+2,t+5),s(this,t+3,t+4);return this},d.prototype.toLocaleString=d.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):n.apply(this,arguments)},d.prototype.equals=function(e){if(d.isBuffer(e))return this===e||0===d.compare(this,e);throw new TypeError("Argument must be a Buffer")},d.prototype.inspect=function(){var e="",t=D.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},d.prototype.compare=function(e,t,n,r,a){if(L(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),(t=void 0===t?0:t)<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(a<=r&&n<=t)return 0;if(a<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var i=(a>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(i,o),l=this.slice(r,a),c=e.slice(t,n),u=0;u<s;++u)if(l[u]!==c[u]){i=l[u],o=c[u];break}return i<o?-1:o<i?1:0},d.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},d.prototype.indexOf=function(e,t,n){return p(this,e,t,n,!0)},d.prototype.lastIndexOf=function(e,t,n){return p(this,e,t,n,!1)},d.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||a<n)&&(n=a),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var i,o,s,l=!1;;)switch(r){case"hex":var c=this,u=e,d=t,f=n,p=(d=Number(d)||0,c.length-d);(!f||p<(f=Number(f)))&&(f=p),(p=u.length)/2<f&&(f=p/2);for(var h=0;h<f;++h){var m=parseInt(u.substr(2*h,2),16);if(C(m))return h;c[d+h]=m}return h;case"utf8":case"utf-8":return p=t,s=n,S(M(e,(o=this).length-p),o,p,s);case"ascii":return g(this,e,t,n);case"latin1":case"binary":return g(this,e,t,n);case"base64":return o=this,s=t,i=n,S(E(e),o,s,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,e,t,n);default:if(l)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),l=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var v=4096;function m(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function b(e,t,n,r,a,i){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(a<t||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function x(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function _(e,t,n,r,a){return t=+t,n>>>=0,a||x(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function w(e,t,n,r,a){return t=+t,n>>>=0,a||x(e,0,n,8),i.write(e,t,n,r,52,8),n+8}d.prototype.slice=function(e,t){var n=this.length,n=((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),this.subarray(e,t));return n.__proto__=d.prototype,n},d.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||m(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r},d.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||m(e,t,this.length);for(var r=this[e+--t],a=1;0<t&&(a*=256);)r+=this[e+--t]*a;return r},d.prototype.readUInt8=function(e,t){return e>>>=0,t||m(e,1,this.length),this[e]},d.prototype.readUInt16LE=function(e,t){return e>>>=0,t||m(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUInt16BE=function(e,t){return e>>>=0,t||m(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUInt32LE=function(e,t){return e>>>=0,t||m(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUInt32BE=function(e,t){return e>>>=0,t||m(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||m(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return(a*=128)<=r&&(r-=Math.pow(2,8*t)),r},d.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||m(e,t,this.length);for(var r=t,a=1,i=this[e+--r];0<r&&(a*=256);)i+=this[e+--r]*a;return(a*=128)<=i&&(i-=Math.pow(2,8*t)),i},d.prototype.readInt8=function(e,t){return e>>>=0,t||m(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){e>>>=0,t||m(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},d.prototype.readInt16BE=function(e,t){e>>>=0,t||m(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},d.prototype.readInt32LE=function(e,t){return e>>>=0,t||m(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return e>>>=0,t||m(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readFloatLE=function(e,t){return e>>>=0,t||m(e,4,this.length),i.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return e>>>=0,t||m(e,4,this.length),i.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return e>>>=0,t||m(e,8,this.length),i.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return e>>>=0,t||m(e,8,this.length),i.read(this,e,!1,52,8)},d.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||b(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,i=0;for(this[t]=255&e;++i<n&&(a*=256);)this[t+i]=e/a&255;return t+n},d.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||b(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,i=1;for(this[t+a]=255&e;0<=--a&&(i*=256);)this[t+a]=e/i&255;return t+n},d.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,1,255,0),this[t]=255&e,t+1},d.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},d.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeIntLE=function(e,t,n,r){e=+e,t>>>=0,r||b(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var a=0,i=1,o=0;for(this[t]=255&e;++a<n&&(i*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/i>>0)-o&255;return t+n},d.prototype.writeIntBE=function(e,t,n,r){e=+e,t>>>=0,r||b(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var a=n-1,i=1,o=0;for(this[t+a]=255&e;0<=--a&&(i*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/i>>0)-o&255;return t+n},d.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},d.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},d.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||b(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeFloatLE=function(e,t,n){return _(this,e,t,!0,n)},d.prototype.writeFloatBE=function(e,t,n){return _(this,e,t,!1,n)},d.prototype.writeDoubleLE=function(e,t,n){return w(this,e,t,!0,n)},d.prototype.writeDoubleBE=function(e,t,n){return w(this,e,t,!1,n)},d.prototype.copy=function(e,t,n,r){if(!d.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var a=(r=e.length-t<r-n?e.length-t+n:r)-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var i=a-1;0<=i;--i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return a},d.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!d.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var a;1===e.length&&(a=e.charCodeAt(0),("utf8"===r&&a<128||"latin1"===r)&&(e=a))}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");var i;if(!(n<=t))if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(i=t;i<n;++i)this[i]=e;else{var o=d.isBuffer(e)?e:d.from(e,r),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%s]}return this};var T=/[^+/0-9A-Za-z-_]/g;function M(e,t){t=t||1/0;for(var n,r=e.length,a=null,i=[],o=0;o<r;++o){if(55295<(n=e.charCodeAt(o))&&n<57344){if(!a){if(56319<n){-1<(t-=3)&&i.push(239,191,189);continue}if(o+1===r){-1<(t-=3)&&i.push(239,191,189);continue}a=n;continue}if(n<56320){-1<(t-=3)&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&-1<(t-=3)&&i.push(239,191,189);if(a=null,n<128){if(--t<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function E(e){return k.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(T,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function S(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function L(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function C(e){return e!=e}}.call(this)}.call(this,O("buffer").Buffer)},{"base64-js":25,buffer:28,ieee754:66}],29:[function(e,t,n){var r,a;r=this,a=function(t){"use strict";function i(e,t){if((t=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n=e.slice(0,t);return[1<n.length?n[0]+n.slice(2):n,+e.slice(t+1)]}function c(e){return(e=i(Math.abs(e)))?e[1]:NaN}var E,n=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function S(e){if(t=n.exec(e))return new r({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]});var t;throw new Error("invalid format: "+e)}function r(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function a(e,t){t=i(e,t);if(!t)return e+"";e=t[0],t=t[1];return t<0?"0."+new Array(-t).join("0")+e:e.length>t+1?e.slice(0,t+1)+"."+e.slice(t+1):e+new Array(t-e.length+2).join("0")}S.prototype=r.prototype,r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var L={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return 1e21<=Math.abs(e=Math.round(e))?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return a(100*e,t)},r:a,s:function(e,t){if(!(r=i(e,t)))return e+"";var n=r[0],r=(r=r[1])-(E=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=n.length;return r===a?n:a<r?n+new Array(r-a+1).join("0"):0<r?n.slice(0,r)+"."+n.slice(r):"0."+new Array(1-r).join("0")+i(e,Math.max(0,t+r-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function u(e){return e}var o,d=Array.prototype.map,C=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function s(e){var t,s,l,w=void 0===e.grouping||void 0===e.thousands?u:(s=d.call(e.grouping,Number),l=e.thousands+"",function(e,t){for(var n=e.length,r=[],a=0,i=s[0],o=0;0<n&&0<i&&(t<o+i+1&&(i=Math.max(1,t-o)),r.push(e.substring(n-=i,n+i)),!((o+=i+1)>t));)i=s[a=(a+1)%s.length];return r.reverse().join(l)}),r=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",T=void 0===e.decimal?".":e.decimal+"",k=void 0===e.numerals?u:(t=d.call(e.numerals,String),function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}),i=void 0===e.percent?"%":e.percent+"",A=void 0===e.minus?"-":e.minus+"",M=void 0===e.nan?"NaN":e.nan+"";function o(e){var c=(e=S(e)).fill,u=e.align,d=e.sign,t=e.symbol,f=e.zero,p=e.width,h=e.comma,m=e.precision,g=e.trim,y=e.type,v=("n"===y?(h=!0,y="g"):L[y]||(void 0===m&&(m=12),g=!0,y="g"),(f||"0"===c&&"="===u)&&(f=!0,c="0",u="="),"$"===t?r:"#"===t&&/[boxX]/.test(y)?"0"+y.toLowerCase():""),b="$"===t?a:/[%p]/.test(y)?i:"",x=L[y],_=/[defgprs%]/.test(y);function n(e){var t,n,r,a=v,i=b;if("c"===y)i=x(e)+i,e="";else{var o=(e=+e)<0||1/e<0;if(e=isNaN(e)?M:x(Math.abs(e),m),g&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;0<a&&(a=0)}return 0<a?e.slice(0,a)+e.slice(t+1):e}(e)),a=((o=o&&0==+e&&"+"!==d?!1:o)?"("===d?d:A:"-"===d||"("===d?"":d)+a,i=("s"===y?C[8+E/3]:"")+i+(o&&"("===d?")":""),_)for(t=-1,n=e.length;++t<n;)if((r=e.charCodeAt(t))<48||57<r){i=(46===r?T+e.slice(t+1):e.slice(t))+i,e=e.slice(0,t);break}}h&&!f&&(e=w(e,1/0));var s=a.length+e.length+i.length,l=s<p?new Array(p-s+1).join(c):"";switch(h&&f&&(e=w(l+e,l.length?p-i.length:1/0),l=""),u){case"<":e=a+e+i+l;break;case"=":e=a+l+e+i;break;case"^":e=l.slice(0,s=l.length>>1)+a+e+i+l.slice(s);break;default:e=l+a+e+i}return k(e)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),n.toString=function(){return e+""},n}return{format:o,formatPrefix:function(e,t){var n=o(((e=S(e)).type="f",e)),e=3*Math.max(-8,Math.min(8,Math.floor(c(t)/3))),r=Math.pow(10,-e),a=C[8+e/3];return function(e){return n(r*e)+a}}}}function e(e){return o=s(e),t.format=o.format,t.formatPrefix=o.formatPrefix,o}e({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),t.FormatSpecifier=r,t.formatDefaultLocale=e,t.formatLocale=s,t.formatSpecifier=S,t.precisionFixed=function(e){return Math.max(0,-c(Math.abs(e)))},t.precisionPrefix=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(c(t)/3)))-c(Math.abs(e)))},t.precisionRound=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,c(t)-c(e))+1},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?a(n):a((r="undefined"!=typeof globalThis?globalThis:r||self).d3=r.d3||{})},{}],30:[function(e,t,n){var r,a;r=this,a=function(t,A){"use strict";function M(e){var t;return 0<=e.y&&e.y<100?((t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L)).setFullYear(e.y),t):new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function E(e){var t;return 0<=e.y&&e.y<100?((t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L))).setUTCFullYear(e.y),t):new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function S(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function n(e){var r=e.dateTime,a=e.date,i=e.time,t=e.periods,n=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,c=C(t),u=O(t),d=C(n),f=O(n),p=C(o),h=O(o),m=C(s),g=O(s),y=C(l),v=O(l),b={a:function(e){return o[e.getDay()]},A:function(e){return n[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:V,e:V,f:le,H:ie,I:oe,j:se,L:Y,m:ce,M:ue,p:function(e){return t[+(12<=e.getHours())]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Z,s:X,S:de,u:fe,U:pe,V:he,w:me,W:ge,x:null,X:null,y:ye,Y:ve,Z:be,"%":W},x={a:function(e){return o[e.getUTCDay()]},A:function(e){return n[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:$,e:$,f:Te,H:xe,I:_e,j:we,L:G,m:ke,M:Ae,p:function(e){return t[+(12<=e.getUTCHours())]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Z,s:X,S:Me,u:Ee,U:Se,V:Le,w:Ce,W:Oe,x:null,X:null,y:De,Y:Ie,Z:Re,"%":W},_={a:function(e,t,n){t=p.exec(t.slice(n));return t?(e.w=h[t[0].toLowerCase()],n+t[0].length):-1},A:function(e,t,n){t=d.exec(t.slice(n));return t?(e.w=f[t[0].toLowerCase()],n+t[0].length):-1},b:function(e,t,n){t=y.exec(t.slice(n));return t?(e.m=v[t[0].toLowerCase()],n+t[0].length):-1},B:function(e,t,n){t=m.exec(t.slice(n));return t?(e.m=g[t[0].toLowerCase()],n+t[0].length):-1},c:function(e,t,n){return k(e,r,t,n)},d:B,e:B,f:te,H:U,I:U,j:J,L:ee,m:H,M:K,p:function(e,t,n){t=c.exec(t.slice(n));return t?(e.p=u[t[0].toLowerCase()],n+t[0].length):-1},q:q,Q:re,s:ae,S:Q,u:I,U:R,V:P,w:D,W:N,x:function(e,t,n){return k(e,a,t,n)},X:function(e,t,n){return k(e,i,t,n)},y:z,Y:F,Z:j,"%":ne};function w(l,c){return function(e){var t,n,r,a=[],i=-1,o=0,s=l.length;for(e instanceof Date||(e=new Date(+e));++i<s;)37===l.charCodeAt(i)&&(a.push(l.slice(o,i)),null!=(n=L[t=l.charAt(++i)])?t=l.charAt(++i):n="e"===t?" ":"0",(r=c[t])&&(t=r(e,n)),a.push(t),o=i+1);return a.push(l.slice(o,i)),a.join("")}}function T(a,i){return function(e){var t,n,r=S(1900,void 0,1);if(k(r,a,e+="",0)!=e.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(!i||"Z"in r||(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(t=4<(n=(t=E(S(r.y,0,1))).getUTCDay())||0===n?A.utcMonday.ceil(t):A.utcMonday(t),t=A.utcDay.offset(t,7*(r.V-1)),r.y=t.getUTCFullYear(),r.m=t.getUTCMonth(),r.d=t.getUTCDate()+(r.w+6)%7):(t=4<(n=(t=M(S(r.y,0,1))).getDay())||0===n?A.timeMonday.ceil(t):A.timeMonday(t),t=A.timeDay.offset(t,7*(r.V-1)),r.y=t.getFullYear(),r.m=t.getMonth(),r.d=t.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?E(S(r.y,0,1)).getUTCDay():M(S(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,E(r)):M(r)}}function k(e,t,n,r){for(var a,i,o=0,s=t.length,l=n.length;o<s;){if(l<=r)return-1;if(37===(a=t.charCodeAt(o++))){if(a=t.charAt(o++),!(i=_[a in L?t.charAt(o++):a])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return b.x=w(a,b),b.X=w(i,b),b.c=w(r,b),x.x=w(a,x),x.X=w(i,x),x.c=w(r,x),{format:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=T(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=T(e+="",!0);return t.toString=function(){return e},t}}}var r,L={"-":"",_:" ",0:"0"},a=/^\s*\d+/,i=/^%/,o=/[\\^$*+?|[\]().{}]/g;function s(e,t,n){var r=e<0?"-":"",e=(r?-e:e)+"",a=e.length;return r+(a<n?new Array(n-a+1).join(t)+e:e)}function l(e){return e.replace(o,"\\$&")}function C(e){return new RegExp("^(?:"+e.map(l).join("|")+")","i")}function O(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function D(e,t,n){t=a.exec(t.slice(n,n+1));return t?(e.w=+t[0],n+t[0].length):-1}function I(e,t,n){t=a.exec(t.slice(n,n+1));return t?(e.u=+t[0],n+t[0].length):-1}function R(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.U=+t[0],n+t[0].length):-1}function P(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.V=+t[0],n+t[0].length):-1}function N(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.W=+t[0],n+t[0].length):-1}function F(e,t,n){t=a.exec(t.slice(n,n+4));return t?(e.y=+t[0],n+t[0].length):-1}function z(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.y=+t[0]+(68<+t[0]?1900:2e3),n+t[0].length):-1}function j(e,t,n){t=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return t?(e.Z=t[1]?0:-(t[2]+(t[3]||"00")),n+t[0].length):-1}function q(e,t,n){t=a.exec(t.slice(n,n+1));return t?(e.q=3*t[0]-3,n+t[0].length):-1}function H(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.m=t[0]-1,n+t[0].length):-1}function B(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.d=+t[0],n+t[0].length):-1}function J(e,t,n){t=a.exec(t.slice(n,n+3));return t?(e.m=0,e.d=+t[0],n+t[0].length):-1}function U(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.H=+t[0],n+t[0].length):-1}function K(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.M=+t[0],n+t[0].length):-1}function Q(e,t,n){t=a.exec(t.slice(n,n+2));return t?(e.S=+t[0],n+t[0].length):-1}function ee(e,t,n){t=a.exec(t.slice(n,n+3));return t?(e.L=+t[0],n+t[0].length):-1}function te(e,t,n){t=a.exec(t.slice(n,n+6));return t?(e.L=Math.floor(t[0]/1e3),n+t[0].length):-1}function ne(e,t,n){t=i.exec(t.slice(n,n+1));return t?n+t[0].length:-1}function re(e,t,n){t=a.exec(t.slice(n));return t?(e.Q=+t[0],n+t[0].length):-1}function ae(e,t,n){t=a.exec(t.slice(n));return t?(e.s=+t[0],n+t[0].length):-1}function V(e,t){return s(e.getDate(),t,2)}function ie(e,t){return s(e.getHours(),t,2)}function oe(e,t){return s(e.getHours()%12||12,t,2)}function se(e,t){return s(1+A.timeDay.count(A.timeYear(e),e),t,3)}function Y(e,t){return s(e.getMilliseconds(),t,3)}function le(e,t){return Y(e,t)+"000"}function ce(e,t){return s(e.getMonth()+1,t,2)}function ue(e,t){return s(e.getMinutes(),t,2)}function de(e,t){return s(e.getSeconds(),t,2)}function fe(e){e=e.getDay();return 0===e?7:e}function pe(e,t){return s(A.timeSunday.count(A.timeYear(e)-1,e),t,2)}function he(e,t){var n=e.getDay();return e=4<=n||0===n?A.timeThursday(e):A.timeThursday.ceil(e),s(A.timeThursday.count(A.timeYear(e),e)+(4===A.timeYear(e).getDay()),t,2)}function me(e){return e.getDay()}function ge(e,t){return s(A.timeMonday.count(A.timeYear(e)-1,e),t,2)}function ye(e,t){return s(e.getFullYear()%100,t,2)}function ve(e,t){return s(e.getFullYear()%1e4,t,4)}function be(e){e=e.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+s(e/60|0,"0",2)+s(e%60,"0",2)}function $(e,t){return s(e.getUTCDate(),t,2)}function xe(e,t){return s(e.getUTCHours(),t,2)}function _e(e,t){return s(e.getUTCHours()%12||12,t,2)}function we(e,t){return s(1+A.utcDay.count(A.utcYear(e),e),t,3)}function G(e,t){return s(e.getUTCMilliseconds(),t,3)}function Te(e,t){return G(e,t)+"000"}function ke(e,t){return s(e.getUTCMonth()+1,t,2)}function Ae(e,t){return s(e.getUTCMinutes(),t,2)}function Me(e,t){return s(e.getUTCSeconds(),t,2)}function Ee(e){e=e.getUTCDay();return 0===e?7:e}function Se(e,t){return s(A.utcSunday.count(A.utcYear(e)-1,e),t,2)}function Le(e,t){var n=e.getUTCDay();return e=4<=n||0===n?A.utcThursday(e):A.utcThursday.ceil(e),s(A.utcThursday.count(A.utcYear(e),e)+(4===A.utcYear(e).getUTCDay()),t,2)}function Ce(e){return e.getUTCDay()}function Oe(e,t){return s(A.utcMonday.count(A.utcYear(e)-1,e),t,2)}function De(e,t){return s(e.getUTCFullYear()%100,t,2)}function Ie(e,t){return s(e.getUTCFullYear()%1e4,t,4)}function Re(){return"+0000"}function W(){return"%"}function Z(e){return+e}function X(e){return Math.floor(+e/1e3)}function e(e){return r=n(e),t.timeFormat=r.format,t.timeParse=r.parse,t.utcFormat=r.utcFormat,t.utcParse=r.utcParse,r}e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var c="%Y-%m-%dT%H:%M:%S.%LZ";var u=Date.prototype.toISOString?function(e){return e.toISOString()}:t.utcFormat(c);c=+new Date("2000-01-01T00:00:00.000Z")?function(e){return e=new Date(e),isNaN(e)?null:e}:t.utcParse(c);t.isoFormat=u,t.isoParse=c,t.timeFormatDefaultLocale=e,t.timeFormatLocale=n,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?a(n,e("d3-time")):a((r=r||self).d3=r.d3||{},r.d3)},{"d3-time":31}],31:[function(e,t,n){var r,a;r=this,a=function(e){"use strict";var a=new Date,l=new Date;function c(i,o,n,r){function s(e){return i(e=0===arguments.length?new Date:new Date(+e)),e}return s.floor=function(e){return i(e=new Date(+e)),e},s.ceil=function(e){return i(e=new Date(e-1)),o(e,1),i(e),e},s.round=function(e){var t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=function(e,t){return o(e=new Date(+e),null==t?1:Math.floor(t)),e},s.range=function(e,t,n){var r,a=[];if(e=s.ceil(e),n=null==n?1:Math.floor(n),e<t&&0<n)for(;a.push(r=new Date(+e)),o(e,n),i(e),r<e&&e<t;);return a},s.filter=function(n){return c(function(e){if(e<=e)for(;i(e),!n(e);)e.setTime(e-1)},function(e,t){if(e<=e)if(t<0)for(;++t<=0;)for(;o(e,-1),!n(e););else for(;0<=--t;)for(;o(e,1),!n(e););})},n&&(s.count=function(e,t){return a.setTime(+e),l.setTime(+t),i(a),i(l),Math.floor(n(a,l))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&0<t?1<t?s.filter(r?function(e){return r(e)%t==0}:function(e){return s.count(0,e)%t==0}):s:null}),s}var t=c(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e}),n=(t.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?c(function(e){e.setTime(Math.floor(e/n)*n)},function(e,t){e.setTime(+e+t*n)},function(e,t){return(t-e)/n}):t:null},t.range),r=c(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),i=r.range,o=c(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getMinutes()}),N=o.range,s=c(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),F=s.range,u=c(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5},function(e){return e.getDate()-1}),z=u.range;function d(t){return c(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}var f=d(0),p=d(1),h=d(2),m=d(3),g=d(4),y=d(5),v=d(6),b=f.range,j=p.range,q=h.range,H=m.range,B=g.range,U=y.range,V=v.range,x=c(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),Y=x.range,_=c(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()}),$=(_.every=function(n){return isFinite(n=Math.floor(n))&&0<n?c(function(e){e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*n)}):null},_.range),w=c(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getUTCMinutes()}),G=w.range,T=c(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),W=T.range,k=c(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),Z=k.range;function A(t){return c(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}var M=A(0),E=A(1),S=A(2),L=A(3),C=A(4),O=A(5),D=A(6),I=M.range,X=E.range,J=S.range,K=L.range,Q=C.range,ee=O.range,te=D.range,R=c(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),ne=R.range,P=c(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()}),re=(P.every=function(n){return isFinite(n=Math.floor(n))&&0<n?c(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*n)}):null},P.range);e.timeDay=u,e.timeDays=z,e.timeFriday=y,e.timeFridays=U,e.timeHour=s,e.timeHours=F,e.timeInterval=c,e.timeMillisecond=t,e.timeMilliseconds=n,e.timeMinute=o,e.timeMinutes=N,e.timeMonday=p,e.timeMondays=j,e.timeMonth=x,e.timeMonths=Y,e.timeSaturday=v,e.timeSaturdays=V,e.timeSecond=r,e.timeSeconds=i,e.timeSunday=f,e.timeSundays=b,e.timeThursday=g,e.timeThursdays=B,e.timeTuesday=h,e.timeTuesdays=q,e.timeWednesday=m,e.timeWednesdays=H,e.timeWeek=f,e.timeWeeks=b,e.timeYear=_,e.timeYears=$,e.utcDay=k,e.utcDays=Z,e.utcFriday=O,e.utcFridays=ee,e.utcHour=T,e.utcHours=W,e.utcMillisecond=t,e.utcMilliseconds=n,e.utcMinute=w,e.utcMinutes=G,e.utcMonday=E,e.utcMondays=X,e.utcMonth=R,e.utcMonths=ne,e.utcSaturday=D,e.utcSaturdays=te,e.utcSecond=r,e.utcSeconds=i,e.utcSunday=M,e.utcSundays=I,e.utcThursday=C,e.utcThursdays=Q,e.utcTuesday=S,e.utcTuesdays=J,e.utcWednesday=L,e.utcWednesdays=K,e.utcWeek=M,e.utcWeeks=I,e.utcYear=P,e.utcYears=re,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?a(n):a((r=r||self).d3=r.d3||{})},{}],32:[function(e,t,n){arguments[4][31][0].apply(n,arguments)},{dup:31}],33:[function(e,t,n){"use strict";var r=e("is-string-blank");t.exports=function(e){var t=typeof e;if("string"==t){var n=e;if(0===(e=+e)&&r(n))return!1}else if("number"!=t)return!1;return e-e<1}},{"is-string-blank":70}],34:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],f=t[10],p=t[11],h=t[12],m=t[13],g=t[14],t=t[15];return e[0]=s*(f*t-p*g)-d*(l*t-c*g)+m*(l*p-c*f),e[1]=-(r*(f*t-p*g)-d*(a*t-i*g)+m*(a*p-i*f)),e[2]=r*(l*t-c*g)-s*(a*t-i*g)+m*(a*c-i*l),e[3]=-(r*(l*p-c*f)-s*(a*p-i*f)+d*(a*c-i*l)),e[4]=-(o*(f*t-p*g)-u*(l*t-c*g)+h*(l*p-c*f)),e[5]=n*(f*t-p*g)-u*(a*t-i*g)+h*(a*p-i*f),e[6]=-(n*(l*t-c*g)-o*(a*t-i*g)+h*(a*c-i*l)),e[7]=n*(l*p-c*f)-o*(a*p-i*f)+u*(a*c-i*l),e[8]=o*(d*t-p*m)-u*(s*t-c*m)+h*(s*p-c*d),e[9]=-(n*(d*t-p*m)-u*(r*t-i*m)+h*(r*p-i*d)),e[10]=n*(s*t-c*m)-o*(r*t-i*m)+h*(r*c-i*s),e[11]=-(n*(s*p-c*d)-o*(r*p-i*d)+u*(r*c-i*s)),e[12]=-(o*(d*g-f*m)-u*(s*g-l*m)+h*(s*f-l*d)),e[13]=n*(d*g-f*m)-u*(r*g-a*m)+h*(r*f-a*d),e[14]=-(n*(s*g-l*m)-o*(r*g-a*m)+h*(r*l-a*s)),e[15]=n*(s*f-l*d)-o*(r*f-a*d)+u*(r*l-a*s),e}},{}],35:[function(e,t,n){t.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],36:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],37:[function(e,t,n){t.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],38:[function(e,t,n){t.exports=function(e){var t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],f=e[11],p=e[12],h=e[13],m=e[14],e=e[15];return(t*o-n*i)*(d*e-f*m)-(t*s-r*i)*(u*e-f*h)+(t*l-a*i)*(u*m-d*h)+(n*s-r*o)*(c*e-f*p)-(n*l-a*o)*(c*m-d*p)+(r*l-a*s)*(c*h-u*p)}},{}],39:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],a=t[2],t=t[3],i=n+n,o=r+r,s=a+a,n=n*i,l=r*i,r=r*o,c=a*i,u=a*o,a=a*s,i=t*i,o=t*o,t=t*s;return e[0]=1-r-a,e[1]=l+t,e[2]=c-o,e[3]=0,e[4]=l-t,e[5]=1-n-a,e[6]=u+i,e[7]=0,e[8]=c+o,e[9]=u-i,e[10]=1-n-r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],40:[function(e,t,n){t.exports=function(e,t,n){var r,a=n[0],i=n[1],n=n[2],o=Math.sqrt(a*a+i*i+n*n);if(Math.abs(o)<1e-6)return null;return a*=o=1/o,i*=o,n*=o,o=Math.sin(t),t=Math.cos(t),r=1-t,e[0]=a*a*r+t,e[1]=i*a*r+n*o,e[2]=n*a*r-i*o,e[3]=0,e[4]=a*i*r-n*o,e[5]=i*i*r+t,e[6]=n*i*r+a*o,e[7]=0,e[8]=a*n*r+i*o,e[9]=i*n*r-a*o,e[10]=n*n*r+t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],41:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],a=t[1],i=t[2],t=t[3],o=r+r,s=a+a,l=i+i,c=r*o,u=r*s,r=r*l,d=a*s,a=a*l,i=i*l,o=t*o,s=t*s,t=t*l;return e[0]=1-(d+i),e[1]=u+t,e[2]=r-s,e[3]=0,e[4]=u-t,e[5]=1-(c+i),e[6]=a+o,e[7]=0,e[8]=r+s,e[9]=a-o,e[10]=1-(c+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}},{}],42:[function(e,t,n){t.exports=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],43:[function(e,t,n){t.exports=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}},{}],44:[function(e,t,n){t.exports=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],45:[function(e,t,n){t.exports=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],46:[function(e,t,n){t.exports=function(e,t){var n=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],47:[function(e,t,n){t.exports=function(e,t,n,r,a,i,o){var s=1/(n-t),l=1/(a-r),c=1/(i-o);return e[0]=2*i*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(a+r)*l,e[10]=(o+i)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*i*2*c,e[15]=0,e}},{}],48:[function(e,t,n){t.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],49:[function(e,t,n){t.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":34,"./clone":35,"./copy":36,"./create":37,"./determinant":38,"./fromQuat":39,"./fromRotation":40,"./fromRotationTranslation":41,"./fromScaling":42,"./fromTranslation":43,"./fromXRotation":44,"./fromYRotation":45,"./fromZRotation":46,"./frustum":47,"./identity":48,"./invert":50,"./lookAt":51,"./multiply":52,"./ortho":53,"./perspective":54,"./perspectiveFromFieldOfView":55,"./rotate":56,"./rotateX":57,"./rotateY":58,"./rotateZ":59,"./scale":60,"./str":61,"./translate":62,"./transpose":63}],50:[function(e,t,n){t.exports=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],f=t[10],p=t[11],h=t[12],m=t[13],g=t[14],t=t[15],y=n*s-r*o,v=n*l-a*o,b=n*c-i*o,x=r*l-a*s,_=r*c-i*s,w=a*c-i*l,T=u*m-d*h,k=u*g-f*h,A=u*t-p*h,M=d*g-f*m,E=d*t-p*m,S=f*t-p*g,L=y*S-v*E+b*M+x*A-_*k+w*T;return L?(L=1/L,e[0]=(s*S-l*E+c*M)*L,e[1]=(a*E-r*S-i*M)*L,e[2]=(m*w-g*_+t*x)*L,e[3]=(f*_-d*w-p*x)*L,e[4]=(l*A-o*S-c*k)*L,e[5]=(n*S-a*A+i*k)*L,e[6]=(g*b-h*w-t*v)*L,e[7]=(u*w-f*b+p*v)*L,e[8]=(o*E-s*A+c*T)*L,e[9]=(r*A-n*E-i*T)*L,e[10]=(h*_-m*b+t*y)*L,e[11]=(d*b-u*_-p*y)*L,e[12]=(s*k-o*M-l*T)*L,e[13]=(n*M-r*k+a*T)*L,e[14]=(m*v-h*x-g*y)*L,e[15]=(u*x-d*v+f*y)*L,e):null}},{}],51:[function(e,t,n){var h=e("./identity");t.exports=function(e,t,n,r){var a,i,o,s,l=t[0],c=t[1],t=t[2],u=r[0],d=r[1],r=r[2],f=n[0],p=n[1],n=n[2];if(Math.abs(l-f)<1e-6&&Math.abs(c-p)<1e-6&&Math.abs(t-n)<1e-6)return h(e);f=l-f,p=c-p,n=t-n,s=1/Math.sqrt(f*f+p*p+n*n),a=d*(n*=s)-r*(p*=s),r=r*(f*=s)-u*n,u=u*p-d*f,(s=Math.sqrt(a*a+r*r+u*u))?(a*=s=1/s,r*=s,u*=s):u=r=a=0;d=p*u-n*r,i=n*a-f*u,o=f*r-p*a,(s=Math.sqrt(d*d+i*i+o*o))?(d*=s=1/s,i*=s,o*=s):o=i=d=0;return e[0]=a,e[1]=d,e[2]=f,e[3]=0,e[4]=r,e[5]=i,e[6]=p,e[7]=0,e[8]=u,e[9]=o,e[10]=n,e[11]=0,e[12]=-(a*l+r*c+u*t),e[13]=-(d*l+i*c+o*t),e[14]=-(f*l+p*c+n*t),e[15]=1,e}},{"./identity":48}],52:[function(e,t,n){t.exports=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],f=t[9],p=t[10],h=t[11],m=t[12],g=t[13],y=t[14],t=t[15],v=n[0],b=n[1],x=n[2],_=n[3];return e[0]=v*r+b*s+x*d+_*m,e[1]=v*a+b*l+x*f+_*g,e[2]=v*i+b*c+x*p+_*y,e[3]=v*o+b*u+x*h+_*t,v=n[4],b=n[5],x=n[6],_=n[7],e[4]=v*r+b*s+x*d+_*m,e[5]=v*a+b*l+x*f+_*g,e[6]=v*i+b*c+x*p+_*y,e[7]=v*o+b*u+x*h+_*t,v=n[8],b=n[9],x=n[10],_=n[11],e[8]=v*r+b*s+x*d+_*m,e[9]=v*a+b*l+x*f+_*g,e[10]=v*i+b*c+x*p+_*y,e[11]=v*o+b*u+x*h+_*t,v=n[12],b=n[13],x=n[14],_=n[15],e[12]=v*r+b*s+x*d+_*m,e[13]=v*a+b*l+x*f+_*g,e[14]=v*i+b*c+x*p+_*y,e[15]=v*o+b*u+x*h+_*t,e}},{}],53:[function(e,t,n){t.exports=function(e,t,n,r,a,i,o){var s=1/(t-n),l=1/(r-a),c=1/(i-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(a+r)*l,e[14]=(o+i)*c,e[15]=1,e}},{}],54:[function(e,t,n){t.exports=function(e,t,n,r,a){var t=1/Math.tan(t/2),i=1/(r-a);return e[0]=t/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(a+r)*i,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*a*r*i,e[15]=0,e}},{}],55:[function(e,t,n){t.exports=function(e,t,n,r){var a=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),t=Math.tan(t.rightDegrees*Math.PI/180),s=2/(o+t),l=2/(a+i);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(o-t)*s*.5,e[9]=(a-i)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}},{}],56:[function(e,t,n){t.exports=function(e,t,n,r){var a,i,o,s,l,c,u,d,f,p,h,m,g,y,v,b,x,_,w,T,k=r[0],A=r[1],r=r[2],M=Math.sqrt(k*k+A*A+r*r);if(Math.abs(M)<1e-6)return null;k*=M=1/M,A*=M,r*=M,M=Math.sin(n),n=Math.cos(n),a=1-n,i=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],f=t[7],p=t[8],h=t[9],m=t[10],g=t[11],y=k*k*a+n,v=A*k*a+r*M,b=r*k*a-A*M,x=k*A*a-r*M,_=A*A*a+n,w=r*A*a+k*M,T=k*r*a+A*M,A=A*r*a-k*M,k=r*r*a+n,e[0]=i*y+c*v+p*b,e[1]=o*y+u*v+h*b,e[2]=s*y+d*v+m*b,e[3]=l*y+f*v+g*b,e[4]=i*x+c*_+p*w,e[5]=o*x+u*_+h*w,e[6]=s*x+d*_+m*w,e[7]=l*x+f*_+g*w,e[8]=i*T+c*A+p*k,e[9]=o*T+u*A+h*k,e[10]=s*T+d*A+m*k,e[11]=l*T+f*A+g*k,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e}},{}],57:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),n=Math.cos(n),a=t[4],i=t[5],o=t[6],s=t[7],l=t[8],c=t[9],u=t[10],d=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=a*n+l*r,e[5]=i*n+c*r,e[6]=o*n+u*r,e[7]=s*n+d*r,e[8]=l*n-a*r,e[9]=c*n-i*r,e[10]=u*n-o*r,e[11]=d*n-s*r,e}},{}],58:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),n=Math.cos(n),a=t[0],i=t[1],o=t[2],s=t[3],l=t[8],c=t[9],u=t[10],d=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*n-l*r,e[1]=i*n-c*r,e[2]=o*n-u*r,e[3]=s*n-d*r,e[8]=a*r+l*n,e[9]=i*r+c*n,e[10]=o*r+u*n,e[11]=s*r+d*n,e}},{}],59:[function(e,t,n){t.exports=function(e,t,n){var r=Math.sin(n),n=Math.cos(n),a=t[0],i=t[1],o=t[2],s=t[3],l=t[4],c=t[5],u=t[6],d=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*n+l*r,e[1]=i*n+c*r,e[2]=o*n+u*r,e[3]=s*n+d*r,e[4]=l*n-a*r,e[5]=c*n-i*r,e[6]=u*n-o*r,e[7]=d*n-s*r,e}},{}],60:[function(e,t,n){t.exports=function(e,t,n){var r=n[0],a=n[1],n=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],61:[function(e,t,n){t.exports=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},{}],62:[function(e,t,n){t.exports=function(e,t,n){var r,a,i,o,s,l,c,u,d,f,p,h,m=n[0],g=n[1],n=n[2];t===e?(e[12]=t[0]*m+t[4]*g+t[8]*n+t[12],e[13]=t[1]*m+t[5]*g+t[9]*n+t[13],e[14]=t[2]*m+t[6]*g+t[10]*n+t[14],e[15]=t[3]*m+t[7]*g+t[11]*n+t[15]):(r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],f=t[9],p=t[10],h=t[11],e[0]=r,e[1]=a,e[2]=i,e[3]=o,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=f,e[10]=p,e[11]=h,e[12]=r*m+s*g+d*n+t[12],e[13]=a*m+l*g+f*n+t[13],e[14]=i*m+c*g+p*n+t[14],e[15]=o*m+u*g+h*n+t[15]);return e}},{}],63:[function(e,t,n){t.exports=function(e,t){{var n,r,a,i,o,s;e===t?(n=t[1],r=t[2],a=t[3],i=t[6],o=t[7],s=t[11],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=i,e[11]=t[14],e[12]=a,e[13]=o,e[14]=s):(e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15])}return e}},{}],64:[function(n,r,e){!function(t){!function(){"use strict";var e=n("is-browser"),e="function"==typeof t.matchMedia?!t.matchMedia("(hover: none)").matches:e;r.exports=e}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":68}],65:[function(e,t,n){"use strict";e=e("is-browser");t.exports=e&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}()},{"is-browser":68}],66:[function(e,t,n){n.read=function(e,t,n,r,a){var i,o,s=8*a-r-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?a-1:0,f=n?-1:1,a=e[t+d];for(d+=f,i=a&(1<<-u)-1,a>>=-u,u+=s;0<u;i=256*i+e[t+d],d+=f,u-=8);for(o=i&(1<<-u)-1,i>>=-u,u+=r;0<u;o=256*o+e[t+d],d+=f,u-=8);if(0===i)i=1-c;else{if(i===l)return o?NaN:1/0*(a?-1:1);o+=Math.pow(2,r),i-=c}return(a?-1:1)*o*Math.pow(2,i-r)},n.write=function(e,t,n,r,a,i){var o,s,l=8*i-a-1,c=(1<<l)-1,u=c>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,p=r?1:-1,i=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-o))<1&&(o--,r*=2),2<=(t+=1<=o+u?d/r:d*Math.pow(2,1-u))*r&&(o++,r/=2),c<=o+u?(s=0,o=c):1<=o+u?(s=(t*r-1)*Math.pow(2,a),o+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,a),o=0));8<=a;e[n+f]=255&s,f+=p,s/=256,a-=8);for(o=o<<a|s,l+=a;0<l;e[n+f]=255&o,f+=p,o/=256,l-=8);e[n+f-p]|=128*i}},{}],67:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){var n;t&&(e.super_=t,(n=function(){}).prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e)}},{}],68:[function(e,t,n){t.exports=!0},{}],69:[function(e,t,n){"use strict";t.exports=i,t.exports.isMobile=i,t.exports.default=i;var r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function i(e){var t=(e=e||{}).ua;if("string"!=typeof(t=(t=t||"undefined"==typeof navigator?t:navigator.userAgent)&&t.headers&&"string"==typeof t.headers["user-agent"]?t.headers["user-agent"]:t))return!1;var n=(e.tablet?a:r).test(t);return n=!n&&e.tablet&&e.featureDetect&&navigator&&1<navigator.maxTouchPoints&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")?!0:n}},{}],70:[function(e,t,n){"use strict";t.exports=function(e){for(var t,n=e.length,r=0;r<n;r++)if(((t=e.charCodeAt(r))<9||13<t)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||8205<t)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}},{}],71:[function(e,t,n){var a={left:0,top:0};t.exports=function(e,t,n){t=t||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var r=e.clientX||0,e=e.clientY||0,t=function(e){return e===window||e===document||e===document.body?a:e.getBoundingClientRect()}(t);return n[0]=r-t.left,n[1]=e-t.top,n}},{}],72:[function(e,a,t){!function(r,b){!function(){var e,t,n;n=function(){"use strict";var t,n,r,a,i,e=Object.prototype.toString,o=void 0!==b?function(e){return b(e)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(e,t,n,r){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==r})}}catch(e){t=function(e,t,n){return e[t]=n,e}}function s(e,t){this.fn=e,this.self=t,this.next=void 0}function l(e,t){y.add(e,t),n=n||o(y.drain)}function c(e){var t,n=typeof e;return"function"==typeof(t=null==e||"object"!=n&&"function"!=n?t:e.then)&&t}function u(){for(var e=0;e<this.chain.length;e++){n=t=i=a=r=void 0;var t,n,r=this,a=1===this.state?this.chain[e].success:this.chain[e].failure,i=this.chain[e];try{!1===a?i.reject(r.msg):(t=!0===a?r.msg:a.call(void 0,r.msg))===i.promise?i.reject(TypeError("Promise-chain cycle")):(n=c(t))?n.call(t,i.resolve,i.reject):i.resolve(t)}catch(e){i.reject(e)}}this.chain.length=0}function d(e){var n,r=this;if(!r.triggered){r.triggered=!0,r.def&&(r=r.def);try{(n=c(e))?l(function(){var t=new h(r);try{n.call(e,function(){d.apply(t,arguments)},function(){f.apply(t,arguments)})}catch(e){f.call(t,e)}}):(r.msg=e,r.state=1,0<r.chain.length&&l(u,r))}catch(e){f.call(new h(r),e)}}}function f(e){var t=this;t.triggered||(t.triggered=!0,(t=t.def?t.def:t).msg=e,t.state=2,0<t.chain.length&&l(u,t))}function p(e,n,r,a){for(var t=0;t<n.length;t++)!function(t){e.resolve(n[t]).then(function(e){r(t,e)},a)}(t)}function h(e){this.def=e,this.triggered=!1}function m(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var r=new m(this);this.then=function(e,t){var n={success:"function"!=typeof e||e,failure:"function"==typeof t&&t};return n.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");n.resolve=e,n.reject=t}),r.chain.push(n),0!==r.state&&l(u,r),n.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,function(e){d.call(r,e)},function(e){f.call(r,e)})}catch(e){f.call(r,e)}}var y={add:function(e,t){i=new s(e,t),a?a.next=i:r=i,a=i,i=void 0},drain:function(){var e=r;for(r=a=n=void 0;e;)e.fn.call(e.self),e=e.next}},v=t({},"constructor",g,!1);return t(g.prototype=v,"__NPO__",0,!1),t(g,"resolve",function(n){return n&&"object"==typeof n&&1===n.__NPO__?n:new this(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");e(n)})}),t(g,"reject",function(n){return new this(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");t(n)})}),t(g,"all",function(t){var o=this;return"[object Array]"!=e.call(t)?o.reject(TypeError("Not an array")):0===t.length?o.resolve([]):new o(function(n,e){if("function"!=typeof n||"function"!=typeof e)throw TypeError("Not a function");var r=t.length,a=Array(r),i=0;p(o,t,function(e,t){a[e]=t,++i===r&&n(a)},e)})}),t(g,"race",function(t){var r=this;return"[object Array]"!=e.call(t)?r.reject(TypeError("Not an array")):new r(function(n,e){if("function"!=typeof n||"function"!=typeof e)throw TypeError("Not a function");p(r,t,function(e,t){n(t)},e)})}),g},(t=void 0!==r?r:this)[e="Promise"]=t[e]||n(),void 0!==a&&a.exports&&(a.exports=t[e])}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{timers:120}],73:[function(e,t,n){"use strict";var l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},r)).join("")?void 0:1}catch(e){return}}()?Object.assign:function(e,t){for(var n,r=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),a=1;a<arguments.length;a++){for(var i in n=Object(arguments[a]))c.call(n,i)&&(r[i]=n[i]);if(l)for(var o=l(n),s=0;s<o.length;s++)u.call(n,o[s])&&(r[o[s]]=n[o[s]])}return r}},{}],74:[function(e,t,n){t.exports=function(e){var a=[];return e.replace(r,function(e,t,n){var r=t.toLowerCase();for(n=function(e){e=e.match(o);return e?e.map(Number):[]}(n),"m"==r&&2<n.length&&(a.push([t].concat(n.splice(0,2))),r="l",t="m"==t?"l":"L");;){if(n.length==i[r])return n.unshift(t),a.push(n);if(n.length<i[r])throw new Error("malformed path data");a.push([t].concat(n.splice(0,i[r])))}}),a};var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var o=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],75:[function(e,t,n){var r,a=e("./lib/build-log"),i=e("./lib/epsilon"),o=e("./lib/intersecter"),s=e("./lib/segment-chainer"),l=e("./lib/segment-selector"),c=e("./lib/geojson"),u=!1,d=i();function f(e,t,n){e=r.segments(e),t=r.segments(t),n=n(r.combine(e,t));return r.polygon(n)}r={buildLog:function(e){return!0===e?u=a():!1===e&&(u=!1),!1!==u&&u.list},epsilon:function(e){return d.epsilon(e)},segments:function(e){var t=o(!0,d,u);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){return{combined:o(!1,d,u).calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:l.union(e.combined,u),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:l.intersect(e.combined,u),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:l.difference(e.combined,u),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:l.differenceRev(e.combined,u),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:l.xor(e.combined,u),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:s(e.segments,d,u),inverted:e.inverted}},polygonFromGeoJSON:function(e){return c.toPolygon(r,e)},polygonToGeoJSON:function(e){return c.fromPolygon(r,d,e)},union:function(e,t){return f(e,t,r.selectUnion)},intersect:function(e,t){return f(e,t,r.selectIntersect)},difference:function(e,t){return f(e,t,r.selectDifference)},differenceRev:function(e,t){return f(e,t,r.selectDifferenceRev)},xor:function(e,t){return f(e,t,r.selectXor)}},"object"==typeof window&&(window.PolyBool=r),t.exports=r},{"./lib/build-log":76,"./lib/epsilon":77,"./lib/geojson":78,"./lib/intersecter":79,"./lib/segment-chainer":81,"./lib/segment-selector":82}],76:[function(e,t,n){t.exports=function(){var n,e=0,t=!1;function r(e,t){return n.list.push({type:e,data:t?JSON.parse(JSON.stringify(t)):void 0}),n}return n={list:[],segmentId:function(){return e++},checkIntersection:function(e,t){return r("check",{seg1:e,seg2:t})},segmentChop:function(e,t){return r("div_seg",{seg:e,pt:t}),r("chop",{seg:e,pt:t})},statusRemove:function(e){return r("pop_seg",{seg:e})},segmentUpdate:function(e){return r("seg_update",{seg:e})},segmentNew:function(e,t){return r("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return r("rem_seg",{seg:e})},tempStatus:function(e,t,n){return r("temp_status",{seg:e,above:t,below:n})},rewind:function(e){return r("rewind",{seg:e})},status:function(e,t,n){return r("status",{seg:e,above:t,below:n})},vert:function(e){return e===t?n:r("vert",{x:t=e})},log:function(e){return r("log",{txt:e="string"!=typeof e?JSON.stringify(e,!1,"  "):e})},reset:function(){return r("reset")},selected:function(e){return r("selected",{segs:e})},chainStart:function(e){return r("chain_start",{seg:e})},chainRemoveHead:function(e,t){return r("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return r("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return r("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return r("chain_match",{index:e})},chainClose:function(e){return r("chain_close",{index:e})},chainAddHead:function(e,t){return r("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return r("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return r("chain_con",{index1:e,index2:t})},chainReverse:function(e){return r("chain_rev",{index:e})},chainJoin:function(e,t){return r("chain_join",{index1:e,index2:t})},done:function(){return r("done")}}}},{}],77:[function(e,t,n){t.exports=function(u){"number"!=typeof u&&(u=1e-10);var n={epsilon:function(e){return u="number"==typeof e?e:u},pointAboveOrOnLine:function(e,t,n){var r=t[0],t=t[1],a=n[0],n=n[1],i=e[0],e=e[1];return-u<=(a-r)*(e-t)-(n-t)*(i-r)},pointBetween:function(e,t,n){var r=e[1]-t[1],a=n[0]-t[0],e=e[0]-t[0],n=n[1]-t[1],t=e*a+r*n;return!(t<u)&&!(-u<t-(a*a+n*n))},pointsSameX:function(e,t){return Math.abs(e[0]-t[0])<u},pointsSameY:function(e,t){return Math.abs(e[1]-t[1])<u},pointsSame:function(e,t){return n.pointsSameX(e,t)&&n.pointsSameY(e,t)},pointsCompare:function(e,t){return n.pointsSameX(e,t)?n.pointsSameY(e,t)?0:e[1]<t[1]?-1:1:e[0]<t[0]?-1:1},pointsCollinear:function(e,t,n){var r=e[0]-t[0],e=e[1]-t[1],a=t[0]-n[0],t=t[1]-n[1];return Math.abs(r*t-a*e)<u},linesIntersect:function(e,t,n,r){var a=t[0]-e[0],t=t[1]-e[1],i=r[0]-n[0],r=r[1]-n[1],o=a*r-t*i;if(Math.abs(o)<u)return!1;var s=e[0]-n[0],n=e[1]-n[1],i=(i*n-r*s)/o,r=(a*n-t*s)/o,n={alongA:0,alongB:0,pt:[e[0]+i*a,e[1]+i*t]};return n.alongA=i<=-u?-2:i<u?-1:i-1<=-u?0:i-1<u?1:2,n.alongB=r<=-u?-2:r<u?-1:r-1<=-u?0:r-1<u?1:2,n},pointInsideRegion:function(e,t){for(var n=e[0],r=e[1],a=t[t.length-1][0],i=t[t.length-1][1],o=!1,s=0;s<t.length;s++){var l=t[s][0],c=t[s][1];u<c-r!=u<i-r&&u<(a-l)*(r-c)/(i-c)+l-n&&(o=!o),a=l,i=c}return o}};return n}},{}],78:[function(e,t,n){t.exports={toPolygon:function(a,e){function t(e){if(e.length<=0)return a.segments({inverted:!1,regions:[]});function t(e){e=e.slice(0,e.length-1);return a.segments({inverted:!1,regions:[e]})}for(var n=t(e[0]),r=1;r<e.length;r++)n=a.selectDifference(a.combine(n,t(e[r])));return n}if("Polygon"===e.type)return a.polygon(t(e.coordinates));if("MultiPolygon"!==e.type)throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon");for(var n=a.segments({inverted:!1,regions:[]}),r=0;r<e.coordinates.length;r++)n=a.selectUnion(a.combine(n,t(e.coordinates[r])));return a.polygon(n)},fromPolygon:function(e,n,t){function o(e,t){return n.pointInsideRegion([.5*(e[0][0]+e[1][0]),.5*(e[0][1]+e[1][1])],t)}function s(e){return{region:e,children:[]}}t=e.polygon(e.segments(t));var r=s(null);for(var a=0;a<t.regions.length;a++){var i=t.regions[a];i.length<3||!function e(t,n){for(var r=0;r<t.children.length;r++)if(o(n,(a=t.children[r]).region))return void e(a,n);for(var a,i=s(n),r=0;r<t.children.length;r++)o((a=t.children[r]).region,n)&&(i.children.push(a),t.children.splice(r,1),r--);t.children.push(i)}(r,i)}function l(e,t){for(var n=0,r=e[e.length-1][0],a=e[e.length-1][1],i=[],o=0;o<e.length;o++){var s=e[o][0],l=e[o][1];i.push([s,l]),n+=l*r-s*a,r=s,a=l}return n<0!==t&&i.reverse(),i.push([i[0][0],i[0][1]]),i}var c=[];function u(e){var t=[l(e.region,!1)];c.push(t);for(var n=0;n<e.children.length;n++)t.push(function(e){for(var t=0;t<e.children.length;t++)u(e.children[t]);return l(e.region,!0)}(e.children[n]))}for(a=0;a<r.children.length;a++)u(r.children[a]);return c.length<=0?{type:"Polygon",coordinates:[]}:1==c.length?{type:"Polygon",coordinates:c[0]}:{type:"MultiPolygon",coordinates:c}}}},{}],79:[function(e,t,n){var y=e("./linked-list");t.exports=function(f,p,h){function a(e,t,n){return{id:h?h.segmentId():-1,start:e,end:t,myFill:{above:n.myFill.above,below:n.myFill.below},otherFill:null}}var m=y.create();function i(o,s){m.insertBefore(o,function(e){var t,n,r,a,i;return t=o.isStart,n=o.pt,r=s,a=e.isStart,i=e.pt,e=e.other.pt,(0!==(n=p.pointsCompare(n,i))?n:p.pointsSame(r,e)?0:t!==a?t?1:-1:p.pointAboveOrOnLine(r,a?i:e,a?e:i)?1:-1)<0})}function o(e,t){a=e,n=t,i(n=y.node({isStart:!0,pt:a.start,seg:a,primary:n,other:null,status:null}),a.end);var n,r,a=n;return n=a,r=e,r=y.node({isStart:!1,pt:e.end,seg:e,primary:t,other:n,status:null}),i(n.other=r,n.pt),a}function g(e,t){var n,r=a(t,e.seg.end,e.seg);n=e,t=t,h&&h.segmentChop(n.seg,t),n.other.remove(),n.seg.end=t,n.other.pt=t,i(n.other,n.pt),o(r,e.primary)}function s(e,t){var n=y.create();function r(a){return n.findTransition(function(e){var t,n,r;return t=a,e=e.ev,n=t.seg.start,t=t.seg.end,r=e.seg.start,e=e.seg.end,0<(p.pointsCollinear(n,r,e)?p.pointsCollinear(t,r,e)||p.pointAboveOrOnLine(t,r,e)?1:-1:p.pointAboveOrOnLine(n,r,e)?1:-1)})}function a(e,t){var n=e.seg,r=t.seg,a=n.start,i=n.end,o=r.start,s=r.end,n=(h&&h.checkIntersection(n,r),p.linesIntersect(a,i,o,s));if(!1===n){if(!p.pointsCollinear(a,i,o))return!1;if(p.pointsSame(a,s)||p.pointsSame(i,o))return!1;var r=p.pointsSame(a,o),l=p.pointsSame(i,s);if(r&&l)return t;var c=!r&&p.pointBetween(a,o,s),u=!l&&p.pointBetween(i,o,s);if(r)return u?g(t,i):g(e,s),t;c&&(l||(u?g(t,i):g(e,s)),g(t,a))}else 0===n.alongA&&(-1===n.alongB?g(e,o):0===n.alongB?g(e,n.pt):1===n.alongB&&g(e,s)),0===n.alongB&&(-1===n.alongA?g(t,a):0===n.alongA?g(t,n.pt):1===n.alongA&&g(t,i));return!1}for(var i=[];!m.isEmpty();){var o=m.getHead();if(h&&h.vert(o.pt[0]),o.isStart){h&&h.segmentNew(o.seg,o.primary);var s=r(o),l=s.before?s.before.ev:null,c=s.after?s.after.ev:null;h&&h.tempStatus(o.seg,!!l&&l.seg,!!c&&c.seg);var u,d=function(){if(l){var e=a(o,l);if(e)return e}return!!c&&a(o,c)}();if(d&&(f?(u=null===o.seg.myFill.below||o.seg.myFill.above!==o.seg.myFill.below)&&(d.seg.myFill.above=!d.seg.myFill.above):d.seg.otherFill=o.seg.myFill,h&&h.segmentUpdate(d.seg),o.other.remove(),o.remove()),m.getHead()!==o){h&&h.rewind(o.seg);continue}f?(u=null===o.seg.myFill.below||o.seg.myFill.above!==o.seg.myFill.below,o.seg.myFill.below=c?c.seg.myFill.above:e,o.seg.myFill.above=u?!o.seg.myFill.below:o.seg.myFill.below):null===o.seg.otherFill&&(d=c?(o.primary===c.primary?c.seg.otherFill:c.seg.myFill).above:o.primary?t:e,o.seg.otherFill={above:d,below:d}),h&&h.status(o.seg,!!l&&l.seg,!!c&&c.seg),o.other.status=s.insert(y.node({ev:o}))}else{d=o.status;if(null===d)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");n.exists(d.prev)&&n.exists(d.next)&&a(d.prev.ev,d.next.ev),h&&h.statusRemove(d.ev.seg),d.remove(),o.primary||(s=o.seg.myFill,o.seg.myFill=o.seg.otherFill,o.seg.otherFill=s),i.push(o.seg)}m.getHead().remove()}return h&&h.done(),i}return f?{addRegion:function(e){for(var t,n=e[e.length-1],r=0;r<e.length;r++){var a=n,n=e[r],i=p.pointsCompare(a,n);0!==i&&o((t=i<0?a:n,i=i<0?n:a,{id:h?h.segmentId():-1,start:t,end:i,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(e){return s(e,!1)}}:{calculate:function(e,t,n,r){return e.forEach(function(e){o(a(e.start,e.end,e),!0)}),n.forEach(function(e){o(a(e.start,e.end,e),!1)}),s(t,r)}}}},{"./linked-list":80}],80:[function(e,t,n){t.exports={create:function(){var a={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==a.root},isEmpty:function(){return null===a.root.next},getHead:function(){return a.root.next},insertBefore:function(e,t){for(var n=a.root,r=a.root.next;null!==r;){if(t(r))return e.prev=r.prev,(e.next=r).prev.next=e,void(r.prev=e);r=(n=r).next}(n.next=e).prev=n,e.next=null},findTransition:function(e){for(var t=a.root,n=a.root.next;null!==n&&!e(n);)n=(t=n).next;return{before:t===a.root?null:t,after:n,insert:function(e){return e.prev=t,e.next=n,t.next=e,null!==n&&(n.prev=e),e}}}};return a},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}}},{}],81:[function(e,t,n){t.exports=function(e,b,x){var _=[],w=[];return e.forEach(function(e){var t=e.start,n=e.end;if(b.pointsSame(t,n))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{x&&x.chainStart(e);for(var r,a,i,o,s={index:0,matches_head:!1,matches_pt1:!1},l={index:0,matches_head:!1,matches_pt1:!1},c=s,u=0;u<_.length;u++){var d,f=(d=_[u])[0],p=(d[1],d[d.length-1]);d[d.length-2];if(b.pointsSame(f,t)){if(g(u,!0,!0))break}else if(b.pointsSame(f,n)){if(g(u,!0,!1))break}else if(b.pointsSame(p,t)){if(g(u,!1,!0))break}else if(b.pointsSame(p,n)&&g(u,!1,!1))break}if(c===s)return _.push([t,n]),void(x&&x.chainNew(t,n));if(c===l)return x&&x.chainMatch(s.index),e=s.index,r=s.matches_pt1?n:t,a=s.matches_head,d=_[e],i=a?d[0]:d[d.length-1],h=a?d[1]:d[d.length-2],o=a?d[d.length-1]:d[0],m=a?d[d.length-2]:d[1],b.pointsCollinear(h,i,r)&&(a?(x&&x.chainRemoveHead(s.index,r),d.shift()):(x&&x.chainRemoveTail(s.index,r),d.pop()),i=h),b.pointsSame(o,r)?(_.splice(e,1),b.pointsCollinear(m,o,i)&&(a?(x&&x.chainRemoveTail(s.index,i),d.pop()):(x&&x.chainRemoveHead(s.index,i),d.shift())),x&&x.chainClose(s.index),void w.push(d)):void(a?(x&&x.chainAddHead(s.index,r),d.unshift(r)):(x&&x.chainAddTail(s.index,r),d.push(r)));var h=s.index,e=l.index,m=(x&&x.chainConnect(h,e),_[h].length<_[e].length);s.matches_head?l.matches_head?m?(y(h),v(h,e)):(y(e),v(e,h)):v(e,h):l.matches_head?v(h,e):m?(y(h),v(e,h)):(y(e),v(h,e))}function g(e,t,n){if(c.index=e,c.matches_head=t,c.matches_pt1=n,c!==s)return c=null,1;c=l}function y(e){x&&x.chainReverse(e),_[e].reverse()}function v(e,t){var n=_[e],r=_[t],a=n[n.length-1],i=n[n.length-2],o=r[0],s=r[1];b.pointsCollinear(i,a,o)&&(x&&x.chainRemoveTail(e,a),n.pop(),a=i),b.pointsCollinear(a,o,s)&&(x&&x.chainRemoveHead(t,o),r.shift()),x&&x.chainJoin(e,t),_[e]=n.concat(r),_.splice(t,1)}}),w}},{}],82:[function(e,t,n){function r(e,n,r){var a=[];return e.forEach(function(e){var t=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);0!==n[t]&&a.push({id:r?r.segmentId():-1,start:e.start,end:e.end,myFill:{above:1===n[t],below:2===n[t]},otherFill:null})}),r&&r.selected(a),a}t.exports={union:function(e,t){return r(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return r(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return r(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return r(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return r(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}}},{}],83:[function(e,t,n){"use strict";var r=e("stream").Transform;function a(){r.call(this,{readableObjectMode:!0})}function i(e,t,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name=this.constructor.name,this.message=e,t&&(this.code=t),n&&(this.statusCode=n)}e("stream-parser")(((a.prototype=Object.create(r.prototype)).constructor=a).prototype),n.ParserStream=a,n.sliceEq=function(e,t,n){for(var r=t,a=0;a<n.length;)if(e[r++]!==n[a++])return!1;return!0},n.str2arr=function(e,t){var n=[],r=0;if(t&&"hex"===t)for(;r<e.length;)n.push(parseInt(e.slice(r,r+2),16)),r+=2;else for(;r<e.length;r++)n.push(255&e.charCodeAt(r));return n},n.readUInt16LE=function(e,t){return e[t]|e[t+1]<<8},n.readUInt16BE=function(e,t){return e[t+1]|e[t]<<8},n.readUInt32LE=function(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|16777216*e[t+3]},n.readUInt32BE=function(e,t){return e[t+3]|e[t+2]<<8|e[t+1]<<16|16777216*e[t]},i.prototype=Object.create(Error.prototype),n.ProbeError=i.prototype.constructor=i},{stream:100,"stream-parser":116}],84:[function(e,t,n){"use strict";function g(e,t){e=new Error(e);return e.code=t,e}function r(e,t,n){this.input=e.subarray(t,n),this.start=t;e=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==e&&"MM\0*"!==e)throw g("invalid TIFF signature","EBADDATA");this.big_endian="M"===e[0]}r.prototype.each=function(e){this.aborted=!1;var t=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:t}];0<this.ifds_to_read.length&&!this.aborted;){var n=this.ifds_to_read.shift();n.offset&&this.scan_ifd(n.id,n.offset,e)}},r.prototype.read_uint16=function(e){var t=this.input;if(e+2>t.length)throw g("unexpected EOF","EBADDATA");return this.big_endian?256*t[e]+t[e+1]:t[e]+256*t[e+1]},r.prototype.read_uint32=function(e){var t=this.input;if(e+4>t.length)throw g("unexpected EOF","EBADDATA");return this.big_endian?16777216*t[e]+65536*t[e+1]+256*t[e+2]+t[e+3]:t[e]+256*t[e+1]+65536*t[e+2]+16777216*t[e+3]},r.prototype.is_subifd_link=function(e,t){return 0===e&&34665===t||0===e&&34853===t||34665===e&&40965===t},r.prototype.exif_format_length=function(e){switch(e){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},r.prototype.exif_format_read=function(e,t){var n;switch(e){case 1:case 2:return n=this.input[t];case 6:return(n=this.input[t])|33554430*(128&n);case 3:return n=this.read_uint16(t);case 8:return(n=this.read_uint16(t))|131070*(32768&n);case 4:return n=this.read_uint32(t);case 9:return 0|(n=this.read_uint32(t));default:return null}},r.prototype.scan_ifd=function(e,t,n){var r=this.read_uint16(t);t+=2;for(var a=0;a<r;a++){var i=this.read_uint16(t),o=this.read_uint16(t+2),s=this.read_uint32(t+4),l=this.exif_format_length(o),c=s*l,u=c<=4?t+8:this.read_uint32(t+8),d=!1;if(u+c>this.input.length)throw g("unexpected EOF","EBADDATA");for(var f=[],p=u,h=0;h<s;h++,p+=l){var m=this.exif_format_read(o,p);if(null===m){f=null;break}f.push(m)}if(Array.isArray(f)&&2===o&&(f=function(t){try{return decodeURIComponent(escape(t))}catch(e){return t}}(String.fromCharCode.apply(null,f)))&&"\0"===f[f.length-1]&&(f=f.slice(0,-1)),this.is_subifd_link(e,i)&&Array.isArray(f)&&Number.isInteger(f[0])&&0<f[0]&&(this.ifds_to_read.push({id:i,offset:f[0]}),d=!0),!1===n({is_big_endian:this.big_endian,ifd:e,tag:i,format:o,count:s,entry_offset:t+this.start,data_length:c,data_offset:u+this.start,value:f,is_subifd_link:d}))return void(this.aborted=!0);t+=12}0===e&&this.ifds_to_read.push({id:1,offset:this.read_uint32(t)})},t.exports.ExifParser=r,t.exports.get_orientation=function(e){var t=0;try{return new r(e,0,e.length).each(function(e){if(0===e.ifd&&274===e.tag&&Array.isArray(e.value))return t=e.value[0],!1}),t}catch(e){return-1}}},{}],85:[function(e,t,n){"use strict";var M=e("./common").readUInt16BE,l=e("./common").readUInt32BE;function E(e,t){if(e.length<4+t)return null;var n=l(e,t);return e.length<n+t||n<8?null:{boxtype:String.fromCharCode.apply(null,e.slice(t+4,t+8)),data:e.slice(t+8,t+n),end:t+n}}function S(e,t,n){for(var r=0,a=0;a<n;a++)r=256*r+(e[t+a]||0);return r}function L(e,t){for(var n=0;;){var r=E(e,n);if(!r)break;if("ipco"===r.boxtype){s=o=i=a=void 0;for(var a=r.data,i=t,o=0;;){var s=E(a,o);if(!s)break;switch(s.boxtype){case"ispe":i.sizes.push({width:l(s.data,4),height:l(s.data,8)});break;case"irot":i.transforms.push({type:"irot",value:3&s.data[0]});break;case"imir":i.transforms.push({type:"imir",value:1&s.data[0]})}o=s.end}}n=r.end}}function r(e,t){for(var n=4;;){var r=E(e,n);if(!r)break;if("iprp"===r.boxtype&&L(r.data,t),"iloc"===r.boxtype){f=h=g=m=h=p=d=u=c=l=s=o=i=a=void 0;for(var a=r.data,i=t,o=a[4]>>4&15,s=15&a[4],l=a[5]>>4&15,c=M(a,6),u=8,d=0;d<c;d++){var f,p=M(a,u),h=M(a,u+=2),m=S(a,u+=2,l),g=M(a,u+=l);u+=2,0===h&&1===g&&(h=S(a,u,o),f=S(a,u+o,s),i.item_loc[p]={length:f,offset:h+m}),u+=g*(o+s)}}if("iinf"===r.boxtype){A=k=T=w=_=x=b=v=y=void 0;for(var y=r.data,v=t,b=M(y,4),x=6,_=0;_<b;_++){var w=E(y,x);if(!w)break;if("infe"===w.boxtype){for(var T=M(w.data,4),k="",A=8;A<w.data.length&&w.data[A];A++)k+=String.fromCharCode(w.data[A]);v.item_inf[k]=T}x=w.end}}n=r.end}}t.exports.unbox=E,t.exports.readSizeFromMeta=function(e){var a,t,n={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(r(e,n),n.sizes.length)return e=n.sizes,t=e.reduce(function(e,t){return e.width>t.width||e.width===t.width&&e.height>t.height?e:t}),e=e.reduce(function(e,t){return e.height>t.height||e.height===t.height&&e.width>t.width?e:t}),e=t=t.width>e.height||t.width===e.height&&t.height>e.width?t:e,a=1,n.transforms.forEach(function(e){var t={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},n={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===e.type&&(a=0===e.value?n[a]:t[a=t[a=n[a]]]),"irot"===e.type)for(var r=0;r<e.value;r++)a=t[a]}),t=null,n.item_inf.Exif&&(t=n.item_loc[n.item_inf.Exif]),{width:e.width,height:e.height,orientation:n.transforms.length?a:null,variants:n.sizes,exif_location:t}},t.exports.getMimeType=function(e){var t=String.fromCharCode.apply(null,e.slice(0,4)),n={};n[t]=!0;for(var r=8;r<e.length;r+=4)n[String.fromCharCode.apply(null,e.slice(r,r+4))]=!0;if(n.mif1||n.msf1||n.miaf)return"avif"===t||"avis"===t||"avio"===t?{type:"avif",mime:"image/avif"}:"heic"===t||"heix"===t?{type:"heic",mime:"image/heic"}:"hevc"===t||"hevx"===t?{type:"heic",mime:"image/heic-sequence"}:!n.avif&&!n.avis&&(n.heic||n.heix||n.hevc||n.hevx||n.heis)?n.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":83}],86:[function(e,t,n){"use strict";var r=e("../common").str2arr,s=e("../common").sliceEq,l=e("../common").readUInt32BE,c=e("../miaf_utils"),u=e("../exif_utils"),d=r("ftyp");t.exports=function(e){if(s(e,4,d)){var t=c.unbox(e,0);if(t){var n=c.getMimeType(t.data);if(n){for(var r,a=t.end;;){var i=c.unbox(e,a);if(!i)break;if(a=i.end,"mdat"===i.boxtype)return;if("meta"===i.boxtype){r=i.data;break}}if(r){var o,t=c.readSizeFromMeta(r);if(t)return n={width:t.width,height:t.height,type:n.type,mime:n.mime,wUnits:"px",hUnits:"px"},1<t.variants.length&&(n.variants=t.variants),t.orientation&&(n.orientation=t.orientation),t.exif_location&&t.exif_location.offset+t.exif_location.length<=e.length&&(o=l(e,t.exif_location.offset),o=e.slice(t.exif_location.offset+o+4,t.exif_location.offset+t.exif_location.length),0<(t=u.get_orientation(o))&&(n.orientation=t)),n}}}}}},{"../common":83,"../exif_utils":84,"../miaf_utils":85}],87:[function(e,t,n){"use strict";var r=e("../common").str2arr,a=e("../common").sliceEq,i=e("../common").readUInt16LE,o=r("BM");t.exports=function(e){if(!(e.length<26)&&a(e,0,o))return{width:i(e,18),height:i(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":83}],88:[function(e,t,n){"use strict";var r=e("../common").str2arr,a=e("../common").sliceEq,i=e("../common").readUInt16LE,o=r("GIF87a"),s=r("GIF89a");t.exports=function(e){if(!(e.length<10)&&(a(e,0,o)||a(e,0,s)))return{width:i(e,6),height:i(e,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":83}],89:[function(e,t,n){"use strict";var u=e("../common").readUInt16LE;t.exports=function(e){var t=u(e,0),n=u(e,2),r=u(e,4);if(0===t&&1===n&&r){for(var a=[],i={width:0,height:0},o=0;o<r;o++){var s=e[6+16*o]||256,l=e[6+16*o+1]||256,c={width:s,height:l};a.push(c),(s>i.width||l>i.height)&&(i=c)}return{width:i.width,height:i.height,variants:a,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":83}],90:[function(e,t,n){"use strict";var o=e("../common").readUInt16BE,r=e("../common").str2arr,s=e("../common").sliceEq,l=e("../exif_utils"),c=r("Exif\0\0");t.exports=function(e){if(!(e.length<2)&&255===e[0]&&216===e[1]&&255===e[2])for(var t=2;;){for(;;){if(e.length-t<2)return;if(255===e[t++])break}for(var n,r,a=e[t++];255===a;)a=e[t++];if(208<=a&&a<=217||1===a)n=0;else{if(!(192<=a&&a<=254))return;if(e.length-t<2)return;n=o(e,t)-2,t+=2}if(217===a||218===a)return;if(225===a&&10<=n&&s(e,t,c)&&(r=l.get_orientation(e.slice(t+6,t+n))),5<=n&&192<=a&&a<=207&&196!==a&&200!==a&&204!==a){if(e.length-t<n)return;var i={width:o(e,t+3),height:o(e,t+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return 0<r&&(i.orientation=r),i}t+=n}}},{"../common":83,"../exif_utils":84}],91:[function(e,t,n){"use strict";var r=e("../common").str2arr,a=e("../common").sliceEq,i=e("../common").readUInt32BE,o=r("PNG\r\n\n"),s=r("IHDR");t.exports=function(e){if(!(e.length<24)&&a(e,0,o)&&a(e,12,s))return{width:i(e,16),height:i(e,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":83}],92:[function(e,t,n){"use strict";var r=e("../common").str2arr,a=e("../common").sliceEq,i=e("../common").readUInt32BE,o=r("8BPS\0");t.exports=function(e){if(!(e.length<22)&&a(e,0,o))return{width:i(e,18),height:i(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":83}],93:[function(e,t,n){"use strict";function u(e){return"number"==typeof e&&isFinite(e)&&0<e}var d=/<[-_.:a-zA-Z0-9][^>]*>/,f=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,p=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,h=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,m=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,r=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function g(e){return r.test(e)?e.match(r)[0]:"px"}t.exports=function(e){if(function(e){var t,n=0,r=e.length;for(239===e[0]&&187===e[1]&&191===e[2]&&(n=3);n<r&&(32===(t=e[n])||9===t||13===t||10===t);)n++;return n!==r&&60===e[n]}(e)){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);var r=(t.match(d)||[""])[0];if(f.test(r)){a=(r=r).match(p),i=r.match(h),r=r.match(m);var a={width:a&&(a[1]||a[2]),height:i&&(i[1]||i[2]),viewbox:r&&(r[1]||r[2])},i=parseFloat(a.width),r=parseFloat(a.height);if(a.width&&a.height)return u(i)&&u(r)?{width:i,height:r,type:"svg",mime:"image/svg+xml",wUnits:g(a.width),hUnits:g(a.height)}:void 0;var o,s=(a.viewbox||"").split(" "),s={width:s[2],height:s[3]},l=parseFloat(s.width),c=parseFloat(s.height);if(u(l)&&u(c))if(g(s.width)===g(s.height))return o=l/c,a.width?u(i)?{width:i,height:i/o,type:"svg",mime:"image/svg+xml",wUnits:g(a.width),hUnits:g(a.width)}:void 0:a.height?u(r)?{width:r*o,height:r,type:"svg",mime:"image/svg+xml",wUnits:g(a.height),hUnits:g(a.height)}:void 0:{width:l,height:c,type:"svg",mime:"image/svg+xml",wUnits:g(s.width),hUnits:g(s.height)}}}}},{}],94:[function(e,t,n){"use strict";var r=e("../common").str2arr,c=e("../common").sliceEq,a=e("../common").readUInt16LE,i=e("../common").readUInt16BE,o=e("../common").readUInt32LE,s=e("../common").readUInt32BE,u=r("II*\0"),d=r("MM\0*");function f(e,t,n){return(n?i:a)(e,t)}function p(e,t,n){return(n?s:o)(e,t)}function h(e,t,n){var r=f(e,t+2,n);return 1!==p(e,t+4,n)||3!==r&&4!==r?null:(3===r?f:p)(e,t+8,n)}t.exports=function(e){if(!(e.length<8)&&(c(e,0,u)||c(e,0,d))){var t=77===e[0],n=p(e,4,t)-8;if(!(n<0)){var r=8+n;if(!(e.length-r<2)){var a=12*f(e,r,t);if(!(a<=0||e.length-(r+=2)<a)){for(var i,o,s,l=0;l<a;l+=12)256===(s=f(e,r+l,t))?i=h(e,r+l,t):257===s&&(o=h(e,r+l,t));return i&&o?{width:i,height:o,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},{"../common":83}],95:[function(e,t,n){"use strict";var r=e("../common").str2arr,l=e("../common").sliceEq,c=e("../common").readUInt16LE,u=e("../common").readUInt32LE,d=e("../exif_utils"),f=r("RIFF"),p=r("WEBP");t.exports=function(e){if(!(e.length<16)&&(l(e,0,f)||l(e,8,p))){var t,n,r,a=12,i=null,o=0,s=u(e,4)+8;if(!(s>e.length)){for(;a+8<s;)0===e[a]?a++:(t=String.fromCharCode.apply(null,e.slice(a,a+4)),n=u(e,a+4),"VP8 "===t&&10<=n?i=i||function(e,t){if(157===e[t+3]&&1===e[t+4]&&42===e[t+5])return{width:16383&c(e,t+6),height:16383&c(e,t+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}(e,a+8):"VP8L"===t&&9<=n?i=i||function(e,t){if(47===e[t])return{width:1+(16383&(e=u(e,t+1))),height:1+(e>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}(e,a+8):"VP8X"===t&&10<=n?i=i||{width:1+(e[(r=a+8)+6]<<16|e[r+5]<<8|e[r+4]),height:1+(e[r+9]<<r|e[r+8]<<8|e[r+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}:"EXIF"===t&&(o=d.get_orientation(e.slice(a+8,a+8+n)),a=1/0),a+=8+n);if(i)return 0<o&&(i.orientation=o),i}}}},{"../common":83,"../exif_utils":84}],96:[function(e,t,n){"use strict";t.exports={avif:e("./parse_sync/avif"),bmp:e("./parse_sync/bmp"),gif:e("./parse_sync/gif"),ico:e("./parse_sync/ico"),jpeg:e("./parse_sync/jpeg"),png:e("./parse_sync/png"),psd:e("./parse_sync/psd"),svg:e("./parse_sync/svg"),tiff:e("./parse_sync/tiff"),webp:e("./parse_sync/webp")}},{"./parse_sync/avif":86,"./parse_sync/bmp":87,"./parse_sync/gif":88,"./parse_sync/ico":89,"./parse_sync/jpeg":90,"./parse_sync/png":91,"./parse_sync/psd":92,"./parse_sync/svg":93,"./parse_sync/tiff":94,"./parse_sync/webp":95}],97:[function(e,t,n){"use strict";var i=e("./lib/parsers_sync");t.exports=function(e){for(var t=e,n=Object.keys(i),r=0;r<n.length;r++){var a=i[n[r]](t);if(a)return a}return null},t.exports.parsers=i},{"./lib/parsers_sync":96}],98:[function(e,t,n){var r,a,t=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{a="function"==typeof clearTimeout?clearTimeout:o}catch(e){a=o}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return(r=setTimeout)(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}var l,c=[],u=!1,d=-1;function f(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&p())}function p(){if(!u){for(var e=s(f),t=(u=!0,c.length);t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,!function(t){if(a===clearTimeout)return clearTimeout(t);if((a===o||!a)&&clearTimeout)return(a=clearTimeout)(t);try{a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||u||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],99:[function(e,t,n){var r=e("buffer"),a=r.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return a(e,t,n)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=r:(i(r,n),n.Buffer=o),o.prototype=Object.create(a.prototype),i(a,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");e=a(e);return void 0!==t?"string"==typeof n?e.fill(t,n):e.fill(t):e.fill(0),e},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{buffer:28}],100:[function(e,t,n){t.exports=r;var u=e("events").EventEmitter;function r(){u.call(this)}e("inherits")(r,u),r.Readable=e("readable-stream/lib/_stream_readable.js"),r.Writable=e("readable-stream/lib/_stream_writable.js"),r.Duplex=e("readable-stream/lib/_stream_duplex.js"),r.Transform=e("readable-stream/lib/_stream_transform.js"),r.PassThrough=e("readable-stream/lib/_stream_passthrough.js"),r.finished=e("readable-stream/lib/internal/streams/end-of-stream.js"),r.pipeline=e("readable-stream/lib/internal/streams/pipeline.js"),(r.Stream=r).prototype.pipe=function(t,e){var n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",a),t._isStdio||e&&!1===e.end||(n.on("end",o),n.on("close",s));var i=!1;function o(){i||(i=!0,t.end())}function s(){i||(i=!0,"function"==typeof t.destroy&&t.destroy())}function l(e){if(c(),0===u.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",r),t.removeListener("drain",a),n.removeListener("end",o),n.removeListener("close",s),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("error",l),t.on("error",l),n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t}},{events:27,inherits:67,"readable-stream/lib/_stream_duplex.js":102,"readable-stream/lib/_stream_passthrough.js":103,"readable-stream/lib/_stream_readable.js":104,"readable-stream/lib/_stream_transform.js":105,"readable-stream/lib/_stream_writable.js":106,"readable-stream/lib/internal/streams/end-of-stream.js":110,"readable-stream/lib/internal/streams/pipeline.js":112}],101:[function(e,t,n){"use strict";var r={};function a(e,a,t){var n=function(r){var e,t;function n(e,t,n){return r.call(this,(e=e,t=t,n=n,"string"==typeof a?a:a(e,t,n)))||this}return t=r,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,n}(t=t||Error);n.prototype.name=t.name,n.prototype.code=e,r[e]=n}function l(e,t){var n;return Array.isArray(e)?(n=e.length,e=e.map(function(e){return String(e)}),2<n?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])):"of ".concat(t," ").concat(String(e))}a("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),a("ERR_INVALID_ARG_TYPE",function(e,t,n){var r,a,i,o,s;return"string"==typeof t&&(o="not ",t.substr(!i||i<0?0:+i,o.length)===o)?(r="must not be",t=t.replace(/^not /,"")):r="must be",i=e,o=" argument",(void 0===s||s>i.length)&&(s=i.length),i=i.substring(s-o.length,s)===o?"The ".concat(e," ").concat(r," ").concat(l(t,"type")):(s=(a="number"!=typeof a?0:a)+(i=".").length>(s=e).length||-1===s.indexOf(i,a)?"argument":"property",'The "'.concat(e,'" ').concat(s," ").concat(r," ").concat(l(t,"type"))),i+=". Received type ".concat(typeof n)},TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r},{}],102:[function(u,d,e){!function(c){!function(){"use strict";var e=Object.keys||function(e){var t,n=[];for(t in e)n.push(t);return n},t=(d.exports=o,u("./_stream_readable")),n=u("./_stream_writable");u("inherits")(o,t);for(var r=e(n.prototype),a=0;a<r.length;a++){var i=r[a];o.prototype[i]||(o.prototype[i]=n.prototype[i])}function o(e){if(!(this instanceof o))return new o(e);t.call(this,e),n.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",s)))}function s(){this._writableState.ended||c.nextTick(l,this)}function l(e){e.end()}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}.call(this)}.call(this,u("_process"))},{"./_stream_readable":104,"./_stream_writable":106,_process:98,inherits:67}],103:[function(e,t,n){"use strict";t.exports=a;var r=e("./_stream_transform");function a(e){if(!(this instanceof a))return new a(e);r.call(this,e)}e("inherits")(a,r),a.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":105,inherits:67}],104:[function(j,q,e){!function(F,z){!function(){"use strict";function h(e,t){return e.listeners(t).length}(q.exports=x).ReadableState=b,j("events").EventEmitter;var r,a=j("./internal/streams/stream"),u=j("buffer").Buffer,d=z.Uint8Array||function(){};var i,e,n,t=j("util"),m=t&&t.debuglog?t.debuglog("stream"):function(){},o=j("./internal/streams/buffer_list"),t=j("./internal/streams/destroy"),s=j("./internal/streams/state").getHighWaterMark,l=j("../errors").codes,f=l.ERR_INVALID_ARG_TYPE,p=l.ERR_STREAM_PUSH_AFTER_EOF,c=l.ERR_METHOD_NOT_IMPLEMENTED,g=l.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,y=(j("inherits")(x,a),t.errorOrDestroy),v=["error","close","destroy","pause","resume"];function b(e,t,n){r=r||j("./_stream_duplex"),e=e||{},"boolean"!=typeof n&&(n=t instanceof r),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=s(this,e,"readableHighWaterMark",n),this.buffer=new o,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(i=i||j("string_decoder/").StringDecoder,this.decoder=new i(e.encoding),this.encoding=e.encoding)}function x(e){if(r=r||j("./_stream_duplex"),!(this instanceof x))return new x(e);var t=this instanceof r;this._readableState=new b(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function _(e,t,n,r,a){m("readableAddChunk",t);var i,o,s,l,c=e._readableState;if(null===t)c.reading=!1,o=e,s=c,m("onEofChunk"),s.ended||(s.decoder&&(l=s.decoder.end())&&l.length&&(s.buffer.push(l),s.length+=s.objectMode?1:l.length),s.ended=!0,s.sync?A(o):(s.needReadable=!1,s.emittedReadable||(s.emittedReadable=!0,M(o))));else if(i=a?i:function(e,t){var n;!function(e){return u.isBuffer(e)||e instanceof d}(t)&&"string"!=typeof t&&void 0!==t&&!e.objectMode&&(n=new f("chunk",["string","Buffer","Uint8Array"],t));return n}(c,t))y(e,i);else if(c.objectMode||t&&0<t.length)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===u.prototype||(l=t,t=u.from(l)),r)c.endEmitted?y(e,new g):w(e,c,t,!0);else if(c.ended)y(e,new p);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!n?(t=c.decoder.write(t),c.objectMode||0!==t.length?w(e,c,t,!1):E(e,c)):w(e,c,t,!1)}else r||(c.reading=!1,E(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function w(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&A(e)),E(e,t)}Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),x.prototype.destroy=t.destroy,x.prototype._undestroy=t.undestroy,x.prototype._destroy=function(e,t){t(e)},x.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=u.from(e,t),t=""),n=!0),_(this,e,t,!1,n)},x.prototype.unshift=function(e){return _(this,e,null,!0,!1)},x.prototype.isPaused=function(){return!1===this._readableState.flowing},x.prototype.setEncoding=function(e){for(var t=new(i=i||j("string_decoder/").StringDecoder)(e),n=(this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding,this._readableState.buffer.head),r="";null!==n;)r+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var T=1073741824;function k(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?(t.flowing&&t.length?t.buffer.head.data:t).length:(e>t.highWaterMark&&(t.highWaterMark=(T<=(n=e)?n=T:(n--,n=(n=(n=(n=(n|=n>>>1)|n>>>2)|n>>>4)|n>>>8)|n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n}function A(e){var t=e._readableState;m("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(m("emitReadable",t.flowing),t.emittedReadable=!0,F.nextTick(M,e))}function M(e){var t=e._readableState;m("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,D(e)}function E(e,t){t.readingMore||(t.readingMore=!0,F.nextTick(S,e,t))}function S(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(m("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function L(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function C(e){m("readable nexttick read 0"),e.read(0)}function O(e,t){m("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),D(e),t.flowing&&!t.reading&&e.read(0)}function D(e){var t=e._readableState;for(m("flow",t.flowing);t.flowing&&null!==e.read(););}function I(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function R(e){var t=e._readableState;m("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,F.nextTick(N,t,e))}function N(e,t){m("endReadableNT",e.endEmitted,e.length),e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy&&(!(e=t._writableState)||e.autoDestroy&&e.finished)&&t.destroy())}function P(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}x.prototype.read=function(e){m("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:0<t.length)||t.ended))return m("read: emitReadable",t.length,t.ended),(0===t.length&&t.ended?R:A)(this),null;if(0===(e=k(e,t))&&t.ended)return 0===t.length&&R(this),null;var r=t.needReadable;return m("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&m("length less than watermark",r=!0),t.ended||t.reading?m("reading or ended",r=!1):r&&(m("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=k(n,t))),null===(r=0<e?I(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&R(this)),null!==r&&this.emit("data",r),r},x.prototype._read=function(e){y(this,new c("_read()"))},x.prototype.pipe=function(n,e){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=n;break;case 1:a.pipes=[a.pipes,n];break;default:a.pipes.push(n)}a.pipesCount+=1,m("pipe count=%d opts=%j",a.pipesCount,e);e=(!e||!1!==e.end)&&n!==F.stdout&&n!==F.stderr?o:p;function i(e,t){m("onunpipe"),e===r&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,m("cleanup"),n.removeListener("close",d),n.removeListener("finish",f),n.removeListener("drain",s),n.removeListener("error",u),n.removeListener("unpipe",i),r.removeListener("end",o),r.removeListener("end",p),r.removeListener("data",c),l=!0,!a.awaitDrain||n._writableState&&!n._writableState.needDrain||s())}function o(){m("onend"),n.end()}a.endEmitted?F.nextTick(e):r.once("end",e),n.on("unpipe",i);t=r;var t,s=function(){var e=t._readableState;m("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&h(t,"data")&&(e.flowing=!0,D(t))},l=(n.on("drain",s),!1);function c(e){m("ondata");e=n.write(e);m("dest.write",e),!1===e&&((1===a.pipesCount&&a.pipes===n||1<a.pipesCount&&-1!==P(a.pipes,n))&&!l&&(m("false write response, pause",a.awaitDrain),a.awaitDrain++),r.pause())}function u(e){m("onerror",e),p(),n.removeListener("error",u),0===h(n,"error")&&y(n,e)}function d(){n.removeListener("finish",f),p()}function f(){m("onfinish"),n.removeListener("close",d),p()}function p(){m("unpipe"),r.unpipe(n)}return r.on("data",c),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(n,"error",u),n.once("close",d),n.once("finish",f),n.emit("pipe",r),a.flowing||(m("pipe resume"),r.resume()),n},x.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0!==t.pipesCount){if(1===t.pipesCount)return e&&e!==t.pipes||(e=e||t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(e){var r=P(t.pipes,e);-1!==r&&(t.pipes.splice(r,1),--t.pipesCount,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n))}else{var a=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)a[o].emit("unpipe",this,{hasUnpiped:!1})}}return this},x.prototype.addListener=x.prototype.on=function(e,t){var t=a.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=0<this.listenerCount("readable"),!1!==n.flowing&&this.resume()):"readable"!==e||n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,m("on readable",n.length,n.reading),n.length?A(this):n.reading||F.nextTick(C,this)),t},x.prototype.removeListener=function(e,t){t=a.prototype.removeListener.call(this,e,t);return"readable"===e&&F.nextTick(L,this),t},x.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||F.nextTick(L,this),t},x.prototype.resume=function(){var e,t,n=this._readableState;return n.flowing||(m("resume"),n.flowing=!n.readableListening,e=this,(t=n).resumeScheduled||(t.resumeScheduled=!0,F.nextTick(O,e,t))),n.paused=!1,this},x.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},x.prototype.wrap=function(t){var e,n=this,r=this._readableState,a=!1;for(e in t.on("end",function(){var e;m("wrapped end"),r.decoder&&!r.ended&&(e=r.decoder.end())&&e.length&&n.push(e),n.push(null)}),t.on("data",function(e){m("wrapped data"),r.decoder&&(e=r.decoder.write(e)),r.objectMode&&null==e||(r.objectMode||e&&e.length)&&!n.push(e)&&(a=!0,t.pause())}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var i=0;i<v.length;i++)t.on(v[i],this.emit.bind(this,v[i]));return this._read=function(e){m("wrapped _read",e),a&&(a=!1,t.resume())},this},"function"==typeof Symbol&&(x.prototype[Symbol.asyncIterator]=function(){return(e=void 0===e?j("./internal/streams/async_iterator"):e)(this)}),Object.defineProperty(x.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(x.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(x.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),x._fromList=I,Object.defineProperty(x.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(x.from=function(e,t){return(n=void 0===n?j("./internal/streams/from"):n)(x,e,t)})}.call(this)}.call(this,j("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":101,"./_stream_duplex":102,"./internal/streams/async_iterator":107,"./internal/streams/buffer_list":108,"./internal/streams/destroy":109,"./internal/streams/from":111,"./internal/streams/state":113,"./internal/streams/stream":114,_process:98,buffer:28,events:27,inherits:67,"string_decoder/":115,util:26}],105:[function(e,t,n){"use strict";t.exports=l;var t=e("../errors").codes,r=t.ERR_METHOD_NOT_IMPLEMENTED,a=t.ERR_MULTIPLE_CALLBACK,i=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=t.ERR_TRANSFORM_WITH_LENGTH_0,s=e("./_stream_duplex");function l(e){if(!(this instanceof l))return new l(e);s.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState,r=(n.transforming=!1,n.writecb);if(null===r)return this.emit("error",new a);n.writechunk=null,(n.writecb=null)!=t&&this.push(t),r(e),(n=this._readableState).reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",c)}function c(){var n=this;"function"!=typeof this._flush||this._readableState.destroyed?u(this,null,null):this._flush(function(e,t){u(n,e,t)})}function u(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new o;if(e._transformState.transforming)throw new i;e.push(null)}e("inherits")(l,s),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new r("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;r.writecb=n,r.writechunk=e,r.writeencoding=t,r.transforming||(n=this._readableState,(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark))},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){s.prototype._destroy.call(this,e,function(e){t(e)})}},{"../errors":101,"./_stream_duplex":102,inherits:67}],106:[function(C,O,e){!function(S,L){!function(){"use strict";function d(i){var o=this;this.next=null,this.entry=null,this.finish=function(){var e=o,t=i,n=void 0,r=e.entry;for(e.entry=null;r;){var a=r.callback;t.pendingcb--,a(n),r=r.next}t.corkedRequestsFree.next=e}}(O.exports=_).WritableState=x;var n,e={deprecate:C("util-deprecate")},r=C("./internal/streams/stream"),f=C("buffer").Buffer,p=L.Uint8Array||function(){};var a,t=C("./internal/streams/destroy"),i=C("./internal/streams/state").getHighWaterMark,o=C("../errors").codes,h=o.ERR_INVALID_ARG_TYPE,s=o.ERR_METHOD_NOT_IMPLEMENTED,m=o.ERR_MULTIPLE_CALLBACK,l=o.ERR_STREAM_CANNOT_PIPE,c=o.ERR_STREAM_DESTROYED,g=o.ERR_STREAM_NULL_VALUES,y=o.ERR_STREAM_WRITE_AFTER_END,u=o.ERR_UNKNOWN_ENCODING,v=t.errorOrDestroy;function b(){}function x(e,u,t){n=n||C("./_stream_duplex"),e=e||{},"boolean"!=typeof t&&(t=u instanceof n),this.objectMode=!!e.objectMode,t&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=i(this,e,"writableHighWaterMark",t),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;t=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!t,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){var t=u,n=t._writableState,r=n.sync,a=n.writecb;if("function"!=typeof a)throw new m;var i,o,s,l,c=n;c.writing=!1,c.writecb=null,c.length-=c.writelen,c.writelen=0,e?(c=t,o=r,s=e,l=a,--(i=n).pendingcb,o?(S.nextTick(l,s),S.nextTick(E,c,i),c._writableState.errorEmitted=!0,v(c,s)):(l(s),c._writableState.errorEmitted=!0,v(c,s),E(c,i))):((e=A(n)||t.destroyed)||n.corked||n.bufferProcessing||!n.bufferedRequest||k(t,n),r?S.nextTick(T,t,n,e,a):T(t,n,e,a))},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new d(this)}C("inherits")(_,r),x.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};try{Object.defineProperty(x.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}function _(e){var t=this instanceof(n=n||C("./_stream_duplex"));if(!t&&!a.call(_,this))return new _(e);this._writableState=new x(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),r.call(this)}function w(e,t,n,r,a,i,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new c("write")):n?e._writev(a,t.onwrite):e._write(a,i,t.onwrite),t.sync=!1}function T(e,t,n,r){var a;n||(n=e,0===(a=t).length&&a.needDrain&&(a.needDrain=!1,n.emit("drain"))),t.pendingcb--,r(),E(e,t)}function k(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){for(var r=t.bufferedRequestCount,a=new Array(r),r=t.corkedRequestsFree,i=(r.entry=n,0),o=!0;n;)(a[i]=n).isBuf||(o=!1),n=n.next,i+=1;a.allBuffers=o,w(e,t,!0,t.length,a,"",r.finish),t.pendingcb++,t.lastBufferedRequest=null,r.next?(t.corkedRequestsFree=r.next,r.next=null):t.corkedRequestsFree=new d(t),t.bufferedRequestCount=0}else{for(;n;){var s=n.chunk,l=n.encoding,c=n.callback;if(w(e,t,!1,t.objectMode?1:s.length,s,l,c),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function A(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function M(t,n){t._final(function(e){n.pendingcb--,e&&v(t,e),n.prefinished=!0,t.emit("prefinish"),E(t,n)})}function E(e,t){var n,r,a=A(t);return a&&(n=e,(r=t).prefinished||r.finalCalled||("function"!=typeof n._final||r.destroyed?(r.prefinished=!0,n.emit("prefinish")):(r.pendingcb++,r.finalCalled=!0,S.nextTick(M,n,r))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy&&(!(n=e._readableState)||n.autoDestroy&&n.endEmitted)&&e.destroy())),a}"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(e){return!!a.call(this,e)||this===_&&(e&&e._writableState instanceof x)}})):a=function(e){return e instanceof this},_.prototype.pipe=function(){v(this,new l)},_.prototype.write=function(e,t,n){var r,a,i,o,s,l,c=this._writableState,u=!1,d=!c.objectMode&&(d=e,f.isBuffer(d)||d instanceof p);return d&&!f.isBuffer(e)&&(o=e,e=f.from(o)),"function"==typeof t&&(n=t,t=null),t=d?"buffer":t||c.defaultEncoding,"function"!=typeof n&&(n=b),c.ending?(o=this,s=n,l=new y,v(o,l),S.nextTick(s,l)):!d&&(s=this,l=c,a=n,null===(r=e)?i=new g:"string"==typeof r||l.objectMode||(i=new h("chunk",["string","Buffer"],r)),i&&(v(s,i),!void S.nextTick(a,i)))||(c.pendingcb++,u=function(e,t,n,r,a,i){n||(o=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,n));return t}(t,r,a),r!==o&&(n=!0,a="buffer",r=o));var o=t.objectMode?1:r.length,s=(t.length+=o,t.length<t.highWaterMark);s||(t.needDrain=!0);{var l;t.writing||t.corked?(l=t.lastBufferedRequest,t.lastBufferedRequest={chunk:r,encoding:a,isBuf:n,callback:i,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1):w(e,t,!1,o,r,a,i)}return s}(this,c,d,e,t,n)),u},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||k(this,e))},_.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase()))return this._writableState.defaultEncoding=e,this;throw new u(e)},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(e,t,n){n(new s("_write()"))},_.prototype._writev=null,_.prototype.end=function(e,t,n){var r=this._writableState;if("function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),!r.ending){e=this,t=r,r=n;t.ending=!0,E(e,t),r&&(t.finished?S.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}return this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),_.prototype.destroy=t.destroy,_.prototype._undestroy=t.undestroy,_.prototype._destroy=function(e,t){t(e)}}.call(this)}.call(this,C("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":101,"./_stream_duplex":102,"./internal/streams/destroy":109,"./internal/streams/state":113,"./internal/streams/stream":114,_process:98,buffer:28,inherits:67,"util-deprecate":122}],107:[function(r,g,e){!function(m){!function(){"use strict";var e;function n(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var a=r("./end-of-stream"),i=Symbol("lastResolve"),o=Symbol("lastReject"),s=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),u=Symbol("handlePromise"),d=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t,n=e[i];null!==n&&null!==(t=e[d].read())&&(e[c]=null,e[i]=null,e[o]=null,n(f(t,!1)))}var t=Object.getPrototypeOf(function(){}),h=Object.setPrototypeOf((n(e={get stream(){return this[d]},next:function(){var n=this,e=this[s];if(null!==e)return Promise.reject(e);if(this[l])return Promise.resolve(f(void 0,!0));if(this[d].destroyed)return new Promise(function(e,t){m.nextTick(function(){n[s]?t(n[s]):e(f(void 0,!0))})});var t,r,a,e=this[c];if(e)t=new Promise((r=e,a=this,function(e,t){r.then(function(){a[l]?e(f(void 0,!0)):a[u](e,t)},t)}));else{e=this[d].read();if(null!==e)return Promise.resolve(f(e,!1));t=new Promise(this[u])}return this[c]=t}},Symbol.asyncIterator,function(){return this}),n(e,"return",function(){var e=this;return new Promise(function(t,n){e[d].destroy(null,function(e){e?n(e):t(f(void 0,!0))})})}),e),t);g.exports=function(e){var t,r=Object.create(h,(n(t={},d,{value:e,writable:!0}),n(t,i,{value:null,writable:!0}),n(t,o,{value:null,writable:!0}),n(t,s,{value:null,writable:!0}),n(t,l,{value:e._readableState.endEmitted,writable:!0}),n(t,u,{value:function(e,t){var n=r[d].read();n?(r[c]=null,r[i]=null,r[o]=null,e(f(n,!1))):(r[i]=e,r[o]=t)},writable:!0}),t));return r[c]=null,a(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code)return null!==(t=r[o])&&(r[c]=null,r[i]=null,r[o]=null,t(e)),void(r[s]=e);var t=r[i];null!==t&&(r[c]=null,r[i]=null,t(f(void 0,!(r[o]=null)))),r[l]=!0}),e.on("readable",function(e){m.nextTick(p,e)}.bind(null,r)),r}}.call(this)}.call(this,r("_process"))},{"./end-of-stream":110,_process:98}],108:[function(e,t,n){"use strict";function i(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function a(r){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach(function(e){var t,n;t=r,n=a[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))})}return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=e("buffer").Buffer,l=e("util").inspect,c=l&&l.custom||"inspect";t.exports=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.head=null,this.tail=null,this.length=0}var t,n,r;return t=e,(n=[{key:"push",value:function(e){e={data:e,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(e){e={data:e,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){var e;if(0!==this.length)return e=this.head.data,1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,n,r=s.allocUnsafe(e>>>0),a=this.head,i=0;a;)t=a.data,n=i,s.prototype.copy.call(t,r,n),i+=a.data.length,a=a.next;return r}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var a=t.data,i=e>a.length?a.length:e;if(i===a.length?r+=a:r+=a.slice(0,e),0===(e-=i)){i===a.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t).data=a.slice(i);break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var a=n.data,i=e>a.length?a.length:e;if(a.copy(t,t.length-e,0,i),0===(e-=i)){i===a.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n).data=a.slice(i);break}++r}return this.length-=r,t}},{key:c,value:function(e,t){return l(this,a({},t,{depth:0,customInspect:!1}))}}])&&o(t.prototype,n),r&&o(t,r),e}()},{buffer:28,util:26}],109:[function(e,t,n){!function(l){!function(){"use strict";function i(e,t){s(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return r||a?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,l.nextTick(s,this,e)):l.nextTick(s,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?n._writableState?n._writableState.errorEmitted?l.nextTick(o,n):(n._writableState.errorEmitted=!0,l.nextTick(i,n,e)):l.nextTick(i,n,e):t?(l.nextTick(o,n),t(e)):l.nextTick(o,n)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}.call(this)}.call(this,e("_process"))},{_process:98}],110:[function(e,t,n){"use strict";var y=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function v(){}t.exports=function e(t,n,r){if("function"==typeof n)return e(t,null,n);function a(){t.writable||i()}function i(){m=!(h=!1),p||r.call(t)}function o(){g=!(p=!1),h||r.call(t)}function s(e){r.call(t,e)}function l(){var e;return p&&!g?(t._readableState&&t._readableState.ended||(e=new y),r.call(t,e)):h&&!m?(t._writableState&&t._writableState.ended||(e=new y),r.call(t,e)):void 0}function c(){t.req.on("finish",i)}u=r||v,d=!1,r=function(){if(!d){d=!0;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];u.apply(this,t)}};var u,d,f,p=(n=n||{}).readable||!1!==n.readable&&t.readable,h=n.writable||!1!==n.writable&&t.writable,m=t._writableState&&t._writableState.finished,g=t._readableState&&t._readableState.endEmitted;return(f=t).setHeader&&"function"==typeof f.abort?(t.on("complete",i),t.on("abort",l),t.req?c():t.on("request",c)):h&&!t._writableState&&(t.on("end",a),t.on("close",a)),t.on("end",o),t.on("finish",i),!1!==n.error&&t.on("error",s),t.on("close",l),function(){t.removeListener("complete",i),t.removeListener("abort",l),t.removeListener("request",c),t.req&&t.req.removeListener("finish",i),t.removeListener("end",a),t.removeListener("close",a),t.removeListener("finish",i),t.removeListener("end",o),t.removeListener("error",s),t.removeListener("close",l)}}},{"../../../errors":101}],111:[function(e,t,n){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],112:[function(l,e,t){"use strict";var c;var n=l("../../../errors").codes,s=n.ERR_MISSING_ARGS,u=n.ERR_STREAM_DESTROYED;function d(e){if(e)throw e}function f(n,e,t,r){a=r,i=!1;var a,i,o=!(r=function(){i||(i=!0,a.apply(void 0,arguments))}),s=(n.on("close",function(){o=!0}),(c=void 0===c?l("./end-of-stream"):c)(n,{readable:e,writable:t},function(e){if(e)return r(e);o=!0,r()}),!1);return function(e){var t;if(!o&&!s)return s=!0,(t=n).setHeader&&"function"==typeof t.abort?n.abort():"function"==typeof n.destroy?n.destroy():void r(e||new u("pipe"))}}function p(e){e()}function h(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var n,a,i=!(n=r).length||"function"!=typeof n[n.length-1]?d:n.pop();if((r=Array.isArray(r[0])?r[0]:r).length<2)throw new s("streams");var o=r.map(function(e,t){var n=t<r.length-1;return f(e,n,0<t,function(e){a=a||e,e&&o.forEach(p),n||(o.forEach(p),i(a))})});return r.reduce(h)}},{"../../../errors":101,"./end-of-stream":110}],113:[function(e,t,n){"use strict";var o=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,n,r){i=r,a=n;var a,i=null!=(t=t).highWaterMark?t.highWaterMark:i?t[a]:null;if(null==i)return e.objectMode?16:16384;if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new o(r?n:"highWaterMark",i);return Math.floor(i)}}},{"../../../errors":101}],114:[function(e,t,n){t.exports=e("events").EventEmitter},{events:27}],115:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,a=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"==typeof t||r.isEncoding!==a&&a(e))return t||e;throw new Error("Unknown encoding: "+e)}function o(e){var t;switch(this.encoding=i(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=l,t=4;break;case"base64":this.text=d,this.end=f,t=3;break;default:return this.write=p,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function l(e){var t,n=this.lastTotal-this.lastNeed,r=(t=this,128!=(192&(r=e)[0])?(t.lastNeed=0,""):1<t.lastNeed&&1<r.length?128!=(192&r[1])?(t.lastNeed=1,""):2<t.lastNeed&&2<r.length&&128!=(192&r[2])?(t.lastNeed=2,""):void 0:void 0);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,n,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,n,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);t=e.toString("utf16le",t);if(t){var n=t.charCodeAt(t.length-1);if(55296<=n&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}function u(e){var t,e=e&&e.length?this.write(e):"";return this.lastNeed?(t=this.lastTotal-this.lastNeed,e+this.lastChar.toString("utf16le",0,t)):e}function d(e,t){var n=(e.length-t)%3;return 0==n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function f(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}(n.StringDecoder=o).prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+"":e},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(!(r<n)){var a=s(t[r]);if(0<=a)return 0<a&&(e.lastNeed=a-1),a;if(!(--r<n||-2===a)){if(0<=(a=s(t[r])))return 0<a&&(e.lastNeed=a-2),a;if(!(--r<n||-2===a)&&0<=(a=s(t[r])))return 0<a&&(2===a?a=0:e.lastNeed=a-3),a}}return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;n=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":99}],116:[function(t,y,e){!function(e,g){!function(){var n=t("assert"),o=t("debug")("stream-parser"),s=(y.exports=function(e){var t=e&&"function"==typeof e._transform,n=e&&"function"==typeof e._write;if(!t&&!n)throw new Error("must pass a Writable or Transform stream in");o("extending Parser into stream"),e._bytes=i,e._skipBytes=u,t&&(e._passthrough=d);t?e._transform=p:e._write=f},-1),l=0,r=1,c=2;function a(e){o("initializing parser stream"),e._parserBytesLeft=0,e._parserBuffers=[],e._parserBuffered=0,e._parserState=s,e._parserCallback=null,"function"==typeof e.push&&(e._parserOutput=e.push.bind(e)),e._parserInit=!0}function i(e,t){n(!this._parserCallback,'there is already a "callback" set!'),n(isFinite(e)&&0<e,'can only buffer a finite number of bytes > 0, got "'+e+'"'),this._parserInit||a(this),o("buffering %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=l}function u(e,t){n(!this._parserCallback,'there is already a "callback" set!'),n(0<e,'can only skip > 0 bytes, got "'+e+'"'),this._parserInit||a(this),o("skipping %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=r}function d(e,t){n(!this._parserCallback,'There is already a "callback" set!'),n(0<e,'can only pass through > 0 bytes, got "'+e+'"'),this._parserInit||a(this),o("passing through %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=c}function f(e,t,n){this._parserInit||a(this),o("write(%o bytes)",e.length),h(this,e,null,n="function"==typeof t?t:n)}function p(e,t,n){this._parserInit||a(this),o("transform(%o bytes)",e.length),"function"!=typeof t&&(t=this._parserOutput),h(this,e,t,n)}function e(e,t,n,r){if(e._parserBytesLeft-=t.length,o("%o bytes left for stream piece",e._parserBytesLeft),e._parserState===l?(e._parserBuffers.push(t),e._parserBuffered+=t.length):e._parserState===c&&n(t),0!==e._parserBytesLeft)return r;var a=e._parserCallback;if(a&&e._parserState===l&&1<e._parserBuffers.length&&(t=g.concat(e._parserBuffers,e._parserBuffered)),e._parserState!==l&&(t=null),e._parserCallback=null,e._parserBuffered=0,e._parserState=s,e._parserBuffers.splice(0),a){var i=[],t=(t&&i.push(t),n&&i.push(n),a.length>i.length),n=(t&&i.push(m(r)),a.apply(e,i));if(!t||r===n)return r}}var h=m(function n(r,a,i,o){return r._parserBytesLeft<=0?o(new Error("got data but not currently parsing anything")):a.length<=r._parserBytesLeft?function(){return e(r,a,i,o)}:function(){var t=a.slice(0,r._parserBytesLeft);return e(r,t,i,function(e){return e?o(e):a.length>t.length?function(){return n(r,a.slice(t.length),i,o)}:void 0})}});function m(t){return function(){for(var e=t.apply(this,arguments);"function"==typeof e;)e=e();return e}}}.call(this)}.call(this,t("_process"),t("buffer").Buffer)},{_process:98,assert:21,buffer:28,debug:117}],117:[function(n,r,a){!function(t){!function(){function e(){var e;try{e=a.storage.debug}catch(e){}return e=!e&&void 0!==t&&"env"in t?t.env.DEBUG:e}(a=r.exports=n("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},a.formatArgs=function(e){var t,n,r=this.useColors;e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+a.humanize(this.diff),r&&(r="color: "+this.color,e.splice(1,0,r,"color: inherit"),e[n=t=0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(t++,"%c"===e&&(n=t))}),e.splice(n,0,r))},a.save=function(e){try{null==e?a.storage.removeItem("debug"):a.storage.debug=e}catch(e){}},a.load=e,a.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},a.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),a.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],a.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},a.enable(e())}.call(this)}.call(this,n("_process"))},{"./debug":118,_process:98}],118:[function(e,t,s){var l;function n(e){function o(){if(o.enabled){for(var r=o,e=+new Date,t=e-(l||e),a=(r.diff=t,r.prev=l,r.curr=e,l=e,new Array(arguments.length)),n=0;n<a.length;n++)a[n]=arguments[n];a[0]=s.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var i=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(e,t){var n;return"%%"!==e&&(i++,"function"==typeof(t=s.formatters[t])&&(n=a[i],e=t.call(r,n),a.splice(i,1),i--)),e}),s.formatArgs.call(r,a),(o.log||s.log||console.log.bind(console)).apply(r,a)}}return o.namespace=e,o.enabled=s.enabled(e),o.useColors=s.useColors(),o.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return s.colors[Math.abs(n)%s.colors.length]}(e),"function"==typeof s.init&&s.init(o),o}(s=t.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},s.disable=function(){s.enable("")},s.enable=function(e){s.save(e),s.names=[],s.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),n=t.length,r=0;r<n;r++)t[r]&&("-"===(e=t[r].replace(/\*/g,".*?"))[0]?s.skips.push(new RegExp("^"+e.substr(1)+"$")):s.names.push(new RegExp("^"+e+"$")))},s.enabled=function(e){var t,n;for(t=0,n=s.skips.length;t<n;t++)if(s.skips[t].test(e))return!1;for(t=0,n=s.names.length;t<n;t++)if(s.names[t].test(e))return!0;return!1},s.humanize=e("ms"),s.names=[],s.skips=[],s.formatters={}},{ms:119}],119:[function(e,t,n){function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){t=t||{};var n=typeof e;if(!("string"==n&&0<e.length)){if("number"==n&&!1===isNaN(e))if(t.long)return a(n=e,864e5,"day")||a(n,36e5,"hour")||a(n,6e4,"minute")||a(n,1e3,"second")||n+" ms";else{t=e;return 864e5<=t?Math.round(t/864e5)+"d":36e5<=t?Math.round(t/36e5)+"h":6e4<=t?Math.round(t/6e4)+"m":1e3<=t?Math.round(t/1e3)+"s":t+"ms"}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}n=e;if(!(100<(n=String(n)).length)){n=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(n);if(n){var r=parseFloat(n[1]);switch((n[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return 864e5*r;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*r;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*r;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}},{}],120:[function(l,e,c){!function(n,s){!function(){var r=l("process/browser.js").nextTick,e=Function.prototype.apply,a=Array.prototype.slice,i={},o=0;function t(e,t){this._id=e,this._clearFn=t}c.setTimeout=function(){return new t(e.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new t(e.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(e){e.close()},t.prototype.unref=t.prototype.ref=function(){},t.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},c.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},c._unrefActive=c.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},c.setImmediate="function"==typeof n?n:function(e){var t=o++,n=!(arguments.length<2)&&a.call(arguments,1);return i[t]=!0,r(function(){i[t]&&(n?e.apply(null,n):e.call(null),c.clearImmediate(t))}),t},c.clearImmediate="function"==typeof s?s:function(e){delete i[e]}}.call(this)}.call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":98,timers:120}],121:[function(N,e,F){function u(e,t){if(t=t||{},(e=e||"")instanceof u)return e;if(!(this instanceof u))return new u(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,a=null,i=null,o=!1,s=!1;"string"==typeof e&&(e=function(e){e=e.replace(T,"").replace(k,"").toLowerCase();var t,n=!1;if(C[e])e=C[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=P.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=P.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=P.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=P.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=P.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=P.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=P.hex8.exec(e))return{r:g(t[1]),g:g(t[2]),b:g(t[3]),a:x(t[4]),format:n?"name":"hex8"};if(t=P.hex6.exec(e))return{r:g(t[1]),g:g(t[2]),b:g(t[3]),format:n?"name":"hex"};if(t=P.hex4.exec(e))return{r:g(t[1]+""+t[1]),g:g(t[2]+""+t[2]),b:g(t[3]+""+t[3]),a:x(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=P.hex3.exec(e))return{r:g(t[1]+""+t[1]),g:g(t[2]+""+t[2]),b:g(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(_(e.r)&&_(e.g)&&_(e.b)?(t=function(e,t,n){return{r:255*h(e,255),g:255*h(t,255),b:255*h(n,255)}}(e.r,e.g,e.b),o=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):_(e.h)&&_(e.s)&&_(e.v)?(r=v(e.s),a=v(e.v),t=function(e,t,n){e=6*h(e,360),t=h(t,100),n=h(n,100);var r=w.floor(e),e=e-r,a=n*(1-t),i=n*(1-e*t),e=n*(1-(1-e)*t),t=r%6;return{r:255*[n,i,a,a,e,n][t],g:255*[e,n,n,i,a,a][t],b:255*[a,a,e,n,n,i][t]}}(e.h,r,a),o=!0,s="hsv"):_(e.h)&&_(e.s)&&_(e.l)&&(r=v(e.s),i=v(e.l),t=function(e,t,n){var r,a,i;function o(e,t,n){return n<0&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}e=h(e,360),t=h(t,100),n=h(n,100),0===t?r=a=i=n:(r=o(t=2*n-(n=n<.5?n*(1+t):n+t-n*t),n,e+1/3),a=o(t,n,e),i=o(t,n,e-1/3));return{r:255*r,g:255*a,b:255*i}}(e.h,r,i),o=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a));return n=p(n),{ok:o,format:e.format||s,r:E(255,S(t.r,0)),g:E(255,S(t.g,0)),b:E(255,S(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=M(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=M(this._r)),this._g<1&&(this._g=M(this._g)),this._b<1&&(this._b=M(this._b)),this._ok=n.ok,this._tc_id=A++}function r(e,t,n){e=h(e,255),t=h(t,255),n=h(n,255);var r,a=S(e,t,n),i=E(e,t,n),o=(a+i)/2;if(a==i)r=l=0;else{var s=a-i,l=.5<o?s/(2-a-i):s/(a+i);switch(a){case e:r=(t-n)/s+(t<n?6:0);break;case t:r=(n-e)/s+2;break;case n:r=(e-t)/s+4}r/=6}return{h:r,s:l,l:o}}function a(e,t,n){e=h(e,255),t=h(t,255),n=h(n,255);var r,a=S(e,t,n),i=E(e,t,n),o=a,s=a-i,l=0===a?0:s/a;if(a==i)r=0;else{switch(a){case e:r=(t-n)/s+(t<n?6:0);break;case t:r=(n-e)/s+2;break;case n:r=(e-t)/s+4}r/=6}return{h:r,s:l,v:o}}function t(e,t,n,r){e=[y(M(e).toString(16)),y(M(t).toString(16)),y(M(n).toString(16))];return r&&e[0].charAt(0)==e[0].charAt(1)&&e[1].charAt(0)==e[1].charAt(1)&&e[2].charAt(0)==e[2].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")}function i(e,t,n,r){return[y(b(r)),y(M(e).toString(16)),y(M(t).toString(16)),y(M(n).toString(16))].join("")}function n(e,t){t=0===t?0:t||10;e=u(e).toHsl();return e.s-=t/100,e.s=m(e.s),u(e)}function o(e,t){t=0===t?0:t||10;e=u(e).toHsl();return e.s+=t/100,e.s=m(e.s),u(e)}function s(e){return u(e).desaturate(100)}function l(e,t){t=0===t?0:t||10;e=u(e).toHsl();return e.l+=t/100,e.l=m(e.l),u(e)}function c(e,t){t=0===t?0:t||10;e=u(e).toRgb();return e.r=S(0,E(255,e.r-M(-t/100*255))),e.g=S(0,E(255,e.g-M(-t/100*255))),e.b=S(0,E(255,e.b-M(-t/100*255))),u(e)}function d(e,t){t=0===t?0:t||10;e=u(e).toHsl();return e.l-=t/100,e.l=m(e.l),u(e)}function f(e,t){e=u(e).toHsl(),t=(e.h+t)%360;return e.h=t<0?360+t:t,u(e)}function z(e){e=u(e).toHsl();return e.h=(e.h+180)%360,u(e)}function j(e){var t=u(e).toHsl(),n=t.h;return[u(e),u({h:(n+120)%360,s:t.s,l:t.l}),u({h:(n+240)%360,s:t.s,l:t.l})]}function q(e){var t=u(e).toHsl(),n=t.h;return[u(e),u({h:(n+90)%360,s:t.s,l:t.l}),u({h:(n+180)%360,s:t.s,l:t.l}),u({h:(n+270)%360,s:t.s,l:t.l})]}function H(e){var t=u(e).toHsl(),n=t.h;return[u(e),u({h:(n+72)%360,s:t.s,l:t.l}),u({h:(n+216)%360,s:t.s,l:t.l})]}function B(e,t,n){t=t||6,n=n||30;var r=u(e).toHsl(),a=360/n,i=[u(e)];for(r.h=(r.h-(a*t>>1)+720)%360;--t;)r.h=(r.h+a)%360,i.push(u(r));return i}function U(e,t){t=t||6;for(var e=u(e).toHsv(),n=e.h,r=e.s,a=e.v,i=[],o=1/t;t--;)i.push(u({h:n,s:r,v:a})),a=(a+o)%1;return i}function p(e){return e=parseFloat(e),e=isNaN(e)||e<0||1<e?1:e}function h(e,t){"string"==typeof(n=e)&&-1!=n.indexOf(".")&&1===parseFloat(n)&&(e="100%");var n="string"==typeof(n=e)&&-1!=n.indexOf("%");return e=E(t,S(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),w.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function m(e){return E(1,S(0,e))}function g(e){return parseInt(e,16)}function y(e){return 1==e.length?"0"+e:""+e}function v(e){return e=e<=1?100*e+"%":e}function b(e){return w.round(255*parseFloat(e)).toString(16)}function x(e){return g(e)/255}function _(e){return P.CSS_UNIT.exec(e)}var w,T,k,A,M,E,S,L,C,O,D,I,R,P;w=Math,T=/^\s+/,k=/\s+$/,A=0,M=w.round,E=w.min,S=w.max,L=w.random,u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,e=e.b/255,t=t<=.03928?t/12.92:w.pow((.055+t)/1.055,2.4),n=n<=.03928?n/12.92:w.pow((.055+n)/1.055,2.4),e=e<=.03928?e/12.92:w.pow((.055+e)/1.055,2.4);return.2126*t+.7152*n+.0722*e},setAlpha:function(e){return this._a=p(e),this._roundA=M(100*this._a)/100,this},toHsv:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=a(this._r,this._g,this._b),t=M(360*e.h),n=M(100*e.s),e=M(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+e+"%)":"hsva("+t+", "+n+"%, "+e+"%, "+this._roundA+")"},toHsl:function(){var e=r(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=r(this._r,this._g,this._b),t=M(360*e.h),n=M(100*e.s),e=M(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+e+"%)":"hsla("+t+", "+n+"%, "+e+"%, "+this._roundA+")"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){var t=this._r,n=this._g,r=this._b,a=this._a;return t=[y(M(t).toString(16)),y(M(n).toString(16)),y(M(r).toString(16)),y(b(a))],e&&t[0].charAt(0)==t[0].charAt(1)&&t[1].charAt(0)==t[1].charAt(1)&&t[2].charAt(0)==t[2].charAt(1)&&t[3].charAt(0)==t[3].charAt(1)?t[0].charAt(0)+t[1].charAt(0)+t[2].charAt(0)+t[3].charAt(0):t.join("")},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:M(this._r),g:M(this._g),b:M(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+M(this._r)+", "+M(this._g)+", "+M(this._b)+")":"rgba("+M(this._r)+", "+M(this._g)+", "+M(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:M(100*h(this._r,255))+"%",g:M(100*h(this._g,255))+"%",b:M(100*h(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+M(100*h(this._r,255))+"%, "+M(100*h(this._g,255))+"%, "+M(100*h(this._b,255))+"%)":"rgba("+M(100*h(this._r,255))+"%, "+M(100*h(this._g,255))+"%, "+M(100*h(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&O[t(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+i(this._r,this._g,this._b,this._a),n=t;return"progid:DXImageTransform.Microsoft.gradient("+(this._gradientType?"GradientType = 1, ":"")+"startColorstr="+t+",endColorstr="+(n=e?"#"+i((t=u(e))._r,t._g,t._b,t._a):n)+")"},toString:function(e){var t=!!e,n=(e=e||this._format,!1),r=this._a<1&&0<=this._a;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),(n="hsv"===e?this.toHsvString():n)||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return u(this.toString())},_applyModification:function(e,t){e=e.apply(null,[this].concat([].slice.call(t)));return this._r=e._r,this._g=e._g,this._b=e._b,this.setAlpha(e._a),this},lighten:function(){return this._applyModification(l,arguments)},brighten:function(){return this._applyModification(c,arguments)},darken:function(){return this._applyModification(d,arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(o,arguments)},greyscale:function(){return this._applyModification(s,arguments)},spin:function(){return this._applyModification(f,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(B,arguments)},complement:function(){return this._applyCombination(z,arguments)},monochromatic:function(){return this._applyCombination(U,arguments)},splitcomplement:function(){return this._applyCombination(H,arguments)},triad:function(){return this._applyCombination(j,arguments)},tetrad:function(){return this._applyCombination(q,arguments)}},u.fromRatio=function(e,t){if("object"==typeof e){var n,r={};for(n in e)e.hasOwnProperty(n)&&(r[n]="a"===n?e[n]:v(e[n]));e=r}return u(e,t)},u.equals=function(e,t){return!(!e||!t)&&u(e).toRgbString()==u(t).toRgbString()},u.random=function(){return u.fromRatio({r:L(),g:L(),b:L()})},u.mix=function(e,t,n){n=0===n?0:n||50;e=u(e).toRgb(),t=u(t).toRgb(),n/=100;return u({r:(t.r-e.r)*n+e.r,g:(t.g-e.g)*n+e.g,b:(t.b-e.b)*n+e.b,a:(t.a-e.a)*n+e.a})},u.readability=function(e,t){e=u(e),t=u(t);return(w.max(e.getLuminance(),t.getLuminance())+.05)/(w.min(e.getLuminance(),t.getLuminance())+.05)},u.isReadable=function(e,t,n){var r=u.readability(e,t),a=!1,e=function(e){var t;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),e=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==e&&"large"!==e&&(e="small");return{level:t,size:e}}(n);switch(e.level+e.size){case"AAsmall":case"AAAlarge":a=4.5<=r;break;case"AAlarge":a=3<=r;break;case"AAAsmall":a=7<=r}return a},u.mostReadable=function(e,t,n){for(var r,a=null,i=0,o=(n=n||{}).includeFallbackColors,s=n.level,l=n.size,c=0;c<t.length;c++)i<(r=u.readability(e,t[c]))&&(i=r,a=u(t[c]));return u.isReadable(e,a,{level:s,size:l})||!o?a:(n.includeFallbackColors=!1,u.mostReadable(e,["#fff","#000"],n))},C=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O=u.hexNames=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[e[t]]=t);return n}(C),I="[\\s|\\(]+("+(D="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",R="[\\s|\\(]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")[,|\\s]+("+D+")\\s*\\)?",P={CSS_UNIT:new RegExp(D),rgb:new RegExp("rgb"+I),rgba:new RegExp("rgba"+R),hsl:new RegExp("hsl"+I),hsla:new RegExp("hsla"+R),hsv:new RegExp("hsv"+I),hsva:new RegExp("hsva"+R),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/},void 0!==e&&e.exports?e.exports=u:window.tinycolor=u},{}],122:[function(e,n,t){!function(t){!function(){function r(e){try{if(!t.localStorage)return}catch(e){return}e=t.localStorage[e];return null!=e&&"true"===String(e).toLowerCase()}n.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],123:[function(e,t,n){var a=e("../main"),e=e("object-assign"),i=a.instance();function o(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e(o.prototype=new a.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if("string"==typeof e)return(n=e.match(l))?n[0]:"";var n=this._validateYear(e),e=e.month(),r=""+this.toChineseMonth(n,e);return t&&r.length<2&&(r="0"+r),this.isIntercalaryMonth(n,e)&&(r+="i"),r},monthNames:function(e){if("string"==typeof e)return(t=e.match(r))?t[0]:"";var t=this._validateYear(e),e=e.month(),n=["","","","","","","","","","","",""][this.toChineseMonth(t,e)-1];return n=this.isIntercalaryMonth(t,e)?""+n:n},monthNamesShort:function(e){if("string"==typeof e)return(t=e.match(c))?t[0]:"";var t=this._validateYear(e),e=e.month(),n=["","","","","","","","","","","",""][this.toChineseMonth(t,e)-1];return n=this.isIntercalaryMonth(t,e)?""+n:n},parseMonth:function(e,t){e=this._validateYear(e);var n,r=parseInt(t);return isNaN(r)?(""===t[0]&&(n=!0,t=t.substring(1)),""===t[t.length-1]&&(t=t.substring(0,t.length-1)),r=1+["","","","","","","","","","","",""].indexOf(t)):n="i"===(t=t[t.length-1])||"I"===t,this.toMonthIndex(e,r,n)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(e,t){if("number"!=typeof(e=e.year?e.year():e)||e<1888||2111<e)throw t.replace(/\{0\}/,this.local.name);return e},toMonthIndex:function(e,t,n){e=this.intercalaryMonth(e);if(n&&t!==e||t<1||12<t)throw a.local.invalidMonth.replace(/\{0\}/,this.local.name);return!e||!n&&t<=e?t-1:t},toChineseMonth:function(e,t){e.year&&(t=(e=e.year()).month());e=this.intercalaryMonth(e);if(t<0||(e?12:11)<t)throw a.local.invalidMonth.replace(/\{0\}/,this.local.name);return!e||t<e?t+1:t},intercalaryMonth:function(e){return e=this._validateYear(e),f[e-f[0]]>>13},isIntercalaryMonth:function(e,t){e.year&&(t=(e=e.year()).month());e=this.intercalaryMonth(e);return!!e&&e===t},leapYear:function(e){return 0!==this.intercalaryMonth(e)},weekOfYear:function(e,t,n){var r=this._validateYear(e,a.local.invalidyear),r=p[r-p[0]],r=i.newDate(r>>9&4095,r>>5&15,31&r),e=(r.add(4-(r.dayOfWeek()||7),"d"),this.toJD(e,t,n)-r.toJD());return 1+Math.floor(e/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){e.year&&(t=e.month(),e=e.year()),e=this._validateYear(e);e=f[e-f[0]];if((e>>13?12:11)<t)throw a.local.invalidMonth.replace(/\{0\}/,this.local.name);return e&1<<12-t?30:29},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,void 0,n,a.local.invalidDate),r=(e=this._validateYear(r.year()),t=r.month(),n=r.day(),this.isIntercalaryMonth(e,t)),e=function(e,t,n,r,a){var i,o,s,l;if("object"==typeof e)o=e,i=t||{};else{if(!("number"==typeof e&&1888<=e&&e<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof t&&1<=t&&t<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof n&&1<=n&&n<=30))throw new Error("Lunar day outside range 1 - 30");i="object"==typeof r?(s=!1,r):(s=!!r,a||{}),o={year:e,month:t,day:n,isIntercalary:s}}l=o.day-1;var c,u=f[o.year-f[0]],r=u>>13;c=r&&(o.month>r||o.isIntercalary)?o.month:o.month-1;for(var d=0;d<c;d++)l+=u&1<<12-d?30:29;a=p[o.year-p[0]],e=new Date(a>>9&4095,(a>>5&15)-1,(31&a)+l);return i.year=e.getFullYear(),i.month=1+e.getMonth(),i.day=e.getDate(),i}(e,this.toChineseMonth(e,t),n,r);return i.toJD(e.year,e.month,e.day)},fromJD:function(e){var e=i.fromJD(e),e=function(e,t,n,r){var a,i;if("object"==typeof e)a=e,i=t||{};else{if(!("number"==typeof e&&1888<=e&&e<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof t&&1<=t&&t<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof n&&1<=n&&n<=31))throw new Error("Solar day outside range 1 - 31");a={year:e,month:t,day:n},i=r||{}}var o,s,e=p[a.year-p[0]],t=a.year<<9|a.month<<5|a.day,n=(i.year=e<=t?a.year:a.year-1,(e=p[i.year-p[0]])>>9&4095),r=new Date(n,(e>>5&15)-1,31&e),t=new Date(a.year,a.month-1,a.day),l=(o=Math.round((t-r)/864e5),f[i.year-f[0]]);for(s=0;s<13;s++){var c=l&1<<12-s?30:29;if(o<c)break;o-=c}n=l>>13;!n||s<n?(i.isIntercalary=!1,i.month=1+s):(i.isIntercalary=s===n,i.month=s);return i.day=1+o,i}(e.year(),e.month(),e.day()),t=this.toMonthIndex(e.year,e.month,e.isIntercalary);return this.newDate(e.year,t,e.day)},fromString:function(e){var e=e.match(s),t=this._validateYear(+e[1]),n=+e[2],r=!!e[3],n=this.toMonthIndex(t,n,r),r=+e[4];return this.newDate(t,n,r)},add:function(e,t,n){var r=e.year(),a=e.month(),i=this.isIntercalaryMonth(r,a),r=this.toChineseMonth(r,a),a=Object.getPrototypeOf(o.prototype).add.call(this,e,t,n);return"y"===n&&(e=a.year(),t=a.month(),n=this.isIntercalaryMonth(e,r),(i=i&&n?this.toMonthIndex(e,r,!0):this.toMonthIndex(e,r,!1))!==t&&a.month(i)),a}});var s=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,l=/^\d?\d[iI]?/m,r=/^??[]?/m,c=/^??[]?/m,f=(a.calendars.chinese=o,[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548]),p=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":137,"object-assign":73}],124:[function(e,t,n){var r=e("../main");function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(a.prototype=new r.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return(e=t.year()+(t.year()<0?1:0))%4==3||e%4==-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,n){e=this.newDate(e,t,n);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){e=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[e.month()-1]+(13===e.month()&&this.leapYear(e.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){t=this._validate(e,t,n,r.local.invalidDate);return(e=t.year())<0&&e++,t.day()+30*(t.month()-1)+365*(e-1)+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((366+t)/1461))/365)+1,e=(n<=0&&n--,t=Math.floor(e)+.5-this.newDate(n,1,1).toJD(),Math.floor(t/30)+1);return this.newDate(n,e,t-30*(e-1)+1)}}),r.calendars.coptic=a},{"../main":137,"object-assign":73}],125:[function(e,t,n){var a=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new a.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,a.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,a.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,a.local.invalidYear),400},weekOfYear:function(e,t,n){e=this.newDate(e,t,n);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){e=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[e.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,n){return(this._validate(e,t,n,a.local.invalidDate).day()+1)%8},weekDay:function(e,t,n){e=this.dayOfWeek(e,t,n);return 2<=e&&e<=6},extraInfo:function(e,t,n){e=this._validate(e,t,n,a.local.invalidDate);return{century:i[Math.floor((e.year()-1)/100)+1]||""}},toJD:function(e,t,n){var r=this._validate(e,t,n,a.local.invalidDate);return e=r.year()+(r.year()<0?1:0),t=r.month(),(n=r.day())+(1<t?16:0)+(2<t?32*(t-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1,n=(e=(e-=400*(t-1))+(15<e?16:0),Math.floor(e/32)+1);return this.newDate(t<=0?t-1:t,n,e-32*(n-1)+1)}});var i={20:"Fruitbat",21:"Anchovy"};a.calendars.discworld=r},{"../main":137,"object-assign":73}],126:[function(e,t,n){var r=e("../main");function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(a.prototype=new r.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear);return(e=t.year()+(t.year()<0?1:0))%4==3||e%4==-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear||r.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,n){e=this.newDate(e,t,n);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){e=this._validate(e,t,this.minDay,r.local.invalidMonth);return this.daysPerMonth[e.month()-1]+(13===e.month()&&this.leapYear(e.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){t=this._validate(e,t,n,r.local.invalidDate);return(e=t.year())<0&&e++,t.day()+30*(t.month()-1)+365*(e-1)+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((366+t)/1461))/365)+1,e=(n<=0&&n--,t=Math.floor(e)+.5-this.newDate(n,1,1).toJD(),Math.floor(t/30)+1);return this.newDate(n,e,t-30*(e-1)+1)}}),r.calendars.ethiopian=a},{"../main":137,"object-assign":73}],127:[function(e,t,n){var o=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function a(e,t){return e-t*Math.floor(e/t)}e("object-assign")(r.prototype=new o.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear);return this._leapYear(e.year())},_leapYear:function(e){return a(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,o.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,n){e=this.newDate(e,t,n);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,o.local.invalidMonth),12===t&&this.leapYear(e)||8===t&&5===a(this.daysInYear(e),10)?30:9===t&&3===a(this.daysInYear(e),10)?29:this.daysPerMonth[t-1]},weekDay:function(e,t,n){return 6!==this.dayOfWeek(e,t,n)},extraInfo:function(e,t,n){e=this._validate(e,t,n,o.local.invalidDate);return{yearType:(this.leapYear(e)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(e)%10-3]}},toJD:function(e,t,n){var r=this._validate(e,t,n,o.local.invalidDate),r=(e=r.year(),t=r.month(),n=r.day(),e<=0?e+1:e),a=this.jdEpoch+this._delay1(r)+this._delay2(r)+n+1;if(t<7){for(var i=7;i<=this.monthsInYear(e);i++)a+=this.daysInMonth(e,i);for(i=1;i<t;i++)a+=this.daysInMonth(e,i)}else for(i=7;i<t;i++)a+=this.daysInMonth(e,i);return a},_delay1:function(e){e=Math.floor((235*e-234)/19),e=29*e+Math.floor((12084+13753*e)/25920);return a(3*(e+1),7)<3&&e++,e},_delay2:function(e){var t=this._delay1(e-1),n=this._delay1(e);return this._delay1(e+1)-n==356?2:n-t==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var t=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===t?1:t+1,7,1);)t++;for(var n=e<this.toJD(t,1,1)?7:1;e>this.toJD(t,n,this.daysInMonth(t,n));)n++;var r=e-this.toJD(t,n,1)+1;return this.newDate(t,n,r)}}),o.calendars.hebrew=r},{"../main":137,"object-assign":73}],128:[function(e,t,n){var a=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new a.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){return(11*this._validate(e,this.minMonth,this.minDay,a.local.invalidYear).year()+14)%30<11},weekOfYear:function(e,t,n){e=this.newDate(e,t,n);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){e=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[e.month()-1]+(12===e.month()&&this.leapYear(e.year())?1:0)},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,a.local.invalidDate);return e=r.year(),t=r.month(),e=e<=0?e+1:e,(n=r.day())+Math.ceil(29.5*(t-1))+354*(e-1)+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=(t=Math.floor((30*(e-this.jdEpoch)+10646)/10631))<=0?t-1:t,n=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1),e=e-this.toJD(t,n,1)+1;return this.newDate(t,n,e)}}),a.calendars.islamic=r},{"../main":137,"object-assign":73}],129:[function(e,t,n){var a=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new a.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);return(e=t.year()<0?t.year()+1:t.year())%4==0},weekOfYear:function(e,t,n){e=this.newDate(e,t,n);return e.add(4-(e.dayOfWeek()||7),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){e=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[e.month()-1]+(2===e.month()&&this.leapYear(e.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,a.local.invalidDate);return e=r.year(),t=r.month(),n=r.day(),e<0&&e++,t<=2&&(e--,t+=12),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n-1524.5},fromJD:function(e){var e=Math.floor(e+.5)+1524,t=Math.floor((e-122.1)/365.25),n=Math.floor(365.25*t),r=Math.floor((e-n)/30.6001),a=r-Math.floor(r<14?1:13),t=t-Math.floor(2<a?4716:4715),e=e-n-Math.floor(30.6001*r);return t<=0&&t--,this.newDate(t,a,e)}}),a.calendars.julian=r},{"../main":137,"object-assign":73}],130:[function(e,t,n){var r=e("../main");function a(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function i(e,t){return e-t*Math.floor(e/t)}function o(e,t){return i(e-1,t)+1}e("object-assign")(a.prototype=new r.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),!1},formatYear:function(e){e=this._validate(e,this.minMonth,this.minDay,r.local.invalidYear).year();var t=Math.floor(e/400);return e=(e%=400)+(e<0?400:0),t+"."+Math.floor(e/20)+"."+e%20},forYear:function(e){if((e=e.split(".")).length<3)throw"Invalid Mayan year";for(var t=0,n=0;n<e.length;n++){var r=parseInt(e[n],10);if(19<Math.abs(r)||0<n&&r<0)throw"Invalid Mayan year";t=20*t+r}return t},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),18},weekOfYear:function(e,t,n){return this._validate(e,t,n,r.local.invalidDate),0},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,r.local.invalidYear),360},daysInMonth:function(e,t){return this._validate(e,t,this.minDay,r.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,n){return this._validate(e,t,n,r.local.invalidDate).day()},weekDay:function(e,t,n){return this._validate(e,t,n,r.local.invalidDate),!0},extraInfo:function(e,t,n){e=this._validate(e,t,n,r.local.invalidDate).toJD(),t=this._toHaab(e),n=this._toTzolkin(e);return{haabMonthName:this.local.haabMonths[t[0]-1],haabMonth:t[0],haabDay:t[1],tzolkinDayName:this.local.tzolkinMonths[n[0]-1],tzolkinDay:n[0],tzolkinTrecena:n[1]}},_toHaab:function(e){e=i((e-=this.jdEpoch)+8+340,365);return[Math.floor(e/20)+1,i(e,20)]},_toTzolkin:function(e){return[o((e-=this.jdEpoch)+20,20),o(e+4,13)]},toJD:function(e,t,n){e=this._validate(e,t,n,r.local.invalidDate);return e.day()+20*e.month()+360*e.year()+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var t=Math.floor(e/360),n=(e=(e%=360)+(e<0?360:0),Math.floor(e/20));return this.newDate(t,n,e%20)}}),r.calendars.mayan=a},{"../main":137,"object-assign":73}],131:[function(e,t,n){var o=e("../main"),e=e("object-assign");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}r.prototype=new o.baseCalendar;var s=o.instance("gregorian");e(r.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return s.leapYear(e.year()+(e.year()<1?1:0)+1469)},weekOfYear:function(e,t,n){e=this.newDate(e,t,n);return e.add(1-(e.dayOfWeek()||7),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){e=this._validate(e,t,this.minDay,o.local.invalidMonth);return this.daysPerMonth[e.month()-1]+(12===e.month()&&this.leapYear(e.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){for(var r=this._validate(e,t,n,o.local.invalidMonth),a=((e=r.year())<0&&e++,r.day()),i=1;i<r.month();i++)a+=this.daysPerMonth[i-1];return a+s.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var t=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(t+1,1,1);)t++;for(var n=e-Math.floor(this.toJD(t,1,1)+.5)+1,r=1;n>this.daysInMonth(t,r);)n-=this.daysInMonth(t,r),r++;return this.newDate(t,r,n)}}),o.calendars.nanakshahi=r},{"../main":137,"object-assign":73}],132:[function(e,t,n){var s=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new s.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,n){e=this.newDate(e,t,n);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInYear:function(e){if(e=this._validate(e,this.minMonth,this.minDay,s.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[e])return this.daysPerYear;for(var t=0,n=this.minMonth;n<=12;n++)t+=this.NEPALI_CALENDAR_DATA[e][n];return t},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,s.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[e]?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,n){return 6!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,s.local.invalidDate),r=(e=r.year(),t=r.month(),n=r.day(),s.instance()),a=0,i=t,o=e,e=(this._createMissingCalendarData(e),e-(9<i||9===i&&n>=this.NEPALI_CALENDAR_DATA[o][0]?56:57));for(9!==t&&(a=n,i--);9!==i;)i<=0&&(i=12,o--),a+=this.NEPALI_CALENDAR_DATA[o][i],i--;return 9===t?(a+=n-this.NEPALI_CALENDAR_DATA[o][0])<0&&(a+=r.daysInYear(e)):a+=this.NEPALI_CALENDAR_DATA[o][9]-this.NEPALI_CALENDAR_DATA[o][0],r.newDate(e,1,1).add(a,"d").toJD()},fromJD:function(e){for(var e=s.instance().fromJD(e),t=e.year(),n=e.dayOfYear(),r=t+56,a=(this._createMissingCalendarData(r),9),e=this.NEPALI_CALENDAR_DATA[r][0],i=this.NEPALI_CALENDAR_DATA[r][a]-e+1;i<n;)12<++a&&(a=1,r++),i+=this.NEPALI_CALENDAR_DATA[r][a];t=this.NEPALI_CALENDAR_DATA[r][a]-(i-n);return this.newDate(r,a,t)},_createMissingCalendarData:function(e){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var n=e-1;n<e+2;n++)void 0===this.NEPALI_CALENDAR_DATA[n]&&(this.NEPALI_CALENDAR_DATA[n]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),s.calendars.nepali=r},{"../main":137,"object-assign":73}],133:[function(e,t,n){var a=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function i(e,t){return e-t*Math.floor(e/t)}e("object-assign")(r.prototype=new a.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear);return 682*((e.year()-(0<e.year()?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,t,n){e=this.newDate(e,t,n);return e.add(-(e.dayOfWeek()+1)%7,"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){e=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[e.month()-1]+(12===e.month()&&this.leapYear(e.year())?1:0)},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,a.local.invalidDate),r=(e=r.year(),t=r.month(),n=r.day(),e-(0<=e?474:473)),e=474+i(r,2820);return n+(t<=7?31*(t-1):30*(t-1)+6)+Math.floor((682*e-110)/2816)+365*(e-1)+1029983*Math.floor(r/2820)+this.jdEpoch-1},fromJD:function(e){var t=(e=Math.floor(e)+.5)-this.toJD(475,1,1),n=Math.floor(t/1029983),t=i(t,1029983),r=2820;1029982!==t&&(a=Math.floor(t/366),t=i(t,366),r=Math.floor((2134*a+2816*t+2815)/1028522)+a+1);var t=(t=r+2820*n+474)<=0?t-1:t,a=e-this.toJD(t,1,1)+1,r=a<=186?Math.ceil(a/31):Math.ceil((a-6)/30),n=e-this.toJD(t,r,1)+1;return this.newDate(t,r,n)}}),a.calendars.persian=r,a.calendars.jalali=r},{"../main":137,"object-assign":73}],134:[function(e,t,n){var a=e("../main"),e=e("object-assign"),i=a.instance();function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e(r.prototype=new a.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear),e=this._t2gYear(t.year());return i.leapYear(e)},weekOfYear:function(e,t,n){var r=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear),e=this._t2gYear(r.year());return i.weekOfYear(e,r.month(),r.day())},daysInMonth:function(e,t){e=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[e.month()-1]+(2===e.month()&&this.leapYear(e.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){t=this._validate(e,t,n,a.local.invalidDate),e=this._t2gYear(t.year());return i.toJD(e,t.month(),t.day())},fromJD:function(e){var e=i.fromJD(e),t=this._g2tYear(e.year());return this.newDate(t,e.month(),e.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(1<=e&&e<=this.yearsOffset?1:0)}}),a.calendars.taiwan=r},{"../main":137,"object-assign":73}],135:[function(e,t,n){var a=e("../main"),e=e("object-assign"),i=a.instance();function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e(r.prototype=new a.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear),e=this._t2gYear(t.year());return i.leapYear(e)},weekOfYear:function(e,t,n){var r=this._validate(e,this.minMonth,this.minDay,a.local.invalidYear),e=this._t2gYear(r.year());return i.weekOfYear(e,r.month(),r.day())},daysInMonth:function(e,t){e=this._validate(e,t,this.minDay,a.local.invalidMonth);return this.daysPerMonth[e.month()-1]+(2===e.month()&&this.leapYear(e.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){t=this._validate(e,t,n,a.local.invalidDate),e=this._t2gYear(t.year());return i.toJD(e,t.month(),t.day())},fromJD:function(e){var e=i.fromJD(e),t=this._g2tYear(e.year());return this.newDate(t,e.month(),e.day())},_t2gYear:function(e){return e-this.yearsOffset-(1<=e&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),a.calendars.thai=r},{"../main":137,"object-assign":73}],136:[function(e,t,n){var i=e("../main");function r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}e("object-assign")(r.prototype=new i.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,i.local.invalidYear);return 355===this.daysInYear(e.year())},weekOfYear:function(e,t,n){e=this.newDate(e,t,n);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var t=0,n=1;n<=12;n++)t+=this.daysInMonth(e,n);return t},daysInMonth:function(e,t){for(var n=this._validate(e,t,this.minDay,i.local.invalidMonth).toJD()-24e5+.5,r=0,a=0;a<o.length;a++){if(o[a]>n)return o[r]-o[r-1];r++}return 30},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){e=this._validate(e,t,n,i.local.invalidDate),t=12*(e.year()-1)+e.month()-15292;return 24e5+(e.day()+o[t-1]-1)-.5},fromJD:function(e){for(var t=e-24e5+.5,n=0,r=0;r<o.length&&!(o[r]>t);r++)n++;var e=n+15292,a=Math.floor((e-1)/12),i=t-o[n-1]+1;return this.newDate(a+1,e-12*a,i)},isValid:function(e,t,n){return i.baseCalendar.prototype.isValid.apply(this,arguments)&&1276<=(e=null!=e.year?e.year:e)&&e<=1500},_validate:function(e,t,n,r){var a=i.baseCalendar.prototype._validate.apply(this,arguments);if(a.year<1276||1500<a.year)throw r.replace(/\{0\}/,this.local.name);return a}}),i.calendars.ummalqura=r;var o=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":137,"object-assign":73}],137:[function(e,t,n){e=e("object-assign");function r(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function a(e,t,n,r){if(this._calendar=e,this._year=t,this._month=n,this._day=r,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(l.local.invalidDate||l.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function i(e,t){return"000000".substring(0,t-(e=""+e).length)+e}function o(){this.shortYearCutoff="+10"}function s(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}e(r.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase();var n=this._localCals[e+"-"+(t=t||"")];if(!n&&this.calendars[e]&&(n=new this.calendars[e](t),this._localCals[e+"-"+t]=n),n)return n;throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e)},newDate:function(e,t,n,r,a){return(r=(null!=e&&e.year?e.calendar():"string"==typeof r?this.instance(r,a):r)||this.instance()).newDate(e,t,n)},substituteDigits:function(t){return function(e){return(e+"").replace(/[0-9]/g,function(e){return t[e]})}},substituteChineseDigits:function(a,i){return function(e){for(var t="",n=0;0<e;){var r=e%10,t=(0==r?"":a[r]+i[n])+t;n++,e=Math.floor(e/10)}return(t=0===t.indexOf(a[1]+i[1])?t.substr(1):t)||a[0]}}}),e(a.prototype,{newDate:function(e,t,n){return this._calendar.newDate(null==e?this:e,t,n)},year:function(e){return 0===arguments.length?this._year:this.set(e,"y")},month:function(e){return 0===arguments.length?this._month:this.set(e,"m")},day:function(e){return 0===arguments.length?this._day:this.set(e,"d")},date:function(e,t,n){if(this._calendar.isValid(e,t,n))return this._year=e,this._month=t,this._day=n,this;throw(l.local.invalidDate||l.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(l.local.differentCalendars||l.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);e=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return 0==e?0:e<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+i(Math.abs(this.year()),4)+"-"+i(this.month(),2)+"-"+i(this.day(),2)}}),e(o.prototype,{_validateLevel:0,newDate:function(e,t,n){return null==e?this.today():(e.year&&(this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate),n=e.day(),t=e.month(),e=e.year()),new a(this,e,t,n))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){return this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){e=this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return(e.year()<0?"-":"")+i(Math.abs(e.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear),12},monthOfYear:function(e,t){e=this._validate(e,t,this.minDay,l.local.invalidMonth||l.regionalOptions[""].invalidMonth);return(e.month()+this.monthsInYear(e)-this.firstMonth)%this.monthsInYear(e)+this.minMonth},fromMonthOfYear:function(e,t){t=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,t,this.minDay,l.local.invalidMonth||l.regionalOptions[""].invalidMonth),t},daysInYear:function(e){e=this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return this.leapYear(e)?366:365},dayOfYear:function(e,t,n){e=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate);return e.toJD()-this.newDate(e.year(),this.fromMonthOfYear(e.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,n){e=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(e))+2)%this.daysInWeek()},extraInfo:function(e,t,n){return this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate),{}},add:function(e,t,n){return this._validate(e,this.minMonth,this.minDay,l.local.invalidDate||l.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,t,n),t,n)},_add:function(e,t,n){if(this._validateLevel++,"d"===n||"w"===n)return i=e.toJD()+t*("w"===n?this.daysInWeek():1),i=e.calendar().fromJD(i),this._validateLevel--,[i.year(),i.month(),i.day()];try{var r=e.year()+("y"===n?t:0),a=e.monthOfYear()+("m"===n?t:0),i=e.day();if("y"===n)e.month()!==this.fromMonthOfYear(r,a)&&(a=this.newDate(r,e.month(),this.minDay).monthOfYear()),a=Math.min(a,this.monthsInYear(r)),i=Math.min(i,this.daysInMonth(r,this.fromMonthOfYear(r,a)));else if("m"===n){for(var o=this;a<o.minMonth;)r--,a+=o.monthsInYear(r);for(var s=o.monthsInYear(r);a>s-1+o.minMonth;)r++,a-=s,s=o.monthsInYear(r);i=Math.min(i,this.daysInMonth(r,this.fromMonthOfYear(r,a)))}var l=[r,this.fromMonthOfYear(r,a),i];return this._validateLevel--,l}catch(e){throw this._validateLevel--,e}},_correctAdd:function(e,t,n,r){return this.hasYearZero||"y"!==r&&"m"!==r||0!==t[0]&&0<e.year()==0<t[0]||(r={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[r],t=this._add(e,n*r[0]+(n<0?-1:1)*r[1],r[2])),e.date(t[0],t[1],t[2])},set:function(e,t,n){this._validate(e,this.minMonth,this.minDay,l.local.invalidDate||l.regionalOptions[""].invalidDate);var r="y"===n?t:e.year(),a="m"===n?t:e.month(),t="d"===n?t:e.day();return"y"!==n&&"m"!==n||(t=Math.min(t,this.daysInMonth(r,a))),e.date(r,a,t)},isValid:function(e,t,n){this._validateLevel++;var r=this.hasYearZero||0!==e;return r&&(e=this.newDate(e,t,this.minDay),r=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(e)&&n>=this.minDay&&n-this.minDay<this.daysInMonth(e)),this._validateLevel--,r},toJSDate:function(e,t,n){e=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate);return l.instance().fromJD(this.toJD(e)).toJSDate()},fromJSDate:function(e){return this.fromJD(l.instance().fromJSDate(e).toJD())},_validate:function(e,t,n,r){if(e.year){if(0===this._validateLevel&&this.name!==e.calendar().name)throw(l.local.differentCalendars||l.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(e,t,n))throw r.replace(/\{0\}/,this.local.name);var a=this.newDate(e,t,n);return this._validateLevel--,a}catch(e){throw this._validateLevel--,e}}}),e(s.prototype=new o,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return(e=t.year()+(t.year()<0?1:0))%4==0&&(e%100!=0||e%400==0)},weekOfYear:function(e,t,n){e=this.newDate(e,t,n);return e.add(4-(e.dayOfWeek()||7),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){e=this._validate(e,t,this.minDay,l.local.invalidMonth||l.regionalOptions[""].invalidMonth);return this.daysPerMonth[e.month()-1]+(2===e.month()&&this.leapYear(e.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate),r=(e=r.year(),t=r.month(),n=r.day(),e<0&&e++,t<3&&(t+=12,e--),Math.floor(e/100)),r=2-r+Math.floor(r/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+r-1524.5},fromJD:function(e){var e=Math.floor(e+.5),t=Math.floor((e-1867216.25)/36524.25),e=1524+(e+1+t-Math.floor(t/4)),t=Math.floor((e-122.1)/365.25),n=Math.floor(365.25*t),r=Math.floor((e-n)/30.6001),e=e-n-Math.floor(30.6001*r),n=r-(13.5<r?13:1),r=t-(2.5<n?4716:4715);return r<=0&&r--,this.newDate(r,n,e)},toJSDate:function(e,t,n){e=this._validate(e,t,n,l.local.invalidDate||l.regionalOptions[""].invalidDate),t=new Date(e.year(),e.month()-1,e.day());return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.setHours(12<t.getHours()?t.getHours()+2:0),t},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var l=t.exports=new r;l.cdate=a,l.baseCalendar=o,l.calendars.gregorian=s},{"object-assign":73}],138:[function(e,t,n){var r=e("object-assign"),E=e("./main");r(E.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),E.local=E.regionalOptions[""],r(E.cdate.prototype,{formatDate:function(e,t){return"string"!=typeof e&&(t=e,e=""),this._calendar.formatDate(e||"",this,t)}}),r(E.baseCalendar.prototype,{UNIX_EPOCH:E.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:E.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(r,e,t){if("string"!=typeof r&&(t=e,e=r,r=""),!e)return"";if(e.calendar()!==this)throw E.local.invalidFormat||E.regionalOptions[""].invalidFormat;r=r||this.local.dateFormat;for(var n,a,i,o,s=(t=t||{}).dayNamesShort||this.local.dayNamesShort,l=t.dayNames||this.local.dayNames,c=t.monthNumbers||this.local.monthNumbers,u=t.monthNamesShort||this.local.monthNamesShort,d=t.monthNames||this.local.monthNames,f=(t.calculateWeek||this.local.calculateWeek,function(e,t){for(var n=1;b+n<r.length&&r.charAt(b+n)===e;)n++;return b+=n-1,1<Math.floor(n/(t||1))}),p=function(e,t,n,r){var a=""+t;if(f(e,r))for(;a.length<n;)a="0"+a;return a},h=this,m=this.local.digits,g=function(e){return t.localNumbers&&m?m(e):e},y="",v=!1,b=0;b<r.length;b++)if(v)"'"!==r.charAt(b)||f("'")?y+=r.charAt(b):v=!1;else switch(r.charAt(b)){case"d":y+=g(p("d",e.day(),2));break;case"D":y+=(n="D",a=e.dayOfWeek(),i=s,o=l,(f(n)?o:i)[a]);break;case"o":y+=p("o",e.dayOfYear(),3);break;case"w":y+=p("w",e.weekOfYear(),2);break;case"m":y+=(n=e,"function"==typeof c?c.call(h,n,f("m")):g(p("m",n.month(),2)));break;case"M":y+=(o=e,f("M")?"function"==typeof d?d.call(h,o):d[o.month()-h.minMonth]:"function"==typeof u?u.call(h,o):u[o.month()-h.minMonth]);break;case"y":y+=f("y",2)?e.year():(e.year()%100<10?"0":"")+e.year()%100;break;case"Y":f("Y",2),y+=e.formatYear();break;case"J":y+=e.toJD();break;case"@":y+=(e.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":y+=(e.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":f("'")?y+="'":v=!0;break;default:y+=r.charAt(b)}return y},parseDate:function(r,o,e){if(null==o)throw E.local.invalidArguments||E.regionalOptions[""].invalidArguments;if(""===(o="object"==typeof o?o.toString():o+""))return null;r=r||this.local.dateFormat;function t(){if(o.charAt(T)!==r.charAt(k))throw(E.local.unexpectedLiteralAt||E.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,T);T++}for(var n,a="string"!=typeof(a=(e=e||{}).shortYearCutoff||this.shortYearCutoff)?a:this.today().year()%100+parseInt(a,10),i=e.dayNamesShort||this.local.dayNamesShort,s=e.dayNames||this.local.dayNames,l=e.parseMonth||this.local.parseMonth,c=e.monthNumbers||this.local.monthNumbers,u=e.monthNamesShort||this.local.monthNamesShort,d=e.monthNames||this.local.monthNames,f=-1,p=-1,h=-1,m=-1,g=-1,y=!1,v=!1,b=function(e,t){for(var n=1;k+n<r.length&&r.charAt(k+n)===e;)n++;return k+=n-1,1<Math.floor(n/(t||1))},x=function(e,t){t=b(e,t),t=[2,3,t?4:2,t?4:2,10,11,20]["oyYJ@!".indexOf(e)+1],e=new RegExp("^-?\\d{1,"+t+"}"),t=o.substring(T).match(e);if(t)return T+=t[0].length,parseInt(t[0],10);throw(E.local.missingNumberAt||E.regionalOptions[""].missingNumberAt).replace(/\{0\}/,T)},_=this,w=function(e,t,n,r){for(var a=b(e,r)?n:t,i=0;i<a.length;i++)if(o.substr(T,a[i].length).toLowerCase()===a[i].toLowerCase())return T+=a[i].length,i+_.minMonth;throw(E.local.unknownNameAt||E.regionalOptions[""].unknownNameAt).replace(/\{0\}/,T)},T=0,k=0;k<r.length;k++)if(v)"'"!==r.charAt(k)||b("'")?t():v=!1;else switch(r.charAt(k)){case"d":m=x("d");break;case"D":w("D",i,s);break;case"o":g=x("o");break;case"w":x("w");break;case"m":n=void 0,h="function"==typeof c?(b("m"),n=c.call(_,o.substring(T)),T+=n.length,n):x("m");break;case"M":n=void 0,h="function"==typeof d?(n=(b("M")?d:u).call(_,o.substring(T)),T+=n.length,n):w("M",u,d);break;case"y":var A=k,y=!b("y",2),k=A,p=x("y",2);break;case"Y":p=x("Y",2);break;case"J":f=x("J")+.5,"."===o.charAt(T)&&(T++,x("J"));break;case"@":f=x("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":f=x("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":T=o.length;break;case"'":b("'")?t():v=!0;break;default:t()}if(T<o.length)throw E.local.unexpectedText||E.regionalOptions[""].unexpectedText;if(-1===p?p=this.today().year():p<100&&y&&(p+=-1===a?1900:this.today().year()-this.today().year()%100-(p<=a?0:100)),"string"==typeof h&&(h=l.call(this,p,h)),-1<g)for(var h=1,m=g,M=this.daysInMonth(p,h);M<m;M=this.daysInMonth(p,h))h++,m-=M;return-1<f?this.fromJD(f):this.newDate(p,h,m)},determineDate:function(e,t,a,i,o){a&&"object"!=typeof a&&(o=i,i=a,a=null),"string"!=typeof i&&(o=i,i="");var s=this;return t=t?t.newDate():null,e=null==e?t:"string"==typeof e?function(e){try{return s.parseDate(i,e,o)}catch(e){}for(var t=((e=e.toLowerCase()).match(/^c/)&&a?a.newDate():null)||s.today(),n=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,r=n.exec(e);r;)t.add(parseInt(r[1],10),r[2]||"d"),r=n.exec(e);return t}(e):"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?t:s.today().add(e,"d"):s.newDate(e)}})},{"./main":137,"object-assign":73}],139:[function(e,t,n){"use strict";t.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],140:[function(e,t,n){"use strict";var r=e("./arrow_paths"),a=e("../../plots/font_attributes"),i=e("../../plots/cartesian/constants"),o=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects");t.exports=o("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:a({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:r.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",i.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",i.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:a({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":263,"../../plot_api/plot_template":323,"../../plots/cartesian/constants":341,"../../plots/font_attributes":365,"./arrow_paths":139}],141:[function(e,t,n){"use strict";var r=e("../../lib"),h=e("../../plots/cartesian/axes"),a=e("./draw").draw;function i(i){var e=i._fullLayout;r.filterVisible(e.annotations).forEach(function(e){var t=h.getFromId(i,e.xref),n=h.getFromId(i,e.yref),r=h.getRefType(e.xref),a=h.getRefType(e.yref);e._extremes={},"range"===r&&o(e,t),"range"===a&&o(e,n)})}function o(e,t){var n=t._id,r=n.charAt(0),a=e[r],i=e["a"+r],o=e[r+"ref"],s=e["a"+r+"ref"],l=e["_"+r+"padplus"],c=e["_"+r+"padminus"],r={x:1,y:-1}[r]*e[r+"shift"],u=3*e.arrowsize*e.arrowwidth||0,d=u+r,u=u-r,f=3*e.startarrowsize*e.arrowwidth||0,p=f+r,f=f-r;o=s===o?(r=h.findExtremes(t,[t.r2c(a)],{ppadplus:d,ppadminus:u}),s=h.findExtremes(t,[t.r2c(i)],{ppadplus:Math.max(l,p),ppadminus:Math.max(c,f)}),{min:[r.min[0],s.min[0]],max:[r.max[0],s.max[0]]}):(p=i?p+i:p,f=i?f-i:f,h.findExtremes(t,[t.r2c(a)],{ppadplus:Math.max(l,d,p),ppadminus:Math.max(c,u,f)})),e._extremes[n]=o}t.exports=function(e){var t=e._fullLayout;if(r.filterVisible(t.annotations).length&&e._fullData.length)return r.syncOrAsync([a,i],e)}},{"../../lib":287,"../../plots/cartesian/axes":334,"./draw":146}],142:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../../registry"),u=e("../../plot_api/plot_template").arrayEditor;function d(e,t){for(var n,r,a,i,o,s,l=e._fullLayout.annotations,c=[],u=[],d=[],f=(t||[]).length,p=0;p<l.length;p++)if(a=(r=l[p]).clicktoshow){for(n=0;n<f;n++)if(o=(i=t[n]).xaxis,s=i.yaxis,o._id===r.xref&&s._id===r.yref&&o.d2r(i.x)===h(r._xclick,o)&&s.d2r(i.y)===h(r._yclick,s)){(r.visible?"onout"===a?u:d:c).push(p);break}n===f&&r.visible&&"onout"===a&&u.push(p)}return{on:c,off:u,explicitOff:d}}function h(e,t){return"log"===t.type?t.l2r(e):t.d2r(e)}t.exports={hasClickToShow:function(e,t){e=d(e,t);return 0<e.on.length||0<e.explicitOff.length},onClick:function(e,t){var n,r,t=d(e,t),a=t.on,i=t.off.concat(t.explicitOff),o={},s=e._fullLayout.annotations;if(a.length||i.length){for(n=0;n<a.length;n++)(r=u(e.layout,"annotations",s[a[n]])).modifyItem("visible",!0),l.extendFlat(o,r.getUpdateObj());for(n=0;n<i.length;n++)(r=u(e.layout,"annotations",s[i[n]])).modifyItem("visible",!1),l.extendFlat(o,r.getUpdateObj());return c.call("update",e,{},o)}}}},{"../../lib":287,"../../plot_api/plot_template":323,"../../registry":378}],143:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../color");t.exports=function(e,t,n,r){r("opacity");var a=r("bgcolor"),i=r("bordercolor"),i=d.opacity(i),o=(r("borderpad"),r("borderwidth")),s=r("showarrow");r("text",s?" ":n._dfltTitle.annotation),r("textangle"),u.coerceFont(r,"font",n.font),r("width"),r("align");r("height")&&r("valign"),s&&(-1!==(s=r("arrowside")).indexOf("end")&&(c=r("arrowhead"),l=r("arrowsize")),-1!==s.indexOf("start")&&(r("startarrowhead",c),r("startarrowsize",l)),r("arrowcolor",i?t.bordercolor:d.defaultLine),r("arrowwidth",2*(i&&o||1)),r("standoff"),r("startstandoff"));var l,s=r("hovertext"),c=n.hoverlabel||{};s&&(l=r("hoverlabel.bgcolor",c.bgcolor||(d.opacity(a)?d.rgb(a):d.defaultLine)),t=r("hoverlabel.bordercolor",c.bordercolor||d.contrast(l)),u.coerceFont(r,"hoverlabel.font",{family:c.font.family,size:c.font.size,color:c.font.color||t})),r("captureevents",!!s)}},{"../../lib":287,"../color":157}],144:[function(e,t,n){"use strict";var d=e("fast-isnumeric"),f=e("../../lib/to_log_range");t.exports=function(e,r,t,a){r=r||{};var i="log"===t&&"linear"===r.type,t="linear"===t&&"log"===r.type;if(i||t)for(var o,s,n=e._fullLayout.annotations,l=r._id.charAt(0),c=0;c<n.length;c++)o=n[c],s="annotations["+c+"].",o[l+"ref"]===r._id&&u(l),o["a"+l+"ref"]===r._id&&u("a"+l);function u(e){var t=o[e],n=null,n=i?f(t,r.range):Math.pow(10,t);d(n)||(n=null),a(s+e,n)}}},{"../../lib/to_log_range":312,"fast-isnumeric":33}],145:[function(e,t,n){"use strict";var m=e("../../lib"),g=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),y=e("./common_defaults"),v=e("./attributes");function a(n,r,e){function t(e,t){return m.coerce(n,r,v,e,t)}var a=t("visible"),i=t("clicktoshow");if(a||i){y(n,r,e,t);for(var o=r.showarrow,s=["x","y"],l=[-10,-30],c={_fullLayout:e},u=0;u<2;u++){var d,f,p=s[u],h=g.coerceRef(n,r,c,p,"","paper");"paper"!==h&&g.getFromId(c,h)._annIndices.push(r._index),g.coercePosition(r,c,t,h,p,.5),o&&(h="pixel"===(f="pixel"!==(f=g.coerceRef(n,r,c,d="a"+p,"pixel",["pixel","paper"]))&&f!==h?r[d]="pixel":f)?l[u]:.4,g.coercePosition(r,c,t,f,d,h)),t(p+"anchor"),t(p+"shift")}m.noneOrAll(n,r,["x","y"]),o&&m.noneOrAll(n,r,["ax","ay"]),i&&(a=t("xclick"),e=t("yclick"),r._xclick=void 0===a?r.x:g.cleanPosition(a,c,r.xref),r._yclick=void 0===e?r.y:g.cleanPosition(e,c,r.yref))}}t.exports=function(e,t){r(e,t,{name:"annotations",handleItemDefaults:a})}},{"../../lib":287,"../../plots/array_container_defaults":329,"../../plots/cartesian/axes":334,"./attributes":140,"./common_defaults":143}],146:[function(e,t,n){"use strict";var o=e("@plotly/d3"),re=e("../../registry"),r=e("../../plots/plots"),ae=e("../../lib"),ie=ae.strTranslate,oe=e("../../plots/cartesian/axes"),se=e("../color"),le=e("../drawing"),s=e("../fx"),ce=e("../../lib/svg_text_utils"),ue=e("../../lib/setcursor"),de=e("../dragelement"),l=e("../../plot_api/plot_template").arrayEditor,fe=e("./draw_arrow_head");function a(e,t){var n=e._fullLayout.annotations[t]||{},r=oe.getFromId(e,n.xref),a=oe.getFromId(e,n.yref);r&&r.setScale(),a&&a.setScale(),i(e,n,t,!1,r,a)}function pe(e,t,n,r,a){var i=a[n],a=a[n+"ref"],n=-1!==n.indexOf("y"),a="domain"===oe.getRefType(a),r=n?r.h:r.w;return e?a?i+(n?-t:t)/e._length:e.p2r(e.r2p(i)+t):i+(n?-t:t)/r}function i(D,I,t,R,P,N){var F,z,j,q,H,B,U,e,V,Y,$,G,n,W,Z=D._fullLayout,X=D._fullLayout._size,J=D._context.edits,r=R?(e="annotation-"+R,R+".annotations"):(e="annotation","annotations"),r=l(D.layout,r,I),K=r.modifyBase,Q=r.modifyItem,ee=r.getUpdateObj,te=(Z._infolayer.selectAll("."+e+'[data-index="'+t+'"]').remove(),"clip"+Z._uid+"_ann"+t);function ne(e){e={index:t,annotation:I._input,fullAnnotation:I,event:e};return R&&(e.subplotId=R),e}function a(e){return e.call(le.font,n).attr({"text-anchor":{left:"start",right:"end"}[I.align]||"middle"}),ce.convertToTspans(e,D,i),e}function i(){var e=W.selectAll("a"),e=(1===e.size()&&e.text()===W.text()&&B.insert("a",":first-child").attr({"xlink:xlink:href":e.attr("xlink:href"),"xlink:xlink:show":e.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(Y.node()),B.select(".annotation-text-math-group")),t=!e.empty(),n=le.bBox((t?e:W).node()),r=n.width,a=n.height,i=I.width||r,o=I.height||a,s=Math.round(i+2*V),l=Math.round(o+2*V);function c(e,t){return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t="auto"===t?e<1/3?"left":2/3<e?"right":"center":t]}for(var u,d,f,p,h=!1,m=["x","y"],g=0;g<m.length;g++){var y,v,b,x,_=m[g],w=I[_+"ref"]||_,T=I["a"+_+"ref"],k={x:P,y:N}[_],A=(z+("x"===_?0:-90))*Math.PI/180,M=s*Math.cos(A),A=l*Math.sin(A),E=Math.abs(M)+Math.abs(A),S=I[_+"anchor"],L=I[_+"shift"]*("x"===_?1:-1),C=F[_],O=oe.getRefType(w);O=k&&"domain"!==O?(((v=k.r2fraction(I[_]))<0||1<v)&&(T!==w||(v=k.r2fraction(I["a"+_]))<0||1<v)&&(h=!0),v=k._offset+k.r2p(I[_]),.5):(O="domain"===O,v="x"===_?(y=I[_],O?k._offset+k._length*y:X.l+X.w*y):(y=1-I[_],O?k._offset+k._length*y:X.t+X.h*y),I.showarrow?.5:y),I.showarrow?(C.head=v,x=I["a"+_],b=M*c(.5,I.xanchor)-A*c(.5,I.yanchor),x=T===w?(M=oe.getRefType(T),C.tail="domain"===M?k._offset+k._length*(x="y"===_?1-x:x):"paper"===M?"y"===_?X.t+X.h*(x=1-x):X.l+X.w*x:k._offset+k.r2p(x),b):(C.tail=v+x,b+x),C.text=C.tail+b,A=Z["x"===_?"width":"height"],"paper"===w&&(C.head=ae.constrain(C.head,1,A-1)),"pixel"===T&&(M=-Math.max(C.tail-3,C.text),k=Math.min(C.tail+3,C.text)-A,0<M?(C.tail+=M,C.text+=M):0<k&&(C.tail-=k,C.text-=k)),C.tail+=L,C.head+=L):(x=b=E*c(O,S),C.text=v+b),C.text+=L,b+=L,x+=L,I["_"+_+"padplus"]=E/2+x,I["_"+_+"padminus"]=E/2-x,I["_"+_+"size"]=E,I["_"+_+"shift"]=b}h?B.remove():(d=u=0,"left"!==I.align&&(u=(i-r)*("center"===I.align?.5:1)),"top"!==I.valign&&(d=(o-a)*("middle"===I.valign?.5:1)),t?e.select("svg").attr({x:V+u-1,y:V+d}).call(le.setClipUrl,$?te:null,D):(r=V+d-n.top,a=V+u-n.left,W.call(ce.positionText,a,r).call(le.setClipUrl,$?te:null,D)),G.select("rect").call(le.setRect,V,V,i,o),Y.call(le.setRect,U/2,U/2,s-U,l-U),B.call(le.setTranslate,Math.round(F.x.text-s/2),Math.round(F.y.text-l/2)),q.attr({transform:"rotate("+z+","+F.x.text+","+F.y.text+")"}),f=function(e,t){j.selectAll(".annotation-arrow-g").remove();var a,i,o,n=F.x.head,r=F.y.head,s=F.x.tail+e,l=F.y.tail+t,e=F.x.text+e,t=F.y.text+t,c=ae.rotationXYMatrix(z,e,t),u=ae.apply2DTransform(c),c=ae.apply2DTransform2(c),d=+Y.attr("width"),f=+Y.attr("height"),e=e-.5*d,d=e+d,t=t-.5*f,f=t+f,f=[[e,t,e,f],[e,f,d,f],[d,f,d,t],[d,t,e,t]].map(c);f.reduce(function(e,t){return e^!!ae.segmentsIntersect(n,r,n+1e6,r+1e6,t[0],t[1],t[2],t[3])},!1)||(f.forEach(function(e){e=ae.segmentsIntersect(s,l,n,r,e[0],e[1],e[2],e[3]);e&&(s=e.x,l=e.y)}),d=I.arrowwidth,e=I.arrowcolor,t=I.arrowside,c=(a=j.append("g").style({opacity:se.opacity(e)}).classed("annotation-arrow-g",!0)).append("path").attr("d","M"+s+","+l+"L"+n+","+r).style("stroke-width",d+"px").call(se.stroke,se.rgb(e)),fe(c,t,I),J.annotationPosition&&c.node().parentNode&&!R&&(f=n,e=r,I.standoff&&(t=Math.sqrt(Math.pow(n-s,2)+Math.pow(r-l,2)),f+=I.standoff*(s-n)/t,e+=I.standoff*(l-r)/t),c=a.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(s-f)+","+(l-e),transform:ie(f,e)}).style("stroke-width",d+6+"px").call(se.stroke,"rgba(0,0,0,0)").call(se.fill,"rgba(0,0,0,0)"),de.init({element:c.node(),gd:D,prepFn:function(){var e=le.getTranslate(B);i=e.x,o=e.y,P&&P.autorange&&K(P._name+".autorange",!0),N&&N.autorange&&K(N._name+".autorange",!0)},moveFn:function(e,t){var n=u(i,o),r=n[0]+e,n=n[1]+t;B.call(le.setTranslate,r,n),Q("x",pe(P,e,"x",X,I)),Q("y",pe(N,t,"y",X,I)),I.axref===I.xref&&Q("ax",pe(P,e,"ax",X,I)),I.ayref===I.yref&&Q("ay",pe(N,t,"ay",X,I)),a.attr("transform",ie(e,t)),q.attr({transform:"rotate("+z+","+r+","+n+")"})},doneFn:function(){re.call("_guiRelayout",D,ee());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})))},I.showarrow&&f(0,0),H&&de.init({element:B.node(),gd:D,prepFn:function(){p=q.attr("transform")},moveFn:function(e,t){var n,r,a,i="pointer";if(I.showarrow)I.axref===I.xref?Q("ax",pe(P,e,"ax",X,I)):Q("ax",I.ax+e),I.ayref===I.yref?Q("ay",pe(N,t,"ay",X.w,I)):Q("ay",I.ay+t),f(e,t);else{if(R)return;n=P?pe(P,e,"x",X,I):(r=I._xsize/X.w,n=I.x+(I._xshift-I.xshift)/X.w-r/2,de.align(n+e/X.w,r,0,1,I.xanchor)),a=N?pe(N,t,"y",X,I):(r=I._ysize/X.h,a=I.y-(I._yshift+I.yshift)/X.h-r/2,de.align(a-t/X.h,r,0,1,I.yanchor)),Q("x",n),Q("y",a),P&&N||(i=de.getCursor(P?.5:n,N?.5:a,I.xanchor,I.yanchor))}q.attr({transform:ie(e,t)+p}),ue(B,i)},clickFn:function(e,t){I.captureevents&&D.emit("plotly_clickannotation",ne(t))},doneFn:function(){ue(B),re.call("_guiRelayout",D,ee());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}}))}I._input&&!1!==I.visible?(F={x:{},y:{}},z=+I.textangle||0,j=Z._infolayer.append("g").classed(e,!0).attr("data-index",String(t)).style("opacity",I.opacity),q=j.append("g").classed("annotation-text-g",!0),H=J[I.showarrow?"annotationTail":"annotationPosition"],r=I.captureevents||J.annotationText||H,B=q.append("g").style("pointer-events",r?"all":null).call(ue,"pointer").on("click",function(){D._dragging=!1,D.emit("plotly_clickannotation",ne(o.event))}),I.hovertext&&B.on("mouseover",function(){var e=I.hoverlabel,t=e.font,n=this.getBoundingClientRect(),r=D.getBoundingClientRect();s.loneHover({x0:n.left-r.left,x1:n.right-r.left,y:(n.top+n.bottom)/2-r.top,text:I.hovertext,color:e.bgcolor,borderColor:e.bordercolor,fontFamily:t.family,fontSize:t.size,fontColor:t.color},{container:Z._hoverlayer.node(),outerContainer:Z._paper.node(),gd:D})}).on("mouseout",function(){s.loneUnhover(Z._hoverlayer.node())}),U=I.borderwidth,e=I.borderpad,V=U+e,Y=B.append("rect").attr("class","bg").style("stroke-width",U+"px").call(se.stroke,I.bordercolor).call(se.fill,I.bgcolor),$=I.width||I.height,G=Z._topclips.selectAll("#"+te).data($?[0]:[]),G.enter().append("clipPath").classed("annclip",!0).attr("id",te).append("rect"),G.exit().remove(),n=I.font,r=Z._meta?ae.templateString(I.text,Z._meta):I.text,W=B.append("text").classed("annotation-text",!0).text(r),J.annotationText?W.call(ce.makeEditable,{delegate:B,gd:D}).call(a).on("edit",function(e){I.text=e,this.call(a),Q("text",e),P&&P.autorange&&K(P._name+".autorange",!0),N&&N.autorange&&K(N._name+".autorange",!0),re.call("_guiRelayout",D,ee())}):W.call(a)):o.selectAll("#"+te).remove()}t.exports={draw:function(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var n=0;n<t.annotations.length;n++)t.annotations[n].visible&&a(e,n);return r.previousPromises(e)},drawOne:a,drawRaw:i}},{"../../lib":287,"../../lib/setcursor":307,"../../lib/svg_text_utils":310,"../../plot_api/plot_template":323,"../../plots/cartesian/axes":334,"../../plots/plots":371,"../../registry":378,"../color":157,"../dragelement":176,"../drawing":179,"../fx":197,"./draw_arrow_head":147,"@plotly/d3":20}],147:[function(e,t,n){"use strict";var _=e("@plotly/d3"),w=e("../color"),T=e("./arrow_paths"),e=e("../../lib"),k=e.strScale,A=e.strRotate,M=e.strTranslate;t.exports=function(a,e,i){var o=a.node(),t=T[i.arrowhead||0],n=T[i.startarrowhead||0],r=(i.arrowwidth||1)*(i.arrowsize||1),s=(i.arrowwidth||1)*(i.startarrowsize||1),l=0<=e.indexOf("start"),e=0<=e.indexOf("end"),c=t.backoff*r+i.standoff,u=n.backoff*s+i.startstandoff;if("line"===o.nodeName){var d,f={x:+a.attr("x1"),y:+a.attr("y1")},p={x:+a.attr("x2"),y:+a.attr("y2")},h=f.x-p.x,m=f.y-p.y,g=(d=Math.atan2(m,h))+Math.PI;if(c&&u&&c+u>Math.sqrt(h*h+m*m))return void b();if(c){if(h*h+m*m<c*c)return void b();var y=c*Math.cos(d),v=c*Math.sin(d);p.x+=y,p.y+=v,a.attr({x2:p.x,y2:p.y})}if(u){if(h*h+m*m<u*u)return void b();y=u*Math.cos(d),v=u*Math.sin(d);f.x-=y,f.y-=v,a.attr({x1:f.x,y1:f.y})}}else if("path"===o.nodeName){h=o.getTotalLength();if(h<c+u)return void b();m=o.getPointAtLength(0),y=o.getPointAtLength(.1),m=(d=Math.atan2(m.y-y.y,m.x-y.x),f=o.getPointAtLength(Math.min(u,h)),v="0px,"+u+"px,",o.getPointAtLength(h)),y=o.getPointAtLength(h-.1);g=Math.atan2(m.y-y.y,m.x-y.x),p=o.getPointAtLength(Math.max(0,h-c)),a.style("stroke-dasharray",v+=h-(v?u+c:c)+"px,"+h+"px")}function b(){a.style("stroke-dasharray","0px,100px")}function x(e,t,n,r){e.path&&(e.noRotate&&(n=0),_.select(o.parentNode).append("path").attr({class:a.attr("class"),d:e.path,transform:M(t.x,t.y)+A(180*n/Math.PI)+k(r)}).style({fill:w.rgb(i.arrowcolor),"stroke-width":0}))}l&&x(n,f,d,s),e&&x(t,p,g,r)}},{"../../lib":287,"../color":157,"./arrow_paths":139,"@plotly/d3":20}],148:[function(e,t,n){"use strict";var r=e("./draw"),a=e("./click");t.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne,drawRaw:r.drawRaw,hasClickToShow:a.hasClickToShow,onClick:a.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":347,"./attributes":140,"./calc_autorange":141,"./click":142,"./convert_coords":144,"./defaults":145,"./draw":146}],149:[function(e,t,n){"use strict";var r=e("../annotations/attributes"),a=e("../../plot_api/edit_types").overrideAll,e=e("../../plot_api/plot_template").templatedArray;t.exports=a(e("annotation",{visible:r.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:r.xanchor,xshift:r.xshift,yanchor:r.yanchor,yshift:r.yshift,text:r.text,textangle:r.textangle,font:r.font,width:r.width,height:r.height,opacity:r.opacity,align:r.align,valign:r.valign,bgcolor:r.bgcolor,bordercolor:r.bordercolor,borderpad:r.borderpad,borderwidth:r.borderwidth,showarrow:r.showarrow,arrowcolor:r.arrowcolor,arrowhead:r.arrowhead,startarrowhead:r.startarrowhead,arrowside:r.arrowside,arrowsize:r.arrowsize,startarrowsize:r.startarrowsize,arrowwidth:r.arrowwidth,standoff:r.standoff,startstandoff:r.startstandoff,hovertext:r.hovertext,hoverlabel:r.hoverlabel,captureevents:r.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":316,"../../plot_api/plot_template":323,"../annotations/attributes":140}],150:[function(e,t,n){"use strict";var a=e("../../lib"),i=e("../../plots/cartesian/axes");t.exports=function(e){for(var t=e.fullSceneLayout.annotations,n=0;n<t.length;n++)!function(e,t){var n=t.fullSceneLayout.domain,r=t.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},a.extendFlat(e._xa,t),i.setConvert(e._xa),e._xa._offset=r.l+n.x[0]*r.w,e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*r.w*(n.x[1]-n.x[0])},e._ya={},a.extendFlat(e._ya,t),i.setConvert(e._ya),e._ya._offset=r.t+(1-n.y[1])*r.h,e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*r.h*(n.y[1]-n.y[0])}}(t[n],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()}},{"../../lib":287,"../../plots/cartesian/axes":334}],151:[function(e,t,n){"use strict";var o=e("../../lib"),s=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),l=e("../annotations/common_defaults"),c=e("./attributes");function a(n,r,a,e){function i(e,t){return o.coerce(n,r,c,e,t)}function t(e){var t=e+"axis",n={_fullLayout:{}};n._fullLayout[t]=a[t],s.coercePosition(r,n,i,e,e,.5)}i("visible")&&(l(n,r,e.fullLayout,i),t("x"),t("y"),t("z"),o.noneOrAll(n,r,["x","y","z"]),r.xref="x",r.yref="y",r.zref="z",i("xanchor"),i("yanchor"),i("xshift"),i("yshift"),r.showarrow&&(r.axref="pixel",r.ayref="pixel",i("ax",-10),i("ay",-30),o.noneOrAll(n,r,["ax","ay"])))}t.exports=function(e,t,n){r(e,t,{name:"annotations",handleItemDefaults:a,fullLayout:n.fullLayout})}},{"../../lib":287,"../../plots/array_container_defaults":329,"../../plots/cartesian/axes":334,"../annotations/common_defaults":143,"./attributes":149}],152:[function(e,t,n){"use strict";var u=e("../annotations/draw").drawRaw,d=e("../../plots/gl3d/project"),f=["x","y","z"];t.exports=function(e){for(var t=e.fullSceneLayout,n=e.dataScale,r=t.annotations,a=0;a<r.length;a++){for(var i=r[a],o=!1,s=0;s<3;s++){var l=f[s],c=i[l],l=t[l+"axis"].r2fraction(c);if(l<0||1<l){o=!0;break}}o?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+a+'"]').remove():(i._pdata=d(e.glplot.cameraParams,[t.xaxis.r2l(i.x)*n[0],t.yaxis.r2l(i.y)*n[1],t.zaxis.r2l(i.z)*n[2]]),u(e.graphDiv,i,a,e.id,i._xa,i._ya))}}},{"../../plots/gl3d/project":368,"../annotations/draw":146}],153:[function(e,t,n){"use strict";var s=e("../../registry"),l=e("../../lib");t.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:function(e,t){var n=s.subplotsRegistry.gl3d;if(n)for(var r=n.attrRegex,a=Object.keys(e),i=0;i<a.length;i++){var o=a[i];r.test(o)&&(e[o].annotations||[]).length&&(l.pushUnique(t._basePlotModules,n),l.pushUnique(t._subplots.gl3d,o))}},convert:e("./convert"),draw:e("./draw")}},{"../../lib":287,"../../registry":378,"./attributes":149,"./convert":150,"./defaults":151,"./draw":152}],154:[function(e,t,n){"use strict";t.exports=e("world-calendars/dist/main"),e("world-calendars/dist/plus"),e("world-calendars/dist/calendars/chinese"),e("world-calendars/dist/calendars/coptic"),e("world-calendars/dist/calendars/discworld"),e("world-calendars/dist/calendars/ethiopian"),e("world-calendars/dist/calendars/hebrew"),e("world-calendars/dist/calendars/islamic"),e("world-calendars/dist/calendars/julian"),e("world-calendars/dist/calendars/mayan"),e("world-calendars/dist/calendars/nanakshahi"),e("world-calendars/dist/calendars/nepali"),e("world-calendars/dist/calendars/persian"),e("world-calendars/dist/calendars/taiwan"),e("world-calendars/dist/calendars/thai"),e("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":123,"world-calendars/dist/calendars/coptic":124,"world-calendars/dist/calendars/discworld":125,"world-calendars/dist/calendars/ethiopian":126,"world-calendars/dist/calendars/hebrew":127,"world-calendars/dist/calendars/islamic":128,"world-calendars/dist/calendars/julian":129,"world-calendars/dist/calendars/mayan":130,"world-calendars/dist/calendars/nanakshahi":131,"world-calendars/dist/calendars/nepali":132,"world-calendars/dist/calendars/persian":133,"world-calendars/dist/calendars/taiwan":134,"world-calendars/dist/calendars/thai":135,"world-calendars/dist/calendars/ummalqura":136,"world-calendars/dist/main":137,"world-calendars/dist/plus":138}],155:[function(e,t,n){"use strict";function i(e,t,n,r){var a={};return a[n]=s,o.coerce(e,t,a,n,r)}var r=e("./calendars"),o=e("../../lib"),e=e("../../constants/numerical"),c=e.EPOCHJD,u=e.ONEDAY,s={valType:"enumerated",values:o.sortObjectKeys(r.calendars),editType:"calc",dflt:"gregorian"},d={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};var a={};function f(e){var t=a[e];return t=t||(a[e]=r.instance(e))}function l(e){return o.extendFlat({},s,{description:e})}function p(e){return"Sets the calendar system to use with `"+e+"` date data."}var e={xcalendar:l(p("x"))},h=o.extendFlat({},e,{ycalendar:l(p("y"))}),m=o.extendFlat({},h,{zcalendar:l(p("z"))}),g=l(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));t.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:h,bar:h,box:h,heatmap:h,contour:h,histogram:h,histogram2d:h,histogram2dcontour:h,scatter3d:m,surface:m,mesh3d:m,scattergl:h,ohlc:e,candlestick:e},layout:{calendar:l(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:g},yaxis:{calendar:g},scene:{xaxis:{calendar:g},yaxis:{calendar:g},zaxis:{calendar:g}},polar:{radialaxis:{calendar:g}}},transforms:{filter:{valuecalendar:l(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:l(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:s,handleDefaults:i,handleTraceDefaults:function(e,t,n,r){for(var a=0;a<n.length;a++)i(e,t,n[a]+"calendar",r.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:f,worldCalFmt:function(e,t,n){for(var r,a,i,o,t=Math.floor((t+.05)/u)+c,s=f(n).fromJD(t),l=0;-1!==(l=e.indexOf("%",l));)"0"===(r=e.charAt(l+1))||"-"===r||"_"===r?(i=3,a=e.charAt(l+2),"_"===r&&(r="-")):(a=r,r="0",i=2),(o=d[a])?(o="##"===o?"##":s.formatDate(o[r]),e=e.substr(0,l)+o+e.substr(l+i),l+=o.length):l+=i;return e}}},{"../../constants/numerical":267,"../../lib":287,"./calendars":154}],156:[function(e,t,n){"use strict";n.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],n.defaultLine="#444",n.lightLine="#eee",n.background="#fff",n.borderLine="#BEC8D9",n.lightFraction=1e3/11},{}],157:[function(e,t,n){"use strict";var a=e("tinycolor2"),i=e("fast-isnumeric"),o=e("../../lib/array").isTypedArray,s=t.exports={},t=e("./attributes"),l=(s.defaults=t.defaults,s.defaultLine=t.defaultLine),c=(s.lightLine=t.lightLine,s.background=t.background);function u(e){if(i(e)||"string"!=typeof e)return e;var t=e.trim();if("rgb"!==t.substr(0,3))return e;var n=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return e;var r=n[1].trim().split(/\s*[\s,]\s*/),n="a"===t.charAt(3)&&4===r.length;if(!n&&3!==r.length)return e;for(var a=0;a<r.length;a++){if(!r[a].length)return e;if(r[a]=Number(r[a]),!(0<=r[a]))return e;if(3===a)1<r[a]&&(r[a]=1);else if(1<=r[a])return e}t=Math.round(255*r[0])+", "+Math.round(255*r[1])+", "+Math.round(255*r[2]);return n?"rgba("+t+", "+r[3]+")":"rgb("+t+")"}s.tinyRGB=function(e){e=e.toRgb();return"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+")"},s.rgb=function(e){return s.tinyRGB(a(e))},s.opacity=function(e){return e?a(e).getAlpha():0},s.addOpacity=function(e,t){e=a(e).toRgb();return"rgba("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+", "+t+")"},s.combine=function(e,t){var n=a(e).toRgb();if(1===n.a)return a(e).toRgbString();e=a(t||c).toRgb(),t=1===e.a?e:{r:255*(1-e.a)+e.r*e.a,g:255*(1-e.a)+e.g*e.a,b:255*(1-e.a)+e.b*e.a},e={r:t.r*(1-n.a)+n.r*n.a,g:t.g*(1-n.a)+n.g*n.a,b:t.b*(1-n.a)+n.b*n.a};return a(e).toRgbString()},s.contrast=function(e,t,n){var r=a(e);return((r=1!==r.getAlpha()?a(s.combine(e,c)):r).isDark()?t?r.lighten(t):c:n?r.darken(n):l).toString()},s.stroke=function(e,t){t=a(t);e.style({stroke:s.tinyRGB(t),"stroke-opacity":t.getAlpha()})},s.fill=function(e,t){t=a(t);e.style({fill:s.tinyRGB(t),"fill-opacity":t.getAlpha()})},s.clean=function(e){if(e&&"object"==typeof e)for(var t,n,r=Object.keys(e),a=0;a<r.length;a++)if(n=e[i=r[a]],"color"===i.substr(i.length-5))if(Array.isArray(n))for(t=0;t<n.length;t++)n[t]=u(n[t]);else e[i]=u(n);else if("colorscale"===i.substr(i.length-10)&&Array.isArray(n))for(t=0;t<n.length;t++)Array.isArray(n[t])&&(n[t][1]=u(n[t][1]));else if(Array.isArray(n)){var i=n[0];if(!Array.isArray(i)&&i&&"object"==typeof i)for(t=0;t<n.length;t++)s.clean(n[t])}else n&&"object"==typeof n&&!o(n)&&s.clean(n)}},{"../../lib/array":273,"./attributes":156,"fast-isnumeric":33,tinycolor2:121}],158:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/layout_attributes"),a=e("../../plots/font_attributes"),i=e("../../lib/extend").extendFlat,e=e("../../plot_api/edit_types").overrideAll;t.exports=e({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:r.linecolor,outlinewidth:r.linewidth,bordercolor:r.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:i({},r.ticks,{dflt:""}),ticklabeloverflow:i({},r.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,ticklabelstep:r.ticklabelstep,showticklabels:r.showticklabels,tickfont:a({}),tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,separatethousands:r.separatethousands,exponentformat:r.exponentformat,minexponent:r.minexponent,showexponent:r.showexponent,title:{text:{valType:"string"},font:a({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:a({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":281,"../../plot_api/edit_types":316,"../../plots/cartesian/layout_attributes":349,"../../plots/font_attributes":365}],159:[function(e,t,n){"use strict";t.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],160:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../../plot_api/plot_template"),u=e("../../plots/cartesian/tick_value_defaults"),d=e("../../plots/cartesian/tick_mark_defaults"),f=e("../../plots/cartesian/tick_label_defaults"),p=e("../../plots/cartesian/prefix_suffix_defaults"),h=e("./attributes");t.exports=function(e,t,n){var r=c.newContainer(t,"colorbar"),a=e.colorbar||{};function i(e,t){return l.coerce(a,r,h,e,t)}var t=n.margin||{t:0,b:0,l:0,r:0},e=n.width-t.l-t.r,t=n.height-t.t-t.b,o="v"===i("orientation"),s=i("thicknessmode"),s=(i("thickness","fraction"===s?30/(o?e:t):30),i("lenmode")),s=(i("len","fraction"===s?1:o?t:e),i("x",o?1.02:.5),i("xanchor",o?"left":"center"),i("xpad"),i("y",o?.5:1.02),i("yanchor",o?"middle":"bottom"),i("ypad"),l.noneOrAll(a,r,["x","y"]),i("outlinecolor"),i("outlinewidth"),i("bordercolor"),i("borderwidth"),i("bgcolor"),l.coerce(a,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:o?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition")),t=(i("ticklabeloverflow",-1!==s.indexOf("inside")?"hide past domain":"hide past div"),u(a,r,i,"linear"),n.font),e={outerTicks:!1,font:t},s=(-1!==s.indexOf("inside")&&(e.bgColor="black"),p(a,r,i,"linear",e),f(a,r,i,"linear",e),d(a,r,i,"linear",e),i("title.text",n._dfltTitle.colorbar),r.tickfont),e=l.extendFlat({},s,{color:t.color,size:l.bigFont(s.size)});l.coerceFont(i,"title.font",e),i("title.side",o?"top":"right")}},{"../../lib":287,"../../plot_api/plot_template":323,"../../plots/cartesian/prefix_suffix_defaults":353,"../../plots/cartesian/tick_label_defaults":358,"../../plots/cartesian/tick_mark_defaults":359,"../../plots/cartesian/tick_value_defaults":360,"./attributes":158}],161:[function(e,t,n){"use strict";var X=e("@plotly/d3"),J=e("tinycolor2"),K=e("../../plots/plots"),f=e("../../registry"),Q=e("../../plots/cartesian/axes"),p=e("../dragelement"),ee=e("../../lib"),te=ee.strTranslate,ne=e("../../lib/extend").extendFlat,h=e("../../lib/setcursor"),re=e("../drawing"),ae=e("../color"),ie=e("../titles"),oe=e("../../lib/svg_text_utils"),v=e("../colorscale/helpers").flipScale,se=e("../../plots/cartesian/axis_defaults"),le=e("../../plots/cartesian/position_defaults"),ce=e("../../plots/cartesian/layout_attributes"),r=e("../../constants/alignment"),ue=r.LINE_SPACING,de=r.FROM_TL,fe=r.FROM_BR,pe=e("./constants").cn;t.exports={draw:function(d){var e=d._fullLayout._infolayer.selectAll("g."+pe.colorbar).data(function(e){var t,n,r,a,i=e._fullLayout,o=e.calcdata,s=[];function l(e){return ne(e,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function c(){"function"==typeof a.calc?a.calc(e,r,t):(t._fillgradient=n.reversescale?v(n.colorscale):n.colorscale,t._zrange=[n[a.min],n[a.max]])}for(var u,d=0;d<o.length;d++){var f=o[d],f=(r=f[0].trace)._module.colorbar;if(!0===r.visible&&f)for(var p=Array.isArray(f),h=p?f:[f],m=0;m<h.length;m++){var g=(a=h[m]).container;(n=g?r[g]:r)&&n.showscale&&((t=l(n.colorbar))._id="cb"+r.uid+(p&&g?"-"+g:""),t._traceIndex=r.index,t._propPrefix=(g?g+".":"")+"colorbar.",t._meta=r._meta,c(),s.push(t))}}for(u in i._colorAxes){var y;(n=i[u]).showscale&&(y=i._colorAxes[u],(t=l(n.colorbar))._id="cb"+u,t._propPrefix=u+".colorbar.",t._meta=i._meta,a={min:"cmin",max:"cmax"},"heatmap"!==y[0]&&(r=y[1],a.calc=r._module.colorbar.calc),c(),s.push(t))}return s}(d),function(e){return e._id});e.enter().append("g").attr("class",function(e){return e._id}).classed(pe.colorbar,!0),e.each(function(e){var n,r,t,a,i,o,s,l,c=X.select(this),u=(ee.ensureSingle(c,"rect",pe.cbbg),ee.ensureSingle(c,"g",pe.cbfills),ee.ensureSingle(c,"g",pe.cblines),ee.ensureSingle(c,"g",pe.cbaxis,function(e){e.classed(pe.crisp,!0)}),ee.ensureSingle(c,"g",pe.cbtitleunshift,function(e){e.append("g").classed(pe.cbtitle,!0)}),ee.ensureSingle(c,"rect",pe.cboutline),function(d,f,p){var h="v"===f.orientation,m=f.len,z=f.lenmode,g=f.thickness,j=f.thicknessmode,y=f.outlinewidth,v=f.borderwidth,q=f.bgcolor,H=f.xanchor,b=f.yanchor,x=f.xpad,_=f.ypad,w=f.x,T=h?f.y:1-f.y,k=p._fullLayout,A=k._size,e=f._fillcolor,s=f._line,M=f.title,E=M.side,l=f._zrange||X.extent(("function"==typeof e?e:s.color).domain()),u="function"==typeof s.color?s.color:function(){return s.color},B="function"==typeof e?e:function(){return e},t=f._levels,n=function(e,t){var n,r,a=e._levels,i=[],o=[],s=a.end+a.size/100,l=a.size,c=1.001*t[0]-.001*t[1],u=1.001*t[1]-.001*t[0];for(r=0;r<1e5&&(n=a.start+r*l,!(0<l?s<=n:n<=s));r++)c<n&&n<u&&i.push(n);if(e._fillgradient)o=[0];else if("function"==typeof e._fillcolor){var d=e._filllevels;if(d)for(s=d.end+d.size/100,l=d.size,r=0;r<1e5&&(n=d.start+r*l,!(0<l?s<=n:n<=s));r++)n>t[0]&&n<t[1]&&o.push(n);else(o=i.map(function(e){return e-a.size/2})).push(o[o.length-1]+a.size)}else e._fillcolor&&"string"==typeof e._fillcolor&&(o=[0]);a.size<0&&(i.reverse(),o.reverse());return{line:i,fill:o}}(f,l),c=n.fill,U=n.line,S=Math.round(g*("fraction"===j?h?A.w:A.h:1)),n=S/(h?A.w:A.h),L=Math.round(m*("fraction"===z?h?A.h:A.w:1)),r=L/(h?A.h:A.w),C=Math.round(h?w*A.w+x:T*A.h+_),V={center:.5,right:1}[H]||0,Y={top:1,middle:.5}[b]||0,a=h?w-V*n:T-Y*n,i=h?T-Y*r:w-V*r,O=Math.round(h?A.h*(1-i):A.w*i),D=(f._lenFrac=r,f._thickFrac=n,f._uFrac=a,f._vFrac=i,f._axis=function(e,t,n){var e=e._fullLayout,r="v"===t.orientation,a={type:"linear",range:n,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,ticklabelstep:t.ticklabelstep,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:!0,anchor:"free",side:r?"right":"bottom",position:1},n=r?"y":"x",i={type:"linear",_id:n+t._id},r={letter:n,font:e.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:e.calendar};function o(e,t){return ee.coerce(a,i,ce,e,t)}return se(a,i,o,r,e),le(a,i,o,r),i}(p,f,l)),I=(D.position=n+(h?w+x/A.w:T+_/A.h),-1!==["top","bottom"].indexOf(E));h&&I&&(D.title.side=E,D.titlex=w+x/A.w,D.titley=i+("top"===M.side?r-_/A.h:_/A.h));h||I||(D.title.side=E,D.titley=T+_/A.h,D.titlex=i+x/A.w);{var o;s.color&&"auto"===f.tickmode&&(D.tickmode="linear",D.tick0=t.start,a=t.size,n=ee.constrain(L/50,4,15)+1,1<(n=(l[1]-l[0])/((f.nticks||n)*a))&&(o=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),a*=o*ee.roundUp(n/o,[2,5,10]),(Math.abs(t.start)/t.size+1e-6)%1<2e-6&&(D.tick0=0)),D.dtick=a)}D.domain=h?[i+_/A.h,i+r-_/A.h]:[i+x/A.w,i+r-x/A.w],D.setScale(),d.attr("transform",te(Math.round(A.l),Math.round(A.t)));var R,$=d.select("."+pe.cbtitleunshift).attr("transform",te(-Math.round(A.l),-Math.round(A.t))),G=D.ticklabelposition,P=D.title.font.size,N=d.select("."+pe.cbaxis),F=0,W=0;function Z(e,t){var n={propContainer:D,propName:f._propPrefix+"title",traceIndex:f._traceIndex,_meta:f._meta,placeholder:k._dfltTitle.colorbar,containerGroup:d.select("."+pe.cbtitle)},r="h"===e.charAt(0)?e.substr(1):"h"+e;d.selectAll("."+r+",."+r+"-math-group").remove(),ie.draw(p,e,ne(n,t||{}))}return ee.syncOrAsync([K.previousPromises,function(){var e,t;(h&&I||!h&&!I)&&("top"===E&&(e=x+A.l+A.w*w,t=_+A.t+A.h*(1-i-r)+3+.75*P),"bottom"===E&&(e=x+A.l+A.w*w,t=_+A.t+A.h*(1-i)-3-.25*P),"right"===E&&(t=_+A.t+A.h*T+3+.75*P,e=x+A.l+A.w*i),Z(D._id+"title",{attributes:{x:e,y:t,"text-anchor":h?"start":"middle"}}))},function(){(!h&&!I||h&&I)&&(r=(o=d.select("."+pe.cbtitle)).select("text"),e=[-y/2,y/2],a=o.select(".h"+D._id+"title-math-group").node(),i=15.6,r.node()&&(i=parseInt(r.node().style.fontSize,10)*ue),a?(t=re.bBox(a),W=t.width,i<(F=t.height)&&(e[1]-=(F-i)/2)):r.node()&&!r.classed(pe.jsPlaceholder)&&(t=re.bBox(r.node()),W=t.width,F=t.height),h?F&&(F+=5,"top"===E?(D.domain[1]-=F/A.h,e[1]*=-1):(D.domain[0]+=F/A.h,a=oe.lineCount(r),e[1]+=(1-a)*i),o.attr("transform",te(e[0],e[1])),D.setScale()):W&&("right"===E&&(D.domain[0]+=(W+P/2)/A.w),o.attr("transform",te(e[0],e[1])),D.setScale())),d.selectAll("."+pe.cbfills+",."+pe.cblines).attr("transform",h?te(0,Math.round(A.h*(1-D.domain[1]))):te(Math.round(A.w*D.domain[0]),0)),N.attr("transform",h?te(0,Math.round(-A.t)):te(Math.round(-A.l),0));var e,t=d.select("."+pe.cbfills).selectAll("rect."+pe.cbfill).attr("style","").data(c),n=(t.enter().append("rect").classed(pe.cbfill,!0).style("stroke","none"),t.exit().remove(),l.map(D.c2p).map(Math.round).sort(function(e,t){return e-t})),r=(t.each(function(e,t){t=[0===t?l[0]:(c[t]+c[t-1])/2,t===c.length-1?l[1]:(c[t]+c[t+1])/2].map(D.c2p).map(Math.round),h&&(t[1]=ee.constrain(t[1]+(t[1]>t[0])?1:-1,n[0],n[1])),t=X.select(this).attr(h?"x":"y",C).attr(h?"y":"x",X.min(t)).attr(h?"width":"height",Math.max(S,2)).attr(h?"height":"width",Math.max(X.max(t)-X.min(t),2));f._fillgradient?re.gradient(t,p,f._id,h?"vertical":"horizontalreversed",f._fillgradient,"fill"):(e=B(e).replace("e-",""),t.attr("fill",J(e).toHexString()))}),d.select("."+pe.cblines).selectAll("path."+pe.cbline).data(s.color&&s.width?U:[])),a=(r.enter().append("path").classed(pe.cbline,!0),r.exit().remove(),r.each(function(e){var t=C,n=Math.round(D.c2p(e))+s.width/2%1;X.select(this).attr("d","M"+(h?t+","+n:n+","+t)+(h?"h":"v")+S).call(re.lineGroupStyle,s.width,u(e),s.dash)}),N.selectAll("g."+D._id+"tick,path").remove(),C+S+(y||0)/2-("outside"===f.ticks?1:0)),i=Q.calcTicks(D),o=Q.getTickSigns(D)[2];return Q.drawTicks(p,D,{vals:"inside"===D.ticks?Q.clipEnds(D,i):i,layer:N,path:Q.makeTickPath(D,a,o),transFn:Q.makeTransTickFn(D)}),Q.drawLabels(p,D,{vals:i,layer:N,transFn:Q.makeTransTickLabelFn(D),labelFns:Q.makeLabelFns(D,a)})},function(){var e,t,n,r;(h&&!I||!h&&I)&&(e=D.position||0,t=D._offset+D._length/2,"right"===E?(n=t,r=A.l+A.w*e+10+P*(D.showticklabels?1:.5)):(r=t,"bottom"===E&&(n=A.t+A.h*e+10+(-1===G.indexOf("inside")?D.tickfont.size:0)+("intside"!==D.ticks&&f.ticklen||0)),"top"===E&&(t=M.text.split("<br>").length,n=A.t+A.h*e+10-S-ue*P*t)),Z((h?"h":"v")+D._id+"title",{avoid:{selection:X.select(p).selectAll("g."+D._id+"tick"),side:E,offsetTop:h?0:A.t,offsetLeft:h?A.l:0,maxShift:h?k.width:k.height},attributes:{x:r,y:n,"text-anchor":"middle"},transform:{rotate:h?-90:0,offset:0}}))},K.previousPromises,function(){var o,s,l,e=S+y/2,t=(-1===G.indexOf("inside")&&(c=re.bBox(N.node()),e+=h?c.width:c.height),R=$.select("text"),0),n=h&&"top"===E,r=!h&&"right"===E,a=0,i=(R.node()&&!R.classed(pe.jsPlaceholder)&&((i=$.select(".h"+D._id+"title-math-group").node())&&(h&&I||!h&&!I)?(t=(c=re.bBox(i)).width,u=c.height):(t=(c=re.bBox($.node())).right-A.l-(h?C:O),u=c.bottom-A.t-(h?O:C),h||"top"!==E||(e+=c.height,a=c.height)),r&&(R.attr("transform",te(t/2+P/2,0)),t*=2),e=Math.max(e,h?t:u)),2*(h?x:_)+e+v+y/2),c=0,u=(!h&&M.text&&"bottom"===b&&T<=0&&(i+=c=i/2,a+=c),k._hColorbarMoveTitle=c,k._hColorbarMoveCBTitle=a,v+y),e=(d.select("."+pe.cbbg).attr("x",(h?C:O)-u/2-(h?x:0)).attr("y",(h?O:C)-(h?L:_+a-c)).attr(h?"width":"height",Math.max(i-c,2)).attr(h?"height":"width",Math.max(L+u,2)).call(ae.fill,q).call(ae.stroke,f.bordercolor).style("stroke-width",v),r?Math.max(t-10,0):0),r=(d.selectAll("."+pe.cboutline).attr("x",(h?C:O+x)+e).attr("y",(h?O+_-L:C)+(n?F:0)).attr(h?"width":"height",Math.max(S,2)).attr(h?"height":"width",Math.max(L-(h?2*_+F:2*x+e),2)).call(ae.stroke,f.outlinecolor).style({fill:"none","stroke-width":y}),d.attr("transform",te(A.l-(h?V*i:0),A.t-(h?0:(1-Y)*i-a))),!h&&(v||J(q).getAlpha()&&!J.equals(k.paper_bgcolor,q))&&(c=N.selectAll("text"),o=c[0].length,u=d.select("."+pe.cbbg).node(),s=re.bBox(u),l=re.getTranslate(d),c.each(function(e,t){var n,r,a,i=o-1;0!==t&&t!==i||(n=re.bBox(this),r=re.getTranslate(this),t===i?(i=n.right+r.x,0<(a=s.right+l.x+O-v-2+w-i)&&(a=0)):0===t&&(i=n.left+r.x,(a=s.left+l.x+O+v+2-i)<0&&(a=0)),a&&(o<3?this.setAttribute("transform","translate("+a+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden")))})),{}),t=de[H],n=fe[H],e=de[b],a=fe[b],u=i-S;h?("pixels"===z?(r.y=T,r.t=L*e,r.b=L*a):(r.t=r.b=0,r.yt=T+m*e,r.yb=T-m*a),"pixels"===j?(r.x=w,r.l=i*t,r.r=i*n):(r.l=u*t,r.r=u*n,r.xl=w-g*t,r.xr=w+g*n)):("pixels"===z?(r.x=w,r.l=L*t,r.r=L*n):(r.l=r.r=0,r.xl=w+m*t,r.xr=w-m*n),"pixels"===j?(r.y=1-T,r.t=i*e,r.b=i*a):(r.t=u*e,r.b=u*a,r.yt=T-g*e,r.yb=T+g*a)),K.autoMargin(p,f._id,r)}],p)}(c,e,d));u&&u.then&&(d._promises||[]).push(u),d._context.edits.colorbarPosition&&(n=c,t=d,s="v"===(r=e).orientation,l=t._fullLayout._size,p.init({element:n.node(),gd:t,prepFn:function(){a=n.attr("transform"),h(n)},moveFn:function(e,t){n.attr("transform",a+te(e,t)),i=p.align((s?r._uFrac:r._vFrac)+e/l.w,s?r._thickFrac:r._lenFrac,0,1,r.xanchor),o=p.align((s?r._vFrac:1-r._uFrac)-t/l.h,s?r._lenFrac:r._thickFrac,0,1,r.yanchor);e=p.getCursor(i,o,r.xanchor,r.yanchor);h(n,e)},doneFn:function(){var e;h(n),void 0!==i&&void 0!==o&&((e={})[r._propPrefix+"x"]=i,e[r._propPrefix+"y"]=o,void 0!==r._traceIndex?f.call("_guiRestyle",t,e,r._traceIndex):f.call("_guiRelayout",t,e))}}))}),e.exit().each(function(e){K.autoMargin(d,e._id)}).remove(),e.order()}}},{"../../constants/alignment":262,"../../lib":287,"../../lib/extend":281,"../../lib/setcursor":307,"../../lib/svg_text_utils":310,"../../plots/cartesian/axes":334,"../../plots/cartesian/axis_defaults":336,"../../plots/cartesian/layout_attributes":349,"../../plots/cartesian/position_defaults":352,"../../plots/plots":371,"../../registry":378,"../color":157,"../colorscale/helpers":168,"../dragelement":176,"../drawing":179,"../titles":255,"./constants":159,"@plotly/d3":20,tinycolor2:121}],162:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e){return r.isPlainObject(e.colorbar)}},{"../../lib":287}],163:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"colorbar",attributes:e("./attributes"),supplyDefaults:e("./defaults"),draw:e("./draw").draw,hasColorbar:e("./has_colorbar")}},{"./attributes":158,"./defaults":160,"./draw":161,"./has_colorbar":162}],164:[function(e,t,n){"use strict";var p=e("../colorbar/attributes"),h=e("../../lib/regex").counter,r=e("../../lib/sort_object_keys"),m=e("./scales.js").scales;r(m);t.exports=function(e,t){e=e||"";var n,r=(t=t||{}).cLetter||"c",a=("onlyIfNumerical"in t?t.onlyIfNumerical:Boolean(e),"noScale"in t?t.noScale:"marker.line"===e),i="showScaleDflt"in t?t.showScaleDflt:"z"===r,o="string"==typeof t.colorscaleDflt?m[t.colorscaleDflt]:null,s=t.editTypeOverride||"",e=("colorAttr"in t?(n=t.colorAttr,t.colorAttr):n={z:"z",c:"color"}[r],r+"auto"),l=r+"min",c=r+"max",r=r+"mid",u={},d=(u[l]=u[c]=void 0,{}),f=(d[e]=!1,{});return"color"===n&&(f.color={valType:"color",arrayOk:!0,editType:s||"style"},t.anim&&(f.color.anim=!0)),f[e]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:u},f[l]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:d},f[c]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:d},f[r]={valType:"number",dflt:null,editType:"calc",impliedEdits:u},f.colorscale={valType:"colorscale",editType:"calc",dflt:o,impliedEdits:{autocolorscale:!1}},f.autocolorscale={valType:"boolean",dflt:!1!==t.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},f.reversescale={valType:"boolean",dflt:!1,editType:"plot"},a||(f.showscale={valType:"boolean",dflt:i,editType:"calc"},f.colorbar=p),t.noColorAxis||(f.coloraxis={valType:"subplotid",regex:h("coloraxis"),dflt:null,editType:"calc"}),f}},{"../../lib/regex":303,"../../lib/sort_object_keys":308,"../colorbar/attributes":158,"./scales.js":172}],165:[function(e,t,n){"use strict";var u=e("fast-isnumeric"),d=e("../../lib"),f=e("./helpers").extractOpts;t.exports=function(e,t,n){function r(){return d.aggNums(Math.min,null,i)}function a(){return d.aggNums(Math.max,null,i)}var e=e._fullLayout,i=n.vals,n=n.containerStr,n=n?d.nestedProperty(t,n).get():t,t=f(n),o=!1!==t.auto,s=t.min,l=t.max,c=t.mid;void 0===s?s=r():o&&(s=n._colorAx&&u(s)?Math.min(s,r()):r()),void 0===l?l=a():o&&(l=n._colorAx&&u(l)?Math.max(l,a()):a()),o&&void 0!==c&&(c-s<l-c?s=c-(l-c):l-c<c-s&&(l=c+(c-s))),s===l&&(s-=.5,l+=.5),t._sync("min",s),t._sync("max",l),t.autocolorscale&&(n=s*l<0?e.colorscale.diverging:0<=s?e.colorscale.sequential:e.colorscale.sequentialminus,t._sync("colorscale",n))}},{"../../lib":287,"./helpers":168,"fast-isnumeric":33}],166:[function(e,t,n){"use strict";var c=e("../../lib"),u=e("./helpers").hasColorscale,d=e("./helpers").extractOpts;t.exports=function(e,a){function i(e,t){var n=e["_"+t];void 0!==n&&(e[t]=n)}function t(e,t){var n,r,e=t.container?c.nestedProperty(e,t.container).get():e;e&&(e.coloraxis?e._colorAx=a[e.coloraxis]:(!(r=(n=d(e)).auto)&&void 0!==n.min||i(e,t.min),!r&&void 0!==n.max||i(e,t.max),n.autocolorscale&&i(e,"colorscale")))}for(var n,r=0;r<e.length;r++){var o=e[r],s=o._module.colorbar;if(s)if(Array.isArray(s))for(var l=0;l<s.length;l++)t(o,s[l]);else t(o,s);u(o,"marker.line")&&t(o,{container:"marker.line",min:"cmin",max:"cmax"})}for(n in a._colorAxes)t(a[n],{min:"cmin",max:"cmax"})}},{"../../lib":287,"./helpers":168}],167:[function(e,t,n){"use strict";var b=e("fast-isnumeric"),x=e("../../lib"),_=e("../colorbar/has_colorbar"),w=e("../colorbar/defaults"),T=e("./scales").isValid,k=e("../../registry").traceIs;function A(e,t){var n=t.slice(0,t.length-1);return t?x.nestedProperty(e,n).get()||{}:e}t.exports=function e(t,n,r,a,i){function o(){return delete t.coloraxis,delete n.coloraxis,e(t,n,r,a,i)}var s=i.prefix,l=i.cLetter,c="_module"in n,u=A(t,s),d=A(n,s),f=A(n._template||{},s)||{};if(c){var p=r._colorAxes||{},h=a(s+"coloraxis");if(h)return v=k(n,"contour")&&x.nestedProperty(n,"contours.coloring").get()||"heatmap",void((y=p[h])?(y[2].push(o),y[0]!==v&&(y[0]=!1,x.warn(["Ignoring coloraxis:",h,"setting","as it is linked to incompatible colorscales."].join(" ")))):p[h]=[v,n,[o]])}var m,g,y=u[l+"min"],p=u[l+"max"],h=b(y)&&b(p)&&y<p,v=(a(s+l+"auto",!h)?a(s+l+"mid"):(a(s+l+"min"),a(s+l+"max")),u.colorscale),y=f.colorscale;void 0!==v&&(m=!T(v)),void 0!==y&&(m=!T(y)),a(s+"autocolorscale",m),a(s+"colorscale"),a(s+"reversescale"),"marker.line."!==s&&(s&&c&&(g=_(u)),a(s+"showscale",g)&&(s&&f&&(d._template=f),w(u,d,r)))}},{"../../lib":287,"../../registry":378,"../colorbar/defaults":160,"../colorbar/has_colorbar":162,"./scales":172,"fast-isnumeric":33}],168:[function(e,t,n){"use strict";var c=e("@plotly/d3"),u=e("tinycolor2"),d=e("fast-isnumeric"),o=e("../../lib"),f=e("../color"),s=e("./scales").isValid;var l=["showscale","autocolorscale","colorscale","reversescale","colorbar"],p=["min","max","mid","auto"];function h(e){var n,t,r=e._colorAx,a=r||e,i={};for(s=0;s<l.length;s++)i[t=l[s]]=a[t];if(r)for(n="c",s=0;s<p.length;s++)i[t=p[s]]=a["c"+t];else{for(var o,s=0;s<p.length;s++)((o="c"+(t=p[s]))in a||(o="z"+t)in a)&&(i[t]=a[o]);n=o.charAt(0)}return i._sync=function(e,t){e=-1!==p.indexOf(e)?n+e:e;a[e]=a["_"+e]=t},i}function r(e){for(var e=h(e),t=e.min,n=e.max,r=e.reversescale?m(e.colorscale):e.colorscale,a=r.length,i=new Array(a),o=new Array(a),s=0;s<a;s++){var l=r[s];i[s]=t+l[0]*(n-t),o[s]=l[1]}return{domain:i,range:o}}function m(e){for(var t=e.length,n=new Array(t),r=t-1,a=0;0<=r;r--,a++){var i=e[r];n[a]=[1-i[0],i[1]]}return n}function a(e,t){t=t||{};for(var n=e.domain,r=e.range,a=r.length,i=new Array(a),o=0;o<a;o++){var s=u(r[o]).toRgb();i[o]=[s.r,s.g,s.b,s.a]}var l=c.scale.linear().domain(n).range(i).clamp(!0),e=t.noNumericCheck,n=t.returnArray,t=e&&n?l:e?function(e){return g(l(e))}:n?function(e){return d(e)?l(e):u(e).isValid()?e:f.defaultLine}:function(e){return d(e)?g(l(e)):u(e).isValid()?e:f.defaultLine};return t.domain=l.domain,t.range=function(){return r},t}function g(e){e={r:e[0],g:e[1],b:e[2],a:e[3]};return u(e).toRgbString()}t.exports={hasColorscale:function(e,t,n){var r=(t=t?o.nestedProperty(e,t).get()||{}:e)[n||"color"],a=!1;if(o.isArrayOrTypedArray(r))for(var i=0;i<r.length;i++)if(d(r[i])){a=!0;break}return o.isPlainObject(t)&&(a||!0===t.showscale||d(t.cmin)&&d(t.cmax)||s(t.colorscale)||o.isPlainObject(t.colorbar))},extractOpts:h,extractScale:r,flipScale:m,makeColorScaleFunc:a,makeColorScaleFuncFromTrace:function(e,t){return a(r(e),t)}}},{"../../lib":287,"../color":157,"./scales":172,"@plotly/d3":20,"fast-isnumeric":33,tinycolor2:121}],169:[function(e,t,n){"use strict";var r=e("./scales"),a=e("./helpers");t.exports={moduleType:"component",name:"colorscale",attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),handleDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc"),scales:r.scales,defaultScale:r.defaultScale,getScale:r.get,isValidScale:r.isValid,hasColorscale:a.hasColorscale,extractOpts:a.extractOpts,extractScale:a.extractScale,flipScale:a.flipScale,makeColorScaleFunc:a.makeColorScaleFunc,makeColorScaleFuncFromTrace:a.makeColorScaleFuncFromTrace}},{"./attributes":164,"./calc":165,"./cross_trace_defaults":166,"./defaults":167,"./helpers":168,"./layout_attributes":170,"./layout_defaults":171,"./scales":172}],170:[function(e,t,n){"use strict";var r=e("../../lib/extend").extendFlat,a=e("./attributes"),e=e("./scales").scales;t.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:e.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:e.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:e.RdBu,editType:"calc"}},coloraxis:r({_isSubplotObj:!0,editType:"calc"},a("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":281,"./attributes":164,"./scales":172}],171:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../../plot_api/plot_template"),f=e("./layout_attributes"),p=e("./defaults");t.exports=function(n,r){function e(e,t){u.coerce(n,r,f,e,t)}e("colorscale.sequential"),e("colorscale.sequentialminus"),e("colorscale.diverging");var a,i,t,o=r._colorAxes;function s(e,t){return u.coerce(a,i,f.coloraxis,e,t)}for(t in o){var l=o[t];if(l[0])a=n[t]||{},(i=d.newContainer(r,t,"coloraxis"))._name=t,p(a,i,r,s,{prefix:"",cLetter:"c"});else{for(var c=0;c<l[2].length;c++)l[2][c]();delete r._colorAxes[t]}}}},{"../../lib":287,"../../plot_api/plot_template":323,"./defaults":167,"./layout_attributes":170}],172:[function(e,t,n){"use strict";var a=e("tinycolor2"),r={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},i=r.RdBu;function o(e){var t=0;if(!Array.isArray(e)||e.length<2)return!1;if(!e[0]||!e[e.length-1])return!1;if(0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var n=0;n<e.length;n++){var r=e[n];if(2!==r.length||+r[0]<t||!a(r[1]).isValid())return!1;t=+r[0]}return!0}t.exports={scales:r,defaultScale:i,get:function(t,n){return n=n||i,t?("string"==typeof t&&(e(),"string"==typeof t&&e()),o(t)?t:n):n;function e(){try{t=r[t]||JSON.parse(t)}catch(e){t=n}}},isValid:function(e){return void 0!==r[e]||o(e)}}},{tinycolor2:121}],173:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,a){e=(e-n)/(r-n),t=e+t/(r-n),r=(e+t)/2;return"left"===a||"bottom"===a?e:"center"===a||"middle"===a?r:"right"===a||"top"===a?t:e<2/3-r?e:4/3-r<t?t:r}},{}],174:[function(e,t,n){"use strict";var a=e("../../lib"),i=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];t.exports=function(e,t,n,r){return e="left"===n?0:"center"===n?1:"right"===n?2:a.constrain(Math.floor(3*e),0,2),t="bottom"===r?0:"middle"===r?1:"top"===r?2:a.constrain(Math.floor(3*t),0,2),i[t][e]}},{"../../lib":287}],175:[function(e,t,n){"use strict";n.selectMode=function(e){return"lasso"===e||"select"===e},n.drawMode=function(e){return"drawclosedpath"===e||"drawopenpath"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},n.openMode=function(e){return"drawline"===e||"drawopenpath"===e},n.rectMode=function(e){return"select"===e||"drawline"===e||"drawrect"===e||"drawcircle"===e},n.freeMode=function(e){return"lasso"===e||"drawclosedpath"===e||"drawopenpath"===e},n.selectingOrDrawing=function(e){return n.freeMode(e)||n.rectMode(e)}},{}],176:[function(e,t,n){"use strict";var r=e("mouse-event-offset"),v=e("has-hover"),b=e("has-passive-events"),x=e("../../lib").removeElement,_=e("../../plots/cartesian/constants"),w=t.exports={},t=(w.align=e("./align"),w.getCursor=e("./cursor"),e("./unhover"));function T(){var e=document.createElement("div"),t=(e.className="dragcover",e.style);return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}function k(e){return r(e.changedTouches?e.changedTouches[0]:e,document.body)}w.unhover=t.wrapped,w.unhoverRaw=t.raw,w.init=function(a){var r,i,n,o,s,l,c,u,d=a.gd,f=1,p=d._context.doubleClickDelay,h=a.element;d._mouseDownTime||(d._mouseDownTime=0),h.style.pointerEvents="all",h.onmousedown=e,b?(h._ontouchstart&&h.removeEventListener("touchstart",h._ontouchstart),h._ontouchstart=e,h.addEventListener("touchstart",e,{passive:!1})):h.ontouchstart=e;var m=a.clampFn||function(e,t,n){return[e=Math.abs(e)<n?0:e,t=Math.abs(t)<n?0:t]};function e(e){d._dragged=!1,d._dragging=!0;var t=k(e);r=t[0],i=t[1],c=e.target,u=2===(l=e).buttons||e.ctrlKey,void 0===e.clientX&&void 0===e.clientY&&(e.clientX=r,e.clientY=i),(n=(new Date).getTime())-d._mouseDownTime<p?f+=1:(f=1,d._mouseDownTime=n),a.prepFn&&a.prepFn(e,r,i),v&&!u?(s=T()).style.cursor=window.getComputedStyle(h).cursor:v||(s=document,o=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(h).cursor),document.addEventListener("mouseup",y),document.addEventListener("touchend",y),!1!==a.dragmode&&(e.preventDefault(),document.addEventListener("mousemove",g),document.addEventListener("touchmove",g,{passive:!1}))}function g(e){e.preventDefault();var t=k(e),n=a.minDrag||_.MINDRAG,t=m(t[0]-r,t[1]-i,n),n=t[0],t=t[1];(n||t)&&(d._dragged=!0,w.unhover(d,e)),d._dragged&&a.moveFn&&!u&&(d._dragdata={element:h,dx:n,dy:t},a.moveFn(n,t))}function y(t){if(delete d._dragdata,!1!==a.dragmode&&(t.preventDefault(),document.removeEventListener("mousemove",g),document.removeEventListener("touchmove",g)),document.removeEventListener("mouseup",y),document.removeEventListener("touchend",y),v?x(s):o&&(s.documentElement.style.cursor=o,o=null),d._dragging){if(d._dragging=!1,(new Date).getTime()-d._mouseDownTime>p&&(f=Math.max(f-1,1)),d._dragged)a.doneFn&&a.doneFn();else if(a.clickFn&&a.clickFn(f,l),!u){try{n=new MouseEvent("click",t)}catch(e){var n,r=k(t);(n=document.createEvent("MouseEvents")).initMouseEvent("click",t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,r[0],r[1],t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}c.dispatchEvent(n)}d._dragging=!1,d._dragged=!1}else d._dragged=!1}},w.coverSlip=T},{"../../lib":287,"../../plots/cartesian/constants":341,"./align":173,"./cursor":174,"./unhover":177,"has-hover":64,"has-passive-events":65,"mouse-event-offset":71}],177:[function(e,t,n){"use strict";var a=e("../../lib/events"),r=e("../../lib/throttle"),i=e("../../lib/dom").getGraphDiv,o=e("../fx/constants"),s=t.exports={wrapped:function(e,t,n){(e=i(e))._fullLayout&&r.clear(e._fullLayout._uid+o.HOVERID),s.raw(e,t,n)},raw:function(e,t){var n=e._fullLayout,r=e._hoverdata;(t=t||{}).target&&!e._dragged&&!1===a.triggerHandler(e,"plotly_beforehover",t)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),e._hoverdata=void 0,t.target&&r&&e.emit("plotly_unhover",{event:t,points:r}))}}},{"../../lib/dom":279,"../../lib/events":280,"../../lib/throttle":311,"../fx/constants":191}],178:[function(e,t,n){"use strict";n.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},n.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],179:[function(e,t,P){"use strict";var T=e("@plotly/d3"),k=e("../../lib"),n=k.numberFormat,a=e("fast-isnumeric"),p=e("tinycolor2"),v=e("../../registry"),A=e("../color"),r=e("../colorscale"),c=k.strTranslate,d=e("../../lib/svg_text_utils"),i=e("../../constants/xmlns_namespaces"),u=e("../../constants/alignment").LINE_SPACING,b=e("../../constants/interactions").DESELECTDIM,o=e("../../traces/scatter/subtypes"),s=e("../../traces/scatter/make_bubble_size_func"),f=e("../../components/fx/helpers").appendArrayPointValue,m=t.exports={font:function(e,t,n,r){k.isPlainObject(t)&&(r=t.color,n=t.size,t=t.family),t&&e.style("font-family",t),n+1&&e.style("font-size",n+"px"),r&&e.call(A.fill,r)},setPosition:function(e,t,n){e.attr("x",t).attr("y",n)},setSize:function(e,t,n){e.attr("width",t).attr("height",n)},setRect:function(e,t,n,r,a){e.call(m.setPosition,t,n).call(m.setSize,r,a)},translatePoint:function(e,t,n,r){n=n.c2p(e.x),r=r.c2p(e.y);return!!(a(n)&&a(r)&&t.node())&&("text"===t.node().nodeName?t.attr("x",n).attr("y",r):t.attr("transform",c(n,r)),!0)},translatePoints:function(e,n,r){e.each(function(e){var t=T.select(this);m.translatePoint(e,t,n,r)})},hideOutsideRangePoint:function(e,t,n,r,a,i){t.attr("display",n.isPtWithinRange(e,a)&&r.isPtWithinRange(e,i)?null:"none")},hideOutsideRangePoints:function(r,e){var a,i;e._hasClipOnAxisFalse&&(a=e.xaxis,i=e.yaxis,r.each(function(e){var e=e[0].trace,t=e.xcalendar,n=e.ycalendar,e=v.traceIs(e,"bar-like")?".bartext":".point,.textpoint";r.selectAll(e).each(function(e){m.hideOutsideRangePoint(e,T.select(this),a,i,t,n)})}))},crispRound:function(e,t,n){return t&&a(t)?e._context.staticPlot?t:t<1?1:Math.round(t):n||0},singleLineStyle:function(e,t,n,r,a){t.style("fill","none");e=(((e||[])[0]||{}).trace||{}).line||{},n=n||e.width||0,a=a||e.dash||"";A.stroke(t,r||e.color),m.dashLine(t,a,n)},lineGroupStyle:function(e,r,a,i){e.style("fill","none").each(function(e){var e=(((e||[])[0]||{}).trace||{}).line||{},t=r||e.width||0,n=i||e.dash||"";T.select(this).call(A.stroke,a||e.color).call(m.dashLine,n,t)})},dashLine:function(e,t,n){t=m.dashStyle(t,n=+n||0),e.style({"stroke-dasharray":t,"stroke-width":n+"px"})},dashStyle:function(e,t){t=+t||1;t=Math.max(t,3);return"solid"===e?e="":"dot"===e?e=t+"px,"+t+"px":"dash"===e?e=3*t+"px,"+3*t+"px":"longdash"===e?e=5*t+"px,"+5*t+"px":"dashdot"===e?e=3*t+"px,"+t+"px,"+t+"px,"+t+"px":"longdashdot"===e&&(e=5*t+"px,"+2*t+"px,"+t+"px,"+2*t+"px"),e},singleFillStyle:function(e){var t=(((T.select(e.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;t&&e.call(A.fill,t)},fillGroupStyle:function(e){e.style("stroke-width",0).each(function(e){var t=T.select(this);e[0].trace&&t.call(A.fill,e[0].trace.fillcolor)})}},l=e("./symbol_defs"),h=(m.symbolNames=[],m.symbolFuncs=[],m.symbolNeedLines={},m.symbolNoDot={},m.symbolNoFill={},m.symbolList=[],Object.keys(l).forEach(function(e){var t=l[e],n=t.n;m.symbolList.push(n,String(n),e,n+100,String(n+100),e+"-open"),m.symbolNames[n]=e,m.symbolFuncs[n]=t.f,t.needLine&&(m.symbolNeedLines[n]=!0),t.noDot?m.symbolNoDot[n]=!0:m.symbolList.push(n+200,String(n+200),e+"-dot",n+300,String(n+300),e+"-open-dot"),t.noFill&&(m.symbolNoFill[n]=!0)}),m.symbolNames.length);function g(e,t){return m.symbolFuncs[e%100](t)+(200<=e?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}m.symbolNumber=function(e){var t;return a(e)?e=+e:"string"==typeof e&&((t=0)<e.indexOf("-open")&&(t=100,e=e.replace("-open","")),0<e.indexOf("-dot")&&(t+=200,e=e.replace("-dot","")),0<=(e=m.symbolNames.indexOf(e))&&(e+=t)),h<=e%100||400<=e?0:Math.floor(Math.max(e,0))};var t={x1:1,x2:0,y1:0,y2:0},e={x1:0,x2:0,y1:1,y2:0},y=n("~f"),x={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:t},horizontalreversed:{node:"linearGradient",attrs:t,reversed:!0},vertical:{node:"linearGradient",attrs:e},verticalreversed:{node:"linearGradient",attrs:e,reversed:!0}},_=(m.gradient=function(e,t,n,r,a,i){for(var o=a.length,s=x[r],l=new Array(o),c=0;c<o;c++)s.reversed?l[o-1-c]=[y(100*(1-a[c][0])),a[c][1]]:l[c]=[y(100*a[c][0]),a[c][1]];function u(e){return"."+e.attr("class").replace(/\s/g,".")}var d=t._fullLayout,f="g"+d._uid+"-"+n,n=d._defs.select(".gradients").selectAll("#"+f).data([r+l.join(";")],k.identity),r=(n.exit().remove(),n.enter().append(s.node).each(function(){var e=T.select(this),e=(s.attrs&&e.attr(s.attrs),e.attr("id",f),e.selectAll("stop").data(l));e.exit().remove(),e.enter().append("stop"),e.each(function(e){var t=p(e[1]);T.select(this).attr({offset:e[0]+"%","stop-color":A.tinyRGB(t),"stop-opacity":t.getAlpha()})})}),e.style(i,D(f,t)).style(i+"-opacity",null),u(T.select(e.node().parentNode))+">"+u(e));d._gradientUrlQueryParts[r]=1},m.pattern=function(e,t,n,r,a,i,o,s,l,c,u,d){var f,p,h,m,g,y,v,b,x="legend"===t,t=(s&&(u="overlay"===l?(c=s,A.contrast(c)):(c=void 0,s)),n._fullLayout),_="p"+t._uid+"-"+r,w={};switch(a){case"/":f=i*Math.sqrt(2),p=i*Math.sqrt(2),h="path",w={d:m="M-"+f/4+","+p/4+"l"+f/2+",-"+p/2+"M0,"+p+"L"+f+",0M"+f/4*3+","+p/4*5+"l"+f/2+",-"+p/2,opacity:d,stroke:u,"stroke-width":(g=o*i)+"px"};break;case"\\":f=i*Math.sqrt(2),p=i*Math.sqrt(2),h="path",w={d:m="M"+f/4*3+",-"+p/4+"l"+f/2+","+p/2+"M0,0L"+f+","+p+"M-"+f/4+","+p/4*3+"l"+f/2+","+p/2,opacity:d,stroke:u,"stroke-width":(g=o*i)+"px"};break;case"x":f=i*Math.sqrt(2),p=i*Math.sqrt(2),m="M-"+f/4+","+p/4+"l"+f/2+",-"+p/2+"M0,"+p+"L"+f+",0M"+f/4*3+","+p/4*5+"l"+f/2+",-"+p/2+"M"+f/4*3+",-"+p/4+"l"+f/2+","+p/2+"M0,0L"+f+","+p+"M-"+f/4+","+p/4*3+"l"+f/2+","+p/2,g=i-i*Math.sqrt(1-o),h="path",w={d:m,opacity:d,stroke:u,"stroke-width":g+"px"};break;case"|":h=h="path",w={d:m="M"+(f=i)/2+",0L"+f/2+","+(p=i),opacity:d,stroke:u,"stroke-width":(g=o*i)+"px"};break;case"-":h=h="path",w={d:m="M0,"+(p=f=i)/2+"L"+f+","+p/2,opacity:d,stroke:u,"stroke-width":(g=o*i)+"px"};break;case"+":h="path",m="M"+(f=i)/2+",0L"+f/2+","+(p=i)+"M0,"+p/2+"L"+f+","+p/2,g=i-i*Math.sqrt(1-o),h="path",w={d:m,opacity:d,stroke:u,"stroke-width":g+"px"};break;case".":p=f=i,b=o<Math.PI/4?Math.sqrt(o*i*i/Math.PI):(m=o,g=Math.PI/4,y=1,v=i/2,b=i/Math.sqrt(2),v+(b-v)*(m-g)/(y-g)),h="circle",w={cx:f/2,cy:p/2,r:b,opacity:d,fill:u}}l=[a||"noSh",c||"noBg",u||"noFg",i,o].join(";"),s=t._defs.select(".patterns").selectAll("#"+_).data([l],k.identity),s.exit().remove(),s.enter().append("pattern").each(function(){var e=T.select(this),t=(e.attr({id:_,width:f+"px",height:p+"px",patternUnits:"userSpaceOnUse",patternTransform:x?"scale(0.8)":""}),c&&((t=e.selectAll("rect").data([0])).exit().remove(),t.enter().append("rect").attr({width:f+"px",height:p+"px",fill:c})),e.selectAll(h).data([0]));t.exit().remove(),t.enter().append(h).attr(w)}),e.style("fill",D(_,n)).style("fill-opacity",null),e.classed("pattern_filled",!0),r="."+T.select(e.node().parentNode).attr("class").replace(/\s/g,".")+">.pattern_filled";t._patternUrlQueryParts[r]=1},m.initGradients=function(e){e=e._fullLayout;k.ensureSingle(e._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),e._gradientUrlQueryParts={}},m.initPatterns=function(e){e=e._fullLayout;k.ensureSingle(e._defs,"g","patterns").selectAll("pattern").remove(),e._patternUrlQueryParts={}},m.getPatternAttr=function(e,t,n){return e&&k.isArrayOrTypedArray(e)?t<e.length?e[t]:n:e},m.pointStyle=function(e,t,n){var r;e.size()&&(r=m.makePointStyleFns(t),e.each(function(e){m.singlePointStyle(e,T.select(this),t,r,n)}))},m.singlePointStyle=function(e,t,n,r,a){var i,o,s,l,c,u,d,f=n.marker,p=f.line,h=(t.style("opacity",r.selectedOpacityFn?r.selectedOpacityFn(e):void 0===e.mo?f.opacity:e.mo),r.ms2mrc&&(l="various"===e.ms||"various"===f.size?3:r.ms2mrc(e.ms),e.mrc=l,r.selectedSizeFn&&(l=e.mrc=r.selectedSizeFn(e)),h=m.symbolNumber(e.mx||f.symbol)||0,e.om=100<=h%200,t.attr("d",g(h,l))),!1);e.so?(o=p.outlierwidth,s=p.outliercolor,i=f.outliercolor):(l=(p||{}).width,o=(e.mlw+1||l+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0,s="mlc"in e?e.mlcc=r.lineScale(e.mlc):k.isArrayOrTypedArray(p.color)?A.defaultLine:p.color,k.isArrayOrTypedArray(f.color)&&(i=A.defaultLine,h=!0),i="mc"in e?e.mcc=r.markerScale(e.mc):f.color||"rgba(0,0,0,0)",r.selectedColorFn&&(i=r.selectedColorFn(e))),e.om?t.call(A.stroke,i).style({"stroke-width":(o||1)+"px",fill:"none"}):(t.style("stroke-width",(e.isBlank?0:o)+"px"),l=f.gradient,(p=e.mgt)?h=!0:p=l&&l.type,k.isArrayOrTypedArray(p)&&(p=p[0],x[p]||(p=0)),f=(r=f.pattern)&&m.getPatternAttr(r.shape,e.i,""),p&&"none"!==p?((c=e.mgc)?h=!0:c=l.color,l=n.uid,h&&(l+="-"+e.i),m.gradient(t,a,l,p,[[0,c],[1,i]],"fill")):f?(h=m.getPatternAttr(r.bgcolor,e.i,null),l=m.getPatternAttr(r.fgcolor,e.i,null),p=r.fgopacity,c=m.getPatternAttr(r.size,e.i,8),u=m.getPatternAttr(r.solidity,e.i,.3),d=e.mcc||k.isArrayOrTypedArray(r.shape)||k.isArrayOrTypedArray(r.bgcolor)||k.isArrayOrTypedArray(r.size)||k.isArrayOrTypedArray(r.solidity),n=n.uid,d&&(n+="-"+e.i),m.pattern(t,"point",a,n,f,c,u,e.mcc,r.fillmode,h,l,p)):A.fill(t,i),o&&A.stroke(t,s))},m.makePointStyleFns=function(e){var t={},n=e.marker;return t.markerScale=m.tryColorscale(n,""),t.lineScale=m.tryColorscale(n,"line"),v.traceIs(e,"symbols")&&(t.ms2mrc=o.isBubble(e)?s(e):function(){return(n.size||6)/2}),e.selectedpoints&&k.extendFlat(t,m.makeSelectedPointStyleFns(e)),t},m.makeSelectedPointStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},a=e.marker||{},n=n.marker||{},r=r.marker||{},i=a.opacity,o=n.opacity,s=r.opacity,l=void 0!==o,c=void 0!==s,u=((k.isArrayOrTypedArray(i)||l||c)&&(t.selectedOpacityFn=function(e){var t=void 0===e.mo?a.opacity:e.mo;return e.selected?l?o:t:c?s:b*t}),a.color),d=n.color,f=r.color,p=((d||f)&&(t.selectedColorFn=function(e){var t=e.mcc||u;return e.selected?d||t:f||t}),a.size),h=n.size,m=r.size,g=void 0!==h,y=void 0!==m;return v.traceIs(e,"symbols")&&(g||y)&&(t.selectedSizeFn=function(e){var t=e.mrc||p/2;return e.selected?g?h/2:t:y?m/2:t}),t},m.makeSelectedTextStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},e=e.textfont||{},n=n.textfont||{},r=r.textfont||{},a=e.color,i=n.color,o=r.color;return t.selectedTextColorFn=function(e){var t=e.tc||a;return e.selected?i||t:o||(i?t:A.addOpacity(t,b))},t},m.selectedPointStyle=function(e,t){var a,i,r;e.size()&&t.selectedpoints&&(a=m.makeSelectedPointStyleFns(t),i=t.marker||{},r=[],a.selectedOpacityFn&&r.push(function(e,t){e.style("opacity",a.selectedOpacityFn(t))}),a.selectedColorFn&&r.push(function(e,t){A.fill(e,a.selectedColorFn(t))}),a.selectedSizeFn&&r.push(function(e,t){var n=t.mx||i.symbol||0,r=a.selectedSizeFn(t);e.attr("d",g(m.symbolNumber(n),r)),t.mrc2=r}),r.length&&e.each(function(e){for(var t=T.select(this),n=0;n<r.length;n++)r[n](t,e)}))},m.tryColorscale=function(e,t){t=t?k.nestedProperty(e,t).get():e;if(t){e=t.color;if((t.colorscale||t._colorAx)&&k.isArrayOrTypedArray(e))return r.makeColorScaleFuncFromTrace(t)}return k.identity},{start:1,end:-1,middle:0,bottom:1,top:-1});function w(e,t,n,r,a){var i=T.select(e.node().parentNode),o=-1!==t.indexOf("top")?"top":-1!==t.indexOf("bottom")?"bottom":"middle",t=-1!==t.indexOf("left")?"end":-1!==t.indexOf("right")?"start":"middle",r=r?r/.8+1:0,s=(d.lineCount(e)-1)*u+1,l=_[t]*r,r=.75*n+_[o]*r+(_[o]-1)*s*n/2;e.attr("text-anchor",t),a||i.attr("transform",c(l,r))}function M(e,t){e=e.ts||t.textfont.size;return a(e)&&0<e?e:0}m.textPointStyle=function(e,o,s){var l,c,u;e.size()&&(o.selectedpoints&&(l=m.makeSelectedTextStyleFns(o).selectedTextColorFn),c=o.texttemplate,u=s._fullLayout,e.each(function(e){var t,n,r,a=T.select(this),i=c?k.extractOption(e,o,"txt","texttemplate"):k.extractOption(e,o,"tx","text");i||0===i?(c&&(t=(t=o._module.formatLabels)?t(e,o,u):{},f(n={},o,e.i),r=o._meta||{},i=k.texttemplateString(i,t,u._d3locale,n,e,r)),t=e.tp||o.textposition,n=M(e,o),r=l?l(e):e.tc||o.textfont.color,a.call(m.font,e.tf||o.textfont.family,n,r).text(i).call(d.convertToTspans,s).call(w,t,n,e.mrc)):a.remove()}))},m.selectedTextStyle=function(e,i){var o;e.size()&&i.selectedpoints&&(o=m.makeSelectedTextStyleFns(i),e.each(function(e){var t=T.select(this),n=o.selectedTextColorFn(e),r=e.tp||i.textposition,a=M(e,i),n=(A.fill(t,n),v.traceIs(i,"bar-like"));w(t,r,a,e.mrc2||e.mrc,n)}))};function E(e,t,n,r){var a=e[0]-t[0],e=e[1]-t[1],i=n[0]-t[0],n=n[1]-t[1],o=Math.pow(a*a+e*e,.25),s=Math.pow(i*i+n*n,.25),a=(s*s*a-o*o*i)*r,i=(s*s*e-o*o*n)*r,e=3*s*(o+s),n=3*o*(o+s);return[[T.round(t[0]+(e&&a/e),2),T.round(t[1]+(e&&i/e),2)],[T.round(t[0]-(n&&a/n),2),T.round(t[1]-(n&&i/n),2)]]}m.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");for(var n="M"+e[0],r=[],a=1;a<e.length-1;a++)r.push(E(e[a-1],e[a],e[a+1],t));for(n+="Q"+r[0][0]+" "+e[1],a=2;a<e.length-1;a++)n+="C"+r[a-2][1]+" "+r[a-1][0]+" "+e[a];return n+="Q"+r[e.length-3][1]+" "+e[e.length-1]},m.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";for(var n="M"+e[0],r=e.length-1,a=[E(e[r],e[0],e[1],t)],i=1;i<r;i++)a.push(E(e[i-1],e[i],e[i+1],t));for(a.push(E(e[r-1],e[r],e[0],t)),i=1;i<=r;i++)n+="C"+a[i-1][1]+" "+a[i][0]+" "+e[i];return n+="C"+a[r][1]+" "+a[0][0]+" "+e[0]+"Z"};function S(e,t){return"L"+T.round(t[0],2)+","+T.round(t[1],2)}var L={hv:function(e,t){return"H"+T.round(t[0],2)+"V"+T.round(t[1],2)},vh:function(e,t){return"V"+T.round(t[1],2)+"H"+T.round(t[0],2)},hvh:function(e,t){return"H"+T.round((e[0]+t[0])/2,2)+"V"+T.round(t[1],2)+"H"+T.round(t[0],2)},vhv:function(e,t){return"V"+T.round((e[1]+t[1])/2,2)+"H"+T.round(t[0],2)+"V"+T.round(t[1],2)}},C=(m.steps=function(e){var r=L[e]||S;return function(e){for(var t="M"+T.round(e[0][0],2)+","+T.round(e[0][1],2),n=1;n<e.length;n++)t+=r(e[n-1],e[n]);return t}},m.makeTester=function(){var e=k.ensureSingleById(T.select("body"),"svg","js-plotly-tester",function(e){e.attr(i.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),t=k.ensureSingle(e,"path","js-reference-point",function(e){e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});m.tester=e,m.testref=t},m.savedBBoxes={},0);function O(e){var t=e.getAttribute("data-unformatted");if(null!==t)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}function D(e,t){if(!e)return null;t=t._context,t=!t._exportedPlot&&t._baseUrl||"";return t?"url('"+t+"#"+e+"')":"url(#"+e+")"}m.bBox=function(e,t,n){var r,a,i;if(n=n||O(e)){if(r=m.savedBBoxes[n])return k.extendFlat({},r)}else if(1===e.childNodes.length){var o=e.childNodes[0];if(n=O(o)){var s=+o.getAttribute("x")||0,l=+o.getAttribute("y")||0,c=o.getAttribute("transform");if(!c)return o=m.bBox(o,!1,n),s&&(o.left+=s,o.right+=s),l&&(o.top+=l,o.bottom+=l),o;if(r=m.savedBBoxes[n+="~"+s+"~"+l+"~"+c])return k.extendFlat({},r)}}t?a=e:(i=m.tester.node(),a=e.cloneNode(!0),i.appendChild(a)),T.select(a).attr("transform",null).call(d.positionText,0,0);o=a.getBoundingClientRect(),s=m.testref.node().getBoundingClientRect(),t||i.removeChild(a),l={height:o.height,width:o.width,left:o.left-s.left,top:o.top-s.top,right:o.right-s.left,bottom:o.bottom-s.top};return 1e4<=C&&(m.savedBBoxes={},C=0),n&&(m.savedBBoxes[n]=l),C++,k.extendFlat({},l)},m.setClipUrl=function(e,t,n){e.attr("clip-path",D(t,n))},m.getTranslate=function(e){e=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+e[0]||0,y:+e[1]||0}},m.setTranslate=function(e,t,n){var r=e.attr?"attr":"getAttribute",a=e.attr?"attr":"setAttribute",r=e[r]("transform")||"";return t=t||0,n=n||0,r=r.replace(/(\btranslate\(.*?\);?)/,"").trim(),r=(r+=c(t,n)).trim(),e[a]("transform",r),r},m.getScale=function(e){e=(e[e.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+e[0]||1,y:+e[1]||1}},m.setScale=function(e,t,n){var r=e.attr?"attr":"getAttribute",a=e.attr?"attr":"setAttribute",r=e[r]("transform")||"";return t=t||1,n=n||1,r=r.replace(/(\bscale\(.*?\);?)/,"").trim(),r=(r+="scale("+t+","+n+")").trim(),e[a]("transform",r),r};var I=/\s*sc.*/,R=(m.setPointGroupScale=function(e,t,n){var r;t=t||1,n=n||1,e&&(r=1===t&&1===n?"":"scale("+t+","+n+")",e.each(function(){var e=(this.getAttribute("transform")||"").replace(I,""),e=(e+=r).trim();this.setAttribute("transform",e)}))},/translate\([^)]*\)\s*$/);m.setTextPointsScale=function(e,a,i){e&&e.each(function(){var e,t,n=T.select(this),r=n.select("text");r.node()&&(t=parseFloat(r.attr("x")||0),r=parseFloat(r.attr("y")||0),e=(n.attr("transform")||"").match(R),t=1===a&&1===i?[]:[c(t,r),"scale("+a+","+i+")",c(-t,-r)],e&&t.push(e),n.attr("transform",t.join("")))})}},{"../../components/fx/helpers":193,"../../constants/alignment":262,"../../constants/interactions":266,"../../constants/xmlns_namespaces":268,"../../lib":287,"../../lib/svg_text_utils":310,"../../registry":378,"../../traces/scatter/make_bubble_size_func":517,"../../traces/scatter/subtypes":525,"../color":157,"../colorscale":169,"./symbol_defs":180,"@plotly/d3":20,"fast-isnumeric":33,tinycolor2:121}],180:[function(e,t,n){"use strict";var c=e("@plotly/d3");t.exports={circle:{n:0,f:function(e){e=c.round(e,2);return"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"}},square:{n:1,f:function(e){e=c.round(e,2);return"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"}},diamond:{n:2,f:function(e){e=c.round(1.3*e,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"Z"}},cross:{n:3,f:function(e){var t=c.round(.4*e,2),e=c.round(1.2*e,2);return"M"+e+","+t+"H"+t+"V"+e+"H-"+t+"V"+t+"H-"+e+"V-"+t+"H-"+t+"V-"+e+"H"+t+"V-"+t+"H"+e+"Z"}},x:{n:4,f:function(e){var e=c.round(.8*e/Math.sqrt(2),2),t="l"+e+","+e,n="l"+e+",-"+e,r="l-"+e+",-"+e,a="l-"+e+","+e;return"M0,"+e+t+n+r+n+r+a+r+a+t+a+t+"Z"}},"triangle-up":{n:5,f:function(e){var t=c.round(2*e/Math.sqrt(3),2);return"M-"+t+","+c.round(e/2,2)+"H"+t+"L0,-"+c.round(e,2)+"Z"}},"triangle-down":{n:6,f:function(e){var t=c.round(2*e/Math.sqrt(3),2);return"M-"+t+",-"+c.round(e/2,2)+"H"+t+"L0,"+c.round(e,2)+"Z"}},"triangle-left":{n:7,f:function(e){var t=c.round(2*e/Math.sqrt(3),2);return"M"+c.round(e/2,2)+",-"+t+"V"+t+"L-"+c.round(e,2)+",0Z"}},"triangle-right":{n:8,f:function(e){var t=c.round(2*e/Math.sqrt(3),2);return"M-"+c.round(e/2,2)+",-"+t+"V"+t+"L"+c.round(e,2)+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=c.round(.6*e,2),e=c.round(1.2*e,2);return"M-"+e+",-"+t+"H"+t+"V"+e+"Z"}},"triangle-se":{n:10,f:function(e){var t=c.round(.6*e,2),e=c.round(1.2*e,2);return"M"+t+",-"+e+"V"+t+"H-"+e+"Z"}},"triangle-sw":{n:11,f:function(e){var t=c.round(.6*e,2),e=c.round(1.2*e,2);return"M"+e+","+t+"H-"+t+"V-"+e+"Z"}},"triangle-nw":{n:12,f:function(e){var t=c.round(.6*e,2),e=c.round(1.2*e,2);return"M-"+t+","+e+"V-"+t+"H"+e+"Z"}},pentagon:{n:13,f:function(e){var t=c.round(.951*e,2),n=c.round(.588*e,2),r=c.round(-e,2),a=c.round(-.309*e,2);return"M"+t+","+a+"L"+n+","+c.round(.809*e,2)+"H-"+n+"L-"+t+","+a+"L0,"+r+"Z"}},hexagon:{n:14,f:function(e){var t=c.round(e,2),n=c.round(e/2,2),e=c.round(e*Math.sqrt(3)/2,2);return"M"+e+",-"+n+"V"+n+"L0,"+t+"L-"+e+","+n+"V-"+n+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=c.round(e,2),n=c.round(e/2,2),e=c.round(e*Math.sqrt(3)/2,2);return"M-"+n+","+e+"H"+n+"L"+t+",0L"+n+",-"+e+"H-"+n+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=c.round(.924*e,2),e=c.round(.383*e,2);return"M-"+e+",-"+t+"H"+e+"L"+t+",-"+e+"V"+e+"L"+e+","+t+"H-"+e+"L-"+t+","+e+"V-"+e+"Z"}},star:{n:17,f:function(e){var e=1.4*e,t=c.round(.225*e,2),n=c.round(.951*e,2),r=c.round(.363*e,2),a=c.round(.588*e,2),i=c.round(-e,2),o=c.round(-.309*e,2),s=c.round(.118*e,2),l=c.round(.809*e,2);return"M"+t+","+o+"H"+n+"L"+r+","+s+"L"+a+","+l+"L0,"+c.round(.382*e,2)+"L-"+a+","+l+"L-"+r+","+s+"L-"+n+","+o+"H-"+t+"L0,"+i+"Z"}},hexagram:{n:18,f:function(e){var t=c.round(.66*e,2),n=c.round(.38*e,2),e=c.round(.76*e,2);return"M-"+e+",0l-"+n+",-"+t+"h"+e+"l"+n+",-"+t+"l"+n+","+t+"h"+e+"l-"+n+","+t+"l"+n+","+t+"h-"+e+"l-"+n+","+t+"l-"+n+",-"+t+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=c.round(e*Math.sqrt(3)*.8,2),n=c.round(.8*e,2),r=c.round(1.6*e,2),e=c.round(4*e,2),e="A "+e+","+e+" 0 0 1 ";return"M-"+t+","+n+e+t+","+n+e+"0,-"+r+e+"-"+t+","+n+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=c.round(e*Math.sqrt(3)*.8,2),n=c.round(.8*e,2),r=c.round(1.6*e,2),e=c.round(4*e,2),e="A "+e+","+e+" 0 0 1 ";return"M"+t+",-"+n+e+"-"+t+",-"+n+e+"0,"+r+e+t+",-"+n+"Z"}},"star-square":{n:21,f:function(e){var t=c.round(1.1*e,2),e=c.round(2*e,2),e="A "+e+","+e+" 0 0 1 ";return"M-"+t+",-"+t+e+"-"+t+","+t+e+t+","+t+e+t+",-"+t+e+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=c.round(1.4*e,2),e=c.round(1.9*e,2),e="A "+e+","+e+" 0 0 1 ";return"M-"+t+",0"+e+"0,"+t+e+t+",0"+e+"0,-"+t+e+"-"+t+",0Z"}},"diamond-tall":{n:23,f:function(e){var t=c.round(.7*e,2),e=c.round(1.4*e,2);return"M0,"+e+"L"+t+",0L0,-"+e+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=c.round(1.4*e,2),e=c.round(.7*e,2);return"M0,"+e+"L"+t+",0L0,-"+e+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){e=c.round(e,2);return"M"+e+","+e+"H-"+e+"L"+e+",-"+e+"H-"+e+"Z"},noDot:!0},bowtie:{n:26,f:function(e){e=c.round(e,2);return"M"+e+","+e+"V-"+e+"L-"+e+","+e+"V-"+e+"Z"},noDot:!0},"circle-cross":{n:27,f:function(e){e=c.round(e,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e){var t=c.round(e,2),e=c.round(e/Math.sqrt(2),2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e){e=c.round(e,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e){e=c.round(e,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e){e=c.round(1.3*e,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"ZM0,-"+e+"V"+e+"M-"+e+",0H"+e},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e){var t=c.round(1.3*e,2),e=c.round(.65*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM-"+e+",-"+e+"L"+e+","+e+"M-"+e+","+e+"L"+e+",-"+e},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e){e=c.round(1.4*e,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e){e=c.round(e,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e){var t=c.round(1.2*e,2),e=c.round(.85*e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e){var t=c.round(e/2,2),e=c.round(e,2);return"M"+t+","+e+"V-"+e+"m-"+e+",0V"+e+"M"+e+","+t+"H-"+e+"m0,-"+e+"H"+e},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e){var t=c.round(1.2*e,2),n=c.round(1.6*e,2),e=c.round(.8*e,2);return"M-"+t+","+e+"L0,0M"+t+","+e+"L0,0M0,-"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e){var t=c.round(1.2*e,2),n=c.round(1.6*e,2),e=c.round(.8*e,2);return"M-"+t+",-"+e+"L0,0M"+t+",-"+e+"L0,0M0,"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e){var t=c.round(1.2*e,2),n=c.round(1.6*e,2),e=c.round(.8*e,2);return"M"+e+","+t+"L0,0M"+e+",-"+t+"L0,0M-"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e){var t=c.round(1.2*e,2),n=c.round(1.6*e,2),e=c.round(.8*e,2);return"M-"+e+","+t+"L0,0M-"+e+",-"+t+"L0,0M"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e){e=c.round(1.4*e,2);return"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e){e=c.round(1.4*e,2);return"M0,"+e+"V-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e){e=c.round(e,2);return"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e){e=c.round(e,2);return"M"+e+","+e+"L-"+e+",-"+e},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(e){var t=c.round(e,2);return"M0,0L-"+t+","+c.round(2*e,2)+"H"+t+"Z"},noDot:!0},"arrow-down":{n:46,f:function(e){var t=c.round(e,2);return"M0,0L-"+t+",-"+c.round(2*e,2)+"H"+t+"Z"},noDot:!0},"arrow-left":{n:47,f:function(e){var t=c.round(2*e,2),e=c.round(e,2);return"M0,0L"+t+",-"+e+"V"+e+"Z"},noDot:!0},"arrow-right":{n:48,f:function(e){var t=c.round(2*e,2),e=c.round(e,2);return"M0,0L-"+t+",-"+e+"V"+e+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(e){var t=c.round(e,2);return"M-"+t+",0H"+t+"M0,0L-"+t+","+c.round(2*e,2)+"H"+t+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(e){var t=c.round(e,2);return"M-"+t+",0H"+t+"M0,0L-"+t+",-"+c.round(2*e,2)+"H"+t+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(e){var t=c.round(2*e,2),e=c.round(e,2);return"M0,-"+e+"V"+e+"M0,0L"+t+",-"+e+"V"+e+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(e){var t=c.round(2*e,2),e=c.round(e,2);return"M0,-"+e+"V"+e+"M0,0L-"+t+",-"+e+"V"+e+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":20}],181:[function(e,t,n){"use strict";t.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],182:[function(e,t,n){"use strict";var f=e("fast-isnumeric"),s=e("../../registry"),p=e("../../plots/cartesian/axes"),h=e("../../lib"),m=e("./compute_error");function l(e,t,n,r){var a=t["error_"+r]||{},i=[];if(a.visible&&-1!==["linear","log"].indexOf(n.type)){for(var o=m(a),s=0;s<e.length;s++){var l=e[s],c=l.i;if(void 0===c)c=s;else if(null===c)continue;var u,d=l[r];f(n.c2l(d))&&(c=o(d,c),f(c[0])&&f(c[1])&&(u=l[r+"s"]=d-c[0],l=l[r+"h"]=d+c[1],i.push(u,l)))}a=n._id,t=t._extremes[a],a=p.findExtremes(n,i,h.extendFlat({tozero:t.opts.tozero},{padded:!0}));t.min=t.min.concat(a.min),t.max=t.max.concat(a.max)}}t.exports=function(e){for(var t=e.calcdata,n=0;n<t.length;n++){var r,a,i=t[n],o=i[0].trace;!0===o.visible&&s.traceIs(o,"errorBarsOK")&&(r=p.getFromId(e,o.xaxis),a=p.getFromId(e,o.yaxis),l(i,o,r,"x"),l(i,o,a,"y"))}}},{"../../lib":287,"../../plots/cartesian/axes":334,"../../registry":378,"./compute_error":183,"fast-isnumeric":33}],183:[function(e,t,n){"use strict";function s(e,t){return"percent"===e?function(e){return Math.abs(e*t/100)}:"constant"===e?function(){return Math.abs(t)}:"sqrt"===e?function(e){return Math.sqrt(Math.abs(e))}:void 0}t.exports=function(e){var r,a,t,n,i=e.type,o=e.symmetric;return"data"===i?(r=e.array||[],o?function(e,t){t=+r[t];return[t,t]}:(a=e.arrayminus||[],function(e,t){var n=+r[t],t=+a[t];return isNaN(n)&&isNaN(t)?[NaN,NaN]:[t||0,n||0]})):(t=s(i,e.value),n=s(i,e.valueminus),o||void 0===e.valueminus?function(e){e=t(e);return[e,e]}:function(e){return[n(e),t(e)]})}},{}],184:[function(e,t,n){"use strict";var l=e("fast-isnumeric"),c=e("../../registry"),u=e("../../lib"),d=e("../../plot_api/plot_template"),f=e("./attributes");t.exports=function(e,t,n,r){var a="error_"+r.axis,i=d.newContainer(t,a),o=e[a]||{};function s(e,t){return u.coerce(o,i,f,e,t)}!1!==s("visible",void 0!==o.array||void 0!==o.value||"sqrt"===o.type)&&(e=!0,"sqrt"!==(a=s("type","array"in o?"data":"percent"))&&(e=s("symmetric",!(("data"===a?"arrayminus":"valueminus")in o))),"data"===a?(s("array"),s("traceref"),e||(s("arrayminus"),s("tracerefminus"))):"percent"!==a&&"constant"!==a||(s("value"),e||s("valueminus")),a="copy_"+r.inherit+"style",r.inherit&&(t["error_"+r.inherit]||{}).visible&&s(a,!(o.color||l(o.thickness)||l(o.width))),r.inherit&&i[a]||(s("color",n),s("thickness"),s("width",c.traceIs(t,"gl3d")?0:4)))}},{"../../lib":287,"../../plot_api/plot_template":323,"../../registry":378,"./attributes":181,"fast-isnumeric":33}],185:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("../../plot_api/edit_types").overrideAll,i=e("./attributes"),o={error_x:r.extendFlat({},i),error_y:r.extendFlat({},i)},r=(delete o.error_x.copy_zstyle,delete o.error_y.copy_zstyle,delete o.error_y.copy_ystyle,{error_x:r.extendFlat({},i),error_y:r.extendFlat({},i),error_z:r.extendFlat({},i)});delete r.error_x.copy_ystyle,delete r.error_y.copy_ystyle,delete r.error_z.copy_ystyle,delete r.error_z.copy_zstyle,t.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:o,bar:o,histogram:o,scatter3d:a(r,"calc","nested"),scattergl:a(o,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:function(e,t,n){(t.error_y||{}).visible&&(n.yerr=e.yh-e.y,t.error_y.symmetric||(n.yerrneg=e.y-e.ys));(t.error_x||{}).visible&&(n.xerr=e.xh-e.x,t.error_x.symmetric||(n.xerrneg=e.x-e.xs))}}},{"../../lib":287,"../../plot_api/edit_types":316,"./attributes":181,"./calc":182,"./compute_error":183,"./defaults":184,"./plot":186,"./style":187}],186:[function(e,t,n){"use strict";var f=e("@plotly/d3"),p=e("fast-isnumeric"),h=e("../drawing"),m=e("../../traces/scatter/subtypes");t.exports=function(r,e,a,l){var c=a.xaxis,u=a.yaxis,d=l&&0<l.duration;e.each(function(e){var t,n=e[0].trace,i=n.error_x||{},o=n.error_y||{},s=(n.ids&&(t=function(e){return e.id}),m.hasMarkers(n)&&0<n.marker.maxdisplayed),n=(o.visible||i.visible||(e=[]),f.select(this).selectAll("g.errorbar").data(e,t));n.exit().remove(),e.length&&(i.visible||n.selectAll("path.xerror").remove(),o.visible||n.selectAll("path.yerror").remove(),n.style("opacity",1),t=n.enter().append("g").classed("errorbar",!0),d&&t.style("opacity",0).transition().duration(l.duration).style("opacity",1),h.setClipUrl(n,a.layerClipId,r),n.each(function(e){var t,n,r=f.select(this),a=function(e,t,n){var r={x:t.c2p(e.x),y:n.c2p(e.y)};void 0!==e.yh&&(r.yh=n.c2p(e.yh),r.ys=n.c2p(e.ys),p(r.ys)||(r.noYS=!0,r.ys=n.c2p(e.ys,!0)));void 0!==e.xh&&(r.xh=t.c2p(e.xh),r.xs=t.c2p(e.xs),p(r.xs)||(r.noXS=!0,r.xs=t.c2p(e.xs,!0)));return r}(e,c,u);s&&!e.vis||(e=r.select("path.yerror"),o.visible&&p(a.x)&&p(a.yh)&&p(a.ys)?(n=o.width,t="M"+(a.x-n)+","+a.yh+"h"+2*n+"m-"+n+",0V"+a.ys,a.noYS||(t+="m-"+n+",0h"+2*n),!e.size()?e=r.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):d&&(e=e.transition().duration(l.duration).ease(l.easing)),e.attr("d",t)):e.remove(),n=r.select("path.xerror"),i.visible&&p(a.y)&&p(a.xh)&&p(a.xs)?(e=(i.copy_ystyle?o:i).width,t="M"+a.xh+","+(a.y-e)+"v"+2*e+"m0,-"+e+"H"+a.xs,a.noXS||(t+="m0,-"+e+"v"+2*e),!n.size()?n=r.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):d&&(n=n.transition().duration(l.duration).ease(l.easing)),n.attr("d",t)):n.remove())}))})}},{"../../traces/scatter/subtypes":525,"../drawing":179,"@plotly/d3":20,"fast-isnumeric":33}],187:[function(e,t,n){"use strict";var r=e("@plotly/d3"),a=e("../color");t.exports=function(e){e.each(function(e){var e=e[0].trace,t=e.error_y||{},e=e.error_x||{},n=r.select(this);n.selectAll("path.yerror").style("stroke-width",t.thickness+"px").call(a.stroke,t.color),e.copy_ystyle&&(e=t),n.selectAll("path.xerror").style("stroke-width",e.thickness+"px").call(a.stroke,e.color)})}},{"../color":157,"@plotly/d3":20}],188:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("./layout_attributes").hoverlabel,e=e("../../lib/extend").extendFlat;t.exports={hoverlabel:{bgcolor:e({},a.bgcolor,{arrayOk:!0}),bordercolor:e({},a.bordercolor,{arrayOk:!0}),font:r({arrayOk:!0,editType:"none"}),align:e({},a.align,{arrayOk:!0}),namelength:e({},a.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":281,"../../plots/font_attributes":365,"./layout_attributes":198}],189:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../registry");function c(e,t,n,r){r=r||s.identity,Array.isArray(e)&&(t[0][n]=r(e))}t.exports=function(e){var t=e.calcdata,n=e._fullLayout;for(var r=0;r<t.length;r++){var a,i=t[r],o=i[0].trace;l.traceIs(o,"pie-like")||((a=l.traceIs(o,"2dMap")?c:s.fillArray)(o.hoverinfo,i,"hi",function(t){return function(e){return s.coerceHoverinfo({hoverinfo:e},{_module:t._module},n)}}(o)),o.hovertemplate&&a(o.hovertemplate,i,"ht"),o.hoverlabel&&(a(o.hoverlabel.bgcolor,i,"hbg"),a(o.hoverlabel.bordercolor,i,"hbc"),a(o.hoverlabel.font.size,i,"hts"),a(o.hoverlabel.font.color,i,"htc"),a(o.hoverlabel.font.family,i,"htf"),a(o.hoverlabel.namelength,i,"hnl"),a(o.hoverlabel.align,i,"hta")))}}},{"../../lib":287,"../../registry":378}],190:[function(e,t,n){"use strict";var i=e("../../registry"),o=e("./hover").hover;t.exports=function(e,t,n){var r=i.getComponentMethod("annotations","onClick")(e,e._hoverdata);function a(){e.emit("plotly_click",{points:e._hoverdata,event:t})}void 0!==n&&o(e,t,n,!0),e._hoverdata&&t&&t.target&&(r&&r.then?r.then(a):a(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},{"../../registry":378,"./hover":194}],191:[function(e,t,n){"use strict";t.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],192:[function(e,t,n){"use strict";var a=e("../../lib"),i=e("./attributes"),o=e("./hoverlabel_defaults");t.exports=function(n,r,e,t){t=a.extendFlat({},t.hoverlabel);r.hovertemplate&&(t.namelength=-1),o(n,r,function(e,t){return a.coerce(n,r,i,e,t)},t)}},{"../../lib":287,"./attributes":188,"./hoverlabel_defaults":195}],193:[function(e,t,o){"use strict";var u=e("../../lib"),n=(o.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo},o.isTraceInSubplots=function(e,t){if("splom"!==e.type)return-1!==t.indexOf(o.getSubplot(e));for(var n=e.xaxes||[],r=e.yaxes||[],a=0;a<n.length;a++)for(var i=0;i<r.length;i++)if(-1!==t.indexOf(n[a]+r[i]))return!0;return!1},o.flat=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=t;return n},o.p2c=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r].p2c(t);return n},o.getDistanceFunction=function(e,t,n,r){return"closest"===e?r||o.quadrature(t,n):"x"===e.charAt(0)?t:n},o.getClosest=function(e,t,n){if(!1!==n.index)0<=n.index&&n.index<e.length?n.distance=0:n.index=!1;else for(var r=0;r<e.length;r++){var a=t(e[r]);a<=n.distance&&(n.index=r,n.distance=a)}return n},o.inbox=function(e,t,n){return e*t<0||0===e?n:1/0},o.quadrature=function(n,r){return function(e){var t=n(e),e=r(e);return Math.sqrt(t*t+e*e)}},o.makeEventData=function(e,t,n){var r,a="index"in e?e.index:e.pointNumber,i={data:t._input,fullData:t,curveNumber:t.index,pointNumber:a};return t._indexToPoints?1===(r=t._indexToPoints[a]).length?i.pointIndex=r[0]:i.pointIndices=r:i.pointIndex=a,t._module.eventData?i=t._module.eventData(i,e,t,n,a):("xVal"in e?i.x=e.xVal:"x"in e&&(i.x=e.x),"yVal"in e?i.y=e.yVal:"y"in e&&(i.y=e.y),e.xa&&(i.xaxis=e.xa),e.ya&&(i.yaxis=e.ya),void 0!==e.zLabelVal&&(i.z=e.zLabelVal)),o.appendArrayPointValue(i,t,a),i},o.appendArrayPointValue=function(e,t,n){var r=t._arrayAttrs;if(r)for(var a=0;a<r.length;a++){var i=r[a],o=d(i);void 0!==e[o]||void 0!==(i=f(u.nestedProperty(t,i).get(),n))&&(e[o]=i)}},o.appendArrayMultiPointValues=function(e,t,n){var r=t._arrayAttrs;if(r)for(var a=0;a<r.length;a++){var i=r[a],o=d(i);if(void 0===e[o]){for(var s=u.nestedProperty(t,i).get(),l=new Array(n.length),c=0;c<n.length;c++)l[c]=f(s,n[c]);e[o]=l}}},{ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"});function d(e){return n[e]||e}function f(e,t){return Array.isArray(t)?Array.isArray(e)&&Array.isArray(e[t[0]])?e[t[0]][t[1]]:void 0:e[t]}var r={x:!0,y:!0},a={"x unified":!0,"y unified":!0};o.isUnifiedHover=function(e){return"string"==typeof e&&!!a[e]},o.isXYhover=function(e){return"string"==typeof e&&!!r[e]}},{"../../lib":287}],194:[function(e,n,t){"use strict";var fe=e("@plotly/d3"),pe=e("fast-isnumeric"),_=e("tinycolor2"),he=e("../../lib"),z=he.strTranslate,j=he.strRotate,me=e("../../lib/events"),q=e("../../lib/svg_text_utils"),ge=e("../../lib/override_cursor"),H=e("../drawing"),ye=e("../color"),ve=e("../dragelement"),be=e("../../plots/cartesian/axes"),xe=e("../../registry"),_e=e("./helpers"),B=e("./constants"),U=e("../legend/defaults"),V=e("../legend/draw"),Y=B.YANGLE,e=Math.PI*Y/180,we=1/Math.sin(e),y=Math.cos(e),v=Math.sin(e),$=B.HOVERARROWSIZE,G=B.HOVERTEXTPAD,Te={box:!0,ohlc:!0,violin:!0,candlestick:!0},De={scatter:!0,scattergl:!0,splom:!0};function ke(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa?e.xa._id:"",e.ya?e.ya._id:""].join(",")}t.hover=function(se,le,ce,ue){se=he.getGraphDiv(se);var de=le.target;he.throttle(se._fullLayout._uid+B.HOVERID,B.HOVERMINTIME,function(){var e=se,l=le,N=ue,t=de,c=(r=(r=ce)||"xy",Array.isArray(r)?r:[r]),u=e._fullLayout,n=u._plots||[],r=n[r],d=u._has("cartesian");r&&(r=r.overlays.map(function(e){return e.id}),c=c.concat(r));for(var F=c.length,f=new Array(F),p=new Array(F),z=!1,a=0;a<F;a++){var i=c[a];if(n[i])z=!0,f[a]=n[i].xaxis,p[a]=n[i].yaxis;else{if(!u[i]||!u[i]._subplot)return void he.warn("Unrecognized subplot: "+i);i=u[i]._subplot;f[a]=i.xaxis,p[a]=i.yaxis}}var h=l.hovermode||u.hovermode;if(h&&!z&&(h="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(h)||!e.calcdata||e.querySelector(".zoombox")||e._dragging)ve.unhoverRaw(e,l);else{var m=u.hoverdistance,g=(-1===m&&(m=1/0),u.spikedistance);-1===g&&(g=1/0);var j,q,o,y,v,b,x,_,w,T,H,k,B,A=[],M=[],E={hLinePoint:null,vLinePoint:null},U=!1;if(Array.isArray(l))for(h="array",o=0;o<l.length;o++)(v=e.calcdata[l[o].curveNumber||0])&&(b=v[0].trace,"skip"!==v[0].trace.hoverinfo&&(M.push(v),"h"===b.orientation&&(U=!0)));else{for(y=0;y<e.calcdata.length;y++)v=e.calcdata[y],"skip"!==(b=v[0].trace).hoverinfo&&_e.isTraceInSubplots(b,c)&&(M.push(v),"h"===b.orientation&&(U=!0));if(!t)S="xpx"in l?l.xpx:f[0]._length/2,L="ypx"in l?l.ypx:p[0]._length/2;else{if(!1===me.triggerHandler(e,"plotly_beforehover",l))return;r=t.getBoundingClientRect(),r=(S=l.clientX-r.left,L=l.clientY-r.top,u._calcInverseTransform(e),he.apply3DTransform(u._invTransform)(S,L));if(S=r[0],L=r[1],S<0||S>f[0]._length||L<0||L>p[0]._length)return void ve.unhoverRaw(e,l)}if(l.pointerX=S+f[0]._offset,l.pointerY=L+p[0]._offset,j="xval"in l?_e.flat(c,l.xval):_e.p2c(f,S),q="yval"in l?_e.flat(c,l.yval):_e.p2c(p,L),!pe(j[0])||!pe(q[0]))return void(he.warn("Fx.hover failed",l,e),ve.unhoverRaw(e,l))}var V=1/0;re();var s,r={fullLayout:u,container:u._hoverlayer,event:l},S=e._spikepoints,L={vLinePoint:E.vLinePoint,hLinePoint:E.hLinePoint};e._spikepoints=L,oe();var L=("x"===(L=h.charAt(0))||"y"===L)&&A[0]&&De[A[0].trace.type];if(d&&0!==g&&0!==A.length&&(O=ae(A.filter(function(e){return e.ya.showspikes}),g,L),E.hLinePoint=ie(O),O=ae(A.filter(function(e){return e.xa.showspikes}),g,L),E.vLinePoint=ie(O)),0===A.length)L=ve.unhoverRaw(e,l),!d||null===E.hLinePoint&&null===E.vLinePoint||Se(S)&&Ee(e,E,r);else{if(d&&Se(S)&&Ee(e,E,r),_e.isXYhover(w)&&0!==A[0].length&&"splom"!==A[0].trace.type){var C=A[0],Y=(A=Te[C.trace.type]?A.filter(function(e){return e.trace.index===C.trace.index}):[C]).length,O=Le("x",C,u),L=Le("y",C,u),$=(re(O,L),[]),G={},W=0,Z=function(e){var t,n,r=Te[e.trace.type]?ke(e):e.trace.index;G[r]?(t=G[r]-1,n=$[t],0<t&&Math.abs(e.distance)<Math.abs(n.distance)&&($[t]=e)):(W++,G[r]=W,$.push(e))};for(s=0;s<Y;s++)Z(A[s]);for(s=A.length-1;Y-1<s;s--)Z(A[s]);A=$,oe()}var S=e._hoverdata,X=[],J=Ce(e),K=Oe(e);for(o=0;o<A.length;o++){var D,Q,ee,I,te,R,P=A[o],ne=_e.makeEventData(P,P.trace,P.cd);!1!==P.hovertemplate&&(D=!1,P.cd[P.index]&&P.cd[P.index].ht&&(D=P.cd[P.index].ht),P.hovertemplate=D||P.trace.hovertemplate||!1),P.xa&&P.ya&&(D=P.x0+P.xa._offset,I=P.x1+P.xa._offset,R=P.y0+P.ya._offset,Q=P.y1+P.ya._offset,ee=Math.min(D,I),I=Math.max(D,I),te=Math.min(R,Q),R=Math.max(R,Q),ne.bbox={x0:ee+K,x1:I+K,y0:te+J,y1:R+J}),P.eventData=[ne],X.push(ne)}e._hoverdata=X,r="y"===h&&(1<M.length||1<A.length)||"closest"===h&&U&&1<A.length,O=ye.combine(u.plot_bgcolor||ye.background,u.paper_bgcolor),L=Ae(A,{gd:e,hovermode:h,rotateLabels:r,bgColor:O,container:u._hoverlayer,outerContainer:u._paper.node(),commonLabelOpts:u.hoverlabel,hoverdistance:u.hoverdistance}),_e.isUnifiedHover(h)||(!function(e,r,a){var i,o,s,l,c,u,t,n=0,d=1,f=e.size(),p=new Array(f),h=0;function m(e){var t=e[0],n=e[e.length-1];if(o=t.pmin-t.pos-t.dp+t.size,s=n.pos+n.dp+n.size-t.pmax,.01<o){for(c=e.length-1;0<=c;c--)e[c].dp+=o;i=!1}if(!(s<.01)){if(o<-.01){for(c=e.length-1;0<=c;c--)e[c].dp-=s;i=!1}if(i){var r=0;for(l=0;l<e.length;l++)(u=e[l]).pos+u.dp+u.size>t.pmax&&r++;for(l=e.length-1;0<=l&&!(r<=0);l--)(u=e[l]).pos>t.pmax-1&&(u.del=!0,r--);for(l=0;l<e.length&&!(r<=0);l++)if((u=e[l]).pos<t.pmin+1)for(u.del=!0,r--,s=2*u.size,c=e.length-1;0<=c;c--)e[c].dp-=s;for(l=e.length-1;0<=l&&!(r<=0);l--)(u=e[l]).pos+u.dp+u.size>t.pmax&&(u.del=!0,r--)}}}e.each(function(e){var t=e[r],n="x"===t._id.charAt(0),t=t.range;0===h&&t&&t[0]>t[1]!=n&&(d=-1),p[h++]=[{datum:e,traceIndex:e.trace.index,dp:0,pos:e.pos,posref:e.posref,size:e.by*(n?we:1)/2,pmin:0,pmax:n?a.width:a.height}]}),p.sort(function(e,t){return e[0].posref-t[0].posref||d*(t[0].traceIndex-e[0].traceIndex)});for(;!i&&n<=f;){for(n++,i=!0,l=0;l<p.length-1;){var g=p[l],y=p[l+1],v=g[g.length-1],b=y[0];if(.01<(o=v.pos+v.dp+v.size-b.pos-b.dp+b.size)&&v.pmin===b.pmin&&v.pmax===b.pmax){for(c=y.length-1;0<=c;c--)y[c].dp+=o;for(g.push.apply(g,y),p.splice(l+1,1),t=0,c=g.length-1;0<=c;c--)t+=g[c].dp;for(s=t/g.length,c=g.length-1;0<=c;c--)g[c].dp-=s;i=!1}else l++}p.forEach(m)}for(l=p.length-1;0<=l;l--){var x=p[l];for(c=x.length-1;0<=c;c--){var _=x[c],w=_.datum;w.offset=_.dp,w.del=_.del}}}(L,r?"xa":"ya",u),Me(L,r,u._invScaleX,u._invScaleY)),t&&t.tagName&&(O=xe.getComponentMethod("annotations","hasClickToShow")(e,X),ge(fe.select(t),O?"pointer":"")),t&&!N&&function(e,t){if(!t||t.length!==e._hoverdata.length)return 1;for(var n=t.length-1;0<=n;n--){var r=t[n],a=e._hoverdata[n];if(r.curveNumber!==a.curveNumber||String(r.pointNumber)!==String(a.pointNumber)||String(r.pointNumbers)!==String(a.pointNumbers))return 1}return}(e,S)&&(S&&e.emit("plotly_unhover",{event:l,points:S}),e.emit("plotly_hover",{event:l,points:e._hoverdata,xaxes:f,yaxes:p,xvals:j,yvals:q}))}}function re(e,t){for(y=0;y<M.length;y++)if((v=M[y])&&v[0]&&v[0].trace&&!0===(b=v[0].trace).visible&&0!==b._length&&-1===["carpet","contourcarpet"].indexOf(b._module.name)){var n,r,a;if("splom"===b.type?x=c[_=0]:(x=_e.getSubplot(b),_=c.indexOf(x)),w=h,_e.isUnifiedHover(w)&&(w=w.charAt(0)),k={cd:v,trace:b,xa:f[_],ya:p[_],maxHoverDistance:m,maxSpikeDistance:g,index:!1,distance:Math.min(V,m),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:ye.defaultLine,name:b.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},u[x]&&(k.subplot=u[x]._subplot),u._splomScenes&&u._splomScenes[b.uid]&&(k.scene=u._splomScenes[b.uid]),B=A.length,"array"===w?"pointNumber"in(a=l[y])?(k.index=a.pointNumber,w="closest"):(w="","xval"in a&&(T=a.xval,w="x"),"yval"in a&&(H=a.yval,w=w?"closest":"y")):H=void 0!==e&&void 0!==t?(T=e,t):(T=j[_],q[_]),0!==m)if(b._module&&b._module.hoverPoints){var i=b._module.hoverPoints(k,T,H,w,{finiteRange:!0,hoverLayer:u._hoverlayer});if(i)for(var o,s=0;s<i.length;s++)o=i[s],pe(o.x0)&&pe(o.y0)&&A.push(function(r,e){var n=r.index,a=r.trace||{},i=r.cd[0],o=r.cd[n]||{};function s(e){return e||pe(e)&&0===e}var l=Array.isArray(n)?function(e,t){e=he.castOption(i,n,e);return s(e)?e:he.extractOption({},a,"",t)}:function(e,t){return he.extractOption(o,a,e,t)};function t(e,t,n){t=l(t,n);s(t)&&(r[e]=t)}t("hoverinfo","hi","hoverinfo"),t("bgcolor","hbg","hoverlabel.bgcolor"),t("borderColor","hbc","hoverlabel.bordercolor"),t("fontFamily","htf","hoverlabel.font.family"),t("fontSize","hts","hoverlabel.font.size"),t("fontColor","htc","hoverlabel.font.color"),t("nameLength","hnl","hoverlabel.namelength"),t("textAlign","hta","hoverlabel.align"),r.posref="y"===e||"closest"===e&&"h"===a.orientation?r.xa._offset+(r.x0+r.x1)/2:r.ya._offset+(r.y0+r.y1)/2,r.x0=he.constrain(r.x0,0,r.xa._length),r.x1=he.constrain(r.x1,0,r.xa._length),r.y0=he.constrain(r.y0,0,r.ya._length),r.y1=he.constrain(r.y1,0,r.ya._length),void 0!==r.xLabelVal&&(r.xLabel="xLabel"in r?r.xLabel:be.hoverLabelText(r.xa,r.xLabelVal,a.xhoverformat),r.xVal=r.xa.c2d(r.xLabelVal));void 0!==r.yLabelVal&&(r.yLabel="yLabel"in r?r.yLabel:be.hoverLabelText(r.ya,r.yLabelVal,a.yhoverformat),r.yVal=r.ya.c2d(r.yLabelVal));void 0!==r.zLabelVal&&void 0===r.zLabel&&(r.zLabel=String(r.zLabelVal));isNaN(r.xerr)||"log"===r.xa.type&&r.xerr<=0||(c=be.tickText(r.xa,r.xa.c2l(r.xerr),"hover").text,void 0!==r.xerrneg?r.xLabel+=" +"+c+" / -"+be.tickText(r.xa,r.xa.c2l(r.xerrneg),"hover").text:r.xLabel+="  "+c,"x"===e&&(r.distance+=1));isNaN(r.yerr)||"log"===r.ya.type&&r.yerr<=0||(c=be.tickText(r.ya,r.ya.c2l(r.yerr),"hover").text,void 0!==r.yerrneg?r.yLabel+=" +"+c+" / -"+be.tickText(r.ya,r.ya.c2l(r.yerrneg),"hover").text:r.yLabel+="  "+c,"y"===e&&(r.distance+=1));var c=r.hoverinfo||r.trace.hoverinfo;c&&"all"!==c&&(-1===(c=Array.isArray(c)?c:c.split("+")).indexOf("x")&&(r.xLabel=void 0),-1===c.indexOf("y")&&(r.yLabel=void 0),-1===c.indexOf("z")&&(r.zLabel=void 0),-1===c.indexOf("text")&&(r.text=void 0),-1===c.indexOf("name")&&(r.name=void 0));return r}(o,h))}else he.log("Unrecognized trace type in hover:",b);"closest"===h&&A.length>B&&(A.splice(0,B),V=A[0].distance),d&&0!==g&&0===A.length&&(k.distance=g,k.index=!1,(a=(a=b._module.hoverPoints(k,T,H,"closest",{hoverLayer:u._hoverlayer}))&&a.filter(function(e){return e.spikeDistance<=g}))&&a.length&&((r=a.filter(function(e){return e.xa.showspikes&&"hovered data"!==e.xa.spikesnap})).length&&(r=r[0],pe(r.x0)&&pe(r.y0)&&(n=ie(r),(!E.vLinePoint||E.vLinePoint.spikeDistance>n.spikeDistance)&&(E.vLinePoint=n))),(r=a.filter(function(e){return e.ya.showspikes&&"hovered data"!==e.ya.spikesnap})).length&&(r=r[0],pe(r.x0)&&pe(r.y0)&&(n=ie(r),(!E.hLinePoint||E.hLinePoint.spikeDistance>n.spikeDistance)&&(E.hLinePoint=n)))))}}function ae(e,t,n){for(var r,a=null,i=1/0,o=0;o<e.length;o++)r=e[o].spikeDistance,(r=n&&0===o?-1/0:r)<=i&&r<=t&&(a=e[o],i=r);return a}function ie(e){return e?{xa:e.xa,ya:e.ya,x:void 0!==e.xSpike?e.xSpike:(e.x0+e.x1)/2,y:void 0!==e.ySpike?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}:null}function oe(){A.sort(function(e,t){return e.distance-t.distance}),A=function(e,t){for(var n=t.charAt(0),r=[],a=[],i=[],o=0;o<e.length;o++){var s=e[o];(xe.traceIs(s.trace,"bar-like")||xe.traceIs(s.trace,"box-violin")?i:s.trace[n+"period"]?a:r).push(s)}return r.concat(a).concat(i)}(A,h)}})},t.loneHover=function(e,l){var t=!0,c=(Array.isArray(e)||(t=!1,e=[e]),l.gd),u=Ce(c),d=Oe(c),e=Ae(e.map(function(e){var t,n,r=e._x0||e.x0||e.x||0,a=e._x1||e.x1||e.x||0,i=e._y0||e.y0||e.y||0,o=e._y1||e.y1||e.y||0,s=e.eventData;return s?(t=Math.min(r,a),r=Math.max(r,a),a=Math.min(i,o),i=Math.max(i,o),o=e.trace,xe.traceIs(o,"gl3d")&&(t+=n=(o=c._fullLayout[o.scene]._scene.container).offsetLeft,r+=n,a+=n=o.offsetTop,i+=n),s.bbox={x0:t+d,x1:r+d,y0:a+u,y1:i+u},l.inOut_bbox&&l.inOut_bbox.push(s.bbox)):s=!1,{color:e.color||ye.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,nameLength:e.nameLength,textAlign:e.textAlign,trace:e.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:e.hovertemplate||!1,hovertemplateLabels:e.hovertemplateLabels||!1,eventData:s}}),{gd:c,hovermode:"closest",rotateLabels:!1,bgColor:l.bgColor||ye.background,container:fe.select(l.container),outerContainer:l.outerContainer||l.container}),r=0,a=0,n=(e.sort(function(e,t){return e.y0-t.y0}).each(function(e,t){var n=e.y0-e.by/2;e.offset=n-5<r?r-n+5:0,r=n+e.by+e.offset,t===l.anchorIndex&&(a=e.offset)}).each(function(e){e.offset-=a}),c._fullLayout._invScaleX);return Me(e,!1,n,c._fullLayout._invScaleY),t?e:e.node()};var c=/<extra>([\s\S]*)<\/extra>/;function Ae(e,t){var m=t.gd,g=m._fullLayout,y=t.hovermode,N=t.rotateLabels,v=t.bgColor,n=t.container,r=t.outerContainer,b=t.commonLabelOpts||{};if(0===e.length)return[[]];var x=t.fontFamily||B.HOVERFONT,_=t.fontSize||B.HOVERFONTSIZE,w=e[0],T=w.xa,k=w.ya,a=y.charAt(0),A=w[a+"Label"],r=Z(m,r),M=r.top,E=r.width,S=r.height,L=void 0!==A&&w.distance<=t.hoverdistance&&("x"===y||"y"===y);if(L){for(var i=!0,o=0;o<e.length;o++)if(i&&void 0===e[o].zLabel&&(i=!1),s=e[o].hoverinfo||e[o].trace.hoverinfo){var s=Array.isArray(s)?s:s.split("+");if(-1===s.indexOf("all")&&-1===s.indexOf(y)){L=!1;break}}i&&(L=!1)}r=n.selectAll("g.axistext").data(L?[0]:[]);if(r.enter().append("g").classed("axistext",!0),r.exit().remove(),r.each(function(){var e,t,n,r,a,i,o,s=fe.select(this),l=he.ensureSingle(s,"path","",function(e){e.style({"stroke-width":"1px"})}),c=he.ensureSingle(s,"text","",function(e){e.attr("data-notex",1)}),u=b.bgcolor||ye.defaultLine,d=b.bordercolor||ye.contrast(u),f=ye.contrast(u),p={family:b.font.family||x,size:b.font.size||_,color:b.font.color||f},h=(l.style({fill:u,stroke:d}),c.text(A).call(H.font,p).call(q.positionText,0,0).call(q.convertToTspans,m),s.attr("transform",""),Z(m,c.node()));"x"===y?(f="top"===T.side?"-":"",c.attr("text-anchor","middle").call(q.positionText,0,"top"===T.side?M-h.bottom-$-G:M-h.top+$+G),r=T._offset+(w.x0+w.x1)/2,a=k._offset+("top"===T.side?0:k._length),r<(u=h.width/2+G)?l.attr("d","M-"+((r=u)-$)+",0L-"+(u-2*$)+","+f+$+"H"+(G+h.width/2)+"v"+f+(2*G+h.height)+"H-"+u+"V"+f+$+"Z"):r>g.width-u?(r=g.width-u,l.attr("d","M"+(u-$)+",0L"+u+","+f+$+"v"+f+(2*G+h.height)+"H-"+u+"V"+f+$+"H"+(u-2*$)+"Z")):l.attr("d","M0,0L"+$+","+f+$+"H"+(G+h.width/2)+"v"+f+(2*G+h.height)+"H-"+(G+h.width/2)+"V"+f+$+"H-"+$+"Z")):(r="right"===k.side?(e="start",t=1,n="",T._offset+T._length):(e="end",t=-1,n="-",T._offset),a=k._offset+(w.y0+w.y1)/2,c.attr("text-anchor",e),l.attr("d","M0,0L"+n+$+","+$+"V"+(G+h.height/2)+"h"+n+(2*G+h.width)+"V-"+(G+h.height/2)+"H"+n+$+"V-"+$+"Z"),d=h.height/2,u=M-h.top-d,f="clip"+g._uid+"commonlabel"+k._id,r<h.width+2*G+$?(i="M-"+($+G)+"-"+d+"h-"+(h.width-G)+"V"+d+"h"+(h.width-G)+"Z",o=h.width-r+G,q.positionText(c,o,u),"end"===e&&c.selectAll("tspan").each(function(){var e=fe.select(this),t=H.tester.append("text").text(e.text()).call(H.font,p),n=Z(m,t.node());Math.round(n.width)<Math.round(h.width)&&e.attr("x",o-n.width),t.remove()})):(q.positionText(c,t*(G+$),u),i=null),(l=g._topclips.selectAll("#"+f).data(i?[0]:[])).enter().append("clipPath").attr("id",f).append("path"),l.exit().remove(),l.select("path").attr("d",i),H.setClipUrl(c,i?f:null,m)),s.attr("transform",z(r,a))}),_e.isUnifiedHover(y)){n.selectAll("g.hovertext").remove();var l=e.filter(function(e){return"none"!==e.hoverinfo});if(0===l.length)return;var t=g.hoverlabel,r=t.font,c={showlegend:!0,legend:{title:{text:A,font:r},font:r,bgcolor:t.bgcolor,bordercolor:t.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:g.legend?g.legend.traceorder:void 0,orientation:"v"}},r={font:r},u=(U(c,r,m._fullData),r.legend);u.entries=[];for(var d=0;d<l.length;d++){var F,f,p=l[d];"none"!==p.hoverinfo&&(F=(f=W(p,!0,y,g,A))[0],f=f[1],p.name=f,p.text=""!==f?f+" : "+F:F,(f=p.cd[p.index])&&(f.mc&&(p.mc=f.mc),f.mcc&&(p.mc=f.mcc),f.mlc&&(p.mlc=f.mlc),f.mlcc&&(p.mlc=f.mlcc),f.mlw&&(p.mlw=f.mlw),f.mrc&&(p.mrc=f.mrc),f.dir&&(p.dir=f.dir)),p._distinct=!0,u.entries.push([p]))}u.entries.sort(function(e,t){return e[0].trace.index-t[0].trace.index}),u.layer=n,u._inHover=!0,u._groupTitleFont=t.grouptitlefont,V(m,u);var h,C,O,D,c=n.select("g.legend"),r=Z(m,c.node()),t=r.width+2*G,r=r.height+2*G,I=l[0],R=(I.x0+I.x1)/2,P=(I.y0+I.y1)/2,I=!(xe.traceIs(I.trace,"bar-like")||xe.traceIs(I.trace,"box-violin")),a=("y"===a?h=I?(C=P-G,P+G):(C=Math.min.apply(null,l.map(function(e){return Math.min(e.y0,e.y1)})),Math.max.apply(null,l.map(function(e){return Math.max(e.y0,e.y1)}))):C=h=he.mean(l.map(function(e){return(e.y0+e.y1)/2}))-r/2,"x"===a?O=I?(D=R+G,R-G):(D=Math.max.apply(null,l.map(function(e){return Math.max(e.x0,e.x1)})),Math.min.apply(null,l.map(function(e){return Math.min(e.x0,e.x1)}))):D=O=he.mean(l.map(function(e){return(e.x0+e.x1)/2}))-t/2,T._offset),I=k._offset;return O+=a-t,C+=I-r,a=(D+=a)+t<E&&0<=D?D:O+t<E&&0<=O?O:a+t<E?a:D-R<R-O+t?E-t:0,D=(h+=I)+r<S&&0<=h?h:C+r<S&&0<=C?C:I+r<S?I:h-P<P-C+r?S-r:0,c.attr("transform",z((a+=G)-1,(D+=G)-1)),c}R=n.selectAll("g.hovertext").data(e,ke);return R.enter().append("g").classed("hovertext",!0).each(function(){var e=fe.select(this);e.append("rect").call(ye.fill,ye.addOpacity(v,.8)),e.append("text").classed("name",!0),e.append("path").style("stroke-width","1px"),e.append("text").classed("nums",!0).call(H.font,x,_)}),R.exit().remove(),R.each(function(e){var t,n,r=fe.select(this).attr("transform",""),a=e.color,i=(Array.isArray(a)&&(a=a[e.eventData[0].pointNumber]),e.bgcolor||a),i=ye.combine(ye.opacity(i)?i:ye.defaultLine,v),a=ye.combine(ye.opacity(a)?a:ye.defaultLine,v),o=e.borderColor||ye.contrast(i),s=W(e,L,y,g,A,r),l=s[0],s=s[1],c=r.select("text.nums").call(H.font,e.fontFamily||x,e.fontSize||_,e.fontColor||o).text(l).attr("data-notex",1).call(q.positionText,0,0).call(q.convertToTspans,m),u=r.select("text.name"),d=0,f=0,a=(s&&s!==l?(u.call(H.font,e.fontFamily||x,e.fontSize||_,a).text(s).attr("data-notex",1).call(q.positionText,0,0).call(q.convertToTspans,m),d=(l=Z(m,u.node())).width+2*G,f=l.height+2*G):(u.remove(),r.select("rect").remove()),r.select("path").style({fill:i,stroke:o}),e.xa._offset+(e.x0+e.x1)/2),s=e.ya._offset+(e.y0+e.y1)/2,l=Math.abs(e.x1-e.x0),i=Math.abs(e.y1-e.y0),o=Z(m,c.node()),p=o.width/g._invScaleX,h=o.height/g._invScaleY,o=(e.ty0=(M-o.top)/g._invScaleY,e.bx=p+2*G,e.by=Math.max(h+2*G,f),e.anchor="start",e.txwidth=p,e.tx2width=d,e.offset=0,(p+$+G+d)*g._invScaleX);N?(e.pos=a,t=s+i/2+o<=S,n=0<=s-i/2-o,"top"!==e.idealAlign&&t||!n?t?(s+=i/2,e.anchor="start"):e.anchor="middle":(s-=i/2,e.anchor="end")):(e.pos=s,t=a+l/2+o<=E,n=0<=a-l/2-o,"left"!==e.idealAlign&&t||!n?t?(a+=l/2,e.anchor="start"):(e.anchor="middle",f=a-(h=o/2),0<(p=a+h-E)&&(a-=p),f<0&&(a+=-f)):(a-=l/2,e.anchor="end")),c.attr("text-anchor",e.anchor),d&&u.attr("text-anchor",e.anchor),r.attr("transform",z(a,s)+(N?j(Y):""))}),R}function W(n,e,t,r,a,i){var o="",s="",t=(void 0!==n.nameOverride&&(n.name=n.nameOverride),n.name&&(n.trace._meta&&(n.name=he.templateString(n.name,n.trace._meta)),o=l(n.name,n.nameLength)),t.charAt(0)),e=(void 0!==n.zLabel?(void 0!==n.xLabel&&(s+="x: "+n.xLabel+"<br>"),void 0!==n.yLabel&&(s+="y: "+n.yLabel+"<br>"),"choropleth"!==n.trace.type&&"choroplethmapbox"!==n.trace.type&&(s+=(s?"z: ":"")+n.zLabel)):e&&n[t+"Label"]===a?s=n[("x"===t?"y":"x")+"Label"]||"":void 0===n.xLabel?void 0!==n.yLabel&&"scattercarpet"!==n.trace.type&&(s=n.yLabel):s=void 0===n.yLabel?n.xLabel:"("+n.xLabel+", "+n.yLabel+")",!n.text&&0!==n.text||Array.isArray(n.text)||(s+=(s?"<br>":"")+n.text),void 0!==n.extraText&&(s+=(s?"<br>":"")+n.extraText),i&&""===s&&!n.hovertemplate&&(""===o&&i.remove(),s=o),n.hovertemplate||!1);return e&&(i=n.hovertemplateLabels||n,n[t+"Label"]!==a&&(i[t+"other"]=i[t+"Val"],i[t+"otherLabel"]=i[t+"Label"]),s=(s=he.hovertemplateString(e,i,r._d3locale,n.eventData[0]||{},n.trace._meta)).replace(c,function(e,t){return o=l(t,n.nameLength),""})),[s,o]}function Me(e,f,p,h){function m(e){return e*p}function g(e){return e*h}e.each(function(e){var t=fe.select(this);if(e.del)return t.remove();var n=t.select("text.nums"),r=e.anchor,a="end"===r?-1:1,i={start:1,end:-1,middle:0}[r],o=i*($+G),s=o+i*(e.txwidth+G),l=0,c=e.offset,u="middle"===r,a=(u&&(o-=e.tx2width/2,s+=e.txwidth/2+G),f&&(c*=-v,l=e.offset*y),t.select("path").attr("d",u?"M-"+m(e.bx/2+e.tx2width/2)+","+g(c-e.by/2)+"h"+m(e.bx)+"v"+g(e.by)+"h-"+m(e.bx)+"Z":"M0,0L"+m(a*$+l)+","+g($+c)+"v"+g(e.by/2-$)+"h"+m(a*e.bx)+"v-"+g(e.by)+"H"+m(a*$+l)+"V"+g(c-$)+"Z"),l+o),o=c+e.ty0-e.by/2+G,d=e.textAlign||"auto";"auto"!==d&&("left"===d&&"start"!==r?(n.attr("text-anchor","start"),a=u?-e.bx/2-e.tx2width/2+G:-e.bx-G):"right"===d&&"end"!==r&&(n.attr("text-anchor","end"),a=u?e.bx/2-e.tx2width/2-G:e.bx+G)),n.call(q.positionText,a*p,o*h),e.tx2width&&(t.select("text.name").call(q.positionText,m(s+i*G+l),g(c+e.ty0-e.by/2+G)),t.select("rect").call(H.setRect,m(s+(i-1)*e.tx2width/2+l),g(c-e.by/2-1),m(e.tx2width),g(e.by+2)))})}function Ee(e,t,n){var r,a,i,o,s,l,c,u,d,f,p,h,m,g=n.container,y=n.fullLayout,v=y._size,n=n.event,b=!!t.hLinePoint,x=!!t.vLinePoint;g.selectAll(".spikeline").remove(),(x||b)&&(y=ye.combine(y.plot_bgcolor,y.paper_bgcolor),b&&(r=(b=t.hLinePoint)&&b.xa,f="cursor"===(a=b&&b.ya).spikesnap?(i=n.pointerX,n.pointerY):(i=r._offset+b.x,a._offset+b.y),b=_.readability(b.color,y)<1.5?ye.contrast(y):b.color,u=a.spikemode,m=a.spikethickness,b=a.spikecolor||b,d=be.getPxPosition(e,a),-1===u.indexOf("toaxis")&&-1===u.indexOf("across")||(-1!==u.indexOf("toaxis")&&(l=d,c=i),-1!==u.indexOf("across")&&(i=a._counterDomainMin,s=a._counterDomainMax,"free"===a.anchor&&(i=Math.min(i,a.position),s=Math.max(s,a.position)),l=v.l+i*v.w,c=v.l+s*v.w),g.insert("line",":first-child").attr({x1:l,x2:c,y1:f,y2:f,"stroke-width":m,stroke:b,"stroke-dasharray":H.dashStyle(a.spikedash,m)}).classed("spikeline",!0).classed("crisp",!0),g.insert("line",":first-child").attr({x1:l,x2:c,y1:f,y2:f,"stroke-width":m+2,stroke:y}).classed("spikeline",!0).classed("crisp",!0)),-1!==u.indexOf("marker")&&g.insert("circle",":first-child").attr({cx:d+("right"!==a.side?m:-m),cy:f,r:m,fill:b}).classed("spikeline",!0)),x&&(r=(i=t.vLinePoint)&&i.xa,a=i&&i.ya,s="cursor"===r.spikesnap?(o=n.pointerX,n.pointerY):(o=r._offset+i.x,a._offset+i.y),l=_.readability(i.color,y)<1.5?ye.contrast(y):i.color,c=r.spikemode,u=r.spikethickness,d=r.spikecolor||l,f=be.getPxPosition(e,r),-1===c.indexOf("toaxis")&&-1===c.indexOf("across")||(-1!==c.indexOf("toaxis")&&(p=f,h=s),-1!==c.indexOf("across")&&(m=r._counterDomainMin,b=r._counterDomainMax,"free"===r.anchor&&(m=Math.min(m,r.position),b=Math.max(b,r.position)),p=v.t+(1-b)*v.h,h=v.t+(1-m)*v.h),g.insert("line",":first-child").attr({x1:o,x2:o,y1:p,y2:h,"stroke-width":u,stroke:d,"stroke-dasharray":H.dashStyle(r.spikedash,u)}).classed("spikeline",!0).classed("crisp",!0),g.insert("line",":first-child").attr({x1:o,x2:o,y1:p,y2:h,"stroke-width":u+2,stroke:y}).classed("spikeline",!0).classed("crisp",!0)),-1!==c.indexOf("marker")&&g.insert("circle",":first-child").attr({cx:o,cy:f-("top"!==r.side?u:-u),r:u,fill:d}).classed("spikeline",!0)))}function Se(e,t){return!t||(t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint)}function l(e,t){return q.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em"]})}function Le(e,t,n){var r,a,i,o=t[e+"a"],s=t[e+"Val"],l=t.cd[0];return"category"===o.type?s=o._categoriesMap[s]:"date"===o.type&&((r=t.trace[e+"periodalignment"])&&(void 0===(a=(t=t.cd[t.index])[e+"Start"])&&(a=t[e]),t=(i=void 0===(i=t[e+"End"])?t[e]:i)-a,"end"===r?s+=t:"middle"===r&&(s+=t/2)),s=o.d2c(s)),l&&l.t&&l.t.posLetter===o._id&&("group"!==n.boxmode&&"group"!==n.violinmode||(s+=l.t.dPos)),s}function Ce(e){return e.offsetTop+e.clientTop}function Oe(e){return e.offsetLeft+e.clientLeft}function Z(e,t){var e=e._fullLayout,t=t.getBoundingClientRect(),n=t.x,r=t.y,a=n+t.width,t=r+t.height,n=he.apply3DTransform(e._invTransform)(n,r),r=he.apply3DTransform(e._invTransform)(a,t),e=n[0],a=n[1],t=r[0],n=r[1];return{x:e,y:a,width:t-e,height:n-a,top:Math.min(a,n),left:Math.min(e,t),right:Math.max(e,t),bottom:Math.max(a,n)}}},{"../../lib":287,"../../lib/events":280,"../../lib/override_cursor":298,"../../lib/svg_text_utils":310,"../../plots/cartesian/axes":334,"../../registry":378,"../color":157,"../dragelement":176,"../drawing":179,"../legend/defaults":209,"../legend/draw":210,"./constants":191,"./helpers":193,"@plotly/d3":20,"fast-isnumeric":33,tinycolor2:121}],195:[function(e,t,n){"use strict";var o=e("../../lib"),s=e("../color"),l=e("./helpers").isUnifiedHover;t.exports=function(e,t,n,r){r=r||{};var a=t.legend;function i(e){r.font[e]||(r.font[e]=(a?t.legend:t).font[e])}t&&l(t.hovermode)&&(r.font||(r.font={}),i("size"),i("family"),i("color"),a?(r.bgcolor||(r.bgcolor=s.combine(t.legend.bgcolor,t.paper_bgcolor)),r.bordercolor||(r.bordercolor=t.legend.bordercolor)):r.bgcolor||(r.bgcolor=t.paper_bgcolor)),n("hoverlabel.bgcolor",r.bgcolor),n("hoverlabel.bordercolor",r.bordercolor),n("hoverlabel.namelength",r.namelength),o.coerceFont(n,"hoverlabel.font",r.font),n("hoverlabel.align",r.align)}},{"../../lib":287,"../color":157,"./helpers":193}],196:[function(e,t,n){"use strict";var a=e("../../lib"),i=e("./layout_attributes");t.exports=function(n,r){function e(e,t){return void 0!==r[e]?r[e]:a.coerce(n,r,i,e,t)}return e("clickmode"),e("hovermode")}},{"../../lib":287,"./layout_attributes":198}],197:[function(e,t,n){"use strict";var r=e("@plotly/d3"),a=e("../../lib"),i=e("../dragelement"),o=e("./helpers"),s=e("./layout_attributes"),l=e("./hover");t.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:s},attributes:e("./attributes"),layoutAttributes:s,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:o.getDistanceFunction,getClosest:o.getClosest,inbox:o.inbox,quadrature:o.quadrature,appendArrayPointValue:o.appendArrayPointValue,castHoverOption:function(e,t,n){return a.castOption(e,t,"hoverlabel."+n)},castHoverinfo:function(t,n,e){return a.castOption(t,e,"hoverinfo",function(e){return a.coerceHoverinfo({hoverinfo:e},{_module:t._module},n)})},hover:l.hover,unhover:i.unhover,loneHover:l.loneHover,loneUnhover:function(e){e=a.isD3Selection(e)?e:r.select(e);e.selectAll("g.hovertext").remove(),e.selectAll(".spikeline").remove()},click:e("./click")}},{"../../lib":287,"../dragelement":176,"./attributes":188,"./calc":189,"./click":190,"./constants":191,"./defaults":192,"./helpers":193,"./hover":194,"./layout_attributes":198,"./layout_defaults":199,"./layout_global_defaults":200,"@plotly/d3":20}],198:[function(e,t,n){"use strict";var r=e("./constants"),e=e("../../plots/font_attributes"),a=e({editType:"none"});a.family.dflt=r.HOVERFONT,a.size.dflt=r.HOVERFONTSIZE,t.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:a,grouptitlefont:e({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":365,"./constants":191}],199:[function(e,t,n){"use strict";var o=e("../../lib"),s=e("./layout_attributes"),l=e("./hovermode_defaults"),c=e("./hoverlabel_defaults");t.exports=function(n,r){function e(e,t){return o.coerce(n,r,s,e,t)}l(n,r)&&(e("hoverdistance"),e("spikedistance"));"select"===e("dragmode")&&e("selectdirection");var t=r._has("mapbox"),a=r._has("geo"),i=r._basePlotModules.length;"zoom"===r.dragmode&&((t||a)&&1===i||t&&a&&2===i)&&(r.dragmode="pan"),c(n,r,e),o.coerceFont(e,"hoverlabel.grouptitlefont",r.hoverlabel.font)}},{"../../lib":287,"./hoverlabel_defaults":195,"./hovermode_defaults":196,"./layout_attributes":198}],200:[function(e,t,n){"use strict";var a=e("../../lib"),i=e("./hoverlabel_defaults"),o=e("./layout_attributes");t.exports=function(n,r){i(n,r,function(e,t){return a.coerce(n,r,o,e,t)})}},{"../../lib":287,"./hoverlabel_defaults":195,"./layout_attributes":198}],201:[function(e,t,n){"use strict";var h=e("../../lib"),r=e("../../lib/regex").counter,a=e("../../plots/domain").attributes,i=e("../../plots/cartesian/constants").idRegex,m=e("../../plot_api/plot_template"),g={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[r("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[i.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[i.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:a({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function O(e,t,n){t=t[n+"axes"],e=Object.keys((e._splomAxes||{})[n]||{});return Array.isArray(t)?t:e.length?e:void 0}function y(e,t,n,r,a,i){for(var n=t(e+"gap",n),o=t("domain."+e),s=(t(e+"side",r),new Array(a)),l=o[0],c=(o[1]-l)/(a-n),u=c*(1-n),d=0;d<a;d++){var f=l+c*d;s[i?a-1-d:d]=[f,f+u]}return s}function D(e,n,t,r,a){var i,o=new Array(t);function s(e,t){-1!==n.indexOf(t)&&void 0===r[t]?(o[e]=t,r[t]=e):o[e]=""}if(Array.isArray(e))for(i=0;i<t;i++)s(i,e[i]);else for(s(0,a),i=1;i<t;i++)s(i,a+(i+1));return o}t.exports={moduleType:"component",name:"grid",schema:{layout:{grid:g}},layoutAttributes:g,sizeDefaults:function(e,t){var n,r,a,i,o,s,l,c,u=e.grid||{},d=O(t,u,"x"),f=O(t,u,"y");function p(e,t){return h.coerce(u,i,g,e,t)}(e.grid||d||f)&&(e=Array.isArray(u.subplots)&&Array.isArray(u.subplots[0]),n=Array.isArray(d),r=Array.isArray(f),a=n&&d!==u.xaxes&&r&&f!==u.yaxes,e?(o=u.subplots.length,s=u.subplots[0].length):(r&&(o=f.length),n&&(s=d.length)),i=m.newContainer(t,"grid"),1<(f=p("rows",o))*(d=p("columns",s))?(e||n||r||"independent"===p("pattern")&&(e=!0),i._hasSubplotGrid=e,o="top to bottom"===p("roworder"),s=e?.3:.1,a&&t._splomGridDflt&&(l=t._splomGridDflt.xside,c=t._splomGridDflt.yside),i._domains={x:y("x",p,e?.2:.1,l,d),y:y("y",p,s,c,f,o)}):delete t.grid)},contentDefaults:function(e,t){var n=t.grid;if(n&&n._domains){var r,a,i,o,e=e.grid||{},s=t._subplots,l=n._hasSubplotGrid,c=n.rows,u=n.columns,d="independent"===n.pattern,f=n._axisMap={};if(l)for(var p=e.subplots||[],h=n.subplots=new Array(c),m=1,g=0;g<c;g++)for(var y=h[g]=new Array(u),v=p[g]||[],b=0;b<u;b++)d?(i=1===m?"xy":"x"+m+"y"+m,m++):i=v[b],y[b]="",-1!==s.cartesian.indexOf(i)&&(o=i.indexOf("y"),r=i.slice(0,o),a=i.slice(o),void 0!==f[r]&&f[r]!==b||void 0!==f[a]&&f[a]!==g||(y[b]=i,f[r]=b,f[a]=g));else{var x=O(t,e,"x"),t=O(t,e,"y");n.xaxes=D(x,s.xaxis,u,f,"x"),n.yaxes=D(t,s.yaxis,c,f,"y")}var _,w=n._anchors={},T="top to bottom"===n.roworder;for(_ in f){var k,A,M,E=_.charAt(0),S=n[E+"side"];if(S.length<8)w[_]="free";else if("x"===E){if(M="t"===S.charAt(0)==T?(k=0,A=1,c):(k=c-1,A=-1),l){var L=f[_];for(g=k;g!==M;g+=A)if((i=h[g][L])&&(o=i.indexOf("y"),i.slice(0,o)===_)){w[_]=i.slice(o);break}}else for(g=k;g!==M;g+=A)if(a=n.yaxes[g],-1!==s.cartesian.indexOf(_+a)){w[_]=a;break}}else if(M="l"===S.charAt(0)?(k=0,A=1,u):(k=u-1,A=-1),l){var C=f[_];for(g=k;g!==M;g+=A)if((i=h[C][g])&&(o=i.indexOf("y"),i.slice(o)===_)){w[_]=i.slice(0,o);break}}else for(g=k;g!==M;g+=A)if(r=n.xaxes[g],-1!==s.cartesian.indexOf(r+_)){w[_]=r;break}}}}}},{"../../lib":287,"../../lib/regex":303,"../../plot_api/plot_template":323,"../../plots/cartesian/constants":341,"../../plots/domain":364}],202:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/constants"),a=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects");t.exports=a("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",r.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",r.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":263,"../../plot_api/plot_template":323,"../../plots/cartesian/constants":341}],203:[function(e,t,n){"use strict";var h=e("fast-isnumeric"),m=e("../../lib/to_log_range");t.exports=function(e,t,n,r){t=t||{};var a="log"===n&&"linear"===t.type,n="linear"===n&&"log"===t.type;if(a||n)for(var i=e._fullLayout.images,o=t._id.charAt(0),s=0;s<i.length;s++){var l,c,u,d,f,p="images["+s+"].";(f=i[s])[o+"ref"]===t._id&&(l=f[o],f=f["size"+o],d=c=null,d=a?(c=m(l,t.range),u=f/Math.pow(10,c)/2,2*Math.log(u+Math.sqrt(1+u*u))/Math.LN10):(c=Math.pow(10,l))*(Math.pow(10,f/2)-Math.pow(10,-f/2)),h(c)?h(d)||(d=null):d=c=null,r(p+o,c),r(p+"size"+o,d))}}},{"../../lib/to_log_range":312,"fast-isnumeric":33}],204:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),f=e("./attributes");function a(n,r,e){function t(e,t){return u.coerce(n,r,f,e,t)}var a=t("source");if(t("visible",!!a)){t("layer"),t("xanchor"),t("yanchor"),t("sizex"),t("sizey"),t("sizing"),t("opacity");for(var i={_fullLayout:e},o=["x","y"],s=0;s<2;s++){var l=o[s],c=d.coerceRef(n,r,i,l,"paper",void 0);"paper"!==c&&d.getFromId(i,c)._imgIndices.push(r._index),d.coercePosition(r,i,t,c,l,0)}}return r}t.exports=function(e,t){r(e,t,{name:"images",handleItemDefaults:a})}},{"../../lib":287,"../../plots/array_container_defaults":329,"../../plots/cartesian/axes":334,"./attributes":202}],205:[function(e,t,n){"use strict";var y=e("@plotly/d3"),v=e("../drawing"),b=e("../../plots/cartesian/axes"),x=e("../../plots/cartesian/axis_ids"),_=e("../../constants/xmlns_namespaces");t.exports=function(f){for(var p=f._fullLayout,e=[],t={},n=[],r=0;r<p.images.length;r++){var a,i,o=p.images[r];o.visible&&("below"===o.layer&&"paper"!==o.xref&&"paper"!==o.yref?(a=x.ref2id(o.xref)+x.ref2id(o.yref),(i=p._plots[a])?(t[a=i.mainplot?i.mainplot.id:a]||(t[a]=[]),t[a].push(o)):n.push(o)):("above"===o.layer?e:n).push(o))}var h={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},m={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function s(r){var e,a=y.select(this);this._imgSrc!==r.source&&(a.attr("xmlns",_.svg),r.source&&"data:"===r.source.slice(0,5)?(a.attr("xlink:href",r.source),this._imgSrc=r.source):(e=new Promise(function(t){var e=new Image;function n(){a.remove(),t()}(this.img=e).setAttribute("crossOrigin","anonymous"),e.onerror=n,e.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height;e.getContext("2d").drawImage(this,0,0);e=e.toDataURL("image/png");a.attr("xlink:href",e),t()},a.on("error",n),e.src=r.source,this._imgSrc=r.source}.bind(this)),f._promises.push(e)))}function l(e){var t=y.select(this),n=b.getFromId(f,e.xref),r=b.getFromId(f,e.yref),a="domain"===b.getRefType(e.xref),i="domain"===b.getRefType(e.yref),o=p._size,s=void 0!==n?"string"==typeof e.xref&&a?n._length*e.sizex:Math.abs(n.l2p(e.sizex)-n.l2p(0)):e.sizex*o.w,l=void 0!==r?"string"==typeof e.yref&&i?r._length*e.sizey:Math.abs(r.l2p(e.sizey)-r.l2p(0)):e.sizey*o.h,c=s*h[e.xanchor].offset,u=l*m[e.yanchor].offset,d=h[e.xanchor].sizing+m[e.yanchor].sizing,a=void 0!==n?"string"==typeof e.xref&&a?n._length*e.x+n._offset:n.r2p(e.x)+n._offset:e.x*o.w+o.l;switch(a+=c,c=void 0!==r?"string"==typeof e.yref&&i?r._length*(1-e.y)+r._offset:r.r2p(e.y)+r._offset:o.h-e.y*o.h+o.t,c+=u,e.sizing){case"fill":d+=" slice";break;case"stretch":d="none"}t.attr({x:a,y:c,width:s,height:l,preserveAspectRatio:d,opacity:e.opacity});i=(n&&"domain"!==b.getRefType(e.xref)?n._id:"")+(r&&"domain"!==b.getRefType(e.yref)?r._id:"");v.setClipUrl(t,i?"clip"+p._uid+i:null,f)}var c=p._imageLowerLayer.selectAll("image").data(n),u=p._imageUpperLayer.selectAll("image").data(e),d=(c.enter().append("image"),u.enter().append("image"),c.exit().remove(),u.exit().remove(),c.each(function(e){s.bind(this)(e),l.bind(this)(e)}),u.each(function(e){s.bind(this)(e),l.bind(this)(e)}),Object.keys(p._plots));for(r=0;r<d.length;r++){a=d[r];var g=p._plots[a];g.imagelayer&&((g=g.imagelayer.selectAll("image").data(t[a]||[])).enter().append("image"),g.exit().remove(),g.each(function(e){s.bind(this)(e),l.bind(this)(e)}))}}},{"../../constants/xmlns_namespaces":268,"../../plots/cartesian/axes":334,"../../plots/cartesian/axis_ids":338,"../drawing":179,"@plotly/d3":20}],206:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":347,"./attributes":202,"./convert_coords":203,"./defaults":204,"./draw":205}],207:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),e=e("../color/attributes");t.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:r({editType:"legend"}),grouptitlefont:r({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:r({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":365,"../color/attributes":156}],208:[function(e,t,n){"use strict";t.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],209:[function(e,t,n){"use strict";var y=e("../../registry"),v=e("../../lib"),b=e("../../plot_api/plot_template"),x=e("../../plots/attributes"),_=e("./attributes"),w=e("../../plots/layout_attributes"),T=e("./helpers");t.exports=function(e,t,n){var r,a=e.legend||{},i=b.newContainer(t,"legend");function o(e,t){return v.coerce(a,i,_,e,t)}for(var s=function(e,t){var n=r._input;return v.coerce(n,r,x,e,t)},l=t.font||{},c=v.coerceFont(o,"grouptitlefont",v.extendFlat({},l,{size:Math.round(1.1*l.size)})),u=0,d=!1,f="normal",p=0;p<n.length;p++)(r=n[p]).visible&&(!r.showlegend&&(!r._dfltShowLegend||r._module&&r._module.attributes&&r._module.attributes.showlegend&&!1===r._module.attributes.showlegend.dflt)||(u++,r.showlegend&&(d=!0,!y.traceIs(r,"pie-like")&&!0!==r._input.showlegend||u++),v.coerceFont(s,"legendgrouptitle.font",c)),(y.traceIs(r,"bar")&&"stack"===t.barmode||-1!==["tonextx","tonexty"].indexOf(r.fill))&&(f=T.isGrouped({traceorder:f})?"grouped+reversed":"reversed"),void 0!==r.legendgroup&&""!==r.legendgroup&&(f=T.isReversed({traceorder:f})?"reversed+grouped":"grouped"));var h,m,g,l=v.coerce(e,t,w,"showlegend",d&&1<u);!1===l&&(t.legend=void 0),!1===l&&!a.uirevision||(o("uirevision",t.uirevision),!1!==l&&(o("bgcolor",t.paper_bgcolor),o("bordercolor"),o("borderwidth"),l=v.coerceFont(o,"font",t.font),e=(h="h"===o("orientation"))?(g=0,y.getComponentMethod("rangeslider","isVisible")(e.xaxis)?(m=1.1,"bottom"):(m=-.1,"top")):(g=1.02,m=1,"auto"),o("traceorder",f),T.isGrouped(t.legend)&&o("tracegroupgap"),o("itemsizing"),o("itemwidth"),o("itemclick"),o("itemdoubleclick"),o("groupclick"),o("x",g),o("xanchor"),o("y",m),o("yanchor",e),o("valign"),v.noneOrAll(a,i,["x","y"]),o("title.text")&&(o("title.side",h?"left":"top"),g=v.extendFlat({},l,{size:v.bigFont(l.size)}),v.coerceFont(o,"title.font",g))))}},{"../../lib":287,"../../plot_api/plot_template":323,"../../plots/attributes":330,"../../plots/layout_attributes":369,"../../registry":378,"./attributes":207,"./helpers":213}],210:[function(e,t,n){"use strict";var F=e("@plotly/d3"),S=e("../../lib"),L=e("../../plots/plots"),C=e("../../registry"),o=e("../../lib/events"),O=e("../dragelement"),z=e("../drawing"),s=e("../color"),m=e("../../lib/svg_text_utils"),l=e("./handle_click"),j=e("./constants"),r=e("../../constants/alignment"),g=r.LINE_SPACING,D=r.FROM_TL,q=r.FROM_BR,a=e("./get_legend_data"),i=e("./style"),H=e("./helpers"),y=1;function B(e,t,n,r,a){var i=n.data()[0][0].trace,a={event:a,node:n.node(),curveNumber:i.index,expandedIndex:i._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};i._group&&(a.group=i._group),C.traceIs(i,"pie-like")&&(a.label=n.datum()[0].label),!1!==o.triggerHandler(e,"plotly_legendclick",a)&&(1===r?t._clickTimeout=setTimeout(function(){e._fullLayout&&l(n,e,r)},e._context.doubleClickDelay):2===r&&(t._clickTimeout&&clearTimeout(t._clickTimeout),e._legendMouseDownTime=0,!1!==o.triggerHandler(e,"plotly_legenddoubleclick",a)&&l(n,e,r)))}function c(a,i,o){var e,s=a.data()[0][0],l=s.trace,t=C.traceIs(l,"pie-like"),n=!o._inHover&&i._context.edits.legendText&&!t,c=o._maxNameLength,t=(s.groupTitle?(e=s.groupTitle.text,r=s.groupTitle.font):(r=o.font,o.entries?e=s.text:(e=t?s.label:l.name,l._meta&&(e=S.templateString(e,l._meta)))),S.ensureSingle(a,"text","legendtext")),r=(t.attr("text-anchor","start").call(z.font,r).text(n?u(e,c):e),o.itemwidth+2*j.itemGap);m.positionText(t,r,0),n?t.call(m.makeEditable,{gd:i,text:e}).call(f,a,i,o).on("edit",function(e){this.text(u(e,c)).call(f,a,i,o);var t,n=s.trace._fullInput||{},r={};return C.hasTransform(n,"groupby")?(t=(t=C.getTransformIndices(n,"groupby"))[t.length-1],(n=S.keyedContainer(n,"transforms["+t+"].styles","target","value.name")).set(s.trace._group,e),r=n.constructUpdate()):r.name=e,C.call("_guiRestyle",i,r,l.index)}):f(t,a,i,o)}function u(e,t){t=Math.max(4,t);if(!(e&&e.trim().length>=t/2))for(var n=t-(e=e||"").length;0<n;n--)e+=" ";return e}function d(t,n){var e,r=n._context.doubleClickDelay,a=1,i=S.ensureSingle(t,"rect","legendtoggle",function(e){n._context.staticPlot||e.style("cursor","pointer").attr("pointer-events","all"),e.call(s.fill,"rgba(0,0,0,0)")});n._context.staticPlot||(i.on("mousedown",function(){(e=(new Date).getTime())-n._legendMouseDownTime<r?a+=1:(a=1,n._legendMouseDownTime=e)}),i.on("mouseup",function(){var e;n._dragged||n._editing||(e=n._fullLayout.legend,(new Date).getTime()-n._legendMouseDownTime>r&&(a=Math.max(a-1,1)),B(n,e,t,a,F.event))}))}function f(e,d,f,p,h){p._inHover&&e.attr("data-notex",!0),m.convertToTspans(e,f,function(){var e,t,n,r,a,i,o,s,l,c,u;t=f,n=p,r=h,u=(e=d).data()[0][0],n._inHover||!u||u.trace.showlegend?(l=e.select("g[class*=math-group]"),s=l.node(),t=(n=n||t._fullLayout.legend).borderwidth,a=(r===y?n.title:u.groupTitle||n).font.size*g,s?(s=z.bBox(s),i=s.height,o=s.width,r===y?z.setTranslate(l,t,t+.75*i):z.setTranslate(l,0,.25*i)):(s=e.select(r===y?".legendtitletext":".legendtext"),l=m.lineCount(s),c=s.node(),i=a*l,o=c?z.bBox(c).width:0,r===y?("left"===n.title.side&&(o+=2*j.itemGap),m.positionText(s,t+j.titlePad,t+a)):(c=2*j.itemGap+n.itemwidth,u.groupTitle&&(c=j.itemGap,o-=n.itemwidth),m.positionText(s,c,-a*((l-1)/2-.3)))),r===y?(n._titleWidth=o,n._titleHeight=i):(u.lineHeight=a,u.height=Math.max(i,16)+3,u.width=o)):e.remove()})}function U(e){return S.isRightAnchor(e)?"right":S.isCenterAnchor(e)?"center":"left"}function V(e){return S.isBottomAnchor(e)?"bottom":S.isMiddleAnchor(e)?"middle":"top"}t.exports=function(e,t){t=t||e._fullLayout.legend||{};var b,n,I=e,R=t,x=I._fullLayout,_="legend"+x._uid,w=R._inHover;if(w?(b=R.layer,_+="-hover"):b=x._infolayer,b){if(I._legendMouseDownTime||(I._legendMouseDownTime=0),w){if(!R.entries)return;n=a(R.entries,R)}else{if(!I.calcdata)return;n=x.showlegend&&a(I.calcdata,R)}var r=x.hiddenlabels||[];if(!(w||x.showlegend&&n.length))return b.selectAll(".legend").remove(),x._topdefs.select("#"+_).remove(),L.autoMargin(I,"legend");var T=S.ensureSingle(b,"g","legend",function(e){w||e.attr("pointer-events","all")}),k=S.ensureSingleById(x._topdefs,"clipPath",_,function(e){e.append("rect")}),A=S.ensureSingle(T,"rect","bg",function(e){e.attr("shape-rendering","crispEdges")}),M=(A.call(s.stroke,R.bordercolor).call(s.fill,R.bgcolor).style("stroke-width",R.borderwidth+"px"),S.ensureSingle(T,"g","scrollbox")),e=R.title,E=(R._titleWidth=0,R._titleHeight=0,e.text?((t=S.ensureSingle(M,"text","legendtitletext")).attr("text-anchor","start").call(z.font,e.font).text(e.text),f(t,M,I,R,y)):M.selectAll(".legendtitletext").remove(),S.ensureSingle(T,"rect","scrollbar",function(e){e.attr(j.scrollBarEnterAttrs).call(s.fill,j.scrollBarColor)})),P=M.selectAll("g.groups").data(n),N=(P.enter().append("g").attr("class","groups"),P.exit().remove(),P.selectAll("g.traces").data(S.identity));N.enter().append("g").attr("class","traces"),N.exit().remove(),N.style("opacity",function(e){var t=e[0].trace;return C.traceIs(t,"pie-like")?-1!==r.indexOf(e[0].label)?.5:1:"legendonly"===t.visible?.5:1}).each(function(){F.select(this).call(c,I,R)}).call(i,I,R).each(function(){w||F.select(this).call(d,I)}),S.syncOrAsync([L.previousPromises,function(){var e,t,r,n,a,i,o,s,l,c,u,d,f,p=I,h=P,m=N,g=R,y=p._fullLayout,v=(g=g||y.legend,y._size),b=H.isVertical(g),x=H.isGrouped(g),_=g.borderwidth,w=2*_,T=j.itemGap,k=g.itemwidth+2*T,A=2*(_+T),M=V(g),E=g.y<0||0===g.y&&"top"===M,M=1<g.y||1===g.y&&"bottom"===M,S=g.tracegroupgap,L=(g._maxHeight=Math.max(E||M?y.height/2:v.h,30),0),C=(g._width=0,g._height=0,function(e){var t=0,n=0,r=e.title.side;r&&(-1!==r.indexOf("left")&&(t=e._titleWidth),-1!==r.indexOf("top")&&(n=e._titleHeight));return[t,n]}(g)),O=(b?(m.each(function(e){var t=e[0].height;z.setTranslate(this,_+C[0],_+C[1]+g._height+t/2+T),g._height+=t,g._width=Math.max(g._width,e[0].width)}),L=k+g._width,g._width+=T+k+w,g._height+=A,x&&(h.each(function(e,t){z.setTranslate(this,0,t*g.tracegroupgap)}),g._height+=(g._lgroupsLength-1)*g.tracegroupgap)):(e=U(g),O=g.x<0||0===g.x&&"right"===e,t=1<g.x||1===g.x&&"left"===e,M=M||E,E=y.width/2,g._maxWidth=Math.max(O?M&&"left"===e?v.l+v.w:E:t?M&&"right"===e?v.r+v.w:E:v.w,2*k),n=r=0,m.each(function(e){e=e[0].width+k;r=Math.max(r,e),n+=e}),L=null,a=0,x?(s=o=i=0,h.each(function(){var n=0,r=0,e=(F.select(this).selectAll("g.traces").each(function(e){var t=e[0].width,e=e[0].height;z.setTranslate(this,C[0],C[1]+_+T+e/2+r),r+=e,n=Math.max(n,k+t)}),n+T);i=0<o&&e+_+o>g._maxWidth?(a=Math.max(a,o),o=0,s+=i+S,r):Math.max(i,r),z.setTranslate(this,o,s),o+=e}),g._width=Math.max(a,o)+_,g._height=s+i+A):(y=m.size(),l=n+w+(y-1)*T<g._maxWidth,f=d=u=c=0,m.each(function(e){var t=e[0].height,e=k+e[0].width,n=(l?e:r)+T;n+_+u-T>=g._maxWidth&&(a=Math.max(a,f),u=0,d+=c,g._height+=c,c=0),z.setTranslate(this,C[0]+_+u,C[1]+_+d+t/2+T),f=u+e+T,u+=n,c=Math.max(c,t)}),l?(g._width=u+w,g._height=c+A):(g._width=Math.max(a,f)+w,g._height+=c+A))),g._width=Math.ceil(Math.max(g._width+C[0],g._titleWidth+2*(_+j.titlePad))),g._height=Math.ceil(Math.max(g._height+C[1],g._titleHeight+2*(_+j.itemGap))),g._effHeight=Math.min(g._height,g._maxHeight),p._context.edits),D=O.legendText||O.legendPosition;m.each(function(e){var t=F.select(this).select(".legendtoggle"),n=e[0].height,e=D?k:L||k+e[0].width;b||(e+=T/2),z.setRect(t,0,-n/2,e,n)})},function(){var t,e,r,a,n,i,o,s,l,c,u,d,f=x._size,p=R.borderwidth;if(!w){if(h=(g=I)._fullLayout.legend,y=U(h),m=V(h),L.autoMargin(g,"legend",{x:h.x,y:h.y,l:h._width*D[y],r:h._width*q[y],b:h._effHeight*q[m],t:h._effHeight*D[m]}))return;var h,m,g=f.l+f.w*R.x-D[U(R)]*R._width,y=f.t+f.h*(1-R.y)-D[V(R)]*R._effHeight;x.margin.autoexpand&&(h=g,m=y,g=S.constrain(g,0,x.width-R._width),y=S.constrain(y,0,x.height-R._effHeight),g!==h&&S.log("Constrain legend.x to make legend fit inside graph"),y!==m&&S.log("Constrain legend.y to make legend fit inside graph")),z.setTranslate(T,g,y)}function v(e,t,n){R._scrollY=I._fullLayout.legend._scrollY=e,z.setTranslate(M,0,-e),z.setRect(E,R._width,j.scrollBarMargin+e*n,j.scrollBarWidth,t),k.select("rect").attr("y",p+e)}E.on(".drag",null),T.on("wheel",null),w||R._height<=R._maxHeight||I._context.staticPlot?(h=R._effHeight,w&&(h=R._height),A.attr({width:R._width-p,height:h-p,x:p/2,y:p/2}),z.setTranslate(M,0,0),k.select("rect").attr({width:R._width-2*p,height:h-2*p,x:p,y:p}),z.setClipUrl(M,_,I),z.setRect(E,0,0,0,0),delete R._scrollY):(t=Math.max(j.scrollBarMinHeight,R._effHeight*R._effHeight/R._height),e=R._effHeight-t-2*j.scrollBarMargin,r=R._height-R._effHeight,a=e/r,n=Math.min(R._scrollY||0,r),A.attr({width:R._width-2*p+j.scrollBarWidth+j.scrollBarMargin,height:R._effHeight-p,x:p/2,y:p/2}),k.select("rect").attr({width:R._width-2*p+j.scrollBarWidth+j.scrollBarMargin,height:R._effHeight-2*p,x:p,y:p+n}),z.setClipUrl(M,_,I),v(n,t,a),T.on("wheel",function(){v(n=S.constrain(R._scrollY+F.event.deltaY/e*r,0,r),t,a),0!==n&&n!==r&&F.event.preventDefault()}),m=F.behavior.drag().on("dragstart",function(){var e=F.event.sourceEvent;i=("touchstart"===e.type?e.changedTouches[0]:e).clientY,s=n}).on("drag",function(){var e=F.event.sourceEvent;2===e.buttons||e.ctrlKey||(o=("touchmove"===e.type?e.changedTouches[0]:e).clientY,v(n=function(e,t,n){n=(n-t)/a+e;return S.constrain(n,0,r)}(s,i,o),t,a))}),E.call(m),g=F.behavior.drag().on("dragstart",function(){var e=F.event.sourceEvent;"touchstart"===e.type&&(i=e.changedTouches[0].clientY,s=n)}).on("drag",function(){var e=F.event.sourceEvent;"touchmove"===e.type&&(o=e.changedTouches[0].clientY,v(n=function(e,t,n){t=(t-n)/a+e;return S.constrain(t,0,r)}(s,i,o),t,a))}),M.call(g)),I._context.edits.legendPosition&&(T.classed("cursor-move",!0),O.init({element:T.node(),gd:I,prepFn:function(){var e=z.getTranslate(T);u=e.x,d=e.y},moveFn:function(e,t){e=u+e,t=d+t;z.setTranslate(T,e,t),l=O.align(e,0,f.l,f.l+f.w,R.xanchor),c=O.align(t,0,f.t+f.h,f.t,R.yanchor)},doneFn:function(){void 0!==l&&void 0!==c&&C.call("_guiRelayout",I,{"legend.x":l,"legend.y":c})},clickFn:function(e,t){var n=b.selectAll("g.traces").filter(function(){var e=this.getBoundingClientRect();return t.clientX>=e.left&&t.clientX<=e.right&&t.clientY>=e.top&&t.clientY<=e.bottom});0<n.size()&&B(I,T,n,e,t)}}))}],I)}}},{"../../constants/alignment":262,"../../lib":287,"../../lib/events":280,"../../lib/svg_text_utils":310,"../../plots/plots":371,"../../registry":378,"../color":157,"../dragelement":176,"../drawing":179,"./constants":208,"./get_legend_data":211,"./handle_click":212,"./helpers":213,"./style":215,"@plotly/d3":20}],211:[function(e,t,n){"use strict";var L=e("../../registry"),C=e("./helpers");t.exports=function(e,n){var t=n._inHover,r=C.isGrouped(n),a=C.isReversed(n),i={},o=[],s=!1,l={},c=0,u=0;function d(e,t){""!==e&&C.isGrouped(n)?-1===o.indexOf(e)?(o.push(e),s=!0,i[e]=[t]):i[e].push(t):(e="~~i"+c,o.push(e),i[e]=[t],c++)}for(b=0;b<e.length;b++){var f=e[b],p=f[0],h=p.trace,m=h.legendgroup;if(t||h.visible&&h.showlegend)if(L.traceIs(h,"pie-like"))for(l[m]||(l[m]={}),w=0;w<f.length;w++){var g=f[w].label;l[m][g]||(d(m,{label:g,color:f[w].color,i:f[w].i,trace:h,pts:f[w].pts}),l[m][g]=!0,u=Math.max(u,(g||"").length))}else d(m,p),u=Math.max(u,(h.name||"").length)}if(!o.length)return[];for(var y=!s||!r,v=[],b=0;b<o.length;b++){var x=i[o[b]];y?v.push(x[0]):v.push(x)}for(y&&(v=[v]),b=0;b<v.length;b++){for(var _=1/0,w=0;w<v[b].length;w++){var T=v[b][w].trace.legendrank;T<_&&(_=T)}v[b][0]._groupMinRank=_,v[b][0]._preGroupSort=b}function k(e,t){return e.trace.legendrank-t.trace.legendrank||e._preSort-t._preSort}for(v.forEach(function(e,t){e[0]._preGroupSort=t}),v.sort(function(e,t){return e[0]._groupMinRank-t[0]._groupMinRank||e[0]._preGroupSort-t[0]._preGroupSort}),b=0;b<v.length;b++){v[b].forEach(function(e,t){e._preSort=t}),v[b].sort(k);var A=v[b][0].trace,M=null;for(w=0;w<v[b].length;w++){var E=v[b][w].trace.legendgrouptitle;if(E&&E.text){M=E,t&&(E.font=n._groupTitleFont);break}}if(a&&v[b].reverse(),M){var S=!1;for(w=0;w<v[b].length;w++)if(L.traceIs(v[b][w].trace,"pie-like")){S=!0;break}v[b].unshift({i:-1,groupTitle:M,noClick:S,trace:{showlegend:A.showlegend,legendgroup:A.legendgroup,visible:"toggleitem"===n.groupclick||A.visible}})}for(w=0;w<v[b].length;w++)v[b][w]=[v[b][w]]}return n._lgroupsLength=v.length,n._maxNameLength=u,v}},{"../../registry":378,"./helpers":213}],212:[function(e,t,n){"use strict";var N=e("../../lib"),F=e("../../registry"),z=!0;t.exports=function(e,t,n){var r=t._fullLayout;if(!t._dragged&&!t._editing){var a,i=r.legend.itemclick,o=r.legend.itemdoubleclick,s=r.legend.groupclick;if(z=(1===n&&"toggle"===i&&"toggleothers"===o&&z&&t.data&&t._context.showTips&&N.notifier(N._(t,"Double-click on legend to isolate one trace"),"long"),!1),1===n?a=i:2===n&&(a=o),a){var l="togglegroup"===s,c=r.hiddenlabels?r.hiddenlabels.slice():[],u=e.data()[0][0];if(!u.groupTitle||!u.noClick){var d,f,p,h=t._fullData,m=u.trace,g=m.legendgroup,y={},v=[],b=[],x=[];if(F.traceIs(m,"pie-like")){var _=u.label,i=c.indexOf(_);"toggle"===a?-1===i?c.push(_):c.splice(i,1):"toggleothers"===a&&(c=[],t.calcdata[0].forEach(function(e){_!==e.label&&c.push(e.label)}),t._fullLayout.hiddenlabels&&t._fullLayout.hiddenlabels.length===c.length&&-1===i&&(c=[])),F.call("_guiRelayout",t,"hiddenlabels",c)}else{var w,T,k=g&&g.length,A=[];if(k)for(C=0;C<h.length;C++)(w=h[C]).visible&&w.legendgroup===g&&A.push(C);if("toggle"===a){switch(m.visible){case!0:T="legendonly";break;case!1:T=!1;break;case"legendonly":T=!0}if(k)if(l)for(C=0;C<h.length;C++)!1!==h[C].visible&&h[C].legendgroup===g&&P(h[C],T);else P(m,T);else P(m,T)}else if("toggleothers"===a){for(var M,E,S,L=!0,C=0;C<h.length;C++)if(M=h[C]===m,S=!0!==h[C].showlegend,!(M||S||(E=k&&h[C].legendgroup===g)||!0!==h[C].visible||F.traceIs(h[C],"notLegendIsolatable"))){L=!1;break}for(C=0;C<h.length;C++)if(!1!==h[C].visible&&!F.traceIs(h[C],"notLegendIsolatable"))switch(m.visible){case"legendonly":P(h[C],!0);break;case!0:M=h[C]===m,S=!0!==h[C].showlegend&&!h[C].legendgroup,E=M||k&&h[C].legendgroup===g,P(h[C],!(!E&&!S)||(!!L||"legendonly"))}}for(C=0;C<b.length;C++)if(d=b[C])for(var O=d.constructUpdate(),D=Object.keys(O),I=0;I<D.length;I++)f=D[I],(y[f]=y[f]||[])[x[C]]=O[f];for(p=Object.keys(y),C=0;C<p.length;C++)for(f=p[C],I=0;I<v.length;I++)y[f].hasOwnProperty(I)||(y[f][I]=void 0);F.call("_guiRestyle",t,y,v)}}}}function R(e,t,n){var r=v.indexOf(e),a=(a=y[t])||(y[t]=[]);return-1===v.indexOf(e)&&(v.push(e),r=v.length-1),a[r]=n,r}function P(e,t){var n,r,a;u.groupTitle&&!l||(n=e._fullInput,F.hasTransform(n,"groupby")?((r=b[n.index])||(a=(a=F.getTransformIndices(n,"groupby"))[a.length-1],r=N.keyedContainer(n,"transforms["+a+"].styles","target","value.visible"),b[n.index]=r),!1!==(a=void 0===(a=r.get(e._group))?!0:a)&&r.set(e._group,t),x[n.index]=R(n.index,"visible",!1!==n.visible)):(a=!1!==n.visible&&t,R(n.index,"visible",a)))}}},{"../../lib":287,"../../registry":378}],213:[function(e,t,n){"use strict";n.isGrouped=function(e){return-1!==(e.traceorder||"").indexOf("grouped")},n.isVertical=function(e){return"h"!==e.orientation},n.isReversed=function(e){return-1!==(e.traceorder||"").indexOf("reversed")}},{}],214:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":207,"./defaults":209,"./draw":210,"./style":215}],215:[function(e,t,n){"use strict";var b=e("@plotly/d3"),o=e("../../registry"),h=e("../../lib"),i=h.strTranslate,x=e("../drawing"),_=e("../color"),w=e("../colorscale/helpers").extractOpts,m=e("../../traces/scatter/subtypes"),s=e("../../traces/pie/style_one"),l=e("../../traces/pie/helpers").castOption,a=e("./constants");function T(e,t){return(t?"radial":"horizontal")+(e?"":"reversed")}function k(e){var t,e=e[0].trace,n=e.contours,r=m.hasLines(e),a=m.hasMarkers(e),e=e.visible&&e.fill&&"none"!==e.fill,i=!1,o=!1;return n&&("lines"===(t=n.coloring)?i=!0:r="none"===t||"heatmap"===t||n.showlines,"constraint"===n.type?e="="!==n._operation:"fill"!==t&&"heatmap"!==t||(o=!0)),{showMarker:a,showLine:r,showFill:e,showGradientLine:i,showGradientFill:o,anyLine:r||i,anyFill:e||o}}function A(e,t,n){return e&&h.isArrayOrTypedArray(e)?t:n<e?n:e}t.exports=function(e,g,y){var t=g._fullLayout,d="constant"===(y=y||t.legend).itemsizing,p=y.itemwidth,t=(p+2*a.itemGap)/2,f=i(t,0),v=function(e,t,n,r){var a;if(e+1)a=e;else{if(!(t&&0<t.width))return 0;a=t.width}return d?r:Math.min(a,n)};function r(e,t,n){var p=e[0].trace,h=p.marker||{},m=h.line||{},r=n?p.visible&&p.type===n:o.traceIs(p,"bar"),t=b.select(t).select("g.legendpoints").selectAll("path.legend"+n).data(r?[e]:[]);t.enter().append("path").classed("legend"+n,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",f),t.exit().remove(),t.each(function(e){var t,n,r,a,i,o,s=b.select(this),e=e[0],l=v(e.mlw,h.line,5,2),c=(s.style("stroke-width",l+"px"),e.mcc),u=(!y._inHover&&"mc"in e&&(void 0===(d=(u=w(h)).mid)&&(d=(u.max+u.min)/2),c=x.tryColorscale(h,"")(d)),c||e.mc||h.color),d=h.pattern,f=d&&x.getPatternAttr(d.shape,0,"");f?(t=x.getPatternAttr(d.bgcolor,0,null),n=x.getPatternAttr(d.fgcolor,0,null),r=d.fgopacity,a=A(d.size,8,10),i=A(d.solidity,.5,1),o="legend-"+p.uid,s.call(x.pattern,"legend",g,o,f,a,i,c,d.fillmode,t,n,r)):s.call(_.fill,u),l&&_.stroke(s,e.mlc||m.color)})}function n(e,t,n){var r=e[0],a=r.trace,i=n?a.visible&&a.type===n:o.traceIs(a,n),t=b.select(t).select("g.legendpoints").selectAll("path.legend"+n).data(i?[e]:[]);t.enter().append("path").classed("legend"+n,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",f),t.exit().remove(),t.size()&&(i=(a.marker||{}).line,e=v(l(i.width,r.pts),i,5,2),(n=h.minExtend(a,{marker:{line:{width:e}}})).marker.line.color=i.color,a=h.minExtend(r,{trace:n}),s(t,a,n))}e.each(function(e){var t=b.select(this),t=h.ensureSingle(t,"g","layers"),n=(t.style("opacity",e[0].trace.opacity),y.valign),r=e[0].lineHeight,a=e[0].height;"middle"!==n&&r&&a?t.attr("transform",i(0,{top:1,bottom:-1}[n]*(.5*(r-a+3)))):t.attr("transform",null),t.selectAll("g.legendfill").data([e]).enter().append("g").classed("legendfill",!0);t.selectAll("g.legendlines").data([e]).enter().append("g").classed("legendlines",!0);n=t.selectAll("g.legendsymbols").data([e]);n.enter().append("g").classed("legendsymbols",!0),n.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",!0)}).each(function(e){var s,l=e[0].trace,t=[];if(l.visible)switch(l.type){case"histogram2d":case"heatmap":t=[["M-15,-2V4H15V-2Z"]],s=!0;break;case"choropleth":case"choroplethmapbox":t=[["M-6,-6V6H6V-6Z"]],s=!0;break;case"densitymapbox":t=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],s="radial";break;case"cone":s=!(t=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]]);break;case"streamtube":s=!(t=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]]);break;case"surface":t=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],s=!0;break;case"mesh3d":s=!(t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]]);break;case"volume":t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],s=!0;break;case"isosurface":s=!(t=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]])}e=b.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(t);e.enter().append("path").classed("legend3dandfriends",!0).attr("transform",f).style("stroke-miterlimit",1),e.exit().remove(),e.each(function(e,t){var n,r=b.select(this),a=w(l),i=a.colorscale,o=a.reversescale;i?s||(a=i.length,n=(0===t?i[o?a-1:0]:1===t?i[o?0:a-1]:i[Math.floor((a-1)/2)])[1]):(a=l.vertexcolor||l.facecolor||l.color,n=h.isArrayOrTypedArray(a)?a[t]||a[0]:a),r.attr("d",e[0]),n?r.call(_.fill,n):r.call(function(e){var t;e.size()&&(t="legendfill-"+l.uid,x.gradient(e,g,t,T(o,"radial"===s),i,"fill"))})})}).each(function(e){var a=e[0].trace,t="waterfall"===a.type;if(e[0]._distinct&&t)return n=e[0].trace[e[0].dir].marker,e[0].mc=n.color,e[0].mlw=n.line.width,e[0].mlc=n.line.color,r(e,this,"waterfall");var n=[];a.visible&&t&&(n=e[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);t=b.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(n);t.enter().append("path").classed("legendwaterfall",!0).attr("transform",f).style("stroke-miterlimit",1),t.exit().remove(),t.each(function(e){var t=b.select(this),n=a[e[0]].marker,r=v(void 0,n.line,5,2);t.attr("d",e[1]).style("stroke-width",r+"px").call(_.fill,n.color),r&&t.call(_.stroke,n.line.color)})}).each(function(e){r(e,this,"funnel")}).each(function(e){r(e,this)}).each(function(e){var n=e[0].trace,r=b.select(this).select("g.legendpoints").selectAll("path.legendbox").data(n.visible&&o.traceIs(n,"box-violin")?[e]:[]);r.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",f),r.exit().remove(),r.each(function(){var e,t=b.select(this);"all"!==n.boxpoints&&"all"!==n.points||0!==_.opacity(n.fillcolor)||0!==_.opacity((n.line||{}).color)?(e=v(void 0,n.line,5,2),t.style("stroke-width",e+"px").call(_.fill,n.fillcolor),e&&_.stroke(t,n.line.color)):(e=h.minExtend(n,{marker:{size:d?12:h.constrain(n.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}}),r.call(x.pointStyle,e,g))})}).each(function(e){n(e,this,"funnelarea")}).each(function(e){n(e,this,"pie")}).each(function(e){var t,n=k(e),r=n.showFill,a=n.showLine,i=n.showGradientLine,o=n.showGradientFill,s=n.anyFill,n=n.anyLine,l=e[0],c=l.trace,u=w(c),d=u.colorscale,f=u.reversescale,u=m.hasMarkers(c)||!s?"M5,0":n?"M5,-2":"M5,-3",s=b.select(this),n=s.select(".legendfill").selectAll("path").data(r||o?[e]:[]);n.enter().append("path").classed("js-fill",!0),n.exit().remove(),n.attr("d",u+"h"+p+"v6h-"+p+"z").call(r?x.fillGroupStyle:function(e){var t;e.size()&&(t="legendfill-"+c.uid,x.gradient(e,g,t,T(f),d,"fill"))}),(a||i)&&(o=v(void 0,c.line,10,5),e=h.minExtend(c,{line:{width:o}}),t=[h.minExtend(l,{trace:e})]);n=s.select(".legendlines").selectAll("path").data(a||i?[t]:[]);n.enter().append("path").classed("js-line",!0),n.exit().remove(),n.attr("d",u+(i?"l"+p+",0.0001":"h"+p)).call(a?x.lineGroupStyle:function(e){var t;e.size()&&(t="legendline-"+c.uid,x.lineGroupStyle(e),x.gradient(e,g,t,T(f),d,"stroke"))})}).each(function(e){var t,n=k(e),r=n.anyFill,a=n.anyLine,i=n.showLine,n=n.showMarker,o=e[0],s=o.trace,e=!n&&!a&&!r&&m.hasText(s);function l(e,t,n,r){e=h.nestedProperty(s,e).get(),t=h.isArrayOrTypedArray(e)&&t?t(e):e;if(d&&t&&void 0!==r&&(t=r),n){if(t<n[0])return n[0];if(t>n[1])return n[1]}return t}function c(e){return o._distinct&&o.index&&e[o.index]?e[o.index]:e[0]}{var u;(n||e||i)&&(a={},r={},n&&(a.mc=l("marker.color",c),a.mx=l("marker.symbol",c),a.mo=l("marker.opacity",h.mean,[.2,1]),a.mlc=l("marker.line.color",c),a.mlw=l("marker.line.width",h.mean,[0,5],2),r.marker={sizeref:1,sizemin:1,sizemode:"diameter"},u=l("marker.size",h.mean,[2,16],12),a.ms=u,r.marker.size=u),i&&(r.line={width:l("line.width",c,[0,10],5)}),e&&(a.tx="Aa",a.tp=l("textposition",c),a.ts=10,a.tc=l("textfont.color",c),a.tf=l("textfont.family",c)),u=[h.minExtend(o,a)],(t=h.minExtend(s,r)).selectedpoints=null,t.texttemplate=null)}i=b.select(this).select("g.legendpoints"),a=i.selectAll("path.scatterpts").data(n?u:[]);a.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",f),a.exit().remove(),a.call(x.pointStyle,t,g),n&&(u[0].mrc=3);r=i.selectAll("g.pointtext").data(e?u:[]);r.enter().append("g").classed("pointtext",!0).append("text").attr("transform",f),r.exit().remove(),r.selectAll("text").call(x.textPointStyle,t,g)}).each(function(e){var a=e[0].trace,e=b.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(a.visible&&"candlestick"===a.type?[e,e]:[]);e.enter().append("path").classed("legendcandle",!0).attr("d",function(e,t){return t?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",f).style("stroke-miterlimit",1),e.exit().remove(),e.each(function(e,t){var n=b.select(this),t=a[t?"increasing":"decreasing"],r=v(void 0,t.line,5,2);n.style("stroke-width",r+"px").call(_.fill,t.fillcolor),r&&_.stroke(n,t.line.color)})}).each(function(e){var a=e[0].trace,e=b.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(a.visible&&"ohlc"===a.type?[e,e]:[]);e.enter().append("path").classed("legendohlc",!0).attr("d",function(e,t){return t?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",f).style("stroke-miterlimit",1),e.exit().remove(),e.each(function(e,t){var n=b.select(this),t=a[t?"increasing":"decreasing"],r=v(void 0,t.line,5,2);n.style("fill","none").call(x.dashLine,t.line.dash,r),r&&_.stroke(n,t.line.color)})})}},{"../../lib":287,"../../registry":378,"../../traces/pie/helpers":492,"../../traces/pie/style_one":498,"../../traces/scatter/subtypes":525,"../color":157,"../colorscale/helpers":168,"../drawing":179,"./constants":208,"@plotly/d3":20}],216:[function(e,t,n){"use strict";e("./constants");t.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":218}],217:[function(e,t,n){"use strict";var g=e("../../registry"),r=e("../../plots/plots"),y=e("../../plots/cartesian/axis_ids"),a=e("../../fonts/ploticon"),i=e("../shapes/draw").eraseActiveShape,o=e("../../lib"),s=o._,e=t.exports={};function l(e,t){var t=t.currentTarget,n=t.getAttribute("data-attr"),r=t.getAttribute("data-val")||!0,a=e._fullLayout,i={},o=y.list(e,null,!0),s=a._cartesianSpikesEnabled;if("zoom"===n)for(var l,c,u,d,f="in"===r?.5:2,p=(1+f)/2,h=(1-f)/2,m=0;m<o.length;m++)(d=o[m]).fixedrange||(u=d._name,"auto"===r?i[u+".autorange"]=!0:"reset"===r?(void 0===d._rangeInitial?i[u+".autorange"]=!0:(l=d._rangeInitial.slice(),i[u+".range[0]"]=l[0],i[u+".range[1]"]=l[1]),void 0!==d._showSpikeInitial&&(i[u+".showspikes"]=d._showSpikeInitial,"on"!==s||d._showSpikeInitial||(s="off"))):(l=[d.r2l(d.range[0]),d.r2l(d.range[1])],i[u+".range[0]"]=d.l2r((c=[p*l[0]+h*l[1],p*l[1]+h*l[0]])[0]),i[u+".range[1]"]=d.l2r(c[1])));else"hovermode"!==n||"x"!==r&&"y"!==r||(r=a._isHoriz?"y":"x",t.setAttribute("data-val",r)),i[n]=r;a._cartesianSpikesEnabled=s,g.call("_guiRelayout",e,i)}function c(e,t){for(var t=t.currentTarget,n=t.getAttribute("data-attr"),r=t.getAttribute("data-val")||!0,a=e._fullLayout._subplots.gl3d||[],i={},o=n.split("."),s=0;s<a.length;s++)i[a[s]+"."+o[1]]=r;i.dragmode="pan"===r?r:"zoom",g.call("_guiRelayout",e,i)}function u(e,t){for(var t=t.currentTarget.getAttribute("data-attr"),n="resetLastSave"===t,r="resetDefault"===t,a=e._fullLayout,i=a._subplots.gl3d||[],o={},s=0;s<i.length;s++){var l,c=i[s],u=c+".camera",d=c+".aspectratio",f=c+".aspectmode",c=a[c]._scene;n?(o[u+".up"]=c.viewInitial.up,o[u+".eye"]=c.viewInitial.eye,o[u+".center"]=c.viewInitial.center,l=!0):r&&(o[u+".up"]=null,o[u+".eye"]=null,l=!(o[u+".center"]=null)),l&&(o[d+".x"]=c.viewInitial.aspectratio.x,o[d+".y"]=c.viewInitial.aspectratio.y,o[d+".z"]=c.viewInitial.aspectratio.z,o[f]=c.viewInitial.aspectmode)}g.call("_guiRelayout",e,o)}function d(e,t){var t=t.currentTarget,n=t._previousVal,r=e._fullLayout,a=r._subplots.gl3d||[],i=["xaxis","yaxis","zaxis"],o={},s={};if(n)s=n,t._previousVal=null;else{for(var l=0;l<a.length;l++){var c=a[l],u=r[c],d=c+".hovermode";o[d]=u.hovermode,s[d]=!1;for(var f=0;f<3;f++){var p=i[f],h=c+"."+p+".showspikes";s[h]=!1,o[h]=u[p].showspikes}}t._previousVal=o}return s}function f(e,t){for(var t=t.currentTarget,n=t.getAttribute("data-attr"),r=t.getAttribute("data-val")||!0,a=e._fullLayout,i=a._subplots.geo||[],o=0;o<i.length;o++){var s=i[o],l=a[s];"zoom"===n&&(l=l.projection.scale,g.call("_guiRelayout",e,s+".projection.scale","in"===r?2*l:.5*l))}"reset"===n&&v(e,"geo")}function p(e){e=e._fullLayout;return!e.hovermode&&(e._has("cartesian")?e._isHoriz?"y":"x":"closest")}function h(e){var t=p(e);g.call("_guiRelayout",e,"hovermode",t)}function m(e,t){for(var n=t.currentTarget.getAttribute("data-val"),r=e._fullLayout,a=r._subplots.mapbox||[],i={},o=0;o<a.length;o++){var s=a[o],l=r[s].zoom;i[s+".zoom"]="in"===n?1.05*l:l/1.05}g.call("_guiRelayout",e,i)}function v(e,t){for(var n=e._fullLayout,r=n._subplots[t]||[],a={},i=0;i<r.length;i++)for(var o=r[i],s=n[o]._subplot.viewInitial,l=Object.keys(s),c=0;c<l.length;c++){var u=l[c];a[o+"."+u]=s[u]}g.call("_guiRelayout",e,a)}e.toImage={name:"toImage",title:function(e){var t=(e._context.toImageButtonOptions||{}).format||"png";return s(e,"png"===t?"Download plot as a png":"Download plot")},icon:a.camera,click:function(t){var n=t._context.toImageButtonOptions,r={format:n.format||"png"};o.notifier(s(t,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==r.format&&o.isIE()&&(o.notifier(s(t,"IE only supports svg.  Changing format to svg."),"long"),r.format="svg"),["filename","width","height","scale"].forEach(function(e){e in n&&(r[e]=n[e])}),g.call("downloadImage",t,r).then(function(e){o.notifier(s(t,"Snapshot succeeded")+" - "+e,"long")}).catch(function(){o.notifier(s(t,"Sorry, there was a problem downloading your snapshot!"),"long")})}},e.sendDataToCloud={name:"sendDataToCloud",title:function(e){return s(e,"Edit in Chart Studio")},icon:a.disk,click:function(e){r.sendDataToCloud(e)}},e.editInChartStudio={name:"editInChartStudio",title:function(e){return s(e,"Edit in Chart Studio")},icon:a.pencil,click:function(e){r.sendDataToCloud(e)}},e.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"dragmode",val:"zoom",icon:a.zoombox,click:l},e.pan2d={name:"pan2d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"dragmode",val:"pan",icon:a.pan,click:l},e.select2d={name:"select2d",_cat:"select",title:function(e){return s(e,"Box Select")},attr:"dragmode",val:"select",icon:a.selectbox,click:l},e.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return s(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:a.lasso,click:l},e.drawclosedpath={name:"drawclosedpath",title:function(e){return s(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:a.drawclosedpath,click:l},e.drawopenpath={name:"drawopenpath",title:function(e){return s(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:a.drawopenpath,click:l},e.drawline={name:"drawline",title:function(e){return s(e,"Draw line")},attr:"dragmode",val:"drawline",icon:a.drawline,click:l},e.drawrect={name:"drawrect",title:function(e){return s(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:a.drawrect,click:l},e.drawcircle={name:"drawcircle",title:function(e){return s(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:a.drawcircle,click:l},e.eraseshape={name:"eraseshape",title:function(e){return s(e,"Erase active shape")},icon:a.eraseshape,click:i},e.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:l},e.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:l},e.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return s(e,"Autoscale")},attr:"zoom",val:"auto",icon:a.autoscale,click:l},e.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return s(e,"Reset axes")},attr:"zoom",val:"reset",icon:a.home,click:l},e.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return s(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:a.tooltip_basic,gravity:"ne",click:l},e.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return s(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:a.tooltip_compare,gravity:"ne",click:l},e.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return s(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:a.zoombox,click:c},e.pan3d={name:"pan3d",_cat:"pan",title:function(e){return s(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:a.pan,click:c},e.orbitRotation={name:"orbitRotation",title:function(e){return s(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:a["3d_rotate"],click:c},e.tableRotation={name:"tableRotation",title:function(e){return s(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:a["z-axis"],click:c},e.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return s(e,"Reset camera to default")},attr:"resetDefault",icon:a.home,click:u},e.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return s(e,"Reset camera to last save")},attr:"resetLastSave",icon:a.movie,click:u},e.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:function(e,t){t=d(e,t);g.call("_guiRelayout",e,t)}},e.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:f},e.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:f},e.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return s(e,"Reset")},attr:"reset",val:null,icon:a.autoscale,click:f},e.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:h},e.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:h},e.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:a.tooltip_basic,gravity:"ne",click:h},e.resetViewSankey={name:"resetSankeyGroup",title:function(e){return s(e,"Reset view")},icon:a.home,click:function(e){for(var t={"node.groups":[],"node.x":[],"node.y":[]},n=0;n<e._fullData.length;n++){var r=e._fullData[n]._viewInitial;t["node.groups"].push(r.node.groups.slice()),t["node.x"].push(r.node.x.slice()),t["node.y"].push(r.node.y.slice())}g.call("restyle",e,t)}},e.toggleHover={name:"toggleHover",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:function(e,t){t=d(e,t);t.hovermode=p(e),g.call("_guiRelayout",e,t)}},e.resetViews={name:"resetViews",title:function(e){return s(e,"Reset views")},icon:a.home,click:function(e,t){var n=t.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),l(e,t),n.setAttribute("data-attr","resetLastSave"),u(e,t),v(e,"geo"),v(e,"mapbox")}},e.toggleSpikelines={name:"toggleSpikelines",title:function(e){return s(e,"Toggle Spike Lines")},icon:a.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout,n=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled="on"===n?"off":"on",g.call("_guiRelayout",e,function(e){for(var t="on"===e._fullLayout._cartesianSpikesEnabled,n=y.list(e,null,!0),r={},a=0;a<n.length;a++){var i=n[a];r[i._name+".showspikes"]=t||i._showSpikeInitial}return r}(e))}},e.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return s(e,"Reset view")},attr:"reset",icon:a.home,click:function(e){v(e,"mapbox")}},e.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:m},e.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:m}},{"../../fonts/ploticon":270,"../../lib":287,"../../plots/cartesian/axis_ids":338,"../../plots/plots":371,"../../registry":378,"../shapes/draw":241}],218:[function(e,t,n){"use strict";var r=e("./buttons"),e=Object.keys(r),a=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],i=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(a),o=[];e.forEach(function(e){var t;e=r[e],-1===i.indexOf(e._cat||e.name)&&(t=e.name,e=(e._cat||e.name).toLowerCase(),-1===o.indexOf(t)&&o.push(t),-1===o.indexOf(e)&&o.push(e))}),o.sort(),t.exports={DRAW_MODES:a,backButtons:i,foreButtons:o}},{"./buttons":217}],219:[function(e,t,n){"use strict";var i=e("../../lib"),o=e("../color"),s=e("../../plot_api/plot_template"),l=e("./attributes");t.exports=function(e,t){var n=e.modebar||{},r=s.newContainer(t,"modebar");function a(e,t){i.coerce(n,r,l,e,t)}a("orientation"),a("bgcolor",o.addOpacity(t.paper_bgcolor,.5));e=o.contrast(o.rgb(t.modebar.bgcolor));a("color",o.addOpacity(e,.3)),a("activecolor",o.addOpacity(e,.7)),a("uirevision",t.uirevision),a("add"),a("remove")}},{"../../lib":287,"../../plot_api/plot_template":323,"../color":157,"./attributes":216}],220:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"modebar",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),manage:e("./manage")}},{"./attributes":216,"./defaults":219,"./manage":221}],221:[function(e,t,n){"use strict";var C=e("../../plots/cartesian/axis_ids"),O=e("../../traces/scatter/subtypes"),D=e("../../registry"),I=e("../fx/helpers").isUnifiedHover,i=e("./modebar"),R=e("./buttons"),P=e("./constants").DRAW_MODES;t.exports=function(e){var t=e._fullLayout,n=e._context,r=t._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var a=n.modeBarButtons,a=Array.isArray(a)&&a.length?function(e){for(var t=0;t<e.length;t++)for(var n=e[t],r=0;r<n.length;r++){var a=n[r];if("string"==typeof a){if(void 0===R[a])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));e[t][r]=R[a]}}return e}(a):!n.displayModeBar&&n.watermark?[]:function(e){var t=e._fullLayout,n=e._fullData,r=e._context;function a(e,t){if("string"==typeof t){if(t.toLowerCase()===e.toLowerCase())return 1}else{var n=t.name,t=t._cat||t.name;if(n===e||t===e.toLowerCase())return 1}}e=t.modebar.add;"string"==typeof e&&(e=[e]);var i=t.modebar.remove;"string"==typeof i&&(i=[i]);var o=r.modeBarButtonsToAdd.concat(e.filter(function(e){for(var t=0;t<r.modeBarButtonsToRemove.length;t++)if(a(e,r.modeBarButtonsToRemove[t]))return!1;return!0})),u=r.modeBarButtonsToRemove.concat(i.filter(function(e){for(var t=0;t<r.modeBarButtonsToAdd.length;t++)if(a(e,r.modeBarButtonsToAdd[t]))return!1;return!0})),e=t._has("cartesian"),i=t._has("gl3d"),s=t._has("geo"),l=t._has("pie"),c=t._has("funnelarea"),d=t._has("gl2d"),f=t._has("ternary"),p=t._has("mapbox"),h=t._has("polar"),m=t._has("smith"),g=t._has("sankey"),y=function(e){for(var t=C.list({_fullLayout:e},null,!0),n=0;n<t.length;n++)if(!t[n].fixedrange)return!1;return!0}(t),v=I(t.hovermode),b=[];function x(e){if(e.length){for(var t=[],n=0;n<e.length;n++){for(var r=e[n],a=R[r],i=a.name.toLowerCase(),o=(a._cat||a.name).toLowerCase(),s=!1,l=0;l<u.length;l++){var c=u[l].toLowerCase();if(c===i||c===o){s=!0;break}}s||t.push(R[r])}b.push(t)}}var _=["toImage"];r.showEditInChartStudio?_.push("editInChartStudio"):r.showSendToCloud&&_.push("sendDataToCloud");x(_);var _=[],w=[],T=[],k=[];1<(e||d||l||c||f)+s+i+p+h+m?(w=["toggleHover"],T=["resetViews"]):s?(_=["zoomInGeo","zoomOutGeo"],w=["hoverClosestGeo"],T=["resetGeo"]):i?(w=["hoverClosest3d"],T=["resetCameraDefault3d","resetCameraLastSave3d"]):p?(_=["zoomInMapbox","zoomOutMapbox"],w=["toggleHover"],T=["resetViewMapbox"]):d?w=["hoverClosestGl2d"]:l?w=["hoverClosestPie"]:g?(w=["hoverClosestCartesian","hoverCompareCartesian"],T=["resetViewSankey"]):w=["toggleHover"];e&&(w=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);(function(e){for(var t=0;t<e.length;t++)if(!D.traceIs(e[t],"noHover"))return;return 1}(n)||v)&&(w=[]);!e&&!d||y||(_=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==T[0]&&(T=["resetScale2d"]));i?k=["zoom3d","pan3d","orbitRotation","tableRotation"]:(e||d)&&!y||f?k=["zoom2d","pan2d"]:p||s?k=["pan2d"]:h&&(k=["zoom2d"]);!function(e){for(var t=!1,n=0;n<e.length&&!t;n++){var r=e[n];r._module&&r._module.selectPoints&&(D.traceIs(r,"scatter-like")?(O.hasMarkers(r)||O.hasText(r))&&(t=!0):D.traceIs(r,"box-violin")&&"all"!==r.boxpoints&&"all"!==r.points||(t=!0))}return t}(n)||k.push("select2d","lasso2d");function A(e){-1===M.indexOf(e)&&-1!==w.indexOf(e)&&M.push(e)}var M=[];if(Array.isArray(o)){for(var E=[],S=0;S<o.length;S++){var L=o[S];"string"==typeof L?(L=L.toLowerCase(),-1!==P.indexOf(L)?(t._has("mapbox")||t._has("cartesian"))&&k.push(L):"togglespikelines"===L?A("toggleSpikelines"):"togglehover"===L?A("toggleHover"):"hovercompare"===L?A("hoverCompareCartesian"):"hoverclosest"===L?(A("hoverClosestCartesian"),A("hoverClosestGeo"),A("hoverClosest3d"),A("hoverClosestGl2d"),A("hoverClosestPie")):"v1hovermode"===L&&(A("toggleHover"),A("hoverClosestCartesian"),A("hoverCompareCartesian"),A("hoverClosestGeo"),A("hoverClosest3d"),A("hoverClosestGl2d"),A("hoverClosestPie"))):E.push(L)}o=E}return x(k),x(_.concat(T)),x(M),function(e,t){if(t.length)if(Array.isArray(t[0]))for(var n=0;n<t.length;n++)e.push(t[n]);else e.push(t);return e}(b,o)}(e);r?r.update(e,a):t._modeBar=i(e,a)}else r&&(r.destroy(),delete t._modeBar)}},{"../../plots/cartesian/axis_ids":338,"../../registry":378,"../../traces/scatter/subtypes":525,"../fx/helpers":193,"./buttons":217,"./constants":218,"./modebar":222}],222:[function(e,t,n){"use strict";var o=e("@plotly/d3"),a=e("fast-isnumeric"),s=e("../../lib"),i=e("../../fonts/ploticon"),r=e("../../version").version,l=new DOMParser;function c(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}e=c.prototype;e.update=function(e,t){this.graphInfo=e;var e=this.graphInfo._context,n=this.graphInfo._fullLayout,r="modebar-"+n._uid,a=(this.element.setAttribute("id",r),this._uid=r,this.element.className="modebar","hover"===e.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===n.modebar.orientation&&(this.element.className+=" vertical",t=t.reverse()),n.modebar),i="hover"===e.displayModeBar?".js-plotly-plot .plotly:hover ":"",i=(s.deleteRelatedStyleRule(r),s.addRelatedStyleRule(r,i+"#"+r+" .modebar-group","background-color: "+a.bgcolor),s.addRelatedStyleRule(r,"#"+r+" .modebar-btn .icon path","fill: "+a.color),s.addRelatedStyleRule(r,"#"+r+" .modebar-btn:hover .icon path","fill: "+a.activecolor),s.addRelatedStyleRule(r,"#"+r+" .modebar-btn.active .icon path","fill: "+a.activecolor),!this.hasButtons(t)),r=this.hasLogo!==e.displaylogo,a=this.locale!==e.locale;this.locale=e.locale,(i||r||a)&&(this.removeAllButtons(),this.updateButtons(t),(e.watermark||e.displaylogo)&&(i=this.getLogo(),e.watermark&&(i.className=i.className+" watermark"),"v"===n.modebar.orientation?this.element.insertBefore(i,this.element.childNodes[0]):this.element.appendChild(i),this.hasLogo=!0)),this.updateActiveButton()},e.updateButtons=function(e){var r=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(e){var n=r.createGroup();e.forEach(function(e){var t=e.name;if(!t)throw new Error("must provide button 'name' in button config");if(-1!==r.buttonsNames.indexOf(t))throw new Error("button name '"+t+"' is taken");r.buttonsNames.push(t);t=r.createButton(e);r.buttonElements.push(t),n.appendChild(t)}),r.element.appendChild(n)})},e.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e},e.createButton=function(t){var n=this,e=document.createElement("a"),r=(e.setAttribute("rel","tooltip"),e.className="modebar-btn",t.title),r=(void 0===r?r=t.name:"function"==typeof r&&(r=r(this.graphInfo)),!r&&0!==r||e.setAttribute("data-title",r),void 0!==t.attr&&e.setAttribute("data-attr",t.attr),t.val);if(void 0!==r&&("function"==typeof r&&(r=r(this.graphInfo)),e.setAttribute("data-val",r)),"function"!=typeof t.click)throw new Error("must provide button 'click' function in button config");e.addEventListener("click",function(e){t.click(n.graphInfo,e),n.updateActiveButton(e.currentTarget)}),e.setAttribute("data-toggle",t.toggle||!1),t.toggle&&o.select(e).classed("active",!0);r=t.icon;return"function"==typeof r?e.appendChild(r()):e.appendChild(this.createIcon(r||i.question)),e.setAttribute("data-gravity",t.gravity||"n"),e},e.createIcon=function(e){var t,n=a(e.height)?Number(e.height):e.ascent-e.descent,r="http://www.w3.org/2000/svg";return e.path&&((t=document.createElementNS(r,"svg")).setAttribute("viewBox",[0,0,e.width,n].join(" ")),t.setAttribute("class","icon"),(n=document.createElementNS(r,"path")).setAttribute("d",e.path),e.transform?n.setAttribute("transform",e.transform):void 0!==e.ascent&&n.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),t.appendChild(n)),(t=e.svg?l.parseFromString(e.svg,"application/xml").childNodes[0]:t).setAttribute("height","1em"),t.setAttribute("width","1em"),t},e.updateActiveButton=function(e){var a=this.graphInfo._fullLayout,i=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var t=e.getAttribute("data-val")||!0,n=e.getAttribute("data-attr"),r="true"===e.getAttribute("data-toggle"),e=o.select(e);r?n===i&&e.classed("active",!e.classed("active")):(r=null===n?n:s.nestedProperty(a,n).get(),e.classed("active",r===t))})},e.hasButtons=function(e){var t=this.buttons;if(!t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;r++)if(e[n][r].name!==t[n][r].name)return!1}return!0},e.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plotly.com/",t.target="_blank",t.setAttribute("data-title",s._(this.graphInfo,"Produced with Plotly.js")+" (v"+r+")"),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(i.newplotlylogo)),e.appendChild(t),e},e.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},e.destroy=function(){s.removeElement(this.container.querySelector(".modebar")),s.deleteRelatedStyleRule(this._uid)},t.exports=function(e,t){var n=e._fullLayout,e=new c({graphInfo:e,container:n._modebardiv.node(),buttons:t});return n._privateplot&&o.select(e.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),e}},{"../../fonts/ploticon":270,"../../lib":287,"../../version":552,"@plotly/d3":20,"fast-isnumeric":33}],223:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("../color/attributes"),e=(0,e("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});t.exports={visible:{valType:"boolean",editType:"plot"},buttons:e,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:r({editType:"plot"}),bgcolor:{valType:"color",dflt:a.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":323,"../../plots/font_attributes":365,"../color/attributes":156}],224:[function(e,t,n){"use strict";t.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],225:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../color"),u=e("../../plot_api/plot_template"),d=e("../../plots/array_container_defaults"),f=e("./attributes"),p=e("./constants");function h(n,r,e,t){var a,t=t.calendar;function i(e,t){return l.coerce(n,r,f.buttons,e,t)}i("visible")&&("all"!==(a=i("step"))&&(!t||"gregorian"===t||"month"!==a&&"year"!==a?i("stepmode"):r.stepmode="backward",i("count")),i("label"))}t.exports=function(e,t,n,r,a){var i=e.rangeselector||{},o=u.newContainer(t,"rangeselector");function s(e,t){return l.coerce(i,o,f,e,t)}s("visible",0<d(i,o,{name:"buttons",handleItemDefaults:h,calendar:a}).length)&&(s("x",(a=function(t,n,e){for(var r=e.filter(function(e){return n[e].anchor===t._id}),a=0,i=0;i<r.length;i++){var o=n[r[i]].domain;o&&(a=Math.max(o[1],a))}return[t.domain[0],a+p.yPad]}(t,n,r))[0]),s("y",a[1]),l.noneOrAll(e,t,["x","y"]),s("xanchor"),s("yanchor"),l.coerceFont(s,"font",n.font),r=s("bgcolor"),s("activecolor",c.contrast(r,p.lightAmount,p.darkAmount)),s("bordercolor"),s("borderwidth"))}},{"../../lib":287,"../../plot_api/plot_template":323,"../../plots/array_container_defaults":329,"../color":157,"./attributes":223,"./constants":224}],226:[function(e,t,n){"use strict";var h=e("@plotly/d3"),m=e("../../registry"),g=e("../../plots/plots"),r=e("../color"),y=e("../drawing"),v=e("../../lib"),b=v.strTranslate,x=e("../../lib/svg_text_utils"),i=e("../../plots/cartesian/axis_ids"),a=e("../../constants/alignment"),_=a.LINE_SPACING,w=a.FROM_TL,T=a.FROM_BR,k=e("./constants"),A=e("./get_update_object");function o(e){return e._id}function M(e,t,n){var e=v.ensureSingle(e,"rect","selector-rect",function(e){e.attr("shape-rendering","crispEdges")});e.attr({rx:k.rx,ry:k.ry}),e.call(r.stroke,t.bordercolor).call(r.fill,(e=t,(n=n)._isActive||n._isHovered?e.activecolor:e.bgcolor)).style("stroke-width",t.borderwidth+"px")}function E(e,t,n,r){v.ensureSingle(e,"text","selector-text",function(e){e.attr("text-anchor","middle")}).call(y.font,t.font).text(function(e,t){if(e.label)return t?v.templateString(e.label,t):e.label;return"all"===e.step?"all":e.count+e.step.charAt(0)}(n,r._fullLayout._meta)).call(function(e){x.convertToTspans(e,r)})}t.exports=function(p){var e=p._fullLayout._infolayer.selectAll(".rangeselector").data(function(e){for(var t=i.list(e,"x",!0),n=[],r=0;r<t.length;r++){var a=t[r];a.rangeselector&&a.rangeselector.visible&&n.push(a)}return n}(p),o);e.enter().append("g").classed("rangeselector",!0),e.exit().remove(),e.style({cursor:"pointer","pointer-events":"all"}),e.each(function(e){var t=h.select(this),o=e,s=o.rangeselector,e=t.selectAll("g.button").data(v.filterVisible(s.buttons)),n=(e.enter().append("g").classed("button",!0),e.exit().remove(),e.each(function(e){var t,n,r,a=h.select(this),i=A(o,e);e._isActive=(t=o,r=i,"all"===(n=e).step?!0===t.autorange:(n=Object.keys(r),t.range[0]===r[n[0]]&&t.range[1]===r[n[1]])),a.call(M,s,e),a.call(E,s,e,p),a.on("click",function(){p._dragged||m.call("_guiRelayout",p,i)}),a.on("mouseover",function(){e._isHovered=!0,a.call(M,s,e)}),a.on("mouseout",function(){e._isHovered=!1,a.call(M,s,e)})}),p),l=s,r=o._name,c=0,u=0,d=l.borderwidth;e.each(function(){var e=h.select(this).select(".selector-text"),t=l.font.size*_,t=Math.max(t*x.lineCount(e),16)+3;u=Math.max(u,t)}),e.each(function(){var e=h.select(this),t=e.select(".selector-rect"),n=e.select(".selector-text"),r=n.node()&&y.bBox(n.node()).width,a=l.font.size*_,i=x.lineCount(n),r=Math.max(r+10,k.minButtonWidth);e.attr("transform",b(d+c,d)),t.attr({x:0,y:0,width:r,height:u}),x.positionText(n,r/2,u/2-(i-1)*a/2+3),c+=r+5});var a=(e=n._fullLayout._size).l+e.w*l.x,e=e.t+e.h*(1-l.y),i="left",f=(v.isRightAnchor(l)&&(a-=c,i="right"),v.isCenterAnchor(l)&&(a-=c/2,i="center"),"top");v.isBottomAnchor(l)&&(e-=u,f="bottom"),v.isMiddleAnchor(l)&&(e-=u/2,f="middle"),c=Math.ceil(c),u=Math.ceil(u),a=Math.round(a),e=Math.round(e),g.autoMargin(n,r+"-range-selector",{x:l.x,y:l.y,l:c*w[i],r:c*T[i],b:u*T[f],t:u*w[f]}),t.attr("transform",b(a,e))})}},{"../../constants/alignment":262,"../../lib":287,"../../lib/svg_text_utils":310,"../../plots/cartesian/axis_ids":338,"../../plots/plots":371,"../../registry":378,"../color":157,"../drawing":179,"./constants":224,"./get_update_object":227,"@plotly/d3":20}],227:[function(e,t,n){"use strict";var c=e("d3-time"),u=e("../../lib").titleCase;t.exports=function(e,t){var n=e._name,r={};return"all"===t.step?r[n+".autorange"]=!0:(e=function(e,t){var n,r=e.range,a=new Date(e.r2l(r[1])),i=t.step,o=c["utc"+u(i)],s=t.count;switch(t.stepmode){case"backward":n=e.l2r(+o.offset(a,-s));break;case"todate":var l=o.offset(a,-s);n=e.l2r(+o.ceil(l))}i=r[1];return[n,i]}(e,t),r[n+".range[0]"]=e[0],r[n+".range[1]"]=e[1]),r}},{"../../lib":287,"d3-time":32}],228:[function(e,t,n){"use strict";t.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":223,"./defaults":225,"./draw":226}],229:[function(e,t,n){"use strict";e=e("../color/attributes");t.exports={bgcolor:{valType:"color",dflt:e.background,editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":156}],230:[function(e,t,n){"use strict";var i=e("../../plots/cartesian/axis_ids").list,o=e("../../plots/cartesian/autorange").getAutoRange,s=e("./constants");t.exports=function(e){for(var t=i(e,"x",!0),n=0;n<t.length;n++){var r=t[n],a=r[s.name];a&&a.visible&&a.autorange&&(a._input.autorange=!0,a._input.range=a.range=o(e,r))}}},{"../../plots/cartesian/autorange":333,"../../plots/cartesian/axis_ids":338,"./constants":231}],231:[function(e,t,n){"use strict";t.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],232:[function(e,t,n){"use strict";var h=e("../../lib"),m=e("../../plot_api/plot_template"),g=e("../../plots/cartesian/axis_ids"),y=e("./attributes"),v=e("./oppaxis_attributes");t.exports=function(e,t,n){var e=e[n],r=t[n];if(e.rangeslider||t._requestRangeslider[r._id]){h.isPlainObject(e.rangeslider)||(e.rangeslider={});var a=e.rangeslider,i=m.newContainer(r,"rangeslider");if(f("visible")){f("bgcolor",t.plot_bgcolor),f("bordercolor"),f("borderwidth"),f("thickness"),f("autorange",!r.isValidRange(a.range)),f("range");e=t._subplots;if(e)for(var r=e.cartesian.filter(function(e){return e.substr(0,e.indexOf("y"))===g.name2id(n)}).map(function(e){return e.substr(e.indexOf("y"),e.length)}),o=h.simpleMap(r,g.id2name),s=0;s<o.length;s++){var l,c=o[s],u=a[c]||{},d=m.newContainer(i,c,"yaxis"),c=t[c];"match"!==p("rangemode",l=u.range&&c.isValidRange(u.range)?"fixed":l)&&p("range",c.range.slice())}i._input=a}}function f(e,t){return h.coerce(a,i,y,e,t)}function p(e,t){return h.coerce(u,d,v,e,t)}}},{"../../lib":287,"../../plot_api/plot_template":323,"../../plots/cartesian/axis_ids":338,"./attributes":229,"./oppaxis_attributes":236}],233:[function(e,t,n){"use strict";var I=e("@plotly/d3"),R=e("../../registry"),f=e("../../plots/plots"),P=e("../../lib"),N=P.strTranslate,o=e("../drawing"),l=e("../color"),F=e("../titles"),p=e("../../plots/cartesian"),z=e("../../plots/cartesian/axis_ids"),j=e("../dragelement"),q=e("../../lib/setcursor"),H=e("./constants");function B(e,t,n,r){var e=P.ensureSingle(e,"rect",H.bgClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),a=r.borderwidth%2==0?r.borderwidth:r.borderwidth-1,i=-r._offsetShift,t=o.crispRound(t,r.borderwidth);e.attr({width:r._width+a,height:r._height+a,transform:N(i,i),fill:r.bgcolor,stroke:r.bordercolor,"stroke-width":t})}function U(e,t,n,r){t=t._fullLayout;P.ensureSingleById(t._topdefs,"clipPath",r._clipId,function(e){e.append("rect").attr({x:0,y:0})}).select("rect").attr({width:r._width,height:r._height})}function V(e,s,l,c){var u,d=s.calcdata,e=e.selectAll("g."+H.rangePlotClassName).data(l._subplotsWith,P.identity);e.enter().append("g").attr("class",function(e){return H.rangePlotClassName+" "+e}).call(o.setClipUrl,c._clipId,s),e.order(),e.exit().remove(),e.each(function(e,t){var n=I.select(this),t=0===t,r=z.getFromId(s,e,"y"),a=r._name,i=c[a],o={data:[],layout:{xaxis:{type:l.type,domain:[0,1],range:c.range.slice(),calendar:l.calendar},width:c._width,height:c._height,margin:{t:0,b:0,l:0,r:0}},_context:s._context},i=(l.rangebreaks&&(o.layout.xaxis.rangebreaks=l.rangebreaks),o.layout[a]={type:r.type,domain:[0,1],range:("match"!==i.rangemode?i:r).range.slice(),calendar:r.calendar},r.rangebreaks&&(o.layout[a].rangebreaks=r.rangebreaks),f.supplyDefaults(o),o._fullLayout.xaxis),r=o._fullLayout[a],o=(i.clearCalc(),i.setScale(),r.clearCalc(),r.setScale(),{id:e,plotgroup:n,xaxis:i,yaxis:r,isRangePlot:!0});t?u=o:(o.mainplot="xy",o.mainplotinfo=u),p.rangePlot(s,o,function(e,t){for(var n=[],r=0;r<e.length;r++){var a=e[r],i=a[0].trace;i.xaxis+i.yaxis===t&&n.push(a)}return n}(d,e))})}function Y(e,t,n,r,a){P.ensureSingle(e,"rect",H.maskMinClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",r._height).call(l.fill,H.maskColor),P.ensureSingle(e,"rect",H.maskMaxClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",r._height).call(l.fill,H.maskColor),"match"!==a.rangemode&&(P.ensureSingle(e,"rect",H.maskMinOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",r._width).call(l.fill,H.maskOppAxisColor),P.ensureSingle(e,"rect",H.maskMaxOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",r._width).style("border-top",H.maskOppBorder).call(l.fill,H.maskOppAxisColor))}function $(e,t,n,r){t._context.staticPlot||P.ensureSingle(e,"rect",H.slideBoxClassName,function(e){e.attr({y:0,cursor:H.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:r._height,fill:H.slideBoxFill})}function G(e,t,n,r){var a=P.ensureSingle(e,"g",H.grabberMinClassName),e=P.ensureSingle(e,"g",H.grabberMaxClassName),i={x:0,width:H.handleWidth,rx:H.handleRadius,fill:l.background,stroke:l.defaultLine,"stroke-width":H.handleStrokeWidth,"shape-rendering":"crispEdges"},o={y:Math.round(r._height/4),height:Math.round(r._height/2)};P.ensureSingle(a,"rect",H.handleMinClassName,function(e){e.attr(i)}).attr(o);P.ensureSingle(e,"rect",H.handleMaxClassName,function(e){e.attr(i)}).attr(o);var s={width:H.grabAreaWidth,x:0,y:0,fill:H.grabAreaFill,cursor:t._context.staticPlot?void 0:H.grabAreaCursor};P.ensureSingle(a,"rect",H.grabAreaMinClassName,function(e){e.attr(s)}).attr("height",r._height),P.ensureSingle(e,"rect",H.grabAreaMaxClassName,function(e){e.attr(s)}).attr("height",r._height)}t.exports=function(O){for(var D=O._fullLayout,e=D._rangeSliderData,t=0;t<e.length;t++){var n=e[t][H.name];n._clipId=n._id+"-"+D._uid}var r=D._infolayer.selectAll("g."+H.containerClassName).data(e,function(e){return e._name});r.exit().each(function(e){e=e[H.name];D._topdefs.select("#"+e._clipId).remove()}).remove(),0!==e.length&&(r.enter().append("g").classed(H.containerClassName,!0).attr("pointer-events","all"),r.each(function(e){var t,n,r,y,v,b,x,_,w,a=I.select(this),i=e[H.name],o=D[z.id2name(e.anchor)],s=i[z.id2name(e.anchor)],l=(i.range&&(c=P.simpleMap(i.range,e.r2l),c=(l=P.simpleMap(e.range,e.r2l))[0]<l[1]?[Math.min(c[0],l[0]),Math.max(c[1],l[1])]:[Math.max(c[0],l[0]),Math.min(c[1],l[1])],i.range=i._input.range=P.simpleMap(c,e.l2r)),e.cleanRange("rangeslider.range"),D._size),c=e.domain,c=(i._width=l.w*(c[1]-c[0]),Math.round(l.l+l.w*c[0])),l=Math.round(l.t+l.h*(1-e._counterDomainMin)+("bottom"===e.side?e._depth:0)+i._offsetShift+H.extraPad),u=(a.attr("transform",N(c,l)),i._rl=P.simpleMap(i.range,e.r2l),i._rl[0]),c=i._rl[1],d=c-u;if(i.p2d=function(e){return e/i._width*d+u},i.d2p=function(e){return(e-u)/d*i._width},e.rangebreaks){var f=e.locateBreaks(u,c);if(f.length){for(var p,h=0,m=0;m<f.length;m++)h+=(p=f[m]).max-p.min;var g=i._width/(c-u-h),T=[-g*u];for(m=0;m<f.length;m++)p=f[m],T.push(T[T.length-1]-g*(p.max-p.min));for(i.d2p=function(e){for(var t=T[0],n=0;n<f.length;n++){var r=f[n];if(e>=r.max)t=T[n+1];else if(e<r.min)break}return t+g*e},m=0;m<f.length;m++)(p=f[m]).pmin=i.d2p(p.min),p.pmax=i.d2p(p.max);i.p2d=function(e){for(var t=T[0],n=0;n<f.length;n++){var r=f[n];if(e>=r.pmax)t=T[n+1];else if(e<r.pmin)break}return(e-t)/g}}}function k(){var e=I.event,d=e.target,f=e.clientX||e.touches[0].clientX,p=f-r.node().getBoundingClientRect().left,h=b.d2p(v._rl[0]),m=b.d2p(v._rl[1]),g=j.coverSlip();function t(e){var t,n,r,a,i,o,s,l,c=+(e.clientX||e.touches[0].clientX)-f;switch(d){case x:t="ew-resize",r=h+c,n=m+c;break;case _:t="col-resize",r=h+c,n=m;break;case w:t="col-resize",r=h,n=m+c;break;default:t="ew-resize",n=(r=p)+c}function u(e){return i.l2r(P.constrain(e,o._rl[0],o._rl[1]))}n<r&&(e=n,n=r,r=e),b._pixelMin=r,b._pixelMax=n,q(I.select(g),t),a=y,i=v,s=u((o=b).p2d(o._pixelMin)),l=u(o.p2d(o._pixelMax)),window.requestAnimationFrame(function(){R.call("_guiRelayout",a,i._name+".range",[s,l])})}function n(){g.removeEventListener("mousemove",t),g.removeEventListener("mouseup",n),this.removeEventListener("touchmove",t),this.removeEventListener("touchend",n),P.removeElement(g)}this.addEventListener("touchmove",t),this.addEventListener("touchend",n),g.addEventListener("mousemove",t),g.addEventListener("mouseup",n)}"match"!==s.rangemode&&(t=o.r2l(s.range[0]),n=o.r2l(s.range[1])-t,i.d2pOppAxis=function(e){return(e-t)/n*i._height}),a.call(B,O,e,i).call(U,O,e,i).call(V,O,e,i).call(Y,O,e,i,s).call($,O,e,i).call(G,O,e,i),r=a,v=e,b=i,(y=O)._context.staticPlot||(x=r.select("rect."+H.slideBoxClassName).node(),_=r.select("rect."+H.grabAreaMinClassName).node(),w=r.select("rect."+H.grabAreaMaxClassName).node(),r.on("mousedown",k),r.on("touchstart",k));var c=a,a=e,A=i,M=H.handleWidth/2;function E(e){return P.constrain(e,0,A._width)}function S(e){return P.constrain(e,0,A._height)}function L(e){return P.constrain(e,-M,A._width+M)}var C=E(A.d2p(a._rl[0])),a=E(A.d2p(a._rl[1]));c.select("rect."+H.slideBoxClassName).attr("x",C).attr("width",a-C),c.select("rect."+H.maskMinClassName).attr("width",C),c.select("rect."+H.maskMaxClassName).attr("x",a).attr("width",A._width-a),"match"!==s.rangemode&&(s=A._height-S(A.d2pOppAxis(o._rl[1])),o=A._height-S(A.d2pOppAxis(o._rl[0])),c.select("rect."+H.maskMinOppAxisClassName).attr("x",C).attr("height",s).attr("width",a-C),c.select("rect."+H.maskMaxOppAxisClassName).attr("x",C).attr("y",o).attr("height",A._height-o).attr("width",a-C),c.select("rect."+H.slideBoxClassName).attr("y",s).attr("height",o-s)),o=Math.round(L(C-M))-.5,s=Math.round(L(a-M))+.5,c.select("g."+H.grabberMinClassName).attr("transform",N(o,.5)),c.select("g."+H.grabberMaxClassName).attr("transform",N(s,.5)),"bottom"===e.side&&F.draw(O,e._id+"title",{propContainer:e,propName:e._name+".title",placeholder:D._dfltTitle.x,attributes:{x:e._offset+e._length/2,y:l+i._height+i._offsetShift+10+1.5*e.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":287,"../../lib/setcursor":307,"../../plots/cartesian":348,"../../plots/cartesian/axis_ids":338,"../../plots/plots":371,"../../registry":378,"../color":157,"../dragelement":176,"../drawing":179,"../titles":255,"./constants":231,"@plotly/d3":20}],234:[function(e,t,n){"use strict";var s=e("../../plots/cartesian/axis_ids"),o=e("../../lib/svg_text_utils"),l=e("./constants"),c=e("../../constants/alignment").LINE_SPACING,u=l.name;function d(e){e=e&&e[u];return e&&e.visible}n.isVisible=d,n.makeData=function(e){var t=s.list({_fullLayout:e},"x",!0),n=e.margin,r=[];if(!e._has("gl2d"))for(var a=0;a<t.length;a++){var i,o=t[a];d(o)&&(r.push(o),(i=o[u])._id=u+o._id,i._height=(e.height-n.b-n.t)*i.thickness,i._offsetShift=Math.floor(i.borderwidth/2))}e._rangeSliderData=r},n.autoMarginOpts=function(e,t){var e=e._fullLayout,n=t[u],r=t._id.charAt(0),a=0,i=0;return"bottom"===t.side&&(a=t._depth,t.title.text!==e._dfltTitle[r]&&(i=1.5*t.title.font.size+10+n._offsetShift,i+=(t.title.text.match(o.BR_TAG_ALL)||[]).length*t.title.font.size*c)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:n._height+a+Math.max(e.margin.b,i),pad:l.extraPad+2*n._offsetShift}}},{"../../constants/alignment":262,"../../lib/svg_text_utils":310,"../../plots/cartesian/axis_ids":338,"./constants":231}],235:[function(e,t,n){"use strict";var r=e("../../lib"),a=e("./attributes"),i=e("./oppaxis_attributes"),o=e("./helpers");t.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:r.extendFlat({},a,{yaxis:i})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw"),isVisible:o.isVisible,makeData:o.makeData,autoMarginOpts:o.autoMarginOpts}},{"../../lib":287,"./attributes":229,"./calc_autorange":230,"./defaults":232,"./draw":233,"./helpers":234,"./oppaxis_attributes":236}],236:[function(e,t,n){"use strict";t.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],237:[function(e,t,n){"use strict";var r=e("../annotations/attributes"),a=e("../../traces/scatter/attributes").line,i=e("../drawing/attributes").dash,o=e("../../lib/extend").extendFlat,s=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects");t.exports=s("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:o({},r.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:o({},r.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:o({},a.color,{editType:"arraydraw"}),width:o({},a.width,{editType:"calc+arraydraw"}),dash:o({},i,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":263,"../../lib/extend":281,"../../plot_api/plot_template":323,"../../traces/scatter/attributes":500,"../annotations/attributes":140,"../drawing/attributes":178}],238:[function(e,t,n){"use strict";var c=e("../../lib"),u=e("../../plots/cartesian/axes"),f=e("./constants"),p=e("./helpers");function d(e,t,n,r,a,i){var e=e/2,o=i;return"pixel"===t?(t=a?p.extractPathCoords(a,i?f.paramIsY:f.paramIsX):[n,r],a=c.aggNums(Math.max,null,t),n=(i=c.aggNums(Math.min,null,t))<0?Math.abs(i)+e:e,r=0<a?a+e:e,{ppad:e,ppadplus:o?n:r,ppadminus:o?r:n}):{ppad:e}}function h(e,t,n,r,a){var i="category"===e.type||"multicategory"===e.type?e.r2c:e.d2c;if(void 0!==t)return[i(t),i(n)];if(r){var o,s,l,c=1/0,u=-1/0,d=r.match(f.segmentRE);for("date"===e.type&&(i=p.decodeDate(i)),o=0;o<d.length;o++)void 0===(s=a[d[o].charAt(0)].drawn)||!(l=d[o].substr(1).match(f.paramRE))||l.length<s||((l=i(l[s]))<c&&(c=l),u<l&&(u=l));return c<=u?[c,u]:void 0}}t.exports=function(e){var t=e._fullLayout,n=c.filterVisible(t.shapes);if(n.length&&e._fullData.length)for(var r=0;r<n.length;r++){var a,i,o=n[r],s=(o._extremes={},u.getRefType(o.xref)),l=u.getRefType(o.yref);"paper"!==o.xref&&"domain"!==s&&(s="pixel"===o.xsizemode?o.xanchor:o.x0,i="pixel"===o.xsizemode?o.xanchor:o.x1,(i=h(a=u.getFromId(e,o.xref),s,i,o.path,f.paramIsX))&&(o._extremes[a._id]=u.findExtremes(a,i,d(o.line.width,o.xsizemode,o.x0,o.x1,o.path,!1)))),"paper"!==o.yref&&"domain"!==l&&(s="pixel"===o.ysizemode?o.yanchor:o.y0,l="pixel"===o.ysizemode?o.yanchor:o.y1,(i=h(a=u.getFromId(e,o.yref),s,l,o.path,f.paramIsY))&&(o._extremes[a._id]=u.findExtremes(a,i,d(o.line.width,o.ysizemode,o.y0,o.y1,o.path,!0))))}}},{"../../lib":287,"../../plots/cartesian/axes":334,"./constants":239,"./helpers":248}],239:[function(e,t,n){"use strict";t.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],240:[function(e,t,n){"use strict";var x=e("../../lib"),_=e("../../plots/cartesian/axes"),r=e("../../plots/array_container_defaults"),w=e("./attributes"),T=e("./helpers");function a(n,r,e){function t(e,t){return x.coerce(n,r,w,e,t)}if(t("visible")){var a=t("path"),i=t("type",a?"path":"rect");"path"!==r.type&&delete r.path,t("editable"),t("layer"),t("opacity"),t("fillcolor"),t("fillrule");t("line.width")&&(t("line.color"),t("line.dash"));for(var o=t("xsizemode"),s=t("ysizemode"),l=["x","y"],c=0;c<2;c++){var u,d,f,p,h=l[c],m=h+"anchor",g="x"===h?o:s,y={_fullLayout:e},v=_.coerceRef(n,r,y,h,void 0,"paper"),b="range"===_.getRefType(v)?((b=_.getFromId(y,v))._shapeIndices.push(r._index),u=T.rangeToShapePosition(b),T.shapePositionToRange(b)):u=x.identity;"path"!==i&&(d=n[p=h+"0"],f=n[h=h+"1"],n[p]=b(n[p],!0),n[h]=b(n[h],!0),"pixel"===g?(t(p,0),t(h,10)):(_.coercePosition(r,y,t,v,p,.25),_.coercePosition(r,y,t,v,h,.75)),r[p]=u(r[p]),r[h]=u(r[h]),n[p]=d,n[h]=f),"pixel"===g&&(p=n[m],n[m]=b(n[m],!0),_.coercePosition(r,y,t,v,m,.25),r[m]=u(r[m]),n[m]=p)}"path"===i?t("path"):x.noneOrAll(n,r,["x0","x1","y0","y1"])}}t.exports=function(e,t){r(e,t,{name:"shapes",handleItemDefaults:a})}},{"../../lib":287,"../../plots/array_container_defaults":329,"../../plots/cartesian/axes":334,"./attributes":237,"./helpers":248}],241:[function(e,t,n){"use strict";var re=e("../../registry"),ae=e("../../lib"),ie=e("../../plots/cartesian/axes"),oe=e("./draw_newshape/helpers").readPaths,se=e("./draw_newshape/display_outlines"),i=e("../../plots/cartesian/handle_outline").clearOutlineControllers,le=e("../color"),ce=e("../drawing"),ue=e("../../plot_api/plot_template").arrayEditor,de=e("../dragelement"),fe=e("../../lib/setcursor"),pe=e("./constants"),he=e("./helpers");function me(e){var t,n=e._fullLayout;for(t in n._shapeUpperLayer.selectAll("path").remove(),n._shapeLowerLayer.selectAll("path").remove(),n._plots){var r=n._plots[t].shapelayer;r&&r.selectAll("path").remove()}for(var a=0;a<n.shapes.length;a++)n.shapes[a].visible&&o(e,a)}function ge(e){return e._fullLayout._drawing}function ye(e){return!e._context.edits.shapePosition}function o(Q,ee){Q._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+ee+'"]').remove();var e=he.makeOptionsAndPlotinfo(Q,ee),te=e.options,ne=e.plotinfo;function t(o){var e,l,c,u,s,d,t,f,p,h,m,g,y,v,b,x,_,w,T,k,z,j,A,q,M,E,S,L,H,C,O,D,I,R,P,N,F,n=be(Q,te),B={"data-index":ee,"fill-rule":te.fillrule,d:n},U=te.opacity,V=te.fillcolor,Y=te.line.width?te.line.color:"rgba(0,0,0,0)",r=te.line.width,a=te.line.dash,$=(r||!0!==te.editable||(r=5,a="solid"),"Z"!==n[n.length-1]),G=ye(Q)&&te.editable&&Q._fullLayout._activeShapeIndex===ee,i=(G&&(V=$?"rgba(0,0,0,0)":Q._fullLayout.activeshape.fillcolor,U=Q._fullLayout.activeshape.opacity),o.append("path").attr(B).style("opacity",U).call(le.stroke,Y).call(le.fill,V).call(ce.dashLine,a,r));function W(e){var t,n,r,a;A=ge(l)?null:L?"path"===e.target.tagName?"move":"start-point"===e.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point":(t=(a=F.element.getBoundingClientRect()).right-a.left,n=a.bottom-a.top,r=e.clientX-a.left,a=e.clientY-a.top,e=!H&&q<t&&M<n&&!e.shiftKey?de.getCursor(r/t,1-a/n):"move",fe(c,e),e.split("-")[0])}function Z(t,n){var e,r;"path"===u.type?(r=e=function(e){return e},E?C("xanchor",u.xanchor=P(g+t)):(e=function(e){return P(I(e)+t)},O&&"date"===O.type&&(e=he.encodeDate(e))),S?C("yanchor",u.yanchor=N(y+n)):(r=function(e){return N(R(e)+n)},D&&"date"===D.type&&(r=he.encodeDate(r))),C("path",u.path=xe(j,e,r))):(E?C("xanchor",u.xanchor=P(g+t)):(C("x0",u.x0=P(f+t)),C("x1",u.x1=P(h+t))),S?C("yanchor",u.yanchor=N(y+n)):(C("y0",u.y0=N(p+n)),C("y1",u.y1=N(m+n)))),c.attr("d",be(l,u)),J(d,u)}function X(t,n){var e,r,a,i,o,s;H?(e=s=function(e){return e},E?C("xanchor",u.xanchor=P(g+t)):(s=function(e){return P(I(e)+t)},O&&"date"===O.type&&(s=he.encodeDate(s))),S?C("yanchor",u.yanchor=N(y+n)):(e=function(e){return N(R(e)+n)},D&&"date"===D.type&&(e=he.encodeDate(e))),C("path",u.path=xe(j,s,e))):L?"resize-over-start-point"===A?(s=f+t,e=S?p-n:p+n,C("x0",u.x0=E?s:P(s)),C("y0",u.y0=S?e:N(e))):"resize-over-end-point"===A&&(s=h+t,e=S?m-n:m+n,C("x1",u.x1=E?s:P(s)),C("y1",u.y1=S?e:N(e))):(e=(s=function(e){return-1!==A.indexOf(e)})("n"),r=s("s"),o=s("w"),s=s("e"),a=e?v+n:v,i=r?b+n:b,o=o?x+t:x,s=s?_+t:_,S&&(e&&(a=v-n),r&&(i=b-n)),(!S&&M<i-a||S&&M<a-i)&&(C(w,u[w]=S?a:N(a)),C(T,u[T]=S?i:N(i))),q<s-o&&(C(k,u[k]=E?o:P(o)),C(z,u[z]=E?s:P(s)))),c.attr("d",be(l,u)),J(d,u)}function J(e,t){var n,r,a;(E||S)&&(r="path"!==t.type,(e=e.selectAll(".visual-cue").data([0])).enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0),n=I(E?t.xanchor:ae.midRange(r?[t.x0,t.x1]:he.extractPathCoords(t.path,pe.paramIsX))),r=R(S?t.yanchor:ae.midRange(r?[t.y0,t.y1]:he.extractPathCoords(t.path,pe.paramIsY))),n=he.roundPositionForSharpStrokeRendering(n,1),r=he.roundPositionForSharpStrokeRendering(r,1),E&&S?(a="M"+(n-1-1)+","+(r-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z",e.attr("d",a)):E?(a="M"+(n-1-1)+","+(r-9-1)+"v18 h2 v-18 Z",e.attr("d",a)):(a="M"+(n-9-1)+","+(r-1-1)+"h18 v2 h-18 Z",e.attr("d",a)))}function K(e){e.selectAll(".visual-cue").remove()}ve(i,Q,te),(G||Q._context.edits.shapePosition)&&(e=ue(Q.layout,"shapes",te)),G?(i.style({cursor:"move"}),B={element:i.node(),plotinfo:ne,gd:Q,editHelpers:e,isActiveShape:!0},Y=oe(n,Q),se(Y,i,B)):Q._context.edits.shapePosition?(l=Q,c=i,s=ee,d=o,t=e,M=q=10,E="pixel"===(u=te).xsizemode,S="pixel"===u.ysizemode,L="line"===u.type,H="path"===u.type,C=t.modifyItem,O=ie.getFromId(l,u.xref),a=ie.getRefType(u.xref),D=ie.getFromId(l,u.yref),r=ie.getRefType(u.yref),I=he.getDataToPixel(l,O,!1,a),R=he.getDataToPixel(l,D,!0,r),P=he.getPixelToData(l,O,!1,a),N=he.getPixelToData(l,D,!0,r),a=L?function(){var e=Math.max(u.line.width,10),t=d.append("g").attr("data-index",s),n=(t.append("path").attr("d",c.attr("d")).style({cursor:"move","stroke-width":e,"stroke-opacity":"0"}),{"fill-opacity":"0"}),e=Math.max(e/2,10);return t.append("circle").attr({"data-line-point":"start-point",cx:E?I(u.xanchor)+u.x0:I(u.x0),cy:S?R(u.yanchor)-u.y0:R(u.y0),r:e}).style(n).classed("cursor-grab",!0),t.append("circle").attr({"data-line-point":"end-point",cx:E?I(u.xanchor)+u.x1:I(u.x1),cy:S?R(u.yanchor)-u.y1:R(u.y1),r:e}).style(n).classed("cursor-grab",!0),t}():c,F={element:a.node(),gd:l,prepFn:function(e){var t,n,r,a,i,o,s;ge(l)||(E&&(g=I(u.xanchor)),S&&(y=R(u.yanchor)),"path"===u.type?j=u.path:(f=E?u.x0:I(u.x0),p=S?u.y0:R(u.y0),h=E?u.x1:I(u.x1),m=S?u.y1:R(u.y1)),z=f<h?(x=f,k="x0",_=h,"x1"):(x=h,k="x1",_=f,"x0"),T=!S&&p<m||S&&m<p?(v=p,w="y0",b=m,"y1"):(v=m,w="y1",b=p,"y0"),W(e),J(d,u),t=c,n=l,r=(a=u).xref,a=a.yref,i=ie.getFromId(n,r),o=ie.getFromId(n,a),s="","paper"===r||i.autorange||(s+=r),"paper"===a||o.autorange||(s+=a),ce.setClipUrl(t,s?"clip"+n._fullLayout._uid+s:null,n),F.moveFn="move"===A?Z:X,F.altKey=e.altKey)},doneFn:function(){ge(l)||(fe(c),K(d),ve(c,l,u),re.call("_guiRelayout",l,t.getUpdateObj()))},clickFn:function(){ge(l)||K(d)}},de.init(F),a.node().onmousemove=W):!0===te.editable&&i.style("pointer-events",$||le.opacity(V)*U<=.5?"stroke":"all"),i.node().addEventListener("click",function(){var e,t;t=i,ye(e=Q)&&0<=(t=+t.node().getAttribute("data-index"))&&(t===e._fullLayout._activeShapeIndex?_e(e):(e._fullLayout._activeShapeIndex=t,e._fullLayout._deactivateShape=_e,me(e)))})}te._input&&!1!==te.visible&&("below"!==te.layer?t(Q._fullLayout._shapeUpperLayer):"paper"!==te.xref&&"paper"!==te.yref&&ne._hadPlotinfo?t((ne.mainplotinfo||ne).shapelayer):t(Q._fullLayout._shapeLowerLayer))}function ve(e,t,n){n=(n.xref+n.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");ce.setClipUrl(e,n?"clip"+t._fullLayout._uid+n:null,t)}function be(e,t){var n,r,s,l,c,u,d,f,a,i=t.type,o=ie.getRefType(t.xref),p=ie.getRefType(t.yref),h=ie.getFromId(e,t.xref),m=ie.getFromId(e,t.yref),g=e._fullLayout._size,e=h?"domain"===o?function(e){return h._offset+h._length*e}:(n=he.shapePositionToRange(h),function(e){return h._offset+h.r2p(n(e,!0))}):function(e){return g.l+g.w*e},o=m?"domain"===p?function(e){return m._offset+m._length*(1-e)}:(r=he.shapePositionToRange(m),function(e){return m._offset+m.r2p(r(e,!0))}):function(e){return g.t+g.h*(1-e)};if("path"===i)return h&&"date"===h.type&&(e=he.decodeDate(e)),m&&"date"===m.type&&(o=he.decodeDate(o)),s=e,l=o,p=t.path,c=t.xsizemode,u=t.ysizemode,d=t.xanchor,f=t.yanchor,p.replace(pe.segmentRE,function(e){var t=0,n=e.charAt(0),r=pe.paramIsX[n],a=pe.paramIsY[n],i=pe.numParams[n],o=e.substr(1).replace(pe.paramRE,function(e){return r[t]?e="pixel"===c?s(d)+Number(e):s(e):a[t]&&(e="pixel"===u?l(f)-Number(e):l(e)),e=i<++t?"X":e});return i<t&&(o=o.replace(/[\s,]*X.*/,""),ae.log("Ignoring extra params in segment "+e)),n+o});if(p="pixel"===t.xsizemode?(y=(p=e(t.xanchor))+t.x0,p+t.x1):(y=e(t.x0),e(t.x1)),e="pixel"===t.ysizemode?(a=(e=o(t.yanchor))-t.y0,e-t.y1):(a=o(t.y0),o(t.y1)),"line"===i)return"M"+y+","+a+"L"+p+","+e;if("rect"===i)return"M"+y+","+a+"H"+p+"V"+e+"H"+y+"Z";var o=(y+p)/2,t=(a+e)/2,i=Math.abs(o-y),p=Math.abs(t-a),e="A"+i+","+p,y=o+i+","+t;return"M"+y+e+" 0 1,1 "+(o+","+(t-p))+e+" 0 0,1 "+y+"Z"}function xe(e,o,s){return e.replace(pe.segmentRE,function(e){var t=0,n=e.charAt(0),r=pe.paramIsX[n],a=pe.paramIsY[n],i=pe.numParams[n];return n+e.substr(1).replace(pe.paramRE,function(e){return i<=t||(r[t]?e=o(e):a[t]&&(e=s(e)),t++),e})})}function _e(e){ye(e)&&0<=e._fullLayout._activeShapeIndex&&(i(e),delete e._fullLayout._activeShapeIndex,me(e))}t.exports={draw:me,drawOne:o,eraseActiveShape:function(e){if(ye(e)){i(e);var t=e._fullLayout._activeShapeIndex,n=(e.layout||{}).shapes||[];if(t<n.length){for(var r=[],a=0;a<n.length;a++)a!==t&&r.push(n[a]);delete e._fullLayout._activeShapeIndex,re.call("_guiRelayout",e,{shapes:r})}}}}},{"../../lib":287,"../../lib/setcursor":307,"../../plot_api/plot_template":323,"../../plots/cartesian/axes":334,"../../plots/cartesian/handle_outline":345,"../../registry":378,"../color":157,"../dragelement":176,"../drawing":179,"./constants":239,"./draw_newshape/display_outlines":245,"./draw_newshape/helpers":246,"./helpers":248}],242:[function(e,t,n){"use strict";var r=e("../../drawing/attributes").dash,e=e("../../../lib/extend").extendFlat;t.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:e({},r,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":281,"../../drawing/attributes":178}],243:[function(e,t,n){"use strict";t.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],244:[function(e,t,n){"use strict";var r=e("../../color");t.exports=function(e,t,n){n("newshape.drawdirection"),n("newshape.layer"),n("newshape.fillcolor"),n("newshape.fillrule"),n("newshape.opacity"),n("newshape.line.width")&&(e=(e||{}).plot_bgcolor||"#FFF",n("newshape.line.color",r.contrast(e)),n("newshape.line.dash")),n("activeshape.fillcolor"),n("activeshape.opacity")}},{"../../color":157}],245:[function(e,t,n){"use strict";var C=e("../../dragelement"),O=e("../../dragelement/helpers").drawMode,D=e("../../../registry"),r=e("./constants"),I=r.i000,R=r.i090,P=r.i180,N=r.i270,F=e("../../../plots/cartesian/handle_outline").clearOutlineControllers,r=e("./helpers"),z=r.pointsShapeRectangle,j=r.pointsShapeEllipse,q=r.writePaths,H=e("./newshapes");t.exports=function e(u,n,r,t){t=t||0;var a=r.gd;function d(){e(u,n,r,t++),j(u[0])&&i({redrawing:!0})}function i(e){r.isActiveShape=!1;var t=H(n,r);Object.keys(t).length&&D.call((e||{}).redrawing?"relayout":"_guiRelayout",a,t)}var o,s,f,p,l=r.isActiveShape,c=a._fullLayout._zoomlayer,h=r.dragmode;if(O(h)?a._fullLayout._drawing=!0:0<=a._fullLayout._activeShapeIndex&&F(a),n.attr("d",q(u)),l&&!t){var m=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e[n]=[];for(var a=0;a<r.length;a++){e[n][a]=[];for(var i=0;i<r[a].length;i++)e[n][a][i]=r[a][i]}}return e}([],u),g=c.append("g").attr("class","outline-controllers");o=[];for(var y=0;y<u.length;y++){var v=u[y],b=!z(v)&&j(v);o[y]=[];for(var x,_,w=0;w<v.length;w++)"Z"===v[w][0]||b&&w!==I&&w!==R&&w!==P&&w!==N||(_=v[w][1],x=v[w][2],_=g.append("circle").classed("cursor-grab",!0).attr("data-i",y).attr("data-j",w).attr("cx",_).attr("cy",x).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1}),o[y][w]={element:_.node(),gd:a,prepFn:T,doneFn:A,clickFn:M},C.init(o[y][w]))}s=[],u.length&&(s[0]={element:n[0][0],gd:a,prepFn:S,doneFn:L},C.init(s[0]))}function T(e){f=+e.srcElement.getAttribute("data-i"),p=+e.srcElement.getAttribute("data-j"),o[f][p].moveFn=k}function k(e,t){if(u.length){var n=m[f][p][1],r=m[f][p][2],a=u[f],i=a.length;if(z(a)){for(var o,s=0;s<i;s++)s!==p&&((o=a[s])[1]===a[p][1]&&(o[1]=n+e),o[2]===a[p][2]&&(o[2]=r+t));if(a[p][1]=n+e,a[p][2]=r+t,!z(a))for(var l=0;l<i;l++)for(var c=0;c<a[l].length;c++)a[l][c]=m[f][l][c]}else a[p][1]=n+e,a[p][2]=r+t;d()}}function A(){i()}function M(e,t){if(2===e){f=+t.srcElement.getAttribute("data-i"),p=+t.srcElement.getAttribute("data-j");e=u[f];if(!z(e)&&!j(e)&&u.length&&u[f]&&u[f].length){for(var n=[],r=0;r<u[f].length;r++)r!==p&&n.push(u[f][r]);1<n.length&&(2!==n.length||"Z"!==n[1][0])&&(0===p&&(n[0][0]="M"),u[f]=n,d(),i())}}}function E(e,t){var n=e,r=t;if(u.length)for(var a=0;a<u.length;a++)for(var i=0;i<u[a].length;i++)for(var o=0;o+2<u[a][i].length;o+=2)u[a][i][o+1]=m[a][i][o+1]+n,u[a][i][o+2]=m[a][i][o+2]+r;d()}function S(e){f=+e.srcElement.getAttribute("data-i"),s[f=f||0].moveFn=E}function L(){i()}}},{"../../../plots/cartesian/handle_outline":345,"../../../registry":378,"../../dragelement":176,"../../dragelement/helpers":175,"./constants":243,"./helpers":246,"./newshapes":247}],246:[function(e,t,u){"use strict";var R=e("parse-svg-path"),n=e("./constants"),P=n.CIRCLE_SIDES,d=n.SQRT2,n=e("../../../plots/cartesian/helpers"),N=n.p2r,F=n.r2p,f=[0,3,4,5,6,1,2],p=[0,3,4,1,2];function i(e,t){return Math.abs(e-t)<=1e-6}function o(e,t){var n=t[1]-e[1],t=t[2]-e[2];return Math.sqrt(n*n+t*t)}u.writePaths=function(e){var t=e.length;if(!t)return"M0,0Z";for(var n="",r=0;r<t;r++)for(var a=e[r].length,i=0;i<a;i++){var o=e[r][i][0];if("Z"===o)n+="Z";else for(var s=e[r][i].length,l=0;l<s;l++){var c=l;"Q"===o||"S"===o?c=p[l]:"C"===o&&(c=f[l]),n+=e[r][i][c],0<l&&l<s-1&&(n+=",")}}return n},u.readPaths=function(e,t,n,r){function a(){i=u,o=d}var i,o,s=R(e),l=[],c=-1,u=0,d=0;a();for(var f=0;f<s.length;f++){var p,h,m,g,y=[],v=s[f][0],b=v;switch(v){case"M":l[++c]=[],u=+s[f][1],d=+s[f][2],y.push([b,u,d]),a();break;case"Q":case"S":p=+s[f][1],m=+s[f][2],u=+s[f][3],d=+s[f][4],y.push([b,u,d,p,m]);break;case"C":p=+s[f][1],m=+s[f][2],h=+s[f][3],g=+s[f][4],u=+s[f][5],d=+s[f][6],y.push([b,u,d,p,m,h,g]);break;case"T":case"L":u=+s[f][1],d=+s[f][2],y.push([b,u,d]);break;case"H":u=+s[f][1],y.push([b="L",u,d]);break;case"V":d=+s[f][1],y.push([b="L",u,d]);break;case"A":for(var b="L",x=+s[f][1],_=+s[f][2],w=(+s[f][4]||(x=-x,_=-_),u-x),T=d,k=1;k<=P/2;k++){var A=2*Math.PI*k/P;y.push([b,w+x*Math.cos(A),T+_*Math.sin(A)])}break;case"Z":u===i&&d===o||(u=i,d=o,y.push([b,u,d]))}for(var M=(n||{}).domain,E=t._fullLayout._size,S=n&&"pixel"===n.xsizemode,L=n&&"pixel"===n.ysizemode,C=!1===r,O=0;O<y.length;O++){for(k=0;k+2<7;k+=2){var D=y[O][k+1],I=y[O][k+2];void 0!==D&&void 0!==I&&(u=D,d=I,n&&(n.xaxis&&n.xaxis.p2r?(C&&(D-=n.xaxis._offset),D=S?F(n.xaxis,n.xanchor)+D:N(n.xaxis,D)):(C&&(D-=E.l),M?D=M.x[0]+D/E.w:D/=E.w),I=n.yaxis&&n.yaxis.p2r?(C&&(I-=n.yaxis._offset),L?F(n.yaxis,n.yanchor)-I:N(n.yaxis,I)):(C&&(I-=E.t),M?M.y[1]-I/E.h:1-I/E.h)),y[O][k+1]=D,y[O][k+2]=I)}l[c].push(y[O].slice())}}return l},u.pointsShapeRectangle=function(e){if(5!==e.length)return!1;for(var t=1;t<3;t++){if(!i(e[0][t]-e[1][t],e[3][t]-e[2][t]))return!1;if(!i(e[0][t]-e[3][t],e[1][t]-e[2][t]))return!1}return!(!i(e[0][1],e[1][1])&&!i(e[0][1],e[3][1]))&&!!(o(e[0],e[1])*o(e[0],e[3]))},u.pointsShapeEllipse=function(e){if(e.length!==P+1)return!1;for(var t=P,n=0;n<t;n++){var r=(2*t-n)%t,a=(t/2+r)%t;if(!i(o(e[n],e[(t/2+n)%t]),o(e[r],e[a])))return!1}return!0},u.handleEllipse=function(e,t,n){if(!e)return[t,n];for(var e=u.ellipseOver({x0:t[0],y0:t[1],x1:n[0],y1:n[1]}),r=(e.x1+e.x0)/2,a=(e.y1+e.y0)/2,i=(e.x1-e.x0)/2,o=(e.y1-e.y0)/2,i=i||(o/=d),o=o||(i/=d),s=[],l=0;l<P;l++){var c=2*l*Math.PI/P;s.push([r+i*Math.cos(c),a+o*Math.sin(c)])}return s},u.ellipseOver=function(e){var t=e.x0,n=e.y0,r=e.x1,e=e.y1,a=r-t,i=e-n,t=((t-=a)+r)/2,r=((n-=i)+e)/2;return{x0:t-(a*=d),y0:r-(i*=d),x1:t+a,y1:r+i}}},{"../../../plots/cartesian/helpers":346,"./constants":243,"parse-svg-path":74}],247:[function(e,t,n){"use strict";var r=e("../../dragelement/helpers"),N=r.drawMode,F=r.openMode,r=e("./constants"),z=r.i000,j=r.i090,q=r.i180,H=r.i270,B=r.cos45,U=r.sin45,r=e("../../../plots/cartesian/helpers"),V=r.p2r,Y=r.r2p,$=e("../../../plots/cartesian/handle_outline").clearSelect,r=e("./helpers"),G=r.readPaths,W=r.writePaths,Z=r.ellipseOver;t.exports=function(e,t){if(e.length){e=e[0][0];if(e){var e=e.getAttribute("d"),n=t.gd,r=n._fullLayout.newshape,a=t.plotinfo,i=a.xaxis,o=a.yaxis,s=!!a.domain||!a.xaxis,l=!!a.domain||!a.yaxis,c=t.isActiveShape,u=t.dragmode,d=(n.layout||{}).shapes||[];if(!N(u)&&void 0!==c){var f=n._fullLayout._activeShapeIndex;if(f<d.length)switch(n._fullLayout.shapes[f].type){case"rect":u="drawrect";break;case"circle":u="drawcircle";break;case"line":u="drawline";break;case"path":var p=d[f].path||"",u="Z"===p[p.length-1]?"drawclosedpath":"drawopenpath"}}var h,m=F(u),e=G(e,n,a,c),g={editable:!0,xref:s?"paper":i._id,yref:l?"paper":o._id,layer:r.layer,opacity:r.opacity,line:{color:r.line.color,width:r.line.width,dash:r.line.dash}};if(m||(g.fillcolor=r.fillcolor,g.fillrule=r.fillrule),(h=1===e.length?e[0]:h)&&"drawrect"===u)g.type="rect",g.x0=h[0][1],g.y0=h[0][2],g.x1=h[2][1],g.y1=h[2][2];else if(h&&"drawline"===u)g.type="line",g.x0=h[0][1],g.y0=h[0][2],g.x1=h[1][1],g.y1=h[1][2];else if(h&&"drawcircle"===u){g.type="circle";var s=h[z][1],l=h[j][1],m=h[q][1],r=h[H][1],y=h[z][2],v=h[j][2],b=h[q][2],x=h[H][2],_=a.xaxis&&("date"===a.xaxis.type||"log"===a.xaxis.type),w=a.yaxis&&("date"===a.yaxis.type||"log"===a.yaxis.type),T=(_&&(s=Y(a.xaxis,s),l=Y(a.xaxis,l),m=Y(a.xaxis,m),r=Y(a.xaxis,r)),w&&(y=Y(a.yaxis,y),v=Y(a.yaxis,v),b=Y(a.yaxis,b),x=Y(a.yaxis,x)),(l+r)/2),k=(y+b)/2,T=Z({x0:T,y0:k,x1:T+(r-l+m-s)/2*B,y1:k+(x-v+b-y)/2*U});_&&(T.x0=V(a.xaxis,T.x0),T.x1=V(a.xaxis,T.x1)),w&&(T.y0=V(a.yaxis,T.y0),T.y1=V(a.yaxis,T.y1)),g.x0=T.x0,g.y0=T.y0,g.x1=T.x1,g.y1=T.y1}else{if(g.type="path",i&&o){var A=e,r=o,M="date"===i.type,E="date"===r.type;if(M||E)for(var S=0;S<A.length;S++)for(var L=0;L<A[S].length;L++)for(var C=0;C+2<A[S][L].length;C+=2)M&&(A[S][L][C+1]=A[S][L][C+1].replace(" ","_")),E&&(A[S][L][C+2]=A[S][L][C+2].replace(" ","_"))}g.path=W(e),h=null}$(n);for(var l=t.editHelpers,O=(l||{}).modifyItem,D=[],I=0;I<d.length;I++){var R=n._fullLayout.shapes[I];if(D[I]=R._input,void 0!==c&&I===n._fullLayout._activeShapeIndex){var P=g;switch(R.type){case"line":case"rect":case"circle":O("x0",P.x0),O("x1",P.x1),O("y0",P.y0),O("y1",P.y1);break;case"path":O("path",P.path)}}}return void 0===c?(D.push(g),D):l?l.getUpdateObj():{}}}}},{"../../../plots/cartesian/handle_outline":345,"../../../plots/cartesian/helpers":346,"../../dragelement/helpers":175,"./constants":243,"./helpers":246}],248:[function(e,t,s){"use strict";var a=e("./constants"),i=e("../../lib");s.rangeToShapePosition=function(e){return"log"===e.type?e.r2d:function(e){return e}},s.shapePositionToRange=function(e){return"log"===e.type?e.d2r:function(e){return e}},s.decodeDate=function(t){return function(e){return e.replace&&(e=e.replace("_"," ")),t(e)}},s.encodeDate=function(t){return function(e){return t(e).replace(" ","_")}},s.extractPathCoords=function(e,n){var r=[];return e.match(a.segmentRE).forEach(function(e){var t=n[e.charAt(0)].drawn;void 0===t||!(e=e.substr(1).match(a.paramRE))||e.length<t||r.push(i.cleanNumber(e[t]))}),r},s.getDataToPixel=function(e,t,n,r){var a,i,o=e._fullLayout._size;return t?"domain"===r?i=function(e){return t._length*(n?1-e:e)+t._offset}:(a=s.shapePositionToRange(t),i=function(e){return t._offset+t.r2p(a(e,!0))},"date"===t.type&&(i=s.decodeDate(i))):i=n?function(e){return o.t+o.h*(1-e)}:function(e){return o.l+o.w*e},i},s.getPixelToData=function(e,t,n,r){var a,i=e._fullLayout._size;return t?"domain"===r?function(e){e=(e-t._offset)/t._length;return n?1-e:e}:(a=s.rangeToShapePosition(t),function(e){return a(t.p2r(e-t._offset))}):n?function(e){return 1-(e-i.t)/i.h}:function(e){return(e-i.l)/i.w}},s.roundPositionForSharpStrokeRendering=function(e,t){t=1===Math.round(t%2),e=Math.round(e);return t?e+.5:e},s.makeOptionsAndPlotinfo=function(e,t){var t=e._fullLayout.shapes[t]||{},n=e._fullLayout._plots[t.xref+t.yref];return!!n?n._hadPlotinfo=!0:(n={},t.xref&&"paper"!==t.xref&&(n.xaxis=e._fullLayout[t.xref+"axis"]),t.yref&&"paper"!==t.yref&&(n.yaxis=e._fullLayout[t.yref+"axis"])),n.xsizemode=t.xsizemode,n.ysizemode=t.ysizemode,n.xanchor=t.xanchor,n.yanchor=t.yanchor,{options:t,plotinfo:n}}},{"../../lib":287,"./constants":239}],249:[function(e,t,n){"use strict";var r=e("./draw");t.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),supplyDrawNewShapeDefaults:e("./draw_newshape/defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:r.draw,drawOne:r.drawOne}},{"../../plots/cartesian/include_components":347,"./attributes":237,"./calc_autorange":238,"./defaults":240,"./draw":241,"./draw_newshape/defaults":244}],250:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("../../plots/pad_attributes"),i=e("../../lib/extend").extendDeepAll,o=e("../../plot_api/edit_types").overrideAll,s=e("../../plots/animation_attributes"),l=e("../../plot_api/plot_template").templatedArray,e=e("./constants"),c=l("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});t.exports=o(l("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:c,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:i(a({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:r({})},font:r({}),activebgcolor:{valType:"color",dflt:e.gripBgActiveColor},bgcolor:{valType:"color",dflt:e.railBgColor},bordercolor:{valType:"color",dflt:e.railBorderColor},borderwidth:{valType:"number",min:0,dflt:e.railBorderWidth},ticklen:{valType:"number",min:0,dflt:e.tickLength},tickcolor:{valType:"color",dflt:e.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:e.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":281,"../../plot_api/edit_types":316,"../../plot_api/plot_template":323,"../../plots/animation_attributes":328,"../../plots/font_attributes":365,"../../plots/pad_attributes":370,"./constants":251}],251:[function(e,t,n){"use strict";t.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],252:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../../plots/array_container_defaults"),u=e("./attributes"),r=e("./constants").name,a=u.steps;function i(n,r,e){function t(e,t){return l.coerce(n,r,u,e,t)}for(var a,i=c(n,r,{name:"steps",handleItemDefaults:d}),o=0,s=0;s<i.length;s++)i[s].visible&&o++;(o<2?r.visible=!1:t("visible"))&&(r._stepCount=o,a=r._visibleSteps=l.filterVisible(i),(i[t("active")]||{}).visible||(r.active=a[0]._index),t("x"),t("y"),l.noneOrAll(n,r,["x","y"]),t("xanchor"),t("yanchor"),t("len"),t("lenmode"),t("pad.t"),t("pad.r"),t("pad.b"),t("pad.l"),l.coerceFont(t,"font",e.font),t("currentvalue.visible")&&(t("currentvalue.xanchor"),t("currentvalue.prefix"),t("currentvalue.suffix"),t("currentvalue.offset"),l.coerceFont(t,"currentvalue.font",r.font)),t("transition.duration"),t("transition.easing"),t("bgcolor"),t("activebgcolor"),t("bordercolor"),t("borderwidth"),t("ticklen"),t("tickwidth"),t("tickcolor"),t("minorticklen"))}function d(n,r){function e(e,t){return l.coerce(n,r,a,e,t)}var t="skip"===n.method||Array.isArray(n.args)?e("visible"):r.visible=!1;t&&(e("method"),e("args"),t=e("label","step-"+r._index),e("value",t),e("execute"))}t.exports=function(e,t){c(e,t,{name:r,handleItemDefaults:i})}},{"../../lib":287,"../../plots/array_container_defaults":329,"./attributes":250,"./constants":251}],253:[function(e,t,n){"use strict";var u=e("@plotly/d3"),c=e("../../plots/plots"),d=e("../color"),f=e("../drawing"),p=e("../../lib"),s=p.strTranslate,h=e("../../lib/svg_text_utils"),l=e("../../plot_api/plot_template").arrayEditor,m=e("./constants"),e=e("../../constants/alignment"),g=e.LINE_SPACING,y=e.FROM_TL,v=e.FROM_BR;function b(e){return m.autoMarginIdRoot+e._index}function i(e){return e._index}function x(e,t,n){if(t.currentvalue.visible){var r,a,i=t._dims;switch(t.currentvalue.xanchor){case"right":r=i.inputAreaLength-m.currentValueInset-i.currentValueMaxWidth,a="left";break;case"center":r=.5*i.inputAreaLength,a="middle";break;default:r=m.currentValueInset,a="left"}var e=p.ensureSingle(e,"text",m.labelClass,function(e){e.attr({"text-anchor":a,"data-notex":1})}),o=t.currentvalue.prefix||"",s=("string"==typeof n?o+=n:(n=t.steps[t.active].label,o+=n=(s=t._gd._fullLayout._meta)?p.templateString(n,s):n),t.currentvalue.suffix&&(o+=t.currentvalue.suffix),e.call(f.font,t.currentvalue.font).text(o).call(h.convertToTspans,t._gd),h.lineCount(e)),n=(i.currentValueMaxLines+1-s)*t.currentvalue.font.size*g;return h.positionText(e,r,n),e}}function _(t,n,r){p.ensureSingle(t,"rect",m.gripRectClass,function(e){e.call(o,n,t,r).style("pointer-events","all")}).attr({width:m.gripWidth,height:m.gripHeight,rx:m.gripRadius,ry:m.gripRadius}).call(d.stroke,r.bordercolor).call(d.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function w(e,t,n){var e=p.ensureSingle(e,"text",m.labelClass,function(e){e.attr({"text-anchor":"middle","data-notex":1})}),t=t.step.label,r=n._gd._fullLayout._meta;return r&&(t=p.templateString(t,r)),e.call(f.font,n.font).text(t).call(h.convertToTspans,n._gd),e}function T(e,n){var e=p.ensureSingle(e,"g",m.labelsClass),r=n._dims,e=e.selectAll("g."+m.labelGroupClass).data(r.labelSteps);e.enter().append("g").classed(m.labelGroupClass,!0),e.exit().remove(),e.each(function(e){var t=u.select(this);t.call(w,e,n),f.setTranslate(t,S(n,e.fraction),m.tickOffset+n.ticklen+n.font.size*g+m.labelOffset+r.currentValueTotalHeight)})}function k(e,t,n,r,a){r=Math.round(r*(n._stepCount-1)),r=n._visibleSteps[r]._index;r!==n.active&&A(e,t,n,r,!0,a)}function A(t,n,e,r,a,i){var o=e.active,r=(e.active=r,l(t.layout,m.name,e).applyUpdate("active",r),e.steps[e.active]);n.call(E,e,i),n.call(x,e),t.emit("plotly_sliderchange",{slider:e,step:e.steps[e.active],interaction:a,previousActive:o}),r&&r.method&&a&&(n._nextMethod?(n._nextMethod.step=r,n._nextMethod.doCallback=a,n._nextMethod.doTransition=i):(n._nextMethod={step:r,doCallback:a,doTransition:i},n._nextMethodRaf=window.requestAnimationFrame(function(){var e=n._nextMethod.step;e.method&&(e.execute&&c.executeAPICommand(t,e.method,e.args),n._nextMethod=null,n._nextMethodRaf=null)})))}function o(e,i,o){var s=o.node(),l=u.select(i);function c(){return o.data()[0]}function t(){var e=c(),t=(i.emit("plotly_sliderstart",{slider:e}),o.select("."+m.gripRectClass)),n=(u.event.stopPropagation(),u.event.preventDefault(),t.call(d.fill,e.activebgcolor),L(e,u.mouse(s)[0]));function r(){var e=c(),t=L(e,u.mouse(s)[0]);k(i,o,e,t,!1)}function a(){var e=c();e._dragging=!1,t.call(d.fill,e.bgcolor),l.on("mouseup",null),l.on("mousemove",null),l.on("touchend",null),l.on("touchmove",null),i.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})}k(i,o,e,n,!0),e._dragging=!0,l.on("mousemove",r),l.on("touchmove",r),l.on("mouseup",a),l.on("touchend",a)}e.on("mousedown",t),e.on("touchstart",t)}function M(e,a){var e=e.selectAll("rect."+m.tickRectClass).data(a._visibleSteps),i=a._dims;e.enter().append("rect").classed(m.tickRectClass,!0),e.exit().remove(),e.attr({width:a.tickwidth+"px","shape-rendering":"crispEdges"}),e.each(function(e,t){var n=t%i.labelStride==0,r=u.select(this);r.attr({height:n?a.ticklen:a.minorticklen}).call(d.fill,a.tickcolor),f.setTranslate(r,S(a,t/(a._stepCount-1))-.5*a.tickwidth,(n?m.tickOffset:m.minorTickOffset)+i.currentValueTotalHeight)})}function E(e,t,n){for(var e=e.select("rect."+m.gripRectClass),r=0,a=0;a<t._stepCount;a++)if(t._visibleSteps[a]._index===t.active){r=a;break}var i,o=S(t,r/(t._stepCount-1));t._invokingCommand||(i=e,(i=n&&0<t.transition.duration?e.transition().duration(t.transition.duration).ease(t.transition.easing):i).attr("transform",s(o-.5*m.gripWidth,t._dims.currentValueTotalHeight)))}function S(e,t){e=e._dims;return e.inputAreaStart+m.stepInset+(e.inputAreaLength-2*m.stepInset)*Math.min(1,Math.max(0,t))}function L(e,t){e=e._dims;return Math.min(1,Math.max(0,(t-m.stepInset-e.inputAreaStart)/(e.inputAreaLength-2*m.stepInset-2*e.inputAreaStart)))}function C(t,n,r){var e=r._dims,a=p.ensureSingle(t,"rect",m.railTouchRectClass,function(e){e.call(o,n,t,r).style("pointer-events","all")});a.attr({width:e.inputAreaLength,height:Math.max(e.inputAreaWidth,m.tickOffset+r.ticklen+e.labelHeight)}).call(d.fill,r.bgcolor).attr("opacity",0),f.setTranslate(a,0,e.currentValueTotalHeight)}function O(e,t){var n=t._dims,r=n.inputAreaLength-2*m.railInset,e=p.ensureSingle(e,"rect",m.railRectClass);e.attr({width:r,height:m.railWidth,rx:m.railRadius,ry:m.railRadius,"shape-rendering":"crispEdges"}).call(d.stroke,t.bordercolor).call(d.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),f.setTranslate(e,m.railInset,.5*(n.inputAreaWidth-m.railWidth)+n.currentValueTotalHeight)}t.exports=function(l){var e=l._fullLayout,t=function(e,t){for(var n=e[m.name],r=[],a=0;a<n.length;a++){var i=n[a];i.visible&&(i._gd=t,r.push(i))}return r}(e,l),e=e._infolayer.selectAll("g."+m.containerClassName).data(0<t.length?[0]:[]);function n(e){e._commandObserver&&(e._commandObserver.remove(),delete e._commandObserver),c.autoMargin(l,b(e))}if(e.enter().append("g").classed(m.containerClassName,!0).style("cursor","ew-resize"),e.exit().each(function(){u.select(this).selectAll("g."+m.groupClassName).each(n)}).remove(),0!==t.length){e=e.selectAll("g."+m.groupClassName).data(t,i);e.enter().append("g").classed(m.groupClassName,!0),e.exit().each(n).remove();for(var r=0;r<t.length;r++){var a=t[r];!function(e,n){var t=f.tester.selectAll("g."+m.labelGroupClass).data(n._visibleSteps),r=(t.enter().append("g").classed(m.labelGroupClass,!0),0),a=0,i=(t.each(function(e){var e=w(u.select(this),{step:e},n).node();e&&(e=f.bBox(e),a=Math.max(a,e.height),r=Math.max(r,e.width))}),t.remove(),n._dims={}),o=(i.inputAreaWidth=Math.max(m.railWidth,m.gripHeight),e._fullLayout._size);i.lx=o.l+o.w*n.x,i.ly=o.t+o.h*(1-n.y),"fraction"===n.lenmode?i.outerLength=Math.round(o.w*n.len):i.outerLength=n.len;i.inputAreaStart=0,i.inputAreaLength=Math.round(i.outerLength-n.pad.l-n.pad.r);var o=(i.inputAreaLength-2*m.stepInset)/(n._stepCount-1),s=r+m.labelPadding;{var l;i.labelStride=Math.max(1,Math.ceil(s/o)),i.labelHeight=a,i.currentValueMaxWidth=0,i.currentValueHeight=0,i.currentValueTotalHeight=0,i.currentValueMaxLines=1,n.currentvalue.visible&&(l=f.tester.append("g"),t.each(function(e){var e=x(l,n,e.label),t=e.node()&&f.bBox(e.node())||{width:0,height:0},e=h.lineCount(e);i.currentValueMaxWidth=Math.max(i.currentValueMaxWidth,Math.ceil(t.width)),i.currentValueHeight=Math.max(i.currentValueHeight,Math.ceil(t.height)),i.currentValueMaxLines=Math.max(i.currentValueMaxLines,e)}),i.currentValueTotalHeight=i.currentValueHeight+n.currentvalue.offset,l.remove())}i.height=i.currentValueTotalHeight+m.tickOffset+n.ticklen+m.labelOffset+i.labelHeight+n.pad.t+n.pad.b;s="left";p.isRightAnchor(n)&&(i.lx-=i.outerLength,s="right");p.isCenterAnchor(n)&&(i.lx-=i.outerLength/2,s="center");o="top";p.isBottomAnchor(n)&&(i.ly-=i.height,o="bottom");p.isMiddleAnchor(n)&&(i.ly-=i.height/2,o="middle");i.outerLength=Math.ceil(i.outerLength),i.height=Math.ceil(i.height),i.lx=Math.round(i.lx),i.ly=Math.round(i.ly);t={y:n.y,b:i.height*v[o],t:i.height*y[o]};"fraction"===n.lenmode?(t.l=0,t.xl=n.x-n.len*y[s],t.r=0,t.xr=n.x+n.len*v[s]):(t.x=n.x,t.l=i.outerLength*y[s],t.r=i.outerLength*v[s]);c.autoMargin(e,b(n),t)}(l,a)}e.each(function(e){for(var n=u.select(this),t=e,r=t._dims,a=(r.labelSteps=[],t._stepCount),i=0;i<a;i+=r.labelStride)r.labelSteps.push({fraction:i/(a-1),step:t._visibleSteps[i]});c.manageCommandObserver(l,e,e._visibleSteps,function(e){var t=n.data()[0];t.active===e.index||t._dragging||A(l,n,t,e.index,!1,!0)});var o=l,s=u.select(this);(e.steps[e.active]||{}).visible||(e.active=e._visibleSteps[0]._index),s.call(x,e).call(O,e).call(T,e).call(M,e).call(C,o,e).call(_,o,e),o=e._dims,f.setTranslate(s,o.lx+e.pad.l,o.ly+e.pad.t),s.call(E,e,!1),s.call(x,e)})}}},{"../../constants/alignment":262,"../../lib":287,"../../lib/svg_text_utils":310,"../../plot_api/plot_template":323,"../../plots/plots":371,"../color":157,"../drawing":179,"./constants":251,"@plotly/d3":20}],254:[function(e,t,n){"use strict";var r=e("./constants");t.exports={moduleType:"component",name:r.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":250,"./constants":251,"./defaults":252,"./draw":253}],255:[function(e,t,n){"use strict";var T=e("@plotly/d3"),k=e("fast-isnumeric"),A=e("../../plots/plots"),M=e("../../registry"),E=e("../../lib"),S=E.strTranslate,L=e("../drawing"),C=e("../color"),O=e("../../lib/svg_text_utils"),D=e("../../constants/interactions"),I=e("../../constants/alignment").OPPOSITE_SIDE,R=/ [XY][0-9]* /;t.exports={draw:function(n,e,t){var r,a=t.propContainer,i=t.propName,o=t.placeholder,s=t.traceIndex,c=t.avoid||{},l=t.attributes,u=t.transform,d=t.containerGroup,f=n._fullLayout,p=1,h=!1,m=((a=a.title)&&a.text?a.text:"").trim(),g=(a=a&&a.font?a.font:{}).family,y=a.size,v=a.color,a=("title.text"===i?b="titleText":-1!==i.indexOf("axis")?b="axisTitleText":i.indexOf(!0)&&(b="colorbarTitleText"),n._context.edits[b]),b=(""===m?p=0:m.replace(R," % ")===o.replace(R," % ")&&(p=.2,h=!0,a||(m="")),t._meta?m=E.templateString(m,t._meta):f._meta&&(m=E.templateString(m,f._meta)),m||a);return d||(d=E.ensureSingle(f._infolayer,"g","g-"+e),r=f._hColorbarMoveTitle),(t=d.selectAll("text").data(b?[0]:[])).enter().append("text"),t.text(m).attr("class",e),t.exit().remove(),b&&(t.call(x),a&&(m?t.on(".opacity",null):(h=!(p=0),t.text(o).on("mouseover.opacity",function(){T.select(this).transition().duration(D.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){T.select(this).transition().duration(D.HIDE_PLACEHOLDER).style("opacity",0)})),t.call(O.makeEditable,{gd:n}).on("edit",function(e){void 0!==s?M.call("_guiRestyle",n,i,e,s):M.call("_guiRelayout",n,i,e)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(x)}).on("input",function(e){this.text(e||" ").call(O.positionText,l.x,l.y)})),t.classed("js-placeholder",h)),d;function x(e){E.syncOrAsync([_,w],e)}function _(e){var t;return(u=!u&&r?{}:u)?(t="",u.rotate&&(t+="rotate("+[u.rotate,l.x,l.y]+")"),(u.offset||r)&&(t+=S(0,(u.offset||0)-(r||0)))):t=null,e.attr("transform",t),e.style({"font-family":g,"font-size":T.round(y,2)+"px",fill:C.rgb(v),opacity:p*C.opacity(v),"font-weight":A.fontWeight}).attr(l).call(O.convertToTspans,n),A.previousPromises(n)}function w(e){var t,n,r,a,i,o,s,l,e=T.select(e.node().parentNode);c&&c.selection&&c.side&&m&&(e.attr("transform",null),t=I[c.side],n="left"===c.side||"top"===c.side?-1:1,r=k(c.pad)?c.pad:2,a=L.bBox(e.node()),i={left:0,top:0,right:f.width,bottom:f.height},i=c.maxShift||n*(i[c.side]-a[c.side]),((l=0)<(l=i<0?i:(s=c.offsetLeft||0,o=c.offsetTop||0,a.left-=s,a.right-=s,a.top-=o,a.bottom-=o,c.selection.each(function(){var e=L.bBox(this);E.bBoxIntersect(a,e,r)&&(l=Math.max(l,n*(e[c.side]-a[t])+r))}),Math.min(i,l)))||i<0)&&(s={left:[-l,0],right:[l,0],top:[0,-l],bottom:[0,l]}[c.side],e.attr("transform",S(s[0],s[1]))))}}}},{"../../constants/alignment":262,"../../constants/interactions":266,"../../lib":287,"../../lib/svg_text_utils":310,"../../plots/plots":371,"../../registry":378,"../color":157,"../drawing":179,"@plotly/d3":20,"fast-isnumeric":33}],256:[function(e,t,n){"use strict";var r=e("../../plots/font_attributes"),a=e("../color/attributes"),i=e("../../lib/extend").extendFlat,o=e("../../plot_api/edit_types").overrideAll,s=e("../../plots/pad_attributes"),e=e("../../plot_api/plot_template").templatedArray,l=e("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});t.exports=o(e("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:l,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:i(s({editType:"arraydraw"}),{}),font:r({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:a.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":281,"../../plot_api/edit_types":316,"../../plot_api/plot_template":323,"../../plots/font_attributes":365,"../../plots/pad_attributes":370,"../color/attributes":156}],257:[function(e,t,n){"use strict";t.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},{}],258:[function(e,t,n){"use strict";var a=e("../../lib"),i=e("../../plots/array_container_defaults"),o=e("./attributes"),r=e("./constants").name,s=o.buttons;function l(n,r,e){function t(e,t){return a.coerce(n,r,o,e,t)}t("visible",0<i(n,r,{name:"buttons",handleItemDefaults:c}).length)&&(t("active"),t("direction"),t("type"),t("showactive"),t("x"),t("y"),a.noneOrAll(n,r,["x","y"]),t("xanchor"),t("yanchor"),t("pad.t"),t("pad.r"),t("pad.b"),t("pad.l"),a.coerceFont(t,"font",e.font),t("bgcolor",e.paper_bgcolor),t("bordercolor"),t("borderwidth"))}function c(n,r){function e(e,t){return a.coerce(n,r,s,e,t)}e("visible","skip"===n.method||Array.isArray(n.args))&&(e("method"),e("args"),e("args2"),e("label"),e("execute"))}t.exports=function(e,t){i(e,t,{name:r,handleItemDefaults:l})}},{"../../lib":287,"../../plots/array_container_defaults":329,"./attributes":256,"./constants":257}],259:[function(e,t,n){"use strict";var b=e("@plotly/d3"),x=e("../../plots/plots"),i=e("../color"),u=e("../drawing"),_=e("../../lib"),d=e("../../lib/svg_text_utils"),l=e("../../plot_api/plot_template").arrayEditor,f=e("../../constants/alignment").LINE_SPACING,w=e("./constants"),p=e("./scrollbox");function h(e){return e._index}function m(e,t){return+e.attr(w.menuIndexAttrName)===t._index}function T(e,t,n,r,a,i,o,s){t.active=o,l(e.layout,w.name,t).applyUpdate("active",o),"buttons"===t.type?y(e,r,null,null,t):"dropdown"===t.type&&(a.attr(w.menuIndexAttrName,"-1"),g(e,r,a,i,t),s||y(e,r,a,i,t))}function g(e,t,n,r,a){var i=_.ensureSingle(t,"g",w.headerClassName,function(e){e.style("pointer-events","all")}),o=a._dims,s=a.active,s=a.buttons[s]||w.blankHeaderOpts,l={y:a.pad.t,yPad:0,x:a.pad.l,xPad:0,index:0},c={width:o.headerWidth,height:o.headerHeight};i.call(k,a,s,e).call(S,a,l,c),_.ensureSingle(t,"text",w.headerArrowClassName,function(e){e.attr("text-anchor","end").call(u.font,a.font).text(w.arrowSymbol[a.direction])}).attr({x:o.headerWidth-w.arrowOffsetX+a.pad.l,y:o.headerHeight/2+w.textOffsetY+a.pad.t}),i.on("click",function(){n.call(L,String(m(n,a)?-1:a._index)),y(e,t,n,r,a)}),i.on("mouseover",function(){i.call(M)}),i.on("mouseout",function(){i.call(E,a)}),u.setTranslate(t,o.lx,o.ly)}function y(r,a,i,o,s){i||(i=a).attr("pointer-events","all");var e=-1!=+i.attr(w.menuIndexAttrName)||"buttons"===s.type?s.buttons:[],t="dropdown"===s.type?w.dropdownButtonClassName:w.buttonClassName,l=i.selectAll("g."+t).data(_.filterVisible(e)),e=l.enter().append("g").classed(t,!0),t=l.exit(),e=("dropdown"===s.type?(e.attr("opacity","0").transition().attr("opacity","1"),t.transition().attr("opacity","0").remove()):t.remove(),0),t=0,n=s._dims,c=-1!==["up","down"].indexOf(s.direction),u=("dropdown"===s.type&&(c?t=n.headerHeight+w.gapButtonHeader:e=n.headerWidth+w.gapButtonHeader),"dropdown"===s.type&&"up"===s.direction&&(t=-w.gapButtonHeader+w.gapButton-n.openHeight),"dropdown"===s.type&&"left"===s.direction&&(e=-w.gapButtonHeader+w.gapButton-n.openWidth),{x:n.lx+e+s.pad.l,y:n.ly+t+s.pad.t,yPad:w.gapButton,xPad:w.gapButton,index:0}),e={l:u.x+s.borderwidth,t:u.y+s.borderwidth};if(l.each(function(e,t){var n=b.select(this);n.call(k,s,e,r).call(S,s,u),n.on("click",function(){b.event.defaultPrevented||(e.execute&&(e.args2&&s.active===t?(T(r,s,0,a,i,o,-1),x.executeAPICommand(r,e.method,e.args2)):(T(r,s,0,a,i,o,t),x.executeAPICommand(r,e.method,e.args))),r.emit("plotly_buttonclicked",{menu:s,button:e,active:s.active}))}),n.on("mouseover",function(){n.call(M)}),n.on("mouseout",function(){n.call(E,s),l.call(A,s)})}),l.call(A,s),c?(e.w=Math.max(n.openWidth,n.headerWidth),e.h=u.y-e.t):(e.w=u.x-e.l,e.h=Math.max(n.openHeight,n.headerHeight)),e.direction=s.direction,o)if(l.size()){var d,f,p,t=o,c=s,n=e,e="up"===(e=c.direction)||"down"===e,h=c._dims,m=c.active;if(e)for(p=f=0;p<m;p++)f+=h.heights[p]+w.gapButton;else for(p=d=0;p<m;p++)d+=h.widths[p]+w.gapButton;t.enable(n,d,f),t.hbar&&t.hbar.attr("opacity","0").transition().attr("opacity","1"),t.vbar&&t.vbar.attr("opacity","0").transition().attr("opacity","1")}else{var g=o,y=!!g.hbar,v=!!g.vbar;y&&g.hbar.transition().attr("opacity","0").each("end",function(){y=!1,v||g.disable()}),v&&g.vbar.transition().attr("opacity","0").each("end",function(){v=!1,y||g.disable()})}}function k(e,t,n,r){e.call(a,t).call(o,t,n,r)}function a(e,t){_.ensureSingle(e,"rect",w.itemRectClassName,function(e){e.attr({rx:w.rx,ry:w.ry,"shape-rendering":"crispEdges"})}).call(i.stroke,t.bordercolor).call(i.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function o(e,t,n,r){var e=_.ensureSingle(e,"text",w.itemTextClassName,function(e){e.attr({"text-anchor":"start","data-notex":1})}),n=n.label,a=r._fullLayout._meta;a&&(n=_.templateString(n,a)),e.call(u.font,t.font).text(n).call(d.convertToTspans,r)}function A(e,r){var a=r.active;e.each(function(e,t){var n=b.select(this);t===a&&r.showactive&&n.select("rect."+w.itemRectClassName).call(i.fill,w.activeColor)})}function M(e){e.select("rect."+w.itemRectClassName).call(i.fill,w.hoverColor)}function E(e,t){e.select("rect."+w.itemRectClassName).call(i.fill,t.bgcolor)}function v(e){return w.autoMarginIdRoot+e._index}function S(e,t,n,r){r=r||{};var a=e.select("."+w.itemRectClassName),i=e.select("."+w.itemTextClassName),o=t.borderwidth,s=n.index,l=t._dims,e=(u.setTranslate(e,o+n.x,o+n.y),-1!==["up","down"].indexOf(t.direction)),o=r.height||(e?l.heights[s]:l.height1),a=(a.attr({x:0,y:0,width:r.width||(e?l.width1:l.widths[s]),height:o}),t.font.size*f),r=d.lineCount(i);d.positionText(i,w.textOffsetX,o/2-(r-1)*a/2+w.textOffsetY),e?n.y+=l.heights[s]+n.yPad:n.x+=l.widths[s]+n.xPad,n.index++}function L(e,t){e.attr(w.menuIndexAttrName,t||"-1").selectAll("g."+w.dropdownButtonClassName).remove()}t.exports=function(a){var e=a._fullLayout,t=_.filterVisible(e[w.name]);function n(e){x.autoMargin(a,v(e))}var r=e._menulayer.selectAll("g."+w.containerClassName).data(0<t.length?[0]:[]);if(r.enter().append("g").classed(w.containerClassName,!0).style("cursor","pointer"),r.exit().each(function(){b.select(this).selectAll("g."+w.headerGroupClassName).each(n)}).remove(),0!==t.length){for(var i=r.selectAll("g."+w.headerGroupClassName).data(t,h),o=(i.enter().append("g").classed(w.headerGroupClassName,!0),_.ensureSingle(r,"g",w.dropdownButtonGroupClassName,function(e){e.style("pointer-events","all")})),s=0;s<t.length;s++){var l=t[s];!function(a,i){var o=i._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},e=u.tester.selectAll("g."+w.dropdownButtonClassName).data(_.filterVisible(i.buttons)),s=(e.enter().append("g").classed(w.dropdownButtonClassName,!0),-1!==["up","down"].indexOf(i.direction));e.each(function(e,t){var n=b.select(this),e=(n.call(k,i,e,a),n.select("."+w.itemTextClassName)),n=e.node()&&u.bBox(e.node()).width,n=Math.max(n+w.textPadX,w.minWidth),r=i.font.size*f,e=d.lineCount(e),r=Math.max(r*e,w.minHeight)+w.textOffsetY,r=Math.ceil(r),n=Math.ceil(n);o.widths[t]=n,o.heights[t]=r,o.height1=Math.max(o.height1,r),o.width1=Math.max(o.width1,n),s?(o.totalWidth=Math.max(o.totalWidth,n),o.openWidth=o.totalWidth,o.totalHeight+=r+w.gapButton,o.openHeight+=r+w.gapButton):(o.totalWidth+=n+w.gapButton,o.openWidth+=n+w.gapButton,o.totalHeight=Math.max(o.totalHeight,r),o.openHeight=o.totalHeight)}),s?o.totalHeight-=w.gapButton:o.totalWidth-=w.gapButton;o.headerWidth=o.width1+w.arrowPadX,o.headerHeight=o.height1,"dropdown"===i.type&&(s?(o.width1+=w.arrowPadX,o.totalHeight=o.height1):o.totalWidth=o.width1,o.totalWidth+=w.arrowPadX);e.remove();var e=o.totalWidth+i.pad.l+i.pad.r,t=o.totalHeight+i.pad.t+i.pad.b,n=a._fullLayout._size,n=(o.lx=n.l+n.w*i.x,o.ly=n.t+n.h*(1-i.y),"left");_.isRightAnchor(i)&&(o.lx-=e,n="right");_.isCenterAnchor(i)&&(o.lx-=e/2,n="center");var r="top";_.isBottomAnchor(i)&&(o.ly-=t,r="bottom");_.isMiddleAnchor(i)&&(o.ly-=t/2,r="middle");o.totalWidth=Math.ceil(o.totalWidth),o.totalHeight=Math.ceil(o.totalHeight),o.lx=Math.round(o.lx),o.ly=Math.round(o.ly),x.autoMargin(a,v(i),{x:i.x,y:i.y,l:e*({right:1,center:.5}[n]||0),r:e*({left:1,center:.5}[n]||0),b:t*({top:1,middle:.5}[r]||0),t:t*({bottom:1,middle:.5}[r]||0)})}(a,l)}var r="updatemenus"+e._uid,c=new p(a,o,r);i.enter().size()&&(o.node().parentNode.appendChild(o.node()),o.call(L)),i.exit().each(function(e){o.call(L),n(e)}).remove(),i.each(function(t){var n=b.select(this),r="dropdown"===t.type?o:null;x.manageCommandObserver(a,t,t.buttons,function(e){T(a,t,t.buttons[e.index],n,r,c,e.index,!0)}),"dropdown"===t.type?(g(a,n,o,c,t),m(o,t)&&y(a,n,o,c,t)):y(a,n,null,null,t)})}}},{"../../constants/alignment":262,"../../lib":287,"../../lib/svg_text_utils":310,"../../plot_api/plot_template":323,"../../plots/plots":371,"../color":157,"../drawing":179,"./constants":257,"./scrollbox":261,"@plotly/d3":20}],260:[function(e,t,n){arguments[4][254][0].apply(n,arguments)},{"./attributes":256,"./constants":257,"./defaults":258,"./draw":259,dup:254}],261:[function(e,t,n){"use strict";t.exports=T;var x=e("@plotly/d3"),_=e("../color"),w=e("../drawing"),a=e("../../lib");function T(e,t,n){this.gd=e,this.container=t,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}T.barWidth=2,T.barLength=20,T.barRadius=2,T.barPad=1,T.barColor="#808BA4",T.prototype.enable=function(e,t,n){var r,a,i=this.gd._fullLayout,o=i.width,s=i.height,e=(this.position=e,this.position.l),l=this.position.w,c=this.position.t,u=this.position.h,d=this.position.direction,f="down"===d,p="left"===d,h="up"===d,m=l,g=u;f||p||"right"===d||h||(this.position.direction="down",f=!0);f||h?(y=(b=e)+m,g=f?(r=c,(a=Math.min(r+g,s))-r):(a=c+g)-(r=Math.max(a-g,0))):(a=(r=c)+g,m=p?(y=e+m)-(b=Math.max(y-m,0)):(b=e,(y=Math.min(b+m,o))-b)),this._box={l:b,t:r,w:m,h:g};var y,d=m<l,h=T.barLength+2*T.barPad,f=T.barWidth+2*T.barPad,p=e,v=c+u,s=(s<v+f&&(v=s-f),this.container.selectAll("rect.scrollbar-horizontal").data(d?[0]:[])),s=(s.exit().on(".drag",null).remove(),s.enter().append("rect").classed("scrollbar-horizontal",!0).call(_.fill,T.barColor),d?(this.hbar=s.attr({rx:T.barRadius,ry:T.barRadius,x:p,y:v,width:h,height:f}),this._hbarXMin=p+h/2,this._hbarTranslateMax=m-h):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),g<u),v=T.barWidth+2*T.barPad,p=T.barLength+2*T.barPad,m=e+l,h=c,o=(o<m+v&&(m=o-v),this.container.selectAll("rect.scrollbar-vertical").data(s?[0]:[])),o=(o.exit().on(".drag",null).remove(),o.enter().append("rect").classed("scrollbar-vertical",!0).call(_.fill,T.barColor),s?(this.vbar=o.attr({rx:T.barRadius,ry:T.barRadius,x:m,y:h,width:v,height:p}),this._vbarYMin=h+p/2,this._vbarTranslateMax=g-p):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax),this.id),m=b-.5,h=s?y+v+.5:y+.5,g=r-.5,p=d?a+f+.5:a+.5,b=i._topdefs.selectAll("#"+o).data(d||s?[0]:[]);b.exit().remove(),b.enter().append("clipPath").attr("id",o).append("rect"),d||s?(this._clipRect=b.select("rect").attr({x:Math.floor(m),y:Math.floor(g),width:Math.ceil(h)-Math.floor(m),height:Math.ceil(p)-Math.floor(g)}),this.container.call(w.setClipUrl,o,this.gd),this.bg.attr({x:e,y:c,width:l,height:u})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(w.setClipUrl,null),delete this._clipRect),(d||s)&&(v=x.behavior.drag().on("dragstart",function(){x.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this)),this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(v),y=x.behavior.drag().on("dragstart",function(){x.event.sourceEvent.preventDefault(),x.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this)),d&&this.hbar.on(".drag",null).call(y),s&&this.vbar.on(".drag",null).call(y)),this.setTranslate(t,n)},T.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(w.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},T.prototype._onBoxDrag=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e-=x.event.dx),this.vbar&&(t-=x.event.dy),this.setTranslate(e,t)},T.prototype._onBoxWheel=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e+=x.event.deltaY),this.vbar&&(t+=x.event.deltaY),this.setTranslate(e,t)},T.prototype._onBarDrag=function(){var e,t,n=this.translateX,r=this.translateY;this.hbar&&(e=(t=n+this._hbarXMin)+this._hbarTranslateMax,n=(a.constrain(x.event.x,t,e)-t)/(e-t)*(this.position.w-this._box.w)),this.vbar&&(t=(e=r+this._vbarYMin)+this._vbarTranslateMax,r=(a.constrain(x.event.y,e,t)-e)/(t-e)*(this.position.h-this._box.h)),this.setTranslate(n,r)},T.prototype.setTranslate=function(e,t){var n=this.position.w-this._box.w,r=this.position.h-this._box.h;e=a.constrain(e||0,0,n),t=a.constrain(t||0,0,r),this.translateX=e,this.translateY=t,this.container.call(w.setTranslate,this._box.l-this.position.l-e,this._box.t-this.position.t-t),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+e-.5),y:Math.floor(this.position.t+t-.5)}),this.hbar&&this.hbar.call(w.setTranslate,e+e/n*this._hbarTranslateMax,t),this.vbar&&this.vbar.call(w.setTranslate,e,t+t/r*this._vbarTranslateMax)}},{"../../lib":287,"../color":157,"../drawing":179,"@plotly/d3":20}],262:[function(e,t,n){"use strict";t.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],263:[function(e,t,n){"use strict";t.exports={axisRefDescription:function(e,t,n){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+n+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",n,"of the domain of the","second",e,"axis."].join(" ")}}},{}],264:[function(e,t,n){"use strict";t.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],265:[function(e,t,n){"use strict";t.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],266:[function(e,t,n){"use strict";t.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],267:[function(e,t,n){"use strict";t.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:""}},{}],268:[function(e,t,n){"use strict";n.xmlns="http://www.w3.org/2000/xmlns/",n.svg="http://www.w3.org/2000/svg",n.xlink="http://www.w3.org/1999/xlink",n.svgAttrs={xmlns:n.svg,"xmlns:xlink":n.xlink}},{}],269:[function(e,t,n){"use strict";n.version=e("./version").version,e("native-promise-only"),e("../build/plotcss");for(var r=e("./registry"),a=n.register=r.register,i=e("./plot_api"),o=Object.keys(i),s=0;s<o.length;s++){var l=o[s];"_"!==l.charAt(0)&&(n[l]=i[l]),a({moduleType:"apiMethod",name:l,fn:i[l]})}a(e("./traces/scatter")),a([e("./components/legend"),e("./components/fx"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars"),e("./components/colorscale"),e("./components/colorbar"),e("./components/modebar")]),a([e("./locale-en"),e("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(a(window.PlotlyLocales),delete window.PlotlyLocales),n.Icons=e("./fonts/ploticon");var r=e("./components/fx"),c=e("./plots/plots");n.Plots={resize:c.resize,graphJson:c.graphJson,sendDataToCloud:c.sendDataToCloud},n.Fx={hover:r.hover,unhover:r.unhover,loneHover:r.loneHover,loneUnhover:r.loneUnhover},n.Snapshot=e("./snapshot"),n.PlotSchema=e("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":148,"./components/annotations3d":153,"./components/colorbar":163,"./components/colorscale":169,"./components/errorbars":185,"./components/fx":197,"./components/grid":201,"./components/images":206,"./components/legend":214,"./components/modebar":220,"./components/rangeselector":228,"./components/rangeslider":235,"./components/shapes":249,"./components/sliders":254,"./components/updatemenus":260,"./fonts/ploticon":270,"./locale-en":314,"./locale-en-us":313,"./plot_api":318,"./plot_api/plot_schema":322,"./plots/plots":371,"./registry":378,"./snapshot":383,"./traces/scatter":512,"./version":552,"native-promise-only":72}],270:[function(e,t,n){"use strict";t.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],271:[function(e,t,n){"use strict";n.isLeftAnchor=function(e){return"left"===e.xanchor||"auto"===e.xanchor&&e.x<=1/3},n.isCenterAnchor=function(e){return"center"===e.xanchor||"auto"===e.xanchor&&e.x>1/3&&e.x<2/3},n.isRightAnchor=function(e){return"right"===e.xanchor||"auto"===e.xanchor&&e.x>=2/3},n.isTopAnchor=function(e){return"top"===e.yanchor||"auto"===e.yanchor&&e.y>=2/3},n.isMiddleAnchor=function(e){return"middle"===e.yanchor||"auto"===e.yanchor&&e.y>1/3&&e.y<2/3},n.isBottomAnchor=function(e){return"bottom"===e.yanchor||"auto"===e.yanchor&&e.y<=1/3}},{}],272:[function(e,t,n){"use strict";var e=e("./mod"),a=e.mod,r=e.modHalf,m=Math.PI,g=2*m;function y(e){return Math.abs(e[1]-e[0])>g-1e-14}function i(e,t){return r(t-e,g)}function o(e,t){if(y(t))return!0;var t=t[0]<t[1]?(n=t[0],t[1]):(n=t[1],t[0]),n=a(n,g),e=((t=a(t,g))<n&&(t+=g),a(e,g)),r=e+g;return n<=e&&e<=t||n<=r&&r<=t}function s(e,t,n,r,a,i,o){a=a||0,i=i||0;var s,l,c,u=y([n,r]);function d(e,t){return[e*Math.cos(t)+a,i-e*Math.sin(t)]}var f,r=u?(s=0,l=m,g):n<r?(s=n,r):(s=r,n),n=e<t?(c=e,t):(c=t,e),p=Math.abs(r-s)<=m?0:1;function h(e,t,n){return"A"+[e,e]+" "+[0,p,n]+" "+d(e,t)}return u?f=null===c?"M"+d(n,s)+h(n,l,0)+h(n,r,0)+"Z":"M"+d(c,s)+h(c,l,0)+h(c,r,0)+"ZM"+d(n,s)+h(n,l,1)+h(n,r,1)+"Z":null===c?(f="M"+d(n,s)+h(n,r,0),o&&(f+="L0,0Z")):f="M"+d(c,s)+"L"+d(n,s)+h(n,r,0)+"L"+d(c,r)+h(c,s,1)+"Z",f}t.exports={deg2rad:function(e){return e/180*m},rad2deg:function(e){return e/m*180},angleDelta:i,angleDist:function(e,t){return Math.abs(i(e,t))},isFullCircle:y,isAngleInsideSector:o,isPtInsideSector:function(e,t,n,r){if(!o(t,r))return!1;var a,t=n[0]<n[1]?(a=n[0],n[1]):(a=n[1],n[0]);return a<=e&&e<=t},pathArc:function(e,t,n,r,a){return s(null,e,t,n,r,a,0)},pathSector:function(e,t,n,r,a){return s(null,e,t,n,r,a,1)},pathAnnulus:function(e,t,n,r,a,i){return s(e,t,n,r,a,i,1)}}},{"./mod":294}],273:[function(e,t,n){"use strict";var d=Array.isArray,r=ArrayBuffer,a=DataView;function i(e){return r.isView(e)&&!(e instanceof a)}function o(e){return d(e)||i(e)}function s(e,t,n){if(o(e)){if(o(e[0])){for(var r=n,a=0;a<e.length;a++)r=t(r,e[a].length);return r}return e.length}return 0}n.isTypedArray=i,n.isArrayOrTypedArray=o,n.isArray1D=function(e){return!o(e[0])},n.ensureArray=function(e,t){return(e=d(e)?e:[]).length=t,e},n.concat=function(){for(var e,t,n,r,a,i,o,s=[],l=!0,c=0,u=0;u<arguments.length;u++)(a=(n=arguments[u]).length)&&(t?s.push(n):(t=n,r=a),d(n)?e=!1:(l=!1,c?e!==n.constructor&&(e=!1):e=n.constructor),c+=a);if(!c)return[];if(!s.length)return t;if(l)return t.concat.apply(t,s);if(e)for((i=new e(c)).set(t),u=0;u<s.length;u++)n=s[u],i.set(n,r),r+=n.length;else{for(i=new Array(c),o=0;o<t.length;o++)i[o]=t[o];for(u=0;u<s.length;u++){for(n=s[u],o=0;o<n.length;o++)i[r+o]=n[o];r+=o}}return i},n.maxRowLength=function(e){return s(e,Math.max,0)},n.minRowLength=function(e){return s(e,Math.min,1/0)}},{}],274:[function(e,t,n){"use strict";var r=e("fast-isnumeric"),a=e("../constants/numerical").BADNUM,i=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;t.exports=function(e){return"string"==typeof e&&(e=e.replace(i,"")),r(e)?Number(e):a}},{"../constants/numerical":267,"fast-isnumeric":33}],275:[function(e,t,n){"use strict";t.exports=function(e){e=e._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(e){e.regl&&e.regl.clear({color:!0,depth:!0})})}},{}],276:[function(e,t,n){"use strict";t.exports=function(e){e._responsiveChartHandler&&(window.removeEventListener("resize",e._responsiveChartHandler),delete e._responsiveChartHandler)}},{}],277:[function(e,t,y){"use strict";var a=e("fast-isnumeric"),r=e("tinycolor2"),o=e("../plots/attributes"),i=e("../components/colorscale/scales"),s=e("../components/color"),l=e("../constants/interactions").DESELECTDIM,c=e("./nested_property"),u=e("./regex").counter,d=e("./mod").modHalf,f=e("./array").isArrayOrTypedArray;function p(e,t){var n=y.valObjectMeta[t.valType];if(t.arrayOk&&f(e))return!0;if(n.validateFunction)return n.validateFunction(e,t);var r={},a=r;return n.coerceFunction(e,{set:function(e){a=e}},r,t),a!==r}y.valObjectMeta={data_array:{coerceFunction:function(e,t,n){f(e)?t.set(e):void 0!==n&&t.set(n)}},enumerated:{coerceFunction:function(e,t,n,r){r.coerceNumber&&(e=+e),-1===r.values.indexOf(e)?t.set(n):t.set(e)},validateFunction:function(e,t){t.coerceNumber&&(e=+e);for(var n=t.values,r=0;r<n.length;r++){var a=String(n[r]);if("/"===a.charAt(0)&&"/"===a.charAt(a.length-1)){if(new RegExp(a.substr(1,a.length-2)).test(e))return!0}else if(e===n[r])return!0}return!1}},boolean:{coerceFunction:function(e,t,n){!0===e||!1===e?t.set(e):t.set(n)}},number:{coerceFunction:function(e,t,n,r){!a(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?t.set(n):t.set(+e)}},integer:{coerceFunction:function(e,t,n,r){e%1||!a(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?t.set(n):t.set(+e)}},string:{coerceFunction:function(e,t,n,r){"string"!=typeof e?!0!==r.strict&&"number"==typeof e?t.set(String(e)):t.set(n):r.noBlank&&!e?t.set(n):t.set(e)}},color:{coerceFunction:function(e,t,n){r(e).isValid()?t.set(e):t.set(n)}},colorlist:{coerceFunction:function(e,t,n){Array.isArray(e)&&e.length&&e.every(function(e){return r(e).isValid()})?t.set(e):t.set(n)}},colorscale:{coerceFunction:function(e,t,n){t.set(i.get(e,n))}},angle:{coerceFunction:function(e,t,n){"auto"===e?t.set("auto"):a(e)?t.set(d(+e,360)):t.set(n)}},subplotid:{coerceFunction:function(e,t,n,r){r=r.regex||u(n);"string"==typeof e&&r.test(e)?t.set(e):t.set(n)},validateFunction:function(e,t){t=t.dflt;return e===t||"string"==typeof e&&!!u(t).test(e)}},flaglist:{coerceFunction:function(e,t,n,r){if("string"!=typeof e)t.set(n);else if(-1!==(r.extras||[]).indexOf(e))t.set(e);else{for(var a=e.split("+"),i=0;i<a.length;){var o=a[i];-1===r.flags.indexOf(o)||a.indexOf(o)<i?a.splice(i,1):i++}a.length?t.set(a.join("+")):t.set(n)}}},any:{coerceFunction:function(e,t,n){void 0===e?t.set(n):t.set(e)}},info_array:{coerceFunction:function(e,t,n,r){function a(e,t,n){var r;return void 0===n&&(n=t.dflt),y.valObjectMeta[t.valType].coerceFunction(e,{set:function(e){r=e}},n,t),r}var i=2===r.dimensions||"1-2"===r.dimensions&&Array.isArray(e)&&Array.isArray(e[0]);if(Array.isArray(e)){var o,s,l,c,u,d,f=r.items,p=[],h=Array.isArray(f),r=h&&i&&Array.isArray(f[0]),m=i&&h&&!r,g=(h&&!m?f:e).length;if(n=Array.isArray(n)?n:[],i)for(o=0;o<g;o++)for(p[o]=[],l=Array.isArray(e[o])?e[o]:[],u=(m?f:h?f[o]:l).length,s=0;s<u;s++)c=m?f[s]:h?f[o][s]:f,void 0!==(d=a(l[s],c,(n[o]||[])[s]))&&(p[o][s]=d);else for(o=0;o<g;o++)void 0!==(d=a(e[o],h?f[o]:f,n[o]))&&(p[o]=d);t.set(p)}else t.set(n)},validateFunction:function(e,t){if(!Array.isArray(e))return!1;var n=t.items,r=Array.isArray(n),a=2===t.dimensions;if(!t.freeLength&&e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(a){if(!Array.isArray(e[i])||!t.freeLength&&e[i].length!==n[i].length)return!1;for(var o=0;o<e[i].length;o++)if(!p(e[i][o],r?n[i][o]:n))return!1}else if(!p(e[i],r?n[i]:n))return!1;return!0}}},y.coerce=function(e,t,n,r,a){var n=c(n,r).get(),e=c(e,r),i=c(t,r),e=e.get(),t=t._template;if(void 0===e&&t&&(e=c(t,r).get(),t=0),void 0===a&&(a=n.dflt),n.arrayOk&&f(e))return i.set(e),e;var o=y.valObjectMeta[n.valType].coerceFunction,s=(o(e,i,a,n),i.get());return t&&s===a&&!p(e,n)&&(o(e=c(t,r).get(),i,a,n),s=i.get()),s},y.coerce2=function(e,t,n,r,a){var i=c(e,r),e=y.coerce(e,t,n,r,a),t=i.get();return null!=t&&e},y.coerceFont=function(e,t,n){var r={};return r.family=e(t+".family",(n=n||{}).family),r.size=e(t+".size",n.size),r.color=e(t+".color",n.color),r},y.coercePattern=function(e,t,n,r){var a;e(t+".shape")&&(e(t+".solidity"),e(t+".size"),a="overlay"===e(t+".fillmode"),r||(r=e(t+".bgcolor",a?n:void 0),e(t+".fgcolor",a?s.contrast(r):n)),e(t+".fgopacity",a?.5:1))},y.coerceHoverinfo=function(e,t,n){var r,a=t._module.attributes,a=a.hoverinfo?a:o,i=a.hoverinfo;return 1===n._dataLength&&((n="all"===i.dflt?i.flags.slice():i.dflt.split("+")).splice(n.indexOf("name"),1),r=n.join("+")),y.coerce(e,t,a,"hoverinfo",r)},y.coerceSelectionMarkerOpacity=function(e,t){var n,r,a;!e.marker||void 0!==(n=e.marker.opacity)&&(f(n)||e.selected||e.unselected||(a=l*(r=n)),t("selected.marker.opacity",r),t("unselected.marker.opacity",a))},y.validate=p},{"../components/color":157,"../components/colorscale/scales":172,"../constants/interactions":266,"../plots/attributes":330,"./array":273,"./mod":294,"./nested_property":295,"./regex":303,"fast-isnumeric":33,tinycolor2:121}],278:[function(e,t,f){"use strict";var p,h,n=e("d3-time-format").timeFormat,u=e("fast-isnumeric"),s=e("./loggers"),m=e("./mod").mod,r=e("../constants/numerical"),g=r.BADNUM,y=r.ONEDAY,v=r.ONEHOUR,b=r.ONEMIN,x=r.ONESEC,_=r.EPOCHJD,w=e("../registry"),d=e("d3-time-format").utcFormat,T=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,k=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,A=(new Date).getFullYear()-70;function M(e){return e&&w.componentsRegistry.calendars&&"string"==typeof e&&"gregorian"!==e}function l(e,t){return String(e+Math.pow(10,t)).substr(1)}f.dateTick0=function(e,t){r=!!t;var n=M(n=e)?(r?w.getComponentMethod("calendars","CANONICAL_SUNDAY"):w.getComponentMethod("calendars","CANONICAL_TICK"))[n]:r?"2000-01-02":"2000-01-01";if(t<2)return n;var r=f.dateTime2ms(n,e);return f.ms2DateTime(r+=y*(t-1),0,e)},f.dfltRange=function(e){return M(e)?w.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]},f.isJSDate=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.getTime},f.dateTime2ms=function(e,t){if(f.isJSDate(e))return a=e.getTimezoneOffset()*b,(n=(e.getUTCMinutes()-e.getMinutes())*b+(e.getUTCSeconds()-e.getSeconds())*x+(e.getUTCMilliseconds()-e.getMilliseconds()))&&(a=a-(r=3*b)/2+m(n-a+r/2,r)),e=Number(e)-a,p<=e&&e<=h?e:g;if("string"!=typeof e&&"number"!=typeof e)return g;e=String(e);var n=M(t),r=e.charAt(0),a=(!n||"G"!==r&&"g"!==r||(e=e.substr(1),t=""),n&&"chinese"===t.substr(0,7)),r=e.match(a?k:T);if(!r)return g;var e=r[1],i=r[3]||"1",o=Number(r[5]||1),s=Number(r[7]||0),l=Number(r[9]||0),r=Number(r[11]||0);if(n){if(2===e.length)return g;e=Number(e);try{var c,u,d=w.getComponentMethod("calendars","getCal")(t);u=a?(c="i"===i.charAt(i.length-1),i=parseInt(i,10),d.newDate(e,d.toMonthIndex(e,i,c),o)):d.newDate(e,Number(i),o)}catch(e){return g}return u?(u.toJD()-_)*y+s*v+l*b+r*x:g}e=2===e.length?(Number(e)+2e3-A)%100+A:Number(e),--i;n=new Date(Date.UTC(2e3,i,o,s,l));return n.setUTCFullYear(e),n.getUTCMonth()!==i||n.getUTCDate()!==o?g:n.getTime()+r*x},p=f.MIN_MS=f.dateTime2ms("-9999"),h=f.MAX_MS=f.dateTime2ms("9999-12-31 23:59:59.9999"),f.isDateTime=function(e,t){return f.dateTime2ms(e,t)!==g};var E=90*y,S=3*v,L=5*b;function C(e,t,n,r,a){if((t||n||r||a)&&(e+=" "+l(t,2)+":"+l(n,2),(r||a)&&(e+=":"+l(r,2),a))){for(var i=4;a%10==0;)--i,a/=10;e+="."+l(a,i)}return e}f.ms2DateTime=function(e,t,n){if("number"!=typeof e||!(p<=e&&e<=h))return g;t=t||0;var r,a,i,o,s=Math.floor(10*m(e+.05,1)),l=Math.round(e-s/10);if(M(n)){var c=Math.floor(l/y)+_,e=Math.floor(m(e,y));try{r=w.getComponentMethod("calendars","getCal")(n).fromJD(c).formatDate("yyyy-mm-dd")}catch(e){r=d("G%Y-%m-%d")(new Date(l))}if("-"===r.charAt(0))for(;r.length<11;)r="-0"+r.substr(1);else for(;r.length<10;)r="0"+r;c=t<E?Math.floor(e/v):0,a=t<E?Math.floor(e%v/b):0,i=t<S?Math.floor(e%b/x):0,o=t<L?e%x*10+s:0}else n=new Date(l),r=d("%Y-%m-%d")(n),c=t<E?n.getUTCHours():0,a=t<E?n.getUTCMinutes():0,i=t<S?n.getUTCSeconds():0,o=t<L?10*n.getUTCMilliseconds()+s:0;return C(r,c,a,i,o)},f.ms2DateTimeLocal=function(e){if(!(p+y<=e&&e<=h-y))return g;var t=Math.floor(10*m(e+.05,1)),e=new Date(Math.round(e-t/10));return C(n("%Y-%m-%d")(e),e.getHours(),e.getMinutes(),e.getSeconds(),10*e.getUTCMilliseconds()+t)},f.cleanDate=function(e,t,n){if(e===g)return t;if(f.isJSDate(e)||"number"==typeof e&&isFinite(e)){if(M(n))return s.error("JS Dates and milliseconds are incompatible with world calendars",e),t;if(!(e=f.ms2DateTimeLocal(+e))&&void 0!==t)return t}else if(!f.isDateTime(e,n))return s.error("unrecognized date",e),t;return e};var i=/%\d?f/g,o=/%h/g,c={1:"1",2:"1",3:"2",4:"2"};function O(e,t,n,r){e=e.replace(i,function(e){e=Math.min(+e.charAt(1)||6,6);return(t/1e3%1+2).toFixed(e).substr(2).replace(/0+$/,"")||"0"});var a=new Date(Math.floor(t+.05));if(e=e.replace(o,function(){return c[n("%q")(a)]}),M(r))try{e=w.getComponentMethod("calendars","worldCalFmt")(e,t,r)}catch(e){return"Invalid"}return n(e)(a)}var D=[59,59.9,59.99,59.999,59.9999];f.formatDate=function(e,t,n,r,a,i){if(a=M(a)&&a,!t)if("y"===n)t=i.year;else if("m"===n)t=i.month;else{if("d"!==n)return n=n,s=m((o=e)+.05,y),s=l(Math.floor(s/v),2)+":"+l(m(Math.floor(s/b),60),2),"M"!==n&&(u(n)||(n=0),o=(100+Math.min(m(o/x,60),D[n])).toFixed(n).substr(1),s+=":"+(o=0<n?o.replace(/0+$/,"").replace(/[\.]$/,""):o)),s+"\n"+O(i.dayMonthYear,e,r,a);t=i.dayMonth+"\n"+i.year}var o,s;return O(t,e,r,a)};var I=3*y;f.incrementMonth=function(t,e,n){n=M(n)&&n;var r=m(t,y);if(t=Math.round(t-r),n)try{var a=Math.round(t/y)+_,i=w.getComponentMethod("calendars","getCal")(n),o=i.fromJD(a);return e%12?i.add(o,e,"m"):i.add(o,e/12,"y"),(o.toJD()-_)*y+r}catch(e){s.error("invalid ms "+t+" in calendar "+n)}a=new Date(t+I);return a.setUTCMonth(a.getUTCMonth()+e)+r-I},f.findExactDates=function(e,t){for(var n,r,a=0,i=0,o=0,s=0,l=M(t)&&w.getComponentMethod("calendars","getCal")(t),c=0;c<e.length;c++)if(r=e[c],u(r)){if(!(r%y))if(l)try{1===(n=l.fromJD(r/y+_)).day()?1===n.month()?a++:i++:o++}catch(e){}else 1===(n=new Date(r)).getUTCDate()?0===n.getUTCMonth()?a++:i++:o++}else s++;t=e.length-s;return{exactYears:a/t,exactMonths:(i+=a)/t,exactDays:(o+=i)/t}}},{"../constants/numerical":267,"../registry":378,"./loggers":291,"./mod":294,"d3-time-format":30,"fast-isnumeric":33}],279:[function(e,t,n){"use strict";var r=e("@plotly/d3"),a=e("./loggers"),i=e("./matrix"),o=e("gl-mat4");function s(e){var t=e&&e.parentNode;t&&t.removeChild(e)}function l(e,t,n){var e="plotly.js-style-"+e,r=document.getElementById(e),e=(r||((r=document.createElement("style")).setAttribute("id",e),r.appendChild(document.createTextNode("")),document.head.appendChild(r)),r.sheet);e.insertRule?e.insertRule(t+"{"+n+"}",0):e.addRule?e.addRule(t,n,0):a.warn("addStyleRule failed")}function c(e){e=window.getComputedStyle(e,null),e=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform");return"none"===e?null:e.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(e){return+e})}function u(e){for(var t,n=[];(t=e)&&(t instanceof Element||t instanceof HTMLElement);)n.push(e),e=e.parentNode;return n}t.exports={getGraphDiv:function(e){var t;if("string"==typeof e){if(null===(t=document.getElementById(e)))throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}if(null==e)throw new Error("DOM element provided is null or undefined");return e},isPlotDiv:function(e){return(e=r.select(e)).node()instanceof HTMLElement&&e.size()&&e.classed("js-plotly-plot")},removeElement:s,addStyleRule:function(e,t){l("global",e,t)},addRelatedStyleRule:l,deleteRelatedStyleRule:function(e){(e=document.getElementById("plotly.js-style-"+e))&&s(e)},getFullTransformMatrix:function(e){var e=u(e),t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return e.forEach(function(e){var e=c(e);e&&(e=i.convertCssMatrix(e),t=o.multiply(t,t,e))}),t},getElementTransformMatrix:c,getElementAndAncestors:u,equalDomRects:function(e,t){return e&&t&&e.x===t.x&&e.y===t.y&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}}},{"./loggers":291,"./matrix":293,"@plotly/d3":20,"gl-mat4":49}],280:[function(e,t,n){"use strict";var i=e("events").EventEmitter;t.exports={init:function(n){var r,a;return n._ev instanceof i||(r=new i,a=new i,n._ev=r,n._internalEv=a,n.on=r.on.bind(r),n.once=r.once.bind(r),n.removeListener=r.removeListener.bind(r),n.removeAllListeners=r.removeAllListeners.bind(r),n._internalOn=a.on.bind(a),n._internalOnce=a.once.bind(a),n._removeInternalListener=a.removeListener.bind(a),n._removeAllInternalListeners=a.removeAllListeners.bind(a),n.emit=function(e,t){"undefined"!=typeof jQuery&&jQuery(n).trigger(e,t),r.emit(e,t),a.emit(e,t)}),n},triggerHandler:function(e,t,n){"undefined"!=typeof jQuery&&(r=jQuery(e).triggerHandler(t,n));var r,a=e._ev;if(!a)return r;var i,o=a._events[t];if(!o)return r;function s(e){return e.listener?(a.removeListener(t,e.listener),e.fired?void 0:(e.fired=!0,e.listener.apply(a,[n]))):e.apply(a,[n])}for(o=Array.isArray(o)?o:[o],i=0;i<o.length-1;i++)s(o[i]);return e=s(o[i]),void 0!==r?r:e},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}}},{events:27}],281:[function(e,t,n){"use strict";var f=e("./is_plain_object.js"),p=Array.isArray;function h(e,t,n,r){var a,i,o,s,l,c=e[0],u=e.length;if(2===u&&p(c)&&p(e[1])&&0===c.length){if(function(e,t){for(var n,r=0;r<e.length;r++){if(null!==(n=e[r])&&"object"==typeof n)return!1;void 0!==n&&(t[r]=n)}return!0}(e[1],c))return c;c.splice(0,c.length)}for(var d=1;d<u;d++)for(i in a=e[d])l=c[i],o=a[i],r&&p(o)?c[i]=o:t&&o&&(f(o)||(s=p(o)))?(l=s?(s=!1,l&&p(l)?l:[]):l&&f(l)?l:{},c[i]=h([l,o],t,n,r)):void 0===o&&!n||(c[i]=o);return c}n.extendFlat=function(){return h(arguments,!1,!1,!1)},n.extendDeep=function(){return h(arguments,!0,!1,!1)},n.extendDeepAll=function(){return h(arguments,!0,!0,!1)},n.extendDeepNoArrays=function(){return h(arguments,!0,!1,!0)}},{"./is_plain_object.js":288}],282:[function(e,t,n){"use strict";t.exports=function(e){for(var t={},n=[],r=0,a=0;a<e.length;a++){var i=e[a];1!==t[i]&&(t[i]=1,n[r++]=i)}return n}},{}],283:[function(e,t,n){"use strict";function o(e){return!0===e.visible}function s(e){e=e[0].trace;return!0===e.visible&&0!==e._length}t.exports=function(e){t=e;for(var t,n=Array.isArray(t)&&Array.isArray(t[0])&&t[0][0]&&t[0][0].trace?s:o,r=[],a=0;a<e.length;a++){var i=e[a];n(i)&&r.push(i)}return r}},{}],284:[function(e,t,n){"use strict";var o,s,l,c=e("./mod").mod;function h(e,t,n,r,a,i,o,s){var n=n-e,l=a-e,o=o-a,a=r-t,r=i-t,s=s-i,i=n*s-o*a;if(0==i)return null;s=(l*s-o*r)/i,o=(l*a-n*r)/i;return o<0||1<o||s<0||1<s?null:{x:e+n*s,y:t+a*s}}function m(e,t,n,r,a){var i=r*e+a*t;return i<0?r*r+a*a:n<i?(i=r-e)*i+(i=a-t)*i:(i=r*t-a*e)*i/n}n.segmentsIntersect=h,n.segmentDistance=function(e,t,n,r,a,i,o,s){if(h(e,t,n,r,a,i,o,s))return 0;var l=n-e,c=r-t,u=o-a,d=s-i,f=l*l+c*c,p=u*u+d*d,l=Math.min(m(l,c,f,a-e,i-t),m(l,c,f,o-e,s-t),m(u,d,p,e-a,t-i),m(u,d,p,n-a,r-i));return Math.sqrt(l)},n.getTextLocation=function(e,t,n,r){if(e===s&&r===l||(o={},s=e,l=r),o[n])return o[n];var a=e.getPointAtLength(c(n-r/2,t)),r=e.getPointAtLength(c(n+r/2,t)),i=Math.atan((r.y-a.y)/(r.x-a.x)),e=e.getPointAtLength(c(n,t)),t={x:(4*e.x+a.x+r.x)/6,y:(4*e.y+a.y+r.y)/6,theta:i};return o[n]=t},n.clearLocationCache=function(){s=null},n.getVisibleSegment=function(n,e,t){var r,a,i=e.left,o=e.right,s=e.top,l=e.bottom,c=0,u=n.getTotalLength(),d=u;function f(e){var t=n.getPointAtLength(e),e=(0===e?r=t:e===u&&(a=t),t.x<i?i-t.x:t.x>o?t.x-o:0),t=t.y<s?s-t.y:t.y>l?t.y-l:0;return Math.sqrt(e*e+t*t)}for(var p=f(c);p;){if(d<(c+=p+t))return;p=f(c)}for(p=f(d);p;){if((d-=p+t)<c)return;p=f(d)}return{min:c,max:d,len:d-c,total:u,isClosed:0===c&&d===u&&Math.abs(r.x-a.x)<.1&&Math.abs(r.y-a.y)<.1}},n.findPointOnPath=function(e,t,n,r){for(var a,i,o,s=(r=r||{}).pathLength||e.getTotalLength(),l=r.tolerance||.001,c=r.iterationLimit||30,u=e.getPointAtLength(0)[n]>e.getPointAtLength(s)[n]?-1:1,d=0,f=0,p=s;d<c;){if(o=(i=e.getPointAtLength(a=(f+p)/2))[n]-t,Math.abs(o)<l)return i;0<u*o?p=a:f=a,d++}return i}},{"./mod":294}],285:[function(e,t,n){"use strict";t.exports=function(e){return e}},{}],286:[function(e,t,n){"use strict";t.exports=function(e,t){if(!t)return e;var n=1/Math.abs(t),n=1<n?(n*e+n*t)/n:e+t,r=String(n).length;return 16<r&&(t=String(t).length,String(e).length+t<=r&&(-1===(e=parseFloat(n).toPrecision(12)).indexOf("e+")&&(n=+e))),n}},{}],287:[function(e,t,n){"use strict";var r=e("@plotly/d3"),y=e("d3-time-format").utcFormat,a=e("d3-format").format,i=e("fast-isnumeric"),o=e("../constants/numerical"),s=o.FP_SAFE,l=-s,c=o.BADNUM,v=t.exports={adjustFormat:function(e){return!e||/^\d[.]\df/.test(e)||/[.]\d%/.test(e)?e:"0.f"===e?"~f":/^\d%/.test(e)?"~%":/^\ds/.test(e)?"~s":!/^[~,.0$]/.test(e)&&/[&fps]/.test(e)?"~"+e:e}},u={},o=(v.warnBadFormat=function(e){e=String(e);u[e]||(u[e]=1,v.warn('encountered bad format: "'+e+'"'))},v.noFormat=function(e){return String(e)},v.numberFormat=function(t){var e;try{e=a(v.adjustFormat(t))}catch(e){return v.warnBadFormat(t),v.noFormat}return e},v.nestedProperty=e("./nested_property"),v.keyedContainer=e("./keyed_container"),v.relativeAttr=e("./relative_attr"),v.isPlainObject=e("./is_plain_object"),v.toLogRange=e("./to_log_range"),v.relinkPrivateKeys=e("./relink_private"),e("./array")),t=(v.isTypedArray=o.isTypedArray,v.isArrayOrTypedArray=o.isArrayOrTypedArray,v.isArray1D=o.isArray1D,v.ensureArray=o.ensureArray,v.concat=o.concat,v.maxRowLength=o.maxRowLength,v.minRowLength=o.minRowLength,e("./mod")),o=(v.mod=t.mod,v.modHalf=t.modHalf,e("./coerce")),t=(v.valObjectMeta=o.valObjectMeta,v.coerce=o.coerce,v.coerce2=o.coerce2,v.coerceFont=o.coerceFont,v.coercePattern=o.coercePattern,v.coerceHoverinfo=o.coerceHoverinfo,v.coerceSelectionMarkerOpacity=o.coerceSelectionMarkerOpacity,v.validate=o.validate,e("./dates")),o=(v.dateTime2ms=t.dateTime2ms,v.isDateTime=t.isDateTime,v.ms2DateTime=t.ms2DateTime,v.ms2DateTimeLocal=t.ms2DateTimeLocal,v.cleanDate=t.cleanDate,v.isJSDate=t.isJSDate,v.formatDate=t.formatDate,v.incrementMonth=t.incrementMonth,v.dateTick0=t.dateTick0,v.dfltRange=t.dfltRange,v.findExactDates=t.findExactDates,v.MIN_MS=t.MIN_MS,v.MAX_MS=t.MAX_MS,e("./search")),t=(v.findBin=o.findBin,v.sorterAsc=o.sorterAsc,v.sorterDes=o.sorterDes,v.distinctVals=o.distinctVals,v.roundUp=o.roundUp,v.sort=o.sort,v.findIndexOfMin=o.findIndexOfMin,v.sortObjectKeys=e("./sort_object_keys"),e("./stats")),o=(v.aggNums=t.aggNums,v.len=t.len,v.mean=t.mean,v.median=t.median,v.midRange=t.midRange,v.variance=t.variance,v.stdev=t.stdev,v.interp=t.interp,e("./matrix")),t=(v.init2dArray=o.init2dArray,v.transposeRagged=o.transposeRagged,v.dot=o.dot,v.translationMatrix=o.translationMatrix,v.rotationMatrix=o.rotationMatrix,v.rotationXYMatrix=o.rotationXYMatrix,v.apply3DTransform=o.apply3DTransform,v.apply2DTransform=o.apply2DTransform,v.apply2DTransform2=o.apply2DTransform2,v.convertCssMatrix=o.convertCssMatrix,v.inverseTransformMatrix=o.inverseTransformMatrix,e("./angles")),o=(v.deg2rad=t.deg2rad,v.rad2deg=t.rad2deg,v.angleDelta=t.angleDelta,v.angleDist=t.angleDist,v.isFullCircle=t.isFullCircle,v.isAngleInsideSector=t.isAngleInsideSector,v.isPtInsideSector=t.isPtInsideSector,v.pathArc=t.pathArc,v.pathSector=t.pathSector,v.pathAnnulus=t.pathAnnulus,e("./anchor_utils")),t=(v.isLeftAnchor=o.isLeftAnchor,v.isCenterAnchor=o.isCenterAnchor,v.isRightAnchor=o.isRightAnchor,v.isTopAnchor=o.isTopAnchor,v.isMiddleAnchor=o.isMiddleAnchor,v.isBottomAnchor=o.isBottomAnchor,e("./geometry2d")),o=(v.segmentsIntersect=t.segmentsIntersect,v.segmentDistance=t.segmentDistance,v.getTextLocation=t.getTextLocation,v.clearLocationCache=t.clearLocationCache,v.getVisibleSegment=t.getVisibleSegment,v.findPointOnPath=t.findPointOnPath,e("./extend")),t=(v.extendFlat=o.extendFlat,v.extendDeep=o.extendDeep,v.extendDeepAll=o.extendDeepAll,v.extendDeepNoArrays=o.extendDeepNoArrays,e("./loggers")),o=(v.log=t.log,v.warn=t.warn,v.error=t.error,e("./regex")),t=(v.counterRegex=o.counter,e("./throttle")),o=(v.throttle=t.throttle,v.throttleDone=t.done,v.clearThrottle=t.clear,e("./dom"));function d(e){var t,n={};for(t in e)for(var r=e[t],a=0;a<r.length;a++)n[r[a]]=+t;return n}v.getGraphDiv=o.getGraphDiv,v.isPlotDiv=o.isPlotDiv,v.removeElement=o.removeElement,v.addStyleRule=o.addStyleRule,v.addRelatedStyleRule=o.addRelatedStyleRule,v.deleteRelatedStyleRule=o.deleteRelatedStyleRule,v.getFullTransformMatrix=o.getFullTransformMatrix,v.getElementTransformMatrix=o.getElementTransformMatrix,v.getElementAndAncestors=o.getElementAndAncestors,v.equalDomRects=o.equalDomRects,v.clearResponsive=e("./clear_responsive"),v.preserveDrawingBuffer=e("./preserve_drawing_buffer"),v.makeTraceGroups=e("./make_trace_groups"),v._=e("./localize"),v.notifier=e("./notifier"),v.filterUnique=e("./filter_unique"),v.filterVisible=e("./filter_visible"),v.pushUnique=e("./push_unique"),v.increment=e("./increment"),v.cleanNumber=e("./clean_number"),v.ensureNumber=function(e){return i(e)?(e=Number(e),s<e||e<l?c:e):c},v.isIndex=function(e,t){return!(void 0!==t&&t<=e)&&(i(e)&&0<=e&&e%1==0)},v.noop=e("./noop"),v.identity=e("./identity"),v.repeat=function(e,t){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n},v.swapAttrs=function(e,t,n,r){n=n||"x",r=r||"y";for(var a=0;a<t.length;a++){var i=t[a],o=v.nestedProperty(e,i.replace("?",n)),i=v.nestedProperty(e,i.replace("?",r)),s=o.get();o.set(i.get()),i.set(s)}},v.raiseToTop=function(e){e.parentNode.appendChild(e)},v.cancelTransition=function(e){return e.transition().duration(0)},v.constrain=function(e,t,n){return n<t?Math.max(n,Math.min(t,e)):Math.max(t,Math.min(n,e))},v.bBoxIntersect=function(e,t,n){return e.left<=t.right+(n=n||0)&&t.left<=e.right+n&&e.top<=t.bottom+n&&t.top<=e.bottom+n},v.simpleMap=function(e,t,n,r,a){for(var i=e.length,o=new Array(i),s=0;s<i;s++)o[s]=t(e[s],n,r,a);return o},v.randstr=function e(t,n,r,a){if(r=r||16,(n=void 0===n?24:n)<=0)return"0";for(var i=Math.log(Math.pow(2,n))/Math.log(r),o="",s=2;i===1/0;s*=2)i=Math.log(Math.pow(2,n/s))/Math.log(r)*s;var l=i-Math.floor(i);for(s=0;s<Math.floor(i);s++)o=Math.floor(Math.random()*r).toString(r)+o;l&&(l=Math.pow(r,l),o=Math.floor(Math.random()*l).toString(r)+o);l=parseInt(o,r);return t&&t[o]||l!==1/0&&l>=Math.pow(2,n)?10<a?(v.warn("randstr failed uniqueness"),o):e(t,n,r,(a||0)+1):o},v.OptionControl=function(t,n){t=t||{};var r={optionList:[],_newoption:function(e){e[n]=t,r[e.name]=e,r.optionList.push(e)}};return r["_"+(n=n||"opt")]=t,r},v.smooth=function(e,t){if((t=Math.round(t)||0)<2)return e;for(var n,r,a,i=e.length,o=2*i,s=2*t-1,l=new Array(s),c=new Array(i),u=0;u<s;u++)l[u]=(1-Math.cos(Math.PI*(u+1)/t))/(2*t);for(u=0;u<i;u++){for(n=a=0;n<s;n++)(r=u+n+1-t)<-i?r-=o*Math.round(r/o):o<=r&&(r-=o*Math.floor(r/o)),r<0?r=-1-r:i<=r&&(r=o-1-r),a+=e[r]*l[n];c[u]=a}return c},v.syncOrAsync=function(e,t,n){var r;function a(){return v.syncOrAsync(e,t,n)}for(;e.length;)if((r=(0,e.splice(0,1)[0])(t))&&r.then)return r.then(a);return n&&n(t)},v.stripTrailingSlash=function(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e},v.noneOrAll=function(e,t,n){if(e){for(var r=!1,a=!0,i=0;i<n.length;i++)null!=e[n[i]]?r=!0:a=!1;if(r&&!a)for(i=0;i<n.length;i++)e[n[i]]=t[n[i]]}},v.mergeArray=function(e,t,n,r){var a="function"==typeof r;if(v.isArrayOrTypedArray(e))for(var i=Math.min(e.length,t.length),o=0;o<i;o++){var s=e[o];t[o][n]=a?r(s):s}},v.mergeArrayCastPositive=function(e,t,n){return v.mergeArray(e,t,n,function(e){e=+e;return isFinite(e)&&0<e?e:0})},v.fillArray=function(e,t,n,r){if(r=r||v.identity,v.isArrayOrTypedArray(e))for(var a=0;a<t.length;a++)t[a][n]=r(e[a])},v.castOption=function(e,t,n,r){r=r||v.identity;e=v.nestedProperty(e,n).get();return v.isArrayOrTypedArray(e)?Array.isArray(t)&&v.isArrayOrTypedArray(e[t[0]])?r(e[t[0]][t[1]]):r(e[t]):e},v.extractOption=function(e,t,n,r){if(n in e)return e[n];e=v.nestedProperty(t,r).get();return Array.isArray(e)?void 0:e},v.tagSelected=function(e,t,n){var r,a=t.selectedpoints,t=t._indexToPoints;t&&(r=d(t));for(var i,o=0;o<a.length;o++){var s=a[o];(v.isIndex(s)||v.isArrayOrTypedArray(s)&&v.isIndex(s[0])&&v.isIndex(s[1]))&&(s=r?r[s]:s,s=n?n[s]:s,void 0!==(i=s)&&i<e.length&&(e[s].selected=1))}},v.selIndices2selPoints=function(e){var t=e.selectedpoints,e=e._indexToPoints;if(e){for(var n=d(e),r=[],a=0;a<t.length;a++){var i=t[a];v.isIndex(i)&&(i=n[i],v.isIndex(i)&&r.push(i))}return r}return t},v.getTargetArray=function(e,t){t=t.target;return"string"==typeof t&&t?(e=v.nestedProperty(e,t).get(),!!Array.isArray(e)&&e):!!Array.isArray(t)&&t},v.minExtend=function(e,t){for(var n,r,a={},i=("object"!=typeof t&&(t={}),Object.keys(e)),o=0;o<i.length;o++)r=e[n=i[o]],"_"!==n.charAt(0)&&"function"!=typeof r&&("module"===n?a[n]=r:Array.isArray(r)?a[n]="colorscale"===n?r.slice():r.slice(0,3):v.isTypedArray(r)?a[n]=r.subarray(0,3):a[n]=r&&"object"==typeof r?v.minExtend(e[n],t[n]):r);for(i=Object.keys(t),o=0;o<i.length;o++)"object"==typeof(r=t[n=i[o]])&&n in a&&"object"==typeof a[n]||(a[n]=r);return a},v.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},v.containsAny=function(e,t){for(var n=0;n<t.length;n++)if(-1!==e.indexOf(t[n]))return!0;return!1},v.isIE=function(){return void 0!==window.navigator.msSaveBlob};var f=/Version\/[\d\.]+.*Safari/,p=(v.isSafari=function(){return f.test(window.navigator.userAgent)},/iPad|iPhone|iPod/),h=(v.isIOS=function(){return p.test(window.navigator.userAgent)},/Firefox\/(\d+)\.\d+/),m=(v.getFirefoxVersion=function(){var e=h.exec(window.navigator.userAgent);if(e&&2===e.length){e=parseInt(e[1]);if(!isNaN(e))return e}return null},v.isD3Selection=function(e){return e instanceof r.selection},v.ensureSingle=function(e,t,n,r){var a=e.select(t+(n?"."+n:""));if(a.size())return a;a=e.append(t);return n&&a.classed(n,!0),r&&a.call(r),a},v.ensureSingleById=function(e,t,n,r){var a=e.select(t+"#"+n);if(a.size())return a;a=e.append(t).attr("id",n);return r&&a.call(r),a},v.objectFromPath=function(e,t){for(var n=e.split("."),e=o={},r=0;r<n.length;r++)var a=n[r],i=n[r].match(/(.*)\[([0-9]+)\]/),o=i?(a=i[1],i=i[2],o=o[a]=[],r===n.length-1?o[i]=t:o[i]={},o[i]):(r===n.length-1?o[a]=t:o[a]={},o[a]);return e},/^([^\[\.]+)\.(.+)?/),g=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/,b=(v.expandObjectPaths=function(e){var t,n,r,a,i,o;if("object"==typeof e&&!Array.isArray(e))for(t in e)e.hasOwnProperty(t)&&((o=t.match(m))?(r=e[t],n=o[1],delete e[t],e[n]=v.extendDeepNoArrays(e[n]||{},v.objectFromPath(t,v.expandObjectPaths(r))[n])):(o=t.match(g))?(r=e[t],n=o[1],a=parseInt(o[2]),delete e[t],e[n]=e[n]||[],"."===o[3]?(o=o[4],i=e[n][a]=e[n][a]||{},v.extendDeepNoArrays(i,v.objectFromPath(o,v.expandObjectPaths(r)))):e[n][a]=v.expandObjectPaths(r)):e[t]=v.expandObjectPaths(e[t]));return e},v.numSeparate=function(e,t,n){if(n=n||!1,"string"!=typeof t||0===t.length)throw new Error("Separator string required for formatting!");"number"==typeof e&&(e=String(e));var r=/(\d+)(\d{3})/,a=t.charAt(0),i=t.charAt(1),t=e.split("."),o=t[0],e=1<t.length?a+t[1]:"";if(i&&(1<t.length||4<o.length||n))for(;r.test(o);)o=o.replace(r,"$1"+i+"$2");return o+e},v.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g,/^\w*$/),x=(v.templateString=function(e,n){var r={};return e.replace(v.TEMPLATE_STRING_REGEX,function(e,t){t=b.test(t)?n[t]:(r[t]=r[t]||v.nestedProperty(n,t).get,r[t]());return v.isValidTextValue(t)?t:""})},{max:10,count:0,name:"hovertemplate"}),_=(v.hovertemplateString=function(){return T.apply(x,arguments)},{max:10,count:0,name:"texttemplate"}),w=(v.texttemplateString=function(){return T.apply(_,arguments)},/^[:|\|]/);function T(e,f,p){var h=this,m=arguments,g=(f=f||{},{});return e.replace(v.TEMPLATE_STRING_REGEX,function(e,t,n){var r,a,i="_xother"===t||"_yother"===t,o="_xother_"===t||"_yother_"===t,s="xother_"===t||"yother_"===t,l="xother"===t||"yother"===t||i||s||o,c=t;if((i||o)&&(c=c.substring(1)),(s||o)&&(c=c.substring(0,c.length-1)),l){if(void 0===(a=f[c]))return""}else for(var u,d=3;d<m.length;d++)if(u=m[d]){if(u.hasOwnProperty(c)){a=u[c];break}if(b.test(c)||(a=v.nestedProperty(u,c).get(),(a=g[c]||v.nestedProperty(u,c).get())&&(g[c]=a)),void 0!==a)break}return void 0===a&&h?(h.count<h.max&&(v.warn("Variable '"+c+"' in "+h.name+" could not be found!"),a=e),h.count===h.max&&v.warn("Too many "+h.name+" warnings - additional warnings will be suppressed"),h.count++,e):(n?(":"===n[0]&&(a=(r=(p||v).numberFormat)(n.replace(w,""))(a)),"|"===n[0]&&(r=p?p.timeFormat:y,t=v.dateTime2ms(a),a=v.formatDate(t,n.replace(w,""),!1,r))):f.hasOwnProperty(e=c+"Label")&&(a=f[e]),l&&(a="("+a+")",(i||o)&&(a=" "+a),(s||o)&&(a+=" ")),a)})}v.subplotSort=function(e,t){for(var n=Math.min(e.length,t.length)+1,r=0,a=0,i=0;i<n;i++){var o=e.charCodeAt(i)||0,s=t.charCodeAt(i)||0,l=48<=o&&o<=57,c=48<=s&&s<=57;if(l&&(r=10*r+o-48),c&&(a=10*a+s-48),!l||!c){if(r!==a)return r-a;if(o!==s)return o-s}}return a-r};var k=2e9,t=(v.seedPseudoRandom=function(){k=2e9},v.pseudoRandom=function(){var e=k;return k=(69069*k+1)%4294967296,Math.abs(k-e)<429496729?v.pseudoRandom():k/4294967296},v.fillText=function(e,t,n){var r=Array.isArray(n)?function(e){n.push(e)}:function(e){n.text=e},a=v.extractOption(e,t,"htx","hovertext");if(v.isValidTextValue(a))return r(a);a=v.extractOption(e,t,"tx","text");return v.isValidTextValue(a)?r(a):void 0},v.isValidTextValue=function(e){return e||0===e},v.formatPercent=function(e,t){t=t||0;for(var n=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%",r=0;r<t;r++)-1!==n.indexOf(".")&&(n=(n=n.replace("0%","%")).replace(".%","%"));return n},v.isHidden=function(e){e=window.getComputedStyle(e).display;return!e||"none"===e},v.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""},v.strRotate=function(e){return e?"rotate("+e+")":""},v.strScale=function(e){return 1!==e?"scale("+e+")":""},v.getTextTransform=function(e){var t=e.noCenter,n=e.textX,r=e.textY,a=e.targetX,i=e.targetY,o=e.anchorX||0,s=e.anchorY||0,l=e.rotate,e=e.scale;return e?1<e&&(e=1):e=0,v.strTranslate(a-e*(n+o),i-e*(r+s))+v.strScale(e)+(l?"rotate("+l+(t?"":" "+n+" "+r)+")":"")},v.ensureUniformFontSize=function(e,t){var n=v.extendFlat({},t);return n.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0),n},v.join2=function(e,t,n){var r=e.length;return 1<r?e.slice(0,-1).join(t)+n+e[r-1]:e.join(t)},v.bigFont=function(e){return Math.round(1.2*e)},v.getFirefoxVersion()),A=null!==t&&t<86;v.getPositionFromD3Event=function(){return A?[r.event.layerX,r.event.layerY]:[r.event.offsetX,r.event.offsetY]}},{"../constants/numerical":267,"./anchor_utils":271,"./angles":272,"./array":273,"./clean_number":274,"./clear_responsive":276,"./coerce":277,"./dates":278,"./dom":279,"./extend":281,"./filter_unique":282,"./filter_visible":283,"./geometry2d":284,"./identity":285,"./increment":286,"./is_plain_object":288,"./keyed_container":289,"./localize":290,"./loggers":291,"./make_trace_groups":292,"./matrix":293,"./mod":294,"./nested_property":295,"./noop":296,"./notifier":297,"./preserve_drawing_buffer":300,"./push_unique":301,"./regex":303,"./relative_attr":304,"./relink_private":305,"./search":306,"./sort_object_keys":308,"./stats":309,"./throttle":311,"./to_log_range":312,"@plotly/d3":20,"d3-format":29,"d3-time-format":30,"fast-isnumeric":33}],288:[function(e,t,n){"use strict";t.exports=function(e){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(e):"[object Object]"===Object.prototype.toString.call(e)&&Object.getPrototypeOf(e).hasOwnProperty("hasOwnProperty")}},{}],289:[function(e,t,n){"use strict";var h=e("./nested_property"),a=/^\w*$/;t.exports=function(e,i,o,s){o=o||"name",s=s||"value";var r,l,c={},u=i&&i.length?(l=h(e,i)).get():e,d=(i=i||"",{});if(u)for(r=0;r<u.length;r++)d[u[r][o]]=r;var f=a.test(s),p={set:function(e,t){var n=null===t?4:0;if(!u){if(!l||4===n)return;u=[],l.set(u)}var r=d[e];if(void 0===r){if(4===n)return;n|=3,r=u.length,d[e]=r}else t!==(f?u[r][s]:h(u[r],s).get())&&(n|=2);var a=u[r]=u[r]||{};return a[o]=e,f?a[s]=t:h(a,s).set(t),null!==t&&(n&=-5),c[r]=c[r]|n,p},get:function(e){if(u)return e=d[e],void 0!==e?f?u[e][s]:h(u[e],s).get():void 0},rename:function(e,t){var n=d[e];return void 0!==n&&(c[n]=1|c[n],d[t]=n,delete d[e],u[n][o]=t),p},remove:function(e){var t=d[e];if(void 0!==t){var n=u[t];if(2<Object.keys(n).length)return c[t]=2|c[t],p.set(e,null);if(f){for(r=t;r<u.length;r++)c[r]=3|c[r];for(r=t;r<u.length;r++)d[u[r][o]]--;u.splice(t,1),delete d[e]}else h(n,s).set(null),c[t]=6|c[t]}return p},constructUpdate:function(){for(var e,t,n={},r=Object.keys(c),a=0;a<r.length;a++)t=r[a],e=i+"["+t+"]",u[t]?(1&c[t]&&(n[e+"."+o]=u[t][o]),2&c[t]&&(n[e+"."+s]=f?4&c[t]?null:u[t][s]:4&c[t]?null:h(u[t],s).get())):n[e]=null;return n}};return p}},{"./nested_property":295}],290:[function(e,t,n){"use strict";var l=e("../registry");t.exports=function(e,t){for(var n=e._context.locale,r=0;r<2;r++){for(var a=e._context.locales,i=0;i<2;i++){var o=(a[n]||{}).dictionary;if(o){o=o[t];if(o)return o}a=l.localeRegistry}var s=n.split("-")[0];if(s===n)break;n=s}return t}},{"../registry":378}],291:[function(e,t,n){"use strict";var r=e("../plot_api/plot_config").dfltConfig,a=e("./notifier");t.exports={log:function(){if(1<r.logging){for(var e=["LOG:"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.trace.apply(console,e)}if(1<r.notifyOnLogging){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);a(n.join("<br>"),"long")}},warn:function(){if(0<r.logging){for(var e=["WARN:"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.trace.apply(console,e)}if(0<r.notifyOnLogging){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);a(n.join("<br>"),"stick")}},error:function(){if(0<r.logging){for(var e=["ERROR:"],t=0;t<arguments.length;t++)e.push(arguments[t]);console.error.apply(console,e)}if(0<r.notifyOnLogging){var n=[];for(t=0;t<arguments.length;t++)n.push(arguments[t]);a(n.join("<br>"),"stick")}}}},{"../plot_api/plot_config":321,"./notifier":297}],292:[function(e,t,n){"use strict";var a=e("@plotly/d3");t.exports=function(e,t,n){var t=e.selectAll("g."+n.replace(/\s/g,".")).data(t,function(e){return e[0].trace.uid}),r=(t.exit().remove(),t.enter().append("g").attr("class",n),t.order(),e.classed("rangeplot")?"nodeRangePlot3":"node3");return t.each(function(e){e[0][r]=a.select(this)}),t}},{"@plotly/d3":20}],293:[function(e,t,o){"use strict";var n=e("gl-mat4");o.init2dArray=function(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=new Array(t);return n},o.transposeRagged=function(e){for(var t,n=0,r=e.length,a=0;a<r;a++)n=Math.max(n,e[a].length);var i=new Array(n);for(a=0;a<n;a++)for(i[a]=new Array(r),t=0;t<r;t++)i[a][t]=e[t][a];return i},o.dot=function(e,t){if(!e.length||!t.length||e.length!==t.length)return null;var n=e.length;if(e[0].length)for(a=new Array(n),i=0;i<n;i++)a[i]=o.dot(e[i],t);else if(t[0].length)for(var r=o.transposeRagged(t),a=new Array(r.length),i=0;i<r.length;i++)a[i]=o.dot(e,r[i]);else for(i=a=0;i<n;i++)a+=e[i]*t[i];return a},o.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},o.rotationMatrix=function(e){e=e*Math.PI/180;return[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]]},o.rotationXYMatrix=function(e,t,n){return o.dot(o.dot(o.translationMatrix(t,n),o.rotationMatrix(e)),o.translationMatrix(-t,-n))},o.apply3DTransform=function(t){return function(){var e=arguments,e=1===arguments.length?e[0]:[e[0],e[1],e[2]||0];return o.dot(t,[e[0],e[1],e[2],1]).slice(0,3)}},o.apply2DTransform=function(t){return function(){var e=arguments,e=(3===e.length&&(e=e[0]),1===arguments.length?e[0]:[e[0],e[1]]);return o.dot(t,[e[0],e[1],1]).slice(0,2)}},o.apply2DTransform2=function(e){var t=o.apply2DTransform(e);return function(e){return t(e.slice(0,2)).concat(t(e.slice(2,4)))}},o.convertCssMatrix=function(e){if(e){var t=e.length;if(16===t)return e;if(6===t)return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},o.inverseTransformMatrix=function(e){var t=[];return n.invert(t,e),[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}},{"gl-mat4":49}],294:[function(e,t,n){"use strict";t.exports={mod:function(e,t){return(e%=t)<0?e+t:e},modHalf:function(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}}},{}],295:[function(e,t,n){"use strict";var u=e("fast-isnumeric"),d=e("./array").isArrayOrTypedArray;t.exports=function(e,t){if(u(t))t=String(t);else if("string"!=typeof t||"[-1]"===t.substr(t.length-4))throw"bad property string";for(var n,r,a,i=0,o=t.split(".");i<o.length;){if(n=String(o[i]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])o[i]=n[1];else{if(0!==i)throw"bad property string";o.splice(0,1)}for(r=n[2].substr(1,n[2].length-2).split("]["),a=0;a<r.length;a++)i++,o.splice(i,0,Number(r[a]))}i++}return"object"!=typeof e?{set:function(){throw"bad container"},get:function(){},astr:t,parts:o,obj:e}:{set:p(e,o,t),get:function o(s,l){return function(){var e,t,n,r,a,i=s;for(r=0;r<l.length-1;r++){if(-1===(e=l[r])){for(t=!0,n=[],a=0;a<i.length;a++)n[a]=o(i[a],l.slice(r+1))(),n[a]!==n[0]&&(t=!1);return t?n[0]:n}if("number"==typeof e&&!d(i))return;if("object"!=typeof(i=i[e])||null===i)return}if("object"==typeof i&&null!==i&&null!==(n=i[l[r]]))return n}}(e,o),astr:t,parts:o,obj:e}};var r=/(^|\.)args\[/;function f(e,t){return void 0===e||null===e&&!t.match(r)}function p(s,l,c){return function(e){for(var t,n=s,r="",a=[[s,r]],i=f(e,c),o=0;o<l.length-1;o++){if("number"==typeof(t=l[o])&&!d(n))throw"array index but container is not an array";if(-1===t){if(i=!function(e,t,n,r){var a,i=d(n),o=!0,s=n,l=r.replace("-1",0),c=!i&&f(n,l),u=t[0];for(a=0;a<e.length;a++)l=r.replace("-1",a),i&&(s=n[a%n.length],c=f(s,l)),c&&(o=!1),h(e,a,u,c)&&p(e[a],t,r.replace("-1",a))(s);return o}(n,l.slice(o+1),e,c))break;return}if(!h(n,t,l[o+1],i))break;if("object"!=typeof(n=n[t])||null===n)throw"container is not an object";r=function(e,t){var n=t;u(t)?n="["+t+"]":e&&(n="."+t);return e+n}(r,t),a.push([n,r])}if(i){if(o===l.length-1&&(delete n[l[o]],Array.isArray(n)&&+l[o]==n.length-1))for(;n.length&&void 0===n[n.length-1];)n.pop()}else n[l[o]]=e}}function h(e,t,n,r){if(void 0===e[t]){if(r)return;e[t]="number"==typeof n?[]:{}}return 1}},{"./array":273,"fast-isnumeric":33}],296:[function(e,t,n){"use strict";t.exports=function(){}},{}],297:[function(e,t,n){"use strict";var l=e("@plotly/d3"),r=e("fast-isnumeric"),a=[];t.exports=function(e,i){var o;function s(e){e.duration(700).style("opacity",0).each("end",function(e){e=a.indexOf(e);-1!==e&&a.splice(e,1),l.select(this).remove()})}-1===a.indexOf(e)&&(a.push(e),o=1e3,r(i)?o=i:"long"===i&&(o=3e3),(e=l.select("body").selectAll(".plotly-notifier").data([0])).enter().append("div").classed("plotly-notifier",!0),e.selectAll(".notifier-note").data(a).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(e){for(var t=l.select(this),n=(t.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){t.transition().call(s)}),t.append("p")),r=e.split(/<br\s*\/?>/g),a=0;a<r.length;a++)a&&n.append("br"),n.append("span").text(r[a]);"stick"===i?t.transition().duration(350).style("opacity",1):t.transition().duration(700).style("opacity",1).transition().delay(o).call(s)}))}},{"@plotly/d3":20,"fast-isnumeric":33}],298:[function(e,t,n){"use strict";var o=e("./setcursor"),s="data-savedcursor";t.exports=function(e,t){var n=e.attr(s);if(t){if(!n){for(var r=(e.attr("class")||"").split(" "),a=0;a<r.length;a++){var i=r[a];0===i.indexOf("cursor-")&&e.attr(s,i.substr(7)).classed(i,!1)}e.attr(s)||e.attr(s,"!!")}o(e,t)}else n&&(e.attr(s,null),"!!"===n?o(e):o(e,n))}},{"./setcursor":307}],299:[function(e,t,n){"use strict";var f=e("./matrix").dot,y=e("../constants/numerical").BADNUM,c=t.exports={};c.tester=function(e){var f=e.slice(),p=f[0][0],h=p,m=f[0][1],g=m;for(f.push(f[0]),r=1;r<f.length;r++)p=Math.min(p,f[r][0]),h=Math.max(h,f[r][0]),m=Math.min(m,f[r][1]),g=Math.max(g,f[r][1]);var a,e=!1;5===f.length&&(f[0][0]===f[1][0]?f[2][0]===f[3][0]&&f[0][1]===f[3][1]&&f[1][1]===f[2][1]&&(e=!0,a=function(e){return e[0]===f[0][0]}):f[0][1]===f[1][1]&&f[2][1]===f[3][1]&&f[0][0]===f[3][0]&&f[1][0]===f[2][0]&&(e=!0,a=function(e){return e[1]===f[0][1]}));for(var t=!0,n=f[0],r=1;r<f.length;r++)if(n[0]!==f[r][0]||n[1]!==f[r][1]){t=!1;break}return{xmin:p,xmax:h,ymin:m,ymax:g,pts:f,contains:e?function(e,t){var n=e[0],r=e[1];return!(n===y||n<p||h<n||r===y||r<m||g<r)&&(!t||!a(e))}:function(e,t){var n=e[0],r=e[1];if(n===y||n<p||h<n||r===y||r<m||g<r)return!1;for(var a,i,o,s=f.length,l=f[0][0],c=f[0][1],u=0,d=1;d<s;d++)if(a=l,o=c,l=f[d][0],c=f[d][1],!(n<(i=Math.min(a,l))||n>Math.max(a,l)||r>Math.max(o,c)))if(r<Math.min(o,c))n!==i&&u++;else{if(r===(o=l===a?r:o+(n-a)*(c-o)/(l-a)))return 1!==d||!t;r<=o&&n!==i&&u++}return u%2==1},isRect:e,degenerate:t}},c.isSegmentBent=function(e,t,n,r){for(var a,i,o=e[t],s=[e[n][0]-o[0],e[n][1]-o[1]],l=f(s,s),c=Math.sqrt(l),u=[-s[1]/c,s[0]/c],d=t+1;d<n;d++)if(a=[e[d][0]-o[0],e[d][1]-o[1]],(i=f(a,s))<0||l<i||Math.abs(f(a,u))>r)return!0;return!1},c.filter=function(a,i){var o=[a[0]],s=0,l=0;function e(e){a.push(e);var t=o.length,n=s;o.splice(l+1);for(var r=n+1;r<a.length;r++)r!==a.length-1&&!c.isSegmentBent(a,n,r+1,i)||(o.push(a[r]),o.length<t-2&&(s=r,l=o.length-1),n=r)}return 1<a.length&&e(a.pop()),{addPt:e,raw:a,filtered:o}}},{"../constants/numerical":267,"./matrix":293}],300:[function(e,t,n){"use strict";var o=e("fast-isnumeric"),s=e("is-mobile");t.exports=function(e){e=e&&e.hasOwnProperty("userAgent")?e.userAgent:function(){var e;"undefined"!=typeof navigator&&(e=navigator.userAgent);e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]);return e}();if("string"!=typeof e)return!0;var t=s({ua:{headers:{"user-agent":e}},tablet:!0,featureDetect:!1});if(!t)for(var n=e.split(" "),r=1;r<n.length;r++)if(-1!==n[r].indexOf("Safari"))for(var a=r-1;-1<a;a--){var i=n[a];if("Version/"===i.substr(0,8)){i=i.substr(8).split(".")[0];if(13<=(i=o(i)?+i:i))return!0}}return t}},{"fast-isnumeric":33,"is-mobile":69}],301:[function(e,t,n){"use strict";t.exports=function(e,t){if(t instanceof RegExp){for(var n=t.toString(),r=0;r<e.length;r++)if(e[r]instanceof RegExp&&e[r].toString()===n)return e;e.push(t)}else!t&&0!==t||-1!==e.indexOf(t)||e.push(t);return e}},{}],302:[function(e,t,n){"use strict";var i=e("../lib"),s=e("../plot_api/plot_config").dfltConfig;var r={add:function(e,t,n,r,a){var i,o;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},o=e.undoQueue.index,e.autoplay?e.undoQueue.inSequence||(e.autoplay=!1):(!e.undoQueue.sequence||e.undoQueue.beginSequence?(e.undoQueue.queue.splice(o,e.undoQueue.queue.length-o,i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),e.undoQueue.index+=1):i=e.undoQueue.queue[o-1],e.undoQueue.beginSequence=!1,i&&(i.undo.calls.unshift(t),i.undo.args.unshift(n),i.redo.calls.push(r),i.redo.args.push(a)),e.undoQueue.queue.length>s.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--))},startSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},stopSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},undo:function(e){var t,n;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index<=0)){for(e.undoQueue.index--,t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.undo.calls.length;n++)r.plotDo(e,t.undo.calls[n],t.undo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1}},redo:function(e){var t,n;if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index>=e.undoQueue.queue.length)){for(t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.redo.calls.length;n++)r.plotDo(e,t.redo.calls[n],t.redo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1,e.undoQueue.index++}}};r.plotDo=function(e,t,n){e.autoplay=!0,n=function(e,t){for(var n,r=[],a=0;a<t.length;a++)n=t[a],r[a]=n!==e&&"object"==typeof n?Array.isArray(n)?i.extendDeep([],n):i.extendDeepAll({},n):n;return r}(e,n),t.apply(null,n)},t.exports=r},{"../lib":287,"../plot_api/plot_config":321}],303:[function(e,t,n){"use strict";n.counter=function(e,t,n,r){t=(t||"")+(n?"":"$"),n=!1===r?"":"^";return"xy"===e?new RegExp(n+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+t):new RegExp(n+e+"([2-9]|[1-9][0-9]+)?"+t)}},{}],304:[function(e,t,n){"use strict";var r=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,a=/^[^\.\[\]]+$/;t.exports=function(e,t){for(;t;){var n=e.match(r);if(n)e=n[1];else{if(!e.match(a))throw new Error("bad relativeAttr call:"+[e,t]);e=""}if("^"!==t.charAt(0))break;t=t.slice(1)}return e&&"["!==t.charAt(0)?e+"."+t:e+t}},{}],305:[function(e,t,n){"use strict";var l=e("./array").isArrayOrTypedArray,c=e("./is_plain_object");t.exports=function e(t,n){for(var r in n){var a=n[r],i=t[r];if(i!==a)if("_"===r.charAt(0)||"function"==typeof a)r in t||(t[r]=a);else if(l(a)&&l(i)&&c(a[0])){if("customdata"!==r&&"ids"!==r)for(var o=Math.min(a.length,i.length),s=0;s<o;s++)i[s]!==a[s]&&c(a[s])&&c(i[s])&&e(i[s],a[s])}else c(a)&&c(i)&&(e(i,a),Object.keys(i).length||delete t[r])}}},{"./array":273,"./is_plain_object":288}],306:[function(e,t,u){"use strict";var c=e("fast-isnumeric"),d=e("./loggers"),o=e("./identity"),f=e("../constants/numerical").BADNUM;function p(e,t){return e<t}function h(e,t){return e<=t}function m(e,t){return t<e}function g(e,t){return t<=e}u.findBin=function(e,t,n){if(c(t.start))return n?Math.ceil((e-t.start)/t.size-1e-9)-1:Math.floor((e-t.start)/t.size+1e-9);var r,a=0,i=t.length,o=0,s=1<i?(t[i-1]-t[0])/(i-1):1,l=0<=s?n?p:h:n?g:m;for(e+=1e-9*s*(n?-1:1)*(0<=s?1:-1);a<i&&o++<100;)l(t[r=Math.floor((a+i)/2)],e)?a=r+1:i=r;return 90<o&&d.log("Long binary search..."),a-1},u.sorterAsc=function(e,t){return e-t},u.sorterDes=function(e,t){return t-e},u.distinctVals=function(e){var t,n=e.slice();for(n.sort(u.sorterAsc),t=n.length-1;-1<t&&n[t]===f;t--);for(var r,a=n[t]-n[0]||1,i=a/(t||1)/1e4,o=[],s=0;s<=t;s++){var l=n[s],c=l-r;void 0===r?(o.push(l),r=l):i<c&&(a=Math.min(a,c),o.push(l),r=l)}return{vals:o,minDiff:a}},u.roundUp=function(e,t,n){for(var r,a=0,i=t.length-1,o=0,s=n?0:1,l=n?1:0,c=n?Math.ceil:Math.floor;a<i&&o++<100;)t[r=c((a+i)/2)]<=e?a=r+s:i=r-l;return t[a]},u.sort=function(e,t){for(var n=0,r=0,a=1;a<e.length;a++){var i=t(e[a],e[a-1]);if(i<0?n=1:0<i&&(r=1),n&&r)return e.sort(t)}return r?e:e.reverse()},u.findIndexOfMin=function(e,t){t=t||o;for(var n,r=1/0,a=0;a<e.length;a++){var i=t(e[a]);i<r&&(r=i,n=a)}return n}},{"../constants/numerical":267,"./identity":285,"./loggers":291,"fast-isnumeric":33}],307:[function(e,t,n){"use strict";t.exports=function(t,e){(t.attr("class")||"").split(" ").forEach(function(e){0===e.indexOf("cursor-")&&t.classed(e,!1)}),e&&t.classed("cursor-"+e,!0)}},{}],308:[function(e,t,n){"use strict";t.exports=function(e){return Object.keys(e).sort()}},{}],309:[function(e,t,o){"use strict";var s=e("fast-isnumeric"),l=e("./array").isArrayOrTypedArray;o.aggNums=function(e,t,n,r){var a,i;if((!r||r>n.length)&&(r=n.length),s(t)||(t=!1),l(n[0])){for(i=new Array(r),a=0;a<r;a++)i[a]=o.aggNums(e,t,n[a]);n=i}for(a=0;a<r;a++)s(t)?s(n[a])&&(t=e(+t,+n[a])):t=n[a];return t},o.len=function(e){return o.aggNums(function(e){return e+1},0,e)},o.mean=function(e,t){return t=t||o.len(e),o.aggNums(function(e,t){return e+t},0,e)/t},o.midRange=function(e){if(void 0!==e&&0!==e.length)return(o.aggNums(Math.max,null,e)+o.aggNums(Math.min,null,e))/2},o.variance=function(e,t,n){return t=t||o.len(e),s(n)||(n=o.mean(e,t)),o.aggNums(function(e,t){return e+Math.pow(t-n,2)},0,e)/t},o.stdev=function(e,t,n){return Math.sqrt(o.variance(e,t,n))},o.median=function(e){e=e.slice().sort();return o.interp(e,.5)},o.interp=function(e,t){if(!s(t))throw"n should be a finite number";if((t=t*e.length-.5)<0)return e[0];if(t>e.length-1)return e[e.length-1];var n=t%1;return n*e[Math.ceil(t)]+(1-n)*e[Math.floor(t)]}},{"./array":273,"fast-isnumeric":33}],310:[function(e,t,n){"use strict";var g=e("@plotly/d3"),y=e("../lib"),v=y.strTranslate,b=e("../constants/xmlns_namespaces"),x=e("../constants/alignment").LINE_SPACING,r=/([^$]*)([$]+[^$]*[$]+)([^$]*)/,_=(n.convertToTspans=function(c,e,u){var d,f=c.text(),p=!c.attr("data-notex")&&"undefined"!=typeof MathJax&&f.match(r),h=g.select(c.node().parentNode);if(!h.empty())return d=c.attr("class")?c.attr("class").split(" ")[0]:"text",d+="-math",h.selectAll("svg."+d).remove(),h.selectAll("g."+d+"-group").remove(),c.style("display",null).attr({"data-unformatted":f,"data-math":"N"}),p?(e&&e._promises||[]).push(new Promise(function(s){c.style("display","none");var n,t,r,a,e,i,o,l=parseInt(c.node().style.fontSize,10);n=p[2],t={fontSize:l},r=function(e,t,n){h.selectAll("svg."+d).remove(),h.selectAll("g."+d+"-group").remove();e=e&&e.select("svg");if(!e||!e.node())return m(),void s();var r=h.append("g").classed(d+"-group",!0).attr({"pointer-events":"none","data-unformatted":f,"data-math":"Y"}),t=(r.node().appendChild(e.node()),t&&t.node()&&e.node().insertBefore(t.node().cloneNode(!0),e.node().firstChild),n.width),n=n.height,a=(e.attr({class:d,height:n,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"}),c.node().style.fill||"black"),i=e.select("g"),a=(i.attr({fill:a,stroke:a}),i.node().getBoundingClientRect()),i=a.width,o=a.height,t=((t<i||n<o)&&(e.style("overflow","hidden"),i=(a=e.node().getBoundingClientRect()).width,o=a.height),+c.attr("x")),n=+c.attr("y"),a=-(l||c.node().getBoundingClientRect().height)/4;"y"===d[0]?r.attr({transform:"rotate("+[-90,t,n]+")"+v(-i/2,a-o/2)}):n="l"===d[0]?a-o/2:"a"===d[0]&&0!==d.indexOf("atitle")?(t=0,a):(t-=i*("middle"===(i=c.attr("text-anchor"))?.5:"end"===i?1:0),n+a-o/2),e.attr({x:t,y:n}),u&&u.call(c,r),s(r)},MathJax.Hub.Queue(function(){return e=y.extendDeepAll({},MathJax.Hub.config),i=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if("SVG"!==(a=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},function(){var e="math-output-"+y.randstr({},64);return o=g.select("body").append("div").attr({id:e}).style({visibility:"hidden",position:"absolute"}).style({"font-size":t.fontSize+"px"}).text(n.replace(_,"\\lt ").replace(w,"\\gt ")),MathJax.Hub.Typeset(o.node())},function(){var e,t=g.select("body").select("#MathJax_SVG_glyphs");if(o.select(".MathJax_SVG").empty()||!o.select("svg").node()?(y.log("There was an error in the tex syntax.",n),r()):(e=o.select("svg").node().getBoundingClientRect(),r(o.select(".MathJax_SVG"),t,e)),o.remove(),"SVG"!==a)return MathJax.Hub.setRenderer(a)},function(){return void 0!==i&&(MathJax.Hub.processSectionDelay=i),MathJax.Hub.Config(e)})})):m(),c;function m(){h.empty()||(d=c.attr("class")+"-math",h.select("svg."+d).remove()),c.text("").style("white-space","pre"),function(r,n){n=n.replace(E," ");var s,e=!1,l=[],a=-1;function t(){a++;var e=document.createElementNS(b.svg,"tspan"),t=(g.select(e).attr({class:"line",dy:a*x+"em"}),r.appendChild(e),l);if(l=[{node:s=e}],1<t.length)for(var n=1;n<t.length;n++)i(t[n])}function i(e){var t,n,r,a=e.type,i={},o=("a"===a?(t="a",o=e.target,r=e.href,n=e.popup,r&&(i={"xlink:xlink:show":"_blank"===o||"_"!==o.charAt(0)?"new":"replace",target:o,"xlink:xlink:href":r},n&&(i.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+n+'");return false;'))):t="tspan",e.style&&(i.style=e.style),document.createElementNS(b.svg,t));"sup"===a||"sub"===a?(c(s,M),s.appendChild(o),c(r=document.createElementNS(b.svg,"tspan"),M),g.select(r).attr("dy",A[a]),i.dy=k[a],s.appendChild(o),s.appendChild(r)):s.appendChild(o),g.select(o).attr(i),s=e.node=o,l.push(e)}function c(e,t){e.appendChild(document.createTextNode(t))}C.test(n)?t():l=[{node:s=r}];for(var o=n.split(S),u=0;u<o.length;u++){var d,f=o[u],p=f.match(L),h=p&&p[2].toLowerCase(),m=T[h];"br"===h?t():void 0===m?c(s,F(f)):p[1]?function(e){var t;1===l.length?y.log("Ignoring unexpected end tag </"+e+">.",n):(e!==(t=l.pop()).type&&y.log("Start tag <"+t.type+"> doesnt match end tag <"+e+">. Pretending it did match.",n),s=l[l.length-1].node)}(h):(f=p[4],p={type:h},(d=P(f,O))?(d=d.replace(N,"$1 fill:"),m&&(d+=";"+m)):m&&(d=m),d&&(p.style=d),"a"===h&&(e=!0,(m=P(f,D))&&(d=z(m))&&(p.href=d,p.target=P(f,I)||"_blank",p.popup=P(f,R))),i(p))}return e}(c.node(),f)&&c.style("pointer-events","all"),n.positionText(c),u&&u.call(c)}},/(<|&lt;|&#60;)/g),w=/(>|&gt;|&#62;)/g;var T={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},k={sub:"0.3em",sup:"-0.6em"},A={sub:"-0.21em",sup:"0.42em"},M="",a=["http:","https:","mailto:","",void 0,":"],E=n.NEWLINES=/(\r\n?|\n)/g,S=/(<[^<>]*>)/,L=/<(\/?)([^ >]*)(\s+(.*))?>/i,C=/<br(\s+.*)?>/i,O=(n.BR_TAG_ALL=/<br(\s+.*)?>/gi,/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i),D=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,I=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,R=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function P(e,t){if(!e)return null;e=e.match(t),t=e&&(e[3]||e[4]);return t&&F(t)}var N=/(^|;)\s*color:/,i=(n.plainText=function(e,t){for(var n=void 0!==(t=t||{}).len&&-1!==t.len?t.len:1/0,r=void 0!==t.allowedTags?t.allowedTags:["br"],a="...".length,i=e.split(S),o=[],s="",l=0,c=0;c<i.length;c++){var u=i[c],d=u.match(L),d=d&&d[2].toLowerCase();if(d)-1!==r.indexOf(d)&&(o.push(u),s=d);else{d=u.length;if(l+d<n)o.push(u),l+=d;else if(l<n){var f=n-l;s&&("br"!==s||f<=a||d<=a)&&o.pop(),a<n?o.push(u.substr(0,f-a)+"..."):o.push(u.substr(0,f));break}s=""}}return o.join("")},{mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""}),o=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function F(e){return e.replace(o,function(e,t){t="#"===t.charAt(0)?function(e){if(!(1114111<e)){var t=String.fromCodePoint;if(t)return t(e);t=String.fromCharCode;return e<=65535?t(e):t(55232+(e>>10),e%1024+56320)}}("x"===t.charAt(1)?parseInt(t.substr(2),16):parseInt(t.substr(1),10)):i[t];return t||e})}function z(e){var t=encodeURI(decodeURI(e)),n=document.createElement("a"),r=document.createElement("a"),e=(n.href=e,r.href=t,n.protocol),n=r.protocol;return-1!==a.indexOf(e)&&-1!==a.indexOf(n)?t:""}function d(e,t,r){var a,n=r.horizontalAlign,i=r.verticalAlign||"top",o=e.node().getBoundingClientRect(),s=t.node().getBoundingClientRect(),l="bottom"===i?function(){return o.bottom-a.height}:"middle"===i?function(){return o.top+(o.height-a.height)/2}:function(){return o.top},c="right"===n?function(){return o.right-a.width}:"center"===n?function(){return o.left+(o.width-a.width)/2}:function(){return o.left};return function(){a=this.node().getBoundingClientRect();var e=c()-s.left,t=l()-s.top,n=r.gd||{};return r.gd&&(n._fullLayout._calcInverseTransform(n),e=(n=y.apply3DTransform(n._fullLayout._invTransform)(e,t))[0],t=n[1]),this.style({top:t+"px",left:e+"px","z-index":1e3}),this}}n.convertEntities=F,n.sanitizeHTML=function(e){e=e.replace(E," ");for(var t=document.createElement("p"),n=t,r=[],a=e.split(S),i=0;i<a.length;i++){var o,s,l=a[i],c=l.match(L),u=c&&c[2].toLowerCase();u in T?c[1]?r.length&&(n=r.pop()):(o=(o=P(c=c[4],O))?{style:o}:{},"a"===u&&(s=P(c,D))&&(s=z(s))&&(o.href=s,(s=P(c,I))&&(o.target=s)),c=document.createElement(u),n.appendChild(c),g.select(c).attr(o),r.push(n=c)):n.appendChild(document.createTextNode(F(l)))}return t.innerHTML},n.lineCount=function(e){return e.selectAll("tspan.line").size()||1},n.positionText=function(e,a,i){return e.each(function(){var n=g.select(this);function e(e,t){return void 0===t?null===(t=n.attr(e))&&(n.attr(e,0),t=0):n.attr(e,t),t}var t=e("x",a),r=e("y",i);"text"===this.nodeName&&n.selectAll("tspan.line").attr({x:t,y:r})})};n.makeTextShadow=function(e){var t="1px ",n="1px ",r="1px ";return t+n+r+e+", -"+t+"-"+n+r+e+", "+t+"-"+n+r+e+", -"+t+n+r+e},n.makeEditable=function(i,o){var s=o.gd,e=o.delegate,l=g.dispatch("edit","input","cancel"),c=e||i;if(i.style({"pointer-events":e?"none":"all"}),1!==i.size())throw new Error("boo");function t(){var e=g.select(s).select(".svg-container"),t=e.append("div"),n=i.node().style,r=parseFloat(n.fontSize||12),a=o.text,n=(void 0===a&&(a=i.attr("data-unformatted")),t.classed("plugin-editable editable",!0).style({position:"absolute","font-family":n.fontFamily||"Arial","font-size":r,color:o.fill||n.fill||"black",opacity:1,"background-color":o.background||"transparent",outline:"#ffffff33 1px solid",margin:[-r/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(a).call(d(i,e,o)).on("blur",function(){s._editing=!1,i.text(this.textContent).style({opacity:1});var e=g.select(this).attr("class"),e=e?"."+e.split(" ")[0]+"-math-group":"[class*=-math-group]",e=(e&&g.select(i.node().parentNode).select(e).style({opacity:0}),this.textContent);g.select(this).transition().duration(0).remove(),g.select(document).on("mouseup",null),l.edit.call(i,e)}).on("focus",function(){var e=this;s._editing=!0,g.select(document).on("mouseup",function(){if(g.event.target===e)return!1;document.activeElement===t.node()&&t.node().blur()})}).on("keyup",function(){27===g.event.which?(s._editing=!1,i.style({opacity:1}),g.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),l.cancel.call(i,this.textContent)):(l.input.call(i,this.textContent),g.select(this).call(d(i,e,o)))}).on("keydown",function(){13===g.event.which&&this.blur()}).call(u),i.style({opacity:0}),c.attr("class")),r=n?"."+n.split(" ")[0]+"-math-group":"[class*=-math-group]";r&&g.select(i.node().parentNode).select(r).style({opacity:0})}function u(e){var e=e.node(),t=document.createRange(),n=(t.selectNodeContents(e),window.getSelection());n.removeAllRanges(),n.addRange(t),e.focus()}return o.immediate?t():c.on("click",t),g.rebind(i,l,"on")}},{"../constants/alignment":262,"../constants/xmlns_namespaces":268,"../lib":287,"@plotly/d3":20}],311:[function(e,t,n){"use strict";var s={};function l(e){e&&null!==e.timer&&(clearTimeout(e.timer),e.timer=null)}n.throttle=function(e,t,n){var r=s[e],a=Date.now();if(!r){for(var i in s)s[i].ts<a-6e4&&delete s[i];r=s[e]={ts:0,timer:null}}function o(){n(),r.ts=Date.now(),r.onDone&&(r.onDone(),r.onDone=null)}l(r),a>r.ts+t?o():r.timer=setTimeout(function(){o(),r.timer=null},t)},n.done=function(e){var n=s[e];return n&&n.timer?new Promise(function(e){var t=n.onDone;n.onDone=function(){t&&t(),e(),n.onDone=null}}):Promise.resolve()},n.clear=function(e){if(e)l(s[e]),delete s[e];else for(var t in s)n.clear(t)}},{}],312:[function(e,t,n){"use strict";var r=e("fast-isnumeric");t.exports=function(e,t){if(0<e)return Math.log(e)/Math.LN10;e=Math.log(Math.min(t[0],t[1]))/Math.LN10;return e=r(e)?e:Math.log(Math.max(t[0],t[1]))/Math.LN10-6}},{"fast-isnumeric":33}],313:[function(e,t,n){"use strict";t.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],314:[function(e,t,n){"use strict";t.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],315:[function(e,t,n){"use strict";var s=e("../registry");t.exports=function(e){for(var t,n,r=s.layoutArrayContainers,a=s.layoutArrayRegexes,i=e.split("[")[0],o=0;o<a.length;o++)if((n=e.match(a[o]))&&0===n.index){t=n[0];break}if(!(t=t||r[r.indexOf(i)]))return!1;r=e.substr(t.length);return r?!!(n=r.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:t,index:Number(n[1]),property:n[3]||""}:{array:t,index:"",property:""}}},{"../registry":378}],316:[function(e,t,n){"use strict";var e=e("../lib"),s=e.extendFlat,o=e.isPlainObject,e={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},r={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},a=e.flags.slice().concat(["fullReplot"]),i=r.flags.slice().concat("layoutReplot");function l(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!1;return t}function c(e,t,n){var r,a=s({},e);for(r in a){var i=a[r];o(i)&&(a[r]=function e(t,n,r,a){{if(t.valType){var i=s({},t);if(i.editType=n,Array.isArray(t.items)){i.items=new Array(t.items.length);for(var o=0;o<t.items.length;o++)i.items[o]=e(t.items[o],n,"from-root")}return i}return c(t,n,"_"===a.charAt(0)?"nested":"from-root")}}(i,t,0,r))}return"from-root"===n&&(a.editType=t),a}t.exports={traces:e,layout:r,traceFlags:function(){return l(a)},layoutFlags:function(){return l(i)},update:function(e,t){t=t.editType;if(t&&"none"!==t)for(var n=t.split("+"),r=0;r<n.length;r++)e[n[r]]=!0},overrideAll:c}},{"../lib":287}],317:[function(e,t,T){"use strict";var l=e("fast-isnumeric"),k=e("gl-mat4/fromQuat"),g=e("../registry"),A=e("../lib"),M=e("../plots/plots"),n=e("../plots/cartesian/axis_ids"),E=e("../components/color"),S=n.cleanId,c=n.getFromTrace,y=g.traceIs;function L(e,t){var n=e[t],r=t.charAt(0);n&&"paper"!==n&&(e[t]=S(n,r,!0))}function C(a){function e(e,t){var n=a[e],r=a.title&&a.title[t];n&&!r&&(a.title||(a.title={}),a.title[t]=a[e],delete a[e])}a&&("string"!=typeof a.title&&"number"!=typeof a.title||(a.title={text:a.title}),e("titlefont","font"),e("titleposition","position"),e("titleside","side"),e("titleoffset","offset"))}function v(e){if(!A.isPlainObject(e))return!1;var t=e.name;return delete e.name,delete e.showlegend,("string"==typeof t||"number"==typeof t)&&String(t)}function b(e){var t="middle",n="center";return"string"==typeof e&&(-1!==e.indexOf("top")?t="top":-1!==e.indexOf("bottom")&&(t="bottom"),-1!==e.indexOf("left")?n="left":-1!==e.indexOf("right")&&(n="right")),t+" "+n}function O(e,t){return t in e&&"object"==typeof e[t]&&0===Object.keys(e[t]).length}T.clearPromiseQueue=function(e){Array.isArray(e._promises)&&0<e._promises.length&&A.log("Clearing previous rejected promises from queue."),e._promises=[]},T.cleanLayout=function(e){(e=e||{}).xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);for(var t=(M.subplotsRegistry.cartesian||{}).attrRegex,n=(M.subplotsRegistry.polar||{}).attrRegex,r=(M.subplotsRegistry.ternary||{}).attrRegex,a=(M.subplotsRegistry.gl3d||{}).attrRegex,i=Object.keys(e),o=0;o<i.length;o++){var s=i[o];if(t&&t.test(s)){var l=e[s];l.anchor&&"free"!==l.anchor&&(l.anchor=S(l.anchor)),l.overlaying&&(l.overlaying=S(l.overlaying)),l.type||(l.isdate?l.type="date":l.islog?l.type="log":!1===l.isdate&&!1===l.islog&&(l.type="linear")),"withzero"!==l.autorange&&"tozero"!==l.autorange||(l.autorange=!0,l.rangemode="tozero"),delete l.islog,delete l.isdate,delete l.categories,O(l,"domain")&&delete l.domain,void 0!==l.autotick&&(void 0===l.tickmode&&(l.tickmode=l.autotick?"auto":"linear"),delete l.autotick),C(l)}else if(n&&n.test(s))C(e[s].radialaxis);else if(r&&r.test(s)){l=e[s];C(l.aaxis),C(l.baxis),C(l.caxis)}else if(a&&a.test(s)){var s=e[s],c=s.cameraposition;if(Array.isArray(c)&&4===c[0].length){for(var u=c[0],d=c[1],f=c[2],p=k([],u),h=[],m=0;m<3;++m)h[m]=d[m]+f*p[2+4*m];s.camera={eye:{x:h[0],y:h[1],z:h[2]},center:{x:d[0],y:d[1],z:d[2]},up:{x:0,y:0,z:1}},delete s.cameraposition}C(s.xaxis),C(s.yaxis),C(s.zaxis)}}var g=Array.isArray(e.annotations)?e.annotations.length:0;for(o=0;o<g;o++){var y=e.annotations[o];A.isPlainObject(y)&&(y.ref&&("paper"===y.ref?(y.xref="paper",y.yref="paper"):"data"===y.ref&&(y.xref="x",y.yref="y"),delete y.ref),L(y,"xref"),L(y,"yref"))}var v=Array.isArray(e.shapes)?e.shapes.length:0;for(o=0;o<v;o++){var b=e.shapes[o];A.isPlainObject(b)&&(L(b,"xref"),L(b,"yref"))}var x=Array.isArray(e.images)?e.images.length:0;for(o=0;o<x;o++){var _=e.images[o];A.isPlainObject(_)&&(L(_,"xref"),L(_,"yref"))}var w=e.legend;return w&&(3<w.x?(w.x=1.02,w.xanchor="left"):w.x<-2&&(w.x=-.02,w.xanchor="right"),3<w.y?(w.y=1.02,w.yanchor="bottom"):w.y<-2&&(w.y=-.02,w.yanchor="top")),C(e),"rotate"===e.dragmode&&(e.dragmode="orbit"),E.clean(e),e.template&&e.template.layout&&T.cleanLayout(e.template.layout),e},T.cleanData=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("histogramy"===n.type&&"xbins"in n&&!("ybins"in n)&&(n.ybins=n.xbins,delete n.xbins),n.error_y&&"opacity"in n.error_y&&(s=E.defaults,s=n.error_y.color||(y(n,"bar")?E.defaultLine:s[t%s.length]),n.error_y.color=E.addOpacity(E.rgb(s),E.opacity(s)*n.error_y.opacity),delete n.error_y.opacity),"bardir"in n&&("h"!==n.bardir||!y(n,"bar")&&"histogram"!==n.type.substr(0,9)||(n.orientation="h",T.swapXYData(n)),delete n.bardir),"histogramy"===n.type&&T.swapXYData(n),"histogramx"!==n.type&&"histogramy"!==n.type||(n.type="histogram"),"scl"in n&&!("colorscale"in n)&&(n.colorscale=n.scl,delete n.scl),"reversescl"in n&&!("reversescale"in n)&&(n.reversescale=n.reversescl,delete n.reversescl),n.xaxis&&(n.xaxis=S(n.xaxis,"x")),n.yaxis&&(n.yaxis=S(n.yaxis,"y")),y(n,"gl3d")&&n.scene&&(n.scene=M.subplotsRegistry.gl3d.cleanId(n.scene)),!y(n,"pie-like")&&!y(n,"bar-like"))if(Array.isArray(n.textposition))for(c=0;c<n.textposition.length;c++)n.textposition[c]=b(n.textposition[c]);else n.textposition&&(n.textposition=b(n.textposition));var r,a,i,o,s=g.getModule(n);if(s&&s.colorbar&&((r=(r=s.colorbar.container)?n[r]:n)&&r.colorscale&&("YIGnBu"===r.colorscale&&(r.colorscale="YlGnBu"),"YIOrRd"===r.colorscale&&(r.colorscale="YlOrRd"))),"surface"===n.type&&A.isPlainObject(n.contours))for(var l=["x","y","z"],c=0;c<l.length;c++){var u=n.contours[l[c]];A.isPlainObject(u)&&(u.highlightColor&&(u.highlightcolor=u.highlightColor,delete u.highlightColor),u.highlightWidth&&(u.highlightwidth=u.highlightWidth,delete u.highlightWidth))}if("candlestick"!==n.type&&"ohlc"!==n.type||(r=!1!==(n.increasing||{}).showlegend,o=!1!==(n.decreasing||{}).showlegend,a=v(n.increasing),i=v(n.decreasing),!1!==a&&!1!==i?(o=function(e,t,n,r){if(n&&!r)return e;if(r&&!n)return t;if(!e.trim())return t;if(!t.trim())return e;var a,i=Math.min(e.length,t.length);for(a=0;a<i&&e.charAt(a)===t.charAt(a);a++);return e.substr(0,a).trim()}(a,i,r,o))&&(n.name=o):!a&&!i||n.name||(n.name=a||i)),Array.isArray(n.transforms)){var d=n.transforms;for(c=0;c<d.length;c++){var f=d[c];if(A.isPlainObject(f))switch(f.type){case"filter":f.filtersrc&&(f.target=f.filtersrc,delete f.filtersrc),f.calendar&&(f.valuecalendar||(f.valuecalendar=f.calendar),delete f.calendar);break;case"groupby":if(f.styles=f.styles||f.style,f.styles&&!Array.isArray(f.styles)){var p=f.styles,h=Object.keys(p);f.styles=[];for(var m=0;m<h.length;m++)f.styles.push({target:h[m],value:p[h[m]]})}}}}O(n,"line")&&delete n.line,"marker"in n&&(O(n.marker,"line")&&delete n.marker.line,O(n,"marker")&&delete n.marker),E.clean(n),n.autobinx&&(delete n.autobinx,delete n.xbins),n.autobiny&&(delete n.autobiny,delete n.ybins),C(n),n.colorbar&&C(n.colorbar),n.marker&&n.marker.colorbar&&C(n.marker.colorbar),n.line&&n.line.colorbar&&C(n.line.colorbar),n.aaxis&&C(n.aaxis),n.baxis&&C(n.baxis)}},T.swapXYData=function(e){var t;if(A.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y&&(t="copy_ystyle"in(t=e.error_y)?t.copy_ystyle:!(t.color||t.thickness||t.width),A.swapAttrs(e,["error_?.copy_ystyle"]),t&&A.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])),"string"==typeof e.hoverinfo){for(var n=e.hoverinfo.split("+"),r=0;r<n.length;r++)"x"===n[r]?n[r]="y":"y"===n[r]&&(n[r]="x");e.hoverinfo=n.join("+")}},T.coerceTraceIndices=function(e,t){if(l(t))return[t];if(!Array.isArray(t)||!t.length)return e.data.map(function(e,t){return t});if(Array.isArray(t)){for(var n=[],r=0;r<t.length;r++)A.isIndex(t[r],e.data.length)?n.push(t[r]):A.warn("trace index (",t[r],") is not a number or is out of bounds");return n}return t},T.manageArrayContainers=function(e,t,n){var r=e.obj,a=e.parts,i=a.length,o=a[i-1],s=l(o);s&&null===t?(a=a.slice(0,i-1).join("."),A.nestedProperty(r,a).get().splice(o,1)):(s&&void 0===e.get()&&void 0===e.get()&&(n[e.astr]=null),e.set(t))};var r=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function a(e){var t=e.search(r);if(0<t)return e.substr(0,t)}T.hasParent=function(e,t){for(var n=a(t);n;){if(n in e)return!0;n=a(n)}return!1};var u=["x","y","z"];T.clearAxisTypes=function(e,t,n){for(var r=0;r<t.length;r++)for(var a=e._fullData[r],i=0;i<3;i++){var o=c(e,a,u[i]);if(o&&"log"!==o.type){var s=o._name,o=o._id.substr(1);if("scene"===o.substr(0,5)){if(void 0!==n[o])continue;s=o+"."+s}o=s+".type";void 0===n[s]&&void 0===n[o]&&A.nestedProperty(e.layout,o).set(null)}}}},{"../components/color":157,"../lib":287,"../plots/cartesian/axis_ids":338,"../plots/plots":371,"../registry":378,"fast-isnumeric":33,"gl-mat4/fromQuat":39}],318:[function(e,t,n){"use strict";var r=e("./plot_api"),r=(n._doPlot=r._doPlot,n.newPlot=r.newPlot,n.restyle=r.restyle,n.relayout=r.relayout,n.redraw=r.redraw,n.update=r.update,n._guiRestyle=r._guiRestyle,n._guiRelayout=r._guiRelayout,n._guiUpdate=r._guiUpdate,n._storeDirectGUIEdit=r._storeDirectGUIEdit,n.react=r.react,n.extendTraces=r.extendTraces,n.prependTraces=r.prependTraces,n.addTraces=r.addTraces,n.deleteTraces=r.deleteTraces,n.moveTraces=r.moveTraces,n.purge=r.purge,n.addFrames=r.addFrames,n.deleteFrames=r.deleteFrames,n.animate=r.animate,n.setPlotConfig=r.setPlotConfig,n.toImage=e("./to_image"),n.validate=e("./validate"),n.downloadImage=e("../snapshot/download"),e("./template_api"));n.makeTemplate=r.makeTemplate,n.validateTemplate=r.validateTemplate},{"../snapshot/download":380,"./plot_api":320,"./template_api":325,"./to_image":326,"./validate":327}],319:[function(e,t,n){"use strict";var r=e("../lib/is_plain_object"),M=e("../lib/noop"),E=e("../lib/loggers"),S=e("../lib/search").sorterAsc,L=e("../registry"),C=(n.containerArrayMatch=e("./container_array_match"),n.isAddVal=function(e){return"add"===e||r(e)}),O=n.isRemoveVal=function(e){return null===e||"remove"===e};n.applyContainerArrayChanges=function(e,t,n,r,a){var i=t.astr,o=L.getComponentMethod(i,"supplyLayoutDefaults"),s=L.getComponentMethod(i,"draw"),l=L.getComponentMethod(i,"drawOne"),r=r.replot||r.recalc||o===M||s===M,c=e.layout,u=e._fullLayout;if(n[""]){1<Object.keys(n).length&&E.warn("Full array edits are incompatible with other edits",i);var d=n[""][""];if(O(d))t.set(null);else{if(!Array.isArray(d))return E.warn("Unrecognized full array edit value",i,d),!0;t.set(d)}return r?!1:(o(c,u),s(e),!0)}for(var f,p,h,m,g,y,v,b=Object.keys(n).map(Number).sort(S),d=t.get(),x=d||[],_=a(u,i).get(),w=[],T=-1,k=x.length,A=0;A<b.length;A++)if(h=n[p=b[A]],m=Object.keys(h),g=h[""],y=C(g),p<0||p>x.length-(y?0:1))E.warn("index out of range",i,p);else if(void 0!==g)1<m.length&&E.warn("Insertion & removal are incompatible with edits to the same index.",i,p),O(g)?w.push(p):y?(x.splice(p,0,g="add"===g?{}:g),_&&_.splice(p,0,{})):E.warn("Unrecognized full object edit value",i,p,g),-1===T&&(T=p);else for(f=0;f<m.length;f++)a(x[p],m[f],i+"["+p+"].").set(h[m[f]]);for(A=w.length-1;0<=A;A--)x.splice(w[A],1),_&&_.splice(w[A],1);if(x.length?d||t.set(x):t.set(null),r)return!1;if(o(c,u),l!==M){if(-1===T)v=b;else{for(k=Math.max(x.length,k),v=[],A=0;A<b.length&&!(T<=(p=b[A]));A++)v.push(p);for(A=T;A<k;A++)v.push(A)}for(A=0;A<v.length;A++)l(e,v[A])}else s(e);return!0}},{"../lib/is_plain_object":288,"../lib/loggers":291,"../lib/noop":296,"../lib/search":306,"../registry":378,"./container_array_match":315}],320:[function(e,n,k){"use strict";var m=e("@plotly/d3"),C=e("fast-isnumeric"),p=e("has-hover"),j=e("../lib"),q=j.nestedProperty,g=e("../lib/events"),_=e("../lib/queue"),H=e("../registry"),B=e("./plot_schema"),z=e("../plots/plots"),U=e("../plots/cartesian/axes"),y=e("../components/drawing"),r=e("../components/color"),O=e("../plots/cartesian/graph_interact").initInteractions,D=e("../constants/xmlns_namespaces"),a=e("../plots/cartesian/select").clearSelect,u=e("./plot_config").dfltConfig,V=e("./manage_arrays"),Y=e("./helpers"),A=e("./subroutines"),$=e("./edit_types"),Z=e("../plots/cartesian/constants").AX_NAME_PATTERN,w=0;function M(e){var t=e._fullLayout;t._redrawFromAutoMarginCount?t._redrawFromAutoMarginCount--:e.emit("plotly_afterplot")}function d(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){j.error(e)}}function h(e,t){d(e,r.combine(t,"white"))}function E(e,t){e._context||(e._context=j.extendDeep({},u),o=m.select("base"),e._context._baseUrl=o.size()&&o.attr("href")?window.location.href.split("#")[0]:"");var n,r,a=e._context;if(t){for(n=Object.keys(t),c=0;c<n.length;c++)"editable"!==(r=n[c])&&"edits"!==r&&r in a&&("setBackground"===r&&"opaque"===t[r]?a[r]=h:a[r]=t[r]);t.plot3dPixelRatio&&!a.plotGlPixelRatio&&(a.plotGlPixelRatio=a.plot3dPixelRatio);var i=t.editable;if(void 0!==i)for(a.editable=i,n=Object.keys(a.edits),c=0;c<n.length;c++)a.edits[n[c]]=i;if(t.edits)for(n=Object.keys(t.edits),c=0;c<n.length;c++)(r=n[c])in a.edits&&(a.edits[r]=t.edits[r]);a._exportedPlot=t._exportedPlot}a.staticPlot&&(a.editable=!1,a.edits={},a.autosizable=!1,a.scrollZoom=!1,a.doubleClick=!1,a.showTips=!1,a.showLink=!1,a.displayModeBar=!1),"hover"!==a.displayModeBar||p||(a.displayModeBar=!0),"transparent"!==a.setBackground&&"function"==typeof a.setBackground||(a.setBackground=d),a._hasZeroHeight=a._hasZeroHeight||0===e.clientHeight,a._hasZeroWidth=a._hasZeroWidth||0===e.clientWidth;var o=a.scrollZoom,s=a._scrollZoom={};if(!0===o)s.cartesian=1,s.gl3d=1,s.geo=1,s.mapbox=1;else if("string"==typeof o)for(var l=o.split("+"),c=0;c<l.length;c++)s[l[c]]=1;else!1!==o&&(s.gl3d=1,s.geo=1,s.mapbox=1)}function v(e,t){for(var n,r=t+1,a=[],i=0;i<e.length;i++)(n=e[i])<0?a.push(r+n):a.push(n);return a}function b(e,t,n){for(var r,a=0;a<t.length;a++){if((r=t[a])!==parseInt(r,10))throw new Error("all values in "+n+" must be integers");if(r>=e.data.length||r<-e.data.length)throw new Error(n+" must be valid indices for gd.data.");if(-1<t.indexOf(r,a+1)||0<=r&&-1<t.indexOf(-e.data.length+r)||r<0&&-1<t.indexOf(e.data.length+r))throw new Error("each index in "+n+" must be unique.")}}function x(e,t,n){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(void 0===t)throw new Error("currentIndices is a required argument.");if(b(e,t=Array.isArray(t)?t:[t],"currentIndices"),void 0!==(n=void 0===n||Array.isArray(n)?n:[n])&&b(e,n,"newIndices"),void 0!==n&&t.length!==n.length)throw new Error("current and new indices must be of equal length.")}function i(e,t,n,r,a){var i,o=e,s=t,l=n,c=r,u=j.isPlainObject(c);if(!Array.isArray(o.data))throw new Error("gd.data must be an array");if(!j.isPlainObject(s))throw new Error("update must be a key:value object");if(void 0===l)throw new Error("indices must be an integer or array of integers");for(i in b(o,l,"indices"),s){if(!Array.isArray(s[i])||s[i].length!==l.length)throw new Error("attribute "+i+" must be an array of length equal to indices array length");if(u&&(!(i in c)||!Array.isArray(c[i])||c[i].length!==s[i].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}for(var d=function(e,t,n,r){var a,i,o,s,l,c=j.isPlainObject(r),u=[];for(l in n=v(n=Array.isArray(n)?n:[n],e.data.length-1),t)for(var d=0;d<n.length;d++){if(i=e.data[n[d]],a=(i=q(i,l)).get(),o=t[l][d],!j.isArrayOrTypedArray(o))throw new Error("attribute: "+l+" index: "+d+" must be an array");if(!j.isArrayOrTypedArray(a))throw new Error("cannot extend missing or non-array attribute: "+l);if(a.constructor!==o.constructor)throw new Error("cannot extend array with an array of a different type: "+l);s=c?r[l][d]:r,C(s)||(s=-1),u.push({prop:i,target:a,insert:o,maxp:Math.floor(s)})}return u}(e,t,n,r),f={},p={},h=0;h<d.length;h++){var m=d[h].prop,g=d[h].maxp,g=a(d[h].target,d[h].insert,g);m.set(g[0]),Array.isArray(f[m.astr])||(f[m.astr]=[]),f[m.astr].push(g[1]),Array.isArray(p[m.astr])||(p[m.astr]=[]),p[m.astr].push(d[h].target.length)}return{update:f,maxPoints:p}}function s(e,t){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}function o(e,t,n,r){e=j.getGraphDiv(e),Y.clearPromiseQueue(e);var a={};if("string"==typeof t)a[t]=n;else{if(!j.isPlainObject(t))return j.warn("Restyle fail.",t,n,r),Promise.reject();a=j.extendFlat({},t),void 0===r&&(r=n)}Object.keys(a).length&&(e.changed=!0);var t=Y.coerceTraceIndices(e,r),i=l(e,a,t),n=i.flags,r=(n.calc&&(e.calcdata=void 0),n.clearAxisTypes&&Y.clearAxisTypes(e,t,{}),[]),a=(n.fullReplot?r.push(k._doPlot):(r.push(z.previousPromises),z.supplyDefaults(e),n.markerSize&&(z.doCalcdata(e),S(r)),n.style&&r.push(A.doTraceStyle),n.colorbars&&r.push(A.doColorBars),r.push(M)),r.push(z.rehover,z.redrag),_.add(e,o,[e,i.undoit,i.traces],o,[e,i.redoit,i.traces]),j.syncOrAsync(r,e));return(a=a&&a.then?a:Promise.resolve()).then(function(){return e.emit("plotly_restyle",i.eventData),e})}function G(e){return void 0===e?null:e}function W(i,e){return e?function(e,t,n){var r=q(e,t),a=r.set;return r.set=function(e){f((n||"")+t,r.get(),e,i),a(e)},r}:q}function f(e,t,n,r){if(Array.isArray(t)||Array.isArray(n))for(var a=Array.isArray(t)?t:[],i=Array.isArray(n)?n:[],o=Math.max(a.length,i.length),s=0;s<o;s++)f(e+"["+s+"]",a[s],i[s],r);else if(j.isPlainObject(t)||j.isPlainObject(n)){var l,c=j.isPlainObject(t)?t:{},u=j.isPlainObject(n)?n:{};for(l in j.extendFlat({},c,u))f(e+"."+l,c[l],u[l],r)}else void 0===r[e]&&(r[e]=G(t))}function l(a,i,o){var e,t,n,s=a._fullLayout,r=a._fullData,l=a.data,c=s._guiEditing,u=W(s._preGUI,c),d=j.extendDeepAll({},i),f=(X(i),$.traceFlags()),p={},h={};function m(){return o.map(function(){})}function g(e){e=U.id2name(e);-1===t.indexOf(e)&&t.push(e)}function N(e){return"LAYOUT"+e+".autorange"}function F(e){return"LAYOUT"+e+".range"}function y(e){for(var t=e;t<r.length;t++)if(r[t]._input===l[e])return r[t]}function v(e,t,n){var r;Array.isArray(e)?e.forEach(function(e){v(e,t,n)}):e in i||Y.hasParent(i,e)||(r="LAYOUT"===e.substr(0,6)?u(a.layout,e.replace("LAYOUT","")):(r=o[n],W(s._tracePreGUI[y(r)._fullInput.uid],c)(l[r],e)),e in h||(h[e]=m()),void 0===h[e][n]&&(h[e][n]=G(r.get())),void 0!==t&&r.set(t))}for(n in i){if(Y.hasParent(i,n))throw new Error("cannot set "+n+" and a parent attribute simultaneously");var b,x,_=i[n];if("autobinx"!==n&&"autobiny"!==n||(n=n.charAt(n.length-1)+"bins",_=Array.isArray(_)?_.map(function(n){return function(e,t){return!1===e?r[o[t]][n]:null}}(n)):!1===_?o.map(function(t){return function(e){return r[e][t]}}(n)):null),p[n]=_,"LAYOUT"===n.substr(0,6))w=u(a.layout,n.replace("LAYOUT","")),h[n]=[G(w.get())],w.set(Array.isArray(_)?_[0]:_),f.calc=!0;else{for(h[n]=m(),e=0;e<o.length;e++){var w,T=l[o[e]],k=y(o[e]),A=(w=W(s._tracePreGUI[k._fullInput.uid],c)(T,n)).get(),M=Array.isArray(_)?_[e%_.length]:_;if(void 0!==M){var E,S,L=w.parts[w.parts.length-1],C=n.substr(0,n.length-L.length-1),O=C?C+".":"",C=C?q(k,C).get():k,D=B.getTraceValObject(k,w.parts);if(D&&D.impliedEdits&&null!==M)for(var I in D.impliedEdits)v(j.relativeAttr(n,I),D.impliedEdits[I],e);else"thicknessmode"!==L&&"lenmode"!==L||A===M||"fraction"!==M&&"pixels"!==M||!C?"type"!==n||"pie"===M==("pie"===A)&&"funnelarea"===M==("funnelarea"===A)||(E="x",S="y","bar"!==M&&"bar"!==A||"h"!==T.orientation||(E="y",S="x"),j.swapAttrs(T,["?","?src"],"labels",E),j.swapAttrs(T,["d?","?0"],"label",E),j.swapAttrs(T,["?","?src"],"values",S),"pie"===A||"funnelarea"===A?(q(T,"marker.color").set(q(T,"marker.colors").get()),s._pielayer.selectAll("g.trace").remove()):H.traceIs(T,"cartesian")&&q(T,"marker.colors").set(q(T,"marker.color").get())):(E=s._size,R="top"===(S=C.orient)||"bottom"===S,"thicknessmode"===L?(L=R?E.h:E.w,v(O+"thickness",C.thickness*("fraction"===M?1/L:L),e)):(L=R?E.w:E.h,v(O+"len",C.len*("fraction"===M?1/L:L),e)));h[n][e]=G(A);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(n)){if("orientation"===n){w.set(M);var R=T.x&&!T.y?"h":"v";if((w.get()||R)===k.orientation)continue}else"orientationaxes"===n&&(T.orientation={v:"h",h:"v"}[k.orientation]);Y.swapXYData(T),f.calc=f.clearAxisTypes=!0}else-1!==z.dataArrayContainers.indexOf(w.parts[0])?(Y.manageArrayContainers(w,M,h),f.calc=!0):(!D||D.arrayOk&&!H.traceIs(k,"regl")&&(j.isArrayOrTypedArray(M)||j.isArrayOrTypedArray(A))?f.calc=!0:$.update(f,D),w.set(M))}}if(-1!==["swapxyaxes","orientationaxes"].indexOf(n)&&U.swap(a,o),"orientationaxes"===n&&("x"===(x=(b=q(a.layout,"hovermode")).get())?b.set("y"):"y"===x?b.set("x"):"x unified"===x?b.set("y unified"):"y unified"===x&&b.set("x unified")),-1!==["orientation","type"].indexOf(n)){for(t=[],e=0;e<o.length;e++){var P=l[o[e]];H.traceIs(P,"cartesian")&&(g(P.xaxis||"x"),g(P.yaxis||"y"))}v(t.map(N),!0,0),v(t.map(F),[0,1],0)}}}return(f.calc||f.plot)&&(f.fullReplot=!0),{flags:f,undoit:h,redoit:p,traces:o,eventData:j.extendDeepNoArrays([],[d,o])}}function X(n){for(var e,t,r=j.counterRegex("axis",".title",!1,!1),a=/colorbar\.title$/,i=Object.keys(n),o=0;o<i.length;o++)e=i[o],t=n[e],"title"!==e&&!r.test(e)&&!a.test(e)||"string"!=typeof t&&"number"!=typeof t?-1<e.indexOf("titlefont")&&-1===e.indexOf("grouptitlefont")?s(e,e.replace("titlefont","title.font")):-1<e.indexOf("titleposition")?s(e,e.replace("titleposition","title.position")):-1<e.indexOf("titleside")?s(e,e.replace("titleside","title.side")):-1<e.indexOf("titleoffset")&&s(e,e.replace("titleoffset","title.offset")):s(e,e.replace("title","title.text"));function s(e,t){n[t]=n[e],delete n[e]}}function T(e,t,n){e=j.getGraphDiv(e),Y.clearPromiseQueue(e);var r={};if("string"==typeof t)r[t]=n;else{if(!j.isPlainObject(t))return j.warn("Relayout fail.",t,n),Promise.reject();r=j.extendFlat({},t)}Object.keys(r).length&&(e.changed=!0);var a=R(e,r),n=a.flags,t=(n.calc&&(e.calcdata=void 0),[z.previousPromises]),r=(n.layoutReplot?t.push(A.layoutReplot):Object.keys(r).length&&(I(e,n,a)||z.supplyDefaults(e),n.legend&&t.push(A.doLegend),n.layoutstyle&&t.push(A.layoutStyles),n.axrange&&S(t,a.rangesAltered),n.ticks&&t.push(A.doTicksRelayout),n.modebar&&t.push(A.doModeBar),n.camera&&t.push(A.doCamera),n.colorbars&&t.push(A.doColorBars),t.push(M)),t.push(z.rehover,z.redrag),_.add(e,T,[e,a.undoit],T,[e,a.redoit]),j.syncOrAsync(t,e));return(r=r&&r.then?r:Promise.resolve(e)).then(function(){return e.emit("plotly_relayout",a.eventData),e})}function I(e,t,n){var r=e._fullLayout;if(t.axrange){for(var a in t)if("axrange"!==a&&t[a])return;for(var i in n.rangesAltered){var o=U.id2name(i),s=e.layout[o],l=r[o];if(l.autorange=s.autorange,s.range&&(l.range=s.range.slice()),l.cleanRange(),l._matchGroup)for(var c in l._matchGroup)c!==i&&((c=r[U.id2name(c)]).autorange=l.autorange,c.range=l.range.slice(),c._input.range=l.range.slice())}return 1}}function S(e,o){e.push(a,A.doAutoRangeAndConstraints,o?function(e){var t,n=[],r=!0;for(t in o){var a=U.getFromId(e,t);if(n.push(t),-1!==(a.ticklabelposition||"").indexOf("inside")&&a._anchorAxis&&n.push(a._anchorAxis._id),a._matchGroup)for(var i in a._matchGroup)o[i]||n.push(i);a.automargin&&(r=!1)}return U.draw(e,n,{skipTitle:r})}:function(e){return U.draw(e,"redraw")},A.drawData,A.finalDraw)}var J=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,K=/^[xyz]axis[0-9]*\.autorange$/,Q=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function R(e,r){var t,a=e.layout,n=e._fullLayout,i=n._guiEditing,o=W(n._preGUI,i),s=Object.keys(r),l=U.list(e),i=j.extendDeepAll({},r),c={};for(X(r),s=Object.keys(r),R=0;R<s.length;R++)if(0===s[R].indexOf("allaxes")){for(t=0;t<l.length;t++){var u=l[t]._id.substr(1),u=-1!==u.indexOf("scene")?u+".":"",u=s[R].replace("allaxes",u+l[t]._name);r[u]||(r[u]=r[s[R]])}delete r[s[R]]}var d=$.layoutFlags(),f={},p={};function h(e,t){var n;Array.isArray(e)?e.forEach(function(e){h(e,t)}):e in r||Y.hasParent(r,e)||(n=o(a,e),e in p||(p[e]=G(n.get())),void 0!==t&&n.set(t))}var m,g,y={};function v(e){e=U.name2id(e.split(".")[0]);y[e]=1}for(m in r){if(Y.hasParent(r,m))throw new Error("cannot set "+m+" and a parent attribute simultaneously");for(var b=o(a,m),x=r[m],_=b.parts.length-1;0<_&&"string"!=typeof b.parts[_];)_--;var w=b.parts[_],T=b.parts[_-1]+"."+w,k=b.parts.slice(0,_).join("."),A=q(e.layout,k).get(),M=q(n,k).get(),E=b.get();if(void 0!==x){f[m]=x,p[m]="reverse"===w?x:G(E);var S,L,C,O=B.getLayoutValObject(n,b.parts);if(O&&O.impliedEdits&&null!==x)for(var D in O.impliedEdits)h(j.relativeAttr(m,D),O.impliedEdits[D]);-1!==["width","height"].indexOf(m)?x?(h("autosize",null),h(S="height"===m?"width":"height",n[S])):n[m]=e._initialAutoSize[m]:"autosize"===m?(h("width",x?null:n.width),h("height",x?null:n.height)):T.match(J)?(v(T),q(n,k+"._inputRange").set(null)):T.match(K)?(v(T),q(n,k+"._inputRange").set(null),(S=q(n,k).get())._inputDomain&&(S._input.domain=S._inputDomain.slice())):T.match(Q)&&q(n,k+"._inputDomain").set(null),"type"===w?(L=A,T="linear"===M.type&&"log"===x,C="log"===M.type&&"linear"===x,T||C?(L&&L.range?M.autorange?T&&(L.range=L.range[1]>L.range[0]?[1,2]:[2,1]):(C=L.range[0],P=L.range[1],T?(C<=0&&P<=0&&h(k+".autorange",!0),C<=0?C=P/1e6:P<=0&&(P=C/1e6),h(k+".range[0]",Math.log(C)/Math.LN10),h(k+".range[1]",Math.log(P)/Math.LN10)):(h(k+".range[0]",Math.pow(10,C)),h(k+".range[1]",Math.pow(10,P)))):h(k+".autorange",!0),Array.isArray(n._subplots.polar)&&n._subplots.polar.length&&n[b.parts[0]]&&"radialaxis"===b.parts[1]&&delete n[b.parts[0]]._subplot.viewInitial["radialaxis.range"],H.getComponentMethod("annotations","convertCoords")(e,M,x,h),H.getComponentMethod("images","convertCoords")(e,M,x,h)):(h(k+".autorange",!0),h(k+".range",null)),q(n,k+"._inputRange").set(null)):w.match(Z)&&(T=q(n,m).get(),(C=(x||{}).type)&&"-"!==C||(C="linear"),H.getComponentMethod("annotations","convertCoords")(e,T,C,h),H.getComponentMethod("images","convertCoords")(e,T,C,h));var I,R,N,P=V.containerArrayMatch(m);P?(I=P.array,R=P.index,T=P.property,N=O||{editType:"calc"},""!==R&&""===T&&(V.isAddVal(x)?p[m]=null:V.isRemoveVal(x)?p[m]=(q(a,I).get()||[])[R]:j.warn("unrecognized full object value",r)),$.update(d,N),c[I]||(c[I]={}),(c[I][R]||(c[I][R]={}))[T]=x,delete r[m]):"reverse"===w?(A.range?A.range.reverse():(h(k+".autorange",!0),A.range=[1,0]),M.autorange?d.calc=!0:d.plot=!0):(n._has("scatter-like")&&n._has("regl")&&"dragmode"===m&&("lasso"===x||"select"===x)&&"lasso"!==E&&"select"!==E||n._has("gl2d")?d.plot=!0:O?$.update(d,O):d.calc=!0,b.set(x))}}for(I in c)V.applyContainerArrayChanges(e,o(a,I),c[I],d,o)||(d.plot=!0);for(g in y){var F=(L=U.getFromId(e,g))&&L._constraintGroup;if(F)for(var z in d.calc=!0,F)y[z]||(U.getFromId(e,z)._constraintShrinkable=!0)}return(ee(e)||r.height||r.width)&&(d.plot=!0),(d.plot||d.calc)&&(d.layoutReplot=!0),{flags:d,rangesAltered:y,undoit:p,redoit:f,eventData:i}}function ee(e){var t=e._fullLayout,n=t.width,r=t.height;return e.layout.autosize&&z.plotAutoSize(e,e.layout,t),t.width!==n||t.height!==r}function c(e,t,n,r){e=j.getGraphDiv(e),Y.clearPromiseQueue(e),j.isPlainObject(t)||(t={}),j.isPlainObject(n)||(n={}),Object.keys(t).length&&(e.changed=!0),Object.keys(n).length&&(e.changed=!0);var r=Y.coerceTraceIndices(e,r),a=l(e,j.extendFlat({},t),r),t=a.flags,i=R(e,j.extendFlat({},n)),o=i.flags,r=((t.calc||o.calc)&&(e.calcdata=void 0),t.clearAxisTypes&&Y.clearAxisTypes(e,r,n),[]),n=(o.layoutReplot?r.push(A.layoutReplot):t.fullReplot?r.push(k._doPlot):(r.push(z.previousPromises),I(e,o,i)||z.supplyDefaults(e),t.style&&r.push(A.doTraceStyle),(t.colorbars||o.colorbars)&&r.push(A.doColorBars),o.legend&&r.push(A.doLegend),o.layoutstyle&&r.push(A.layoutStyles),o.axrange&&S(r,i.rangesAltered),o.ticks&&r.push(A.doTicksRelayout),o.modebar&&r.push(A.doModeBar),o.camera&&r.push(A.doCamera),r.push(M)),r.push(z.rehover,z.redrag),_.add(e,c,[e,a.undoit,i.undoit,a.traces],c,[e,a.redoit,i.redoit,a.traces]),j.syncOrAsync(r,e));return(n=n&&n.then?n:Promise.resolve(e)).then(function(){return e.emit("plotly_update",{data:a.eventData,layout:i.eventData}),e})}function t(n){return function(e){e._fullLayout._guiEditing=!0;var t=n.apply(null,arguments);return e._fullLayout._guiEditing=!1,t}}var P=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],N=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function F(e,t){for(var n=0;n<t.length;n++){var r=t[n],a=e.match(r.pattern);if(a)return{head:a=a[1]||"",tail:e.substr(a.length+1),attr:r.attr}}}function te(e,t){var n=q(t,e).get();if(void 0!==n)return n;var r=e.split(".");for(r.pop();1<r.length;)if(r.pop(),void 0!==(n=q(t,r.join(".")+".uirevision").get()))return n;return t.uirevision}function ne(e,t){var n=j.isPlainObject(e),r=Array.isArray(e);return n||r?(n&&j.isPlainObject(t)||r&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t):e===t}function re(e,t,n,r){var a,i,o,s,l,c,u,d,f=r._preGUI,p=[],h={},m={};for(a in f){if(s=F(a,P)){if(d=s.head,y=s.tail,g=s.attr||d+".uirevision",(o=(i=q(r,g).get())&&te(g,t))&&o===i){if(null===(l=f[a])&&(l=void 0),ne(u=(c=q(t,a)).get(),l)){void 0===u&&"autorange"===y&&p.push(d),c.set(G(q(r,a).get()));continue}if("autorange"===y||"range["===y.substr(0,6)){var g=f[d+".range[0]"],y=f[d+".range[1]"],v=f[d+".autorange"];if(v||null===v&&null===g&&null===y)if(d in h||(v=q(t,d).get(),h[d]=v&&(v.autorange||!1!==v.autorange&&(!v.range||2!==v.range.length))),h[d]){c.set(G(q(r,a).get()));continue}}}}else j.warn("unrecognized GUI edit: "+a);delete f[a],s&&"range["===s.tail.substr(0,6)&&(m[s.head]=1)}for(var b=0;b<p.length;b++){var x=p[b];!m[x]||(x=q(t,x).get())&&delete x.autorange}var _,w=r._tracePreGUI;for(_ in w){var T=w[_],k=null;for(a in T){if(!k){var A=function(e,t){for(var n=0;n<t.length;n++)if(t[n]._fullInput.uid===e)return n;return-1}(_,n);if(A<0){delete w[_];break}var M=function(e,t,n){for(var r=0;r<t.length;r++)if(t[r].uid===e)return r;return!t[n]||t[n].uid?-1:n}(_,e,(A=n[A]._fullInput).index);if(M<0){delete w[_];break}k=e[M]}if(s=F(a,N)){if(s.attr?o=(i=q(r,s.attr).get())&&te(s.attr,t):(i=A.uirevision,void 0===(o=k.uirevision)&&(o=t.uirevision)),o&&o===i&&(null===(l=T[a])&&(l=void 0),ne(u=(c=q(k,a)).get(),l))){c.set(G(q(A,a).get()));continue}}else j.warn("unrecognized GUI edit: "+a+" in trace uid "+_);delete T[a]}}}function L(e,t,n,r){var a,i,o=r.getValObject,s=r.flags,l=r.immutable,c=r.inArray,u=r.arrayIndex;function d(){var e=a.editType;c&&-1!==e.indexOf("arraydraw")?j.pushUnique(s.arrays[c],u):($.update(s,a),"none"!==e&&s.nChanges++,r.transition&&a.anim&&s.nChangesAnim++,(J.test(g)||K.test(g))&&(s.rangesAltered[n[0]]=1),Q.test(g)&&q(t,"_inputDomain").set(null),"datarevision"===i&&(s.newDataRevision=1))}function f(e){return"data_array"===e.valType||e.arrayOk}for(i in e){if(s.calc&&!r.transition)return;var p=e[i],h=t[i],m=n.concat(i),g=m.join(".");if("_"!==i.charAt(0)&&"function"!=typeof p&&p!==h){if(("tick0"===i||"dtick"===i)&&"geo"!==n[0]){var y=t.tickmode;if("auto"===y||"array"===y||!y)continue}if(("range"!==i||!t.autorange)&&("zmin"!==i&&"zmax"!==i||"contourcarpet"!==t.type)&&(a=o(m))&&(!a._compareAsJSON||JSON.stringify(p)!==JSON.stringify(h))){var v,y=a.valType,b=f(a),x=Array.isArray(p),_=Array.isArray(h);if(x&&_){var w="_input_"+i,T=e[w],w=t[w];if(Array.isArray(T)&&T===w)continue}if(void 0===h)b&&x?s.calc=!0:d();else if(a._isLinkedToArray){var k=[],T=!1,A=(c||(s.arrays[i]=k),Math.min(p.length,h.length)),M=Math.max(p.length,h.length);if(A!==M){if("arraydraw"!==a.editType){d();continue}T=!0}for(v=0;v<A;v++)L(p[v],h[v],m.concat(v),j.extendFlat({inArray:i,arrayIndex:v},r));if(T)for(v=A;v<M;v++)k.push(v)}else!y&&j.isPlainObject(p)?L(p,h,m,r):b?x&&_?(l&&(s.calc=!0),(l||r.newDataRevision)&&d()):x!==_?s.calc=!0:d():x&&_&&p.length===h.length&&String(p)===String(h)||d()}}}for(i in t)if(!(i in e||"_"===i.charAt(0)||"function"==typeof t[i])){if(f(a=o(n.concat(i)))&&Array.isArray(t[i]))return void(s.calc=!0);d()}}function ae(e){var t=e._fullLayout,n=e.getBoundingClientRect();j.equalDomRects(n,t._lastBBox)||(e=t._invTransform=j.inverseTransformMatrix(j.getFullTransformMatrix(e)),t._invScaleX=Math.sqrt(e[0][0]*e[0][0]+e[0][1]*e[0][1]+e[0][2]*e[0][2]),t._invScaleY=Math.sqrt(e[1][0]*e[1][0]+e[1][1]*e[1][1]+e[1][2]*e[1][2]),t._lastBBox=n)}k.animate=function(m,g,y){if(m=j.getGraphDiv(m),!j.isPlotDiv(m))throw new Error("This element is not a Plotly plot: "+m+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var v=m._transitionData,b=(v._frameQueue||(v._frameQueue=[]),(y=z.supplyAnimationDefaults(y)).transition),x=y.frame;return void 0===v._frameWaitingCnt&&(v._frameWaitingCnt=0),new Promise(function(o,s){function e(e){if(0!==e.length){for(var t=0;t<e.length;t++){var n="byname"===e[t].type?z.computeFrame(m,e[t].name):e[t].data,r=(r=t,Array.isArray(x)?r>=x.length?x[0]:x[r]:x),a=(a=t,Array.isArray(b)?a>=b.length?b[0]:b[a]:b),n=(a.duration=Math.min(a.duration,r.duration),{frame:n,name:e[t].name,frameOpts:r,transitionOpts:a});t===e.length-1&&(n.onComplete=function(e,t){var n=0;return function(){if(e&&++n===t)return e()}}(o,2),n.onInterrupt=s),v._frameQueue.push(n)}"immediate"===y.mode&&(v._lastFrameAt=-1/0),v._animationRaf||(m.emit("plotly_animating"),v._lastFrameAt=-1/0,v._timeToNext=0,v._runningTransitions=0,v._currentFrame=null,i())}function i(){var e,t;v._animationRaf=window.requestAnimationFrame(i),Date.now()-v._lastFrameAt>v._timeToNext&&(v._currentFrame&&v._currentFrame.onComplete&&v._currentFrame.onComplete(),(e=v._currentFrame=v._frameQueue.shift())?(t=e.name?e.name.toString():null,m._fullLayout._currentFrame=t,v._lastFrameAt=Date.now(),v._timeToNext=e.frameOpts.duration,z.transition(m,e.frame.data,e.frame.layout,Y.coerceTraceIndices(m,e.frame.traces),e.frameOpts,e.transitionOpts).then(function(){e.onComplete&&e.onComplete()}),m.emit("plotly_animatingframe",{name:t,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})):(m.emit("plotly_animated"),window.cancelAnimationFrame(v._animationRaf),v._animationRaf=null))}}var t,n=0;function r(e){return Array.isArray(b)?n>=b.length?e.transitionOpts=b[n]:e.transitionOpts=b[0]:e.transitionOpts=b,n++,e}var a=[],i=null==g,l=Array.isArray(g);if(!i&&!l&&j.isPlainObject(g))a.push({type:"object",data:r(j.extendFlat({},g))});else if(i||-1!==["string","number"].indexOf(typeof g))for(h=0;h<v._frames.length;h++)!(t=v._frames[h])||!i&&String(t.group)!==String(g)||a.push({type:"byname",name:String(t.name),data:r({name:t.name})});else if(l)for(h=0;h<g.length;h++){var c=g[h];-1!==["number","string"].indexOf(typeof c)?(c=String(c),a.push({type:"byname",name:c,data:r({name:c})})):j.isPlainObject(c)&&a.push({type:"object",data:r(j.extendFlat({},c))})}for(h=0;h<a.length;h++)if("byname"===(t=a[h]).type&&!v._frameHash[t.data.name])return j.warn('animate failure: frame not found: "'+t.data.name+'"'),void s();if(-1!==["next","immediate"].indexOf(y.mode)&&0!==v._frameQueue.length){for(;v._frameQueue.length;){var u=v._frameQueue.pop();u.onInterrupt&&u.onInterrupt()}m.emit("plotly_animationinterrupted",[])}"reverse"===y.direction&&a.reverse();var d=m._fullLayout._currentFrame;if(d&&y.fromcurrent){var f=-1;for(h=0;h<a.length;h++)if("byname"===(t=a[h]).type&&t.name===d){f=h;break}if(0<f&&f<a.length-1){for(var p=[],h=0;h<a.length;h++)t=a[h],("byname"!==a[h].type||f<h)&&p.push(t);a=p}}0<a.length?e(a):(m.emit("plotly_animated"),o())})},k.addFrames=function(e,t,n){if(e=j.getGraphDiv(e),null==t)return Promise.resolve();if(!j.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var r,a,i,o=e._transitionData._frames,s=e._transitionData._frameHash;if(!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);for(var l,c,u,d,f=o.length+2*t.length,p=[],h={},m=t.length-1;0<=m;m--)j.isPlainObject(t[m])&&(c=(s[l=t[m].name]||h[l]||{}).name,u=t[m].name,d=s[c]||h[c],c&&u&&"number"==typeof u&&d&&w<5&&(w++,j.warn('addFrames: overwriting frame "'+(s[c]||h[c]).name+'" with a frame whose name of type "number" also equates to "'+c+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===w&&j.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),h[l]={name:l},p.push({frame:z.supplyFrameDefaults(t[m]),index:n&&void 0!==n[m]&&null!==n[m]?n[m]:f+m}));p.sort(function(e,t){return e.index>t.index?-1:e.index<t.index?1:0});var g=[],y=[],v=o.length;for(m=p.length-1;0<=m;m--){if("number"==typeof(r=p[m].frame).name&&j.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!r.name)for(;s[r.name="frame "+e._transitionData._counter++];);if(s[r.name]){for(a=0;a<o.length&&(o[a]||{}).name!==r.name;a++);g.push({type:"replace",index:a,value:r}),y.unshift({type:"replace",index:a,value:o[a]})}else i=Math.max(0,Math.min(p[m].index,v)),g.push({type:"insert",index:i,value:r}),y.unshift({type:"delete",index:i}),v++}var b=z.modifyFrames,x=z.modifyFrames;return _&&_.add(e,b,[e,y],x,[e,g]),z.modifyFrames(e,g)},k.deleteFrames=function(e,t){if(e=j.getGraphDiv(e),!j.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var n,r,a=e._transitionData._frames,i=[],o=[];if(!t)for(t=[],n=0;n<a.length;n++)t.push(n);for((t=t.slice()).sort(),n=t.length-1;0<=n;n--)r=t[n],i.push({type:"delete",index:r}),o.unshift({type:"insert",index:r,value:a[r]});var s=z.modifyFrames,l=z.modifyFrames;return _&&_.add(e,s,[e,o],l,[e,i]),z.modifyFrames(e,i)},k.addTraces=function e(t,n,r){t=j.getGraphDiv(t);var a,i,o,s,l=[],c=k.deleteTraces,u=e,d=[t,l],f=[t,n],p=t,h=n,m=r;if(!Array.isArray(p.data))throw new Error("gd.data must be an array.");if(void 0===h)throw new Error("traces must be defined.");for(Array.isArray(h)||(h=[h]),o=0;o<h.length;o++)if("object"!=typeof(s=h[o])||Array.isArray(s)||null===s)throw new Error("all values in traces array must be non-array objects");if(void 0!==(m=void 0===m||Array.isArray(m)?m:[m])&&m.length!==h.length)throw new Error("if indices is specified, traces.length must equal indices.length");for(n=(n=Array.isArray(n)?n:[n]).map(function(e){return j.extendFlat({},e)}),Y.cleanData(n),a=0;a<n.length;a++)t.data.push(n[a]);for(a=0;a<n.length;a++)l.push(-n.length+a);if(void 0===r)return i=k.redraw(t),_.add(t,c,d,u,f),i;Array.isArray(r)||(r=[r]);try{x(t,l,r)}catch(e){throw t.data.splice(t.data.length-n.length,n.length),e}return _.startSequence(t),_.add(t,c,d,u,f),i=k.moveTraces(t,l,r),_.stopSequence(t),i},k.deleteTraces=function e(t,n){t=j.getGraphDiv(t);var r,a,i=[],o=k.addTraces,s=e,l=[t,i,n],c=[t,n];if(void 0===n)throw new Error("indices must be an integer or array of integers.");for(b(t,n=Array.isArray(n)?n:[n],"indices"),(n=v(n,t.data.length-1)).sort(j.sorterDes),r=0;r<n.length;r+=1)a=t.data.splice(n[r],1)[0],i.push(a);var u=k.redraw(t);return _.add(t,o,l,s,c),u},k.extendTraces=function e(t,n,r,a){n=i(t=j.getGraphDiv(t),n,r,a,function(e,t,n){var r,a,i,o;return j.isTypedArray(e)?n<0?(r=new e.constructor(0),a=s(e,t),r=n<0?(o=a,r):(o=r,a)):(o=new e.constructor(n),r=new e.constructor(e.length+t.length-n),n===t.length?(o.set(t),r.set(e)):n<t.length?(a=t.length-n,o.set(t.subarray(a)),r.set(e),r.set(t.subarray(0,a),e.length)):(a=n-t.length,i=e.length-a,o.set(e.subarray(i)),o.set(t,a),r.set(e.subarray(0,i)))):(o=e.concat(t),r=0<=n&&n<o.length?o.splice(0,o.length-n):[]),[o,r]}),a=k.redraw(t),r=[t,n.update,r,n.maxPoints];return _.add(t,k.prependTraces,r,e,arguments),a},k.moveTraces=function e(t,n,r){var a,i=[],o=[],s=e,l=e,c=[t=j.getGraphDiv(t),r,n],u=[t,n,r];if(x(t,n,r),n=Array.isArray(n)?n:[n],void 0===r)for(r=[],a=0;a<n.length;a++)r.push(-n.length+a);for(r=Array.isArray(r)?r:[r],n=v(n,t.data.length-1),r=v(r,t.data.length-1),a=0;a<t.data.length;a++)-1===n.indexOf(a)&&i.push(t.data[a]);for(a=0;a<n.length;a++)o.push({newIndex:r[a],trace:t.data[n[a]]});for(o.sort(function(e,t){return e.newIndex-t.newIndex}),a=0;a<o.length;a+=1)i.splice(o[a].newIndex,0,o[a].trace);t.data=i;var d=k.redraw(t);return _.add(t,s,c,l,u),d},k.prependTraces=function e(t,n,r,a){n=i(t=j.getGraphDiv(t),n,r,a,function(e,t,n){var r,a,i;return j.isTypedArray(e)?n<=0?(r=new e.constructor(0),a=s(t,e),r=n<0?(i=a,r):(i=r,a)):(i=new e.constructor(n),r=new e.constructor(e.length+t.length-n),n===t.length?(i.set(t),r.set(e)):n<t.length?(a=t.length-n,i.set(t.subarray(0,a)),r.set(t.subarray(a)),r.set(e,a)):(a=n-t.length,i.set(t),i.set(e.subarray(0,a),t.length),r.set(e.subarray(a)))):(i=t.concat(e),r=0<=n&&n<i.length?i.splice(n,i.length):[]),[i,r]}),a=k.redraw(t),r=[t,n.update,r,n.maxPoints];return _.add(t,k.extendTraces,r,e,arguments),a},k.newPlot=function(e,t,n,r){return e=j.getGraphDiv(e),z.cleanPlot([],{},e._fullData||[],e._fullLayout||{}),z.purge(e),k._doPlot(e,t,n,r)},k._doPlot=function(i,e,t,n){var r;if(i=j.getGraphDiv(i),g.init(i),j.isPlainObject(e)&&(e=(l=e).data,t=l.layout,n=l.config,r=l.frames),!1===g.triggerHandler(i,"plotly_beforeplot",[e,t,n]))return Promise.reject();e||t||j.isPlotDiv(i)||j.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",i),E(i,n),t=t||{},m.select(i).classed("js-plotly-plot",!0),y.makeTester(),Array.isArray(i._promises)||(i._promises=[]);var a,o=0===(i.data||[]).length&&Array.isArray(e),s=(Array.isArray(e)&&(Y.cleanData(e),o?i.data=e:i.data.push.apply(i.data,e),i.empty=!1),i.layout&&!o||(i.layout=Y.cleanLayout(t)),z.supplyDefaults(i),i._fullLayout),l=s._has("cartesian"),c=(s._replotting=!0,(o||s._shouldCreateBgLayer)&&(n=i,e=m.select(n),(t=n._fullLayout)._calcInverseTransform=ae,t._calcInverseTransform(n),t._container=e.selectAll(".plot-container").data([0]),t._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),t._paperdiv=t._container.selectAll(".svg-container").data([0]),t._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),t._glcontainer=t._paperdiv.selectAll(".gl-container").data([{}]),t._glcontainer.enter().append("div").classed("gl-container",!0),t._paperdiv.selectAll(".main-svg").remove(),t._paperdiv.select(".modebar-container").remove(),t._paper=t._paperdiv.insert("svg",":first-child").classed("main-svg",!0),t._toppaper=t._paperdiv.append("svg").classed("main-svg",!0),t._modebardiv=t._paperdiv.append("div"),delete t._modeBar,t._hoverpaper=t._paperdiv.append("svg").classed("main-svg",!0),t._uid||(a={},m.selectAll("defs").each(function(){this.id&&(a[this.id.split("-")[1]]=1)}),t._uid=j.randstr(a)),t._paperdiv.selectAll(".main-svg").attr(D.svgAttrs),t._defs=t._paper.append("defs").attr("id","defs-"+t._uid),t._clips=t._defs.append("g").classed("clips",!0),t._topdefs=t._toppaper.append("defs").attr("id","topdefs-"+t._uid),t._topclips=t._topdefs.append("g").classed("clips",!0),t._bgLayer=t._paper.append("g").classed("bglayer",!0),t._draggers=t._paper.append("g").classed("draglayer",!0),e=t._paper.append("g").classed("layer-below",!0),t._imageLowerLayer=e.append("g").classed("imagelayer",!0),t._shapeLowerLayer=e.append("g").classed("shapelayer",!0),t._cartesianlayer=t._paper.append("g").classed("cartesianlayer",!0),t._polarlayer=t._paper.append("g").classed("polarlayer",!0),t._smithlayer=t._paper.append("g").classed("smithlayer",!0),t._ternarylayer=t._paper.append("g").classed("ternarylayer",!0),t._geolayer=t._paper.append("g").classed("geolayer",!0),t._funnelarealayer=t._paper.append("g").classed("funnelarealayer",!0),t._pielayer=t._paper.append("g").classed("pielayer",!0),t._iciclelayer=t._paper.append("g").classed("iciclelayer",!0),t._treemaplayer=t._paper.append("g").classed("treemaplayer",!0),t._sunburstlayer=t._paper.append("g").classed("sunburstlayer",!0),t._indicatorlayer=t._toppaper.append("g").classed("indicatorlayer",!0),t._glimages=t._paper.append("g").classed("glimages",!0),e=t._toppaper.append("g").classed("layer-above",!0),t._imageUpperLayer=e.append("g").classed("imagelayer",!0),t._shapeUpperLayer=e.append("g").classed("shapelayer",!0),t._infolayer=t._toppaper.append("g").classed("infolayer",!0),t._menulayer=t._toppaper.append("g").classed("menulayer",!0),t._zoomlayer=t._toppaper.append("g").classed("zoomlayer",!0),t._hoverlayer=t._hoverpaper.append("g").classed("hoverlayer",!0),t._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),n.emit("plotly_framework"),s._shouldCreateBgLayer&&delete s._shouldCreateBgLayer),y.initGradients(i),y.initPatterns(i),o&&U.saveShowSpikeInitial(i),!i.calcdata||i.calcdata.length!==(i._fullData||[]).length);c&&z.doCalcdata(i);for(var u=0;u<i.calcdata.length;u++)i.calcdata[u][0].trace=i._fullData[u];i._context.responsive?i._responsiveChartHandler||(i._responsiveChartHandler=function(){j.isHidden(i)||z.resize(i)},window.addEventListener("resize",i._responsiveChartHandler)):j.clearResponsive(i);var d=j.extendFlat({},s._size),f=0;function p(){if(z.clearAutoMarginIds(i),A.drawMarginPushers(i),U.allowAutoMargin(i),s._has("pie"))for(var e=i._fullData,t=0;t<e.length;t++){var n=e[t];"pie"===n.type&&n.automargin&&z.allowAutoMargin(i,"pie."+n.uid+".automargin")}return z.doAutoMargin(i),z.previousPromises(i)}function h(){i._transitioning||(A.doAutoRangeAndConstraints(i),o&&U.saveRangeInitial(i),H.getComponentMethod("rangeslider","calcAutorange")(i))}return e=[z.previousPromises,function(){if(r)return k.addFrames(i,r)},function e(){for(var t=s._basePlotModules,n=0;n<t.length;n++)t[n].drawFramework&&t[n].drawFramework(i);!s._glcanvas&&s._has("gl")&&(s._glcanvas=s._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(e){return e.key}),s._glcanvas.enter().append("canvas").attr("class",function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var r=i._context.plotGlPixelRatio;if(s._glcanvas){s._glcanvas.attr("width",s.width*r).attr("height",s.height*r).style("width",s.width+"px").style("height",s.height+"px");var a=s._glcanvas.data()[0].regl;if(a&&(Math.floor(s.width*r)!==a._gl.drawingBufferWidth||Math.floor(s.height*r)!==a._gl.drawingBufferHeight)){if(r="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.",!f)return j.log(r+" Clearing graph and plotting again."),z.cleanPlot([],{},i._fullData,s),z.supplyDefaults(i),s=i._fullLayout,z.doCalcdata(i),f++,e();j.error(r)}}return"h"===s.modebar.orientation?s._modebardiv.style("height",null).style("width","100%"):s._modebardiv.style("width",null).style("height",s.height+"px"),z.previousPromises(i)},p,function(){if(z.didMarginChange(d,s._size))return j.syncOrAsync([p,A.layoutStyles],i)}],l&&e.push(function(){if(c)return j.syncOrAsync([H.getComponentMethod("shapes","calcAutorange"),H.getComponentMethod("annotations","calcAutorange"),h],i);h()}),e.push(A.layoutStyles),l&&e.push(function(){return U.draw(i,o?"":"redraw")},function(e){e._fullLayout._insideTickLabelsAutorange&&T(e,e._fullLayout._insideTickLabelsAutorange).then(function(){e._fullLayout._insideTickLabelsAutorange=void 0})}),e.push(A.drawData,A.finalDraw,O,z.addLinks,z.rehover,z.redrag,z.doAutoMargin,function(e){e._fullLayout._insideTickLabelsAutorange&&o&&U.saveRangeInitial(e,!0)},z.previousPromises),(t=(t=j.syncOrAsync(e,i))&&t.then?t:Promise.resolve()).then(function(){return M(i),i})},k.purge=function(e){var t=(e=j.getGraphDiv(e))._fullLayout||{},n=e._fullData||[];return z.cleanPlot([],{},n,t),z.purge(e),g.purge(e),t._container&&t._container.remove(),delete e._context,e},k.react=function(e,t,n,r){e=j.getGraphDiv(e),Y.clearPromiseQueue(e);var a,i=e._fullData,o=e._fullLayout;if(j.isPlotDiv(e)&&i&&o){j.isPlainObject(t)&&(t=(s=t).data,n=s.layout,r=s.config,a=s.frames);var s=!1,l=(r&&(l=j.extendDeep({},e._context),e._context=void 0,E(e,r),s=function e(t,n){for(var r in t)if("_"!==r.charAt(0)){var a=t[r],i=n[r];if(a!==i)if(j.isPlainObject(a)&&j.isPlainObject(i)){if(e(a,i))return!0}else{if(!Array.isArray(a)||!Array.isArray(i))return!0;if(a.length!==i.length)return!0;for(var o=0;o<a.length;o++)if(a[o]!==i[o]){if(!j.isPlainObject(a[o])||!j.isPlainObject(i[o]))return!0;if(e(a[o],i[o]))return!0}}}}(l,e._context)),e.data=t||[],Y.cleanData(e.data),e.layout=n||{},Y.cleanLayout(e.layout),re(e.data,e.layout,i,o),z.supplyDefaults(e,{skipUpdateCalc:!0}),e._fullData),c=e._fullLayout,u=void 0===c.datarevision,d=c.transition,f=function(e,t,n,r,a){var i=$.layoutFlags();i.arrays={},i.rangesAltered={},i.nChanges=0,i.nChangesAnim=0,L(t,n,[],{getValObject:function(e){return B.getLayoutValObject(n,e)},flags:i,immutable:r,transition:a,gd:e}),(i.plot||i.calc)&&(i.layoutReplot=!0);a&&i.nChanges&&i.nChangesAnim&&(i.anim=i.nChanges===i.nChangesAnim?"all":"some");return i}(e,o,c,u,d),p=f.newDataRevision,h=function(e,t,n,r,a,i){var o=t.length===n.length;if(!a&&!o)return{fullReplot:!0,calc:!0};var s,l,c=$.traceFlags();c.arrays={},c.nChanges=0,c.nChangesAnim=0;var u={getValObject:function(e){return e=B.getTraceValObject(l,e),!l._module.animatable&&e.anim&&(e.anim=!1),e},flags:c,immutable:r,transition:a,newDataRevision:i,gd:e},d={};for(s=0;s<t.length;s++)n[s]&&(l=n[s]._fullInput,z.hasMakesDataTransform(l)&&(l=n[s]),d[l.uid]||(d[l.uid]=1,L(t[s]._fullInput,l,[],u)));(c.calc||c.plot)&&(c.fullReplot=!0);a&&c.nChanges&&c.nChangesAnim&&(c.anim=c.nChanges===c.nChangesAnim&&o?"all":"some");return c}(e,i,l,u,d,p);if(ee(e)&&(f.layoutReplot=!0),h.calc||f.calc){e.calcdata=void 0;for(var m=Object.getOwnPropertyNames(c),g=0;g<m.length;g++){var y=m[g],v=y.substring(0,5);"xaxis"!==v&&"yaxis"!==v||(v=c[y]._emptyCategories)&&v()}}else z.supplyDefaultsUpdateCalc(e.calcdata,l);i=[];if(a&&(e._transitionData={},z.createTransitionData(e),i.push(function(){return k.addFrames(e,a)})),c.transition&&!s&&(h.anim||f.anim))f.ticks&&i.push(A.doTicksRelayout),z.doCalcdata(e),A.doAutoRangeAndConstraints(e),i.push(function(){return z.transitionFromReact(e,h,f,o)});else if(h.fullReplot||f.layoutReplot||s)e._fullLayout._skipDefaults=!0,i.push(k._doPlot);else{for(var b in f.arrays){var x=f.arrays[b];if(x.length){var _=H.getComponentMethod(b,"drawOne");if(_!==j.noop)for(var w=0;w<x.length;w++)_(e,x[w]);else{var T=H.getComponentMethod(b,"draw");if(T===j.noop)throw new Error("cannot draw components: "+b);T(e)}}}i.push(z.previousPromises),h.style&&i.push(A.doTraceStyle),(h.colorbars||f.colorbars)&&i.push(A.doColorBars),f.legend&&i.push(A.doLegend),f.layoutstyle&&i.push(A.layoutStyles),f.axrange&&S(i),f.ticks&&i.push(A.doTicksRelayout),f.modebar&&i.push(A.doModeBar),f.camera&&i.push(A.doCamera),i.push(M)}i.push(z.rehover,z.redrag),(u=j.syncOrAsync(i,e))&&u.then||(u=Promise.resolve(e))}else u=k.newPlot(e,t,n,r);return u.then(function(){return e.emit("plotly_react",{data:t,layout:n}),e})},k.redraw=function(e){if(e=j.getGraphDiv(e),j.isPlotDiv(e))return Y.cleanData(e.data),Y.cleanLayout(e.layout),e.calcdata=void 0,k._doPlot(e).then(function(){return e.emit("plotly_redraw"),e});throw new Error("This element is not a Plotly plot: "+e)},k.relayout=T,k.restyle=o,k.setPlotConfig=function(e){return j.extendFlat(u,e)},k.update=c,k._guiRelayout=t(T),k._guiRestyle=t(o),k._guiUpdate=t(c),k._storeDirectGUIEdit=function(e,t,n){for(var r in n)f(r,q(e,r).get(),n[r],t)}},{"../components/color":157,"../components/drawing":179,"../constants/xmlns_namespaces":268,"../lib":287,"../lib/events":280,"../lib/queue":302,"../plots/cartesian/axes":334,"../plots/cartesian/constants":341,"../plots/cartesian/graph_interact":344,"../plots/cartesian/select":355,"../plots/plots":371,"../registry":378,"./edit_types":316,"./helpers":317,"./manage_arrays":319,"./plot_config":321,"./plot_schema":322,"./subroutines":324,"@plotly/d3":20,"fast-isnumeric":33,"has-hover":64}],321:[function(e,t,n){"use strict";var r={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},a={};!function e(t,n){for(var r in t){var a=t[r];a.valType?n[r]=a.dflt:(n[r]||(n[r]={}),e(a,n[r]))}}(r,a),t.exports={configAttributes:r,dfltConfig:a}},{}],322:[function(e,t,d){"use strict";var u=e("../registry"),n=e("../lib"),f=e("../plots/attributes"),p=e("../plots/layout_attributes"),r=e("../plots/frame_attributes"),i=e("../plots/animation_attributes"),o=e("./plot_config").configAttributes,s=e("./edit_types"),l=n.extendDeepAll,h=n.isPlainObject,m=n.isArrayOrTypedArray,c=n.nestedProperty,g=n.valObjectMeta,a="_isSubplotObj",y="_isLinkedToArray",e="_deprecated",v=[a,y,"_arrayAttrRegexps",e];function b(e,t,n){if(!e)return!1;if(e._isLinkedToArray)if(x(t[n]))n++;else if(n<t.length)return!1;for(;n<t.length;n++){var r=e[t[n]];if(!h(r))break;if(e=r,n===t.length-1)break;if(e._isLinkedToArray){if(!x(t[++n]))return!1}else if("info_array"===e.valType){r=t[++n];if(!x(r))return!1;var a=e.items;if(Array.isArray(a)){if(r>=a.length)return!1;if(2===e.dimensions){if(n++,t.length===n)return e;var i=t[n];if(!x(i))return!1;e=a[r][i]}else e=a[r]}else e=a}}return e}function x(e){return e===Math.round(e)&&0<=e}function _(e){return d.crawl(e,function(e,t,n){d.isValObject(e)?!0!==e.arrayOk&&"data_array"!==e.valType||(n[t+"src"]={valType:"string",editType:"none"}):h(e)&&(e.role="object")}),d.crawl(e,function(e,t,n){var r;e&&(r=e[y])&&(delete e[y],n[t]={items:{}},n[t].items[r]=e,n[t].role="object")}),function e(t){for(var n in t)if(h(t[n]))e(t[n]);else if(Array.isArray(t[n]))for(var r=0;r<t[n].length;r++)e(t[n][r]);else t[n]instanceof RegExp&&(t[n]=t[n].toString())}(e),e}function w(e,t,n){e=c(e,n),n=l({},t.layoutAttributes);n[a]=!0,e.set(n)}function T(e,t,n){e=c(e,n);e.set(l(e.get()||{},t))}d.IS_SUBPLOT_OBJ=a,d.IS_LINKED_TO_ARRAY=y,d.DEPRECATED=e,d.UNDERSCORE_ATTRS=v,d.get=function(){var e,t={},a=(u.allTypes.forEach(function(e){t[e]=function(e){t=u.modules[e]._module,r=t.basePlotModule;var t,n={},i=(n.type=null,l({},f)),o=l({},t.attributes);d.crawl(o,function(e,t,n,r,a){c(i,a).set(void 0),void 0===e&&c(o,a).set(void 0)}),l(n,i),u.traceIs(e,"noOpacity")&&delete n.opacity;u.traceIs(e,"showLegend")||(delete n.showlegend,delete n.legendgroup);u.traceIs(e,"noHover")&&(delete n.hoverinfo,delete n.hoverlabel);t.selectPoints||delete n.selectedpoints;l(n,o),r.attributes&&l(n,r.attributes);n.type=e;var r={meta:t.meta||{},categories:t.categories||{},animatable:Boolean(t.animatable),type:e,attributes:_(n)};t.layoutAttributes&&(l(e={},t.layoutAttributes),r.layoutAttributes=_(e));t.animatable||d.crawl(r,function(e){d.isValObject(e)&&"anim"in e&&delete e.anim});return r}(e)}),{});return Object.keys(u.transformsRegistry).forEach(function(e){var n,r;a[e]=(n=e,e=u.transformsRegistry[n],r=l({},e.attributes),Object.keys(u.componentsRegistry).forEach(function(e){var t=u.componentsRegistry[e];t.schema&&t.schema.transforms&&t.schema.transforms[n]&&Object.keys(t.schema.transforms[n]).forEach(function(e){T(r,t.schema.transforms[n][e],e)})}),{attributes:_(r)})}),{defs:{valObjects:g,metaKeys:v.concat(["description","role","editType","impliedEdits"]),editType:{traces:s.traces,layout:s.layout},impliedEdits:{}},traces:t,layout:function(){var e,t,n={};for(e in l(n,p),u.subplotsRegistry)if((t=u.subplotsRegistry[e]).layoutAttributes)if(Array.isArray(t.attr))for(var r=0;r<t.attr.length;r++)w(n,t,t.attr[r]);else{var a="subplot"===t.attr?t.name:t.attr;w(n,t,a)}for(e in u.componentsRegistry){var i=(t=u.componentsRegistry[e]).schema;if(i&&(i.subplots||i.layout)){i=i.subplots;if(i&&i.xaxis&&!i.yaxis)for(var o in i.xaxis)delete n.yaxis[o]}else"colorscale"===t.name?l(n,t.layoutAttributes):t.layoutAttributes&&T(n,t.layoutAttributes,t.name)}return{layoutAttributes:_(n)}}(),transforms:a,frames:(_(e={frames:l({},r)}),e.frames),animation:_(i),config:_(o)}},d.crawl=function(r,a,e,i){var o=e||0;i=i||"",Object.keys(r).forEach(function(e){var t,n=r[e];-1===v.indexOf(e)&&(a(n,e,r,o,t=(i?i+".":"")+e),d.isValObject(n)||h(n)&&"impliedEdits"!==e&&d.crawl(n,a,o+1,t))})},d.isValObject=function(e){return e&&void 0!==e.valType},d.findArrayAttributes=function(e){var a,s,l=[],c=[],u=[];function t(e,t,n,r){c=c.slice(0,r).concat([t]),u=u.slice(0,r).concat([e&&e._isLinkedToArray]),!e||"data_array"!==e.valType&&!0!==e.arrayOk||"colorbar"===c[r-1]&&("ticktext"===t||"tickvals"===t)||function e(t,n,r){var a=t[c[n]];var i=r+c[n];if(n===c.length-1)m(a)&&l.push(s+i);else if(u[n]){if(Array.isArray(a))for(var o=0;o<a.length;o++)h(a[o])&&e(a[o],n+1,i+"["+o+"].")}else h(a)&&e(a,n+1,i+".")}(a,0,"")}a=e,s="",d.crawl(f,t),e._module&&e._module.attributes&&d.crawl(e._module.attributes,t);var n=e.transforms;if(n)for(var r=0;r<n.length;r++){var i=n[r],o=i._module;o&&(s="transforms["+r+"].",a=i,d.crawl(o.attributes,t))}return l},d.getTraceValObject=function(e,t){var n=t[0],r=1;if("transforms"===n){if(1===t.length)return f.transforms;var a=e.transforms;if(!Array.isArray(a)||!a.length)return!1;var i=t[1];if(!x(i)||i>=a.length)return!1;i=(a=(u.transformsRegistry[a[i].type]||{}).attributes)&&a[t[2]],r=3}else{var o=e._module;if(!(o=o||(u.modules[e.type||f.type.dflt]||{})._module))return!1;(i=(a=o.attributes)&&a[n])||(e=o.basePlotModule)&&e.attributes&&(i=e.attributes[n]),i=i||f[n]}return b(i,t,r)},d.getLayoutValObject=function(e,t){return b(function(e,t){var n,r,a,i,o,s=e._basePlotModules;if(s){for(n=0;n<s.length;n++){if((a=s[n]).attrRegex&&a.attrRegex.test(t)){if(a.layoutAttrOverrides)return a.layoutAttrOverrides;!o&&a.layoutAttributes&&(o=a.layoutAttributes)}var l=a.baseLayoutAttrOverrides;if(l&&t in l)return l[t]}if(o)return o}var c=e._modules;if(c)for(n=0;n<c.length;n++)if((i=c[n].layoutAttributes)&&t in i)return i[t];for(r in u.componentsRegistry){if("colorscale"===(a=u.componentsRegistry[r]).name&&0===t.indexOf("coloraxis"))return a.layoutAttributes[t];if(!a.schema&&t===a.name)return a.layoutAttributes}return t in p&&p[t]}(e,t[0]),t,1)}},{"../lib":287,"../plots/animation_attributes":328,"../plots/attributes":330,"../plots/frame_attributes":366,"../plots/layout_attributes":369,"../registry":378,"./edit_types":316,"./plot_config":321}],323:[function(e,t,n){"use strict";var d=e("../lib"),o=e("../plots/attributes"),f="templateitemname",r={name:{valType:"string",editType:"none"}};function c(e){return e&&"string"==typeof e}function a(e){var t=e.length-1;return"s"!==e.charAt(t)&&d.warn("bad argument to arrayDefaultKey: "+e),e.substr(0,e.length-1)+"defaults"}r[f]={valType:"string",editType:"calc"},n.templatedArray=function(e,t){return t._isLinkedToArray=e,t.name=r.name,t[f]=r[f],t},n.traceTemplater=function(n){var r,a,i={};for(r in n)a=n[r],Array.isArray(a)&&a.length&&(i[r]=0);return{newTrace:function(e){var t,e={type:r=d.coerce(e,{},o,"type"),_template:null};return r in i&&(a=n[r],t=i[r]%a.length,i[r]++,e._template=a[t]),e}}},n.newContainer=function(e,t,n){var r=e._template,r=r&&(r[t]||n&&r[n]);return d.isPlainObject(r)||(r=null),e[t]={_template:r}},n.arrayTemplater=function(e,t,i){var e=e._template,o=e&&e[a(t)],s=e&&e[t],l=(Array.isArray(s)&&s.length||(s=[]),{});return{newItem:function(e){var t={name:e.name,_input:e},n=t[f]=e[f];if(!c(n))return t._template=o,t;for(var r=0;r<s.length;r++){var a=s[r];if(a.name===n)return l[n]=1,t._template=a,t}return t[i]=e[i]||!1,t._template=!1,t},defaultItems:function(){for(var e=[],t=0;t<s.length;t++){var n,r=s[t],a=r.name;c(a)&&!l[a]&&((n={_template:r,name:a,_input:{_templateitemname:a}})[f]=r[f],e.push(n),l[a]=1)}return e}}},n.arrayDefaultKey=a,n.arrayEditor=function(a,e,t){var n,r=(d.nestedProperty(a,e).get()||[]).length,i=t._index,o=r<=i&&(t._input||{})._templateitemname,s=e+"["+(i=o?r:i)+"]";function l(){n={},o&&(n[s]={},n[s][f]=o)}function c(e,t){o?d.nestedProperty(n[s],e).set(t):n[s+"."+e]=t}function u(){var e=n;return l(),e}return l(),{modifyBase:function(e,t){n[e]=t},modifyItem:c,getUpdateObj:u,applyUpdate:function(e,t){e&&c(e,t);var n,r=u();for(n in r)d.nestedProperty(a,n).set(r[n])}}}},{"../lib":287,"../plots/attributes":330}],324:[function(e,t,z){"use strict";var j=e("@plotly/d3"),u=e("../registry"),q=e("../plots/plots"),H=e("../lib"),d=e("../lib/clear_gl_canvases"),B=e("../components/color"),U=e("../components/drawing"),a=e("../components/titles"),V=e("../components/modebar"),Y=e("../plots/cartesian/axes"),$=e("../constants/alignment"),n=e("../plots/cartesian/constraints"),l=n.enforce,c=n.clean,f=e("../plots/cartesian/autorange").doAutoRange;function r(e){var t,r,n=e._fullLayout,a=n._size,i=a.p,o=Y.list(e,"",!0);if(n._paperdiv.style({width:e._context.responsive&&n.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":n.width+"px",height:e._context.responsive&&n.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":n.height+"px"}).selectAll(".main-svg").call(U.setSize,n.width,n.height),e._context.setBackground(e,n.paper_bgcolor),z.drawMainTitle(e),V.manage(e),n._has("cartesian")){for(t=0;t<o.length;t++){var s,l=(s=o[t])._anchorAxis;s._linepositions={},s._lw=U.crispRound(e,s.linewidth,1),s._mainLinePosition=D(s,l,s.side),s._mainMirrorPosition=s.mirror&&l?D(s,l,$.OPPOSITE_SIDE[s.side]):null}var c,u,d,f,p=[],h=[],m=[],g=1===B.opacity(n.paper_bgcolor)&&1===B.opacity(n.plot_bgcolor)&&n.paper_bgcolor===n.plot_bgcolor;for(r in n._plots)(f=n._plots[r]).mainplot?(f.bg&&f.bg.remove(),f.bg=void 0):(u=f.xaxis.domain,d=f.yaxis.domain,c=f.plotgroup,!function(e,t,n){for(var r=0;r<n.length;r++){var a=n[r][0],i=n[r][1];if(!(a[0]>=e[1]||a[1]<=e[0])&&(i[0]<t[1]&&i[1]>t[0]))return 1}}(u,d,m)?(c.select("rect.bg").remove(),m.push([u,d]),g||(p.push(r),h.push(r))):(u=c.node(),d=f.bg=H.ensureSingle(c,"rect","bg"),u.insertBefore(d.node(),u.childNodes[0]),h.push(r)));var y,v,b,x,_,w,T,k=n._bgLayer.selectAll(".bg").data(p);for(k.enter().append("rect").classed("bg",!0),k.exit().remove(),k.each(function(e){n._plots[e].bg=j.select(this)}),t=0;t<h.length;t++)f=n._plots[h[t]],M=f.xaxis,E=f.yaxis,f.bg&&void 0!==M._offset&&void 0!==E._offset&&f.bg.call(U.setRect,M._offset-i,E._offset-i,M._length+2*i,E._length+2*i).call(B.fill,n.plot_bgcolor).style("stroke-width",0);if(!n._hasOnlyLargeSploms)for(r in n._plots){var A,M=(f=n._plots[r]).xaxis,E=f.yaxis,S=f.clipId="clip"+n._uid+r+"plot",L=H.ensureSingleById(n._clips,"clipPath",S,function(e){e.classed("plotclip",!0).append("rect")});f.clipRect=L.select("rect").attr({width:M._length,height:E._length}),U.setTranslate(f.plot,M._offset,E._offset),L=f._hasClipOnAxisFalse?(A=null,S):(A=S,null),U.setClipUrl(f.plot,A,e),f.layerClipId=L}for(r in n._plots){f=n._plots[r],M=f.xaxis,E=f.yaxis;var C="M0,0",O=(G(M,r)&&(O=W(M,"left",E,o),y=M._offset-(O?i+O:0),O=W(M,"right",E,o),v=M._offset+M._length+(O?i+O:0),O=D(M,E,"bottom"),w=D(M,E,"top"),!(T=!M._anchorAxis||r!==M._mainSubplot)||"allticks"!==M.mirror&&"all"!==M.mirror||(M._linepositions[r]=[O,w]),C=P(M,I,N),T&&M.showline&&("all"===M.mirror||"allticks"===M.mirror)&&(C+=I(O)+I(w)),f.xlines.style("stroke-width",M._lw+"px").call(B.stroke,M.showline?M.linecolor:"rgba(0,0,0,0)")),f.xlines.attr("d",C),"M0,0");G(E,r)&&(w=W(E,"bottom",M,o),b=E._offset+E._length+(w?i:0),C=W(E,"top",M,o),x=E._offset-(C?i:0),C=D(E,M,"left"),_=D(E,M,"right"),!(T=!E._anchorAxis||r!==E._mainSubplot)||"allticks"!==E.mirror&&"all"!==E.mirror||(E._linepositions[r]=[C,_]),O=P(E,R,F),T&&E.showline&&("all"===E.mirror||"allticks"===E.mirror)&&(O+=R(C)+R(_)),f.ylines.style("stroke-width",E._lw+"px").call(B.stroke,E.showline?E.linecolor:"rgba(0,0,0,0)")),f.ylines.attr("d",O)}Y.makeClipPaths(e)}return q.previousPromises(e);function D(e,t,n){var r=e._lw/2;return"x"===e._id.charAt(0)?t?"top"===n?t._offset-i-r:t._offset+t._length+i+r:a.t+a.h*(1-(e.position||0))+r%1:t?"right"===n?t._offset+t._length+i+r:t._offset-i-r:a.l+a.w*(e.position||0)+r%1}function I(e){return"M"+y+","+e+"H"+v}function N(e){return"M"+M._offset+","+e+"h"+M._length}function R(e){return"M"+e+","+x+"V"+b}function F(e){return"M"+e+","+E._offset+"v"+E._length}function P(e,t,n){if(!e.showline||r!==e._mainSubplot)return"";if(!e._anchorAxis)return n(e._mainLinePosition);n=t(e._mainLinePosition);return e.mirror&&(n+=t(e._mainMirrorPosition)),n}}function G(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||"all"===e.mirror||"allticks"===e.mirror)}function o(e,t,n){if(n.showline&&n._lw){if("all"===n.mirror||"allticks"===n.mirror)return 1;var r,a=n._anchorAxis;return a?(r=$.FROM_BL[t],n.side===t?a.domain[r]===e.domain[r]:n.mirror&&a.domain[1-r]===e.domain[1-r]):void 0}}function W(e,t,n,r){if(o(e,t,n))return n._lw;for(var a=0;a<r.length;a++){var i=r[a];if(i._mainAxis===n._mainAxis&&o(e,t,i))return i._lw}return 0}z.layoutStyles=function(e){return H.syncOrAsync([q.doAutoMargin,r],e)},z.drawMainTitle=function(e){var t=e._fullLayout,n=function(e){var e=e.title,t="middle";H.isRightAnchor(e)?t="end":H.isLeftAnchor(e)&&(t="start");return t}(t),r=function(e){var e=e.title,t="0em";H.isTopAnchor(e)?t=$.CAP_SHIFT+"em":H.isMiddleAnchor(e)&&(t=$.MID_SHIFT+"em");return t}(t);a.draw(e,"gtitle",{propContainer:t,propName:"title.text",placeholder:t._dfltTitle.plot,attributes:{x:function(e,t){var n=e.title,r=e._size,a=0;"start"===t?a=n.pad.l:"end"===t&&(a=-n.pad.r);return"paper"!==n.xref?e.width*n.x+a:r.l+r.w*n.x+a}(t,n),y:function(e,t){var n=e.title,r=e._size,a=0;"0em"!==t&&t?t===$.CAP_SHIFT+"em"&&(a=n.pad.t):a=-n.pad.b;return"auto"===n.y?r.t/2:"paper"!==n.yref?e.height-e.height*n.y+a:r.t+r.h-r.h*n.y+a}(t,r),"text-anchor":n,dy:r}})},z.doTraceStyle=function(e){for(var t=e.calcdata,n=[],r=0;r<t.length;r++){var a=t[r],i=a[0]||{},o=i.trace||{},s=o._module||{},l=s.arraysToCalcdata,l=(l&&l(a,o),s.editStyle);l&&n.push({fn:l,cd0:i})}if(n.length){for(r=0;r<n.length;r++){var c=n[r];c.fn(e,c.cd0)}d(e),z.redrawReglTraces(e)}return q.style(e),u.getComponentMethod("legend","draw")(e),q.previousPromises(e)},z.doColorBars=function(e){return u.getComponentMethod("colorbar","draw")(e),q.previousPromises(e)},z.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,u.call("_doPlot",e,"",t)},z.doLegend=function(e){return u.getComponentMethod("legend","draw")(e),q.previousPromises(e)},z.doTicksRelayout=function(e){return Y.draw(e,"redraw"),e._fullLayout._hasOnlyLargeSploms&&(u.subplotsRegistry.splom.updateGrid(e),d(e),z.redrawReglTraces(e)),z.drawMainTitle(e),q.previousPromises(e)},z.doModeBar=function(e){var t=e._fullLayout;V.manage(e);for(var n=0;n<t._basePlotModules.length;n++){var r=t._basePlotModules[n].updateFx;r&&r(e)}return q.previousPromises(e)},z.doCamera=function(e){for(var t=e._fullLayout,n=t._subplots.gl3d,r=0;r<n.length;r++){var a=t[n[r]];a._scene.setViewport(a)}},z.drawData=function(e){for(var t=e._fullLayout,n=(d(e),t._basePlotModules),r=0;r<n.length;r++)n[r].plot(e);return z.redrawReglTraces(e),q.style(e),u.getComponentMethod("shapes","draw")(e),u.getComponentMethod("annotations","draw")(e),u.getComponentMethod("images","draw")(e),t._replotting=!1,q.previousPromises(e)},z.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var n,r,a=e._fullData,i=[],o=[];for(t._hasOnlyLargeSploms&&t._splomGrid.draw(),n=0;n<a.length;n++){var s=a[n];!0===s.visible&&0!==s._length&&("splom"===s.type?t._splomScenes[s.uid].draw():"scattergl"===s.type?H.pushUnique(i,s.xaxis+s.yaxis):"scatterpolargl"===s.type&&H.pushUnique(o,s.subplot))}for(n=0;n<i.length;n++)(r=t._plots[i[n]])._scene&&r._scene.draw();for(n=0;n<o.length;n++)(r=t[o[n]]._subplot)._scene&&r._scene.draw()}},z.doAutoRangeAndConstraints=function(e){for(var t,n=Y.list(e,"",!0),r={},a=0;a<n.length;a++)if(!r[(t=n[a])._id]){r[t._id]=1,c(e,t),f(e,t);var i=t._matchGroup;if(i)for(var o in i){var s=Y.getFromId(e,o);f(e,s,t.range),r[o]=1}}l(e)},z.finalDraw=function(e){u.getComponentMethod("rangeslider","draw")(e),u.getComponentMethod("rangeselector","draw")(e)},z.drawMarginPushers=function(e){u.getComponentMethod("legend","draw")(e),u.getComponentMethod("rangeselector","draw")(e),u.getComponentMethod("sliders","draw")(e),u.getComponentMethod("updatemenus","draw")(e),u.getComponentMethod("colorbar","draw")(e)}},{"../components/color":157,"../components/drawing":179,"../components/modebar":220,"../components/titles":255,"../constants/alignment":262,"../lib":287,"../lib/clear_gl_canvases":275,"../plots/cartesian/autorange":333,"../plots/cartesian/axes":334,"../plots/cartesian/constraints":342,"../plots/plots":371,"../registry":378,"@plotly/d3":20}],325:[function(e,t,n){"use strict";var v=e("../lib"),b=v.isPlainObject,d=e("./plot_schema"),h=e("../plots/plots"),f=e("../plots/attributes"),x=e("./plot_template"),m=e("./plot_config").dfltConfig;function p(s,e){s=v.extendDeep({},s);var t,l,n=Object.keys(s).sort();function r(e,t,n){if(b(t)&&b(e))p(e,t);else if(Array.isArray(t)&&Array.isArray(e)){var r=x.arrayTemplater({_template:s},n);for(l=0;l<t.length;l++){var a=t[l],i=r.newItem(a)._template;i&&p(i,a)}var o=r.defaultItems();for(l=0;l<o.length;l++)t.push(o[l]._template);for(l=0;l<t.length;l++)delete t[l].templateitemname}}for(t=0;t<n.length;t++){var a=n[t],i=s[a];if(a in e?r(i,e[a],a):e[a]=i,_(a)===a)for(var o in e){var c=_(o);o===c||c!==a||o in s||r(i,e[o],a)}}}function _(e){return e.replace(/[0-9]+$/,"")}function w(e,t,n,r,a){var i,o=a&&n(a);for(i in e){var s,l=e[i],c=T(e,i,r),u=T(e,i,a),d=n(u);if(d||(s=_(i))!==i&&(d=n(u=T(e,s,a))),(!o||o!==d)&&!(!d||d._noTemplating||"data_array"===d.valType||d.arrayOk&&Array.isArray(l)))if(!d.valType&&b(l))w(l,t,n,c,u);else if(d._isLinkedToArray&&Array.isArray(l))for(var f=!1,p=0,h={},m=0;m<l.length;m++){var g,y=l[m];b(y)&&((g=y.name)?h[g]||(w(y,t,n,T(l,p,c),T(l,p,u)),p++,h[g]=1):f||(g=T(e,x.arrayDefaultKey(i),r),w(y,t,n,y=T(l,p,c),T(l,p,u)),y=v.nestedProperty(t,y),v.nestedProperty(t,g).set(y.get()),y.set(null),f=!0))}else v.nestedProperty(t,c).set(l)}}function T(e,t,n){e=n?Array.isArray(e)?n+"["+t+"]":n+"."+t:t;return e}function g(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":t=e.path?"There are no templates for item "+e.path+" with name "+e.templateitemname:"There are no templates for trace "+e.index+", of type "+e.traceType+".";break;case"unused":t=e.path?"The template item at "+e.path+" was not used in constructing the plot.":e.dataCount?"Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type.":"The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data.";break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type."}return e.msg=t,e}n.makeTemplate=function(e){e=v.isPlainObject(e)?e:v.getGraphDiv(e),e=v.extendDeep({_context:m},{data:e.data,layout:e.layout}),h.supplyDefaults(e);var t=e.data||[],n=e.layout||{},r=(n._basePlotModules=e._fullLayout._basePlotModules,n._modules=e._fullLayout._modules,{data:{},layout:{}}),e=(t.forEach(function(e){var t={},e=(w(e,t,function(e,t){return d.getTraceValObject(e,v.nestedProperty({},t).parts)}.bind(null,e)),v.coerce(e,{},f,"type"));(r.data[e]||(r.data[e]=[])).push(t)}),w(n,r.layout,function(e,t){return d.getLayoutValObject(e,v.nestedProperty({},t).parts)}.bind(null,n)),delete r.layout.template,n.template);if(b(e)){var a,i,o,s,l,c,t=e.layout,u=(b(t)&&p(t,r.layout),e.data);if(b(u)){for(i in r.data)if(o=u[i],Array.isArray(o)){for(c=(l=r.data[i]).length,s=o.length,a=0;a<c;a++)p(o[a%s],l[a]);for(a=c;a<s;a++)l.push(v.extendDeep({},o[a]))}for(i in u)i in r.data||(r.data[i]=v.extendDeep([],u[i]))}}return r},n.validateTemplate=function(e,t){var e=v.extendDeep({},{_context:m,data:e.data,layout:e.layout}),n=e.layout||{},r=(t=b(t)?t:n.template||{}).layout,a=t.data,i=[],n=(e.layout=n,e.layout.template=t,h.supplyDefaults(e),e._fullLayout),o=e._fullData,s={};if(b(r)?(function e(t,n){for(var r in t)if("_"!==r.charAt(0)&&b(t[r])){for(var a=_(r),i=[],o=0;o<n.length;o++)i.push(T(t,r,n[o])),a!==r&&i.push(T(t,a,n[o]));for(o=0;o<i.length;o++)s[i[o]]=1;e(t[r],i)}}(n,["layout"]),function e(t,n){for(var r in t){var a;-1===r.indexOf("defaults")&&b(t[r])&&(a=T(t,r,n),s[a]?e(t[r],a):i.push({code:"unused",path:a}))}}(r,"layout")):i.push({code:"layout"}),b(a)){for(var l={},c=0;c<o.length;c++){var u,d=o[c];l[u=d.type]=(l[u]||0)+1,d._fullInput._template||i.push({code:"missing",index:d._fullInput.index,traceType:u})}for(u in a){var f=a[u].length,p=l[u]||0;p<f?i.push({code:"unused",traceType:u,templateCount:f,dataCount:p}):f<p&&i.push({code:"reused",traceType:u,templateCount:f,dataCount:p})}}else i.push({code:"data"});if(!function e(t,n){for(var r in t){var a;"_"!==r.charAt(0)&&(a=t[r],r=T(t,r,n),b(a)?(Array.isArray(t)&&!1===a._template&&a.templateitemname&&i.push({code:"missing",path:r,templateitemname:a.templateitemname}),e(a,r)):Array.isArray(a)&&function(e){for(var t=0;t<e.length;t++)if(b(e[t]))return 1}(a)&&e(a,r))}}({data:o,layout:n},""),i.length)return i.map(g)}},{"../lib":287,"../plots/attributes":330,"../plots/plots":371,"./plot_config":321,"./plot_schema":322,"./plot_template":323}],326:[function(e,t,n){"use strict";var x=e("fast-isnumeric"),_=e("./plot_api"),w=e("../plots/plots"),T=e("../lib"),k=e("../snapshot/helpers"),A=e("../snapshot/tosvg"),M=e("../snapshot/svgtoimg"),E=e("../version").version,S={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};t.exports=function(e,n){var r,t,a;function i(e){return!(e in n)||T.validate(n[e],S[e])}if(n=n||{},e=T.isPlainObject(e)?(r=e.data||[],t=e.layout||{},a=e.config||{},{}):(e=T.getGraphDiv(e),r=T.extendDeep([],e.data),t=T.extendDeep({},e.layout),a=e._context,e._fullLayout||{}),!i("width")&&null!==n.width||!i("height")&&null!==n.height)throw new Error("Height and width should be pixel values.");if(!i("format"))throw new Error("Export format is not "+T.join2(S.format.values,", "," or ")+".");var o={};function s(e,t){return T.coerce(n,o,S,e,t)}var l=s("format"),c=s("width"),u=s("height"),d=s("scale"),f=s("setBackground"),p=s("imageDataOnly"),h=document.createElement("div"),m=(h.style.position="absolute",h.style.left="-5000px",document.body.appendChild(h),T.extendFlat({},t)),g=(c?m.width=c:null===n.width&&x(e.width)&&(m.width=e.width),u?m.height=u:null===n.height&&x(e.height)&&(m.height=e.height),T.extendFlat({},a,{_exportedPlot:!0,staticPlot:!0,setBackground:f})),y=k.getRedrawFunc(h);function v(){return new Promise(function(e){setTimeout(e,k.getDelay(h._fullLayout))})}function b(){return new Promise(function(e,t){var n=A(h,l,d),r=h._fullLayout.width,a=h._fullLayout.height;function i(){_.purge(h),document.body.removeChild(h)}if("full-json"===l)return(o=w.graphJson(h,!1,"keepdata","object",!0,!0)).version=E,o=JSON.stringify(o),i(),e(p?o:k.encodeJSON(o));if(i(),"svg"===l)return e(p?n:k.encodeSVG(n));var o=document.createElement("canvas");o.id=T.randstr(),M({format:l,width:r,height:a,scale:d,canvas:o,svg:n,promise:!0}).then(e).catch(t)})}return new Promise(function(t,n){_.newPlot(h,r,m,g).then(y).then(v).then(b).then(function(e){t((e=e,p?e.replace(k.IMAGE_URL_PREFIX,""):e))}).catch(function(e){n(e)})})}},{"../lib":287,"../plots/plots":371,"../snapshot/helpers":382,"../snapshot/svgtoimg":384,"../snapshot/tosvg":386,"../version":552,"./plot_api":320,"fast-isnumeric":33}],327:[function(e,t,n){"use strict";var O=e("../lib"),x=e("../plots/plots"),_=e("./plot_schema"),w=e("./plot_config").dfltConfig,D=O.isPlainObject,I=Array.isArray,R=O.isArrayOrTypedArray;function P(e,t,n,r,a,i){i=i||[];for(var o=Object.keys(e),s=0;s<o.length;s++){var l=o[s];if("transforms"!==l){var c=i.slice(),u=(c.push(l),e[l]),d=t[l],f=function(e,t){if(t in e)return e[t];t=F(t);return e[t.keyMinusId]}(n,l),p=(f||{}).valType,h="info_array"===p,m="colorscale"===p,g=(f||{}).items;if(function(e,t){var n=F(t),r=n.keyMinusId,n=n.id;if(r in e&&e[r]._isSubplotObj&&n)return 1;return t in e}(n,l))if(D(u)&&D(d)&&"any"!==p)P(u,d,f,r,a,c);else if(h&&I(u)){u.length>d.length&&r.push(N("unused",a,c.concat(d.length)));var y,v,b,x,_=d.length,w=Array.isArray(g);if(w&&(_=Math.min(_,g.length)),2===f.dimensions)for(y=0;y<_;y++)if(I(u[y])){u[y].length>d[y].length&&r.push(N("unused",a,c.concat(y,d[y].length)));for(var T=d[y].length,k=0;k<(w?Math.min(T,g[y].length):T);k++)v=w?g[y][k]:g,b=u[y][k],x=d[y][k],O.validate(b,v)?x!==b&&x!==+b&&r.push(N("dynamic",a,c.concat(y,k),b,x)):r.push(N("value",a,c.concat(y,k),b))}else r.push(N("array",a,c.concat(y),u[y]));else for(y=0;y<_;y++)v=w?g[y]:g,b=u[y],x=d[y],O.validate(b,v)?x!==b&&x!==+b&&r.push(N("dynamic",a,c.concat(y),b,x)):r.push(N("value",a,c.concat(y),b))}else if(f.items&&!h&&I(u)){for(var A=g[Object.keys(g)[0]],M=[],E=0;E<d.length;E++){var S,L,C=d[E]._index||E;(L=c.slice()).push(C),D(u[C])&&D(d[E])&&(M.push(C),C=u[C],S=d[E],D(C)&&!1!==C.visible&&!1===S.visible?r.push(N("invisible",a,L)):P(C,S,A,r,a,L))}for(E=0;E<u.length;E++)(L=c.slice()).push(E),D(u[E])?-1===M.indexOf(E)&&r.push(N("unused",a,L)):r.push(N("object",a,L,u[E]))}else!D(u)&&D(d)?r.push(N("object",a,c,u)):R(u)||!R(d)||h||m?l in t?O.validate(u,f)?"enumerated"===f.valType&&(f.coerceNumber&&u!==+d||u!==d)&&r.push(N("dynamic",a,c,u,d)):r.push(N("value",a,c,u)):r.push(N("unused",a,c,u)):r.push(N("array",a,c,u));else r.push(N("schema",a,c))}}}t.exports=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});for(var n,r,a=_.get(),i=[],o={_context:O.extendFlat({},w)},s=(I(e)?(o.data=O.extendDeep([],e),n=e):(o.data=[],n=[],i.push(N("array","data"))),D(t)?(o.layout=O.extendDeep({},t),r=t):(o.layout={},r={},1<arguments.length&&i.push(N("object","layout"))),x.supplyDefaults(o),o._fullData),l=n.length,c=0;c<l;c++){var u=n[c],d=["data",c];if(D(u)){var f=s[c],p=f.type,h=a.traces[p].attributes,m=(!(h.type={valType:"enumerated",values:[p]})===f.visible&&!1!==u.visible&&i.push(N("invisible",d)),P(u,f,h,i,d),u.transforms),g=f.transforms;if(m){I(m)||i.push(N("array",d,["transforms"])),d.push("transforms");for(var y=0;y<m.length;y++){var v=["transforms",y],b=m[y].type;D(m[y])?((b=a.transforms[b]?a.transforms[b].attributes:{}).type={valType:"enumerated",values:Object.keys(a.transforms)},P(m[y],g[y],b,i,d,v)):i.push(N("object",d,v))}}}else i.push(N("object",d))}return P(r,o._fullLayout,function(e,t){for(var n=e.layout.layoutAttributes,r=0;r<t.length;r++){var a=t[r],i=e.traces[a.type],o=i.layoutAttributes;o&&(a.subplot?O.extendFlat(n[i.attributes.subplot.dflt],o):O.extendFlat(n,o))}return n}(a,s),i,"layout"),0===i.length?void 0:i};var l={object:function(e,t){e="layout"===e&&""===t?"The layout argument":"data"===e[0]&&""===t?"Trace "+e[1]+" in the data argument":a(e)+"key "+t;return e+" must be linked to an object container"},array:function(e,t){e="data"===e?"The data argument":a(e)+"key "+t;return e+" must be linked to an array container"},schema:function(e,t){return a(e)+"key "+t+" is not part of the schema"},unused:function(e,t,n){n=D(n)?"container":"key";return a(e)+n+" "+t+" did not get coerced"},dynamic:function(e,t,n,r){return[a(e)+"key",t,"(set to '"+n+"')","got reset to","'"+r+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?a(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,n){return[a(e)+"key "+t,"is set to an invalid value ("+n+")"].join(" ")}};function a(e){return I(e)?"In data trace "+e[1]+", ":"In "+e+", "}function N(e,t,n,r,a){n=n||"",o=I(t)?(i=t[0],t[1]):(i=t,null);var i,o,s=function(e){if(!I(e))return String(e);for(var t="",n=0;n<e.length;n++){var r=e[n];"number"==typeof r?t=t.substr(0,t.length-1)+"["+r+"]":t+=r,n<e.length-1&&(t+=".")}return t}(n),t=l[e](t,s,r,a);return O.log(t),{code:e,container:i,trace:o,path:n,astr:s,msg:t}}var r=O.counterRegex("([a-z]+)");function F(e){e=e.match(r);return{keyMinusId:e&&e[1],id:e&&e[2]}}},{"../lib":287,"../plots/plots":371,"./plot_config":321,"./plot_schema":322}],328:[function(e,t,n){"use strict";t.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],329:[function(e,t,n){"use strict";var h=e("../lib"),m=e("../plot_api/plot_template");t.exports=function(e,t,n){var r,a=n.name,i=n.inclusionAttr||"visible",o=t[a],s=h.isArrayOrTypedArray(e[a])?e[a]:[],l=t[a]=[],c=m.arrayTemplater(t,a,i);for(p=0;p<s.length;p++){var u=s[p];h.isPlainObject(u)?r=c.newItem(u):(r=c.newItem({}))[i]=!1,r._index=p,!1!==r[i]&&n.handleItemDefaults(u,r,t,n),l.push(r)}var d=c.defaultItems();for(p=0;p<d.length;p++)(r=d[p])._index=l.length,n.handleItemDefaults({},r,t,n,{}),l.push(r);if(h.isArrayOrTypedArray(o))for(var f=Math.min(o.length,l.length),p=0;p<f;p++)h.relinkPrivateKeys(l[p],o[p]);return l}},{"../lib":287,"../plot_api/plot_template":323}],330:[function(e,t,n){"use strict";var r=e("./font_attributes"),e=e("../components/fx/attributes");t.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:r({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:e.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":188,"./font_attributes":365}],331:[function(e,t,n){"use strict";var _=e("fast-isnumeric"),r=e("../../lib"),w=r.dateTime2ms,T=r.incrementMonth,k=e("../../constants/numerical").ONEAVGMONTH;t.exports=function(e,t,n,r){if("date"!==t.type)return{vals:r};var a=e[n+"periodalignment"];if(!a)return{vals:r};var i,o=e[n+"period"];if(_(o)){if((o=+o)<=0)return{vals:r}}else if("string"==typeof o&&"M"===o.charAt(0)){var s=+o.substring(1);if(!(0<s&&Math.round(s)===s))return{vals:r};i=s}for(var l=t.calendar,c="start"===a,u="end"===a,s=e[n+"period0"],d=w(s,l)||0,f=[],p=[],h=[],m=r.length,g=0;g<m;g++){var y,v,b,x=r[g];if(i){for(y=Math.round((x-d)/(i*k)),b=T(d,i*y,l);x<b;)b=T(b,-i,l);for(;b<=x;)b=T(b,i,l);v=T(b,-i,l)}else{for(b=d+(y=Math.round((x-d)/o))*o;x<b;)b-=o;for(;b<=x;)b+=o;v=b-o}f[g]=c?v:u?b:(v+b)/2,p[g]=v,h[g]=b}return{vals:f,starts:p,ends:h}}},{"../../constants/numerical":267,"../../lib":287,"fast-isnumeric":33}],332:[function(e,t,n){"use strict";t.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],333:[function(e,t,n){"use strict";var p=e("@plotly/d3"),E=e("fast-isnumeric"),A=e("../../lib"),S=e("../../constants/numerical").FP_SAFE,a=e("../../registry"),h=e("../../components/drawing"),e=e("./axis_ids"),m=e.getFromId,s=e.isLinked;function i(e,t){var n,r=[],a=e._fullLayout,i=L(a,t,0),o=L(a,t,1),a=C(e,t),s=a.min,l=a.max;if(0===s.length||0===l.length)return A.simpleMap(t.range,t.r2l);for(var c=s[0].val,u=l[0].val,d=1;d<s.length&&c===u;d++)c=Math.min(c,s[d].val);for(d=1;d<l.length&&c===u;d++)u=Math.max(u,l[d].val);var f,p,h,m,g,y,v,b,x,e=!1,a=(t.range&&(e=(a=A.simpleMap(t.range,t.r2l))[1]<a[0]),"reversed"===t.autorange&&(t.autorange=e=!0),t.rangemode),_="tozero"===a,a="nonnegative"===a,w=t._length,T=w/10,k=0;for(d=0;d<s.length;d++)for(f=s[d],n=0;n<l.length;n++)0<(y=(p=l[n]).val-f.val-M(t,f.val,p.val))&&(T<(g=w-i(f)-o(p))?k<y/g&&(h=f,m=p,k=y/g):k<y/w&&(h={val:f.val,nopad:1},m={val:p.val,nopad:1},k=y/w));return r=c===u?(v=c-1,b=c+1,_?0===c?[0,1]:(x=(0<c?l:s).reduce(function(e,t){return Math.max(e,o(t))},0),x=c/(1-Math.min(.5,x/w)),0<c?[0,x]:[x,0]):a?[Math.max(0,v),Math.max(1,b)]:[v,b]):(_?(0<=h.val&&(h={val:0,nopad:1}),m.val<=0&&(m={val:0,nopad:1})):a&&(h.val-k*i(h)<0&&(h={val:0,nopad:1}),m.val<=0&&(m={val:1,nopad:1})),k=(m.val-h.val-M(t,f.val,p.val))/(w-i(h)-o(m)),[h.val-k*i(h),m.val+k*o(m)]),e&&r.reverse(),A.simpleMap(r,t.l2r||Number)}function M(e,t,n){var r=0;if(e.rangebreaks)for(var a=e.locateBreaks(t,n),i=0;i<a.length;i++){var o=a[i];r+=o.max-o.min}return r}function L(e,t,n){var r,a=.05*t._length,i=t._anchorAxis||{},o=(-1===(t.ticklabelposition||"").indexOf("inside")&&-1===(i.ticklabelposition||"").indexOf("inside")||(i=(i="reversed"===t.autorange)?i:(r=A.simpleMap(t.range,t.r2l))[1]<r[0])&&(n=!n),0);return s(e,t._id)||(o=function(e,t,n){var r,a=0,i="x"===t._id.charAt(0);for(r in e._plots){var o=e._plots[r];if(t._id===o.xaxis._id||t._id===o.yaxis._id){var s=(i?o.yaxis:o.xaxis)||{};if(-1!==(s.ticklabelposition||"").indexOf("inside")&&(!n&&("left"===s.side||"bottom"===s.side)||n&&("top"===s.side||"right"===s.side))){if(s._vals){var o=A.deg2rad(s._tickAngles[s._id+"tick"]||0),l=Math.abs(Math.cos(o)),c=Math.abs(Math.sin(o));s._vals[0].bb||(o=s._id+"tick",s._selections[o].each(function(e){var t=p.select(this);t.select(".text-math-group").empty()&&(e.bb=h.bBox(t.node()))}));for(var u=0;u<s._vals.length;u++){var d,f=s._vals[u].bb;f&&(d=2*g+f.width,f=2*g+f.height,a=Math.max(a,i?Math.max(d*l,f*c):Math.max(f*l,d*c)))}}"inside"===s.ticks&&"inside"===s.ticklabelposition&&(a+=s.ticklen||0)}}}return a}(e,t,n)),a=Math.max(o,a),"domain"===t.constrain&&t._inputDomain&&(a*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(e){return e.nopad?0:e.pad+(e.extrapad?a:o)}}t.exports={getAutoRange:i,makePadFn:L,doAutoRange:function(e,t,n){t.setScale(),t.autorange&&(t.range=n?n.slice():i(e,t),t._r=t.range.slice(),t._rl=A.simpleMap(t._r,t.r2l),n=t._input,(r={})[t._attr+".range"]=t.range,r[t._attr+".autorange"]=t.autorange,a.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,r),n.range=t.range.slice(),n.autorange=t.autorange);var r=t._anchorAxis;r&&r.rangeslider&&((n=r.rangeslider[t._name])&&"auto"===n.rangemode&&(n.range=i(e,t)),r._input.rangeslider[t._name]=A.extendFlat({},n))},findExtremes:function(t,n,e){e=e||{};t._m||t.setScale();var r,a,i,o,s,l,c,u,d=[],f=[],p=n.length,h=e.padded||!1,m=e.tozero&&("linear"===t.type||"-"===t.type),g="log"===t.type,y=!1,v=e.vpadLinearized||!1;function b(t){var e;return Array.isArray(t)?(y=!0,function(e){return Math.max(Number(t[e]||0),0)}):(e=Math.max(Number(t||0),0),function(){return e})}var x=b((0<t._m?e.ppadplus:e.ppadminus)||e.ppad||0),_=b((0<t._m?e.ppadminus:e.ppadplus)||e.ppad||0),w=b(e.vpadplus||e.vpad),T=b(e.vpadminus||e.vpad);if(!y){if(c=1/0,u=-1/0,g)for(r=0;r<p;r++)(a=n[r])<c&&0<a&&(c=a),u<a&&a<S&&(u=a);else for(r=0;r<p;r++)(a=n[r])<c&&-S<a&&(c=a),u<a&&a<S&&(u=a);n=[c,u],p=2}var k={tozero:m,extrapad:h};function A(e){o=n[e],E(o)&&(s=x(e),l=_(e),o=v?(i=t.c2l(o)-T(e),t.c2l(o)+w(e)):(c=o-T(e),u=o+w(e),g&&c<u/10&&(c=u/10),i=t.c2l(c),t.c2l(u)),m&&(i=Math.min(0,i),o=Math.max(0,o)),I(i)&&O(d,i,l,k),I(o)&&D(f,o,s,k))}var M=Math.min(6,p);for(r=0;r<M;r++)A(r);for(r=p-1;M<=r;r--)A(r);return{min:d,max:f,opts:e}},concatExtremes:C};var g=3;function C(e,t,n){var a,i,o=t._id,r=e._fullData,s=e._fullLayout,l=[],c=[];function u(e,t){for(a=0;a<t.length;a++){var n=e[t[a]],r=(n._extremes||{})[o];if(!0===n.visible&&r){for(h=0;h<r.min.length;h++)i=r.min[h],O(l,i.val,i.pad,{extrapad:i.extrapad});for(h=0;h<r.max.length;h++)i=r.max[h],D(c,i.val,i.pad,{extrapad:i.extrapad})}}}if(u(r,t._traceIndices),u(s.annotations||[],t._annIndices||[]),u(s.shapes||[],t._shapeIndices||[]),t._matchGroup&&!n)for(var d in t._matchGroup)if(d!==t._id){for(var d=m(e,d),f=C(e,d,!0),p=t._length/d._length,h=0;h<f.min.length;h++)i=f.min[h],O(l,i.val,i.pad*p,{extrapad:i.extrapad});for(h=0;h<f.max.length;h++)i=f.max[h],D(c,i.val,i.pad*p,{extrapad:i.extrapad})}return{min:l,max:c}}function O(e,t,n,r){o(e,t,n,r,l)}function D(e,t,n,r){o(e,t,n,r,c)}function o(e,t,n,r,a){for(var i=r.tozero,o=r.extrapad,s=!0,l=0;l<e.length&&s;l++){var c=e[l];if(a(c.val,t)&&c.pad>=n&&(c.extrapad||!o)){s=!1;break}a(t,c.val)&&c.pad<=n&&(o||!c.extrapad)&&(e.splice(l,1),l--)}s&&e.push({val:t,pad:(r=i&&0===t)?0:n,extrapad:!r&&o})}function I(e){return E(e)&&Math.abs(e)<S}function l(e,t){return e<=t}function c(e,t){return t<=e}},{"../../components/drawing":179,"../../constants/numerical":267,"../../lib":287,"../../registry":378,"./axis_ids":338,"@plotly/d3":20,"fast-isnumeric":33}],334:[function(e,t,r){"use strict";var w=e("@plotly/d3"),Q=e("fast-isnumeric"),j=e("../../plots/plots"),q=e("../../registry"),ee=e("../../lib"),c=ee.strTranslate,u=e("../../lib/svg_text_utils"),$=e("../../components/titles"),H=e("../../components/color"),B=e("../../components/drawing"),A=e("./layout_attributes"),f=e("./clean_ticks"),n=e("../../constants/numerical"),fe=n.ONEMAXYEAR,te=n.ONEAVGYEAR,ne=n.ONEMINYEAR,pe=n.ONEMAXQUARTER,re=n.ONEAVGQUARTER,ae=n.ONEMINQUARTER,he=n.ONEMAXMONTH,ie=n.ONEAVGMONTH,me=n.ONEMINMONTH,oe=n.ONEWEEK,se=n.ONEDAY,le=se/2,ce=n.ONEHOUR,s=n.ONEMIN,p=n.ONESEC,M=n.MINUS_SIGN,ue=n.BADNUM,o={K:"zeroline"},L={K:"gridline",L:"path"},C={K:"tick",L:"path"},O={K:"tick",L:"text"},n=e("../../constants/alignment"),x=n.MID_SHIFT,_=n.CAP_SHIFT,U=n.LINE_SPACING,G=n.OPPOSITE_SIDE,de=t.exports={},h=(de.setConvert=e("./set_convert"),e("./axis_autotype")),n=e("./axis_ids"),i=n.idSort,D=n.isLinked,t=(de.id2name=n.id2name,de.name2id=n.name2id,de.cleanId=n.cleanId,de.list=n.list,de.listIds=n.listIds,de.getFromId=n.getFromId,de.getFromTrace=n.getFromTrace,e("./autorange")),a=(de.getAutoRange=t.getAutoRange,de.findExtremes=t.findExtremes,1e-4);function ge(e){var t=(e[1]-e[0])*a;return[e[0]-t,e[1]+t]}de.coerceRef=function(e,t,n,r,a,i){var o=r.charAt(r.length-1),n=n._fullLayout._subplots[o+"axis"],o=r+"ref",r={};return a=a||n[0]||("string"==typeof i?i:i[0]),i=i||a,n=n.concat(n.map(function(e){return e+" domain"})),r[o]={valType:"enumerated",values:n.concat(i?"string"==typeof i?[i]:i:[]),dflt:a},ee.coerce(e,t,r,o)},de.getRefType=function(e){return void 0===e?e:"paper"===e?"paper":"pixel"===e?"pixel":/( domain)$/.test(e)?"domain":"range"},de.coercePosition=function(e,t,n,r,a,i){var o,s;"range"!==de.getRefType(r)?(s=ee.ensureNumber,o=n(a,i)):(o=n(a,i=(n=de.getFromId(t,r)).fraction2r(i)),s=n.cleanPos),e[a]=s(o)},de.cleanPosition=function(e,t,n){return("paper"===n||"pixel"===n?ee.ensureNumber:de.getFromId(t,n).cleanPos)(e)},de.redrawComponents=function(u,d){d=d||de.listIds(u);var f=u._fullLayout;function e(e,t,n,r){for(var a=q.getComponentMethod(e,t),i={},o=0;o<d.length;o++)for(var s=f[de.id2name(d[o])][n],l=0;l<s.length;l++){var c=s[l];if(!i[c]&&(a(u,c),i[c]=1,r))return}}e("annotations","drawOne","_annIndices"),e("shapes","drawOne","_shapeIndices"),e("images","draw","_imgIndices",!0)};var m=de.getDataConversions=function(e,t,n,r){var a,n="x"===n||"y"===n||"z"===n?n:r;if(Array.isArray(n)){if(a={type:h(r,void 0,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]},de.setConvert(a),"category"===a.type)for(var i=0;i<r.length;i++)a.d2c(r[i])}else a=de.getFromTrace(e,t,n);return a?{d2c:a.d2c,c2d:a.c2d}:"ids"===n?{d2c:y,c2d:y}:{d2c:g,c2d:g}};function g(e){return+e}function y(e){return String(e)}function v(e){return+e.substring(1)}de.getDataToCoordFunc=function(e,t,n,r){return m(e,t,n,r).d2c},de.counterLetter=function(e){e=e.charAt(0);return"x"===e?"y":"y"===e?"x":void 0},de.minDtick=function(e,t,n,r){-1===["log","category","multicategory"].indexOf(e.type)&&r?void 0===e._minDtick?(e._minDtick=t,e._forceTick0=n):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((n-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=n):(2e-6<(t/e._minDtick+1e-6)%1||2e-6<((n-e._forceTick0)/e._minDtick%1+1.000001)%1)&&(e._minDtick=0)):e._minDtick=0},de.saveRangeInitial=function(e,t){for(var n=de.list(e,"",!0),r=!1,a=0;a<n.length;a++){var i=n[a],o=void 0===i._rangeInitial,s=o||!(i.range[0]===i._rangeInitial[0]&&i.range[1]===i._rangeInitial[1]);(o&&!1===i.autorange||t&&s)&&(i._rangeInitial=i.range.slice(),r=!0)}return r},de.saveShowSpikeInitial=function(e,t){for(var n=de.list(e,"",!0),r=!1,a="on",i=0;i<n.length;i++){var o=n[i],s=void 0===o._showSpikeInitial,l=s||!(o.showspikes===o._showspikes);(s||t&&l)&&(o._showSpikeInitial=o.showspikes,r=!0),"on"!==a||o.showspikes||(a="off")}return e._fullLayout._cartesianSpikesEnabled=a,r},de.autoBin=function(e,t,n,r,a,i){var o,s,l=ee.aggNums(Math.min,null,e),c=ee.aggNums(Math.max,null,e);if("category"===t.type||"multicategory"===t.type)return{start:l-.5,end:c+.5,size:Math.max(1,Math.round(i)||1),_dataSpan:c-l};a=a||t.calendar,o="log"===t.type?{type:"linear",range:[l,c]}:{type:t.type,range:ee.simpleMap([l,c],t.c2r,0,a),calendar:a},de.setConvert(o),(i=i&&f.dtick(i,o.type))?(o.dtick=i,o.tick0=f.tick0(void 0,o.type,a)):(n?s=(c-l)/n:(i=ee.distinctVals(e),i=(n=Math.pow(10,Math.floor(Math.log(i.minDiff)/Math.LN10)))*ee.roundUp(i.minDiff/n,[.9,1.9,4.9,9.9],!0),s=Math.max(i,2*ee.stdev(e)/Math.pow(e.length,r?.25:.4)),Q(s)||(s=1)),de.autoTicks(o,s));var u,d=o.dtick,n=de.tickIncrement(de.tickFirst(o),d,"reverse",a);if("number"==typeof d)u=(n=function(t,e,n,r,a){var i=0,o=0,s=0,l=0;function c(e){return(1+100*(e-t)/n.dtick)%100<2}for(var u=0;u<e.length;u++)e[u]%1==0?s++:Q(e[u])||l++,c(e[u])&&i++,c(e[u]+n.dtick/2)&&o++;var d=e.length-l;s===d&&"date"!==n.type?n.dtick<1?t=r-.5*n.dtick:(t-=.5)+n.dtick<r&&(t+=n.dtick):o<.1*d&&(.3*d<i||c(r)||c(a))&&(d=n.dtick/2,t+=t+d<r?d:-d);return t}(n,e,o,l,c))+(1+Math.floor((c-n)/d))*d;else for(u=n="M"===o.dtick.charAt(0)?function(e,t,n,r,a){t=ee.findExactDates(t,a);if(.8<t.exactDays){a=Number(n.substr(1)),a=(.8<t.exactYears&&a%12==0?e=de.tickIncrement(e,"M6","reverse")+1.5*se:.8<t.exactMonths?e=de.tickIncrement(e,"M1","reverse")+15.5*se:e-=le,de.tickIncrement(e,n));if(a<=r)return a}return e}(n,e,d,l,a):n,0;u<=c;)u=de.tickIncrement(u,d,!1,a),0;return{start:t.c2r(n,0,a),end:t.c2r(u,0,a),size:d,_dataSpan:c-l}},de.prepTicks=function(e,t){var n,r,a,i,t=ee.simpleMap(e.range,e.r2l,void 0,void 0,t);function o(){return!(Q(n.dtick)||"M"!==n.dtick.charAt(0))}e._dtickInit=e.dtick,e._tick0Init=e.tick0,"auto"!==e.tickmode&&e.dtick||((i=e.nticks)||(i="category"===e.type||"multicategory"===e.type?(a=e.tickfont?ee.bigFont(e.tickfont.size||12):15,e._length/a):(a="y"===e._id.charAt(0)?40:80,ee.constrain(e._length/a,4,9)+1),"radialaxis"===e._name&&(i*=2)),"array"===e.tickmode&&(i*=100),e._roughDTick=Math.abs(t[1]-t[0])/i,de.autoTicks(e,e._roughDTick),0<e._minDtick&&e.dtick<2*e._minDtick&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))),"period"===e.ticklabelmode&&(n=e,a=o(),(t=de.getTickFormat(n))&&(i=n._dtickInit!==n.dtick,/%[fLQsSMX]/.test(t)||(/%[HI]/.test(t)?(r=ce,i&&!a&&n.dtick<ce&&(n.dtick=ce)):/%p/.test(t)?(r=le,i&&!a&&n.dtick<le&&(n.dtick=le)):/%[Aadejuwx]/.test(t)?(r=se,i&&!a&&n.dtick<se&&(n.dtick=se)):/%[UVW]/.test(t)?(r=oe,i&&!a&&n.dtick<oe&&(n.dtick=oe)):/%[Bbm]/.test(t)?(r=ie,i&&(a?v(n.dtick)<1:n.dtick<me)&&(n.dtick="M1")):/%[q]/.test(t)?(r=re,i&&(a?v(n.dtick)<3:n.dtick<ae)&&(n.dtick="M3")):/%[Yy]/.test(t)&&(r=te,i&&(a?v(n.dtick)<12:n.dtick<ne)&&(n.dtick="M12")))),(a=o())&&n.tick0===n._dowTick0&&(n.tick0=n._rawTick0),n._definedDelta=r),e.tick0||(e.tick0="date"===e.type?"2000-01-01":0),"date"===e.type&&e.dtick<.1&&(e.dtick=.1),z(e)},de.calcTicks=function(t,e){de.prepTicks(t,e);var n=ee.simpleMap(t.range,t.r2l,void 0,void 0,e);if("array"===t.tickmode){var r=t,a=r.tickvals,i=r.ticktext,o=new Array(a.length),s=ge(ee.simpleMap(r.range,r.r2l)),N=Math.min(s[0],s[1]),F=Math.max(s[0],s[1]),l=0,z=(Array.isArray(i)||(i=[]),"category"===r.type?r.d2l_noadd:r.d2l);"log"===r.type&&"L"!==String(r.dtick).charAt(0)&&(r.dtick="L"+Math.pow(10,Math.floor(Math.min(r.range[0],r.range[1]))-1));for(var c=0;c<a.length;c++){var u=z(a[c]);N<u&&u<F&&(void 0===i[c]?o[l]=de.tickText(r,u):o[l]=ye(r,u,String(i[c])),l++)}return l<a.length&&o.splice(l,a.length-l),o=r.rangebreaks?o.filter(function(e){return r.maskBreaks(e.x)!==ue}):o}var s=ge(n),d=s[0],f=s[1],p=n[1]<n[0],h=Math.min(n[0],n[1]),m=Math.max(n[0],n[1]),g=Q(t.dtick),j="log"===t.type&&!(g||"L"===t.dtick.charAt(0)),y="period"===t.ticklabelmode;if(t._tmin=de.tickFirst(t,e),t._tmin<d!=p)return[];"category"!==t.type&&"multicategory"!==t.type||(f=p?Math.max(-.5,f):Math.min(t._categories.length-.5,f));for(var v,b=t._tmin,q=(t.rangebreaks&&t._tick0Init!==t.tick0&&(b=Te(b,t),p||(b=de.tickIncrement(b,t.dtick,!p,t.calendar))),y&&(b=de.tickIncrement(b,t.dtick,!p,t.calendar)),t.ticklabelstep),H=Math.max(1e3,t._length||0),x=[],B=null,U=(g?v=t.dtick:"date"===t.type?"string"==typeof t.dtick&&"M"===t.dtick.charAt(0)&&(v=ie*t.dtick.substring(1)):v=t._roughDTick,Math.round((t.r2l(b)-t.r2l(t.tick0))/v)-1);p?f<=b:b<=f;b=de.tickIncrement(b,t.dtick,p,t.calendar)){if(U++,t.rangebreaks&&!p){if(b<d)continue;if(t.maskBreaks(b)===ue&&Te(b,t)>=m)break}if(x.length>H||b===B)break;var B=b,_=!1,_={minor:_=j&&b!==(0|b)?!0:_,value:b};1<q&&U%q&&(_.skipLabel=!0),x.push(_)}if(y)for(var w=x,V=t,T=t._definedDelta,k=0;k<w.length;k++){var Y,A=w[k].value,M=k,E=k+1,E=k<w.length-1?(M=k)+1:0<k?(M=k-1,k):M=k,M=w[M].value,E=w[E].value,E=Math.abs(E-M),M=T||E,S=0,$=(ne<=M?S=ne<=E&&E<=fe?E:te:T===re&&ae<=M?S=ae<=E&&E<=pe?E:re:me<=M?S=me<=E&&E<=he?E:ie:T===oe&&oe<=M?S=oe:se<=M?S=se:T===le&&le<=M?S=le:T===ce&&ce<=M&&(S=ce),E<=S&&(S=E,Y=!0),A+S);if(V.rangebreaks&&0<S){for(var G=0,L=0;L<84;L++){var W=(L+.5)/84;V.maskBreaks(A*(1-W)+W*$)!==ue&&G++}(S*=G/84)||(w[k].drop=!0),Y&&oe<E&&(S=E)}(0<S||0===k)&&(w[k].periodX=A+S/2)}if(t.rangebreaks)for(var C,Z="y"===t._id.charAt(0),O=1,D=("auto"===t.tickmode&&(O=t.tickfont?t.tickfont.size:12),NaN),I=x.length-1;-1<I;I--)x[I].drop?x.splice(I,1):(x[I].value=Te(x[I].value,t),C=t.c2p(x[I].value),(Z?C-O<D:D<C+O)?x.splice(p?I+1:I,1):D=C);we(t)&&360===Math.abs(n[1]-n[0])&&x.pop(),t._tmax=(x[x.length-1]||{}).value,t._prevDateHead="",t._inCalcTicks=!0;function X(e){e.text=" ",t._prevDateHead=K}var J=[];for(I=0;I<x.length;I++){var R=x[I].minor,P=x[I].value,K=t._prevDateHead,P=de.tickText(t,P,!1,R);void 0!==(R=x[I].periodX)&&(m<(P.periodX=R)||R<h)&&(m<R&&(P.periodX=m),R<h&&(P.periodX=h),X(P)),x[I].skipLabel&&X(P),J.push(P)}return t._inCalcTicks=!1,J};var l=[2,5,10],b=[1,2,3,6,12],I=[1,2,5,10,15,30],R=[1,2,3,7,14],P=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],N=[-.301,0,.301,.699,1],F=[15,30,45,90,180];function d(e,t,n){return t*ee.roundUp(e/t,n)}function z(e){var t,n,r,a=e.dtick;e._tickexponent=0,Q(a)||"string"==typeof a||(a=1),"category"!==e.type&&"multicategory"!==e.type||(e._tickround=null),"date"===e.type?(t=e.r2l(e.tick0),n=(r=e.l2r(t).replace(/(^-|i)/g,"")).length,"M"===String(a).charAt(0)?10<n||"01-01"!==r.substr(5)?e._tickround="d":e._tickround=+a.substr(1)%12==0?"y":"m":se<=a&&n<=10||15*se<=a?e._tickround="d":s<=a&&n<=16||ce<=a?e._tickround="M":p<=a&&n<=19||s<=a?e._tickround="S":(r=e.l2r(t+a).replace(/^-/,"").length,e._tickround=Math.max(n,r)-20,e._tickround<0&&(e._tickround=4))):Q(a)||"L"===a.charAt(0)?(t=e.range.map(e.r2d||Number),Q(a)||(a=Number(a.substr(1))),e._tickround=2-Math.floor(Math.log(a)/Math.LN10+.01),n=Math.max(Math.abs(t[0]),Math.abs(t[1])),r=Math.floor(Math.log(n)/Math.LN10+.01),a=void 0===e.minexponent?3:e.minexponent,Math.abs(r)>a&&(E(e.exponentformat)&&!Z(r)?e._tickexponent=3*Math.round((r-1)/3):e._tickexponent=r)):e._tickround=null}function ye(e,t,n){e=e.tickfont||{};return{x:t,dx:0,dy:0,text:n||"",fontSize:e.size,font:e.family,fontColor:e.color}}de.autoTicks=function(e,t){var n,r,a,i;function o(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if("date"===e.type?(e.tick0=ee.dateTick0(e.calendar,0),te<(i=2*t)?(t/=te,n=o(10),e.dtick="M"+12*d(t,n,l)):ie<i?(t/=ie,e.dtick="M"+d(t,1,b)):se<i?(e.dtick=d(t,se,e._hasDayOfWeekBreaks?[1,2,7,14]:R),r=de.getTickFormat(e),(a="period"===e.ticklabelmode)&&(e._rawTick0=e.tick0),/%[uVW]/.test(r)?e.tick0=ee.dateTick0(e.calendar,2):e.tick0=ee.dateTick0(e.calendar,1),a&&(e._dowTick0=e.tick0)):ce<i?e.dtick=d(t,ce,b):s<i?e.dtick=d(t,s,I):p<i?e.dtick=d(t,p,I):(n=o(10),e.dtick=d(t,n,l))):"log"===e.type?(e.tick0=0,r=ee.simpleMap(e.range,e.r2l),.7<t?e.dtick=Math.ceil(t):Math.abs(r[1]-r[0])<1?(a=1.5*Math.abs((r[1]-r[0])/t),t=Math.abs(Math.pow(10,r[1])-Math.pow(10,r[0]))/a,n=o(10),e.dtick="L"+d(t,n,l)):e.dtick=.3<t?"D2":"D1"):"category"===e.type||"multicategory"===e.type?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):we(e)?(e.tick0=0,e.dtick=d(t,n=1,F)):(e.tick0=0,n=o(10),e.dtick=d(t,n,l)),0===e.dtick&&(e.dtick=1),!Q(e.dtick)&&"string"!=typeof e.dtick)throw i=e.dtick,e.dtick=1,"ax.dtick error: "+String(i)},de.tickIncrement=function(e,t,n,r){var a=n?-1:1;if(Q(t))return ee.increment(e,a*t);var i=t.charAt(0),o=a*Number(t.substr(1));if("M"===i)return ee.incrementMonth(e,o,r);if("L"===i)return Math.log(Math.pow(10,e)+o)/Math.LN10;if("D"===i)return r="D2"===t?N:P,i=ee.roundUp(ee.mod(o=e+.01*a,1),r,n),Math.floor(o)+Math.log(w.round(Math.pow(10,i),1))/Math.LN10;throw"unrecognized dtick "+String(t)},de.tickFirst=function(e,t){var n=e.r2l||Number,t=ee.simpleMap(e.range,n,void 0,void 0,t),r=t[1]<t[0],a=r?Math.floor:Math.ceil,i=ge(t)[0],o=e.dtick,t=n(e.tick0);if(Q(o))return n=a((i-t)/o)*o+t,"category"!==e.type&&"multicategory"!==e.type?n:ee.constrain(n,0,e._categories.length-1);var s=o.charAt(0),l=Number(o.substr(1));if("M"===s){for(var c,u,d=0,f=t;d<10;){if(((c=de.tickIncrement(f,o,r,e.calendar))-i)*(f-i)<=0)return r?Math.min(f,c):Math.max(f,c);c=(i-(f+c)/2)/(c-f),u=s+(Math.abs(Math.round(c))||1)*l,f=de.tickIncrement(f,u,c<0?!r:r,e.calendar),d++}return ee.error("tickFirst did not converge",e),f}if("L"===s)return Math.log(a((Math.pow(10,i)-t)/l)*l+t)/Math.LN10;if("D"===s)return n="D2"===o?N:P,a=ee.roundUp(ee.mod(i,1),n,r),Math.floor(i)+Math.log(w.round(Math.pow(10,a),1))/Math.LN10;throw"unrecognized dtick "+String(o)},de.tickText=function(n,r,a,e){var t=ye(n,r),i="array"===n.tickmode,o=a||i,s=n.type,l="category"===s?n.d2l_noadd:n.d2l;if(i&&Array.isArray(n.ticktext)){for(var i=ee.simpleMap(n.range,n.r2l),c=(Math.abs(i[1]-i[0])-(n._lBreaks||0))/1e4,u=0;u<n.ticktext.length&&!(Math.abs(r-l(n.tickvals[u]))<c);u++);if(u<n.ticktext.length)return t.text=String(n.ticktext[u]),t}function d(e){if(void 0===e)return 1;if(a)return"none"===e;var t={first:n._tmin,last:n._tmax}[e];return"all"!==e&&r!==t}var f,i=a?"never":"none"!==n.exponentformat&&d(n.showexponent)?"hide":"";if("date"===s){var p=n;var h=t;var m=a;var g=o;var y=p._tickround,v=m&&p.hoverformat||de.getTickFormat(p);g&&(y=Q(y)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[y]);var v=ee.formatDate(h.x,v,y,p._dateFormat,p.calendar,p._extraFormat),b=v.indexOf("\n");-1!==b&&(x=v.substr(b+1),v=v.substr(0,b));g&&("00:00:00"===v||"00:00"===v?(v=x,x=""):8===v.length&&(v=v.replace(/:00$/,"")));x&&(m?"d"===y?v+=", "+x:v=x+(v?", "+v:""):p._inCalcTicks&&p._prevDateHead===x?(b=Y(p),g=p._trueSide||p.side,(!b&&"top"===g||b&&"bottom"===g)&&(v+="<br> ")):(p._prevDateHead=x,v+="<br>"+x));h.text=v}else if("log"===s){m=n;y=t;b=o;g=i;var p=m.dtick,x=y.x,h=m.tickformat,v="string"==typeof p&&p.charAt(0);"never"===g&&(g="");b&&"L"!==v&&(p="L3",v="L");if(h||"L"===v)y.text=S(Math.pow(10,x),m,g,b);else if(Q(p)||"D"===v&&ee.mod(x+.01,1)<.1){h=Math.round(x),g=Math.abs(h),b=m.exponentformat;"power"===b||E(b)&&Z(h)?(y.text=0===h?1:1===h?"10":"10<sup>"+(1<h?"":M)+g+"</sup>",y.fontSize*=1.25):("e"===b||"E"===b)&&2<g?y.text="1"+b+(0<h?"+":M)+g:(y.text=S(Math.pow(10,x),m,"","fakehover"),"D1"===p&&"y"===m._id.charAt(0)&&(y.dy-=y.fontSize/6))}else{if("D"!==v)throw"unrecognized dtick "+String(p);y.text=String(Math.round(Math.pow(10,ee.mod(x,1)))),y.fontSize*=.75}"D1"!==m.dtick||"0"!==(b=String(y.text).charAt(0))&&"1"!==b||("y"===m._id.charAt(0)?y.dx-=y.fontSize/4:(y.dy+=y.fontSize/2,y.dx+=(m.range[1]>m.range[0]?1:-1)*y.fontSize*(x<0?.5:.25)))}else if("category"===s){var _=n;var w=t;_=_._categories[Math.round(w.x)];void 0===_&&(_="");w.text=String(_)}else if("multicategory"===s)w=n,_=t,s=a,f=Math.round(_.x),w=w._categories[f]||[],f=void 0===w[1]?"":String(w[1]),w=void 0===w[0]?"":String(w[0]),s?_.text=w+" - "+f:(_.text=f,_.text2=w);else if(we(n))s=t,f=a,k=o,T=i,"radians"!==(A=n).thetaunit||f?s.text=S(s.x,A,T,k):0==(f=s.x/180)?s.text="0":100<=(f=function(e){function r(e,t){return Math.abs(e-t)<=1e-6}var t=function(e){for(var t=1;!r(Math.round(e*t)/t,e);)t*=10;return t}(e),e=e*t,n=Math.abs(function e(t,n){return r(n,0)?t:e(n,t%n)}(e,t));return[Math.round(e/n),Math.round(t/n)]}(f))[1]?s.text=S(ee.deg2rad(s.x),A,T,k):(A=s.x<0,1===f[1]?1===f[0]?s.text="":s.text=f[0]+"":s.text=["<sup>",f[0],"</sup>","","<sub>",f[1],"</sub>",""].join(""),A&&(s.text=M+s.text));else{var T=n,k=t,A=o,s=i;"never"===s?s="":"all"===T.showexponent&&Math.abs(k.x/T.dtick)<1e-6&&(s="hide"),k.text=S(k.x,T,s,A)}return e||(n.tickprefix&&!d(n.showtickprefix)&&(t.text=n.tickprefix+t.text),n.ticksuffix&&!d(n.showticksuffix)&&(t.text+=n.ticksuffix)),"boundaries"!==n.tickson&&!n.showdividers||(t.xbnd=[(o=function(e){var t=n.l2p(e);return 0<=t&&t<=n._length?e:null})(t.x-.5),o(t.x+n.dtick-.5)]),t},de.hoverLabelText=function(e,t,n){n&&(e=ee.extendFlat({},e,{hoverformat:n}));var r=Array.isArray(t)?t[0]:t,t=Array.isArray(t)?t[1]:void 0;if(void 0!==t&&t!==r)return de.hoverLabelText(e,r,n)+" - "+de.hoverLabelText(e,t,n);t="log"===e.type&&r<=0,n=de.tickText(e,e.c2l(t?-r:r),"hover").text;return t?0===r?"0":M+n:n};var W=["f","p","n","","m","","k","M","G","T"];function E(e){return"SI"===e||"B"===e}function Z(e){return 14<e||e<-15}function S(e,t,n,r){var a=e<0,i=t._tickround,n=n||t.exponentformat||"B",o=t._tickexponent,s=de.getTickFormat(t),l=t.separatethousands;if(r&&(z(r={exponentformat:n,minexponent:t.minexponent,dtick:"none"===t.showexponent?t.dtick:Q(e)&&Math.abs(e)||1,range:"none"===t.showexponent?t.range.map(t.r2d):[0,e||1]}),i=(Number(r._tickround)||0)+4,o=r._tickexponent,t.hoverformat&&(s=t.hoverformat)),s)return t._numFormat(s)(e).replace(/-/g,M);var r=Math.pow(10,-i)/2;if("none"===n&&(o=0),(e=Math.abs(e))<r)a=!(e="0");else{if(e+=r,o&&(e*=Math.pow(10,-o),i+=o),0===i)e=String(Math.floor(e));else if(i<0){e=(e=String(Math.round(e))).substr(0,e.length+i);for(var c=i;c<0;c++)e+="0"}else{s=(e=String(e)).indexOf(".")+1;s&&(e=e.substr(0,s+i).replace(/\.?0+$/,""))}e=ee.numSeparate(e,t._separators,l)}return o&&"hide"!==n&&(E(n)&&Z(o)&&(n="power"),r=o<0?M+-o:"power"!==n?"+"+o:String(o),"e"===n||"E"===n?e+=n+r:"power"===n?e+="10<sup>"+r+"</sup>":"B"===n&&9===o?e+="B":E(n)&&(e+=W[o/3+5])),a?M+e:e}function X(e){return void 0!==e.periodX?e.periodX:e.x}function V(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}function J(e){var t=e.title.font.size,n=(e.title.text.match(u.BR_TAG_ALL)||[]).length;return e.title.hasOwnProperty("standoff")?n?t*(_+n*U):t*_:n?t*(n+1)*U:t}function K(e,t){t=e.l2p(t);return 1<t&&t<e._length-1}function ve(e){var e=w.select(e),t=e.select(".text-math-group");return t.empty()?e.select("text"):t}function be(e){return e._id+".automargin"}function xe(e){return be(e)+".mirror"}function _e(e){return e._id+".rangeslider"}function k(e,t){for(var n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n])}function we(e){return"angularaxis"===e._id}function Te(e,t){for(var n=t._rangebreaks.length,r=0;r<n;r++){var a=t._rangebreaks[r];if(e>=a.min&&e<a.max)return a.max}return e}function Y(e){return-1!==(e.ticklabelposition||"").indexOf("inside")}function T(e,t){Y(e._anchorAxis||{})&&e._hideCounterAxisInsideTickLabels&&e._hideCounterAxisInsideTickLabels(t)}de.getTickFormat=function(e){var t,n,r,a,i,o,s,l,c,u,d,f;function p(e){return"string"!=typeof e?e:Number(e.replace("M",""))*ie}function h(e,t){var n,r=["L","D"];return typeof e==typeof t?"number"==typeof e?e-t:(n=r.indexOf(e.charAt(0)))===(r=r.indexOf(t.charAt(0)))?Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,"")):n-r:"number"==typeof e?1:-1}if(e.tickformatstops&&0<e.tickformatstops.length)switch(e.type){case"date":case"linear":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&(c=e.dtick,u=r.dtickrange,f=void 0,d=(d=p)||function(e){return e},f=u[0],u=u[1],(!f&&"number"!=typeof f||d(f)<=d(c))&&(!u&&"number"!=typeof u||d(u)>=d(c)))){n=r;break}break;case"log":for(t=0;t<e.tickformatstops.length;t++)if((r=e.tickformatstops[t]).enabled&&(a=e.dtick,i=r.dtickrange,l=s=o=void 0,o=null===i[0],s=null===i[1],l=0<=h(a,i[0]),a=h(a,i[1])<=0,(o||l)&&(s||a))){n=r;break}}return n?n.value:e.tickformat},de.getSubplots=function(e,t){e=e._fullLayout._subplots,e=e.cartesian.concat(e.gl2d||[]),t=t?de.findSubplotsWithAxis(e,t):e;return t.sort(function(e,t){e=e.substr(1).split("y"),t=t.substr(1).split("y");return e[0]===t[0]?+e[1]-+t[1]:+e[0]-+t[0]}),t},de.findSubplotsWithAxis=function(e,t){for(var n=new RegExp("x"===t._id.charAt(0)?"^"+t._id+"y":t._id+"$"),r=[],a=0;a<e.length;a++){var i=e[a];n.test(i)&&r.push(i)}return r},de.makeClipPaths=function(e){var t=e._fullLayout;if(!t._hasOnlyLargeSploms){for(var n,r={_offset:0,_length:t.width,_id:""},a={_offset:0,_length:t.height,_id:""},i=de.list(e,"x",!0),o=de.list(e,"y",!0),s=[],l=0;l<i.length;l++)for(s.push({x:i[l],y:a}),n=0;n<o.length;n++)0===l&&s.push({x:r,y:o[n]}),s.push({x:i[l],y:o[n]});e=t._clips.selectAll(".axesclip").data(s,function(e){return e.x._id+e.y._id});e.enter().append("clipPath").classed("axesclip",!0).attr("id",function(e){return"clip"+t._uid+e.x._id+e.y._id}).append("rect"),e.exit().remove(),e.each(function(e){w.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})}},de.draw=function(r,e,a){var i=r._fullLayout,e=("redraw"===e&&i._paper.selectAll("g.subplot").each(function(e){var t,n,e=e[0],e=i._plots[e];e&&(t=e.xaxis,n=e.yaxis,e.xaxislayer.selectAll("."+t._id+"tick").remove(),e.yaxislayer.selectAll("."+n._id+"tick").remove(),e.xaxislayer.selectAll("."+t._id+"tick2").remove(),e.yaxislayer.selectAll("."+n._id+"tick2").remove(),e.xaxislayer.selectAll("."+t._id+"divider").remove(),e.yaxislayer.selectAll("."+n._id+"divider").remove(),e.gridlayer&&e.gridlayer.selectAll("path").remove(),e.zerolinelayer&&e.zerolinelayer.selectAll("path").remove(),i._infolayer.select(".g-"+t._id+"title").remove(),i._infolayer.select(".g-"+n._id+"title").remove())}),e&&"redraw"!==e?e:de.listIds(r));return ee.syncOrAsync(e.map(function(n){return function(){var e,t;if(n)return e=de.getFromId(r,n),t=de.drawOne(r,e,a),e._r=e.range.slice(),e._rl=ee.simpleMap(e._r,e.r2l),t}}))},de.drawOne=function(p,h,e){e=e||{},h.setScale();var u=p._fullLayout,t=h._id,d=t.charAt(0),f=de.counterLetter(t),n=u._plots[h._mainSubplot];if(n){var i=n[d+"axislayer"],o=h._mainLinePosition,n=h._mainMirrorPosition,r=h._vals=de.calcTicks(h),N=[h.mirror,o,n].join("_");for(x=0;x<r.length;x++)r[x].axInfo=N;h._selections={},h._tickAngles&&(h._prevTickAngles=h._tickAngles),h._tickAngles={},h._depth=null;var a={};if(h.visible){var s,l,c=de.makeTransTickFn(h),F=de.makeTransTickLabelFn(h),m="inside"===h.ticks,g="outside"===h.ticks,z=(l="boundaries"===h.tickson?(L=function(e){function t(e,t){null!==(t=e.xbnd[t])&&r.push(ee.extendFlat({},e,{x:t}))}var n,r=[];if(e.length){for(n=0;n<e.length;n++)t(e[n],0);t(e[n-1],1)}return r}(r),s=de.clipEnds(h,L),m?s:L):(s=de.clipEnds(h,r),m&&"period"!==h.ticklabelmode?s:r),h._gridVals=s),y=function(e,t){function n(e,t){null!==(t=e.xbnd[t])&&i.push(ee.extendFlat({},e,{x:t}))}var r,a,i=[],o=t.length&&t[t.length-1].x<t[0].x;if(e.showdividers&&t.length){for(r=0;r<t.length;r++){var s=t[r];s.text2!==a&&n(s,o?1:0),a=s.text2}n(t[r-1],o?0:1)}return i}(h,r);if(!u._hasOnlyLargeSploms)for(var v=h._subplotsWith,b={},x=0;x<v.length;x++){var _,w=v[x],T=(_=u._plots[w])[f+"axis"],k=T._mainAxis._id;b[k]||(b[k]=1,k="x"===d?"M0,"+T._offset+"v"+T._length:"M"+T._offset+",0h"+T._length,de.drawGrid(p,h,{vals:z,counterAxis:T,layer:_.gridlayer.select("."+t),path:k,transFn:c}),de.drawZeroLine(p,h,{counterAxis:T,layer:_.zerolinelayer,path:k,transFn:c}))}var A=de.getTickSigns(h),M=[];if(h.ticks){var E,S,L=de.makeTickPath(h,o,A[2]),C=h._anchorAxis&&h.mirror&&!0!==h.mirror?L+(E=de.makeTickPath(h,n,A[3])):(E="",L);if(h.showdividers&&g&&"boundaries"===h.tickson){var O={};for(x=0;x<y.length;x++)O[y[x].x]=1;S=function(e){return O[e.x]?E:C}}else S=C;de.drawTicks(p,h,{vals:l,layer:i,path:S,transFn:c}),"allticks"===h.mirror&&(M=Object.keys(h._linepositions||{}))}for(x=0;x<M.length;x++){w=M[x],_=u._plots[w];var D=h._linepositions[w]||[],D=de.makeTickPath(h,D[0],A[0])+de.makeTickPath(h,D[1],A[1]);de.drawTicks(p,h,{vals:l,layer:_[d+"axislayer"],path:D,transFn:c})}var I,m=[],R=(m.push(function(){return de.drawLabels(p,h,{vals:r,layer:i,plotinfo:_,transFn:F,labelFns:de.makeLabelFns(h,o)})}),"multicategory"===h.type?(I={x:2,y:10}[d],m.push(function(){var e={x:"height",y:"width"}[d],e=P()[e]+I+(h._tickAngles[t+"tick"]?h.tickfont.size*U:0);return de.drawLabels(p,h,{vals:function(e,t){for(var n,r=[],a={},i=0;i<t.length;i++){var o=t[i];a[o.text2]?a[o.text2].push(o.x):a[o.text2]=[o.x]}for(n in a)r.push(ye(e,ee.interp(a[n],.5),n));return r}(h,r),layer:i,cls:t+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:c,labelFns:de.makeLabelFns(h,o+e*A[4])})}),m.push(function(){var e,t,n,r,a;h._depth=A[4]*(P("tick2")[h.side]-o),e=p,t=h,n={vals:y,layer:i,path:de.makeTickPath(h,o,A[4],h._depth),transFn:c},r=t._id+"divider",a=n.vals,(a=n.layer.selectAll("path."+r).data(a,V)).exit().remove(),a.enter().insert("path",":first-child").classed(r,1).classed("crisp",1).call(H.stroke,t.dividercolor).style("stroke-width",B.crispRound(e,t.dividerwidth,1)+"px"),a.attr("transform",n.transFn).attr("d",n.path)})):h.title.hasOwnProperty("standoff")&&m.push(function(){h._depth=A[4]*(P()[h.side]-o)}),q.getComponentMethod("rangeslider","isVisible")(h));return m.push(function(){var e,t,n,r,a,i,o=h.side.charAt(0),s=G[h.side].charAt(0),l=de.getPxPosition(p,h),c=g?h.ticklen:0;(h.automargin||R)&&("multicategory"===h.type?e=P("tick2"):(e=P(),"x"===d&&"b"===o&&(h._depth=Math.max(0<e.width?e.bottom-l:0,c)))),h.automargin&&(r={x:0,y:0,r:0,l:0,t:0,b:0},a=[0,1],"x"===d?("b"===o?r[o]=h._depth:(r[o]=h._depth=Math.max(0<e.width?l-e.top:0,c),a.reverse()),0<e.width&&(0<(i=e.right-(h._offset+h._length))&&(r.xr=1,r.r=i),0<(i=h._offset-e.left)&&(r.xl=0,r.l=i))):("l"===o?r[o]=h._depth=Math.max(0<e.height?l-e.left:0,c):(r[o]=h._depth=Math.max(0<e.height?e.right-l:0,c),a.reverse()),0<e.height&&(0<(i=e.bottom-(h._offset+h._length))&&(r.yb=0,r.b=i),0<(l=h._offset-e.top)&&(r.yt=1,r.t=l))),r[f]="free"===h.anchor?h.position:h._anchorAxis.domain[a[0]],h.title.text!==u._dfltTitle[d]&&(r[o]+=J(h)+(h.title.standoff||0)),h.mirror&&"free"!==h.anchor&&((t={x:0,y:0,r:0,l:0,t:0,b:0})[s]=h.linewidth,h.mirror&&!0!==h.mirror&&(t[s]+=c),!0===h.mirror||"ticks"===h.mirror?t[f]=h._anchorAxis.domain[a[1]]:"all"!==h.mirror&&"allticks"!==h.mirror||(t[f]=[h._counterDomainMin,h._counterDomainMax][a[1]]))),R&&(n=q.getComponentMethod("rangeslider","autoMarginOpts")(p,h)),j.autoMargin(p,be(h),r),j.autoMargin(p,xe(h),t),j.autoMargin(p,_e(h),n)}),e.skipTitle||R&&"bottom"===h.side||m.push(function(){var e,t=p,n=h,r=t._fullLayout,a=n._id,i=a.charAt(0),o=n.title.font.size;n.title.hasOwnProperty("standoff")?e=n._depth+n.title.standoff+J(n):(d=Y(n),e="multicategory"===n.type?n._depth:(f=1.5*o,d&&(f=.5*o,"outside"===n.ticks&&(f+=n.ticklen)),10+f+(n.linewidth?n.linewidth-1:0)),d||(e+="x"===i?"top"===n.side?o*(n.showticklabels?1:0):o*(n.showticklabels?1.5:.5):"right"===n.side?o*(n.showticklabels?1:.5):o*(n.showticklabels?.5:0)));var s,l,c,u,d,f=de.getPxPosition(t,n);return"x"===i?(l=n._offset+n._length/2,c="top"===n.side?f-e:f+e):(c=n._offset+n._length/2,l="right"===n.side?f+e:f-e,s={rotate:"-90",offset:0}),"multicategory"!==n.type&&(d=n._selections[n._id+"tick"],u={selection:d,side:n.side},d&&d.node()&&d.node().parentNode&&(o=B.getTranslate(d.node().parentNode),u.offsetLeft=o.x,u.offsetTop=o.y),n.title.hasOwnProperty("standoff")&&(u.pad=0)),$.draw(t,a+"title",{propContainer:n,propName:n._name+".title.text",placeholder:r._dfltTitle[i],avoid:u,transform:s,attributes:{x:l,y:c,"text-anchor":"middle"}})}),ee.syncOrAsync(m)}}function P(e){e=t+(e||"tick");return a[e]||(a[e]=function(e,t){var n,r,a,i;e._selections[t].size()?(a=n=1/0,i=r=-1/0,e._selections[t].each(function(){var e=ve(this),e=B.bBox(e.node().parentNode);n=Math.min(n,e.top),r=Math.max(r,e.bottom),a=Math.min(a,e.left),i=Math.max(i,e.right)})):i=a=r=n=0;return{top:n,bottom:r,left:a,right:i,height:r-n,width:i-a}}(h,e)),a[e]}},de.getTickSigns=function(e){var t=e._id.charAt(0),n=e.side==={x:"top",y:"right"}[t]?1:-1,n=[-1,1,n,-n];return"inside"!==e.ticks==("x"===t)&&(n=n.map(function(e){return-e})),e.side&&n.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)]),n},de.makeTransTickFn=function(t){return"x"===t._id.charAt(0)?function(e){return c(t._offset+t.l2p(e.x),0)}:function(e){return c(0,t._offset+t.l2p(e.x))}},de.makeTransTickLabelFn=function(t){var e=function(e){function t(e){return-1!==n.indexOf(e)}var n=e.ticklabelposition||"",r=t("top"),a=t("left"),i=t("right"),o=t("bottom"),s=t("inside"),l=o||a||r||i;if(!l&&!s)return[0,0];var c=e.side,u=l?(e.tickwidth||0)/2:0,d=3,f=e.tickfont?e.tickfont.size:12;(o||r)&&(u+=f*_,d+=(e.linewidth||0)/2);(a||i)&&(u+=(e.linewidth||0)/2,d+=3);s&&"top"===c&&(d-=f*(1-_));(a||r)&&(u=-u);"bottom"!==c&&"right"!==c||(d=-d);return[l?u:0,s?d:0]}(t),n=e[0],r=e[1];return"x"===t._id.charAt(0)?function(e){return c(n+t._offset+t.l2p(X(e)),r)}:function(e){return c(r,n+t._offset+t.l2p(X(e)))}},de.makeTickPath=function(e,t,n,r){r=void 0!==r?r:e.ticklen;var a=e._id.charAt(0),e=(e.linewidth||1)/2;return"x"===a?"M0,"+(t+e*n)+"v"+r*n:"M"+(t+e*n)+",0h"+r*n},de.makeLabelFns=function(r,t,e){function n(e){return-1!==c.indexOf(e)}var a,i,o,s,l,c=r.ticklabelposition||"",u=n("top"),d=n("left"),f=n("right"),p=n("bottom")||d||u||f,h=n("inside"),u="inside"===c&&"inside"===r.ticks||!h&&"outside"===r.ticks&&"boundaries"!==r.tickson,m=0,g=0,y=u?r.ticklen:0,y=(h?y*=-1:p&&(y=0),u&&(m+=y,e&&(e=ee.deg2rad(e),m=y*Math.cos(e)+1,g=y*Math.sin(e))),r.showticklabels&&(u||r.showline)&&(m+=.2*r.tickfont.size),{labelStandoff:m+=(r.linewidth||1)/2*(h?-1:1),labelShift:g}),v=0,e=r.side,u=r._id.charAt(0),b=r.tickangle;return"x"===u?(l=(s=!h&&"bottom"===e||h&&"top"===e)?1:-1,h&&(l*=-1),a=g*l,i=t+m*l,o=s?1:-.2,90===Math.abs(b)&&(h?o+=x:o=-90===b&&"bottom"===e?_:90===b&&"top"===e?x:.5,v=x/2*(b/90)),y.xFn=function(e){return e.dx+a+v*e.fontSize},y.yFn=function(e){return e.dy+i+e.fontSize*o},y.anchorFn=function(e,t){if(p){if(d)return"end";if(f)return"start"}return Q(t)&&0!==t&&180!==t?t*l<0!==h?"end":"start":"middle"},y.heightFn=function(e,t,n){return t<-60||60<t?-.5*n:"top"===r.side!==h?-n:0}):"y"===u&&(l=(s=!h&&"left"===e||h&&"right"===e)?1:-1,h&&(l*=-1),a=m,i=g*l,o=0,h||90!==Math.abs(b)||(o=-90===b&&"left"===e||90===b&&"right"===e?_:.5),h&&0!=(u=Q(b)?+b:0)&&(m=ee.deg2rad(u),v=Math.abs(Math.sin(m))*_*l,o=0),y.xFn=function(e){return e.dx+t-(a+e.fontSize*o)*l+v*e.fontSize},y.yFn=function(e){return e.dy+i+e.fontSize*x},y.anchorFn=function(e,t){return Q(t)&&90===Math.abs(t)?"middle":s?"end":"start"},y.heightFn=function(e,t,n){return"right"===r.side&&(t*=-1),t<-30?-n:t<30?-.5*n:0}),y},de.drawTicks=function(e,t,n){var r=t._id+"tick",a=(n=n||{}).vals,a=("period"===t.ticklabelmode&&(a=a.slice()).shift(),n.layer.selectAll("path."+r).data(t.ticks?a:[],V));a.exit().remove(),a.enter().append("path").classed(r,1).classed("ticks",1).classed("crisp",!1!==n.crisp).call(H.stroke,t.tickcolor).style("stroke-width",B.crispRound(e,t.tickwidth,1)+"px").attr("d",n.path).style("display",null),T(t,[C]),a.attr("transform",n.transFn)},de.drawGrid=function(e,t,n){var r=t._id+"grid",a=(n=n||{}).vals,i=n.counterAxis;if(!1===t.showgrid)a=[];else if(i&&de.shouldShowZeroLine(e,t,i))for(var o="array"===t.tickmode,s=0;s<a.length;s++){var l=a[s].x;if(o?!l:Math.abs(l)<t.dtick/100){if(a=a.slice(0,s).concat(a.slice(s+1)),!o)break;s--}}i=n.layer.selectAll("path."+r).data(a,V);i.exit().remove(),i.enter().append("path").classed(r,1).classed("crisp",!1!==n.crisp),t._gw=B.crispRound(e,t.gridwidth,1),i.attr("transform",n.transFn).attr("d",n.path).call(H.stroke,t.gridcolor||"#ddd").style("stroke-width",t._gw+"px").style("display",null),T(t,[L]),"function"==typeof n.path&&i.attr("d",n.path)},de.drawZeroLine=function(e,t,n){var r=t._id+"zl",a=de.shouldShowZeroLine(e,t,n.counterAxis),a=n.layer.selectAll("path."+r).data(a?[{x:0,id:t._id}]:[]);a.exit().remove(),a.enter().append("path").classed(r,1).classed("zl",1).classed("crisp",!1!==n.crisp).each(function(){n.layer.selectAll("path").sort(function(e,t){return i(e.id,t.id)})}),a.attr("transform",n.transFn).attr("d",n.path).call(H.stroke,t.zerolinecolor||H.defaultLine).style("stroke-width",B.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null),T(t,[o])},de.drawLabels=function(f,h,m){m=m||{};var p=f._fullLayout,e=h._id,g=e.charAt(0),t=m.cls||e+"tick",y=m.vals,l=m.labelFns,v=m.secondary?0:h.tickangle,n=(h._prevTickAngles||{})[t],b=m.layer.selectAll("g."+t).data(h.showticklabels?y:[],V),r=[];function x(e,s){e.each(function(e){var t=w.select(this),n=t.select(".text-math-group"),r=l.anchorFn(e,s),a=m.transFn.call(t.node(),e)+(Q(s)&&0!=+s?" rotate("+s+","+l.xFn(e)+","+(l.yFn(e)-e.fontSize/2)+")":""),i=u.lineCount(t),o=U*e.fontSize,e=l.heightFn(e,Q(s)?+s:0,(i-1)*o);e&&(a+=c(0,e)),n.empty()?((i=t.select("text")).attr({transform:a,"text-anchor":r}),i.style("opacity",1),h._adjustTickLabelsOverflow&&h._adjustTickLabelsOverflow()):(o=B.bBox(n.node()).width,n.attr("transform",a+c(o*{end:-.5,start:.5}[r],0)))})}b.enter().append("g").classed(t,1).append("text").attr("text-anchor","middle").each(function(e){var t=w.select(this),n=f._promises.length;t.call(u.positionText,l.xFn(e),l.yFn(e)).call(B.font,e.font,e.fontSize,e.fontColor).text(e.text).call(u.convertToTspans,f),f._promises[n]?r.push(f._promises.pop().then(function(){x(t,v)})):x(t,v)}),T(h,[O]),b.exit().remove(),m.repositionOnUpdate&&b.each(function(e){w.select(this).select("text").call(u.positionText,l.xFn(e),l.yFn(e))}),h._adjustTickLabelsOverflow=function(){var e=h.ticklabeloverflow;if(e&&"allow"!==e){var t,a=-1!==e.indexOf("hide"),i="x"===h._id.charAt(0),n=0,r=i?f._fullLayout.width:f._fullLayout.height,o=(-1!==e.indexOf("domain")&&(e=ee.simpleMap(h.range,h.r2l),n=h.l2p(e[0])+h._offset,r=h.l2p(e[1])+h._offset),Math.min(n,r)),s=Math.max(n,r),l=h.side,c=1/0,u=-1/0;for(t in b.each(function(e){var t,n,r=w.select(this);r.select(".text-math-group").empty()&&(t=B.bBox(r.node()),n=0,i?(t.right>s||t.left<o)&&(n=1):(t.bottom>s||t.top+(h.tickangle?0:e.fontSize/4)<o)&&(n=1),e=r.select("text"),n?a&&e.style("opacity",0):(e.style("opacity",1),c="bottom"===l||"right"===l?Math.min(c,i?t.top:t.left):-1/0,u="top"===l||"left"===l?Math.max(u,i?t.bottom:t.right):1/0))}),p._plots){var d=p._plots[t];h._id!==d.xaxis._id&&h._id!==d.yaxis._id||(d=i?d.yaxis:d.xaxis)&&(d["_visibleLabelMin_"+h._id]=c,d["_visibleLabelMax_"+h._id]=u)}}},h._hideCounterAxisInsideTickLabels=function(e){var t,n="x"===h._id.charAt(0),r=[];for(t in p._plots){var a=p._plots[t];h._id!==a.xaxis._id&&h._id!==a.yaxis._id||r.push(n?a.yaxis:a.xaxis)}r.forEach(function(a,i){a&&Y(a)&&(e||[o,L,C,O]).forEach(function(n){var r="tick"===n.K&&"text"===n.L&&"period"===h.ticklabelmode,e=p._plots[h._mainSubplot],e=n.K===o.K?e.zerolinelayer.selectAll("."+h._id+"zl"):n.K===L.K?e.gridlayer.selectAll("."+h._id):e[h._id.charAt(0)+"axislayer"];e.each(function(){var e=w.select(this);(e=n.L?e.selectAll(n.L):e).each(function(e){var e=h.l2p(r?X(e):e.x)+h._offset,t=w.select(this);e<h["_visibleLabelMax_"+a._id]&&e>h["_visibleLabelMin_"+a._id]?t.style("display","none"):"tick"!==n.K||i||t.style("display",null)})})})})},x(b,n+1?n:v);var _=null;h._selections&&(h._selections[t]=b);var e=[function(){return r.length&&Promise.all(r)}],a=(h.automargin&&p._redrawFromAutoMarginCount&&90===n?(_=90,e.push(function(){x(b,n)})):e.push(function(){if(x(b,v),y.length&&"x"===g&&!Q(v)&&("log"!==h.type||"D"!==String(h.dtick).charAt(0))){var n=_=0,r=[];if(b.each(function(e){n=Math.max(n,e.fontSize);var e=h.l2p(e.x),t=ve(this),t=B.bBox(t.node());r.push({top:0,bottom:10,height:10,left:e-t.width/2,right:e+t.width/2+2,width:t.width+2})}),"boundaries"!==h.tickson&&!h.showdividers||m.secondary){for(var e=y.length,e=Math.abs((y[e-1].x-y[0].x)*h._m)/(e-1),t=h.ticklabelposition||"",a=function(e){return-1!==t.indexOf(e)},i=a("top"),o=a("left"),s=a("right"),l=a("bottom")||o||i||s?(h.tickwidth||0)+6:0,c=e<2.5*n||"multicategory"===h.type||"realaxis"===h._name,u=0;u<r.length-1;u++)if(ee.bBoxIntersect(r[u],r[u+1],l)){_=c?90:30;break}}else{var d=2;for(h.ticks&&(d+=h.tickwidth/2),u=0;u<r.length;u++){var f=y[u].xbnd,p=r[u];if(null!==f[0]&&p.left-h.l2p(f[0])<d||null!==f[1]&&h.l2p(f[1])-p.right<d){_=90;break}}}_&&x(b,_)}}),h._tickAngles&&e.push(function(){h._tickAngles[t]=null===_?Q(v)?v:0:_}),h._anchorAxis),a=(a&&a.autorange&&Y(h)&&!D(p,h._id)&&(p._insideTickLabelsAutorange||(p._insideTickLabelsAutorange={}),p._insideTickLabelsAutorange[a._name+".autorange"]=a.autorange,e.push(function(){b.each(function(e,t){var n=ve(this);n.select(".text-math-group").empty()&&(h._vals[t].bb=B.bBox(n.node()))})})),ee.syncOrAsync(e));return a&&a.then&&f._promises.push(a),a},de.getPxPosition=function(e,t){var n,e=e._fullLayout._size,r=t._id.charAt(0),a=t.side;return"free"!==t.anchor?n=t._anchorAxis:"x"===r?n={_offset:e.t+(1-(t.position||0))*e.h,_length:0}:"y"===r&&(n={_offset:e.l+(t.position||0)*e.w,_length:0}),"top"===a||"left"===a?n._offset:"bottom"===a||"right"===a?n._offset+n._length:void 0},de.shouldShowZeroLine=function(e,t,n){var r=ee.simpleMap(t.range,t.r2l);return r[0]*r[1]<=0&&t.zeroline&&("linear"===t.type||"-"===t.type)&&!(t.rangebreaks&&t.maskBreaks(0)===ue)&&(K(t,0)||!function(e,i,t,n){var r=t._mainAxis;if(r){var a=e._fullLayout,o=i._id.charAt(0),s=de.counterLetter(i._id),l=i._offset+(Math.abs(n[0])<Math.abs(n[1])==("x"===o)?0:i._length),n=a._plots[t._mainSubplot];if(!(n.mainplotinfo||n).overlays.length)return f(t);for(var c=de.list(e,s),u=0;u<c.length;u++){var d=c[u];if(d._mainAxis===r&&f(d))return 1}}function f(e){if(!e.showline||!e.linewidth)return!1;var t=Math.max((e.linewidth+i.zerolinewidth)/2,1);function n(e){return"number"==typeof e&&Math.abs(e-l)<t}if(n(e._mainLinePosition)||n(e._mainMirrorPosition))return!0;var r,a=e._linepositions||{};for(r in a)if(n(a[r][0])||n(a[r][1]))return!0}}(e,t,n,r)||function(e,t){for(var n=e._fullData,r=t._mainSubplot,a=t._id.charAt(0),i=0;i<n.length;i++){var o=n[i];if(!0===o.visible&&o.xaxis+o.yaxis===r){if(q.traceIs(o,"bar-like")&&o.orientation==={x:"h",y:"v"}[a])return!0;if(o.fill&&o.fill.charAt(o.fill.length-1)===a)return!0}}return!1}(e,t))},de.clipEnds=function(t,e){return e.filter(function(e){return K(t,e.x)})},de.allowAutoMargin=function(e){for(var t=de.list(e,"",!0),n=0;n<t.length;n++){var r=t[n];r.automargin&&(j.allowAutoMargin(e,be(r)),r.mirror&&j.allowAutoMargin(e,xe(r))),q.getComponentMethod("rangeslider","isVisible")(r)&&j.allowAutoMargin(e,_e(r))}},de.swap=function(e,t){for(var n=function(e,t){var n,r,a,i=[];for(n=0;n<t.length;n++){var o=[],s=e._fullData[t[n]].xaxis,l=e._fullData[t[n]].yaxis;if(s&&l){for(r=0;r<i.length;r++)-1===i[r].x.indexOf(s)&&-1===i[r].y.indexOf(l)||o.push(r);if(o.length){var c=i[o[0]];if(1<o.length)for(r=1;r<o.length;r++)a=i[o[r]],k(c.x,a.x),k(c.y,a.y);k(c.x,[s]),k(c.y,[l])}else i.push({x:[s],y:[l]})}}return i}(e,t),r=0;r<n.length;r++){T=w=_=x=b=v=y=g=m=h=p=f=i=a=d=u=c=l=s=o=void 0;var a,i,o=e,s=n[r].x,l=n[r].y,c=[],u=[],d=o.layout;for(a=0;a<s.length;a++)c.push(de.getFromId(o,s[a]));for(a=0;a<l.length;a++)u.push(de.getFromId(o,l[a]));var f=Object.keys(A),p=["anchor","domain","overlaying","position","side","tickangle","editType"],h=["linear","log"];for(a=0;a<f.length;a++){var m=f[a],g=c[0][m],y=u[0][m],v=!0,b=!1,x=!1;if("_"!==m.charAt(0)&&"function"!=typeof g&&-1===p.indexOf(m)){for(i=1;i<c.length&&v;i++){var _=c[i][m];"type"===m&&-1!==h.indexOf(g)&&-1!==h.indexOf(_)&&g!==_?b=!0:_!==g&&(v=!1)}for(i=1;i<u.length&&v;i++){var w=u[i][m];"type"===m&&-1!==h.indexOf(y)&&-1!==h.indexOf(w)&&y!==w?x=!0:u[i][m]!==y&&(v=!1)}v&&(b&&(d[c[0]._name].type="linear"),x&&(d[u[0]._name].type="linear"),function(e,t,n,r,a){var i,o=ee.nestedProperty,s=o(e[n[0]._name],t).get(),l=o(e[r[0]._name],t).get();"title"===t&&(s&&s.text===a.x&&(s.text=a.y),l&&l.text===a.y&&(l.text=a.x));for(i=0;i<n.length;i++)o(e,n[i]._name+"."+t).set(l);for(i=0;i<r.length;i++)o(e,r[i]._name+"."+t).set(s)}(d,m,c,u,o._fullLayout._dfltTitle))}}for(a=0;a<o._fullLayout.annotations.length;a++){var T=o._fullLayout.annotations[a];-1!==s.indexOf(T.xref)&&-1!==l.indexOf(T.yref)&&ee.swapAttrs(d.annotations[a],["?"])}}}},{"../../components/color":157,"../../components/drawing":179,"../../components/titles":255,"../../constants/alignment":262,"../../constants/numerical":267,"../../lib":287,"../../lib/svg_text_utils":310,"../../plots/plots":371,"../../registry":378,"./autorange":333,"./axis_autotype":335,"./axis_ids":338,"./clean_ticks":340,"./layout_attributes":349,"./set_convert":356,"@plotly/d3":20,"fast-isnumeric":33}],335:[function(e,t,n){"use strict";var u=e("fast-isnumeric"),r=e("../../lib"),d=e("../../constants/numerical").BADNUM,l=r.isArrayOrTypedArray,f=r.isDateTime,p=r.cleanNumber,h=Math.round;function m(e){return Math.max(1,(e-1)/1e3)}t.exports=function(e,t,n){var r=e,e=n.noMultiCategory;if(l(r)&&!r.length)return"-";if(!e&&(l((s=r)[0])&&l(s[1])))return"multicategory";if(e&&Array.isArray(r[0])){for(var a=[],i=0;i<r.length;i++)if(l(r[i]))for(var o=0;o<r[i].length;o++)a.push(r[i][o]);r=a}if(function(e,t){for(var n=e.length,r=m(n),a=0,i=0,o={},s=0;s<n;s+=r){var l=h(s),l=e[l],c=String(l);o[c]||(o[c]=1,f(l,t)&&a++,u(l)&&i++)}return 2*i<a}(r,t))return"date";var s="strict"!==n.autotypenumbers;return function(e,t){for(var n=e.length,r=m(n),a=0,i=0,o={},s=0;s<n;s+=r){var l=h(s),l=e[l],c=String(l);o[c]||(o[c]=1,"boolean"==(c=typeof l)?i++:(t?p(l)!==d:"number"==c)?a++:"string"==c&&i++)}return 2*a<i}(r,s)?"category":function(e,t){for(var n=e.length,r=0;r<n;r++)if(function(e,t){return t?u(e):"number"==typeof e}(e[r],t))return 1;return}(r,s)?"linear":"-"}},{"../../constants/numerical":267,"../../lib":287,"fast-isnumeric":33}],336:[function(e,t,n){"use strict";var c=e("fast-isnumeric"),g=e("../../registry"),y=e("../../lib"),v=e("../array_container_defaults"),b=e("./layout_attributes"),x=e("./tick_value_defaults"),_=e("./tick_mark_defaults"),w=e("./tick_label_defaults"),T=e("./prefix_suffix_defaults"),k=e("./category_order_defaults"),A=e("./line_grid_defaults"),M=e("./set_convert"),E=e("./constants").WEEKDAY_PATTERN,u=e("./constants").HOUR_PATTERN;function S(n,r,e){function t(e,t){return y.coerce(n,r,b.rangebreaks,e,t)}if(t("enabled")){var a=t("bounds");if(a&&2<=a.length){var i,o,s="";if(2===a.length)for(i=0;i<2;i++)if(o=d(a[i])){s=E;break}var l=t("pattern",s);if(l===E)for(i=0;i<2;i++)(o=d(a[i]))&&(r.bounds[i]=a[i]=o-1);if(l)for(i=0;i<2;i++)switch(o=a[i],l){case E:if(!c(o))return void(r.enabled=!1);if((o=+o)!==Math.floor(o)||o<0||7<=o)return void(r.enabled=!1);r.bounds[i]=a[i]=o;break;case u:if(!c(o))return void(r.enabled=!1);if((o=+o)<0||24<o)return void(r.enabled=!1);r.bounds[i]=a[i]=o}!1===e.autorange&&((e=e.range)[0]<e[1]?a[0]<e[0]&&a[1]>e[1]&&(r.enabled=!1):a[0]>e[0]&&a[1]<e[1]&&(r.enabled=!1))}else{e=t("values");e&&e.length?t("dvalue"):r.enabled=!1}}}t.exports=function(e,t,n,r,a){var i=r.letter,o=r.font||{},s=r.splomStash||{},l=n("visible",!r.visibleDflt),c=t._template||{},c=t.type||c.type||"-",u=("date"===c&&(g.getComponentMethod("calendars","handleDefaults")(e,t,"calendar",r.calendar),r.noTicklabelmode||(d=n("ticklabelmode"))),""),d=(r.noTicklabelposition&&"multicategory"!==c||(u=y.coerce(e,t,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===d?["outside","inside"]:"x"===i?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),r.noTicklabeloverflow||n("ticklabeloverflow",-1!==u.indexOf("inside")?"hide past domain":"category"===c||"multicategory"===c?"allow":"hide past div"),M(t,a),!t.isValidRange(e.range)),u=(!n("autorange",d=d&&r.reverseDflt?"reversed":d)||"linear"!==c&&"-"!==c||n("rangemode"),n("range"),t.cleanRange(),k(e,t,n,r),"category"===c||r.noHover||n("hoverformat"),n("color")),d=u!==b.color.dflt?u:o.color,s=s.label||a._dfltTitle[i];if(T(e,t,n,c,r),l){n("title.text",s),y.coerceFont(n,"title.font",{family:o.family,size:y.bigFont(o.size),color:d}),x(e,t,n,c),w(e,t,n,c,r),_(e,t,n,r),A(e,t,n,{dfltColor:u,bgColor:r.bgColor,showGrid:r.showGrid,attributes:b}),(t.showline||t.ticks)&&n("mirror"),r.automargin&&n("automargin");var f,i="multicategory"===c;if(r.noTickson||"category"!==c&&!i||!t.ticks&&!t.showgrid||"boundaries"===n("tickson",f=i?"boundaries":f)&&delete t.ticklabelposition,i&&n("showdividers")&&(n("dividercolor"),n("dividerwidth")),"date"===c)if(v(e,t,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:S}),t.rangebreaks.length){for(var p=0;p<t.rangebreaks.length;p++)if(t.rangebreaks[p].pattern===E){t._hasDayOfWeekBreaks=!0;break}if(M(t,a),a._has("scattergl")||a._has("splom"))for(var h=0;h<r.data.length;h++){var m=r.data[h];"scattergl"!==m.type&&"splom"!==m.type||(m.visible=!1,y.warn(m.type+" traces do not work on axes with rangebreaks. Setting trace "+m.index+" to `visible: false`."))}}else delete t.rangebreaks}return t};var r={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function d(e){if("string"==typeof e)return r[e.substr(0,3).toLowerCase()]}},{"../../lib":287,"../../registry":378,"../array_container_defaults":329,"./category_order_defaults":339,"./constants":341,"./layout_attributes":349,"./line_grid_defaults":351,"./prefix_suffix_defaults":353,"./set_convert":356,"./tick_label_defaults":358,"./tick_mark_defaults":359,"./tick_value_defaults":360,"fast-isnumeric":33}],337:[function(e,t,n){"use strict";var e=e("../../constants/docs"),r=e.FORMAT_LINK,a=e.DATE_FORMAT_LINK;function i(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+r+"."].join(" ")}function o(e,t){return i(e,t)+[" And for dates see: "+a+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}t.exports={axisHoverFormat:function(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?i:o)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:i,descriptionWithDates:o}},{"../../constants/docs":264}],338:[function(e,t,u){"use strict";var o=e("../../registry"),a=e("./constants");function n(e,t){if(t&&t.length)for(var n=0;n<t.length;n++)if(t[n][e])return!0;return!1}u.id2name=function(e){var t;if("string"==typeof e&&e.match(a.AX_ID_PATTERN))return t=e.split(" ")[0].substr(1),"1"===t&&(t=""),e.charAt(0)+"axis"+t},u.name2id=function(e){var t;if(e.match(a.AX_NAME_PATTERN))return t=e.substr(5),"1"===t&&(t=""),e.charAt(0)+t},u.cleanId=function(e,t,n){var r=/( domain)$/.test(e);if("string"==typeof e&&e.match(a.AX_ID_PATTERN)&&((!t||e.charAt(0)===t)&&(!r||n)))return"1"===(t=e.split(" ")[0].substr(1).replace(/^0+/,""))&&(t=""),e.charAt(0)+t+(r&&n?" domain":"")},u.list=function(e,t,n){var r=e._fullLayout;if(!r)return[];var a=u.listIds(e,t),i=new Array(a.length);for(l=0;l<a.length;l++){var o=a[l];i[l]=r[o.charAt(0)+"axis"+o.substr(1)]}if(!n)for(var s=r._subplots.gl3d||[],l=0;l<s.length;l++){var c=r[s[l]];t?i.push(c[t+"axis"]):i.push(c.xaxis,c.yaxis,c.zaxis)}return i},u.listIds=function(e,t){e=e._fullLayout;if(!e)return[];e=e._subplots;return t?e[t+"axis"]:e.xaxis.concat(e.yaxis)},u.getFromId=function(e,t,n){e=e._fullLayout;return t=void 0===t||"string"!=typeof t?t:t.replace(" domain",""),"x"===n?t=t.replace(/y[0-9]*/,""):"y"===n&&(t=t.replace(/x[0-9]*/,"")),e[u.id2name(t)]},u.getFromTrace=function(e,t,n){var r,a=e._fullLayout,i=null;return o.traceIs(t,"gl3d")?"scene"===(r=t.scene).substr(0,5)&&(i=a[r][n+"axis"]):i=u.getFromId(e,t[n+"axis"]||n),i},u.idSort=function(e,t){var n=e.charAt(0),r=t.charAt(0);return n!==r?r<n?1:-1:+(e.substr(1)||1)-+(t.substr(1)||1)},u.ref2id=function(e){return!!/^[xyz]/.test(e)&&e.split(" ")[0]},u.isLinked=function(e,t){return n(t,e._axisMatchGroups)||n(t,e._axisConstraintGroups)}},{"../../registry":378,"./constants":341}],339:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var a,i;"category"===t.type&&(e=e.categoryarray,"array"===(a=n("categoryorder",a=(e=Array.isArray(e)&&0<e.length)?"array":a))&&(i=n("categoryarray")),"trace"===(a=e||"array"!==a?a:t.categoryorder="trace")?t._initialCategories=[]:"array"===a?t._initialCategories=i.slice():(i=function(e,t){var n,r,a=t.dataAttr||e._id.charAt(0),i={};if(t.axData)n=t.axData;else for(n=[],r=0;r<t.data.length;r++){var o=t.data[r];o[a+"axis"]===e._id&&n.push(o)}for(r=0;r<n.length;r++)for(var s=n[r][a],l=0;l<s.length;l++){var c=s[l];null!=c&&(i[c]=1)}return Object.keys(i)}(t,r).sort(),"category ascending"===a?t._initialCategories=i:"category descending"===a&&(t._initialCategories=i.reverse())))}},{}],340:[function(e,t,n){"use strict";var o=e("fast-isnumeric"),a=e("../../lib"),e=e("../../constants/numerical"),s=e.ONEDAY,i=e.ONEWEEK;n.dtick=function(e,t){var n="log"===t,r="date"===t,t="category"===t,a=r?s:1;if(!e)return a;if(o(e))return(e=Number(e))<=0?a:t?Math.max(1,Math.round(e)):r?Math.max(.1,e):e;if("string"!=typeof e||!r&&!n)return a;var t=e.charAt(0),i=e.substr(1);return(i=o(i)?Number(i):0)<=0||!(r&&"M"===t&&i===Math.round(i)||n&&"L"===t||n&&"D"===t&&(1===i||2===i))?a:e},n.tick0=function(e,t,n,r){return"date"===t?a.cleanDate(e,a.dateTick0(n,r%i==0?1:0)):"D1"!==r&&"D2"!==r?o(e)?Number(e):0:void 0}},{"../../constants/numerical":267,"../../lib":287,"fast-isnumeric":33}],341:[function(e,t,n){"use strict";e=e("../../lib/regex").counter;t.exports={idRegex:{x:e("x","( domain)?"),y:e("y","( domain)?")},attrRegex:e("[xy]axis"),xAxisMatch:e("xaxis"),yAxisMatch:e("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":303}],342:[function(e,t,n){"use strict";var T=e("../../lib"),D=e("./autorange"),I=e("./axis_ids").id2name,k=e("./layout_attributes"),R=e("./scale_zoom"),A=e("./set_convert"),P=e("../../constants/numerical").ALMOST_EQUAL,a=e("../../constants/alignment").FROM_BL;function M(e,t){var n=t.domain;return(n=n||e[I(t.overlaying)].domain)[1]-n[0]}function E(e,t){for(var n=0;n<e.length;n++)if(e[n][t])return e[n];return null}function S(e,t,n,r){for(var a,i,o,s=E(e,t),l=(null===s?((s={})[t]=1,o=e.length,e.push(s)):o=e.indexOf(s),Object.keys(s)),c=0;c<e.length;c++)if(a=e[c],c!==o&&a[n]){for(var u=a[n],d=0;d<l.length;d++)a[i=l[d]]=p(u,p(r,s[i]));return void e.splice(o,1)}if(1!==r)for(d=0;d<l.length;d++){var f=l[d];s[f]=p(r,s[f])}s[n]=1}function p(e,t){var n,r,a="",i="",o=("string"==typeof e&&(n=(a=e.match(/^[xy]*/)[0]).length,e=+e.substr(n)),"string"==typeof t&&(r=(i=t.match(/^[xy]*/)[0]).length,t=+t.substr(r)),e*t);return n||r?n&&r&&a.charAt(0)!==i.charAt(0)?n===r?o:(r<n?a.substr(r):i.substr(n))+o:a+i+e*t:o}function N(e,t){var n=e._inputDomain,r=a[e.constraintoward],r=n[0]+(n[1]-n[0])*r;e.domain=e._input.domain=[r+(n[0]-r)/t,r+(n[1]-r)/t],e.setScale()}n.handleDefaults=function(e,n,t){for(var r,a,i,o,s=t.axIds,l=t.axHasImage,c=n._axisConstraintGroups=[],u=n._axisMatchGroups=[],d=0;d<s.length;d++)!function(n,r,e){var t=e.axIds,a=e.layoutOut,e=e.hasImage,i=a._axisConstraintGroups,o=a._axisMatchGroups,s=r._id,l=s.charAt(0),l=((a._splomAxes||{})[l]||{})[s]||{},c=r._id,s="x"===c.charAt(0);function u(e,t){return T.coerce(n,r,k,e,t)}r._matchGroup=null,r._constraintGroup=null,u("constrain",e?"domain":"range"),T.coerce(n,r,{constraintoward:{valType:"enumerated",values:s?["left","center","right"]:["bottom","middle","top"],dflt:s?"center":"middle"}},"constraintoward");var d,f,p=r.type,h=[];for(d=0;d<t.length;d++)(f=t[d])!==c&&a[I(f)].type===p&&h.push(f);var m=E(i,c);if(m){var g=[];for(d=0;d<h.length;d++)f=h[d],m[f]||g.push(f);h=g}var y,v,b=h.length;b&&(n.matches||l.matches)&&(y=T.coerce(n,r,{matches:{valType:"enumerated",values:h,dflt:-1!==h.indexOf(l.matches)?l.matches:void 0}},"matches"));l=e&&!s?r.anchor:void 0;b&&!y&&(n.scaleanchor||l)&&(v=T.coerce(n,r,{scaleanchor:{valType:"enumerated",values:h}},"scaleanchor",l));y?(r._matchGroup=S(o,c,y,1),e=a[I(y)],b=M(a,r)/M(a,e),s!=("x"===y.charAt(0))&&(b=(s?"x":"y")+b),S(i,c,y,b)):n.matches&&-1!==t.indexOf(n.matches)&&T.warn("ignored "+r._name+'.matches: "'+n.matches+'" to avoid an infinite loop');v?(l=(l=u("scaleratio"))||(r.scaleratio=1),S(i,c,v,l)):n.scaleanchor&&-1!==t.indexOf(n.scaleanchor)&&T.warn("ignored "+r._name+'.scaleanchor: "'+n.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}(i=e[a=I(s[d])],o=n[a],{axIds:s,layoutOut:n,hasImage:l[a]});function f(e,t){for(d=0;d<e.length;d++)for(r in v=e[d])n[I(r)][t]=v}for(f(u,"_matchGroup"),d=0;d<c.length;d++)for(r in v=c[d])if((o=n[I(r)]).fixedrange){for(var p in v){p=I(p);!1===(e[p]||{}).fixedrange&&T.warn("fixedrange was specified as false for axis "+p+" but was overridden because another axis in its constraint group has fixedrange true"),n[p].fixedrange=!0}break}for(d=0;d<c.length;){for(r in v=c[d]){(o=n[I(r)])._matchGroup&&Object.keys(o._matchGroup).length===Object.keys(v).length&&(c.splice(d,1),d--);break}d++}f(c,"_constraintGroup");var h=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],m=!1,g=!1;function y(){w=o[_],"rangebreaks"===_&&(g=o._hasDayOfWeekBreaks)}for(d=0;d<u.length;d++)for(var v=u[d],b=0;b<h.length;b++){var x,_=h[b],w=null;for(r in v)if(i=e[a=I(r)],o=n[a],_ in o){if(!o.matches&&(x=o,_ in i)){y();break}null===w&&_ in i&&y()}if("range"===_&&w&&(m=!0),null!==(w=null===(w="autorange"===_&&null===w&&m?!1:w)&&_ in x?x[_]:w))for(r in v)(o=n[I(r)])[_]="range"===_?w.slice():w,"rangebreaks"===_&&(o._hasDayOfWeekBreaks=g,A(o,n))}},n.enforce=function(e){for(var t,n,r,a,i=e._fullLayout,o=i._axisConstraintGroups||[],s=0;s<o.length;s++){for(var l=function(e,t){for(var n=(t=t._size).h/t.w,r={},a=Object.keys(e),i=0;i<a.length;i++){var o=a[i];if("string"==typeof(c=e[o]))for(var s=c.match(/^[xy]*/)[0],l=s.length,c=+c.substr(l),u="y"===s.charAt(0)?n:1/n,d=0;d<l;d++)c*=u;r[o]=c}return r}(o[s],i),c=Object.keys(l),u=1/0,d=0,f=1/0,p={},h={},m=!1,g=0;g<c.length;g++)h[t=c[g]]=n=i[I(t)],n._inputDomain?n.domain=n._inputDomain.slice():n._inputDomain=n.domain.slice(),n._inputRange||(n._inputRange=n.range.slice()),n.setScale(),p[t]=r=Math.abs(n._m)/l[t],u=Math.min(u,r),"domain"!==n.constrain&&n._constraintShrinkable||(f=Math.min(f,r)),delete n._constraintShrinkable,d=Math.max(d,r),"domain"===n.constrain&&(m=!0);if(!(P*d<u)||m)for(g=0;g<c.length;g++)if(r=p[t=c[g]],y=(n=h[t]).constrain,r!==f||"domain"===y)if(a=r/f,"range"===y)R(n,a);else{var y=n._inputDomain,v=(n.domain[1]-n.domain[0])/(y[1]-y[0]),b=(n.r2l(n.range[1])-n.r2l(n.range[0]))/(n.r2l(n._inputRange[1])-n.r2l(n._inputRange[0]));if((a/=v)*b<1)n.domain=n._input.domain=y.slice(),R(n,a);else{if(b<1&&(n.range=n._input.range=n._inputRange.slice(),a*=b),n.autorange){for(var x,v=n.r2l(n.range[0]),y=n.r2l(n.range[1]),b=(v+y)/2,_=b,w=b,T=Math.abs(y-b),k=b-T*a*1.0001,A=b+T*a*1.0001,M=D.makePadFn(i,n,0),E=D.makePadFn(i,n,1),S=(N(n,a),Math.abs(n._m)),b=D.concatExtremes(e,n),L=b.min,C=b.max,O=0;O<L.length;O++)k<(x=L[O].val-M(L[O])/S)&&x<_&&(_=x);for(O=0;O<C.length;O++)(x=C[O].val+E(C[O])/S)<A&&w<x&&(w=x);a/=(w-_)/(2*T),_=n.l2r(_),w=n.l2r(w),n.range=n._input.range=v<y?[_,w]:[w,_]}N(n,a)}}}},n.getAxisGroup=function(e,t){for(var n=e._axisMatchGroups,r=0;r<n.length;r++)if(n[r][t])return"g"+r;return t},n.clean=function(e,t){if(t._inputDomain){for(var n=!1,r=t._id,a=e._fullLayout._axisConstraintGroups,i=0;i<a.length;i++)if(a[i][r]){n=!0;break}n&&"domain"===t.constrain||(t._input.domain=t.domain=t._inputDomain,delete t._inputDomain)}}},{"../../constants/alignment":262,"../../constants/numerical":267,"../../lib":287,"./autorange":333,"./axis_ids":338,"./layout_attributes":349,"./scale_zoom":354,"./set_convert":356}],343:[function(e,t,c){"use strict";var he=e("@plotly/d3"),me=e("../../lib"),ge=me.numberFormat,ye=e("tinycolor2"),r=e("has-passive-events"),ve=e("../../registry"),i=me.strTranslate,be=e("../../lib/svg_text_utils"),a=e("../../components/color"),xe=e("../../components/drawing"),He=e("../../components/fx"),_e=e("./axes"),u=e("../../lib/setcursor"),Be=e("../../components/dragelement"),n=e("../../components/dragelement/helpers"),we=n.selectingOrDrawing,Ue=n.freeMode,Ve=e("../../constants/alignment").FROM_TL,Ye=e("../../lib/clear_gl_canvases"),$e=e("../../plot_api/subroutines").redrawReglTraces,Ge=e("../plots"),Te=e("./axis_ids").getFromId,We=e("./select").prepSelect,Ze=e("./select").clearSelect,Xe=e("./select").selectOnClick,ke=e("./scale_zoom"),Ae=e("./constants"),Me=Ae.MINDRAG,Ee=Ae.MINZOOM,o=!0;function s(t,e,n,r){e=me.ensureSingle(t.draglayer,e,n,function(e){e.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id)});return e.call(u,r),e.node()}function Se(e,t,n,r,a,i,o){e=s(e,"rect",t,n);return he.select(e).call(xe.setRect,r,a,i,o),e}function Le(e,t){for(var n=0;n<e.length;n++)if(!e[n].fixedrange)return t;return""}function Ce(e,t,n,r,a){for(var i=0;i<e.length;i++){var o,s,l=e[i];l.fixedrange||(l.rangebreaks?(s=(o="y"===l._id.charAt(0))?1-n:n,r[l._name+".range[0]"]=l.l2r(l.p2l((o?1-t:t)*l._length)),r[l._name+".range[1]"]=l.l2r(l.p2l(s*l._length))):(o=l._rl[0],s=l._rl[1]-o,r[l._name+".range[0]"]=l.l2r(o+s*t),r[l._name+".range[1]"]=l.l2r(o+s*n)))}a&&a.length&&Ce(a,a=(t+(1-n))/2,1-a,r,[])}function Oe(e,t){for(var n=0;n<e.length;n++){var r,a=e[n];a.fixedrange||(a.rangebreaks?(r=a._length,r=(a.p2l(0+t)-a.p2l(0)+(a.p2l(r+t)-a.p2l(r)))/2,a.range=[a.l2r(a._rl[0]-r),a.l2r(a._rl[1]-r)]):a.range=[a.l2r(a._rl[0]-t/a._m),a.l2r(a._rl[1]-t/a._m)])}}function De(e,t,n,r,a){return e.append("path").attr("class","zoombox").style({fill:.2<t?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",i(n,r)).attr("d",a+"Z")}function Ie(e,t,n){return e.append("path").attr("class","zoombox-corners").style({fill:a.background,stroke:a.defaultLine,"stroke-width":1,opacity:0}).attr("transform",i(t,n)).attr("d","M0,0Z")}function Re(e,t,n,r,a,i){e.attr("d",r+"M"+n.l+","+n.t+"v"+n.h+"h"+n.w+"v-"+n.h+"h-"+n.w+"Z"),l(e,t,a,i)}function l(e,t,n,r){n||(e.transition().style("fill",.2<r?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function Pe(e){he.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Ne(e){o&&e.data&&e._context.showTips&&(me.notifier(me._(e,"Double-click to zoom back out"),"long"),o=!1)}function Fe(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,Ee)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function ze(e,t,n,r,a){for(var i,o,s,l,c=!1,u={},d={},f=(a||{}).xaHash,p=(a||{}).yaHash,h=0;h<t.length;h++){var m=t[h];for(i in n)if(m[i]){for(s in m)a&&(f[s]||p[s])||("x"===s.charAt(0)?n:r)[s]||(u[s]=i);for(o in r)a&&(f[o]||p[o])||!m[o]||(c=!0)}for(o in r)if(m[o])for(l in m)a&&(f[l]||p[l])||("x"===l.charAt(0)?n:r)[l]||(d[l]=o)}c&&(me.extendFlat(u,d),d={});var g={},y=[];for(s in u){var v=Te(e,s);y.push(v),g[v._id]=v}var b={},x=[];for(l in d){var _=Te(e,l);x.push(_),b[_._id]=_}return{xaHash:g,yaHash:b,xaxes:y,yaxes:x,xLinks:u,yLinks:d,isSubplotConstrained:c}}function je(e,t){var n;r?(n=void 0!==e.onwheel?"wheel":"mousewheel",e._onwheel&&e.removeEventListener(n,e._onwheel),e._onwheel=t,e.addEventListener(n,t,{passive:!1})):void 0!==e.onwheel?e.onwheel=t:void 0!==e.onmousewheel?e.onmousewheel=t:e.isAddedWheelEvent||(e.isAddedWheelEvent=!0,e.addEventListener("wheel",t,{passive:!1}))}function qe(e){var t,n=[];for(t in e)n.push(e[t]);return n}t.exports={makeDragBox:function(v,p,t,n,r,a,b,x){var _,w,T,k,h,m,i,o,l,c,g,A,M,E,s,S,L,q,H,B,u,U,V,Y=v._fullLayout._zoomlayer,y=b+x==="nsew",$=1===(b+x).length;function d(){if(_=p.xaxis,w=p.yaxis,l=_._length,c=w._length,i=_._offset,o=w._offset,(T={})[_._id]=_,(k={})[w._id]=w,b&&x)for(var e=p.overlays,t=0;t<e.length;t++){var n=e[t].xaxis,n=(T[n._id]=n,e[t].yaxis);k[n._id]=n}h=qe(T),m=qe(k),M=Le(h,x),E=Le(m,b),s=!E&&!M,A=ze(v,v._fullLayout._axisMatchGroups,T,k);var r=(g=ze(v,v._fullLayout._axisConstraintGroups,T,k,A)).isSubplotConstrained||A.isSubplotConstrained,r=(S=x||r,L=b||r,v._fullLayout);q=r._has("scattergl"),H=r._has("splom"),B=r._has("svg")}d(),e=E+M,G=v._fullLayout.dragmode,W=y;var G,W,e=e?"nsew"!==e?e.toLowerCase()+"-resize":W?"":"pan"===G?"move":"crosshair":"pointer",C=Se(p,b+x+"drag",e,t,n,r,a);if(s&&!y)return C.onmousedown=null,C.style.pointerEvents="none",C;var f,O,D,Z,X,J,I,K,R,Q,P={element:C,gd:v,plotinfo:p};function ee(){P.plotinfo.selection=!1,Ze(v)}function te(e,t){var n=P.gd;if(0<=n._fullLayout._activeShapeIndex)n._fullLayout._deactivateShape(n);else{var r,a,i,o=n._fullLayout.clickmode;if(Pe(n),2===e&&!$)if(!v._transitioningWithDuration){var s,l,c,u=v._context.doubleClick,d=[],f=(M&&(d=d.concat(h)),E&&(d=d.concat(m)),A.xaxes&&(d=d.concat(A.xaxes)),A.yaxes&&(d=d.concat(A.yaxes)),{});if("reset+autosize"===u)for(u="autosize",l=0;l<d.length;l++)if((s=d[l])._rangeInitial&&(s.range[0]!==s._rangeInitial[0]||s.range[1]!==s._rangeInitial[1])||!s._rangeInitial&&!s.autorange){u="reset";break}if("autosize"===u)for(l=0;l<d.length;l++)(s=d[l]).fixedrange||(f[s._name+".autorange"]=!0);else if("reset"===u)for((M||g.isSubplotConstrained)&&(d=d.concat(g.xaxes)),E&&!g.isSubplotConstrained&&(d=d.concat(g.yaxes)),g.isSubplotConstrained&&(M?E||(d=d.concat(m)):d=d.concat(h)),l=0;l<d.length;l++)(s=d[l]).fixedrange||(s._rangeInitial?(c=s._rangeInitial,f[s._name+".range[0]"]=c[0],f[s._name+".range[1]"]=c[1]):f[s._name+".autorange"]=!0);v.emit("plotly_doubleclick",null),ve.call("_guiRelayout",v,f)}y?(-1<o.indexOf("select")&&Xe(t,n,h,m,p.id,P),-1<o.indexOf("event")&&He.click(n,t,p.id)):1===e&&$&&(a=(r=b?w:_)._name+".range["+(o="s"===b||"w"===x?0:1)+"]",t=o,o=(e=r).range[t],t=Math.abs(o-e.range[1-t]),e="date"===e.type?o:"log"===e.type?(i=Math.ceil(Math.max(0,-Math.log(t)/Math.LN10))+3,ge("."+i+"g")(Math.pow(10,o))):(i=Math.floor(Math.log(Math.abs(o))/Math.LN10)-Math.floor(Math.log(t)/Math.LN10)+4,ge("."+String(i)+"g")(o)),t="left",i="middle",r.fixedrange||(b?(i="n"===b?"top":"bottom","right"===r.side&&(t="right")):"e"===x&&(t="right"),n._context.showAxisRangeEntryBoxes&&he.select(C).call(be.makeEditable,{gd:n,immediate:!0,background:n._fullLayout.paper_bgcolor,text:String(e),fill:r.tickfont?r.tickfont.color:"#444",horizontalAlign:t,verticalAlign:i}).on("edit",function(e){e=r.d2r(e);void 0!==e&&ve.call("_guiRelayout",n,a,e)})))}}function ne(e,t){if(v._transitioningWithDuration)return!1;var e=Math.max(0,Math.min(l,U*e+f)),t=Math.max(0,Math.min(c,V*t+O)),n=Math.abs(e-f),r=Math.abs(t-O);function a(){I="",D.r=D.l,D.t=D.b,R.attr("d","M0,0Z")}D.l=Math.min(f,e),D.r=Math.max(f,e),D.t=Math.min(O,t),D.b=Math.max(O,t),g.isSubplotConstrained?Ee<n||Ee<r?(I="xy",r/c<n/l?(r=n*c/l,t<O?D.t=O-r:D.b=O+r):(n=r*l/c,e<f?D.l=f-n:D.r=f+n),R.attr("d",Fe(D))):a():A.isSubplotConstrained?Ee<n||Ee<r?(I="xy",t=Math.min(D.l/l,(c-D.b)/c),e=Math.max(D.r/l,(c-D.t)/c),D.l=t*l,D.r=e*l,D.b=(1-t)*c,D.t=(1-e)*c,R.attr("d",Fe(D))):a():!E||r<Math.min(Math.max(.6*n,Me),Ee)?n<Me||!M?a():(D.t=0,D.b=c,I="x",R.attr("d",(t=O,"M"+((e=D).l-.5)+","+(t-Ee-.5)+"h-3v"+(2*Ee+1)+"h3ZM"+(e.r+.5)+","+(t-Ee-.5)+"h3v"+(2*Ee+1)+"h-3Z"))):!M||n<Math.min(.6*r,Ee)?(D.l=0,D.r=l,I="y",R.attr("d","M"+((e=f)-Ee-.5)+","+((t=D).t-.5)+"v-3h"+(2*Ee+1)+"v3ZM"+(e-Ee-.5)+","+(t.b+.5)+"v3h"+(2*Ee+1)+"v-3Z")):(I="xy",R.attr("d",Fe(D))),D.w=D.r-D.l,D.h=D.b-D.t,I&&(Q=!0),v._dragged=Q,Re(K,R,D,X,J,Z),re(),v.emit("plotly_relayouting",u),J=!0}function re(){u={},"xy"!==I&&"x"!==I||(Ce(h,D.l/l,D.r/l,u,g.xaxes),F("x",u)),"xy"!==I&&"y"!==I||(Ce(m,(c-D.b)/c,(c-D.t)/c,u,g.yaxes),F("y",u))}function ae(){re(),Pe(v),de(),Ne(v)}P.prepFn=function(e,t,n){var r=P.dragmode,a=v._fullLayout.dragmode;a!==r&&(P.dragmode=a),d(),U=v._fullLayout._invScaleX,V=v._fullLayout._invScaleY,s||(y?e.shiftKey?"pan"===a?a="zoom":we(a)||(a="pan"):e.ctrlKey&&(a="pan"):a="pan"),Ue(a)?P.minDrag=1:P.minDrag=void 0,we(a)?(P.xaxes=h,P.yaxes=m,We(e,t,n,P,a)):(P.clickFn=te,we(r)&&ee(),s||("zoom"===a?(P.moveFn=ne,P.doneFn=ae,P.minDrag=1,e=t,r=n,t=C.getBoundingClientRect(),f=e-t.left,O=r-t.top,v._fullLayout._calcInverseTransform(v),e=me.apply3DTransform(v._fullLayout._invTransform)(f,O),f=e[0],O=e[1],D={l:f,r:f,w:0,t:O,b:O,h:0},Z=v._hmpixcount?v._hmlumcount/v._hmpixcount:ye(v._fullLayout.plot_bgcolor).getLuminance(),Q=J=!(I="xy"),K=De(Y,Z,i,o,X="M0,0H"+l+"V"+c+"H0V0"),R=Ie(Y,i,o)):"pan"===a&&(P.moveFn=ce,P.doneFn=de))),v._fullLayout._redrag=function(){var e,t=v._dragdata;t&&t.element===C&&(e=v._fullLayout.dragmode,we(e)||(d(),z([0,0,l,c]),P.moveFn(t.dx,t.dy)))}},Be.init(P);var N=[0,0,l,c],ie=null,oe=Ae.REDRAWDELAY,se=p.mainplot?v._fullLayout._plots[p.mainplot]:p;function le(e){if(v._context._scrollZoom.cartesian||v._fullLayout._enablescrollzoom){if(ee(),v._transitioningWithDuration)return e.preventDefault(),void e.stopPropagation();d(),clearTimeout(ie);var t=-e.deltaY;if(isFinite(t)||(t=e.wheelDelta/10),isFinite(t)){var n,r=Math.exp(-Math.min(Math.max(t,-20),20)/200),t=se.draglayer.select(".nsewdrag").node().getBoundingClientRect(),a=(e.clientX-t.left)/t.width,i=(t.bottom-e.clientY)/t.height;if(S){for(x||(a=.5),n=0;n<h.length;n++)o(h[n],a,r);F("x"),N[2]*=r,N[0]+=N[2]*a*(1/r-1)}if(L){for(b||(i=.5),n=0;n<m.length;n++)o(m[n],i,r);F("y"),N[3]*=r,N[1]+=N[3]*(1-i)*(1/r-1)}z(N),ue(),v.emit("plotly_relayouting",u),ie=setTimeout(function(){v._fullLayout&&(N=[0,0,l,c],de())},oe),e.preventDefault()}else me.log("Did not find wheel motion attributes: ",e)}function o(t,e,n){var r,a;t.fixedrange||(r=me.simpleMap(t.range,t.r2l),a=r[0]+(r[1]-r[0])*e,t.range=r.map(function(e){return t.l2r(a+(e-a)*n)}))}}function ce(e,t){if(e*=U,t*=V,!v._transitioningWithDuration){if(v._fullLayout._replotting=!0,"ew"===M||"ns"===E)return r=M?-e:0,n=E?-t:0,A.isSubplotConstrained&&(M&&E&&(r=-(e=(i=(e/l-t/c)/2)*l),n=-(t=-i*c)),E?r=-n*l/c:n=-r*c/l),M&&(Oe(h,e),F("x")),E&&(Oe(m,t),F("y")),z([r,n,l,c]),ue(),void v.emit("plotly_relayouting",u);var n,r,a,i="w"===M==("n"===E)?1:-1;if(M&&E&&(g.isSubplotConstrained||A.isSubplotConstrained)&&(e=(r=(e/l+i*t/c)/2)*l,t=i*r*c),"w"===M?e=s(h,0,e):"e"===M?e=s(h,1,-e):M||(e=0),"n"===E?t=s(m,1,t):"s"===E?t=s(m,0,-t):E||(t=0),n="w"===M?e:0,r="n"===E?t:0,g.isSubplotConstrained&&!A.isSubplotConstrained||A.isSubplotConstrained&&M&&E&&0<i){if(A.isSubplotConstrained||!M&&1===E.length){for(a=0;a<h.length;a++)h[a].range=h[a]._r.slice(),ke(h[a],1-t/c);n=(e=t*l/c)/2}if(A.isSubplotConstrained||!E&&1===M.length){for(a=0;a<m.length;a++)m[a].range=m[a]._r.slice(),ke(m[a],1-e/l);r=(t=e*c/l)/2}}A.isSubplotConstrained&&E||F("x"),A.isSubplotConstrained&&M||F("y");var i=l-e,o=c-t;!A.isSubplotConstrained||M&&E||(M?(r=n?0:e*c/l,o=i*c/l):(n=r?0:t*l/c,i=o*l/c)),z([n,r,i,o]),ue(),v.emit("plotly_relayouting",u)}function s(e,t,n){for(var r=1-t,a=0;a<e.length;a++){var i,o,s,l=e[a];l.fixedrange||(o=(i=l)._rl[r]+(l._rl[t]-l._rl[r])/(1-(0<=(s=n/l._length)?Math.min(s,.9):1/(1/Math.max(s,-.3)+3.222))),!1!==(s=l.l2r(o))&&void 0!==s&&(l.range[t]=s))}return i._length*(i._rl[t]-o)/(i._rl[t]-i._rl[r])}}function F(e,t){for(var n=A.isSubplotConstrained?{x:m,y:h}[e]:A[e+"axes"],r=A.isSubplotConstrained?{x:h,y:m}[e]:[],a=0;a<n.length;a++){var i=n[a],o=i._id,o=A.xLinks[o]||A.yLinks[o],o=r[0]||T[o]||k[o];o&&(t?(t[i._name+".range[0]"]=t[o._name+".range[0]"],t[i._name+".range[1]"]=t[o._name+".range[1]"]):i.range=o.range.slice())}}function ue(){var t,n=[];function e(e){for(t=0;t<e.length;t++)e[t].fixedrange||n.push(e[t]._id)}for(S&&(e(h),e(g.xaxes),e(A.xaxes)),L&&(e(m),e(g.yaxes),e(A.yaxes)),u={},t=0;t<n.length;t++){var r=n[t],r=Te(v,r);_e.drawOne(v,r,{skipTitle:!0}),u[r._name+".range[0]"]=r.range[0],u[r._name+".range[1]"]=r.range[1]}_e.redrawComponents(v,n)}function de(){z([0,0,l,c]),me.syncOrAsync([Ge.previousPromises,function(){v._fullLayout._replotting=!1,ve.call("_guiRelayout",v,u)}],v)}function z(e){var t=v._fullLayout,n=t._plots,r=t._subplots.cartesian;if(H&&ve.subplotsRegistry.splom.drag(v),q)for(d=0;d<r.length;d++){var a,i,o,s=(o=n[r[d]]).xaxis,l=o.yaxis;o._scene&&(a=me.simpleMap(s.range,s.r2l),i=me.simpleMap(l.range,l.r2l),o._scene.update({range:[a[0],i[0],a[1],i[1]]}))}if((H||q)&&(Ye(v),$e(v)),B)for(var c=e[2]/_._length,u=e[3]/w._length,d=0;d<r.length;d++){s=(o=n[r[d]]).xaxis,l=o.yaxis;var f,p,h,m,g=(S||A.isSubplotConstrained)&&!s.fixedrange&&T[s._id],y=(L||A.isSubplotConstrained)&&!l.fixedrange&&k[l._id],g=g?(f=c,x||A.isSubplotConstrained?e[0]:j(s,f)):A.xaHash[s._id]?(f=c,e[0]*s._length/_._length):A.yaHash[s._id]?(f=u,"ns"===E?-e[1]*s._length/w._length:j(s,f,{n:"top",s:"bottom"}[E])):pe(s,f=fe(s,c,u)),y=y?(p=u,b||A.isSubplotConstrained?e[1]:j(l,p)):A.yaHash[l._id]?(p=u,e[1]*l._length/w._length):A.xaHash[l._id]?(p=c,"ew"===M?-e[0]*l._length/_._length:j(l,p,{e:"right",w:"left"}[M])):pe(l,p=fe(l,c,u));(f||p)&&(h=s._offset-g/(f=f||1),m=l._offset-y/(p=p||1),o.clipRect.call(xe.setTranslate,g,y).call(xe.setScale,f,p),o.plot.call(xe.setTranslate,h,m).call(xe.setScale,1/f,1/p),f===o.xScaleFactor&&p===o.yScaleFactor||(xe.setPointGroupScale(o.zoomScalePts,f,p),xe.setTextPointsScale(o.zoomScaleTxt,f,p)),xe.hideOutsideRangePoints(o.clipOnAxisFalseTraces,o),o.xScaleFactor=f,o.yScaleFactor=p)}}function fe(e,t,n){return e.fixedrange?0:S&&g.xaHash[e._id]?t:L&&(g.isSubplotConstrained?g.xaHash:g.yaHash)[e._id]?n:0}function pe(e,t){return t?(e.range=e._r.slice(),ke(e,t),j(e,t)):0}function j(e,t,n){return e._length*(1-t)*Ve[n||e.constraintoward||"middle"]}return b.length*x.length!=1&&je(C,le),C},makeDragger:s,makeRectDragger:Se,makeZoombox:De,makeCorners:Ie,updateZoombox:Re,xyCorners:Fe,transitionZoombox:l,removeZoombox:Pe,showDoubleClickNotifier:Ne,attachWheelEventHandler:je}},{"../../components/color":157,"../../components/dragelement":176,"../../components/dragelement/helpers":175,"../../components/drawing":179,"../../components/fx":197,"../../constants/alignment":262,"../../lib":287,"../../lib/clear_gl_canvases":275,"../../lib/setcursor":307,"../../lib/svg_text_utils":310,"../../plot_api/subroutines":324,"../../registry":378,"../plots":371,"./axes":334,"./axis_ids":338,"./constants":341,"./scale_zoom":354,"./select":355,"@plotly/d3":20,"has-passive-events":65,tinycolor2:121}],344:[function(e,t,n){"use strict";var r=e("@plotly/d3"),l=e("../../components/fx"),c=e("../../components/dragelement"),a=e("../../lib/setcursor"),u=e("./dragbox").makeDragBox,d=e("./constants").DRAGGERSIZE;n.initInteractions=function(o){var e,s=o._fullLayout;o._context.staticPlot?r.select(o).selectAll(".drag").remove():(s._has("cartesian")||s._has("splom"))&&(Object.keys(s._plots||{}).sort(function(e,t){var n;return(s._plots[e].mainplot&&!0)===(s._plots[t].mainplot&&!0)?(n=e.split("y"),t=t.split("y"),n[0]===t[0]?Number(n[1]||1)-Number(t[1]||1):Number(n[0]||1)-Number(t[0]||1)):s._plots[e].mainplot?1:-1}).forEach(function(t){var n,e,r=s._plots[t],a=r.xaxis,i=r.yaxis;r.mainplot||((n=u(o,r,a._offset,i._offset,a._length,i._length,"ns","ew")).onmousemove=function(e){o._fullLayout._rehover=function(){o._fullLayout._hoversubplot===t&&o._fullLayout._plots[t]&&l.hover(o,e,t)},l.hover(o,e,t),o._fullLayout._lasthover=n,o._fullLayout._hoversubplot=t},n.onmouseout=function(e){o._dragging||(o._fullLayout._hoversubplot=null,c.unhover(o,e))},o._context.showAxisDragHandles&&(u(o,r,a._offset-d,i._offset-d,d,d,"n","w"),u(o,r,a._offset+a._length,i._offset-d,d,d,"n","e"),u(o,r,a._offset-d,i._offset+i._length,d,d,"s","w"),u(o,r,a._offset+a._length,i._offset+i._length,d,d,"s","e"))),o._context.showAxisDragHandles&&(t===a._mainSubplot&&(e=a._mainLinePosition,"top"===a.side&&(e-=d),u(o,r,a._offset+.1*a._length,e,.8*a._length,d,"","ew"),u(o,r,a._offset,e,.1*a._length,d,"","w"),u(o,r,a._offset+.9*a._length,e,.1*a._length,d,"","e")),t===i._mainSubplot&&(e=i._mainLinePosition,"right"!==i.side&&(e-=d),u(o,r,e,i._offset+.1*i._length,d,.8*i._length,"ns",""),u(o,r,e,i._offset+.9*i._length,d,.1*i._length,"s",""),u(o,r,e,i._offset,d,.1*i._length,"n","")))}),(e=s._hoverlayer.node()).onmousemove=function(e){e.target=o._fullLayout._lasthover,l.hover(o,e,s._hoversubplot)},e.onclick=function(e){e.target=o._fullLayout._lasthover,l.click(o,e)},e.onmousedown=function(e){o._fullLayout._lasthover.onmousedown(e)},n.updateFx(o))},n.updateFx=function(e){var e=e._fullLayout,t="pan"===e.dragmode?"move":"crosshair";a(e._draggers,t)}},{"../../components/dragelement":176,"../../components/fx":197,"../../lib/setcursor":307,"./constants":341,"./dragbox":343,"@plotly/d3":20}],345:[function(e,t,n){"use strict";t.exports={clearOutlineControllers:function(e){(e=e._fullLayout._zoomlayer)&&e.selectAll(".outline-controllers").remove()},clearSelect:function(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".select-outline").remove(),e._fullLayout._drawing=!1}}},{}],346:[function(e,t,n){"use strict";var r=e("../../lib").strTranslate;function a(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}t.exports={p2r:a,r2p:function(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}},axValue:function(t){var n="y"===t._id.charAt(0)?1:0;return function(e){return a(t,e[n])}},getTransform:function(e){return r(e.xaxis._offset,e.yaxis._offset)}}},{"../../lib":287}],347:[function(e,t,n){"use strict";var g=e("../../registry"),y=e("../../lib"),v=e("./axis_ids");t.exports=function(m){return function(e,t){var n=e[m];if(Array.isArray(n))for(var r=g.subplotsRegistry.cartesian,a=r.idRegex,e=t._subplots,i=e.xaxis,o=e.yaxis,s=e.cartesian,l=t._has("cartesian")||t._has("gl2d"),c=0;c<n.length;c++){var u,d,f,p,h=n[c];y.isPlainObject(h)&&(u=v.cleanId(h.xref,"x",!1),h=v.cleanId(h.yref,"y",!1),d=a.x.test(u),f=a.y.test(h),(d||f)&&(l||y.pushUnique(t._basePlotModules,r),p=!1,d&&-1===i.indexOf(u)&&(i.push(u),p=!0),f&&-1===o.indexOf(h)&&(o.push(h),p=!0),p&&d&&f&&s.push(u+h)))}}}},{"../../lib":287,"../../registry":378,"./axis_ids":338}],348:[function(e,t,n){"use strict";var v=e("@plotly/d3"),b=e("../../registry"),p=e("../../lib"),r=e("../plots"),x=e("../../components/drawing"),_=e("../get_data").getModuleCalcData,m=e("./axis_ids"),w=e("./constants"),a=e("../../constants/xmlns_namespaces"),u=p.ensureSingle;function d(e,t,n){p.ensureSingle(e,t,n,function(e){e.datum(n)})}function g(r,a,e,i,o){for(var t=w.traceLayerClasses,n=r._fullLayout,s=n._modules,l=[],c=[],u=0;u<s.length;u++){var d,f,p,h,m=(d=s[u]).name,g=b.modules[m].categories;g.svg&&(m=d.layerName||m+"layer",f=d.plot,h=(p=_(e,f))[0],e=p[1],h.length&&l.push({i:t.indexOf(m),className:m,plotMethod:f,cdModule:h}),g.zoomScale&&c.push("."+m))}l.sort(function(e,t){return e.i-t.i});var y=a.plot.selectAll("g.mlayer").data(l,function(e){return e.className});y.enter().append("g").attr("class",function(e){return e.className}).classed("mlayer",!0).classed("rangeplot",a.isRangePlot),y.exit().remove(),y.order(),y.each(function(e){var t=v.select(this),n=e.className;e.plotMethod(r,a,e.cdModule,t,i,o),-1===w.clipOnAxisFalseQuery.indexOf("."+n)&&x.setClipUrl(t,a.layerClipId,r)}),n._has("scattergl")&&(d=b.getModule("scattergl"),h=_(e,d)[0],d.plot(r,a,h)),r._context.staticPlot||(a._hasClipOnAxisFalse&&(a.clipOnAxisFalseTraces=a.plot.selectAll(w.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),c.length&&(y=a.plot.selectAll(c.join(",")).selectAll(".trace"),a.zoomScalePts=y.selectAll("path.point"),a.zoomScaleTxt=y.selectAll(".textpoint")))}function i(e,t){var n,r,a,i,o=t.plotgroup,s=t.id,l=w.layerValue2layerClass[t.xaxis.layer],c=w.layerValue2layerClass[t.yaxis.layer],e=e._fullLayout._hasOnlyLargeSploms;t.mainplot?(r=(n=t.mainplotinfo).plotgroup,a=s+"-x",i=s+"-y",t.gridlayer=n.gridlayer,t.zerolinelayer=n.zerolinelayer,u(n.overlinesBelow,"path",a),u(n.overlinesBelow,"path",i),u(n.overaxesBelow,"g",a),u(n.overaxesBelow,"g",i),t.plot=u(n.overplot,"g",s),u(n.overlinesAbove,"path",a),u(n.overlinesAbove,"path",i),u(n.overaxesAbove,"g",a),u(n.overaxesAbove,"g",i),t.xlines=r.select(".overlines-"+l).select("."+a),t.ylines=r.select(".overlines-"+c).select("."+i),t.xaxislayer=r.select(".overaxes-"+l).select("."+a),t.yaxislayer=r.select(".overaxes-"+c).select("."+i)):e?(t.xlines=u(o,"path","xlines-above"),t.ylines=u(o,"path","ylines-above"),t.xaxislayer=u(o,"g","xaxislayer-above"),t.yaxislayer=u(o,"g","yaxislayer-above")):(s=u(o,"g","layer-subplot"),t.shapelayer=u(s,"g","shapelayer"),t.imagelayer=u(s,"g","imagelayer"),t.gridlayer=u(o,"g","gridlayer"),t.zerolinelayer=u(o,"g","zerolinelayer"),u(o,"path","xlines-below"),u(o,"path","ylines-below"),t.overlinesBelow=u(o,"g","overlines-below"),u(o,"g","xaxislayer-below"),u(o,"g","yaxislayer-below"),t.overaxesBelow=u(o,"g","overaxes-below"),t.plot=u(o,"g","plot"),t.overplot=u(o,"g","overplot"),t.xlines=u(o,"path","xlines-above"),t.ylines=u(o,"path","ylines-above"),t.overlinesAbove=u(o,"g","overlines-above"),u(o,"g","xaxislayer-above"),u(o,"g","yaxislayer-above"),t.overaxesAbove=u(o,"g","overaxes-above"),t.xlines=o.select(".xlines-"+l),t.ylines=o.select(".ylines-"+c),t.xaxislayer=o.select(".xaxislayer-"+l),t.yaxislayer=o.select(".yaxislayer-"+c)),e||(d(t.gridlayer,"g",t.xaxis._id),d(t.gridlayer,"g",t.yaxis._id),t.gridlayer.selectAll("g").map(function(e){return e[0]}).sort(m.idSort)),t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0)}function y(e,t){if(e){var n,r={};for(n in e.each(function(e){e=e[0];v.select(this).remove(),T(e,t),r[e]=!0}),t._plots)for(var a=t._plots[n].overlays||[],i=0;i<a.length;i++){var o=a[i];r[o.id]&&o.plot.selectAll(".trace").remove()}}}function T(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}n.name="cartesian",n.attr=["xaxis","yaxis"],n.idRoot=["x","y"],n.idRegex=w.idRegex,n.attrRegex=w.attrRegex,n.attributes=e("./attributes"),n.layoutAttributes=e("./layout_attributes"),n.supplyLayoutDefaults=e("./layout_defaults"),n.transitionAxes=e("./transition_axes"),n.finalizeSubplots=function(e,t){for(var n,r,t=t._subplots,a=t.xaxis,i=t.yaxis,o=t.cartesian,s=o.concat(t.gl2d||[]),l={},c={},u=0;u<s.length;u++){var d=s[u].split("y");c["y"+d[l[d[0]]=1]]=1}for(u=0;u<a.length;u++)l[n=a[u]]||(r=(e[m.id2name(n)]||{}).anchor,w.idRegex.y.test(r)||(r="y"),o.push(n+r),s.push(n+r),c[r]||(c[r]=1,p.pushUnique(i,r)));for(u=0;u<i.length;u++)c[r=i[u]]||(n=(e[m.id2name(r)]||{}).anchor,w.idRegex.x.test(n)||(n="x"),o.push(n+r),s.push(n+r),l[n]||(l[n]=1,p.pushUnique(a,n)));if(!s.length){for(var f in r=n="",e)w.attrRegex.test(f)&&("x"===f.charAt(0)?(!n||+f.substr(5)<+n.substr(5))&&(n=f):(!r||+f.substr(5)<+r.substr(5))&&(r=f));n=n?m.name2id(n):"x",r=r?m.name2id(r):"y",a.push(n),i.push(r),o.push(n+r)}},n.plot=function(e,t,n,r){var a,i=e._fullLayout,o=i._subplots.cartesian,s=e.calcdata;if(!Array.isArray(t))for(t=[],a=0;a<s.length;a++)t.push(a);for(a=0;a<o.length;a++){for(var l,c=o[a],u=i._plots[c],d=[],f=0;f<s.length;f++){var p=s[f],h=p[0].trace;h.xaxis+h.yaxis===c&&(-1===t.indexOf(h.index)&&!h.carpet||(l&&l[0].trace.xaxis+l[0].trace.yaxis===c&&-1!==["tonextx","tonexty","tonext"].indexOf(h.fill)&&-1===d.indexOf(l)&&d.push(l),d.push(p)),l=p)}g(e,u,d,n,r)}},n.clean=function(e,t,n,r){var a,i,o=r._plots||{},s=t._plots||{},l=r._subplots||{};if(r._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms)for(i in o)(a=o[i]).plotgroup&&a.plotgroup.remove();var c=r._has&&r._has("gl"),u=t._has&&t._has("gl");if(c&&!u)for(i in o)(a=o[i])._scene&&a._scene.destroy();if(l.xaxis&&l.yaxis)for(var d=m.listIds({_fullLayout:r}),f=0;f<d.length;f++){var p=d[f];t[m.id2name(p)]||r._infolayer.selectAll(".g-"+p+"title").remove()}c=r._has&&r._has("cartesian"),u=t._has&&t._has("cartesian");if(c&&!u)y(r._cartesianlayer.selectAll(".subplot"),r),r._defs.selectAll(".axesclip").remove(),delete r._axisConstraintGroups,delete r._axisMatchGroups;else if(l.cartesian)for(f=0;f<l.cartesian.length;f++){var h=l.cartesian[f];s[h]||(r._cartesianlayer.selectAll("."+h+",."+h+"-x,."+h+"-y").remove(),T(h,r))}},n.drawFramework=function(n){var r=n._fullLayout,e=function(e){var t,n,r,a,i,o,s=e._fullLayout,l=s._subplots.cartesian,c=l.length,u=[],d=[];for(t=0;t<c;t++){r=l[t],a=s._plots[r],i=a.xaxis,o=a.yaxis;var f=i._mainAxis,p=o._mainAxis,f=f._id+p._id,p=s._plots[f];a.overlays=[],f!==r&&p?(a.mainplot=f,a.mainplotinfo=p,d.push(r)):(a.mainplot=void 0,a.mainplotinfo=void 0,u.push(r))}for(t=0;t<d.length;t++)r=d[t],(a=s._plots[r]).mainplotinfo.overlays.push(a);var h=u.concat(d),m=new Array(c);for(t=0;t<c;t++){r=h[t],a=s._plots[r],i=a.xaxis,o=a.yaxis;var g=[r,i.layer,o.layer,i.overlaying||"",o.overlaying||""];for(n=0;n<a.overlays.length;n++)g.push(a.overlays[n].id);m[t]=g}return m}(n),e=r._cartesianlayer.selectAll(".subplot").data(e,String);e.enter().append("g").attr("class",function(e){return"subplot "+e[0]}),e.order(),e.exit().call(y,r),e.each(function(e){var e=e[0],t=r._plots[e];t.plotgroup=v.select(this),i(n,t),t.draglayer=u(r._draggers,"g",e)})},n.rangePlot=function(e,t,n){i(e,t),g(e,t,n),r.style(e)},n.toSVG=function(e){var t=e._fullLayout._glimages,n=v.select(e).selectAll(".svg-container");n.filter(function(e,t){return t===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var e=this.toDataURL("image/png");t.append("svg:image").attr({xmlns:a.svg,"xlink:href":e,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})},n.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":179,"../../constants/xmlns_namespaces":268,"../../lib":287,"../../registry":378,"../get_data":367,"../plots":371,"./attributes":332,"./axis_ids":338,"./constants":341,"./graph_interact":344,"./layout_attributes":349,"./layout_defaults":350,"./transition_axes":361,"@plotly/d3":20}],349:[function(e,t,n){"use strict";var r=e("../font_attributes"),a=e("../../components/color/attributes"),i=e("../../components/drawing/attributes").dash,o=e("../../lib/extend").extendFlat,s=e("../../plot_api/plot_template").templatedArray,l=e("../../plots/cartesian/axis_format_attributes").descriptionWithDates,c=e("../../constants/numerical").ONEDAY,e=e("./constants"),u=e.HOUR_PATTERN,d=e.WEEKDAY_PATTERN;t.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:a.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:r({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"calc"},rangebreaks:s("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[d,u,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:c},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:o({},i,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:r({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:l("tick label")},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:l("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:a.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:a.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:r({editType:"ticks"})}}},{"../../components/color/attributes":156,"../../components/drawing/attributes":178,"../../constants/numerical":267,"../../lib/extend":281,"../../plot_api/plot_template":323,"../../plots/cartesian/axis_format_attributes":337,"../font_attributes":365,"./constants":341}],350:[function(e,t,n){"use strict";var K=e("../../lib"),Q=e("../../components/color"),ee=e("../../components/fx/helpers").isUnifiedHover,te=e("../../components/fx/hovermode_defaults"),ne=e("../../plot_api/plot_template"),re=e("../layout_attributes"),ae=e("./layout_attributes"),ie=e("./type_defaults"),oe=e("./axis_defaults"),se=e("./constraints"),le=e("./position_defaults"),ce=e("./axis_ids"),ue=ce.id2name,de=ce.name2id,fe=e("./constants").AX_ID_PATTERN,e=e("../../registry"),pe=e.traceIs,he=e.getComponentMethod;function me(e,t,n){Array.isArray(e[t])?e[t].push(n):e[t]=[n]}t.exports=function(o,e,t){for(var n,r=e.autotypenumbers,a={},i={},s={},l={},c={},u={},d={},f={},p={},h={},m=0;m<t.length;m++){var g,y,v=t[m];if(pe(v,"cartesian")||pe(v,"gl2d")){if(v.xaxis)g=ue(v.xaxis),me(a,g,v);else if(v.xaxes)for(n=0;n<v.xaxes.length;n++)me(a,ue(v.xaxes[n]),v);if(v.yaxis)y=ue(v.yaxis),me(a,y,v);else if(v.yaxes)for(n=0;n<v.yaxes.length;n++)me(a,ue(v.yaxes[n]),v);"funnel"===v.type?"h"===v.orientation?(g&&(i[g]=!0),y&&(d[y]=!0)):y&&(s[y]=!0):"image"===v.type?(y&&(f[y]=!0),g&&(f[g]=!0)):(y&&(c[y]=!0,u[y]=!0),pe(v,"carpet")&&("carpet"!==v.type||v._cheater)||g&&(l[g]=!0)),"carpet"===v.type&&v._cheater&&g&&(i[g]=!0),pe(v,"2dMap")&&(p[g]=!0,p[y]=!0),pe(v,"oriented")&&(h["h"===v.orientation?y:g]=!0)}}var b,x,_=e._subplots,w=_.xaxis,_=_.yaxis,T=K.simpleMap(w,ue),k=K.simpleMap(_,ue),A=T.concat(k),N=Q.background,F=(w.length&&_.length&&(N=K.coerce(o,e,re,"plot_bgcolor")),Q.combine(N,e.paper_bgcolor));function z(){var e=a[I]||[];P._traceIndices=e.map(function(e){return e._expandedIndex}),P._annIndices=[],P._shapeIndices=[],P._imgIndices=[],P._subplotsWith=[],P._counterAxes=[],P._name=P._attr=I,P._id=b}function M(e,t){return K.coerce(R,P,ae,e,t)}function E(e,t){return K.coerce2(R,P,ae,e,t)}function j(e,t){for(var n="x"===e?T:k,r=[],a=0;a<n.length;a++){var i=n[a];i===t||(o[i]||{}).overlaying||r.push(de(i))}return r}var S={x:_,y:w},q=S.x.concat(S.y),L={},C=[];function H(){var e=R.matches;fe.test(e)&&-1===q.indexOf(e)&&(L[e]=R.type,C=Object.keys(L))}var B=te(o,e),O=ee(B);for(m=0;m<A.length;m++){I=A[m],b=de(I),x=I.charAt(0),K.isPlainObject(o[I])||(o[I]={}),R=o[I],P=ne.newContainer(e,I,x+"axis"),z();var D="x"===x&&!l[I]&&i[I]||"y"===x&&!c[I]&&s[I],U="y"===x&&(!u[I]&&d[I]||f[I]),D={letter:x,font:e.font,outerTicks:p[I],showGrid:!h[I],data:a[I]||[],bgColor:F,calendar:e.calendar,automargin:!0,visibleDflt:D,reverseDflt:U,autotypenumbersDflt:r,splomStash:((e._splomAxes||{})[x]||{})[b]},U=(M("uirevision",e.uirevision),ie(R,P,M,D),oe(R,P,M,D,e),O&&x===B.charAt(0)),D=E("spikecolor",O?P.color:void 0),V=E("spikethickness",O?1.5:void 0),Y=E("spikedash",O?"dot":void 0),$=E("spikemode",O?"across":void 0),G=E("spikesnap");M("showspikes",!!(U||D||V||Y||$||G))||(delete P.spikecolor,delete P.spikethickness,delete P.spikedash,delete P.spikemode,delete P.spikesnap),le(R,P,M,{letter:x,counterAxes:S[x],overlayableAxes:j(x,I),grid:e.grid}),M("title.standoff"),H(),P._input=R}for(m=0;m<C.length;){b=C[m++],x=(I=ue(b)).charAt(0),K.isPlainObject(o[I])||(o[I]={}),R=o[I],P=ne.newContainer(e,I,x+"axis"),z();var W={letter:x,font:e.font,outerTicks:p[I],showGrid:!h[I],data:[],bgColor:F,calendar:e.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:r,splomStash:((e._splomAxes||{})[x]||{})[b]};M("uirevision",e.uirevision),P.type=L[b]||"linear",oe(R,P,M,W,e),le(R,P,M,{letter:x,counterAxes:S[x],overlayableAxes:j(x,I),grid:e.grid}),M("fixedrange"),H(),P._input=R}var Z=he("rangeslider","handleDefaults"),X=he("rangeselector","handleDefaults");for(m=0;m<T.length;m++)I=T[m],R=o[I],P=e[I],Z(o,e,I),"date"===P.type&&X(R,P,e,k,P.calendar),M("fixedrange");for(m=0;m<k.length;m++){var I=k[m],R=o[I],P=e[I],J=e[ue(P.anchor)];M("fixedrange",he("rangeslider","isVisible")(J))}se.handleDefaults(o,e,{axIds:q.concat(C).sort(ce.idSort),axHasImage:f})}},{"../../components/color":157,"../../components/fx/helpers":193,"../../components/fx/hovermode_defaults":196,"../../lib":287,"../../plot_api/plot_template":323,"../../registry":378,"../layout_attributes":369,"./axis_defaults":336,"./axis_ids":338,"./constants":341,"./constraints":342,"./layout_attributes":349,"./position_defaults":352,"./type_defaults":362}],351:[function(e,t,n){"use strict";var l=e("tinycolor2").mix,c=e("../../components/color/attributes").lightFraction,u=e("../../lib");t.exports=function(n,r,e,a){var t=(a=a||{}).dfltColor;function i(e,t){return u.coerce2(n,r,a.attributes,e,t)}var o=i("linecolor",t),s=i("linewidth");e("showline",a.showLine||!!o||!!s)||(delete r.linecolor,delete r.linewidth);var o=i("gridcolor",l(t,a.bgColor,a.blend||c).toRgbString()),s=i("gridwidth");e("showgrid",a.showGrid||!!o||!!s)||(delete r.gridcolor,delete r.gridwidth),a.noZeroLine||(o=i("zerolinecolor",t),s=i("zerolinewidth"),e("zeroline",a.showGrid||!!o||!!s)||(delete r.zerolinecolor,delete r.zerolinewidth))}},{"../../components/color/attributes":156,"../../lib":287,tinycolor2:121}],352:[function(e,t,n){"use strict";var d=e("fast-isnumeric"),f=e("../../lib");t.exports=function(e,t,n,r){var a=r.counterAxes||[],i=r.overlayableAxes||[],o=r.letter,r=r.grid,s=(r&&(s=r._domains[o][r._axisMap[t._id]],l=r._anchors[t._id],s&&(c=r[o+"side"].split(" ")[0],u=r.domain[o]["right"===c||"top"===c?1:0])),s||[0,1]),l=l||!d(e.position)&&a[0]||"free",c=c||("x"===o?"bottom":"left"),u=u||0,r=("free"===f.coerce(e,t,{anchor:{valType:"enumerated",values:["free"].concat(a),dflt:l}},"anchor")&&n("position",u),f.coerce(e,t,{side:{valType:"enumerated",values:"x"===o?["bottom","top"]:["left","right"],dflt:c}},"side"),!1);return(r=i.length?f.coerce(e,t,{overlaying:{valType:"enumerated",values:[!1].concat(i),dflt:!1}},"overlaying"):r)||((a=n("domain",s))[0]>a[1]-1/4096&&(t.domain=s),f.noneOrAll(e.domain,t.domain,s)),n("layer"),t}},{"../../lib":287,"fast-isnumeric":33}],353:[function(e,t,n){"use strict";var i=e("./show_dflt");t.exports=function(e,t,n,r,a){a=(a=a||{}).tickSuffixDflt,e=i(e);n("tickprefix")&&n("showtickprefix",e),n("ticksuffix",a)&&n("showticksuffix",e)}},{"./show_dflt":357}],354:[function(e,t,n){"use strict";var a=e("../../constants/alignment").FROM_BL;t.exports=function(e,t,n){void 0===n&&(n=a[e.constraintoward||"center"]);var r=[e.r2l(e.range[0]),e.r2l(e.range[1])],n=r[0]+(r[1]-r[0])*n;e.range=e._input.range=[e.l2r(n+(r[0]-n)*t),e.l2r(n+(r[1]-n)*t)],e.setScale()}},{"../../constants/alignment":262}],355:[function(e,t,r){"use strict";var B=e("polybooljs"),h=e("../../registry"),U=e("../../components/drawing").dashStyle,V=e("../../components/color"),Y=e("../../components/fx"),i=e("../../components/fx/helpers").makeEventData,n=e("../../components/dragelement/helpers"),$=n.freeMode,G=n.rectMode,W=n.drawMode,Z=n.openMode,X=n.selectMode,J=e("../../components/shapes/draw_newshape/display_outlines"),K=e("../../components/shapes/draw_newshape/helpers").handleEllipse,a=e("../../components/shapes/draw_newshape/newshapes"),Q=e("../../lib"),l=e("../../lib/polygon"),ee=e("../../lib/throttle"),f=e("./axis_ids").getFromId,m=e("../../lib/clear_gl_canvases"),g=e("../../plot_api/subroutines").redrawReglTraces,te=e("./constants"),ne=te.MINSELECT,fe=l.filter,pe=l.tester,s=e("./handle_outline").clearSelect,n=e("./helpers"),re=n.p2r,he=n.axValue,me=n.getTransform;function ae(e,t,n,r,a,i,o){var s,l,c,u=t._hoverdata,d=-1<t._fullLayout.clickmode.indexOf("event"),f=[];if((h=u)&&Array.isArray(h)&&!0!==h[0].hoverOnBox){oe(e,t,i);var p,h=function(e,t){var n,r,a=e[0],i=-1,o=[];for(r=0;r<t.length;r++)if(n=t[r],a.fullData._expandedIndex===n.cd[0].trace._expandedIndex){if(!0===a.hoverOnBox)break;void 0!==a.pointNumber?i=a.pointNumber:void 0!==a.binNumber&&(i=a.binNumber,o=a.pointNumbers);break}return{pointNumber:i,pointNumbers:o,searchInfo:n}}(u,p=le(t,n,r,a));if(0<h.pointNumbers.length?function(e,t){var n,r,a,i=[];for(a=0;a<e.length;a++)(n=e[a]).cd[0].trace.selectedpoints&&0<n.cd[0].trace.selectedpoints.length&&i.push(n);if(1===i.length&&i[0]===t.searchInfo&&(r=t.searchInfo.cd[0].trace).selectedpoints.length===t.pointNumbers.length){for(a=0;a<t.pointNumbers.length;a++)if(r.selectedpoints.indexOf(t.pointNumbers[a])<0)return;return 1}return}(p,h):function(e){var t,n,r=0;for(n=0;n<e.length;n++)if(t=e[n],(t=t.cd[0].trace).selectedpoints){if(1<t.selectedpoints.length)return;if(1<(r+=t.selectedpoints.length))return}return 1===r}(p)&&(c=v(h))){for(o&&o.remove(),g=0;g<p.length;g++)(s=p[g])._module.selectPoints(s,!1);ce(t,p),se(i),d&&t.emit("plotly_deselect",null)}else{for(var u=e.shiftKey&&(void 0!==c?c:v(h)),n={pointNumber:h.pointNumber,searchInfo:h.searchInfo,subtract:u},m=ie(i.selectionDefs.concat([n])),g=0;g<p.length;g++)if(l=ue(p[g]._module.selectPoints(p[g],m),p[g]),f.length)for(var y=0;y<l.length;y++)f.push(l[y]);else f=l;ce(t,p,r={points:f}),i&&i.selectionDefs.push(n),o&&(a=i.mergedPolygons,e=Z(i.dragmode),J(de(a,e),o,i)),d&&t.emit("plotly_selected",r)}}}function c(e){return"pointNumber"in e&&"searchInfo"in e}function ie(e){for(var t,o=[],n=c(e[0])?0:e[0][0][0],r=n,a=c(e[0])?0:e[0][0][1],i=a,s=0;s<e.length;s++)c(e[s])?o.push(function(i){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(e,t,n,r){var a=i.searchInfo.cd[0].trace._expandedIndex;return r.cd[0].trace._expandedIndex===a&&n===i.pointNumber},isRect:!1,degenerate:!1,subtract:i.subtract}}(e[s])):((t=l.tester(e[s])).subtract=e[s].subtract,o.push(t),n=Math.min(n,t.xmin),r=Math.max(r,t.xmax),a=Math.min(a,t.ymin),i=Math.max(i,t.ymax));return{xmin:n,xmax:r,ymin:a,ymax:i,pts:[],contains:function(e,t,n,r){for(var a=!1,i=0;i<o.length;i++)o[i].contains(e,t,n,r)&&(a=!1===o[i].subtract);return a},isRect:!1,degenerate:!1}}function oe(e,t,n){t._fullLayout._drawing=!1;var r=t._fullLayout,a=n.plotinfo,i=n.dragmode,o=r._lastSelectedSubplot&&r._lastSelectedSubplot===a.id,e=(e.shiftKey||e.altKey)&&!(W(i)&&Z(i));o&&e&&a.selection&&a.selection.selectionDefs&&!n.selectionDefs?(n.selectionDefs=a.selection.selectionDefs,n.mergedPolygons=a.selection.mergedPolygons):e&&a.selection||se(n),o||(s(t),r._lastSelectedSubplot=a.id)}function se(e){var t=e.dragmode,n=e.plotinfo,r=e.gd;0<=r._fullLayout._activeShapeIndex&&r._fullLayout._deactivateShape(r),W(t)&&(t=r._fullLayout._zoomlayer.selectAll(".select-outline-"+n.id))&&r._fullLayout._drawing&&((t=a(t,e))&&h.call("_guiRelayout",r,{shapes:t}),r._fullLayout._drawing=!1),n.selection={},n.selection.selectionDefs=e.selectionDefs=[],n.selection.mergedPolygons=e.mergedPolygons=[]}function le(e,t,n,r){for(var a,i,o,s=[],l=t.map(function(e){return e._id}),c=n.map(function(e){return e._id}),u=0;u<e.calcdata.length;u++)!0===(o=(a=e.calcdata[u])[0].trace).visible&&o._module&&o._module.selectPoints&&(!r||o.subplot!==r&&o.geo!==r?"splom"===o.type&&o._xaxes[l[0]]&&o._yaxes[c[0]]?((i=d(o._module,a,t[0],n[0])).scene=e._fullLayout._splomScenes[o.uid],s.push(i)):"sankey"===o.type?(i=d(o._module,a,t[0],n[0]),s.push(i)):-1!==l.indexOf(o.xaxis)&&-1!==c.indexOf(o.yaxis)&&s.push(d(o._module,a,f(e,o.xaxis),f(e,o.yaxis))):s.push(d(o._module,a,t[0],n[0])));return s;function d(e,t,n,r){return{_module:e,cd:t,xaxis:n,yaxis:r}}}function v(e){var t=e.searchInfo.cd[0].trace,n=e.pointNumber,e=e.pointNumbers,e=0<e.length?e[0]:n;return!!t.selectedpoints&&-1<t.selectedpoints.indexOf(e)}function ce(e,t,n){var r,a;for(l=0;l<t.length;l++){var i=t[l].cd[0].trace._fullInput,o=e._fullLayout._tracePreGUI[i.uid]||{};void 0===o.selectedpoints&&(o.selectedpoints=i._input.selectedpoints||null)}if(n){for(var s=n.points||[],l=0;l<t.length;l++)(a=t[l].cd[0].trace)._input.selectedpoints=a._fullInput.selectedpoints=[],a._fullInput!==a&&(a.selectedpoints=[]);for(l=0;l<s.length;l++){var c=s[l],u=c.data,d=c.fullData;c.pointIndices?([].push.apply(u.selectedpoints,c.pointIndices),a._fullInput!==a&&[].push.apply(d.selectedpoints,c.pointIndices)):(u.selectedpoints.push(c.pointIndex),a._fullInput!==a&&d.selectedpoints.push(c.pointIndex))}}else for(l=0;l<t.length;l++)delete(a=t[l].cd[0].trace).selectedpoints,delete a._input.selectedpoints,a._fullInput!==a&&delete a._fullInput.selectedpoints;var f=!1;for(l=0;l<t.length;l++){a=(r=(p=t[l]).cd)[0].trace,h.traceIs(a,"regl")&&(f=!0);var p=p._module,p=p.styleOnSelect||p.style;p&&(p(e,r,r[0].node3),r[0].nodeRangePlot3&&p(e,r,r[0].nodeRangePlot3))}f&&(m(e),g(e))}function ue(e,t){if(Array.isArray(e))for(var n=t.cd,r=t.cd[0].trace,a=0;a<e.length;a++)e[a]=i(e[a],r,n);return e}function de(e,t){for(var n=[],r=0;r<e.length;r++){n[r]=[];for(var a=0;a<e[r].length;a++){n[r][a]=[],n[r][a][0]=a?"L":"M";for(var i=0;i<e[r][a].length;i++)n[r][a].push(e[r][a][i])}t||n[r].push(["Z",n[r][0][1],n[r][0][2]])}return n}t.exports={prepSelect:function(e,t,n,l,r){var c,u,d,f,p,h,m,g,y,v,b=$(r),x=G(r),_=Z(r),w=W(r),F=X(r),T="drawcircle"===r,k="drawline"===r||T,A=l.gd,M=A._fullLayout,s=M._zoomlayer,a=l.element.getBoundingClientRect(),i=l.plotinfo,z=me(i),E=t-a.left,S=n-a.top;M._calcInverseTransform(A);var E=(t=Q.apply3DTransform(M._invTransform)(E,S))[0],S=t[1],j=M._invScaleX,q=M._invScaleY,n="M"+E+","+S,L=l.xaxes[0]._length,C=l.yaxes[0]._length,o=l.xaxes.concat(l.yaxes),O=e.altKey&&!(W(r)&&_),D=(oe(e,A,l),b&&(d=fe([[E,S]],te.BENDPX)),s.selectAll("path.select-outline-"+i.id).data(w?[0]:[1,2])),a=M.newshape,I=(D.enter().append("path").attr("class",function(e){return"select-outline select-outline-"+e+" select-outline-"+i.id}).style(w?{opacity:a.opacity/2,fill:_?void 0:a.fillcolor,stroke:a.line.color,"stroke-dasharray":U(a.line.dash,a.line.width),"stroke-width":a.line.width+"px"}:{}).attr("fill-rule",a.fillrule).classed("cursor-move",!!w).attr("transform",z).attr("d",n+"Z"),s.append("path").attr("class","zoombox-corners").style({fill:V.background,stroke:V.defaultLine,"stroke-width":1}).attr("transform",z).attr("d","M0,0Z")),R=M._uid+te.SELECTID,P=[],N=le(A,l.xaxes,l.yaxes,l.subplot);function H(e,t){return e-t}v=i.fillRangeItems||(x?function(e,t){var n=e.range={};for(m=0;m<o.length;m++){var r=o[m],a=r._id.charAt(0);n[r._id]=[re(r,t[a+"min"]),re(r,t[a+"max"])].sort(H)}}:function(e,t,n){var r=e.lassoPoints={};for(m=0;m<o.length;m++){var a=o[m];r[a._id]=n.filtered.map(he(a))}}),l.moveFn=function(e,t){c=Math.max(0,Math.min(L,j*e+E)),u=Math.max(0,Math.min(C,q*t+S));var n,r,a,i=Math.abs(c-E),o=Math.abs(u-S);if(x){if(F){var s,e=M.selectdirection;switch(s="any"===e?o<Math.min(.6*i,ne)?"h":i<Math.min(.6*o,ne)?"v":"d":e){case"h":n=T?C/2:0,r=C;break;case"v":n=T?L/2:0,r=L}}if(w)switch(M.newshape.drawdirection){case"vertical":s="h",n=T?C/2:0,r=C;break;case"horizontal":s="v",n=T?L/2:0,r=L;break;case"ortho":r=i<o?(s="h",n=S,u):(s="v",n=E,c);break;default:s="d"}"h"===s?((h=k?K(T,[c,n],[c,r]):[[E,n],[E,r],[c,r],[c,n]]).xmin=k?c:Math.min(E,c),h.xmax=k?c:Math.max(E,c),h.ymin=Math.min(n,r),h.ymax=Math.max(n,r),I.attr("d","M"+h.xmin+","+(S-ne)+"h-4v"+2*ne+"h4ZM"+(h.xmax-1)+","+(S-ne)+"h4v"+2*ne+"h-4Z")):"v"===s?((h=k?K(T,[n,u],[r,u]):[[n,S],[n,u],[r,u],[r,S]]).xmin=Math.min(n,r),h.xmax=Math.max(n,r),h.ymin=k?u:Math.min(S,u),h.ymax=k?u:Math.max(S,u),I.attr("d","M"+(E-ne)+","+h.ymin+"v-4h"+2*ne+"v4ZM"+(E-ne)+","+(h.ymax-1)+"v4h"+2*ne+"v-4Z")):"d"===s&&((h=k?K(T,[E,S],[c,u]):[[E,S],[E,u],[c,u],[c,S]]).xmin=Math.min(E,c),h.xmax=Math.max(E,c),h.ymin=Math.min(S,u),h.ymax=Math.max(S,u),I.attr("d","M0,0Z"))}else b&&(d.addPt([c,u]),h=d.filtered);f=l.selectionDefs&&l.selectionDefs.length?(t=l.mergedPolygons,e=h,a=(a=O)?B.difference({regions:t,inverted:!1},{regions:[e],inverted:!1}):B.union({regions:t,inverted:!1},{regions:[e],inverted:!1}),p=a.regions,h.subtract=O,ie(l.selectionDefs.concat([h]))):(p=[h],pe(h)),J(de(p,_),D,l),F&&ee.throttle(R,te.SELECTDELAY,function(){P=[];var e,t,n=[];for(m=0;m<N.length;m++)if(t=(g=N[m])._module.selectPoints(g,f),n.push(t),e=ue(t,g),P.length)for(var r=0;r<e.length;r++)P.push(e[r]);else P=e;ce(A,N,y={points:P}),v(y,h,d),l.gd.emit("plotly_selecting",y)})},l.clickFn=function(e,t){var n;I.remove(),0<=A._fullLayout._activeShapeIndex?A._fullLayout._deactivateShape(A):w||(n=M.clickmode,ee.done(R).then(function(){if(ee.clear(R),2===e){for(D.remove(),m=0;m<N.length;m++)(g=N[m])._module.selectPoints(g,!1);ce(A,N),se(l),A.emit("plotly_deselect",null)}else-1<n.indexOf("select")&&ae(t,A,l.xaxes,l.yaxes,l.subplot,l,D),"event"===n&&A.emit("plotly_selected",void 0);Y.click(A,t)}).catch(Q.error))},l.doneFn=function(){I.remove(),ee.done(R).then(function(){ee.clear(R),l.gd.emit("plotly_selected",y),h&&l.selectionDefs&&(h.subtract=O,l.selectionDefs.push(h),l.mergedPolygons.length=0,[].push.apply(l.mergedPolygons,p)),l.doneFnCompleted&&l.doneFnCompleted(P)}).catch(Q.error),w&&se(l)}},clearSelect:s,clearSelectionsCache:se,selectOnClick:ae}},{"../../components/color":157,"../../components/dragelement/helpers":175,"../../components/drawing":179,"../../components/fx":197,"../../components/fx/helpers":193,"../../components/shapes/draw_newshape/display_outlines":245,"../../components/shapes/draw_newshape/helpers":246,"../../components/shapes/draw_newshape/newshapes":247,"../../lib":287,"../../lib/clear_gl_canvases":275,"../../lib/polygon":299,"../../lib/throttle":311,"../../plot_api/subroutines":324,"../../registry":378,"./axis_ids":338,"./constants":341,"./handle_outline":345,"./helpers":346,polybooljs:75}],356:[function(e,t,n){"use strict";var f=e("@plotly/d3"),b=e("d3-time-format").utcFormat,x=e("../../lib"),_=x.numberFormat,w=e("fast-isnumeric"),T=x.cleanNumber,k=x.ms2DateTime,A=x.dateTime2ms,M=x.ensureNumber,E=x.isArrayOrTypedArray,r=e("../../constants/numerical"),S=r.FP_SAFE,L=r.BADNUM,C=r.LOG_CLIP,O=r.ONEWEEK,D=r.ONEDAY,I=r.ONEHOUR,R=r.ONEMIN,P=r.ONESEC,N=e("./axis_ids"),F=e("./constants"),z=F.HOUR_PATTERN,j=F.WEEKDAY_PATTERN;function q(e){return Math.pow(10,e)}function H(e){return null!=e}t.exports=function(v,p){p=p||{};var h=v._id||"x",m=h.charAt(0);function n(e,t){return 0<e?Math.log(e)/Math.LN10:e<=0&&t&&v.range&&2===v.range.length?.5*((e=v.range[0])+(t=v.range[1])-2*C*Math.abs(e-t)):L}function r(e,t,n,r){if((r||{}).msUTC&&w(e))return+e;if((r=A(e,n||v.calendar))===L){if(!w(e))return L;e=+e;n=Math.floor(10*x.mod(e+.05,1)),e=Math.round(e-n/10),r=A(new Date(e))+n/10}return r}function a(e,t,n){return k(e,t,n||v.calendar)}function t(e){return v._categories[Math.round(e)]}function g(e){var t;return H(e)?(void 0===v._categoriesMap&&(v._categoriesMap={}),void 0!==v._categoriesMap[e]?v._categoriesMap[e]:(v._categories.push("number"==typeof e?String(e):e),t=v._categories.length-1,v._categoriesMap[e]=t)):L}function y(e){if(v._categoriesMap)return v._categoriesMap[e]}function i(e){var t=y(e);return void 0!==t?t:w(e)?+e:void 0}function o(e){return w(e)?+e:y(e)}function c(e,t,n){return f.round(n+t*e,2)}function s(e,t,n){return(e-n)/t}var u,l=function(e){return w(e)?c(e,v._m,v._b):L},d=function(e){return s(e,v._m,v._b)},e=(v.rangebreaks&&(u="y"===m,l=function(e){if(!w(e))return L;var t=v._rangebreaks.length;if(!t)return c(e,v._m,v._b);for(var n=u,r=(n=v.range[0]>v.range[1]?!n:n)?-1:1,a=r*e,i=0,o=0;o<t;o++){var s=r*v._rangebreaks[o].min,l=r*v._rangebreaks[o].max;if(a<s)break;if(!(l<a)){i=a<(s+l)/2?o:o+1;break}i=o+1}n=v._B[i]||0;return isFinite(n)?c(e,v._m2,n):0},d=function(e){var t=v._rangebreaks.length;if(!t)return s(e,v._m,v._b);for(var n=0,r=0;r<t&&!(e<v._rangebreaks[r].pmin);r++)e>v._rangebreaks[r].pmax&&(n=r+1);return s(e,v._m2,v._B[n])}),v.c2l="log"===v.type?n:M,v.l2c="log"===v.type?q:M,v.l2p=l,v.p2l=d,v.c2p="log"===v.type?function(e,t){return l(n(e,t))}:l,v.p2c="log"===v.type?function(e){return q(d(e))}:d,-1!==["linear","-"].indexOf(v.type)?(v.d2r=v.r2d=v.d2c=v.r2c=v.d2l=v.r2l=T,v.c2d=v.c2r=v.l2d=v.l2r=M,v.d2p=v.r2p=function(e){return v.l2p(T(e))},v.p2d=v.p2r=d,v.cleanPos=M):"log"===v.type?(v.d2r=v.d2l=function(e,t){return n(T(e),t)},v.r2d=v.r2c=function(e){return q(T(e))},v.d2c=v.r2l=T,v.c2d=v.l2r=M,v.c2r=n,v.l2d=q,v.d2p=function(e,t){return v.l2p(v.d2r(e,t))},v.p2d=function(e){return q(d(e))},v.r2p=function(e){return v.l2p(T(e))},v.p2r=d,v.cleanPos=M):"date"===v.type?(v.d2r=v.r2d=x.identity,v.d2c=v.r2c=v.d2l=v.r2l=r,v.c2d=v.c2r=v.l2d=v.l2r=a,v.d2p=v.r2p=function(e,t,n){return v.l2p(r(e,0,n))},v.p2d=v.p2r=function(e,t,n){return a(d(e),t,n)},v.cleanPos=function(e){return x.cleanDate(e,L,v.calendar)}):"category"===v.type?(v.d2c=v.d2l=g,v.r2d=v.c2d=v.l2d=t,v.d2r=v.d2l_noadd=i,v.r2c=function(e){e=o(e);return void 0!==e?e:v.fraction2r(.5)},v.l2r=v.c2r=M,v.r2l=o,v.d2p=function(e){return v.l2p(v.r2c(e))},v.p2d=function(e){return t(d(e))},v.r2p=v.d2p,v.p2r=d,v.cleanPos=function(e){return"string"==typeof e&&""!==e?e:M(e)}):"multicategory"===v.type&&(v.r2d=v.c2d=v.l2d=t,v.d2r=v.d2l_noadd=i,v.r2c=function(e){e=i(e);return void 0!==e?e:v.fraction2r(.5)},v.r2c_just_indices=y,v.l2r=v.c2r=M,v.r2l=i,v.d2p=function(e){return v.l2p(v.r2c(e))},v.p2d=function(e){return t(d(e))},v.r2p=v.d2p,v.p2r=d,v.cleanPos=function(e){return Array.isArray(e)||"string"==typeof e&&""!==e?e:M(e)},v.setupMultiCategory=function(e){var t,n=v._traceIndices,r=v._matchGroup;if(r&&0===v._categories.length)for(var a in r)a!==h&&(a=p[N.id2name(a)],n=n.concat(a._traceIndices));for(var i=[[0,{}],[0,{}]],o=[],s=0;s<n.length;s++){var l=e[n[s]];if(m in l){var c=l[m],u=l._length||x.minRowLength(c);if(E(c[0])&&E(c[1]))for(t=0;t<u;t++){var d=c[0][t],f=c[1][t];H(d)&&H(f)&&(o.push([d,f]),d in i[0][1]||(i[0][1][d]=i[0][0]++),f in i[1][1]||(i[1][1][f]=i[1][0]++))}}}for(o.sort(function(e,t){var n=i[0][1],n=n[e[0]]-n[t[0]];if(n)return n;n=i[1][1];return n[e[1]]-n[t[1]]}),s=0;s<o.length;s++)g(o[s])}),v.fraction2r=function(e){var t=v.r2l(v.range[0]),n=v.r2l(v.range[1]);return v.l2r(t+e*(n-t))},v.r2fraction=function(e){var t=v.r2l(v.range[0]),n=v.r2l(v.range[1]);return(v.r2l(e)-t)/(n-t)},v.cleanRange=function(e,t){t=t||{};var n,r=x.nestedProperty(v,e=e||"range").get(),a="date"===v.type?x.dfltRange(v.calendar):"y"===m?F.DFLTRANGEY:"realaxis"===v._name?[0,1]:t.dfltRange||F.DFLTRANGEX;if(a=a.slice(),"tozero"!==v.rangemode&&"nonnegative"!==v.rangemode||(a[0]=0),r&&2===r.length)for("date"!==v.type||v.autorange||(r[0]=x.cleanDate(r[0],L,v.calendar),r[1]=x.cleanDate(r[1],L,v.calendar)),n=0;n<2;n++)if("date"===v.type){if(!x.isDateTime(r[n],v.calendar)){v[e]=a;break}if(v.r2l(r[0])===v.r2l(r[1])){var i=x.constrain(v.r2l(r[0]),x.MIN_MS+1e3,x.MAX_MS-1e3);r[0]=v.l2r(i-1e3),r[1]=v.l2r(i+1e3);break}}else{if(!w(r[n])){if(!w(r[1-n])){v[e]=a;break}r[n]=r[1-n]*(n?10:.1)}r[n]<-S?r[n]=-S:r[n]>S&&(r[n]=S),r[0]===r[1]&&(i=Math.max(1,Math.abs(1e-6*r[0])),r[0]-=i,r[1]+=i)}else x.nestedProperty(v,e).set(a)},v.setScale=function(e){var t,n,r=p._size,a=(v.overlaying&&(a=N.getFromId({_fullLayout:p},v.overlaying),v.domain=a.domain),e&&v._r?"_r":"range"),e=v.calendar,i=(v.cleanRange(a),v.r2l(v[a][0],e)),a=v.r2l(v[a][1],e),e="y"===m;if((e?(v._offset=r.t+(1-v.domain[1])*r.h,v._length=r.h*(v.domain[1]-v.domain[0]),v._m=v._length/(i-a),v._b=-v._m*a):(v._offset=r.l+v.domain[0]*r.w,v._length=r.w*(v.domain[1]-v.domain[0]),v._m=v._length/(a-i),v._b=-v._m*i),v._rangebreaks=[],v._lBreaks=0,v._m2=0,v._B=[],v.rangebreaks)&&(v._rangebreaks=v.locateBreaks(Math.min(i,a),Math.max(i,a)),v._rangebreaks.length)){for(t=0;t<v._rangebreaks.length;t++)n=v._rangebreaks[t],v._lBreaks+=Math.abs(n.max-n.min);var r=e,o=((r=a<i?!e:e)&&v._rangebreaks.reverse(),r?-1:1);for(v._m2=o*v._length/(Math.abs(a-i)-v._lBreaks),v._B.push(-v._m2*(e?a:i)),t=0;t<v._rangebreaks.length;t++)n=v._rangebreaks[t],v._B.push(v._B[v._B.length-1]-o*v._m2*(n.max-n.min));for(t=0;t<v._rangebreaks.length;t++)(n=v._rangebreaks[t]).pmin=l(n.min),n.pmax=l(n.max)}if(!isFinite(v._m)||!isFinite(v._b)||v._length<0)throw p._replotting=!1,new Error("Something went wrong with axis scaling")},v.maskBreaks=function(e){var t=v.rangebreaks||[];t._cachedPatterns||(t._cachedPatterns=t.map(function(e){return e.enabled&&e.bounds?x.simpleMap(e.bounds,e.pattern?T:v.d2c):null})),t._cachedValues||(t._cachedValues=t.map(function(e){return e.enabled&&e.values?x.simpleMap(e.values,v.d2c).sort(x.sorterAsc):null}));for(var n=0;n<t.length;n++){var r=t[n];if(r.enabled)if(r.bounds){var a,i=r.pattern,o=(a=t._cachedPatterns[n])[0],s=a[1];switch(i){case j:c=(l=new Date(e)).getUTCDay(),s<o&&(s+=7,c<o&&(c+=7));break;case z:var l,c=(l=new Date(e)).getUTCHours()+(l.getUTCMinutes()/60+l.getUTCSeconds()/3600+l.getUTCMilliseconds()/36e5);s<o&&(s+=24,c<o&&(c+=24));break;case"":c=e}if(o<=c&&c<s)return L}else for(var u=t._cachedValues[n],d=0;d<u.length;d++)if(s=(o=u[d])+r.dvalue,o<=e&&e<s)return L}return e},v.locateBreaks=function(i,o){var e,t,n,s=[];if(v.rangebreaks){for(var r=v.rangebreaks.slice().sort(function(e,t){return e.pattern===j&&t.pattern===z?-1:t.pattern===j&&e.pattern===z?1:0}),a=function(e,t){if((e=x.constrain(e,i,o))!==(t=x.constrain(t,i,o))){for(var n=!0,r=0;r<s.length;r++){var a=s[r];e<a.max&&t>=a.min&&(e<a.min&&(a.min=e),t>a.max&&(a.max=t),n=!1)}n&&s.push({min:e,max:t})}},l=0;l<r.length;l++){var c=r[l];if(c.enabled)if(c.bounds){var u,d,f=i,p=o,h=(c.pattern&&(f=Math.floor(f)),t=(e=x.simpleMap(c.bounds,c.pattern?T:v.r2l))[0],n=e[1],new Date(f));switch(c.pattern){case j:d=O,u=(n-t+(n<t?7:0))*D,f+=t*D-(h.getUTCDay()*D+h.getUTCHours()*I+h.getUTCMinutes()*R+h.getUTCSeconds()*P+h.getUTCMilliseconds());break;case z:d=D,u=(n-t+(n<t?24:0))*I,f+=t*I-(h.getUTCHours()*I+h.getUTCMinutes()*R+h.getUTCSeconds()*P+h.getUTCMilliseconds());break;default:f=Math.min(e[0],e[1]),u=d=(p=Math.max(e[0],e[1]))-f}for(var m=f;m<p;m+=d)a(m,m+u)}else for(var g=x.simpleMap(c.values,v.d2c),y=0;y<g.length;y++)a(t=g[y],n=t+c.dvalue)}s.sort(function(e,t){return e.min-t.min})}return s},v.makeCalcdata=function(e,t,n){var r=v.type,a="date"===r&&e[t+"calendar"];if(t in e){if(p=e[t],h=e._length||x.minRowLength(p),x.isTypedArray(p)&&("linear"===r||"log"===r)){if(h===p.length)return p;if(p.subarray)return p.subarray(0,h)}if("multicategory"===r){for(var i=p,o=h,s=new Array(o),l=0;l<o;l++){var c=(i[0]||[])[l],u=(i[1]||[])[l];s[l]=y([c,u])}return s}for(m=new Array(h),g=0;g<h;g++)m[g]=v.d2c(p[g],0,a,n)}else for(var d=(t+"0"in e?v.d2c(e[t+"0"],0,a):0),f=e["d"+t]?Number(e["d"+t]):1,p=e[{x:"y",y:"x"}[t]],h=e._length||p.length,m=new Array(h),g=0;g<h;g++)m[g]=d+g*f;if(v.rangebreaks)for(g=0;g<h;g++)m[g]=v.maskBreaks(m[g]);return m},v.isValidRange=function(e){return Array.isArray(e)&&2===e.length&&w(v.r2l(e[0]))&&w(v.r2l(e[1]))},v.isPtWithinRange=function(e,t){var e=v.c2l(e[m],null,t),t=v.r2l(v.range[0]),n=v.r2l(v.range[1]);return t<n?t<=e&&e<=n:n<=e&&e<=t},v._emptyCategories=function(){v._categories=[],v._categoriesMap={}},v.clearCalc=function(){var e=v._matchGroup;if(e){var t,n=null,r=null;for(t in e){var a=p[N.id2name(t)];if(a._categories){n=a._categories,r=a._categoriesMap;break}}n&&r?(v._categories=n,v._categoriesMap=r):v._emptyCategories()}else v._emptyCategories();if(v._initialCategories)for(var i=0;i<v._initialCategories.length;i++)g(v._initialCategories[i])},v.sortByInitialCategories=function(){var e=[];if(v._emptyCategories(),v._initialCategories)for(var t=0;t<v._initialCategories.length;t++)g(v._initialCategories[t]);var n,r,e=e.concat(v._traceIndices);for(n in v._matchGroup)h!==n&&((r=p[N.id2name(n)])._categories=v._categories,r._categoriesMap=v._categoriesMap,e=e.concat(r._traceIndices));return e},p._d3locale);"date"===v.type&&(v._dateFormat=e?e.timeFormat:b,v._extraFormat=p._extraFormat),v._separators=p.separators,v._numFormat=e?e.numberFormat:_,delete v._minDtick,delete v._forceTick0}},{"../../constants/numerical":267,"../../lib":287,"./axis_ids":338,"./constants":341,"@plotly/d3":20,"d3-time-format":30,"fast-isnumeric":33}],357:[function(e,t,n){"use strict";t.exports=function(t){var n=["showexponent","showtickprefix","showticksuffix"].filter(function(e){return void 0!==t[e]});if(n.every(function(e){return t[e]===t[n[0]]})||1===n.length)return t[n[0]]}},{}],358:[function(e,t,n){"use strict";var l=e("../../lib"),c=e("../../components/color").contrast,u=e("./layout_attributes"),d=e("./show_dflt"),f=e("../array_container_defaults");function p(n,r){function e(e,t){return l.coerce(n,r,u.tickformatstops,e,t)}e("enabled")&&(e("dtickrange"),e("value"))}t.exports=function(e,t,n,r,a){a=a||{};var i,o,s=d(e);n("showticklabels")&&(o=a.font||{},i=t.color,i=-1!==(t.ticklabelposition||"").indexOf("inside")?c(a.bgColor):i&&i!==u.color.dflt?i:o.color,l.coerceFont(n,"tickfont",{family:o.family,size:o.size,color:i}),a.noTicklabelstep||"multicategory"===r||"log"===r||n("ticklabelstep"),a.noAng||n("tickangle"),"category"!==r&&(o=n("tickformat"),f(e,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:p}),t.tickformatstops.length||delete t.tickformatstops,a.noExp||o||"date"===r||(n("showexponent",s),n("exponentformat"),n("minexponent"),n("separatethousands"))))}},{"../../components/color":157,"../../lib":287,"../array_container_defaults":329,"./layout_attributes":349,"./show_dflt":357}],359:[function(e,t,n){"use strict";var o=e("../../lib"),s=e("./layout_attributes");t.exports=function(e,t,n,r){var a=o.coerce2(e,t,s,"ticklen"),i=o.coerce2(e,t,s,"tickwidth"),e=o.coerce2(e,t,s,"tickcolor",t.color);n("ticks",r.outerTicks||a||i||e?"outside":"")||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)}},{"../../lib":287,"./layout_attributes":349}],360:[function(e,t,n){"use strict";var l=e("./clean_ticks"),c=e("../../lib").isArrayOrTypedArray;t.exports=function(n,r,e,t){function a(e){var t=n[e];return void 0!==t?t:(r._template||{})[e]}var i=a("tick0"),o=a("dtick"),s=a("tickvals"),s=e("tickmode",c(s)?"array":o?"linear":"auto");"auto"===s?e("nticks"):"linear"===s?(s=r.dtick=l.dtick(o,t),r.tick0=l.tick0(i,t,r.calendar,s)):"multicategory"!==t&&(void 0===e("tickvals")?r.tickmode="auto":e("ticktext"))}},{"../../lib":287,"./clean_ticks":340}],361:[function(e,t,n){"use strict";var a=e("@plotly/d3"),D=e("../../registry"),I=e("../../lib"),R=e("../../components/drawing"),P=e("./axes");t.exports=function(T,k,A,e){var M,E,S,L,C,r=T._fullLayout;{if(0!==k.length)return e&&(M=e()),C=a.ease(A.easing),T._transitionData._interruptCallbacks.push(function(){window.cancelAnimationFrame(L),L=null;for(var e={},t=0;t<k.length;t++){var n=k[t],r=n.plotinfo.xaxis,a=n.plotinfo.yaxis;n.xr0&&(e[r._name+".range"]=n.xr0.slice()),n.yr0&&(e[a._name+".range"]=n.yr0.slice())}return D.call("relayout",T,e).then(function(){for(var e=0;e<k.length;e++)O(k[e].plotinfo)})}),E=Date.now(),L=window.requestAnimationFrame(function e(){S=Date.now();for(var t,n,r,a,i,o,s,l,c,u,d,f,p,h,m=Math.min(1,(S-E)/A.duration),g=C(m),y=0;y<k.length;y++)t=k[y],n=g,o=l=h=p=f=d=u=c=l=s=o=i=a=r=void 0,r=t.plotinfo,a=r.xaxis,i=r.yaxis,o=a._length,s=i._length,l=!!t.xr1,c=!!t.yr1,u=[],l?(f=I.simpleMap(t.xr0,a.r2l),d=I.simpleMap(t.xr1,a.r2l),h=f[1]-f[0],p=d[1]-d[0],u[0]=(f[0]*(1-n)+n*d[0]-f[0])/(f[1]-f[0])*o,u[2]=o*(1-n+n*p/h),a.range[0]=a.l2r(f[0]*(1-n)+n*d[0]),a.range[1]=a.l2r(f[1]*(1-n)+n*d[1])):(u[0]=0,u[2]=o),c?(p=I.simpleMap(t.yr0,i.r2l),h=I.simpleMap(t.yr1,i.r2l),f=p[1]-p[0],d=h[1]-h[0],u[1]=(p[1]*(1-n)+n*h[1]-p[1])/(p[0]-p[1])*s,u[3]=s*(1-n+n*d/f),i.range[0]=a.l2r(p[0]*(1-n)+n*h[0]),i.range[1]=i.l2r(p[1]*(1-n)+n*h[1])):(u[1]=0,u[3]=s),P.drawOne(T,a,{skipTitle:!0}),P.drawOne(T,i,{skipTitle:!0}),P.redrawComponents(T,[a._id,i._id]),t=l?o/u[2]:1,d=c?s/u[3]:1,f=l?u[0]:0,p=c?u[1]:0,n=l?u[0]/u[2]*o:0,h=c?u[1]/u[3]*s:0,l=a._offset-n,o=i._offset-h,r.clipRect.call(R.setTranslate,f,p).call(R.setScale,1/t,1/d),r.plot.call(R.setTranslate,l,o).call(R.setScale,t,d),R.setPointGroupScale(r.zoomScalePts,1/t,1/d),R.setTextPointsScale(r.zoomScaleTxt,1/t,1/d);if(S-E>A.duration){for(var v={},b=0;b<k.length;b++){var x=k[b],_=x.plotinfo.xaxis,w=x.plotinfo.yaxis;x.xr1&&(v[_._name+".range"]=x.xr1.slice()),x.yr1&&(v[w._name+".range"]=x.yr1.slice())}M&&M(),D.call("relayout",T,v).then(function(){for(var e=0;e<k.length;e++)O(k[e].plotinfo)}),L=window.cancelAnimationFrame(e)}else L=window.requestAnimationFrame(e)}),Promise.resolve();P.redrawComponents(T)}function O(e){var t=e.xaxis,n=e.yaxis,t=(r._defs.select("#"+e.clipId+"> rect").call(R.setTranslate,0,0).call(R.setScale,1,1),e.plot.call(R.setTranslate,t._offset,n._offset).call(R.setScale,1,1),e.plot.selectAll(".scatterlayer .trace"));t.selectAll(".point").call(R.setPointGroupScale,1,1),t.selectAll(".textpoint").call(R.setTextPointsScale,1,1),t.call(R.hideOutsideRangePoints,e)}}},{"../../components/drawing":179,"../../lib":287,"../../registry":378,"./axes":334,"@plotly/d3":20}],362:[function(e,t,n){"use strict";var m=e("../../registry").traceIs,g=e("./axis_autotype");function y(e){return{v:"x",h:"y"}[e.orientation||"v"]}function v(e,t){var n=y(e),r=m(e,"box-violin"),a=m(e._fullInput||{},"candlestick");return r&&!a&&t===n&&void 0===e[n]&&void 0===e[n+"0"]}t.exports=function(e,t,n,r){if(n("autotypenumbers",r.autotypenumbersDflt),"-"===n("type",(r.splomStash||{}).type)){var n=t,a=r.data;if("-"===n.type){var i,o=n._id,s=o.charAt(0),r=(-1!==o.indexOf("scene")&&(o=s),function(e,t,n){for(var r=0;r<e.length;r++){var a=e[r];if("splom"===a.type&&0<a._length&&(a["_"+n+"axes"]||{})[t])return a;if((a[n+"axis"]||n)===t){if(v(a,n))return a;if((a[n]||[]).length||a[n+"0"])return a}}}(a,o,s));if(r)if("histogram"===r.type&&s==={v:"y",h:"x"}[r.orientation||"v"])n.type="linear";else{var l,c=s+"calendar",u=r[c],d={noMultiCategory:!m(r,"cartesian")||m(r,"noMultiCategory")};if("box"===r.type&&r._hasPreCompStats&&s==={h:"x",v:"y"}[r.orientation||"v"]&&(d.noMultiCategory=!0),d.autotypenumbers=n.autotypenumbers,v(r,s)){var f=y(r),p=[];for(i=0;i<a.length;i++){var h=a[i];m(h,"box-violin")&&(h[s+"axis"]||s)===o&&(void 0!==h[f]?p.push(h[f][0]):void 0!==h.name?p.push(h.name):p.push("text"),h[c]!==u&&(u=void 0))}n.type=g(p,u,d)}else"splom"===r.type?(l=r.dimensions[r._axesDim[o]]).visible&&(n.type=g(l.values,u,d)):n.type=g(r[s]||[r[s+"0"]],u,d)}}"-"===t.type?t.type="linear":e.type=t.type}}},{"../../registry":378,"./axis_autotype":335}],363:[function(e,t,u){"use strict";var o=e("../registry"),f=e("../lib");function c(e,t,n){var r,a=!1;if("data"===t.type)r=e._fullData[null!==t.traces?t.traces[0]:0];else{if("layout"!==t.type)return!1;r=e._fullLayout}return e=f.nestedProperty(r,t.prop).get(),{changed:a=(r=n[t.type]=n[t.type]||{}).hasOwnProperty(t.prop)&&r[t.prop]!==e?!0:a,value:r[t.prop]=e}}function i(e,t){var r=[],n=t[0],a={};if("string"==typeof n)a[n]=t[1];else{if(!f.isPlainObject(n))return r;a=n}return l(a,function(e,t,n){r.push({type:"layout",prop:e,value:n})},"",0),r}function s(c,e){var u=[],t=e[0],n=e[1],d=e[2],e={};if("string"==typeof t)e[t]=n;else{if(!f.isPlainObject(t))return u;e=t,void 0===d&&(d=n)}return void 0===d&&(d=null),l(e,function(e,t,n){if(Array.isArray(n)){var r=n.slice(),a=Math.min(r.length,c.data.length);d&&(a=Math.min(a,d.length));for(var i=[],o=0;o<a;o++)i[o]=d?d[o]:o}else r=n,i=d?d.slice():null;if(null===i)Array.isArray(r)&&(r=r[0]);else if(Array.isArray(i)){if(!Array.isArray(r)){var s=r;r=[];for(var l=0;l<i.length;l++)r[l]=s}r.length=Math.min(i.length,r.length)}u.push({type:"data",prop:e,traces:i,value:r})},"",0),u}function l(r,a,i,o){Object.keys(r).forEach(function(e){var t,n=r[e];"_"!==e[0]&&(t=i+(0<o?".":"")+e,f.isPlainObject(n)?l(n,a,t,o+1):a(t,e,n))})}u.manageCommandObserver=function(t,e,n,r){var a={},i=!0,o=((a=e&&e._commandObserver?e._commandObserver:a).cache||(a.cache={}),a.lookupTable={},u.hasSimpleAPICommandBindings(t,n,a.lookupTable));if(e&&e._commandObserver){if(o)return a;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,a}if(o){c(t,o,a.cache),a.check=function(){var e;if(i)return e=c(t,o,a.cache),e.changed&&r&&void 0!==a.lookupTable[e.value]&&(a.disable(),Promise.resolve(r({value:e.value,type:o.type,prop:o.prop,traces:o.traces,index:a.lookupTable[e.value]})).then(a.enable,a.enable)),e.changed};for(var s=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],l=0;l<s.length;l++)t._internalOn(s[l],a.check);a.remove=function(){for(var e=0;e<s.length;e++)t._removeInternalListener(s[e],a.check)}}else f.log("Unable to automatically bind plot updates to API command"),a.lookupTable={},a.remove=function(){};return a.disable=function(){i=!1},a.enable=function(){i=!0},e&&(e._commandObserver=a),a},u.hasSimpleAPICommandBindings=function(e,t,n){for(var r,a=t.length,i=0;i<a;i++){var o=t[i],s=o.method,o=o.args;if(Array.isArray(o)||(o=[]),!s)return!1;s=u.computeAPICommandBindings(e,s,o);if(1!==s.length)return!1;if(r){if((c=s[0]).type!==r.type)return!1;if(c.prop!==r.prop)return!1;if(Array.isArray(r.traces)){if(!Array.isArray(c.traces))return!1;c.traces.sort();for(var l=0;l<r.traces.length;l++)if(r.traces[l]!==c.traces[l])return!1}else if(c.prop!==r.prop)return!1}else r=s[0],Array.isArray(r.traces)&&r.traces.sort();var c,o=(c=s[0]).value;if(Array.isArray(o)){if(1!==o.length)return!1;o=o[0]}n&&(n[o]=i)}return r},u.executeAPICommand=function(e,t,n){if("skip"===t)return Promise.resolve();var r=o.apiMethodRegistry[t],a=[e];Array.isArray(n)||(n=[]);for(var i=0;i<n.length;i++)a.push(n[i]);return r.apply(null,a).catch(function(e){return f.warn("API call to Plotly."+t+" rejected.",e),Promise.reject(e)})},u.computeAPICommandBindings=function(e,t,n){var r,a;switch(Array.isArray(n)||(n=[]),t){case"restyle":r=s(e,n);break;case"relayout":r=i(0,n);break;case"update":r=s(e,[n[0],n[2]]).concat(i(0,[n[1]]));break;case"animate":a=n,r=Array.isArray(a[0])&&1===a[0].length&&-1!==["string","number"].indexOf(typeof a[0][0])?[{type:"layout",prop:"_currentFrame",value:a[0][0].toString()}]:[];break;default:r=[]}return r}},{"../lib":287,"../registry":378}],364:[function(e,t,n){"use strict";var r=e("../lib/extend").extendFlat;n.attributes=function(e,t){var n={valType:"info_array",editType:(e=e||{}).editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},t=(e.name&&e.name,e.trace,(t=t||{}).description&&t.description,{x:r({},n,{}),y:r({},n,{}),editType:e.editType});return e.noGridCell||(t.row={valType:"integer",min:0,dflt:0,editType:e.editType},t.column={valType:"integer",min:0,dflt:0,editType:e.editType}),t},n.defaults=function(e,t,n,r){var a=r&&r.x||[0,1],r=r&&r.y||[0,1],t=t.grid,t=(t&&(void 0!==(i=n("domain.column"))&&(i<t.columns?a=t._domains.x[i]:delete e.domain.column),void 0!==(i=n("domain.row"))&&(i<t.rows?r=t._domains.y[i]:delete e.domain.row)),n("domain.x",a)),i=n("domain.y",r);t[0]<t[1]||(e.domain.x=a.slice()),i[0]<i[1]||(e.domain.y=r.slice())}},{"../lib/extend":281}],365:[function(e,t,n){"use strict";t.exports=function(e){var t=e.editType,n=e.colorEditType,n={family:{valType:"string",noBlank:!0,strict:!0,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:n=void 0===n?t:n},editType:t};return e.autoSize&&(n.size.dflt="auto"),e.autoColor&&(n.color.dflt="auto"),e.arrayOk&&(n.family.arrayOk=!0,n.size.arrayOk=!0,n.color.arrayOk=!0),n}},{}],366:[function(e,t,n){"use strict";t.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],367:[function(e,t,n){"use strict";var u=e("../registry"),d=e("./cartesian/constants").SUBPLOT_PATTERN;n.getSubplotCalcData=function(e,t,n){t=u.subplotsRegistry[t];if(!t)return[];for(var r=t.attr,a=[],i=0;i<e.length;i++){var o=e[i];o[0].trace[r]===n&&a.push(o)}return a},n.getModuleCalcData=function(e,t){var n=[],r=[],a="string"==typeof t?u.getModule(t).plot:"function"==typeof t?t:t.plot;if(!a)return[n,e];for(var i=0;i<e.length;i++){var o=e[i],s=o[0].trace;!0===s.visible&&0!==s._length&&(s._module.plot===a?n:r).push(o)}return[n,r]},n.getSubplotData=function(e,t,n){if(!u.subplotsRegistry[t])return[];var r,a,i,o,s=u.subplotsRegistry[t].attr,l=[];"gl2d"===t&&(i="x"+(a=n.match(d))[1],o="y"+a[2]);for(var c=0;c<e.length;c++)r=e[c],"gl2d"===t&&u.traceIs(r,"gl2d")?r[s[0]]===i&&r[s[1]]===o&&l.push(r):r[s]===n&&l.push(r);return l}},{"../registry":378,"./cartesian/constants":341}],368:[function(e,t,n){"use strict";function r(e,t){for(var n,r=[0,0,0,0],a=0;a<4;++a)for(n=0;n<4;++n)r[n]+=e[4*a+n]*t[a];return r}t.exports=function(e,t){return r(e.projection,r(e.view,r(e.model,[t[0],t[1],t[2],1])))}},{}],369:[function(e,t,n){"use strict";var r=e("./font_attributes"),a=e("./animation_attributes"),i=e("../components/color/attributes"),o=e("../components/shapes/draw_newshape/attributes"),s=e("./pad_attributes"),e=e("../lib/extend").extendFlat,l=r({editType:"calc"});l.family.dflt='"Open Sans", verdana, arial, sans-serif',l.size.dflt=12,l.color.dflt=i.defaultLine,t.exports={font:l,title:{text:{valType:"string",editType:"layoutstyle"},font:r({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:e(s({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:i.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:i.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:i.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:o.newshape,activeshape:o.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:e({},a.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:r({editType:"layoutstyle"})}}},{"../components/color/attributes":156,"../components/shapes/draw_newshape/attributes":242,"../lib/extend":281,"./animation_attributes":328,"./font_attributes":365,"./pad_attributes":370}],370:[function(e,t,n){"use strict";t.exports=function(e){e=e.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},{}],371:[function(e,t,n){"use strict";var s=e("@plotly/d3"),O=e("d3-time-format").timeFormatLocale,D=e("d3-format").formatLocale,S=e("fast-isnumeric"),I=e("../registry"),b=e("../plot_api/plot_schema"),T=e("../plot_api/plot_template"),R=e("../lib"),m=e("../components/color"),x=e("../constants/numerical").BADNUM,C=e("./cartesian/axis_ids"),P=e("./cartesian/handle_outline").clearSelect,a=e("./animation_attributes"),i=e("./frame_attributes"),o=e("../plots/get_data").getModuleCalcData,N=R.relinkPrivateKeys,F=R._,z=t.exports={},k=(R.extendFlat(z,I),z.attributes=e("./attributes"),z.attributes.type.values=z.allTypes,z.fontAttrs=e("./font_attributes"),z.layoutAttributes=e("./layout_attributes"),z.fontWeight="normal",z.transformsRegistry),t=e("./command");z.executeAPICommand=t.executeAPICommand,z.computeAPICommandBindings=t.computeAPICommandBindings,z.manageCommandObserver=t.manageCommandObserver,z.hasSimpleAPICommandBindings=t.hasSimpleAPICommandBindings,z.redrawText=function(t){return t=R.getGraphDiv(t),new Promise(function(e){setTimeout(function(){t._fullLayout&&(I.getComponentMethod("annotations","draw")(t),I.getComponentMethod("legend","draw")(t),I.getComponentMethod("colorbar","draw")(t),e(z.previousPromises(t)))},300)})},z.resize=function(n){n=R.getGraphDiv(n);var r,e=new Promise(function(t,e){n&&!R.isHidden(n)||e(new Error("Resize must be passed a displayed plot div element.")),n._redrawTimer&&clearTimeout(n._redrawTimer),n._resolveResize&&(r=n._resolveResize),n._resolveResize=t,n._redrawTimer=setTimeout(function(){var e;!n.layout||n.layout.width&&n.layout.height||R.isHidden(n)?t(n):(delete n.layout.width,delete n.layout.height,e=n.changed,n.autoplay=!0,I.call("relayout",n,{autosize:!0}).then(function(){n.changed=e,n._resolveResize===t&&(delete n._resolveResize,t(n))}))},100)});return r&&r(e),e},z.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then(function(){e._promises=[]})},z.addLinks=function(e){if(e._context.showLink||e._context.showSources){var t=e._fullLayout,n=R.ensureSingle(t._paper,"text","js-plot-link-container",function(e){e.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:m.defaultLine,"pointer-events":"all"}).each(function(){var e=s.select(this);e.append("tspan").classed("js-link-to-tool",!0),e.append("tspan").classed("js-link-spacer",!0),e.append("tspan").classed("js-sourcelinks",!0)})}),r=n.node(),a={y:t._paper.attr("height")-9},r=(document.body.contains(r)&&r.getComputedTextLength()>=t.width-20?(a["text-anchor"]="start",a.x=5):(a["text-anchor"]="end",a.x=t._paper.attr("width")-7),n.attr(a),n.select(".js-link-to-tool")),t=n.select(".js-link-spacer"),a=n.select(".js-sourcelinks");if(e._context.showSources&&e._context.showSources(e),e._context.showLink){var i,o=e,n=r;n.text(""),n=n.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(o._context.linkText+" "+String.fromCharCode(187)),o._context.sendData?n.on("click",function(){z.sendDataToCloud(o)}):(e=window.location.pathname.split("/"),i=window.location.search,n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+e[2].split(".")[0]+"/"+e[1]+i}))}t.text(r.text()&&a.text()?" - ":"")}},z.sendDataToCloud=function(e){var t,n=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(n)return e.emit("plotly_beforeexport"),t=s.select(e).append("div").attr("id","hiddenform").style("display","none"),n=t.append("form").attr({action:n+"/external",method:"post",target:"_blank"}),n.append("input").attr({type:"text",name:"data"}).node().value=z.graphJson(e,!1,"keepdata"),n.node().submit(),t.remove(),e.emit("plotly_afterexport"),!1};var j=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],q=["year","month","dayMonth","dayMonthYear"];function H(e,a){var t=(t=e._context.locale)||"en-US",i=!1,o={};function n(e){for(var t=!0,n=0;n<a.length;n++){var r=a[n];o[r]||(e[r]?o[r]=e[r]:t=!1)}t&&(i=!0)}for(var r=0;r<2;r++){for(var s=e._context.locales,l=0;l<2;l++){var c=(s[t]||{}).format;if(c&&(n(c),i))break;s=I.localeRegistry}var u=t.split("-")[0];if(i||u===t)break;t=u}return i||n(I.localeRegistry.en.format),o}function g(e){var t=e.transforms;if(Array.isArray(t)&&t.length)for(var n=0;n<t.length;n++){var r=t[n],r=r._module||k[r.type];if(r&&r.makesData)return!0}return!1}function l(e){return"string"==typeof e&&"px"===e.substr(e.length-2)&&parseFloat(e)}function B(e){var t=e.margin;e._size||((t=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)}).w=Math.round(e.width)-t.l-t.r,t.h=Math.round(e.height)-t.t-t.b),e._pushmargin||(e._pushmargin={}),e._pushmarginIds||(e._pushmarginIds={})}z.supplyDefaults=function(e,t){var t=t&&t.skipUpdateCalc,n=e._fullLayout||{};if(n._skipDefaults)delete n._skipDefaults;else{var r,a=e._fullLayout={},i=e.layout||{},o=e._fullData||[],s=e._fullData=[],l=e.data||[],c=e.calcdata||[],u=e._context||{},d=(e._transitionData||z.createTransitionData(e),a._dfltTitle={plot:F(e,"Click to enter Plot title"),x:F(e,"Click to enter X axis title"),y:F(e,"Click to enter Y axis title"),colorbar:F(e,"Click to enter Colorscale title"),annotation:F(e,"new text")},a._traceWord=F(e,"trace"),H(e,j)),f=(a._mapboxAccessToken=u.mapboxAccessToken,n._initialAutoSizeIsDone?(h=n.width,p=n.height,z.supplyLayoutGlobalDefaults(i,a,d),i.width||(a.width=h),i.height||(a.height=p),z.sanitizeMargins(a)):(z.supplyLayoutGlobalDefaults(i,a,d),h=!i.width||!i.height,p=a.autosize,u=u.autosizable,h&&(p||u)?z.plotAutoSize(e,i,a):h&&z.sanitizeMargins(a),!p&&h&&(i.width=a.width,i.height=a.height)),a._d3locale=(r=d,u=a.separators,r.decimal=u.charAt(0),r.thousands=u.charAt(1),{numberFormat:function(t){try{t=D(r).format(R.adjustFormat(t))}catch(e){return R.warnBadFormat(t),R.noFormat}return t},timeFormat:O(r).utcFormat}),a._extraFormat=H(e,q),a._initialAutoSizeIsDone=!0,a._dataLength=l.length,a._modules=[],a._visibleModules=[],a._basePlotModules=[],a._subplots=function(){var e,t,n=I.collectableSubplotTypes,r={};if(!n){n=[];var a,i=I.subplotsRegistry;for(a in i){var o=i[a].attr;if(o&&(n.push(a),Array.isArray(o)))for(t=0;t<o.length;t++)R.pushUnique(n,o[t])}}for(e=0;e<n.length;e++)r[n[e]]=[];return r}()),p=a._splomAxes={x:{},y:{}},h=a._splomSubplots={},m=(a._splomGridDflt={},a._scatterStackOpts={},a._firstScatter={},a._alignmentOpts={},a._colorAxes={},a._requestRangeslider={},a._traceUids=function(e,t){var n,r,a=t.length,i=[];for(n=0;n<e.length;n++){var o=e[n]._fullInput;o!==r&&i.push(o),r=o}var s=i.length,l=new Array(a),c={};function u(e,t){l[t]=e,c[e]=1}function d(e,t){return e&&"string"==typeof e&&!c[e]&&(u(e,t),1)}for(n=0;n<a;n++){var f=t[n].uid;d(f="number"==typeof f?String(f):f,n)||n<s&&d(i[n].uid,n)||u(R.randstr(c),n)}return l}(o,l),a._globalTransforms=(e._context||{}).globalTransforms,z.supplyDataDefaults(l,s,i,a),Object.keys(p.x)),g=Object.keys(p.y);if(1<m.length&&1<g.length){for(I.getComponentMethod("grid","sizeDefaults")(i,a),x=0;x<m.length;x++)R.pushUnique(f.xaxis,m[x]);for(x=0;x<g.length;x++)R.pushUnique(f.yaxis,g[x]);for(var y in h)R.pushUnique(f.cartesian,y)}if(a._has=z._hasPlotType.bind(a),o.length===s.length)for(x=0;x<s.length;x++)N(s[x],o[x]);z.supplyLayoutModuleDefaults(i,a,s,e._transitionData);for(var v=a._visibleModules,b=[],x=0;x<v.length;x++){var _=v[x].crossTraceDefaults;_&&R.pushUnique(b,_)}for(x=0;x<b.length;x++)b[x](s,a);a._hasOnlyLargeSploms=1===a._basePlotModules.length&&"splom"===a._basePlotModules[0].name&&15<m.length&&15<g.length&&0===a.shapes.length&&0===a.images.length,z.linkSubplots(s,a,o,n),z.cleanPlot(s,a,o,n);var w,d=!(!n._has||!n._has("gl2d")),u=!(!a._has||!a._has("gl2d")),l=!(!n._has||!n._has("cartesian"))||d,p=!(!a._has||!a._has("cartesian"))||u,T=(l&&!p?n._bgLayer.remove():p&&!l&&(a._shouldCreateBgLayer=!0),n._zoomlayer&&!e._dragging&&P({_fullLayout:n}),s),k=a,A=[];k.meta&&(w=k._meta={meta:k.meta,layout:{meta:k.meta}});for(var M=0;M<T.length;M++){var E=T[M];E.meta?A[E.index]=E._meta={meta:E.meta}:k.meta&&(E._meta={meta:k.meta}),k.meta&&(E._meta.layout={meta:k.meta})}A.length&&((w=w||(k._meta={})).data=A),N(a,n),I.getComponentMethod("colorscale","crossTraceDefaults")(s,a),a._preGUI||(a._preGUI={}),a._tracePreGUI||(a._tracePreGUI={});var S,L=a._tracePreGUI,C={};for(S in L)C[S]="old";for(x=0;x<s.length;x++)C[S=s[x]._fullInput.uid]||(L[S]={}),C[S]="new";for(S in C)"old"===C[S]&&delete L[S];B(a),I.getComponentMethod("rangeslider","makeData")(a),t||c.length!==s.length||z.supplyDefaultsUpdateCalc(c,s)}},z.supplyDefaultsUpdateCalc=function(e,t){for(var n=0;n<t.length;n++){var r=t[n],a=(e[n]||[])[0];if(a&&a.trace){var i=a.trace;if(i._hasCalcTransform)for(var o,s,l=i._arrayAttrs,c=0;c<l.length;c++)o=l[c],s=R.nestedProperty(i,o).get().slice(),R.nestedProperty(r,o).set(s);a.trace=r}}},z.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])},z._hasPlotType=function(e){for(var t=this._basePlotModules||[],n=0;n<t.length;n++)if(t[n].name===e)return!0;var r=this._modules||[];for(n=0;n<r.length;n++){var a=r[n].name;if(a===e)return!0;a=I.modules[a];if(a&&a.categories[e])return!0}return!1},z.cleanPlot=function(e,t,n,r){for(var a=r._basePlotModules||[],i=0;i<a.length;i++){var o=a[i];o.clean&&o.clean(e,t,n,r)}var s=r._has&&r._has("gl"),l=t._has&&t._has("gl"),c=(s&&!l&&void 0!==r._glcontainer&&(r._glcontainer.selectAll(".gl-canvas").remove(),r._glcontainer.selectAll(".no-webgl").remove(),r._glcanvas=null),!!r._infolayer);e:for(i=0;i<n.length;i++){for(var u=n[i].uid,d=0;d<e.length;d++)if(u===e[d].uid)continue e;c&&r._infolayer.select(".cb"+u).remove()}},z.linkSubplots=function(e,t,n,r){for(var a=r._plots||{},i=t._plots={},r=t._subplots,o={_fullData:e,_fullLayout:t},s=r.cartesian.concat(r.gl2d||[]),l=0;l<s.length;l++){var c,u=s[l],d=a[u],f=C.getFromId(o,u,"x"),p=C.getFromId(o,u,"y");for(d?c=i[u]=d:(c=i[u]={}).id=u,f._counterAxes.push(p._id),p._counterAxes.push(f._id),f._subplotsWith.push(u),p._subplotsWith.push(u),c.xaxis=f,c.yaxis=p,c._hasClipOnAxisFalse=!1,x=0;x<e.length;x++){var h=e[x];if(h.xaxis===c.xaxis._id&&h.yaxis===c.yaxis._id&&!1===h.cliponaxis){c._hasClipOnAxisFalse=!0;break}}}var m=C.list(o,null,!0);for(l=0;l<m.length;l++){var g,y=null;(g=m[l]).overlaying&&(y=C.getFromId(o,g.overlaying))&&y.overlaying&&(g.overlaying=!1,y=null),g._mainAxis=y||g,y&&(g.domain=y.domain.slice()),g._anchorAxis="free"===g.anchor?null:C.getFromId(o,g.anchor)}for(l=0;l<m.length;l++)if((g=m[l])._counterAxes.sort(C.idSort),g._subplotsWith.sort(R.subplotSort),g._mainSubplot=function(e,t){var n={_fullLayout:t},r="x"===e._id.charAt(0),a=e._mainAxis._anchorAxis,i="",o="",s="";a&&(s=a._mainAxis._id,i=r?e._id+s:s+e._id);if(!i||!t._plots[i]){i="";for(var l=e._counterAxes,c=0;c<l.length;c++){var u=l[c],d=r?e._id+u:u+e._id,u=(o=o||d,C.getFromId(n,u));if(s&&u.overlaying===s){i=d;break}}}return i||o}(g,t),g._counterAxes.length&&(g.spikemode&&-1!==g.spikemode.indexOf("across")||g.automargin&&g.mirror&&"free"!==g.anchor||I.getComponentMethod("rangeslider","isVisible")(g))){for(var v=1,b=0,x=0;x<g._counterAxes.length;x++)var _=C.getFromId(o,g._counterAxes[x]),v=Math.min(v,_.domain[0]),b=Math.max(b,_.domain[1]);v<b&&(g._counterDomainMin=v,g._counterDomainMax=b)}},z.clearExpandedTraceDefaultColors=function(e){var a,i,t;for(i=[],(a=e._module._colorAttrs)||(e._module._colorAttrs=a=[],b.crawl(e._module.attributes,function(e,t,n,r){i[r]=t,i.length=r+1,"color"===e.valType&&void 0===e.dflt&&a.push(i.join("."))})),t=0;t<a.length;t++)R.nestedProperty(e,"_input."+a[t]).get()||R.nestedProperty(e,a[t]).set(null)},z.supplyDataDefaults=function(e,n,t,r){var a,i=r._modules,o=r._visibleModules,s=r._basePlotModules,l=0,c=0;function u(e){n.push(e);var t=e._module;t&&(R.pushUnique(i,t),!0===e.visible&&R.pushUnique(o,t),R.pushUnique(s,e._module.basePlotModule),l++,!1!==e._input.visible&&c++)}r._transformModules=[];for(var d,f,p={},h=[],m=(t.template||{}).data||{},g=T.traceTemplater(m),y=0;y<e.length;y++){if(a=e[y],(f=g.newTrace(a)).uid=r._traceUids[y],z.supplyTraceDefaults(a,f,c,r,y),f.index=y,f._input=a,f._expandedIndex=l,f.transforms&&f.transforms.length)for(var v=!1!==a.visible&&!1===f.visible,b=function(e,t,n,r){for(var a=e.transforms,i=[e],o=0;o<a.length;o++){var s=a[o],l=k[s.type];l&&l.transform&&(i=l.transform(i,{transform:s,fullTrace:e,fullData:t,layout:n,fullLayout:r,transformIndex:o}))}return i}(f,n,t,r),x=0;x<b.length;x++){var _=b[x],w={_template:f._template,type:f.type,uid:f.uid+x};v&&!1===_.visible&&delete _.visible,z.supplyTraceDefaults(_,w,l,r,y),N(w,_),w.index=y,w._input=a,w._fullInput=f,w._expandedIndex=l,w._expandedInput=_,u(w)}else u((f._fullInput=f)._expandedInput=f);I.traceIs(f,"carpetAxis")&&(p[f.carpet]=f),I.traceIs(f,"carpetDependent")&&h.push(y)}for(y=0;y<h.length;y++)(f=n[h[y]]).visible&&(d=p[f.carpet],(f._carpet=d)&&d.visible?(f.xaxis=d.xaxis,f.yaxis=d.yaxis):f.visible=!1)},z.supplyAnimationDefaults=function(n){n=n||{};var e,r={};function t(e,t){R.coerce(n||{},r,a,e,t)}if(t("mode"),t("direction"),t("fromcurrent"),Array.isArray(n.frame))for(r.frame=[],e=0;e<n.frame.length;e++)r.frame[e]=z.supplyAnimationFrameDefaults(n.frame[e]||{});else r.frame=z.supplyAnimationFrameDefaults(n.frame||{});if(Array.isArray(n.transition))for(r.transition=[],e=0;e<n.transition.length;e++)r.transition[e]=z.supplyAnimationTransitionDefaults(n.transition[e]||{});else r.transition=z.supplyAnimationTransitionDefaults(n.transition||{});return r},z.supplyAnimationFrameDefaults=function(n){var r={};function e(e,t){R.coerce(n||{},r,a.frame,e,t)}return e("duration"),e("redraw"),r},z.supplyAnimationTransitionDefaults=function(n){var r={};function e(e,t){R.coerce(n||{},r,a.transition,e,t)}return e("duration"),e("easing"),r},z.supplyFrameDefaults=function(n){var r={};function e(e,t){R.coerce(n,r,i,e,t)}return e("group"),e("name"),e("traces"),e("baseframe"),e("data"),e("layout"),r},z.supplyTraceDefaults=function(n,r,e,t,a){var i,o=t.colorway||m.defaults,e=o[e%o.length];function s(e,t){return R.coerce(n,r,z.attributes,e,t)}o=s("visible"),s("type"),s("name",t._traceWord+" "+a),s("uirevision",t.uirevision),a=z.getModule(r);if(r._module=a){var l=a.basePlotModule,c=l.attr,u=l.attributes;if(c&&u){var d=t._subplots,f="";if(o||"gl2d"!==l.name){if(Array.isArray(c))for(i=0;i<c.length;i++){var p=c[i],h=R.coerce(n,r,u,p);d[p]&&R.pushUnique(d[p],h),f+=h}else f=R.coerce(n,r,u,c);d[l.name]&&R.pushUnique(d[l.name],f)}}}return o&&(s("customdata"),s("ids"),s("meta"),I.traceIs(r,"showLegend")?(R.coerce(n,r,(a.attributes.showlegend?a:z).attributes,"showlegend"),s("legendgroup"),s("legendgrouptitle.text"),s("legendrank"),r._dfltShowLegend=!0):r._dfltShowLegend=!1,a&&a.supplyDefaults(n,r,e,t),I.traceIs(r,"noOpacity")||s("opacity"),I.traceIs(r,"notLegendIsolatable")&&(r.visible=!!r.visible),I.traceIs(r,"noHover")||(r.hovertemplate||R.coerceHoverinfo(n,r,t),"parcats"!==r.type&&I.getComponentMethod("fx","supplyDefaults")(n,r,e,t)),a&&a.selectPoints&&s("selectedpoints"),z.supplyTransformDefaults(n,r,t)),r},z.hasMakesDataTransform=g,z.supplyTransformDefaults=function(e,t,n){if(t._length||g(e)){var r=n._globalTransforms||[],a=n._transformModules||[];if(Array.isArray(e.transforms)||0!==r.length)for(var i=e.transforms||[],o=r.concat(i),s=t.transforms=[],l=0;l<o.length;l++){var c,u=o[l],d=u.type,f=k[d],p=!(u._module&&u._module===f),h=f&&"function"==typeof f.transform;f||R.warn("Unrecognized transform type "+d+"."),f&&f.supplyDefaults&&(p||h)?((c=f.supplyDefaults(u,t,n,e)).type=d,c._module=f,R.pushUnique(a,f)):c=R.extendFlat({},u),s.push(c)}}},z.supplyLayoutGlobalDefaults=function(n,r,e){function t(e,t){return R.coerce(n,r,z.layoutAttributes,e,t)}var a=n.template,a=(R.isPlainObject(a)&&(r.template=a,r._template=a.layout,r._dataTemplate=a.data),t("autotypenumbers"),R.coerceFont(t,"font")),i=a.size;R.coerceFont(t,"title.font",R.extendFlat({},a,{size:Math.round(1.4*i)})),t("title.text",r._dfltTitle.plot),t("title.xref"),t("title.yref"),t("title.x"),t("title.y"),t("title.xanchor"),t("title.yanchor"),t("title.pad.t"),t("title.pad.r"),t("title.pad.b"),t("title.pad.l");t("uniformtext.mode")&&t("uniformtext.minsize"),t("autosize",!(n.width&&n.height)),t("width"),t("height"),t("margin.l"),t("margin.r"),t("margin.t"),t("margin.b"),t("margin.pad"),t("margin.autoexpand"),n.width&&n.height&&z.sanitizeMargins(r),I.getComponentMethod("grid","sizeDefaults")(n,r),t("paper_bgcolor"),t("separators",e.decimal+e.thousands),t("hidesources"),t("colorway"),t("datarevision");a=t("uirevision");t("editrevision",a),t("selectionrevision",a),I.getComponentMethod("modebar","supplyLayoutDefaults")(n,r),I.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(n,r,t),t("meta"),R.isPlainObject(n.transition)&&(t("transition.duration"),t("transition.easing"),t("transition.ordering")),I.getComponentMethod("calendars","handleDefaults")(n,r,"calendar"),I.getComponentMethod("fx","supplyLayoutGlobalDefaults")(n,r,t)},z.plotAutoSize=function(e,t,n){var r,a,i=e._context||{},o=i.frameMargins,s=R.isPlotDiv(e),i=(s&&e.emit("plotly_autosize"),i.fillFrame?(r=window.innerWidth,a=window.innerHeight,document.body.style.overflow="hidden"):(r=l((i=s?window.getComputedStyle(e):{}).width)||l(i.maxWidth)||n.width,a=l(i.height)||l(i.maxHeight)||n.height,S(o)&&0<o&&(s=1-2*o,r=Math.round(s*r),a=Math.round(s*a))),z.layoutAttributes.width.min),o=z.layoutAttributes.height.min,s=(r<i&&(r=i),a<o&&(a=o),!t.width&&1<Math.abs(n.width-r)),i=!t.height&&1<Math.abs(n.height-a);(i||s)&&(s&&(n.width=r),i&&(n.height=a)),e._initialAutoSize||(e._initialAutoSize={width:r,height:a}),z.sanitizeMargins(n)},z.supplyLayoutModuleDefaults=function(e,t,n,r){var a,i,o,s=I.componentsRegistry,l=t._basePlotModules,c=I.subplotsRegistry.cartesian;for(a in s)(i=s[a]).includeBasePlot&&i.includeBasePlot(e,t);for(o in l.length||l.push(c),t._has("cartesian")&&(I.getComponentMethod("grid","contentDefaults")(e,t),c.finalizeSubplots(e,t)),t._subplots)t._subplots[o].sort(R.subplotSort);for(d=0;d<l.length;d++)(i=l[d]).supplyLayoutDefaults&&i.supplyLayoutDefaults(e,t,n);for(var u=t._modules,d=0;d<u.length;d++)(i=u[d]).supplyLayoutDefaults&&i.supplyLayoutDefaults(e,t,n);var f=t._transformModules;for(d=0;d<f.length;d++)(i=f[d]).supplyLayoutDefaults&&i.supplyLayoutDefaults(e,t,n,r);for(a in s)(i=s[a]).supplyLayoutDefaults&&i.supplyLayoutDefaults(e,t,n)},z.purge=function(e){var t=e._fullLayout||{};void 0!==t._glcontainer&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),R.clearThrottle(),R.clearResponsive(e),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._dragdata,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()},z.style=function(e){for(var t=e._fullLayout._visibleModules,n=[],r=0;r<t.length;r++){var a=t[r];a.style&&R.pushUnique(n,a.style)}for(r=0;r<n.length;r++)n[r](e)},z.sanitizeMargins=function(e){var t,n,r,a,i;e&&e.margin&&(t=e.width,n=e.height,r=t-((e=e.margin).l+e.r),a=n-(e.t+e.b),r<0&&(i=(t-1)/(e.l+e.r),e.l=Math.floor(i*e.l),e.r=Math.floor(i*e.r)),a<0&&(i=(n-1)/(e.t+e.b),e.t=Math.floor(i*e.t),e.b=Math.floor(i*e.b)))},z.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}},z.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};z.autoMargin=function(e,t,n){var r,a,i=e._fullLayout,o=i.width,s=i.height,l=i.margin,c=R.constrain(o-l.l-l.r,2,64),u=R.constrain(s-l.t-l.b,2,64),o=Math.max(0,o-c),c=Math.max(0,s-u),s=i._pushmargin,u=i._pushmarginIds;if(!1!==l.autoexpand&&(n?(void 0===(r=n.pad)&&(r=Math.min(12,l.l,l.r,l.t,l.b)),o&&1<(l=(n.l+n.r)/o)&&(n.l/=l,n.r/=l),c&&1<(o=(n.t+n.b)/c)&&(n.t/=o,n.b/=o),l=void 0!==n.xl?n.xl:n.x,c=void 0!==n.xr?n.xr:n.x,o=void 0!==n.yt?n.yt:n.y,a=void 0!==n.yb?n.yb:n.y,s[t]={l:{val:l,size:n.l+r},r:{val:c,size:n.r+r},b:{val:a,size:n.b+r},t:{val:o,size:n.t+r}},u[t]=1):(delete s[t],delete u[t]),!i._replotting))return z.doAutoMargin(e)},z.doAutoMargin=function(e){var t=e._fullLayout,n=t.width,r=t.height,a=(t._size||(t._size={}),B(t),t._size),i=t.margin,o=R.extendFlat({},a),s=i.l,l=i.r,c=i.t,u=i.b,d=t._pushmargin,f=t._pushmarginIds;if(!1!==t.margin.autoexpand){for(var p in d)f[p]||delete d[p];for(var h in d.base={l:{val:0,size:s},r:{val:1,size:l},t:{val:1,size:c},b:{val:0,size:u}},d){var m,g,y,v,b,x=d[h].l||{},h=d[h].b||{},_=x.val,w=x.size,T=h.val,k=h.size;for(m in d)S(w)&&d[m].r&&(g=d[m].r.val,v=d[m].r.size,_<g&&(s+l<(y=(w*g+(v-n)*_)/(g-_))+(v=(v*(1-_)+(w-n)*(1-g))/(g-_))&&(s=y,l=v))),S(k)&&d[m].t&&(g=d[m].t.val,y=d[m].t.size,T<g&&(u+c<(v=(k*g+(y-r)*T)/(g-T))+(b=(y*(1-T)+(k-r)*(1-g))/(g-T))&&(u=v,c=b)))}}var A,M=R.constrain(n-i.l-i.r,2,64),E=R.constrain(r-i.t-i.b,2,64),M=Math.max(0,n-M),E=Math.max(0,r-E);if(!M||1<(M=(s+l)/M)&&(s/=M,l/=M),!E||1<(M=(u+c)/E)&&(u/=M,c/=M),a.l=Math.round(s),a.r=Math.round(l),a.t=Math.round(c),a.b=Math.round(u),a.p=Math.round(i.pad),a.w=Math.round(n)-a.l-a.r,a.h=Math.round(r)-a.t-a.b,!t._replotting&&z.didMarginChange(o,a)){"_redrawFromAutoMarginCount"in t?t._redrawFromAutoMarginCount++:t._redrawFromAutoMarginCount=1;E=3*(1+Object.keys(f).length);if(t._redrawFromAutoMarginCount<E)return I.call("_doPlot",e);t._size=o,R.warn("Too many auto-margin redraws.")}A=C.list(e,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(e){for(var t=0;t<A.length;t++){var n=A[t][e];n&&n()}})};var c=["l","r","t","b","p","w","h"];function r(i,t,o){var s=!1;var e=[z.previousPromises,function(){if(i._transitionData){i._transitioning=!1;var e=i._transitionData._interruptCallbacks,t=Promise.resolve();if(e)for(;e.length;)t=t.then(e.shift());return t}},o.prepareFn,z.rehover,function(){return i.emit("plotly_transitioning",[]),new Promise(function(n){i._transitioning=!0,0<t.duration&&(i._transitioningWithDuration=!0),i._transitionData._interruptCallbacks.push(function(){s=!0}),o.redraw&&i._transitionData._interruptCallbacks.push(function(){return I.call("redraw",i)}),i._transitionData._interruptCallbacks.push(function(){i.emit("plotly_transitioninterrupted",[])});var r=0,a=0;function e(){return r++,function(){if(a++,!s&&a===r){var e=n;if(i._transitionData){{var t=i._transitionData._interruptCallbacks;if(t)for(;t.length;)t.shift()}Promise.resolve().then(function(){if(o.redraw)return I.call("redraw",i)}).then(function(){i._transitioning=!1,i._transitioningWithDuration=!1,i.emit("plotly_transitioned",[])}).then(e)}}}}o.runFn(e),setTimeout(e())})}],e=R.syncOrAsync(e,i);return(e=e&&e.then?e:Promise.resolve()).then(function(){return i})}z.didMarginChange=function(e,t){for(var n=0;n<c.length;n++){var r=c[n],a=e[r],r=t[r];if(!S(a)||1<Math.abs(r-a))return!0}return!1},z.graphJson=function(e,t,i,n,r,a){(r&&t&&!e._fullData||r&&!t&&!e._fullLayout)&&z.supplyDefaults(e);var o=r?e._fullData:e.data,s=r?e._fullLayout:e.layout,l=(e._transitionData||{})._frames;function c(t,n){return"function"==typeof t?n?"_function_":null:R.isPlainObject(t)?(r={},Object.keys(t).sort().forEach(function(e){if(-1===["_","["].indexOf(e.charAt(0)))if("function"==typeof t[e])n&&(r[e]="_function");else{if("keepdata"===i){if("src"===e.substr(e.length-3))return}else if("keepstream"===i){if("string"==typeof(a=t[e+"src"])&&0<a.indexOf(":")&&!R.isPlainObject(t.stream))return}else if("keepall"!==i&&"string"==typeof(a=t[e+"src"])&&0<a.indexOf(":"))return;r[e]=c(t[e],n)}}),r):Array.isArray(t)?t.map(function(e){return c(e,n)}):R.isTypedArray(t)?R.simpleMap(t,R.identity):R.isJSDate(t)?R.ms2DateTimeLocal(+t):t;var r,a}o={data:(o||[]).map(function(e){e=c(e);return t&&delete e.fit,e})};return t||(o.layout=c(s),r&&(r=s._size,o.layout.computed={margin:{b:r.b,l:r.l,r:r.r,t:r.t}})),l&&(o.frames=c(l)),a&&(o.config=c(e._context,!0)),"object"===n?o:JSON.stringify(o)},z.modifyFrames=function(e,t){for(var n,r=e._transitionData._frames,a=e._transitionData._frameHash,i=0;i<t.length;i++)switch((n=t[i]).type){case"replace":var o=n.value,s=(r[n.index]||{}).name,l=o.name;r[n.index]=a[l]=o,l!==s&&(delete a[s],a[l]=o);break;case"insert":a[(o=n.value).name]=o,r.splice(n.index,0,o);break;case"delete":delete a[(o=r[n.index]).name],r.splice(n.index,1)}return Promise.resolve()},z.computeFrame=function(e,t){var n,r,a,i,o=e._transitionData._frameHash;if(!t)throw new Error("computeFrame must be given a string frame name");var s=o[t.toString()];if(!s)return!1;for(var l=[s],c=[s.name];s.baseframe&&(s=o[s.baseframe.toString()])&&-1===c.indexOf(s.name);)l.push(s),c.push(s.name);for(var u={};s=l.pop();)if(s.layout&&(u.layout=z.extendLayout(u.layout,s.layout)),s.data){if(u.data||(u.data=[]),!(r=s.traces))for(r=[],n=0;n<s.data.length;n++)r[n]=n;for(u.traces||(u.traces=[]),n=0;n<s.data.length;n++)null!=(a=r[n])&&(-1===(i=u.traces.indexOf(a))&&(i=u.data.length,u.traces[i]=a),u.data[i]=z.extendTrace(u.data[i],s.data[n]))}return u},z.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},n=e._transitionData._frames,r=0;r<n.length;r++){var a=n[r];a&&a.name&&(t[a.name]=a)}},z.extendObjectWithContainers=function(e,t,n){var r,a,i,o,s,l,c,t=R.extendDeepNoArrays({},t||{}),u=R.expandObjectPaths(t),d={};if(n&&n.length)for(i=0;i<n.length;i++)void 0===(a=(r=R.nestedProperty(u,n[i])).get())?R.nestedProperty(d,n[i]).set(null):(r.set(null),R.nestedProperty(d,n[i]).set(a));if(e=R.extendDeepNoArrays(e||{},u),n&&n.length)for(i=0;i<n.length;i++)if(l=R.nestedProperty(d,n[i]).get()){for(c=(s=R.nestedProperty(e,n[i])).get(),Array.isArray(c)||s.set(c=[]),o=0;o<l.length;o++){var f=l[o];c[o]=null===f?null:z.extendObjectWithContainers(c[o],f)}s.set(c)}return e},z.dataArrayContainers=["transforms","dimensions"],z.layoutArrayContainers=I.layoutArrayContainers,z.extendTrace=function(e,t){return z.extendObjectWithContainers(e,t,z.dataArrayContainers)},z.extendLayout=function(e,t){return z.extendObjectWithContainers(e,t,z.layoutArrayContainers)},z.transition=function(x,_,w,T,e,s){var e={redraw:e.redraw},k={},A=[];return e.prepareFn=function(){for(var e=Array.isArray(_)?_.length:0,t=T.slice(0,e),n=0;n<t.length;n++){var r=t[n],a=x._fullData[r]._module;a&&(a.animatable&&(a=a.basePlotModule.name,k[a]||(k[a]=[]),k[a].push(r)),x.data[t[n]]=z.extendTrace(x.data[t[n]],_[n]))}var i,o=R.expandObjectPaths(R.extendDeepNoArrays({},w)),s=/^[xy]axis[0-9]*$/;for(i in o)s.test(i)&&delete o[i].range;z.extendLayout(x.layout,o),delete x.calcdata,z.supplyDefaults(x),z.doCalcdata(x);var l=R.expandObjectPaths(w);if(l){var c,u=x._fullLayout._plots;for(c in u){var d=u[c],f=d.xaxis,p=d.yaxis,h=f.range.slice(),m=p.range.slice(),g=null,y=null,v=null,b=null;Array.isArray(l[f._name+".range"])?g=l[f._name+".range"].slice():Array.isArray((l[f._name]||{}).range)&&(g=l[f._name].range.slice()),Array.isArray(l[p._name+".range"])?y=l[p._name+".range"].slice():Array.isArray((l[p._name]||{}).range)&&(y=l[p._name].range.slice()),h&&g&&(f.r2l(h[0])!==f.r2l(g[0])||f.r2l(h[1])!==f.r2l(g[1]))&&(v={xr0:h,xr1:g}),m&&y&&(p.r2l(m[0])!==p.r2l(y[0])||p.r2l(m[1])!==p.r2l(y[1]))&&(b={yr0:m,yr1:y}),(v||b)&&A.push(R.extendFlat({plotinfo:d},v,b))}}return Promise.resolve()},e.runFn=function(e){var t,n,r,a=x._fullLayout._basePlotModules,i=A.length;if(w)for(n=0;n<a.length;n++)a[n].transitionAxes&&a[n].transitionAxes(x,A,s,e);for(r in i?((t=R.extendFlat({},s)).duration=0,delete k.cartesian):t=s,k){var o=k[r];x._fullData[o[0]]._module.basePlotModule.plot(x,o,t,e)}},r(x,s,e)},z.transitionFromReact=function(u,d,f,p){var h=u._fullLayout,m=h.transition,g={},y=[];return g.prepareFn=function(){var e,t=h._plots;for(e in g.redraw=!1,"some"===d.anim&&(g.redraw=!0),"some"===f.anim&&(g.redraw=!0),t){var n=t[e],r=n.xaxis,a=n.yaxis,i=p[r._name].range.slice(),o=p[a._name].range.slice(),s=r.range.slice(),l=a.range.slice(),c=(r.setScale(),a.setScale(),null),u=null;r.r2l(i[0])===r.r2l(s[0])&&r.r2l(i[1])===r.r2l(s[1])||(c={xr0:i,xr1:s}),a.r2l(o[0])===a.r2l(l[0])&&a.r2l(o[1])===a.r2l(l[1])||(u={yr0:o,yr1:l}),(c||u)&&y.push(R.extendFlat({plotinfo:n},c,u))}return Promise.resolve()},g.runFn=function(t){for(var n,r,a,e=u._fullData,i=u._fullLayout._basePlotModules,o=[],s=0;s<e.length;s++)o.push(s);function l(){if(u._fullLayout)for(var e=0;e<i.length;e++)i[e].transitionAxes&&i[e].transitionAxes(u,y,n,t)}function c(){if(u._fullLayout)for(var e=0;e<i.length;e++)i[e].plot(u,a,r,t)}y.length&&d.anim?"traces first"===m.ordering?(n=R.extendFlat({},m,{duration:0}),a=o,r=m,setTimeout(l,m.duration),c()):(n=m,a=null,r=R.extendFlat({},m,{duration:0}),setTimeout(c,n.duration),l()):y.length?(n=m,l()):d.anim&&(a=o,r=m,c())},r(u,m,g)},z.doCalcdata=function(r,e){var a,i,o,t=C.list(r),s=r._fullData,n=r._fullLayout,l=new Array(s.length),c=(r.calcdata||[]).slice();for(r.calcdata=l,n._numBoxes=0,n._numViolins=0,n._violinScaleGroupStats={},r._hmpixcount=0,r._hmlumcount=0,n._piecolormap={},n._sunburstcolormap={},n._treemapcolormap={},n._iciclecolormap={},n._funnelareacolormap={},f=0;f<s.length;f++)Array.isArray(e)&&-1===e.indexOf(f)&&(l[f]=c[f]);for(f=0;f<s.length;f++)(a=s[f])._arrayAttrs=b.findArrayAttributes(a),a._extremes={};for(var u,d=n._subplots.polar||[],f=0;f<d.length;f++)t.push(n[d[f]].radialaxis,n[d[f]].angularaxis);for(u in n._colorAxes){var p=n[u];!1!==p.cauto&&(delete p.cmin,delete p.cmax)}var h=!1;function m(e,t){if(a=s[e],!!(i=a._module).isContainer===t){t=[];if(!0===a.visible&&0!==a._length){delete a._indexToPoints;var n=a.transforms||[];for(o=n.length-1;0<=o;o--)if(n[o].enabled){a._indexToPoints=n[o]._indexToPoints;break}i&&i.calc&&(t=i.calc(r,a))}(t=Array.isArray(t)&&t[0]?t:[{x:x,y:x}])[0].t||(t[0].t={}),t[0].trace=a,l[e]=t}}for(_(t,s,n),f=0;f<s.length;f++)m(f,!0);for(f=0;f<s.length;f++){g=void 0;g=void 0;y=void 0;var g=f;if(a=s[g],i=a._module,!0===a.visible&&a.transforms)for(i&&i.calc&&((g=i.calc(r,a))[0]&&g[0].t&&g[0].t._scene&&delete g[0].t._scene.dirty),o=0;o<a.transforms.length;o++){var y=a.transforms[o];(i=k[y.type])&&i.calcTransform&&(a._hasCalcTransform=!0,h=!0,i.calcTransform(r,a,y))}}for(h&&_(t,s,n),f=0;f<s.length;f++)m(f,!0);for(f=0;f<s.length;f++)m(f,!1);w(r);var v=function(e,o){var t,n,r,a,i,s=[];var l,c,u={min:function(e){return R.aggNums(Math.min,null,e)},max:function(e){return R.aggNums(Math.max,null,e)},sum:function(e){return R.aggNums(function(e,t){return e+t},null,e)},total:function(e){return R.aggNums(function(e,t){return e+t},null,e)},mean:function(e){return R.mean(e)},median:function(e){return R.median(e)}};for(t=0;t<e.length;t++){var d=e[t];if("category"===d.type){var f=d.categoryorder.match(U);if(f){var p=f[1],f=f[2],h=d._id.charAt(0),m="x"===h,g=[];for(n=0;n<d._categories.length;n++)g.push([d._categories[n],[]]);for(n=0;n<d._traceIndices.length;n++){var y=d._traceIndices[n],v=o._fullData[y];if(!0===v.visible){var b=v.type,x=(I.traceIs(v,"histogram")&&(delete v._xautoBinFinished,delete v._yautoBinFinished),"splom"===b),_="scattergl"===b,w=o.calcdata[y];for(r=0;r<w.length;r++){var T=w[r];if(x){var k,A,M=v._axesDim[d._id],E=(m||(k=v._diag[M][0])&&(d=o._fullLayout[C.id2name(k)]),T.trace.dimensions[M].values);for(a=0;a<E.length;a++)for(l=d._categoriesMap[E[a]],i=0;i<T.trace.dimensions.length;i++)i!==M&&(A=T.trace.dimensions[i],g[l][1].push(A.values[a]))}else if(_){for(a=0;a<T.t.x.length;a++)c=m?(l=T.t.x[a],T.t.y[a]):(l=T.t.y[a],T.t.x[a]),g[l][1].push(c);T.t&&T.t._scene&&delete T.t._scene.dirty}else if(T.hasOwnProperty("z")){c=T.z;var S=function(e,t,n){var r,a,i=t._id.charAt(0);return"histogram2dcontour"===e?(e=t._counterAxes[0],t=C.getFromId(o,e),r="x"===i||"x"===e&&"category"===t.type,a="y"===i||"y"===e&&"category"===t.type,function(e,t){return 0===e||0===t||r&&e===n[t].length-1||a&&t===n.length-1?-1:("y"===i?t:e)-1}):function(e,t){return"y"===i?t:e}}(v.type,d,c);for(a=0;a<c.length;a++)for(i=0;i<c[a].length;i++)(l=S(i,a))+1&&g[l][1].push(c[a][i])}else for(void 0===(l=T.p)&&(l=T[h]),void 0===(c=void 0===(c=T.s)?T.v:c)&&(c=m?T.y:T.x),Array.isArray(c)||(c=void 0===c?[]:[c]),a=0;a<c.length;a++)g[l][1].push(c[a])}}}d._categoriesValue=g;var L=[];for(n=0;n<g.length;n++)L.push([g[n][0],u[p](g[n][1])]);L.sort(function(e,t){return e[1]-t[1]}),d._categoriesAggregatedValue=L,d._initialCategories=L.map(function(e){return e[0]}),"descending"===f&&d._initialCategories.reverse(),s=s.concat(d.sortByInitialCategories())}}}return s}(t,r);if(v.length){for(n._numBoxes=0,f=n._numViolins=0;f<v.length;f++)m(v[f],!0);for(f=0;f<v.length;f++)m(v[f],!1);w(r)}I.getComponentMethod("fx","calc")(r),I.getComponentMethod("errorbars","calc")(r)};var U=/(total|sum|min|max|mean|median) (ascending|descending)/;function _(e,t,n){var r={};function a(e){e.clearCalc(),"multicategory"===e.type&&e.setupMultiCategory(t),r[e._id]=1}R.simpleMap(e,a);for(var i=n._axisMatchGroups||[],o=0;o<i.length;o++)for(var s in i[o])r[s]||a(n[C.id2name(s)])}function w(e){var t,n,r=e._fullLayout,a=r._visibleModules,i={};for(f=0;f<a.length;f++){var o=a[f],s=o.crossTraceCalc;s&&(i[o=o.basePlotModule.name]?R.pushUnique(i[o],s):i[o]=[s])}for(n in i){var l=i[n],c=r._subplots[n];if(Array.isArray(c))for(t=0;t<c.length;t++)for(var u=c[t],d=("cartesian"===n?r._plots:r)[u],f=0;f<l.length;f++)l[f](e,d,u);else for(f=0;f<l.length;f++)l[f](e)}}z.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()},z.redrag=function(e){e._fullLayout._redrag&&e._fullLayout._redrag()},z.generalUpdatePerTraceModule=function(e,t,n,r){for(var a,i,o,s=t.traceHash,l={},c=0;c<n.length;c++){var u=n[c],d=u[0].trace;d.visible&&(l[d.type]=l[d.type]||[],l[d.type].push(u))}for(a in s)l[a]||((i=s[a][0])[0].trace.visible=!1,l[a]=[i]);for(o in l){var f=l[o];f[0][0].trace._module.plot(e,t,R.filterVisible(f),r)}t.traceHash=l},z.plotBasePlot=function(e,t,n,r,a){var e=I.getModule(e),i=o(t.calcdata,e)[0];e.plot(t,i,r,a)},z.cleanBasePlot=function(e,t,n,r,a){var i=a._has&&a._has(e),n=n._has&&n._has(e);i&&!n&&a["_"+e+"layer"].selectAll("g.trace").remove()}},{"../components/color":157,"../constants/numerical":267,"../lib":287,"../plot_api/plot_schema":322,"../plot_api/plot_template":323,"../plots/get_data":367,"../registry":378,"./animation_attributes":328,"./attributes":330,"./cartesian/axis_ids":338,"./cartesian/handle_outline":345,"./command":363,"./font_attributes":365,"./frame_attributes":366,"./layout_attributes":369,"@plotly/d3":20,"d3-format":29,"d3-time-format":30,"fast-isnumeric":33}],372:[function(e,t,n){"use strict";var y=e("../lib"),v=e("../plot_api/plot_template"),b=e("./domain").defaults;t.exports=function(e,t,n,r){var a=r.type,i=r.attributes,o=r.handleDefaults,s=r.partition||"x",l=t._subplots[a],c=l.length,u=c&&l[0].replace(/\d+$/,"");function d(e,t){return y.coerce(h,m,i,e,t)}for(var f=0;f<c;f++){var p=l[f],h=e[p]||(e[p]={}),m=v.newContainer(t,p,u),g=(r.noUirevision||d("uirevision",t.uirevision),{});g[s]=[f/c,(f+1)/c],b(m,t,d,g),r.id=p,o(h,m,d,r)}}},{"../lib":287,"../plot_api/plot_template":323,"./domain":364}],373:[function(e,t,n){"use strict";e=e("../constants/docs");e.FORMAT_LINK,e.DATE_FORMAT_LINK;function r(e){var t=e.description?" "+e.description:"",n=e.keys||[];if(0<n.length){for(var r=[],a=0;a<n.length;a++)r[a]="`"+n[a]+"`";t+="Finally, the template string has access to ",t=1===n.length?"variable "+r[0]:"variables "+r.slice(0,-1).join(", ")+" and "+r.slice(-1)+"."}return t}n.hovertemplateAttrs=function(e,t){e=e||{};r(t=t||{});t={valType:"string",dflt:"",editType:e.editType||"none"};return!1!==e.arrayOk&&(t.arrayOk=!0),t},n.texttemplateAttrs=function(e,t){e=e||{};r(t=t||{});t={valType:"string",dflt:"",editType:e.editType||"calc"};return!1!==e.arrayOk&&(t.arrayOk=!0),t}},{"../constants/docs":264}],374:[function(e,t,n){"use strict";var l=e("./ternary"),c=e("../../plots/get_data").getSubplotCalcData,r=e("../../lib").counterRegex,u="ternary";n.name=u,n.attr="subplot";n.idRoot=u,n.idRegex=n.attrRegex=r(u),(n.attributes={}).subplot={valType:"subplotid",dflt:"ternary",editType:"calc"},n.layoutAttributes=e("./layout_attributes"),n.supplyLayoutDefaults=e("./layout_defaults"),n.plot=function(e){for(var t=e._fullLayout,n=e.calcdata,r=t._subplots[u],a=0;a<r.length;a++){var i=r[a],o=c(n,u,i),s=t[i]._subplot;s||(s=new l({id:i,graphDiv:e,container:t._ternarylayer.node()},t),t[i]._subplot=s),s.plot(o,t,e._promises)}},n.clean=function(e,t,n,r){for(var a=r._subplots[u]||[],i=0;i<a.length;i++){var o=a[i],s=r[o]._subplot;!t[o]&&s&&(s.plotContainer.remove(),s.clipDef.remove(),s.clipDefRelative.remove(),s.layers["a-title"].remove(),s.layers["b-title"].remove(),s.layers["c-title"].remove())}}},{"../../lib":287,"../../plots/get_data":367,"./layout_attributes":375,"./layout_defaults":376,"./ternary":377}],375:[function(e,t,n){"use strict";var r=e("../../components/color/attributes"),a=e("../domain").attributes,i=e("../cartesian/layout_attributes"),o=e("../../plot_api/edit_types").overrideAll,e=e("../../lib/extend").extendFlat,e={title:{text:i.title.text,font:i.title.font},color:i.color,tickmode:i.tickmode,nticks:e({},i.nticks,{dflt:6,min:1}),tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:i.ticks,ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,ticklabelstep:i.ticklabelstep,showticklabels:i.showticklabels,showtickprefix:i.showtickprefix,tickprefix:i.tickprefix,showticksuffix:i.showticksuffix,ticksuffix:i.ticksuffix,showexponent:i.showexponent,exponentformat:i.exponentformat,minexponent:i.minexponent,separatethousands:i.separatethousands,tickfont:i.tickfont,tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,hoverformat:i.hoverformat,showline:e({},i.showline,{dflt:!0}),linecolor:i.linecolor,linewidth:i.linewidth,showgrid:e({},i.showgrid,{dflt:!0}),gridcolor:i.gridcolor,gridwidth:i.gridwidth,layer:i.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:i._deprecated.title,titlefont:i._deprecated.titlefont}},i=t.exports=o({domain:a({name:"ternary"}),bgcolor:{valType:"color",dflt:r.background},sum:{valType:"number",dflt:1,min:0},aaxis:e,baxis:e,caxis:e},"plot","from-root");i.uirevision={valType:"any",editType:"none"},i.aaxis.uirevision=i.baxis.uirevision=i.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":156,"../../lib/extend":281,"../../plot_api/edit_types":316,"../cartesian/layout_attributes":349,"../domain":364}],376:[function(e,t,n){"use strict";var d=e("../../components/color"),f=e("../../plot_api/plot_template"),p=e("../../lib"),r=e("../subplot_defaults"),h=e("../cartesian/tick_label_defaults"),m=e("../cartesian/prefix_suffix_defaults"),g=e("../cartesian/tick_mark_defaults"),y=e("../cartesian/tick_value_defaults"),v=e("../cartesian/line_grid_defaults"),b=e("./layout_attributes"),x=["aaxis","baxis","caxis"];function a(e,t,n,r){var a,i,o,s=n("bgcolor"),n=n("sum");r.bgColor=d.combine(s,r.paper_bgcolor);for(var l=0;l<x.length;l++)i=e[a=x[l]]||{},(o=f.newContainer(t,a))._name=a,!function(n,r,e,t){var a=b[r._name];function i(e,t){return p.coerce(n,r,a,e,t)}i("uirevision",t.uirevision),r.type="linear";var t=i("color"),o=t!==a.color.dflt?t:e.font.color,s=r._name.charAt(0).toUpperCase(),l="Component "+s,c=i("title.text",l);r._hovertitle=c===l?c:s,p.coerceFont(i,"title.font",{family:e.font.family,size:p.bigFont(e.font.size),color:o}),i("min"),y(n,r,i,"linear"),m(n,r,i,"linear"),h(n,r,i,"linear"),g(n,r,i,{outerTicks:!0}),i("showticklabels")&&(p.coerceFont(i,"tickfont",{family:e.font.family,size:e.font.size,color:o}),i("tickangle"),i("tickformat"));v(n,r,i,{dfltColor:t,bgColor:e.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:a}),i("hoverformat"),i("layer")}(i,o,r,t);var s=t.aaxis,c=t.baxis,u=t.caxis;s.min+c.min+u.min>=n&&(s.min=0,c.min=0,u.min=0,e.aaxis&&delete e.aaxis.min,e.baxis&&delete e.baxis.min,e.caxis&&delete e.caxis.min)}t.exports=function(e,t,n){r(e,t,n,{type:"ternary",attributes:b,handleDefaults:a,font:t.font,paper_bgcolor:t.paper_bgcolor})}},{"../../components/color":157,"../../lib":287,"../../plot_api/plot_template":323,"../cartesian/line_grid_defaults":351,"../cartesian/prefix_suffix_defaults":353,"../cartesian/tick_label_defaults":358,"../cartesian/tick_mark_defaults":359,"../cartesian/tick_value_defaults":360,"../subplot_defaults":372,"./layout_attributes":375}],377:[function(e,t,n){"use strict";var a=e("@plotly/d3"),D=e("tinycolor2"),r=e("../../registry"),I=e("../../lib"),R=I.strTranslate,P=I._,N=e("../../components/color"),F=e("../../components/drawing"),m=e("../cartesian/set_convert"),g=e("../../lib/extend").extendFlat,i=e("../plots"),f=e("../cartesian/axes"),o=e("../../components/dragelement"),z=e("../../components/fx"),s=e("../../components/dragelement/helpers"),j=s.freeMode,q=s.rectMode,c=e("../../components/titles"),H=e("../cartesian/select").prepSelect,B=e("../cartesian/select").selectOnClick,l=e("../cartesian/select").clearSelect,u=e("../cartesian/select").clearSelectionsCache,U=e("../cartesian/constants");function d(e,t){this.id=e.id,this.graphDiv=e.graphDiv,this.init(t),this.makeFramework(t),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}var s=(t.exports=d).prototype,V=(s.init=function(e){this.container=e._ternarylayer,this.defs=e._defs,this.layoutId=e._uid,this.traceHash={},this.layers={}},s.plot=function(e,t){var n=t[this.id],t=t._size;this._hasClipOnAxisFalse=!1;for(var r=0;r<e.length;r++)if(!1===e[r][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(n),this.adjustLayout(n,t),i.generalUpdatePerTraceModule(this.graphDiv,this,e,n),this.layers.plotbg.select("path").call(N.fill,n.bgcolor)},s.makeFramework=function(e){var t=this,n=t.graphDiv,r=e[t.id],a=t.clipId="clip"+t.layoutId+t.id,i=t.clipIdRelative="clip-relative"+t.layoutId+t.id;t.clipDef=I.ensureSingleById(e._clips,"clipPath",a,function(e){e.append("path").attr("d","M0,0Z")}),t.clipDefRelative=I.ensureSingleById(e._clips,"clipPath",i,function(e){e.append("path").attr("d","M0,0Z")}),t.plotContainer=I.ensureSingle(t.container,"g",t.id),t.updateLayers(r),F.setClipUrl(t.layers.backplot,a,n),F.setClipUrl(t.layers.grids,a,n)},s.updateLayers=function(e){var n=this.layers,t=["draglayer","plotbg","backplot","grids"],e=("below traces"===e.aaxis.layer&&t.push("aaxis","aline"),"below traces"===e.baxis.layer&&t.push("baxis","bline"),"below traces"===e.caxis.layer&&t.push("caxis","cline"),t.push("frontplot"),"above traces"===e.aaxis.layer&&t.push("aaxis","aline"),"above traces"===e.baxis.layer&&t.push("baxis","bline"),"above traces"===e.caxis.layer&&t.push("caxis","cline"),this.plotContainer.selectAll("g.toplevel").data(t,String)),r=["agrid","bgrid","cgrid"];e.enter().append("g").attr("class",function(e){return"toplevel "+e}).each(function(e){var t=a.select(this);n[e]=t,"frontplot"===e?t.append("g").classed("scatterlayer",!0):"backplot"===e?t.append("g").classed("maplayer",!0):"plotbg"===e?t.append("path").attr("d","M0,0Z"):"aline"===e||"bline"===e||"cline"===e?t.append("path"):"grids"===e&&r.forEach(function(e){n[e]=t.append("g").classed("grid "+e,!0)})}),e.order()},Math.sqrt(4/3));s.adjustLayout=function(e,t){var n,r,a=this,i=e.domain,o=(i.x[0]+i.x[1])/2,s=(i.y[0]+i.y[1])/2,l=i.x[1]-i.x[0],i=i.y[1]-i.y[0],c=l*t.w,u=i*t.h,d=e.sum,f=e.aaxis.min,p=e.baxis.min,h=e.caxis.min,t=(V*u<c?n=(r=u)*V:r=(n=c)/V,l=l*n/c,c=i*r/u,i=t.l+t.w*o-n/2,u=t.t+t.h*(1-s)-r/2,a.x0=i,a.y0=u,a.w=n,a.h=r,a.sum=d,a.xaxis={type:"linear",range:[f+2*h-d,d-f-2*p],domain:[o-l/2,o+l/2],_id:"x"},m(a.xaxis,a.graphDiv._fullLayout),a.xaxis.setScale(),a.xaxis.isPtWithinRange=function(e){return e.a>=a.aaxis.range[0]&&e.a<=a.aaxis.range[1]&&e.b>=a.baxis.range[1]&&e.b<=a.baxis.range[0]&&e.c>=a.caxis.range[1]&&e.c<=a.caxis.range[0]},a.yaxis={type:"linear",range:[f,d-p-h],domain:[s-c/2,s+c/2],_id:"y"},m(a.yaxis,a.graphDiv._fullLayout),a.yaxis.setScale(),a.yaxis.isPtWithinRange=function(){return!0},a.yaxis.domain[0]),o=a.aaxis=g({},e.aaxis,{range:[f,d-p-h],side:"left",tickangle:(+e.aaxis.tickangle||0)-30,domain:[t,t+c*V],anchor:"free",position:0,_id:"y",_length:n}),l=(m(o,a.graphDiv._fullLayout),o.setScale(),a.baxis=g({},e.baxis,{range:[d-f-h,p],side:"bottom",domain:a.xaxis.domain,anchor:"free",position:0,_id:"x",_length:n})),s=(m(l,a.graphDiv._fullLayout),l.setScale(),a.caxis=g({},e.caxis,{range:[d-f-p,h],side:"right",tickangle:(+e.caxis.tickangle||0)+30,domain:[t,t+c*V],anchor:"free",position:0,_id:"y",_length:n})),d=(m(s,a.graphDiv._fullLayout),s.setScale(),"M"+i+","+(u+r)+"h"+n+"l-"+n/2+",-"+r+"Z"),f=(a.clipDef.select("path").attr("d",d),a.layers.plotbg.select("path").attr("d",d),"M0,"+r+"h"+n+"l-"+n/2+",-"+r+"Z"),p=(a.clipDefRelative.select("path").attr("d",f),R(i,u)),h=(a.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",p),a.clipDefRelative.select("path").attr("transform",null),R(i-l._offset,u+r)),e=(a.layers.baxis.attr("transform",h),a.layers.bgrid.attr("transform",h),R(i+n/2,u)+"rotate(30)"+R(0,-o._offset)),t=(a.layers.aaxis.attr("transform",e),a.layers.agrid.attr("transform",e),R(i+n/2,u)+"rotate(-30)"+R(0,-s._offset));a.layers.caxis.attr("transform",t),a.layers.cgrid.attr("transform",t),a.drawAxes(!0),a.layers.aline.select("path").attr("d",o.showline?"M"+i+","+(u+r)+"l"+n/2+",-"+r:"M0,0").call(N.stroke,o.linecolor||"#000").style("stroke-width",(o.linewidth||0)+"px"),a.layers.bline.select("path").attr("d",l.showline?"M"+i+","+(u+r)+"h"+n:"M0,0").call(N.stroke,l.linecolor||"#000").style("stroke-width",(l.linewidth||0)+"px"),a.layers.cline.select("path").attr("d",s.showline?"M"+(i+n/2)+","+u+"l"+n/2+","+r:"M0,0").call(N.stroke,s.linecolor||"#000").style("stroke-width",(s.linewidth||0)+"px"),a.graphDiv._context.staticPlot||a.initInteractions(),F.setClipUrl(a.layers.frontplot,a._hasClipOnAxisFalse?null:a.clipId,a.graphDiv)},s.drawAxes=function(e){var t,n=this,r=n.graphDiv,a=n.id.substr(7)+"title",i=n.layers,o=n.aaxis,s=n.baxis,l=n.caxis;n.drawAx(o),n.drawAx(s),n.drawAx(l),e&&(e=Math.max(o.showticklabels?o.tickfont.size/2:0,(l.showticklabels?.75*l.tickfont.size:0)+("outside"===l.ticks?.87*l.ticklen:0)),t=(s.showticklabels?s.tickfont.size:0)+("outside"===s.ticks?s.ticklen:0)+3,i["a-title"]=c.draw(r,"a"+a,{propContainer:o,propName:n.id+".aaxis.title",placeholder:P(r,"Click to enter Component A title"),attributes:{x:n.x0+n.w/2,y:n.y0-o.title.font.size/3-e,"text-anchor":"middle"}}),i["b-title"]=c.draw(r,"b"+a,{propContainer:s,propName:n.id+".baxis.title",placeholder:P(r,"Click to enter Component B title"),attributes:{x:n.x0-t,y:n.y0+n.h+.83*s.title.font.size+t,"text-anchor":"middle"}}),i["c-title"]=c.draw(r,"c"+a,{propContainer:l,propName:n.id+".caxis.title",placeholder:P(r,"Click to enter Component C title"),attributes:{x:n.x0+n.w+t,y:n.y0+n.h+.83*l.title.font.size+t,"text-anchor":"middle"}}))},s.drawAx=function(e){var t=this.graphDiv,n=e._name,r=n.charAt(0),a=e._id,n=this.layers[n],i=r+"tickLayout",o=(o=e).ticks+String(o.ticklen)+String(o.showticklabels),a=(this[i]!==o&&(n.selectAll("."+a+"tick").remove(),this[i]=o),e.setScale(),f.calcTicks(e)),i=f.clipEnds(e,a),o=f.makeTransTickFn(e),s=f.getTickSigns(e)[2],l=I.deg2rad(30),c=s*(e.linewidth||1)/2,s=s*e.ticklen,u=this.w,d=this.h,c="b"===r?"M0,"+c+"l"+Math.sin(l)*s+","+Math.cos(l)*s:"M"+c+",0l"+Math.cos(l)*s+","+-Math.sin(l)*s,l={a:"M0,0l"+d+",-"+u/2,b:"M0,0l-"+u/2+",-"+d,c:"M0,0l-"+d+","+u/2}[r];f.drawTicks(t,e,{vals:"inside"===e.ticks?i:a,layer:n,path:c,transFn:o,crisp:!1}),f.drawGrid(t,e,{vals:i,layer:this.layers[r+"grid"],path:l,transFn:o,crisp:!1}),f.drawLabels(t,e,{vals:a,layer:n,transFn:o,labelFns:f.makeLabelFns(e,0,30)})};var e=U.MINZOOM/2+.87,Y="m-0.87,.5h"+e+"v3h-"+(5.2+e)+"l"+(e/2+2.6)+",-"+(.87*e+4.5)+"l2.6,1.5l-"+e/2+","+.87*e+"Z",$="m0.87,.5h-"+e+"v3h"+(5.2+e)+"l-"+(e/2+2.6)+",-"+(.87*e+4.5)+"l-2.6,1.5l"+e/2+","+.87*e+"Z",G="m0,1l"+e/2+","+.87*e+"l2.6,-1.5l-"+(e/2+2.6)+",-"+(.87*e+4.5)+"l-"+(e/2+2.6)+","+(.87*e+4.5)+"l2.6,1.5l"+e/2+",-"+.87*e+"Z",W=!0;function Z(e){a.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}s.clearSelect=function(){u(this.dragOptions),l(this.dragOptions.gd)},s.initInteractions=function(){var c,u,d,f,p,h,m,g,y,v,b,x,_=this,s=_.layers.plotbg.select("path").node(),w=_.graphDiv,l=w._fullLayout._zoomlayer;function T(e){var t={};return t[_.id+".aaxis.min"]=e.a,t[_.id+".baxis.min"]=e.b,t[_.id+".caxis.min"]=e.c,t}function k(e,t){var n=w._fullLayout.clickmode;Z(w),2===e&&(w.emit("plotly_doubleclick",null),r.call("_guiRelayout",w,T({a:0,b:0,c:0}))),-1<n.indexOf("select")&&1===e&&B(t,w,[_.xaxis],[_.yaxis],_.id,_.dragOptions),-1<n.indexOf("event")&&z.click(w,t,_.id)}function A(e,t){return 1-t/_.h}function M(e,t){return 1-(e+(_.h-t)/Math.sqrt(3))/_.w}function E(e,t){return(e-(_.h-t)/Math.sqrt(3))/_.w}function S(e,t){var e=d+e*c,t=f+t*u,n=Math.max(0,Math.min(1,A(0,f),A(0,t))),r=Math.max(0,Math.min(1,M(d,f),M(e,t))),e=Math.max(0,Math.min(1,E(d,f),E(e,t))),t=(n/2+e)*_.w,a=(1-n/2-r)*_.w,i=(t+a)/2,o=a-t,s=(1-n)*_.h,l=s-o/V;o<U.MINZOOM?(m=p,b.attr("d",y),x.attr("d","M0,0Z")):(m={a:p.a+n*h,b:p.b+r*h,c:p.c+e*h},b.attr("d",y+"M"+t+","+s+"H"+a+"L"+i+","+l+"L"+t+","+s+"Z"),x.attr("d","M"+d+","+f+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+t+","+s+Y+"M"+a+","+s+$+"M"+i+","+l+G)),v||(b.transition().style("fill",.2<g?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),x.transition().style("opacity",1).duration(200),v=!0),w.emit("plotly_relayouting",T(m))}function L(){Z(w),m!==p&&(r.call("_guiRelayout",w,T(m)),W&&w.data&&w._context.showTips&&(I.notifier(P(w,"Double-click to zoom back out"),"long"),W=!1))}function C(e,t){var n=e/_.xaxis._m,r=t/_.yaxis._m,n=[(m={a:p.a-r,b:p.b+(n+r)/2,c:p.c-(n-r)/2}).a,m.b,m.c].sort(I.sorterAsc),r=n.indexOf(m.a),a=n.indexOf(m.b),i=n.indexOf(m.c),r=(n[0]<0&&(n[1]+n[0]/2<0?(n[2]+=n[0]+n[1],n[0]=n[1]=0):(n[2]+=n[0]/2,n[1]+=n[0]/2,n[0]=0),m={a:n[r],b:n[a],c:n[i]},t=(p.a-m.a)*_.yaxis._m,e=(p.c-m.c-p.b+m.b)*_.xaxis._m),R(_.x0+e,_.y0+t)),a=(_.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",r),R(-e,-t));_.clipDefRelative.select("path").attr("transform",a),_.aaxis.range=[m.a,_.sum-m.b-m.c],_.baxis.range=[_.sum-m.a-m.c,m.b],_.caxis.range=[_.sum-m.a-m.b,m.c],_.drawAxes(!1),_._hasClipOnAxisFalse&&_.plotContainer.select(".scatterlayer").selectAll(".trace").call(F.hideOutsideRangePoints,_),w.emit("plotly_relayouting",T(m))}function O(){r.call("_guiRelayout",w,T(m))}this.dragOptions={element:s,gd:w,plotinfo:{id:_.id,domain:w._fullLayout[_.id].domain,xaxis:_.xaxis,yaxis:_.yaxis},subplot:_.id,prepFn:function(e,t,n){_.dragOptions.xaxes=[_.xaxis],_.dragOptions.yaxes=[_.yaxis],c=w._fullLayout._invScaleX,u=w._fullLayout._invScaleY;var r,a,i,o=_.dragOptions.dragmode=w._fullLayout.dragmode;j(o)?_.dragOptions.minDrag=1:_.dragOptions.minDrag=void 0,"zoom"===o?(_.dragOptions.moveFn=S,_.dragOptions.clickFn=k,_.dragOptions.doneFn=L,r=t,a=n,i=s.getBoundingClientRect(),d=r-i.left,f=a-i.top,w._fullLayout._calcInverseTransform(w),r=w._fullLayout._invTransform,a=I.apply3DTransform(r)(d,f),d=a[0],f=a[1],p={a:_.aaxis.range[0],b:_.baxis.range[1],c:_.caxis.range[1]},m=p,h=_.aaxis.range[1]-p.a,g=D(_.graphDiv._fullLayout[_.id].bgcolor).getLuminance(),y="M0,"+_.h+"L"+_.w/2+", 0L"+_.w+","+_.h+"Z",v=!1,b=l.append("path").attr("class","zoombox").attr("transform",R(_.x0,_.y0)).style({fill:.2<g?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",y),x=l.append("path").attr("class","zoombox-corners").attr("transform",R(_.x0,_.y0)).style({fill:N.background,stroke:N.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),_.clearSelect(w)):"pan"===o?(_.dragOptions.moveFn=C,_.dragOptions.clickFn=k,_.dragOptions.doneFn=O,p={a:_.aaxis.range[0],b:_.baxis.range[1],c:_.caxis.range[1]},m=p,_.clearSelect(w)):(q(o)||j(o))&&H(e,t,n,_.dragOptions,o)}},s.onmousemove=function(e){z.hover(w,e,_.id),w._fullLayout._lasthover=s,w._fullLayout._hoversubplot=_.id},s.onmouseout=function(e){w._dragging||o.unhover(w,e)},o.init(this.dragOptions)}},{"../../components/color":157,"../../components/dragelement":176,"../../components/dragelement/helpers":175,"../../components/drawing":179,"../../components/fx":197,"../../components/titles":255,"../../lib":287,"../../lib/extend":281,"../../registry":378,"../cartesian/axes":334,"../cartesian/constants":341,"../cartesian/select":355,"../cartesian/set_convert":356,"../plots":371,"@plotly/d3":20,tinycolor2:121}],378:[function(e,t,E){"use strict";var S=e("./lib/loggers"),n=e("./lib/noop"),L=e("./lib/push_unique"),C=e("./lib/is_plain_object"),O=e("./lib/dom").addStyleRule,r=e("./lib/extend"),a=e("./plots/attributes"),D=e("./plots/layout_attributes"),I=r.extendFlat,R=r.extendDeepAll;function P(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t)for(var n=0;n<t.length;n++)L(E.layoutArrayRegexes,t[n])}}function N(e,t){var e=E.componentsRegistry[e].schema;e&&e.traces&&((e=e.traces[t])&&R(E.modules[t]._module.attributes,e))}function F(e,t){var e=E.componentsRegistry[e].schema;e&&e.transforms&&((e=e.transforms[t])&&R(E.transformsRegistry[t].attributes,e))}function z(e,t){var n,e=E.componentsRegistry[e].schema;e&&e.subplots&&(n=(t=E.subplotsRegistry[t]).layoutAttributes,t="subplot"===t.attr?t.name:t.attr,Array.isArray(t)&&(t=t[0]),e=e.subplots[t],n&&e&&R(n,e))}function i(e){return e="object"==typeof e?e.type:e}E.modules={},E.allCategories={},E.allTypes=[],E.subplotsRegistry={},E.transformsRegistry={},E.componentsRegistry={},E.layoutArrayContainers=[],E.layoutArrayRegexes=[],E.traceLayoutAttributes={},E.localeRegistry={},E.apiMethodRegistry={},E.collectableSubplotTypes=null,E.register=function(e){if(E.collectableSubplotTypes=null,!e)throw new Error("No argument passed to Plotly.register.");Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];if(!n)throw new Error("Invalid module was attempted to be registered!");switch(n.moduleType){case"trace":u=d=r=o=s=c=l=o=i=a=r=void 0;var r=n,a=r.name,i=r.categories,o=r.meta;if(E.modules[a])S.log("Type "+a+" already registered");else{E.subplotsRegistry[r.basePlotModule.name]||!function(e){var t=e.name;if(E.subplotsRegistry[t])S.log("Plot type "+t+" already registered.");else for(var n in P(e),E.subplotsRegistry[t]=e,E.componentsRegistry)z(n,e.name)}(r.basePlotModule);for(var s,l={},c=0;c<i.length;c++)l[i[c]]=!0,E.allCategories[i[c]]=!0;for(s in E.modules[a]={_module:r,categories:l},o&&Object.keys(o).length&&(E.modules[a].meta=o),E.allTypes.push(a),E.componentsRegistry)N(s,a);r.layoutAttributes&&I(E.traceLayoutAttributes,r.layoutAttributes);o=r.basePlotModule,r=o.name;if("mapbox"===r){var u,d=o.constants.styleRules;for(u in d)O(".js-plotly-plot .plotly .mapboxgl-"+u,d[u])}"geo"!==r&&"mapbox"!==r||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}break;case"transform":p=h=r=o=f=void 0;var f=n;if("string"!=typeof f.name)throw new Error("Transform module *name* must be a string.");var p,o="Transform module "+f.name,r="function"==typeof f.transform,h="function"==typeof f.calcTransform;if(!r&&!h)throw new Error(o+" is missing a *transform* or *calcTransform* method.");for(p in r&&h&&S.log([o+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),C(f.attributes)||S.log(o+" registered without an *attributes* object."),"function"!=typeof f.supplyDefaults&&S.log(o+" registered without a *supplyDefaults* method."),E.transformsRegistry[f.name]=f,E.componentsRegistry)F(p,f.name);break;case"component":y=g=m=v=h=void 0;h=n;if("string"!=typeof h.name)throw new Error("Component module *name* must be a string.");var m,g,y,v=h.name;for(m in(E.componentsRegistry[v]=h).layoutAttributes&&(h.layoutAttributes._isLinkedToArray&&L(E.layoutArrayContainers,v),P(h)),E.modules)N(v,m);for(g in E.subplotsRegistry)z(v,g);for(y in E.transformsRegistry)F(v,y);h.schema&&h.schema.layout&&R(D,h.schema.layout);break;case"locale":b=M=A=k=T=w=_=x=b=w=void 0;var b=(w=n).name,x=b.split("-")[0],_=w.dictionary,w=w.format,T=_&&Object.keys(_).length,k=w&&Object.keys(w).length,A=E.localeRegistry,M=A[b];M||(A[b]=M={}),x!==b&&((b=A[x])||(A[x]=b={}),T&&b.dictionary===M.dictionary&&(b.dictionary=_),k&&b.format===M.format&&(b.format=w)),T&&(M.dictionary=_),k&&(M.format=w);break;case"apiMethod":A=n.name;E.apiMethodRegistry[A]=n.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},E.getModule=function(e){e=E.modules[i(e)];return!!e&&e._module},E.traceIs=function(e,t){if("various"===(e=i(e)))return!1;var n=E.modules[e];return n||(e&&S.log("Unrecognized trace type "+e+"."),n=E.modules[a.type.dflt]),!!n.categories[t]},E.getTransformIndices=function(e,t){for(var n=[],r=e.transforms||[],a=0;a<r.length;a++)r[a].type===t&&n.push(a);return n},E.hasTransform=function(e,t){for(var n=e.transforms||[],r=0;r<n.length;r++)if(n[r].type===t)return!0;return!1},E.getComponentMethod=function(e,t){e=E.componentsRegistry[e];return e&&e[t]||n},E.call=function(){var e=arguments[0],t=[].slice.call(arguments,1);return E.apiMethodRegistry[e].apply(null,t)}},{"./lib/dom":279,"./lib/extend":281,"./lib/is_plain_object":288,"./lib/loggers":291,"./lib/noop":296,"./lib/push_unique":301,"./plots/attributes":330,"./plots/layout_attributes":369}],379:[function(e,t,n){"use strict";var p=e("../registry"),e=e("../lib"),h=e.extendFlat,m=e.extendDeep;function g(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}t.exports=function(e,t){var n,r=e.data,a=e.layout,i=m([],r),o=m({},a,g(t.tileClass)),r=e._context||{};if(t.width&&(o.width=t.width),t.height&&(o.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){o.annotations=[];for(var s=Object.keys(o),l=0;l<s.length;l++)n=s[l],-1<["xaxis","yaxis","zaxis"].indexOf(n.slice(0,5))&&(o[s[l]].title={text:""});for(l=0;l<i.length;l++){var c=i[l];c.showscale=!1,c.marker&&(c.marker.showscale=!1),p.traceIs(c,"pie-like")&&(c.textposition="none")}}if(Array.isArray(t.annotations))for(l=0;l<t.annotations.length;l++)o.annotations.push(t.annotations[l]);var u=Object.keys(o).filter(function(e){return e.match(/^scene\d*$/)});if(u.length){var d={};for("thumbnail"===t.tileClass&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),l=0;l<u.length;l++){var f=o[u[l]];f.xaxis||(f.xaxis={}),f.yaxis||(f.yaxis={}),f.zaxis||(f.zaxis={}),h(f.xaxis,d),h(f.yaxis,d),h(f.zaxis,d),f._scene=null}}a=document.createElement("div"),t.tileClass&&(a.className=t.tileClass),e={gd:a,td:a,layout:o,data:i,config:{staticPlot:void 0===t.staticPlot||t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:r.mapboxAccessToken}};return"transparent"!==t.setBackground&&(e.config.setBackground=t.setBackground||"opaque"),e.gd.defaultLayout=g(t.tileClass),e}},{"../lib":287,"../registry":378}],380:[function(e,t,n){"use strict";var s=e("../lib"),l=e("../plot_api/to_image"),c=e("./filesaver"),u=e("./helpers");t.exports=function(a,i){var o;return s.isPlainObject(a)||(o=s.getGraphDiv(a)),(i=i||{}).format=i.format||"png",i.width=i.width||null,i.height=i.height||null,i.imageDataOnly=!0,new Promise(function(t,n){o&&o._snapshotInProgress&&n(new Error("Snapshotting already in progress.")),s.isIE()&&"svg"!==i.format&&n(new Error(u.MSG_IE_BAD_FORMAT)),o&&(o._snapshotInProgress=!0);var e=l(a,i),r=i.filename||a.fn||"newplot";r+="."+i.format.replace("-","."),e.then(function(e){return o&&(o._snapshotInProgress=!1),c(e,r,i.format)}).then(function(e){t(e)}).catch(function(e){o&&(o._snapshotInProgress=!1),n(e)})})}},{"../lib":287,"../plot_api/to_image":326,"./filesaver":381,"./helpers":382}],381:[function(e,t,n){"use strict";var c=e("../lib"),u=e("./helpers");t.exports=function(a,i,o){var s=document.createElement("a"),l="download"in s;return new Promise(function(e,t){var n,r;return c.isIE()?(n=u.createBlob(a,"svg"),window.navigator.msSaveBlob(n,i),n=null,e(i)):l?(n=u.createBlob(a,o),r=u.createObjectURL(n),s.href=r,s.download=i,document.body.appendChild(s),s.click(),document.body.removeChild(s),u.revokeObjectURL(r),n=null,e(i)):c.isSafari()?(u.octetStream(("svg"===o?",":";base64,")+encodeURIComponent(a)),e(i)):void t(new Error("download error"))})}},{"../lib":287,"./helpers":382}],382:[function(e,t,n){"use strict";var r=e("../registry"),a=(n.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d")||e._has("mapbox"))?500:0},n.getRedrawFunc=function(e){return function(){r.getComponentMethod("colorbar","draw")(e)}},n.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)},n.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)},window.URL||window.webkitURL);n.createObjectURL=function(e){return a.createObjectURL(e)},n.revokeObjectURL=function(e){return a.revokeObjectURL(e)},n.createBlob=function(e,t){return"svg"===t?new window.Blob([e],{type:"image/svg+xml;charset=utf-8"}):"full-json"===t?new window.Blob([e],{type:"application/json;charset=utf-8"}):(e=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),a=0;a<t;a++)r[a]=e.charCodeAt(a);return n}(window.atob(e)),new window.Blob([e],{type:"image/"+t}))},n.octetStream=function(e){document.location.href="data:application/octet-stream"+e},n.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,n.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":378}],383:[function(e,t,n){"use strict";var r=e("./helpers"),r={getDelay:r.getDelay,getRedrawFunc:r.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};t.exports=r},{"./cloneplot":379,"./download":380,"./helpers":382,"./svgtoimg":384,"./toimage":385,"./tosvg":386}],384:[function(e,t,n){"use strict";var v=e("../lib"),r=e("events").EventEmitter,b=e("./helpers");t.exports=function(m){var g=m.emitter||new r,y=new Promise(function(n,r){var e=window.Image,t=m.svg,a=m.format||"png";if(v.isIE()&&"svg"!==a)return s=new Error(b.MSG_IE_BAD_FORMAT),r(s),m.promise?y:g.emit("error",s);var i,o=m.canvas,s=m.scale||1,l=m.width||300,c=m.height||150,u=s*l,d=s*c,f=o.getContext("2d"),p=new e,h="svg"===a||v.isSafari()?b.encodeSVG(t):(i=b.createBlob(t,"svg"),b.createObjectURL(i));o.width=u,o.height=d,p.onload=function(){var e;switch(i=null,b.revokeObjectURL(h),"svg"!==a&&f.drawImage(p,0,0,u,d),a){case"jpeg":e=o.toDataURL("image/jpeg");break;case"png":e=o.toDataURL("image/png");break;case"webp":e=o.toDataURL("image/webp");break;case"svg":e=h;break;default:var t="Image format is not jpeg, png, svg or webp.";if(r(new Error(t)),!m.promise)return g.emit("error",t)}n(e),m.promise||g.emit("success",e)},p.onerror=function(e){if(i=null,b.revokeObjectURL(h),r(e),!m.promise)return g.emit("error",e)},p.src=h});return m.promise?y:g}},{"../lib":287,"./helpers":382,events:27}],385:[function(e,t,n){"use strict";var i=e("events").EventEmitter,o=e("../registry"),s=e("../lib"),l=e("./helpers"),c=e("./cloneplot"),u=e("./tosvg"),d=e("./svgtoimg");t.exports=function(e,n){var r=new i,a=(e=c(e,{format:"png"})).gd,t=(a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a),l.getRedrawFunc(a));return o.call("_doPlot",a,e.data,e.layout,e.config).then(t).then(function(){var e=l.getDelay(a._fullLayout);setTimeout(function(){var e=u(a),t=document.createElement("canvas");t.id=s.randstr(),(r=d({format:n.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:t,emitter:r,svg:e})).clean=function(){a&&document.body.removeChild(a)}},e)}).catch(function(e){r.emit("error",e)}),r}},{"../lib":287,"../registry":378,"./cloneplot":379,"./helpers":382,"./svgtoimg":384,"./tosvg":386,events:27}],386:[function(e,t,n){"use strict";var g=e("@plotly/d3"),y=e("../lib"),v=e("../components/drawing"),b=e("../components/color"),x=e("../constants/xmlns_namespaces"),_=/"/g,w="TOBESTRIPPED",T=new RegExp('("'+w+")|("+w+'")',"g");t.exports=function(e,t,n){var r,a=e._fullLayout,i=a._paper,o=a._toppaper,s=a.width,l=a.height,c=(i.insert("rect",":first-child").call(v.setRect,0,0,s,l).call(b.fill,a.paper_bgcolor),a._basePlotModules||[]);for(f=0;f<c.length;f++){var u=c[f];u.toSVG&&u.toSVG(e)}if(o)for(var o=o.node().childNodes,d=Array.prototype.slice.call(o),f=0;f<d.length;f++){var p=d[f];p.childNodes.length&&i.node().appendChild(p)}a._draggers&&a._draggers.remove(),i.node().style.background="",i.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var e,t=g.select(this);"hidden"===this.style.visibility||"none"===this.style.display?t.remove():(t.style({visibility:null,display:null}),(e=this.style.fontFamily)&&-1!==e.indexOf('"')&&t.style("font-family",e.replace(_,w)))});var h=[];if(a._gradientUrlQueryParts)for(r in a._gradientUrlQueryParts)h.push(r);if(a._patternUrlQueryParts)for(r in a._patternUrlQueryParts)h.push(r);h.length&&i.selectAll(h.join(",")).each(function(){var e=g.select(this),t=this.style.fill,t=(t&&-1!==t.indexOf("url(")&&e.style("fill",t.replace(_,w)),this.style.stroke);t&&-1!==t.indexOf("url(")&&e.style("stroke",t.replace(_,w))}),"pdf"!==t&&"eps"!==t||i.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),i.node().setAttributeNS(x.xmlns,"xmlns",x.svg),i.node().setAttributeNS(x.xmlns,"xmlns:xlink",x.xlink),"svg"===t&&n&&(i.attr("width",n*s),i.attr("height",n*l),i.attr("viewBox","0 0 "+s+" "+l));var m,o=(new window.XMLSerializer).serializeToString(i.node());return a=o,m=g.select("body").append("div").style({display:"none"}).html(""),a=a.replace(/(&[^;]*;)/gi,function(e){return"&lt;"===e?"&#60;":"&rt;"===e?"&#62;":-1!==e.indexOf("<")||-1!==e.indexOf(">")?"":m.html(e).text()}),m.remove(),o=(o=(o=a).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(T,"'"),o=y.isIE()?(o=(o=o.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"'):o}},{"../components/color":157,"../components/drawing":179,"../constants/xmlns_namespaces":268,"../lib":287,"@plotly/d3":20}],387:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;r.mergeArray(t.text,e,"tx"),r.mergeArray(t.hovertext,e,"htx");var t=t.marker;t&&(r.mergeArray(t.opacity,e,"mo",!0),r.mergeArray(t.color,e,"mc"),(t=t.line)&&(r.mergeArray(t.color,e,"mlc"),r.mergeArrayCastPositive(t.width,e,"mlw")))}},{"../../lib":287}],388:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),a=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,i=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../plots/template_attributes").texttemplateAttrs,s=e("../../components/colorscale/attributes"),l=e("../../plots/font_attributes"),c=e("./constants"),u=e("../../components/drawing/attributes").pattern,e=e("../../lib/extend").extendFlat,l=l({editType:"calc",arrayOk:!0,colorEditType:"style"}),d=e({},r.marker.line.width,{dflt:0}),d=e({width:d,editType:"calc"},s("marker.line")),d=e({line:d,editType:"calc"},s("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:u});t.exports={x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,xhoverformat:a("x"),yhoverformat:a("y"),text:r.text,texttemplate:o({editType:"plot"},{keys:c.eventDataKeys}),hovertext:r.hovertext,hovertemplate:i({},{keys:c.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:e({},l,{}),insidetextfont:e({},l,{}),outsidetextfont:e({},l,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:e({},r.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:d,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:r.selected.marker.opacity,color:r.selected.marker.color,editType:"style"},textfont:r.selected.textfont,editType:"style"},unselected:{marker:{opacity:r.unselected.marker.opacity,color:r.unselected.marker.color,editType:"style"},textfont:r.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":164,"../../components/drawing/attributes":178,"../../lib/extend":281,"../../plots/cartesian/axis_format_attributes":337,"../../plots/font_attributes":365,"../../plots/template_attributes":373,"../scatter/attributes":500,"./constants":390}],389:[function(e,t,n){"use strict";var h=e("../../plots/cartesian/axes"),m=e("../../plots/cartesian/align_period"),g=e("../../components/colorscale/helpers").hasColorscale,y=e("../../components/colorscale/calc"),v=e("./arrays_to_calcdata"),b=e("../scatter/calc_selection");t.exports=function(e,t){for(var n,r,a,i,o=h.getFromId(e,t.xaxis||"x"),s=h.getFromId(e,t.yaxis||"y"),l={msUTC:!(!t.base&&0!==t.base)},c="h"===t.orientation?(n=o.makeCalcdata(t,"x",l),r=s.makeCalcdata(t,"y"),a=m(t,s,"y",r),i=!!t.yperiodalignment,"y"):(n=s.makeCalcdata(t,"y",l),r=o.makeCalcdata(t,"x"),a=m(t,o,"x",r),i=!!t.xperiodalignment,"x"),u=a.vals,d=Math.min(u.length,n.length),f=new Array(d),p=0;p<d;p++)f[p]={p:u[p],s:n[p]},i&&(f[p].orig_p=r[p],f[p][c+"End"]=a.ends[p],f[p][c+"Start"]=a.starts[p]),t.ids&&(f[p].id=String(t.ids[p]));return g(t,"marker")&&y(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),g(t,"marker.line")&&y(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),v(f,t),b(f,t),f}},{"../../components/colorscale/calc":165,"../../components/colorscale/helpers":168,"../../plots/cartesian/align_period":331,"../../plots/cartesian/axes":334,"../scatter/calc_selection":502,"./arrays_to_calcdata":387}],390:[function(e,t,n){"use strict";t.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],391:[function(e,t,n){"use strict";var Ie=e("fast-isnumeric"),Re=e("../../lib").isArrayOrTypedArray,Pe=e("../../constants/numerical").BADNUM,f=e("../../registry"),Ne=e("../../plots/cartesian/axes"),Fe=e("../../plots/cartesian/constraints").getAxisGroup,ze=e("./sieve.js");function p(N,e,t,n,r){if(n.length){var a,i,o,s,l,c,u,F=t,z=n;for(l=0;l<z.length;l++){var d=z[l],f=d[0].trace,p="funnel"===f.type?f._base:f.base,j="h"===f.orientation?f.xcalendar:f.ycalendar,q="category"===F.type||"multicategory"===F.type?function(){return null}:F.d2c;if(Re(p)){for(c=0;c<Math.min(p.length,d.length);c++)u=q(p[c],0,j),Ie(u)?(d[c].b=+u,d[c].hasB=1):d[c].b=0;for(;c<d.length;c++)d[c].b=0}else{u=q(p,0,j);var H=Ie(u);for(u=H?u:0,c=0;c<d.length;c++)d[c].b=u,H&&(d[c].hasB=1)}}switch(r.mode){case"overlay":je(e,t,n,r);break;case"group":for(a=[],i=[],o=0;o<n.length;o++)(void 0===(s=n[o])[0].trace.offset?i:a).push(s);if(i.length){for(var B,h=N,U=e,V=t,m=i,g=r,Y=(m=new ze(m,{posAxis:U,sepNegVal:!1,overlapNoMerge:!g.norm}),U),y=m,$=g,h=h._fullLayout,v=y.positions,G=y.distinctPositions,W=y.minDiff,b=y.traces,Z=b.length,X=v.length!==G.length,x=W*(1-$.gap),v=Fe(h,Y._id)+b[0][0].trace.orientation,J=h._alignmentOpts[v]||{},_=0;_<Z;_++){var K=b[_],Q=K[0].trace,w=J[Q.alignmentgroup]||{},w=Object.keys(w.offsetGroups||{}).length,ee=(B=w?x/w:X?x/Z:x)*(1-($.groupgap||0)),w=(Q=w?((2*Q._offsetIndex+1-w)*B-ee)/2:X?((2*_+1-Z)*B-ee)/2:-ee/2,K[0].t);w.barwidth=ee,w.poffset=Q,w.bargroupwidth=x,w.bardelta=W}y.binWidth=b[0][0].t.barwidth/100,He(y),Be(Y,y),Ue(Y,y,X);for(var te=U,ne=m.traces,re=0;re<ne.length;re++){var ae=ne[re];if(void 0===ae[0].trace.base)for(var ie=new ze([ae],{posAxis:te,sepNegVal:!0,overlapNoMerge:!0}),oe=0;oe<ae.length;oe++){var se,T=ae[oe];T.p===Pe||(se=ie.put(T.p,T.b+T.s))&&(T.b=se)}}g.norm?(Ye(m),$e(V,m,g)):Ve(V,m)}a.length&&je(e,t,a,r);break;case"stack":case"relative":for(a=[],i=[],o=0;o<n.length;o++)(void 0===(s=n[o])[0].trace.base?i:a).push(s);if(i.length){var k,le,ce,A,M,E,G=e,h=t,ue=i,v=r,de=new ze(ue,{posAxis:G,sepNegVal:"relative"===v.mode,overlapNoMerge:!(v.norm||"stack"===v.mode||"relative"===v.mode)}),fe=(qe(G,de,v),h),pe=de,he=v,me=Ge(fe),ge=pe.traces;for(A=0;A<ge.length;A++)if(k=ge[A],"funnel"===(le=k[0].trace).type)for(M=0;M<k.length;M++)(E=k[M]).s!==Pe&&pe.put(E.p,-.5*E.s);for(A=0;A<ge.length;A++){k=ge[A],le=k[0].trace,ce="funnel"===le.type;var ye,S,ve=[];for(M=0;M<k.length;M++)(E=k[M]).s!==Pe&&(S=ce?E.s:E.s+E.b,ye=pe.put(E.p,S),S=ye+S,E.b=ye,E[me]=S,he.norm||(ve.push(S),E.hasB&&ve.push(ye)));he.norm||(le._extremes[fe._id]=Ne.findExtremes(fe,ve,{tozero:!0,padded:!0}))}for(var be=0;be<ue.length;be++)for(var xe=ue[be],_e=0;_e<xe.length;_e++){var L=xe[_e];L.s!==Pe&&L.b+L.s===de.get(L.p,L.s)&&(L._outmost=!0)}v.norm&&$e(h,de,v)}a.length&&je(e,t,a,r)}var C,O,D,we=n,Te=Ge(e),I={},ke=1/0,Ae=-1/0;for(C=0;C<we.length;C++)for(D=we[C],O=0;O<D.length;O++){var Me=D[O].p;Ie(Me)&&(ke=Math.min(ke,Me),Ae=Math.max(Ae,Me))}var Ee=1e4/(Ae-ke),Se=I.round=function(e){return String(Math.round(Ee*(e-ke)))};for(C=0;C<we.length;C++){(D=we[C])[0].t.extents=I;var Le=D[0].t.poffset,Ce=Array.isArray(Le);for(O=0;O<D.length;O++){var Oe,R,P=D[O],De=P[Te]-P.w/2;Ie(De)&&(Oe=P[Te]+P.w/2,R=Se(P.p),I[R]?I[R]=[Math.min(De,I[R][0]),Math.max(Oe,I[R][1])]:I[R]=[De,Oe]),P.p0=P.p+(Ce?Le[O]:Le),P.p1=P.p0+P.w,P.s0=P.b,P.s1=P.s0+P.s}}}}function je(e,t,n,r){for(var a=0;a<n.length;a++){var i=n[a],i=new ze([i],{posAxis:e,sepNegVal:!1,overlapNoMerge:!r.norm});qe(e,i,r),r.norm?(Ye(i),$e(t,i,r)):Ve(t,i)}}function qe(e,t,n){for(var r=t.minDiff,a=t.traces,i=r*(1-n.gap),o=i*(1-(n.groupgap||0)),s=-o/2,l=0;l<a.length;l++){var c=a[l][0].t;c.barwidth=o,c.poffset=s,c.bargroupwidth=i,c.bardelta=r}t.binWidth=a[0][0].t.barwidth/100,He(t),Be(e,t),Ue(e,t)}function He(e){for(var t=e.traces,n=0;n<t.length;n++){var r,a=t[n],i=a[0],o=i.trace,i=i.t,s=o._offset||o.offset,l=i.poffset;if(Re(s)){for(r=Array.prototype.slice.call(s,0,a.length),d=0;d<r.length;d++)Ie(r[d])||(r[d]=l);for(d=r.length;d<a.length;d++)r.push(l);i.poffset=r}else void 0!==s&&(i.poffset=s);var o=o._width||o.width,c=i.barwidth;if(Re(o)){for(var u=Array.prototype.slice.call(o,0,a.length),d=0;d<u.length;d++)Ie(u[d])||(u[d]=c);for(d=u.length;d<a.length;d++)u.push(c);if(i.barwidth=u,void 0===s){for(r=[],d=0;d<a.length;d++)r.push(l+(c-u[d])/2);i.poffset=r}}else void 0!==o&&(i.barwidth=o,void 0===s&&(i.poffset=l+(c-o)/2))}}function Be(e,t){for(var n=t.traces,r=Ge(e),a=0;a<n.length;a++)for(var i=n[a],o=i[0].t,s=o.poffset,l=Array.isArray(s),c=o.barwidth,u=Array.isArray(c),d=0;d<i.length;d++){var f=i[d],p=f.w=u?c[d]:c;f[r]=f.p+(l?s[d]:s)+p/2}}function Ue(e,t,n){var r=t.traces,a=t.minDiff/2;Ne.minDtick(e,t.minDiff,t.distinctPositions[0],n);for(var i=0;i<r.length;i++){var o=r[i],s=o[0],l=s.trace,c=[];for(h=0;h<o.length;h++)m=(g=o[h]).p-a,b=g.p+a,c.push(m,b);if(l.width||l.offset)for(var s=s.t,u=s.poffset,d=s.barwidth,f=Array.isArray(u),p=Array.isArray(d),h=0;h<o.length;h++){var m,g=o[h],y=f?u[h]:u,v=p?d[h]:d,b=(m=g.p+y)+v;c.push(m,b)}l._extremes[e._id]=Ne.findExtremes(e,c,{padded:!1})}}function Ve(e,t){for(var n=t.traces,r=Ge(e),a=0;a<n.length;a++){for(var i=n[a],o=i[0].trace,s=[],l=!1,c=0;c<i.length;c++){var u=i[c],d=u.b,f=d+u.s;u[r]=f,s.push(f),u.hasB&&s.push(d),u.hasB&&u.b||(l=!0)}o._extremes[e._id]=Ne.findExtremes(e,s,{tozero:l,padded:!0})}}function Ye(e){for(var t=e.traces,n=0;n<t.length;n++)for(var r=t[n],a=0;a<r.length;a++){var i=r[a];i.s!==Pe&&e.put(i.p,i.b+i.s)}}function $e(t,e,n){var r=e.traces,a=Ge(t),i="fraction"===n.norm?1:100,o=i/1e9,s=t.l2c(t.c2l(0)),l="stack"===n.mode?i:s;function c(e){return Ie(t.c2l(e))&&(e<s-o||l+o<e||!Ie(s))}for(var u=0;u<r.length;u++){for(var d=r[u],f=d[0].trace,p=[],h=!1,m=!1,g=0;g<d.length;g++){var y,v,b=d[g];b.s!==Pe&&(y=Math.abs(i/e.get(b.p,b.s)),b.b*=y,b.s*=y,v=(y=b.b)+b.s,b[a]=v,p.push(v),m=m||c(v),b.hasB&&(p.push(y),m=m||c(y)),b.hasB&&b.b||(h=!0))}f._extremes[t._id]=Ne.findExtremes(t,p,{tozero:h,padded:m})}}function Ge(e){return e._id.charAt(0)}t.exports={crossTraceCalc:function(e,t){for(var n=t.xaxis,r=t.yaxis,t=e._fullLayout,a=e._fullData,i=e.calcdata,o=[],s=[],l=0;l<a.length;l++){var c=a[l];if(!0===c.visible&&f.traceIs(c,"bar")&&c.xaxis===n._id&&c.yaxis===r._id&&(("h"===c.orientation?o:s).push(i[l]),c._computePh))for(var u=e.calcdata[l],d=0;d<u.length;d++)"function"==typeof u[d].ph0&&(u[d].ph0=u[d].ph0()),"function"==typeof u[d].ph1&&(u[d].ph1=u[d].ph1())}t={xCat:"category"===n.type||"multicategory"===n.type,yCat:"category"===r.type||"multicategory"===r.type,mode:t.barmode,norm:t.barnorm,gap:t.bargap,groupgap:t.bargroupgap},p(e,n,r,s,t),p(e,r,n,o,t)},setGroupPositions:p}},{"../../constants/numerical":267,"../../lib":287,"../../plots/cartesian/axes":334,"../../plots/cartesian/constraints":342,"../../registry":378,"./sieve.js":401,"fast-isnumeric":33}],392:[function(e,t,n){"use strict";var h=e("../../lib"),o=e("../../components/color"),s=e("../../registry"),l=e("../scatter/xy_defaults"),c=e("../scatter/period_defaults"),u=e("./style_defaults"),d=e("../../plots/cartesian/constraints").getAxisGroup,f=e("./attributes"),m=h.coerceFont;function i(e,t,n,r){var a=t.orientation,i=t[{v:"x",h:"y"}[a]+"axis"],i=d(n,i)+a,a=n._alignmentOpts||{},n=r("alignmentgroup"),o=a[i],a=(o=o||(a[i]={}))[n],i=(a?a.traces.push(t):a=o[n]={traces:[t],alignmentIndex:Object.keys(o).length,offsetGroups:{}},r("offsetgroup")),n=a.offsetGroups,o=n[i];i&&(o=o||(n[i]={offsetIndex:Object.keys(n).length}),t._offsetIndex=o.offsetIndex)}function p(e,t,n,r,a,i){var o=!(!1===(i=i||{}).moduleHasSelected),s=!(!1===i.moduleHasUnselected),l=!(!1===i.moduleHasConstrain),c=!(!1===i.moduleHasCliponaxis),u=!(!1===i.moduleHasTextangle),d=!(!1===i.moduleHasInsideanchor),i=!!i.hasPathbar,f=Array.isArray(a)||"auto"===a,p=f||"inside"===a,f=f||"outside"===a;(p||f)&&(a=m(r,"textfont",n.font),n=h.extendFlat({},a),(e=!(e.textfont&&e.textfont.color))&&delete n.color,m(r,"insidetextfont",n),i&&(n=h.extendFlat({},a),e&&delete n.color,m(r,"pathbar.textfont",n)),f&&m(r,"outsidetextfont",a),o&&r("selected.textfont.color"),s&&r("unselected.textfont.color"),l&&r("constraintext"),c&&r("cliponaxis"),u&&r("textangle"),r("texttemplate")),p&&d&&r("insidetextanchor")}t.exports={supplyDefaults:function(n,r,e,t){function a(e,t){return h.coerce(n,r,f,e,t)}var i;l(n,r,t,a)?(c(n,r,t,a),a("xhoverformat"),a("yhoverformat"),a("orientation",r.x&&!r.y?"h":"v"),a("base"),a("offset"),a("width"),a("text"),a("hovertext"),a("hovertemplate"),i=a("textposition"),p(n,0,t,a,i,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),u(n,r,a,e,t),i=(r.marker.line||{}).color,(e=s.getComponentMethod("errorbars","supplyDefaults"))(n,r,i||o.defaultLine,{axis:"y"}),e(n,r,i||o.defaultLine,{axis:"x",inherit:"y"}),h.coerceSelectionMarkerOpacity(r,a)):r.visible=!1},crossTraceDefaults:function(e,t){var n;function r(e){return h.coerce(n._input,n,f,e)}if("group"===t.barmode)for(var a=0;a<e.length;a++)"bar"===(n=e[a]).type&&(n._input,i(0,n,t,r))},handleGroupingDefaults:i,handleText:p}},{"../../components/color":157,"../../lib":287,"../../plots/cartesian/constraints":342,"../../registry":378,"../scatter/period_defaults":520,"../scatter/xy_defaults":527,"./attributes":388,"./style_defaults":403}],393:[function(e,t,n){"use strict";t.exports=function(e,t,n){return e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),"h"===n.orientation?(e.label=e.y,e.value=e.x):(e.label=e.x,e.value=e.y),e}},{}],394:[function(e,t,n){"use strict";var i=e("fast-isnumeric"),r=e("tinycolor2"),a=e("../../lib").isArrayOrTypedArray;n.coerceString=function(e,t,n){if("string"==typeof t){if(t||!e.noBlank)return t}else if(("number"==typeof t||!0===t)&&!e.strict)return String(t);return void 0!==n?n:e.dflt},n.coerceNumber=function(e,t,n){if(i(t)){t=+t;var r=e.min,a=e.max;if(!(void 0!==r&&t<r||void 0!==a&&a<t))return t}return void 0!==n?n:e.dflt},n.coerceColor=function(e,t,n){return r(t).isValid()?t:void 0!==n?n:e.dflt},n.coerceEnumerated=function(e,t,n){return e.coerceNumber&&(t=+t),-1!==e.values.indexOf(t)?t:void 0!==n?n:e.dflt},n.getValue=function(e,t){var n;return Array.isArray(e)?t<e.length&&(n=e[t]):n=e,n},n.getLineWidth=function(e,t){return 0<t.mlw?t.mlw:a(e.marker.line.width)?0:e.marker.line.width}},{"../../lib":287,"fast-isnumeric":33,tinycolor2:121}],395:[function(e,t,n){"use strict";var C=e("../../components/fx"),i=e("../../registry"),a=e("../../components/color"),O=e("../../lib").fillText,o=e("./helpers").getLineWidth,D=e("../../plots/cartesian/axes").hoverLabelText,I=e("../../constants/numerical").BADNUM;function s(e,t,n,r,a){var i,o,s,l,c,u,d=e.cd,f=d[0].trace,p=d[0].t,h="closest"===r,m="waterfall"===f.type,g=e.maxHoverDistance,y=e.maxSpikeDistance,t=("h"===f.orientation?(i=n,o=t,s="y",l="x",c=E,u=A):(i=t,o=n,s="x",l="y",u=E,c=A),f[s+"period"]),n=h||t;function v(e){return x(e,-1)}function b(e){return x(e,1)}function x(e,t){var n=e.w;return e[s]+t*n/2}function _(e){return e[s+"End"]-e[s+"Start"]}var w=h?v:t?function(e){return e.p-_(e)/2}:function(e){return Math.min(v(e),e.p-p.bardelta/2)},T=h?b:t?function(e){return e.p+_(e)/2}:function(e){return Math.max(b(e),e.p+p.bardelta/2)};function k(e,t,n){return a.finiteRange&&(n=0),C.inbox(e-i,t-i,n+Math.min(1,Math.abs(t-e)/L)-1)}function A(e){return k(w(e),T(e),g)}function M(e){var t=e[l];return m&&(e=Math.abs(e.rawS)||0,0<o?t+=e:o<0&&(t-=e)),t}function E(e){var t=o,n=e.b,e=M(e);return C.inbox(n-t,e-t,g+(e-t)/(e-n)-1)}var t=e[s+"a"],S=e[l+"a"];var L=Math.abs(t.r2c(t.range[1])-t.r2c(t.range[0])),r=C.getDistanceFunction(r,c,u,function(e){return(c(e)+u(e))/2});if((C.getClosest(d,r,e),!1!==e.index)&&d[e.index].p!==I)return n||(w=function(e){return Math.min(v(e),e.p-p.bargroupwidth/2)},T=function(e){return Math.max(b(e),e.p+p.bargroupwidth/2)}),r=d[e.index],n=f.base?r.b+r.s:r.s,e[l+"0"]=e[l+"1"]=S.c2p(r[l],!0),e[l+"LabelVal"]=n,d=p.extents[p.extents.round(r.p)],e[s+"0"]=t.c2p(h?w(r):d[0],!0),e[s+"1"]=t.c2p(h?T(r):d[1],!0),n=void 0!==r.orig_p,e[s+"LabelVal"]=n?r.orig_p:r.p,e.labelLabel=D(t,e[s+"LabelVal"],f[s+"hoverformat"]),e.valueLabel=D(S,e[l+"LabelVal"],f[l+"hoverformat"]),e.baseLabel=D(S,r.b,f[l+"hoverformat"]),e.spikeDistance=(h=o,n=(d=r).b,d=M(d),(C.inbox(n-h,d-h,y+(d-h)/(d-n)-1)+k(v(r),b(r),y))/2),e[s+"Spike"]=t.c2p(r.p,!0),O(r,f,e),e.hovertemplate=f.hovertemplate,e}function l(e,t){var n=t.mcc||e.marker.color,r=t.mlcc||e.marker.line.color,e=o(e,t);return a.opacity(n)?n:a.opacity(r)&&e?r:void 0}t.exports={hoverPoints:function(e,t,n,r,a){if(e=s(e,t,n,r,a))return n=(t=e.cd)[0].trace,r=t[e.index],e.color=l(n,r),i.getComponentMethod("errorbars","hoverInfo")(r,n,e),[e]},hoverOnBars:s,getTraceColor:l}},{"../../components/color":157,"../../components/fx":197,"../../constants/numerical":267,"../../lib":287,"../../plots/cartesian/axes":334,"../../registry":378,"./helpers":394}],396:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,colorbar:e("../scatter/marker_colorbar"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"bar",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":348,"../scatter/marker_colorbar":518,"./arrays_to_calcdata":387,"./attributes":388,"./calc":389,"./cross_trace_calc":391,"./defaults":392,"./event_data":393,"./hover":395,"./layout_attributes":397,"./layout_defaults":398,"./plot":399,"./select":400,"./style":402}],397:[function(e,t,n){"use strict";t.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],398:[function(e,t,n){"use strict";var f=e("../../registry"),p=e("../../plots/cartesian/axes"),h=e("../../lib"),m=e("./layout_attributes");t.exports=function(n,r,e){function t(e,t){return h.coerce(n,r,m,e,t)}for(var a=!1,i=!1,o=!1,s={},l=t("barmode"),c=0;c<e.length;c++){var u,d=e[c];f.traceIs(d,"bar")&&d.visible&&(a=!0,"group"===l&&(s[u=d.xaxis+d.yaxis]&&(o=!0),s[u]=!0),d.visible&&"histogram"===d.type&&"category"!==p.getFromId({_fullLayout:r},d["v"===d.orientation?"xaxis":"yaxis"]).type&&(i=!0))}a?("overlay"!==l&&t("barnorm"),t("bargap",i&&!o?0:.2),t("bargroupgap")):delete r.barmode}},{"../../lib":287,"../../plots/cartesian/axes":334,"../../registry":378,"./layout_attributes":397}],399:[function(e,t,n){"use strict";var A=e("@plotly/d3"),M=e("fast-isnumeric"),E=e("../../lib"),S=e("../../lib/svg_text_utils"),L=e("../../components/color"),C=e("../../components/drawing"),r=e("../../registry"),O=e("../../plots/cartesian/axes").tickText,a=e("./uniform_text"),D=a.recordMinTextSize,i=a.clearMinTextSize,I=e("./style"),R=e("./helpers"),a=e("./constants"),o=e("./attributes"),P=o.text,N=o.textposition,F=e("../../components/fx/helpers").appendArrayPointValue,z=a.TEXTPAD;function s(e){return e.id}function j(e,t,n,r){var a;return!t.uniformtext.mode&&l(n)?(r&&(a=r()),e.transition().duration(n.duration).ease(n.easing).each("end",function(){a&&a()}).each("interrupt",function(){a&&a()})):e}function l(e){return e&&0<e.duration}function q(e){return"auto"===e?0:e}function H(e,t){var t=Math.PI/180*t,n=Math.abs(Math.sin(t)),t=Math.abs(Math.cos(t));return{x:e.width*t+e.height*n,y:e.width*n+e.height*t}}function B(e,t,n,r,a,i){var o=!!i.isHorizontal,s=!!i.constrained,l=i.angle||0,c=i.anchor||"end",u="end"===c,c="start"===c,i=((i.leftToRight||0)+1)/2,d=1-i,f=a.width,p=a.height,h=Math.abs(t-e),m=Math.abs(r-n),g=2*z<h&&2*z<m?z:0,y=(h-=2*g,m-=2*g,q(l)),l=("auto"!==l||f<=h&&p<=m||!(h<f||m<p)||(m<f||h<p)&&f<p==h<m||(y+=90),H(a,y)),f=1,p=(s&&(f=Math.min(1,h/l.x,m/l.y)),a.left*d+a.right*i),s=(a.top+a.bottom)/2,h=(e+z)*d+(t-z)*i,m=(n+r)/2,a=0,d=0;return(c||u)&&(i=(o?l.x:l.y)/2,u=o?e<t?1:-1:n<r?1:-1,o?a=c?(h=e+u*g,-u*i):(h=t-u*g,u*i):d=c?(m=n+u*g,-u*i):(m=r-u*g,u*i)),{textX:p,textY:s,targetX:h,targetY:m,anchorX:a,anchorY:d,scale:f,rotate:y}}t.exports={plot:function(v,b,e,t,x,_){var w=b.xaxis,T=b.yaxis,k=v._fullLayout,t=(x||(x={mode:k.barmode,norm:k.barmode,gap:k.bargap,groupgap:k.bargroupgap},i("bar",k)),E.makeTraceGroups(t,e,"trace bars").each(function(f){var e=A.select(this),p=f[0].trace,t="waterfall"===p.type,n="funnel"===p.type,h="bar"===p.type||n,m=0,g=(t&&p.connector.visible&&"between"===p.connector.mode&&(m=p.connector.line.width/2),"h"===p.orientation),y=l(x),n=E.ensureSingle(e,"g","points"),t=function(e){if(e.ids)return s}(p),n=n.selectAll("g.point").data(E.identity,t),t=(n.enter().append("g").classed("point",!0),n.exit().remove(),n.each(function(e,t){var n,r=A.select(this),a=(o=e,c=w,i=T,l=[],a=(s=g)?c:i,i=s?i:c,(c=[])[0]=a.c2p(o.s0,!0),l[0]=i.c2p(o.p0,!0),c[1]=a.c2p(o.s1,!0),l[1]=i.c2p(o.p1,!0),s?[c,l]:[l,c]),i=a[0][0],o=a[0][1],s=a[1][0],l=a[1][1],c=0==(g?o-i:l-s);function u(e){var t=A.round(n/2%1,2);return 0===x.gap&&0===x.groupgap?A.round(Math.round(e)-t,2):e}c=(c=c&&h&&R.getLineWidth(p,e)?!1:c)||!(M(i)&&M(o)&&M(s)&&M(l)),(e.isBlank=c)&&(g?o=i:l=s),m&&!c&&(g?o+=((i-=(i<o?1:-1)*m)<o?1:-1)*m:l+=((s-=(s<l?1:-1)*m)<l?1:-1)*m),"waterfall"===p.type?c||(a=p[e.dir].marker,n=a.line.width,d=a.color):(n=R.getLineWidth(p,e),d=e.mc||p.marker.color),v._context.staticPlot||(i=(a=L.opacity(d)<1||.01<n?u:function(e,t,n){return n&&e===t?e:2<=Math.abs(e-t)?u(e):t<e?Math.ceil(e):Math.floor(e)})(i,o,g),o=a(o,i,g),s=a(s,l,!g),l=a(l,s,!g));var d=j(E.ensureSingle(r,"path"),k,x,_);d.style("vector-effect","non-scaling-stroke").attr("d",isNaN((o-i)*(l-s))||c&&v._context.staticPlot?"M0,0Z":"M"+i+","+s+"V"+l+"H"+o+"V"+s+"Z").call(C.setClipUrl,b.layerClipId,v),!k.uniformtext.mode&&y&&(a=C.makePointStyleFns(p),C.singlePointStyle(e,d,p,a,v)),function(r,e,t,n,a,i,o,s,l,c,u){var d,f=e.xaxis,e=e.yaxis,p=r._fullLayout;function h(e,t,n){return E.ensureSingle(e,"text").text(t).attr({class:"bartext bartext-"+d,"text-anchor":"middle","data-notex":1}).call(C.font,n).call(S.convertToTspans,r)}var m=n[0].trace,g="h"===m.orientation,y=function(e,t,n,r,a){var i=t[0].trace;e=i.texttemplate?function(e,t,n,r,a){var i=t[0].trace,o=E.castOption(i,n,"texttemplate");if(!o)return"";var s,l,c,u="histogram"===i.type,d="waterfall"===i.type,f="funnel"===i.type,p="h"===i.orientation;c=p?(m="y",s=a,l="x",r):(m="x",s=r,l="y",a);function h(e){return O(c,c.c2l(e),!0).text}r=t[n],a={},a.label=r.p,a.labelLabel=a[m+"Label"]=function(e){return O(s,s.c2l(e),!0).text}(r.p),t=E.castOption(i,r.i,"text");0!==t&&!t||(a.text=t);a.value=r.s,a.valueLabel=a[l+"Label"]=h(r.s);n={};F(n,i,r.i),!u&&void 0!==n.x||(n.x=p?a.value:a.label);!u&&void 0!==n.y||(n.y=p?a.label:a.value);!u&&void 0!==n.xLabel||(n.xLabel=p?a.valueLabel:a.labelLabel);!u&&void 0!==n.yLabel||(n.yLabel=p?a.labelLabel:a.valueLabel);d&&(a.delta=+r.rawS||r.s,a.deltaLabel=h(a.delta),a.final=r.v,a.finalLabel=h(a.final),a.initial=a.final-a.delta,a.initialLabel=h(a.initial));f&&(a.value=r.s,a.valueLabel=h(a.value),a.percentInitial=r.begR,a.percentInitialLabel=E.formatPercent(r.begR),a.percentPrevious=r.difR,a.percentPreviousLabel=E.formatPercent(r.difR),a.percentTotal=r.sumR,a.percenTotalLabel=E.formatPercent(r.sumR));var m=E.castOption(i,r.i,"customdata");m&&(a.customdata=m);return E.texttemplateString(o,a,e._d3locale,n,a,i._meta||{})}(e,t,n,r,a):i.textinfo?function(e,t,n,r){var a=e[0].trace,i="h"===a.orientation,o="waterfall"===a.type,s="funnel"===a.type;function l(e){return O(i?n:r,+e,!0).text}function c(e){return-1!==p.indexOf(e)}var u,d=a.textinfo,f=e[t],p=d.split("+"),d=[];c("label")&&d.push(function(e){return O(i?r:n,e,!0).text}(e[t].p));!c("text")||0!==(u=E.castOption(a,f.i,"text"))&&!u||d.push(u);o&&(e=+f.rawS||f.s,t=f.v,a=t-e,c("initial")&&d.push(l(a)),c("delta")&&d.push(l(e)),c("final")&&d.push(l(t)));s&&(c("value")&&d.push(l(f.s)),o=0,c("percent initial")&&o++,c("percent previous")&&o++,c("percent total")&&o++,a=1<o,c("percent initial")&&(u=E.formatPercent(f.begR),a&&(u+=" of initial"),d.push(u)),c("percent previous")&&(u=E.formatPercent(f.difR),a&&(u+=" of previous"),d.push(u)),c("percent total")&&(u=E.formatPercent(f.sumR),a&&(u+=" of total"),d.push(u)));return d.join("<br>")}(t,n,r,a):R.getValue(i.text,n);return R.coerceString(P,e)}(p,n,a,f,e),v=(d=function(e,t){e=R.getValue(e.textposition,t);return R.coerceEnumerated(N,e)}(m,a),"stack"===c.mode||"relative"===c.mode),b=n[a],v=!v||b._outmost;if(y&&"none"!==d&&(!b.isBlank&&i!==o&&s!==l||"auto"!==d&&"inside"!==d)){var x,_,w,T,k,A=p.font,n=I.getBarColor(n[a],m),n=I.getInsideTextFont(m,a,A,n),a=I.getOutsideTextFont(m,a,A),A=t.datum(),f=(g?"log"===f.type&&A.s0<=0&&(i=f.range[0]<f.range[1]?0:f._length):"log"===e.type&&A.s0<=0&&(s=e.range[0]<e.range[1]?e._length:0),Math.abs(o-i)-2*z),A=Math.abs(l-s)-2*z;if("auto"===(d="outside"!==d||v||b.hasB?d:"inside")&&(v?(d="inside",k=E.ensureUniformFontSize(r,n),x=h(t,y,k),_=C.bBox(x.node()),w=_.width,T=_.height,e=w<=f&&T<=A,v=w<=A&&T<=f,f=g?w*(A/T)<=f:T*(f/w)<=A,0<w&&0<T&&(e||v||f)?d="inside":(d="outside",x.remove(),x=null)):d="inside"),!x){k=E.ensureUniformFontSize(r,"outside"===d?a:n);A=(x=h(t,y,k)).attr("transform");if(x.attr("transform",""),_=C.bBox(x.node()),w=_.width,T=_.height,x.attr("transform",A),w<=0||T<=0)return x.remove()}var M,e=m.textangle;(v="outside"===d?(M="both"===m.constraintext||"outside"===m.constraintext,function(e,t,n,r,a,i){var o,s=!!i.isHorizontal,l=!!i.constrained,i=i.angle||0,c=a.width,u=a.height,d=Math.abs(t-e),f=Math.abs(r-n);o=s?2*z<f?z:0:2*z<d?z:0;var p=1;l&&(p=s?Math.min(1,f/u):Math.min(1,d/c));var l=q(i),f=H(a,l),u=(s?f.x:f.y)/2,d=(a.left+a.right)/2,c=(a.top+a.bottom)/2,i=(e+t)/2,f=(n+r)/2,a=0,h=0,e=s?t<e?1:-1:n<r?1:-1;s?(i=t-e*o,a=e*u):(f=r+e*o,h=-e*u);return{textX:d,textY:c,targetX:i,targetY:f,anchorX:a,anchorY:h,scale:p,rotate:l}}(i,o,s,l,_,{isHorizontal:g,constrained:M,angle:e})):(M="both"===m.constraintext||"inside"===m.constraintext,B(i,o,s,l,_,{isHorizontal:g,constrained:M,angle:e,anchor:m.insidetextanchor}))).fontSize=k.size,D("histogram"===m.type?"bar":m.type,v,p),b.transform=v,j(x,p,c,u).attr("transform",E.getTextTransform(v))}else t.select("text").remove()}(v,b,r,f,t,i,o,s,l,x,_),b.layerClipId&&C.hideOutsideRangePoint(e,r.select("text"),w,T,p.xcalendar,p.ycalendar)}),!1===p.cliponaxis);C.setClipUrl(e,t?null:b.layerClipId,v)}));r.getComponentMethod("errorbars","plot")(v,t,b,x)},toMoveInsideBar:B}},{"../../components/color":157,"../../components/drawing":179,"../../components/fx/helpers":193,"../../lib":287,"../../lib/svg_text_utils":310,"../../plots/cartesian/axes":334,"../../registry":378,"./attributes":388,"./constants":390,"./helpers":394,"./style":402,"./uniform_text":404,"@plotly/d3":20,"fast-isnumeric":33}],400:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,a,i,o,s,l,c=e.cd,u=e.xaxis,d=e.yaxis,f=c[0].trace,p="funnel"===f.type,h="h"===f.orientation,m=[];if(!1===t)for(n=0;n<c.length;n++)c[n].selected=0;else for(n=0;n<c.length;n++){var g=c[n],y="ct"in g?g.ct:(y=g,a=d,i=h,o=p,l=s=void 0,s=(r=u).c2p(i?y.s0:y.p0,!0),r=r.c2p(i?y.s1:y.p1,!0),l=a.c2p(i?y.p0:y.s0,!0),a=a.c2p(i?y.p1:y.s1,!0),o?[(s+r)/2,(l+a)/2]:i?[r,(l+a)/2]:[(s+r)/2,a]);t.contains(y,!1,n,e)?(m.push({pointNumber:n,x:u.c2d(g.x),y:d.c2d(g.y)}),g.selected=1):g.selected=0}return m}},{}],401:[function(e,t,n){"use strict";t.exports=r;var c=e("../../lib").distinctVals,u=e("../../constants/numerical").BADNUM;function r(e,t){this.traces=e,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var n=1/0,r=[],a=0;a<e.length;a++){for(var i=e[a],o=0;o<i.length;o++){var s=i[o];s.p!==u&&r.push(s.p)}i[0]&&i[0].width1&&(n=Math.min(i[0].width1,n))}this.positions=r;var l=c(r),l=(this.distinctPositions=l.vals,1===l.vals.length&&n!==1/0?this.minDiff=n:this.minDiff=Math.min(l.minDiff,n),(t.posAxis||{}).type);"category"!==l&&"multicategory"!==l||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}r.prototype.put=function(e,t){var e=this.getLabel(e,t),n=this.bins[e]||0;return this.bins[e]=n+t,n},r.prototype.get=function(e,t){e=this.getLabel(e,t);return this.bins[e]||0},r.prototype.getLabel=function(e,t){return(t<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?e:Math.round(e/this.binWidth))}},{"../../constants/numerical":267,"../../lib":287}],402:[function(e,t,n){"use strict";var l=e("@plotly/d3"),a=e("../../components/color"),c=e("../../components/drawing"),u=e("../../lib"),d=e("../../registry"),i=e("./uniform_text").resizeText,r=e("./attributes"),o=r.textfont,s=r.insidetextfont,f=r.outsidetextfont,p=e("./helpers");function h(e,t,n){c.pointStyle(e.selectAll("path"),t,n),m(e,t,n)}function m(e,n,r){e.selectAll("text").each(function(e){var t=l.select(this),e=u.ensureUniformFontSize(r,g(t,e,n,r));c.font(t,e)})}function g(e,t,n,r){var a,r=r._fullLayout.font,i=n.textfont;return e.classed("bartext-inside")?(a=_(t,n),i=v(n,t.i,r,a)):e.classed("bartext-outside")&&(i=b(n,t.i,r)),i}function y(e,t,n){return x(o,e.textfont,t,n)}function v(e,t,n,r){n=y(e,t,n);return(void 0===e._input.textfont||void 0===e._input.textfont.color||Array.isArray(e.textfont.color)&&void 0===e.textfont.color[t])&&(n={color:a.contrast(r),family:n.family,size:n.size}),x(s,e.insidetextfont,t,n)}function b(e,t,n){n=y(e,t,n);return x(f,e.outsidetextfont,t,n)}function x(e,t,n,r){var a=p.getValue((t=t||{}).family,n),i=p.getValue(t.size,n),t=p.getValue(t.color,n);return{family:p.coerceString(e.family,a,r.family),size:p.coerceNumber(e.size,i,r.size),color:p.coerceColor(e.color,t,r.color)}}function _(e,t){return"waterfall"===t.type?t[e.dir].marker.color:e.mcc||e.mc||t.marker.color}t.exports={style:function(t){var e=l.select(t).selectAll("g.barlayer").selectAll("g.trace"),n=(i(t,e,"bar"),e.size()),r=t._fullLayout;e.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){("stack"===r.barmode&&1<n||0===r.bargap&&0===r.bargroupgap&&!e[0].trace.marker.line.width)&&l.select(this).attr("shape-rendering","crispEdges")}),e.selectAll("g.points").each(function(e){h(l.select(this),e[0].trace,t)}),d.getComponentMethod("errorbars","style")(e)},styleTextPoints:m,styleOnSelect:function(e,t,n){var r,a,i,o,s;(t=t[0].trace).selectedpoints?(i=n,o=t,s=e,c.selectedPointStyle(i.selectAll("path"),o),i=i.selectAll("text"),r=o,a=s,i.each(function(e){var t,n=l.select(this);e.selected?(e=u.ensureUniformFontSize(a,g(n,e,r,a)),(t=r.selected.textfont&&r.selected.textfont.color)&&(e.color=t),c.font(n,e)):c.selectedTextStyle(n,r)})):(h(n,t,e),d.getComponentMethod("errorbars","style")(n))},getInsideTextFont:v,getOutsideTextFont:b,getBarColor:_,resizeText:i}},{"../../components/color":157,"../../components/drawing":179,"../../lib":287,"../../registry":378,"./attributes":388,"./helpers":394,"./uniform_text":404,"@plotly/d3":20}],403:[function(e,t,n){"use strict";var o=e("../../components/color"),s=e("../../components/colorscale/helpers").hasColorscale,l=e("../../components/colorscale/defaults"),c=e("../../lib").coercePattern;t.exports=function(e,t,n,r,a){var r=n("marker.color",r),i=s(e,"marker");i&&l(e,t,a,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",o.defaultLine),s(e,"marker.line")&&l(e,t,a,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),c(n,"marker.pattern",r,i),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":157,"../../components/colorscale/defaults":167,"../../components/colorscale/helpers":168,"../../lib":287}],404:[function(e,t,n){"use strict";var o=e("@plotly/d3"),s=e("../../lib");function i(e){return"_"+e+"Text_minsize"}t.exports={recordMinTextSize:function(e,t,n){var r,a;n.uniformtext.mode&&(e=i(e),r=n.uniformtext.minsize,a=t.scale*t.fontSize,t.hide=a<r,n[e]=n[e]||1/0,t.hide||(n[e]=Math.min(n[e],Math.max(a,r))))},clearMinTextSize:function(e,t){t[i(e)]=void 0},resizeText:function(e,t,n){var r=(e=e._fullLayout)["_"+n+"Text_minsize"];if(r){var a,i="hide"===e.uniformtext.mode;switch(n){case"funnelarea":case"pie":case"sunburst":a="g.slice";break;case"treemap":case"icicle":a="g.slice, g.pathbar";break;default:a="g.points > g.point"}t.selectAll(a).each(function(e){e=e.transform;e&&(e.scale=i&&e.hide?0:r/e.fontSize,o.select(this).select("text").attr("transform",s.getTextTransform(e)))})}}}},{"../../lib":287,"@plotly/d3":20}],405:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),a=e("../bar/attributes"),i=e("../../components/color/attributes"),o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,s=e("../../plots/template_attributes").hovertemplateAttrs,e=e("../../lib/extend").extendFlat,l=r.marker,c=l.line;t.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:e({},l.symbol,{arrayOk:!1,editType:"plot"}),opacity:e({},l.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:e({},l.size,{arrayOk:!1,editType:"calc"}),color:e({},l.color,{arrayOk:!1,editType:"style"}),line:{color:e({},c.color,{arrayOk:!1,dflt:i.defaultLine,editType:"style"}),width:e({},c.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:r.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:a.offsetgroup,alignmentgroup:a.alignmentgroup,selected:{marker:r.selected.marker,editType:"style"},unselected:{marker:r.unselected.marker,editType:"style"},text:e({},r.text,{}),hovertext:e({},r.hovertext,{}),hovertemplate:s({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":156,"../../lib/extend":281,"../../plots/cartesian/axis_format_attributes":337,"../../plots/template_attributes":373,"../bar/attributes":388,"../scatter/attributes":500}],406:[function(e,t,n){"use strict";var W=e("fast-isnumeric"),Z=e("../../plots/cartesian/axes"),X=e("../../plots/cartesian/align_period"),J=e("../../lib"),K=e("../../constants/numerical").BADNUM,Q=J._;t.exports=function(e,t){var n,r,a,i,o,s,l,c,u=e._fullLayout,d=Z.getFromId(e,t.xaxis||"x"),f=Z.getFromId(e,t.yaxis||"y"),p=[],h="violin"===t.type?"_numViolins":"_numBoxes",N="h"===t.orientation?(r=d,a="x",R=f,i="y",!!t.yperiodalignment):(r=f,a="y",R=d,i="x",!!t.xperiodalignment),f=function(e,t,n,r){var a=t in e,i=t+"0"in e,o="d"+t in e;if(a||i&&o)return a=n.makeCalcdata(e,t),[X(e,n,t,a).vals,a];o=i?e[t+"0"]:"name"in e&&("category"===n.type||W(e.name)&&-1!==["linear","log"].indexOf(n.type)||J.isDateTime(e.name)&&"date"===n.type)?e.name:r;for(var s="multicategory"===n.type?n.r2c_just_indices(o):n.d2c(o,0,e[t+"calendar"]),l=e._length,c=new Array(l),u=0;u<l;u++)c[u]=s;return[c]}(t,i,R,u[h]),m=f[0],F=f[1],d=J.distinctVals(m,R),g=d.vals,f=d.minDiff/2,z="all"===(t.boxpoints||t.points)?J.identity:function(e){return e.v<O.lf||e.v>O.uf};if(t._hasPreCompStats){for(var y=t[a],v=function(e){return r.d2c((t[e]||[])[_])},b=1/0,x=-1/0,_=0;_<t._length;_++){var w,T=m[_];if(W(T)){if((O={}).pos=O[i]=T,N&&F&&(O.orig_p=F[_]),O.q1=v("q1"),O.med=v("median"),O.q3=v("q3"),o=[],y&&J.isArrayOrTypedArray(y[_]))for(n=0;n<y[_].length;n++)(S=r.d2c(y[_][n]))!==K&&(ee(c={v:S,i:[_,n]},t,[_,n]),o.push(c));O.pts=o.sort(te),l=(s=O[a]=o.map(ne)).length,O.med!==K&&O.q1!==K&&O.q3!==K&&O.med>=O.q1&&O.q3>=O.med?(T=v("lowerfence"),O.lf=T!==K&&T<=O.q1?T:re(O,s,l),T=v("upperfence"),O.uf=T!==K&&T>=O.q3?T:ae(O,s,l),T=v("mean"),O.mean=T!==K?T:l?J.mean(s,l):(O.q1+O.q3)/2,w=v("sd"),O.sd=T!==K&&0<=w?w:l?J.stdev(s,l,O.mean):O.q3-O.q1,O.lo=ie(O),O.uo=oe(O),T=(T=v("notchspan"))!==K&&0<T?T:se(O,l),O.ln=O.med-T,O.un=O.med+T,w=O.lf,T=O.uf,t.boxpoints&&s.length&&(w=Math.min(w,s[0]),T=Math.max(T,s[l-1])),t.notched&&(w=Math.min(w,O.ln),T=Math.max(T,O.un)),O.min=w,O.max=T):(J.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+O.q1,"median = "+O.med,"q3 = "+O.q3].join("\n")),w=O.med!==K?O.med:O.q1!==K?O.q3!==K?(O.q1+O.q3)/2:O.q1:O.q3!==K?O.q3:0,O.med=w,O.q1=O.q3=w,O.lf=O.uf=w,O.mean=O.sd=w,O.ln=O.un=w,O.min=O.max=w),b=Math.min(b,O.min),x=Math.max(x,O.max),O.pts2=o.filter(z),p.push(O)}}t._extremes[r._id]=Z.findExtremes(r,[b,x],{padded:!0})}else{var k=r.makeCalcdata(t,a),j=function(e,t){for(var n=e.length,r=new Array(n+1),a=0;a<n;a++)r[a]=e[a]-t;return r[n]=e[n-1]+t,r}(g,f),A=g.length,M=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=[];return t}(A);for(_=0;_<t._length;_++){var E,S=k[_];W(S)&&(0<=(E=J.findBin(m[_],j))&&E<A&&(ee(c={v:S,i:_},t,_),M[E].push(c)))}var L,C,O,D,I=1/0,q=-1/0,R=t.quartilemethod,H="exclusive"===R,B="inclusive"===R;for(_=0;_<A;_++)0<M[_].length&&((O={}).pos=O[i]=g[_],o=O.pts=M[_].sort(te),l=(s=O[a]=o.map(ne)).length,O.min=s[0],O.max=s[l-1],O.mean=J.mean(s,l),O.sd=J.stdev(s,l,O.mean),O.med=J.interp(s,.5),l%2&&(H||B)?(H?(L=s.slice(0,l/2),C=s.slice(l/2+1)):B&&(L=s.slice(0,l/2+1),C=s.slice(l/2)),O.q1=J.interp(L,.5),O.q3=J.interp(C,.5)):(O.q1=J.interp(s,.25),O.q3=J.interp(s,.75)),O.lf=re(O,s,l),O.uf=ae(O,s,l),O.lo=ie(O),O.uo=oe(O),D=se(O,l),O.ln=O.med-D,O.un=O.med+D,I=Math.min(I,O.ln),q=Math.max(q,O.un),O.pts2=o.filter(z),p.push(O));t._extremes[r._id]=Z.findExtremes(r,t.notched?k.concat([I,q]):k,{padded:!0})}var U=p,V=t;if(J.isArrayOrTypedArray(V.selectedpoints))for(var Y=0;Y<U.length;Y++){for(var $=U[Y].pts||[],G={},P=0;P<$.length;P++)G[$[P].i]=P;J.tagSelected($,V,G)}return 0<p.length?(p[0].t={num:u[h],dPos:f,posLetter:i,valLetter:a,labels:{med:Q(e,"median:"),min:Q(e,"min:"),q1:Q(e,"q1:"),q3:Q(e,"q3:"),max:Q(e,"max:"),mean:"sd"===t.boxmean?Q(e,"mean  :"):Q(e,"mean:"),lf:Q(e,"lower fence:"),uf:Q(e,"upper fence:")}},u[h]++,p):[{t:{empty:!0}}]};var a={text:"tx",hovertext:"htx"};function ee(e,t,n){for(var r in a)J.isArrayOrTypedArray(t[r])&&(Array.isArray(n)?J.isArrayOrTypedArray(t[r][n[0]])&&(e[a[r]]=t[r][n[0]][n[1]]):e[a[r]]=t[r][n])}function te(e,t){return e.v-t.v}function ne(e){return e.v}function re(e,t,n){return 0===n?e.q1:Math.min(e.q1,t[Math.min(J.findBin(2.5*e.q1-1.5*e.q3,t,!0)+1,n-1)])}function ae(e,t,n){return 0===n?e.q3:Math.max(e.q3,t[Math.max(J.findBin(2.5*e.q3-1.5*e.q1,t),0)])}function ie(e){return 4*e.q1-3*e.q3}function oe(e){return 4*e.q3-3*e.q1}function se(e,t){return 0===t?0:1.57*(e.q3-e.q1)/Math.sqrt(t)}},{"../../constants/numerical":267,"../../lib":287,"../../plots/cartesian/align_period":331,"../../plots/cartesian/axes":334,"fast-isnumeric":33}],407:[function(e,t,n){"use strict";var z=e("../../plots/cartesian/axes"),j=e("../../lib"),q=e("../../plots/cartesian/constraints").getAxisGroup,f=["v","h"];function p(e,t,n,r){var a=t.calcdata,i=t._fullLayout,o=r._id,s=o.charAt(0),l=[],c=0;for(p=0;p<n.length;p++)for(h=a[n[p]],P=0;P<h.length;P++)l.push(r.c2l(h[P].pos,!0)),c+=(h[P].pts2||[]).length;if(l.length){var t=j.distinctVals(l),N=("category"!==r.type&&"multicategory"!==r.type||(t.minDiff=1),t.minDiff/2);z.minDtick(r,t.minDiff,t.vals[0],!0);for(var u=i["violin"===e?"_numViolins":"_numBoxes"],F="group"===i[e+"mode"]&&1<u,d=1-i[e+"gap"],f=1-i[e+"groupgap"],p=0;p<n.length;p++){for(var h,m,g,y,v,b,x,_,w,T,k,A,M,E,S=(h=a[n[p]])[0].trace,L=h[0].t,C=S.width,O=S.side,D=(C?(v=m=y=C/2,g=0):(v=N,y=F?(D=q(i,r._id)+S.orientation,D=(i._alignmentOpts[D]||{})[S.alignmentgroup]||{},m=v*d*f/(I=(D=Object.keys(D.offsetGroups||{}).length)||u),g=2*v*(((D?S._offsetIndex:L.num)+.5)/I-.5)*d,v*d/I):(m=v*d*f,g=0,v)),L.dPos=v,L.bPos=g,L.bdPos=m,L.wHover=y,g+m),I=Boolean(C),R=("positive"===O?(b=v*(C?1:.5),_=D,x=_=g):"negative"===O?(b=_=g,x=v*(C?1:.5),w=D):(b=x=v,_=w=D),(S.boxpoints||S.points)&&0<c?(L=S.pointpos,O=S.jitter,C=S.marker.size/2,(E=0)<=L+O&&(b<(E=D*(L+O))?(I=!0,A=C,T=E):_<E&&(A=C,T=b)),E<=b&&(T=b),L-O<=(E=0)&&(x<(E=-D*(L-O))?(I=!0,M=C,k=E):w<E&&(M=C,k=x)),E<=x&&(k=x)):(T=b,k=x),new Array(h.length)),P=0;P<h.length;P++)R[P]=h[P].pos;S._extremes[o]=z.findExtremes(r,R,{padded:I,vpadminus:k,vpadplus:T,vpadLinearized:!0,ppadminus:{x:M,y:A}[s],ppadplus:{x:A,y:M}[s]})}}}t.exports={crossTraceCalc:function(e,t){for(var n=e.calcdata,r=t.xaxis,a=t.yaxis,i=0;i<f.length;i++){for(var o=f[i],s="h"===o?a:r,l=[],c=0;c<n.length;c++){var u=n[c],d=u[0].t,u=u[0].trace;!0!==u.visible||"box"!==u.type&&"candlestick"!==u.type||d.empty||(u.orientation||"v")!==o||u.xaxis!==r._id||u.yaxis!==a._id||l.push(c)}p("box",e,l,s)}},setPositionOffset:p}},{"../../lib":287,"../../plots/cartesian/axes":334,"../../plots/cartesian/constraints":342}],408:[function(e,t,n){"use strict";var _=e("../../lib"),w=e("../../registry"),s=e("../../components/color"),l=e("../scatter/period_defaults"),c=e("../bar/defaults").handleGroupingDefaults,T=e("../../plots/cartesian/axis_autotype"),k=e("./attributes");function u(t,e,n,r){function a(e){var t=0;return e&&e.length&&(t+=1,_.isArrayOrTypedArray(e[0])&&e[0].length&&(t+=1)),t}function i(e){return _.validate(t[e],k[e])}var o,s,l=n("y"),c=n("x"),u=("box"===e.type&&(u=n("q1"),d=n("median"),s=n("q3"),e._hasPreCompStats=u&&u.length&&d&&d.length&&s&&s.length,o=Math.min(_.minRowLength(u),_.minRowLength(d),_.minRowLength(s))),a(l)),d=a(c),f=u&&_.minRowLength(l),p=d&&_.minRowLength(c),h=r.calendar,m={autotypenumbers:r.autotypenumbers};if(e._hasPreCompStats)switch(String(d)+String(u)){case"00":var g=i("x0")||i("dx"),y=(i("y0")||i("dy"))&&!g?"h":"v",v=o;break;case"10":y="v",v=Math.min(o,p);break;case"20":y="h",v=Math.min(o,c.length);break;case"01":y="h",v=Math.min(o,f);break;case"02":y="v",v=Math.min(o,l.length);break;case"12":y="v",v=Math.min(o,p,l.length);break;case"21":y="h",v=Math.min(o,c.length,f);break;case"11":v=0;break;case"22":for(var b=!1,x=0;x<c.length;x++)if("category"===T(c[x],h,m)){b=!0;break}if(b)y="v",v=Math.min(o,p,l.length);else{for(x=0;x<l.length;x++)if("category"===T(l[x],h,m)){b=!0;break}v=b?(y="h",Math.min(o,c.length,f)):(y="v",Math.min(o,p,l.length))}}else v=0<u?(y="v",0<d?Math.min(p,f):Math.min(f)):0<d?(y="h",Math.min(p)):0;v?(e._length=v,s=n("orientation",y),e._hasPreCompStats?"v"===s&&0===d?(n("x0",0),n("dx",1)):"h"===s&&0===u&&(n("y0",0),n("dy",1)):"v"===s&&0===d?n("x0"):"h"===s&&0===u&&n("y0"),w.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y"],r)):e.visible=!1}function d(e,t,n,r){var r=r.prefix,e=_.coerce2(e,t,k,"marker.outliercolor"),a=n("marker.line.outliercolor"),i="outliers",e=(t._hasPreCompStats?i="all":(e||a)&&(i="suspectedoutliers"),n(r+"points",i)),a=(e?(n("jitter","all"===e?.3:0),n("pointpos","all"===e?-1.5:0),n("marker.symbol"),n("marker.opacity"),n("marker.size"),n("marker.color",t.line.color),n("marker.line.color"),n("marker.line.width"),"suspectedoutliers"===e&&(n("marker.line.outliercolor",t.marker.color),n("marker.line.outlierwidth")),n("selected.marker.color"),n("unselected.marker.color"),n("selected.marker.size"),n("unselected.marker.size"),n("text"),n("hovertext")):delete t.marker,n("hoveron"));"all"!==a&&-1===a.indexOf("points")||n("hovertemplate"),_.coerceSelectionMarkerOpacity(t,n)}t.exports={supplyDefaults:function(n,r,e,t){function a(e,t){return _.coerce(n,r,k,e,t)}var i,o;u(n,r,a,t),!1!==r.visible&&(l(n,r,t,a),a("xhoverformat"),a("yhoverformat"),(t=r._hasPreCompStats)&&(a("lowerfence"),a("upperfence")),a("line.color",(n.marker||{}).color||e),a("line.width"),a("fillcolor",s.addOpacity(r.line.color,.5)),e=!1,t&&(i=a("mean"),o=a("sd"),i&&i.length&&(e=!0,o&&o.length&&(e="sd"))),a("boxmean",e),a("whiskerwidth"),a("width"),a("quartilemethod"),i=!1,t?(o=a("notchspan"))&&o.length&&(i=!0):_.validate(n.notchwidth,k.notchwidth)&&(i=!0),a("notched",i)&&a("notchwidth"),d(n,r,a,{prefix:"box"}))},crossTraceDefaults:function(e,t){var n;function r(e){return _.coerce(i._input,i,k,e)}for(var a=0;a<e.length;a++){var i,o=(i=e[a]).type;"box"!==o&&"violin"!==o||(n=i._input,"group"===t[o+"mode"]&&c(n,i,t,r))}},handleSampleDefaults:u,handlePointsDefaults:d}},{"../../components/color":157,"../../lib":287,"../../plots/cartesian/axis_autotype":335,"../../registry":378,"../bar/defaults":392,"../scatter/period_defaults":520,"./attributes":405}],409:[function(e,t,n){"use strict";t.exports=function(e,t){return t.hoverOnBox&&(e.hoverOnBox=t.hoverOnBox),"xVal"in t&&(e.x=t.xVal),"yVal"in t&&(e.y=t.yVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e}},{}],410:[function(e,t,n){"use strict";var N=e("../../plots/cartesian/axes"),F=e("../../lib"),z=e("../../components/fx"),j=e("../../components/color"),v=F.fillText;function s(e,t,n,r){function a(e){return s.c2l(e.pos)+b.bPos-s.c2l(u)}var i,o,s,l,c,u,d,f,p,h,m=e.cd,g=e.xa,y=e.ya,v=m[0].trace,b=m[0].t,x="violin"===v.type,_=[],w=b.bdPos,T=b.wHover,n=(x&&"both"!==v.side?("positive"===v.side&&(M=function(e){e=a(e);return z.inbox(e,e+T,A)},p=w,h=0),"negative"===v.side&&(M=function(e){e=a(e);return z.inbox(e-T,e,A)},p=0,h=w)):(M=function(e){e=a(e);return z.inbox(e-T,e+T,A)},p=h=w),x=x?function(e){return z.inbox(e.span[0]-c,e.span[1]-c,A)}:function(e){return z.inbox(e.min-c,e.max-c,A)},l="h"===v.orientation?(c=t,u=n,d=x,f=M,i="y",s=y,o="x",g):(c=n,u=t,d=M,f=x,i="x",s=g,o="y",y),Math.min(1,w/Math.abs(s.r2c(s.range[1])-s.r2c(s.range[0]))));function k(e){return(d(e)+f(e))/2}var A=e.maxHoverDistance-n,t=e.maxSpikeDistance-n,M=z.getDistanceFunction(r,d,f,k);if(z.getClosest(m,M,e),!1===e.index)return[];var E=m[e.index],x=v.line.color,g=(v.marker||{}).color,S=(j.opacity(x)&&v.line.width?e.color=x:j.opacity(g)&&v.boxpoints?e.color=g:e.color=v.fillcolor,e[i+"0"]=s.c2p(E.pos+b.bPos-h,!0),e[i+"1"]=s.c2p(E.pos+b.bPos+p,!0),e[i+"LabelVal"]=void 0!==E.orig_p?E.orig_p:E.pos,i+"Spike"),L=(e.spikeDistance=k(E)*t/A,e[S]=s.c2p(E.pos,!0),{}),C=["med","q1","q3","min","max"];(v.boxmean||(v.meanline||{}).visible)&&C.push("mean"),(v.boxpoints||v.points)&&C.push("lf","uf");for(var O=0;O<C.length;O++){var D,I,R,P=C[O];P in E&&!(E[P]in L)&&(L[E[P]]=!0,D=E[P],I=l.c2p(D,!0),(R=F.extendFlat({},e)).attr=P,R[o+"0"]=R[o+"1"]=I,R[o+"LabelVal"]=D,R[o+"Label"]=(b.labels?b.labels[P]+" ":"")+N.hoverLabelText(l,D,v[o+"hoverformat"]),R.hoverOnBox=!0,"mean"===P&&"sd"in E&&"sd"===v.boxmean&&(R[o+"err"]=E.sd),e.name="",e.spikeDistance=void 0,e[S]=void 0,R.hovertemplate=!1,_.push(R))}return _}function l(e,t,n){for(var r=e.cd,a=e.xa,i=e.ya,o=r[0].trace,s=a.c2p(t),l=i.c2p(n),c=z.quadrature(function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(a.c2p(e.x)-s)-t,1-3/t)},function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(i.c2p(e.y)-l)-t,1-3/t)}),u=!1,d=0;d<r.length;d++)for(var f=r[d],p=0;p<(f.pts||[]).length;p++){var h,m=c(h=f.pts[p]);m<=e.distance&&(e.distance=m,u=[d,p])}if(!u)return!1;h=(f=r[u[0]]).pts[u[1]];var g,t=a.c2p(h.x,!0),n=i.c2p(h.y,!0),y=h.mrc||1,t=F.extendFlat({},e,{index:h.i,color:(o.marker||{}).color,name:o.name,x0:t-y,x1:t+y,y0:n-y,y1:n+y,spikeDistance:e.distance,hovertemplate:o.hovertemplate}),n=f.orig_p,y=void 0!==n?n:f.pos,n=("h"===o.orientation?(g=i,t.xLabelVal=h.x,t.yLabelVal=y):(g=a,t.xLabelVal=y,t.yLabelVal=h.y),g._id.charAt(0));return t[n+"Spike"]=g.c2p(f.pos,!0),v(h,o,t),t}t.exports={hoverPoints:function(e,t,n,r){var a,i=e.cd[0].trace.hoveron,o=[];return-1!==i.indexOf("boxes")&&(o=o.concat(s(e,t,n,r))),-1!==i.indexOf("points")&&(a=l(e,t,n)),"closest"===r?a?[a]:o:(a&&o.push(a),o)},hoverOnBoxes:s,hoverOnPoints:l}},{"../../components/color":157,"../../components/fx":197,"../../lib":287,"../../plots/cartesian/axes":334}],411:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults").supplyLayoutDefaults,calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"box",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":348,"./attributes":405,"./calc":406,"./cross_trace_calc":407,"./defaults":408,"./event_data":409,"./hover":410,"./layout_attributes":412,"./layout_defaults":413,"./plot":414,"./select":415,"./style":416}],412:[function(e,t,n){"use strict";t.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],413:[function(e,t,n){"use strict";var c=e("../../registry"),a=e("../../lib"),i=e("./layout_attributes");function o(e,t,n,r,a){for(var i=a+"Layout",o=!1,s=0;s<n.length;s++){var l=n[s];if(c.traceIs(l,i)){o=!0;break}}o&&(r(a+"mode"),r(a+"gap"),r(a+"groupgap"))}t.exports={supplyLayoutDefaults:function(n,r,e){o(0,0,e,function(e,t){a.coerce(n,r,i,e,t)},"box")},_supply:o}},{"../../lib":287,"../../registry":378,"./layout_attributes":412}],414:[function(e,t,n){"use strict";var E=e("@plotly/d3"),S=e("../../lib"),a=e("../../components/drawing"),x=5,_=.01;function s(e,t,h,n){var m,g="h"===h.orientation,y=t.val,v=t.pos,b=!!v.rangebreaks,x=n.bPos,_=n.wdPos||0,w=n.bPosPxOffset||0,T=h.whiskerwidth||0,k=h.notched||!1,A=k?1-2*h.notchwidth:1,M=Array.isArray(n.bdPos)?(m=n.bdPos[0],n.bdPos[1]):(m=n.bdPos,n.bdPos),t=e.selectAll("path.box").data("violin"!==h.type||h.box.visible?S.identity:[]);t.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),t.exit().remove(),t.each(function(e){if(e.empty)return"M0,0Z";var t=v.c2l(e.pos+x,!0),n=v.l2p(t-m)+w,r=v.l2p(t+M)+w,a=b?(n+r)/2:v.l2p(t)+w,i=h.whiskerwidth,o=b?n*i+(1-i)*a:v.l2p(t-_)+w,i=b?r*i+(1-i)*a:v.l2p(t+_)+w,s=v.l2p(t-m*A)+w,t=v.l2p(t+M*A)+w,l=y.c2p(e.q1,!0),c=y.c2p(e.q3,!0),u=S.constrain(y.c2p(e.med,!0),Math.min(l,c)+1,Math.max(l,c)-1),d=void 0===e.lf||!1===h.boxpoints,f=y.c2p(d?e.min:e.lf,!0),d=y.c2p(d?e.max:e.uf,!0),p=y.c2p(e.ln,!0),e=y.c2p(e.un,!0);g?E.select(this).attr("d","M"+u+","+s+"V"+t+"M"+l+","+n+"V"+r+(k?"H"+p+"L"+u+","+t+"L"+e+","+r:"")+"H"+c+"V"+n+(k?"H"+e+"L"+u+","+s+"L"+p+","+n:"")+"ZM"+l+","+a+"H"+f+"M"+c+","+a+"H"+d+(0===T?"":"M"+f+","+o+"V"+i+"M"+d+","+o+"V"+i)):E.select(this).attr("d","M"+s+","+u+"H"+t+"M"+n+","+l+"H"+r+(k?"V"+p+"L"+t+","+u+"L"+r+","+e:"")+"V"+c+"H"+n+(k?"V"+e+"L"+s+","+u+"L"+n+","+p:"")+"ZM"+a+","+l+"V"+f+"M"+a+","+c+"V"+d+(0===T?"":"M"+o+","+f+"H"+i+"M"+o+","+d+"H"+i))})}function l(e,t,g,n){var r=t.x,t=t.y,y=n.bdPos,v=n.bPos,b=g.boxpoints||g.points,e=(S.seedPseudoRandom(),e.selectAll("g.points").data(b?function(e){return e.forEach(function(e){e.t=n,e.trace=g}),e}:[])),e=(e.enter().append("g").attr("class","points"),e.exit().remove(),e.selectAll("path").data(function(e){var t,n,r=e.pts2,a=Math.max((e.max-e.min)/10,e.q3-e.q1),i=1e-9*a,o=a*_,s=[],l=0;if(g.jitter){if(0===a)for(l=1,s=new Array(r.length),t=0;t<r.length;t++)s[t]=1;else for(t=0;t<r.length;t++){var c=Math.max(0,t-x),u=r[c].v,d=Math.min(r.length-1,t+x),f=r[d].v,d=("all"!==b&&(r[t].v<e.lf?f=Math.min(f,e.lf):u=Math.max(u,e.uf)),Math.sqrt(o*(d-c)/(f-u+i))||0),d=S.constrain(Math.abs(d),0,1);s.push(d),l=Math.max(d,l)}n=2*g.jitter/(l||1)}for(t=0;t<r.length;t++){var p=r[t],h=p.v,m=g.jitter?n*s[t]*(S.pseudoRandom()-.5):0,m=e.pos+v+y*(g.pointpos+m);"h"===g.orientation?(p.y=m,p.x=h):(p.x=m,p.y=h),"suspectedoutliers"===b&&h<e.uo&&h>e.lo&&(p.so=!0)}return r}));e.enter().append("path").classed("point",!0),e.exit().remove(),e.call(a.translatePoints,r,t)}function c(e,t,o,n){var s,l=t.val,c=t.pos,u=!!c.rangebreaks,d=n.bPos,f=n.bPosPxOffset||0,p=o.boxmean||(o.meanline||{}).visible,h=Array.isArray(n.bdPos)?(s=n.bdPos[0],n.bdPos[1]):(s=n.bdPos,n.bdPos),t=e.selectAll("path.mean").data("box"===o.type&&o.boxmean||"violin"===o.type&&o.box.visible&&o.meanline.visible?S.identity:[]);t.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),t.exit().remove(),t.each(function(e){var t=c.c2l(e.pos+d,!0),n=c.l2p(t-s)+f,r=c.l2p(t+h)+f,t=u?(n+r)/2:c.l2p(t)+f,a=l.c2p(e.mean,!0),i=l.c2p(e.mean-e.sd,!0),e=l.c2p(e.mean+e.sd,!0);"h"===o.orientation?E.select(this).attr("d","M"+a+","+n+"V"+r+("sd"===p?"m0,0L"+i+","+t+"L"+a+","+n+"L"+e+","+t+"Z":"")):E.select(this).attr("d","M"+n+","+a+"H"+r+("sd"===p?"m0,0L"+t+","+i+"L"+n+","+a+"L"+t+","+e+"Z":""))})}t.exports={plot:function(e,t,n,r){var i=t.xaxis,o=t.yaxis;S.makeTraceGroups(r,n,"trace boxes").each(function(e){var t,n,r=E.select(this),e=e[0],a=e.t,e=e.trace;a.wdPos=a.bdPos*e.whiskerwidth,!0!==e.visible||a.empty?r.remove():(n="h"===e.orientation?(t=o,i):(t=i,o),s(r,{pos:t,val:n},e,a),l(r,{x:i,y:o},e,a),c(r,{pos:t,val:n},e,a))})},plotBoxAndWhiskers:s,plotPoints:l,plotBoxMean:c}},{"../../components/drawing":179,"../../lib":287,"@plotly/d3":20}],415:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,a=e.cd,i=e.xaxis,o=e.yaxis,s=[];if(!1===t)for(n=0;n<a.length;n++)for(r=0;r<(a[n].pts||[]).length;r++)a[n].pts[r].selected=0;else for(n=0;n<a.length;n++)for(r=0;r<(a[n].pts||[]).length;r++){var l=a[n].pts[r],c=i.c2p(l.x),u=o.c2p(l.y);t.contains([c,u],null,l.i,e)?(s.push({pointNumber:l.i,x:i.c2d(l.x),y:o.c2d(l.y)}),l.selected=1):l.selected=0}return s}},{}],416:[function(e,t,n){"use strict";var o=e("@plotly/d3"),s=e("../../components/color"),l=e("../../components/drawing");t.exports={style:function(i,e,t){(t=t||o.select(i).selectAll("g.trace.boxes")).style("opacity",function(e){return e[0].trace.opacity}),t.each(function(e){var t=o.select(this),r=e[0].trace,e=r.line.width;function a(e,t,n,r){e.style("stroke-width",t+"px").call(s.stroke,n).call(s.fill,r)}var n=t.selectAll("path.box");"candlestick"===r.type?n.each(function(e){var t,n;e.empty||(a(t=o.select(this),(n=r[e.dir]).line.width,n.line.color,n.fillcolor),t.style("opacity",r.selectedpoints&&!e.selected?.3:1))}):(a(n,e,r.line.color,r.fillcolor),t.selectAll("path.mean").style({"stroke-width":e,"stroke-dasharray":2*e+"px,"+e+"px"}).call(s.stroke,r.line.color),n=t.selectAll("path.point"),l.pointStyle(n,r,i))})},styleOnSelect:function(e,t,n){t=t[0].trace,n=n.selectAll("path.point"),t.selectedpoints?l.selectedPointStyle(n,t):l.pointStyle(n,t,e)}}},{"../../components/color":157,"../../components/drawing":179,"@plotly/d3":20}],417:[function(e,t,n){"use strict";var r=e("../heatmap/attributes"),a=e("../scatter/attributes"),i=e("../../plots/cartesian/axis_format_attributes"),o=i.axisHoverFormat,i=i.descriptionOnlyNumbers,s=e("../../components/colorscale/attributes"),l=e("../../components/drawing/attributes").dash,c=e("../../plots/font_attributes"),u=e("../../lib/extend").extendFlat,e=e("../../constants/filter_ops"),d=e.COMPARISON_OPS2,e=e.INTERVAL_OPS,f=a.line;t.exports=u({z:r.z,x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:a.xperiod0,yperiod0:a.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,text:r.text,hovertext:r.hovertext,transpose:r.transpose,xtype:r.xtype,ytype:r.ytype,xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z",1),hovertemplate:r.hovertemplate,texttemplate:u({},r.texttemplate,{}),textfont:u({},r.textfont,{}),hoverongaps:r.hoverongaps,connectgaps:u({},r.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:c({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:i("contour label")},operation:{valType:"enumerated",values:[].concat(d).concat(e),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:u({},f.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:l,smoothing:u({},f.smoothing,{}),editType:"plot"}},s("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":164,"../../components/drawing/attributes":178,"../../constants/filter_ops":265,"../../lib/extend":281,"../../plots/cartesian/axis_format_attributes":337,"../../plots/font_attributes":365,"../heatmap/attributes":439,"../scatter/attributes":500}],418:[function(e,t,n){"use strict";var s=e("../../components/colorscale"),l=e("../heatmap/calc"),c=e("./set_contours"),u=e("./end_plus");t.exports=function(e,t){var n,r=l(e,t),a=r[0].z,i=(c(t,a),t.contours),o=s.extractOpts(t);return o="heatmap"===i.coloring&&o.auto&&!1===t.autocontour?(o=i.start,n=u(i),i=i.size||1,n=Math.floor((n-o)/i)+1,isFinite(i)||(n=i=1),[o=o-i/2,o+n*i]):a,s.calc(e,t,{vals:o,cLetter:"z"}),r}},{"../../components/colorscale":169,"../heatmap/calc":440,"./end_plus":428,"./set_contours":436}],419:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e[0],r=n.z;switch(t.type){case"levels":for(var a=Math.min(r[0][0],r[0][1]),i=0;i<e.length;i++){var o=e[i];o.prefixBoundary=!o.edgepaths.length&&(a>o.level||o.starts.length&&a===o.level)}break;case"constraint":if(n.prefixBoundary=!1,n.edgepaths.length)return;var s=n.x.length,l=n.y.length,c=-1/0,u=1/0;for(i=0;i<l;i++)u=Math.min(u,r[i][0]),u=Math.min(u,r[i][s-1]),c=Math.max(c,r[i][0]),c=Math.max(c,r[i][s-1]);for(i=1;i<s-1;i++)u=Math.min(u,r[0][i]),u=Math.min(u,r[l-1][i]),c=Math.max(c,r[0][i]),c=Math.max(c,r[l-1][i]);var d,f,p=t.value;switch(t._operation){case">":c<p&&(n.prefixBoundary=!0);break;case"<":(p<u||n.starts.length&&p===u)&&(n.prefixBoundary=!0);break;case"[]":d=Math.min(p[0],p[1]),((f=Math.max(p[0],p[1]))<u||c<d||n.starts.length&&f===u)&&(n.prefixBoundary=!0);break;case"][":d=Math.min(p[0],p[1]),f=Math.max(p[0],p[1]),d<u&&c<f&&(n.prefixBoundary=!0)}}}},{}],420:[function(e,t,n){"use strict";var l=e("../../components/colorscale"),c=e("./make_color_map"),u=e("./end_plus");t.exports={min:"zmin",max:"zmax",calc:function(e,t,n){var r=t.contours,a=t.line,i=r.size||1,o=r.coloring,s=c(t,{isColorbar:!0});"heatmap"===o?(t=l.extractOpts(t),n._fillgradient=t.reversescale?l.flipScale(t.colorscale):t.colorscale,n._zrange=[t.min,t.max]):"fill"===o&&(n._fillcolor=s),n._line={color:"lines"===o?s:a.color,width:!1!==r.showlines?a.width:0,dash:a.dash},n._levels={start:r.start,end:u(r),size:i}}}},{"../../components/colorscale":169,"./end_plus":428,"./make_color_map":433}],421:[function(e,t,n){"use strict";t.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],422:[function(e,t,n){"use strict";var h=e("fast-isnumeric"),m=e("./label_defaults"),r=e("../../components/color"),g=r.addOpacity,y=r.opacity,r=e("../../constants/filter_ops"),v=r.CONSTRAINT_REDUCTION,b=r.COMPARISON_OPS2;t.exports=function(e,t,n,r,a,i){var o,s,l,c,u,d,f=t.contours,p=n("contours.operation");f._operation=v[p],l=n,c=f,-1===b.indexOf(c.operation)?(l("contours.value",[0,1]),Array.isArray(c.value)?2<c.value.length?c.value=c.value.slice(2):0===c.length?c.value=[0,1]:c.length<2?(u=parseFloat(c.value[0]),c.value=[u,u+1]):c.value=[parseFloat(c.value[0]),parseFloat(c.value[1])]:h(c.value)&&(u=parseFloat(c.value),c.value=[u,u+1])):(l("contours.value",0),h(c.value)||(Array.isArray(c.value)?c.value=parseFloat(c.value[0]):c.value=0)),"="===p?o=f.showlines=!0:(o=n("contours.showlines"),s=n("fillcolor",g((e.line||{}).color||a,.5))),o&&(d=n("line.color",s&&y(s)?g(t.fillcolor,1):a),n("line.width",2),n("line.dash")),n("line.smoothing"),m(n,r,d,i)}},{"../../components/color":157,"../../constants/filter_ops":265,"./label_defaults":432,"fast-isnumeric":33}],423:[function(e,t,n){"use strict";var i=e("../../constants/filter_ops"),o=e("fast-isnumeric");function r(e,t){var n,r=Array.isArray(t);function a(e){return o(e)?+e:null}return-1!==i.COMPARISON_OPS2.indexOf(e)?n=a(r?t[0]:t):-1!==i.INTERVAL_OPS.indexOf(e)?n=r?[a(t[0]),a(t[1])]:[a(t),a(t)]:-1!==i.SET_OPS.indexOf(e)&&(n=r?t.map(a):[a(t)]),n}function a(n){return function(e){e=r(n,e);var t=Math.min(e[0],e[1]),e=Math.max(e[0],e[1]);return{start:t,end:e,size:e-t}}}function s(t){return function(e){return{start:e=r(t,e),end:1/0,size:1/0}}}t.exports={"[]":a("[]"),"][":a("]["),">":s(">"),"<":s("<"),"=":s("=")}},{"../../constants/filter_ops":265,"fast-isnumeric":33}],424:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var a=r("contours.start"),r=r("contours.end"),a=!1===a||!1===r,r=n("contours.size"),a=a?t.autocontour=!0:n("autocontour",!1);!a&&r||n("ncontours")}},{}],425:[function(e,t,n){"use strict";var l=e("../../lib");function c(e){return l.extendFlat({},e,{edgepaths:l.extendDeep([],e.edgepaths),paths:l.extendDeep([],e.paths),starts:l.extendDeep([],e.starts)})}t.exports=function(e,t){var n,r,a,i=function(e){return e.reverse()},o=function(e){return e};switch(t){case"=":case"<":return e;case">":for(1!==e.length&&l.warn("Contour data invalid for the specified inequality operation."),r=e[0],n=0;n<r.edgepaths.length;n++)r.edgepaths[n]=i(r.edgepaths[n]);for(n=0;n<r.paths.length;n++)r.paths[n]=i(r.paths[n]);for(n=0;n<r.starts.length;n++)r.starts[n]=i(r.starts[n]);return e;case"][":var s=i,i=o,o=s;case"[]":for(2!==e.length&&l.warn("Contour data invalid for the specified inequality range operation."),r=c(e[0]),a=c(e[1]),n=0;n<r.edgepaths.length;n++)r.edgepaths[n]=i(r.edgepaths[n]);for(n=0;n<r.paths.length;n++)r.paths[n]=i(r.paths[n]);for(n=0;n<r.starts.length;n++)r.starts[n]=i(r.starts[n]);for(;a.edgepaths.length;)r.edgepaths.push(o(a.edgepaths.shift()));for(;a.paths.length;)r.paths.push(o(a.paths.shift()));for(;a.starts.length;)r.starts.push(o(a.starts.shift()));return[r]}}},{"../../lib":287}],426:[function(e,t,n){"use strict";var o=e("../../lib"),s=e("../heatmap/xyz_defaults"),l=e("../scatter/period_defaults"),c=e("./constraint_defaults"),u=e("./contours_defaults"),d=e("./style_defaults"),f=e("../heatmap/label_defaults"),p=e("./attributes");t.exports=function(n,r,e,t){function a(e,t){return o.coerce(n,r,p,e,t)}var i;s(n,r,a,t)?(l(n,r,t,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hoverongaps"),a("hovertemplate"),i="constraint"===a("contours.type"),a("connectgaps",o.isArray1D(r.z)),i?c(n,r,a,t,e):(u(n,r,a,function(e){return o.coerce2(n,r,p,e)}),d(n,r,a,t)),r.contours&&"heatmap"===r.contours.coloring&&f(a,t)):r.visible=!1}},{"../../lib":287,"../heatmap/label_defaults":449,"../heatmap/xyz_defaults":454,"../scatter/period_defaults":520,"./attributes":417,"./constraint_defaults":422,"./contours_defaults":424,"./style_defaults":438}],427:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("./constraint_mapping"),f=e("./end_plus");t.exports=function(e,t,n){for(var r="constraint"===e.type?d[e._operation](e.value):e,a=r.size,i=[],o=f(r),s=n.trace._carpetTrace,l=s?{xaxis:s.aaxis,yaxis:s.baxis,x:n.a,y:n.b}:{xaxis:t.xaxis,yaxis:t.yaxis,x:n.x,y:n.y},c=r.start;c<o;c+=a)if(i.push(u.extendFlat({level:c,crossings:{},starts:[],edgepaths:[],paths:[],z:n.z,smoothing:n.trace.line.smoothing},l)),1e3<i.length){u.warn("Too many contours, clipping at 1000",e);break}return i}},{"../../lib":287,"./constraint_mapping":423,"./end_plus":428}],428:[function(e,t,n){"use strict";t.exports=function(e){return e.end+e.size/1e6}},{}],429:[function(e,t,n){"use strict";var N=e("../../lib"),F=e("./constants");function z(e,t,n,r){return Math.abs(e[0]-t[0])<n&&Math.abs(e[1]-t[1])<r}function s(e,t,n,r,a){for(var i=t.join(","),o=e.crossings[i],s=function(e,t,n){var r=0,a=0;20<e&&t?208===e||1114===e?r=0===n[0]?1:-1:a=0===n[1]?1:-1:-1!==F.BOTTOMSTART.indexOf(e)?a=1:-1!==F.LEFTSTART.indexOf(e)?r=1:-1!==F.TOPSTART.indexOf(e)?a=-1:r=-1;return[r,a]}(o,n,t),l=[j(e,t,[-s[0],-s[1]])],c=e.z.length,u=e.z[0].length,d=t.slice(),f=s.slice(),p=0;p<1e4;p++){if(20<o?(o=F.CHOOSESADDLE[o][(s[0]||s[1])<0?0:1],e.crossings[i]=F.SADDLEREMAINDER[o]):delete e.crossings[i],!(s=F.NEWDELTA[o])){N.log("Found bad marching index:",o,t,e.level);break}l.push(j(e,t,s)),t[0]+=s[0],t[1]+=s[1],i=t.join(","),z(l[l.length-1],l[l.length-2],r,a)&&l.pop();var h=s[0]&&(t[0]<0||t[0]>u-2)||s[1]&&(t[1]<0||t[1]>c-2);if(t[0]===d[0]&&t[1]===d[1]&&s[0]===f[0]&&s[1]===f[1]||n&&h)break;o=e.crossings[i]}1e4===p&&N.log("Infinite loop in contour?");var m,g,y,v,b,x,_,w,T,k,A=z(l[0],l[l.length-1],r,a),M=0,E=.2*e.smoothing,S=[],L=0;for(p=1;p<l.length;p++)w=l[p],T=l[p-1],k=void 0,k=w[2]-T[2],w=w[3]-T[3],M+=T=Math.sqrt(k*k+w*w),S.push(T);var C=M/S.length*E;function O(e){return l[e%l.length]}for(p=l.length-2;L<=p;p--)if((m=S[p])<C){for(y=0,g=p-1;L<=g&&m+S[g]<C;g--)m+=S[g];if(A&&p===l.length-2)for(y=0;y<g&&m+S[y]<C;y++)m+=S[y];v=p-g+y+1,b=Math.floor((p+g+y+2)/2),v=A||p!==l.length-2?A||-1!==g?v%2?O(b):[(O(b)[0]+O(b+1)[0])/2,(O(b)[1]+O(b+1)[1])/2]:l[0]:l[l.length-1],l.splice(g+1,p-g+1,v),p=g+1,y&&(L=y),A&&(p===l.length-2?l[y]=l[l.length-1]:0===p&&(l[l.length-1]=l[0]))}for(l.splice(0,L),p=0;p<l.length;p++)l[p].length=2;if(!(l.length<2))if(A)l.pop(),e.paths.push(l);else{n||N.log("Unclosed interior contour?",e.level,d.join(","),l.join("L"));for(var D=!1,I=0;I<e.edgepaths.length;I++)if(x=e.edgepaths[I],!D&&z(x[0],l[l.length-1],r,a)){l.pop();for(var D=!0,R=!1,P=0;P<e.edgepaths.length;P++)if(z((_=e.edgepaths[P])[_.length-1],l[0],r,a)){R=!0,l.shift(),e.edgepaths.splice(I,1),P===I?e.paths.push(l.concat(_)):(I<P&&P--,e.edgepaths[P]=_.concat(l,x));break}R||(e.edgepaths[I]=l.concat(x))}for(I=0;I<e.edgepaths.length&&!D;I++)z((x=e.edgepaths[I])[x.length-1],l[0],r,a)&&(l.shift(),e.edgepaths[I]=x.concat(l),D=!0);D||e.edgepaths.push(l)}}function j(e,t,n){var r,a=t[0]+Math.max(n[0],0),t=t[1]+Math.max(n[1],0),i=e.z[t][a],o=e.xaxis,s=e.yaxis;return n[1]?(r=(1!=(n=(e.level-i)/(e.z[t][a+1]-i))?(1-n)*o.c2l(e.x[a]):0)+(0!=n?n*o.c2l(e.x[a+1]):0),[o.c2p(o.l2c(r),!0),s.c2p(e.y[t],!0),a+n,t]):(n=(1!=(r=(e.level-i)/(e.z[t+1][a]-i))?(1-r)*s.c2l(e.y[t]):0)+(0!=r?r*s.c2l(e.y[t+1]):0),[o.c2p(e.x[a],!0),s.c2p(s.l2c(n),!0),a,t+r])}t.exports=function(e,t,n){var r,a,i,o;for(t=t||.01,n=n||.01,a=0;a<e.length;a++){for(i=e[a],o=0;o<i.starts.length;o++)s(i,i.starts[o],"edge",t,n);for(r=0;Object.keys(i.crossings).length&&r<1e4;)r++,s(i,Object.keys(i.crossings)[0].split(",").map(Number),void 0,t,n);1e4===r&&N.log("Infinite loop in contour?")}}},{"../../lib":287,"./constants":421}],430:[function(e,t,n){"use strict";var i=e("../../components/color"),o=e("../heatmap/hover");t.exports=function(e,t,n,r,a){(a=a||{}).isContour=!0;e=o(e,t,n,r,a);return e&&e.forEach(function(e){var t=e.trace;"constraint"===t.contours.type&&(t.fillcolor&&i.opacity(t.fillcolor)?e.color=i.addOpacity(t.fillcolor,1):t.contours.showlines&&i.opacity(t.line.color)&&(e.color=i.addOpacity(t.line.color,1)))}),e}},{"../../components/color":157,"../heatmap/hover":446}],431:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot").plot,style:e("./style"),colorbar:e("./colorbar"),hoverPoints:e("./hover"),moduleType:"trace",name:"contour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":348,"./attributes":417,"./calc":418,"./colorbar":420,"./defaults":426,"./hover":430,"./plot":435,"./style":437}],432:[function(e,t,n){"use strict";var a=e("../../lib");t.exports=function(e,t,n,r){r=r||{},e("contours.showlabels")&&(t=t.font,a.coerceFont(e,"contours.labelfont",{family:t.family,size:t.size,color:n}),e("contours.labelformat")),!1!==r.hasHover&&e("zhoverformat")}},{"../../lib":287}],433:[function(e,t,n){"use strict";var m=e("@plotly/d3"),g=e("../../components/colorscale"),y=e("./end_plus");t.exports=function(e){var t,n=e.contours,r=n.start,a=y(n),i=n.size||1,o=Math.floor((a-r)/i)+1,s="lines"===n.coloring?0:1,a=g.extractOpts(e),l=(isFinite(i)||(o=i=1),a.reversescale?g.flipScale(a.colorscale):a.colorscale),c=l.length,u=new Array(c),d=new Array(c);if("heatmap"===n.coloring){for(var f=a.min,p=a.max,h=0;h<c;h++)t=l[h],u[h]=t[0]*(p-f)+f,d[h]=t[1];e=m.extent([f,p,n.start,n.start+i*(o-1)]),a=e[f<p?0:1],n=e[f<p?1:0];a!==f&&(u.splice(0,0,a),d.splice(0,0,d[0])),n!==p&&(u.push(n),d.push(d[d.length-1]))}else for(h=0;h<c;h++)t=l[h],u[h]=(t[0]*(o+s-1)-s/2)*i+r,d[h]=t[1];return g.makeColorScaleFunc({domain:u,range:d},{noNumericCheck:!0})}},{"../../components/colorscale":169,"./end_plus":428,"@plotly/d3":20}],434:[function(e,t,n){"use strict";var g=e("./constants");t.exports=function(e){for(var t,n,r,a,i,o,s,l,c,u,d=e[0].z,f=d.length,p=d[0].length,h=2===f||2===p,m=0;m<f-1;m++)for(r=[],0===m&&(r=r.concat(g.BOTTOMSTART)),m===f-2&&(r=r.concat(g.TOPSTART)),t=0;t<p-1;t++)for(n=r.slice(),0===t&&(n=n.concat(g.LEFTSTART)),t===p-2&&(n=n.concat(g.RIGHTSTART)),a=t+","+m,i=[[d[m][t],d[m][t+1]],[d[m+1][t],d[m+1][t+1]]],s=0;s<e.length;s++)o=e[s],l=o.level,u=void 0,(c=5!=(u=((c=i)[0][0]>l?0:1)+(c[0][1]>l?0:2)+(c[1][1]>l?0:4)+(c[1][0]>l?0:8))&&10!=u?15==u?0:u:(c[0][0]+c[0][1]+c[1][0]+c[1][1])/4<l?5==u?713:1114:5==u?104:208)&&(o.crossings[a]=c,-1!==n.indexOf(c)&&(o.starts.push([t,m]),h&&-1!==n.indexOf(c,n.indexOf(c)+1)&&o.starts.push([t,m])))}},{"./constants":421}],435:[function(e,t,I){"use strict";var R=e("@plotly/d3"),P=e("../../lib"),N=e("../../components/drawing"),a=e("../../components/colorscale"),s=e("../../lib/svg_text_utils"),i=e("../../plots/cartesian/axes"),o=e("../../plots/cartesian/set_convert"),F=e("../heatmap/plot"),z=e("./make_crossings"),j=e("./find_all_paths"),q=e("./empty_pathinfo"),H=e("./convert_to_constraints"),B=e("./close_boundaries"),U=e("./constants"),b=U.LABELOPTIMIZER;function V(e,t){var n,r,a,i,o,s,l,c="",u=0,d=e.edgepaths.map(function(e,t){return t}),f=!0;function p(e){return Math.abs(e[0]-t[2][0])<.01}for(;d.length;){for(s=N.smoothopen(e.edgepaths[u],e.smoothing),c+=f?s:s.replace(/^M/,"L"),d.splice(d.indexOf(u),1),n=e.edgepaths[u][e.edgepaths[u].length-1],i=-1,a=0;a<4;a++){if(!n){P.log("Missing end?",u,e);break}for(l=n,Math.abs(l[1]-t[0][1])<.01&&!p(n)?r=t[1]:(l=n,Math.abs(l[0]-t[0][0])<.01?r=t[0]:(l=n,Math.abs(l[1]-t[2][1])<.01?r=t[3]:p(n)&&(r=t[2]))),o=0;o<e.edgepaths.length;o++){var h=e.edgepaths[o][0];Math.abs(n[0]-r[0])<.01?Math.abs(n[0]-h[0])<.01&&0<=(h[1]-n[1])*(r[1]-h[1])&&(r=h,i=o):Math.abs(n[1]-r[1])<.01?Math.abs(n[1]-h[1])<.01&&0<=(h[0]-n[0])*(r[0]-h[0])&&(r=h,i=o):P.log("endpt to newendpt is not vert. or horz.",n,r,h)}if(n=r,0<=i)break;c+="L"+r}if(i===e.edgepaths.length){P.log("unclosed perimeter path");break}u=i,(f=-1===d.indexOf(u))&&(u=d[0],c+="Z")}for(u=0;u<e.paths.length;u++)c+=N.smoothclosed(e.paths[u],e.smoothing);return c}I.plot=function(L,C,e,t){var O=C.xaxis,D=C.yaxis;P.makeTraceGroups(t,e,"contour").each(function(e){var i,o,t,n,r,s,a,l,c=R.select(this),u=e[0],d=u.trace,f=u.x,p=u.y,d=d.contours,h=q(d,C,u),m=P.ensureSingle(c,"g","heatmapcoloring"),g=[],e=("heatmap"===d.coloring&&(g=[e]),F(L,C,g,m),z(h),j(h),O.c2p(f[0],!0)),g=O.c2p(f[f.length-1],!0),m=D.c2p(p[0],!0),f=D.c2p(p[p.length-1],!0),p=[[e,f],[g,f],[g,m],[e,m]],f=h,g=("constraint"===d.type&&(f=H(h,d._operation)),c),e=p,m=d,m=((g=P.ensureSingle(g,"g","contourbg").selectAll("path").data("fill"===m.coloring?[0]:[])).enter().append("path"),g.exit().remove(),g.attr("d","M"+e.join("L")+"Z").style("stroke","none"),c),g=f,y=p,e=d,f="fill"===e.coloring||"constraint"===e.type&&"="!==e._operation,v="M"+y.join("L")+"Z",m=(f&&B(g,e),(e=P.ensureSingle(m,"g","contourfill").selectAll("path").data(f?g:[])).enter().append("path"),e.exit().remove(),e.each(function(e){e=(e.prefixBoundary?v:"")+V(e,y);e?R.select(this).attr("d",e).style("stroke","none"):R.select(this).remove()}),c),f=h,b=L,g=u,e=d,h=P.ensureSingle(m,"g","contourlines"),d=!1!==e.showlines,x=e.showlabels,_=d&&x,w=I.createLines(h,d||x,f),h=I.createLineClip(h,_,b,g.trace.uid),T=((m=m.selectAll("g.contourlabels").data(x?[0]:[])).exit().remove(),m.enter().append("g").classed("contourlabels",!0),x&&(i=[],o=[],P.clearLocationCache(),t=I.labelFormatter(b,g),n=N.tester.append("text").attr("data-notex",1).call(N.font,e.labelfont),e=f[0].xaxis,a=f[0].yaxis,S=e._length,r=a._length,k=e.range,M=a.range,A=P.aggNums(Math.min,null,g.x),E=P.aggNums(Math.max,null,g.x),T=P.aggNums(Math.min,null,g.y),g=P.aggNums(Math.max,null,g.y),A=Math.max(e.c2p(A,!0),0),e=Math.min(e.c2p(E,!0),S),E=Math.max(a.c2p(g,!0),0),g=Math.min(a.c2p(T,!0),r),s={},k[0]<k[1]?(s.left=A,s.right=e):(s.left=e,s.right=A),M[0]<M[1]?(s.top=E,s.bottom=g):(s.top=g,s.bottom=E),s.middle=(s.top+s.bottom)/2,s.center=(s.left+s.right)/2,i.push([[s.left,s.top],[s.right,s.top],[s.right,s.bottom],[s.left,s.bottom]]),a=Math.sqrt(S*S+r*r),l=U.LABELDISTANCE*a/Math.max(1,f.length/U.LABELINCREASE),w.each(function(e){var a=I.calcTextOpts(e.level,t,n,b);R.select(this).selectAll("path").each(function(){var e=P.getVisibleSegment(this,s,a.height/2);if(e&&!(e.len<(a.width+a.height)*U.LABELMIN))for(var t=Math.min(Math.ceil(e.len/l),U.LABELMAX),n=0;n<t;n++){var r=I.findBestTextLocation(this,e,a,o,s);if(!r)break;I.addLabelData(r,a,o,i)}})}),n.remove(),I.drawLabels(m,o,b,h,_?i:null)),x&&!d&&w.remove(),c),k=C,e=L,A=u,M=p,g=A.trace,E=e._fullLayout._clips,S="clip"+g.uid;(E=E.selectAll("#"+S).data(g.connectgaps?[]:[0])).enter().append("clipPath").classed("contourclip",!0).attr("id",S),E.exit().remove(),!1===g.connectgaps?(g={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:k.xaxis,yaxis:k.yaxis,x:A.x,y:A.y,z:function(e){var t,n,r=e.trace._emptypoints,a=[],i=e.z.length,o=e.z[0].length,s=[];for(t=0;t<o;t++)s.push(1);for(t=0;t<i;t++)a.push(s.slice());for(t=0;t<r.length;t++)n=r[t],a[n[0]][n[1]]=0;return e.zmask=a}(A),smoothing:0},z([g]),j([g]),B([g],{type:"levels"}),P.ensureSingle(E,"path","").attr("d",(g.prefixBoundary?"M"+M.join("L")+"Z":"")+V(g,M))):S=null,N.setClipUrl(T,S,e)})},I.createLines=function(e,t,n){var r=n[0].smoothing,e=e.selectAll("g.contourlevel").data(t?n:[]);return e.exit().remove(),e.enter().append("g").classed("contourlevel",!0),t&&((n=e.selectAll("path.openline").data(function(e){return e.pedgepaths||e.edgepaths})).exit().remove(),n.enter().append("path").classed("openline",!0),n.attr("d",function(e){return N.smoothopen(e,r)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"),(t=e.selectAll("path.closedline").data(function(e){return e.ppaths||e.paths})).exit().remove(),t.enter().append("path").classed("closedline",!0),t.attr("d",function(e){return N.smoothclosed(e,r)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")),e},I.createLineClip=function(e,t,n,r){r=t?"clipline"+r:null,t=n._fullLayout._clips.selectAll("#"+r).data(t?[0]:[]);return t.exit().remove(),t.enter().append("clipPath").classed("contourlineclip",!0).attr("id",r),N.setClipUrl(e,r,n),t},I.labelFormatter=function(e,t){var e=e._fullLayout,t=t.trace,n=t.contours,r={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};return n.labelformat?(r.tickformat=n.labelformat,o(r,e)):(t=a.extractOpts(t))&&t.colorbar&&t.colorbar._axis?r=t.colorbar._axis:("constraint"===n.type?(t=n.value,Array.isArray(t)?r.range=[t[0],t[t.length-1]]:r.range=[t,t]):(r.range=[n.start,n.end],r.nticks=(n.end-n.start)/n.size),r.range[0]===r.range[1]&&(r.range[1]+=r.range[0]||1),r.nticks||(r.nticks=1e3),o(r,e),i.prepTicks(r),r._tmin=null,r._tmax=null),function(e){return i.tickText(r,e).text}},I.calcTextOpts=function(e,t,n,r){t=t(e),n.text(t).call(s.convertToTspans,r),r=n.node(),n=N.bBox(r,!0);return{text:t,width:n.width,height:n.height,fontSize:+r.style["font-size"].replace("px",""),level:e,dy:(n.top+n.bottom)/2}},I.findBestTextLocation=function(e,t,n,r,a){for(var i,o,s,l,c=n.width,u=t.isClosed?(o=t.len/b.INITIALSEARCHPOINTS,i=t.min+o/2,t.max):(o=(t.len-c)/(b.INITIALSEARCHPOINTS+1),i=t.min+o+c/2,t.max-(o+c)/2),d=1/0,f=0;f<b.ITERATIONS;f++){for(var p=i;p<u;p+=o){var h=P.getTextLocation(e,t.total,p,c),m=function(e,t,n,r){var a=t.width/2,i=t.height/2,o=e.x,s=e.y,e=e.theta,l=Math.cos(e)*a,a=Math.sin(e)*a,c=(o>r.center?r.right-o:o-r.left)/(l+Math.abs(Math.sin(e)*i)),r=(s>r.middle?r.bottom-s:s-r.top)/(Math.abs(a)+Math.cos(e)*i);if(c<1||r<1)return 1/0;for(var u=b.EDGECOST*(1/(c-1)+1/(r-1)),d=(u+=b.ANGLECOST*e*e,o-l),f=s-a,p=o+l,h=s+a,m=0;m<n.length;m++){var g=n[m],y=Math.cos(g.theta)*g.width/2,v=Math.sin(g.theta)*g.width/2,y=2*P.segmentDistance(d,f,p,h,g.x-y,g.y-v,g.x+y,g.y+v)/(t.height+g.height),v=g.level===t.level,g=v?b.SAMELEVELDISTANCE:1;if(y<=g)return 1/0;v=b.NEIGHBORCOST*(v?b.SAMELEVELFACTOR:1);u+=v/(y-g)}return u}(h,n,r,a);m<d&&(d=m,l=h,s=p)}if(d>2*b.MAXCOST)break;f&&(o/=2),u=(i=s-o/2)+1.5*o}if(d<=b.MAXCOST)return l},I.addLabelData=function(e,t,n,r){function a(e,t){return[s+e*u-t*c,l+e*c+t*u]}var i=t.fontSize,o=t.width+i/3,i=Math.max(0,t.height-i/3),s=e.x,l=e.y,e=e.theta,c=Math.sin(e),u=Math.cos(e),d=[a(-o/2,-i/2),a(-o/2,i/2),a(o/2,i/2),a(o/2,-i/2)];n.push({text:t.text,x:s,y:l,dy:t.dy,theta:e,level:t.level,width:o,height:i}),r.push(d)},I.drawLabels=function(e,t,r,n,a){e=e.selectAll("text").data(t,function(e){return e.text+","+e.x+","+e.y+","+e.theta});if(e.exit().remove(),e.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(e){var t=e.x+Math.sin(e.theta)*e.dy,n=e.y-Math.cos(e.theta)*e.dy;R.select(this).text(e.text).attr({x:t,y:n,transform:"rotate("+180*e.theta/Math.PI+" "+t+" "+n+")"}).call(s.convertToTspans,r)}),a){for(var i="",o=0;o<a.length;o++)i+="M"+a[o].join("L")+"Z";P.ensureSingle(n,"path","").attr("d",i)}}},{"../../components/colorscale":169,"../../components/drawing":179,"../../lib":287,"../../lib/svg_text_utils":310,"../../plots/cartesian/axes":334,"../../plots/cartesian/set_convert":356,"../heatmap/plot":451,"./close_boundaries":419,"./constants":421,"./convert_to_constraints":425,"./empty_pathinfo":427,"./find_all_paths":429,"./make_crossings":434,"@plotly/d3":20}],436:[function(e,t,n){"use strict";var i=e("../../plots/cartesian/axes"),o=e("../../lib");function s(e,t,n){var r={type:"linear",range:[e,t]};return i.autoTicks(r,(t-e)/(n||15)),r}t.exports=function(e,t){var n,r,a=e.contours;e.autocontour?(n=e.zmin,r=e.zmax,t=s(n=!e.zauto&&void 0!==n?n:o.aggNums(Math.min,null,t),r=!e.zauto&&void 0!==r?r:o.aggNums(Math.max,null,t),e.ncontours),a.size=t.dtick,a.start=i.tickFirst(t),t.range.reverse(),a.end=i.tickFirst(t),a.start===n&&(a.start+=a.size),a.end===r&&(a.end-=a.size),a.start>a.end&&(a.start=a.end=(a.start+a.end)/2),e._input.contours||(e._input.contours={}),o.extendFlat(e._input.contours,{start:a.start,end:a.end,size:a.size}),e._input.autocontour=!0):"constraint"!==a.type&&(t=a.start,n=a.end,r=e._input.contours,n<t&&(a.start=r.start=n,n=a.end=r.end=t,t=a.start),0<a.size||(t=t===n?1:s(t,n,e.ncontours).dtick,r.size=a.size=t))}},{"../../lib":287,"../../plots/cartesian/axes":334}],437:[function(e,t,n){"use strict";var f=e("@plotly/d3"),p=e("../../components/drawing"),r=e("../heatmap/style"),h=e("./make_color_map");t.exports=function(e){var t=f.select(e).selectAll("g.contour");t.style("opacity",function(e){return e[0].trace.opacity}),t.each(function(e){var t,n=f.select(this),e=e[0].trace,r=e.contours,a=e.line,i=r.size||1,o=r.start,s="constraint"===r.type,l=!s&&"lines"===r.coloring,c=!s&&"fill"===r.coloring,u=l||c?h(e):null,d=(n.selectAll("g.contourlevel").each(function(e){f.select(this).selectAll("path").call(p.lineGroupStyle,a.width,l?u(e.level):a.color,a.dash)}),r.labelfont);n.selectAll("g.contourlabels text").each(function(e){p.font(f.select(this),{family:d.family,size:d.size,color:d.color||(l?u(e.level):a.color)})}),s?n.selectAll("g.contourfill path").style("fill",e.fillcolor):c&&(n.selectAll("g.contourfill path").style("fill",function(e){return void 0===t&&(t=e.level),u(e.level+.5*i)}),void 0===t&&(t=o),n.selectAll("g.contourbg path").style("fill",u(t-.5*i)))}),r(e)}},{"../../components/drawing":179,"../heatmap/style":452,"./make_color_map":433,"@plotly/d3":20}],438:[function(e,t,n){"use strict";var l=e("../../components/colorscale/defaults"),c=e("./label_defaults");t.exports=function(e,t,n,r,a){var i,o=n("contours.coloring"),s="";!1!==(i="fill"===o?n("contours.showlines"):i)&&("lines"!==o&&(s=n("line.color","#000")),n("line.width",.5),n("line.dash")),"none"!==o&&(!0!==e.showlegend&&(t.showlegend=!1),t._dfltShowLegend=!1,l(e,t,r,n,{prefix:"",cLetter:"z"})),n("line.smoothing"),c(n,r,s,a)}},{"../../components/colorscale/defaults":167,"./label_defaults":432}],439:[function(e,t,n){"use strict";var r=e("../scatter/attributes"),a=e("../../plots/attributes"),i=e("../../plots/font_attributes"),o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,s=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../plots/template_attributes").texttemplateAttrs,c=e("../../components/colorscale/attributes"),e=e("../../lib/extend").extendFlat;t.exports=e({z:{valType:"data_array",editType:"calc"},x:e({},r.x,{impliedEdits:{xtype:"array"}}),x0:e({},r.x0,{impliedEdits:{xtype:"scaled"}}),dx:e({},r.dx,{impliedEdits:{xtype:"scaled"}}),y:e({},r.y,{impliedEdits:{ytype:"array"}}),y0:e({},r.y0,{impliedEdits:{ytype:"scaled"}}),dy:e({},r.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:e({},r.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:e({},r.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:e({},r.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:e({},r.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:e({},r.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:e({},r.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z",1),hovertemplate:s(),texttemplate:l({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:i({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:e({},a.showlegend,{dflt:!1})},{transforms:void 0},c("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":164,"../../lib/extend":281,"../../plots/attributes":330,"../../plots/cartesian/axis_format_attributes":337,"../../plots/font_attributes":365,"../../plots/template_attributes":373,"../scatter/attributes":500}],440:[function(e,t,n){"use strict";var L=e("../../registry"),C=e("../../lib"),O=e("../../plots/cartesian/axes"),D=e("../../plots/cartesian/align_period"),I=e("../histogram2d/calc"),R=e("../../components/colorscale/calc"),P=e("./convert_column_xyz"),N=e("./clean_2d_array"),F=e("./interp2d"),z=e("./find_empties"),j=e("./make_bound_array"),q=e("../../constants/numerical").BADNUM;function H(e){for(var t=[],n=e.length,r=0;r<n;r++){var a=e[r];a!==q&&t.push(a)}return t}t.exports=function(e,t){var n,r,a,i,o,s,l,c,u,d=O.getFromId(e,t.xaxis||"x"),f=O.getFromId(e,t.yaxis||"y"),p=L.traceIs(t,"contour"),h=L.traceIs(t,"histogram"),m=L.traceIs(t,"gl2d"),g=p?"best":t.zsmooth;function y(e){g=t._input.zsmooth=t.zsmooth=!1,C.warn('cannot use zsmooth: "fast": '+e)}if(d._minDtick=0,f._minDtick=0,u=h?(T=(c=I(e,t)).orig_x,n=c.x,r=c.x0,a=c.dx,l=c.orig_y,i=c.y,o=c.y0,s=c.dy,c.z):(u=t.z,C.isArray1D(u)?(P(t,d,f,"x","y",["z"]),n=t._x,i=t._y,u=t._z):(T=t.x?d.makeCalcdata(t,"x"):[],l=t.y?f.makeCalcdata(t,"y"):[],n=D(t,d,"x",T).vals,i=D(t,f,"y",l).vals,t._x=n,t._y=i),r=t.x0,a=t.dx,o=t.y0,s=t.dy,N(u,t,d,f)),(d.rangebreaks||f.rangebreaks)&&(u=function(e,t,n){for(var r=[],a=-1,i=0;i<n.length;i++)if(t[i]!==q){r[++a]=[];for(var o=0;o<n[i].length;o++)e[o]!==q&&r[a].push(n[i][o])}return r}(n,i,u),h||(n=H(n),i=H(i),t._x=n,t._y=i)),h||!p&&!t.connectgaps||(t._emptypoints=z(u),F(u,t._emptypoints)),"fast"===g)if("log"===d.type||"log"===f.type)y("log axis found");else if(!h){if(n.length)for(var v=(n[n.length-1]-n[0])/(n.length-1),b=Math.abs(v/100),x=0;x<n.length-1;x++)if(Math.abs(n[x+1]-n[x]-v)>b){y("x scale is not linear");break}if(i.length&&"fast"===g){var _=(i[i.length-1]-i[0])/(i.length-1),w=Math.abs(_/100);for(x=0;x<i.length-1;x++)if(Math.abs(i[x+1]-i[x]-_)>w){y("y scale is not linear");break}}}var T,k=C.maxRowLength(u),A="scaled"===t.xtype?"":n,M=j(t,A,r,a,k,d),E="scaled"===t.ytype?"":i,S=j(t,E,o,s,u.length,f),m=(m||(t._extremes[d._id]=O.findExtremes(d,M),t._extremes[f._id]=O.findExtremes(f,S)),{x:M,y:S,z:u,text:t._text||t.text,hovertext:t._hovertext||t.hovertext});return t.xperiodalignment&&T&&(m.orig_x=T),t.yperiodalignment&&l&&(m.orig_y=l),A&&A.length===M.length-1&&(m.xCenter=A),E&&E.length===S.length-1&&(m.yCenter=E),h&&(m.xRanges=c.xRanges,m.yRanges=c.yRanges,m.pts=c.pts),p||R(e,t,{vals:u,cLetter:"z"}),p&&t.contours&&"heatmap"===t.contours.coloring&&(T={type:"contour"===t.type?"heatmap":"histogram2d",xcalendar:t.xcalendar,ycalendar:t.ycalendar},m.xfill=j(T,A,r,a,k,d),m.yfill=j(T,E,o,s,u.length,f)),[m]}},{"../../components/colorscale/calc":165,"../../constants/numerical":267,"../../lib":287,"../../plots/cartesian/align_period":331,"../../plots/cartesian/axes":334,"../../registry":378,"../histogram2d/calc":469,"./clean_2d_array":441,"./convert_column_xyz":443,"./find_empties":445,"./interp2d":448,"./make_bound_array":450}],441:[function(e,t,n){"use strict";var y=e("fast-isnumeric"),v=e("../../lib"),b=e("../../constants/numerical").BADNUM;t.exports=function(e,a,t,n){var r,i,o,s,l;if(a&&a.transpose){for(g=r=0;g<e.length;g++)r=Math.max(r,e[g].length);if(0===r)return!1;o=function(e){return e.length},s=function(e,t,n){return(e[n]||[])[t]}}else r=e.length,o=function(e,t){return e[t].length},s=function(e,t,n){return(e[t]||[])[n]};function c(t){if(a&&"carpet"!==a.type&&"contourcarpet"!==a.type&&t&&"category"===t.type&&a["_"+t._id.charAt(0)].length){var e=t._id.charAt(0),n={},r=a["_"+e+"CategoryMap"]||a[e];for(g=0;g<r.length;g++)n[r[g]]=g;return function(e){e=n[t._categories[e]];return e+1?e:b}}return v.identity}for(var u,d,f,p=c(t),h=c(n),m=(n&&"category"===n.type&&(r=n._categories.length),new Array(r)),g=0;g<r;g++)for(i=t&&"category"===t.type?t._categories.length:o(e,g),m[g]=new Array(i),l=0;l<i;l++)m[g][l]=function(e){if(y(e))return+e}((u=e,d=h(g),f=p(l),d===b||f===b?b:s(u,d,f)));return m}},{"../../constants/numerical":267,"../../lib":287,"fast-isnumeric":33}],442:[function(e,t,n){"use strict";t.exports={min:"zmin",max:"zmax"}},{}],443:[function(e,t,n){"use strict";var S=e("../../lib"),L=e("../../constants/numerical").BADNUM,C=e("../../plots/cartesian/align_period");t.exports=function(e,t,n,r,a,i){for(var o,s,l=e._length,c=t.makeCalcdata(e,r),u=n.makeCalcdata(e,a),c=C(e,t,r,c).vals,u=C(e,n,a,u).vals,d=e.text,f=void 0!==d&&S.isArray1D(d),p=e.hovertext,h=void 0!==p&&S.isArray1D(p),m=S.distinctVals(c),g=m.vals,y=S.distinctVals(u),v=y.vals,b=[],x=v.length,_=g.length,w=0;w<i.length;w++)b[w]=S.init2dArray(x,_);f&&(o=S.init2dArray(x,_)),h&&(s=S.init2dArray(x,_));var T=S.init2dArray(x,_);for(w=0;w<l;w++)if(c[w]!==L&&u[w]!==L){for(var k=S.findBin(c[w]+m.minDiff/2,g),A=S.findBin(u[w]+y.minDiff/2,v),M=0;M<i.length;M++){var E=e[i[M]];b[M][A][k]=E[w],T[A][k]=w}f&&(o[A][k]=d[w]),h&&(s[A][k]=p[w])}for(e["_"+r]=g,e["_"+a]=v,M=0;M<i.length;M++)e["_"+i[M]]=b[M];f&&(e._text=o),h&&(e._hovertext=s),t&&"category"===t.type&&(e["_"+r+"CategoryMap"]=g.map(function(e){return t._categories[e]})),n&&"category"===n.type&&(e["_"+a+"CategoryMap"]=v.map(function(e){return n._categories[e]})),e._after2before=T}},{"../../constants/numerical":267,"../../lib":287,"../../plots/cartesian/align_period":331}],444:[function(e,t,n){"use strict";var i=e("../../lib"),o=e("./xyz_defaults"),s=e("./label_defaults"),l=e("../scatter/period_defaults"),c=e("./style_defaults"),u=e("../../components/colorscale/defaults"),d=e("./attributes");t.exports=function(n,r,e,t){function a(e,t){return i.coerce(n,r,d,e,t)}o(n,r,a,t)?(l(n,r,t,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),s(a,t),c(n,r,a,t),a("hoverongaps"),a("connectgaps",i.isArray1D(r.z)&&!1!==r.zsmooth),u(n,r,t,a,{prefix:"",cLetter:"z"})):r.visible=!1}},{"../../components/colorscale/defaults":167,"../../lib":287,"../scatter/period_defaults":520,"./attributes":439,"./label_defaults":449,"./style_defaults":453,"./xyz_defaults":454}],445:[function(e,t,n){"use strict";var g=e("../../lib").maxRowLength;t.exports=function(e){for(var t,n,r,a,i,o,s,l=[],c={},u=[],d=e[0],f=[],p=[0,0,0],h=g(e),m=0;m<e.length;m++)for(t=f,f=d,d=e[m+1]||[],n=0;n<h;n++)void 0===f[n]&&((i=(void 0!==f[n-1]?1:0)+(void 0!==f[n+1]?1:0)+(void 0!==t[n]?1:0)+(void 0!==d[n]?1:0))?(0===m&&i++,0===n&&i++,m===e.length-1&&i++,n===f.length-1&&i++,i<4&&(c[[m,n]]=[m,n,i]),l.push([m,n,i])):u.push([m,n]));for(;u.length;){for(s=!(o={}),a=u.length-1;0<=a;a--)(i=((c[[(m=(r=u[a])[0])-1,n=r[1]]]||p)[2]+(c[[m+1,n]]||p)[2]+(c[[m,n-1]]||p)[2]+(c[[m,n+1]]||p)[2])/20)&&(o[r]=[m,n,i],u.splice(a,1),s=!0);if(!s)throw"findEmpties iterated with no new neighbors";for(r in o)c[r]=o[r],l.push(o[r])}return l.sort(function(e,t){return t[2]-e[2]})}},{"../../lib":287}],446:[function(e,t,n){"use strict";var S=e("../../components/fx"),L=e("../../lib"),C=e("../../plots/cartesian/axes"),O=e("../../components/colorscale").extractOpts;t.exports=function(t,e,n,r,a){var i,o,s,l,a=(a=a||{}).isContour,c=t.cd[0],u=c.trace,d=t.xa,f=t.ya,p=c.x,h=c.y,m=c.z,g=c.xCenter,y=c.yCenter,v=c.zmask,b=u.zhoverformat,x=p,_=h;if(!1!==t.index){try{s=Math.round(t.index[1]),l=Math.round(t.index[0])}catch(e){return void L.error("Error hovering on heatmap, pointNumber must be [row,col], found:",t.index)}if(s<0||s>=m[0].length||l<0||l>m.length)return}else{if(0<S.inbox(e-p[0],e-p[p.length-1],0)||0<S.inbox(n-h[0],n-h[h.length-1],0))return;if(a){for(var x=[2*p[0]-p[1]],w=1;w<p.length;w++)x.push((p[w]+p[w-1])/2);for(x.push([2*p[p.length-1]-p[p.length-2]]),_=[2*h[0]-h[1]],w=1;w<h.length;w++)_.push((h[w]+h[w-1])/2);_.push([2*h[h.length-1]-h[h.length-2]])}s=Math.max(0,Math.min(x.length-2,L.findBin(e,x))),l=Math.max(0,Math.min(_.length-2,L.findBin(n,_)))}var T,k,A,e=d.c2p(p[s]),n=d.c2p(p[s+1]),M=f.c2p(h[l]),E=f.c2p(h[l+1]),a=(a?(A=c.orig_x||p,T=c.orig_y||h,n=e,i=A[s],E=M,o=T[l]):(A=c.orig_x||g||p,T=c.orig_y||y||h,i=g?A[s]:(A[s]+A[s+1])/2,o=y?T[l]:(T[l]+T[l+1])/2,d&&"category"===d.type&&(i=p[s]),f&&"category"===f.type&&(o=h[l]),u.zsmooth&&(e=n=d.c2p(i),M=E=f.c2p(o))),m[l][s]);if(void 0!==(a=v&&!v[l][s]?void 0:a)||u.hoverongaps)return Array.isArray(c.hovertext)&&Array.isArray(c.hovertext[l])?k=c.hovertext[l][s]:Array.isArray(c.text)&&Array.isArray(c.text[l])&&(k=c.text[l][s]),g=O(u),A={type:"linear",range:[g.min,g.max],hoverformat:b,_separators:d._separators,_numFormat:d._numFormat},y=C.tickText(A,a,"hover").text,[L.extendFlat(t,{index:u._after2before?u._after2before[l][s]:[l,s],distance:t.maxHoverDistance,spikeDistance:t.maxSpikeDistance,x0:e,x1:n,y0:M,y1:E,xLabelVal:i,yLabelVal:o,zLabelVal:a,zLabel:y,text:k})]}},{"../../components/colorscale":169,"../../components/fx":197,"../../lib":287,"../../plots/cartesian/axes":334}],447:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:e("./colorbar"),style:e("./style"),hoverPoints:e("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":348,"./attributes":439,"./calc":440,"./colorbar":442,"./defaults":444,"./hover":446,"./plot":451,"./style":452}],448:[function(e,t,n){"use strict";var i=e("../../lib"),m=[[-1,0],[1,0],[0,-1],[0,1]];function o(e,t,n){for(var r,a,i,o,s,l,c,u,d,f,p=0,h=0;h<t.length;h++){for(r=(u=t[h])[0],a=u[1],u=e[r][a],i=l=c=0;i<4;i++)(s=e[r+(o=m[i])[0]])&&void 0!==(s=s[a+o[1]])&&(0===c?d=f=s:(d=Math.min(d,s),f=Math.max(f,s)),l++,c+=s);if(0===l)throw"iterateInterp2d order is wrong: no defined neighbors";e[r][a]=c/l,void 0===u?l<4&&(p=1):(e[r][a]=(1+n)*e[r][a]-n*u,d<f&&(p=Math.max(p,Math.abs(e[r][a]-u)/(f-d))))}return p}t.exports=function(e,t){var n,r,a=1;for(o(e,t),n=0;n<t.length&&!(t[n][2]<4);n++);for(t=t.slice(n),n=0;n<100&&.01<a;n++)a=o(e,t,(r=a,.5-.25*Math.min(1,.5*r)));return.01<a&&i.log("interp2d didn't converge quickly",a),e}},{"../../lib":287}],449:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t){e("texttemplate");t=r.extendFlat({},t.font,{color:"auto",size:"auto"});r.coerceFont(e,"textfont",t)}},{"../../lib":287}],450:[function(e,t,n){"use strict";var g=e("../../registry"),y=e("../../lib").isArrayOrTypedArray;t.exports=function(e,t,n,r,a,i){var o,s=[],l=g.traceIs(e,"contour"),c=g.traceIs(e,"histogram"),u=g.traceIs(e,"gl2d");if(y(t)&&1<t.length&&!c&&"category"!==i.type){var d=t.length;if(!(d<=a))return l?t.slice(0,a):t.slice(0,a+1);if(l||u)s=t.slice(0,a);else if(1===a)s=[t[0]-.5,t[0]+.5];else{for(s=[1.5*t[0]-.5*t[1]],h=1;h<d;h++)s.push(.5*(t[h-1]+t[h]));s.push(1.5*t[d-1]-.5*t[d-2])}if(d<a)for(var f=s[s.length-1],p=f-s[s.length-2],h=d;h<a;h++)s.push(f+=p)}else{var m,e=e[i._id.charAt(0)+"calendar"];for(m=c?i.r2c(n,0,e):y(t)&&1===t.length?t[0]:void 0===n?0:("log"===i.type?i.d2c:i.r2c)(n,0,e),o=r||1,h=l||u?0:-.5;h<a;h++)s.push(m+o*h)}return s}},{"../../lib":287,"../../registry":378}],451:[function(e,t,n){"use strict";var Fe=e("@plotly/d3"),ze=e("tinycolor2"),je=e("../../registry"),qe=e("../../components/drawing"),He=e("../../plots/cartesian/axes"),Be=e("../../lib"),Ue=e("../../lib/svg_text_utils"),Ve=e("../scatter/format_labels"),Ye=e("../../components/color"),$e=e("../../components/colorscale").extractOpts,Ge=e("../../components/colorscale").makeColorScaleFuncFromTrace,We=e("../../constants/xmlns_namespaces"),Ze=e("../../constants/alignment").LINE_SPACING,Xe="heatmap-label";function Je(e){return e.selectAll("g."+Xe)}function Ke(e){Je(e).remove()}function Qe(e,t){var n=t.length-2,r=Be.constrain(Be.findBin(e,t),0,n),a=t[r],t=t[r+1],r=Be.constrain(r+(e-a)/(t-a)-.5,0,n),e=Math.round(r),t=Math.abs(r-e);return r&&r!==n&&t?{bin0:e,frac:t,bin1:Math.round(e+t/(r-e))}:{bin0:e,bin1:e,frac:0}}function et(e,t){var n=t.length-1,n=Be.constrain(Be.findBin(e,t),0,n),r=t[n],e=(e-r)/(t[n+1]-r)||0;return e<=0?{bin0:n,bin1:n,frac:0}:e<.5?{bin0:n,bin1:n+1,frac:e}:{bin0:n+1,bin1:n,frac:1-e}}function tt(e,t,n){e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=Math.round(255*n[3])}t.exports=function(Re,e,t,n){var Pe=e.xaxis,Ne=e.yaxis;Be.makeTraceGroups(n,t,"hm").each(function(N){var t,e,n,r,a=Fe.select(this),i=N[0],o=i.trace,F=o.xgap||0,z=o.ygap||0,s=i.z,l=i.x,c=i.y,j=i.xCenter,q=i.yCenter,u=je.traceIs(o,"contour"),d=u?"best":o.zsmooth,f=s.length,p=Be.maxRowLength(s),h=!1,H=!1;for(T=0;void 0===t&&T<l.length-1;)t=Pe.c2p(l[T]),T++;for(T=l.length-1;void 0===e&&0<T;)e=Pe.c2p(l[T]),T--;for(e<t&&(v=e,e=t,t=v,h=!0),T=0;void 0===n&&T<c.length-1;)n=Ne.c2p(c[T]),T++;for(T=c.length-1;void 0===r&&0<T;)r=Ne.c2p(c[T]),T--;r<n&&(v=n,n=r,r=v,H=!0),u&&(j=l,q=c,l=i.xfill,c=i.yfill),"fast"!==d&&(v="best"===d?0:.5,t=Math.max(-v*Pe._length,t),e=Math.min((1+v)*Pe._length,e),n=Math.max(-v*Ne._length,n),r=Math.min((1+v)*Ne._length,r));var m=Math.round(e-t),g=Math.round(r-n);if(m<=0||g<=0)return a.selectAll("image").data([]).exit().remove(),void Ke(a);var B,y,U,V,Y,u="fast"===d?(b=p,f):(b=m,g),v=document.createElement("canvas"),$=(v.width=b,v.height=u,v.getContext("2d")),G=Ge(o,{noNumericCheck:!0,returnArray:!0}),W="fast"===d?(B=h?function(e){return p-1-e}:Be.identity,H?function(e){return f-1-e}:Be.identity):(B=function(e){return Be.constrain(Math.round(Pe.c2p(l[e])-t),0,m)},function(e){return Be.constrain(Math.round(Ne.c2p(c[e])-n),0,g)}),b=W(0),x=[b,b],Z=h?0:1,X=H?0:1,_=0,J=0,K=0,Q=0;function ee(e,t){return void 0!==e?((e=G(e))[0]=Math.round(e[0]),e[1]=Math.round(e[1]),e[2]=Math.round(e[2]),_+=t,J+=e[0]*t,K+=e[1]*t,Q+=e[2]*t,e):[0,0,0,0]}if(d){var w,te=0;try{w=new Uint8Array(m*g*4)}catch(e){w=new Array(m*g*4)}if("best"===d){for(var ne,re,ae,ie=j||l,oe=q||c,se=new Array(ie.length),le=new Array(oe.length),ce=new Array(m),ue=j?et:Qe,de=q?et:Qe,T=0;T<ie.length;T++)se[T]=Math.round(Pe.c2p(ie[T])-t);for(T=0;T<oe.length;T++)le[T]=Math.round(Ne.c2p(oe[T])-n);for(T=0;T<m;T++)ce[T]=ue(T,se);for(k=0;k<g;k++)for(re=s[(ne=de(k,le)).bin0],ae=s[ne.bin1],T=0;T<m;T++,te+=4)tt(w,te,Y=function(e,t,n,r){var a=e[n.bin0];if(void 0===a)return ee(void 0,1);var e=e[n.bin1],i=t[n.bin0],t=t[n.bin1],t=void 0===e?void 0===t?0:void 0===i?2*(t-a):2*(2*t-i-a)/3:void 0===t?void 0===i?0:2*(2*a-e-i)/3:void 0===i?2*(2*t-e-a)/3:t+a-e-i;return ee(a+n.frac*(e-a||0)+r.frac*((i-a||0)+n.frac*t))}(re,ae,ce[T],ne))}else for(k=0;k<f;k++)for(V=s[k],x=W(k),T=0;T<m;T++)Y=ee(V[T],1),tt(w,te=4*(x*m+B(T)),Y);u=$.createImageData(m,g);try{u.data.set(w)}catch(e){for(var fe=u.data,pe=fe.length,k=0;k<pe;k++)fe[k]=w[k]}$.putImageData(u,0,0)}else{var he=Math.floor(F/2),me=Math.floor(z/2);for(k=0;k<f;k++)if(V=s[k],x.reverse(),x[X]=W(k+1),x[0]!==x[1]&&void 0!==x[0]&&void 0!==x[1])for(y=[U=B(0),U],T=0;T<p;T++)y.reverse(),y[Z]=B(T+1),y[0]!==y[1]&&void 0!==y[0]&&void 0!==y[1]&&(Y=ee(V[T],(y[1]-y[0])*(x[1]-x[0])),$.fillStyle="rgba("+Y.join(",")+")",$.fillRect(y[0]+he,x[0]+me,y[1]-y[0]-F,x[1]-x[0]-z))}var J=Math.round(J/_),K=Math.round(K/_),Q=Math.round(Q/_),b=ze("rgb("+J+","+K+","+Q+")"),h=(Re._hmpixcount=(Re._hmpixcount||0)+_,Re._hmlumcount=(Re._hmlumcount||0)+_*b.getLuminance(),a.selectAll("image").data(N)),ge=(h.enter().append("svg:image").attr({xmlns:We.svg,preserveAspectRatio:"none"}),h.attr({height:g,width:m,x:t,y:n,"xlink:href":v.toDataURL("image/png")}),Ke(a),o.texttemplate);if(ge){var A,H=$e(o),ye={type:"linear",range:[H.min,H.max],_separators:Pe._separators,_numFormat:Pe._numFormat},ve="histogram2dcontour"===o.type,M="contour"===o.type,be=M?f-1:f,xe=M?1:0,_e=M?p-1:p,E=[];for(T=M?1:0;T<be;T++){if(M)A=i.y[T];else if(ve){if(0===T||T===f-1)continue;A=i.y[T]}else if(i.yCenter)A=i.yCenter[T];else{if(T+1===f&&void 0===i.y[T+1])continue;A=(i.y[T]+i.y[T+1])/2}var S,we=Math.round(Ne.c2p(A));if(!(we<0||we>Ne._length))for(k=xe;k<_e;k++){if(M)S=i.x[k];else if(ve){if(0===k||k===p-1)continue;S=i.x[k]}else if(i.xCenter)S=i.xCenter[k];else{if(k+1===p&&void 0===i.x[k+1])continue;S=(i.x[k]+i.x[k+1])/2}var Te=Math.round(Pe.c2p(S));if(!(Te<0||Te>Pe._length)){var L=Ve({x:S,y:A},o,Re._fullLayout),ke=(L.x=S,L.y=A,i.z[T][k]),C=(void 0===ke?(L.z="",L.zLabel=""):(L.z=ke,L.zLabel=He.tickText(ye,ke,"hover").text),i.text&&i.text[T]&&i.text[T][k]),C=(void 0!==C&&!1!==C||(C=""),L.text=C,Be.texttemplateString(ge,L,Re._fullLayout._d3locale,L,o._meta||{}));if(C){for(var Ae=C.split("<br>"),Me=Ae.length,Ee=0,O=0;O<Me;O++)Ee=Math.max(Ee,Ae[O].length);E.push({l:Me,c:Ee,t:C,x:Te,y:we,z:ke})}}}}var Se=o.textfont,Le=Se.family,D=Se.size,d=Re._fullLayout.font.size;if(!D||"auto"===D){var I=1/0,R=1/0,Ce=0,Oe=0;for(O=0;O<E.length;O++){var De,P,Ie=E[O],Ce=Math.max(Ce,Ie.l),Oe=Math.max(Oe,Ie.c);O<E.length-1&&(P=E[O+1],De=Math.abs(P.x-Ie.x),P=Math.abs(P.y-Ie.y),De&&(I=Math.min(I,De)),P&&(R=Math.min(R,P)))}D=isFinite(I)&&isFinite(R)?(I=(I-=F)/Oe/(Ze/2),R=(R-=z)/Ce/Ze,Math.min(Math.floor(I),Math.floor(R),d)):d}D<=0||!isFinite(D)||Je(a).data(E).enter().append("g").classed(Xe,1).append("text").attr("text-anchor","middle").each(function(e){var t=Fe.select(this),n=Se.color;n&&"auto"!==n||(n=Ye.contrast("rgba("+G(e.z).join()+")")),t.attr("data-notex",1).call(Ue.positionText,e.x,e.y-D*(e.l*Ze/2-1)).call(qe.font,Le,D,n).text(e.t).call(Ue.convertToTspans,Re)})}})}},{"../../components/color":157,"../../components/colorscale":169,"../../components/drawing":179,"../../constants/alignment":262,"../../constants/xmlns_namespaces":268,"../../lib":287,"../../lib/svg_text_utils":310,"../../plots/cartesian/axes":334,"../../registry":378,"../scatter/format_labels":509,"@plotly/d3":20,tinycolor2:121}],452:[function(e,t,n){"use strict";var r=e("@plotly/d3");t.exports=function(e){r.select(e).selectAll(".hm image").style("opacity",function(e){return e.trace.opacity})}},{"@plotly/d3":20}],453:[function(e,t,n){"use strict";t.exports=function(e,t,n){!1===n("zsmooth")&&(n("xgap"),n("ygap")),n("zhoverformat")}},{}],454:[function(e,t,n){"use strict";var d=e("fast-isnumeric"),f=e("../../lib"),p=e("../../registry");function h(e,t){var n=t(e);return"scaled"===(n?t(e+"type","array"):"scaled")&&(t(e+"0"),t("d"+e)),n}t.exports=function(e,t,n,r,a,i){var o=n("z");if(a=a||"x",i=i||"y",void 0===o||!o.length)return 0;if(f.isArray1D(e.z)){var s=n(a),l=n(i),c=f.minRowLength(s),u=f.minRowLength(l);if(0===c||0===u)return 0;t._length=Math.min(c,u,o.length)}else{if(s=h(a,n),l=h(i,n),!function(e){for(var t,n=!0,r=!1,a=!1,i=0;i<e.length;i++){if(t=e[i],!f.isArrayOrTypedArray(t)){n=!1;break}0<t.length&&(r=!0);for(var o=0;o<t.length;o++)if(d(t[o])){a=!0;break}}return n&&r&&a}(o))return 0;n("transpose"),t._length=null}return"heatmapgl"!==e.type&&p.getComponentMethod("calendars","handleTraceDefaults")(e,t,[a,i],r),!0}},{"../../lib":287,"../../registry":378,"fast-isnumeric":33}],455:[function(e,t,n){"use strict";var r=e("../bar/attributes"),a=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,i=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../plots/template_attributes").texttemplateAttrs,s=e("../../plots/font_attributes"),l=e("./bin_attributes"),c=e("./constants"),e=e("../../lib/extend").extendFlat;t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:a("x"),yhoverformat:a("y"),text:e({},r.text,{}),hovertext:e({},r.hovertext,{}),orientation:r.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:l("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:l("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:i({},{keys:c.eventDataKeys}),texttemplate:o({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:e({},r.textposition,{arrayOk:!1}),textfont:s({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:s({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:s({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:r.insidetextanchor,textangle:r.textangle,cliponaxis:r.cliponaxis,constraintext:r.constraintext,marker:r.marker,offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:r.selected,unselected:r.unselected,_deprecated:{bardir:r._deprecated.bardir}}},{"../../lib/extend":281,"../../plots/cartesian/axis_format_attributes":337,"../../plots/font_attributes":365,"../../plots/template_attributes":373,"../bar/attributes":388,"./bin_attributes":457,"./constants":461}],456:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n=e.length,r=0,a=0;a<n;a++)t[a]?(e[a]/=t[a],r+=e[a]):e[a]=null;return r}},{}],457:[function(e,t,n){"use strict";t.exports=function(e,t){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],458:[function(e,t,n){"use strict";var i=e("fast-isnumeric");t.exports={count:function(e,t,n){return n[e]++,1},sum:function(e,t,n,r){r=r[t];return i(r)?(r=Number(r),n[e]+=r,r):0},avg:function(e,t,n,r,a){r=r[t];return i(r)&&(r=Number(r),n[e]+=r,a[e]++),0},min:function(e,t,n,r){r=r[t];if(i(r)){if(r=Number(r),!i(n[e]))return n[e]=r;if(n[e]>r)return t=r-n[e],n[e]=r,t}return 0},max:function(e,t,n,r){r=r[t];if(i(r)){if(r=Number(r),!i(n[e]))return n[e]=r;if(n[e]<r)return t=r-n[e],n[e]=r,t}return 0}}},{"fast-isnumeric":33}],459:[function(e,t,n){"use strict";var r=e("../../constants/numerical"),f=r.ONEAVGYEAR,a=r.ONEAVGMONTH,p=r.ONEDAY,i=r.ONEHOUR,o=r.ONEMIN,s=r.ONESEC,h=e("../../plots/cartesian/axes").tickIncrement;function m(e,t,n,r){if(e*t<=0)return 1/0;for(var a=Math.abs(t-e),i="date"===n.type,o=c(a,i),s=0;s<10;s++){var l=c(80*o,i);if(o===l)break;if(!function(e,t,n,r,a,i){if(r&&p<e)return r=u(t,a,i),a=u(n,a,i),r[i=e===f?0:1]!==a[i];return.1<Math.floor(n/e)-Math.floor(t/e)}(l,e,t,i,n,r))break;o=l}return o}function c(e,t){return t&&s<e?p<e?1.1*f<e?f:1.1*a<e?a:p:i<e?i:o<e?o:s:Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function u(e,t,n){t=t.c2d(e,f,n).split("-");return""===t[0]&&(t.unshift(),t[0]="-"+t[0]),t}t.exports=function(a,e,t,i,o){var r,s,l,n=-1.1*e,e=-.1*e,c=a-e,u=t[0],t=t[1],c=Math.min(m(u+e,u+c,i,o),m(t+e,t+c,i,o)),n=Math.min(m(u+n,u+e,i,o),m(t+n,t+e,i,o)),d=n<c&&n<Math.abs(t-u)/4e3?(r=c,!1):(r=Math.min(c,n),!0);return"date"===i.type&&p<r?(s=r===f?1:6,l=r===f?"M12":"M1",function(e,t){var n=i.c2d(e,f,o),r=n.indexOf("-",s),r=(0<r&&(n=n.substr(0,r)),i.d2c(n,0,o));return r<e&&((r+(n=h(r,l,!1,o)))/2<e+a&&(r=n)),t&&d?h(r,l,!0,o):r}):function(e,t){var n=r*Math.round(e/r);return n+r/10<e&&n+.9*r<e+a&&(n+=r),t&&d&&(n-=r),n}}},{"../../constants/numerical":267,"../../plots/cartesian/axes":334}],460:[function(e,t,n){"use strict";var Z=e("fast-isnumeric"),X=e("../../lib"),A=e("../../registry"),J=e("../../plots/cartesian/axes"),K=e("../bar/arrays_to_calcdata"),Q=e("./bin_functions"),ee=e("./norm_functions"),te=e("./average"),ne=e("./bin_label_vals");function re(e,t,n,r,a){function i(e){return n.r2c(e,0,w)}function o(e){return n.c2r(e,0,w)}var s=r+"bins",l=e._fullLayout,c=t["_"+r+"bingroup"],u=l._histogramBinOpts[c],c="overlay"===l.barmode,d="date"===n.type?function(e){return e||0===e?X.cleanDate(e,null,w):null}:function(e){return Z(e)?Number(e):null};function f(e,t,n){t[e+"Found"]?(t[e]=d(t[e]),null===t[e]&&(t[e]=n[e])):(T[e]=t[e]=n[e],X.nestedProperty(g[0],s+"."+e).set(n[e]))}if(t["_"+r+"autoBinFinished"])delete t["_"+r+"autoBinFinished"];else{for(var p,h,m,g=u.traces,y=[],v=!0,b=!1,x=!1,_=0;_<g.length;_++)(m=g[_]).visible&&(h=m["_"+(p=u.dirs[_])+"pos0"]=n.makeCalcdata(m,p),y=X.concat(y,h),delete m["_"+r+"autoBinFinished"],!0===t.visible&&(v?v=!1:(delete m._autoBin,m["_"+r+"autoBinFinished"]=1),A.traceIs(m,"2dMap")&&(b=!0),"histogram2dcontour"===m.type&&(x=!0)));var w=g[0][r+"calendar"],l=J.autoBin(y,n,u.nbins,b,w,u.sizeFound&&u.size),T=(g[0]._autoBin={})[u.dirs[0]]={};if(x&&(u.size||(l.start=o(J.tickIncrement(i(l.start),l.size,!0,w))),void 0===u.end&&(l.end=o(J.tickIncrement(i(l.end),l.size,!1,w)))),c&&!A.traceIs(t,"2dMap")&&0===l._dataSpan&&"category"!==n.type&&"multicategory"!==n.type){if(a)return[l,h,!0];l=function(e,t,n,r,a){var i,o,s,l=e._fullLayout,c=function(e,t){for(var n=t.xaxis,r=t.yaxis,a=t.orientation,i=[],o=e._fullData,s=0;s<o.length;s++){var l=o[s];"histogram"===l.type&&!0===l.visible&&l.orientation===a&&l.xaxis===n&&l.yaxis===r&&i.push(l)}return i}(e,t),u=!1,d=1/0,f=[t];for(i=0;i<c.length;i++){var p,h,m;(o=c[i])===t?u=!0:u?(p=re(e,o,n,r,!0),h=p[0],m=p[2],o["_"+r+"autoBinFinished"]=1,o["_"+r+"pos0"]=p[1],m?f.push(o):d=Math.min(d,h.size)):(s=l._histogramBinOpts[o["_"+r+"bingroup"]],d=Math.min(d,s.size||o[a].size))}var g=new Array(f.length);for(i=0;i<f.length;i++)for(var y=f[i]["_"+r+"pos0"],v=0;v<y.length;v++)if(void 0!==y[v]){g[i]=y[v];break}isFinite(d)||(d=X.distinctVals(g).minDiff);for(i=0;i<f.length;i++){var b=(o=f[i])[r+"calendar"],b={start:n.c2r(g[i]-d/2,0,b),end:n.c2r(g[i]+d/2,0,b),size:d};o._input[a]=o[a]=b,(s=l._histogramBinOpts[o["_"+r+"bingroup"]])&&X.extendFlat(s,b)}return t[a]}(e,t,n,r,s)}(c=m.cumulative||{}).enabled&&"include"!==c.currentbin&&("decreasing"===c.direction?l.start=o(J.tickIncrement(i(l.start),l.size,!0,w)):l.end=o(J.tickIncrement(i(l.end),l.size,!1,w))),u.size=l.size,u.sizeFound||(T.size=l.size,X.nestedProperty(g[0],s+".size").set(l.size)),f("start",u,l),f("end",u,l)}h=t["_"+r+"pos0"],delete t["_"+r+"pos0"];var a=t._input[s]||{},e=X.extendFlat({},u),c=u.start,l=n.r2l(a.start),k=void 0!==l,l=((u.startFound||k)&&l!==n.r2l(c)&&(l=k?l:X.aggNums(Math.min,null,h),c={type:"category"===n.type||"multicategory"===n.type?"linear":n.type,r2l:n.r2l,dtick:u.size,tick0:c,calendar:w,range:[l,J.tickIncrement(l,u.size,!1,w)].map(n.l2r)},(c=J.tickFirst(c))>n.r2l(l)&&(c=J.tickIncrement(c,u.size,!0,w)),e.start=n.l2r(c),k||X.nestedProperty(t,s+".start").set(e.start)),u.end),c=n.r2l(a.end),k=void 0!==c,l=((u.endFound||k)&&c!==n.r2l(l)&&(a=k?c:X.aggNums(Math.max,null,h),e.end=n.l2r(a),k||X.nestedProperty(t,s+".start").set(e.end)),"autobin"+r);return!1===t._input[l]&&(t._input[s]=X.extendFlat({},t[s]||{}),delete t._input[l],delete t[l]),[e,h]}t.exports={calc:function(r,e){var t,N,n=[],a=[],i="h"===e.orientation,o=J.getFromId(r,i?e.yaxis:e.xaxis),s={x:"y",y:"x"}[i=i?"y":"x"],l=e[i+"calendar"],c=e.cumulative,u=(f=re(r,e,o,i))[0],d=f[1],f="string"==typeof u.size,p=[],h=f?p:u,F=[],m=[],g=[],y=0,v=e.histnorm,b=e.histfunc,x=-1!==v.indexOf("density");function _(e){return o.r2c(e,0,l)}c.enabled&&x&&(v=v.replace(/ ?density$/,""),x=!1);var z,j="max"===b||"min"===b?null:0,q=Q.count,v=ee[v],w=!1;for(X.isArrayOrTypedArray(e[s])&&"count"!==b&&(z=e[s],w="avg"===b,q=Q[b]),S=_(u.start),N=_(u.end)+(S-J.tickIncrement(S,u.size,!1,l))/1e6;S<N&&n.length<1e6&&(t=J.tickIncrement(S,u.size,!1,l),n.push((S+t)/2),a.push(j),g.push([]),p.push(S),x&&F.push(1/(t-S)),w&&m.push(0),!(t<=S));)S=t;p.push(S),f||"date"!==o.type||(h={start:_(h.start),end:_(h.end),size:h.size}),r._fullLayout._roundFnOpts||(r._fullLayout._roundFnOpts={});for(var T,k=e["_"+i+"bingroup"],s={leftGap:1/0,rightGap:1/0},H=(k&&(r._fullLayout._roundFnOpts[k]||(r._fullLayout._roundFnOpts[k]=s),s=r._fullLayout._roundFnOpts[k]),a.length),A=!0,M=s.leftGap,E=s.rightGap,B={},S=0;S<d.length;S++){var L,C=d[S];0<=(L=X.findBin(C,h))&&L<H&&(y+=q(L,S,a,z,m),A&&g[L].length&&C!==d[g[L][0]]&&(A=!1),g[L].push(S),B[S]=L,M=Math.min(M,C-p[L]),E=Math.min(E,p[L+1]-C))}if(s.leftGap=M,s.rightGap=E,A||(T=function(t,n){return function(){var e=r._fullLayout._roundFnOpts[k];return ne(e.leftGap,e.rightGap,p,o,l)(t,n)}}),w&&(y=te(a,m)),v&&v(a,y,F),c.enabled){var O,D,U,I=a,b=c.direction,f=c.currentbin;function V(e){U=I[e],I[e]/=2}function Y(e){D=I[e],I[e]=U+D/2,U+=D}if("half"===f)if("increasing"===b)for(V(0),O=1;O<I.length;O++)Y(O);else for(V(I.length-1),O=I.length-2;0<=O;O--)Y(O);else if("increasing"===b){for(O=1;O<I.length;O++)I[O]+=I[O-1];"exclude"===f&&(I.unshift(0),I.pop())}else{for(O=I.length-2;0<=O;O--)I[O]+=I[O+1];"exclude"===f&&(I.push(0),I.shift())}}var R,$=Math.min(n.length,a.length),P=[],G=0,W=$-1;for(S=0;S<$;S++)if(a[S]){G=S;break}for(S=$-1;G<=S;S--)if(a[S]){W=S;break}for(S=G;S<=W;S++)Z(n[S])&&Z(a[S])&&(R={p:n[S],s:a[S],b:0},c.enabled||(R.pts=g[S],A?R.ph0=R.ph1=g[S].length?d[g[S][0]]:n[S]:(e._computePh=!0,R.ph0=T(p[S]),R.ph1=T(p[S+1],!0))),P.push(R));return 1===P.length&&(P[0].width1=J.tickIncrement(P[0].p,u.size,!1,l)-P[0].p),K(P,e),X.isArrayOrTypedArray(e.selectedpoints)&&X.tagSelected(P,e,B),P},calcAllAutoBins:re}},{"../../lib":287,"../../plots/cartesian/axes":334,"../../registry":378,"../bar/arrays_to_calcdata":387,"./average":456,"./bin_functions":458,"./bin_label_vals":459,"./norm_functions":467,"fast-isnumeric":33}],461:[function(e,t,n){"use strict";t.exports={eventDataKeys:["binNumber"]}},{}],462:[function(e,t,n){"use strict";var E=e("../../lib"),S=e("../../plots/cartesian/axis_ids"),L=e("../../registry").traceIs,C=e("../bar/defaults").handleGroupingDefaults,O=E.nestedProperty,D=e("../../plots/cartesian/constraints").getAxisGroup,I=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],R=["x","y"];t.exports=function(e,l){var t,c=l._histogramBinOpts={},n=[],r={},a=[];function i(e,t){return E.coerce(h._input,h,h._module.attributes,e,t)}function o(e){return"v"===e.orientation?"x":"y"}function s(e,t,n){var r=e.uid+"__"+n,a=(t=t||r,S.getFromTrace({_fullLayout:l},e,n).type),i=e[n+"calendar"]||"",o=c[t],s=!0;o&&(a===o.axType&&i===o.calendar?(s=!1,o.traces.push(e),o.dirs.push(n)):(t=r,a!==o.axType&&E.warn(["Attempted to group the bins of trace",e.index,"set on a","type:"+a,"axis","with bins on","type:"+o.axType,"axis."].join(" ")),i!==o.calendar&&E.warn(["Attempted to group the bins of trace",e.index,"set with a",i,"calendar","with bins",o.calendar?"on a "+o.calendar+" calendar":"w/o a set calendar"].join(" ")))),s&&(c[t]={traces:[e],dirs:[n],axType:a,calendar:e[n+"calendar"]||""}),e["_"+n+"bingroup"]=t}for(d=0;d<e.length;d++)h=e[d],L(h,"histogram")&&(n.push(h),delete h._xautoBinFinished,delete h._yautoBinFinished,L(h,"2dMap")||C(h._input,h,l,i));for(var u=l._alignmentOpts||{},d=0;d<n.length;d++){var f,p,h=n[d],m="";L(h,"2dMap")||(p=o(h),"group"===l.barmode&&h.alignmentgroup&&(f=h[p+"axis"],(u[f=D(l,f)+h.orientation]||{})[h.alignmentgroup]&&(m=f)),m||"overlay"===l.barmode||(m=D(l,h.xaxis)+D(l,h.yaxis)+o(h))),m?(r[m]||(r[m]=[]),r[m].push(h)):a.push(h)}for(m in r)if(1===(_=r[m]).length)a.push(_[0]);else{var g=!1;for(_.length&&(h=_[0],g=i("bingroup")),m=g||m,d=0;d<_.length;d++){var y=(h=_[d])._input.bingroup;y&&y!==m&&E.warn(["Trace",h.index,"must match","within bingroup",m+".","Ignoring its bingroup:",y,"setting."].join(" ")),h.bingroup=m,s(h,m,o(h))}}for(d=0;d<a.length;d++){h=a[d];var v=i("bingroup");if(L(h,"2dMap"))for(t=0;t<2;t++){var b=i((p=R[t])+"bingroup",v?v+"__"+p:null);s(h,b,p)}else s(h,v,o(h))}for(m in c)for(var x=c[m],_=x.traces,w=0;w<I.length;w++){var T,k,A=I[w],M=A.name;if("nbins"!==M||!x.sizeFound){for(d=0;d<_.length;d++){if(h=_[d],p=x.dirs[d],T=A.aStr[p],void 0!==O(h._input,T).get()){x[M]=i(T),x[M+"Found"]=!0;break}(k=(h._autoBin||{})[p]||{})[M]&&O(h,T).set(k[M])}if("start"===M||"end"===M)for(;d<_.length;d++)(h=_[d])["_"+p+"bingroup"]&&i(T,(k=(h._autoBin||{})[p]||{})[M]);"nbins"!==M||x.sizeFound||x.nbinsFound||(h=_[0],x[M]=i(T))}}}},{"../../lib":287,"../../plots/cartesian/axis_ids":338,"../../plots/cartesian/constraints":342,"../../registry":378,"../bar/defaults":392}],463:[function(e,t,n){"use strict";var c=e("../../registry"),u=e("../../lib"),d=e("../../components/color"),f=e("../bar/defaults").handleText,p=e("../bar/style_defaults"),h=e("./attributes");t.exports=function(n,r,e,t){function a(e,t){return u.coerce(n,r,h,e,t)}var i=a("x"),o=a("y"),s=(a("cumulative.enabled")&&(a("cumulative.direction"),a("cumulative.currentbin")),a("text"),a("textposition")),s=(f(n,r,t,a,s,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("orientation",o&&!i?"h":"v")),l="v"===s?"x":"y",s="v"===s?"y":"x",i=i&&o?Math.min(u.minRowLength(i)&&u.minRowLength(o)):u.minRowLength(r[l]||[]);i?(r._length=i,c.getComponentMethod("calendars","handleTraceDefaults")(n,r,["x","y"],t),r[s]&&a("histfunc"),a("histnorm"),a("autobin"+l),p(n,r,a,e,t),u.coerceSelectionMarkerOpacity(r,a),o=(r.marker.line||{}).color,(i=c.getComponentMethod("errorbars","supplyDefaults"))(n,r,o||d.defaultLine,{axis:"y"}),i(n,r,o||d.defaultLine,{axis:"x",inherit:"y"})):r.visible=!1}},{"../../components/color":157,"../../lib":287,"../../registry":378,"../bar/defaults":392,"../bar/style_defaults":403,"./attributes":455}],464:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,a){if(e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,"zLabelVal"in t&&(e.z=t.zLabelVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),!(n.cumulative||{}).enabled){var i=Array.isArray(a)?r[0].pts[a[0]][a[1]]:r[a].pts;if(e.pointNumbers=i,e.binNumber=e.pointNumber,delete e.pointNumber,delete e.pointIndex,n._indexToPoints)for(var o=[],s=0;s<i.length;s++)o=o.concat(n._indexToPoints[i[s]]);else o=i;e.pointIndices=o}return e}},{}],465:[function(e,t,n){"use strict";var i=e("../bar/hover").hoverPoints,o=e("../../plots/cartesian/axes").hoverLabelText;t.exports=function(e,t,n,r,a){t=i(e,t,n,r,a);if(t)return n=(e=t[0]).cd[e.index],r=e.cd[0].trace,r.cumulative.enabled||(e[(a="h"===r.orientation?"y":"x")+"Label"]=o(e[a+"a"],[n.ph0,n.ph1],r[a+"hoverformat"])),t}},{"../../plots/cartesian/axes":334,"../bar/hover":395}],466:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("../bar/layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),supplyLayoutDefaults:e("../bar/layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("../bar/cross_trace_calc").crossTraceCalc,plot:e("../bar/plot").plot,layerName:"barlayer",style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,colorbar:e("../scatter/marker_colorbar"),hoverPoints:e("./hover"),selectPoints:e("../bar/select"),eventData:e("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":348,"../bar/cross_trace_calc":391,"../bar/layout_attributes":397,"../bar/layout_defaults":398,"../bar/plot":399,"../bar/select":400,"../bar/style":402,"../scatter/marker_colorbar":518,"./attributes":455,"./calc":460,"./cross_trace_defaults":462,"./defaults":463,"./event_data":464,"./hover":465}],467:[function(e,t,n){"use strict";t.exports={percent:function(e,t){for(var n=e.length,r=100/t,a=0;a<n;a++)e[a]*=r},probability:function(e,t){for(var n=e.length,r=0;r<n;r++)e[r]/=t},density:function(e,t,n,r){var a=e.length;r=r||1;for(var i=0;i<a;i++)e[i]*=n[i]*r},"probability density":function(e,t,n,r){var a=e.length;r&&(t/=r);for(var i=0;i<a;i++)e[i]*=n[i]/t}}},{}],468:[function(e,t,n){"use strict";var r=e("../histogram/attributes"),a=e("../histogram/bin_attributes"),i=e("../heatmap/attributes"),o=e("../../plots/attributes"),s=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,l=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../../plots/template_attributes").texttemplateAttrs,u=e("../../components/colorscale/attributes"),e=e("../../lib/extend").extendFlat;t.exports=e({x:r.x,y:r.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:r.histnorm,histfunc:r.histfunc,nbinsx:r.nbinsx,xbins:a("x"),nbinsy:r.nbinsy,ybins:a("y"),autobinx:r.autobinx,autobiny:r.autobiny,bingroup:e({},r.bingroup,{}),xbingroup:e({},r.bingroup,{}),ybingroup:e({},r.bingroup,{}),xgap:i.xgap,ygap:i.ygap,zsmooth:i.zsmooth,xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z",1),hovertemplate:l({},{keys:"z"}),texttemplate:c({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:i.textfont,showlegend:e({},o.showlegend,{dflt:!1})},u("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":164,"../../lib/extend":281,"../../plots/attributes":330,"../../plots/cartesian/axis_format_attributes":337,"../../plots/template_attributes":373,"../heatmap/attributes":439,"../histogram/attributes":455,"../histogram/bin_attributes":457}],469:[function(e,t,n){"use strict";var te=e("../../lib"),ne=e("../../plots/cartesian/axes"),re=e("../histogram/bin_functions"),ae=e("../histogram/norm_functions"),ie=e("../histogram/average"),d=e("../histogram/bin_label_vals"),oe=e("../histogram/calc").calcAllAutoBins;function se(e,t,n,r){var a=new Array(e);if(r)for(o=0;o<e;o++)a[o]=1/(t[o+1]-t[o]);else for(var i=1/n,o=0;o<e;o++)a[o]=i;return a}function le(e,t){return{start:e(t.start),end:e(t.end),size:t.size}}function ce(e,t,n,r,a,i){for(var o=e.length-1,s=new Array(o),l=d(n,r,e,a,i),c=0;c<o;c++){var u=(t||[])[c];s[c]=void 0===u?[l(e[c]),l(e[c+1],!0)]:[u,u]}return s}t.exports=function(e,t){for(var n=ne.getFromId(e,t.xaxis),r=ne.getFromId(e,t.yaxis),a=t.xcalendar,i=t.ycalendar,o=function(e){return n.r2c(e,0,a)},s=function(e){return r.r2c(e,0,i)},l=oe(e,t,n,"x"),c=l[0],u=l[1],l=oe(e,t,r,"y"),e=l[0],d=l[1],f=t._length,p=(u.length>f&&u.splice(f,u.length-f),d.length>f&&d.splice(f,d.length-f),[]),h=[],N=[],l="string"==typeof c.size,m="string"==typeof e.size,g=[],y=[],v=l?g:c,b=m?y:e,x=0,_=[],w=[],T=t.histnorm,k=t.histfunc,F=-1!==T.indexOf("density"),z="max"===k||"min"===k?null:0,j=re.count,q=ae[T],A=!1,H=[],B=[],U=("z"in t?t.z:"marker"in t&&Array.isArray(t.marker.color)?t.marker.color:""),V=(U&&"count"!==k&&(A="avg"===k,j=re[k]),c.size),T=o(c.start),Y=o(c.end)+(T-ne.tickIncrement(T,V,!1,a))/1e6,M=T;M<Y;M=ne.tickIncrement(M,V,!1,a))h.push(z),g.push(M),A&&N.push(0);g.push(M);var E=h.length,t=(M-T)/E,c=(k=T+t/2,n.c2r(k,0,a)),$=e.size,T=s(e.start),G=s(e.end)+(T-ne.tickIncrement(T,$,!1,i))/1e6;for(M=T;M<G;M=ne.tickIncrement(M,$,!1,i)){p.push(h.slice()),y.push(M);for(var W=new Array(E),S=0;S<E;S++)W[S]=[];w.push(W),A&&_.push(N.slice())}y.push(M);var L=p.length,k=(M-T)/L,T=(e=T+k/2,r.c2r(e,0,i)),Z=(F&&(H=se(h.length,v,t,l),B=se(p.length,b,k,m)),l||"date"!==n.type||(v=le(o,v)),m||"date"!==r.type||(b=le(s,b)),!0),X=!0,C=new Array(E),O=new Array(L),J=1/0,K=1/0,Q=1/0,ee=1/0;for(M=0;M<f;M++){var D=u[M],I=d[M],R=te.findBin(D,v),P=te.findBin(I,b);0<=R&&R<E&&0<=P&&P<L&&(x+=j(R,M,p[P],U,_[P]),w[P][R].push(M),Z&&(void 0===C[R]?C[R]=D:C[R]!==D&&(Z=!1)),X&&(void 0===O[P]?O[P]=I:O[P]!==I&&(X=!1)),J=Math.min(J,D-g[R]),K=Math.min(K,g[R+1]-D),Q=Math.min(Q,I-y[P]),ee=Math.min(ee,y[P+1]-I))}if(A)for(P=0;P<L;P++)x+=ie(p[P],_[P]);if(q)for(P=0;P<L;P++)q(p[P],x,H,B[P]);return{x:u,xRanges:ce(g,Z&&C,J,K,n,a),x0:c,dx:t,y:d,yRanges:ce(y,X&&O,Q,ee,r,i),y0:T,dy:k,z:p,pts:w}}},{"../../lib":287,"../../plots/cartesian/axes":334,"../histogram/average":456,"../histogram/bin_functions":458,"../histogram/bin_label_vals":459,"../histogram/calc":460,"../histogram/norm_functions":467}],470:[function(e,t,n){"use strict";var i=e("../../lib"),o=e("./sample_defaults"),s=e("../heatmap/style_defaults"),l=e("../../components/colorscale/defaults"),c=e("../heatmap/label_defaults"),u=e("./attributes");t.exports=function(n,r,e,t){function a(e,t){return i.coerce(n,r,u,e,t)}o(n,r,a,t),!1!==r.visible&&(s(n,r,a,t),l(n,r,t,a,{prefix:"",cLetter:"z"}),a("hovertemplate"),c(a,t),a("xhoverformat"),a("yhoverformat"))}},{"../../components/colorscale/defaults":167,"../../lib":287,"../heatmap/label_defaults":449,"../heatmap/style_defaults":453,"./attributes":468,"./sample_defaults":473}],471:[function(e,t,n){"use strict";var o=e("../heatmap/hover"),s=e("../../plots/cartesian/axes").hoverLabelText;t.exports=function(e,t,n,r,a){var i,t=o(e,t,n,r,a);if(t)return n=(e=t[0]).index,r=n[0],a=n[1],n=e.cd[0],i=n.trace,a=n.xRanges[a],n=n.yRanges[r],e.xLabel=s(e.xa,[a[0],a[1]],i.xhoverformat),e.yLabel=s(e.ya,[n[0],n[1]],i.yhoverformat),t}},{"../../plots/cartesian/axes":334,"../heatmap/hover":446}],472:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../heatmap/calc"),plot:e("../heatmap/plot"),layerName:"heatmaplayer",colorbar:e("../heatmap/colorbar"),style:e("../heatmap/style"),hoverPoints:e("./hover"),eventData:e("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":348,"../heatmap/calc":440,"../heatmap/colorbar":442,"../heatmap/plot":451,"../heatmap/style":452,"../histogram/cross_trace_defaults":462,"../histogram/event_data":464,"./attributes":468,"./defaults":470,"./hover":471}],473:[function(e,t,n){"use strict";var o=e("../../registry"),s=e("../../lib");t.exports=function(e,t,n,r){var a=n("x"),i=n("y"),a=s.minRowLength(a),i=s.minRowLength(i);a&&i?(t._length=Math.min(a,i),o.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],r),(n("z")||n("marker.color"))&&n("histfunc"),n("histnorm"),n("autobinx"),n("autobiny")):t.visible=!1}},{"../../lib":287,"../../registry":378}],474:[function(e,t,n){"use strict";var r=e("../histogram2d/attributes"),a=e("../contour/attributes"),i=e("../../components/colorscale/attributes"),o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=e("../../lib/extend").extendFlat;t.exports=e({x:r.x,y:r.y,z:r.z,marker:r.marker,histnorm:r.histnorm,histfunc:r.histfunc,nbinsx:r.nbinsx,xbins:r.xbins,nbinsy:r.nbinsy,ybins:r.ybins,autobinx:r.autobinx,autobiny:r.autobiny,bingroup:r.bingroup,xbingroup:r.xbingroup,ybingroup:r.ybingroup,autocontour:a.autocontour,ncontours:a.ncontours,contours:a.contours,line:{color:a.line.color,width:e({},a.line.width,{dflt:.5}),dash:a.line.dash,smoothing:a.line.smoothing,editType:"plot"},xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z",1),hovertemplate:r.hovertemplate,texttemplate:a.texttemplate,textfont:a.textfont},i("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":164,"../../lib/extend":281,"../../plots/cartesian/axis_format_attributes":337,"../contour/attributes":417,"../histogram2d/attributes":468}],475:[function(e,t,n){"use strict";var i=e("../../lib"),o=e("../histogram2d/sample_defaults"),s=e("../contour/contours_defaults"),l=e("../contour/style_defaults"),c=e("../heatmap/label_defaults"),u=e("./attributes");t.exports=function(n,r,e,t){function a(e,t){return i.coerce(n,r,u,e,t)}o(n,r,a,t),!1!==r.visible&&(s(n,r,a,function(e){return i.coerce2(n,r,u,e)}),l(n,r,a,t),a("xhoverformat"),a("yhoverformat"),a("hovertemplate"),r.contours&&"heatmap"===r.contours.coloring&&c(a,t))}},{"../../lib":287,"../contour/contours_defaults":424,"../contour/style_defaults":438,"../heatmap/label_defaults":449,"../histogram2d/sample_defaults":473,"./attributes":474}],476:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../contour/calc"),plot:e("../contour/plot").plot,layerName:"contourlayer",style:e("../contour/style"),colorbar:e("../contour/colorbar"),hoverPoints:e("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":348,"../contour/calc":418,"../contour/colorbar":420,"../contour/hover":430,"../contour/plot":435,"../contour/style":437,"../histogram/cross_trace_defaults":462,"./attributes":474,"./defaults":475}],477:[function(e,t,n){"use strict";for(var r=e("../../plots/attributes"),a=e("../../plots/template_attributes").hovertemplateAttrs,i=e("../../lib/extend").extendFlat,o=e("./constants").colormodel,s=["rgb","rgba","rgba256","hsl","hsla"],l=[],c=[],u=0;u<s.length;u++){var d=o[s[u]];l.push("For the `"+s[u]+"` colormodel, it is ["+(d.zminDflt||d.min).join(", ")+"]."),c.push("For the `"+s[u]+"` colormodel, it is ["+(d.zmaxDflt||d.max).join(", ")+"].")}t.exports=i({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:s,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:i({},r.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:a({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":281,"../../plots/attributes":330,"../../plots/template_attributes":373,"./constants":479}],478:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("./constants"),f=e("fast-isnumeric"),p=e("../../plots/cartesian/axes"),h=e("../../lib").maxRowLength,m=e("./helpers").getImageSize;t.exports=function(e,t){t._hasZ?(n=t.z.length,r=h(t.z)):t._hasSource&&(n=(i=m(t.source)).height,r=i.width);var n,r,a,i=p.getFromId(e,t.xaxis||"x"),e=p.getFromId(e,t.yaxis||"y"),o=i.d2c(t.x0)-t.dx/2,s=e.d2c(t.y0)-t.dy/2,l=[o,o+r*t.dx],c=[s,s+n*t.dy];if(i&&"log"===i.type)for(a=0;a<r;a++)l.push(o+a*t.dx);if(e&&"log"===e.type)for(a=0;a<n;a++)c.push(s+a*t.dy);return t._extremes[i._id]=p.findExtremes(i,l),t._extremes[e._id]=p.findExtremes(e,c),t._scaler=function(a){var e=d.colormodel[a.colormodel],i=(e.colormodel||a.colormodel).length;a._sArray=[];for(var t=0;t<i;t++)e.min[t]!==a.zmin[t]||e.max[t]!==a.zmax[t]?a._sArray.push(function(t,n,r,a){return function(e){return u.constrain((e-t)*n,r,a)}}(a.zmin[t],(e.max[t]-e.min[t])/(a.zmax[t]-a.zmin[t]),e.min[t],e.max[t])):a._sArray.push(function(t,n){return function(e){return u.constrain(e,t,n)}}(e.min[t],e.max[t]));return function(e){for(var t=e.slice(0,i),n=0;n<i;n++){var r=t[n];if(!f(r))return!1;t[n]=a._sArray[n](r)}return t}}(t),[{x0:o,y0:s,z:t.z,w:r,h:n}]}},{"../../lib":287,"../../plots/cartesian/axes":334,"./constants":479,"./helpers":482,"fast-isnumeric":33}],479:[function(e,t,n){"use strict";t.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(e){return e.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(e){e=e.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(e){e=e.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],480:[function(e,t,n){"use strict";var i=e("../../lib"),o=e("./attributes"),s=e("./constants"),l=e("../../snapshot/helpers").IMAGE_URL_PREFIX;t.exports=function(n,r){function e(e,t){return i.coerce(n,r,o,e,t)}e("source"),r.source&&!r.source.match(l)&&delete r.source,r._hasSource=!!r.source;var t,a=e("z");r._hasZ=!(void 0===a||!a.length||!a[0]||!a[0].length),r._hasZ||r._hasSource?(e("x0"),e("y0"),e("dx"),e("dy"),r._hasZ?(e("colormodel","rgb"),e("zmin",(t=s.colormodel[r.colormodel]).zminDflt||t.min),e("zmax",t.zmaxDflt||t.max)):r._hasSource&&(r.colormodel="rgba256",t=s.colormodel[r.colormodel],r.zmin=t.zminDflt,r.zmax=t.zmaxDflt),e("zsmooth"),e("text"),e("hovertext"),e("hovertemplate"),r._length=null):r.visible=!1}},{"../../lib":287,"../../snapshot/helpers":382,"./attributes":477,"./constants":479}],481:[function(e,t,n){"use strict";t.exports=function(e,t){return"xVal"in t&&(e.x=t.xVal),"yVal"in t&&(e.y=t.yVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e.color=t.color,e.colormodel=t.trace.colormodel,e.z||(e.z=t.color),e}},{}],482:[function(e,t,n){"use strict";var r=e("probe-image-size/sync"),a=e("../../snapshot/helpers").IMAGE_URL_PREFIX,i=e("buffer/").Buffer;n.getImageSize=function(e){e=e.replace(a,""),e=new i(e,"base64");return r(e)}},{"../../snapshot/helpers":382,"buffer/":28,"probe-image-size/sync":97}],483:[function(e,t,n){"use strict";var m=e("../../components/fx"),g=e("../../lib"),y=e("./constants");t.exports=function(e,t,n){var r=e.cd[0],a=r.trace,i=e.xa,o=e.ya;if(!(0<m.inbox(t-r.x0,t-(r.x0+r.w*a.dx),0)||0<m.inbox(n-r.y0,n-(r.y0+r.h*a.dy),0))){var s,l,c,u,d,f,p,h,t=Math.floor((t-r.x0)/a.dx),n=Math.floor(Math.abs(n-r.y0)/a.dy);if(a._hasZ?s=r.z[n][t]:a._hasSource&&(s=a._canvas.el.getContext("2d").getImageData(t,n,1,1).data),s)return(c=r.hi||a.hoverinfo)&&-1!==(c=-1!==(c=c.split("+")).indexOf("all")?["color"]:c).indexOf("color")&&(f=!0),p=(h=(c=y.colormodel[a.colormodel]).colormodel||a.colormodel).length,l=a._scaler(s),c=c.suffix,u=[],(a.hovertemplate||f)&&(u.push("["+[l[0]+c[0],l[1]+c[1],l[2]+c[2]].join(", ")),4===p&&u.push(", "+l[3]+c[3]),u.push("]"),u=u.join(""),e.extraText=h.toUpperCase()+": "+u),Array.isArray(a.hovertext)&&Array.isArray(a.hovertext[n])?d=a.hovertext[n][t]:Array.isArray(a.text)&&Array.isArray(a.text[n])&&(d=a.text[n][t]),f=o.c2p(r.y0+(n+.5)*a.dy),p=r.x0+(t+.5)*a.dx,h=r.y0+(n+.5)*a.dy,o="["+s.slice(0,a.colormodel.length).join(", ")+"]",[g.extendFlat(e,{index:[n,t],x0:i.c2p(r.x0+t*a.dx),x1:i.c2p(r.x0+(t+1)*a.dx),y0:f,y1:f,color:l,xVal:p,xLabelVal:p,yVal:h,yLabelVal:h,zLabelVal:o,text:d,hovertemplateLabels:{zLabel:o,colorLabel:u,"color[0]Label":l[0]+c[0],"color[1]Label":l[1]+c[1],"color[2]Label":l[2]+c[2],"color[3]Label":l[3]+c[3]}})]}}},{"../../components/fx":197,"../../lib":287,"./constants":479}],484:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover"),eventData:e("./event_data"),moduleType:"trace",name:"image",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":348,"./attributes":477,"./calc":478,"./defaults":480,"./event_data":481,"./hover":483,"./plot":485,"./style":486}],485:[function(e,t,n){"use strict";var S=e("@plotly/d3"),L=e("../../lib"),C=L.strTranslate,O=e("../../constants/xmlns_namespaces"),D=e("./constants"),r=L.isIOS()||L.isSafari()||L.isIE();t.exports=function(p,e,t,n){var A=e.xaxis,M=e.yaxis,E=!(r||p._context._exportedPlot);L.makeTraceGroups(n,t,"im").each(function(e){for(var h,t,m,n,r=S.select(this),g=e[0],y=g.trace,a=("fast"===y.zsmooth||!1===y.zsmooth&&E)&&!y._hasZ&&y._hasSource&&"linear"===A.type&&"linear"===M.type,i=(y._realImage=a,g.z),v=g.x0,b=g.y0,o=g.w,s=g.h,x=y.dx,_=y.dy,w=0;void 0===h&&w<o;)h=A.c2p(v+w*x),w++;for(w=o;void 0===t&&0<w;)t=A.c2p(v+w*x),w--;for(w=0;void 0===m&&w<s;)m=M.c2p(b+w*_),w++;for(w=s;void 0===n&&0<w;)n=M.c2p(b+w*_),w--;t<h&&(c=t,t=h,h=c),n<m&&(c=m,m=n,n=c),a||(h=Math.max(-.5*A._length,h),t=Math.min(1.5*A._length,t),m=Math.max(-.5*M._length,m),n=Math.min(1.5*M._length,n));var l,c,u,d,T=Math.round(t-h),k=Math.round(n-m);function f(e){function t(e){return L.constrain(Math.round(A.c2p(v+e*x)-h),0,T)}function n(e){return L.constrain(Math.round(M.c2p(b+e*_)-m),0,k)}var r,a=document.createElement("canvas"),i=(a.width=T,a.height=k,a.getContext("2d")),o=D.colormodel[y.colormodel],s=o.colormodel||y.colormodel,l=o.fmt;for(w=0;w<g.w;w++){var c=t(w),u=t(w+1);if(u!==c&&!isNaN(u)&&!isNaN(c))for(var d=0;d<g.h;d++){var f=n(d),p=n(d+1);p===f||isNaN(p)||isNaN(f)||!e(w,d)||(r=y._scaler(e(w,d)),i.fillStyle=r?s+"("+l(r).join(",")+")":"rgba(0,0,0,0)",i.fillRect(c,f,u-c,p-f))}}return a}T<=0||k<=0?r.selectAll("image").data([]).exit().remove():((l=r.selectAll("image").data([e])).enter().append("svg:image").attr({xmlns:O.svg,preserveAspectRatio:"none"}),l.exit().remove(),c=!1===y.zsmooth?D.pixelatedStyle:"",a&&(r=L.simpleMap(A.range,A.r2l),e=L.simpleMap(M.range,M.r2l),r=r[1]<r[0],e=e[1]>e[0],(r||e)&&(c+="transform:"+C((u=h+T/2)+"px",(d=m+k/2)+"px")+"scale("+(r?-1:1)+","+(e?-1:1)+")"+C(-u+"px",-d+"px")+";")),l.attr("style",c),r=new Promise(function(e){var t,n,r;y._hasZ?e():y._hasSource&&(y._canvas&&y._canvas.el.width===o&&y._canvas.el.height===s&&y._canvas.source===y.source?e():((t=document.createElement("canvas")).width=o,t.height=s,n=t.getContext("2d"),y._image=y._image||new Image,(r=y._image).onload=function(){n.drawImage(r,0,0),y._canvas={el:t,source:y.source},e()},r.setAttribute("src",y.source)))}).then(function(){var n,e;y._hasZ?e=f(function(e,t){return i[t][e]}).toDataURL("image/png"):y._hasSource&&(e=a?y.source:(n=y._canvas.el.getContext("2d").getImageData(0,0,o,s).data,f(function(e,t){t=4*(t*o+e);return[n[t],n[1+t],n[2+t],n[3+t]]}).toDataURL("image/png"))),l.attr({"xlink:href":e,height:k,width:T,x:h,y:m})}),p._promises.push(r))})}},{"../../constants/xmlns_namespaces":268,"../../lib":287,"./constants":479,"@plotly/d3":20}],486:[function(e,t,n){"use strict";var r=e("@plotly/d3");t.exports=function(e){r.select(e).selectAll(".im image").style("opacity",function(e){return e[0].trace.opacity})}},{"@plotly/d3":20}],487:[function(e,t,n){"use strict";var r=e("../../plots/attributes"),a=e("../../plots/domain").attributes,i=e("../../plots/font_attributes"),o=e("../../components/color/attributes"),s=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../plots/template_attributes").texttemplateAttrs,e=e("../../lib/extend").extendFlat,i=i({editType:"plot",arrayOk:!0,colorEditType:"plot"});t.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:e({},r.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:s({},{keys:["label","color","value","percent","text"]}),texttemplate:l({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:e({},i,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:e({},i,{}),outsidetextfont:e({},i,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:e({},i,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:a({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:e({},i,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":156,"../../lib/extend":281,"../../plots/attributes":330,"../../plots/domain":364,"../../plots/font_attributes":365,"../../plots/template_attributes":373}],488:[function(e,t,a){"use strict";var i=e("../../plots/plots");a.name="pie",a.plot=function(e,t,n,r){i.plotBasePlot(a.name,e,t,n,r)},a.clean=function(e,t,n,r){i.cleanBasePlot(a.name,e,t,n,r)}},{"../../plots/plots":371}],489:[function(e,t,n){"use strict";var v=e("fast-isnumeric"),i=e("tinycolor2"),r=e("../../components/color"),f={};function b(n){return function(e,t){return!!e&&(!!(e=i(e)).isValid()&&(e=r.addOpacity(e,e.getAlpha()),n[t]||(n[t]=e),e))}}function p(e,t){var n,r=JSON.stringify(e),a=t[r];if(!a){for(a=e.slice(),n=0;n<e.length;n++)a.push(i(e[n]).lighten(20).toHexString());for(n=0;n<e.length;n++)a.push(i(e[n]).darken(20).toHexString());t[r]=a}return a}t.exports={calc:function(e,t){var n=[],r=(e=e._fullLayout).hiddenlabels||[],a=t.labels,i=t.marker.colors||[],o=t.values,s=t._length,l=t._hasValues&&s;if(t.dlabel)for(a=new Array(s),m=0;m<s;m++)a[m]=String(t.label0+m*t.dlabel);for(var c,u,d={},f=b(e["_"+t.type+"colormap"]),p=0,h=!1,m=0;m<s;m++){if(l){if(c=o[m],!v(c))continue;c=+c}else c=1;void 0!==(g=a[m])&&""!==g||(g=m);var g,y=d[g=String(g)];void 0===y?(d[g]=n.length,(u=-1!==r.indexOf(g))||(p+=c),n.push({v:c,label:g,color:f(i[m],g),i:m,pts:[m],hidden:u})):(h=!0,(u=n[y]).v+=c,u.pts.push(m),u.hidden||(p+=c),!1===u.color&&i[m]&&(u.color=f(i[m],g)))}return n=n.filter(function(e){return 0<=e.v}),("funnelarea"===t.type?h:t.sort)&&n.sort(function(e,t){return t.v-e.v}),n[0]&&(n[0].vTotal=p),n},crossTraceCalc:function(e,t){for(var n=(n=(t||{}).type)||"pie",t=e._fullLayout,r=e.calcdata,a=t[n+"colorway"],i=t["_"+n+"colormap"],o=(t["extend"+n+"colors"]&&(a=p(a,f)),0),s=0;s<r.length;s++){var l=r[s],c=l[0].trace.type;if(c===n)for(var u=0;u<l.length;u++){var d=l[u];!1===d.color&&(i[d.label]?d.color=i[d.label]:(i[d.label]=d.color=a[o%a.length],o++))}}},makePullColorFn:b,generateExtendedColors:p}},{"../../components/color":157,"fast-isnumeric":33,tinycolor2:121}],490:[function(e,t,n){"use strict";var l=e("fast-isnumeric"),c=e("../../lib"),u=e("./attributes"),d=e("../../plots/domain").defaults,f=e("../bar/defaults").handleText;function p(e,t){var n=Array.isArray(e),r=c.isArrayOrTypedArray(t),a=Math.min(n?e.length:1/0,r?t.length:1/0);if((a=isFinite(a)?a:0)&&r){for(var i,o=0;o<a;o++){var s=t[o];if(l(s)&&0<s){i=!0;break}}i||(a=0)}return{hasLabels:n,hasValues:r,len:a}}t.exports={handleLabelsAndValues:p,supplyDefaults:function(n,r,e,t){function a(e,t){return c.coerce(n,r,u,e,t)}var i,o=p(a("labels"),a("values")),s=o.len;r._hasLabels=o.hasLabels,r._hasValues=o.hasValues,!r._hasLabels&&r._hasValues&&(a("label0"),a("dlabel")),s?(r._length=s,a("marker.line.width")&&a("marker.line.color"),a("marker.colors"),a("scalegroup"),o=a("text"),(s=a("texttemplate"))||(i=a("textinfo",Array.isArray(o)?"text+percent":"percent")),a("hovertext"),a("hovertemplate"),(s||i&&"none"!==i)&&(o=a("textposition"),f(n,r,t,a,o,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),!Array.isArray(o)&&"auto"!==o&&"outside"!==o||a("automargin"),"inside"!==o&&"auto"!==o&&!Array.isArray(o)||a("insidetextorientation")),d(r,t,a),s=a("hole"),a("title.text")&&(i=a("title.position",s?"middle center":"top center"),s||"middle center"!==i||(r.title.position="top center"),c.coerceFont(a,"title.font",t.font)),a("sort"),a("direction"),a("rotation"),a("pull")):r.visible=!1}}},{"../../lib":287,"../../plots/domain":364,"../bar/defaults":392,"./attributes":487,"fast-isnumeric":33}],491:[function(e,t,n){"use strict";var r=e("../../components/fx/helpers").appendArrayMultiPointValues;t.exports=function(e,t){var n={curveNumber:t.index,pointNumbers:e.pts,data:t._input,fullData:t,label:e.label,color:e.color,value:e.v,percent:e.percent,text:e.text,bbox:e.bbox,v:e.v};return 1===e.pts.length&&(n.pointNumber=n.i=e.pts[0]),r(n,t,e.pts),"funnelarea"===t.type&&(delete n.v,delete n.i),n}},{"../../components/fx/helpers":193}],492:[function(e,t,n){"use strict";var r=e("../../lib");function a(e){return-1!==e.indexOf("e")?e.replace(/[.]?0+e/,"e"):-1!==e.indexOf(".")?e.replace(/[.]?0+$/,""):e}n.formatPiePercent=function(e,t){e=a((100*e).toPrecision(3));return r.numSeparate(e,t)+"%"},n.formatPieValue=function(e,t){e=a(e.toPrecision(10));return r.numSeparate(e,t)},n.getFirstFilled=function(e,t){if(Array.isArray(e))for(var n=0;n<t.length;n++){var r=e[t[n]];if(r||0===r||""===r)return r}},n.castOption=function(e,t){return Array.isArray(e)?n.getFirstFilled(e,t):e||void 0},n.getRotationAngle=function(e){return("auto"===e?0:e)*Math.PI/180}},{"../../lib":287}],493:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,supplyLayoutDefaults:e("./layout_defaults"),layoutAttributes:e("./layout_attributes"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style"),styleOne:e("./style_one"),moduleType:"trace",name:"pie",basePlotModule:e("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":487,"./base_plot":488,"./calc":489,"./defaults":490,"./layout_attributes":494,"./layout_defaults":495,"./plot":496,"./style":497,"./style_one":498}],494:[function(e,t,n){"use strict";t.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],495:[function(e,t,n){"use strict";var a=e("../../lib"),i=e("./layout_attributes");t.exports=function(n,r){function e(e,t){a.coerce(n,r,i,e,t)}e("hiddenlabels"),e("piecolorway",r.colorway),e("extendpiecolors")}},{"../../lib":287,"./layout_attributes":494}],496:[function(e,t,u){"use strict";var D=e("@plotly/d3"),I=e("../../plots/plots"),y=e("../../components/fx"),R=e("../../components/color"),P=e("../../components/drawing"),N=e("../../lib"),F=N.strScale,z=N.strTranslate,j=e("../../lib/svg_text_utils"),n=e("../bar/uniform_text"),q=n.recordMinTextSize,r=n.clearMinTextSize,o=e("../bar/constants").TEXTPAD,H=e("./helpers"),v=e("./event_data"),f=e("../../lib").isValidTextValue;function B(e,d,t){var f=t[0],p=f.cx,h=f.cy,m=f.trace,g="funnelarea"===m.type;"_hasHoverLabel"in m||(m._hasHoverLabel=!1),"_hasHoverEvent"in m||(m._hasHoverEvent=!1),e.on("mouseover",function(e){var t,n,r,a,i,o,s,l,c=d._fullLayout,u=d._fullData[m.index];d._dragging||!1===c.hovermode||(t=u.hoverinfo,"all"===(t=Array.isArray(t)?y.castHoverinfo({hoverinfo:[H.castOption(t,e.pts)],_module:m._module},c,0):t)&&(t="label+text+value+percent+name"),(u.hovertemplate||"none"!==t&&"skip"!==t&&t)&&(n=e.rInscribed||0,r=p+e.pxmid[0]*(1-n),a=h+e.pxmid[1]*(1-n),s=c.separators,i=[],t&&-1!==t.indexOf("label")&&i.push(e.label),e.text=H.castOption(u.hovertext||u.text,e.pts),t&&-1!==t.indexOf("text")&&(o=e.text,N.isValidTextValue(o)&&i.push(o)),e.value=e.v,e.valueLabel=H.formatPieValue(e.v,s),t&&-1!==t.indexOf("value")&&i.push(e.valueLabel),e.percent=e.v/f.vTotal,e.percentLabel=H.formatPiePercent(e.percent,s),t&&-1!==t.indexOf("percent")&&i.push(e.percentLabel),s=(o=u.hoverlabel).font,l=[],y.loneHover({trace:m,x0:r-n*f.r,x1:r+n*f.r,y:a,_x0:g?p+e.TL[0]:r-n*f.r,_x1:g?p+e.TR[0]:r+n*f.r,_y0:g?h+e.TL[1]:a-n*f.r,_y1:g?h+e.BL[1]:a+n*f.r,text:i.join("<br>"),name:u.hovertemplate||-1!==t.indexOf("name")?u.name:void 0,idealAlign:e.pxmid[0]<0?"left":"right",color:H.castOption(o.bgcolor,e.pts)||e.color,borderColor:H.castOption(o.bordercolor,e.pts),fontFamily:H.castOption(s.family,e.pts),fontSize:H.castOption(s.size,e.pts),fontColor:H.castOption(s.color,e.pts),nameLength:H.castOption(o.namelength,e.pts),textAlign:H.castOption(o.align,e.pts),hovertemplate:H.castOption(u.hovertemplate,e.pts),hovertemplateLabels:e,eventData:[v(e,u)]},{container:c._hoverlayer.node(),outerContainer:c._paper.node(),gd:d,inOut_bbox:l}),e.bbox=l[0],m._hasHoverLabel=!0),m._hasHoverEvent=!0,d.emit("plotly_hover",{points:[v(e,u)],event:D.event}))}),e.on("mouseout",function(e){var t=d._fullLayout,n=d._fullData[m.index],r=D.select(this).datum();m._hasHoverEvent&&(e.originalEvent=D.event,d.emit("plotly_unhover",{points:[v(r,n)],event:D.event}),m._hasHoverEvent=!1),m._hasHoverLabel&&(y.loneUnhover(t._hoverlayer.node()),m._hasHoverLabel=!1)}),e.on("click",function(e){var t=d._fullLayout,n=d._fullData[m.index];d._dragging||!1===t.hovermode||(d._hoverdata=[v(e,n)],y.click(d,D.event))})}function U(e,t,n){var r=H.castOption(e.insidetextfont.color,t.pts),a=(!r&&e._input.textfont&&(r=H.castOption(e._input.textfont.color,t.pts)),H.castOption(e.insidetextfont.family,t.pts)||H.castOption(e.textfont.family,t.pts)||n.family),e=H.castOption(e.insidetextfont.size,t.pts)||H.castOption(e.textfont.size,t.pts)||n.size;return{color:r||R.contrast(t.color),family:a,size:e}}function a(e,t){for(var n,r,a,i=0;i<e.length;i++)(a=(r=e[i][0]).trace).title.text&&(n=a.title.text,a._meta&&(n=N.templateString(n,a._meta)),n=P.tester.append("text").attr("data-notex",1).text(n).call(P.font,a.title.font).call(j.convertToTspans,t),a=P.bBox(n.node(),!0),r.titleBox={width:a.width,height:a.height},n.remove())}function V(i,o,e){var s=e.r||o.rpx1,t=o.rInscribed;if(o.startangle===o.stopangle)return{rCenter:1-t,scale:0,rotate:0,textPosAngle:0};var l=o.ring,n=1===l&&Math.abs(o.startangle-o.stopangle)===2*Math.PI,r=o.halfangle,a=o.midangle,e=e.trace.insidetextorientation,c="horizontal"===e,u="tangential"===e,d="radial"===e,f="auto"===e,p=[];if(!f){var h,m=function(e,t){var n,r,a;r=e,a=(n=o).startangle,n=n.stopangle,(r<a&&n<r||a<r&&r<n)&&(n=(a=Math.abs(e-o.startangle))<(r=Math.abs(e-o.stopangle))?a:r,(g="tan"===t?w(i,s,l,n,0):_(i,s,l,n,Math.PI/2)).textPosAngle=e,p.push(g))};if(c||u){for(h=4;-4<=h;h-=2)m(Math.PI*h,"tan");for(h=4;-4<=h;h-=2)m(Math.PI*(h+1),"tan")}if(c||d){for(h=4;-4<=h;h-=2)m(Math.PI*(h+1.5),"rad");for(h=4;-4<=h;h-=2)m(Math.PI*(h+.5),"rad")}}if(n||f||c){var g,e=Math.sqrt(i.width*i.width+i.height*i.height);if((g={scale:t*s*2/e,rCenter:1-t,rotate:0}).textPosAngle=(o.startangle+o.stopangle)/2,1<=g.scale)return g;p.push(g)}(f||d)&&((g=_(i,s,l,r,a)).textPosAngle=(o.startangle+o.stopangle)/2,p.push(g)),(f||u)&&((g=w(i,s,l,r,a)).textPosAngle=(o.startangle+o.stopangle)/2,p.push(g));for(var y=0,v=0,b=0;b<p.length;b++){var x=p[b].scale;if(v<x&&(v=x,y=b),!f&&1<=v)break}return p[y]}function _(e,t,n,r,a){t=Math.max(0,t-2*o);var i=e.width/e.height,r=c(i,r,t,n);return{scale:2*r/e.height,rCenter:s(i,r/t),rotate:l(a)}}function w(e,t,n,r,a){t=Math.max(0,t-2*o);var i=e.height/e.width,r=c(i,r,t,n);return{scale:2*r/e.width,rCenter:s(i,r/t),rotate:l(a+Math.PI/2)}}function s(e,t){return Math.cos(t)-e*t}function l(e){return(180/Math.PI*e+720)%180-90}function c(e,t,n,r){t=e+1/(2*Math.tan(t));return n*Math.min(1/(Math.sqrt(t*t+.5)+t),r/(Math.sqrt(e*e+r/2)+e))}function Y(e,t){var n=t.pxmid[0],t=t.pxmid[1],r=e.width/2,e=e.height/2;return n<0&&(r*=-1),t<0&&(e*=-1),{scale:1,rCenter:1,rotate:0,x:r+Math.abs(e)*(0<r?1:-1)/2,y:e/(1+n*n/(t*t)),outside:!0}}function $(e,t){var n,r=e.trace,a={x:e.cx,y:e.cy},i={tx:0,ty:0},o=(i.ty+=r.title.font.size,n=k(r),-1!==r.title.position.indexOf("top")?(a.y-=(1+n)*e.r,i.ty-=e.titleBox.height):-1!==r.title.position.indexOf("bottom")&&(a.y+=(1+n)*e.r),o=e.r,s=e.trace.aspectratio,o/(void 0===s?1:s)),s=t.w*(r.domain.x[1]-r.domain.x[0])/2;return-1!==r.title.position.indexOf("left")?(s+=o,a.x-=(1+n)*o,i.tx+=e.titleBox.width/2):-1!==r.title.position.indexOf("center")?s*=2:-1!==r.title.position.indexOf("right")&&(s+=o,a.x+=(1+n)*o,i.tx-=e.titleBox.width/2),r=s/e.titleBox.width,n=T(e,t)/e.titleBox.height,{x:a.x,y:a.y,scale:Math.min(r,n),tx:i.tx,ty:i.ty}}function T(e,t){var n=e.trace,t=t.h*(n.domain.y[1]-n.domain.y[0]);return Math.min(e.titleBox.height,t/2)}function k(e){var t,n=e.pull;if(!n)return 0;if(Array.isArray(n))for(t=n=0;t<e.pull.length;t++)e.pull[t]>n&&(n=e.pull[t]);return n}function i(e,t){for(var n=[],r=0;r<e.length;r++){var a=e[r][0],i=a.trace,o=i.domain,s=t.w*(o.x[1]-o.x[0]),o=t.h*(o.y[1]-o.y[0]),s=(i.title.text&&"middle center"!==i.title.position&&(o-=T(a,t)),s/2),l=o/2;"funnelarea"!==i.type||i.scalegroup||(l/=i.aspectratio),a.r=Math.min(s,l)/(1+k(i)),a.cx=t.l+t.w*(i.domain.x[1]+i.domain.x[0])/2,a.cy=t.t+t.h*(1-i.domain.y[0])-o/2,i.title.text&&-1!==i.title.position.indexOf("bottom")&&(a.cy-=T(a,t)),i.scalegroup&&-1===n.indexOf(i.scalegroup)&&n.push(i.scalegroup)}for(var c,u,d,f,p,h,m=e,g=n,y=0;y<g.length;y++){var v,b=1/0,x=g[y];for(u=0;u<m.length;u++)c=m[u][0],(d=c.trace).scalegroup===x&&("pie"===d.type?f=c.r*c.r:"funnelarea"===d.type&&(1<d.aspectratio?(p=c.r,h=p/d.aspectratio):(h=c.r,p=h*d.aspectratio),p*=(1+d.baseratio)/2,f=p*h),b=Math.min(b,f/c.vTotal));for(u=0;u<m.length;u++)c=m[u][0],(d=c.trace).scalegroup===x&&(v=b*c.vTotal,"funnelarea"===d.type&&(v=(v/=(1+d.baseratio)/2)/d.aspectratio),c.r=Math.sqrt(v))}}function G(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}function W(e,t,n){var r,a,i,o,s,l=e._fullLayout,c=n.trace,u=c.texttemplate,d=c.textinfo;!u&&d&&"none"!==d&&(r=d.split("+"),a=(d=function(e){return-1!==r.indexOf(e)})("label"),i=d("text"),s=d("value"),d=d("percent"),o=l.separators,a=a?[t.label]:[],i&&(i=H.getFirstFilled(c.text,t.pts),f(i)&&a.push(i)),s&&a.push(H.formatPieValue(t.v,o)),d&&a.push(H.formatPiePercent(t.v/n.vTotal,o)),t.text=a.join("<br>")),u&&((i=N.castOption(c,t.i,"texttemplate"))?(d={label:(s=t).label,value:s.v,valueLabel:H.formatPieValue(s.v,l.separators),percent:s.v/n.vTotal,percentLabel:H.formatPiePercent(s.v/n.vTotal,l.separators),color:s.color,text:s.text,customdata:N.castOption(c,s.i,"customdata")},o=H.getFirstFilled(c.text,t.pts),!f(o)&&""!==o||(d.text=o),t.text=N.texttemplateString(i,d,e._fullLayout._d3locale,d,c._meta||{})):t.text="")}function Z(e,t){var n=e.rotate*Math.PI/180,r=Math.cos(n),n=Math.sin(n),a=(t.left+t.right)/2,t=(t.top+t.bottom)/2;e.textX=a*r-t*n,e.textY=a*n+t*r,e.noCenter=!0}t.exports={plot:function(L,e){var C=L._fullLayout,O=C._size,t=(r("pie",C),a(e,L),i(e,O),N.makeTraceGroups(C._pielayer,e,"trace").each(function(A){var M=D.select(this),E=A[0],S=E.trace;!function(e){var t,n,r,a=e[0],i=a.r,o=a.trace,s=H.getRotationAngle(o.rotation),l=2*Math.PI/a.vTotal,c="px0",u="px1";if("counterclockwise"===o.direction){for(t=0;t<e.length&&e[t].hidden;t++);if(t===e.length)return;s+=l*e[t].v,l*=-1,c="px1",u="px0"}for(r=G(i,s),t=0;t<e.length;t++)(n=e[t]).hidden||(n[c]=r,n.startangle=s,s+=l*n.v/2,n.pxmid=G(i,s),n.midangle=s,s+=l*n.v/2,r=G(i,s),n.stopangle=s,n[u]=r,n.largeArc=n.v>a.vTotal/2?1:0,n.halfangle=Math.PI*Math.min(n.v/a.vTotal,.5),n.ring=1-o.hole,n.rInscribed=function(e,t){return e.v!==t.vTotal||t.trace.hole?Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2):1}(n,a))}(A),M.attr("stroke-linejoin","round"),M.each(function(){var s,e,t,n=D.select(this).selectAll("g.slice").data(A),i=(n.enter().append("g").classed("slice",!0),n.exit().remove(),[[[],[]],[[],[]]]),p=!1,r=(n.each(function(l,c){var u,d,e,t,n,f,r;function a(e,t,n,r){var a=r*(t[0]-e[0]),t=r*(t[1]-e[1]);return"a"+r*E.r+","+r*E.r+" 0 "+l.largeArc+(n?" 1 ":" 0 ")+a+","+t}l.hidden?D.select(this).selectAll("path,g").remove():(l.pointNumber=l.i,l.curveNumber=S.index,i[l.pxmid[1]<0?0:1][l.pxmid[0]<0?0:1].push(l),u=E.cx,d=E.cy,(t=(e=D.select(this)).selectAll("path.surface").data([l])).enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),e.call(B,L,A),S.pull&&0<(r=+H.castOption(S.pull,l.pts)||0)&&(u+=r*l.pxmid[0],d+=r*l.pxmid[1]),l.cxFinal=u,l.cyFinal=d,r=S.hole,l.v===E.vTotal?(n="M"+(u+l.px0[0])+","+(d+l.px0[1])+a(l.px0,l.pxmid,!0,1)+a(l.pxmid,l.px0,!0,1)+"Z",r?t.attr("d","M"+(u+r*l.px0[0])+","+(d+r*l.px0[1])+a(l.px0,l.pxmid,!1,r)+a(l.pxmid,l.px0,!1,r)+"Z"+n):t.attr("d",n)):(n=a(l.px0,l.px1,!0,1),r?t.attr("d","M"+(u+r*l.px1[0])+","+(d+r*l.px1[1])+a(l.px1,l.px0,!1,r)+"l"+(r=1-r)*l.px0[0]+","+r*l.px0[1]+n+"Z"):t.attr("d","M"+u+","+d+"l"+l.px0[0]+","+l.px0[1]+n+"Z")),W(L,l,E),f=H.castOption(S.textposition,l.pts),(r=e.selectAll("g.slicetext").data(l.text&&"none"!==f?[0]:[])).enter().append("g").classed("slicetext",!0),r.exit().remove(),r.each(function(){var e,t,n,r=N.ensureSingle(D.select(this),"text","",function(e){e.attr("data-notex",1)}),a=N.ensureUniformFontSize(L,"outside"===f?(s=S,a=l,i=C.font,e=H.castOption(s.outsidetextfont.color,a.pts)||H.castOption(s.textfont.color,a.pts)||i.color,o=H.castOption(s.outsidetextfont.family,a.pts)||H.castOption(s.textfont.family,a.pts)||i.family,s=H.castOption(s.outsidetextfont.size,a.pts)||H.castOption(s.textfont.size,a.pts)||i.size,{color:e,family:o,size:s}):U(S,l,C.font)),i=(r.text(l.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(P.font,a).call(j.convertToTspans,L),P.bBox(r.node())),o=("outside"===f?t=Y(i,l):(t=V(i,l,E),"auto"===f&&t.scale<1&&(e=N.ensureUniformFontSize(L,S.outsidetextfont),r.call(P.font,e),t=Y(i=P.bBox(r.node()),l))),t.textPosAngle),s=void 0===o?l.pxmid:G(E.r,o);t.targetX=u+s[0]*t.rCenter+(t.x||0),t.targetY=d+s[1]*t.rCenter+(t.y||0),Z(t,i),t.outside&&(n=t.targetY,l.yLabelMin=n-i.height/2,l.yLabelMid=n,l.yLabelMax=n+i.height/2,l.labelExtraX=0,l.labelExtraY=0,p=!0),t.fontSize=a.size,q(S.type,t,C),A[c].transform=t,r.attr("transform",N.getTextTransform(t))}))}),D.select(this).selectAll("g.titletext").data(S.title.text?[0]:[]));if(r.enter().append("g").classed("titletext",!0),r.exit().remove(),r.each(function(){var e,t=N.ensureSingle(D.select(this),"text","",function(e){e.attr("data-notex",1)}),n=S.title.text;S._meta&&(n=N.templateString(n,S._meta)),t.text(n).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(P.font,S.title.font).call(j.convertToTspans,L),e="middle center"===S.title.position?(n=E,e=Math.sqrt(n.titleBox.width*n.titleBox.width+n.titleBox.height*n.titleBox.height),{x:n.cx,y:n.cy,scale:n.trace.hole*n.r*2/e,tx:0,ty:-n.titleBox.height/2+n.trace.title.font.size}):$(E,O),t.attr("transform",z(e.x,e.y)+F(Math.min(1,e.scale))+z(e.tx,e.ty))}),p){var a,c,o,u,d,f,h,l,m,g,y,v,b,x=i,_=S;function w(e,t){return e.pxmid[1]-t.pxmid[1]}function T(e,t){return t.pxmid[1]-e.pxmid[1]}for(c=0;c<2;c++)for(o=c?w:T,d=c?Math.max:Math.min,h=c?1:-1,a=0;a<2;a++){for(u=a?Math.max:Math.min,f=a?1:-1,(l=x[c][a]).sort(o),m=x[1-c][a],g=m.concat(l),v=[],y=0;y<l.length;y++)void 0!==l[y].yLabelMid&&v.push(l[y]);for(b=!1,y=0;c&&y<m.length;y++)if(void 0!==m[y].yLabelMid){b=m[y];break}for(y=0;y<v.length;y++){var k=y&&v[y-1];b&&!y&&(k=b),!function(e,t){var n,r,a,t=(t=t||{}).labelExtraY+(c?t.yLabelMax:t.yLabelMin),i=c?e.yLabelMin:e.yLabelMax,o=c?e.yLabelMax:e.yLabelMin,s=e.cyFinal+d(e.px0[1],e.px1[1]),l=t-i;if(0<l*h&&(e.labelExtraY=l),Array.isArray(_.pull))for(r=0;r<g.length;r++)(a=g[r])===e||(H.castOption(_.pull,e.pts)||0)>=(H.castOption(_.pull,a.pts)||0)||(0<(e.pxmid[1]-a.pxmid[1])*h?0<(l=a.cyFinal+d(a.px0[1],a.px1[1])-i-e.labelExtraY)*h&&(e.labelExtraY+=l):0<(o+e.labelExtraY-s)*h&&(n=3*f*Math.abs(r-g.indexOf(e)),0<(a=a.cxFinal+u(a.px0[0],a.px1[0])+n-(e.cxFinal+e.pxmid[0])-e.labelExtraX)*f&&(e.labelExtraX+=a)))}(v[y],k)}}}s=S,n.each(function(e){var t,n,r,a,i,o=D.select(this);e.labelExtraX||e.labelExtraY?(t=o.select("g.slicetext text"),e.transform.targetX+=e.labelExtraX,e.transform.targetY+=e.labelExtraY,t.attr("transform",N.getTextTransform(e.transform)),n="M"+(t=e.cxFinal+e.pxmid[0])+","+(e.cyFinal+e.pxmid[1]),r=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4,e.labelExtraX?(a=e.labelExtraX*e.pxmid[1]/e.pxmid[0],i=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]),Math.abs(a)>Math.abs(i)?n+="l"+i*e.pxmid[0]/e.pxmid[1]+","+i+"H"+(t+e.labelExtraX+r):n+="l"+e.labelExtraX+","+a+"v"+(i-a)+"h"+r):n+="V"+(e.yLabelMid+e.labelExtraY)+"h"+r,N.ensureSingle(o,"path","textline").call(R.stroke,s.outsidetextfont.color).attr({"stroke-width":Math.min(2,s.outsidetextfont.size/8),d:n,fill:"none"})):o.select("path.textline").remove()}),p&&S.automargin&&(r=P.bBox(M.node()),n=S.domain,e=O.w*(n.x[1]-n.x[0]),t=O.h*(n.y[1]-n.y[0]),e=(.5*e-E.r)/O.w,t=(.5*t-E.r)/O.h,I.autoMargin(L,"pie."+S.uid+".automargin",{xl:n.x[0]-e,xr:n.x[1]+e,yb:n.y[0]-t,yt:n.y[1]+t,l:Math.max(E.cx-E.r-r.left,0),r:Math.max(r.right-(E.cx+E.r),0),b:Math.max(r.bottom-(E.cy+E.r),0),t:Math.max(E.cy-E.r-r.top,0),pad:5}))})}));setTimeout(function(){t.selectAll("tspan").each(function(){var e=D.select(this);e.attr("dy")&&e.attr("dy",e.attr("dy"))})},0)},formatSliceLabel:W,transformInsideText:V,determineInsideTextFont:U,positionTitleOutside:$,prerenderTitles:a,layoutAreas:i,attachFxHandlers:B,computeTransform:Z}},{"../../components/color":157,"../../components/drawing":179,"../../components/fx":197,"../../lib":287,"../../lib/svg_text_utils":310,"../../plots/plots":371,"../bar/constants":390,"../bar/uniform_text":404,"./event_data":491,"./helpers":492,"@plotly/d3":20}],497:[function(e,t,n){"use strict";var r=e("@plotly/d3"),a=e("./style_one"),i=e("../bar/uniform_text").resizeText;t.exports=function(e){var t=e._fullLayout._pielayer.selectAll(".trace");i(e,t,"pie"),t.each(function(e){var t=e[0].trace,e=r.select(this);e.style({opacity:t.opacity}),e.selectAll("path.surface").each(function(e){r.select(this).call(a,e,t)})})}},{"../bar/uniform_text":404,"./style_one":498,"@plotly/d3":20}],498:[function(e,t,n){"use strict";var a=e("../../components/color"),i=e("./helpers").castOption;t.exports=function(e,t,n){var n=n.marker.line,r=i(n.color,t.pts)||a.defaultLine,n=i(n.width,t.pts)||0;e.style("stroke-width",n).call(a.fill,t.color).call(a.stroke,r)}},{"../../components/color":157,"./helpers":492}],499:[function(e,t,n){"use strict";var a=e("../../lib");t.exports=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;a.mergeArray(t.text,e,"tx"),a.mergeArray(t.texttemplate,e,"txt"),a.mergeArray(t.hovertext,e,"htx"),a.mergeArray(t.customdata,e,"data"),a.mergeArray(t.textposition,e,"tp"),t.textfont&&(a.mergeArrayCastPositive(t.textfont.size,e,"ts"),a.mergeArray(t.textfont.color,e,"tc"),a.mergeArray(t.textfont.family,e,"tf"));var r,t=t.marker;t&&(a.mergeArrayCastPositive(t.size,e,"ms"),a.mergeArrayCastPositive(t.opacity,e,"mo"),a.mergeArray(t.symbol,e,"mx"),a.mergeArray(t.color,e,"mc"),r=t.line,t.line&&(a.mergeArray(r.color,e,"mlc"),a.mergeArrayCastPositive(r.width,e,"mlw")),(r=t.gradient)&&"none"!==r.type&&(a.mergeArray(r.type,e,"mgt"),a.mergeArray(r.color,e,"mgc")))}},{"../../lib":287}],500:[function(e,t,n){"use strict";var r=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=e("../../plots/template_attributes").texttemplateAttrs,i=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../components/colorscale/attributes"),s=e("../../plots/font_attributes"),l=e("../../components/drawing/attributes").dash,c=e("../../components/drawing"),u=e("./constants"),e=e("../../lib/extend").extendFlat;function d(){return{valType:"any",dflt:0,editType:"calc"}}function f(){return{valType:"any",editType:"calc"}}function p(){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:d(),yperiod:d(),xperiod0:f(),yperiod0:f(),xperiodalignment:p(),yperiodalignment:p(),xhoverformat:r("x"),yhoverformat:r("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:a({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:i({},{keys:u.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:e({},l,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:e({symbol:{valType:"enumerated",values:c.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:e({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},o("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},o("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:s({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":164,"../../components/drawing":179,"../../components/drawing/attributes":178,"../../lib/extend":281,"../../plots/cartesian/axis_format_attributes":337,"../../plots/font_attributes":365,"../../plots/template_attributes":373,"./constants":504}],501:[function(e,t,n){"use strict";var I=e("fast-isnumeric"),R=e("../../lib"),P=e("../../plots/cartesian/axes"),N=e("../../plots/cartesian/align_period"),F=e("../../constants/numerical").BADNUM,h=e("./subtypes"),z=e("./colorscale_calc"),j=e("./arrays_to_calcdata"),q=e("./calc_selection");function H(e,t,n,r,a,i,o){var s=t._length,e=e._fullLayout,l=n._id,c=r._id,u=e._firstScatter[m(t)]===t.uid,e=(V(t,e,n,r)||{}).orientation,d=t.fill,f=(n._minDtick=0,{padded:!(r._minDtick=0)}),p={padded:!0},o=(o&&(f.ppad=p.ppad=o),s<2||a[0]!==a[s-1]||i[0]!==i[s-1]);o&&("tozerox"===d||"tonextx"===d&&(u||"h"===e))?f.tozero=!0:(t.error_y||{}).visible||"tonexty"!==d&&"tozeroy"!==d&&(h.hasMarkers(t)||h.hasText(t))||(f.padded=!1,f.ppad=0),o&&("tozeroy"===d||"tonexty"===d&&(u||"v"===e))?p.tozero=!0:"tonextx"!==d&&"tozerox"!==d||(p.padded=!1),l&&(t._extremes[l]=P.findExtremes(n,a,f)),c&&(t._extremes[c]=P.findExtremes(r,i,p))}function B(e,t){if(h.hasMarkers(e)){var n=e.marker,r=1.6*(e.marker.sizeref||1),a="area"===e.marker.sizemode?function(e){return Math.max(Math.sqrt((e||0)/r),3)}:function(e){return Math.max((e||0)/r,3)};if(R.isArrayOrTypedArray(n.size)){for(var i={type:"linear"},o=(P.setConvert(i),i.makeCalcdata(e.marker,"size")),s=new Array(t),l=0;l<t;l++)s[l]=a(o[l]);return s}return a(n.size)}}function U(e,t){var n=m(t),e=e._firstScatter;e[n]||(e[n]=t.uid)}function m(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function V(e,t,n,r){var e=e.stackgroup;if(e)return t=t._scatterStackOpts[n._id+r._id][e],e="v"===t.orientation?r:n,"linear"===e.type||"log"===e.type?t:void 0}t.exports={calc:function(e,t){for(var n,r,a,i,o,s,l=e._fullLayout,c=P.getFromId(e,t.xaxis||"x"),u=P.getFromId(e,t.yaxis||"y"),d=c.makeCalcdata(t,"x"),f=u.makeCalcdata(t,"y"),p=N(t,c,"x",d),h=N(t,u,"y",f),m=p.vals,g=h.vals,y=t._length,v=new Array(y),b=t.ids,x=V(t,l,c,u),_=!1,w=(U(l,t),"x"),T="y",k=(x?(R.pushUnique(x.traceIndices,t._expandedIndex),n="v"===x.orientation,s=n?(T="s","x"):(w="s","y"),i="interpolate"===x.stackgaps):H(e,t,c,u,m,g,B(t,y)),!!t.xperiodalignment),A=!!t.yperiodalignment,M=0;M<y;M++){var E=v[M]={},S=I(m[M]),L=I(g[M]);S&&L?(E[w]=m[M],E[T]=g[M],k&&(E.orig_x=d[M],E.xEnd=p.ends[M],E.xStart=p.starts[M]),A&&(E.orig_y=f[M],E.yEnd=h.ends[M],E.yStart=h.starts[M])):x&&(n?S:L)?(E[s]=(n?m:g)[M],E.gap=!0,i?(E.s=F,_=!0):E.s=0):E[w]=E[T]=F,b&&(E.id=String(b[M]))}if(j(v,t),z(e,t),q(v,t),x){for(M=0;M<v.length;)v[M][s]===F?v.splice(M,1):M++;if(R.sort(v,function(e,t){return e[s]-t[s]||e.i-t.i}),_){for(M=0;M<v.length-1&&v[M].gap;)M++;for(o=(o=v[M].s)||(v[M].s=0),r=0;r<M;r++)v[r].s=o;for(a=v.length-1;M<a&&v[a].gap;)a--;for(o=v[a].s,r=v.length-1;a<r;r--)v[r].s=o;for(;M<a;)if(v[++M].gap){for(r=M+1;v[r].gap;)r++;for(var C=v[M-1][s],O=v[M-1].s,D=(v[r].s-O)/(v[r][s]-C);M<r;)v[M].s=O+(v[M][s]-C)*D,M++}}}return v},calcMarkerSize:B,calcAxisExpansion:H,setFirstScatter:U,getStackOpts:V}},{"../../constants/numerical":267,"../../lib":287,"../../plots/cartesian/align_period":331,"../../plots/cartesian/axes":334,"./arrays_to_calcdata":499,"./calc_selection":502,"./colorscale_calc":503,"./subtypes":525,"fast-isnumeric":33}],502:[function(e,t,n){"use strict";var r=e("../../lib");t.exports=function(e,t){r.isArrayOrTypedArray(t.selectedpoints)&&r.tagSelected(e,t)}},{"../../lib":287}],503:[function(e,t,n){"use strict";var r=e("../../components/colorscale/helpers").hasColorscale,a=e("../../components/colorscale/calc"),i=e("./subtypes");t.exports=function(e,t){i.hasLines(t)&&r(t,"line")&&a(e,t,{vals:t.line.color,containerStr:"line",cLetter:"c"}),i.hasMarkers(t)&&(r(t,"marker")&&a(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),r(t,"marker.line")&&a(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":165,"../../components/colorscale/helpers":168,"./subtypes":525}],504:[function(e,t,n){"use strict";t.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],505:[function(e,t,n){"use strict";var D=e("./calc");function I(e,t,n,r,a,i,o){var a={i:null,gap:a[r]=!0,s:0};a[o]=n,e.splice(t,0,a),t&&n===e[t-1][o]?(r=e[t-1],a.s=r.s,a.i=r.i,a.gap=r.gap):i&&(a.s=(r=n,i=o,n=(a=e)[t-1],(a=a[t+1])?n?n.s+(a.s-n.s)*(r-n[i])/(a[i]-n[i]):a.s:n.s)),t||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}t.exports=function(e,t){var n=t.xaxis,r=t.yaxis,t=n._id+r._id,a=e._fullLayout._scatterStackOpts[t];if(a){var i,o,s,l,c,u,d,f,p,h,m,g=e.calcdata;for(m in a){var y,v=(y=a[m]).traceIndices;if(v.length){for(u="interpolate"===y.stackgaps,d=y.groupnorm,p="v"===y.orientation?(f="x","y"):(f="y","x"),h=new Array(v.length),_=0;_<h.length;_++)h[_]=!1;for(var b=g[v[0]],x=new Array(b.length),_=0;_<b.length;_++)x[_]=b[_][f];for(_=1;_<v.length;_++){for(k=g[v[_]],L=i=0;L<k.length;L++){for(s=k[L][f];s>x[i]&&i<x.length;i++)I(k,L,x[i],_,h,u,f),L++;if(s!==x[i]){for(o=0;o<_;o++)I(g[v[o]],i,s,o,h,u,f);x.splice(i,0,s)}i++}for(;i<x.length;i++)I(k,L,x[i],_,h,u,f),L++}var w=x.length;for(L=0;L<b.length;L++){for(l=b[L][p]=b[L].s,_=1;_<v.length;_++)(k=g[v[_]])[0].trace._rawLength=k[0].trace._length,k[0].trace._length=w,l+=k[L].s,k[L][p]=l;if(d)for(c=("fraction"===d?l:l/100)||1,_=0;_<v.length;_++){var T=g[v[_]][L];T[p]/=c,T.sNorm=T.s/c}}for(_=0;_<v.length;_++){var k,A=(k=g[v[_]])[0].trace,M=D.calcMarkerSize(A,A._rawLength),E=Array.isArray(M);if(M&&h[_]||E)for(var S=M,M=new Array(w),L=0;L<w;L++)M[L]=k[L].gap?0:E?S[k[L].i]:S;var C=new Array(w),O=new Array(w);for(L=0;L<w;L++)C[L]=k[L].x,O[L]=k[L].y;D.calcAxisExpansion(e,A,n,r,C,O,M),k[0].t.orientation=y.orientation}}}}}},{"./calc":501}],506:[function(e,t,n){"use strict";t.exports=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("scatter"===n.type){var r=n.fill;if("none"!==r&&"toself"!==r&&(n.opacity=void 0,"tonexty"===r||"tonextx"===r))for(var a=t-1;0<=a;a--){var i=e[a];if("scatter"===i.type&&i.xaxis===n.xaxis&&i.yaxis===n.yaxis){i.opacity=void 0;break}}}}}},{}],507:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../registry"),c=e("./attributes"),u=e("./constants"),d=e("./subtypes"),f=e("./xy_defaults"),p=e("./period_defaults"),h=e("./stack_defaults"),m=e("./marker_defaults"),g=e("./line_defaults"),y=e("./line_shape_defaults"),v=e("./text_defaults"),b=e("./fillcolor_defaults");t.exports=function(n,r,e,t){function a(e,t){return s.coerce(n,r,c,e,t)}var i,o=f(n,r,t,a);o||(r.visible=!1),r.visible&&(p(n,r,t,a),a("xhoverformat"),a("yhoverformat"),o=!(i=h(n,r,t,a))&&o<u.PTS_LINESONLY?"lines+markers":"lines",a("text"),a("hovertext"),a("mode",o),d.hasLines(r)&&(g(n,r,e,t,a),y(n,r,a),a("connectgaps"),a("line.simplify")),d.hasMarkers(r)&&m(n,r,e,t,a,{gradient:!0}),d.hasText(r)&&(a("texttemplate"),v(n,r,t,a)),o=[],(d.hasMarkers(r)||d.hasText(r))&&(a("cliponaxis"),a("marker.maxdisplayed"),o.push("points")),a("fill",i?i.fillDflt:"none"),"none"!==r.fill&&(b(n,r,e,a),d.hasLines(r)||y(n,r,a)),t=(r.line||{}).color,i=(r.marker||{}).color,"tonext"!==r.fill&&"toself"!==r.fill||o.push("fills"),a("hoveron",o.join("+")||"points"),"fills"!==r.hoveron&&a("hovertemplate"),(o=l.getComponentMethod("errorbars","supplyDefaults"))(n,r,t||i||e,{axis:"y"}),o(n,r,t||i||e,{axis:"x",inherit:"y"}),s.coerceSelectionMarkerOpacity(r,a))}},{"../../lib":287,"../../registry":378,"./attributes":500,"./constants":504,"./fillcolor_defaults":508,"./line_defaults":513,"./line_shape_defaults":515,"./marker_defaults":519,"./period_defaults":520,"./stack_defaults":523,"./subtypes":525,"./text_defaults":526,"./xy_defaults":527}],508:[function(e,t,n){"use strict";var s=e("../../components/color"),l=e("../../lib").isArrayOrTypedArray;t.exports=function(e,t,n,r){var a,i,o=!1;t.marker&&(a=t.marker.color,i=(t.marker.line||{}).color,a&&!l(a)?o=a:i&&!l(i)&&(o=i)),r("fillcolor",s.addOpacity((t.line||{}).color||o||n,.5))}},{"../../components/color":157,"../../lib":287}],509:[function(e,t,n){"use strict";var i=e("../../plots/cartesian/axes");t.exports=function(e,t,n){var r={},n={_fullLayout:n},a=i.getFromTrace(n,t,"x"),n=i.getFromTrace(n,t,"y");return r.xLabel=i.tickText(a,a.c2l(e.x),!0).text,r.yLabel=i.tickText(n,n.c2l(e.y),!0).text,r}},{"../../plots/cartesian/axes":334}],510:[function(e,t,n){"use strict";var i=e("../../components/color"),o=e("./subtypes");t.exports=function(e,t){var n,r,a;return"lines"===e.mode?(n=e.line.color)&&i.opacity(n)?n:e.fillcolor:"none"===e.mode?e.fill?e.fillcolor:"":(a=t.mcc||(e.marker||{}).color,r=t.mlcc||((e.marker||{}).line||{}).color,(a=a&&i.opacity(a)?a:r&&i.opacity(r)&&(t.mlw||((e.marker||{}).line||{}).width)?r:"")?i.opacity(a)<.3?i.addOpacity(a,.3):a:(n=(e.line||{}).color)&&i.opacity(n)&&o.hasLines(e)&&e.line.width?n:e.fillcolor)}},{"../../components/color":157,"./subtypes":525}],511:[function(e,t,n){"use strict";var P=e("../../lib"),N=e("../../components/fx"),F=e("../../registry"),z=e("./get_trace_color"),j=e("../../components/color"),q=P.fillText;t.exports=function(e,t,n,r){var a=e.cd,i=a[0].trace,o=e.xa,s=e.ya,l=o.c2p(t),c=s.c2p(n),u=[l,c],t=i.hoveron||"",d=-1!==i.mode.indexOf("markers")?3:.5,f=!!i.xperiodalignment,p=!!i.yperiodalignment;if(-1!==t.indexOf("points")){var h,m,g,y,n=function(e){var t=Math.max(d,e.mrc||0),n=o.c2p(e.x)-l,e=s.c2p(e.y)-c;return Math.max(Math.sqrt(n*n+e*e)-t,1-d/t)},r=N.getDistanceFunction(r,function(e){if(f)return t=o.c2p(e.xStart),n=o.c2p(e.xEnd),l>=Math.min(t,n)&&l<=Math.max(t,n)?0:1/0;var t=Math.max(3,e.mrc||0),n=1-1/t,e=Math.abs(o.c2p(e.x)-l);return e<t?n*e/t:e-t+n},function(e){if(p)return t=s.c2p(e.yStart),n=s.c2p(e.yEnd),c>=Math.min(t,n)&&c<=Math.max(t,n)?0:1/0;var t=Math.max(3,e.mrc||0),n=1-1/t,e=Math.abs(s.c2p(e.y)-c);return e<t?n*e/t:e-t+n},n);if(N.getClosest(a,r,e),!1!==e.index)return r=a[e.index],h=o.c2p(r.x,!0),m=s.c2p(r.y,!0),g=r.mrc||1,e.index=r.i,R=(a=a[0].t.orientation)&&(r.sNorm||r.s),y="h"===a?R:void 0!==r.orig_x?r.orig_x:r.x,a="v"===a?R:void 0!==r.orig_y?r.orig_y:r.y,P.extendFlat(e,{color:z(i,r),x0:h-g,x1:h+g,xLabelVal:y,y0:m-g,y1:m+g,yLabelVal:a,spikeDistance:n(r),hovertemplate:i.hovertemplate}),q(r,i,e),F.getComponentMethod("errorbars","hoverInfo")(r,i,e),[e]}if(-1!==t.indexOf("fills")&&i._polygons){var v,b,x,_,w,T,k,A=i._polygons,M=[],E=!1,S=1/0,L=-1/0,C=1/0,O=-1/0;for(I=0;I<A.length;I++)(b=A[I]).contains(u)&&(E=!E,M.push(b),C=Math.min(C,b.ymin),O=Math.max(O,b.ymax));if(E){for(var D=((C=Math.max(C,0))+(O=Math.min(O,s._length)))/2,I=0;I<M.length;I++)for(x=M[I].pts,v=1;v<x.length;v++)D<(T=x[v-1][1])!=D<=(k=x[v][1])&&(_=x[v-1][0],w=x[v][0],k-T&&(w=_+(w-_)*(D-T)/(k-T),S=Math.min(S,w),L=Math.max(L,w)));var S=Math.max(S,0),L=Math.min(L,o._length),R=j.defaultLine;return j.opacity(i.fillcolor)?R=i.fillcolor:j.opacity((i.line||{}).color)&&(R=i.line.color),P.extendFlat(e,{distance:e.maxHoverDistance,x0:S,x1:L,y0:D,y1:D,color:R,hovertemplate:!1}),delete e.index,i.text&&!Array.isArray(i.text)?e.text=String(i.text):e.text=i.name,[e]}}}},{"../../components/color":157,"../../components/fx":197,"../../lib":287,"../../registry":378,"./get_trace_color":510}],512:[function(e,t,n){"use strict";var r=e("./subtypes");t.exports={hasLines:r.hasLines,hasMarkers:r.hasMarkers,hasText:r.hasText,isBubble:r.isBubble,attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./cross_trace_calc"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot"),colorbar:e("./marker_colorbar"),formatLabels:e("./format_labels"),style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":348,"./arrays_to_calcdata":499,"./attributes":500,"./calc":501,"./cross_trace_calc":505,"./cross_trace_defaults":506,"./defaults":507,"./format_labels":509,"./hover":511,"./marker_colorbar":518,"./plot":521,"./select":522,"./style":524,"./subtypes":525}],513:[function(e,t,n){"use strict";var s=e("../../lib").isArrayOrTypedArray,l=e("../../components/colorscale/helpers").hasColorscale,c=e("../../components/colorscale/defaults");t.exports=function(e,t,n,r,a,i){var o=(e.marker||{}).color;a("line.color",n),l(e,"line")?c(e,t,r,a,{prefix:"line.",cLetter:"c"}):a("line.color",!s(o)&&o||n),a("line.width"),(i||{}).noDash||a("line.dash")}},{"../../components/colorscale/defaults":167,"../../components/colorscale/helpers":168,"../../lib":287}],514:[function(e,t,n){"use strict";var r=e("../../constants/numerical"),ie=r.BADNUM,r=r.LOG_CLIP,oe=r+.5,se=r-.5,le=e("../../lib"),ce=le.segmentsIntersect,ue=le.constrain,de=e("./constants");t.exports=function(r,a){var e,t,n,i,o,s,l,c,u,N,F,d,z,f,j,q,p=a.xaxis,h=a.yaxis,H="log"===p.type,B="log"===h.type,m=p._length,g=h._length,U=a.connectGaps,V=a.baseTolerance,y=a.shape,Y="linear"===y,$=a.fill&&"none"!==a.fill,G=[],W=de.minTolerance,v=r.length,b=new Array(v),x=0;function _(e){e=r[e];if(!e)return!1;var t=a.linearized?p.l2p(e.x):p.c2p(e.x),n=a.linearized?h.l2p(e.y):h.c2p(e.y);if(t===ie){if((t=H?p.c2p(e.x,!0):t)===ie)return!1;B&&n===ie&&(t*=Math.abs(p._m*g*(0<p._m?oe:se)/(h._m*m*(0<h._m?oe:se)))),t*=1e3}if(n===ie){if((n=B?h.c2p(e.y,!0):n)===ie)return!1;n*=1e3}return[t,n]}function Z(e,t,n,r){var n=n-e,r=r-t,e=.5-e,t=.5-t,a=n*n+r*r,i=n*e+r*t;if(0<i&&i<a)return(i=e*r-t*n)*i<a?1:void 0}function X(e,t){var n=e[0]/m,e=e[1]/g,r=Math.max(0,-n,n-1,-e,e-1);return(r=r&&void 0!==j&&Z(n,e,j,q)?0:r)&&t&&Z(n,e,t[0]/m,t[1]/g)&&(r=0),(1+de.toleranceGrowth*r)*V}function J(e,t){var n=e[0]-t[0],e=e[1]-t[1];return Math.sqrt(n*n+e*e)}var w,T,k,A,M,K,E,S=de.maxScreensAway,L=-m*S,C=m*(1+S),O=-g*S,D=g*(1+S),Q=[[L,O,C,O],[C,O,C,D],[C,D,L,D],[L,D,L,O]];function I(e){if(e[0]<L||e[0]>C||e[1]<O||e[1]>D)return[ue(e[0],L,C),ue(e[1],O,D)]}function ee(e,t){return e[0]===t[0]&&(e[0]===L||e[0]===C)||e[1]===t[1]&&(e[1]===O||e[1]===D)}function te(i,o,s){return function(e,t){var n=I(e),r=I(t),a=[];return n&&r&&ee(n,r)||(n&&a.push(n),r&&a.push(r),(e=2*le.constrain((e[i]+t[i])/2,o,s)-((n||e)[i]+(r||t)[i]))&&((n&&r?0<e==n[i]>r[i]?n:r:n||r)[i]+=e)),a}}function R(e){var t,n,r=e[0],a=e[1],i=r===b[x-1][0],o=a===b[x-1][1];i&&o||(1<x?(t=r===b[x-2][0],n=a===b[x-2][1],i&&(r===L||r===C)&&t?n?x--:b[x-1]=e:o&&(a===O||a===D)&&n?t?x--:b[x-1]=e:b[x++]=e):b[x++]=e)}function ne(e){b[x-1][0]!==e[0]&&b[x-1][1]!==e[1]&&R([k,A]),R(e),M=null,k=A=0}function P(e){var t,n,r;j=e[0]/m,q=e[1]/g,w=e[0]<L?L:e[0]>C?C:0,T=e[1]<O?O:e[1]>D?D:0,w||T?(x?M?1<(t=E(M,e)).length&&(ne(t[0]),b[x++]=t[1]):(K=E(b[x-1],e)[0],b[x++]=K):b[x++]=[w||e[0],T||e[1]],t=b[x-1],w&&T&&(t[0]!==w||t[1]!==T)?(M&&(k!==w&&A!==T?R(k&&A?(t=M,n=e[0]-t[0],r=(e[1]-t[1])/n,0<(t[1]*e[0]-e[1]*t[0])/n?[0<r?L:C,D]:[0<r?C:L,O]):[k||w,A||T]):k&&A&&R([k,A])),R([w,T])):k-w&&A-T&&R([w||k,T||A]),M=e,k=w,A=T):(M&&ne(E(M,e)[0]),b[x++]=e)}for("linear"===y||"spline"===y?E=function(e,t){for(var n=[],r=0,a=0;a<4;a++){var i=Q[a],i=ce(e[0],e[1],t[0],t[1],i[0],i[1],i[2],i[3]);i&&(!r||1<Math.abs(i.x-n[0][0])||1<Math.abs(i.y-n[0][1]))&&(i=[i.x,i.y],r&&J(i,e)<J(n[0],e)?n.unshift(i):n.push(i),r++)}return n}:"hv"===y||"vh"===y?E=function(e,t){var n=[],e=I(e),t=I(t);return e&&t&&ee(e,t)||(e&&n.push(e),t&&n.push(t)),n}:"hvh"===y?E=te(0,L,C):"vhv"===y&&(E=te(1,O,D)),e=0;e<v;e++)if(t=_(e)){for(x=0,M=null,P(t),e++;e<v;e++){if(!(i=_(e))){if(U)continue;break}if(Y&&a.simplify){var re=_(e+1),ae=J(i,t);if($&&(0===x||x===v-1)||!(ae<X(i,re)*W)){for(o=t,l=!(c=[(i[F=d=z=0]-t[0])/(N=ae),(i[1]-t[1])/ae]),n=i,e++;e<r.length;e++){if(s=re,re=_(e+1),!s){if(U)continue;break}if(f=(u=[s[0]-t[0],s[1]-t[1]])[0]*c[1]-u[1]*c[0],d=Math.min(d,f),(z=Math.max(z,f))-d>X(s,re))break;n=s,N<(f=u[0]*c[0]+u[1]*c[1])?(N=f,i=s,l=!1):f<F&&(F=f,o=s,l=!0)}if(l?(P(i),n!==o&&P(o)):(o!==t&&P(o),n!==i&&P(i)),P(n),e>=r.length||!s)break;P(s),t=s}}else P(i)}M&&R([k||M[0],A||M[1]]),G.push(b.slice(0,x))}return G}},{"../../constants/numerical":267,"../../lib":287,"./constants":504}],515:[function(e,t,n){"use strict";t.exports=function(e,t,n){"spline"===n("line.shape")&&n("line.smoothing")}},{}],516:[function(e,t,n){"use strict";var m={tonextx:1,tonexty:1,tonext:1};t.exports=function(e,t,n){for(var r,a,i,o,s={},l=!1,c=-1,u=0,d=-1,f=0;f<n.length;f++)(a=(r=n[f][0].trace).stackgroup||"")?a in s?o=s[a]:(o=s[a]=u,u++):r.fill in m&&0<=d?o=d:(o=d=u,u++),o<c&&(l=!0),r._groupIndex=c=o;var p=n.slice(),h=(l&&p.sort(function(e,t){e=e[0].trace,t=t[0].trace;return e._groupIndex-t._groupIndex||e.index-t.index}),{});for(f=0;f<p.length;f++)a=(r=p[f][0].trace).stackgroup||"",!0===r.visible?(r._nexttrace=null,r.fill in m&&(i=h[a],r._prevtrace=i||null,i&&(i._nexttrace=r)),r._ownfill=r.fill&&("tozero"===r.fill.substr(0,6)||"toself"===r.fill||"to"===r.fill.substr(0,2)&&!r._prevtrace),h[a]=r):r._prevtrace=r._nexttrace=r._ownfill=null;return p}},{}],517:[function(e,t,n){"use strict";var i=e("fast-isnumeric");t.exports=function(e,t){t=t||2;var e=e.marker,n=e.sizeref||1,r=e.sizemin||0,a="area"===e.sizemode?function(e){return Math.sqrt(e/n)}:function(e){return e/n};return function(e){e=a(e/t);return i(e)&&0<e?Math.max(e,r):0}}},{"fast-isnumeric":33}],518:[function(e,t,n){"use strict";t.exports={container:"marker",min:"cmin",max:"cmax"}},{}],519:[function(e,t,n){"use strict";var l=e("../../components/color"),c=e("../../components/colorscale/helpers").hasColorscale,u=e("../../components/colorscale/defaults"),d=e("./subtypes");t.exports=function(e,t,n,r,a,i){var o=d.isBubble(e),s=(e.line||{}).color;i=i||{},s&&(n=s),a("marker.symbol"),a("marker.opacity",o?.7:1),a("marker.size"),a("marker.color",n),c(e,"marker")&&u(e,t,r,a,{prefix:"marker.",cLetter:"c"}),i.noSelect||(a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size")),i.noLine||(a("marker.line.color",s&&!Array.isArray(s)&&t.marker.color!==s?s:o?l.background:l.defaultLine),c(e,"marker.line")&&u(e,t,r,a,{prefix:"marker.line.",cLetter:"c"}),a("marker.line.width",o?1:0)),o&&(a("marker.sizeref"),a("marker.sizemin"),a("marker.sizemode")),i.gradient&&"none"!==a("marker.gradient.type")&&a("marker.gradient.color")}},{"../../components/color":157,"../../components/colorscale/defaults":167,"../../components/colorscale/helpers":168,"./subtypes":525}],520:[function(e,t,n){"use strict";var r=e("../../lib").dateTick0,a=e("../../constants/numerical").ONEWEEK;function o(e,t){return r(t,e%a==0?1:0)}t.exports=function(e,t,n,r,a){var i;(a=a||{x:!0,y:!0}).x&&(i=r("xperiod"))&&(r("xperiod0",o(i,t.xcalendar)),r("xperiodalignment")),a.y&&(i=r("yperiod"))&&(r("yperiod0",o(i,t.ycalendar)),r("yperiodalignment"))}},{"../../constants/numerical":267,"../../lib":287}],521:[function(e,t,n){"use strict";var $=e("@plotly/d3"),G=e("../../registry"),W=e("../../lib"),Z=W.ensureSingle,X=W.identity,J=e("../../components/drawing"),K=e("./subtypes"),Q=e("./line_points"),f=e("./link_traces"),ee=e("../../lib/polygon").tester;function p(r,e,a,n,t,i,o){N=e,e=n,t=t,b=(v=a).xaxis,v=v.yaxis,u=$.extent(W.simpleMap(b.range,b.r2c)),d=$.extent(W.simpleMap(v.range,v.r2c)),b=e[0].trace,K.hasMarkers(b)&&0!==(v=b.marker.maxdisplayed)&&(b=e.filter(function(e){return e.x>=u[0]&&e.x<=u[1]&&e.y>=d[0]&&e.y<=d[1]}),l=Math.ceil(b.length/v),c=0,t.forEach(function(e,t){e=e[0].trace;K.hasMarkers(e)&&0<e.marker.maxdisplayed&&t<N&&c++}),F=Math.round(c*l/3+Math.floor(c/3)*l/7.1),e.forEach(function(e){delete e.vis}),b.forEach(function(e,t){0===Math.round((t+F)%l)&&(e.vis=!0)}));var s,N,l,c,F,u,d,f=!!o&&0<o.duration;function p(e){return f?e.transition():e}var h=a.xaxis,m=a.yaxis,g=n[0].trace,y=g.line,v=$.select(i),t=Z(v,"g","errorbars"),e=Z(v,"g","lines"),b=Z(v,"g","points"),i=Z(v,"g","text");if(G.getComponentMethod("errorbars","plot")(r,t,a,o),!0===g.visible){p(v).style("opacity",g.opacity);var x,_,w,T,z,k=g.fill.charAt(g.fill.length-1),t=("x"!==k&&"y"!==k&&(k=""),n[0][a.isRangePlot?"nodeRangePlot3":"node3"]=v,""),o=[],v=g._prevtrace,A=(v&&(t=v._prevRevpath||"",P=v._nextFill,o=v._polygons),""),M="",E=[],v=W.noop,S=g._ownFill;if(K.hasLines(g)||"none"!==g.fill){for(P&&P.datum(n),-1!==["hv","vh","hvh","vhv"].indexOf(y.shape)?(w=J.steps(y.shape),T=J.steps(y.shape.split("").reverse().join(""))):w=T="spline"===y.shape?function(e){var t=e[e.length-1];return 1<e.length&&e[0][0]===t[0]&&e[0][1]===t[1]?J.smoothclosed(e.slice(1),y.smoothing):J.smoothopen(e,y.smoothing)}:function(e){return"M"+e.join("L")},z=function(e){return T(e.reverse())},E=Q(n,{xaxis:h,yaxis:m,connectGaps:g.connectgaps,baseTolerance:Math.max(y.width||1,3)/4,shape:y.shape,simplify:y.simplify,fill:g.fill}),I=g._polygons=new Array(E.length),s=0;s<E.length;s++)g._polygons[s]=ee(E[s]);E.length&&(D=E[0][0],L=(L=E[E.length-1])[L.length-1]),v=function(t){return function(e){x=w(e),_=z(e),M=A?k?(A+="L"+x.substr(1),_+("L"+M.substr(1))):(A+="Z"+x,_+"Z"+M):(A=x,_),K.hasLines(g)&&1<e.length&&((e=$.select(this)).datum(n),t?p(e.style("opacity",0).attr("d",x).call(J.lineGroupStyle)).style("opacity",1):((e=p(e)).attr("d",x),J.singleLineStyle(n,e)))}}}var v,L,C,j,O,D,I,R,e=e.selectAll(".js-line").data(E);p(e.exit()).style("opacity",0).remove(),e.each(v(!1)),e.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(J.lineGroupStyle).each(v(!0)),J.setClipUrl(e,a.layerClipId,r),E.length?(S?(S.datum(n),D&&L&&(k?("y"===k?D[1]=L[1]=m.c2p(0,!0):"x"===k&&(D[0]=L[0]=h.c2p(0,!0)),p(S).attr("d","M"+L+"L"+D+"L"+A.substr(1)).call(J.singleFillStyle)):p(S).attr("d",A+"Z").call(J.singleFillStyle))):P&&("tonext"===g.fill.substr(0,6)&&A&&t?(("tonext"===g.fill?p(P).attr("d",A+"Z"+t+"Z"):p(P).attr("d",A+"L"+t.substr(1)+"Z")).call(J.singleFillStyle),g._polygons=g._polygons.concat(o)):(q(P),g._polygons=null)),g._prevRevpath=M,g._prevPolygons=I):(S?q(S):P&&q(P),g._polygons=g._prevRevpath=g._prevPolygons=null),b.datum(n),i.datum(n),v=b,e=i,O=(L=n)[0].trace,L=K.hasMarkers(O),D=K.hasText(O),t=function(e){if(e.ids)return V}(O),I=o=Y,(L||D)&&(S=X,R=(C=O.stackgroup)&&"infer zero"===r._fullLayout._scatterStackOpts[h._id+m._id][C].stackgaps,O.marker.maxdisplayed||O._needsCull?S=R?B:H:C&&!R&&(S=U),L&&(o=S),D&&(I=S)),R=(C=v.selectAll("path.point").data(o,t)).enter().append("path").classed("point",!0),f&&R.call(J.pointStyle,O,r).call(J.translatePoints,h,m).style("opacity",0).transition().style("opacity",1),C.order(),L&&(j=J.makePointStyleFns(O)),C.each(function(e){var t=$.select(this),n=p(t);J.translatePoint(e,n,h,m)?(J.singlePointStyle(e,n,O,j,r),a.layerClipId&&J.hideOutsideRangePoint(e,n,h,m,O.xcalendar,O.ycalendar),O.customdata&&t.classed("plotly-customdata",null!==e.data&&void 0!==e.data)):n.remove()}),(f?C.exit().transition().style("opacity",0):C.exit()).remove(),(C=e.selectAll("g").data(I,t)).enter().append("g").classed("textpoint",!0).append("text"),C.order(),C.each(function(e){var t=$.select(this),n=p(t.select("text"));J.translatePoint(e,n,h,m)?a.layerClipId&&J.hideOutsideRangePoint(e,t,h,m,O.xcalendar,O.ycalendar):t.remove()}),C.selectAll("text").call(J.textPointStyle,O,r).each(function(e){var t=h.c2p(e.x),n=m.c2p(e.y);$.select(this).selectAll("tspan.line").each(function(){p($.select(this)).attr({x:t,y:n})})}),C.exit().remove();var P=!1===g.cliponaxis?null:a.layerClipId;J.setClipUrl(b,P,r),J.setClipUrl(i,P,r)}function q(e){p(e).attr("d","M0,0Z")}function H(e){return e.filter(function(e){return!e.gap&&e.vis})}function B(e){return e.filter(function(e){return e.vis})}function U(e){return e.filter(function(e){return!e.gap})}function V(e){return e.id}function Y(){return!1}}t.exports=function(n,r,e,t,a,i){var o,s,l,c=!a,u=!!a&&0<a.duration,d=f(n,r,e),e=t.selectAll("g.trace").data(d,function(e){return e[0].trace.uid});e.enter().append("g").attr("class",function(e){return"trace scatter trace"+e[0].trace.uid}).style("stroke-miterlimit",2),e.order(),s=n,l=r,e.each(function(e){var t=Z($.select(this),"g","fills"),n=(J.setClipUrl(t,l.layerClipId,s),e[0].trace),e=[],t=(n._ownfill&&e.push("_ownFill"),n._nexttrace&&e.push("_nextFill"),t.selectAll("g").data(e,X));t.enter().append("g"),t.exit().each(function(e){n[e]=null}).remove(),t.order().each(function(e){n[e]=Z($.select(this),"path","js-fill")})}),u?(i&&(o=i()),$.transition().duration(a.duration).ease(a.easing).each("end",function(){o&&o()}).each("interrupt",function(){o&&o()}).each(function(){t.selectAll("g.trace").each(function(e,t){p(n,t,r,e,d,this,a)})})):e.each(function(e,t){p(n,t,r,e,d,this,a)}),c&&e.exit().remove(),t.selectAll("path:not([d])").remove()}},{"../../components/drawing":179,"../../lib":287,"../../lib/polygon":299,"../../registry":378,"./line_points":514,"./link_traces":516,"./subtypes":525,"@plotly/d3":20}],522:[function(e,t,n){"use strict";var d=e("./subtypes");t.exports=function(e,t){var n,r,a,i,o=e.cd,s=e.xaxis,l=e.yaxis,c=[],u=o[0].trace;if(!d.hasMarkers(u)&&!d.hasText(u))return[];if(!1===t)for(n=0;n<o.length;n++)o[n].selected=0;else for(n=0;n<o.length;n++)r=o[n],a=s.c2p(r.x),i=l.c2p(r.y),null!==r.i&&t.contains([a,i],!1,n,e)?(c.push({pointNumber:r.i,x:s.c2d(r.x),y:l.c2d(r.y)}),r.selected=1):r.selected=0;return c}},{"./subtypes":525}],523:[function(e,t,n){"use strict";var y=["orientation","groupnorm","stackgaps"];t.exports=function(e,t,n,r){var n=n._scatterStackOpts,a=r("stackgroup");if(a){for(var i=t.xaxis+t.yaxis,o=n[i],s=(o=o||(n[i]={}))[a],l=!1,c=(s?s.traces.push(t):(s=o[a]={traceIndices:[],traces:[t]},l=!0),{orientation:t.x&&!t.y?"h":"v"}),u=0;u<y.length;u++){var d=y[u],f=d+"Found";if(!s[f]){var p=void 0!==e[d],h="orientation"===d;if((p||l)&&(s[d]=r(d,c[d]),h&&(s.fillDflt="h"===s[d]?"tonextx":"tonexty"),p&&(s[f]=!0,!l&&(delete s.traces[0][d],h))))for(var m=0;m<s.traces.length-1;m++){var g=s.traces[m];g._input.fill!==g.fill&&(g.fill=s.fillDflt)}}}return s}}},{}],524:[function(e,t,n){"use strict";var r=e("@plotly/d3"),a=e("../../components/drawing"),i=e("../../registry");function o(e,t,n){a.pointStyle(e.selectAll("path.point"),t,n)}function s(e,t,n){a.textPointStyle(e.selectAll("text"),t,n)}t.exports={style:function(t){var e=r.select(t).selectAll("g.trace.scatter");e.style("opacity",function(e){return e[0].trace.opacity}),e.selectAll("g.points").each(function(e){o(r.select(this),e.trace||e[0].trace,t)}),e.selectAll("g.text").each(function(e){s(r.select(this),e.trace||e[0].trace,t)}),e.selectAll("g.trace path.js-line").call(a.lineGroupStyle),e.selectAll("g.trace path.js-fill").call(a.fillGroupStyle),i.getComponentMethod("errorbars","style")(e)},stylePoints:o,styleText:s,styleOnSelect:function(e,t,n){(t=t[0].trace).selectedpoints?(a.selectedPointStyle(n.selectAll("path.point"),t),a.selectedTextStyle(n.selectAll("text"),t)):(o(n,t,e),s(n,t,e))}}},{"../../components/drawing":179,"../../registry":378,"@plotly/d3":20}],525:[function(e,t,n){"use strict";var r=e("../../lib");t.exports={hasLines:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("lines")},hasMarkers:function(e){return e.visible&&(e.mode&&-1!==e.mode.indexOf("markers")||"splom"===e.type)},hasText:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("text")},isBubble:function(e){return r.isPlainObject(e.marker)&&r.isArrayOrTypedArray(e.marker.size)}}},{"../../lib":287}],526:[function(e,t,n){"use strict";var i=e("../../lib");t.exports=function(e,t,n,r,a){a=a||{},r("textposition"),i.coerceFont(r,"textfont",n.font),a.noSelect||(r("selected.textfont.color"),r("unselected.textfont.color"))}},{"../../lib":287}],527:[function(e,t,n){"use strict";var s=e("../../lib"),l=e("../../registry");t.exports=function(e,t,n,r){var a,i=r("x"),o=r("y");if(l.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],n),i){e=s.minRowLength(i);o?a=Math.min(e,s.minRowLength(o)):(a=e,r("y0"),r("dy"))}else{if(!o)return 0;a=s.minRowLength(o),r("x0"),r("dx")}return t._length=a}},{"../../lib":287,"../../registry":378}],528:[function(e,t,n){"use strict";var r=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,i=e("../scatter/attributes"),o=e("../../plots/attributes"),s=e("../../components/colorscale/attributes"),l=e("../../components/drawing/attributes").dash,e=e("../../lib/extend").extendFlat,c=i.marker,u=i.line,d=c.line;t.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:e({},i.mode,{dflt:"markers"}),text:e({},i.text,{}),texttemplate:a({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:e({},i.hovertext,{}),line:{color:u.color,width:u.width,dash:l,shape:e({},u.shape,{values:["linear","spline"]}),smoothing:u.smoothing,editType:"calc"},connectgaps:i.connectgaps,cliponaxis:i.cliponaxis,fill:e({},i.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:i.fillcolor,marker:e({symbol:c.symbol,opacity:c.opacity,maxdisplayed:c.maxdisplayed,size:c.size,sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,line:e({width:d.width,editType:"calc"},s("marker.line")),gradient:c.gradient,editType:"calc"},s("marker")),textfont:i.textfont,textposition:i.textposition,selected:i.selected,unselected:i.unselected,hoverinfo:e({},o.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:i.hoveron,hovertemplate:r()}},{"../../components/colorscale/attributes":164,"../../components/drawing/attributes":178,"../../lib/extend":281,"../../plots/attributes":330,"../../plots/template_attributes":373,"../scatter/attributes":500}],529:[function(e,t,n){"use strict";var y=e("fast-isnumeric"),v=e("../scatter/colorscale_calc"),b=e("../scatter/arrays_to_calcdata"),x=e("../scatter/calc_selection"),_=e("../scatter/calc").calcMarkerSize,w=["a","b","c"],T={a:["b","c"],b:["a","c"],c:["a","b"]};t.exports=function(e,t){for(var n,r,a,i,o,s=e._fullLayout[t.subplot].sum,l=t.sum||s,c={a:t.a,b:t.b,c:t.c},u=0;u<w.length;u++)if(!c[r=w[u]]){for(i=c[T[r][0]],o=c[T[r][1]],a=new Array(i.length),n=0;n<i.length;n++)a[n]=l-i[n]-o[n];c[r]=a}var d,f,p,h,m=t._length,g=new Array(m);for(u=0;u<m;u++)d=c.a[u],f=c.b[u],p=c.c[u],y(d)&&y(f)&&y(p)?(1!=(h=s/((d=+d)+(f=+f)+(p=+p)))&&(d*=h,f*=h,p*=h),h=d,g[u]={x:p-f,y:h,a:d,b:f,c:p}):g[u]={x:!1,y:!1};return _(t,m),v(e,t),b(g,t),x(g,t),g}},{"../scatter/arrays_to_calcdata":499,"../scatter/calc":501,"../scatter/calc_selection":502,"../scatter/colorscale_calc":503,"fast-isnumeric":33}],530:[function(e,t,n){"use strict";var c=e("../../lib"),u=e("../scatter/constants"),d=e("../scatter/subtypes"),f=e("../scatter/marker_defaults"),p=e("../scatter/line_defaults"),h=e("../scatter/line_shape_defaults"),m=e("../scatter/text_defaults"),g=e("../scatter/fillcolor_defaults"),y=e("./attributes");t.exports=function(n,r,e,t){function a(e,t){return c.coerce(n,r,y,e,t)}var i,o=a("a"),s=a("b"),l=a("c");o?(i=o.length,s?(i=Math.min(i,s.length),l&&(i=Math.min(i,l.length))):i=l?Math.min(i,l.length):0):s&&l&&(i=Math.min(s.length,l.length)),i?(r._length=i,a("sum"),a("text"),a("hovertext"),"fills"!==r.hoveron&&a("hovertemplate"),a("mode",i<u.PTS_LINESONLY?"lines+markers":"lines"),d.hasLines(r)&&(p(n,r,e,t,a),h(n,r,a),a("connectgaps")),d.hasMarkers(r)&&f(n,r,e,t,a,{gradient:!0}),d.hasText(r)&&(a("texttemplate"),m(n,r,t,a)),o=[],(d.hasMarkers(r)||d.hasText(r))&&(a("cliponaxis"),a("marker.maxdisplayed"),o.push("points")),a("fill"),"none"!==r.fill&&(g(n,r,e,a),d.hasLines(r)||h(n,r,a)),"tonext"!==r.fill&&"toself"!==r.fill||o.push("fills"),a("hoveron",o.join("+")||"points"),c.coerceSelectionMarkerOpacity(r,a)):r.visible=!1}},{"../../lib":287,"../scatter/constants":504,"../scatter/fillcolor_defaults":508,"../scatter/line_defaults":513,"../scatter/line_shape_defaults":515,"../scatter/marker_defaults":519,"../scatter/subtypes":525,"../scatter/text_defaults":526,"./attributes":528}],531:[function(e,t,n){"use strict";t.exports=function(e,t,n,r,a){return t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),r[a]?(r=r[a],e.a=r.a,e.b=r.b,e.c=r.c):(e.a=t.a,e.b=t.b,e.c=t.c),e}},{}],532:[function(e,t,n){"use strict";var a=e("../../plots/cartesian/axes");t.exports=function(e,t,n){var r={},n=n[t.subplot]._subplot;return r.aLabel=a.tickText(n.aaxis,e.a,!0).text,r.bLabel=a.tickText(n.baxis,e.b,!0).text,r.cLabel=a.tickText(n.caxis,e.c,!0).text,r}},{"../../plots/cartesian/axes":334}],533:[function(e,t,n){"use strict";var l=e("../scatter/hover");t.exports=function(e,t,n,r){t=l(e,t,n,r);if(t&&!1!==t[0].index){n=t[0];if(void 0===n.index)return r=1-n.y0/e.ya._length,r=(e=e.xa._length)-(e=e*r/2),n.x0=Math.max(Math.min(n.x0,r),e),n.x1=Math.max(Math.min(n.x1,r),e),t;var r=n.cd[n.index],e=n.trace,a=n.subplot,i=(n.a=r.a,n.b=r.b,n.c=r.c,n.xLabelVal=void 0,n.yLabelVal=void 0,{}),i=(i[e.subplot]={_subplot:a},e._module.formatLabels(r,e,i)),i=(n.aLabel=i.aLabel,n.bLabel=i.bLabel,n.cLabel=i.cLabel,r.hi||e.hoverinfo),o=[];return e.hovertemplate||(-1!==(r=-1!==(r=i.split("+")).indexOf("all")?["a","b","c"]:r).indexOf("a")&&s(a.aaxis,n.aLabel),-1!==r.indexOf("b")&&s(a.baxis,n.bLabel),-1!==r.indexOf("c")&&s(a.caxis,n.cLabel)),n.extraText=o.join("<br>"),n.hovertemplate=e.hovertemplate,t}function s(e,t){o.push(e._hovertitle+": "+t)}}},{"../scatter/hover":511}],534:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../scatter/select"),eventData:e("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:e("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":374,"../scatter/marker_colorbar":518,"../scatter/select":522,"../scatter/style":524,"./attributes":528,"./calc":529,"./defaults":530,"./event_data":531,"./format_labels":532,"./hover":533,"./plot":535}],535:[function(e,t,n){"use strict";var a=e("../scatter/plot");t.exports=function(e,t,n){var r=t.plotContainer,r=(r.select(".scatterlayer").selectAll("*").remove(),{xaxis:t.xaxis,yaxis:t.yaxis,plot:r,layerClipId:t._hasClipOnAxisFalse?t.clipIdRelative:null}),t=t.layers.frontplot.select("g.scatterlayer");a(e,r,n,t)}},{"../scatter/plot":521}],536:[function(e,t,n){"use strict";var r=e("../box/attributes"),a=e("../../lib/extend").extendFlat,e=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;t.exports={y:r.y,x:r.x,x0:r.x0,y0:r.y0,xhoverformat:e("x"),yhoverformat:e("y"),name:a({},r.name,{}),orientation:a({},r.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:r.fillcolor,points:a({},r.boxpoints,{}),jitter:a({},r.jitter,{}),pointpos:a({},r.pointpos,{}),width:a({},r.width,{}),marker:r.marker,text:r.text,hovertext:r.hovertext,hovertemplate:r.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:r.selected,unselected:r.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":281,"../../plots/cartesian/axis_format_attributes":337,"../box/attributes":405}],537:[function(e,t,n){"use strict";var w=e("../../lib"),T=e("../../plots/cartesian/axes"),k=e("../box/calc"),A=e("./helpers"),M=e("../../constants/numerical").BADNUM;t.exports=function(e,t){var n=k(e,t);if(!n[0].t.empty){for(var r=e._fullLayout,a=T.getFromId(e,t["h"===t.orientation?"xaxis":"yaxis"]),i=1/0,o=-1/0,s=0,l=0,c=0;c<n.length;c++){var u=n[c],d=u.pts.map(A.extractVal),f=u.bandwidth=function(e,t,n){var r=t.max-t.min;if(!r)return e.bandwidth||0;return e.bandwidth?Math.max(e.bandwidth,r/1e4):(e=n.length,n=w.stdev(n,e-1,t.mean),Math.max(function(e,t,n){return 1.059*Math.min(t,n/1.349)*Math.pow(e,-.2)}(e,n,t.q3-t.q1),r/100))}(t,u,d),p=u.span=function(n,r,a,e){var t=n.spanmode,i=n.span||[],o=[r.min,r.max],s=[r.min-2*e,r.max+2*e];function l(e){var t=i[e],t="multicategory"===a.type?a.r2c(t):a.d2c(t,0,n[r.valLetter+"calendar"]);return t===M?s[e]:t}e="soft"===t?s:"hard"===t?o:[l(0),l(1)];t={type:"linear",range:e};return T.setConvert(t),t.cleanRange(),e}(t,u,a,f);if(u.min===u.max&&0===f)p=u.span=[u.min,u.max],u.density=[{v:1,t:p[0]}],u.bandwidth=f,s=Math.max(s,1);else{var h=p[1]-p[0],f=Math.ceil(h/(f/3)),m=h/f;if(!isFinite(m)||!isFinite(f))return w.error("Something went wrong with computing the violin span"),n[0].t.empty=!0,n;var g=A.makeKDE(u,t,d);u.density=new Array(f);for(var y=0,v=p[0];v<p[1]+m/2;y++,v+=m){var b=g(v);u.density[y]={v:b,t:v},s=Math.max(s,b)}}l=Math.max(l,d.length),i=Math.min(i,p[0]),o=Math.max(o,p[1])}var x,_=T.findExtremes(a,[i,o],{padded:!0});t._extremes[a._id]=_,t.width?n[0].t.maxKDE=s:(x=(_=r._violinScaleGroupStats)[r=t.scalegroup])?(x.maxKDE=Math.max(x.maxKDE,s),x.maxCount=Math.max(x.maxCount,l)):_[r]={maxKDE:s,maxCount:l},n[0].t.labels.kde=w._(e,"kde:")}return n}},{"../../constants/numerical":267,"../../lib":287,"../../plots/cartesian/axes":334,"../box/calc":406,"./helpers":540}],538:[function(e,t,n){"use strict";var f=e("../box/cross_trace_calc").setPositionOffset,p=["v","h"];t.exports=function(e,t){for(var n=e.calcdata,r=t.xaxis,a=t.yaxis,i=0;i<p.length;i++){for(var o=p[i],s="h"===o?a:r,l=[],c=0;c<n.length;c++){var u=n[c],d=u[0].t,u=u[0].trace;!0!==u.visible||"violin"!==u.type||d.empty||u.orientation!==o||u.xaxis!==r._id||u.yaxis!==a._id||l.push(c)}f("violin",e,l,s)}}},{"../box/cross_trace_calc":407}],539:[function(e,t,n){"use strict";var u=e("../../lib"),d=e("../../components/color"),f=e("../box/defaults"),p=e("./attributes");t.exports=function(n,r,e,t){function a(e,t){return u.coerce(n,r,p,e,t)}function i(e,t){return u.coerce2(n,r,p,e,t)}var o,s,l,c;f.handleSampleDefaults(n,r,a,t),!1!==r.visible&&(a("bandwidth"),a("side"),a("width")||(a("scalegroup",r.name),a("scalemode")),t=a("span"),a("spanmode",o=Array.isArray(t)?"manual":o),t=a("line.color",(n.marker||{}).color||e),o=a("line.width"),e=a("fillcolor",d.addOpacity(r.line.color,.5)),f.handlePointsDefaults(n,r,a,{prefix:""}),c=i("box.width"),e=i("box.fillcolor",e),s=i("box.line.color",t),l=i("box.line.width",o),a("box.visible",Boolean(c||e||s||l))||(r.box={visible:!1}),c=i("meanline.color",t),e=i("meanline.width",o),a("meanline.visible",Boolean(c||e))||(r.meanline={visible:!1}))}},{"../../components/color":157,"../../lib":287,"../box/defaults":408,"./attributes":536}],540:[function(e,t,a){"use strict";var i=e("../../lib"),n=function(e){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*e*e)};a.makeKDE=function(e,t,r){var a=r.length,i=n,o=e.bandwidth,s=1/(a*o);return function(e){for(var t=0,n=0;n<a;n++)t+=i((e-r[n])/o);return s*t}},a.getPositionOnKdePath=function(e,t,n){var r,a="h"===t.orientation?(r="y","x"):(r="x","y"),n=i.findPointOnPath(e.path,n,a,{pathLength:e.pathLength}),a=e.posCenterPx,e=n[r];return[e,"both"===t.side?2*a-e:a]},a.getKdeValue=function(e,t,n){var r=e.pts.map(a.extractVal);return a.makeKDE(e,t,r)(n)/e.posDensityScale},a.extractVal=function(e){return e.v}},{"../../lib":287}],541:[function(e,t,n){"use strict";var w=e("../../lib"),T=e("../../plots/cartesian/axes"),k=e("../box/hover"),A=e("./helpers");t.exports=function(e,t,n,r,a){var i,o,s,l,c,u,d,f,p,h,m,a=(a=a||{}).hoverLayer,g=e.cd,y=g[0].trace,v=y.hoveron,b=-1!==v.indexOf("violins"),x=-1!==v.indexOf("kde"),_=[],g=((b||x)&&(o=k.hoverOnBoxes(e,t,n,r),x&&0<o.length&&(x=e.xa,f=e.ya,x="h"===y.orientation?(m=t,s="y",h=f,l="x",x):(m=n,s="x",h=x,l="y",f),m>=(f=g[e.index]).span[0]&&m<=f.span[1]&&(c=w.extendFlat({},e),u=x.c2p(m,!0),d=A.getKdeValue(f,y,m),f=A.getPositionOnKdePath(f,y,u),p=h._offset,h=h._length,c[s+"0"]=f[0],c[s+"1"]=f[1],c[l+"0"]=c[l+"1"]=u,c[l+"Label"]=l+": "+T.hoverLabelText(x,m,y[l+"hoverformat"])+", "+g[0].t.labels.kde+" "+d.toFixed(3),c.spikeDistance=o[0].spikeDistance,c[m=s+"Spike"]=o[0][m],o[0].spikeDistance=void 0,o[0][m]=void 0,c.hovertemplate=!1,_.push(c),(d={stroke:e.color})[s+"1"]=w.constrain(p+f[0],p,p+h),d[s+"2"]=w.constrain(p+f[1],p,p+h),d[l+"1"]=d[l+"2"]=x._offset+u)),b&&(_=_.concat(o))),-1!==v.indexOf("points")&&(i=k.hoverOnPoints(e,t,n)),a.selectAll(".violinline-"+y.uid).data(d?[0]:[]));return g.enter().append("line").classed("violinline-"+y.uid,!0).attr("stroke-width",1.5),g.exit().remove(),g.attr(d),"closest"===r?i?[i]:_:(i&&_.push(i),_)}},{"../../lib":287,"../../plots/cartesian/axes":334,"../box/hover":410,"./helpers":540}],542:[function(e,t,n){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../box/select"),moduleType:"trace",name:"violin",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":348,"../box/defaults":408,"../box/select":415,"../scatter/style":524,"./attributes":536,"./calc":537,"./cross_trace_calc":538,"./defaults":539,"./hover":541,"./layout_attributes":543,"./layout_defaults":544,"./plot":545,"./style":546}],543:[function(e,t,n){"use strict";var r=e("../box/layout_attributes"),e=e("../../lib").extendFlat;t.exports={violinmode:e({},r.boxmode,{}),violingap:e({},r.boxgap,{}),violingroupgap:e({},r.boxgroupgap,{})}},{"../../lib":287,"../box/layout_attributes":412}],544:[function(e,t,n){"use strict";var a=e("../../lib"),i=e("./layout_attributes"),o=e("../box/layout_defaults");t.exports=function(n,r,e){o._supply(n,r,e,function(e,t){return a.coerce(n,r,i,e,t)},"violin")}},{"../../lib":287,"../box/layout_defaults":413,"./layout_attributes":543}],545:[function(e,t,n){"use strict";var M=e("@plotly/d3"),l=e("../../lib"),r=e("../../components/drawing"),c=e("../box/plot"),a=e("../scatter/line_points"),u=e("./helpers");t.exports=function(e,i,t,n){var k=e._fullLayout,o=i.xaxis,s=i.yaxis;function A(e){e=a(e,{xaxis:o,yaxis:s,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return r.smoothopen(e[0],1)}l.makeTraceGroups(n,t,"trace violins").each(function(e){var m,g,y,v,b,x,_,t,n,r,a=M.select(this),e=e[0],w=e.t,T=e.trace;!0!==T.visible||w.empty?a.remove():(m=w.bPos,g=w.bdPos,y=i[w.valLetter+"axis"],v=i[w.posLetter+"axis"],b="both"===T.side,x=b||"positive"===T.side,_=b||"negative"===T.side,(e=a.selectAll("path.violin").data(l.identity)).enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),e.exit().remove(),e.each(function(e){var t,n,r,a,i,o,s,l,c,u=M.select(this),d=e.density,f=d.length,p=v.c2l(e.pos+m,!0),h=v.l2p(p);if(t=T.width?w.maxKDE/g:(l=k._violinScaleGroupStats[T.scalegroup],"count"===T.scalemode?l.maxKDE/g*(l.maxCount/e.pts.length):l.maxKDE/g),x){for(o=new Array(f),a=0;a<f;a++)(s=o[a]={})[w.posLetter]=p+d[a].v/t,s[w.valLetter]=y.c2l(d[a].t,!0);r=A(o)}if(_){for(o=new Array(f),i=0,a=f-1;i<f;i++,a--)(s=o[i]={})[w.posLetter]=p-d[a].v/t,s[w.valLetter]=y.c2l(d[a].t,!0);n=A(o)}r=b?r+"L"+n.substr(1)+"Z":(l=[h,y.c2p(d[0].t)],c=[h,y.c2p(d[f-1].t)],"h"===T.orientation&&(l.reverse(),c.reverse()),x?"M"+l+"L"+r.substr(1)+"L"+c:"M"+c+"L"+n.substr(1)+"L"+l),u.attr("d",r),e.posCenterPx=h,e.posDensityScale=t*g,e.path=u.node(),e.pathLength=e.path.getTotalLength()/(b?2:1)}),r=(e=T.box).width,e=(e.line||{}).width,r=b?(t=g*r,0):x?(t=[0,g*r/2],e*{x:1,y:-1}[w.posLetter]):(t=[g*r/2,0],e*{x:-1,y:1}[w.posLetter]),c.plotBoxAndWhiskers(a,{pos:v,val:y},T,{bPos:m,bdPos:t,bPosPxOffset:r}),c.plotBoxMean(a,{pos:v,val:y},T,{bPos:m,bdPos:t,bPosPxOffset:r}),!T.box.visible&&T.meanline.visible&&(n=l.identity),(e=a.selectAll("path.meanline").data(n||[])).enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),e.exit().remove(),e.each(function(e){var t=y.c2p(e.mean,!0),e=u.getPositionOnKdePath(e,T,t);M.select(this).attr("d","h"===T.orientation?"M"+t+","+e[0]+"V"+e[1]:"M"+e[0]+","+t+"H"+e[1])}),c.plotPoints(a,{x:o,y:s},T,w))})}},{"../../components/drawing":179,"../../lib":287,"../box/plot":414,"../scatter/line_points":514,"./helpers":540,"@plotly/d3":20}],546:[function(e,t,n){"use strict";var s=e("@plotly/d3"),l=e("../../components/color"),c=e("../scatter/style").stylePoints;t.exports=function(o){var e=s.select(o).selectAll("g.trace.violins");e.style("opacity",function(e){return e[0].trace.opacity}),e.each(function(e){var e=e[0].trace,t=s.select(this),n=e.box||{},r=n.line||{},a=e.meanline||{},i=a.width,r=(t.selectAll("path.violin").style("stroke-width",e.line.width+"px").call(l.stroke,e.line.color).call(l.fill,e.fillcolor),t.selectAll("path.box").style("stroke-width",r.width+"px").call(l.stroke,r.color).call(l.fill,n.fillcolor),{"stroke-width":i+"px","stroke-dasharray":2*i+"px,"+i+"px"});t.selectAll("path.mean").style(r).call(l.stroke,a.color),t.selectAll("path.meanline").style(r).call(l.stroke,a.color),c(t,e,o)})}},{"../../components/color":157,"../scatter/style":524,"@plotly/d3":20}],547:[function(e,t,n){"use strict";var u=e("../plots/cartesian/axes"),h=e("../lib"),p=e("../plot_api/plot_schema"),m=e("./helpers").pointsAccessorFunction,d=e("../constants/numerical").BADNUM,g=(n.moduleType="transform",n.name="aggregate",n.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"}),y=g.aggregations;function v(e,t,n,r){if(r.enabled){for(var a=r.target,i=h.nestedProperty(t,a),o=i.get(),s=function(c,e){var t=c.func,u=e.d2c,l=e.c2d;switch(t){case"count":return f;case"first":return b;case"last":return x;case"sum":return function(e,t){for(var n=0,r=0;r<t.length;r++){var a=u(e[t[r]]);a!==d&&(n+=a)}return l(n)};case"avg":return function(e,t){for(var n=0,r=0,a=0;a<t.length;a++){var i=u(e[t[a]]);i!==d&&(n+=i,r++)}return r?l(n/r):d};case"min":return function(e,t){for(var n=1/0,r=0;r<t.length;r++){var a=u(e[t[r]]);a!==d&&(n=Math.min(n,a))}return n===1/0?d:l(n)};case"max":return function(e,t){for(var n=-1/0,r=0;r<t.length;r++){var a=u(e[t[r]]);a!==d&&(n=Math.max(n,a))}return n===-1/0?d:l(n)};case"range":return function(e,t){for(var n=1/0,r=-1/0,a=0;a<t.length;a++){var i=u(e[t[a]]);i!==d&&(n=Math.min(n,i),r=Math.max(r,i))}return r===-1/0||n===1/0?d:l(r-n)};case"change":return function(e,t){var n=u(e[t[0]]),e=u(e[t[t.length-1]]);return n===d||e===d?d:l(e-n)};case"median":return function(e,t){for(var n=[],r=0;r<t.length;r++){var a=u(e[t[r]]);a!==d&&n.push(a)}if(!n.length)return d;n.sort(h.sorterAsc);var i=(n.length-1)/2;return l((n[Math.floor(i)]+n[Math.ceil(i)])/2)};case"mode":return function(e,t){for(var n={},r=0,a=d,i=0;i<t.length;i++){var o,s=u(e[t[i]]);s===d||r<(o=n[s]=(n[s]||0)+1)&&(r=o,a=s)}return r?l(a):d};case"rms":return function(e,t){for(var n=0,r=0,a=0;a<t.length;a++){var i=u(e[t[a]]);i!==d&&(n+=i*i,r++)}return r?l(Math.sqrt(n/r)):d};case"stddev":return function(e,t){for(var n=0,r=0,a=1,i=d,o=0;o<t.length&&i===d;o++)i=u(e[t[o]]);if(i===d)return d;for(;o<t.length;o++){var s=u(e[t[o]]);s!==d&&(n+=s=s-i,r+=s*s,a++)}var l="sample"===c.funcmode?a-1:a;return l?Math.sqrt((r-n*n/a)/l):0}}}(r,u.getDataConversions(e,t,a,o)),l=new Array(n.length),c=0;c<n.length;c++)l[c]=s(o,n[c]);i.set(l),"count"===r.func&&h.pushUnique(t._arrayAttrs,a)}}function f(e,t){return t.length}function b(e,t){return e[t[0]]}function x(e,t){return e[t[t.length-1]]}n.supplyDefaults=function(n,e){var r={};function t(e,t){return h.coerce(n,r,g,e,t)}if(t("enabled")){for(var a=p.findArrayAttributes(e),i={},o=0;o<a.length;o++)i[a[o]]=1;e=t("groups");if(!Array.isArray(e)){if(!i[e])return r.enabled=!1,r;i[e]=0}var s=n.aggregations||[],l=r.aggregations=new Array(s.length);for(o=0;o<s.length;o++){var c={_index:o},u=f("target"),d=f("func");f("enabled")&&u&&(i[u]||"count"===d&&void 0===i[u])?("stddev"===d&&f("funcmode"),i[u]=0,l[o]=c):l[o]={enabled:!1,_index:o}}for(o=0;o<a.length;o++)i[a[o]]&&l.push({target:a[o],func:y.func.dflt,enabled:!0,_index:-1})}return r;function f(e,t){return h.coerce(s[o],c,y,e,t)}},n.calcTransform=function(e,t,n){if(n.enabled){var r=n.groups,a=h.getTargetArray(t,{target:r});if(a){var i,o,s={},l={},c=[],u=m(t.transforms,n),d=a.length;for(t._length&&(d=Math.min(d,t._length)),p=0;p<d;p++)void 0===(o=s[i=a[p]])?(s[i]=c.length,c.push([p]),l[s[i]]=u(p)):(c[o].push(p),l[s[i]]=(l[s[i]]||[]).concat(u(p)));n._indexToPoints=l;for(var f=n.aggregations,p=0;p<f.length;p++)v(e,t,c,f[p]);"string"==typeof r&&v(e,t,c,{target:r,func:"first",enabled:!0}),t._length=c.length}}}},{"../constants/numerical":267,"../lib":287,"../plot_api/plot_schema":322,"../plots/cartesian/axes":334,"./helpers":550}],548:[function(e,t,a){"use strict";var b=e("../lib"),i=e("../registry"),x=e("../plots/cartesian/axes"),_=e("./helpers").pointsAccessorFunction,e=e("../constants/filter_ops"),w=e.COMPARISON_OPS,T=e.INTERVAL_OPS,k=e.SET_OPS;a.moduleType="transform",a.name="filter",a.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(w).concat(T).concat(k),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},a.supplyDefaults=function(n){var r={};function e(e,t){return b.coerce(n,r,a.attributes,e,t)}if(e("enabled")){var t=e("target");if(b.isArrayOrTypedArray(t)&&0===t.length)return r.enabled=!1,r;e("preservegaps"),e("operation"),e("value");t=i.getComponentMethod("calendars","handleDefaults");t(n,r,"valuecalendar",null),t(n,r,"targetcalendar",null)}return r},a.calcTransform=function(e,r,t){if(t.enabled){var n=b.getTargetArray(r,t);if(n){var a,i=t.target,o=n.length,s=(r._length&&(o=Math.min(o,r._length)),t.targetcalendar),l=r._arrayAttrs,c=t.preservegaps;"string"!=typeof i||(a=b.nestedProperty(r,i+"calendar").get())&&(s=a);var u,d=function(t,n,r){var a=t.operation,e=t.value,i=Array.isArray(e);function o(e){return-1!==e.indexOf(a)}function s(e){return n(e,0,t.valuecalendar)}function l(e){return n(e,0,r)}var c;o(w)?c=s(i?e[0]:e):o(T)?c=i?[s(e[0]),s(e[1])]:[s(e),s(e)]:o(k)&&(c=i?e.map(s):[s(e)]);switch(a){case"=":return function(e){return l(e)===c};case"!=":return function(e){return l(e)!==c};case"<":return function(e){return l(e)<c};case"<=":return function(e){return l(e)<=c};case">":return function(e){return l(e)>c};case">=":return function(e){return l(e)>=c};case"[]":return function(e){e=l(e);return e>=c[0]&&e<=c[1]};case"()":return function(e){e=l(e);return e>c[0]&&e<c[1]};case"[)":return function(e){e=l(e);return e>=c[0]&&e<c[1]};case"(]":return function(e){e=l(e);return e>c[0]&&e<=c[1]};case"][":return function(e){e=l(e);return e<=c[0]||e>=c[1]};case")(":return function(e){e=l(e);return e<c[0]||e>c[1]};case"](":return function(e){e=l(e);return e<=c[0]||e>c[1]};case")[":return function(e){e=l(e);return e<c[0]||e>=c[1]};case"{}":return function(e){return-1!==c.indexOf(l(e))};case"}{":return function(e){return-1===c.indexOf(l(e))}}}(t,x.getDataToCoordFunc(e,r,i,n),s),f={},p={},h=0,m=c?(u=function(e){f[e.astr]=b.extendDeep([],e.get()),e.set(new Array(o))},function(e,t){var n=f[e.astr][t];e.get()[t]=n}):(u=function(e){f[e.astr]=b.extendDeep([],e.get()),e.set([])},function(e,t){t=f[e.astr][t];e.get().push(t)});v(u);for(var g=_(r.transforms,t),y=0;y<o;y++)d(n[y])?(v(m,y),p[h++]=g(y)):c&&h++;t._indexToPoints=p,r._length=h}}function v(e,t){for(var n=0;n<l.length;n++)e(b.nestedProperty(r,l[n]),t)}}},{"../constants/filter_ops":265,"../lib":287,"../plots/cartesian/axes":334,"../registry":378,"./helpers":550}],549:[function(e,t,u){"use strict";var A=e("../lib"),M=e("../plot_api/plot_schema"),E=e("../plots/plots"),S=e("./helpers").pointsAccessorFunction;u.moduleType="transform",u.name="groupby",u.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},u.supplyDefaults=function(n,e,t){var r,a={};function i(e,t){return A.coerce(n,a,u.attributes,e,t)}if(i("enabled")){i("groups"),i("nameformat",1<t._dataLength?"%{group} (%{trace})":"%{group}");var o=n.styles,s=a.styles=[];if(o)for(r=0;r<o.length;r++){var l=s[r]={},c=(A.coerce(o[r],s[r],u.attributes.styles,"target"),A.coerce(o[r],s[r],u.attributes.styles,"value"));A.isPlainObject(c)?l.value=A.extendDeep({},c):c&&delete l.value}}return a},u.transform=function(e,t){for(var n,r,a=[],i=0;i<e.length;i++)for(n=function(e,t){var n,r,a,i,o,s,l,c,u,d,f=t.transform,p=t.transformIndex,h=e.transforms[p].groups,m=S(e.transforms,f);if(!A.isArrayOrTypedArray(h)||0===h.length)return[e];var g=A.filterUnique(h),y=new Array(g.length),v=h.length,b=M.findArrayAttributes(e),x=f.styles||[],_={};for(n=0;n<x.length;n++)_[x[n].target]=x[n].value;f.styles&&(d=A.keyedContainer(f,"styles","target","value.name"));var w={},T={};for(n=0;n<g.length;n++){s=g[n],w[s]=n,T[s]=0,(l=y[n]=A.extendDeepNoArrays({},e))._group=s,l.transforms[p]._indexToPoints={};var k=null;for(d&&(k=d.get(s)),l.name=k||""===k?k:A.templateString(f.nameformat,{trace:e.name,group:s}),c=l.transforms,l.transforms=[],r=0;r<c.length;r++)l.transforms[r]=A.extendDeepNoArrays({},c[r]);for(r=0;r<b.length;r++)A.nestedProperty(l,b[r]).set([])}for(a=0;a<b.length;a++){for(i=b[a],r=0,u=[];r<g.length;r++)u[r]=A.nestedProperty(y[r],i).get();for(o=A.nestedProperty(e,i).get(),r=0;r<v;r++)u[w[h[r]]].push(o[r])}for(r=0;r<v;r++)(l=y[w[h[r]]]).transforms[p]._indexToPoints[T[h[r]]]=m(r),T[h[r]]++;for(n=0;n<g.length;n++)s=g[n],l=y[n],E.clearExpandedTraceDefaultColors(l),l=A.extendDeepNoArrays(l,_[s]||{});return y}(e[i],t),r=0;r<n.length;r++)a.push(n[r]);return a}},{"../lib":287,"../plot_api/plot_schema":322,"../plots/plots":371,"./helpers":550}],550:[function(e,t,n){"use strict";n.pointsAccessorFunction=function(e,t){for(var n,r,a=0;a<e.length&&(n=e[a])!==t;a++)n._indexToPoints&&!1!==n.enabled&&(r=n._indexToPoints);return r?function(e){return r[e]}:function(e){return[e]}}},{}],551:[function(e,t,a){"use strict";var m=e("../lib"),g=e("../plots/cartesian/axes"),y=e("./helpers").pointsAccessorFunction,v=e("../constants/numerical").BADNUM;a.moduleType="transform",a.name="sort",a.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},a.supplyDefaults=function(n){var r={};function e(e,t){return m.coerce(n,r,a.attributes,e,t)}return e("enabled")&&(e("target"),e("order")),r},a.calcTransform=function(e,t,n){if(n.enabled){var r=m.getTargetArray(t,n);if(r){for(var a=n.target,i=r.length,o=(t._length&&(i=Math.min(i,t._length)),t._arrayAttrs),s=function(e,t,n,r){var a,i=new Array(r),o=new Array(r);for(a=0;a<r;a++)i[a]={v:t[a],i:a};for(i.sort(function(e,n){switch(e.order){case"ascending":return function(e,t){e=n(e.v),t=n(t.v);return e===v?1:t===v?-1:e-t};case"descending":return function(e,t){e=n(e.v),t=n(t.v);return e===v?1:t===v?-1:t-e}}}(e,n)),a=0;a<r;a++)o[a]=i[a].i;return o}(n,r,g.getDataToCoordFunc(e,t,a,r),i),l=y(t.transforms,n),c={},u=0;u<o.length;u++){for(var d=m.nestedProperty(t,o[u]),f=d.get(),p=new Array(i),h=0;h<i;h++)p[h]=f[s[h]];d.set(p)}for(h=0;h<i;h++)c[h]=l(s[h]);n._indexToPoints=c,t._length=i}}}},{"../constants/numerical":267,"../lib":287,"../plots/cartesian/axes":334,"./helpers":550}],552:[function(e,t,n){"use strict";n.version="2.9.0"},{}]},{},[15])(15)});
//# sourceMappingURL=vendors.js.map
